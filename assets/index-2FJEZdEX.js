var Dae=Object.defineProperty;var d5=n=>{throw TypeError(n)};var Oae=(n,e,r)=>e in n?Dae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var Te=(n,e,r)=>Oae(n,typeof e!="symbol"?e+"":e,r),c_=(n,e,r)=>e.has(n)||d5("Cannot "+r);var oe=(n,e,r)=>(c_(n,e,"read from private field"),r?r.call(n):e.get(n)),Ge=(n,e,r)=>e.has(n)?d5("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),Me=(n,e,r,i)=>(c_(n,e,"write to private field"),i?i.call(n,r):e.set(n,r),r),Dt=(n,e,r)=>(c_(n,e,"access private method"),r);var dv=(n,e,r,i)=>({set _(s){Me(n,e,s,r)},get _(){return oe(n,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function iw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Iae(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),r}var QY={exports:{}},sw={},JY={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0=Symbol.for("react.element"),Rae=Symbol.for("react.portal"),Aae=Symbol.for("react.fragment"),Nae=Symbol.for("react.strict_mode"),jae=Symbol.for("react.profiler"),Lae=Symbol.for("react.provider"),Fae=Symbol.for("react.context"),$ae=Symbol.for("react.forward_ref"),zae=Symbol.for("react.suspense"),Bae=Symbol.for("react.memo"),Uae=Symbol.for("react.lazy"),h5=Symbol.iterator;function qae(n){return n===null||typeof n!="object"?null:(n=h5&&n[h5]||n["@@iterator"],typeof n=="function"?n:null)}var ZY={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eG=Object.assign,tG={};function wf(n,e,r){this.props=n,this.context=e,this.refs=tG,this.updater=r||ZY}wf.prototype.isReactComponent={};wf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};wf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function nG(){}nG.prototype=wf.prototype;function OI(n,e,r){this.props=n,this.context=e,this.refs=tG,this.updater=r||ZY}var II=OI.prototype=new nG;II.constructor=OI;eG(II,wf.prototype);II.isPureReactComponent=!0;var f5=Array.isArray,rG=Object.prototype.hasOwnProperty,RI={current:null},iG={key:!0,ref:!0,__self:!0,__source:!0};function sG(n,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)rG.call(e,i)&&!iG.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:i0,type:n,key:o,ref:a,props:s,_owner:RI.current}}function Wae(n,e){return{$$typeof:i0,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function AI(n){return typeof n=="object"&&n!==null&&n.$$typeof===i0}function Hae(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var p5=/\/+/g;function u_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Hae(""+n.key):e.toString(36)}function Lb(n,e,r,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case i0:case Rae:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+u_(a,0):i,f5(s)?(r="",n!=null&&(r=n.replace(p5,"$&/")+"/"),Lb(s,e,r,"",function(u){return u})):s!=null&&(AI(s)&&(s=Wae(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(p5,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",f5(n))for(var l=0;l<n.length;l++){o=n[l];var c=i+u_(o,l);a+=Lb(o,e,r,c,s)}else if(c=qae(n),typeof c=="function")for(n=c.call(n),l=0;!(o=n.next()).done;)o=o.value,c=i+u_(o,l++),a+=Lb(o,e,r,c,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function hv(n,e,r){if(n==null)return n;var i=[],s=0;return Lb(n,i,"","",function(o){return e.call(r,o,s++)}),i}function Vae(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Zr={current:null},Fb={transition:null},Yae={ReactCurrentDispatcher:Zr,ReactCurrentBatchConfig:Fb,ReactCurrentOwner:RI};function oG(){throw Error("act(...) is not supported in production builds of React.")}Mt.Children={map:hv,forEach:function(n,e,r){hv(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return hv(n,function(){e++}),e},toArray:function(n){return hv(n,function(e){return e})||[]},only:function(n){if(!AI(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Mt.Component=wf;Mt.Fragment=Aae;Mt.Profiler=jae;Mt.PureComponent=OI;Mt.StrictMode=Nae;Mt.Suspense=zae;Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yae;Mt.act=oG;Mt.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=eG({},n.props),s=n.key,o=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=RI.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)rG.call(e,c)&&!iG.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:i0,type:n.type,key:s,ref:o,props:i,_owner:a}};Mt.createContext=function(n){return n={$$typeof:Fae,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Lae,_context:n},n.Consumer=n};Mt.createElement=sG;Mt.createFactory=function(n){var e=sG.bind(null,n);return e.type=n,e};Mt.createRef=function(){return{current:null}};Mt.forwardRef=function(n){return{$$typeof:$ae,render:n}};Mt.isValidElement=AI;Mt.lazy=function(n){return{$$typeof:Uae,_payload:{_status:-1,_result:n},_init:Vae}};Mt.memo=function(n,e){return{$$typeof:Bae,type:n,compare:e===void 0?null:e}};Mt.startTransition=function(n){var e=Fb.transition;Fb.transition={};try{n()}finally{Fb.transition=e}};Mt.unstable_act=oG;Mt.useCallback=function(n,e){return Zr.current.useCallback(n,e)};Mt.useContext=function(n){return Zr.current.useContext(n)};Mt.useDebugValue=function(){};Mt.useDeferredValue=function(n){return Zr.current.useDeferredValue(n)};Mt.useEffect=function(n,e){return Zr.current.useEffect(n,e)};Mt.useId=function(){return Zr.current.useId()};Mt.useImperativeHandle=function(n,e,r){return Zr.current.useImperativeHandle(n,e,r)};Mt.useInsertionEffect=function(n,e){return Zr.current.useInsertionEffect(n,e)};Mt.useLayoutEffect=function(n,e){return Zr.current.useLayoutEffect(n,e)};Mt.useMemo=function(n,e){return Zr.current.useMemo(n,e)};Mt.useReducer=function(n,e,r){return Zr.current.useReducer(n,e,r)};Mt.useRef=function(n){return Zr.current.useRef(n)};Mt.useState=function(n){return Zr.current.useState(n)};Mt.useSyncExternalStore=function(n,e,r){return Zr.current.useSyncExternalStore(n,e,r)};Mt.useTransition=function(){return Zr.current.useTransition()};Mt.version="18.3.1";JY.exports=Mt;var D=JY.exports;const Ne=iw(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gae=D,Kae=Symbol.for("react.element"),Xae=Symbol.for("react.fragment"),Qae=Object.prototype.hasOwnProperty,Jae=Gae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zae={key:!0,ref:!0,__self:!0,__source:!0};function aG(n,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)Qae.call(e,i)&&!Zae.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:Kae,type:n,key:o,ref:a,props:s,_owner:Jae.current}}sw.Fragment=Xae;sw.jsx=aG;sw.jsxs=aG;QY.exports=sw;var m=QY.exports,LM={},lG={exports:{}},Wi={},cG={exports:{}},uG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(q,V){var F=q.length;q.push(V);e:for(;0<F;){var G=F-1>>>1,H=q[G];if(0<s(H,V))q[G]=V,q[F]=H,F=G;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var V=q[0],F=q.pop();if(F!==V){q[0]=F;e:for(var G=0,H=q.length,A=H>>>1;G<A;){var Q=2*(G+1)-1,J=q[Q],K=Q+1,Z=q[K];if(0>s(J,F))K<H&&0>s(Z,J)?(q[G]=Z,q[K]=F,G=K):(q[G]=J,q[Q]=F,G=Q);else if(K<H&&0>s(Z,F))q[G]=Z,q[K]=F,G=K;else break e}}return V}function s(q,V){var F=q.sortIndex-V.sortIndex;return F!==0?F:q.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(q){for(var V=r(u);V!==null;){if(V.callback===null)i(u);else if(V.startTime<=q)i(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=r(u)}}function _(q){if(b=!1,k(q),!g)if(r(c)!==null)g=!0,z(S);else{var V=r(u);V!==null&&W(_,V.startTime-q)}}function S(q,V){g=!1,b&&(b=!1,v(P),P=-1),p=!0;var F=f;try{for(k(V),d=r(c);d!==null&&(!(d.expirationTime>V)||q&&!R());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var H=G(d.expirationTime<=V);V=n.unstable_now(),typeof H=="function"?d.callback=H:d===r(c)&&i(c),k(V)}else i(c);d=r(c)}if(d!==null)var A=!0;else{var Q=r(u);Q!==null&&W(_,Q.startTime-V),A=!1}return A}finally{d=null,f=F,p=!1}}var C=!1,E=null,P=-1,O=5,M=-1;function R(){return!(n.unstable_now()-M<O)}function j(){if(E!==null){var q=n.unstable_now();M=q;var V=!0;try{V=E(!0,q)}finally{V?B():(C=!1,E=null)}}else C=!1}var B;if(typeof w=="function")B=function(){w(j)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,$=L.port2;L.port1.onmessage=j,B=function(){$.postMessage(null)}}else B=function(){y(j,0)};function z(q){E=q,C||(C=!0,B())}function W(q,V){P=y(function(){q(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,z(S))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return r(c)},n.unstable_next=function(q){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var F=f;f=V;try{return q()}finally{f=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,V){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var F=f;f=q;try{return V()}finally{f=F}},n.unstable_scheduleCallback=function(q,V,F){var G=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?G+F:G):F=G,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=F+H,q={id:h++,callback:V,priorityLevel:q,startTime:F,expirationTime:H,sortIndex:-1},F>G?(q.sortIndex=F,e(u,q),r(c)===null&&q===r(u)&&(b?(v(P),P=-1):b=!0,W(_,F-G))):(q.sortIndex=H,e(c,q),g||p||(g=!0,z(S))),q},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(q){var V=f;return function(){var F=f;f=V;try{return q.apply(this,arguments)}finally{f=F}}}})(uG);cG.exports=uG;var ele=cG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tle=D,Bi=ele;function ze(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dG=new Set,zm={};function ju(n,e){Nh(n,e),Nh(n+"Capture",e)}function Nh(n,e){for(zm[n]=e,n=0;n<e.length;n++)dG.add(e[n])}var Pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),FM=Object.prototype.hasOwnProperty,nle=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m5={},g5={};function rle(n){return FM.call(g5,n)?!0:FM.call(m5,n)?!1:nle.test(n)?g5[n]=!0:(m5[n]=!0,!1)}function ile(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function sle(n,e,r,i){if(e===null||typeof e>"u"||ile(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ei(n,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Sr[n]=new ei(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Sr[e]=new ei(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Sr[n]=new ei(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Sr[n]=new ei(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Sr[n]=new ei(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Sr[n]=new ei(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Sr[n]=new ei(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Sr[n]=new ei(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Sr[n]=new ei(n,5,!1,n.toLowerCase(),null,!1,!1)});var NI=/[\-:]([a-z])/g;function jI(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(NI,jI);Sr[e]=new ei(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(NI,jI);Sr[e]=new ei(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(NI,jI);Sr[e]=new ei(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Sr[n]=new ei(n,1,!1,n.toLowerCase(),null,!1,!1)});Sr.xlinkHref=new ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Sr[n]=new ei(n,1,!1,n.toLowerCase(),null,!0,!0)});function LI(n,e,r,i){var s=Sr.hasOwnProperty(e)?Sr[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sle(e,r,s,i)&&(r=null),i||s===null?rle(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):s.mustUseProperty?n[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?n.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var ja=tle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fv=Symbol.for("react.element"),kd=Symbol.for("react.portal"),Cd=Symbol.for("react.fragment"),FI=Symbol.for("react.strict_mode"),$M=Symbol.for("react.profiler"),hG=Symbol.for("react.provider"),fG=Symbol.for("react.context"),$I=Symbol.for("react.forward_ref"),zM=Symbol.for("react.suspense"),BM=Symbol.for("react.suspense_list"),zI=Symbol.for("react.memo"),al=Symbol.for("react.lazy"),pG=Symbol.for("react.offscreen"),v5=Symbol.iterator;function np(n){return n===null||typeof n!="object"?null:(n=v5&&n[v5]||n["@@iterator"],typeof n=="function"?n:null)}var Dn=Object.assign,d_;function Wp(n){if(d_===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);d_=e&&e[1]||""}return`
`+d_+n}var h_=!1;function f_(n,e){if(!n||h_)return"";h_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=l);break}}}finally{h_=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?Wp(n):""}function ole(n){switch(n.tag){case 5:return Wp(n.type);case 16:return Wp("Lazy");case 13:return Wp("Suspense");case 19:return Wp("SuspenseList");case 0:case 2:case 15:return n=f_(n.type,!1),n;case 11:return n=f_(n.type.render,!1),n;case 1:return n=f_(n.type,!0),n;default:return""}}function UM(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Cd:return"Fragment";case kd:return"Portal";case $M:return"Profiler";case FI:return"StrictMode";case zM:return"Suspense";case BM:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case fG:return(n.displayName||"Context")+".Consumer";case hG:return(n._context.displayName||"Context")+".Provider";case $I:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case zI:return e=n.displayName||null,e!==null?e:UM(n.type)||"Memo";case al:e=n._payload,n=n._init;try{return UM(n(e))}catch{}}return null}function ale(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return UM(e);case 8:return e===FI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ql(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mG(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lle(n){var e=mG(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function pv(n){n._valueTracker||(n._valueTracker=lle(n))}function gG(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=mG(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function Sy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function qM(n,e){var r=e.checked;return Dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function b5(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=ql(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vG(n,e){e=e.checked,e!=null&&LI(n,"checked",e,!1)}function WM(n,e){vG(n,e);var r=ql(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?HM(n,e.type,r):e.hasOwnProperty("defaultValue")&&HM(n,e.type,ql(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function y5(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function HM(n,e,r){(e!=="number"||Sy(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var Hp=Array.isArray;function Hd(n,e,r,i){if(n=n.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<n.length;r++)s=e.hasOwnProperty("$"+n[r].value),n[r].selected!==s&&(n[r].selected=s),s&&i&&(n[r].defaultSelected=!0)}else{for(r=""+ql(r),e=null,s=0;s<n.length;s++){if(n[s].value===r){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function VM(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ze(91));return Dn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function x5(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ze(92));if(Hp(r)){if(1<r.length)throw Error(ze(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:ql(r)}}function bG(n,e){var r=ql(e.value),i=ql(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function w5(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function yG(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function YM(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?yG(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mv,xG=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(mv=mv||document.createElement("div"),mv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Bm(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var um={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cle=["Webkit","ms","Moz","O"];Object.keys(um).forEach(function(n){cle.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),um[e]=um[n]})});function wG(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||um.hasOwnProperty(n)&&um[n]?(""+e).trim():e+"px"}function _G(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=wG(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var ule=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function GM(n,e){if(e){if(ule[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ze(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ze(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ze(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ze(62))}}function KM(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XM=null;function BI(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var QM=null,Vd=null,Yd=null;function _5(n){if(n=a0(n)){if(typeof QM!="function")throw Error(ze(280));var e=n.stateNode;e&&(e=uw(e),QM(n.stateNode,n.type,e))}}function SG(n){Vd?Yd?Yd.push(n):Yd=[n]:Vd=n}function kG(){if(Vd){var n=Vd,e=Yd;if(Yd=Vd=null,_5(n),e)for(n=0;n<e.length;n++)_5(e[n])}}function CG(n,e){return n(e)}function EG(){}var p_=!1;function TG(n,e,r){if(p_)return n(e,r);p_=!0;try{return CG(n,e,r)}finally{p_=!1,(Vd!==null||Yd!==null)&&(EG(),kG())}}function Um(n,e){var r=n.stateNode;if(r===null)return null;var i=uw(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(ze(231,e,typeof r));return r}var JM=!1;if(Pa)try{var rp={};Object.defineProperty(rp,"passive",{get:function(){JM=!0}}),window.addEventListener("test",rp,rp),window.removeEventListener("test",rp,rp)}catch{JM=!1}function dle(n,e,r,i,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var dm=!1,ky=null,Cy=!1,ZM=null,hle={onError:function(n){dm=!0,ky=n}};function fle(n,e,r,i,s,o,a,l,c){dm=!1,ky=null,dle.apply(hle,arguments)}function ple(n,e,r,i,s,o,a,l,c){if(fle.apply(this,arguments),dm){if(dm){var u=ky;dm=!1,ky=null}else throw Error(ze(198));Cy||(Cy=!0,ZM=u)}}function Lu(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function PG(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function S5(n){if(Lu(n)!==n)throw Error(ze(188))}function mle(n){var e=n.alternate;if(!e){if(e=Lu(n),e===null)throw Error(ze(188));return e!==n?null:n}for(var r=n,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return S5(s),n;if(o===i)return S5(s),e;o=o.sibling}throw Error(ze(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(ze(189))}}if(r.alternate!==i)throw Error(ze(190))}if(r.tag!==3)throw Error(ze(188));return r.stateNode.current===r?n:e}function MG(n){return n=mle(n),n!==null?DG(n):null}function DG(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=DG(n);if(e!==null)return e;n=n.sibling}return null}var OG=Bi.unstable_scheduleCallback,k5=Bi.unstable_cancelCallback,gle=Bi.unstable_shouldYield,vle=Bi.unstable_requestPaint,Un=Bi.unstable_now,ble=Bi.unstable_getCurrentPriorityLevel,UI=Bi.unstable_ImmediatePriority,IG=Bi.unstable_UserBlockingPriority,Ey=Bi.unstable_NormalPriority,yle=Bi.unstable_LowPriority,RG=Bi.unstable_IdlePriority,ow=null,Co=null;function xle(n){if(Co&&typeof Co.onCommitFiberRoot=="function")try{Co.onCommitFiberRoot(ow,n,void 0,(n.current.flags&128)===128)}catch{}}var qs=Math.clz32?Math.clz32:Sle,wle=Math.log,_le=Math.LN2;function Sle(n){return n>>>=0,n===0?32:31-(wle(n)/_le|0)|0}var gv=64,vv=4194304;function Vp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ty(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?i=Vp(l):(o&=a,o!==0&&(i=Vp(o)))}else a=r&~s,a!==0?i=Vp(a):o!==0&&(i=Vp(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-qs(e),s=1<<r,i|=n[r],e&=~s;return i}function kle(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cle(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-qs(o),l=1<<a,c=s[a];c===-1?(!(l&r)||l&i)&&(s[a]=kle(l,e)):c<=e&&(n.expiredLanes|=l),o&=~l}}function eD(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function AG(){var n=gv;return gv<<=1,!(gv&4194240)&&(gv=64),n}function m_(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function s0(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-qs(e),n[e]=r}function Ele(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var s=31-qs(r),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,r&=~o}}function qI(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-qs(r),s=1<<i;s&e|n[i]&e&&(n[i]|=e),r&=~s}}var Qt=0;function NG(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var jG,WI,LG,FG,$G,tD=!1,bv=[],Ml=null,Dl=null,Ol=null,qm=new Map,Wm=new Map,cl=[],Tle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C5(n,e){switch(n){case"focusin":case"focusout":Ml=null;break;case"dragenter":case"dragleave":Dl=null;break;case"mouseover":case"mouseout":Ol=null;break;case"pointerover":case"pointerout":qm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wm.delete(e.pointerId)}}function ip(n,e,r,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=a0(e),e!==null&&WI(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function Ple(n,e,r,i,s){switch(e){case"focusin":return Ml=ip(Ml,n,e,r,i,s),!0;case"dragenter":return Dl=ip(Dl,n,e,r,i,s),!0;case"mouseover":return Ol=ip(Ol,n,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return qm.set(o,ip(qm.get(o)||null,n,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Wm.set(o,ip(Wm.get(o)||null,n,e,r,i,s)),!0}return!1}function zG(n){var e=Ic(n.target);if(e!==null){var r=Lu(e);if(r!==null){if(e=r.tag,e===13){if(e=PG(r),e!==null){n.blockedOn=e,$G(n.priority,function(){LG(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $b(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=nD(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);XM=i,r.target.dispatchEvent(i),XM=null}else return e=a0(r),e!==null&&WI(e),n.blockedOn=r,!1;e.shift()}return!0}function E5(n,e,r){$b(n)&&r.delete(e)}function Mle(){tD=!1,Ml!==null&&$b(Ml)&&(Ml=null),Dl!==null&&$b(Dl)&&(Dl=null),Ol!==null&&$b(Ol)&&(Ol=null),qm.forEach(E5),Wm.forEach(E5)}function sp(n,e){n.blockedOn===e&&(n.blockedOn=null,tD||(tD=!0,Bi.unstable_scheduleCallback(Bi.unstable_NormalPriority,Mle)))}function Hm(n){function e(s){return sp(s,n)}if(0<bv.length){sp(bv[0],n);for(var r=1;r<bv.length;r++){var i=bv[r];i.blockedOn===n&&(i.blockedOn=null)}}for(Ml!==null&&sp(Ml,n),Dl!==null&&sp(Dl,n),Ol!==null&&sp(Ol,n),qm.forEach(e),Wm.forEach(e),r=0;r<cl.length;r++)i=cl[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<cl.length&&(r=cl[0],r.blockedOn===null);)zG(r),r.blockedOn===null&&cl.shift()}var Gd=ja.ReactCurrentBatchConfig,Py=!0;function Dle(n,e,r,i){var s=Qt,o=Gd.transition;Gd.transition=null;try{Qt=1,HI(n,e,r,i)}finally{Qt=s,Gd.transition=o}}function Ole(n,e,r,i){var s=Qt,o=Gd.transition;Gd.transition=null;try{Qt=4,HI(n,e,r,i)}finally{Qt=s,Gd.transition=o}}function HI(n,e,r,i){if(Py){var s=nD(n,e,r,i);if(s===null)C_(n,e,i,My,r),C5(n,i);else if(Ple(s,n,e,r,i))i.stopPropagation();else if(C5(n,i),e&4&&-1<Tle.indexOf(n)){for(;s!==null;){var o=a0(s);if(o!==null&&jG(o),o=nD(n,e,r,i),o===null&&C_(n,e,i,My,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else C_(n,e,i,null,r)}}var My=null;function nD(n,e,r,i){if(My=null,n=BI(i),n=Ic(n),n!==null)if(e=Lu(n),e===null)n=null;else if(r=e.tag,r===13){if(n=PG(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return My=n,null}function BG(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ble()){case UI:return 1;case IG:return 4;case Ey:case yle:return 16;case RG:return 536870912;default:return 16}default:return 16}}var Sl=null,VI=null,zb=null;function UG(){if(zb)return zb;var n,e=VI,r=e.length,i,s="value"in Sl?Sl.value:Sl.textContent,o=s.length;for(n=0;n<r&&e[n]===s[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return zb=s.slice(n,1<i?1-i:void 0)}function Bb(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function yv(){return!0}function T5(){return!1}function Hi(n){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?yv:T5,this.isPropagationStopped=T5,this}return Dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yv)},persist:function(){},isPersistent:yv}),e}var _f={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},YI=Hi(_f),o0=Dn({},_f,{view:0,detail:0}),Ile=Hi(o0),g_,v_,op,aw=Dn({},o0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:GI,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==op&&(op&&n.type==="mousemove"?(g_=n.screenX-op.screenX,v_=n.screenY-op.screenY):v_=g_=0,op=n),g_)},movementY:function(n){return"movementY"in n?n.movementY:v_}}),P5=Hi(aw),Rle=Dn({},aw,{dataTransfer:0}),Ale=Hi(Rle),Nle=Dn({},o0,{relatedTarget:0}),b_=Hi(Nle),jle=Dn({},_f,{animationName:0,elapsedTime:0,pseudoElement:0}),Lle=Hi(jle),Fle=Dn({},_f,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$le=Hi(Fle),zle=Dn({},_f,{data:0}),M5=Hi(zle),Ble={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ule={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wle(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=qle[n])?!!e[n]:!1}function GI(){return Wle}var Hle=Dn({},o0,{key:function(n){if(n.key){var e=Ble[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Bb(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ule[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:GI,charCode:function(n){return n.type==="keypress"?Bb(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bb(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Vle=Hi(Hle),Yle=Dn({},aw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D5=Hi(Yle),Gle=Dn({},o0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:GI}),Kle=Hi(Gle),Xle=Dn({},_f,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qle=Hi(Xle),Jle=Dn({},aw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Zle=Hi(Jle),ece=[9,13,27,32],KI=Pa&&"CompositionEvent"in window,hm=null;Pa&&"documentMode"in document&&(hm=document.documentMode);var tce=Pa&&"TextEvent"in window&&!hm,qG=Pa&&(!KI||hm&&8<hm&&11>=hm),O5=" ",I5=!1;function WG(n,e){switch(n){case"keyup":return ece.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HG(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ed=!1;function nce(n,e){switch(n){case"compositionend":return HG(e);case"keypress":return e.which!==32?null:(I5=!0,O5);case"textInput":return n=e.data,n===O5&&I5?null:n;default:return null}}function rce(n,e){if(Ed)return n==="compositionend"||!KI&&WG(n,e)?(n=UG(),zb=VI=Sl=null,Ed=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qG&&e.locale!=="ko"?null:e.data;default:return null}}var ice={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R5(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!ice[n.type]:e==="textarea"}function VG(n,e,r,i){SG(i),e=Dy(e,"onChange"),0<e.length&&(r=new YI("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var fm=null,Vm=null;function sce(n){rK(n,0)}function lw(n){var e=Md(n);if(gG(e))return n}function oce(n,e){if(n==="change")return e}var YG=!1;if(Pa){var y_;if(Pa){var x_="oninput"in document;if(!x_){var A5=document.createElement("div");A5.setAttribute("oninput","return;"),x_=typeof A5.oninput=="function"}y_=x_}else y_=!1;YG=y_&&(!document.documentMode||9<document.documentMode)}function N5(){fm&&(fm.detachEvent("onpropertychange",GG),Vm=fm=null)}function GG(n){if(n.propertyName==="value"&&lw(Vm)){var e=[];VG(e,Vm,n,BI(n)),TG(sce,e)}}function ace(n,e,r){n==="focusin"?(N5(),fm=e,Vm=r,fm.attachEvent("onpropertychange",GG)):n==="focusout"&&N5()}function lce(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lw(Vm)}function cce(n,e){if(n==="click")return lw(e)}function uce(n,e){if(n==="input"||n==="change")return lw(e)}function dce(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Vs=typeof Object.is=="function"?Object.is:dce;function Ym(n,e){if(Vs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!FM.call(e,s)||!Vs(n[s],e[s]))return!1}return!0}function j5(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function L5(n,e){var r=j5(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=j5(r)}}function KG(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?KG(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function XG(){for(var n=window,e=Sy();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=Sy(n.document)}return e}function XI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function hce(n){var e=XG(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&KG(r.ownerDocument.documentElement,r)){if(i!==null&&XI(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=L5(r,o);var a=L5(r,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var fce=Pa&&"documentMode"in document&&11>=document.documentMode,Td=null,rD=null,pm=null,iD=!1;function F5(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;iD||Td==null||Td!==Sy(i)||(i=Td,"selectionStart"in i&&XI(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pm&&Ym(pm,i)||(pm=i,i=Dy(rD,"onSelect"),0<i.length&&(e=new YI("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=Td)))}function xv(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var Pd={animationend:xv("Animation","AnimationEnd"),animationiteration:xv("Animation","AnimationIteration"),animationstart:xv("Animation","AnimationStart"),transitionend:xv("Transition","TransitionEnd")},w_={},QG={};Pa&&(QG=document.createElement("div").style,"AnimationEvent"in window||(delete Pd.animationend.animation,delete Pd.animationiteration.animation,delete Pd.animationstart.animation),"TransitionEvent"in window||delete Pd.transitionend.transition);function cw(n){if(w_[n])return w_[n];if(!Pd[n])return n;var e=Pd[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in QG)return w_[n]=e[r];return n}var JG=cw("animationend"),ZG=cw("animationiteration"),eK=cw("animationstart"),tK=cw("transitionend"),nK=new Map,$5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gl(n,e){nK.set(n,e),ju(e,[n])}for(var __=0;__<$5.length;__++){var S_=$5[__],pce=S_.toLowerCase(),mce=S_[0].toUpperCase()+S_.slice(1);Gl(pce,"on"+mce)}Gl(JG,"onAnimationEnd");Gl(ZG,"onAnimationIteration");Gl(eK,"onAnimationStart");Gl("dblclick","onDoubleClick");Gl("focusin","onFocus");Gl("focusout","onBlur");Gl(tK,"onTransitionEnd");Nh("onMouseEnter",["mouseout","mouseover"]);Nh("onMouseLeave",["mouseout","mouseover"]);Nh("onPointerEnter",["pointerout","pointerover"]);Nh("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gce=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yp));function z5(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,ple(i,e,void 0,n),n.currentTarget=null}function rK(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;z5(s,l,u),o=c}else for(a=0;a<i.length;a++){if(l=i[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;z5(s,l,u),o=c}}}if(Cy)throw n=ZM,Cy=!1,ZM=null,n}function pn(n,e){var r=e[cD];r===void 0&&(r=e[cD]=new Set);var i=n+"__bubble";r.has(i)||(iK(e,n,2,!1),r.add(i))}function k_(n,e,r){var i=0;e&&(i|=4),iK(r,n,i,e)}var wv="_reactListening"+Math.random().toString(36).slice(2);function Gm(n){if(!n[wv]){n[wv]=!0,dG.forEach(function(r){r!=="selectionchange"&&(gce.has(r)||k_(r,!1,n),k_(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[wv]||(e[wv]=!0,k_("selectionchange",!1,e))}}function iK(n,e,r,i){switch(BG(e)){case 1:var s=Dle;break;case 4:s=Ole;break;default:s=HI}r=s.bind(null,e,r,n),s=void 0,!JM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,r,{capture:!0,passive:s}):n.addEventListener(e,r,!0):s!==void 0?n.addEventListener(e,r,{passive:s}):n.addEventListener(e,r,!1)}function C_(n,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ic(l),a===null)return;if(c=a.tag,c===5||c===6){i=o=a;continue e}l=l.parentNode}}i=i.return}TG(function(){var u=o,h=BI(r),d=[];e:{var f=nK.get(n);if(f!==void 0){var p=YI,g=n;switch(n){case"keypress":if(Bb(r)===0)break e;case"keydown":case"keyup":p=Vle;break;case"focusin":g="focus",p=b_;break;case"focusout":g="blur",p=b_;break;case"beforeblur":case"afterblur":p=b_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=P5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Ale;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Kle;break;case JG:case ZG:case eK:p=Lle;break;case tK:p=Qle;break;case"scroll":p=Ile;break;case"wheel":p=Zle;break;case"copy":case"cut":case"paste":p=$le;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=D5}var b=(e&4)!==0,y=!b&&n==="scroll",v=b?f!==null?f+"Capture":null:f;b=[];for(var w=u,k;w!==null;){k=w;var _=k.stateNode;if(k.tag===5&&_!==null&&(k=_,v!==null&&(_=Um(w,v),_!=null&&b.push(Km(w,_,k)))),y)break;w=w.return}0<b.length&&(f=new p(f,g,null,r,h),d.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&r!==XM&&(g=r.relatedTarget||r.fromElement)&&(Ic(g)||g[Ma]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?Ic(g):null,g!==null&&(y=Lu(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(b=P5,_="onMouseLeave",v="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(b=D5,_="onPointerLeave",v="onPointerEnter",w="pointer"),y=p==null?f:Md(p),k=g==null?f:Md(g),f=new b(_,w+"leave",p,r,h),f.target=y,f.relatedTarget=k,_=null,Ic(h)===u&&(b=new b(v,w+"enter",g,r,h),b.target=k,b.relatedTarget=y,_=b),y=_,p&&g)t:{for(b=p,v=g,w=0,k=b;k;k=od(k))w++;for(k=0,_=v;_;_=od(_))k++;for(;0<w-k;)b=od(b),w--;for(;0<k-w;)v=od(v),k--;for(;w--;){if(b===v||v!==null&&b===v.alternate)break t;b=od(b),v=od(v)}b=null}else b=null;p!==null&&B5(d,f,p,b,!1),g!==null&&y!==null&&B5(d,y,g,b,!0)}}e:{if(f=u?Md(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=oce;else if(R5(f))if(YG)S=uce;else{S=lce;var C=ace}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=cce);if(S&&(S=S(n,u))){VG(d,S,r,h);break e}C&&C(n,f,u),n==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&HM(f,"number",f.value)}switch(C=u?Md(u):window,n){case"focusin":(R5(C)||C.contentEditable==="true")&&(Td=C,rD=u,pm=null);break;case"focusout":pm=rD=Td=null;break;case"mousedown":iD=!0;break;case"contextmenu":case"mouseup":case"dragend":iD=!1,F5(d,r,h);break;case"selectionchange":if(fce)break;case"keydown":case"keyup":F5(d,r,h)}var E;if(KI)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ed?WG(n,r)&&(P="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(qG&&r.locale!=="ko"&&(Ed||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ed&&(E=UG()):(Sl=h,VI="value"in Sl?Sl.value:Sl.textContent,Ed=!0)),C=Dy(u,P),0<C.length&&(P=new M5(P,n,null,r,h),d.push({event:P,listeners:C}),E?P.data=E:(E=HG(r),E!==null&&(P.data=E)))),(E=tce?nce(n,r):rce(n,r))&&(u=Dy(u,"onBeforeInput"),0<u.length&&(h=new M5("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=E))}rK(d,e)})}function Km(n,e,r){return{instance:n,listener:e,currentTarget:r}}function Dy(n,e){for(var r=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Um(n,r),o!=null&&i.unshift(Km(n,o,s)),o=Um(n,e),o!=null&&i.push(Km(n,o,s))),n=n.return}return i}function od(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function B5(n,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,s?(c=Um(r,o),c!=null&&a.unshift(Km(r,c,l))):s||(c=Um(r,o),c!=null&&a.push(Km(r,c,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var vce=/\r\n?/g,bce=/\u0000|\uFFFD/g;function U5(n){return(typeof n=="string"?n:""+n).replace(vce,`
`).replace(bce,"")}function _v(n,e,r){if(e=U5(e),U5(n)!==e&&r)throw Error(ze(425))}function Oy(){}var sD=null,oD=null;function aD(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lD=typeof setTimeout=="function"?setTimeout:void 0,yce=typeof clearTimeout=="function"?clearTimeout:void 0,q5=typeof Promise=="function"?Promise:void 0,xce=typeof queueMicrotask=="function"?queueMicrotask:typeof q5<"u"?function(n){return q5.resolve(null).then(n).catch(wce)}:lD;function wce(n){setTimeout(function(){throw n})}function E_(n,e){var r=e,i=0;do{var s=r.nextSibling;if(n.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){n.removeChild(s),Hm(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);Hm(e)}function Il(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function W5(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var Sf=Math.random().toString(36).slice(2),xo="__reactFiber$"+Sf,Xm="__reactProps$"+Sf,Ma="__reactContainer$"+Sf,cD="__reactEvents$"+Sf,_ce="__reactListeners$"+Sf,Sce="__reactHandles$"+Sf;function Ic(n){var e=n[xo];if(e)return e;for(var r=n.parentNode;r;){if(e=r[Ma]||r[xo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=W5(n);n!==null;){if(r=n[xo])return r;n=W5(n)}return e}n=r,r=n.parentNode}return null}function a0(n){return n=n[xo]||n[Ma],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Md(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ze(33))}function uw(n){return n[Xm]||null}var uD=[],Dd=-1;function Kl(n){return{current:n}}function gn(n){0>Dd||(n.current=uD[Dd],uD[Dd]=null,Dd--)}function un(n,e){Dd++,uD[Dd]=n.current,n.current=e}var Wl={},Ar=Kl(Wl),mi=Kl(!1),hu=Wl;function jh(n,e){var r=n.type.contextTypes;if(!r)return Wl;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function gi(n){return n=n.childContextTypes,n!=null}function Iy(){gn(mi),gn(Ar)}function H5(n,e,r){if(Ar.current!==Wl)throw Error(ze(168));un(Ar,e),un(mi,r)}function sK(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ze(108,ale(n)||"Unknown",s));return Dn({},r,i)}function Ry(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Wl,hu=Ar.current,un(Ar,n),un(mi,mi.current),!0}function V5(n,e,r){var i=n.stateNode;if(!i)throw Error(ze(169));r?(n=sK(n,e,hu),i.__reactInternalMemoizedMergedChildContext=n,gn(mi),gn(Ar),un(Ar,n)):gn(mi),un(mi,r)}var ta=null,dw=!1,T_=!1;function oK(n){ta===null?ta=[n]:ta.push(n)}function kce(n){dw=!0,oK(n)}function Xl(){if(!T_&&ta!==null){T_=!0;var n=0,e=Qt;try{var r=ta;for(Qt=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}ta=null,dw=!1}catch(s){throw ta!==null&&(ta=ta.slice(n+1)),OG(UI,Xl),s}finally{Qt=e,T_=!1}}return null}var Od=[],Id=0,Ay=null,Ny=0,us=[],ds=0,fu=null,ha=1,fa="";function xc(n,e){Od[Id++]=Ny,Od[Id++]=Ay,Ay=n,Ny=e}function aK(n,e,r){us[ds++]=ha,us[ds++]=fa,us[ds++]=fu,fu=n;var i=ha;n=fa;var s=32-qs(i)-1;i&=~(1<<s),r+=1;var o=32-qs(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,ha=1<<32-qs(e)+s|r<<s|i,fa=o+n}else ha=1<<o|r<<s|i,fa=n}function QI(n){n.return!==null&&(xc(n,1),aK(n,1,0))}function JI(n){for(;n===Ay;)Ay=Od[--Id],Od[Id]=null,Ny=Od[--Id],Od[Id]=null;for(;n===fu;)fu=us[--ds],us[ds]=null,fa=us[--ds],us[ds]=null,ha=us[--ds],us[ds]=null}var ji=null,Ni=null,kn=!1,Fs=null;function lK(n,e){var r=fs(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function Y5(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ji=n,Ni=Il(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ji=n,Ni=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=fu!==null?{id:ha,overflow:fa}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=fs(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,ji=n,Ni=null,!0):!1;default:return!1}}function dD(n){return(n.mode&1)!==0&&(n.flags&128)===0}function hD(n){if(kn){var e=Ni;if(e){var r=e;if(!Y5(n,e)){if(dD(n))throw Error(ze(418));e=Il(r.nextSibling);var i=ji;e&&Y5(n,e)?lK(i,r):(n.flags=n.flags&-4097|2,kn=!1,ji=n)}}else{if(dD(n))throw Error(ze(418));n.flags=n.flags&-4097|2,kn=!1,ji=n}}}function G5(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ji=n}function Sv(n){if(n!==ji)return!1;if(!kn)return G5(n),kn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!aD(n.type,n.memoizedProps)),e&&(e=Ni)){if(dD(n))throw cK(),Error(ze(418));for(;e;)lK(n,e),e=Il(e.nextSibling)}if(G5(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ze(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){Ni=Il(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}Ni=null}}else Ni=ji?Il(n.stateNode.nextSibling):null;return!0}function cK(){for(var n=Ni;n;)n=Il(n.nextSibling)}function Lh(){Ni=ji=null,kn=!1}function ZI(n){Fs===null?Fs=[n]:Fs.push(n)}var Cce=ja.ReactCurrentBatchConfig;function ap(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ze(309));var i=r.stateNode}if(!i)throw Error(ze(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof n!="string")throw Error(ze(284));if(!r._owner)throw Error(ze(290,n))}return n}function kv(n,e){throw n=Object.prototype.toString.call(e),Error(ze(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function K5(n){var e=n._init;return e(n._payload)}function uK(n){function e(v,w){if(n){var k=v.deletions;k===null?(v.deletions=[w],v.flags|=16):k.push(w)}}function r(v,w){if(!n)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=jl(v,w),v.index=0,v.sibling=null,v}function o(v,w,k){return v.index=k,n?(k=v.alternate,k!==null?(k=k.index,k<w?(v.flags|=2,w):k):(v.flags|=2,w)):(v.flags|=1048576,w)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function l(v,w,k,_){return w===null||w.tag!==6?(w=A_(k,v.mode,_),w.return=v,w):(w=s(w,k),w.return=v,w)}function c(v,w,k,_){var S=k.type;return S===Cd?h(v,w,k.props.children,_,k.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===al&&K5(S)===w.type)?(_=s(w,k.props),_.ref=ap(v,w,k),_.return=v,_):(_=Gb(k.type,k.key,k.props,null,v.mode,_),_.ref=ap(v,w,k),_.return=v,_)}function u(v,w,k,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=N_(k,v.mode,_),w.return=v,w):(w=s(w,k.children||[]),w.return=v,w)}function h(v,w,k,_,S){return w===null||w.tag!==7?(w=eu(k,v.mode,_,S),w.return=v,w):(w=s(w,k),w.return=v,w)}function d(v,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=A_(""+w,v.mode,k),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fv:return k=Gb(w.type,w.key,w.props,null,v.mode,k),k.ref=ap(v,null,w),k.return=v,k;case kd:return w=N_(w,v.mode,k),w.return=v,w;case al:var _=w._init;return d(v,_(w._payload),k)}if(Hp(w)||np(w))return w=eu(w,v.mode,k,null),w.return=v,w;kv(v,w)}return null}function f(v,w,k,_){var S=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return S!==null?null:l(v,w,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case fv:return k.key===S?c(v,w,k,_):null;case kd:return k.key===S?u(v,w,k,_):null;case al:return S=k._init,f(v,w,S(k._payload),_)}if(Hp(k)||np(k))return S!==null?null:h(v,w,k,_,null);kv(v,k)}return null}function p(v,w,k,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(k)||null,l(w,v,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fv:return v=v.get(_.key===null?k:_.key)||null,c(w,v,_,S);case kd:return v=v.get(_.key===null?k:_.key)||null,u(w,v,_,S);case al:var C=_._init;return p(v,w,k,C(_._payload),S)}if(Hp(_)||np(_))return v=v.get(k)||null,h(w,v,_,S,null);kv(w,_)}return null}function g(v,w,k,_){for(var S=null,C=null,E=w,P=w=0,O=null;E!==null&&P<k.length;P++){E.index>P?(O=E,E=null):O=E.sibling;var M=f(v,E,k[P],_);if(M===null){E===null&&(E=O);break}n&&E&&M.alternate===null&&e(v,E),w=o(M,w,P),C===null?S=M:C.sibling=M,C=M,E=O}if(P===k.length)return r(v,E),kn&&xc(v,P),S;if(E===null){for(;P<k.length;P++)E=d(v,k[P],_),E!==null&&(w=o(E,w,P),C===null?S=E:C.sibling=E,C=E);return kn&&xc(v,P),S}for(E=i(v,E);P<k.length;P++)O=p(E,v,P,k[P],_),O!==null&&(n&&O.alternate!==null&&E.delete(O.key===null?P:O.key),w=o(O,w,P),C===null?S=O:C.sibling=O,C=O);return n&&E.forEach(function(R){return e(v,R)}),kn&&xc(v,P),S}function b(v,w,k,_){var S=np(k);if(typeof S!="function")throw Error(ze(150));if(k=S.call(k),k==null)throw Error(ze(151));for(var C=S=null,E=w,P=w=0,O=null,M=k.next();E!==null&&!M.done;P++,M=k.next()){E.index>P?(O=E,E=null):O=E.sibling;var R=f(v,E,M.value,_);if(R===null){E===null&&(E=O);break}n&&E&&R.alternate===null&&e(v,E),w=o(R,w,P),C===null?S=R:C.sibling=R,C=R,E=O}if(M.done)return r(v,E),kn&&xc(v,P),S;if(E===null){for(;!M.done;P++,M=k.next())M=d(v,M.value,_),M!==null&&(w=o(M,w,P),C===null?S=M:C.sibling=M,C=M);return kn&&xc(v,P),S}for(E=i(v,E);!M.done;P++,M=k.next())M=p(E,v,P,M.value,_),M!==null&&(n&&M.alternate!==null&&E.delete(M.key===null?P:M.key),w=o(M,w,P),C===null?S=M:C.sibling=M,C=M);return n&&E.forEach(function(j){return e(v,j)}),kn&&xc(v,P),S}function y(v,w,k,_){if(typeof k=="object"&&k!==null&&k.type===Cd&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case fv:e:{for(var S=k.key,C=w;C!==null;){if(C.key===S){if(S=k.type,S===Cd){if(C.tag===7){r(v,C.sibling),w=s(C,k.props.children),w.return=v,v=w;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===al&&K5(S)===C.type){r(v,C.sibling),w=s(C,k.props),w.ref=ap(v,C,k),w.return=v,v=w;break e}r(v,C);break}else e(v,C);C=C.sibling}k.type===Cd?(w=eu(k.props.children,v.mode,_,k.key),w.return=v,v=w):(_=Gb(k.type,k.key,k.props,null,v.mode,_),_.ref=ap(v,w,k),_.return=v,v=_)}return a(v);case kd:e:{for(C=k.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){r(v,w.sibling),w=s(w,k.children||[]),w.return=v,v=w;break e}else{r(v,w);break}else e(v,w);w=w.sibling}w=N_(k,v.mode,_),w.return=v,v=w}return a(v);case al:return C=k._init,y(v,w,C(k._payload),_)}if(Hp(k))return g(v,w,k,_);if(np(k))return b(v,w,k,_);kv(v,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(r(v,w.sibling),w=s(w,k),w.return=v,v=w):(r(v,w),w=A_(k,v.mode,_),w.return=v,v=w),a(v)):r(v,w)}return y}var Fh=uK(!0),dK=uK(!1),jy=Kl(null),Ly=null,Rd=null,eR=null;function tR(){eR=Rd=Ly=null}function nR(n){var e=jy.current;gn(jy),n._currentValue=e}function fD(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function Kd(n,e){Ly=n,eR=Rd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(fi=!0),n.firstContext=null)}function ys(n){var e=n._currentValue;if(eR!==n)if(n={context:n,memoizedValue:e,next:null},Rd===null){if(Ly===null)throw Error(ze(308));Rd=n,Ly.dependencies={lanes:0,firstContext:n}}else Rd=Rd.next=n;return e}var Rc=null;function rR(n){Rc===null?Rc=[n]:Rc.push(n)}function hK(n,e,r,i){var s=e.interleaved;return s===null?(r.next=r,rR(e)):(r.next=s.next,s.next=r),e.interleaved=r,Da(n,i)}function Da(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var ll=!1;function iR(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fK(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ba(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Rl(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,zt&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Da(n,r)}return s=i.interleaved,s===null?(e.next=e,rR(i)):(e.next=s.next,s.next=e),i.interleaved=e,Da(n,r)}function Ub(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,qI(n,r)}}function X5(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function Fy(n,e,r,i){var s=n.updateQueue;ll=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(o!==null){var d=s.baseState;a=0,h=u=c=null,l=o;do{var f=l.lane,p=l.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=n,b=l;switch(f=e,p=r,b.tag){case 1:if(g=b.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=b.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=Dn({},d,f);break e;case 2:ll=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);mu|=a,n.lanes=a,n.memoizedState=d}}function Q5(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(ze(191,s));s.call(i)}}}var l0={},Eo=Kl(l0),Qm=Kl(l0),Jm=Kl(l0);function Ac(n){if(n===l0)throw Error(ze(174));return n}function sR(n,e){switch(un(Jm,e),un(Qm,n),un(Eo,l0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:YM(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=YM(e,n)}gn(Eo),un(Eo,e)}function $h(){gn(Eo),gn(Qm),gn(Jm)}function pK(n){Ac(Jm.current);var e=Ac(Eo.current),r=YM(e,n.type);e!==r&&(un(Qm,n),un(Eo,r))}function oR(n){Qm.current===n&&(gn(Eo),gn(Qm))}var Pn=Kl(0);function $y(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var P_=[];function aR(){for(var n=0;n<P_.length;n++)P_[n]._workInProgressVersionPrimary=null;P_.length=0}var qb=ja.ReactCurrentDispatcher,M_=ja.ReactCurrentBatchConfig,pu=0,Mn=null,Zn=null,ir=null,zy=!1,mm=!1,Zm=0,Ece=0;function Cr(){throw Error(ze(321))}function lR(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!Vs(n[r],e[r]))return!1;return!0}function cR(n,e,r,i,s,o){if(pu=o,Mn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qb.current=n===null||n.memoizedState===null?Dce:Oce,n=r(i,s),mm){o=0;do{if(mm=!1,Zm=0,25<=o)throw Error(ze(301));o+=1,ir=Zn=null,e.updateQueue=null,qb.current=Ice,n=r(i,s)}while(mm)}if(qb.current=By,e=Zn!==null&&Zn.next!==null,pu=0,ir=Zn=Mn=null,zy=!1,e)throw Error(ze(300));return n}function uR(){var n=Zm!==0;return Zm=0,n}function co(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?Mn.memoizedState=ir=n:ir=ir.next=n,ir}function xs(){if(Zn===null){var n=Mn.alternate;n=n!==null?n.memoizedState:null}else n=Zn.next;var e=ir===null?Mn.memoizedState:ir.next;if(e!==null)ir=e,Zn=n;else{if(n===null)throw Error(ze(310));Zn=n,n={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},ir===null?Mn.memoizedState=ir=n:ir=ir.next=n}return ir}function eg(n,e){return typeof e=="function"?e(n):e}function D_(n){var e=xs(),r=e.queue;if(r===null)throw Error(ze(311));r.lastRenderedReducer=n;var i=Zn,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((pu&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,a=i):c=c.next=d,Mn.lanes|=h,mu|=h}u=u.next}while(u!==null&&u!==o);c===null?a=i:c.next=l,Vs(i,e.memoizedState)||(fi=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,r.lastRenderedState=i}if(n=r.interleaved,n!==null){s=n;do o=s.lane,Mn.lanes|=o,mu|=o,s=s.next;while(s!==n)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function O_(n){var e=xs(),r=e.queue;if(r===null)throw Error(ze(311));r.lastRenderedReducer=n;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=n(o,a.action),a=a.next;while(a!==s);Vs(o,e.memoizedState)||(fi=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function mK(){}function gK(n,e){var r=Mn,i=xs(),s=e(),o=!Vs(i.memoizedState,s);if(o&&(i.memoizedState=s,fi=!0),i=i.queue,dR(yK.bind(null,r,i,n),[n]),i.getSnapshot!==e||o||ir!==null&&ir.memoizedState.tag&1){if(r.flags|=2048,tg(9,bK.bind(null,r,i,s,e),void 0,null),dr===null)throw Error(ze(349));pu&30||vK(r,e,s)}return s}function vK(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function bK(n,e,r,i){e.value=r,e.getSnapshot=i,xK(e)&&wK(n)}function yK(n,e,r){return r(function(){xK(e)&&wK(n)})}function xK(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!Vs(n,r)}catch{return!0}}function wK(n){var e=Da(n,1);e!==null&&Ws(e,n,1,-1)}function J5(n){var e=co();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eg,lastRenderedState:n},e.queue=n,n=n.dispatch=Mce.bind(null,Mn,n),[e.memoizedState,n]}function tg(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function _K(){return xs().memoizedState}function Wb(n,e,r,i){var s=co();Mn.flags|=n,s.memoizedState=tg(1|e,r,void 0,i===void 0?null:i)}function hw(n,e,r,i){var s=xs();i=i===void 0?null:i;var o=void 0;if(Zn!==null){var a=Zn.memoizedState;if(o=a.destroy,i!==null&&lR(i,a.deps)){s.memoizedState=tg(e,r,o,i);return}}Mn.flags|=n,s.memoizedState=tg(1|e,r,o,i)}function Z5(n,e){return Wb(8390656,8,n,e)}function dR(n,e){return hw(2048,8,n,e)}function SK(n,e){return hw(4,2,n,e)}function kK(n,e){return hw(4,4,n,e)}function CK(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function EK(n,e,r){return r=r!=null?r.concat([n]):null,hw(4,4,CK.bind(null,e,n),r)}function hR(){}function TK(n,e){var r=xs();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&lR(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function PK(n,e){var r=xs();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&lR(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function MK(n,e,r){return pu&21?(Vs(r,e)||(r=AG(),Mn.lanes|=r,mu|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,fi=!0),n.memoizedState=r)}function Tce(n,e){var r=Qt;Qt=r!==0&&4>r?r:4,n(!0);var i=M_.transition;M_.transition={};try{n(!1),e()}finally{Qt=r,M_.transition=i}}function DK(){return xs().memoizedState}function Pce(n,e,r){var i=Nl(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},OK(n))IK(e,r);else if(r=hK(n,e,r,i),r!==null){var s=Kr();Ws(r,n,i,s),RK(r,e,i)}}function Mce(n,e,r){var i=Nl(n),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(OK(n))IK(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,Vs(l,a)){var c=e.interleaved;c===null?(s.next=s,rR(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=hK(n,e,s,i),r!==null&&(s=Kr(),Ws(r,n,i,s),RK(r,e,i))}}function OK(n){var e=n.alternate;return n===Mn||e!==null&&e===Mn}function IK(n,e){mm=zy=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function RK(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,qI(n,r)}}var By={readContext:ys,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},Dce={readContext:ys,useCallback:function(n,e){return co().memoizedState=[n,e===void 0?null:e],n},useContext:ys,useEffect:Z5,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,Wb(4194308,4,CK.bind(null,e,n),r)},useLayoutEffect:function(n,e){return Wb(4194308,4,n,e)},useInsertionEffect:function(n,e){return Wb(4,2,n,e)},useMemo:function(n,e){var r=co();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=co();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=Pce.bind(null,Mn,n),[i.memoizedState,n]},useRef:function(n){var e=co();return n={current:n},e.memoizedState=n},useState:J5,useDebugValue:hR,useDeferredValue:function(n){return co().memoizedState=n},useTransition:function(){var n=J5(!1),e=n[0];return n=Tce.bind(null,n[1]),co().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=Mn,s=co();if(kn){if(r===void 0)throw Error(ze(407));r=r()}else{if(r=e(),dr===null)throw Error(ze(349));pu&30||vK(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,Z5(yK.bind(null,i,o,n),[n]),i.flags|=2048,tg(9,bK.bind(null,i,o,r,e),void 0,null),r},useId:function(){var n=co(),e=dr.identifierPrefix;if(kn){var r=fa,i=ha;r=(i&~(1<<32-qs(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=Zm++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Ece++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Oce={readContext:ys,useCallback:TK,useContext:ys,useEffect:dR,useImperativeHandle:EK,useInsertionEffect:SK,useLayoutEffect:kK,useMemo:PK,useReducer:D_,useRef:_K,useState:function(){return D_(eg)},useDebugValue:hR,useDeferredValue:function(n){var e=xs();return MK(e,Zn.memoizedState,n)},useTransition:function(){var n=D_(eg)[0],e=xs().memoizedState;return[n,e]},useMutableSource:mK,useSyncExternalStore:gK,useId:DK,unstable_isNewReconciler:!1},Ice={readContext:ys,useCallback:TK,useContext:ys,useEffect:dR,useImperativeHandle:EK,useInsertionEffect:SK,useLayoutEffect:kK,useMemo:PK,useReducer:O_,useRef:_K,useState:function(){return O_(eg)},useDebugValue:hR,useDeferredValue:function(n){var e=xs();return Zn===null?e.memoizedState=n:MK(e,Zn.memoizedState,n)},useTransition:function(){var n=O_(eg)[0],e=xs().memoizedState;return[n,e]},useMutableSource:mK,useSyncExternalStore:gK,useId:DK,unstable_isNewReconciler:!1};function Os(n,e){if(n&&n.defaultProps){e=Dn({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function pD(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:Dn({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var fw={isMounted:function(n){return(n=n._reactInternals)?Lu(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=Kr(),s=Nl(n),o=ba(i,s);o.payload=e,r!=null&&(o.callback=r),e=Rl(n,o,s),e!==null&&(Ws(e,n,s,i),Ub(e,n,s))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=Kr(),s=Nl(n),o=ba(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Rl(n,o,s),e!==null&&(Ws(e,n,s,i),Ub(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=Kr(),i=Nl(n),s=ba(r,i);s.tag=2,e!=null&&(s.callback=e),e=Rl(n,s,i),e!==null&&(Ws(e,n,i,r),Ub(e,n,i))}};function e4(n,e,r,i,s,o,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Ym(r,i)||!Ym(s,o):!0}function AK(n,e,r){var i=!1,s=Wl,o=e.contextType;return typeof o=="object"&&o!==null?o=ys(o):(s=gi(e)?hu:Ar.current,i=e.contextTypes,o=(i=i!=null)?jh(n,s):Wl),e=new e(r,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fw,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function t4(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&fw.enqueueReplaceState(e,e.state,null)}function mD(n,e,r,i){var s=n.stateNode;s.props=r,s.state=n.memoizedState,s.refs={},iR(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=ys(o):(o=gi(e)?hu:Ar.current,s.context=jh(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(pD(n,e,o,r),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fw.enqueueReplaceState(s,s.state,null),Fy(n,r,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function zh(n,e){try{var r="",i=e;do r+=ole(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function I_(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function gD(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Rce=typeof WeakMap=="function"?WeakMap:Map;function NK(n,e,r){r=ba(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){qy||(qy=!0,ED=i),gD(n,e)},r}function jK(n,e,r){r=ba(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){gD(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){gD(n,e),typeof i!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function n4(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new Rce;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),n=Yce.bind(null,n,e,r),e.then(n,n))}function r4(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function i4(n,e,r,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ba(-1,1),e.tag=2,Rl(r,e,1))),r.lanes|=1),n)}var Ace=ja.ReactCurrentOwner,fi=!1;function Ur(n,e,r,i){e.child=n===null?dK(e,null,r,i):Fh(e,n.child,r,i)}function s4(n,e,r,i,s){r=r.render;var o=e.ref;return Kd(e,s),i=cR(n,e,r,i,o,s),r=uR(),n!==null&&!fi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Oa(n,e,s)):(kn&&r&&QI(e),e.flags|=1,Ur(n,e,i,s),e.child)}function o4(n,e,r,i,s){if(n===null){var o=r.type;return typeof o=="function"&&!xR(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,LK(n,e,o,i,s)):(n=Gb(r.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Ym,r(a,i)&&n.ref===e.ref)return Oa(n,e,s)}return e.flags|=1,n=jl(o,i),n.ref=e.ref,n.return=e,e.child=n}function LK(n,e,r,i,s){if(n!==null){var o=n.memoizedProps;if(Ym(o,i)&&n.ref===e.ref)if(fi=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(fi=!0);else return e.lanes=n.lanes,Oa(n,e,s)}return vD(n,e,r,i,s)}function FK(n,e,r){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(Nd,Di),Di|=r;else{if(!(r&1073741824))return n=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,un(Nd,Di),Di|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,un(Nd,Di),Di|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,un(Nd,Di),Di|=i;return Ur(n,e,s,r),e.child}function $K(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function vD(n,e,r,i,s){var o=gi(r)?hu:Ar.current;return o=jh(e,o),Kd(e,s),r=cR(n,e,r,i,o,s),i=uR(),n!==null&&!fi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Oa(n,e,s)):(kn&&i&&QI(e),e.flags|=1,Ur(n,e,r,s),e.child)}function a4(n,e,r,i,s){if(gi(r)){var o=!0;Ry(e)}else o=!1;if(Kd(e,s),e.stateNode===null)Hb(n,e),AK(e,r,i),mD(e,r,i,s),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=ys(u):(u=gi(r)?hu:Ar.current,u=jh(e,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||c!==u)&&t4(e,a,i,u),ll=!1;var f=e.memoizedState;a.state=f,Fy(e,i,a,s),c=e.memoizedState,l!==i||f!==c||mi.current||ll?(typeof h=="function"&&(pD(e,r,h,i),c=e.memoizedState),(l=ll||e4(e,r,l,i,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,fK(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:Os(e.type,l),a.props=u,d=e.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=ys(c):(c=gi(r)?hu:Ar.current,c=jh(e,c));var p=r.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||f!==c)&&t4(e,a,i,c),ll=!1,f=e.memoizedState,a.state=f,Fy(e,i,a,s);var g=e.memoizedState;l!==d||f!==g||mi.current||ll?(typeof p=="function"&&(pD(e,r,p,i),g=e.memoizedState),(u=ll||e4(e,r,u,i,f,g,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),a.props=i,a.state=g,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return bD(n,e,r,i,o,s)}function bD(n,e,r,i,s,o){$K(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&V5(e,r,!1),Oa(n,e,o);i=e.stateNode,Ace.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Fh(e,n.child,null,o),e.child=Fh(e,null,l,o)):Ur(n,e,l,o),e.memoizedState=i.state,s&&V5(e,r,!0),e.child}function zK(n){var e=n.stateNode;e.pendingContext?H5(n,e.pendingContext,e.pendingContext!==e.context):e.context&&H5(n,e.context,!1),sR(n,e.containerInfo)}function l4(n,e,r,i,s){return Lh(),ZI(s),e.flags|=256,Ur(n,e,r,i),e.child}var yD={dehydrated:null,treeContext:null,retryLane:0};function xD(n){return{baseLanes:n,cachePool:null,transitions:null}}function BK(n,e,r){var i=e.pendingProps,s=Pn.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),un(Pn,s&1),n===null)return hD(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=gw(a,i,0,null),n=eu(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=xD(r),e.memoizedState=yD,n):fR(e,a));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Nce(n,e,a,i,l,s,r);if(o){o=i.fallback,a=e.mode,s=n.child,l=s.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=jl(s,c),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=jl(l,o):(o=eu(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=n.child.memoizedState,a=a===null?xD(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=n.childLanes&~r,e.memoizedState=yD,i}return o=n.child,n=o.sibling,i=jl(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function fR(n,e){return e=gw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Cv(n,e,r,i){return i!==null&&ZI(i),Fh(e,n.child,null,r),n=fR(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Nce(n,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=I_(Error(ze(422))),Cv(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=gw({mode:"visible",children:i.children},s,0,null),o=eu(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Fh(e,n.child,null,a),e.child.memoizedState=xD(a),e.memoizedState=yD,o);if(!(e.mode&1))return Cv(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(ze(419)),i=I_(o,i,void 0),Cv(n,e,a,i)}if(l=(a&n.childLanes)!==0,fi||l){if(i=dr,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Da(n,s),Ws(i,n,s,-1))}return yR(),i=I_(Error(ze(421))),Cv(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=Gce.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,Ni=Il(s.nextSibling),ji=e,kn=!0,Fs=null,n!==null&&(us[ds++]=ha,us[ds++]=fa,us[ds++]=fu,ha=n.id,fa=n.overflow,fu=e),e=fR(e,i.children),e.flags|=4096,e)}function c4(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),fD(n.return,e,r)}function R_(n,e,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function UK(n,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Ur(n,e,i.children,r),i=Pn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&c4(n,r,e);else if(n.tag===19)c4(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(un(Pn,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)n=r.alternate,n!==null&&$y(n)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),R_(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&$y(n)===null){e.child=s;break}n=s.sibling,s.sibling=r,r=s,s=n}R_(e,!0,r,null,o);break;case"together":R_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hb(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Oa(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),mu|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ze(153));if(e.child!==null){for(n=e.child,r=jl(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=jl(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function jce(n,e,r){switch(e.tag){case 3:zK(e),Lh();break;case 5:pK(e);break;case 1:gi(e.type)&&Ry(e);break;case 4:sR(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;un(jy,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(un(Pn,Pn.current&1),e.flags|=128,null):r&e.child.childLanes?BK(n,e,r):(un(Pn,Pn.current&1),n=Oa(n,e,r),n!==null?n.sibling:null);un(Pn,Pn.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return UK(n,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),un(Pn,Pn.current),i)break;return null;case 22:case 23:return e.lanes=0,FK(n,e,r)}return Oa(n,e,r)}var qK,wD,WK,HK;qK=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wD=function(){};WK=function(n,e,r,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Ac(Eo.current);var o=null;switch(r){case"input":s=qM(n,s),i=qM(n,i),o=[];break;case"select":s=Dn({},s,{value:void 0}),i=Dn({},i,{value:void 0}),o=[];break;case"textarea":s=VM(n,s),i=VM(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Oy)}GM(r,i);var a;r=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zm.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zm.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&pn("scroll",n),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};HK=function(n,e,r,i){r!==i&&(e.flags|=4)};function lp(n,e){if(!kn)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Er(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function Lce(n,e,r){var i=e.pendingProps;switch(JI(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Er(e),null;case 1:return gi(e.type)&&Iy(),Er(e),null;case 3:return i=e.stateNode,$h(),gn(mi),gn(Ar),aR(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Sv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fs!==null&&(MD(Fs),Fs=null))),wD(n,e),Er(e),null;case 5:oR(e);var s=Ac(Jm.current);if(r=e.type,n!==null&&e.stateNode!=null)WK(n,e,r,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ze(166));return Er(e),null}if(n=Ac(Eo.current),Sv(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[xo]=e,i[Xm]=o,n=(e.mode&1)!==0,r){case"dialog":pn("cancel",i),pn("close",i);break;case"iframe":case"object":case"embed":pn("load",i);break;case"video":case"audio":for(s=0;s<Yp.length;s++)pn(Yp[s],i);break;case"source":pn("error",i);break;case"img":case"image":case"link":pn("error",i),pn("load",i);break;case"details":pn("toggle",i);break;case"input":b5(i,o),pn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},pn("invalid",i);break;case"textarea":x5(i,o),pn("invalid",i)}GM(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&_v(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&_v(i.textContent,l,n),s=["children",""+l]):zm.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&pn("scroll",i)}switch(r){case"input":pv(i),y5(i,o,!0);break;case"textarea":pv(i),w5(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Oy)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yG(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[xo]=e,n[Xm]=i,qK(n,e,!1,!1),e.stateNode=n;e:{switch(a=KM(r,i),r){case"dialog":pn("cancel",n),pn("close",n),s=i;break;case"iframe":case"object":case"embed":pn("load",n),s=i;break;case"video":case"audio":for(s=0;s<Yp.length;s++)pn(Yp[s],n);s=i;break;case"source":pn("error",n),s=i;break;case"img":case"image":case"link":pn("error",n),pn("load",n),s=i;break;case"details":pn("toggle",n),s=i;break;case"input":b5(n,i),s=qM(n,i),pn("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Dn({},i,{value:void 0}),pn("invalid",n);break;case"textarea":x5(n,i),s=VM(n,i),pn("invalid",n);break;default:s=i}GM(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?_G(n,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xG(n,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Bm(n,c):typeof c=="number"&&Bm(n,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(zm.hasOwnProperty(o)?c!=null&&o==="onScroll"&&pn("scroll",n):c!=null&&LI(n,o,c,a))}switch(r){case"input":pv(n),y5(n,i,!1);break;case"textarea":pv(n),w5(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ql(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?Hd(n,!!i.multiple,o,!1):i.defaultValue!=null&&Hd(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Oy)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Er(e),null;case 6:if(n&&e.stateNode!=null)HK(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ze(166));if(r=Ac(Jm.current),Ac(Eo.current),Sv(e)){if(i=e.stateNode,r=e.memoizedProps,i[xo]=e,(o=i.nodeValue!==r)&&(n=ji,n!==null))switch(n.tag){case 3:_v(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&_v(i.nodeValue,r,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[xo]=e,e.stateNode=i}return Er(e),null;case 13:if(gn(Pn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(kn&&Ni!==null&&e.mode&1&&!(e.flags&128))cK(),Lh(),e.flags|=98560,o=!1;else if(o=Sv(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(ze(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ze(317));o[xo]=e}else Lh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Er(e),o=!1}else Fs!==null&&(MD(Fs),Fs=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Pn.current&1?er===0&&(er=3):yR())),e.updateQueue!==null&&(e.flags|=4),Er(e),null);case 4:return $h(),wD(n,e),n===null&&Gm(e.stateNode.containerInfo),Er(e),null;case 10:return nR(e.type._context),Er(e),null;case 17:return gi(e.type)&&Iy(),Er(e),null;case 19:if(gn(Pn),o=e.memoizedState,o===null)return Er(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)lp(o,!1);else{if(er!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=$y(n),a!==null){for(e.flags|=128,lp(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,n=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,n=a.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return un(Pn,Pn.current&1|2),e.child}n=n.sibling}o.tail!==null&&Un()>Bh&&(e.flags|=128,i=!0,lp(o,!1),e.lanes=4194304)}else{if(!i)if(n=$y(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),lp(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!kn)return Er(e),null}else 2*Un()-o.renderingStartTime>Bh&&r!==1073741824&&(e.flags|=128,i=!0,lp(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Un(),e.sibling=null,r=Pn.current,un(Pn,i?r&1|2:r&1),e):(Er(e),null);case 22:case 23:return bR(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Di&1073741824&&(Er(e),e.subtreeFlags&6&&(e.flags|=8192)):Er(e),null;case 24:return null;case 25:return null}throw Error(ze(156,e.tag))}function Fce(n,e){switch(JI(e),e.tag){case 1:return gi(e.type)&&Iy(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return $h(),gn(mi),gn(Ar),aR(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return oR(e),null;case 13:if(gn(Pn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ze(340));Lh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return gn(Pn),null;case 4:return $h(),null;case 10:return nR(e.type._context),null;case 22:case 23:return bR(),null;case 24:return null;default:return null}}var Ev=!1,Or=!1,$ce=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Ad(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){An(n,e,i)}else r.current=null}function _D(n,e,r){try{r()}catch(i){An(n,e,i)}}var u4=!1;function zce(n,e){if(sD=Py,n=XG(),XI(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==r||s!==0&&d.nodeType!==3||(l=a+s),d!==o||i!==0&&d.nodeType!==3||(c=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===r&&++u===s&&(l=a),f===o&&++h===i&&(c=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(oD={focusedElem:n,selectionRange:r},Py=!1,tt=e;tt!==null;)if(e=tt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,tt=n;else for(;tt!==null;){e=tt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var b=g.memoizedProps,y=g.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?b:Os(e.type,b),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ze(163))}}catch(_){An(e,e.return,_)}if(n=e.sibling,n!==null){n.return=e.return,tt=n;break}tt=e.return}return g=u4,u4=!1,g}function gm(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&_D(e,r,o)}s=s.next}while(s!==i)}}function pw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function SD(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function VK(n){var e=n.alternate;e!==null&&(n.alternate=null,VK(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[xo],delete e[Xm],delete e[cD],delete e[_ce],delete e[Sce])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function YK(n){return n.tag===5||n.tag===3||n.tag===4}function d4(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||YK(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function kD(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Oy));else if(i!==4&&(n=n.child,n!==null))for(kD(n,e,r),n=n.sibling;n!==null;)kD(n,e,r),n=n.sibling}function CD(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(CD(n,e,r),n=n.sibling;n!==null;)CD(n,e,r),n=n.sibling}var gr=null,js=!1;function qa(n,e,r){for(r=r.child;r!==null;)GK(n,e,r),r=r.sibling}function GK(n,e,r){if(Co&&typeof Co.onCommitFiberUnmount=="function")try{Co.onCommitFiberUnmount(ow,r)}catch{}switch(r.tag){case 5:Or||Ad(r,e);case 6:var i=gr,s=js;gr=null,qa(n,e,r),gr=i,js=s,gr!==null&&(js?(n=gr,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):gr.removeChild(r.stateNode));break;case 18:gr!==null&&(js?(n=gr,r=r.stateNode,n.nodeType===8?E_(n.parentNode,r):n.nodeType===1&&E_(n,r),Hm(n)):E_(gr,r.stateNode));break;case 4:i=gr,s=js,gr=r.stateNode.containerInfo,js=!0,qa(n,e,r),gr=i,js=s;break;case 0:case 11:case 14:case 15:if(!Or&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&_D(r,e,a),s=s.next}while(s!==i)}qa(n,e,r);break;case 1:if(!Or&&(Ad(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){An(r,e,l)}qa(n,e,r);break;case 21:qa(n,e,r);break;case 22:r.mode&1?(Or=(i=Or)||r.memoizedState!==null,qa(n,e,r),Or=i):qa(n,e,r);break;default:qa(n,e,r)}}function h4(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new $ce),e.forEach(function(i){var s=Kce.bind(null,n,i);r.has(i)||(r.add(i),i.then(s,s))})}}function Ts(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:gr=l.stateNode,js=!1;break e;case 3:gr=l.stateNode.containerInfo,js=!0;break e;case 4:gr=l.stateNode.containerInfo,js=!0;break e}l=l.return}if(gr===null)throw Error(ze(160));GK(o,a,s),gr=null,js=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){An(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)KK(e,n),e=e.sibling}function KK(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ts(e,n),no(n),i&4){try{gm(3,n,n.return),pw(3,n)}catch(b){An(n,n.return,b)}try{gm(5,n,n.return)}catch(b){An(n,n.return,b)}}break;case 1:Ts(e,n),no(n),i&512&&r!==null&&Ad(r,r.return);break;case 5:if(Ts(e,n),no(n),i&512&&r!==null&&Ad(r,r.return),n.flags&32){var s=n.stateNode;try{Bm(s,"")}catch(b){An(n,n.return,b)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,a=r!==null?r.memoizedProps:o,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&vG(s,o),KM(l,a);var u=KM(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?_G(s,d):h==="dangerouslySetInnerHTML"?xG(s,d):h==="children"?Bm(s,d):LI(s,h,d,u)}switch(l){case"input":WM(s,o);break;case"textarea":bG(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Hd(s,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?Hd(s,!!o.multiple,o.defaultValue,!0):Hd(s,!!o.multiple,o.multiple?[]:"",!1))}s[Xm]=o}catch(b){An(n,n.return,b)}}break;case 6:if(Ts(e,n),no(n),i&4){if(n.stateNode===null)throw Error(ze(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(b){An(n,n.return,b)}}break;case 3:if(Ts(e,n),no(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Hm(e.containerInfo)}catch(b){An(n,n.return,b)}break;case 4:Ts(e,n),no(n);break;case 13:Ts(e,n),no(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(gR=Un())),i&4&&h4(n);break;case 22:if(h=r!==null&&r.memoizedState!==null,n.mode&1?(Or=(u=Or)||h,Ts(e,n),Or=u):Ts(e,n),no(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(tt=n,h=n.child;h!==null;){for(d=tt=h;tt!==null;){switch(f=tt,p=f.child,f.tag){case 0:case 11:case 14:case 15:gm(4,f,f.return);break;case 1:Ad(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,r=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(b){An(i,r,b)}}break;case 5:Ad(f,f.return);break;case 22:if(f.memoizedState!==null){p4(d);continue}}p!==null?(p.return=f,tt=p):p4(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=wG("display",a))}catch(b){An(n,n.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){An(n,n.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ts(e,n),no(n),i&4&&h4(n);break;case 21:break;default:Ts(e,n),no(n)}}function no(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(YK(r)){var i=r;break e}r=r.return}throw Error(ze(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Bm(s,""),i.flags&=-33);var o=d4(n);CD(n,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=d4(n);kD(n,l,a);break;default:throw Error(ze(161))}}catch(c){An(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Bce(n,e,r){tt=n,XK(n)}function XK(n,e,r){for(var i=(n.mode&1)!==0;tt!==null;){var s=tt,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||Ev;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Or;l=Ev;var u=Or;if(Ev=a,(Or=c)&&!u)for(tt=s;tt!==null;)a=tt,c=a.child,a.tag===22&&a.memoizedState!==null?m4(s):c!==null?(c.return=a,tt=c):m4(s);for(;o!==null;)tt=o,XK(o),o=o.sibling;tt=s,Ev=l,Or=u}f4(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,tt=o):f4(n)}}function f4(n){for(;tt!==null;){var e=tt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Or||pw(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Or)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Os(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Q5(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Q5(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Hm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ze(163))}Or||e.flags&512&&SD(e)}catch(f){An(e,e.return,f)}}if(e===n){tt=null;break}if(r=e.sibling,r!==null){r.return=e.return,tt=r;break}tt=e.return}}function p4(n){for(;tt!==null;){var e=tt;if(e===n){tt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,tt=r;break}tt=e.return}}function m4(n){for(;tt!==null;){var e=tt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{pw(4,e)}catch(c){An(e,r,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(c){An(e,s,c)}}var o=e.return;try{SD(e)}catch(c){An(e,o,c)}break;case 5:var a=e.return;try{SD(e)}catch(c){An(e,a,c)}}}catch(c){An(e,e.return,c)}if(e===n){tt=null;break}var l=e.sibling;if(l!==null){l.return=e.return,tt=l;break}tt=e.return}}var Uce=Math.ceil,Uy=ja.ReactCurrentDispatcher,pR=ja.ReactCurrentOwner,vs=ja.ReactCurrentBatchConfig,zt=0,dr=null,Kn=null,_r=0,Di=0,Nd=Kl(0),er=0,ng=null,mu=0,mw=0,mR=0,vm=null,ci=null,gR=0,Bh=1/0,ea=null,qy=!1,ED=null,Al=null,Tv=!1,kl=null,Wy=0,bm=0,TD=null,Vb=-1,Yb=0;function Kr(){return zt&6?Un():Vb!==-1?Vb:Vb=Un()}function Nl(n){return n.mode&1?zt&2&&_r!==0?_r&-_r:Cce.transition!==null?(Yb===0&&(Yb=AG()),Yb):(n=Qt,n!==0||(n=window.event,n=n===void 0?16:BG(n.type)),n):1}function Ws(n,e,r,i){if(50<bm)throw bm=0,TD=null,Error(ze(185));s0(n,r,i),(!(zt&2)||n!==dr)&&(n===dr&&(!(zt&2)&&(mw|=r),er===4&&ul(n,_r)),vi(n,i),r===1&&zt===0&&!(e.mode&1)&&(Bh=Un()+500,dw&&Xl()))}function vi(n,e){var r=n.callbackNode;Cle(n,e);var i=Ty(n,n===dr?_r:0);if(i===0)r!==null&&k5(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&k5(r),e===1)n.tag===0?kce(g4.bind(null,n)):oK(g4.bind(null,n)),xce(function(){!(zt&6)&&Xl()}),r=null;else{switch(NG(i)){case 1:r=UI;break;case 4:r=IG;break;case 16:r=Ey;break;case 536870912:r=RG;break;default:r=Ey}r=iX(r,QK.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function QK(n,e){if(Vb=-1,Yb=0,zt&6)throw Error(ze(327));var r=n.callbackNode;if(Xd()&&n.callbackNode!==r)return null;var i=Ty(n,n===dr?_r:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Hy(n,i);else{e=i;var s=zt;zt|=2;var o=ZK();(dr!==n||_r!==e)&&(ea=null,Bh=Un()+500,Zc(n,e));do try{Hce();break}catch(l){JK(n,l)}while(!0);tR(),Uy.current=o,zt=s,Kn!==null?e=0:(dr=null,_r=0,e=er)}if(e!==0){if(e===2&&(s=eD(n),s!==0&&(i=s,e=PD(n,s))),e===1)throw r=ng,Zc(n,0),ul(n,i),vi(n,Un()),r;if(e===6)ul(n,i);else{if(s=n.current.alternate,!(i&30)&&!qce(s)&&(e=Hy(n,i),e===2&&(o=eD(n),o!==0&&(i=o,e=PD(n,o))),e===1))throw r=ng,Zc(n,0),ul(n,i),vi(n,Un()),r;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(ze(345));case 2:wc(n,ci,ea);break;case 3:if(ul(n,i),(i&130023424)===i&&(e=gR+500-Un(),10<e)){if(Ty(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Kr(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=lD(wc.bind(null,n,ci,ea),e);break}wc(n,ci,ea);break;case 4:if(ul(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-qs(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=Un()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Uce(i/1960))-i,10<i){n.timeoutHandle=lD(wc.bind(null,n,ci,ea),i);break}wc(n,ci,ea);break;case 5:wc(n,ci,ea);break;default:throw Error(ze(329))}}}return vi(n,Un()),n.callbackNode===r?QK.bind(null,n):null}function PD(n,e){var r=vm;return n.current.memoizedState.isDehydrated&&(Zc(n,e).flags|=256),n=Hy(n,e),n!==2&&(e=ci,ci=r,e!==null&&MD(e)),n}function MD(n){ci===null?ci=n:ci.push.apply(ci,n)}function qce(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!Vs(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ul(n,e){for(e&=~mR,e&=~mw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-qs(e),i=1<<r;n[r]=-1,e&=~i}}function g4(n){if(zt&6)throw Error(ze(327));Xd();var e=Ty(n,0);if(!(e&1))return vi(n,Un()),null;var r=Hy(n,e);if(n.tag!==0&&r===2){var i=eD(n);i!==0&&(e=i,r=PD(n,i))}if(r===1)throw r=ng,Zc(n,0),ul(n,e),vi(n,Un()),r;if(r===6)throw Error(ze(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,wc(n,ci,ea),vi(n,Un()),null}function vR(n,e){var r=zt;zt|=1;try{return n(e)}finally{zt=r,zt===0&&(Bh=Un()+500,dw&&Xl())}}function gu(n){kl!==null&&kl.tag===0&&!(zt&6)&&Xd();var e=zt;zt|=1;var r=vs.transition,i=Qt;try{if(vs.transition=null,Qt=1,n)return n()}finally{Qt=i,vs.transition=r,zt=e,!(zt&6)&&Xl()}}function bR(){Di=Nd.current,gn(Nd)}function Zc(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,yce(r)),Kn!==null)for(r=Kn.return;r!==null;){var i=r;switch(JI(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Iy();break;case 3:$h(),gn(mi),gn(Ar),aR();break;case 5:oR(i);break;case 4:$h();break;case 13:gn(Pn);break;case 19:gn(Pn);break;case 10:nR(i.type._context);break;case 22:case 23:bR()}r=r.return}if(dr=n,Kn=n=jl(n.current,null),_r=Di=e,er=0,ng=null,mR=mw=mu=0,ci=vm=null,Rc!==null){for(e=0;e<Rc.length;e++)if(r=Rc[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}Rc=null}return n}function JK(n,e){do{var r=Kn;try{if(tR(),qb.current=By,zy){for(var i=Mn.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}zy=!1}if(pu=0,ir=Zn=Mn=null,mm=!1,Zm=0,pR.current=null,r===null||r.return===null){er=1,ng=e,Kn=null;break}e:{var o=n,a=r.return,l=r,c=e;if(e=_r,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=r4(a);if(p!==null){p.flags&=-257,i4(p,a,l,o,e),p.mode&1&&n4(o,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var b=new Set;b.add(c),e.updateQueue=b}else g.add(c);break e}else{if(!(e&1)){n4(o,u,e),yR();break e}c=Error(ze(426))}}else if(kn&&l.mode&1){var y=r4(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),i4(y,a,l,o,e),ZI(zh(c,l));break e}}o=c=zh(c,l),er!==4&&(er=2),vm===null?vm=[o]:vm.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=NK(o,c,e);X5(o,v);break e;case 1:l=c;var w=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Al===null||!Al.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var _=jK(o,l,e);X5(o,_);break e}}o=o.return}while(o!==null)}tX(r)}catch(S){e=S,Kn===r&&r!==null&&(Kn=r=r.return);continue}break}while(!0)}function ZK(){var n=Uy.current;return Uy.current=By,n===null?By:n}function yR(){(er===0||er===3||er===2)&&(er=4),dr===null||!(mu&268435455)&&!(mw&268435455)||ul(dr,_r)}function Hy(n,e){var r=zt;zt|=2;var i=ZK();(dr!==n||_r!==e)&&(ea=null,Zc(n,e));do try{Wce();break}catch(s){JK(n,s)}while(!0);if(tR(),zt=r,Uy.current=i,Kn!==null)throw Error(ze(261));return dr=null,_r=0,er}function Wce(){for(;Kn!==null;)eX(Kn)}function Hce(){for(;Kn!==null&&!gle();)eX(Kn)}function eX(n){var e=rX(n.alternate,n,Di);n.memoizedProps=n.pendingProps,e===null?tX(n):Kn=e,pR.current=null}function tX(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=Fce(r,e),r!==null){r.flags&=32767,Kn=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{er=6,Kn=null;return}}else if(r=Lce(r,e,Di),r!==null){Kn=r;return}if(e=e.sibling,e!==null){Kn=e;return}Kn=e=n}while(e!==null);er===0&&(er=5)}function wc(n,e,r){var i=Qt,s=vs.transition;try{vs.transition=null,Qt=1,Vce(n,e,r,i)}finally{vs.transition=s,Qt=i}return null}function Vce(n,e,r,i){do Xd();while(kl!==null);if(zt&6)throw Error(ze(327));r=n.finishedWork;var s=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(ze(177));n.callbackNode=null,n.callbackPriority=0;var o=r.lanes|r.childLanes;if(Ele(n,o),n===dr&&(Kn=dr=null,_r=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Tv||(Tv=!0,iX(Ey,function(){return Xd(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=vs.transition,vs.transition=null;var a=Qt;Qt=1;var l=zt;zt|=4,pR.current=null,zce(n,r),KK(r,n),hce(oD),Py=!!sD,oD=sD=null,n.current=r,Bce(r),vle(),zt=l,Qt=a,vs.transition=o}else n.current=r;if(Tv&&(Tv=!1,kl=n,Wy=s),o=n.pendingLanes,o===0&&(Al=null),xle(r.stateNode),vi(n,Un()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(qy)throw qy=!1,n=ED,ED=null,n;return Wy&1&&n.tag!==0&&Xd(),o=n.pendingLanes,o&1?n===TD?bm++:(bm=0,TD=n):bm=0,Xl(),null}function Xd(){if(kl!==null){var n=NG(Wy),e=vs.transition,r=Qt;try{if(vs.transition=null,Qt=16>n?16:n,kl===null)var i=!1;else{if(n=kl,kl=null,Wy=0,zt&6)throw Error(ze(331));var s=zt;for(zt|=4,tt=n.current;tt!==null;){var o=tt,a=o.child;if(tt.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(tt=u;tt!==null;){var h=tt;switch(h.tag){case 0:case 11:case 15:gm(8,h,o)}var d=h.child;if(d!==null)d.return=h,tt=d;else for(;tt!==null;){h=tt;var f=h.sibling,p=h.return;if(VK(h),h===u){tt=null;break}if(f!==null){f.return=p,tt=f;break}tt=p}}}var g=o.alternate;if(g!==null){var b=g.child;if(b!==null){g.child=null;do{var y=b.sibling;b.sibling=null,b=y}while(b!==null)}}tt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,tt=a;else e:for(;tt!==null;){if(o=tt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gm(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,tt=v;break e}tt=o.return}}var w=n.current;for(tt=w;tt!==null;){a=tt;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,tt=k;else e:for(a=w;tt!==null;){if(l=tt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:pw(9,l)}}catch(S){An(l,l.return,S)}if(l===a){tt=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,tt=_;break e}tt=l.return}}if(zt=s,Xl(),Co&&typeof Co.onPostCommitFiberRoot=="function")try{Co.onPostCommitFiberRoot(ow,n)}catch{}i=!0}return i}finally{Qt=r,vs.transition=e}}return!1}function v4(n,e,r){e=zh(r,e),e=NK(n,e,1),n=Rl(n,e,1),e=Kr(),n!==null&&(s0(n,1,e),vi(n,e))}function An(n,e,r){if(n.tag===3)v4(n,n,r);else for(;e!==null;){if(e.tag===3){v4(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Al===null||!Al.has(i))){n=zh(r,n),n=jK(e,n,1),e=Rl(e,n,1),n=Kr(),e!==null&&(s0(e,1,n),vi(e,n));break}}e=e.return}}function Yce(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=Kr(),n.pingedLanes|=n.suspendedLanes&r,dr===n&&(_r&r)===r&&(er===4||er===3&&(_r&130023424)===_r&&500>Un()-gR?Zc(n,0):mR|=r),vi(n,e)}function nX(n,e){e===0&&(n.mode&1?(e=vv,vv<<=1,!(vv&130023424)&&(vv=4194304)):e=1);var r=Kr();n=Da(n,e),n!==null&&(s0(n,e,r),vi(n,r))}function Gce(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),nX(n,r)}function Kce(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ze(314))}i!==null&&i.delete(e),nX(n,r)}var rX;rX=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||mi.current)fi=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return fi=!1,jce(n,e,r);fi=!!(n.flags&131072)}else fi=!1,kn&&e.flags&1048576&&aK(e,Ny,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Hb(n,e),n=e.pendingProps;var s=jh(e,Ar.current);Kd(e,r),s=cR(null,e,i,n,s,r);var o=uR();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gi(i)?(o=!0,Ry(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,iR(e),s.updater=fw,e.stateNode=s,s._reactInternals=e,mD(e,i,n,r),e=bD(null,e,i,!0,o,r)):(e.tag=0,kn&&o&&QI(e),Ur(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Hb(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=Qce(i),n=Os(i,n),s){case 0:e=vD(null,e,i,n,r);break e;case 1:e=a4(null,e,i,n,r);break e;case 11:e=s4(null,e,i,n,r);break e;case 14:e=o4(null,e,i,Os(i.type,n),r);break e}throw Error(ze(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Os(i,s),vD(n,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Os(i,s),a4(n,e,i,s,r);case 3:e:{if(zK(e),n===null)throw Error(ze(387));i=e.pendingProps,o=e.memoizedState,s=o.element,fK(n,e),Fy(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=zh(Error(ze(423)),e),e=l4(n,e,i,r,s);break e}else if(i!==s){s=zh(Error(ze(424)),e),e=l4(n,e,i,r,s);break e}else for(Ni=Il(e.stateNode.containerInfo.firstChild),ji=e,kn=!0,Fs=null,r=dK(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Lh(),i===s){e=Oa(n,e,r);break e}Ur(n,e,i,r)}e=e.child}return e;case 5:return pK(e),n===null&&hD(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,a=s.children,aD(i,s)?a=null:o!==null&&aD(i,o)&&(e.flags|=32),$K(n,e),Ur(n,e,a,r),e.child;case 6:return n===null&&hD(e),null;case 13:return BK(n,e,r);case 4:return sR(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Fh(e,null,i,r):Ur(n,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Os(i,s),s4(n,e,i,s,r);case 7:return Ur(n,e,e.pendingProps,r),e.child;case 8:return Ur(n,e,e.pendingProps.children,r),e.child;case 12:return Ur(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,un(jy,i._currentValue),i._currentValue=a,o!==null)if(Vs(o.value,a)){if(o.children===s.children&&!mi.current){e=Oa(n,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=ba(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),fD(o.return,r,e),l.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ze(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),fD(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ur(n,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Kd(e,r),s=ys(s),i=i(s),e.flags|=1,Ur(n,e,i,r),e.child;case 14:return i=e.type,s=Os(i,e.pendingProps),s=Os(i.type,s),o4(n,e,i,s,r);case 15:return LK(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Os(i,s),Hb(n,e),e.tag=1,gi(i)?(n=!0,Ry(e)):n=!1,Kd(e,r),AK(e,i,s),mD(e,i,s,r),bD(null,e,i,!0,n,r);case 19:return UK(n,e,r);case 22:return FK(n,e,r)}throw Error(ze(156,e.tag))};function iX(n,e){return OG(n,e)}function Xce(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(n,e,r,i){return new Xce(n,e,r,i)}function xR(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Qce(n){if(typeof n=="function")return xR(n)?1:0;if(n!=null){if(n=n.$$typeof,n===$I)return 11;if(n===zI)return 14}return 2}function jl(n,e){var r=n.alternate;return r===null?(r=fs(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function Gb(n,e,r,i,s,o){var a=2;if(i=n,typeof n=="function")xR(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Cd:return eu(r.children,s,o,e);case FI:a=8,s|=8;break;case $M:return n=fs(12,r,e,s|2),n.elementType=$M,n.lanes=o,n;case zM:return n=fs(13,r,e,s),n.elementType=zM,n.lanes=o,n;case BM:return n=fs(19,r,e,s),n.elementType=BM,n.lanes=o,n;case pG:return gw(r,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case hG:a=10;break e;case fG:a=9;break e;case $I:a=11;break e;case zI:a=14;break e;case al:a=16,i=null;break e}throw Error(ze(130,n==null?n:typeof n,""))}return e=fs(a,r,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function eu(n,e,r,i){return n=fs(7,n,i,e),n.lanes=r,n}function gw(n,e,r,i){return n=fs(22,n,i,e),n.elementType=pG,n.lanes=r,n.stateNode={isHidden:!1},n}function A_(n,e,r){return n=fs(6,n,null,e),n.lanes=r,n}function N_(n,e,r){return e=fs(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Jce(n,e,r,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=m_(0),this.expirationTimes=m_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=m_(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wR(n,e,r,i,s,o,a,l,c){return n=new Jce(n,e,r,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=fs(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},iR(o),n}function Zce(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kd,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function sX(n){if(!n)return Wl;n=n._reactInternals;e:{if(Lu(n)!==n||n.tag!==1)throw Error(ze(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ze(171))}if(n.tag===1){var r=n.type;if(gi(r))return sK(n,r,e)}return e}function oX(n,e,r,i,s,o,a,l,c){return n=wR(r,i,!0,n,s,o,a,l,c),n.context=sX(null),r=n.current,i=Kr(),s=Nl(r),o=ba(i,s),o.callback=e??null,Rl(r,o,s),n.current.lanes=s,s0(n,s,i),vi(n,i),n}function vw(n,e,r,i){var s=e.current,o=Kr(),a=Nl(s);return r=sX(r),e.context===null?e.context=r:e.pendingContext=r,e=ba(o,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Rl(s,e,a),n!==null&&(Ws(n,s,a,o),Ub(n,s,a)),a}function Vy(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function b4(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function _R(n,e){b4(n,e),(n=n.alternate)&&b4(n,e)}function eue(){return null}var aX=typeof reportError=="function"?reportError:function(n){console.error(n)};function SR(n){this._internalRoot=n}bw.prototype.render=SR.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ze(409));vw(n,e,null,null)};bw.prototype.unmount=SR.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;gu(function(){vw(null,n,null,null)}),e[Ma]=null}};function bw(n){this._internalRoot=n}bw.prototype.unstable_scheduleHydration=function(n){if(n){var e=FG();n={blockedOn:null,target:n,priority:e};for(var r=0;r<cl.length&&e!==0&&e<cl[r].priority;r++);cl.splice(r,0,n),r===0&&zG(n)}};function kR(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function yw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function y4(){}function tue(n,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var u=Vy(a);o.call(u)}}var a=oX(e,i,n,0,null,!1,!1,"",y4);return n._reactRootContainer=a,n[Ma]=a.current,Gm(n.nodeType===8?n.parentNode:n),gu(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var u=Vy(c);l.call(u)}}var c=wR(n,0,!1,null,null,!1,!1,"",y4);return n._reactRootContainer=c,n[Ma]=c.current,Gm(n.nodeType===8?n.parentNode:n),gu(function(){vw(e,c,r,i)}),c}function xw(n,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Vy(a);l.call(c)}}vw(e,a,n,s)}else a=tue(r,e,n,s,i);return Vy(a)}jG=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=Vp(e.pendingLanes);r!==0&&(qI(e,r|1),vi(e,Un()),!(zt&6)&&(Bh=Un()+500,Xl()))}break;case 13:gu(function(){var i=Da(n,1);if(i!==null){var s=Kr();Ws(i,n,1,s)}}),_R(n,1)}};WI=function(n){if(n.tag===13){var e=Da(n,134217728);if(e!==null){var r=Kr();Ws(e,n,134217728,r)}_R(n,134217728)}};LG=function(n){if(n.tag===13){var e=Nl(n),r=Da(n,e);if(r!==null){var i=Kr();Ws(r,n,e,i)}_R(n,e)}};FG=function(){return Qt};$G=function(n,e){var r=Qt;try{return Qt=n,e()}finally{Qt=r}};QM=function(n,e,r){switch(e){case"input":if(WM(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var s=uw(i);if(!s)throw Error(ze(90));gG(i),WM(i,s)}}}break;case"textarea":bG(n,r);break;case"select":e=r.value,e!=null&&Hd(n,!!r.multiple,e,!1)}};CG=vR;EG=gu;var nue={usingClientEntryPoint:!1,Events:[a0,Md,uw,SG,kG,vR]},cp={findFiberByHostInstance:Ic,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rue={bundleType:cp.bundleType,version:cp.version,rendererPackageName:cp.rendererPackageName,rendererConfig:cp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=MG(n),n===null?null:n.stateNode},findFiberByHostInstance:cp.findFiberByHostInstance||eue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pv.isDisabled&&Pv.supportsFiber)try{ow=Pv.inject(rue),Co=Pv}catch{}}Wi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nue;Wi.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kR(e))throw Error(ze(200));return Zce(n,e,null,r)};Wi.createRoot=function(n,e){if(!kR(n))throw Error(ze(299));var r=!1,i="",s=aX;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wR(n,1,!1,null,null,r,!1,i,s),n[Ma]=e.current,Gm(n.nodeType===8?n.parentNode:n),new SR(e)};Wi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ze(188)):(n=Object.keys(n).join(","),Error(ze(268,n)));return n=MG(e),n=n===null?null:n.stateNode,n};Wi.flushSync=function(n){return gu(n)};Wi.hydrate=function(n,e,r){if(!yw(e))throw Error(ze(200));return xw(null,n,e,!0,r)};Wi.hydrateRoot=function(n,e,r){if(!kR(n))throw Error(ze(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=aX;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=oX(e,null,n,1,r??null,s,!1,o,a),n[Ma]=e.current,Gm(n),i)for(n=0;n<i.length;n++)r=i[n],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new bw(e)};Wi.render=function(n,e,r){if(!yw(e))throw Error(ze(200));return xw(null,n,e,!1,r)};Wi.unmountComponentAtNode=function(n){if(!yw(n))throw Error(ze(40));return n._reactRootContainer?(gu(function(){xw(null,null,n,!1,function(){n._reactRootContainer=null,n[Ma]=null})}),!0):!1};Wi.unstable_batchedUpdates=vR;Wi.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!yw(r))throw Error(ze(200));if(n==null||n._reactInternals===void 0)throw Error(ze(38));return xw(n,e,r,!1,i)};Wi.version="18.3.1-next-f1338f8080-20240426";function lX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lX)}catch(n){console.error(n)}}lX(),lG.exports=Wi;var Ql=lG.exports;const iue=iw(Ql);var x4=Ql;LM.createRoot=x4.createRoot,LM.hydrateRoot=x4.hydrateRoot;var c0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sue={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},fl,DI,zY,oue=(zY=class{constructor(){Ge(this,fl,sue);Ge(this,DI,!1)}setTimeoutProvider(n){Me(this,fl,n)}setTimeout(n,e){return oe(this,fl).setTimeout(n,e)}clearTimeout(n){oe(this,fl).clearTimeout(n)}setInterval(n,e){return oe(this,fl).setInterval(n,e)}clearInterval(n){oe(this,fl).clearInterval(n)}},fl=new WeakMap,DI=new WeakMap,zY),DD=new oue;function aue(n){setTimeout(n,0)}var ww=typeof window>"u"||"Deno"in globalThis;function as(){}function lue(n,e){return typeof n=="function"?n(e):n}function cue(n){return typeof n=="number"&&n>=0&&n!==1/0}function uue(n,e){return Math.max(n+(e||0)-Date.now(),0)}function OD(n,e){return typeof n=="function"?n(e):n}function due(n,e){return typeof n=="function"?n(e):n}function w4(n,e){const{type:r="all",exact:i,fetchStatus:s,predicate:o,queryKey:a,stale:l}=n;if(a){if(i){if(e.queryHash!==CR(a,e.options))return!1}else if(!rg(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||o&&!o(e))}function _4(n,e){const{exact:r,status:i,predicate:s,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(r){if(vu(e.options.mutationKey)!==vu(o))return!1}else if(!rg(e.options.mutationKey,o))return!1}return!(i&&e.state.status!==i||s&&!s(e))}function CR(n,e){return((e==null?void 0:e.queryKeyHashFn)||vu)(n)}function vu(n){return JSON.stringify(n,(e,r)=>ID(r)?Object.keys(r).sort().reduce((i,s)=>(i[s]=r[s],i),{}):r)}function rg(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(r=>rg(n[r],e[r])):!1}var hue=Object.prototype.hasOwnProperty;function cX(n,e){if(n===e)return n;const r=S4(n)&&S4(e);if(!r&&!(ID(n)&&ID(e)))return e;const s=(r?n:Object.keys(n)).length,o=r?e:Object.keys(e),a=o.length,l=r?new Array(a):{};let c=0;for(let u=0;u<a;u++){const h=r?u:o[u],d=n[h],f=e[h];if(d===f){l[h]=d,(r?u<s:hue.call(n,h))&&c++;continue}if(d===null||f===null||typeof d!="object"||typeof f!="object"){l[h]=f;continue}const p=cX(d,f);l[h]=p,p===d&&c++}return s===a&&c===s?n:l}function fue(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(n[r]!==e[r])return!1;return!0}function S4(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function ID(n){if(!k4(n))return!1;const e=n.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!k4(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function k4(n){return Object.prototype.toString.call(n)==="[object Object]"}function pue(n){return new Promise(e=>{DD.setTimeout(e,n)})}function mue(n,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(n,e):r.structuralSharing!==!1?cX(n,e):e}function gue(n,e,r=0){const i=[...n,e];return r&&i.length>r?i.slice(1):i}function vue(n,e,r=0){const i=[e,...n];return r&&i.length>r?i.slice(0,-1):i}var ER=Symbol();function uX(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===ER?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function bue(n,e){return typeof n=="function"?n(...e):!!n}var Wc,pl,ah,BY,yue=(BY=class extends c0{constructor(){super();Ge(this,Wc);Ge(this,pl);Ge(this,ah);Me(this,ah,e=>{if(!ww&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){oe(this,pl)||this.setEventListener(oe(this,ah))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,pl))==null||e.call(this),Me(this,pl,void 0))}setEventListener(e){var r;Me(this,ah,e),(r=oe(this,pl))==null||r.call(this),Me(this,pl,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){oe(this,Wc)!==e&&(Me(this,Wc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof oe(this,Wc)=="boolean"?oe(this,Wc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Wc=new WeakMap,pl=new WeakMap,ah=new WeakMap,BY),dX=new yue;function xue(){let n,e;const r=new Promise((s,o)=>{n=s,e=o});r.status="pending",r.catch(()=>{});function i(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{i({status:"fulfilled",value:s}),n(s)},r.reject=s=>{i({status:"rejected",reason:s}),e(s)},r}var wue=aue;function _ue(){let n=[],e=0,r=l=>{l()},i=l=>{l()},s=wue;const o=l=>{e?n.push(l):s(()=>{r(l)})},a=()=>{const l=n;n=[],l.length&&s(()=>{i(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{i=l},setScheduler:l=>{s=l}}}var br=_ue(),lh,ml,ch,UY,Sue=(UY=class extends c0{constructor(){super();Ge(this,lh,!0);Ge(this,ml);Ge(this,ch);Me(this,ch,e=>{if(!ww&&window.addEventListener){const r=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}})}onSubscribe(){oe(this,ml)||this.setEventListener(oe(this,ch))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,ml))==null||e.call(this),Me(this,ml,void 0))}setEventListener(e){var r;Me(this,ch,e),(r=oe(this,ml))==null||r.call(this),Me(this,ml,e(this.setOnline.bind(this)))}setOnline(e){oe(this,lh)!==e&&(Me(this,lh,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return oe(this,lh)}},lh=new WeakMap,ml=new WeakMap,ch=new WeakMap,UY),Yy=new Sue;function kue(n){return Math.min(1e3*2**n,3e4)}function hX(n){return(n??"online")==="online"?Yy.isOnline():!0}var RD=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function fX(n){let e=!1,r=0,i;const s=xue(),o=()=>s.status!=="pending",a=b=>{var y;if(!o()){const v=new RD(b);f(v),(y=n.onCancel)==null||y.call(n,v)}},l=()=>{e=!0},c=()=>{e=!1},u=()=>dX.isFocused()&&(n.networkMode==="always"||Yy.isOnline())&&n.canRun(),h=()=>hX(n.networkMode)&&n.canRun(),d=b=>{o()||(i==null||i(),s.resolve(b))},f=b=>{o()||(i==null||i(),s.reject(b))},p=()=>new Promise(b=>{var y;i=v=>{(o()||u())&&b(v)},(y=n.onPause)==null||y.call(n)}).then(()=>{var b;i=void 0,o()||(b=n.onContinue)==null||b.call(n)}),g=()=>{if(o())return;let b;const y=r===0?n.initialPromise:void 0;try{b=y??n.fn()}catch(v){b=Promise.reject(v)}Promise.resolve(b).then(d).catch(v=>{var C;if(o())return;const w=n.retry??(ww?0:3),k=n.retryDelay??kue,_=typeof k=="function"?k(r,v):k,S=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,v);if(e||!S){f(v);return}r++,(C=n.onFail)==null||C.call(n,r,v),pue(_).then(()=>u()?void 0:p()).then(()=>{e?f(v):g()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?g():p().then(g),s)}}var Hc,qY,pX=(qY=class{constructor(){Ge(this,Hc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),cue(this.gcTime)&&Me(this,Hc,DD.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(ww?1/0:5*60*1e3))}clearGcTimeout(){oe(this,Hc)&&(DD.clearTimeout(oe(this,Hc)),Me(this,Hc,void 0))}},Hc=new WeakMap,qY),Vc,uh,os,Yc,rr,Qg,Gc,Rs,Qo,WY,Cue=(WY=class extends pX{constructor(e){super();Ge(this,Rs);Ge(this,Vc);Ge(this,uh);Ge(this,os);Ge(this,Yc);Ge(this,rr);Ge(this,Qg);Ge(this,Gc);Me(this,Gc,!1),Me(this,Qg,e.defaultOptions),this.setOptions(e.options),this.observers=[],Me(this,Yc,e.client),Me(this,os,oe(this,Yc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Me(this,Vc,E4(this.options)),this.state=e.state??oe(this,Vc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=oe(this,rr))==null?void 0:e.promise}setOptions(e){if(this.options={...oe(this,Qg),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=E4(this.options);r.data!==void 0&&(this.setState(C4(r.data,r.dataUpdatedAt)),Me(this,Vc,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,os).remove(this)}setData(e,r){const i=mue(this.state.data,e,this.options);return Dt(this,Rs,Qo).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(e,r){Dt(this,Rs,Qo).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var i,s;const r=(i=oe(this,rr))==null?void 0:i.promise;return(s=oe(this,rr))==null||s.cancel(e),r?r.then(as).catch(as):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,Vc))}isActive(){return this.observers.some(e=>due(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ER||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>OD(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!uue(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=oe(this,rr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=oe(this,rr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),oe(this,os).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(oe(this,rr)&&(oe(this,Gc)?oe(this,rr).cancel({revert:!0}):oe(this,rr).cancelRetry()),this.scheduleGc()),oe(this,os).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Dt(this,Rs,Qo).call(this,{type:"invalidate"})}async fetch(e,r){var c,u,h,d,f,p,g,b,y,v,w,k;if(this.state.fetchStatus!=="idle"&&((c=oe(this,rr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(oe(this,rr))return oe(this,rr).continueRetry(),oe(this,rr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const _=this.observers.find(S=>S.options.queryFn);_&&this.setOptions(_.options)}const i=new AbortController,s=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(Me(this,Gc,!0),i.signal)})},o=()=>{const _=uX(this.options,r),C=(()=>{const E={client:oe(this,Yc),queryKey:this.queryKey,meta:this.meta};return s(E),E})();return Me(this,Gc,!1),this.options.persister?this.options.persister(_,C,this):_(C)},l=(()=>{const _={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:oe(this,Yc),state:this.state,fetchFn:o};return s(_),_})();(u=this.options.behavior)==null||u.onFetch(l,this),Me(this,uh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Dt(this,Rs,Qo).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta}),Me(this,rr,fX({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:_=>{_ instanceof RD&&_.revert&&this.setState({...oe(this,uh),fetchStatus:"idle"}),i.abort()},onFail:(_,S)=>{Dt(this,Rs,Qo).call(this,{type:"failed",failureCount:_,error:S})},onPause:()=>{Dt(this,Rs,Qo).call(this,{type:"pause"})},onContinue:()=>{Dt(this,Rs,Qo).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const _=await oe(this,rr).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(p=(f=oe(this,os).config).onSuccess)==null||p.call(f,_,this),(b=(g=oe(this,os).config).onSettled)==null||b.call(g,_,this.state.error,this),_}catch(_){if(_ instanceof RD){if(_.silent)return oe(this,rr).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw Dt(this,Rs,Qo).call(this,{type:"error",error:_}),(v=(y=oe(this,os).config).onError)==null||v.call(y,_,this),(k=(w=oe(this,os).config).onSettled)==null||k.call(w,this.state.data,_,this),_}finally{this.scheduleGc()}}},Vc=new WeakMap,uh=new WeakMap,os=new WeakMap,Yc=new WeakMap,rr=new WeakMap,Qg=new WeakMap,Gc=new WeakMap,Rs=new WeakSet,Qo=function(e){const r=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Eue(i.data,this.options),fetchMeta:e.meta??null};case"success":const s={...i,...C4(e.data,e.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Me(this,uh,e.manual?s:void 0),s;case"error":const o=e.error;return{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=r(this.state),br.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),oe(this,os).notify({query:this,type:"updated",action:e})})},WY);function Eue(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hX(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function C4(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function E4(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,r=e!==void 0,i=r?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function T4(n){return{onFetch:(e,r)=>{var h,d,f,p,g;const i=e.options,s=(f=(d=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,o=((p=e.state.data)==null?void 0:p.pages)||[],a=((g=e.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let b=!1;const y=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},v=uX(e.options,e.fetchOptions),w=async(k,_,S)=>{if(b)return Promise.reject();if(_==null&&k.pages.length)return Promise.resolve(k);const E=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:_,direction:S?"backward":"forward",meta:e.options.meta};return y(R),R})(),P=await v(E),{maxPages:O}=e.options,M=S?vue:gue;return{pages:M(k.pages,P,O),pageParams:M(k.pageParams,_,O)}};if(s&&o.length){const k=s==="backward",_=k?Tue:P4,S={pages:o,pageParams:a},C=_(i,S);l=await w(S,C,k)}else{const k=n??o.length;do{const _=c===0?a[0]??i.initialPageParam:P4(i,l);if(c>0&&_==null)break;l=await w(l,_),c++}while(c<k)}return l};e.options.persister?e.fetchFn=()=>{var b,y;return(y=(b=e.options).persister)==null?void 0:y.call(b,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function P4(n,{pages:e,pageParams:r}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,r[i],r):void 0}function Tue(n,{pages:e,pageParams:r}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,r[0],r):void 0}var Jg,mo,Br,Kc,go,rl,HY,Pue=(HY=class extends pX{constructor(e){super();Ge(this,go);Ge(this,Jg);Ge(this,mo);Ge(this,Br);Ge(this,Kc);Me(this,Jg,e.client),this.mutationId=e.mutationId,Me(this,Br,e.mutationCache),Me(this,mo,[]),this.state=e.state||mX(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){oe(this,mo).includes(e)||(oe(this,mo).push(e),this.clearGcTimeout(),oe(this,Br).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Me(this,mo,oe(this,mo).filter(r=>r!==e)),this.scheduleGc(),oe(this,Br).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){oe(this,mo).length||(this.state.status==="pending"?this.scheduleGc():oe(this,Br).remove(this))}continue(){var e;return((e=oe(this,Kc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,l,c,u,h,d,f,p,g,b,y,v,w,k,_,S,C,E,P,O;const r=()=>{Dt(this,go,rl).call(this,{type:"continue"})},i={client:oe(this,Jg),meta:this.options.meta,mutationKey:this.options.mutationKey};Me(this,Kc,fX({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(new Error("No mutationFn found")),onFail:(M,R)=>{Dt(this,go,rl).call(this,{type:"failed",failureCount:M,error:R})},onPause:()=>{Dt(this,go,rl).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,Br).canRun(this)}));const s=this.state.status==="pending",o=!oe(this,Kc).canStart();try{if(s)r();else{Dt(this,go,rl).call(this,{type:"pending",variables:e,isPaused:o}),await((l=(a=oe(this,Br).config).onMutate)==null?void 0:l.call(a,e,this,i));const R=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,e,i));R!==this.state.context&&Dt(this,go,rl).call(this,{type:"pending",context:R,variables:e,isPaused:o})}const M=await oe(this,Kc).start();return await((d=(h=oe(this,Br).config).onSuccess)==null?void 0:d.call(h,M,e,this.state.context,this,i)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,M,e,this.state.context,i)),await((b=(g=oe(this,Br).config).onSettled)==null?void 0:b.call(g,M,null,this.state.variables,this.state.context,this,i)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,M,null,e,this.state.context,i)),Dt(this,go,rl).call(this,{type:"success",data:M}),M}catch(M){try{throw await((k=(w=oe(this,Br).config).onError)==null?void 0:k.call(w,M,e,this.state.context,this,i)),await((S=(_=this.options).onError)==null?void 0:S.call(_,M,e,this.state.context,i)),await((E=(C=oe(this,Br).config).onSettled)==null?void 0:E.call(C,void 0,M,this.state.variables,this.state.context,this,i)),await((O=(P=this.options).onSettled)==null?void 0:O.call(P,void 0,M,e,this.state.context,i)),M}finally{Dt(this,go,rl).call(this,{type:"error",error:M})}}finally{oe(this,Br).runNext(this)}}},Jg=new WeakMap,mo=new WeakMap,Br=new WeakMap,Kc=new WeakMap,go=new WeakSet,rl=function(e){const r=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),br.batch(()=>{oe(this,mo).forEach(i=>{i.onMutationUpdate(e)}),oe(this,Br).notify({mutation:this,type:"updated",action:e})})},HY);function mX(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var sa,As,Zg,VY,Mue=(VY=class extends c0{constructor(e={}){super();Ge(this,sa);Ge(this,As);Ge(this,Zg);this.config=e,Me(this,sa,new Set),Me(this,As,new Map),Me(this,Zg,0)}build(e,r,i){const s=new Pue({client:e,mutationCache:this,mutationId:++dv(this,Zg)._,options:e.defaultMutationOptions(r),state:i});return this.add(s),s}add(e){oe(this,sa).add(e);const r=Mv(e);if(typeof r=="string"){const i=oe(this,As).get(r);i?i.push(e):oe(this,As).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(oe(this,sa).delete(e)){const r=Mv(e);if(typeof r=="string"){const i=oe(this,As).get(r);if(i)if(i.length>1){const s=i.indexOf(e);s!==-1&&i.splice(s,1)}else i[0]===e&&oe(this,As).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Mv(e);if(typeof r=="string"){const i=oe(this,As).get(r),s=i==null?void 0:i.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var i;const r=Mv(e);if(typeof r=="string"){const s=(i=oe(this,As).get(r))==null?void 0:i.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){br.batch(()=>{oe(this,sa).forEach(e=>{this.notify({type:"removed",mutation:e})}),oe(this,sa).clear(),oe(this,As).clear()})}getAll(){return Array.from(oe(this,sa))}find(e){const r={exact:!0,...e};return this.getAll().find(i=>_4(r,i))}findAll(e={}){return this.getAll().filter(r=>_4(e,r))}notify(e){br.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return br.batch(()=>Promise.all(e.map(r=>r.continue().catch(as))))}},sa=new WeakMap,As=new WeakMap,Zg=new WeakMap,VY);function Mv(n){var e;return(e=n.options.scope)==null?void 0:e.id}var oa,gl,oi,aa,Ta,Kb,AD,YY,Due=(YY=class extends c0{constructor(r,i){super();Ge(this,Ta);Ge(this,oa);Ge(this,gl);Ge(this,oi);Ge(this,aa);Me(this,oa,r),this.setOptions(i),this.bindMethods(),Dt(this,Ta,Kb).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const i=this.options;this.options=oe(this,oa).defaultMutationOptions(r),fue(this.options,i)||oe(this,oa).getMutationCache().notify({type:"observerOptionsUpdated",mutation:oe(this,oi),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&vu(i.mutationKey)!==vu(this.options.mutationKey)?this.reset():((s=oe(this,oi))==null?void 0:s.state.status)==="pending"&&oe(this,oi).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=oe(this,oi))==null||r.removeObserver(this)}onMutationUpdate(r){Dt(this,Ta,Kb).call(this),Dt(this,Ta,AD).call(this,r)}getCurrentResult(){return oe(this,gl)}reset(){var r;(r=oe(this,oi))==null||r.removeObserver(this),Me(this,oi,void 0),Dt(this,Ta,Kb).call(this),Dt(this,Ta,AD).call(this)}mutate(r,i){var s;return Me(this,aa,i),(s=oe(this,oi))==null||s.removeObserver(this),Me(this,oi,oe(this,oa).getMutationCache().build(oe(this,oa),this.options)),oe(this,oi).addObserver(this),oe(this,oi).execute(r)}},oa=new WeakMap,gl=new WeakMap,oi=new WeakMap,aa=new WeakMap,Ta=new WeakSet,Kb=function(){var i;const r=((i=oe(this,oi))==null?void 0:i.state)??mX();Me(this,gl,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},AD=function(r){br.batch(()=>{var i,s,o,a,l,c,u,h;if(oe(this,aa)&&this.hasListeners()){const d=oe(this,gl).variables,f=oe(this,gl).context,p={client:oe(this,oa),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((s=(i=oe(this,aa)).onSuccess)==null||s.call(i,r.data,d,f,p),(a=(o=oe(this,aa)).onSettled)==null||a.call(o,r.data,null,d,f,p)):(r==null?void 0:r.type)==="error"&&((c=(l=oe(this,aa)).onError)==null||c.call(l,r.error,d,f,p),(h=(u=oe(this,aa)).onSettled)==null||h.call(u,void 0,r.error,d,f,p))}this.listeners.forEach(d=>{d(oe(this,gl))})})},YY),vo,GY,Oue=(GY=class extends c0{constructor(e={}){super();Ge(this,vo);this.config=e,Me(this,vo,new Map)}build(e,r,i){const s=r.queryKey,o=r.queryHash??CR(s,r);let a=this.get(o);return a||(a=new Cue({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:i,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){oe(this,vo).has(e.queryHash)||(oe(this,vo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=oe(this,vo).get(e.queryHash);r&&(e.destroy(),r===e&&oe(this,vo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){br.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return oe(this,vo).get(e)}getAll(){return[...oe(this,vo).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(i=>w4(r,i))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(i=>w4(e,i)):r}notify(e){br.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){br.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){br.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},vo=new WeakMap,GY),Rn,vl,bl,dh,hh,yl,fh,ph,KY,Iue=(KY=class{constructor(n={}){Ge(this,Rn);Ge(this,vl);Ge(this,bl);Ge(this,dh);Ge(this,hh);Ge(this,yl);Ge(this,fh);Ge(this,ph);Me(this,Rn,n.queryCache||new Oue),Me(this,vl,n.mutationCache||new Mue),Me(this,bl,n.defaultOptions||{}),Me(this,dh,new Map),Me(this,hh,new Map),Me(this,yl,0)}mount(){dv(this,yl)._++,oe(this,yl)===1&&(Me(this,fh,dX.subscribe(async n=>{n&&(await this.resumePausedMutations(),oe(this,Rn).onFocus())})),Me(this,ph,Yy.subscribe(async n=>{n&&(await this.resumePausedMutations(),oe(this,Rn).onOnline())})))}unmount(){var n,e;dv(this,yl)._--,oe(this,yl)===0&&((n=oe(this,fh))==null||n.call(this),Me(this,fh,void 0),(e=oe(this,ph))==null||e.call(this),Me(this,ph,void 0))}isFetching(n){return oe(this,Rn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return oe(this,vl).findAll({...n,status:"pending"}).length}getQueryData(n){var r;const e=this.defaultQueryOptions({queryKey:n});return(r=oe(this,Rn).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),r=oe(this,Rn).build(this,e),i=r.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&r.isStaleByTime(OD(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(n){return oe(this,Rn).findAll(n).map(({queryKey:e,state:r})=>{const i=r.data;return[e,i]})}setQueryData(n,e,r){const i=this.defaultQueryOptions({queryKey:n}),s=oe(this,Rn).get(i.queryHash),o=s==null?void 0:s.state.data,a=lue(e,o);if(a!==void 0)return oe(this,Rn).build(this,i).setData(a,{...r,manual:!0})}setQueriesData(n,e,r){return br.batch(()=>oe(this,Rn).findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,r)]))}getQueryState(n){var r;const e=this.defaultQueryOptions({queryKey:n});return(r=oe(this,Rn).get(e.queryHash))==null?void 0:r.state}removeQueries(n){const e=oe(this,Rn);br.batch(()=>{e.findAll(n).forEach(r=>{e.remove(r)})})}resetQueries(n,e){const r=oe(this,Rn);return br.batch(()=>(r.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const r={revert:!0,...e},i=br.batch(()=>oe(this,Rn).findAll(n).map(s=>s.cancel(r)));return Promise.all(i).then(as).catch(as)}invalidateQueries(n,e={}){return br.batch(()=>(oe(this,Rn).findAll(n).forEach(r=>{r.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},i=br.batch(()=>oe(this,Rn).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch(as)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then(as)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const r=oe(this,Rn).build(this,e);return r.isStaleByTime(OD(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(as).catch(as)}fetchInfiniteQuery(n){return n.behavior=T4(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(as).catch(as)}ensureInfiniteQueryData(n){return n.behavior=T4(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Yy.isOnline()?oe(this,vl).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,Rn)}getMutationCache(){return oe(this,vl)}getDefaultOptions(){return oe(this,bl)}setDefaultOptions(n){Me(this,bl,n)}setQueryDefaults(n,e){oe(this,dh).set(vu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...oe(this,dh).values()],r={};return e.forEach(i=>{rg(n,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(n,e){oe(this,hh).set(vu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...oe(this,hh).values()],r={};return e.forEach(i=>{rg(n,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(n){if(n._defaulted)return n;const e={...oe(this,bl).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=CR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ER&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...oe(this,bl).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){oe(this,Rn).clear(),oe(this,vl).clear()}},Rn=new WeakMap,vl=new WeakMap,bl=new WeakMap,dh=new WeakMap,hh=new WeakMap,yl=new WeakMap,fh=new WeakMap,ph=new WeakMap,KY),gX=D.createContext(void 0),Rue=n=>{const e=D.useContext(gX);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Aue=({client:n,children:e})=>(D.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),m.jsx(gX.Provider,{value:n,children:e}));function TR(n,e){const r=Rue(),[i]=D.useState(()=>new Due(r,n));D.useEffect(()=>{i.setOptions(n)},[i,n]);const s=D.useSyncExternalStore(D.useCallback(a=>i.subscribe(br.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=D.useCallback((a,l)=>{i.mutate(a,l).catch(as)},[i]);if(s.error&&bue(i.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}function PR(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function Gy(n){return PR(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const vX="2.43.2";let up={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:r})=>e?`${n??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${vX}`},jr=class ND extends Error{constructor(e,r={}){var l;const i=(()=>{var c;return r.cause instanceof ND?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),s=r.cause instanceof ND&&r.cause.docsPath||r.docsPath,o=(l=up.getDocsUrl)==null?void 0:l.call(up,{...r,docsPath:s}),a=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...i?[`Details: ${i}`]:[],...up.version?[`Version: ${up.version}`]:[]].join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=vX}walk(e){return bX(this,e)}};function bX(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?bX(n.cause,e):e?null:n}class Nue extends jr{constructor({expectedSize:e,givenSize:r}){super(`Expected bytes${e}, got bytes${r}.`,{name:"BytesSizeMismatchError"})}}class yX extends jr{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class xX extends jr{constructor({size:e,targetSize:r,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function u0(n,{dir:e,size:r=32}={}){return typeof n=="string"?jue(n,{dir:e,size:r}):Lue(n,{dir:e,size:r})}function jue(n,{dir:e,size:r=32}={}){if(r===null)return n;const i=n.replace("0x","");if(i.length>r*2)throw new xX({size:Math.ceil(i.length/2),targetSize:r,type:"hex"});return`0x${i[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function Lue(n,{dir:e,size:r=32}={}){if(r===null)return n;if(n.length>r)throw new xX({size:n.length,targetSize:r,type:"bytes"});const i=new Uint8Array(r);for(let s=0;s<r;s++){const o=e==="right";i[o?s:r-s-1]=n[o?s:n.length-s-1]}return i}class Fue extends jr{constructor({max:e,min:r,signed:i,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class $ue extends jr{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function _w(n,{size:e}){if(Gy(n)>e)throw new $ue({givenSize:Gy(n),maxSize:e})}const zue=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Bue(n,e={}){let r="";for(let s=0;s<n.length;s++)r+=zue[n[s]];const i=`0x${r}`;return typeof e.size=="number"?(_w(i,{size:e.size}),u0(i,{dir:"right",size:e.size})):i}function Ky(n,e={}){const{signed:r,size:i}=e,s=BigInt(n);let o;i?r?o=(1n<<BigInt(i)*8n-1n)-1n:o=2n**(BigInt(i)*8n)-1n:typeof n=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof o=="bigint"&&r?-o-1n:0;if(o&&s>o||s<a){const c=typeof n=="bigint"?"n":"";throw new Fue({max:o?`${o}${c}`:void 0,min:`${a}${c}`,signed:r,size:i,value:`${n}${c}`})}const l=`0x${(r&&s<0?(1n<<BigInt(i*8))+BigInt(s):s).toString(16)}`;return i?u0(l,{size:i}):l}const Uue=new TextEncoder;function que(n,e={}){const r=Uue.encode(n);return Bue(r,e)}const Wue=new TextEncoder;function Hue(n,e={}){return typeof n=="number"||typeof n=="bigint"?Yue(n,e):typeof n=="boolean"?Vue(n,e):PR(n)?wX(n,e):_X(n,e)}function Vue(n,e={}){const r=new Uint8Array(1);return r[0]=Number(n),typeof e.size=="number"?(_w(r,{size:e.size}),u0(r,{size:e.size})):r}const qo={zero:48,nine:57,A:65,F:70,a:97,f:102};function M4(n){if(n>=qo.zero&&n<=qo.nine)return n-qo.zero;if(n>=qo.A&&n<=qo.F)return n-(qo.A-10);if(n>=qo.a&&n<=qo.f)return n-(qo.a-10)}function wX(n,e={}){let r=n;e.size&&(_w(r,{size:e.size}),r=u0(r,{dir:"right",size:e.size}));let i=r.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,l=0;a<s;a++){const c=M4(i.charCodeAt(l++)),u=M4(i.charCodeAt(l++));if(c===void 0||u===void 0)throw new jr(`Invalid byte sequence ("${i[l-2]}${i[l-1]}" in "${i}").`);o[a]=c*16+u}return o}function Yue(n,e){const r=Ky(n,e);return wX(r)}function _X(n,e={}){const r=Wue.encode(n);return typeof e.size=="number"?(_w(r,{size:e.size}),u0(r,{dir:"right",size:e.size})):r}const Dv=BigInt(2**32-1),D4=BigInt(32);function Gue(n,e=!1){return e?{h:Number(n&Dv),l:Number(n>>D4&Dv)}:{h:Number(n>>D4&Dv)|0,l:Number(n&Dv)|0}}function Kue(n,e=!1){const r=n.length;let i=new Uint32Array(r),s=new Uint32Array(r);for(let o=0;o<r;o++){const{h:a,l}=Gue(n[o],e);[i[o],s[o]]=[a,l]}return[i,s]}const Xue=(n,e,r)=>n<<r|e>>>32-r,Que=(n,e,r)=>e<<r|n>>>32-r,Jue=(n,e,r)=>e<<r-32|n>>>64-r,Zue=(n,e,r)=>n<<r-32|e>>>64-r;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ede(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function O4(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Xy(n,...e){if(!ede(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function I4(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function tde(n,e){Xy(n);const r=e.outputLen;if(n.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function nde(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function SX(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}const rde=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ide(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function sde(n){for(let e=0;e<n.length;e++)n[e]=ide(n[e]);return n}const R4=rde?n=>n:sde;function ode(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function kX(n){return typeof n=="string"&&(n=ode(n)),Xy(n),n}let ade=class{};function lde(n){const e=i=>n().update(kX(i)).digest(),r=n();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>n(),e}const cde=BigInt(0),dp=BigInt(1),ude=BigInt(2),dde=BigInt(7),hde=BigInt(256),fde=BigInt(113),CX=[],EX=[],TX=[];for(let n=0,e=dp,r=1,i=0;n<24;n++){[r,i]=[i,(2*r+3*i)%5],CX.push(2*(5*i+r)),EX.push((n+1)*(n+2)/2%64);let s=cde;for(let o=0;o<7;o++)e=(e<<dp^(e>>dde)*fde)%hde,e&ude&&(s^=dp<<(dp<<BigInt(o))-dp);TX.push(s)}const PX=Kue(TX,!0),pde=PX[0],mde=PX[1],A4=(n,e,r)=>r>32?Jue(n,e,r):Xue(n,e,r),N4=(n,e,r)=>r>32?Zue(n,e,r):Que(n,e,r);function gde(n,e=24){const r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let a=0;a<10;a++)r[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const l=(a+8)%10,c=(a+2)%10,u=r[c],h=r[c+1],d=A4(u,h,1)^r[l],f=N4(u,h,1)^r[l+1];for(let p=0;p<50;p+=10)n[a+p]^=d,n[a+p+1]^=f}let s=n[2],o=n[3];for(let a=0;a<24;a++){const l=EX[a],c=A4(s,o,l),u=N4(s,o,l),h=CX[a];s=n[h],o=n[h+1],n[h]=c,n[h+1]=u}for(let a=0;a<50;a+=10){for(let l=0;l<10;l++)r[l]=n[a+l];for(let l=0;l<10;l++)n[a+l]^=~r[(l+2)%10]&r[(l+4)%10]}n[0]^=pde[i],n[1]^=mde[i]}SX(r)}let vde=class MX extends ade{constructor(e,r,i,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=i,this.enableXOF=s,this.rounds=o,O4(i),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=nde(this.state)}clone(){return this._cloneInto()}keccak(){R4(this.state32),gde(this.state32,this.rounds),R4(this.state32),this.posOut=0,this.pos=0}update(e){I4(this),e=kX(e),Xy(e);const{blockLen:r,state:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(r-this.pos,s-o);for(let l=0;l<a;l++)i[this.pos++]^=e[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:i,blockLen:s}=this;e[i]^=r,r&128&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){I4(this,!1),Xy(e),this.finish();const r=this.state,{blockLen:i}=this;for(let s=0,o=e.length;s<o;){this.posOut>=i&&this.keccak();const a=Math.min(i-this.posOut,o-s);e.set(r.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return O4(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(tde(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,SX(this.state)}_cloneInto(e){const{blockLen:r,suffix:i,outputLen:s,rounds:o,enableXOF:a}=this;return e||(e=new MX(r,i,s,a,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=i,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}};const bde=(n,e,r)=>lde(()=>new vde(e,n,r)),yde=bde(1,136,256/8);function xde(n,e){return yde(PR(n,{strict:!1})?Hue(n):n)}class MR extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const i=this.keys().next().value;i&&this.delete(i)}return this}}const wde=/^0x[a-fA-F0-9]{40}$/,j_=new MR(8192);function DX(n,e){const{strict:r=!0}=e??{},i=`${n}.${r}`;if(j_.has(i))return j_.get(i);const s=wde.test(n)?n.toLowerCase()===n?!0:r?OX(n)===n:!0:!1;return j_.set(i,s),s}const L_=new MR(8192);function OX(n,e){if(L_.has(`${n}.${e}`))return L_.get(`${n}.${e}`);const r=n.substring(2).toLowerCase(),i=xde(_X(r)),s=r.split("");for(let a=0;a<40;a+=2)i[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(i[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const o=`0x${s.join("")}`;return L_.set(`${n}.${e}`,o),o}function Gp(n,e){if(!DX(n,{strict:!1}))throw new yX({address:n});return OX(n,e)}const _de=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Sde=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function DR(n){return typeof n=="string"?{address:n,type:"json-rpc"}:n}const ya=(n,e,r)=>JSON.stringify(n,(i,s)=>typeof s=="bigint"?s.toString():s,r),OR=n=>n;class ym extends jr{constructor({body:e,cause:r,details:i,headers:s,status:o,url:a}){super("HTTP request failed.",{cause:r,details:i,metaMessages:[o&&`Status: ${o}`,`URL: ${OR(a)}`,e&&`Request body: ${ya(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=o,this.url=a}}class IX extends jr{constructor({body:e,error:r,url:i}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${OR(i)}`,`Request body: ${ya(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data,this.url=i}}class j4 extends jr{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${OR(r)}`,`Request body: ${ya(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=r}}const kde=-1;class _i extends jr{constructor(e,{code:r,docsPath:i,metaMessages:s,name:o,shortMessage:a}){super(a,{cause:e,docsPath:i,metaMessages:s||(e==null?void 0:e.metaMessages),name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||e.name,this.code=e instanceof IX?e.code:r??kde}}class Vi extends _i{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class ig extends _i{constructor(e){super(e,{code:ig.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(ig,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class sg extends _i{constructor(e){super(e,{code:sg.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(sg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class og extends _i{constructor(e,{method:r}={}){super(e,{code:og.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(og,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class ag extends _i{constructor(e){super(e,{code:ag.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ag,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Uh extends _i{constructor(e){super(e,{code:Uh.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Uh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class lg extends _i{constructor(e){super(e,{code:lg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(lg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class cg extends _i{constructor(e){super(e,{code:cg.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(cg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Ll extends _i{constructor(e){super(e,{code:Ll.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Ll,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ug extends _i{constructor(e){super(e,{code:ug.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ug,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Nc extends _i{constructor(e,{method:r}={}){super(e,{code:Nc.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(Nc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class qh extends _i{constructor(e){super(e,{code:qh.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(qh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class dg extends _i{constructor(e){super(e,{code:dg.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(dg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class qr extends Vi{constructor(e){super(e,{code:qr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(qr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class hg extends Vi{constructor(e){super(e,{code:hg.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(hg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class fg extends Vi{constructor(e,{method:r}={}){super(e,{code:fg.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(fg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class pg extends Vi{constructor(e){super(e,{code:pg.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(pg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class mg extends Vi{constructor(e){super(e,{code:mg.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(mg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class bu extends Vi{constructor(e){super(e,{code:bu.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(bu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class gg extends Vi{constructor(e){super(e,{code:gg.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(gg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class vg extends Vi{constructor(e){super(e,{code:vg.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(vg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class bg extends Vi{constructor(e){super(e,{code:bg.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(bg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class yg extends Vi{constructor(e){super(e,{code:yg.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(yg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class xg extends Vi{constructor(e){super(e,{code:xg.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(xg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class wg extends Vi{constructor(e){super(e,{code:wg.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(wg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class _g extends Vi{constructor(e){super(e,{code:_g.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(_g,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Cde extends _i{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const Ede="modulepreload",Tde=function(n){return"/"+n},L4={},RX=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Tde(c),c in L4)return;L4[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Ede,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};function Pde(){let n=()=>{},e=()=>{};return{promise:new Promise((i,s)=>{n=i,e=s}),resolve:n,reject:e}}const F_=new Map;function Mde({fn:n,id:e,shouldSplitBatch:r,wait:i=0,sort:s}){const o=async()=>{const h=c();a();const d=h.map(({args:f})=>f);d.length!==0&&n(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let p=0;p<h.length;p++){const{resolve:g}=h[p];g==null||g([f[p],f])}}).catch(f=>{for(let p=0;p<h.length;p++){const{reject:g}=h[p];g==null||g(f)}})},a=()=>F_.delete(e),l=()=>c().map(({args:h})=>h),c=()=>F_.get(e)||[],u=h=>F_.set(e,[...c(),h]);return{flush:a,async schedule(h){const{promise:d,resolve:f,reject:p}=Pde();return(r==null?void 0:r([...l(),h]))&&o(),c().length>0?(u({args:h,resolve:f,reject:p}),d):(u({args:h,resolve:f,reject:p}),setTimeout(o,i),d)}}}const Ov=new MR(8192);function Dde(n,{enabled:e=!0,id:r}){if(!e||!r)return n();if(Ov.get(r))return Ov.get(r);const i=n().finally(()=>Ov.delete(r));return Ov.set(r,i),i}async function Ode(n){return new Promise(e=>setTimeout(e,n))}function AX(n,{delay:e=100,retryCount:r=2,shouldRetry:i=()=>!0}={}){return new Promise((s,o)=>{const a=async({count:l=0}={})=>{const c=async({error:u})=>{const h=typeof e=="function"?e({count:l,error:u}):e;h&&await Ode(h),a({count:l+1})};try{const u=await n();s(u)}catch(u){if(l<r&&await i({count:l,error:u}))return c({error:u});o(u)}};a()})}function Ide(n,e={}){return async(r,i={})=>{var d;const{dedupe:s=!1,methods:o,retryDelay:a=150,retryCount:l=3,uid:c}={...e,...i},{method:u}=r;if((d=o==null?void 0:o.exclude)!=null&&d.includes(u))throw new Nc(new Error("method not supported"),{method:u});if(o!=null&&o.include&&!o.include.includes(u))throw new Nc(new Error("method not supported"),{method:u});const h=s?que(`${c}.${ya(r)}`):void 0;return Dde(()=>AX(async()=>{try{return await n(r)}catch(f){const p=f;switch(p.code){case ig.code:throw new ig(p);case sg.code:throw new sg(p);case og.code:throw new og(p,{method:r.method});case ag.code:throw new ag(p);case Uh.code:throw new Uh(p);case lg.code:throw new lg(p);case cg.code:throw new cg(p);case Ll.code:throw new Ll(p);case ug.code:throw new ug(p);case Nc.code:throw new Nc(p,{method:r.method});case qh.code:throw new qh(p);case dg.code:throw new dg(p);case qr.code:throw new qr(p);case hg.code:throw new hg(p);case fg.code:throw new fg(p);case pg.code:throw new pg(p);case mg.code:throw new mg(p);case bu.code:throw new bu(p);case gg.code:throw new gg(p);case vg.code:throw new vg(p);case bg.code:throw new bg(p);case yg.code:throw new yg(p);case xg.code:throw new xg(p);case wg.code:throw new wg(p);case _g.code:throw new _g(p);case 5e3:throw new qr(p);default:throw f instanceof jr?f:new Cde(p)}}},{delay:({count:f,error:p})=>{var g;if(p&&p instanceof ym){const b=(g=p==null?void 0:p.headers)==null?void 0:g.get("Retry-After");if(b!=null&&b.match(/\d/))return Number.parseInt(b,10)*1e3}return~~(1<<f)*a},retryCount:l,shouldRetry:({error:f})=>Rde(f)}),{enabled:s,id:h})}}function Rde(n){return"code"in n&&typeof n.code=="number"?n.code===-1||n.code===qh.code||n.code===Uh.code:n instanceof ym&&n.status?n.status===403||n.status===408||n.status===413||n.status===429||n.status===500||n.status===502||n.status===503||n.status===504:!0}function NX(n){const e={formatters:void 0,fees:void 0,serializers:void 0,...n};function r(i){return s=>{const o=typeof s=="function"?s(i):s,a={...i,...o};return Object.assign(a,{extend:r(a)})}}return Object.assign(e,{extend:r(e)})}function jX(n,{errorInstance:e=new Error("timed out"),timeout:r,signal:i}){return new Promise((s,o)=>{(async()=>{let a;try{const l=new AbortController;r>0&&(a=setTimeout(()=>{i?l.abort():o(e)},r)),s(await n({signal:(l==null?void 0:l.signal)||null}))}catch(l){(l==null?void 0:l.name)==="AbortError"&&o(e),o(l)}finally{clearTimeout(a)}})()})}function Ade(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const F4=Ade();function Nde(n,e={}){return{async request(r){var f;const{body:i,fetchFn:s=e.fetchFn??fetch,onRequest:o=e.onRequest,onResponse:a=e.onResponse,timeout:l=e.timeout??1e4}=r,c={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:u,method:h,signal:d}=c;try{const p=await jX(async({signal:b})=>{const y={...c,body:Array.isArray(i)?ya(i.map(_=>({jsonrpc:"2.0",id:_.id??F4.take(),..._}))):ya({jsonrpc:"2.0",id:i.id??F4.take(),...i}),headers:{"Content-Type":"application/json",...u},method:h||"POST",signal:d||(l>0?b:null)},v=new Request(n,y),w=await(o==null?void 0:o(v,y))??{...y,url:n};return await s(w.url??n,w)},{errorInstance:new j4({body:i,url:n}),timeout:l,signal:!0});a&&await a(p);let g;if((f=p.headers.get("Content-Type"))!=null&&f.startsWith("application/json"))g=await p.json();else{g=await p.text();try{g=JSON.parse(g||"{}")}catch(b){if(p.ok)throw b;g={error:g}}}if(!p.ok)throw new ym({body:i,details:ya(g.error)||p.statusText,headers:p.headers,status:p.status,url:n});return g}catch(p){throw p instanceof ym||p instanceof j4?p:new ym({body:i,cause:p,url:n})}}}}class jde extends jr{constructor({domain:e}){super(`Invalid domain "${ya(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Lde extends jr{constructor({primaryType:e,types:r}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Fde extends jr{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function $de(n){const{domain:e,message:r,primaryType:i,types:s}=n,o=(c,u)=>{const h={...u};for(const d of c){const{name:f,type:p}=d;p==="address"&&(h[f]=h[f].toLowerCase())}return h},a=s.EIP712Domain?e?o(s.EIP712Domain,e):{}:{},l=(()=>{if(i!=="EIP712Domain")return o(s[i],r)})();return ya({domain:a,message:l,primaryType:i,types:s})}function zde(n){const{domain:e,message:r,primaryType:i,types:s}=n,o=(a,l)=>{for(const c of a){const{name:u,type:h}=c,d=l[u],f=h.match(Sde);if(f&&(typeof d=="number"||typeof d=="bigint")){const[b,y,v]=f;Ky(d,{signed:y==="int",size:Number.parseInt(v,10)/8})}if(h==="address"&&typeof d=="string"&&!DX(d))throw new yX({address:d});const p=h.match(_de);if(p){const[b,y]=p;if(y&&Gy(d)!==Number.parseInt(y,10))throw new Nue({expectedSize:Number.parseInt(y,10),givenSize:Gy(d)})}const g=s[h];g&&(Ude(h),o(g,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new jde({domain:e});o(s.EIP712Domain,e)}if(i!=="EIP712Domain")if(s[i])o(s[i],r);else throw new Lde({primaryType:i,types:s})}function Bde({domain:n}){return[typeof(n==null?void 0:n.name)=="string"&&{name:"name",type:"string"},(n==null?void 0:n.version)&&{name:"version",type:"string"},(typeof(n==null?void 0:n.chainId)=="number"||typeof(n==null?void 0:n.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(n==null?void 0:n.verifyingContract)&&{name:"verifyingContract",type:"address"},(n==null?void 0:n.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Ude(n){if(n==="address"||n==="bool"||n==="string"||n.startsWith("bytes")||n.startsWith("uint")||n.startsWith("int"))throw new Fde({type:n})}class qde extends jr{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}async function Wde(n,e){const{account:r=n.account,domain:i,message:s,primaryType:o}=e;if(!r)throw new qde({docsPath:"/docs/actions/wallet/signTypedData"});const a=DR(r),l={EIP712Domain:Bde({domain:i}),...e.types};if(zde({domain:i,message:s,primaryType:o,types:l}),a.signTypedData)return a.signTypedData({domain:i,message:s,primaryType:o,types:l});const c=$de({domain:i,message:s,primaryType:o,types:l});return n.request({method:"eth_signTypedData_v4",params:[a.address,c]},{retryCount:0})}function Hde(n,e,r){const i=n[e.name];if(typeof i=="function")return i;const s=n[r];return typeof s=="function"?s:o=>e(n,o)}const Xb="3.0.0",Vde=()=>`@wagmi/core@${Xb}`;var LX=function(n,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(n):i?i.value:e.get(n)},Qy,FX;let Jl=class jD extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Vde()}constructor(e,r={}){var o;super(),Qy.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const i=r.cause instanceof jD?r.cause.details:(o=r.cause)!=null&&o.message?r.cause.message:r.details,s=r.cause instanceof jD&&r.cause.docsPath||r.docsPath;this.message=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${r.docsSlug?`#${r.docsSlug}`:""}`]:[],...i?[`Details: ${i}`]:[],`Version: ${this.version}`].join(`
`),r.cause&&(this.cause=r.cause),this.details=i,this.docsPath=s,this.metaMessages=r.metaMessages,this.shortMessage=e}walk(e){return LX(this,Qy,"m",FX).call(this,this,e)}};Qy=new WeakSet,FX=function n(e,r){return r!=null&&r(e)?e:e.cause?LX(this,Qy,"m",n).call(this,e.cause,r):e};class LD extends Jl{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Yde extends Jl{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class Gde extends Jl{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Kde extends Jl{constructor({address:e,connector:r}){super(`Account "${e}" not found for connector "${r.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class Xde extends Jl{constructor({connectionChainId:e,connectorChainId:r}){super(`The current chain of the connector (id: ${r}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class Qde extends Jl{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Jde(n,e){var i;let r;if(typeof e.connector=="function"?r=n._internal.connectors.setup(e.connector):r=e.connector,r.uid===n.state.current)throw new Yde;try{n.setState(l=>({...l,status:"connecting"})),r.emitter.emit("message",{type:"connecting"});const{connector:s,...o}=e,a=await r.connect(o);return r.emitter.off("connect",n._internal.events.connect),r.emitter.on("change",n._internal.events.change),r.emitter.on("disconnect",n._internal.events.disconnect),await((i=n.storage)==null?void 0:i.setItem("recentConnectorId",r.id)),n.setState(l=>({...l,connections:new Map(l.connections).set(r.uid,{accounts:o.withCapabilities?a.accounts.map(c=>typeof c=="object"?c.address:c):a.accounts,chainId:a.chainId,connector:r}),current:r.uid,status:"connected"})),{accounts:o.withCapabilities?a.accounts.map(l=>typeof l=="object"?l:{address:l,capabilities:{}}):a.accounts,chainId:a.chainId}}catch(s){throw n.setState(o=>({...o,status:o.current?"connected":"disconnected"})),s}}const FD=256;let Iv=FD,Rv;function $X(n=11){if(!Rv||Iv+n>FD*2){Rv="",Iv=0;for(let e=0;e<FD;e++)Rv+=(256+Math.random()*256|0).toString(16).substring(1)}return Rv.substring(Iv,Iv+++n)}function zX(n){const{batch:e,chain:r,ccipRead:i,key:s="base",name:o="Base Client",type:a="base"}=n,l=n.experimental_blockTag??(typeof(r==null?void 0:r.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(r==null?void 0:r.blockTime)??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),h=n.pollingInterval??u,d=n.cacheTime??h,f=n.account?DR(n.account):void 0,{config:p,request:g,value:b}=n.transport({account:f,chain:r,pollingInterval:h}),y={...p,...b},v={account:f,batch:e,cacheTime:d,ccipRead:i,chain:r,key:s,name:o,pollingInterval:h,request:g,transport:y,type:a,uid:$X(),...l?{experimental_blockTag:l}:{}};function w(k){return _=>{const S=_(k);for(const E in v)delete S[E];const C={...k,...S};return Object.assign(C,{extend:w(C)})}}return Object.assign(v,{extend:w(v)})}function BX({key:n,methods:e,name:r,request:i,retryCount:s=3,retryDelay:o=150,timeout:a,type:l},c){const u=$X();return{config:{key:n,methods:e,name:r,request:i,retryCount:s,retryDelay:o,timeout:a,type:l},request:Ide(i,{methods:e,retryCount:s,retryDelay:o,uid:u}),value:c}}function Zde(n,e={}){const{key:r="custom",methods:i,name:s="Custom Provider",retryDelay:o}=e;return({retryCount:a})=>BX({key:r,methods:i,name:s,request:n.request.bind(n),retryCount:e.retryCount??a,retryDelay:o,type:"custom"})}class ehe extends jr{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function $4(n,e={}){const{batch:r,fetchFn:i,fetchOptions:s,key:o="http",methods:a,name:l="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:h,raw:d}=e;return({chain:f,retryCount:p,timeout:g})=>{const{batchSize:b=1e3,wait:y=0}=typeof r=="object"?r:{},v=e.retryCount??p,w=g??e.timeout??1e4,k=f==null?void 0:f.rpcUrls.default.http[0];if(!k)throw new ehe;const _=Nde(k,{fetchFn:i,fetchOptions:s,onRequest:c,onResponse:u,timeout:w});return BX({key:o,methods:a,name:l,async request({method:S,params:C}){const E={method:S,params:C},{schedule:P}=Mde({id:k,wait:y,shouldSplitBatch(j){return j.length>b},fn:j=>_.request({body:j}),sort:(j,B)=>j.id-B.id}),O=async j=>r?P(j):[await _.request({body:j})],[{error:M,result:R}]=await O(E);if(d)return{error:M,result:R};if(M)throw new IX({body:E,error:M,url:k});return R},retryCount:v,retryDelay:h,timeout:w,type:"http"},{fetchOptions:s,url:k})}}async function the(n,e={}){const{assertChainId:r=!0}=e;let i;if(e.connector){const{connector:h}=e;if(n.state.status==="reconnecting"&&!h.getAccounts&&!h.getChainId)throw new Qde({connector:h});const[d,f]=await Promise.all([h.getAccounts().catch(p=>{if(e.account===null)return[];throw p}),h.getChainId()]);i={accounts:d,chainId:f,connector:h}}else i=n.state.connections.get(n.state.current);if(!i)throw new Gde;const s=e.chainId??i.chainId,o=await i.connector.getChainId();if(r&&o!==s)throw new Xde({connectionChainId:s,connectorChainId:o});const a=i.connector;if(a.getClient)return a.getClient({chainId:s});const l=DR(e.account??i.accounts[0]);if(l&&(l.address=Gp(l.address)),e.account&&!i.accounts.some(h=>h.toLowerCase()===l.address.toLowerCase()))throw new Kde({address:l.address,connector:a});const c=n.chains.find(h=>h.id===s),u=await i.connector.getProvider({chainId:s});return zX({account:l,chain:c,name:"Connector Client",transport:h=>Zde(u)({...h,retryCount:0})})}async function nhe(n,e={}){var s,o;let r;if(e.connector)r=e.connector;else{const{connections:a,current:l}=n.state,c=a.get(l);r=c==null?void 0:c.connector}const i=n.state.connections;r&&(await r.disconnect(),r.emitter.off("change",n._internal.events.change),r.emitter.off("disconnect",n._internal.events.disconnect),r.emitter.on("connect",n._internal.events.connect),i.delete(r.uid)),n.setState(a=>{if(i.size===0)return{...a,connections:new Map,current:null,status:"disconnected"};const l=i.values().next().value;return{...a,connections:new Map(i),current:l.connector.uid}});{const a=n.state.current;if(!a)return;const l=(s=n.state.connections.get(a))==null?void 0:s.connector;if(!l)return;await((o=n.storage)==null?void 0:o.setItem("recentConnectorId",l.id))}}function z4(n){return n.state.chainId}function Wh(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;let r,i;if(Array.isArray(n)&&Array.isArray(e)){if(r=n.length,r!==e.length)return!1;for(i=r;i--!==0;)if(!Wh(n[i],e[i]))return!1;return!0}if(typeof n.valueOf=="function"&&n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(typeof n.toString=="function"&&n.toString!==Object.prototype.toString)return n.toString()===e.toString();const s=Object.keys(n);if(r=s.length,r!==Object.keys(e).length)return!1;for(i=r;i--!==0;)if(!Object.hasOwn(e,s[i]))return!1;for(i=r;i--!==0;){const o=s[i];if(o&&!Wh(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function UX(n){const e=n.state.current,r=n.state.connections.get(e),i=r==null?void 0:r.accounts,s=i==null?void 0:i[0],o=n.chains.find(l=>l.id===(r==null?void 0:r.chainId)),a=n.state.status;switch(a){case"connected":return{address:s,addresses:i,chain:o,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:a};case"reconnecting":return{address:s,addresses:i,chain:o,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:a};case"connecting":return{address:s,addresses:i,chain:o,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:a};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:a}}}let Av=[];function $D(n){const e=[...n.state.connections.values()];return n.state.status==="reconnecting"||Wh(Av,e)?Av:(Av=e,e)}let Nv=[];function B4(n){const e=n.connectors;return Nv.length===e.length&&Nv.every((r,i)=>r===e[i])?Nv:(Nv=e,e)}let $_=!1;async function rhe(n,e={}){var u,h;if($_)return[];$_=!0,n.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const r=[];if((u=e.connectors)!=null&&u.length)for(const d of e.connectors){let f;typeof d=="function"?f=n._internal.connectors.setup(d):f=d,r.push(f)}else r.push(...n.connectors);let i;try{i=await((h=n.storage)==null?void 0:h.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of n.state.connections)s[d.connector.id]=1;i&&(s[i]=0);const o=Object.keys(s).length>0?[...r].sort((d,f)=>(s[d.id]??10)-(s[f.id]??10)):r;let a=!1;const l=[],c=[];for(const d of o){const f=await d.getProvider().catch(()=>{});if(!f||c.some(b=>b===f)||!await d.isAuthorized())continue;const g=await d.connect({isReconnecting:!0}).catch(()=>null);g&&(d.emitter.off("connect",n._internal.events.connect),d.emitter.on("change",n._internal.events.change),d.emitter.on("disconnect",n._internal.events.disconnect),n.setState(b=>{const y=new Map(a?b.connections:new Map).set(d.uid,{accounts:g.accounts,chainId:g.chainId,connector:d});return{...b,current:a?b.current:d.uid,connections:y}}),l.push({accounts:g.accounts,chainId:g.chainId,connector:d}),c.push(f),a=!0)}return(n.state.status==="reconnecting"||n.state.status==="connecting")&&(a?n.setState(d=>({...d,status:"connected"})):n.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),$_=!1,l}async function ihe(n,e){const{account:r,connector:i,...s}=e;let o;return typeof r=="object"&&r.type==="local"?o=n.getClient():o=await the(n,{account:r,connector:i}),Hde(o,Wde,"signTypedData")({...s,...r?{account:r}:{}})}class ad extends Jl{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}function she(n,e){const{onChange:r}=e;return n.subscribe(i=>i.chainId,r)}function ohe(n,e){const{onChange:r}=e;return n.subscribe(()=>UX(n),r,{equalityFn(i,s){const{connector:o,...a}=i,{connector:l,...c}=s;return Wh(a,c)&&(o==null?void 0:o.id)===(l==null?void 0:l.id)&&(o==null?void 0:o.uid)===(l==null?void 0:l.uid)}})}function ahe(n,e){const{onChange:r}=e;return n.subscribe(()=>$D(n),r,{equalityFn:Wh})}function lhe(n,e){const{onChange:r}=e;return n._internal.connectors.subscribe((i,s)=>{r(Object.values(i),s)})}Sw.type="injected";function Sw(n={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:r}=n;function i(){const c=n.target;if(typeof c=="function"){const u=c();if(u)return u}return typeof c=="object"?c:typeof c=="string"?{...che[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(u){return u==null?void 0:u.ethereum}}}let s,o,a,l;return c=>({get icon(){return i().icon},get id(){return i().id},get name(){return i().name},type:Sw.type,async setup(){const u=await this.getProvider();u!=null&&u.on&&n.target&&(a||(a=this.onConnect.bind(this),u.on("connect",a)),s||(s=this.onAccountsChanged.bind(this),u.on("accountsChanged",s)))},async connect({chainId:u,isReconnecting:h,withCapabilities:d}={}){var g,b,y,v,w,k;const f=await this.getProvider();if(!f)throw new ad;let p=[];if(h)p=await this.getAccounts().catch(()=>[]);else if(e)try{p=(v=(y=(b=(g=(await f.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:g.caveats)==null?void 0:b[0])==null?void 0:y.value)==null?void 0:v.map(S=>Gp(S)),p.length>0&&(p=await this.getAccounts())}catch(_){const S=_;if(S.code===qr.code)throw new qr(S);if(S.code===Ll.code)throw S}try{!(p!=null&&p.length)&&!h&&(p=(await f.request({method:"eth_requestAccounts"})).map(C=>Gp(C))),a&&(f.removeListener("connect",a),a=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),o||(o=this.onChainChanged.bind(this),f.on("chainChanged",o)),l||(l=this.onDisconnect.bind(this),f.on("disconnect",l));let _=await this.getChainId();if(u&&_!==u){const S=await this.switchChain({chainId:u}).catch(C=>{if(C.code===qr.code)throw C;return{id:_}});_=(S==null?void 0:S.id)??_}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),n.target||await((k=c.storage)==null?void 0:k.setItem("injected.connected",!0)),{accounts:d?p.map(S=>({address:S,capabilities:{}})):p,chainId:_}}catch(_){const S=_;throw S.code===qr.code?new qr(S):S.code===Ll.code?new Ll(S):S}},async disconnect(){var h,d;const u=await this.getProvider();if(!u)throw new ad;o&&(u.removeListener("chainChanged",o),o=void 0),l&&(u.removeListener("disconnect",l),l=void 0),a||(a=this.onConnect.bind(this),u.on("connect",a));try{await jX(()=>u.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((h=c.storage)==null?void 0:h.setItem(`${this.id}.disconnected`,!0)),n.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const u=await this.getProvider();if(!u)throw new ad;return(await u.request({method:"eth_accounts"})).map(d=>Gp(d))},async getChainId(){const u=await this.getProvider();if(!u)throw new ad;const h=await u.request({method:"eth_chainId"});return Number(h)},async getProvider(){if(typeof window>"u")return;let u;const h=i();return typeof h.provider=="function"?u=h.provider(window):typeof h.provider=="string"?u=Qb(window,h.provider):u=h.provider,u&&!u.removeListener&&("off"in u&&typeof u.off=="function"?u.removeListener=u.off:u.removeListener=()=>{}),u},async isAuthorized(){var u,h;try{if(e&&await((u=c.storage)==null?void 0:u.getItem(`${this.id}.disconnected`))||!n.target&&!await((h=c.storage)==null?void 0:h.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(r!==void 0&&r!==!1){const g=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",g),!!await this.getProvider()),b=typeof r=="number"?r:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(v=>window.addEventListener("ethereum#initialized",()=>v(g()),{once:!0}))]:[],new Promise(v=>setTimeout(()=>v(g()),b))]))return!0}throw new ad}return!!(await AX(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:h}){var g,b,y,v;const d=await this.getProvider();if(!d)throw new ad;const f=c.chains.find(w=>w.id===h);if(!f)throw new bu(new LD);const p=new Promise(w=>{const k=_=>{"chainId"in _&&_.chainId===h&&(c.emitter.off("change",k),w())};c.emitter.on("change",k)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ky(h)}]}).then(async()=>{await this.getChainId()===h&&c.emitter.emit("change",{chainId:h})}),p]),f}catch(w){const k=w;if(k.code===4902||((b=(g=k==null?void 0:k.data)==null?void 0:g.originalError)==null?void 0:b.code)===4902)try{const{default:_,...S}=f.blockExplorers??{};let C;u!=null&&u.blockExplorerUrls?C=u.blockExplorerUrls:_&&(C=[_.url,...Object.values(S).map(O=>O.url)]);let E;(y=u==null?void 0:u.rpcUrls)!=null&&y.length?E=u.rpcUrls:E=[((v=f.rpcUrls.default)==null?void 0:v.http[0])??""];const P={blockExplorerUrls:C,chainId:Ky(h),chainName:(u==null?void 0:u.chainName)??f.name,iconUrls:u==null?void 0:u.iconUrls,nativeCurrency:(u==null?void 0:u.nativeCurrency)??f.nativeCurrency,rpcUrls:E};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[P]}).then(async()=>{if(await this.getChainId()===h)c.emitter.emit("change",{chainId:h});else throw new qr(new Error("User rejected switch after adding network."))}),p]),f}catch(_){throw new qr(_)}throw k.code===qr.code?new qr(k):new bu(k)}},async onAccountsChanged(u){var h;if(u.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((h=c.storage)==null?void 0:h.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:u.map(d=>Gp(d))})},onChainChanged(u){const h=Number(u);c.emitter.emit("change",{chainId:h})},async onConnect(u){const h=await this.getAccounts();if(h.length===0)return;const d=Number(u.chainId);c.emitter.emit("connect",{accounts:h,chainId:d});const f=await this.getProvider();f&&(a&&(f.removeListener("connect",a),a=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),o||(o=this.onChainChanged.bind(this),f.on("chainChanged",o)),l||(l=this.onDisconnect.bind(this),f.on("disconnect",l)))},async onDisconnect(u){const h=await this.getProvider();u&&u.code===1013&&h&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),h&&(o&&(h.removeListener("chainChanged",o),o=void 0),l&&(h.removeListener("disconnect",l),l=void 0),a||(a=this.onConnect.bind(this),h.on("connect",a))))}})}const che={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(n){return n!=null&&n.coinbaseWalletExtension?n.coinbaseWalletExtension:Qb(n,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(n){return Qb(n,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const r=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const i of r)if(e[i])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(n){var e,r;return(e=n==null?void 0:n.phantom)!=null&&e.ethereum?(r=n.phantom)==null?void 0:r.ethereum:Qb(n,"isPhantom")}}};function Qb(n,e){function r(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const i=n.ethereum;if(i!=null&&i.providers)return i.providers.find(s=>r(s));if(i&&r(i))return i}function uhe(n){if(typeof window>"u")return;const e=r=>n(r.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function dhe(){const n=new Set;let e=[];const r=()=>uhe(s=>{e.some(({info:o})=>o.uuid===s.info.uuid)||(e=[...e,s],n.forEach(o=>o(e,{added:[s]})))});let i=r();return{_listeners(){return n},clear(){n.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),n.clear(),i==null||i()},findProvider({rdns:s}){return e.find(o=>o.info.rdns===s)},getProviders(){return e},reset(){this.clear(),i==null||i(),i=r()},subscribe(s,{emitImmediately:o}={}){return n.add(s),o&&s(e,{added:e}),()=>n.delete(s)}}}const hhe=n=>(e,r,i)=>{const s=i.subscribe;return i.subscribe=(a,l,c)=>{let u=a;if(l){const h=(c==null?void 0:c.equalityFn)||Object.is;let d=a(i.getState());u=f=>{const p=a(f);if(!h(d,p)){const g=d;l(d=p,g)}},c!=null&&c.fireImmediately&&l(d,d)}return s(u)},n(e,r,i)},fhe=hhe;function phe(n,e){let r;try{r=n()}catch{return}return{getItem:s=>{var o;const a=c=>c===null?null:JSON.parse(c,void 0),l=(o=r.getItem(s))!=null?o:null;return l instanceof Promise?l.then(a):a(l)},setItem:(s,o)=>r.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>r.removeItem(s)}}const zD=n=>e=>{try{const r=n(e);return r instanceof Promise?r:{then(i){return zD(i)(r)},catch(i){return this}}}catch(r){return{then(i){return this},catch(i){return zD(i)(r)}}}},mhe=(n,e)=>(r,i,s)=>{let o={storage:phe(()=>localStorage),partialize:b=>b,version:0,merge:(b,y)=>({...y,...b}),...e},a=!1;const l=new Set,c=new Set;let u=o.storage;if(!u)return n((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...b)},i,s);const h=()=>{const b=o.partialize({...i()});return u.setItem(o.name,{state:b,version:o.version})},d=s.setState;s.setState=(b,y)=>{d(b,y),h()};const f=n((...b)=>{r(...b),h()},i,s);s.getInitialState=()=>f;let p;const g=()=>{var b,y;if(!u)return;a=!1,l.forEach(w=>{var k;return w((k=i())!=null?k:f)});const v=((y=o.onRehydrateStorage)==null?void 0:y.call(o,(b=i())!=null?b:f))||void 0;return zD(u.getItem.bind(u))(o.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==o.version){if(o.migrate)return[!0,o.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var k;const[_,S]=w;if(p=o.merge(S,(k=i())!=null?k:f),r(p,!0),_)return h()}).then(()=>{v==null||v(p,void 0),p=i(),a=!0,c.forEach(w=>w(p))}).catch(w=>{v==null||v(void 0,w)})};return s.persist={setOptions:b=>{o={...o,...b},b.storage&&(u=b.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},o.skipHydration||g(),p||f},ghe=mhe,U4=n=>{let e;const r=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const f=e;e=h??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(p=>p(e,f))}},s=()=>e,l={setState:i,getState:s,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=e=n(i,s,l);return l},z_=n=>n?U4(n):U4;var qX={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function s(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function o(c,u,h,d,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new s(h,d||c,f),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new i:delete c._events[u]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],h,d;if(this._eventsCount===0)return u;for(d in h=this._events)e.call(h,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},l.prototype.listeners=function(u){var h=r?r+u:u,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,g=new Array(p);f<p;f++)g[f]=d[f].fn;return g},l.prototype.listenerCount=function(u){var h=r?r+u:u,d=this._events[h];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,h,d,f,p,g){var b=r?r+u:u;if(!this._events[b])return!1;var y=this._events[b],v=arguments.length,w,k;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,h),!0;case 3:return y.fn.call(y.context,h,d),!0;case 4:return y.fn.call(y.context,h,d,f),!0;case 5:return y.fn.call(y.context,h,d,f,p),!0;case 6:return y.fn.call(y.context,h,d,f,p,g),!0}for(k=1,w=new Array(v-1);k<v;k++)w[k-1]=arguments[k];y.fn.apply(y.context,w)}else{var _=y.length,S;for(k=0;k<_;k++)switch(y[k].once&&this.removeListener(u,y[k].fn,void 0,!0),v){case 1:y[k].fn.call(y[k].context);break;case 2:y[k].fn.call(y[k].context,h);break;case 3:y[k].fn.call(y[k].context,h,d);break;case 4:y[k].fn.call(y[k].context,h,d,f);break;default:if(!w)for(S=1,w=new Array(v-1);S<v;S++)w[S-1]=arguments[S];y[k].fn.apply(y[k].context,w)}}return!0},l.prototype.on=function(u,h,d){return o(this,u,h,d,!1)},l.prototype.once=function(u,h,d){return o(this,u,h,d,!0)},l.prototype.removeListener=function(u,h,d,f){var p=r?r+u:u;if(!this._events[p])return this;if(!h)return a(this,p),this;var g=this._events[p];if(g.fn)g.fn===h&&(!f||g.once)&&(!d||g.context===d)&&a(this,p);else{for(var b=0,y=[],v=g.length;b<v;b++)(g[b].fn!==h||f&&!g[b].once||d&&g[b].context!==d)&&y.push(g[b]);y.length?this._events[p]=y.length===1?y[0]:y:a(this,p)}return this},l.prototype.removeAllListeners=function(u){var h;return u?(h=r?r+u:u,this._events[h]&&a(this,h)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,n.exports=l})(qX);var vhe=qX.exports;const bhe=iw(vhe);let yhe=class{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new bhe})}on(e,r){this._emitter.on(e,r)}once(e,r){this._emitter.once(e,r)}off(e,r){this._emitter.off(e,r)}emit(e,...r){const i=r[0];this._emitter.emit(e,{uid:this.uid,...i})}listenerCount(e){return this._emitter.listenerCount(e)}};function xhe(n){return new yhe(n)}function whe(n,e){return JSON.parse(n,(r,i)=>{let s=i;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(r,s))??s})}function q4(n,e){return n.slice(0,e).join(".")||"."}function W4(n,e){const{length:r}=n;for(let i=0;i<r;++i)if(n[i]===e)return i+1;return 0}function _he(n,e){const r=typeof n=="function",i=typeof e=="function",s=[],o=[];return function(l,c){if(typeof c=="object")if(s.length){const u=W4(s,this);u===0?s[s.length]=this:(s.splice(u),o.splice(u)),o[o.length]=l;const h=W4(s,c);if(h!==0)return i?e.call(this,l,c,q4(o,h)):`[ref=${q4(o,h)}]`}else s[0]=c,o[0]=l;return r?n.call(this,l,c):c}}function She(n,e,r,i){return JSON.stringify(n,_he((s,o)=>{let a=o;return typeof a=="bigint"&&(a={__type:"bigint",value:o.toString()}),a instanceof Map&&(a={__type:"Map",value:Array.from(o.entries())}),(e==null?void 0:e(s,a))??a},i),r??void 0)}function khe(n){const{deserialize:e=whe,key:r="wagmi",serialize:i=She,storage:s=WX}=n;function o(a){return a instanceof Promise?a.then(l=>l).catch(()=>null):a}return{...s,key:r,async getItem(a,l){const c=s.getItem(`${r}.${a}`),u=await o(c);return u?e(u)??null:l??null},async setItem(a,l){const c=`${r}.${a}`;l===null?await o(s.removeItem(c)):await o(s.setItem(c,i(l)))},async removeItem(a){await o(s.removeItem(`${r}.${a}`))}}}const WX={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Che(){const n=typeof window<"u"&&window.localStorage?window.localStorage:WX;return{getItem(e){return n.getItem(e)},removeItem(e){n.removeItem(e)},setItem(e,r){try{n.setItem(e,r)}catch{}}}}const BD=256;let jv=BD,Lv;function Ehe(n=11){if(!Lv||jv+n>BD*2){Lv="",jv=0;for(let e=0;e<BD;e++)Lv+=(256+Math.random()*256|0).toString(16).substring(1)}return Lv.substring(jv,jv+++n)}function The(n){const{multiInjectedProviderDiscovery:e=!0,storage:r=khe({storage:Che()}),syncConnectedChain:i=!0,ssr:s=!1,...o}=n,a=typeof window<"u"&&e?dhe():void 0,l=z_(()=>o.chains),c=z_(()=>{const S=[],C=new Set;for(const E of o.connectors??[]){const P=u(E);if(S.push(P),!s&&P.rdns){const O=typeof P.rdns=="string"?[P.rdns]:P.rdns;for(const M of O)C.add(M)}}if(!s&&a){const E=a.getProviders();for(const P of E)C.has(P.info.rdns)||S.push(u(h(P)))}return S});function u(S){var P;const C=xhe(Ehe()),E={...S({emitter:C,chains:l.getState(),storage:r,transports:o.transports}),emitter:C,uid:C.uid};return C.on("connect",k),(P=E.setup)==null||P.call(E),E}function h(S){const{info:C}=S,E=S.provider;return Sw({target:{...C,id:C.rdns,provider:E}})}const d=new Map;function f(S={}){const C=S.chainId??y.getState().chainId,E=l.getState().find(O=>O.id===C);if(S.chainId&&!E)throw new LD;{const O=d.get(y.getState().chainId);if(O&&!E)return O;if(!E)throw new LD}{const O=d.get(C);if(O)return O}let P;if(o.client)P=o.client({chain:E});else{const O=E.id,M=l.getState().map(B=>B.id),R={},j=Object.entries(o);for(const[B,L]of j)if(!(B==="chains"||B==="client"||B==="connectors"||B==="transports"))if(typeof L=="object")if(O in L)R[B]=L[O];else{if(M.some(z=>z in L))continue;R[B]=L}else R[B]=L;P=zX({...R,chain:E,batch:R.batch??{multicall:!0},transport:B=>o.transports[O]({...B,connectors:c})})}return d.set(C,P),P}function p(){return{chainId:l.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let g;const b="0.0.0-canary-";Xb.startsWith(b)?g=Number.parseInt(Xb.replace(b,""),10):g=Number.parseInt(Xb.split(".")[0]??"0",10);const y=z_(fhe(r?ghe(p,{migrate(S,C){if(C===g)return S;const E=p(),P=v(S,E.chainId);return{...E,chainId:P}},name:"store",partialize(S){return{connections:{__type:"Map",value:Array.from(S.connections.entries()).map(([C,E])=>{const{id:P,name:O,type:M,uid:R}=E.connector;return[C,{...E,connector:{id:P,name:O,type:M,uid:R}}]})},chainId:S.chainId,current:S.current}},merge(S,C){typeof S=="object"&&S&&"status"in S&&delete S.status;const E=v(S,C.chainId);return{...C,...S,chainId:E}},skipHydration:s,storage:r,version:g}):p));y.setState(p());function v(S,C){return S&&typeof S=="object"&&"chainId"in S&&typeof S.chainId=="number"&&l.getState().some(E=>E.id===S.chainId)?S.chainId:C}i&&y.subscribe(({connections:S,current:C})=>{var E;return C?(E=S.get(C))==null?void 0:E.chainId:void 0},S=>{if(l.getState().some(E=>E.id===S))return y.setState(E=>({...E,chainId:S??E.chainId}))}),a==null||a.subscribe(S=>{const C=new Set,E=new Set;for(const O of c.getState())if(C.add(O.id),O.rdns){const M=typeof O.rdns=="string"?[O.rdns]:O.rdns;for(const R of M)E.add(R)}const P=[];for(const O of S){if(E.has(O.info.rdns))continue;const M=u(h(O));C.has(M.id)||P.push(M)}r&&!y.persist.hasHydrated()||c.setState(O=>[...O,...P],!0)});function w(S){y.setState(C=>{const E=C.connections.get(S.uid);return E?{...C,connections:new Map(C.connections).set(S.uid,{accounts:S.accounts??E.accounts,chainId:S.chainId??E.chainId,connector:E.connector})}:C})}function k(S){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(C=>{const E=c.getState().find(P=>P.uid===S.uid);return E?(E.emitter.listenerCount("connect")&&E.emitter.off("connect",w),E.emitter.listenerCount("change")||E.emitter.on("change",w),E.emitter.listenerCount("disconnect")||E.emitter.on("disconnect",_),{...C,connections:new Map(C.connections).set(S.uid,{accounts:S.accounts,chainId:S.chainId,connector:E}),current:S.uid,status:"connected"}):C})}function _(S){y.setState(C=>{const E=C.connections.get(S.uid);if(E){const O=E.connector;O.emitter.listenerCount("change")&&E.connector.emitter.off("change",w),O.emitter.listenerCount("disconnect")&&E.connector.emitter.off("disconnect",_),O.emitter.listenerCount("connect")||E.connector.emitter.on("connect",k)}if(C.connections.delete(S.uid),C.connections.size===0)return{...C,connections:new Map,current:null,status:"disconnected"};const P=C.connections.values().next().value;return{...C,connections:new Map(C.connections),current:P.connector.uid}})}return{get chains(){return l.getState()},get connectors(){return c.getState()},storage:r,getClient:f,get state(){return y.getState()},setState(S){let C;typeof S=="function"?C=S(y.getState()):C=S;const E=p();typeof C!="object"&&(C=E),Object.keys(E).some(O=>!(O in C))&&(C=E),y.setState(C,!0)},subscribe(S,C,E){return y.subscribe(S,C,E?{...E,fireImmediately:E.emitImmediately}:void 0)},_internal:{mipd:a,async revalidate(){const S=y.getState(),C=S.connections;let E=S.current;for(const[,P]of C){const O=P.connector;O.isAuthorized&&await O.isAuthorized()||(C.delete(O.uid),E===O.uid&&(E=null))}y.setState(P=>({...P,connections:C,current:E}))},store:y,ssr:!!s,syncConnectedChain:i,transports:o.transports,chains:{setState(S){const C=typeof S=="function"?S(l.getState()):S;if(C.length!==0)return l.setState(C,!0)},subscribe(S){return l.subscribe(S)}},connectors:{providerDetailToConnector:h,setup:u,setState(S){return c.setState(typeof S=="function"?S(c.getState()):S,!0)},subscribe(S){return c.subscribe(S)}},events:{change:w,connect:k,disconnect:_}}}}function Phe(n,e){const{initialState:r,reconnectOnMount:i}=e;return r&&!n._internal.store.persist.hasHydrated()&&n.setState({...r,chainId:n.chains.some(s=>s.id===r.chainId)?r.chainId:n.chains[0].id,connections:i?r.connections:new Map,status:i?"reconnecting":"disconnected"}),{async onMount(){n._internal.ssr&&(await n._internal.store.persist.rehydrate(),n._internal.mipd&&n._internal.connectors.setState(s=>{var c;const o=new Set;for(const u of s??[])if(u.rdns){const h=Array.isArray(u.rdns)?u.rdns:[u.rdns];for(const d of h)o.add(d)}const a=[],l=((c=n._internal.mipd)==null?void 0:c.getProviders())??[];for(const u of l){if(o.has(u.info.rdns))continue;const h=n._internal.connectors.providerDetailToConnector(u),d=n._internal.connectors.setup(h);a.push(d)}return[...s,...a]})),i?rhe(n):n.storage&&n.setState(s=>({...s,connections:new Map}))}}}function Mhe(n){const{children:e,config:r,initialState:i,reconnectOnMount:s=!0}=n,{onMount:o}=Phe(r,{initialState:i,reconnectOnMount:s});r._internal.ssr||o();const a=D.useRef(!0);return D.useEffect(()=>{if(a.current&&r._internal.ssr)return o(),()=>{a.current=!1}},[]),e}const HX=D.createContext(void 0);function Dhe(n){const{children:e,config:r}=n,i={value:r};return D.createElement(Mhe,n,D.createElement(HX.Provider,i,e))}const Ohe="3.1.0",Ihe=()=>`wagmi@${Ohe}`;class Rhe extends Jl{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Ihe()}}class Ahe extends Rhe{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Nhe(n){return{mutationFn(e){return Jde(n,e)},mutationKey:["connect"]}}function jhe(n){return{mutationFn(e){return nhe(n,e)},mutationKey:["disconnect"]}}function Lhe(n){return{mutationFn(e){return ihe(n,e)},mutationKey:["signTypedData"]}}function Fu(n={}){const e=n.config??D.useContext(HX);if(!e)throw new Ahe;return e}function VX(n={}){const e=Fu(n);return D.useSyncExternalStore(r=>she(e,{onChange:r}),()=>z4(e),()=>z4(e))}var YX={exports:{}},GX={},KX={exports:{}},XX={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh=D;function Fhe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var $he=typeof Object.is=="function"?Object.is:Fhe,zhe=Hh.useState,Bhe=Hh.useEffect,Uhe=Hh.useLayoutEffect,qhe=Hh.useDebugValue;function Whe(n,e){var r=e(),i=zhe({inst:{value:r,getSnapshot:e}}),s=i[0].inst,o=i[1];return Uhe(function(){s.value=r,s.getSnapshot=e,B_(s)&&o({inst:s})},[n,r,e]),Bhe(function(){return B_(s)&&o({inst:s}),n(function(){B_(s)&&o({inst:s})})},[n]),qhe(r),r}function B_(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!$he(n,r)}catch{return!0}}function Hhe(n,e){return e()}var Vhe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Hhe:Whe;XX.useSyncExternalStore=Hh.useSyncExternalStore!==void 0?Hh.useSyncExternalStore:Vhe;KX.exports=XX;var Yhe=KX.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw=D,Ghe=Yhe;function Khe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Xhe=typeof Object.is=="function"?Object.is:Khe,Qhe=Ghe.useSyncExternalStore,Jhe=kw.useRef,Zhe=kw.useEffect,efe=kw.useMemo,tfe=kw.useDebugValue;GX.useSyncExternalStoreWithSelector=function(n,e,r,i,s){var o=Jhe(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=efe(function(){function c(p){if(!u){if(u=!0,h=p,p=i(p),s!==void 0&&a.hasValue){var g=a.value;if(s(g,p))return d=g}return d=p}if(g=d,Xhe(h,p))return g;var b=i(p);return s!==void 0&&s(g,b)?(h=p,g):(h=p,d=b)}var u=!1,h,d,f=r===void 0?null:r;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,r,i,s]);var l=Qhe(n,o[0],o[1]);return Zhe(function(){a.hasValue=!0,a.value=l},[l]),tfe(l),l};YX.exports=GX;var nfe=YX.exports;const U_=n=>typeof n=="object"&&!Array.isArray(n);function rfe(n,e,r=e,i=Wh){const s=D.useRef([]),o=nfe.useSyncExternalStoreWithSelector(n,e,r,a=>a,(a,l)=>{if(U_(a)&&U_(l)&&s.current.length){for(const c of s.current)if(!i(a[c],l[c]))return!1;return!0}return i(a,l)});return D.useMemo(()=>{if(U_(o)){const a={...o};let l={};for(const[c,u]of Object.entries(a))l={...l,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),u)}};return Object.defineProperties(a,l),a}return o},[o])}function IR(n={}){const e=Fu(n);return rfe(r=>ohe(e,{onChange:r}),()=>UX(e))}function ife(n={}){const e=Fu(n);return D.useSyncExternalStore(r=>lhe(e,{onChange:r}),()=>B4(e),()=>B4(e))}function QX(n={}){const e=Fu(n),r=Nhe(e),i=TR({...n.mutation,...r});return D.useEffect(()=>e.subscribe(({status:s})=>s,(s,o)=>{o==="connected"&&s==="disconnected"&&i.reset()}),[e,i.reset]),{...i,connect:i.mutate,connectAsync:i.mutateAsync,connectors:ife({config:e})}}function sfe(n={}){const e=Fu(n);return D.useSyncExternalStore(r=>ahe(e,{onChange:r}),()=>$D(e),()=>$D(e))}function JX(n={}){const e=Fu(n),r=jhe(e),i=TR({...n.mutation,...r});return{...i,connectors:sfe({config:e}).map(s=>s.connector),disconnect:i.mutate,disconnectAsync:i.mutateAsync}}function RR(n={}){const e=Fu(n),r=Lhe(e),i=TR({...n.mutation,...r});return{...i,mutate:i.mutate,mutateAsync:i.mutateAsync,signTypedData:i.mutate,signTypedDataAsync:i.mutateAsync}}class Cw{constructor(e,r=3,i=3e4){Te(this,"baseURL");Te(this,"timeout");Te(this,"maxRetries");this.baseURL=e.replace(/\/$/,""),this.maxRetries=r,this.timeout=i}async do(e){const r=Date.now();let i=null;for(let s=1;s<=this.maxRetries;s++)try{return{...await this.doRequest(e),duration:Date.now()-r}}catch(o){if(i=o,this.isNonceError(o))throw o;if(s<this.maxRetries){const a=s*1e3;await this.delay(a)}}throw new Error(`Request failed after ${this.maxRetries} attempts: ${i==null?void 0:i.message}`)}async doRequest(e){const r=`${this.baseURL}${e.path}`,i={"Content-Type":"application/json",Accept:"application/json, */*",...e.headers},s={method:e.method,headers:i,signal:AbortSignal.timeout(this.timeout)};e.body&&e.method!=="GET"?s.body=JSON.stringify(e.body):e.method==="GET"&&(s.body=void 0);const o=await fetch(r,s);let a;const l=o.headers.get("content-type");if(l!=null&&l.includes("application/json"))try{a=await o.json()}catch{a=await o.text()}else a=await o.text();if(o.status>=400)throw new Error(`HTTP ${o.status}: ${JSON.stringify(a)}`);return{statusCode:o.status,body:a,headers:o.headers}}isNonceError(e){const r=(e==null?void 0:e.message)||"";return r.toLowerCase().includes("nonce")||r.includes("InvalidNonce")||r.includes("NonceError")}delay(e){return new Promise(r=>setTimeout(r,e))}async get(e,r){return this.do({method:"GET",path:e,headers:r})}async post(e,r,i){return this.do({method:"POST",path:e,body:r,headers:i})}async put(e,r,i){return this.do({method:"PUT",path:e,body:r,headers:i})}async delete(e,r){return this.do({method:"DELETE",path:e,headers:r})}getBaseURL(){return this.baseURL}setTimeout(e){this.timeout=e}getTimeout(){return this.timeout}}const tu=1e8;function Ht(n){const e=typeof n=="string"?parseFloat(n):n;if(isNaN(e))throw new Error(`Invalid value for satoshi conversion: ${n}`);if(e<0)throw new Error(`Negative values not allowed for satoshi conversion: ${n}`);return BigInt(Math.floor(e*tu)).toString()}function it(n){const e=BigInt(n);return Number(e)/tu}function AR(n){if(n<0)throw new Error(`Negative values not allowed: ${n}`);return Math.floor(n*tu)}function UD(n){try{return BigInt(n)>=0n}catch{return!1}}function ZX(n){return n.map(Ht)}function eQ(n){return n.map(it)}function H4(n){return`0x${(typeof n=="string"?parseInt(n,10):n).toString(16)}`}function jt(n){if(n==null||n==="")return 0;if(typeof n=="string"||typeof n=="number")try{return it(n)}catch{return 0}return 0}function V4(n){if(n==null||n==="")return 0;try{if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?0:e}return typeof n=="number"?isNaN(n)?0:n:0}catch{return 0}}function Jy(n){if(n==null||n==="")return BigInt(0);try{const e=typeof n=="string"?n:String(n);return e.trim()===""||isNaN(Number(e))?BigInt(0):BigInt(e)}catch{return BigInt(0)}}let hp={instance:null,module:null},ofe=null;async function tQ(){try{if(window.Go)console.log("wasm_exec.js already loaded");else{console.log("Loading wasm_exec.js...");const l=["/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.21.0/misc/wasm/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.20.0/misc/wasm/wasm_exec.js","https://unpkg.com/@go-wasm/wasm_exec@latest/wasm_exec.js"];let c=!1,u=null;for(const h of l)try{console.log(`Trying to load wasm_exec.js from: ${h}`),await new Promise((d,f)=>{const p=document.createElement("script");p.src=h,p.async=!0,p.onload=()=>{console.log(`Successfully loaded wasm_exec.js from: ${h}`),d()},p.onerror=()=>{f(new Error(`Failed to load from ${h}`))},document.head.appendChild(p)}),c=!0;break}catch(d){console.warn(`Failed to load from ${h}:`,d==null?void 0:d.message),u=d,document.head.querySelectorAll(`script[src="${h}"]`).forEach(p=>p.remove())}if(!c)throw new Error(`Failed to load wasm_exec.js from all sources. Last error: ${(u==null?void 0:u.message)||"Unknown error"}. Please ensure wasm_exec.js is available. You can download it from: https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.js`);console.log("wasm_exec.js loaded successfully")}const n=window.Go;if(!n)throw new Error("Go runtime not available. Make sure wasm_exec.js is loaded.");console.log("Go runtime available");const e=new n;ofe=e,console.log("Go instance created");const r="/morm_signer.wasm";console.log("Loading WASM from:",r);let i;try{const l=await fetch(r);if(console.log("WASM fetch response:",{status:l.status,statusText:l.statusText,ok:l.ok,url:l.url}),!l.ok){const c=await l.text().catch(()=>"Unable to read error response");throw new Error(`Failed to load WASM from ${r}: ${l.status} ${l.statusText}. Make sure the morm_signer.wasm file is available in the public directory.`)}i=await l.arrayBuffer(),console.log("WASM file loaded successfully, size:",i.byteLength,"bytes")}catch(l){throw console.error("WASM fetch failed:",l),new Error(`Failed to fetch WASM file: ${(l==null?void 0:l.message)||l}. The file should be accessible at ${window.location.origin}${r}`)}console.log("Instantiating WASM module...");let s;try{s=await WebAssembly.instantiate(i,e.importObject),console.log("WASM module instantiated successfully")}catch(l){throw console.error("Failed to instantiate WASM:",l),new Error(`Failed to instantiate WASM module: ${(l==null?void 0:l.message)||l}. The WASM file may be corrupted or incompatible.`)}hp.instance=s.instance,hp.module=s.module,console.log("Running Go program..."),console.log("Window object before Go run:",Object.keys(window).filter(l=>typeof window[l]=="function"&&(l.startsWith("morm")||l.startsWith("derive")||l.startsWith("generate")||l==="Go")));try{e.run(hp.instance),console.log("Go program started (run() completed)")}catch(l){throw console.error("Failed to run Go program:",l),new Error(`Failed to run Go program: ${(l==null?void 0:l.message)||l}. The WASM module may not be compatible with the current Go runtime.`)}console.log("Waiting for Go initialization and function exports...");const o=10;let a=[];for(let l=1;l<=o;l++){const c=Math.min(l*200,2e3);await new Promise(h=>setTimeout(h,c));const u=Object.keys(window).filter(h=>typeof window[h]=="function");if(a=u.filter(h=>h.startsWith("morm")||h.startsWith("derive")||h.startsWith("generate")||h.startsWith("Generate")||h.startsWith("verify")||h.startsWith("map")||h.startsWith("validate")||h==="GetSupportedSignatureTypes"||h==="IsSignatureTypeSupported"),console.log(`Attempt ${l}/${o}:`,{waitTime:`${c}ms`,allWindowFunctions:u.length,exportedFunctions:a,sampleWindowKeys:u.slice(0,20)}),a.length>0){console.log(" Go functions found!",a);break}l===o&&(console.warn(" No expected functions found. All window functions:",u.sort()),console.warn(" Check if functions are exported with different names or if there are Go runtime errors"))}if(a.length===0){const l=[],c=Object.keys(window);if(console.error("Debugging info:",{totalWindowKeys:c.length,allFunctions:c.filter(u=>typeof window[u]=="function"),hasGo:typeof window.Go=="function",wasmInstance:hp.instance!==null,wasmModule:hp.module!==null}),typeof window.InitWASMSigner=="function"){console.log("Found InitWASMSigner function, calling it...");try{window.InitWASMSigner(),await new Promise(h=>setTimeout(h,500));const u=Object.keys(window).filter(h=>typeof window[h]=="function"&&(h.startsWith("morm")||h.startsWith("derive")||h.startsWith("generate")||h.startsWith("Generate")||h==="GetSupportedSignatureTypes"||h==="IsSignatureTypeSupported"));u.length>0&&(console.log(" Functions found after InitWASMSigner!",u),a=u)}catch(u){console.error("Failed to call InitWASMSigner:",u)}}if(a.length===0)throw new Error(`Go functions not exported after initialization.

ROOT CAUSE: The Go main() function in main_wasm.go does not call InitWASMSigner(), which is required to export functions via js.Global().Set().

SOLUTION: The Go code needs to be fixed. In main_wasm.go, the main() function should call:
  InitWASMSigner(CreateTestnetDomain()) // or appropriate domain

Current status:
- WASM file loaded: 
- Go runtime loaded: ${typeof window.Go=="function"?"":""}
- Go program run: 
- Functions exported: 

Check the browser console for detailed debugging information.`)}return console.log("WASM module loaded and initialized successfully"),!0}catch(n){throw console.error("Failed to load WASM module:",n),new Error((n==null?void 0:n.message)||`Failed to load WASM module: ${String(n)}`)}}class afe{constructor(){Te(this,"isInitialized",!1);Te(this,"wasmLoaded",!1)}async initialize(){try{return this.wasmLoaded=await tQ(),this.isInitialized=this.wasmLoaded,this.wasmLoaded}catch(e){throw console.error("Failed to initialize MormSigner:",e),new Error((e==null?void 0:e.message)||"Failed to initialize WASM module")}}isReady(){return this.isInitialized&&this.wasmLoaded&&typeof window.mormGenerateEthereumKeypair=="function"&&typeof window.GenerateSingleSignature=="function"&&typeof window.GenerateMultisignSignatures=="function"&&typeof window.GetSupportedSignatureTypes=="function"&&typeof window.IsSignatureTypeSupported=="function"}async generateAddress(e,r=0){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const i=window.deriveAddress(e,r);return typeof i=="string"?{success:!0,address:i,index:r,mnemonic:e.substring(0,20)+"..."}:i&&i.error?{success:!1,error:i.error}:{success:!1,error:"Failed to derive address"}}catch(i){return console.error("Failed to generate address:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async generateMnemonic(e=12){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.generateMnemonic(e);return typeof r=="string"?{success:!0,mnemonic:r}:r&&r.error?{success:!1,error:r.error}:{success:!1,error:"Failed to generate mnemonic"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async generateKeypair(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const e=window.mormGenerateEthereumKeypair();return e.error?{success:!1,error:e.error}:{success:!0,privateKey:e.privateKey,address:e.address}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async signMessage(e,r,i={}){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=(i.useEIP712,"ECDSA_LEGACY"),o=window.generateSignature(s,e,r);return typeof o=="string"?{success:!0,signature:o,message:r,options:i}:o&&o.error?{success:!1,error:o.error}:{success:!1,error:"Failed to generate signature"}}catch(s){return console.error("Failed to sign message:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async signDeposit(e,r,i,s={}){const o={...s,depositMode:!0,walletAddress:r,amount:i},a=JSON.stringify({action:"deposit",owner:r,amount:i,nonce:s.nonce||Date.now(),deadline:s.deadline||Date.now()+36e5}),l=await this.signMessage(e,a,o);return{success:l.success,signature:l.signature,message:l.message,address:r,options:l.options,error:l.error}}async signEIP712(e,r,i={}){const s={...i,useEIP712:!0};return this.signMessage(e,r,s)}async prepareAgentSign(e){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.mormPrepareAgentSign(e.owner,e.agent,e.expiresInDays,e.permissions,e.nonce);return r&&r.error?{success:!1,error:r.error}:{success:!0,typedData:r}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async signAgentApproval(e,r){const i=await this.prepareAgentSign(r);if(!i.success||!i.typedData)return i;const s=JSON.stringify({action:"agent::approve",wallet:r.owner,agent:r.agent,agentName:r.agentName||"",expiresInDays:r.expiresInDays,permissions:r.permissions,nonce:r.nonce,deadline:Date.now()+r.expiresInDays*24*60*60*1e3}),o=await this.signMessage(e,s,{useEIP712:!0});return o.success?{success:!0,typedData:i.typedData,signature:o.signature}:{success:!1,error:o.error}}async verifySignature(e,r,i){if(!this.isReady())throw new Error("MormSigner not initialized");try{const s=window.verifySignature(e,r,i);return typeof s=="boolean"?s:!1}catch(s){return console.error("Failed to verify signature:",s),!1}}mapAlgorithm(e){if(!this.isReady())return"ECDSA_LEGACY";try{return window.mapAlgorithm(e)}catch(r){return console.error("Failed to map algorithm:",r),"ECDSA_LEGACY"}}validateNonce(e,r){if(!this.isReady())return!1;try{return window.validateNonce(e,r)}catch(i){return console.error("Failed to validate nonce:",i),!1}}getStatus(){return{initialized:this.isInitialized,wasmLoaded:this.wasmLoaded,ready:this.isReady()}}async generateSingleSignature(e,r,i){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=window.GenerateSingleSignature(e,r,i);return s.error?{success:!1,error:s.error}:{success:!0,signature:s.signature}}catch(s){return console.error("Failed to generate single signature:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async generateMultisignSignatures(e,r,i=!1){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=window.GenerateMultisignSignatures(e,r,i);if(s.error)return{success:!1,error:s.error};let o=null;if(s.tx)try{o=JSON.parse(s.tx)}catch(a){console.warn("Failed to parse updated transaction JSON:",a)}return{success:!0,tx:o,txJSON:s.tx}}catch(s){return console.error("Failed to generate multisign signatures:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}getSupportedSignatureTypes(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{return{success:!0,types:window.GetSupportedSignatureTypes()}}catch(e){return console.error("Failed to get supported signature types:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}isSignatureTypeSupported(e){if(!this.isReady())return!1;try{return window.IsSignatureTypeSupported(e)}catch(r){return console.error("Failed to check signature type support:",r),!1}}}const vt=new afe,lfe=6e4,Y4=100,q_=24*60*60*1e3,W_=1;class NR{constructor(e){Te(this,"infoClient");Te(this,"onChainState",new Map);Te(this,"offChainNonces",new Map);Te(this,"syncTimers",new Map);this.infoClient=e}getOrCreateState(e){const r=e.toLowerCase();let i=this.onChainState.get(r);return i||(i={confirmed:0,pending:[],lastSync:0,mu:!1},this.onChainState.set(r,i)),i}async acquireLock(e){for(;e.mu;)await new Promise(r=>setTimeout(r,10));e.mu=!0}releaseLock(e){e.mu=!1}async syncWithCore(e){const r=this.getOrCreateState(e),i=Date.now();if(!(i-r.lastSync<lfe))try{const s=await this.infoClient.getNonceStatus(e,!1),o=(s==null?void 0:s.next_nonce)!==void 0?typeof s.next_nonce=="string"?parseInt(s.next_nonce,10):s.next_nonce:0;r.confirmed=o,r.lastSync=i}catch(s){console.warn(`[NonceManager] Failed to sync with core for ${e}:`,s)}}async getNonce(e,r="latest"){const i=e.toLowerCase(),s=this.getOrCreateState(i);if(await this.syncWithCore(i),r==="latest")return s.confirmed;{const o=s.pending.length>0?Math.max(...s.pending):s.confirmed;return Math.max(s.confirmed,o)}}async validateNonce(e,r,i=!1){const s=e.toLowerCase(),o=this.getOrCreateState(s);await this.acquireLock(o);try{if(i||await this.syncWithCore(s),o.confirmed===0&&r<W_)throw new Error(`nonce too low for new account: got ${r}, minimum ${W_}`);if(o.confirmed>0&&r<=o.confirmed)throw new Error(`nonce too low: got ${r}, confirmed ${o.confirmed}`);if(o.pending.includes(r))throw new Error(`nonce already pending: ${r}`);if(o.pending.length>=Y4)throw new Error(`pending nonce limit reached: max ${Y4} pending nonces`);if(i){const a=this.offChainNonces.get(s);if(a){const l=a.get(r);if(l){const c=Date.now();if(c-l<q_)throw new Error(`nonce already used (off-chain): ${r}, expires in ${Math.floor((q_-(c-l))/1e3)}s`);a.delete(r)}}}o.pending.push(r),o.pending.sort((a,l)=>a-l)}finally{this.releaseLock(o)}}async commitNonce(e,r,i=!1){const s=e.toLowerCase(),o=this.getOrCreateState(s);await this.acquireLock(o);try{const a=o.pending.indexOf(r);if(a!==-1&&o.pending.splice(a,1),i){let l=this.offChainNonces.get(s);l||(l=new Map,this.offChainNonces.set(s,l)),l.set(r,Date.now())}else if(r===o.confirmed+1)for(o.confirmed=r;o.pending.length>0&&o.pending[0]===o.confirmed+1;){const l=o.pending.shift();o.confirmed=l}}finally{this.releaseLock(o)}}async rejectNonce(e,r,i=!1){const s=e.toLowerCase(),o=this.getOrCreateState(s);await this.acquireLock(o);try{const a=o.pending.indexOf(r);if(a!==-1&&o.pending.splice(a,1),i){const l=this.offChainNonces.get(s);l&&l.delete(r)}}finally{this.releaseLock(o)}}async getExpectedNextNonce(e,r=!1){const i=e.toLowerCase();await this.syncWithCore(i);const s=this.getOrCreateState(i),o=s.pending.length>0?Math.max(...s.pending):s.confirmed,a=Math.max(s.confirmed+1,o+1),l=a===0?W_:a;if(r)try{await this.validateNonce(i,l,!1)}catch(c){console.warn(`[NonceManager] Failed to reserve nonce ${l}:`,c.message)}return{next_nonce:l,reserved:r,timestamp:Date.now()}}cleanupExpiredOffChainNonces(){const e=Date.now();for(const[r,i]of this.offChainNonces.entries()){for(const[s,o]of i.entries())e-o>=q_&&i.delete(s);i.size===0&&this.offChainNonces.delete(r)}}resetNonce(e){const r=e.toLowerCase();this.onChainState.delete(r),this.offChainNonces.delete(r);const i=this.syncTimers.get(r);i&&(clearInterval(i),this.syncTimers.delete(r))}getState(e){const r=e.toLowerCase();return this.onChainState.get(r)}}class ar{constructor(e){Te(this,"httpClient");Te(this,"sessionToken");this.httpClient=new Cw(e.baseURL),this.sessionToken=e.sessionToken}setSessionToken(e){this.sessionToken=e}getHeaders(){const e={Accept:"application/json, */*"};return this.sessionToken&&(e.Authorization=`Bearer ${this.sessionToken}`),e}async getMarkets(){const r=(await this.httpClient.get("/market/v1/all",this.getHeaders())).body;return Array.isArray(r)?r:r&&typeof r=="object"&&"markets"in r?r.markets:[]}async getMarketsWithFilters(e,r){let i="/market/v1/all";const s=[];e&&s.push(`filter=${e}`),r&&s.push("active_only=true"),s.length>0&&(i+="?"+s.join("&"));const a=(await this.httpClient.get(i,this.getHeaders())).body;return Array.isArray(a)?a:a&&typeof a=="object"&&"markets"in a?a.markets:[]}async getMarketByID(e){return(await this.httpClient.get(`/market/v1/market/${e}`,this.getHeaders())).body}async getMarketByMoniker(e){return(await this.httpClient.get(`/market/v1/market/by-moniker/${e}`,this.getHeaders())).body}async getMarketStats(e){return(await this.httpClient.get(`/market/v1/market/${e}/stats`,this.getHeaders())).body}async getTicker(e){return this.getMarketStats(e)}async getExchangeInfo(){return(await this.httpClient.get("/market/v1/exchangeInfo",this.getHeaders())).body}async getOrderbook(e,r=!0,i=20){let s=`/clob/v1/orderbook/${e}`,o=20;i>0&&i<100&&(o=i),s+=`?depth=${o}`;const l=(await this.httpClient.get(s,this.getHeaders())).body;return r&&l&&(l.bids&&Array.isArray(l.bids)&&(l.bids=l.bids.map(([c,u])=>[it(c),it(u)])),l.asks&&Array.isArray(l.asks)&&(l.asks=l.asks.map(([c,u])=>[it(c),it(u)]))),l}async getMarketTrades(e,r){let i=`/clob/v1/trades?market_id=${e}`;r&&r>0&&(i+=`&limit=${r}`);const s=await this.httpClient.get(i,this.getHeaders());console.debug("[InfoClient] getMarketTrades response for marketId:",e,"response:",s.body);const o=s.body;return o&&typeof o=="object"&&"trades"in o&&Array.isArray(o.trades)?o.trades:Array.isArray(o)?o:o!=null&&o.data&&Array.isArray(o.data)?o.data:(console.warn("[InfoClient] getMarketTrades: Unexpected response structure:",s.body),[])}async getRecentTrades(e,r=100){return this.getMarketTrades(e,r)}async getTrades(e,r){let i=`/clob/v1/trades?symbol=${e}`;r&&r>0&&(i+=`&limit=${r}`);const o=(await this.httpClient.get(i,this.getHeaders())).body;return o&&typeof o=="object"&&"trades"in o&&Array.isArray(o.trades)?o.trades:Array.isArray(o)?o:o!=null&&o.data&&Array.isArray(o.data)?o.data:[]}async getAggTrades(e,r,i,s){let o=`/market/v1/aggTrades?symbol=${e}`;return r&&r>0&&(o+=`&limit=${r}`),i&&i>0&&(o+=`&startTime=${i}`),s&&s>0&&(o+=`&endTime=${s}`),(await this.httpClient.get(o,this.getHeaders())).body}async getKlines(e,r,i,s,o){let a=`/clob/v1/klines?symbol=${e}&interval=${r}`;i&&i>0&&(a+=`&limit=${i}`),s&&s>0&&(a+=`&startTime=${s}`),o&&o>0&&(a+=`&endTime=${o}`);const c=(await this.httpClient.get(a,this.getHeaders())).body;return Array.isArray(c)?c:[]}async getContinuousKlines(e,r,i,s,o,a){let l=`/market/v1/continuousKlines?pair=${e}&contractType=${r}&interval=${i}`;return s&&s>0&&(l+=`&limit=${s}`),o&&o>0&&(l+=`&startTime=${o}`),a&&a>0&&(l+=`&endTime=${a}`),(await this.httpClient.get(l,this.getHeaders())).body}async getPremiumIndex(e){let r="/market/v1/premiumIndex";e&&(r+=`?symbol=${e}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s),s}async getFundingRate(e,r,i,s){let o="/market/v1/fundingRate";const a=[];e&&a.push(`symbol=${e}`),r&&r>0&&a.push(`limit=${r}`),i&&i>0&&a.push(`startTime=${i}`),s&&s>0&&a.push(`endTime=${s}`),a.length>0&&(o+="?"+a.join("&"));const c=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(c)?c:c&&typeof c=="object"&&"data"in c&&Array.isArray(c.data)?c.data:c?[c]:[]}async getFundingInfo(){const r=(await this.httpClient.get("/market/v1/fundingInfo",this.getHeaders())).body;return Array.isArray(r)?r:[]}async getDeliveryPrice(e){return(await this.httpClient.get(`/market/v1/deliveryPrice?pair=${e}`,this.getHeaders())).body}async getOpenInterest(e){return(await this.httpClient.get(`/market/v1/openInterest?symbol=${e}`,this.getHeaders())).body}async getTopLongShortPositionRatio(e,r,i,s,o){let a=`/market/v1/topLongShortPositionRatio?symbol=${e}&period=${r}`;i&&i>0&&(a+=`&limit=${i}`),s&&s>0&&(a+=`&startTime=${s}`),o&&o>0&&(a+=`&endTime=${o}`);const c=(await this.httpClient.get(a,this.getHeaders())).body;return Array.isArray(c),c}async getGlobalLongShortAccountRatio(e,r,i,s,o){let a=`/market/v1/globalLongShortAccountRatio?symbol=${e}&period=${r}`;i&&i>0&&(a+=`&limit=${i}`),s&&s>0&&(a+=`&startTime=${s}`),o&&o>0&&(a+=`&endTime=${o}`);const c=(await this.httpClient.get(a,this.getHeaders())).body;return Array.isArray(c),c}async getTicker24hr(e){let r="/market/v1/moniker/24hr";e&&(r+=`?symbol=${e}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s),s}async getTickerPrice(e){let r="/market/v1/moniker/price";e&&(r+=`?symbol=${e}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s),s}async getOrderbookMoniker(e){let r="/market/v1/moniker/bookTicker";e&&(r+=`?symbol=${e}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s),s}async getBasis(e,r,i,s,o){let a=`/market/v1/basis?symbol=${e}&period=${r}`;i&&i>0&&(a+=`&limit=${i}`),s&&s>0&&(a+=`&startTime=${s}`),o&&o>0&&(a+=`&endTime=${o}`);const c=(await this.httpClient.get(a,this.getHeaders())).body;return Array.isArray(c),c}async getIndexInfo(e){let r="/market/v1/indexInfo";return e&&(r+=`?symbol=${e}`),(await this.httpClient.get(r,this.getHeaders())).body}async getAssetIndex(e){let r="/market/v1/assetIndex";e&&(r+=`?symbol=${e}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s),s}async getConstituents(e){return(await this.httpClient.get(`/market/v1/constituents?symbol=${e}`,this.getHeaders())).body}async getTWAP(e,r){return(await this.httpClient.get(`/market/v1/twap?symbol=${e}&duration=${r}`,this.getHeaders())).body}async getPositions(e,r){if(!e)throw new Error("walletAddress is required for getPositions");let i=`/bucket/v1/address/${e}/positions`;r!==void 0&&(i+=`?active_only=${r}`);const o=(await this.httpClient.get(i,this.getHeaders())).body;return Array.isArray(o)?o:o&&typeof o=="object"&&"positions"in o&&Array.isArray(o.positions)?o.positions:[]}async getBalance(e,r){let i=`/bank/v1/balance/${e}?asset=${r}`;return(await this.httpClient.get(i,this.getHeaders())).body}async getBalances(e){const i=(await this.httpClient.get(`/bank/v1/balances/${e}`,this.getHeaders())).body;return i&&typeof i=="object"&&"balances"in i&&Array.isArray(i.balances)?i.balances:[]}async getBalanceDecimal(e,r){const i=await this.getBalance(e,r);if(i&&typeof i=="object"){const s={...i};return s.balance&&(s.balance=it(s.balance)),s.available_balance&&(s.available=it(s.available_balance),s.available_balance=it(s.available_balance)),s.available&&typeof s.available=="string"&&(s.available=it(s.available)),s.locked_balance&&(s.locked=it(s.locked_balance),s.locked_balance=it(s.locked_balance)),s.locked&&typeof s.locked=="string"&&(s.locked=it(s.locked)),s}return i}async getOrders(e,r){let i=`/clob/v1/address/orders?address=${encodeURIComponent(e)}`;return r&&(i+=`&asset_pair=${encodeURIComponent(r)}`),(await this.httpClient.get(i,this.getHeaders())).body}async getOrder(e){return(await this.httpClient.get(`/clob/v1/order/${e}`,this.getHeaders())).body}async getOrderHistory(e){return(await this.httpClient.get(`/clob/v1/address/orders/history?address=${e}`,this.getHeaders())).body}async getUserTrades(e,r){let i=`/clob/v1/address/trades?address=${e}`;r&&(i+=`&asset_pair=${r}`);const o=(await this.httpClient.get(i,this.getHeaders())).body;return o&&typeof o=="object"&&"trades"in o&&Array.isArray(o.trades)?o.trades:Array.isArray(o)?o:o!=null&&o.data&&Array.isArray(o.data)?o.data:[]}async getTradeHistory(e,r){return this.getUserTrades(e,r)}async getPosition(e,r){let i=`/clob/v1/address/position?address=${e}`;r&&(i+=`&asset_pair=${r}`);const o=(await this.httpClient.get(i,this.getHeaders())).body;return o&&typeof o=="object"&&"positions"in o&&Array.isArray(o.positions)?o.positions:[]}async getBuckets(e){var i;const r=await this.httpClient.get(`/bucket/v1/address/${e}/buckets`,this.getHeaders());return(i=r.body)!=null&&i.buckets&&Array.isArray(r.body.buckets)?r.body.buckets:[]}async getBucket(e){return(await this.httpClient.get(`/bucket/v1/bucket/${e}`,this.getHeaders())).body}async getMarketData(e){return(await this.httpClient.get(`/clob/v1/market/data?asset_pair=${e}`,this.getHeaders())).body}async getMarketCandles(e,r,i){const o=(await this.httpClient.get(`/clob/v1/market/candles?asset_pair=${e}&interval=${r}&limit=${i}`,this.getHeaders())).body;return Array.isArray(o)?o:[]}async getNonceStatus(e,r=!1){let i=`/router/v1/nonce/status/${e}`;return r&&(i+="?reserve=true"),(await this.httpClient.get(i,this.getHeaders())).body}async getSupportedActions(){return(await this.httpClient.get("/router/v1/tx/supported-actions",this.getHeaders())).body}async validateAction(e){return(await this.httpClient.get(`/router/v1/tx/validate-action?action=${encodeURIComponent(e)}`,this.getHeaders())).body}async getHealthSummary(){return(await this.httpClient.get("/router/v1/health/summary",this.getHeaders())).body}async getHealthDaemons(){return(await this.httpClient.get("/router/v1/health/daemons",this.getHeaders())).body}async getHealthBucket(){return(await this.httpClient.get("/router/v1/health/bucket",this.getHeaders())).body}async getServerTime(){return(await this.httpClient.get("/router/v1/time",this.getHeaders())).body}async getMetricsTPS(){return(await this.httpClient.get("/router/v1/metrics/tps",this.getHeaders())).body}async getMetricsLatency(){return(await this.httpClient.get("/router/v1/metrics/latency",this.getHeaders())).body}}function cfe(n){var l,c,u;if(!n)return!1;const e=String(n).toLowerCase(),r=((l=n==null?void 0:n.message)==null?void 0:l.toLowerCase())||e,i=(n==null?void 0:n.responseBody)||(n==null?void 0:n.onboardResult),s=((c=i==null?void 0:i.error)==null?void 0:c.toLowerCase())||((u=i==null?void 0:i.message)==null?void 0:u.toLowerCase())||"",o=["nonce too low","nonce too high","nonce already used","nonce already pending","nonce invalid","nonce expired","nonce mismatch","invalid nonce","nonce out of order"],a=`${r} ${e} ${s}`.toLowerCase();return o.some(h=>a.includes(h))}function ufe(n){var l,c,u;if(!n)return!1;const e=String(n).toLowerCase(),r=((l=n==null?void 0:n.message)==null?void 0:l.toLowerCase())||e,i=(n==null?void 0:n.responseBody)||(n==null?void 0:n.onboardResult),s=((c=i==null?void 0:i.error)==null?void 0:c.toLowerCase())||((u=i==null?void 0:i.message)==null?void 0:u.toLowerCase())||"",o=["signature verification failed","invalid signature","unauthenticated","signature mismatch","signature invalid"],a=`${r} ${e} ${s}`.toLowerCase();return o.some(h=>a.includes(h))}function dfe(n){if(!n)return[!1,!1];const e=cfe(n),r=ufe(n);return[e,r]}function jR(n){const[e,r]=dfe(n);return e||r}const nQ="6.16.0";async function LR(n){const e=Object.keys(n);return(await Promise.all(e.map(i=>Promise.resolve(n[i])))).reduce((i,s,o)=>(i[e[o]]=s,i),{})}function Li(n,e,r){for(let i in e){let s=e[i];Object.defineProperty(n,i,{enumerable:!0,value:s,writable:!1})}}function jd(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(r=>jd(r,e)).join(", ")+" ]";if(n instanceof Uint8Array){const r="0123456789abcdef";let i="0x";for(let s=0;s<n.length;s++)i+=r[n[s]>>4],i+=r[n[s]&15];return i}if(typeof n=="object"&&typeof n.toJSON=="function")return jd(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const r=Object.keys(n);return r.sort(),"{ "+r.map(i=>`${jd(i,e)}: ${jd(n[i],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function hfe(n,e,r){let i=n;{const o=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${jd(r)}`);for(const a in r){if(a==="shortMessage")continue;const l=r[a];o.push(a+"="+jd(l))}}o.push(`code=${e}`),o.push(`version=${nQ}`),o.length&&(n+=" ("+o.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(n);break;default:s=new Error(n)}return Li(s,{code:e}),r&&Object.assign(s,r),s.shortMessage==null&&Li(s,{shortMessage:i}),s}function $t(n,e,r,i){if(!n)throw hfe(e,r,i)}function ke(n,e,r,i){$t(n,e,"INVALID_ARGUMENT",{argument:r,value:i})}const ffe=["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function rQ(n){$t(ffe.indexOf(n)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:n}})}function Ew(n,e,r){if(r==null&&(r=""),n!==e){let i=r,s="new";r&&(i+=".",s+=" "+r),$t(!1,`private constructor; use ${i}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function iQ(n,e,r){if(n instanceof Uint8Array)return r?new Uint8Array(n):n;if(typeof n=="string"&&n.length%2===0&&n.match(/^0x[0-9a-f]*$/i)){const i=new Uint8Array((n.length-2)/2);let s=2;for(let o=0;o<i.length;o++)i[o]=parseInt(n.substring(s,s+2),16),s+=2;return i}ke(!1,"invalid BytesLike value",e||"value",n)}function st(n,e){return iQ(n,e,!1)}function wd(n,e){return iQ(n,e,!0)}function Do(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function Tw(n){return Do(n,!0)||n instanceof Uint8Array}const G4="0123456789abcdef";function Ze(n){const e=st(n);let r="0x";for(let i=0;i<e.length;i++){const s=e[i];r+=G4[(s&240)>>4]+G4[s&15]}return r}function Vn(n){return"0x"+n.map(e=>Ze(e).substring(2)).join("")}function xm(n){return Do(n,!0)?(n.length-2)/2:st(n).length}function FR(n,e,r){const i=st(n);return r>i.length&&$t(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:i,length:i.length,offset:r}),Ze(i.slice(e,r))}function pfe(n,e,r){const i=st(n);$t(e>=i.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(i),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),s.set(i,e-i.length),Ze(s)}function Hl(n,e){return pfe(n,e)}const Pw=BigInt(0),Pc=BigInt(1),Ld=9007199254740991;function mfe(n,e){let r=cn(n,"value");const i=BigInt(Fi(e,"width")),s=Pc<<i-Pc;if(r<Pw){r=-r,$t(r<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const o=(Pc<<i)-Pc;return(~r&o)+Pc}else $t(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return r}function gfe(n,e){const r=$R(n,"value"),i=BigInt(Fi(e,"bits"));return r&(Pc<<i)-Pc}function cn(n,e){switch(typeof n){case"bigint":return n;case"number":return ke(Number.isInteger(n),"underflow",e||"value",n),ke(n>=-Ld&&n<=Ld,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(r){ke(!1,`invalid BigNumberish string: ${r.message}`,e||"value",n)}}ke(!1,"invalid BigNumberish value",e||"value",n)}function $R(n,e){const r=cn(n,e);return $t(r>=Pw,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),r}const K4="0123456789abcdef";function sQ(n){if(n instanceof Uint8Array){let e="0x0";for(const r of n)e+=K4[r>>4],e+=K4[r&15];return BigInt(e)}return cn(n)}function Fi(n,e){switch(typeof n){case"bigint":return ke(n>=-Ld&&n<=Ld,"overflow",e||"value",n),Number(n);case"number":return ke(Number.isInteger(n),"underflow",e||"value",n),ke(n>=-Ld&&n<=Ld,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return Fi(BigInt(n),e)}catch(r){ke(!1,`invalid numeric string: ${r.message}`,e||"value",n)}}ke(!1,"invalid numeric value",e||"value",n)}function Vh(n,e){const r=$R(n,"value");let i=r.toString(16);{const s=Fi(e,"width");if(s===0&&r===Pw)return"0x";for($t(s*2>=i.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});i.length<s*2;)i="0"+i}return"0x"+i}function Wn(n,e){const r=$R(n,"value");if(r===Pw)return new Uint8Array(0);let i=r.toString(16);i.length%2&&(i="0"+i);const s=new Uint8Array(i.length/2);for(let o=0;o<s.length;o++){const a=o*2;s[o]=parseInt(i.substring(a,a+2),16)}return s}function vfe(n){let e=Ze(Tw(n)?n:Wn(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Zy="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let Fv=null;function bfe(n){if(Fv==null){Fv={};for(let r=0;r<Zy.length;r++)Fv[Zy[r]]=BigInt(r)}const e=Fv[n];return ke(e!=null,"invalid base58 value","letter",n),e}const yfe=BigInt(0),qD=BigInt(58);function xfe(n){const e=st(n);let r=sQ(e),i="";for(;r;)i=Zy[Number(r%qD)]+i,r/=qD;for(let s=0;s<e.length&&!e[s];s++)i=Zy[0]+i;return i}function wfe(n){let e=yfe;for(let r=0;r<n.length;r++)e*=qD,e+=bfe(n[r]);return e}function nu(n,e){ke(typeof n=="string","invalid string value","str",n),e!=null&&(rQ(e),n=n.normalize(e));let r=[];for(let i=0;i<n.length;i++){const s=n.charCodeAt(i);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(s&63|128);else if((s&64512)==55296){i++;const o=n.charCodeAt(i);ke(i<n.length&&(o&64512)===56320,"invalid surrogate pair","str",n);const a=65536+((s&1023)<<10)+(o&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128)}return new Uint8Array(r)}function _fe(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function X4(n,e,r){let i=0;for(let s=0;s<r;s++)i=i*256+n[e+s];return i}function Q4(n,e,r,i){const s=[];for(;r<e+1+i;){const o=oQ(n,r);s.push(o.result),r+=o.consumed,$t(r<=e+1+i,"child data too short","BUFFER_OVERRUN",{buffer:n,length:i,offset:e})}return{consumed:1+i,result:s}}function oQ(n,e){$t(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const r=i=>{$t(i<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:i})};if(n[e]>=248){const i=n[e]-247;r(e+1+i);const s=X4(n,e+1,i);return r(e+1+i+s),Q4(n,e,e+1+i,i+s)}else if(n[e]>=192){const i=n[e]-192;return r(e+1+i),Q4(n,e,e+1,i)}else if(n[e]>=184){const i=n[e]-183;r(e+1+i);const s=X4(n,e+1,i);r(e+1+i+s);const o=Ze(n.slice(e+1+i,e+1+i+s));return{consumed:1+i+s,result:o}}else if(n[e]>=128){const i=n[e]-128;r(e+1+i);const s=Ze(n.slice(e+1,e+1+i));return{consumed:1+i,result:s}}return{consumed:1,result:_fe(n[e])}}function d0(n){const e=st(n,"data"),r=oQ(e,0);return ke(r.consumed===e.length,"unexpected junk after rlp payload","data",n),r.result}function J4(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function aQ(n){if(Array.isArray(n)){let i=[];if(n.forEach(function(o){i=i.concat(aQ(o))}),i.length<=55)return i.unshift(192+i.length),i;const s=J4(i.length);return s.unshift(247+s.length),s.concat(i)}const e=Array.prototype.slice.call(st(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=J4(e.length);return r.unshift(183+r.length),r.concat(e)}const Z4="0123456789abcdef";function xa(n){let e="0x";for(const r of aQ(n))e+=Z4[r>>4],e+=Z4[r&15];return e}function Sfe(n){const e=st(n,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=Ze(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}function Oi(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function zR(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function lQ(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Oi(n.outputLen),Oi(n.blockLen)}function Yh(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function cQ(n,e){zR(n);const r=e.outputLen;if(n.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const H_=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uQ=n=>n instanceof Uint8Array,Jb=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Zb=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ro=(n,e)=>n<<32-e|n>>>e,kfe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!kfe)throw new Error("Non little-endian hardware is not supported");const Cfe=async()=>{};async function ej(n,e,r){let i=Date.now();for(let s=0;s<n;s++){r(s);const o=Date.now()-i;o>=0&&o<e||(await Cfe(),i+=o)}}function Efe(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Gh(n){if(typeof n=="string"&&(n=Efe(n)),!uQ(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function Tfe(...n){const e=new Uint8Array(n.reduce((i,s)=>i+s.length,0));let r=0;return n.forEach(i=>{if(!uQ(i))throw new Error("Uint8Array expected");e.set(i,r),r+=i.length}),e}class BR{clone(){return this._cloneInto()}}const Pfe={}.toString;function dQ(n,e){if(e!==void 0&&Pfe.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,e)}function Mw(n){const e=i=>n().update(Gh(i)).digest(),r=n();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>n(),e}function Mfe(n=32){if(H_&&typeof H_.getRandomValues=="function")return H_.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class hQ extends BR{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,lQ(e);const i=Gh(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(i.length>s?e.create().update(i).digest():i);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=e.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(e){return Yh(this),this.iHash.update(e),this}digestInto(e){Yh(this),zR(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:i,finished:s,destroyed:o,blockLen:a,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=a,e.outputLen=l,e.oHash=r._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Dw=(n,e,r)=>new hQ(n,e).update(r).digest();Dw.create=(n,e)=>new hQ(n,e);function Dfe(n,e,r,i){lQ(n);const s=dQ({dkLen:32,asyncTick:10},i),{c:o,dkLen:a,asyncTick:l}=s;if(Oi(o),Oi(a),Oi(l),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Gh(e),u=Gh(r),h=new Uint8Array(a),d=Dw.create(n,c),f=d._cloneInto().update(u);return{c:o,dkLen:a,asyncTick:l,DK:h,PRF:d,PRFSalt:f}}function Ofe(n,e,r,i,s){return n.destroy(),e.destroy(),i&&i.destroy(),s.fill(0),r}function UR(n,e,r,i){const{c:s,dkLen:o,DK:a,PRF:l,PRFSalt:c}=Dfe(n,e,r,i);let u;const h=new Uint8Array(4),d=Zb(h),f=new Uint8Array(l.outputLen);for(let p=1,g=0;g<o;p++,g+=l.outputLen){const b=a.subarray(g,g+l.outputLen);d.setInt32(0,p,!1),(u=c._cloneInto(u)).update(h).digestInto(f),b.set(f.subarray(0,b.length));for(let y=1;y<s;y++){l._cloneInto(u).update(f).digestInto(f);for(let v=0;v<b.length;v++)b[v]^=f[v]}}return Ofe(l,c,a,u,f)}function Ife(n,e,r,i){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,r,i);const s=BigInt(32),o=BigInt(4294967295),a=Number(r>>s&o),l=Number(r&o),c=i?4:0,u=i?0:4;n.setUint32(e+c,a,i),n.setUint32(e+u,l,i)}class qR extends BR{constructor(e,r,i,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Zb(this.buffer)}update(e){Yh(this);const{view:r,buffer:i,blockLen:s}=this;e=Gh(e);const o=e.length;for(let a=0;a<o;){const l=Math.min(s-this.pos,o-a);if(l===s){const c=Zb(e);for(;s<=o-a;a+=s)this.process(c,a);continue}i.set(e.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Yh(this),cQ(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:s,isLE:o}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(i,0),a=0);for(let d=a;d<s;d++)r[d]=0;Ife(i,s-8,BigInt(this.length*8),o),this.process(i,0);const l=Zb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)l.setUint32(4*d,h[d],o)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:s,finished:o,destroyed:a,pos:l}=this;return e.length=s,e.pos=l,e.finished=o,e.destroyed=a,s%r&&e.buffer.set(i),e}}const Rfe=(n,e,r)=>n&e^~n&r,Afe=(n,e,r)=>n&e^n&r^e&r,Nfe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ha=new Uint32Array(64);class jfe extends qR{constructor(){super(64,32,8,!1),this.A=Wa[0]|0,this.B=Wa[1]|0,this.C=Wa[2]|0,this.D=Wa[3]|0,this.E=Wa[4]|0,this.F=Wa[5]|0,this.G=Wa[6]|0,this.H=Wa[7]|0}get(){const{A:e,B:r,C:i,D:s,E:o,F:a,G:l,H:c}=this;return[e,r,i,s,o,a,l,c]}set(e,r,i,s,o,a,l,c){this.A=e|0,this.B=r|0,this.C=i|0,this.D=s|0,this.E=o|0,this.F=a|0,this.G=l|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Ha[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=Ha[d-15],p=Ha[d-2],g=ro(f,7)^ro(f,18)^f>>>3,b=ro(p,17)^ro(p,19)^p>>>10;Ha[d]=b+Ha[d-7]+g+Ha[d-16]|0}let{A:i,B:s,C:o,D:a,E:l,F:c,G:u,H:h}=this;for(let d=0;d<64;d++){const f=ro(l,6)^ro(l,11)^ro(l,25),p=h+f+Rfe(l,c,u)+Nfe[d]+Ha[d]|0,b=(ro(i,2)^ro(i,13)^ro(i,22))+Afe(i,s,o)|0;h=u,u=c,c=l,l=a+p|0,a=o,o=s,s=i,i=p+b|0}i=i+this.A|0,s=s+this.B|0,o=o+this.C|0,a=a+this.D|0,l=l+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(i,s,o,a,l,c,u,h)}roundClean(){Ha.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const kf=Mw(()=>new jfe),$v=BigInt(2**32-1),WD=BigInt(32);function fQ(n,e=!1){return e?{h:Number(n&$v),l:Number(n>>WD&$v)}:{h:Number(n>>WD&$v)|0,l:Number(n&$v)|0}}function pQ(n,e=!1){let r=new Uint32Array(n.length),i=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:o,l:a}=fQ(n[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const Lfe=(n,e)=>BigInt(n>>>0)<<WD|BigInt(e>>>0),Ffe=(n,e,r)=>n>>>r,$fe=(n,e,r)=>n<<32-r|e>>>r,zfe=(n,e,r)=>n>>>r|e<<32-r,Bfe=(n,e,r)=>n<<32-r|e>>>r,Ufe=(n,e,r)=>n<<64-r|e>>>r-32,qfe=(n,e,r)=>n>>>r-32|e<<64-r,Wfe=(n,e)=>e,Hfe=(n,e)=>n,mQ=(n,e,r)=>n<<r|e>>>32-r,gQ=(n,e,r)=>e<<r|n>>>32-r,vQ=(n,e,r)=>e<<r-32|n>>>64-r,bQ=(n,e,r)=>n<<r-32|e>>>64-r;function Vfe(n,e,r,i){const s=(e>>>0)+(i>>>0);return{h:n+r+(s/2**32|0)|0,l:s|0}}const Yfe=(n,e,r)=>(n>>>0)+(e>>>0)+(r>>>0),Gfe=(n,e,r,i)=>e+r+i+(n/2**32|0)|0,Kfe=(n,e,r,i)=>(n>>>0)+(e>>>0)+(r>>>0)+(i>>>0),Xfe=(n,e,r,i,s)=>e+r+i+s+(n/2**32|0)|0,Qfe=(n,e,r,i,s)=>(n>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(s>>>0),Jfe=(n,e,r,i,s,o)=>e+r+i+s+o+(n/2**32|0)|0,kt={fromBig:fQ,split:pQ,toBig:Lfe,shrSH:Ffe,shrSL:$fe,rotrSH:zfe,rotrSL:Bfe,rotrBH:Ufe,rotrBL:qfe,rotr32H:Wfe,rotr32L:Hfe,rotlSH:mQ,rotlSL:gQ,rotlBH:vQ,rotlBL:bQ,add:Vfe,add3L:Yfe,add3H:Gfe,add4L:Kfe,add4H:Xfe,add5H:Jfe,add5L:Qfe},[Zfe,epe]=kt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Va=new Uint32Array(80),Ya=new Uint32Array(80);class tpe extends qR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:i,Bl:s,Ch:o,Cl:a,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:b,Hl:y}=this;return[e,r,i,s,o,a,l,c,u,h,d,f,p,g,b,y]}set(e,r,i,s,o,a,l,c,u,h,d,f,p,g,b,y){this.Ah=e|0,this.Al=r|0,this.Bh=i|0,this.Bl=s|0,this.Ch=o|0,this.Cl=a|0,this.Dh=l|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=b|0,this.Hl=y|0}process(e,r){for(let k=0;k<16;k++,r+=4)Va[k]=e.getUint32(r),Ya[k]=e.getUint32(r+=4);for(let k=16;k<80;k++){const _=Va[k-15]|0,S=Ya[k-15]|0,C=kt.rotrSH(_,S,1)^kt.rotrSH(_,S,8)^kt.shrSH(_,S,7),E=kt.rotrSL(_,S,1)^kt.rotrSL(_,S,8)^kt.shrSL(_,S,7),P=Va[k-2]|0,O=Ya[k-2]|0,M=kt.rotrSH(P,O,19)^kt.rotrBH(P,O,61)^kt.shrSH(P,O,6),R=kt.rotrSL(P,O,19)^kt.rotrBL(P,O,61)^kt.shrSL(P,O,6),j=kt.add4L(E,R,Ya[k-7],Ya[k-16]),B=kt.add4H(j,C,M,Va[k-7],Va[k-16]);Va[k]=B|0,Ya[k]=j|0}let{Ah:i,Al:s,Bh:o,Bl:a,Ch:l,Cl:c,Dh:u,Dl:h,Eh:d,El:f,Fh:p,Fl:g,Gh:b,Gl:y,Hh:v,Hl:w}=this;for(let k=0;k<80;k++){const _=kt.rotrSH(d,f,14)^kt.rotrSH(d,f,18)^kt.rotrBH(d,f,41),S=kt.rotrSL(d,f,14)^kt.rotrSL(d,f,18)^kt.rotrBL(d,f,41),C=d&p^~d&b,E=f&g^~f&y,P=kt.add5L(w,S,E,epe[k],Ya[k]),O=kt.add5H(P,v,_,C,Zfe[k],Va[k]),M=P|0,R=kt.rotrSH(i,s,28)^kt.rotrBH(i,s,34)^kt.rotrBH(i,s,39),j=kt.rotrSL(i,s,28)^kt.rotrBL(i,s,34)^kt.rotrBL(i,s,39),B=i&o^i&l^o&l,L=s&a^s&c^a&c;v=b|0,w=y|0,b=p|0,y=g|0,p=d|0,g=f|0,{h:d,l:f}=kt.add(u|0,h|0,O|0,M|0),u=l|0,h=c|0,l=o|0,c=a|0,o=i|0,a=s|0;const $=kt.add3L(M,j,L);i=kt.add3H($,O,R,B),s=$|0}({h:i,l:s}=kt.add(this.Ah|0,this.Al|0,i|0,s|0)),{h:o,l:a}=kt.add(this.Bh|0,this.Bl|0,o|0,a|0),{h:l,l:c}=kt.add(this.Ch|0,this.Cl|0,l|0,c|0),{h:u,l:h}=kt.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:d,l:f}=kt.add(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:g}=kt.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:b,l:y}=kt.add(this.Gh|0,this.Gl|0,b|0,y|0),{h:v,l:w}=kt.add(this.Hh|0,this.Hl|0,v|0,w|0),this.set(i,s,o,a,l,c,u,h,d,f,p,g,b,y,v,w)}roundClean(){Va.fill(0),Ya.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const WR=Mw(()=>new tpe);function npe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const tj=npe(),nj=tj.crypto||tj.msCrypto;function rpe(n){switch(n){case"sha256":return kf.create();case"sha512":return WR.create()}ke(!1,"invalid hashing algorithm name","algorithm",n)}function ipe(n,e){const r={sha256:kf,sha512:WR}[n];return ke(r!=null,"invalid hmac algorithm","algorithm",n),Dw.create(r,e)}function spe(n,e,r,i,s){const o={sha256:kf,sha512:WR}[s];return ke(o!=null,"invalid pbkdf2 algorithm","algorithm",s),UR(o,n,e,{c:r,dkLen:i})}function ope(n){$t(nj!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),ke(Number.isInteger(n)&&n>0&&n<=1024,"invalid length","length",n);const e=new Uint8Array(n);return nj.getRandomValues(e),e}let yQ=!1;const xQ=function(n,e,r){return ipe(n,e).update(r).digest()};let wQ=xQ;function Cf(n,e,r){const i=st(e,"key"),s=st(r,"data");return Ze(wQ(n,i,s))}Cf._=xQ;Cf.lock=function(){yQ=!0};Cf.register=function(n){if(yQ)throw new Error("computeHmac is locked");wQ=n};Object.freeze(Cf);const[_Q,SQ,kQ]=[[],[],[]],ape=BigInt(0),fp=BigInt(1),lpe=BigInt(2),cpe=BigInt(7),upe=BigInt(256),dpe=BigInt(113);for(let n=0,e=fp,r=1,i=0;n<24;n++){[r,i]=[i,(2*r+3*i)%5],_Q.push(2*(5*i+r)),SQ.push((n+1)*(n+2)/2%64);let s=ape;for(let o=0;o<7;o++)e=(e<<fp^(e>>cpe)*dpe)%upe,e&lpe&&(s^=fp<<(fp<<BigInt(o))-fp);kQ.push(s)}const[hpe,fpe]=pQ(kQ,!0),rj=(n,e,r)=>r>32?vQ(n,e,r):mQ(n,e,r),ij=(n,e,r)=>r>32?bQ(n,e,r):gQ(n,e,r);function ppe(n,e=24){const r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let a=0;a<10;a++)r[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const l=(a+8)%10,c=(a+2)%10,u=r[c],h=r[c+1],d=rj(u,h,1)^r[l],f=ij(u,h,1)^r[l+1];for(let p=0;p<50;p+=10)n[a+p]^=d,n[a+p+1]^=f}let s=n[2],o=n[3];for(let a=0;a<24;a++){const l=SQ[a],c=rj(s,o,l),u=ij(s,o,l),h=_Q[a];s=n[h],o=n[h+1],n[h]=c,n[h+1]=u}for(let a=0;a<50;a+=10){for(let l=0;l<10;l++)r[l]=n[a+l];for(let l=0;l<10;l++)n[a+l]^=~r[(l+2)%10]&r[(l+4)%10]}n[0]^=hpe[i],n[1]^=fpe[i]}r.fill(0)}class HR extends BR{constructor(e,r,i,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=i,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Oi(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Jb(this.state)}keccak(){ppe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Yh(this);const{blockLen:r,state:i}=this;e=Gh(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(r-this.pos,s-o);for(let l=0;l<a;l++)i[this.pos++]^=e[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:i,blockLen:s}=this;e[i]^=r,r&128&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Yh(this,!1),zR(e),this.finish();const r=this.state,{blockLen:i}=this;for(let s=0,o=e.length;s<o;){this.posOut>=i&&this.keccak();const a=Math.min(i-this.posOut,o-s);e.set(r.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Oi(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(cQ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:i,outputLen:s,rounds:o,enableXOF:a}=this;return e||(e=new HR(r,i,s,a,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=i,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const mpe=(n,e,r)=>Mw(()=>new HR(e,n,r)),gpe=mpe(1,136,256/8);let CQ=!1;const EQ=function(n){return gpe(n)};let TQ=EQ;function lr(n){const e=st(n,"data");return Ze(TQ(e))}lr._=EQ;lr.lock=function(){CQ=!0};lr.register=function(n){if(CQ)throw new TypeError("keccak256 is locked");TQ=n};Object.freeze(lr);const vpe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),PQ=Uint8Array.from({length:16},(n,e)=>e),bpe=PQ.map(n=>(9*n+5)%16);let VR=[PQ],YR=[bpe];for(let n=0;n<4;n++)for(let e of[VR,YR])e.push(e[n].map(r=>vpe[r]));const MQ=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(n=>new Uint8Array(n)),ype=VR.map((n,e)=>n.map(r=>MQ[e][r])),xpe=YR.map((n,e)=>n.map(r=>MQ[e][r])),wpe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),_pe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),zv=(n,e)=>n<<e|n>>>32-e;function sj(n,e,r,i){return n===0?e^r^i:n===1?e&r|~e&i:n===2?(e|~r)^i:n===3?e&i|r&~i:e^(r|~i)}const Bv=new Uint32Array(16);class Spe extends qR{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:r,h2:i,h3:s,h4:o}=this;return[e,r,i,s,o]}set(e,r,i,s,o){this.h0=e|0,this.h1=r|0,this.h2=i|0,this.h3=s|0,this.h4=o|0}process(e,r){for(let p=0;p<16;p++,r+=4)Bv[p]=e.getUint32(r,!0);let i=this.h0|0,s=i,o=this.h1|0,a=o,l=this.h2|0,c=l,u=this.h3|0,h=u,d=this.h4|0,f=d;for(let p=0;p<5;p++){const g=4-p,b=wpe[p],y=_pe[p],v=VR[p],w=YR[p],k=ype[p],_=xpe[p];for(let S=0;S<16;S++){const C=zv(i+sj(p,o,l,u)+Bv[v[S]]+b,k[S])+d|0;i=d,d=u,u=zv(l,10)|0,l=o,o=C}for(let S=0;S<16;S++){const C=zv(s+sj(g,a,c,h)+Bv[w[S]]+y,_[S])+f|0;s=f,f=h,h=zv(c,10)|0,c=a,a=C}}this.set(this.h1+l+h|0,this.h2+u+f|0,this.h3+d+s|0,this.h4+i+a|0,this.h0+o+c|0)}roundClean(){Bv.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const kpe=Mw(()=>new Spe);let DQ=!1;const OQ=function(n){return kpe(n)};let IQ=OQ;function Ef(n){const e=st(n,"data");return Ze(IQ(e))}Ef._=OQ;Ef.lock=function(){DQ=!0};Ef.register=function(n){if(DQ)throw new TypeError("ripemd160 is locked");IQ=n};Object.freeze(Ef);let RQ=!1;const AQ=function(n,e,r,i,s){return spe(n,e,r,i,s)};let NQ=AQ;function h0(n,e,r,i,s){const o=st(n,"password"),a=st(e,"salt");return Ze(NQ(o,a,r,i,s))}h0._=AQ;h0.lock=function(){RQ=!0};h0.register=function(n){if(RQ)throw new Error("pbkdf2 is locked");NQ=n};Object.freeze(h0);let jQ=!1;const LQ=function(n){return new Uint8Array(ope(n))};let FQ=LQ;function wa(n){return FQ(n)}wa._=LQ;wa.lock=function(){jQ=!0};wa.register=function(n){if(jQ)throw new Error("randomBytes is locked");FQ=n};Object.freeze(wa);const Wt=(n,e)=>n<<e|n>>>32-e;function oj(n,e,r,i,s,o){let a=n[e++]^r[i++],l=n[e++]^r[i++],c=n[e++]^r[i++],u=n[e++]^r[i++],h=n[e++]^r[i++],d=n[e++]^r[i++],f=n[e++]^r[i++],p=n[e++]^r[i++],g=n[e++]^r[i++],b=n[e++]^r[i++],y=n[e++]^r[i++],v=n[e++]^r[i++],w=n[e++]^r[i++],k=n[e++]^r[i++],_=n[e++]^r[i++],S=n[e++]^r[i++],C=a,E=l,P=c,O=u,M=h,R=d,j=f,B=p,L=g,$=b,z=y,W=v,q=w,V=k,F=_,G=S;for(let H=0;H<8;H+=2)M^=Wt(C+q|0,7),L^=Wt(M+C|0,9),q^=Wt(L+M|0,13),C^=Wt(q+L|0,18),$^=Wt(R+E|0,7),V^=Wt($+R|0,9),E^=Wt(V+$|0,13),R^=Wt(E+V|0,18),F^=Wt(z+j|0,7),P^=Wt(F+z|0,9),j^=Wt(P+F|0,13),z^=Wt(j+P|0,18),O^=Wt(G+W|0,7),B^=Wt(O+G|0,9),W^=Wt(B+O|0,13),G^=Wt(W+B|0,18),E^=Wt(C+O|0,7),P^=Wt(E+C|0,9),O^=Wt(P+E|0,13),C^=Wt(O+P|0,18),j^=Wt(R+M|0,7),B^=Wt(j+R|0,9),M^=Wt(B+j|0,13),R^=Wt(M+B|0,18),W^=Wt(z+$|0,7),L^=Wt(W+z|0,9),$^=Wt(L+W|0,13),z^=Wt($+L|0,18),q^=Wt(G+F|0,7),V^=Wt(q+G|0,9),F^=Wt(V+q|0,13),G^=Wt(F+V|0,18);s[o++]=a+C|0,s[o++]=l+E|0,s[o++]=c+P|0,s[o++]=u+O|0,s[o++]=h+M|0,s[o++]=d+R|0,s[o++]=f+j|0,s[o++]=p+B|0,s[o++]=g+L|0,s[o++]=b+$|0,s[o++]=y+z|0,s[o++]=v+W|0,s[o++]=w+q|0,s[o++]=k+V|0,s[o++]=_+F|0,s[o++]=S+G|0}function Qd(n,e,r,i,s){let o=i+0,a=i+16*s;for(let l=0;l<16;l++)r[a+l]=n[e+(2*s-1)*16+l];for(let l=0;l<s;l++,o+=16,e+=16)oj(r,a,n,e,r,o),l>0&&(a+=16),oj(r,o,n,e+=16,r,a)}function $Q(n,e,r){const i=dQ({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:s,r:o,p:a,dkLen:l,asyncTick:c,maxmem:u,onProgress:h}=i;if(Oi(s),Oi(o),Oi(a),Oi(l),Oi(c),Oi(u),h!==void 0&&typeof h!="function")throw new Error("progressCb should be function");const d=128*o,f=d/4;if(s<=1||s&s-1||s>=2**(d/8)||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(a<0||a>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(l<0||l>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=d*(s+a);if(p>u)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${u} (maxmem)`);const g=UR(kf,n,e,{c:1,dkLen:d*a}),b=Jb(g),y=Jb(new Uint8Array(d*s)),v=Jb(new Uint8Array(d));let w=()=>{};if(h){const k=2*s*a,_=Math.max(Math.floor(k/1e4),1);let S=0;w=()=>{S++,h&&(!(S%_)||S===k)&&h(S/k)}}return{N:s,r:o,p:a,dkLen:l,blockSize32:f,V:y,B32:b,B:g,tmp:v,blockMixCb:w,asyncTick:c}}function zQ(n,e,r,i,s){const o=UR(kf,n,r,{c:1,dkLen:e});return r.fill(0),i.fill(0),s.fill(0),o}function Cpe(n,e,r){const{N:i,r:s,p:o,dkLen:a,blockSize32:l,V:c,B32:u,B:h,tmp:d,blockMixCb:f}=$Q(n,e,r);for(let p=0;p<o;p++){const g=l*p;for(let b=0;b<l;b++)c[b]=u[g+b];for(let b=0,y=0;b<i-1;b++)Qd(c,y,c,y+=l,s),f();Qd(c,(i-1)*l,u,g,s),f();for(let b=0;b<i;b++){const y=u[g+l-16]%i;for(let v=0;v<l;v++)d[v]=u[g+v]^c[y*l+v];Qd(d,0,u,g,s),f()}}return zQ(n,a,h,c,d)}async function Epe(n,e,r){const{N:i,r:s,p:o,dkLen:a,blockSize32:l,V:c,B32:u,B:h,tmp:d,blockMixCb:f,asyncTick:p}=$Q(n,e,r);for(let g=0;g<o;g++){const b=l*g;for(let v=0;v<l;v++)c[v]=u[b+v];let y=0;await ej(i-1,p,()=>{Qd(c,y,c,y+=l,s),f()}),Qd(c,(i-1)*l,u,b,s),f(),await ej(i,p,()=>{const v=u[b+l-16]%i;for(let w=0;w<l;w++)d[w]=u[b+w]^c[v*l+w];Qd(d,0,u,b,s),f()})}return zQ(n,a,h,c,d)}let BQ=!1,UQ=!1;const qQ=async function(n,e,r,i,s,o,a){return await Epe(n,e,{N:r,r:i,p:s,dkLen:o,onProgress:a})},WQ=function(n,e,r,i,s,o){return Cpe(n,e,{N:r,r:i,p:s,dkLen:o})};let HQ=qQ,VQ=WQ;async function f0(n,e,r,i,s,o,a){const l=st(n,"passwd"),c=st(e,"salt");return Ze(await HQ(l,c,r,i,s,o,a))}f0._=qQ;f0.lock=function(){UQ=!0};f0.register=function(n){if(UQ)throw new Error("scrypt is locked");HQ=n};Object.freeze(f0);function p0(n,e,r,i,s,o){const a=st(n,"passwd"),l=st(e,"salt");return Ze(VQ(a,l,r,i,s,o))}p0._=WQ;p0.lock=function(){BQ=!0};p0.register=function(n){if(BQ)throw new Error("scryptSync is locked");VQ=n};Object.freeze(p0);const YQ=function(n){return rpe("sha256").update(n).digest()};let GQ=YQ,KQ=!1;function ws(n){const e=st(n,"data");return Ze(GQ(e))}ws._=YQ;ws.lock=function(){KQ=!0};ws.register=function(n){if(KQ)throw new Error("sha256 is locked");GQ=n};Object.freeze(ws);Object.freeze(ws);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const XQ=BigInt(0),Ow=BigInt(1),Tpe=BigInt(2),Iw=n=>n instanceof Uint8Array,Ppe=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Kh(n){if(!Iw(n))throw new Error("Uint8Array expected");let e="";for(let r=0;r<n.length;r++)e+=Ppe[n[r]];return e}function QQ(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function GR(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Xh(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let i=0;i<r.length;i++){const s=i*2,o=n.slice(s,s+2),a=Number.parseInt(o,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");r[i]=a}return r}function ru(n){return GR(Kh(n))}function KR(n){if(!Iw(n))throw new Error("Uint8Array expected");return GR(Kh(Uint8Array.from(n).reverse()))}function Qh(n,e){return Xh(n.toString(16).padStart(e*2,"0"))}function XR(n,e){return Qh(n,e).reverse()}function Mpe(n){return Xh(QQ(n))}function Is(n,e,r){let i;if(typeof e=="string")try{i=Xh(e)}catch(o){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${o}`)}else if(Iw(e))i=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const s=i.length;if(typeof r=="number"&&s!==r)throw new Error(`${n} expected ${r} bytes, got ${s}`);return i}function Sg(...n){const e=new Uint8Array(n.reduce((i,s)=>i+s.length,0));let r=0;return n.forEach(i=>{if(!Iw(i))throw new Error("Uint8Array expected");e.set(i,r),r+=i.length}),e}function Dpe(n,e){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(n[r]!==e[r])return!1;return!0}function Ope(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Ipe(n){let e;for(e=0;n>XQ;n>>=Ow,e+=1);return e}function Rpe(n,e){return n>>BigInt(e)&Ow}const Ape=(n,e,r)=>n|(r?Ow:XQ)<<BigInt(e),QR=n=>(Tpe<<BigInt(n-1))-Ow,V_=n=>new Uint8Array(n),aj=n=>Uint8Array.from(n);function JQ(n,e,r){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let i=V_(n),s=V_(n),o=0;const a=()=>{i.fill(1),s.fill(0),o=0},l=(...d)=>r(s,i,...d),c=(d=V_())=>{s=l(aj([0]),d),i=l(),d.length!==0&&(s=l(aj([1]),d),i=l())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){i=l();const p=i.slice();f.push(p),d+=i.length}return Sg(...f)};return(d,f)=>{a(),c(d);let p;for(;!(p=f(u()));)c();return a(),p}}const Npe={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function m0(n,e,r={}){const i=(s,o,a)=>{const l=Npe[o];if(typeof l!="function")throw new Error(`Invalid validator "${o}", expected function`);const c=n[s];if(!(a&&c===void 0)&&!l(c,n))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${o}`)};for(const[s,o]of Object.entries(e))i(s,o,!1);for(const[s,o]of Object.entries(r))i(s,o,!0);return n}const jpe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Rpe,bitLen:Ipe,bitMask:QR,bitSet:Ape,bytesToHex:Kh,bytesToNumberBE:ru,bytesToNumberLE:KR,concatBytes:Sg,createHmacDrbg:JQ,ensureBytes:Is,equalBytes:Dpe,hexToBytes:Xh,hexToNumber:GR,numberToBytesBE:Qh,numberToBytesLE:XR,numberToHexUnpadded:QQ,numberToVarBytesBE:Mpe,utf8ToBytes:Ope,validateObject:m0},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cr=BigInt(0),qn=BigInt(1),Mc=BigInt(2),Lpe=BigInt(3),HD=BigInt(4),lj=BigInt(5),cj=BigInt(8);BigInt(9);BigInt(16);function li(n,e){const r=n%e;return r>=cr?r:e+r}function Fpe(n,e,r){if(r<=cr||e<cr)throw new Error("Expected power/modulo > 0");if(r===qn)return cr;let i=qn;for(;e>cr;)e&qn&&(i=i*n%r),n=n*n%r,e>>=qn;return i}function Gi(n,e,r){let i=n;for(;e-- >cr;)i*=i,i%=r;return i}function VD(n,e){if(n===cr||e<=cr)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let r=li(n,e),i=e,s=cr,o=qn;for(;r!==cr;){const l=i/r,c=i%r,u=s-o*l;i=r,r=c,s=o,o=u}if(i!==qn)throw new Error("invert: does not exist");return li(s,e)}function $pe(n){const e=(n-qn)/Mc;let r,i,s;for(r=n-qn,i=0;r%Mc===cr;r/=Mc,i++);for(s=Mc;s<n&&Fpe(s,e,n)!==n-qn;s++);if(i===1){const a=(n+qn)/HD;return function(c,u){const h=c.pow(u,a);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}const o=(r+qn)/Mc;return function(l,c){if(l.pow(c,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let u=i,h=l.pow(l.mul(l.ONE,s),r),d=l.pow(c,o),f=l.pow(c,r);for(;!l.eql(f,l.ONE);){if(l.eql(f,l.ZERO))return l.ZERO;let p=1;for(let b=l.sqr(f);p<u&&!l.eql(b,l.ONE);p++)b=l.sqr(b);const g=l.pow(h,qn<<BigInt(u-p-1));h=l.sqr(g),d=l.mul(d,g),f=l.mul(f,h),u=p}return d}}function zpe(n){if(n%HD===Lpe){const e=(n+qn)/HD;return function(i,s){const o=i.pow(s,e);if(!i.eql(i.sqr(o),s))throw new Error("Cannot find square root");return o}}if(n%cj===lj){const e=(n-lj)/cj;return function(i,s){const o=i.mul(s,Mc),a=i.pow(o,e),l=i.mul(s,a),c=i.mul(i.mul(l,Mc),a),u=i.mul(l,i.sub(c,i.ONE));if(!i.eql(i.sqr(u),s))throw new Error("Cannot find square root");return u}}return $pe(n)}const Bpe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Upe(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Bpe.reduce((i,s)=>(i[s]="function",i),e);return m0(n,r)}function qpe(n,e,r){if(r<cr)throw new Error("Expected power > 0");if(r===cr)return n.ONE;if(r===qn)return e;let i=n.ONE,s=e;for(;r>cr;)r&qn&&(i=n.mul(i,s)),s=n.sqr(s),r>>=qn;return i}function Wpe(n,e){const r=new Array(e.length),i=e.reduce((o,a,l)=>n.is0(a)?o:(r[l]=o,n.mul(o,a)),n.ONE),s=n.inv(i);return e.reduceRight((o,a,l)=>n.is0(a)?o:(r[l]=n.mul(o,r[l]),n.mul(o,a)),s),r}function ZQ(n,e){const r=e!==void 0?e:n.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function Hpe(n,e,r=!1,i={}){if(n<=cr)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:o}=ZQ(n,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=zpe(n),l=Object.freeze({ORDER:n,BITS:s,BYTES:o,MASK:QR(s),ZERO:cr,ONE:qn,create:c=>li(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return cr<=c&&c<n},is0:c=>c===cr,isOdd:c=>(c&qn)===qn,neg:c=>li(-c,n),eql:(c,u)=>c===u,sqr:c=>li(c*c,n),add:(c,u)=>li(c+u,n),sub:(c,u)=>li(c-u,n),mul:(c,u)=>li(c*u,n),pow:(c,u)=>qpe(l,c,u),div:(c,u)=>li(c*VD(u,n),n),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>VD(c,n),sqrt:i.sqrt||(c=>a(l,c)),invertBatch:c=>Wpe(l,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>r?XR(c,o):Qh(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?KR(c):ru(c)}});return Object.freeze(l)}function eJ(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function tJ(n){const e=eJ(n);return e+Math.ceil(e/2)}function Vpe(n,e,r=!1){const i=n.length,s=eJ(e),o=tJ(e);if(i<16||i<o||i>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${i}`);const a=r?ru(n):KR(n),l=li(a,e-qn)+qn;return r?XR(l,s):Qh(l,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ype=BigInt(0),Y_=BigInt(1);function Gpe(n,e){const r=(s,o)=>{const a=o.negate();return s?a:o},i=s=>{const o=Math.ceil(e/s)+1,a=2**(s-1);return{windows:o,windowSize:a}};return{constTimeNegate:r,unsafeLadder(s,o){let a=n.ZERO,l=s;for(;o>Ype;)o&Y_&&(a=a.add(l)),l=l.double(),o>>=Y_;return a},precomputeWindow(s,o){const{windows:a,windowSize:l}=i(o),c=[];let u=s,h=u;for(let d=0;d<a;d++){h=u,c.push(h);for(let f=1;f<l;f++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(s,o,a){const{windows:l,windowSize:c}=i(s);let u=n.ZERO,h=n.BASE;const d=BigInt(2**s-1),f=2**s,p=BigInt(s);for(let g=0;g<l;g++){const b=g*c;let y=Number(a&d);a>>=p,y>c&&(y-=f,a+=Y_);const v=b,w=b+Math.abs(y)-1,k=g%2!==0,_=y<0;y===0?h=h.add(r(k,o[v])):u=u.add(r(_,o[w]))}return{p:u,f:h}},wNAFCached(s,o,a,l){const c=s._WINDOW_SIZE||1;let u=o.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&o.set(s,l(u))),this.wNAF(c,u,a)}}}function nJ(n){return Upe(n.Fp),m0(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ZQ(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Kpe(n){const e=nJ(n);m0(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:i,a:s}=e;if(r){if(!i.eql(s,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Xpe,hexToBytes:Qpe}=jpe,jc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=jc;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const r=n[1],i=n.subarray(2,r+2);if(!r||i.length!==r)throw new e("Invalid signature integer: wrong length");if(i[0]&128)throw new e("Invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Xpe(i),l:n.subarray(r+2)}},toSig(n){const{Err:e}=jc,r=typeof n=="string"?Qpe(n):n;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let i=r.length;if(i<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==i-2)throw new e("Invalid signature: incorrect length");const{d:s,l:o}=jc._parseInt(r.subarray(2)),{d:a,l}=jc._parseInt(o);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:a}},hexFromSig(n){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{const h=u.toString(16);return h.length&1?`0${h}`:h},i=e(r(n.s)),s=e(r(n.r)),o=i.length/2,a=s.length/2,l=r(o),c=r(a);return`30${r(a+o+4)}02${c}${s}02${l}${i}`}},ua=BigInt(0),ls=BigInt(1);BigInt(2);const uj=BigInt(3);BigInt(4);function Jpe(n){const e=Kpe(n),{Fp:r}=e,i=e.toBytes||((g,b,y)=>{const v=b.toAffine();return Sg(Uint8Array.from([4]),r.toBytes(v.x),r.toBytes(v.y))}),s=e.fromBytes||(g=>{const b=g.subarray(1),y=r.fromBytes(b.subarray(0,r.BYTES)),v=r.fromBytes(b.subarray(r.BYTES,2*r.BYTES));return{x:y,y:v}});function o(g){const{a:b,b:y}=e,v=r.sqr(g),w=r.mul(v,g);return r.add(r.add(w,r.mul(g,b)),y)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return typeof g=="bigint"&&ua<g&&g<e.n}function l(g){if(!a(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(g){const{allowedPrivateKeyLengths:b,nByteLength:y,wrapPrivateKey:v,n:w}=e;if(b&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=Kh(g)),typeof g!="string"||!b.includes(g.length))throw new Error("Invalid key");g=g.padStart(y*2,"0")}let k;try{k=typeof g=="bigint"?g:ru(Is("private key",g,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof g}`)}return v&&(k=li(k,w)),l(k),k}const u=new Map;function h(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(b,y,v){if(this.px=b,this.py=y,this.pz=v,b==null||!r.isValid(b))throw new Error("x required");if(y==null||!r.isValid(y))throw new Error("y required");if(v==null||!r.isValid(v))throw new Error("z required")}static fromAffine(b){const{x:y,y:v}=b||{};if(!b||!r.isValid(y)||!r.isValid(v))throw new Error("invalid affine point");if(b instanceof d)throw new Error("projective point not allowed");const w=k=>r.eql(k,r.ZERO);return w(y)&&w(v)?d.ZERO:new d(y,v,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const y=r.invertBatch(b.map(v=>v.pz));return b.map((v,w)=>v.toAffine(y[w])).map(d.fromAffine)}static fromHex(b){const y=d.fromAffine(s(Is("pointHex",b)));return y.assertValidity(),y}static fromPrivateKey(b){return d.BASE.multiply(c(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:b,y}=this.toAffine();if(!r.isValid(b)||!r.isValid(y))throw new Error("bad point: x or y not FE");const v=r.sqr(y),w=o(b);if(!r.eql(v,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(r.isOdd)return!r.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){h(b);const{px:y,py:v,pz:w}=this,{px:k,py:_,pz:S}=b,C=r.eql(r.mul(y,S),r.mul(k,w)),E=r.eql(r.mul(v,S),r.mul(_,w));return C&&E}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:b,b:y}=e,v=r.mul(y,uj),{px:w,py:k,pz:_}=this;let S=r.ZERO,C=r.ZERO,E=r.ZERO,P=r.mul(w,w),O=r.mul(k,k),M=r.mul(_,_),R=r.mul(w,k);return R=r.add(R,R),E=r.mul(w,_),E=r.add(E,E),S=r.mul(b,E),C=r.mul(v,M),C=r.add(S,C),S=r.sub(O,C),C=r.add(O,C),C=r.mul(S,C),S=r.mul(R,S),E=r.mul(v,E),M=r.mul(b,M),R=r.sub(P,M),R=r.mul(b,R),R=r.add(R,E),E=r.add(P,P),P=r.add(E,P),P=r.add(P,M),P=r.mul(P,R),C=r.add(C,P),M=r.mul(k,_),M=r.add(M,M),P=r.mul(M,R),S=r.sub(S,P),E=r.mul(M,O),E=r.add(E,E),E=r.add(E,E),new d(S,C,E)}add(b){h(b);const{px:y,py:v,pz:w}=this,{px:k,py:_,pz:S}=b;let C=r.ZERO,E=r.ZERO,P=r.ZERO;const O=e.a,M=r.mul(e.b,uj);let R=r.mul(y,k),j=r.mul(v,_),B=r.mul(w,S),L=r.add(y,v),$=r.add(k,_);L=r.mul(L,$),$=r.add(R,j),L=r.sub(L,$),$=r.add(y,w);let z=r.add(k,S);return $=r.mul($,z),z=r.add(R,B),$=r.sub($,z),z=r.add(v,w),C=r.add(_,S),z=r.mul(z,C),C=r.add(j,B),z=r.sub(z,C),P=r.mul(O,$),C=r.mul(M,B),P=r.add(C,P),C=r.sub(j,P),P=r.add(j,P),E=r.mul(C,P),j=r.add(R,R),j=r.add(j,R),B=r.mul(O,B),$=r.mul(M,$),j=r.add(j,B),B=r.sub(R,B),B=r.mul(O,B),$=r.add($,B),R=r.mul(j,$),E=r.add(E,R),R=r.mul(z,$),C=r.mul(L,C),C=r.sub(C,R),R=r.mul(L,j),P=r.mul(z,P),P=r.add(P,R),new d(C,E,P)}subtract(b){return this.add(b.negate())}is0(){return this.equals(d.ZERO)}wNAF(b){return p.wNAFCached(this,u,b,y=>{const v=r.invertBatch(y.map(w=>w.pz));return y.map((w,k)=>w.toAffine(v[k])).map(d.fromAffine)})}multiplyUnsafe(b){const y=d.ZERO;if(b===ua)return y;if(l(b),b===ls)return this;const{endo:v}=e;if(!v)return p.unsafeLadder(this,b);let{k1neg:w,k1:k,k2neg:_,k2:S}=v.splitScalar(b),C=y,E=y,P=this;for(;k>ua||S>ua;)k&ls&&(C=C.add(P)),S&ls&&(E=E.add(P)),P=P.double(),k>>=ls,S>>=ls;return w&&(C=C.negate()),_&&(E=E.negate()),E=new d(r.mul(E.px,v.beta),E.py,E.pz),C.add(E)}multiply(b){l(b);let y=b,v,w;const{endo:k}=e;if(k){const{k1neg:_,k1:S,k2neg:C,k2:E}=k.splitScalar(y);let{p:P,f:O}=this.wNAF(S),{p:M,f:R}=this.wNAF(E);P=p.constTimeNegate(_,P),M=p.constTimeNegate(C,M),M=new d(r.mul(M.px,k.beta),M.py,M.pz),v=P.add(M),w=O.add(R)}else{const{p:_,f:S}=this.wNAF(y);v=_,w=S}return d.normalizeZ([v,w])[0]}multiplyAndAddUnsafe(b,y,v){const w=d.BASE,k=(S,C)=>C===ua||C===ls||!S.equals(w)?S.multiplyUnsafe(C):S.multiply(C),_=k(this,y).add(k(b,v));return _.is0()?void 0:_}toAffine(b){const{px:y,py:v,pz:w}=this,k=this.is0();b==null&&(b=k?r.ONE:r.inv(w));const _=r.mul(y,b),S=r.mul(v,b),C=r.mul(w,b);if(k)return{x:r.ZERO,y:r.ZERO};if(!r.eql(C,r.ONE))throw new Error("invZ was invalid");return{x:_,y:S}}isTorsionFree(){const{h:b,isTorsionFree:y}=e;if(b===ls)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:y}=e;return b===ls?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),i(d,this,b)}toHex(b=!0){return Kh(this.toRawBytes(b))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,p=Gpe(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function Zpe(n){const e=nJ(n);return m0(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function eme(n){const e=Zpe(n),{Fp:r,n:i}=e,s=r.BYTES+1,o=2*r.BYTES+1;function a($){return ua<$&&$<r.ORDER}function l($){return li($,i)}function c($){return VD($,i)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:d,isWithinCurveOrder:f}=Jpe({...e,toBytes($,z,W){const q=z.toAffine(),V=r.toBytes(q.x),F=Sg;return W?F(Uint8Array.from([z.hasEvenY()?2:3]),V):F(Uint8Array.from([4]),V,r.toBytes(q.y))},fromBytes($){const z=$.length,W=$[0],q=$.subarray(1);if(z===s&&(W===2||W===3)){const V=ru(q);if(!a(V))throw new Error("Point is not on curve");const F=d(V);let G=r.sqrt(F);const H=(G&ls)===ls;return(W&1)===1!==H&&(G=r.neg(G)),{x:V,y:G}}else if(z===o&&W===4){const V=r.fromBytes(q.subarray(0,r.BYTES)),F=r.fromBytes(q.subarray(r.BYTES,2*r.BYTES));return{x:V,y:F}}else throw new Error(`Point of length ${z} was invalid. Expected ${s} compressed bytes or ${o} uncompressed bytes`)}}),p=$=>Kh(Qh($,e.nByteLength));function g($){const z=i>>ls;return $>z}function b($){return g($)?l(-$):$}const y=($,z,W)=>ru($.slice(z,W));class v{constructor(z,W,q){this.r=z,this.s=W,this.recovery=q,this.assertValidity()}static fromCompact(z){const W=e.nByteLength;return z=Is("compactSignature",z,W*2),new v(y(z,0,W),y(z,W,2*W))}static fromDER(z){const{r:W,s:q}=jc.toSig(Is("DER",z));return new v(W,q)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(z){return new v(this.r,this.s,z)}recoverPublicKey(z){const{r:W,s:q,recovery:V}=this,F=E(Is("msgHash",z));if(V==null||![0,1,2,3].includes(V))throw new Error("recovery id invalid");const G=V===2||V===3?W+e.n:W;if(G>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=V&1?"03":"02",A=u.fromHex(H+p(G)),Q=c(G),J=l(-F*Q),K=l(q*Q),Z=u.BASE.multiplyAndAddUnsafe(A,J,K);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return Xh(this.toDERHex())}toDERHex(){return jc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Xh(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const w={isValidPrivateKey($){try{return h($),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const $=tJ(e.n);return Vpe(e.randomBytes($),e.n)},precompute($=8,z=u.BASE){return z._setWindowSize($),z.multiply(BigInt(3)),z}};function k($,z=!0){return u.fromPrivateKey($).toRawBytes(z)}function _($){const z=$ instanceof Uint8Array,W=typeof $=="string",q=(z||W)&&$.length;return z?q===s||q===o:W?q===2*s||q===2*o:$ instanceof u}function S($,z,W=!0){if(_($))throw new Error("first arg must be private key");if(!_(z))throw new Error("second arg must be public key");return u.fromHex(z).multiply(h($)).toRawBytes(W)}const C=e.bits2int||function($){const z=ru($),W=$.length*8-e.nBitLength;return W>0?z>>BigInt(W):z},E=e.bits2int_modN||function($){return l(C($))},P=QR(e.nBitLength);function O($){if(typeof $!="bigint")throw new Error("bigint expected");if(!(ua<=$&&$<P))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Qh($,e.nByteLength)}function M($,z,W=R){if(["recovered","canonical"].some(be=>be in W))throw new Error("sign() legacy options not supported");const{hash:q,randomBytes:V}=e;let{lowS:F,prehash:G,extraEntropy:H}=W;F==null&&(F=!0),$=Is("msgHash",$),G&&($=Is("prehashed msgHash",q($)));const A=E($),Q=h(z),J=[O(Q),O(A)];if(H!=null){const be=H===!0?V(r.BYTES):H;J.push(Is("extraEntropy",be))}const K=Sg(...J),Z=A;function se(be){const Oe=C(be);if(!f(Oe))return;const Ke=c(Oe),De=u.BASE.multiply(Oe).toAffine(),Pe=l(De.x);if(Pe===ua)return;const We=l(Ke*l(Z+Pe*Q));if(We===ua)return;let nt=(De.x===Pe?0:2)|Number(De.y&ls),U=We;return F&&g(We)&&(U=b(We),nt^=1),new v(Pe,U,nt)}return{seed:K,k2sig:se}}const R={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function B($,z,W=R){const{seed:q,k2sig:V}=M($,z,W),F=e;return JQ(F.hash.outputLen,F.nByteLength,F.hmac)(q,V)}u.BASE._setWindowSize(8);function L($,z,W,q=j){var De;const V=$;if(z=Is("msgHash",z),W=Is("publicKey",W),"strict"in q)throw new Error("options.strict was renamed to lowS");const{lowS:F,prehash:G}=q;let H,A;try{if(typeof V=="string"||V instanceof Uint8Array)try{H=v.fromDER(V)}catch(Pe){if(!(Pe instanceof jc.Err))throw Pe;H=v.fromCompact(V)}else if(typeof V=="object"&&typeof V.r=="bigint"&&typeof V.s=="bigint"){const{r:Pe,s:We}=V;H=new v(Pe,We)}else throw new Error("PARSE");A=u.fromHex(W)}catch(Pe){if(Pe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(F&&H.hasHighS())return!1;G&&(z=e.hash(z));const{r:Q,s:J}=H,K=E(z),Z=c(J),se=l(K*Z),be=l(Q*Z),Oe=(De=u.BASE.multiplyAndAddUnsafe(A,se,be))==null?void 0:De.toAffine();return Oe?l(Oe.x)===Q:!1}return{CURVE:e,getPublicKey:k,getSharedSecret:S,sign:B,verify:L,ProjectivePoint:u,Signature:v,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function tme(n){return{hash:n,hmac:(e,...r)=>Dw(n,e,Tfe(...r)),randomBytes:Mfe}}function nme(n,e){const r=i=>eme({...n,...tme(i)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rJ=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),dj=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),rme=BigInt(1),YD=BigInt(2),hj=(n,e)=>(n+e/YD)/e;function ime(n){const e=rJ,r=BigInt(3),i=BigInt(6),s=BigInt(11),o=BigInt(22),a=BigInt(23),l=BigInt(44),c=BigInt(88),u=n*n*n%e,h=u*u*n%e,d=Gi(h,r,e)*h%e,f=Gi(d,r,e)*h%e,p=Gi(f,YD,e)*u%e,g=Gi(p,s,e)*p%e,b=Gi(g,o,e)*g%e,y=Gi(b,l,e)*b%e,v=Gi(y,c,e)*y%e,w=Gi(v,l,e)*b%e,k=Gi(w,r,e)*h%e,_=Gi(k,a,e)*g%e,S=Gi(_,i,e)*u%e,C=Gi(S,YD,e);if(!GD.eql(GD.sqr(C),n))throw new Error("Cannot find square root");return C}const GD=Hpe(rJ,void 0,void 0,{sqrt:ime}),il=nme({a:BigInt(0),b:BigInt(7),Fp:GD,n:dj,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=dj,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-rme*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),l=hj(o*n,e),c=hj(-i*n,e);let u=li(n-l*r-c*s,e),h=li(-l*i-c*o,e);const d=u>a,f=h>a;if(d&&(u=e-u),f&&(h=e-h),u>a||h>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:d,k1:u,k2neg:f,k2:h}}}},kf);BigInt(0);il.ProjectivePoint;const iJ="0x0000000000000000000000000000000000000000",fj="0x0000000000000000000000000000000000000000000000000000000000000000",sme=`Ethereum Signed Message:
`,pj=BigInt(0),mj=BigInt(1),KD=BigInt(2),gj=BigInt(27),vj=BigInt(28),Uv=BigInt(35),sJ=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ome=sJ/KD,ame=Symbol.for("nodejs.util.inspect.custom"),hc={};function G_(n){return Hl(Wn(n),32)}var mh,bo,gh,xl;const rs=class rs{constructor(e,r,i,s){Ge(this,mh);Ge(this,bo);Ge(this,gh);Ge(this,xl);Ew(e,hc,"Signature"),Me(this,mh,r),Me(this,bo,i),Me(this,gh,s),Me(this,xl,null)}get r(){return oe(this,mh)}set r(e){ke(xm(e)===32,"invalid r","value",e),Me(this,mh,Ze(e))}get s(){return ke(parseInt(oe(this,bo).substring(0,3))<8,"non-canonical s; use ._s","s",oe(this,bo)),oe(this,bo)}set s(e){ke(xm(e)===32,"invalid s","value",e),Me(this,bo,Ze(e))}get _s(){return oe(this,bo)}isValid(){return BigInt(oe(this,bo))<=ome}get v(){return oe(this,gh)}set v(e){const r=Fi(e,"value");ke(r===27||r===28,"invalid v","v",e),Me(this,gh,r)}get networkV(){return oe(this,xl)}get legacyChainId(){const e=this.networkV;return e==null?null:rs.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=st(this.s);return this.yParity&&(e[0]|=128),Ze(e)}get compactSerialized(){return Vn([this.r,this.yParityAndS])}get serialized(){return Vn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=sJ-BigInt(this._s),r=55-this.v,i=new rs(hc,this.r,G_(e),r);return this.networkV&&Me(i,xl,this.networkV),i}clone(){const e=new rs(hc,this.r,this._s,this.v);return this.networkV&&Me(e,xl,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[ame](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const r=cn(e,"v");return r==gj||r==vj?pj:(ke(r>=Uv,"invalid EIP-155 v","v",e),(r-Uv)/KD)}static getChainIdV(e,r){return cn(e)*KD+BigInt(35+r-27)}static getNormalizedV(e){const r=cn(e);return r===pj||r===gj?27:r===mj||r===vj?28:(ke(r>=Uv,"invalid v","v",e),r&mj?27:28)}static from(e){function r(u,h){ke(u,h,"signature",e)}if(e==null)return new rs(hc,fj,fj,27);if(typeof e=="string"){const u=st(e,"signature");if(u.length===64){const h=Ze(u.slice(0,32)),d=u.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new rs(hc,h,Ze(d),f)}if(u.length===65){const h=Ze(u.slice(0,32)),d=Ze(u.slice(32,64)),f=rs.getNormalizedV(u[64]);return new rs(hc,h,d,f)}r(!1,"invalid raw signature length")}if(e instanceof rs)return e.clone();const i=e.r;r(i!=null,"missing r");const s=G_(i),o=function(u,h){if(u!=null)return G_(u);if(h!=null){r(Do(h,32),"invalid yParityAndS");const d=st(h);return d[0]&=127,Ze(d)}r(!1,"missing s")}(e.s,e.yParityAndS),{networkV:a,v:l}=function(u,h,d){if(u!=null){const f=cn(u);return{networkV:f>=Uv?f:void 0,v:rs.getNormalizedV(f)}}if(h!=null)return r(Do(h,32),"invalid yParityAndS"),{v:st(h)[0]&128?28:27};if(d!=null){switch(Fi(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}r(!1,"invalid yParity")}r(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new rs(hc,s,o,l);return a&&Me(c,xl,a),r(e.yParity==null||Fi(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),r(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};mh=new WeakMap,bo=new WeakMap,gh=new WeakMap,xl=new WeakMap;let Ys=rs;var la;const Oc=class Oc{constructor(e){Ge(this,la);ke(xm(e)===32,"invalid private key","privateKey","[REDACTED]"),Me(this,la,Ze(e))}get privateKey(){return oe(this,la)}get publicKey(){return Oc.computePublicKey(oe(this,la))}get compressedPublicKey(){return Oc.computePublicKey(oe(this,la),!0)}sign(e){ke(xm(e)===32,"invalid digest length","digest",e);const r=il.sign(wd(e),wd(oe(this,la)),{lowS:!0});return Ys.from({r:Vh(r.r,32),s:Vh(r.s,32),v:r.recovery?28:27})}computeSharedSecret(e){const r=Oc.computePublicKey(e);return Ze(il.getSharedSecret(wd(oe(this,la)),st(r),!1))}static computePublicKey(e,r){let i=st(e,"key");if(i.length===32){const o=il.getPublicKey(i,!!r);return Ze(o)}if(i.length===64){const o=new Uint8Array(65);o[0]=4,o.set(i,1),i=o}const s=il.ProjectivePoint.fromHex(i);return Ze(s.toRawBytes(r))}static recoverPublicKey(e,r){ke(xm(e)===32,"invalid digest length","digest",e);const i=Ys.from(r);let s=il.Signature.fromCompact(wd(Vn([i.r,i.s])));s=s.addRecoveryBit(i.yParity);const o=s.recoverPublicKey(wd(e));return ke(o!=null,"invalid signature for digest","signature",r),"0x"+o.toHex(!1)}static addPoints(e,r,i){const s=il.ProjectivePoint.fromHex(Oc.computePublicKey(e).substring(2)),o=il.ProjectivePoint.fromHex(Oc.computePublicKey(r).substring(2));return"0x"+s.add(o).toHex(!!i)}};la=new WeakMap;let To=Oc;const lme=BigInt(0),cme=BigInt(36);function bj(n){n=n.toLowerCase();const e=n.substring(2).split(""),r=new Uint8Array(40);for(let s=0;s<40;s++)r[s]=e[s].charCodeAt(0);const i=st(lr(r));for(let s=0;s<40;s+=2)i[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(i[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const JR={};for(let n=0;n<10;n++)JR[String(n)]=String(n);for(let n=0;n<26;n++)JR[String.fromCharCode(65+n)]=String(10+n);const yj=15;function ume(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(i=>JR[i]).join("");for(;e.length>=yj;){let i=e.substring(0,yj);e=parseInt(i,10)%97+e.substring(i.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const dme=function(){const n={};for(let e=0;e<36;e++){const r="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[r]=BigInt(e)}return n}();function hme(n){n=n.toLowerCase();let e=lme;for(let r=0;r<n.length;r++)e=e*cme+dme[n[r]];return e}function _s(n){if(ke(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=bj(n);return ke(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ke(n.substring(2,4)===ume(n),"bad icap checksum","address",n);let e=hme(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return bj("0x"+e)}ke(!1,"invalid address","address",n)}function fme(n){return n&&typeof n.getAddress=="function"}async function K_(n,e){const r=await e;return(r==null||r==="0x0000000000000000000000000000000000000000")&&($t(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),ke(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),_s(r)}function wm(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?_s(n):($t(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),K_(n,e.resolveName(n)));if(fme(n))return K_(n,n.getAddress());if(n&&typeof n.then=="function")return K_(n,n);ke(!1,"unsupported addressable value","target",n)}function X_(n,e){return{address:_s(n),storageKeys:e.map((r,i)=>(ke(Do(r,32),"invalid slot",`storageKeys[${i}]`,r),r.toLowerCase()))}}function Rw(n){if(Array.isArray(n))return n.map((r,i)=>Array.isArray(r)?(ke(r.length===2,"invalid slot set",`value[${i}]`,r),X_(r[0],r[1])):(ke(r!=null&&typeof r=="object","invalid address-slot set","value",n),X_(r.address,r.storageKeys)));ke(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(r=>{const i=n[r].reduce((s,o)=>(s[o]=!0,s),{});return X_(r,Object.keys(i).sort())});return e.sort((r,i)=>r.address.localeCompare(i.address)),e}function pme(n){return{address:_s(n.address),nonce:cn(n.nonce!=null?n.nonce:0),chainId:cn(n.chainId!=null?n.chainId:0),signature:Ys.from(n.signature)}}function g0(n){let e;return typeof n=="string"?e=To.computePublicKey(n,!1):e=n.publicKey,_s(lr("0x"+e.substring(4)).substring(26))}function mme(n,e){return g0(To.recoverPublicKey(n,e))}const sr=BigInt(0),gme=BigInt(2),vme=BigInt(27),bme=BigInt(28),yme=BigInt(35),xme=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),wme=Symbol.for("nodejs.util.inspect.custom"),Q_=4096*32,ey=128;function _me(n){return{blobToKzgCommitment:i=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return st(n.blobToKzgCommitment(Ze(i)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return st(n.blobToKzgCommitment(i));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return st(n.blobToKZGCommitment(Ze(i)));ke(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(i,s)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return st(n.computeBlobProof(Ze(i),Ze(s)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(i,s);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return st(n.computeBlobKZGProof(Ze(i),Ze(s)));ke(!1,"unsupported KZG library","kzg",n)}}}function xj(n,e){let r=n.toString(16);for(;r.length<2;)r="0"+r;return r+=ws(e).substring(4),"0x"+r}function Tf(n){return n==="0x"?null:_s(n)}function Aw(n,e){try{return Rw(n)}catch(r){ke(!1,r.message,e,n)}}function Sme(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const r=[];for(let i=0;i<n.length;i++){const s=n[i];if(!Array.isArray(s))throw new Error(`authorization[${i}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${i}]: wrong length`);if(!s[1])throw new Error(`authorization[${i}]: null address`);r.push({address:Tf(s[1]),nonce:tn(s[2],"nonce"),chainId:tn(s[0],"chainId"),signature:Ys.from({yParity:$u(s[3],"yParity"),r:Hl(s[4],32),s:Hl(s[5],32)})})}return r}catch(r){ke(!1,r.message,e,n)}}function $u(n,e){return n==="0x"?0:Fi(n,e)}function tn(n,e){if(n==="0x")return sr;const r=cn(n,e);return ke(r<=xme,"value exceeds uint size",e,r),r}function At(n,e){const r=cn(n,"value"),i=Wn(r);return ke(i.length<=32,"value too large",`tx.${e}`,r),i}function Nw(n){return Rw(n).map(e=>[e.address,e.storageKeys])}function kme(n){return n.map(e=>[At(e.chainId,"chainId"),e.address,At(e.nonce,"nonce"),At(e.signature.yParity,"yParity"),Wn(e.signature.r),Wn(e.signature._s)])}function Cme(n,e){ke(Array.isArray(n),`invalid ${e}`,"value",n);for(let r=0;r<n.length;r++)ke(Do(n[r],32),"invalid ${ param } hash",`value[${r}]`,n[r]);return n}function Eme(n){const e=d0(n);ke(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const r={type:0,nonce:$u(e[0],"nonce"),gasPrice:tn(e[1],"gasPrice"),gasLimit:tn(e[2],"gasLimit"),to:Tf(e[3]),value:tn(e[4],"value"),data:Ze(e[5]),chainId:sr};if(e.length===6)return r;const i=tn(e[6],"v"),s=tn(e[7],"r"),o=tn(e[8],"s");if(s===sr&&o===sr)r.chainId=i;else{let a=(i-yme)/gme;a<sr&&(a=sr),r.chainId=a,ke(a!==sr||i===vme||i===bme,"non-canonical legacy v","v",e[6]),r.signature=Ys.from({r:Hl(e[7],32),s:Hl(e[8],32),v:i})}return r}function Tme(n,e){const r=[At(n.nonce,"nonce"),At(n.gasPrice||0,"gasPrice"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data];let i=sr;if(n.chainId!=sr)i=cn(n.chainId,"tx.chainId"),ke(!e||e.networkV==null||e.legacyChainId===i,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const o=n.signature.legacyChainId;o!=null&&(i=o)}if(!e)return i!==sr&&(r.push(Wn(i)),r.push("0x"),r.push("0x")),xa(r);let s=BigInt(27+e.yParity);return i!==sr?s=Ys.getChainIdV(i,e.v):BigInt(e.v)!==s&&ke(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(Wn(s)),r.push(Wn(e.r)),r.push(Wn(e._s)),xa(r)}function jw(n,e){let r;try{if(r=$u(e[0],"yParity"),r!==0&&r!==1)throw new Error("bad yParity")}catch{ke(!1,"invalid yParity","yParity",e[0])}const i=Hl(e[1],32),s=Hl(e[2],32),o=Ys.from({r:i,s,yParity:r});n.signature=o}function Pme(n){const e=d0(st(n).slice(1));ke(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ze(n));const r={type:2,chainId:tn(e[0],"chainId"),nonce:$u(e[1],"nonce"),maxPriorityFeePerGas:tn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:tn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:tn(e[4],"gasLimit"),to:Tf(e[5]),value:tn(e[6],"value"),data:Ze(e[7]),accessList:Aw(e[8],"accessList")};return e.length===9||jw(r,e.slice(9)),r}function Mme(n,e){const r=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),At(n.maxFeePerGas||0,"maxFeePerGas"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data,Nw(n.accessList||[])];return e&&(r.push(At(e.yParity,"yParity")),r.push(Wn(e.r)),r.push(Wn(e.s))),Vn(["0x02",xa(r)])}function Dme(n){const e=d0(st(n).slice(1));ke(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ze(n));const r={type:1,chainId:tn(e[0],"chainId"),nonce:$u(e[1],"nonce"),gasPrice:tn(e[2],"gasPrice"),gasLimit:tn(e[3],"gasLimit"),to:Tf(e[4]),value:tn(e[5],"value"),data:Ze(e[6]),accessList:Aw(e[7],"accessList")};return e.length===8||jw(r,e.slice(8)),r}function Ome(n,e){const r=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.gasPrice||0,"gasPrice"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data,Nw(n.accessList||[])];return e&&(r.push(At(e.yParity,"recoveryParam")),r.push(Wn(e.r)),r.push(Wn(e.s))),Vn(["0x01",xa(r)])}function Ime(n){let e=d0(st(n).slice(1)),r="3",i=null,s=null;if(e.length===4&&Array.isArray(e[0])){r="3 (network format)";const a=e[1],l=e[2],c=e[3];ke(Array.isArray(a),"invalid network format: blobs not an array","fields[1]",a),ke(Array.isArray(l),"invalid network format: commitments not an array","fields[2]",l),ke(Array.isArray(c),"invalid network format: proofs not an array","fields[3]",c),ke(a.length===l.length,"invalid network format: blobs/commitments length mismatch","fields",e),ke(a.length===c.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let u=0;u<e[1].length;u++)s.push({data:a[u],commitment:l[u],proof:c[u]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){r="3 (EIP-7594 network format)",i=Fi(e[1]);const a=e[2],l=e[3],c=e[4];ke(i===1,`unsupported EIP-7594 network format version: ${i}`,"fields[1]",i),ke(Array.isArray(a),"invalid EIP-7594 network format: blobs not an array","fields[2]",a),ke(Array.isArray(l),"invalid EIP-7594 network format: commitments not an array","fields[3]",l),ke(Array.isArray(c),"invalid EIP-7594 network format: proofs not an array","fields[4]",c),ke(a.length===l.length,"invalid network format: blobs/commitments length mismatch","fields",e),ke(a.length*ey===c.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let u=0;u<a.length;u++){const h=[];for(let d=0;d<ey;d++)h.push(c[u*ey+d]);s.push({data:a[u],commitment:l[u],proof:Vn(h)})}e=e[0]}ke(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${r}`,"data",Ze(n));const o={type:3,chainId:tn(e[0],"chainId"),nonce:$u(e[1],"nonce"),maxPriorityFeePerGas:tn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:tn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:tn(e[4],"gasLimit"),to:Tf(e[5]),value:tn(e[6],"value"),data:Ze(e[7]),accessList:Aw(e[8],"accessList"),maxFeePerBlobGas:tn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:i};s&&(o.blobs=s),ke(o.to!=null,`invalid address for transaction type: ${r}`,"data",n),ke(Array.isArray(o.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let a=0;a<o.blobVersionedHashes.length;a++)ke(Do(o.blobVersionedHashes[a],32),`invalid blobVersionedHash at index ${a}: must be length 32`,"data",n);return e.length===11||jw(o,e.slice(11)),o}function Rme(n,e,r){const i=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),At(n.maxFeePerGas||0,"maxFeePerGas"),At(n.gasLimit,"gasLimit"),n.to||iJ,At(n.value,"value"),n.data,Nw(n.accessList||[]),At(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Cme(n.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(i.push(At(e.yParity,"yParity")),i.push(Wn(e.r)),i.push(Wn(e.s)),r)){if(n.blobWrapperVersion!=null){const s=Wn(n.blobWrapperVersion),o=[];for(const{proof:a}of r){const l=st(a),c=l.length/ey;for(let u=0;u<l.length;u+=c)o.push(l.subarray(u,u+c))}return Vn(["0x03",xa([i,s,r.map(a=>a.data),r.map(a=>a.commitment),o])])}return Vn(["0x03",xa([i,r.map(s=>s.data),r.map(s=>s.commitment),r.map(s=>s.proof)])])}return Vn(["0x03",xa(i)])}function Ame(n){const e=d0(st(n).slice(1));ke(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Ze(n));const r={type:4,chainId:tn(e[0],"chainId"),nonce:$u(e[1],"nonce"),maxPriorityFeePerGas:tn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:tn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:tn(e[4],"gasLimit"),to:Tf(e[5]),value:tn(e[6],"value"),data:Ze(e[7]),accessList:Aw(e[8],"accessList"),authorizationList:Sme(e[9],"authorizationList")};return e.length===10||jw(r,e.slice(10)),r}function Nme(n,e){const r=[At(n.chainId,"chainId"),At(n.nonce,"nonce"),At(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),At(n.maxFeePerGas||0,"maxFeePerGas"),At(n.gasLimit,"gasLimit"),n.to||"0x",At(n.value,"value"),n.data,Nw(n.accessList||[]),kme(n.authorizationList||[])];return e&&(r.push(At(e.yParity,"yParity")),r.push(Wn(e.r)),r.push(Wn(e.s))),Vn(["0x04",xa(r)])}var Ns,vh,bh,yh,xh,wh,_h,Sh,kh,Ch,Eh,Th,Xc,wl,yo,_l,Ph,Mh,Dh,ty;const fo=class fo{constructor(){Ge(this,Dh);Ge(this,Ns);Ge(this,vh);Ge(this,bh);Ge(this,yh);Ge(this,xh);Ge(this,wh);Ge(this,_h);Ge(this,Sh);Ge(this,kh);Ge(this,Ch);Ge(this,Eh);Ge(this,Th);Ge(this,Xc);Ge(this,wl);Ge(this,yo);Ge(this,_l);Ge(this,Ph);Ge(this,Mh);Me(this,Ns,null),Me(this,vh,null),Me(this,yh,0),Me(this,xh,sr),Me(this,wh,null),Me(this,_h,null),Me(this,Sh,null),Me(this,bh,"0x"),Me(this,kh,sr),Me(this,Ch,sr),Me(this,Eh,null),Me(this,Th,null),Me(this,Xc,null),Me(this,wl,null),Me(this,yo,null),Me(this,_l,null),Me(this,Ph,null),Me(this,Mh,null)}get type(){return oe(this,Ns)}set type(e){switch(e){case null:Me(this,Ns,null);break;case 0:case"legacy":Me(this,Ns,0);break;case 1:case"berlin":case"eip-2930":Me(this,Ns,1);break;case 2:case"london":case"eip-1559":Me(this,Ns,2);break;case 3:case"cancun":case"eip-4844":Me(this,Ns,3);break;case 4:case"pectra":case"eip-7702":Me(this,Ns,4);break;default:ke(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=oe(this,vh);return e==null&&this.type===3?iJ:e}set to(e){Me(this,vh,e==null?null:_s(e))}get nonce(){return oe(this,yh)}set nonce(e){Me(this,yh,Fi(e,"value"))}get gasLimit(){return oe(this,xh)}set gasLimit(e){Me(this,xh,cn(e))}get gasPrice(){const e=oe(this,wh);return e==null&&(this.type===0||this.type===1)?sr:e}set gasPrice(e){Me(this,wh,e==null?null:cn(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=oe(this,_h);return e??(this.type===2||this.type===3?sr:null)}set maxPriorityFeePerGas(e){Me(this,_h,e==null?null:cn(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=oe(this,Sh);return e??(this.type===2||this.type===3?sr:null)}set maxFeePerGas(e){Me(this,Sh,e==null?null:cn(e,"maxFeePerGas"))}get data(){return oe(this,bh)}set data(e){Me(this,bh,Ze(e))}get value(){return oe(this,kh)}set value(e){Me(this,kh,cn(e,"value"))}get chainId(){return oe(this,Ch)}set chainId(e){Me(this,Ch,cn(e))}get signature(){return oe(this,Eh)||null}set signature(e){Me(this,Eh,e==null?null:Ys.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const r=this.authorizationList;if(r){for(const i of r)if(!i.signature.isValid())return!1}return!0}get accessList(){const e=oe(this,Th)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){Me(this,Th,e==null?null:Rw(e))}get authorizationList(){const e=oe(this,Ph)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){Me(this,Ph,e==null?null:e.map(r=>pme(r)))}get maxFeePerBlobGas(){const e=oe(this,Xc);return e==null&&this.type===3?sr:e}set maxFeePerBlobGas(e){Me(this,Xc,e==null?null:cn(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=oe(this,wl);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ke(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let r=0;r<e.length;r++)ke(Do(e[r],32),"invalid blobVersionedHash",`value[${r}]`,e[r])}Me(this,wl,e)}get blobs(){return oe(this,_l)==null?null:oe(this,_l).map(e=>Object.assign({},e))}set blobs(e){if(e==null){Me(this,_l,null);return}const r=[],i=[];for(let s=0;s<e.length;s++){const o=e[s];if(Tw(o)){$t(oe(this,yo),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=st(o);if(ke(a.length<=Q_,"blob is too large",`blobs[${s}]`,o),a.length!==Q_){const u=new Uint8Array(Q_);u.set(a),a=u}const l=oe(this,yo).blobToKzgCommitment(a),c=Ze(oe(this,yo).computeBlobKzgProof(a,l));r.push({data:Ze(a),commitment:Ze(l),proof:c}),i.push(xj(1,l))}else{const a=Ze(o.data),l=Ze(o.commitment),c=Ze(o.proof);r.push({data:a,commitment:l,proof:c}),i.push(xj(1,l))}}Me(this,_l,r),Me(this,wl,i)}get kzg(){return oe(this,yo)}set kzg(e){e==null?Me(this,yo,null):Me(this,yo,_me(e))}get blobWrapperVersion(){return oe(this,Mh)}set blobWrapperVersion(e){Me(this,Mh,e)}get hash(){return this.signature==null?null:lr(Dt(this,Dh,ty).call(this,!0,!1))}get unsignedHash(){return lr(this.unsignedSerialized)}get from(){return this.signature==null?null:mme(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:To.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return Dt(this,Dh,ty).call(this,!0,!0)}get unsignedSerialized(){return Dt(this,Dh,ty).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,r=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,i=this.accessList!=null,s=oe(this,Xc)!=null||oe(this,wl);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&$t(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),$t(!r||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),$t(this.type!==0||!i,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const o=[];return this.type!=null?o.push(this.type):this.authorizationList&&this.authorizationList.length?o.push(4):r?o.push(2):e?(o.push(1),i||o.push(0)):i?(o.push(1),o.push(2)):(s&&this.to||(o.push(0),o.push(1),o.push(2)),o.push(3)),o.sort(),o}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return fo.from(this)}toJSON(){const e=r=>r==null?null:r.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[wme](){return this.toString()}toString(){const e=[],r=s=>{let o=this[s];typeof o=="string"&&(o=JSON.stringify(o)),e.push(`${s}: ${o}`)};this.type&&r("type"),r("to"),r("data"),r("nonce"),r("gasLimit"),r("value"),this.chainId!=null&&r("chainId"),this.signature&&(r("from"),e.push(`signature: ${this.signature.toString()}`));const i=this.authorizationList;if(i){const s=[];for(const o of i){const a=[];a.push(`address: ${JSON.stringify(o.address)}`),o.nonce!=null&&a.push(`nonce: ${o.nonce}`),o.chainId!=null&&a.push(`chainId: ${o.chainId}`),o.signature&&a.push(`signature: ${o.signature.toString()}`),s.push(`Authorization { ${a.join(", ")} }`)}e.push(`authorizations: [ ${s.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new fo;if(typeof e=="string"){const i=st(e);if(i[0]>=127)return fo.from(Eme(i));switch(i[0]){case 1:return fo.from(Dme(i));case 2:return fo.from(Pme(i));case 3:return fo.from(Ime(i));case 4:return fo.from(Ame(i))}$t(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const r=new fo;return e.type!=null&&(r.type=e.type),e.to!=null&&(r.to=e.to),e.nonce!=null&&(r.nonce=e.nonce),e.gasLimit!=null&&(r.gasLimit=e.gasLimit),e.gasPrice!=null&&(r.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(r.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(r.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(r.data=e.data),e.value!=null&&(r.value=e.value),e.chainId!=null&&(r.chainId=e.chainId),e.signature!=null&&(r.signature=Ys.from(e.signature)),e.accessList!=null&&(r.accessList=e.accessList),e.authorizationList!=null&&(r.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(r.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(r.kzg=e.kzg),e.blobWrapperVersion!=null&&(r.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(r.blobs=e.blobs),e.hash!=null&&(ke(r.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ke(r.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ke(r.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ke(r.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),r}};Ns=new WeakMap,vh=new WeakMap,bh=new WeakMap,yh=new WeakMap,xh=new WeakMap,wh=new WeakMap,_h=new WeakMap,Sh=new WeakMap,kh=new WeakMap,Ch=new WeakMap,Eh=new WeakMap,Th=new WeakMap,Xc=new WeakMap,wl=new WeakMap,yo=new WeakMap,_l=new WeakMap,Ph=new WeakMap,Mh=new WeakMap,Dh=new WeakSet,ty=function(e,r){$t(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const i=e?this.signature:null;switch(this.inferType()){case 0:return Tme(this,i);case 1:return Ome(this,i);case 2:return Mme(this,i);case 3:return Rme(this,i,r?this.blobs:null);case 4:return Nme(this,i)}$t(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let ex=fo;function jme(n){return ke(typeof n.address=="string","invalid address for hashAuthorization","auth.address",n),lr(Vn(["0x05",xa([n.chainId!=null?Wn(n.chainId):"0x",_s(n.address),n.nonce!=null?Wn(n.nonce):"0x"])]))}function ZR(n){return lr(nu(n))}function Lme(n){return typeof n=="string"&&(n=nu(n)),lr(Vn([nu(sme),nu(String(n.length)),n]))}const oJ=new Uint8Array(32);oJ.fill(0);const Fme=BigInt(-1),aJ=BigInt(0),lJ=BigInt(1),$me=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function zme(n){const e=st(n),r=e.length%32;return r?Vn([e,oJ.slice(r)]):Ze(e)}const Bme=Vh(lJ,32),Ume=Vh(aJ,32),wj={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},J_=["name","version","chainId","verifyingContract","salt"];function _j(n){return function(e){return ke(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const qme={name:_j("name"),version:_j("version"),chainId:function(n){const e=cn(n,"domain.chainId");return ke(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):vfe(e)},verifyingContract:function(n){try{return _s(n).toLowerCase()}catch{}ke(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=st(n,"domain.salt");return ke(e.length===32,'invalid domain value "salt"',"domain.salt",n),Ze(e)}};function Z_(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const r=e[1]==="",i=parseInt(e[2]);ke(i%8===0&&i!==0&&i<=256&&e[2]===String(i),"invalid numeric width","type",n);const s=gfe($me,r?i-1:i),o=r?(s+lJ)*Fme:aJ;return function(a){const l=cn(a,"value");return ke(l>=o&&l<=s,`value out-of-bounds for ${n}`,"value",l),Vh(r?mfe(l,256):l,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return ke(r!==0&&r<=32&&e[1]===String(r),"invalid bytes width","type",n),function(i){const s=st(i);return ke(s.length===r,`invalid length for ${n}`,"value",i),zme(i)}}}switch(n){case"address":return function(e){return Hl(_s(e),32)};case"bool":return function(e){return e?Bme:Ume};case"bytes":return function(e){return lr(e)};case"string":return function(e){return ZR(e)}}return null}function Sj(n,e){return`${n}(${e.map(({name:r,type:i})=>i+" "+r).join(",")})`}function qv(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var e0,ca,Oh,nw,cJ;const is=class is{constructor(e){Ge(this,nw);Te(this,"primaryType");Ge(this,e0);Ge(this,ca);Ge(this,Oh);Me(this,ca,new Map),Me(this,Oh,new Map);const r=new Map,i=new Map,s=new Map,o={};Object.keys(e).forEach(c=>{o[c]=e[c].map(({name:u,type:h})=>{let{base:d,index:f}=qv(h);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:u,type:d+(f||"")}}),r.set(c,new Set),i.set(c,[]),s.set(c,new Set)}),Me(this,e0,JSON.stringify(o));for(const c in o){const u=new Set;for(const h of o[c]){ke(!u.has(h.name),`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(c)}`,"types",e),u.add(h.name);const d=qv(h.type).base;ke(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!Z_(d)&&(ke(i.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),i.get(d).push(c),r.get(c).add(d))}}const a=Array.from(i.keys()).filter(c=>i.get(c).length===0);ke(a.length!==0,"missing primary type","types",e),ke(a.length===1,`ambiguous primary types or unused types: ${a.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Li(this,{primaryType:a[0]});function l(c,u){ke(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),u.add(c);for(const h of r.get(c))if(i.has(h)){l(h,u);for(const d of u)s.get(d).add(h)}u.delete(c)}l(this.primaryType,new Set);for(const[c,u]of s){const h=Array.from(u);h.sort(),oe(this,ca).set(c,Sj(c,o[c])+h.map(d=>Sj(d,o[d])).join(""))}}get types(){return JSON.parse(oe(this,e0))}getEncoder(e){let r=oe(this,Oh).get(e);return r||(r=Dt(this,nw,cJ).call(this,e),oe(this,Oh).set(e,r)),r}encodeType(e){const r=oe(this,ca).get(e);return ke(r,`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return lr(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,i){if(Z_(e))return i(e,r);const s=qv(e).array;if(s)return ke(s.count===-1||s.count===r.length,`array length mismatch; expected length ${s.count}`,"value",r),r.map(a=>this._visit(s.prefix,a,i));const o=this.types[e];if(o)return o.reduce((a,{name:l,type:c})=>(a[l]=this._visit(c,r[l],i),a),{});ke(!1,`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new is(e)}static getPrimaryType(e){return is.from(e).primaryType}static hashStruct(e,r,i){return is.from(r).hashStruct(e,i)}static hashDomain(e){const r=[];for(const i in e){if(e[i]==null)continue;const s=wj[i];ke(s,`invalid typed-data domain key: ${JSON.stringify(i)}`,"domain",e),r.push({name:i,type:s})}return r.sort((i,s)=>J_.indexOf(i.name)-J_.indexOf(s.name)),is.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,i){return Vn(["0x1901",is.hashDomain(e),is.from(r).hash(i)])}static hash(e,r,i){return lr(is.encode(e,r,i))}static async resolveNames(e,r,i,s){e=Object.assign({},e);for(const l in e)e[l]==null&&delete e[l];const o={};e.verifyingContract&&!Do(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");const a=is.from(r);a.visit(i,(l,c)=>(l==="address"&&!Do(c,20)&&(o[c]="0x"),c));for(const l in o)o[l]=await s(l);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),i=a.visit(i,(l,c)=>l==="address"&&o[c]?o[c]:c),{domain:e,value:i}}static getPayload(e,r,i){is.hashDomain(e);const s={},o=[];J_.forEach(c=>{const u=e[c];u!=null&&(s[c]=qme[c](u),o.push({name:c,type:wj[c]}))});const a=is.from(r);r=a.types;const l=Object.assign({},r);return ke(l.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",r),l.EIP712Domain=o,a.encode(i),{types:l,domain:s,primaryType:a.primaryType,message:a.visit(i,(c,u)=>{if(c.match(/^bytes(\d*)/))return Ze(st(u));if(c.match(/^u?int/))return cn(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return ke(typeof u=="string","invalid string","value",u),u}ke(!1,"unsupported type","type",c)})}}};e0=new WeakMap,ca=new WeakMap,Oh=new WeakMap,nw=new WeakSet,cJ=function(e){{const s=Z_(e);if(s)return s}const r=qv(e).array;if(r){const s=r.prefix,o=this.getEncoder(s);return a=>{ke(r.count===-1||r.count===a.length,`array length mismatch; expected length ${r.count}`,"value",a);let l=a.map(o);return oe(this,ca).has(s)&&(l=l.map(lr)),lr(Vn(l))}}const i=this.types[e];if(i){const s=ZR(oe(this,ca).get(e));return o=>{const a=i.map(({name:l,type:c})=>{const u=this.getEncoder(c)(o[l]);return oe(this,ca).has(c)?lr(u):u});return a.unshift(s),Vn(a)}}ke(!1,`unknown type: ${e}`,"type",e)};let tx=is;BigInt(0);function uJ(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=Ze(n.data));const r="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of r)!(s in n)||n[s]==null||(e[s]=cn(n[s],`request.${s}`));const i="type,nonce".split(/,/);for(const s of i)!(s in n)||n[s]==null||(e[s]=Fi(n[s],`request.${s}`));return n.accessList&&(e.accessList=Rw(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobWrapperVersion"in n&&(e.blobWrapperVersion=n.blobWrapperVersion),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(s=>Tw(s)?Ze(s):Object.assign({},s))),e}function fc(n,e){if(n.provider)return n.provider;$t(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function kj(n,e){let r=uJ(e);if(r.to!=null&&(r.to=wm(r.to,n)),r.from!=null){const i=r.from;r.from=Promise.all([n.getAddress(),wm(i,n)]).then(([s,o])=>(ke(s.toLowerCase()===o.toLowerCase(),"transaction from mismatch","tx.from",o),s))}else r.from=n.getAddress();return await LR(r)}class dJ{constructor(e){Te(this,"provider");Li(this,{provider:e||null})}async getNonce(e){return fc(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await kj(this,e)}async populateTransaction(e){const r=fc(this,"populateTransaction"),i=await kj(this,e);i.nonce==null&&(i.nonce=await this.getNonce("pending")),i.gasLimit==null&&(i.gasLimit=await this.estimateGas(i));const s=await this.provider.getNetwork();if(i.chainId!=null){const a=cn(i.chainId);ke(a===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else i.chainId=s.chainId;const o=i.maxFeePerGas!=null||i.maxPriorityFeePerGas!=null;if(i.gasPrice!=null&&(i.type===2||o)?ke(!1,"eip-1559 transaction do not support gasPrice","tx",e):(i.type===0||i.type===1)&&o&&ke(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(i.type===2||i.type==null)&&i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)i.type=2;else if(i.type===0||i.type===1){const a=await r.getFeeData();$t(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),i.gasPrice==null&&(i.gasPrice=a.gasPrice)}else{const a=await r.getFeeData();if(i.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(i.authorizationList&&i.authorizationList.length?i.type=4:i.type=2,i.gasPrice!=null){const l=i.gasPrice;delete i.gasPrice,i.maxFeePerGas=l,i.maxPriorityFeePerGas=l}else i.maxFeePerGas==null&&(i.maxFeePerGas=a.maxFeePerGas),i.maxPriorityFeePerGas==null&&(i.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?($t(!o,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),i.gasPrice==null&&(i.gasPrice=a.gasPrice),i.type=0):$t(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(i.type===2||i.type===3||i.type===4)&&(i.maxFeePerGas==null&&(i.maxFeePerGas=a.maxFeePerGas),i.maxPriorityFeePerGas==null&&(i.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await LR(i)}async populateAuthorization(e){const r=Object.assign({},e);return r.chainId==null&&(r.chainId=(await fc(this,"getNetwork").getNetwork()).chainId),r.nonce==null&&(r.nonce=await this.getNonce()),r}async estimateGas(e){return fc(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return fc(this,"call").call(await this.populateCall(e))}async resolveName(e){return await fc(this,"resolveName").resolveName(e)}async sendTransaction(e){const r=fc(this,"sendTransaction"),i=await this.populateTransaction(e);delete i.from;const s=ex.from(i);return await r.broadcastTransaction(await this.signTransaction(s))}authorize(e){$t(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var Ih,ny;const S3=class S3 extends dJ{constructor(r,i){super(i);Ge(this,Ih);Te(this,"address");Li(this,{address:r})}async getAddress(){return this.address}connect(r){return new S3(this.address,r)}async signTransaction(r){Dt(this,Ih,ny).call(this,"transactions","signTransaction")}async signMessage(r){Dt(this,Ih,ny).call(this,"messages","signMessage")}async signTypedData(r,i,s){Dt(this,Ih,ny).call(this,"typed-data","signTypedData")}};Ih=new WeakSet,ny=function(r,i){$t(!1,`VoidSigner cannot sign ${r}`,"UNSUPPORTED_OPERATION",{operation:i})};let XD=S3;var Rh;const k3=class k3 extends dJ{constructor(r,i){super(i);Te(this,"address");Ge(this,Rh);ke(r&&typeof r.sign=="function","invalid private key","privateKey","[ REDACTED ]"),Me(this,Rh,r);const s=g0(this.signingKey.publicKey);Li(this,{address:s})}get signingKey(){return oe(this,Rh)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(r){return new k3(oe(this,Rh),r)}async signTransaction(r){r=uJ(r);const{to:i,from:s}=await LR({to:r.to?wm(r.to,this):void 0,from:r.from?wm(r.from,this):void 0});i!=null&&(r.to=i),s!=null&&(r.from=s),r.from!=null&&(ke(_s(r.from)===this.address,"transaction from address mismatch","tx.from",r.from),delete r.from);const o=ex.from(r);return o.signature=this.signingKey.sign(o.unsignedHash),o.serialized}async signMessage(r){return this.signMessageSync(r)}signMessageSync(r){return this.signingKey.sign(Lme(r)).serialized}authorizeSync(r){ke(typeof r.address=="string","invalid address for authorizeSync","auth.address",r);const i=this.signingKey.sign(jme(r));return Object.assign({},{address:_s(r.address),nonce:cn(r.nonce||0),chainId:cn(r.chainId||0)},{signature:i})}async authorize(r){return r=Object.assign({},r,{address:await wm(r.address,this)}),this.authorizeSync(await this.populateAuthorization(r))}async signTypedData(r,i,s){const o=await tx.resolveNames(r,i,s,async a=>{$t(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:a}});const l=await this.provider.resolveName(a);return $t(l!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:a}),l});return this.signingKey.sign(tx.hash(o.domain,i,o.value)).serialized}};Rh=new WeakMap;let QD=k3;const nx=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Wme=/^[a-z]*$/i;function Cj(n,e){let r=97;return n.reduce((i,s)=>(s===e?r++:s.match(Wme)?i.push(String.fromCharCode(r)+s):(r=97,i.push(s)),i),[])}function Hme(n,e){for(let s=nx.length-1;s>=0;s--)n=n.split(nx[s]).join(e.substring(2*s,2*s+2));const r=[],i=n.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(s,o,a,l)=>{if(a)for(let c=parseInt(a);c>=0;c--)r.push(";");else r.push(o.toLowerCase());return""});if(i)throw new Error(`leftovers: ${JSON.stringify(i)}`);return Cj(Cj(r,";"),":")}function Vme(n){return ke(n[0]==="0","unsupported auwl data","data",n),Hme(n.substring(1+2*nx.length),n.substring(1,1+2*nx.length))}class Yme{constructor(e){Te(this,"locale");Li(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var Ah,t0,Qc,n0,JD;class Gme extends Yme{constructor(r,i,s){super(r);Ge(this,n0);Ge(this,Ah);Ge(this,t0);Ge(this,Qc);Me(this,Ah,i),Me(this,t0,s),Me(this,Qc,null)}get _data(){return oe(this,Ah)}_decodeWords(){return Vme(oe(this,Ah))}getWord(r){const i=Dt(this,n0,JD).call(this);return ke(r>=0&&r<i.length,`invalid word index: ${r}`,"index",r),i[r]}getWordIndex(r){return Dt(this,n0,JD).call(this).indexOf(r)}}Ah=new WeakMap,t0=new WeakMap,Qc=new WeakMap,n0=new WeakSet,JD=function(){if(oe(this,Qc)==null){const r=this._decodeWords();if(ZR(r.join(`
`)+`
`)!==oe(this,t0))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);Me(this,Qc,r)}return oe(this,Qc)};const Kme="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",Xme="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let eS=null;class yu extends Gme{constructor(){super("en",Kme,Xme)}static wordlist(){return eS==null&&(eS=new yu),eS}}function hJ(n){return(1<<n)-1<<8-n&255}function Qme(n){return(1<<n)-1&255}function tS(n,e){rQ("NFKD"),e==null&&(e=yu.wordlist());const r=e.split(n);ke(r.length%3===0&&r.length>=12&&r.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const i=new Uint8Array(Math.ceil(11*r.length/8));let s=0;for(let u=0;u<r.length;u++){let h=e.getWordIndex(r[u].normalize("NFKD"));ke(h>=0,`invalid mnemonic word at index ${u}`,"mnemonic","[ REDACTED ]");for(let d=0;d<11;d++)h&1<<10-d&&(i[s>>3]|=1<<7-s%8),s++}const o=32*r.length/3,a=r.length/3,l=hJ(a),c=st(ws(i.slice(0,o/8)))[0]&l;return ke(c===(i[i.length-1]&l),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),Ze(i.slice(0,o/8))}function nS(n,e){ke(n.length%4===0&&n.length>=16&&n.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=yu.wordlist());const r=[0];let i=11;for(let a=0;a<n.length;a++)i>8?(r[r.length-1]<<=8,r[r.length-1]|=n[a],i-=8):(r[r.length-1]<<=i,r[r.length-1]|=n[a]>>8-i,r.push(n[a]&Qme(8-i)),i+=3);const s=n.length/4,o=parseInt(ws(n).substring(2,4),16)&hJ(s);return r[r.length-1]<<=s,r[r.length-1]|=o>>8-s,e.join(r.map(a=>e.getWord(a)))}const rS={};class kg{constructor(e,r,i,s,o){Te(this,"phrase");Te(this,"password");Te(this,"wordlist");Te(this,"entropy");s==null&&(s=""),o==null&&(o=yu.wordlist()),Ew(e,rS,"Mnemonic"),Li(this,{phrase:i,password:s,wordlist:o,entropy:r})}computeSeed(){const e=nu("mnemonic"+this.password,"NFKD");return h0(nu(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,r,i){const s=tS(e,i);return e=nS(st(s),i),new kg(rS,s,e,r,i)}static fromEntropy(e,r,i){const s=st(e,"entropy"),o=nS(s,i);return new kg(rS,Ze(s),o,r,i)}static entropyToPhrase(e,r){const i=st(e,"entropy");return nS(i,r)}static phraseToEntropy(e,r){return tS(e,r)}static isValidMnemonic(e,r){try{return tS(e,r),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var pr=function(n,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(n):i?i.value:e.get(n)},iS=function(n,e,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(n,r):s?s.value=r:e.set(n,r),r},ry,Zi,ao;const Jme={16:10,24:12,32:14},Zme=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Ki=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Wv=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],ege=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],tge=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],nge=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],rge=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],ige=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],sge=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],oge=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],age=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],lge=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],cge=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],uge=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],dge=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function sS(n){const e=[];for(let r=0;r<n.length;r+=4)e.push(n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]);return e}class eA{get key(){return pr(this,ry,"f").slice()}constructor(e){if(ry.set(this,void 0),Zi.set(this,void 0),ao.set(this,void 0),!(this instanceof eA))throw Error("AES must be instanitated with `new`");iS(this,ry,new Uint8Array(e),"f");const r=Jme[this.key.length];if(r==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");iS(this,ao,[],"f"),iS(this,Zi,[],"f");for(let h=0;h<=r;h++)pr(this,ao,"f").push([0,0,0,0]),pr(this,Zi,"f").push([0,0,0,0]);const i=(r+1)*4,s=this.key.length/4,o=sS(this.key);let a;for(let h=0;h<s;h++)a=h>>2,pr(this,ao,"f")[a][h%4]=o[h],pr(this,Zi,"f")[r-a][h%4]=o[h];let l=0,c=s,u;for(;c<i;){if(u=o[s-1],o[0]^=Ki[u>>16&255]<<24^Ki[u>>8&255]<<16^Ki[u&255]<<8^Ki[u>>24&255]^Zme[l]<<24,l+=1,s!=8)for(let p=1;p<s;p++)o[p]^=o[p-1];else{for(let p=1;p<s/2;p++)o[p]^=o[p-1];u=o[s/2-1],o[s/2]^=Ki[u&255]^Ki[u>>8&255]<<8^Ki[u>>16&255]<<16^Ki[u>>24&255]<<24;for(let p=s/2+1;p<s;p++)o[p]^=o[p-1]}let h=0,d,f;for(;h<s&&c<i;)d=c>>2,f=c%4,pr(this,ao,"f")[d][f]=o[h],pr(this,Zi,"f")[r-d][f]=o[h++],c++}for(let h=1;h<r;h++)for(let d=0;d<4;d++)u=pr(this,Zi,"f")[h][d],pr(this,Zi,"f")[h][d]=lge[u>>24&255]^cge[u>>16&255]^uge[u>>8&255]^dge[u&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const r=pr(this,ao,"f").length-1,i=[0,0,0,0];let s=sS(e);for(let l=0;l<4;l++)s[l]^=pr(this,ao,"f")[0][l];for(let l=1;l<r;l++){for(let c=0;c<4;c++)i[c]=ege[s[c]>>24&255]^tge[s[(c+1)%4]>>16&255]^nge[s[(c+2)%4]>>8&255]^rge[s[(c+3)%4]&255]^pr(this,ao,"f")[l][c];s=i.slice()}const o=new Uint8Array(16);let a=0;for(let l=0;l<4;l++)a=pr(this,ao,"f")[r][l],o[4*l]=(Ki[s[l]>>24&255]^a>>24)&255,o[4*l+1]=(Ki[s[(l+1)%4]>>16&255]^a>>16)&255,o[4*l+2]=(Ki[s[(l+2)%4]>>8&255]^a>>8)&255,o[4*l+3]=(Ki[s[(l+3)%4]&255]^a)&255;return o}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const r=pr(this,Zi,"f").length-1,i=[0,0,0,0];let s=sS(e);for(let l=0;l<4;l++)s[l]^=pr(this,Zi,"f")[0][l];for(let l=1;l<r;l++){for(let c=0;c<4;c++)i[c]=ige[s[c]>>24&255]^sge[s[(c+3)%4]>>16&255]^oge[s[(c+2)%4]>>8&255]^age[s[(c+1)%4]&255]^pr(this,Zi,"f")[l][c];s=i.slice()}const o=new Uint8Array(16);let a=0;for(let l=0;l<4;l++)a=pr(this,Zi,"f")[r][l],o[4*l]=(Wv[s[l]>>24&255]^a>>24)&255,o[4*l+1]=(Wv[s[(l+3)%4]>>16&255]^a>>16)&255,o[4*l+2]=(Wv[s[(l+2)%4]>>8&255]^a>>8)&255,o[4*l+3]=(Wv[s[(l+1)%4]&255]^a)&255;return o}}ry=new WeakMap,Zi=new WeakMap,ao=new WeakMap;class hge{constructor(e,r,i){if(i&&!(this instanceof i))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new eA(r)},name:{enumerable:!0,value:e}})}}var ld=function(n,e,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(n,r):s?s.value=r:e.set(n,r),r},Xi=function(n,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(n):i?i.value:e.get(n)},Kp,_c,es;class rx extends hge{constructor(e,r){super("CTR",e,rx),Kp.set(this,void 0),_c.set(this,void 0),es.set(this,void 0),ld(this,es,new Uint8Array(16),"f"),Xi(this,es,"f").fill(0),ld(this,Kp,Xi(this,es,"f"),"f"),ld(this,_c,16,"f"),r==null&&(r=1),typeof r=="number"?this.setCounterValue(r):this.setCounterBytes(r)}get counter(){return new Uint8Array(Xi(this,es,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let r=15;r>=0;--r)Xi(this,es,"f")[r]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Xi(this,es,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(Xi(this,es,"f")[e]===255)Xi(this,es,"f")[e]=0;else{Xi(this,es,"f")[e]++;break}}encrypt(e){var r,i;const s=new Uint8Array(e);for(let o=0;o<s.length;o++)Xi(this,_c,"f")===16&&(ld(this,Kp,this.aes.encrypt(Xi(this,es,"f")),"f"),ld(this,_c,0,"f"),this.increment()),s[o]^=Xi(this,Kp,"f")[ld(this,_c,(i=Xi(this,_c,"f"),r=i++,i),"f"),r];return s}decrypt(e){return this.encrypt(e)}}Kp=new WeakMap,_c=new WeakMap,es=new WeakMap;function pp(n,e){for(n=String(n);n.length<e;)n="0"+n;return n}function fJ(n){return typeof n=="string"?nu(n,"NFKC"):wd(n)}const fge="m/44'/60'/0'/0/0";function pJ(n){const e=n.salt!=null?st(n.salt,"options.salt"):wa(32);let r=1<<17,i=8,s=1;return n.scrypt&&(n.scrypt.N&&(r=n.scrypt.N),n.scrypt.r&&(i=n.scrypt.r),n.scrypt.p&&(s=n.scrypt.p)),ke(typeof r=="number"&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r),ke(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt r parameter","options.r",i),ke(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt p parameter","options.p",s),{name:"scrypt",dkLen:32,salt:e,N:r,r:i,p:s}}function mJ(n,e,r,i){const s=st(r.privateKey,"privateKey"),o=i.iv!=null?st(i.iv,"options.iv"):wa(16);ke(o.length===16,"invalid options.iv length","options.iv",i.iv);const a=i.uuid!=null?st(i.uuid,"options.uuid"):wa(16);ke(a.length===16,"invalid options.uuid length","options.uuid",i.iv);const l=n.slice(0,16),c=n.slice(16,32),u=new rx(l,o),h=st(u.encrypt(s)),d=lr(Vn([c,h])),f={address:r.address.substring(2).toLowerCase(),id:Sfe(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Ze(o).substring(2)},ciphertext:Ze(h).substring(2),kdf:"scrypt",kdfparams:{salt:Ze(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:d.substring(2)}};if(r.mnemonic){const p=i.client!=null?i.client:`ethers/${nQ}`,g=r.mnemonic.path||fge,b=r.mnemonic.locale||"en",y=n.slice(32,64),v=st(r.mnemonic.entropy,"account.mnemonic.entropy"),w=wa(16),k=new rx(y,w),_=st(k.encrypt(v)),S=new Date,E="UTC--"+(S.getUTCFullYear()+"-"+pp(S.getUTCMonth()+1,2)+"-"+pp(S.getUTCDate(),2)+"T"+pp(S.getUTCHours(),2)+"-"+pp(S.getUTCMinutes(),2)+"-"+pp(S.getUTCSeconds(),2)+".0Z")+"--"+f.address;f["x-ethers"]={client:p,gethFilename:E,path:g,locale:b,mnemonicCounter:Ze(w).substring(2),mnemonicCiphertext:Ze(_).substring(2),version:"0.1"}}return JSON.stringify(f)}function pge(n,e,r){r==null&&(r={});const i=fJ(e),s=pJ(r),o=p0(i,s.salt,s.N,s.r,s.p,64);return mJ(st(o),s,n,r)}async function mge(n,e,r){r==null&&(r={});const i=fJ(e),s=pJ(r),o=await f0(i,s.salt,s.N,s.r,s.p,64,r.progressCallback);return mJ(st(o),s,n,r)}const oS="m/44'/60'/0'/0/0",gge=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),Fl=2147483648,vge=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),bge="0123456789abcdef";function ix(n,e){let r="";for(;n;)r=bge[n%16]+r,n=Math.trunc(n/16);for(;r.length<e*2;)r="0"+r;return"0x"+r}function ZD(n){const e=st(n),r=FR(ws(ws(e)),0,4),i=Vn([e,r]);return xfe(i)}const po={};function gJ(n,e,r,i){const s=new Uint8Array(37);n&Fl?($t(i!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set(st(i),1)):s.set(st(r));for(let a=24;a>=0;a-=8)s[33+(a>>3)]=n>>24-a&255;const o=st(Cf("sha512",e,s));return{IL:o.slice(0,32),IR:o.slice(32)}}function vJ(n,e){const r=e.split("/");ke(r.length>0,"invalid path","path",e),r[0]==="m"&&(ke(n.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${n.depth}`,"path",e),r.shift());let i=n;for(let s=0;s<r.length;s++){const o=r[s];if(o.match(/^[0-9]+'$/)){const a=parseInt(o.substring(0,o.length-1));ke(a<Fl,"invalid path index",`path[${s}]`,o),i=i.deriveChild(Fl+a)}else if(o.match(/^[0-9]+$/)){const a=parseInt(o);ke(a<Fl,"invalid path index",`path[${s}]`,o),i=i.deriveChild(a)}else ke(!1,"invalid path component",`path[${s}]`,o)}return i}var r0,eO,Jc,Xp;const Ds=class Ds extends QD{constructor(r,i,s,o,a,l,c,u,h){super(i,h);Ge(this,r0);Te(this,"publicKey");Te(this,"fingerprint");Te(this,"parentFingerprint");Te(this,"mnemonic");Te(this,"chainCode");Te(this,"path");Te(this,"index");Te(this,"depth");Ew(r,po,"HDNodeWallet"),Li(this,{publicKey:i.compressedPublicKey});const d=FR(Ef(ws(this.publicKey)),0,4);Li(this,{parentFingerprint:s,fingerprint:d,chainCode:o,path:a,index:l,depth:c}),Li(this,{mnemonic:u})}connect(r){return new Ds(po,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,r)}async encrypt(r,i){return await mge(Dt(this,r0,eO).call(this),r,{progressCallback:i})}encryptSync(r){return pge(Dt(this,r0,eO).call(this),r)}get extendedKey(){return $t(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),ZD(Vn(["0x0488ADE4",ix(this.depth,1),this.parentFingerprint,ix(this.index,4),this.chainCode,Vn(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new Cg(po,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(r){const i=Fi(r,"index");ke(i<=4294967295,"invalid index","index",i);let s=this.path;s&&(s+="/"+(i&~Fl),i&Fl&&(s+="'"));const{IR:o,IL:a}=gJ(i,this.chainCode,this.publicKey,this.privateKey),l=new To(Vh((sQ(a)+BigInt(this.privateKey))%vge,32));return new Ds(po,l,this.fingerprint,Ze(o),s,i,this.depth+1,this.mnemonic,this.provider)}derivePath(r){return vJ(this,r)}static fromExtendedKey(r){const i=Wn(wfe(r));ke(i.length===82||ZD(i.slice(0,78))===r,"invalid extended key","extendedKey","[ REDACTED ]");const s=i[4],o=Ze(i.slice(5,9)),a=parseInt(Ze(i.slice(9,13)).substring(2),16),l=Ze(i.slice(13,45)),c=i.slice(45,78);switch(Ze(i.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const u=Ze(c);return new Cg(po,g0(u),u,o,l,null,a,s,null)}case"0x0488ade4":case"0x04358394 ":if(c[0]!==0)break;return new Ds(po,new To(c.slice(1)),o,l,null,a,s,null,null)}ke(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(r,i,s){var a;r==null&&(r=""),i==null&&(i=oS),s==null&&(s=yu.wordlist());const o=kg.fromEntropy(wa(16),r,s);return Dt(a=Ds,Jc,Xp).call(a,o.computeSeed(),o).derivePath(i)}static fromMnemonic(r,i){var s;return i||(i=oS),Dt(s=Ds,Jc,Xp).call(s,r.computeSeed(),r).derivePath(i)}static fromPhrase(r,i,s,o){var l;i==null&&(i=""),s==null&&(s=oS),o==null&&(o=yu.wordlist());const a=kg.fromPhrase(r,i,o);return Dt(l=Ds,Jc,Xp).call(l,a.computeSeed(),a).derivePath(s)}static fromSeed(r){var i;return Dt(i=Ds,Jc,Xp).call(i,r,null)}};r0=new WeakSet,eO=function(){const r={address:this.address,privateKey:this.privateKey},i=this.mnemonic;return this.path&&i&&i.wordlist.locale==="en"&&i.password===""&&(r.mnemonic={path:this.path,locale:"en",entropy:i.entropy}),r},Jc=new WeakSet,Xp=function(r,i){ke(Tw(r),"invalid seed","seed","[REDACTED]");const s=st(r,"seed");ke(s.length>=16&&s.length<=64,"invalid seed","seed","[REDACTED]");const o=st(Cf("sha512",gge,s)),a=new To(Ze(o.slice(0,32)));return new Ds(po,a,"0x00000000",Ze(o.slice(32)),"m",0,0,i,null)},Ge(Ds,Jc);let Jh=Ds;class Cg extends XD{constructor(r,i,s,o,a,l,c,u,h){super(i,h);Te(this,"publicKey");Te(this,"fingerprint");Te(this,"parentFingerprint");Te(this,"chainCode");Te(this,"path");Te(this,"index");Te(this,"depth");Ew(r,po,"HDNodeVoidWallet"),Li(this,{publicKey:s});const d=FR(Ef(ws(s)),0,4);Li(this,{publicKey:s,fingerprint:d,parentFingerprint:o,chainCode:a,path:l,index:c,depth:u})}connect(r){return new Cg(po,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,r)}get extendedKey(){return $t(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),ZD(Vn(["0x0488B21E",ix(this.depth,1),this.parentFingerprint,ix(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(r){const i=Fi(r,"index");ke(i<=4294967295,"invalid index","index",i);let s=this.path;s&&(s+="/"+(i&~Fl),i&Fl&&(s+="'"));const{IR:o,IL:a}=gJ(i,this.chainCode,this.publicKey,null),l=To.addPoints(a,this.publicKey,!0),c=g0(l);return new Cg(po,c,l,this.fingerprint,Ze(o),s,i,this.depth+1,this.provider)}derivePath(r){return vJ(this,r)}}class Ej{constructor(e){Te(this,"mnemonic");Te(this,"walletAddress");Te(this,"chainID");this.mnemonic=e.mnemonic,this.walletAddress=e.walletAddress,this.chainID=e.chainID||10900}generateTxID(){const e=Date.now(),r=Math.floor(Math.random()*1e6);return`tx-${e}-${r}`}async getPrivateKeyHex(){const e=Jh.fromPhrase(this.mnemonic.trim(),"","m/44'/60'/0'/0/0");if(e.address.toLowerCase()!==this.walletAddress.toLowerCase())throw new Error(`Address mismatch: derived ${e.address} does not match ${this.walletAddress}`);const r=BigInt(e.privateKey),i=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(r===0n||r>=i)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const o=r.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(o))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return o}async signPayload(e){const r=await this.getPrivateKeyHex(),i=Math.floor(Date.now()/1e3);let s;e.deadline&&(s=parseInt(e.deadline,10));const o={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:i,payload:e};s!==void 0&&(o.deadline=s);const a=await vt.generateSingleSignature(JSON.stringify(o),r,this.walletAddress.toLowerCase());if(!a.success||!a.signature)throw new Error(a.error||"Failed to generate signature");return a.signature}async buildCompleteMessage(e,r,i=3600){const o=Math.floor(Date.now()/1e3)+i,a=await r.getNextNonce();return{...e,owner:this.walletAddress,nonce:a,deadline:o.toString()}}buildEIP712Tx(e,r,i){const s=Math.floor(Date.now()/1e3);let o;e.deadline&&(o=parseInt(e.deadline,10));const a={txId:i||this.generateTxID(),sigType:1,threshold:1,timestamp:s,payload:e,signatures:[{signer:this.walletAddress,signature:r}]};return o!==void 0&&(a.deadline=o),a}getWalletAddress(){return this.walletAddress}getChainID(){return this.chainID}}const Lw="sys::onboard",tA="clob::change_margin_ratio",nA="clob::submit_order",sx="clob::cancel_order",ox="bucket::close_position",rA="clob::modify_order",iA="clob::change_leverage",sA="clob::inter_transfer",bJ="clob::create_margin_bucket",oA="clob::swap",aA="bank::mint",lA="bank::extract_to_bucket",cA="bank::withdraw_from_bucket",uA="bank::bucket_transfer",dA="bank::transfer";var Pt=(n=>(n.Disconnected="disconnected",n.Connecting="connecting",n.Connected="connected",n.Reconnecting="reconnecting",n))(Pt||{});function hA(n,e){const r=n.bucket_id||"---",i=Jy(n.unrealized_profit),s=Jy(n.unrealized_loss),o=i-s,a=e(o.toString()),l=jt(n.unrealized_profit),c=jt(n.unrealized_loss),u=V4(n.max_leverage);return{bucketId:r,address:n.address||"",marginType:n.margin_type||"cross",collateralAsset:n.collateral_asset||"",depositedMargin:jt(n.deposited_margin),totalEquity:jt(n.total_equity),availableMargin:jt(n.available_margin),usedMargin:jt(n.used_margin),unrealizedProfit:l,unrealizedLoss:c,realizedProfit:jt(n.realized_profit),realizedLoss:jt(n.realized_loss),unrealizedPnL:a,marginRatio:jt(n.margin_ratio),imr:V4(n.imr),totalNotionalValue:jt(n.total_notional_value),riskLevel:n.risk_level||"",maxLeverage:u,correlationOffset:n.correlation_offset||0,status:n.status||"",createdAt:n.created_at||"",updatedAt:n.updated_at||"",leverage:u,marginMode:n.margin_type||"cross"}}function iy(n){return n.totalEquity>0?Math.min(Math.max(n.usedMargin/n.totalEquity,0),1):0}function sy(n){const e=n.marginMode||n.marginType||"cross";return e==="ISOLATED"||e==="Isolated"||e==="ISOLATE"||e==="isolated"?"Isolated":"Cross"}function _d(n){return n!==null&&typeof n=="object"&&typeof n.price=="number"&&typeof n.market_id=="string"&&typeof n.quantity=="number"&&typeof n.timestamp=="number"&&typeof n.is_buyer_maker=="boolean"&&typeof n.trade_id=="string"}function oy(n){return n!==null&&typeof n=="object"&&typeof n.symbol=="string"&&typeof n.mark_price=="number"&&typeof n.timestamp=="number"}class Zl{constructor(e){Te(this,"httpClient");Te(this,"infoClient");Te(this,"nonceManager");Te(this,"mnemonic");Te(this,"chainID");Te(this,"walletAddress");Te(this,"nonceCounter",null);Te(this,"signatureBuilder");this.httpClient=new Cw(e.baseURL,e.maxRetries||3),this.infoClient=new ar({baseURL:e.baseURL}),this.nonceManager=new NR(this.infoClient),this.mnemonic=e.mnemonic,this.chainID=e.chainID||10900}getSignatureBuilder(){if(!this.signatureBuilder){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");this.signatureBuilder=new Ej({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}return this.signatureBuilder}getNonceProvider(){return{getNextNonce:()=>this.getNextNonce()}}async initialize(){await vt.initialize();const e=await vt.generateAddress(this.mnemonic,0);if(!e.success||!e.address)throw new Error(`Failed to generate wallet address: ${e.error}`);this.walletAddress=e.address,this.signatureBuilder=new Ej({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}getWalletAddress(){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");return this.walletAddress}async refreshNonceFromServer(){const e=this.getWalletAddress(),r=await this.nonceManager.getExpectedNextNonce(e,!1);this.nonceCounter=r.next_nonce,console.log("[ExchangeClient] Refreshed nonce from server",{walletAddress:e,newNonce:this.nonceCounter})}async getNextNonce(){return this.nonceCounter===null&&await this.refreshNonceFromServer(),this.nonceCounter++,this.nonceCounter.toString()}buildOrderPayload(e){const r=Ht(e.price),i=Ht(e.quantity),s={action:nA,marketId:e.marketId,side:e.side.toUpperCase(),orderType:e.orderType.toUpperCase(),price:r,quantity:i};return e.leverage&&(s.leverage=e.leverage),e.takeProfit&&(s.takeProfit=e.takeProfit),e.stopLoss&&(s.stopLoss=e.stopLoss),s}async placeOrder(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.side||e.side.toUpperCase()!=="BUY"&&e.side.toUpperCase()!=="SELL")throw new Error("side must be BUY or SELL");if(!e.orderType||e.orderType.toUpperCase()!=="LIMIT"&&e.orderType.toUpperCase()!=="MARKET")throw new Error("orderType must be LIMIT or MARKET");if(!e.price||e.price<=0)throw new Error("price must be positive");if(!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");this.walletAddress||await this.initialize();const r=this.buildOrderPayload(e),i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=Math.floor(Date.now()/1e3)-5,l=`order-${Date.now()}-${Math.floor(Math.random()*1e6)}`,c=e.side.toUpperCase()==="BUY",u={address:this.getWalletAddress(),asset_pair:e.marketId,market_id:e.marketId,price:s.price,size:s.quantity,is_buy:c,order_type:e.orderType.toUpperCase(),timestamp:a,client_order_id:l,nonce:s.nonce,deadline:s.deadline,signature:o,time_in_force:e.timeInForce||"GTC"};return e.leverage&&(u.leverage=e.leverage),e.takeProfit&&(u.take_profit=e.takeProfit),e.stopLoss&&(u.stop_loss=e.stopLoss),e.postOnly&&(u.post_only=!0),e.hidden&&(u.hidden=!0),e.displayQuantity&&(u.display_quantity=e.displayQuantity),e.reduceOnly&&(u.reduce_only=!0),(await this.httpClient.post("/clob/v1/order",u)).body}async cancelOrder(e){var u,h,d,f,p,g;if(!e.orderId||e.orderId==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: orderId is empty",e),new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: marketId is empty",e),new Error("marketId cannot be empty");console.log("[ExchangeClient.cancelOrder] Input validation passed",{orderId:e.orderId,marketId:e.marketId}),this.walletAddress?console.log("[ExchangeClient.cancelOrder] Using existing wallet",{walletAddress:this.walletAddress}):(console.log("[ExchangeClient.cancelOrder] Wallet not initialized, initializing now..."),await this.initialize(),console.log("[ExchangeClient.cancelOrder] Wallet initialized",{walletAddress:this.walletAddress}));const r=this.getWalletAddress(),i={action:sx,orderId:e.orderId,marketId:e.marketId,address:r};console.log("[ExchangeClient.cancelOrder] Payload built",{payload:i,action:sx});const s=this.getSignatureBuilder(),o=await s.buildCompleteMessage(i,this.getNonceProvider());console.log("[ExchangeClient.cancelOrder] Complete message built",{action:o.action,orderId:o.orderId,marketId:o.marketId,address:o.address,owner:o.owner,nonce:o.nonce,deadline:o.deadline,hasAllFields:!!(o.action&&o.orderId&&o.marketId&&o.owner&&o.nonce&&o.deadline)}),console.log("[ExchangeClient.cancelOrder] Generating signature...");const a=await s.signPayload(o);console.log("[ExchangeClient.cancelOrder] Signature generated",{signatureLength:a==null?void 0:a.length,signaturePrefix:(a==null?void 0:a.substring(0,10))+"..."});const l=s.buildEIP712Tx(o,a);console.log("[ExchangeClient.cancelOrder] EIP712Tx built",{eip712Tx:{txId:l.txId,sigType:l.sigType,threshold:l.threshold,timestamp:l.timestamp,deadline:l.deadline,payloadAction:(u=l.payload)==null?void 0:u.action,payloadOrderId:(h=l.payload)==null?void 0:h.orderId,payloadMarketId:(d=l.payload)==null?void 0:d.marketId,signaturesCount:(f=l.signatures)==null?void 0:f.length,signer:(g=(p=l.signatures)==null?void 0:p[0])==null?void 0:g.signer}});const c=this.httpClient.getBaseURL?this.httpClient.getBaseURL():"unknown";console.log("[ExchangeClient.cancelOrder] Submitting to /router/v1/tx endpoint...",{endpoint:"/router/v1/tx",baseURL:c,fullURL:`${c}/router/v1/tx`});try{const b=await this.httpClient.post("/router/v1/tx",l);return console.log("[ExchangeClient.cancelOrder] API response received",{status:b.statusCode,hasBody:!!b.body,responseBody:b.body,orderId:e.orderId}),b.body}catch(b){if(jR(b)){console.log("[ExchangeClient.cancelOrder] Nonce error detected, refreshing nonce from server",{error:b instanceof Error?b.message:String(b),orderId:e.orderId}),await this.refreshNonceFromServer();const y=this.getSignatureBuilder(),v=await y.buildCompleteMessage(i,this.getNonceProvider()),w=await y.signPayload(v),k=y.buildEIP712Tx(v,w);console.log("[ExchangeClient.cancelOrder] Retrying with refreshed nonce",{newNonce:v.nonce});const _=await this.httpClient.post("/router/v1/tx",k);return console.log("[ExchangeClient.cancelOrder] Retry successful",{status:_.statusCode,responseBody:_.body}),_.body}throw console.error("[ExchangeClient.cancelOrder] API call failed",{error:b,errorMessage:b instanceof Error?b.message:String(b),errorStack:b instanceof Error?b.stack:void 0,orderId:e.orderId,marketId:e.marketId,walletAddress:this.walletAddress}),b}}async modifyOrder(e){if(!e.orderId||e.orderId==="")throw new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.newPrice||e.newPrice<=0)throw new Error("newPrice must be positive");if(!e.newQuantity||e.newQuantity<=0)throw new Error("newQuantity must be positive");this.walletAddress||await this.initialize();const r={action:rA,orderId:e.orderId,marketId:e.marketId,newPrice:Ht(e.newPrice),newQuantity:Ht(e.newQuantity)},i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=i.buildEIP712Tx(s,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async changeLeverage(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newLeverage===void 0)throw new Error("newLeverage must be provided");this.walletAddress||await this.initialize();const r={action:iA,marketId:e.marketId,newLeverage:Ht(e.newLeverage),address:this.getWalletAddress()};e.leverageType&&(r.leverageType=e.leverageType),e.bucketId&&(r.bucketId=e.bucketId),e.reason&&(r.reason=e.reason);const i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=i.buildEIP712Tx(s,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async closePosition(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=Math.floor(Date.now()/1e3),s=i+300,o=await this.getNextNonce();let a;if(e.marketPrice&&e.marketPrice>0)a=e.marketPrice;else try{const g=await this.infoClient.getMarketStats(e.marketId);if(!g||!g.last_price)throw new Error("marketPrice is required and could not be fetched from ticker");a=it(g.last_price)}catch(g){throw new Error(`Failed to fetch market price: ${g instanceof Error?g.message:String(g)}`)}const l=Ht(a).toString(),c=e.quantity&&e.quantity>0?Ht(e.quantity).toString():"0",u={action:ox,address:r,marketId:e.marketId,closeSize:c,marketPrice:l,nonce:o,deadline:s},d=await this.getSignatureBuilder().signPayload(u),f={address:r,market_id:e.marketId,close_size:c,market_price:l,timestamp:i,sign_type:1,nonce:o.toString(),chain_id:this.chainID.toString(),deadline:s.toString(),signature:d};return(await this.httpClient.post("/bucket/v1/position/close",f)).body}async closePositionEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(this.walletAddress||await this.initialize(),!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");if(!e.marketPrice||e.marketPrice<=0)throw new Error("marketPrice must be positive");const r=Ht(e.quantity),i=Ht(e.marketPrice),s={action:ox,address:this.getWalletAddress(),marketId:e.marketId,closeSize:r,marketPrice:i},o=this.getSignatureBuilder(),a=await o.buildCompleteMessage(s,this.getNonceProvider()),l=await o.signPayload(a),c=o.buildEIP712Tx(a,l);return(await this.httpClient.post("/router/v1/tx",c)).body}async swap(e){if(!e.fromToken||e.fromToken==="")throw new Error("fromToken cannot be empty");if(!e.toToken||e.toToken==="")throw new Error("toToken cannot be empty");if(!e.amountIn||e.amountIn<=0)throw new Error("amountIn must be positive");if(!e.minAmountOut||e.minAmountOut<=0)throw new Error("minAmountOut must be positive");this.walletAddress||await this.initialize();const r={action:oA,fromToken:e.fromToken,toToken:e.toToken,amountIn:Ht(e.amountIn),minAmountOut:Ht(e.minAmountOut)};e.path&&e.path.length>0&&(r.path=e.path);const i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=i.buildEIP712Tx(s,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async changeMarginRatioEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const r={action:tA,marketId:e.marketId,address:this.getWalletAddress()};e.bucketId&&(r.bucketId=e.bucketId);const i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=i.buildEIP712Tx(s,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async internTransferEIP712Tx(e){if(!e.fromAccount||e.fromAccount==="")throw new Error("fromAccount cannot be empty");if(!e.toAccount||e.toAccount==="")throw new Error("toAccount cannot be empty");if(!e.tokenAddress||e.tokenAddress==="")throw new Error("tokenAddress cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r={action:sA,fromAccount:e.fromAccount,toAccount:e.toAccount,amount:Ht(e.amount),tokenAddress:e.tokenAddress,address:this.getWalletAddress()},i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=i.buildEIP712Tx(s,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async bucketTransfer(e){if(!e.fromBucketId||e.fromBucketId.trim()==="")throw new Error("fromBucketId cannot be empty");if(!e.toBucketId||e.toBucketId.trim()==="")throw new Error("toBucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=Ht(e.amount),s={action:uA,fromBucketId:e.fromBucketId,toBucketId:e.toBucketId,asset:e.assetId,amount:i},o=this.getSignatureBuilder(),a=await o.buildCompleteMessage(s,this.getNonceProvider()),l=await o.signPayload(a),c=Math.floor(Date.now()/1e3),u={address:r,source_bucket_id:e.fromBucketId,target_bucket_id:e.toBucketId,amount:i,reason:"sdk_transfer",timestamp:c,nonce:a.nonce,deadline:a.deadline,signature:l,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bucket/v1/bucket/transfer",u)).body}async extractToBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=Ht(e.amount),s={action:lA,bucketId:e.bucketId,asset:e.assetId,amount:i},o=this.getSignatureBuilder(),a=await o.buildCompleteMessage(s,this.getNonceProvider()),l=await o.signPayload(a),c=Math.floor(Date.now()/1e3),u={address:r,bucket_id:e.bucketId,asset:e.assetId,amount:i,timestamp:c,nonce:a.nonce,deadline:a.deadline,signature:l,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/extract-to-bucket",u)).body}async createBucket(e){if(!e.bucketType||e.bucketType.trim()==="")throw new Error("bucketType cannot be empty");if(!e.marginType||e.marginType.trim()==="")throw new Error("marginType cannot be empty");const r=e.marginType.toUpperCase();if(r!=="CROSS"&&r!=="ISOLATED")throw new Error("marginType must be 'cross' or 'isolated'");this.walletAddress||await this.initialize();const i=this.getWalletAddress(),s=Math.floor(Date.now()/1e3),o={action:bJ,bucketType:e.bucketType,marginType:r.toLowerCase()},a=this.getSignatureBuilder(),l=await a.buildCompleteMessage(o,this.getNonceProvider(),300),c=await a.signPayload(l),u={address:i,bucket_type:e.bucketType,margin_type:r.toLowerCase(),timestamp:s,sign_type:1,nonce:l.nonce,chain_id:this.chainID.toString(),deadline:l.deadline,signature:c};return(await this.httpClient.post("/bucket/v1/bucket",u)).body}async withdrawFromBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=Ht(e.amount),s={action:cA,bucketId:e.bucketId,asset:e.assetId,amount:i},o=this.getSignatureBuilder(),a=await o.buildCompleteMessage(s,this.getNonceProvider()),l=await o.signPayload(a),c=Math.floor(Date.now()/1e3),u={address:r,bucket_id:e.bucketId,asset:e.assetId,amount:i,timestamp:c,nonce:a.nonce,deadline:a.deadline,signature:l,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/withdraw-from-bucket",u)).body}async bankMint(e){if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=Ht(e.amount),i={action:aA,asset:e.assetId,amount:r},s=this.getSignatureBuilder(),o=await s.buildCompleteMessage(i,this.getNonceProvider()),a=await s.signPayload(o),l=s.buildEIP712Tx(o,a);return(await this.httpClient.post("/router/v1/tx",l)).body}async bankTransfer(e){if(!e.to||e.to.trim()==="")throw new Error("to address cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=Ht(e.amount),i={action:dA,to:e.to,asset:e.assetId,amount:r},s=this.getSignatureBuilder(),o=await s.buildCompleteMessage(i,this.getNonceProvider()),a=await s.signPayload(o),l=s.buildEIP712Tx(o,a);return(await this.httpClient.post("/router/v1/tx",l)).body}}class fA{constructor(e){Te(this,"ws",null);Te(this,"state",Pt.Disconnected);Te(this,"handlers",new Map);Te(this,"reconnectTimer",null);Te(this,"reconnectAttempts",0);Te(this,"config");Te(this,"originalConfig");Te(this,"pingInterval",null);Te(this,"stateChangeHandlers",new Set);Te(this,"authState","not_required");Te(this,"authPromise",null);Te(this,"pendingSubscriptions",new Map);Te(this,"eip712TypedData",null);this.originalConfig=e;const r=this.convertHTTPToWebSocketURL(e.url);this.config={url:r,authToken:e.authToken||"",walletAddress:e.walletAddress||"",deviceID:e.deviceID||"",reconnectInterval:e.reconnectInterval||5e3,maxReconnectAttempts:e.maxReconnectAttempts||10}}convertHTTPToWebSocketURL(e){if(e.startsWith("ws://")||e.startsWith("wss://")){if(e.includes("router.morpheum.io")){const r=new URL(e);if(!r.pathname||r.pathname==="/")return r.pathname="/websocket",r.toString()}return e}if(e.includes("localhost")||e.includes("127.0.0.1")){const r=e.match(/:(\d+)/);return`ws://localhost:${r?r[1]:"8080"}/websocket`}if(e.startsWith("http://")){const r=e.replace("http://","ws://");return r.includes("/websocket")?r:r.endsWith("/")?`${r}websocket`:`${r}/websocket`}if(e.startsWith("https://")){const r=e.replace("https://","wss://");return r.includes("/websocket")?r:r.endsWith("/")?`${r}websocket`:`${r}/websocket`}if(!e||e.trim()===""||e.includes("router.morpheum.io"))return"wss://router.morpheum.io/websocket";try{const r=new URL(e.startsWith("http")?e:`https://${e}`),i=r.protocol==="https:"?"wss:":"ws:",s=r.pathname&&r.pathname!=="/"?r.pathname:"",o=s.endsWith("/websocket")?s:`${s}/websocket`;return`${i}//${r.host}${o}`}catch{return console.warn(`Failed to parse URL ${e}, defaulting to router.morpheum.io/websocket`),"wss://router.morpheum.io/websocket"}}getConnectionURL(){const e=[];this.config.authToken&&e.push(`token=${encodeURIComponent(this.config.authToken)}`),"walletAddress"in this.originalConfig&&this.originalConfig.walletAddress!==void 0&&e.push(`wallet=${encodeURIComponent(this.originalConfig.walletAddress||"")}`),this.config.deviceID&&e.push(`device_id=${encodeURIComponent(this.config.deviceID)}`);const r=this.config.url.includes("?")?"&":"?";return e.length>0?`${this.config.url}${r}${e.join("&")}`:this.config.url}async connect(){if(!(this.state===Pt.Connected||this.state===Pt.Connecting))return this.setState(Pt.Connecting),new Promise((e,r)=>{let i=!1,s=!1,o=null;const a=l=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),this.setState(Pt.Disconnected),r(l))};try{const l=this.getConnectionURL();console.log("Connecting to WebSocket:",l);const c=new WebSocket(l);o=window.setTimeout(()=>{!i&&!s&&(c.close(),a(new Error(`WebSocket connection timeout after 10 seconds. Unable to connect to ${l}. Check if the server is running and accessible.`)))},1e4),c.onopen=async()=>{if(o!==null&&(clearTimeout(o),o=null),i=!0,this.ws=c,this.setState(Pt.Connected),this.reconnectAttempts=0,this.authState="not_required",this.config.authToken||this.config.walletAddress||this.eip712TypedData){this.authState="pending",this.authPromise=this.waitForAuthAcknowledgment();try{if(this.config.authToken)try{const h={action:"auth",token:this.config.authToken};this.config.deviceID&&(h.device_id=this.config.deviceID),c.send(JSON.stringify(h))}catch(h){console.warn("Failed to send token auth message:",h)}await Promise.race([this.authPromise,new Promise((h,d)=>setTimeout(()=>d(new Error("Auth acknowledgment timeout")),5e3))]),this.authState="authenticated",console.log("[WebSocketClient] Authentication successful")}catch(h){this.authState="failed",console.error("[WebSocketClient] Authentication failed:",h)}}this.startPing(),e()},c.onmessage=u=>{try{const h=JSON.parse(u.data);this.handleMessage(h)}catch(h){console.error("Failed to parse WebSocket message:",h)}},c.onerror=u=>{console.error("WebSocket error event:",u)},c.onclose=u=>{if(o!==null&&(clearTimeout(o),o=null),this.ws=null,this.stopPing(),this.authState="not_required",this.authPromise=null,!i&&!s){const h=u.code,d=u.reason||"Unknown reason",f=u.wasClean;let p=`WebSocket connection failed. Close code: ${h}`;h===1006?p=`WebSocket connection failed (abnormal closure, code ${h}). Unable to connect to ${l}. Possible causes: Server is not running, network issue, firewall blocking connection, or incorrect URL.`:h===1002?p=`WebSocket protocol error (code ${h}). The server may not support WebSocket protocol or there's a protocol mismatch.`:h===1003?p=`WebSocket unsupported data type (code ${h}).`:h===1008?p=`WebSocket connection closed due to policy violation (code ${h}): ${d}`:h===1011?p=`WebSocket server error (code ${h}): ${d}`:h===1e3?p=`WebSocket connection closed normally (code ${h}) but before opening.`:d&&d!=="Unknown reason"&&(p+=` Reason: ${d}`),!f&&h===1006&&(p+=" This usually indicates the connection was refused or the server is unreachable."),a(new Error(p))}else i&&(this.setState(Pt.Disconnected),this.scheduleReconnect())}}catch(l){o!==null&&(clearTimeout(o),o=null);const c=l instanceof Error?l.message:String(l);a(new Error(`Failed to create WebSocket connection: ${c}`))}})}disconnect(){this.cancelReconnect(),this.stopPing(),this.ws&&(this.ws.close(),this.ws=null),this.handlers.clear(),this.stateChangeHandlers.clear(),this.setState(Pt.Disconnected)}send(e){var r;if(this.state!==Pt.Connected||!this.ws)throw new Error("WebSocket not connected");try{this.ws.send(JSON.stringify(e))}catch(i){throw console.error("[WebSocketClient] Failed to send message:",i),((r=this.ws)==null?void 0:r.readyState)!==WebSocket.OPEN&&this.setState(Pt.Disconnected),i}}on(e,r){this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(r)}off(e,r){if(!r){this.handlers.delete(e);return}const i=this.handlers.get(e);if(i){const s=i.indexOf(r);s>-1&&i.splice(s,1)}}getState(){return this.state}isConnected(){return this.state===Pt.Connected}setState(e){const r=this.state;this.state=e,r!==e&&this.stateChangeHandlers.forEach(i=>{try{i(e)}catch(s){console.error("Error in state change handler:",s)}})}onStateChange(e){return this.stateChangeHandlers.add(e),()=>{this.stateChangeHandlers.delete(e)}}handleMessage(e){if(e.action==="ping"||e.type==="ping"){try{this.send({action:"pong"})}catch(o){console.error("[WebSocketClient] Failed to send pong:",o)}return}if(e.action==="auth"&&(e.status==="ok"||e.success===!0?this.authPromise:(e.error||e.status==="error")&&this.authPromise),e.type==="ack"&&typeof e.channel=="string"){const o=this.pendingSubscriptions.get(e.channel);o&&(clearTimeout(o.timeout),o.resolve(),this.pendingSubscriptions.delete(e.channel))}if(e.action==="subscribed"&&typeof e.channel=="string"){const o=this.pendingSubscriptions.get(e.channel);o&&(clearTimeout(o.timeout),o.resolve(),this.pendingSubscriptions.delete(e.channel))}e.is_stale===!0&&(console.warn("[WebSocketClient] Received stale data:",e),(this.handlers.get("stale")||[]).forEach(a=>{try{a(e)}catch(l){console.error("[WebSocketClient] Error in stale data handler:",l)}}));let r;if(typeof e.action=="string")if(e.action==="subscribed")typeof e.channel=="string"?r=e.channel:r="subscribed";else if(e.action==="error")r="error",e.error?console.error("[WebSocketClient] Server error:",{code:e.error.code,message:e.error.message,details:e.error.details}):e.message&&console.error("[WebSocketClient] Server error:",e.message);else if(e.action==="pong")r="pong";else if(e.action==="data"||e.action==="update")if(typeof e.channel=="string")r=e.channel;else{console.error("[WebSocketClient] Missing channel in data message");return}else r=e.action;else if(typeof e.type=="string")if(e.type==="data")if(typeof e.channel=="string")r=e.channel;else{console.error("[WebSocketClient] Missing channel in data message");return}else e.type==="error"?(r="error",e.error?console.error("[WebSocketClient] Server error:",{code:e.error.code,message:e.error.message,details:e.error.details}):e.message&&console.error("[WebSocketClient] Server error:",e.message)):e.type==="ack"?typeof e.channel=="string"?r=e.channel:r="ack":e.type==="pong"?r="pong":r=e.type;else typeof e.event=="string"?r=e.event:typeof e.channel=="string"?r=e.channel:r="message";const i=this.handlers.get(r)||[],s=this.handlers.get("*")||[];i.forEach(o=>{try{o(e)}catch(a){console.error(`[WebSocketClient] Error in handler for ${r}:`,a)}}),r!=="error"&&s.forEach(o=>{try{o(e)}catch(a){console.error("[WebSocketClient] Error in wildcard handler:",a)}})}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts){console.error("[WebSocketClient] Max reconnection attempts reached"),this.setState(Pt.Disconnected);return}this.reconnectAttempts++,this.setState(Pt.Reconnecting),this.reconnectTimer=window.setTimeout(()=>{this.connect().catch(e=>{console.error("[WebSocketClient] Reconnection failed:",e)})},this.config.reconnectInterval)}cancelReconnect(){this.reconnectTimer!==null&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectAttempts=0}startPing(){this.pingInterval=window.setInterval(()=>{this.ws&&this.state===Pt.Connected&&this.send({action:"ping"})},3e4)}stopPing(){this.pingInterval!==null&&(clearInterval(this.pingInterval),this.pingInterval=null)}setAuthToken(e,r,i){this.config.authToken=e,this.config.walletAddress=r,this.config.deviceID=i,this.originalConfig.authToken=e,this.originalConfig.walletAddress=r,this.originalConfig.deviceID=i,console.log(`Auth set: address=${r}, device=${i}`)}async updateAuth(e,r,i){e!==void 0&&(this.config.authToken=e,this.originalConfig.authToken=e),r!==void 0&&(this.config.walletAddress=r,this.originalConfig.walletAddress=r),i!==void 0&&(this.config.deviceID=i,this.originalConfig.deviceID=i),this.isConnected()&&(this.disconnect(),await this.connect())}async authenticateWithSignature(e,r){if(!this.isConnected())throw new Error("WebSocket not connected");try{const i=await e(r);this.eip712TypedData=r;const s={action:"auth",signature:i,typedData:r,address:this.config.walletAddress};this.config.deviceID&&(s.device_id=this.config.deviceID),this.send(s),this.authState="pending",this.authPromise=this.waitForAuthAcknowledgment();try{await Promise.race([this.authPromise,new Promise((o,a)=>setTimeout(()=>a(new Error("EIP-712 auth acknowledgment timeout")),5e3))]),this.authState="authenticated",console.log("[WebSocketClient] EIP-712 authentication successful")}catch(o){throw this.authState="failed",o}}catch(i){throw console.error("[WebSocketClient] EIP-712 authentication failed:",i),i}}waitForAuthAcknowledgment(){return new Promise((e,r)=>{const i=setTimeout(()=>{this.off("auth",s),this.off("error",o),r(new Error("Auth acknowledgment timeout"))},5e3),s=a=>{a.action==="auth"&&(a.status==="ok"||a.success===!0)&&(clearTimeout(i),this.off("auth",s),this.off("error",o),e())},o=a=>{var l;a.action==="error"&&((l=a.error)==null?void 0:l.code)===401&&(clearTimeout(i),this.off("auth",s),this.off("error",o),r(new Error(`Authentication failed: ${a.error.message||"Unauthorized"}`)))};this.on("auth",s),this.on("error",o)})}waitForSubscription(e,r=5e3){return new Promise((i,s)=>{if(!this.pendingSubscriptions.has(e)){i();return}const o=window.setTimeout(()=>{this.pendingSubscriptions.delete(e),s(new Error(`Subscription acknowledgment timeout for channel: ${e}`))},r),a=this.pendingSubscriptions.get(e);a?(a.timeout=o,a.resolve=i,a.reject=s):(clearTimeout(o),i())})}registerPendingSubscription(e){this.pendingSubscriptions.has(e)||this.pendingSubscriptions.set(e,{resolve:()=>{},reject:()=>{},timeout:0})}isReadyForSubscriptions(){const e=this.state===Pt.Connected,i=!(this.config.walletAddress||this.eip712TypedData)||this.authState==="authenticated";return e&&i}getAuthState(){return this.authState}}class ec{constructor(e){Te(this,"wsClient");Te(this,"subscriptions",new Map);Te(this,"lastPriceWrappedCallbacks",new Map);Te(this,"wrappedCallbacks",new Map);Te(this,"multiFeedSubscriptions",new Map);Te(this,"multiFeedHandlerRegistered",!1);this.wsClient=new fA({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID})}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.lastPriceWrappedCallbacks.clear(),this.wrappedCallbacks.clear(),this.multiFeedSubscriptions.clear(),this.multiFeedHandlerRegistered=!1}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,r,i){this.wsClient.setAuthToken(e,r,i)}async authenticateWithSignature(e,r){return this.wsClient.authenticateWithSignature(e,r)}async updateAuth(e,r,i){return this.wsClient.updateAuth(e,r,i)}isReadyForSubscriptions(){return this.wsClient.isReadyForSubscriptions()}getAuthState(){return this.wsClient.getAuthState()}async waitForSubscription(e,r=5e3){return this.wsClient.waitForSubscription(e,r)}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(r){return console.error("Failed to parse router data field:",r),null}return e}extractRouterData(e){if(typeof e.action=="string"){if((e.action==="data"||e.action==="update")&&e.data){const r=this.parseRouterData(e.data);return r||console.warn("[SubscriptionClient] Failed to parse action-based data:",e.data),r}if(e.action==="data"||e.action==="update"){const{action:r,channel:i,...s}=e;return Object.keys(s).length>0?s:null}if(e.action==="error")return e.error?console.error("WebSocket error response:",e.error):e.message&&console.error("WebSocket error response:",e.message),null;if(e.action==="subscribed")return null}if(e.type==="data"&&e.data){const r=this.parseRouterData(e.data);return r||console.warn("[SubscriptionClient] Failed to parse router data:",e.data),r}if(e.type==="error")return e.error?console.error("WebSocket error response:",e.error):e.message&&console.error("WebSocket error response:",e.message),null;if(e.type==="ack")return null;if(e.channel&&!e.action&&!e.type){const{channel:r,...i}=e;return Object.keys(i).length>0?i:null}return e.action&&e.action!=="data"&&e.action!=="update"&&e.action!=="subscribed"&&e.action!=="error"?console.debug("[SubscriptionClient] Unexpected action:",e.action,"Full message:",e):e.type&&e.type!=="data"&&e.type!=="ack"&&e.type!=="error"?console.debug("[SubscriptionClient] Unexpected message type:",e.type,"Full message:",e):(e.action==="data"||e.action==="update"||e.type==="data")&&!e.data&&!e.channel&&console.warn("[SubscriptionClient] Message is data/update but missing data/channel field:",e),null}validateSymbol(e){return!e||typeof e!="string"||e.trim()===""?!1:e.includes("/")}validateMarketId(e){if(e==null)return!1;const r=e.toString().trim();return r!==""&&r!=="0"}validateKlineInterval(e){return["1m","5m","15m","1h","4h","1d"].includes(e)}validateTWAPWindowSize(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}validatePrivateChannelAuth(){if(!this.isReadyForSubscriptions()){const e=this.getAuthState();if(e==="pending")throw new Error("Authentication is pending. Please wait for authentication to complete before subscribing to private channels.");if(e==="failed")throw new Error("Authentication failed. Please re-authenticate before subscribing to private channels.");{const r=this.wsClient.config;if(!r||!r.authToken)throw new Error("Authentication token is required for private channels. Please provide authToken in SubscriptionClient config or use authenticateWithSignature() for EIP-712 authentication.")}}}subscribeOrderbook(e,r,i=!0){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string or number.`);const s="orderbook";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],r]);const o=l=>{const c=this.extractRouterData(l);c&&(i&&c.bids&&Array.isArray(c.bids)&&(c.bids=c.bids.map(([u,h])=>[it(u),it(h)])),i&&c.asks&&Array.isArray(c.asks)&&(c.asks=c.asks.map(([u,h])=>[it(u),it(h)])),r(c))};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(r,o),this.wsClient.on(s,o),this.wsClient.registerPendingSubscription(s);try{this.wsClient.send({type:"subscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(l){(a=this.wrappedCallbacks.get(s))==null||a.delete(r);const c=this.subscriptions.get(s)||[],u=c.indexOf(r);throw u>-1&&(c.splice(u,1),this.subscriptions.set(s,c)),l}}unsubscribeOrderbook(e,r){var o,a;const i="orderbook",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orderbook"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeTrades(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string or number.`);const i="trades";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"trades",params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeTrades(e,r){var o,a;const i="trades",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"trades"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeTicker(e,r){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string or number.`);const i="moniker",s="ticker";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],r]);const o=l=>{const c=this.extractRouterData(l);c&&r(c)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(r,o),this.wsClient.on(i,o);try{this.wsClient.send({type:"subscribe",channel:i,params:{market_id:e.toString()}})}catch(l){(a=this.wrappedCallbacks.get(s))==null||a.delete(r);const c=this.subscriptions.get(s)||[],u=c.indexOf(r);throw u>-1&&(c.splice(u,1),this.subscriptions.set(s,c)),l}}unsubscribeTicker(e,r){var a,l;const i="ticker",s="moniker",o=this.subscriptions.get(i)||[];if(r){const c=o.indexOf(r);if(c>-1){o.splice(c,1),this.subscriptions.set(i,o);const u=(a=this.wrappedCallbacks.get(i))==null?void 0:a.get(r);u&&(this.wsClient.off(s,u),this.wrappedCallbacks.get(i).delete(r))}}else{const c=this.wrappedCallbacks.get(i);c&&(c.forEach(u=>{this.wsClient.off(s,u)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((l=this.subscriptions.get(i))==null?void 0:l.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:s})}catch(c){console.error("Failed to send unsubscribe message:",c)}}subscribeUserUpdates(e){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const r="positions";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],e]);const i=l=>{const c=this.extractRouterData(l);c&&e(c)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(e,i),this.wsClient.on(r,i),this.wsClient.registerPendingSubscription(r);const s=this.wsClient.config,o=s==null?void 0:s.authToken;try{const l={type:"subscribe",channel:"positions",params:{}};o&&(l.params.auth_token=o),this.wsClient.send(l)}catch(l){(a=this.wrappedCallbacks.get(r))==null||a.delete(e);const c=this.subscriptions.get(r)||[],u=c.indexOf(e);throw u>-1&&(c.splice(u,1),this.subscriptions.set(r,c)),l}}unsubscribeUserUpdates(e){var s,o;const r="positions",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"positions"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeLastPrice(e,r,i=!0){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string or number.`);const s="last_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],r]);const o=a=>{console.debug("[SubscriptionClient] last_price message received:",a);const l=this.extractRouterData(a);if(!l){console.warn("[SubscriptionClient] Failed to extract trade data from message:",a);return}if(console.debug("[SubscriptionClient] Extracted trade data:",l),!l.price){console.warn("[SubscriptionClient] Trade data missing price field:",l);return}i&&(l.price&&(l.price=it(l.price)),l.quantity&&(l.quantity=it(l.quantity))),console.debug("[SubscriptionClient] Calling callback with trade data:",l),r(l)};this.lastPriceWrappedCallbacks.set(r,o),this.wsClient.on(s,o);try{this.wsClient.send({type:"subscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(a){this.lastPriceWrappedCallbacks.delete(r);const l=this.subscriptions.get(s)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(s,l)),a}}unsubscribeLastPrice(e,r){var o;const i="last_price",s=this.subscriptions.get(i)||[];if(r){const a=s.indexOf(r);if(a>-1){s.splice(a,1),this.subscriptions.set(i,s);const l=this.lastPriceWrappedCallbacks.get(r);l&&(this.wsClient.off(i,l),this.lastPriceWrappedCallbacks.delete(r))}}else s.forEach(a=>{const l=this.lastPriceWrappedCallbacks.get(a);l&&(this.wsClient.off(i,l),this.lastPriceWrappedCallbacks.delete(a))}),this.subscriptions.delete(i);if(((o=this.subscriptions.get(i))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"last_price"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeFundingRate(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateSymbol(e))throw new Error(`Invalid symbol: ${e}. Symbol must be in format "BASE/QUOTE" (e.g., "BTC/USDC").`);const i="funding_rate";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"funding_rate",params:{symbol:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeFundingRate(e,r){var o,a;const i="funding_rate",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"funding_rate"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeBuckets(e){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const r="buckets";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],e]);const i=l=>{const c=this.extractRouterData(l);c&&e(c)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(e,i),this.wsClient.on(r,i),this.wsClient.registerPendingSubscription(r);const s=this.wsClient.config,o=s==null?void 0:s.authToken;try{const l={type:"subscribe",channel:"buckets",params:{}};o&&(l.params.auth_token=o),this.wsClient.send(l)}catch(l){(a=this.wrappedCallbacks.get(r))==null||a.delete(e);const c=this.subscriptions.get(r)||[],u=c.indexOf(e);throw u>-1&&(c.splice(u,1),this.subscriptions.set(r,c)),l}}unsubscribeBuckets(e){var s,o;const r="buckets",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"buckets"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeDeviation(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateSymbol(e))throw new Error(`Invalid symbol: ${e}. Symbol must be in format "BASE/QUOTE" (e.g., "BTC/USDC").`);const i="deviation";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"deviation",params:{symbol:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeDeviation(e,r){var o,a;const i="deviation",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"deviation"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeIndexPrice(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateSymbol(e))throw new Error(`Invalid symbol: ${e}. Symbol must be in format "BASE/QUOTE" (e.g., "BTC/USDC").`);const i="index_price";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"index_price",params:{symbol:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeIndexPrice(e,r){var o,a;const i="index_price",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"index_price"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeKline(e,r,i){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string or number.`);if(!this.validateKlineInterval(r))throw new Error(`Invalid interval: ${r}. Interval must be one of: "1m", "5m", "15m", "1h", "4h", "1d".`);const s="kline";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],i]);const o=l=>{const c=this.extractRouterData(l);c&&i(c)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(i,o),this.wsClient.on(s,o);try{this.wsClient.send({type:"subscribe",channel:"kline",params:{market_id:e.toString(),interval:r}})}catch(l){(a=this.wrappedCallbacks.get(s))==null||a.delete(i);const c=this.subscriptions.get(s)||[],u=c.indexOf(i);throw u>-1&&(c.splice(u,1),this.subscriptions.set(s,c)),l}}unsubscribeKline(e,r,i){var a,l;const s="kline",o=this.subscriptions.get(s)||[];if(i){const c=o.indexOf(i);if(c>-1){o.splice(c,1),this.subscriptions.set(s,o);const u=(a=this.wrappedCallbacks.get(s))==null?void 0:a.get(i);u&&(this.wsClient.off(s,u),this.wrappedCallbacks.get(s).delete(i))}}else{const c=this.wrappedCallbacks.get(s);c&&(c.forEach(u=>{this.wsClient.off(s,u)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((l=this.subscriptions.get(s))==null?void 0:l.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"kline"})}catch(c){console.error("Failed to send unsubscribe message:",c)}}subscribeMarkPrice(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateSymbol(e))throw new Error(`Invalid symbol: ${e}. Symbol must be in format "BASE/QUOTE" (e.g., "BTC/USDC").`);const i="mark_price";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"mark_price",params:{symbol:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeMarkPrice(e,r){var o,a;const i="mark_price",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"mark_price"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribePriceFeed(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateSymbol(e))throw new Error(`Invalid symbol: ${e}. Symbol must be in format "BASE/QUOTE" (e.g., "BTC/USDC").`);const i="price_feed";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"price_feed",params:{symbol:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribePriceFeed(e,r){var o,a;const i="price_feed",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"price_feed"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeTWAP(e,r,i){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateSymbol(e))throw new Error(`Invalid symbol: ${e}. Symbol must be in format "BASE/QUOTE" (e.g., "BTC/USDC").`);if(!this.validateTWAPWindowSize(r))throw new Error(`Invalid window size: ${r}. Window size must be a positive number.`);const s="twap";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],i]);const o=l=>{const c=this.extractRouterData(l);c&&i(c)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(i,o),this.wsClient.on(s,o);try{this.wsClient.send({type:"subscribe",channel:"twap",params:{symbol:e,window_size:r}})}catch(l){(a=this.wrappedCallbacks.get(s))==null||a.delete(i);const c=this.subscriptions.get(s)||[],u=c.indexOf(i);throw u>-1&&(c.splice(u,1),this.subscriptions.set(s,c)),l}}unsubscribeTWAP(e,r,i){var a,l;const s="twap",o=this.subscriptions.get(s)||[];if(i){const c=o.indexOf(i);if(c>-1){o.splice(c,1),this.subscriptions.set(s,o);const u=(a=this.wrappedCallbacks.get(s))==null?void 0:a.get(i);u&&(this.wsClient.off(s,u),this.wrappedCallbacks.get(s).delete(i))}}else{const c=this.wrappedCallbacks.get(s);c&&(c.forEach(u=>{this.wsClient.off(s,u)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((l=this.subscriptions.get(s))==null?void 0:l.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"twap"})}catch(c){console.error("Failed to send unsubscribe message:",c)}}subscribeMultiFeed(e,r,i,s){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string or number.`);if(!this.validateSymbol(r))throw new Error(`Invalid symbol: ${r}. Symbol must be in format "BASE/QUOTE" (e.g., "BTC/USDC").`);if(s&&!this.validateKlineInterval(s))throw new Error(`Invalid interval: ${s}. Interval must be one of: "1m", "5m", "15m", "1h", "4h", "1d".`);const o="multi_feed";if(!this.multiFeedHandlerRegistered){const a=l=>{const c=l.type==="data";if((l.action==="data"||l.action==="update"||c)&&l.channel==="multi_feed"&&l.sub_channel){const h=l.sub_channel,d=this.multiFeedSubscriptions.get(h)||[],f=this.subscriptions.get(o)||[];let p=l.data;if(typeof p=="string")try{p=JSON.parse(p)}catch(g){console.error("Failed to parse multi-feed data field:",g);return}p&&(d.forEach(g=>{try{g(p)}catch(b){console.error(`Error in multi-feed sub-channel callback for ${h}:`,b)}}),f.forEach(g=>{try{g({sub_channel:h,data:p})}catch(b){console.error("Error in multi-feed callback:",b)}}))}};this.wsClient.on(o,a),this.multiFeedHandlerRegistered=!0}this.subscriptions.has(o)||this.subscriptions.set(o,[]),this.subscriptions.get(o).push(i);try{const a={type:"subscribe",channel:"multi_feed",params:{market_id:e.toString(),symbol:r}};s&&(a.params.interval=s),this.wsClient.send(a)}catch(a){const l=this.subscriptions.get(o)||[],c=l.indexOf(i);throw c>-1&&(l.splice(c,1),this.subscriptions.set(o,l)),a}}subscribeMultiFeedSubChannel(e,r,i,s,o){if(this.multiFeedSubscriptions.has(i)||this.multiFeedSubscriptions.set(i,[]),this.multiFeedSubscriptions.get(i).push(s),(this.subscriptions.get("multi_feed")||[]).length===0){const l=()=>{};this.subscribeMultiFeed(e,r,l,o)}}unsubscribeMultiFeed(e,r,i){var a,l;const s="multi_feed",o=this.subscriptions.get(s)||[];if(i){const c=o.indexOf(i);c>-1&&(o.splice(c,1),this.subscriptions.set(s,o))}else this.subscriptions.delete(s);if(((a=this.subscriptions.get(s))==null?void 0:a.length)===0&&this.multiFeedSubscriptions.clear(),((l=this.subscriptions.get(s))==null?void 0:l.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"multi_feed"})}catch(c){console.error("Failed to send unsubscribe message:",c)}}unsubscribeMultiFeedSubChannel(e,r){const i=this.multiFeedSubscriptions.get(e)||[];if(r){const s=i.indexOf(r);s>-1&&(i.splice(s,1),i.length===0?this.multiFeedSubscriptions.delete(e):this.multiFeedSubscriptions.set(e,i))}else this.multiFeedSubscriptions.delete(e)}subscribeBalances(e){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const r="balances";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],e]);const i=l=>{const c=this.extractRouterData(l);c&&e(c)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(e,i),this.wsClient.on(r,i),this.wsClient.registerPendingSubscription(r);const s=this.wsClient.config,o=s==null?void 0:s.authToken;try{const l={type:"subscribe",channel:"balances",params:{}};o&&(l.params.auth_token=o),this.wsClient.send(l)}catch(l){(a=this.wrappedCallbacks.get(r))==null||a.delete(e);const c=this.subscriptions.get(r)||[],u=c.indexOf(e);throw u>-1&&(c.splice(u,1),this.subscriptions.set(r,c)),l}}unsubscribeBalances(e){var s,o;const r="balances",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"balances"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeOrders(e){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const r="orders";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],e]);const i=l=>{const c=this.extractRouterData(l);c&&e(c)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(e,i),this.wsClient.on(r,i),this.wsClient.registerPendingSubscription(r);const s=this.wsClient.config,o=s==null?void 0:s.authToken;try{const l={type:"subscribe",channel:"orders",params:{}};o&&(l.params.auth_token=o),this.wsClient.send(l)}catch(l){(a=this.wrappedCallbacks.get(r))==null||a.delete(e);const c=this.subscriptions.get(r)||[],u=c.indexOf(e);throw u>-1&&(c.splice(u,1),this.subscriptions.set(r,c)),l}}unsubscribeOrders(e){var s,o;const r="orders",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orders"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}}class yJ{constructor(e){Te(this,"wsClient");Te(this,"subscriptions",new Map);Te(this,"wrappedCallbacks",new Map);this.wsClient=new fA({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID})}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.wrappedCallbacks.clear()}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,r,i){this.wsClient.setAuthToken(e,r,i)}async authenticateWithSignature(e,r){return this.wsClient.authenticateWithSignature(e,r)}async updateAuth(e,r,i){return this.wsClient.updateAuth(e,r,i)}isReadyForSubscriptions(){return this.wsClient.isReadyForSubscriptions()}getAuthState(){return this.wsClient.getAuthState()}async waitForSubscription(e,r=5e3){return this.wsClient.waitForSubscription(e,r)}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(r){return console.error("Failed to parse router data field:",r),null}return e}extractRouterData(e){if(e.type==="data"&&e.data){const r=this.parseRouterData(e.data);return r||console.warn("[SubscriptionExplorer] Failed to parse router data:",e.data),r}return e.type==="error"&&e.error?(console.error("WebSocket error response:",e.error),null):(e.type==="ack"||(e.type!=="data"?console.debug("[SubscriptionExplorer] Unexpected message type:",e.type,"Full message:",e):e.data||console.warn("[SubscriptionExplorer] Message type is 'data' but missing data field:",e)),null)}subscribeConsensusFlat(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const i="consensus_flat";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],e]);const s=a=>{const l=this.extractRouterData(a);l&&e(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(e,s),this.wsClient.on(i,s),this.wsClient.registerPendingSubscription(i);try{const a={};(r==null?void 0:r.shard_id)!==void 0&&(a.shard_id=r.shard_id.toString()),r!=null&&r.event_type&&(a.event_type=r.event_type),this.wsClient.send({type:"subscribe",channel:"consensus_flat",params:Object.keys(a).length>0?a:{}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(e);const l=this.subscriptions.get(i)||[],c=l.indexOf(e);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeConsensusFlat(e){var s,o;const r="consensus_flat",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"consensus_flat"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}}async function yge(n,e,r,i,s){const o=Jh.fromPhrase(n.trim(),"","m/44'/60'/0'/0/0");if(o.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${o.address} does not match provided ${e}`);let a;try{a=new To(o.privateKey)}catch(_){throw new Error(`Invalid private key: cannot create signing key - ${_.message}`)}const l=g0(a.publicKey);if(l.toLowerCase()!==e.toLowerCase())throw new Error(`Private key validation failed: derived address ${l} does not match ${e}`);const c=BigInt(o.privateKey),u=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(c===0n||c>=u)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const d=c.toString(16).toLowerCase().padStart(64,"0"),f=st("0x"+d);if(f.length!==32)throw new Error(`Invalid private key: expected 32 bytes, got ${f.length}`);if(f.every(_=>_===0))throw new Error("Invalid private key: cannot be zero");const g=BigInt("0x"+d);if(g!==c)throw new Error(`Private key encoding error: bytes do not match BigInt value. Original: ${c.toString(16)}, Reconstructed: ${g.toString(16)}`);const b=d;if(b.length!==64)throw new Error(`Invalid private key format: expected exactly 64 hex chars, got ${b.length}. This should never happen with a valid 32-byte private key.`);if(!/^[0-9a-f]{64}$/.test(b))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");const y=b,v={action:Lw,owner:e.toLowerCase(),nonce:r,timestamp:i,deadline:s},w={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:i,payload:v,deadline:parseInt(s,16)};console.log("[Onboard] Signing EIP-712 typed data with generateSingleSignature:",w),console.log("[Onboard] Private key format validated:",{length:y.length,format:"64 lowercase hex chars (no 0x prefix) - matches Go's hex.EncodeToString",preview:`${y.substring(0,8)}...${y.substring(56)}`,isValidSecp256k1:!0,withinCurveOrder:c<u,notZero:c!==0n,bytesLength:f.length,fullHex:y,firstByte:y.substring(0,2),lastByte:y.substring(62,64)}),console.log("[Onboard] Calling WASM GenerateSingleSignature with:",{txJSONLength:JSON.stringify(w).length,privateKeyHexLength:y.length,privateKeyHexPreview:y,signerAddress:e.toLowerCase()});const k=await vt.generateSingleSignature(JSON.stringify(w),y,e.toLowerCase());if(console.log(k),!k.success||!k.signature)throw new Error(k.error||"Failed to generate signature");return console.log("[Onboard] signature:",k.signature),k.signature}async function xge(n){var e,r;try{const i=await yge(n.mnemonic,n.walletAddress,n.message.nonce,n.message.timestamp,n.message.deadline);console.log("[Onboard] Signature generated successfully, length:",i.length);const s={address:n.walletAddress,signature:i,nonce:n.message.nonce,timestamp:n.timestamp,deadline:n.message.deadline,action:Lw};n.username&&(s.username=n.username),n.referralCode&&(s.referral_code=n.referralCode),console.log("[Onboard] Request body:",{...s,signature:i.substring(0,20)+"..."});const a=await new Cw(n.baseURL).post("/auth/v1/onboard",s);if(a.statusCode===200&&a.body){const l=a.body.access_token||a.body.authToken||a.body.token||a.body.accessToken,c=a.body.refresh_token||a.body.refreshToken,u=a.body.expires_at||a.body.expiresAt||(a.body.expires_in?n.timestamp+a.body.expires_in:void 0);return l?{success:!0,authToken:l,refreshToken:c,expiresAt:u}:{success:!1,error:"Response missing authToken field"}}else{const l=((e=a.body)==null?void 0:e.message)||((r=a.body)==null?void 0:r.error)||`HTTP ${a.statusCode}: ${a.body}`,c=new Error(l);throw c.responseBody=a.body,c.statusCode=a.statusCode,c}}catch(i){throw i}}const pA={auth:{maxRetries:4,baseDelay:500,maxDelay:3e3,jitter:!0,multiplier:2},http:{maxRetries:3,baseDelay:100,maxDelay:5e3,jitter:!0,multiplier:2},nonce:{maxRetries:5,baseDelay:200,maxDelay:2e3,jitter:!0,multiplier:1.5}};function wge(n,e){let r=n.baseDelay*Math.pow(n.multiplier,e);if(r>n.maxDelay&&(r=n.maxDelay),n.jitter){const i=r*.25*Math.random();r+=i}return Math.floor(r)}function _ge(n){return new Promise(e=>setTimeout(e,n))}async function Fw(n,e,r=()=>!0){let i;for(let s=0;s<=n.maxRetries;s++)try{return await e()}catch(o){if(i=o,!await Promise.resolve(r(o)))throw o;if(s>=n.maxRetries)break;const l=wge(n,s);await _ge(l)}throw new Error(`Operation failed after ${n.maxRetries+1} attempts: ${(i==null?void 0:i.message)||i}`)}async function mA(n,e,r,i){try{vt.isReady()||await vt.initialize();const s=await vt.generateAddress(n,0);if(!s.success||!s.address)return{success:!1,error:`Failed to generate address: ${s.error}`};const o=s.address.toLowerCase(),a=new ar({baseURL:e}),l=new NR(a);let c=null;try{return await Fw(pA.auth,async()=>{console.log(`[Onboard] Attempt starting - currentNonce: ${c}`),c===null?(c=(await l.getExpectedNextNonce(o,!1)).next_nonce,console.log(`[Onboard] First attempt: queried server, using next nonce: ${c}`)):console.log(`[Onboard] Retry attempt: using incremented nonce ${c} from previous failure`);let h=0;const d=10;for(;h<d;)try{await l.validateNonce(o,c,!0);break}catch(y){if(h++,y.message.includes("already pending")||y.message.includes("already used")){if(c=c+1,console.log(`[Onboard] Nonce ${c-1} already pending, incrementing to ${c}`),h>=d)throw new Error(`Failed to find available nonce after ${d} attempts`)}else throw y}const f=Math.floor(Date.now()/1e3),p=f+3600,g={action:Lw,owner:o,nonce:H4(c),timestamp:f,deadline:H4(p)};let b;try{b=await xge({mnemonic:n,walletAddress:o,message:g,baseURL:e,username:r,referralCode:i,timestamp:f})}catch(y){if(c!==null){const v=c;try{await l.rejectNonce(o,c,!0),c=c+1,console.log(`[Onboard] Rejected nonce ${v}, incremented to nonce ${c} (will use on retry)`)}catch(w){console.warn("[Onboard] Failed to reject nonce after thrown error:",w),c=c+1,console.log(`[Onboard] Incremented nonce to ${c} (reject failed but incrementing anyway)`)}}else console.warn("[Onboard] Error thrown but currentNonce is null, cannot reject/increment");throw y.currentNonce=c,y}if(!b.success){if(c!==null){const v=c;await l.rejectNonce(o,c,!0),c=c+1,console.log(`[Onboard] Request failed with nonce ${v}, rejected and incremented to ${c} (will keep incrementing until it works)`)}const y=new Error(b.error||"Onboarding failed");throw y.onboardResult=b,y}return c!==null&&await l.commitNonce(o,c,!0),b},async h=>{var v,w,k;const d=String(h).toLowerCase(),f=((v=h==null?void 0:h.message)==null?void 0:v.toLowerCase())||d,p=(h==null?void 0:h.responseBody)||(h==null?void 0:h.onboardResult),g=((w=p==null?void 0:p.error)==null?void 0:w.toLowerCase())||((k=p==null?void 0:p.message)==null?void 0:k.toLowerCase())||"";if(`${f} ${d} ${g}`.toLowerCase().includes("nonce already pending")){if(c!==null){const _=c;c=c+1,console.log(`[Onboard] Off-chain operation: nonce ${_} already pending/used, incrementing to ${c} (server will validate)`)}else try{c=(await l.getExpectedNextNonce(o,!1)).next_nonce,console.log(`[Onboard] currentNonce was null, queried server for starting nonce: ${c}`)}catch(_){console.warn("[Onboard] Failed to query server nonce:",_),c=1}return!0}return jR(h)?(console.log('[Onboard] Nonce-consuming error detected (not "already pending"), clearing currentNonce to force re-query'),c=null,!0):!["failed to generate address","address mismatch","invalid mnemonic"].some(_=>d.includes(_))})}catch(u){if(c!==null)try{await l.rejectNonce(o,c,!0)}catch(h){console.warn("[Onboard] Failed to reject nonce during cleanup:",h)}return{success:!1,error:(u==null?void 0:u.message)||"Unknown error during onboarding"}}}catch(s){return{success:!1,error:(s==null?void 0:s.message)||"Unknown error during onboarding"}}}const Sge=Object.freeze(Object.defineProperty({__proto__:null,onboardAndGetAuthToken:mA},Symbol.toStringTag,{value:"Module"})),Tj=n=>{let e;const r=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const f=e;e=h??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(p=>p(e,f))}},s=()=>e,l={setState:i,getState:s,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=e=n(i,s,l);return l},kge=n=>n?Tj(n):Tj,Cge=n=>n;function Ege(n,e=Cge){const r=Ne.useSyncExternalStore(n.subscribe,Ne.useCallback(()=>e(n.getState()),[n,e]),Ne.useCallback(()=>e(n.getInitialState()),[n,e]));return Ne.useDebugValue(r),r}const Pj=n=>{const e=kge(n),r=i=>Ege(e,i);return Object.assign(r,e),r},Tge=n=>n?Pj(n):Pj,Zt=Tge((n,e)=>({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,selectedMarketId:null,loadingMarkets:!1,loadingOrderbooks:new Set,loadingTickers:new Set,loadingTrades:new Set,errors:new Map,setMarkets:r=>{const i=new Map,s=new Map;r.forEach(l=>{i.set(l.id,l),l.symbol&&s.set(l.symbol,l),l.moniker&&s.set(l.moniker,l)});let a=e().selectedMarketId;if(!a&&r.length>0){const c=r.find(h=>h.active)||r[0],u=c.market_id?c.market_id:c.id?typeof c.id=="string"?c.id:c.id.toString():null;u&&(a=u)}n({markets:r,marketsById:i,marketsBySymbol:s,selectedMarketId:a,lastUpdated:new Map(e().lastUpdated).set("markets",Date.now())})},setMarket:r=>{const i=e(),s=new Map(i.marketsById),o=new Map(i.marketsBySymbol);s.set(r.id,r),r.symbol&&o.set(r.symbol,r),r.moniker&&o.set(r.moniker,r);const a=i.markets.find(l=>l.id===r.id)?i.markets.map(l=>l.id===r.id?r:l):[...i.markets,r];n({markets:a,marketsById:s,marketsBySymbol:o})},getMarket:r=>e().marketsById.get(r),getMarketBySymbol:r=>e().marketsBySymbol.get(r),setSelectedMarketId:r=>{n({selectedMarketId:r})},setOrderbook:(r,i)=>{const s=e(),o=new Map(s.orderbooks);o.set(r,{...i,timestamp:Date.now()}),n({orderbooks:o,lastUpdated:new Map(s.lastUpdated).set(r,Date.now())})},getOrderbook:r=>e().orderbooks.get(r),updateOrderbook:(r,i)=>{const s=e(),o=s.orderbooks.get(r);if(o){const a={...o,...i,timestamp:Date.now()};s.setOrderbook(r,a)}else s.setOrderbook(r,{bids:i.bids||[],asks:i.asks||[],timestamp:Date.now()})},setTicker:(r,i)=>{const s=e(),o=new Map(s.tickers);o.set(r,{...i,marketId:r,timestamp:Date.now()}),n({tickers:o,lastUpdated:new Map(s.lastUpdated).set(`ticker_${r}`,Date.now())})},getTicker:r=>e().tickers.get(r),setRecentTrades:(r,i)=>{const s=e(),o=new Map(s.recentTrades);o.set(r,i),n({recentTrades:o,lastUpdated:new Map(s.lastUpdated).set(`trades_${r}`,Date.now())})},getRecentTrades:r=>e().recentTrades.get(r),setLoading:(r,i)=>{const s=e();if(r==="markets")n({loadingMarkets:i});else if(r.startsWith("orderbook_")){const o=r.split("_").slice(1).join("_"),a=new Set(s.loadingOrderbooks);i?a.add(o):a.delete(o),n({loadingOrderbooks:a})}else if(r.startsWith("ticker_")){const o=r.split("_").slice(1).join("_"),a=new Set(s.loadingTickers);i?a.add(o):a.delete(o),n({loadingTickers:a})}else if(r.startsWith("trades_")){const o=r.split("_").slice(1).join("_"),a=new Set(s.loadingTrades);i?a.add(o):a.delete(o),n({loadingTrades:a})}},setError:(r,i)=>{const s=e(),o=new Map(s.errors);i?o.set(r,i):o.delete(r),n({errors:o})},clearError:r=>{e().setError(r,null)},clearCache:r=>{const i=e();if(r){const s=new Map(i.orderbooks),o=new Map(i.tickers),a=new Map(i.recentTrades),l=new Map(i.lastUpdated);s.delete(r),o.delete(r),a.delete(r),l.delete(r),l.delete(`ticker_${r}`),l.delete(`trades_${r}`),n({orderbooks:s,tickers:o,recentTrades:a,lastUpdated:l})}else n({orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map})},clearAllCache:()=>{n({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,errors:new Map,selectedMarketId:null})}})),Pge=Object.freeze(Object.defineProperty({__proto__:null,ConnectionState:Pt,ExchangeClient:Zl,HttpClient:Cw,InfoClient:ar,NonceManager:NR,OpBankBucketTransfer:uA,OpBankExtractToBucket:lA,OpBankMint:aA,OpBankTransfer:dA,OpBankWithdrawFromBucket:cA,OpCancelOrder:sx,OpChangeLeverage:iA,OpChangeMarginRatio:tA,OpClosePosition:ox,OpCreateMarginBucket:bJ,OpInternTransfer:sA,OpModifyOrder:rA,OpSubmitOrder:nA,OpSwap:oA,OperationTypeOnboard:Lw,SATOSHI_SCALE:tu,SubscriptionClient:ec,SubscriptionExplorer:yJ,WebSocketClient:fA,calculateRiskRatio:iy,fromSatoshi:it,fromSatoshiBatch:eQ,getDisplayMarginType:sy,initWasm:tQ,isLastPriceData:_d,isMarkPriceData:oy,isValidSatoshi:UD,mormSigner:vt,onboardAndGetAuthToken:mA,toSatoshi:Ht,toSatoshiBatch:ZX,toSatoshiUint64:AR,transformRawBucketToBucket:hA,useMarketStore:Zt},Symbol.toStringTag,{value:"Module"}));function Mge(){const[n,e]=D.useState({loading:!0,loaded:!1,error:null}),[r,i]=D.useState({initialized:!1,wasmLoaded:!1,ready:!1});D.useEffect(()=>{(async()=>{try{e(l=>({...l,loading:!0,error:null})),await vt.initialize()?(e({loading:!1,loaded:!0,error:null}),i(vt.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),i(vt.getStatus()))}catch(a){e({loading:!1,loaded:!1,error:a instanceof Error?a.message:"Unknown error"}),i(vt.getStatus())}})()},[]),D.useEffect(()=>{if(n.loaded){const o=setInterval(()=>{i(vt.getStatus())},1e3);return()=>clearInterval(o)}},[n.loaded]);const s=async()=>{e({loading:!0,loaded:!1,error:null});try{await vt.initialize()?(e({loading:!1,loaded:!0,error:null}),i(vt.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),i(vt.getStatus()))}catch(o){e({loading:!1,loaded:!1,error:o instanceof Error?o.message:"Unknown error"}),i(vt.getStatus())}};return{wasmStatus:n,isReady:n.loaded&&r.ready,status:r,retry:s}}function Dge(n="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=0){const[r,i]=D.useState(n),[s,o]=D.useState(e),[a,l]=D.useState(null),[c,u]=D.useState(!1);return{mnemonic:r,setMnemonic:i,addressIndex:s,setAddressIndex:o,result:a,loading:c,generateAddress:async()=>{if(!vt.isReady()){l({success:!1,error:"WASM module not ready"});return}u(!0),l(null);try{const d=await vt.generateAddress(r,s);l(d)}catch(d){l({success:!1,error:d instanceof Error?d.message:"Unknown error"})}finally{u(!1)}},isReady:vt.isReady()}}function Oge(){const[n,e]=D.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[r,i]=D.useState("Hello, World!"),[s,o]=D.useState(!1),[a,l]=D.useState(0),[c,u]=D.useState(null),[h,d]=D.useState(!1);return{mnemonic:n,setMnemonic:e,message:r,setMessage:i,useEIP712:s,setUseEIP712:o,addressIndex:a,setAddressIndex:l,result:c,loading:h,signMessage:async()=>{if(!vt.isReady()){u({success:!1,error:"WASM module not ready"});return}d(!0),u(null);try{const p={addressIndex:a,useEIP712:s},g=s?await vt.signEIP712(n,r,p):await vt.signMessage(n,r,p);u(g)}catch(p){u({success:!1,error:p instanceof Error?p.message:"Unknown error"})}finally{d(!1)}},isReady:vt.isReady()}}function Hv(){var n,e,r,i,s;return typeof window>"u"?null:(n=window.phantom)!=null&&n.ethereum||(e=window.ethereum)!=null&&e.isPhantom?"phantom":(r=window.$onekey)!=null&&r.ethereum||(i=window.ethereum)!=null&&i.isOneKey?"onekey":(s=window.ethereum)!=null&&s.isMetaMask||window.ethereum?"metamask":null}function Ige(n){return n==="metamask"||n==="phantom"||n==="onekey"}function Rge(n="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=180,r="clob::submit_order,clob::cancel_order",i="BrowserUserAgent"){const[s,o]=D.useState(n),[a,l]=D.useState(""),[c,u]=D.useState(""),[h,d]=D.useState(""),[f,p]=D.useState(e),[g,b]=D.useState(r),[y,v]=D.useState(i),[w,k]=D.useState(Date.now().toString()),[_,S]=D.useState(null),[C,E]=D.useState(!1),P=async()=>{if(!vt.isReady()){S({success:!1,error:"WASM module not ready"});return}E(!0);try{const G=await vt.generateAddress(s,0);G.success&&G.address?l(G.address):S({success:!1,error:G.error||"Failed to generate owner address"})}catch(G){S({success:!1,error:G instanceof Error?G.message:"Unknown error"})}finally{E(!1)}},O=async()=>{if(!vt.isReady()){S({success:!1,error:"WASM module not ready"});return}E(!0);try{const G=await vt.generateKeypair();G.success&&G.address&&G.privateKey?(u(G.address),d(G.privateKey)):S({success:!1,error:G.error||"Failed to generate agent keypair"})}catch(G){S({success:!1,error:G instanceof Error?G.message:"Unknown error"})}finally{E(!1)}},M=async()=>{if(!vt.isReady()){S({success:!1,error:"WASM module not ready"});return}if(!a||!c){S({success:!1,error:"Owner and agent addresses are required"});return}E(!0),S(null);try{const G=g.split(",").map(A=>A.trim()).filter(A=>A.length>0),H=await vt.prepareAgentSign({owner:a,agent:c,expiresInDays:f,permissions:G,nonce:w,agentName:y});S(H)}catch(G){S({success:!1,error:G instanceof Error?G.message:"Unknown error"})}finally{E(!1)}},{address:R,isConnected:j,connector:B}=IR(),{signTypedDataAsync:L,isPending:$}=RR(),z=()=>{var A;if(!j||!B)return null;const G=Hv();if(Ige(G))return G;const H=((A=B.name)==null?void 0:A.toLowerCase())||"";return H.includes("phantom")?"phantom":H.includes("onekey")?"onekey":H.includes("metamask")?"metamask":null},W=async()=>{var H,A;if(!vt.isReady()){S({success:!1,error:"WASM module not ready"});return}if(!a||!c){S({success:!1,error:"Owner address and agent address are required"});return}if(!j||!R){S({success:!1,error:"Please connect your MetaMask wallet first"});return}if(z()!=="metamask"){const Q=Hv();S(Q==="metamask"?{success:!1,error:'MetaMask wallet detected but not connected via wagmi. Please use the "Connect MetaMask" button first.'}:{success:!1,error:"This function is for MetaMask wallet only. Please use the appropriate button for your wallet."});return}if(R.toLowerCase()!==a.toLowerCase()){S({success:!1,error:`Connected address (${R}) does not match owner address (${a}). Please switch to the correct account in MetaMask.`});return}E(!0),S(null);try{const Q=g.split(",").map(De=>De.trim()).filter(De=>De.length>0),J=await vt.prepareAgentSign({owner:a,agent:c,expiresInDays:f,permissions:Q,nonce:w,agentName:y});if(!J.success||!J.typedData){S(J);return}const K=J.typedData;let Z,se,be,Oe;K.domain&&K.types&&K.message?(Z=K.domain,se=K.types,be=K.primaryType||K.primaryType||"AgentApproval",Oe=K.message):(Z=K.domain||{},se=K.types||K.Types||{},be=K.primaryType||K.PrimaryType||"AgentApproval",Oe=K.message||K.Message||K);const Ke=await L({domain:Z,types:se,primaryType:be,message:Oe});S({success:!0,typedData:J.typedData,signature:Ke})}catch(Q){Q.code===4001||(H=Q.message)!=null&&H.includes("User rejected")||(A=Q.message)!=null&&A.includes("rejected")?S({success:!1,error:"User rejected the signature request"}):S({success:!1,error:Q instanceof Error?Q.message:"Unknown error during MetaMask signing"})}finally{E(!1)}},q=async()=>{var H,A;if(!vt.isReady()){S({success:!1,error:"WASM module not ready"});return}if(!a||!c){S({success:!1,error:"Owner address and agent address are required"});return}if(!j||!R){S({success:!1,error:"Please connect your Phantom wallet first"});return}if(z()!=="phantom"){const Q=Hv();S(Q==="phantom"?{success:!1,error:'Phantom wallet detected but not connected via wagmi. Please use the "Connect Phantom" button first.'}:{success:!1,error:"This function is for Phantom wallet only. Please use the appropriate button for your wallet."});return}if(R.toLowerCase()!==a.toLowerCase()){S({success:!1,error:`Connected address (${R}) does not match owner address (${a}). Please switch to the correct account in Phantom.`});return}E(!0),S(null);try{const Q=g.split(",").map(De=>De.trim()).filter(De=>De.length>0),J=await vt.prepareAgentSign({owner:a,agent:c,expiresInDays:f,permissions:Q,nonce:w,agentName:y});if(!J.success||!J.typedData){S(J);return}const K=J.typedData;let Z,se,be,Oe;K.domain&&K.types&&K.message?(Z=K.domain,se=K.types,be=K.primaryType||K.primaryType||"AgentApproval",Oe=K.message):(Z=K.domain||{},se=K.types||K.Types||{},be=K.primaryType||K.PrimaryType||"AgentApproval",Oe=K.message||K.Message||K);const Ke=await L({domain:Z,types:se,primaryType:be,message:Oe});S({success:!0,typedData:J.typedData,signature:Ke})}catch(Q){Q.code===4001||(H=Q.message)!=null&&H.includes("User rejected")||(A=Q.message)!=null&&A.includes("rejected")?S({success:!1,error:"User rejected the signature request"}):S({success:!1,error:Q instanceof Error?Q.message:"Unknown error during Phantom signing"})}finally{E(!1)}},V=async()=>{var H,A;if(!vt.isReady()){S({success:!1,error:"WASM module not ready"});return}if(!a||!c){S({success:!1,error:"Owner address and agent address are required"});return}if(!j||!R){S({success:!1,error:"Please connect your OneKey wallet first"});return}if(z()!=="onekey"){const Q=Hv();S(Q==="onekey"?{success:!1,error:'OneKey wallet detected but not connected via wagmi. Please use the "Connect OneKey" button first.'}:{success:!1,error:"This function is for OneKey wallet only. Please use the appropriate button for your wallet."});return}if(R.toLowerCase()!==a.toLowerCase()){S({success:!1,error:`Connected address (${R}) does not match owner address (${a}). Please switch to the correct account in OneKey.`});return}E(!0),S(null);try{const Q=g.split(",").map(De=>De.trim()).filter(De=>De.length>0),J=await vt.prepareAgentSign({owner:a,agent:c,expiresInDays:f,permissions:Q,nonce:w,agentName:y});if(!J.success||!J.typedData){S(J);return}const K=J.typedData;let Z,se,be,Oe;K.domain&&K.types&&K.message?(Z=K.domain,se=K.types,be=K.primaryType||K.primaryType||"AgentApproval",Oe=K.message):(Z=K.domain||{},se=K.types||K.Types||{},be=K.primaryType||K.PrimaryType||"AgentApproval",Oe=K.message||K.Message||K);const Ke=await L({domain:Z,types:se,primaryType:be,message:Oe});S({success:!0,typedData:J.typedData,signature:Ke})}catch(Q){Q.code===4001||(H=Q.message)!=null&&H.includes("User rejected")||(A=Q.message)!=null&&A.includes("rejected")?S({success:!1,error:"User rejected the signature request"}):S({success:!1,error:Q instanceof Error?Q.message:"Unknown error during OneKey signing"})}finally{E(!1)}},F=j&&z()==="metamask"&&(R==null?void 0:R.toLowerCase())===a.toLowerCase();return{ownerMnemonic:s,setOwnerMnemonic:o,ownerAddress:a,setOwnerAddress:l,agentAddress:c,setAgentAddress:u,agentPrivateKey:h,setAgentPrivateKey:d,expiresInDays:f,setExpiresInDays:p,permissions:g,setPermissions:b,agentName:y,setAgentName:v,nonce:w,setNonce:k,result:_,loading:C||$,generateOwnerAddress:P,generateAgentKeypair:O,prepareAgentSign:M,signAgentApproval:W,signAgentApprovalWithPhantom:q,signAgentApprovalWithOneKey:V,isMetaMaskConnected:F,isPhantomConnected:j&&z()==="phantom"&&(R==null?void 0:R.toLowerCase())===a.toLowerCase(),isOneKeyConnected:j&&z()==="onekey"&&(R==null?void 0:R.toLowerCase())===a.toLowerCase(),isReady:vt.isReady()}}const xu="http://localhost:8080",xJ="ws://localhost:8080/websocket",Age="300px",Nge="300px",jge="270px",wJ="630px",gA=5e3,Lge="1",Fge=100,_J=20,$ge="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",aS=1,Mj=100,zge=1,Vv=0,lS=100,cS=1,Bge=.01,Dj=0,Uge="BINANCE:BTCUSDT",qge="5",Wge="https://s3.tradingview.com/tv.js",Ga=2,Hge=2,Cl="asc",Jd="desc",tO="market",uS="limit",Eg="CROSS",Vge="ISOLATED",Yge="ONE_WAY",Tg="LONG",nO="SHORT",Oj="symbol",Ij="leverage",Rj="size",Aj="liquidationPrice",Nj="unrealizedPnL",jj="entryPrice",Lj="margin",dS="all",Yv="byBucket",Fj="1.5fr 1.2fr 1fr 1fr 1fr 1.2fr 1.2fr 1fr",Gge="#51cf66",Kge="#ff6b6b",Xge="Loading positions...",Qge="No open positions",Jge="POSITIONS",Zge="All",e0e="By Bucket",hS="--",$j="symbol",zj="side",Bj="quantity",Uj="price",qj="filledQuantity",Wj="status",Ka="pending",Hj="history",t0e="ORDER_STATUS_PENDING",n0e="ORDER_STATUS_OPEN",r0e="PARTIALLY_FILLED",Vj=[t0e,n0e,"PENDING","OPEN","NEW",r0e],fS="#ffc107",pS="#17a2b8",Yj="#28a745",mS="#dc3545",Gj="#dc3545",i0e="#6c757d",s0e="#51cf66",o0e="#ff6b6b",Kj="1.5fr 1fr 1fr 1.2fr 1.2fr 1.2fr 1fr 1fr",a0e="Loading pending orders...",l0e="No pending orders",c0e="No historical orders",u0e="OPEN ORDERS",d0e="ORDER HISTORY",h0e="Wallet address required to view pending orders",f0e="Pending",p0e="History",m0e="--",g0e="Unknown";function v0e(n){const[e,r]=D.useState(null),[i,s]=D.useState(null),[o,a]=D.useState(!1),[l,c]=D.useState(!1),[u,h]=D.useState(null),[d,f]=D.useState(tO),[p,g]=D.useState(0),[b,y]=D.useState(0),[v,w]=D.useState("0"),[k,_]=D.useState(zge),[S,C]=D.useState(Yge),[E,P]=D.useState(Eg),[O,M]=D.useState(0),[R,j]=D.useState(0),[B,L]=D.useState(n.marketId||"1");D.useEffect(()=>{n.selectedBucketBalance!==void 0&&M(n.selectedBucketBalance)},[n.selectedBucketBalance]),D.useEffect(()=>{const Z=new Zl({baseURL:n.baseURL,mnemonic:n.mnemonic}),se=new ar({baseURL:n.baseURL});r(Z),s(se),Z.initialize().then(()=>{a(!0)}).catch(be=>{console.error("Failed to initialize exchange client:",be),h({success:!1,error:`Initialization failed: ${be.message}`})})},[n.baseURL,n.mnemonic]);const $=D.useCallback(async()=>{if(!(!i||!e)&&n.selectedBucketBalance===void 0)try{const Z=e.getWalletAddress(),se=await i.getBalanceDecimal(Z,"MORM");se&&se.available_balance!==void 0&&M(jt(se.available_balance))}catch(Z){console.error("Failed to load balance:",Z)}},[i,e,n.selectedBucketBalance]);D.useEffect(()=>{o&&i&&e&&n.selectedBucketBalance===void 0&&$()},[o,i,e,n.selectedBucketBalance,$]);const z=D.useCallback(async()=>{if(i)try{const Z=await i.getTicker(B);if(Z&&Z.lastPrice){const se=jt(Z.lastPrice);j(se),(!v||v==="0")&&w(se.toString())}}catch(Z){console.error("Failed to load market price:",Z)}},[i,B,v]);D.useEffect(()=>{o&&i&&z()},[o,i,z]);const W=D.useCallback(()=>d==="market"?n.tradePrice&&n.tradePrice>0?n.tradePrice:R:v?parseFloat(v):R,[d,v,R,n.tradePrice]),q=D.useCallback(()=>O*k,[O,k]),V=D.useCallback(()=>{let Z;if(b>0)Z=b;else{const be=q()*p/100,Oe=W();if(Oe<=0)return 0;Z=be/Oe}return n.maxSizeLimit!==void 0&&n.maxSizeLimit>0&&Z>n.maxSizeLimit?n.maxSizeLimit:Z},[b,p,q,W,n.maxSizeLimit]),F=D.useCallback(()=>{const Z=V(),se=W();return Z*se},[V,W]),G=D.useCallback(()=>{const Z=V(),se=W(),be=Z*se;return AR(be)},[V,W]),H=D.useCallback(()=>{const Z=G();return k<=0?0:Math.floor(Z/k)},[G,k]),A=D.useCallback(async()=>{if(!e||!o){h({success:!1,error:"Exchange client not ready"});return}const Z=V();if(Z<=0){h({success:!1,error:"Invalid order size"});return}const se=W();if(se<=0){h({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!v){h({success:!1,error:"Price is required for limit orders"});return}c(!0),h(null);try{const be=Ht(k.toString()),Oe=await e.placeOrder({marketId:B,side:"buy",orderType:d,price:se,quantity:Z,leverage:be});h({success:!0,orderId:Oe.order_id,message:"Buy order placed successfully"}),await $()}catch(be){h({success:!1,error:be instanceof Error?be.message:"Unknown error"})}finally{c(!1)}},[e,o,V,W,d,v,k,B,$]),Q=D.useCallback(async()=>{if(!e||!o){h({success:!1,error:"Exchange client not ready"});return}const Z=V();if(Z<=0){h({success:!1,error:"Invalid order size"});return}const se=W();if(se<=0){h({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!v){h({success:!1,error:"Price is required for limit orders"});return}c(!0),h(null);try{const be=Ht(k.toString()),Oe=await e.placeOrder({marketId:B,side:"sell",orderType:d,price:se,quantity:Z,leverage:be});h({success:!0,orderId:Oe.order_id,message:"Sell order placed successfully"}),await $()}catch(be){h({success:!1,error:be instanceof Error?be.message:"Unknown error"})}finally{c(!1)}},[e,o,V,W,d,v,k,B,$]),J=D.useCallback(Z=>{const se=q(),be=se*Z/100,Oe=n.tradePrice&&n.tradePrice>0?n.tradePrice:R>0?R:0,Ke=Oe>0?be/Oe:0;let De=isNaN(Ke)||!isFinite(Ke)?0:Math.round(Ke*1e8)/1e8;if(n.maxSizeLimit!==void 0&&n.maxSizeLimit>0&&De>n.maxSizeLimit){De=n.maxSizeLimit;const Pe=W();if(De>0&&se>0&&Pe>0){const nt=De*Pe/se*100;g(Math.min(100,Math.max(0,nt)))}else g(Z)}else g(Z);y(De)},[q,R,n.tradePrice,n.maxSizeLimit,W]),K=D.useCallback(Z=>{let se=isNaN(Z)||Z<0?0:Z;n.maxSizeLimit!==void 0&&n.maxSizeLimit>0&&se>n.maxSizeLimit&&(se=n.maxSizeLimit),y(se);const be=q(),Oe=W();if(se>0&&be>0&&Oe>0){const De=se*Oe/be*100;g(Math.min(100,Math.max(0,De)))}else g(0)},[q,W,n.maxSizeLimit]);return{orderType:d,setOrderType:f,fundPercent:p,sizeInput:b,price:v,leverage:k,positionMode:S,marginMode:E,availableBalance:O,currentPrice:R,marketId:B,isReady:o,loading:l,result:u,setFundPercent:J,setSizeInput:K,setPrice:w,setLeverage:_,setPositionMode:C,setMarginMode:P,setMarketId:L,placeBuyOrder:A,placeSellOrder:Q,loadBalance:$,loadMarketPrice:z,calculateSize:V,calculateSizeUSD:F,calculateValue:G,calculateMargin:H,getOrderPrice:W,getAvailableTradeAmount:q}}function SJ(n){const[e,r]=D.useState({asks:[],bids:[]}),[i,s]=D.useState(!0),[o,a]=D.useState(null),[l,c]=D.useState(!1),[u,h]=D.useState(null),d=D.useRef(null),f=D.useRef(null),p=D.useRef([]),g=D.useRef(null),b=D.useRef(!1),y=D.useRef(null),v=D.useRef(null),w=D.useRef(null),k=D.useRef(new Map),_=D.useCallback(M=>{const R=[...M].sort((B,L)=>L[0]-B[0]);let j=0;return R.map(([B,L])=>(j+=L,{price:B,size:L,cumulative:j,flash:null}))},[]),S=D.useCallback((M,R)=>{const j=new Map,B=new Map,L=new Map,$=new Map;M.asks.forEach(K=>{K.size>0&&j.set(K.price,K.size)}),M.bids.forEach(K=>{K.size>0&&B.set(K.price,K.size)}),R.asks&&R.asks.forEach(([K,Z])=>{const se=j.get(K)||0;Z===0?j.delete(K):(se>0?L.set(K,Z>se?"up":"down"):L.set(K,"up"),j.set(K,Z))}),R.bids&&R.bids.forEach(([K,Z])=>{const se=B.get(K)||0;Z===0?B.delete(K):(se>0?$.set(K,Z>se?"up":"down"):$.set(K,"up"),B.set(K,Z))});const z=Array.from(j.entries()),W=Array.from(B.entries()),q=_(z),V=_(W),F=Date.now();q.forEach(K=>{const Z=L.get(K.price);Z?(K.flash=Z,k.current.set(`ask-${K.price}`,F)):K.flash=null}),V.forEach(K=>{const Z=$.get(K.price);Z?(K.flash=Z,k.current.set(`bid-${K.price}`,F)):K.flash=null});const G=n.maxDepth||100,H=q.slice(0,G),A=V.slice(0,G);let Q,J;if(H.length>0&&A.length>0){const K=H[H.length-1].price,Z=A[0].price;Q=K-Z,J=(K+Z)/2}return{asks:H,bids:A,spread:Q,midPrice:J}},[_,n.maxDepth]),C=D.useCallback(async()=>{if(d.current)try{const M=await d.current.getOrderbook(n.marketId,!0);if(M&&(M.bids||M.asks)){const R=M.asks||[],j=M.bids||[],B=_(R),L=_(j),$=n.maxDepth||100,z=B.slice(0,$),W=L.slice(0,$);let q,V;if(z.length>0&&W.length>0){const F=z[z.length-1].price,G=W[0].price;q=F-G,V=(F+G)/2}r({asks:z,bids:W,spread:q,midPrice:V})}}catch(M){a(M instanceof Error?M.message:"Failed to load orderbook")}},[n.marketId,n.maxDepth,_]),E=D.useCallback(async()=>{if(d.current){s(!0),a(null);try{const M=await d.current.getOrderbook(n.marketId,!0);if(M&&(M.bids||M.asks)){const R=M.asks||[],j=M.bids||[],B=_(R),L=_(j),$=n.maxDepth||100,z=B.slice(0,$),W=L.slice(0,$);let q,V;if(z.length>0&&W.length>0){const F=z[z.length-1].price,G=W[0].price;q=F-G,V=(F+G)/2}r({asks:z,bids:W,spread:q,midPrice:V})}}catch(M){a(M instanceof Error?M.message:"Failed to load orderbook")}finally{s(!1)}}},[n.marketId,n.maxDepth,_]),P=D.useCallback((M,R)=>{if(M.snapshot===!0||M.type==="snapshot"||M.bids&&M.asks&&M.bids.length>10&&M.asks.length>10&&!M.delta){const B=M.asks||[],L=M.bids||[],$=_(B),z=_(L),W=n.maxDepth||100,q=$.slice(0,W),V=z.slice(0,W);let F,G;if(q.length>0&&V.length>0){const H=q[q.length-1].price,A=V[0].price;F=H-A,G=(H+A)/2}return{asks:q,bids:V,spread:F,midPrice:G}}else return S(R,{bids:M.bids,asks:M.asks})},[_,S,n.maxDepth]),O=D.useCallback(M=>{!M||!M.bids&&!M.asks||(p.current.push(M),g.current!==null&&clearTimeout(g.current),g.current=window.setTimeout(()=>{r(R=>{let j=R;for(const B of p.current)j=P(B,j);if(p.current=[],R.asks.length===j.asks.length&&R.bids.length===j.bids.length&&R.spread===j.spread&&R.midPrice===j.midPrice){const B=R.bids.length>0?R.bids[0].price:0,L=R.asks.length>0?R.asks[R.asks.length-1].price:0,$=j.bids.length>0?j.bids[0].price:0,z=j.asks.length>0?j.asks[j.asks.length-1].price:0;if(B===$&&L===z)return R}return j}),g.current=null},100))},[P]);return D.useEffect(()=>{const M=new ar({baseURL:n.baseURL});d.current=M;const R=new ec({url:n.wsURL,authToken:n.authToken,walletAddress:n.walletAddress,deviceID:n.deviceID});f.current=R,y.current===null&&(y.current=n.marketId);const j=()=>{if(R.isConnected()){const $=y.current!==null?y.current:n.marketId;(!b.current||y.current!==$)&&(b.current&&y.current!==null&&y.current!==$&&R.unsubscribeOrderbook(y.current,O),R.subscribeOrderbook($,O,!0),b.current=!0,y.current=$)}},B=R.connect();w.current=window.setTimeout(()=>{!R.isConnected()&&d.current&&v.current===null&&(h("WebSocket connection timeout. Using HTTP polling."),c(!1),C(),v.current=window.setInterval(()=>{C()},5e3))},12e3),B.then(()=>{w.current!==null&&(clearTimeout(w.current),w.current=null),c(!0),h(null),j()}).catch(()=>{w.current!==null&&(clearTimeout(w.current),w.current=null),h("slow connection due to network issue"),c(!1),d.current&&(v.current!==null&&(clearInterval(v.current),v.current=null),C(),v.current=window.setInterval(()=>{C()},5e3))});const L=R.onStateChange($=>{$===Pt.Connected?(c(!0),h(null),b.current&&j()):($===Pt.Disconnected||$===Pt.Reconnecting)&&(c(!1),b.current=!1,h("WebSocket disconnected. Using static data."))});return()=>{const $=y.current;g.current!==null&&(clearTimeout(g.current),g.current=null),w.current!==null&&(clearTimeout(w.current),w.current=null),p.current=[],b.current=!1,y.current=null,L&&L(),f.current&&($!==null&&f.current.unsubscribeOrderbook($,O),f.current.disconnect())}},[n.baseURL,n.wsURL,n.authToken,n.walletAddress,n.deviceID]),D.useEffect(()=>{if(!d.current||!f.current)return;const M=y.current;return M!==null&&M!==n.marketId&&f.current.isConnected()&&(f.current.unsubscribeOrderbook(M,O),b.current=!1),r({asks:[],bids:[]}),s(!0),a(null),h(null),E(),f.current.isConnected()&&(f.current.subscribeOrderbook(n.marketId,O,!0),b.current=!0),y.current=n.marketId,()=>{f.current&&f.current.isConnected()&&y.current===n.marketId&&(f.current.unsubscribeOrderbook(n.marketId,O),b.current=!1)}},[n.marketId,E,O]),D.useEffect(()=>(v.current!==null&&(clearInterval(v.current),v.current=null),!l&&d.current&&(C(),v.current=window.setInterval(()=>{C()},5e3)),()=>{v.current!==null&&(clearInterval(v.current),v.current=null)}),[l,n.marketId,C]),D.useEffect(()=>{const M=setInterval(()=>{const R=Date.now(),j=500;r(B=>{let L=!1;const $=B.asks.map(W=>{const q=`ask-${W.price}`,V=k.current.get(q);return W.flash&&V&&R-V>=j?(L=!0,k.current.delete(q),{...W,flash:null}):W}),z=B.bids.map(W=>{const q=`bid-${W.price}`,V=k.current.get(q);return W.flash&&V&&R-V>=j?(L=!0,k.current.delete(q),{...W,flash:null}):W});return L?{...B,asks:$,bids:z}:B})},100);return()=>clearInterval(M)},[]),{orderbook:e,loading:i,error:o,isConnected:l,wsError:u,refresh:E}}function zu(n,e=2,r=2,i="0.00"){return n==null||isNaN(n)?i:n.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:r})}function ax(n){return n==null||isNaN(n)?"--":zu(n,2,2,"--")}function Zd(n){return n==null||isNaN(n)?"--":zu(n,2,8,"--")}function lx(n){return n==null||isNaN(n)?"0.000":zu(n,3,3,"0.000")}function b0e(n){return n==null||isNaN(n)?"0":zu(n,3,8,"0")}function y0e(n){return n==null||isNaN(n)?"0.00":zu(n,2,2,"0.00")}function x0e(n){return n==null||isNaN(n)?"0.00":zu(n,2,2,"0.00")}function _n(n){return n==null||isNaN(n)?"0.00":zu(n,2,2,"0.00")}function kJ(n){return n==null||isNaN(n)?"0%":`${(n*100).toFixed(2)}%`}function CJ(n){if(n==null||typeof n=="string"&&(n.trim()===""||isNaN(Number(n))))return"0";try{return it(n).toFixed(8).replace(/\.?0+$/,"")}catch{return"0"}}function w0e(n){if(n==null||typeof n=="string"&&(n.trim()===""||isNaN(Number(n))))return"--";try{const r=CJ(n).split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),r.join(".")}catch{return"--"}}function _0e(n){if(n==null||typeof n=="string"&&(n.trim()===""||isNaN(Number(n))))return"0";try{return CJ(n)}catch{return"0"}}function S0e(n,e="--"){if(n==null)return e;try{return(typeof n=="string"||typeof n=="number"?it(n):0).toFixed(2).replace(/\.?0+$/,"")}catch{return e}}function na(n){if(!n)return Date.now();const e=typeof n=="string"?Number(n):n;return isNaN(e)||e<=0?Date.now():e<9466848e5?e*1e3:e}function $w(n){const[e,r]=D.useState(null),[i,s]=D.useState(null),[o,a]=D.useState(!0),[l,c]=D.useState(null),[u,h]=D.useState(!1),[d,f]=D.useState(null),p=D.useRef(null),g=D.useRef(null),b=D.useRef(!1),y=D.useRef(!1),v=D.useRef(null),w=D.useRef(null),k=D.useCallback(async()=>{if(!p.current){console.warn("[useTradePrice] pollRecentTrades called but infoClientRef.current is null");return}console.debug("[useTradePrice] Polling recent trades (marketId:",n.marketId,")");try{const O=n.limit||100,M=await p.current.getRecentTrades(n.marketId,O);if(M&&Array.isArray(M)&&M.length>0){const j=[...M].sort((L,$)=>{const z=na(L.timestamp);return na($.timestamp)-z})[0],B={market_id:j.market_id||n.marketId,price:jt(j.price),quantity:jt(j.quantity),timestamp:na(j.timestamp),is_buyer_maker:j.is_buyer_maker||!1,trade_id:j.trade_id||""};r(L=>(L&&typeof L.price=="number"&&(B.price>L.price?f("up"):B.price<L.price&&f("down")),setTimeout(()=>f(null),500),B))}else console.warn("[useTradePrice] Polling returned no trades or invalid data:",M)}catch(O){c(O instanceof Error?O.message:"Failed to load recent trades"),console.error("[useTradePrice] Failed to poll recent trades:",O)}},[n.marketId,n.limit]),_=D.useCallback(async()=>{if(p.current){a(!0),c(null);try{const O=n.limit||100,M=await p.current.getRecentTrades(n.marketId,O);if(M&&Array.isArray(M)&&M.length>0){const j=[...M].sort((L,$)=>{const z=na(L.timestamp);return na($.timestamp)-z})[0],B={market_id:j.market_id||n.marketId,price:jt(j.price),quantity:jt(j.quantity),timestamp:na(j.timestamp),is_buyer_maker:j.is_buyer_maker||!1,trade_id:j.trade_id||""};r(B)}else console.warn("[useTradePrice] Initialization returned no trades or invalid data:",M)}catch(O){c(O instanceof Error?O.message:"Failed to load recent trades"),console.error("Failed to initialize recent trades:",O)}finally{a(!1)}}},[n.marketId,n.limit]),S=D.useCallback(O=>{if(console.debug("[useTradePrice] handleLastPriceUpdate called with data:",O),!O){console.warn("[useTradePrice] handleLastPriceUpdate received null/undefined data");return}if(!O.price&&O.price!==0){console.warn("[useTradePrice] handleLastPriceUpdate received data without price field:",O);return}const M=jt(O.price),R=jt(O.quantity);if(isNaN(M)){console.warn("[useTradePrice] Invalid price value:",O.price);return}r(j=>{_d(j)&&typeof j.price=="number"&&(M>j.price?f("up"):M<j.price&&f("down")),setTimeout(()=>f(null),500);const B={market_id:O.market_id||n.marketId,price:M,quantity:R,timestamp:O.timestamp||Date.now(),is_buyer_maker:O.is_buyer_maker||!1,trade_id:O.trade_id||""};return _d(B)||console.error("[useTradePrice] Invalid LastPriceData structure:",B),console.debug("[useTradePrice] Setting lastPrice to:",B),console.debug("[useTradePrice] Type check - isLastPriceData:",_d(B)),B})},[n.marketId]),C=D.useCallback(O=>{if(!O){console.warn("[useTradePrice] handleMarkPriceUpdate received null/undefined data");return}if(O.mark_price===void 0||O.mark_price===null){console.warn("[useTradePrice] handleMarkPriceUpdate received data without mark_price field:",O);return}const M=jt(O.mark_price);if(isNaN(M)){console.warn("[useTradePrice] Invalid mark_price value:",O.mark_price);return}const R={symbol:O.symbol||n.symbol||"",mark_price:M,timestamp:O.timestamp||Date.now()};oy(R)||console.error("[useTradePrice] Invalid MarkPriceData structure:",R),s(R)},[n.symbol]);D.useEffect(()=>{const O=new ar({baseURL:n.baseURL});p.current=O;const M=new ec({url:n.wsURL,authToken:n.authToken,walletAddress:n.walletAddress,deviceID:n.deviceID});g.current=M,_();const R=()=>{M.isConnected()&&(b.current||(M.subscribeLastPrice(n.marketId,S,!0),b.current=!0),n.symbol&&!y.current&&(M.subscribeMarkPrice(n.symbol,C),y.current=!0))};console.debug("[useTradePrice] Attempting WebSocket connection...");const j=M.connect();console.debug("[useTradePrice] Connect promise created, waiting for result..."),w.current=window.setTimeout(()=>{console.warn("[useTradePrice] WebSocket connection timeout fallback triggered after 12 seconds");const L=M.isConnected();console.warn("[useTradePrice] subscriptionClient.isConnected():",L,"hasPollingInterval:",v.current!==null),!L&&p.current&&v.current===null?(console.debug("[useTradePrice] Starting HTTP polling due to connection timeout (marketId:",n.marketId,")"),h(!1),k(),v.current=window.setInterval(()=>{k()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):L?console.debug("[useTradePrice] Connection established before timeout, no polling needed"):v.current!==null&&console.debug("[useTradePrice] Polling already started, skipping")},12e3),j.then(()=>{w.current!==null&&(clearTimeout(w.current),w.current=null),console.debug("[useTradePrice] WebSocket connected successfully"),h(!0),R()}).catch(L=>{w.current!==null&&(clearTimeout(w.current),w.current=null),console.error("[useTradePrice] WebSocket connection promise rejected:",L);const $=L instanceof Error?L.message:"Unknown error";console.info("WebSocket failed to establish connection. Falling back to HTTP polling:",$),h(!1),p.current?(v.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (WebSocket failure handler)"),clearInterval(v.current),v.current=null),console.debug("[useTradePrice] Starting HTTP polling due to WebSocket connection failure (marketId:",n.marketId,")"),k(),v.current=window.setInterval(()=>{k()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null")});const B=M.onStateChange(L=>{console.debug("[useTradePrice] WebSocket state changed to:",L),L===Pt.Connected?(console.debug("[useTradePrice] WebSocket connected - stopping polling if active"),h(!0),b.current&&R()):(L===Pt.Disconnected||L===Pt.Reconnecting)&&(console.debug("[useTradePrice] WebSocket disconnected/reconnecting - polling effect should start polling"),h(!1),b.current=!1,y.current=!1)});return()=>{w.current!==null&&(clearTimeout(w.current),w.current=null),b.current=!1,y.current=!1,B&&B(),g.current&&(g.current.unsubscribeLastPrice(n.marketId,S),n.symbol&&g.current.unsubscribeMarkPrice(n.symbol,C),g.current.disconnect())}},[n.baseURL,n.wsURL,n.marketId,n.symbol,n.authToken,n.walletAddress,n.deviceID]),D.useEffect(()=>{p.current&&g.current&&(g.current.isConnected()&&(g.current.unsubscribeLastPrice(n.marketId,S),b.current=!1,n.symbol&&(g.current.unsubscribeMarkPrice(n.symbol,C),y.current=!1)),_(),g.current.isConnected()&&(g.current.subscribeLastPrice(n.marketId,S,!0),b.current=!0,n.symbol&&(g.current.subscribeMarkPrice(n.symbol,C),y.current=!0)))},[n.marketId,n.symbol]),D.useEffect(()=>(console.debug("[useTradePrice] Polling effect triggered - isConnected:",u,"marketId:",n.marketId),v.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (polling effect)"),clearInterval(v.current),v.current=null),!u&&p.current?(console.debug("[useTradePrice] Starting HTTP polling (WebSocket disconnected, marketId:",n.marketId,")"),k(),v.current=window.setInterval(()=>{k()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):!u&&!p.current?console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null (isConnected:",u,")"):u&&console.debug("[useTradePrice] WebSocket connected, polling not needed"),()=>{v.current!==null&&(console.debug("[useTradePrice] Cleaning up polling interval (polling effect cleanup)"),clearInterval(v.current),v.current=null)}),[u,n.marketId]);const{displayPrice:E,displayTimestamp:P}=D.useMemo(()=>{const O=_d(e)&&e.price!=null,M=oy(i)&&i.mark_price!=null;if(O&&M){const R=e.timestamp||0,j=i.timestamp||0;return R>=j?{displayPrice:e.price,displayTimestamp:R}:{displayPrice:i.mark_price,displayTimestamp:j}}return O?{displayPrice:e.price,displayTimestamp:e.timestamp||0}:M?{displayPrice:i.mark_price,displayTimestamp:i.timestamp||0}:{displayPrice:null,displayTimestamp:null}},[e,i]);return{lastPrice:e,markPrice:i,displayPrice:E,displayTimestamp:P,loading:o,error:l,isConnected:u,priceChange:d,refresh:_,isLastPriceData:_d,isMarkPriceData:oy}}function EJ(n){const e=n.useWebSocket!==!1,[r,i]=D.useState([]),[s,o]=D.useState(!0),[a,l]=D.useState(""),[c,u]=D.useState(!1),h=D.useRef(null),d=D.useRef(null),f=D.useRef(0),p=D.useRef(!1),g=D.useRef(n);g.current=n;const b=D.useCallback(w=>{const k=jt(w.size);let _;w.side?_=w.side==="SIDE_BUY"||w.side.toUpperCase().includes("BUY")?Tg:nO:_=k>=0?Tg:nO;const S=jt(w.average_entry_price),C=jt(w.mark_price),E=w.leverage?jt(w.leverage):void 0;let P=0;if(w.unrealized_profit!==void 0||w.unrealized_loss!==void 0){const R=Jy(w.unrealized_profit),j=Jy(w.unrealized_loss),B=R-j;P=jt(B.toString())}else w.unrealized_pnl!==void 0&&(P=jt(w.unrealized_pnl));const M=jt(w.margin_balance)||(E&&S&&k!==0?Math.abs(Math.abs(k)*S/E):0);return{marketId:w.market_id.toString(),symbol:w.symbol||`m-${w.market_id}`,size:Math.abs(k),entryPrice:S,markPrice:C,liquidationPrice:w.liquidation_price?jt(w.liquidation_price):void 0,unrealizedPnL:P,leverage:E,margin:M,side:_,marginMode:w.margin_mode||w.margin_type||Eg,bucketId:w.bucket_id?String(w.bucket_id):void 0}},[]),y=D.useCallback(async()=>{if(!h.current)return;const w=g.current;if(!w.walletAddress||w.walletAddress.trim()===""){l(""),i([]),o(!1);return}l("");try{const k=await Fw(pA.http,()=>h.current.getPositions(w.walletAddress));if(Array.isArray(k)){const _=k.map(b);i(S=>{if(S.length!==_.length)return _;const C=JSON.stringify(S),E=JSON.stringify(_);return C===E?S:_})}else i(_=>_.length===0?_:[])}catch(k){l(k instanceof Error?k.message:"Failed to load positions"),console.error("Failed to fetch positions after retries:",k)}finally{o(!1)}},[b]),v=D.useCallback(w=>{if(w.positions&&Array.isArray(w.positions)){const k=w.positions.map(b);i(_=>{if(_.length!==k.length)return k;const S=JSON.stringify(_),C=JSON.stringify(k);return S===C?_:k})}},[b]);return D.useEffect(()=>{const w=new ar({baseURL:n.baseURL,sessionToken:n.authToken});if(h.current=w,y(),e&&n.wsURL){const k=new ec({url:n.wsURL,authToken:n.authToken,walletAddress:n.walletAddress,deviceID:n.deviceID});d.current=k;const _=()=>{if(k.isReadyForSubscriptions()&&!p.current)try{k.subscribeUserUpdates(v),p.current=!0}catch(C){console.error("[usePositions] Failed to subscribe to positions:",C),C instanceof Error&&C.message.includes("Authentication")&&(p.current=!1)}else if(k.isConnected()&&!k.isReadyForSubscriptions()){const C=k.getAuthState();C==="pending"?console.debug("[usePositions] Waiting for authentication to complete..."):C==="failed"&&console.error("[usePositions] Authentication failed - cannot subscribe to positions")}};k.connect().then(()=>{u(!0),_()}).catch(C=>{console.error("Failed to connect WebSocket:",C),u(!1),n.refreshInterval&&n.refreshInterval>0&&(f.current=window.setInterval(()=>{y()},n.refreshInterval))});const S=k.onStateChange(C=>{C===Pt.Connected?(u(!0),p.current&&_(),f.current!==null&&(clearInterval(f.current),f.current=0)):(C===Pt.Disconnected||C===Pt.Reconnecting)&&(u(!1),p.current=!1,n.refreshInterval&&n.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{y()},n.refreshInterval)))});return()=>{S&&S(),f.current!==null&&(clearInterval(f.current),f.current=0),d.current&&(d.current.unsubscribeUserUpdates(v),d.current.disconnect())}}else return n.refreshInterval&&n.refreshInterval>0&&(f.current=window.setInterval(()=>{y()},n.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=0)}},[n.baseURL,n.wsURL,n.authToken,n.walletAddress,n.deviceID,n.refreshInterval,e]),{positions:r,loading:s,error:a,isConnected:c,refresh:y}}function TJ(n){const[e,r]=D.useState([]),[i,s]=D.useState(!0),[o,a]=D.useState(""),l=D.useRef(null),c=D.useRef(0),u=D.useCallback(async()=>{if(l.current){a(""),s(!0);try{if(!n.walletAddress){a("Wallet address is required"),r([]);return}const h=await l.current.getBuckets(n.walletAddress),d=Array.isArray(h)?h:[];Array.isArray(h)||console.warn("[useBuckets] getBuckets returned non-array:",h);const f=d.map(p=>hA(p,it));r(f)}catch(h){const d=h instanceof Error?h.message:"Failed to load buckets";a(d),console.error("Failed to fetch buckets:",h),r([])}finally{s(!1)}}},[n.walletAddress]);return D.useEffect(()=>{const h=new ar({baseURL:n.baseURL,sessionToken:n.authToken});return l.current=h,u(),n.refreshInterval&&n.refreshInterval>0&&(c.current=window.setInterval(()=>{u()},n.refreshInterval)),()=>{c.current!==null&&(clearInterval(c.current),c.current=0)}},[n.baseURL,n.authToken,n.walletAddress,n.refreshInterval]),{buckets:e,loading:i,error:o,refresh:u}}function k0e(n){const e=n.maxDataPoints||100,[r,i]=D.useState([]),[s,o]=D.useState(!0),[a,l]=D.useState(null),[c,u]=D.useState(!1),h=D.useRef(null),d=D.useRef(!1),f=D.useRef(null),p=D.useCallback(g=>{if(!g){console.warn("[useKline] handleKlineUpdate received null/undefined data");return}try{const b={market_id:g.market_id||String(n.marketId),symbol:g.symbol,interval:g.interval||n.interval,open_time:g.open_time||g.timestamp||Date.now(),close_time:g.close_time||g.open_time||Date.now(),open:jt(g.open),high:jt(g.high),low:jt(g.low),close:jt(g.close),volume:jt(g.volume),trade_count:g.trade_count||g.tradeCount,timestamp:g.timestamp||g.open_time||Date.now(),raw:g};i(y=>{const v=[...y,b];return v.length>e?v.slice(-e):v})}catch(b){console.error("[useKline] Error processing kline update:",b),l(b instanceof Error?b.message:"Failed to process kline data")}},[n.marketId,n.interval,e]);return D.useEffect(()=>{const g=new ec({url:n.wsURL,authToken:n.authToken,walletAddress:n.walletAddress,deviceID:n.deviceID});h.current=g;const b=()=>{g.isConnected()&&(d.current||(g.subscribeKline(n.marketId,n.interval,p),d.current=!0))};console.debug("[useKline] Attempting WebSocket connection...");const y=g.connect();f.current=window.setTimeout(()=>{console.warn("[useKline] WebSocket connection timeout after 12 seconds"),g.isConnected()||(u(!1),l("WebSocket connection timeout"),o(!1))},12e3),y.then(()=>{f.current!==null&&(clearTimeout(f.current),f.current=null),console.debug("[useKline] WebSocket connected successfully"),u(!0),o(!1),b()}).catch(w=>{f.current!==null&&(clearTimeout(f.current),f.current=null),console.error("[useKline] WebSocket connection failed:",w);const k=w instanceof Error?w.message:"Unknown error";u(!1),l(k),o(!1)});const v=g.onStateChange(w=>{console.debug("[useKline] WebSocket state changed to:",w),w===Pt.Connected?(u(!0),d.current&&b()):(w===Pt.Disconnected||w===Pt.Reconnecting)&&(u(!1),d.current=!1)});return()=>{f.current!==null&&(clearTimeout(f.current),f.current=null),d.current=!1,v&&v(),h.current&&(h.current.unsubscribeKline(n.marketId,n.interval,p),h.current.disconnect())}},[n.wsURL,n.marketId,n.interval,n.authToken,n.walletAddress,n.deviceID,p]),{klineData:r,loading:s,error:a,isConnected:c}}function tc(n){const e=D.useRef(null),r=Zt(H=>H.markets),i=Zt(H=>H.marketsById),s=Zt(H=>H.orderbooks),o=Zt(H=>H.tickers),a=Zt(H=>H.recentTrades),l=Zt(H=>H.selectedMarketId),c=Zt(H=>H.loadingMarkets),u=Zt(H=>H.loadingOrderbooks),h=Zt(H=>H.loadingTickers),d=Zt(H=>H.loadingTrades),f=Zt(H=>H.errors),p=Zt(H=>H.setMarkets),g=Zt(H=>H.setMarket),b=Zt(H=>H.getMarket),y=Zt(H=>H.getMarketBySymbol),v=Zt(H=>H.setSelectedMarketId),w=Zt(H=>H.setOrderbook),k=Zt(H=>H.getOrderbook),_=Zt(H=>H.updateOrderbook),S=Zt(H=>H.setTicker),C=Zt(H=>H.getTicker),E=Zt(H=>H.setRecentTrades),P=Zt(H=>H.getRecentTrades),O=Zt(H=>H.setLoading),M=Zt(H=>H.setError),R=Zt(H=>H.clearError),j=Zt(H=>H.clearCache);D.useEffect(()=>{e.current?n.sessionToken&&e.current.setSessionToken(n.sessionToken):e.current=new ar({baseURL:n.baseURL,sessionToken:n.sessionToken})},[n.baseURL,n.sessionToken]);const B=D.useCallback(async()=>{if(!e.current)throw new Error("InfoClient not initialized");const H="markets";O(H,!0),M(H,null);try{const A=await e.current.getMarkets(),J=(Array.isArray(A)?A:(A==null?void 0:A.markets)||[]).map((K,Z)=>{let se;if(K.id!==void 0)se=typeof K.id=="string"?parseInt(K.id,10)||Z+1:K.id;else if(K.market_id!==void 0){const be=String(K.market_id),Oe=parseInt(be,10);isNaN(Oe)?se=Z+1:Oe>Number.MAX_SAFE_INTEGER?se=Oe%Number.MAX_SAFE_INTEGER||Z+1:se=Oe}else se=Z+1;return{id:se,symbol:K.symbol||K.moniker,moniker:K.moniker,baseAsset:K.base_asset||K.baseAsset,quoteAsset:K.quote_asset||K.quoteAsset,active:K.active!==void 0?K.active:K.status==="active",market_id:K.market_id,status:K.status,...K}});return p(J),J}catch(A){const Q=A instanceof Error?A.message:"Failed to fetch markets";throw M(H,Q),A}finally{O(H,!1)}},[p,O,M]),L=D.useCallback(async H=>{if(!e.current)throw new Error("InfoClient not initialized");const A=typeof H=="string"?parseInt(H,10):H,Q=isNaN(A)?null:b(A);if(Q)return Q;try{const J=await e.current.getMarketByID(H);return J?(g(J),J):null}catch(J){const K=J instanceof Error?J.message:`Failed to fetch market ${H}`;throw M(`market_${H}`,K),J}},[b,g,M]),$=D.useCallback(async H=>{if(!e.current)throw new Error("InfoClient not initialized");const A=y(H);if(A)return A;try{const Q=await e.current.getMarketByMoniker(H);return Q?(g(Q),Q):null}catch(Q){const J=Q instanceof Error?Q.message:`Failed to fetch market ${H}`;throw M(`market_${H}`,J),Q}},[y,g,M]),z=D.useCallback(async(H,A=!0,Q=20)=>{if(!e.current)throw new Error("InfoClient not initialized");const J=`orderbook_${H}`;O(J,!0),M(J,null);try{const K=await e.current.getOrderbook(H,A,Q);if(K&&(K.bids||K.asks)){const Z={bids:K.bids||[],asks:K.asks||[],timestamp:Date.now()};return w(typeof H=="string"?H:H.toString(),Z),Z}return null}catch(K){const Z=K instanceof Error?K.message:`Failed to fetch orderbook for market ${H}`;throw M(J,Z),K}finally{O(J,!1)}},[w,O,M]),W=D.useCallback(async H=>{if(!e.current)throw new Error("InfoClient not initialized");const A=`ticker_${H}`;O(A,!0),M(A,null);try{const Q=await e.current.getTicker(H);if(Q){const J=typeof H=="string"?H:H.toString(),K={marketId:J,...Q,timestamp:Date.now()};return S(J,K),K}return null}catch(Q){const J=Q instanceof Error?Q.message:`Failed to fetch ticker for market ${H}`;throw M(A,J),Q}finally{O(A,!1)}},[S,O,M]),q=D.useCallback(async(H,A=100)=>{if(!e.current)throw new Error("InfoClient not initialized");const Q=`trades_${H}`;O(Q,!0),M(Q,null);try{const J=await e.current.getRecentTrades(H,A);if(J){const K=Array.isArray(J)?J:[];return E(typeof H=="string"?H:H.toString(),K),K}return null}catch(J){const K=J instanceof Error?J.message:`Failed to fetch trades for market ${H}`;throw M(Q,K),J}finally{O(Q,!1)}},[E,O,M]);D.useEffect(()=>{n.autoFetchMarkets&&r.length===0&&!c&&B().catch(console.error)},[n.autoFetchMarkets,r.length,c,B]);const V=l?r.find(H=>{var A;return H.market_id===l||((A=H.id)==null?void 0:A.toString())===l}):null,F=V?V.moniker||V.symbol||(V.baseAsset&&V.quoteAsset?`${V.baseAsset}-${V.quoteAsset}`:null):null,G=D.useCallback(H=>{const A=typeof H=="string"?H:H.toString(),Q=r.find(J=>{var K;return J.market_id===A||((K=J.id)==null?void 0:K.toString())===A});return Q?Q.moniker||Q.symbol||(Q.baseAsset&&Q.quoteAsset?`${Q.baseAsset}/${Q.quoteAsset}`:null):null},[r]);return{markets:r,marketsById:i,orderbooks:s,tickers:o,recentTrades:a,selectedMarketId:l,selectedMarket:V,selectedMarketSymbol:F,loadingMarkets:c,loadingOrderbooks:u,loadingTickers:h,loadingTrades:d,isLoading:H=>{if(H==="markets")return c;if(H.startsWith("orderbook_")){const A=H.split("_").slice(1).join("_");return u.has(A)}if(H.startsWith("ticker_")){const A=H.split("_").slice(1).join("_");return h.has(A)}if(H.startsWith("trades_")){const A=H.split("_").slice(1).join("_");return d.has(A)}return!1},errors:f,getError:H=>f.get(H),getMarket:b,getMarketBySymbol:y,getSymbolByMarketId:G,getOrderbook:k,getTicker:C,getRecentTrades:P,fetchMarkets:B,fetchMarket:L,fetchMarketBySymbol:$,fetchOrderbook:z,fetchTicker:W,fetchRecentTrades:q,updateOrderbook:_,clearCache:j,clearError:R,setSelectedMarketId:v,infoClient:e.current}}function C0e(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}const E0e=n=>{switch(n){case"success":return M0e;case"info":return O0e;case"warning":return D0e;case"error":return I0e;default:return null}},T0e=Array(12).fill(0),P0e=({visible:n,className:e})=>Ne.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},Ne.createElement("div",{className:"sonner-spinner"},T0e.map((r,i)=>Ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),M0e=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),D0e=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),O0e=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),I0e=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),R0e=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),A0e=()=>{const[n,e]=Ne.useState(document.hidden);return Ne.useEffect(()=>{const r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),n};let rO=1;class N0e{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;const{message:i,...s}=e,o=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:rO++,a=this.toasts.find(c=>c.id===o),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(c=>c.id===o?(this.publish({...c,...e,id:o,title:i}),{...c,...e,id:o,dismissible:l,title:i}):c):this.addToast({title:i,...s,dismissible:l,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:e,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(i=>i({id:r.id,dismiss:!0}))}),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let i;r.loading!==void 0&&(i=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=i!==void 0,a;const l=s.then(async u=>{if(a=["resolve",u],Ne.isValidElement(u))o=!1,this.create({id:i,type:"default",message:u});else if(L0e(u)&&!u.ok){o=!1;const d=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,f=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,g=typeof d=="object"&&!Ne.isValidElement(d)?d:{message:d};this.create({id:i,type:"error",description:f,...g})}else if(u instanceof Error){o=!1;const d=typeof r.error=="function"?await r.error(u):r.error,f=typeof r.description=="function"?await r.description(u):r.description,g=typeof d=="object"&&!Ne.isValidElement(d)?d:{message:d};this.create({id:i,type:"error",description:f,...g})}else if(r.success!==void 0){o=!1;const d=typeof r.success=="function"?await r.success(u):r.success,f=typeof r.description=="function"?await r.description(u):r.description,g=typeof d=="object"&&!Ne.isValidElement(d)?d:{message:d};this.create({id:i,type:"success",description:f,...g})}}).catch(async u=>{if(a=["reject",u],r.error!==void 0){o=!1;const h=typeof r.error=="function"?await r.error(u):r.error,d=typeof r.description=="function"?await r.description(u):r.description,p=typeof h=="object"&&!Ne.isValidElement(h)?h:{message:h};this.create({id:i,type:"error",description:d,...p})}}).finally(()=>{o&&(this.dismiss(i),i=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((u,h)=>l.then(()=>a[0]==="reject"?h(a[1]):u(a[1])).catch(h));return typeof i!="string"&&typeof i!="number"?{unwrap:c}:Object.assign(i,{unwrap:c})},this.custom=(e,r)=>{const i=(r==null?void 0:r.id)||rO++;return this.create({jsx:e(i),id:i,...r}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ai=new N0e,j0e=(n,e)=>{const r=(e==null?void 0:e.id)||rO++;return ai.addToast({title:n,...e,id:r}),r},L0e=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",F0e=j0e,$0e=()=>ai.toasts,z0e=()=>ai.getActiveToasts(),Je=Object.assign(F0e,{success:ai.success,info:ai.info,warning:ai.warning,error:ai.error,custom:ai.custom,message:ai.message,promise:ai.promise,dismiss:ai.dismiss,loading:ai.loading},{getHistory:$0e,getToasts:z0e});C0e("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Gv(n){return n.label!==void 0}const B0e=3,U0e="24px",q0e="16px",Xj=4e3,W0e=356,H0e=14,V0e=45,Y0e=200;function io(...n){return n.filter(Boolean).join(" ")}function G0e(n){const[e,r]=n.split("-"),i=[];return e&&i.push(e),r&&i.push(r),i}const K0e=n=>{var e,r,i,s,o,a,l,c,u;const{invert:h,toast:d,unstyled:f,interacting:p,setHeights:g,visibleToasts:b,heights:y,index:v,toasts:w,expanded:k,removeToast:_,defaultRichColors:S,closeButton:C,style:E,cancelButtonStyle:P,actionButtonStyle:O,className:M="",descriptionClassName:R="",duration:j,position:B,gap:L,expandByDefault:$,classNames:z,icons:W,closeButtonAriaLabel:q="Close toast"}=n,[V,F]=Ne.useState(null),[G,H]=Ne.useState(null),[A,Q]=Ne.useState(!1),[J,K]=Ne.useState(!1),[Z,se]=Ne.useState(!1),[be,Oe]=Ne.useState(!1),[Ke,De]=Ne.useState(!1),[Pe,We]=Ne.useState(0),[nt,U]=Ne.useState(0),_e=Ne.useRef(d.duration||j||Xj),Ie=Ne.useRef(null),me=Ne.useRef(null),$e=v===0,ue=v+1<=b,ee=d.type,le=d.dismissible!==!1,te=d.className||"",ce=d.descriptionClassName||"",je=Ne.useMemo(()=>y.findIndex(ne=>ne.toastId===d.id)||0,[y,d.id]),de=Ne.useMemo(()=>{var ne;return(ne=d.closeButton)!=null?ne:C},[d.closeButton,C]),Ae=Ne.useMemo(()=>d.duration||j||Xj,[d.duration,j]),Le=Ne.useRef(0),ve=Ne.useRef(0),he=Ne.useRef(0),ge=Ne.useRef(null),[pe,fe]=B.split("-"),Re=Ne.useMemo(()=>y.reduce((ne,xe,Ot)=>Ot>=je?ne:ne+xe.height,0),[y,je]),Ve=A0e(),Xe=d.invert||h,Ye=ee==="loading";ve.current=Ne.useMemo(()=>je*L+Re,[je,Re]),Ne.useEffect(()=>{_e.current=Ae},[Ae]),Ne.useEffect(()=>{Q(!0)},[]),Ne.useEffect(()=>{const ne=me.current;if(ne){const xe=ne.getBoundingClientRect().height;return U(xe),g(Ot=>[{toastId:d.id,height:xe,position:d.position},...Ot]),()=>g(Ot=>Ot.filter(ft=>ft.toastId!==d.id))}},[g,d.id]),Ne.useLayoutEffect(()=>{if(!A)return;const ne=me.current,xe=ne.style.height;ne.style.height="auto";const Ot=ne.getBoundingClientRect().height;ne.style.height=xe,U(Ot),g(ft=>ft.find(Ce=>Ce.toastId===d.id)?ft.map(Ce=>Ce.toastId===d.id?{...Ce,height:Ot}:Ce):[{toastId:d.id,height:Ot,position:d.position},...ft])},[A,d.title,d.description,g,d.id,d.jsx,d.action,d.cancel]);const He=Ne.useCallback(()=>{K(!0),We(ve.current),g(ne=>ne.filter(xe=>xe.toastId!==d.id)),setTimeout(()=>{_(d)},Y0e)},[d,_,g,ve]);Ne.useEffect(()=>{if(d.promise&&ee==="loading"||d.duration===1/0||d.type==="loading")return;let ne;return k||p||Ve?(()=>{if(he.current<Le.current){const ft=new Date().getTime()-Le.current;_e.current=_e.current-ft}he.current=new Date().getTime()})():(()=>{_e.current!==1/0&&(Le.current=new Date().getTime(),ne=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),He()},_e.current))})(),()=>clearTimeout(ne)},[k,p,d,ee,Ve,He]),Ne.useEffect(()=>{d.delete&&(He(),d.onDismiss==null||d.onDismiss.call(d,d))},[He,d.delete]);function ot(){var ne;if(W!=null&&W.loading){var xe;return Ne.createElement("div",{className:io(z==null?void 0:z.loader,d==null||(xe=d.classNames)==null?void 0:xe.loader,"sonner-loader"),"data-visible":ee==="loading"},W.loading)}return Ne.createElement(P0e,{className:io(z==null?void 0:z.loader,d==null||(ne=d.classNames)==null?void 0:ne.loader),visible:ee==="loading"})}const rt=d.icon||(W==null?void 0:W[ee])||E0e(ee);var ye,re;return Ne.createElement("li",{tabIndex:0,ref:me,className:io(M,te,z==null?void 0:z.toast,d==null||(e=d.classNames)==null?void 0:e.toast,z==null?void 0:z.default,z==null?void 0:z[ee],d==null||(r=d.classNames)==null?void 0:r[ee]),"data-sonner-toast":"","data-rich-colors":(ye=d.richColors)!=null?ye:S,"data-styled":!(d.jsx||d.unstyled||f),"data-mounted":A,"data-promise":!!d.promise,"data-swiped":Ke,"data-removed":J,"data-visible":ue,"data-y-position":pe,"data-x-position":fe,"data-index":v,"data-front":$e,"data-swiping":Z,"data-dismissible":le,"data-type":ee,"data-invert":Xe,"data-swipe-out":be,"data-swipe-direction":G,"data-expanded":!!(k||$&&A),"data-testid":d.testId,style:{"--index":v,"--toasts-before":v,"--z-index":w.length-v,"--offset":`${J?Pe:ve.current}px`,"--initial-height":$?"auto":`${nt}px`,...E,...d.style},onDragEnd:()=>{se(!1),F(null),ge.current=null},onPointerDown:ne=>{ne.button!==2&&(Ye||!le||(Ie.current=new Date,We(ve.current),ne.target.setPointerCapture(ne.pointerId),ne.target.tagName!=="BUTTON"&&(se(!0),ge.current={x:ne.clientX,y:ne.clientY})))},onPointerUp:()=>{var ne,xe,Ot;if(be||!le)return;ge.current=null;const ft=Number(((ne=me.current)==null?void 0:ne.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),It=Number(((xe=me.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ce=new Date().getTime()-((Ot=Ie.current)==null?void 0:Ot.getTime()),we=V==="x"?ft:It,ct=Math.abs(we)/Ce;if(Math.abs(we)>=V0e||ct>.11){We(ve.current),d.onDismiss==null||d.onDismiss.call(d,d),H(V==="x"?ft>0?"right":"left":It>0?"down":"up"),He(),Oe(!0);return}else{var Fe,dt;(Fe=me.current)==null||Fe.style.setProperty("--swipe-amount-x","0px"),(dt=me.current)==null||dt.style.setProperty("--swipe-amount-y","0px")}De(!1),se(!1),F(null)},onPointerMove:ne=>{var xe,Ot,ft;if(!ge.current||!le||((xe=window.getSelection())==null?void 0:xe.toString().length)>0)return;const Ce=ne.clientY-ge.current.y,we=ne.clientX-ge.current.x;var ct;const Fe=(ct=n.swipeDirections)!=null?ct:G0e(B);!V&&(Math.abs(we)>1||Math.abs(Ce)>1)&&F(Math.abs(we)>Math.abs(Ce)?"x":"y");let dt={x:0,y:0};const _t=pt=>1/(1.5+Math.abs(pt)/20);if(V==="y"){if(Fe.includes("top")||Fe.includes("bottom"))if(Fe.includes("top")&&Ce<0||Fe.includes("bottom")&&Ce>0)dt.y=Ce;else{const pt=Ce*_t(Ce);dt.y=Math.abs(pt)<Math.abs(Ce)?pt:Ce}}else if(V==="x"&&(Fe.includes("left")||Fe.includes("right")))if(Fe.includes("left")&&we<0||Fe.includes("right")&&we>0)dt.x=we;else{const pt=we*_t(we);dt.x=Math.abs(pt)<Math.abs(we)?pt:we}(Math.abs(dt.x)>0||Math.abs(dt.y)>0)&&De(!0),(Ot=me.current)==null||Ot.style.setProperty("--swipe-amount-x",`${dt.x}px`),(ft=me.current)==null||ft.style.setProperty("--swipe-amount-y",`${dt.y}px`)}},de&&!d.jsx&&ee!=="loading"?Ne.createElement("button",{"aria-label":q,"data-disabled":Ye,"data-close-button":!0,onClick:Ye||!le?()=>{}:()=>{He(),d.onDismiss==null||d.onDismiss.call(d,d)},className:io(z==null?void 0:z.closeButton,d==null||(i=d.classNames)==null?void 0:i.closeButton)},(re=W==null?void 0:W.close)!=null?re:R0e):null,(ee||d.icon||d.promise)&&d.icon!==null&&((W==null?void 0:W[ee])!==null||d.icon)?Ne.createElement("div",{"data-icon":"",className:io(z==null?void 0:z.icon,d==null||(s=d.classNames)==null?void 0:s.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||ot():null,d.type!=="loading"?rt:null):null,Ne.createElement("div",{"data-content":"",className:io(z==null?void 0:z.content,d==null||(o=d.classNames)==null?void 0:o.content)},Ne.createElement("div",{"data-title":"",className:io(z==null?void 0:z.title,d==null||(a=d.classNames)==null?void 0:a.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?Ne.createElement("div",{"data-description":"",className:io(R,ce,z==null?void 0:z.description,d==null||(l=d.classNames)==null?void 0:l.description)},typeof d.description=="function"?d.description():d.description):null),Ne.isValidElement(d.cancel)?d.cancel:d.cancel&&Gv(d.cancel)?Ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||P,onClick:ne=>{Gv(d.cancel)&&le&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,ne),He())},className:io(z==null?void 0:z.cancelButton,d==null||(c=d.classNames)==null?void 0:c.cancelButton)},d.cancel.label):null,Ne.isValidElement(d.action)?d.action:d.action&&Gv(d.action)?Ne.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||O,onClick:ne=>{Gv(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,ne),!ne.defaultPrevented&&He())},className:io(z==null?void 0:z.actionButton,d==null||(u=d.classNames)==null?void 0:u.actionButton)},d.action.label):null)};function Qj(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function X0e(n,e){const r={};return[n,e].forEach((i,s)=>{const o=s===1,a=o?"--mobile-offset":"--offset",l=o?q0e:U0e;function c(u){["top","right","bottom","left"].forEach(h=>{r[`${a}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof i=="number"||typeof i=="string"?c(i):typeof i=="object"?["top","right","bottom","left"].forEach(u=>{i[u]===void 0?r[`${a}-${u}`]=l:r[`${a}-${u}`]=typeof i[u]=="number"?`${i[u]}px`:i[u]}):c(l)}),r}const Q0e=Ne.forwardRef(function(e,r){const{id:i,invert:s,position:o="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:c,className:u,offset:h,mobileOffset:d,theme:f="light",richColors:p,duration:g,style:b,visibleToasts:y=B0e,toastOptions:v,dir:w=Qj(),gap:k=H0e,icons:_,containerAriaLabel:S="Notifications"}=e,[C,E]=Ne.useState([]),P=Ne.useMemo(()=>i?C.filter(A=>A.toasterId===i):C.filter(A=>!A.toasterId),[C,i]),O=Ne.useMemo(()=>Array.from(new Set([o].concat(P.filter(A=>A.position).map(A=>A.position)))),[P,o]),[M,R]=Ne.useState([]),[j,B]=Ne.useState(!1),[L,$]=Ne.useState(!1),[z,W]=Ne.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=Ne.useRef(null),V=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=Ne.useRef(null),G=Ne.useRef(!1),H=Ne.useCallback(A=>{E(Q=>{var J;return(J=Q.find(K=>K.id===A.id))!=null&&J.delete||ai.dismiss(A.id),Q.filter(({id:K})=>K!==A.id)})},[]);return Ne.useEffect(()=>ai.subscribe(A=>{if(A.dismiss){requestAnimationFrame(()=>{E(Q=>Q.map(J=>J.id===A.id?{...J,delete:!0}:J))});return}setTimeout(()=>{iue.flushSync(()=>{E(Q=>{const J=Q.findIndex(K=>K.id===A.id);return J!==-1?[...Q.slice(0,J),{...Q[J],...A},...Q.slice(J+1)]:[A,...Q]})})})}),[C]),Ne.useEffect(()=>{if(f!=="system"){W(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;const A=window.matchMedia("(prefers-color-scheme: dark)");try{A.addEventListener("change",({matches:Q})=>{W(Q?"dark":"light")})}catch{A.addListener(({matches:J})=>{try{W(J?"dark":"light")}catch(K){console.error(K)}})}},[f]),Ne.useEffect(()=>{C.length<=1&&B(!1)},[C]),Ne.useEffect(()=>{const A=Q=>{var J;if(a.every(se=>Q[se]||Q.code===se)){var Z;B(!0),(Z=q.current)==null||Z.focus()}Q.code==="Escape"&&(document.activeElement===q.current||(J=q.current)!=null&&J.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[a]),Ne.useEffect(()=>{if(q.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,G.current=!1)}},[q.current]),Ne.createElement("section",{ref:r,"aria-label":`${S} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((A,Q)=>{var J;const[K,Z]=A.split("-");return P.length?Ne.createElement("ol",{key:A,dir:w==="auto"?Qj():w,tabIndex:-1,ref:q,className:u,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":K,"data-x-position":Z,style:{"--front-toast-height":`${((J=M[0])==null?void 0:J.height)||0}px`,"--width":`${W0e}px`,"--gap":`${k}px`,...b,...X0e(h,d)},onBlur:se=>{G.current&&!se.currentTarget.contains(se.relatedTarget)&&(G.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||G.current||(G.current=!0,F.current=se.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{L||B(!1)},onDragEnd:()=>B(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},P.filter(se=>!se.position&&Q===0||se.position===A).map((se,be)=>{var Oe,Ke;return Ne.createElement(K0e,{key:se.id,icons:_,index:be,toast:se,defaultRichColors:p,duration:(Oe=v==null?void 0:v.duration)!=null?Oe:g,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:s,visibleToasts:y,closeButton:(Ke=v==null?void 0:v.closeButton)!=null?Ke:c,interacting:L,position:A,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,closeButtonAriaLabel:v==null?void 0:v.closeButtonAriaLabel,removeToast:H,toasts:P.filter(De=>De.position==se.position),heights:M.filter(De=>De.position==se.position),setHeights:R,expandByDefault:l,gap:k,expanded:j,swipeDirections:e.swipeDirections})})):null}))}),mp="onboard_mnemonic",cd="onboard_wallet_address",gp="onboard_auth_token",vp="onboard_refresh_token",bp="onboard_expires_at";function Bu(n){const[e,r]=D.useState(""),[i,s]=D.useState(""),[o,a]=D.useState(!1),[l,c]=D.useState(""),[u,h]=D.useState(void 0),[d,f]=D.useState(void 0),[p,g]=D.useState(!1),[b,y]=D.useState(null);D.useEffect(()=>{const M=localStorage.getItem(mp),R=localStorage.getItem(cd),j=localStorage.getItem(gp),B=localStorage.getItem(vp),L=localStorage.getItem(bp);if(r(M||""),s(R||""),j&&c(j),B&&h(B),L){const $=parseInt(L,10);isNaN($)||f($)}},[]);const v=D.useCallback(async M=>{if(!M||M.trim()==="")return null;a(!0);try{vt.isReady()||await vt.initialize();const R=await vt.generateAddress(M.trim(),0);return R.success&&R.address?R.address:(console.error("Failed to generate address:",R.error),null)}catch(R){return console.error("Error generating address:",R),null}finally{a(!1)}},[]),w=D.useCallback(async M=>{const R=M.trim();if(R===""){r(""),s(""),localStorage.removeItem(mp),localStorage.removeItem(cd);return}r(R),localStorage.setItem(mp,R);const j=await v(R);j?(s(j),localStorage.setItem(cd,j)):(s(""),localStorage.removeItem(cd))},[v]),k=D.useCallback((M,R)=>{const j=M.trim(),B=R.trim().toLowerCase();r(j),s(B),localStorage.setItem(mp,j),localStorage.setItem(cd,B)},[]),_=D.useCallback(()=>{r(""),s(""),localStorage.removeItem(mp),localStorage.removeItem(cd)},[]),S=D.useMemo(()=>{if(e==="")return null;const M=e.trim();if(M==="")return null;try{const R=Jh.fromPhrase(M,"","m/44'/60'/0'/0/0");if(i&&R.address.toLowerCase()!==i.toLowerCase())return console.warn("Address mismatch: derived address does not match stored address"),null;const j=BigInt(R.privateKey),B=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(j===0n||j>=B)return console.error("Invalid private key: out of secp256k1 curve order"),null;const $=j.toString(16).toLowerCase().padStart(64,"0");return/^[0-9a-f]{64}$/.test($)?$:(console.error("Invalid private key format"),null)}catch(R){return console.error("Error computing private key:",R),null}},[e,i]),C=D.useCallback(async(M,R,j,B)=>{g(!0),y(null);try{await w(M);const L=await mA(M,R,j,B);if(L.success&&L.authToken)c(L.authToken),h(L.refreshToken),f(L.expiresAt),localStorage.setItem(gp,L.authToken),L.refreshToken&&localStorage.setItem(vp,L.refreshToken),L.expiresAt&&localStorage.setItem(bp,L.expiresAt.toString()),Je.success("Onboarding successful",{description:"Wallet authenticated and auth token generated.",duration:5e3});else{const $=L.error||"Onboarding failed";y($),c(""),h(void 0),f(void 0),localStorage.removeItem(gp),localStorage.removeItem(vp),localStorage.removeItem(bp),Je.error("Onboarding failed",{description:$,duration:6e3})}}catch(L){const $=(L==null?void 0:L.message)||"Unknown error during onboarding";y($),c(""),h(void 0),f(void 0),localStorage.removeItem(gp),localStorage.removeItem(vp),localStorage.removeItem(bp),Je.error("Onboarding error",{description:$,duration:6e3})}finally{g(!1)}},[w]),E=D.useCallback(()=>{y(null)},[]),P=D.useCallback(()=>{c(""),h(void 0),f(void 0),y(null),g(!1),localStorage.removeItem(gp),localStorage.removeItem(vp),localStorage.removeItem(bp)},[]),O=D.useCallback(()=>{_(),P()},[_,P]);return{mnemonic:e,walletAddress:i,privateKey:S,authToken:l,refreshToken:u,expiresAt:d,loading:p,error:b,addressLoading:o,onboard:C,setMnemonic:w,setAccountData:k,clearAccountData:_,clearError:E,reset:P,resetAll:O}}function J0e(){const{setAccountData:n}=Bu(),{mnemonic:e,setMnemonic:r,addressIndex:i,setAddressIndex:s,result:o,loading:a,generateAddress:l,isReady:c}=Dge();return D.useEffect(()=>{o!=null&&o.success&&o.address&&e&&n(e,o.address)},[o,e,n]),m.jsxs("div",{className:"component",children:[m.jsx("h3",{children:"Address Generator"}),m.jsx("p",{children:"Generate Ethereum addresses from mnemonic phrases"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),m.jsx("textarea",{id:"mnemonic",value:e,onChange:u=>r(u.target.value),placeholder:"Enter your mnemonic phrase...",rows:3})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),m.jsx("input",{id:"addressIndex",type:"number",value:i,onChange:u=>s(parseInt(u.target.value)||0),min:"0",max:"1000"})]}),m.jsx("button",{className:"button",onClick:l,disabled:a||!c,children:a?"Generating...":"Generate Address"}),o&&m.jsx("div",{className:`output ${o.success?"success":"error"}`,children:o.success?m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"Generated Address:"}),m.jsx("br",{}),o.address,m.jsx("br",{}),m.jsx("br",{}),m.jsx("strong",{children:"Details:"}),m.jsx("br",{}),"Index: ",o.index,m.jsx("br",{}),"Mnemonic: ",o.mnemonic]}):m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"Error:"}),m.jsx("br",{}),o.error]})})]})}function Z0e(){var f,p;const{mnemonic:n,setMnemonic:e,message:r,setMessage:i,useEIP712:s,setUseEIP712:o,addressIndex:a,setAddressIndex:l,result:c,loading:u,signMessage:h,isReady:d}=Oge();return m.jsxs("div",{className:"component",children:[m.jsx("h3",{children:"Message Signer"}),m.jsx("p",{children:"Sign messages with your private key"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),m.jsx("textarea",{id:"mnemonic",value:n,onChange:g=>e(g.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"message",children:"Message to Sign:"}),m.jsx("textarea",{id:"message",value:r,onChange:g=>i(g.target.value),placeholder:"Enter message to sign...",rows:3})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),m.jsx("input",{id:"addressIndex",type:"number",value:a,onChange:g=>l(parseInt(g.target.value)||0),min:"0",max:"1000"})]}),m.jsx("div",{className:"form-group",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:s,onChange:g=>o(g.target.checked),style:{marginRight:"0.5rem"}}),"Use EIP-712 Typed Data"]})}),m.jsx("button",{className:"button",onClick:h,disabled:u||!d,children:u?"Signing...":"Sign Message"}),c&&m.jsx("div",{className:`output ${c.success?"success":"error"}`,children:c.success?m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"Signature:"}),m.jsx("br",{}),c.signature,m.jsx("br",{}),m.jsx("br",{}),m.jsx("strong",{children:"Details:"}),m.jsx("br",{}),"Message: ",c.message,m.jsx("br",{}),"EIP-712: ",(f=c.options)!=null&&f.useEIP712?"Yes":"No",m.jsx("br",{}),"Address Index: ",((p=c.options)==null?void 0:p.addressIndex)||0]}):m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"Error:"}),m.jsx("br",{}),c.error]})})]})}const Kv={placeOrder:{label:"Place Order",action:nA,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"side",label:"Side",type:"select",options:["BUY","SELL"],required:!0},{key:"orderType",label:"Order Type",type:"select",options:["LIMIT","MARKET"],required:!0},{key:"price",label:"Price",type:"number",placeholder:"100.5",required:!0,convertToSatoshi:!0},{key:"quantity",label:"Quantity",type:"number",placeholder:"1.0",required:!0,convertToSatoshi:!0}]},cancelOrder:{label:"Cancel Order",action:sx,fields:[{key:"orderId",label:"Order ID",type:"text",required:!0},{key:"marketId",label:"Market ID",type:"text",required:!0}]},modifyOrder:{label:"Modify Order",action:rA,fields:[{key:"orderId",label:"Order ID",type:"text",required:!0},{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"newPrice",label:"New Price",type:"number",required:!0,convertToSatoshi:!0},{key:"newQuantity",label:"New Quantity",type:"number",required:!0,convertToSatoshi:!0}]},changeLeverage:{label:"Change Leverage",action:iA,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"newLeverage",label:"New Leverage",type:"number",required:!0,convertToSatoshi:!0}]},closePosition:{label:"Close Position",action:ox,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"quantity",label:"Quantity",type:"number",required:!0,convertToSatoshi:!0},{key:"marketPrice",label:"Market Price",type:"number",required:!0,convertToSatoshi:!0}]},swap:{label:"Swap",action:oA,fields:[{key:"fromToken",label:"From Token",type:"text",required:!0},{key:"toToken",label:"To Token",type:"text",required:!0},{key:"amountIn",label:"Amount In",type:"number",required:!0,convertToSatoshi:!0},{key:"minAmountOut",label:"Min Amount Out",type:"number",required:!0,convertToSatoshi:!0}]},changeMarginRatio:{label:"Change Margin Ratio",action:tA,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"bucketId",label:"Bucket ID",type:"text",required:!1}]},internTransfer:{label:"Internal Transfer",action:sA,fields:[{key:"fromAccount",label:"From Account",type:"text",required:!0},{key:"toAccount",label:"To Account",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0},{key:"tokenAddress",label:"Token Address",type:"text",required:!0}]},bucketTransfer:{label:"Bucket Transfer",action:uA,fields:[{key:"fromBucketId",label:"From Bucket ID",type:"text",required:!0},{key:"toBucketId",label:"To Bucket ID",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},extractToBucket:{label:"Extract to Bucket",action:lA,fields:[{key:"bucketId",label:"Bucket ID",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},withdrawFromBucket:{label:"Withdraw from Bucket",action:cA,fields:[{key:"bucketId",label:"Bucket ID",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},bankMint:{label:"Bank Mint",action:aA,fields:[{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},bankTransfer:{label:"Bank Transfer",action:dA,fields:[{key:"to",label:"To Address",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]}};function eve(){var be,Oe,Ke,De,Pe,We,nt,U,_e,Ie;const{connect:n,connectors:e,isPending:r}=QX(),{disconnect:i}=JX(),{address:s,isConnected:o}=IR(),{signTypedDataAsync:a}=RR(),l=VX(),[c,u]=D.useState(null),[h,d]=D.useState({}),[f,p]=D.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[g,b]=D.useState(""),[y,v]=D.useState(""),[w,k]=D.useState(""),[_,S]=D.useState([]),[C,E]=D.useState(null),[P,O]=D.useState(!1),[M,R]=D.useState(!1),j=typeof window<"u"&&!!((be=window.ethereum)!=null&&be.isMetaMask),B=typeof window<"u"&&(!!((Oe=window.phantom)!=null&&Oe.ethereum)||!!((Ke=window.ethereum)!=null&&Ke.isPhantom)),L=typeof window<"u"&&(!!((De=window.$onekey)!=null&&De.ethereum)||!!((Pe=window.ethereum)!=null&&Pe.isOneKey)),$=e.find(me=>me.id==="injected"),z=typeof window<"u"?(We=window.phantom)!=null&&We.ethereum||(nt=window.ethereum)!=null&&nt.isPhantom?"Phantom":(U=window.$onekey)!=null&&U.ethereum||(_e=window.ethereum)!=null&&_e.isOneKey?"OneKey":(Ie=window.ethereum)!=null&&Ie.isMetaMask?"MetaMask":null:null,W=g&&s&&g.toLowerCase()===s.toLowerCase(),q=o&&W&&g;D.useEffect(()=>{if(c){const me=Kv[c],$e={};me.fields.forEach(ue=>{$e[ue.key]=""}),d($e),E(null)}},[c]);const V=()=>{const $e=Math.floor(Date.now()/1e3)+3600;k($e.toString())},F=()=>{v(Date.now().toString())},G=async()=>{if(!f.trim()){alert("Please enter a mnemonic phrase");return}try{const{mormSigner:me}=await RX(async()=>{const{mormSigner:ue}=await Promise.resolve().then(()=>Pge);return{mormSigner:ue}},void 0);await me.initialize();const $e=await me.generateAddress(f,0);$e.success&&$e.address?b($e.address):alert($e.error||"Failed to generate address")}catch(me){alert(me.message||"Failed to generate address")}},H=async()=>{var me,$e,ue;if(!j&&!B&&!L){alert("No supported wallet detected");return}try{const ee=window.ethereum;let le=ee;if(B&&(le=((me=window.phantom)==null?void 0:me.ethereum)||(($e=window.ethereum)!=null&&$e.isPhantom?ee:null)),L&&(le=((ue=window.$onekey)==null?void 0:ue.ethereum)||ee),!le){alert("Wallet provider not found");return}const te=await le.request({method:"eth_requestAccounts"});te&&te.length>0&&(S(te),te.length===1&&b(te[0])),$&&(await n({connector:$}),await new Promise(ce=>setTimeout(ce,300)))}catch(ee){ee.code===4001?alert("User rejected the connection request"):(console.error("Error connecting wallet:",ee),alert(`Failed to connect: ${ee.message||"Unknown error"}`))}},A=()=>{if(!c)throw new Error("No operation selected");const me=Kv[c],$e={action:me.action};return(c==="cancelOrder"||c==="changeLeverage"||c==="changeMarginRatio"||c==="internTransfer")&&($e.address=g),me.fields.forEach(ue=>{const ee=h[ue.key];if(ee===void 0||ee===""){if(ue.required)throw new Error(`${ue.label} is required`);return}let le=ee;ue.convertToSatoshi&&ue.type==="number"&&(le=Ht(parseFloat(ee))),c==="bucketTransfer"&&ue.key==="assetId"||(c==="extractToBucket"||c==="withdrawFromBucket"||c==="bankMint"||c==="bankTransfer")&&ue.key==="assetId"?$e.asset=le:c==="closePosition"?ue.key==="quantity"?$e.closeSize=le:ue.key==="marketPrice"?$e.marketPrice=le:$e[ue.key]=le:c==="placeOrder"?ue.key==="side"?$e.side=ee.toUpperCase():ue.key==="orderType"?$e.orderType=ee.toUpperCase():$e[ue.key]=le:$e[ue.key]=le}),$e},Q=me=>{const $e={name:"Morpheum",version:"1",chainId:l,verifyingContract:"0x0000000000000000000000000000000000000000"},ue={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Message:[]};Object.keys(me).forEach(le=>{le==="action"?ue.Message.push({name:"action",type:"string"}):le==="owner"?ue.Message.push({name:"owner",type:"address"}):le==="nonce"?ue.Message.push({name:"nonce",type:"string"}):le==="deadline"?ue.Message.push({name:"deadline",type:"uint256"}):le==="address"?ue.Message.push({name:"address",type:"address"}):typeof me[le]=="string"&&me[le].startsWith("0x")?ue.Message.push({name:le,type:"address"}):typeof me[le]=="number"||/^\d+$/.test(me[le])?ue.Message.push({name:le,type:"uint256"}):ue.Message.push({name:le,type:"string"})});const ee={};return Object.keys(me).forEach(le=>{le==="owner"||le==="address"||le.startsWith("0x")&&le.length===42?ee[le]=me[le].toLowerCase():ee[le]=me[le]}),{domain:$e,types:ue,primaryType:"Message",message:ee}},J=async()=>{if(!f.trim())throw new Error("Mnemonic is required for WASM signing");const me=Jh.fromPhrase(f.trim(),"","m/44'/60'/0'/0/0");if(me.address.toLowerCase()!==g.toLowerCase())throw new Error(`Address mismatch: derived ${me.address} does not match ${g}`);const $e=BigInt(me.privateKey),ue=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if($e===0n||$e>=ue)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const le=$e.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(le))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return le},K=async()=>{var me,$e;if(!c){alert("Please select an operation first");return}if(!g){alert("Please set owner address");return}if(!y){alert("Please generate nonce");return}if(!w){alert("Please generate deadline");return}O(!0),E(null);try{const ue=A();ue.owner=g.toLowerCase(),ue.nonce=y,ue.deadline=w;const ee=Q(ue),le=await a({domain:ee.domain,types:ee.types,primaryType:ee.primaryType,message:ee.message});E({success:!0,signature:le,typedData:{payload:ue,typedData:ee}})}catch(ue){ue.code===4001||(me=ue.message)!=null&&me.includes("User rejected")||($e=ue.message)!=null&&$e.includes("rejected")?E({success:!1,error:"User rejected the signature request"}):(console.error("Error signing:",ue),E({success:!1,error:ue.message||"Unknown error during signing"}))}finally{O(!1)}},Z=async()=>{if(!c){alert("Please select an operation first");return}if(!g){alert("Please set owner address");return}if(!y){alert("Please generate nonce");return}if(!w){alert("Please generate deadline");return}if(!f.trim()){alert("Please enter mnemonic for WASM signing");return}if(!vt.isReady())try{if(await vt.initialize(),!vt.isReady()){alert("WASM module failed to initialize");return}}catch(me){alert(`Failed to initialize WASM: ${me.message||"Unknown error"}`);return}R(!0),E(null);try{const me=A();me.owner=g.toLowerCase(),me.nonce=y,me.deadline=w;const $e=await J(),ue=Math.floor(Date.now()/1e3),ee=parseInt(w,10),le={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:ue,payload:me,deadline:ee},te=await vt.generateSingleSignature(JSON.stringify(le),$e,g.toLowerCase());if(!te.success||!te.signature)throw new Error(te.error||"Failed to generate signature");const ce=Q(me);E({success:!0,signature:te.signature,typedData:{payload:me,typedData:ce,eip712Tx:le}})}catch(me){console.error("Error signing with WASM:",me),E({success:!1,error:me.message||"Unknown error during WASM signing"})}finally{R(!1)}},se=c?Kv[c]:null;return m.jsxs("div",{className:"component",children:[m.jsx("h3",{children:"Functional Signer"}),m.jsx("p",{children:"Sign EIP-712 messages for Morpheum protocol operations"}),m.jsxs("div",{className:`agent-delegation-step ${c?"connected":""}`,children:[m.jsxs("h4",{children:["Step 1: Select Operation ",c&&""]}),c?m.jsxs("div",{children:[m.jsxs("p",{style:{marginBottom:"1rem"},children:[m.jsx("strong",{children:"Selected:"})," ",se==null?void 0:se.label]}),m.jsx("button",{className:"button secondary",onClick:()=>{u(null),d({}),E(null)},children:"Change Operation"})]}):m.jsx("div",{className:"agent-delegation-wallet-buttons",children:Object.entries(Kv).map(([me,$e])=>m.jsx("button",{className:"button",onClick:()=>u(me),children:$e.label},me))})]}),c?m.jsxs("div",{className:`agent-delegation-step ${g&&y&&w?"connected":""}`,children:[m.jsxs("h4",{children:["Step 2: Configure Parameters"," ",g&&y&&w&&""]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"walletConnection",children:"Wallet Connection:"}),q?m.jsxs("div",{className:"agent-delegation-connected-info",children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Connected:"})," ",z||"Wallet",g&&m.jsxs("div",{className:"agent-delegation-address",children:["Address: ",g]})]}),m.jsx("button",{className:"button secondary",onClick:()=>{i(),S([]),b("")},children:"Disconnect"})]}):m.jsxs("div",{children:[m.jsx("button",{className:"button",onClick:H,disabled:r||!$,children:r?"Connecting...":"Connect Wallet"}),_.length>0&&!g&&m.jsxs("div",{style:{marginTop:"1rem"},children:[m.jsx("label",{children:"Select Address:"}),_.map(me=>m.jsx("button",{className:"button secondary",onClick:()=>b(me),style:{display:"block",marginTop:"0.5rem",fontFamily:"monospace",fontSize:"0.9rem"},children:me},me))]})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic (for address generation):"}),m.jsx("textarea",{id:"mnemonic",value:f,onChange:me=>p(me.target.value),placeholder:"Enter mnemonic to generate address...",rows:2}),m.jsx("button",{className:"button secondary",onClick:G,style:{marginTop:"0.5rem"},children:"Generate Address from Mnemonic"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[m.jsx("input",{id:"ownerAddress",type:"text",value:g,onChange:me=>b(me.target.value),placeholder:"0x...",style:{flex:1}}),m.jsx("button",{className:"button secondary",onClick:G,disabled:!f.trim(),children:"Generate"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[m.jsx("input",{id:"nonce",type:"text",value:y,onChange:me=>v(me.target.value),placeholder:"Auto-generated timestamp"}),m.jsx("button",{className:"button secondary",onClick:F,children:"Generate"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"deadline",children:"Deadline (Unix timestamp):"}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[m.jsx("input",{id:"deadline",type:"text",value:w,onChange:me=>k(me.target.value),placeholder:"Auto-generated (1 hour from now)"}),m.jsx("button",{className:"button secondary",onClick:V,children:"Generate"})]})]}),se&&m.jsxs(m.Fragment,{children:[m.jsx("h5",{style:{marginTop:"1.5rem",marginBottom:"1rem"},children:"Operation Parameters:"}),se.fields.map(me=>{var $e;return m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:me.key,children:[me.label,me.required&&" *"]}),me.type==="select"?m.jsxs("select",{id:me.key,value:h[me.key]||"",onChange:ue=>d({...h,[me.key]:ue.target.value}),children:[m.jsxs("option",{value:"",children:["Select ",me.label]}),($e=me.options)==null?void 0:$e.map(ue=>m.jsx("option",{value:ue,children:ue},ue))]}):m.jsx("input",{id:me.key,type:me.type,value:h[me.key]||"",onChange:ue=>d({...h,[me.key]:ue.target.value}),placeholder:me.placeholder}),me.convertToSatoshi&&m.jsx("small",{className:"agent-delegation-small-text",children:"Will be converted to satoshi format"})]},me.key)})]})]}):m.jsxs("div",{className:"agent-delegation-step disabled",children:[m.jsx("h4",{children:"Step 2: Configure Parameters"}),m.jsx("p",{className:"agent-delegation-disabled-text",children:"Please select an operation in Step 1 to continue."})]}),c&&g&&y&&w?m.jsxs("div",{className:"agent-delegation-step",children:[m.jsx("h4",{children:"Step 3: Sign Message"}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[m.jsx("button",{className:"button",onClick:K,disabled:P||M||!g||!y||!w||((se==null?void 0:se.fields.some(me=>me.required&&!h[me.key]))??!1),children:P?"Signing...":"Sign from Wallet"}),m.jsx("button",{className:"button",onClick:Z,disabled:P||M||!g||!y||!w||!f.trim()||((se==null?void 0:se.fields.some(me=>me.required&&!h[me.key]))??!1),children:M?"Signing...":"Sign by WASM"})]})]}):m.jsxs("div",{className:"agent-delegation-step disabled",children:[m.jsx("h4",{children:"Step 3: Sign Message"}),m.jsx("p",{className:"agent-delegation-disabled-text",children:"Please complete Step 2 to continue."})]}),C&&m.jsx("div",{className:`output ${C.success?"success":"error"}`,children:C.success?m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"Signature:"}),m.jsx("br",{}),C.signature,m.jsx("br",{}),m.jsx("br",{}),C.typedData&&m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"Payload & Typed Data:"}),m.jsx("br",{}),m.jsx("pre",{className:"agent-delegation-pre",children:JSON.stringify(C.typedData,null,2)})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"Error:"}),m.jsx("br",{}),C.error]})})]})}function tve(){var U,_e,Ie,me,$e,ue,ee,le,te,ce,je,de,Ae,Le,ve,he,ge;const{ownerAddress:n,setOwnerAddress:e,agentAddress:r,setAgentAddress:i,agentPrivateKey:s,expiresInDays:o,setExpiresInDays:a,permissions:l,setPermissions:c,agentName:u,setAgentName:h,nonce:d,setNonce:f,result:p,loading:g,generateAgentKeypair:b,isMetaMaskConnected:y,isPhantomConnected:v,isOneKeyConnected:w,isReady:k}=Rge(),{connect:_,connectors:S,isPending:C}=QX(),{disconnect:E}=JX(),{address:P,isConnected:O}=IR(),{signTypedDataAsync:M}=RR(),R=VX(),[j,B]=D.useState([]),[L,$]=D.useState(null),[z,W]=D.useState(!1),q=()=>{if(!n||!r)throw new Error("Owner and agent addresses are required");const pe=l.split(",").map(Ye=>Ye.trim()).filter(Ye=>Ye.length>0),fe=Math.floor(Date.now()/1e3)+o*24*60*60,Re={name:"Morpheum",version:"",chainId:R,verifyingContract:"0x0000000000000000000000000000000000000000"},Ve={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],AgentApproval:[{name:"owner",type:"address"},{name:"agent",type:"address"},{name:"agentName",type:"string"},{name:"expiresInDays",type:"uint256"},{name:"permissions",type:"string[]"},{name:"nonce",type:"string"},{name:"deadline",type:"uint256"}]},Xe={owner:n.toLowerCase(),agent:r.toLowerCase(),agentName:u||"",expiresInDays:o,permissions:pe,nonce:d||Date.now().toString(),deadline:fe};return{domain:Re,types:Ve,primaryType:"AgentApproval",message:Xe}},V=async()=>{var pe,fe;if(!n||!r){$({success:!1,error:"Owner and agent addresses are required"});return}W(!0),$(null);try{const Re=q(),Ve=await M({domain:Re.domain,types:Re.types,primaryType:Re.primaryType,message:Re.message});$({success:!0,signature:Ve,typedData:Re})}catch(Re){Re.code===4001||(pe=Re.message)!=null&&pe.includes("User rejected")||(fe=Re.message)!=null&&fe.includes("rejected")?$({success:!1,error:"User rejected the signature request"}):(console.error("Error signing:",Re),$({success:!1,error:Re.message||"Unknown error during signing"}))}finally{W(!1)}},F=typeof window<"u"&&!!((U=window.ethereum)!=null&&U.isMetaMask),G=typeof window<"u"&&(!!((_e=window.phantom)!=null&&_e.ethereum)||!!((Ie=window.ethereum)!=null&&Ie.isPhantom)),H=typeof window<"u"&&(!!((me=window.$onekey)!=null&&me.ethereum)||!!(($e=window.ethereum)!=null&&$e.isOneKey)),A=S.find(pe=>pe.id==="injected");D.useEffect(()=>{var pe,fe,Re;console.log("[Phantom Debug] Component mounted/updated"),console.log("[Phantom Debug] Window object:",typeof window<"u"?"available":"undefined"),console.log("[Phantom Debug] window.phantom:",window.phantom),console.log("[Phantom Debug] window.ethereum:",window.ethereum),console.log("[Phantom Debug] window.ethereum?.isMetaMask:",(pe=window.ethereum)==null?void 0:pe.isMetaMask),console.log("[Phantom Debug] window.ethereum?.isPhantom:",(fe=window.ethereum)==null?void 0:fe.isPhantom),console.log("[Phantom Debug] window.ethereum?.isOneKey:",(Re=window.ethereum)==null?void 0:Re.isOneKey),console.log("[Phantom Debug] isPhantomAvailable:",G),console.log("[Phantom Debug] All connectors:",S),console.log("[Phantom Debug] Injected connector:",A),console.log("[Phantom Debug] Injected connector ID:",A==null?void 0:A.id),console.log("[Phantom Debug] Injected connector name:",A==null?void 0:A.name),console.log("[Phantom Debug] isConnecting:",C)},[S,A,G,C]);const Q=n&&P&&n.toLowerCase()===P.toLowerCase(),J=typeof window<"u"?(ue=window.phantom)!=null&&ue.ethereum||(ee=window.ethereum)!=null&&ee.isPhantom?"Phantom":(le=window.$onekey)!=null&&le.ethereum||(te=window.ethereum)!=null&&te.isOneKey?"OneKey":(ce=window.ethereum)!=null&&ce.isMetaMask?"MetaMask":null:null,K=y||O&&Q&&J==="MetaMask"||n&&J==="MetaMask"&&F,Z=v||O&&Q&&J==="Phantom"||n&&J==="Phantom"&&G,se=w||O&&Q&&J==="OneKey"||n&&J==="OneKey"&&H,be=K?"MetaMask":Z?"Phantom":se?"OneKey":null,Oe=K||Z||se,Ke=j.length>0||Oe,De=Oe&&n&&r;D.useEffect(()=>{!O&&j.length>0&&(B([]),n&&e(""))},[O,j.length,n]),D.useEffect(()=>{console.log("[Connection Debug] wagmiIsConnected:",O),console.log("[Connection Debug] wagmiAddress:",P),console.log("[Connection Debug] ownerAddress:",n),console.log("[Connection Debug] isPhantomConnected (hook):",v),console.log("[Connection Debug] isMetaMaskConnected (hook):",y),console.log("[Connection Debug] isOneKeyConnected (hook):",w),console.log("[Connection Debug] detectedWallet:",J),console.log("[Connection Debug] hasMatchingAddress:",Q),console.log("[Connection Debug] isPhantomConnectedEnhanced:",Z),console.log("[Connection Debug] isWalletConnected:",Oe),console.log("[Connection Debug] availableAddresses:",j)},[O,P,n,v,y,w,J,Q,Z,Oe,j]);const Pe=async()=>{if(!F){alert("MetaMask wallet is not installed. Please install MetaMask wallet extension.");return}try{const pe=window.ethereum;if(pe){const fe=await pe.request({method:"eth_requestAccounts"});fe&&fe.length>0&&(B(fe),fe.length===1&&e(fe[0]))}A?(await _({connector:A}),await new Promise(fe=>setTimeout(fe,300))):alert("MetaMask connector not found. Please ensure MetaMask wallet is installed.")}catch(pe){pe.code===4001?alert("User rejected the connection request."):(console.error("Error connecting to MetaMask:",pe),alert(`Failed to connect to MetaMask: ${pe.message||"Unknown error"}`))}},We=async()=>{var pe,fe,Re,Ve,Xe,Ye,He;if(console.log("[Phantom Debug] Starting connection process..."),console.log("[Phantom Debug] isPhantomAvailable:",G),console.log("[Phantom Debug] window.phantom:",window.phantom),console.log("[Phantom Debug] window.ethereum:",window.ethereum),console.log("[Phantom Debug] window.ethereum?.isPhantom:",(pe=window.ethereum)==null?void 0:pe.isPhantom),!G){console.error("[Phantom Debug] Phantom wallet not available"),alert("Phantom wallet is not installed. Please install Phantom wallet extension.");return}try{let ot=(fe=window.phantom)==null?void 0:fe.ethereum;if(console.log("[Phantom Debug] phantomProvider (window.phantom.ethereum):",ot),!ot&&window.phantom){const ye=window.phantom;typeof ye.request=="function"&&(ot=ye,console.log("[Phantom Debug] Using window.phantom as provider"))}if(!ot&&((Re=window.ethereum)!=null&&Re.isPhantom)&&(ot=window.ethereum,console.log("[Phantom Debug] Using window.ethereum as provider (isPhantom=true)")),!ot){console.error("[Phantom Debug] No valid Phantom provider found"),console.error("[Phantom Debug] Available providers:",{hasWindowPhantom:!!window.phantom,hasPhantomEthereum:!!((Ve=window.phantom)!=null&&Ve.ethereum),phantomHasRequest:typeof((Xe=window.phantom)==null?void 0:Xe.request)=="function",hasWindowEthereum:!!window.ethereum,ethereumIsPhantom:(Ye=window.ethereum)==null?void 0:Ye.isPhantom,ethereumIsMetaMask:(He=window.ethereum)==null?void 0:He.isMetaMask}),alert("Phantom wallet provider not found. Please ensure Phantom wallet is installed and enabled.");return}console.log("[Phantom Debug] Using provider, requesting accounts...");const rt=await ot.request({method:"eth_requestAccounts"});console.log("[Phantom Debug] Accounts received:",rt),rt&&rt.length>0&&(B(rt),console.log("[Phantom Debug] Available addresses:",rt),rt.length===1&&(console.log("[Phantom Debug] Auto-selecting single address:",rt[0]),e(rt[0]))),console.log("[Phantom Debug] Waiting 100ms before wagmi connection..."),await new Promise(ye=>setTimeout(ye,100)),console.log("[Phantom Debug] injectedConnector:",A),console.log("[Phantom Debug] All connectors:",S),A?(console.log("[Phantom Debug] Connecting via wagmi injected connector..."),await _({connector:A}),console.log("[Phantom Debug] Wagmi connect() called"),console.log("[Phantom Debug] Waiting for wagmi state update..."),await new Promise(ye=>setTimeout(ye,300)),console.log("[Phantom Debug] Connection should be complete")):(console.error("[Phantom Debug] Injected connector not found"),alert("Phantom connector not found. Please ensure Phantom wallet is installed."))}catch(ot){console.error("[Phantom Debug] Error caught:",ot),console.error("[Phantom Debug] Error code:",ot.code),console.error("[Phantom Debug] Error message:",ot.message),console.error("[Phantom Debug] Error stack:",ot.stack),ot.code===4001?(console.log("[Phantom Debug] User rejected the connection"),alert("User rejected the connection request.")):(console.error("[Phantom Debug] Unknown error during connection"),alert(`Failed to connect to Phantom: ${ot.message||"Unknown error"}`))}},nt=async()=>{var pe;if(!H){alert("OneKey wallet is not installed. Please install OneKey wallet extension.");return}try{const fe=((pe=window.$onekey)==null?void 0:pe.ethereum)||window.ethereum;if(!fe){alert("OneKey wallet provider not found. Please ensure OneKey wallet is installed and enabled.");return}const Re=await fe.request({method:"eth_requestAccounts"});Re&&Re.length>0&&(B(Re),Re.length===1&&e(Re[0])),A?(await _({connector:A}),await new Promise(Ve=>setTimeout(Ve,300))):alert("OneKey connector not found. Please ensure OneKey wallet is installed.")}catch(fe){fe.code===4001?alert("User rejected the connection request."):(console.error("Error connecting to OneKey:",fe),alert(`Failed to connect to OneKey: ${fe.message||"Unknown error"}`))}};return m.jsxs("div",{className:"component",children:[m.jsx("h3",{children:"Agent Delegation"}),m.jsx("p",{children:"Approve an agent private key to act on behalf of the owner wallet"}),m.jsxs("div",{className:`agent-delegation-step ${Ke?"connected":""}`,children:[m.jsxs("h4",{children:["Step 1: Connect Wallet ",Oe&&n&&""]}),Ke?j.length>0&&!n?m.jsxs("div",{children:[m.jsxs("p",{style:{marginBottom:"1rem"},children:[m.jsx("strong",{children:"Connected:"})," ",be||"Wallet"]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"addressSelect",children:"Select an address to use:"}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:j.map(pe=>m.jsx("button",{className:`button ${(n==null?void 0:n.toLowerCase())===pe.toLowerCase()?"":"secondary"}`,onClick:()=>e(pe),style:{textAlign:"left",justifyContent:"flex-start",fontFamily:"monospace",fontSize:"0.9rem"},children:pe},pe))})]}),m.jsx("button",{className:"button secondary",onClick:()=>{E(),B([]),e("")},style:{marginTop:"1rem"},children:"Disconnect"})]}):m.jsxs("div",{className:"agent-delegation-connected-info",children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Connected:"})," ",be,n&&m.jsxs("div",{className:"agent-delegation-address",children:["Address: ",n]})]}),m.jsx("button",{className:"button secondary",onClick:()=>{E(),B([]),e("")},children:"Disconnect"})]}):m.jsxs("div",{className:"agent-delegation-wallet-buttons",children:[F&&m.jsx("button",{className:"button",onClick:Pe,disabled:C||!A,children:C?"Connecting...":"Connect MetaMask"}),G&&m.jsx("button",{className:"button",onClick:We,disabled:C||!A,children:C?"Connecting...":"Connect Phantom"}),H&&m.jsx("button",{className:"button",onClick:nt,disabled:C||!A,children:C?"Connecting...":"Connect OneKey"}),!F&&!G&&!H&&m.jsx("p",{className:"agent-delegation-error-message",children:"No supported wallet detected. Please install MetaMask, Phantom, or OneKey wallet."})]})]}),Oe&&n?m.jsxs("div",{className:`agent-delegation-step ${De?"connected":""}`,children:[m.jsxs("h4",{children:["Step 2: Configure Agent Delegation ",De&&""]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),m.jsx("input",{id:"ownerAddress",type:"text",value:n,readOnly:!0,style:{fontFamily:"monospace",fontSize:"0.9rem",backgroundColor:"rgba(255, 255, 255, 0.05)",cursor:"not-allowed"}}),m.jsxs("small",{className:"agent-delegation-small-text",children:["This address is from your connected ",be," wallet."]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"agentAddress",children:"Agent Address:"}),m.jsxs("div",{className:"agent-delegation-input-group",children:[m.jsx("input",{id:"agentAddress",type:"text",value:r,onChange:pe=>i(pe.target.value),placeholder:"0x...",className:"agent-delegation-input-flex"}),m.jsx("button",{className:"button secondary agent-delegation-button-compact",onClick:b,disabled:g||!k,children:"Generate Keypair"})]})]}),s&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"agentPrivateKey",children:"Agent Private Key (save securely):"}),m.jsx("input",{id:"agentPrivateKey",type:"text",value:s,readOnly:!0,className:"agent-delegation-private-key"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"agentName",children:"Agent Name (optional):"}),m.jsx("input",{id:"agentName",type:"text",value:u,onChange:pe=>h(pe.target.value),placeholder:"enter you agent name"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"expiresInDays",children:"Expires In Days:"}),m.jsx("input",{id:"expiresInDays",type:"number",value:o,onChange:pe=>a(parseInt(pe.target.value)||180),min:"1",max:"365"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"permissions",children:"Permissions (comma-separated):"}),m.jsx("input",{id:"permissions",type:"text",value:l,onChange:pe=>c(pe.target.value),placeholder:"clob::submit_order,clob::cancel_order"}),m.jsx("small",{className:"agent-delegation-small-text",children:"Example: clob::submit_order, clob::cancel_order, clob::modify_order"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),m.jsx("input",{id:"nonce",type:"text",value:d,onChange:pe=>f(pe.target.value),placeholder:Date.now().toString()})]})]}):m.jsxs("div",{className:"agent-delegation-step disabled",children:[m.jsx("h4",{children:"Step 2: Configure Agent Delegation"}),m.jsx("p",{className:"agent-delegation-disabled-text",children:Ke&&!n?"Please select an address in Step 1 to continue.":"Please connect a wallet in Step 1 to continue."})]}),De?m.jsxs("div",{className:"agent-delegation-step",children:[m.jsx("h4",{children:"Step 3: Prepare and Sign Agent Approval"}),m.jsxs("div",{className:"agent-delegation-button-group",children:[y&&m.jsx("button",{className:"button",onClick:V,disabled:z||!n||!r,children:z?"Signing with MetaMask...":"Sign Agent Approval (MetaMask)"}),v&&m.jsx("button",{className:"button",onClick:V,disabled:z||!n||!r,children:z?"Signing with Phantom...":"Sign Agent Approval (Phantom)"}),w&&m.jsx("button",{className:"button",onClick:V,disabled:z||!n||!r,children:z?"Signing with OneKey...":"Sign Agent Approval (OneKey)"})]})]}):m.jsxs("div",{className:"agent-delegation-step disabled",children:[m.jsx("h4",{children:"Step 3: Prepare and Sign Agent Approval"}),m.jsx("p",{className:"agent-delegation-disabled-text",children:"Please complete Step 1 (connect wallet) and Step 2 (configure addresses) to continue."})]}),(p||L)&&m.jsx("div",{className:`output ${(je=p||L)!=null&&je.success?"success":"error"}`,children:(de=p||L)!=null&&de.success?m.jsxs(m.Fragment,{children:[((Ae=p||L)==null?void 0:Ae.signature)&&m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"Agent Approval Signature:"}),m.jsx("br",{}),(Le=p||L)==null?void 0:Le.signature,m.jsx("br",{}),m.jsx("br",{})]}),((ve=p||L)==null?void 0:ve.typedData)&&m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"EIP-712 Typed Data:"}),m.jsx("br",{}),m.jsx("pre",{className:"agent-delegation-pre",children:JSON.stringify((he=p||L)==null?void 0:he.typedData,null,2)}),m.jsx("br",{}),m.jsx("strong",{children:"Usage:"}),m.jsx("br",{}),"Signature received from wallet. The typed data structure is shown above."]})]}):m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"Error:"}),m.jsx("br",{}),(ge=p||L)==null?void 0:ge.error]})})]})}function nve({status:n}){const e=()=>n.loading?"loading":n.loaded?"success":n.error?"error":"loading",r=()=>n.loading?"Loading WASM...":n.loaded?"WASM Ready":n.error?"WASM Error":"Unknown";return m.jsxs("div",{className:"App-section",children:[m.jsx("h3",{children:"WASM Status"}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[m.jsx("span",{className:`status ${e()}`,children:r()}),n.loading&&m.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"Initializing WebAssembly module..."}),n.loaded&&m.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"morm_signer.wasm loaded successfully"}),n.error&&m.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:n.error})]})]})}const Pf="https://router.morpheum.io",v0="wss://router.morpheum.io/websocket",zw="ios-device-1234567890",rve=({isRunning:n,onClick:e})=>m.jsx("button",{onClick:e,disabled:n,style:{color:"#fff",backgroundColor:n?"#ccc":"#007bff",cursor:n?"not-allowed":"pointer"},children:n?"Running Tests...":"Run All Tests"}),ive=({mnemonic:n,baseURL:e,onboardLoading:r,isRunning:i,onOnboard:s})=>{const o=r||i||!n||n.trim()==="";return m.jsx("button",{onClick:()=>{n&&n.trim()!==""&&s(n,e)},disabled:o,style:{color:o?"#ccc":"#fff",backgroundColor:o?"#ccc":"#28a745",cursor:o?"not-allowed":"pointer"},children:r?"Onboarding...":"Onboard & Get Auth Token"})},sve=({isRunning:n,onClick:e})=>m.jsx("button",{onClick:e,disabled:n,style:{color:n?"#ccc":"#fff",backgroundColor:n?"#ccc":"#dc3545",cursor:n?"not-allowed":"pointer"},children:"Clear Results"}),ove=({onClick:n})=>m.jsx("button",{onClick:n,className:"sdk-test-button-dismiss",children:"Dismiss"}),ave=({result:n})=>m.jsxs("div",{className:`sdk-test-result-item ${n.success?"success":"error"}`,children:[m.jsxs("div",{className:"sdk-test-result-content",children:[m.jsxs("div",{className:"sdk-test-result-message",children:[n.success?"":""," ",n.message]}),n.error&&m.jsxs("div",{className:"sdk-test-result-error",children:["Error: ",n.error]}),n.data&&m.jsxs("details",{className:"sdk-test-result-data",children:[m.jsx("summary",{children:"View Data"}),m.jsx("pre",{children:JSON.stringify(n.data,null,2)})]})]}),m.jsx("div",{className:"sdk-test-result-timestamp",children:new Date(n.timestamp).toLocaleTimeString()})]}),lve=({sectionName:n,isExpanded:e,onToggle:r})=>m.jsxs("h2",{className:"sdk-test-section-header",onClick:r,children:[m.jsx("span",{children:n}),m.jsx("span",{className:"sdk-test-section-chevron",children:e?"":""})]});function cve(){var De,Pe,We,nt;const[n,e]=D.useState(Pf),[r,i]=D.useState(""),[s,o]=D.useState(""),[a,l]=D.useState(""),[c,u]=D.useState(zw),[h,d]=D.useState({}),[f,p]=D.useState(!1),[g,b]=D.useState(new Set),y=D.useRef(null),v=D.useRef(null),w=D.useRef(n),k=D.useRef([]),_=D.useRef(""),{markets:S,fetchMarkets:C}=tc({baseURL:n,sessionToken:s,autoFetchMarkets:!1}),{mnemonic:E,walletAddress:P,authToken:O,loading:M,error:R,onboard:j,clearError:B,setMnemonic:L}=Bu();D.useEffect(()=>{E||L("legal winner thank year wave sausage worth useful legal winner thank yellow")},[E,L]);const $=D.useRef(E||"");D.useEffect(()=>{$.current=E||""},[E]);const{buckets:z,loading:W,error:q,refresh:V}=TJ({baseURL:n,authToken:s||a,walletAddress:P||void 0,refreshInterval:0});D.useEffect(()=>{O&&(l(O),localStorage.setItem("authToken",O))},[O]),D.useEffect(()=>{a&&a.trim()!==""&&localStorage.setItem("authToken",a)},[a]);const F=D.useRef(f);D.useEffect(()=>{F.current===!0&&f===!1&&setTimeout(()=>{const U=Object.values(h).flatMap($e=>$e.results),_e=U.filter($e=>$e.success).length,Ie=U.length,me=Ie-_e;Ie>0&&(me===0?Je.success("All tests passed",{description:`${Ie} test(s) completed successfully.`,duration:5e3}):Je.warning("Tests completed with failures",{description:`${_e}/${Ie} tests passed. ${me} test(s) failed.`,duration:6e3}))},100),F.current=f},[f,h]),D.useEffect(()=>{const U=localStorage.getItem("authToken");U&&!a&&l(U)},[]);const G=S.length>0?(((De=S.find(U=>U.active))==null?void 0:De.market_id)??S[0].market_id)||(((We=(Pe=S.find(U=>U.active))==null?void 0:Pe.id)==null?void 0:We.toString())??((nt=S[0].id)==null?void 0:nt.toString())??""):null,H=G??r;D.useEffect(()=>{G&&r!==G&&i(G)},[G]),D.useEffect(()=>{w.current=n},[n]);const A=(U,_e)=>{d(Ie=>{const me=Ie[U]||{name:U,results:[]};return{...Ie,[U]:{...me,results:[...me.results,_e]}}})},Q=()=>{d({}),b(new Set)},J=U=>{b(_e=>{const Ie=new Set(_e);return Ie.has(U)?Ie.delete(U):Ie.add(U),Ie})};D.useEffect(()=>{const U=Object.keys(h).filter(_e=>h[_e].results.length>0);U.length>0&&b(_e=>{const Ie=new Set(_e);return U.forEach(me=>Ie.add(me)),Ie})},[h]);const K=()=>{const U="Utilities";A(U,{success:!0,message:"Testing utility functions...",timestamp:Date.now()});try{const _e=Ht(1);A(U,{success:_e==="100000000",message:`toSatoshi(1.0) = ${_e}`,data:{expected:"100000000",got:_e},timestamp:Date.now()});const Ie=Ht("1.5");A(U,{success:Ie==="150000000",message:`toSatoshi("1.5") = ${Ie}`,data:{expected:"150000000",got:Ie},timestamp:Date.now()});const me=it("100000000");A(U,{success:me===1,message:`fromSatoshi("100000000") = ${me}`,data:{expected:1,got:me},timestamp:Date.now()});const $e=AR(1);A(U,{success:$e===1e8,message:`toSatoshiUint64(1.0) = ${$e}`,data:{expected:1e8,got:$e},timestamp:Date.now()});const ue=UD("100000000"),ee=UD("abc");A(U,{success:ue&&!ee,message:`isValidSatoshi tests: "100000000"=${ue}, "abc"=${ee}`,data:{valid1:ue,valid2:ee},timestamp:Date.now()});const le=[1,1.5,2],te=ZX(le),ce=eQ(te);A(U,{success:ce.length===3,message:`Batch conversion: ${le.length} items`,data:{input:le,satoshi:te,decimal:ce},timestamp:Date.now()}),A(U,{success:tu===1e8,message:`SATOSHI_SCALE = ${tu}`,data:{expected:1e8,got:tu},timestamp:Date.now()})}catch(_e){A(U,{success:!1,message:"Utility test error",error:_e.message,timestamp:Date.now()})}},Z=async(U="Authentication")=>{if(!P||P.trim()===""){A(U,{success:!1,message:"Authentication skipped: Wallet address required",timestamp:Date.now()});return}if(!vt.isReady()){A(U,{success:!1,message:"Authentication failed: mormSigner not loaded. Please initialize mormSigner first for address generation.",timestamp:Date.now()});return}try{A(U,{success:!0,message:"Starting authentication (onboarding) with ethers.js EIP-712 signing...",timestamp:Date.now()});const{onboardAndGetAuthToken:_e}=await RX(async()=>{const{onboardAndGetAuthToken:me}=await Promise.resolve().then(()=>Sge);return{onboardAndGetAuthToken:me}},void 0);if(A(U,{success:!0,message:"Calling onboardAndGetAuthToken (handles nonce, EIP-712 signing with ethers.js, and API request)...",timestamp:Date.now()}),!E)throw new Error("Mnemonic is required for authentication");const Ie=await _e(E,w.current);if(!Ie.success||!Ie.authToken)throw new Error(Ie.error||"Onboarding failed");l(Ie.authToken),localStorage.setItem("authToken",Ie.authToken),A(U,{success:!0,message:"AUTHENTICATION SUCCESSFUL!",data:{walletAddress:P,authToken:Ie.authToken.substring(0,32)+"...",refreshToken:Ie.refreshToken,expiresAt:Ie.expiresAt},timestamp:Date.now()})}catch(_e){const Ie=_e.message||String(_e);A(U,{success:!1,message:`Authentication failed: ${Ie}`,error:Ie,timestamp:Date.now()})}},se=async()=>{var $e;const U="Wallet Specific";v.current=new ar({baseURL:w.current}),s&&v.current&&v.current.setSessionToken(s),A(U,{success:!0,message:"Waiting for wallet address to be available...",timestamp:Date.now()});const _e=5e3,Ie=200;let me=0;for(;!P||P.trim()==="";){if(me>=_e){A(U,{success:!1,message:"Timeout: Wallet address not available after 5 seconds",error:"Wallet address is required for wallet-specific tests. Please ensure mnemonic is provided.",timestamp:Date.now()});return}await new Promise(ue=>setTimeout(ue,Ie)),me+=Ie}if(!P||P.trim()===""){A(U,{success:!1,message:"Wallet address is required for wallet-specific tests",error:"Wallet address not available",timestamp:Date.now()});return}A(U,{success:!0,message:`Wallet address available: ${P.substring(0,10)}...`,timestamp:Date.now()});try{A(U,{success:!0,message:`Testing getBalance() for asset "MORM" at address ${P.substring(0,10)}...`,timestamp:Date.now()});try{const ee=await v.current.getBalance(P,"MORM"),le=(ee==null?void 0:ee.balance)||(ee==null?void 0:ee.amount)||(ee==null?void 0:ee.value)||"N/A",te=typeof le=="string"?le:JSON.stringify(le);A(U,{success:!!ee,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: MORM | Balance: ${te} (raw satoshi format)`,data:{balance:ee,asset:"MORM",walletAddress:P.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(ee){A(U,{success:!1,message:'getBalance() failed for asset "MORM" (may require authentication)',error:ee.message,data:{asset:"MORM",walletAddress:P.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}A(U,{success:!0,message:`Testing getBalance() for asset "USDC" at address ${P.substring(0,10)}...`,timestamp:Date.now()});try{const ee=await v.current.getBalance(P,"USDC"),le=(ee==null?void 0:ee.balance)||(ee==null?void 0:ee.amount)||(ee==null?void 0:ee.value)||"N/A",te=typeof le=="string"?le:JSON.stringify(le);A(U,{success:!!ee,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: USDC | Balance: ${te} (raw satoshi format)`,data:{balance:ee,asset:"USDC",walletAddress:P.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(ee){A(U,{success:!1,message:'getBalance() failed for asset "USDC" (may require authentication)',error:ee.message,data:{asset:"USDC",walletAddress:P.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}try{const ee=await v.current.getBalanceDecimal(P,"USDC");A(U,{success:!!ee,message:"getBalanceDecimal() - GET /bank/v1/balance/{address}",data:ee,timestamp:Date.now()})}catch(ee){A(U,{success:!1,message:"getBalanceDecimal() failed",error:ee.message,timestamp:Date.now()})}try{const ee=await v.current.getBalances(P);A(U,{success:!!ee,message:"getBalances() - GET /bank/v1/balances/{address}",data:ee,timestamp:Date.now()})}catch(ee){A(U,{success:!1,message:"getBalances() failed (may require authentication)",error:ee.message,timestamp:Date.now()})}try{const ee=await v.current.getPositions(P);A(U,{success:Array.isArray(ee),message:`getPositions() - GET /bucket/v1/address/{address}/positions returned ${Array.isArray(ee)?ee.length:0} positions`,data:ee,timestamp:Date.now()})}catch(ee){A(U,{success:!1,message:"getPositions() failed",error:ee.message,timestamp:Date.now()})}let ue=[];try{const ee=await v.current.getOrders(P);ue=(ee==null?void 0:ee.orders)||[];const le=ee&&(Array.isArray(ue)||ee.total_count!==void 0);A(U,{success:le,message:`getOrders() - GET /clob/v1/address/orders?address={address} returned ${Array.isArray(ue)?ue.length:0} orders (total_count: ${(ee==null?void 0:ee.total_count)??"N/A"})`,data:{orders:Array.isArray(ue)?ue.slice(0,3):ue,total_count:ee==null?void 0:ee.total_count,timestamp:ee==null?void 0:ee.timestamp},timestamp:Date.now()})}catch(ee){A(U,{success:!1,message:"getOrders() failed",error:ee.message,timestamp:Date.now()})}if(Array.isArray(ue)&&ue.length>0){const ee=ue[0],le=(ee==null?void 0:ee.orderId)||(ee==null?void 0:ee.order_id)||(ee==null?void 0:ee.id);if(le){A(U,{success:!0,message:`Testing getOrder() for order ID: ${le.substring(0,16)}... (from getOrders result)`,timestamp:Date.now()});try{const te=await v.current.getOrder(le);A(U,{success:!!te,message:`getOrder() - GET /clob/v1/order/{orderID} | Order ID: ${le.substring(0,16)}...`,data:{order:te,orderId:le,source:"First order from getOrders() result"},timestamp:Date.now()})}catch(te){A(U,{success:!1,message:`getOrder() failed for order ID: ${le.substring(0,16)}...`,error:te.message,data:{orderId:le,endpoint:"GET /clob/v1/order/{orderID}"},timestamp:Date.now()})}}else A(U,{success:!1,message:"getOrder() test skipped: No valid order ID found in getOrders() result",error:"Order ID not found in order object",data:{order:ee,availableFields:Object.keys(ee||{})},timestamp:Date.now()})}else A(U,{success:!0,message:"getOrder() test skipped: No orders available from getOrders() (need at least 1 order)",data:{ordersCount:ue.length,note:"getOrder() test requires at least one order from getOrders()"},timestamp:Date.now()});try{const ee=await v.current.getOrderHistory(P),le=Array.isArray(ee)?ee:(ee==null?void 0:ee.orders)||[],te=ee&&(Array.isArray(le)||ee.orders!==void 0);A(U,{success:te,message:`getOrderHistory() - GET /clob/v1/address/orders/history?address={address} returned ${Array.isArray(le)?le.length:0} orders`,data:Array.isArray(le)?le.slice(0,3):ee,timestamp:Date.now()})}catch(ee){A(U,{success:!1,message:"getOrderHistory() failed",error:ee.message,timestamp:Date.now()})}try{const ee=await v.current.getTradeHistory(P),le=Array.isArray(ee)?ee:(ee==null?void 0:ee.trades)||(ee==null?void 0:ee.data)||[],te=ee&&(Array.isArray(le)||ee.trades!==void 0||ee.data!==void 0);A(U,{success:te,message:`getTradeHistory() - GET /clob/v1/address/trades?address={address} returned ${Array.isArray(le)?le.length:0} trades`,data:Array.isArray(le)?le.slice(0,3):ee,timestamp:Date.now()})}catch(ee){A(U,{success:!1,message:"getTradeHistory() failed",error:ee.message,timestamp:Date.now()})}try{const ee=await v.current.getBuckets(P);if(A(U,{success:Array.isArray(ee)||ee!==void 0,message:`getBuckets() - GET /bucket/v1/address/{address}/buckets returned ${Array.isArray(ee)?ee.length:"data"}`,data:Array.isArray(ee)?ee.slice(0,3):ee,timestamp:Date.now()}),Array.isArray(ee)&&ee.length>0){const le=ee[0],te=le.bucket_id||le.id||le.bucketId;if(te)try{const ce=await v.current.getBucket(te);A(U,{success:!!ce,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} (${te.substring(0,16)}...)`,data:ce,timestamp:Date.now()})}catch(ce){A(U,{success:!1,message:`getBucket(${te.substring(0,16)}...) failed`,error:ce.message,timestamp:Date.now()})}}}catch(ee){A(U,{success:!1,message:"getBuckets() failed",error:ee.message,timestamp:Date.now()})}A(U,{success:!0,message:"Testing useBuckets hook...",timestamp:Date.now()});try{if(await V(),A(U,{success:!q&&!W,message:`useBuckets hook: ${z.length} buckets loaded`,data:{buckets:z.slice(0,3),loading:W,error:q,totalBuckets:z.length},timestamp:Date.now()}),z.length>0){const le=($e=z[0].bucketId)==null?void 0:$e.toString();if(le)try{const te=await v.current.getBucket(le);A(U,{success:!!te,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} via hook bucket ID (${le.substring(0,16)}...)`,data:te,timestamp:Date.now()})}catch(te){A(U,{success:!1,message:"getBucket() via hook bucket ID failed",error:te.message,timestamp:Date.now()})}}}catch(ee){A(U,{success:!1,message:"useBuckets hook test failed",error:ee.message,timestamp:Date.now()})}}catch(ue){A(U,{success:!1,message:"Wallet Specific test error",error:ue.message,timestamp:Date.now()})}},be=async()=>{var _e,Ie,me,$e,ue;const U="InfoClient";v.current=new ar({baseURL:w.current}),s&&v.current&&v.current.setSessionToken(s);try{A(U,{success:!0,message:"Testing getMarkets()...",timestamp:Date.now()});const ee=await C();k.current=Array.isArray(ee)?ee:[];const le=Array.isArray(ee)?ee.length:0,te=le>0?ee.find(de=>de.active||de.status==="active")??ee[0]:null,ce=(te==null?void 0:te.market_id)??((_e=te==null?void 0:te.id)==null?void 0:_e.toString())??null;if(A(U,{success:Array.isArray(ee)&&le>0,message:`getMarkets() - GET /market/v1/all returned ${le} markets${ce?` | Using market ID: ${ce} (${(te==null?void 0:te.moniker)||(te==null?void 0:te.symbol)||"auto-selected"})`:""}`,data:{count:le,defaultMarketId:ce,defaultMarket:te?{id:te.id,market_id:te.market_id,moniker:te.moniker,symbol:te.symbol,active:te.active,status:te.status}:null,markets:ee.slice(0,5)},timestamp:Date.now()}),ce){i(ce),_.current=ce;const de=(te==null?void 0:te.moniker)||(te==null?void 0:te.symbol)||(te!=null&&te.baseAsset&&(te!=null&&te.quoteAsset)?`${te.baseAsset}-${te.quoteAsset}`:"Unknown");A(U,{success:!0,message:`Markets loaded: ${le} | Auto-selected: ${de} (ID: ${ce.substring(0,10)}...)`,data:{selectedMarketId:ce,count:le,market:te},timestamp:Date.now()}),A(U,{success:!0,message:"Waiting 1.5s for market selection to take effect...",timestamp:Date.now()}),await new Promise(Ae=>setTimeout(Ae,1500)),A(U,{success:!0,message:`Market ID ready: ${ce}`,data:{marketId:ce},timestamp:Date.now()}),A(U,{success:!0,message:`Proceeding with market: ${de}`,timestamp:Date.now()})}const je=ce||H||r;if(je){A(U,{success:!0,message:`Testing getOrderbook(${je}, true)...`,timestamp:Date.now()});try{const de=await v.current.getOrderbook(je,!0);A(U,{success:de&&(de.bids||de.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} with decimal conversion",data:{bids:(Ie=de==null?void 0:de.bids)==null?void 0:Ie.slice(0,3),asks:(me=de==null?void 0:de.asks)==null?void 0:me.slice(0,3)},timestamp:Date.now()});const Ae=await v.current.getOrderbook(je,!1);A(U,{success:Ae&&(Ae.bids||Ae.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} raw satoshi format",data:{bids:($e=Ae==null?void 0:Ae.bids)==null?void 0:$e.slice(0,2),asks:(ue=Ae==null?void 0:Ae.asks)==null?void 0:ue.slice(0,2)},timestamp:Date.now()})}catch(de){A(U,{success:!1,message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} failed",error:de.message,timestamp:Date.now()})}A(U,{success:!0,message:`Testing getTicker(${je})...`,timestamp:Date.now()});try{const de=await v.current.getTicker(je);A(U,{success:!!de,message:"getTicker() - GET /market/v1/market/{marketId}/stats",data:de,timestamp:Date.now()})}catch(de){A(U,{success:!1,message:"getTicker() - GET /market/v1/market/{marketId}/stats failed",error:de.message,timestamp:Date.now()})}A(U,{success:!0,message:`Testing getRecentTrades(${je}, 10)...`,timestamp:Date.now()});try{const de=await v.current.getRecentTrades(je,10);A(U,{success:Array.isArray(de),message:`getRecentTrades() - GET /clob/v1/trades?market_id={marketId} returned ${Array.isArray(de)?de.length:0} trades`,data:de==null?void 0:de.slice(0,3),timestamp:Date.now()})}catch(de){A(U,{success:!1,message:"getRecentTrades() - GET /clob/v1/trades?market_id={marketId} failed",error:de.message,timestamp:Date.now()})}}else A(U,{success:!1,message:"Skipping market-specific tests: No market ID available",error:"Please ensure markets are loaded and a market is selected",timestamp:Date.now()});A(U,{success:!0,message:"Testing router/v1 endpoints...",timestamp:Date.now()});try{const de=await v.current.getSupportedActions();A(U,{success:Array.isArray(de==null?void 0:de.actions)||(de==null?void 0:de.actions)!==void 0,message:"getSupportedActions() - GET /router/v1/tx/supported-actions",data:de,timestamp:Date.now()})}catch(de){A(U,{success:!1,message:"getSupportedActions() - GET /router/v1/tx/supported-actions failed",error:de.message,timestamp:Date.now()})}try{const de=await v.current.validateAction("clob::submit_order");A(U,{success:(de==null?void 0:de.valid)!==void 0||de!==void 0,message:'validateAction() - GET /router/v1/tx/validate-action ("clob::submit_order")',data:de,timestamp:Date.now()})}catch(de){A(U,{success:!1,message:"validateAction() - GET /router/v1/tx/validate-action failed",error:de.message,timestamp:Date.now()})}try{const de=await v.current.getHealthSummary();A(U,{success:!!de,message:"getHealthSummary() - GET /router/v1/health/summary",data:de,timestamp:Date.now()})}catch(de){A(U,{success:!1,message:"getHealthSummary() - GET /router/v1/health/summary failed",error:de.message,timestamp:Date.now()})}try{const de=await v.current.getHealthDaemons();A(U,{success:!!de,message:"getHealthDaemons() - GET /router/v1/health/daemons",data:de,timestamp:Date.now()})}catch(de){A(U,{success:!1,message:"getHealthDaemons() - GET /router/v1/health/daemons failed",error:de.message,timestamp:Date.now()})}try{const de=await v.current.getServerTime();A(U,{success:!!de&&(de.serverTime!==void 0||de!==void 0),message:"getServerTime() - GET /router/v1/time",data:de,timestamp:Date.now()})}catch(de){A(U,{success:!1,message:"getServerTime() - GET /router/v1/time failed",error:de.message,timestamp:Date.now()})}try{const de=await v.current.getMetricsTPS();A(U,{success:!!de,message:"getMetricsTPS() - GET /router/v1/metrics/tps",data:de,timestamp:Date.now()})}catch(de){A(U,{success:!1,message:"getMetricsTPS() - GET /router/v1/metrics/tps failed",error:de.message,timestamp:Date.now()})}try{const de=await v.current.getMetricsLatency();A(U,{success:!!de,message:"getMetricsLatency() - GET /router/v1/metrics/latency",data:de,timestamp:Date.now()})}catch(de){A(U,{success:!1,message:"getMetricsLatency() - GET /router/v1/metrics/latency failed",error:de.message,timestamp:Date.now()})}}catch(ee){A(U,{success:!1,message:"InfoClient test error",error:ee.message,timestamp:Date.now()})}},Oe=async()=>{var $e,ue,ee;const U="ExchangeClient";if(!E){A(U,{success:!1,message:"Mnemonic required for ExchangeClient tests",error:"No mnemonic provided",timestamp:Date.now()});return}let _e=r||H||_.current||"";if(!_e||_e.trim()===""){if(k.current&&k.current.length>0){const le=k.current.find(te=>te.active||te.status==="active")??k.current[0];le&&(_e=le.market_id??(($e=le.id)==null?void 0:$e.toString())??"",_.current=_e,A(U,{success:!0,message:`Market ID not in state, using from fetched markets ref: ${_e.substring(0,16)}...`,data:{source:"fetchedMarketsRef",marketId:_e,market:{moniker:le.moniker,symbol:le.symbol,active:le.active}},timestamp:Date.now()}))}else if(S&&S.length>0){const le=S.find(te=>te.active||te.status==="active")??S[0];le&&(_e=le.market_id??((ue=le.id)==null?void 0:ue.toString())??"",A(U,{success:!0,message:`Market ID not in state, using from markets state: ${_e.substring(0,16)}...`,data:{source:"markets state",marketId:_e,market:{moniker:le.moniker,symbol:le.symbol,active:le.active}},timestamp:Date.now()}))}}if(!_e||_e.trim()===""){A(U,{success:!1,message:"Market ID required from page or loaded markets",error:`Please enter or select a market ID in the configuration section, or ensure markets are loaded first. Debug: marketId="${r||"(empty)"}", effectiveMarketId="${H||"(empty)"}", fetchedMarketIdRef="${_.current||"(empty)"}", fetchedMarketsRef.length=${k.current.length}, markets.length=${S.length}`,data:{marketId:r||"(empty)",effectiveMarketId:H||"(empty)",defaultMarketId:G||"(empty)",fetchedMarketIdRef:_.current||"(empty)",fetchedMarketsRefCount:k.current.length,marketsCount:S.length,marketsAvailable:S.length>0||k.current.length>0},timestamp:Date.now()});return}const Ie=P||"";if(!Ie||Ie.trim()===""){A(U,{success:!1,message:"Wallet address required from page",error:"Wallet address should be generated from mnemonic or entered manually. Please ensure mnemonic is valid.",timestamp:Date.now()});return}const me=r?"page state (marketId)":H?"page state (effectiveMarketId)":"loaded markets array";A(U,{success:!0,message:`Using market ID from ${me}: ${_e.substring(0,16)}...`,data:{marketId:_e,source:me},timestamp:Date.now()}),A(U,{success:!0,message:`Using wallet address from page: ${Ie.substring(0,10)}...`,data:{walletAddress:Ie},timestamp:Date.now()}),(s||a)&&A(U,{success:!0,message:`Using signing tokens: ${s?"Session Token":""} ${a?"Auth Token":""}`,data:{hasSessionToken:!!s,hasAuthToken:!!a},timestamp:Date.now()}),y.current=new Zl({baseURL:w.current,mnemonic:$.current});try{A(U,{success:!0,message:"Initializing ExchangeClient...",timestamp:Date.now()}),await y.current.initialize();const le=y.current.getWalletAddress();if(le.toLowerCase()!==Ie.toLowerCase()){A(U,{success:!1,message:"Wallet address mismatch",error:`ExchangeClient wallet (${le}) does not match page wallet (${Ie})`,timestamp:Date.now()});return}A(U,{success:!0,message:`ExchangeClient initialized successfully (Wallet: ${le.substring(0,10)}...)`,data:{walletAddress:le,marketId:_e,verified:!0},timestamp:Date.now()});const te=_e;A(U,{success:!0,message:`Using market ID as string: ${te}`,data:{marketId:te},timestamp:Date.now()});let ce=null;A(U,{success:!0,message:"Testing placeOrder with validation for btc-usdc-perp market...",timestamp:Date.now()});let je=[];try{v.current||(v.current=new ar({baseURL:w.current})),s&&v.current&&v.current.setSessionToken(s);const Le=await v.current.getBuckets(le);je=Array.isArray(Le)?Le:[],A(U,{success:!0,message:`Fetched ${je.length} bucket(s) for order test`,timestamp:Date.now()})}catch(Le){A(U,{success:!1,message:"Failed to fetch buckets for order test",error:Le.message,timestamp:Date.now()})}let de=null;try{const ve=(k.current.length>0?k.current:S).find(he=>{const ge=(he.moniker||"").toLowerCase(),pe=(he.symbol||"").toLowerCase();return ge.includes("btc-usdc-perp")||ge.includes("btcusdcperp")||pe.includes("btc-usdc-perp")||pe.includes("btcusdcperp")||he.baseAsset&&he.quoteAsset&&he.baseAsset.toLowerCase()==="btc"&&he.quoteAsset.toLowerCase()==="usdc"});ve?(de=ve.market_id||((ee=ve.id)==null?void 0:ee.toString())||null,A(U,{success:!!de,message:`Found btc-usdc-perp market: ${de==null?void 0:de.substring(0,16)}...`,data:{marketId:de,moniker:ve.moniker,symbol:ve.symbol},timestamp:Date.now()})):A(U,{success:!1,message:"btc-usdc-perp market not found in available markets",error:"Please ensure btc-usdc-perp market is available",timestamp:Date.now()})}catch(Le){A(U,{success:!1,message:"Failed to find btc-usdc-perp market",error:Le.message,timestamp:Date.now()})}if(de)try{let Le=null;if(je.length>0){const ve=je[0];Le=ve.bucket_id||ve.id||ve.bucketId||null}if(!Le)A(U,{success:!1,message:"Default bucket not available for balance validation",error:"No buckets found",timestamp:Date.now()});else{A(U,{success:!0,message:"Step 1: Loading default bucket balance and checking available margin...",timestamp:Date.now()});const ve=1.01,he=100,ge=10500,pe=Ht(he.toString()),fe=ve*ge/he;let Re=0,Ve=0,Xe=0,Ye=0;try{if(!v.current)throw new Error("InfoClient not initialized");const Ce=await v.current.getBucket(Le);Xe=it(Ce.available_margin||"0"),Ve=it(Ce.deposited_margin||"0"),Ye=it(Ce.total_equity||"0"),Re=Xe,A(U,{success:!0,message:"Step 1: Default bucket balance loaded",data:{availableMargin:Xe.toFixed(2),depositedMargin:Ve.toFixed(2),totalEquity:Ye.toFixed(2),requiredMargin:fe.toFixed(2),raw:Ce},timestamp:Date.now()}),A(U,{success:!0,message:`Step 1: Validating sufficient available margin (required: ${fe.toFixed(2)} USDC, available: ${Xe.toFixed(2)} USDC)...`,timestamp:Date.now()});const we=Xe>=fe;if(A(U,{success:we,message:`Step 1: Margin validation ${we?"PASSED":"FAILED"}`,data:{availableMargin:Xe.toFixed(2),requiredMargin:fe.toFixed(2),marginDifference:(Xe-fe).toFixed(2),hasSufficientMargin:we,orderQuantity:`${ve.toFixed(2)} BTC`,orderPrice:`${ge.toFixed(2)} USDC/BTC`,orderLeverage:he.toFixed(2),calculation:`(${ve.toFixed(2)} BTC * ${ge.toFixed(2)} USDC/BTC) / ${he.toFixed(2)} = ${fe.toFixed(2)} USDC`},timestamp:Date.now()}),!we)throw A(U,{success:!1,message:`Step 1: Insufficient available margin. Required: ${fe.toFixed(2)} USDC, Available: ${Xe.toFixed(2)} USDC`,error:`Available margin (${Xe.toFixed(2)} USDC) is less than required margin (${fe.toFixed(2)} USDC)`,data:{availableMargin:Xe.toFixed(2),requiredMargin:fe.toFixed(2),shortfall:(fe-Xe).toFixed(2)},timestamp:Date.now()}),new Error(`Insufficient available margin: ${Xe.toFixed(2)} USDC available, ${fe.toFixed(2)} USDC required`);A(U,{success:!0,message:"Step 1: Sufficient margin available. Proceeding to place order...",data:{availableMargin:Xe.toFixed(2),requiredMargin:fe.toFixed(2),marginRemaining:(Xe-fe).toFixed(2)},timestamp:Date.now()})}catch(Ce){throw A(U,{success:!1,message:"Step 1: Failed to load or validate bucket balance",error:Ce.message,timestamp:Date.now()}),Ce}A(U,{success:!0,message:`Step 2: Preparing to place order - Quantity: ${ve.toFixed(2)} BTC, Leverage: ${he}x, Price: ${ge.toFixed(2)} USDC/BTC...`,timestamp:Date.now()}),A(U,{success:!0,message:"Step 2.1: Re-checking default bucket available margin before placing order...",timestamp:Date.now()});let He=0;try{if(!v.current)throw new Error("InfoClient not initialized");const Ce=await v.current.getBucket(Le);He=it(Ce.available_margin||"0"),A(U,{success:!0,message:`Step 2.1: Current available margin: ${He.toFixed(2)} USDC`,data:{currentAvailableMargin:He.toFixed(2),requiredMargin:fe.toFixed(2),previousAvailableMargin:Xe.toFixed(2),raw:Ce},timestamp:Date.now()});const we=He>=fe;if(A(U,{success:we,message:`Step 2.1: Margin check ${we?"PASSED":"FAILED"}`,data:{currentAvailableMargin:He.toFixed(2),requiredMargin:fe.toFixed(2),marginDifference:(He-fe).toFixed(2),stillHasSufficientMargin:we},timestamp:Date.now()}),!we)throw A(U,{success:!1,message:`Step 2.1: Insufficient available margin. Required: ${fe.toFixed(2)} USDC, Available: ${He.toFixed(2)} USDC`,error:`Available margin (${He.toFixed(2)} USDC) is less than required margin (${fe.toFixed(2)} USDC)`,data:{currentAvailableMargin:He.toFixed(2),requiredMargin:fe.toFixed(2),shortfall:(fe-He).toFixed(2)},timestamp:Date.now()}),new Error(`Insufficient available margin: ${He.toFixed(2)} USDC available, ${fe.toFixed(2)} USDC required`);A(U,{success:!0,message:"Step 2.1: Sufficient margin confirmed. Proceeding with order placement...",data:{currentAvailableMargin:He.toFixed(2),requiredMargin:fe.toFixed(2),marginRemaining:(He-fe).toFixed(2)},timestamp:Date.now()})}catch(Ce){throw A(U,{success:!1,message:"Step 2.1: Failed to validate available margin before order placement",error:Ce.message,timestamp:Date.now()}),Ce}A(U,{success:!0,message:`Step 2.2: Placing order - Quantity: ${ve.toFixed(2)} BTC, Leverage: ${he}x, Price: ${ge.toFixed(2)} USDC/BTC...`,timestamp:Date.now()});let ot=null,rt=null;const ye={marketId:de,side:"buy",orderType:"LIMIT",price:ge,quantity:ve,timeInForce:"GTC",leverage:pe},re={maxRetries:10,baseDelay:500,maxDelay:2e3,jitter:!0,multiplier:1.5};let ne=0;try{ot=await Fw(re,async()=>{if(ne++,ne>1&&A(U,{success:!0,message:`Step 2.2: Retrying order placement (attempt ${ne}/${re.maxRetries+1})...`,data:{attemptCount:ne},timestamp:Date.now()}),!y.current)throw new Error("ExchangeClient not initialized");const Ce=await y.current.placeOrder(ye),we=(Ce==null?void 0:Ce.order_id)||null;if(!Ce||!we)throw new Error("Order placed but order_id not found in response");return Ce},async Ce=>{if(jR(Ce)){A(U,{success:!1,message:`Step 2.2: Nonce error detected (attempt ${ne}/${re.maxRetries+1}): ${(Ce==null?void 0:Ce.message)||String(Ce)}`,data:{error:(Ce==null?void 0:Ce.message)||String(Ce),errorType:"nonce error",attemptCount:ne,willRetry:ne<=re.maxRetries},timestamp:Date.now()});try{if(!y.current)throw new Error("ExchangeClient not initialized");await y.current.refreshNonceFromServer(),A(U,{success:!0,message:"Step 2.2: Refreshed nonce from server, will retry...",timestamp:Date.now()})}catch(ct){A(U,{success:!1,message:"Step 2.2: Failed to refresh nonce from server",error:(ct==null?void 0:ct.message)||String(ct),timestamp:Date.now()})}return!0}return A(U,{success:!1,message:"Step 2.2: Failed to place order (non-retryable error)",error:(Ce==null?void 0:Ce.message)||String(Ce),data:{error:(Ce==null?void 0:Ce.message)||String(Ce),isNonceError:!1},timestamp:Date.now()}),!1}),rt=(ot==null?void 0:ot.order_id)||null,A(U,{success:!!ot&&!!rt,message:`Step 2.2: Order placed successfully${ne>1?` (after ${ne-1} retry${ne>2?"ies":""})`:""}. Order ID: ${rt==null?void 0:rt.substring(0,16)}...`,data:{orderResult:ot,orderId:rt,requestBody:ye,attemptCount:ne},timestamp:Date.now()})}catch(Ce){throw A(U,{success:!1,message:`Step 2.2: Failed to place order after ${ne} attempt${ne>1?"s":""}`,error:(Ce==null?void 0:Ce.message)||String(Ce),data:{error:(Ce==null?void 0:Ce.message)||String(Ce),attemptCount:ne,maxRetriesReached:ne>re.maxRetries},timestamp:Date.now()}),Ce}if(!ot||!rt)throw new Error(`Failed to place order after ${ne} attempts`);if(await new Promise(Ce=>setTimeout(Ce,1500)),rt){A(U,{success:!0,message:"Step 3: Validating pending order details...",timestamp:Date.now()});try{if(!v.current)throw new Error("InfoClient not initialized");const Ce=await v.current.getOrder(rt);if(Ce){const we=it(Ce.price||"0"),ct=it(Ce.quantity||"0"),Fe=it(Ce.leverage||"0"),dt=Ce.side||"",_t=Ce.market_id||"",pt=Math.abs(we-ge)<.01,mt=Math.abs(ct-ve)<.01,yt=Math.abs(Fe-he)<.01,Ut=_t===de,Yt=dt.toUpperCase().includes("BUY")||dt==="buy";A(U,{success:pt&&mt&&yt&&Ut&&Yt,message:`Step 3: Order validation ${pt&&mt&&yt&&Ut&&Yt?"PASSED":"FAILED"}`,data:{orderId:rt,expectedPrice:ge.toFixed(2),actualPrice:we.toFixed(2),priceValid:pt,expectedQuantity:`${ve.toFixed(2)} BTC`,actualQuantity:`${ct.toFixed(2)} BTC`,quantityValid:mt,expectedLeverage:he.toFixed(2),actualLeverage:Fe.toFixed(2),leverageValid:yt,expectedMarketId:de,actualMarketId:_t,marketIdValid:Ut,expectedSide:"buy",actualSide:dt,sideValid:Yt,orderStatus:Ce.status,rawOrder:Ce},timestamp:Date.now()}),pt||A(U,{success:!1,message:`Order price mismatch: Expected ${ge.toFixed(2)}, got ${we.toFixed(2)}`,timestamp:Date.now()}),mt||A(U,{success:!1,message:`Order quantity mismatch: Expected ${ve.toFixed(2)} BTC, got ${ct.toFixed(2)} BTC`,timestamp:Date.now()}),yt||A(U,{success:!1,message:`Order leverage mismatch: Expected ${he.toFixed(2)}, got ${Fe.toFixed(2)}`,timestamp:Date.now()}),Ut||A(U,{success:!1,message:`Order market ID mismatch: Expected ${de}, got ${_t}`,timestamp:Date.now()}),Yt||A(U,{success:!1,message:`Order side mismatch: Expected buy, got ${dt}`,timestamp:Date.now()})}else A(U,{success:!1,message:"Step 3: Failed to retrieve pending order",error:"Order not found",timestamp:Date.now()})}catch(Ce){A(U,{success:!1,message:"Step 3: Failed to validate pending order",error:Ce.message,timestamp:Date.now()})}}A(U,{success:!0,message:"Step 4: Loading default bucket USDC balance after placing order...",timestamp:Date.now()});let xe=0;try{if(!v.current)throw new Error("InfoClient not initialized");const Ce=await v.current.getBucket(Le);xe=it(Ce.available_margin||"0"),A(U,{success:!0,message:`Step 4: Default bucket USDC balance after: ${xe.toFixed(2)} USDC`,data:{balance:xe,raw:Ce},timestamp:Date.now()})}catch(Ce){throw A(U,{success:!1,message:"Step 4: Failed to load bucket balance after order",error:Ce.message,timestamp:Date.now()}),Ce}A(U,{success:!0,message:"Step 5: Validating bucket balance change...",timestamp:Date.now()});const Ot=He-xe,ft=fe,It=Math.abs(Ot-ft)<.01;A(U,{success:It,message:`Step 5: Bucket balance validation ${It?"PASSED":"FAILED"}`,data:{availableMarginBeforeOrder:He.toFixed(2),availableMarginAfterOrder:xe.toFixed(2),marginReserved:Ot.toFixed(2),expectedMarginReserved:ft.toFixed(2),marginReservedValid:It,orderQuantity:`${ve.toFixed(2)} BTC`,orderPrice:`${ge.toFixed(2)} USDC/BTC`,orderLeverage:he.toFixed(2),calculation:`(${ve.toFixed(2)} BTC * ${ge.toFixed(2)} USDC/BTC) / ${he.toFixed(2)} = ${ft.toFixed(2)} USDC`,note:"Using available margin from Step 2.1 as baseline (most recent before order placement)"},timestamp:Date.now()}),It||A(U,{success:!1,message:`Bucket balance change mismatch: Expected margin reserved ${ft.toFixed(2)} USDC, actual change ${Ot.toFixed(2)} USDC`,error:`Expected available margin to decrease by ${ft.toFixed(2)} USDC, but decreased by ${Ot.toFixed(2)} USDC`,timestamp:Date.now()}),A(U,{success:It,message:`Place order validation test ${It?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{orderId:rt,marketId:de,orderQuantity:`${ve.toFixed(2)} BTC`,orderLeverage:`${he}x`,orderPrice:`${ge.toFixed(2)} USDC`,availableMarginBeforeOrder:`${He.toFixed(2)} USDC`,availableMarginAfterOrder:`${xe.toFixed(2)} USDC`,marginReserved:`${Ot.toFixed(2)} USDC`,expectedMarginReserved:`${ft.toFixed(2)} USDC`,validationPassed:It},timestamp:Date.now()})}}catch(Le){A(U,{success:!1,message:"Place order validation test failed",error:Le.message,timestamp:Date.now()})}if(_e){const ve=Ht("1"),he={marketId:te,side:"buy",orderType:"LIMIT",price:40010.8778,quantity:.01,timeInForce:"GTC",leverage:ve};A(U,{success:!0,message:`Testing placeOrder() (submit order) for market ${_e}...`,data:{requestBody:he,endpoint:"POST /clob/v1/order",note:"Price and quantity are decimal numbers, converted to satoshi strings in buildOrderPayload(). Leverage is already in satoshi format.",leverage:{decimal:1,satoshi:ve}},timestamp:Date.now()});try{const ge=await y.current.placeOrder(he);ge?(ce=ge.order_id||ge.orderId||ge.id||null,ce?A(U,{success:!0,message:`placeOrder() - POST /clob/v1/order executed successfully. Order ID: ${ce.substring(0,16)}...`,data:{orderResult:ge,orderId:ce,requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()}):A(U,{success:!0,message:"placeOrder() - POST /clob/v1/order executed successfully (orderId not found in response)",data:{orderResult:ge,requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})):A(U,{success:!1,message:"placeOrder() - POST /clob/v1/order returned empty response",data:{requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}catch(ge){A(U,{success:!1,message:"placeOrder() - POST /clob/v1/order failed",error:ge.message,data:{requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}}else A(U,{success:!0,message:"Skipping placeOrder() test: No market ID available",timestamp:Date.now()});if(_e&&ce){A(U,{success:!0,message:`Testing cancelOrder() for order ${ce.substring(0,16)}...`,timestamp:Date.now()});try{const Le=await y.current.cancelOrder({orderId:ce,marketId:te});A(U,{success:!!Le,message:"cancelOrder() - POST /router/v1/tx executed successfully",data:Le,timestamp:Date.now()})}catch(Le){A(U,{success:!1,message:"cancelOrder() - POST /router/v1/tx failed",error:Le.message,timestamp:Date.now()})}}else _e?ce||A(U,{success:!0,message:"Skipping cancelOrder() test: No order ID available (placeOrder may have failed or orderId not in response)",timestamp:Date.now()}):A(U,{success:!0,message:"Skipping cancelOrder() test: No market ID available",timestamp:Date.now()});if(_e){A(U,{success:!0,message:`Testing closePosition() for market ${_e}...`,timestamp:Date.now()});try{let Le=!1,ve=0;try{v.current||(v.current=new ar({baseURL:w.current})),s&&v.current&&v.current.setSessionToken(s);const he=await v.current.getPositions(le),ge=Array.isArray(he)?he.find(pe=>(pe.market_id||pe.marketId)===_e):null;if(ge)if(Le=!0,ge.mark_price)ve=it(ge.mark_price||"0");else{const pe=await v.current.getTicker(_e);pe&&pe.last_price&&(ve=it(pe.last_price))}}catch(he){A(U,{success:!0,message:`Position check failed (will attempt close anyway): ${he.message}`,timestamp:Date.now()})}if(!Le)A(U,{success:!0,message:"No open position found for this market. Skipping closePosition() test.",data:{marketId:_e,note:"closePosition() requires an open position to test"},timestamp:Date.now()});else{const he=await y.current.closePosition({marketId:te,marketPrice:ve>0?ve:void 0,quantity:void 0});A(U,{success:!!he,message:"closePosition() - POST /bucket/v1/position/close executed successfully",data:{closeResult:he,note:"quantity=undefined means close full position (closeSize=0 in request)"},timestamp:Date.now()})}}catch(Le){A(U,{success:!1,message:"closePosition() - POST /bucket/v1/position/close failed (may not have open position)",error:Le.message,timestamp:Date.now()})}}else A(U,{success:!0,message:"Skipping closePosition() test: No market ID available",timestamp:Date.now()});A(U,{success:!0,message:"Fetching buckets for bucket operation tests...",timestamp:Date.now()});let Ae=[];try{v.current||(v.current=new ar({baseURL:w.current})),s&&v.current&&v.current.setSessionToken(s);const Le=await v.current.getBuckets(le);Ae=Array.isArray(Le)?Le:[],A(U,{success:!0,message:`Found ${Ae.length} bucket(s) for testing`,data:{bucketCount:Ae.length,buckets:Ae.slice(0,3).map(ve=>({bucketId:ve.bucket_id||ve.id||ve.bucketId,availableMargin:ve.available_margin||ve.availableMargin}))},timestamp:Date.now()})}catch(Le){A(U,{success:!1,message:"Failed to fetch buckets for testing",error:Le.message,timestamp:Date.now()})}if(Ae.length>0){const Le=Ae[0],ve=Le.bucket_id||Le.id||Le.bucketId;if(ve){A(U,{success:!0,message:"Testing extractToBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const he=await y.current.extractToBucket({bucketId:ve,assetId:"USDC",amount:"100000000"});A(U,{success:!!he,message:"extractToBucket() - POST /bank/v1/extract-to-bucket executed successfully",data:he,timestamp:Date.now()})}catch(he){A(U,{success:!1,message:"extractToBucket() - POST /bank/v1/extract-to-bucket failed",error:he.message,timestamp:Date.now()})}}else A(U,{success:!0,message:"Skipping extractToBucket() test: No valid bucket ID found",timestamp:Date.now()})}else A(U,{success:!0,message:"Skipping extractToBucket() test: No buckets available",timestamp:Date.now()});if(Ae.length>0){const Le=Ae[0],ve=Le.bucket_id||Le.id||Le.bucketId;if(ve){A(U,{success:!0,message:"Testing bucket to spot wallet transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{A(U,{success:!0,message:"Step 1: Loading bucket USDC balance before transfer...",timestamp:Date.now()});let he=0;try{const re=await v.current.getBucket(ve);he=it(re.available_margin||"0"),A(U,{success:!0,message:`Step 1: Bucket USDC balance before: ${he.toFixed(2)} USDC`,data:{balance:he,raw:re},timestamp:Date.now()})}catch(re){throw A(U,{success:!1,message:"Step 1: Failed to load bucket balance",error:re.message,timestamp:Date.now()}),re}A(U,{success:!0,message:"Step 2: Loading spot wallet USDC balance before transfer...",timestamp:Date.now()});let ge=0;try{const re=await v.current.getBalanceDecimal(le,"USDC");ge=it(re.available_balance||"0"),A(U,{success:!0,message:`Step 2: Spot wallet USDC balance before: ${ge.toFixed(2)} USDC`,data:{balance:ge,raw:re},timestamp:Date.now()})}catch(re){throw A(U,{success:!1,message:"Step 2: Failed to load spot wallet balance",error:re.message,timestamp:Date.now()}),re}const pe=10,fe=Ht(pe.toString());A(U,{success:!0,message:`Step 3: Transferring ${pe.toFixed(2)} USDC (${fe} satoshi) from bucket to spot wallet...`,timestamp:Date.now()});try{const re=await y.current.withdrawFromBucket({bucketId:ve,assetId:"USDC",amount:fe});A(U,{success:!!re,message:"Step 3: Transfer executed successfully",data:re,timestamp:Date.now()})}catch(re){throw A(U,{success:!1,message:"Step 3: Transfer failed",error:re.message,timestamp:Date.now()}),re}await new Promise(re=>setTimeout(re,1e3)),A(U,{success:!0,message:"Step 4: Loading bucket USDC balance after transfer...",timestamp:Date.now()});let Re=0;try{const re=await v.current.getBucket(ve);Re=it(re.available_margin||"0"),A(U,{success:!0,message:`Step 4: Bucket USDC balance after: ${Re.toFixed(2)} USDC`,data:{balance:Re,raw:re},timestamp:Date.now()})}catch(re){throw A(U,{success:!1,message:"Step 4: Failed to load bucket balance after transfer",error:re.message,timestamp:Date.now()}),re}A(U,{success:!0,message:"Step 5: Loading spot wallet USDC balance after transfer...",timestamp:Date.now()});let Ve=0;try{const re=await v.current.getBalanceDecimal(le,"USDC");Ve=it(re.available_balance||"0"),A(U,{success:!0,message:`Step 5: Spot wallet USDC balance after: ${Ve.toFixed(2)} USDC`,data:{balance:Ve,raw:re},timestamp:Date.now()})}catch(re){throw A(U,{success:!1,message:"Step 5: Failed to load spot wallet balance after transfer",error:re.message,timestamp:Date.now()}),re}A(U,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Xe=he-Re,Ye=Ve-ge,He=pe,ot=pe,rt=Math.abs(Xe-He)<.01,ye=Math.abs(Ye-ot)<.01;A(U,{success:rt&&ye,message:`Step 6: Validation ${rt&&ye?"PASSED":"FAILED"}`,data:{bucketBalanceBefore:he.toFixed(2),bucketBalanceAfter:Re.toFixed(2),bucketBalanceDecrease:Xe.toFixed(2),expectedBucketDecrease:He.toFixed(2),bucketDecreaseValid:rt,walletBalanceBefore:ge.toFixed(2),walletBalanceAfter:Ve.toFixed(2),walletBalanceIncrease:Ye.toFixed(2),expectedWalletIncrease:ot.toFixed(2),walletIncreaseValid:ye,transferAmount:pe.toFixed(2)},timestamp:Date.now()}),rt||A(U,{success:!1,message:`Validation failed: Bucket balance decrease (${Xe.toFixed(2)}) does not match expected (${He.toFixed(2)})`,error:`Expected bucket to decrease by ${He.toFixed(2)} USDC, but decreased by ${Xe.toFixed(2)} USDC`,timestamp:Date.now()}),ye||A(U,{success:!1,message:`Validation failed: Wallet balance increase (${Ye.toFixed(2)}) does not match expected (${ot.toFixed(2)})`,error:`Expected wallet to increase by ${ot.toFixed(2)} USDC, but increased by ${Ye.toFixed(2)} USDC`,timestamp:Date.now()}),A(U,{success:rt&&ye,message:`Bucket to spot wallet transfer test ${rt&&ye?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${pe.toFixed(2)} USDC`,bucketBalanceBefore:`${he.toFixed(2)} USDC`,bucketBalanceAfter:`${Re.toFixed(2)} USDC`,bucketBalanceChange:`${Xe.toFixed(2)} USDC`,walletBalanceBefore:`${ge.toFixed(2)} USDC`,walletBalanceAfter:`${Ve.toFixed(2)} USDC`,walletBalanceChange:`${Ye.toFixed(2)} USDC`,validationPassed:rt&&ye},timestamp:Date.now()})}catch(he){A(U,{success:!1,message:"Bucket to spot wallet transfer test failed",error:he.message,timestamp:Date.now()})}}else A(U,{success:!0,message:"Skipping bucket to spot wallet transfer test: No valid bucket ID found",timestamp:Date.now()})}else A(U,{success:!0,message:"Skipping bucket to spot wallet transfer test: No buckets available",timestamp:Date.now()});if(Ae.length>=2){const Le=Ae[0],ve=Ae[1],he=Le.bucket_id||Le.id||Le.bucketId,ge=ve.bucket_id||ve.id||ve.bucketId;if(he&&ge){A(U,{success:!0,message:"Testing bucket to bucket transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{A(U,{success:!0,message:"Step 1: Loading source bucket USDC balance before transfer...",timestamp:Date.now()});let pe=0;try{const xe=await v.current.getBucket(he);pe=it(xe.available_margin||"0"),A(U,{success:!0,message:`Step 1: Source bucket USDC balance before: ${pe.toFixed(2)} USDC`,data:{balance:pe,raw:xe},timestamp:Date.now()})}catch(xe){throw A(U,{success:!1,message:"Step 1: Failed to load source bucket balance",error:xe.message,timestamp:Date.now()}),xe}A(U,{success:!0,message:"Step 2: Loading target bucket USDC balance before transfer...",timestamp:Date.now()});let fe=0;try{const xe=await v.current.getBucket(ge);fe=it(xe.available_margin||"0"),A(U,{success:!0,message:`Step 2: Target bucket USDC balance before: ${fe.toFixed(2)} USDC`,data:{balance:fe,raw:xe},timestamp:Date.now()})}catch(xe){throw A(U,{success:!1,message:"Step 2: Failed to load target bucket balance",error:xe.message,timestamp:Date.now()}),xe}const Re=10,Ve=Ht(Re.toString());A(U,{success:!0,message:`Step 3: Transferring ${Re.toFixed(2)} USDC (${Ve} satoshi) from source bucket to target bucket...`,timestamp:Date.now()});try{const xe=await y.current.bucketTransfer({fromBucketId:he,toBucketId:ge,assetId:"USDC",amount:Ve});A(U,{success:!!xe,message:"Step 3: Transfer executed successfully",data:xe,timestamp:Date.now()})}catch(xe){throw A(U,{success:!1,message:"Step 3: Transfer failed",error:xe.message,timestamp:Date.now()}),xe}await new Promise(xe=>setTimeout(xe,1e3)),A(U,{success:!0,message:"Step 4: Loading source bucket USDC balance after transfer...",timestamp:Date.now()});let Xe=0;try{const xe=await v.current.getBucket(he);Xe=it(xe.available_margin||"0"),A(U,{success:!0,message:`Step 4: Source bucket USDC balance after: ${Xe.toFixed(2)} USDC`,data:{balance:Xe,raw:xe},timestamp:Date.now()})}catch(xe){throw A(U,{success:!1,message:"Step 4: Failed to load source bucket balance after transfer",error:xe.message,timestamp:Date.now()}),xe}A(U,{success:!0,message:"Step 5: Loading target bucket USDC balance after transfer...",timestamp:Date.now()});let Ye=0;try{const xe=await v.current.getBucket(ge);Ye=it(xe.available_margin||"0"),A(U,{success:!0,message:`Step 5: Target bucket USDC balance after: ${Ye.toFixed(2)} USDC`,data:{balance:Ye,raw:xe},timestamp:Date.now()})}catch(xe){throw A(U,{success:!1,message:"Step 5: Failed to load target bucket balance after transfer",error:xe.message,timestamp:Date.now()}),xe}A(U,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const He=pe-Xe,ot=Ye-fe,rt=Re,ye=Re,re=Math.abs(He-rt)<.01,ne=Math.abs(ot-ye)<.01;A(U,{success:re&&ne,message:`Step 6: Validation ${re&&ne?"PASSED":"FAILED"}`,data:{sourceBucketBalanceBefore:pe.toFixed(2),sourceBucketBalanceAfter:Xe.toFixed(2),sourceBucketBalanceDecrease:He.toFixed(2),expectedSourceDecrease:rt.toFixed(2),sourceDecreaseValid:re,targetBucketBalanceBefore:fe.toFixed(2),targetBucketBalanceAfter:Ye.toFixed(2),targetBucketBalanceIncrease:ot.toFixed(2),expectedTargetIncrease:ye.toFixed(2),targetIncreaseValid:ne,transferAmount:Re.toFixed(2)},timestamp:Date.now()}),re||A(U,{success:!1,message:`Validation failed: Source bucket balance decrease (${He.toFixed(2)}) does not match expected (${rt.toFixed(2)})`,error:`Expected source bucket to decrease by ${rt.toFixed(2)} USDC, but decreased by ${He.toFixed(2)} USDC`,timestamp:Date.now()}),ne||A(U,{success:!1,message:`Validation failed: Target bucket balance increase (${ot.toFixed(2)}) does not match expected (${ye.toFixed(2)})`,error:`Expected target bucket to increase by ${ye.toFixed(2)} USDC, but increased by ${ot.toFixed(2)} USDC`,timestamp:Date.now()}),A(U,{success:re&&ne,message:`Bucket to bucket transfer test ${re&&ne?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Re.toFixed(2)} USDC`,sourceBucketBalanceBefore:`${pe.toFixed(2)} USDC`,sourceBucketBalanceAfter:`${Xe.toFixed(2)} USDC`,sourceBucketBalanceChange:`${He.toFixed(2)} USDC`,targetBucketBalanceBefore:`${fe.toFixed(2)} USDC`,targetBucketBalanceAfter:`${Ye.toFixed(2)} USDC`,targetBucketBalanceChange:`${ot.toFixed(2)} USDC`,validationPassed:re&&ne},timestamp:Date.now()})}catch(pe){A(U,{success:!1,message:"Bucket to bucket transfer test failed",error:pe.message,timestamp:Date.now()})}}else A(U,{success:!0,message:"Skipping bucket to bucket transfer test: Invalid bucket IDs",timestamp:Date.now()})}else A(U,{success:!0,message:"Skipping bucket to bucket transfer test: Need at least 2 buckets (found "+Ae.length+")",timestamp:Date.now()});if(Ae.length>0){const Le=Ae[0],ve=Le.bucket_id||Le.id||Le.bucketId;if(ve){A(U,{success:!0,message:"Testing spot wallet to bucket default transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{A(U,{success:!0,message:"Step 1: Loading spot wallet USDC balance before transfer...",timestamp:Date.now()});let he=0;try{const re=await v.current.getBalanceDecimal(le,"USDC");he=it(re.available_balance||"0"),A(U,{success:!0,message:`Step 1: Spot wallet USDC balance before: ${he.toFixed(2)} USDC`,data:{balance:he,raw:re},timestamp:Date.now()})}catch(re){throw A(U,{success:!1,message:"Step 1: Failed to load spot wallet balance",error:re.message,timestamp:Date.now()}),re}A(U,{success:!0,message:"Step 2: Loading default bucket USDC balance before transfer...",timestamp:Date.now()});let ge=0;try{const re=await v.current.getBucket(ve);ge=it(re.available_margin||"0"),A(U,{success:!0,message:`Step 2: Default bucket USDC balance before: ${ge.toFixed(2)} USDC`,data:{balance:ge,raw:re},timestamp:Date.now()})}catch(re){throw A(U,{success:!1,message:"Step 2: Failed to load bucket balance",error:re.message,timestamp:Date.now()}),re}const pe=10,fe=Ht(pe.toString());A(U,{success:!0,message:`Step 3: Transferring ${pe.toFixed(2)} USDC (${fe} satoshi) from spot wallet to default bucket...`,timestamp:Date.now()});try{const re=await y.current.extractToBucket({bucketId:ve,assetId:"USDC",amount:fe});A(U,{success:!!re,message:"Step 3: Transfer executed successfully",data:re,timestamp:Date.now()})}catch(re){throw A(U,{success:!1,message:"Step 3: Transfer failed",error:re.message,timestamp:Date.now()}),re}await new Promise(re=>setTimeout(re,1e3)),A(U,{success:!0,message:"Step 4: Loading spot wallet USDC balance after transfer...",timestamp:Date.now()});let Re=0;try{const re=await v.current.getBalanceDecimal(le,"USDC");Re=it(re.available_balance||"0"),A(U,{success:!0,message:`Step 4: Spot wallet USDC balance after: ${Re.toFixed(2)} USDC`,data:{balance:Re,raw:re},timestamp:Date.now()})}catch(re){throw A(U,{success:!1,message:"Step 4: Failed to load spot wallet balance after transfer",error:re.message,timestamp:Date.now()}),re}A(U,{success:!0,message:"Step 5: Loading default bucket USDC balance after transfer...",timestamp:Date.now()});let Ve=0;try{const re=await v.current.getBucket(ve);Ve=it(re.available_margin||"0"),A(U,{success:!0,message:`Step 5: Default bucket USDC balance after: ${Ve.toFixed(2)} USDC`,data:{balance:Ve,raw:re},timestamp:Date.now()})}catch(re){throw A(U,{success:!1,message:"Step 5: Failed to load bucket balance after transfer",error:re.message,timestamp:Date.now()}),re}A(U,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Xe=he-Re,Ye=Ve-ge,He=pe,ot=pe,rt=Math.abs(Xe-He)<.01,ye=Math.abs(Ye-ot)<.01;A(U,{success:rt&&ye,message:`Step 6: Validation ${rt&&ye?"PASSED":"FAILED"}`,data:{walletBalanceBefore:he.toFixed(2),walletBalanceAfter:Re.toFixed(2),walletBalanceDecrease:Xe.toFixed(2),expectedWalletDecrease:He.toFixed(2),walletDecreaseValid:rt,bucketBalanceBefore:ge.toFixed(2),bucketBalanceAfter:Ve.toFixed(2),bucketBalanceIncrease:Ye.toFixed(2),expectedBucketIncrease:ot.toFixed(2),bucketIncreaseValid:ye,transferAmount:pe.toFixed(2)},timestamp:Date.now()}),rt||A(U,{success:!1,message:`Validation failed: Wallet balance decrease (${Xe.toFixed(2)}) does not match expected (${He.toFixed(2)})`,error:`Expected wallet to decrease by ${He.toFixed(2)} USDC, but decreased by ${Xe.toFixed(2)} USDC`,timestamp:Date.now()}),ye||A(U,{success:!1,message:`Validation failed: Bucket balance increase (${Ye.toFixed(2)}) does not match expected (${ot.toFixed(2)})`,error:`Expected bucket to increase by ${ot.toFixed(2)} USDC, but increased by ${Ye.toFixed(2)} USDC`,timestamp:Date.now()}),A(U,{success:rt&&ye,message:`Spot wallet to bucket transfer test ${rt&&ye?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${pe.toFixed(2)} USDC`,walletBalanceBefore:`${he.toFixed(2)} USDC`,walletBalanceAfter:`${Re.toFixed(2)} USDC`,walletBalanceChange:`${Xe.toFixed(2)} USDC`,bucketBalanceBefore:`${ge.toFixed(2)} USDC`,bucketBalanceAfter:`${Ve.toFixed(2)} USDC`,bucketBalanceChange:`${Ye.toFixed(2)} USDC`,validationPassed:rt&&ye},timestamp:Date.now()})}catch(he){A(U,{success:!1,message:"Spot wallet to bucket transfer test failed",error:he.message,timestamp:Date.now()})}}else A(U,{success:!0,message:"Skipping spot wallet to bucket transfer test: No valid default bucket ID found",timestamp:Date.now()})}else A(U,{success:!0,message:"Skipping spot wallet to bucket transfer test: No buckets available",timestamp:Date.now()});A(U,{success:!0,message:"Testing createBucket() (create new margin bucket)...",timestamp:Date.now()});try{A(U,{success:!0,message:"Step 1: Getting current bucket count before creation...",timestamp:Date.now()});let Le=[],ve=0;try{if(!v.current)throw new Error("InfoClient not initialized");Le=await v.current.getBuckets(le),ve=Array.isArray(Le)?Le.length:0,A(U,{success:!0,message:`Step 1: Current bucket count: ${ve}`,data:{bucketCount:ve,buckets:Array.isArray(Le)?Le.slice(0,3).map(fe=>({bucketId:fe.bucket_id||fe.id||fe.bucketId,marginType:fe.margin_type||fe.marginType,collateralAsset:fe.collateral_asset||fe.collateralAsset})):[]},timestamp:Date.now()})}catch(fe){throw A(U,{success:!1,message:"Step 1: Failed to get current buckets",error:fe.message,timestamp:Date.now()}),fe}A(U,{success:!0,message:"Step 2: Creating cross margin USDC bucket...",timestamp:Date.now()});let he=null,ge=null;try{if(he=await y.current.createBucket({bucketType:"USDC",marginType:"cross"}),!he||!he.success)throw new Error((he==null?void 0:he.message)||"Failed to create bucket");ge=he.bucket_id||null,A(U,{success:!!he&&!!ge,message:`Step 2: Cross margin USDC bucket created successfully. Bucket ID: ${ge==null?void 0:ge.substring(0,16)}...`,data:{createResult:he,bucketId:ge,bucketType:"USDC",marginType:"cross"},timestamp:Date.now()})}catch(fe){A(U,{success:!1,message:"Step 2: Failed to create cross margin USDC bucket",error:fe.message,timestamp:Date.now()})}if(ge&&await new Promise(fe=>setTimeout(fe,2e3)),ge){A(U,{success:!0,message:"Step 3: Validating bucket was created...",timestamp:Date.now()});try{if(!v.current)throw new Error("InfoClient not initialized");const fe=await v.current.getBuckets(le),Re=Array.isArray(fe)?fe.length:0,Ve=Array.isArray(fe)?fe.find(He=>(He.bucket_id||He.id||He.bucketId)===ge):null,Xe=!!Ve,Ye=Re>ve;A(U,{success:Xe&&Ye,message:`Step 3: Bucket validation ${Xe&&Ye?"PASSED":"FAILED"}`,data:{bucketCountBefore:ve,bucketCountAfter:Re,bucketCountIncreased:Ye,createdBucketId:ge,bucketFound:Xe,createdBucket:Ve?{bucketId:Ve.bucket_id,marginType:Ve.margin_type,collateralAsset:Ve.collateral_asset}:null},timestamp:Date.now()}),Xe||A(U,{success:!1,message:`Validation failed: Created bucket (${ge==null?void 0:ge.substring(0,16)}...) not found in bucket list`,error:"Bucket was created but not found in subsequent query",timestamp:Date.now()}),Ye||A(U,{success:!1,message:`Validation failed: Bucket count did not increase (before: ${ve}, after: ${Re})`,error:"Bucket count should increase after creation",timestamp:Date.now()})}catch(fe){A(U,{success:!1,message:"Step 3: Failed to validate bucket creation",error:fe.message,timestamp:Date.now()})}}A(U,{success:!0,message:"Step 4: Testing isolated margin USDC bucket creation...",timestamp:Date.now()});let pe=null;try{const fe=await y.current.createBucket({bucketType:"USDC",marginType:"isolated"});if(!fe||!fe.success)throw new Error((fe==null?void 0:fe.message)||"Failed to create isolated bucket");pe=fe.bucket_id||null,A(U,{success:!!fe&&!!pe,message:`Step 4: Isolated margin USDC bucket created successfully. Bucket ID: ${pe==null?void 0:pe.substring(0,16)}...`,data:{createResult:fe,bucketId:pe,bucketType:"USDC",marginType:"isolated"},timestamp:Date.now()})}catch(fe){A(U,{success:!1,message:"Step 4: Failed to create isolated margin USDC bucket",error:fe.message,timestamp:Date.now()})}A(U,{success:!0,message:`Create bucket test ${ge&&pe?"COMPLETED SUCCESSFULLY":"COMPLETED WITH SOME FAILURES"}`,data:{crossMarginBucketId:ge,isolatedMarginBucketId:pe,bucketCountBefore:ve,testsPerformed:["createBucket (cross margin USDC)","createBucket (isolated margin USDC)"]},timestamp:Date.now()})}catch(Le){A(U,{success:!1,message:"Create bucket test failed",error:Le.message,timestamp:Date.now()})}A(U,{success:!0,message:"ExchangeClient tests completed",data:{walletAddress:le,marketId:te,sessionToken:s?"present":"not set",authToken:a?"present":"not set",methodsTested:["placeOrder","cancelOrder","closePosition","extractToBucket","withdrawFromBucket","bucketTransfer","createBucket"]},timestamp:Date.now()})}catch(le){A(U,{success:!1,message:"ExchangeClient test error",error:le.message,timestamp:Date.now()})}},Ke=async()=>{if(!f){p(!0),Q(),Je.info("Running tests",{description:"Starting comprehensive SDK test suite..."});try{K(),await be(),await Z("Authentication"),await se(),E&&await Oe()}catch(U){A("General",{success:!1,message:"Test suite error",error:U.message,timestamp:Date.now()}),Je.error("Test suite error",{description:U.message||"An unexpected error occurred during testing.",duration:6e3})}finally{p(!1)}}};return m.jsxs("div",{className:"App-content-row",children:[m.jsx("h1",{children:"SDK QA"}),m.jsx("p",{children:"Comprehensive test suite for all SDK APIs"}),m.jsxs("div",{className:"App-section",children:[m.jsx("h2",{children:"Configuration"}),m.jsxs("div",{className:"sdk-test-config-grid",children:[m.jsx("div",{children:m.jsxs("label",{children:["HTTP Base URL:",m.jsx("input",{type:"text",value:n,onChange:U=>e(U.target.value),className:"sdk-test-config-input"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Market:",m.jsx("select",{value:r||"",onChange:U=>{const _e=U.target.value;_e&&i(_e)},className:"sdk-test-config-select",children:S.length===0?m.jsx("option",{value:"",children:"Loading markets..."}):m.jsxs(m.Fragment,{children:[m.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),S.map(U=>{var $e;const _e=U.market_id??(($e=U.market_id)==null?void 0:$e.toString())??"",Ie=U.moniker?U.moniker:U.symbol?U.symbol:U.baseAsset&&U.quoteAsset?`${U.baseAsset}-${U.quoteAsset}`:`Market ID: ${_e}`,me=U.active?" [ACTIVE]":"";return m.jsxs("option",{value:_e,children:[Ie," - ID: ",_e,me]},_e)})]})}),S.length>0&&m.jsx("small",{className:`sdk-test-config-hint ${r===G?"info":"warning"}`,children:r===G?` Auto-selected default market (ID: ${G==null?void 0:G.substring(0,16)}...)`:` Manual selection (ID: ${r==null?void 0:r.substring(0,16)}...)`})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Mnemonic (for ExchangeClient):",m.jsx("input",{type:"text",value:E||"",onChange:U=>L(U.target.value),placeholder:"Optional",className:"sdk-test-config-input"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Session Token (for authenticated InfoClient):",m.jsx("input",{type:"text",value:s,onChange:U=>o(U.target.value),disabled:!!(s&&s.trim()!==""),placeholder:"Optional",className:"sdk-test-config-input"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Auth Token:",m.jsx("input",{type:"text",value:a,onChange:U=>l(U.target.value),disabled:!!(O&&O.trim()!==""),placeholder:O?"Auto-filled from onboarding":'Optional - Use "Onboard" button to generate',className:"sdk-test-config-input"}),O&&m.jsx("small",{className:"sdk-test-config-hint success",children:" Auto-filled from onboarding"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Wallet Address:",m.jsx("input",{type:"text",value:P||"",disabled:!!(E&&E.trim()!==""),onChange:()=>{},placeholder:"automatic (from mnemonic)",className:"sdk-test-config-input"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Device ID:",m.jsx("input",{type:"text",value:c,onChange:U=>u(U.target.value),className:"sdk-test-config-input"})]})}),m.jsxs("div",{className:"control-box",children:[m.jsx(rve,{isRunning:f,onClick:Ke}),m.jsx(ive,{mnemonic:E||"",baseURL:n,onboardLoading:M,isRunning:f,onOnboard:(U,_e)=>{U&&U.trim()!==""?j(U,_e):Je.warning("Mnemonic required",{description:"Please enter a mnemonic first to perform onboard."})}}),m.jsx(sve,{isRunning:f,onClick:Q})]})]}),O&&m.jsxs("span",{className:"sdk-test-status success",children:[" Auth Token: ",O.substring(0,20),"..."]}),R&&m.jsxs("span",{className:"sdk-test-status error",children:[" Onboard Error: ",R,m.jsx(ove,{onClick:B})]})]}),m.jsx("div",{className:"sdk-test-results",children:Object.entries(h).map(([U,_e])=>{const Ie=g.has(U);return m.jsxs("div",{className:"sdk-test-section",children:[m.jsx(lve,{sectionName:U,isExpanded:Ie,onToggle:()=>J(U)}),Ie&&m.jsx("div",{className:"sdk-test-section-content",children:_e.results.map((me,$e)=>m.jsx(ave,{result:me},$e))})]},U)})}),Object.keys(h).length===0&&!f&&m.jsx("div",{className:"sdk-test-empty-state",children:'Click "Run All Tests" to start testing the SDK APIs'})]})}const uve=({isConnected:n,isConnecting:e,onConnect:r,onDisconnect:i})=>m.jsxs("div",{className:"config-actions",children:[m.jsx("button",{className:"nav-button",onClick:r,disabled:n||e,style:{backgroundColor:n?"#ccc":e?"#ffc107":"#28a745",color:"white",cursor:n||e?"not-allowed":"pointer"},children:e?" Connecting...":n?" Connected":"Connect"}),e&&m.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Connection in progress... Check messages below for details"}),m.jsx("button",{className:"nav-button",onClick:i,disabled:!n,style:{backgroundColor:n?"#dc3545":"#ccc",cursor:n?"pointer":"not-allowed"},children:"Disconnect"})]}),dve=({onClick:n})=>m.jsx("button",{onClick:n,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),Tr=({channel:n,isSubscribed:e,isConnected:r,disabled:i=!1,subscribeLabel:s,unsubscribeLabel:o,onSubscribe:a,onUnsubscribe:l,variant:c="public"})=>{const u=!r||i,h=e?"#dc3545":c==="private"?"#28a745":"#007bff";return m.jsx("button",{onClick:e?l:a,disabled:u,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:h,color:"white",border:"none",borderRadius:"4px",cursor:u?"not-allowed":"pointer"},children:e?o:s})},hve=({steps:n})=>n.length===0?null:m.jsxs("div",{className:"connection-steps-container",children:[m.jsx("h2",{children:"Connection Steps"}),m.jsx("div",{className:"connection-steps-list",children:n.map((e,r)=>m.jsxs("div",{className:`connection-step-item ${e.status==="error"?"error":e.status==="success"?"success":e.status==="in-progress"?"in-progress":"pending"}`,children:[m.jsx("span",{className:"connection-step-icon",children:e.status==="error"?"":e.status==="success"?"":e.status==="in-progress"?"":""}),m.jsxs("div",{className:"connection-step-content",children:[m.jsxs("div",{className:"connection-step-title",children:["Step ",e.step,": ",e.message]}),e.details&&m.jsx("div",{className:"connection-step-details",children:JSON.stringify(e.details,null,2)}),m.jsx("div",{className:"connection-step-timestamp",children:new Date(e.timestamp).toLocaleTimeString()})]})]},r))})]}),fve=({wsURL:n,onWsURLChange:e,marketId:r,onMarketIdChange:i,markets:s,symbol:o,onSymbolChange:a,klineInterval:l,onKlineIntervalChange:c,twapWindowSize:u,onTwapWindowSizeChange:h,authToken:d,onAuthTokenChange:f,walletAddress:p,deviceID:g,onDeviceIDChange:b,isConnected:y,isConnecting:v,onConnect:w,onDisconnect:k})=>m.jsxs("div",{className:"App-section",children:[m.jsx("h2",{children:"Configuration"}),m.jsxs("div",{className:"config-grid",children:[m.jsx("div",{children:m.jsxs("label",{children:["WebSocket URL:",m.jsx("input",{type:"text",value:n,onChange:_=>e(_.target.value),className:"config-input"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Market:",m.jsx("select",{value:r||"",onChange:_=>i(_.target.value),className:"config-select",children:s.length===0?m.jsx("option",{value:"",children:"Loading markets..."}):m.jsxs(m.Fragment,{children:[m.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),s.map(_=>{var P;const S=_.market_id??((P=_.market_id)==null?void 0:P.toString())??"",C=_.moniker?_.moniker:_.symbol?_.symbol:_.baseAsset&&_.quoteAsset?`${_.baseAsset}-${_.quoteAsset}`:`Market ID: ${S}`,E=_.active?" [ACTIVE]":"";return m.jsxs("option",{value:S,children:[C," - ID: ",S,E]},S)})]})})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Symbol (for funding_rate, deviation, index_price, mark_price, price_feed, twap):",m.jsx("input",{type:"text",value:o,onChange:_=>a(_.target.value),placeholder:"e.g., BTC/USDT or BTC/USDC",className:"config-input"}),o&&!o.includes("/")&&m.jsx("small",{className:"config-error",children:' Symbol must be in format "BASE/QUOTE" (e.g., "BTC/USDC")'})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Kline Interval:",m.jsxs("select",{value:l,onChange:_=>c(_.target.value),className:"config-select",children:[m.jsx("option",{value:"1m",children:"1 minute"}),m.jsx("option",{value:"5m",children:"5 minutes"}),m.jsx("option",{value:"15m",children:"15 minutes"}),m.jsx("option",{value:"1h",children:"1 hour"}),m.jsx("option",{value:"4h",children:"4 hours"}),m.jsx("option",{value:"1d",children:"1 day"})]})]})}),m.jsx("div",{children:m.jsxs("label",{children:["TWAP Window Size (seconds):",m.jsx("input",{type:"number",value:u,onChange:_=>h(_.target.value),placeholder:"e.g., 300 for 5 minutes",min:"1",className:"config-input"}),u&&(isNaN(Number(u))||Number(u)<=0)&&m.jsx("small",{className:"config-error",children:" Window size must be a positive number"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Auth Token (for private channels):",m.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),placeholder:"Required for user_updates (auto-filled from SDK Test Page)",className:"config-input"}),d&&m.jsx("small",{className:"config-hint",children:" Auto-filled from SDK Test Page"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Wallet Address:",m.jsx("input",{type:"text",value:p||"",disabled:!0,placeholder:"Auto-filled from useOnboard hook",className:`config-input-disabled ${p?"has-value":""}`}),p&&m.jsx("small",{className:"config-hint",children:" Auto-filled from useOnboard hook"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Device ID:",m.jsx("input",{type:"text",value:g,onChange:_=>b(_.target.value),className:"config-input"})]})})]}),m.jsx(uve,{isConnected:y,isConnecting:v,onConnect:w,onDisconnect:k})]}),pve=({data:n})=>m.jsxs("div",{className:"funding-rate-details",children:[m.jsx("strong",{className:"funding-rate-title",children:"Funding Rate Details:"}),m.jsxs("div",{className:"funding-rate-grid",children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Symbol:"})," ",n.symbol??"N/A"]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Funding Rate:"})," ",n.funding_rate?parseFloat(String(n.funding_rate)).toFixed(6):"N/A"]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Mark Price:"})," ",n.mark_price??"N/A"]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Index Price:"})," ",n.index_price??"N/A"]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Premium Rate:"})," ",n.premium_rate??"N/A"]}),m.jsxs("div",{children:[m.jsx("strong",{children:"EMA Funding Rate:"})," ",n.ema_funding_rate??"N/A"]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Next Funding Time:"})," ",n.next_funding_time_unix?new Date(n.next_funding_time_unix*1e3).toLocaleString():"N/A"]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Funding Interval:"})," ",n.funding_interval_seconds?`${n.funding_interval_seconds}s`:"N/A"]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Valid:"})," ",n.is_valid!==void 0?n.is_valid?"Yes":"No":"N/A"]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Stale:"})," ",m.jsx("span",{className:`funding-rate-stale ${n.is_stale?"":"valid"}`,children:n.is_stale!==void 0?n.is_stale?"Yes":"No":"N/A"})]}),n.option_type&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Option Type:"})," ",n.option_type]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Strike Price:"})," ",n.strike_price??"N/A"]})]})]})]}),mve=({positions:n})=>!n||n.length===0?null:m.jsxs("div",{className:"positions-container",children:[m.jsxs("strong",{className:"positions-title",children:["Positions (",n.length,"):"]}),m.jsx("div",{className:"positions-grid",children:n.map((e,r)=>{const i=e.size||0,s=i>=0?"LONG":"SHORT";return m.jsxs("div",{className:"position-card",children:[m.jsx("div",{className:"position-symbol",children:e.symbol||`Market ${e.marketId||e.market_id||"N/A"}`}),m.jsxs("div",{className:"position-details",children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Side:"})," ",m.jsx("span",{className:s==="LONG"?"position-side-long":"position-side-short",children:s})]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Size:"})," ",Math.abs(i).toFixed(8)]}),e.entryPrice!==void 0||e.entry_price!==void 0?m.jsxs("div",{children:[m.jsx("strong",{children:"Entry Price:"})," ",(e.entryPrice||e.entry_price||0).toFixed(8)]}):null,e.markPrice!==void 0||e.mark_price!==void 0?m.jsxs("div",{children:[m.jsx("strong",{children:"Mark Price:"})," ",(e.markPrice||e.mark_price||0).toFixed(8)]}):null,e.liquidationPrice!==void 0||e.liquidation_price!==void 0?m.jsxs("div",{children:[m.jsx("strong",{children:"Liquidation Price:"})," ",(e.liquidationPrice||e.liquidation_price||0).toFixed(8)]}):null,e.unrealizedPnL!==void 0||e.unrealized_pnl!==void 0||e.pnl!==void 0?m.jsxs("div",{children:[m.jsx("strong",{children:"Unrealized PnL:"})," ",m.jsx("span",{className:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0)>=0?"position-pnl-positive":"position-pnl-negative",children:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0).toFixed(8)})]}):null,e.leverage!==void 0?m.jsxs("div",{children:[m.jsx("strong",{children:"Leverage:"})," ",e.leverage,"x"]}):null,e.margin!==void 0?m.jsxs("div",{children:[m.jsx("strong",{children:"Margin:"})," ",e.margin.toFixed(8)]}):null,e.marginMode!==void 0||e.margin_mode!==void 0?m.jsxs("div",{children:[m.jsx("strong",{children:"Margin Mode:"})," ",e.marginMode||e.margin_mode||"N/A"]}):null]})]},r)})})]}),gve=({message:n})=>{const{channel:e,data:r,type:i,step:s,timestamp:o}=n,a=e==="funding_rate"&&typeof r=="object"&&r!==null,l=e==="user_updates"&&typeof r=="object"&&r!==null&&Array.isArray(r.positions)&&r.positions.length>0,c=a||l;return m.jsx("div",{className:`message-item ${i}`,children:m.jsx("div",{className:"message-header",children:m.jsxs("div",{className:"message-content",children:[m.jsxs("div",{className:"message-title",children:[m.jsxs("span",{children:["[",e,"]"]}),s&&m.jsxs("span",{className:"message-step",children:["(",s,")"]}),m.jsx("span",{children:new Date(o).toLocaleTimeString()})]}),a&&m.jsx(pve,{data:r}),l&&m.jsx(mve,{positions:r.positions}),!c&&m.jsx("div",{className:"message-body",children:typeof r=="string"?r:JSON.stringify(r,null,2)}),typeof r!="string"&&m.jsxs("details",{children:[m.jsx("summary",{className:"raw-data-summary",children:"View Raw Data"}),m.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(r,null,2)})]})]})})})},vve=({messages:n,isPrivate:e=!1,emptyMessage:r})=>{const i=e?"No messages yet. Connect with auth token and subscribe to user updates.":"No messages yet. Connect and subscribe to channels to see updates.";return m.jsx("div",{className:`messages-container ${e?"private":"public"}`,children:n.length===0?m.jsx("div",{className:`messages-empty ${e?"private":""}`,children:r||i}):n.map(s=>m.jsx(gve,{message:s},s.id))})},Jj=({title:n,isPrivate:e=!1,messages:r,onClearMessages:i,children:s,emptyMessage:o})=>m.jsxs("div",{className:"channel-section",children:[m.jsxs("div",{className:"channel-header",children:[m.jsx("h2",{className:"channel-title",children:n}),m.jsx(dve,{onClick:i})]}),m.jsxs("div",{className:"channel-content",children:[m.jsx("div",{className:"channel-buttons-container",children:s}),m.jsx(vve,{messages:r,isPrivate:e,emptyMessage:o}),e&&m.jsxs("div",{className:"private-note",children:[m.jsx("strong",{children:"Note:"})," Private channels require authentication. Enter your auth token in the configuration above."]})]})]});function an(n){var e=n.width,r=n.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(r<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:r}}function iu(n,e){return n.width===e.width&&n.height===e.height}var bve=function(){function n(e){var r=this;this._resolutionListener=function(){return r._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e){var r=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){r._observers=r._observers.filter(function(s){return s!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(r){return r.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},n}();function yve(n){return new bve(n)}var xve=function(){function n(e,r,i){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=an({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=r??function(o){return o},this._allowResizeObserver=(s=i==null?void 0:i.allowResizeObserver)!==null&&s!==void 0?s:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var e,r;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(r=this._devicePixelRatioObservable)===null||r===void 0||r.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return an({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=an(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(r){return r!==e})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(r){return r!==e})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(e){var r=this.bitmapSize;iu(r,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(r,e))},n.prototype._emitBitmapSizeChanged=function(e,r){var i=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,r)})},n.prototype._suggestNewBitmapSize=function(e){var r=this._suggestedBitmapSize,i=an(this._transformBitmapSize(e,this._canvasElementClientSize)),s=iu(this.bitmapSize,i)?null:i;r===null&&s===null||r!==null&&s!==null&&iu(r,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(r,s))},n.prototype._emitSuggestedBitmapSizeChanged=function(e,r){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,r)})},n.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}_ve().then(function(r){return r?e._initResizeObserver():e._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var r=Zj(this._canvasElement);if(r===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=yve(r),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var e,r;if(this._canvasElement!==null){var i=Zj(this._canvasElement);if(i!==null){var s=(r=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&r!==void 0?r:i.devicePixelRatio,o=this._canvasElement.getClientRects(),a=o[0]!==void 0?Sve(o[0],s):an({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(a)}}},n.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(r){var i=r.find(function(a){return a.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var s=i.devicePixelContentBoxSize[0],o=an({width:s.inlineSize,height:s.blockSize});e._suggestNewBitmapSize(o)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n}();function wve(n,e){return new xve(n,e.transform,e.options)}function Zj(n){return n.ownerDocument.defaultView}function _ve(){return new Promise(function(n){var e=new ResizeObserver(function(r){n(r.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Sve(n,e){return an({width:Math.round(n.left*e+n.width*e)-Math.round(n.left*e),height:Math.round(n.top*e+n.height*e)-Math.round(n.top*e)})}var kve=function(){function n(e,r,i){if(r.width===0||r.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=r,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return n.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n}();function wu(n,e){var r=n.canvasElementClientSize;if(r.width===0||r.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var s=n.canvasElement.getContext("2d",e);return s===null?null:new kve(s,r,i)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const PJ={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var eL,tL;function Zh(n,e){const r={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[e];n.setLineDash(r)}function MJ(n,e,r,i){n.beginPath();const s=n.lineWidth%2?.5:0;n.moveTo(r,e+s),n.lineTo(i,e+s),n.stroke()}function vr(n,e){if(!n)throw new Error("Assertion failed"+(e?": "+e:""))}function yi(n){if(n===void 0)throw new Error("Value is undefined");return n}function qe(n){if(n===null)throw new Error("Value is null");return n}function El(n){return qe(yi(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(eL||(eL={})),function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(tL||(tL={}));let Yn=class{constructor(){this.t=[]}i(e,r,i){const s={h:e,l:r,o:i===!0};this.t.push(s)}_(e){const r=this.t.findIndex(i=>e===i.h);r>-1&&this.t.splice(r,1)}u(e){this.t=this.t.filter(r=>r.l!==e)}p(e,r,i){const s=[...this.t];this.t=this.t.filter(o=>!o.o),s.forEach(o=>o.h(e,r,i))}v(){return this.t.length>0}m(){this.t=[]}};function $i(n,...e){for(const r of e)for(const i in r)r[i]!==void 0&&Object.prototype.hasOwnProperty.call(r,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof r[i]!="object"||n[i]===void 0||Array.isArray(r[i])?n[i]=r[i]:$i(n[i],r[i]));return n}function ef(n){return typeof n=="number"&&isFinite(n)}function Pg(n){return typeof n=="number"&&n%1==0}function b0(n){return typeof n=="string"}function Xv(n){return typeof n=="boolean"}function pa(n){const e=n;if(!e||typeof e!="object")return e;let r,i,s;for(i in r=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(s=e[i],r[i]=s&&typeof s=="object"?pa(s):s);return r}function Cve(n){return n!==null}function Eve(n){return n===null?void 0:n}const DJ="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function cx(n,e,r){return e===void 0&&(e=DJ),`${r=r!==void 0?`${r} `:""}${n}px ${e}`}let Tve=class{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=e}N(){const e=this.M,r=this.F(),i=this.W();return e.P===r&&e.T===i||(e.P=r,e.T=i,e.k=cx(r,i),e.A=2.5/12*r,e.V=e.A,e.B=r/12*e.C,e.I=r/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}};function gS(n){return n<0?0:n>255?255:Math.round(n)||0}function nL(n){return .199*n[0]+.687*n[1]+.114*n[2]}let Pve=class{constructor(e,r){this.q=new Map,this.Y=e,r&&(this.q=r)}j(e,r){if(e==="transparent")return e;const i=this.K(e),s=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${r*s})`}X(e){const r=this.K(e);return{Z:`rgb(${r[0]}, ${r[1]}, ${r[2]})`,G:nL(r)>160?"black":"white"}}J(e){return nL(this.K(e))}tt(e,r,i){const[s,o,a,l]=this.K(e),[c,u,h,d]=this.K(r),f=[gS(s+i*(c-s)),gS(o+i*(u-o)),gS(a+i*(h-a)),(p=l+i*(d-l),p<=0||p>1?Math.min(Math.max(p,0),1):Math.round(1e4*p)/1e4)];var p;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const r=this.q.get(e);if(r)return r;const i=function(a){const l=document.createElement("div");l.style.display="none",document.body.appendChild(l),l.style.color=a;const c=window.getComputedStyle(l).color;return document.body.removeChild(l),c}(e),s=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!s){if(this.Y.length)for(const a of this.Y){const l=a(e);if(l)return this.q.set(e,l),l}throw new Error(`Failed to parse color: ${e}`)}const o=[parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10),s[4]?parseFloat(s[4]):1];return this.q.set(e,o),o}},Mve=class{constructor(){this.it=[]}st(e){this.it=e}nt(e,r,i){this.it.forEach(s=>{s.nt(e,r,i)})}};class y0{nt(e,r,i){e.useBitmapCoordinateSpace(s=>this.et(s,r,i))}}let Dve=class extends y0{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;const s=this.rt.lt,o=this.rt,a=Math.max(1,Math.floor(r))%2/2,l=c=>{e.beginPath();for(let u=s.to-1;u>=s.from;--u){const h=o.ot[u],d=Math.round(h._t*r)+a,f=h.ut*i,p=c*i+a;e.moveTo(d,f),e.arc(d,f,p,0,2*Math.PI)}e.fill()};o.ct>0&&(e.fillStyle=o.dt,l(o.ft+o.ct)),e.fillStyle=o.vt,l(o.ft)}};function Ove(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const Ive={from:0,to:1};let Rve=class{constructor(e,r,i){this.Mt=new Mve,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=r,this.Pt=i,this.Mt.st(this.bt)}yt(e){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(Ove),this.bt=this.St.map(r=>{const i=new Dve;return i.ht(r),i}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),r=this.Pt.Bt(),i=this.Ct.It(),s=this.O.Et();this.kt(),r.forEach((o,a)=>{const l=this.St[a],c=o.At(i),u=o.zt();!e&&c!==null&&o.Vt()&&u!==null?(l.vt=c.Lt,l.ft=c.ft,l.ct=c.Ot,l.ot[0].gt=c.gt,l.ot[0].ut=o.Ft().Nt(c.gt,u.Wt),l.dt=c.Ht??this.O.Ut(l.ot[0].ut/o.Ft().$t()),l.ot[0].wt=i,l.ot[0]._t=s.qt(i),l.lt=Ive):l.lt=null})}},Ave=class extends y0{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:r,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.Yt===null)return;const o=this.Yt.jt.Vt,a=this.Yt.Kt.Vt;if(!o&&!a)return;const l=Math.round(this.Yt._t*i),c=Math.round(this.Yt.ut*s);e.lineCap="butt",o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*i),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Zh(e,this.Yt.jt.Xt),function(u,h,d,f){u.beginPath();const p=u.lineWidth%2?.5:0;u.moveTo(h+p,d),u.lineTo(h+p,f),u.stroke()}(e,l,0,r.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*s),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Zh(e,this.Yt.Kt.Xt),MJ(e,c,0,r.width))}},Nve=class{constructor(e,r){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new Ave(this.Zt),this.Jt=e,this.Pt=r}yt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),r=this.Pt.Qt().N().crosshair,i=this.Zt;if(r.mode===2)return i.Kt.Vt=!1,void(i.jt.Vt=!1);i.Kt.Vt=e&&this.Jt.ti(this.Pt),i.jt.Vt=e&&this.Jt.ii(),i.Kt.ct=r.horzLine.width,i.Kt.Xt=r.horzLine.style,i.Kt.R=r.horzLine.color,i.jt.ct=r.vertLine.width,i.jt.Xt=r.vertLine.style,i.jt.R=r.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}};function Bw(n,e,r,i,s,o){n.save(),n.globalCompositeOperation="copy",n.fillStyle=o,n.fillRect(e,r,i,s),n.restore()}function rL(n,e,r,i,s,o){n.beginPath(),n.roundRect?n.roundRect(e,r,i,s,o):(n.lineTo(e+i-o[1],r),o[1]!==0&&n.arcTo(e+i,r,e+i,r+o[1],o[1]),n.lineTo(e+i,r+s-o[2]),o[2]!==0&&n.arcTo(e+i,r+s,e+i-o[2],r+s,o[2]),n.lineTo(e+o[3],r+s),o[3]!==0&&n.arcTo(e,r+s,e,r+s-o[3],o[3]),n.lineTo(e,r+o[0]),o[0]!==0&&n.arcTo(e,r,e+o[0],r,o[0]))}function iL(n,e,r,i,s,o,a=0,l=[0,0,0,0],c=""){if(n.save(),!a||!c||c===o)return rL(n,e,r,i,s,l),n.fillStyle=o,n.fill(),void n.restore();const u=a/2;var h;rL(n,e+u,r+u,i-a,s-a,(h=-u,l.map(d=>d===0?d:d+h))),o!=="transparent"&&(n.fillStyle=o,n.fill()),c!=="transparent"&&(n.lineWidth=a,n.strokeStyle=c,n.closePath(),n.stroke()),n.restore()}function OJ(n,e,r,i,s,o,a){n.save(),n.globalCompositeOperation="copy";const l=n.createLinearGradient(0,0,0,s);l.addColorStop(0,o),l.addColorStop(1,a),n.fillStyle=l,n.fillRect(e,r,i,s),n.restore()}class sL{constructor(e,r){this.ht(e,r)}ht(e,r){this.Yt=e,this.ei=r}$t(e,r){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,r,i,s){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const o=this.Yt.R,a=this.ei.Z,l=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=r.k;const h=this.hi(c,r,i,s),d=h.ai;return h.li?iL(u,d.oi,d._i,d.ui,d.ci,a,d.di,[d.ft,0,0,d.ft],a):iL(u,d.fi,d._i,d.ui,d.ci,a,d.di,[0,d.ft,d.ft,0],a),this.Yt.pi&&(u.fillStyle=o,u.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(u.fillStyle=r.D,u.fillRect(h.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),h});e.useMediaCoordinateSpace(({context:c})=>{const u=l.xi;c.font=r.k,c.textAlign=l.li?"right":"left",c.textBaseline="middle",c.fillStyle=o,c.fillText(this.Yt.ri,u.Ci,(u._i+u.Si)/2+u.Pi)})}hi(e,r,i,s){const{context:o,bitmapSize:a,mediaSize:l,horizontalPixelRatio:c,verticalPixelRatio:u}=e,h=this.Yt.pi||!this.Yt.yi?r.C:0,d=this.Yt.ki?r.S:0,f=r.A+this.ei.Ti,p=r.V+this.ei.Ri,g=r.B,b=r.I,y=this.Yt.ri,v=r.P,w=i.Di(o,y),k=Math.ceil(i.Vi(o,y)),_=v+f+p,S=r.S+g+b+k+h,C=Math.max(1,Math.floor(u));let E=Math.round(_*u);E%2!=C%2&&(E+=1);const P=d>0?Math.max(1,Math.floor(d*c)):0,O=Math.round(S*c),M=Math.round(h*c),R=this.ei.Bi??this.ei.Ii,j=Math.round(R*u)-Math.floor(.5*u),B=Math.floor(j+C/2-E/2),L=B+E,$=s==="right",z=$?l.width-d:d,W=$?a.width-P:P;let q,V,F;return $?(q=W-O,V=W-M,F=z-h-g-d):(q=W+O,V=W+M,F=z+h+g),{li:$,ai:{_i:B,mi:j,Si:L,ui:O,ci:E,ft:2*c,di:P,oi:q,fi:W,wi:V,gi:C,bi:a.width},xi:{_i:B/u,Si:L/u,Ci:F,Pi:w}}}}class Uw{constructor(e){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(e||sL)(this.Ai,this.Ei),this.Oi=new(e||sL)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(e,r=!1){return Math.max(this.Li.$t(e,r),this.Oi.$t(e,r))}Fi(){return this.Ei.Bi||0}Wi(e){this.Ei.Bi=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class jve extends Uw{constructor(e,r,i){super(),this.Jt=e,this.Yi=r,this.ji=i}qi(e,r,i){if(e.Vt=!1,this.Jt.N().mode===2)return;const s=this.Jt.N().horzLine;if(!s.labelVisible)return;const o=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||o===null)return;const a=this.Yi.Xi().X(s.labelBackgroundColor);i.Z=a.Z,e.R=a.G;const l=2/12*this.Yi.P();i.Ti=l,i.Ri=l;const c=this.ji(this.Yi);i.Ii=c.Ii,e.ri=this.Yi.Zi(c.gt,o),e.Vt=!0}}const Lve=/[1-9]/g;let IJ=class{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,r){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const i=e.useMediaCoordinateSpace(({context:f})=>(f.font=r.k,Math.round(r.Gi.Vi(f,qe(this.Yt).ri,Lve))));if(i<=0)return;const s=r.Ji,o=i+2*s,a=o/2,l=this.Yt.Qi;let c=this.Yt.Ii,u=Math.floor(c-a)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-a)+.5):u+o>l&&(c-=Math.abs(l-(u+o)),u=Math.floor(c-a)+.5);const h=u+o,d=Math.ceil(0+r.S+r.C+r.A+r.P+r.V);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:p,verticalPixelRatio:g})=>{const b=qe(this.Yt);f.fillStyle=b.Z;const y=Math.round(u*p),v=Math.round(0*g),w=Math.round(h*p),k=Math.round(d*g),_=Math.round(2*p);if(f.beginPath(),f.moveTo(y,v),f.lineTo(y,k-_),f.arcTo(y,k,y+_,k,_),f.lineTo(w-_,k),f.arcTo(w,k,w,k-_,_),f.lineTo(w,v),f.fill(),b.pi){const S=Math.round(b.Ii*p),C=v,E=Math.round((C+r.C)*g);f.fillStyle=b.R;const P=Math.max(1,Math.floor(p)),O=Math.floor(.5*p);f.fillRect(S-O,C,P,E-C)}}),e.useMediaCoordinateSpace(({context:f})=>{const p=qe(this.Yt),g=0+r.S+r.C+r.A+r.P/2;f.font=r.k,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.R;const b=r.Gi.Di(f,"Apr0");f.translate(u+s,g+b),f.fillText(p.ri,0,0)})}};class Fve{constructor(e,r,i){this.xt=!0,this.Gt=new IJ,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=e,this.ts=r,this.ji=i}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const r=this.Ct.N().vertLine;if(!r.labelVisible)return;const i=this.ts.Et();if(i.Ki())return;e.Qi=i.Qi();const s=this.ji();if(s===null)return;e.Ii=s.Ii;const o=i.ss(this.Ct.It());e.ri=i.ns(qe(o)),e.Vt=!0;const a=this.ts.Xi().X(r.labelBackgroundColor);e.Z=a.Z,e.R=a.G,e.pi=i.N().ticksVisible}}let RJ=class{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}};var oL;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC"})(oL||(oL={}));class $ve extends RJ{constructor(e,r){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=r,this.ys=((s,o)=>a=>{const l=o(),c=s();if(a===qe(this.Pt).ks())return{gt:c,Ii:l};{const u=qe(a.zt());return{gt:a.Ts(l,u),Ii:l}}})(()=>this.ds,()=>this.Ss);const i=((s,o)=>()=>{const a=this.ts.Et().Rs(s()),l=o();return a&&Number.isFinite(l)?{wt:a,Ii:l}:null})(()=>this.fs,()=>this.si());this.Ds=new Fve(this,e,i)}N(){return this.Ps}Vs(e,r){this.xs=e,this.Cs=r}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(e,r,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,r,i)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(e){let r=this.gs.get(e);r||(r=new Nve(this,e),this.gs.set(e,r));let i=this.Ms.get(e);return i||(i=new Rve(this.ts,this,e),this.Ms.set(e,i)),[r,i]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,r){this.ps&&this.Pt===e||this.vs.clear();const i=[];return this.Pt===e&&i.push(this.Hs(this.vs,r,this.ys)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var r,i;(r=this.gs.get(e))==null||r.yt(),(i=this.Ms.get(e))==null||i.yt()}),this.vs.forEach(e=>e.yt()),this.Ds.yt()}qs(e){return e&&!e.ks().Ki()?e.ks():null}zs(e,r,i){this.Ys(e,r,i)&&this.Ns()}Ys(e,r,i){const s=this.bs,o=this.Ss,a=this.ds,l=this.fs,c=this.Pt,u=this.qs(i);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=i;const h=u!==null?u.zt():null;return u!==null&&h!==null?(this.ds=r,this.Ss=u.Nt(r,h)):(this.ds=NaN,this.Ss=NaN),s!==this.bs||o!==this.Ss||l!==this.fs||a!==this.ds||c!==this.Pt}Os(){const e=this.ts.js().map(i=>i.Xs().Ks()).filter(Cve),r=e.length===0?null:Math.max(...e);this.fs=r!==null?r:NaN}Hs(e,r,i){let s=e.get(r);return s===void 0&&(s=new jve(this,r,i),e.set(r,s)),s}}function qw(n){return n==="left"||n==="right"}let si=class iO{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,r){const i=function(s,o){return s===void 0?o:{tn:Math.max(s.tn,o.tn),sn:s.sn||o.sn}}(this.Zs.get(e),r);this.Zs.set(e,i)}nn(){return this.Js}en(e){const r=this.Zs.get(e);return r===void 0?{tn:this.Js}:{tn:Math.max(this.Js,r.tn),sn:r.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const r of e.Gs)this.mn(r);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((r,i)=>{this.Qs(i,r)})}static wn(){return new iO(2)}static gn(){return new iO(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(r=>r.an===5);e!==-1&&this.Gs.splice(e,1)}};class AJ{formatTickmarks(e){return e.map(r=>this.format(r))}}const aL=".";function ma(n,e){if(!ef(n))return"n/a";if(!Pg(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?n.toString():("0000000000000000"+n.toString()).slice(-e)}let Ww=class extends AJ{constructor(e,r){if(super(),r||(r=1),ef(e)&&Pg(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=r,this.bn()}format(e){const r=e<0?"":"";return e=Math.abs(e),r+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const r=this.Yi/this.Mn;let i=Math.floor(e),s="";const o=this.xn!==void 0?this.xn:NaN;if(r>1){let a=+(Math.round(e*r)-i*r).toFixed(this.xn);a>=r&&(a-=r,i+=1),s=aL+ma(+a.toFixed(this.xn)*this.Mn,o)}else i=Math.round(i*r)/r,o>0&&(s=aL+ma(0,o));return i.toFixed(0)+s}};class NJ extends Ww{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class zve extends AJ{constructor(e){super(),this.Cn=e}format(e){let r="";return e<0&&(r="-",e=-e),e<995?r+this.Pn(e):e<999995?r+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),r+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),r+this.Pn(e/1e9)+"B")}Pn(e){let r;const i=Math.pow(10,this.Cn);return r=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),r.replace(/(\.[1-9]*)0+$/,(s,o)=>o)}}const Bve=/[2-9]/g;class ux{constructor(e=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(e,r,i){return this.In(e,r,i).width}Di(e,r,i){const s=this.In(e,r,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}In(e,r,i){const s=i||Bve,o=String(r).replace(s,"0");if(this.Dn.has(o))return yi(this.Dn.get(o)).En;if(this.yn===this.Vn){const l=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(l),this.Tn++,this.yn--}e.save(),e.textBaseline="middle";const a=e.measureText(o);return e.restore(),a.width===0&&r.length||(this.Dn.set(o,{En:a,An:this.kn}),this.Rn[this.kn]=o,this.yn++,this.kn++),a}}class Uve{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,r,i){this.zn=e,this.M=r,this.Ln=i}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class jJ{constructor(e,r,i){this.Fn=e,this.On=new ux(50),this.Wn=r,this.O=i,this.F=-1,this.Gt=new Uve(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const r=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(r===null)return null;const i=e.qn(r);if(i==="overlay")return null;const s=this.O.Yn();return s.P!==this.F&&(this.F=s.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),s,i),this.Gt}}let qve=class extends y0{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,r){var a;if(!((a=this.Yt)!=null&&a.Vt))return null;const{ut:i,ct:s,Kn:o}=this.Yt;return r>=i-s-7&&r<=i+s+7?{Xn:this.Yt,Kn:o}:null}et({context:e,bitmapSize:r,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.Yt===null||this.Yt.Vt===!1)return;const o=Math.round(this.Yt.ut*s);o<0||o>r.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*i),Zh(e,this.Yt.Xt),MJ(e,o,0,r.width))}};class vA{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new qve,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class Wve extends vA{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),r=e.ie().ie;if(r!==2&&r!==3)return;const i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;const s=this.Jn.zt();s!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(s.Wt,s.Wt),this.Zn.R=i.baseLineColor,this.Zn.ct=i.baseLineWidth,this.Zn.Xt=i.baseLineStyle)}}class Hve extends y0{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:i}){const s=this.Yt;if(s===null)return;const o=Math.max(1,Math.floor(r)),a=o%2/2,l=Math.round(s.ne.x*r)+a,c=s.ne.y*i;e.fillStyle=s.ee,e.beginPath();const u=Math.max(2,1.5*s.re)*r;e.arc(l,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=s.he,e.beginPath(),e.arc(l,c,s.ft*r,0,2*Math.PI,!1),e.fill(),e.lineWidth=o,e.strokeStyle=s.ae,e.beginPath(),e.arc(l,c,s.ft*r+o/2,0,2*Math.PI,!1),e.stroke()}}const Vve=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class Yve{constructor(e){this.Gt=new Hve,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),r=this.we-e;if(r>0)return void(r<650&&(this.we+=2600));this.me=e,this.we=e+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),r=e.Pe(),i=this.ge.zt();if(r===null||i===null)return;const s=this.ge.ye(!0);if(s.ke||!r.Te(s.Re))return;const o={x:e.qt(s.Re),y:this.ge.Ft().Nt(s.gt,i.Wt)},a=s.R,l=this.ge.N().lineWidth,c=this.De(this.Ve(),a);this.Gt.ht({ee:a,re:l,he:c.he,ae:c.ae,ft:c.ft,ne:o})}Ce(){const e=this.Gt.se();if(e!==null){const r=this.De(this.Ve(),e.ee);e.he=r.he,e.ae=r.ae,e.ft=r.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(e,r,i,s){const o=i+(s-i)*r;return this.ge.Qt().Xi().j(e,o)}De(e,r){const i=e%2600/2600;let s;for(const u of Vve)if(i>=u.le&&i<=u.oe){s=u;break}vr(s!==void 0,"Last price animation internal logic error");const o=(i-s.le)/(s.oe-s.le);return{he:this.Be(r,o,s.ce,s.de),ae:this.Be(r,o,s.fe,s.pe),ft:(a=o,l=s._e,c=s.ue,l+(c-l)*a)};var a,l,c}}class Gve extends vA{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const r=this.Jn.N();if(!r.priceLineVisible||!this.Jn.Vt())return;const i=this.Jn.ye(r.priceLineSource===0);i.ke||(e.Vt=!0,e.ut=i.Ii,e.R=this.Jn.Ie(i.R),e.ct=r.priceLineWidth,e.Xt=r.priceLineStyle)}}let Kve=class extends Uw{constructor(e){super(),this.Jt=e}qi(e,r,i){e.Vt=!1,r.Vt=!1;const s=this.Jt;if(!s.Vt())return;const o=s.N(),a=o.lastValueVisible,l=s.Ee()!=="",c=o.seriesLastValueMode===0,u=s.ye(!1);if(u.ke)return;a&&(e.ri=this.Ae(u,a,c),e.Vt=e.ri.length!==0),(l||c)&&(r.ri=this.ze(u,a,l,c),r.Vt=r.ri.length>0);const h=s.Ie(u.R),d=this.Jt.Qt().Xi().X(h);i.Z=d.Z,i.Ii=u.Ii,r.Ht=s.Qt().Ut(u.Ii/s.Ft().$t()),e.Ht=h,e.R=d.G,r.R=d.G}ze(e,r,i,s){let o="";const a=this.Jt.Ee();return i&&a.length!==0&&(o+=`${a} `),r&&s&&(o+=this.Jt.Ft().Le()?e.Oe:e.Ne),o.trim()}Ae(e,r,i){return r?i?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}};function lL(n,e,r,i){const s=Number.isFinite(e),o=Number.isFinite(r);return s&&o?n(e,r):s||o?s?e:r:i}class Xr{constructor(e,r){this.Fe=e,this.We=r}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new Xr(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new Xr(lL(Math.min,this.$e(),e.$e(),-1/0),lL(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!ef(e)||this.We-this.Fe===0)return;const r=.5*(this.We+this.Fe);let i=this.We-r,s=this.Fe-r;i*=e,s*=e,this.We=r+i,this.Fe=r+s}Ke(e){ef(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new Xr(e.minValue,e.maxValue)}}class dx{constructor(e,r){this.Ge=e,this.Je=r||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new dx(Xr.Ze(e.priceRange),e.margins)}}class Xve extends vA{constructor(e,r){super(e),this.ir=r}te(){const e=this.Zn;e.Vt=!1;const r=this.ir.N();if(!this.Jn.Vt()||!r.lineVisible)return;const i=this.ir.sr();i!==null&&(e.Vt=!0,e.ut=i,e.R=r.color,e.ct=r.lineWidth,e.Xt=r.lineStyle,e.Kn=this.ir.N().id)}}class Qve extends Uw{constructor(e,r){super(),this.ge=e,this.ir=r}qi(e,r,i){e.Vt=!1,r.Vt=!1;const s=this.ir.N(),o=s.axisLabelVisible,a=s.title!=="",l=this.ge;if(!o||!l.Vt())return;const c=this.ir.sr();if(c===null)return;a&&(r.ri=s.title,r.Vt=!0),r.Ht=l.Qt().Ut(c/l.Ft().$t()),e.ri=this.nr(s.price),e.Vt=!0;const u=this.ge.Qt().Xi().X(s.axisLabelColor||s.color);i.Z=u.Z;const h=s.axisLabelTextColor||u.G;e.R=h,r.R=h,i.Ii=c}nr(e){const r=this.ge.zt();return r===null?"":this.ge.Ft().Zi(e,r.Wt)}}class Jve{constructor(e,r){this.ge=e,this.Ps=r,this.er=new Xve(e,this),this.Fn=new Qve(e,this),this.rr=new jJ(this.Fn,e,e.Qt())}hr(e){$i(this.Ps,e),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const e=this.ge,r=e.Ft();if(e.Qt().Et().Ki()||r.Ki())return null;const i=e.zt();return i===null?null:r.Nt(this.Ps.price,i.Wt)}}class Zve extends RJ{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const ebe={Bar:(n,e,r,i)=>{const s=e.upColor,o=e.downColor,a=qe(n(r,i)),l=El(a.Wt[0])<=El(a.Wt[3]);return{cr:a.R??(l?s:o)}},Candlestick:(n,e,r,i)=>{const s=e.upColor,o=e.downColor,a=e.borderUpColor,l=e.borderDownColor,c=e.wickUpColor,u=e.wickDownColor,h=qe(n(r,i)),d=El(h.Wt[0])<=El(h.Wt[3]);return{cr:h.R??(d?s:o),dr:h.Ht??(d?a:l),pr:h.vr??(d?c:u)}},Custom:(n,e,r,i)=>({cr:qe(n(r,i)).R??e.color}),Area:(n,e,r,i)=>{const s=qe(n(r,i));return{cr:s.vt??e.lineColor,vt:s.vt??e.lineColor,mr:s.mr??e.topColor,wr:s.wr??e.bottomColor}},Baseline:(n,e,r,i)=>{const s=qe(n(r,i));return{cr:s.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:s.gr??e.topLineColor,Mr:s.Mr??e.bottomLineColor,br:s.br??e.topFillColor1,Sr:s.Sr??e.topFillColor2,Cr:s.Cr??e.bottomFillColor1,Pr:s.Pr??e.bottomFillColor2}},Line:(n,e,r,i)=>{const s=qe(n(r,i));return{cr:s.R??e.color,vt:s.R??e.color}},Histogram:(n,e,r,i)=>({cr:qe(n(r,i)).R??e.color})};class tbe{constructor(e){this.yr=(r,i)=>i!==void 0?i.Wt:this.ge.Xs().kr(r),this.ge=e,this.Tr=ebe[e.Rr()]}Dr(e,r){return this.Tr(this.yr,this.ge.N(),e,r)}}function LJ(n,e,r,i,s=0,o=e.length){let a=o-s;for(;0<a;){const l=a>>1,c=s+l;i(e[c],r)===n?(s=c+1,a-=l+1):a=l}return s}const tf=LJ.bind(null,!0),FJ=LJ.bind(null,!1);var cL;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(cL||(cL={}));const Xa=30;class nbe{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}kr(e){return this.Fr(e)}Fr(e,r=0){const i=this.Nr(e,r);return i===null?null:{...this.Wr(i),Re:this.Or(i)}}Hr(){return this.Vr}Ur(e,r,i){if(this.Ki())return null;let s=null;for(const o of i)s=Qv(s,this.$r(e,r,o));return s}ht(e){this.Ir.clear(),this.Br.clear(),this.Vr=e,this.Er=e.map(r=>r.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,r){const i=this.Yr(e);if(i===null&&r!==0)switch(r){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return i}jr(e){let r=this.Xr(e);return r>0&&(r-=1),r!==this.Vr.length&&this.Or(r)<e?r:null}Kr(e){const r=this.Zr(e);return r!==this.Vr.length&&e<this.Or(r)?r:null}Yr(e){const r=this.Xr(e);return r===this.Vr.length||e<this.Vr[r].Re?null:r}Xr(e){return tf(this.Vr,e,(r,i)=>r.Re<i)}Zr(e){return FJ(this.Vr,e,(r,i)=>r.Re>i)}Gr(e,r,i){let s=null;for(let o=e;o<r;o++){const a=this.Vr[o].Wt[i];Number.isNaN(a)||(s===null?s={Jr:a,Qr:a}:(a<s.Jr&&(s.Jr=a),a>s.Qr&&(s.Qr=a)))}return s}$r(e,r,i){if(this.Ki())return null;let s=null;const o=qe(this.Lr()),a=qe(this.Ks()),l=Math.max(e,o),c=Math.min(r,a),u=Math.ceil(l/Xa)*Xa,h=Math.max(u,Math.floor(c/Xa)*Xa);{const f=this.Xr(l),p=this.Zr(Math.min(c,u,r));s=Qv(s,this.Gr(f,p,i))}let d=this.Br.get(i);d===void 0&&(d=new Map,this.Br.set(i,d));for(let f=Math.max(u+1,l);f<h;f+=Xa){const p=Math.floor(f/Xa);let g=d.get(p);if(g===void 0){const b=this.Xr(p*Xa),y=this.Zr((p+1)*Xa-1);g=this.Gr(b,y,i),d.set(p,g)}s=Qv(s,g)}{const f=this.Xr(h),p=this.Zr(c);s=Qv(s,this.Gr(f,p,i))}return s}}function Qv(n,e){return n===null?e:e===null?n:{Jr:Math.min(n.Jr,e.Jr),Qr:Math.max(n.Qr,e.Qr)}}const hx={setLineStyle:Zh};class rbe{constructor(e){this.th=e}nt(e,r,i){this.th.draw(e,hx)}ih(e,r,i){var s,o;(o=(s=this.th).drawBackground)==null||o.call(s,e,hx)}}class ibe{constructor(e){this.Dn=null,this.sh=e}Tt(){var i;const e=this.sh.renderer();if(e===null)return null;if(((i=this.Dn)==null?void 0:i.nh)===e)return this.Dn.eh;const r=new rbe(e);return this.Dn={nh:e,eh:r},r}rh(){var e,r;return((r=(e=this.sh).zOrder)==null?void 0:r.call(e))??"normal"}}class $J{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,r;(r=(e=this.ah).updateAllViews)==null||r.call(e)}Fs(){var i,s,o;const e=((s=(i=this.ah).paneViews)==null?void 0:s.call(i))??[];if(((o=this.hh)==null?void 0:o.nh)===e)return this.hh.eh;const r=e.map(a=>new ibe(a));return this.hh={nh:e,eh:r},r}jn(e,r){var i,s;return((s=(i=this.ah).hitTest)==null?void 0:s.call(i,e,r))??null}}let sbe=class extends $J{us(){return[]}};class obe{constructor(e){this.th=e}nt(e,r,i){this.th.draw(e,hx)}ih(e,r,i){var s,o;(o=(s=this.th).drawBackground)==null||o.call(s,e,hx)}}class uL{constructor(e){this.Dn=null,this.sh=e}Tt(){var i;const e=this.sh.renderer();if(e===null)return null;if(((i=this.Dn)==null?void 0:i.nh)===e)return this.Dn.eh;const r=new obe(e);return this.Dn={nh:e,eh:r},r}rh(){var e,r;return((r=(e=this.sh).zOrder)==null?void 0:r.call(e))??"normal"}}function zJ(n){var e,r,i;return{ri:n.text(),Ii:n.coordinate(),Bi:(e=n.fixedCoordinate)==null?void 0:e.call(n),R:n.textColor(),Z:n.backColor(),Vt:((r=n.visible)==null?void 0:r.call(n))??!0,pi:((i=n.tickVisible)==null?void 0:i.call(n))??!0}}class abe{constructor(e,r){this.Gt=new IJ,this._h=e,this.uh=r}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...zJ(this._h)}),this.Gt}}class lbe extends Uw{constructor(e,r){super(),this._h=e,this.Yi=r}qi(e,r,i){const s=zJ(this._h);i.Z=s.Z,e.R=s.R;const o=2/12*this.Yi.P();i.Ti=o,i.Ri=o,i.Ii=s.Ii,i.Bi=s.Bi,e.ri=s.ri,e.Vt=s.Vt,e.pi=s.pi}}class cbe extends $J{constructor(e,r){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=r}cs(){var s,o,a;const e=((o=(s=this.ah).timeAxisViews)==null?void 0:o.call(s))??[];if(((a=this.dh)==null?void 0:a.nh)===e)return this.dh.eh;const r=this.ge.Qt().Et(),i=e.map(l=>new abe(l,r));return this.dh={nh:e,eh:i},i}Ws(){var s,o,a;const e=((o=(s=this.ah).priceAxisViews)==null?void 0:o.call(s))??[];if(((a=this.fh)==null?void 0:a.nh)===e)return this.fh.eh;const r=this.ge.Ft(),i=e.map(l=>new lbe(l,r));return this.fh={nh:e,eh:i},i}wh(){var i,s,o;const e=((s=(i=this.ah).priceAxisPaneViews)==null?void 0:s.call(i))??[];if(((o=this.ph)==null?void 0:o.nh)===e)return this.ph.eh;const r=e.map(a=>new uL(a));return this.ph={nh:e,eh:r},r}gh(){var i,s,o;const e=((s=(i=this.ah).timeAxisPaneViews)==null?void 0:s.call(i))??[];if(((o=this.mh)==null?void 0:o.nh)===e)return this.mh.eh;const r=e.map(a=>new uL(a));return this.mh={nh:e,eh:r},r}Mh(e,r){var i,s;return((s=(i=this.ah).autoscaleInfo)==null?void 0:s.call(i,e,r))??null}}function vS(n,e,r,i){n.forEach(s=>{e(s).forEach(o=>{o.rh()===r&&i.push(o)})})}function bS(n){return n.Fs()}function ube(n){return n.wh()}function dbe(n){return n.gh()}const hbe=["Area","Line","Baseline"];class Hw extends Zve{constructor(e,r,i,s,o){super(e),this.Yt=new nbe,this.er=new Gve(this),this.bh=[],this.Sh=new Wve(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=i,this.kh=r;const a=new Kve(this);this.vs=[a],this.rr=new jJ(a,this,e),hbe.includes(this.kh)&&(this.xh=new Yve(this)),this.Th(),this.sh=s(this,this.Qt(),o)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(e){return this.Ps.priceLineColor||e}ye(e){const r={ke:!0},i=this.Ft();if(this.Qt().Et().Ki()||i.Ki()||this.Yt.Ki())return r;const s=this.Qt().Et().Pe(),o=this.zt();if(s===null||o===null)return r;let a,l;if(e){const d=this.Yt.Ar();if(d===null)return r;a=d,l=d.Re}else{const d=this.Yt.Fr(s.bi(),-1);if(d===null||(a=this.Yt.kr(d.Re),a===null))return r;l=d.Re}const c=a.Wt[3],u=this.Rh().Dr(l,{Wt:a}),h=i.Nt(c,o.Wt);return{ke:!1,gt:c,ri:i.Zi(c,o.Wt),Oe:i.Dh(c),Ne:i.Vh(c,o.Wt),R:u.cr,Ii:h,Re:l}}Rh(){return this.Ch!==null||(this.Ch=new tbe(this)),this.Ch}N(){return this.Ps}hr(e){const r=e.priceScaleId;r!==void 0&&r!==this.Ps.priceScaleId&&this.Qt().Bh(this,r),$i(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(e,r){this.Yt.ht(e),this.sh.yt("data"),this.xh!==null&&(r&&r.zh?this.xh.be():e.length===0&&this.xh.Me());const i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const r=new Jve(this,e);return this.bh.push(r),this.Qt().Eh(this),r}Nh(e){const r=this.bh.indexOf(e);r!==-1&&this.bh.splice(r,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const r=e.Uh();return this.Yt.Fr(r,1)}Xs(){return this.Yt}$h(e){const r=this.Yt.kr(e);return r===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:r.Wt[0],Yh:r.Wt[1],jh:r.Wt[2],Kh:r.Wt[3]}:r.Wt[3]}Xh(e){const r=[];vS(this.yh,bS,"top",r);const i=this.xh;return i!==null&&i.Vt()&&(this.Ph===null&&i.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),i.Se(),r.unshift(i)),r}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const r=this.bh.map(i=>i.lr());return e.push(...r),vS(this.yh,bS,"normal",e),e}Jh(){return this.Qh(bS,"bottom")}ta(e){return this.Qh(ube,e)}ia(e){return this.Qh(dbe,e)}sa(e,r){return this.yh.map(i=>i.jn(e,r)).filter(i=>i!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,r){if(r!==this.es&&!this.Gh())return[];const i=[...this.vs];for(const s of this.bh)i.push(s.ur());return this.yh.forEach(s=>{i.push(...s.Ws())}),i}cs(){const e=[];return this.yh.forEach(r=>{e.push(...r.cs())}),e}Mh(e,r){if(this.Ps.autoscaleInfoProvider!==void 0){const i=this.Ps.autoscaleInfoProvider(()=>{const s=this.na(e,r);return s===null?null:s.Xe()});return dx.Ze(i)}return this.na(e,r)}nh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}ea(){return this.ra}Ns(){var e;this.sh.yt();for(const r of this.vs)r.yt();for(const r of this.bh)r.yt();this.er.yt(),this.Sh.yt(),(e=this.xh)==null||e.yt(),this.yh.forEach(r=>r.Ns())}Ft(){return qe(super.Ft())}At(e){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const r=this.Yt.kr(e);return r===null?null:{gt:r.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(e){this.yh.push(new cbe(e,this))}ua(e){this.yh=this.yh.filter(r=>r.oh()!==e)}ca(){if(this.kh==="Custom")return e=>this.sh.da(e)}fa(){if(this.kh==="Custom")return e=>this.sh.pa(e)}va(){return this.Yt.qr()}Gh(){return!qw(this.Ft().ma())}na(e,r){if(!Pg(e)||!Pg(r)||this.Yt.Ki())return null;const i=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],s=this.Yt.Ur(e,r,i);let o=s!==null?new Xr(s.Jr,s.Qr):null,a=null;if(this.Rr()==="Histogram"){const l=this.Ps.base,c=new Xr(l,l);o=o!==null?o.vn(c):c}return this.yh.forEach(l=>{const c=l.Mh(e,r);if(c!=null&&c.priceRange){const u=new Xr(c.priceRange.minValue,c.priceRange.maxValue);o=o!==null?o.vn(u):u}c!=null&&c.margins&&(a=c.margins)}),new dx(o,a)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(e){switch(this.kh){case"Line":case"Area":case"Baseline":{const r=this.Ps.crosshairMarkerBackgroundColor;if(r.length!==0)return r}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ra={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(r=>r.map(e))};break}case"volume":this.ra=new zve(this.Ps.priceFormat.precision);break;case"percent":this.ra=new NJ(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new Ww(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.wa()}Qh(e,r){const i=[];return vS(this.yh,e,r,i),i}}const fbe=[3],pbe=[0,1,2,3];class mbe{constructor(e){this.Ps=e}ga(e,r,i){let s=e;if(this.Ps.mode===0)return s;const o=i.ks(),a=o.zt();if(a===null)return s;const l=o.Nt(e,a),c=i.Ma().filter(h=>h instanceof Hw).reduce((h,d)=>{if(i.Un(d)||!d.Vt())return h;const f=d.Ft(),p=d.Xs();if(f.Ki()||!p.Te(r))return h;const g=p.kr(r);if(g===null)return h;const b=El(d.zt()),y=this.Ps.mode===3?pbe:fbe;return h.concat(y.map(v=>f.Nt(g.Wt[v],b.Wt)))},[]);if(c.length===0)return s;c.sort((h,d)=>Math.abs(h-l)-Math.abs(d-l));const u=c[0];return s=o.Ts(u,a),s}}function _m(n,e,r){return Math.min(Math.max(n,e),r)}function Jv(n,e,r){return e-n<=r}class gbe extends y0{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:r,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.Yt===null)return;const o=Math.max(1,Math.floor(i));e.lineWidth=o,function(a,l){a.save(),a.lineWidth%2&&a.translate(.5,.5),l(),a.restore()}(e,()=>{const a=qe(this.Yt);if(a.ba){e.strokeStyle=a.Sa,Zh(e,a.xa),e.beginPath();for(const l of a.Ca){const c=Math.round(l.Pa*i);e.moveTo(c,-o),e.lineTo(c,r.height+o)}e.stroke()}if(a.ya){e.strokeStyle=a.ka,Zh(e,a.Ta),e.beginPath();for(const l of a.Ra){const c=Math.round(l.Pa*s);e.moveTo(-o,c),e.lineTo(r.width+o,c)}e.stroke()}})}}class vbe{constructor(e){this.Gt=new gbe,this.xt=!0,this.Pt=e}yt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,r={ya:e.horzLines.visible,ba:e.vertLines.visible,ka:e.horzLines.color,Sa:e.vertLines.color,Ta:e.horzLines.style,xa:e.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map(i=>({Pa:i.coord}))};this.Gt.ht(r),this.xt=!1}return this.Gt}}class bbe{constructor(e){this.sh=new vbe(e)}lr(){return this.sh}}const yS={Va:4,Ba:1e-4};function Fd(n,e){const r=100*(n-e)/e;return e<0?-r:r}function ybe(n,e){const r=Fd(n.$e(),e),i=Fd(n.qe(),e);return new Xr(r,i)}function Sm(n,e){const r=100*(n-e)/e+100;return e<0?-r:r}function xbe(n,e){const r=Sm(n.$e(),e),i=Sm(n.qe(),e);return new Xr(r,i)}function fx(n,e){const r=Math.abs(n);if(r<1e-15)return 0;const i=Math.log10(r+e.Ba)+e.Va;return n<0?-i:i}function km(n,e){const r=Math.abs(n);if(r<1e-15)return 0;const i=Math.pow(10,r-e.Va)-e.Ba;return n<0?-i:i}function yp(n,e){if(n===null)return null;const r=fx(n.$e(),e),i=fx(n.qe(),e);return new Xr(r,i)}function $d(n,e){if(n===null)return null;const r=km(n.$e(),e),i=km(n.qe(),e);return new Xr(r,i)}function xS(n){if(n===null)return yS;const e=Math.abs(n.qe()-n.$e());if(e>=1||e<1e-15)return yS;const r=Math.ceil(Math.abs(Math.log10(e))),i=yS.Va+r;return{Va:i,Ba:1/Math.pow(10,i)}}class wS{constructor(e,r){if(this.Ia=e,this.Ea=r,function(i){if(i<0)return!1;if(i>1e18)return!0;for(let s=i;s>1;s/=10)if(s%10!=0)return!1;return!0}(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let i=this.Ia;i!==1;){if(i%2==0)this.Aa.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),i/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(e,r,i){const s=this.Ia===0?0:1/this.Ia;let o=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-r)))),a=0,l=this.Ea[0];for(;;){const d=Jv(o,s,1e-14)&&o>s+1e-14,f=Jv(o,i*l,1e-14),p=Jv(o,1,1e-14);if(!(d&&f&&p))break;o/=l,l=this.Ea[++a%this.Ea.length]}if(o<=s+1e-14&&(o=s),o=Math.max(1,o),this.Aa.length>0&&(c=o,u=1,h=1e-14,Math.abs(c-u)<h))for(a=0,l=this.Aa[0];Jv(o,i*l,1e-14)&&o>s+1e-14;)o/=l,l=this.Aa[++a%this.Aa.length];var c,u,h;return o}}let dL=class{constructor(e,r,i,s){this.La=[],this.Yi=e,this.Ia=r,this.Oa=i,this.Na=s}za(e,r){if(e<r)throw new Error("high < low");const i=this.Yi.$t(),s=(e-r)*this.Fa()/i,o=new wS(this.Ia,[2,2.5,2]),a=new wS(this.Ia,[2,2,2.5]),l=new wS(this.Ia,[2.5,2,2]),c=[];return c.push(o.za(e,r,s),a.za(e,r,s),l.za(e,r,s)),function(u){if(u.length<1)throw Error("array is empty");let h=u[0];for(let d=1;d<u.length;++d)u[d]<h&&(h=u[d]);return h}(c)}Wa(){const e=this.Yi,r=e.zt();if(r===null)return void(this.La=[]);const i=e.$t(),s=this.Oa(i-1,r),o=this.Oa(0,r),a=this.Yi.N().entireTextOnly?this.Ha()/2:0,l=a,c=i-1-a,u=Math.max(s,o),h=Math.min(s,o);if(u===h)return void(this.La=[]);const d=this.za(u,h);if(this.Ua(r,d,u,h,l,c),e.$a()&&this.qa(d,h,u)){const g=this.Yi.Ya();this.ja(r,d,l,c,g,2*g)}const f=this.La.map(g=>g.Ka),p=this.Yi.Xa(f);for(let g=0;g<this.La.length;g++)this.La[g].Za=p[g]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(e,r,i,s,o,a){const l=this.La,c=this.Yi;let u=i%r;u+=u<0?r:0;const h=i>=s?1:-1;let d=null,f=0;for(let p=i-u;p>s;p-=r){const g=this.Na(p,e,!0);d!==null&&Math.abs(g-d)<this.Fa()||g<o||g>a||(f<l.length?(l[f].Pa=g,l[f].Za=c.Ga(p),l[f].Ka=p):l.push({Pa:g,Za:c.Ga(p),Ka:p}),f++,d=g,c.Ja()&&(r=this.za(p*h,s)))}l.length=f}ja(e,r,i,s,o,a){const l=this.La,c=this.Qa(e,i,o,a),u=this.Qa(e,s,-a,-o),h=this.Na(0,e,!0)-this.Na(r,e,!0);l.length>0&&l[0].Pa-c.Pa<h/2&&l.shift(),l.length>0&&u.Pa-l[l.length-1].Pa<h/2&&l.pop(),l.unshift(c),l.push(u)}Qa(e,r,i,s){const o=(i+s)/2,a=this.Oa(r+i,e),l=this.Oa(r+s,e),c=Math.min(a,l),u=Math.max(a,l),h=Math.max(.1,this.za(u,c)),d=this.Oa(r+o,e),f=d-d%h,p=this.Na(f,e,!0);return{Za:this.Yi.Ga(f),Pa:p,Ka:f}}qa(e,r,i){let s=El(this.Yi.Qe());return this.Yi.Ja()&&(s=$d(s,this.Yi.tl())),s.$e()-r<e&&i-s.qe()<e}};function BJ(n){return n.slice().sort((e,r)=>qe(e.hs())-qe(r.hs()))}var hL;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(hL||(hL={}));const fL=new NJ,pL=new Ww(100,1);class wbe{constructor(e,r,i,s,o){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new Yn,this.ul=new Yn,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=pL,this.wl=xS(null),this.gl=e,this.Ps=r,this.Ml=i,this.bl=s,this.Sl=o,this.xl=new dL(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(e){if($i(this.Ps,e),this.wa(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const r=yi(e.scaleMargins.top),i=yi(e.scaleMargins.bottom);if(r<0||r>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${r}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(r+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${r+i}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const r=this.ie();let i=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),r.ie===1&&e.ie!==r.ie&&(function(o,a){if(o===null)return!1;const l=km(o.$e(),a),c=km(o.qe(),a);return isFinite(l)&&isFinite(c)}(this.Ge,this.wl)?(i=$d(this.Ge,this.wl),i!==null&&this.Bl(i)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==r.ie&&(i=yp(this.Ge,this.wl),i!==null&&this.Bl(i));const s=r.ie!==this.Ps.mode;s&&(r.ie===2||this.Le())&&this.wa(),s&&(r.ie===3||this.Dl())&&this.wa(),e.Vl!==void 0&&r.Vl!==e.Vl&&(this.Ps.invertScale=e.Vl,this.Il()),this.ul.p(r,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(e){this.il!==e&&(this.il=e,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const e=this.$t()-this.Ll()-this.Ol();return this.sl=e,e}Qe(){return this.Nl(),this.Ge}Bl(e,r){const i=this.Ge;(r||i===null&&e!==null||i!==null&&!i.He(e))&&(this.pl=null,this.Ge=e)}Fl(e){this.Bl(e),this.Wl(e!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(e){return this.Vl()?e:this.$t()-1-e}Nt(e,r){return this.Le()?e=Fd(e,r):this.Dl()&&(e=Sm(e,r)),this.Pl(e,r)}Ul(e,r,i){this.Nl();const s=this.Ol(),o=qe(this.Qe()),a=o.$e(),l=o.qe(),c=this.zl()-1,u=this.Vl(),h=c/(l-a),d=i===void 0?0:i.from,f=i===void 0?e.length:i.to,p=this.$l();for(let g=d;g<f;g++){const b=e[g],y=b.gt;if(isNaN(y))continue;let v=y;p!==null&&(v=p(b.gt,r));const w=s+h*(v-a),k=u?w:this.il-1-w;b.ut=k}}ql(e,r,i){this.Nl();const s=this.Ol(),o=qe(this.Qe()),a=o.$e(),l=o.qe(),c=this.zl()-1,u=this.Vl(),h=c/(l-a),d=i===void 0?0:i.from,f=i===void 0?e.length:i.to,p=this.$l();for(let g=d;g<f;g++){const b=e[g];let y=b.qh,v=b.Yh,w=b.jh,k=b.Kh;p!==null&&(y=p(b.qh,r),v=p(b.Yh,r),w=p(b.jh,r),k=p(b.Kh,r));let _=s+h*(y-a),S=u?_:this.il-1-_;b.Yl=S,_=s+h*(v-a),S=u?_:this.il-1-_,b.jl=S,_=s+h*(w-a),S=u?_:this.il-1-_,b.Kl=S,_=s+h*(k-a),S=u?_:this.il-1-_,b.Xl=S}}Ts(e,r){const i=this.Cl(e,r);return this.Zl(i,r)}Zl(e,r){let i=e;return this.Le()?i=function(s,o){return o<0&&(s=-s),s/100*o+o}(i,r):this.Dl()&&(i=function(s,o){return s-=100,o<0&&(s=-s),s/100*o+o}(i,r)),i}Ma(){return this.cl}Dt(){return this.fl||(this.fl=BJ(this.cl)),this.fl}Gl(e){this.cl.indexOf(e)===-1&&(this.cl.push(e),this.wa(),this.Jl())}Ql(e){const r=this.cl.indexOf(e);if(r===-1)throw new Error("source is not attached to scale");this.cl.splice(r,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let e=null;for(const r of this.cl){const i=r.zt();i!==null&&(e===null||i.Hh<e.Hh)&&(e=i)}return e===null?null:e.Wt}Vl(){return this.Ps.invertScale}Da(){const e=this.zt()===null;if(this.pl!==null&&(e||this.pl.io===e))return this.pl.Da;this.xl.Wa();const r=this.xl.Da();return this.pl={Da:r,io:e},this._l.p(),r}so(){return this._l}no(e){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-e,this.nl=qe(this.Qe()).Ue()))}eo(e){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(e=this.il-e)<0&&(e=0);let r=(this.vl+.2*(this.il-1))/(e+.2*(this.il-1));const i=qe(this.nl).Ue();r=Math.max(r,.1),i.je(r),this.Bl(i)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(e){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=e,this.nl=qe(this.Qe()).Ue()))}ao(e){if(this.Tl()||this.ml===null)return;const r=qe(this.Qe()).Ye()/(this.zl()-1);let i=e-this.ml;this.Vl()&&(i*=-1);const s=i*r,o=qe(this.nl).Ue();o.Ke(s),this.Bl(o,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(e,r){switch(this.Ps.mode){case 2:return this.oo(Fd(e,r));case 3:return this.ea().format(Sm(e,r));default:return this.nr(e)}}Ga(e){switch(this.Ps.mode){case 2:return this.oo(e);case 3:return this.ea().format(e);default:return this.nr(e)}}Xa(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ea().formatTickmarks(e);default:return this.uo(e)}}Dh(e){return this.nr(e,qe(this.dl).ea())}Vh(e,r){return e=Fd(e,r),this.oo(e,fL)}co(){return this.cl}do(e){this.el={hl:e,rl:!1}}Ns(){this.cl.forEach(e=>e.Ns())}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let e=1/0;this.dl=null;for(const i of this.cl)i.hs()<e&&(e=i.hs(),this.dl=i);let r=100;this.dl!==null&&(r=Math.round(this.dl.nh())),this.ra=pL,this.Le()?(this.ra=fL,r=100):this.Dl()?(this.ra=new Ww(100,1),r=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new dL(this,r,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(e){this.al=e}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(e,r){if(this.Nl(),this.Ki())return 0;e=this.Ja()&&e?fx(e,this.wl):e;const i=qe(this.Qe()),s=this.Ol()+(this.zl()-1)*(e-i.$e())/i.Ye();return this.Hl(s)}Cl(e,r){if(this.Nl(),this.Ki())return 0;const i=this.Hl(e),s=qe(this.Qe()),o=s.$e()+s.Ye()*((i-this.Ol())/(this.zl()-1));return this.Ja()?km(o,this.wl):o}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const e=this.el.hl;if(e===null)return;let r=null;const i=this.co();let s=0,o=0;for(const c of i){if(!c.Vt())continue;const u=c.zt();if(u===null)continue;const h=c.Mh(e.Uh(),e.bi());let d=h&&h.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=yp(d,this.wl);break;case 2:d=ybe(d,u.Wt);break;case 3:d=xbe(d,u.Wt)}if(r=r===null?d:r.vn(qe(d)),h!==null){const f=h.tr();f!==null&&(s=Math.max(s,f.above),o=Math.max(o,f.below))}}}if(this.$a()&&(s=Math.max(s,this.Ya()),o=Math.max(o,this.Ya())),s===this.ll&&o===this.ol||(this.ll=s,this.ol=o,this.pl=null,this.kl()),r!==null){if(r.$e()===r.qe()){const c=5*this.fo();this.Ja()&&(r=$d(r,this.wl)),r=new Xr(r.$e()-c,r.qe()+c),this.Ja()&&(r=yp(r,this.wl))}if(this.Ja()){const c=$d(r,this.wl),u=xS(c);if(a=u,l=this.wl,a.Va!==l.Va||a.Ba!==l.Ba){const h=this.nl!==null?$d(this.nl,this.wl):null;this.wl=u,r=yp(c,u),h!==null&&(this.nl=yp(h,u))}}this.Bl(r)}else this.Ge===null&&(this.Bl(new Xr(-.5,.5)),this.wl=xS(null));var a,l}$l(){return this.Le()?Fd:this.Dl()?Sm:this.Ja()?e=>fx(e,this.wl):null}vo(e,r,i){return r===void 0?(i===void 0&&(i=this.ea()),i.format(e)):r(e)}mo(e,r,i){return r===void 0?(i===void 0&&(i=this.ea()),i.formatTickmarks(e)):r(e)}nr(e,r){return this.vo(e,this.bl.priceFormatter,r)}uo(e,r){const i=this.bl.priceFormatter;return this.mo(e,this.bl.tickmarksPriceFormatter??(i?s=>s.map(i):void 0),r)}oo(e,r){return this.vo(e,this.bl.percentageFormatter,r)}_o(e,r){const i=this.bl.percentageFormatter;return this.mo(e,this.bl.tickmarksPercentageFormatter??(i?s=>s.map(i):void 0),r)}}function mL(n){return n instanceof Hw}class gL{constructor(e,r){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new Yn,this.yh=[],this.uh=e,this.ts=r,this.Co=new bbe(this);const i=r.N();this.Po=this.yo("left",i.leftPriceScale),this.ko=this.yo("right",i.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(i)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.ko.hr(e.rightPriceScale),e.localization&&(this.Po.wa(),this.ko.wa()),e.overlayPriceScales){const r=Array.from(this.wo.values());for(const i of r){const s=qe(i[0].Ft());s.hr(e.overlayPriceScales),e.localization&&s.wa()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.ko}return this.wo.has(e)?yi(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach(e=>{e.m&&e.m()}),this.yh=this.yh.filter(e=>{const r=e.oh();return r.detached&&r.detached(),!1}),this.xo.p()}Bo(){return this.bo}Io(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(e){this.Mo=e,this.Ao()}Al(e){this.il=e,this.Po.Al(e),this.ko.Al(e),this.cl.forEach(r=>{if(this.Un(r)){const i=r.Ft();i!==null&&i.Al(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.cl.filter(mL)}Ma(){return this.cl}Un(e){const r=e.Ft();return r===null||this.Po!==r&&this.ko!==r}Gl(e,r,i){this.No(e,r,i?e.hs():this.cl.length)}Ql(e,r){const i=this.cl.indexOf(e);vr(i!==-1,"removeDataSource: invalid data source"),this.cl.splice(i,1),r||this.cl.forEach((a,l)=>a.ls(l));const s=qe(e.Ft()).ma();if(this.wo.has(s)){const a=yi(this.wo.get(s)),l=a.indexOf(e);l!==-1&&(a.splice(l,1),a.length===0&&this.wo.delete(s))}const o=e.Ft();o&&o.Ma().indexOf(e)>=0&&(o.Ql(e),this.Fo(o)),this.fl=null}qn(e){return e===this.Po?"left":e===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(e,r){e.no(r)}$o(e,r){e.eo(r),this.Ao()}qo(e){e.ro()}Yo(e,r){e.ho(r)}jo(e,r){e.ao(r),this.Ao()}Ko(e){e.lo()}Ao(){this.cl.forEach(e=>{e.Ns()})}ks(){let e=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?e=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?e=this.Po:this.cl.length!==0&&(e=this.cl[0].Ft()),e===null&&(e=this.ko),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.ko:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Tl()&&this.Xo(e)}Zo(e){const r=this.uh.Pe();e.yl({sn:!0}),r!==null&&e.do(r),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=BJ(this.cl)),this.fl}Qo(e,r){r=_m(r,0,this.cl.length-1);const i=this.cl.indexOf(e);vr(i!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(i,1),this.cl.splice(r,0,e),this.cl.forEach((s,o)=>s.ls(o)),this.fl=null;for(const s of[this.Po,this.ko])s.Jl(),s.wa();this.ts.ar()}Bt(){return this.Dt().filter(mL)}t_(){return this.xo}i_(){return this.Co}_a(e){this.yh.push(new sbe(e))}ua(e){this.yh=this.yh.filter(r=>r.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.yh}sa(e,r){return this.yh.map(i=>i.jn(e,r)).filter(i=>i!==null)}Xo(e){const r=e.co();if(r&&r.length>0&&!this.uh.Ki()){const i=this.uh.Pe();i!==null&&e.do(i)}e.Ns()}No(e,r,i){let s=this.Do(r);if(s===null&&(s=this.yo(r,this.ts.N().overlayPriceScales)),this.cl.splice(i,0,e),!qw(r)){const o=this.wo.get(r)||[];o.push(e),this.wo.set(r,o)}e.ls(i),s.Gl(e),e._s(s),this.Fo(s),this.fl=null}To(e,r,i){r.ie!==i.ie&&this.Xo(e)}yo(e,r){const i={visible:!0,autoScale:!0,...pa(r)},s=new wbe(e,i,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return s.Al(this.$t()),s}}function Zv(n){return{n_:n.n_,e_:{Kn:n.r_.externalId},h_:n.r_.cursorStyle}}function _be(n,e,r,i){for(const s of n){const o=s.Tt(i);if(o!==null&&o.jn){const a=o.jn(e,r);if(a!==null)return{a_:s,e_:a}}}return null}function Sbe(n){return n.Fs!==void 0}function UJ(n,e,r){const i=[n,...n.Dt()],s=function(o,a,l){var f;let c,u;for(const p of o){const g=((f=p.sa)==null?void 0:f.call(p,a,l))??[];for(const b of g)h=b.zOrder,d=c==null?void 0:c.zOrder,(!d||h==="top"&&d!=="top"||h==="normal"&&d==="bottom")&&(c=b,u=p)}var h,d;return c&&u?{r_:c,n_:u}:null}(i,e,r);if((s==null?void 0:s.r_.zOrder)==="top")return Zv(s);for(const o of i){if(s&&s.n_===o&&s.r_.zOrder!=="bottom"&&!s.r_.isBackground)return Zv(s);if(Sbe(o)){const a=_be(o.Fs(n),e,r,n);if(a!==null)return{n_:o,a_:a.a_,e_:a.e_}}if(s&&s.n_===o&&s.r_.zOrder!=="bottom"&&s.r_.isBackground)return Zv(s)}return s!=null&&s.r_?Zv(s):null}class kbe{constructor(e,r,i=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=r,this.Vn=i}__(e){const r=e.time,i=this.o_.cacheKey(r),s=this.Dn.get(i);if(s!==void 0)return s.u_;if(this.yn===this.Vn){const a=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(yi(a)),this.Tn++,this.yn--}const o=this.l_(e);return this.Dn.set(i,{u_:o,An:this.kn}),this.Rn.set(this.kn,i),this.yn++,this.kn++,o}}class Cm{constructor(e,r){vr(e<=r,"right should be >= left"),this.c_=e,this.d_=r}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function vL(n,e){return n===null||e===null?n===e:n.He(e)}class Cbe{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,r){this.g_(r),this.Dn=null;for(let i=r;i<e.length;++i){const s=e[i];let o=this.p_.get(s.timeWeight);o===void 0&&(o=[],this.p_.set(s.timeWeight,o)),o.push({index:i,time:s.time,weight:s.timeWeight,originalTime:s.originalTime})}}M_(e,r,i,s,o){const a=Math.ceil(r/e);return this.Dn!==null&&this.Dn.b_===a&&o===this.Dn.S_&&i===this.Dn.x_||(this.Dn={S_:o,x_:i,Da:this.C_(a,i,s),b_:a}),this.Dn.Da}g_(e){if(e===0)return void this.p_.clear();const r=[];this.p_.forEach((i,s)=>{e<=i[0].index?r.push(s):i.splice(tf(i,e,o=>o.index<e),1/0)});for(const i of r)this.p_.delete(i)}C_(e,r,i){let s=[];const o=a=>!r||i.has(a.index);for(const a of Array.from(this.p_.keys()).sort((l,c)=>c-l)){if(!this.p_.get(a))continue;const l=s;s=[];const c=l.length;let u=0;const h=yi(this.p_.get(a)),d=h.length;let f=1/0,p=-1/0;for(let g=0;g<d;g++){const b=h[g],y=b.index;for(;u<c;){const v=l[u],w=v.index;if(!(w<y&&o(v))){f=w;break}u++,s.push(v),p=w,f=1/0}if(f-y>=e&&y-p>=e&&o(b))s.push(b),p=y;else if(this.v_)return l}for(;u<c;u++)o(l[u])&&s.push(l[u])}return s}}class eh{constructor(e){this.P_=e}y_(){return this.P_===null?null:new Cm(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new eh(null)}}function Ebe(n,e){return n.weight>e.weight?n:e}class Tbe{constructor(e,r,i,s){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new Cbe,this.B_=new Map,this.I_=eh.T_(),this.E_=!0,this.A_=new Yn,this.z_=new Yn,this.L_=new Yn,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=r,this.bl=i,this.U_=r.rightOffset,this.q_=r.barSpacing,this.ts=e,this.Y_(r),this.o_=s,this.j_(),this.V_.m_(r.uniformDistribution),this.K_()}N(){return this.Ps}X_(e){$i(this.bl,e),this.Z_(),this.j_()}hr(e,r){$i(this.Ps,e),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),this.Y_(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(e){var r;return((r=this.D_[e])==null?void 0:r.time)??null}ss(e){return this.D_[e]??null}Q_(e,r){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return r?this.D_.length-1:null;const i=tf(this.D_,this.o_.key(e),(s,o)=>this.o_.key(s.time)<o);return this.o_.key(e)<this.o_.key(this.D_[i].time)?r?i:null:i}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const e=this.Pe();if(e===null)return null;const r={from:e.Uh(),to:e.bi()};return this.eu(r)}eu(e){const r=Math.round(e.from),i=Math.round(e.to),s=qe(this.ru()),o=qe(this.hu());return{from:qe(this.ss(Math.max(s,r))),to:qe(this.ss(Math.min(o,i)))}}au(e){return{from:qe(this.Q_(e.from,!0)),to:qe(this.Q_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const r=this.su(),i=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&i!==0){const s=this.q_*e/i;this.q_=s}if(this.Ps.fixLeftEdge&&r!==null&&r.Uh()<=0){const s=i-e;this.U_-=Math.round(s/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(e){if(this.Ki()||!Pg(e))return 0;const r=this._u()+this.U_-e;return this.Mo-(r+.5)*this.q_-1}uu(e,r){const i=this._u(),s=r===void 0?0:r.from,o=r===void 0?e.length:r.to;for(let a=s;a<o;a++){const l=e[a].wt,c=i+this.U_-l,u=this.Mo-(c+.5)*this.q_-1;e[a]._t=u}}cu(e,r){const i=Math.ceil(this.du(e));return r&&this.Ps.ignoreWhitespaceIndices&&!this.fu(i)?this.pu(i):i}fn(e){this.E_=!0,this.U_=e,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(e){const r=this.q_;if(this.wu(e),this.Ps.rightOffsetPixels!==void 0&&r!==0){const i=this.U_*r/this.q_;this.U_=i}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,r=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(r/e),s=qe(this.Pe()),o=Math.max(s.Uh(),s.Uh()-i),a=Math.max(s.bi(),s.bi()-i),l=this.V_.M_(e,r,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),c=this.ru()+i,u=this.hu()-i,h=this.Mu(),d=this.Ps.fixLeftEdge||h,f=this.Ps.fixRightEdge||h;let p=0;for(const g of l){if(!(o<=g.index&&g.index<=a))continue;let b;p<this.H_.length?(b=this.H_[p],b.coord=this.qt(g.index),b.label=this.bu(g),b.weight=g.weight):(b={needAlignCoordinate:!1,coord:this.qt(g.index),label:this.bu(g),weight:g.weight},this.H_.push(b)),this.q_>r/2&&!h?b.needAlignCoordinate=!1:b.needAlignCoordinate=d&&g.index<=c||f&&g.index>=u,p++}return this.H_.length=p,this.N_=this.H_,this.H_}Su(){let e;this.E_=!0,this.dn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(e)}xu(e){this.E_=!0,this.R_=e,this.ou(),this.G_()}Cu(e,r){const i=this.du(e),s=this.mu(),o=s+r*(s/10);this.dn(o),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(i-this.du(e)))}no(e){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=e,this.Pu()))}eo(e){if(this.O_===null)return;const r=_m(this.Mo-e,0,this.Mo),i=_m(this.Mo-qe(this.vl),0,this.Mo);r!==0&&i!==0&&this.dn(this.O_.mu*r/i)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(e){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Pu()))}ao(e){if(this.ml===null)return;const r=(this.ml-e)/this.mu();this.U_=qe(this.O_).gu+r,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(e,r=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(r)||r<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.U_,s=performance.now();this.ts._n({Ru:o=>(o-s)/r>=1,Du:o=>{const a=(o-s)/r;return a>=1?e:i+(e-i)*a}})}yt(e,r){this.E_=!0,this.D_=e,this.V_.w_(e,r),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(e,r){const i=e.f_(),s=r&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-s)/i),this.U_=e.bi()-this._u(),r&&(this.U_=s?s/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const e=this.ru(),r=this.hu();e!==null&&r!==null&&this.Eu(new Cm(e,r),!0)}zu(e){const r=new Cm(e.from,e.to);this.Eu(r)}ns(e){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const r of e)for(const i of r.va())this.F_.set(i,!0);this.W_++}Mu(){const e=this.ts.N().handleScroll,r=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||r.axisDoubleClickReset.time||r.axisPressedMouseMove.time||r.mouseWheel||r.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(e){return(this.Mo-1-e)/this.q_}du(e){const r=this.Lu(e),i=this._u()+this.U_-r;return Math.round(1e6*i)/1e6}wu(e){const r=this.q_;this.q_=e,this.lu(),r!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(eh.T_());const e=this._u(),r=this.Mo/this.q_,i=this.U_+e,s=new Cm(i-r+1,i);this.Nu(new eh(s))}lu(){const e=_m(this.q_,this.Fu(),this.Wu());this.q_!==e&&(this.q_=e,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const e=this.Hu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const r=this.Uu();this.U_>r&&(this.U_=r,this.E_=!0)}Hu(){const e=this.ru(),r=this.R_;return e===null||r===null?null:e-r-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(e){let r=this.B_.get(e.weight);return r===void 0&&(r=new kbe(i=>this.$u(i),this.o_),this.B_.set(e.weight,r)),r.__(e)}$u(e){return this.o_.formatTickmark(e,this.bl)}Nu(e){const r=this.I_;this.I_=e,vL(r.y_(),this.I_.y_())||this.A_.p(),vL(r.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const e=this.ru();if(e===null)return;const r=this.Pe();if(r===null)return;const i=r.Uh()-e;if(i<0){const s=this.U_-i-1;this.fn(s)}this.lu()}J_(){this.ou(),this.lu()}fu(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}pu(e){const r=function*(s){const o=Math.round(s),a=o<s;let l=1;for(;;)a?(yield o+l,yield o-l):(yield o-l,yield o+l),l++}(e),i=this.hu();for(;i;){const s=r.next().value;if(this.F_.get(s))return s;if(s<0||s>i)break}return e}Y_(e){if(e.rightOffsetPixels!==void 0){const r=e.rightOffsetPixels/(e.barSpacing||this.q_);this.ts.fn(r)}}}var bL,yL,xL,wL,_L;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(bL||(bL={}));class Pbe{constructor(e,r,i){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new Yn,this.Xu=new Yn,this.Zu=null,this.Gu=e,this.Ps=r,this.o_=i,this.Sl=new Pve(this.Ps.layout.colorParsers),this.Ju=new Tve(this),this.uh=new Tbe(this,r.timeScale,this.Ps.localization,i),this.Ct=new $ve(this,r.crosshair),this.Qu=new mbe(r.crosshair),r.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(si.gn())}ar(){this.rc(si.wn())}Zh(){this.rc(new si(1))}Eh(e){const r=this.hc(e);this.rc(r)}ac(){return this.ju}lc(e){var i,s,o,a;if(((i=this.ju)==null?void 0:i.n_)===(e==null?void 0:e.n_)&&((o=(s=this.ju)==null?void 0:s.e_)==null?void 0:o.Kn)===((a=e==null?void 0:e.e_)==null?void 0:a.Kn))return;const r=this.ju;this.ju=e,r!==null&&this.Eh(r.n_),e!==null&&e.n_!==(r==null?void 0:r.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){$i(this.Ps,e),this.qu.forEach(r=>r.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.X_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(e,r,i=0){const s=this.qu[i];if(s===void 0)return;if(e==="left")return $i(this.Ps,{leftPriceScale:r}),s.Ro({leftPriceScale:r}),this.Ku.p(),void this.Ih();if(e==="right")return $i(this.Ps,{rightPriceScale:r}),s.Ro({rightPriceScale:r}),this.Ku.p(),void this.Ih();const o=this._c(e,i);o!==null&&(o.Ft.hr(r),this.Ku.p())}_c(e,r){const i=this.qu[r];if(i===void 0)return null;const s=i.Do(e);return s!==null?{Us:i,Ft:s}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(e,r){e.Al(r),this.vu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.qu.forEach(r=>r.Eo(e)),this.vu()}fc(e){this.qu.length!==1&&(vr(e>=0&&e<this.qu.length,"Invalid pane index"),this.qu.splice(e,1),this.Ih())}vc(e,r){if(this.qu.length<2)return;vr(e>=0&&e<this.qu.length,"Invalid pane index");const i=this.qu[e],s=this.qu.reduce((d,f)=>d+f.Bo(),0),o=this.qu.reduce((d,f)=>d+f.$t(),0),a=o-30*(this.qu.length-1);r=Math.min(a,Math.max(30,r));const l=s/o,c=i.$t();i.Io(r*l);let u=r-c,h=this.qu.length-1;for(const d of this.qu)if(d!==i){const f=Math.min(a,Math.max(30,d.$t()-u/h));u-=d.$t()-f,h-=1;const p=f*l;d.Io(p)}this.Ih()}mc(e,r){vr(e>=0&&e<this.qu.length&&r>=0&&r<this.qu.length,"Invalid pane index");const i=this.qu[e],s=this.qu[r];this.qu[e]=s,this.qu[r]=i,this.Ih()}wc(e,r){if(vr(e>=0&&e<this.qu.length&&r>=0&&r<this.qu.length,"Invalid pane index"),e===r)return;const[i]=this.qu.splice(e,1);this.qu.splice(r,0,i),this.Ih()}Uo(e,r,i){e.Uo(r,i)}$o(e,r,i){e.$o(r,i),this.Ah(),this.rc(this.gc(e,2))}qo(e,r){e.qo(r),this.rc(this.gc(e,2))}Yo(e,r,i){r.Tl()||e.Yo(r,i)}jo(e,r,i){r.Tl()||(e.jo(r,i),this.Ah(),this.rc(this.gc(e,2)))}Ko(e,r){r.Tl()||(e.Ko(r),this.rc(this.gc(e,2)))}Zo(e,r){e.Zo(r),this.rc(this.gc(e,2))}Mc(e){this.uh.no(e)}bc(e,r){const i=this.Et();if(i.Ki()||r===0)return;const s=i.Qi();e=Math.max(1,Math.min(e,s)),i.Cu(e,r),this.vu()}Sc(e){this.xc(0),this.Cc(e),this.Pc()}yc(e){this.uh.eo(e),this.vu()}kc(){this.uh.ro(),this.ar()}xc(e){this.uh.ho(e)}Cc(e){this.uh.ao(e),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(e,r,i,s,o){this.Ct.Vs(e,r);let a=NaN,l=this.uh.cu(e,!0);const c=this.uh.Pe();c!==null&&(l=Math.min(Math.max(c.Uh(),l),c.bi()));const u=s.ks(),h=u.zt();if(h!==null&&(a=u.Ts(r,h)),a=this.Qu.ga(a,l,s),this.Ct.As(l,a,s),this.Zh(),!o){const d=UJ(s,e,r);this.lc(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Xu.p(this.Ct.It(),{x:e,y:r},i)}}Rc(e,r,i){const s=i.ks(),o=s.zt(),a=s.Nt(e,qe(o)),l=this.uh.Q_(r,!0),c=this.uh.qt(qe(l));this.Tc(c,a,null,i,!0)}Dc(e){this.uc().Ls(),this.Zh(),e||this.Xu.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const r=this.Ct.Is(),i=this.Ct.Es();this.Tc(r,i,null,e)}this.Ct.Ns()}Vc(e,r,i){const s=this.uh.Rs(0);r!==void 0&&i!==void 0&&this.uh.yt(r,i);const o=this.uh.Rs(0),a=this.uh._u(),l=this.uh.Pe();if(l!==null&&s!==null&&o!==null){const c=l.Te(a),u=this.o_.key(s)>this.o_.key(o),h=e!==null&&e>a&&!u,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(i!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(h&&!f){const p=e-a;this.uh.fn(this.uh.gu()-p)}}this.uh.xu(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(i){return i instanceof gL}(e))return e;const r=this.qu.find(i=>i.Dt().includes(e));return r===void 0?null:r}vu(){this.qu.forEach(e=>e.Jo()),this.Ah()}m(){this.qu.forEach(e=>e.m()),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(e,r){const i=this.tc(r);this.Ec(e,i),this.Yu.push(e),this.Yu.length===1?this.Ih():this.ar()}Ac(e){const r=this.Hn(e),i=this.Yu.indexOf(e);vr(i!==-1,"Series not found");const s=qe(r);this.Yu.splice(i,1),s.Ql(e),e.m&&e.m(),this.uh.K_(),this.zc(s)}Bh(e,r){const i=qe(this.Hn(e));i.Ql(e,!0),i.Gl(e,r,!0)}Au(){const e=si.wn();e.rn(),this.rc(e)}Lc(e){const r=si.wn();r.ln(e),this.rc(r)}cn(){const e=si.wn();e.cn(),this.rc(e)}dn(e){const r=si.wn();r.dn(e),this.rc(r)}fn(e){const r=si.wn();r.fn(e),this.rc(r)}_n(e){const r=si.wn();r._n(e),this.rc(r)}hn(){const e=si.wn();e.hn(),this.rc(e)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(e,r){if(vr(r>=0,"Index should be greater or equal to 0"),r===this.Fc(e))return;const i=qe(this.Hn(e));i.Ql(e);const s=this.tc(r);this.Ec(e,s),i.Ma().length===0&&this.zc(i),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(e){const r=this.ec,i=this.sc;if(r===i)return r;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Zu===null||this.Zu.mr!==i||this.Zu.wr!==r)this.Zu={mr:i,wr:r,Hc:new Map};else{const o=this.Zu.Hc.get(e);if(o!==void 0)return o}const s=this.Sl.tt(i,r,e/100);return this.Zu.Hc.set(e,s),s}Uc(e){return this.qu.indexOf(e)}Xi(){return this.Sl}$c(){return this.qc()}qc(e){const r=new gL(this.uh,this);this.qu.push(r);const i=e??this.qu.length-1,s=si.gn();return s.Qs(i,{tn:0,sn:!0}),this.rc(s),r}tc(e){return vr(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.qu.length,e))<this.qu.length?this.qu[e]:this.qc(e)}Fc(e){return this.qu.findIndex(r=>r.Oo().includes(e))}gc(e,r){const i=new si(r);if(e!==null){const s=this.qu.indexOf(e);i.Qs(s,{tn:r})}return i}hc(e,r){return r===void 0&&(r=2),this.gc(this.Hn(e),r)}rc(e){this.Gu&&this.Gu(e),this.qu.forEach(r=>r.i_().lr().yt())}Ec(e,r){const i=e.N().priceScaleId,s=i!==void 0?i:this.Oc();r.Gl(e,s),qw(s)||e.hr(e.N())}nc(e){const r=this.Ps.layout;return r.background.type==="gradient"?e===0?r.background.topColor:r.background.bottomColor:r.background.color}zc(e){!e.Lo()&&e.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(e),1)}}function qJ(n){if(n>=1)return 0;let e=0;for(;e<8;e++){const r=Math.round(n);if(Math.abs(r-n)<1e-8)return e;n*=10}return e}function sO(n){return!ef(n)&&!b0(n)}function WJ(n){return ef(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(yL||(yL={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}(xL||(xL={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(wL||(wL={})),function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(_L||(_L={}));const SL=n=>n.getUTCFullYear();function Mbe(n,e,r){return e.replace(/yyyy/g,(i=>ma(SL(i),4))(n)).replace(/yy/g,(i=>ma(SL(i)%100,2))(n)).replace(/MMMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"long"}))(n,r)).replace(/MMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"short"}))(n,r)).replace(/MM/g,(i=>ma((s=>s.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>ma((s=>s.getUTCDate())(i),2))(n))}class HJ{constructor(e="yyyy-MM-dd",r="default"){this.Yc=e,this.jc=r}__(e){return Mbe(e,this.Yc,this.jc)}}class Dbe{constructor(e){this.Kc=e||"%h:%m:%s"}__(e){return this.Kc.replace("%h",ma(e.getUTCHours(),2)).replace("%m",ma(e.getUTCMinutes(),2)).replace("%s",ma(e.getUTCSeconds(),2))}}const Obe={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class Ibe{constructor(e={}){const r={...Obe,...e};this.Qc=new HJ(r.Xc,r.Jc),this.td=new Dbe(r.Zc),this.sd=r.Gc}__(e){return`${this.Qc.__(e)}${this.sd}${this.td.__(e)}`}}function eb(n){return 60*n*60*1e3}function _S(n){return 60*n*1e3}const tb=[{nd:(kL=1,1e3*kL),ed:10},{nd:_S(1),ed:20},{nd:_S(5),ed:21},{nd:_S(30),ed:22},{nd:eb(1),ed:30},{nd:eb(3),ed:31},{nd:eb(6),ed:32},{nd:eb(12),ed:33}];var kL;function CL(n,e){if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(let r=tb.length-1;r>=0;--r)if(Math.floor(e.getTime()/tb[r].nd)!==Math.floor(n.getTime()/tb[r].nd))return tb[r].ed;return 0}function SS(n){let e=n;if(b0(n)&&(e=bA(n)),!sO(e))throw new Error("time must be of type BusinessDay");const r=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{rd:Math.round(r.getTime()/1e3),hd:e}}function EL(n){if(!WJ(n))throw new Error("time must be of type isUTCTimestamp");return{rd:n}}function bA(n){const e=new Date(n);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function TL(n){b0(n.time)&&(n.time=bA(n.time))}let PL=class{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(r){r.forEach(TL)}(e):TL(e)}createConverterToInternalObj(e){return qe(function(r){return r.length===0?null:sO(r[0].time)||b0(r[0].time)?SS:EL}(e))}key(e){return typeof e=="object"&&"rd"in e?e.rd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const r=e;return r.hd===void 0?new Date(1e3*r.rd).getTime():new Date(Date.UTC(r.hd.year,r.hd.month-1,r.hd.day)).getTime()}convertHorzItemToInternal(e){return WJ(r=e)?EL(r):sO(r)?SS(r):SS(bA(r));var r}updateFormatter(e){if(!this.Ps)return;const r=e.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new Ibe({Xc:r,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:e.locale}):this.ad=new HJ(r,e.locale)}formatHorzItem(e){const r=e;return this.ad.__(new Date(1e3*r.rd))}formatTickmark(e,r){const i=function(o,a,l){switch(o){case 0:case 10:return a?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),s=this.Ps.timeScale;if(s.tickMarkFormatter!==void 0){const o=s.tickMarkFormatter(e.originalTime,i,r.locale);if(o!==null)return o}return function(o,a,l){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=o.hd===void 0?new Date(1e3*o.rd):new Date(Date.UTC(o.hd.year,o.hd.month-1,o.hd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(l,c)}(e.time,i,r.locale)}maxTickMarkWeight(e){let r=e.reduce(Ebe,e[0]).weight;return r>30&&r<50&&(r=30),r}fillWeightsForPoints(e,r){(function(i,s=0){if(i.length===0)return;let o=s===0?null:i[s-1].time.rd,a=o!==null?new Date(1e3*o):null,l=0;for(let c=s;c<i.length;++c){const u=i[c],h=new Date(1e3*u.time.rd);a!==null&&(u.timeWeight=CL(h,a)),l+=u.time.rd-(o||u.time.rd),o=u.time.rd,a=h}if(s===0&&i.length>1){const c=Math.ceil(l/(i.length-1)),u=new Date(1e3*(i[0].time.rd-c));i[0].timeWeight=CL(new Date(1e3*i[0].time.rd),u)}})(e,r)}static ld(e){return $i({localization:{dateFormat:"dd MMM 'yy"}},e??{})}};const nf=typeof window<"u";function ML(){return!!nf&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function kS(){return!!nf&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function oO(n){return n+n%2}function Rbe(n){nf&&window.chrome!==void 0&&n.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Vw{constructor(e,r,i){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!kS(),this.Ld=s=>{this.Od(s)},this.Nd=s=>{if(this.Fd(s)){const o=this.Wd(s);if(++this.dd,this.fd&&this.dd>1){const{Hd:a}=this.Ud(so(s),this.pd);a<30&&!this.Sd&&this.$d(o,this.Yd.qd),this.jd()}}else{const o=this.Wd(s);if(++this.od,this._d&&this.od>1){const{Hd:a}=this.Ud(so(s),this.ud);a<5&&!this.bd&&this.Kd(o,this.Yd.Xd),this.Zd()}}},this.Gd=e,this.Yd=r,this.Ps=i,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(e){this.yd&&this.yd();const r=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",r)},this.Gd.addEventListener("mousemove",r),this.Fd(e))return;const i=this.Wd(e);this.Kd(i,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(e){if(this.Id||this.gd!==null||this.Fd(e))return;const r=this.Wd(e);this.Kd(r,this.Yd.nf),this.zd=!0}ef(e){const r=CS(e.changedTouches,qe(this.Ad));if(r===null||(this.Ed=nb(e),this.Rd!==null)||this.Bd)return;this.Vd=!0;const i=this.Ud(so(r),qe(this.gd)),{rf:s,hf:o,Hd:a}=i;if(this.Md||!(a<5)){if(!this.Md){const l=.5*s,c=o>=l&&!this.Ps.af(),u=l>o&&!this.Ps.lf();c||u||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const l=this.Wd(e,r);this.$d(l,this.Yd._f),ud(e)}}}uf(e){if(e.button!==0)return;const r=this.Ud(so(e),qe(this.wd)),{Hd:i}=r;if(i>=5&&(this.bd=!0,this.Zd()),this.bd){const s=this.Wd(e);this.Kd(s,this.Yd.cf)}}Ud(e,r){const i=Math.abs(r._t-e._t),s=Math.abs(r.ut-e.ut);return{rf:i,hf:s,Hd:i+s}}df(e){let r=CS(e.changedTouches,qe(this.Ad));if(r===null&&e.touches.length===0&&(r=e.changedTouches[0]),r===null)return;this.Ad=null,this.Ed=nb(e),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const i=this.Wd(e,r);if(this.$d(i,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:s}=this.Ud(so(r),this.pd);s<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}else this.Sd||(this.$d(i,this.Yd.pf),this.Yd.pf&&ud(e));this.dd===0&&ud(e),e.touches.length===0&&this.md&&(this.md=!1,ud(e))}Od(e){if(e.button!==0)return;const r=this.Wd(e);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),ML()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(e))if(this.Kd(r,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:i}=this.Ud(so(e),this.ud);i<5&&!this.bd&&this.Kd(r,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(r,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(e){if(this.Ad!==null)return;const r=e.changedTouches[0];this.Ad=r.identifier,this.Ed=nb(e);const i=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=so(r),this.Td&&(this.Td(),this.Td=null);{const o=this.ef.bind(this),a=this.df.bind(this);this.Td=()=>{i.removeEventListener("touchmove",o),i.removeEventListener("touchend",a)},i.addEventListener("touchmove",o,{passive:!1}),i.addEventListener("touchend",a,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,e),240)}const s=this.Wd(e,r);this.$d(s,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=so(r))}bf(e){if(e.button!==0)return;const r=this.Gd.ownerDocument.documentElement;ML()&&r.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=so(e),this.kd&&(this.kd(),this.kd=null);{const s=this.uf.bind(this),o=this.Od.bind(this);this.kd=()=>{r.removeEventListener("mousemove",s),r.removeEventListener("mouseup",o)},r.addEventListener("mousemove",s),r.addEventListener("mouseup",o)}if(this.Id=!0,this.Fd(e))return;const i=this.Wd(e);this.Kd(i,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=so(e))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const e=this.Gd.ownerDocument,r=i=>{this.Yd.xf&&(i.composed&&this.Gd.contains(i.composedPath()[0])||i.target&&this.Gd.contains(i.target)||this.Yd.xf())};this.Cd=()=>{e.removeEventListener("touchstart",r)},this.xd=()=>{e.removeEventListener("mousedown",r)},e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0})}kS()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),Rbe(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",()=>{},{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",e=>this.Rf(e.touches),{passive:!0}),this.Gd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const r=DL(e.touches[0],e.touches[1])/this.Dd;this.Yd.kf(this.Rd,r),ud(e)}},{passive:!1}),this.Gd.addEventListener("touchend",e=>{this.Rf(e.touches)}))}Rf(e){e.length===1&&(this.Vd=!1),e.length!==2||this.Vd||this.md?this.Df():this.Vf(e)}Vf(e){const r=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(e[0].clientX-r.left+(e[1].clientX-r.left))/2,ut:(e[0].clientY-r.top+(e[1].clientY-r.top))/2},this.Dd=DL(e[0],e[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(e){if(this.yd&&this.yd(),this.Fd(e)||!this.zd)return;const r=this.Wd(e);this.Kd(r,this.Yd.Bf),this.zd=!kS()}gf(e){const r=CS(e.touches,qe(this.Ad));if(r===null)return;const i=this.Wd(e,r);this.$d(i,this.Yd.If),this.Sd=!0,this.md=!0}Fd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:nb(e)<this.Ed+500}$d(e,r){r&&r.call(this.Yd,e)}Kd(e,r){r&&r.call(this.Yd,e)}Wd(e,r){const i=r||e,s=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Ef:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Af:e.type,zf:i.target,a_:e.view,Lf:()=>{e.type!=="touchstart"&&ud(e)}}}}function DL(n,e){const r=n.clientX-e.clientX,i=n.clientY-e.clientY;return Math.sqrt(r*r+i*i)}function ud(n){n.cancelable&&n.preventDefault()}function so(n){return{_t:n.pageX,ut:n.pageY}}function nb(n){return n.timeStamp||performance.now()}function CS(n,e){for(let r=0;r<n.length;++r)if(n[r].identifier===e)return n[r];return null}class Abe{constructor(e,r,i){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=e,this.Uf=e.$f()[r],this.qf=e.$f()[i],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return an({width:this.Uf.Gf().width,height:1})}Jf(){return an({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(e,r,i){const s=this.Jf();e.fillStyle=this.Hf.N().layout.panes.separatorColor,e.fillRect(r,i,s.width,s.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const e=document.createElement("div"),r=e.style;r.position="fixed",r.display="none",r.zIndex="49",r.top="0",r.left="0",r.width="100%",r.height="100%",r.cursor="row-resize",this.jf.appendChild(e);const i=document.createElement("div"),s=i.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.jf.appendChild(i);const o={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new Vw(i,o,{af:()=>!1,lf:()=>!0}),this.Of={ip:i,tp:e}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(e){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(e){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(e){if(this.Of===null)return;const r=this.Uf.ap().Bo()+this.qf.ap().Bo(),i=r/(this.Uf.Gf().height+this.qf.Gf().height),s=30*i;r<=2*s||(this.Wf={lp:e.pageY,op:this.Uf.ap().Bo(),_p:r-s,up:r,cp:i,dp:s},this.Of.tp.style.display="block")}rp(e){const r=this.Wf;if(r===null)return;const i=(e.pageY-r.lp)*r.cp,s=_m(r.op+i,r.dp,r._p);this.Uf.ap().Io(s),this.qf.ap().Io(r.up-s),this.Hf.Qt().Ih()}hp(e){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function ES(n,e){return n.fp-e.fp}function TS(n,e,r){const i=(n.fp-e.fp)/(n.wt-e.wt);return Math.sign(i)*Math.min(Math.abs(i),r)}class Nbe{constructor(e,r,i,s){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=e,this.xp=r,this.Cp=i,this.Mn=s}Pp(e,r){if(this.pp!==null){if(this.pp.wt===r)return void(this.pp.fp=e);if(Math.abs(this.pp.fp-e)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:r,fp:e}}le(e,r){if(this.pp===null||this.vp===null||r-this.pp.wt>50)return;let i=0;const s=TS(this.pp,this.vp,this.xp),o=ES(this.pp,this.vp),a=[s],l=[o];if(i+=o,this.mp!==null){const u=TS(this.vp,this.mp,this.xp);if(Math.sign(u)===Math.sign(s)){const h=ES(this.vp,this.mp);if(a.push(u),l.push(h),i+=h,this.wp!==null){const d=TS(this.mp,this.wp,this.xp);if(Math.sign(d)===Math.sign(s)){const f=ES(this.mp,this.wp);a.push(d),l.push(f),i+=f}}}}let c=0;for(let u=0;u<a.length;++u)c+=l[u]/i*a[u];Math.abs(c)<this.Sp||(this.gp={fp:e,wt:r},this.bp=c,this.Mp=function(u,h){const d=Math.log(h);return Math.log(1*d/-u)/d}(Math.abs(c),this.Cp))}Du(e){const r=qe(this.gp),i=e-r.wt;return r.fp+this.bp*(Math.pow(this.Cp,i)-1)/Math.log(this.Cp)}Ru(e){return this.gp===null||this.yp(e)===this.Mp}yp(e){const r=e-qe(this.gp).wt;return Math.min(r,this.Mp)}}class jbe{constructor(e,r){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=e,this.Vp=r,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function _u(n,e){const r=qe(n.ownerDocument).createElement("canvas");n.appendChild(r);const i=wve(r,{options:{allowResizeObserver:!0},transform:(s,o)=>({width:Math.max(s.width,o.width),height:Math.max(s.height,o.height)})});return i.resizeCanvasElement(e),i}function Su(n){var e;n.width=1,n.height=1,(e=n.getContext("2d"))==null||e.clearRect(0,0,1,1)}function aO(n,e,r,i){n.ih&&n.ih(e,r,i)}function ay(n,e,r,i){n.nt(e,r,i)}function lO(n,e,r,i){const s=n(r,i);for(const o of s){const a=o.Tt(i);a!==null&&e(a)}}function PS(n,e){return r=>{var i,s;return function(o){return o.Ft!==void 0}(r)?(((i=r.Ft())==null?void 0:i.ma())??"")!==e?[]:((s=r.ta)==null?void 0:s.call(r,n))??[]:[]}}function OL(n,e,r,i){if(!n.length)return;let s=0;const o=n[0].$t(i,!0);let a=e===1?r/2-(n[0].Fi()-o/2):n[0].Fi()-o/2-r/2;a=Math.max(0,a);for(let l=1;l<n.length;l++){const c=n[l],u=n[l-1],h=u.$t(i,!1),d=c.Fi(),f=u.Fi();if(e===1?d>f-h:d<f+h){const p=f-h*e;c.Wi(p);const g=p-e*h/2;if((e===1?g<0:g>r)&&a>0){const b=e===1?-1-g:g-r,y=Math.min(b,a);for(let v=s;v<n.length;v++)n[v].Wi(n[v].Fi()+e*y);a-=y}}else s=l,a=e===1?f-h-d:d-(f+h)}}class IL{constructor(e,r,i,s){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new ux(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=e,this.Ps=r,this.Ml=r.layout,this.Ju=i,this.jp=s==="left",this.Kp=PS("normal",s),this.Xp=PS("top",s),this.Zp=PS("bottom",s),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=_u(this.jf,an({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const o=this.Gp.canvasElement;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.Jp=_u(this.jf,an({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const a=this.Jp.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const l={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new Vw(this.Jp.canvasElement,l,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Su(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Su(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const e=this.Ju.N();return this.Wp!==e.k&&(this.Fp.Bn(),this.Wp=e.k),e}nv(){if(this.Yi===null)return 0;let e=0;const r=this.sv(),i=qe(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));i.save();const s=this.Yi.Da();i.font=this.ev(),s.length>0&&(e=Math.max(this.Fp.Vi(i,s[0].Za),this.Fp.Vi(i,s[s.length-1].Za)));const o=this.rv();for(let u=o.length;u--;){const h=this.Fp.Vi(i,o[u].ri());h>e&&(e=h)}const a=this.Yi.zt();if(a!==null&&this.Op!==null&&(l=this.Ps.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const u=this.Yi.Ts(1,a),h=this.Yi.Ts(this.Op.height-2,a);e=Math.max(e,this.Fp.Vi(i,this.Yi.Zi(Math.floor(Math.min(u,h))+.11111111111111,a)),this.Fp.Vi(i,this.Yi.Zi(Math.ceil(Math.max(u,h))-.11111111111111,a)))}var l;i.restore();const c=e||34;return oO(Math.ceil(r.S+r.C+r.B+r.I+5+c))}hv(e){this.Op!==null&&iu(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`)}av(){return qe(this.Op).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=e,e.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const e=this.Pt.ap();this.Pt.qp().Qt().Zo(e,qe(this.Ft()))}lv(e){if(this.Op===null)return;const r={colorSpace:this.Pt.qp().N().layout.colorSpace};if(e!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const s=wu(this.Gp,r);s!==null&&(s.useBitmapCoordinateSpace(o=>{this._v(o),this.uv(o)}),this.Pt.cv(s,this.Zp),this.dv(s),this.Pt.cv(s,this.Kp),this.fv(s))}this.Jp.applySuggestedBitmapSize();const i=wu(this.Jp,r);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:o})=>{s.clearRect(0,0,o.width,o.height)}),this.pv(i),this.Pt.cv(i,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(e,r,i,s){const o=this.Jf();if(o.width>0&&o.height>0&&(e.drawImage(this.Gp.canvasElement,r,i),s)){const a=this.Jp.canvasElement;e.drawImage(a,r,i)}}yt(){var e;(e=this.Yi)==null||e.Da()}ep(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.qp().Qt(),i=this.Pt.ap();this.Np=!0,r.Uo(i,this.Yi,e.localY)}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.qp().Qt(),i=this.Pt.ap(),s=this.Yi;r.$o(i,s,e.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),r=this.Pt.ap(),i=this.Yi;this.Np&&(this.Np=!1,e.qo(r,i))}hp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.qp().Qt(),i=this.Pt.ap();this.Np=!1,r.qo(i,this.Yi)}tv(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(e){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(e){this.vv(0)}rv(){const e=[],r=this.Yi===null?void 0:this.Yi;return(i=>{for(let s=0;s<i.length;++s){const o=i[s].Ws(this.Pt.ap(),r);for(let a=0;a<o.length;a++)e.push(o[a])}})(this.Pt.ap().Dt()),e}_v({context:e,bitmapSize:r}){const{width:i,height:s}=r,o=this.Pt.ap().Qt(),a=o.$(),l=o.Wc();a===l?Bw(e,0,0,i,s,a):OJ(e,0,0,i,s,a,l)}uv({context:e,bitmapSize:r,horizontalPixelRatio:i}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const s=Math.max(1,Math.floor(this.sv().S*i));let o;o=this.jp?r.width-s:0,e.fillRect(o,0,s,r.height)}dv(e){if(this.Op===null||this.Yi===null)return;const r=this.Yi.Da(),i=this.Yi.N(),s=this.sv(),o=this.jp?this.Op.width-s.C:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.fillStyle=i.borderColor;const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c),d=Math.round(s.C*l);a.beginPath();for(const f of r)a.rect(Math.floor(o*l),Math.round(f.Pa*c)-h,d,u);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{a.font=this.ev(),a.fillStyle=i.textColor??this.Ml.textColor,a.textAlign=this.jp?"right":"left",a.textBaseline="middle";const l=this.jp?Math.round(o-s.B):Math.round(o+s.C+s.B),c=r.map(u=>this.Fp.Di(a,u.Za));for(let u=r.length;u--;){const h=r[u];a.fillText(h.Za,l,h.Pa+c[u])}})}ov(){if(this.Op===null||this.Yi===null)return;let e=this.Op.height/2;const r=[],i=this.Yi.Dt().slice(),s=this.Pt.ap(),o=this.sv();this.Yi===s.$n()&&this.Pt.ap().Dt().forEach(c=>{s.Un(c)&&i.push(c)});const a=this.Yi.Ma()[0],l=this.Yi;i.forEach(c=>{const u=c.Ws(s,l);u.forEach(h=>{h.Wi(null),h.Hi()&&r.push(h)}),a===c&&u.length>0&&(e=u[0].Ii())}),r.forEach(c=>c.Wi(c.Ii())),this.Yi.N().alignLabels&&this.mv(r,o,e)}mv(e,r,i){if(this.Op===null)return;const s=e.filter(a=>a.Ii()<=i),o=e.filter(a=>a.Ii()>i);s.sort((a,l)=>l.Ii()-a.Ii()),s.length&&o.length&&o.push(s[0]),o.sort((a,l)=>a.Ii()-l.Ii());for(const a of e){const l=Math.floor(a.$t(r)/2),c=a.Ii();c>-l&&c<l&&a.Wi(l),c>this.Op.height-l&&c<this.Op.height+l&&a.Wi(this.Op.height-l)}OL(s,1,this.Op.height,r),OL(o,-1,this.Op.height,r)}fv(e){if(this.Op===null)return;const r=this.rv(),i=this.sv(),s=this.jp?"right":"left";r.forEach(o=>{o.Ui()&&o.Tt(qe(this.Yi)).nt(e,i,this.Fp,s)})}pv(e){if(this.Op===null||this.Yi===null)return;const r=this.Pt.qp().Qt(),i=[],s=this.Pt.ap(),o=r.uc().Ws(s,this.Yi);o.length&&i.push(o);const a=this.sv(),l=this.jp?"right":"left";i.forEach(c=>{c.forEach(u=>{u.Tt(qe(this.Yi)).nt(e,a,this.Fp,l)})})}vv(e){this.jf.style.cursor=e===1?"ns-resize":"default"}_l(){const e=this.nv();this.Hp<e&&this.Pt.qp().Qt().Ih(),this.Hp=e}ev(){return cx(this.Ml.fontSize,this.Ml.fontFamily)}}function Lbe(n,e){var r;return((r=n.Jh)==null?void 0:r.call(n,e))??[]}function RL(n,e){var r;return((r=n.Fs)==null?void 0:r.call(n,e))??[]}function AL(n,e){var r;return((r=n.us)==null?void 0:r.call(n,e))??[]}function Fbe(n,e){var r;return((r=n.Xh)==null?void 0:r.call(n,e))??[]}class yA{constructor(e,r){this.Op=an({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new Yn,this.Cv=new Yn,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=e,this.Vv=r,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(i),this.Gp=_u(i,an({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jp=_u(i,an({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new Vw(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Su(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Su(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return qe(this.Vv)}Lv(e){var r;this.Vv!==null&&this.Vv.t_().u(this),this.Vv=e,this.Vv!==null&&this.Vv.t_().i(yA.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new jbe(this.Iv,this.Vp),this.Mv.yt()):((r=this.Mv)==null||r.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const e=this.Vv.Wo();this.wv._s(qe(e))}if(this.gv!==null){const e=this.Vv.Ho();this.gv._s(qe(e))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(e){this.Vv&&this.Vv.Io(e)}sf(e){if(!this.Vv)return;this.Fv();const r=e.localX,i=e.localY;this.Wv(r,i,e)}Sf(e){this.Fv(),this.Hv(),this.Wv(e.localX,e.localY,e)}nf(e){if(!this.Vv)return;this.Fv();const r=e.localX,i=e.localY;this.Wv(r,i,e)}mf(e){this.Vv!==null&&(this.Fv(),this.Uv(e))}Xd(e){this.Vv!==null&&this.$v(this.Cv,e)}qd(e){this.Xd(e)}cf(e){this.Fv(),this.qv(e),this.Wv(e.localX,e.localY,e)}vf(e){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(e))}pf(e){this.Vv!==null&&this.Uv(e)}If(e){if(this.yv=!0,this.kv===null){const r={x:e.localX,y:e.localY};this.jv(r,r,e)}}Bf(e){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(e,r){if(!this.Vp.N().handleScale.pinch)return;const i=5*(r-this.Pv);this.Pv=r,this.ts().bc(e._t,i)}Mf(e){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const r=this.ts().uc();this.kv!==null&&r.Vt()&&(this.Rv={x:r.si(),y:r.ni()},this.kv={x:e.localX,y:e.localY})}_f(e){if(this.Vv===null)return;const r=e.localX,i=e.localY;if(this.kv===null)this.qv(e);else{this.Tv=!1;const s=qe(this.Rv),o=s.x+(r-this.kv.x),a=s.y+(i-this.kv.y);this.Wv(o,a,e)}}ff(e){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(e)}jn(e,r){const i=this.Vv;return i===null?null:UJ(i,e,r)}Jv(e,r){qe(r==="left"?this.wv:this.gv).hv(an({width:e,height:this.Op.height}))}Gf(){return this.Op}hv(e){iu(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Qv(){const e=qe(this.Vv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const r of e.Ma())if(e.Un(r)){const i=r.Ft();i!==null&&e.Fo(i),r.Ns()}for(const r of e.s_())r.Ns()}Jf(){return this.Gp.bitmapSize}Qf(e,r,i,s){const o=this.Jf();if(o.width>0&&o.height>0&&(e.drawImage(this.Gp.canvasElement,r,i),s)){const a=this.Jp.canvasElement;e!==null&&e.drawImage(a,r,i)}}lv(e){if(e===0||this.Vv===null)return;e>1&&this.Qv(),this.wv!==null&&this.wv.lv(e),this.gv!==null&&this.gv.lv(e);const r={colorSpace:this.Vp.N().layout.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const s=wu(this.Gp,r);s!==null&&(s.useBitmapCoordinateSpace(o=>{this._v(o)}),this.Vv&&(this.tm(s,Lbe),this.im(s),this.tm(s,RL),this.tm(s,AL)))}this.Jp.applySuggestedBitmapSize();const i=wu(this.Jp,r);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:o})=>{s.clearRect(0,0,o.width,o.height)}),this.sm(i),this.tm(i,Fbe),this.tm(i,AL))}nm(){return this.wv}rm(){return this.gv}cv(e,r){this.tm(e,r)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(e){this.$v(this.xv,e)}$v(e,r){const i=r.localX,s=r.localY;e.v()&&e.p(this.ts().Et().cu(i),{x:i,y:s},r)}_v({context:e,bitmapSize:r}){const{width:i,height:s}=r,o=this.ts(),a=o.$(),l=o.Wc();a===l?Bw(e,0,0,i,s,l):OJ(e,0,0,i,s,a,l)}im(e){const r=qe(this.Vv),i=r.i_().lr().Tt(r);i!==null&&i.nt(e,!1)}sm(e){this.hm(e,RL,ay,this.ts().uc())}tm(e,r){const i=qe(this.Vv),s=i.Dt(),o=i.s_();for(const a of o)this.hm(e,r,aO,a);for(const a of s)this.hm(e,r,aO,a);for(const a of o)this.hm(e,r,ay,a);for(const a of s)this.hm(e,r,ay,a)}hm(e,r,i,s){const o=qe(this.Vv),a=o.Qt().ac(),l=a!==null&&a.n_===s,c=a!==null&&l&&a.e_!==void 0?a.e_.Xn:void 0;lO(r,u=>i(u,e,l,c),s,o)}Ov(){if(this.Vv===null)return;const e=this.Vp,r=this.Vv.Wo().N().visible,i=this.Vv.Ho().N().visible;r||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),i||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const s=e.Qt().Bc();r&&this.wv===null&&(this.wv=new IL(this,e.N(),s,"left"),this.Ev.appendChild(this.wv.Zf())),i&&this.gv===null&&(this.gv=new IL(this,e.N(),s,"right"),this.Av.appendChild(this.gv.Zf()))}am(e){return e.Ef&&this.yv||this.kv!==null}lm(e){return Math.max(0,Math.min(e,this.Op.width-1))}om(e){return Math.max(0,Math.min(e,this.Op.height-1))}Wv(e,r,i){this.ts().Tc(this.lm(e),this.om(r),i,qe(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(e,r,i){this.kv=e,this.Tv=!1,this.Wv(r.x,r.y,i);const s=this.ts().uc();this.Rv={x:s.si(),y:s.ni()}}ts(){return this.Vp.Qt()}Yv(e){if(!this.Sv)return;const r=this.ts(),i=this.ap();if(r.Ko(i,i.ks()),this.bv=null,this.Sv=!1,r.Pc(),this.Dv!==null){const s=performance.now(),o=r.Et();this.Dv.le(o.gu(),s),this.Dv.Ru(s)||r._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)qe(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(e){if(this.Vv===null)return;const r=this.ts(),i=r.Et();if(i.Ki())return;const s=this.Vp.N(),o=s.handleScroll,a=s.kineticScroll;if((!o.pressedMouseMove||e.Ef)&&(!o.horzTouchDrag&&!o.vertTouchDrag||!e.Ef))return;const l=this.Vv.ks(),c=performance.now();if(this.bv!==null||this.am(e)||(this.bv={x:e.clientX,y:e.clientY,rd:c,_m:e.localX,um:e.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==e.clientX||this.bv.y!==e.clientY)){if(e.Ef&&a.touch||!e.Ef&&a.mouse){const u=i.mu();this.Dv=new Nbe(.2/u,7/u,.997,15/u),this.Dv.Pp(i.gu(),this.bv.rd)}else this.Dv=null;l.Ki()||r.Yo(this.Vv,l,e.localY),r.xc(e.localX),this.Sv=!0}this.Sv&&(l.Ki()||r.jo(this.Vv,l,e.localY),r.Cc(e.localX),this.Dv!==null&&this.Dv.Pp(i.gu(),c))}}class NL{constructor(e,r,i,s,o){this.xt=!0,this.Op=an({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=e==="left",this.Ju=i.Bc,this.Ps=r,this.dm=s,this.fm=o,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=_u(this.jf,an({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Su(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(e){iu(this.Op,e)||(this.Op=e,this.Gp.resizeCanvasElement(e),this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.xt=!0)}lv(e){if(e<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const r=wu(this.Gp,{colorSpace:this.Ps.layout.colorSpace});r!==null&&r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i)})}Jf(){return this.Gp.bitmapSize}Qf(e,r,i){const s=this.Jf();s.width>0&&s.height>0&&e.drawImage(this.Gp.canvasElement,r,i)}uv({context:e,bitmapSize:r,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.dm())return;e.fillStyle=this.Ps.timeScale.borderColor;const o=Math.floor(this.Ju.N().S*i),a=Math.floor(this.Ju.N().S*s),l=this.jp?r.width-o:0;e.fillRect(l,0,o,a)}_v({context:e,bitmapSize:r}){Bw(e,0,0,r.width,r.height,this.fm())}}function xA(n){return e=>{var r;return((r=e.ia)==null?void 0:r.call(e,n))??[]}}const $be=xA("normal"),zbe=xA("top"),Bbe=xA("bottom");class Ube{constructor(e,r){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=an({width:0,height:0}),this.gm=new Yn,this.Fp=new ux(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=e,this.o_=r,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=_u(this.Sm,an({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=_u(this.Sm,an({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const s=this.Jp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new Vw(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Su(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Su(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(e){if(this.wm)return;this.wm=!0;const r=this.Vp.Qt();!r.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&r.Mc(e.localX)}Mf(e){this.Sf(e)}xf(){const e=this.Vp.Qt();!e.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&e.kc())}cf(e){const r=this.Vp.Qt();!r.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&r.yc(e.localX)}_f(e){this.cf(e)}vf(){this.wm=!1;const e=this.Vp.Qt();e.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||e.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(e,r,i){iu(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.gm.p(e)),this.pm!==null&&this.pm.hv(an({width:r,height:e.height})),this.vm!==null&&this.vm.hv(an({width:i,height:e.height}))}Tm(){const e=this.Rm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(e,r,i,s){const o=this.Jf();if(o.width>0&&o.height>0&&(e.drawImage(this.Gp.canvasElement,r,i),s)){const a=this.Jp.canvasElement;e.drawImage(a,r,i)}}lv(e){if(e===0)return;const r={colorSpace:this.Ps.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const s=wu(this.Gp,r);s!==null&&(s.useBitmapCoordinateSpace(o=>{this._v(o),this.uv(o),this.Vm(s,Bbe)}),this.dv(s),this.Vm(s,$be)),this.pm!==null&&this.pm.lv(e),this.vm!==null&&this.vm.lv(e)}this.Jp.applySuggestedBitmapSize();const i=wu(this.Jp,r);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:o})=>{s.clearRect(0,0,o.width,o.height)}),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],i),this.Vm(i,zbe))}Vm(e,r){const i=this.Vp.Qt().js();for(const s of i)lO(r,o=>aO(o,e,!1,void 0),s,void 0);for(const s of i)lO(r,o=>ay(o,e,!1,void 0),s,void 0)}_v({context:e,bitmapSize:r}){Bw(e,0,0,r.width,r.height,this.Vp.Qt().Wc())}uv({context:e,bitmapSize:r,verticalPixelRatio:i}){if(this.Vp.N().timeScale.borderVisible){e.fillStyle=this.Im();const s=Math.max(1,Math.floor(this.Rm().S*i));e.fillRect(0,0,r.width,s)}}dv(e){const r=this.Vp.Qt().Et(),i=r.Da();if(!i||i.length===0)return;const s=this.o_.maxTickMarkWeight(i),o=this.Rm(),a=r.N();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:c,verticalPixelRatio:u})=>{l.strokeStyle=this.Im(),l.fillStyle=this.Im();const h=Math.max(1,Math.floor(c)),d=Math.floor(.5*c);l.beginPath();const f=Math.round(o.C*u);for(let p=i.length;p--;){const g=Math.round(i[p].coord*c);l.rect(g-d,0,h,f)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const c=o.S+o.C+o.A+o.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.H(),l.font=this.ev();for(const u of i)if(u.weight<s){const h=u.needAlignCoordinate?this.Em(l,u.coord,u.label):u.coord;l.fillText(u.label,h,c)}this.Vp.N().timeScale.allowBoldLabels&&(l.font=this.Am());for(const u of i)if(u.weight>=s){const h=u.needAlignCoordinate?this.Em(l,u.coord,u.label):u.coord;l.fillText(u.label,h,c)}})}Em(e,r,i){const s=this.Fp.Vi(e,i),o=s/2,a=Math.floor(r-o)+.5;return a<0?r+=Math.abs(0-a):a+s>this.Op.width&&(r-=Math.abs(this.Op.width-(a+s))),r}Bm(e,r){const i=this.Rm();for(const s of e)for(const o of s.cs())o.Tt().nt(r,i)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return cx(this.F(),this.Ps.fontFamily)}Am(){return cx(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new ux,Dm:0});const e=this.M,r=this.ev();if(e.k!==r){const i=this.F();e.P=i,e.k=r,e.A=3*i/12,e.V=3*i/12,e.Ji=9*i/12,e.L=0,e.Dm=4*i/12,e.Gi.Bn()}return this.M}vv(e){this.jf.style.cursor=e===1?"ew-resize":"default"}xm(){const e=this.Vp.Qt(),r=e.N();r.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),r.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const i={Bc:this.Vp.Qt().Bc()},s=()=>r.leftPriceScale.borderVisible&&e.Et().N().borderVisible,o=()=>e.Wc();r.leftPriceScale.visible&&this.pm===null&&(this.pm=new NL("left",r,i,s,o),this.Mm.appendChild(this.pm.Zf())),r.rightPriceScale.visible&&this.vm===null&&(this.vm=new NL("right",r,i,s,o),this.bm.appendChild(this.vm.Zf()))}}var XY;const qbe=!!nf&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!nf&&((XY=navigator==null?void 0:navigator.userAgentData)!=null&&XY.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class Wbe{constructor(e,r,i){var s;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new Yn,this.Cv=new Yn,this.Xu=new Yn,this.Um=null,this.$m=null,this.Dp=e,this.Ps=r,this.o_=i,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(s=this.kp).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),MS(this.Ps)&&this.Km(!0),this.ts=new Pbe(this.Gu.bind(this),this.Ps,i),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new Ube(this,this.o_),this.qm.appendChild(this.Zm.Zf());const o=r.autoSize&&this.Gm();let a=this.Ps.width,l=this.Ps.height;if(o||a===0||l===0){const c=e.getBoundingClientRect();a=a||c.width,l=l||c.height}this.Jm(a,l),this.Qm(),e.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.zm)this.qm.removeChild(e.Zf()),e.Xv().u(this),e.Zv().u(this),e.m();this.zm=[];for(const e of this.Lm)this.sw(e);this.Lm=[],qe(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(e,r,i=!1){if(this.il===r&&this.Mo===e)return;const s=function(l){const c=Math.floor(l.width),u=Math.floor(l.height);return an({width:c-c%2,height:u-u%2})}(an({width:e,height:r}));this.il=s.height,this.Mo=s.width;const o=this.il+"px",a=this.Mo+"px";qe(this.kp).style.height=o,qe(this.kp).style.width=a,this.qm.style.height=o,this.qm.style.width=a,i?this.ew(si.gn(),performance.now()):this.ts.Ih()}lv(e){e===void 0&&(e=si.gn());for(let r=0;r<this.zm.length;r++)this.zm[r].lv(e.en(r).tn);this.Ps.timeScale.visible&&this.Zm.lv(e.nn())}hr(e){var s;const r=MS(this.Ps);this.ts.hr(e);const i=MS(this.Ps);i!==r&&this.Km(i),(s=e.layout)!=null&&s.panes&&this.rw(),this.tw(),this.hw(e)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(e=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const r=this.lw(null),i=document.createElement("canvas");i.width=r.width,i.height=r.height;const s=qe(i.getContext("2d"));return this.lw(s,e),i}ow(e){return e==="left"&&!this._w()||e==="right"&&!this.uw()||this.zm.length===0?0:qe(e==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(e){this.$m=e,this.$m?this.ip().style.setProperty("cursor",e):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(e){return yi(this.zm[e]).Gf()}rw(){this.Lm.forEach(e=>{e.yt()})}hw(e){(e.autoSize!==void 0||!this.Um||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Um&&this.Gm(),e.autoSize===!1&&this.Um!==null&&this.nw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Jm(e.width||this.Mo,e.height||this.il))}lw(e,r){let i=0,s=0;const o=this.zm[0],a=(c,u)=>{let h=0;for(let d=0;d<this.zm.length;d++){const f=this.zm[d],p=qe(c==="left"?f.nm():f.rm()),g=p.Jf();if(e!==null&&p.Qf(e,u,h,r),h+=g.height,d<this.zm.length-1){const b=this.Lm[d],y=b.Jf();e!==null&&b.Qf(e,u,h),h+=y.height}}};this._w()&&(a("left",0),i+=qe(o.nm()).Jf().width);for(let c=0;c<this.zm.length;c++){const u=this.zm[c],h=u.Jf();if(e!==null&&u.Qf(e,i,s,r),s+=h.height,c<this.zm.length-1){const d=this.Lm[c],f=d.Jf();e!==null&&d.Qf(e,i,s),s+=f.height}}i+=o.Jf().width,this.uw()&&(a("right",i),i+=qe(o.rm()).Jf().width);const l=(c,u,h)=>{qe(c==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(qe(e),u,h)};if(this.Ps.timeScale.visible){const c=this.Zm.Jf();if(e!==null){let u=0;this._w()&&(l("left",u,s),u=qe(o.nm()).Jf().width),this.Zm.Qf(e,u,s,r),u+=c.width,this.uw()&&l("right",u,s)}s+=c.height}return an({width:i,height:s})}mw(){let e=0,r=0,i=0;for(const y of this.zm)this._w()&&(r=Math.max(r,qe(y.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(i=Math.max(i,qe(y.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),e+=y.Bo();r=oO(r),i=oO(i);const s=this.Mo,o=this.il,a=Math.max(s-r-i,0),l=1*this.Lm.length,c=this.Ps.timeScale.visible;let u=c?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var h;u=(h=u)+h%2;const d=l+u,f=o<d?0:o-d,p=f/e;let g=0;const b=window.devicePixelRatio||1;for(let y=0;y<this.zm.length;++y){const v=this.zm[y];v.Lv(this.ts.$s()[y]);let w=0,k=0;k=y===this.zm.length-1?Math.ceil((f-g)*b)/b:Math.round(v.Bo()*p*b)/b,w=Math.max(k,2),g+=w,v.hv(an({width:a,height:w})),this._w()&&v.Jv(r,"left"),this.uw()&&v.Jv(i,"right"),v.ap()&&this.ts.dc(v.ap(),w)}this.Zm.km(an({width:c?a:0,height:u}),c?r:0,c?i:0),this.ts.Eo(a),this.Nm!==r&&(this.Nm=r),this.Fm!==i&&(this.Fm=i)}Km(e){e?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return qbe?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const r=this.ww(e),i=r*e.deltaX/100,s=-r*e.deltaY/100;if(e.cancelable&&e.preventDefault(),s!==0&&this.Ps.handleScale.mouseWheel){const o=Math.sign(s)*Math.min(1,Math.abs(s)),a=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(a,o)}i!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*i)}ew(e,r){var s;const i=e.nn();i===3&&this.gw(),i!==3&&i!==2||(this.Mw(e),this.bw(e,r),this.Zm.yt(),this.zm.forEach(o=>{o.Nv()}),((s=this.Wm)==null?void 0:s.nn())===3&&(this.Wm.vn(e),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,r),e=this.Wm,this.Wm=null)),this.lv(e)}bw(e,r){for(const i of e.pn())this.mn(i,r)}Mw(e){const r=this.ts.$s();for(let i=0;i<r.length;i++)e.en(i).sn&&r[i].Go()}mn(e,r){const i=this.ts.Et();switch(e.an){case 0:i.Au();break;case 1:i.zu(e.Wt);break;case 2:i.dn(e.Wt);break;case 3:i.fn(e.Wt);break;case 4:i.Su();break;case 5:e.Wt.Ru(r)||i.fn(e.Wt.Du(r))}}Gu(e){this.Wm!==null?this.Wm.vn(e):this.Wm=e,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame(r=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const i=this.Wm;this.Wm=null,this.ew(i,r);for(const s of i.pn())if(s.an===5&&!s.Wt.Ru(r)){this.Qt()._n(s.Wt);break}}}))}gw(){this.Qm()}sw(e){this.qm.removeChild(e.Zf()),e.m()}Qm(){const e=this.ts.$s(),r=e.length,i=this.zm.length;for(let s=r;s<i;s++){const o=yi(this.zm.pop());this.qm.removeChild(o.Zf()),o.Xv().u(this),o.Zv().u(this),o.m();const a=this.Lm.pop();a!==void 0&&this.sw(a)}for(let s=i;s<r;s++){const o=new yA(this,e[s]);if(o.Xv().i(this.Sw.bind(this,o),this),o.Zv().i(this.xw.bind(this,o),this),this.zm.push(o),s>0){const a=new Abe(this,s-1,s);this.Lm.push(a),this.qm.insertBefore(a.Zf(),this.Zm.Zf())}this.qm.insertBefore(o.Zf(),this.Zm.Zf())}for(let s=0;s<r;s++){const o=e[s],a=this.zm[s];a.ap()!==o?a.Lv(o):a.zv()}this.tw(),this.mw()}Cw(e,r,i,s){var d;const o=new Map;e!==null&&this.ts.js().forEach(f=>{const p=f.Xs().Fr(e);p!==null&&o.set(f,p)});let a;if(e!==null){const f=(d=this.ts.Et().ss(e))==null?void 0:d.originalTime;f!==void 0&&(a=f)}const l=this.Qt().ac(),c=l!==null&&l.n_ instanceof Hw?l.n_:void 0,u=l!==null&&l.e_!==void 0?l.e_.Kn:void 0,h=this.Pw(s);return{yw:a,Re:e??void 0,kw:r??void 0,Tw:h!==-1?h:void 0,Rw:c,Dw:o,Vw:u,Bw:i??void 0}}Pw(e){let r=-1;if(e)r=this.zm.indexOf(e);else{const i=this.Qt().uc().Us();i!==null&&(r=this.Qt().$s().indexOf(i))}return r}Sw(e,r,i,s){this.xv.p(()=>this.Cw(r,i,s,e))}xw(e,r,i,s){this.Cv.p(()=>this.Cw(r,i,s,e))}Xm(e,r,i){var s;this.dw(((s=this.Qt().ac())==null?void 0:s.h_)??null),this.Xu.p(()=>this.Cw(e,r,i))}tw(){const e=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=e}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver(e=>{const r=e[e.length-1];r&&this.Jm(r.contentRect.width,r.contentRect.height)}),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function MS(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function Hbe(n){return n.open===void 0&&n.value===void 0}function Vbe(n){return function(e){return e.open!==void 0}(n)||function(e){return e.value!==void 0}(n)}function jL(n,e,r,i){const s=r.value,o={Re:e,wt:n,Wt:[s,s,s,s],yw:i};return r.color!==void 0&&(o.R=r.color),o}function Ybe(n,e,r,i){const s=r.value,o={Re:e,wt:n,Wt:[s,s,s,s],yw:i};return r.lineColor!==void 0&&(o.vt=r.lineColor),r.topColor!==void 0&&(o.mr=r.topColor),r.bottomColor!==void 0&&(o.wr=r.bottomColor),o}function Gbe(n,e,r,i){const s=r.value,o={Re:e,wt:n,Wt:[s,s,s,s],yw:i};return r.topLineColor!==void 0&&(o.gr=r.topLineColor),r.bottomLineColor!==void 0&&(o.Mr=r.bottomLineColor),r.topFillColor1!==void 0&&(o.br=r.topFillColor1),r.topFillColor2!==void 0&&(o.Sr=r.topFillColor2),r.bottomFillColor1!==void 0&&(o.Cr=r.bottomFillColor1),r.bottomFillColor2!==void 0&&(o.Pr=r.bottomFillColor2),o}function Kbe(n,e,r,i){const s={Re:e,wt:n,Wt:[r.open,r.high,r.low,r.close],yw:i};return r.color!==void 0&&(s.R=r.color),s}function Xbe(n,e,r,i){const s={Re:e,wt:n,Wt:[r.open,r.high,r.low,r.close],yw:i};return r.color!==void 0&&(s.R=r.color),r.borderColor!==void 0&&(s.Ht=r.borderColor),r.wickColor!==void 0&&(s.vr=r.wickColor),s}function Qbe(n,e,r,i,s){const o=yi(s)(r),a=Math.max(...o),l=Math.min(...o),c=o[o.length-1],u=[c,a,l,c],{time:h,color:d,...f}=r;return{Re:e,wt:n,Wt:u,yw:i,se:f,R:d}}function xp(n){return n.Wt!==void 0}function LL(n,e){return e.customValues!==void 0&&(n.Iw=e.customValues),n}function pc(n){return(e,r,i,s,o,a)=>function(l,c){return c?c(l):Hbe(l)}(i,a)?LL({wt:e,Re:r,yw:s},i):LL(n(e,r,i,s,o),i)}function FL(n){return{Candlestick:pc(Xbe),Bar:pc(Kbe),Area:pc(Ybe),Baseline:pc(Gbe),Histogram:pc(jL),Line:pc(jL),Custom:pc(Qbe)}[n]}function $L(n){return{Re:0,Ew:new Map,Hh:n}}function zL(n,e){if(n!==void 0&&n.length!==0)return{Aw:e.key(n[0].wt),zw:e.key(n[n.length-1].wt)}}function BL(n){let e;return n.forEach(r=>{e===void 0&&(e=r.yw)}),yi(e)}class Jbe{constructor(e){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=e}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(e,r){let i=this.Lw.size!==0,s=!1;const o=this.Ow.get(e);if(o!==void 0)if(this.Ow.size===1)i=!1,s=!0,this.Lw.clear();else for(const c of this.Fw)c.pointData.Ew.delete(e)&&(s=!0);let a=[];if(r.length!==0){const c=r.map(p=>p.time),u=this.o_.createConverterToInternalObj(r),h=FL(e.Rr()),d=e.ca(),f=e.fa();a=r.map((p,g)=>{const b=u(p.time),y=this.o_.key(b);let v=this.Lw.get(y);v===void 0&&(v=$L(b),this.Lw.set(y,v),s=!0);const w=h(b,v.Re,p,c[g],d,f);return v.Ew.set(e,w),w})}i&&this.Hw(),this.Uw(e,a);let l=-1;if(s){const c=[];this.Lw.forEach(u=>{c.push({timeWeight:0,time:u.Hh,pointData:u,originalTime:BL(u.Ew)})}),c.sort((u,h)=>this.o_.key(u.time)-this.o_.key(h.time)),l=this.$w(c)}return this.qw(e,l,function(c,u,h){const d=zL(c,h),f=zL(u,h);if(d!==void 0&&f!==void 0)return{Yw:!1,zh:d.zw>=f.zw&&d.Aw>=f.Aw}}(this.Ow.get(e),o,this.o_))}Ac(e){return this.Ww(e,[])}jw(e,r,i){const s=r;(function(y){y.yw===void 0&&(y.yw=y.time)})(s),this.o_.preprocessData(r);const o=this.o_.createConverterToInternalObj([r])(r.time),a=this.Nw.get(e);if(!i&&a!==void 0&&this.o_.key(o)<this.o_.key(a))throw new Error(`Cannot update oldest data, last time=${a}, new time=${o}`);let l=this.Lw.get(this.o_.key(o));if(i&&l===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const c=l===void 0;l===void 0&&(l=$L(o),this.Lw.set(this.o_.key(o),l));const u=FL(e.Rr()),h=e.ca(),d=e.fa(),f=u(o,l.Re,r,s.yw,h,d);l.Ew.set(e,f),i?this.Kw(e,f,l.Re):this.Xw(e,f);const p={zh:xp(f),Yw:i};if(!c)return this.qw(e,-1,p);const g={timeWeight:0,time:l.Hh,pointData:l,originalTime:BL(l.Ew)},b=tf(this.Fw,this.o_.key(g.time),(y,v)=>this.o_.key(y.time)<v);this.Fw.splice(b,0,g);for(let y=b;y<this.Fw.length;++y)rb(this.Fw[y].pointData,y);return this.o_.fillWeightsForPoints(this.Fw,b),this.qw(e,b,p)}Zw(e,r){const i=this.Ow.get(e);if(i===void 0||r<=0)return[[],this.Gw()];r=Math.min(r,i.length);const s=i.splice(-r).reverse();i.length===0?this.Nw.delete(e):this.Nw.set(e,i[i.length-1].wt);for(const o of s){const a=this.Lw.get(this.o_.key(o.wt));if(a&&(a.Ew.delete(e),a.Ew.size===0)){this.Lw.delete(this.o_.key(a.Hh)),this.Fw.splice(a.Re,1);for(let l=a.Re;l<this.Fw.length;++l)rb(this.Fw[l].pointData,l)}}return[s,this.qw(e,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(e,r){let i=this.Ow.get(e);i===void 0&&(i=[],this.Ow.set(e,i));const s=i.length!==0?i[i.length-1]:null;s===null||this.o_.key(r.wt)>this.o_.key(s.wt)?xp(r)&&i.push(r):xp(r)?i[i.length-1]=r:i.splice(-1,1),this.Nw.set(e,r.wt)}Kw(e,r,i){const s=this.Ow.get(e);if(s===void 0)return;const o=tf(s,i,(a,l)=>a.Re<l);xp(r)?s[o]=r:s.splice(o,1)}Uw(e,r){r.length!==0?(this.Ow.set(e,r.filter(xp)),this.Nw.set(e,r[r.length-1].wt)):(this.Ow.delete(e),this.Nw.delete(e))}Hw(){for(const e of this.Fw)e.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(e.time))}$w(e){let r=-1;for(let i=0;i<this.Fw.length&&i<e.length;++i){const s=this.Fw[i],o=e[i];if(this.o_.key(s.time)!==this.o_.key(o.time)){r=i;break}o.timeWeight=s.timeWeight,rb(o.pointData,i)}if(r===-1&&this.Fw.length!==e.length&&(r=Math.min(this.Fw.length,e.length)),r===-1)return-1;for(let i=r;i<e.length;++i)rb(e[i].pointData,i);return this.o_.fillWeightsForPoints(e,r),this.Fw=e,r}Jw(){if(this.Ow.size===0)return null;let e=0;return this.Ow.forEach(r=>{r.length!==0&&(e=Math.max(e,r[r.length-1].Re))}),e}qw(e,r,i){const s=this.Gw();if(r!==-1)this.Ow.forEach((o,a)=>{s.Oo.set(a,{se:o,Qw:a===e?i:void 0})}),this.Ow.has(e)||s.Oo.set(e,{se:[],Qw:i}),s.Et.tg=this.Fw,s.Et.ig=r;else{const o=this.Ow.get(e);s.Oo.set(e,{se:o||[],Qw:i})}return s}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function rb(n,e){n.Re=e,n.Ew.forEach(r=>{r.Re=e})}function Zbe(n,e){return n.wt<e}function eye(n,e){return e<n.wt}function tye(n,e,r){const i=e.Uh(),s=e.bi(),o=tf(n,i,Zbe),a=FJ(n,s,eye);if(!r)return{from:o,to:a};let l=o,c=a;return o>0&&o<n.length&&n[o].wt>=i&&(l=o-1),a>0&&a<n.length&&n[a-1].wt<=s&&(c=a+1),{from:l,to:c}}class nye{constructor(e,r,i){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=e,this.Qn=r,this.ag=i}yt(e){this.sg=!0,e==="data"&&(this.ng=!0),e==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const e=this.Jn.Ft(),r=this.Qn.Et();if(this.ug(),r.Ki()||e.Ki())return;const i=r.Pe();if(i===null||this.Jn.Xs().zr()===0)return;const s=this.Jn.zt();s!==null&&(this.hg=tye(this.rg,i,this.ag),this.fg(e,r,s.Wt),this.pg())}}class rye{constructor(e,r){this.vg=e,this.Yi=r}nt(e,r,i){this.vg.draw(e,this.Yi,r,i)}}class iye extends nye{constructor(e,r,i){super(e,r,!1),this.sh=i,this.og=new rye(this.sh.renderer(),s=>{const o=e.zt();return o===null?null:e.Ft().Nt(s,o.Wt)})}da(e){return this.sh.priceValueBuilder(e)}pa(e){return this.sh.isWhitespace(e)}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(r=>({wt:r.Re,_t:NaN,...e.Dr(r.Re),mg:r.se}))}fg(e,r){r.uu(this.rg,Eve(this.hg))}pg(){this.sh.update({bars:this.rg.map(sye),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function sye(n){return{x:n._t,time:n.wt,originalData:n.mg,barColor:n.cr}}const oye={color:"#2196f3"},aye=(n,e,r)=>{const i=El(r);return new iye(n,e,i)};function wA(n){const e={value:n.Wt[3],time:n.yw};return n.Iw!==void 0&&(e.customValues=n.Iw),e}function UL(n){const e=wA(n);return n.R!==void 0&&(e.color=n.R),e}function lye(n){const e=wA(n);return n.vt!==void 0&&(e.lineColor=n.vt),n.mr!==void 0&&(e.topColor=n.mr),n.wr!==void 0&&(e.bottomColor=n.wr),e}function cye(n){const e=wA(n);return n.gr!==void 0&&(e.topLineColor=n.gr),n.Mr!==void 0&&(e.bottomLineColor=n.Mr),n.br!==void 0&&(e.topFillColor1=n.br),n.Sr!==void 0&&(e.topFillColor2=n.Sr),n.Cr!==void 0&&(e.bottomFillColor1=n.Cr),n.Pr!==void 0&&(e.bottomFillColor2=n.Pr),e}function VJ(n){const e={open:n.Wt[0],high:n.Wt[1],low:n.Wt[2],close:n.Wt[3],time:n.yw};return n.Iw!==void 0&&(e.customValues=n.Iw),e}function uye(n){const e=VJ(n);return n.R!==void 0&&(e.color=n.R),e}function dye(n){const e=VJ(n),{R:r,Ht:i,vr:s}=n;return r!==void 0&&(e.color=r),i!==void 0&&(e.borderColor=i),s!==void 0&&(e.wickColor=s),e}function ly(n){return{Area:lye,Line:UL,Baseline:cye,Histogram:UL,Bar:uye,Candlestick:dye,Custom:hye}[n]}function hye(n){const e=n.yw;return{...n.se,time:e}}const fye={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},pye={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},mye={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:DJ,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},DS={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},gye={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function qL(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:mye,crosshair:fye,grid:pye,overlayPriceScales:{...DS},leftPriceScale:{...DS,visible:!1},rightPriceScale:{...DS,visible:!0},timeScale:gye,localization:{locale:nf?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class YJ{constructor(e,r,i){this.Hf=e,this.wg=r,this.gg=i??0}applyOptions(e){this.Hf.Qt().oc(this.wg,e,this.gg)}options(){return this.Yi().N()}width(){return qw(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Fl(new Xr(e.from,e.to))}getVisibleRange(){let e,r,i=this.Yi().Qe();if(i===null)return null;if(this.Yi().Ja()){const s=this.Yi().fo(),o=qJ(s);i=$d(i,this.Yi().tl()),e=Number((Math.round(i.$e()/s)*s).toFixed(o)),r=Number((Math.round(i.qe()/s)*s).toFixed(o))}else e=i.$e(),r=i.qe();return{from:e,to:r}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return qe(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class vye{constructor(e,r,i,s){this.Hf=e,this.Pt=i,this.Mg=r,this.bg=s}getHeight(){return this.Pt.$t()}setHeight(e){const r=this.Hf.Qt(),i=r.Uc(this.Pt);r.vc(i,e)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(e){this.Pt.Io(e),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(e){const r=this.paneIndex();r!==e&&(vr(e>=0&&e<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(r,e))}getSeries(){return this.Pt.Oo().map(e=>this.Mg(e))??[]}getHTMLElement(){const e=this.Hf.$f();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Zf():null}attachPrimitive(e){this.Pt._a(e),e.attached&&e.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(e){this.Pt.ua(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new YJ(this.Hf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,r={},i=0){return this.bg.addCustomSeries(e,r,i)}addSeries(e,r={}){return this.bg.addSeries(e,r,this.paneIndex())}}const bye={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class WL{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}Sg(){return this.ir}}class yye{constructor(e,r,i,s,o,a){this.xg=new Yn,this.Jn=e,this.Cg=r,this.Pg=i,this.o_=o,this.bg=s,this.yg=a}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(e){const r=this.Jn.zt();return r===null?null:this.Jn.Ft().Nt(e,r.Wt)}coordinateToPrice(e){const r=this.Jn.zt();return r===null?null:this.Jn.Ft().Ts(e,r.Wt)}barsInLogicalRange(e){if(e===null)return null;const r=new eh(new Cm(e.from,e.to)).y_(),i=this.Jn.Xs();if(i.Ki())return null;const s=i.Fr(r.Uh(),1),o=i.Fr(r.bi(),-1),a=qe(i.Lr()),l=qe(i.Ks());if(s!==null&&o!==null&&s.Re>o.Re)return{barsBefore:e.from-a,barsAfter:l-e.to};const c={barsBefore:s===null||s.Re===a?e.from-a:s.Re-a,barsAfter:o===null||o.Re===l?l-e.to:l-o.Re};return s!==null&&o!==null&&(c.from=s.yw,c.to=o.yw),c}setData(e){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,e),this.Tg("full")}update(e,r=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,e,r),this.Tg("update")}pop(e=1){const r=this.Cg.Dg(this.Jn,e);r.length!==0&&this.Tg("update");const i=ly(this.seriesType());return r.map(s=>i(s))}dataByIndex(e,r){const i=this.Jn.Xs().Fr(e,r);return i===null?null:ly(this.seriesType())(i)}data(){const e=ly(this.seriesType());return this.Jn.Xs().Hr().map(r=>e(r))}subscribeDataChanged(e){this.xg.i(e)}unsubscribeDataChanged(e){this.xg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return pa(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(e){const r=$i(pa(bye),e),i=this.Jn.Oh(r);return new WL(i)}removePriceLine(e){this.Jn.Nh(e.Sg())}priceLines(){return this.Jn.Fh().map(e=>new WL(e))}seriesType(){return this.Jn.Rr()}lastValueData(e){const r=this.Jn.ye(e);return r.ke?{noData:!0}:{noData:!1,price:r.gt,color:r.R}}attachPrimitive(e){this.Jn._a(e),e.attached&&e.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ua(e),e.detached&&e.detached(),this.Jn.Qt().Ih()}getPane(){const e=this.Jn,r=qe(this.Jn.Qt().Hn(e));return this.yg(r)}moveToPane(e){this.Jn.Qt().Nc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const r=this.Jn.Qt().Hn(this.Jn);r!==null&&r.Qo(this.Jn,e)}Tg(e){this.xg.v()&&this.xg.p(e)}}class xye{constructor(e,r,i){this.Vg=new Yn,this.z_=new Yn,this.gm=new Yn,this.ts=e,this.uh=e.Et(),this.Zm=r,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=i}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(e,r){r?this.uh.Tu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.nu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const r={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},i=this.uh.au(r);this.ts.Lc(i)}getVisibleLogicalRange(){const e=this.uh.su();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){vr(e.from<=e.to,"The from index cannot be after the to index."),this.ts.Lc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(e){const r=this.ts.Et();return r.Ki()?null:r.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.cu(e)}timeToIndex(e,r){const i=this.o_.convertHorzItemToInternal(e);return this.uh.Q_(i,r)}timeToCoordinate(e){const r=this.timeToIndex(e,!1);return r===null?null:this.uh.qt(r)}coordinateToTime(e){const r=this.ts.Et(),i=r.cu(e),s=r.ss(i);return s===null?null:s.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(e){this.Vg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.Vg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.gm.i(e)}unsubscribeSizeChange(e){this.gm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...pa(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(e){this.gm.p(e.width,e.height)}}function HL(n){return function(e){if(Xv(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:s}=e.handleScale;Xv(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),Xv(s)&&(e.handleScale.axisDoubleClickReset={time:s,price:s})}const r=e.handleScroll;Xv(r)&&(e.handleScroll={horzTouchDrag:r,vertTouchDrag:r,mouseWheel:r,pressedMouseMove:r})}(n),n}class wye{constructor(e,r,i){this.Ag=new Map,this.zg=new Map,this.Lg=new Yn,this.Og=new Yn,this.Ng=new Yn,this.qu=new WeakMap,this.Fg=new Jbe(r);const s=i===void 0?pa(qL()):$i(pa(qL()),HL(i));this.Wg=r,this.Hf=new Wbe(e,s,r),this.Hf.Xv().i(a=>{this.Lg.v()&&this.Lg.p(this.Hg(a()))},this),this.Hf.Zv().i(a=>{this.Og.v()&&this.Og.p(this.Hg(a()))},this),this.Hf.cc().i(a=>{this.Ng.v()&&this.Ng.p(this.Hg(a()))},this);const o=this.Hf.Qt();this.Ug=new xye(o,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(e,r,i){this.autoSizeActive()||this.Hf.Jm(e,r,i)}addCustomSeries(e,r={},i=0){const s=(o=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...oye,...o.defaultOptions()},$g:aye,qg:o}))(El(e));return this.Yg(s,r,i)}addSeries(e,r={},i=0){return this.Yg(e,r,i)}removeSeries(e){const r=yi(this.Ag.get(e)),i=this.Fg.Ac(r);this.Hf.Qt().Ac(r),this.jg(i),this.Ag.delete(e),this.zg.delete(r)}kg(e,r){this.jg(this.Fg.Ww(e,r))}Rg(e,r,i){this.jg(this.Fg.jw(e,r,i))}Dg(e,r){const[i,s]=this.Fg.Zw(e,r);return i.length!==0&&this.jg(s),i}subscribeClick(e){this.Lg.i(e)}unsubscribeClick(e){this.Lg._(e)}subscribeCrosshairMove(e){this.Ng.i(e)}unsubscribeCrosshairMove(e){this.Ng._(e)}subscribeDblClick(e){this.Og.i(e)}unsubscribeDblClick(e){this.Og._(e)}priceScale(e,r=0){return new YJ(this.Hf,e,r)}timeScale(){return this.Ug}applyOptions(e){this.Hf.hr(HL(e))}options(){return this.Hf.N()}takeScreenshot(e=!1,r=!1){let i,s;try{r||(i=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),s=this.Hf.aw(e)}finally{r||i===void 0||this.Hf.Qt().hr({crosshair:{mode:i}})}return s}addPane(e=!1){const r=this.Hf.Qt().$c();return r.zo(e),this.Kg(r)}removePane(e){this.Hf.Qt().fc(e)}swapPanes(e,r){this.Hf.Qt().mc(e,r)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map(e=>this.Kg(e))}paneSize(e=0){const r=this.Hf.pw(e);return{height:r.height,width:r.width}}setCrosshairPosition(e,r,i){const s=this.Ag.get(i);if(s===void 0)return;const o=this.Hf.Qt().Hn(s);o!==null&&this.Hf.Qt().Rc(e,r,o)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(e,r={},i=0){vr(e.$g!==void 0),function(c){if(c===void 0||c.type==="custom")return;const u=c;u.minMove!==void 0&&u.precision===void 0&&(u.precision=qJ(u.minMove))}(r.priceFormat),e.type==="Candlestick"&&function(c){c.borderColor!==void 0&&(c.borderUpColor=c.borderColor,c.borderDownColor=c.borderColor),c.wickColor!==void 0&&(c.wickUpColor=c.wickColor,c.wickDownColor=c.wickColor)}(r);const s=$i(pa(PJ),pa(e.defaultOptions),r),o=e.$g,a=new Hw(this.Hf.Qt(),e.type,s,o,e.qg);this.Hf.Qt().Ic(a,i);const l=new yye(a,this,this,this,this.Wg,c=>this.Kg(c));return this.Ag.set(l,a),this.zg.set(a,l),l}jg(e){const r=this.Hf.Qt();r.Vc(e.Et._u,e.Et.tg,e.Et.ig),e.Oo.forEach((i,s)=>s.ht(i.se,i.Qw)),r.Et().K_(),r.vu()}Xg(e){return yi(this.zg.get(e))}Hg(e){const r=new Map;e.Dw.forEach((s,o)=>{const a=o.Rr(),l=ly(a)(s);if(a!=="Custom")vr(Vbe(l));else{const c=o.fa();vr(!c||c(l)===!1)}r.set(this.Xg(o),l)});const i=e.Rw!==void 0&&this.zg.has(e.Rw)?this.Xg(e.Rw):void 0;return{time:e.yw,logical:e.Re,point:e.kw,paneIndex:e.Tw,hoveredSeries:i,hoveredObjectId:e.Vw,seriesData:r,sourceEvent:e.Bw}}Kg(e){let r=this.qu.get(e);return r||(r=new vye(this.Hf,i=>this.Xg(i),e,this),this.qu.set(e,r)),r}}function _ye(n){if(b0(n)){const e=document.getElementById(n);return vr(e!==null,`Cannot find element in DOM with id=${n}`),e}return n}function Sye(n,e,r){const i=_ye(n),s=new wye(i,e,r);return e.setOptions(s.options()),s}function kye(n,e){return Sye(n,new PL,PL.ld(e))}({...PJ});const GJ=D.forwardRef(({initialData:n=[],symbol:e="BTC/USDC",height:r=500,showVolume:i=!0},s)=>{const o=D.useRef(null),a=D.useRef(null),l=D.useRef(null),c=D.useRef(null),[u,h]=D.useState(null),d=b=>{if(typeof b=="number")return isNaN(b)||!isFinite(b)||b<0?(console.warn("[KlineChart] Invalid price number:",b),0):b;try{const y=it(b);return isNaN(y)||!isFinite(y)||y<0?(console.warn("[KlineChart] Invalid price after conversion:",b,"->",y),0):y}catch(y){return console.error("[KlineChart] Error parsing price:",b,y),0}},f=b=>{const y=Math.floor((b.open_time||b.close_time||Date.now())/1e3),v=d(b.open),w=d(b.high),k=d(b.low),_=d(b.close),S=Math.max(v,w,k,_),C=Math.min(v,w,k,_);return(w!==S||k!==C)&&console.warn("[KlineChart] Kline data corrected - high/low were not extremes:",{original:{high:w,low:k},corrected:{high:S,low:C}}),(v<=0||S<=0||C<=0||_<=0)&&console.warn("[KlineChart] Invalid kline data - non-positive prices detected:",b),{time:y,open:v,high:S,low:C,close:_}},p=b=>{if(!b.volume)return null;const y=Math.floor((b.open_time||b.close_time||Date.now())/1e3),v=typeof b.volume=="number"?b.volume:it(b.volume),w=d(b.close),k=d(b.open),_=w>=k;return{time:y,value:v,color:_?"#26a69a80":"#ef535080"}},g=b=>{if(!l.current){console.warn("[KlineChart] updateChart called before chart is initialized");return}try{const y=f(b),v=i?p(b):null;l.current.update(y),h(y.close),i&&c.current&&v&&c.current.update(v)}catch(y){console.error("[KlineChart] Error updating chart:",y)}};return D.useImperativeHandle(s,()=>({updateChart:g})),D.useEffect(()=>{if(!o.current)return;const b=kye(o.current,{width:o.current.clientWidth,height:r,layout:{background:{color:"#1e1e1e"},textColor:"#d1d4dc"},grid:{vertLines:{color:"#2a2e39"},horzLines:{color:"#2a2e39"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2e39"},timeScale:{borderColor:"#2a2e39",timeVisible:!0,secondsVisible:!1}}),y=b.addSeries("Candlestick",{upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"});let v=null;i&&(v=b.addSeries("Histogram",{color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""})),n.length>0&&(y.setData(n),h(n[n.length-1].close)),a.current=b,l.current=y,c.current=v;const w=()=>{o.current&&a.current&&a.current.applyOptions({width:o.current.clientWidth})};return window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w),b.remove()}},[r,i]),D.useEffect(()=>{if(l.current&&n.length>0)try{l.current.setData(n),h(n[n.length-1].close)}catch(b){console.error("[KlineChart] Error setting initial data:",b)}},[n]),m.jsxs("div",{style:{position:"relative",width:"100%"},children:[m.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"1.2rem",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:m.jsxs("span",{children:[e," Live Kline Chart",u!==null&&` - Current: $${u.toFixed(2)}`]})}),m.jsx("div",{ref:o,style:{position:"relative",width:"100%"}})]})});GJ.displayName="KlineChart";function Cye(){var Ye,He,ot,rt;const[n,e]=D.useState(v0),[r,i]=D.useState(()=>localStorage.getItem("authToken")||""),[s,o]=D.useState(zw),[a,l]=D.useState(""),[c,u]=D.useState("BTC/USDC"),[h,d]=D.useState("1m"),[f,p]=D.useState("300"),[g,b]=D.useState(!1),[y,v]=D.useState([]),[w,k]=D.useState([]),[_,S]=D.useState(new Set),[C,E]=D.useState([]),[P,O]=D.useState(!1),M=D.useRef(null),R=D.useRef(0),j=Pf,B=D.useRef(null),[L,$]=D.useState([]),{walletAddress:z,authToken:W}=Bu(),{markets:q}=tc({baseURL:j,sessionToken:"",autoFetchMarkets:!0}),V=q.length>0?(((Ye=q.find(ye=>ye.active))==null?void 0:Ye.market_id)??q[0].market_id)||(((ot=(He=q.find(ye=>ye.active))==null?void 0:He.id)==null?void 0:ot.toString())??((rt=q[0].id)==null?void 0:rt.toString())??""):null;D.useEffect(()=>{V&&!a&&l(V)},[V]),D.useEffect(()=>{W&&i(W)},[W]),D.useEffect(()=>{const ye=ne=>{ne.key==="authToken"&&ne.newValue&&i(ne.newValue)};window.addEventListener("storage",ye);const re=setInterval(()=>{const ne=localStorage.getItem("authToken");ne&&ne!==r&&i(ne)},1e3);return()=>{window.removeEventListener("storage",ye),clearInterval(re)}},[r]),D.useEffect(()=>{r&&r.trim()!==""&&localStorage.setItem("authToken",r)},[r]);const F=(ye,re,ne,xe,Ot)=>{const ft={id:R.current++,timestamp:Date.now(),channel:ye,data:re,type:ne,step:Ot};xe?k(It=>[...It.slice(-99),ft]):v(It=>[...It.slice(-99),ft])},G=(ye,re,ne,xe)=>{E(Ot=>[...Ot,{step:ye,status:re,message:ne,timestamp:Date.now(),details:xe}])},H=()=>{E([])},A=async()=>{var Ot;if((Ot=M.current)!=null&&Ot.isConnected()){F("connection","Already connected","info",!1);return}if(O(!0),H(),G("1","in-progress","Validating configuration..."),F("connection","Starting connection process...","debug",!1,"Step 1: Validation"),!n||!n.trim()){G("1","error","WebSocket URL is required"),F("connection","Error: WebSocket URL is required","error",!1,"Step 1: Validation"),O(!1);return}try{const ft=new URL(n);if(ft.protocol!=="ws:"&&ft.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol");G("1","success",`URL format valid: ${n}`),F("connection",`URL validated: ${n}`,"debug",!1,"Step 1: Validation")}catch(ft){G("1","error",`Invalid URL format: ${ft.message}`),F("connection",`Error: Invalid URL format - ${ft.message}`,"error",!1,"Step 1: Validation"),O(!1);return}G("2","in-progress","Building connection URL with parameters...");const ye=[];r&&ye.push(`token=${encodeURIComponent(r)}`),z&&ye.push(`wallet=${encodeURIComponent(z)}`),s&&ye.push(`device_id=${encodeURIComponent(s)}`);const re=n.includes("?")?"&":"?",ne=ye.length>0?`${n}${re}${ye.join("&")}`:n;if(G("2","success",`Connection URL: ${ne}`),F("connection",`Connection URL: ${ne}`,"debug",!1,"Step 2: URL Construction"),ye.length>0?F("connection",`Query parameters: ${ye.join(", ")}`,"debug",!1,"Step 2: URL Construction"):F("connection","No query parameters (authToken, walletAddress, deviceID)","warning",!1,"Step 2: URL Construction"),G("3","in-progress","Cleaning up existing connection..."),M.current)try{M.current.disconnect(),G("3","success","Previous connection cleaned up"),F("connection","Previous connection cleaned up","debug",!1,"Step 3: Cleanup")}catch{G("3","success","No previous connection to clean up"),F("connection","No previous connection found","debug",!1,"Step 3: Cleanup")}else G("3","success","No previous connection to clean up");G("4","in-progress","Creating SubscriptionClient instance...");try{M.current=new ec({url:n,authToken:r||void 0,walletAddress:z||void 0,deviceID:s||void 0}),G("4","success","SubscriptionClient created"),F("connection","SubscriptionClient instance created","debug",!1,"Step 4: Client Creation"),F("connection",`Config: ${JSON.stringify({url:n,hasToken:!!r,hasWallet:!!z,deviceID:s},null,2)}`,"debug",!1,"Step 4: Client Creation")}catch(ft){G("4","error",`Failed to create client: ${ft.message}`),F("connection",`Error creating client: ${ft.message}`,"error",!1,"Step 4: Client Creation"),O(!1);return}G("5","in-progress","Initiating WebSocket connection..."),F("connection","Initiating WebSocket handshake...","debug",!1,"Step 5: Connection"),F("connection","Browser will attempt to upgrade HTTP connection to WebSocket","debug",!1,"Step 5: Connection");const xe=Date.now();try{await M.current.connect();const ft=Date.now()-xe,It=M.current.isConnected(),Ce=M.current.getState();F("connection",`Connection attempt completed in ${ft}ms`,"debug",!1,"Step 5: Connection"),F("connection",`Connection state: ${Ce}`,"debug",!1,"Step 5: Connection"),b(It),It?(G("5","success",`WebSocket connected successfully (${ft}ms)`),F("connection"," WebSocket connected successfully!","success",!1,"Step 5: Connection"),F("connection",`Connection established in ${ft}ms`,"success",!1,"Step 5: Connection")):(G("5","error","Connection completed but state is not connected"),F("connection"," Connection attempt completed but state is not connected","error",!1,"Step 5: Connection"),F("connection",`Current state: ${Ce}`,"error",!1,"Step 5: Connection"))}catch(ft){const It=Date.now()-xe,Ce=ft.message||String(ft);let we="",ct=null,Fe=null;const dt=Ce.match(/code\s+(\d+)/i);dt&&(ct=parseInt(dt[1],10));const _t=Ce.match(/\b(40[0-9]|50[0-9])\b/);if(_t&&(Fe=parseInt(_t[1],10)),ct!==null)switch(ct){case 1006:we=`WebSocket Close Code 1006 (Abnormal Closure)
The connection was closed abnormally. Possible causes:
- Server is not running or unreachable
- Wrong URL or port
- Network connectivity issues
- Firewall blocking the connection
- DNS resolution failure
- SSL/TLS handshake failure (for wss://)`;break;case 1002:we=`WebSocket Close Code 1002 (Protocol Error)
The server encountered a protocol error. Possible causes:
- Server does not support WebSocket protocol
- Protocol version mismatch
- Invalid WebSocket handshake`;break;case 1003:we=`WebSocket Close Code 1003 (Unsupported Data Type)
The server received data in an unsupported format.`;break;case 1008:we=`WebSocket Close Code 1008 (Policy Violation)
Connection closed due to policy violation. Possible causes:
- Authentication failed (missing or invalid token)
- Authorization failed (insufficient permissions)
- Rate limiting or quota exceeded
- Server policy restrictions`;break;case 1011:we=`WebSocket Close Code 1011 (Server Error)
Server encountered an internal error. Check server logs for details.`;break;case 1e3:we=`WebSocket Close Code 1000 (Normal Closure)
Connection closed normally but before opening. This may indicate:
- Server rejected the connection immediately
- Connection timeout`;break;case 1001:we=`WebSocket Close Code 1001 (Going Away)
Server is going away or restarting.`;break;case 1007:we=`WebSocket Close Code 1007 (Invalid Data)
Server received invalid data format.`;break;case 1009:we=`WebSocket Close Code 1009 (Message Too Big)
Message size exceeds server limits.`;break;case 1010:we=`WebSocket Close Code 1010 (Extension Error)
Server could not negotiate required extensions.`;break;case 1012:we=`WebSocket Close Code 1012 (Service Restart)
Service is restarting.`;break;case 1013:we=`WebSocket Close Code 1013 (Try Again Later)
Service temporarily unavailable, try again later.`;break;case 1014:we=`WebSocket Close Code 1014 (Bad Gateway)
Server acting as gateway received invalid response.`;break;case 1015:we=`WebSocket Close Code 1015 (TLS Handshake)
TLS handshake failure (for secure WebSocket connections).`;break;default:we=`WebSocket Close Code ${ct}
Connection closed with this close code. Check WebSocket specification for details.`}else if(Fe!==null)switch(Fe){case 401:we=`HTTP 401 (Unauthorized)
Authentication failed. Possible causes:
- Missing or invalid JWT token
- Token expired
- Server requires authentication but no token provided
- Token signature verification failed
Note: If server uses JWT auth, you must provide a valid token in the authToken field.`;break;case 403:we=`HTTP 403 (Forbidden)
Access denied. Possible causes:
- Insufficient permissions
- Account restrictions
- IP address blocked`;break;case 404:we=`HTTP 404 (Not Found)
WebSocket endpoint not found. Check the WebSocket URL.`;break;case 500:case 502:case 503:case 504:we=`HTTP ${Fe} (Server Error)
Server error occurred. Check server logs for details.`;break;default:we=`HTTP ${Fe}
Connection failed with this HTTP status code.`}else Ce.includes("abnormal closure")||Ce.toLowerCase().includes("abnormal")?we=`Abnormal Connection Closure
The server closed the connection abnormally. Possible causes:
- Server is not running
- Wrong URL or port
- Network connectivity issues
- Firewall blocking the connection`:Ce.includes("protocol error")||Ce.toLowerCase().includes("protocol")?we=`WebSocket Protocol Error
The server may not support WebSocket connections or there's a protocol mismatch.`:Ce.includes("policy violation")||Ce.toLowerCase().includes("policy")?we=`Policy Violation
Connection closed due to policy violation. Check authentication requirements.`:Ce.includes("server error")||Ce.toLowerCase().includes("server error")?we=`Server Error
Server returned an error. Check server logs for details.`:Ce.includes("Unauthorized")||Ce.includes("unauthorized")||Ce.includes("401")?we=`Authentication Failed
Possible causes:
- Missing or invalid JWT token (if server requires authentication)
- Token expired
- Server is in production mode requiring JWT authentication
Note: If server uses JWT auth, you must provide a valid token in the authToken field.`:Ce.includes("timeout")||Ce.toLowerCase().includes("timeout")?we=`Connection Timeout
The connection attempt timed out. Possible causes:
- Server is not responding
- Network latency is too high
- Firewall blocking the connection`:(Ce.includes("network")||Ce.toLowerCase().includes("network"))&&(we=`Network Error
Network-related issue detected. Check:
- Internet connection
- Firewall settings
- Proxy configuration`);let pt=`Connection failed: ${Ce}`;if(ct!==null&&(pt+=` (Close Code: ${ct})`),Fe!==null&&(pt+=` (HTTP Status: ${Fe})`),G("5","error",pt),F("connection",` Connection error: ${Ce}`,"error",!1,"Step 5: Connection"),ct!==null||Fe!==null){const mt={};ct!==null&&(mt.closeCode=ct),Fe!==null&&(mt.httpStatusCode=Fe),F("connection",`Extracted error info: ${JSON.stringify(mt,null,2)}`,"debug",!1,"Step 5: Connection")}we&&F("connection",`Error details:
${we}`,"error",!1,"Step 5: Connection"),F("connection",`Connection failed after ${It}ms`,"error",!1,"Step 5: Connection"),F("connection",`Full error: ${JSON.stringify(ft,Object.getOwnPropertyNames(ft),2)}`,"error",!1,"Step 5: Connection"),b(!1)}finally{O(!1)}},Q=()=>{if(M.current)try{M.current.disconnect(),b(!1),S(new Set),F("connection","WebSocket disconnected","info",!1)}catch(ye){F("connection",`Disconnect error: ${ye.message}`,"error",!1)}},J=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("orderbook","Not connected. Please connect first.","error",!1);return}if(!a){F("orderbook","Please select a market first","error",!1);return}const ye=ne=>{F("orderbook",ne,"success",!1)};try{M.current.subscribeOrderbook(a,ye,!0),S(ne=>new Set([...ne,"orderbook"])),F("orderbook",`Subscribed to orderbook for market ${a}`,"success",!1)}catch(ne){F("orderbook",`Subscription error: ${ne.message}`,"error",!1)}},K=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&a)try{M.current.unsubscribeOrderbook(a),S(re=>{const ne=new Set(re);return ne.delete("orderbook"),ne}),F("orderbook","Unsubscribed from orderbook","info",!1)}catch(re){F("orderbook",`Unsubscribe error: ${re.message}`,"error",!1)}},Z=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("trades","Not connected. Please connect first.","error",!1);return}if(!a){F("trades","Please select a market first","error",!1);return}const ye=ne=>{F("trades",ne,"success",!1)};try{M.current.subscribeTrades(a,ye),S(ne=>new Set([...ne,"trades"])),F("trades",`Subscribed to trades for market ${a}`,"success",!1)}catch(ne){F("trades",`Subscription error: ${ne.message}`,"error",!1)}},se=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&a)try{M.current.unsubscribeTrades(a),S(re=>{const ne=new Set(re);return ne.delete("trades"),ne}),F("trades","Unsubscribed from trades","info",!1)}catch(re){F("trades",`Unsubscribe error: ${re.message}`,"error",!1)}},be=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("ticker","Not connected. Please connect first.","error",!1);return}if(!a){F("ticker","Please select a market first","error",!1);return}const ye=ne=>{F("ticker",ne,"success",!1)};try{M.current.subscribeTicker(a,ye),S(ne=>new Set([...ne,"ticker"])),F("ticker",`Subscribed to ticker for market ${a}`,"success",!1)}catch(ne){F("ticker",`Subscription error: ${ne.message}`,"error",!1)}},Oe=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&a)try{M.current.unsubscribeTicker(a),S(re=>{const ne=new Set(re);return ne.delete("ticker"),ne}),F("ticker","Unsubscribed from ticker","info",!1)}catch(re){F("ticker",`Unsubscribe error: ${re.message}`,"error",!1)}},Ke=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("last_price","Not connected. Please connect first.","error",!1);return}if(!a){F("last_price","Please select a market first","error",!1);return}const ye=ne=>{F("last_price",ne,"success",!1)};try{M.current.subscribeLastPrice(a,ye,!0),S(ne=>new Set([...ne,"last_price"])),F("last_price",`Subscribed to last price for market ${a}`,"success",!1)}catch(ne){F("last_price",`Subscription error: ${ne.message}`,"error",!1)}},De=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&a)try{M.current.unsubscribeLastPrice(a),S(re=>{const ne=new Set(re);return ne.delete("last_price"),ne}),F("last_price","Unsubscribed from last price","info",!1)}catch(re){F("last_price",`Unsubscribe error: ${re.message}`,"error",!1)}},Pe=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("user_updates","Not connected. Please connect first.","error",!0);return}if(!z){F("user_updates","Wallet address required for position updates (positions channel)","error",!0);return}const ye=ne=>{F("user_updates",ne,"success",!0)};try{M.current.subscribeUserUpdates(ye),S(ne=>new Set([...ne,"user_updates"])),F("user_updates","Subscribed to user updates (positions, orders, etc.)","success",!0)}catch(ne){F("user_updates",`Subscription error: ${ne.message}`,"error",!0)}},We=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected())try{M.current.unsubscribeUserUpdates(),S(re=>{const ne=new Set(re);return ne.delete("user_updates"),ne}),F("user_updates","Unsubscribed from user updates","info",!0)}catch(re){F("user_updates",`Unsubscribe error: ${re.message}`,"error",!0)}},nt=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("funding_rate","Not connected. Please connect first.","error",!1);return}if(!c){F("funding_rate","Please enter a symbol first","error",!1);return}const ye=ne=>{F("funding_rate",ne,"success",!1)};try{M.current.subscribeFundingRate(c,ye),S(ne=>new Set([...ne,"funding_rate"])),F("funding_rate",`Subscribed to funding rate for ${c}`,"success",!1)}catch(ne){F("funding_rate",`Subscription error: ${ne.message}`,"error",!1)}},U=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&c)try{M.current.unsubscribeFundingRate(c),S(re=>{const ne=new Set(re);return ne.delete("funding_rate"),ne}),F("funding_rate","Unsubscribed from funding rate","info",!1)}catch(re){F("funding_rate",`Unsubscribe error: ${re.message}`,"error",!1)}},_e=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("buckets","Not connected. Please connect first.","error",!0);return}if(!z){F("buckets","Wallet address required for buckets subscription","error",!0);return}const ye=ne=>{F("buckets",ne,"success",!0)};try{M.current.subscribeBuckets(ye),S(ne=>new Set([...ne,"buckets"])),F("buckets","Subscribed to buckets","success",!0)}catch(ne){F("buckets",`Subscription error: ${ne.message}`,"error",!0)}},Ie=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected())try{M.current.unsubscribeBuckets(),S(re=>{const ne=new Set(re);return ne.delete("buckets"),ne}),F("buckets","Unsubscribed from buckets","info",!0)}catch(re){F("buckets",`Unsubscribe error: ${re.message}`,"error",!0)}},me=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("deviation","Not connected. Please connect first.","error",!1);return}if(!c){F("deviation","Please enter a symbol first","error",!1);return}const ye=ne=>{F("deviation",ne,"success",!1)};try{M.current.subscribeDeviation(c,ye),S(ne=>new Set([...ne,"deviation"])),F("deviation",`Subscribed to deviation for ${c}`,"success",!1)}catch(ne){F("deviation",`Subscription error: ${ne.message}`,"error",!1)}},$e=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&c)try{M.current.unsubscribeDeviation(c),S(re=>{const ne=new Set(re);return ne.delete("deviation"),ne}),F("deviation","Unsubscribed from deviation","info",!1)}catch(re){F("deviation",`Unsubscribe error: ${re.message}`,"error",!1)}},ue=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("index_price","Not connected. Please connect first.","error",!1);return}if(!c){F("index_price","Please enter a symbol first","error",!1);return}const ye=ne=>{F("index_price",ne,"success",!1)};try{M.current.subscribeIndexPrice(c,ye),S(ne=>new Set([...ne,"index_price"])),F("index_price",`Subscribed to index price for ${c}`,"success",!1)}catch(ne){F("index_price",`Subscription error: ${ne.message}`,"error",!1)}},ee=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&c)try{M.current.unsubscribeIndexPrice(c),S(re=>{const ne=new Set(re);return ne.delete("index_price"),ne}),F("index_price","Unsubscribed from index price","info",!1)}catch(re){F("index_price",`Unsubscribe error: ${re.message}`,"error",!1)}},le=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("kline","Not connected. Please connect first.","error",!1);return}if(!a){F("kline","Please select a market first","error",!1);return}if(!h){F("kline","Please select an interval first","error",!1);return}const ye=ne=>{if(F("kline",ne,"success",!1),B.current&&ne){const xe={open_time:ne.open_time||ne.timestamp||Date.now(),close_time:ne.close_time,open:ne.open,high:ne.high,low:ne.low,close:ne.close,volume:ne.volume};B.current.updateChart(xe);const ft={time:Math.floor((xe.open_time||Date.now())/1e3),open:typeof xe.open=="string"?it(xe.open):xe.open,high:typeof xe.high=="string"?it(xe.high):xe.high,low:typeof xe.low=="string"?it(xe.low):xe.low,close:typeof xe.close=="string"?it(xe.close):xe.close};$(It=>{const Ce=[...It];return Ce.length===0||Ce[Ce.length-1].time!==ft.time?Ce.push(ft):Ce[Ce.length-1]=ft,Ce})}};try{M.current.subscribeKline(a,h,ye),S(ne=>new Set([...ne,"kline"])),F("kline",`Subscribed to kline for market ${a} with interval ${h}`,"success",!1)}catch(ne){F("kline",`Subscription error: ${ne.message}`,"error",!1)}},te=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&!(!a||!h))try{M.current.unsubscribeKline(a,h),S(re=>{const ne=new Set(re);return ne.delete("kline"),ne}),$([]),F("kline","Unsubscribed from kline","info",!1)}catch(re){F("kline",`Unsubscribe error: ${re.message}`,"error",!1)}},ce=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("mark_price","Not connected. Please connect first.","error",!1);return}if(!c){F("mark_price","Please enter a symbol first","error",!1);return}const ye=ne=>{F("mark_price",ne,"success",!1)};try{M.current.subscribeMarkPrice(c,ye),S(ne=>new Set([...ne,"mark_price"])),F("mark_price",`Subscribed to mark price for ${c}`,"success",!1)}catch(ne){F("mark_price",`Subscription error: ${ne.message}`,"error",!1)}},je=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&c)try{M.current.unsubscribeMarkPrice(c),S(re=>{const ne=new Set(re);return ne.delete("mark_price"),ne}),F("mark_price","Unsubscribed from mark price","info",!1)}catch(re){F("mark_price",`Unsubscribe error: ${re.message}`,"error",!1)}},de=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("price_feed","Not connected. Please connect first.","error",!1);return}if(!c){F("price_feed","Please enter a symbol first","error",!1);return}const ye=ne=>{F("price_feed",ne,"success",!1)};try{M.current.subscribePriceFeed(c,ye),S(ne=>new Set([...ne,"price_feed"])),F("price_feed",`Subscribed to price feed for ${c}`,"success",!1)}catch(ne){F("price_feed",`Subscription error: ${ne.message}`,"error",!1)}},Ae=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&c)try{M.current.unsubscribePriceFeed(c),S(re=>{const ne=new Set(re);return ne.delete("price_feed"),ne}),F("price_feed","Unsubscribed from price feed","info",!1)}catch(re){F("price_feed",`Unsubscribe error: ${re.message}`,"error",!1)}},Le=()=>{var re;if(!((re=M.current)!=null&&re.isConnected())){F("twap","Not connected. Please connect first.","error",!1);return}if(!c){F("twap","Please enter a symbol first","error",!1);return}if(!f||isNaN(Number(f))||Number(f)<=0){F("twap","Please enter a valid window size (positive number in seconds)","error",!1);return}const ye=ne=>{F("twap",ne,"success",!1)};try{M.current.subscribeTWAP(c,Number(f),ye),S(ne=>new Set([...ne,"twap"])),F("twap",`Subscribed to TWAP for ${c} with window size ${f}s`,"success",!1)}catch(ne){F("twap",`Subscription error: ${ne.message}`,"error",!1)}},ve=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&!(!c||!f))try{M.current.unsubscribeTWAP(c,Number(f)),S(re=>{const ne=new Set(re);return ne.delete("twap"),ne}),F("twap","Unsubscribed from TWAP","info",!1)}catch(re){F("twap",`Unsubscribe error: ${re.message}`,"error",!1)}},he=()=>{if(!M.current){F("multi_feed","SubscriptionClient not initialized. Please connect first.","error",!1);return}if(!M.current.isConnected()){F("multi_feed","Not connected. Please connect first.","error",!1);return}if(!a){F("multi_feed","Please select a market first","error",!1);return}if(!c){F("multi_feed","Please enter a symbol first","error",!1);return}if(typeof M.current.subscribeMultiFeed!="function"){F("multi_feed","subscribeMultiFeed method not available. Please check SDK version.","error",!1),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(M.current)));return}const ye=re=>{const ne=re.sub_channel||"unknown";F(`multi_feed:${ne}`,re,"success",ne==="balances"||ne==="buckets"||ne==="orders"||ne==="positions")};try{M.current.subscribeMultiFeed(a,c,ye,h||"1m"),S(re=>new Set([...re,"multi_feed"])),F("multi_feed",`Subscribed to multi-feed for market ${a}, symbol ${c}`,"success",!1)}catch(re){F("multi_feed",`Subscription error: ${re.message}`,"error",!1)}},ge=()=>{var ye;if((ye=M.current)!=null&&ye.isConnected()&&!(!a||!c))try{M.current.unsubscribeMultiFeed(a,c),S(re=>{const ne=new Set(re);return ne.delete("multi_feed"),ne}),F("multi_feed","Unsubscribed from multi-feed","info",!1)}catch(re){F("multi_feed",`Unsubscribe error: ${re.message}`,"error",!1)}},pe=()=>{if(!M.current){F("balances","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!M.current.isConnected()){F("balances","Not connected. Please connect first.","error",!0);return}if(!z){F("balances","Wallet address required for balances subscription","error",!0);return}if(typeof M.current.subscribeBalances!="function"){F("balances","subscribeBalances method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(M.current)));return}const ye=re=>{F("balances",re,"success",!0)};try{M.current.subscribeBalances(ye),S(re=>new Set([...re,"balances"])),F("balances","Subscribed to balances","success",!0)}catch(re){F("balances",`Subscription error: ${re.message}`,"error",!0)}},fe=()=>{if(M.current&&M.current.isConnected()){if(typeof M.current.unsubscribeBalances!="function"){F("balances","unsubscribeBalances method not available. Please check SDK version.","error",!0);return}try{M.current.unsubscribeBalances(),S(ye=>{const re=new Set(ye);return re.delete("balances"),re}),F("balances","Unsubscribed from balances","info",!0)}catch(ye){F("balances",`Unsubscribe error: ${ye.message}`,"error",!0)}}},Re=()=>{if(!M.current){F("orders","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!M.current.isConnected()){F("orders","Not connected. Please connect first.","error",!0);return}if(!z){F("orders","Wallet address required for orders subscription","error",!0);return}if(typeof M.current.subscribeOrders!="function"){F("orders","subscribeOrders method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(M.current)));return}const ye=re=>{F("orders",re,"success",!0)};try{M.current.subscribeOrders(ye),S(re=>new Set([...re,"orders"])),F("orders","Subscribed to orders","success",!0)}catch(re){F("orders",`Subscription error: ${re.message}`,"error",!0)}},Ve=()=>{if(M.current&&M.current.isConnected()){if(typeof M.current.unsubscribeOrders!="function"){F("orders","unsubscribeOrders method not available. Please check SDK version.","error",!0);return}try{M.current.unsubscribeOrders(),S(ye=>{const re=new Set(ye);return re.delete("orders"),re}),F("orders","Unsubscribed from orders","info",!0)}catch(ye){F("orders",`Unsubscribe error: ${ye.message}`,"error",!0)}}},Xe=ye=>{ye?k([]):v([])};return D.useEffect(()=>()=>{if(M.current)try{M.current.disconnect()}catch{}},[]),m.jsxs("div",{className:"ws-test-page",children:[m.jsx("h1",{children:"WebSocket QA"}),m.jsx("p",{children:"Test WebSocket subscriptions for public and private channels"}),m.jsx(hve,{steps:C}),m.jsx(fve,{wsURL:n,onWsURLChange:e,marketId:a,onMarketIdChange:l,markets:q,symbol:c,onSymbolChange:u,klineInterval:h,onKlineIntervalChange:d,twapWindowSize:f,onTwapWindowSizeChange:p,authToken:r,onAuthTokenChange:i,walletAddress:z,deviceID:s,onDeviceIDChange:o,isConnected:g,isConnecting:P,onConnect:A,onDisconnect:Q}),m.jsxs("div",{className:"ws-test-page-layout",children:[m.jsxs(Jj,{title:"WebSocket Public",isPrivate:!1,messages:y,onClearMessages:()=>Xe(!1),children:[m.jsxs("div",{className:"channel-buttons-row",children:[m.jsx(Tr,{channel:"orderbook",isSubscribed:_.has("orderbook"),isConnected:g,subscribeLabel:"Subscribe Orderbook",unsubscribeLabel:"Unsubscribe Orderbook",onSubscribe:J,onUnsubscribe:K}),m.jsx(Tr,{channel:"trades",isSubscribed:_.has("trades"),isConnected:g,subscribeLabel:"Subscribe Trades",unsubscribeLabel:"Unsubscribe Trades",onSubscribe:Z,onUnsubscribe:se}),m.jsx(Tr,{channel:"ticker",isSubscribed:_.has("ticker"),isConnected:g,subscribeLabel:"Subscribe Ticker",unsubscribeLabel:"Unsubscribe Ticker",onSubscribe:be,onUnsubscribe:Oe}),m.jsx(Tr,{channel:"last_price",isSubscribed:_.has("last_price"),isConnected:g,subscribeLabel:"Subscribe Last Price",unsubscribeLabel:"Unsubscribe Last Price",onSubscribe:Ke,onUnsubscribe:De}),m.jsx(Tr,{channel:"funding_rate",isSubscribed:_.has("funding_rate"),isConnected:g,subscribeLabel:"Subscribe Funding Rate",unsubscribeLabel:"Unsubscribe Funding Rate",onSubscribe:nt,onUnsubscribe:U}),m.jsx(Tr,{channel:"deviation",isSubscribed:_.has("deviation"),isConnected:g,subscribeLabel:"Subscribe Deviation",unsubscribeLabel:"Unsubscribe Deviation",onSubscribe:me,onUnsubscribe:$e}),m.jsx(Tr,{channel:"index_price",isSubscribed:_.has("index_price"),isConnected:g,subscribeLabel:"Subscribe Index Price",unsubscribeLabel:"Unsubscribe Index Price",onSubscribe:ue,onUnsubscribe:ee}),m.jsx(Tr,{channel:"kline",isSubscribed:_.has("kline"),isConnected:g,subscribeLabel:"Subscribe Kline",unsubscribeLabel:"Unsubscribe Kline",onSubscribe:le,onUnsubscribe:te})]}),_.has("kline")&&m.jsx("div",{style:{marginTop:"20px",marginBottom:"20px"},children:m.jsx(GJ,{ref:B,initialData:L,symbol:c||"BTC/USDC",height:500,showVolume:!0})}),m.jsxs("div",{className:"channel-buttons-row",children:[m.jsx(Tr,{channel:"mark_price",isSubscribed:_.has("mark_price"),isConnected:g,subscribeLabel:"Subscribe Mark Price",unsubscribeLabel:"Unsubscribe Mark Price",onSubscribe:ce,onUnsubscribe:je}),m.jsx(Tr,{channel:"price_feed",isSubscribed:_.has("price_feed"),isConnected:g,subscribeLabel:"Subscribe Price Feed",unsubscribeLabel:"Unsubscribe Price Feed",onSubscribe:de,onUnsubscribe:Ae}),m.jsx(Tr,{channel:"twap",isSubscribed:_.has("twap"),isConnected:g,subscribeLabel:"Subscribe TWAP",unsubscribeLabel:"Unsubscribe TWAP",onSubscribe:Le,onUnsubscribe:ve}),m.jsx(Tr,{channel:"multi_feed",isSubscribed:_.has("multi_feed"),isConnected:g,subscribeLabel:"Subscribe Multi-Feed",unsubscribeLabel:"Unsubscribe Multi-Feed",onSubscribe:he,onUnsubscribe:ge})]}),m.jsx("small",{className:"private-note-text-block",style:{marginTop:"10px"},children:"Multi-Feed: Unified channel streaming all sub-channels (orderbook, trades, positions, balances, orders, buckets, etc.) Requires market ID and symbol. Authenticated sub-channels (balances, orders, positions, buckets) require wallet address."})]}),m.jsxs(Jj,{title:"WebSocket Private",isPrivate:!0,messages:w,onClearMessages:()=>Xe(!0),children:[m.jsx(Tr,{channel:"user_updates",isSubscribed:_.has("user_updates"),isConnected:g,disabled:!z,subscribeLabel:"Subscribe User Updates",unsubscribeLabel:"Unsubscribe User Updates",onSubscribe:Pe,onUnsubscribe:We,variant:"private"}),m.jsx("small",{className:"private-note-text",children:"Position updates (positions channel): Requires wallet address. Returns user positions."}),m.jsx(Tr,{channel:"buckets",isSubscribed:_.has("buckets"),isConnected:g,disabled:!z,subscribeLabel:"Subscribe Buckets",unsubscribeLabel:"Unsubscribe Buckets",onSubscribe:_e,onUnsubscribe:Ie,variant:"private"}),m.jsx("small",{className:"private-note-text-block",children:"Buckets: User's margin buckets (requires wallet address)"}),m.jsx(Tr,{channel:"balances",isSubscribed:_.has("balances"),isConnected:g,disabled:!z,subscribeLabel:"Subscribe Balances",unsubscribeLabel:"Unsubscribe Balances",onSubscribe:pe,onUnsubscribe:fe,variant:"private"}),m.jsx("small",{className:"private-note-text-block",children:"Balances: User's spot balances (USDC, MORM, BTC, etc.) - requires wallet address"}),m.jsx(Tr,{channel:"orders",isSubscribed:_.has("orders"),isConnected:g,disabled:!z,subscribeLabel:"Subscribe Orders",unsubscribeLabel:"Unsubscribe Orders",onSubscribe:Re,onUnsubscribe:Ve,variant:"private"}),m.jsx("small",{className:"private-note-text-block",children:"Orders: User's open orders - requires wallet address"})]})]})]})}function _A({top:n,left:e,width:r,height:i}){const s=`translate(${e}px,${n}px)`;return{transform:s,WebkitTransform:s,MozTransform:s,msTransform:s,OTransform:s,width:`${r}px`,height:`${i}px`,position:"absolute"}}function KJ({top:n,left:e,width:r,height:i}){return{top:`${n}px`,left:`${e}px`,width:`${r}px`,height:`${i}px`,position:"absolute"}}function VL(n){return n*100+"%"}function Eye(n,e,r,i){return n+r>i?e:r}function XJ(n,e,r){return n<0?e:r}function Tye(n){return Math.max(0,n)}function px(n){return Math.max(0,n)}var SA=(n,e,r)=>{const{left:i,height:s,width:o}=e,a=n.top-(s-n.height);return{left:i,width:o,height:XJ(a,n.height,s),top:px(a)}},kA=(n,e,r)=>{const{top:i,left:s,height:o,width:a}=e;return{top:i,height:o,width:Eye(n.left,n.width,a,r),left:Tye(s)}},CA=(n,e,r)=>{const{top:i,height:s,width:o}=e,a=n.left+n.width-o;return a<0?{height:s,width:n.left+n.width,top:px(i),left:0}:{height:s,width:o,top:px(i),left:a}},EA=(n,e,r)=>{const{top:i,left:s,height:o,width:a}=e;return{width:a,left:s,height:XJ(i,n.height,o),top:px(i)}},Pye=(n,e,r)=>SA(n,kA(n,e,r)),Mye=(n,e,r)=>SA(n,CA(n,e)),Dye=(n,e,r)=>EA(n,kA(n,e,r)),Oye=(n,e,r)=>EA(n,CA(n,e)),Iye={n:SA,ne:Pye,e:kA,se:Dye,s:EA,sw:Oye,w:CA,nw:Mye};function Rye(n,e,r,i){const s=Iye[n];return s?s(e,{...e,...r},i):r}var QJ={type:"transform",scale:1,calcStyle(n){return _A(n)},calcDragPosition(n,e,r,i){return{left:n-r,top:e-i}}},Aye={type:"absolute",scale:1,calcStyle(n){return KJ(n)},calcDragPosition(n,e,r,i){return{left:n-r,top:e-i}}};function Nye(n){return{type:"transform",scale:n,calcStyle(e){return _A(e)},calcDragPosition(e,r,i,s){return{left:(e-i)/n,top:(r-s)/n}}}}var jye=QJ,Lye={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},Fye={enabled:!0,bounded:!1,threshold:3},$ye={enabled:!0,handles:["se"]},zye={enabled:!1,defaultItem:{w:1,h:1}};function Yw(n,e){return!(n.i===e.i||n.x+n.w<=e.x||n.x>=e.x+e.w||n.y+n.h<=e.y||n.y>=e.y+e.h)}function Bs(n,e){for(let r=0;r<n.length;r++){const i=n[r];if(i!==void 0&&Yw(i,e))return i}}function JJ(n,e){return n.filter(r=>Yw(r,e))}function ZJ(n,e){return e==="horizontal"?tZ(n):e==="vertical"?eZ(n):[...n]}function eZ(n){return[...n].sort((e,r)=>e.y!==r.y?e.y-r.y:e.x-r.x)}function tZ(n){return[...n].sort((e,r)=>e.x!==r.x?e.x-r.x:e.y-r.y)}function Mf(n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];if(i!==void 0){const s=i.y+i.h;s>e&&(e=s)}}return e}function Sc(n,e){for(let r=0;r<n.length;r++){const i=n[r];if(i!==void 0&&i.i===e)return i}}function TA(n){return n.filter(e=>e.static===!0)}function Vl(n){return{i:n.i,x:n.x,y:n.y,w:n.w,h:n.h,minW:n.minW,maxW:n.maxW,minH:n.minH,maxH:n.maxH,moved:!!n.moved,static:!!n.static,isDraggable:n.isDraggable,isResizable:n.isResizable,resizeHandles:n.resizeHandles,isBounded:n.isBounded}}function Gs(n){const e=new Array(n.length);for(let r=0;r<n.length;r++){const i=n[r];i!==void 0&&(e[r]=Vl(i))}return e}function Bye(n,e){const r=new Array(n.length);for(let i=0;i<n.length;i++){const s=n[i];s!==void 0&&(e.i===s.i?r[i]=e:r[i]=s)}return r}function Uye(n,e,r){let i=Sc(n,e);return i?(i=r(Vl(i)),[Bye(n,i),i]):[[...n],null]}function PA(n,e){const r=TA(n);for(let i=0;i<n.length;i++){const s=n[i];if(s!==void 0)if(s.x+s.w>e.cols&&(s.x=e.cols-s.w),s.x<0&&(s.x=0,s.w=e.cols),!s.static)r.push(s);else for(;Bs(r,s);)s.y++}return n}function Lc(n,e,r,i,s,o,a,l,c){if(e.static&&e.isDraggable!==!0)return[...n];if(e.y===i&&e.x===r)return[...n];const u=e.x,h=e.y;typeof r=="number"&&(e.x=r),typeof i=="number"&&(e.y=i),e.moved=!0;let d=ZJ(n,a);(a==="vertical"&&typeof i=="number"?h>=i:a==="horizontal"&&typeof r=="number"?u>=r:!1)&&(d=d.reverse());const p=JJ(d,e),g=p.length>0;if(g&&c)return Gs(n);if(g&&o)return e.x=u,e.y=h,e.moved=!1,n;let b=[...n];for(let y=0;y<p.length;y++){const v=p[y];v!==void 0&&(v.moved||(v.static?b=YL(b,v,e,s,a):b=YL(b,e,v,s,a)))}return b}function YL(n,e,r,i,s,o){const a=s==="horizontal",l=s==="vertical",c=e.static;if(i){i=!1;const d={x:a?Math.max(e.x-r.w,0):r.x,y:l?Math.max(e.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},f=Bs(n,d),p=f!==void 0&&f.y+f.h>e.y,g=f!==void 0&&e.x+e.w>f.x;if(!f)return Lc(n,r,a?d.x:void 0,l?d.y:void 0,i,c,s);if(p&&l)return Lc(n,r,void 0,r.y+1,i,c,s);if(p&&s===null)return e.y=r.y,r.y=r.y+r.h,[...n];if(g&&a)return Lc(n,e,r.x,void 0,i,c,s)}const u=a?r.x+1:void 0,h=l?r.y+1:void 0;return u===void 0&&h===void 0?[...n]:Lc(n,r,u,h,i,c,s)}function qye(n){return n.filter(e=>e.static)}var Wye={x:"w",y:"h"};function cO(n,e,r,i){const s=Wye[i];e[i]+=1;const o=n.findIndex(a=>a.i===e.i);for(let a=o+1;a<n.length;a++){const l=n[a];if(l!==void 0&&!l.static){if(l.y>e.y+e.h)break;Yw(e,l)&&cO(n,l,r+e[s],i)}}e[i]=r}function Hye(n,e,r,i,s,o,a){const l=r==="vertical",c=r==="horizontal";if(l)for(typeof a=="number"?e.y=Math.min(a,e.y):e.y=Math.min(Mf(n),e.y);e.y>0&&!Bs(n,e);)e.y--;else if(c)for(;e.x>0&&!Bs(n,e);)e.x--;let u;for(;(u=Bs(n,e))!==void 0&&!(r===null&&o);)if(c?cO(s,e,u.x+u.w,"x"):cO(s,e,u.y+u.h,"y"),c&&e.x+e.w>i)for(e.x=i-e.w,e.y++;e.x>0&&!Bs(n,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function da(n,e,r,i){const s=qye(n);let o=Mf(s);const a=ZJ(n,e),l=new Array(n.length);for(let c=0;c<a.length;c++){const u=a[c];if(u===void 0)continue;let h=Vl(u);h.static||(h=Hye(s,h,e,r,a,i,o),o=Math.max(o,h.y+h.h),s.push(h));const d=n.indexOf(u);l[d]=h,h.moved=!1}return l}function MA(n,e,r,i){const s=i==="x"?"w":"h";e[i]+=1;const o=n.findIndex(a=>a.i===e.i);for(let a=o+1;a<n.length;a++){const l=n[a];if(l!==void 0&&!l.static){if(l.y>e.y+e.h)break;Yw(e,l)&&MA(n,l,r+e[s],i)}}e[i]=r}function Vye(n,e,r,i){for(e.y=Math.min(i,e.y);e.y>0&&!Bs(n,e);)e.y--;let s;for(;(s=Bs(n,e))!==void 0;)MA(r,e,s.y+s.h,"y");return e.y=Math.max(e.y,0),e}function Yye(n,e,r,i){for(;e.x>0&&!Bs(n,e);)e.x--;let s;for(;(s=Bs(n,e))!==void 0;)if(MA(i,e,s.x+s.w,"x"),e.x+e.w>r)for(e.x=r-e.w,e.y++;e.x>0&&!Bs(n,e);)e.x--;return e.x=Math.max(e.x,0),e}var nZ={type:"vertical",allowOverlap:!1,compact(n,e){const r=TA(n);let i=Mf(r);const s=eZ(n),o=new Array(n.length);for(let a=0;a<s.length;a++){const l=s[a];if(l===void 0)continue;let c=Vl(l);c.static||(c=Vye(r,c,s,i),i=Math.max(i,c.y+c.h),r.push(c));const u=n.indexOf(l);o[u]=c,c.moved=!1}return o},onMove(n,e,r,i,s){const o=Gs(n),a=o.find(l=>l.i===e.i);return a&&(a.x=r,a.y=i,a.moved=!0),o}},rZ={type:"horizontal",allowOverlap:!1,compact(n,e){const r=TA(n),i=tZ(n),s=new Array(n.length);for(let o=0;o<i.length;o++){const a=i[o];if(a===void 0)continue;let l=Vl(a);l.static||(l=Yye(r,l,e,i),r.push(l));const c=n.indexOf(a);s[c]=l,l.moved=!1}return s},onMove(n,e,r,i,s){const o=Gs(n),a=o.find(l=>l.i===e.i);return a&&(a.x=r,a.y=i,a.moved=!0),o}},GL={type:null,allowOverlap:!1,compact(n,e){return Gs(n)},onMove(n,e,r,i,s){const o=Gs(n),a=o.find(l=>l.i===e.i);return a&&(a.x=r,a.y=i,a.moved=!0),o}},Gye={...nZ,allowOverlap:!0,compact(n,e){return Gs(n)}},Kye={...rZ,allowOverlap:!0,compact(n,e){return Gs(n)}};function DA(n,e=!1,r=!1){let i;return e?n==="vertical"?i=Gye:n==="horizontal"?i=Kye:i=GL:n==="vertical"?i=nZ:n==="horizontal"?i=rZ:i=GL,r?{...i,preventCollision:r}:i}function iZ(n){return Object.keys(n).sort((r,i)=>n[r]-n[i])}function KL(n,e){const r=iZ(n);let i=r[0];if(i===void 0)throw new Error("No breakpoints defined");for(let s=1;s<r.length;s++){const o=r[s];if(o===void 0)continue;const a=n[o];e>a&&(i=o)}return i}function XL(n,e){const r=e[n];if(r===void 0)throw new Error(`ResponsiveReactGridLayout: \`cols\` entry for breakpoint ${String(n)} is missing!`);return r}function OS(n,e,r,i,s,o){const a=n[r];if(a)return Gs(a);let l=n[i];const c=iZ(e),u=c.slice(c.indexOf(r));for(let d=0;d<u.length;d++){const f=u[d];if(f===void 0)continue;const p=n[f];if(p){l=p;break}}const h=Gs(l||[]);return da(PA(h,{cols:s}),o,s)}function ib(n,e){if(Array.isArray(n))return n;const r=n,i=r[e];if(i!==void 0)return i;const s=Object.keys(r);for(const o of s){const a=r[o];if(a!==void 0)return a}return[10,10]}function Gw(n){const{margin:e,containerPadding:r,containerWidth:i,cols:s}=n;return(i-e[0]*(s-1)-r[0]*2)/s}function mx(n,e,r){return Number.isFinite(n)?Math.round(e*n+Math.max(0,n-1)*r):n}function mc(n,e,r,i,s,o,a){const{margin:l,containerPadding:c,rowHeight:u}=n,h=Gw(n);let d,f,p,g;return a?(d=Math.round(a.width),f=Math.round(a.height)):(d=mx(i,h,l[0]),f=mx(s,u,l[1])),o?(p=Math.round(o.top),g=Math.round(o.left)):a?(p=Math.round(a.top),g=Math.round(a.left)):(p=Math.round((u+l[1])*r+c[1]),g=Math.round((h+l[0])*e+c[0])),{top:p,left:g,width:d,height:f}}function cy(n,e,r,i,s){const{margin:o,containerPadding:a,cols:l,rowHeight:c,maxRows:u}=n,h=Gw(n);let d=Math.round((r-a[0])/(h+o[0])),f=Math.round((e-a[1])/(c+o[1]));return d=wo(d,0,l-i),f=wo(f,0,u-s),{x:d,y:f}}function Xye(n,e,r,i,s,o){const{margin:a,maxRows:l,cols:c,rowHeight:u}=n,h=Gw(n),d=Math.round((e+a[0])/(h+a[0])),f=Math.round((r+a[1])/(u+a[1]));let p=wo(d,0,c-i),g=wo(f,0,l-s);return(o==="sw"||o==="w"||o==="nw")&&(p=wo(d,0,c)),(o==="nw"||o==="n"||o==="ne")&&(g=wo(f,0,l)),{w:p,h:g}}function wo(n,e,r){return Math.max(Math.min(n,r),e)}var Kw={exports:{}},sZ={},oZ={exports:{}},Qye="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Jye=Qye,Zye=Jye;function aZ(){}function lZ(){}lZ.resetWarningCache=aZ;var exe=function(){function n(i,s,o,a,l,c){if(c!==Zye){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:lZ,resetWarningCache:aZ};return r.PropTypes=r,r};oZ.exports=exe();var x0=oZ.exports;const ae=iw(x0);function cZ(n){var e,r,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(r=cZ(n[e]))&&(i&&(i+=" "),i+=r)}else for(r in n)n[r]&&(i&&(i+=" "),i+=r);return i}function Mg(){for(var n,e,r=0,i="",s=arguments.length;r<s;r++)(n=arguments[r])&&(e=cZ(n))&&(i&&(i+=" "),i+=e);return i}const txe=Object.freeze(Object.defineProperty({__proto__:null,clsx:Mg,default:Mg},Symbol.toStringTag,{value:"Module"})),nxe=Iae(txe);var jn={},Io={};Object.defineProperty(Io,"__esModule",{value:!0});Io.dontSetMe=axe;Io.findInArray=rxe;Io.int=oxe;Io.isFunction=ixe;Io.isNum=sxe;function rxe(n,e){for(let r=0,i=n.length;r<i;r++)if(e.apply(e,[n[r],r,n]))return n[r]}function ixe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function sxe(n){return typeof n=="number"&&!isNaN(n)}function oxe(n){return parseInt(n,10)}function axe(n,e,r){if(n[e])return new Error(`Invalid prop ${e} passed to ${r} - do not set this, set it on the child.`)}var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.browserPrefixToKey=dZ;Uu.browserPrefixToStyle=lxe;Uu.default=void 0;Uu.getPrefix=uZ;const IS=["Moz","Webkit","O","ms"];function uZ(){var r,i;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(i=(r=window.document)==null?void 0:r.documentElement)==null?void 0:i.style;if(!e||n in e)return"";for(let s=0;s<IS.length;s++)if(dZ(n,IS[s])in e)return IS[s];return""}function dZ(n,e){return e?`${e}${cxe(n)}`:n}function lxe(n,e){return e?`-${e.toLowerCase()}-${n}`:n}function cxe(n){let e="",r=!0;for(let i=0;i<n.length;i++)r?(e+=n[i].toUpperCase(),r=!1):n[i]==="-"?r=!0:e+=n[i];return e}Uu.default=uZ();Object.defineProperty(jn,"__esModule",{value:!0});jn.addClassName=pZ;jn.addEvent=dxe;jn.addUserSelectStyles=_xe;jn.createCSSTransform=bxe;jn.createSVGTransform=yxe;jn.getTouch=xxe;jn.getTouchIdentifier=wxe;jn.getTranslation=OA;jn.innerHeight=mxe;jn.innerWidth=gxe;jn.matchesSelector=fZ;jn.matchesSelectorAndParentsTo=uxe;jn.offsetXYFromParent=vxe;jn.outerHeight=fxe;jn.outerWidth=pxe;jn.removeClassName=mZ;jn.removeEvent=hxe;jn.scheduleRemoveUserSelectStyles=Sxe;var zi=Io,QL=hZ(Uu);function hZ(n,e){if(typeof WeakMap=="function")var r=new WeakMap,i=new WeakMap;return(hZ=function(s,o){if(!o&&s&&s.__esModule)return s;var a,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(a=o?i:r){if(a.has(s))return a.get(s);a.set(s,c)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((l=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(l.get||l.set)?a(c,u,l):c[u]=s[u]);return c})(n,e)}let sb="";function fZ(n,e){return sb||(sb=(0,zi.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,zi.isFunction)(n[r])})),(0,zi.isFunction)(n[sb])?n[sb](e):!1}function uxe(n,e,r){let i=n;do{if(fZ(i,e))return!0;if(i===r)return!1;i=i.parentNode}while(i);return!1}function dxe(n,e,r,i){if(!n)return;const s={capture:!0,...i};n.addEventListener?n.addEventListener(e,r,s):n.attachEvent?n.attachEvent("on"+e,r):n["on"+e]=r}function hxe(n,e,r,i){if(!n)return;const s={capture:!0,...i};n.removeEventListener?n.removeEventListener(e,r,s):n.detachEvent?n.detachEvent("on"+e,r):n["on"+e]=null}function fxe(n){let e=n.clientHeight;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,zi.int)(r.borderTopWidth),e+=(0,zi.int)(r.borderBottomWidth),e}function pxe(n){let e=n.clientWidth;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,zi.int)(r.borderLeftWidth),e+=(0,zi.int)(r.borderRightWidth),e}function mxe(n){let e=n.clientHeight;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,zi.int)(r.paddingTop),e-=(0,zi.int)(r.paddingBottom),e}function gxe(n){let e=n.clientWidth;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,zi.int)(r.paddingLeft),e-=(0,zi.int)(r.paddingRight),e}function vxe(n,e,r){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),o=(n.clientX+e.scrollLeft-s.left)/r,a=(n.clientY+e.scrollTop-s.top)/r;return{x:o,y:a}}function bxe(n,e){const r=OA(n,e,"px");return{[(0,QL.browserPrefixToKey)("transform",QL.default)]:r}}function yxe(n,e){return OA(n,e,"")}function OA(n,e,r){let{x:i,y:s}=n,o=`translate(${i}${r},${s}${r})`;if(e){const a=`${typeof e.x=="string"?e.x:e.x+r}`,l=`${typeof e.y=="string"?e.y:e.y+r}`;o=`translate(${a}, ${l})`+o}return o}function xxe(n,e){return n.targetTouches&&(0,zi.findInArray)(n.targetTouches,r=>e===r.identifier)||n.changedTouches&&(0,zi.findInArray)(n.changedTouches,r=>e===r.identifier)}function wxe(n){if(n.targetTouches&&n.targetTouches[0])return n.targetTouches[0].identifier;if(n.changedTouches&&n.changedTouches[0])return n.changedTouches[0].identifier}function _xe(n){if(!n)return;let e=n.getElementById("react-draggable-style-el");e||(e=n.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,n.getElementsByTagName("head")[0].appendChild(e)),n.body&&pZ(n.body,"react-draggable-transparent-selection")}function Sxe(n){window.requestAnimationFrame?window.requestAnimationFrame(()=>{JL(n)}):JL(n)}function JL(n){if(n)try{if(n.body&&mZ(n.body,"react-draggable-transparent-selection"),n.selection)n.selection.empty();else{const e=(n.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function pZ(n,e){n.classList?n.classList.add(e):n.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(n.className+=` ${e}`)}function mZ(n,e){n.classList?n.classList.remove(e):n.className=n.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.canDragX=Exe;Ro.canDragY=Txe;Ro.createCoreData=Mxe;Ro.createDraggableData=Dxe;Ro.getBoundPosition=kxe;Ro.getControlPosition=Pxe;Ro.snapToGrid=Cxe;var Ti=Io,zd=jn;function kxe(n,e,r){if(!n.props.bounds)return[e,r];let{bounds:i}=n.props;i=typeof i=="string"?i:Oxe(i);const s=IA(n);if(typeof i=="string"){const{ownerDocument:o}=s,a=o.defaultView;let l;if(i==="parent"?l=s.parentNode:l=s.getRootNode().querySelector(i),!(l instanceof a.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');const c=l,u=a.getComputedStyle(s),h=a.getComputedStyle(c);i={left:-s.offsetLeft+(0,Ti.int)(h.paddingLeft)+(0,Ti.int)(u.marginLeft),top:-s.offsetTop+(0,Ti.int)(h.paddingTop)+(0,Ti.int)(u.marginTop),right:(0,zd.innerWidth)(c)-(0,zd.outerWidth)(s)-s.offsetLeft+(0,Ti.int)(h.paddingRight)-(0,Ti.int)(u.marginRight),bottom:(0,zd.innerHeight)(c)-(0,zd.outerHeight)(s)-s.offsetTop+(0,Ti.int)(h.paddingBottom)-(0,Ti.int)(u.marginBottom)}}return(0,Ti.isNum)(i.right)&&(e=Math.min(e,i.right)),(0,Ti.isNum)(i.bottom)&&(r=Math.min(r,i.bottom)),(0,Ti.isNum)(i.left)&&(e=Math.max(e,i.left)),(0,Ti.isNum)(i.top)&&(r=Math.max(r,i.top)),[e,r]}function Cxe(n,e,r){const i=Math.round(e/n[0])*n[0],s=Math.round(r/n[1])*n[1];return[i,s]}function Exe(n){return n.props.axis==="both"||n.props.axis==="x"}function Txe(n){return n.props.axis==="both"||n.props.axis==="y"}function Pxe(n,e,r){const i=typeof e=="number"?(0,zd.getTouch)(n,e):null;if(typeof e=="number"&&!i)return null;const s=IA(r),o=r.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,zd.offsetXYFromParent)(i||n,o,r.props.scale)}function Mxe(n,e,r){const i=!(0,Ti.isNum)(n.lastX),s=IA(n);return i?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:r,x:e,y:r}:{node:s,deltaX:e-n.lastX,deltaY:r-n.lastY,lastX:n.lastX,lastY:n.lastY,x:e,y:r}}function Dxe(n,e){const r=n.props.scale;return{node:e.node,x:n.state.x+e.deltaX/r,y:n.state.y+e.deltaY/r,deltaX:e.deltaX/r,deltaY:e.deltaY/r,lastX:n.state.x,lastY:n.state.y}}function Oxe(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function IA(n){const e=n.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var Xw={},Qw={};Object.defineProperty(Qw,"__esModule",{value:!0});Qw.default=Ixe;function Ixe(){}Object.defineProperty(Xw,"__esModule",{value:!0});Xw.default=void 0;var RS=gZ(D),$r=RA(x0),Rxe=RA(Ql),Pr=jn,Qa=Ro,AS=Io,wp=RA(Qw);function RA(n){return n&&n.__esModule?n:{default:n}}function gZ(n,e){if(typeof WeakMap=="function")var r=new WeakMap,i=new WeakMap;return(gZ=function(s,o){if(!o&&s&&s.__esModule)return s;var a,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(a=o?i:r){if(a.has(s))return a.get(s);a.set(s,c)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((l=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(l.get||l.set)?a(c,u,l):c[u]=s[u]);return c})(n,e)}function zr(n,e,r){return(e=Axe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Axe(n){var e=Nxe(n,"string");return typeof e=="symbol"?e:e+""}function Nxe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const Ps={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ja=Ps.mouse,Jw=class extends RS.Component{constructor(){super(...arguments),zr(this,"dragging",!1),zr(this,"lastX",NaN),zr(this,"lastY",NaN),zr(this,"touchIdentifier",null),zr(this,"mounted",!1),zr(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:i}=r;if(this.props.disabled||!(e.target instanceof i.defaultView.Node)||this.props.handle&&!(0,Pr.matchesSelectorAndParentsTo)(e.target,this.props.handle,r)||this.props.cancel&&(0,Pr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,r))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,Pr.getTouchIdentifier)(e);this.touchIdentifier=s;const o=(0,Qa.getControlPosition)(e,s,this);if(o==null)return;const{x:a,y:l}=o,c=(0,Qa.createCoreData)(this,a,l);(0,wp.default)("DraggableCore: handleDragStart: %j",c),(0,wp.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Pr.addUserSelectStyles)(i),this.dragging=!0,this.lastX=a,this.lastY=l,(0,Pr.addEvent)(i,Ja.move,this.handleDrag),(0,Pr.addEvent)(i,Ja.stop,this.handleDragStop))}),zr(this,"handleDrag",e=>{const r=(0,Qa.getControlPosition)(e,this.touchIdentifier,this);if(r==null)return;let{x:i,y:s}=r;if(Array.isArray(this.props.grid)){let l=i-this.lastX,c=s-this.lastY;if([l,c]=(0,Qa.snapToGrid)(this.props.grid,l,c),!l&&!c)return;i=this.lastX+l,s=this.lastY+c}const o=(0,Qa.createCoreData)(this,i,s);if((0,wp.default)("DraggableCore: handleDrag: %j",o),this.props.onDrag(e,o)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=i,this.lastY=s}),zr(this,"handleDragStop",e=>{if(!this.dragging)return;const r=(0,Qa.getControlPosition)(e,this.touchIdentifier,this);if(r==null)return;let{x:i,y:s}=r;if(Array.isArray(this.props.grid)){let c=i-this.lastX||0,u=s-this.lastY||0;[c,u]=(0,Qa.snapToGrid)(this.props.grid,c,u),i=this.lastX+c,s=this.lastY+u}const o=(0,Qa.createCoreData)(this,i,s);if(this.props.onStop(e,o)===!1||this.mounted===!1)return!1;const l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,Pr.scheduleRemoveUserSelectStyles)(l.ownerDocument),(0,wp.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,wp.default)("DraggableCore: Removing handlers"),(0,Pr.removeEvent)(l.ownerDocument,Ja.move,this.handleDrag),(0,Pr.removeEvent)(l.ownerDocument,Ja.stop,this.handleDragStop))}),zr(this,"onMouseDown",e=>(Ja=Ps.mouse,this.handleDragStart(e))),zr(this,"onMouseUp",e=>(Ja=Ps.mouse,this.handleDragStop(e))),zr(this,"onTouchStart",e=>(Ja=Ps.touch,this.handleDragStart(e))),zr(this,"onTouchEnd",e=>(Ja=Ps.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Pr.addEvent)(e,Ps.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:r}=e;(0,Pr.removeEvent)(r,Ps.mouse.move,this.handleDrag),(0,Pr.removeEvent)(r,Ps.touch.move,this.handleDrag),(0,Pr.removeEvent)(r,Ps.mouse.stop,this.handleDragStop),(0,Pr.removeEvent)(r,Ps.touch.stop,this.handleDragStop),(0,Pr.removeEvent)(e,Ps.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Pr.scheduleRemoveUserSelectStyles)(r)}}findDOMNode(){var e,r,i;return(e=this.props)!=null&&e.nodeRef?(i=(r=this.props)==null?void 0:r.nodeRef)==null?void 0:i.current:Rxe.default.findDOMNode(this)}render(){return RS.cloneElement(RS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Xw.default=Jw;zr(Jw,"displayName","DraggableCore");zr(Jw,"propTypes",{allowAnyClick:$r.default.bool,allowMobileScroll:$r.default.bool,children:$r.default.node.isRequired,disabled:$r.default.bool,enableUserSelectHack:$r.default.bool,offsetParent:function(n,e){if(n[e]&&n[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:$r.default.arrayOf($r.default.number),handle:$r.default.string,cancel:$r.default.string,nodeRef:$r.default.object,onStart:$r.default.func,onDrag:$r.default.func,onStop:$r.default.func,onMouseDown:$r.default.func,scale:$r.default.number,className:AS.dontSetMe,style:AS.dontSetMe,transform:AS.dontSetMe});zr(Jw,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),n.default=void 0;var e=d(D),r=h(x0),i=h(Ql),s=nxe,o=jn,a=Ro,l=Io,c=h(Xw),u=h(Qw);function h(v){return v&&v.__esModule?v:{default:v}}function d(v,w){if(typeof WeakMap=="function")var k=new WeakMap,_=new WeakMap;return(d=function(S,C){if(!C&&S&&S.__esModule)return S;var E,P,O={__proto__:null,default:S};if(S===null||typeof S!="object"&&typeof S!="function")return O;if(E=C?_:k){if(E.has(S))return E.get(S);E.set(S,O)}for(const M in S)M!=="default"&&{}.hasOwnProperty.call(S,M)&&((P=(E=Object.defineProperty)&&Object.getOwnPropertyDescriptor(S,M))&&(P.get||P.set)?E(O,M,P):O[M]=S[M]);return O})(v,w)}function f(){return f=Object.assign?Object.assign.bind():function(v){for(var w=1;w<arguments.length;w++){var k=arguments[w];for(var _ in k)({}).hasOwnProperty.call(k,_)&&(v[_]=k[_])}return v},f.apply(null,arguments)}function p(v,w,k){return(w=g(w))in v?Object.defineProperty(v,w,{value:k,enumerable:!0,configurable:!0,writable:!0}):v[w]=k,v}function g(v){var w=b(v,"string");return typeof w=="symbol"?w:w+""}function b(v,w){if(typeof v!="object"||!v)return v;var k=v[Symbol.toPrimitive];if(k!==void 0){var _=k.call(v,w);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(v)}class y extends e.Component{static getDerivedStateFromProps(w,k){let{position:_}=w,{prevPropsPosition:S}=k;return _&&(!S||_.x!==S.x||_.y!==S.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:S}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(w){super(w),p(this,"onDragStart",(k,_)=>{if((0,u.default)("Draggable: onDragStart: %j",_),this.props.onStart(k,(0,a.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(k,_)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",_);const S=(0,a.createDraggableData)(this,_),C={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:P,y:O}=C;C.x+=this.state.slackX,C.y+=this.state.slackY;const[M,R]=(0,a.getBoundPosition)(this,C.x,C.y);C.x=M,C.y=R,C.slackX=this.state.slackX+(P-C.x),C.slackY=this.state.slackY+(O-C.y),S.x=C.x,S.y=C.y,S.deltaX=C.x-this.state.x,S.deltaY=C.y-this.state.y}if(this.props.onDrag(k,S)===!1)return!1;this.setState(C)}),p(this,"onDragStop",(k,_)=>{if(!this.state.dragging||this.props.onStop(k,(0,a.createDraggableData)(this,_))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",_);const C={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:P,y:O}=this.props.position;C.x=P,C.y=O}this.setState(C)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,k;return((k=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:k.current)??i.default.findDOMNode(this)}render(){const{axis:w,bounds:k,children:_,defaultPosition:S,defaultClassName:C,defaultClassNameDragging:E,defaultClassNameDragged:P,position:O,positionOffset:M,scale:R,...j}=this.props;let B={},L=null;const z=!!!O||this.state.dragging,W=O||S,q={x:(0,a.canDragX)(this)&&z?this.state.x:W.x,y:(0,a.canDragY)(this)&&z?this.state.y:W.y};this.state.isElementSVG?L=(0,o.createSVGTransform)(q,M):B=(0,o.createCSSTransform)(q,M);const V=(0,s.clsx)(_.props.className||"",C,{[E]:this.state.dragging,[P]:this.state.dragged});return e.createElement(c.default,f({},j,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:V,style:{..._.props.style,...B},transform:L}))}}n.default=y,p(y,"displayName","Draggable"),p(y,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(sZ);const{default:vZ,DraggableCore:jxe}=sZ;Kw.exports=vZ;Kw.exports.default=vZ;var Lxe=Kw.exports.DraggableCore=jxe,Fxe=Kw.exports,AA={exports:{}},w0={},NA={};NA.__esModule=!0;NA.cloneElement=Wxe;var $xe=zxe(D);function zxe(n){return n&&n.__esModule?n:{default:n}}function ZL(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function e8(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZL(Object(r),!0).forEach(function(i){Bxe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):ZL(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Bxe(n,e,r){return e=Uxe(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Uxe(n){var e=qxe(n,"string");return typeof e=="symbol"?e:String(e)}function qxe(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Wxe(n,e){return e.style&&n.props.style&&(e.style=e8(e8({},n.props.style),e.style)),e.className&&n.props.className&&(e.className=n.props.className+" "+e.className),$xe.default.cloneElement(n,e)}var _0={};_0.__esModule=!0;_0.resizableProps=void 0;var St=Hxe(x0);function Hxe(n){return n&&n.__esModule?n:{default:n}}var Vxe={axis:St.default.oneOf(["both","x","y","none"]),className:St.default.string,children:St.default.element.isRequired,draggableOpts:St.default.shape({allowAnyClick:St.default.bool,cancel:St.default.string,children:St.default.node,disabled:St.default.bool,enableUserSelectHack:St.default.bool,offsetParent:St.default.node,grid:St.default.arrayOf(St.default.number),handle:St.default.string,nodeRef:St.default.object,onStart:St.default.func,onDrag:St.default.func,onStop:St.default.func,onMouseDown:St.default.func,scale:St.default.number}),height:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var s=r[0];if(s.axis==="both"||s.axis==="y"){var o;return(o=St.default.number).isRequired.apply(o,r)}return St.default.number.apply(St.default,r)},handle:St.default.oneOfType([St.default.node,St.default.func]),handleSize:St.default.arrayOf(St.default.number),lockAspectRatio:St.default.bool,maxConstraints:St.default.arrayOf(St.default.number),minConstraints:St.default.arrayOf(St.default.number),onResizeStop:St.default.func,onResizeStart:St.default.func,onResize:St.default.func,resizeHandles:St.default.arrayOf(St.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:St.default.number,width:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var s=r[0];if(s.axis==="both"||s.axis==="x"){var o;return(o=St.default.number).isRequired.apply(o,r)}return St.default.number.apply(St.default,r)}};_0.resizableProps=Vxe;w0.__esModule=!0;w0.default=void 0;var _p=Qxe(D),Yxe=Fxe,Gxe=NA,Kxe=_0,Xxe=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function bZ(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(bZ=function(s){return s?r:e})(n)}function Qxe(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var r=bZ(e);if(r&&r.has(n))return r.get(n);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var a=s?Object.getOwnPropertyDescriptor(n,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=n[o]}return i.default=n,r&&r.set(n,i),i}function uO(){return uO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},uO.apply(this,arguments)}function Jxe(n,e){if(n==null)return{};var r={},i=Object.keys(n),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(r[s]=n[s]);return r}function t8(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function NS(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t8(Object(r),!0).forEach(function(i){Zxe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):t8(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Zxe(n,e,r){return e=ewe(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function ewe(n){var e=twe(n,"string");return typeof e=="symbol"?e:String(e)}function twe(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nwe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,dO(n,e)}function dO(n,e){return dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},dO(n,e)}var jA=function(n){nwe(e,n);function e(){for(var i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=n.call.apply(n,[this].concat(o))||this,i.handleRefs={},i.lastHandleRect=null,i.slack=null,i}var r=e.prototype;return r.componentWillUnmount=function(){this.resetData()},r.resetData=function(){this.lastHandleRect=this.slack=null},r.runConstraints=function(s,o){var a=this.props,l=a.minConstraints,c=a.maxConstraints,u=a.lockAspectRatio;if(!l&&!c&&!u)return[s,o];if(u){var h=this.props.width/this.props.height,d=s-this.props.width,f=o-this.props.height;Math.abs(d)>Math.abs(f*h)?o=s/h:s=o*h}var p=s,g=o,b=this.slack||[0,0],y=b[0],v=b[1];return s+=y,o+=v,l&&(s=Math.max(l[0],s),o=Math.max(l[1],o)),c&&(s=Math.min(c[0],s),o=Math.min(c[1],o)),this.slack=[y+(p-s),v+(g-o)],[s,o]},r.resizeHandler=function(s,o){var a=this;return function(l,c){var u=c.node,h=c.deltaX,d=c.deltaY;s==="onResizeStart"&&a.resetData();var f=(a.props.axis==="both"||a.props.axis==="x")&&o!=="n"&&o!=="s",p=(a.props.axis==="both"||a.props.axis==="y")&&o!=="e"&&o!=="w";if(!(!f&&!p)){var g=o[0],b=o[o.length-1],y=u.getBoundingClientRect();if(a.lastHandleRect!=null){if(b==="w"){var v=y.left-a.lastHandleRect.left;h+=v}if(g==="n"){var w=y.top-a.lastHandleRect.top;d+=w}}a.lastHandleRect=y,b==="w"&&(h=-h),g==="n"&&(d=-d);var k=a.props.width+(f?h/a.props.transformScale:0),_=a.props.height+(p?d/a.props.transformScale:0),S=a.runConstraints(k,_);k=S[0],_=S[1];var C=k!==a.props.width||_!==a.props.height,E=typeof a.props[s]=="function"?a.props[s]:null,P=s==="onResize"&&!C;E&&!P&&(l.persist==null||l.persist(),E(l,{node:u,size:{width:k,height:_},handle:o})),s==="onResizeStop"&&a.resetData()}}},r.renderResizeHandle=function(s,o){var a=this.props.handle;if(!a)return _p.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+s,ref:o});if(typeof a=="function")return a(s,o);var l=typeof a.type=="string",c=NS({ref:o},l?{}:{handleAxis:s});return _p.cloneElement(a,c)},r.render=function(){var s=this,o=this.props,a=o.children,l=o.className,c=o.draggableOpts;o.width,o.height,o.handle,o.handleSize,o.lockAspectRatio,o.axis,o.minConstraints,o.maxConstraints,o.onResize,o.onResizeStop,o.onResizeStart;var u=o.resizeHandles;o.transformScale;var h=Jxe(o,Xxe);return(0,Gxe.cloneElement)(a,NS(NS({},h),{},{className:(l?l+" ":"")+"react-resizable",children:[].concat(a.props.children,u.map(function(d){var f,p=(f=s.handleRefs[d])!=null?f:s.handleRefs[d]=_p.createRef();return _p.createElement(Yxe.DraggableCore,uO({},c,{nodeRef:p,key:"resizableHandle-"+d,onStop:s.resizeHandler("onResizeStop",d),onStart:s.resizeHandler("onResizeStart",d),onDrag:s.resizeHandler("onResize",d)}),s.renderResizeHandle(d,p))}))}))},e}(_p.Component);w0.default=jA;jA.propTypes=Kxe.resizableProps;jA.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var Zw={};Zw.__esModule=!0;Zw.default=void 0;var jS=awe(D),rwe=yZ(x0),iwe=yZ(w0),swe=_0,owe=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function yZ(n){return n&&n.__esModule?n:{default:n}}function xZ(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(xZ=function(s){return s?r:e})(n)}function awe(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var r=xZ(e);if(r&&r.has(n))return r.get(n);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var a=s?Object.getOwnPropertyDescriptor(n,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=n[o]}return i.default=n,r&&r.set(n,i),i}function hO(){return hO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},hO.apply(this,arguments)}function n8(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function gx(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n8(Object(r),!0).forEach(function(i){lwe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):n8(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function lwe(n,e,r){return e=cwe(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function cwe(n){var e=uwe(n,"string");return typeof e=="symbol"?e:String(e)}function uwe(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function dwe(n,e){if(n==null)return{};var r={},i=Object.keys(n),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(r[s]=n[s]);return r}function hwe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,fO(n,e)}function fO(n,e){return fO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},fO(n,e)}var wZ=function(n){hwe(e,n);function e(){for(var i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=n.call.apply(n,[this].concat(o))||this,i.state={width:i.props.width,height:i.props.height,propsWidth:i.props.width,propsHeight:i.props.height},i.onResize=function(l,c){var u=c.size;i.props.onResize?(l.persist==null||l.persist(),i.setState(u,function(){return i.props.onResize&&i.props.onResize(l,c)})):i.setState(u)},i}e.getDerivedStateFromProps=function(s,o){return o.propsWidth!==s.width||o.propsHeight!==s.height?{width:s.width,height:s.height,propsWidth:s.width,propsHeight:s.height}:null};var r=e.prototype;return r.render=function(){var s=this.props,o=s.handle,a=s.handleSize;s.onResize;var l=s.onResizeStart,c=s.onResizeStop,u=s.draggableOpts,h=s.minConstraints,d=s.maxConstraints,f=s.lockAspectRatio,p=s.axis;s.width,s.height;var g=s.resizeHandles,b=s.style,y=s.transformScale,v=dwe(s,owe);return jS.createElement(iwe.default,{axis:p,draggableOpts:u,handle:o,handleSize:a,height:this.state.height,lockAspectRatio:f,maxConstraints:d,minConstraints:h,onResizeStart:l,onResize:this.onResize,onResizeStop:c,resizeHandles:g,transformScale:y,width:this.state.width},jS.createElement("div",hO({},v,{style:gx(gx({},b),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(jS.Component);Zw.default=wZ;wZ.propTypes=gx(gx({},swe.resizableProps),{},{children:rwe.default.element});AA.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var fwe=AA.exports.Resizable=w0.default;AA.exports.ResizableBox=Zw.default;function _Z(n){return function(r,i,s,o,a,l,c){return n(r,i,c)}}function e1(n){return function(r,i,s,o){if(!r||!i||typeof r!="object"||typeof i!="object")return n(r,i,s,o);var a=o.get(r),l=o.get(i);if(a&&l)return a===i&&l===r;o.set(r,i),o.set(i,r);var c=n(r,i,s,o);return o.delete(r),o.delete(i),c}}function SZ(n,e){var r={};for(var i in n)r[i]=n[i];for(var i in e)r[i]=e[i];return r}function r8(n){return n.constructor===Object||n.constructor==null}function i8(n){return typeof n.then=="function"}function t1(n,e){return n===e||n!==n&&e!==e}var pwe="[object Arguments]",mwe="[object Boolean]",gwe="[object Date]",vwe="[object RegExp]",bwe="[object Map]",ywe="[object Number]",xwe="[object Object]",wwe="[object Set]",_we="[object String]",s8=Object.prototype.toString;function n1(n){var e=n.areArraysEqual,r=n.areDatesEqual,i=n.areMapsEqual,s=n.areObjectsEqual,o=n.areRegExpsEqual,a=n.areSetsEqual,l=n.createIsNestedEqual,c=l(u);function u(h,d,f){if(h===d)return!0;if(!h||!d||typeof h!="object"||typeof d!="object")return h!==h&&d!==d;if(r8(h)&&r8(d))return s(h,d,c,f);var p=Array.isArray(h),g=Array.isArray(d);if(p||g)return p===g&&e(h,d,c,f);var b=s8.call(h);return b!==s8.call(d)?!1:b===gwe?r(h,d,c,f):b===vwe?o(h,d,c,f):b===bwe?i(h,d,c,f):b===wwe?a(h,d,c,f):b===xwe||b===pwe?i8(h)||i8(d)?!1:s(h,d,c,f):b===mwe||b===ywe||b===_we?t1(h.valueOf(),d.valueOf()):!1}return u}function kZ(n,e,r,i){var s=n.length;if(e.length!==s)return!1;for(;s-- >0;)if(!r(n[s],e[s],s,s,n,e,i))return!1;return!0}var Swe=e1(kZ);function CZ(n,e){return t1(n.valueOf(),e.valueOf())}function EZ(n,e,r,i){var s=n.size===e.size;if(!s)return!1;if(!n.size)return!0;var o={},a=0;return n.forEach(function(l,c){if(s){var u=!1,h=0;e.forEach(function(d,f){!u&&!o[h]&&(u=r(c,f,a,h,n,e,i)&&r(l,d,c,f,n,e,i))&&(o[h]=!0),h++}),a++,s=u}}),s}var kwe=e1(EZ),Cwe="_owner",Ewe=Object.prototype.hasOwnProperty;function TZ(n,e,r,i){var s=Object.keys(n),o=s.length;if(Object.keys(e).length!==o)return!1;for(var a;o-- >0;){if(a=s[o],a===Cwe){var l=!!n.$$typeof,c=!!e.$$typeof;if((l||c)&&l!==c)return!1}if(!Ewe.call(e,a)||!r(n[a],e[a],a,a,n,e,i))return!1}return!0}var Twe=e1(TZ);function PZ(n,e){return n.source===e.source&&n.flags===e.flags}function MZ(n,e,r,i){var s=n.size===e.size;if(!s)return!1;if(!n.size)return!0;var o={};return n.forEach(function(a,l){if(s){var c=!1,u=0;e.forEach(function(h,d){!c&&!o[u]&&(c=r(a,h,l,d,n,e,i))&&(o[u]=!0),u++}),s=c}}),s}var Pwe=e1(MZ),DZ=Object.freeze({areArraysEqual:kZ,areDatesEqual:CZ,areMapsEqual:EZ,areObjectsEqual:TZ,areRegExpsEqual:PZ,areSetsEqual:MZ,createIsNestedEqual:_Z}),OZ=Object.freeze({areArraysEqual:Swe,areDatesEqual:CZ,areMapsEqual:kwe,areObjectsEqual:Twe,areRegExpsEqual:PZ,areSetsEqual:Pwe,createIsNestedEqual:_Z}),Mwe=n1(DZ);function dl(n,e){return Mwe(n,e,void 0)}n1(SZ(DZ,{createIsNestedEqual:function(){return t1}}));n1(OZ);n1(SZ(OZ,{createIsNestedEqual:function(){return t1}}));function o8(n){const{children:e,cols:r,containerWidth:i,margin:s,containerPadding:o,rowHeight:a,maxRows:l,isDraggable:c,isResizable:u,isBounded:h,static:d,useCSSTransforms:f=!0,usePercentages:p=!1,transformScale:g=1,droppingPosition:b,className:y="",style:v,handle:w="",cancel:k="",x:_,y:S,w:C,h:E,minW:P=1,maxW:O=1/0,minH:M=1,maxH:R=1/0,i:j,resizeHandles:B,resizeHandle:L,onDragStart:$,onDrag:z,onDragStop:W,onResizeStart:q,onResize:V,onResizeStop:F}=n,[G,H]=D.useState(!1),[A,Q]=D.useState(!1),J=D.useRef(null),K=D.useRef({left:0,top:0}),Z=D.useRef({top:0,left:0,width:0,height:0}),se=D.useRef(void 0),be=D.useMemo(()=>({cols:r,containerPadding:o,containerWidth:i,margin:s,maxRows:l,rowHeight:a}),[r,o,i,s,l,a]),Oe=D.useCallback(ve=>{if(f)return _A(ve);const he=KJ(ve);return p?{...he,left:VL(ve.left/i),width:VL(ve.width/i)}:he},[f,p,i]),Ke=D.useCallback((ve,{node:he})=>{if(!$)return;const{offsetParent:ge}=he;if(!ge)return;const pe=ge.getBoundingClientRect(),fe=he.getBoundingClientRect(),Re=fe.left/g,Ve=pe.left/g,Xe=fe.top/g,Ye=pe.top/g,He={left:Re-Ve+ge.scrollLeft,top:Xe-Ye+ge.scrollTop};K.current=He,H(!0);const{x:ot,y:rt}=cy(be,He.top,He.left,C,E);$(j,ot,rt,{e:ve,node:he,newPosition:He})},[$,g,be,C,E,j]),De=D.useCallback((ve,{node:he,deltaX:ge,deltaY:pe})=>{if(!z||!G)return;let fe=K.current.top+pe,Re=K.current.left+ge;if(h){const{offsetParent:He}=he;if(He){const ot=He.clientHeight-mx(E,a,s[1]);fe=wo(fe,0,ot);const rt=Gw(be),ye=i-mx(C,rt,s[0]);Re=wo(Re,0,ye)}}const Ve={top:fe,left:Re};K.current=Ve;const{x:Xe,y:Ye}=cy(be,fe,Re,C,E);z(j,Xe,Ye,{e:ve,node:he,newPosition:Ve})},[z,G,h,E,a,s,be,i,C,j]),Pe=D.useCallback((ve,{node:he})=>{if(!W||!G)return;const{left:ge,top:pe}=K.current,fe={top:pe,left:ge};H(!1),K.current={left:0,top:0};const{x:Re,y:Ve}=cy(be,pe,ge,C,E);W(j,Re,Ve,{e:ve,node:he,newPosition:fe})},[W,G,be,C,E,j]),We=D.useCallback((ve,{node:he,size:ge,handle:pe},fe,Re)=>{const Ve=Re==="onResizeStart"?q:Re==="onResize"?V:F;if(!Ve)return;let Xe;he?Xe=Rye(pe,fe,ge,i):Xe={...ge,top:fe.top,left:fe.left},Z.current=Xe;let{w:Ye,h:He}=Xye(be,Xe.width,Xe.height,_,S,pe);Ye=wo(Ye,Math.max(P,1),O),He=wo(He,M,R),Ve(j,Ye,He,{e:ve.nativeEvent,node:he,size:Xe,handle:pe})},[q,V,F,i,be,_,S,P,O,M,R,j]),nt=D.useCallback((ve,he)=>{Q(!0);const ge=mc(be,_,S,C,E),pe={...he,handle:he.handle};We(ve,pe,ge,"onResizeStart")},[We,be,_,S,C,E]),U=D.useCallback((ve,he)=>{const ge=mc(be,_,S,C,E),pe={...he,handle:he.handle};We(ve,pe,ge,"onResize")},[We,be,_,S,C,E]),_e=D.useCallback((ve,he)=>{Q(!1),Z.current={top:0,left:0,width:0,height:0};const ge=mc(be,_,S,C,E),pe={...he,handle:he.handle};We(ve,pe,ge,"onResizeStop")},[We,be,_,S,C,E]);D.useEffect(()=>{if(!b)return;const ve=J.current;if(!ve)return;const he=se.current||{left:0,top:0},ge=G&&(b.left!==he.left||b.top!==he.top);if(G){if(ge){const pe=b.left-K.current.left,fe=b.top-K.current.top,Re={node:ve,deltaX:pe,deltaY:fe,lastX:K.current.left,lastY:K.current.top,x:b.left,y:b.top};De(b.e,Re)}}else{const pe={node:ve,deltaX:b.left,deltaY:b.top,lastX:0,lastY:0,x:b.left,y:b.top};Ke(b.e,pe)}se.current=b},[b,G,Ke,De]);const Ie=mc(be,_,S,C,E,G?K.current:null,A?Z.current:null),me=Ne.Children.only(e),$e=mc(be,0,0,r,0).width,ue=mc(be,0,0,P,M),ee=mc(be,0,0,O,R),le=[ue.width,ue.height],te=[Math.min(ee.width,$e),Math.min(ee.height,1/0)],ce=me.props,je=ce.className,de=ce.style;let Ae=Ne.cloneElement(me,{ref:J,className:Mg("react-grid-item",je,y,{static:d,resizing:A,"react-draggable":c,"react-draggable-dragging":G,dropping:!!b,cssTransforms:f}),style:{...v,...de,...Oe(Ie)}});const Le=L;return Ae=m.jsx(fwe,{draggableOpts:{disabled:!u},className:u?void 0:"react-resizable-hide",width:Ie.width,height:Ie.height,minConstraints:le,maxConstraints:te,onResizeStart:nt,onResize:U,onResizeStop:_e,transformScale:g,resizeHandles:B,handle:Le,children:Ae}),Ae=m.jsx(Lxe,{disabled:!c,onStart:Ke,onDrag:De,onStop:Pe,handle:w,cancel:".react-resizable-handle"+(k?","+k:""),scale:g,nodeRef:J,children:Ae}),Ae}var Wo=()=>{},a8="react-grid-layout",IZ=!1;try{IZ=/firefox/i.test(navigator.userAgent)}catch{}function Dwe(n,e){const r=Ne.Children.toArray(n),i=Ne.Children.toArray(e);if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++){const o=r[s],a=i[s];if((o==null?void 0:o.key)!==(a==null?void 0:a.key))return!1}return!0}function l8(n,e,r,i,s){const o=[],a=new Set;Ne.Children.forEach(e,c=>{if(!Ne.isValidElement(c)||c.key===null)return;const u=String(c.key);a.add(u);const h=n.find(d=>d.i===u);if(h)o.push(Vl(h));else{const f=c.props["data-grid"];f?o.push({i:u,x:f.x??0,y:f.y??0,w:f.w??1,h:f.h??1,minW:f.minW,maxW:f.maxW,minH:f.minH,maxH:f.maxH,static:f.static,isDraggable:f.isDraggable,isResizable:f.isResizable,resizeHandles:f.resizeHandles,isBounded:f.isBounded}):o.push({i:u,x:0,y:Mf(o),w:1,h:1})}});const l=PA(o,{cols:r});return da(l,i,r,s)}function Owe(n){const{children:e,width:r,gridConfig:i,dragConfig:s,resizeConfig:o,dropConfig:a,positionStrategy:l=jye,compactor:c,layout:u=[],droppingItem:h,autoSize:d=!0,className:f="",style:p={},innerRef:g,onLayoutChange:b=Wo,onDragStart:y=Wo,onDrag:v=Wo,onDragStop:w=Wo,onResizeStart:k=Wo,onResize:_=Wo,onResizeStop:S=Wo,onDrop:C=Wo,onDropDragOver:E=Wo}=n,P=D.useMemo(()=>({...Lye,...i}),[i]),O=D.useMemo(()=>({...Fye,...s}),[s]),M=D.useMemo(()=>({...$ye,...o}),[o]),R=D.useMemo(()=>({...zye,...a}),[a]),{cols:j,rowHeight:B,maxRows:L,margin:$,containerPadding:z}=P,{enabled:W,bounded:q,handle:V,cancel:F}=O,{enabled:G,handles:H,handleComponent:A}=M,{enabled:Q,defaultItem:J}=R,K=c??DA("vertical"),Z=K.type,se=K.allowOverlap,be=K.preventCollision??!1,Oe=D.useMemo(()=>h??{i:"__dropping-elem__",...J},[h,J]),Ke=l.type==="transform",De=l.scale,Pe=z??$,[We,nt]=D.useState(!1),[U,_e]=D.useState(()=>l8(u,e,j,Z,se)),[Ie,me]=D.useState(null),[$e,ue]=D.useState(!1),[ee,le]=D.useState(null),[te,ce]=D.useState(),je=D.useRef(null),de=D.useRef(null),Ae=D.useRef(null),Le=D.useRef(0),ve=D.useRef(U),he=D.useRef(u),ge=D.useRef(e),pe=D.useRef(Z);D.useEffect(()=>{nt(!0),dl(U,u)||b(U)},[]),D.useEffect(()=>{if(Ie)return;const we=!dl(u,he.current),ct=!Dwe(e,ge.current),Fe=Z!==pe.current;if(we||ct||Fe){const _t=l8(we?u:U,e,j,Z,se);_e(_t)}he.current=u,ge.current=e,pe.current=Z},[u,e,j,Z,se,Ie,U]),D.useEffect(()=>{!Ie&&!dl(U,ve.current)&&(ve.current=U,b(U))},[U,Ie,b]);const fe=D.useMemo(()=>{if(!d)return;const we=Mf(U),ct=Pe[1];return we*B+(we-1)*$[1]+ct*2+"px"},[d,U,B,$,Pe]),Re=D.useCallback((we,ct,Fe,dt)=>{const _t=Sc(U,we);if(!_t)return;const pt={w:_t.w,h:_t.h,x:_t.x,y:_t.y,i:we};je.current=Vl(_t),Ae.current=U,me(pt),y(U,_t,_t,null,dt.e,dt.node)},[U,y]),Ve=D.useCallback((we,ct,Fe,dt)=>{const _t=je.current,pt=Sc(U,we);if(!pt)return;const mt={w:pt.w,h:pt.h,x:pt.x,y:pt.y,i:we},yt=Lc(U,pt,ct,Fe,!0,be,Z,j,se);v(yt,_t,pt,mt,dt.e,dt.node),_e(se?yt:da(yt,Z,j)),me(mt)},[U,be,Z,j,se,v]),Xe=D.useCallback((we,ct,Fe,dt)=>{if(!Ie)return;const _t=je.current,pt=Sc(U,we);if(!pt)return;const mt=Lc(U,pt,ct,Fe,!0,be,Z,j,se),yt=se?mt:da(mt,Z,j);w(yt,_t,pt,null,dt.e,dt.node);const Ut=Ae.current;je.current=null,Ae.current=null,me(null),_e(yt),Ut&&!dl(Ut,yt)&&b(yt)},[Ie,U,be,Z,j,se,w,b]),Ye=D.useCallback((we,ct,Fe,dt)=>{const _t=Sc(U,we);_t&&(de.current=Vl(_t),Ae.current=U,ue(!0),k(U,_t,_t,null,dt.e,dt.node))},[U,k]),He=D.useCallback((we,ct,Fe,dt)=>{const _t=de.current,{handle:pt}=dt;let mt=!1,yt,Ut;const[Yt,Jn]=Uye(U,we,Tn=>(yt=Tn.x,Ut=Tn.y,["sw","w","nw","n","ne"].includes(pt)&&(["sw","nw","w"].includes(pt)&&(yt=Tn.x+(Tn.w-ct),ct=Tn.x!==yt&&yt<0?Tn.w:ct,yt=yt<0?0:yt),["ne","n","nw"].includes(pt)&&(Ut=Tn.y+(Tn.h-Fe),Fe=Tn.y!==Ut&&Ut<0?Tn.h:Fe,Ut=Ut<0?0:Ut),mt=!0),be&&!se&&JJ(U,{...Tn,w:ct,h:Fe,x:yt??Tn.x,y:Ut??Tn.y}).filter(cc=>cc.i!==Tn.i).length>0&&(Ut=Tn.y,Fe=Tn.h,yt=Tn.x,ct=Tn.w,mt=!1),Tn.w=ct,Tn.h=Fe,Tn));if(!Jn)return;let ri=Yt;mt&&yt!==void 0&&Ut!==void 0&&(ri=Lc(Yt,Jn,yt,Ut,!0,be,Z,j,se));const to={w:Jn.w,h:Jn.h,x:Jn.x,y:Jn.y,i:we,static:!0};_(ri,_t,Jn,to,dt.e,dt.node),_e(se?ri:da(ri,Z,j)),me(to)},[U,be,se,Z,j,_]),ot=D.useCallback((we,ct,Fe,dt)=>{const _t=de.current,pt=Sc(U,we),mt=se?U:da(U,Z,j);S(mt,_t,pt??null,null,dt.e,dt.node);const yt=Ae.current;de.current=null,Ae.current=null,me(null),ue(!1),_e(mt),yt&&!dl(yt,mt)&&b(mt)},[U,se,Z,j,S,b]),rt=D.useCallback(()=>{const we=da(U.filter(ct=>ct.i!==Oe.i),Z,j,se);_e(we),le(null),me(null),ce(void 0)},[U,Oe.i,Z,j,se]),ye=D.useCallback(we=>{var yt;if(we.preventDefault(),we.stopPropagation(),IZ&&!((yt=we.nativeEvent.target)!=null&&yt.classList.contains(a8)))return!1;const ct=E(we);if(ct===!1)return ee&&rt(),!1;const Fe={...Oe,...ct},dt=we.currentTarget.getBoundingClientRect(),_t=we.clientX-dt.left,pt=we.clientY-dt.top,mt={left:_t/De,top:pt/De,e:we.nativeEvent};if(ee)te&&(te.left!==_t||te.top!==pt)&&ce(mt);else{const Yt=cy({cols:j,margin:$,maxRows:L,rowHeight:B,containerWidth:r,containerPadding:Pe},pt,_t,Fe.w,Fe.h);le(m.jsx("div",{},Fe.i)),ce(mt),_e([...U,{...Fe,x:Yt.x,y:Yt.y,static:!1,isDraggable:!0}])}},[ee,te,Oe,E,rt,De,j,$,L,B,r,Pe,U]),re=D.useCallback(we=>{we.preventDefault(),we.stopPropagation(),Le.current--,Le.current===0&&rt()},[rt]),ne=D.useCallback(we=>{we.preventDefault(),we.stopPropagation(),Le.current++},[]),xe=D.useCallback(we=>{we.preventDefault(),we.stopPropagation();const ct=U.find(Fe=>Fe.i===Oe.i);Le.current=0,rt(),C(U,ct,we.nativeEvent)},[U,Oe.i,rt,C]),Ot=D.useCallback((we,ct)=>{if(!we||!we.key)return null;const Fe=Sc(U,String(we.key));if(!Fe)return null;const dt=typeof Fe.isDraggable=="boolean"?Fe.isDraggable:!Fe.static&&W,_t=typeof Fe.isResizable=="boolean"?Fe.isResizable:!Fe.static&&G,pt=Fe.resizeHandles||[...H],mt=dt&&q&&Fe.isBounded!==!1,yt=A;return m.jsx(o8,{containerWidth:r,cols:j,margin:$,containerPadding:Pe,maxRows:L,rowHeight:B,cancel:F,handle:V,onDragStart:Re,onDrag:Ve,onDragStop:Xe,onResizeStart:Ye,onResize:He,onResizeStop:ot,isDraggable:dt,isResizable:_t,isBounded:mt,useCSSTransforms:Ke&&We,usePercentages:!We,transformScale:De,w:Fe.w,h:Fe.h,x:Fe.x,y:Fe.y,i:Fe.i,minH:Fe.minH,minW:Fe.minW,maxH:Fe.maxH,maxW:Fe.maxW,static:Fe.static,droppingPosition:ct?te:void 0,resizeHandles:pt,resizeHandle:yt,children:we},Fe.i)},[U,r,j,$,Pe,L,B,F,V,Re,Ve,Xe,Ye,He,ot,W,G,q,Ke,We,De,te,H,A]),ft=()=>Ie?m.jsx(o8,{w:Ie.w,h:Ie.h,x:Ie.x,y:Ie.y,i:Ie.i,className:`react-grid-placeholder ${$e?"placeholder-resizing":""}`,containerWidth:r,cols:j,margin:$,containerPadding:Pe,maxRows:L,rowHeight:B,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:Ke,transformScale:De,children:m.jsx("div",{})}):null,It=Mg(a8,f),Ce={height:fe,...p};return m.jsxs("div",{ref:g,className:It,style:Ce,onDrop:Q?xe:void 0,onDragLeave:Q?re:void 0,onDragEnter:Q?ne:void 0,onDragOver:Q?ye:void 0,children:[Ne.Children.map(e,we=>Ne.isValidElement(we)?Ot(we):null),Q&&ee&&Ot(ee,!0),ft()]})}var Iwe={lg:1200,md:996,sm:768,xs:480,xxs:0},Rwe={lg:12,md:10,sm:6,xs:4,xxs:2},LS=()=>{};function Awe(n,e,r,i,s){const o=[];Ne.Children.forEach(e,l=>{if(!Ne.isValidElement(l)||l.key===null)return;const c=String(l.key),u=n.find(h=>h.i===c);if(u)o.push({...u,i:c});else{const d=l.props["data-grid"];d?o.push({i:c,x:d.x??0,y:d.y??0,w:d.w??1,h:d.h??1,minW:d.minW,maxW:d.maxW,minH:d.minH,maxH:d.maxH,static:d.static,isDraggable:d.isDraggable,isResizable:d.isResizable,resizeHandles:d.resizeHandles,isBounded:d.isBounded}):o.push({i:c,x:0,y:Mf(o),w:1,h:1})}});const a=PA(o,{cols:r});return da(a,i,r,s)}function Nwe(n){const{children:e,width:r,breakpoint:i,breakpoints:s=Iwe,cols:o=Rwe,layouts:a={},rowHeight:l=150,maxRows:c=1/0,margin:u=[10,10],containerPadding:h=null,compactor:d,onBreakpointChange:f=LS,onLayoutChange:p=LS,onWidthChange:g=LS,...b}=n,y=d??DA("vertical"),v=y.type,w=y.allowOverlap,k=D.useMemo(()=>i??KL(s,r),[]),_=D.useMemo(()=>XL(k,o),[k,o]),S=D.useMemo(()=>OS(a,s,k,k,_,v),[]),[C,E]=D.useState(k),[P,O]=D.useState(_),[M,R]=D.useState(S),[j,B]=D.useState(a),L=D.useRef(r),$=D.useRef(i),z=D.useRef(s),W=D.useRef(o),q=D.useRef(a),V=D.useRef(v);D.useEffect(()=>{if(!dl(a,q.current)){const Q=OS(a,s,C,C,P,v);R(Q),B(a),q.current=a}},[a,s,C,P,v]),D.useEffect(()=>{if(v!==V.current){const Q=da(Gs(M),v,P,w),J={...j,[C]:Q};R(Q),B(J),p(Q,J),V.current=v}},[v,M,P,w,j,C,p]),D.useEffect(()=>{const Q=r!==L.current,J=i!==$.current,K=!dl(s,z.current),Z=!dl(o,W.current);if(Q||J||K||Z){const se=i??KL(s,r),be=XL(se,o),Oe=C;if(Oe!==se||K||Z){const Pe={...j};Pe[Oe]||(Pe[Oe]=Gs(M));let We=OS(Pe,s,se,Oe,be,v);We=Awe(We,e,be,v,w),Pe[se]=We,E(se),O(be),R(We),B(Pe),f(se,be),p(We,Pe)}const Ke=ib(u,se),De=h?ib(h,se):null;g(r,Ke,be,De),L.current=r,$.current=i,z.current=s,W.current=o}},[r,i,s,o,C,P,M,j,e,v,w,u,h,f,p,g]);const F=D.useCallback(Q=>{const J={...j,[C]:Q};R(Q),B(J),p(Q,J)},[j,C,p]),G=D.useMemo(()=>ib(u,C),[u,C]),H=D.useMemo(()=>h===null?null:ib(h,C),[h,C]),A=D.useMemo(()=>({cols:P,rowHeight:l,maxRows:c,margin:G,containerPadding:H}),[P,l,c,G,H]);return m.jsx(Owe,{...b,width:r,gridConfig:A,compactor:y,onLayoutChange:F,layout:M,children:e})}function RZ(n){const{children:e,width:r,breakpoint:i,breakpoints:s,cols:o,layouts:a,onBreakpointChange:l,onLayoutChange:c,onWidthChange:u,rowHeight:h,maxRows:d,margin:f,containerPadding:p,droppingItem:g,compactType:b,preventCollision:y=!1,allowOverlap:v=!1,verticalCompact:w,isDraggable:k=!0,isBounded:_=!1,draggableHandle:S,draggableCancel:C,isResizable:E=!0,resizeHandles:P=["se"],resizeHandle:O,isDroppable:M=!1,useCSSTransforms:R=!0,transformScale:j=1,autoSize:B,className:L,style:$,innerRef:z,onDragStart:W,onDrag:q,onDragStop:V,onResizeStart:F,onResize:G,onResizeStop:H,onDrop:A,onDropDragOver:Q}=n;let J=b===void 0?"vertical":b;w===!1&&(J=null);const K={enabled:k,bounded:_,handle:S,cancel:C},Z={enabled:E,handles:P,handleComponent:O},se={enabled:M};let be;R?j!==1?be=Nye(j):be=QJ:be=Aye;const Oe=DA(J,v,y);return m.jsx(Nwe,{width:r,breakpoint:i,breakpoints:s,cols:o,layouts:a,rowHeight:h,maxRows:d,margin:f,containerPadding:p,compactor:Oe,dragConfig:K,resizeConfig:Z,dropConfig:se,positionStrategy:be,droppingItem:g,autoSize:B,className:L,style:$,innerRef:z,onBreakpointChange:l,onLayoutChange:c,onWidthChange:u,onDragStart:W,onDrag:q,onDragStop:V,onResizeStart:F,onResize:G,onResizeStop:H,onDrop:A,onDropDragOver:Q,children:e})}RZ.displayName="ResponsiveReactGridLayout";var jwe=RZ,Lwe="react-grid-layout";function Fwe(n){function e(r){const{measureBeforeMount:i=!1,className:s,style:o,...a}=r,[l,c]=D.useState(1280),[u,h]=D.useState(!1),d=D.useRef(null),f=D.useRef(null);return D.useEffect(()=>{h(!0),f.current=new ResizeObserver(g=>{if(d.current instanceof HTMLElement&&g[0]){const y=g[0].contentRect.width;c(y)}});const p=d.current;return p instanceof HTMLElement&&f.current.observe(p),()=>{var g;p instanceof HTMLElement&&f.current&&f.current.unobserve(p),(g=f.current)==null||g.disconnect()}},[]),i&&!u?m.jsx("div",{className:Mg(s,Lwe),style:o,ref:d}):m.jsx(n,{innerRef:d,className:s,style:o,...a,width:l})}return e.displayName=`WidthProvider(${n.displayName||n.name||"Component"})`,e}const Em=[[0,4,8,16],[8,4,2,16],[0,40,3,27],[0,20,3,20],[3,20,7,13],[3,33,7,8],[3,41,7,6],[3,47,2,16],[0,0,10,4]],$we=[[0,4,8,16],[8,4,2,16],[9,20,3,27],[0,20,3,20],[3,20,6,13],[0,40,9,7],[3,33,6,7],[10,4,2,16],[0,0,12,4]],c8=0,zwe=8;function Bwe(n){return n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():""}function Uwe(n,e){return Math.floor(Math.random()*(e-n+1))+n}function qwe(n){const e=Math.ceil(Math.random()*4)+1;return{x:Uwe(0,5)*2%12,y:Math.floor(n/6)*e,w:2,h:e,i:n.toString(),static:Math.random()<.05}}function Wwe(n,e){const[r,i,s,o]=e;return{x:r,y:i,w:s,h:o,i:n.toString(),static:!0}}function Tm(n,e){const r=n.length,i=[];for(let s=0;s<r;s++)s<n.length?i.push(Wwe(s,n[s])):i.push(qwe(s));return i}function Hwe(n,e){const r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r){const o=n[s],a=e[s];if(!o||!a){if(o!==a)return!1;continue}if(o.length!==a.length)return!1;for(let l=0;l<o.length;l++){const c=o[l],u=a[l];if(c.x!==u.x||c.y!==u.y||c.w!==u.w||c.h!==u.h)return!1}}return!0}function FS(n,e){const r={};for(const i in n){const s=n[i];s&&(r[i]=s.map(o=>({...o,static:e})))}return r}const Vwe=Fwe(jwe),rw=class rw extends Ne.Component{constructor(r){super(r);Te(this,"isUpdatingLayout",!1);Te(this,"domCache",null);Te(this,"lastLayoutKey","");Te(this,"handleResponsiveLayoutChange",(r,i)=>{const s=Array.isArray(r)?r:[r],o=i;this.onLayoutChange(s,o)});Te(this,"generateNewLayout",()=>{const r=Tm(Em),i=this.props.allStatic??this.state.allStatic,s=r.map(o=>({...o,static:i}));this.domCache=null,this.lastLayoutKey="",this.setState({layouts:{lg:s}})});this.state={currentBreakpoint:"lg",compactType:r.compactType??"vertical",mounted:!1,layouts:{lg:r.initialLayout||Tm(Em)},allStatic:r.allStatic??!0},this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onCompactTypeChange=this.onCompactTypeChange.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.onNewLayout=this.onNewLayout.bind(this),this.onToggleStatic=this.onToggleStatic.bind(this)}componentDidMount(){this.setState({mounted:!0})}generateDOM(){const r=this.state.layouts.lg||[],{slotContent:i=[]}=this.props,s=this.props.allStatic??this.state.allStatic,o=`${r.length}-${s}-${i.length}`;if(this.domCache&&this.lastLayoutKey===o)return this.domCache;const a=[];for(let l=0;l<r.length;l++){const c=r[l],u=l>=c8&&l<=zwe,h=l-c8,d=u&&i[h]?i[h]:null,f=c.static??s;a.push(m.jsx("div",{className:f?"static":"",children:d?m.jsx("div",{className:"external-slot-content",children:d}):f?m.jsxs("span",{className:"text",title:"This item is static and cannot be removed or resized.",children:["Static - ",l]}):m.jsx("span",{className:"text",children:l})},c.i||l.toString()))}return this.domCache=a,this.lastLayoutKey=o,a}onBreakpointChange(r){this.setState({currentBreakpoint:r})}onCompactTypeChange(){if(this.props.onCompactTypeChange)this.props.onCompactTypeChange();else{const{compactType:r}=this.state,i=r==="horizontal"?"vertical":r==="vertical"?null:"horizontal";this.setState({compactType:i})}}onLayoutChange(r,i){if(this.isUpdatingLayout){this.props.onLayoutChange(r,i);return}const s=this.props.allStatic??this.state.allStatic;if(s){this.props.onLayoutChange(r,i);return}const o=FS(i,s);!Hwe(this.state.layouts,o)&&(this.domCache=null,this.lastLayoutKey="",this.isUpdatingLayout=!0,this.setState({layouts:o},()=>{this.isUpdatingLayout=!1})),this.props.onLayoutChange(r,o)}onNewLayout(){this.props.onNewLayout?this.props.onNewLayout():this.generateNewLayout()}onToggleStatic(){if(this.props.onToggleStatic)this.props.onToggleStatic();else{const r=!this.state.allStatic,i=FS(this.state.layouts,r);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:r,layouts:i})}}componentDidUpdate(r){if(r.compactType!==this.props.compactType&&this.props.compactType!==void 0&&this.setState({compactType:this.props.compactType}),r.allStatic!==this.props.allStatic&&this.props.allStatic!==void 0){const i=FS(this.state.layouts,this.props.allStatic);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:this.props.allStatic,layouts:i})}r.slotContent!==this.props.slotContent&&(this.domCache=null,this.lastLayoutKey="")}render(){const{cols:r}=this.props,i=r||rw.defaultProps.cols||{},s=this.props.compactType??this.state.compactType;return m.jsxs("div",{children:[m.jsxs("div",{children:["Current Breakpoint: ",this.state.currentBreakpoint," (",i[this.state.currentBreakpoint]," columns)"]}),m.jsxs("div",{children:["Compaction type: ",Bwe(s)||"No Compaction"]}),m.jsx(Vwe,{...this.props,layouts:this.state.layouts,onBreakpointChange:this.onBreakpointChange,onLayoutChange:this.handleResponsiveLayoutChange,measureBeforeMount:!1,useCSSTransforms:this.state.mounted,compactType:s,preventCollision:!s,children:this.generateDOM()})]})}};Te(rw,"defaultProps",{className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},initialLayout:Tm(Em)});let pO=rw;function AZ(){const n=document.getElementById("tradingview-widget-script");n&&n.parentNode&&n.parentNode.removeChild(n)}function Ywe(){return new Promise((n,e)=>{if(typeof window.TradingView<"u"){n();return}AZ();const r=document.createElement("script");r.id="tradingview-widget-script",r.src=Wge,r.async=!0,r.onload=()=>{typeof window.TradingView<"u"?n():e(new Error("TradingView script loaded but TradingView object not found"))},r.onerror=()=>{e(new Error("Failed to load TradingView script"))},document.head.appendChild(r)})}function Gwe(n){if(typeof window.TradingView>"u")throw new Error("TradingView is not loaded. Call loadTradingViewScript() first.");const e={autosize:n.autosize!==!1,symbol:n.symbol,interval:n.interval,timezone:n.timezone||"Etc/UTC",theme:"dark",style:"1",locale:n.locale||"en",toolbar_bg:"#1a1a1a",enable_publishing:n.enablePublishing||!1,hide_top_toolbar:n.hideTopToolbar||!1,hide_legend:n.hideLegend||!1,save_image:!1,container_id:n.containerId,hide_volume:n.hideVolume||!1,studies:n.studies||["RSI@tv-basicstudies","MASimple@tv-basicstudies"]};return new window.TradingView.widget(e)}function Kwe(){return`tradingview-widget-container-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function Xwe({symbol:n=Uge,interval:e=qge,isCollapsed:r=!1,className:i=""}){const s=D.useRef(null),o=D.useRef(null),a=D.useRef(Kwe());return D.useEffect(()=>{if(r||!s.current)return;s.current&&(s.current.id=a.current);let l=!0;return Ywe().then(()=>{if(!l||!s.current)return;const c={symbol:n,interval:e,containerId:a.current};o.current=Gwe(c)}).catch(c=>{console.error("Failed to load TradingView widget:",c)}),()=>{l=!1,o.current&&(o.current=null)}},[n,e,r]),D.useEffect(()=>()=>{AZ()},[]),r?m.jsx("div",{className:`tradingview-widget-container ${i}`}):m.jsx("div",{className:`tradingview-widget-wrapper ${i}`,children:m.jsx("div",{ref:s,id:a.current,className:"tradingview-widget-container"})})}function Qwe(n,e,r){return e!==n?m.jsx("span",{style:{fontSize:"0.7rem",opacity:.5,marginLeft:"0.25rem"},children:""}):m.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"0.25rem"},children:r==="asc"?"":""})}function Df({message:n="Loading..."}){return m.jsx("div",{className:"message loading",children:n})}function Of({error:n}){return m.jsxs("div",{className:"message error",children:["Error: ",n]})}function _a({message:n}){return m.jsx("div",{className:"message empty",children:n})}function NZ({message:n}){return m.jsx("div",{className:"message warning",children:n})}function LA({isConnected:n,connectedText:e=" LIVE",disconnectedText:r=" OFFLINE"}){return m.jsx("div",{className:"status-indicator",children:m.jsx("span",{className:`status-dot ${n?"connected":"disconnected"}`,children:n?e:r})})}function If({title:n,children:e}){return m.jsxs("div",{className:"layout-header",children:[m.jsx("div",{className:"layout-header-title",children:n}),e&&m.jsx("div",{className:"layout-header-actions",children:e})]})}function or({field:n,currentSortField:e,sortDirection:r,onSort:i,children:s,center:o=!1}){return m.jsxs("div",{className:`table-header-cell ${o?"left":"right"}`,onClick:()=>i(n),children:[s,Qwe(n,e,r)]})}function mO({children:n,center:e=!1}){return m.jsx("div",{className:`table-header-cell ${e?"left":"right"}`,children:n})}function Jwe({onClick:n,disabled:e}){return console.log("[CancelButton] Rendering",{disabled:e,hasOnClick:!!n}),m.jsx("button",{onClick:r=>{console.log("[CancelButton] Button clicked",{disabled:e,event:r}),!e&&n?n(r):console.warn("[CancelButton] Click ignored - button is disabled",{disabled:e})},onMouseDown:r=>{console.log("[CancelButton] Mouse down",{disabled:e,event:r})},className:"btn btn-danger",disabled:e,style:{pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer"},children:"Cancel"})}function Zwe({onClick:n}){return m.jsx("button",{onClick:n,className:"btn btn-success",children:"Close"})}function e1e({onConfirm:n,label:e="Slide to confirm",confirmThreshold:r=90,disabled:i=!1,icon:s}){const[o,a]=D.useState(0),[l,c]=D.useState(!1),u=D.useRef(null),h=D.useRef(null),d=p=>{i||(p.preventDefault(),c(!0))};D.useEffect(()=>{if(!l)return;const p=b=>{if(!u.current||i)return;const y=u.current.getBoundingClientRect(),v=b.clientX-y.left,w=y.width,k=Math.max(0,Math.min(100,v/w*100));a(k)},g=()=>{i||(o>=r?(n(),setTimeout(()=>{a(0)},200)):a(0),c(!1))};return document.addEventListener("mousemove",p),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",g)}},[l,o,r,n,i]);const f=o>=r;return m.jsxs("div",{ref:u,className:`slider-confirm-bar ${i?"disabled":""} ${l?"dragging":""}`,children:[m.jsx("div",{className:`slider-confirm-bar-progress ${f?"confirmed":"default"} ${l?"no-transition":""}`,style:{width:`${o}%`}}),m.jsx("div",{className:"slider-confirm-bar-label",children:f?"Release to confirm":e}),m.jsx("div",{ref:h,onMouseDown:d,className:`slider-confirm-bar-thumb ${i?"disabled":""} ${l?"dragging":""} ${f?"confirmed":""}`,style:{left:`${o}%`},children:s?m.jsx("span",{className:`slider-confirm-bar-thumb-icon ${f?"confirmed":""}`,children:s}):m.jsx("span",{className:`slider-confirm-bar-thumb-arrow ${f?"confirmed":""}`,children:""})})]})}function t1e({isOpen:n,value:e,min:r,max:i,onConfirm:s,onCancel:o}){const[a,l]=D.useState("");if(D.useEffect(()=>{n&&l(e.toString())},[n,e]),!n)return null;const c=y=>{const v=a==="0"?y:a+y;parseFloat(v)<=i&&l(v)},u=()=>{a.includes(".")||l(a+".")},h=()=>{a.length>1?l(a.slice(0,-1)):l("0")},d=()=>{l("0")},f=()=>{const y=parseFloat(a)||0,v=Math.max(r,Math.min(i,y));s(v)},p=parseFloat(a)||0,g=p>=r&&p<=i,b=m.jsx("div",{className:"modal-overlay",onClick:o,style:{zIndex:1e4},children:m.jsxs("div",{className:"modal-content number-pad-content",onClick:y=>y.stopPropagation(),children:[m.jsx("div",{className:"modal-header",children:m.jsx("h3",{children:"Enter Amount"})}),m.jsxs("div",{className:"modal-body",children:[m.jsxs("div",{className:"number-pad-display",children:[m.jsx("div",{className:"number-pad-display-value",children:_n(p)}),m.jsxs("div",{className:"number-pad-display-range",children:["Min: ",_n(r)," | Max: ",_n(i)]}),!g&&p>0&&m.jsxs("div",{className:"number-pad-display-error",children:["Value must be between ",_n(r)," and"," ",_n(i)]})]}),m.jsxs("div",{className:"number-pad-grid",children:[m.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"1"),children:"1"}),m.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"2"),children:"2"}),m.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"3"),children:"3"}),m.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"4"),children:"4"}),m.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"5"),children:"5"}),m.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"6"),children:"6"}),m.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"7"),children:"7"}),m.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"8"),children:"8"}),m.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"9"),children:"9"}),m.jsx("button",{type:"button",className:"number-pad-button",onClick:u,children:"."}),m.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"0"),children:"0"}),m.jsx("button",{type:"button",className:"number-pad-button number-pad-button-action",onClick:h,children:""})]}),m.jsxs("div",{className:"number-pad-actions",children:[m.jsx("button",{type:"button",className:"number-pad-action-button",onClick:d,children:"Clear"}),m.jsx("button",{type:"button",className:"number-pad-action-button number-pad-action-button-max",onClick:()=>{l(i.toString())},children:"Max"})]})]}),m.jsxs("div",{className:"modal-footer",children:[m.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),m.jsx("button",{onClick:f,className:"btn btn-primary",disabled:!g,children:"Confirm"})]})]})});return typeof document<"u"?Ql.createPortal(b,document.body):null}const jZ=({level:n,index:e,isLast:r,depthPercent:i,formatPrice:s,formatSize:o})=>{const a=n.flash==="up"?"flash-up":n.flash==="down"?"flash-down-ask":"";return m.jsxs("div",{className:`orderbook-level ask ${a}`,style:{borderBottom:r?"none":void 0},children:[m.jsx("div",{className:"orderbook-depth-bar ask",style:{width:`${i}%`}}),m.jsx("div",{className:"orderbook-level-content ask",children:s(n.price)}),m.jsx("div",{className:"orderbook-level-content right",children:o(n.size)}),m.jsx("div",{className:"orderbook-depth-indicator",children:m.jsx("div",{className:"orderbook-depth-line ask"})})]})},LZ=({level:n,index:e,isLast:r,depthPercent:i,formatPrice:s,formatSize:o})=>{const a=n.flash==="up"?"flash-up":n.flash==="down"?"flash-down-bid":"";return m.jsxs("div",{className:`orderbook-level bid ${a}`,style:{borderBottom:r?"none":void 0},children:[m.jsx("div",{className:"orderbook-depth-bar bid",style:{width:`${i}%`}}),m.jsx("div",{className:"orderbook-level-content bid",children:s(n.price)}),m.jsx("div",{className:"orderbook-level-content right",children:o(n.size)}),m.jsx("div",{className:"orderbook-depth-indicator",children:m.jsx("div",{className:"orderbook-depth-line bid"})})]})};function n1e({baseURL:n,wsURL:e,marketId:r,maxDepth:i=_J,height:s=wJ,authToken:o,walletAddress:a,deviceID:l}){var P,O;const{orderbook:c,loading:u,error:h,isConnected:d,wsError:f}=SJ({baseURL:n,wsURL:e,marketId:r,maxDepth:i,authToken:o,walletAddress:a,deviceID:l}),p=D.useRef(null),g=D.useRef(null),b=D.useRef(null),y=D.useRef(0),v=D.useRef(0);D.useEffect(()=>{const M=c.asks.length!==y.current,R=c.bids.length!==v.current;if(!(!M&&!R))return y.current=c.asks.length,v.current=c.bids.length,b.current!==null&&cancelAnimationFrame(b.current),b.current=requestAnimationFrame(()=>{if(p.current&&M){const j=p.current;j.scrollTop=j.scrollHeight}if(g.current&&R){const j=g.current;j.scrollTop=0}b.current=null}),()=>{b.current!==null&&(cancelAnimationFrame(b.current),b.current=null)}},[c.asks.length,c.bids.length]);const w=c.asks.length>0?((P=c.asks[c.asks.length-1])==null?void 0:P.cumulative)??0:0,k=c.bids.length>0?((O=c.bids[c.bids.length-1])==null?void 0:O.cumulative)??0:0,_=D.useMemo(()=>Math.max(w,k),[w,k]),S=ax,C=lx,E=D.useCallback(M=>_===0?0:M/_*100,[_]);return u?m.jsx(Df,{message:"Loading orderbook..."}):h?m.jsx(Of,{error:h}):m.jsxs("div",{className:"layout-container",style:{height:s},children:[f&&(c.asks.length>0||c.bids.length>0)&&m.jsxs("div",{className:"orderbook-ws-warning",children:[m.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),m.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),m.jsx(If,{title:m.jsx(LA,{isConnected:d}),children:m.jsxs("div",{children:["Depth: ",i]})}),c.midPrice&&m.jsxs("div",{className:"orderbook-mid-price",children:[m.jsx("div",{className:"orderbook-mid-price-value",children:S(c.midPrice)}),c.spread!==void 0&&m.jsxs("div",{className:"orderbook-mid-price-spread",children:["Spread: ",S(c.spread)]})]}),m.jsxs("div",{className:"orderbook-content",children:[m.jsxs("div",{className:"orderbook-section",ref:p,children:[c.asks.map((M,R)=>{const j=E(M.cumulative);return m.jsx(jZ,{level:M,index:R,isLast:R===c.asks.length-1,depthPercent:j,formatPrice:S,formatSize:C},`ask-${M.price}-${R}`)}),c.asks.length===0&&m.jsx(_a,{message:"No ask orders"})]}),m.jsxs("div",{className:"orderbook-section bids",ref:g,children:[c.bids.map((M,R)=>{const j=E(M.cumulative);return m.jsx(LZ,{level:M,index:R,isLast:R===c.bids.length-1,depthPercent:j,formatPrice:S,formatSize:C},`bid-${M.price}-${R}`)}),c.bids.length===0&&m.jsx(_a,{message:"No bid orders"})]})]}),m.jsx(FZ,{totalBids:k,totalAsks:w})]})}const FZ=Ne.memo(({totalBids:n,totalAsks:e})=>{const r=n+e,i=r>0?`${(n/r*100).toFixed(0)}%`:"0%",s=r>0?`${(e/r*100).toFixed(0)}%`:"0%";return m.jsxs("div",{className:"orderbook-footer",children:[m.jsxs("div",{className:"orderbook-footer-legend",children:[m.jsx("div",{className:"orderbook-footer-bar bid"}),m.jsx("span",{className:"color-text-muted",children:i})]}),m.jsxs("div",{className:"orderbook-footer-legend",children:[m.jsx("div",{className:"orderbook-footer-bar ask"}),m.jsx("span",{className:"color-text-muted",children:s})]})]})});FZ.displayName="FooterSummary";const r1e=Ne.memo(n1e);function i1e(n,e,r,i){const s=a=>{const l=1-a;return 3*l*l*a*n+3*l*a*a*r+a*a*a},o=a=>{const l=1-a;return 3*l*l*a*e+3*l*a*a*i+a*a*a};return a=>{if(a<=0)return 0;if(a>=1)return 1;let l=0,c=1,u=.5;for(let h=0;h<12;h++){const d=s(u);if(Math.abs(d-a)<1e-4)break;d<a?l=u:c=u,u=(l+c)/2}return o(u)}}function s1e({baseURL:n,wsURL:e,marketId:r,maxDepth:i=_J,height:s=wJ,authToken:o,walletAddress:a,deviceID:l}){var V,F;const{orderbook:c,loading:u,error:h,isConnected:d,wsError:f}=SJ({baseURL:n,wsURL:e,marketId:r,maxDepth:i,authToken:o,walletAddress:a,deviceID:l}),p=D.useRef(null),g=D.useRef(null),b=D.useRef(null),y=D.useRef(null),v=D.useRef(!1),w=D.useRef(null),k=D.useRef(null),_=D.useRef(!1),S=D.useRef(0),C=c.asks.length>0?((V=c.asks[c.asks.length-1])==null?void 0:V.cumulative)??0:0,E=c.bids.length>0?((F=c.bids[c.bids.length-1])==null?void 0:F.cumulative)??0:0,P=D.useMemo(()=>Math.max(C,E),[C,E]),O=ax,M=lx,R=D.useCallback(G=>P===0?0:G/P*100,[P]),j=D.useCallback((G,H,A)=>{if(v.current)return;v.current=!0;const Q=A,J=H-Q,K=300,Z=performance.now(),se=Z+K,be=i1e(.57,.4,.55,1.17),Oe=Ke=>{if(Ke>=se){G.scrollTop=Math.max(0,H),v.current=!1,S.current=performance.now(),y.current&&(cancelAnimationFrame(y.current),y.current=null);return}const De=Ke-Z,Pe=Math.min(De/K,1),We=be(Pe),nt=Q+J*We;G.scrollTop=Math.max(0,nt),y.current=requestAnimationFrame(Oe)};y.current=requestAnimationFrame(Oe)},[]),B=D.useCallback((G=0)=>{if(v.current||performance.now()-S.current<500||!p.current||!g.current)return;const Q=p.current,K=g.current.clientHeight;if(K===0)return;const Z=K/2,se=20.83333;if(c.asks.length*se<=Z||c.spread===void 0)return;if(!b.current){if(G<3){k.current&&clearTimeout(k.current);const Ie=50*(G+1);k.current=window.setTimeout(()=>{k.current=null,B(G+1)},Ie)}return}const Oe=b.current,Ke=Oe.offsetTop,De=Oe.offsetHeight;if(De===0){if(G<3){k.current&&clearTimeout(k.current);const Ie=50*(G+1);k.current=window.setTimeout(()=>{k.current=null,B(G+1)},Ie)}return}const Pe=Ke+De/2,We=K/2,nt=Pe-We-se,U=Q.scrollTop;Math.abs(nt-U)>1&&j(Q,Math.max(0,nt),U)},[c.asks.length,c.spread,j]);D.useEffect(()=>{const G=()=>{_.current&&(_.current=!1,B())};return window.addEventListener("mouseup",G),()=>{window.removeEventListener("mouseup",G)}},[B]),D.useEffect(()=>{if(!p.current||!g.current)return;const G=requestAnimationFrame(()=>{requestAnimationFrame(()=>{B()})});return()=>{cancelAnimationFrame(G),y.current&&(cancelAnimationFrame(y.current),y.current=null),w.current&&(clearTimeout(w.current),w.current=null),k.current&&(clearTimeout(k.current),k.current=null),v.current=!1}},[c.asks.length,c.bids.length,c.spread,P,B]);const L=D.useCallback(()=>{v.current&&y.current&&(cancelAnimationFrame(y.current),y.current=null,v.current=!1),w.current&&(clearTimeout(w.current),w.current=null)},[]),$=D.useCallback(G=>{const H=G.currentTarget,A=H.offsetWidth-H.clientWidth;if(A>0){const Q=H.getBoundingClientRect();G.clientX-Q.left>H.clientWidth-A-5&&(_.current=!0,L())}},[L]),z=D.useCallback(()=>{_.current&&L()},[L]),W=D.useCallback(()=>{_.current&&(_.current=!1,B())},[B]),q=D.useCallback(()=>{L(),w.current&&clearTimeout(w.current),_.current||(w.current=window.setTimeout(()=>{w.current=null,B()},150))},[B,L]);return u?m.jsx(Df,{message:"Loading orderbook..."}):h?m.jsx(Of,{error:h}):m.jsxs("div",{className:"layout-container",style:{height:s},children:[f&&(c.asks.length>0||c.bids.length>0)&&m.jsxs("div",{className:"orderbook-ws-warning",children:[m.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),m.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),m.jsx(If,{title:m.jsx(LA,{isConnected:d}),children:m.jsxs("div",{children:["Depth: ",i]})}),m.jsx("div",{className:"orderbook-content",ref:g,children:m.jsxs("div",{className:"orderbook-section",ref:p,onScroll:q,onMouseDown:$,onMouseMove:z,onMouseUp:W,onMouseLeave:W,children:[c.asks.map((G,H)=>{const A=R(G.cumulative);return m.jsx(jZ,{level:G,index:H,isLast:H===c.asks.length-1&&c.bids.length===0,depthPercent:A,formatPrice:O,formatSize:M},`ask-${G.price}-${H}`)}),c.spread!==void 0&&m.jsxs("div",{className:"orderbook-mid-price-spread",ref:b,children:["Spread: ",O(c.spread)]}),c.bids.map((G,H)=>{const A=R(G.cumulative);return m.jsx(LZ,{level:G,index:H,isLast:H===c.bids.length-1,depthPercent:A,formatPrice:O,formatSize:M},`bid-${G.price}-${H}`)}),c.asks.length===0&&c.bids.length===0&&m.jsx(_a,{message:"No orders"}),c.asks.length===0&&c.bids.length>0&&m.jsx(_a,{message:"No ask orders"}),c.bids.length===0&&c.asks.length>0&&m.jsx(_a,{message:"No bid orders"})]})}),m.jsx($Z,{totalBids:E,totalAsks:C})]})}const $Z=Ne.memo(({totalBids:n,totalAsks:e})=>{const r=n+e,i=r>0?`${(n/r*100).toFixed(0)}%`:"0%",s=r>0?`${(e/r*100).toFixed(0)}%`:"0%";return m.jsxs("div",{className:"orderbook-footer",children:[m.jsxs("div",{className:"orderbook-footer-legend",children:[m.jsx("div",{className:"orderbook-footer-bar bid"}),m.jsx("span",{className:"color-text-muted",children:i})]}),m.jsxs("div",{className:"orderbook-footer-legend",children:[m.jsx("div",{className:"orderbook-footer-bar ask"}),m.jsx("span",{className:"color-text-muted",children:s})]})]})});$Z.displayName="FooterSummary";const o1e=Ne.memo(s1e);function a1e({baseURL:n=xu,wsURL:e=xJ,marketId:r=Lge,symbol:i,limit:s=Fge,authToken:o,walletAddress:a,deviceID:l}){const{lastPrice:c,displayPrice:u,loading:h,error:d,isConnected:f,priceChange:p}=$w({baseURL:n,wsURL:e,marketId:r,symbol:i,limit:s,authToken:o,walletAddress:a,deviceID:l}),[g,b]=D.useState([]),[y,v]=D.useState(!1),w=D.useRef(null),k=D.useRef(!1),_=D.useRef(null),S=D.useCallback(async()=>{if(!w.current||!r){console.debug("[TradePrice] fetchRecentTrades skipped: missing client or marketId");return}if(k.current){console.debug("[TradePrice] fetchRecentTrades skipped: already fetching");return}console.debug("[TradePrice] Starting fetchRecentTrades"),k.current=!0,v(!0);try{const q=await w.current.getRecentTrades(r,20);if(q&&Array.isArray(q)&&q.length>0){const F=[...q].sort((G,H)=>{const A=na(G.timestamp);return na(H.timestamp)-A}).map(G=>{const H=na(G.timestamp),A=typeof G.quantity=="string"?it(G.quantity):typeof G.quantity=="number"?G.quantity:0,Q=typeof G.price=="string"?it(G.price):typeof G.price=="number"?G.price:0;return{time:H,size:A,price:Q,is_buyer_maker:!1}});b(F),console.debug("[TradePrice] fetchRecentTrades completed successfully")}else b([]),console.debug("[TradePrice] fetchRecentTrades: no trades returned")}catch(q){console.error("[TradePrice] Failed to fetch recent trades:",q),b([])}finally{console.debug("[TradePrice] fetchRecentTrades finished, clearing loading state"),v(!1),k.current=!1}},[r]);D.useEffect(()=>{if(!r){console.debug("[TradePrice] Initialization skipped: no marketId");return}console.debug("[TradePrice] Initializing trades fetch for marketId:",r),k.current=!1,v(!1),w.current=new ar({baseURL:n});const q=setTimeout(()=>{w.current&&r&&!k.current?(console.debug("[TradePrice] Executing initial fetchRecentTrades"),S()):console.debug("[TradePrice] Initial fetch skipped:",{hasClient:!!w.current,hasMarketId:!!r,isFetching:k.current})},100);return()=>{console.debug("[TradePrice] Cleaning up trades fetch effect"),clearTimeout(q),k.current=!1,v(!1)}},[n,r]);const C=D.useRef(""),E=D.useRef(null),P=D.useCallback(()=>{const q=_.current;if(!q)return;const V=q.parentElement;if(!V)return;const F=q.textContent||"";if(!F)return;const G=window.getComputedStyle(V),H=parseFloat(G.paddingLeft)+parseFloat(G.paddingRight),A=V.clientWidth-H;let Q=12,J=48,K=Q;const Z=document.createElement("div");for(Z.style.position="absolute",Z.style.visibility="hidden",Z.style.whiteSpace="nowrap",Z.style.fontFamily=window.getComputedStyle(q).fontFamily,Z.style.fontWeight=window.getComputedStyle(q).fontWeight,document.body.appendChild(Z);Q<=J;){const be=Math.floor((Q+J)/2);Z.style.fontSize=`${be}px`,Z.textContent=F,Z.offsetWidth<=A?(K=be,Q=be+1):J=be-1}document.body.removeChild(Z);const se=parseFloat(window.getComputedStyle(q).fontSize);Math.abs(se-K)>.5&&(q.style.fontSize=`${K}px`)},[]);D.useEffect(()=>{if(u==null)return;const q=Zd(u);if(q===C.current)return;C.current=q,E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{P()},150);let V;const F=()=>{clearTimeout(V),V=window.setTimeout(()=>{E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{P()},150)},100)};return window.addEventListener("resize",F),()=>{E.current!==null&&clearTimeout(E.current),clearTimeout(V),window.removeEventListener("resize",F)}},[u,P]);const O=D.useCallback(q=>{if(!q||isNaN(q)||q<=0)return"Invalid";let V=q;V<9466848e5&&(V=V*1e3);const F=new Date(V);return isNaN(F.getTime())?"Invalid":F.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},[]),M=D.useCallback(q=>q?"#51cf66":"#ff6b6b",[]),R=D.useCallback(q=>q?"BUY":"SELL",[]),j=D.useCallback(q=>q?"":"",[]);if(h)return m.jsx(Df,{message:"Loading trade price..."});if(d)return m.jsx(Of,{error:d});if(u==null)return m.jsx(_a,{message:"No trade data available"});const B=c&&c.is_buyer_maker!==void 0,L=B?M(c.is_buyer_maker):"#888",$=B?R(c.is_buyer_maker):"N/A",z=B?j(c.is_buyer_maker):"",W=p==="up"?"flash-price-up":p==="down"?"flash-price-down":"";return m.jsxs("div",{className:"layout-container trade-price-container",children:[m.jsx(If,{title:m.jsx(LA,{isConnected:f}),children:m.jsx("div",{children:"Last Trade Price"})}),m.jsxs("div",{className:`trade-price-main ${W}`,children:[m.jsx("div",{ref:_,className:"trade-price-value",style:{color:L},children:Zd(u)}),m.jsxs("div",{className:"trade-price-side",style:{color:L},children:[m.jsx("span",{children:z}),m.jsx("span",{children:$})]})]}),m.jsx("div",{className:"trade-price-trades-table",children:y?m.jsx("div",{className:"message",children:"Loading trades..."}):g.length===0?m.jsx("div",{className:"message",children:"No trades available"}):m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Time"}),m.jsx("th",{className:"right",children:"Size"}),m.jsx("th",{className:"right",children:"Price"})]})}),m.jsx("tbody",{children:g.map(q=>{const V=q.is_buyer_maker?"#51cf66":"#ff6b6b";return m.jsxs("tr",{children:[m.jsx("td",{children:O(q.time)}),m.jsx("td",{className:"right",children:b0e(q.size)}),m.jsx("td",{className:"right price",style:{color:V},children:Zd(q.price)})]},`${q.time}-${q.price}-${q.size}`)})})]})})]})}const l1e=Ne.memo(a1e),c1e=({...n})=>m.jsx(Q0e,{...n,className:"toaster",expand:!0,richColors:!1,closeButton:!1,toastOptions:{duration:4e3,classNames:{toast:"toast",title:"toast-title",description:"toast-description",actionButton:"toast-action-button",cancelButton:"toast-cancel-button",closeButton:"toast-close-button"}}}),u1e=async n=>{try{return await navigator.clipboard.writeText(n),!0}catch{try{const r=document.createElement("textarea");return r.value=n,r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),!0}catch(r){return console.error("Failed to copy to clipboard:",r),!1}}},di=n=>({label:"Copy",onClick:async()=>{await u1e(n)?Je.success("Error message copied to clipboard"):Je.error("Failed to copy error message")}});function zZ(n){const e=n.useWebSocket!==!1,[r,i]=D.useState([]),[s,o]=D.useState(!0),[a,l]=D.useState(""),[c,u]=D.useState(0),[h,d]=D.useState(!1),f=D.useRef(null),p=D.useRef(null),g=D.useRef(0),b=D.useRef(!0),y=D.useRef(!1),v=D.useRef(n);v.current=n;const w=D.useCallback(C=>{const E=hA(C,it),P=String(E.bucketId).trim();return(!P||P===""||P==="undefined"||P==="null")&&console.warn("[useBucketCollections] [transformBucket] Invalid bucketId detected:",P),E},[]),k=D.useCallback(async()=>{if(!f.current)return;const C=v.current;if(!C.walletAddress||C.walletAddress.trim()===""){u(0);return}try{const E=await f.current.getBalanceDecimal(C.walletAddress,"USDC"),P=jt(E.available_balance);u(P)}catch(E){console.warn("Failed to fetch spot wallet balance (USDC):",E),u(0)}},[]),_=D.useCallback(async()=>{if(!f.current)return;const C=v.current;if(!C.walletAddress||C.walletAddress.trim()===""){l("Wallet address is required"),i([]),o(!1),b.current=!1;return}l(""),b.current&&o(!0);try{console.log("[useBucketCollections] [fetchCollections] Starting fetch...",{walletAddress:C.walletAddress,useWebSocket:e,isSubscribed:y.current}),k(),console.log("[useBucketCollections] [fetchCollections] Calling getBuckets API...");const E=await f.current.getBuckets(C.walletAddress);console.log("[useBucketCollections] [fetchCollections] Raw API response:",{response:E,responseType:typeof E,isArray:Array.isArray(E),responseLength:Array.isArray(E)?E.length:"N/A"});const P=Array.isArray(E)?E:[];console.log("[useBucketCollections] [fetchCollections] Buckets data after normalization:",{bucketsData:P,bucketsDataLength:P.length,bucketsDataTypes:P.map((R,j)=>({index:j,type:typeof R,hasBucketId:!!(R!=null&&R.bucket_id),bucketId:R==null?void 0:R.bucket_id}))}),console.log(`[useBucketCollections] [fetchCollections] About to transform ${P.length} buckets:`,P);const M=P.map(w).filter(R=>R.bucketId&&R.bucketId.trim()!==""&&R.status!=="dormant");i(M),(!e||!y.current)&&(b.current=!1,o(!1))}catch(E){const P=E instanceof Error?E.message:"Failed to load bucket collections";l(P),console.error("[useBucketCollections] [fetchCollections] Failed to fetch bucket collections:",{error:E,errorMessage:P,walletAddress:C.walletAddress,stack:E instanceof Error?E.stack:void 0}),(!e||!y.current)&&(b.current=!1,o(!1))}},[w,k,e]),S=D.useCallback(C=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] WebSocket data received:",{data:C,hasBuckets:!!C.buckets,bucketsIsArray:Array.isArray(C.buckets),bucketsLength:Array.isArray(C.buckets)?C.buckets.length:0}),C.buckets&&Array.isArray(C.buckets)){console.log("[useBucketCollections] [handleBucketsUpdate] Transforming WebSocket buckets:",C.buckets);const E=C.buckets.map(w);console.log("[useBucketCollections] [handleBucketsUpdate] Transformed collections:",E);const P=E.filter(O=>O.bucketId&&O.bucketId.trim()!==""&&O.status!=="dormant");if(P.length!==E.length){const O=E.length-P.length,M=E.filter(j=>!j.bucketId||j.bucketId.trim()===""),R=E.filter(j=>j.bucketId&&j.bucketId.trim()!==""&&j.status==="dormant");console.warn(`[useBucketCollections] [handleBucketsUpdate] WebSocket: Filtered out ${O} collections (${M.length} with empty bucketId, ${R.length} with status "dormant")`,{filteredByBucketId:M,filteredByStatus:R})}console.log("[useBucketCollections] [handleBucketsUpdate] Setting collections from WebSocket:",{validCollectionsCount:P.length,validCollections:P}),i(O=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] Previous collections:",{prevCount:O.length,prev:O}),O.length!==P.length)return P;const M=JSON.stringify(O),R=JSON.stringify(P);return M===R?O:P}),b.current&&(b.current=!1,o(!1))}},[w]);return D.useEffect(()=>{if(!n.walletAddress||n.walletAddress.trim()===""){o(!1),l("Wallet address is required"),i([]),p.current&&(p.current.disconnect(),p.current=null),g.current!==null&&(clearInterval(g.current),g.current=0);return}if(!n.wsURL||n.wsURL.trim()===""){o(!1),l("WebSocket URL is required"),i([]);return}const C=new ar({baseURL:n.baseURL,sessionToken:n.authToken});if(f.current=C,b.current=!0,y.current=!1,console.log("[useBucketCollections] [useEffect] Initializing, calling fetchCollections..."),_(),e){const E=new ec({url:n.wsURL,authToken:n.authToken,walletAddress:n.walletAddress,deviceID:n.deviceID});p.current=E;const P=()=>{if(E.isReadyForSubscriptions()&&!y.current)try{E.subscribeBuckets(S),y.current=!0}catch(M){console.error("[useBucketCollections] Failed to subscribe to buckets:",M),M instanceof Error&&M.message.includes("Authentication")&&(y.current=!1)}else if(E.isConnected()&&!E.isReadyForSubscriptions()){const M=E.getAuthState();M==="pending"?console.debug("[useBucketCollections] Waiting for authentication to complete..."):M==="failed"&&(console.error("[useBucketCollections] Authentication failed - cannot subscribe to buckets"),l("Authentication failed. Please re-authenticate."))}};E.connect().then(()=>{d(!0),P()}).catch(M=>{console.error("Failed to connect WebSocket:",M),d(!1),b.current&&(b.current=!1,o(!1)),n.refreshInterval&&n.refreshInterval>0&&(g.current=window.setInterval(()=>{_()},n.refreshInterval))});const O=E.onStateChange(M=>{M===Pt.Connected?(d(!0),y.current&&P(),g.current!==null&&(clearInterval(g.current),g.current=0)):(d(!1),M===Pt.Disconnected&&n.refreshInterval&&n.refreshInterval>0&&g.current===null&&(g.current=window.setInterval(()=>{_()},n.refreshInterval)))});return()=>{O&&O(),p.current&&(p.current.unsubscribeBuckets(S),p.current.disconnect(),p.current=null),g.current!==null&&(clearInterval(g.current),g.current=0)}}else return n.refreshInterval&&n.refreshInterval>0&&(g.current=window.setInterval(()=>{_()},n.refreshInterval)),()=>{g.current!==null&&(clearInterval(g.current),g.current=0)}},[n.baseURL,n.wsURL,n.authToken,n.walletAddress,n.deviceID,n.refreshInterval,e,S]),D.useEffect(()=>{console.log("[useBucketCollections] [useEffect] Hook state changed, returning:",{collectionsCount:r.length,collections:r,loading:s,error:a,spotWalletBalance:c})},[r,s,a,c]),{collections:r,loading:s,error:a,refresh:_,spotWalletBalance:c,isConnected:h}}const d1e=D.forwardRef(function({baseURL:e=xu,wsURL:r=xJ,mnemonic:i=$ge,marketId:s,marketSymbol:o,selectedBucketBalance:a,selectedBucketId:l,onLeverageClick:c,authToken:u,walletAddress:h},d){const{selectedMarketId:f,selectedMarketSymbol:p}=tc({baseURL:e,autoFetchMarkets:!0}),g=s||f||"",b=o||p||"Market",{lastPrice:y}=$w({baseURL:e,wsURL:r,marketId:g}),v=(y==null?void 0:y.price)||0,w=D.useRef(0),{collections:k,spotWalletBalance:_}=zZ({baseURL:e,wsURL:r,walletAddress:h||"",authToken:u||"",useWebSocket:!!h&&!!u}),S=D.useMemo(()=>!l||!k.length?null:k.find(Ye=>Ye.bucketId===l)||null,[k,l]),{orderType:C,setOrderType:E,fundPercent:P,sizeInput:O,price:M,leverage:R,positionMode:j,marginMode:B,availableBalance:L,currentPrice:$,isReady:z,loading:W,result:q,setFundPercent:V,setSizeInput:F,setPrice:G,setMarginMode:H,setLeverage:A,placeBuyOrder:Q,placeSellOrder:J,calculateValue:K,calculateMargin:Z,calculateSizeUSD:se,getOrderPrice:be,getAvailableTradeAmount:Oe}=v0e({baseURL:e,mnemonic:i,marketId:g,selectedBucketBalance:a,tradePrice:v}),Ke=D.useMemo(()=>be(),[be,C,M,$]),De=D.useMemo(()=>Oe(),[Oe,L,R]),Pe=D.useMemo(()=>K(),[K,O,P,L,Ke,R]),We=D.useMemo(()=>Z(),[Z,R,Pe]),nt=D.useMemo(()=>it(Pe),[Pe]),U=D.useMemo(()=>it(We),[We]),_e=D.useMemo(()=>({minimumFractionDigits:Ga,maximumFractionDigits:Hge}),[]),Ie=D.useMemo(()=>$.toFixed(Ga),[$]);D.useMemo(()=>l?`Available in ${l}`:"Available to Trade",[l]);const me=D.useMemo(()=>{const Ye=k.reduce((He,ot)=>He+ot.totalEquity,0);return _+Ye},[k,_]),$e=D.useMemo(()=>me.toLocaleString("en-US",_e),[me,_e]),ue=D.useMemo(()=>_.toLocaleString("en-US",_e),[_,_e]),ee=D.useMemo(()=>S?S.nominalValue.toLocaleString("en-US",_e):"--",[S,_e]),le=D.useMemo(()=>S?S.nominalValue.toLocaleString("en-US",_e):"--",[S,_e]),te=D.useMemo(()=>S?S.unrealizedPnL.toLocaleString("en-US",_e):"--",[S,_e]),ce=D.useMemo(()=>S?(S.crossMarginRatio*100).toFixed(Ga)+"%":"--",[S]),je=D.useMemo(()=>S?S.maintenanceMargin.toLocaleString("en-US",_e):"--",[S,_e]),de=D.useMemo(()=>S?`${S.leverage.toFixed(Ga)}x`:"--",[S]),Ae=D.useCallback(()=>{H(B===Eg?Vge:Eg)},[B,H]),Le=D.useCallback(()=>{E(tO)},[E]),ve=D.useCallback(()=>{E(uS)},[E]),he=D.useCallback(()=>{V(Math.min(lS,P+cS))},[P,V]),ge=D.useCallback(()=>{V(Math.max(Vv,P-cS))},[P,V]),pe=D.useCallback(Ye=>{const He=parseInt(Ye.target.value);V(He)},[V]),fe=D.useCallback(Ye=>{G(Ye.target.value)},[G]),Re=D.useCallback(Ye=>{const He=parseFloat(Ye.target.value);F(isNaN(He)?0:He)},[F]),Ve=D.useCallback(()=>{const Ye=Je.loading("Submit transaction...",{description:"Placing buy order"});w.current=typeof Ye=="number"?Ye:0,Q()},[Q]),Xe=D.useCallback(()=>{const Ye=Je.loading("Submit transaction...",{description:"Placing sell order"});w.current=typeof Ye=="number"?Ye:0,J()},[J]);return D.useImperativeHandle(d,()=>({leverage:R,setLeverage:A,calculateMaxRatio:Ye=>{const He=se();be();const ot=He;return L>0&&ot>0?(ot/L).toFixed(Ga):Ye.toFixed(Ga)}}),[R,A,se,be,L]),D.useEffect(()=>{if(q)if(w.current!==0&&(Je.dismiss(w.current),w.current=0),q.success){const Ye=q.orderId?`Order ID: ${q.orderId}`:q.message||"Order placed successfully";Je.success("Order Placed Successfully",{description:Ye})}else q.error&&Je.error("Order Failed",{description:q.error,action:di(q.error||"")})},[q]),m.jsxs("div",{className:"component",children:[m.jsx("h2",{children:b}),m.jsxs("div",{className:"trade-op-config",children:[m.jsx("div",{className:"trade-op-badge",children:m.jsx("span",{className:"trade-op-badge-label",children:j})}),m.jsxs("div",{className:"trade-op-badge",onClick:Ae,style:{cursor:"pointer"},children:[m.jsx("span",{className:"trade-op-badge-label",children:B}),m.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),m.jsxs("div",{className:"trade-op-badge",onClick:c,style:{cursor:"pointer"},children:[m.jsxs("span",{className:"trade-op-badge-label",children:[R,"x"]}),m.jsx("span",{className:"trade-op-info-icon",children:"i"})]})]}),m.jsxs("div",{className:"trade-op-order-type-selector",children:[m.jsx("button",{onClick:Le,className:`btn-toggle ${C===tO?"active":""}`,children:"MARKET"}),m.jsx("button",{onClick:ve,className:`btn-toggle ${C===uS?"active":""}`,children:"LIMIT"})]}),C===uS&&m.jsx("div",{className:"trade-op-form-group",children:m.jsxs("div",{className:"trade-op-form-row",children:[m.jsx("label",{htmlFor:"price",className:"trade-op-label",children:"Price:"}),m.jsx("input",{id:"price",type:"number",value:M,onChange:fe,placeholder:Ie,step:Bge,min:Dj})]})}),m.jsxs("div",{className:"trade-op-form-group",children:[m.jsxs("div",{className:"trade-op-form-row",style:{marginBottom:"0.5rem"},children:[m.jsx("label",{htmlFor:"size",className:"trade-op-label",children:"Size:"}),m.jsxs("div",{className:"trade-op-size-controls",children:[m.jsx("input",{id:"size",type:"number",step:"any",value:O===0?"":O,onChange:Re,placeholder:"0",min:Dj,max:De,className:"trade-op-input"}),m.jsxs("div",{className:"trade-op-size-buttons",children:[m.jsx("button",{onClick:he,className:"btn-small",children:""}),m.jsx("button",{onClick:ge,className:"btn-small",children:""})]})]})]}),m.jsx("input",{type:"range",min:Vv,max:lS,value:P,onChange:pe,step:cS,style:{width:"100%","--slider-progress":`${(P-Vv)/(lS-Vv)*100}%`},className:"filled-slider"}),m.jsxs("div",{className:"trade-op-slider-labels",children:[m.jsx("span",{children:"0"}),m.jsx("span",{children:"20"}),m.jsx("span",{children:"40"}),m.jsx("span",{children:"60"}),m.jsx("span",{children:"80"}),m.jsx("span",{children:"100"})]})]}),m.jsxs("div",{className:"trade-op-action-panel",children:[m.jsxs("div",{children:[m.jsx("div",{className:"trade-op-panel-title buy",children:"LONG"}),m.jsxs("div",{className:"trade-op-panel-size",children:[O.toFixed(3),"/100.000"]}),m.jsx("button",{onClick:Ve,disabled:W||!z||Pe<=0,className:"btn-buy",children:W?"PLACING...":"BUY LONG"}),m.jsxs("div",{className:"trade-op-panel-details",children:[m.jsxs("div",{children:["Value ",nt.toFixed(2)]}),m.jsxs("div",{children:["Margin ",U.toFixed(2)]})]})]}),m.jsxs("div",{children:[m.jsx("div",{className:"trade-op-panel-title sell",children:"SHORT"}),m.jsxs("div",{className:"trade-op-panel-size",children:[O.toFixed(3),"/100.000"]}),m.jsx("button",{onClick:Xe,disabled:W||!z||Pe<=0,className:"btn-sell",children:W?"PLACING...":"SELL SHORT"}),m.jsxs("div",{className:"trade-op-panel-details",children:[m.jsxs("div",{children:["Value ",nt.toFixed(Ga)]}),m.jsxs("div",{children:["Margin ",U.toFixed(Ga)]})]})]})]}),m.jsxs("div",{className:"trade-op-info-panel",children:[m.jsxs("div",{className:"trade-op-info-row",children:[m.jsx("span",{className:"trade-op-info-label",children:"Account Equity:"}),m.jsxs("span",{className:"trade-op-info-value",children:[$e," USDC"]})]}),m.jsxs("div",{className:"trade-op-info-row",children:[m.jsx("span",{className:"trade-op-info-label",children:"Spot:"}),m.jsxs("span",{className:"trade-op-info-value",children:[ue," USDC"]})]}),m.jsxs("div",{className:"trade-op-info-row",children:[m.jsxs("span",{className:"trade-op-info-label",children:[l||"Bucket",":"]}),m.jsxs("span",{className:"trade-op-info-value",children:[ee," USDC"]})]}),m.jsx("div",{className:"trade-op-info-row",children:m.jsxs("span",{className:"trade-op-info-label",children:["Bucket Overview: ",l||"--"]})}),m.jsxs("div",{className:"trade-op-info-row",children:[m.jsx("span",{className:"trade-op-info-label",children:"Balance:"}),m.jsxs("span",{className:"trade-op-info-value",children:[le," USDC"]})]}),m.jsxs("div",{className:"trade-op-info-row",children:[m.jsx("span",{className:"trade-op-info-label",children:"Unrealized PNL:"}),m.jsxs("span",{className:"trade-op-info-value",children:[te," USDC"]})]}),m.jsxs("div",{className:"trade-op-info-row",children:[m.jsx("span",{className:"trade-op-info-label",children:"Cross Margin Ratio:"}),m.jsx("span",{className:"trade-op-info-value",children:ce})]}),m.jsxs("div",{className:"trade-op-info-row",children:[m.jsx("span",{className:"trade-op-info-label",children:"Maintenance Margin:"}),m.jsxs("span",{className:"trade-op-info-value",children:[je," USDC"]})]}),m.jsxs("div",{className:"trade-op-info-row",children:[m.jsx("span",{className:"trade-op-info-label",children:"Cross Account Leverage:"}),m.jsx("span",{className:"trade-op-info-value",children:de})]})]})]})});function BZ(n){const e=n.useWebSocket!==!1,[r,i]=D.useState([]),[s,o]=D.useState(!0),[a,l]=D.useState(null),[c,u]=D.useState(!1),h=D.useRef(null),d=D.useRef(null),f=D.useRef(!1),p=D.useRef(!1),g=D.useRef(n.walletAddress),b=D.useRef(n);b.current=n;const y=D.useCallback(_=>{const S=_.side==="ORDER_SIDE_BUY"?"BUY":"SELL",C=_.status||"PENDING";let E=C;C.includes("ORDER_STATUS_")&&(E=C.replace("ORDER_STATUS_",""));const P=_.time_in_force;let O=P;P&&P.includes("TIME_IN_FORCE_")&&(O=P.replace("TIME_IN_FORCE_",""));const M=W=>jt(W),R=M(_.quantity),j=M(_.price),B=M(_.filled_quantity),L=R-B,z=(W=>{if(W==null||W==="")return Date.now();if(typeof W=="number")return W;const q=parseFloat(String(W));return isNaN(q)?Date.now():q})(_.timestamp);return{id:_.order_id,orderId:_.order_id,marketId:_.market_id||_.bucket_id,symbol:`Market-${_.market_id||_.bucket_id||"N/A"}`,side:S,type:_.type,quantity:R,price:j,filledQuantity:B,remainingQuantity:L,status:E,timeInForce:O,createdAt:z,updatedAt:z}},[]),v=D.useCallback(async()=>{if(!h.current)return;const _=b.current;if(!_.walletAddress||_.walletAddress.trim()===""){l(null),i([]),o(!1);return}l(null);try{const C=(await Fw(pA.http,()=>h.current.getOrders(_.walletAddress))).orders||[];if(C.length>0){const E=C.map(y);i(P=>{if(P.length!==E.length)return E;const O=JSON.stringify(P),M=JSON.stringify(E);return O===M?P:E})}else i(E=>E.length===0?E:[])}catch(S){const C=S instanceof Error?S.message:"Failed to load orders";l(C),console.error("Failed to fetch orders after retries:",S)}finally{o(!1)}},[y]),w=D.useCallback(_=>_.orderId,[]),k=D.useCallback(_=>{if(!_||typeof _!="object"||!("order_id"in _)||typeof _.order_id!="string"||_.order_id.length===0){console.warn("Received invalid order data, skipping:",_);return}const S=y(_),C=w(S);if(!C){console.warn("Received order without ID, skipping:",S);return}i(E=>{const P=new Map;E.forEach(L=>{const $=w(L);$&&P.set($,L)});const O=S.status.toUpperCase();O==="FILLED"||O==="CANCELLED"||O==="REJECTED"||O==="EXPIRED"||O==="CLOSED"||O==="DONE"?P.delete(C):P.set(C,S);const R=Array.from(P.values()).filter(L=>w(L)!==void 0);if(E.length!==R.length)return R;const j=JSON.stringify(E),B=JSON.stringify(R);return j===B?E:R})},[y,w]);return D.useEffect(()=>{if(n.walletAddress!==g.current&&(p.current=!1,g.current=n.walletAddress),!n.walletAddress||n.walletAddress.trim()===""){o(!1),l(null),i([]),d.current&&(d.current.disconnect(),d.current=null),p.current=!1;return}const _=new ar({baseURL:n.baseURL,sessionToken:n.authToken});if(h.current=_,p.current||v().finally(()=>{p.current=!0}),e&&n.wsURL){const S=new ec({url:n.wsURL,authToken:n.authToken,walletAddress:n.walletAddress,deviceID:n.deviceID});d.current=S;const C=()=>{if(S.isReadyForSubscriptions()&&!f.current)try{S.subscribeOrders(k),f.current=!0}catch(P){console.error("[usePendingOrders] Failed to subscribe to orders:",P),P instanceof Error&&P.message.includes("Authentication")&&(f.current=!1)}else if(S.isConnected()&&!S.isReadyForSubscriptions()){const P=S.getAuthState();P==="pending"?console.debug("[usePendingOrders] Waiting for authentication to complete..."):P==="failed"&&console.error("[usePendingOrders] Authentication failed - cannot subscribe to orders")}};S.connect().then(()=>{u(!0),C()}).catch(P=>{console.error("Failed to connect WebSocket:",P),u(!1)});const E=S.onStateChange(P=>{P===Pt.Connected?(u(!0),f.current&&C()):(P===Pt.Disconnected||P===Pt.Reconnecting)&&(u(!1),f.current=!1)});return()=>{E&&E(),d.current&&(d.current.unsubscribeOrders(k),d.current.disconnect())}}else return()=>{}},[n.baseURL,n.wsURL,n.authToken,n.walletAddress,n.deviceID,n.refreshInterval,e]),{orders:r,loading:s,error:a,isConnected:c,refresh:v}}function h1e({baseURL:n=xu,wsURL:e,authToken:r,walletAddress:i,mnemonic:s,height:o=jge,refreshInterval:a=gA}){const{orders:l,loading:c,error:u,isConnected:h,refresh:d}=BZ({baseURL:n,wsURL:e,authToken:r,walletAddress:i,refreshInterval:a}),f=D.useRef(null),p=D.useRef(0),[g,b]=D.useState(null),{getSymbolByMarketId:y}=tc({baseURL:n,sessionToken:r,autoFetchMarkets:!1}),[v,w]=D.useState(Ka),[k,_]=D.useState(null),[S,C]=D.useState(Jd),E=D.useMemo(()=>l.filter(W=>{const q=W.status.toUpperCase(),V=q.startsWith("ORDER_STATUS_")?q:`ORDER_STATUS_${q}`;return v===Ka?Vj.some(F=>q===F.toUpperCase()||V===F.toUpperCase()):!Vj.some(F=>q===F.toUpperCase()||V===F.toUpperCase())}),[l,v]),P=D.useMemo(()=>k?[...E].sort((W,q)=>{let V=0,F=0;switch(k){case $j:V=W.symbol,F=q.symbol;break;case zj:V=W.side,F=q.side;break;case Bj:V=W.quantity,F=q.quantity;break;case Uj:V=W.price,F=q.price;break;case qj:V=W.filledQuantity||0,F=q.filledQuantity||0;break;case Wj:V=W.status,F=q.status;break}if(typeof V=="string"&&typeof F=="string")return S===Cl?V.localeCompare(F):F.localeCompare(V);const G=Number(V),H=Number(F);return isNaN(G)||isNaN(H)?0:S===Cl?G-H:H-G}):E,[E,k,S]),O=W=>{k===W?C(S===Cl?Jd:Cl):(_(W),C(Jd))},M=W=>W.side,R=w0e,j=_0e,B=W=>{const q=(W||"").toUpperCase(),V={ORDER_STATUS_PENDING:{short:"P",full:"Pending",color:fS},PENDING:{short:"P",full:"Pending",color:fS},ORDER_STATUS_OPEN:{short:"O",full:"Open",color:pS},OPEN:{short:"O",full:"Open",color:pS},NEW:{short:"N",full:"New",color:pS},ORDER_STATUS_FILLED:{short:"F",full:"Filled",color:Yj},FILLED:{short:"F",full:"Filled",color:Yj},ORDER_STATUS_CANCELED:{short:"C",full:"Canceled",color:mS},CANCELED:{short:"C",full:"Canceled",color:mS},CANCELLED:{short:"C",full:"Canceled",color:mS},ORDER_STATUS_REJECTED:{short:"R",full:"Rejected",color:Gj},REJECTED:{short:"R",full:"Rejected",color:Gj},PARTIALLY_FILLED:{short:"PF",full:"Partially Filled",color:fS}};if(V[q])return V[q];const F=q.startsWith("ORDER_STATUS_")?q:`ORDER_STATUS_${q}`;return V[F]?V[F]:{short:"?",full:W||g0e,color:i0e}},L=W=>W===Tg||W==="BUY"?s0e:o0e,$=W=>!W||typeof W!="string"?m0e:W.replace("ORDER_TYPE_",""),z=async W=>{var G;const q=W.orderId,V=W.marketId;if(!q){const H="Cannot cancel order without a valid order ID.";Je.error("Order ID is missing",{description:H,action:di(H)});return}if(!V){const H="Cannot cancel order without a valid market ID.";Je.error("Market ID is missing",{description:H,action:di(H)});return}if(!s){const H=`Please provide the 'mnemonic' prop to the PendingOrders component. Order ID: ${q}`;Je.error("Mnemonic required",{description:H,duration:5e3,action:di(H)});return}if(typeof s!="string"||s.trim()===""){const H=`The mnemonic prop is empty or invalid. Please provide a valid mnemonic. Order ID: ${q}`;Je.error("Invalid mnemonic",{description:H,duration:5e3,action:di(H)});return}if(g){Je.info("Cancellation in progress",{description:"Please wait for the current cancellation to complete."});return}b(q);const F=Je.loading("Canceling order...",{description:`Canceling order ${q}`});p.current=typeof F=="number"?F:0;try{f.current||(f.current=new Zl({baseURL:n,mnemonic:s.trim()}),await f.current.initialize());const H=await f.current.cancelOrder({orderId:q,marketId:V}),A=(H==null?void 0:H.success)===!0||(H==null?void 0:H.result)==="success"||H&&!H.error&&!H.message;if(p.current!==0&&(Je.dismiss(p.current),p.current=0),A)Je.success("Order canceled successfully",{description:`Order ${q} has been canceled.`}),d&&await d();else{const Q=(H==null?void 0:H.error)||(H==null?void 0:H.message)||((G=H==null?void 0:H.response)==null?void 0:G.error)||"Failed to cancel order";throw new Error(Q)}}catch(H){p.current!==0&&(Je.dismiss(p.current),p.current=0);const Q=`${H instanceof Error?H.message:"Unknown error occurred"}. Order ID: ${q}`;Je.error("Failed to cancel order",{description:Q,duration:6e3,action:di(Q)})}finally{b(null)}};return!i||i.trim()===""?m.jsx(NZ,{message:h0e}):c?m.jsx(Df,{message:a0e}):u?m.jsx(Of,{error:u}):m.jsxs("div",{className:"layout-container",style:{height:o},children:[m.jsxs(If,{title:v===Ka?u0e:d0e,children:[m.jsxs("div",{className:"btn-tab",children:[m.jsx("span",{style:{fontSize:"0.7rem"},children:""}),m.jsx("span",{children:"Current Symbol"})]}),m.jsxs("div",{onClick:()=>w(v===Ka?Hj:Ka),className:`btn-tab ${v===Hj?"active":""}`,children:[m.jsx("img",{src:"/transfer-net.svg"}),m.jsx("span",{children:v===Ka?p0e:f0e})]}),!h&&m.jsxs("div",{onClick:async()=>{d&&await d()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh orders",children:[m.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),m.jsx("span",{children:"Refresh"})]})]}),m.jsxs("div",{className:"table-container shrinkable",children:[m.jsxs("div",{className:"table-header",style:{gridTemplateColumns:Kj},children:[m.jsx(or,{field:$j,currentSortField:k,sortDirection:S,onSort:O,children:"Symbol"}),m.jsx(or,{field:zj,currentSortField:k,sortDirection:S,onSort:O,children:"Side"}),m.jsx(mO,{center:!0,children:"Type"}),m.jsx(or,{field:Bj,currentSortField:k,sortDirection:S,onSort:O,children:"Quantity"}),m.jsx(or,{field:Uj,currentSortField:k,sortDirection:S,onSort:O,children:"Price"}),m.jsx(or,{field:qj,currentSortField:k,sortDirection:S,onSort:O,children:"Filled"}),m.jsx(or,{field:Wj,currentSortField:k,sortDirection:S,onSort:O,children:"Status"}),m.jsx(mO,{center:!0,children:"Actions"})]}),P.length===0?m.jsx(_a,{message:v===Ka?l0e:c0e}):P.map((W,q)=>{const V=M(W),F=L(V),{short:G,full:H,color:A}=B(W.status),Q=y(W.marketId)||W.symbol||`m-${W.marketId}`;return m.jsxs("div",{className:`table-row ${q%2===0?"even":""}`,style:{gridTemplateColumns:Kj},children:[m.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:m.jsx("span",{children:Q})}),m.jsx("div",{className:"table-cell center",style:{color:F,fontWeight:500},children:V}),m.jsx("div",{className:"table-cell center",children:$(W.type)}),m.jsx("div",{className:"table-cell right monospace",children:j(W.quantity)}),m.jsx("div",{className:"table-cell right monospace",children:R(W.price)}),m.jsxs("div",{className:"table-cell right monospace",children:[j(W.filledQuantity)," /"," ",j(W.quantity)]}),m.jsx("div",{className:"table-cell center",style:{color:A,fontWeight:600,cursor:"help",fontSize:"0.9rem"},title:H,children:G}),m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:v===Ka?m.jsxs(m.Fragment,{children:[(!s||s.trim()==="")&&m.jsx("span",{style:{fontSize:"0.7rem",color:"#ffc107",cursor:"help"},title:"Mnemonic required to cancel orders",children:""}),m.jsx(Jwe,{onClick:J=>{J.preventDefault(),J.stopPropagation(),!s||s.trim()===""||g===W.orderId||!!g||z(W)},disabled:!s||s.trim()===""||g===W.orderId||!!g})]}):m.jsx("span",{className:"color-text-dim",children:""})})]},`order-${W.orderId}`)})]})]})}const f1e=Ne.memo(h1e);function p1e({baseURL:n=xu,authToken:e,walletAddress:r,mnemonic:i,height:s=Nge,refreshInterval:o=gA,selectedBucketId:a=null}){const{positions:l,loading:c,error:u,isConnected:h,refresh:d}=EJ({baseURL:n,authToken:e,walletAddress:r,refreshInterval:o}),f=D.useRef(null);D.useEffect(()=>{if(!i||!n){f.current=null;return}const E=new Zl({baseURL:n,mnemonic:i});E.initialize().then(()=>{f.current=E}).catch(P=>{const O=P instanceof Error?P.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",P),Je.error("Exchange client initialization failed",{description:O,action:di(O)}),f.current=null})},[i,n]);const[p,g]=D.useState(dS),[b,y]=D.useState(null),[v,w]=D.useState(Jd),k=D.useMemo(()=>{let E=[...l];return p===Yv&&a&&(E=E.filter(P=>{var R;const O=(R=P.bucketId)==null?void 0:R.toString(),M=a.toString();return O===M})),b?E.sort((P,O)=>{let M=0,R=0;switch(b){case Oj:M=P.symbol||"",R=O.symbol||"";break;case Ij:try{M=P.leverage?it(P.leverage):0,R=O.leverage?it(O.leverage):0}catch{M=0,R=0}break;case Rj:M=P.size||0,R=O.size||0;break;case Aj:M=P.liquidationPrice||0,R=O.liquidationPrice||0;break;case Nj:M=P.unrealizedPnL||0,R=O.unrealizedPnL||0;break;case jj:M=P.entryPrice||0,R=O.entryPrice||0;break;case Lj:M=P.margin||0,R=O.margin||0;break}if(typeof M=="string"&&typeof R=="string")return v===Cl?M.localeCompare(R):R.localeCompare(M);const j=Number(M),B=Number(R);return v===Cl?j-B:B-j}):E},[l,b,v,a,p]),_=E=>{b===E?w(v===Cl?Jd:Cl):(y(E),w(Jd))},S=D.useRef(0),C=async E=>{if(!i){const O="Please provide the 'mnemonic' prop to enable position closing.";Je.error("Mnemonic required",{description:O,action:di(O)});return}if(!f.current){const O="Please wait for the exchange client to initialize.";Je.error("Exchange client not ready",{description:O,action:di(O)});return}const P=Je.loading("Closing position...",{description:`Closing ${E.side} position for ${E.symbol} (Size: ${lx(E.size)})`});S.current=typeof P=="number"?P:0;try{const O=await f.current.closePosition({marketId:E.marketId,marketPrice:E.markPrice,quantity:E.size});S.current!==0&&(Je.dismiss(S.current),S.current=0),Je.success("Position closed successfully",{description:`${E.side} position for ${E.symbol} has been closed. tx: ${O.txhash}`,duration:5e3}),d&&await d()}catch(O){S.current!==0&&(Je.dismiss(S.current),S.current=0);const M=O instanceof Error?O.message:"Unknown error occurred";Je.error("Failed to close position",{description:M,duration:6e3,action:di(M)}),console.error("Failed to close position:",O)}};return c?m.jsx(Df,{message:Xge}):u?m.jsx(Of,{error:u}):m.jsxs("div",{className:"layout-container",style:{height:s},children:[m.jsxs(If,{title:`${Jge} ${p===Yv&&a?`(Bucket ${a})`:""}`,children:[m.jsx("div",{onClick:()=>{g(dS),y(null)},className:`btn-tab ${p===dS?"active":""}`,children:Zge}),m.jsxs("div",{onClick:()=>{g(Yv),y(null)},className:`btn-tab ${p===Yv?"active":""}`,children:[m.jsx("img",{src:"/bucket-g.svg"}),m.jsx("span",{children:e0e})]}),!h&&m.jsxs("div",{onClick:async()=>{d&&await d()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh positions",children:[m.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),m.jsx("span",{children:"Refresh"})]})]}),m.jsxs("div",{className:"table-container",children:[m.jsxs("div",{className:"table-header",style:{gridTemplateColumns:Fj},children:[m.jsx(or,{field:Oj,currentSortField:b,sortDirection:v,onSort:_,left:!0,children:"Symbol"}),m.jsx(or,{field:Ij,currentSortField:b,sortDirection:v,onSort:_,children:"Leverage"}),m.jsx(or,{field:Rj,currentSortField:b,sortDirection:v,onSort:_,children:"Size"}),m.jsx(or,{field:Aj,currentSortField:b,sortDirection:v,onSort:_,children:"Liq. Price"}),m.jsx(or,{field:Nj,currentSortField:b,sortDirection:v,onSort:_,children:"P/L"}),m.jsx(or,{field:jj,currentSortField:b,sortDirection:v,onSort:_,children:"Entry Price"}),m.jsx(or,{field:Lj,currentSortField:b,sortDirection:v,onSort:_,children:"Margin"}),m.jsx(mO,{center:!0,children:"Actions"})]}),k.length===0?m.jsx(_a,{message:Qge}):k.map((E,P)=>{const O=E.side===Tg,M=(E.unrealizedPnL||0)>=0?Gge:Kge,R=S0e(E.leverage,hS);return m.jsxs("div",{className:`table-row ${P%2===0?"even":""}`,style:{gridTemplateColumns:Fj},children:[m.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:m.jsx("span",{children:E.symbol})}),m.jsxs("div",{className:"color-buy",style:{fontWeight:500},children:[O?Tg:nO," ",R===hS?hS:`${R}x`," ","@ ",E.marginMode||Eg]}),m.jsx("div",{className:"color-buy right monospace",children:lx(E.size)}),m.jsx("div",{className:"table-cell right monospace",children:ax(E.liquidationPrice)}),m.jsx("div",{className:"table-cell right monospace",style:{color:M,fontWeight:500},children:x0e(E.unrealizedPnL)}),m.jsx("div",{className:"table-cell right monospace",children:ax(E.entryPrice)}),m.jsx("div",{className:"table-cell right monospace",children:y0e(E.margin)}),m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:m.jsx(Zwe,{onClick:()=>C(E)})})]},`position-${E.marketId}-${P}`)})]})]})}const m1e=Ne.memo(p1e);function g1e({isOpen:n,currentLeverage:e,tempLeverage:r,maxRatio:i,onLeverageChange:s,onConfirm:o,onCancel:a}){if(!n)return null;const l=m.jsx("div",{className:"modal-overlay",onClick:a,children:m.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[m.jsx("div",{className:"modal-header",children:m.jsx("h3",{children:"Select Leverage"})}),m.jsxs("div",{className:"modal-body",children:[m.jsxs("div",{className:"leverage-max-ratio",children:[m.jsx("div",{className:"leverage-max-ratio-label",children:"Maximum Ratio"}),m.jsxs("div",{className:"leverage-max-ratio-value",children:[i,"x"]})]}),m.jsxs("div",{className:"leverage-slider-container",children:[m.jsx("input",{type:"range",min:aS,max:Mj,value:r,onChange:c=>s(parseInt(c.target.value)),className:"filled-slider",style:{"--slider-progress":`${(r-aS)/(Mj-aS)*100}%`}}),m.jsxs("div",{className:"leverage-slider-labels",children:[m.jsx("span",{children:"1x"}),m.jsxs("span",{className:"leverage-current-value",children:[r,"x"]}),m.jsx("span",{children:"100x"})]})]})]}),m.jsxs("div",{className:"modal-footer",children:[m.jsx("button",{onClick:a,className:"btn btn-secondary",children:"Cancel"}),m.jsx("button",{onClick:o,className:"btn btn-primary",children:"Confirm"})]})]})});return typeof document<"u"?Ql.createPortal(l,document.body):null}function v1e({isOpen:n,fromValue:e,toValue:r,options:i,bucketsData:s,transferAmount:o,createBucketAmount:a,createBucketType:l,createMarginType:c,onFromChange:u,onToChange:h,onTransferAmountChange:d,onCreateBucketAmountChange:f,onCreateBucketTypeChange:p,onCreateMarginTypeChange:g,onConfirm:b,onCancel:y,spotWalletBalance:v=0,activeTab:w,onActiveTabChange:k,isTransferring:_=!1,onOpen:S}){const[C,E]=D.useState("transfer"),P=w??C,O=k??E,M=D.useRef(!1),[R,j]=D.useState(!1),[B,L]=D.useState("transfer"),[$,z]=D.useState(!1);D.useEffect(()=>{n&&!M.current&&S&&S(),M.current=n,n||z(!1)},[n,S,P]);const W=D.useMemo(()=>e==="spot-wallet"?null:s.find(K=>K.bucketId===e),[s,e]),q=D.useMemo(()=>e==="spot-wallet"?v:(W==null?void 0:W.totalEquity)||0,[e,v,W]),V=10,F=Math.max(V,q);if(Ne.useEffect(()=>{if(e&&F>0){const K=P==="transfer"?o:a;K>F?P==="transfer"?d(F):f(F):K<V&&F>=V&&(P==="transfer"?d(V):f(V))}},[e,F,P,o,a,d,f]),!n)return null;const G=e&&r&&o>=V&&o<=F,H=e&&a>=V&&a<=F&&l&&c,A=m.jsx("div",{className:"modal-overlay",onClick:y,children:m.jsxs("div",{className:"modal-content transfer-modal-content",onClick:K=>K.stopPropagation(),children:[m.jsx("div",{className:"modal-header",children:m.jsx("h3",{children:"Transfer Funds"})}),m.jsxs("div",{className:"transfer-modal-tabs",children:[m.jsx("button",{className:`transfer-tab ${P==="transfer"?"active":""}`,onClick:()=>O("transfer"),type:"button",disabled:_,children:"Transfer"}),m.jsx("button",{className:`transfer-tab ${P==="create"?"active":""}`,onClick:()=>O("create"),type:"button",disabled:_,children:"Create Bucket"})]}),m.jsx("div",{className:"modal-body",children:P==="transfer"?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"transfer-field-group",children:[m.jsx("label",{className:"transfer-field-label",children:"From"}),m.jsxs("select",{value:e,onChange:K=>u(K.target.value),className:"transfer-select",children:[m.jsx("option",{value:"",children:"Select source bucket"}),i.map(K=>m.jsx("option",{value:K.value,children:K.label},K.value))]})]}),m.jsxs("div",{className:"transfer-field-group",children:[m.jsx("label",{className:"transfer-field-label",children:"To"}),m.jsxs("select",{value:r,onChange:K=>h(K.target.value),className:"transfer-select",disabled:!e,children:[m.jsx("option",{value:"",children:"Select destination bucket"}),i.filter(K=>K.value!==e).map(K=>m.jsx("option",{value:K.value,children:K.label},K.value))]})]}),e&&F>=V?m.jsxs("div",{className:"transfer-field-group",children:[m.jsxs("div",{className:"transfer-amount-header",children:[m.jsx("label",{className:"transfer-field-label",children:"Amount"}),m.jsxs("div",{className:"transfer-available-balance",children:["Available: ",_n(q)]})]}),m.jsx("div",{className:"transfer-amount-display",onClick:()=>{L("transfer"),j(!0)},style:{cursor:"pointer"},children:m.jsx("span",{className:"transfer-amount-value",children:_n(o)})}),m.jsxs("div",{className:"transfer-amount-container",children:[m.jsx("input",{type:"range",min:V,max:F,step:.01,value:o,onChange:K=>d(parseFloat(K.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(o-V)/(F-V)*100}%`}}),m.jsxs("div",{className:"transfer-amount-labels",children:[m.jsx("span",{children:_n(V)}),m.jsx("span",{children:_n(F)})]})]})]}):e?m.jsx("div",{className:"transfer-field-group",children:m.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",_n(V)]})}):null]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"transfer-field-group",children:[m.jsx("label",{className:"transfer-field-label",children:"From"}),m.jsxs("select",{value:e,onChange:K=>u(K.target.value),className:"transfer-select",children:[m.jsx("option",{value:"",children:"Select source bucket"}),i.map(K=>m.jsx("option",{value:K.value,children:K.label},K.value))]})]}),m.jsxs("div",{className:"transfer-field-group",children:[m.jsx("label",{className:"transfer-field-label",children:"Bucket Type"}),m.jsxs("select",{value:l,onChange:K=>p(K.target.value),className:"transfer-select",children:[m.jsx("option",{value:"",children:"Select bucket type"}),m.jsx("option",{value:"USDC",children:"USDC"}),m.jsx("option",{value:"USDT",children:"USDT"})]})]}),m.jsxs("div",{className:"transfer-field-group",children:[m.jsx("label",{className:"transfer-field-label",children:"Margin Type"}),m.jsxs("select",{value:c,onChange:K=>g(K.target.value),className:"transfer-select",children:[m.jsx("option",{value:"",children:"Select margin type"}),m.jsx("option",{value:"cross",children:"Cross Margin"}),m.jsx("option",{value:"isolated",children:"Isolated Margin"})]})]}),e&&F>=V?m.jsxs("div",{className:"transfer-field-group",children:[m.jsxs("div",{className:"transfer-amount-header",children:[m.jsx("label",{className:"transfer-field-label",children:"Amount"}),m.jsxs("div",{className:"transfer-available-balance",children:["Available: ",_n(q)]})]}),m.jsx("div",{className:"transfer-amount-display",onClick:()=>{L("create"),j(!0)},style:{cursor:"pointer"},children:m.jsx("span",{className:"transfer-amount-value",children:_n(a)})}),m.jsxs("div",{className:"transfer-amount-container",children:[m.jsx("input",{type:"range",min:V,max:F,step:.01,value:a,onChange:K=>f(parseFloat(K.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(a-V)/(F-V)*100}%`}}),m.jsxs("div",{className:"transfer-amount-labels",children:[m.jsx("span",{children:_n(V)}),m.jsx("span",{children:_n(F)})]})]})]}):e?m.jsx("div",{className:"transfer-field-group",children:m.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",_n(V)]})}):null]})}),m.jsxs("div",{className:"modal-footer",children:[m.jsx("button",{onClick:y,className:"btn btn-secondary",disabled:_,children:"Cancel"}),m.jsxs("div",{style:{flex:1,position:"relative",minHeight:"48px"},children:[m.jsx("div",{className:"slider-confirm-container",style:{position:"absolute",top:0,left:0,right:0,opacity:$?0:1,visibility:$?"hidden":"visible",transition:"opacity 0.3s ease, visibility 0.3s ease",pointerEvents:$?"none":"auto"},children:m.jsx(e1e,{onConfirm:()=>{z(!0)},label:"Slide to confirm",disabled:_||(P==="transfer"?!G:!H),icon:m.jsx("img",{src:"/bconfirm.svg"})})}),m.jsx("button",{onClick:b,className:"btn btn-primary",disabled:_||(P==="transfer"?!G:!H),style:{position:"absolute",top:0,right:0,opacity:$?1:0,visibility:$?"visible":"hidden",transition:"opacity 0.3s ease, visibility 0.3s ease",pointerEvents:$?"auto":"none",width:"100%",height:"100%",color:"black"},children:_?"Processing...":"Confirm"})]})]})]})}),Q=B==="transfer"?o:a,J=K=>{B==="transfer"?d(K):f(K),j(!1)};return m.jsxs(m.Fragment,{children:[typeof document<"u"?Ql.createPortal(A,document.body):null,m.jsx(t1e,{isOpen:R,value:Q,min:V,max:F,onConfirm:J,onCancel:()=>j(!1)})]})}function b1e({baseURL:n=xu,wsURL:e=xu,authToken:r,walletAddress:i,mnemonic:s,height:o=Age,refreshInterval:a=gA,onBucketSelect:l}){const{collections:c,loading:u,error:h,spotWalletBalance:d,isConnected:f,refresh:p}=zZ({baseURL:n,wsURL:e,authToken:r,walletAddress:i,refreshInterval:a}),[g,b]=D.useState(null),[y,v]=D.useState("desc"),[w,k]=D.useState(""),[_,S]=D.useState(!1),[C,E]=D.useState(""),[P,O]=D.useState(""),[M,R]=D.useState(10),[j,B]=D.useState(10),[L,$]=D.useState(""),[z,W]=D.useState("cross"),[q,V]=D.useState("transfer"),[F,G]=D.useState(!1),H=D.useRef(null),A=D.useRef(0),Q=D.useMemo(()=>{const De=c.filter(Pe=>Pe&&Pe.bucketId&&typeof Pe.bucketId=="string"&&Pe.bucketId.trim()!=="");return g?[...De].sort((Pe,We)=>{let nt=0,U=0;switch(g){case"marginType":nt=sy(Pe),U=sy(We);break;case"usedMargin":nt=Pe.usedMargin||0,U=We.usedMargin||0;break;case"totalEquity":nt=Pe.totalEquity||0,U=We.totalEquity||0;break;case"riskRatio":nt=iy(Pe),U=iy(We);break;case"bucketId":nt=Pe.bucketId||"",U=We.bucketId||"";break}if(typeof nt=="string"&&typeof U=="string")return y==="asc"?nt.localeCompare(U):U.localeCompare(nt);const _e=Number(nt),Ie=Number(U);return y==="asc"?_e-Ie:Ie-_e}):De},[c,g,y]),J=De=>{g===De?v(y==="asc"?"desc":"asc"):(b(De),v("desc"))},K=(De,Pe)=>{l&&l(De,Pe),k(De)},Z=()=>{S(!0),E(""),O(""),R(10),B(10),$(""),W("cross"),V("transfer")},se=()=>{S(!1),E(""),O(""),R(10),B(10),$(""),W("cross"),V("transfer")};D.useEffect(()=>{if(!s||!n){H.current=null;return}const De=new Zl({baseURL:n,mnemonic:s});De.initialize().then(()=>{H.current=De}).catch(Pe=>{const We=Pe instanceof Error?Pe.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",Pe),Je.error("Exchange client initialization failed",{description:We,action:di(We)}),H.current=null})},[s,n]);const be=async()=>{if(!s){const We="Mnemonic is required to perform transfers. Please provide a mnemonic to enable transfer functionality.";Je.error("Mnemonic required",{description:We,action:di(We)});return}const De=H.current;if(!De){const We="Exchange client is still initializing. Please wait a moment and try again.";Je.error("Exchange client not ready",{description:We,action:di(We)});return}G(!0);const Pe=Je.loading("Processing transfer...",{description:"Please wait while the transfer is being processed"});A.current=typeof Pe=="number"?Pe:0;try{const We="USDC";let nt,U="";if(q==="transfer"){if(!C||!P)throw new Error("Please select both source and destination");if(C==="spot-wallet"&&P==="spot-wallet")throw new Error("Cannot transfer from spot wallet to spot wallet");C==="spot-wallet"?(nt=await De.extractToBucket({bucketId:P,assetId:We,amount:M}),U=`Successfully transferred ${_n(M)} from Spot Wallet to ${P}`):P==="spot-wallet"?(nt=await De.withdrawFromBucket({bucketId:C,assetId:We,amount:M}),U=`Successfully transferred ${_n(M)} from ${C} to Spot Wallet`):(nt=await De.bucketTransfer({fromBucketId:C,toBucketId:P,assetId:We,amount:M}),U=`Successfully transferred ${_n(M)} from ${C} to ${P}`)}else{if(!C)throw new Error("Please select a source");if(!L)throw new Error("Please select a bucket type (USDC or USDT)");if(!z)throw new Error("Please select a margin type (cross or isolated)");const _e=await De.createBucket({bucketType:L,marginType:z});if(!_e.success)throw new Error(_e.message||"Failed to create bucket");if(U=`Successfully created ${z} margin bucket (${L})`,j>0&&C==="spot-wallet"){const Ie=await De.extractToBucket({bucketId:_e.bucket_id,assetId:L,amount:j});if(!Ie.success)throw new Error(`Bucket created but failed to transfer funds: ${Ie.error_message||"Unknown error"}`);U=`Successfully created ${z} margin bucket (${L}) and transferred ${_n(j)}`}else if(j>0&&C!=="spot-wallet"){if(!Ke.find($e=>$e.bucketId===C))throw new Error("Source bucket not found");const me=await De.bucketTransfer({fromBucketId:C,toBucketId:_e.bucket_id,assetId:L,amount:j});if(!me.success)throw new Error(`Bucket created but failed to transfer funds: ${me.message||"Unknown error"}`);U=`Successfully created ${z} margin bucket (${L}) and transferred ${_n(j)}`}}console.log("Transfer successful:",nt),A.current!==0&&(Je.dismiss(A.current),A.current=0),Je.success("Transfer completed",{description:U}),p(),S(!1),E(""),O(""),R(10),B(10),$(""),W("cross")}catch(We){A.current!==0&&(Je.dismiss(A.current),A.current=0);const nt=We instanceof Error?We.message:"Transfer failed";Je.error("Transfer failed",{description:nt,action:di(nt)}),console.error("Transfer error:",We)}finally{G(!1)}},Oe=D.useMemo(()=>{const De=Q.map(Pe=>({value:Pe.bucketId,label:`${Pe.bucketId} (${_n(Pe.totalEquity)})`}));return[{value:"spot-wallet",label:`Spot Wallet (${_n(d)})`},...De]},[Q,d]),Ke=D.useMemo(()=>Q.map(De=>({bucketId:De.bucketId,totalEquity:De.totalEquity})),[Q]);return!i||i.trim()===""?m.jsx(NZ,{message:"Wallet address required to view bucket collections"}):u?m.jsx(Df,{message:"Loading bucket collections..."}):h?m.jsx(Of,{error:h}):m.jsxs("div",{className:"layout-container",style:{height:o},children:[m.jsxs(If,{title:"BUCKET COLLECTIONS",children:[m.jsxs("div",{onClick:Z,className:"btn-tab",children:[m.jsx("img",{src:"/transfer-repu.svg"}),m.jsx("span",{children:"Transfer"})]}),!f&&m.jsxs("div",{onClick:async()=>{p&&await p()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh bucket collections",children:[m.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),m.jsx("span",{children:"Refresh"})]})]}),m.jsxs("div",{className:"table-container shrinkable",children:[m.jsxs("div",{className:"table-header",style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[m.jsx(or,{field:"bucketId",currentSortField:g,sortDirection:y,onSort:J,left:!0,children:"Bucket ID"}),m.jsx(or,{field:"marginType",currentSortField:g,sortDirection:y,onSort:J,children:"Margin Type"}),m.jsx(or,{field:"usedMargin",currentSortField:g,sortDirection:y,onSort:J,children:"Used Margin"}),m.jsx(or,{field:"totalEquity",currentSortField:g,sortDirection:y,onSort:J,children:"Total Equity"}),m.jsx(or,{field:"riskRatio",currentSortField:g,sortDirection:y,onSort:J,left:!1,children:"Risk Ratio"})]}),Q.length===0?m.jsx(_a,{message:c.length===0?"No bucket collections found. Make sure your wallet address is correct and has buckets.":`Filtered out all ${c.length} collections (invalid data structure)`}):Q.map((De,Pe)=>{const We=iy(De),nt=sy(De);return m.jsxs("div",{onClick:()=>K(De.bucketId,De.totalEquity),className:`table-row clickable ${Pe%2===0?"even":""} ${w===De.bucketId?"selected":""}`,style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[m.jsx("div",{className:"table-cell primary",children:De.bucketId||"---"}),m.jsx("div",{className:"table-cell",children:nt.toUpperCase()}),m.jsx("div",{className:"table-cell right monospace",children:_n(De.usedMargin||0)}),m.jsx("div",{className:"table-cell right monospace",children:_n(De.totalEquity||0)}),m.jsx("div",{className:"table-cell right monospace",style:{color:We>.5?"#ff6b6b":"#51cf66",fontWeight:500},children:kJ(We)})]},`collection-${De.bucketId}-${Pe}`)})]}),m.jsx(v1e,{isOpen:_,fromValue:C,toValue:P,options:Oe,bucketsData:Ke,transferAmount:M,createBucketAmount:j,createBucketType:L,createMarginType:z,onFromChange:E,onToChange:O,onTransferAmountChange:R,onCreateBucketAmountChange:B,onCreateBucketTypeChange:$,onCreateMarginTypeChange:W,onConfirm:be,onCancel:se,spotWalletBalance:d,activeTab:q,onActiveTabChange:V,isTransferring:F,onOpen:p})]})}const y1e=Ne.memo(b1e);function x1e({baseURL:n=xu,selectedMarketId:e,authToken:r,height:i,onMarketSelect:s,favorites:o=[],onFavoriteToggle:a}){const{markets:l,tickers:c,selectedMarketId:u,setSelectedMarketId:h}=tc({baseURL:n,autoFetchMarkets:!0}),[d,f]=D.useState(new Set(o)),[p,g]=D.useState("1H"),b=D.useRef(null),y=e||u||null,v=D.useMemo(()=>{const B=new Set(d);return o.forEach(L=>B.add(L)),B},[o,d]),w=D.useMemo(()=>l.map(B=>{var F,G;const L=((F=B.market_id)==null?void 0:F.toString())||((G=B.id)==null?void 0:G.toString())||"",$=c.get(L),z=B.moniker||B.symbol||(B.baseAsset&&B.quoteAsset?`${B.baseAsset}/${B.quoteAsset}`:"Unknown"),W=!B.active||!($!=null&&$.lastPrice)||typeof $.lastPrice=="string"&&$.lastPrice==="0";let q=null;$!=null&&$.lastPrice&&(typeof $.lastPrice=="string"?q=parseFloat($.lastPrice):q=$.lastPrice);let V=null;return $!=null&&$.priceChangePercent24h&&(typeof $.priceChangePercent24h=="string"?V=parseFloat($.priceChangePercent24h):V=$.priceChangePercent24h),{marketId:L,symbol:z,price:q,priceChangePercent:V,isClosed:W,isFavorite:v.has(L)}}).filter(B=>B.marketId),[l,c,v]),k=D.useMemo(()=>y?l.find(B=>{var L,$;return((L=B.market_id)==null?void 0:L.toString())===y||(($=B.id)==null?void 0:$.toString())===y}):null,[l,y]),_=D.useMemo(()=>y?c.get(y):null,[c,y]),S=D.useMemo(()=>k?k.moniker||k.symbol||(k.baseAsset&&k.quoteAsset?`${k.baseAsset}/${k.quoteAsset}`:"Unknown"):"Select Market",[k]),C=D.useMemo(()=>{if(!k)return"";const B=k.baseAsset||"",L=k.quoteAsset||"";return B&&L?`${B} to ${L}`:k.moniker||k.symbol||""},[k]),E=D.useMemo(()=>_!=null&&_.lastPrice?typeof _.lastPrice=="string"?parseFloat(_.lastPrice):_.lastPrice:null,[_]),P=D.useMemo(()=>_!=null&&_.priceChangePercent24h?typeof _.priceChangePercent24h=="string"?parseFloat(_.priceChangePercent24h):_.priceChangePercent24h:null,[_]),O=B=>{s?s(B):h(B)},M=(B,L)=>{L.stopPropagation();const $=new Set(v);$.has(B)?$.delete(B):$.add(B),f($),a&&a(B)},R=B=>{var z;const L=((z=B.split("/")[0])==null?void 0:z.toUpperCase())||"";return{BTC:"",ETH:"",EUR:"",USD:"$",USDC:"$",USDT:"$"}[L]||L.charAt(0)||"?"},j=B=>{if(B==null)return"0";const L=typeof B=="string"?parseFloat(B):B;return isNaN(L)?"0":L>=1e6?`${(L/1e6).toFixed(1)}M`:L>=1e3?`${(L/1e3).toFixed(1)}K`:L.toFixed(2)};return m.jsxs("div",{className:"ticker-bar-container",style:i?{height:i}:void 0,children:[m.jsx("div",{className:"ticker-bar-top",ref:b,children:m.jsx("div",{className:"ticker-bar-scroll",children:w.map((B,L)=>m.jsxs(Ne.Fragment,{children:[m.jsxs("div",{className:`ticker-item ${B.marketId===y?"active":""}`,onClick:()=>O(B.marketId),children:[m.jsx("span",{className:"ticker-favorite-star",onClick:$=>M(B.marketId,$),style:{cursor:"pointer",opacity:B.isFavorite?1:.3},children:""}),m.jsx("span",{className:"ticker-asset-icon",children:R(B.symbol)}),m.jsx("span",{className:"ticker-symbol",children:B.symbol}),m.jsx("span",{className:"ticker-value",children:B.isClosed?m.jsx("span",{className:"ticker-closed",children:"CLOSED"}):B.price!==null?Zd(B.price):"--"})]}),L<w.length-1&&m.jsx("div",{className:"ticker-separator"})]},B.marketId))})}),m.jsxs("div",{className:"ticker-bar-bottom",children:[m.jsxs("div",{className:"ticker-detail-left",children:[m.jsx("div",{className:"ticker-detail-icon-large",children:k?R(S):"?"}),m.jsxs("div",{className:"ticker-detail-symbol-group",children:[m.jsx("div",{className:"ticker-detail-symbol-row",children:m.jsx("span",{className:"ticker-detail-symbol",children:S})}),m.jsx("div",{className:"ticker-detail-description",children:C})]}),m.jsxs("div",{className:"ticker-detail-price-group",children:[m.jsx("div",{className:"ticker-detail-price",children:E!==null?Zd(E):"--"}),P!==null&&m.jsxs("div",{className:`ticker-detail-change ${P>=0?"positive":"negative"}`,children:[P>=0?"+":"",kJ(P/100)]})]})]}),m.jsxs("div",{className:"ticker-detail-metrics",children:[m.jsxs("div",{className:"ticker-metric",children:[m.jsx("label",{className:"ticker-metric-label",title:"Oracle Price",children:"Oracle Price"}),m.jsx("span",{className:"ticker-metric-value",children:E!==null?Zd(E):"--"})]}),m.jsxs("div",{className:"ticker-metric",children:[m.jsx("label",{className:"ticker-metric-label",title:"Open Interest (Long)",children:"Open Interest (L)"}),m.jsx("span",{className:"ticker-metric-value",children:_!=null&&_.volume?`${j(_.volume)} / 20.0M USDC`:"--"})]}),m.jsxs("div",{className:"ticker-metric",children:[m.jsx("label",{className:"ticker-metric-label",title:"Open Interest (Short)",children:"Open Interest (S)"}),m.jsx("span",{className:"ticker-metric-value",children:_!=null&&_.volume?`${j(_.volume)} / 20.0M USDC`:"--"})]}),m.jsxs("div",{className:"ticker-metric",children:[m.jsx("label",{className:"ticker-metric-label",title:"Skew",children:"Skew"}),m.jsx("span",{className:"ticker-metric-value",children:"50%/50%"})]})]}),m.jsxs("div",{className:"ticker-detail-right",children:[m.jsxs("div",{className:"ticker-metric",children:[m.jsx("label",{className:"ticker-metric-label",title:"Holding (Long)",children:"Holding (L)"}),m.jsx("span",{className:"ticker-metric-value positive",children:"0.0012%"})]}),m.jsxs("div",{className:"ticker-metric",children:[m.jsx("label",{className:"ticker-metric-label",title:"Holding (Short)",children:"Holding (S)"}),m.jsx("span",{className:"ticker-metric-value negative",children:"0.0021%"})]})]}),m.jsx("div",{className:"ticker-timeframe-selector",children:m.jsxs("select",{className:"ticker-timeframe-select",value:p,onChange:B=>g(B.target.value),children:[m.jsx("option",{value:"1H",children:"1H"}),m.jsx("option",{value:"4H",children:"4H"}),m.jsx("option",{value:"1D",children:"1D"}),m.jsx("option",{value:"1W",children:"1W"}),m.jsx("option",{value:"1M",children:"1M"})]})})]})]})}const w1e=Ne.memo(x1e);function _1e(n){var $e;const[e,r]=D.useState("vertical"),[i,s]=D.useState(!0),[o,a]=D.useState(!1),[l,c]=D.useState("--"),[u,h]=D.useState(void 0),[d,f]=D.useState(!1),[p,g]=D.useState(10),[b,y]=D.useState("default"),v=D.useRef(null),w=D.useRef(null),k=D.useRef(!1),_=D.useRef(Pf),S=D.useRef(v0),C=D.useRef([]),E=_.current,P=S.current,O=D.useMemo(()=>Tm(b==="default"?Em:$we),[b]),[M,R]=D.useState(()=>Tm(Em));D.useEffect(()=>{R(O),C.current=O},[O]);const[j,B]=D.useState(()=>localStorage.getItem("authToken")||""),{markets:L,selectedMarketId:$,selectedMarketSymbol:z,setSelectedMarketId:W,loadingMarkets:q,getError:V}=tc({baseURL:E,sessionToken:j,autoFetchMarkets:!0}),{mnemonic:F,walletAddress:G,authToken:H,setMnemonic:A}=Bu();D.useEffect(()=>{F||A("legal winner thank year wave sausage worth useful legal winner thank yellow")},[F,A]),D.useEffect(()=>{C.current=M},[M]),D.useEffect(()=>{H&&(B(H),localStorage.setItem("authToken",H))},[H]);const Q=D.useRef(!1);D.useEffect(()=>{j&&j.trim()!==""&&!Q.current&&localStorage.getItem("authToken")!==j&&localStorage.setItem("authToken",j),Q.current=!1},[j]),D.useEffect(()=>{const ue=le=>{le.key==="authToken"&&le.newValue&&(Q.current=!0,B(le.newValue))};window.addEventListener("storage",ue);const ee=setInterval(()=>{const le=localStorage.getItem("authToken");B(te=>le&&le!==te?(Q.current=!0,le):te)},5e3);return()=>{window.removeEventListener("storage",ue),clearInterval(ee)}},[]);const J=D.useMemo(()=>{var ue,ee,le,te;return L.length>0?((ue=L.find(ce=>ce.active))==null?void 0:ue.market_id)??L[0].market_id??((le=(ee=L.find(ce=>ce.active))==null?void 0:ee.id)==null?void 0:le.toString())??((te=L[0].id)==null?void 0:te.toString())??null:null},[L]),K=D.useCallback((ue,ee)=>{if(i)return;const le=C.current,te=ue;if(le.length!==te.length){k.current=!0,C.current=te,R(te);return}let ce=!1;for(let je=0;je<le.length;je++){const de=le[je],Ae=te[je];if(de.x!==Ae.x||de.y!==Ae.y||de.w!==Ae.w||de.h!==Ae.h||de.i!==Ae.i){ce=!0;break}}ce&&(k.current=!0,C.current=te,R(te))},[i]),Z=D.useCallback(()=>{r(ue=>ue==="horizontal"?"vertical":ue==="vertical"?null:"horizontal")},[]),se=D.useCallback(()=>{a(ue=>!ue)},[]);D.useEffect(()=>(o?document.body.classList.add("full-width-screen"):document.body.classList.remove("full-width-screen"),()=>{document.body.classList.remove("full-width-screen")}),[o]);const be=D.useCallback(()=>{s(ue=>!ue),i&&(k.current=!1)},[i]),Oe=D.useCallback(()=>{v.current&&(k.current=!1,v.current.generateNewLayout())},[]),Ke=D.useCallback(async()=>{try{const ee=`[
${M.slice().sort((le,te)=>{const ce=parseInt(le.i,10),je=parseInt(te.i,10);return ce-je}).map(le=>`  [${le.x}, ${le.y}, ${le.w}, ${le.h}]`).join(`,
`)},
]`;await navigator.clipboard.writeText(ee),alert("Layout matrix copied to clipboard!")}catch(ue){console.error("Failed to copy layout matrix:",ue),alert("Failed to copy layout matrix to clipboard")}},[M]),De=D.useMemo(()=>M.map(function(ue){return m.jsxs("div",{className:"layoutItem",children:[m.jsx("b",{children:ue.i}),": [",ue.x,", ",ue.y,", ",ue.w,", ",ue.h,"]"]},ue.i)}),[M]),Pe=$||"",We=30,nt=10,U=12,_e=D.useMemo(()=>{if(M.length===0)return{};const ue={};for(let ee=0;ee<=6;ee++){const le=M.find(te=>te.i===ee.toString());if(le){const te=le.h*We+(le.h-1)*nt,ce=le.w/U*100;ue[ee]={width:`${ce}%`,height:`${te}px`}}}return ue},[M]),Ie=D.useMemo(()=>{var ue,ee,le,te,ce,je;return[m.jsx(Xwe,{symbol:"BINANCE:BTCUSDT",interval:"5",isCollapsed:!1},"tv"),m.jsx(o1e,{baseURL:E,wsURL:P,marketId:Pe,maxDepth:20,height:(ue=_e[1])==null?void 0:ue.height,authToken:j},`clobx-${Pe}`),m.jsx(l1e,{baseURL:E,wsURL:P,marketId:Pe,symbol:z||void 0,authToken:j},`price-${Pe}`),m.jsx(d1e,{ref:w,baseURL:E,wsURL:P,marketId:Pe,selectedBucketBalance:u,selectedBucketId:l,authToken:j,walletAddress:G,onLeverageClick:()=>{w.current&&g(w.current.leverage),f(!0)}},`trade-${Pe}`),m.jsx(f1e,{baseURL:E,wsURL:P,authToken:j,walletAddress:G,mnemonic:F,height:(ee=_e[4])==null?void 0:ee.height,refreshInterval:5e3},`order-${Pe}`),m.jsx(m1e,{baseURL:E,authToken:j,walletAddress:G,mnemonic:F,height:(le=_e[5])==null?void 0:le.height,refreshInterval:5e3,selectedBucketId:l},`pos-${Pe}`),m.jsx(y1e,{baseURL:E,wsURL:P,mnemonic:F,authToken:j,walletAddress:G,height:(te=_e[6])==null?void 0:te.height,refreshInterval:5e3,onBucketSelect:(de,Ae)=>{c(de),h(Ae)}},`bucket-${Pe}`),m.jsx(r1e,{baseURL:E,wsURL:P,marketId:Pe,maxDepth:20,height:(ce=_e[7])==null?void 0:ce.height,authToken:j},`clobclassic-${Pe}`),m.jsx(w1e,{baseURL:E,selectedMarketId:Pe,height:(je=_e[8])==null?void 0:je.height,authToken:j},`ticker-${Pe}`)]},[E,P,j,G,Pe,z,_e,l,u]);if(q)return m.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:m.jsx("div",{children:"Loading markets..."})});const me=V("markets");return me?m.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:m.jsxs("div",{children:["Error loading markets: ",me]})}):L.length===0||!$?m.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:m.jsx("div",{children:"No markets available."})}):m.jsxs("div",{className:"App-content-row",children:[m.jsxs("div",{className:"App-section",children:[m.jsx("h3",{style:{marginTop:"0",marginBottom:"0.75rem"},children:"Configuration"}),m.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[m.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Market:"}),m.jsx("select",{value:$||"",onChange:ue=>{const ee=ue.target.value;ee&&W(ee)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:L.length===0?m.jsx("option",{value:"",children:"Loading markets..."}):m.jsxs(m.Fragment,{children:[m.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),L.map(ue=>{var ce;const ee=ue.market_id??((ce=ue.id)==null?void 0:ce.toString())??"",le=ue.moniker?ue.moniker:ue.symbol?ue.symbol:ue.baseAsset&&ue.quoteAsset?`${ue.baseAsset}-${ue.quoteAsset}`:`Market ID: ${ee}`,te=ue.active?" [ACTIVE]":"";return m.jsxs("option",{value:ee,children:[le," - ID: ",ee,te]},ee)})]})}),L.length>0&&m.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:$===J?"#51cf66":"#ff9f43"},children:$===J?` Auto-selected default market (ID: ${J==null?void 0:J.substring(0,16)}...)`:` Manual selection (ID: ${$==null?void 0:$.substring(0,16)}...)`})]}),m.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Mnemonic (for wallet address):"}),m.jsx("input",{type:"text",value:F||"",onChange:ue=>A(ue.target.value),placeholder:"Enter mnemonic to generate wallet address",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:"white",color:"#333"}})]}),m.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Wallet Address:"}),m.jsx("input",{type:"text",value:G||"",disabled:!!(F&&F.trim()!==""),placeholder:"automatic (from mnemonic via useOnboard)",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:G?"#e7f3ff":"#f5f5f5",color:"#333"}}),G&&m.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#28a745"},children:" Auto-generated from mnemonic via useOnboard hook"})]}),m.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Layout Type:"}),m.jsxs("select",{value:b,onChange:ue=>{const ee=ue.target.value;y(ee)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:[m.jsx("option",{value:"default",children:"Default Predefined Layouts"}),m.jsx("option",{value:"widthfit",children:"Width Fit"})]})]})]}),m.jsx("h3",{children:"Layout Controls"}),m.jsx("button",{onClick:Oe,style:{marginRight:"0.5rem"},children:"Generate New Layout"}),m.jsx("button",{onClick:be,style:{marginRight:"0.5rem"},children:i?"Enable Dragging":"Disable Dragging"}),m.jsx("button",{onClick:Z,style:{marginRight:"0.5rem"},children:"Change Compaction Type"}),m.jsx("button",{onClick:se,children:"Full Width Screen"}),m.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9em",color:"#fff"},children:["Compaction type:"," ",e?e.charAt(0).toUpperCase()+e.slice(1):"No Compaction"]})]}),m.jsx(pO,{ref:v,onLayoutChange:K,slotContent:Ie,compactType:e,allStatic:i,onCompactTypeChange:Z,onToggleStatic:be,onNewLayout:Oe,initialLayout:O},b),m.jsxs("div",{className:"overview-layout layoutJSON",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[m.jsxs("span",{children:["Displayed as ",m.jsx("code",{children:"[x, y, w, h]"}),":"]}),m.jsx("button",{onClick:Ke,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"4px",border:"1px solid #313131",backgroundColor:"#ccc",color:"black",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:ue=>{ue.currentTarget.style.color="white",ue.currentTarget.style.backgroundColor="#0056b3"},onMouseOut:ue=>{ue.currentTarget.style.color="black",ue.currentTarget.style.backgroundColor="#ccc"},children:"Copy"})]}),m.jsx("div",{className:"columns",children:De})]}),m.jsx(g1e,{isOpen:d,currentLeverage:(($e=w.current)==null?void 0:$e.leverage)||10,tempLeverage:p,maxRatio:w.current?w.current.calculateMaxRatio(p):p.toFixed(2),onLeverageChange:g,onConfirm:()=>{w.current&&w.current.setLeverage(p),f(!1)},onCancel:()=>{w.current&&g(w.current.leverage),f(!1)}})]})}function dd({data:n,maxVisible:e=10,maxDataPoints:r=100,height:i=400,width:s=1080,rowWidth:o=280,onItemClick:a,getValue:l,color:c="#2196F3"}){const u=D.useRef(null),h=D.useRef(null),d=D.useRef(0),[f,p]=D.useState(!1),[g,b]=D.useState(0),y=20,v=800,w=D.useMemo(()=>!n||n.length===0?[]:n.length<=r?n:n.slice(-r),[n,r]),k=_=>{const S=[];if(_.timestamp!==void 0&&S.push({label:"Time",value:new Date(_.timestamp).toLocaleTimeString()}),_.market_id!==void 0&&S.push({label:"Market",value:String(_.market_id)}),_.symbol!==void 0&&S.push({label:"Symbol",value:String(_.symbol)}),_.open!==void 0){const C=Number(_.open);S.push({label:"Open",value:isNaN(C)?String(_.open):C.toFixed(4)})}if(_.close!==void 0){const C=Number(_.close);S.push({label:"Close",value:isNaN(C)?String(_.close):C.toFixed(4)})}if(_.high!==void 0){const C=Number(_.high);S.push({label:"High",value:isNaN(C)?String(_.high):C.toFixed(4)})}if(_.low!==void 0){const C=Number(_.low);S.push({label:"Low",value:isNaN(C)?String(_.low):C.toFixed(4)})}if(_.volume!==void 0){const C=Number(_.volume);S.push({label:"Volume",value:isNaN(C)?String(_.volume):C.toFixed(2)})}if(_.price!==void 0){const C=Number(_.price);S.push({label:"Price",value:isNaN(C)?String(_.price):C.toFixed(4)})}if(_.mark_price!==void 0){const C=Number(_.mark_price);S.push({label:"Mark Price",value:isNaN(C)?String(_.mark_price):C.toFixed(4)})}if(_.last_price!==void 0){const C=Number(_.last_price);S.push({label:"Last Price",value:isNaN(C)?String(_.last_price):C.toFixed(4)})}if(_.size!==void 0){const C=Number(_.size);S.push({label:"Size",value:isNaN(C)?String(_.size):C.toFixed(4)})}if(_.entryPrice!==void 0){const C=Number(_.entryPrice);S.push({label:"Entry",value:isNaN(C)?String(_.entryPrice):C.toFixed(4)})}if(_.unrealizedPnL!==void 0){const C=Number(_.unrealizedPnL);S.push({label:"PnL",value:isNaN(C)?String(_.unrealizedPnL):C.toFixed(4)})}if(_.orderId!==void 0&&S.push({label:"Order ID",value:String(_.orderId)}),_.status!==void 0&&S.push({label:"Status",value:String(_.status)}),_.bucketId!==void 0&&S.push({label:"Bucket ID",value:String(_.bucketId)}),_.maxLeverage!==void 0&&S.push({label:"Max Lev",value:String(_.maxLeverage)}),_.value!==void 0&&S.length===0){const C=Number(_.value);S.push({label:"Value",value:isNaN(C)?String(_.value):C.toFixed(4)})}return S.length===0&&S.push({label:"Data",value:"Click to view"}),S.slice(0,6)};return D.useEffect(()=>{if(!h.current||!u.current)return;const _=w.length;if(_===0){b(0),d.current=0;return}const E=u.current.offsetWidth-20*2,P=_*o+(_-1)*y;if(P>E){const M=P-E;b(-M)}else b(0);const O=w.length>d.current;d.current=w.length,O&&h.current&&requestAnimationFrame(()=>{h.current&&h.current.offsetWidth})},[w.length,o,y,s]),D.useEffect(()=>{h.current&&(h.current.style.transition=f?"none":`transform ${v}ms ease-out`,h.current.style.transform=`translateX(${g}px)`)},[g,f,v]),m.jsxs("div",{ref:u,className:"data-flow-container",style:{width:`${s}px`,height:`${i}px`},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[m.jsx("div",{ref:h,className:"data-flow-rows-wrapper",style:{gap:`${y}px`},children:w.map((_,S)=>{const C=k(_),E=S;return m.jsxs("div",{className:"data-flow-row",onClick:()=>{a&&a(_)},style:{width:`${o}px`,background:c},children:[m.jsx("div",{className:"data-flow-row-header",children:_.timestamp?new Date(_.timestamp).toLocaleTimeString():`#${E+1}`}),m.jsx("div",{className:"data-flow-row-fields",children:C.map((P,O)=>m.jsxs("div",{className:"data-flow-field",children:[m.jsxs("span",{className:"data-flow-field-label",children:[P.label,":"]}),m.jsx("span",{className:"data-flow-field-value",children:P.value})]},O))}),m.jsx("div",{className:"data-flow-row-footer",children:"Click to view details"})]},`${E}-${_.timestamp||Date.now()}-${_.id||JSON.stringify(_)}`)})}),f&&m.jsx("div",{className:"data-flow-paused-indicator",children:"Paused"})]})}function S1e({data:n,isOpen:e,onClose:r,title:i="Data Details"}){return D.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),D.useEffect(()=>{const s=o=>{o.key==="Escape"&&e&&r()};return e&&window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[e,r]),e?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"data-modal-overlay",onClick:r}),m.jsxs("div",{className:"data-modal",onClick:s=>s.stopPropagation(),children:[m.jsx("h3",{className:"data-modal-title",children:i}),m.jsx("pre",{className:"data-modal-content",children:JSON.stringify(n,null,2)}),m.jsx("button",{className:"data-modal-close-button",onClick:r,children:"Close"})]})]}):null}function uy(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function k1e(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function UZ(n){let e,r,i;n.length!==2?(e=uy,r=(l,c)=>uy(n(l),c),i=(l,c)=>n(l)-c):(e=n===uy||n===k1e?n:C1e,r=n,i=n);function s(l,c,u=0,h=l.length){if(u<h){if(e(c,c)!==0)return h;do{const d=u+h>>>1;r(l[d],c)<0?u=d+1:h=d}while(u<h)}return u}function o(l,c,u=0,h=l.length){if(u<h){if(e(c,c)!==0)return h;do{const d=u+h>>>1;r(l[d],c)<=0?u=d+1:h=d}while(u<h)}return u}function a(l,c,u=0,h=l.length){const d=s(l,c,u,h-1);return d>u&&i(l[d-1],c)>-i(l[d],c)?d-1:d}return{left:s,center:a,right:o}}function C1e(){return 0}function E1e(n){return n===null?NaN:+n}const T1e=UZ(uy),P1e=T1e.right;UZ(E1e).center;class u8 extends Map{constructor(e,r=O1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(d8(this,e))}has(e){return super.has(d8(this,e))}set(e,r){return super.set(M1e(this,e),r)}delete(e){return super.delete(D1e(this,e))}}function d8({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function M1e({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function D1e({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function O1e(n){return n!==null&&typeof n=="object"?n.valueOf():n}const I1e=Math.sqrt(50),R1e=Math.sqrt(10),A1e=Math.sqrt(2);function vx(n,e,r){const i=(e-n)/Math.max(0,r),s=Math.floor(Math.log10(i)),o=i/Math.pow(10,s),a=o>=I1e?10:o>=R1e?5:o>=A1e?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/a,l=Math.round(n*u),c=Math.round(e*u),l/u<n&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,s)*a,l=Math.round(n/u),c=Math.round(e/u),l*u<n&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?vx(n,e,r*2):[l,c,u]}function N1e(n,e,r){if(e=+e,n=+n,r=+r,!(r>0))return[];if(n===e)return[n];const i=e<n,[s,o,a]=i?vx(e,n,r):vx(n,e,r);if(!(o>=s))return[];const l=o-s+1,c=new Array(l);if(i)if(a<0)for(let u=0;u<l;++u)c[u]=(o-u)/-a;else for(let u=0;u<l;++u)c[u]=(o-u)*a;else if(a<0)for(let u=0;u<l;++u)c[u]=(s+u)/-a;else for(let u=0;u<l;++u)c[u]=(s+u)*a;return c}function gO(n,e,r){return e=+e,n=+n,r=+r,vx(n,e,r)[2]}function j1e(n,e,r){e=+e,n=+n,r=+r;const i=e<n,s=i?gO(e,n,r):gO(n,e,r);return(i?-1:1)*(s<0?1/-s:s)}function vO(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function h8(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function L1e(n,e,r){n=+n,e=+e,r=(s=arguments.length)<2?(e=n,n=0,1):s<3?1:+r;for(var i=-1,s=Math.max(0,Math.ceil((e-n)/r))|0,o=new Array(s);++i<s;)o[i]=n+i*r;return o}function F1e(n,e){let r=0;for(let i of n)(i=+i)&&(r+=i);return r}function $1e(n){return n}var $S=1,zS=2,bO=3,Qp=4,f8=1e-6;function z1e(n){return"translate("+n+",0)"}function B1e(n){return"translate(0,"+n+")"}function U1e(n){return e=>+n(e)}function q1e(n,e){return e=Math.max(0,n.bandwidth()-e*2)/2,n.round()&&(e=Math.round(e)),r=>+n(r)+e}function W1e(){return!this.__axis}function qZ(n,e){var r=[],i=null,s=null,o=6,a=6,l=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=n===$S||n===Qp?-1:1,h=n===Qp||n===zS?"x":"y",d=n===$S||n===bO?z1e:B1e;function f(p){var g=i??(e.ticks?e.ticks.apply(e,r):e.domain()),b=s??(e.tickFormat?e.tickFormat.apply(e,r):$1e),y=Math.max(o,0)+l,v=e.range(),w=+v[0]+c,k=+v[v.length-1]+c,_=(e.bandwidth?q1e:U1e)(e.copy(),c),S=p.selection?p.selection():p,C=S.selectAll(".domain").data([null]),E=S.selectAll(".tick").data(g,e).order(),P=E.exit(),O=E.enter().append("g").attr("class","tick"),M=E.select("line"),R=E.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(O),M=M.merge(O.append("line").attr("stroke","currentColor").attr(h+"2",u*o)),R=R.merge(O.append("text").attr("fill","currentColor").attr(h,u*y).attr("dy",n===$S?"0em":n===bO?"0.71em":"0.32em")),p!==S&&(C=C.transition(p),E=E.transition(p),M=M.transition(p),R=R.transition(p),P=P.transition(p).attr("opacity",f8).attr("transform",function(j){return isFinite(j=_(j))?d(j+c):this.getAttribute("transform")}),O.attr("opacity",f8).attr("transform",function(j){var B=this.parentNode.__axis;return d((B&&isFinite(B=B(j))?B:_(j))+c)})),P.remove(),C.attr("d",n===Qp||n===zS?a?"M"+u*a+","+w+"H"+c+"V"+k+"H"+u*a:"M"+c+","+w+"V"+k:a?"M"+w+","+u*a+"V"+c+"H"+k+"V"+u*a:"M"+w+","+c+"H"+k),E.attr("opacity",1).attr("transform",function(j){return d(_(j)+c)}),M.attr(h+"2",u*o),R.attr(h,u*y).text(b),S.filter(W1e).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",n===zS?"start":n===Qp?"end":"middle"),S.each(function(){this.__axis=_})}return f.scale=function(p){return arguments.length?(e=p,f):e},f.ticks=function(){return r=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(r=p==null?[]:Array.from(p),f):r.slice()},f.tickValues=function(p){return arguments.length?(i=p==null?null:Array.from(p),f):i&&i.slice()},f.tickFormat=function(p){return arguments.length?(s=p,f):s},f.tickSize=function(p){return arguments.length?(o=a=+p,f):o},f.tickSizeInner=function(p){return arguments.length?(o=+p,f):o},f.tickSizeOuter=function(p){return arguments.length?(a=+p,f):a},f.tickPadding=function(p){return arguments.length?(l=+p,f):l},f.offset=function(p){return arguments.length?(c=+p,f):c},f}function p8(n){return qZ(bO,n)}function H1e(n){return qZ(Qp,n)}var V1e={value:()=>{}};function S0(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new dy(r)}function dy(n){this._=n}function Y1e(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}dy.prototype=S0.prototype={constructor:dy,on:function(n,e){var r=this._,i=Y1e(n+"",r),s,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((s=(n=i[o]).type)&&(s=G1e(r[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(s=(n=i[o]).type)r[s]=m8(r[s],n.name,e);else if(e==null)for(s in r)r[s]=m8(r[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new dy(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,o;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,s=o.length;i<s;++i)o[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,o=i.length;s<o;++s)i[s].value.apply(e,r)}};function G1e(n,e){for(var r=0,i=n.length,s;r<i;++r)if((s=n[r]).name===e)return s.value}function m8(n,e,r){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=V1e,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}var yO="http://www.w3.org/1999/xhtml";const g8={svg:"http://www.w3.org/2000/svg",xhtml:yO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r1(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),g8.hasOwnProperty(e)?{space:g8[e],local:n}:n}function K1e(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===yO&&e.documentElement.namespaceURI===yO?e.createElement(n):e.createElementNS(r,n)}}function X1e(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function WZ(n){var e=r1(n);return(e.local?X1e:K1e)(e)}function Q1e(){}function FA(n){return n==null?Q1e:function(){return this.querySelector(n)}}function J1e(n){typeof n!="function"&&(n=FA(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=new Array(a),c,u,h=0;h<a;++h)(c=o[h])&&(u=n.call(c,c.__data__,h,o))&&("__data__"in c&&(u.__data__=c.__data__),l[h]=u);return new Qr(i,this._parents)}function HZ(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Z1e(){return[]}function VZ(n){return n==null?Z1e:function(){return this.querySelectorAll(n)}}function e_e(n){return function(){return HZ(n.apply(this,arguments))}}function t_e(n){typeof n=="function"?n=e_e(n):n=VZ(n);for(var e=this._groups,r=e.length,i=[],s=[],o=0;o<r;++o)for(var a=e[o],l=a.length,c,u=0;u<l;++u)(c=a[u])&&(i.push(n.call(c,c.__data__,u,a)),s.push(c));return new Qr(i,s)}function YZ(n){return function(){return this.matches(n)}}function GZ(n){return function(e){return e.matches(n)}}var n_e=Array.prototype.find;function r_e(n){return function(){return n_e.call(this.children,n)}}function i_e(){return this.firstElementChild}function s_e(n){return this.select(n==null?i_e:r_e(typeof n=="function"?n:GZ(n)))}var o_e=Array.prototype.filter;function a_e(){return Array.from(this.children)}function l_e(n){return function(){return o_e.call(this.children,n)}}function c_e(n){return this.selectAll(n==null?a_e:l_e(typeof n=="function"?n:GZ(n)))}function u_e(n){typeof n!="function"&&(n=YZ(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],c,u=0;u<a;++u)(c=o[u])&&n.call(c,c.__data__,u,o)&&l.push(c);return new Qr(i,this._parents)}function KZ(n){return new Array(n.length)}function d_e(){return new Qr(this._enter||this._groups.map(KZ),this._parents)}function bx(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}bx.prototype={constructor:bx,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function h_e(n){return function(){return n}}function f_e(n,e,r,i,s,o){for(var a=0,l,c=e.length,u=o.length;a<u;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):r[a]=new bx(n,o[a]);for(;a<c;++a)(l=e[a])&&(s[a]=l)}function p_e(n,e,r,i,s,o,a){var l,c,u=new Map,h=e.length,d=o.length,f=new Array(h),p;for(l=0;l<h;++l)(c=e[l])&&(f[l]=p=a.call(c,c.__data__,l,e)+"",u.has(p)?s[l]=c:u.set(p,c));for(l=0;l<d;++l)p=a.call(n,o[l],l,o)+"",(c=u.get(p))?(i[l]=c,c.__data__=o[l],u.delete(p)):r[l]=new bx(n,o[l]);for(l=0;l<h;++l)(c=e[l])&&u.get(f[l])===c&&(s[l]=c)}function m_e(n){return n.__data__}function g_e(n,e){if(!arguments.length)return Array.from(this,m_e);var r=e?p_e:f_e,i=this._parents,s=this._groups;typeof n!="function"&&(n=h_e(n));for(var o=s.length,a=new Array(o),l=new Array(o),c=new Array(o),u=0;u<o;++u){var h=i[u],d=s[u],f=d.length,p=v_e(n.call(h,h&&h.__data__,u,i)),g=p.length,b=l[u]=new Array(g),y=a[u]=new Array(g),v=c[u]=new Array(f);r(h,d,b,y,v,p,e);for(var w=0,k=0,_,S;w<g;++w)if(_=b[w]){for(w>=k&&(k=w+1);!(S=y[k])&&++k<g;);_._next=S||null}}return a=new Qr(a,i),a._enter=l,a._exit=c,a}function v_e(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function b_e(){return new Qr(this._exit||this._groups.map(KZ),this._parents)}function y_e(n,e,r){var i=this.enter(),s=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?o.remove():r(o),i&&s?i.merge(s).order():s}function x_e(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,s=r.length,o=i.length,a=Math.min(s,o),l=new Array(s),c=0;c<a;++c)for(var u=r[c],h=i[c],d=u.length,f=l[c]=new Array(d),p,g=0;g<d;++g)(p=u[g]||h[g])&&(f[g]=p);for(;c<s;++c)l[c]=r[c];return new Qr(l,this._parents)}function w_e(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],s=i.length-1,o=i[s],a;--s>=0;)(a=i[s])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function __e(n){n||(n=S_e);function e(d,f){return d&&f?n(d.__data__,f.__data__):!d-!f}for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o){for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,h=0;h<l;++h)(u=a[h])&&(c[h]=u);c.sort(e)}return new Qr(s,this._parents).order()}function S_e(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function k_e(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function C_e(){return Array.from(this)}function E_e(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length;s<o;++s){var a=i[s];if(a)return a}return null}function T_e(){let n=0;for(const e of this)++n;return n}function P_e(){return!this.node()}function M_e(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var s=e[r],o=0,a=s.length,l;o<a;++o)(l=s[o])&&n.call(l,l.__data__,o,s);return this}function D_e(n){return function(){this.removeAttribute(n)}}function O_e(n){return function(){this.removeAttributeNS(n.space,n.local)}}function I_e(n,e){return function(){this.setAttribute(n,e)}}function R_e(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function A_e(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function N_e(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function j_e(n,e){var r=r1(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?O_e:D_e:typeof e=="function"?r.local?N_e:A_e:r.local?R_e:I_e)(r,e))}function XZ(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function L_e(n){return function(){this.style.removeProperty(n)}}function F_e(n,e,r){return function(){this.style.setProperty(n,e,r)}}function $_e(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function z_e(n,e,r){return arguments.length>1?this.each((e==null?L_e:typeof e=="function"?$_e:F_e)(n,e,r??"")):rf(this.node(),n)}function rf(n,e){return n.style.getPropertyValue(e)||XZ(n).getComputedStyle(n,null).getPropertyValue(e)}function B_e(n){return function(){delete this[n]}}function U_e(n,e){return function(){this[n]=e}}function q_e(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function W_e(n,e){return arguments.length>1?this.each((e==null?B_e:typeof e=="function"?q_e:U_e)(n,e)):this.node()[n]}function QZ(n){return n.trim().split(/^|\s+/)}function $A(n){return n.classList||new JZ(n)}function JZ(n){this._node=n,this._names=QZ(n.getAttribute("class")||"")}JZ.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function ZZ(n,e){for(var r=$A(n),i=-1,s=e.length;++i<s;)r.add(e[i])}function eee(n,e){for(var r=$A(n),i=-1,s=e.length;++i<s;)r.remove(e[i])}function H_e(n){return function(){ZZ(this,n)}}function V_e(n){return function(){eee(this,n)}}function Y_e(n,e){return function(){(e.apply(this,arguments)?ZZ:eee)(this,n)}}function G_e(n,e){var r=QZ(n+"");if(arguments.length<2){for(var i=$A(this.node()),s=-1,o=r.length;++s<o;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?Y_e:e?H_e:V_e)(r,e))}function K_e(){this.textContent=""}function X_e(n){return function(){this.textContent=n}}function Q_e(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function J_e(n){return arguments.length?this.each(n==null?K_e:(typeof n=="function"?Q_e:X_e)(n)):this.node().textContent}function Z_e(){this.innerHTML=""}function eSe(n){return function(){this.innerHTML=n}}function tSe(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function nSe(n){return arguments.length?this.each(n==null?Z_e:(typeof n=="function"?tSe:eSe)(n)):this.node().innerHTML}function rSe(){this.nextSibling&&this.parentNode.appendChild(this)}function iSe(){return this.each(rSe)}function sSe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oSe(){return this.each(sSe)}function aSe(n){var e=typeof n=="function"?n:WZ(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function lSe(){return null}function cSe(n,e){var r=typeof n=="function"?n:WZ(n),i=e==null?lSe:typeof e=="function"?e:FA(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function uSe(){var n=this.parentNode;n&&n.removeChild(this)}function dSe(){return this.each(uSe)}function hSe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function fSe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function pSe(n){return this.select(n?fSe:hSe)}function mSe(n){return arguments.length?this.property("__data__",n):this.node().__data__}function gSe(n){return function(e){n.call(this,e,this.__data__)}}function vSe(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function bSe(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,s=e.length,o;r<s;++r)o=e[r],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function ySe(n,e,r){return function(){var i=this.__on,s,o=gSe(e);if(i){for(var a=0,l=i.length;a<l;++a)if((s=i[a]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=r),s.value=e;return}}this.addEventListener(n.type,o,r),s={type:n.type,name:n.name,value:e,listener:o,options:r},i?i.push(s):this.__on=[s]}}function xSe(n,e,r){var i=vSe(n+""),s,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,h;c<u;++c)for(s=0,h=l[c];s<o;++s)if((a=i[s]).type===h.type&&a.name===h.name)return h.value}return}for(l=e?ySe:bSe,s=0;s<o;++s)this.each(l(i[s],e,r));return this}function tee(n,e,r){var i=XZ(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,r):(s=i.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function wSe(n,e){return function(){return tee(this,n,e)}}function _Se(n,e){return function(){return tee(this,n,e.apply(this,arguments))}}function SSe(n,e){return this.each((typeof e=="function"?_Se:wSe)(n,e))}function*kSe(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length,a;s<o;++s)(a=i[s])&&(yield a)}var zA=[null];function Qr(n,e){this._groups=n,this._parents=e}function k0(){return new Qr([[document.documentElement]],zA)}function CSe(){return this}Qr.prototype=k0.prototype={constructor:Qr,select:J1e,selectAll:t_e,selectChild:s_e,selectChildren:c_e,filter:u_e,data:g_e,enter:d_e,exit:b_e,join:y_e,merge:x_e,selection:CSe,order:w_e,sort:__e,call:k_e,nodes:C_e,node:E_e,size:T_e,empty:P_e,each:M_e,attr:j_e,style:z_e,property:W_e,classed:G_e,text:J_e,html:nSe,raise:iSe,lower:oSe,append:aSe,insert:cSe,remove:dSe,clone:pSe,datum:mSe,on:xSe,dispatch:SSe,[Symbol.iterator]:kSe};function Ir(n){return typeof n=="string"?new Qr([[document.querySelector(n)]],[document.documentElement]):new Qr([[n]],zA)}function ESe(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Ls(n,e){if(n=ESe(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}function TSe(n){return typeof n=="string"?new Qr([document.querySelectorAll(n)],[document.documentElement]):new Qr([HZ(n)],zA)}const PSe={passive:!1},Dg={capture:!0,passive:!1};function BS(n){n.stopImmediatePropagation()}function th(n){n.preventDefault(),n.stopImmediatePropagation()}function nee(n){var e=n.document.documentElement,r=Ir(n).on("dragstart.drag",th,Dg);"onselectstart"in e?r.on("selectstart.drag",th,Dg):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ree(n,e){var r=n.document.documentElement,i=Ir(n).on("dragstart.drag",null);e&&(i.on("click.drag",th,Dg),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const ob=n=>()=>n;function xO(n,{sourceEvent:e,subject:r,target:i,identifier:s,active:o,x:a,y:l,dx:c,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}xO.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function MSe(n){return!n.ctrlKey&&!n.button}function DSe(){return this.parentNode}function OSe(n,e){return e??{x:n.x,y:n.y}}function ISe(){return navigator.maxTouchPoints||"ontouchstart"in this}function RSe(){var n=MSe,e=DSe,r=OSe,i=ISe,s={},o=S0("start","drag","end"),a=0,l,c,u,h,d=0;function f(_){_.on("mousedown.drag",p).filter(i).on("touchstart.drag",y).on("touchmove.drag",v,PSe).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(_,S){if(!(h||!n.call(this,_,S))){var C=k(this,e.call(this,_,S),_,S,"mouse");C&&(Ir(_.view).on("mousemove.drag",g,Dg).on("mouseup.drag",b,Dg),nee(_.view),BS(_),u=!1,l=_.clientX,c=_.clientY,C("start",_))}}function g(_){if(th(_),!u){var S=_.clientX-l,C=_.clientY-c;u=S*S+C*C>d}s.mouse("drag",_)}function b(_){Ir(_.view).on("mousemove.drag mouseup.drag",null),ree(_.view,u),th(_),s.mouse("end",_)}function y(_,S){if(n.call(this,_,S)){var C=_.changedTouches,E=e.call(this,_,S),P=C.length,O,M;for(O=0;O<P;++O)(M=k(this,E,_,S,C[O].identifier,C[O]))&&(BS(_),M("start",_,C[O]))}}function v(_){var S=_.changedTouches,C=S.length,E,P;for(E=0;E<C;++E)(P=s[S[E].identifier])&&(th(_),P("drag",_,S[E]))}function w(_){var S=_.changedTouches,C=S.length,E,P;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),E=0;E<C;++E)(P=s[S[E].identifier])&&(BS(_),P("end",_,S[E]))}function k(_,S,C,E,P,O){var M=o.copy(),R=Ls(O||C,S),j,B,L;if((L=r.call(_,new xO("beforestart",{sourceEvent:C,target:f,identifier:P,active:a,x:R[0],y:R[1],dx:0,dy:0,dispatch:M}),E))!=null)return j=L.x-R[0]||0,B=L.y-R[1]||0,function $(z,W,q){var V=R,F;switch(z){case"start":s[P]=$,F=a++;break;case"end":delete s[P],--a;case"drag":R=Ls(q||W,S),F=a;break}M.call(z,_,new xO(z,{sourceEvent:W,subject:L,target:f,identifier:P,active:F,x:R[0]+j,y:R[1]+B,dx:R[0]-V[0],dy:R[1]-V[1],dispatch:M}),E)}}return f.filter=function(_){return arguments.length?(n=typeof _=="function"?_:ob(!!_),f):n},f.container=function(_){return arguments.length?(e=typeof _=="function"?_:ob(_),f):e},f.subject=function(_){return arguments.length?(r=typeof _=="function"?_:ob(_),f):r},f.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:ob(!!_),f):i},f.on=function(){var _=o.on.apply(o,arguments);return _===o?f:_},f.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,f):Math.sqrt(d)},f}function BA(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function iee(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function C0(){}var Og=.7,yx=1/Og,nh="\\s*([+-]?\\d+)\\s*",Ig="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Po="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ASe=/^#([0-9a-f]{3,8})$/,NSe=new RegExp(`^rgb\\(${nh},${nh},${nh}\\)$`),jSe=new RegExp(`^rgb\\(${Po},${Po},${Po}\\)$`),LSe=new RegExp(`^rgba\\(${nh},${nh},${nh},${Ig}\\)$`),FSe=new RegExp(`^rgba\\(${Po},${Po},${Po},${Ig}\\)$`),$Se=new RegExp(`^hsl\\(${Ig},${Po},${Po}\\)$`),zSe=new RegExp(`^hsla\\(${Ig},${Po},${Po},${Ig}\\)$`),v8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};BA(C0,ku,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:b8,formatHex:b8,formatHex8:BSe,formatHsl:USe,formatRgb:y8,toString:y8});function b8(){return this.rgb().formatHex()}function BSe(){return this.rgb().formatHex8()}function USe(){return see(this).formatHsl()}function y8(){return this.rgb().formatRgb()}function ku(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=ASe.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?x8(e):r===3?new pi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?ab(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?ab(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=NSe.exec(n))?new pi(e[1],e[2],e[3],1):(e=jSe.exec(n))?new pi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=LSe.exec(n))?ab(e[1],e[2],e[3],e[4]):(e=FSe.exec(n))?ab(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$Se.exec(n))?S8(e[1],e[2]/100,e[3]/100,1):(e=zSe.exec(n))?S8(e[1],e[2]/100,e[3]/100,e[4]):v8.hasOwnProperty(n)?x8(v8[n]):n==="transparent"?new pi(NaN,NaN,NaN,0):null}function x8(n){return new pi(n>>16&255,n>>8&255,n&255,1)}function ab(n,e,r,i){return i<=0&&(n=e=r=NaN),new pi(n,e,r,i)}function qSe(n){return n instanceof C0||(n=ku(n)),n?(n=n.rgb(),new pi(n.r,n.g,n.b,n.opacity)):new pi}function wO(n,e,r,i){return arguments.length===1?qSe(n):new pi(n,e,r,i??1)}function pi(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}BA(pi,wO,iee(C0,{brighter(n){return n=n==null?yx:Math.pow(yx,n),new pi(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Og:Math.pow(Og,n),new pi(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new pi(su(this.r),su(this.g),su(this.b),xx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:w8,formatHex:w8,formatHex8:WSe,formatRgb:_8,toString:_8}));function w8(){return`#${Fc(this.r)}${Fc(this.g)}${Fc(this.b)}`}function WSe(){return`#${Fc(this.r)}${Fc(this.g)}${Fc(this.b)}${Fc((isNaN(this.opacity)?1:this.opacity)*255)}`}function _8(){const n=xx(this.opacity);return`${n===1?"rgb(":"rgba("}${su(this.r)}, ${su(this.g)}, ${su(this.b)}${n===1?")":`, ${n})`}`}function xx(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function su(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Fc(n){return n=su(n),(n<16?"0":"")+n.toString(16)}function S8(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new zs(n,e,r,i)}function see(n){if(n instanceof zs)return new zs(n.h,n.s,n.l,n.opacity);if(n instanceof C0||(n=ku(n)),!n)return new zs;if(n instanceof zs)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,s=Math.min(e,r,i),o=Math.max(e,r,i),a=NaN,l=o-s,c=(o+s)/2;return l?(e===o?a=(r-i)/l+(r<i)*6:r===o?a=(i-e)/l+2:a=(e-r)/l+4,l/=c<.5?o+s:2-o-s,a*=60):l=c>0&&c<1?0:a,new zs(a,l,c,n.opacity)}function HSe(n,e,r,i){return arguments.length===1?see(n):new zs(n,e,r,i??1)}function zs(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}BA(zs,HSe,iee(C0,{brighter(n){return n=n==null?yx:Math.pow(yx,n),new zs(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Og:Math.pow(Og,n),new zs(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,s=2*r-i;return new pi(US(n>=240?n-240:n+120,s,i),US(n,s,i),US(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new zs(k8(this.h),lb(this.s),lb(this.l),xx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=xx(this.opacity);return`${n===1?"hsl(":"hsla("}${k8(this.h)}, ${lb(this.s)*100}%, ${lb(this.l)*100}%${n===1?")":`, ${n})`}`}}));function k8(n){return n=(n||0)%360,n<0?n+360:n}function lb(n){return Math.max(0,Math.min(1,n||0))}function US(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const UA=n=>()=>n;function VSe(n,e){return function(r){return n+r*e}}function YSe(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function GSe(n){return(n=+n)==1?oee:function(e,r){return r-e?YSe(e,r,n):UA(isNaN(e)?r:e)}}function oee(n,e){var r=e-n;return r?VSe(n,r):UA(isNaN(n)?e:n)}const wx=function n(e){var r=GSe(e);function i(s,o){var a=r((s=wO(s)).r,(o=wO(o)).r),l=r(s.g,o.g),c=r(s.b,o.b),u=oee(s.opacity,o.opacity);return function(h){return s.r=a(h),s.g=l(h),s.b=c(h),s.opacity=u(h),s+""}}return i.gamma=n,i}(1);function KSe(n,e){e||(e=[]);var r=n?Math.min(e.length,n.length):0,i=e.slice(),s;return function(o){for(s=0;s<r;++s)i[s]=n[s]*(1-o)+e[s]*o;return i}}function XSe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function QSe(n,e){var r=e?e.length:0,i=n?Math.min(r,n.length):0,s=new Array(i),o=new Array(r),a;for(a=0;a<i;++a)s[a]=qA(n[a],e[a]);for(;a<r;++a)o[a]=e[a];return function(l){for(a=0;a<i;++a)o[a]=s[a](l);return o}}function JSe(n,e){var r=new Date;return n=+n,e=+e,function(i){return r.setTime(n*(1-i)+e*i),r}}function $s(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}function ZSe(n,e){var r={},i={},s;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in n?r[s]=qA(n[s],e[s]):i[s]=e[s];return function(o){for(s in r)i[s]=r[s](o);return i}}var _O=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qS=new RegExp(_O.source,"g");function eke(n){return function(){return n}}function tke(n){return function(e){return n(e)+""}}function aee(n,e){var r=_O.lastIndex=qS.lastIndex=0,i,s,o,a=-1,l=[],c=[];for(n=n+"",e=e+"";(i=_O.exec(n))&&(s=qS.exec(e));)(o=s.index)>r&&(o=e.slice(r,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,c.push({i:a,x:$s(i,s)})),r=qS.lastIndex;return r<e.length&&(o=e.slice(r),l[a]?l[a]+=o:l[++a]=o),l.length<2?c[0]?tke(c[0].x):eke(e):(e=c.length,function(u){for(var h=0,d;h<e;++h)l[(d=c[h]).i]=d.x(u);return l.join("")})}function qA(n,e){var r=typeof e,i;return e==null||r==="boolean"?UA(e):(r==="number"?$s:r==="string"?(i=ku(e))?(e=i,wx):aee:e instanceof ku?wx:e instanceof Date?JSe:XSe(e)?KSe:Array.isArray(e)?QSe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ZSe:$s)(n,e)}function nke(n,e){return n=+n,e=+e,function(r){return Math.round(n*(1-r)+e*r)}}var C8=180/Math.PI,SO={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lee(n,e,r,i,s,o){var a,l,c;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(c=n*r+e*i)&&(r-=n*c,i-=e*c),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,c/=l),n*i<e*r&&(n=-n,e=-e,c=-c,a=-a),{translateX:s,translateY:o,rotate:Math.atan2(e,n)*C8,skewX:Math.atan(c)*C8,scaleX:a,scaleY:l}}var cb;function rke(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?SO:lee(e.a,e.b,e.c,e.d,e.e,e.f)}function ike(n){return n==null||(cb||(cb=document.createElementNS("http://www.w3.org/2000/svg","g")),cb.setAttribute("transform",n),!(n=cb.transform.baseVal.consolidate()))?SO:(n=n.matrix,lee(n.a,n.b,n.c,n.d,n.e,n.f))}function cee(n,e,r,i){function s(u){return u.length?u.pop()+" ":""}function o(u,h,d,f,p,g){if(u!==d||h!==f){var b=p.push("translate(",null,e,null,r);g.push({i:b-4,x:$s(u,d)},{i:b-2,x:$s(h,f)})}else(d||f)&&p.push("translate("+d+e+f+r)}function a(u,h,d,f){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),f.push({i:d.push(s(d)+"rotate(",null,i)-2,x:$s(u,h)})):h&&d.push(s(d)+"rotate("+h+i)}function l(u,h,d,f){u!==h?f.push({i:d.push(s(d)+"skewX(",null,i)-2,x:$s(u,h)}):h&&d.push(s(d)+"skewX("+h+i)}function c(u,h,d,f,p,g){if(u!==d||h!==f){var b=p.push(s(p)+"scale(",null,",",null,")");g.push({i:b-4,x:$s(u,d)},{i:b-2,x:$s(h,f)})}else(d!==1||f!==1)&&p.push(s(p)+"scale("+d+","+f+")")}return function(u,h){var d=[],f=[];return u=n(u),h=n(h),o(u.translateX,u.translateY,h.translateX,h.translateY,d,f),a(u.rotate,h.rotate,d,f),l(u.skewX,h.skewX,d,f),c(u.scaleX,u.scaleY,h.scaleX,h.scaleY,d,f),u=h=null,function(p){for(var g=-1,b=f.length,y;++g<b;)d[(y=f[g]).i]=y.x(p);return d.join("")}}}var ske=cee(rke,"px, ","px)","deg)"),oke=cee(ike,", ",")",")"),ake=1e-12;function E8(n){return((n=Math.exp(n))+1/n)/2}function lke(n){return((n=Math.exp(n))-1/n)/2}function cke(n){return((n=Math.exp(2*n))-1)/(n+1)}const uke=function n(e,r,i){function s(o,a){var l=o[0],c=o[1],u=o[2],h=a[0],d=a[1],f=a[2],p=h-l,g=d-c,b=p*p+g*g,y,v;if(b<ake)v=Math.log(f/u)/e,y=function(E){return[l+E*p,c+E*g,u*Math.exp(e*E*v)]};else{var w=Math.sqrt(b),k=(f*f-u*u+i*b)/(2*u*r*w),_=(f*f-u*u-i*b)/(2*f*r*w),S=Math.log(Math.sqrt(k*k+1)-k),C=Math.log(Math.sqrt(_*_+1)-_);v=(C-S)/e,y=function(E){var P=E*v,O=E8(S),M=u/(r*w)*(O*cke(e*P+S)-lke(S));return[l+M*p,c+M*g,u*O/E8(e*P+S)]}}return y.duration=v*1e3*e/Math.SQRT2,y}return s.rho=function(o){var a=Math.max(.001,+o),l=a*a,c=l*l;return n(a,l,c)},s}(Math.SQRT2,2,4);var sf=0,Jp=0,Sp=0,uee=1e3,_x,Zp,Sx=0,Cu=0,i1=0,Rg=typeof performance=="object"&&performance.now?performance:Date,dee=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function WA(){return Cu||(dee(dke),Cu=Rg.now()+i1)}function dke(){Cu=0}function kx(){this._call=this._time=this._next=null}kx.prototype=HA.prototype={constructor:kx,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?WA():+r)+(e==null?0:+e),!this._next&&Zp!==this&&(Zp?Zp._next=this:_x=this,Zp=this),this._call=n,this._time=r,kO()},stop:function(){this._call&&(this._call=null,this._time=1/0,kO())}};function HA(n,e,r){var i=new kx;return i.restart(n,e,r),i}function hke(){WA(),++sf;for(var n=_x,e;n;)(e=Cu-n._time)>=0&&n._call.call(void 0,e),n=n._next;--sf}function T8(){Cu=(Sx=Rg.now())+i1,sf=Jp=0;try{hke()}finally{sf=0,pke(),Cu=0}}function fke(){var n=Rg.now(),e=n-Sx;e>uee&&(i1-=e,Sx=n)}function pke(){for(var n,e=_x,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:_x=r);Zp=n,kO(i)}function kO(n){if(!sf){Jp&&(Jp=clearTimeout(Jp));var e=n-Cu;e>24?(n<1/0&&(Jp=setTimeout(T8,n-Rg.now()-i1)),Sp&&(Sp=clearInterval(Sp))):(Sp||(Sx=Rg.now(),Sp=setInterval(fke,uee)),sf=1,dee(T8))}}function P8(n,e,r){var i=new kx;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,r),i}var mke=S0("start","end","cancel","interrupt"),gke=[],hee=0,M8=1,CO=2,hy=3,D8=4,EO=5,fy=6;function s1(n,e,r,i,s,o){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;vke(n,r,{name:e,index:i,group:s,on:mke,tween:gke,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:hee})}function VA(n,e){var r=Xs(n,e);if(r.state>hee)throw new Error("too late; already scheduled");return r}function Ao(n,e){var r=Xs(n,e);if(r.state>hy)throw new Error("too late; already running");return r}function Xs(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function vke(n,e,r){var i=n.__transition,s;i[e]=r,r.timer=HA(o,0,r.time);function o(u){r.state=M8,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var h,d,f,p;if(r.state!==M8)return c();for(h in i)if(p=i[h],p.name===r.name){if(p.state===hy)return P8(a);p.state===D8?(p.state=fy,p.timer.stop(),p.on.call("interrupt",n,n.__data__,p.index,p.group),delete i[h]):+h<e&&(p.state=fy,p.timer.stop(),p.on.call("cancel",n,n.__data__,p.index,p.group),delete i[h])}if(P8(function(){r.state===hy&&(r.state=D8,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=CO,r.on.call("start",n,n.__data__,r.index,r.group),r.state===CO){for(r.state=hy,s=new Array(f=r.tween.length),h=0,d=-1;h<f;++h)(p=r.tween[h].value.call(n,n.__data__,r.index,r.group))&&(s[++d]=p);s.length=d+1}}function l(u){for(var h=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=EO,1),d=-1,f=s.length;++d<f;)s[d].call(n,h);r.state===EO&&(r.on.call("end",n,n.__data__,r.index,r.group),c())}function c(){r.state=fy,r.timer.stop(),delete i[e];for(var u in i)return;delete n.__transition}}function py(n,e){var r=n.__transition,i,s,o=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){o=!1;continue}s=i.state>CO&&i.state<EO,i.state=fy,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}o&&delete n.__transition}}function bke(n){return this.each(function(){py(this,n)})}function yke(n,e){var r,i;return function(){var s=Ao(this,n),o=s.tween;if(o!==r){i=r=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}s.tween=i}}function xke(n,e,r){var i,s;if(typeof r!="function")throw new Error;return function(){var o=Ao(this,n),a=o.tween;if(a!==i){s=(i=a).slice();for(var l={name:e,value:r},c=0,u=s.length;c<u;++c)if(s[c].name===e){s[c]=l;break}c===u&&s.push(l)}o.tween=s}}function wke(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=Xs(this.node(),r).tween,s=0,o=i.length,a;s<o;++s)if((a=i[s]).name===n)return a.value;return null}return this.each((e==null?yke:xke)(r,n,e))}function YA(n,e,r){var i=n._id;return n.each(function(){var s=Ao(this,i);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return Xs(s,i).value[e]}}function fee(n,e){var r;return(typeof e=="number"?$s:e instanceof ku?wx:(r=ku(e))?(e=r,wx):aee)(n,e)}function _ke(n){return function(){this.removeAttribute(n)}}function Ske(n){return function(){this.removeAttributeNS(n.space,n.local)}}function kke(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttribute(n);return a===s?null:a===i?o:o=e(i=a,r)}}function Cke(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttributeNS(n.space,n.local);return a===s?null:a===i?o:o=e(i=a,r)}}function Eke(n,e,r){var i,s,o;return function(){var a,l=r(this),c;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),c=l+"",a===c?null:a===i&&c===s?o:(s=c,o=e(i=a,l)))}}function Tke(n,e,r){var i,s,o;return function(){var a,l=r(this),c;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),c=l+"",a===c?null:a===i&&c===s?o:(s=c,o=e(i=a,l)))}}function Pke(n,e){var r=r1(n),i=r==="transform"?oke:fee;return this.attrTween(n,typeof e=="function"?(r.local?Tke:Eke)(r,i,YA(this,"attr."+n,e)):e==null?(r.local?Ske:_ke)(r):(r.local?Cke:kke)(r,i,e))}function Mke(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function Dke(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function Oke(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Dke(n,o)),r}return s._value=e,s}function Ike(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Mke(n,o)),r}return s._value=e,s}function Rke(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=r1(n);return this.tween(r,(i.local?Oke:Ike)(i,e))}function Ake(n,e){return function(){VA(this,n).delay=+e.apply(this,arguments)}}function Nke(n,e){return e=+e,function(){VA(this,n).delay=e}}function jke(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Ake:Nke)(e,n)):Xs(this.node(),e).delay}function Lke(n,e){return function(){Ao(this,n).duration=+e.apply(this,arguments)}}function Fke(n,e){return e=+e,function(){Ao(this,n).duration=e}}function $ke(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Lke:Fke)(e,n)):Xs(this.node(),e).duration}function zke(n,e){if(typeof e!="function")throw new Error;return function(){Ao(this,n).ease=e}}function Bke(n){var e=this._id;return arguments.length?this.each(zke(e,n)):Xs(this.node(),e).ease}function Uke(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Ao(this,n).ease=r}}function qke(n){if(typeof n!="function")throw new Error;return this.each(Uke(this._id,n))}function Wke(n){typeof n!="function"&&(n=YZ(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],c,u=0;u<a;++u)(c=o[u])&&n.call(c,c.__data__,u,o)&&l.push(c);return new Ia(i,this._parents,this._name,this._id)}function Hke(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=e[l],u=r[l],h=c.length,d=a[l]=new Array(h),f,p=0;p<h;++p)(f=c[p]||u[p])&&(d[p]=f);for(;l<i;++l)a[l]=e[l];return new Ia(a,this._parents,this._name,this._id)}function Vke(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Yke(n,e,r){var i,s,o=Vke(e)?VA:Ao;return function(){var a=o(this,n),l=a.on;l!==i&&(s=(i=l).copy()).on(e,r),a.on=s}}function Gke(n,e){var r=this._id;return arguments.length<2?Xs(this.node(),r).on.on(n):this.each(Yke(r,n,e))}function Kke(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function Xke(){return this.on("end.remove",Kke(this._id))}function Qke(n){var e=this._name,r=this._id;typeof n!="function"&&(n=FA(n));for(var i=this._groups,s=i.length,o=new Array(s),a=0;a<s;++a)for(var l=i[a],c=l.length,u=o[a]=new Array(c),h,d,f=0;f<c;++f)(h=l[f])&&(d=n.call(h,h.__data__,f,l))&&("__data__"in h&&(d.__data__=h.__data__),u[f]=d,s1(u[f],e,r,f,u,Xs(h,r)));return new Ia(o,this._parents,e,r)}function Jke(n){var e=this._name,r=this._id;typeof n!="function"&&(n=VZ(n));for(var i=this._groups,s=i.length,o=[],a=[],l=0;l<s;++l)for(var c=i[l],u=c.length,h,d=0;d<u;++d)if(h=c[d]){for(var f=n.call(h,h.__data__,d,c),p,g=Xs(h,r),b=0,y=f.length;b<y;++b)(p=f[b])&&s1(p,e,r,b,f,g);o.push(f),a.push(h)}return new Ia(o,a,e,r)}var Zke=k0.prototype.constructor;function eCe(){return new Zke(this._groups,this._parents)}function tCe(n,e){var r,i,s;return function(){var o=rf(this,n),a=(this.style.removeProperty(n),rf(this,n));return o===a?null:o===r&&a===i?s:s=e(r=o,i=a)}}function pee(n){return function(){this.style.removeProperty(n)}}function nCe(n,e,r){var i,s=r+"",o;return function(){var a=rf(this,n);return a===s?null:a===i?o:o=e(i=a,r)}}function rCe(n,e,r){var i,s,o;return function(){var a=rf(this,n),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(n),rf(this,n))),a===c?null:a===i&&c===s?o:(s=c,o=e(i=a,l))}}function iCe(n,e){var r,i,s,o="style."+e,a="end."+o,l;return function(){var c=Ao(this,n),u=c.on,h=c.value[o]==null?l||(l=pee(e)):void 0;(u!==r||s!==h)&&(i=(r=u).copy()).on(a,s=h),c.on=i}}function sCe(n,e,r){var i=(n+="")=="transform"?ske:fee;return e==null?this.styleTween(n,tCe(n,i)).on("end.style."+n,pee(n)):typeof e=="function"?this.styleTween(n,rCe(n,i,YA(this,"style."+n,e))).each(iCe(this._id,n)):this.styleTween(n,nCe(n,i,e),r).on("end.style."+n,null)}function oCe(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function aCe(n,e,r){var i,s;function o(){var a=e.apply(this,arguments);return a!==s&&(i=(s=a)&&oCe(n,a,r)),i}return o._value=e,o}function lCe(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,aCe(n,e,r??""))}function cCe(n){return function(){this.textContent=n}}function uCe(n){return function(){var e=n(this);this.textContent=e??""}}function dCe(n){return this.tween("text",typeof n=="function"?uCe(YA(this,"text",n)):cCe(n==null?"":n+""))}function hCe(n){return function(e){this.textContent=n.call(this,e)}}function fCe(n){var e,r;function i(){var s=n.apply(this,arguments);return s!==r&&(e=(r=s)&&hCe(s)),e}return i._value=n,i}function pCe(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,fCe(n))}function mCe(){for(var n=this._name,e=this._id,r=mee(),i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,c,u=0;u<l;++u)if(c=a[u]){var h=Xs(c,e);s1(c,n,r,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Ia(i,this._parents,n,r)}function gCe(){var n,e,r=this,i=r._id,s=r.size();return new Promise(function(o,a){var l={value:a},c={value:function(){--s===0&&o()}};r.each(function(){var u=Ao(this,i),h=u.on;h!==n&&(e=(n=h).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),u.on=e}),s===0&&o()})}var vCe=0;function Ia(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function mee(){return++vCe}var Ho=k0.prototype;Ia.prototype={constructor:Ia,select:Qke,selectAll:Jke,selectChild:Ho.selectChild,selectChildren:Ho.selectChildren,filter:Wke,merge:Hke,selection:eCe,transition:mCe,call:Ho.call,nodes:Ho.nodes,node:Ho.node,size:Ho.size,empty:Ho.empty,each:Ho.each,on:Gke,attr:Pke,attrTween:Rke,style:sCe,styleTween:lCe,text:dCe,textTween:pCe,remove:Xke,tween:wke,delay:jke,duration:$ke,ease:Bke,easeVarying:qke,end:gCe,[Symbol.iterator]:Ho[Symbol.iterator]};function bCe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var yCe={time:null,delay:0,duration:250,ease:bCe};function xCe(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function wCe(n){var e,r;n instanceof Ia?(e=n._id,n=n._name):(e=mee(),(r=yCe).time=WA(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,c,u=0;u<l;++u)(c=a[u])&&s1(c,n,e,u,a,r||xCe(c,e));return new Ia(i,this._parents,n,e)}k0.prototype.interrupt=bke;k0.prototype.transition=wCe;function _Ce(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return gee(this.cover(e,r),e,r,n)}function gee(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,c=n._y0,u=n._x1,h=n._y1,d,f,p,g,b,y,v,w;if(!o)return n._root=a,n;for(;o.length;)if((b=e>=(d=(l+u)/2))?l=d:u=d,(y=r>=(f=(c+h)/2))?c=f:h=f,s=o,!(o=o[v=y<<1|b]))return s[v]=a,n;if(p=+n._x.call(null,o.data),g=+n._y.call(null,o.data),e===p&&r===g)return a.next=o,s?s[v]=a:n._root=a,n;do s=s?s[v]=new Array(4):n._root=new Array(4),(b=e>=(d=(l+u)/2))?l=d:u=d,(y=r>=(f=(c+h)/2))?c=f:h=f;while((v=y<<1|b)===(w=(g>=f)<<1|p>=d));return s[w]=o,s[v]=a,n}function SCe(n){var e,r,i=n.length,s,o,a=new Array(i),l=new Array(i),c=1/0,u=1/0,h=-1/0,d=-1/0;for(r=0;r<i;++r)isNaN(s=+this._x.call(null,e=n[r]))||isNaN(o=+this._y.call(null,e))||(a[r]=s,l[r]=o,s<c&&(c=s),s>h&&(h=s),o<u&&(u=o),o>d&&(d=o));if(c>h||u>d)return this;for(this.cover(c,u).cover(h,d),r=0;r<i;++r)gee(this,a[r],l[r],n[r]);return this}function kCe(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(r))s=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1;else{for(var a=s-r||1,l=this._root,c,u;r>n||n>=s||i>e||e>=o;)switch(u=(e<i)<<1|n<r,c=new Array(4),c[u]=l,l=c,a*=2,u){case 0:s=r+a,o=i+a;break;case 1:r=s-a,o=i+a;break;case 2:s=r+a,i=o-a;break;case 3:r=s-a,i=o-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=s,this._y1=o,this}function CCe(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function ECe(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Wr(n,e,r,i,s){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=s}function TCe(n,e,r){var i,s=this._x0,o=this._y0,a,l,c,u,h=this._x1,d=this._y1,f=[],p=this._root,g,b;for(p&&f.push(new Wr(p,s,o,h,d)),r==null?r=1/0:(s=n-r,o=e-r,h=n+r,d=e+r,r*=r);g=f.pop();)if(!(!(p=g.node)||(a=g.x0)>h||(l=g.y0)>d||(c=g.x1)<s||(u=g.y1)<o))if(p.length){var y=(a+c)/2,v=(l+u)/2;f.push(new Wr(p[3],y,v,c,u),new Wr(p[2],a,v,y,u),new Wr(p[1],y,l,c,v),new Wr(p[0],a,l,y,v)),(b=(e>=v)<<1|n>=y)&&(g=f[f.length-1],f[f.length-1]=f[f.length-1-b],f[f.length-1-b]=g)}else{var w=n-+this._x.call(null,p.data),k=e-+this._y.call(null,p.data),_=w*w+k*k;if(_<r){var S=Math.sqrt(r=_);s=n-S,o=e-S,h=n+S,d=e+S,i=p.data}}return i}function PCe(n){if(isNaN(h=+this._x.call(null,n))||isNaN(d=+this._y.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,c=this._x1,u=this._y1,h,d,f,p,g,b,y,v;if(!r)return this;if(r.length)for(;;){if((g=h>=(f=(a+c)/2))?a=f:c=f,(b=d>=(p=(l+u)/2))?l=p:u=p,e=r,!(r=r[y=b<<1|g]))return this;if(!r.length)break;(e[y+1&3]||e[y+2&3]||e[y+3&3])&&(i=e,v=y)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[y]=o:delete e[y],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[v]=r:this._root=r),this):(this._root=o,this)}function MCe(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function DCe(){return this._root}function OCe(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function ICe(n){var e=[],r,i=this._root,s,o,a,l,c;for(i&&e.push(new Wr(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.x1,c=r.y1)&&i.length){var u=(o+l)/2,h=(a+c)/2;(s=i[3])&&e.push(new Wr(s,u,h,l,c)),(s=i[2])&&e.push(new Wr(s,o,h,u,c)),(s=i[1])&&e.push(new Wr(s,u,a,l,h)),(s=i[0])&&e.push(new Wr(s,o,a,u,h))}return this}function RCe(n){var e=[],r=[],i;for(this._root&&e.push(new Wr(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,c=i.x1,u=i.y1,h=(a+c)/2,d=(l+u)/2;(o=s[0])&&e.push(new Wr(o,a,l,h,d)),(o=s[1])&&e.push(new Wr(o,h,l,c,d)),(o=s[2])&&e.push(new Wr(o,a,d,h,u)),(o=s[3])&&e.push(new Wr(o,h,d,c,u))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function ACe(n){return n[0]}function NCe(n){return arguments.length?(this._x=n,this):this._x}function jCe(n){return n[1]}function LCe(n){return arguments.length?(this._y=n,this):this._y}function vee(n,e,r){var i=new GA(e??ACe,r??jCe,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function GA(n,e,r,i,s,o){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}function O8(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var ti=vee.prototype=GA.prototype;ti.copy=function(){var n=new GA(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=O8(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=O8(i));return n};ti.add=_Ce;ti.addAll=SCe;ti.cover=kCe;ti.data=CCe;ti.extent=ECe;ti.find=TCe;ti.remove=PCe;ti.removeAll=MCe;ti.root=DCe;ti.size=OCe;ti.visit=ICe;ti.visitAfter=RCe;ti.x=NCe;ti.y=LCe;function FCe(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Cx(n,e){if((r=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var r,i=n.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+n.slice(r+1)]}function of(n){return n=Cx(Math.abs(n)),n?n[1]:NaN}function $Ce(n,e){return function(r,i){for(var s=r.length,o=[],a=0,l=n[0],c=0;s>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),o.push(r.substring(s-=l,s+l)),!((c+=l+1)>i));)l=n[a=(a+1)%n.length];return o.reverse().join(e)}}function zCe(n){return function(e){return e.replace(/[0-9]/g,function(r){return n[+r]})}}var BCe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ex(n){if(!(e=BCe.exec(n)))throw new Error("invalid format: "+n);var e;return new KA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ex.prototype=KA.prototype;function KA(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}KA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UCe(n){e:for(var e=n.length,r=1,i=-1,s;r<e;++r)switch(n[r]){case".":i=s=r;break;case"0":i===0&&(i=r),s=r;break;default:if(!+n[r])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(s+1):n}var bee;function qCe(n,e){var r=Cx(n,e);if(!r)return n+"";var i=r[0],s=r[1],o=s-(bee=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Cx(n,Math.max(0,e+o-1))[0]}function I8(n,e){var r=Cx(n,e);if(!r)return n+"";var i=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const R8={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:FCe,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>I8(n*100,e),r:I8,s:qCe,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function A8(n){return n}var N8=Array.prototype.map,j8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function WCe(n){var e=n.grouping===void 0||n.thousands===void 0?A8:$Ce(N8.call(n.grouping,Number),n.thousands+""),r=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",s=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?A8:zCe(N8.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function u(d){d=Ex(d);var f=d.fill,p=d.align,g=d.sign,b=d.symbol,y=d.zero,v=d.width,w=d.comma,k=d.precision,_=d.trim,S=d.type;S==="n"?(w=!0,S="g"):R8[S]||(k===void 0&&(k=12),_=!0,S="g"),(y||f==="0"&&p==="=")&&(y=!0,f="0",p="=");var C=b==="$"?r:b==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=b==="$"?i:/[%p]/.test(S)?a:"",P=R8[S],O=/[defgprs%]/.test(S);k=k===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function M(R){var j=C,B=E,L,$,z;if(S==="c")B=P(R)+B,R="";else{R=+R;var W=R<0||1/R<0;if(R=isNaN(R)?c:P(Math.abs(R),k),_&&(R=UCe(R)),W&&+R==0&&g!=="+"&&(W=!1),j=(W?g==="("?g:l:g==="-"||g==="("?"":g)+j,B=(S==="s"?j8[8+bee/3]:"")+B+(W&&g==="("?")":""),O){for(L=-1,$=R.length;++L<$;)if(z=R.charCodeAt(L),48>z||z>57){B=(z===46?s+R.slice(L+1):R.slice(L))+B,R=R.slice(0,L);break}}}w&&!y&&(R=e(R,1/0));var q=j.length+R.length+B.length,V=q<v?new Array(v-q+1).join(f):"";switch(w&&y&&(R=e(V+R,V.length?v-B.length:1/0),V=""),p){case"<":R=j+R+B+V;break;case"=":R=j+V+R+B;break;case"^":R=V.slice(0,q=V.length>>1)+j+R+B+V.slice(q);break;default:R=V+j+R+B;break}return o(R)}return M.toString=function(){return d+""},M}function h(d,f){var p=u((d=Ex(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(of(f)/3)))*3,b=Math.pow(10,-g),y=j8[8+g/3];return function(v){return p(b*v)+y}}return{format:u,formatPrefix:h}}var ub,yee,xee;HCe({thousands:",",grouping:[3],currency:["$",""]});function HCe(n){return ub=WCe(n),yee=ub.format,xee=ub.formatPrefix,ub}function VCe(n){return Math.max(0,-of(Math.abs(n)))}function YCe(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(of(e)/3)))*3-of(Math.abs(n)))}function GCe(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,of(e)-of(n))+1}function XA(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const L8=Symbol("implicit");function QA(){var n=new u8,e=[],r=[],i=L8;function s(o){let a=n.get(o);if(a===void 0){if(i!==L8)return i;n.set(o,a=e.push(o)-1)}return r[a%r.length]}return s.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new u8;for(const a of o)n.has(a)||n.set(a,e.push(a)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.copy=function(){return QA(e,r).unknown(i)},XA.apply(s,arguments),s}function wee(){var n=QA().unknown(void 0),e=n.domain,r=n.range,i=0,s=1,o,a,l=!1,c=0,u=0,h=.5;delete n.unknown;function d(){var f=e().length,p=s<i,g=p?s:i,b=p?i:s;o=(b-g)/Math.max(1,f-c+u*2),l&&(o=Math.floor(o)),g+=(b-g-o*(f-c))*h,a=o*(1-c),l&&(g=Math.round(g),a=Math.round(a));var y=L1e(f).map(function(v){return g+o*v});return r(p?y.reverse():y)}return n.domain=function(f){return arguments.length?(e(f),d()):e()},n.range=function(f){return arguments.length?([i,s]=f,i=+i,s=+s,d()):[i,s]},n.rangeRound=function(f){return[i,s]=f,i=+i,s=+s,l=!0,d()},n.bandwidth=function(){return a},n.step=function(){return o},n.round=function(f){return arguments.length?(l=!!f,d()):l},n.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),d()):c},n.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},n.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},n.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),d()):h},n.copy=function(){return wee(e(),[i,s]).round(l).paddingInner(c).paddingOuter(u).align(h)},XA.apply(d(),arguments)}function KCe(n){return function(){return n}}function XCe(n){return+n}var F8=[0,1];function Bd(n){return n}function TO(n,e){return(e-=n=+n)?function(r){return(r-n)/e}:KCe(isNaN(e)?NaN:.5)}function QCe(n,e){var r;return n>e&&(r=n,n=e,e=r),function(i){return Math.max(n,Math.min(e,i))}}function JCe(n,e,r){var i=n[0],s=n[1],o=e[0],a=e[1];return s<i?(i=TO(s,i),o=r(a,o)):(i=TO(i,s),o=r(o,a)),function(l){return o(i(l))}}function ZCe(n,e,r){var i=Math.min(n.length,e.length)-1,s=new Array(i),o=new Array(i),a=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<i;)s[a]=TO(n[a],n[a+1]),o[a]=r(e[a],e[a+1]);return function(l){var c=P1e(n,l,1,i)-1;return o[c](s[c](l))}}function e2e(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function t2e(){var n=F8,e=F8,r=qA,i,s,o,a=Bd,l,c,u;function h(){var f=Math.min(n.length,e.length);return a!==Bd&&(a=QCe(n[0],n[f-1])),l=f>2?ZCe:JCe,c=u=null,d}function d(f){return f==null||isNaN(f=+f)?o:(c||(c=l(n.map(i),e,r)))(i(a(f)))}return d.invert=function(f){return a(s((u||(u=l(e,n.map(i),$s)))(f)))},d.domain=function(f){return arguments.length?(n=Array.from(f,XCe),h()):n.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),h()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),r=nke,h()},d.clamp=function(f){return arguments.length?(a=f?!0:Bd,h()):a!==Bd},d.interpolate=function(f){return arguments.length?(r=f,h()):r},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,p){return i=f,s=p,h()}}function n2e(){return t2e()(Bd,Bd)}function r2e(n,e,r,i){var s=j1e(n,e,r),o;switch(i=Ex(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(o=YCe(s,a))&&(i.precision=o),xee(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=GCe(s,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=VCe(s))&&(i.precision=o-(i.type==="%")*2);break}}return yee(i)}function i2e(n){var e=n.domain;return n.ticks=function(r){var i=e();return N1e(i[0],i[i.length-1],r??10)},n.tickFormat=function(r,i){var s=e();return r2e(s[0],s[s.length-1],r??10,i)},n.nice=function(r){r==null&&(r=10);var i=e(),s=0,o=i.length-1,a=i[s],l=i[o],c,u,h=10;for(l<a&&(u=a,a=l,l=u,u=s,s=o,o=u);h-- >0;){if(u=gO(a,l,r),u===c)return i[s]=a,i[o]=l,e(i);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;c=u}return n},n}function _ee(){var n=n2e();return n.copy=function(){return e2e(n,_ee())},XA.apply(n,arguments),i2e(n)}function s2e(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const o2e=s2e("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),db=n=>()=>n;function a2e(n,{sourceEvent:e,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function ga(n,e,r){this.k=n,this.x=e,this.y=r}ga.prototype={constructor:ga,scale:function(n){return n===1?this:new ga(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new ga(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var JA=new ga(1,0,0);uo.prototype=ga.prototype;function uo(n){for(;!n.__zoom;)if(!(n=n.parentNode))return JA;return n.__zoom}function WS(n){n.stopImmediatePropagation()}function kp(n){n.preventDefault(),n.stopImmediatePropagation()}function l2e(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function c2e(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function $8(){return this.__zoom||JA}function u2e(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function d2e(){return navigator.maxTouchPoints||"ontouchstart"in this}function h2e(n,e,r){var i=n.invertX(e[0][0])-r[0][0],s=n.invertX(e[1][0])-r[1][0],o=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function f2e(){var n=l2e,e=c2e,r=h2e,i=u2e,s=d2e,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,c=uke,u=S0("start","zoom","end"),h,d,f,p=500,g=150,b=0,y=10;function v(L){L.property("__zoom",$8).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",M).filter(s).on("touchstart.zoom",R).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(L,$,z,W){var q=L.selection?L.selection():L;q.property("__zoom",$8),L!==q?S(L,$,z,W):q.interrupt().each(function(){C(this,arguments).event(W).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},v.scaleBy=function(L,$,z,W){v.scaleTo(L,function(){var q=this.__zoom.k,V=typeof $=="function"?$.apply(this,arguments):$;return q*V},z,W)},v.scaleTo=function(L,$,z,W){v.transform(L,function(){var q=e.apply(this,arguments),V=this.__zoom,F=z==null?_(q):typeof z=="function"?z.apply(this,arguments):z,G=V.invert(F),H=typeof $=="function"?$.apply(this,arguments):$;return r(k(w(V,H),F,G),q,a)},z,W)},v.translateBy=function(L,$,z,W){v.transform(L,function(){return r(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),a)},null,W)},v.translateTo=function(L,$,z,W,q){v.transform(L,function(){var V=e.apply(this,arguments),F=this.__zoom,G=W==null?_(V):typeof W=="function"?W.apply(this,arguments):W;return r(JA.translate(G[0],G[1]).scale(F.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof z=="function"?-z.apply(this,arguments):-z),V,a)},W,q)};function w(L,$){return $=Math.max(o[0],Math.min(o[1],$)),$===L.k?L:new ga($,L.x,L.y)}function k(L,$,z){var W=$[0]-z[0]*L.k,q=$[1]-z[1]*L.k;return W===L.x&&q===L.y?L:new ga(L.k,W,q)}function _(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function S(L,$,z,W){L.on("start.zoom",function(){C(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(W).end()}).tween("zoom",function(){var q=this,V=arguments,F=C(q,V).event(W),G=e.apply(q,V),H=z==null?_(G):typeof z=="function"?z.apply(q,V):z,A=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),Q=q.__zoom,J=typeof $=="function"?$.apply(q,V):$,K=c(Q.invert(H).concat(A/Q.k),J.invert(H).concat(A/J.k));return function(Z){if(Z===1)Z=J;else{var se=K(Z),be=A/se[2];Z=new ga(be,H[0]-se[0]*be,H[1]-se[1]*be)}F.zoom(null,Z)}})}function C(L,$,z){return!z&&L.__zooming||new E(L,$)}function E(L,$){this.that=L,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(L,$),this.taps=0}E.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,$){return this.mouse&&L!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var $=Ir(this.that).datum();u.call(L,this.that,new a2e(L,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:u}),$)}};function P(L,...$){if(!n.apply(this,arguments))return;var z=C(this,$).event(L),W=this.__zoom,q=Math.max(o[0],Math.min(o[1],W.k*Math.pow(2,i.apply(this,arguments)))),V=Ls(L);if(z.wheel)(z.mouse[0][0]!==V[0]||z.mouse[0][1]!==V[1])&&(z.mouse[1]=W.invert(z.mouse[0]=V)),clearTimeout(z.wheel);else{if(W.k===q)return;z.mouse=[V,W.invert(V)],py(this),z.start()}kp(L),z.wheel=setTimeout(F,g),z.zoom("mouse",r(k(w(W,q),z.mouse[0],z.mouse[1]),z.extent,a));function F(){z.wheel=null,z.end()}}function O(L,...$){if(f||!n.apply(this,arguments))return;var z=L.currentTarget,W=C(this,$,!0).event(L),q=Ir(L.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",A,!0),V=Ls(L,z),F=L.clientX,G=L.clientY;nee(L.view),WS(L),W.mouse=[V,this.__zoom.invert(V)],py(this),W.start();function H(Q){if(kp(Q),!W.moved){var J=Q.clientX-F,K=Q.clientY-G;W.moved=J*J+K*K>b}W.event(Q).zoom("mouse",r(k(W.that.__zoom,W.mouse[0]=Ls(Q,z),W.mouse[1]),W.extent,a))}function A(Q){q.on("mousemove.zoom mouseup.zoom",null),ree(Q.view,W.moved),kp(Q),W.event(Q).end()}}function M(L,...$){if(n.apply(this,arguments)){var z=this.__zoom,W=Ls(L.changedTouches?L.changedTouches[0]:L,this),q=z.invert(W),V=z.k*(L.shiftKey?.5:2),F=r(k(w(z,V),W,q),e.apply(this,$),a);kp(L),l>0?Ir(this).transition().duration(l).call(S,F,W,L):Ir(this).call(v.transform,F,W,L)}}function R(L,...$){if(n.apply(this,arguments)){var z=L.touches,W=z.length,q=C(this,$,L.changedTouches.length===W).event(L),V,F,G,H;for(WS(L),F=0;F<W;++F)G=z[F],H=Ls(G,this),H=[H,this.__zoom.invert(H),G.identifier],q.touch0?!q.touch1&&q.touch0[2]!==H[2]&&(q.touch1=H,q.taps=0):(q.touch0=H,V=!0,q.taps=1+!!h);h&&(h=clearTimeout(h)),V&&(q.taps<2&&(d=H[0],h=setTimeout(function(){h=null},p)),py(this),q.start())}}function j(L,...$){if(this.__zooming){var z=C(this,$).event(L),W=L.changedTouches,q=W.length,V,F,G,H;for(kp(L),V=0;V<q;++V)F=W[V],G=Ls(F,this),z.touch0&&z.touch0[2]===F.identifier?z.touch0[0]=G:z.touch1&&z.touch1[2]===F.identifier&&(z.touch1[0]=G);if(F=z.that.__zoom,z.touch1){var A=z.touch0[0],Q=z.touch0[1],J=z.touch1[0],K=z.touch1[1],Z=(Z=J[0]-A[0])*Z+(Z=J[1]-A[1])*Z,se=(se=K[0]-Q[0])*se+(se=K[1]-Q[1])*se;F=w(F,Math.sqrt(Z/se)),G=[(A[0]+J[0])/2,(A[1]+J[1])/2],H=[(Q[0]+K[0])/2,(Q[1]+K[1])/2]}else if(z.touch0)G=z.touch0[0],H=z.touch0[1];else return;z.zoom("touch",r(k(F,G,H),z.extent,a))}}function B(L,...$){if(this.__zooming){var z=C(this,$).event(L),W=L.changedTouches,q=W.length,V,F;for(WS(L),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),V=0;V<q;++V)F=W[V],z.touch0&&z.touch0[2]===F.identifier?delete z.touch0:z.touch1&&z.touch1[2]===F.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(F=Ls(F,this),Math.hypot(d[0]-F[0],d[1]-F[1])<y)){var G=Ir(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return v.wheelDelta=function(L){return arguments.length?(i=typeof L=="function"?L:db(+L),v):i},v.filter=function(L){return arguments.length?(n=typeof L=="function"?L:db(!!L),v):n},v.touchable=function(L){return arguments.length?(s=typeof L=="function"?L:db(!!L),v):s},v.extent=function(L){return arguments.length?(e=typeof L=="function"?L:db([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),v):e},v.scaleExtent=function(L){return arguments.length?(o[0]=+L[0],o[1]=+L[1],v):[o[0],o[1]]},v.translateExtent=function(L){return arguments.length?(a[0][0]=+L[0][0],a[1][0]=+L[1][0],a[0][1]=+L[0][1],a[1][1]=+L[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(L){return arguments.length?(r=L,v):r},v.duration=function(L){return arguments.length?(l=+L,v):l},v.interpolate=function(L){return arguments.length?(c=L,v):c},v.on=function(){var L=u.on.apply(u,arguments);return L===u?v:L},v.clickDistance=function(L){return arguments.length?(b=(L=+L)*L,v):Math.sqrt(b)},v.tapDistance=function(L){return arguments.length?(y=+L,v):y},v}function hd({data:n,height:e=150,width:r=900,maxBars:i=60,getTimestamp:s=o=>o.timestamp||Date.now()}){const o=D.useRef(null),a=D.useRef(null),[l,c]=D.useState([]),u=D.useCallback(h=>s(h),[s]);return D.useEffect(()=>{if(n.length===0){c([]);return}const h=Date.now(),d=new Map;n.forEach(p=>{const g=u(p);if(!g||isNaN(g)||!isFinite(g))return;const b=Math.floor((h-g)/1e3);if(b>=0&&b<i){const y=d.get(b)||0;d.set(b,y+1)}});const f=[];for(let p=i-1;p>=0;p--)f.push({time:p,count:d.get(p)||0});c(f)},[n,i,u]),D.useEffect(()=>{if(!o.current||l.length===0)return;const h=Ir(o.current);h.selectAll("*").remove();const d={top:20,right:20,bottom:40,left:50},f=r-d.left-d.right,p=e-d.top-d.bottom,g=h.append("g").attr("transform",`translate(${d.left}, ${d.top})`),b=wee().domain(l.map((w,k)=>k.toString())).range([0,f]).padding(.1);vO(l,w=>w.count);const v=_ee().domain([0,5]).range([p,0]).nice();return g.append("g").attr("transform",`translate(0, ${p})`).call(p8(b).tickValues(b.domain().filter((w,k)=>k%Math.ceil(i/10)===0)).tickFormat((w,k)=>{var E;const _=parseInt(w||"0"),S=((E=l[_])==null?void 0:E.time)||0;return S===0?"now":S<60?`-${S}s`:`-${Math.floor(S/60)}m`})).selectAll("text").attr("class","data-rate-axis-text"),g.append("g").call(H1e(v).ticks(5)).selectAll("text").attr("class","data-rate-axis-text"),g.append("text").attr("class","data-rate-y-axis-label").attr("transform","rotate(-90)").attr("y",-35).attr("x",-p/2).attr("text-anchor","middle").text("Data Points/sec"),g.selectAll("rect").data(l).enter().append("rect").attr("x",(w,k)=>b(k.toString())||0).attr("y",w=>v(w.count)).attr("width",b.bandwidth()).attr("height",w=>p-v(w.count)).attr("fill",w=>w.count>=3.5?"#4CAF50":w.count>=2?"#FF9800":w.count>0?"#F44336":"#E0E0E0").attr("rx",2).style("opacity",.8).on("mouseover",function(w,k){var O;Ir(this).style("opacity",1),a.current&&a.current.remove();const S=Ir("body").append("div").attr("class","data-rate-tooltip").style("opacity",0),C=(O=o.current)==null?void 0:O.getBoundingClientRect(),[E,P]=Ls(w,o.current);C&&S.style("left",`${C.left+E+10}px`).style("top",`${C.top+P-10}px`).text(`${k.count} data points ${k.time===0?"now":`${k.time}s ago`}`).transition().duration(200).style("opacity",1),a.current=S}).on("mouseout",function(){Ir(this).style("opacity",.8),a.current&&(a.current.transition().duration(200).style("opacity",0).remove(),a.current=null)}),g.append("g").attr("class","grid").attr("transform",`translate(0, ${p})`).call(p8(b).tickSize(-p).tickValues(b.domain().filter((w,k)=>k%Math.ceil(i/10)===0)).tickFormat(()=>"")).selectAll("line").attr("class","data-rate-grid-line"),()=>{a.current&&(a.current.remove(),a.current=null),TSe(".data-rate-tooltip").remove()}},[l,r,e,i]),m.jsxs("div",{className:"data-rate-histogram-container",children:[m.jsx("h4",{className:"data-rate-histogram-title",children:"Data Rate (points/second)"}),m.jsx("svg",{ref:o,className:"data-rate-histogram-svg",width:r,height:e})]})}function p2e(){const[n,e]=D.useState(Pf),[r,i]=D.useState(v0),[s,o]=D.useState(zw),[a,l]=D.useState(100),[c,u]=D.useState(10),{walletAddress:h,authToken:d,error:f}=Bu(),{markets:p,selectedMarketId:g,setSelectedMarketId:b,fetchMarkets:y,loadingMarkets:v,getMarket:w}=tc({baseURL:n,sessionToken:d,autoFetchMarkets:!0}),[k,_]=D.useState("0"),[S,C]=D.useState("1m"),[E,P]=D.useState("0"),[O,M]=D.useState("BTC/USDC");D.useEffect(()=>{if(g){const te=String(g);_(te),P(te);const ce=typeof g=="string"?parseInt(g,10):Number(g);if(!isNaN(ce)&&isFinite(ce)){const je=w(ce);je&&M(je.symbol||`${je.baseAsset}/${je.quoteAsset}`)}}},[g,w]);const[R,j]=D.useState(null),[B,L]=D.useState("Data Details"),[$,z]=D.useState(!1),{klineData:W,loading:q,error:V,isConnected:F}=k0e({baseURL:n,wsURL:r,marketId:k,interval:S,authToken:d,walletAddress:h,deviceID:s,maxDataPoints:a}),{lastPrice:G,markPrice:H,error:A,isConnected:Q}=$w({baseURL:n,wsURL:r,marketId:E,symbol:O,authToken:d,walletAddress:h,deviceID:s}),[J,K]=D.useState([]),[Z,se]=D.useState([]);D.useEffect(()=>{G&&K(te=>{const ce=[...te,{...G,value:G.price,timestamp:G.timestamp,arrivalTime:Date.now(),raw:G}];return ce.length>a?ce.slice(-a):ce})},[G,a]),D.useEffect(()=>{H&&se(te=>{const ce=[...te,{...H,value:H.mark_price,timestamp:H.timestamp,arrivalTime:Date.now(),raw:H}];return ce.length>a?ce.slice(-a):ce})},[H,a]);const{buckets:be,loading:Oe,error:Ke,refresh:De}=TJ({baseURL:n,authToken:d,walletAddress:h,refreshInterval:5e3}),{positions:Pe,loading:We,error:nt,isConnected:U,refresh:_e}=EJ({baseURL:n,wsURL:r,authToken:d,walletAddress:h,deviceID:s,useWebSocket:!0}),{orders:Ie,loading:me,error:$e,isConnected:ue,refresh:ee}=BZ({baseURL:n,wsURL:r,authToken:d,walletAddress:h,deviceID:s,useWebSocket:!0}),le=(te,ce)=>{j(te.raw||te),L(ce),z(!0)};return m.jsxs("div",{className:"App-content-row",children:[m.jsx("h1",{children:"Hooks Test QA"}),m.jsx("p",{children:"realtime monitor of data flow and block"}),m.jsxs("div",{className:"App-section",children:[m.jsx("h2",{className:"hooks-test-section-header",children:"Shared Configuration"}),m.jsxs("div",{className:"hooks-test-config-grid",children:[m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["API Base URL:",m.jsx("input",{type:"text",className:"hooks-test-input",value:n,onChange:te=>e(te.target.value)})]})}),m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["WebSocket URL:",m.jsx("input",{type:"text",className:"hooks-test-input",value:r,onChange:te=>i(te.target.value)})]})}),m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["Wallet Address (from useOnboard):",m.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:h||"",readOnly:!0,placeholder:"Set via useOnboard hook"}),f&&m.jsx("div",{className:"hooks-test-error-message",children:f})]})}),m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["Auth Token (from useOnboard):",m.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:d||"",readOnly:!0,placeholder:"Set via useOnboard hook"})]})}),m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["Market Selection:",m.jsxs("select",{className:"hooks-test-select",value:g||"",onChange:te=>{const ce=te.target.value;ce&&b(ce)},children:[m.jsx("option",{value:"",children:"Select a market..."}),p.map(te=>m.jsxs("option",{value:String(te.market_id),children:[te.symbol||`${te.baseAsset}/${te.quoteAsset}`," ","(ID: ",te.market_id,")"]},te.market_id))]}),v&&m.jsx("div",{className:"hooks-test-info-message",children:"Loading markets..."}),!v&&p.length===0&&m.jsx("button",{className:"hooks-test-button",onClick:()=>y(),style:{marginTop:"0.5rem"},children:"Fetch Markets"})]})}),m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["Device ID:",m.jsx("input",{type:"text",className:"hooks-test-input",value:s,onChange:te=>o(te.target.value)})]})}),m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["Max Data Points (Memory):",m.jsx("input",{type:"number",className:"hooks-test-input",value:a,onChange:te=>l(Math.max(10,parseInt(te.target.value)||100)),min:"10"})]})}),m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["Max Visible Rectangles:",m.jsx("input",{type:"number",className:"hooks-test-input",value:c,onChange:te=>u(Math.max(1,parseInt(te.target.value)||10)),min:"1"})]})})]})]}),m.jsxs("div",{className:"App-section",children:[m.jsxs("div",{className:"hooks-test-section-header-flex",children:[m.jsx("h2",{className:"hooks-test-section-header-title",children:"Kline Hook"}),m.jsxs("div",{className:"hooks-test-status-group",children:[m.jsx("span",{className:`hooks-test-status-badge ${F?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:F?"WS Connected":"WS Disconnected"}),m.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[W.length," data points"]})]})]}),m.jsxs("div",{className:"hooks-test-form-grid",children:[m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",m.jsx("input",{type:"text",className:"hooks-test-input",value:k,onChange:te=>_(te.target.value),placeholder:"Select market from dropdown above",style:{backgroundColor:g?"#f8f9fa":"white"}}),m.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})}),m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["Interval:",m.jsxs("select",{className:"hooks-test-select",value:S,onChange:te=>C(te.target.value),children:[m.jsx("option",{value:"1m",children:"1m"}),m.jsx("option",{value:"5m",children:"5m"}),m.jsx("option",{value:"15m",children:"15m"}),m.jsx("option",{value:"1h",children:"1h"}),m.jsx("option",{value:"4h",children:"4h"}),m.jsx("option",{value:"1d",children:"1d"})]})]})})]}),V&&m.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",V]}),q&&W.length===0?m.jsx("div",{className:"hooks-test-loading-state",children:"Loading kline data..."}):W.length===0?m.jsx("div",{className:"hooks-test-empty-state",children:"No kline data available"}):m.jsxs(m.Fragment,{children:[m.jsx(dd,{data:W,maxVisible:c,maxDataPoints:a,getValue:te=>te.close||te.high||100,onItemClick:te=>le(te,"Kline Data")}),m.jsx(hd,{data:W,getTimestamp:te=>{let ce=te.timestamp||te.open_time||Date.now();return ce<9466848e5&&(ce=ce*1e3),ce}})]})]}),m.jsxs("div",{className:"App-section",children:[m.jsxs("div",{className:"hooks-test-section-header-flex",children:[m.jsx("h2",{className:"hooks-test-section-header-title",children:"Mark Price Hook"}),m.jsx("span",{className:`hooks-test-status-badge ${Q?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:Q?"WS Connected":"WS Disconnected"})]}),m.jsx("div",{className:"hooks-test-form-grid",children:m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["Symbol (auto-updated from selected market):",m.jsx("input",{type:"text",className:"hooks-test-input",value:O,onChange:te=>M(te.target.value),placeholder:"BTC/USDC",style:{backgroundColor:g?"#f8f9fa":"white"}}),m.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),A&&m.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",A]}),Z.length===0?m.jsx("div",{className:"hooks-test-loading-state",children:"No mark price data available"}):m.jsxs(m.Fragment,{children:[m.jsx(dd,{data:Z,maxVisible:c,maxDataPoints:a,getValue:te=>te.value||te.mark_price||100,onItemClick:te=>le(te,"Mark Price Data")}),m.jsx(hd,{data:Z,getTimestamp:te=>te.arrivalTime||te.timestamp||Date.now()})]})]}),m.jsxs("div",{className:"App-section",children:[m.jsxs("div",{className:"hooks-test-section-header-flex",children:[m.jsx("h2",{className:"hooks-test-section-header-title",children:"Last Price Hook"}),m.jsx("span",{className:`hooks-test-status-badge ${Q?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:Q?"WS Connected":"WS Disconnected"})]}),m.jsx("div",{className:"hooks-test-form-grid",children:m.jsx("div",{children:m.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",m.jsx("input",{type:"text",className:"hooks-test-input",value:E,onChange:te=>P(te.target.value),placeholder:"Select market from dropdown above",style:{backgroundColor:g?"#f8f9fa":"white"}}),m.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),A&&m.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",A]}),J.length===0?m.jsx("div",{className:"hooks-test-loading-state",children:"No last price data available"}):m.jsxs(m.Fragment,{children:[m.jsx(dd,{data:J,maxVisible:c,maxDataPoints:a,getValue:te=>te.value||te.price||100,onItemClick:te=>le(te,"Last Price Data")}),m.jsx(hd,{data:J,getTimestamp:te=>te.arrivalTime||te.timestamp||Date.now()})]})]}),m.jsxs("div",{className:"App-section",children:[m.jsxs("div",{className:"hooks-test-section-header-flex",children:[m.jsx("h2",{className:"hooks-test-section-header-title",children:"Bucket Hook"}),m.jsxs("div",{className:"hooks-test-status-group",children:[m.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[be.length," buckets"]}),m.jsx("button",{className:"hooks-test-button",onClick:()=>De(),disabled:Oe,children:Oe?"Loading...":"Refresh"})]})]}),Ke&&m.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",Ke]}),Oe&&be.length===0?m.jsx("div",{className:"hooks-test-loading-state",children:"Loading buckets..."}):be.length===0?m.jsx("div",{className:"hooks-test-loading-state",children:"No buckets found"}):m.jsxs(m.Fragment,{children:[m.jsx(dd,{data:be,maxVisible:c,maxDataPoints:a,getValue:te=>te.totalMargin||te.unrealizedPnL||100,onItemClick:te=>le(te,"Bucket Data")}),m.jsx(hd,{data:be,getTimestamp:te=>te.createdAt?new Date(te.createdAt).getTime():Date.now()})]})]}),m.jsxs("div",{className:"App-section",children:[m.jsxs("div",{className:"hooks-test-section-header-flex",children:[m.jsx("h2",{className:"hooks-test-section-header-title",children:"Position Hook"}),m.jsxs("div",{className:"hooks-test-status-group",children:[m.jsx("span",{className:`hooks-test-status-badge ${U?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:U?"WS Connected":"WS Disconnected"}),m.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[Pe.length," positions"]}),m.jsx("button",{className:"hooks-test-button",onClick:()=>_e(),disabled:We,children:We?"Loading...":"Refresh"})]})]}),nt&&m.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",nt]}),We&&Pe.length===0?m.jsx("div",{className:"hooks-test-loading-state",children:"Loading positions..."}):Pe.length===0?m.jsx("div",{className:"hooks-test-loading-state",children:"No positions found"}):m.jsxs(m.Fragment,{children:[m.jsx(dd,{data:Pe,maxVisible:c,maxDataPoints:a,getValue:te=>te.size||te.margin||100,onItemClick:te=>le(te,"Position Data")}),m.jsx(hd,{data:Pe,getTimestamp:te=>Date.now()})]})]}),m.jsxs("div",{className:"App-section",children:[m.jsxs("div",{className:"hooks-test-section-header-flex",children:[m.jsx("h2",{className:"hooks-test-section-header-title",children:"Order Hook"}),m.jsxs("div",{className:"hooks-test-status-group",children:[m.jsx("span",{className:`hooks-test-status-badge ${ue?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:ue?"WS Connected":"WS Disconnected"}),m.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[Ie.length," orders"]}),m.jsx("button",{className:"hooks-test-button",onClick:()=>ee(),disabled:me,children:me?"Loading...":"Refresh"})]})]}),$e&&m.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",$e]}),me&&Ie.length===0?m.jsx("div",{className:"hooks-test-loading-state",children:"Loading orders..."}):Ie.length===0?m.jsx("div",{className:"hooks-test-loading-state",children:"No orders found"}):m.jsxs(m.Fragment,{children:[m.jsx(dd,{data:Ie,maxVisible:c,maxDataPoints:a,getValue:te=>te.quantity||te.price||100,onItemClick:te=>le(te,"Order Data")}),m.jsx(hd,{data:Ie,getTimestamp:te=>te.createdAt?typeof te.createdAt=="number"?te.createdAt:new Date(te.createdAt).getTime():te.updatedAt?typeof te.updatedAt=="number"?te.updatedAt:new Date(te.updatedAt).getTime():Date.now()})]})]}),m.jsx(S1e,{data:R,isOpen:$,onClose:()=>z(!1),title:B})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function E0(n){return n+.5|0}const Tl=(n,e,r)=>Math.max(Math.min(n,r),e);function em(n){return Tl(E0(n*2.55),0,255)}function $l(n){return Tl(E0(n*255),0,255)}function ra(n){return Tl(E0(n/2.55)/100,0,1)}function z8(n){return Tl(E0(n*100),0,100)}const Qi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},PO=[..."0123456789ABCDEF"],m2e=n=>PO[n&15],g2e=n=>PO[(n&240)>>4]+PO[n&15],hb=n=>(n&240)>>4===(n&15),v2e=n=>hb(n.r)&&hb(n.g)&&hb(n.b)&&hb(n.a);function b2e(n){var e=n.length,r;return n[0]==="#"&&(e===4||e===5?r={r:255&Qi[n[1]]*17,g:255&Qi[n[2]]*17,b:255&Qi[n[3]]*17,a:e===5?Qi[n[4]]*17:255}:(e===7||e===9)&&(r={r:Qi[n[1]]<<4|Qi[n[2]],g:Qi[n[3]]<<4|Qi[n[4]],b:Qi[n[5]]<<4|Qi[n[6]],a:e===9?Qi[n[7]]<<4|Qi[n[8]]:255})),r}const y2e=(n,e)=>n<255?e(n):"";function x2e(n){var e=v2e(n)?m2e:g2e;return n?"#"+e(n.r)+e(n.g)+e(n.b)+y2e(n.a,e):void 0}const w2e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function See(n,e,r){const i=e*Math.min(r,1-r),s=(o,a=(o+n/30)%12)=>r-i*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function _2e(n,e,r){const i=(s,o=(s+n/60)%6)=>r-r*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function S2e(n,e,r){const i=See(n,1,.5);let s;for(e+r>1&&(s=1/(e+r),e*=s,r*=s),s=0;s<3;s++)i[s]*=1-e-r,i[s]+=e;return i}function k2e(n,e,r,i,s){return n===s?(e-r)/i+(e<r?6:0):e===s?(r-n)/i+2:(n-e)/i+4}function ZA(n){const r=n.r/255,i=n.g/255,s=n.b/255,o=Math.max(r,i,s),a=Math.min(r,i,s),l=(o+a)/2;let c,u,h;return o!==a&&(h=o-a,u=l>.5?h/(2-o-a):h/(o+a),c=k2e(r,i,s,h,o),c=c*60+.5),[c|0,u||0,l]}function eN(n,e,r,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,r,i)).map($l)}function tN(n,e,r){return eN(See,n,e,r)}function C2e(n,e,r){return eN(S2e,n,e,r)}function E2e(n,e,r){return eN(_2e,n,e,r)}function kee(n){return(n%360+360)%360}function T2e(n){const e=w2e.exec(n);let r=255,i;if(!e)return;e[5]!==i&&(r=e[6]?em(+e[5]):$l(+e[5]));const s=kee(+e[2]),o=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?i=C2e(s,o,a):e[1]==="hsv"?i=E2e(s,o,a):i=tN(s,o,a),{r:i[0],g:i[1],b:i[2],a:r}}function P2e(n,e){var r=ZA(n);r[0]=kee(r[0]+e),r=tN(r),n.r=r[0],n.g=r[1],n.b=r[2]}function M2e(n){if(!n)return;const e=ZA(n),r=e[0],i=z8(e[1]),s=z8(e[2]);return n.a<255?`hsla(${r}, ${i}%, ${s}%, ${ra(n.a)})`:`hsl(${r}, ${i}%, ${s}%)`}const B8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},U8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function D2e(){const n={},e=Object.keys(U8),r=Object.keys(B8);let i,s,o,a,l;for(i=0;i<e.length;i++){for(a=l=e[i],s=0;s<r.length;s++)o=r[s],l=l.replace(o,B8[o]);o=parseInt(U8[a],16),n[l]=[o>>16&255,o>>8&255,o&255]}return n}let fb;function O2e(n){fb||(fb=D2e(),fb.transparent=[0,0,0,0]);const e=fb[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const I2e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function R2e(n){const e=I2e.exec(n);let r=255,i,s,o;if(e){if(e[7]!==i){const a=+e[7];r=e[8]?em(a):Tl(a*255,0,255)}return i=+e[1],s=+e[3],o=+e[5],i=255&(e[2]?em(i):Tl(i,0,255)),s=255&(e[4]?em(s):Tl(s,0,255)),o=255&(e[6]?em(o):Tl(o,0,255)),{r:i,g:s,b:o,a:r}}}function A2e(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ra(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const HS=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,fd=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function N2e(n,e,r){const i=fd(ra(n.r)),s=fd(ra(n.g)),o=fd(ra(n.b));return{r:$l(HS(i+r*(fd(ra(e.r))-i))),g:$l(HS(s+r*(fd(ra(e.g))-s))),b:$l(HS(o+r*(fd(ra(e.b))-o))),a:n.a+r*(e.a-n.a)}}function pb(n,e,r){if(n){let i=ZA(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*r,e===0?360:1)),i=tN(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Cee(n,e){return n&&Object.assign(e||{},n)}function q8(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=$l(n[3]))):(e=Cee(n,{r:0,g:0,b:0,a:1}),e.a=$l(e.a)),e}function j2e(n){return n.charAt(0)==="r"?R2e(n):T2e(n)}class Ag{constructor(e){if(e instanceof Ag)return e;const r=typeof e;let i;r==="object"?i=q8(e):r==="string"&&(i=b2e(e)||O2e(e)||j2e(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Cee(this._rgb);return e&&(e.a=ra(e.a)),e}set rgb(e){this._rgb=q8(e)}rgbString(){return this._valid?A2e(this._rgb):void 0}hexString(){return this._valid?x2e(this._rgb):void 0}hslString(){return this._valid?M2e(this._rgb):void 0}mix(e,r){if(e){const i=this.rgb,s=e.rgb;let o;const a=r===o?.5:r,l=2*a-1,c=i.a-s.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;o=1-u,i.r=255&u*i.r+o*s.r+.5,i.g=255&u*i.g+o*s.g+.5,i.b=255&u*i.b+o*s.b+.5,i.a=a*i.a+(1-a)*s.a,this.rgb=i}return this}interpolate(e,r){return e&&(this._rgb=N2e(this._rgb,e._rgb,r)),this}clone(){return new Ag(this.rgb)}alpha(e){return this._rgb.a=$l(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=E0(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return pb(this._rgb,2,e),this}darken(e){return pb(this._rgb,2,-e),this}saturate(e){return pb(this._rgb,1,e),this}desaturate(e){return pb(this._rgb,1,-e),this}rotate(e){return P2e(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Vo(){}const L2e=(()=>{let n=0;return()=>n++})();function dn(n){return n==null}function Cn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Tt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function xi(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function oo(n,e){return xi(n)?n:e}function Ct(n,e){return typeof n>"u"?e:n}const F2e=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,Eee=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function en(n,e,r){if(n&&typeof n.call=="function")return n.apply(r,e)}function Xt(n,e,r,i){let s,o,a;if(Cn(n))for(o=n.length,s=0;s<o;s++)e.call(r,n[s],s);else if(Tt(n))for(a=Object.keys(n),o=a.length,s=0;s<o;s++)e.call(r,n[a[s]],a[s])}function Tx(n,e){let r,i,s,o;if(!n||!e||n.length!==e.length)return!1;for(r=0,i=n.length;r<i;++r)if(s=n[r],o=e[r],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Px(n){if(Cn(n))return n.map(Px);if(Tt(n)){const e=Object.create(null),r=Object.keys(n),i=r.length;let s=0;for(;s<i;++s)e[r[s]]=Px(n[r[s]]);return e}return n}function Tee(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function $2e(n,e,r,i){if(!Tee(n))return;const s=e[n],o=r[n];Tt(s)&&Tt(o)?Ng(s,o,i):e[n]=Px(o)}function Ng(n,e,r){const i=Cn(e)?e:[e],s=i.length;if(!Tt(n))return n;r=r||{};const o=r.merger||$2e;let a;for(let l=0;l<s;++l){if(a=i[l],!Tt(a))continue;const c=Object.keys(a);for(let u=0,h=c.length;u<h;++u)o(c[u],n,a,r)}return n}function Pm(n,e){return Ng(n,e,{merger:z2e})}function z2e(n,e,r){if(!Tee(n))return;const i=e[n],s=r[n];Tt(i)&&Tt(s)?Pm(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Px(s))}const W8={"":n=>n,x:n=>n.x,y:n=>n.y};function B2e(n){const e=n.split("."),r=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(r.push(i),i="");return r}function U2e(n){const e=B2e(n);return r=>{for(const i of e){if(i==="")break;r=r&&r[i]}return r}}function jg(n,e){return(W8[e]||(W8[e]=U2e(e)))(n)}function nN(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Ui=n=>typeof n<"u",bi=n=>typeof n=="function",H8=(n,e)=>{if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;return!0};function q2e(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Vt=Math.PI,xr=2*Vt,W2e=xr+Vt,Mx=Number.POSITIVE_INFINITY,rN=Vt/180,wr=Vt/2,cs=Vt/4,Dx=Vt*2/3,Pee=Math.log10,af=Math.sign;function Mm(n,e,r){return Math.abs(n-e)<r}function V8(n){const e=Math.round(n);n=Mm(n,e,n/1e3)?e:n;const r=Math.pow(10,Math.floor(Pee(n))),i=n/r;return(i<=1?1:i<=2?2:i<=5?5:10)*r}function H2e(n){const e=[],r=Math.sqrt(n);let i;for(i=1;i<r;i++)n%i===0&&(e.push(i),e.push(n/i));return r===(r|0)&&e.push(r),e.sort((s,o)=>s-o).pop(),e}function V2e(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Eu(n){return!V2e(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Y2e(n,e){const r=Math.round(n);return r-e<=n&&r+e>=n}function G2e(n,e,r){let i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i][r],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function ur(n){return n*(Vt/180)}function Mee(n){return n*(180/Vt)}function Y8(n){if(!xi(n))return;let e=1,r=0;for(;Math.round(n*e)/e!==n;)e*=10,r++;return r}function MO(n,e){const r=e.x-n.x,i=e.y-n.y,s=Math.sqrt(r*r+i*i);let o=Math.atan2(i,r);return o<-.5*Vt&&(o+=xr),{angle:o,distance:s}}function lf(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function K2e(n,e){return(n-e+W2e)%xr-Vt}function sl(n){return(n%xr+xr)%xr}function Ox(n,e,r,i){const s=sl(n),o=sl(e),a=sl(r),l=sl(o-s),c=sl(a-s),u=sl(s-o),h=sl(s-a);return s===o||s===a||i&&o===a||l>c&&u<h}function ps(n,e,r){return Math.max(e,Math.min(r,n))}function X2e(n){return ps(n,-32768,32767)}function tm(n,e,r,i=1e-6){return n>=Math.min(e,r)-i&&n<=Math.max(e,r)+i}function iN(n,e,r){r=r||(a=>n[a]<e);let i=n.length-1,s=0,o;for(;i-s>1;)o=s+i>>1,r(o)?s=o:i=o;return{lo:s,hi:i}}const $c=(n,e,r,i)=>iN(n,r,i?s=>{const o=n[s][e];return o<r||o===r&&n[s+1][e]===r}:s=>n[s][e]<r),Q2e=(n,e,r)=>iN(n,r,i=>n[i][e]>=r);function J2e(n,e,r){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>r;)s--;return i>0||s<n.length?n.slice(i,s):n}const Dee=["push","pop","shift","splice","unshift"];function Z2e(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Dee.forEach(r=>{const i="_onData"+nN(r),s=n[r];Object.defineProperty(n,r,{configurable:!0,enumerable:!1,value(...o){const a=s.apply(this,o);return n._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...o)}),a}})})}function G8(n,e){const r=n._chartjs;if(!r)return;const i=r.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(Dee.forEach(o=>{delete n[o]}),delete n._chartjs)}function eEe(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const Oee=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Iee(n,e){let r=[],i=!1;return function(...s){r=s,i||(i=!0,Oee.call(window,()=>{i=!1,n.apply(e,r)}))}}function tEe(n,e){let r;return function(...i){return e?(clearTimeout(r),r=setTimeout(n,e,i)):n.apply(this,i),e}}const sN=n=>n==="start"?"left":n==="end"?"right":"center",Dr=(n,e,r)=>n==="start"?e:n==="end"?r:(e+r)/2,nEe=(n,e,r,i)=>n===(i?"left":"right")?r:n==="center"?(e+r)/2:e;function rEe(n,e,r){const i=e.length;let s=0,o=i;if(n._sorted){const{iScale:a,vScale:l,_parsed:c}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,h=a.axis,{min:d,max:f,minDefined:p,maxDefined:g}=a.getUserBounds();if(p){if(s=Math.min($c(c,h,d).lo,r?i:$c(e,h,a.getPixelForValue(d)).lo),u){const b=c.slice(0,s+1).reverse().findIndex(y=>!dn(y[l.axis]));s-=Math.max(0,b)}s=ps(s,0,i-1)}if(g){let b=Math.max($c(c,a.axis,f,!0).hi+1,r?0:$c(e,h,a.getPixelForValue(f),!0).hi+1);if(u){const y=c.slice(b-1).findIndex(v=>!dn(v[l.axis]));b+=Math.max(0,y)}o=ps(b,s,i)-s}else o=i-s}return{start:s,count:o}}function iEe(n){const{xScale:e,yScale:r,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!i)return n._scaleRanges=s,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==r.min||i.ymax!==r.max;return Object.assign(i,s),o}const mb=n=>n===0||n===1,K8=(n,e,r)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*xr/r)),X8=(n,e,r)=>Math.pow(2,-10*n)*Math.sin((n-e)*xr/r)+1,Dm={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*wr)+1,easeOutSine:n=>Math.sin(n*wr),easeInOutSine:n=>-.5*(Math.cos(Vt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>mb(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>mb(n)?n:K8(n,.075,.3),easeOutElastic:n=>mb(n)?n:X8(n,.075,.3),easeInOutElastic(n){return mb(n)?n:n<.5?.5*K8(n*2,.1125,.45):.5+.5*X8(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Dm.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Dm.easeInBounce(n*2)*.5:Dm.easeOutBounce(n*2-1)*.5+.5};function oN(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Q8(n){return oN(n)?n:new Ag(n)}function VS(n){return oN(n)?n:new Ag(n).saturate(.5).darken(.1).hexString()}const sEe=["x","y","borderWidth","radius","tension"],oEe=["color","borderColor","backgroundColor"];function aEe(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:oEe},numbers:{type:"number",properties:sEe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function lEe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const J8=new Map;function cEe(n,e){e=e||{};const r=n+JSON.stringify(e);let i=J8.get(r);return i||(i=new Intl.NumberFormat(n,e),J8.set(r,i)),i}function aN(n,e,r){return cEe(e,r).format(n)}const uEe={values(n){return Cn(n)?n:""+n},numeric(n,e,r){if(n===0)return"0";const i=this.chart.options.locale;let s,o=n;if(r.length>1){const u=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),o=dEe(n,r)}const a=Pee(Math.abs(o)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),aN(n,i,c)}};function dEe(n,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&n!==Math.floor(n)&&(r=n-Math.floor(n)),r}var Ree={formatters:uEe};function hEe(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ree.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Tu=Object.create(null),DO=Object.create(null);function Om(n,e){if(!e)return n;const r=e.split(".");for(let i=0,s=r.length;i<s;++i){const o=r[i];n=n[o]||(n[o]=Object.create(null))}return n}function YS(n,e,r){return typeof e=="string"?Ng(Om(n,e),r):Ng(Om(n,""),e)}class fEe{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>VS(s.backgroundColor),this.hoverBorderColor=(i,s)=>VS(s.borderColor),this.hoverColor=(i,s)=>VS(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return YS(this,e,r)}get(e){return Om(this,e)}describe(e,r){return YS(DO,e,r)}override(e,r){return YS(Tu,e,r)}route(e,r,i,s){const o=Om(this,e),a=Om(this,i),l="_"+r;Object.defineProperties(o,{[l]:{value:o[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[l],u=a[s];return Tt(c)?Object.assign({},u,c):Ct(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(r=>r(this))}}var Nn=new fEe({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[aEe,lEe,hEe]);function pEe(n){return!n||dn(n.size)||dn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Z8(n,e,r,i,s){let o=e[s];return o||(o=e[s]=n.measureText(s).width,r.push(s)),o>i&&(i=o),i}function gc(n,e,r){const i=n.currentDevicePixelRatio,s=r!==0?Math.max(r/2,.5):0;return Math.round((e-s)*i)/i+s}function e6(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function OO(n,e,r,i){Aee(n,e,r,i,null)}function Aee(n,e,r,i,s){let o,a,l,c,u,h,d,f;const p=e.pointStyle,g=e.rotation,b=e.radius;let y=(g||0)*rN;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(r,i),n.rotate(y),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),p){default:s?n.ellipse(r,i,s/2,b,0,0,xr):n.arc(r,i,b,0,xr),n.closePath();break;case"triangle":h=s?s/2:b,n.moveTo(r+Math.sin(y)*h,i-Math.cos(y)*b),y+=Dx,n.lineTo(r+Math.sin(y)*h,i-Math.cos(y)*b),y+=Dx,n.lineTo(r+Math.sin(y)*h,i-Math.cos(y)*b),n.closePath();break;case"rectRounded":u=b*.516,c=b-u,a=Math.cos(y+cs)*c,d=Math.cos(y+cs)*(s?s/2-u:c),l=Math.sin(y+cs)*c,f=Math.sin(y+cs)*(s?s/2-u:c),n.arc(r-d,i-l,u,y-Vt,y-wr),n.arc(r+f,i-a,u,y-wr,y),n.arc(r+d,i+l,u,y,y+wr),n.arc(r-f,i+a,u,y+wr,y+Vt),n.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*b,h=s?s/2:c,n.rect(r-h,i-c,2*h,2*c);break}y+=cs;case"rectRot":d=Math.cos(y)*(s?s/2:b),a=Math.cos(y)*b,l=Math.sin(y)*b,f=Math.sin(y)*(s?s/2:b),n.moveTo(r-d,i-l),n.lineTo(r+f,i-a),n.lineTo(r+d,i+l),n.lineTo(r-f,i+a),n.closePath();break;case"crossRot":y+=cs;case"cross":d=Math.cos(y)*(s?s/2:b),a=Math.cos(y)*b,l=Math.sin(y)*b,f=Math.sin(y)*(s?s/2:b),n.moveTo(r-d,i-l),n.lineTo(r+d,i+l),n.moveTo(r+f,i-a),n.lineTo(r-f,i+a);break;case"star":d=Math.cos(y)*(s?s/2:b),a=Math.cos(y)*b,l=Math.sin(y)*b,f=Math.sin(y)*(s?s/2:b),n.moveTo(r-d,i-l),n.lineTo(r+d,i+l),n.moveTo(r+f,i-a),n.lineTo(r-f,i+a),y+=cs,d=Math.cos(y)*(s?s/2:b),a=Math.cos(y)*b,l=Math.sin(y)*b,f=Math.sin(y)*(s?s/2:b),n.moveTo(r-d,i-l),n.lineTo(r+d,i+l),n.moveTo(r+f,i-a),n.lineTo(r-f,i+a);break;case"line":a=s?s/2:Math.cos(y)*b,l=Math.sin(y)*b,n.moveTo(r-a,i-l),n.lineTo(r+a,i+l);break;case"dash":n.moveTo(r,i),n.lineTo(r+Math.cos(y)*(s?s/2:b),i+Math.sin(y)*b);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Lg(n,e,r){return r=r||.5,!e||n&&n.x>e.left-r&&n.x<e.right+r&&n.y>e.top-r&&n.y<e.bottom+r}function o1(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function a1(n){n.restore()}function mEe(n,e,r,i,s){if(!e)return n.lineTo(r.x,r.y);if(s==="middle"){const o=(e.x+r.x)/2;n.lineTo(o,e.y),n.lineTo(o,r.y)}else s==="after"!=!!i?n.lineTo(e.x,r.y):n.lineTo(r.x,e.y);n.lineTo(r.x,r.y)}function gEe(n,e,r,i){if(!e)return n.lineTo(r.x,r.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?r.cp2x:r.cp1x,i?r.cp2y:r.cp1y,r.x,r.y)}function vEe(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),dn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function bEe(n,e,r,i,s){if(s.strikethrough||s.underline){const o=n.measureText(i),a=e-o.actualBoundingBoxLeft,l=e+o.actualBoundingBoxRight,c=r-o.actualBoundingBoxAscent,u=r+o.actualBoundingBoxDescent,h=s.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(a,h),n.lineTo(l,h),n.stroke()}}function yEe(n,e){const r=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=r}function Fg(n,e,r,i,s,o={}){const a=Cn(e)?e:[e],l=o.strokeWidth>0&&o.strokeColor!=="";let c,u;for(n.save(),n.font=s.string,vEe(n,o),c=0;c<a.length;++c)u=a[c],o.backdrop&&yEe(n,o.backdrop),l&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),dn(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(u,r,i,o.maxWidth)),n.fillText(u,r,i,o.maxWidth),bEe(n,r,i,u,o),i+=Number(s.lineHeight);n.restore()}function Ix(n,e){const{x:r,y:i,w:s,h:o,radius:a}=e;n.arc(r+a.topLeft,i+a.topLeft,a.topLeft,1.5*Vt,Vt,!0),n.lineTo(r,i+o-a.bottomLeft),n.arc(r+a.bottomLeft,i+o-a.bottomLeft,a.bottomLeft,Vt,wr,!0),n.lineTo(r+s-a.bottomRight,i+o),n.arc(r+s-a.bottomRight,i+o-a.bottomRight,a.bottomRight,wr,0,!0),n.lineTo(r+s,i+a.topRight),n.arc(r+s-a.topRight,i+a.topRight,a.topRight,0,-wr,!0),n.lineTo(r+a.topLeft,i)}const xEe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,wEe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _Ee(n,e){const r=(""+n).match(xEe);if(!r||r[1]==="normal")return e*1.2;switch(n=+r[2],r[3]){case"px":return n;case"%":n/=100;break}return e*n}const SEe=n=>+n||0;function Nee(n,e){const r={},i=Tt(e),s=i?Object.keys(e):e,o=Tt(n)?i?a=>Ct(n[a],n[e[a]]):a=>n[a]:()=>n;for(const a of s)r[a]=SEe(o(a));return r}function kEe(n){return Nee(n,{top:"y",right:"x",bottom:"y",left:"x"})}function rh(n){return Nee(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Nr(n){const e=kEe(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function tr(n,e){n=n||{},e=e||Nn.font;let r=Ct(n.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let i=Ct(n.style,e.style);i&&!(""+i).match(wEe)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Ct(n.family,e.family),lineHeight:_Ee(Ct(n.lineHeight,e.lineHeight),r),size:r,style:i,weight:Ct(n.weight,e.weight),string:""};return s.string=pEe(s),s}function gb(n,e,r,i){let s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&a!==void 0)return a}function CEe(n,e,r){const{min:i,max:s}=n,o=Eee(e,(s-i)/2),a=(l,c)=>r&&l===0?0:l+c;return{min:a(i,-Math.abs(o)),max:a(s,o)}}function qu(n,e){return Object.assign(Object.create(n),e)}function lN(n,e=[""],r,i,s=()=>n[0]){const o=r||n;typeof i>"u"&&(i=$ee("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:s,override:l=>lN([l,...n],e,o,i)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete n[0][c],!0},get(l,c){return Lee(l,c,()=>REe(c,e,n,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(l,c){return n6(l).includes(c)},ownKeys(l){return n6(l)},set(l,c,u){const h=l._storage||(l._storage=s());return l[c]=h[c]=u,delete l._keys,!0}})}function cf(n,e,r,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:r,_stack:new Set,_descriptors:jee(n,i),setContext:o=>cf(n,o,r,i),override:o=>cf(n.override(o),e,r,i)};return new Proxy(s,{deleteProperty(o,a){return delete o[a],delete n[a],!0},get(o,a,l){return Lee(o,a,()=>TEe(o,a,l))},getOwnPropertyDescriptor(o,a){return o._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(o,a,l){return n[a]=l,delete o[a],!0}})}function jee(n,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:r,indexable:i,isScriptable:bi(r)?r:()=>r,isIndexable:bi(i)?i:()=>i}}const EEe=(n,e)=>n?n+nN(e):e,cN=(n,e)=>Tt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Lee(n,e,r){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=r();return n[e]=i,i}function TEe(n,e,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;let l=i[e];return bi(l)&&a.isScriptable(e)&&(l=PEe(e,l,n,r)),Cn(l)&&l.length&&(l=MEe(e,l,n,a.isIndexable)),cN(e,l)&&(l=cf(l,s,o&&o[e],a)),l}function PEe(n,e,r,i){const{_proxy:s,_context:o,_subProxy:a,_stack:l}=r;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);l.add(n);let c=e(o,a||i);return l.delete(n),cN(n,c)&&(c=uN(s._scopes,s,n,c)),c}function MEe(n,e,r,i){const{_proxy:s,_context:o,_subProxy:a,_descriptors:l}=r;if(typeof o.index<"u"&&i(n))return e[o.index%e.length];if(Tt(e[0])){const c=e,u=s._scopes.filter(h=>h!==c);e=[];for(const h of c){const d=uN(u,s,n,h);e.push(cf(d,o,a&&a[n],l))}}return e}function Fee(n,e,r){return bi(n)?n(e,r):n}const DEe=(n,e)=>n===!0?e:typeof n=="string"?jg(e,n):void 0;function OEe(n,e,r,i,s){for(const o of e){const a=DEe(r,o);if(a){n.add(a);const l=Fee(a._fallback,r,s);if(typeof l<"u"&&l!==r&&l!==i)return l}else if(a===!1&&typeof i<"u"&&r!==i)return null}return!1}function uN(n,e,r,i){const s=e._rootScopes,o=Fee(e._fallback,r,i),a=[...n,...s],l=new Set;l.add(i);let c=t6(l,a,r,o||r,i);return c===null||typeof o<"u"&&o!==r&&(c=t6(l,a,o,c,i),c===null)?!1:lN(Array.from(l),[""],s,o,()=>IEe(e,r,i))}function t6(n,e,r,i,s){for(;r;)r=OEe(n,e,r,i,s);return r}function IEe(n,e,r){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return Cn(s)&&Tt(r)?r:s||{}}function REe(n,e,r,i){let s;for(const o of e)if(s=$ee(EEe(o,n),r),typeof s<"u")return cN(n,s)?uN(r,i,n,s):s}function $ee(n,e){for(const r of e){if(!r)continue;const i=r[n];if(typeof i<"u")return i}}function n6(n){let e=n._keys;return e||(e=n._keys=AEe(n._scopes)),e}function AEe(n){const e=new Set;for(const r of n)for(const i of Object.keys(r).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const NEe=Number.EPSILON||1e-14,uf=(n,e)=>e<n.length&&!n[e].skip&&n[e],zee=n=>n==="x"?"y":"x";function jEe(n,e,r,i){const s=n.skip?e:n,o=e,a=r.skip?e:r,l=lf(o,s),c=lf(a,o);let u=l/(l+c),h=c/(l+c);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const d=i*u,f=i*h;return{previous:{x:o.x-d*(a.x-s.x),y:o.y-d*(a.y-s.y)},next:{x:o.x+f*(a.x-s.x),y:o.y+f*(a.y-s.y)}}}function LEe(n,e,r){const i=n.length;let s,o,a,l,c,u=uf(n,0);for(let h=0;h<i-1;++h)if(c=u,u=uf(n,h+1),!(!c||!u)){if(Mm(e[h],0,NEe)){r[h]=r[h+1]=0;continue}s=r[h]/e[h],o=r[h+1]/e[h],l=Math.pow(s,2)+Math.pow(o,2),!(l<=9)&&(a=3/Math.sqrt(l),r[h]=s*a*e[h],r[h+1]=o*a*e[h])}}function FEe(n,e,r="x"){const i=zee(r),s=n.length;let o,a,l,c=uf(n,0);for(let u=0;u<s;++u){if(a=l,l=c,c=uf(n,u+1),!l)continue;const h=l[r],d=l[i];a&&(o=(h-a[r])/3,l[`cp1${r}`]=h-o,l[`cp1${i}`]=d-o*e[u]),c&&(o=(c[r]-h)/3,l[`cp2${r}`]=h+o,l[`cp2${i}`]=d+o*e[u])}}function $Ee(n,e="x"){const r=zee(e),i=n.length,s=Array(i).fill(0),o=Array(i);let a,l,c,u=uf(n,0);for(a=0;a<i;++a)if(l=c,c=u,u=uf(n,a+1),!!c){if(u){const h=u[e]-c[e];s[a]=h!==0?(u[r]-c[r])/h:0}o[a]=l?u?af(s[a-1])!==af(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}LEe(n,s,o),FEe(n,o,e)}function vb(n,e,r){return Math.max(Math.min(n,r),e)}function zEe(n,e){let r,i,s,o,a,l=Lg(n[0],e);for(r=0,i=n.length;r<i;++r)a=o,o=l,l=r<i-1&&Lg(n[r+1],e),o&&(s=n[r],a&&(s.cp1x=vb(s.cp1x,e.left,e.right),s.cp1y=vb(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=vb(s.cp2x,e.left,e.right),s.cp2y=vb(s.cp2y,e.top,e.bottom)))}function BEe(n,e,r,i,s){let o,a,l,c;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")$Ee(n,s);else{let u=i?n[n.length-1]:n[0];for(o=0,a=n.length;o<a;++o)l=n[o],c=jEe(u,l,n[Math.min(o+1,a-(i?0:1))%a],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&zEe(n,r)}function dN(){return typeof window<"u"&&typeof document<"u"}function hN(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Rx(n,e,r){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[r])):i=n,i}const l1=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function UEe(n,e){return l1(n).getPropertyValue(e)}const qEe=["top","right","bottom","left"];function ou(n,e,r){const i={};r=r?"-"+r:"";for(let s=0;s<4;s++){const o=qEe[s];i[o]=parseFloat(n[e+"-"+o+r])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const WEe=(n,e,r)=>(n>0||e>0)&&(!r||!r.shadowRoot);function HEe(n,e){const r=n.touches,i=r&&r.length?r[0]:n,{offsetX:s,offsetY:o}=i;let a=!1,l,c;if(WEe(s,o,n.target))l=s,c=o;else{const u=e.getBoundingClientRect();l=i.clientX-u.left,c=i.clientY-u.top,a=!0}return{x:l,y:c,box:a}}function kc(n,e){if("native"in n)return n;const{canvas:r,currentDevicePixelRatio:i}=e,s=l1(r),o=s.boxSizing==="border-box",a=ou(s,"padding"),l=ou(s,"border","width"),{x:c,y:u,box:h}=HEe(n,r),d=a.left+(h&&l.left),f=a.top+(h&&l.top);let{width:p,height:g}=e;return o&&(p-=a.width+l.width,g-=a.height+l.height),{x:Math.round((c-d)/p*r.width/i),y:Math.round((u-f)/g*r.height/i)}}function VEe(n,e,r){let i,s;if(e===void 0||r===void 0){const o=n&&hN(n);if(!o)e=n.clientWidth,r=n.clientHeight;else{const a=o.getBoundingClientRect(),l=l1(o),c=ou(l,"border","width"),u=ou(l,"padding");e=a.width-u.width-c.width,r=a.height-u.height-c.height,i=Rx(l.maxWidth,o,"clientWidth"),s=Rx(l.maxHeight,o,"clientHeight")}}return{width:e,height:r,maxWidth:i||Mx,maxHeight:s||Mx}}const Pl=n=>Math.round(n*10)/10;function YEe(n,e,r,i){const s=l1(n),o=ou(s,"margin"),a=Rx(s.maxWidth,n,"clientWidth")||Mx,l=Rx(s.maxHeight,n,"clientHeight")||Mx,c=VEe(n,e,r);let{width:u,height:h}=c;if(s.boxSizing==="content-box"){const f=ou(s,"border","width"),p=ou(s,"padding");u-=p.width+f.width,h-=p.height+f.height}return u=Math.max(0,u-o.width),h=Math.max(0,i?u/i:h-o.height),u=Pl(Math.min(u,a,c.maxWidth)),h=Pl(Math.min(h,l,c.maxHeight)),u&&!h&&(h=Pl(u/2)),(e!==void 0||r!==void 0)&&i&&c.height&&h>c.height&&(h=c.height,u=Pl(Math.floor(h*i))),{width:u,height:h}}function r6(n,e,r){const i=e||1,s=Pl(n.height*i),o=Pl(n.width*i);n.height=Pl(n.height),n.width=Pl(n.width);const a=n.canvas;return a.style&&(r||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||a.height!==s||a.width!==o?(n.currentDevicePixelRatio=i,a.height=s,a.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const GEe=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};dN()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function i6(n,e){const r=UEe(n,e),i=r&&r.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Cc(n,e,r,i){return{x:n.x+r*(e.x-n.x),y:n.y+r*(e.y-n.y)}}function KEe(n,e,r,i){return{x:n.x+r*(e.x-n.x),y:i==="middle"?r<.5?n.y:e.y:i==="after"?r<1?n.y:e.y:r>0?e.y:n.y}}function XEe(n,e,r,i){const s={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},a=Cc(n,s,r),l=Cc(s,o,r),c=Cc(o,e,r),u=Cc(a,l,r),h=Cc(l,c,r);return Cc(u,h,r)}const QEe=function(n,e){return{x(r){return n+n+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,i){return r-i},leftForLtr(r,i){return r-i}}},JEe=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function ih(n,e,r){return n?QEe(e,r):JEe()}function Bee(n,e){let r,i;(e==="ltr"||e==="rtl")&&(r=n.canvas.style,i=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),n.prevTextDirection=i)}function Uee(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function qee(n){return n==="angle"?{between:Ox,compare:K2e,normalize:sl}:{between:tm,compare:(e,r)=>e-r,normalize:e=>e}}function s6({start:n,end:e,count:r,loop:i,style:s}){return{start:n%r,end:e%r,loop:i&&(e-n+1)%r===0,style:s}}function ZEe(n,e,r){const{property:i,start:s,end:o}=r,{between:a,normalize:l}=qee(i),c=e.length;let{start:u,end:h,loop:d}=n,f,p;if(d){for(u+=c,h+=c,f=0,p=c;f<p&&a(l(e[u%c][i]),s,o);++f)u--,h--;u%=c,h%=c}return h<u&&(h+=c),{start:u,end:h,loop:d,style:n.style}}function eTe(n,e,r){if(!r)return[n];const{property:i,start:s,end:o}=r,a=e.length,{compare:l,between:c,normalize:u}=qee(i),{start:h,end:d,loop:f,style:p}=ZEe(n,e,r),g=[];let b=!1,y=null,v,w,k;const _=()=>c(s,k,v)&&l(s,k)!==0,S=()=>l(o,v)===0||c(o,k,v),C=()=>b||_(),E=()=>!b||S();for(let P=h,O=h;P<=d;++P)w=e[P%a],!w.skip&&(v=u(w[i]),v!==k&&(b=c(v,s,o),y===null&&C()&&(y=l(v,s)===0?P:O),y!==null&&E()&&(g.push(s6({start:y,end:P,loop:f,count:a,style:p})),y=null),O=P,k=v));return y!==null&&g.push(s6({start:y,end:d,loop:f,count:a,style:p})),g}function tTe(n,e){const r=[],i=n.segments;for(let s=0;s<i.length;s++){const o=eTe(i[s],n.points,e);o.length&&r.push(...o)}return r}function nTe(n,e,r,i){let s=0,o=e-1;if(r&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,r&&(o+=s);o>s&&n[o%e].skip;)o--;return o%=e,{start:s,end:o}}function rTe(n,e,r,i){const s=n.length,o=[];let a=e,l=n[e],c;for(c=e+1;c<=r;++c){const u=n[c%s];u.skip||u.stop?l.skip||(i=!1,o.push({start:e%s,end:(c-1)%s,loop:i}),e=a=u.stop?c:null):(a=c,l.skip&&(e=c)),l=u}return a!==null&&o.push({start:e%s,end:a%s,loop:i}),o}function iTe(n,e){const r=n.points,i=n.options.spanGaps,s=r.length;if(!s)return[];const o=!!n._loop,{start:a,end:l}=nTe(r,s,o,i);if(i===!0)return o6(n,[{start:a,end:l,loop:o}],r,e);const c=l<a?l+s:l,u=!!n._fullLoop&&a===0&&l===s-1;return o6(n,rTe(r,a,c,u),r,e)}function o6(n,e,r,i){return!i||!i.setContext||!r?e:sTe(n,e,r,i)}function sTe(n,e,r,i){const s=n._chart.getContext(),o=a6(n.options),{_datasetIndex:a,options:{spanGaps:l}}=n,c=r.length,u=[];let h=o,d=e[0].start,f=d;function p(g,b,y,v){const w=l?-1:1;if(g!==b){for(g+=c;r[g%c].skip;)g-=w;for(;r[b%c].skip;)b+=w;g%c!==b%c&&(u.push({start:g%c,end:b%c,loop:y,style:v}),h=v,d=b%c)}}for(const g of e){d=l?d:g.start;let b=r[d%c],y;for(f=d+1;f<=g.end;f++){const v=r[f%c];y=a6(i.setContext(qu(s,{type:"segment",p0:b,p1:v,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),oTe(y,h)&&p(d,f-1,g.loop,h),b=v,h=y}d<f-1&&p(d,f-1,g.loop,h)}return u}function a6(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function oTe(n,e){if(!e)return!1;const r=[],i=function(s,o){return oN(o)?(r.includes(o)||r.push(o),r.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function bb(n,e,r){return n.options.clip?n[r]:e[r]}function aTe(n,e){const{xScale:r,yScale:i}=n;return r&&i?{left:bb(r,e,"left"),right:bb(r,e,"right"),top:bb(i,e,"top"),bottom:bb(i,e,"bottom")}:e}function lTe(n,e){const r=e._clip;if(r.disabled)return!1;const i=aTe(e,n.chartArea);return{left:r.left===!1?0:i.left-(r.left===!0?0:r.left),right:r.right===!1?n.width:i.right+(r.right===!0?0:r.right),top:r.top===!1?0:i.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?n.height:i.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class cTe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,i,s){const o=r.listeners[s],a=r.duration;o.forEach(l=>l({chart:e,initial:r.initial,numSteps:a,currentStep:Math.min(i-r.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Oee.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const o=i.items;let a=o.length-1,l=!1,c;for(;a>=0;--a)c=o[a],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),l=!0):(o[a]=o[o.length-1],o.pop());l&&(s.draw(),this._notify(s,i,e,"progress")),o.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),r+=o.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let i=r.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,i)),i}listen(e,r,i){this._getAnims(e).listeners[r].push(i)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const i=r.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Jo=new cTe;const l6="transparent",uTe={boolean(n,e,r){return r>.5?e:n},color(n,e,r){const i=Q8(n||l6),s=i.valid&&Q8(e||l6);return s&&s.valid?s.mix(i,r).hexString():e},number(n,e,r){return n+(e-n)*r}};class dTe{constructor(e,r,i,s){const o=r[i];s=gb([e.to,s,o,e.from]);const a=gb([e.from,o,s]);this._active=!0,this._fn=e.fn||uTe[e.type||typeof a],this._easing=Dm[e.easing]||Dm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=i,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(e,r,i){if(this._active){this._notify(!1);const s=this._target[this._prop],o=i-this._start,a=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=gb([e.to,r,s,e.from]),this._from=gb([e.from,s,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,i=this._duration,s=this._prop,o=this._from,a=this._loop,l=this._to;let c;if(this._active=o!==l&&(a||r<i),!this._active){this._target[s]=l,this._notify(!0);return}if(r<0){this._target[s]=o;return}c=r/i%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(o,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,i)=>{e.push({res:r,rej:i})})}_notify(e){const r=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][r]()}}class fN{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Tt(e))return;const r=Object.keys(Nn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const o=e[s];if(!Tt(o))return;const a={};for(const l of r)a[l]=o[l];(Cn(o.properties)&&o.properties||[s]).forEach(l=>{(l===s||!i.has(l))&&i.set(l,a)})})}_animateOptions(e,r){const i=r.options,s=fTe(e,i);if(!s)return[];const o=this._createAnimations(s,i);return i.$shared&&hTe(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,r){const i=this._properties,s=[],o=e.$animations||(e.$animations={}),a=Object.keys(r),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,r));continue}const h=r[u];let d=o[u];const f=i.get(u);if(d)if(f&&d.active()){d.update(f,h,l);continue}else d.cancel();if(!f||!f.duration){e[u]=h;continue}o[u]=d=new dTe(f,e,u,h),s.push(d)}return s}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const i=this._createAnimations(e,r);if(i.length)return Jo.add(this._chart,i),!0}}function hTe(n,e){const r=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const o=n[i[s]];o&&o.active()&&r.push(o.wait())}return Promise.all(r)}function fTe(n,e){if(!e)return;let r=n.options;if(!r){n.options=e;return}return r.$shared&&(n.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function c6(n,e){const r=n&&n.options||{},i=r.reverse,s=r.min===void 0?e:0,o=r.max===void 0?e:0;return{start:i?o:s,end:i?s:o}}function pTe(n,e,r){if(r===!1)return!1;const i=c6(n,r),s=c6(e,r);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function mTe(n){let e,r,i,s;return Tt(n)?(e=n.top,r=n.right,i=n.bottom,s=n.left):e=r=i=s=n,{top:e,right:r,bottom:i,left:s,disabled:n===!1}}function Wee(n,e){const r=[],i=n._getSortedDatasetMetas(e);let s,o;for(s=0,o=i.length;s<o;++s)r.push(i[s].index);return r}function u6(n,e,r,i={}){const s=n.keys,o=i.mode==="single";let a,l,c,u;if(e===null)return;let h=!1;for(a=0,l=s.length;a<l;++a){if(c=+s[a],c===r){if(h=!0,i.all)continue;break}u=n.values[c],xi(u)&&(o||e===0||af(e)===af(u))&&(e+=u)}return!h&&!i.all?0:e}function gTe(n,e){const{iScale:r,vScale:i}=e,s=r.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",a=Object.keys(n),l=new Array(a.length);let c,u,h;for(c=0,u=a.length;c<u;++c)h=a[c],l[c]={[s]:h,[o]:n[h]};return l}function GS(n,e){const r=n&&n.options.stacked;return r||r===void 0&&e.stack!==void 0}function vTe(n,e,r){return`${n.id}.${e.id}.${r.stack||r.type}`}function bTe(n){const{min:e,max:r,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?r:Number.POSITIVE_INFINITY}}function yTe(n,e,r){const i=n[e]||(n[e]={});return i[r]||(i[r]={})}function d6(n,e,r,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const o=n[s.index];if(r&&o>0||!r&&o<0)return s.index}return null}function h6(n,e){const{chart:r,_cachedMeta:i}=n,s=r._stacks||(r._stacks={}),{iScale:o,vScale:a,index:l}=i,c=o.axis,u=a.axis,h=vTe(o,a,i),d=e.length;let f;for(let p=0;p<d;++p){const g=e[p],{[c]:b,[u]:y}=g,v=g._stacks||(g._stacks={});f=v[u]=yTe(s,h,b),f[l]=y,f._top=d6(f,a,!0,i.type),f._bottom=d6(f,a,!1,i.type);const w=f._visualValues||(f._visualValues={});w[l]=y}}function KS(n,e){const r=n.scales;return Object.keys(r).filter(i=>r[i].axis===e).shift()}function xTe(n,e){return qu(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function wTe(n,e,r){return qu(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Cp(n,e){const r=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const o=s._stacks;if(!o||o[i]===void 0||o[i][r]===void 0)return;delete o[i][r],o[i]._visualValues!==void 0&&o[i]._visualValues[r]!==void 0&&delete o[i]._visualValues[r]}}}const XS=n=>n==="reset"||n==="none",f6=(n,e)=>e?n:Object.assign({},n),_Te=(n,e,r)=>n&&!e.hidden&&e._stacked&&{keys:Wee(r,!0),values:null};class sh{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=GS(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Cp(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(d,f,p,g)=>d==="x"?f:d==="r"?g:p,o=r.xAxisID=Ct(i.xAxisID,KS(e,"x")),a=r.yAxisID=Ct(i.yAxisID,KS(e,"y")),l=r.rAxisID=Ct(i.rAxisID,KS(e,"r")),c=r.indexAxis,u=r.iAxisID=s(c,o,a,l),h=r.vAxisID=s(c,a,o,l);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(l),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&G8(this._data,this),e._stacked&&Cp(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),i=this._data;if(Tt(r)){const s=this._cachedMeta;this._data=gTe(r,s)}else if(i!==r){if(i){G8(i,this);const s=this._cachedMeta;Cp(s),s._parsed=[]}r&&Object.isExtensible(r)&&Z2e(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=r._stacked;r._stacked=GS(r.vScale,r),r.stack!==i.stack&&(s=!0,Cp(r),r.stack=i.stack),this._resyncElements(e),(s||o!==r._stacked)&&(h6(this,r._parsed),r._stacked=GS(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,l=o.axis;let c=e===0&&r===s.length?!0:i._sorted,u=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{Cn(s[e])?f=this.parseArrayData(i,s,e,r):Tt(s[e])?f=this.parseObjectData(i,s,e,r):f=this.parsePrimitiveData(i,s,e,r);const p=()=>d[l]===null||u&&d[l]<u[l];for(h=0;h<r;++h)i._parsed[h+e]=d=f[h],c&&(p()&&(c=!1),u=d);i._sorted=c}a&&h6(this,f)}parsePrimitiveData(e,r,i,s){const{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,u=o.getLabels(),h=o===a,d=new Array(s);let f,p,g;for(f=0,p=s;f<p;++f)g=f+i,d[f]={[l]:h||o.parse(u[g],g),[c]:a.parse(r[g],g)};return d}parseArrayData(e,r,i,s){const{xScale:o,yScale:a}=e,l=new Array(s);let c,u,h,d;for(c=0,u=s;c<u;++c)h=c+i,d=r[h],l[c]={x:o.parse(d[0],h),y:a.parse(d[1],h)};return l}parseObjectData(e,r,i,s){const{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let h,d,f,p;for(h=0,d=s;h<d;++h)f=h+i,p=r[f],u[h]={x:o.parse(jg(p,l),f),y:a.parse(jg(p,c),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,i){const s=this.chart,o=this._cachedMeta,a=r[e.axis],l={keys:Wee(s,!0),values:r._stacks[e.axis]._visualValues};return u6(l,a,o.index,{mode:i})}updateRangeFromParsed(e,r,i,s){const o=i[r.axis];let a=o===null?NaN:o;const l=s&&i._stacks[r.axis];s&&l&&(s.values=l,a=u6(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,r){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&e===i.iScale,a=s.length,l=this._getOtherScale(e),c=_Te(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=bTe(l);let f,p;function g(){p=s[f];const b=p[l.axis];return!xi(p[e.axis])||h>b||d<b}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(u,e,p,c),o));++f);if(o){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(u,e,p,c);break}}return u}getAllParsedValues(e){const r=this._cachedMeta._parsed,i=[];let s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][e.axis],xi(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=mTe(Ct(this.options.clip,pTe(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,i=this._cachedMeta,s=i.data||[],o=r.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,o,l,c),h=l;h<l+c;++h){const d=s[h];d.hidden||(d.active&&u?a.push(d):d.draw(e,o))}for(h=0;h<a.length;++h)a[h].draw(e,o)}getStyle(e,r){const i=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,r,i){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];o=a.$context||(a.$context=wTe(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=xTe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",i){const s=r==="active",o=this._cachedDataOpts,a=e+"-"+r,l=o[a],c=this.enableOptionSharing&&Ui(i);if(l)return f6(l,c);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),h),p=Object.keys(Nn.elements[e]),g=()=>this.getContext(i,s,r),b=u.resolveNamedOptions(f,p,g,d);return b.$shared&&(b.$shared=c,o[a]=Object.freeze(f6(b,c))),b}_resolveAnimations(e,r,i){const s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,l=o[a];if(l)return l;let c;if(s.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,r),f=h.getOptionScopes(this.getDataset(),d);c=h.createResolver(f,this.getContext(e,i,r))}const u=new fN(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||XS(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const i=this.resolveDataElementOptions(e,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(e,r,i,s){XS(s)?Object.assign(e,i):this._resolveAnimations(r,s).update(e,i)}updateSharedOptions(e,r,i){e&&!XS(r)&&this._resolveAnimations(void 0,r).update(e,i)}_setStyle(e,r,i,s){e.active=s;const o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,r,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,r,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,i=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,r,i=!0){const s=this._cachedMeta,o=s.data,a=e+r;let l;const c=u=>{for(u.length+=r,l=u.length-1;l>=a;l--)u[l]=u[l-r]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,r),i&&this.updateElements(o,e,r,"reset")}updateElements(e,r,i,s){}_removeElements(e,r){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,r);i._stacked&&Cp(i,s)}i.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,i,s]=e;this[r](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Te(sh,"defaults",{}),Te(sh,"datasetElementType",null),Te(sh,"dataElementType",null);function STe(n,e,r){let i=1,s=1,o=0,a=0;if(e<xr){const l=n,c=l+e,u=Math.cos(l),h=Math.sin(l),d=Math.cos(c),f=Math.sin(c),p=(k,_,S)=>Ox(k,l,c,!0)?1:Math.max(_,_*r,S,S*r),g=(k,_,S)=>Ox(k,l,c,!0)?-1:Math.min(_,_*r,S,S*r),b=p(0,u,d),y=p(wr,h,f),v=g(Vt,u,d),w=g(Vt+wr,h,f);i=(b-v)/2,s=(y-w)/2,o=-(b+v)/2,a=-(y+w)/2}return{ratioX:i,ratioY:s,offsetX:o,offsetY:a}}class nm extends sh{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=c=>+i[c];if(Tt(i[e])){const{key:c="value"}=this._parsing;o=u=>+jg(i[u],c)}let a,l;for(a=e,l=e+r;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return ur(this.options.rotation-90)}_getCircumference(){return ur(this.options.circumference)}_getRotationExtents(){let e=xr,r=-xr;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),a=s._getCircumference();e=Math.min(e,o),r=Math.max(r,o+a)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:i}=r,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(i.width,i.height)-a)/2,0),c=Math.min(F2e(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:b}=STe(d,h,c),y=(i.width-a)/f,v=(i.height-a)/p,w=Math.max(Math.min(y,v)/2,0),k=Eee(this.options.radius,w),_=Math.max(k*c,0),S=(k-_)/this._getVisibleDatasetWeightTotal();this.offsetX=g*k,this.offsetY=b*k,s.total=this.calculateTotal(),this.outerRadius=k-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*u,0),this.updateElements(o,0,o.length,e)}_circumference(e,r){const i=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/xr)}updateElements(e,r,i,s){const o=s==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,h=(l.left+l.right)/2,d=(l.top+l.bottom)/2,f=o&&u.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:b,includeOptions:y}=this._getSharedOptions(r,s);let v=this._getRotation(),w;for(w=0;w<r;++w)v+=this._circumference(w,o);for(w=r;w<r+i;++w){const k=this._circumference(w,o),_=e[w],S={x:h+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+k,circumference:k,outerRadius:g,innerRadius:p};y&&(S.options=b||this.resolveDataElementOptions(w,_.active?"active":s)),v+=k,this.updateElement(_,w,S,s)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let i=0,s;for(s=0;s<r.length;s++){const o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?xr*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=aN(r._parsed[e],i.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let r=0;const i=this.chart;let s,o,a,l,c;if(!e){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),e=a.data,l=a.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let i=0,s=e.length;i<s;++i){const o=this.resolveDataElementOptions(i);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(e){return Math.max(Ct(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Te(nm,"id","doughnut"),Te(nm,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Te(nm,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Te(nm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data,{labels:{pointStyle:i,textAlign:s,color:o,useBorderRadius:a,borderRadius:l}}=e.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((c,u)=>{const d=e.getDatasetMeta(0).controller.getStyle(u);return{text:c,fillStyle:d.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(u),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:s,pointStyle:i,borderRadius:a&&(l||d.borderRadius),index:u}}):[]}},onClick(e,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}});class my extends sh{getLabelAndValue(e){const r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:i[e]||"",value:"("+l+", "+c+")"}}update(e){const r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled;let{start:o,count:a}=rEe(r,i,s);if(this._drawStart=o,this._drawCount=a,iEe(r)&&(o=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=r;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=i;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,o,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,i,s){const o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(r,s),d=this.getSharedOptions(h),f=this.includeOptions(s,d),p=a.axis,g=l.axis,{spanGaps:b,segment:y}=this.options,v=Eu(b)?b:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||s==="none";let k=r>0&&this.getParsed(r-1);for(let _=r;_<r+i;++_){const S=e[_],C=this.getParsed(_),E=w?S:{},P=dn(C[g]),O=E[p]=a.getPixelForValue(C[p],_),M=E[g]=o||P?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[g],_);E.skip=isNaN(O)||isNaN(M)||P,E.stop=_>0&&Math.abs(C[p]-k[p])>v,y&&(E.parsed=C,E.raw=u.data[_]),f&&(E.options=d||this.resolveDataElementOptions(_,S.active?"active":s)),w||this.updateElement(S,_,E,s),k=C}this.updateSharedOptions(d,s,h)}getMaxOverflow(){const e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let l=0;for(let c=r.length-1;c>=0;--c)l=Math.max(l,r[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;const o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}}Te(my,"id","scatter"),Te(my,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Te(my,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function vc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pN{constructor(e){Te(this,"options");this.options=e||{}}static override(e){Object.assign(pN.prototype,e)}init(){}formats(){return vc()}parse(){return vc()}format(){return vc()}add(){return vc()}diff(){return vc()}startOf(){return vc()}endOf(){return vc()}}var kTe={_date:pN};function CTe(n,e,r,i){const{controller:s,data:o,_sorted:a}=n,l=s._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&a&&o.length){const u=l._reversePixels?Q2e:$c;if(i){if(s._sharedOptions){const h=o[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=u(o,e,r-d),p=u(o,e,r+d);return{lo:f.lo,hi:p.hi}}}}else{const h=u(o,e,r);if(c){const{vScale:d}=s._cachedMeta,{_parsed:f}=n,p=f.slice(0,h.lo+1).reverse().findIndex(b=>!dn(b[d.axis]));h.lo-=Math.max(0,p);const g=f.slice(h.hi).findIndex(b=>!dn(b[d.axis]));h.hi+=Math.max(0,g)}return h}}return{lo:0,hi:o.length-1}}function c1(n,e,r,i,s){const o=n.getSortedVisibleDatasetMetas(),a=r[e];for(let l=0,c=o.length;l<c;++l){const{index:u,data:h}=o[l],{lo:d,hi:f}=CTe(o[l],e,a,s);for(let p=d;p<=f;++p){const g=h[p];g.skip||i(g,u,p)}}}function ETe(n){const e=n.indexOf("x")!==-1,r=n.indexOf("y")!==-1;return function(i,s){const o=e?Math.abs(i.x-s.x):0,a=r?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}}function QS(n,e,r,i,s){const o=[];return!s&&!n.isPointInArea(e)||c1(n,r,e,function(l,c,u){!s&&!Lg(l,n.chartArea,0)||l.inRange(e.x,e.y,i)&&o.push({element:l,datasetIndex:c,index:u})},!0),o}function TTe(n,e,r,i){let s=[];function o(a,l,c){const{startAngle:u,endAngle:h}=a.getProps(["startAngle","endAngle"],i),{angle:d}=MO(a,{x:e.x,y:e.y});Ox(d,u,h)&&s.push({element:a,datasetIndex:l,index:c})}return c1(n,r,e,o),s}function PTe(n,e,r,i,s,o){let a=[];const l=ETe(r);let c=Number.POSITIVE_INFINITY;function u(h,d,f){const p=h.inRange(e.x,e.y,s);if(i&&!p)return;const g=h.getCenterPoint(s);if(!(!!o||n.isPointInArea(g))&&!p)return;const y=l(e,g);y<c?(a=[{element:h,datasetIndex:d,index:f}],c=y):y===c&&a.push({element:h,datasetIndex:d,index:f})}return c1(n,r,e,u),a}function JS(n,e,r,i,s,o){return!o&&!n.isPointInArea(e)?[]:r==="r"&&!i?TTe(n,e,r,s):PTe(n,e,r,i,s,o)}function p6(n,e,r,i,s){const o=[],a=r==="x"?"inXRange":"inYRange";let l=!1;return c1(n,r,e,(c,u,h)=>{c[a]&&c[a](e[r],s)&&(o.push({element:c,datasetIndex:u,index:h}),l=l||c.inRange(e.x,e.y,s))}),i&&!l?[]:o}var MTe={modes:{index(n,e,r,i){const s=kc(e,n),o=r.axis||"x",a=r.includeInvisible||!1,l=r.intersect?QS(n,s,o,i,a):JS(n,s,o,!1,i,a),c=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const h=l[0].index,d=u.data[h];d&&!d.skip&&c.push({element:d,datasetIndex:u.index,index:h})}),c):[]},dataset(n,e,r,i){const s=kc(e,n),o=r.axis||"xy",a=r.includeInvisible||!1;let l=r.intersect?QS(n,s,o,i,a):JS(n,s,o,!1,i,a);if(l.length>0){const c=l[0].datasetIndex,u=n.getDatasetMeta(c).data;l=[];for(let h=0;h<u.length;++h)l.push({element:u[h],datasetIndex:c,index:h})}return l},point(n,e,r,i){const s=kc(e,n),o=r.axis||"xy",a=r.includeInvisible||!1;return QS(n,s,o,i,a)},nearest(n,e,r,i){const s=kc(e,n),o=r.axis||"xy",a=r.includeInvisible||!1;return JS(n,s,o,r.intersect,i,a)},x(n,e,r,i){const s=kc(e,n);return p6(n,s,"x",r.intersect,i)},y(n,e,r,i){const s=kc(e,n);return p6(n,s,"y",r.intersect,i)}}};const Hee=["left","top","right","bottom"];function Ep(n,e){return n.filter(r=>r.pos===e)}function m6(n,e){return n.filter(r=>Hee.indexOf(r.pos)===-1&&r.box.axis===e)}function Tp(n,e){return n.sort((r,i)=>{const s=e?i:r,o=e?r:i;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function DTe(n){const e=[];let r,i,s,o,a,l;for(r=0,i=(n||[]).length;r<i;++r)s=n[r],{position:o,options:{stack:a,stackWeight:l=1}}=s,e.push({index:r,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&o+a,stackWeight:l});return e}function OTe(n){const e={};for(const r of n){const{stack:i,pos:s,stackWeight:o}=r;if(!i||!Hee.includes(s))continue;const a=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=o}return e}function ITe(n,e){const r=OTe(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let o,a,l;for(o=0,a=n.length;o<a;++o){l=n[o];const{fullSize:c}=l.box,u=r[l.stack],h=u&&l.stackWeight/u.weight;l.horizontal?(l.width=h?h*i:c&&e.availableWidth,l.height=s):(l.width=i,l.height=h?h*s:c&&e.availableHeight)}return r}function RTe(n){const e=DTe(n),r=Tp(e.filter(u=>u.box.fullSize),!0),i=Tp(Ep(e,"left"),!0),s=Tp(Ep(e,"right")),o=Tp(Ep(e,"top"),!0),a=Tp(Ep(e,"bottom")),l=m6(e,"x"),c=m6(e,"y");return{fullSize:r,leftAndTop:i.concat(o),rightAndBottom:s.concat(c).concat(a).concat(l),chartArea:Ep(e,"chartArea"),vertical:i.concat(s).concat(c),horizontal:o.concat(a).concat(l)}}function g6(n,e,r,i){return Math.max(n[r],e[r])+Math.max(n[i],e[i])}function Vee(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function ATe(n,e,r,i){const{pos:s,box:o}=r,a=n.maxPadding;if(!Tt(s)){r.size&&(n[s]-=r.size);const d=i[r.stack]||{size:0,count:1};d.size=Math.max(d.size,r.horizontal?o.height:o.width),r.size=d.size/d.count,n[s]+=r.size}o.getPadding&&Vee(a,o.getPadding());const l=Math.max(0,e.outerWidth-g6(a,n,"left","right")),c=Math.max(0,e.outerHeight-g6(a,n,"top","bottom")),u=l!==n.w,h=c!==n.h;return n.w=l,n.h=c,r.horizontal?{same:u,other:h}:{same:h,other:u}}function NTe(n){const e=n.maxPadding;function r(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=r("top"),n.x+=r("left"),r("right"),r("bottom")}function jTe(n,e){const r=e.maxPadding;function i(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{o[a]=Math.max(e[a],r[a])}),o}return i(n?["left","right"]:["top","bottom"])}function rm(n,e,r,i){const s=[];let o,a,l,c,u,h;for(o=0,a=n.length,u=0;o<a;++o){l=n[o],c=l.box,c.update(l.width||e.w,l.height||e.h,jTe(l.horizontal,e));const{same:d,other:f}=ATe(e,r,l,i);u|=d&&s.length,h=h||f,c.fullSize||s.push(l)}return u&&rm(s,e,r,i)||h}function yb(n,e,r,i,s){n.top=r,n.left=e,n.right=e+i,n.bottom=r+s,n.width=i,n.height=s}function v6(n,e,r,i){const s=r.padding;let{x:o,y:a}=e;for(const l of n){const c=l.box,u=i[l.stack]||{placed:0,weight:1},h=l.stackWeight/u.weight||1;if(l.horizontal){const d=e.w*h,f=u.size||c.height;Ui(u.start)&&(a=u.start),c.fullSize?yb(c,s.left,a,r.outerWidth-s.right-s.left,f):yb(c,e.left+u.placed,a,d,f),u.start=a,u.placed+=d,a=c.bottom}else{const d=e.h*h,f=u.size||c.width;Ui(u.start)&&(o=u.start),c.fullSize?yb(c,o,s.top,f,r.outerHeight-s.bottom-s.top):yb(c,o,e.top+u.placed,f,d),u.start=o,u.placed+=d,o=c.right}}e.x=o,e.y=a}var ms={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},n.boxes.push(e)},removeBox(n,e){const r=n.boxes?n.boxes.indexOf(e):-1;r!==-1&&n.boxes.splice(r,1)},configure(n,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(n,e,r,i){if(!n)return;const s=Nr(n.options.layout.padding),o=Math.max(e-s.width,0),a=Math.max(r-s.height,0),l=RTe(n.boxes),c=l.vertical,u=l.horizontal;Xt(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=c.reduce((b,y)=>y.box.options&&y.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:r,padding:s,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/h,hBoxMaxHeight:a/2}),f=Object.assign({},s);Vee(f,Nr(i));const p=Object.assign({maxPadding:f,w:o,h:a,x:s.left,y:s.top},s),g=ITe(c.concat(u),d);rm(l.fullSize,p,d,g),rm(c,p,d,g),rm(u,p,d,g)&&rm(c,p,d,g),NTe(p),v6(l.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,v6(l.rightAndBottom,p,d,g),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Xt(l.chartArea,b=>{const y=b.box;Object.assign(y,n.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Yee{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,i){}removeEventListener(e,r,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,i,s){return r=Math.max(0,r||e.width),i=i||e.height,{width:r,height:Math.max(0,s?Math.floor(r/s):i)}}isAttached(e){return!0}updateConfig(e){}}class LTe extends Yee{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const gy="$chartjs",FTe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},b6=n=>n===null||n==="";function $Te(n,e){const r=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[gy]={initial:{height:i,width:s,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",b6(s)){const o=i6(n,"width");o!==void 0&&(n.width=o)}if(b6(i))if(n.style.height==="")n.height=n.width/(e||2);else{const o=i6(n,"height");o!==void 0&&(n.height=o)}return n}const Gee=GEe?{passive:!0}:!1;function zTe(n,e,r){n&&n.addEventListener(e,r,Gee)}function BTe(n,e,r){n&&n.canvas&&n.canvas.removeEventListener(e,r,Gee)}function UTe(n,e){const r=FTe[n.type]||n.type,{x:i,y:s}=kc(n,e);return{type:r,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Ax(n,e){for(const r of n)if(r===e||r.contains(e))return!0}function qTe(n,e,r){const i=n.canvas,s=new MutationObserver(o=>{let a=!1;for(const l of o)a=a||Ax(l.addedNodes,i),a=a&&!Ax(l.removedNodes,i);a&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}function WTe(n,e,r){const i=n.canvas,s=new MutationObserver(o=>{let a=!1;for(const l of o)a=a||Ax(l.removedNodes,i),a=a&&!Ax(l.addedNodes,i);a&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}const $g=new Map;let y6=0;function Kee(){const n=window.devicePixelRatio;n!==y6&&(y6=n,$g.forEach((e,r)=>{r.currentDevicePixelRatio!==n&&e()}))}function HTe(n,e){$g.size||window.addEventListener("resize",Kee),$g.set(n,e)}function VTe(n){$g.delete(n),$g.size||window.removeEventListener("resize",Kee)}function YTe(n,e,r){const i=n.canvas,s=i&&hN(i);if(!s)return;const o=Iee((l,c)=>{const u=s.clientWidth;r(l,c),u<s.clientWidth&&r()},window),a=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,h=c.contentRect.height;u===0&&h===0||o(u,h)});return a.observe(s),HTe(n,o),a}function ZS(n,e,r){r&&r.disconnect(),e==="resize"&&VTe(n)}function GTe(n,e,r){const i=n.canvas,s=Iee(o=>{n.ctx!==null&&r(UTe(o,n))},n);return zTe(i,e,s),s}class KTe extends Yee{acquireContext(e,r){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?($Te(e,r),i):null}releaseContext(e){const r=e.canvas;if(!r[gy])return!1;const i=r[gy].initial;["height","width"].forEach(o=>{const a=i[o];dn(a)?r.removeAttribute(o):r.setAttribute(o,a)});const s=i.style||{};return Object.keys(s).forEach(o=>{r.style[o]=s[o]}),r.width=r.width,delete r[gy],!0}addEventListener(e,r,i){this.removeEventListener(e,r);const s=e.$proxies||(e.$proxies={}),a={attach:qTe,detach:WTe,resize:YTe}[r]||GTe;s[r]=a(e,r,i)}removeEventListener(e,r){const i=e.$proxies||(e.$proxies={}),s=i[r];if(!s)return;({attach:ZS,detach:ZS,resize:ZS}[r]||BTe)(e,r,s),i[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,i,s){return YEe(e,r,i,s)}isAttached(e){const r=e&&hN(e);return!!(r&&r.isConnected)}}function XTe(n){return!dN()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?LTe:KTe}var jb;let Si=(jb=class{constructor(){Te(this,"x");Te(this,"y");Te(this,"active",!1);Te(this,"options");Te(this,"$animations")}tooltipPosition(e){const{x:r,y:i}=this.getProps(["x","y"],e);return{x:r,y:i}}hasValue(){return Eu(this.x)&&Eu(this.y)}getProps(e,r){const i=this.$animations;if(!r||!i)return this;const s={};return e.forEach(o=>{s[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),s}},Te(jb,"defaults",{}),Te(jb,"defaultRoutes"),jb);function QTe(n,e){const r=n.options.ticks,i=JTe(n),s=Math.min(r.maxTicksLimit||i,i),o=r.major.enabled?ePe(e):[],a=o.length,l=o[0],c=o[a-1],u=[];if(a>s)return tPe(e,u,o,a/s),u;const h=ZTe(o,e,s);if(a>0){let d,f;const p=a>1?Math.round((c-l)/(a-1)):null;for(xb(e,u,h,dn(p)?0:l-p,l),d=0,f=a-1;d<f;d++)xb(e,u,h,o[d],o[d+1]);return xb(e,u,h,c,dn(p)?e.length:c+p),u}return xb(e,u,h),u}function JTe(n){const e=n.options.offset,r=n._tickSize(),i=n._length/r+(e?0:1),s=n._maxLength/r;return Math.floor(Math.min(i,s))}function ZTe(n,e,r){const i=nPe(n),s=e.length/r;if(!i)return Math.max(s,1);const o=H2e(i);for(let a=0,l=o.length-1;a<l;a++){const c=o[a];if(c>s)return c}return Math.max(s,1)}function ePe(n){const e=[];let r,i;for(r=0,i=n.length;r<i;r++)n[r].major&&e.push(r);return e}function tPe(n,e,r,i){let s=0,o=r[0],a;for(i=Math.ceil(i),a=0;a<n.length;a++)a===o&&(e.push(n[a]),s++,o=r[s*i])}function xb(n,e,r,i,s){const o=Ct(i,0),a=Math.min(Ct(s,n.length),n.length);let l=0,c,u,h;for(r=Math.ceil(r),s&&(c=s-i,r=c/Math.floor(c/r)),h=o;h<0;)l++,h=Math.round(o+l*r);for(u=Math.max(o,0);u<a;u++)u===h&&(e.push(n[u]),l++,h=Math.round(o+l*r))}function nPe(n){const e=n.length;let r,i;if(e<2)return!1;for(i=n[0],r=1;r<e;++r)if(n[r]-n[r-1]!==i)return!1;return i}const rPe=n=>n==="left"?"right":n==="right"?"left":n,x6=(n,e,r)=>e==="top"||e==="left"?n[e]+r:n[e]-r,w6=(n,e)=>Math.min(e||n,n);function _6(n,e){const r=[],i=n.length/e,s=n.length;let o=0;for(;o<s;o+=i)r.push(n[Math.floor(o)]);return r}function iPe(n,e,r){const i=n.ticks.length,s=Math.min(e,i-1),o=n._startPixel,a=n._endPixel,l=1e-6;let c=n.getPixelForTick(s),u;if(!(r&&(i===1?u=Math.max(c-o,a-c):e===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(s-1))/2,c+=s<e?u:-u,c<o-l||c>a+l)))return c}function sPe(n,e){Xt(n,r=>{const i=r.gc,s=i.length/2;let o;if(s>e){for(o=0;o<s;++o)delete r.data[i[o]];i.splice(0,s)}})}function Pp(n){return n.drawTicks?n.tickLength:0}function S6(n,e){if(!n.display)return 0;const r=tr(n.font,e),i=Nr(n.padding);return(Cn(n.text)?n.text.length:1)*r.lineHeight+i.height}function oPe(n,e){return qu(n,{scale:e,type:"scale"})}function aPe(n,e,r){return qu(n,{tick:r,index:e,type:"tick"})}function lPe(n,e,r){let i=sN(n);return(r&&e!=="right"||!r&&e==="right")&&(i=rPe(i)),i}function cPe(n,e,r,i){const{top:s,left:o,bottom:a,right:l,chart:c}=n,{chartArea:u,scales:h}=c;let d=0,f,p,g;const b=a-s,y=l-o;if(n.isHorizontal()){if(p=Dr(i,o,l),Tt(r)){const v=Object.keys(r)[0],w=r[v];g=h[v].getPixelForValue(w)+b-e}else r==="center"?g=(u.bottom+u.top)/2+b-e:g=x6(n,r,e);f=l-o}else{if(Tt(r)){const v=Object.keys(r)[0],w=r[v];p=h[v].getPixelForValue(w)-y+e}else r==="center"?p=(u.left+u.right)/2-y+e:p=x6(n,r,e);g=Dr(i,a,s),d=r==="left"?-wr:wr}return{titleX:p,titleY:g,maxWidth:f,rotation:d}}class Rf extends Si{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:i,_suggestedMax:s}=this;return e=oo(e,Number.POSITIVE_INFINITY),r=oo(r,Number.NEGATIVE_INFINITY),i=oo(i,Number.POSITIVE_INFINITY),s=oo(s,Number.NEGATIVE_INFINITY),{min:oo(e,i),max:oo(r,s),minDefined:xi(e),maxDefined:xi(r)}}getMinMax(e){let{min:r,max:i,minDefined:s,maxDefined:o}=this.getUserBounds(),a;if(s&&o)return{min:r,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)a=l[c].controller.getMinMax(this,e),s||(r=Math.min(r,a.min)),o||(i=Math.max(i,a.max));return r=o&&r>i?i:r,i=s&&r>i?r:i,{min:oo(r,oo(i,r)),max:oo(i,oo(r,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){en(this.options.beforeUpdate,[this])}update(e,r,i){const{beginAtZero:s,grace:o,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=CEe(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?_6(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=QTe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,i;this.isHorizontal()?(r=this.left,i=this.right):(r=this.top,i=this.bottom,e=!e),this._startPixel=r,this._endPixel=i,this._reversePixels=e,this._length=i-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){en(this.options.afterUpdate,[this])}beforeSetDimensions(){en(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){en(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),en(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){en(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let i,s,o;for(i=0,s=e.length;i<s;i++)o=e[i],o.label=en(r.callback,[o.value,i,e],this)}afterTickToLabelConversion(){en(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){en(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,i=w6(this.ticks.length,e.ticks.maxTicksLimit),s=r.minRotation||0,o=r.maxRotation;let a=s,l,c,u;if(!this._isVisible()||!r.display||s>=o||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,p=ps(this.chart.width-d,0,this.maxWidth);l=e.offset?this.maxWidth/i:p/(i-1),d+6>l&&(l=p/(i-(e.offset?.5:1)),c=this.maxHeight-Pp(e.grid)-r.padding-S6(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),a=Mee(Math.min(Math.asin(ps((h.highest.height+6)/l,-1,1)),Math.asin(ps(c/u,-1,1))-Math.asin(ps(f/u,-1,1)))),a=Math.max(s,Math.min(o,a))),this.labelRotation=a}afterCalculateLabelRotation(){en(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){en(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:i,title:s,grid:o}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=S6(s,r.options.font);if(l?(e.width=this.maxWidth,e.height=Pp(o)+c):(e.height=this.maxHeight,e.width=Pp(o)+c),i.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),p=i.padding*2,g=ur(this.labelRotation),b=Math.cos(g),y=Math.sin(g);if(l){const v=i.mirror?0:y*d.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+v+p)}else{const v=i.mirror?0:b*d.width+y*f.height;e.width=Math.min(this.maxWidth,e.width+v+p)}this._calculatePadding(u,h,y,b)}}this._handleMargins(),l?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,i,s){const{ticks:{align:o,padding:a},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?u?(f=s*e.width,p=i*r.height):(f=i*e.height,p=s*r.width):o==="start"?p=r.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,p=r.width/2),this.paddingLeft=Math.max((f-h+a)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-d+a)*this.width/(this.width-d),0)}else{let h=r.height/2,d=e.height/2;o==="start"?(h=0,d=e.height):o==="end"&&(h=r.height,d=0),this.paddingTop=h+a,this.paddingBottom=d+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){en(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,i;for(r=0,i=e.length;r<i;r++)dn(e[r].label)&&(e.splice(r,1),i--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let i=this.ticks;r<i.length&&(i=_6(i,r)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,i){const{ctx:s,_longestTextCache:o}=this,a=[],l=[],c=Math.floor(r/w6(r,i));let u=0,h=0,d,f,p,g,b,y,v,w,k,_,S;for(d=0;d<r;d+=c){if(g=e[d].label,b=this._resolveTickFontOptions(d),s.font=y=b.string,v=o[y]=o[y]||{data:{},gc:[]},w=b.lineHeight,k=_=0,!dn(g)&&!Cn(g))k=Z8(s,v.data,v.gc,k,g),_=w;else if(Cn(g))for(f=0,p=g.length;f<p;++f)S=g[f],!dn(S)&&!Cn(S)&&(k=Z8(s,v.data,v.gc,k,S),_+=w);a.push(k),l.push(_),u=Math.max(k,u),h=Math.max(_,h)}sPe(o,r);const C=a.indexOf(u),E=l.indexOf(h),P=O=>({width:a[O]||0,height:l[O]||0});return{first:P(0),last:P(r-1),widest:P(C),highest:P(E),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return X2e(this._alignToPixels?gc(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const i=r[e];return i.$context||(i.$context=aPe(this.getContext(),e,i))}return this.$context||(this.$context=oPe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=ur(this.labelRotation),i=Math.abs(Math.cos(r)),s=Math.abs(Math.sin(r)),o=this._getLabelSizes(),a=e.autoSkipPadding||0,l=o?o.widest.width+a:0,c=o?o.highest.height+a:0;return this.isHorizontal()?c*i>l*s?l/i:c/s:c*s<l*i?c/i:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,i=this.chart,s=this.options,{grid:o,position:a,border:l}=s,c=o.offset,u=this.isHorizontal(),d=this.ticks.length+(c?1:0),f=Pp(o),p=[],g=l.setContext(this.getContext()),b=g.display?g.width:0,y=b/2,v=function(z){return gc(i,z,b)};let w,k,_,S,C,E,P,O,M,R,j,B;if(a==="top")w=v(this.bottom),E=this.bottom-f,O=w-y,R=v(e.top)+y,B=e.bottom;else if(a==="bottom")w=v(this.top),R=e.top,B=v(e.bottom)-y,E=w+y,O=this.top+f;else if(a==="left")w=v(this.right),C=this.right-f,P=w-y,M=v(e.left)+y,j=e.right;else if(a==="right")w=v(this.left),M=e.left,j=v(e.right)-y,C=w+y,P=this.left+f;else if(r==="x"){if(a==="center")w=v((e.top+e.bottom)/2+.5);else if(Tt(a)){const z=Object.keys(a)[0],W=a[z];w=v(this.chart.scales[z].getPixelForValue(W))}R=e.top,B=e.bottom,E=w+y,O=E+f}else if(r==="y"){if(a==="center")w=v((e.left+e.right)/2);else if(Tt(a)){const z=Object.keys(a)[0],W=a[z];w=v(this.chart.scales[z].getPixelForValue(W))}C=w-y,P=C-f,M=e.left,j=e.right}const L=Ct(s.ticks.maxTicksLimit,d),$=Math.max(1,Math.ceil(d/L));for(k=0;k<d;k+=$){const z=this.getContext(k),W=o.setContext(z),q=l.setContext(z),V=W.lineWidth,F=W.color,G=q.dash||[],H=q.dashOffset,A=W.tickWidth,Q=W.tickColor,J=W.tickBorderDash||[],K=W.tickBorderDashOffset;_=iPe(this,k,c),_!==void 0&&(S=gc(i,_,V),u?C=P=M=j=S:E=O=R=B=S,p.push({tx1:C,ty1:E,tx2:P,ty2:O,x1:M,y1:R,x2:j,y2:B,width:V,color:F,borderDash:G,borderDashOffset:H,tickWidth:A,tickColor:Q,tickBorderDash:J,tickBorderDashOffset:K}))}return this._ticksLength=d,this._borderValue=w,p}_computeLabelItems(e){const r=this.axis,i=this.options,{position:s,ticks:o}=i,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:h,mirror:d}=o,f=Pp(i.grid),p=f+h,g=d?-h:p,b=-ur(this.labelRotation),y=[];let v,w,k,_,S,C,E,P,O,M,R,j,B="middle";if(s==="top")C=this.bottom-g,E=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+g,E=this._getXAxisLabelAlignment();else if(s==="left"){const $=this._getYAxisLabelAlignment(f);E=$.textAlign,S=$.x}else if(s==="right"){const $=this._getYAxisLabelAlignment(f);E=$.textAlign,S=$.x}else if(r==="x"){if(s==="center")C=(e.top+e.bottom)/2+p;else if(Tt(s)){const $=Object.keys(s)[0],z=s[$];C=this.chart.scales[$].getPixelForValue(z)+p}E=this._getXAxisLabelAlignment()}else if(r==="y"){if(s==="center")S=(e.left+e.right)/2-p;else if(Tt(s)){const $=Object.keys(s)[0],z=s[$];S=this.chart.scales[$].getPixelForValue(z)}E=this._getYAxisLabelAlignment(f).textAlign}r==="y"&&(c==="start"?B="top":c==="end"&&(B="bottom"));const L=this._getLabelSizes();for(v=0,w=l.length;v<w;++v){k=l[v],_=k.label;const $=o.setContext(this.getContext(v));P=this.getPixelForTick(v)+o.labelOffset,O=this._resolveTickFontOptions(v),M=O.lineHeight,R=Cn(_)?_.length:1;const z=R/2,W=$.color,q=$.textStrokeColor,V=$.textStrokeWidth;let F=E;a?(S=P,E==="inner"&&(v===w-1?F=this.options.reverse?"left":"right":v===0?F=this.options.reverse?"right":"left":F="center"),s==="top"?u==="near"||b!==0?j=-R*M+M/2:u==="center"?j=-L.highest.height/2-z*M+M:j=-L.highest.height+M/2:u==="near"||b!==0?j=M/2:u==="center"?j=L.highest.height/2-z*M:j=L.highest.height-R*M,d&&(j*=-1),b!==0&&!$.showLabelBackdrop&&(S+=M/2*Math.sin(b))):(C=P,j=(1-R)*M/2);let G;if($.showLabelBackdrop){const H=Nr($.backdropPadding),A=L.heights[v],Q=L.widths[v];let J=j-H.top,K=0-H.left;switch(B){case"middle":J-=A/2;break;case"bottom":J-=A;break}switch(E){case"center":K-=Q/2;break;case"right":K-=Q;break;case"inner":v===w-1?K-=Q:v>0&&(K-=Q/2);break}G={left:K,top:J,width:Q+H.width,height:A+H.height,color:$.backdropColor}}y.push({label:_,font:O,textOffset:j,options:{rotation:b,color:W,strokeColor:q,strokeWidth:V,textAlign:F,textBaseline:B,translation:[S,C],backdrop:G}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-ur(this.labelRotation))return e==="top"?"left":"right";let s="center";return r.align==="start"?s="left":r.align==="end"?s="right":r.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:i,mirror:s,padding:o}}=this.options,a=this._getLabelSizes(),l=e+o,c=a.widest.width;let u,h;return r==="left"?s?(h=this.right+o,i==="near"?u="left":i==="center"?(u="center",h+=c/2):(u="right",h+=c)):(h=this.right-l,i==="near"?u="right":i==="center"?(u="center",h-=c/2):(u="left",h=this.left)):r==="right"?s?(h=this.left+o,i==="near"?u="right":i==="center"?(u="center",h-=c/2):(u="left",h-=c)):(h=this.left+l,i==="near"?u="left":i==="center"?(u="center",h+=c/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:i,top:s,width:o,height:a}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(i,s,o,a),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const s=this.ticks.findIndex(o=>o.value===e);return s>=0?r.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const r=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,a;const l=(c,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(r.display)for(o=0,a=s.length;o<a;++o){const c=s[o];r.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:i,grid:s}}=this,o=i.setContext(this.getContext()),a=i.display?o.width:0;if(!a)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=gc(e,this.left,a)-a/2,h=gc(e,this.right,l)+l/2,d=f=c):(d=gc(e,this.top,a)-a/2,f=gc(e,this.bottom,l)+l/2,u=h=c),r.save(),r.lineWidth=o.width,r.strokeStyle=o.color,r.beginPath(),r.moveTo(u,d),r.lineTo(h,f),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&o1(i,s);const o=this.getLabelItems(e);for(const a of o){const l=a.options,c=a.font,u=a.label,h=a.textOffset;Fg(i,u,0,h,c,l)}s&&a1(i)}drawTitle(){const{ctx:e,options:{position:r,title:i,reverse:s}}=this;if(!i.display)return;const o=tr(i.font),a=Nr(i.padding),l=i.align;let c=o.lineHeight/2;r==="bottom"||r==="center"||Tt(r)?(c+=a.bottom,Cn(i.text)&&(c+=o.lineHeight*(i.text.length-1))):c+=a.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=cPe(this,c,r,l);Fg(e,i.text,0,0,o,{color:i.color,maxWidth:d,rotation:f,textAlign:lPe(l,r,s),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,i=Ct(e.grid&&e.grid.z,-1),s=Ct(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Rf.prototype.draw?[{z:r,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:r,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let o,a;for(o=0,a=r.length;o<a;++o){const l=r[o];l[i]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return tr(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class wb{constructor(e,r,i){this.type=e,this.scope=r,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let i;hPe(r)&&(i=this.register(r));const s=this.items,o=e.id,a=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,uPe(e,a,i),this.override&&Nn.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const r=this.items,i=e.id,s=this.scope;i in r&&delete r[i],s&&i in Nn[s]&&(delete Nn[s][i],this.override&&delete Tu[i])}}function uPe(n,e,r){const i=Ng(Object.create(null),[r?Nn.get(r):{},Nn.get(e),n.defaults]);Nn.set(e,i),n.defaultRoutes&&dPe(e,n.defaultRoutes),n.descriptors&&Nn.describe(e,n.descriptors)}function dPe(n,e){Object.keys(e).forEach(r=>{const i=r.split("."),s=i.pop(),o=[n].concat(i).join("."),a=e[r].split("."),l=a.pop(),c=a.join(".");Nn.route(o,s,c,l)})}function hPe(n){return"id"in n&&"defaults"in n}class fPe{constructor(){this.controllers=new wb(sh,"datasets",!0),this.elements=new wb(Si,"elements"),this.plugins=new wb(Object,"plugins"),this.scales=new wb(Rf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,i){[...r].forEach(s=>{const o=i||this._getRegistryForType(s);i||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):Xt(s,a=>{const l=i||this._getRegistryForType(a);this._exec(e,l,a)})})}_exec(e,r,i){const s=nN(e);en(i["before"+s],[],i),r[e](i),en(i["after"+s],[],i)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const i=this._typedRegistries[r];if(i.isForType(e))return i}return this.plugins}_get(e,r,i){const s=r.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var ho=new fPe;class pPe{constructor(){this._init=void 0}notify(e,r,i,s){if(r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=s?this._descriptors(e).filter(s):this._descriptors(e),a=this._notify(o,e,r,i);return r==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,r,i,s){s=s||{};for(const o of e){const a=o.plugin,l=a[i],c=[r,s,o.options];if(en(l,c,a)===!1&&s.cancelable)return!1}return!0}invalidate(){dn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const i=e&&e.config,s=Ct(i.options&&i.options.plugins,{}),o=mPe(i);return s===!1&&!r?[]:vPe(e,o,s,r)}_notifyStateChanges(e){const r=this._oldCache||[],i=this._cache,s=(o,a)=>o.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(s(r,i),e,"stop"),this._notify(s(i,r),e,"start")}}function mPe(n){const e={},r=[],i=Object.keys(ho.plugins.items);for(let o=0;o<i.length;o++)r.push(ho.getPlugin(i[o]));const s=n.plugins||[];for(let o=0;o<s.length;o++){const a=s[o];r.indexOf(a)===-1&&(r.push(a),e[a.id]=!0)}return{plugins:r,localIds:e}}function gPe(n,e){return!e&&n===!1?null:n===!0?{}:n}function vPe(n,{plugins:e,localIds:r},i,s){const o=[],a=n.getContext();for(const l of e){const c=l.id,u=gPe(i[c],s);u!==null&&o.push({plugin:l,options:bPe(n.config,{plugin:l,local:r[c]},u,a)})}return o}function bPe(n,{plugin:e,local:r},i,s){const o=n.pluginScopeKeys(e),a=n.getOptionScopes(i,o);return r&&e.defaults&&a.push(e.defaults),n.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function IO(n,e){const r=Nn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function yPe(n,e){let r=n;return n==="_index_"?r=e:n==="_value_"&&(r=e==="x"?"y":"x"),r}function xPe(n,e){return n===e?"_index_":"_value_"}function k6(n){if(n==="x"||n==="y"||n==="r")return n}function wPe(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function RO(n,...e){if(k6(n))return n;for(const r of e){const i=r.axis||wPe(r.position)||n.length>1&&k6(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function C6(n,e,r){if(r[e+"AxisID"]===n)return{axis:e}}function _Pe(n,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(r.length)return C6(n,"x",r[0])||C6(n,"y",r[0])}return{}}function SPe(n,e){const r=Tu[n.type]||{scales:{}},i=e.scales||{},s=IO(n.type,e),o=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!Tt(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=RO(a,l,_Pe(a,n),Nn.scales[l.type]),u=xPe(c,s),h=r.scales||{};o[a]=Pm(Object.create(null),[{axis:c},l,h[c],h[u]])}),n.data.datasets.forEach(a=>{const l=a.type||n.type,c=a.indexAxis||IO(l,e),h=(Tu[l]||{}).scales||{};Object.keys(h).forEach(d=>{const f=yPe(d,c),p=a[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),Pm(o[p],[{axis:f},i[p],h[d]])})}),Object.keys(o).forEach(a=>{const l=o[a];Pm(l,[Nn.scales[l.type],Nn.scale])}),o}function Xee(n){const e=n.options||(n.options={});e.plugins=Ct(e.plugins,{}),e.scales=SPe(n,e)}function Qee(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function kPe(n){return n=n||{},n.data=Qee(n.data),Xee(n),n}const E6=new Map,Jee=new Set;function _b(n,e){let r=E6.get(n);return r||(r=e(),E6.set(n,r),Jee.add(r)),r}const Mp=(n,e,r)=>{const i=jg(e,r);i!==void 0&&n.add(i)};class CPe{constructor(e){this._config=kPe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Qee(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Xee(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return _b(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return _b(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return _b(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,i=this.type;return _b(`${i}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const i=this._scopeCache;let s=i.get(e);return(!s||r)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,r,i){const{options:s,type:o}=this,a=this._cachedScopes(e,i),l=a.get(r);if(l)return l;const c=new Set;r.forEach(h=>{e&&(c.add(e),h.forEach(d=>Mp(c,e,d))),h.forEach(d=>Mp(c,s,d)),h.forEach(d=>Mp(c,Tu[o]||{},d)),h.forEach(d=>Mp(c,Nn,d)),h.forEach(d=>Mp(c,DO,d))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),Jee.has(r)&&a.set(r,u),u}chartOptionScopes(){const{options:e,type:r}=this;return[e,Tu[r]||{},Nn.datasets[r]||{},{type:r},Nn,DO]}resolveNamedOptions(e,r,i,s=[""]){const o={$shared:!0},{resolver:a,subPrefixes:l}=T6(this._resolverCache,e,s);let c=a;if(TPe(a,r)){o.$shared=!1,i=bi(i)?i():i;const u=this.createResolver(e,i,l);c=cf(a,i,u)}for(const u of r)o[u]=c[u];return o}createResolver(e,r,i=[""],s){const{resolver:o}=T6(this._resolverCache,e,i);return Tt(r)?cf(o,r,void 0,s):o}}function T6(n,e,r){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=r.join();let o=i.get(s);return o||(o={resolver:lN(e,r),subPrefixes:r.filter(l=>!l.toLowerCase().includes("hover"))},i.set(s,o)),o}const EPe=n=>Tt(n)&&Object.getOwnPropertyNames(n).some(e=>bi(n[e]));function TPe(n,e){const{isScriptable:r,isIndexable:i}=jee(n);for(const s of e){const o=r(s),a=i(s),l=(a||o)&&n[s];if(o&&(bi(l)||EPe(l))||a&&Cn(l))return!0}return!1}var PPe="4.5.1";const MPe=["top","bottom","left","right","chartArea"];function P6(n,e){return n==="top"||n==="bottom"||MPe.indexOf(n)===-1&&e==="x"}function M6(n,e){return function(r,i){return r[n]===i[n]?r[e]-i[e]:r[n]-i[n]}}function D6(n){const e=n.chart,r=e.options.animation;e.notifyPlugins("afterRender"),en(r&&r.onComplete,[n],e)}function DPe(n){const e=n.chart,r=e.options.animation;en(r&&r.onProgress,[n],e)}function Zee(n){return dN()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const vy={},O6=n=>{const e=Zee(n);return Object.values(vy).filter(r=>r.canvas===e).pop()};function OPe(n,e,r){const i=Object.keys(n);for(const s of i){const o=+s;if(o>=e){const a=n[s];delete n[s],(r>0||o>e)&&(n[o+r]=a)}}}function IPe(n,e,r,i){return!r||n.type==="mouseout"?null:i?e:n}var nl;let au=(nl=class{static register(...e){ho.add(...e),I6()}static unregister(...e){ho.remove(...e),I6()}constructor(e,r){const i=this.config=new CPe(r),s=Zee(e),o=O6(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||XTe(s)),this.platform.updateConfig(i);const l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,h=c&&c.width;if(this.id=L2e(),this.ctx=l,this.canvas=c,this.width=h,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new pPe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=tEe(d=>this.update(d),a.resizeDelay||0),this._dataChanges=[],vy[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Jo.listen(this,"complete",D6),Jo.listen(this,"progress",DPe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return dn(e)?r&&o?o:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ho}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():r6(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return e6(this.canvas,this.ctx),this}stop(){return Jo.stop(this),this}resize(e,r){Jo.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,r,o),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,r6(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),en(i.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Xt(r,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,r=e.scales,i=this.scales,s=Object.keys(i).reduce((a,l)=>(a[l]=!1,a),{});let o=[];r&&(o=o.concat(Object.keys(r).map(a=>{const l=r[a],c=RO(a,l),u=c==="r",h=c==="x";return{options:l,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Xt(o,a=>{const l=a.options,c=l.id,u=RO(c,l),h=Ct(l.type,a.dtype);(l.position===void 0||P6(l.position,u)!==P6(a.dposition))&&(l.position=a.dposition),s[c]=!0;let d=null;if(c in i&&i[c].type===h)d=i[c];else{const f=ho.getScale(h);d=new f({id:c,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(l,e)}),Xt(s,(a,l)=>{a||delete i[l]}),Xt(i,a=>{ms.configure(this,a,a.options),ms.addBox(this,a)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,i=e.length;if(e.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);e.splice(r,i-r)}this._sortedMetasets=e.slice(0).sort(M6("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((i,s)=>{r.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){const o=r[i];let a=this.getDatasetMeta(i);const l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=l,a.indexAxis=o.indexAxis||IO(l,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const c=ho.getController(l),{datasetElementType:u,dataElementType:h}=Nn.datasets[l];Object.assign(c,{dataElementType:ho.getElement(h),datasetElementType:u&&ho.getElement(u)}),a.controller=new c(this,i),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Xt(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!s&&o.indexOf(d)===-1;d.buildOrUpdateElements(f),a=Math.max(+d.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||Xt(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(M6("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Xt(this.scales,e=>{ms.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!H8(r,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:o}of r){const a=i==="_removeElements"?-o:o;OPe(e,s,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,i=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!H8(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ms.update(this,this.width,this.height,e);const r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],Xt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,bi(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Jo.has(this)?this.attached&&!Jo.running(this)&&Jo.start(this):(this.draw(),D6({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,i=[];let s,o;for(s=0,o=r.length;s<o;++s){const a=r[s];(!e||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=lTe(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&o1(r,s),e.controller.draw(),s&&a1(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Lg(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,i,s){const o=MTe.modes[r];return typeof o=="function"?o(this,e,i,s):[]}getDatasetMeta(e){const r=this.data.datasets[e],i=this._metasets;let s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=qu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(e,r){const i=this.getDatasetMeta(e);i.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,i){const s=i?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,s);Ui(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),a.update(o,{visible:i}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),Jo.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),e6(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete vy[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),e[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};Xt(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,i=(c,u)=>{r.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(r.removeEventListener(this,c,u),delete e[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{s("attach",l),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",l)},r.isAttached(this.canvas)?l():a()}unbindEvents(){Xt(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},Xt(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,i){const s=i?"set":"remove";let o,a,l,c;for(r==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],i=e.map(({datasetIndex:o,index:a})=>{const l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!Tx(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(e,r,i){return this._plugins.notify(this,e,r,i)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,i){const s=this.options.hover,o=(c,u)=>c.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),a=o(r,e),l=i?e:o(e,r);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,r){const i={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const o=this._handleEvent(e,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(e,r,i){const{_active:s=[],options:o}=this,a=r,l=this._getActiveElements(e,s,i,a),c=q2e(e),u=IPe(e,this._lastEvent,i,c);i&&(this._lastEvent=null,en(o.onHover,[e,l,this],this),c&&en(o.onClick,[e,l,this],this));const h=!Tx(l,s);return(h||r)&&(this._active=l,this._updateHoverStyles(l,s,r)),this._lastEvent=u,h}_getActiveElements(e,r,i,s){if(e.type==="mouseout")return[];if(!i)return r;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}},Te(nl,"defaults",Nn),Te(nl,"instances",vy),Te(nl,"overrides",Tu),Te(nl,"registry",ho),Te(nl,"version",PPe),Te(nl,"getChart",O6),nl);function I6(){return Xt(au.instances,n=>n._plugins.invalidate())}function ete(n,e,r=e){n.lineCap=Ct(r.borderCapStyle,e.borderCapStyle),n.setLineDash(Ct(r.borderDash,e.borderDash)),n.lineDashOffset=Ct(r.borderDashOffset,e.borderDashOffset),n.lineJoin=Ct(r.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Ct(r.borderWidth,e.borderWidth),n.strokeStyle=Ct(r.borderColor,e.borderColor)}function RPe(n,e,r){n.lineTo(r.x,r.y)}function APe(n){return n.stepped?mEe:n.tension||n.cubicInterpolationMode==="monotone"?gEe:RPe}function tte(n,e,r={}){const i=n.length,{start:s=0,end:o=i-1}=r,{start:a,end:l}=e,c=Math.max(s,a),u=Math.min(o,l),h=s<a&&o<a||s>l&&o>l;return{count:i,start:c,loop:e.loop,ilen:u<c&&!h?i+u-c:u-c}}function NPe(n,e,r,i){const{points:s,options:o}=e,{count:a,start:l,loop:c,ilen:u}=tte(s,r,i),h=APe(o);let{move:d=!0,reverse:f}=i||{},p,g,b;for(p=0;p<=u;++p)g=s[(l+(f?u-p:p))%a],!g.skip&&(d?(n.moveTo(g.x,g.y),d=!1):h(n,b,g,f,o.stepped),b=g);return c&&(g=s[(l+(f?u:0))%a],h(n,b,g,f,o.stepped)),!!c}function jPe(n,e,r,i){const s=e.points,{count:o,start:a,ilen:l}=tte(s,r,i),{move:c=!0,reverse:u}=i||{};let h=0,d=0,f,p,g,b,y,v;const w=_=>(a+(u?l-_:_))%o,k=()=>{b!==y&&(n.lineTo(h,y),n.lineTo(h,b),n.lineTo(h,v))};for(c&&(p=s[w(0)],n.moveTo(p.x,p.y)),f=0;f<=l;++f){if(p=s[w(f)],p.skip)continue;const _=p.x,S=p.y,C=_|0;C===g?(S<b?b=S:S>y&&(y=S),h=(d*h+_)/++d):(k(),n.lineTo(_,S),g=C,d=0,b=y=S),v=S}k()}function AO(n){const e=n.options,r=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?jPe:NPe}function LPe(n){return n.stepped?KEe:n.tension||n.cubicInterpolationMode==="monotone"?XEe:Cc}function FPe(n,e,r,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,r,i)&&s.closePath()),ete(n,e.options),n.stroke(s)}function $Pe(n,e,r,i){const{segments:s,options:o}=e,a=AO(e);for(const l of s)ete(n,o,l.style),n.beginPath(),a(n,e,l,{start:r,end:r+i-1})&&n.closePath(),n.stroke()}const zPe=typeof Path2D=="function";function BPe(n,e,r,i){zPe&&!e.options.segment?FPe(n,e,r,i):$Pe(n,e,r,i)}class im extends Si{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;BEe(this._points,i,e,s,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=iTe(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,i=e.length;return i&&r[e[i-1].end]}interpolate(e,r){const i=this.options,s=e[r],o=this.points,a=tTe(this,{property:r,start:s,end:s});if(!a.length)return;const l=[],c=LPe(i);let u,h;for(u=0,h=a.length;u<h;++u){const{start:d,end:f}=a[u],p=o[d],g=o[f];if(p===g){l.push(p);continue}const b=Math.abs((s-p[r])/(g[r]-p[r])),y=c(p,g,b,i.stepped);y[r]=e[r],l.push(y)}return l.length===1?l[0]:l}pathSegment(e,r,i){return AO(this)(e,this,r,i)}path(e,r,i){const s=this.segments,o=AO(this);let a=this._loop;r=r||0,i=i||this.points.length-r;for(const l of s)a&=o(e,this,l,{start:r,end:r+i-1});return!!a}draw(e,r,i,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),BPe(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Te(im,"id","line"),Te(im,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Te(im,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Te(im,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function R6(n,e,r,i){const s=n.options,{[r]:o}=n.getProps([r],i);return Math.abs(e-o)<s.radius+s.hitRadius}class by extends Si{constructor(r){super();Te(this,"parsed");Te(this,"skip");Te(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,i,s){const o=this.options,{x:a,y:l}=this.getProps(["x","y"],s);return Math.pow(r-a,2)+Math.pow(i-l,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(r,i){return R6(this,r,"x",i)}inYRange(r,i){return R6(this,r,"y",i)}getCenterPoint(r){const{x:i,y:s}=this.getProps(["x","y"],r);return{x:i,y:s}}size(r){r=r||this.options||{};let i=r.radius||0;i=Math.max(i,i&&r.hoverRadius||0);const s=i&&r.borderWidth||0;return(i+s)*2}draw(r,i){const s=this.options;this.skip||s.radius<.1||!Lg(this,i,this.size(s)/2)||(r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.fillStyle=s.backgroundColor,OO(r,s,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}Te(by,"id","point"),Te(by,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Te(by,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const A6=(n,e)=>{let{boxHeight:r=e,boxWidth:i=e}=n;return n.usePointStyle&&(r=Math.min(r,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:r,itemHeight:Math.max(e,r)}},UPe=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;let N6=class extends Si{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,i){this.maxWidth=e,this.maxHeight=r,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=en(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(i=>e.filter(i,this.chart.data))),e.sort&&(r=r.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=tr(i.font),o=s.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=A6(i,o);let u,h;r.font=s.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(a,o,l,c)+10):(h=this.maxHeight,u=this._fitCols(a,s,l,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,r,i,s){const{ctx:o,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],h=s+l;let d=e;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-h;return this.legendItems.forEach((g,b)=>{const y=i+r/2+o.measureText(g.text).width;(b===0||u[u.length-1]+y+2*l>a)&&(d+=h,u[u.length-(b>0?0:1)]=0,p+=h,f++),c[b]={left:0,top:p,row:f,width:y,height:s},u[u.length-1]+=y+l}),d}_fitCols(e,r,i,s){const{ctx:o,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],h=a-e;let d=l,f=0,p=0,g=0,b=0;return this.legendItems.forEach((y,v)=>{const{itemWidth:w,itemHeight:k}=qPe(i,r,o,y,s);v>0&&p+k+2*l>h&&(d+=f+l,u.push({width:f,height:p}),g+=f+l,b++,f=p=0),c[v]={left:g,top:p,col:b,width:w,height:k},f=Math.max(f,w),p+=k+l}),d+=f,u.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:i,labels:{padding:s},rtl:o}}=this,a=ih(o,this.left,this.width);if(this.isHorizontal()){let l=0,c=Dr(i,this.left+s,this.right-this.lineWidths[l]);for(const u of r)l!==u.row&&(l=u.row,c=Dr(i,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+e+s,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+s}else{let l=0,c=Dr(i,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const u of r)u.col!==l&&(l=u.col,c=Dr(i,this.top+e+s,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+s,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;o1(e,this),this._draw(),a1(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:i,ctx:s}=this,{align:o,labels:a}=e,l=Nn.color,c=ih(e.rtl,this.left,this.width),u=tr(a.font),{padding:h}=a,d=u.size,f=d/2;let p;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:g,boxHeight:b,itemHeight:y}=A6(a,d),v=function(C,E,P){if(isNaN(g)||g<=0||isNaN(b)||b<0)return;s.save();const O=Ct(P.lineWidth,1);if(s.fillStyle=Ct(P.fillStyle,l),s.lineCap=Ct(P.lineCap,"butt"),s.lineDashOffset=Ct(P.lineDashOffset,0),s.lineJoin=Ct(P.lineJoin,"miter"),s.lineWidth=O,s.strokeStyle=Ct(P.strokeStyle,l),s.setLineDash(Ct(P.lineDash,[])),a.usePointStyle){const M={radius:b*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:O},R=c.xPlus(C,g/2),j=E+f;Aee(s,M,R,j,a.pointStyleWidth&&g)}else{const M=E+Math.max((d-b)/2,0),R=c.leftForLtr(C,g),j=rh(P.borderRadius);s.beginPath(),Object.values(j).some(B=>B!==0)?Ix(s,{x:R,y:M,w:g,h:b,radius:j}):s.rect(R,M,g,b),s.fill(),O!==0&&s.stroke()}s.restore()},w=function(C,E,P){Fg(s,P.text,C,E+y/2,u,{strikethrough:P.hidden,textAlign:c.textAlign(P.textAlign)})},k=this.isHorizontal(),_=this._computeTitleHeight();k?p={x:Dr(o,this.left+h,this.right-i[0]),y:this.top+h+_,line:0}:p={x:this.left+h,y:Dr(o,this.top+_+h,this.bottom-r[0].height),line:0},Bee(this.ctx,e.textDirection);const S=y+h;this.legendItems.forEach((C,E)=>{s.strokeStyle=C.fontColor,s.fillStyle=C.fontColor;const P=s.measureText(C.text).width,O=c.textAlign(C.textAlign||(C.textAlign=a.textAlign)),M=g+f+P;let R=p.x,j=p.y;c.setWidth(this.width),k?E>0&&R+M+h>this.right&&(j=p.y+=S,p.line++,R=p.x=Dr(o,this.left+h,this.right-i[p.line])):E>0&&j+S>this.bottom&&(R=p.x=R+r[p.line].width+h,p.line++,j=p.y=Dr(o,this.top+_+h,this.bottom-r[p.line].height));const B=c.x(R);if(v(B,j,C),R=nEe(O,R+g+f,k?R+M:this.right,e.rtl),w(c.x(R),j,C),k)p.x+=M+h;else if(typeof C.text!="string"){const L=u.lineHeight;p.y+=nte(C,L)+h}else p.y+=S}),Uee(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,i=tr(r.font),s=Nr(r.padding);if(!r.display)return;const o=ih(e.rtl,this.left,this.width),a=this.ctx,l=r.position,c=i.size/2,u=s.top+c;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=Dr(e.align,d,this.right-f);else{const g=this.columnSizes.reduce((b,y)=>Math.max(b,y.height),0);h=u+Dr(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const p=Dr(l,d,d+f);a.textAlign=o.textAlign(sN(l)),a.textBaseline="middle",a.strokeStyle=r.color,a.fillStyle=r.color,a.font=i.string,Fg(a,r.text,p,h,i)}_computeTitleHeight(){const e=this.options.title,r=tr(e.font),i=Nr(e.padding);return e.display?r.lineHeight+i.height:0}_getLegendItemAt(e,r){let i,s,o;if(tm(e,this.left,this.right)&&tm(r,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(s=o[i],tm(e,s.left,s.left+s.width)&&tm(r,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const r=this.options;if(!VPe(e.type,r))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,o=UPe(s,i);s&&!o&&en(r.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!o&&en(r.onHover,[e,i,this],this)}else i&&en(r.onClick,[e,i,this],this)}};function qPe(n,e,r,i,s){const o=WPe(i,n,e,r),a=HPe(s,i,e.lineHeight);return{itemWidth:o,itemHeight:a}}function WPe(n,e,r,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((o,a)=>o.length>a.length?o:a)),e+r.size/2+i.measureText(s).width}function HPe(n,e,r){let i=n;return typeof e.text!="string"&&(i=nte(e,r)),i}function nte(n,e){const r=n.text?n.text.length:0;return e*r}function VPe(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var YPe={id:"legend",_element:N6,start(n,e,r){const i=n.legend=new N6({ctx:n.ctx,options:r,chart:n});ms.configure(n,i,r),ms.addBox(n,i)},stop(n){ms.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,r){const i=n.legend;ms.configure(n,i,r),i.options=r},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,r){const i=e.datasetIndex,s=r.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:r,pointStyle:i,textAlign:s,color:o,useBorderRadius:a,borderRadius:l}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(r?0:void 0),h=Nr(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:a&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class rte extends Si{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const s=Cn(i.text)?i.text.length:1;this._padding=Nr(i.padding);const o=s*tr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:i,bottom:s,right:o,options:a}=this,l=a.align;let c=0,u,h,d;return this.isHorizontal()?(h=Dr(l,i,o),d=r+e,u=o-i):(a.position==="left"?(h=i+e,d=Dr(l,s,r),c=Vt*-.5):(h=o-e,d=Dr(l,r,s),c=Vt*.5),u=s-r),{titleX:h,titleY:d,maxWidth:u,rotation:c}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const i=tr(r.font),o=i.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(o);Fg(e,r.text,0,0,i,{color:r.color,maxWidth:c,rotation:u,textAlign:sN(r.align),textBaseline:"middle",translation:[a,l]})}}function GPe(n,e){const r=new rte({ctx:n.ctx,options:e,chart:n});ms.configure(n,r,e),ms.addBox(n,r),n.titleBlock=r}var KPe={id:"title",_element:rte,start(n,e,r){GPe(n,r)},stop(n){const e=n.titleBlock;ms.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,r){const i=n.titleBlock;ms.configure(n,i,r),i.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const sm={average(n){if(!n.length)return!1;let e,r,i=new Set,s=0,o=0;for(e=0,r=n.length;e<r;++e){const l=n[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();i.add(c.x),s+=c.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((l,c)=>l+c)/i.size,y:s/o}},nearest(n,e){if(!n.length)return!1;let r=e.x,i=e.y,s=Number.POSITIVE_INFINITY,o,a,l;for(o=0,a=n.length;o<a;++o){const c=n[o].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),h=lf(e,u);h<s&&(s=h,l=c)}}if(l){const c=l.tooltipPosition();r=c.x,i=c.y}return{x:r,y:i}}};function lo(n,e){return e&&(Cn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Zo(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function XPe(n,e){const{element:r,datasetIndex:i,index:s}=e,o=n.getDatasetMeta(i).controller,{label:a,value:l}=o.getLabelAndValue(s);return{chart:n,label:a,parsed:o.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:l,dataset:o.getDataset(),dataIndex:s,datasetIndex:i,element:r}}function j6(n,e){const r=n.chart.ctx,{body:i,footer:s,title:o}=n,{boxWidth:a,boxHeight:l}=e,c=tr(e.bodyFont),u=tr(e.titleFont),h=tr(e.footerFont),d=o.length,f=s.length,p=i.length,g=Nr(e.padding);let b=g.height,y=0,v=i.reduce((_,S)=>_+S.before.length+S.lines.length+S.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,d&&(b+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const _=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;b+=p*_+(v-p)*c.lineHeight+(v-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let w=0;const k=function(_){y=Math.max(y,r.measureText(_).width+w)};return r.save(),r.font=u.string,Xt(n.title,k),r.font=c.string,Xt(n.beforeBody.concat(n.afterBody),k),w=e.displayColors?a+2+e.boxPadding:0,Xt(i,_=>{Xt(_.before,k),Xt(_.lines,k),Xt(_.after,k)}),w=0,r.font=h.string,Xt(n.footer,k),r.restore(),y+=g.width,{width:y,height:b}}function QPe(n,e){const{y:r,height:i}=e;return r<i/2?"top":r>n.height-i/2?"bottom":"center"}function JPe(n,e,r,i){const{x:s,width:o}=i,a=r.caretSize+r.caretPadding;if(n==="left"&&s+o+a>e.width||n==="right"&&s-o-a<0)return!0}function ZPe(n,e,r,i){const{x:s,width:o}=r,{width:a,chartArea:{left:l,right:c}}=n;let u="center";return i==="center"?u=s<=(l+c)/2?"left":"right":s<=o/2?u="left":s>=a-o/2&&(u="right"),JPe(u,n,e,r)&&(u="center"),u}function L6(n,e,r){const i=r.yAlign||e.yAlign||QPe(n,r);return{xAlign:r.xAlign||e.xAlign||ZPe(n,e,r,i),yAlign:i}}function eMe(n,e){let{x:r,width:i}=n;return e==="right"?r-=i:e==="center"&&(r-=i/2),r}function tMe(n,e,r){let{y:i,height:s}=n;return e==="top"?i+=r:e==="bottom"?i-=s+r:i-=s/2,i}function F6(n,e,r,i){const{caretSize:s,caretPadding:o,cornerRadius:a}=n,{xAlign:l,yAlign:c}=r,u=s+o,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=rh(a);let g=eMe(e,l);const b=tMe(e,c,u);return c==="center"?l==="left"?g+=u:l==="right"&&(g-=u):l==="left"?g-=Math.max(h,f)+s:l==="right"&&(g+=Math.max(d,p)+s),{x:ps(g,0,i.width-e.width),y:ps(b,0,i.height-e.height)}}function Sb(n,e,r){const i=Nr(r.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function $6(n){return lo([],Zo(n))}function nMe(n,e,r){return qu(n,{tooltip:e,tooltipItems:r,type:"tooltip"})}function z6(n,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?n.override(r):n}const ite={beforeTitle:Vo,title(n){if(n.length>0){const e=n[0],r=e.chart.data.labels,i=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return r[e.dataIndex]}return""},afterTitle:Vo,beforeBody:Vo,beforeLabel:Vo,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const r=n.formattedValue;return dn(r)||(e+=r),e},labelColor(n){const r=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const r=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Vo,afterBody:Vo,beforeFooter:Vo,footer:Vo,afterFooter:Vo};function ii(n,e,r,i){const s=n[e].call(r,i);return typeof s>"u"?ite[e].call(r,i):s}class NO extends Si{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new fN(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=nMe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:i}=r,s=ii(i,"beforeTitle",this,e),o=ii(i,"title",this,e),a=ii(i,"afterTitle",this,e);let l=[];return l=lo(l,Zo(s)),l=lo(l,Zo(o)),l=lo(l,Zo(a)),l}getBeforeBody(e,r){return $6(ii(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:i}=r,s=[];return Xt(e,o=>{const a={before:[],lines:[],after:[]},l=z6(i,o);lo(a.before,Zo(ii(l,"beforeLabel",this,o))),lo(a.lines,ii(l,"label",this,o)),lo(a.after,Zo(ii(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(e,r){return $6(ii(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:i}=r,s=ii(i,"beforeFooter",this,e),o=ii(i,"footer",this,e),a=ii(i,"afterFooter",this,e);let l=[];return l=lo(l,Zo(s)),l=lo(l,Zo(o)),l=lo(l,Zo(a)),l}_createItems(e){const r=this._active,i=this.chart.data,s=[],o=[],a=[];let l=[],c,u;for(c=0,u=r.length;c<u;++c)l.push(XPe(this.chart,r[c]));return e.filter&&(l=l.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(l=l.sort((h,d)=>e.itemSort(h,d,i))),Xt(l,h=>{const d=z6(e.callbacks,h);s.push(ii(d,"labelColor",this,h)),o.push(ii(d,"labelPointStyle",this,h)),a.push(ii(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,r){const i=this.options.setContext(this.getContext()),s=this._active;let o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const l=sm[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const c=this._size=j6(this,i),u=Object.assign({},l,c),h=L6(this.chart,i,u),d=F6(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:d.x,y:d.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,i,s){const o=this.getCaretPosition(e,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(e,r,i){const{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=i,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:d}=rh(l),{x:f,y:p}=e,{width:g,height:b}=r;let y,v,w,k,_,S;return o==="center"?(_=p+b/2,s==="left"?(y=f,v=y-a,k=_+a,S=_-a):(y=f+g,v=y+a,k=_-a,S=_+a),w=y):(s==="left"?v=f+Math.max(c,h)+a:s==="right"?v=f+g-Math.max(u,d)-a:v=this.caretX,o==="top"?(k=p,_=k-a,y=v-a,w=v+a):(k=p+b,_=k+a,y=v+a,w=v-a),S=k),{x1:y,x2:v,x3:w,y1:k,y2:_,y3:S}}drawTitle(e,r,i){const s=this.title,o=s.length;let a,l,c;if(o){const u=ih(i.rtl,this.x,this.width);for(e.x=Sb(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=tr(i.titleFont),l=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,c=0;c<o;++c)r.fillText(s[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,r,i,s,o){const a=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:u}=o,h=tr(o.bodyFont),d=Sb(this,"left",o),f=s.x(d),p=c<h.lineHeight?(h.lineHeight-c)/2:0,g=r.y+p;if(o.usePointStyle){const b={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=s.leftForLtr(f,u)+u/2,v=g+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,OO(e,b,y,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,OO(e,b,y,v)}else{e.lineWidth=Tt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const b=s.leftForLtr(f,u),y=s.leftForLtr(s.xPlus(f,1),u-2),v=rh(a.borderRadius);Object.values(v).some(w=>w!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Ix(e,{x:b,y:g,w:u,h:c,radius:v}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Ix(e,{x:y,y:g+1,w:u-2,h:c-2,radius:v}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(b,g,u,c),e.strokeRect(b,g,u,c),e.fillStyle=a.backgroundColor,e.fillRect(y,g+1,u-2,c-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,r,i){const{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:h}=i,d=tr(i.bodyFont);let f=d.lineHeight,p=0;const g=ih(i.rtl,this.x,this.width),b=function(P){r.fillText(P,g.x(e.x+p),e.y+f/2),e.y+=f+o},y=g.textAlign(a);let v,w,k,_,S,C,E;for(r.textAlign=a,r.textBaseline="middle",r.font=d.string,e.x=Sb(this,y,i),r.fillStyle=i.bodyColor,Xt(this.beforeBody,b),p=l&&y!=="right"?a==="center"?u/2+h:u+2+h:0,_=0,C=s.length;_<C;++_){for(v=s[_],w=this.labelTextColors[_],r.fillStyle=w,Xt(v.before,b),k=v.lines,l&&k.length&&(this._drawColorBox(r,e,_,g,i),f=Math.max(d.lineHeight,c)),S=0,E=k.length;S<E;++S)b(k[S]),f=d.lineHeight;Xt(v.after,b)}p=0,f=d.lineHeight,Xt(this.afterBody,b),e.y-=o}drawFooter(e,r,i){const s=this.footer,o=s.length;let a,l;if(o){const c=ih(i.rtl,this.x,this.width);for(e.x=Sb(this,i.footerAlign,i),e.y+=i.footerMarginTop,r.textAlign=c.textAlign(i.footerAlign),r.textBaseline="middle",a=tr(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,l=0;l<o;++l)r.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+i.footerSpacing}}drawBackground(e,r,i,s){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:u,height:h}=i,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:g}=rh(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(l+d,c),a==="top"&&this.drawCaret(e,r,i,s),r.lineTo(l+u-f,c),r.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&o==="right"&&this.drawCaret(e,r,i,s),r.lineTo(l+u,c+h-g),r.quadraticCurveTo(l+u,c+h,l+u-g,c+h),a==="bottom"&&this.drawCaret(e,r,i,s),r.lineTo(l+p,c+h),r.quadraticCurveTo(l,c+h,l,c+h-p),a==="center"&&o==="left"&&this.drawCaret(e,r,i,s),r.lineTo(l,c+d),r.quadraticCurveTo(l,c,l+d,c),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const a=sm[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=j6(this,e),c=Object.assign({},a,this._size),u=L6(r,e,c),h=F6(e,c,u,r);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=Nr(r.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,s,r),Bee(e,r.textDirection),o.y+=a.top,this.drawTitle(o,e,r),this.drawBody(o,e,r),this.drawFooter(o,e,r),Uee(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const i=this._active,s=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!Tx(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],a=this._getActiveElements(e,o,r,i),l=this._positionChanged(a,e),c=r||!Tx(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,i,s){const o=this.options;if(e.type==="mouseout")return[];if(!s)return r.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(e,r){const{caretX:i,caretY:s,options:o}=this,a=sm[o.position].call(this,e,r);return a!==!1&&(i!==a.x||s!==a.y)}}Te(NO,"positioners",sm);var rMe={id:"tooltip",_element:NO,positioners:sm,afterInit(n,e,r){r&&(n.tooltip=new NO({chart:n,options:r}))},beforeUpdate(n,e,r){n.tooltip&&n.tooltip.initialize(r)},reset(n,e,r){n.tooltip&&n.tooltip.initialize(r)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",r)}},afterEvent(n,e){if(n.tooltip){const r=e.replay;n.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ite},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const iMe=(n,e,r,i)=>(typeof e=="string"?(r=n.push(e)-1,i.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function sMe(n,e,r,i){const s=n.indexOf(e);if(s===-1)return iMe(n,e,r,i);const o=n.lastIndexOf(e);return s!==o?r:s}const oMe=(n,e)=>n===null?null:ps(Math.round(n),0,e);function B6(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class jO extends Rf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const i=this.getLabels();for(const{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(dn(e))return null;const i=this.getLabels();return r=isFinite(r)&&i[r]===e?r:sMe(i,e,Ct(r,e),this._addedLabels),oMe(r,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,r=this.max,i=this.options.offset,s=[];let o=this.getLabels();o=e===0&&r===o.length-1?o:o.slice(e,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=e;a<=r;a++)s.push({value:a});return s}getLabelForValue(e){return B6.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Te(jO,"id","category"),Te(jO,"defaults",{ticks:{callback:B6}});function aMe(n,e){const r=[],{bounds:s,step:o,min:a,max:l,precision:c,count:u,maxTicks:h,maxDigits:d,includeBounds:f}=n,p=o||1,g=h-1,{min:b,max:y}=e,v=!dn(a),w=!dn(l),k=!dn(u),_=(y-b)/(d+1);let S=V8((y-b)/g/p)*p,C,E,P,O;if(S<1e-14&&!v&&!w)return[{value:b},{value:y}];O=Math.ceil(y/S)-Math.floor(b/S),O>g&&(S=V8(O*S/g/p)*p),dn(c)||(C=Math.pow(10,c),S=Math.ceil(S*C)/C),s==="ticks"?(E=Math.floor(b/S)*S,P=Math.ceil(y/S)*S):(E=b,P=y),v&&w&&o&&Y2e((l-a)/o,S/1e3)?(O=Math.round(Math.min((l-a)/S,h)),S=(l-a)/O,E=a,P=l):k?(E=v?a:E,P=w?l:P,O=u-1,S=(P-E)/O):(O=(P-E)/S,Mm(O,Math.round(O),S/1e3)?O=Math.round(O):O=Math.ceil(O));const M=Math.max(Y8(S),Y8(E));C=Math.pow(10,dn(c)?M:c),E=Math.round(E*C)/C,P=Math.round(P*C)/C;let R=0;for(v&&(f&&E!==a?(r.push({value:a}),E<a&&R++,Mm(Math.round((E+R*S)*C)/C,a,U6(a,_,n))&&R++):E<a&&R++);R<O;++R){const j=Math.round((E+R*S)*C)/C;if(w&&j>l)break;r.push({value:j})}return w&&f&&P!==l?r.length&&Mm(r[r.length-1].value,l,U6(l,_,n))?r[r.length-1].value=l:r.push({value:l}):(!w||P===l)&&r.push({value:P}),r}function U6(n,e,{horizontal:r,minRotation:i}){const s=ur(i),o=(r?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+n).length;return Math.min(e/o,a)}class lMe extends Rf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return dn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:i}=this.getUserBounds();let{min:s,max:o}=this;const a=c=>s=r?s:c,l=c=>o=i?o:c;if(e){const c=af(s),u=af(o);c<0&&u<0?l(0):c>0&&u>0&&a(0)}if(s===o){let c=o===0?1:Math.abs(o*.05);l(o+c),e||a(s-c)}this.min=s,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),r=r||11),r&&(s=Math.min(r,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},o=this._range||this,a=aMe(s,o);return e.bounds==="ticks"&&G2e(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let r=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-r)/Math.max(e.length-1,1)/2;r-=s,i+=s}this._startValue=r,this._endValue=i,this._valueRange=i-r}getLabelForValue(e){return aN(e,this.chart.options.locale,this.options.ticks.format)}}class LO extends lMe{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=xi(e)?e:0,this.max=xi(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,i=ur(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Te(LO,"id","linear"),Te(LO,"defaults",{ticks:{callback:Ree.formatters.numeric}});const u1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hi=Object.keys(u1);function q6(n,e){return n-e}function W6(n,e){if(dn(e))return null;const r=n._adapter,{parser:i,round:s,isoWeekday:o}=n._parseOpts;let a=e;return typeof i=="function"&&(a=i(a)),xi(a)||(a=typeof i=="string"?r.parse(a,i):r.parse(a)),a===null?null:(s&&(a=s==="week"&&(Eu(o)||o===!0)?r.startOf(a,"isoWeek",o):r.startOf(a,s)),+a)}function H6(n,e,r,i){const s=hi.length;for(let o=hi.indexOf(n);o<s-1;++o){const a=u1[hi[o]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((r-e)/(l*a.size))<=i)return hi[o]}return hi[s-1]}function cMe(n,e,r,i,s){for(let o=hi.length-1;o>=hi.indexOf(r);o--){const a=hi[o];if(u1[a].common&&n._adapter.diff(s,i,a)>=e-1)return a}return hi[r?hi.indexOf(r):0]}function uMe(n){for(let e=hi.indexOf(n)+1,r=hi.length;e<r;++e)if(u1[hi[e]].common)return hi[e]}function V6(n,e,r){if(!r)n[e]=!0;else if(r.length){const{lo:i,hi:s}=iN(r,e),o=r[i]>=e?r[i]:r[s];n[o]=!0}}function dMe(n,e,r,i){const s=n._adapter,o=+s.startOf(e[0].value,i),a=e[e.length-1].value;let l,c;for(l=o;l<=a;l=+s.add(l,1,i))c=r[l],c>=0&&(e[c].major=!0);return e}function Y6(n,e,r){const i=[],s={},o=e.length;let a,l;for(a=0;a<o;++a)l=e[a],s[l]=a,i.push({value:l,major:!1});return o===0||!r?i:dMe(n,i,s,r)}class Nx extends Rf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const i=e.time||(e.time={}),s=this._adapter=new kTe._date(e.adapters.date);s.init(r),Pm(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:W6(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,i=e.time.unit||"day";let{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=xi(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=xi(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],i=e[e.length-1]),{min:r,max:i}}buildTicks(){const e=this.options,r=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,a=this.max,l=J2e(s,o,a);return this._unit=r.unit||(i.autoSkip?H6(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):cMe(this,l.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:uMe(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),Y6(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,i=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?r=1-s:r=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;r=ps(r,0,a),i=ps(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||H6(o.minUnit,r,i,this._getLabelCapacity(r)),l=Ct(s.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,u=Eu(c)||c===!0,h={};let d=r,f,p;if(u&&(d=+e.startOf(d,"isoWeek",c)),d=+e.startOf(d,u?"day":a),e.diff(i,r,a)>1e5*l)throw new Error(r+" and "+i+" are too far apart with stepSize of "+l+" "+a);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<i;f=+e.add(f,l,a),p++)V6(h,f,g);return(f===i||s.bounds==="ticks"||p===1)&&V6(h,f,g),Object.keys(h).sort(q6).map(b=>+b)}getLabelForValue(e){const r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(e,i.tooltipFormat):r.format(e,i.displayFormats.datetime)}format(e,r){const s=this.options.time.displayFormats,o=this._unit,a=r||s[o];return this._adapter.format(e,a)}_tickFormatFunction(e,r,i,s){const o=this.options,a=o.ticks.callback;if(a)return en(a,[e,r,i],this);const l=o.time.displayFormats,c=this._unit,u=this._majorUnit,h=c&&l[c],d=u&&l[u],f=i[r],p=u&&d&&f&&f.major;return this._adapter.format(e,s||(p?d:h))}generateTickLabels(e){let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],s.label=this._tickFormatFunction(s.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(e){const r=this._offsets,i=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,i=this.ctx.measureText(e).width,s=ur(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:i*o+l*a,h:i*a+l*o}}_getLabelCapacity(e){const r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(e,0,Y6(this,[e],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],r,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)e=e.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,i;if(e.length)return e;const s=this.getLabels();for(r=0,i=s.length;r<i;++r)e.push(W6(this,s[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return eEe(e.sort(q6))}}Te(Nx,"id","time"),Te(Nx,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function kb(n,e,r){let i=0,s=n.length-1,o,a,l,c;r?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=$c(n,"pos",e)),{pos:o,time:l}=n[i],{pos:a,time:c}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=$c(n,"time",e)),{time:o,pos:l}=n[i],{time:a,pos:c}=n[s]);const u=a-o;return u?l+(c-l)*(e-o)/u:l}class G6 extends Nx{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=kb(r,this.min),this._tableRange=kb(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:i}=this,s=[],o=[];let a,l,c,u,h;for(a=0,l=e.length;a<l;++a)u=e[a],u>=r&&u<=i&&s.push(u);if(s.length<2)return[{time:r,pos:0},{time:i,pos:1}];for(a=0,l=s.length;a<l;++a)h=s[a+1],c=s[a-1],u=s[a],Math.round((h+c)/2)!==u&&o.push({time:u,pos:a/(l-1)});return o}_generate(){const e=this.min,r=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(r)||i.length===1)&&i.push(r),i.sort((s,o)=>s-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),i=this.getLabelTimestamps();return r.length&&i.length?e=this.normalize(r.concat(i)):e=r.length?r:i,e=this._cache.all=e,e}getDecimalForValue(e){return(kb(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,i=this.getDecimalForPixel(e)/r.factor-r.end;return kb(this._table,i*this._tableRange+this._minPos,!0)}}Te(G6,"id","timeseries"),Te(G6,"defaults",Nx.defaults);const ste="label";function K6(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function hMe(n,e){const r=n.options;r&&e&&Object.assign(r,e)}function ote(n,e){n.labels=e}function ate(n,e,r=ste){const i=[];n.datasets=e.map(s=>{const o=n.datasets.find(a=>a[r]===s[r]);return!o||!s.data||i.includes(o)?{...s}:(i.push(o),Object.assign(o,s),o)})}function fMe(n,e=ste){const r={labels:[],datasets:[]};return ote(r,n.labels),ate(r,n.datasets,e),r}function pMe(n,e){const{height:r=150,width:i=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d,...f}=n,p=D.useRef(null),g=D.useRef(null),b=()=>{p.current&&(g.current=new au(p.current,{type:a,data:fMe(l,o),options:c&&{...c},plugins:u}),K6(e,g.current))},y=()=>{K6(e,null),g.current&&(g.current.destroy(),g.current=null)};return D.useEffect(()=>{!s&&g.current&&c&&hMe(g.current,c)},[s,c]),D.useEffect(()=>{!s&&g.current&&ote(g.current.config.data,l.labels)},[s,l.labels]),D.useEffect(()=>{!s&&g.current&&l.datasets&&ate(g.current.config.data,l.datasets,o)},[s,l.datasets]),D.useEffect(()=>{g.current&&(s?(y(),setTimeout(b)):g.current.update(d))},[s,c,l.labels,l.datasets,d]),D.useEffect(()=>{g.current&&(y(),setTimeout(b))},[a]),D.useEffect(()=>(b(),()=>y()),[]),m.jsx("canvas",{ref:p,role:"img",height:r,width:i,...f,children:h})}const mMe=D.forwardRef(pMe);function gMe(n,e){return au.register(e),D.forwardRef((r,i)=>m.jsx(mMe,{...r,ref:i,type:n}))}const vMe=gMe("scatter",my);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const X6={modes:{point(n,e){return yy(n,e,{intersect:!0})},nearest(n,e,r){return xMe(n,e,r)},x(n,e,r){return yy(n,e,{intersect:r.intersect,axis:"x"})},y(n,e,r){return yy(n,e,{intersect:r.intersect,axis:"y"})}}};function mN(n,e,r){return(X6.modes[r.mode]||X6.modes.nearest)(n,e,r)}function bMe(n,e,r){return r!=="x"&&r!=="y"?n.inRange(e.x,e.y,"x",!0)||n.inRange(e.x,e.y,"y",!0):n.inRange(e.x,e.y,r,!0)}function yMe(n,e,r){return r==="x"?{x:n.x,y:e.y}:r==="y"?{x:e.x,y:n.y}:e}function yy(n,e,r){return n.filter(i=>r.intersect?i.inRange(e.x,e.y):bMe(i,e,r.axis))}function xMe(n,e,r){let i=Number.POSITIVE_INFINITY;return yy(n,e,r).reduce((s,o)=>{const a=o.getCenterPoint(),l=yMe(e,a,r.axis),c=lf(e,l);return c<i?(s=[o],i=c):c===i&&s.push(o),s},[]).sort((s,o)=>s._index-o._index).slice(0,1)}function Wu(n,e,r){const i=Math.cos(r),s=Math.sin(r),o=e.x,a=e.y;return{x:o+i*(n.x-o)-s*(n.y-a),y:a+s*(n.x-o)+i*(n.y-a)}}const wMe=(n,e)=>e>n||n.length>e.length&&n.slice(0,e.length)===e,zc=.001,d1=(n,e,r)=>Math.min(r,Math.max(e,n)),lte=(n,e)=>n.value>=n.start-e&&n.value<=n.end+e;function _Me(n,e,r){for(const i of Object.keys(n))n[i]=d1(n[i],e,r);return n}function SMe(n,e,r,i){return!n||!e||r<=0?!1:Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)<=Math.pow(r+i,2)}function cte(n,{x:e,y:r,x2:i,y2:s},o,{borderWidth:a,hitTolerance:l}){const c=(a+l)/2,u=n.x>=e-c-zc&&n.x<=i+c+zc,h=n.y>=r-c-zc&&n.y<=s+c+zc;return o==="x"?u:(o==="y"||u)&&h}function ute(n,{rect:e,center:r},i,{rotation:s,borderWidth:o,hitTolerance:a}){const l=Wu(n,r,ur(-s));return cte(l,e,i,{borderWidth:o,hitTolerance:a})}function Hu(n,e){const{centerX:r,centerY:i}=n.getProps(["centerX","centerY"],e);return{x:r,y:i}}function kMe(n,e,r,i=!0){const s=r.split(".");let o=0;for(const a of e.split(".")){const l=s[o++];if(parseInt(a,10)<parseInt(l,10))break;if(wMe(l,a)){if(i)throw new Error(`${n} v${r} is not supported. v${e} or newer is required.`);return!1}}return!0}const dte=n=>typeof n=="string"&&n.endsWith("%"),hte=n=>parseFloat(n)/100,fte=n=>d1(hte(n),0,1),Dp=(n,e)=>({x:n,y:e,x2:n,y2:e,width:0,height:0}),CMe={box:n=>Dp(n.centerX,n.centerY),doughnutLabel:n=>Dp(n.centerX,n.centerY),ellipse:n=>({centerX:n.centerX,centerY:n.centerX,radius:0,width:0,height:0}),label:n=>Dp(n.centerX,n.centerY),line:n=>Dp(n.x,n.y),point:n=>({centerX:n.centerX,centerY:n.centerY,radius:0,width:0,height:0}),polygon:n=>Dp(n.centerX,n.centerY)};function gN(n,e){return e==="start"?0:e==="end"?n:dte(e)?fte(e)*n:n/2}function Yl(n,e,r=!0){return typeof e=="number"?e:dte(e)?(r?fte(e):hte(e))*n:n}function EMe(n,e){const{x:r,width:i}=n,s=e.textAlign;return s==="center"?r+i/2:s==="end"||s==="right"?r+i:r}function pte(n,e,{borderWidth:r,position:i,xAdjust:s,yAdjust:o},a){const l=Tt(a),c=e.width+(l?a.width:0)+r,u=e.height+(l?a.height:0)+r,h=vN(i),d=Q6(n.x,c,s,h.x),f=Q6(n.y,u,o,h.y);return{x:d,y:f,x2:d+c,y2:f+u,width:c,height:u,centerX:d+c/2,centerY:f+u/2}}function vN(n,e="center"){return Tt(n)?{x:Ct(n.x,e),y:Ct(n.y,e)}:(n=Ct(n,e),{x:n,y:n})}const mte=(n,e)=>n&&n.autoFit&&e<1;function gte(n,e){const r=n.font,i=Cn(r)?r:[r];return mte(n,e)?i.map(function(s){const o=tr(s);return o.size=Math.floor(s.size*e),o.lineHeight=s.lineHeight,tr(o)}):i.map(s=>tr(s))}function vte(n){return n&&(Ui(n.xValue)||Ui(n.yValue))}function Q6(n,e,r=0,i){return n-gN(e,i)+r}function Af(n,e,r){const i=r.init;if(i){if(i===!0)return yte(e,r)}else return;return TMe(n,e,r)}function bte(n,e,r){let i=!1;return e.forEach(s=>{bi(n[s])?(i=!0,r[s]=n[s]):Ui(r[s])&&delete r[s]}),i}function yte(n,e){const r=e.type||"line";return CMe[r](n)}function TMe(n,e,r){const i=en(r.init,[{chart:n,properties:e,options:r}]);if(i===!0)return yte(e,r);if(Tt(i))return i}const ek=new Map,PMe=n=>isNaN(n)||n<=0,MMe=n=>n.reduce(function(e,r){return e+=r.string,e},"");function h1(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function f1(n,{x:e,y:r},i){i&&(n.translate(e,r),n.rotate(ur(i)),n.translate(-e,-r))}function Ra(n,e){if(e&&e.borderWidth)return n.lineCap=e.borderCapStyle||"butt",n.setLineDash(e.borderDash),n.lineDashOffset=e.borderDashOffset,n.lineJoin=e.borderJoinStyle||"miter",n.lineWidth=e.borderWidth,n.strokeStyle=e.borderColor,!0}function Nf(n,e){n.shadowColor=e.backgroundShadowColor,n.shadowBlur=e.shadowBlur,n.shadowOffsetX=e.shadowOffsetX,n.shadowOffsetY=e.shadowOffsetY}function p1(n,e){const r=e.content;if(h1(r))return{width:Yl(r.width,e.width),height:Yl(r.height,e.height)};const i=gte(e),s=e.textStrokeWidth,o=Cn(r)?r:[r],a=o.join()+MMe(i)+s+(n._measureText?"-spriting":"");return ek.has(a)||ek.set(a,RMe(n,o,i,s)),ek.get(a)}function xte(n,e,r){const{x:i,y:s,width:o,height:a}=e;n.save(),Nf(n,r);const l=Ra(n,r);n.fillStyle=r.backgroundColor,n.beginPath(),Ix(n,{x:i,y:s,w:o,h:a,radius:_Me(rh(r.borderRadius),0,Math.min(o,a)/2)}),n.closePath(),n.fill(),l&&(n.shadowColor=r.borderShadowColor,n.stroke()),n.restore()}function wte(n,e,r,i){const s=r.content;if(h1(s)){n.save(),n.globalAlpha=jMe(r.opacity,s.style.opacity),n.drawImage(s,e.x,e.y,e.width,e.height),n.restore();return}const o=Cn(s)?s:[s],a=gte(r,i),l=r.color,c=Cn(l)?l:[l],u=EMe(e,r),h=e.y+r.textStrokeWidth/2;n.save(),n.textBaseline="middle",n.textAlign=r.textAlign,DMe(n,r)&&AMe(n,{x:u,y:h},o,a),NMe(n,{x:u,y:h},o,{fonts:a,colors:c}),n.restore()}function DMe(n,e){if(e.textStrokeWidth>0)return n.lineJoin="round",n.miterLimit=2,n.lineWidth=e.textStrokeWidth,n.strokeStyle=e.textStrokeColor,!0}function OMe(n,e,r,i){const{radius:s,options:o}=e,a=o.pointStyle,l=o.rotation;let c=(l||0)*rN;if(h1(a)){n.save(),n.translate(r,i),n.rotate(c),n.drawImage(a,-a.width/2,-a.height/2,a.width,a.height),n.restore();return}PMe(s)||IMe(n,{x:r,y:i,radius:s,rotation:l,style:a,rad:c})}function IMe(n,{x:e,y:r,radius:i,rotation:s,style:o,rad:a}){let l,c,u,h;switch(n.beginPath(),o){default:n.arc(e,r,i,0,xr),n.closePath();break;case"triangle":n.moveTo(e+Math.sin(a)*i,r-Math.cos(a)*i),a+=Dx,n.lineTo(e+Math.sin(a)*i,r-Math.cos(a)*i),a+=Dx,n.lineTo(e+Math.sin(a)*i,r-Math.cos(a)*i),n.closePath();break;case"rectRounded":h=i*.516,u=i-h,l=Math.cos(a+cs)*u,c=Math.sin(a+cs)*u,n.arc(e-l,r-c,h,a-Vt,a-wr),n.arc(e+c,r-l,h,a-wr,a),n.arc(e+l,r+c,h,a,a+wr),n.arc(e-c,r+l,h,a+wr,a+Vt),n.closePath();break;case"rect":if(!s){u=Math.SQRT1_2*i,n.rect(e-u,r-u,2*u,2*u);break}a+=cs;case"rectRot":l=Math.cos(a)*i,c=Math.sin(a)*i,n.moveTo(e-l,r-c),n.lineTo(e+c,r-l),n.lineTo(e+l,r+c),n.lineTo(e-c,r+l),n.closePath();break;case"crossRot":a+=cs;case"cross":l=Math.cos(a)*i,c=Math.sin(a)*i,n.moveTo(e-l,r-c),n.lineTo(e+l,r+c),n.moveTo(e+c,r-l),n.lineTo(e-c,r+l);break;case"star":l=Math.cos(a)*i,c=Math.sin(a)*i,n.moveTo(e-l,r-c),n.lineTo(e+l,r+c),n.moveTo(e+c,r-l),n.lineTo(e-c,r+l),a+=cs,l=Math.cos(a)*i,c=Math.sin(a)*i,n.moveTo(e-l,r-c),n.lineTo(e+l,r+c),n.moveTo(e+c,r-l),n.lineTo(e-c,r+l);break;case"line":l=Math.cos(a)*i,c=Math.sin(a)*i,n.moveTo(e-l,r-c),n.lineTo(e+l,r+c);break;case"dash":n.moveTo(e,r),n.lineTo(e+Math.cos(a)*i,r+Math.sin(a)*i);break}n.fill()}function RMe(n,e,r,i){n.save();const s=e.length;let o=0,a=i;for(let l=0;l<s;l++){const c=r[Math.min(l,r.length-1)];n.font=c.string;const u=e[l];o=Math.max(o,n.measureText(u).width+i),a+=c.lineHeight}return n.restore(),{width:o,height:a}}function AMe(n,{x:e,y:r},i,s){n.beginPath();let o=0;i.forEach(function(a,l){const c=s[Math.min(l,s.length-1)],u=c.lineHeight;n.font=c.string,n.strokeText(a,e,r+u/2+o),o+=u}),n.stroke()}function NMe(n,{x:e,y:r},i,{fonts:s,colors:o}){let a=0;i.forEach(function(l,c){const u=o[Math.min(c,o.length-1)],h=s[Math.min(c,s.length-1)],d=h.lineHeight;n.beginPath(),n.font=h.string,n.fillStyle=u,n.fillText(l,e,r+d/2+a),a+=d,n.fill()})}function jMe(n,e){const r=Eu(n)?n:e;return Eu(r)?d1(r,0,1):1}const _te=["left","bottom","top","right"];function LMe(n,e){const{pointX:r,pointY:i,options:s}=e,o=s.callout,a=o&&o.display&&UMe(e,o);if(!a||WMe(e,o,a))return;if(n.save(),n.beginPath(),!Ra(n,o))return n.restore();const{separatorStart:c,separatorEnd:u}=FMe(e,a),{sideStart:h,sideEnd:d}=zMe(e,a,c);(o.margin>0||s.borderWidth===0)&&(n.moveTo(c.x,c.y),n.lineTo(u.x,u.y)),n.moveTo(h.x,h.y),n.lineTo(d.x,d.y);const f=Wu({x:r,y:i},e.getCenterPoint(),ur(-e.rotation));n.lineTo(f.x,f.y),n.stroke(),n.restore()}function FMe(n,e){const{x:r,y:i,x2:s,y2:o}=n,a=$Me(n,e);let l,c;return e==="left"||e==="right"?(l={x:r+a,y:i},c={x:l.x,y:o}):(l={x:r,y:i+a},c={x:s,y:l.y}),{separatorStart:l,separatorEnd:c}}function $Me(n,e){const{width:r,height:i,options:s}=n,o=s.callout.margin+s.borderWidth/2;return e==="right"?r+o:e==="bottom"?i+o:-o}function zMe(n,e,r){const{y:i,width:s,height:o,options:a}=n,l=a.callout.start,c=BMe(e,a.callout);let u,h;return e==="left"||e==="right"?(u={x:r.x,y:i+Yl(o,l)},h={x:u.x+c,y:u.y}):(u={x:r.x+Yl(s,l),y:r.y},h={x:u.x,y:u.y+c}),{sideStart:u,sideEnd:h}}function BMe(n,e){const r=e.side;return n==="left"||n==="top"?-r:r}function UMe(n,e){const r=e.position;return _te.includes(r)?r:qMe(n,e)}function qMe(n,e){const{x:r,y:i,x2:s,y2:o,width:a,height:l,pointX:c,pointY:u,centerX:h,centerY:d,rotation:f}=n,p={x:h,y:d},g=e.start,b=Yl(a,g),y=Yl(l,g),v=[r,r+b,r+b,s],w=[i+y,o,i,o],k=[];for(let _=0;_<4;_++){const S=Wu({x:v[_],y:w[_]},p,ur(f));k.push({position:_te[_],distance:lf(S,{x:c,y:u})})}return k.sort((_,S)=>_.distance-S.distance)[0].position}function WMe(n,e,r){const{pointX:i,pointY:s}=n,o=e.margin;let a=i,l=s;return r==="left"?a+=o:r==="right"?a-=o:r==="top"?l+=o:r==="bottom"&&(l-=o),n.inRange(a,l)}const J6={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function df(n,e,r){return e=typeof e=="number"?e:n.parse(e),xi(e)?n.getPixelForValue(e):r}function Pu(n,e,r){const i=e[r];if(i||r==="scaleID")return i;const s=r.charAt(0),o=Object.values(n).filter(a=>a.axis&&a.axis===s);return o.length?o[0].id:s}function Ste(n,e){if(n){const r=n.options.reverse,i=df(n,e.min,r?e.end:e.start),s=df(n,e.max,r?e.start:e.end);return{start:i,end:s}}}function kte(n,e){const{chartArea:r,scales:i}=n,s=i[Pu(i,e,"xScaleID")],o=i[Pu(i,e,"yScaleID")];let a=r.width/2,l=r.height/2;return s&&(a=df(s,e.xValue,s.left+s.width/2)),o&&(l=df(o,e.yValue,o.top+o.height/2)),{x:a,y:l}}function bN(n,e){const r=n.scales,i=r[Pu(r,e,"xScaleID")],s=r[Pu(r,e,"yScaleID")];if(!i&&!s)return{};let{left:o,right:a}=i||n.chartArea,{top:l,bottom:c}=s||n.chartArea;const u=Z6(i,{min:e.xMin,max:e.xMax,start:o,end:a});o=u.start,a=u.end;const h=Z6(s,{min:e.yMin,max:e.yMax,start:c,end:l});return l=h.start,c=h.end,{x:o,y:l,x2:a,y2:c,width:a-o,height:c-l,centerX:o+(a-o)/2,centerY:l+(c-l)/2}}function Cte(n,e){if(!vte(e)){const r=bN(n,e);let i=e.radius;(!i||isNaN(i))&&(i=Math.min(r.width,r.height)/2,e.radius=i);const s=i*2,o=r.centerX+e.xAdjust,a=r.centerY+e.yAdjust;return{x:o-i,y:a-i,x2:o+i,y2:a+i,centerX:o,centerY:a,width:s,height:s,radius:i}}return VMe(n,e)}function HMe(n,e){const{scales:r,chartArea:i}=n,s=r[e.scaleID],o={x:i.left,y:i.top,x2:i.right,y2:i.bottom};return s?YMe(s,o,e):GMe(r,o,e),o}function Ete(n,e){const r=bN(n,e);return r.initProperties=Af(n,r,e),r.elements=[{type:"label",optionScope:"label",properties:QMe(n,r,e),initProperties:r.initProperties}],r}function VMe(n,e){const r=kte(n,e),i=e.radius*2;return{x:r.x-e.radius+e.xAdjust,y:r.y-e.radius+e.yAdjust,x2:r.x+e.radius+e.xAdjust,y2:r.y+e.radius+e.yAdjust,centerX:r.x+e.xAdjust,centerY:r.y+e.yAdjust,radius:e.radius,width:i,height:i}}function Z6(n,e){const r=Ste(n,e)||e;return{start:Math.min(r.start,r.end),end:Math.max(r.start,r.end)}}function YMe(n,e,r){const i=df(n,r.value,NaN),s=df(n,r.endValue,i);n.isHorizontal()?(e.x=i,e.x2=s):(e.y=i,e.y2=s)}function GMe(n,e,r){for(const i of Object.keys(J6)){const s=n[Pu(n,r,i)];if(s){const{min:o,max:a,start:l,end:c,startProp:u,endProp:h}=J6[i],d=Ste(s,{min:r[o],max:r[a],start:s[l],end:s[c]});e[u]=d.start,e[h]=d.end}}}function KMe({properties:n,options:e},r,i,s){const{x:o,x2:a,width:l}=n;return Tte({start:o,end:a,borderWidth:e.borderWidth},{position:i.x,padding:{start:s.left,end:s.right},adjust:e.label.xAdjust,size:r.width})}function XMe({properties:n,options:e},r,i,s){const{y:o,y2:a,height:l}=n;return Tte({start:o,end:a,borderWidth:e.borderWidth},{position:i.y,padding:{start:s.top,end:s.bottom},adjust:e.label.yAdjust,size:r.height})}function Tte(n,e){const{start:r,end:i,borderWidth:s}=n,{position:o,padding:{start:a,end:l},adjust:c}=e,u=i-s-r-a-l-e.size;return r+s/2+c+gN(u,o)}function QMe(n,e,r){const i=r.label;i.backgroundColor="transparent",i.callout.display=!1;const s=vN(i.position),o=Nr(i.padding),a=p1(n.ctx,i),l=KMe({properties:e,options:r},a,s,o),c=XMe({properties:e,options:r},a,s,o),u=a.width+o.width,h=a.height+o.height;return{x:l,y:c,x2:l+u,y2:c+h,width:u,height:h,centerX:l+u/2,centerY:c+h/2,rotation:i.rotation}}const FO=["enter","leave"],yN=FO.concat("click");function JMe(n,e,r){e.listened=bte(r,yN,e.listeners),e.moveListened=!1,FO.forEach(i=>{bi(r[i])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(i=>{!e.listened&&bi(i.click)&&(e.listened=!0),e.moveListened||FO.forEach(s=>{bi(i[s])&&(e.listened=!0,e.moveListened=!0)})})}function ZMe(n,e,r){if(n.listened)switch(e.type){case"mousemove":case"mouseout":return eDe(n,e,r);case"click":return tDe(n,e,r)}}function eDe(n,e,r){if(!n.moveListened)return;let i;e.type==="mousemove"?i=mN(n.visibleElements,e,r.interaction):i=[];const s=n.hovered;n.hovered=i;const o={state:n,event:e};let a=eF(o,"leave",s,i);return eF(o,"enter",i,s)||a}function eF({state:n,event:e},r,i,s){let o;for(const a of i)s.indexOf(a)<0&&(o=Pte(a.options[r]||n.listeners[r],a,e)||o);return o}function tDe(n,e,r){const i=n.listeners,s=mN(n.visibleElements,e,r.interaction);let o;for(const a of s)o=Pte(a.options.click||i.click,a,e)||o;return o}function Pte(n,e,r){return en(n,[e.$context,r])===!0}const jx=["afterDraw","beforeDraw"];function nDe(n,e,r){const i=e.visibleElements;e.hooked=bte(r,jx,e.hooks),e.hooked||i.forEach(s=>{e.hooked||jx.forEach(o=>{bi(s.options[o])&&(e.hooked=!0)})})}function tF(n,e,r){if(n.hooked){const i=e.options[r]||n.hooks[r];return en(i,[e.$context])}}function rDe(n,e,r){const i=lDe(n.scales,e,r);let s=nF(e,i,"min","suggestedMin");s=nF(e,i,"max","suggestedMax")||s,s&&bi(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function iDe(n,e){for(const r of n)oDe(r,e)}function nF(n,e,r,i){if(xi(e[r])&&!sDe(n.options,r,i)){const s=n[r]!==e[r];return n[r]=e[r],s}}function sDe(n,e,r){return Ui(n[e])||Ui(n[r])}function oDe(n,e){for(const r of["scaleID","xScaleID","yScaleID"]){const i=Pu(e,n,r);i&&!e[i]&&aDe(n,r)&&console.warn(`No scale found with id '${i}' for annotation '${n.id}'`)}}function aDe(n,e){if(e==="scaleID")return!0;const r=e.charAt(0);for(const i of["Min","Max","Value"])if(Ui(n[r+i]))return!0;return!1}function lDe(n,e,r){const i=e.axis,s=e.id,o=i+"ScaleID",a={min:Ct(e.min,Number.NEGATIVE_INFINITY),max:Ct(e.max,Number.POSITIVE_INFINITY)};for(const l of r)l.scaleID===s?rF(l,e,["value","endValue"],a):Pu(n,l,o)===s&&rF(l,e,[i+"Min",i+"Max",i+"Value"],a);return a}function rF(n,e,r,i){for(const s of r){const o=n[s];if(Ui(o)){const a=e.parse(o);i.min=Math.min(i.min,a),i.max=Math.max(i.max,a)}}}class jf extends Si{inRange(e,r,i,s){const{x:o,y:a}=Wu({x:e,y:r},this.getCenterPoint(s),ur(-this.options.rotation));return cte({x:o,y:a},this.getProps(["x","y","x2","y2"],s),i,this.options)}getCenterPoint(e){return Hu(this,e)}draw(e){e.save(),f1(e,this.getCenterPoint(),this.options.rotation),xte(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){return Ete(e,r)}}jf.id="boxAnnotation";jf.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};jf.defaultRoutes={borderColor:"color",backgroundColor:"color"};jf.descriptors={label:{_fallback:!0}};class m1 extends Si{inRange(e,r,i,s){return ute({x:e,y:r},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},i,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Hu(this,e)}draw(e){const r=this.options;!r.display||!r.content||(pDe(e,this),e.save(),f1(e,this.getCenterPoint(),this.rotation),wte(e,this,r,this._fitRatio),e.restore())}resolveElementProperties(e,r){const i=cDe(e,r);if(!i)return{};const{controllerMeta:s,point:o,radius:a}=dDe(e,r,i);let l=p1(e.ctx,r);const c=hDe(l,a);mte(r,c)&&(l={width:l.width*c,height:l.height*c});const{position:u,xAdjust:h,yAdjust:d}=r,f=pte(o,l,{borderWidth:0,position:u,xAdjust:h,yAdjust:d});return{initProperties:Af(e,f,r),...f,...s,rotation:r.rotation,_fitRatio:c}}}m1.id="doughnutLabelAnnotation";m1.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};m1.defaultRoutes={};function cDe(n,e){return n.getSortedVisibleDatasetMetas().reduce(function(r,i){const s=i.controller;return s instanceof nm&&uDe(n,e,i.data)&&(!r||s.innerRadius<r.controller.innerRadius)&&s.options.circumference>=90?i:r},void 0)}function uDe(n,e,r){if(!e.autoHide)return!0;for(let i=0;i<r.length;i++)if(!r[i].hidden&&n.getDataVisibility(i))return!0}function dDe({chartArea:n},e,r){const{left:i,top:s,right:o,bottom:a}=n,{innerRadius:l,offsetX:c,offsetY:u}=r.controller,h=(i+o)/2+c,d=(s+a)/2+u,f={left:Math.max(h-l,i),right:Math.min(h+l,o),top:Math.max(d-l,s),bottom:Math.min(d+l,a)},p={x:(f.left+f.right)/2,y:(f.top+f.bottom)/2},g=e.spacing+e.borderWidth/2,b=l-g,y=p.y>d,v=y?s+g:a-g,w=fDe(v,h,d,b);return{controllerMeta:{_centerX:h,_centerY:d,_radius:b,_counterclockwise:y,...w},point:p,radius:Math.min(l,Math.min(f.right-f.left,f.bottom-f.top)/2)}}function hDe({width:n,height:e},r){const i=Math.sqrt(Math.pow(n,2)+Math.pow(e,2));return r*2/i}function fDe(n,e,r,i){const s=Math.pow(r-n,2),o=Math.pow(i,2),a=e*-2,l=Math.pow(e,2)+s-o,c=Math.pow(a,2)-4*l;if(c<=0)return{_startAngle:0,_endAngle:xr};const u=(-a-Math.sqrt(c))/2,h=(-a+Math.sqrt(c))/2;return{_startAngle:MO({x:e,y:r},{x:u,y:n}).angle,_endAngle:MO({x:e,y:r},{x:h,y:n}).angle}}function pDe(n,e){const{_centerX:r,_centerY:i,_radius:s,_startAngle:o,_endAngle:a,_counterclockwise:l,options:c}=e;n.save();const u=Ra(n,c);n.fillStyle=c.backgroundColor,n.beginPath(),n.arc(r,i,s,o,a,l),n.closePath(),n.fill(),u&&n.stroke(),n.restore()}class T0 extends Si{inRange(e,r,i,s){return ute({x:e,y:r},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},i,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Hu(this,e)}draw(e){const r=this.options,i=!Ui(this._visible)||this._visible;!r.display||!r.content||!i||(e.save(),f1(e,this.getCenterPoint(),this.rotation),LMe(e,this),xte(e,this,r),wte(e,mDe(this),r),e.restore())}resolveElementProperties(e,r){let i;if(vte(r))i=kte(e,r);else{const{centerX:l,centerY:c}=bN(e,r);i={x:l,y:c}}const s=Nr(r.padding),o=p1(e.ctx,r),a=pte(i,o,r,s);return{initProperties:Af(e,a,r),pointX:i.x,pointY:i.y,...a,rotation:r.rotation}}}T0.id="labelAnnotation";T0.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};T0.defaultRoutes={borderColor:"color"};function mDe({x:n,y:e,width:r,height:i,options:s}){const o=s.borderWidth/2,a=Nr(s.padding);return{x:n+a.left+o,y:e+a.top+o,width:r-a.left-a.right-s.borderWidth,height:i-a.top-a.bottom-s.borderWidth}}const xN=(n,e,r)=>({x:n.x+r*(e.x-n.x),y:n.y+r*(e.y-n.y)}),$O=(n,e,r)=>xN(e,r,Math.abs((n-e.y)/(r.y-e.y))).x,iF=(n,e,r)=>xN(e,r,Math.abs((n-e.x)/(r.x-e.x))).y,om=n=>n*n,gDe=(n,e,{x:r,y:i,x2:s,y2:o},a)=>a==="y"?{start:Math.min(i,o),end:Math.max(i,o),value:e}:{start:Math.min(r,s),end:Math.max(r,s),value:n},sF=(n,e,r,i)=>(1-i)*(1-i)*n+2*(1-i)*i*e+i*i*r,zO=(n,e,r,i)=>({x:sF(n.x,e.x,r.x,i),y:sF(n.y,e.y,r.y,i)}),oF=(n,e,r,i)=>2*(1-i)*(e-n)+2*i*(r-e),aF=(n,e,r,i)=>-Math.atan2(oF(n.x,e.x,r.x,i),oF(n.y,e.y,r.y,i))+.5*Vt;class P0 extends Si{inRange(e,r,i,s){const o=(this.options.borderWidth+this.options.hitTolerance)/2;if(i!=="x"&&i!=="y"){const a={mouseX:e,mouseY:r},{path:l,ctx:c}=this;if(l){Ra(c,this.options),c.lineWidth+=this.options.hitTolerance;const{chart:h}=this.$context,d=e*h.currentDevicePixelRatio,f=r*h.currentDevicePixelRatio,p=c.isPointInStroke(l,d,f)||BO(this,a,s);return c.restore(),p}const u=om(o);return xDe(this,a,u,s)||BO(this,a,s)}return vDe(this,{mouseX:e,mouseY:r},i,{hitSize:o,useFinalPosition:s})}getCenterPoint(e){return Hu(this,e)}draw(e){const{x:r,y:i,x2:s,y2:o,cp:a,options:l}=this;if(e.save(),!Ra(e,l))return e.restore();Nf(e,l);const c=Math.sqrt(Math.pow(s-r,2)+Math.pow(o-i,2));if(l.curve&&a)return PDe(e,this,a,c),e.restore();const{startOpts:u,endOpts:h,startAdjust:d,endAdjust:f}=Mte(this),p=Math.atan2(o-i,s-r);e.translate(r,i),e.rotate(p),e.beginPath(),e.moveTo(0+d,0),e.lineTo(c-f,0),e.shadowColor=l.borderShadowColor,e.stroke(),UO(e,0,d,u),UO(e,c,-f,h),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){const i=HMe(e,r),{x:s,y:o,x2:a,y2:l}=i,c=bDe(i,e.chartArea),u=c?yDe({x:s,y:o},{x:a,y:l},e.chartArea):{x:s,y:o,x2:a,y2:l,width:Math.abs(a-s),height:Math.abs(l-o)};if(u.centerX=(a+s)/2,u.centerY=(l+o)/2,u.initProperties=Af(e,u,r),r.curve){const d={x:u.x,y:u.y},f={x:u.x2,y:u.y2};u.cp=TDe(u,r,lf(d,f))}const h=wDe(e,u,r.label);return h._visible=c,u.elements=[{type:"label",optionScope:"label",properties:h,initProperties:u.initProperties}],u}}P0.id="lineAnnotation";const lF={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};P0.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},lF),fill:!1,length:12,start:Object.assign({},lF),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},T0.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};P0.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};P0.defaultRoutes={borderColor:"color"};function vDe(n,{mouseX:e,mouseY:r},i,{hitSize:s,useFinalPosition:o}){const a=gDe(e,r,n.getProps(["x","y","x2","y2"],o),i);return lte(a,s)||BO(n,{mouseX:e,mouseY:r},o,i)}function bDe({x:n,y:e,x2:r,y2:i},{top:s,right:o,bottom:a,left:l}){return!(n<l&&r<l||n>o&&r>o||e<s&&i<s||e>a&&i>a)}function cF({x:n,y:e},r,{top:i,right:s,bottom:o,left:a}){return n<a&&(e=iF(a,{x:n,y:e},r),n=a),n>s&&(e=iF(s,{x:n,y:e},r),n=s),e<i&&(n=$O(i,{x:n,y:e},r),e=i),e>o&&(n=$O(o,{x:n,y:e},r),e=o),{x:n,y:e}}function yDe(n,e,r){const{x:i,y:s}=cF(n,e,r),{x:o,y:a}=cF(e,n,r);return{x:i,y:s,x2:o,y2:a,width:Math.abs(o-i),height:Math.abs(a-s)}}function xDe(n,{mouseX:e,mouseY:r},i=zc,s){const{x:o,y:a,x2:l,y2:c}=n.getProps(["x","y","x2","y2"],s),u=l-o,h=c-a,d=om(u)+om(h),f=d===0?-1:((e-o)*u+(r-a)*h)/d;let p,g;return f<0?(p=o,g=a):f>1?(p=l,g=c):(p=o+f*u,g=a+f*h),om(e-p)+om(r-g)<=i}function BO(n,{mouseX:e,mouseY:r},i,s){const o=n.label;return o.options.display&&o.inRange(e,r,s,i)}function wDe(n,e,r){const i=r.borderWidth,s=Nr(r.padding),o=p1(n.ctx,r),a=o.width+s.width+i,l=o.height+s.height+i;return SDe(e,r,{width:a,height:l,padding:s},n.chartArea)}function _De(n){const{x:e,y:r,x2:i,y2:s}=n,o=Math.atan2(s-r,i-e);return o>Vt/2?o-Vt:o<Vt/-2?o+Vt:o}function SDe(n,e,r,i){const{width:s,height:o,padding:a}=r,{xAdjust:l,yAdjust:c}=e,u={x:n.x,y:n.y},h={x:n.x2,y:n.y2},d=e.rotation==="auto"?_De(n):ur(e.rotation),f=kDe(s,o,d),p=CDe(n,e,{labelSize:f,padding:a},i),g=n.cp?zO(u,n.cp,h,p):xN(u,h,p),b={size:f.w,min:i.left,max:i.right,padding:a.left},y={size:f.h,min:i.top,max:i.bottom,padding:a.top},v=dF(g.x,b)+l,w=dF(g.y,y)+c;return{x:v-s/2,y:w-o/2,x2:v+s/2,y2:w+o/2,centerX:v,centerY:w,pointX:g.x,pointY:g.y,width:s,height:o,rotation:Mee(d)}}function kDe(n,e,r){const i=Math.cos(r),s=Math.sin(r);return{w:Math.abs(n*i)+Math.abs(e*s),h:Math.abs(n*s)+Math.abs(e*i)}}function CDe(n,e,r,i){let s;const o=EDe(n,i);return e.position==="start"?s=uF({w:n.x2-n.x,h:n.y2-n.y},r,e,o):e.position==="end"?s=1-uF({w:n.x-n.x2,h:n.y-n.y2},r,e,o):s=gN(1,e.position),s}function uF(n,e,r,i){const{labelSize:s,padding:o}=e,a=n.w*i.dx,l=n.h*i.dy,c=a>0&&(s.w/2+o.left-i.x)/a,u=l>0&&(s.h/2+o.top-i.y)/l;return d1(Math.max(c,u),0,.25)}function EDe(n,e){const{x:r,x2:i,y:s,y2:o}=n,a=Math.min(s,o)-e.top,l=Math.min(r,i)-e.left,c=e.bottom-Math.max(s,o),u=e.right-Math.max(r,i);return{x:Math.min(l,u),y:Math.min(a,c),dx:l<=u?1:-1,dy:a<=c?1:-1}}function dF(n,e){const{size:r,min:i,max:s,padding:o}=e,a=r/2;return r>s-i?(s+i)/2:(i>=n-o-a&&(n=i+o+a),s<=n+o+a&&(n=s-o-a),n)}function Mte(n){const e=n.options,r=e.arrowHeads&&e.arrowHeads.start,i=e.arrowHeads&&e.arrowHeads.end;return{startOpts:r,endOpts:i,startAdjust:hF(n,r),endAdjust:hF(n,i)}}function hF(n,e){if(!e||!e.display)return 0;const{length:r,width:i}=e,s=n.options.borderWidth/2,o={x:r,y:i+s};return Math.abs($O(0,o,{x:0,y:s}))}function UO(n,e,r,i){if(!i||!i.display)return;const{length:s,width:o,fill:a,backgroundColor:l,borderColor:c}=i,u=Math.abs(e-s)+r;n.beginPath(),Nf(n,i),Ra(n,i),n.moveTo(u,-o),n.lineTo(e+r,0),n.lineTo(u,o),a===!0?(n.fillStyle=l||c,n.closePath(),n.fill(),n.shadowColor="transparent"):n.shadowColor=i.borderShadowColor,n.stroke()}function TDe(n,e,r){const{x:i,y:s,x2:o,y2:a,centerX:l,centerY:c}=n,u=Math.atan2(a-s,o-i),h=vN(e.controlPoint,0),d={x:l+Yl(r,h.x,!1),y:c+Yl(r,h.y,!1)};return Wu(d,{x:l,y:c},u)}function fF(n,{x:e,y:r},{angle:i,adjust:s},o){!o||!o.display||(n.save(),n.translate(e,r),n.rotate(i),UO(n,0,-s,o),n.restore())}function PDe(n,e,r,i){const{x:s,y:o,x2:a,y2:l,options:c}=e,{startOpts:u,endOpts:h,startAdjust:d,endAdjust:f}=Mte(e),p={x:s,y:o},g={x:a,y:l},b=aF(p,r,g,0),y=aF(p,r,g,1)-Vt,v=zO(p,r,g,d/i),w=zO(p,r,g,1-f/i),k=new Path2D;n.beginPath(),k.moveTo(v.x,v.y),k.quadraticCurveTo(r.x,r.y,w.x,w.y),n.shadowColor=c.borderShadowColor,n.stroke(k),e.path=k,e.ctx=n,fF(n,v,{angle:b,adjust:d},u),fF(n,w,{angle:y,adjust:f},h)}class M0 extends Si{inRange(e,r,i,s){const o=this.options.rotation,a=(this.options.borderWidth+this.options.hitTolerance)/2;if(i!=="x"&&i!=="y")return MDe({x:e,y:r},this.getProps(["width","height","centerX","centerY"],s),o,a);const{x:l,y:c,x2:u,y2:h}=this.getProps(["x","y","x2","y2"],s),d=i==="y"?{start:c,end:h}:{start:l,end:u},f=Wu({x:e,y:r},this.getCenterPoint(s),ur(-o));return f[i]>=d.start-a-zc&&f[i]<=d.end+a+zc}getCenterPoint(e){return Hu(this,e)}draw(e){const{width:r,height:i,centerX:s,centerY:o,options:a}=this;e.save(),f1(e,this.getCenterPoint(),a.rotation),Nf(e,this.options),e.beginPath(),e.fillStyle=a.backgroundColor;const l=Ra(e,a);e.ellipse(s,o,i/2,r/2,Vt/2,0,2*Vt),e.fill(),l&&(e.shadowColor=a.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){return Ete(e,r)}}M0.id="ellipseAnnotation";M0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},jf.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};M0.defaultRoutes={borderColor:"color",backgroundColor:"color"};M0.descriptors={label:{_fallback:!0}};function MDe(n,e,r,i){const{width:s,height:o,centerX:a,centerY:l}=e,c=s/2,u=o/2;if(c<=0||u<=0)return!1;const h=ur(r||0),d=Math.cos(h),f=Math.sin(h),p=Math.pow(d*(n.x-a)+f*(n.y-l),2),g=Math.pow(f*(n.x-a)-d*(n.y-l),2);return p/Math.pow(c+i,2)+g/Math.pow(u+i,2)<=1.0001}class g1 extends Si{inRange(e,r,i,s){const{x:o,y:a,x2:l,y2:c,width:u}=this.getProps(["x","y","x2","y2","width"],s),h=(this.options.borderWidth+this.options.hitTolerance)/2;return i!=="x"&&i!=="y"?SMe({x:e,y:r},this.getCenterPoint(s),u/2,h):lte(i==="y"?{start:a,end:c,value:r}:{start:o,end:l,value:e},h)}getCenterPoint(e){return Hu(this,e)}draw(e){const r=this.options,i=r.borderWidth;if(r.radius<.1)return;e.save(),e.fillStyle=r.backgroundColor,Nf(e,r);const s=Ra(e,r);OMe(e,this,this.centerX,this.centerY),s&&!h1(r.pointStyle)&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore(),r.borderWidth=i}resolveElementProperties(e,r){const i=Cte(e,r);return i.initProperties=Af(e,i,r),i}}g1.id="pointAnnotation";g1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};g1.defaultRoutes={borderColor:"color",backgroundColor:"color"};class v1 extends Si{inRange(e,r,i,s){if(i!=="x"&&i!=="y")return this.options.radius>=.1&&this.elements.length>1&&ODe(this.elements,e,r,s);const o=Wu({x:e,y:r},this.getCenterPoint(s),ur(-this.options.rotation)),a=this.elements.map(u=>i==="y"?u.bY:u.bX),l=Math.min(...a),c=Math.max(...a);return o[i]>=l&&o[i]<=c}getCenterPoint(e){return Hu(this,e)}draw(e){const{elements:r,options:i}=this;e.save(),e.beginPath(),e.fillStyle=i.backgroundColor,Nf(e,i);const s=Ra(e,i);let o=!0;for(const a of r)o?(e.moveTo(a.x,a.y),o=!1):e.lineTo(a.x,a.y);e.closePath(),e.fill(),s&&(e.shadowColor=i.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,r){const i=Cte(e,r),{sides:s,rotation:o}=r,a=[],l=2*Vt/s;let c=o*rN;for(let u=0;u<s;u++,c+=l){const h=DDe(i,r,c);h.initProperties=Af(e,i,r),a.push(h)}return i.elements=a,i}}v1.id="polygonAnnotation";v1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};v1.defaultRoutes={borderColor:"color",backgroundColor:"color"};function DDe({centerX:n,centerY:e},{radius:r,borderWidth:i,hitTolerance:s},o){const a=(i+s)/2,l=Math.sin(o),c=Math.cos(o),u={x:n+l*r,y:e-c*r};return{type:"point",optionScope:"point",properties:{x:u.x,y:u.y,centerX:u.x,centerY:u.y,bX:n+l*(r+a),bY:e-c*(r+a)}}}function ODe(n,e,r,i){let s=!1,o=n[n.length-1].getProps(["bX","bY"],i);for(const a of n){const l=a.getProps(["bX","bY"],i);l.bY>r!=o.bY>r&&e<(o.bX-l.bX)*(r-l.bY)/(o.bY-l.bY)+l.bX&&(s=!s),o=l}return s}const zl={box:jf,doughnutLabel:m1,ellipse:M0,label:T0,line:P0,point:g1,polygon:v1};Object.keys(zl).forEach(n=>{Nn.describe(`elements.${zl[n].id}`,{_fallback:"plugins.annotation.common"})});const IDe={update:Object.assign},RDe=yN.concat(jx),pF=(n,e)=>Tt(e)?WO(n,e):n,qO=n=>n==="color"||n==="font";function wN(n="line"){return zl[n]?n:(console.warn(`Unknown annotation type: '${n}', defaulting to 'line'`),"line")}function ADe(n,e,r,i){const s=jDe(n,r.animations,i),o=e.annotations,a=$De(e.elements,o);for(let l=0;l<o.length;l++){const c=o[l],u=Dte(a,l,c.type),h=c.setContext(FDe(n,u,a,c)),d=u.resolveElementProperties(n,h);d.skip=NDe(d),"elements"in d&&(LDe(u,d.elements,h,s),delete d.elements),Ui(u.x)||Object.assign(u,d),Object.assign(u,d.initProperties),d.options=Ote(h),s.update(u,d)}}function NDe(n){return isNaN(n.x)||isNaN(n.y)}function jDe(n,e,r){return r==="reset"||r==="none"||r==="resize"?IDe:new fN(n,e)}function LDe(n,e,r,i){const s=n.elements||(n.elements=[]);s.length=e.length;for(let o=0;o<e.length;o++){const a=e[o],l=a.properties,c=Dte(s,o,a.type,a.initProperties),u=r[a.optionScope].override(a);l.options=Ote(u),i.update(c,l)}}function Dte(n,e,r,i){const s=zl[wN(r)];let o=n[e];return(!o||!(o instanceof s))&&(o=n[e]=new s,Object.assign(o,i)),o}function Ote(n){const e=zl[wN(n.type)],r={};r.id=n.id,r.type=n.type,r.drawTime=n.drawTime,Object.assign(r,WO(n,e.defaults),WO(n,e.defaultRoutes));for(const i of RDe)r[i]=n[i];return r}function WO(n,e){const r={};for(const i of Object.keys(e)){const s=e[i],o=n[i];qO(i)&&Cn(o)?r[i]=o.map(a=>pF(a,s)):r[i]=pF(o,s)}return r}function FDe(n,e,r,i){return e.$context||(e.$context=Object.assign(Object.create(n.getContext()),{element:e,get elements(){return r.filter(s=>s&&s.options)},id:i.id,type:"annotation"}))}function $De(n,e){const r=e.length,i=n.length;if(i<r){const s=r-i;n.splice(i,0,...new Array(s))}else i>r&&n.splice(r,i-r);return n}var zDe="3.1.0";const ol=new Map,mF=n=>n.type!=="doughnutLabel",BDe=yN.concat(jx);var UDe={id:"annotation",version:zDe,beforeRegister(){kMe("chart.js","4.0",au.version)},afterRegister(){au.register(zl)},afterUnregister(){au.unregister(zl)},beforeInit(n){ol.set(n,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(n,e,r){const i=ol.get(n),s=i.annotations=[];let o=r.annotations;Tt(o)?Object.keys(o).forEach(a=>{const l=o[a];Tt(l)&&(l.id=a,s.push(l))}):Cn(o)&&s.push(...o),iDe(s.filter(mF),n.scales)},afterDataLimits(n,e){const r=ol.get(n);rDe(n,e.scale,r.annotations.filter(mF).filter(i=>i.display&&i.adjustScaleRange))},afterUpdate(n,e,r){const i=ol.get(n);JMe(n,i,r),ADe(n,i,r,e.mode),i.visibleElements=i.elements.filter(s=>!s.skip&&s.options.display),nDe(n,i,r)},beforeDatasetsDraw(n,e,r){Op(n,"beforeDatasetsDraw",r.clip)},afterDatasetsDraw(n,e,r){Op(n,"afterDatasetsDraw",r.clip)},beforeDatasetDraw(n,e,r){Op(n,e.index,r.clip)},beforeDraw(n,e,r){Op(n,"beforeDraw",r.clip)},afterDraw(n,e,r){Op(n,"afterDraw",r.clip)},beforeEvent(n,e,r){const i=ol.get(n);ZMe(i,e.event,r)&&(e.changed=!0)},afterDestroy(n){ol.delete(n)},getAnnotations(n){const e=ol.get(n);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(n,e,r){return mN(n,e,r)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:n=>!BDe.includes(n)&&n!=="init",annotations:{_allKeys:!1,_fallback:(n,e)=>`elements.${zl[wN(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:qO,_fallback:!0},_indexable:qO}},additionalOptionScopes:[""]};function Op(n,e,r){const{ctx:i,chartArea:s}=n,o=ol.get(n);r&&o1(i,s);const a=qDe(o.visibleElements,e).sort((l,c)=>l.element.options.z-c.element.options.z);for(const l of a)WDe(i,s,o,l);r&&a1(i)}function qDe(n,e){const r=[];for(const i of n)if(i.options.drawTime===e&&r.push({element:i,main:!0}),i.elements&&i.elements.length)for(const s of i.elements)s.options.display&&s.options.drawTime===e&&r.push({element:s});return r}function WDe(n,e,r,i){const s=i.element;i.main?(tF(r,s,"beforeDraw"),s.draw(n,e),tF(r,s,"afterDraw")):s.draw(n,e)}au.register(jO,LO,by,im,KPe,rMe,YPe,UDe);const HDe=({minPrice:n,maxPrice:e,orders:r,pendingOrders:i=[],onAddOrder:s,onRemoveOrder:o,currentPrice:a,markPrice:l})=>{const c=D.useRef(null),[u,h]=D.useState(null),d=D.useMemo(()=>{const g=[...r,...i];return g.length>0?Math.max(...g.map(b=>b.amount),.1):.1},[r,i]),f=D.useMemo(()=>{const g=r.map(y=>({x:y.amount,y:y.price,id:y.id,side:y.side,isPending:!1})),b=i.map(y=>({x:y.amount,y:y.price,id:y.id,side:y.side,isPending:!0}));return{datasets:[{label:"Long Orders",data:g.filter(y=>{const v=r.find(w=>w.id===y.id);return(v==null?void 0:v.side)==="long"||(v==null?void 0:v.side)==="buy"||!(v!=null&&v.side)}),backgroundColor:"rgba(77, 171, 247, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Short Orders",data:g.filter(y=>{const v=r.find(w=>w.id===y.id);return(v==null?void 0:v.side)==="short"||(v==null?void 0:v.side)==="sell"}),backgroundColor:"rgba(255, 152, 0, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Pending Long",data:b.filter(y=>{const v=i.find(w=>w.id===y.id);return(v==null?void 0:v.side)==="long"||(v==null?void 0:v.side)==="buy"}),backgroundColor:"rgba(40, 167, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10},{label:"Pending Short",data:b.filter(y=>{const v=i.find(w=>w.id===y.id);return(v==null?void 0:v.side)==="short"||(v==null?void 0:v.side)==="sell"}),backgroundColor:"rgba(220, 53, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10}]}},[r,i]),p=D.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,backgroundColor:"#1a1a1a",plugins:{legend:{display:!0,position:"top",labels:{color:"#fff",font:{size:12}}},tooltip:{enabled:!0,callbacks:{label:g=>{const b=g.raw,y=[...r,...i].find(v=>v.id===b.id);return y?[`Price: ${y.price.toFixed(2)} USDC`,`Amount: ${y.amount.toFixed(4)} BTC`,y.isPending?`Pending ${y.side==="long"||y.side==="buy"?"Long":"Short"}`:""].filter(Boolean):`Price: ${b.y.toFixed(2)}, Amount: ${b.x.toFixed(4)}`}}},annotation:{annotations:{...a!==null&&a>=n&&a<=e?{currentPriceLine:{type:"line",xMin:0,xMax:d,yMin:a,yMax:a,borderColor:"#00ff00",borderWidth:2,borderDash:[5,5],label:{display:!0,content:`Current: ${a.toLocaleString()}`,position:"end",backgroundColor:"rgba(0, 255, 0, 0.8)",color:"#000",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y"}}:{},...l!==null&&l>=n&&l<=e?{markPriceLine:{type:"line",xMin:0,xMax:d,yMin:l,yMax:l,borderColor:"#ff0000",borderWidth:2,label:{display:!0,content:`Mark Price: ${l.toLocaleString()}`,position:"start",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y",arrowHeads:{start:{enabled:!1,fill:!1,length:0,width:0},end:{enabled:!0,fill:!0,length:15,width:10,backgroundColor:"#ff0000",borderColor:"#ff0000",borderWidth:2}}}}:{}}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Amount (BTC)",color:"#fff",font:{size:14,weight:"bold"}},min:0,max:d,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(g){return Number(g).toFixed(4)}},grid:{color:"#333"}},y:{type:"linear",title:{display:!0,text:"Price (USDC)",color:"#fff",font:{size:14,weight:"bold"}},min:n,max:e,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(g){return Number(g).toLocaleString()}},grid:{color:"#333"}}},onClick:(g,b)=>{if(!c.current)return;const y=c.current,v=y.canvas;if(!v)return;const w=v.getBoundingClientRect(),k=g.native;if(!k)return;const _=k.clientX-w.left,S=k.clientY-w.top,C=y.scales.x,E=y.scales.y,P=C.getValueForPixel(_),O=E.getValueForPixel(S);if(P==null||O===null||O===void 0)return;const R=[...r,...i].find(j=>{const B=C.getPixelForValue(j.amount),L=E.getPixelForValue(j.price);return Math.sqrt(Math.pow(_-B,2)+Math.pow(S-L,2))<=12});if(R)o(R.id);else{const j=Math.max(n,Math.min(e,O)),B=Math.max(.001,Math.min(1,P));s(j,B)}},onHover:(g,b)=>{if(!c.current)return;const y=c.current,v=y.canvas;if(!v)return;const w=v.getBoundingClientRect(),k=g.native;if(!k)return;const _=k.clientX-w.left,S=k.clientY-w.top,C=[...r,...i],E=y.scales.x,P=y.scales.y,O=C.find(M=>{const R=E.getPixelForValue(M.amount),j=P.getPixelForValue(M.price);return Math.sqrt(Math.pow(_-R,2)+Math.pow(S-j,2))<=10});h((O==null?void 0:O.id)||null)}}),[n,e,d,r,i,s,o,a,l]);return m.jsx("div",{className:"price-amount-chart-container",style:{height:"600px",position:"relative"},children:m.jsx("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #333",padding:"10px",height:"100%"},children:m.jsx(vMe,{ref:c,data:f,options:p,style:{cursor:u?"pointer":"crosshair"}})})})},VDe=({isOpen:n,onClose:e,minPrice:r,maxPrice:i,onMinPriceChange:s,onMaxPriceChange:o,markPrice:a,hasManualPriceChange:l,onResetToAuto:c,orderMode:u,onOrderModeChange:h,curveIntensity:d,onCurveIntensityChange:f,roundingStep:p,onRoundingStepChange:g})=>{const b=_=>Math.round(_/1.5/p)*p,y=_=>Math.round(_*1.5/p)*p;if(!n)return null;const v=a!=null&&a.mark_price?parseFloat(a.mark_price):null,w=v?b(v):null,k=v?y(v):null;return typeof document<"u"?Ql.createPortal(m.jsx("div",{className:"modal-overlay",onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:m.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:0,minWidth:"400px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[m.jsx("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:m.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:600,color:"rgba(255, 255, 255, 0.9)"},children:"Price Range Configuration"})}),m.jsx("div",{className:"modal-body",style:{padding:"2rem 1.5rem"},children:m.jsxs("div",{className:"trading-test-price-range-controls",children:[m.jsxs("div",{children:[m.jsxs("label",{children:["Rounding Step ($):",m.jsx("input",{type:"number",value:p,onChange:_=>g(Math.max(1,parseFloat(_.target.value)||100)),min:1,step:10,className:"trading-test-input"})]}),m.jsxs("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:["Prices will be rounded to the nearest $",p]})]}),m.jsxs("div",{children:[m.jsxs("label",{children:["Min Price (USDC):",m.jsx("input",{type:"number",value:r,onChange:_=>{s(parseFloat(_.target.value)||1e4)},min:1e3,max:i-1e3,className:"trading-test-input",disabled:(a==null?void 0:a.mark_price)!==null&&(a==null?void 0:a.mark_price)!==void 0,title:a!=null&&a.mark_price?`Auto-managed by mark price (mark price / 1.5, rounded to $${p})`:""})]}),(a==null?void 0:a.mark_price)&&w!==null&&m.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:l?m.jsxs(m.Fragment,{children:["Manual override (Auto:"," ",v.toLocaleString()," / 1.5 ="," ",w.toLocaleString(),")"]}):m.jsxs(m.Fragment,{children:["Auto: ",v.toLocaleString()," / 1.5 ="," ",r.toLocaleString()]})})]}),m.jsxs("div",{children:[m.jsxs("label",{children:["Max Price (USDC):",m.jsx("input",{type:"number",value:i,onChange:_=>{o(parseFloat(_.target.value)||1e5)},min:r+1e3,max:1e6,className:"trading-test-input",disabled:(a==null?void 0:a.mark_price)!==null&&(a==null?void 0:a.mark_price)!==void 0,title:a!=null&&a.mark_price?`Auto-managed by mark price (mark price  1.5, rounded to $${p})`:""})]}),(a==null?void 0:a.mark_price)&&k!==null&&m.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:l?m.jsxs(m.Fragment,{children:["Manual override (Auto:"," ",v.toLocaleString(),"  1.5 ="," ",k.toLocaleString(),")"]}):m.jsxs(m.Fragment,{children:["Auto: ",v.toLocaleString(),"  1.5 ="," ",i.toLocaleString()]})})]}),m.jsx("div",{children:m.jsxs("label",{children:["Order Mode:",m.jsxs("select",{value:u,onChange:_=>h(_.target.value),className:"trading-test-select",children:[m.jsx("option",{value:"random",children:"Random"}),m.jsx("option",{value:"curve",children:"Curve (Buy more at lower prices)"})]})]})}),u==="curve"&&m.jsx("div",{children:m.jsxs("label",{children:["Curve Intensity: ",d,m.jsx("input",{type:"range",value:d,onChange:_=>f(parseFloat(_.target.value)),min:1,max:5,step:.5,className:"trading-test-range"}),m.jsx("small",{children:"Higher = more aggressive buying at lower prices"})]})})]})}),m.jsxs("div",{className:"modal-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[l&&(a==null?void 0:a.mark_price)&&m.jsx("button",{onClick:c,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(77, 171, 247, 0.2)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Reset to Auto"}),m.jsx("div",{style:{display:"flex",gap:"1rem",marginLeft:"auto"},children:m.jsx("button",{onClick:e,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Close"})})]})]})}),document.body):null},YDe=({onClick:n,disabled:e,orderMode:r})=>m.jsxs("button",{onClick:n,disabled:e,className:"trading-test-button trading-test-button-primary",style:{backgroundColor:e?"#ccc":"#007bff",cursor:e?"not-allowed":"pointer"},children:["Submit Test Orders (",r==="random"?"Random":"Curve-Based",")"]}),GDe=({onClick:n,disabled:e,orderCount:r})=>m.jsxs("button",{onClick:n,disabled:e,className:"trading-test-button trading-test-button-success",style:{backgroundColor:e?"#ccc":"#28a745",cursor:e?"not-allowed":"pointer"},children:["Submit Chart Orders (",r," orders)"]}),KDe=({onClick:n,disabled:e})=>m.jsx("button",{onClick:n,disabled:e,className:"trading-test-button trading-test-button-secondary",style:{cursor:e?"not-allowed":"pointer"},children:"Reset Chart"}),XDe=({onClick:n,disabled:e,pendingCount:r})=>m.jsxs("button",{onClick:n,disabled:e,className:"trading-test-button trading-test-button-info",style:{backgroundColor:e?"#ccc":"#17a2b8",cursor:e?"not-allowed":"pointer"},children:["Load Pending Orders ",r>0&&`(${r})`]}),tk=({onClick:n,disabled:e,filter:r})=>{const i=r==="long"?"Cancel All Long":r==="short"?"Cancel All Short":"Cancel All Orders";return m.jsx("button",{onClick:n,disabled:e,className:"trading-test-button trading-test-button-danger",style:{backgroundColor:e?"#ccc":"#dc3545",cursor:e?"not-allowed":"pointer"},children:i})};function QDe(){var ue,ee,le,te;const[n,e]=D.useState(Pf),[r,i]=D.useState(""),[s,o]=D.useState(""),[a,l]=D.useState(""),[c,u]=D.useState(1e4),[h,d]=D.useState(1e5),[f,p]=D.useState(null),[g,b]=D.useState("random"),[y,v]=D.useState(2),[w,k]=D.useState("long"),[_,S]=D.useState([]),[C,E]=D.useState([]),[P,O]=D.useState([]),[M,R]=D.useState(!1),[j,B]=D.useState(!1),[L,$]=D.useState(100),z=D.useRef(null),W=D.useRef(null),q=D.useRef(n),V=D.useRef(0),{markets:F,getSymbolByMarketId:G}=tc({baseURL:n,sessionToken:"",autoFetchMarkets:!0}),{mnemonic:H,walletAddress:A,authToken:Q,setMnemonic:J}=Bu(),K=r?G(r):null,Z=K!==null?K:void 0,{markPrice:se}=$w({baseURL:n,wsURL:v0,marketId:r||"",symbol:Z}),[be,Oe]=D.useState(!1);D.useEffect(()=>{if(se!=null&&se.mark_price&&!be){const ce=parseFloat(se.mark_price);if(!isNaN(ce)&&ce>1e3){const je=Math.round(ce*1.5/L)*L,de=Math.round(ce/1.5/L)*L;de>0&&je>de&&(u(de),d(je))}}},[se==null?void 0:se.mark_price,be,L]),D.useEffect(()=>{H&&o(H),Q&&l(Q)},[H,Q]);const Ke=F.length>0?(((ue=F.find(ce=>ce.active))==null?void 0:ue.market_id)??F[0].market_id)||(((le=(ee=F.find(ce=>ce.active))==null?void 0:ee.id)==null?void 0:le.toString())??((te=F[0].id)==null?void 0:te.toString())??""):null;D.useEffect(()=>{Ke&&!r&&i(Ke)},[Ke]),D.useEffect(()=>{q.current=n},[n]),D.useEffect(()=>{s&&s.trim()!==""&&(z.current=new Zl({baseURL:q.current,mnemonic:s}),z.current.initialize().catch(ce=>{console.error("Failed to initialize ExchangeClient:",ce)}))},[s,n]),D.useEffect(()=>{W.current=new ar({baseURL:q.current})},[n]),D.useEffect(()=>{if(!r||!W.current)return;const ce=async()=>{try{const de=await W.current.getTicker(r);if(de!=null&&de.lastPrice){const Ae=typeof de.lastPrice=="string"?parseFloat(de.lastPrice):de.lastPrice;p(Ae)}}catch(de){console.error("Failed to fetch current price:",de)}};ce();const je=setInterval(ce,5e3);return()=>clearInterval(je)},[r]);const De=D.useCallback(ce=>{const je=[];for(let de=0;de<ce;de++){const Ae=c+Math.random()*(h-c),Le=.001+Math.random()*.01;je.push({price:Ae,amount:Le})}return je.sort((de,Ae)=>de.price-Ae.price)},[c,h]),Pe=D.useCallback(ce=>{const je=[],de=h-c;for(let Ae=0;Ae<ce;Ae++){const Le=Math.random(),ve=Math.pow(Le,y),he=c+ve*de,pe=.001+(h-he)/de*.02;je.push({price:he,amount:pe})}return je.sort((Ae,Le)=>Ae.price-Le.price)},[c,h,y]),We=D.useCallback(async()=>{if(!z.current||!r||!A){Je.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}R(!0);const ce=[];try{const de=g==="random"?De(10):Pe(10),Ae=Je.info("Submitting test orders",{description:`Submitting ${de.length} ${g} orders...`});V.current=typeof Ae=="number"?Ae:0;for(const ve of de){try{const ge=Ht("1"),pe=await z.current.placeOrder({marketId:r,side:w==="long"?"buy":"sell",orderType:"LIMIT",price:ve.price,quantity:ve.amount,timeInForce:"GTC",leverage:ge});ce.push({success:!0,order:{price:ve.price,amount:ve.amount,orderId:pe==null?void 0:pe.order_id},timestamp:Date.now()})}catch(he){ce.push({success:!1,order:{price:ve.price,amount:ve.amount},error:he.message,timestamp:Date.now()})}await new Promise(he=>setTimeout(he,200))}O(ve=>[...ve,...ce]),V.current!==0&&(Je.dismiss(V.current),V.current=0);const Le=ce.filter(ve=>ve.success).length;Je.success("Test orders submitted",{description:`${Le}/${ce.length} orders placed successfully.`})}catch(je){V.current!==0&&(Je.dismiss(V.current),V.current=0),Je.error("Test submission failed",{description:je.message||"Unknown error occurred"})}finally{R(!1)}},[r,A,g,w,De,Pe]),nt=D.useCallback(async()=>{if(!z.current||!r||!A){Je.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}if(_.length===0){Je.warning("No chart orders",{description:"Please add orders to the chart first."});return}R(!0);const ce=[];try{const je=Je.info("Submitting chart orders",{description:`Submitting ${_.length} chart orders...`});V.current=typeof je=="number"?je:0;for(const Ae of _){try{const ve=Ht("1"),he=await z.current.placeOrder({marketId:r,side:Ae.side==="short"||Ae.side==="sell"?"sell":"buy",orderType:"LIMIT",price:Ae.price,quantity:Ae.amount,timeInForce:"GTC",leverage:ve});ce.push({success:!0,order:{price:Ae.price,amount:Ae.amount,orderId:he==null?void 0:he.order_id},timestamp:Date.now()})}catch(Le){ce.push({success:!1,order:{price:Ae.price,amount:Ae.amount},error:Le.message,timestamp:Date.now()})}await new Promise(Le=>setTimeout(Le,200))}O(Ae=>[...Ae,...ce]),V.current!==0&&(Je.dismiss(V.current),V.current=0);const de=ce.filter(Ae=>Ae.success).length;Je.success("Chart orders submitted",{description:`${de}/${ce.length} orders placed successfully.`})}catch(je){V.current!==0&&(Je.dismiss(V.current),V.current=0),Je.error("Chart order submission failed",{description:je.message||"Unknown error occurred"})}finally{R(!1)}},[r,A,_]),U=D.useCallback(()=>{S([]),Je.info("Chart reset",{description:"All chart orders have been cleared."})},[]),_e=D.useCallback((ce,je)=>{const de={price:ce,amount:je,id:`chart-${Date.now()}-${Math.random()}`,side:w};S(Ae=>[...Ae,de])},[w]),Ie=D.useCallback(ce=>{S(je=>je.filter(de=>de.id!==ce)),E(je=>je.filter(de=>de.id!==ce))},[]),me=D.useCallback(async()=>{if(!W.current||!A||!r){Je.error("Setup required",{description:"Please ensure wallet address and market ID are configured."});return}try{Je.info("Loading pending orders...");const ce=await W.current.getOrders(A),je=(ce==null?void 0:ce.orders)||[];console.log(ce);const de=je.filter(Ae=>{const Le=Ae.market_id,ve=(Ae.status||"").toUpperCase();return Le===r&&["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(ve)}).map(Ae=>{const he=(Ae.side||"").toUpperCase().includes("BUY")?"long":"short";return{price:it(Ae.price),amount:it(Ae.quantity),id:`pending-${Ae.order_id}`,side:he,orderId:Ae.order_id,isPending:!0}});E(de),Je.success("Pending orders loaded",{description:`Loaded ${de.length} pending orders.`})}catch(ce){Je.error("Failed to load pending orders",{description:ce.message||"Unknown error occurred"})}},[A,r]),$e=D.useCallback(async ce=>{if(!z.current||!W.current||!r||!A){Je.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}try{const je=await W.current.getOrders(A),Ae=((je==null?void 0:je.orders)||[]).filter(he=>{const ge=he.market_id,pe=(he.status||"").toUpperCase();if(ge!==r||!["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(pe))return!1;if(ce==="all")return!0;const Re=(he.side||"").toUpperCase(),Ve=Re.includes("BUY"),Xe=Re.includes("SELL");return ce==="long"?Ve:ce==="short"?Xe:!1});if(Ae.length===0){Je.info("No orders to cancel",{description:`No ${ce} pending orders found.`});return}R(!0),Je.info("Canceling orders",{description:`Canceling ${Ae.length} ${ce} orders...`});let Le=0,ve=0;for(const he of Ae){try{const ge=he.order_id;await z.current.cancelOrder({orderId:ge,marketId:r}),Le++}catch(ge){ve++,console.error("Failed to cancel order:",ge)}await new Promise(ge=>setTimeout(ge,100))}await me(),Je.success("Orders canceled",{description:`${Le} orders canceled successfully${ve>0?`, ${ve} failed`:""}.`})}catch(je){Je.error("Failed to cancel orders",{description:je.message||"Unknown error occurred"})}finally{R(!1)}},[r,A,me]);return m.jsxs("div",{className:"App-content-row",children:[m.jsx("h1",{children:"Trading QA"}),m.jsx("p",{children:"Advanced trading test with price range, interactive chart, and multiple submission modes"}),m.jsxs("div",{className:"App-section",children:[m.jsx("h2",{children:"Configuration"}),m.jsxs("div",{className:"trading-test-config-grid",children:[m.jsx("div",{children:m.jsxs("label",{children:["HTTP Base URL:",m.jsx("input",{type:"text",value:n,onChange:ce=>e(ce.target.value),className:"trading-test-input"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Market:",m.jsx("select",{value:r||"",onChange:ce=>i(ce.target.value),className:"trading-test-select",children:F.length===0?m.jsx("option",{value:"",children:"Loading markets..."}):m.jsxs(m.Fragment,{children:[m.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),F.map(ce=>{var Ae;const je=ce.market_id??((Ae=ce.id)==null?void 0:Ae.toString())??"",de=ce.moniker?ce.moniker:ce.symbol?ce.symbol:`Market ID: ${je}`;return m.jsx("option",{value:je,children:de},je)})]})})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Mnemonic:",m.jsx("input",{type:"text",value:s,onChange:ce=>{o(ce.target.value),J(ce.target.value)},placeholder:"Enter mnemonic",className:"trading-test-input"})]})}),f&&m.jsxs("div",{className:"trading-test-price-display",children:[m.jsx("strong",{children:"Current Price:"})," ",f.toLocaleString()," ","USDC"]})]})]}),m.jsxs("div",{className:"trading-test-tabs",children:[m.jsx("button",{className:`trading-test-tab ${w==="long"?"active":""}`,onClick:()=>k("long"),children:"Long (Buy)"}),m.jsx("button",{className:`trading-test-tab ${w==="short"?"active":""}`,onClick:()=>k("short"),children:"Short (Sell)"})]}),m.jsxs("div",{className:"App-section",children:[m.jsx("h2",{children:"Interactive Price-Amount Chart"}),m.jsx("div",{className:"trading-test-chart-controls",children:m.jsxs("div",{className:"trading-test-chart-info",children:[m.jsxs("span",{children:["Orders on chart: ",_.length]}),m.jsxs("span",{onClick:()=>B(!0),style:{cursor:"pointer",textDecoration:"underline"},title:"Click to configure price range",children:["Price range: ",c.toLocaleString()," -"," ",h.toLocaleString()," USDC"]})]})}),m.jsx(HDe,{minPrice:c,maxPrice:h,orders:_,pendingOrders:C,onAddOrder:_e,onRemoveOrder:Ie,currentPrice:f,markPrice:se!=null&&se.mark_price?parseFloat(se.mark_price):null}),m.jsxs("div",{className:"price-amount-chart-instructions",children:[m.jsx("p",{children:"Click on the chart to add orders. Click on existing orders to remove them."}),m.jsx("p",{children:"Y-axis: Price (USDC) | X-axis: Amount (BTC)"})]})]}),m.jsxs("div",{className:"App-section",children:[m.jsx("h2",{children:"Order Submission"}),m.jsxs("div",{className:"trading-test-submission-buttons",children:[m.jsx(KDe,{onClick:U,disabled:_.length===0}),m.jsx(YDe,{onClick:We,disabled:M||!r||!A,orderMode:g}),m.jsx(GDe,{onClick:nt,disabled:M||_.length===0||!r||!A,orderCount:_.length})]}),m.jsx("h2",{children:"Pending Orders Management"}),m.jsxs("div",{className:"trading-test-pending-orders-controls",children:[m.jsx(XDe,{onClick:me,disabled:!r||!A,pendingCount:C.length}),m.jsxs("div",{className:"trading-test-cancel-buttons",children:[m.jsx(tk,{onClick:()=>$e("long"),disabled:M||!r||!A,filter:"long"}),m.jsx(tk,{onClick:()=>$e("short"),disabled:M||!r||!A,filter:"short"}),m.jsx(tk,{onClick:()=>$e("all"),disabled:M||!r||!A,filter:"all"})]})]})]}),P.length>0&&m.jsxs("div",{className:"trading-test-results",children:[m.jsx("h2",{children:"Test Results"}),m.jsxs("div",{className:"trading-test-results-summary",children:[m.jsxs("div",{children:["Total: ",P.length," | Success:"," ",P.filter(ce=>ce.success).length," | Failed:"," ",P.filter(ce=>!ce.success).length]}),m.jsx("button",{onClick:()=>O([]),className:"trading-test-button-secondary",children:"Clear Results"})]}),m.jsx("div",{className:"trading-test-results-list",children:P.slice(-20).map((ce,je)=>m.jsx("div",{className:`trading-test-result-item ${ce.success?"success":"error"}`,children:m.jsxs("div",{children:[m.jsxs("strong",{children:[ce.success?"":""," Order @"," ",ce.order.price.toFixed(2)," USDC"]}),m.jsxs("span",{children:["Amount: ",ce.order.amount.toFixed(4)," BTC"]}),ce.order.orderId&&m.jsxs("span",{children:["Order ID: ",ce.order.orderId.substring(0,16),"..."]}),ce.error&&m.jsx("span",{className:"error-text",children:ce.error})]})},je))})]}),m.jsx(VDe,{isOpen:j,onClose:()=>B(!1),minPrice:c,maxPrice:h,onMinPriceChange:ce=>{u(ce),Oe(!0)},onMaxPriceChange:ce=>{d(ce),Oe(!0)},markPrice:se,hasManualPriceChange:be,onResetToAuto:()=>{if(se!=null&&se.mark_price){const ce=parseFloat(se.mark_price);if(!isNaN(ce)&&ce>1e3){Oe(!1);const je=Math.round(ce*1.5/L)*L,de=Math.round(ce/1.5/L)*L;de>0&&je>de&&(u(de),d(je))}}},orderMode:g,onOrderModeChange:b,curveIntensity:y,onCurveIntensityChange:v,roundingStep:L,onRoundingStepChange:$})]})}const Cb=[{symbol:"ETH",name:"Ethereum",address:"ETH",decimals:18},{symbol:"BTC",name:"Bitcoin",address:"BTC",decimals:8},{symbol:"USDC",name:"USD Coin",address:"USDC",decimals:6},{symbol:"USDT",name:"Tether",address:"USDT",decimals:6},{symbol:"DAI",name:"Dai Stablecoin",address:"DAI",decimals:18}];function JDe(){const[n,e]=D.useState(Pf),[r,i]=D.useState(Cb[0]),[s,o]=D.useState(Cb[2]),[a,l]=D.useState(""),[c,u]=D.useState(""),[h,d]=D.useState(!1),[f,p]=D.useState(!1),[g,b]=D.useState(!1),[y,v]=D.useState(.5),[w,k]=D.useState(null),[_,S]=D.useState(""),C=D.useRef(null),E=D.useRef(n),{mnemonic:P,walletAddress:O,setMnemonic:M}=Bu();D.useEffect(()=>{E.current=n},[n]),D.useEffect(()=>{P&&P.trim()!==""&&(C.current=new Zl({baseURL:E.current,mnemonic:P}),C.current.initialize().catch($=>{console.error("Failed to initialize ExchangeClient:",$)}))},[P,n]),D.useEffect(()=>{if(a&&parseFloat(a)>0&&r&&s){const z=parseFloat(a)*1;u(z.toFixed(6)),S(`1 ${r.symbol} = ${1 .toFixed(4)} ${s.symbol}`),k(.1)}else u(""),S(""),k(null)},[a,r,s]);const R=D.useCallback(()=>{const $=r;i(s),o($);const z=a;l(c),u(z)},[r,s,a,c]),j=D.useCallback(async()=>{if(!C.current||!r||!s||!a){Je.error("Setup required",{description:"Please ensure mnemonic and swap details are configured."});return}if(parseFloat(a)<=0){Je.error("Invalid amount",{description:"Please enter a valid amount to swap."});return}if(!O){Je.error("Wallet required",{description:"Please connect your wallet first."});return}b(!0);try{const $=parseFloat(a),W=parseFloat(c)*(1-y/100),q=Je.info("Swapping tokens",{description:`Swapping ${a} ${r.symbol} for ${s.symbol}...`});await C.current.swap({fromToken:r.address,toToken:s.address,amountIn:$,minAmountOut:W}),Je.dismiss(q),Je.success("Swap successful",{description:`Successfully swapped ${a} ${r.symbol} for ${s.symbol}`}),l(""),u("")}catch($){Je.error("Swap failed",{description:$.message||"Unknown error occurred"})}finally{b(!1)}},[r,s,a,c,y,O]),B=D.useMemo(()=>!!r&&!!s&&!!a&&parseFloat(a)>0&&!!O&&!g&&r.symbol!==s.symbol,[r,s,a,O,g]),L=$=>({ETH:"",BTC:"",USDC:"$",USDT:"$",DAI:""})[$]||"";return m.jsxs("div",{className:"App-content-row",children:[m.jsxs("div",{className:"swap-test-header",children:[m.jsx("h1",{children:"Swap"}),m.jsx("p",{className:"swap-test-subtitle",children:"Swap anytime, anywhere"})]}),m.jsxs("div",{className:"App-section swap-config-section",children:[m.jsx("h3",{children:"Configuration"}),m.jsxs("div",{className:"swap-config-grid",children:[m.jsx("div",{children:m.jsxs("label",{children:["HTTP Base URL:",m.jsx("input",{type:"text",value:n,onChange:$=>e($.target.value),className:"swap-input"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Mnemonic:",m.jsx("input",{type:"text",value:P||"",onChange:$=>M($.target.value),placeholder:"Enter mnemonic",className:"swap-input"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Wallet Address:",m.jsx("input",{type:"text",value:O||"",disabled:!0,placeholder:"Auto-generated from mnemonic",className:"swap-input"})]})}),m.jsx("div",{children:m.jsxs("label",{children:["Slippage Tolerance (%):",m.jsx("input",{type:"number",value:y,onChange:$=>v(parseFloat($.target.value)||.5),min:"0",max:"50",step:"0.1",className:"swap-input"})]})})]})]}),m.jsxs("div",{className:"swap-container",children:[m.jsxs("div",{className:"swap-card",children:[m.jsxs("div",{className:"swap-token-section",children:[m.jsx("div",{className:"swap-token-label",children:"Sell"}),m.jsxs("div",{className:"swap-token-input-group",children:[m.jsx("input",{type:"number",className:"swap-amount-input",placeholder:"0",value:a,onChange:$=>l($.target.value),min:"0",step:"any"}),m.jsxs("div",{className:"swap-token-selector-wrapper",children:[m.jsx("button",{className:"swap-token-selector",onClick:()=>{d(!h),p(!1)},children:r?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"swap-token-icon",children:L(r.symbol)}),m.jsx("span",{className:"swap-token-symbol",children:r.symbol}),m.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{children:"Select token"}),m.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]})}),h&&m.jsx("div",{className:"swap-token-dropdown",children:Cb.map($=>m.jsxs("button",{className:"swap-token-option",onClick:()=>{$.address===(s==null?void 0:s.address)?R():(i($),d(!1))},children:[m.jsx("span",{className:"swap-token-icon",children:L($.symbol)}),m.jsxs("div",{className:"swap-token-option-info",children:[m.jsx("span",{className:"swap-token-option-symbol",children:$.symbol}),m.jsx("span",{className:"swap-token-option-name",children:$.name})]})]},$.address))})]})]}),a&&parseFloat(a)>0&&m.jsxs("div",{className:"swap-token-value",children:["$",(parseFloat(a)*1).toFixed(2)]})]}),m.jsx("div",{className:"swap-button-container",children:m.jsx("button",{className:"swap-button-middle",onClick:R,"aria-label":"Swap tokens",children:m.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M4 6L8 2L12 6M12 10L8 14L4 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),m.jsxs("div",{className:"swap-token-section",children:[m.jsx("div",{className:"swap-token-label",children:"Buy"}),m.jsxs("div",{className:"swap-token-input-group",children:[m.jsx("input",{type:"number",className:"swap-amount-input",placeholder:"0",value:c,onChange:$=>u($.target.value),min:"0",step:"any",readOnly:!0}),m.jsxs("div",{className:"swap-token-selector-wrapper",children:[m.jsx("button",{className:"swap-token-selector",onClick:()=>{p(!f),d(!1)},children:s?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"swap-token-icon",children:L(s.symbol)}),m.jsx("span",{className:"swap-token-symbol",children:s.symbol}),m.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{children:"Select token"}),m.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]})}),f&&m.jsx("div",{className:"swap-token-dropdown",children:Cb.map($=>m.jsxs("button",{className:"swap-token-option",onClick:()=>{$.address===(r==null?void 0:r.address)?R():(o($),p(!1))},children:[m.jsx("span",{className:"swap-token-icon",children:L($.symbol)}),m.jsxs("div",{className:"swap-token-option-info",children:[m.jsx("span",{className:"swap-token-option-symbol",children:$.symbol}),m.jsx("span",{className:"swap-token-option-name",children:$.name})]})]},$.address))})]})]}),c&&parseFloat(c)>0&&m.jsxs("div",{className:"swap-token-value",children:["$",(parseFloat(c)*1).toFixed(2)]})]}),_&&m.jsxs("div",{className:"swap-info",children:[m.jsxs("div",{className:"swap-info-row",children:[m.jsx("span",{children:"Exchange Rate"}),m.jsx("span",{children:_})]}),w!==null&&m.jsxs("div",{className:"swap-info-row",children:[m.jsx("span",{children:"Price Impact"}),m.jsxs("span",{className:w>1?"swap-warning":"",children:[w.toFixed(2),"%"]})]}),m.jsxs("div",{className:"swap-info-row",children:[m.jsx("span",{children:"Slippage Tolerance"}),m.jsxs("span",{children:[y,"%"]})]})]}),m.jsx("button",{className:"swap-button-primary",onClick:j,disabled:!B,children:O?g?"Swapping...":(r==null?void 0:r.symbol)===(s==null?void 0:s.symbol)?"Select different tokens":!a||parseFloat(a)<=0?"Enter amount":"Swap":"Connect Wallet"})]}),m.jsx("div",{className:"swap-footer",children:m.jsx("p",{children:"Buy and sell crypto on 16+ networks including"})})]})]})}const Yo=({onClick:n,disabled:e=!1,variant:r="primary",children:i})=>m.jsx("button",{className:`explorer-button ${r}`,onClick:n,disabled:e,children:i}),ZDe=({wsURL:n,setWsURL:e,authToken:r,setAuthToken:i,deviceID:s,setDeviceID:o,shardId:a,setShardId:l,eventType:c,setEventType:u})=>m.jsxs("div",{className:"config-section",children:[m.jsx("h3",{children:"Configuration"}),m.jsxs("div",{className:"config-grid",children:[m.jsxs("div",{className:"config-item",children:[m.jsx("label",{htmlFor:"ws-url",children:"WebSocket URL"}),m.jsx("input",{id:"ws-url",type:"text",value:n,onChange:h=>e(h.target.value),placeholder:"ws://localhost:8080/ws"})]}),m.jsxs("div",{className:"config-item",children:[m.jsx("label",{htmlFor:"auth-token",children:"Auth Token (optional)"}),m.jsx("input",{id:"auth-token",type:"text",value:r,onChange:h=>i(h.target.value),placeholder:"JWT token"})]}),m.jsxs("div",{className:"config-item",children:[m.jsx("label",{htmlFor:"device-id",children:"Device ID"}),m.jsx("input",{id:"device-id",type:"text",value:s,onChange:h=>o(h.target.value),placeholder:"device-id"})]}),m.jsxs("div",{className:"config-item",children:[m.jsx("label",{htmlFor:"shard-id",children:"Shard ID (optional filter)"}),m.jsx("input",{id:"shard-id",type:"text",value:a,onChange:h=>l(h.target.value),placeholder:"e.g., 1, 2, 3"})]}),m.jsxs("div",{className:"config-item",children:[m.jsx("label",{htmlFor:"event-type",children:"Event Type (optional filter)"}),m.jsx("input",{id:"event-type",type:"text",value:c,onChange:h=>u(h.target.value),placeholder:"e.g., new_vertex, new_tx, validator_update"})]})]})]}),eOe=({message:n})=>{const{event:e,timestamp:r,type:i}=n,s=()=>{const{data:o}=e;switch(o.type){case"vertex":return m.jsx(tOe,{data:o});case"tx":return m.jsx(nOe,{data:o});case"unconfirmed_tx":return m.jsx(rOe,{data:o});case"validator":return m.jsx(iOe,{data:o});default:return m.jsx(sOe,{data:o})}};return m.jsxs("div",{className:`consensus-event-item ${i}`,children:[m.jsx("div",{className:"event-header",children:m.jsxs("div",{className:"event-meta",children:[m.jsx("span",{className:"event-type-badge",children:e.event_type}),m.jsx("span",{className:"event-time",children:new Date(r).toLocaleString()}),m.jsxs("span",{className:"event-shard",children:["Shard: ",e.source_shard]})]})}),m.jsxs("div",{className:"event-body",children:[m.jsxs("div",{className:"event-data-type",children:[m.jsx("strong",{children:"Data Type:"})," ",e.data.type]}),s(),m.jsxs("details",{className:"raw-data-details",children:[m.jsx("summary",{children:"View Raw JSON"}),m.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(e,null,2)})]})]})]})},tOe=({data:n})=>m.jsxs("div",{className:"event-details vertex-details",children:[m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"ID:"}),m.jsx("span",{className:"detail-value",children:n.id})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Shard ID:"}),m.jsx("span",{className:"detail-value",children:n.shard_id})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Status:"}),m.jsx("span",{className:"detail-value",children:n.status})]}),n.parent_ids&&n.parent_ids.length>0&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Parent IDs:"}),m.jsx("span",{className:"detail-value",children:n.parent_ids.join(", ")})]}),n.tx_count!==void 0&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"TX Count:"}),m.jsx("span",{className:"detail-value",children:n.tx_count})]}),n.state_root&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"State Root:"}),m.jsx("span",{className:"detail-value",children:n.state_root})]}),n.qc_achieved!==void 0&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"QC Achieved:"}),m.jsx("span",{className:"detail-value",children:n.qc_achieved?"Yes":"No"})]}),n.qc_vote_count!==void 0&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"QC Vote Count:"}),m.jsx("span",{className:"detail-value",children:n.qc_vote_count})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Timestamp:"}),m.jsx("span",{className:"detail-value",children:new Date(n.timestamp*1e3).toLocaleString()})]})]}),nOe=({data:n})=>m.jsxs("div",{className:"event-details tx-details",children:[m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"TX Hash:"}),m.jsx("span",{className:"detail-value",children:n.txhash||n.id})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Shard ID:"}),m.jsx("span",{className:"detail-value",children:n.shard_id})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Status:"}),m.jsx("span",{className:"detail-value",children:n.status})]}),n.from_address&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"From:"}),m.jsx("span",{className:"detail-value",children:n.from_address})]}),n.to_address&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"To:"}),m.jsx("span",{className:"detail-value",children:n.to_address})]}),n.amount&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Amount:"}),m.jsx("span",{className:"detail-value",children:n.amount})]}),n.tx_type&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"TX Type:"}),m.jsx("span",{className:"detail-value",children:n.tx_type})]}),n.nonce!==void 0&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Nonce:"}),m.jsx("span",{className:"detail-value",children:n.nonce})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Timestamp:"}),m.jsx("span",{className:"detail-value",children:new Date(n.timestamp*1e3).toLocaleString()})]})]}),rOe=({data:n})=>m.jsxs("div",{className:"event-details unconfirmed-tx-details",children:[m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"TX Hash:"}),m.jsx("span",{className:"detail-value",children:n.txhash||n.id})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Status:"}),m.jsx("span",{className:"detail-value status-pending",children:n.status})]}),n.from_address&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"From:"}),m.jsx("span",{className:"detail-value",children:n.from_address})]}),n.to_address&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"To:"}),m.jsx("span",{className:"detail-value",children:n.to_address})]}),n.amount&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Amount:"}),m.jsx("span",{className:"detail-value",children:n.amount})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Timestamp:"}),m.jsx("span",{className:"detail-value",children:new Date(n.timestamp*1e3).toLocaleString()})]})]}),iOe=({data:n})=>m.jsxs("div",{className:"event-details validator-details",children:[m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Validator ID:"}),m.jsx("span",{className:"detail-value",children:n.validator_id||n.id})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Shard ID:"}),m.jsx("span",{className:"detail-value",children:n.shard_id})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Status:"}),m.jsx("span",{className:"detail-value",children:n.validator_status||n.status})]}),n.voting_power!==void 0&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Voting Power:"}),m.jsx("span",{className:"detail-value",children:n.voting_power})]}),n.public_key&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Public Key:"}),m.jsx("span",{className:"detail-value public-key",children:n.public_key})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Timestamp:"}),m.jsx("span",{className:"detail-value",children:new Date(n.timestamp*1e3).toLocaleString()})]})]}),sOe=({data:n})=>m.jsxs("div",{className:"event-details generic-details",children:[m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"ID:"}),m.jsx("span",{className:"detail-value",children:n.id})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Type:"}),m.jsx("span",{className:"detail-value",children:n.type})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Status:"}),m.jsx("span",{className:"detail-value",children:n.status})]})]}),oOe=({events:n})=>n.length===0?m.jsx("div",{className:"consensus-event-list empty",children:m.jsx("p",{children:"No events received yet. Connect and subscribe to start receiving consensus events."})}):m.jsxs("div",{className:"consensus-event-list",children:[m.jsx("div",{className:"event-list-header",children:m.jsxs("h3",{children:["Consensus Events (",n.length,")"]})}),m.jsx("div",{className:"event-items",children:n.map(e=>m.jsx(eOe,{message:e},e.id))})]});function aOe(n){return n.type==="vertex"}function gF(n){return n.type==="tx"}function lOe(n){return n.type==="unconfirmed_tx"}function vF(){return{vertexMap:new Map,txMap:new Map,parentToChildren:new Map,orphanMap:new Map}}function bF(n){n.vertexMap.clear(),n.txMap.clear(),n.parentToChildren.clear(),n.orphanMap.clear()}const cOe=3e4,uOe=1e3;function dOe(n,e){var r;for(const[i,s]of e.orphanMap.entries())(r=s.parent_ids)!=null&&r.includes(n.id)&&(e.parentToChildren.has(n.id)||e.parentToChildren.set(n.id,new Set),e.parentToChildren.get(n.id).add(i),e.orphanMap.delete(i));if(n.parent_ids&&n.parent_ids.length>0&&!n.parent_ids.every(s=>e.vertexMap.has(s))){if(e.orphanMap.size>=uOe){const s=e.orphanMap.keys().next().value;s&&(e.orphanMap.delete(s),console.warn(`[dagUtils] Orphan buffer full, evicted: ${s}`))}e.orphanMap.set(n.id,n),console.warn(`[dagUtils] Orphaned vertex detected: ${n.id}`)}}function hOe(n,e=cOe){for(const[r]of n.orphanMap.entries())console.warn(`[dagUtils] Orphan timeout: ${r} - marking as missing parent`),n.orphanMap.delete(r)}const fOe=3e4;function pOe(n,e,r){const i=fOe;let s=null;for(const[o,a]of r.vertexMap.entries()){if(a.shardId!==n.shard_id)continue;const l=Math.abs(a.timestamp-e);l<i&&(!s||l<s.timeDiff)&&(s={vertexId:o,timeDiff:l})}return(s==null?void 0:s.vertexId)||null}function mOe(n,e){const{data:r,event_time:i}=n;if(aOe(r)){const s=r.parent_ids||[],o={id:r.id,type:"vertex",timestamp:i||r.timestamp,parents:s,children:[],data:r,shardId:r.shard_id};e.vertexMap.set(r.id,o),s.forEach(l=>{e.parentToChildren.has(l)||e.parentToChildren.set(l,new Set),e.parentToChildren.get(l).add(r.id)});const a=e.parentToChildren.get(r.id);return a&&(o.children=Array.from(a)),dOe(r,e),o}else if(gF(r)||lOe(r)){const s={id:r.id||r.txhash||`tx-${Date.now()}`,type:gF(r)?"tx":"unconfirmed_tx",timestamp:i||r.timestamp,parents:[],children:[],data:r,shardId:r.shard_id};e.txMap.set(s.id,s);const o=pOe(r,s.timestamp,e);if(o){const a=e.vertexMap.get(o);a&&(s.vertexId=o,s.parents=a.parents)}return s}return null}function gOe(n){for(const e of[...n.vertexMap.values(),...n.txMap.values()]){const r=n.parentToChildren.get(e.id);e.children=r?Array.from(r):[]}}function vOe(n,e){const r=mOe(n,e);return r?(gOe(e),{id:r.id,timestamp:r.timestamp,parents:r.parents,children:r.children,data:r.data,nodeType:r.type,shardId:r.shardId}):null}class bOe{constructor(e=500){Te(this,"timeoutId",null);Te(this,"accumulatedMessages",[]);Te(this,"waitMs");this.waitMs=e}add(e,r,i){this.accumulatedMessages.push(...e),this.timeoutId!==null&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{const s=this.accumulatedMessages.map(o=>vOe(o,r)).filter(o=>o!==null);this.accumulatedMessages=[],i(s),this.timeoutId=null},this.waitMs)}cancel(){this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.accumulatedMessages=[]}}const yOe=new bOe(500);function xOe(n,e,r){yOe.add(n,e,r)}function wOe(n){const e=new Map,r=i=>{if(e.has(i.id))return e.get(i.id);if(i.parents.length===0)return e.set(i.id,"root"),"root";const o=i.parents.map(a=>{const l=n.find(c=>c.id===a);return l?e.get(a)||r(l):null}).filter(a=>a!==null).join("-")||"root";return e.set(i.id,o),o};return n.map(i=>{const s=r(i),o=i.nodeType==="vertex"?"V":i.nodeType==="tx"?"TX":"UTX",a=i.id.length>8?i.id.slice(0,8)+"...":i.id;return{id:i.id,content:`${o} ${a}`,start:new Date(i.timestamp*1e3),group:s,title:`${i.nodeType} | Parents: ${i.parents.length} | Children: ${i.children.length} | Shard: ${i.shardId}`,className:`dag-node-${i.nodeType}`}})}function _Oe(n,e,r=5){if(!e)return n.length>100?{nodes:[],links:[]}:{nodes:n.map(c=>({id:c.id,label:`${c.nodeType==="vertex"?"V":"TX"} ${c.id.slice(0,8)}`,type:c.nodeType,shardId:c.shardId})),links:n.flatMap(c=>c.children.map(u=>({source:c.id,target:u})))};const i=new Set,s=[{id:e,depth:0}],o=[],a=[],l=new Set;for(;s.length>0;){const{id:c,depth:u}=s.shift();if(i.has(c)||u>r)continue;i.add(c);const h=n.find(d=>d.id===c);if(h){if(!l.has(c)){const d=h.nodeType==="vertex"?"V":"TX",f=h.id.length>8?h.id.slice(0,8)+"...":h.id;o.push({id:h.id,label:`${d} ${f}`,type:h.nodeType,shardId:h.shardId}),l.add(c)}h.children.forEach(d=>{a.push({source:c,target:d}),i.has(d)||s.push({id:d,depth:u+1})}),h.parents.forEach(d=>{if(a.push({source:d,target:c}),!l.has(d)){const f=n.find(p=>p.id===d);if(f){const p=f.nodeType==="vertex"?"V":"TX",g=f.id.length>8?f.id.slice(0,8)+"...":f.id;o.push({id:f.id,label:`${p} ${g}`,type:f.nodeType,shardId:f.shardId}),l.add(d)}}i.has(d)||s.push({id:d,depth:u+1})})}}return{nodes:o,links:a}}/**
 * vis-timeline and vis-graph2d
 * https://visjs.github.io/vis-timeline/
 *
 * Create a fully customizable, interactive timeline with items and ranges.
 *
 * @version 8.5.0
 * @date    2025-12-12T13:44:42.806Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function ni(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(!n||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var SOe=`.vis .overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  /* Must be displayed above for example selected Timeline items */
  z-index: 10;
}

.vis-active {
  box-shadow: 0 0 10px #86d5f8;
}
`;ni(SOe);var kOe=`/* override some bootstrap styles screwing up the timelines css */

.vis [class*="span"] {
  min-height: 0;
  width: auto;
}
`;ni(kOe);var COe=`div.vis-configuration {
  position: relative;
  display: block;
  float: left;
  font-size: 12px;
}

div.vis-configuration-wrapper {
  display: block;
  width: 700px;
}

div.vis-configuration-wrapper::after {
  clear: both;
  content: "";
  display: block;
}

div.vis-configuration.vis-config-option-container {
  display: block;
  width: 495px;
  background-color: #ffffff;
  border: 2px solid #f7f8fa;
  border-radius: 4px;
  margin-top: 20px;
  left: 10px;
  padding-left: 5px;
}

div.vis-configuration.vis-config-button {
  display: block;
  width: 495px;
  height: 25px;
  vertical-align: middle;
  line-height: 25px;
  background-color: #f7f8fa;
  border: 2px solid #ceced0;
  border-radius: 4px;
  margin-top: 20px;
  left: 10px;
  padding-left: 5px;
  cursor: pointer;
  margin-bottom: 30px;
}

div.vis-configuration.vis-config-button.hover {
  background-color: #4588e6;
  border: 2px solid #214373;
  color: #ffffff;
}

div.vis-configuration.vis-config-item {
  display: block;
  float: left;
  width: 495px;
  height: 25px;
  vertical-align: middle;
  line-height: 25px;
}

div.vis-configuration.vis-config-item.vis-config-s2 {
  left: 10px;
  background-color: #f7f8fa;
  padding-left: 5px;
  border-radius: 3px;
}
div.vis-configuration.vis-config-item.vis-config-s3 {
  left: 20px;
  background-color: #e4e9f0;
  padding-left: 5px;
  border-radius: 3px;
}
div.vis-configuration.vis-config-item.vis-config-s4 {
  left: 30px;
  background-color: #cfd8e6;
  padding-left: 5px;
  border-radius: 3px;
}

div.vis-configuration.vis-config-header {
  font-size: 18px;
  font-weight: bold;
}

div.vis-configuration.vis-config-label {
  width: 120px;
  height: 25px;
  line-height: 25px;
}

div.vis-configuration.vis-config-label.vis-config-s3 {
  width: 110px;
}
div.vis-configuration.vis-config-label.vis-config-s4 {
  width: 100px;
}

div.vis-configuration.vis-config-colorBlock {
  top: 1px;
  width: 30px;
  height: 19px;
  border: 1px solid #444444;
  border-radius: 2px;
  padding: 0px;
  margin: 0px;
  cursor: pointer;
}

input.vis-configuration.vis-config-checkbox {
  left: -5px;
}

input.vis-configuration.vis-config-rangeinput {
  position: relative;
  top: -5px;
  width: 60px;
  /*height:13px;*/
  padding: 1px;
  margin: 0;
  pointer-events: none;
}

input.vis-configuration.vis-config-range {
  /*removes default webkit styles*/
  -webkit-appearance: none;

  /*fix for FF unable to apply focus style bug */
  border: 0px solid white;
  background-color: rgba(0, 0, 0, 0);

  /*required for proper track sizing in FF*/
  width: 300px;
  height: 20px;
}
input.vis-configuration.vis-config-range::-webkit-slider-runnable-track {
  width: 300px;
  height: 5px;
  background: #dedede; /* Old browsers */
  background: -moz-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #dedede),
    color-stop(99%, #c8c8c8)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* IE10+ */
  background: linear-gradient(to bottom, #dedede 0%, #c8c8c8 99%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */

  border: 1px solid #999999;
  box-shadow: #aaaaaa 0px 0px 3px 0px;
  border-radius: 3px;
}
input.vis-configuration.vis-config-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  border: 1px solid #14334b;
  height: 17px;
  width: 17px;
  border-radius: 50%;
  background: #3876c2; /* Old browsers */
  background: -moz-linear-gradient(top, #3876c2 0%, #385380 100%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #3876c2),
    color-stop(100%, #385380)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #3876c2 0%,
    #385380 100%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #3876c2 0%,
    #385380 100%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #3876c2 0%, #385380 100%); /* IE10+ */
  background: linear-gradient(to bottom, #3876c2 0%, #385380 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3876c2', endColorstr='#385380',GradientType=0 ); /* IE6-9 */
  box-shadow: #111927 0px 0px 1px 0px;
  margin-top: -7px;
}
input.vis-configuration.vis-config-range:focus {
  outline: none;
}
input.vis-configuration.vis-config-range:focus::-webkit-slider-runnable-track {
  background: #9d9d9d; /* Old browsers */
  background: -moz-linear-gradient(top, #9d9d9d 0%, #c8c8c8 99%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #9d9d9d),
    color-stop(99%, #c8c8c8)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #9d9d9d 0%,
    #c8c8c8 99%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #9d9d9d 0%,
    #c8c8c8 99%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #9d9d9d 0%, #c8c8c8 99%); /* IE10+ */
  background: linear-gradient(to bottom, #9d9d9d 0%, #c8c8c8 99%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9d9d9d', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */
}

input.vis-configuration.vis-config-range::-moz-range-track {
  width: 300px;
  height: 10px;
  background: #dedede; /* Old browsers */
  background: -moz-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #dedede),
    color-stop(99%, #c8c8c8)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* IE10+ */
  background: linear-gradient(to bottom, #dedede 0%, #c8c8c8 99%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */

  border: 1px solid #999999;
  box-shadow: #aaaaaa 0px 0px 3px 0px;
  border-radius: 3px;
}
input.vis-configuration.vis-config-range::-moz-range-thumb {
  border: none;
  height: 16px;
  width: 16px;

  border-radius: 50%;
  background: #385380;
}

/*hide the outline behind the border*/
input.vis-configuration.vis-config-range:-moz-focusring {
  outline: 1px solid white;
  outline-offset: -1px;
}

input.vis-configuration.vis-config-range::-ms-track {
  width: 300px;
  height: 5px;

  /*remove bg colour from the track, we'll use ms-fill-lower and ms-fill-upper instead */
  background: transparent;

  /*leave room for the larger thumb to overflow with a transparent border */
  border-color: transparent;
  border-width: 6px 0;

  /*remove default tick marks*/
  color: transparent;
}
input.vis-configuration.vis-config-range::-ms-fill-lower {
  background: #777;
  border-radius: 10px;
}
input.vis-configuration.vis-config-range::-ms-fill-upper {
  background: #ddd;
  border-radius: 10px;
}
input.vis-configuration.vis-config-range::-ms-thumb {
  border: none;
  height: 16px;
  width: 16px;
  border-radius: 50%;
  background: #385380;
}
input.vis-configuration.vis-config-range:focus::-ms-fill-lower {
  background: #888;
}
input.vis-configuration.vis-config-range:focus::-ms-fill-upper {
  background: #ccc;
}

.vis-configuration-popup {
  position: absolute;
  background: rgba(57, 76, 89, 0.85);
  border: 2px solid #f2faff;
  line-height: 30px;
  height: 30px;
  width: 150px;
  text-align: center;
  color: #ffffff;
  font-size: 14px;
  border-radius: 4px;
  -webkit-transition: opacity 0.3s ease-in-out;
  -moz-transition: opacity 0.3s ease-in-out;
  transition: opacity 0.3s ease-in-out;
}
.vis-configuration-popup:after,
.vis-configuration-popup:before {
  left: 100%;
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none;
}

.vis-configuration-popup:after {
  border-color: rgba(136, 183, 213, 0);
  border-left-color: rgba(57, 76, 89, 0.85);
  border-width: 8px;
  margin-top: -8px;
}
.vis-configuration-popup:before {
  border-color: rgba(194, 225, 245, 0);
  border-left-color: #f2faff;
  border-width: 12px;
  margin-top: -12px;
}
`;ni(COe);var EOe=`div.vis-tooltip {
  position: absolute;
  visibility: hidden;
  padding: 5px;
  white-space: nowrap;

  font-family: verdana;
  font-size: 14px;
  color: #000000;
  background-color: #f5f4ed;

  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #808074;

  box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
  pointer-events: none;

  z-index: 5;
}
`;ni(EOe);var TOe=`.vis-timeline {
  /*
  -webkit-transition: height .4s ease-in-out;
  transition:         height .4s ease-in-out;
  */
}

.vis-panel {
  /*
  -webkit-transition: height .4s ease-in-out, top .4s ease-in-out;
  transition:         height .4s ease-in-out, top .4s ease-in-out;
  */
}

.vis-axis {
  /*
  -webkit-transition: top .4s ease-in-out;
  transition:         top .4s ease-in-out;
  */
}

/* TODO: get animation working nicely

.vis-item {
  -webkit-transition: top .4s ease-in-out;
  transition:         top .4s ease-in-out;
}

.vis-item.line {
  -webkit-transition: height .4s ease-in-out, top .4s ease-in-out;
  transition:         height .4s ease-in-out, top .4s ease-in-out;
}
/**/
`;ni(TOe);var POe=`.vis-current-time {
  background-color: #ff7f6e;
  width: 2px;
  z-index: 1;
  pointer-events: none;
}

.vis-rolling-mode-btn {
  height: 40px;
  width: 40px;
  position: absolute;
  top: 7px;
  right: 20px;
  border-radius: 50%;
  font-size: 28px;
  cursor: pointer;
  opacity: 0.8;
  color: white;
  font-weight: bold;
  text-align: center;
  background: #3876c2;
}
.vis-rolling-mode-btn:before {
  content: "\\26F6";
}

.vis-rolling-mode-btn:hover {
  opacity: 1;
}
`;ni(POe);var MOe=`.vis-custom-time {
  background-color: #6e94ff;
  width: 2px;
  cursor: move;
  z-index: 1;
}

.vis-custom-time > .vis-custom-time-marker {
  background-color: inherit;
  color: white;
  font-size: 12px;
  white-space: nowrap;
  padding: 3px 5px;
  top: 0px;
  cursor: initial;
  z-index: inherit;
}
`;ni(MOe);var DOe=`.vis-panel.vis-background.vis-horizontal .vis-grid.vis-horizontal {
  position: absolute;
  width: 100%;
  height: 0;
  border-bottom: 1px solid;
}

.vis-panel.vis-background.vis-horizontal .vis-grid.vis-minor {
  border-color: #e5e5e5;
}

.vis-panel.vis-background.vis-horizontal .vis-grid.vis-major {
  border-color: #bfbfbf;
}

.vis-data-axis .vis-y-axis.vis-major {
  width: 100%;
  position: absolute;
  color: #4d4d4d;
  white-space: nowrap;
}

.vis-data-axis .vis-y-axis.vis-major.vis-measure {
  padding: 0;
  margin: 0;
  border: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-minor {
  position: absolute;
  width: 100%;
  color: #bebebe;
  white-space: nowrap;
}

.vis-data-axis .vis-y-axis.vis-minor.vis-measure {
  padding: 0;
  margin: 0;
  border: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-title {
  position: absolute;
  color: #4d4d4d;
  white-space: nowrap;
  bottom: 20px;
  text-align: center;
}

.vis-data-axis .vis-y-axis.vis-title.vis-measure {
  padding: 0;
  margin: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-title.vis-left {
  bottom: 0;
  -webkit-transform-origin: left top;
  -moz-transform-origin: left top;
  -ms-transform-origin: left top;
  -o-transform-origin: left top;
  transform-origin: left bottom;
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.vis-data-axis .vis-y-axis.vis-title.vis-right {
  bottom: 0;
  -webkit-transform-origin: right bottom;
  -moz-transform-origin: right bottom;
  -ms-transform-origin: right bottom;
  -o-transform-origin: right bottom;
  transform-origin: right bottom;
  -webkit-transform: rotate(90deg);
  -moz-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  -o-transform: rotate(90deg);
  transform: rotate(90deg);
}

.vis-legend {
  background-color: rgba(247, 252, 255, 0.65);
  padding: 5px;
  border: 1px solid #b3b3b3;
  box-shadow: 2px 2px 10px rgba(154, 154, 154, 0.55);
}

.vis-legend-text {
  /*font-size: 10px;*/
  white-space: nowrap;
  display: inline-block;
}
`;ni(DOe);var OOe=`.vis-item {
  position: absolute;
  color: #1a1a1a;
  border-color: #97b0f8;
  border-width: 1px;
  background-color: #d5ddf6;
  display: inline-block;
  z-index: 1;
  /*overflow: hidden;*/
}

.vis-item.vis-selected {
  border-color: #ffc200;
  background-color: #fff785;

  /* z-index must be higher than the z-index of custom time bar and current time bar */
  z-index: 2;
}

.vis-editable.vis-selected {
  cursor: move;
}

.vis-item.vis-point.vis-selected {
  background-color: #fff785;
}

.vis-item.vis-box {
  text-align: center;
  border-style: solid;
  border-radius: 2px;
}

.vis-item.vis-point {
  background: none;
}

.vis-item.vis-dot {
  position: absolute;
  padding: 0;
  border-width: 4px;
  border-style: solid;
  border-radius: 4px;
}

.vis-item.vis-range {
  border-style: solid;
  border-radius: 2px;
  box-sizing: border-box;
}

.vis-item.vis-background {
  border: none;
  background-color: rgba(213, 221, 246, 0.4);
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

.vis-item .vis-item-overflow {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
  overflow: hidden;
}

.vis-item-visible-frame {
  white-space: nowrap;
}

.vis-item.vis-range .vis-item-content {
  position: relative;
  display: inline-block;
}

.vis-item.vis-background .vis-item-content {
  position: absolute;
  display: inline-block;
}

.vis-item.vis-line {
  padding: 0;
  position: absolute;
  width: 0;
  border-left-width: 1px;
  border-left-style: solid;
}

.vis-item .vis-item-content {
  white-space: nowrap;
  box-sizing: border-box;
  padding: 5px;
}

.vis-item .vis-onUpdateTime-tooltip {
  position: absolute;
  background: #4f81bd;
  color: white;
  width: 200px;
  text-align: center;
  white-space: nowrap;
  padding: 5px;
  border-radius: 1px;
  transition: 0.4s;
  -o-transition: 0.4s;
  -moz-transition: 0.4s;
  -webkit-transition: 0.4s;
}

.vis-item .vis-delete,
.vis-item .vis-delete-rtl {
  position: absolute;
  top: 0px;
  width: 24px;
  height: 24px;
  box-sizing: border-box;
  padding: 0px 5px;
  cursor: pointer;

  -webkit-transition: background 0.2s linear;
  -moz-transition: background 0.2s linear;
  -ms-transition: background 0.2s linear;
  -o-transition: background 0.2s linear;
  transition: background 0.2s linear;
}

.vis-item .vis-delete {
  right: -24px;
}

.vis-item .vis-delete-rtl {
  left: -24px;
}

.vis-item .vis-delete:after,
.vis-item .vis-delete-rtl:after {
  content: "\\00D7"; /* MULTIPLICATION SIGN */
  color: red;
  font-family: arial, sans-serif;
  font-size: 22px;
  font-weight: bold;

  -webkit-transition: color 0.2s linear;
  -moz-transition: color 0.2s linear;
  -ms-transition: color 0.2s linear;
  -o-transition: color 0.2s linear;
  transition: color 0.2s linear;
}

.vis-item .vis-delete:hover,
.vis-item .vis-delete-rtl:hover {
  background: red;
}

.vis-item .vis-delete:hover:after,
.vis-item .vis-delete-rtl:hover:after {
  color: white;
}

.vis-item .vis-drag-center {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0px;
  cursor: move;
}

.vis-item.vis-range .vis-drag-left {
  position: absolute;
  width: 24px;
  max-width: 20%;
  min-width: 2px;
  height: 100%;
  top: 0;
  left: -4px;

  cursor: w-resize;
}

.vis-item.vis-range .vis-drag-right {
  position: absolute;
  width: 24px;
  max-width: 20%;
  min-width: 2px;
  height: 100%;
  top: 0;
  right: -4px;

  cursor: e-resize;
}

.vis-range.vis-item.vis-readonly .vis-drag-left,
.vis-range.vis-item.vis-readonly .vis-drag-right {
  cursor: auto;
}

.vis-item.vis-cluster {
  vertical-align: center;
  text-align: center;
  border-style: solid;
  border-radius: 2px;
}

.vis-item.vis-cluster-line {
  padding: 0;
  position: absolute;
  width: 0;
  border-left-width: 1px;
  border-left-style: solid;
}

.vis-item.vis-cluster-dot {
  position: absolute;
  padding: 0;
  border-width: 4px;
  border-style: solid;
  border-radius: 4px;
}
`;ni(OOe);var IOe=`.vis-itemset {
  position: relative;
  padding: 0;
  margin: 0;

  box-sizing: border-box;
}

.vis-itemset .vis-background,
.vis-itemset .vis-foreground {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: visible;
}

.vis-axis {
  position: absolute;
  width: 100%;
  height: 0;
  left: 0;
  z-index: 1;
}

.vis-foreground .vis-group {
  position: relative;
  box-sizing: border-box;
  border-bottom: 1px solid #bfbfbf;
}

.vis-foreground .vis-group:last-child {
  border-bottom: none;
}

.vis-nesting-group {
  cursor: pointer;
}

.vis-label.vis-nested-group.vis-group-level-unknown-but-gte1 {
  background: #f5f5f5;
}
.vis-label.vis-nested-group.vis-group-level-0 {
  background-color: #ffffff;
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-0 .vis-inner {
  padding-left: 0;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-0 .vis-inner {
  padding-right: 0;
}
.vis-label.vis-nested-group.vis-group-level-1 {
  background-color: rgba(0, 0, 0, 0.05);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-1 .vis-inner {
  padding-left: 15px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-1 .vis-inner {
  padding-right: 15px;
}
.vis-label.vis-nested-group.vis-group-level-2 {
  background-color: rgba(0, 0, 0, 0.1);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-2 .vis-inner {
  padding-left: 30px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-2 .vis-inner {
  padding-right: 30px;
}
.vis-label.vis-nested-group.vis-group-level-3 {
  background-color: rgba(0, 0, 0, 0.15);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-3 .vis-inner {
  padding-left: 45px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-3 .vis-inner {
  padding-right: 45px;
}
.vis-label.vis-nested-group.vis-group-level-4 {
  background-color: rgba(0, 0, 0, 0.2);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-4 .vis-inner {
  padding-left: 60px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-4 .vis-inner {
  padding-right: 60px;
}
.vis-label.vis-nested-group.vis-group-level-5 {
  background-color: rgba(0, 0, 0, 0.25);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-5 .vis-inner {
  padding-left: 75px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-5 .vis-inner {
  padding-right: 75px;
}
.vis-label.vis-nested-group.vis-group-level-6 {
  background-color: rgba(0, 0, 0, 0.3);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-6 .vis-inner {
  padding-left: 90px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-6 .vis-inner {
  padding-right: 90px;
}
.vis-label.vis-nested-group.vis-group-level-7 {
  background-color: rgba(0, 0, 0, 0.35);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-7 .vis-inner {
  padding-left: 105px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-7 .vis-inner {
  padding-right: 105px;
}
.vis-label.vis-nested-group.vis-group-level-8 {
  background-color: rgba(0, 0, 0, 0.4);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-8 .vis-inner {
  padding-left: 120px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-8 .vis-inner {
  padding-right: 120px;
}
.vis-label.vis-nested-group.vis-group-level-9 {
  background-color: rgba(0, 0, 0, 0.45);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-9 .vis-inner {
  padding-left: 135px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-9 .vis-inner {
  padding-right: 135px;
}
/* default takes over beginning with level-10 (thats why we add .vis-nested-group
  to the selectors above, to have higher specifity than these rules for the defaults) */
.vis-label.vis-nested-group {
  background-color: rgba(0, 0, 0, 0.5);
}
.vis-ltr .vis-label.vis-nested-group .vis-inner {
  padding-left: 150px;
}
.vis-rtl .vis-label.vis-nested-group .vis-inner {
  padding-right: 150px;
}

.vis-group-level-unknown-but-gte1 {
  border: 1px solid red;
}

/* expanded/collapsed indicators */
.vis-label.vis-nesting-group:before,
.vis-label.vis-nesting-group:before {
  display: inline-block;
  width: 15px;
}
.vis-label.vis-nesting-group.expanded:before {
  content: "\\25BC";
}
.vis-label.vis-nesting-group.collapsed:before {
  content: "\\25B6";
}
.vis-rtl .vis-label.vis-nesting-group.collapsed:before {
  content: "\\25C0";
}
/* compensate missing expanded/collapsed indicator, but only at levels > 0 */
.vis-ltr .vis-label:not(.vis-nesting-group):not(.vis-group-level-0) {
  padding-left: 15px;
}
.vis-rtl .vis-label:not(.vis-nesting-group):not(.vis-group-level-0) {
  padding-right: 15px;
}

.vis-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
}
`;ni(IOe);var ROe=`.vis-labelset {
  position: relative;

  overflow: hidden;

  box-sizing: border-box;
}

.vis-labelset .vis-label {
  position: relative;
  left: 0;
  top: 0;
  width: 100%;
  color: #4d4d4d;

  box-sizing: border-box;
}

.vis-labelset .vis-label {
  border-bottom: 1px solid #bfbfbf;
}

.vis-labelset .vis-label.draggable {
  cursor: pointer;
}

.vis-group-is-dragging {
  background: rgba(0, 0, 0, 0.1);
}

.vis-labelset .vis-label:last-child {
  border-bottom: none;
}

.vis-labelset .vis-label .vis-inner {
  display: inline-block;
  padding: 5px;
}

.vis-labelset .vis-label .vis-inner.vis-hidden {
  padding: 0;
}
`;ni(ROe);var AOe=`.vis-panel {
  position: absolute;

  padding: 0;
  margin: 0;

  box-sizing: border-box;
}

.vis-panel.vis-center,
.vis-panel.vis-left,
.vis-panel.vis-right,
.vis-panel.vis-top,
.vis-panel.vis-bottom {
  border: 1px #bfbfbf;
}

.vis-panel.vis-center,
.vis-panel.vis-left,
.vis-panel.vis-right {
  border-top-style: solid;
  border-bottom-style: solid;
  overflow: hidden;
}

.vis-left.vis-panel.vis-vertical-scroll,
.vis-right.vis-panel.vis-vertical-scroll {
  height: 100%;
  overflow-x: hidden;
  overflow-y: scroll;
}

.vis-left.vis-panel.vis-vertical-scroll {
  direction: rtl;
}

.vis-left.vis-panel.vis-vertical-scroll .vis-content {
  direction: ltr;
}

.vis-right.vis-panel.vis-vertical-scroll {
  direction: ltr;
}

.vis-right.vis-panel.vis-vertical-scroll .vis-content {
  direction: rtl;
}

.vis-panel.vis-center,
.vis-panel.vis-top,
.vis-panel.vis-bottom {
  border-left-style: solid;
  border-right-style: solid;
}

.vis-background {
  overflow: hidden;
}

.vis-panel > .vis-content {
  position: relative;
}

.vis-panel .vis-shadow {
  position: absolute;
  width: 100%;
  height: 1px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
  /* TODO: find a nice way to ensure vis-shadows are drawn on top of items
  z-index: 1;
  */
}

.vis-panel .vis-shadow.vis-top {
  top: -1px;
  left: 0;
}

.vis-panel .vis-shadow.vis-bottom {
  bottom: -1px;
  left: 0;
}
`;ni(AOe);var NOe=`.vis-graph-group0 {
  fill: #4f81bd;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #4f81bd;
}

.vis-graph-group1 {
  fill: #f79646;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #f79646;
}

.vis-graph-group2 {
  fill: #8c51cf;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #8c51cf;
}

.vis-graph-group3 {
  fill: #75c841;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #75c841;
}

.vis-graph-group4 {
  fill: #ff0100;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #ff0100;
}

.vis-graph-group5 {
  fill: #37d8e6;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #37d8e6;
}

.vis-graph-group6 {
  fill: #042662;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #042662;
}

.vis-graph-group7 {
  fill: #00ff26;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #00ff26;
}

.vis-graph-group8 {
  fill: #ff00ff;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #ff00ff;
}

.vis-graph-group9 {
  fill: #8f3938;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #8f3938;
}

.vis-timeline .vis-fill {
  fill-opacity: 0.1;
  stroke: none;
}

.vis-timeline .vis-bar {
  fill-opacity: 0.5;
  stroke-width: 1px;
}

.vis-timeline .vis-point {
  stroke-width: 2px;
  fill-opacity: 1;
}

.vis-timeline .vis-legend-background {
  stroke-width: 1px;
  fill-opacity: 0.9;
  fill: #ffffff;
  stroke: #c2c2c2;
}

.vis-timeline .vis-outline {
  stroke-width: 1px;
  fill-opacity: 1;
  fill: #ffffff;
  stroke: #e5e5e5;
}

.vis-timeline .vis-icon-fill {
  fill-opacity: 0.3;
  stroke: none;
}
`;ni(NOe);var jOe=`.vis-time-axis {
  position: relative;
  overflow: hidden;
}

.vis-time-axis.vis-foreground {
  top: 0;
  left: 0;
  width: 100%;
}

.vis-time-axis.vis-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.vis-time-axis .vis-text {
  position: absolute;
  color: #4d4d4d;
  padding: 3px;
  overflow: hidden;
  box-sizing: border-box;

  white-space: nowrap;
}

.vis-time-axis .vis-text.vis-measure {
  position: absolute;
  padding-left: 0;
  padding-right: 0;
  margin-left: 0;
  margin-right: 0;
  visibility: hidden;
}

.vis-time-axis .vis-grid.vis-vertical {
  position: absolute;
  border-left: 1px solid;
}

.vis-time-axis .vis-grid.vis-vertical-rtl {
  position: absolute;
  border-right: 1px solid;
}

.vis-time-axis .vis-grid.vis-minor {
  border-color: #e5e5e5;
}

.vis-time-axis .vis-grid.vis-major {
  border-color: #bfbfbf;
}
`;ni(jOe);var LOe=`.vis-timeline {
  position: relative;
  border: 1px solid #bfbfbf;
  overflow: hidden;
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}

.vis-loading-screen {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}
`;ni(LOe);var yF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ut(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Qs(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var HO={exports:{}},xy={exports:{}},FOe=xy.exports,xF;function Js(){return xF||(xF=1,function(n,e){(function(r,i){n.exports=i()})(FOe,function(){var r;function i(){return r.apply(null,arguments)}function s(x){r=x}function o(x){return x instanceof Array||Object.prototype.toString.call(x)==="[object Array]"}function a(x){return x!=null&&Object.prototype.toString.call(x)==="[object Object]"}function l(x,T){return Object.prototype.hasOwnProperty.call(x,T)}function c(x){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(x).length===0;var T;for(T in x)if(l(x,T))return!1;return!0}function u(x){return x===void 0}function h(x){return typeof x=="number"||Object.prototype.toString.call(x)==="[object Number]"}function d(x){return x instanceof Date||Object.prototype.toString.call(x)==="[object Date]"}function f(x,T){var I=[],N,Y=x.length;for(N=0;N<Y;++N)I.push(T(x[N],N));return I}function p(x,T){for(var I in T)l(T,I)&&(x[I]=T[I]);return l(T,"toString")&&(x.toString=T.toString),l(T,"valueOf")&&(x.valueOf=T.valueOf),x}function g(x,T,I,N){return U3(x,T,I,N,!0).utc()}function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function y(x){return x._pf==null&&(x._pf=b()),x._pf}var v;Array.prototype.some?v=Array.prototype.some:v=function(x){var T=Object(this),I=T.length>>>0,N;for(N=0;N<I;N++)if(N in T&&x.call(this,T[N],N,T))return!0;return!1};function w(x){var T=null,I=!1,N=x._d&&!isNaN(x._d.getTime());if(N&&(T=y(x),I=v.call(T.parsedDateParts,function(Y){return Y!=null}),N=T.overflow<0&&!T.empty&&!T.invalidEra&&!T.invalidMonth&&!T.invalidWeekday&&!T.weekdayMismatch&&!T.nullInput&&!T.invalidFormat&&!T.userInvalidated&&(!T.meridiem||T.meridiem&&I),x._strict&&(N=N&&T.charsLeftOver===0&&T.unusedTokens.length===0&&T.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(x))x._isValid=N;else return N;return x._isValid}function k(x){var T=g(NaN);return x!=null?p(y(T),x):y(T).userInvalidated=!0,T}var _=i.momentProperties=[],S=!1;function C(x,T){var I,N,Y,ie=_.length;if(u(T._isAMomentObject)||(x._isAMomentObject=T._isAMomentObject),u(T._i)||(x._i=T._i),u(T._f)||(x._f=T._f),u(T._l)||(x._l=T._l),u(T._strict)||(x._strict=T._strict),u(T._tzm)||(x._tzm=T._tzm),u(T._isUTC)||(x._isUTC=T._isUTC),u(T._offset)||(x._offset=T._offset),u(T._pf)||(x._pf=y(T)),u(T._locale)||(x._locale=T._locale),ie>0)for(I=0;I<ie;I++)N=_[I],Y=T[N],u(Y)||(x[N]=Y);return x}function E(x){C(this,x),this._d=new Date(x._d!=null?x._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),S===!1&&(S=!0,i.updateOffset(this),S=!1)}function P(x){return x instanceof E||x!=null&&x._isAMomentObject!=null}function O(x){i.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+x)}function M(x,T){var I=!0;return p(function(){if(i.deprecationHandler!=null&&i.deprecationHandler(null,x),I){var N=[],Y,ie,Se,et=arguments.length;for(ie=0;ie<et;ie++){if(Y="",typeof arguments[ie]=="object"){Y+=`
[`+ie+"] ";for(Se in arguments[0])l(arguments[0],Se)&&(Y+=Se+": "+arguments[0][Se]+", ");Y=Y.slice(0,-2)}else Y=arguments[ie];N.push(Y)}O(x+`
Arguments: `+Array.prototype.slice.call(N).join("")+`
`+new Error().stack),I=!1}return T.apply(this,arguments)},T)}var R={};function j(x,T){i.deprecationHandler!=null&&i.deprecationHandler(x,T),R[x]||(O(T),R[x]=!0)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;function B(x){return typeof Function<"u"&&x instanceof Function||Object.prototype.toString.call(x)==="[object Function]"}function L(x){var T,I;for(I in x)l(x,I)&&(T=x[I],B(T)?this[I]=T:this["_"+I]=T);this._config=x,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function $(x,T){var I=p({},x),N;for(N in T)l(T,N)&&(a(x[N])&&a(T[N])?(I[N]={},p(I[N],x[N]),p(I[N],T[N])):T[N]!=null?I[N]=T[N]:delete I[N]);for(N in x)l(x,N)&&!l(T,N)&&a(x[N])&&(I[N]=p({},I[N]));return I}function z(x){x!=null&&this.set(x)}var W;Object.keys?W=Object.keys:W=function(x){var T,I=[];for(T in x)l(x,T)&&I.push(T);return I};var q={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function V(x,T,I){var N=this._calendar[x]||this._calendar.sameElse;return B(N)?N.call(T,I):N}function F(x,T,I){var N=""+Math.abs(x),Y=T-N.length,ie=x>=0;return(ie?I?"+":"":"-")+Math.pow(10,Math.max(0,Y)).toString().substr(1)+N}var G=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,H=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,A={},Q={};function J(x,T,I,N){var Y=N;typeof N=="string"&&(Y=function(){return this[N]()}),x&&(Q[x]=Y),T&&(Q[T[0]]=function(){return F(Y.apply(this,arguments),T[1],T[2])}),I&&(Q[I]=function(){return this.localeData().ordinal(Y.apply(this,arguments),x)})}function K(x){return x.match(/\[[\s\S]/)?x.replace(/^\[|\]$/g,""):x.replace(/\\/g,"")}function Z(x){var T=x.match(G),I,N;for(I=0,N=T.length;I<N;I++)Q[T[I]]?T[I]=Q[T[I]]:T[I]=K(T[I]);return function(Y){var ie="",Se;for(Se=0;Se<N;Se++)ie+=B(T[Se])?T[Se].call(Y,x):T[Se];return ie}}function se(x,T){return x.isValid()?(T=be(T,x.localeData()),A[T]=A[T]||Z(T),A[T](x)):x.localeData().invalidDate()}function be(x,T){var I=5;function N(Y){return T.longDateFormat(Y)||Y}for(H.lastIndex=0;I>=0&&H.test(x);)x=x.replace(H,N),H.lastIndex=0,I-=1;return x}var Oe={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Ke(x){var T=this._longDateFormat[x],I=this._longDateFormat[x.toUpperCase()];return T||!I?T:(this._longDateFormat[x]=I.match(G).map(function(N){return N==="MMMM"||N==="MM"||N==="DD"||N==="dddd"?N.slice(1):N}).join(""),this._longDateFormat[x])}var De="Invalid date";function Pe(){return this._invalidDate}var We="%d",nt=/\d{1,2}/;function U(x){return this._ordinal.replace("%d",x)}var _e={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ie(x,T,I,N){var Y=this._relativeTime[I];return B(Y)?Y(x,T,I,N):Y.replace(/%d/i,x)}function me(x,T){var I=this._relativeTime[x>0?"future":"past"];return B(I)?I(T):I.replace(/%s/i,T)}var $e={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ue(x){return typeof x=="string"?$e[x]||$e[x.toLowerCase()]:void 0}function ee(x){var T={},I,N;for(N in x)l(x,N)&&(I=ue(N),I&&(T[I]=x[N]));return T}var le={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function te(x){var T=[],I;for(I in x)l(x,I)&&T.push({unit:I,priority:le[I]});return T.sort(function(N,Y){return N.priority-Y.priority}),T}var ce=/\d/,je=/\d\d/,de=/\d{3}/,Ae=/\d{4}/,Le=/[+-]?\d{6}/,ve=/\d\d?/,he=/\d\d\d\d?/,ge=/\d\d\d\d\d\d?/,pe=/\d{1,3}/,fe=/\d{1,4}/,Re=/[+-]?\d{1,6}/,Ve=/\d+/,Xe=/[+-]?\d+/,Ye=/Z|[+-]\d\d:?\d\d/gi,He=/Z|[+-]\d\d(?::?\d\d)?/gi,ot=/[+-]?\d+(\.\d{1,3})?/,rt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ye=/^[1-9]\d?/,re=/^([1-9]\d|\d)/,ne;ne={};function xe(x,T,I){ne[x]=B(T)?T:function(N,Y){return N&&I?I:T}}function Ot(x,T){return l(ne,x)?ne[x](T._strict,T._locale):new RegExp(ft(x))}function ft(x){return It(x.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(T,I,N,Y,ie){return I||N||Y||ie}))}function It(x){return x.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ce(x){return x<0?Math.ceil(x)||0:Math.floor(x)}function we(x){var T=+x,I=0;return T!==0&&isFinite(T)&&(I=Ce(T)),I}var ct={};function Fe(x,T){var I,N=T,Y;for(typeof x=="string"&&(x=[x]),h(T)&&(N=function(ie,Se){Se[T]=we(ie)}),Y=x.length,I=0;I<Y;I++)ct[x[I]]=N}function dt(x,T){Fe(x,function(I,N,Y,ie){Y._w=Y._w||{},T(I,Y._w,Y,ie)})}function _t(x,T,I){T!=null&&l(ct,x)&&ct[x](T,I._a,I,x)}function pt(x){return x%4===0&&x%100!==0||x%400===0}var mt=0,yt=1,Ut=2,Yt=3,Jn=4,ri=5,to=6,Tn=7,C3=8;J("Y",0,0,function(){var x=this.year();return x<=9999?F(x,4):"+"+x}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),xe("Y",Xe),xe("YY",ve,je),xe("YYYY",fe,Ae),xe("YYYYY",Re,Le),xe("YYYYYY",Re,Le),Fe(["YYYYY","YYYYYY"],mt),Fe("YYYY",function(x,T){T[mt]=x.length===2?i.parseTwoDigitYear(x):we(x)}),Fe("YY",function(x,T){T[mt]=i.parseTwoDigitYear(x)}),Fe("Y",function(x,T){T[mt]=parseInt(x,10)});function cc(x){return pt(x)?366:365}i.parseTwoDigitYear=function(x){return we(x)+(we(x)>68?1900:2e3)};var E3=ed("FullYear",!0);function nie(){return pt(this.year())}function ed(x,T){return function(I){return I!=null?(T3(this,x,I),i.updateOffset(this,T),this):Xf(this,x)}}function Xf(x,T){if(!x.isValid())return NaN;var I=x._d,N=x._isUTC;switch(T){case"Milliseconds":return N?I.getUTCMilliseconds():I.getMilliseconds();case"Seconds":return N?I.getUTCSeconds():I.getSeconds();case"Minutes":return N?I.getUTCMinutes():I.getMinutes();case"Hours":return N?I.getUTCHours():I.getHours();case"Date":return N?I.getUTCDate():I.getDate();case"Day":return N?I.getUTCDay():I.getDay();case"Month":return N?I.getUTCMonth():I.getMonth();case"FullYear":return N?I.getUTCFullYear():I.getFullYear();default:return NaN}}function T3(x,T,I){var N,Y,ie,Se,et;if(!(!x.isValid()||isNaN(I))){switch(N=x._d,Y=x._isUTC,T){case"Milliseconds":return void(Y?N.setUTCMilliseconds(I):N.setMilliseconds(I));case"Seconds":return void(Y?N.setUTCSeconds(I):N.setSeconds(I));case"Minutes":return void(Y?N.setUTCMinutes(I):N.setMinutes(I));case"Hours":return void(Y?N.setUTCHours(I):N.setHours(I));case"Date":return void(Y?N.setUTCDate(I):N.setDate(I));case"FullYear":break;default:return}ie=I,Se=x.month(),et=x.date(),et=et===29&&Se===1&&!pt(ie)?28:et,Y?N.setUTCFullYear(ie,Se,et):N.setFullYear(ie,Se,et)}}function rie(x){return x=ue(x),B(this[x])?this[x]():this}function iie(x,T){if(typeof x=="object"){x=ee(x);var I=te(x),N,Y=I.length;for(N=0;N<Y;N++)this[I[N].unit](x[I[N].unit])}else if(x=ue(x),B(this[x]))return this[x](T);return this}function sie(x,T){return(x%T+T)%T}var $n;Array.prototype.indexOf?$n=Array.prototype.indexOf:$n=function(x){var T;for(T=0;T<this.length;++T)if(this[T]===x)return T;return-1};function H1(x,T){if(isNaN(x)||isNaN(T))return NaN;var I=sie(T,12);return x+=(T-I)/12,I===1?pt(x)?29:28:31-I%7%2}J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(x){return this.localeData().monthsShort(this,x)}),J("MMMM",0,0,function(x){return this.localeData().months(this,x)}),xe("M",ve,ye),xe("MM",ve,je),xe("MMM",function(x,T){return T.monthsShortRegex(x)}),xe("MMMM",function(x,T){return T.monthsRegex(x)}),Fe(["M","MM"],function(x,T){T[yt]=we(x)-1}),Fe(["MMM","MMMM"],function(x,T,I,N){var Y=I._locale.monthsParse(x,N,I._strict);Y!=null?T[yt]=Y:y(I).invalidMonth=x});var oie="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),P3="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),M3=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,aie=rt,lie=rt;function cie(x,T){return x?o(this._months)?this._months[x.month()]:this._months[(this._months.isFormat||M3).test(T)?"format":"standalone"][x.month()]:o(this._months)?this._months:this._months.standalone}function uie(x,T){return x?o(this._monthsShort)?this._monthsShort[x.month()]:this._monthsShort[M3.test(T)?"format":"standalone"][x.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function die(x,T,I){var N,Y,ie,Se=x.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],N=0;N<12;++N)ie=g([2e3,N]),this._shortMonthsParse[N]=this.monthsShort(ie,"").toLocaleLowerCase(),this._longMonthsParse[N]=this.months(ie,"").toLocaleLowerCase();return I?T==="MMM"?(Y=$n.call(this._shortMonthsParse,Se),Y!==-1?Y:null):(Y=$n.call(this._longMonthsParse,Se),Y!==-1?Y:null):T==="MMM"?(Y=$n.call(this._shortMonthsParse,Se),Y!==-1?Y:(Y=$n.call(this._longMonthsParse,Se),Y!==-1?Y:null)):(Y=$n.call(this._longMonthsParse,Se),Y!==-1?Y:(Y=$n.call(this._shortMonthsParse,Se),Y!==-1?Y:null))}function hie(x,T,I){var N,Y,ie;if(this._monthsParseExact)return die.call(this,x,T,I);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),N=0;N<12;N++){if(Y=g([2e3,N]),I&&!this._longMonthsParse[N]&&(this._longMonthsParse[N]=new RegExp("^"+this.months(Y,"").replace(".","")+"$","i"),this._shortMonthsParse[N]=new RegExp("^"+this.monthsShort(Y,"").replace(".","")+"$","i")),!I&&!this._monthsParse[N]&&(ie="^"+this.months(Y,"")+"|^"+this.monthsShort(Y,""),this._monthsParse[N]=new RegExp(ie.replace(".",""),"i")),I&&T==="MMMM"&&this._longMonthsParse[N].test(x))return N;if(I&&T==="MMM"&&this._shortMonthsParse[N].test(x))return N;if(!I&&this._monthsParse[N].test(x))return N}}function D3(x,T){if(!x.isValid())return x;if(typeof T=="string"){if(/^\d+$/.test(T))T=we(T);else if(T=x.localeData().monthsParse(T),!h(T))return x}var I=T,N=x.date();return N=N<29?N:Math.min(N,H1(x.year(),I)),x._isUTC?x._d.setUTCMonth(I,N):x._d.setMonth(I,N),x}function O3(x){return x!=null?(D3(this,x),i.updateOffset(this,!0),this):Xf(this,"Month")}function fie(){return H1(this.year(),this.month())}function pie(x){return this._monthsParseExact?(l(this,"_monthsRegex")||I3.call(this),x?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=aie),this._monthsShortStrictRegex&&x?this._monthsShortStrictRegex:this._monthsShortRegex)}function mie(x){return this._monthsParseExact?(l(this,"_monthsRegex")||I3.call(this),x?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=lie),this._monthsStrictRegex&&x?this._monthsStrictRegex:this._monthsRegex)}function I3(){function x(gt,Rt){return Rt.length-gt.length}var T=[],I=[],N=[],Y,ie,Se,et;for(Y=0;Y<12;Y++)ie=g([2e3,Y]),Se=It(this.monthsShort(ie,"")),et=It(this.months(ie,"")),T.push(Se),I.push(et),N.push(et),N.push(Se);T.sort(x),I.sort(x),N.sort(x),this._monthsRegex=new RegExp("^("+N.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+I.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+T.join("|")+")","i")}function gie(x,T,I,N,Y,ie,Se){var et;return x<100&&x>=0?(et=new Date(x+400,T,I,N,Y,ie,Se),isFinite(et.getFullYear())&&et.setFullYear(x)):et=new Date(x,T,I,N,Y,ie,Se),et}function Qf(x){var T,I;return x<100&&x>=0?(I=Array.prototype.slice.call(arguments),I[0]=x+400,T=new Date(Date.UTC.apply(null,I)),isFinite(T.getUTCFullYear())&&T.setUTCFullYear(x)):T=new Date(Date.UTC.apply(null,arguments)),T}function ev(x,T,I){var N=7+T-I,Y=(7+Qf(x,0,N).getUTCDay()-T)%7;return-Y+N-1}function R3(x,T,I,N,Y){var ie=(7+I-N)%7,Se=ev(x,N,Y),et=1+7*(T-1)+ie+Se,gt,Rt;return et<=0?(gt=x-1,Rt=cc(gt)+et):et>cc(x)?(gt=x+1,Rt=et-cc(x)):(gt=x,Rt=et),{year:gt,dayOfYear:Rt}}function Jf(x,T,I){var N=ev(x.year(),T,I),Y=Math.floor((x.dayOfYear()-N-1)/7)+1,ie,Se;return Y<1?(Se=x.year()-1,ie=Y+Lo(Se,T,I)):Y>Lo(x.year(),T,I)?(ie=Y-Lo(x.year(),T,I),Se=x.year()+1):(Se=x.year(),ie=Y),{week:ie,year:Se}}function Lo(x,T,I){var N=ev(x,T,I),Y=ev(x+1,T,I);return(cc(x)-N+Y)/7}J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),xe("w",ve,ye),xe("ww",ve,je),xe("W",ve,ye),xe("WW",ve,je),dt(["w","ww","W","WW"],function(x,T,I,N){T[N.substr(0,1)]=we(x)});function vie(x){return Jf(x,this._week.dow,this._week.doy).week}var bie={dow:0,doy:6};function yie(){return this._week.dow}function xie(){return this._week.doy}function wie(x){var T=this.localeData().week(this);return x==null?T:this.add((x-T)*7,"d")}function _ie(x){var T=Jf(this,1,4).week;return x==null?T:this.add((x-T)*7,"d")}J("d",0,"do","day"),J("dd",0,0,function(x){return this.localeData().weekdaysMin(this,x)}),J("ddd",0,0,function(x){return this.localeData().weekdaysShort(this,x)}),J("dddd",0,0,function(x){return this.localeData().weekdays(this,x)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),xe("d",ve),xe("e",ve),xe("E",ve),xe("dd",function(x,T){return T.weekdaysMinRegex(x)}),xe("ddd",function(x,T){return T.weekdaysShortRegex(x)}),xe("dddd",function(x,T){return T.weekdaysRegex(x)}),dt(["dd","ddd","dddd"],function(x,T,I,N){var Y=I._locale.weekdaysParse(x,N,I._strict);Y!=null?T.d=Y:y(I).invalidWeekday=x}),dt(["d","e","E"],function(x,T,I,N){T[N]=we(x)});function Sie(x,T){return typeof x!="string"?x:isNaN(x)?(x=T.weekdaysParse(x),typeof x=="number"?x:null):parseInt(x,10)}function kie(x,T){return typeof x=="string"?T.weekdaysParse(x)%7||7:isNaN(x)?null:x}function V1(x,T){return x.slice(T,7).concat(x.slice(0,T))}var Cie="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),A3="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Eie="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Tie=rt,Pie=rt,Mie=rt;function Die(x,T){var I=o(this._weekdays)?this._weekdays:this._weekdays[x&&x!==!0&&this._weekdays.isFormat.test(T)?"format":"standalone"];return x===!0?V1(I,this._week.dow):x?I[x.day()]:I}function Oie(x){return x===!0?V1(this._weekdaysShort,this._week.dow):x?this._weekdaysShort[x.day()]:this._weekdaysShort}function Iie(x){return x===!0?V1(this._weekdaysMin,this._week.dow):x?this._weekdaysMin[x.day()]:this._weekdaysMin}function Rie(x,T,I){var N,Y,ie,Se=x.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],N=0;N<7;++N)ie=g([2e3,1]).day(N),this._minWeekdaysParse[N]=this.weekdaysMin(ie,"").toLocaleLowerCase(),this._shortWeekdaysParse[N]=this.weekdaysShort(ie,"").toLocaleLowerCase(),this._weekdaysParse[N]=this.weekdays(ie,"").toLocaleLowerCase();return I?T==="dddd"?(Y=$n.call(this._weekdaysParse,Se),Y!==-1?Y:null):T==="ddd"?(Y=$n.call(this._shortWeekdaysParse,Se),Y!==-1?Y:null):(Y=$n.call(this._minWeekdaysParse,Se),Y!==-1?Y:null):T==="dddd"?(Y=$n.call(this._weekdaysParse,Se),Y!==-1||(Y=$n.call(this._shortWeekdaysParse,Se),Y!==-1)?Y:(Y=$n.call(this._minWeekdaysParse,Se),Y!==-1?Y:null)):T==="ddd"?(Y=$n.call(this._shortWeekdaysParse,Se),Y!==-1||(Y=$n.call(this._weekdaysParse,Se),Y!==-1)?Y:(Y=$n.call(this._minWeekdaysParse,Se),Y!==-1?Y:null)):(Y=$n.call(this._minWeekdaysParse,Se),Y!==-1||(Y=$n.call(this._weekdaysParse,Se),Y!==-1)?Y:(Y=$n.call(this._shortWeekdaysParse,Se),Y!==-1?Y:null))}function Aie(x,T,I){var N,Y,ie;if(this._weekdaysParseExact)return Rie.call(this,x,T,I);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),N=0;N<7;N++){if(Y=g([2e3,1]).day(N),I&&!this._fullWeekdaysParse[N]&&(this._fullWeekdaysParse[N]=new RegExp("^"+this.weekdays(Y,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[N]=new RegExp("^"+this.weekdaysShort(Y,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[N]=new RegExp("^"+this.weekdaysMin(Y,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[N]||(ie="^"+this.weekdays(Y,"")+"|^"+this.weekdaysShort(Y,"")+"|^"+this.weekdaysMin(Y,""),this._weekdaysParse[N]=new RegExp(ie.replace(".",""),"i")),I&&T==="dddd"&&this._fullWeekdaysParse[N].test(x))return N;if(I&&T==="ddd"&&this._shortWeekdaysParse[N].test(x))return N;if(I&&T==="dd"&&this._minWeekdaysParse[N].test(x))return N;if(!I&&this._weekdaysParse[N].test(x))return N}}function Nie(x){if(!this.isValid())return x!=null?this:NaN;var T=Xf(this,"Day");return x!=null?(x=Sie(x,this.localeData()),this.add(x-T,"d")):T}function jie(x){if(!this.isValid())return x!=null?this:NaN;var T=(this.day()+7-this.localeData()._week.dow)%7;return x==null?T:this.add(x-T,"d")}function Lie(x){if(!this.isValid())return x!=null?this:NaN;if(x!=null){var T=kie(x,this.localeData());return this.day(this.day()%7?T:T-7)}else return this.day()||7}function Fie(x){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Y1.call(this),x?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Tie),this._weekdaysStrictRegex&&x?this._weekdaysStrictRegex:this._weekdaysRegex)}function $ie(x){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Y1.call(this),x?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Pie),this._weekdaysShortStrictRegex&&x?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function zie(x){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Y1.call(this),x?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Mie),this._weekdaysMinStrictRegex&&x?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Y1(){function x(Fr,Uo){return Uo.length-Fr.length}var T=[],I=[],N=[],Y=[],ie,Se,et,gt,Rt;for(ie=0;ie<7;ie++)Se=g([2e3,1]).day(ie),et=It(this.weekdaysMin(Se,"")),gt=It(this.weekdaysShort(Se,"")),Rt=It(this.weekdays(Se,"")),T.push(et),I.push(gt),N.push(Rt),Y.push(et),Y.push(gt),Y.push(Rt);T.sort(x),I.sort(x),N.sort(x),Y.sort(x),this._weekdaysRegex=new RegExp("^("+Y.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+N.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+I.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+T.join("|")+")","i")}function G1(){return this.hours()%12||12}function Bie(){return this.hours()||24}J("H",["HH",2],0,"hour"),J("h",["hh",2],0,G1),J("k",["kk",2],0,Bie),J("hmm",0,0,function(){return""+G1.apply(this)+F(this.minutes(),2)}),J("hmmss",0,0,function(){return""+G1.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),J("Hmm",0,0,function(){return""+this.hours()+F(this.minutes(),2)}),J("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)});function N3(x,T){J(x,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),T)})}N3("a",!0),N3("A",!1);function j3(x,T){return T._meridiemParse}xe("a",j3),xe("A",j3),xe("H",ve,re),xe("h",ve,ye),xe("k",ve,ye),xe("HH",ve,je),xe("hh",ve,je),xe("kk",ve,je),xe("hmm",he),xe("hmmss",ge),xe("Hmm",he),xe("Hmmss",ge),Fe(["H","HH"],Yt),Fe(["k","kk"],function(x,T,I){var N=we(x);T[Yt]=N===24?0:N}),Fe(["a","A"],function(x,T,I){I._isPm=I._locale.isPM(x),I._meridiem=x}),Fe(["h","hh"],function(x,T,I){T[Yt]=we(x),y(I).bigHour=!0}),Fe("hmm",function(x,T,I){var N=x.length-2;T[Yt]=we(x.substr(0,N)),T[Jn]=we(x.substr(N)),y(I).bigHour=!0}),Fe("hmmss",function(x,T,I){var N=x.length-4,Y=x.length-2;T[Yt]=we(x.substr(0,N)),T[Jn]=we(x.substr(N,2)),T[ri]=we(x.substr(Y)),y(I).bigHour=!0}),Fe("Hmm",function(x,T,I){var N=x.length-2;T[Yt]=we(x.substr(0,N)),T[Jn]=we(x.substr(N))}),Fe("Hmmss",function(x,T,I){var N=x.length-4,Y=x.length-2;T[Yt]=we(x.substr(0,N)),T[Jn]=we(x.substr(N,2)),T[ri]=we(x.substr(Y))});function Uie(x){return(x+"").toLowerCase().charAt(0)==="p"}var qie=/[ap]\.?m?\.?/i,Wie=ed("Hours",!0);function Hie(x,T,I){return x>11?I?"pm":"PM":I?"am":"AM"}var L3={calendar:q,longDateFormat:Oe,invalidDate:De,ordinal:We,dayOfMonthOrdinalParse:nt,relativeTime:_e,months:oie,monthsShort:P3,week:bie,weekdays:Cie,weekdaysMin:Eie,weekdaysShort:A3,meridiemParse:qie},bn={},Zf={},ep;function Vie(x,T){var I,N=Math.min(x.length,T.length);for(I=0;I<N;I+=1)if(x[I]!==T[I])return I;return N}function F3(x){return x&&x.toLowerCase().replace("_","-")}function Yie(x){for(var T=0,I,N,Y,ie;T<x.length;){for(ie=F3(x[T]).split("-"),I=ie.length,N=F3(x[T+1]),N=N?N.split("-"):null;I>0;){if(Y=tv(ie.slice(0,I).join("-")),Y)return Y;if(N&&N.length>=I&&Vie(ie,N)>=I-1)break;I--}T++}return ep}function Gie(x){return!!(x&&x.match("^[^/\\\\]*$"))}function tv(x){var T=null,I;if(bn[x]===void 0&&n&&n.exports&&Gie(x))try{T=ep._abbr,I=Qs,I("./locale/"+x),za(T)}catch{bn[x]=null}return bn[x]}function za(x,T){var I;return x&&(u(T)?I=Fo(x):I=K1(x,T),I?ep=I:typeof console<"u"&&console.warn&&console.warn("Locale "+x+" not found. Did you forget to load it?")),ep._abbr}function K1(x,T){if(T!==null){var I,N=L3;if(T.abbr=x,bn[x]!=null)j("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),N=bn[x]._config;else if(T.parentLocale!=null)if(bn[T.parentLocale]!=null)N=bn[T.parentLocale]._config;else if(I=tv(T.parentLocale),I!=null)N=I._config;else return Zf[T.parentLocale]||(Zf[T.parentLocale]=[]),Zf[T.parentLocale].push({name:x,config:T}),null;return bn[x]=new z($(N,T)),Zf[x]&&Zf[x].forEach(function(Y){K1(Y.name,Y.config)}),za(x),bn[x]}else return delete bn[x],null}function Kie(x,T){if(T!=null){var I,N,Y=L3;bn[x]!=null&&bn[x].parentLocale!=null?bn[x].set($(bn[x]._config,T)):(N=tv(x),N!=null&&(Y=N._config),T=$(Y,T),N==null&&(T.abbr=x),I=new z(T),I.parentLocale=bn[x],bn[x]=I),za(x)}else bn[x]!=null&&(bn[x].parentLocale!=null?(bn[x]=bn[x].parentLocale,x===za()&&za(x)):bn[x]!=null&&delete bn[x]);return bn[x]}function Fo(x){var T;if(x&&x._locale&&x._locale._abbr&&(x=x._locale._abbr),!x)return ep;if(!o(x)){if(T=tv(x),T)return T;x=[x]}return Yie(x)}function Xie(){return W(bn)}function X1(x){var T,I=x._a;return I&&y(x).overflow===-2&&(T=I[yt]<0||I[yt]>11?yt:I[Ut]<1||I[Ut]>H1(I[mt],I[yt])?Ut:I[Yt]<0||I[Yt]>24||I[Yt]===24&&(I[Jn]!==0||I[ri]!==0||I[to]!==0)?Yt:I[Jn]<0||I[Jn]>59?Jn:I[ri]<0||I[ri]>59?ri:I[to]<0||I[to]>999?to:-1,y(x)._overflowDayOfYear&&(T<mt||T>Ut)&&(T=Ut),y(x)._overflowWeeks&&T===-1&&(T=Tn),y(x)._overflowWeekday&&T===-1&&(T=C3),y(x).overflow=T),x}var Qie=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Jie=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Zie=/Z|[+-]\d\d(?::?\d\d)?/,nv=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Q1=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ese=/^\/?Date\((-?\d+)/i,tse=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,nse={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function $3(x){var T,I,N=x._i,Y=Qie.exec(N)||Jie.exec(N),ie,Se,et,gt,Rt=nv.length,Fr=Q1.length;if(Y){for(y(x).iso=!0,T=0,I=Rt;T<I;T++)if(nv[T][1].exec(Y[1])){Se=nv[T][0],ie=nv[T][2]!==!1;break}if(Se==null){x._isValid=!1;return}if(Y[3]){for(T=0,I=Fr;T<I;T++)if(Q1[T][1].exec(Y[3])){et=(Y[2]||" ")+Q1[T][0];break}if(et==null){x._isValid=!1;return}}if(!ie&&et!=null){x._isValid=!1;return}if(Y[4])if(Zie.exec(Y[4]))gt="Z";else{x._isValid=!1;return}x._f=Se+(et||"")+(gt||""),Z1(x)}else x._isValid=!1}function rse(x,T,I,N,Y,ie){var Se=[ise(x),P3.indexOf(T),parseInt(I,10),parseInt(N,10),parseInt(Y,10)];return ie&&Se.push(parseInt(ie,10)),Se}function ise(x){var T=parseInt(x,10);return T<=49?2e3+T:T<=999?1900+T:T}function sse(x){return x.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ose(x,T,I){if(x){var N=A3.indexOf(x),Y=new Date(T[0],T[1],T[2]).getDay();if(N!==Y)return y(I).weekdayMismatch=!0,I._isValid=!1,!1}return!0}function ase(x,T,I){if(x)return nse[x];if(T)return 0;var N=parseInt(I,10),Y=N%100,ie=(N-Y)/100;return ie*60+Y}function z3(x){var T=tse.exec(sse(x._i)),I;if(T){if(I=rse(T[4],T[3],T[2],T[5],T[6],T[7]),!ose(T[1],I,x))return;x._a=I,x._tzm=ase(T[8],T[9],T[10]),x._d=Qf.apply(null,x._a),x._d.setUTCMinutes(x._d.getUTCMinutes()-x._tzm),y(x).rfc2822=!0}else x._isValid=!1}function lse(x){var T=ese.exec(x._i);if(T!==null){x._d=new Date(+T[1]);return}if($3(x),x._isValid===!1)delete x._isValid;else return;if(z3(x),x._isValid===!1)delete x._isValid;else return;x._strict?x._isValid=!1:i.createFromInputFallback(x)}i.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(x){x._d=new Date(x._i+(x._useUTC?" UTC":""))});function td(x,T,I){return x??T??I}function cse(x){var T=new Date(i.now());return x._useUTC?[T.getUTCFullYear(),T.getUTCMonth(),T.getUTCDate()]:[T.getFullYear(),T.getMonth(),T.getDate()]}function J1(x){var T,I,N=[],Y,ie,Se;if(!x._d){for(Y=cse(x),x._w&&x._a[Ut]==null&&x._a[yt]==null&&use(x),x._dayOfYear!=null&&(Se=td(x._a[mt],Y[mt]),(x._dayOfYear>cc(Se)||x._dayOfYear===0)&&(y(x)._overflowDayOfYear=!0),I=Qf(Se,0,x._dayOfYear),x._a[yt]=I.getUTCMonth(),x._a[Ut]=I.getUTCDate()),T=0;T<3&&x._a[T]==null;++T)x._a[T]=N[T]=Y[T];for(;T<7;T++)x._a[T]=N[T]=x._a[T]==null?T===2?1:0:x._a[T];x._a[Yt]===24&&x._a[Jn]===0&&x._a[ri]===0&&x._a[to]===0&&(x._nextDay=!0,x._a[Yt]=0),x._d=(x._useUTC?Qf:gie).apply(null,N),ie=x._useUTC?x._d.getUTCDay():x._d.getDay(),x._tzm!=null&&x._d.setUTCMinutes(x._d.getUTCMinutes()-x._tzm),x._nextDay&&(x._a[Yt]=24),x._w&&typeof x._w.d<"u"&&x._w.d!==ie&&(y(x).weekdayMismatch=!0)}}function use(x){var T,I,N,Y,ie,Se,et,gt,Rt;T=x._w,T.GG!=null||T.W!=null||T.E!=null?(ie=1,Se=4,I=td(T.GG,x._a[mt],Jf(fn(),1,4).year),N=td(T.W,1),Y=td(T.E,1),(Y<1||Y>7)&&(gt=!0)):(ie=x._locale._week.dow,Se=x._locale._week.doy,Rt=Jf(fn(),ie,Se),I=td(T.gg,x._a[mt],Rt.year),N=td(T.w,Rt.week),T.d!=null?(Y=T.d,(Y<0||Y>6)&&(gt=!0)):T.e!=null?(Y=T.e+ie,(T.e<0||T.e>6)&&(gt=!0)):Y=ie),N<1||N>Lo(I,ie,Se)?y(x)._overflowWeeks=!0:gt!=null?y(x)._overflowWeekday=!0:(et=R3(I,N,Y,ie,Se),x._a[mt]=et.year,x._dayOfYear=et.dayOfYear)}i.ISO_8601=function(){},i.RFC_2822=function(){};function Z1(x){if(x._f===i.ISO_8601){$3(x);return}if(x._f===i.RFC_2822){z3(x);return}x._a=[],y(x).empty=!0;var T=""+x._i,I,N,Y,ie,Se,et=T.length,gt=0,Rt,Fr;for(Y=be(x._f,x._locale).match(G)||[],Fr=Y.length,I=0;I<Fr;I++)ie=Y[I],N=(T.match(Ot(ie,x))||[])[0],N&&(Se=T.substr(0,T.indexOf(N)),Se.length>0&&y(x).unusedInput.push(Se),T=T.slice(T.indexOf(N)+N.length),gt+=N.length),Q[ie]?(N?y(x).empty=!1:y(x).unusedTokens.push(ie),_t(ie,N,x)):x._strict&&!N&&y(x).unusedTokens.push(ie);y(x).charsLeftOver=et-gt,T.length>0&&y(x).unusedInput.push(T),x._a[Yt]<=12&&y(x).bigHour===!0&&x._a[Yt]>0&&(y(x).bigHour=void 0),y(x).parsedDateParts=x._a.slice(0),y(x).meridiem=x._meridiem,x._a[Yt]=dse(x._locale,x._a[Yt],x._meridiem),Rt=y(x).era,Rt!==null&&(x._a[mt]=x._locale.erasConvertYear(Rt,x._a[mt])),J1(x),X1(x)}function dse(x,T,I){var N;return I==null?T:x.meridiemHour!=null?x.meridiemHour(T,I):(x.isPM!=null&&(N=x.isPM(I),N&&T<12&&(T+=12),!N&&T===12&&(T=0)),T)}function hse(x){var T,I,N,Y,ie,Se,et=!1,gt=x._f.length;if(gt===0){y(x).invalidFormat=!0,x._d=new Date(NaN);return}for(Y=0;Y<gt;Y++)ie=0,Se=!1,T=C({},x),x._useUTC!=null&&(T._useUTC=x._useUTC),T._f=x._f[Y],Z1(T),w(T)&&(Se=!0),ie+=y(T).charsLeftOver,ie+=y(T).unusedTokens.length*10,y(T).score=ie,et?ie<N&&(N=ie,I=T):(N==null||ie<N||Se)&&(N=ie,I=T,Se&&(et=!0));p(x,I||T)}function fse(x){if(!x._d){var T=ee(x._i),I=T.day===void 0?T.date:T.day;x._a=f([T.year,T.month,I,T.hour,T.minute,T.second,T.millisecond],function(N){return N&&parseInt(N,10)}),J1(x)}}function pse(x){var T=new E(X1(B3(x)));return T._nextDay&&(T.add(1,"d"),T._nextDay=void 0),T}function B3(x){var T=x._i,I=x._f;return x._locale=x._locale||Fo(x._l),T===null||I===void 0&&T===""?k({nullInput:!0}):(typeof T=="string"&&(x._i=T=x._locale.preparse(T)),P(T)?new E(X1(T)):(d(T)?x._d=T:o(I)?hse(x):I?Z1(x):mse(x),w(x)||(x._d=null),x))}function mse(x){var T=x._i;u(T)?x._d=new Date(i.now()):d(T)?x._d=new Date(T.valueOf()):typeof T=="string"?lse(x):o(T)?(x._a=f(T.slice(0),function(I){return parseInt(I,10)}),J1(x)):a(T)?fse(x):h(T)?x._d=new Date(T):i.createFromInputFallback(x)}function U3(x,T,I,N,Y){var ie={};return(T===!0||T===!1)&&(N=T,T=void 0),(I===!0||I===!1)&&(N=I,I=void 0),(a(x)&&c(x)||o(x)&&x.length===0)&&(x=void 0),ie._isAMomentObject=!0,ie._useUTC=ie._isUTC=Y,ie._l=I,ie._i=x,ie._f=T,ie._strict=N,pse(ie)}function fn(x,T,I,N){return U3(x,T,I,N,!1)}var gse=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var x=fn.apply(null,arguments);return this.isValid()&&x.isValid()?x<this?this:x:k()}),vse=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var x=fn.apply(null,arguments);return this.isValid()&&x.isValid()?x>this?this:x:k()});function q3(x,T){var I,N;if(T.length===1&&o(T[0])&&(T=T[0]),!T.length)return fn();for(I=T[0],N=1;N<T.length;++N)(!T[N].isValid()||T[N][x](I))&&(I=T[N]);return I}function bse(){var x=[].slice.call(arguments,0);return q3("isBefore",x)}function yse(){var x=[].slice.call(arguments,0);return q3("isAfter",x)}var xse=function(){return Date.now?Date.now():+new Date},tp=["year","quarter","month","week","day","hour","minute","second","millisecond"];function wse(x){var T,I=!1,N,Y=tp.length;for(T in x)if(l(x,T)&&!($n.call(tp,T)!==-1&&(x[T]==null||!isNaN(x[T]))))return!1;for(N=0;N<Y;++N)if(x[tp[N]]){if(I)return!1;parseFloat(x[tp[N]])!==we(x[tp[N]])&&(I=!0)}return!0}function _se(){return this._isValid}function Sse(){return Es(NaN)}function rv(x){var T=ee(x),I=T.year||0,N=T.quarter||0,Y=T.month||0,ie=T.week||T.isoWeek||0,Se=T.day||0,et=T.hour||0,gt=T.minute||0,Rt=T.second||0,Fr=T.millisecond||0;this._isValid=wse(T),this._milliseconds=+Fr+Rt*1e3+gt*6e4+et*1e3*60*60,this._days=+Se+ie*7,this._months=+Y+N*3+I*12,this._data={},this._locale=Fo(),this._bubble()}function iv(x){return x instanceof rv}function e_(x){return x<0?Math.round(-1*x)*-1:Math.round(x)}function kse(x,T,I){var N=Math.min(x.length,T.length),Y=Math.abs(x.length-T.length),ie=0,Se;for(Se=0;Se<N;Se++)we(x[Se])!==we(T[Se])&&ie++;return ie+Y}function W3(x,T){J(x,0,0,function(){var I=this.utcOffset(),N="+";return I<0&&(I=-I,N="-"),N+F(~~(I/60),2)+T+F(~~I%60,2)})}W3("Z",":"),W3("ZZ",""),xe("Z",He),xe("ZZ",He),Fe(["Z","ZZ"],function(x,T,I){I._useUTC=!0,I._tzm=t_(He,x)});var Cse=/([\+\-]|\d\d)/gi;function t_(x,T){var I=(T||"").match(x),N,Y,ie;return I===null?null:(N=I[I.length-1]||[],Y=(N+"").match(Cse)||["-",0,0],ie=+(Y[1]*60)+we(Y[2]),ie===0?0:Y[0]==="+"?ie:-ie)}function n_(x,T){var I,N;return T._isUTC?(I=T.clone(),N=(P(x)||d(x)?x.valueOf():fn(x).valueOf())-I.valueOf(),I._d.setTime(I._d.valueOf()+N),i.updateOffset(I,!1),I):fn(x).local()}function r_(x){return-Math.round(x._d.getTimezoneOffset())}i.updateOffset=function(){};function Ese(x,T,I){var N=this._offset||0,Y;if(!this.isValid())return x!=null?this:NaN;if(x!=null){if(typeof x=="string"){if(x=t_(He,x),x===null)return this}else Math.abs(x)<16&&!I&&(x=x*60);return!this._isUTC&&T&&(Y=r_(this)),this._offset=x,this._isUTC=!0,Y!=null&&this.add(Y,"m"),N!==x&&(!T||this._changeInProgress?G3(this,Es(x-N,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?N:r_(this)}function Tse(x,T){return x!=null?(typeof x!="string"&&(x=-x),this.utcOffset(x,T),this):-this.utcOffset()}function Pse(x){return this.utcOffset(0,x)}function Mse(x){return this._isUTC&&(this.utcOffset(0,x),this._isUTC=!1,x&&this.subtract(r_(this),"m")),this}function Dse(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var x=t_(Ye,this._i);x!=null?this.utcOffset(x):this.utcOffset(0,!0)}return this}function Ose(x){return this.isValid()?(x=x?fn(x).utcOffset():0,(this.utcOffset()-x)%60===0):!1}function Ise(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Rse(){if(!u(this._isDSTShifted))return this._isDSTShifted;var x={},T;return C(x,this),x=B3(x),x._a?(T=x._isUTC?g(x._a):fn(x._a),this._isDSTShifted=this.isValid()&&kse(x._a,T.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ase(){return this.isValid()?!this._isUTC:!1}function Nse(){return this.isValid()?this._isUTC:!1}function H3(){return this.isValid()?this._isUTC&&this._offset===0:!1}var jse=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Lse=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Es(x,T){var I=x,N=null,Y,ie,Se;return iv(x)?I={ms:x._milliseconds,d:x._days,M:x._months}:h(x)||!isNaN(+x)?(I={},T?I[T]=+x:I.milliseconds=+x):(N=jse.exec(x))?(Y=N[1]==="-"?-1:1,I={y:0,d:we(N[Ut])*Y,h:we(N[Yt])*Y,m:we(N[Jn])*Y,s:we(N[ri])*Y,ms:we(e_(N[to]*1e3))*Y}):(N=Lse.exec(x))?(Y=N[1]==="-"?-1:1,I={y:uc(N[2],Y),M:uc(N[3],Y),w:uc(N[4],Y),d:uc(N[5],Y),h:uc(N[6],Y),m:uc(N[7],Y),s:uc(N[8],Y)}):I==null?I={}:typeof I=="object"&&("from"in I||"to"in I)&&(Se=Fse(fn(I.from),fn(I.to)),I={},I.ms=Se.milliseconds,I.M=Se.months),ie=new rv(I),iv(x)&&l(x,"_locale")&&(ie._locale=x._locale),iv(x)&&l(x,"_isValid")&&(ie._isValid=x._isValid),ie}Es.fn=rv.prototype,Es.invalid=Sse;function uc(x,T){var I=x&&parseFloat(x.replace(",","."));return(isNaN(I)?0:I)*T}function V3(x,T){var I={};return I.months=T.month()-x.month()+(T.year()-x.year())*12,x.clone().add(I.months,"M").isAfter(T)&&--I.months,I.milliseconds=+T-+x.clone().add(I.months,"M"),I}function Fse(x,T){var I;return x.isValid()&&T.isValid()?(T=n_(T,x),x.isBefore(T)?I=V3(x,T):(I=V3(T,x),I.milliseconds=-I.milliseconds,I.months=-I.months),I):{milliseconds:0,months:0}}function Y3(x,T){return function(I,N){var Y,ie;return N!==null&&!isNaN(+N)&&(j(T,"moment()."+T+"(period, number) is deprecated. Please use moment()."+T+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),ie=I,I=N,N=ie),Y=Es(I,N),G3(this,Y,x),this}}function G3(x,T,I,N){var Y=T._milliseconds,ie=e_(T._days),Se=e_(T._months);x.isValid()&&(N=N??!0,Se&&D3(x,Xf(x,"Month")+Se*I),ie&&T3(x,"Date",Xf(x,"Date")+ie*I),Y&&x._d.setTime(x._d.valueOf()+Y*I),N&&i.updateOffset(x,ie||Se))}var $se=Y3(1,"add"),zse=Y3(-1,"subtract");function K3(x){return typeof x=="string"||x instanceof String}function Bse(x){return P(x)||d(x)||K3(x)||h(x)||qse(x)||Use(x)||x===null||x===void 0}function Use(x){var T=a(x)&&!c(x),I=!1,N=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],Y,ie,Se=N.length;for(Y=0;Y<Se;Y+=1)ie=N[Y],I=I||l(x,ie);return T&&I}function qse(x){var T=o(x),I=!1;return T&&(I=x.filter(function(N){return!h(N)&&K3(x)}).length===0),T&&I}function Wse(x){var T=a(x)&&!c(x),I=!1,N=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],Y,ie;for(Y=0;Y<N.length;Y+=1)ie=N[Y],I=I||l(x,ie);return T&&I}function Hse(x,T){var I=x.diff(T,"days",!0);return I<-6?"sameElse":I<-1?"lastWeek":I<0?"lastDay":I<1?"sameDay":I<2?"nextDay":I<7?"nextWeek":"sameElse"}function Vse(x,T){arguments.length===1&&(arguments[0]?Bse(arguments[0])?(x=arguments[0],T=void 0):Wse(arguments[0])&&(T=arguments[0],x=void 0):(x=void 0,T=void 0));var I=x||fn(),N=n_(I,this).startOf("day"),Y=i.calendarFormat(this,N)||"sameElse",ie=T&&(B(T[Y])?T[Y].call(this,I):T[Y]);return this.format(ie||this.localeData().calendar(Y,this,fn(I)))}function Yse(){return new E(this)}function Gse(x,T){var I=P(x)?x:fn(x);return this.isValid()&&I.isValid()?(T=ue(T)||"millisecond",T==="millisecond"?this.valueOf()>I.valueOf():I.valueOf()<this.clone().startOf(T).valueOf()):!1}function Kse(x,T){var I=P(x)?x:fn(x);return this.isValid()&&I.isValid()?(T=ue(T)||"millisecond",T==="millisecond"?this.valueOf()<I.valueOf():this.clone().endOf(T).valueOf()<I.valueOf()):!1}function Xse(x,T,I,N){var Y=P(x)?x:fn(x),ie=P(T)?T:fn(T);return this.isValid()&&Y.isValid()&&ie.isValid()?(N=N||"()",(N[0]==="("?this.isAfter(Y,I):!this.isBefore(Y,I))&&(N[1]===")"?this.isBefore(ie,I):!this.isAfter(ie,I))):!1}function Qse(x,T){var I=P(x)?x:fn(x),N;return this.isValid()&&I.isValid()?(T=ue(T)||"millisecond",T==="millisecond"?this.valueOf()===I.valueOf():(N=I.valueOf(),this.clone().startOf(T).valueOf()<=N&&N<=this.clone().endOf(T).valueOf())):!1}function Jse(x,T){return this.isSame(x,T)||this.isAfter(x,T)}function Zse(x,T){return this.isSame(x,T)||this.isBefore(x,T)}function eoe(x,T,I){var N,Y,ie;if(!this.isValid())return NaN;if(N=n_(x,this),!N.isValid())return NaN;switch(Y=(N.utcOffset()-this.utcOffset())*6e4,T=ue(T),T){case"year":ie=sv(this,N)/12;break;case"month":ie=sv(this,N);break;case"quarter":ie=sv(this,N)/3;break;case"second":ie=(this-N)/1e3;break;case"minute":ie=(this-N)/6e4;break;case"hour":ie=(this-N)/36e5;break;case"day":ie=(this-N-Y)/864e5;break;case"week":ie=(this-N-Y)/6048e5;break;default:ie=this-N}return I?ie:Ce(ie)}function sv(x,T){if(x.date()<T.date())return-sv(T,x);var I=(T.year()-x.year())*12+(T.month()-x.month()),N=x.clone().add(I,"months"),Y,ie;return T-N<0?(Y=x.clone().add(I-1,"months"),ie=(T-N)/(N-Y)):(Y=x.clone().add(I+1,"months"),ie=(T-N)/(Y-N)),-(I+ie)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function noe(x){if(!this.isValid())return null;var T=x!==!0,I=T?this.clone().utc():this;return I.year()<0||I.year()>9999?se(I,T?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):B(Date.prototype.toISOString)?T?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",se(I,"Z")):se(I,T?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function roe(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var x="moment",T="",I,N,Y,ie;return this.isLocal()||(x=this.utcOffset()===0?"moment.utc":"moment.parseZone",T="Z"),I="["+x+'("]',N=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",Y="-MM-DD[T]HH:mm:ss.SSS",ie=T+'[")]',this.format(I+N+Y+ie)}function ioe(x){x||(x=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var T=se(this,x);return this.localeData().postformat(T)}function soe(x,T){return this.isValid()&&(P(x)&&x.isValid()||fn(x).isValid())?Es({to:this,from:x}).locale(this.locale()).humanize(!T):this.localeData().invalidDate()}function ooe(x){return this.from(fn(),x)}function aoe(x,T){return this.isValid()&&(P(x)&&x.isValid()||fn(x).isValid())?Es({from:this,to:x}).locale(this.locale()).humanize(!T):this.localeData().invalidDate()}function loe(x){return this.to(fn(),x)}function X3(x){var T;return x===void 0?this._locale._abbr:(T=Fo(x),T!=null&&(this._locale=T),this)}var Q3=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(x){return x===void 0?this.localeData():this.locale(x)});function J3(){return this._locale}var ov=1e3,nd=60*ov,av=60*nd,Z3=(365*400+97)*24*av;function rd(x,T){return(x%T+T)%T}function e5(x,T,I){return x<100&&x>=0?new Date(x+400,T,I)-Z3:new Date(x,T,I).valueOf()}function t5(x,T,I){return x<100&&x>=0?Date.UTC(x+400,T,I)-Z3:Date.UTC(x,T,I)}function coe(x){var T,I;if(x=ue(x),x===void 0||x==="millisecond"||!this.isValid())return this;switch(I=this._isUTC?t5:e5,x){case"year":T=I(this.year(),0,1);break;case"quarter":T=I(this.year(),this.month()-this.month()%3,1);break;case"month":T=I(this.year(),this.month(),1);break;case"week":T=I(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":T=I(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":T=I(this.year(),this.month(),this.date());break;case"hour":T=this._d.valueOf(),T-=rd(T+(this._isUTC?0:this.utcOffset()*nd),av);break;case"minute":T=this._d.valueOf(),T-=rd(T,nd);break;case"second":T=this._d.valueOf(),T-=rd(T,ov);break}return this._d.setTime(T),i.updateOffset(this,!0),this}function uoe(x){var T,I;if(x=ue(x),x===void 0||x==="millisecond"||!this.isValid())return this;switch(I=this._isUTC?t5:e5,x){case"year":T=I(this.year()+1,0,1)-1;break;case"quarter":T=I(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":T=I(this.year(),this.month()+1,1)-1;break;case"week":T=I(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":T=I(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":T=I(this.year(),this.month(),this.date()+1)-1;break;case"hour":T=this._d.valueOf(),T+=av-rd(T+(this._isUTC?0:this.utcOffset()*nd),av)-1;break;case"minute":T=this._d.valueOf(),T+=nd-rd(T,nd)-1;break;case"second":T=this._d.valueOf(),T+=ov-rd(T,ov)-1;break}return this._d.setTime(T),i.updateOffset(this,!0),this}function doe(){return this._d.valueOf()-(this._offset||0)*6e4}function hoe(){return Math.floor(this.valueOf()/1e3)}function foe(){return new Date(this.valueOf())}function poe(){var x=this;return[x.year(),x.month(),x.date(),x.hour(),x.minute(),x.second(),x.millisecond()]}function moe(){var x=this;return{years:x.year(),months:x.month(),date:x.date(),hours:x.hours(),minutes:x.minutes(),seconds:x.seconds(),milliseconds:x.milliseconds()}}function goe(){return this.isValid()?this.toISOString():null}function voe(){return w(this)}function boe(){return p({},y(this))}function yoe(){return y(this).overflow}function xoe(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}J("N",0,0,"eraAbbr"),J("NN",0,0,"eraAbbr"),J("NNN",0,0,"eraAbbr"),J("NNNN",0,0,"eraName"),J("NNNNN",0,0,"eraNarrow"),J("y",["y",1],"yo","eraYear"),J("y",["yy",2],0,"eraYear"),J("y",["yyy",3],0,"eraYear"),J("y",["yyyy",4],0,"eraYear"),xe("N",i_),xe("NN",i_),xe("NNN",i_),xe("NNNN",Ooe),xe("NNNNN",Ioe),Fe(["N","NN","NNN","NNNN","NNNNN"],function(x,T,I,N){var Y=I._locale.erasParse(x,N,I._strict);Y?y(I).era=Y:y(I).invalidEra=x}),xe("y",Ve),xe("yy",Ve),xe("yyy",Ve),xe("yyyy",Ve),xe("yo",Roe),Fe(["y","yy","yyy","yyyy"],mt),Fe(["yo"],function(x,T,I,N){var Y;I._locale._eraYearOrdinalRegex&&(Y=x.match(I._locale._eraYearOrdinalRegex)),I._locale.eraYearOrdinalParse?T[mt]=I._locale.eraYearOrdinalParse(x,Y):T[mt]=parseInt(x,10)});function woe(x,T){var I,N,Y,ie=this._eras||Fo("en")._eras;for(I=0,N=ie.length;I<N;++I){switch(typeof ie[I].since){case"string":Y=i(ie[I].since).startOf("day"),ie[I].since=Y.valueOf();break}switch(typeof ie[I].until){case"undefined":ie[I].until=1/0;break;case"string":Y=i(ie[I].until).startOf("day").valueOf(),ie[I].until=Y.valueOf();break}}return ie}function _oe(x,T,I){var N,Y,ie=this.eras(),Se,et,gt;for(x=x.toUpperCase(),N=0,Y=ie.length;N<Y;++N)if(Se=ie[N].name.toUpperCase(),et=ie[N].abbr.toUpperCase(),gt=ie[N].narrow.toUpperCase(),I)switch(T){case"N":case"NN":case"NNN":if(et===x)return ie[N];break;case"NNNN":if(Se===x)return ie[N];break;case"NNNNN":if(gt===x)return ie[N];break}else if([Se,et,gt].indexOf(x)>=0)return ie[N]}function Soe(x,T){var I=x.since<=x.until?1:-1;return T===void 0?i(x.since).year():i(x.since).year()+(T-x.offset)*I}function koe(){var x,T,I,N=this.localeData().eras();for(x=0,T=N.length;x<T;++x)if(I=this.clone().startOf("day").valueOf(),N[x].since<=I&&I<=N[x].until||N[x].until<=I&&I<=N[x].since)return N[x].name;return""}function Coe(){var x,T,I,N=this.localeData().eras();for(x=0,T=N.length;x<T;++x)if(I=this.clone().startOf("day").valueOf(),N[x].since<=I&&I<=N[x].until||N[x].until<=I&&I<=N[x].since)return N[x].narrow;return""}function Eoe(){var x,T,I,N=this.localeData().eras();for(x=0,T=N.length;x<T;++x)if(I=this.clone().startOf("day").valueOf(),N[x].since<=I&&I<=N[x].until||N[x].until<=I&&I<=N[x].since)return N[x].abbr;return""}function Toe(){var x,T,I,N,Y=this.localeData().eras();for(x=0,T=Y.length;x<T;++x)if(I=Y[x].since<=Y[x].until?1:-1,N=this.clone().startOf("day").valueOf(),Y[x].since<=N&&N<=Y[x].until||Y[x].until<=N&&N<=Y[x].since)return(this.year()-i(Y[x].since).year())*I+Y[x].offset;return this.year()}function Poe(x){return l(this,"_erasNameRegex")||s_.call(this),x?this._erasNameRegex:this._erasRegex}function Moe(x){return l(this,"_erasAbbrRegex")||s_.call(this),x?this._erasAbbrRegex:this._erasRegex}function Doe(x){return l(this,"_erasNarrowRegex")||s_.call(this),x?this._erasNarrowRegex:this._erasRegex}function i_(x,T){return T.erasAbbrRegex(x)}function Ooe(x,T){return T.erasNameRegex(x)}function Ioe(x,T){return T.erasNarrowRegex(x)}function Roe(x,T){return T._eraYearOrdinalRegex||Ve}function s_(){var x=[],T=[],I=[],N=[],Y,ie,Se,et,gt,Rt=this.eras();for(Y=0,ie=Rt.length;Y<ie;++Y)Se=It(Rt[Y].name),et=It(Rt[Y].abbr),gt=It(Rt[Y].narrow),T.push(Se),x.push(et),I.push(gt),N.push(Se),N.push(et),N.push(gt);this._erasRegex=new RegExp("^("+N.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+T.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+x.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+I.join("|")+")","i")}J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100});function lv(x,T){J(0,[x,x.length],0,T)}lv("gggg","weekYear"),lv("ggggg","weekYear"),lv("GGGG","isoWeekYear"),lv("GGGGG","isoWeekYear"),xe("G",Xe),xe("g",Xe),xe("GG",ve,je),xe("gg",ve,je),xe("GGGG",fe,Ae),xe("gggg",fe,Ae),xe("GGGGG",Re,Le),xe("ggggg",Re,Le),dt(["gggg","ggggg","GGGG","GGGGG"],function(x,T,I,N){T[N.substr(0,2)]=we(x)}),dt(["gg","GG"],function(x,T,I,N){T[N]=i.parseTwoDigitYear(x)});function Aoe(x){return n5.call(this,x,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Noe(x){return n5.call(this,x,this.isoWeek(),this.isoWeekday(),1,4)}function joe(){return Lo(this.year(),1,4)}function Loe(){return Lo(this.isoWeekYear(),1,4)}function Foe(){var x=this.localeData()._week;return Lo(this.year(),x.dow,x.doy)}function $oe(){var x=this.localeData()._week;return Lo(this.weekYear(),x.dow,x.doy)}function n5(x,T,I,N,Y){var ie;return x==null?Jf(this,N,Y).year:(ie=Lo(x,N,Y),T>ie&&(T=ie),zoe.call(this,x,T,I,N,Y))}function zoe(x,T,I,N,Y){var ie=R3(x,T,I,N,Y),Se=Qf(ie.year,0,ie.dayOfYear);return this.year(Se.getUTCFullYear()),this.month(Se.getUTCMonth()),this.date(Se.getUTCDate()),this}J("Q",0,"Qo","quarter"),xe("Q",ce),Fe("Q",function(x,T){T[yt]=(we(x)-1)*3});function Boe(x){return x==null?Math.ceil((this.month()+1)/3):this.month((x-1)*3+this.month()%3)}J("D",["DD",2],"Do","date"),xe("D",ve,ye),xe("DD",ve,je),xe("Do",function(x,T){return x?T._dayOfMonthOrdinalParse||T._ordinalParse:T._dayOfMonthOrdinalParseLenient}),Fe(["D","DD"],Ut),Fe("Do",function(x,T){T[Ut]=we(x.match(ve)[0])});var r5=ed("Date",!0);J("DDD",["DDDD",3],"DDDo","dayOfYear"),xe("DDD",pe),xe("DDDD",de),Fe(["DDD","DDDD"],function(x,T,I){I._dayOfYear=we(x)});function Uoe(x){var T=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return x==null?T:this.add(x-T,"d")}J("m",["mm",2],0,"minute"),xe("m",ve,re),xe("mm",ve,je),Fe(["m","mm"],Jn);var qoe=ed("Minutes",!1);J("s",["ss",2],0,"second"),xe("s",ve,re),xe("ss",ve,je),Fe(["s","ss"],ri);var Woe=ed("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return this.millisecond()*10}),J(0,["SSSSS",5],0,function(){return this.millisecond()*100}),J(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),J(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),J(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),J(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),xe("S",pe,ce),xe("SS",pe,je),xe("SSS",pe,de);var Ba,i5;for(Ba="SSSS";Ba.length<=9;Ba+="S")xe(Ba,Ve);function Hoe(x,T){T[to]=we(("0."+x)*1e3)}for(Ba="S";Ba.length<=9;Ba+="S")Fe(Ba,Hoe);i5=ed("Milliseconds",!1),J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");function Voe(){return this._isUTC?"UTC":""}function Yoe(){return this._isUTC?"Coordinated Universal Time":""}var Be=E.prototype;Be.add=$se,Be.calendar=Vse,Be.clone=Yse,Be.diff=eoe,Be.endOf=uoe,Be.format=ioe,Be.from=soe,Be.fromNow=ooe,Be.to=aoe,Be.toNow=loe,Be.get=rie,Be.invalidAt=yoe,Be.isAfter=Gse,Be.isBefore=Kse,Be.isBetween=Xse,Be.isSame=Qse,Be.isSameOrAfter=Jse,Be.isSameOrBefore=Zse,Be.isValid=voe,Be.lang=Q3,Be.locale=X3,Be.localeData=J3,Be.max=vse,Be.min=gse,Be.parsingFlags=boe,Be.set=iie,Be.startOf=coe,Be.subtract=zse,Be.toArray=poe,Be.toObject=moe,Be.toDate=foe,Be.toISOString=noe,Be.inspect=roe,typeof Symbol<"u"&&Symbol.for!=null&&(Be[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Be.toJSON=goe,Be.toString=toe,Be.unix=hoe,Be.valueOf=doe,Be.creationData=xoe,Be.eraName=koe,Be.eraNarrow=Coe,Be.eraAbbr=Eoe,Be.eraYear=Toe,Be.year=E3,Be.isLeapYear=nie,Be.weekYear=Aoe,Be.isoWeekYear=Noe,Be.quarter=Be.quarters=Boe,Be.month=O3,Be.daysInMonth=fie,Be.week=Be.weeks=wie,Be.isoWeek=Be.isoWeeks=_ie,Be.weeksInYear=Foe,Be.weeksInWeekYear=$oe,Be.isoWeeksInYear=joe,Be.isoWeeksInISOWeekYear=Loe,Be.date=r5,Be.day=Be.days=Nie,Be.weekday=jie,Be.isoWeekday=Lie,Be.dayOfYear=Uoe,Be.hour=Be.hours=Wie,Be.minute=Be.minutes=qoe,Be.second=Be.seconds=Woe,Be.millisecond=Be.milliseconds=i5,Be.utcOffset=Ese,Be.utc=Pse,Be.local=Mse,Be.parseZone=Dse,Be.hasAlignedHourOffset=Ose,Be.isDST=Ise,Be.isLocal=Ase,Be.isUtcOffset=Nse,Be.isUtc=H3,Be.isUTC=H3,Be.zoneAbbr=Voe,Be.zoneName=Yoe,Be.dates=M("dates accessor is deprecated. Use date instead.",r5),Be.months=M("months accessor is deprecated. Use month instead",O3),Be.years=M("years accessor is deprecated. Use year instead",E3),Be.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Tse),Be.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Rse);function Goe(x){return fn(x*1e3)}function Koe(){return fn.apply(null,arguments).parseZone()}function s5(x){return x}var qt=z.prototype;qt.calendar=V,qt.longDateFormat=Ke,qt.invalidDate=Pe,qt.ordinal=U,qt.preparse=s5,qt.postformat=s5,qt.relativeTime=Ie,qt.pastFuture=me,qt.set=L,qt.eras=woe,qt.erasParse=_oe,qt.erasConvertYear=Soe,qt.erasAbbrRegex=Moe,qt.erasNameRegex=Poe,qt.erasNarrowRegex=Doe,qt.months=cie,qt.monthsShort=uie,qt.monthsParse=hie,qt.monthsRegex=mie,qt.monthsShortRegex=pie,qt.week=vie,qt.firstDayOfYear=xie,qt.firstDayOfWeek=yie,qt.weekdays=Die,qt.weekdaysMin=Iie,qt.weekdaysShort=Oie,qt.weekdaysParse=Aie,qt.weekdaysRegex=Fie,qt.weekdaysShortRegex=$ie,qt.weekdaysMinRegex=zie,qt.isPM=Uie,qt.meridiem=Hie;function cv(x,T,I,N){var Y=Fo(),ie=g().set(N,T);return Y[I](ie,x)}function o5(x,T,I){if(h(x)&&(T=x,x=void 0),x=x||"",T!=null)return cv(x,T,I,"month");var N,Y=[];for(N=0;N<12;N++)Y[N]=cv(x,N,I,"month");return Y}function o_(x,T,I,N){typeof x=="boolean"?(h(T)&&(I=T,T=void 0),T=T||""):(T=x,I=T,x=!1,h(T)&&(I=T,T=void 0),T=T||"");var Y=Fo(),ie=x?Y._week.dow:0,Se,et=[];if(I!=null)return cv(T,(I+ie)%7,N,"day");for(Se=0;Se<7;Se++)et[Se]=cv(T,(Se+ie)%7,N,"day");return et}function Xoe(x,T){return o5(x,T,"months")}function Qoe(x,T){return o5(x,T,"monthsShort")}function Joe(x,T,I){return o_(x,T,I,"weekdays")}function Zoe(x,T,I){return o_(x,T,I,"weekdaysShort")}function eae(x,T,I){return o_(x,T,I,"weekdaysMin")}za("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(x){var T=x%10,I=we(x%100/10)===1?"th":T===1?"st":T===2?"nd":T===3?"rd":"th";return x+I}}),i.lang=M("moment.lang is deprecated. Use moment.locale instead.",za),i.langData=M("moment.langData is deprecated. Use moment.localeData instead.",Fo);var $o=Math.abs;function tae(){var x=this._data;return this._milliseconds=$o(this._milliseconds),this._days=$o(this._days),this._months=$o(this._months),x.milliseconds=$o(x.milliseconds),x.seconds=$o(x.seconds),x.minutes=$o(x.minutes),x.hours=$o(x.hours),x.months=$o(x.months),x.years=$o(x.years),this}function a5(x,T,I,N){var Y=Es(T,I);return x._milliseconds+=N*Y._milliseconds,x._days+=N*Y._days,x._months+=N*Y._months,x._bubble()}function nae(x,T){return a5(this,x,T,1)}function rae(x,T){return a5(this,x,T,-1)}function l5(x){return x<0?Math.floor(x):Math.ceil(x)}function iae(){var x=this._milliseconds,T=this._days,I=this._months,N=this._data,Y,ie,Se,et,gt;return x>=0&&T>=0&&I>=0||x<=0&&T<=0&&I<=0||(x+=l5(a_(I)+T)*864e5,T=0,I=0),N.milliseconds=x%1e3,Y=Ce(x/1e3),N.seconds=Y%60,ie=Ce(Y/60),N.minutes=ie%60,Se=Ce(ie/60),N.hours=Se%24,T+=Ce(Se/24),gt=Ce(c5(T)),I+=gt,T-=l5(a_(gt)),et=Ce(I/12),I%=12,N.days=T,N.months=I,N.years=et,this}function c5(x){return x*4800/146097}function a_(x){return x*146097/4800}function sae(x){if(!this.isValid())return NaN;var T,I,N=this._milliseconds;if(x=ue(x),x==="month"||x==="quarter"||x==="year")switch(T=this._days+N/864e5,I=this._months+c5(T),x){case"month":return I;case"quarter":return I/3;case"year":return I/12}else switch(T=this._days+Math.round(a_(this._months)),x){case"week":return T/7+N/6048e5;case"day":return T+N/864e5;case"hour":return T*24+N/36e5;case"minute":return T*1440+N/6e4;case"second":return T*86400+N/1e3;case"millisecond":return Math.floor(T*864e5)+N;default:throw new Error("Unknown unit "+x)}}function zo(x){return function(){return this.as(x)}}var u5=zo("ms"),oae=zo("s"),aae=zo("m"),lae=zo("h"),cae=zo("d"),uae=zo("w"),dae=zo("M"),hae=zo("Q"),fae=zo("y"),pae=u5;function mae(){return Es(this)}function gae(x){return x=ue(x),this.isValid()?this[x+"s"]():NaN}function dc(x){return function(){return this.isValid()?this._data[x]:NaN}}var vae=dc("milliseconds"),bae=dc("seconds"),yae=dc("minutes"),xae=dc("hours"),wae=dc("days"),_ae=dc("months"),Sae=dc("years");function kae(){return Ce(this.days()/7)}var Bo=Math.round,id={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Cae(x,T,I,N,Y){return Y.relativeTime(T||1,!!I,x,N)}function Eae(x,T,I,N){var Y=Es(x).abs(),ie=Bo(Y.as("s")),Se=Bo(Y.as("m")),et=Bo(Y.as("h")),gt=Bo(Y.as("d")),Rt=Bo(Y.as("M")),Fr=Bo(Y.as("w")),Uo=Bo(Y.as("y")),Ua=ie<=I.ss&&["s",ie]||ie<I.s&&["ss",ie]||Se<=1&&["m"]||Se<I.m&&["mm",Se]||et<=1&&["h"]||et<I.h&&["hh",et]||gt<=1&&["d"]||gt<I.d&&["dd",gt];return I.w!=null&&(Ua=Ua||Fr<=1&&["w"]||Fr<I.w&&["ww",Fr]),Ua=Ua||Rt<=1&&["M"]||Rt<I.M&&["MM",Rt]||Uo<=1&&["y"]||["yy",Uo],Ua[2]=T,Ua[3]=+x>0,Ua[4]=N,Cae.apply(null,Ua)}function Tae(x){return x===void 0?Bo:typeof x=="function"?(Bo=x,!0):!1}function Pae(x,T){return id[x]===void 0?!1:T===void 0?id[x]:(id[x]=T,x==="s"&&(id.ss=T-1),!0)}function Mae(x,T){if(!this.isValid())return this.localeData().invalidDate();var I=!1,N=id,Y,ie;return typeof x=="object"&&(T=x,x=!1),typeof x=="boolean"&&(I=x),typeof T=="object"&&(N=Object.assign({},id,T),T.s!=null&&T.ss==null&&(N.ss=T.s-1)),Y=this.localeData(),ie=Eae(this,!I,N,Y),I&&(ie=Y.pastFuture(+this,ie)),Y.postformat(ie)}var l_=Math.abs;function sd(x){return(x>0)-(x<0)||+x}function uv(){if(!this.isValid())return this.localeData().invalidDate();var x=l_(this._milliseconds)/1e3,T=l_(this._days),I=l_(this._months),N,Y,ie,Se,et=this.asSeconds(),gt,Rt,Fr,Uo;return et?(N=Ce(x/60),Y=Ce(N/60),x%=60,N%=60,ie=Ce(I/12),I%=12,Se=x?x.toFixed(3).replace(/\.?0+$/,""):"",gt=et<0?"-":"",Rt=sd(this._months)!==sd(et)?"-":"",Fr=sd(this._days)!==sd(et)?"-":"",Uo=sd(this._milliseconds)!==sd(et)?"-":"",gt+"P"+(ie?Rt+ie+"Y":"")+(I?Rt+I+"M":"")+(T?Fr+T+"D":"")+(Y||N||x?"T":"")+(Y?Uo+Y+"H":"")+(N?Uo+N+"M":"")+(x?Uo+Se+"S":"")):"P0D"}var Nt=rv.prototype;Nt.isValid=_se,Nt.abs=tae,Nt.add=nae,Nt.subtract=rae,Nt.as=sae,Nt.asMilliseconds=u5,Nt.asSeconds=oae,Nt.asMinutes=aae,Nt.asHours=lae,Nt.asDays=cae,Nt.asWeeks=uae,Nt.asMonths=dae,Nt.asQuarters=hae,Nt.asYears=fae,Nt.valueOf=pae,Nt._bubble=iae,Nt.clone=mae,Nt.get=gae,Nt.milliseconds=vae,Nt.seconds=bae,Nt.minutes=yae,Nt.hours=xae,Nt.days=wae,Nt.weeks=kae,Nt.months=_ae,Nt.years=Sae,Nt.humanize=Mae,Nt.toISOString=uv,Nt.toString=uv,Nt.toJSON=uv,Nt.locale=X3,Nt.localeData=J3,Nt.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",uv),Nt.lang=Q3,J("X",0,0,"unix"),J("x",0,0,"valueOf"),xe("x",Xe),xe("X",ot),Fe("X",function(x,T,I){I._d=new Date(parseFloat(x)*1e3)}),Fe("x",function(x,T,I){I._d=new Date(we(x))});//! moment.js
return i.version="2.30.1",s(fn),i.fn=Be,i.min=bse,i.max=yse,i.now=xse,i.utc=g,i.unix=Goe,i.months=Xoe,i.isDate=d,i.locale=za,i.invalid=k,i.duration=Es,i.isMoment=P,i.weekdays=Joe,i.parseZone=Koe,i.localeData=Fo,i.isDuration=iv,i.monthsShort=Qoe,i.weekdaysMin=eae,i.defineLocale=K1,i.updateLocale=Kie,i.locales=Xie,i.weekdaysShort=Zoe,i.normalizeUnits=ue,i.relativeTimeRounding=Tae,i.relativeTimeThreshold=Pae,i.calendarFormat=Hse,i.prototype=Be,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})}(xy)),xy.exports}var $Oe=HO.exports,wF;function zOe(){return wF||(wF=1,function(n,e){(function(r,i){i(typeof Qs=="function"?Js():r.moment)})($Oe,function(r){//! moment.js locale configuration
function i(o,a,l,c){var u={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[o+" Tage",o+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[o+" Monate",o+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[o+" Jahre",o+" Jahren"]};return a?u[l][0]:u[l][1]}var s=r.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:i,mm:"%d Minuten",h:i,hh:"%d Stunden",d:i,dd:i,w:i,ww:"%d Wochen",M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return s})}()),HO.exports}zOe();var VO={exports:{}},BOe=VO.exports,_F;function UOe(){return _F||(_F=1,function(n,e){(function(r,i){i(typeof Qs=="function"?Js():r.moment)})(BOe,function(r){//! moment.js locale configuration
var i="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),s="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),o=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,l=r.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(c,u){return c?/-MMM-/.test(u)?s[c.month()]:i[c.month()]:i},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4},invalidDate:"Fecha invlida"});return l})}()),VO.exports}UOe();var YO={exports:{}},qOe=YO.exports,SF;function WOe(){return SF||(SF=1,function(n,e){(function(r,i){i(typeof Qs=="function"?Js():r.moment)})(qOe,function(r){//! moment.js locale configuration
var i=/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,s=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?)/i,o=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?|janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,a=[/^janv/i,/^fvr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^aot/i,/^sept/i,/^oct/i,/^nov/i,/^dc/i],l=r.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:i,monthsShortStrictRegex:s,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(c,u){switch(u){case"D":return c+(c===1?"er":"");default:case"M":case"Q":case"DDD":case"d":return c+(c===1?"er":"e");case"w":case"W":return c+(c===1?"re":"e")}},week:{dow:1,doy:4}});return l})}()),YO.exports}WOe();var GO={exports:{}},HOe=GO.exports,kF;function VOe(){return kF||(kF=1,function(n,e){(function(r,i){i(typeof Qs=="function"?Js():r.moment)})(HOe,function(r){//! moment.js locale configuration
var i=r.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},lastWeek:function(){switch(this.day()){case 0:return"[La scorsa] dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT";default:return"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"}},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return i})}()),GO.exports}VOe();var KO={exports:{}},YOe=KO.exports,CF;function GOe(){return CF||(CF=1,function(n,e){(function(r,i){i(typeof Qs=="function"?Js():r.moment)})(YOe,function(r){//! moment.js locale configuration
var i=r.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"",narrow:"",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"",narrow:"",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"",narrow:"",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"",narrow:"",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"",narrow:"",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(|\d+)/,eraYearOrdinalParse:function(s,o){return o[1]===""?1:parseInt(o[1]||s,10)},months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(s){return s===""},meridiem:function(s,o,a){return s<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(s){return s.week()!==this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(s){return this.week()!==s.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(s,o){switch(o){case"y":return s===1?"":s+"";case"d":case"D":case"DDD":return s+"";default:return s}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}});return i})}()),KO.exports}GOe();var XO={exports:{}},KOe=XO.exports,EF;function XOe(){return EF||(EF=1,function(n,e){(function(r,i){i(typeof Qs=="function"?Js():r.moment)})(KOe,function(r){//! moment.js locale configuration
var i="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),s="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),o=[/^jan/i,/^feb/i,/^(maart|mrt\.?)$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],a=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,l=r.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(c,u){return c?/-MMM-/.test(u)?s[c.month()]:i[c.month()]:i},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",w:"n week",ww:"%d weken",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(c){return c+(c===1||c===8||c>=20?"ste":"de")},week:{dow:1,doy:4}});return l})}()),XO.exports}XOe();var QO={exports:{}},QOe=QO.exports,TF;function JOe(){return TF||(TF=1,function(n,e){(function(r,i){i(typeof Qs=="function"?Js():r.moment)})(QOe,function(r){//! moment.js locale configuration
var i="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),s="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),o=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa/i,/^lis/i,/^gru/i];function a(u){return u%10<5&&u%10>1&&~~(u/10)%10!==1}function l(u,h,d){var f=u+" ";switch(d){case"ss":return f+(a(u)?"sekundy":"sekund");case"m":return h?"minuta":"minut";case"mm":return f+(a(u)?"minuty":"minut");case"h":return h?"godzina":"godzin";case"hh":return f+(a(u)?"godziny":"godzin");case"ww":return f+(a(u)?"tygodnie":"tygodni");case"MM":return f+(a(u)?"miesice":"miesicy");case"yy":return f+(a(u)?"lata":"lat")}}var c=r.defineLocale("pl",{months:function(u,h){return u?/D MMMM/.test(h)?s[u.month()]:i[u.month()]:i},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:l,m:l,mm:l,h:l,hh:l,d:"1 dzie",dd:"%d dni",w:"tydzie",ww:l,M:"miesic",MM:l,y:"rok",yy:l},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return c})}()),QO.exports}JOe();var JO={exports:{}},ZOe=JO.exports,PF;function eIe(){return PF||(PF=1,function(n,e){(function(r,i){i(typeof Qs=="function"?Js():r.moment)})(ZOe,function(r){//! moment.js locale configuration
function i(l,c){var u=l.split("_");return c%10===1&&c%100!==11?u[0]:c%10>=2&&c%10<=4&&(c%100<10||c%100>=20)?u[1]:u[2]}function s(l,c,u){var h={ss:c?"__":"__",mm:c?"__":"__",hh:"__",dd:"__",ww:"__",MM:"__",yy:"__"};return u==="m"?c?"":"":l+" "+i(h[u],+l)}var o=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],a=r.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:o,longMonthsParse:o,shortMonthsParse:o,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(l){if(l.week()!==this.week())switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}else return this.day()===2?"[] dddd, [] LT":"[] dddd, [] LT"},lastWeek:function(l){if(l.week()!==this.week())switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}else return this.day()===2?"[] dddd, [] LT":"[] dddd, [] LT"},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:s,m:s,mm:s,h:"",hh:s,d:"",dd:s,w:"",ww:s,M:"",MM:s,y:"",yy:s},meridiemParse:/|||/i,isPM:function(l){return/^(|)$/.test(l)},meridiem:function(l,c,u){return l<4?"":l<12?"":l<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(l,c){switch(c){case"M":case"d":case"DDD":return l+"-";case"D":return l+"-";case"w":case"W":return l+"-";default:return l}},week:{dow:1,doy:4}});return a})}()),JO.exports}eIe();var ZO={exports:{}},tIe=ZO.exports,MF;function nIe(){return MF||(MF=1,function(n,e){(function(r,i){i(typeof Qs=="function"?Js():r.moment)})(tIe,function(r){//! moment.js locale configuration
var i={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"},s=r.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pzt_Sal_ar_Per_Cum_Cmt".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),meridiem:function(o,a,l){return o<12?l?"":"":l?"s":"S"},meridiemParse:/||s|S/,isPM:function(o){return o==="s"||o==="S"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(o,a){switch(a){case"d":case"D":case"Do":case"DD":return o;default:if(o===0)return o+"'nc";var l=o%10,c=o%100-l,u=o>=100?100:null;return o+(i[l]||i[c]||i[u])}},week:{dow:1,doy:7}});return s})}()),ZO.exports}nIe();var eI={exports:{}},rIe=eI.exports,DF;function iIe(){return DF||(DF=1,function(n,e){(function(r,i){i(typeof Qs=="function"?Js():r.moment)})(rIe,function(r){//! moment.js locale configuration
function i(c,u){var h=c.split("_");return u%10===1&&u%100!==11?h[0]:u%10>=2&&u%10<=4&&(u%100<10||u%100>=20)?h[1]:h[2]}function s(c,u,h){var d={ss:u?"__":"__",mm:u?"__":"__",hh:u?"__":"__",dd:"__",MM:"__",yy:"__"};return h==="m"?u?"":"":h==="h"?u?"":"":c+" "+i(d[h],+c)}function o(c,u){var h={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")},d;return c===!0?h.nominative.slice(1,7).concat(h.nominative.slice(0,1)):c?(d=/(\[[]\]) ?dddd/.test(u)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(u)?"genitive":"nominative",h[d][c.day()]):h.nominative}function a(c){return function(){return c+""+(this.hours()===11?"":"")+"] LT"}}var l=r.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:o,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:a("[ "),nextDay:a("[ "),lastDay:a("[ "),nextWeek:a("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return a("[] dddd [").call(this);case 1:case 2:case 4:return a("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:s,m:s,mm:s,h:"",hh:s,d:"",dd:s,M:"",MM:s,y:"",yy:s},meridiemParse:/|||/,isPM:function(c){return/^(|)$/.test(c)},meridiem:function(c,u,h){return c<4?"":c<12?"":c<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(c,u){switch(u){case"M":case"d":case"DDD":case"w":case"W":return c+"-";case"D":return c+"-";default:return c}},week:{dow:1,doy:7}});return l})}()),eI.exports}iIe();var OF={},Ip,IF;function Ln(){if(IF)return Ip;IF=1;var n=function(e){return e&&e.Math===Math&&e};return Ip=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof yF=="object"&&yF)||n(typeof Ip=="object"&&Ip)||function(){return this}()||Function("return this")(),Ip}var nk,RF;function Lt(){return RF||(RF=1,nk=function(n){try{return!!n()}catch{return!0}}),nk}var rk,AF;function D0(){if(AF)return rk;AF=1;var n=Lt();return rk=!n(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),rk}var ik,NF;function b1(){if(NF)return ik;NF=1;var n=D0(),e=Function.prototype,r=e.apply,i=e.call;return ik=typeof Reflect=="object"&&Reflect.apply||(n?i.bind(r):function(){return i.apply(r,arguments)}),ik}var sk,jF;function Bt(){if(jF)return sk;jF=1;var n=D0(),e=Function.prototype,r=e.call,i=n&&e.bind.bind(r,r);return sk=n?i:function(s){return function(){return r.apply(s,arguments)}},sk}var ok,LF;function No(){if(LF)return ok;LF=1;var n=Bt(),e=n({}.toString),r=n("".slice);return ok=function(i){return r(e(i),8,-1)},ok}var ak,FF;function _N(){if(FF)return ak;FF=1;var n=No(),e=Bt();return ak=function(r){if(n(r)==="Function")return e(r)},ak}var lk,$F;function hr(){if($F)return lk;$F=1;var n=typeof document=="object"&&document.all;return lk=typeof n>"u"&&n!==void 0?function(e){return typeof e=="function"||e===n}:function(e){return typeof e=="function"},lk}var ck={},uk,zF;function Gn(){if(zF)return uk;zF=1;var n=Lt();return uk=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),uk}var dk,BF;function ki(){if(BF)return dk;BF=1;var n=D0(),e=Function.prototype.call;return dk=n?e.bind(e):function(){return e.apply(e,arguments)},dk}var hk={},UF;function y1(){if(UF)return hk;UF=1;var n={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!n.call({1:2},1);return hk.f=r?function(s){var o=e(this,s);return!!o&&o.enumerable}:n,hk}var fk,qF;function O0(){return qF||(qF=1,fk=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}}),fk}var pk,WF;function x1(){if(WF)return pk;WF=1;var n=Bt(),e=Lt(),r=No(),i=Object,s=n("".split);return pk=e(function(){return!i("z").propertyIsEnumerable(0)})?function(o){return r(o)==="String"?s(o,""):i(o)}:i,pk}var mk,HF;function I0(){return HF||(HF=1,mk=function(n){return n==null}),mk}var gk,VF;function La(){if(VF)return gk;VF=1;var n=I0(),e=TypeError;return gk=function(r){if(n(r))throw new e("Can't call method on "+r);return r},gk}var vk,YF;function Zs(){if(YF)return vk;YF=1;var n=x1(),e=La();return vk=function(r){return n(e(r))},vk}var bk,GF;function Lr(){if(GF)return bk;GF=1;var n=hr();return bk=function(e){return typeof e=="object"?e!==null:n(e)},bk}var yk,KF;function hn(){return KF||(KF=1,yk={}),yk}var xk,XF;function Yi(){if(XF)return xk;XF=1;var n=hn(),e=Ln(),r=hr(),i=function(s){return r(s)?s:void 0};return xk=function(s,o){return arguments.length<2?i(n[s])||i(e[s]):n[s]&&n[s][o]||e[s]&&e[s][o]},xk}var wk,QF;function vn(){if(QF)return wk;QF=1;var n=Bt();return wk=n({}.isPrototypeOf),wk}var _k,JF;function Lf(){if(JF)return _k;JF=1;var n=Ln(),e=n.navigator,r=e&&e.userAgent;return _k=r?String(r):"",_k}var Sk,ZF;function R0(){if(ZF)return Sk;ZF=1;var n=Ln(),e=Lf(),r=n.process,i=n.Deno,s=r&&r.versions||i&&i.version,o=s&&s.v8,a,l;return o&&(a=o.split("."),l=a[0]>0&&a[0]<4?1:+(a[0]+a[1])),!l&&e&&(a=e.match(/Edge\/(\d+)/),(!a||a[1]>=74)&&(a=e.match(/Chrome\/(\d+)/),a&&(l=+a[1]))),Sk=l,Sk}var kk,e$;function Ff(){if(e$)return kk;e$=1;var n=R0(),e=Lt(),r=Ln(),i=r.String;return kk=!!Object.getOwnPropertySymbols&&!e(function(){var s=Symbol("symbol detection");return!i(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&n&&n<41}),kk}var Ck,t$;function Ite(){if(t$)return Ck;t$=1;var n=Ff();return Ck=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ck}var Ek,n$;function A0(){if(n$)return Ek;n$=1;var n=Yi(),e=hr(),r=vn(),i=Ite(),s=Object;return Ek=i?function(o){return typeof o=="symbol"}:function(o){var a=n("Symbol");return e(a)&&r(a.prototype,s(o))},Ek}var Tk,r$;function $f(){if(r$)return Tk;r$=1;var n=String;return Tk=function(e){try{return n(e)}catch{return"Object"}},Tk}var Pk,i$;function jo(){if(i$)return Pk;i$=1;var n=hr(),e=$f(),r=TypeError;return Pk=function(i){if(n(i))return i;throw new r(e(i)+" is not a function")},Pk}var Mk,s$;function SN(){if(s$)return Mk;s$=1;var n=jo(),e=I0();return Mk=function(r,i){var s=r[i];return e(s)?void 0:n(s)},Mk}var Dk,o$;function sIe(){if(o$)return Dk;o$=1;var n=ki(),e=hr(),r=Lr(),i=TypeError;return Dk=function(s,o){var a,l;if(o==="string"&&e(a=s.toString)&&!r(l=n(a,s))||e(a=s.valueOf)&&!r(l=n(a,s))||o!=="string"&&e(a=s.toString)&&!r(l=n(a,s)))return l;throw new i("Can't convert object to primitive value")},Dk}var Ok={exports:{}},Ik,a$;function zf(){return a$||(a$=1,Ik=!0),Ik}var Rk,l$;function oIe(){if(l$)return Rk;l$=1;var n=Ln(),e=Object.defineProperty;return Rk=function(r,i){try{e(n,r,{value:i,configurable:!0,writable:!0})}catch{n[r]=i}return i},Rk}var c$;function kN(){if(c$)return Ok.exports;c$=1;var n=zf(),e=Ln(),r=oIe(),i="__core-js_shared__",s=Ok.exports=e[i]||r(i,{});return(s.versions||(s.versions=[])).push({version:"3.44.0",mode:n?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Ok.exports}var Ak,u$;function Bf(){if(u$)return Ak;u$=1;var n=kN();return Ak=function(e,r){return n[e]||(n[e]=r||{})},Ak}var Nk,d$;function Ci(){if(d$)return Nk;d$=1;var n=La(),e=Object;return Nk=function(r){return e(n(r))},Nk}var jk,h$;function fr(){if(h$)return jk;h$=1;var n=Bt(),e=Ci(),r=n({}.hasOwnProperty);return jk=Object.hasOwn||function(s,o){return r(e(s),o)},jk}var Lk,f$;function w1(){if(f$)return Lk;f$=1;var n=Bt(),e=0,r=Math.random(),i=n(1.1.toString);return Lk=function(s){return"Symbol("+(s===void 0?"":s)+")_"+i(++e+r,36)},Lk}var Fk,p$;function Qn(){if(p$)return Fk;p$=1;var n=Ln(),e=Bf(),r=fr(),i=w1(),s=Ff(),o=Ite(),a=n.Symbol,l=e("wks"),c=o?a.for||a:a&&a.withoutSetter||i;return Fk=function(u){return r(l,u)||(l[u]=s&&r(a,u)?a[u]:c("Symbol."+u)),l[u]},Fk}var $k,m$;function Rte(){if(m$)return $k;m$=1;var n=ki(),e=Lr(),r=A0(),i=SN(),s=sIe(),o=Qn(),a=TypeError,l=o("toPrimitive");return $k=function(c,u){if(!e(c)||r(c))return c;var h=i(c,l),d;if(h){if(u===void 0&&(u="default"),d=n(h,c,u),!e(d)||r(d))return d;throw new a("Can't convert object to primitive value")}return u===void 0&&(u="number"),s(c,u)},$k}var zk,g$;function CN(){if(g$)return zk;g$=1;var n=Rte(),e=A0();return zk=function(r){var i=n(r,"string");return e(i)?i:i+""},zk}var Bk,v$;function Ate(){if(v$)return Bk;v$=1;var n=Ln(),e=Lr(),r=n.document,i=e(r)&&e(r.createElement);return Bk=function(s){return i?r.createElement(s):{}},Bk}var Uk,b$;function Nte(){if(b$)return Uk;b$=1;var n=Gn(),e=Lt(),r=Ate();return Uk=!n&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Uk}var y$;function _1(){if(y$)return ck;y$=1;var n=Gn(),e=ki(),r=y1(),i=O0(),s=Zs(),o=CN(),a=fr(),l=Nte(),c=Object.getOwnPropertyDescriptor;return ck.f=n?c:function(h,d){if(h=s(h),d=o(d),l)try{return c(h,d)}catch{}if(a(h,d))return i(!e(r.f,h,d),h[d])},ck}var qk,x$;function aIe(){if(x$)return qk;x$=1;var n=Lt(),e=hr(),r=/#|\.prototype\./,i=function(c,u){var h=o[s(c)];return h===l?!0:h===a?!1:e(u)?n(u):!!u},s=i.normalize=function(c){return String(c).replace(r,".").toLowerCase()},o=i.data={},a=i.NATIVE="N",l=i.POLYFILL="P";return qk=i,qk}var Wk,w$;function N0(){if(w$)return Wk;w$=1;var n=_N(),e=jo(),r=D0(),i=n(n.bind);return Wk=function(s,o){return e(s),o===void 0?s:r?i(s,o):function(){return s.apply(o,arguments)}},Wk}var Hk={},Vk,_$;function jte(){if(_$)return Vk;_$=1;var n=Gn(),e=Lt();return Vk=n&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Vk}var Yk,S$;function Fa(){if(S$)return Yk;S$=1;var n=Lr(),e=String,r=TypeError;return Yk=function(i){if(n(i))return i;throw new r(e(i)+" is not an object")},Yk}var k$;function Ss(){if(k$)return Hk;k$=1;var n=Gn(),e=Nte(),r=jte(),i=Fa(),s=CN(),o=TypeError,a=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c="enumerable",u="configurable",h="writable";return Hk.f=n?r?function(f,p,g){if(i(f),p=s(p),i(g),typeof f=="function"&&p==="prototype"&&"value"in g&&h in g&&!g[h]){var b=l(f,p);b&&b[h]&&(f[p]=g.value,g={configurable:u in g?g[u]:b[u],enumerable:c in g?g[c]:b[c],writable:!1})}return a(f,p,g)}:a:function(f,p,g){if(i(f),p=s(p),i(g),e)try{return a(f,p,g)}catch{}if("get"in g||"set"in g)throw new o("Accessors not supported");return"value"in g&&(f[p]=g.value),f},Hk}var Gk,C$;function Uf(){if(C$)return Gk;C$=1;var n=Gn(),e=Ss(),r=O0();return Gk=n?function(i,s,o){return e.f(i,s,r(1,o))}:function(i,s,o){return i[s]=o,i},Gk}var Kk,E$;function lt(){if(E$)return Kk;E$=1;var n=Ln(),e=b1(),r=_N(),i=hr(),s=_1().f,o=aIe(),a=hn(),l=N0(),c=Uf(),u=fr(),h=function(d){var f=function(p,g,b){if(this instanceof f){switch(arguments.length){case 0:return new d;case 1:return new d(p);case 2:return new d(p,g)}return new d(p,g,b)}return e(d,this,arguments)};return f.prototype=d.prototype,f};return Kk=function(d,f){var p=d.target,g=d.global,b=d.stat,y=d.proto,v=g?n:b?n[p]:n[p]&&n[p].prototype,w=g?a:a[p]||c(a,p,{})[p],k=w.prototype,_,S,C,E,P,O,M,R,j;for(E in f)_=o(g?E:p+(b?".":"#")+E,d.forced),S=!_&&v&&u(v,E),O=w[E],S&&(d.dontCallGetSet?(j=s(v,E),M=j&&j.value):M=v[E]),P=S&&M?M:f[E],!(!_&&!y&&typeof O==typeof P)&&(d.bind&&S?R=l(P,n):d.wrap&&S?R=h(P):y&&i(P)?R=r(P):R=P,(d.sham||P&&P.sham||O&&O.sham)&&c(R,"sham",!0),c(w,E,R),y&&(C=p+"Prototype",u(a,C)||c(a,C,{}),c(a[C],E,P),d.real&&k&&(_||!k[E])&&c(k,E,P)))},Kk}var Xk,T$;function nc(){if(T$)return Xk;T$=1;var n=No();return Xk=Array.isArray||function(r){return n(r)==="Array"},Xk}var Qk,P$;function lIe(){if(P$)return Qk;P$=1;var n=Math.ceil,e=Math.floor;return Qk=Math.trunc||function(i){var s=+i;return(s>0?e:n)(s)},Qk}var Jk,M$;function qf(){if(M$)return Jk;M$=1;var n=lIe();return Jk=function(e){var r=+e;return r!==r||r===0?0:n(r)},Jk}var Zk,D$;function Lte(){if(D$)return Zk;D$=1;var n=qf(),e=Math.min;return Zk=function(r){var i=n(r);return i>0?e(i,9007199254740991):0},Zk}var eC,O$;function eo(){if(O$)return eC;O$=1;var n=Lte();return eC=function(e){return n(e.length)},eC}var tC,I$;function EN(){if(I$)return tC;I$=1;var n=TypeError,e=9007199254740991;return tC=function(r){if(r>e)throw n("Maximum allowed index exceeded");return r},tC}var nC,R$;function S1(){if(R$)return nC;R$=1;var n=Gn(),e=Ss(),r=O0();return nC=function(i,s,o){n?e.f(i,s,r(0,o)):i[s]=o},nC}var rC,A$;function TN(){if(A$)return rC;A$=1;var n=Qn(),e=n("toStringTag"),r={};return r[e]="z",rC=String(r)==="[object z]",rC}var iC,N$;function rc(){if(N$)return iC;N$=1;var n=TN(),e=hr(),r=No(),i=Qn(),s=i("toStringTag"),o=Object,a=r(function(){return arguments}())==="Arguments",l=function(c,u){try{return c[u]}catch{}};return iC=n?r:function(c){var u,h,d;return c===void 0?"Undefined":c===null?"Null":typeof(h=l(u=o(c),s))=="string"?h:a?r(u):(d=r(u))==="Object"&&e(u.callee)?"Arguments":d},iC}var sC,j$;function cIe(){if(j$)return sC;j$=1;var n=Bt(),e=hr(),r=kN(),i=n(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(s){return i(s)}),sC=r.inspectSource,sC}var oC,L$;function Fte(){if(L$)return oC;L$=1;var n=Bt(),e=Lt(),r=hr(),i=rc(),s=Yi(),o=cIe(),a=function(){},l=s("Reflect","construct"),c=/^\s*(?:class|function)\b/,u=n(c.exec),h=!c.test(a),d=function(g){if(!r(g))return!1;try{return l(a,[],g),!0}catch{return!1}},f=function(g){if(!r(g))return!1;switch(i(g)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!u(c,o(g))}catch{return!0}};return f.sham=!0,oC=!l||e(function(){var p;return d(d.call)||!d(Object)||!d(function(){p=!0})||p})?f:d,oC}var aC,F$;function uIe(){if(F$)return aC;F$=1;var n=nc(),e=Fte(),r=Lr(),i=Qn(),s=i("species"),o=Array;return aC=function(a){var l;return n(a)&&(l=a.constructor,e(l)&&(l===o||n(l.prototype))?l=void 0:r(l)&&(l=l[s],l===null&&(l=void 0))),l===void 0?o:l},aC}var lC,$$;function k1(){if($$)return lC;$$=1;var n=uIe();return lC=function(e,r){return new(n(e))(r===0?0:r)},lC}var cC,z$;function j0(){if(z$)return cC;z$=1;var n=Lt(),e=Qn(),r=R0(),i=e("species");return cC=function(s){return r>=51||!n(function(){var o=[],a=o.constructor={};return a[i]=function(){return{foo:1}},o[s](Boolean).foo!==1})},cC}var B$;function $te(){if(B$)return OF;B$=1;var n=lt(),e=Lt(),r=nc(),i=Lr(),s=Ci(),o=eo(),a=EN(),l=S1(),c=k1(),u=j0(),h=Qn(),d=R0(),f=h("isConcatSpreadable"),p=d>=51||!e(function(){var y=[];return y[f]=!1,y.concat()[0]!==y}),g=function(y){if(!i(y))return!1;var v=y[f];return v!==void 0?!!v:r(y)},b=!p||!u("concat");return n({target:"Array",proto:!0,arity:1,forced:b},{concat:function(v){var w=s(this),k=c(w,0),_=0,S,C,E,P,O;for(S=-1,E=arguments.length;S<E;S++)if(O=S===-1?w:arguments[S],g(O))for(P=o(O),a(_+P),C=0;C<P;C++,_++)C in O&&l(k,_,O[C]);else a(_+1),l(k,_++,O);return k.length=_,k}}),OF}var U$={},q$={},uC,W$;function ks(){if(W$)return uC;W$=1;var n=rc(),e=String;return uC=function(r){if(n(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},uC}var dC={},hC,H$;function C1(){if(H$)return hC;H$=1;var n=qf(),e=Math.max,r=Math.min;return hC=function(i,s){var o=n(i);return o<0?e(o+s,0):r(o,s)},hC}var fC,V$;function PN(){if(V$)return fC;V$=1;var n=Zs(),e=C1(),r=eo(),i=function(s){return function(o,a,l){var c=n(o),u=r(c);if(u===0)return!s&&-1;var h=e(l,u),d;if(s&&a!==a){for(;u>h;)if(d=c[h++],d!==d)return!0}else for(;u>h;h++)if((s||h in c)&&c[h]===a)return s||h||0;return!s&&-1}};return fC={includes:i(!0),indexOf:i(!1)},fC}var pC,Y$;function L0(){return Y$||(Y$=1,pC={}),pC}var mC,G$;function zte(){if(G$)return mC;G$=1;var n=Bt(),e=fr(),r=Zs(),i=PN().indexOf,s=L0(),o=n([].push);return mC=function(a,l){var c=r(a),u=0,h=[],d;for(d in c)!e(s,d)&&e(c,d)&&o(h,d);for(;l.length>u;)e(c,d=l[u++])&&(~i(h,d)||o(h,d));return h},mC}var gC,K$;function MN(){return K$||(K$=1,gC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),gC}var vC,X$;function F0(){if(X$)return vC;X$=1;var n=zte(),e=MN();return vC=Object.keys||function(i){return n(i,e)},vC}var Q$;function DN(){if(Q$)return dC;Q$=1;var n=Gn(),e=jte(),r=Ss(),i=Fa(),s=Zs(),o=F0();return dC.f=n&&!e?Object.defineProperties:function(l,c){i(l);for(var u=s(c),h=o(c),d=h.length,f=0,p;d>f;)r.f(l,p=h[f++],u[p]);return l},dC}var bC,J$;function dIe(){if(J$)return bC;J$=1;var n=Yi();return bC=n("document","documentElement"),bC}var yC,Z$;function E1(){if(Z$)return yC;Z$=1;var n=Bf(),e=w1(),r=n("keys");return yC=function(i){return r[i]||(r[i]=e(i))},yC}var xC,e9;function $0(){if(e9)return xC;e9=1;var n=Fa(),e=DN(),r=MN(),i=L0(),s=dIe(),o=Ate(),a=E1(),l=">",c="<",u="prototype",h="script",d=a("IE_PROTO"),f=function(){},p=function(w){return c+h+l+w+c+"/"+h+l},g=function(w){w.write(p("")),w.close();var k=w.parentWindow.Object;return w=null,k},b=function(){var w=o("iframe"),k="java"+h+":",_;return w.style.display="none",s.appendChild(w),w.src=String(k),_=w.contentWindow.document,_.open(),_.write(p("document.F=Object")),_.close(),_.F},y,v=function(){try{y=new ActiveXObject("htmlfile")}catch{}v=typeof document<"u"?document.domain&&y?g(y):b():g(y);for(var w=r.length;w--;)delete v[u][r[w]];return v()};return i[d]=!0,xC=Object.create||function(k,_){var S;return k!==null?(f[u]=n(k),S=new f,f[u]=null,S[d]=k):S=v(),_===void 0?S:e.f(S,_)},xC}var wC={},t9;function T1(){if(t9)return wC;t9=1;var n=zte(),e=MN(),r=e.concat("length","prototype");return wC.f=Object.getOwnPropertyNames||function(s){return n(s,r)},wC}var _C={},SC,n9;function Wf(){if(n9)return SC;n9=1;var n=Bt();return SC=n([].slice),SC}var r9;function Bte(){if(r9)return _C;r9=1;var n=No(),e=Zs(),r=T1().f,i=Wf(),s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(a){try{return r(a)}catch{return i(s)}};return _C.f=function(l){return s&&n(l)==="Window"?o(l):r(e(l))},_C}var kC={},i9;function P1(){return i9||(i9=1,kC.f=Object.getOwnPropertySymbols),kC}var CC,s9;function z0(){if(s9)return CC;s9=1;var n=Uf();return CC=function(e,r,i,s){return s&&s.enumerable?e[r]=i:n(e,r,i),e},CC}var EC,o9;function ON(){if(o9)return EC;o9=1;var n=Ss();return EC=function(e,r,i){return n.f(e,r,i)},EC}var TC={},a9;function M1(){if(a9)return TC;a9=1;var n=Qn();return TC.f=n,TC}var PC,l9;function On(){if(l9)return PC;l9=1;var n=hn(),e=fr(),r=M1(),i=Ss().f;return PC=function(s){var o=n.Symbol||(n.Symbol={});e(o,s)||i(o,s,{value:r.f(s)})},PC}var MC,c9;function Ute(){if(c9)return MC;c9=1;var n=ki(),e=Yi(),r=Qn(),i=z0();return MC=function(){var s=e("Symbol"),o=s&&s.prototype,a=o&&o.valueOf,l=r("toPrimitive");o&&!o[l]&&i(o,l,function(c){return n(a,this)},{arity:1})},MC}var DC,u9;function hIe(){if(u9)return DC;u9=1;var n=TN(),e=rc();return DC=n?{}.toString:function(){return"[object "+e(this)+"]"},DC}var OC,d9;function Vu(){if(d9)return OC;d9=1;var n=TN(),e=Ss().f,r=Uf(),i=fr(),s=hIe(),o=Qn(),a=o("toStringTag");return OC=function(l,c,u,h){var d=u?l:l&&l.prototype;d&&(i(d,a)||e(d,a,{configurable:!0,value:c}),h&&!n&&r(d,"toString",s))},OC}var IC,h9;function fIe(){if(h9)return IC;h9=1;var n=Ln(),e=hr(),r=n.WeakMap;return IC=e(r)&&/native code/.test(String(r)),IC}var RC,f9;function B0(){if(f9)return RC;f9=1;var n=fIe(),e=Ln(),r=Lr(),i=Uf(),s=fr(),o=kN(),a=E1(),l=L0(),c="Object already initialized",u=e.TypeError,h=e.WeakMap,d,f,p,g=function(w){return p(w)?f(w):d(w,{})},b=function(w){return function(k){var _;if(!r(k)||(_=f(k)).type!==w)throw new u("Incompatible receiver, "+w+" required");return _}};if(n||o.state){var y=o.state||(o.state=new h);y.get=y.get,y.has=y.has,y.set=y.set,d=function(w,k){if(y.has(w))throw new u(c);return k.facade=w,y.set(w,k),k},f=function(w){return y.get(w)||{}},p=function(w){return y.has(w)}}else{var v=a("state");l[v]=!0,d=function(w,k){if(s(w,v))throw new u(c);return k.facade=w,i(w,v,k),k},f=function(w){return s(w,v)?w[v]:{}},p=function(w){return s(w,v)}}return RC={set:d,get:f,has:p,enforce:g,getterFor:b},RC}var AC,p9;function ic(){if(p9)return AC;p9=1;var n=N0(),e=Bt(),r=x1(),i=Ci(),s=eo(),o=k1(),a=e([].push),l=function(c){var u=c===1,h=c===2,d=c===3,f=c===4,p=c===6,g=c===7,b=c===5||p;return function(y,v,w,k){for(var _=i(y),S=r(_),C=s(S),E=n(v,w),P=0,O=k||o,M=u?O(y,C):h||g?O(y,0):void 0,R,j;C>P;P++)if((b||P in S)&&(R=S[P],j=E(R,P,_),c))if(u)M[P]=j;else if(j)switch(c){case 3:return!0;case 5:return R;case 6:return P;case 2:a(M,R)}else switch(c){case 4:return!1;case 7:a(M,R)}return p?-1:d||f?f:M}};return AC={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)},AC}var m9;function pIe(){if(m9)return q$;m9=1;var n=lt(),e=Ln(),r=ki(),i=Bt(),s=zf(),o=Gn(),a=Ff(),l=Lt(),c=fr(),u=vn(),h=Fa(),d=Zs(),f=CN(),p=ks(),g=O0(),b=$0(),y=F0(),v=T1(),w=Bte(),k=P1(),_=_1(),S=Ss(),C=DN(),E=y1(),P=z0(),O=ON(),M=Bf(),R=E1(),j=L0(),B=w1(),L=Qn(),$=M1(),z=On(),W=Ute(),q=Vu(),V=B0(),F=ic().forEach,G=R("hidden"),H="Symbol",A="prototype",Q=V.set,J=V.getterFor(H),K=Object[A],Z=e.Symbol,se=Z&&Z[A],be=e.RangeError,Oe=e.TypeError,Ke=e.QObject,De=_.f,Pe=S.f,We=w.f,nt=E.f,U=i([].push),_e=M("symbols"),Ie=M("op-symbols"),me=M("wks"),$e=!Ke||!Ke[A]||!Ke[A].findChild,ue=function(he,ge,pe){var fe=De(K,ge);fe&&delete K[ge],Pe(he,ge,pe),fe&&he!==K&&Pe(K,ge,fe)},ee=o&&l(function(){return b(Pe({},"a",{get:function(){return Pe(this,"a",{value:7}).a}})).a!==7})?ue:Pe,le=function(he,ge){var pe=_e[he]=b(se);return Q(pe,{type:H,tag:he,description:ge}),o||(pe.description=ge),pe},te=function(ge,pe,fe){ge===K&&te(Ie,pe,fe),h(ge);var Re=f(pe);return h(fe),c(_e,Re)?(fe.enumerable?(c(ge,G)&&ge[G][Re]&&(ge[G][Re]=!1),fe=b(fe,{enumerable:g(0,!1)})):(c(ge,G)||Pe(ge,G,g(1,b(null))),ge[G][Re]=!0),ee(ge,Re,fe)):Pe(ge,Re,fe)},ce=function(ge,pe){h(ge);var fe=d(pe),Re=y(fe).concat(ve(fe));return F(Re,function(Ve){(!o||r(de,fe,Ve))&&te(ge,Ve,fe[Ve])}),ge},je=function(ge,pe){return pe===void 0?b(ge):ce(b(ge),pe)},de=function(ge){var pe=f(ge),fe=r(nt,this,pe);return this===K&&c(_e,pe)&&!c(Ie,pe)?!1:fe||!c(this,pe)||!c(_e,pe)||c(this,G)&&this[G][pe]?fe:!0},Ae=function(ge,pe){var fe=d(ge),Re=f(pe);if(!(fe===K&&c(_e,Re)&&!c(Ie,Re))){var Ve=De(fe,Re);return Ve&&c(_e,Re)&&!(c(fe,G)&&fe[G][Re])&&(Ve.enumerable=!0),Ve}},Le=function(ge){var pe=We(d(ge)),fe=[];return F(pe,function(Re){!c(_e,Re)&&!c(j,Re)&&U(fe,Re)}),fe},ve=function(he){var ge=he===K,pe=We(ge?Ie:d(he)),fe=[];return F(pe,function(Re){c(_e,Re)&&(!ge||c(K,Re))&&U(fe,_e[Re])}),fe};return a||(Z=function(){if(u(se,this))throw new Oe("Symbol is not a constructor");var ge=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),pe=B(ge),fe=function(Re){var Ve=this===void 0?e:this;Ve===K&&r(fe,Ie,Re),c(Ve,G)&&c(Ve[G],pe)&&(Ve[G][pe]=!1);var Xe=g(1,Re);try{ee(Ve,pe,Xe)}catch(Ye){if(!(Ye instanceof be))throw Ye;ue(Ve,pe,Xe)}};return o&&$e&&ee(K,pe,{configurable:!0,set:fe}),le(pe,ge)},se=Z[A],P(se,"toString",function(){return J(this).tag}),P(Z,"withoutSetter",function(he){return le(B(he),he)}),E.f=de,S.f=te,C.f=ce,_.f=Ae,v.f=w.f=Le,k.f=ve,$.f=function(he){return le(L(he),he)},o&&(O(se,"description",{configurable:!0,get:function(){return J(this).description}}),s||P(K,"propertyIsEnumerable",de,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!a,sham:!a},{Symbol:Z}),F(y(me),function(he){z(he)}),n({target:H,stat:!0,forced:!a},{useSetter:function(){$e=!0},useSimple:function(){$e=!1}}),n({target:"Object",stat:!0,forced:!a,sham:!o},{create:je,defineProperty:te,defineProperties:ce,getOwnPropertyDescriptor:Ae}),n({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:Le}),W(),q(Z,H),j[G]=!0,q$}var g9={},NC,v9;function qte(){if(v9)return NC;v9=1;var n=Ff();return NC=n&&!!Symbol.for&&!!Symbol.keyFor,NC}var b9;function mIe(){if(b9)return g9;b9=1;var n=lt(),e=Yi(),r=fr(),i=ks(),s=Bf(),o=qte(),a=s("string-to-symbol-registry"),l=s("symbol-to-string-registry");return n({target:"Symbol",stat:!0,forced:!o},{for:function(c){var u=i(c);if(r(a,u))return a[u];var h=e("Symbol")(u);return a[u]=h,l[h]=u,h}}),g9}var y9={},x9;function gIe(){if(x9)return y9;x9=1;var n=lt(),e=fr(),r=A0(),i=$f(),s=Bf(),o=qte(),a=s("symbol-to-string-registry");return n({target:"Symbol",stat:!0,forced:!o},{keyFor:function(c){if(!r(c))throw new TypeError(i(c)+" is not a symbol");if(e(a,c))return a[c]}}),y9}var w9={},jC,_9;function vIe(){if(_9)return jC;_9=1;var n=Bt(),e=nc(),r=hr(),i=No(),s=ks(),o=n([].push);return jC=function(a){if(r(a))return a;if(e(a)){for(var l=a.length,c=[],u=0;u<l;u++){var h=a[u];typeof h=="string"?o(c,h):(typeof h=="number"||i(h)==="Number"||i(h)==="String")&&o(c,s(h))}var d=c.length,f=!0;return function(p,g){if(f)return f=!1,g;if(e(this))return g;for(var b=0;b<d;b++)if(c[b]===p)return g}}},jC}var S9;function Wte(){if(S9)return w9;S9=1;var n=lt(),e=Yi(),r=b1(),i=ki(),s=Bt(),o=Lt(),a=hr(),l=A0(),c=Wf(),u=vIe(),h=Ff(),d=String,f=e("JSON","stringify"),p=s(/./.exec),g=s("".charAt),b=s("".charCodeAt),y=s("".replace),v=s(1.1.toString),w=/[\uD800-\uDFFF]/g,k=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,S=!h||o(function(){var O=e("Symbol")("stringify detection");return f([O])!=="[null]"||f({a:O})!=="{}"||f(Object(O))!=="{}"}),C=o(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),E=function(O,M){var R=c(arguments),j=u(M);if(!(!a(j)&&(O===void 0||l(O))))return R[1]=function(B,L){if(a(j)&&(L=i(j,this,d(B),L)),!l(L))return L},r(f,null,R)},P=function(O,M,R){var j=g(R,M-1),B=g(R,M+1);return p(k,O)&&!p(_,B)||p(_,O)&&!p(k,j)?"\\u"+v(b(O,0),16):O};return f&&n({target:"JSON",stat:!0,arity:3,forced:S||C},{stringify:function(M,R,j){var B=c(arguments),L=r(S?E:f,null,B);return C&&typeof L=="string"?y(L,w,P):L}}),w9}var k9={},C9;function bIe(){if(C9)return k9;C9=1;var n=lt(),e=Ff(),r=Lt(),i=P1(),s=Ci(),o=!e||r(function(){i.f(1)});return n({target:"Object",stat:!0,forced:o},{getOwnPropertySymbols:function(l){var c=i.f;return c?c(s(l)):[]}}),k9}var E9;function Hte(){return E9||(E9=1,pIe(),mIe(),gIe(),Wte(),bIe()),U$}var T9={},P9;function Vte(){if(P9)return T9;P9=1;var n=On();return n("asyncDispose"),T9}var M9={},D9;function yIe(){if(D9)return M9;D9=1;var n=On();return n("asyncIterator"),M9}var O9={},I9;function Yte(){if(I9)return O9;I9=1;var n=On();return n("dispose"),O9}var R9={},A9;function xIe(){if(A9)return R9;A9=1;var n=On();return n("hasInstance"),R9}var N9={},j9;function wIe(){if(j9)return N9;j9=1;var n=On();return n("isConcatSpreadable"),N9}var L9={},F9;function Gte(){if(F9)return L9;F9=1;var n=On();return n("iterator"),L9}var $9={},z9;function _Ie(){if(z9)return $9;z9=1;var n=On();return n("match"),$9}var B9={},U9;function SIe(){if(U9)return B9;U9=1;var n=On();return n("matchAll"),B9}var q9={},W9;function kIe(){if(W9)return q9;W9=1;var n=On();return n("replace"),q9}var H9={},V9;function CIe(){if(V9)return H9;V9=1;var n=On();return n("search"),H9}var Y9={},G9;function EIe(){if(G9)return Y9;G9=1;var n=On();return n("species"),Y9}var K9={},X9;function TIe(){if(X9)return K9;X9=1;var n=On();return n("split"),K9}var Q9={},J9;function Kte(){if(J9)return Q9;J9=1;var n=On(),e=Ute();return n("toPrimitive"),e(),Q9}var Z9={},e7;function PIe(){if(e7)return Z9;e7=1;var n=Yi(),e=On(),r=Vu();return e("toStringTag"),r(n("Symbol"),"Symbol"),Z9}var t7={},n7;function MIe(){if(n7)return t7;n7=1;var n=On();return n("unscopables"),t7}var r7={},i7;function DIe(){if(i7)return r7;i7=1;var n=Ln(),e=Vu();return e(n.JSON,"JSON",!0),r7}var LC,s7;function OIe(){if(s7)return LC;s7=1,$te(),Hte(),Vte(),yIe(),Yte(),xIe(),wIe(),Gte(),_Ie(),SIe(),kIe(),CIe(),EIe(),TIe(),Kte(),PIe(),MIe(),DIe();var n=hn();return LC=n.Symbol,LC}var o7={},FC,a7;function U0(){return a7||(a7=1,FC=function(){}),FC}var $C,l7;function Hf(){return l7||(l7=1,$C={}),$C}var zC,c7;function IIe(){if(c7)return zC;c7=1;var n=Gn(),e=fr(),r=Function.prototype,i=n&&Object.getOwnPropertyDescriptor,s=e(r,"name"),o=s&&(function(){}).name==="something",a=s&&(!n||n&&i(r,"name").configurable);return zC={EXISTS:s,PROPER:o,CONFIGURABLE:a},zC}var BC,u7;function Xte(){if(u7)return BC;u7=1;var n=Lt();return BC=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),BC}var UC,d7;function D1(){if(d7)return UC;d7=1;var n=fr(),e=hr(),r=Ci(),i=E1(),s=Xte(),o=i("IE_PROTO"),a=Object,l=a.prototype;return UC=s?a.getPrototypeOf:function(c){var u=r(c);if(n(u,o))return u[o];var h=u.constructor;return e(h)&&u instanceof h?h.prototype:u instanceof a?l:null},UC}var qC,h7;function Qte(){if(h7)return qC;h7=1;var n=Lt(),e=hr(),r=Lr(),i=$0(),s=D1(),o=z0(),a=Qn(),l=zf(),c=a("iterator"),u=!1,h,d,f;[].keys&&(f=[].keys(),"next"in f?(d=s(s(f)),d!==Object.prototype&&(h=d)):u=!0);var p=!r(h)||n(function(){var g={};return h[c].call(g)!==g});return p?h={}:l&&(h=i(h)),e(h[c])||o(h,c,function(){return this}),qC={IteratorPrototype:h,BUGGY_SAFARI_ITERATORS:u},qC}var WC,f7;function RIe(){if(f7)return WC;f7=1;var n=Qte().IteratorPrototype,e=$0(),r=O0(),i=Vu(),s=Hf(),o=function(){return this};return WC=function(a,l,c,u){var h=l+" Iterator";return a.prototype=e(n,{next:r(+!u,c)}),i(a,h,!1,!0),s[h]=o,a},WC}var HC,p7;function AIe(){if(p7)return HC;p7=1;var n=Bt(),e=jo();return HC=function(r,i,s){try{return n(e(Object.getOwnPropertyDescriptor(r,i)[s]))}catch{}},HC}var VC,m7;function NIe(){if(m7)return VC;m7=1;var n=Lr();return VC=function(e){return n(e)||e===null},VC}var YC,g7;function jIe(){if(g7)return YC;g7=1;var n=NIe(),e=String,r=TypeError;return YC=function(i){if(n(i))return i;throw new r("Can't set "+e(i)+" as a prototype")},YC}var GC,v7;function LIe(){if(v7)return GC;v7=1;var n=AIe(),e=Lr(),r=La(),i=jIe();return GC=Object.setPrototypeOf||("__proto__"in{}?function(){var s=!1,o={},a;try{a=n(Object.prototype,"__proto__","set"),a(o,[]),s=o instanceof Array}catch{}return function(c,u){return r(c),i(u),e(c)&&(s?a(c,u):c.__proto__=u),c}}():void 0),GC}var KC,b7;function IN(){if(b7)return KC;b7=1;var n=lt(),e=ki(),r=zf(),i=IIe(),s=hr(),o=RIe(),a=D1(),l=LIe(),c=Vu(),u=Uf(),h=z0(),d=Qn(),f=Hf(),p=Qte(),g=i.PROPER,b=i.CONFIGURABLE,y=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,w=d("iterator"),k="keys",_="values",S="entries",C=function(){return this};return KC=function(E,P,O,M,R,j,B){o(O,P,M);var L=function(Q){if(Q===R&&V)return V;if(!v&&Q&&Q in W)return W[Q];switch(Q){case k:return function(){return new O(this,Q)};case _:return function(){return new O(this,Q)};case S:return function(){return new O(this,Q)}}return function(){return new O(this)}},$=P+" Iterator",z=!1,W=E.prototype,q=W[w]||W["@@iterator"]||R&&W[R],V=!v&&q||L(R),F=P==="Array"&&W.entries||q,G,H,A;if(F&&(G=a(F.call(new E)),G!==Object.prototype&&G.next&&(!r&&a(G)!==y&&(l?l(G,y):s(G[w])||h(G,w,C)),c(G,$,!0,!0),r&&(f[$]=C))),g&&R===_&&q&&q.name!==_&&(!r&&b?u(W,"name",_):(z=!0,V=function(){return e(q,this)})),R)if(H={values:L(_),keys:j?V:L(k),entries:L(S)},B)for(A in H)(v||z||!(A in W))&&h(W,A,H[A]);else n({target:P,proto:!0,forced:v||z},H);return(!r||B)&&W[w]!==V&&h(W,w,V,{name:R}),f[P]=V,H},KC}var XC,y7;function RN(){return y7||(y7=1,XC=function(n,e){return{value:n,done:e}}),XC}var QC,x7;function sc(){if(x7)return QC;x7=1;var n=Zs(),e=U0(),r=Hf(),i=B0(),s=Ss().f,o=IN(),a=RN(),l=zf(),c=Gn(),u="Array Iterator",h=i.set,d=i.getterFor(u);QC=o(Array,"Array",function(p,g){h(this,{type:u,target:n(p),index:0,kind:g})},function(){var p=d(this),g=p.target,b=p.index++;if(!g||b>=g.length)return p.target=null,a(void 0,!0);switch(p.kind){case"keys":return a(b,!1);case"values":return a(g[b],!1)}return a([b,g[b]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!l&&c&&f.name!=="values")try{s(f,"name",{value:"values"})}catch{}return QC}var JC,w7;function FIe(){return w7||(w7=1,JC={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),JC}var _7;function oc(){if(_7)return o7;_7=1,sc();var n=FIe(),e=Ln(),r=Vu(),i=Hf();for(var s in n)r(e[s],s),i[s]=i.Array;return o7}var ZC,S7;function Jte(){if(S7)return ZC;S7=1;var n=OIe();return oc(),ZC=n,ZC}var e2,k7;function $Ie(){return k7||(k7=1,e2=Jte()),e2}var zIe=$Ie(),BIe=ut(zIe),C7={},E7;function UIe(){if(E7)return C7;E7=1;var n=lt(),e=nc(),r=Fte(),i=Lr(),s=C1(),o=eo(),a=Zs(),l=S1(),c=Qn(),u=j0(),h=Wf(),d=u("slice"),f=c("species"),p=Array,g=Math.max;return n({target:"Array",proto:!0,forced:!d},{slice:function(y,v){var w=a(this),k=o(w),_=s(y,k),S=s(v===void 0?k:v,k),C,E,P;if(e(w)&&(C=w.constructor,r(C)&&(C===p||e(C.prototype))?C=void 0:i(C)&&(C=C[f],C===null&&(C=void 0)),C===p||C===void 0))return h(w,_,S);for(E=new(C===void 0?p:C)(g(S-_,0)),P=0;_<S;_++,P++)_ in w&&l(E,P,w[_]);return E.length=P,E}}),C7}var t2,T7;function Fn(){if(T7)return t2;T7=1;var n=Ln(),e=hn();return t2=function(r,i){var s=e[r+"Prototype"],o=s&&s[i];if(o)return o;var a=n[r],l=a&&a.prototype;return l&&l[i]},t2}var n2,P7;function qIe(){if(P7)return n2;P7=1,UIe();var n=Fn();return n2=n("Array","slice"),n2}var r2,M7;function WIe(){if(M7)return r2;M7=1;var n=vn(),e=qIe(),r=Array.prototype;return r2=function(i){var s=i.slice;return i===r||n(r,i)&&s===r.slice?e:s},r2}var i2,D7;function HIe(){if(D7)return i2;D7=1;var n=WIe();return i2=n,i2}var s2,O7;function VIe(){return O7||(O7=1,s2=HIe()),s2}var YIe=VIe(),Vf=ut(YIe),I7={},o2,R7;function Zte(){if(R7)return o2;R7=1;var n=Yi(),e=Bt(),r=T1(),i=P1(),s=Fa(),o=e([].concat);return o2=n("Reflect","ownKeys")||function(l){var c=r.f(s(l)),u=i.f;return u?o(c,u(l)):c},o2}var A7;function GIe(){if(A7)return I7;A7=1;var n=lt(),e=Zte();return n({target:"Reflect",stat:!0},{ownKeys:e}),I7}var a2,N7;function KIe(){if(N7)return a2;N7=1,GIe();var n=hn();return a2=n.Reflect.ownKeys,a2}var l2,j7;function XIe(){if(j7)return l2;j7=1;var n=KIe();return l2=n,l2}var c2,L7;function QIe(){return L7||(L7=1,c2=XIe()),c2}var JIe=QIe(),ene=ut(JIe),F7={},$7;function ZIe(){if($7)return F7;$7=1;var n=lt(),e=nc();return n({target:"Array",stat:!0},{isArray:e}),F7}var u2,z7;function eRe(){if(z7)return u2;z7=1,ZIe();var n=hn();return u2=n.Array.isArray,u2}var d2,B7;function tRe(){if(B7)return d2;B7=1;var n=eRe();return d2=n,d2}var h2,U7;function nRe(){return U7||(U7=1,h2=tRe()),h2}var rRe=nRe(),Et=ut(rRe),q7={},W7;function iRe(){if(W7)return q7;W7=1;var n=lt(),e=ic().map,r=j0(),i=r("map");return n({target:"Array",proto:!0,forced:!i},{map:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),q7}var f2,H7;function sRe(){if(H7)return f2;H7=1,iRe();var n=Fn();return f2=n("Array","map"),f2}var p2,V7;function oRe(){if(V7)return p2;V7=1;var n=vn(),e=sRe(),r=Array.prototype;return p2=function(i){var s=i.map;return i===r||n(r,i)&&s===r.map?e:s},p2}var m2,Y7;function aRe(){if(Y7)return m2;Y7=1;var n=oRe();return m2=n,m2}var g2,G7;function lRe(){return G7||(G7=1,g2=aRe()),g2}var cRe=lRe(),Kt=ut(cRe),K7={},X7;function uRe(){if(X7)return K7;X7=1;var n=lt(),e=Ci(),r=F0(),i=Lt(),s=i(function(){r(1)});return n({target:"Object",stat:!0,forced:s},{keys:function(a){return r(e(a))}}),K7}var v2,Q7;function dRe(){if(Q7)return v2;Q7=1,uRe();var n=hn();return v2=n.Object.keys,v2}var b2,J7;function hRe(){if(J7)return b2;J7=1;var n=dRe();return b2=n,b2}var y2,Z7;function fRe(){return Z7||(Z7=1,y2=hRe()),y2}var pRe=fRe(),nr=ut(pRe),ez={},tz;function mRe(){if(tz)return ez;tz=1;var n=lt(),e=Bt(),r=Date,i=e(r.prototype.getTime);return n({target:"Date",stat:!0},{now:function(){return i(new r)}}),ez}var x2,nz;function gRe(){if(nz)return x2;nz=1,mRe();var n=hn();return x2=n.Date.now,x2}var w2,rz;function vRe(){if(rz)return w2;rz=1;var n=gRe();return w2=n,w2}var _2,iz;function bRe(){return iz||(iz=1,_2=vRe()),_2}var yRe=bRe(),Ii=ut(yRe),sz={},S2,oz;function xRe(){if(oz)return S2;oz=1;var n=Bt(),e=jo(),r=Lr(),i=fr(),s=Wf(),o=D0(),a=Function,l=n([].concat),c=n([].join),u={},h=function(d,f,p){if(!i(u,f)){for(var g=[],b=0;b<f;b++)g[b]="a["+b+"]";u[f]=a("C,a","return new C("+c(g,",")+")")}return u[f](d,p)};return S2=o?a.bind:function(f){var p=e(this),g=p.prototype,b=s(arguments,1),y=function(){var w=l(b,s(arguments));return this instanceof y?h(p,w.length,w):p.apply(f,w)};return r(g)&&(y.prototype=g),y},S2}var az;function wRe(){if(az)return sz;az=1;var n=lt(),e=xRe();return n({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),sz}var k2,lz;function _Re(){if(lz)return k2;lz=1,wRe();var n=Fn();return k2=n("Function","bind"),k2}var C2,cz;function SRe(){if(cz)return C2;cz=1;var n=vn(),e=_Re(),r=Function.prototype;return C2=function(i){var s=i.bind;return i===r||n(r,i)&&s===r.bind?e:s},C2}var E2,uz;function kRe(){if(uz)return E2;uz=1;var n=SRe();return E2=n,E2}var T2,dz;function CRe(){return dz||(dz=1,T2=kRe()),T2}var ERe=CRe(),Ee=ut(ERe),hz={},P2,fz;function Yf(){if(fz)return P2;fz=1;var n=Lt();return P2=function(e,r){var i=[][e];return!!i&&n(function(){i.call(null,r||function(){return 1},1)})},P2}var M2,pz;function TRe(){if(pz)return M2;pz=1;var n=ic().forEach,e=Yf(),r=e("forEach");return M2=r?[].forEach:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0)},M2}var mz;function PRe(){if(mz)return hz;mz=1;var n=lt(),e=TRe();return n({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),hz}var D2,gz;function MRe(){if(gz)return D2;gz=1,PRe();var n=Fn();return D2=n("Array","forEach"),D2}var O2,vz;function DRe(){if(vz)return O2;vz=1;var n=MRe();return O2=n,O2}var I2,bz;function ORe(){if(bz)return I2;bz=1;var n=rc(),e=fr(),r=vn(),i=DRe(),s=Array.prototype,o={DOMTokenList:!0,NodeList:!0};return I2=function(a){var l=a.forEach;return a===s||r(s,a)&&l===s.forEach||e(o,n(a))?i:l},I2}var R2,yz;function IRe(){return yz||(yz=1,R2=ORe()),R2}var RRe=IRe(),Qe=ut(RRe),xz={},wz;function ARe(){if(wz)return xz;wz=1;var n=lt(),e=Bt(),r=nc(),i=e([].reverse),s=[1,2];return n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),i(this)}}),xz}var A2,_z;function NRe(){if(_z)return A2;_z=1,ARe();var n=Fn();return A2=n("Array","reverse"),A2}var N2,Sz;function jRe(){if(Sz)return N2;Sz=1;var n=vn(),e=NRe(),r=Array.prototype;return N2=function(i){var s=i.reverse;return i===r||n(r,i)&&s===r.reverse?e:s},N2}var j2,kz;function LRe(){if(kz)return j2;kz=1;var n=jRe();return j2=n,j2}var L2,Cz;function FRe(){return Cz||(Cz=1,L2=LRe()),L2}var $Re=FRe(),zRe=ut($Re),Ez={},F2,Tz;function BRe(){if(Tz)return F2;Tz=1;var n=Gn(),e=nc(),r=TypeError,i=Object.getOwnPropertyDescriptor,s=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(o){return o instanceof TypeError}}();return F2=s?function(o,a){if(e(o)&&!i(o,"length").writable)throw new r("Cannot set read only .length");return o.length=a}:function(o,a){return o.length=a},F2}var $2,Pz;function tne(){if(Pz)return $2;Pz=1;var n=$f(),e=TypeError;return $2=function(r,i){if(!delete r[i])throw new e("Cannot delete property "+n(i)+" of "+n(r))},$2}var Mz;function URe(){if(Mz)return Ez;Mz=1;var n=lt(),e=Ci(),r=C1(),i=qf(),s=eo(),o=BRe(),a=EN(),l=k1(),c=S1(),u=tne(),h=j0(),d=h("splice"),f=Math.max,p=Math.min;return n({target:"Array",proto:!0,forced:!d},{splice:function(b,y){var v=e(this),w=s(v),k=r(b,w),_=arguments.length,S,C,E,P,O,M;for(_===0?S=C=0:_===1?(S=0,C=w-k):(S=_-2,C=p(f(i(y),0),w-k)),a(w+S-C),E=l(v,C),P=0;P<C;P++)O=k+P,O in v&&c(E,P,v[O]);if(E.length=C,S<C){for(P=k;P<w-C;P++)O=P+C,M=P+S,O in v?v[M]=v[O]:u(v,M);for(P=w;P>w-C+S;P--)u(v,P-1)}else if(S>C)for(P=w-C;P>k;P--)O=P+C-1,M=P+S-1,O in v?v[M]=v[O]:u(v,M);for(P=0;P<S;P++)v[P+k]=arguments[P+2];return o(v,w-C+S),E}}),Ez}var z2,Dz;function qRe(){if(Dz)return z2;Dz=1,URe();var n=Fn();return z2=n("Array","splice"),z2}var B2,Oz;function WRe(){if(Oz)return B2;Oz=1;var n=vn(),e=qRe(),r=Array.prototype;return B2=function(i){var s=i.splice;return i===r||n(r,i)&&s===r.splice?e:s},B2}var U2,Iz;function HRe(){if(Iz)return U2;Iz=1;var n=WRe();return U2=n,U2}var q2,Rz;function VRe(){return Rz||(Rz=1,q2=HRe()),q2}var YRe=VRe(),Vr=ut(YRe),Az={},W2,Nz;function GRe(){if(Nz)return W2;Nz=1;var n=Gn(),e=Bt(),r=ki(),i=Lt(),s=F0(),o=P1(),a=y1(),l=Ci(),c=x1(),u=Object.assign,h=Object.defineProperty,d=e([].concat);return W2=!u||i(function(){if(n&&u({b:1},u(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},g=Symbol("assign detection"),b="abcdefghijklmnopqrst";return f[g]=7,b.split("").forEach(function(y){p[y]=y}),u({},f)[g]!==7||s(u({},p)).join("")!==b})?function(p,g){for(var b=l(p),y=arguments.length,v=1,w=o.f,k=a.f;y>v;)for(var _=c(arguments[v++]),S=w?d(s(_),w(_)):s(_),C=S.length,E=0,P;C>E;)P=S[E++],(!n||r(k,_,P))&&(b[P]=_[P]);return b}:u,W2}var jz;function KRe(){if(jz)return Az;jz=1;var n=lt(),e=GRe();return n({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),Az}var H2,Lz;function XRe(){if(Lz)return H2;Lz=1,KRe();var n=hn();return H2=n.Object.assign,H2}var V2,Fz;function QRe(){if(Fz)return V2;Fz=1;var n=XRe();return V2=n,V2}var Y2,$z;function JRe(){return $z||($z=1,Y2=QRe()),Y2}var ZRe=JRe(),Aa=ut(ZRe),zz={},Bz;function eAe(){if(Bz)return zz;Bz=1;var n=lt(),e=PN().includes,r=Lt(),i=U0(),s=r(function(){return!Array(1).includes()});return n({target:"Array",proto:!0,forced:s},{includes:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),i("includes"),zz}var G2,Uz;function tAe(){if(Uz)return G2;Uz=1,eAe();var n=Fn();return G2=n("Array","includes"),G2}var qz={},K2,Wz;function nAe(){if(Wz)return K2;Wz=1;var n=Lr(),e=No(),r=Qn(),i=r("match");return K2=function(s){var o;return n(s)&&((o=s[i])!==void 0?!!o:e(s)==="RegExp")},K2}var X2,Hz;function rAe(){if(Hz)return X2;Hz=1;var n=nAe(),e=TypeError;return X2=function(r){if(n(r))throw new e("The method doesn't accept regular expressions");return r},X2}var Q2,Vz;function iAe(){if(Vz)return Q2;Vz=1;var n=Qn(),e=n("match");return Q2=function(r){var i=/./;try{"/./"[r](i)}catch{try{return i[e]=!1,"/./"[r](i)}catch{}}return!1},Q2}var Yz;function sAe(){if(Yz)return qz;Yz=1;var n=lt(),e=Bt(),r=rAe(),i=La(),s=ks(),o=iAe(),a=e("".indexOf);return n({target:"String",proto:!0,forced:!o("includes")},{includes:function(c){return!!~a(s(i(this)),s(r(c)),arguments.length>1?arguments[1]:void 0)}}),qz}var J2,Gz;function oAe(){if(Gz)return J2;Gz=1,sAe();var n=Fn();return J2=n("String","includes"),J2}var Z2,Kz;function aAe(){if(Kz)return Z2;Kz=1;var n=vn(),e=tAe(),r=oAe(),i=Array.prototype,s=String.prototype;return Z2=function(o){var a=o.includes;return o===i||n(i,o)&&a===i.includes?e:typeof o=="string"||o===s||n(s,o)&&a===s.includes?r:a},Z2}var eE,Xz;function lAe(){if(Xz)return eE;Xz=1;var n=aAe();return eE=n,eE}var tE,Qz;function cAe(){return Qz||(Qz=1,tE=lAe()),tE}var uAe=cAe(),hf=ut(uAe),Jz={},Zz;function dAe(){if(Zz)return Jz;Zz=1;var n=lt(),e=Lt(),r=Ci(),i=D1(),s=Xte(),o=e(function(){i(1)});return n({target:"Object",stat:!0,forced:o,sham:!s},{getPrototypeOf:function(l){return i(r(l))}}),Jz}var nE,eB;function hAe(){if(eB)return nE;eB=1,dAe();var n=hn();return nE=n.Object.getPrototypeOf,nE}var rE,tB;function fAe(){if(tB)return rE;tB=1;var n=hAe();return rE=n,rE}var iE,nB;function pAe(){return nB||(nB=1,iE=fAe()),iE}var mAe=pAe(),rB=ut(mAe),sE,iB;function gAe(){if(iB)return sE;iB=1,$te();var n=Fn();return sE=n("Array","concat"),sE}var oE,sB;function vAe(){if(sB)return oE;sB=1;var n=vn(),e=gAe(),r=Array.prototype;return oE=function(i){var s=i.concat;return i===r||n(r,i)&&s===r.concat?e:s},oE}var aE,oB;function bAe(){if(oB)return aE;oB=1;var n=vAe();return aE=n,aE}var lE,aB;function yAe(){return aB||(aB=1,lE=bAe()),lE}var xAe=yAe(),Bn=ut(xAe),lB={},cB;function wAe(){if(cB)return lB;cB=1;var n=lt(),e=ic().filter,r=j0(),i=r("filter");return n({target:"Array",proto:!0,forced:!i},{filter:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),lB}var cE,uB;function _Ae(){if(uB)return cE;uB=1,wAe();var n=Fn();return cE=n("Array","filter"),cE}var uE,dB;function SAe(){if(dB)return uE;dB=1;var n=vn(),e=_Ae(),r=Array.prototype;return uE=function(i){var s=i.filter;return i===r||n(r,i)&&s===r.filter?e:s},uE}var dE,hB;function kAe(){if(hB)return dE;hB=1;var n=SAe();return dE=n,dE}var hE,fB;function CAe(){return fB||(fB=1,hE=kAe()),hE}var EAe=CAe(),ht=ut(EAe),pB={},fE,mB;function nne(){if(mB)return fE;mB=1;var n=Gn(),e=Lt(),r=Bt(),i=D1(),s=F0(),o=Zs(),a=y1().f,l=r(a),c=r([].push),u=n&&e(function(){var d=Object.create(null);return d[2]=2,!l(d,2)}),h=function(d){return function(f){for(var p=o(f),g=s(p),b=u&&i(p)===null,y=g.length,v=0,w=[],k;y>v;)k=g[v++],(!n||(b?k in p:l(p,k)))&&c(w,d?[k,p[k]]:p[k]);return w}};return fE={entries:h(!0),values:h(!1)},fE}var gB;function TAe(){if(gB)return pB;gB=1;var n=lt(),e=nne().values;return n({target:"Object",stat:!0},{values:function(i){return e(i)}}),pB}var pE,vB;function PAe(){if(vB)return pE;vB=1,TAe();var n=hn();return pE=n.Object.values,pE}var mE,bB;function MAe(){if(bB)return mE;bB=1;var n=PAe();return mE=n,mE}var gE,yB;function DAe(){return yB||(yB=1,gE=MAe()),gE}var OAe=DAe(),AN=ut(OAe),xB={},vE,wB;function NN(){return wB||(wB=1,vE=`	
\v\f\r \u2028\u2029\uFEFF`),vE}var bE,_B;function rne(){if(_B)return bE;_B=1;var n=Bt(),e=La(),r=ks(),i=NN(),s=n("".replace),o=RegExp("^["+i+"]+"),a=RegExp("(^|[^"+i+"])["+i+"]+$"),l=function(c){return function(u){var h=r(e(u));return c&1&&(h=s(h,o,"")),c&2&&(h=s(h,a,"$1")),h}};return bE={start:l(1),end:l(2),trim:l(3)},bE}var yE,SB;function IAe(){if(SB)return yE;SB=1;var n=Ln(),e=Lt(),r=Bt(),i=ks(),s=rne().trim,o=NN(),a=n.parseInt,l=n.Symbol,c=l&&l.iterator,u=/^[+-]?0x/i,h=r(u.exec),d=a(o+"08")!==8||a(o+"0x16")!==22||c&&!e(function(){a(Object(c))});return yE=d?function(p,g){var b=s(i(p));return a(b,g>>>0||(h(u,b)?16:10))}:a,yE}var kB;function RAe(){if(kB)return xB;kB=1;var n=lt(),e=IAe();return n({global:!0,forced:parseInt!==e},{parseInt:e}),xB}var xE,CB;function AAe(){if(CB)return xE;CB=1,RAe();var n=hn();return xE=n.parseInt,xE}var wE,EB;function NAe(){if(EB)return wE;EB=1;var n=AAe();return wE=n,wE}var _E,TB;function jAe(){return TB||(TB=1,_E=NAe()),_E}var LAe=jAe(),Ri=ut(LAe),PB={},MB;function FAe(){if(MB)return PB;MB=1;var n=lt(),e=_N(),r=PN().indexOf,i=Yf(),s=e([].indexOf),o=!!s&&1/s([1],1,-0)<0,a=o||!i("indexOf");return n({target:"Array",proto:!0,forced:a},{indexOf:function(c){var u=arguments.length>1?arguments[1]:void 0;return o?s(this,c,u)||0:r(this,c,u)}}),PB}var SE,DB;function $Ae(){if(DB)return SE;DB=1,FAe();var n=Fn();return SE=n("Array","indexOf"),SE}var kE,OB;function zAe(){if(OB)return kE;OB=1;var n=vn(),e=$Ae(),r=Array.prototype;return kE=function(i){var s=i.indexOf;return i===r||n(r,i)&&s===r.indexOf?e:s},kE}var CE,IB;function BAe(){if(IB)return CE;IB=1;var n=zAe();return CE=n,CE}var EE,RB;function UAe(){return RB||(RB=1,EE=BAe()),EE}var qAe=UAe(),nn=ut(qAe),AB={},NB;function WAe(){if(NB)return AB;NB=1;var n=lt(),e=nne().entries;return n({target:"Object",stat:!0},{entries:function(i){return e(i)}}),AB}var TE,jB;function HAe(){if(jB)return TE;jB=1,WAe();var n=hn();return TE=n.Object.entries,TE}var PE,LB;function VAe(){if(LB)return PE;LB=1;var n=HAe();return PE=n,PE}var ME,FB;function YAe(){return FB||(FB=1,ME=VAe()),ME}var GAe=YAe(),KAe=ut(GAe),$B={},zB;function XAe(){if(zB)return $B;zB=1;var n=lt(),e=Gn(),r=$0();return n({target:"Object",stat:!0,sham:!e},{create:r}),$B}var DE,BB;function QAe(){if(BB)return DE;BB=1,XAe();var n=hn(),e=n.Object;return DE=function(i,s){return e.create(i,s)},DE}var OE,UB;function JAe(){if(UB)return OE;UB=1;var n=QAe();return OE=n,OE}var IE,qB;function ZAe(){return qB||(qB=1,IE=JAe()),IE}var eNe=ZAe(),q0=ut(eNe),WB={},RE,HB;function ine(){if(HB)return RE;HB=1;var n=qf(),e=ks(),r=La(),i=RangeError;return RE=function(o){var a=e(r(this)),l="",c=n(o);if(c<0||c===1/0)throw new i("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(a+=a))c&1&&(l+=a);return l},RE}var AE,VB;function tNe(){if(VB)return AE;VB=1;var n=Bt(),e=Lte(),r=ks(),i=ine(),s=La(),o=n(i),a=n("".slice),l=Math.ceil,c=function(u){return function(h,d,f){var p=r(s(h)),g=e(d),b=p.length,y=f===void 0?" ":r(f),v,w;return g<=b||y===""?p:(v=g-b,w=o(y,l(v/y.length)),w.length>v&&(w=a(w,0,v)),u?p+w:w+p)}};return AE={start:c(!1),end:c(!0)},AE}var NE,YB;function nNe(){if(YB)return NE;YB=1;var n=Bt(),e=Lt(),r=tNe().start,i=RangeError,s=isFinite,o=Math.abs,a=Date.prototype,l=a.toISOString,c=n(a.getTime),u=n(a.getUTCDate),h=n(a.getUTCFullYear),d=n(a.getUTCHours),f=n(a.getUTCMilliseconds),p=n(a.getUTCMinutes),g=n(a.getUTCMonth),b=n(a.getUTCSeconds);return NE=e(function(){return l.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){l.call(new Date(NaN))})?function(){if(!s(c(this)))throw new i("Invalid time value");var v=this,w=h(v),k=f(v),_=w<0?"-":w>9999?"+":"";return _+r(o(w),_?6:4,0)+"-"+r(g(v)+1,2,0)+"-"+r(u(v),2,0)+"T"+r(d(v),2,0)+":"+r(p(v),2,0)+":"+r(b(v),2,0)+"."+r(k,3,0)+"Z"}:l,NE}var GB;function rNe(){if(GB)return WB;GB=1;var n=lt(),e=ki(),r=Ci(),i=Rte(),s=nNe(),o=No(),a=Lt(),l=a(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return n({target:"Date",proto:!0,forced:l},{toJSON:function(u){var h=r(this),d=i(h,"number");return typeof d=="number"&&!isFinite(d)?null:!("toISOString"in h)&&o(h)==="Date"?e(s,h):h.toISOString()}}),WB}var jE,KB;function iNe(){if(KB)return jE;KB=1,rNe(),Wte();var n=hn(),e=b1();return n.JSON||(n.JSON={stringify:JSON.stringify}),jE=function(i,s,o){return e(n.JSON.stringify,null,arguments)},jE}var LE,XB;function sNe(){if(XB)return LE;XB=1;var n=iNe();return LE=n,LE}var FE,QB;function oNe(){return QB||(QB=1,FE=sNe()),FE}var aNe=oNe(),ui=ut(aNe),JB={},ZB={},$E,eU;function sne(){if(eU)return $E;eU=1;var n=Ln(),e=Lf(),r=No(),i=function(s){return e.slice(0,s.length)===s};return $E=function(){return i("Bun/")?"BUN":i("Cloudflare-Workers")?"CLOUDFLARE":i("Deno/")?"DENO":i("Node.js/")?"NODE":n.Bun&&typeof Bun.version=="string"?"BUN":n.Deno&&typeof Deno.version=="object"?"DENO":r(n.process)==="process"?"NODE":n.window&&n.document?"BROWSER":"REST"}(),$E}var zE,tU;function lNe(){if(tU)return zE;tU=1;var n=TypeError;return zE=function(e,r){if(e<r)throw new n("Not enough arguments");return e},zE}var BE,nU;function one(){if(nU)return BE;nU=1;var n=Ln(),e=b1(),r=hr(),i=sne(),s=Lf(),o=Wf(),a=lNe(),l=n.Function,c=/MSIE .\./.test(s)||i==="BUN"&&function(){var u=n.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return BE=function(u,h){var d=h?2:1;return c?function(f,p){var g=a(arguments.length,1)>d,b=r(f)?f:l(f),y=g?o(arguments,d):[],v=g?function(){e(b,this,y)}:b;return h?u(v,p):u(v)}:u},BE}var rU;function cNe(){if(rU)return ZB;rU=1;var n=lt(),e=Ln(),r=one(),i=r(e.setInterval,!0);return n({global:!0,bind:!0,forced:e.setInterval!==i},{setInterval:i}),ZB}var iU={},sU;function uNe(){if(sU)return iU;sU=1;var n=lt(),e=Ln(),r=one(),i=r(e.setTimeout,!0);return n({global:!0,bind:!0,forced:e.setTimeout!==i},{setTimeout:i}),iU}var oU;function ane(){return oU||(oU=1,cNe(),uNe()),JB}var UE,aU;function dNe(){if(aU)return UE;aU=1,ane();var n=hn();return UE=n.setTimeout,UE}var qE,lU;function hNe(){return lU||(lU=1,qE=dNe()),qE}var fNe=hNe(),Rr=ut(fNe),cU={},WE,uU;function pNe(){if(uU)return WE;uU=1;var n=Ci(),e=C1(),r=eo();return WE=function(s){for(var o=n(this),a=r(o),l=arguments.length,c=e(l>1?arguments[1]:void 0,a),u=l>2?arguments[2]:void 0,h=u===void 0?a:e(u,a);h>c;)o[c++]=s;return o},WE}var dU;function mNe(){if(dU)return cU;dU=1;var n=lt(),e=pNe(),r=U0();return n({target:"Array",proto:!0},{fill:e}),r("fill"),cU}var HE,hU;function gNe(){if(hU)return HE;hU=1,mNe();var n=Fn();return HE=n("Array","fill"),HE}var VE,fU;function vNe(){if(fU)return VE;fU=1;var n=vn(),e=gNe(),r=Array.prototype;return VE=function(i){var s=i.fill;return i===r||n(r,i)&&s===r.fill?e:s},VE}var YE,pU;function bNe(){if(pU)return YE;pU=1;var n=vNe();return YE=n,YE}var GE,mU;function yNe(){return mU||(mU=1,GE=bNe()),GE}var xNe=yNe(),lne=ut(xNe),KE={exports:{}},gU;function wNe(){return gU||(gU=1,function(n){n.exports=e;function e(i){if(i)return r(i)}function r(i){for(var s in e.prototype)i[s]=e.prototype[s];return i}e.prototype.on=e.prototype.addEventListener=function(i,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(s),this},e.prototype.once=function(i,s){function o(){this.off(i,o),s.apply(this,arguments)}return o.fn=s,this.on(i,o),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(i,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+i];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var a,l=0;l<o.length;l++)if(a=o[l],a===s||a.fn===s){o.splice(l,1);break}return o.length===0&&delete this._callbacks["$"+i],this},e.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),o=this._callbacks["$"+i],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(o){o=o.slice(0);for(var a=0,l=o.length;a<l;++a)o[a].apply(this,s)}return this},e.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},e.prototype.hasListeners=function(i){return!!this.listeners(i).length}}(KE)),KE.exports}var _Ne=wNe(),jN=ut(_Ne);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Ks(){return Ks=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Ks.apply(this,arguments)}function Cs(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function Eb(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}var tI;typeof Object.assign!="function"?tI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),i=1;i<arguments.length;i++){var s=arguments[i];if(s!=null)for(var o in s)s.hasOwnProperty(o)&&(r[o]=s[o])}return r}:tI=Object.assign;var Mu=tI,vU=["","webkit","Moz","MS","ms","o"],SNe=typeof document>"u"?{style:{}}:document.createElement("div"),kNe="function",Ud=Math.round,Du=Math.abs,LN=Date.now;function O1(n,e){for(var r,i,s=e[0].toUpperCase()+e.slice(1),o=0;o<vU.length;){if(r=vU[o],i=r?r+s:e,i in n)return i;o++}}var Sa;typeof window>"u"?Sa={}:Sa=window;var cne=O1(SNe.style,"touchAction"),une=cne!==void 0;function CNe(){if(!une)return!1;var n={},e=Sa.CSS&&Sa.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return n[r]=e?Sa.CSS.supports("touch-action",r):!0}),n}var dne="compute",hne="auto",nI="manipulation",lu="none",zg="pan-x",Bg="pan-y",Tb=CNe(),ENe=/mobile|tablet|ip(ad|hone|od)|android/i,fne="ontouchstart"in Sa,TNe=O1(Sa,"PointerEvent")!==void 0,PNe=fne&&ENe.test(navigator.userAgent),W0="touch",MNe="pen",FN="mouse",DNe="kinect",ONe=25,Jr=1,Yu=2,Xn=4,wi=8,Lx=1,H0=2,V0=4,Y0=8,ff=16,Mo=H0|V0,cu=Y0|ff,pne=Mo|cu,mne=["x","y"],Fx=["clientX","clientY"];function ka(n,e,r){var i;if(n)if(n.forEach)n.forEach(e,r);else if(n.length!==void 0)for(i=0;i<n.length;)e.call(r,n[i],i,n),i++;else for(i in n)n.hasOwnProperty(i)&&e.call(r,n[i],i,n)}function I1(n,e){return typeof n===kNe?n.apply(e&&e[0]||void 0,e):n}function Bc(n,e){return n.indexOf(e)>-1}function INe(n){if(Bc(n,lu))return lu;var e=Bc(n,zg),r=Bc(n,Bg);return e&&r?lu:e||r?e?zg:Bg:Bc(n,nI)?nI:hne}var gne=function(){function n(r,i){this.manager=r,this.set(i)}var e=n.prototype;return e.set=function(i){i===dne&&(i=this.compute()),une&&this.manager.element.style&&Tb[i]&&(this.manager.element.style[cne]=i),this.actions=i.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var i=[];return ka(this.manager.recognizers,function(s){I1(s.options.enable,[s])&&(i=i.concat(s.getTouchAction()))}),INe(i.join(" "))},e.preventDefaults=function(i){var s=i.srcEvent,o=i.offsetDirection;if(this.manager.session.prevented){s.preventDefault();return}var a=this.actions,l=Bc(a,lu)&&!Tb[lu],c=Bc(a,Bg)&&!Tb[Bg],u=Bc(a,zg)&&!Tb[zg];if(l){var h=i.pointers.length===1,d=i.distance<2,f=i.deltaTime<250;if(h&&d&&f)return}if(!(u&&c)&&(l||c&&o&Mo||u&&o&cu))return this.preventSrc(s)},e.preventSrc=function(i){this.manager.session.prevented=!0,i.preventDefault()},n}();function $N(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function vne(n){var e=n.length;if(e===1)return{x:Ud(n[0].clientX),y:Ud(n[0].clientY)};for(var r=0,i=0,s=0;s<e;)r+=n[s].clientX,i+=n[s].clientY,s++;return{x:Ud(r/e),y:Ud(i/e)}}function bU(n){for(var e=[],r=0;r<n.pointers.length;)e[r]={clientX:Ud(n.pointers[r].clientX),clientY:Ud(n.pointers[r].clientY)},r++;return{timeStamp:LN(),pointers:e,center:vne(e),deltaX:n.deltaX,deltaY:n.deltaY}}function $x(n,e,r){r||(r=mne);var i=e[r[0]]-n[r[0]],s=e[r[1]]-n[r[1]];return Math.sqrt(i*i+s*s)}function rI(n,e,r){r||(r=mne);var i=e[r[0]]-n[r[0]],s=e[r[1]]-n[r[1]];return Math.atan2(s,i)*180/Math.PI}function bne(n,e){return n===e?Lx:Du(n)>=Du(e)?n<0?H0:V0:e<0?Y0:ff}function RNe(n,e){var r=e.center,i=n.offsetDelta||{},s=n.prevDelta||{},o=n.prevInput||{};(e.eventType===Jr||o.eventType===Xn)&&(s=n.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=n.offsetDelta={x:r.x,y:r.y}),e.deltaX=s.x+(r.x-i.x),e.deltaY=s.y+(r.y-i.y)}function yne(n,e,r){return{x:e/n||0,y:r/n||0}}function ANe(n,e){return $x(e[0],e[1],Fx)/$x(n[0],n[1],Fx)}function NNe(n,e){return rI(e[1],e[0],Fx)+rI(n[1],n[0],Fx)}function jNe(n,e){var r=n.lastInterval||e,i=e.timeStamp-r.timeStamp,s,o,a,l;if(e.eventType!==wi&&(i>ONe||r.velocity===void 0)){var c=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,h=yne(i,c,u);o=h.x,a=h.y,s=Du(h.x)>Du(h.y)?h.x:h.y,l=bne(c,u),n.lastInterval=e}else s=r.velocity,o=r.velocityX,a=r.velocityY,l=r.direction;e.velocity=s,e.velocityX=o,e.velocityY=a,e.direction=l}function LNe(n,e){var r=n.session,i=e.pointers,s=i.length;r.firstInput||(r.firstInput=bU(e)),s>1&&!r.firstMultiple?r.firstMultiple=bU(e):s===1&&(r.firstMultiple=!1);var o=r.firstInput,a=r.firstMultiple,l=a?a.center:o.center,c=e.center=vne(i);e.timeStamp=LN(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=rI(l,c),e.distance=$x(l,c),RNe(r,e),e.offsetDirection=bne(e.deltaX,e.deltaY);var u=yne(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=Du(u.x)>Du(u.y)?u.x:u.y,e.scale=a?ANe(a.pointers,i):1,e.rotation=a?NNe(a.pointers,i):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,jNe(r,e);var h=n.element,d=e.srcEvent,f;d.composedPath?f=d.composedPath()[0]:d.path?f=d.path[0]:f=d.target,$N(f,h)&&(h=f),e.target=h}function FNe(n,e,r){var i=r.pointers.length,s=r.changedPointers.length,o=e&Jr&&i-s===0,a=e&(Xn|wi)&&i-s===0;r.isFirst=!!o,r.isFinal=!!a,o&&(n.session={}),r.eventType=e,LNe(n,r),n.emit("hammer.input",r),n.recognize(r),n.session.prevInput=r}function Ug(n){return n.trim().split(/\s+/g)}function Im(n,e,r){ka(Ug(e),function(i){n.addEventListener(i,r,!1)})}function Rm(n,e,r){ka(Ug(e),function(i){n.removeEventListener(i,r,!1)})}function yU(n){var e=n.ownerDocument||n;return e.defaultView||e.parentWindow||window}var Gf=function(){function n(r,i){var s=this;this.manager=r,this.callback=i,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(o){I1(r.options.enable,[r])&&s.handler(o)},this.init()}var e=n.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Im(this.element,this.evEl,this.domHandler),this.evTarget&&Im(this.target,this.evTarget,this.domHandler),this.evWin&&Im(yU(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Rm(this.element,this.evEl,this.domHandler),this.evTarget&&Rm(this.target,this.evTarget,this.domHandler),this.evWin&&Rm(yU(this.element),this.evWin,this.domHandler)},n}();function Ou(n,e,r){if(n.indexOf&&!r)return n.indexOf(e);for(var i=0;i<n.length;){if(r&&n[i][r]==e||!r&&n[i]===e)return i;i++}return-1}var $Ne={pointerdown:Jr,pointermove:Yu,pointerup:Xn,pointercancel:wi,pointerout:wi},zNe={2:W0,3:MNe,4:FN,5:DNe},xne="pointerdown",wne="pointermove pointerup pointercancel";Sa.MSPointerEvent&&!Sa.PointerEvent&&(xne="MSPointerDown",wne="MSPointerMove MSPointerUp MSPointerCancel");var _ne=function(n){Cs(e,n);function e(){var i,s=e.prototype;return s.evEl=xne,s.evWin=wne,i=n.apply(this,arguments)||this,i.store=i.manager.session.pointerEvents=[],i}var r=e.prototype;return r.handler=function(s){var o=this.store,a=!1,l=s.type.toLowerCase().replace("ms",""),c=$Ne[l],u=zNe[s.pointerType]||s.pointerType,h=u===W0,d=Ou(o,s.pointerId,"pointerId");c&Jr&&(s.button===0||h)?d<0&&(o.push(s),d=o.length-1):c&(Xn|wi)&&(a=!0),!(d<0)&&(o[d]=s,this.callback(this.manager,c,{pointers:o,changedPointers:[s],pointerType:u,srcEvent:s}),a&&o.splice(d,1))},e}(Gf);function qg(n){return Array.prototype.slice.call(n,0)}function zN(n,e,r){for(var i=[],s=[],o=0;o<n.length;){var a=e?n[o][e]:n[o];Ou(s,a)<0&&i.push(n[o]),s[o]=a,o++}return r&&(e?i=i.sort(function(l,c){return l[e]>c[e]}):i=i.sort()),i}var BNe={touchstart:Jr,touchmove:Yu,touchend:Xn,touchcancel:wi},UNe="touchstart touchmove touchend touchcancel",BN=function(n){Cs(e,n);function e(){var i;return e.prototype.evTarget=UNe,i=n.apply(this,arguments)||this,i.targetIds={},i}var r=e.prototype;return r.handler=function(s){var o=BNe[s.type],a=qNe.call(this,s,o);a&&this.callback(this.manager,o,{pointers:a[0],changedPointers:a[1],pointerType:W0,srcEvent:s})},e}(Gf);function qNe(n,e){var r=qg(n.touches),i=this.targetIds;if(e&(Jr|Yu)&&r.length===1)return i[r[0].identifier]=!0,[r,r];var s,o,a=qg(n.changedTouches),l=[],c=this.target;if(o=r.filter(function(u){return $N(u.target,c)}),e===Jr)for(s=0;s<o.length;)i[o[s].identifier]=!0,s++;for(s=0;s<a.length;)i[a[s].identifier]&&l.push(a[s]),e&(Xn|wi)&&delete i[a[s].identifier],s++;if(l.length)return[zN(o.concat(l),"identifier",!0),l]}var WNe={mousedown:Jr,mousemove:Yu,mouseup:Xn},HNe="mousedown",VNe="mousemove mouseup",UN=function(n){Cs(e,n);function e(){var i,s=e.prototype;return s.evEl=HNe,s.evWin=VNe,i=n.apply(this,arguments)||this,i.pressed=!1,i}var r=e.prototype;return r.handler=function(s){var o=WNe[s.type];o&Jr&&s.button===0&&(this.pressed=!0),o&Yu&&s.which!==1&&(o=Xn),this.pressed&&(o&Xn&&(this.pressed=!1),this.callback(this.manager,o,{pointers:[s],changedPointers:[s],pointerType:FN,srcEvent:s}))},e}(Gf),YNe=2500,xU=25;function wU(n){var e=n.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var i={x:r.clientX,y:r.clientY},s=this.lastTouches;this.lastTouches.push(i);var o=function(){var l=s.indexOf(i);l>-1&&s.splice(l,1)};setTimeout(o,YNe)}}function GNe(n,e){n&Jr?(this.primaryTouch=e.changedPointers[0].identifier,wU.call(this,e)):n&(Xn|wi)&&wU.call(this,e)}function KNe(n){for(var e=n.srcEvent.clientX,r=n.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var s=this.lastTouches[i],o=Math.abs(e-s.x),a=Math.abs(r-s.y);if(o<=xU&&a<=xU)return!0}return!1}var Sne=function(){var n=function(e){Cs(r,e);function r(s,o){var a;return a=e.call(this,s,o)||this,a.handler=function(l,c,u){var h=u.pointerType===W0,d=u.pointerType===FN;if(!(d&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(h)GNe.call(Eb(Eb(a)),c,u);else if(d&&KNe.call(Eb(Eb(a)),u))return;a.callback(l,c,u)}},a.touch=new BN(a.manager,a.handler),a.mouse=new UN(a.manager,a.handler),a.primaryTouch=null,a.lastTouches=[],a}var i=r.prototype;return i.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Gf);return n}();function XNe(n){var e,r=n.options.inputClass;return r?e=r:TNe?e=_ne:PNe?e=BN:fne?e=Sne:e=UN,new e(n,FNe)}function qd(n,e,r){return Array.isArray(n)?(ka(n,r[e],r),!0):!1}var wy=1,bs=2,pf=4,Bl=8,Ca=Bl,Wg=16,_o=32,QNe=1;function JNe(){return QNe++}function Pb(n,e){var r=e.manager;return r?r.get(n):n}function _U(n){return n&Wg?"cancel":n&Bl?"end":n&pf?"move":n&bs?"start":""}var G0=function(){function n(r){r===void 0&&(r={}),this.options=Ks({enable:!0},r),this.id=JNe(),this.manager=null,this.state=wy,this.simultaneous={},this.requireFail=[]}var e=n.prototype;return e.set=function(i){return Mu(this.options,i),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(i){if(qd(i,"recognizeWith",this))return this;var s=this.simultaneous;return i=Pb(i,this),s[i.id]||(s[i.id]=i,i.recognizeWith(this)),this},e.dropRecognizeWith=function(i){return qd(i,"dropRecognizeWith",this)?this:(i=Pb(i,this),delete this.simultaneous[i.id],this)},e.requireFailure=function(i){if(qd(i,"requireFailure",this))return this;var s=this.requireFail;return i=Pb(i,this),Ou(s,i)===-1&&(s.push(i),i.requireFailure(this)),this},e.dropRequireFailure=function(i){if(qd(i,"dropRequireFailure",this))return this;i=Pb(i,this);var s=Ou(this.requireFail,i);return s>-1&&this.requireFail.splice(s,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(i){return!!this.simultaneous[i.id]},e.emit=function(i){var s=this,o=this.state;function a(l){s.manager.emit(l,i)}o<Bl&&a(s.options.event+_U(o)),a(s.options.event),i.additionalEvent&&a(i.additionalEvent),o>=Bl&&a(s.options.event+_U(o))},e.tryEmit=function(i){if(this.canEmit())return this.emit(i);this.state=_o},e.canEmit=function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(_o|wy)))return!1;i++}return!0},e.recognize=function(i){var s=Mu({},i);if(!I1(this.options.enable,[this,s])){this.reset(),this.state=_o;return}this.state&(Ca|Wg|_o)&&(this.state=wy),this.state=this.process(s),this.state&(bs|pf|Bl|Wg)&&this.tryEmit(s)},e.process=function(i){},e.getTouchAction=function(){},e.reset=function(){},n}(),iI=function(n){Cs(e,n);function e(i){var s;return i===void 0&&(i={}),s=n.call(this,Ks({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},i))||this,s.pTime=!1,s.pCenter=!1,s._timer=null,s._input=null,s.count=0,s}var r=e.prototype;return r.getTouchAction=function(){return[nI]},r.process=function(s){var o=this,a=this.options,l=s.pointers.length===a.pointers,c=s.distance<a.threshold,u=s.deltaTime<a.time;if(this.reset(),s.eventType&Jr&&this.count===0)return this.failTimeout();if(c&&u&&l){if(s.eventType!==Xn)return this.failTimeout();var h=this.pTime?s.timeStamp-this.pTime<a.interval:!0,d=!this.pCenter||$x(this.pCenter,s.center)<a.posThreshold;this.pTime=s.timeStamp,this.pCenter=s.center,!d||!h?this.count=1:this.count+=1,this._input=s;var f=this.count%a.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){o.state=Ca,o.tryEmit()},a.interval),bs):Ca}return _o},r.failTimeout=function(){var s=this;return this._timer=setTimeout(function(){s.state=_o},this.options.interval),_o},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===Ca&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(G0),mf=function(n){Cs(e,n);function e(i){return i===void 0&&(i={}),n.call(this,Ks({pointers:1},i))||this}var r=e.prototype;return r.attrTest=function(s){var o=this.options.pointers;return o===0||s.pointers.length===o},r.process=function(s){var o=this.state,a=s.eventType,l=o&(bs|pf),c=this.attrTest(s);return l&&(a&wi||!c)?o|Wg:l||c?a&Xn?o|Bl:o&bs?o|pf:bs:_o},e}(G0);function kne(n){return n===ff?"down":n===Y0?"up":n===H0?"left":n===V0?"right":""}var qN=function(n){Cs(e,n);function e(i){var s;return i===void 0&&(i={}),s=n.call(this,Ks({event:"pan",threshold:10,pointers:1,direction:pne},i))||this,s.pX=null,s.pY=null,s}var r=e.prototype;return r.getTouchAction=function(){var s=this.options.direction,o=[];return s&Mo&&o.push(Bg),s&cu&&o.push(zg),o},r.directionTest=function(s){var o=this.options,a=!0,l=s.distance,c=s.direction,u=s.deltaX,h=s.deltaY;return c&o.direction||(o.direction&Mo?(c=u===0?Lx:u<0?H0:V0,a=u!==this.pX,l=Math.abs(s.deltaX)):(c=h===0?Lx:h<0?Y0:ff,a=h!==this.pY,l=Math.abs(s.deltaY))),s.direction=c,a&&l>o.threshold&&c&o.direction},r.attrTest=function(s){return mf.prototype.attrTest.call(this,s)&&(this.state&bs||!(this.state&bs)&&this.directionTest(s))},r.emit=function(s){this.pX=s.deltaX,this.pY=s.deltaY;var o=kne(s.direction);o&&(s.additionalEvent=this.options.event+o),n.prototype.emit.call(this,s)},e}(mf),Cne=function(n){Cs(e,n);function e(i){return i===void 0&&(i={}),n.call(this,Ks({event:"swipe",threshold:10,velocity:.3,direction:Mo|cu,pointers:1},i))||this}var r=e.prototype;return r.getTouchAction=function(){return qN.prototype.getTouchAction.call(this)},r.attrTest=function(s){var o=this.options.direction,a;return o&(Mo|cu)?a=s.overallVelocity:o&Mo?a=s.overallVelocityX:o&cu&&(a=s.overallVelocityY),n.prototype.attrTest.call(this,s)&&o&s.offsetDirection&&s.distance>this.options.threshold&&s.maxPointers===this.options.pointers&&Du(a)>this.options.velocity&&s.eventType&Xn},r.emit=function(s){var o=kne(s.offsetDirection);o&&this.manager.emit(this.options.event+o,s),this.manager.emit(this.options.event,s)},e}(mf),Ene=function(n){Cs(e,n);function e(i){return i===void 0&&(i={}),n.call(this,Ks({event:"pinch",threshold:0,pointers:2},i))||this}var r=e.prototype;return r.getTouchAction=function(){return[lu]},r.attrTest=function(s){return n.prototype.attrTest.call(this,s)&&(Math.abs(s.scale-1)>this.options.threshold||this.state&bs)},r.emit=function(s){if(s.scale!==1){var o=s.scale<1?"in":"out";s.additionalEvent=this.options.event+o}n.prototype.emit.call(this,s)},e}(mf),Tne=function(n){Cs(e,n);function e(i){return i===void 0&&(i={}),n.call(this,Ks({event:"rotate",threshold:0,pointers:2},i))||this}var r=e.prototype;return r.getTouchAction=function(){return[lu]},r.attrTest=function(s){return n.prototype.attrTest.call(this,s)&&(Math.abs(s.rotation)>this.options.threshold||this.state&bs)},e}(mf),Pne=function(n){Cs(e,n);function e(i){var s;return i===void 0&&(i={}),s=n.call(this,Ks({event:"press",pointers:1,time:251,threshold:9},i))||this,s._timer=null,s._input=null,s}var r=e.prototype;return r.getTouchAction=function(){return[hne]},r.process=function(s){var o=this,a=this.options,l=s.pointers.length===a.pointers,c=s.distance<a.threshold,u=s.deltaTime>a.time;if(this._input=s,!c||!l||s.eventType&(Xn|wi)&&!u)this.reset();else if(s.eventType&Jr)this.reset(),this._timer=setTimeout(function(){o.state=Ca,o.tryEmit()},a.time);else if(s.eventType&Xn)return Ca;return _o},r.reset=function(){clearTimeout(this._timer)},r.emit=function(s){this.state===Ca&&(s&&s.eventType&Xn?this.manager.emit(this.options.event+"up",s):(this._input.timeStamp=LN(),this.manager.emit(this.options.event,this._input)))},e}(G0),Mne={domEvents:!1,touchAction:dne,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},SU=[[Tne,{enable:!1}],[Ene,{enable:!1},["rotate"]],[Cne,{direction:Mo}],[qN,{direction:Mo},["swipe"]],[iI],[iI,{event:"doubletap",taps:2},["tap"]],[Pne]],ZNe=1,kU=2;function CU(n,e){var r=n.element;if(r.style){var i;ka(n.options.cssProps,function(s,o){i=O1(r.style,o),e?(n.oldCssProps[i]=r.style[i],r.style[i]=s):r.style[i]=n.oldCssProps[i]||""}),e||(n.oldCssProps={})}}function e3e(n,e){var r=document.createEvent("Event");r.initEvent(n,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var EU=function(){function n(r,i){var s=this;this.options=Mu({},Mne,i||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=XNe(this),this.touchAction=new gne(this,this.options.touchAction),CU(this,!0),ka(this.options.recognizers,function(o){var a=s.add(new o[0](o[1]));o[2]&&a.recognizeWith(o[2]),o[3]&&a.requireFailure(o[3])},this)}var e=n.prototype;return e.set=function(i){return Mu(this.options,i),i.touchAction&&this.touchAction.update(),i.inputTarget&&(this.input.destroy(),this.input.target=i.inputTarget,this.input.init()),this},e.stop=function(i){this.session.stopped=i?kU:ZNe},e.recognize=function(i){var s=this.session;if(!s.stopped){this.touchAction.preventDefaults(i);var o,a=this.recognizers,l=s.curRecognizer;(!l||l&&l.state&Ca)&&(s.curRecognizer=null,l=null);for(var c=0;c<a.length;)o=a[c],s.stopped!==kU&&(!l||o===l||o.canRecognizeWith(l))?o.recognize(i):o.reset(),!l&&o.state&(bs|pf|Bl)&&(s.curRecognizer=o,l=o),c++}},e.get=function(i){if(i instanceof G0)return i;for(var s=this.recognizers,o=0;o<s.length;o++)if(s[o].options.event===i)return s[o];return null},e.add=function(i){if(qd(i,"add",this))return this;var s=this.get(i.options.event);return s&&this.remove(s),this.recognizers.push(i),i.manager=this,this.touchAction.update(),i},e.remove=function(i){if(qd(i,"remove",this))return this;var s=this.get(i);if(i){var o=this.recognizers,a=Ou(o,s);a!==-1&&(o.splice(a,1),this.touchAction.update())}return this},e.on=function(i,s){if(i===void 0||s===void 0)return this;var o=this.handlers;return ka(Ug(i),function(a){o[a]=o[a]||[],o[a].push(s)}),this},e.off=function(i,s){if(i===void 0)return this;var o=this.handlers;return ka(Ug(i),function(a){s?o[a]&&o[a].splice(Ou(o[a],s),1):delete o[a]}),this},e.emit=function(i,s){this.options.domEvents&&e3e(i,s);var o=this.handlers[i]&&this.handlers[i].slice();if(!(!o||!o.length)){s.type=i,s.preventDefault=function(){s.srcEvent.preventDefault()};for(var a=0;a<o.length;)o[a](s),a++}},e.destroy=function(){this.element&&CU(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},n}(),t3e={touchstart:Jr,touchmove:Yu,touchend:Xn,touchcancel:wi},n3e="touchstart",r3e="touchstart touchmove touchend touchcancel",i3e=function(n){Cs(e,n);function e(){var i,s=e.prototype;return s.evTarget=n3e,s.evWin=r3e,i=n.apply(this,arguments)||this,i.started=!1,i}var r=e.prototype;return r.handler=function(s){var o=t3e[s.type];if(o===Jr&&(this.started=!0),!!this.started){var a=s3e.call(this,s,o);o&(Xn|wi)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,o,{pointers:a[0],changedPointers:a[1],pointerType:W0,srcEvent:s})}},e}(Gf);function s3e(n,e){var r=qg(n.touches),i=qg(n.changedTouches);return e&(Xn|wi)&&(r=zN(r.concat(i),"identifier",!0)),[r,i]}function Dne(n,e,r){var i="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var s=new Error("get-stack-trace"),o=s&&s.stack?s.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=window.console&&(window.console.warn||window.console.log);return a&&a.call(window.console,i,o),n.apply(this,arguments)}}var One=Dne(function(n,e,r){for(var i=Object.keys(e),s=0;s<i.length;)(!r||r&&n[i[s]]===void 0)&&(n[i[s]]=e[i[s]]),s++;return n},"extend","Use `assign`."),o3e=Dne(function(n,e){return One(n,e,!0)},"merge","Use `assign`.");function a3e(n,e,r){var i=e.prototype,s;s=n.prototype=Object.create(i),s.constructor=n,s._super=i,r&&Mu(s,r)}function TU(n,e){return function(){return n.apply(e,arguments)}}var WN=function(){var n=function(r,i){return i===void 0&&(i={}),new EU(r,Ks({recognizers:SU.concat()},i))};return n.VERSION="2.0.17-rc",n.DIRECTION_ALL=pne,n.DIRECTION_DOWN=ff,n.DIRECTION_LEFT=H0,n.DIRECTION_RIGHT=V0,n.DIRECTION_UP=Y0,n.DIRECTION_HORIZONTAL=Mo,n.DIRECTION_VERTICAL=cu,n.DIRECTION_NONE=Lx,n.DIRECTION_DOWN=ff,n.INPUT_START=Jr,n.INPUT_MOVE=Yu,n.INPUT_END=Xn,n.INPUT_CANCEL=wi,n.STATE_POSSIBLE=wy,n.STATE_BEGAN=bs,n.STATE_CHANGED=pf,n.STATE_ENDED=Bl,n.STATE_RECOGNIZED=Ca,n.STATE_CANCELLED=Wg,n.STATE_FAILED=_o,n.Manager=EU,n.Input=Gf,n.TouchAction=gne,n.TouchInput=BN,n.MouseInput=UN,n.PointerEventInput=_ne,n.TouchMouseInput=Sne,n.SingleTouchInput=i3e,n.Recognizer=G0,n.AttrRecognizer=mf,n.Tap=iI,n.Pan=qN,n.Swipe=Cne,n.Pinch=Ene,n.Rotate=Tne,n.Press=Pne,n.on=Im,n.off=Rm,n.each=ka,n.merge=o3e,n.extend=One,n.bindFn=TU,n.assign=Mu,n.inherit=a3e,n.bindFn=TU,n.prefixed=O1,n.toArray=qg,n.inArray=Ou,n.uniqueArray=zN,n.splitStr=Ug,n.boolOrFn=I1,n.hasParent=$N,n.addEventListeners=Im,n.removeEventListeners=Rm,n.defaults=Mu({},Mne,{preset:SU}),n}();WN.defaults;const HN=BIe("DELETE");function Ine(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return VN({},n,...r)}function VN(){const n=zx(...arguments);return Ane(n),n}function zx(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return zx(VN(e[0],e[1]),...Vf(e).call(e,2));const i=e[0],s=e[1];if(i instanceof Date&&s instanceof Date)return i.setTime(s.getTime()),i;for(const o of ene(s))Object.prototype.propertyIsEnumerable.call(s,o)&&(s[o]===HN?delete i[o]:i[o]!==null&&s[o]!==null&&typeof i[o]=="object"&&typeof s[o]=="object"&&!Et(i[o])&&!Et(s[o])?i[o]=zx(i[o],s[o]):i[o]=Rne(s[o]));return i}function Rne(n){return Et(n)?Kt(n).call(n,e=>Rne(e)):typeof n=="object"&&n!==null?n instanceof Date?new Date(n.getTime()):zx({},n):n}function Ane(n){for(const e of nr(n))n[e]===HN?delete n[e]:typeof n[e]=="object"&&n[e]!==null&&Ane(n[e])}function l3e(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return c3e(e.length?e:[Ii()])}function c3e(n){let[e,r,i]=u3e(n),s=1;const o=()=>{const a=2091639*e+s*23283064365386963e-26;return e=r,r=i,i=a-(s=a|0)};return o.uint32=()=>o()*4294967296,o.fract53=()=>o()+(o()*2097152|0)*11102230246251565e-32,o.algorithm="Alea",o.seed=n,o.version="0.9",o}function u3e(){const n=d3e();let e=n(" "),r=n(" "),i=n(" ");for(let s=0;s<arguments.length;s++)e-=n(s<0||arguments.length<=s?void 0:arguments[s]),e<0&&(e+=1),r-=n(s<0||arguments.length<=s?void 0:arguments[s]),r<0&&(r+=1),i-=n(s<0||arguments.length<=s?void 0:arguments[s]),i<0&&(i+=1);return[e,r,i]}function d3e(){let n=4022871197;return function(e){const r=e.toString();for(let i=0;i<r.length;i++){n+=r.charCodeAt(i);let s=.02519603282416938*n;n=s>>>0,s-=n,s*=n,n=s>>>0,s-=n,n+=s*4294967296}return(n>>>0)*23283064365386963e-26}}function h3e(){const n=()=>{};return{on:n,off:n,destroy:n,emit:n,get(){return{set:n}}}}const YN=typeof window<"u"?window.Hammer||WN:function(){return h3e()};function So(n){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:n,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=YN(this._dom.overlay);r.on("tap",Ee(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Qe(i).call(i,s=>{r.on(s,o=>{o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=s=>{f3e(s.target,n)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=s=>{("key"in s?s.key==="Escape":s.keyCode===27)&&this.deactivate()}}jN(So.prototype);So.current=null;So.prototype.destroy=function(){this.deactivate();for(const r of zRe(n=Vr(e=this._cleanupQueue).call(e,0)).call(n)){var n,e;r()}};So.prototype.activate=function(){So.current&&So.current.deactivate(),So.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};So.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};So.prototype._onTapOverlay=function(n){this.activate(),n.srcEvent.stopPropagation()};function f3e(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}const p3e=/^\/?Date\((-?\d+)/i,m3e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,g3e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,v3e=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,b3e=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Am(n){return n instanceof Number||typeof n=="number"}function Nne(n){if(n)for(;n.hasChildNodes()===!0;){const e=n.firstChild;e&&(Nne(e),n.removeChild(e))}}function Ai(n){return n instanceof String||typeof n=="string"}function sI(n){return typeof n=="object"&&n!==null}function y3e(n){if(n instanceof Date)return!0;if(Ai(n)){if(p3e.exec(n))return!0;if(!isNaN(Date.parse(n)))return!0}return!1}function Iu(n,e,r,i){let s=!1;i===!0&&(s=e[r]===null&&n[r]!==void 0),s?delete n[r]:n[r]=e[r]}function jne(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const i in n)if(e[i]!==void 0)if(e[i]===null||typeof e[i]!="object")Iu(n,e,i,r);else{const s=n[i],o=e[i];sI(s)&&sI(o)&&jne(s,o,r)}}const x3e=Aa;function w3e(n,e){if(!Et(n))throw new Error("Array with property names expected as first argument");for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];for(const o of i)for(let a=0;a<n.length;a++){const l=n[a];o&&Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e}function _3e(n,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Et(r))throw new TypeError("Arrays are not supported by deepExtend");for(let s=0;s<n.length;s++){const o=n[s];if(Object.prototype.hasOwnProperty.call(r,o))if(r[o]&&r[o].constructor===Object)e[o]===void 0&&(e[o]={}),e[o].constructor===Object?Hg(e[o],r[o],!1,i):Iu(e,r,o,i);else{if(Et(r[o]))throw new TypeError("Arrays are not supported by deepExtend");Iu(e,r,o,i)}}return e}function S3e(n,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Et(r))throw new TypeError("Arrays are not supported by deepExtend");for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&!hf(n).call(n,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?Hg(e[s],r[s]):Iu(e,r,s,i);else if(Et(r[s])){e[s]=[];for(let o=0;o<r[s].length;o++)e[s].push(r[s][o])}else Iu(e,r,s,i);return e}function Hg(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)||r===!0)if(typeof e[o]=="object"&&e[o]!==null&&rB(e[o])===Object.prototype)n[o]===void 0?n[o]=Hg({},e[o],r):typeof n[o]=="object"&&n[o]!==null&&rB(n[o])===Object.prototype?Hg(n[o],e[o],r):Iu(n,e,o,i);else if(Et(e[o])){var s;n[o]=Vf(s=e[o]).call(s)}else Iu(n,e,o,i);return n}function k3e(n,e){if(n.length!==e.length)return!1;for(let r=0,i=n.length;r<i;r++)if(n[r]!=e[r])return!1;return!0}function am(n){const e=typeof n;return e==="object"?n===null?"null":n instanceof Boolean?"Boolean":n instanceof Number?"Number":n instanceof String?"String":Et(n)?"Array":n instanceof Date?"Date":"Object":e==="number"?"Number":e==="boolean"?"Boolean":e==="string"?"String":e===void 0?"undefined":e}function Vg(n,e){return[...n,e]}function Lne(n){return Vf(n).call(n)}function C3e(n){return n.getBoundingClientRect().left}function E3e(n){return n.getBoundingClientRect().right}function T3e(n){return n.getBoundingClientRect().top}function P3e(n,e){let r=n.className.split(" ");const i=e.split(" ");r=Bn(r).call(r,ht(i).call(i,function(s){return!hf(r).call(r,s)})),n.className=r.join(" ")}function M3e(n,e){let r=n.className.split(" ");const i=e.split(" ");r=ht(r).call(r,function(s){return!hf(i).call(i,s)}),n.className=r.join(" ")}function D3e(n,e){if(Et(n)){const r=n.length;for(let i=0;i<r;i++)e(n[i],i,n)}else for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e(n[r],r,n)}const O3e=AN;function I3e(n,e,r){return n[e]!==r?(n[e]=r,!0):!1}function R3e(n){let e=!1;return()=>{e||(e=!0,requestAnimationFrame(()=>{e=!1,n()}))}}function A3e(n){n||(n=window.event),n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}function N3e(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event,e=null;return n&&(n.target?e=n.target:n.srcElement&&(e=n.srcElement)),!(e instanceof Element)||e.nodeType!=null&&e.nodeType==3&&(e=e.parentNode,!(e instanceof Element))?null:e}function j3e(n,e){let r=n;for(;r;){if(r===e)return!0;if(r.parentNode)r=r.parentNode;else return!1}return!1}const L3e={asBoolean(n,e){return typeof n=="function"&&(n=n()),n!=null?n!=!1:e||null},asNumber(n,e){return typeof n=="function"&&(n=n()),n!=null?Number(n)||e||null:e||null},asString(n,e){return typeof n=="function"&&(n=n()),n!=null?String(n):e||null},asSize(n,e){return typeof n=="function"&&(n=n()),Ai(n)?n:Am(n)?n+"px":e||null},asElement(n,e){return typeof n=="function"&&(n=n()),n||e||null}};function R1(n){let e;switch(n.length){case 3:case 4:return e=g3e.exec(n),e?{r:Ri(e[1]+e[1],16),g:Ri(e[2]+e[2],16),b:Ri(e[3]+e[3],16)}:null;case 6:case 7:return e=m3e.exec(n),e?{r:Ri(e[1],16),g:Ri(e[2],16),b:Ri(e[3],16)}:null;default:return null}}function F3e(n,e){if(hf(n).call(n,"rgba"))return n;if(hf(n).call(n,"rgb")){const r=n.substr(nn(n).call(n,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=R1(n);return r==null?n:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function GN(n,e,r){var i;return"#"+Vf(i=((1<<24)+(n<<16)+(e<<8)+r).toString(16)).call(i,1)}function $3e(n,e){if(Ai(n)){let i=n;if(XN(i)){var r;const s=Kt(r=i.substr(4).substr(0,i.length-5).split(",")).call(r,function(o){return Ri(o)});i=GN(s[0],s[1],s[2])}if(KN(i)===!0){const s=$ne(i),o={h:s.h,s:s.s*.8,v:Math.min(1,s.v*1.02)},a={h:s.h,s:Math.min(1,s.s*1.25),v:s.v*.8},l=oI(a.h,a.s,a.v),c=oI(o.h,o.s,o.v);return{background:i,border:l,highlight:{background:c,border:l},hover:{background:c,border:l}}}else return{background:i,border:i,highlight:{background:i,border:i},hover:{background:i,border:i}}}else return e?{background:n.background||e.background,border:n.border||e.border,highlight:Ai(n.highlight)?{border:n.highlight,background:n.highlight}:{background:n.highlight&&n.highlight.background||e.highlight.background,border:n.highlight&&n.highlight.border||e.highlight.border},hover:Ai(n.hover)?{border:n.hover,background:n.hover}:{border:n.hover&&n.hover.border||e.hover.border,background:n.hover&&n.hover.background||e.hover.background}}:{background:n.background||void 0,border:n.border||void 0,highlight:Ai(n.highlight)?{border:n.highlight,background:n.highlight}:{background:n.highlight&&n.highlight.background||void 0,border:n.highlight&&n.highlight.border||void 0},hover:Ai(n.hover)?{border:n.hover,background:n.hover}:{border:n.hover&&n.hover.border||void 0,background:n.hover&&n.hover.background||void 0}}}function Wd(n,e,r){n=n/255,e=e/255,r=r/255;const i=Math.min(n,Math.min(e,r)),s=Math.max(n,Math.max(e,r));if(i===s)return{h:0,s:0,v:i};const o=n===i?e-r:r===i?n-e:r-n,l=60*((n===i?3:r===i?1:5)-o/(s-i))/360,c=(s-i)/s;return{h:l,s:c,v:s}}function Fne(n){const e=document.createElement("div"),r={};e.style.cssText=n;for(let i=0;i<e.style.length;++i)r[e.style[i]]=e.style.getPropertyValue(e.style[i]);return r}function z3e(n,e){const r=Fne(e);for(const[i,s]of KAe(r))n.style.setProperty(i,s)}function B3e(n,e){const r=Fne(e);for(const i of nr(r))n.style.removeProperty(i)}function Nm(n,e,r){let i,s,o;const a=Math.floor(n*6),l=n*6-a,c=r*(1-e),u=r*(1-l*e),h=r*(1-(1-l)*e);switch(a%6){case 0:i=r,s=h,o=c;break;case 1:i=u,s=r,o=c;break;case 2:i=c,s=r,o=h;break;case 3:i=c,s=u,o=r;break;case 4:i=h,s=c,o=r;break;case 5:i=r,s=c,o=u;break}return{r:Math.floor(i*255),g:Math.floor(s*255),b:Math.floor(o*255)}}function oI(n,e,r){const i=Nm(n,e,r);return GN(i.r,i.g,i.b)}function $ne(n){const e=R1(n);if(!e)throw new TypeError("'".concat(n,"' is not a valid color."));return Wd(e.r,e.g,e.b)}function KN(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)}function XN(n){return v3e.test(n)}function zne(n){return b3e.test(n)}function U3e(n,e){if(e!==null&&typeof e=="object"){const r=q0(e);for(let i=0;i<n.length;i++)Object.prototype.hasOwnProperty.call(e,n[i])&&typeof e[n[i]]=="object"&&(r[n[i]]=QN(e[n[i]]));return r}else return null}function QN(n){if(n===null||typeof n!="object")return null;if(n instanceof Element)return n;const e=q0(n);for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&typeof n[r]=="object"&&(e[r]=QN(n[r]));return e}function q3e(n,e){for(let r=0;r<n.length;r++){const i=n[r];let s;for(s=r;s>0&&e(i,n[s-1])<0;s--)n[s]=n[s-1];n[s]=i}return n}function W3e(n,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=function(p){return p!=null},o=function(p){return p!==null&&typeof p=="object"},a=function(p){for(const g in p)if(Object.prototype.hasOwnProperty.call(p,g))return!1;return!0};if(!o(n))throw new Error("Parameter mergeTarget must be an object");if(!o(e))throw new Error("Parameter options must be an object");if(!s(r))throw new Error("Parameter option must have a value");if(!o(i))throw new Error("Parameter globalOptions must be an object");const l=function(p,g,b){o(p[b])||(p[b]={});const y=g[b],v=p[b];for(const w in y)Object.prototype.hasOwnProperty.call(y,w)&&(v[w]=y[w])},c=e[r],h=o(i)&&!a(i)?i[r]:void 0,d=h?h.enabled:void 0;if(c===void 0)return;if(typeof c=="boolean"){o(n[r])||(n[r]={}),n[r].enabled=c;return}if(c===null&&!o(n[r]))if(s(h))n[r]=q0(h);else return;if(!o(c))return;let f=!0;c.enabled!==void 0?f=c.enabled:d!==void 0&&(f=h.enabled),l(n,e,r),n[r].enabled=f}function H3e(n,e,r,i){let o=0,a=0,l=n.length-1;for(;a<=l&&o<1e4;){const c=Math.floor((a+l)/2),u=n[c],h=i===void 0?u[r]:u[r][i],d=e(h);if(d==0)return c;d==-1?a=c+1:l=c-1,o++}return-1}function V3e(n,e,r,i,s){let a=0,l=0,c=n.length-1,u,h,d,f;for(s=s??function(p,g){return p==g?0:p<g?-1:1};l<=c&&a<1e4;){if(f=Math.floor(.5*(c+l)),u=n[Math.max(0,f-1)][r],h=n[f][r],d=n[Math.min(n.length-1,f+1)][r],s(h,e)==0)return f;if(s(u,e)<0&&s(h,e)>0)return i=="before"?Math.max(0,f-1):f;if(s(h,e)<0&&s(d,e)>0)return i=="before"?f:Math.min(n.length-1,f+1);s(h,e)<0?l=f+1:c=f-1,a++}return-1}const Y3e={linear(n){return n},easeInQuad(n){return n*n},easeOutQuad(n){return n*(2-n)},easeInOutQuad(n){return n<.5?2*n*n:-1+(4-2*n)*n},easeInCubic(n){return n*n*n},easeOutCubic(n){return--n*n*n+1},easeInOutCubic(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},easeInQuart(n){return n*n*n*n},easeOutQuart(n){return 1- --n*n*n*n},easeInOutQuart(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},easeInQuint(n){return n*n*n*n*n},easeOutQuint(n){return 1+--n*n*n*n*n},easeInOutQuint(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n}};function G3e(){const n=document.createElement("p");n.style.width="100%",n.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(n),document.body.appendChild(e);const r=n.offsetWidth;e.style.overflow="scroll";let i=n.offsetWidth;return r==i&&(i=e.clientWidth),document.body.removeChild(e),r-i}function K3e(n,e){let r;Et(e)||(e=[e]);for(const i of n)if(i){r=i[e[0]];for(let s=1;s<e.length;s++)r&&(r=r[e[s]]);if(typeof r<"u")break}return r}const X3e={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let Bne=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return X3e[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let i;const s=this._isColorString(e);if(s!==void 0&&(e=s),Ai(e)===!0){if(XN(e)===!0){const o=e.substr(4).substr(0,e.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(zne(e)===!0){const o=e.substr(5).substr(0,e.length-6).split(",");i={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(KN(e)===!0){const o=R1(e);i={r:o.r,g:o.g,b:o.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const o=e.a!==void 0?e.a:"1.0";i={r:e.r,g:e.g,b:e.b,a:o}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+ui(e));this._setColor(i,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=Aa({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Rr(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=Aa({},e)),this.color=e;const i=Wd(e.r,e.g,e.b),s=2*Math.PI,o=this.r*i.s,a=this.centerCoordinates.x+o*Math.sin(s*i.h),l=this.centerCoordinates.y+o*Math.cos(s*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=Wd(this.color.r,this.color.g,this.color.b);r.v=e/100;const i=Nm(r.h,r.s,r.v);i.a=this.color.a,this.color=i,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=Wd(e.r,e.g,e.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,s,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-r.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),lne(i).call(i),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,i,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const a=document.createElement("DIV");a.style.color="red",a.style.fontWeight="bold",a.style.padding="10px",a.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(a)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const o=this;this.opacityRange.onchange=function(){o._setOpacity(this.value)},this.opacityRange.oninput=function(){o._setOpacity(this.value)},this.brightnessRange.onchange=function(){o._setBrightness(this.value)},this.brightnessRange.oninput=function(){o._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=Ee(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=Ee(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=Ee(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=Ee(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new YN(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,i);let s,o,a,l;this.centerCoordinates={x:r*.5,y:i*.5},this.r=.49*r;const c=2*Math.PI/360,u=1/360,h=1/this.r;let d;for(a=0;a<360;a++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*Math.sin(c*a),o=this.centerCoordinates.y+l*Math.cos(c*a),d=Nm(a*u,l*h,1),e.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",e.fillRect(s-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,i)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),i=e.center.x-r.left,s=e.center.y-r.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=i-a,c=s-o,u=Math.atan2(l,c),h=.98*Math.min(Math.sqrt(l*l+c*c),a),d=Math.cos(u)*h+o,f=Math.sin(u)*h+a;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=u/(2*Math.PI);p=p<0?p+1:p;const g=h/this.r,b=Wd(this.color.r,this.color.g,this.color.b);b.h=p,b.s=g;const y=Nm(b.h,b.s,b.v);y.a=this.color.a,this.color=y,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function aI(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const i=document.createElement(e[0]);return i.appendChild(aI(...Vf(e).call(e,1))),i}}let Q3e=class{constructor(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=o,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Aa(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Bne(s),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(Et(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),ht(e)!==void 0&&(this.options.filter=ht(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);ht(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=ht(this.options);let r=0,i=!1;for(const s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,i=!1,typeof e=="function"?(i=e(s,[]),i=i||this._handleObject(this.configureOptions[s],[s],!0)):(e===!0||nn(e).call(e,s)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let i=0;i<e.length;i++)if(r[e[i]]!==void 0)r=r[e[i]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const o=document.createElement("div");o.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return Qe(i).call(i,a=>{o.appendChild(a)}),this.domElements.push(o),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=document.createElement("div");if(s.className="vis-configuration vis-config-label vis-config-s"+r.length,i===!0){for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(aI("i","b",e))}else s.innerText=e+":";return s}_makeDropdown(e,r,i){const s=document.createElement("select");s.className="vis-configuration vis-config-select";let o=0;r!==void 0&&nn(e).call(e,r)!==-1&&(o=nn(e).call(e,r));for(let c=0;c<e.length;c++){const u=document.createElement("option");u.value=e[c],c===o&&(u.selected="selected"),u.innerText=e[c],s.appendChild(u)}const a=this;s.onchange=function(){a._update(this.value,i)};const l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,s)}_makeRange(e,r,i){const s=e[0],o=e[1],a=e[2],l=e[3],c=document.createElement("input");c.className="vis-configuration vis-config-range";try{c.type="range",c.min=o,c.max=a}catch{}c.step=l;let u="",h=0;r!==void 0?(r<0&&r*1.2<o?(c.min=Math.ceil(r*1.2),h=c.min,u="range increased"):r/1.2<o&&(c.min=Math.ceil(r/1.2),h=c.min,u="range increased"),r*1.2>a&&a!==1&&(c.max=Math.ceil(r*1.2),h=c.max,u="range increased"),c.value=r):c.value=s;const d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=c.value;const f=this;c.onchange=function(){d.value=this.value,f._update(Number(this.value),i)},c.oninput=function(){d.value=this.value};const p=this._makeLabel(i[i.length-1],i),g=this._makeItem(i,p,c,d);u!==""&&this.popupHistory[g]!==h&&(this.popupHistory[g]=h,this._setupPopup(u,g))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const i=document.createElement("div");i.id="vis-configuration-popup",i.className="vis-configuration-popup",i.innerText=e,i.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:i,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Rr(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Rr(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,i){const s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=e,r!==void 0&&(s.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:i,value:r}):this.changedOptions.push({path:i,value:r})));const o=this;s.onchange=function(){o._update(this.checked,i)};const a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}_makeTextInput(e,r,i){const s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=r,r!==e&&this.changedOptions.push({path:i,value:r});const o=this;s.onchange=function(){o._update(this.value,i)};const a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}_makeColorField(e,r,i){const s=e[1],o=document.createElement("div");r=r===void 0?s:r,r!=="none"?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=r):o.className="vis-configuration vis-config-colorBlock none",r=r===void 0?s:r,o.onclick=()=>{this._showColorPicker(r,o,i)};const a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,o)}_showColorPicker(e,r,i){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(s=>{const o="rgba("+s.r+","+s.g+","+s.b+","+s.a+")";r.style.backgroundColor=o,this._update(o,i)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,i)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1;const o=ht(this.options);let a=!1;for(const l in e)if(Object.prototype.hasOwnProperty.call(e,l)){s=!0;const c=e[l],u=Vg(r,l);if(typeof o=="function"&&(s=o(l,r),s===!1&&!Et(c)&&typeof c!="string"&&typeof c!="boolean"&&c instanceof Object&&(this.allowCreation=!1,s=this._handleObject(c,u,!0),this.allowCreation=i===!1)),s!==!1){a=!0;const h=this._getValue(u);if(Et(c))this._handleArray(c,h,u);else if(typeof c=="string")this._makeTextInput(c,h,u);else if(typeof c=="boolean")this._makeCheckbox(c,h,u);else if(c instanceof Object){if(!this.hideOption(r,l,this.moduleOptions))if(c.enabled!==void 0){const d=Vg(u,"enabled"),f=this._getValue(d);if(f===!0){const p=this._makeLabel(l,u,!0);this._makeItem(u,p),a=this._handleObject(c,u)||a}else this._makeCheckbox(c,f,u)}else{const d=this._makeLabel(l,u,!0);this._makeItem(u,d),a=this._handleObject(c,u)||a}}else console.error("dont know how to handle",c,l,u)}}return a}_handleArray(e,r,i){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,i),e[1]!==r&&this.changedOptions.push({path:i,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,i),e[0]!==r&&this.changedOptions.push({path:i,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,i),e[0]!==r&&this.changedOptions.push({path:i,value:Number(r)}))}_update(e,r){const i=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}_constructOptions(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let o=0;o<r.length;o++)r[o]!=="global"&&(s[r[o]]===void 0&&(s[r[o]]={}),o!==r.length-1?s=s[r[o]]:s[r[o]]=e);return i}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(aI("pre","const options = "+ui(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},J3e=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=Ri(e),this.y=Ri(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,i=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth;let a=0,l=0;if(this.overflowMethod=="flip"){let c=!1,u=!0;this.y-r<this.padding&&(u=!1),this.x+i>o-this.padding&&(c=!0),c?a=this.x-i:a=this.x,u?l=this.y-r:l=this.y}else l=this.y-r,l+r+this.padding>s&&(l=s-r-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+i+this.padding>o&&(a=o-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},Rp=!1,PU;const lI="background: #FFeeee; color: #dd0000";let Z3e=class In{static validate(e,r,i){Rp=!1,PU=r;let s=r;return i!==void 0&&(s=r[i]),In.parse(e,s,[]),Rp}static parse(e,r,i){for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&In.check(s,e,r,i)}static check(e,r,i,s){if(i[e]===void 0&&i.__any__===void 0){In.getSuggestion(e,i,s);return}let o=e,a=!0;i[e]===void 0&&i.__any__!==void 0&&(o="__any__",a=In.getType(r[e])==="object");let l=i[o];a&&l.__type__!==void 0&&(l=l.__type__),In.checkFields(e,r,i,o,l,s)}static checkFields(e,r,i,s,o,a){const l=function(h){console.error("%c"+h+In.printLocation(a,e),lI)},c=In.getType(r[e]),u=o[c];u!==void 0?In.getType(u)==="array"&&nn(u).call(u,r[e])===-1?(l('Invalid option detected in "'+e+'". Allowed values are:'+In.print(u)+' not "'+r[e]+'". '),Rp=!0):c==="object"&&s!=="__any__"&&(a=Vg(a,e),In.parse(r[e],i[s],a)):o.any===void 0&&(l('Invalid type received for "'+e+'". Expected: '+In.print(nr(o))+". Received ["+c+'] "'+r[e]+'"'),Rp=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Et(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,i){const s=In.findInOptions(e,r,i,!1),o=In.findInOptions(e,PU,[],!0),a=8,l=4;let c;s.indexMatch!==void 0?c=" in "+In.printLocation(s.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:o.distance<=l&&s.distance>o.distance?c=" in "+In.printLocation(s.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+In.printLocation(o.path,o.closestMatch,""):s.distance<=a?c='. Did you mean "'+s.closestMatch+'"?'+In.printLocation(s.path,e):c=". Did you mean one of these: "+In.print(nr(r))+In.printLocation(i,e),console.error('%cUnknown option detected: "'+e+'"'+c,lI),Rp=!0}static findInOptions(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,a="",l=[];const c=e.toLowerCase();let u;for(const d in r){let f;if(r[d].__type__!==void 0&&s===!0){const p=In.findInOptions(e,r[d],Vg(i,d));o>p.distance&&(a=p.closestMatch,l=p.path,o=p.distance,u=p.indexMatch)}else{var h;nn(h=d.toLowerCase()).call(h,c)!==-1&&(u=d),f=In.levenshteinDistance(e,d),o>f&&(a=d,l=Lne(i),o=f)}}return{closestMatch:a,path:l,distance:o,indexMatch:u}}static printLocation(e,r){let s=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let o=0;o<e.length;o++){for(let a=0;a<o+1;a++)s+="  ";s+=e[o]+`: {
`}for(let o=0;o<e.length+1;o++)s+="  ";s+=r+`
`;for(let o=0;o<e.length+1;o++){for(let a=0;a<e.length-o;a++)s+="  ";s+=`}
`}return s+`

`}static print(e){return ui(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const i=[];let s;for(s=0;s<=r.length;s++)i[s]=[s];let o;for(o=0;o<=e.length;o++)i[0][o]=o;for(s=1;s<=r.length;s++)for(o=1;o<=e.length;o++)r.charAt(s-1)==e.charAt(o-1)?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o-1]+1,Math.min(i[s][o-1]+1,i[s-1][o]+1));return i[r.length][e.length]}};const e5e=So,t5e=Bne,n5e=Q3e,r5e=YN,i5e=J3e,s5e=lI,o5e=Z3e;var a5e=Object.freeze({__proto__:null,Activator:e5e,Alea:l3e,ColorPicker:t5e,Configurator:n5e,DELETE:HN,HSVToHex:oI,HSVToRGB:Nm,Hammer:r5e,Popup:i5e,RGBToHSV:Wd,RGBToHex:GN,VALIDATOR_PRINT_STYLE:s5e,Validator:o5e,addClassName:P3e,addCssText:z3e,binarySearchCustom:H3e,binarySearchValue:V3e,bridgeObject:QN,copyAndExtendArray:Vg,copyArray:Lne,deepExtend:Hg,deepObjectAssign:VN,easingFunctions:Y3e,equalArray:k3e,extend:x3e,fillIfDefined:jne,forEach:D3e,getAbsoluteLeft:C3e,getAbsoluteRight:E3e,getAbsoluteTop:T3e,getScrollBarWidth:G3e,getTarget:N3e,getType:am,hasParent:j3e,hexToHSV:$ne,hexToRGB:R1,insertSort:q3e,isDate:y3e,isNumber:Am,isObject:sI,isString:Ai,isValidHex:KN,isValidRGB:XN,isValidRGBA:zne,mergeOptions:W3e,option:L3e,overrideOpacity:F3e,parseColor:$3e,preventDefault:A3e,pureDeepObjectAssign:Ine,recursiveDOMDelete:Nne,removeClassName:M3e,removeCssText:B3e,selectiveBridgeObject:U3e,selectiveDeepExtend:_3e,selectiveExtend:w3e,selectiveNotDeepExtend:S3e,throttle:R3e,toArray:O3e,topMost:K3e,updateProperty:I3e});function hl(n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e].redundant=n[e].used,n[e].used=[])}function ss(n){for(var e in n){if(!Object.prototype.hasOwnProperty.call(n,e))continue;const i=n[e];for(var r=0;r<i.redundant.length;r++)i.redundant[r].parentNode.removeChild(i.redundant[r]);i.redundant=[]}}function l5e(n){hl(n),ss(n),hl(n)}function Hs(n,e,r){var i;return Object.prototype.hasOwnProperty.call(e,n)?e[n].redundant.length>0?(i=e[n].redundant[0],e[n].redundant.shift()):(i=document.createElementNS("http://www.w3.org/2000/svg",n),r.appendChild(i)):(i=document.createElementNS("http://www.w3.org/2000/svg",n),e[n]={used:[],redundant:[]},r.appendChild(i)),e[n].used.push(i),i}function XE(n,e,r,i){var s;return Object.prototype.hasOwnProperty.call(e,n)?e[n].redundant.length>0?(s=e[n].redundant[0],e[n].redundant.shift()):(s=document.createElement(n),i!==void 0?r.insertBefore(s,i):r.appendChild(s)):(s=document.createElement(n),e[n]={used:[],redundant:[]},i!==void 0?r.insertBefore(s,i):r.appendChild(s)),e[n].used.push(s),s}function gf(n,e,r,i,s,o){var a;if(r.style=="circle"?(a=Hs("circle",i,s),a.setAttributeNS(null,"cx",n),a.setAttributeNS(null,"cy",e),a.setAttributeNS(null,"r",.5*r.size)):(a=Hs("rect",i,s),a.setAttributeNS(null,"x",n-.5*r.size),a.setAttributeNS(null,"y",e-.5*r.size),a.setAttributeNS(null,"width",r.size),a.setAttributeNS(null,"height",r.size)),r.styles!==void 0&&a.setAttributeNS(null,"style",r.styles),a.setAttributeNS(null,"class",r.className+" vis-point"),o){var l=Hs("text",i,s);o.xOffset&&(n=n+o.xOffset),o.yOffset&&(e=e+o.yOffset),o.content&&(l.textContent=o.content),o.className&&l.setAttributeNS(null,"class",o.className+" vis-label"),l.setAttributeNS(null,"x",n),l.setAttributeNS(null,"y",e)}return a}function cI(n,e,r,i,s,o,a,l){if(i!=0){i<0&&(i*=-1,e-=i);var c=Hs("rect",o,a);c.setAttributeNS(null,"x",n-.5*r),c.setAttributeNS(null,"y",e),c.setAttributeNS(null,"width",r),c.setAttributeNS(null,"height",i),c.setAttributeNS(null,"class",s),l&&c.setAttributeNS(null,"style",l)}}function c5e(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch{return"en"}}var QE,MU;function u5e(){if(MU)return QE;MU=1,Hte();var n=hn();return QE=n.Object.getOwnPropertySymbols,QE}var JE,DU;function d5e(){if(DU)return JE;DU=1;var n=u5e();return JE=n,JE}var ZE,OU;function h5e(){return OU||(OU=1,ZE=d5e()),ZE}var f5e=h5e(),Bx=ut(f5e),eT={exports:{}},IU={},RU;function p5e(){if(RU)return IU;RU=1;var n=lt(),e=Lt(),r=Zs(),i=_1().f,s=Gn(),o=!s||e(function(){i(1)});return n({target:"Object",stat:!0,forced:o,sham:!s},{getOwnPropertyDescriptor:function(l,c){return i(r(l),c)}}),IU}var AU;function m5e(){if(AU)return eT.exports;AU=1,p5e();var n=hn(),e=n.Object,r=eT.exports=function(s,o){return e.getOwnPropertyDescriptor(s,o)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),eT.exports}var tT,NU;function g5e(){if(NU)return tT;NU=1;var n=m5e();return tT=n,tT}var nT,jU;function v5e(){return jU||(jU=1,nT=g5e()),nT}var b5e=v5e(),A1=ut(b5e),LU={},FU;function y5e(){if(FU)return LU;FU=1;var n=lt(),e=Gn(),r=Zte(),i=Zs(),s=_1(),o=S1();return n({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(l){for(var c=i(l),u=s.f,h=r(c),d={},f=0,p,g;h.length>f;)g=u(c,p=h[f++]),g!==void 0&&o(d,p,g);return d}}),LU}var rT,$U;function x5e(){if($U)return rT;$U=1,y5e();var n=hn();return rT=n.Object.getOwnPropertyDescriptors,rT}var iT,zU;function w5e(){if(zU)return iT;zU=1;var n=x5e();return iT=n,iT}var sT,BU;function _5e(){return BU||(BU=1,sT=w5e()),sT}var S5e=_5e(),Ux=ut(S5e),oT={exports:{}},UU={},qU;function k5e(){if(qU)return UU;qU=1;var n=lt(),e=Gn(),r=DN().f;return n({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),UU}var WU;function C5e(){if(WU)return oT.exports;WU=1,k5e();var n=hn(),e=n.Object,r=oT.exports=function(s,o){return e.defineProperties(s,o)};return e.defineProperties.sham&&(r.sham=!0),oT.exports}var aT,HU;function E5e(){if(HU)return aT;HU=1;var n=C5e();return aT=n,aT}var lT,VU;function T5e(){return VU||(VU=1,lT=E5e()),lT}var P5e=T5e(),Une=ut(P5e),cT={exports:{}},YU={},GU;function M5e(){if(GU)return YU;GU=1;var n=lt(),e=Gn(),r=Ss().f;return n({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),YU}var KU;function D5e(){if(KU)return cT.exports;KU=1,M5e();var n=hn(),e=n.Object,r=cT.exports=function(s,o,a){return e.defineProperty(s,o,a)};return e.defineProperty.sham&&(r.sham=!0),cT.exports}var uT,XU;function qne(){if(XU)return uT;XU=1;var n=D5e();return uT=n,uT}var dT,QU;function O5e(){if(QU)return dT;QU=1;var n=qne();return dT=n,dT}var hT,JU;function I5e(){if(JU)return hT;JU=1;var n=O5e();return hT=n,hT}var fT,ZU;function R5e(){return ZU||(ZU=1,fT=I5e()),fT}var A5e=R5e(),N5e=ut(A5e),eq={},tq;function j5e(){if(tq)return eq;tq=1;var n=Qn(),e=Ss().f,r=n("metadata"),i=Function.prototype;return i[r]===void 0&&e(i,r,{value:null}),eq}var nq={},rq;function L5e(){return rq||(rq=1,Vte()),nq}var iq={},sq;function F5e(){return sq||(sq=1,Yte()),iq}var oq={},aq;function $5e(){if(aq)return oq;aq=1;var n=On();return n("metadata"),oq}var pT,lq;function z5e(){if(lq)return pT;lq=1;var n=Jte();return j5e(),L5e(),F5e(),$5e(),pT=n,pT}var cq={},mT,uq;function Wne(){if(uq)return mT;uq=1;var n=Yi(),e=Bt(),r=n("Symbol"),i=r.keyFor,s=e(r.prototype.valueOf);return mT=r.isRegisteredSymbol||function(a){try{return i(s(a))!==void 0}catch{return!1}},mT}var dq;function B5e(){if(dq)return cq;dq=1;var n=lt(),e=Wne();return n({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),cq}var hq={},gT,fq;function Hne(){if(fq)return gT;fq=1;for(var n=Bf(),e=Yi(),r=Bt(),i=A0(),s=Qn(),o=e("Symbol"),a=o.isWellKnownSymbol,l=e("Object","getOwnPropertyNames"),c=r(o.prototype.valueOf),u=n("wks"),h=0,d=l(o),f=d.length;h<f;h++)try{var p=d[h];i(o[p])&&s(p)}catch{}return gT=function(b){if(a&&a(b))return!0;try{for(var y=c(b),v=0,w=l(u),k=w.length;v<k;v++)if(u[w[v]]==y)return!0}catch{}return!1},gT}var pq;function U5e(){if(pq)return hq;pq=1;var n=lt(),e=Hne();return n({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),hq}var mq={},gq;function q5e(){if(gq)return mq;gq=1;var n=On();return n("customMatcher"),mq}var vq={},bq;function W5e(){if(bq)return vq;bq=1;var n=On();return n("observable"),vq}var yq={},xq;function H5e(){if(xq)return yq;xq=1;var n=lt(),e=Wne();return n({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),yq}var wq={},_q;function V5e(){if(_q)return wq;_q=1;var n=lt(),e=Hne();return n({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),wq}var Sq={},kq;function Y5e(){if(kq)return Sq;kq=1;var n=On();return n("matcher"),Sq}var Cq={},Eq;function G5e(){if(Eq)return Cq;Eq=1;var n=On();return n("metadataKey"),Cq}var Tq={},Pq;function K5e(){if(Pq)return Tq;Pq=1;var n=On();return n("patternMatch"),Tq}var Mq={},Dq;function X5e(){if(Dq)return Mq;Dq=1;var n=On();return n("replaceAll"),Mq}var vT,Oq;function Q5e(){if(Oq)return vT;Oq=1;var n=z5e();return B5e(),U5e(),q5e(),W5e(),H5e(),V5e(),Y5e(),G5e(),K5e(),X5e(),vT=n,vT}var bT,Iq;function J5e(){return Iq||(Iq=1,bT=Q5e()),bT}var Z5e=J5e(),Mb=ut(Z5e),Rq={},yT,Aq;function e4e(){if(Aq)return yT;Aq=1;var n=Bt(),e=qf(),r=ks(),i=La(),s=n("".charAt),o=n("".charCodeAt),a=n("".slice),l=function(c){return function(u,h){var d=r(i(u)),f=e(h),p=d.length,g,b;return f<0||f>=p?c?"":void 0:(g=o(d,f),g<55296||g>56319||f+1===p||(b=o(d,f+1))<56320||b>57343?c?s(d,f):g:c?a(d,f,f+2):(g-55296<<10)+(b-56320)+65536)}};return yT={codeAt:l(!1),charAt:l(!0)},yT}var Nq;function N1(){if(Nq)return Rq;Nq=1;var n=e4e().charAt,e=ks(),r=B0(),i=IN(),s=RN(),o="String Iterator",a=r.set,l=r.getterFor(o);return i(String,"String",function(c){a(this,{type:o,string:e(c),index:0})},function(){var u=l(this),h=u.string,d=u.index,f;return d>=h.length?s(void 0,!0):(f=n(h,d),u.index+=f.length,s(f,!1))}),Rq}var xT,jq;function t4e(){if(jq)return xT;jq=1,sc(),N1(),Gte();var n=M1();return xT=n.f("iterator"),xT}var wT,Lq;function Vne(){if(Lq)return wT;Lq=1;var n=t4e();return oc(),wT=n,wT}var _T,Fq;function n4e(){if(Fq)return _T;Fq=1;var n=Vne();return _T=n,_T}var ST,$q;function r4e(){if($q)return ST;$q=1;var n=n4e();return ST=n,ST}var kT,zq;function i4e(){return zq||(zq=1,kT=r4e()),kT}var s4e=i4e(),o4e=ut(s4e);function Yg(n){"@babel/helpers - typeof";return Yg=typeof Mb=="function"&&typeof o4e=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Mb=="function"&&e.constructor===Mb&&e!==Mb.prototype?"symbol":typeof e},Yg(n)}var CT,Bq;function a4e(){if(Bq)return CT;Bq=1,Kte();var n=M1();return CT=n.f("toPrimitive"),CT}var ET,Uq;function l4e(){if(Uq)return ET;Uq=1;var n=a4e();return ET=n,ET}var TT,qq;function c4e(){if(qq)return TT;qq=1;var n=l4e();return TT=n,TT}var PT,Wq;function u4e(){if(Wq)return PT;Wq=1;var n=c4e();return PT=n,PT}var MT,Hq;function d4e(){return Hq||(Hq=1,MT=u4e()),MT}var h4e=d4e(),f4e=ut(h4e);function p4e(n,e){if(Yg(n)!="object"||!n)return n;var r=n[f4e];if(r!==void 0){var i=r.call(n,e);if(Yg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function m4e(n){var e=p4e(n,"string");return Yg(e)=="symbol"?e:e+""}function rn(n,e,r){return(e=m4e(e))in n?N5e(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}var Vq={},DT,Yq;function g4e(){if(Yq)return DT;Yq=1;var n=jo(),e=Ci(),r=x1(),i=eo(),s=TypeError,o="Reduce of empty array with no initial value",a=function(l){return function(c,u,h,d){var f=e(c),p=r(f),g=i(f);if(n(u),g===0&&h<2)throw new s(o);var b=l?g-1:0,y=l?-1:1;if(h<2)for(;;){if(b in p){d=p[b],b+=y;break}if(b+=y,l?b<0:g<=b)throw new s(o)}for(;l?b>=0:g>b;b+=y)b in p&&(d=u(d,p[b],b,f));return d}};return DT={left:a(!1),right:a(!0)},DT}var OT,Gq;function v4e(){if(Gq)return OT;Gq=1;var n=sne();return OT=n==="NODE",OT}var Kq;function b4e(){if(Kq)return Vq;Kq=1;var n=lt(),e=g4e().left,r=Yf(),i=R0(),s=v4e(),o=!s&&i>79&&i<83,a=o||!r("reduce");return n({target:"Array",proto:!0,forced:a},{reduce:function(c){var u=arguments.length;return e(this,c,u,u>1?arguments[1]:void 0)}}),Vq}var IT,Xq;function y4e(){if(Xq)return IT;Xq=1,b4e();var n=Fn();return IT=n("Array","reduce"),IT}var RT,Qq;function x4e(){if(Qq)return RT;Qq=1;var n=vn(),e=y4e(),r=Array.prototype;return RT=function(i){var s=i.reduce;return i===r||n(r,i)&&s===r.reduce?e:s},RT}var AT,Jq;function w4e(){if(Jq)return AT;Jq=1;var n=x4e();return AT=n,AT}var NT,Zq;function _4e(){return Zq||(Zq=1,NT=w4e()),NT}var S4e=_4e(),j1=ut(S4e),eW={},jT,tW;function k4e(){if(tW)return jT;tW=1;var n=nc(),e=eo(),r=EN(),i=N0(),s=function(o,a,l,c,u,h,d,f){for(var p=u,g=0,b=d?i(d,f):!1,y,v;g<c;)g in l&&(y=b?b(l[g],g,a):l[g],h>0&&n(y)?(v=e(y),p=s(o,a,y,v,p,h-1)-1):(r(p+1),o[p]=y),p++),g++;return p};return jT=s,jT}var nW;function C4e(){if(nW)return eW;nW=1;var n=lt(),e=k4e(),r=jo(),i=Ci(),s=eo(),o=k1();return n({target:"Array",proto:!0},{flatMap:function(l){var c=i(this),u=s(c),h;return r(l),h=o(c,0),h.length=e(h,c,c,u,0,1,l,arguments.length>1?arguments[1]:void 0),h}}),eW}var rW={},iW;function E4e(){if(iW)return rW;iW=1;var n=U0();return n("flatMap"),rW}var LT,sW;function T4e(){if(sW)return LT;sW=1,C4e(),E4e();var n=Fn();return LT=n("Array","flatMap"),LT}var FT,oW;function P4e(){if(oW)return FT;oW=1;var n=vn(),e=T4e(),r=Array.prototype;return FT=function(i){var s=i.flatMap;return i===r||n(r,i)&&s===r.flatMap?e:s},FT}var $T,aW;function M4e(){if(aW)return $T;aW=1;var n=P4e();return $T=n,$T}var zT,lW;function D4e(){return lW||(lW=1,zT=M4e()),zT}var O4e=D4e(),I4e=ut(O4e),BT,cW;function R4e(){return cW||(cW=1,BT=Vne()),BT}var A4e=R4e(),Uc=ut(A4e),uW={},dW={},UT={exports:{}},qT,hW;function N4e(){if(hW)return qT;hW=1;var n=Lt();return qT=n(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),qT}var WT,fW;function j4e(){if(fW)return WT;fW=1;var n=Lt(),e=Lr(),r=No(),i=N4e(),s=Object.isExtensible,o=n(function(){});return WT=o||i?function(l){return!e(l)||i&&r(l)==="ArrayBuffer"?!1:s?s(l):!0}:s,WT}var HT,pW;function L4e(){if(pW)return HT;pW=1;var n=Lt();return HT=!n(function(){return Object.isExtensible(Object.preventExtensions({}))}),HT}var mW;function Yne(){if(mW)return UT.exports;mW=1;var n=lt(),e=Bt(),r=L0(),i=Lr(),s=fr(),o=Ss().f,a=T1(),l=Bte(),c=j4e(),u=w1(),h=L4e(),d=!1,f=u("meta"),p=0,g=function(_){o(_,f,{value:{objectID:"O"+p++,weakData:{}}})},b=function(_,S){if(!i(_))return typeof _=="symbol"?_:(typeof _=="string"?"S":"P")+_;if(!s(_,f)){if(!c(_))return"F";if(!S)return"E";g(_)}return _[f].objectID},y=function(_,S){if(!s(_,f)){if(!c(_))return!0;if(!S)return!1;g(_)}return _[f].weakData},v=function(_){return h&&d&&c(_)&&!s(_,f)&&g(_),_},w=function(){k.enable=function(){},d=!0;var _=a.f,S=e([].splice),C={};C[f]=1,_(C).length&&(a.f=function(E){for(var P=_(E),O=0,M=P.length;O<M;O++)if(P[O]===f){S(P,O,1);break}return P},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},k=UT.exports={enable:w,fastKey:b,getWeakData:y,onFreeze:v};return r[f]=!0,UT.exports}var VT,gW;function F4e(){if(gW)return VT;gW=1;var n=Qn(),e=Hf(),r=n("iterator"),i=Array.prototype;return VT=function(s){return s!==void 0&&(e.Array===s||i[r]===s)},VT}var YT,vW;function Gne(){if(vW)return YT;vW=1;var n=rc(),e=SN(),r=I0(),i=Hf(),s=Qn(),o=s("iterator");return YT=function(a){if(!r(a))return e(a,o)||e(a,"@@iterator")||i[n(a)]},YT}var GT,bW;function Kne(){if(bW)return GT;bW=1;var n=ki(),e=jo(),r=Fa(),i=$f(),s=Gne(),o=TypeError;return GT=function(a,l){var c=arguments.length<2?s(a):l;if(e(c))return r(n(c,a));throw new o(i(a)+" is not iterable")},GT}var KT,yW;function JN(){if(yW)return KT;yW=1;var n=ki(),e=Fa(),r=SN();return KT=function(i,s,o){var a,l;e(i);try{if(a=r(i,"return"),!a){if(s==="throw")throw o;return o}a=n(a,i)}catch(c){l=!0,a=c}if(s==="throw")throw o;if(l)throw a;return e(a),o},KT}var XT,xW;function ZN(){if(xW)return XT;xW=1;var n=N0(),e=ki(),r=Fa(),i=$f(),s=F4e(),o=eo(),a=vn(),l=Kne(),c=Gne(),u=JN(),h=TypeError,d=function(p,g){this.stopped=p,this.result=g},f=d.prototype;return XT=function(p,g,b){var y=b&&b.that,v=!!(b&&b.AS_ENTRIES),w=!!(b&&b.IS_RECORD),k=!!(b&&b.IS_ITERATOR),_=!!(b&&b.INTERRUPTED),S=n(g,y),C,E,P,O,M,R,j,B=function($){return C&&u(C,"normal"),new d(!0,$)},L=function($){return v?(r($),_?S($[0],$[1],B):S($[0],$[1])):_?S($,B):S($)};if(w)C=p.iterator;else if(k)C=p;else{if(E=c(p),!E)throw new h(i(p)+" is not iterable");if(s(E)){for(P=0,O=o(p);O>P;P++)if(M=L(p[P]),M&&a(f,M))return M;return new d(!1)}C=l(p,E)}for(R=w?p.next:C.next;!(j=e(R,C)).done;){try{M=L(j.value)}catch($){u(C,"throw",$)}if(typeof M=="object"&&M&&a(f,M))return M}return new d(!1)},XT}var QT,wW;function Xne(){if(wW)return QT;wW=1;var n=vn(),e=TypeError;return QT=function(r,i){if(n(i,r))return r;throw new e("Incorrect invocation")},QT}var JT,_W;function Qne(){if(_W)return JT;_W=1;var n=lt(),e=Ln(),r=Yne(),i=Lt(),s=Uf(),o=ZN(),a=Xne(),l=hr(),c=Lr(),u=I0(),h=Vu(),d=Ss().f,f=ic().forEach,p=Gn(),g=B0(),b=g.set,y=g.getterFor;return JT=function(v,w,k){var _=v.indexOf("Map")!==-1,S=v.indexOf("Weak")!==-1,C=_?"set":"add",E=e[v],P=E&&E.prototype,O={},M;if(!p||!l(E)||!(S||P.forEach&&!i(function(){new E().entries().next()})))M=k.getConstructor(w,v,_,C),r.enable();else{M=w(function(B,L){b(a(B,R),{type:v,collection:new E}),u(L)||o(L,B[C],{that:B,AS_ENTRIES:_})});var R=M.prototype,j=y(v);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(B){var L=B==="add"||B==="set";B in P&&!(S&&B==="clear")&&s(R,B,function($,z){var W=j(this).collection;if(!L&&S&&!c($))return B==="get"?void 0:!1;var q=W[B]($===0?0:$,z);return L?this:q})}),S||d(R,"size",{configurable:!0,get:function(){return j(this).collection.size}})}return h(M,v,!1,!0),O[v]=M,n({global:!0,forced:!0},O),S||k.setStrong(M,v,_),M},JT}var ZT,SW;function $4e(){if(SW)return ZT;SW=1;var n=z0();return ZT=function(e,r,i){for(var s in r)i&&i.unsafe&&e[s]?e[s]=r[s]:n(e,s,r[s],i);return e},ZT}var eP,kW;function z4e(){if(kW)return eP;kW=1;var n=Yi(),e=ON(),r=Qn(),i=Gn(),s=r("species");return eP=function(o){var a=n(o);i&&a&&!a[s]&&e(a,s,{configurable:!0,get:function(){return this}})},eP}var tP,CW;function Jne(){if(CW)return tP;CW=1;var n=$0(),e=ON(),r=$4e(),i=N0(),s=Xne(),o=I0(),a=ZN(),l=IN(),c=RN(),u=z4e(),h=Gn(),d=Yne().fastKey,f=B0(),p=f.set,g=f.getterFor;return tP={getConstructor:function(b,y,v,w){var k=b(function(P,O){s(P,_),p(P,{type:y,index:n(null),first:null,last:null,size:0}),h||(P.size=0),o(O)||a(O,P[w],{that:P,AS_ENTRIES:v})}),_=k.prototype,S=g(y),C=function(P,O,M){var R=S(P),j=E(P,O),B,L;return j?j.value=M:(R.last=j={index:L=d(O,!0),key:O,value:M,previous:B=R.last,next:null,removed:!1},R.first||(R.first=j),B&&(B.next=j),h?R.size++:P.size++,L!=="F"&&(R.index[L]=j)),P},E=function(P,O){var M=S(P),R=d(O),j;if(R!=="F")return M.index[R];for(j=M.first;j;j=j.next)if(j.key===O)return j};return r(_,{clear:function(){for(var O=this,M=S(O),R=M.first;R;)R.removed=!0,R.previous&&(R.previous=R.previous.next=null),R=R.next;M.first=M.last=null,M.index=n(null),h?M.size=0:O.size=0},delete:function(P){var O=this,M=S(O),R=E(O,P);if(R){var j=R.next,B=R.previous;delete M.index[R.index],R.removed=!0,B&&(B.next=j),j&&(j.previous=B),M.first===R&&(M.first=j),M.last===R&&(M.last=B),h?M.size--:O.size--}return!!R},forEach:function(O){for(var M=S(this),R=i(O,arguments.length>1?arguments[1]:void 0),j;j=j?j.next:M.first;)for(R(j.value,j.key,this);j&&j.removed;)j=j.previous},has:function(O){return!!E(this,O)}}),r(_,v?{get:function(O){var M=E(this,O);return M&&M.value},set:function(O,M){return C(this,O===0?0:O,M)}}:{add:function(O){return C(this,O=O===0?0:O,O)}}),h&&e(_,"size",{configurable:!0,get:function(){return S(this).size}}),k},setStrong:function(b,y,v){var w=y+" Iterator",k=g(y),_=g(w);l(b,y,function(S,C){p(this,{type:w,target:S,state:k(S),kind:C,last:null})},function(){for(var S=_(this),C=S.kind,E=S.last;E&&E.removed;)E=E.previous;return!S.target||!(S.last=E=E?E.next:S.state.first)?(S.target=null,c(void 0,!0)):c(C==="keys"?E.key:C==="values"?E.value:[E.key,E.value],!1)},v?"entries":"values",!v,!0),u(y)}},tP}var EW;function B4e(){if(EW)return dW;EW=1;var n=Qne(),e=Jne();return n("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),dW}var TW;function U4e(){return TW||(TW=1,B4e()),uW}var PW={},nP,MW;function Zne(){return MW||(MW=1,nP=function(n,e){return e===1?function(r,i){return r[n](i)}:function(r,i,s){return r[n](i,s)}}),nP}var rP,DW;function q4e(){if(DW)return rP;DW=1;var n=Yi(),e=Zne(),r=n("Map");return rP={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},rP}var OW;function W4e(){if(OW)return PW;OW=1;var n=lt(),e=Bt(),r=jo(),i=La(),s=ZN(),o=q4e(),a=zf(),l=Lt(),c=o.Map,u=o.has,h=o.get,d=o.set,f=e([].push),p=a||l(function(){return c.groupBy("ab",function(g){return g}).get("a").length!==1});return n({target:"Map",stat:!0,forced:a||p},{groupBy:function(b,y){i(b),r(y);var v=new c,w=0;return s(b,function(k){var _=y(k,w++);u(v,_)?f(h(v,_),k):d(v,_,[k])}),v}}),PW}var iP,IW;function H4e(){if(IW)return iP;IW=1,sc(),U4e(),W4e(),N1();var n=hn();return iP=n.Map,iP}var sP,RW;function V4e(){if(RW)return sP;RW=1;var n=H4e();return oc(),sP=n,sP}var oP,AW;function Y4e(){return AW||(AW=1,oP=V4e()),oP}var G4e=Y4e(),ere=ut(G4e),NW={},jW={},LW;function K4e(){if(LW)return jW;LW=1;var n=Qne(),e=Jne();return n("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),jW}var FW;function X4e(){return FW||(FW=1,K4e()),NW}var $W={},aP,zW;function Gu(){if(zW)return aP;zW=1;var n=$f(),e=TypeError;return aP=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(n(r)+" is not a set")},aP}var lP,BW;function Ku(){if(BW)return lP;BW=1;var n=Yi(),e=Zne(),r=n("Set"),i=r.prototype;return lP={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:i},lP}var cP,UW;function Xu(){if(UW)return cP;UW=1;var n=ki();return cP=function(e,r,i){for(var s=i?e:e.iterator,o=e.next,a,l;!(a=n(o,s)).done;)if(l=r(a.value),l!==void 0)return l},cP}var uP,qW;function K0(){if(qW)return uP;qW=1;var n=Xu();return uP=function(e,r,i){return i?n(e.keys(),r,!0):e.forEach(r)},uP}var dP,WW;function e3(){if(WW)return dP;WW=1;var n=Ku(),e=K0(),r=n.Set,i=n.add;return dP=function(s){var o=new r;return e(s,function(a){i(o,a)}),o},dP}var hP,HW;function X0(){return HW||(HW=1,hP=function(n){return n.size}),hP}var fP,VW;function Q4e(){return VW||(VW=1,fP=function(n){return{iterator:n,next:n.next,done:!1}}),fP}var pP,YW;function Qu(){if(YW)return pP;YW=1;var n=jo(),e=Fa(),r=ki(),i=qf(),s=Q4e(),o="Invalid size",a=RangeError,l=TypeError,c=Math.max,u=function(h,d){this.set=h,this.size=c(d,0),this.has=n(h.has),this.keys=n(h.keys)};return u.prototype={getIterator:function(){return s(e(r(this.keys,this.set)))},includes:function(h){return r(this.has,this.set,h)}},pP=function(h){e(h);var d=+h.size;if(d!==d)throw new l(o);var f=i(d);if(f<0)throw new a(o);return new u(h,f)},pP}var mP,GW;function J4e(){if(GW)return mP;GW=1;var n=Gu(),e=Ku(),r=e3(),i=X0(),s=Qu(),o=K0(),a=Xu(),l=e.has,c=e.remove;return mP=function(h){var d=n(this),f=s(h),p=r(d);return i(d)<=f.size?o(d,function(g){f.includes(g)&&c(p,g)}):a(f.getIterator(),function(g){l(p,g)&&c(p,g)}),p},mP}var gP,KW;function Ju(){return KW||(KW=1,gP=function(){return!1}),gP}var XW;function Z4e(){if(XW)return $W;XW=1;var n=lt(),e=J4e(),r=Lt(),i=Ju(),s=!i("difference",function(a){return a.size===0}),o=s||r(function(){var a={size:1,has:function(){return!0},keys:function(){var c=0;return{next:function(){var u=c++>1;return l.has(1)&&l.clear(),{done:u,value:2}}}}},l=new Set([1,2,3,4]);return l.difference(a).size!==3});return n({target:"Set",proto:!0,real:!0,forced:o},{difference:e}),$W}var QW={},vP,JW;function eje(){if(JW)return vP;JW=1;var n=Gu(),e=Ku(),r=X0(),i=Qu(),s=K0(),o=Xu(),a=e.Set,l=e.add,c=e.has;return vP=function(h){var d=n(this),f=i(h),p=new a;return r(d)>f.size?o(f.getIterator(),function(g){c(d,g)&&l(p,g)}):s(d,function(g){f.includes(g)&&l(p,g)}),p},vP}var ZW;function tje(){if(ZW)return QW;ZW=1;var n=lt(),e=Lt(),r=eje(),i=Ju(),s=!i("intersection",function(o){return o.size===2&&o.has(1)&&o.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return n({target:"Set",proto:!0,real:!0,forced:s},{intersection:r}),QW}var eH={},bP,tH;function nje(){if(tH)return bP;tH=1;var n=Gu(),e=Ku().has,r=X0(),i=Qu(),s=K0(),o=Xu(),a=JN();return bP=function(c){var u=n(this),h=i(c);if(r(u)<=h.size)return s(u,function(f){if(h.includes(f))return!1},!0)!==!1;var d=h.getIterator();return o(d,function(f){if(e(u,f))return a(d,"normal",!1)})!==!1},bP}var nH;function rje(){if(nH)return eH;nH=1;var n=lt(),e=nje(),r=Ju(),i=!r("isDisjointFrom",function(s){return!s});return n({target:"Set",proto:!0,real:!0,forced:i},{isDisjointFrom:e}),eH}var rH={},yP,iH;function ije(){if(iH)return yP;iH=1;var n=Gu(),e=X0(),r=K0(),i=Qu();return yP=function(o){var a=n(this),l=i(o);return e(a)>l.size?!1:r(a,function(c){if(!l.includes(c))return!1},!0)!==!1},yP}var sH;function sje(){if(sH)return rH;sH=1;var n=lt(),e=ije(),r=Ju(),i=!r("isSubsetOf",function(s){return s});return n({target:"Set",proto:!0,real:!0,forced:i},{isSubsetOf:e}),rH}var oH={},xP,aH;function oje(){if(aH)return xP;aH=1;var n=Gu(),e=Ku().has,r=X0(),i=Qu(),s=Xu(),o=JN();return xP=function(l){var c=n(this),u=i(l);if(r(c)<u.size)return!1;var h=u.getIterator();return s(h,function(d){if(!e(c,d))return o(h,"normal",!1)})!==!1},xP}var lH;function aje(){if(lH)return oH;lH=1;var n=lt(),e=oje(),r=Ju(),i=!r("isSupersetOf",function(s){return!s});return n({target:"Set",proto:!0,real:!0,forced:i},{isSupersetOf:e}),oH}var cH={},wP,uH;function lje(){if(uH)return wP;uH=1;var n=Gu(),e=Ku(),r=e3(),i=Qu(),s=Xu(),o=e.add,a=e.has,l=e.remove;return wP=function(u){var h=n(this),d=i(u).getIterator(),f=r(h);return s(d,function(p){a(h,p)?l(f,p):o(f,p)}),f},wP}var _P,dH;function tre(){return dH||(dH=1,_P=function(n){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},i=e[n](r);return i.size===1&&i.values().next().value===4}catch{return!1}}),_P}var hH;function cje(){if(hH)return cH;hH=1;var n=lt(),e=lje(),r=tre(),i=Ju(),s=!i("symmetricDifference")||!r("symmetricDifference");return n({target:"Set",proto:!0,real:!0,forced:s},{symmetricDifference:e}),cH}var fH={},SP,pH;function uje(){if(pH)return SP;pH=1;var n=Gu(),e=Ku().add,r=e3(),i=Qu(),s=Xu();return SP=function(a){var l=n(this),c=i(a).getIterator(),u=r(l);return s(c,function(h){e(u,h)}),u},SP}var mH;function dje(){if(mH)return fH;mH=1;var n=lt(),e=uje(),r=tre(),i=Ju(),s=!i("union")||!r("union");return n({target:"Set",proto:!0,real:!0,forced:s},{union:e}),fH}var kP,gH;function hje(){if(gH)return kP;gH=1,sc(),X4e(),Z4e(),tje(),rje(),sje(),aje(),cje(),dje(),N1();var n=hn();return kP=n.Set,kP}var CP,vH;function fje(){if(vH)return CP;vH=1;var n=hje();return oc(),CP=n,CP}var EP,bH;function pje(){return bH||(bH=1,EP=fje()),EP}var mje=pje(),Ul=ut(mje),TP,yH;function gje(){if(yH)return TP;yH=1,sc(),N1();var n=Kne();return TP=n,TP}var PP,xH;function vje(){if(xH)return PP;xH=1;var n=gje();return oc(),PP=n,PP}var MP,wH;function bje(){if(wH)return MP;wH=1;var n=vje();return MP=n,MP}var DP,_H;function yje(){if(_H)return DP;_H=1;var n=bje();return DP=n,DP}var OP,SH;function xje(){return SH||(SH=1,OP=yje()),OP}var IP,kH;function wje(){return kH||(kH=1,IP=xje()),IP}var _je=wje(),RP=ut(_je),CH={},AP,EH;function Sje(){if(EH)return AP;EH=1;var n=Wf(),e=Math.floor,r=function(i,s){var o=i.length;if(o<8)for(var a=1,l,c;a<o;){for(c=a,l=i[a];c&&s(i[c-1],l)>0;)i[c]=i[--c];c!==a++&&(i[c]=l)}else for(var u=e(o/2),h=r(n(i,0,u),s),d=r(n(i,u),s),f=h.length,p=d.length,g=0,b=0;g<f||b<p;)i[g+b]=g<f&&b<p?s(h[g],d[b])<=0?h[g++]:d[b++]:g<f?h[g++]:d[b++];return i};return AP=r,AP}var NP,TH;function kje(){if(TH)return NP;TH=1;var n=Lf(),e=n.match(/firefox\/(\d+)/i);return NP=!!e&&+e[1],NP}var jP,PH;function Cje(){if(PH)return jP;PH=1;var n=Lf();return jP=/MSIE|Trident/.test(n),jP}var LP,MH;function Eje(){if(MH)return LP;MH=1;var n=Lf(),e=n.match(/AppleWebKit\/(\d+)\./);return LP=!!e&&+e[1],LP}var DH;function Tje(){if(DH)return CH;DH=1;var n=lt(),e=Bt(),r=jo(),i=Ci(),s=eo(),o=tne(),a=ks(),l=Lt(),c=Sje(),u=Yf(),h=kje(),d=Cje(),f=R0(),p=Eje(),g=[],b=e(g.sort),y=e(g.push),v=l(function(){g.sort(void 0)}),w=l(function(){g.sort(null)}),k=u("sort"),_=!l(function(){if(f)return f<70;if(!(h&&h>3)){if(d)return!0;if(p)return p<603;var E="",P,O,M,R;for(P=65;P<76;P++){switch(O=String.fromCharCode(P),P){case 66:case 69:case 70:case 72:M=3;break;case 68:case 71:M=4;break;default:M=2}for(R=0;R<47;R++)g.push({k:O+R,v:M})}for(g.sort(function(j,B){return B.v-j.v}),R=0;R<g.length;R++)O=g[R].k.charAt(0),E.charAt(E.length-1)!==O&&(E+=O);return E!=="DGBEFHACIJK"}}),S=v||!w||!k||!_,C=function(E){return function(P,O){return O===void 0?-1:P===void 0?1:E!==void 0?+E(P,O)||0:a(P)>a(O)?1:-1}};return n({target:"Array",proto:!0,forced:S},{sort:function(P){P!==void 0&&r(P);var O=i(this);if(_)return P===void 0?b(O):b(O,P);var M=[],R=s(O),j,B;for(B=0;B<R;B++)B in O&&y(M,O[B]);for(c(M,C(P)),j=s(M),B=0;B<j;)O[B]=M[B++];for(;B<R;)o(O,B++);return O}}),CH}var FP,OH;function Pje(){if(OH)return FP;OH=1,Tje();var n=Fn();return FP=n("Array","sort"),FP}var $P,IH;function Mje(){if(IH)return $P;IH=1;var n=vn(),e=Pje(),r=Array.prototype;return $P=function(i){var s=i.sort;return i===r||n(r,i)&&s===r.sort?e:s},$P}var zP,RH;function Dje(){if(RH)return zP;RH=1;var n=Mje();return zP=n,zP}var BP,AH;function Oje(){return AH||(AH=1,BP=Dje()),BP}var Ije=Oje(),Hn=ut(Ije),NH={},jH;function Rje(){if(jH)return NH;jH=1;var n=lt(),e=ic().some,r=Yf(),i=r("some");return n({target:"Array",proto:!0,forced:!i},{some:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),NH}var UP,LH;function Aje(){if(LH)return UP;LH=1,Rje();var n=Fn();return UP=n("Array","some"),UP}var qP,FH;function Nje(){if(FH)return qP;FH=1;var n=vn(),e=Aje(),r=Array.prototype;return qP=function(i){var s=i.some;return i===r||n(r,i)&&s===r.some?e:s},qP}var WP,$H;function jje(){if($H)return WP;$H=1;var n=Nje();return WP=n,WP}var HP,zH;function Lje(){return zH||(zH=1,HP=jje()),HP}var Fje=Lje(),t3=ut(Fje),VP,BH;function $je(){if(BH)return VP;BH=1,sc();var n=Fn();return VP=n("Array","keys"),VP}var YP,UH;function zje(){if(UH)return YP;UH=1;var n=$je();return YP=n,YP}var GP,qH;function Bje(){if(qH)return GP;qH=1,oc();var n=rc(),e=fr(),r=vn(),i=zje(),s=Array.prototype,o={DOMTokenList:!0,NodeList:!0};return GP=function(a){var l=a.keys;return a===s||r(s,a)&&l===s.keys||e(o,n(a))?i:l},GP}var KP,WH;function Uje(){return WH||(WH=1,KP=Bje()),KP}var qje=Uje(),Ec=ut(qje),XP,HH;function Wje(){if(HH)return XP;HH=1,sc();var n=Fn();return XP=n("Array","values"),XP}var QP,VH;function Hje(){if(VH)return QP;VH=1;var n=Wje();return QP=n,QP}var JP,YH;function Vje(){if(YH)return JP;YH=1,oc();var n=rc(),e=fr(),r=vn(),i=Hje(),s=Array.prototype,o={DOMTokenList:!0,NodeList:!0};return JP=function(a){var l=a.values;return a===s||r(s,a)&&l===s.values||e(o,n(a))?i:l},JP}var ZP,GH;function Yje(){return GH||(GH=1,ZP=Vje()),ZP}var Gje=Yje(),KH=ut(Gje),eM,XH;function Kje(){if(XH)return eM;XH=1,sc();var n=Fn();return eM=n("Array","entries"),eM}var tM,QH;function Xje(){if(QH)return tM;QH=1;var n=Kje();return tM=n,tM}var nM,JH;function Qje(){if(JH)return nM;JH=1,oc();var n=rc(),e=fr(),r=vn(),i=Xje(),s=Array.prototype,o={DOMTokenList:!0,NodeList:!0};return nM=function(a){var l=a.entries;return a===s||r(s,a)&&l===s.entries||e(o,n(a))?i:l},nM}var rM,ZH;function Jje(){return ZH||(ZH=1,rM=Qje()),rM}var Zje=Jje(),eLe=ut(Zje),iM,eV;function tLe(){return eV||(eV=1,iM=qne()),iM}var nLe=tLe(),L1=ut(nLe);const mr=[];for(let n=0;n<256;++n)mr.push((n+256).toString(16).slice(1));function rLe(n,e=0){return(mr[n[e+0]]+mr[n[e+1]]+mr[n[e+2]]+mr[n[e+3]]+"-"+mr[n[e+4]]+mr[n[e+5]]+"-"+mr[n[e+6]]+mr[n[e+7]]+"-"+mr[n[e+8]]+mr[n[e+9]]+"-"+mr[n[e+10]]+mr[n[e+11]]+mr[n[e+12]]+mr[n[e+13]]+mr[n[e+14]]+mr[n[e+15]]).toLowerCase()}let sM;const iLe=new Uint8Array(16);function sLe(){if(!sM){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");sM=crypto.getRandomValues.bind(crypto)}return sM(iLe)}const oLe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var tV={randomUUID:oLe};function aLe(n,e,r){var s;n=n||{};const i=n.random??((s=n.rng)==null?void 0:s.call(n))??sLe();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,rLe(i)}function uu(n,e,r){return tV.randomUUID&&!n?tV.randomUUID():aLe(n)}function nV(n,e){var r=nr(n);if(Bx){var i=Bx(n);e&&(i=ht(i).call(i,function(s){return A1(n,s).enumerable})),r.push.apply(r,i)}return r}function rV(n){for(var e=1;e<arguments.length;e++){var r,i,s=arguments[e]!=null?arguments[e]:{};e%2?Qe(r=nV(Object(s),!0)).call(r,function(o){rn(n,o,s[o])}):Ux?Une(n,Ux(s)):Qe(i=nV(Object(s))).call(i,function(o){L1(n,o,A1(s,o))})}return n}function lLe(n){return new uLe(n)}class cLe{constructor(e,r,i){var s,o,a;rn(this,"_source",void 0),rn(this,"_transformers",void 0),rn(this,"_target",void 0),rn(this,"_listeners",{add:Ee(s=this._add).call(s,this),remove:Ee(o=this._remove).call(o,this),update:Ee(a=this._update).call(a,this)}),this._source=e,this._transformers=r,this._target=i}all(){return this._target.update(this._transformItems(this._source.get())),this}start(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}stop(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}_transformItems(e){var r;return j1(r=this._transformers).call(r,(i,s)=>s(i),e)}_add(e,r){r!=null&&this._target.add(this._transformItems(this._source.get(r.items)))}_update(e,r){r!=null&&this._target.update(this._transformItems(this._source.get(r.items)))}_remove(e,r){r!=null&&this._target.remove(this._transformItems(r.oldData))}}class uLe{constructor(e){rn(this,"_source",void 0),rn(this,"_transformers",[]),this._source=e}filter(e){return this._transformers.push(r=>ht(r).call(r,e)),this}map(e){return this._transformers.push(r=>Kt(r).call(r,e)),this}flatMap(e){return this._transformers.push(r=>I4e(r).call(r,e)),this}to(e){return new cLe(this._source,this._transformers,e)}}function uI(n){return typeof n=="string"||typeof n=="number"}class n3{constructor(e){rn(this,"delay",void 0),rn(this,"max",void 0),rn(this,"_queue",[]),rn(this,"_timeout",null),rn(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const i=new n3(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{i.flush()};const s=[{name:"flush",original:void 0}];if(r&&r.replace)for(let o=0;o<r.replace.length;o++){const a=r.replace[o];s.push({name:a,original:e[a]}),i.replace(e,a)}return i._extended={object:e,methods:s},i}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let i=0;i<r.length;i++){const s=r[i];s.original?e[s.name]=s.original:delete e[s.name]}this._extended=null}}replace(e,r){const i=this,s=e[r];if(!s)throw new Error("Method "+r+" undefined");e[r]=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];i.queue({args:a,fn:s,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=Rr(()=>{this.flush()},this.delay))}flush(){var e,r;Qe(e=Vr(r=this._queue).call(r,0)).call(e,i=>{i.fn.apply(i.context||i.fn,i.args||[])})}}class Gg{constructor(){rn(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),rn(this,"subscribe",Gg.prototype.on),rn(this,"unsubscribe",Gg.prototype.off)}_trigger(e,r,i){var s;if(e==="*")throw new Error("Cannot trigger event *");Qe(s=[...this._subscribers[e],...this._subscribers["*"]]).call(s,o=>{o(e,r,i??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var i;this._subscribers[e]=ht(i=this._subscribers[e]).call(i,s=>s!==r)}}class qc{constructor(e){rn(this,"_pairs",void 0),this._pairs=e}*[Uc](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return Kt(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return Kt(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=q0(null);for(const[r,i]of this._pairs)e[r]=i;return e}toMap(){return new ere(this._pairs)}toIdSet(){return new Ul(this.toIdArray())}toItemSet(){return new Ul(this.toItemArray())}cache(){return new qc([...this._pairs])}distinct(e){const r=new Ul;for(const[i,s]of this._pairs)r.add(e(s,i));return r}filter(e){const r=this._pairs;return new qc({*[Uc](){for(const[i,s]of r)e(s,i)&&(yield[i,s])}})}forEach(e){for(const[r,i]of this._pairs)e(i,r)}map(e){const r=this._pairs;return new qc({*[Uc](){for(const[i,s]of r)yield[i,e(s,i)]}})}max(e){const r=RP(this._pairs);let i=r.next();if(i.done)return null;let s=i.value[1],o=e(i.value[1],i.value[0]);for(;!(i=r.next()).done;){const[a,l]=i.value,c=e(l,a);c>o&&(o=c,s=l)}return s}min(e){const r=RP(this._pairs);let i=r.next();if(i.done)return null;let s=i.value[1],o=e(i.value[1],i.value[0]);for(;!(i=r.next()).done;){const[a,l]=i.value,c=e(l,a);c<o&&(o=c,s=l)}return s}reduce(e,r){for(const[i,s]of this._pairs)r=e(r,s,i);return r}sort(e){return new qc({[Uc]:()=>{var r;return RP(Hn(r=[...this._pairs]).call(r,(i,s)=>{let[o,a]=i,[l,c]=s;return e(a,c,o,l)}))}})}}function dLe(n,e){return n[e]==null&&(n[e]=uu()),n}class vf extends Gg{get idProp(){return this._idProp}constructor(e,r){super(),rn(this,"flush",void 0),rn(this,"length",void 0),rn(this,"_options",void 0),rn(this,"_data",void 0),rn(this,"_idProp",void 0),rn(this,"_queue",null),e&&!Et(e)&&(r=e,e=[]),this._options=r||{},this._data=new ere,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=n3.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const i=[];let s;if(Et(e)){const o=Kt(e).call(e,a=>a[this._idProp]);if(t3(o).call(o,a=>this._data.has(a)))throw new Error("A duplicate id was found in the parameter array.");for(let a=0,l=e.length;a<l;a++)s=this._addItem(e[a]),i.push(s)}else if(e&&typeof e=="object")s=this._addItem(e),i.push(s);else throw new Error("Unknown dataType");return i.length&&this._trigger("add",{items:i},r),i}update(e,r){const i=[],s=[],o=[],a=[],l=this._idProp,c=u=>{const h=u[l];if(h!=null&&this._data.has(h)){const d=u,f=Aa({},this._data.get(h)),p=this._updateItem(d);s.push(p),a.push(d),o.push(f)}else{const d=this._addItem(u);i.push(d)}};if(Et(e))for(let u=0,h=e.length;u<h;u++)e[u]&&typeof e[u]=="object"?c(e[u]):console.warn("Ignoring input item, which is not an object at index "+u);else if(e&&typeof e=="object")c(e);else throw new Error("Unknown dataType");if(i.length&&this._trigger("add",{items:i},r),s.length){const u={items:s,oldData:o,data:a};this._trigger("update",u,r)}return Bn(i).call(i,s)}updateOnly(e,r){var i;Et(e)||(e=[e]);const s=Kt(i=Kt(e).call(e,o=>{const a=this._data.get(o[this._idProp]);if(a==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:a,update:o}})).call(i,o=>{let{oldData:a,update:l}=o;const c=a[this._idProp],u=Ine(a,l);return this._data.set(c,u),{id:c,oldData:a,updatedData:u}});if(s.length){const o={items:Kt(s).call(s,a=>a.id),oldData:Kt(s).call(s,a=>a.oldData),data:Kt(s).call(s,a=>a.updatedData)};return this._trigger("update",o,r),o.items}else return[]}get(e,r){let i,s,o;uI(e)?(i=e,o=r):Et(e)?(s=e,o=r):o=e;const a=o&&o.returnType==="Object"?"Object":"Array",l=o&&ht(o),c=[];let u,h,d;if(i!=null)u=this._data.get(i),u&&l&&!l(u)&&(u=void 0);else if(s!=null)for(let p=0,g=s.length;p<g;p++)u=this._data.get(s[p]),u!=null&&(!l||l(u))&&c.push(u);else{var f;h=[...Ec(f=this._data).call(f)];for(let p=0,g=h.length;p<g;p++)d=h[p],u=this._data.get(d),u!=null&&(!l||l(u))&&c.push(u)}if(o&&o.order&&i==null&&this._sort(c,o.order),o&&o.fields){const p=o.fields;if(i!=null&&u!=null)u=this._filterFields(u,p);else for(let g=0,b=c.length;g<b;g++)c[g]=this._filterFields(c[g],p)}if(a=="Object"){const p={};for(let g=0,b=c.length;g<b;g++){const y=c[g],v=y[this._idProp];p[v]=y}return p}else return i!=null?u??null:c}getIds(e){const r=this._data,i=e&&ht(e),s=e&&e.order,o=[...Ec(r).call(r)],a=[];if(i)if(s){const l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c],d=this._data.get(h);d!=null&&i(d)&&l.push(d)}this._sort(l,s);for(let c=0,u=l.length;c<u;c++)a.push(l[c][this._idProp])}else for(let l=0,c=o.length;l<c;l++){const u=o[l],h=this._data.get(u);h!=null&&i(h)&&a.push(h[this._idProp])}else if(s){const l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];l.push(r.get(h))}this._sort(l,s);for(let c=0,u=l.length;c<u;c++)a.push(l[c][this._idProp])}else for(let l=0,c=o.length;l<c;l++){const u=o[l],h=r.get(u);h!=null&&a.push(h[this._idProp])}return a}getDataSet(){return this}forEach(e,r){const i=r&&ht(r),s=this._data,o=[...Ec(s).call(s)];if(r&&r.order){const a=this.get(r);for(let l=0,c=a.length;l<c;l++){const u=a[l],h=u[this._idProp];e(u,h)}}else for(let a=0,l=o.length;a<l;a++){const c=o[a],u=this._data.get(c);u!=null&&(!i||i(u))&&e(u,c)}}map(e,r){const i=r&&ht(r),s=[],o=this._data,a=[...Ec(o).call(o)];for(let l=0,c=a.length;l<c;l++){const u=a[l],h=this._data.get(u);h!=null&&(!i||i(h))&&s.push(e(h,u))}return r&&r.order&&this._sort(s,r.order),s}_filterFields(e,r){var i;return e&&j1(i=Et(r)?r:nr(r)).call(i,(s,o)=>(s[o]=e[o],s),{})}_sort(e,r){if(typeof r=="string"){const i=r;Hn(e).call(e,(s,o)=>{const a=s[i],l=o[i];return a>l?1:a<l?-1:0})}else if(typeof r=="function")Hn(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const i=[],s=[],o=Et(e)?e:[e];for(let a=0,l=o.length;a<l;a++){const c=this._remove(o[a]);if(c){const u=c[this._idProp];u!=null&&(i.push(u),s.push(c))}}return i.length&&this._trigger("remove",{items:i,oldData:s},r),i}_remove(e){let r;if(uI(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const i=this._data.get(r)||null;return this._data.delete(r),--this.length,i}return null}clear(e){var r;const i=[...Ec(r=this._data).call(r)],s=[];for(let o=0,a=i.length;o<a;o++)s.push(this._data.get(i[o]));return this._data.clear(),this.length=0,this._trigger("remove",{items:i,oldData:s},e),i}max(e){let r=null,i=null;for(const o of KH(s=this._data).call(s)){var s;const a=o[e];typeof a=="number"&&(i==null||a>i)&&(r=o,i=a)}return r||null}min(e){let r=null,i=null;for(const o of KH(s=this._data).call(s)){var s;const a=o[e];typeof a=="number"&&(i==null||a<i)&&(r=o,i=a)}return r||null}distinct(e){const r=this._data,i=[...Ec(r).call(r)],s=[];let o=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],h=r.get(c)[e];let d=!1;for(let f=0;f<o;f++)if(s[f]==h){d=!0;break}!d&&h!==void 0&&(s[o]=h,o++)}return s}_addItem(e){const r=dLe(e,this._idProp),i=r[this._idProp];if(this._data.has(i))throw new Error("Cannot add item: item with id "+i+" already exists");return this._data.set(i,r),++this.length,i}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+ui(e)+")");const i=this._data.get(r);if(!i)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,rV(rV({},i),e)),r}stream(e){if(e){const i=this._data;return new qc({*[Uc](){for(const s of e){const o=i.get(s);o!=null&&(yield[s,o])}}})}else{var r;return new qc({[Uc]:Ee(r=eLe(this._data)).call(r,this._data)})}}}let hLe=class nre extends Gg{get idProp(){return this.getDataSet().idProp}constructor(e,r){var i;super(),rn(this,"length",0),rn(this,"_listener",void 0),rn(this,"_data",void 0),rn(this,"_ids",new Ul),rn(this,"_options",void 0),this._options=r||{},this._listener=Ee(i=this._onEvent).call(i,this),this.setData(e)}setData(e){if(this._data){this._data.off&&this._data.off("*",this._listener);const r=this._data.getIds({filter:ht(this._options)}),i=this._data.get(r);this._ids.clear(),this.length=0,this._trigger("remove",{items:r,oldData:i})}if(e!=null){this._data=e;const r=this._data.getIds({filter:ht(this._options)});for(let i=0,s=r.length;i<s;i++){const o=r[i];this._ids.add(o)}this.length=r.length,this._trigger("add",{items:r})}else this._data=new vf;this._data.on&&this._data.on("*",this._listener)}refresh(){const e=this._data.getIds({filter:ht(this._options)}),r=[...this._ids],i={},s=[],o=[],a=[];for(let l=0,c=e.length;l<c;l++){const u=e[l];i[u]=!0,this._ids.has(u)||(s.push(u),this._ids.add(u))}for(let l=0,c=r.length;l<c;l++){const u=r[l],h=this._data.get(u);h==null?console.error("If you see this, report it please."):i[u]||(o.push(u),a.push(h),this._ids.delete(u))}this.length+=s.length-o.length,s.length&&this._trigger("add",{items:s}),o.length&&this._trigger("remove",{items:o,oldData:a})}get(e,r){if(this._data==null)return null;let i=null,s;uI(e)||Et(e)?(i=e,s=r):s=e;const o=Aa({},this._options,s),a=ht(this._options),l=s&&ht(s);return a&&l&&(o.filter=c=>a(c)&&l(c)),i==null?this._data.get(o):this._data.get(i,o)}getIds(e){if(this._data.length){const r=ht(this._options),i=e!=null?ht(e):null;let s;return i?r?s=o=>r(o)&&i(o):s=i:s=r,this._data.getIds({filter:s,order:e&&e.order})}else return[]}forEach(e,r){if(this._data){var i;const s=ht(this._options),o=r&&ht(r);let a;o?s?a=function(l){return s(l)&&o(l)}:a=o:a=s,Qe(i=this._data).call(i,e,{filter:a,order:r&&r.order})}}map(e,r){if(this._data){var i;const s=ht(this._options),o=r&&ht(r);let a;return o?s?a=l=>s(l)&&o(l):a=o:a=s,Kt(i=this._data).call(i,e,{filter:a,order:r&&r.order})}else return[]}getDataSet(){return this._data.getDataSet()}stream(e){var r;return this._data.stream(e||{[Uc]:Ee(r=Ec(this._ids)).call(r,this._ids)})}dispose(){var e;(e=this._data)!==null&&e!==void 0&&e.off&&this._data.off("*",this._listener);const r="This data view has already been disposed of.",i={get:()=>{throw new Error(r)},set:()=>{throw new Error(r)},configurable:!1};for(const s of ene(nre.prototype))L1(this,s,i)}_onEvent(e,r,i){if(!r||!r.items||!this._data)return;const s=r.items,o=[],a=[],l=[],c=[],u=[],h=[];switch(e){case"add":for(let d=0,f=s.length;d<f;d++){const p=s[d];this.get(p)&&(this._ids.add(p),o.push(p))}break;case"update":for(let d=0,f=s.length;d<f;d++){const p=s[d];this.get(p)?this._ids.has(p)?(a.push(p),u.push(r.data[d]),c.push(r.oldData[d])):(this._ids.add(p),o.push(p)):this._ids.has(p)&&(this._ids.delete(p),l.push(p),h.push(r.oldData[d]))}break;case"remove":for(let d=0,f=s.length;d<f;d++){const p=s[d];this._ids.has(p)&&(this._ids.delete(p),l.push(p),h.push(r.oldData[d]))}break}this.length+=o.length-l.length,o.length&&this._trigger("add",{items:o},i),a.length&&this._trigger("update",{items:a,oldData:c,data:u},i),l.length&&this._trigger("remove",{items:l,oldData:h},i)}};function fLe(n,e){return typeof e=="object"&&e!==null&&n===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof Qe(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof Kt(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function pLe(n,e){return typeof e=="object"&&e!==null&&n===e.idProp&&typeof Qe(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof Kt(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&fLe(n,e.getDataSet())}var mLe=Js(),ts=ut(mLe);const Yr=typeof window<"u"&&window.moment||ts;var Db={exports:{}},yn={},Ob={exports:{}},bc={},iV;function rre(){if(iV)return bc;iV=1;function n(){var o={};return o["align-content"]=!1,o["align-items"]=!1,o["align-self"]=!1,o["alignment-adjust"]=!1,o["alignment-baseline"]=!1,o.all=!1,o["anchor-point"]=!1,o.animation=!1,o["animation-delay"]=!1,o["animation-direction"]=!1,o["animation-duration"]=!1,o["animation-fill-mode"]=!1,o["animation-iteration-count"]=!1,o["animation-name"]=!1,o["animation-play-state"]=!1,o["animation-timing-function"]=!1,o.azimuth=!1,o["backface-visibility"]=!1,o.background=!0,o["background-attachment"]=!0,o["background-clip"]=!0,o["background-color"]=!0,o["background-image"]=!0,o["background-origin"]=!0,o["background-position"]=!0,o["background-repeat"]=!0,o["background-size"]=!0,o["baseline-shift"]=!1,o.binding=!1,o.bleed=!1,o["bookmark-label"]=!1,o["bookmark-level"]=!1,o["bookmark-state"]=!1,o.border=!0,o["border-bottom"]=!0,o["border-bottom-color"]=!0,o["border-bottom-left-radius"]=!0,o["border-bottom-right-radius"]=!0,o["border-bottom-style"]=!0,o["border-bottom-width"]=!0,o["border-collapse"]=!0,o["border-color"]=!0,o["border-image"]=!0,o["border-image-outset"]=!0,o["border-image-repeat"]=!0,o["border-image-slice"]=!0,o["border-image-source"]=!0,o["border-image-width"]=!0,o["border-left"]=!0,o["border-left-color"]=!0,o["border-left-style"]=!0,o["border-left-width"]=!0,o["border-radius"]=!0,o["border-right"]=!0,o["border-right-color"]=!0,o["border-right-style"]=!0,o["border-right-width"]=!0,o["border-spacing"]=!0,o["border-style"]=!0,o["border-top"]=!0,o["border-top-color"]=!0,o["border-top-left-radius"]=!0,o["border-top-right-radius"]=!0,o["border-top-style"]=!0,o["border-top-width"]=!0,o["border-width"]=!0,o.bottom=!1,o["box-decoration-break"]=!0,o["box-shadow"]=!0,o["box-sizing"]=!0,o["box-snap"]=!0,o["box-suppress"]=!0,o["break-after"]=!0,o["break-before"]=!0,o["break-inside"]=!0,o["caption-side"]=!1,o.chains=!1,o.clear=!0,o.clip=!1,o["clip-path"]=!1,o["clip-rule"]=!1,o.color=!0,o["color-interpolation-filters"]=!0,o["column-count"]=!1,o["column-fill"]=!1,o["column-gap"]=!1,o["column-rule"]=!1,o["column-rule-color"]=!1,o["column-rule-style"]=!1,o["column-rule-width"]=!1,o["column-span"]=!1,o["column-width"]=!1,o.columns=!1,o.contain=!1,o.content=!1,o["counter-increment"]=!1,o["counter-reset"]=!1,o["counter-set"]=!1,o.crop=!1,o.cue=!1,o["cue-after"]=!1,o["cue-before"]=!1,o.cursor=!1,o.direction=!1,o.display=!0,o["display-inside"]=!0,o["display-list"]=!0,o["display-outside"]=!0,o["dominant-baseline"]=!1,o.elevation=!1,o["empty-cells"]=!1,o.filter=!1,o.flex=!1,o["flex-basis"]=!1,o["flex-direction"]=!1,o["flex-flow"]=!1,o["flex-grow"]=!1,o["flex-shrink"]=!1,o["flex-wrap"]=!1,o.float=!1,o["float-offset"]=!1,o["flood-color"]=!1,o["flood-opacity"]=!1,o["flow-from"]=!1,o["flow-into"]=!1,o.font=!0,o["font-family"]=!0,o["font-feature-settings"]=!0,o["font-kerning"]=!0,o["font-language-override"]=!0,o["font-size"]=!0,o["font-size-adjust"]=!0,o["font-stretch"]=!0,o["font-style"]=!0,o["font-synthesis"]=!0,o["font-variant"]=!0,o["font-variant-alternates"]=!0,o["font-variant-caps"]=!0,o["font-variant-east-asian"]=!0,o["font-variant-ligatures"]=!0,o["font-variant-numeric"]=!0,o["font-variant-position"]=!0,o["font-weight"]=!0,o.grid=!1,o["grid-area"]=!1,o["grid-auto-columns"]=!1,o["grid-auto-flow"]=!1,o["grid-auto-rows"]=!1,o["grid-column"]=!1,o["grid-column-end"]=!1,o["grid-column-start"]=!1,o["grid-row"]=!1,o["grid-row-end"]=!1,o["grid-row-start"]=!1,o["grid-template"]=!1,o["grid-template-areas"]=!1,o["grid-template-columns"]=!1,o["grid-template-rows"]=!1,o["hanging-punctuation"]=!1,o.height=!0,o.hyphens=!1,o.icon=!1,o["image-orientation"]=!1,o["image-resolution"]=!1,o["ime-mode"]=!1,o["initial-letters"]=!1,o["inline-box-align"]=!1,o["justify-content"]=!1,o["justify-items"]=!1,o["justify-self"]=!1,o.left=!1,o["letter-spacing"]=!0,o["lighting-color"]=!0,o["line-box-contain"]=!1,o["line-break"]=!1,o["line-grid"]=!1,o["line-height"]=!1,o["line-snap"]=!1,o["line-stacking"]=!1,o["line-stacking-ruby"]=!1,o["line-stacking-shift"]=!1,o["line-stacking-strategy"]=!1,o["list-style"]=!0,o["list-style-image"]=!0,o["list-style-position"]=!0,o["list-style-type"]=!0,o.margin=!0,o["margin-bottom"]=!0,o["margin-left"]=!0,o["margin-right"]=!0,o["margin-top"]=!0,o["marker-offset"]=!1,o["marker-side"]=!1,o.marks=!1,o.mask=!1,o["mask-box"]=!1,o["mask-box-outset"]=!1,o["mask-box-repeat"]=!1,o["mask-box-slice"]=!1,o["mask-box-source"]=!1,o["mask-box-width"]=!1,o["mask-clip"]=!1,o["mask-image"]=!1,o["mask-origin"]=!1,o["mask-position"]=!1,o["mask-repeat"]=!1,o["mask-size"]=!1,o["mask-source-type"]=!1,o["mask-type"]=!1,o["max-height"]=!0,o["max-lines"]=!1,o["max-width"]=!0,o["min-height"]=!0,o["min-width"]=!0,o["move-to"]=!1,o["nav-down"]=!1,o["nav-index"]=!1,o["nav-left"]=!1,o["nav-right"]=!1,o["nav-up"]=!1,o["object-fit"]=!1,o["object-position"]=!1,o.opacity=!1,o.order=!1,o.orphans=!1,o.outline=!1,o["outline-color"]=!1,o["outline-offset"]=!1,o["outline-style"]=!1,o["outline-width"]=!1,o.overflow=!1,o["overflow-wrap"]=!1,o["overflow-x"]=!1,o["overflow-y"]=!1,o.padding=!0,o["padding-bottom"]=!0,o["padding-left"]=!0,o["padding-right"]=!0,o["padding-top"]=!0,o.page=!1,o["page-break-after"]=!1,o["page-break-before"]=!1,o["page-break-inside"]=!1,o["page-policy"]=!1,o.pause=!1,o["pause-after"]=!1,o["pause-before"]=!1,o.perspective=!1,o["perspective-origin"]=!1,o.pitch=!1,o["pitch-range"]=!1,o["play-during"]=!1,o.position=!1,o["presentation-level"]=!1,o.quotes=!1,o["region-fragment"]=!1,o.resize=!1,o.rest=!1,o["rest-after"]=!1,o["rest-before"]=!1,o.richness=!1,o.right=!1,o.rotation=!1,o["rotation-point"]=!1,o["ruby-align"]=!1,o["ruby-merge"]=!1,o["ruby-position"]=!1,o["shape-image-threshold"]=!1,o["shape-outside"]=!1,o["shape-margin"]=!1,o.size=!1,o.speak=!1,o["speak-as"]=!1,o["speak-header"]=!1,o["speak-numeral"]=!1,o["speak-punctuation"]=!1,o["speech-rate"]=!1,o.stress=!1,o["string-set"]=!1,o["tab-size"]=!1,o["table-layout"]=!1,o["text-align"]=!0,o["text-align-last"]=!0,o["text-combine-upright"]=!0,o["text-decoration"]=!0,o["text-decoration-color"]=!0,o["text-decoration-line"]=!0,o["text-decoration-skip"]=!0,o["text-decoration-style"]=!0,o["text-emphasis"]=!0,o["text-emphasis-color"]=!0,o["text-emphasis-position"]=!0,o["text-emphasis-style"]=!0,o["text-height"]=!0,o["text-indent"]=!0,o["text-justify"]=!0,o["text-orientation"]=!0,o["text-overflow"]=!0,o["text-shadow"]=!0,o["text-space-collapse"]=!0,o["text-transform"]=!0,o["text-underline-position"]=!0,o["text-wrap"]=!0,o.top=!1,o.transform=!1,o["transform-origin"]=!1,o["transform-style"]=!1,o.transition=!1,o["transition-delay"]=!1,o["transition-duration"]=!1,o["transition-property"]=!1,o["transition-timing-function"]=!1,o["unicode-bidi"]=!1,o["vertical-align"]=!1,o.visibility=!1,o["voice-balance"]=!1,o["voice-duration"]=!1,o["voice-family"]=!1,o["voice-pitch"]=!1,o["voice-range"]=!1,o["voice-rate"]=!1,o["voice-stress"]=!1,o["voice-volume"]=!1,o.volume=!1,o["white-space"]=!1,o.widows=!1,o.width=!0,o["will-change"]=!1,o["word-break"]=!0,o["word-spacing"]=!0,o["word-wrap"]=!0,o["wrap-flow"]=!1,o["wrap-through"]=!1,o["writing-mode"]=!1,o["z-index"]=!1,o}function e(o,a,l){}function r(o,a,l){}var i=/javascript\s*\:/img;function s(o,a){return i.test(a)?"":a}return bc.whiteList=n(),bc.getDefaultWhiteList=n,bc.onAttr=e,bc.onIgnoreAttr=r,bc.safeAttrValue=s,bc}var oM,sV;function ire(){return sV||(sV=1,oM={indexOf:function(n,e){var r,i;if(Array.prototype.indexOf)return n.indexOf(e);for(r=0,i=n.length;r<i;r++)if(n[r]===e)return r;return-1},forEach:function(n,e,r){var i,s;if(Array.prototype.forEach)return n.forEach(e,r);for(i=0,s=n.length;i<s;i++)e.call(r,n[i],i,n)},trim:function(n){return String.prototype.trim?n.trim():n.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(n){return String.prototype.trimRight?n.trimRight():n.replace(/(\s*$)/g,"")}}),oM}var aM,oV;function gLe(){if(oV)return aM;oV=1;var n=ire();function e(r,i){r=n.trimRight(r),r[r.length-1]!==";"&&(r+=";");var s=r.length,o=!1,a=0,l=0,c="";function u(){if(!o){var f=n.trim(r.slice(a,l)),p=f.indexOf(":");if(p!==-1){var g=n.trim(f.slice(0,p)),b=n.trim(f.slice(p+1));if(g){var y=i(a,c.length,g,b,f);y&&(c+=y+"; ")}}}a=l+1}for(;l<s;l++){var h=r[l];if(h==="/"&&r[l+1]==="*"){var d=r.indexOf("*/",l+2);if(d===-1)break;l=d+1,a=l+1,o=!1}else h==="("?o=!0:h===")"?o=!1:h===";"?o||u():h===`
`&&u()}return n.trim(c)}return aM=e,aM}var lM,aV;function vLe(){if(aV)return lM;aV=1;var n=rre(),e=gLe();ire();function r(o){return o==null}function i(o){var a={};for(var l in o)a[l]=o[l];return a}function s(o){o=i(o||{}),o.whiteList=o.whiteList||n.whiteList,o.onAttr=o.onAttr||n.onAttr,o.onIgnoreAttr=o.onIgnoreAttr||n.onIgnoreAttr,o.safeAttrValue=o.safeAttrValue||n.safeAttrValue,this.options=o}return s.prototype.process=function(o){if(o=o||"",o=o.toString(),!o)return"";var a=this,l=a.options,c=l.whiteList,u=l.onAttr,h=l.onIgnoreAttr,d=l.safeAttrValue,f=e(o,function(p,g,b,y,v){var w=c[b],k=!1;if(w===!0?k=w:typeof w=="function"?k=w(y):w instanceof RegExp&&(k=w.test(y)),k!==!0&&(k=!1),y=d(b,y),!!y){var _={position:g,sourcePosition:p,source:v,isWhite:k};if(k){var S=u(b,y,_);return r(S)?b+":"+y:S}else{var S=h(b,y,_);if(!r(S))return S}}});return f},lM=s,lM}var lV;function dI(){return lV||(lV=1,function(n,e){var r=rre(),i=vLe();function s(a,l){var c=new i(l);return c.process(a)}e=n.exports=s,e.FilterCSS=i;for(var o in r)e[o]=r[o];typeof window<"u"&&(window.filterCSS=n.exports)}(Ob,Ob.exports)),Ob.exports}var cM,cV;function r3(){return cV||(cV=1,cM={indexOf:function(n,e){var r,i;if(Array.prototype.indexOf)return n.indexOf(e);for(r=0,i=n.length;r<i;r++)if(n[r]===e)return r;return-1},forEach:function(n,e,r){var i,s;if(Array.prototype.forEach)return n.forEach(e,r);for(i=0,s=n.length;i<s;i++)e.call(r,n[i],i,n)},trim:function(n){return String.prototype.trim?n.trim():n.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(n){var e=/\s|\n|\t/,r=e.exec(n);return r?r.index:-1}}),cM}var uV;function sre(){if(uV)return yn;uV=1;var n=dI().FilterCSS,e=dI().getDefaultWhiteList,r=r3();function i(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var s=new n;function o(z,W,q){}function a(z,W,q){}function l(z,W,q){}function c(z,W,q){}function u(z){return z.replace(d,"&lt;").replace(f,"&gt;")}function h(z,W,q,V){if(q=M(q),W==="href"||W==="src"){if(q=r.trim(q),q==="#")return"#";if(!(q.substr(0,7)==="http://"||q.substr(0,8)==="https://"||q.substr(0,7)==="mailto:"||q.substr(0,4)==="tel:"||q.substr(0,11)==="data:image/"||q.substr(0,6)==="ftp://"||q.substr(0,2)==="./"||q.substr(0,3)==="../"||q[0]==="#"||q[0]==="/"))return""}else if(W==="background"){if(w.lastIndex=0,w.test(q))return""}else if(W==="style"){if(k.lastIndex=0,k.test(q)||(_.lastIndex=0,_.test(q)&&(w.lastIndex=0,w.test(q))))return"";V!==!1&&(V=V||s,q=V.process(q))}return q=R(q),q}var d=/</g,f=/>/g,p=/"/g,g=/&quot;/g,b=/&#([a-zA-Z0-9]*);?/gim,y=/&colon;?/gim,v=/&newline;?/gim,w=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,k=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,_=/u\s*r\s*l\s*\(.*/gi;function S(z){return z.replace(p,"&quot;")}function C(z){return z.replace(g,'"')}function E(z){return z.replace(b,function(q,V){return V[0]==="x"||V[0]==="X"?String.fromCharCode(parseInt(V.substr(1),16)):String.fromCharCode(parseInt(V,10))})}function P(z){return z.replace(y,":").replace(v," ")}function O(z){for(var W="",q=0,V=z.length;q<V;q++)W+=z.charCodeAt(q)<32?" ":z.charAt(q);return r.trim(W)}function M(z){return z=C(z),z=E(z),z=P(z),z=O(z),z}function R(z){return z=S(z),z=u(z),z}function j(){return""}function B(z,W){typeof W!="function"&&(W=function(){});var q=!Array.isArray(z);function V(H){return q?!0:r.indexOf(z,H)!==-1}var F=[],G=!1;return{onIgnoreTag:function(H,A,Q){if(V(H))if(Q.isClosing){var J="[/removed]",K=Q.position+J.length;return F.push([G!==!1?G:Q.position,K]),G=!1,J}else return G||(G=Q.position),"[removed]";else return W(H,A,Q)},remove:function(H){var A="",Q=0;return r.forEach(F,function(J){A+=H.slice(Q,J[0]),Q=J[1]}),A+=H.slice(Q),A}}}function L(z){for(var W="",q=0;q<z.length;){var V=z.indexOf("<!--",q);if(V===-1){W+=z.slice(q);break}W+=z.slice(q,V);var F=z.indexOf("-->",V);if(F===-1)break;q=F+3}return W}function $(z){var W=z.split("");return W=W.filter(function(q){var V=q.charCodeAt(0);return V===127?!1:V<=31?V===10||V===13:!0}),W.join("")}return yn.whiteList=i(),yn.getDefaultWhiteList=i,yn.onTag=o,yn.onIgnoreTag=a,yn.onTagAttr=l,yn.onIgnoreTagAttr=c,yn.safeAttrValue=h,yn.escapeHtml=u,yn.escapeQuote=S,yn.unescapeQuote=C,yn.escapeHtmlEntities=E,yn.escapeDangerHtml5Entities=P,yn.clearNonPrintableCharacter=O,yn.friendlyAttrValue=M,yn.escapeAttrValue=R,yn.onIgnoreTagStripAll=j,yn.StripTagBody=B,yn.stripCommentTag=L,yn.stripBlankChar=$,yn.attributeWrapSign='"',yn.cssFilter=s,yn.getDefaultCSSWhiteList=e,yn}var Ib={},dV;function ore(){if(dV)return Ib;dV=1;var n=r3();function e(d){var f=n.spaceIndex(d),p;return f===-1?p=d.slice(1,-1):p=d.slice(1,f+1),p=n.trim(p).toLowerCase(),p.slice(0,1)==="/"&&(p=p.slice(1)),p.slice(-1)==="/"&&(p=p.slice(0,-1)),p}function r(d){return d.slice(0,2)==="</"}function i(d,f,p){var g="",b=0,y=!1,v=!1,w=0,k=d.length,_="",S="";e:for(w=0;w<k;w++){var C=d.charAt(w);if(y===!1){if(C==="<"){y=w;continue}}else if(v===!1){if(C==="<"){g+=p(d.slice(b,w)),y=w,b=w;continue}if(C===">"||w===k-1){g+=p(d.slice(b,y)),S=d.slice(y,w+1),_=e(S),g+=f(y,g.length,_,S,r(S)),b=w+1,y=!1;continue}if(C==='"'||C==="'")for(var E=1,P=d.charAt(w-E);P.trim()===""||P==="=";){if(P==="="){v=C;continue e}P=d.charAt(w-++E)}}else if(C===v){v=!1;continue}}return b<k&&(g+=p(d.substr(b))),g}var s=/[^a-zA-Z0-9\\_:.-]/gim;function o(d,f){var p=0,g=0,b=[],y=!1,v=d.length;function w(E,P){if(E=n.trim(E),E=E.replace(s,"").toLowerCase(),!(E.length<1)){var O=f(E,P||"");O&&b.push(O)}}for(var k=0;k<v;k++){var _=d.charAt(k),S,C;if(y===!1&&_==="="){y=d.slice(p,k),p=k+1,g=d.charAt(p)==='"'||d.charAt(p)==="'"?p:l(d,k+1);continue}if(y!==!1&&k===g){if(C=d.indexOf(_,k+1),C===-1)break;S=n.trim(d.slice(g+1,C)),w(y,S),y=!1,k=C,p=k+1;continue}if(/\s|\n|\t/.test(_))if(d=d.replace(/\s|\n|\t/g," "),y===!1)if(C=a(d,k),C===-1){S=n.trim(d.slice(p,k)),w(S),y=!1,p=k+1;continue}else{k=C-1;continue}else if(C=c(d,k-1),C===-1){S=n.trim(d.slice(p,k)),S=h(S),w(y,S),y=!1,p=k+1;continue}else continue}return p<d.length&&(y===!1?w(d.slice(p)):w(y,h(n.trim(d.slice(p))))),n.trim(b.join(" "))}function a(d,f){for(;f<d.length;f++){var p=d[f];if(p!==" ")return p==="="?f:-1}}function l(d,f){for(;f<d.length;f++){var p=d[f];if(p!==" ")return p==="'"||p==='"'?f:-1}}function c(d,f){for(;f>0;f--){var p=d[f];if(p!==" ")return p==="="?f:-1}}function u(d){return d[0]==='"'&&d[d.length-1]==='"'||d[0]==="'"&&d[d.length-1]==="'"}function h(d){return u(d)?d.substr(1,d.length-2):d}return Ib.parseTag=i,Ib.parseAttr=o,Ib}var uM,hV;function bLe(){if(hV)return uM;hV=1;var n=dI().FilterCSS,e=sre(),r=ore(),i=r.parseTag,s=r.parseAttr,o=r3();function a(d){return d==null}function l(d){var f=o.spaceIndex(d);if(f===-1)return{html:"",closing:d[d.length-2]==="/"};d=o.trim(d.slice(f+1,-1));var p=d[d.length-1]==="/";return p&&(d=o.trim(d.slice(0,-1))),{html:d,closing:p}}function c(d){var f={};for(var p in d)f[p]=d[p];return f}function u(d){var f={};for(var p in d)Array.isArray(d[p])?f[p.toLowerCase()]=d[p].map(function(g){return g.toLowerCase()}):f[p.toLowerCase()]=d[p];return f}function h(d){d=c(d||{}),d.stripIgnoreTag&&(d.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),d.onIgnoreTag=e.onIgnoreTagStripAll),d.whiteList||d.allowList?d.whiteList=u(d.whiteList||d.allowList):d.whiteList=e.whiteList,this.attributeWrapSign=d.singleQuotedAttributeValue===!0?"'":e.attributeWrapSign,d.onTag=d.onTag||e.onTag,d.onTagAttr=d.onTagAttr||e.onTagAttr,d.onIgnoreTag=d.onIgnoreTag||e.onIgnoreTag,d.onIgnoreTagAttr=d.onIgnoreTagAttr||e.onIgnoreTagAttr,d.safeAttrValue=d.safeAttrValue||e.safeAttrValue,d.escapeHtml=d.escapeHtml||e.escapeHtml,this.options=d,d.css===!1?this.cssFilter=!1:(d.css=d.css||{},this.cssFilter=new n(d.css))}return h.prototype.process=function(d){if(d=d||"",d=d.toString(),!d)return"";var f=this,p=f.options,g=p.whiteList,b=p.onTag,y=p.onIgnoreTag,v=p.onTagAttr,w=p.onIgnoreTagAttr,k=p.safeAttrValue,_=p.escapeHtml,S=f.attributeWrapSign,C=f.cssFilter;p.stripBlankChar&&(d=e.stripBlankChar(d)),p.allowCommentTag||(d=e.stripCommentTag(d));var E=!1;p.stripIgnoreTagBody&&(E=e.StripTagBody(p.stripIgnoreTagBody,y),y=E.onIgnoreTag);var P=i(d,function(O,M,R,j,B){var L={sourcePosition:O,position:M,isClosing:B,isWhite:Object.prototype.hasOwnProperty.call(g,R)},$=b(R,j,L);if(!a($))return $;if(L.isWhite){if(L.isClosing)return"</"+R+">";var z=l(j),W=g[R],q=s(z.html,function(V,F){var G=o.indexOf(W,V)!==-1,H=v(R,V,F,G);return a(H)?G?(F=k(R,V,F,C),F?V+"="+S+F+S:V):(H=w(R,V,F,G),a(H)?void 0:H):H});return j="<"+R,q&&(j+=" "+q),z.closing&&(j+=" /"),j+=">",j}else return $=y(R,j,L),a($)?_(j):$},_);return E&&(P=E.remove(P)),P},uM=h,uM}var fV;function yLe(){return fV||(fV=1,function(n,e){var r=sre(),i=ore(),s=bLe();function o(l,c){var u=new s(c);return u.process(l)}e=n.exports=o,e.filterXSS=o,e.FilterXSS=s,function(){for(var l in r)e[l]=r[l];for(var c in i)e[c]=i[c]}(),typeof window<"u"&&(window.filterXSS=n.exports);function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=n.exports)}(Db,Db.exports)),Db.exports}var xLe=yLe(),wLe=ut(xLe);function pV(n,e){var r=nr(n);if(Bx){var i=Bx(n);e&&(i=ht(i).call(i,function(s){return A1(n,s).enumerable})),r.push.apply(r,i)}return r}function mV(n){for(var e=1;e<arguments.length;e++){var r,i,s=arguments[e]!=null?arguments[e]:{};e%2?Qe(r=pV(Object(s),!0)).call(r,function(o){rn(n,o,s[o])}):Ux?Une(n,Ux(s)):Qe(i=pV(Object(s))).call(i,function(o){L1(n,o,A1(s,o))})}return n}function Na(n){var e;if(!n)return!1;let r=(e=n.idProp)!==null&&e!==void 0?e:n._idProp;return r?pLe(r,n):!1}const dM=/^\/?Date\((-?\d+)/i,_Le=/^\d+$/;function i3(n,e){let r;if(n!==void 0){if(n===null)return null;if(!e)return n;if(typeof e!="string"&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!n;case"number":case"Number":return Ai(n)&&!isNaN(Date.parse(n))?ts(n).valueOf():Number(n.valueOf());case"string":case"String":return String(n);case"Date":try{return i3(n,"Moment").toDate()}catch(i){throw i instanceof TypeError?new TypeError("Cannot convert object of type "+am(n)+" to type "+e):i}case"Moment":if(Am(n))return ts(n);if(n instanceof Date)return ts(n.valueOf());if(ts.isMoment(n))return ts(n);if(Ai(n))return r=dM.exec(n),r?ts(Number(r[1])):(r=_Le.exec(n),ts(r?Number(n):n));throw new TypeError("Cannot convert object of type "+am(n)+" to type "+e);case"ISODate":if(Am(n))return new Date(n);if(n instanceof Date)return n.toISOString();if(ts.isMoment(n))return n.toDate().toISOString();if(Ai(n))return r=dM.exec(n),r?new Date(Number(r[1])).toISOString():ts(n).format();throw new Error("Cannot convert object of type "+am(n)+" to type ISODate");case"ASPDate":if(Am(n))return"/Date("+n+")/";if(n instanceof Date||ts.isMoment(n))return"/Date("+n.valueOf()+")/";if(Ai(n)){r=dM.exec(n);let i;return r?i=new Date(Number(r[1])).valueOf():i=new Date(n).valueOf(),"/Date("+i+")/"}else throw new Error("Cannot convert object of type "+am(n)+" to type ASPDate");default:throw new Error("Unknown type ".concat(e))}}}function bf(n){var e,r,i,s,o,a;let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{start:"Date",end:"Date"};const c=n._idProp,u=new vf({fieldId:c}),h=Kt(e=lLe(n)).call(e,d=>{var f;return j1(f=nr(d)).call(f,(p,g)=>(p[g]=i3(d[g],l[g]),p),{})}).to(u);return h.all().start(),{add:function(){return n.getDataSet().add(...arguments)},remove:function(){return n.getDataSet().remove(...arguments)},update:function(){return n.getDataSet().update(...arguments)},updateOnly:function(){return n.getDataSet().updateOnly(...arguments)},clear:function(){return n.getDataSet().clear(...arguments)},forEach:Ee(r=Qe(u)).call(r,u),get:Ee(i=u.get).call(i,u),getIds:Ee(s=u.getIds).call(s,u),off:Ee(o=u.off).call(o,u),on:Ee(a=u.on).call(a,u),get length(){return u.length},idProp:c,type:l,rawDS:n,coercedDS:u,dispose:()=>h.stop()}}const are=n=>{const e=new wLe.FilterXSS(n);return r=>typeof r=="string"?e.process(r):r},SLe=n=>n;let hI=are();const kLe=n=>{n&&(n.disabled===!0?(hI=SLe,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):n.filterOptions&&(hI=are(n.filterOptions)))},X=mV(mV({},a5e),{},{convert:i3,setupXSSProtection:kLe});L1(X,"xss",{get:function(){return hI}});var gV={},hM,vV;function CLe(){if(vV)return hM;vV=1;var n=Ln(),e=Lt(),r=Bt(),i=ks(),s=rne().trim,o=NN(),a=r("".charAt),l=n.parseFloat,c=n.Symbol,u=c&&c.iterator,h=1/l(o+"-0")!==-1/0||u&&!e(function(){l(Object(u))});return hM=h?function(f){var p=s(i(f)),g=l(p);return g===0&&a(p,0)==="-"?-0:g}:l,hM}var bV;function ELe(){if(bV)return gV;bV=1;var n=lt(),e=CLe();return n({global:!0,forced:parseFloat!==e},{parseFloat:e}),gV}var fM,yV;function TLe(){if(yV)return fM;yV=1,ELe();var n=hn();return fM=n.parseFloat,fM}var pM,xV;function PLe(){if(xV)return pM;xV=1;var n=TLe();return pM=n,pM}var mM,wV;function MLe(){return wV||(wV=1,mM=PLe()),mM}var DLe=MLe(),qx=ut(DLe);class ac{constructor(){this.options=null,this.props=null}setOptions(e){e&&X.extend(this.options,e)}redraw(){return!1}destroy(){}_isResized(){const e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e}}var _V={},SV;function OLe(){if(SV)return _V;SV=1;var n=lt(),e=ine();return n({target:"String",proto:!0},{repeat:e}),_V}var gM,kV;function ILe(){if(kV)return gM;kV=1,OLe();var n=Fn();return gM=n("String","repeat"),gM}var vM,CV;function RLe(){if(CV)return vM;CV=1;var n=vn(),e=ILe(),r=String.prototype;return vM=function(i){var s=i.repeat;return typeof i=="string"||i===r||n(r,i)&&s===r.repeat?e:s},vM}var bM,EV;function ALe(){if(EV)return bM;EV=1;var n=RLe();return bM=n,bM}var yM,TV;function NLe(){return TV||(TV=1,yM=ALe()),yM}var jLe=NLe(),Sd=ut(jLe);function s3(n,e,r){if(r&&!Et(r))return s3(n,e,[r]);if(e.hiddenDates=[],r&&Et(r)==!0){var i;for(let s=0;s<r.length;s++)if(Sd(r[s])===void 0){const o={};o.start=n(r[s].start).toDate().valueOf(),o.end=n(r[s].end).toDate().valueOf(),e.hiddenDates.push(o)}Hn(i=e.hiddenDates).call(i,(s,o)=>s.start-o.start)}}function Wx(n,e,r){if(r&&!Et(r))return Wx(n,e,[r]);if(r&&e.domProps.centerContainer.width!==void 0){s3(n,e,r);const i=n(e.range.start),s=n(e.range.end),a=(e.range.end-e.range.start)/e.domProps.centerContainer.width;for(let d=0;d<r.length;d++)if(Sd(r[d])!==void 0){let f=n(r[d].start),p=n(r[d].end);if(f._d=="Invalid Date")throw new Error("Supplied start date is not valid: ".concat(r[d].start));if(p._d=="Invalid Date")throw new Error("Supplied end date is not valid: ".concat(r[d].end));if(p-f>=4*a){let b=0,y=s.clone();switch(Sd(r[d])){case"daily":f.day()!=p.day()&&(b=1),f=f.dayOfYear(i.dayOfYear()).year(i.year()).subtract(7,"days"),p=p.dayOfYear(i.dayOfYear()).year(i.year()).subtract(7-b,"days"),y.add(1,"weeks");break;case"weekly":{const v=p.diff(f,"days"),w=f.day();f=f.date(i.date()).month(i.month()).year(i.year()),p=f.clone(),f=f.day(w).subtract(1,"weeks"),p=p.day(w).add(v,"days").subtract(1,"weeks"),y.add(1,"weeks");break}case"monthly":f.month()!=p.month()&&(b=1),f=f.month(i.month()).year(i.year()).subtract(1,"months"),p=p.month(i.month()).year(i.year()).subtract(1,"months").add(b,"months"),y.add(1,"months");break;case"yearly":f.year()!=p.year()&&(b=1),f=f.year(i.year()).subtract(1,"years"),p=p.year(i.year()).subtract(1,"years").add(b,"years"),y.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",Sd(r[d]));return}for(;f<y;)switch(e.hiddenDates.push({start:f.valueOf(),end:p.valueOf()}),Sd(r[d])){case"daily":f=f.add(1,"days"),p=p.add(1,"days");break;case"weekly":f=f.add(1,"weeks"),p=p.add(1,"weeks");break;case"monthly":f=f.add(1,"months"),p=p.add(1,"months");break;case"yearly":f=f.add(1,"y"),p=p.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",Sd(r[d]));return}e.hiddenDates.push({start:f.valueOf(),end:p.valueOf()})}}LLe(e);const l=Vx(e.range.start,e.hiddenDates),c=Vx(e.range.end,e.hiddenDates);let u=e.range.start,h=e.range.end;l.hidden==!0&&(u=e.range.startToFront==!0?l.startDate-1:l.endDate+1),c.hidden==!0&&(h=e.range.endToFront==!0?c.startDate-1:c.endDate+1),(l.hidden==!0||c.hidden==!0)&&e.range._applyRange(u,h)}}function LLe(n){var e;const r=n.hiddenDates,i=[];for(var s=0;s<r.length;s++)for(let o=0;o<r.length;o++)s!=o&&r[o].remove!=!0&&r[s].remove!=!0&&(r[o].start>=r[s].start&&r[o].end<=r[s].end?r[o].remove=!0:r[o].start>=r[s].start&&r[o].start<=r[s].end?(r[s].end=r[o].end,r[o].remove=!0):r[o].end>=r[s].start&&r[o].end<=r[s].end&&(r[s].start=r[o].start,r[o].remove=!0));for(s=0;s<r.length;s++)r[s].remove!==!0&&i.push(r[s]);n.hiddenDates=i,Hn(e=n.hiddenDates).call(e,(o,a)=>o.start-a.start)}function FLe(n,e,r){let i=!1;const s=e.current.valueOf();for(let a=0;a<e.hiddenDates.length;a++){const l=e.hiddenDates[a].start;var o=e.hiddenDates[a].end;if(s>=l&&s<o){i=!0;break}}if(i==!0&&s<e._end.valueOf()&&s!=r){const a=n(r),l=n(o);a.year()!=l.year()?e.switchedYear=!0:a.month()!=l.month()?e.switchedMonth=!0:a.dayOfYear()!=l.dayOfYear()&&(e.switchedDay=!0),e.current=l}}function PV(n,e,r){let i;if(n.body.hiddenDates.length==0)return i=n.range.conversion(r),(e.valueOf()-i.offset)*i.scale;{const s=Vx(e,n.body.hiddenDates);s.hidden==!0&&(e=s.startDate);const o=jm(n.body.hiddenDates,n.range.start,n.range.end);if(e<n.range.start){i=n.range.conversion(r,o);const a=$Le(n.body.hiddenDates,e,i.offset);return e=n.options.moment(e).toDate().valueOf(),e=e+a,-(i.offset-e.valueOf())*i.scale}else if(e>n.range.end){const a={start:n.range.start,end:e};return e=DV(n.options.moment,n.body.hiddenDates,a,e),i=n.range.conversion(r,o),(e.valueOf()-i.offset)*i.scale}else return e=DV(n.options.moment,n.body.hiddenDates,n.range,e),i=n.range.conversion(r,o),(e.valueOf()-i.offset)*i.scale}}function MV(n,e,r){if(n.body.hiddenDates.length==0){const i=n.range.conversion(r);return new Date(e/i.scale+i.offset)}else{const i=jm(n.body.hiddenDates,n.range.start,n.range.end),o=(n.range.end-n.range.start-i)*e/r,a=zLe(n.body.hiddenDates,n.range,o);return new Date(a+o+n.range.start)}}function jm(n,e,r){let i=0;for(let s=0;s<n.length;s++){const o=n[s].start,a=n[s].end;o>=e&&a<r&&(i+=a-o)}return i}function $Le(n,e,r){let i=0;for(let s=0;s<n.length;s++){const o=n[s].start,a=n[s].end;o>=e&&a<=r&&(i+=a-o)}return i}function DV(n,e,r,i){return i=n(i).toDate().valueOf(),i-=Hx(n,e,r,i),i}function Hx(n,e,r,i){let s=0;i=n(i).toDate().valueOf();for(let o=0;o<e.length;o++){const a=e[o].start,l=e[o].end;a>=r.start&&l<r.end&&i>=l&&(s+=l-a)}return s}function zLe(n,e,r){let i=0,s=0,o=e.start;for(let a=0;a<n.length;a++){const l=n[a].start,c=n[a].end;if(l>=e.start&&c<e.end){if(s+=l-o,o=c,s>=r)break;i+=c-l}}return i}function Tc(n,e,r,i){const s=Vx(e,n);return s.hidden==!0?r<0?i==!0?s.startDate-(s.endDate-e)-1:s.startDate-1:i==!0?s.endDate+(e-s.startDate)+1:s.endDate+1:e}function Vx(n,e){for(let s=0;s<e.length;s++){var r=e[s].start,i=e[s].end;if(n>=r&&n<i)return{hidden:!0,startDate:r,endDate:i}}return{hidden:!1,startDate:r,endDate:i}}class F1 extends ac{constructor(e,r){var i,s,o,a,l,c,u;super();const h=Yr().hours(0).minutes(0).seconds(0).milliseconds(0),d=h.clone().add(-3,"days").valueOf(),f=h.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,r===void 0?(this.start=d,this.end=f):(this.start=r.start||d,this.end=r.end||f),this.rolling=!1,this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:Yr,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},this.options=X.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",Ee(i=this._onDragStart).call(i,this)),this.body.emitter.on("panmove",Ee(s=this._onDrag).call(s,this)),this.body.emitter.on("panend",Ee(o=this._onDragEnd).call(o,this)),this.body.emitter.on("mousewheel",Ee(a=this._onMouseWheel).call(a,this)),this.body.emitter.on("touch",Ee(l=this._onTouch).call(l,this)),this.body.emitter.on("pinch",Ee(c=this._onPinch).call(c,this)),this.body.dom.rollingModeBtn.addEventListener("click",Ee(u=this.startRolling).call(u,this)),this.setOptions(r)}setOptions(e){if(e){const r=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll"];X.selectiveExtend(r,this.options,e),e.rollingMode&&e.rollingMode.follow&&this.startRolling(),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}}startRolling(){const e=this;function r(){e.stopRolling(),e.rolling=!0;let i=e.end-e.start;const s=X.convert(new Date,"Date").valueOf(),o=e.options.rollingMode&&e.options.rollingMode.offset||.5,a=s-i*o,l=s+i*(1-o),c={animation:!1};e.setRange(a,l,c),i=1/e.conversion(e.body.domProps.center.width).scale/10,i<30&&(i=30),i>1e3&&(i=1e3),e.body.dom.rollingModeBtn.style.visibility="hidden",e.currentTimeTimer=Rr(r,i)}r()}stopRolling(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}setRange(e,r,i,s,o){i||(i={}),i.byUser!==!0&&(i.byUser=!1);const a=this,l=e!=null?X.convert(e,"Date").valueOf():null,c=r!=null?X.convert(r,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,i.animation){const d=this.start,f=this.end,p=typeof i.animation=="object"&&"duration"in i.animation?i.animation.duration:500,g=typeof i.animation=="object"&&"easingFunction"in i.animation?i.animation.easingFunction:"easeInOutQuad",b=X.easingFunctions[g];if(!b){var u;throw new Error(Bn(u="Unknown easing function ".concat(ui(g),". Choose from: ")).call(u,nr(X.easingFunctions).join(", ")))}const y=Ii();let v=!1;const w=()=>{if(!a.props.touch.dragging){const _=Ii()-y,S=b(_/p),C=_>p,E=C||l===null?l:d+(l-d)*S,P=C||c===null?c:f+(c-f)*S;h=a._applyRange(E,P),Wx(a.options.moment,a.body,a.options.hiddenDates),v=v||h;const O={start:new Date(a.start),end:new Date(a.end),byUser:i.byUser,event:i.event};if(o&&o(S,h,C),h&&a.body.emitter.emit("rangechange",O),C){if(v&&(a.body.emitter.emit("rangechanged",O),s))return s()}else a.animationTimer=Rr(w,20)}};return w()}else{var h=this._applyRange(l,c);if(Wx(this.options.moment,this.body,this.options.hiddenDates),h){const d={start:new Date(this.start),end:new Date(this.end),byUser:i.byUser,event:i.event};if(this.body.emitter.emit("rangechange",d),clearTimeout(a.timeoutID),a.timeoutID=Rr(()=>{a.body.emitter.emit("rangechanged",d)},200),s)return s()}}}getMillisecondsPerPixel(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}_cancelAnimation(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}_applyRange(e,r){let i=e!=null?X.convert(e,"Date").valueOf():this.start,s=r!=null?X.convert(r,"Date").valueOf():this.end;const o=this.options.max!=null?X.convert(this.options.max,"Date").valueOf():null,a=this.options.min!=null?X.convert(this.options.min,"Date").valueOf():null;let l;if(isNaN(i)||i===null)throw new Error('Invalid start "'.concat(e,'"'));if(isNaN(s)||s===null)throw new Error('Invalid end "'.concat(r,'"'));if(s<i&&(s=i),a!==null&&i<a&&(l=a-i,i+=l,s+=l,o!=null&&s>o&&(s=o)),o!==null&&s>o&&(l=s-o,i-=l,s-=l,a!=null&&i<a&&(i=a)),this.options.zoomMin!==null){let u=qx(this.options.zoomMin);u<0&&(u=0),s-i<u&&(this.end-this.start===u&&i>=this.start-.5&&s<=this.end?(i=this.start,s=this.end):(l=u-(s-i),i-=l/2,s+=l/2))}if(this.options.zoomMax!==null){let u=qx(this.options.zoomMax);u<0&&(u=0),s-i>u&&(this.end-this.start===u&&i<this.start&&s>this.end?(i=this.start,s=this.end):(l=s-i-u,i+=l/2,s-=l/2))}const c=this.start!=i||this.end!=s;return!(i>=this.start&&i<=this.end||s>=this.start&&s<=this.end)&&!(this.start>=i&&this.start<=s||this.end>=i&&this.end<=s)&&this.body.emitter.emit("checkRangedItems"),this.start=i,this.end=s,c}getRange(){return{start:this.start,end:this.end}}conversion(e,r){return F1.conversion(this.start,this.end,e,r)}static conversion(e,r,i,s){return s===void 0&&(s=0),i!=0&&r-e!=0?{offset:e,scale:i/(r-e-s)}:{offset:0,scale:1}}_onDragStart(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}_onDrag(e){if(!e||!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging)return;const r=this.options.direction;OV(r);let i=r=="horizontal"?e.deltaX:e.deltaY;i-=this.deltaDifference;let s=this.props.touch.end-this.props.touch.start;const o=jm(this.body.hiddenDates,this.start,this.end);s-=o;const a=r=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height;let l;this.options.rtl?l=i/a*s:l=-i/a*s;const c=this.props.touch.start+l,u=this.props.touch.end+l,h=Tc(this.body.hiddenDates,c,this.previousDelta-i,!0),d=Tc(this.body.hiddenDates,u,this.previousDelta-i,!0);if(h!=c||d!=u){this.deltaDifference+=i,this.props.touch.start=h,this.props.touch.end=d,this._onDrag(e);return}this.previousDelta=i,this._applyRange(c,u);const f=new Date(this.start),p=new Date(this.end);this.body.emitter.emit("rangechange",{start:f,end:p,byUser:!0,event:e}),this.body.emitter.emit("panmove")}_onDragEnd(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:e}))}_onMouseWheel(e){let r=0;if(e.wheelDelta?r=e.wheelDelta/120:e.detail?r=-e.detail/3:e.deltaY&&(r=-e.deltaY/3),!(this.options.zoomKey&&!e[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&r){const i=this.options.zoomFriction||5;let s;r<0?s=1-r/i:s=1/(1+r/i);let o;if(this.rolling){const a=this.options.rollingMode&&this.options.rollingMode.offset||.5;o=this.start+(this.end-this.start)*a}else{const a=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center);o=this._pointerToDate(a)}this.zoom(s,o,r,e),e.preventDefault()}}_onTouch(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,X.preventDefault(e)}_onPinch(e){if(!(this.options.zoomable&&this.options.moveable))return;X.preventDefault(e),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();const r=1/(e.scale+this.scaleOffset),i=this.props.touch.centerDate,s=jm(this.body.hiddenDates,this.start,this.end),o=Hx(this.options.moment,this.body.hiddenDates,this,i),a=s-o;let l=i-o+(this.props.touch.start-(i-o))*r,c=i+a+(this.props.touch.end-(i+a))*r;this.startToFront=1-r<=0,this.endToFront=r-1<=0;const u=Tc(this.body.hiddenDates,l,1-r,!0),h=Tc(this.body.hiddenDates,c,r-1,!0);(u!=l||h!=c)&&(this.props.touch.start=u,this.props.touch.end=h,this.scaleOffset=1-e.scale,l=u,c=h);const d={animation:!1,byUser:!0,event:e};this.setRange(l,c,d),this.startToFront=!1,this.endToFront=!0}_isInsideRange(e){const r=e.center?e.center.x:e.clientX,i=this.body.dom.centerContainer.getBoundingClientRect(),s=this.options.rtl?r-i.left:i.right-r,o=this.body.util.toTime(s);return o>=this.start&&o<=this.end}_pointerToDate(e){let r;const i=this.options.direction;if(OV(i),i=="horizontal")return this.body.util.toTime(e.x).valueOf();{const s=this.body.domProps.center.height;return r=this.conversion(s),e.y/r.scale+r.offset}}getPointer(e,r){const i=r.getBoundingClientRect();return this.options.rtl?{x:i.right-e.x,y:e.y-i.top}:{x:e.x-i.left,y:e.y-i.top}}zoom(e,r,i,s){r==null&&(r=(this.start+this.end)/2);const o=jm(this.body.hiddenDates,this.start,this.end),a=Hx(this.options.moment,this.body.hiddenDates,this,r),l=o-a;let c=r-a+(this.start-(r-a))*e,u=r+l+(this.end-(r+l))*e;this.startToFront=!(i>0),this.endToFront=!(-i>0);const h=Tc(this.body.hiddenDates,c,i,!0),d=Tc(this.body.hiddenDates,u,-i,!0);(h!=c||d!=u)&&(c=h,u=d);const f={animation:!1,byUser:!0,event:s};this.setRange(c,u,f),this.startToFront=!1,this.endToFront=!0}move(e){const r=this.end-this.start,i=this.start+r*e,s=this.end+r*e;this.start=i,this.end=s}moveTo(e){const i=(this.start+this.end)/2-e,s=this.start-i,o=this.end-i,a={animation:!1,byUser:!0,event:null};this.setRange(s,o,a)}destroy(){this.stopRolling()}}function OV(n){if(n!="horizontal"&&n!="vertical")throw new TypeError('Unknown direction "'.concat(n,'". Choose "horizontal" or "vertical".'))}var xM,IV;function BLe(){if(IV)return xM;IV=1,ane();var n=hn();return xM=n.setInterval,xM}var wM,RV;function ULe(){return RV||(RV=1,wM=BLe()),wM}var qLe=ULe(),WLe=ut(qLe),Ap=null;function fI(n,e){var r=e||{preventDefault:!1};if(n.Manager){var i=n,s=function(u,h){var d=Object.create(r);return h&&i.assign(d,h),fI(new i(u,d),d)};return i.assign(s,i),s.Manager=function(u,h){var d=Object.create(r);return h&&i.assign(d,h),fI(new i.Manager(u,d),d)},s}var o=Object.create(n),a=n.element;a.hammer||(a.hammer=[]),a.hammer.push(o),n.on("hammer.input",function(u){(r.preventDefault===!0||r.preventDefault===u.pointerType)&&u.preventDefault(),u.isFirst&&(Ap=u.target)}),o._handlers={},o.on=function(u,h){return l(u).forEach(function(d){var f=o._handlers[d];f||(o._handlers[d]=f=[],n.on(d,c)),f.push(h)}),o},o.off=function(u,h){return l(u).forEach(function(d){var f=o._handlers[d];f&&(f=h?f.filter(function(p){return p!==h}):[],f.length>0?o._handlers[d]=f:(n.off(d,c),delete o._handlers[d]))}),o},o.emit=function(u,h){Ap=h.target,n.emit(u,h)},o.destroy=function(){var u=n.element.hammer,h=u.indexOf(o);h!==-1&&u.splice(h,1),u.length||delete n.element.hammer,o._handlers={},n.destroy()};function l(u){return u.match(/[^ ]+/g)}function c(u){if(u.type!=="hammer.input"){if(u.srcEvent._handled||(u.srcEvent._handled={}),u.srcEvent._handled[u.type])return;u.srcEvent._handled[u.type]=!0}var h=!1;u.stopPropagation=function(){h=!0};var d=u.srcEvent.stopPropagation.bind(u.srcEvent);typeof d=="function"&&(u.srcEvent.stopPropagation=function(){d(),u.stopPropagation()}),u.firstTarget=Ap;for(var f=Ap.isConnected?Ap:u.target;f&&!h;){var p=f.hammer;if(p){for(var g,b=0;b<p.length;b++)if(g=p[b]._handlers[u.type],g)for(var y=0;y<g.length&&!h;y++)g[y](u)}f=f.parentNode}}return o}function HLe(){const n=()=>{};return{on:n,off:n,destroy:n,emit:n,get(){return{set:n}}}}let pI;if(typeof window<"u"){const n=window.Hammer||WN;pI=fI(n,{preventDefault:"mouse"})}else pI=function(){return HLe()};var Hr=pI;function lre(n,e){e.inputHandler=function(r){r.isFirst&&e(r)},n.on("hammer.input",e.inputHandler)}function VLe(n,e){return e.inputHandler=function(r){r.isFinal&&e(r)},n.on("hammer.input",e.inputHandler)}function YLe(n){const e="pan-y";return n.getTouchAction=function(){return[e]},n}class Ru{constructor(e,r,i,s,o){this.moment=o&&o.moment||Yr,this.options=o||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,r,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Et(s)?this.hiddenDates=s:s!=null?this.hiddenDates=[s]:this.hiddenDates=[],this.format=Ru.FORMAT}setMoment(e){this.moment=e,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}setFormat(e){const r=X.deepExtend({},Ru.FORMAT);this.format=X.deepExtend(r,e)}setRange(e,r,i){if(!(e instanceof Date)||!(r instanceof Date))throw"No legal start or end date in method setRange";this._start=e!=null?this.moment(e.valueOf()):Ii(),this._end=r!=null?this.moment(r.valueOf()):Ii(),this.autoScale&&this.setMinimumStep(i)}start(){this.current=this._start.clone(),this.roundToMinor()}roundToMinor(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current=this.current.year(this.step*Math.floor(this.current.year()/this.step)).month(0);case"month":this.current=this.current.date(1);case"week":case"day":case"weekday":this.current=this.current.hours(0);case"hour":this.current=this.current.minutes(0);case"minute":this.current=this.current.seconds(0);case"second":this.current=this.current.milliseconds(0)}if(this.step!=1){let e=this.current.clone();switch(this.scale){case"millisecond":this.current=this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current=this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current=this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current=this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current=this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current=this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current=this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current=this.current.subtract(this.current.year()%this.step,"year");break}e.isSame(this.current)||(this.current=this.moment(Tc(this.hiddenDates,this.current.valueOf(),-1,!0)))}}hasNext(){return this.current.valueOf()<=this._end.valueOf()}next(){const e=this.current.valueOf();switch(this.scale){case"millisecond":this.current=this.current.add(this.step,"millisecond");break;case"second":this.current=this.current.add(this.step,"second");break;case"minute":this.current=this.current.add(this.step,"minute");break;case"hour":this.current=this.current.add(this.step,"hour"),this.current.month()<6?this.current=this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&(this.current=this.current.add(this.step-this.current.hours()%this.step,"hour"));break;case"weekday":case"day":this.current=this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current=this.current.weekday(0).add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current=this.current.add(this.step,"week");else{const r=this.current.clone();r.add(1,"week"),r.isSame(this.current,"month")?this.current=this.current.add(this.step,"week"):this.current=this.current.add(this.step,"week").date(1)}break;case"month":this.current=this.current.add(this.step,"month");break;case"year":this.current=this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&(this.current=this.current.milliseconds(0));break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&(this.current=this.current.seconds(0));break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&(this.current=this.current.minutes(0));break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&(this.current=this.current.hours(0));break;case"weekday":case"day":this.current.date()<this.step+1&&(this.current=this.current.date(1));break;case"week":this.current.week()<this.step&&(this.current=this.current.week(1));break;case"month":this.current.month()<this.step&&(this.current=this.current.month(0));break}this.current.valueOf()==e&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,FLe(this.moment,this,e)}getCurrent(){return this.current.clone()}setScale(e){e&&typeof e.scale=="string"&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)}setAutoScale(e){this.autoScale=e}setMinimumStep(e){if(e==null)return;const r=1e3*60*60*24*30*12,i=1e3*60*60*24*30,s=1e3*60*60*24,o=1e3*60*60,a=1e3*60,l=1e3,c=1;r*1e3>e&&(this.scale="year",this.step=1e3),r*500>e&&(this.scale="year",this.step=500),r*100>e&&(this.scale="year",this.step=100),r*50>e&&(this.scale="year",this.step=50),r*10>e&&(this.scale="year",this.step=10),r*5>e&&(this.scale="year",this.step=5),r>e&&(this.scale="year",this.step=1),i*3>e&&(this.scale="month",this.step=3),i>e&&(this.scale="month",this.step=1),s*7>e&&this.options.showWeekScale&&(this.scale="week",this.step=1),s*2>e&&(this.scale="day",this.step=2),s>e&&(this.scale="day",this.step=1),s/2>e&&(this.scale="weekday",this.step=1),o*4>e&&(this.scale="hour",this.step=4),o>e&&(this.scale="hour",this.step=1),a*15>e&&(this.scale="minute",this.step=15),a*10>e&&(this.scale="minute",this.step=10),a*5>e&&(this.scale="minute",this.step=5),a>e&&(this.scale="minute",this.step=1),l*15>e&&(this.scale="second",this.step=15),l*10>e&&(this.scale="second",this.step=10),l*5>e&&(this.scale="second",this.step=5),l>e&&(this.scale="second",this.step=1),c*200>e&&(this.scale="millisecond",this.step=200),c*100>e&&(this.scale="millisecond",this.step=100),c*50>e&&(this.scale="millisecond",this.step=50),c*10>e&&(this.scale="millisecond",this.step=10),c*5>e&&(this.scale="millisecond",this.step=5),c>e&&(this.scale="millisecond",this.step=1)}static snap(e,r,i){let s=Yr(e);if(r=="year"){const o=s.year()+Math.round(s.month()/12);s=s.year(Math.round(o/i)*i).month(0).date(0).hours(0).minutes(0).seconds(0).milliseconds(0)}else if(r=="month")s.date()>15?s=s.date(1).add(1,"month"):s=s.date(1),s=s.hours(0).minutes(0).seconds(0).milliseconds(0);else if(r=="week")s.weekday()>2?s=s.weekday(0).add(1,"week"):s=s.weekday(0),s=s.hours(0).minutes(0).seconds(0).milliseconds(0);else if(r=="day"){switch(i){case 5:case 2:s=s.hours(Math.round(s.hours()/24)*24);break;default:s=s.hours(Math.round(s.hours()/12)*12);break}s=s.minutes(0).seconds(0).milliseconds(0)}else if(r=="weekday"){switch(i){case 5:case 2:s=s.hours(Math.round(s.hours()/12)*12);break;default:s=s.hours(Math.round(s.hours()/6)*6);break}s=s.minutes(0).seconds(0).milliseconds(0)}else if(r=="hour"){switch(i){case 4:s=s.minutes(Math.round(s.minutes()/60)*60);break;default:s=s.minutes(Math.round(s.minutes()/30)*30);break}s=s.seconds(0).milliseconds(0)}else if(r=="minute"){switch(i){case 15:case 10:s=s.minutes(Math.round(s.minutes()/5)*5).seconds(0);break;case 5:s=s.seconds(Math.round(s.seconds()/60)*60);break;default:s=s.seconds(Math.round(s.seconds()/30)*30);break}s=s.milliseconds(0)}else if(r=="second")switch(i){case 15:case 10:s=s.seconds(Math.round(s.seconds()/5)*5).milliseconds(0);break;case 5:s=s.milliseconds(Math.round(s.milliseconds()/1e3)*1e3);break;default:s=s.milliseconds(Math.round(s.milliseconds()/500)*500);break}else if(r=="millisecond"){const o=i>5?i/2:1;s=s.milliseconds(Math.round(s.milliseconds()/o)*o)}return s}isMajor(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}const e=this.moment(this.current);switch(this.scale){case"millisecond":return e.milliseconds()==0;case"second":return e.seconds()==0;case"minute":return e.hours()==0&&e.minutes()==0;case"hour":return e.hours()==0;case"weekday":case"day":return this.options.showWeekScale?e.isoWeekday()==1:e.date()==1;case"week":return e.date()==1;case"month":return e.month()==0;case"year":return!1;default:return!1}}getLabelMinor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.minorLabels=="function")return this.format.minorLabels(e,this.scale,this.step);const r=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(e.date()===1&&e.weekday()!==0)return"";default:return r&&r.length>0?this.moment(e).format(r):""}}getLabelMajor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.majorLabels=="function")return this.format.majorLabels(e,this.scale,this.step);const r=this.format.majorLabels[this.scale];return r&&r.length>0?this.moment(e).format(r):""}getClassName(){var e;const r=this.moment,i=this.moment(this.current),s=i.locale?i.locale("en"):i.lang("en"),o=this.step,a=[];function l(f){return f/o%2==0?" vis-even":" vis-odd"}function c(f){return f.isSame(Ii(),"day")?" vis-today":f.isSame(r().add(1,"day"),"day")?" vis-tomorrow":f.isSame(r().add(-1,"day"),"day")?" vis-yesterday":""}function u(f){return f.isSame(Ii(),"week")?" vis-current-week":""}function h(f){return f.isSame(Ii(),"month")?" vis-current-month":""}function d(f){return f.isSame(Ii(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":a.push(c(s)),a.push(l(s.milliseconds()));break;case"second":a.push(c(s)),a.push(l(s.seconds()));break;case"minute":a.push(c(s)),a.push(l(s.minutes()));break;case"hour":a.push(Bn(e="vis-h".concat(s.hours())).call(e,this.step==4?"-h"+(s.hours()+4):"")),a.push(c(s)),a.push(l(s.hours()));break;case"weekday":a.push("vis-".concat(s.format("dddd").toLowerCase())),a.push(c(s)),a.push(u(s)),a.push(l(s.date()));break;case"day":a.push("vis-day".concat(s.date())),a.push("vis-".concat(s.format("MMMM").toLowerCase())),a.push(c(s)),a.push(h(s)),a.push(this.step<=2?c(s):""),a.push(this.step<=2?"vis-".concat(s.format("dddd").toLowerCase()):""),a.push(l(s.date()-1));break;case"week":a.push("vis-week".concat(s.format("w"))),a.push(u(s)),a.push(l(s.week()));break;case"month":a.push("vis-".concat(s.format("MMMM").toLowerCase())),a.push(h(s)),a.push(l(s.month()));break;case"year":a.push("vis-year".concat(s.year())),a.push(d(s)),a.push(l(s.year()));break}return ht(a).call(a,String).join(" ")}}Ru.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};class Yx extends ac{constructor(e,r){super(),this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:X.extend({},Ru.FORMAT),moment:Yr,timeAxis:null},this.options=X.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(r)}setOptions(e){e&&(X.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),X.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.axis=e.orientation:typeof e.orientation=="object"&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&(typeof Yr.locale=="function"?Yr.locale(e.locale):Yr.lang(e.locale)))}_create(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}destroy(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}redraw(){const e=this.props,r=this.dom.foreground,i=this.dom.background,s=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,o=r.parentNode!==s;this._calculateCharSize();const a=this.options.showMinorLabels&&this.options.orientation.axis!=="none",l=this.options.showMajorLabels&&this.options.orientation.axis!=="none";e.minorLabelHeight=a?e.minorCharHeight:0,e.majorLabelHeight=l?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=r.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;const c=r.nextSibling,u=i.nextSibling;return r.parentNode&&r.parentNode.removeChild(r),i.parentNode&&i.parentNode.removeChild(i),r.style.height="".concat(this.props.height,"px"),this._repaintLabels(),c?s.insertBefore(r,c):s.appendChild(r),u?this.body.dom.backgroundVertical.insertBefore(i,u):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||o}_repaintLabels(){const e=this.options.orientation.axis,r=X.convert(this.body.range.start,"Number"),i=X.convert(this.body.range.end,"Number"),s=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();let o=s-Hx(this.options.moment,this.body.hiddenDates,this.body.range,s);o-=this.body.util.toTime(0).valueOf();const a=new Ru(new Date(r),new Date(i),o,this.body.hiddenDates,this.options);a.setMoment(this.options.moment),this.options.format&&a.setFormat(this.options.format),this.options.timeAxis&&a.setScale(this.options.timeAxis),this.step=a;const l=this.dom;l.redundant.lines=l.lines,l.redundant.majorTexts=l.majorTexts,l.redundant.minorTexts=l.minorTexts,l.lines=[],l.majorTexts=[],l.minorTexts=[];let c,u,h,d,f,p,g=0,b,y,v,w=0;const k=1e3;let _;for(a.start(),u=a.getCurrent(),d=this.body.util.toScreen(u);a.hasNext()&&w<k;){switch(w++,f=a.isMajor(),_=a.getClassName(),c=u,h=d,a.next(),u=a.getCurrent(),d=this.body.util.toScreen(u),b=g,g=d-h,a.scale){case"week":p=!0;break;default:p=g>=b*.4;break}if(this.options.showMinorLabels&&p){var S=this._repaintMinorText(h,a.getLabelMinor(c),e,_);S.style.width="".concat(g,"px")}f&&this.options.showMajorLabels?(h>0&&(v==null&&(v=h),S=this._repaintMajorText(h,a.getLabelMajor(c),e,_)),y=this._repaintMajorLine(h,g,e,_)):p?y=this._repaintMinorLine(h,g,e,_):y&&(y.style.width="".concat(Ri(y.style.width)+g,"px"))}if(w===k&&!AV&&(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to ".concat(k," lines.")),AV=!0),this.options.showMajorLabels){const C=this.body.util.toTime(0),E=a.getLabelMajor(C),P=E.length*(this.props.majorCharWidth||10)+10;(v==null||P<v)&&this._repaintMajorText(0,E,e,_)}Qe(X).call(X,this.dom.redundant,C=>{for(;C.length;){const E=C.pop();E&&E.parentNode&&E.parentNode.removeChild(E)}})}_repaintMinorText(e,r,i,s){let o=this.dom.redundant.minorTexts.shift();if(!o){const l=document.createTextNode("");o=document.createElement("div"),o.appendChild(l),this.dom.foreground.appendChild(o)}this.dom.minorTexts.push(o),o.innerHTML=X.xss(r);let a=i=="top"?this.props.majorLabelHeight:0;return this._setXY(o,e,a),o.className="vis-text vis-minor ".concat(s),o}_repaintMajorText(e,r,i,s){let o=this.dom.redundant.majorTexts.shift();if(!o){const l=document.createElement("div");o=document.createElement("div"),o.appendChild(l),this.dom.foreground.appendChild(o)}o.childNodes[0].innerHTML=X.xss(r),o.className="vis-text vis-major ".concat(s);let a=i=="top"?0:this.props.minorLabelHeight;return this._setXY(o,e,a),this.dom.majorTexts.push(o),o}_setXY(e,r,i){var s;const o=this.options.rtl?r*-1:r;e.style.transform=Bn(s="translate(".concat(o,"px, ")).call(s,i,"px)")}_repaintMinorLine(e,r,i,s){var o;let a=this.dom.redundant.lines.shift();a||(a=document.createElement("div"),this.dom.background.appendChild(a)),this.dom.lines.push(a);const l=this.props;a.style.width="".concat(r,"px"),a.style.height="".concat(l.minorLineHeight,"px");let c=i=="top"?l.majorLabelHeight:this.body.domProps.top.height,u=e-l.minorLineWidth/2;return this._setXY(a,u,c),a.className=Bn(o="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-minor ")).call(o,s),a}_repaintMajorLine(e,r,i,s){var o;let a=this.dom.redundant.lines.shift();a||(a=document.createElement("div"),this.dom.background.appendChild(a)),this.dom.lines.push(a);const l=this.props;a.style.width="".concat(r,"px"),a.style.height="".concat(l.majorLineHeight,"px");let c=i=="top"?0:this.body.domProps.top.height,u=e-l.majorLineWidth/2;return this._setXY(a,u,c),a.className=Bn(o="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-major ")).call(o,s),a}_calculateCharSize(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}var AV=!1;function GLe(n){var e=window,r={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(u){c(u,"keydown")},l=function(u){c(u,"keyup")},c=function(u,h){if(i[h][u.keyCode]!==void 0)for(var d=i[h][u.keyCode],f=0;f<d.length;f++)(d[f].shift===void 0||d[f].shift==!0&&u.shiftKey==!0||d[f].shift==!1&&u.shiftKey==!1)&&d[f].fn(u)};return r.bind=function(u,h,d){if(d===void 0&&(d="keydown"),s[u]===void 0)throw new Error("unsupported key: "+u);i[d][s[u].code]===void 0&&(i[d][s[u].code]=[]),i[d][s[u].code].push({fn:h,shift:s[u].shift})},r.bindAll=function(u,h){h===void 0&&(h="keydown");for(var d in s)s.hasOwnProperty(d)&&r.bind(d,u,h)},r.getKey=function(u){for(var h in s)if(s.hasOwnProperty(h)){if(u.shiftKey==!0&&s[h].shift==!0&&u.keyCode==s[h].code)return h;if(u.shiftKey==!1&&s[h].shift==!1&&u.keyCode==s[h].code)return h;if(u.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},r.unbind=function(u,h,d){if(d===void 0&&(d="keydown"),s[u]===void 0)throw new Error("unsupported key: "+u);if(h!==void 0){var f=[],p=i[d][s[u].code];if(p!==void 0)for(var g=0;g<p.length;g++)p[g].fn==h&&p[g].shift==s[u].shift||f.push(i[d][s[u].code][g]);i[d][s[u].code]=f}else i[d][s[u].code]=[]},r.reset=function(){i={keydown:{},keyup:{}}},r.destroy=function(){i={keydown:{},keyup:{}},e.removeEventListener("keydown",a,!0),e.removeEventListener("keyup",l,!0)},e.addEventListener("keydown",a,!0),e.addEventListener("keyup",l,!0),r}function gs(n){var e,r;this.active=!1,this.dom={container:n},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=Hr(this.dom.overlay),this.hammer.on("tap",Ee(e=this._onTapOverlay).call(e,this));var i=this,s=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Qe(s).call(s,function(o){i.hammer.on(o,function(a){a.stopPropagation()})}),document&&document.body&&(this.onClick=function(o){KLe(o.target,n)||i.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=GLe(),this.escListener=Ee(r=this.deactivate).call(r,this)}jN(gs.prototype);gs.current=null;gs.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};gs.prototype.activate=function(){var n;gs.current&&gs.current.deactivate(),gs.current=this,this.active=!0,this.dom.overlay.style.display="none",X.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),Ee(n=this.keycharm).call(n,"esc",this.escListener)};gs.prototype.deactivate=function(){gs.current===this&&(gs.current=null),this.active=!1,this.dom.overlay.style.display="",X.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};gs.prototype._onTapOverlay=function(n){this.activate(),n.stopPropagation()};function KLe(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}const o3={current:"current",time:"time",deleteSelected:"Delete selected"},XLe=o3,QLe=o3,a3={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},JLe=a3,ZLe=a3,l3={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},e8e=l3,t8e=l3,c3={current:"Aktuelle",time:"Zeit",deleteSelected:"Lsche Auswahl"},n8e=c3,r8e=c3,Q0={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},i8e=Q0,s8e=Q0,o8e=Q0,a8e=Q0,cre={current:"actual",time:"hora",deleteSelected:"Eliminar seleccin"},l8e=cre,ure={current:"",time:"",deleteSelected:" "},c8e=ure,dre={current:"",time:"",deleteSelected:" "},u8e=dre,hre={current:"aktualny",time:"czas",deleteSelected:"Usu wybrane"},d8e=hre,u3={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},h8e=u3,f8e=u3,fre={current:"gncel",time:"zaman",deleteSelected:"Seileni sil"},p8e=fre,pre={current:"",time:"",deleteSelected:""},m8e=pre,mre={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},g8e=mre,$1={current:"nvrende",time:"tid",deleteSelected:"Slett valgte"},v8e=$1,b8e=$1,y8e=$1,gre={current:"einamas",time:"laikas",deleteSelected:"Paalinti pasirinkt"},x8e=gre,yf={en:o3,en_EN:XLe,en_US:QLe,it:a3,it_IT:JLe,it_CH:ZLe,nl:l3,nl_NL:e8e,nl_BE:t8e,de:c3,de_DE:n8e,de_CH:r8e,fr:Q0,fr_FR:i8e,fr_CA:s8e,fr_BE:o8e,fr_CH:a8e,es:cre,es_ES:l8e,uk:ure,uk_UA:c8e,ru:dre,ru_RU:u8e,pl:hre,pl_PL:d8e,pt:u3,pt_BR:h8e,pt_PT:f8e,tr:fre,tr_TR:p8e,ja:pre,ja_JP:m8e,lt:gre,lt_LT:x8e,sv:mre,sv_SE:g8e,nb:$1,nn:b8e,nb_NO:v8e,nn_NO:y8e};class d3 extends ac{constructor(e,r){var i;super(),this.body=e,this.defaultOptions={moment:Yr,locales:yf,locale:"en",id:void 0,title:void 0},this.options=X.extend({},this.defaultOptions),this.setOptions(r),this.options.locales=X.extend({},yf,this.options.locales);const s=this.defaultOptions.locales[this.defaultOptions.locale];Qe(i=nr(this.options.locales)).call(i,o=>{this.options.locales[o]=X.extend({},s,this.options.locales[o])}),r&&r.time!=null?this.customTime=r.time:this.customTime=new Date,this.eventParams={},this._create()}setOptions(e){e&&X.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,e)}_create(){var e,r,i;const s=document.createElement("div");s["custom-time"]=this,s.className="vis-custom-time ".concat(this.options.id||""),s.style.position="absolute",s.style.top="0px",s.style.height="100%",this.bar=s;const o=document.createElement("div");o.style.position="relative",o.style.top="0px",this.options.rtl?o.style.right="-10px":o.style.left="-10px",o.style.height="100%",o.style.width="20px";function a(l){this.body.range._onMouseWheel(l)}o.addEventListener?(o.addEventListener("mousewheel",Ee(a).call(a,this),!1),o.addEventListener("DOMMouseScroll",Ee(a).call(a,this),!1)):o.attachEvent("onmousewheel",Ee(a).call(a,this)),s.appendChild(o),this.hammer=new Hr(o),this.hammer.on("panstart",Ee(e=this._onDragStart).call(e,this)),this.hammer.on("panmove",Ee(r=this._onDrag).call(r,this)),this.hammer.on("panend",Ee(i=this._onDragEnd).call(i,this)),this.hammer.get("pan").set({threshold:5,direction:Hr.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}destroy(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}redraw(){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));const r=this.body.util.toScreen(this.customTime);let i=this.options.locales[this.options.locale];i||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),i=this.options.locales.en);let s=this.options.title;if(s===void 0){var o;s=Bn(o="".concat(i.time,": ")).call(o,this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")),s=s.charAt(0).toUpperCase()+s.substring(1)}else typeof s=="function"&&(s=s.call(this,this.customTime));return this.options.rtl?this.bar.style.right="".concat(r,"px"):this.bar.style.left="".concat(r,"px"),this.bar.title=s,!1}hide(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}setCustomTime(e){this.customTime=X.convert(e,"Date"),this.redraw()}getCustomTime(){return new Date(this.customTime.valueOf())}setCustomMarker(e,r){if(this.marker&&this.bar.removeChild(this.marker),this.marker=document.createElement("div"),this.marker.className="vis-custom-time-marker",this.marker.innerHTML=X.xss(e),this.marker.style.position="absolute",r){var i;this.marker.setAttribute("contenteditable","true"),this.marker.addEventListener("pointerdown",()=>{this.marker.focus()}),this.marker.addEventListener("input",Ee(i=this._onMarkerChange).call(i,this)),this.marker.title=e,this.marker.addEventListener("blur",s=>{this.title!=s.target.innerHTML&&(this._onMarkerChanged(s),this.title=s.target.innerHTML)})}this.bar.appendChild(this.marker)}setCustomTitle(e){this.options.title=e}_onDragStart(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()}_onDrag(e){if(!this.eventParams.dragging)return;let r=this.options.rtl?-1*e.deltaX:e.deltaX;const i=this.body.util.toScreen(this.eventParams.customTime)+r,s=this.body.util.toTime(i),o=this.body.util.getScale(),a=this.body.util.getStep(),l=this.options.snap,c=l?l(s,o,a):s;this.setCustomTime(c),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation()}_onDragEnd(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation())}_onMarkerChange(e){this.body.emitter.emit("markerchange",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}_onMarkerChanged(e){this.body.emitter.emit("markerchanged",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}static customTimeFromTarget(e){let r=e.target;for(;r;){if(Object.prototype.hasOwnProperty.call(r,"custom-time"))return r["custom-time"];r=r.parentNode}return null}}class oh{_create(e){var r,i,s;this.dom={},this.dom.container=e,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",()=>{this.initialDrawDone===!0&&this._redraw()}),this.on("rangechanged",()=>{this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}),this.on("touch",Ee(r=this._onTouch).call(r,this)),this.on("panmove",Ee(i=this._onDrag).call(i,this));const o=this;this._origRedraw=Ee(s=this._redraw).call(s,this),this._redraw=X.throttle(this._origRedraw),this.on("_change",g=>{o.itemSet&&o.itemSet.initialItemSetDrawn&&g&&g.queue==!0?o._redraw():o._origRedraw()}),this.hammer=new Hr(this.dom.root);const a=this.hammer.get("pinch").set({enable:!0});a&&YLe(a),this.hammer.get("pan").set({threshold:5,direction:Hr.DIRECTION_ALL}),this.timelineListeners={};const l=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Qe(l).call(l,g=>{const b=y=>{o.isActive()&&o.emit(g,y)};o.hammer.on(g,b),o.timelineListeners[g]=b}),lre(this.hammer,g=>{o.emit("touch",g)}),VLe(this.hammer,g=>{o.emit("release",g)});function c(g){if(!this.isActive())return;if(this.emit("mousewheel",g),this.options.preferZoom){if(!this.options.zoomKey||g[this.options.zoomKey])return}else if(this.options.zoomKey&&g[this.options.zoomKey])return;if(!this.options.verticalScroll&&!this.options.horizontalScroll)return;let b=0,y=0;"detail"in g&&(y=g.detail*-1),"wheelDelta"in g&&(y=g.wheelDelta),"wheelDeltaY"in g&&(y=g.wheelDeltaY),"wheelDeltaX"in g&&(b=g.wheelDeltaX*-1),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(b=y*-1,y=0),"deltaY"in g&&(y=g.deltaY*-1),"deltaX"in g&&(b=g.deltaX);var v=40,w=800;g.deltaMode&&(g.deltaMode===1?(b*=v,y*=v):(b*=v,y*=w));const k=this.options.verticalScroll,_=Math.abs(y)>=Math.abs(b),S=this.options.horizontalScroll&&this.options.horizontalScrollKey&&g[this.options.horizontalScrollKey];if(k&&_&&!S){const C=this.props.scrollTop,E=C+y;this._setScrollTop(E)!==C&&(this._redraw(),this.emit("scroll",g),g.preventDefault());return}if(this.options.horizontalScroll){this.range.stopRolling();let E=(_?y:b)/120*(this.range.end-this.range.start)/20;this.options.horizontalScrollInvert&&_&&(E=-E);const P=this.range.start+E,O=this.range.end+E,M={animation:!1,byUser:!0,event:g};this.range.setRange(P,O,M),g.preventDefault();return}}const u="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(u,Ee(c).call(c,this),!1),this.dom.top.addEventListener(u,Ee(c).call(c,this),!1),this.dom.bottom.addEventListener(u,Ee(c).call(c,this),!1);function h(g){if(o.options.verticalScroll&&(g.preventDefault(),o.isActive())){const b=-g.target.scrollTop;o._setScrollTop(b),o._redraw(),o.emit("scrollSide",g)}}this.dom.left.parentNode.addEventListener("scroll",Ee(h).call(h,this)),this.dom.right.parentNode.addEventListener("scroll",Ee(h).call(h,this));let d=!1;function f(g){var b;if(g.preventDefault&&(o.emit("dragover",o.getEventProperties(g)),g.preventDefault()),nn(b=g.target.className).call(b,"timeline")>-1&&!d)return g.dataTransfer.dropEffect="move",d=!0,!1}function p(g){g.preventDefault&&g.preventDefault(),g.stopPropagation&&g.stopPropagation();try{var b=JSON.parse(g.dataTransfer.getData("text"));if(!b||!b.content)return}catch{return!1}return d=!1,g.center={x:g.clientX,y:g.clientY},b.target!=="item"?o.itemSet._onAddItem(g):o.itemSet._onDropObjectOnItem(g),o.emit("drop",o.getEventProperties(g)),!1}if(this.dom.center.addEventListener("dragover",Ee(f).call(f,this),!1),this.dom.center.addEventListener("drop",Ee(p).call(p,this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root),e.appendChild(this.dom.loadingScreen)}setOptions(e){var r;if(e){const a=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll","longSelectPressTime","snap"];if(X.selectiveExtend(a,this.options,e),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),typeof this.options.orientation!="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation={item:e.orientation,axis:e.orientation}:typeof e.orientation=="object"&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){const l=this.timeAxis2=new Yx(this.body,this.options);l.setOptions=c=>{const u=c?X.extend({},c):{};u.orientation="top",Yx.prototype.setOptions.call(l,u)},this.components.push(l)}}else if(this.timeAxis2){var i;const l=nn(i=this.components).call(i,this.timeAxis2);if(l!==-1){var s;Vr(s=this.components).call(s,l,1)}this.timeAxis2.destroy(),this.timeAxis2=null}typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&s3(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new gs(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(Qe(r=this.components).call(r,a=>a.setOptions(e)),"configure"in e){var o;this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);const a=X.deepExtend({},this.options);Qe(o=this.components).call(o,l=>{X.deepExtend(a,l.options)}),this.configurator.setModuleOptions({global:a})}this._redraw()}isActive(){return!this.activator||this.activator.active}destroy(){var e;this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(const r in this.timelineListeners)Object.prototype.hasOwnProperty.call(this.timelineListeners,r)&&delete this.timelineListeners[r];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,Qe(e=this.components).call(e,r=>r.destroy()),this.body=null}setCustomTime(e,r){var i;const s=ht(i=this.customTimes).call(i,o=>r===o.options.id);if(s.length===0)throw new Error("No custom time bar found with id ".concat(ui(r)));s.length>0&&s[0].setCustomTime(e)}getCustomTime(e){var r;const i=ht(r=this.customTimes).call(r,s=>s.options.id===e);if(i.length===0)throw new Error("No custom time bar found with id ".concat(ui(e)));return i[0].getCustomTime()}setCustomTimeMarker(e,r,i){var s;const o=ht(s=this.customTimes).call(s,a=>a.options.id===r);if(o.length===0)throw new Error("No custom time bar found with id ".concat(ui(r)));o.length>0&&o[0].setCustomMarker(e,i)}setCustomTimeTitle(e,r){var i;const s=ht(i=this.customTimes).call(i,o=>o.options.id===r);if(s.length===0)throw new Error("No custom time bar found with id ".concat(ui(r)));if(s.length>0)return s[0].setCustomTitle(e)}getEventProperties(e){return{event:e}}addCustomTime(e,r){var i;const s=e!==void 0?X.convert(e,"Date"):new Date;if(t3(i=this.customTimes).call(i,l=>l.options.id===r))throw new Error("A custom time with id ".concat(ui(r)," already exists"));const a=new d3(this.body,X.extend({},this.options,{time:s,id:r,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(a),this.components.push(a),this._redraw(),r}removeCustomTime(e){var r;const i=ht(r=this.customTimes).call(r,s=>s.options.id===e);if(i.length===0)throw new Error("No custom time bar found with id ".concat(ui(e)));Qe(i).call(i,s=>{var o,a,l,c;Vr(o=this.customTimes).call(o,nn(a=this.customTimes).call(a,s),1),Vr(l=this.components).call(l,nn(c=this.components).call(c,s),1),s.destroy()})}getVisibleItems(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}getItemsAtCurrentTime(e){return this.time=e,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}getVisibleGroups(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}fit(e,r){const i=this.getDataRange();if(i.min===null&&i.max===null)return;const s=i.max-i.min,o=new Date(i.min.valueOf()-s*.01),a=new Date(i.max.valueOf()+s*.01),l=e&&e.animation!==void 0?e.animation:!0;this.range.setRange(o,a,{animation:l},r)}getDataRange(){throw new Error("Cannot invoke abstract method getDataRange")}setWindow(e,r,i,s){typeof arguments[2]=="function"&&(s=arguments[2],i={});let o,a;arguments.length==1?(a=arguments[0],o=a.animation!==void 0?a.animation:!0,this.range.setRange(a.start,a.end,{animation:o})):arguments.length==2&&typeof arguments[1]=="function"?(a=arguments[0],s=arguments[1],o=a.animation!==void 0?a.animation:!0,this.range.setRange(a.start,a.end,{animation:o},s)):(o=i&&i.animation!==void 0?i.animation:!0,this.range.setRange(e,r,{animation:o},s))}moveTo(e,r,i){typeof arguments[1]=="function"&&(i=arguments[1],r={});const s=this.range.end-this.range.start,o=X.convert(e,"Date").valueOf(),a=o-s/2,l=o+s/2,c=r&&r.animation!==void 0?r.animation:!0;this.range.setRange(a,l,{animation:c},i)}getWindow(){const e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}}zoomIn(e,r,i){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(i=arguments[1],r={});const s=this.getWindow(),o=s.start.valueOf(),a=s.end.valueOf(),l=a-o,c=l/(1+e),u=(l-c)/2,h=o+u,d=a-u;this.setWindow(h,d,r,i)}zoomOut(e,r,i){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(i=arguments[1],r={});const s=this.getWindow(),o=s.start.valueOf(),a=s.end.valueOf(),l=a-o,c=o-l*e/2,u=a+l*e/2;this.setWindow(c,u,r,i)}redraw(){this._redraw()}_redraw(){var e;this.redrawCount++;const r=this.dom;if(!r||!r.container||r.root.offsetWidth==0)return;let i=!1;const s=this.options,o=this.props;Wx(this.options.moment,this.body,this.options.hiddenDates),s.orientation=="top"?(X.addClassName(r.root,"vis-top"),X.removeClassName(r.root,"vis-bottom")):(X.removeClassName(r.root,"vis-top"),X.addClassName(r.root,"vis-bottom")),s.rtl?(X.addClassName(r.root,"vis-rtl"),X.removeClassName(r.root,"vis-ltr")):(X.addClassName(r.root,"vis-ltr"),X.removeClassName(r.root,"vis-rtl")),r.root.style.maxHeight=X.option.asSize(s.maxHeight,""),r.root.style.minHeight=X.option.asSize(s.minHeight,""),r.root.style.width=X.option.asSize(s.width,"");const a=r.root.offsetWidth;o.border.left=1,o.border.right=1,o.border.top=1,o.border.bottom=1,o.center.height=r.center.offsetHeight,o.left.height=r.left.offsetHeight,o.right.height=r.right.offsetHeight,o.top.height=r.top.clientHeight||-o.border.top,o.bottom.height=Math.round(r.bottom.getBoundingClientRect().height)||r.bottom.clientHeight||-o.border.bottom;const l=Math.max(o.left.height,o.center.height,o.right.height),c=o.top.height+l+o.bottom.height+o.border.top+o.border.bottom;r.root.style.height=X.option.asSize(s.height,"".concat(c,"px")),o.root.height=r.root.offsetHeight,o.background.height=o.root.height;const u=o.root.height-o.top.height-o.bottom.height;o.centerContainer.height=u,o.leftContainer.height=u,o.rightContainer.height=o.leftContainer.height,o.root.width=a,o.background.width=o.root.width,this.initialDrawDone||(o.scrollbarWidth=X.getScrollBarWidth());const h=r.leftContainer.clientWidth,d=r.rightContainer.clientWidth;s.verticalScroll?s.rtl?(o.left.width=h||-o.border.left,o.right.width=d+o.scrollbarWidth||-o.border.right):(o.left.width=h+o.scrollbarWidth||-o.border.left,o.right.width=d||-o.border.right):(o.left.width=h||-o.border.left,o.right.width=d||-o.border.right),this._setDOM();let f=this._updateScrollTop();s.orientation.item!="top"&&(f+=Math.max(o.centerContainer.height-o.center.height-o.border.top-o.border.bottom,0)),r.center.style.transform="translateY(".concat(f,"px)");const p=o.scrollTop==0?"hidden":"",g=o.scrollTop==o.scrollTopMin?"hidden":"";r.shadowTop.style.visibility=p,r.shadowBottom.style.visibility=g,r.shadowTopLeft.style.visibility=p,r.shadowBottomLeft.style.visibility=g,r.shadowTopRight.style.visibility=p,r.shadowBottomRight.style.visibility=g,s.verticalScroll&&(r.rightContainer.className="vis-panel vis-right vis-vertical-scroll",r.leftContainer.className="vis-panel vis-left vis-vertical-scroll",r.shadowTopRight.style.visibility="hidden",r.shadowBottomRight.style.visibility="hidden",r.shadowTopLeft.style.visibility="hidden",r.shadowBottomLeft.style.visibility="hidden",r.left.style.top="0px",r.right.style.top="0px"),(!s.verticalScroll||o.center.height<o.centerContainer.height)&&(r.left.style.top="".concat(f,"px"),r.right.style.top="".concat(f,"px"),r.rightContainer.className=r.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),r.leftContainer.className=r.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),o.left.width=h||-o.border.left,o.right.width=d||-o.border.right,this._setDOM());const b=o.center.height>o.centerContainer.height;this.hammer.get("pan").set({direction:b?Hr.DIRECTION_ALL:Hr.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),Qe(e=this.components).call(e,v=>{i=v.redraw()||i});const y=5;if(i)if(this.redrawCount<y){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}_setDOM(){const e=this.props,r=this.dom;e.leftContainer.width=e.left.width,e.rightContainer.width=e.right.width;const i=e.root.width-e.left.width-e.right.width;e.center.width=i,e.centerContainer.width=i,e.top.width=i,e.bottom.width=i,r.background.style.height="".concat(e.background.height,"px"),r.backgroundVertical.style.height="".concat(e.background.height,"px"),r.backgroundHorizontal.style.height="".concat(e.centerContainer.height,"px"),r.centerContainer.style.height="".concat(e.centerContainer.height,"px"),r.leftContainer.style.height="".concat(e.leftContainer.height,"px"),r.rightContainer.style.height="".concat(e.rightContainer.height,"px"),r.background.style.width="".concat(e.background.width,"px"),r.backgroundVertical.style.width="".concat(e.centerContainer.width,"px"),r.backgroundHorizontal.style.width="".concat(e.background.width,"px"),r.centerContainer.style.width="".concat(e.center.width,"px"),r.top.style.width="".concat(e.top.width,"px"),r.bottom.style.width="".concat(e.bottom.width,"px"),r.background.style.left="0",r.background.style.top="0",r.backgroundVertical.style.left="".concat(e.left.width+e.border.left,"px"),r.backgroundVertical.style.top="0",r.backgroundHorizontal.style.left="0",r.backgroundHorizontal.style.top="".concat(e.top.height,"px"),r.centerContainer.style.left="".concat(e.left.width,"px"),r.centerContainer.style.top="".concat(e.top.height,"px"),r.leftContainer.style.left="0",r.leftContainer.style.top="".concat(e.top.height,"px"),r.rightContainer.style.left="".concat(e.left.width+e.center.width,"px"),r.rightContainer.style.top="".concat(e.top.height,"px"),r.top.style.left="".concat(e.left.width,"px"),r.top.style.top="0",r.bottom.style.left="".concat(e.left.width,"px"),r.bottom.style.top="".concat(e.top.height+e.centerContainer.height,"px"),r.center.style.left="0",r.left.style.left="0",r.right.style.left="0"}setCurrentTime(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)}getCurrentTime(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}_toTime(e){return MV(this,e,this.props.center.width)}_toGlobalTime(e){return MV(this,e,this.props.root.width)}_toScreen(e){return PV(this,e,this.props.center.width)}_toGlobalScreen(e){return PV(this,e,this.props.root.width)}_initAutoResize(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}_startAutoResize(){const e=this;this._stopAutoResize(),this._onResize=()=>{if(e.options.autoResize!=!0){e._stopAutoResize();return}if(e.dom.root){const r=e.dom.root.offsetHeight,i=e.dom.root.offsetWidth;(i!=e.props.lastWidth||r!=e.props.lastHeight)&&(e.props.lastWidth=i,e.props.lastHeight=r,e.props.scrollbarWidth=X.getScrollBarWidth(),e.body.emitter.emit("_change"))}},window.addEventListener("resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=WLe(this._onResize,1e3)}_stopAutoResize(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(window.removeEventListener("resize",this._onResize),this._onResize=null)}_onTouch(){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}_onPinch(){this.touch.allowDragging=!1}_onDrag(e){if(!e||!this.touch.allowDragging)return;const r=e.deltaY,i=this._getScrollTop(),s=this._setScrollTop(this.touch.initialScrollTop+r);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),s!=i&&this.emit("verticalDrag")}_setScrollTop(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop}_updateScrollTop(){const e=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return e!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}_getScrollTop(){return this.props.scrollTop}_createConfigurator(){throw new Error("Cannot invoke abstract method _createConfigurator")}}jN(oh.prototype);class vre extends ac{constructor(e,r){var i;super(),this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:Yr,locales:yf,locale:"en"},this.options=X.extend({},this.defaultOptions),this.setOptions(r),this.options.locales=X.extend({},yf,this.options.locales);const s=this.defaultOptions.locales[this.defaultOptions.locale];Qe(i=nr(this.options.locales)).call(i,o=>{this.options.locales[o]=X.extend({},s,this.options.locales[o])}),this.offset=0,this._create()}_create(){const e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e}destroy(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}setOptions(e){e&&X.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,e)}redraw(){if(this.options.showCurrentTime){var e,r;const i=this.body.dom.backgroundVertical;this.bar.parentNode!=i&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),i.appendChild(this.bar),this.start());let s=this.options.moment(Ii()+this.offset);this.options.alignCurrentTime&&(s=s.startOf(this.options.alignCurrentTime));const o=this.body.util.toScreen(s);let a=this.options.locales[this.options.locale];a||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),a=this.options.locales.en);let l=Bn(e=Bn(r="".concat(a.current," ")).call(r,a.time,": ")).call(e,s.format("dddd, MMMM Do YYYY, H:mm:ss"));l=l.charAt(0).toUpperCase()+l.substring(1),this.options.rtl?this.bar.style.transform="translateX(".concat(o*-1,"px)"):this.bar.style.transform="translateX(".concat(o,"px)"),this.bar.title=l}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}start(){const e=this;function r(){e.stop();let s=1/e.body.range.conversion(e.body.domProps.center.width).scale/10;s<30&&(s=30),s>1e3&&(s=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=Rr(r,s)}r()}stop(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}setCurrentTime(e){const r=X.convert(e,"Date").valueOf(),i=Ii();this.offset=r-i,this.redraw()}getCurrentTime(){return new Date(Ii()+this.offset)}}var NV={},jV;function w8e(){if(jV)return NV;jV=1;var n=lt(),e=ic().find,r=U0(),i="find",s=!0;return i in[]&&Array(1)[i](function(){s=!1}),n({target:"Array",proto:!0,forced:s},{find:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),r(i),NV}var _M,LV;function _8e(){if(LV)return _M;LV=1,w8e();var n=Fn();return _M=n("Array","find"),_M}var SM,FV;function S8e(){if(FV)return SM;FV=1;var n=vn(),e=_8e(),r=Array.prototype;return SM=function(i){var s=i.find;return i===r||n(r,i)&&s===r.find?e:s},SM}var kM,$V;function k8e(){if($V)return kM;$V=1;var n=S8e();return kM=n,kM}var CM,zV;function C8e(){return zV||(zV=1,CM=k8e()),CM}var E8e=C8e(),T8e=ut(E8e);const Mi=.001;function P8e(n){Hn(n).call(n,(e,r)=>e.data.start-r.data.start)}function M8e(n){Hn(n).call(n,(e,r)=>{const i="end"in e.data?e.data.end:e.data.start,s="end"in r.data?r.data.end:r.data.start;return i-s})}function BV(n,e,r,i){return h3(n,e.item,!1,o=>o.stack&&(r||o.top===null),o=>o.stack,()=>e.axis,i)===null}function D8e(n,e,r){const i=h3(n,e.item,!1,s=>s.stack,()=>!0,s=>s.baseTop);r.height=i-r.top+.5*e.item.vertical}function O8e(n,e,r,i){for(let s=0;s<n.length;s++){if(n[s].data.subgroup==null){n[s].top=e.item.vertical;continue}if(n[s].data.subgroup===void 0||!i)continue;let o=0;for(const a in r)!Object.prototype.hasOwnProperty.call(r,a)||r[a].visible!==!0||r[a].index>=r[n[s].data.subgroup].index||(o+=r[a].height,r[n[s].data.subgroup].top=o);n[s].top=o+.5*e.item.vertical}i||I8e(n,e,r)}function I8e(n,e,r){var i;h3(Hn(i=AN(r)).call(i,(s,o)=>s.index>o.index?1:s.index<o.index?-1:0),{vertical:0},!0,()=>!0,()=>!0,()=>0);for(let s=0;s<n.length;s++)n[s].data.subgroup!==void 0&&(n[s].top=r[n[s].data.subgroup].top+.5*e.item.vertical)}function UV(n,e,r){let i=!1;const s=[];for(let o in r)Object.prototype.hasOwnProperty.call(r[o],"index")?s[r[o].index]=o:s.push(o);for(let o=0;o<s.length;o++){let a=s[o];if(!Object.prototype.hasOwnProperty.call(r,a))continue;i=i||r[a].stack,r[a].top=0;for(const c in r)r[c].visible&&r[a].index>r[c].index&&(r[a].top+=r[c].height);const l=n[a];for(let c=0;c<l.length;c++)l[c].data.subgroup!==void 0&&(l[c].top=r[l[c].data.subgroup].top+.5*e.item.vertical,r[a].stack&&(l[c].baseTop=l[c].top));i&&r[a].stack&&D8e(n[a],e,r[a])}}function h3(n,e,r,i,s,o,a){let l=w=>w.start,c=w=>w.end;r||(!!(n[0]&&n[0].options.rtl)?l=k=>k.right:l=k=>k.left,c=k=>l(k)+k.width+e.horizontal);const u=[],h=[];let d=null,f=0;for(const w of n)if(i(w))u.push(w);else if(s(w)){const k=l(w);d!==null&&k<d-Mi&&(f=0),d=k,f=Rb(h,_=>l(_)-Mi>k,f),Vr(h).call(h,f,0,w),f++}d=null;let p=null;f=0;let g=0,b=0,y=0;for(;u.length>0;){var v;const w=u.shift();w.top=o(w);const k=l(w),_=c(w);d!==null&&k<d-Mi&&(g=0,b=0,f=0,p=null),(d===null||k>d+Mi)&&(g=Rb(h,E=>k<c(E)-Mi,g)),d=k,(p===null||p<_-Mi)&&(b=Rb(h,E=>_<l(E)-Mi,Math.max(g,b))),p!==null&&p-Mi>_&&(b=A8e(h,E=>_+Mi>=l(E),g,b)+1),p=_;const S=Hn(v=N8e(h,E=>k<c(E)-Mi,g,b)).call(v,(E,P)=>E.top-P.top);for(let E=0;E<S.length;E++){const P=S[E];R8e(w,P,e)&&(w.top=P.top+P.height+e.vertical)}s(w)&&(f=Rb(h,E=>l(E)-Mi>k,f),Vr(h).call(h,f,0,w),f<g&&g++,f<=b&&b++,f++);const C=w.top+w.height;if(C>y&&(y=C),a&&a())return null}return y}function R8e(n,e,r){return n.top-r.vertical+Mi<e.top+e.height&&n.top+n.height+r.vertical-Mi>e.top}function Rb(n,e,r){r||(r=0);for(let i=r;i<n.length;i++)if(e(n[i]))return i;return n.length}function A8e(n,e,r,i){r||(r=0),i||(i=n.length);for(let s=i-1;s>=r;s--)if(e(n[s]))return s;return r-1}function N8e(n,e,r,i){r||(r=0),i?i=Math.min(i,n.length):i=n.length;const s=[];for(let o=r;o<i;o++)e(n[o])&&s.push(n[o]);return s}const j8e="__background__",qV={BACKGROUND:j8e};let mI=class{constructor(e,r,i){if(this.groupId=e,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=r&&r.subgroupOrder,this.itemSet=i,this.isVisible=null,this.height=0,this.stackDirty=!0,this._disposeCallbacks=[],r&&r.nestedGroups&&(this.nestedGroups=r.nestedGroups,r.showNested==!1?this.showNested=!1:this.showNested=!0),r&&r.subgroupStack)if(typeof r.subgroupStack=="boolean")this.doInnerStack=r.subgroupStack,this.subgroupStackAll=r.subgroupStack;else for(const o in r.subgroupStack)Object.prototype.hasOwnProperty.call(r.subgroupStack,o)&&(this.subgroupStack[o]=r.subgroupStack[o],this.doInnerStack=this.doInnerStack||r.subgroupStack[o]);r&&r.heightMode?this.heightMode=r.heightMode:this.heightMode=i.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;const s=()=>{this.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",s),this._disposeCallbacks.push(()=>{this.itemSet.body.emitter.off("checkRangedItems",s)}),this._create(),this.setData(r)}_create(){const e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;const r=document.createElement("div");r.className="vis-inner",e.appendChild(r),this.dom.inner=r;const i=document.createElement("div");i.className="vis-group",i["vis-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}setData(e){if(this.itemSet.groupTouchParams.isDragging)return;let r,i;if(e&&e.subgroupVisibility)for(const a in e.subgroupVisibility)Object.prototype.hasOwnProperty.call(e.subgroupVisibility,a)&&(this.subgroupVisibility[a]=e.subgroupVisibility[a]);if(this.itemSet.options&&this.itemSet.options.groupTemplate){var s;i=Ee(s=this.itemSet.options.groupTemplate).call(s,this),r=i(e,this.dom.inner)}else r=e&&e.content;if(r instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(r)}else r instanceof Object&&r.isReactComponent||(r instanceof Object?i(e,this.dom.inner):r!=null?this.dom.inner.innerHTML=X.xss(r):this.dom.inner.innerHTML=X.xss(this.groupId||""));this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?X.removeClassName(this.dom.inner,"vis-hidden"):X.addClassName(this.dom.inner,"vis-hidden"),e&&e.nestedGroups?((!this.nestedGroups||this.nestedGroups!=e.nestedGroups)&&(this.nestedGroups=e.nestedGroups),(e.showNested!==void 0||this.showNested===void 0)&&(e.showNested==!1?this.showNested=!1:this.showNested=!0),X.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(X.removeClassName(this.dom.label,"collapsed"),X.addClassName(this.dom.label,"expanded")):(X.removeClassName(this.dom.label,"expanded"),X.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,X.removeClassName(this.dom.label,"collapsed"),X.removeClassName(this.dom.label,"expanded"),X.removeClassName(this.dom.label,"vis-nesting-group")),e&&(e.treeLevel||e.nestedInGroup)?(X.addClassName(this.dom.label,"vis-nested-group"),e.treeLevel?X.addClassName(this.dom.label,"vis-group-level-"+e.treeLevel):X.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):X.addClassName(this.dom.label,"vis-group-level-0");const o=e&&e.className||null;o!=this.className&&(this.className&&(X.removeClassName(this.dom.label,this.className),X.removeClassName(this.dom.foreground,this.className),X.removeClassName(this.dom.background,this.className),X.removeClassName(this.dom.axis,this.className)),X.addClassName(this.dom.label,o),X.addClassName(this.dom.foreground,o),X.addClassName(this.dom.background,o),X.addClassName(this.dom.axis,o),this.className=o),this.style&&(X.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(X.addCssText(this.dom.label,e.style),this.style=e.style)}getLabelWidth(){return this.props.label.width}_didMarkerHeightChange(){const e=this.dom.marker.clientHeight;if(e!=this.lastMarkerHeight){this.lastMarkerHeight=e;const r={};let i=0;if(Qe(X).call(X,this.items,(o,a)=>{o.dirty=!0,o.displayed&&(r[a]=o.redraw(!0),i=r[a].length)}),i>0)for(let o=0;o<i;o++)Qe(X).call(X,r,a=>{a[o]()});return!0}else return!1}_calculateGroupSizeAndPosition(){const{offsetTop:e,offsetLeft:r,offsetWidth:i}=this.dom.foreground;this.top=e,this.right=r,this.width=i}_shouldBailItemsRedraw(){const e=this,r=this.itemSet.options.onTimeout,i={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:r&&r.timeoutMs,userBailFunction:r&&r.callback,shouldBailStackItems:this.shouldBailStackItems};let s=null;if(!this.itemSet.initialDrawDone){if(i.shouldBailStackItems)return!0;Math.abs(Ii()-new Date(i.relativeBailingTime))>i.bailTimeMs&&(i.userBailFunction&&this.itemSet.userContinueNotBail==null?i.userBailFunction(o=>{e.itemSet.userContinueNotBail=o,s=!o}):e.itemSet.userContinueNotBail==!1?s=!0:s=!1)}return s}_redrawItems(e,r,i,s){if(e||this.stackDirty||this.isVisible&&!r){var a,l,c,u,h,d;const v={byEnd:ht(a=this.orderedItems.byEnd).call(a,S=>!S.isCluster),byStart:ht(l=this.orderedItems.byStart).call(l,S=>!S.isCluster)},w={byEnd:[...new Ul(ht(c=Kt(u=this.orderedItems.byEnd).call(u,S=>S.cluster)).call(c,S=>!!S))],byStart:[...new Ul(ht(h=Kt(d=this.orderedItems.byStart).call(d,S=>S.cluster)).call(h,S=>!!S))]},k=()=>{var S,C;const E=this._updateItemsInRange(v,ht(S=this.visibleItems).call(S,O=>!O.isCluster),s),P=this._updateClustersInRange(w,ht(C=this.visibleItems).call(C,O=>O.isCluster),s);return[...E,...P]},_=S=>{let C={};for(const P in this.subgroups){var E;if(!Object.prototype.hasOwnProperty.call(this.subgroups,P))continue;const O=ht(E=this.visibleItems).call(E,M=>M.data.subgroup===P);C[P]=S?Hn(O).call(O,(M,R)=>S(M.data,R.data)):O}return C};if(typeof this.itemSet.options.order=="function"){const S=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const C=_(this.itemSet.options.order);UV(C,i,this.subgroups),this.visibleItems=k(),this._updateSubGroupHeights(i)}else{var f,p,g,b;this.visibleItems=k(),this._updateSubGroupHeights(i);const C=Hn(f=ht(p=Vf(g=this.visibleItems).call(g)).call(p,E=>E.isCluster||!E.isCluster&&!E.cluster)).call(f,(E,P)=>S.itemSet.options.order(E.data,P.data));this.shouldBailStackItems=BV(C,i,!0,Ee(b=this._shouldBailItemsRedraw).call(b,this))}}else if(this.visibleItems=k(),this._updateSubGroupHeights(i),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const S=_();UV(S,i,this.subgroups)}else{var y;this.shouldBailStackItems=BV(this.visibleItems,i,!0,Ee(y=this._shouldBailItemsRedraw).call(y,this))}else O8e(this.visibleItems,i,this.subgroups,this.itemSet.options.stackSubgroups);for(let S=0;S<this.visibleItems.length;S++)this.visibleItems[S].repositionX(),this.subgroupVisibility[this.visibleItems[S].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[S].data.subgroup]||this.visibleItems[S].hide());this.itemSet.options.cluster&&Qe(X).call(X,this.items,S=>{S.cluster&&S.displayed&&S.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}_didResize(e,r){e=X.updateProperty(this,"height",r)||e;const i=this.dom.inner.clientWidth,s=this.dom.inner.clientHeight;return e=X.updateProperty(this.props.label,"width",i)||e,e=X.updateProperty(this.props.label,"height",s)||e,e}_applyGroupHeight(e){this.dom.background.style.height="".concat(e,"px"),this.dom.foreground.style.height="".concat(e,"px"),this.dom.label.style.height="".concat(e,"px")}_updateItemsVerticalPosition(e){for(let r=0,i=this.visibleItems.length;r<i;r++){const s=this.visibleItems[r];s.repositionY(e),!this.isVisible&&this.groupId!=qV.BACKGROUND&&s.displayed&&s.hide()}}redraw(e,r,i,s){var o,a,l,c,u;let h=!1;const d=this.isVisible;let f;const p=[()=>{i=this._didMarkerHeightChange.call(this)||i},Ee(o=this._updateSubGroupHeights).call(o,this,r),Ee(a=this._calculateGroupSizeAndPosition).call(a,this),()=>{var g;this.isVisible=Ee(g=this._isGroupVisible).call(g,this)(e,r)},()=>{var g;Ee(g=this._redrawItems).call(g,this)(i,d,r,e)},Ee(l=this._updateSubgroupsSizes).call(l,this),()=>{var g;f=this.height=Ee(g=this._calculateHeight).call(g,this)(r)},Ee(c=this._calculateGroupSizeAndPosition).call(c,this),()=>{var g;h=Ee(g=this._didResize).call(g,this)(h,f)},()=>{var g;Ee(g=this._applyGroupHeight).call(g,this)(f)},()=>{var g;Ee(g=this._updateItemsVerticalPosition).call(g,this)(r)},Ee(u=()=>(!this.isVisible&&this.height&&(h=!1),h)).call(u,this)];if(s)return p;{let g;return Qe(p).call(p,b=>{g=b()}),g}}_updateSubGroupHeights(e){if(nr(this.subgroups).length>0){const r=this;this._resetSubgroups(),Qe(X).call(X,this.visibleItems,i=>{i.data.subgroup!==void 0&&(r.subgroups[i.data.subgroup].height=Math.max(r.subgroups[i.data.subgroup].height,i.height+e.item.vertical),r.subgroups[i.data.subgroup].visible=typeof this.subgroupVisibility[i.data.subgroup]>"u"?!0:!!this.subgroupVisibility[i.data.subgroup])})}}_isGroupVisible(e,r){return this.top<=e.body.domProps.centerContainer.height-e.body.domProps.scrollTop+r.axis&&this.top+this.height+r.axis>=-e.body.domProps.scrollTop}_calculateHeight(e){let r,i;if(this.heightMode==="fixed"?i=X.toArray(this.items):i=this.visibleItems,!this.isVisible&&this.height)r=Math.max(this.height,this.props.label.height);else if(i.length>0){let s=i[0].top,o=i[0].top+i[0].height;if(Qe(X).call(X,i,a=>{s=Math.min(s,a.top),o=Math.max(o,a.top+a.height)}),s>e.axis){const a=s-e.axis;o-=a,Qe(X).call(X,i,l=>{l.top-=a})}r=Math.ceil(o+e.item.vertical/2),this.heightMode!=="fitItems"&&(r=Math.max(r,this.props.label.height))}else r=this.props.label.height;return r}show(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}hide(){const e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);const r=this.dom.foreground;r.parentNode&&r.parentNode.removeChild(r);const i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);const s=this.dom.axis;s.parentNode&&s.parentNode.removeChild(s)}add(e){var r;if(this.items[e.id]=e,e.setParent(this),this.stackDirty=!0,e.data.subgroup!==void 0&&(this._addToSubgroup(e),this.orderSubgroups()),!hf(r=this.visibleItems).call(r,e)){const i=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,i)}}_addToSubgroup(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.data.subgroup;r!=null&&this.subgroups[r]===void 0&&(this.subgroups[r]={height:0,top:0,start:e.data.start,end:e.data.end||e.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[r]||!1},this.subgroupIndex++),new Date(e.data.start)<new Date(this.subgroups[r].start)&&(this.subgroups[r].start=e.data.start);const i=e.data.end||e.data.start;new Date(i)>new Date(this.subgroups[r].end)&&(this.subgroups[r].end=i),this.subgroups[r].items.push(e)}_updateSubgroupsSizes(){const e=this;if(e.subgroups)for(const i in e.subgroups){var r;if(!Object.prototype.hasOwnProperty.call(e.subgroups,i))continue;const s=e.subgroups[i].items[0].data.end||e.subgroups[i].items[0].data.start;let o=e.subgroups[i].items[0].data.start,a=s-1;Qe(r=e.subgroups[i].items).call(r,l=>{new Date(l.data.start)<new Date(o)&&(o=l.data.start);const c=l.data.end||l.data.start;new Date(c)>new Date(a)&&(a=c)}),e.subgroups[i].start=o,e.subgroups[i].end=new Date(a-1)}}orderSubgroups(){if(this.subgroupOrderer!==void 0){const e=[];if(typeof this.subgroupOrderer=="string"){for(const r in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,r)&&e.push({subgroup:r,sortField:this.subgroups[r].items[0].data[this.subgroupOrderer]});Hn(e).call(e,(r,i)=>r.sortField-i.sortField)}else if(typeof this.subgroupOrderer=="function"){for(const r in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,r)&&e.push(this.subgroups[r].items[0].data);Hn(e).call(e,this.subgroupOrderer)}if(e.length>0)for(let r=0;r<e.length;r++)this.subgroups[e[r].subgroup].index=r}}_resetSubgroups(){for(const e in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,e)&&(this.subgroups[e].visible=!1,this.subgroups[e].height=0)}remove(e){var r,i;delete this.items[e.id],e.setParent(null),this.stackDirty=!0;const s=nn(r=this.visibleItems).call(r,e);s!=-1&&Vr(i=this.visibleItems).call(i,s,1),e.data.subgroup!==void 0&&(this._removeFromSubgroup(e),this.orderSubgroups())}_removeFromSubgroup(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.data.subgroup;if(r!=null){const o=this.subgroups[r];if(o){var i;const a=nn(i=o.items).call(i,e);if(a>=0){var s;Vr(s=o.items).call(s,a,1),o.items.length?this._updateSubgroupsSizes():delete this.subgroups[r]}}}}removeFromDataSet(e){this.itemSet.removeItem(e.id)}order(){const e=X.toArray(this.items),r=[],i=[];for(let s=0;s<e.length;s++)e[s].data.end!==void 0&&i.push(e[s]),r.push(e[s]);this.orderedItems={byStart:r,byEnd:i},P8e(this.orderedItems.byStart),M8e(this.orderedItems.byEnd)}_updateItemsInRange(e,r,i){const s=[],o={};if(!this.isVisible&&this.height!==void 0&&this.groupId!=qV.BACKGROUND){for(let y=0;y<r.length;y++){var a=r[y];a.displayed&&a.hide()}return s}const l=(i.end-i.start)/4,c=i.start-l,u=i.end+l,h=y=>y<c?-1:y<=u?0:1,d=y=>{const{start:v,end:w}=y;return w<c?-1:v<=u?0:1};if(r.length>0)for(let y=0;y<r.length;y++)this._checkIfVisibleWithReference(r[y],s,o,i);const f=X.binarySearchCustom(e.byStart,h,"data","start");if(this._traceVisible(f,e.byStart,s,o,y=>y.data.start<c||y.data.start>u),this.checkRangedItems==!0){this.checkRangedItems=!1;for(let y=0;y<e.byEnd.length;y++)this._checkIfVisibleWithReference(e.byEnd[y],s,o,i)}else{const y=X.binarySearchCustom(e.byEnd,d,"data");this._traceVisible(y,e.byEnd,s,o,v=>v.data.end<c||v.data.start>u)}this._sortVisibleItems(e.byStart,s,o);const p={};let g=0;for(let y=0;y<s.length;y++){const v=s[y];v.displayed||(p[y]=v.redraw(!0),g=p[y].length)}if(g>0)for(let y=0;y<g;y++)Qe(X).call(X,p,v=>{v[y]()});for(let y=0;y<s.length;y++)s[y].repositionX();return s}_traceVisible(e,r,i,s,o){if(e!=-1){for(let a=e;a>=0;a--){let l=r[a];if(o(l))break;!(l.isCluster&&!l.hasItems())&&!l.cluster&&s[l.id]===void 0&&(s[l.id]=!0,i.unshift(l))}for(let a=e+1;a<r.length;a++){let l=r[a];if(o(l))break;!(l.isCluster&&!l.hasItems())&&!l.cluster&&s[l.id]===void 0&&(s[l.id]=!0,i.push(l))}}}_sortVisibleItems(e,r,i){r.length=0;for(let s=0;s<e.length;s++){let o=e[s];i[o.id]&&r.push(o)}}_checkIfVisible(e,r,i){e.isVisible(i)?(e.displayed||e.show(),e.repositionX(),r.push(e)):e.displayed&&e.hide()}_checkIfVisibleWithReference(e,r,i,s){e.isVisible(s)?i[e.id]===void 0&&(i[e.id]=!0,r.push(e)):e.displayed&&e.hide()}_updateClustersInRange(e,r,i){const s=[],o={};if(r.length>0)for(let h=0;h<r.length;h++)this._checkIfVisibleWithReference(r[h],s,o,i);for(let h=0;h<e.byStart.length;h++)this._checkIfVisibleWithReference(e.byStart[h],s,o,i);for(let h=0;h<e.byEnd.length;h++)this._checkIfVisibleWithReference(e.byEnd[h],s,o,i);const a={};let l=0;for(let h=0;h<s.length;h++){const d=s[h];d.displayed||(a[h]=d.redraw(!0),l=a[h].length)}if(l>0)for(var u=0;u<l;u++)Qe(X).call(X,a,function(h){h[u]()});for(let h=0;h<s.length;h++)s[h].repositionX();return s}changeSubgroup(e,r,i){this._removeFromSubgroup(e,r),this._addToSubgroup(e,i),this.orderSubgroups()}dispose(){this.hide();let e;for(;e=this._disposeCallbacks.pop();)e()}};class bre extends mI{constructor(e,r,i){super(e,r,i),this.width=0,this.height=0,this.top=0,this.left=0}redraw(e,r){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(let s=0,o=this.visibleItems.length;s<o;s++)this.visibleItems[s].repositionY(r);return!1}show(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}class Kf{constructor(e,r,i){var s;this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=r||{},this.defaultOptions={locales:yf,locale:"en"},this.options=X.extend({},this.defaultOptions,i),this.options.locales=X.extend({},yf,this.options.locales);const o=this.defaultOptions.locales[this.defaultOptions.locale];Qe(s=nr(this.options.locales)).call(s,a=>{this.options.locales[a]=X.extend({},o,this.options.locales[a])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=i&&i.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(e),this.editable=null,this._updateEditStatus()}select(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}unselect(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}setData(e){e.group!=null&&this.data.group!=e.group&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,e.group),this.setSelectability(e),this.parent&&(this.parent.stackDirty=!0),e.subgroup!=null&&this.data.subgroup!=e.subgroup&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,e.subgroup),this.data=e,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}setSelectability(e){e&&(this.selectable=typeof e.selectable>"u"?!0:!!e.selectable)}setParent(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e}isVisible(){return!1}show(){return!1}hide(){return!1}redraw(){}repositionX(){}repositionY(){}_repaintDragCenter(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){var e,r;const i=this,s=document.createElement("div");s.className="vis-drag-center",s.dragCenterItem=this,this.hammerDragCenter=new Hr(s),this.hammerDragCenter.on("tap",o=>{i.parent.itemSet.body.emitter.emit("click",{event:o,item:i.id})}),this.hammerDragCenter.on("doubletap",o=>{o.stopPropagation(),i.parent.itemSet._onUpdateItem(i),i.parent.itemSet.body.emitter.emit("doubleClick",{event:o,item:i.id})}),this.hammerDragCenter.on("panstart",o=>{o.stopPropagation(),i.parent.itemSet._onDragStart(o)}),this.hammerDragCenter.on("panmove",Ee(e=i.parent.itemSet._onDrag).call(e,i.parent.itemSet)),this.hammerDragCenter.on("panend",Ee(r=i.parent.itemSet._onDragEnd).call(r,i.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(s,this.dom.dragLeft):this.dom.box.appendChild(s):this.dom.point&&this.dom.point.appendChild(s),this.dom.dragCenter=s}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}_repaintDeleteButton(e){const r=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&r&&!this.dom.deleteButton){const i=this,s=document.createElement("div");this.options.rtl?s.className="vis-delete-rtl":s.className="vis-delete";let o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en),s.title=o.deleteSelected,this.hammerDeleteButton=new Hr(s).on("tap",a=>{a.stopPropagation(),i.parent.removeFromDataSet(i)}),e.appendChild(s),this.dom.deleteButton=s}else(!this.selected||!r)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}_repaintOnItemUpdateTimeTooltip(e){if(!this.options.tooltipOnItemUpdateTime)return;const r=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&r&&!this.dom.onItemUpdateTimeTooltip){const s=document.createElement("div");s.className="vis-onUpdateTime-tooltip",e.appendChild(s),this.dom.onItemUpdateTimeTooltip=s}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";const s=50,o=this.parent.itemSet.body.domProps.scrollTop;let a;this.options.orientation.item=="top"?a=this.top:a=this.parent.height-this.top-this.height,a+this.parent.top-s<-o?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top="".concat(this.height+2,"px")):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom="".concat(this.height+2,"px"));let c,u;if(this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template){var i;u=Ee(i=this.options.tooltipOnItemUpdateTime.template).call(i,this),c=u(this.data)}else c="start: ".concat(Yr(this.data.start).format("MM/DD/YYYY hh:mm")),this.data.end&&(c+="<br> end: ".concat(Yr(this.data.end).format("MM/DD/YYYY hh:mm")));this.dom.onItemUpdateTimeTooltip.innerHTML=X.xss(c)}}_getItemData(){return this.parent.itemSet.itemsData.get(this.id)}_updateContents(e){let r,i,s,o,a;const l=this._getItemData(),u=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate){var h;a=Ee(h=this.options.visibleFrameTemplate).call(h,this),o=X.xss(a(l,u))}else o="";if(u){if(o instanceof Object&&!(o instanceof Element))a(l,u);else if(i=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(o),i){if(o instanceof Element)u.innerHTML="",u.appendChild(o);else if(o!=null)u.innerHTML=X.xss(o);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.itemVisibleFrameContent=o}}if(this.options.template){var d;s=Ee(d=this.options.template).call(d,this),r=s(l,e,this.data)}else r=this.data.content;if(r instanceof Object&&!(r instanceof Element))s(l,e);else if(i=this._contentToString(this.content)!==this._contentToString(r),i){if(r instanceof Element)e.innerHTML="",e.appendChild(r);else if(r!=null)e.innerHTML=X.xss(r);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.content=r}}_updateDataAttributes(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){let r=[];if(Et(this.options.dataAttributes))r=this.options.dataAttributes;else if(this.options.dataAttributes=="all")r=nr(this.data);else return;for(const i of r){const s=this.data[i];s!=null?e.setAttribute("data-".concat(i),s):e.removeAttribute("data-".concat(i))}}}_updateStyle(e){this.style&&(X.removeCssText(e,this.style),this.style=null),this.data.style&&(X.addCssText(e,this.data.style),this.style=this.data.style)}_contentToString(e){return typeof e=="string"?e:e&&"outerHTML"in e?e.outerHTML:e}_updateEditStatus(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:typeof this.options.editable=="object"&&(this.editable={},X.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:typeof this.data.editable=="object"&&(this.editable={},X.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}getWidthLeft(){return 0}getWidthRight(){return 0}getTitle(){if(this.options.tooltip&&this.options.tooltip.template){var e;return Ee(e=this.options.tooltip.template).call(e,this)(this._getItemData(),this.data)}return this.data.title}}Kf.prototype.stack=!0;class L8e extends Kf{constructor(e,r,i){if(super(e,r,i),this.props={dot:{width:0,height:0},line:{width:0,height:0}},e&&e.start==null)throw new Error('Property "start" missing in item '.concat(e))}isVisible(e){if(this.cluster)return!1;let r;const i=this.data.align||this.options.align,s=this.width*e.getMillisecondsPerPixel();return i=="right"?r=this.data.start.getTime()>e.start&&this.data.start.getTime()-s<e.end:i=="left"?r=this.data.start.getTime()+s>e.start&&this.data.start.getTime()<e.end:r=this.data.start.getTime()+s/2>e.start&&this.data.start.getTime()-s/2<e.end,r}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const r=this.parent.dom.foreground;if(!r)throw new Error("Cannot redraw item: parent has no foreground container element");r.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){const r=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");r.appendChild(this.dom.dot)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,r=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box".concat(r),this.dom.line.className="vis-item vis-line".concat(r),this.dom.dot.className="vis-item vis-dot".concat(r)}}_getDomComponentsSizes(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=e.dot.height,this.props.dot.width=e.dot.width,this.props.line.width=e.line.width,this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}redraw(e){var r,i,s,o;let a;const l=[Ee(r=this._createDomElement).call(r,this),Ee(i=this._appendDomElement).call(i,this),Ee(s=this._updateDirtyDomComponents).call(s,this),()=>{this.dirty&&(a=this._getDomComponentsSizes())},()=>{if(this.dirty){var c;Ee(c=this._updateDomComponentsSizes).call(c,this)(a)}},Ee(o=this._repaintDomAdditionals).call(o,this)];if(e)return l;{let c;return Qe(l).call(l,u=>{c=u()}),c}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom;e.box.remove?e.box.remove():e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.remove?e.line.remove():e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.remove?e.dot.remove():e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}}repositionXY(){const e=this.options.rtl,r=function(i,s,o){var a;let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(s===void 0&&o===void 0)return;const c=l?s*-1:s;if(o===void 0){i.style.transform="translateX(".concat(c,"px)");return}if(s===void 0){i.style.transform="translateY(".concat(o,"px)");return}i.style.transform=Bn(a="translate(".concat(c,"px, ")).call(a,o,"px)")};r(this.dom.box,this.boxX,this.boxY,e),r(this.dom.dot,this.dotX,this.dotY,e),r(this.dom.line,this.lineX,this.lineY,e)}repositionX(){const e=this.conversion.toScreen(this.data.start),r=this.data.align===void 0?this.options.align:this.data.align,i=this.props.line.width,s=this.props.dot.width;r=="right"?(this.boxX=e-this.width,this.lineX=e-i,this.dotX=e-i/2-s/2):r=="left"?(this.boxX=e,this.lineX=e,this.dotX=e+i/2-s/2):(this.boxX=e-this.width/2,this.lineX=this.options.rtl?e-i:e-i/2,this.dotX=e-s/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}repositionY(){const e=this.options.orientation.item,r=this.dom.line.style;if(e=="top"){const i=this.parent.top+this.top+1;this.boxY=this.top||0,r.height="".concat(i,"px"),r.bottom="",r.top="0"}else{const s=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),r.height="".concat(s,"px"),r.top="",r.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}}class F8e extends Kf{constructor(e,r,i){if(super(e,r,i),this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},e&&e.start==null)throw new Error('Property "start" missing in item '.concat(e))}isVisible(e){if(this.cluster)return!1;const r=this.width*e.getMillisecondsPerPixel();return this.data.start.getTime()+r>e.start&&this.data.start<e.end}_createDomElement(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.point)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);const e=this.editable.updateTime||this.editable.updateGroup,r=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point".concat(r),this.dom.dot.className="vis-item vis-dot".concat(r)}}_getDomComponentsSizes(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}_updateDomComponentsSizes(e){this.props.dot.width=e.dot.width,this.props.dot.height=e.dot.height,this.props.content.height=e.content.height,this.options.rtl?this.dom.content.style.marginRight="".concat(this.props.dot.width/2,"px"):this.dom.content.style.marginLeft="".concat(this.props.dot.width/2,"px"),this.width=e.point.width,this.height=e.point.height,this.dom.dot.style.top="".concat((this.height-this.props.dot.height)/2,"px");const r=this.props.dot.width,i=this.options.rtl?r/2:r/2*-1;this.dom.dot.style.transform="translateX(".concat(i,"px"),this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}redraw(e){var r,i,s,o;let a;const l=[Ee(r=this._createDomElement).call(r,this),Ee(i=this._appendDomElement).call(i,this),Ee(s=this._updateDirtyDomComponents).call(s,this),()=>{this.dirty&&(a=this._getDomComponentsSizes())},()=>{if(this.dirty){var c;Ee(c=this._updateDomComponentsSizes).call(c,this)(a)}},Ee(o=this._repaintDomAdditionals).call(o,this)];if(e)return l;{let c;return Qe(l).call(l,u=>{c=u()}),c}}repositionXY(){const e=this.options.rtl;(function(i,s,o){var a;let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(s===void 0&&o===void 0)return;const c=l?s*-1:s;if(o===void 0){i.style.transform="translateX(".concat(c,"px)");return}if(s===void 0){i.style.transform="translateY(".concat(o,"px)");return}i.style.transform=Bn(a="translate(".concat(c,"px, ")).call(a,o,"px)")})(this.dom.point,this.pointX,this.pointY,e)}show(e){if(!this.displayed)return this.redraw(e)}hide(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}repositionX(){const e=this.conversion.toScreen(this.data.start);this.pointX=e,this.options.rtl?this.right=e-this.props.dot.width:this.left=e-this.props.dot.width,this.repositionXY()}repositionY(){this.options.orientation.item=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}getWidthLeft(){return this.props.dot.width}getWidthRight(){return this.props.dot.width}}class Au extends Kf{constructor(e,r,i){if(super(e,r,i),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error('Property "start" missing in item '.concat(e.id));if(e.end==null)throw new Error('Property "end" missing in item '.concat(e.id))}}isVisible(e){return this.cluster?!1:this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,r=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+r,this.dom.content.style.maxWidth="none"}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=e.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}redraw(e){var r,i,s,o;let a;const l=[Ee(r=this._createDomElement).call(r,this),Ee(i=this._appendDomElement).call(i,this),Ee(s=this._updateDirtyDomComponents).call(s,this),()=>{if(this.dirty){var c;a=Ee(c=this._getDomComponentsSizes).call(c,this)()}},()=>{if(this.dirty){var c;Ee(c=this._updateDomComponentsSizes).call(c,this)(a)}},Ee(o=this._repaintDomAdditionals).call(o,this)];if(e)return l;{let c;return Qe(l).call(l,u=>{c=u()}),c}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}}repositionX(e){const r=this.parent.width;let i=this.conversion.toScreen(this.data.start),s=this.conversion.toScreen(this.data.end);const o=this.data.align===void 0?this.options.align:this.data.align;let a,l;this.data.limitSize!==!1&&(e===void 0||e===!0)&&(i<-r&&(i=-r),s>2*r&&(s=2*r));const c=Math.max(Math.round((s-i)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=i:this.left=i,this.width=c+this.props.content.width,l=this.props.content.width):(this.options.rtl?this.right=i:this.left=i,this.width=c,l=Math.min(s-i,this.props.content.width)),this.options.rtl?this.dom.box.style.transform="translateX(".concat(this.right*-1,"px)"):this.dom.box.style.transform="translateX(".concat(this.left,"px)"),this.dom.box.style.width="".concat(c,"px"),this.whiteSpace&&(this.height=this.dom.box.offsetHeight),o){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){const u=Math.max(c-l,0)*-1;this.dom.content.style.transform="translateX(".concat(u,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max(c-l,0),"px)");break;case"center":if(this.options.rtl){const u=Math.max((c-l)/2,0)*-1;this.dom.content.style.transform="translateX(".concat(u,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max((c-l)/2,0),"px)");break;default:if(this.overflow?s>0?a=Math.max(-i,0):a=-l:i<0?a=-i:a=0,this.options.rtl){const u=a*-1;this.dom.content.style.transform="translateX(".concat(u,"px)")}else this.dom.content.style.transform="translateX(".concat(a,"px)")}}repositionY(){const e=this.options.orientation.item,r=this.dom.box;e=="top"?r.style.top="".concat(this.top,"px"):r.style.top="".concat(this.parent.height-this.top-this.height,"px")}_repaintDragLeft(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){const e=document.createElement("div");e.className="vis-drag-left",e.dragLeftItem=this,this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}_repaintDragRight(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){const e=document.createElement("div");e.className="vis-drag-right",e.dragRightItem=this,this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}Au.prototype.baseClassName="vis-item vis-range";class Zu extends Kf{constructor(e,r,i){if(super(e,r,i),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error('Property "start" missing in item '.concat(e.id));if(e.end==null)throw new Error('Property "end" missing in item '.concat(e.id))}}isVisible(e){return this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);const e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+e}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=0,this.dirty=!1}_repaintDomAdditionals(){}redraw(e){var r,i,s,o;let a;const l=[Ee(r=this._createDomElement).call(r,this),Ee(i=this._appendDomElement).call(i,this),Ee(s=this._updateDirtyDomComponents).call(s,this),()=>{if(this.dirty){var c;a=Ee(c=this._getDomComponentsSizes).call(c,this)()}},()=>{if(this.dirty){var c;Ee(c=this._updateDomComponentsSizes).call(c,this)(a)}},Ee(o=this._repaintDomAdditionals).call(o,this)];if(e)return l;{let c;return Qe(l).call(l,u=>{c=u()}),c}}repositionY(){let e;const r=this.options.orientation.item;if(this.data.subgroup!==void 0){const i=this.data.subgroup;this.dom.box.style.height="".concat(this.parent.subgroups[i].height,"px"),r=="top"?this.dom.box.style.top="".concat(this.parent.top+this.parent.subgroups[i].top,"px"):this.dom.box.style.top="".concat(this.parent.top+this.parent.height-this.parent.subgroups[i].top-this.parent.subgroups[i].height,"px"),this.dom.box.style.bottom=""}else this.parent instanceof bre?(e=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=r=="bottom"?"0":"",this.dom.box.style.top=r=="top"?"0":""):(e=this.parent.height,this.dom.box.style.top="".concat(this.parent.top,"px"),this.dom.box.style.bottom="");this.dom.box.style.height="".concat(e,"px")}}Zu.prototype.baseClassName="vis-item vis-background";Zu.prototype.stack=!1;Zu.prototype.show=Au.prototype.show;Zu.prototype.hide=Au.prototype.hide;Zu.prototype.repositionX=Au.prototype.repositionX;class $8e{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=Ri(e),this.y=Ri(r)}setText(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=X.xss(e)}show(e){if(e===void 0&&(e=!0),e===!0){var r=this.frame.clientHeight,i=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,a=0,l=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){let c=!1,u=!0;this.overflowMethod=="flip"&&(this.y-r<this.padding&&(u=!1),this.x+i>o-this.padding&&(c=!0)),c?a=this.x-i:a=this.x,u?l=this.y-r:l=this.y}else l=this.y-r,l+r+this.padding>s&&(l=s-r-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+i+this.padding>o&&(a=o-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}}var WV={},HV;function z8e(){if(HV)return WV;HV=1;var n=lt(),e=ic().every,r=Yf(),i=r("every");return n({target:"Array",proto:!0,forced:!i},{every:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),WV}var EM,VV;function B8e(){if(VV)return EM;VV=1,z8e();var n=Fn();return EM=n("Array","every"),EM}var TM,YV;function U8e(){if(YV)return TM;YV=1;var n=vn(),e=B8e(),r=Array.prototype;return TM=function(i){var s=i.every;return i===r||n(r,i)&&s===r.every?e:s},TM}var PM,GV;function q8e(){if(GV)return PM;GV=1;var n=U8e();return PM=n,PM}var MM,KV;function W8e(){return KV||(KV=1,MM=q8e()),MM}var H8e=W8e(),V8e=ut(H8e);class z1 extends Kf{constructor(e,r,i){const s=Aa({},{fitOnDoubleClick:!0},i,{editable:!1});if(super(e,r,s),this.props={content:{width:0,height:0}},!e||e.uiItems==null)throw new Error('Property "uiItems" missing in item '+e.id);this.id=uu(),this.group=e.group,this._setupRange(),this.emitter=this.data.eventEmitter,this.range=this.data.range,this.attached=!1,this.isCluster=!0,this.data.isCluster=!0}hasItems(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}setUiItems(e){this.detach(),this.data.uiItems=e,this._setupRange(),this.attach()}isVisible(e){const r=this.data.end?this.data.end-this.data.start:0,i=this.width*e.getMillisecondsPerPixel(),s=Math.max(this.data.start.getTime()+r,this.data.start.getTime()+i);return this.data.start<e.end&&s>e.start&&this.hasItems()}getData(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}redraw(e){var r,i,s,o,a,l,c,u=[Ee(r=this._createDomElement).call(r,this),Ee(i=this._appendDomElement).call(i,this),Ee(s=this._updateDirtyDomComponents).call(s,this),Ee(o=function(){this.dirty&&(c=this._getDomComponentsSizes())}).call(o,this),Ee(a=function(){if(this.dirty){var d;Ee(d=this._updateDomComponentsSizes).call(d,this)(c)}}).call(a,this),Ee(l=this._repaintDomAdditionals).call(l,this)];if(e)return u;var h;return Qe(u).call(u,function(d){h=d()}),h}show(){this.displayed||this.redraw()}hide(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),this.options.showStipes&&(e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot)),this.displayed=!1}}repositionX(){let e=this.conversion.toScreen(this.data.start),r=this.data.end?this.conversion.toScreen(this.data.end):0;if(r)this.repositionXWithRanges(e,r);else{let i=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(e,i)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(e,r))}repositionStype(e,r){this.dom.line.style.display="block",this.dom.dot.style.display="block";const i=this.dom.line.offsetWidth,s=this.dom.dot.offsetWidth;if(r){const o=i+e+(r-e)/2,a=o-s/2,l=this.options.rtl?o*-1:o,c=this.options.rtl?a*-1:a;this.dom.line.style.transform="translateX(".concat(l,"px)"),this.dom.dot.style.transform="translateX(".concat(c,"px)")}else{const o=this.options.rtl?e*-1:e,a=this.options.rtl?(e-s/2)*-1:e-s/2;this.dom.line.style.transform="translateX(".concat(o,"px)"),this.dom.dot.style.transform="translateX(".concat(a,"px)")}}repositionXWithoutRanges(e,r){r=="right"?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px"):r=="left"?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px"):(this.left=e,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px")}repositionXWithRanges(e,r){let i=Math.round(Math.max(r-e+.5,1));this.options.rtl?this.right=e:this.left=e,this.width=Math.max(i,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=i+"px"}repositionY(){var e=this.options.orientation.item,r=this.dom.box;if(e=="top"?r.style.top=(this.top||0)+"px":r.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(e=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var i=this.parent.itemSet.props.height,s=i-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=i-s+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}move(){this.repositionX(),this.repositionY()}attach(){var e;for(let r of this.data.uiItems)r.cluster=this;this.data.items=Kt(e=this.data.uiItems).call(e,r=>r.data),this.attached=!0,this.dirty=!0}detach(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.hasItems()){for(let r of this.data.uiItems)delete r.cluster;this.attached=!1,e&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}_onDoubleClick(){this._fit()}_setupRange(){var e,r,i;const s=Kt(e=this.data.uiItems).call(e,l=>({start:l.data.start.valueOf(),end:l.data.end?l.data.end.valueOf():l.data.start.valueOf()}));this.data.min=Math.min(...Kt(s).call(s,l=>Math.min(l.start,l.end||l.start))),this.data.max=Math.max(...Kt(s).call(s,l=>Math.max(l.start,l.end||l.start)));const o=Kt(r=this.data.uiItems).call(r,l=>l.center),a=j1(o).call(o,(l,c)=>l+c,0)/this.data.uiItems.length;t3(i=this.data.uiItems).call(i,l=>l.data.end)?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(a),this.data.end=null)}_getUiItems(){if(this.data.uiItems&&this.data.uiItems.length){var e;return ht(e=this.data.uiItems).call(e,r=>r.cluster===this)}return[]}_createDomElement(){if(!this.dom){if(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick){var e;this.dom.box.ondblclick=Ee(e=z1.prototype._onDoubleClick).call(e,this)}this.dom.box["vis-item"]=this,this.dirty=!0}}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const i=this.parent.dom.foreground;if(!i)throw new Error("Cannot redraw item: parent has no foreground container element");i.appendChild(this.dom.box)}const e=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var r=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");r.appendChild(this.dom.dot)}}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+e,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}_getDomComponentsSizes(){const e={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(e.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},e.line={width:this.dom.line.offsetWidth}),e}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=e.box.width:this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}_isStipeVisible(){return this.minWidth>=this.width||!this.data.end}_getFitRange(){const e=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-e,fitEnd:this.data.max+e}}_fit(){if(this.emitter){const{fitStart:e,fitEnd:r}=this._getFitRange(),i={start:new Date(e),end:new Date(r),animation:!0};this.emitter.emit("fit",i)}}_getItemData(){return this.data}}z1.prototype.baseClassName="vis-item vis-range vis-cluster";const Y8e="__ungrouped__",G8e={UNGROUPED:Y8e};class K8e{constructor(e){this.itemSet=e,this.groups={},this.cache={},this.cache[-1]=[]}createClusterItem(e,r,i){return new z1(e,r,i)}setItems(e,r){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,r&&r.applyOnChangedLevel&&(this.applyOnChangedLevel=r.applyOnChangedLevel)}updateData(){this.dataChanged=!0,this.applyOnChangedLevel=!1}getClusters(e,r,i){let{maxItems:s,clusterCriteria:o}=typeof i=="boolean"?{}:i;o||(o=()=>!0),s=s||1;let a=-1,l=2,c=0;if(r>0){if(r>=1)return[];a=Math.abs(Math.round(Math.log(100/r)/Math.log(l))),c=Math.abs(Math.pow(l,a))}if(this.dataChanged){const h=a!=this.cacheLevel;(this.applyOnChangedLevel?h:!0)&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=a;let u=this.cache[a];if(!u){u=[];for(let h in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,h))continue;const d=this.groups[h],f=d.length;let p=0;for(;p<f;){let g=d[p],b=1,y=p-1;for(;y>=0&&g.center-d[y].center<c/2;)!d[y].cluster&&o(g.data,d[y].data)&&b++,y--;let v=p+1;for(;v<d.length&&d[v].center-g.center<c/2;)o(g.data,d[v].data)&&b++,v++;let w=u.length-1;for(;w>=0&&g.center-u[w].center<c;)g.group==u[w].group&&o(g.data,u[w].data)&&b++,w--;if(b>s){const k=b-s+1,_=[];let S=p;for(;_.length<k&&S<d.length;)o(d[p].data,d[S].data)&&_.push(d[S]),S++;const C=this.itemSet.getGroupId(g.data),E=this.itemSet.groups[C]||this.itemSet.groups[G8e.UNGROUPED];let P=this._getClusterForItems(_,E,e,i);u.push(P),p+=k}else delete g.cluster,p+=1}}this.cache[a]=u}return u}_filterData(){const e={};this.groups=e;for(const i of AN(this.items)){const s=i.parent?i.parent.groupId:"";let o=e[s];o||(o=[],e[s]=o),o.push(i),i.data.start&&(i.data.end?i.center=(i.data.start.valueOf()+i.data.end.valueOf())/2:i.center=i.data.start.valueOf())}for(let i in e){var r;Object.prototype.hasOwnProperty.call(e,i)&&Hn(r=e[i]).call(r,(s,o)=>s.center-o.center)}this.dataChanged=!1}_getClusterForItems(e,r,i,s){var o;const a=Kt(o=i||[]).call(o,g=>{var b;return{cluster:g,itemsIds:new Ul(Kt(b=g.data.uiItems).call(b,y=>y.id))}});let l;if(a.length){for(let g of a)if(g.itemsIds.size===e.length&&V8e(e).call(e,b=>g.itemsIds.has(b.id))){l=g.cluster;break}}if(l)return l.setUiItems(e),l.group!==r&&(l.group&&l.group.remove(l),r&&(r.add(l),l.group=r)),l;let c=s.titleTemplate||"";const u={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},h=c.replace(/{count}/,e.length),d='<div title="'+h+'">'+e.length+"</div>",f=Aa({},s,this.itemSet.options),p={content:d,title:h,group:r,uiItems:e,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return l=this.createClusterItem(p,u,f),r&&(r.add(l),l.group=r),l.attach(),l}_dropLevelsCache(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}const pd="__ungrouped__",Za="__background__";class Nu extends ac{constructor(e,r){super(),this.body=e,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap(s,o){const a=o.order;o.order=s.order,s.order=a},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:Ru.snap,onDropObjectOnItem(s,o,a){a(o)},onAdd(s,o){o(s)},onUpdate(s,o){o(s)},onMove(s,o){o(s)},onRemove(s,o){o(s)},onMoving(s,o){o(s)},onAddGroup(s,o){o(s)},onMoveGroup(s,o){o(s)},onRemoveGroup(s,o){o(s)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},this.options=X.extend({},this.defaultOptions),this.options.rtl=r.rtl,this.options.onTimeout=r.onTimeout,this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;const i=this;this.itemsData=null,this.groupsData=null,this.itemsSettingTime=null,this.initialItemSetDrawn=!1,this.userContinueNotBail=null,this.sequentialSelection=!1,this.itemListeners={add(s,o){i._onAdd(o.items),i.options.cluster&&i.clusterGenerator.setItems(i.items,{applyOnChangedLevel:!1}),i.redraw()},update(s,o){i._onUpdate(o.items),i.options.cluster&&i.clusterGenerator.setItems(i.items,{applyOnChangedLevel:!1}),i.redraw()},remove(s,o){i._onRemove(o.items),i.options.cluster&&i.clusterGenerator.setItems(i.items,{applyOnChangedLevel:!1}),i.redraw()}},this.groupListeners={add(s,o,a){if(i._onAddGroups(o.items),i.groupsData&&i.groupsData.length>0){var l;const c=i.groupsData.getDataSet();Qe(l=c.get()).call(l,u=>{if(u.nestedGroups){var h;u.showNested!=!1&&(u.showNested=!0);let d=[];Qe(h=u.nestedGroups).call(h,f=>{const p=c.get(f);p&&(p.nestedInGroup=u.id,u.showNested==!1&&(p.visible=!1),d=Bn(d).call(d,p))}),c.update(d,a)}})}},update(s,o){i._onUpdateGroups(o.items)},remove(s,o){i._onRemoveGroups(o.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.popupTimer=null,this.touchParams={},this.groupTouchParams={group:null,isDragging:!1},this._create(),this.setOptions(r),this.clusters=[]}_create(){var e,r,i,s,o,a,l,c,u,h,d,f,p,g,b;const y=document.createElement("div");y.className="vis-itemset",y["vis-itemset"]=this,this.dom.frame=y;const v=document.createElement("div");v.className="vis-background",y.appendChild(v),this.dom.background=v;const w=document.createElement("div");w.className="vis-foreground",y.appendChild(w),this.dom.foreground=w;const k=document.createElement("div");k.className="vis-axis",this.dom.axis=k;const _=document.createElement("div");_.className="vis-labelset",this.dom.labelSet=_,this._updateUngrouped();const S=new bre(Za,null,this);S.show(),this.groups[Za]=S,this.hammer=new Hr(this.body.dom.centerContainer),this.hammer.on("hammer.input",C=>{C.isFirst&&this._onTouch(C)}),this.hammer.on("panstart",Ee(e=this._onDragStart).call(e,this)),this.hammer.on("panmove",Ee(r=this._onDrag).call(r,this)),this.hammer.on("panend",Ee(i=this._onDragEnd).call(i,this)),this.hammer.get("pan").set({threshold:5,direction:Hr.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",Ee(s=this._onSelectItem).call(s,this)),this.hammer.on("press",Ee(o=this._onMultiSelectItem).call(o,this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",Ee(a=this._onAddItem).call(a,this)),this.options.rtl?this.groupHammer=new Hr(this.body.dom.rightContainer):this.groupHammer=new Hr(this.body.dom.leftContainer),this.groupHammer.on("tap",Ee(l=this._onGroupClick).call(l,this)),this.groupHammer.on("panstart",Ee(c=this._onGroupDragStart).call(c,this)),this.groupHammer.on("panmove",Ee(u=this._onGroupDrag).call(u,this)),this.groupHammer.on("panend",Ee(h=this._onGroupDragEnd).call(h,this)),this.groupHammer.get("pan").set({threshold:5,direction:Hr.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",Ee(d=this._onMouseOver).call(d,this)),this.body.dom.centerContainer.addEventListener("mouseout",Ee(f=this._onMouseOut).call(f,this)),this.body.dom.centerContainer.addEventListener("mousemove",Ee(p=this._onMouseMove).call(p,this)),this.body.dom.centerContainer.addEventListener("contextmenu",Ee(g=this._onDragEnd).call(g,this)),this.body.dom.centerContainer.addEventListener("mousewheel",Ee(b=this._onMouseWheel).call(b,this)),this.show()}setOptions(e){if(e){var r,i;const s=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];X.selectiveExtend(s,this.options,e),"itemsAlwaysDraggable"in e&&(typeof e.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=e.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):typeof e.itemsAlwaysDraggable=="object"&&(X.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,e.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in e&&typeof e.sequentialSelection=="boolean"&&(this.options.sequentialSelection=e.sequentialSelection),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.item=e.orientation==="top"?"top":"bottom":typeof e.orientation=="object"&&"item"in e.orientation&&(this.options.orientation.item=e.orientation.item)),"margin"in e&&(typeof e.margin=="number"?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):typeof e.margin=="object"&&(X.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&(typeof e.margin.item=="number"?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):typeof e.margin.item=="object"&&X.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),Qe(r=["locale","locales"]).call(r,a=>{a in e&&(this.options[a]=e[a])}),"editable"in e&&(typeof e.editable=="boolean"?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable,this.options.editable.overrideItems=!1):typeof e.editable=="object"&&X.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,e.editable)),"groupEditable"in e&&(typeof e.groupEditable=="boolean"?(this.options.groupEditable.order=e.groupEditable,this.options.groupEditable.add=e.groupEditable,this.options.groupEditable.remove=e.groupEditable):typeof e.groupEditable=="object"&&X.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable));const o=a=>{const l=e[a];if(l){if(typeof l!="function"){var c;throw new Error(Bn(c="option ".concat(a," must be a function ")).call(c,a,"(item, callback)"))}this.options[a]=l}};Qe(i=["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"]).call(i,o),e.cluster?(Aa(this.options,{cluster:e.cluster}),this.clusterGenerator||(this.clusterGenerator=new K8e(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}markDirty(e){this.groupIds=[],e&&(e.refreshItems&&Qe(X).call(X,this.items,r=>{r.dirty=!0,r.displayed&&r.redraw()}),e.restackGroups&&Qe(X).call(X,this.groups,(r,i)=>{i!==Za&&(r.stackDirty=!0)}))}destroy(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}hide(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}show(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}setPopupTimer(e){if(this.clearPopupTimer(),e){const r=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=Rr(function(){e.show()},r)}}clearPopupTimer(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}setSelection(e){var r;e==null&&(e=[]),Et(e)||(e=[e]);const i=ht(r=this.selection).call(r,s=>nn(e).call(e,s)===-1);for(let s of i){const o=this.getItemById(s);o&&o.unselect()}this.selection=[...e];for(let s of e){const o=this.getItemById(s);o&&o.select()}}getSelection(){var e;return Bn(e=this.selection).call(e,[])}getVisibleItems(){const e=this.body.range.getRange();let r,i;this.options.rtl?(r=this.body.util.toScreen(e.start),i=this.body.util.toScreen(e.end)):(i=this.body.util.toScreen(e.start),r=this.body.util.toScreen(e.end));const s=[];for(const o in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,o))continue;const a=this.groups[o],l=a.isVisible?a.visibleItems:[];for(const c of l)this.options.rtl?c.right<i&&c.right+c.width>r&&s.push(c.id):c.left<r&&c.left+c.width>i&&s.push(c.id)}return s}getItemsAtCurrentTime(e){let r,i;this.options.rtl?(r=this.body.util.toScreen(e),i=this.body.util.toScreen(e)):(i=this.body.util.toScreen(e),r=this.body.util.toScreen(e));const s=[];for(const o in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,o))continue;const a=this.groups[o],l=a.isVisible?a.visibleItems:[];for(const c of l)this.options.rtl?c.right<i&&c.right+c.width>r&&s.push(c.id):c.left<r&&c.left+c.width>i&&s.push(c.id)}return s}getVisibleGroups(){const e=[];for(const r in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,r))continue;this.groups[r].isVisible&&e.push(r)}return e}getItemById(e){var r;return this.items[e]||T8e(r=this.clusters).call(r,i=>i.id===e)}_deselect(e){const r=this.selection;for(let i=0,s=r.length;i<s;i++)if(r[i]==e){Vr(r).call(r,i,1);break}}redraw(){const e=this.options.margin,r=this.body.range,i=X.option.asSize,s=this.options,o=s.orientation.item;let a=!1;const l=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,l.className="vis-itemset",this.options.cluster&&this._clusterItems(),a=this._orderGroups()||a;const c=r.end-r.start,u=c!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,h=r.start!=this.lastRangeStart,d=s.stack!=this.lastStack,f=s.stackSubgroups!=this.lastStackSubgroups,p=u||h||d||f;this.lastVisibleInterval=c,this.lastRangeStart=r.start,this.lastStack=s.stack,this.lastStackSubgroups=s.stackSubgroups,this.props.lastWidth=this.props.width;const g=this._firstGroup(),b={item:e.item,axis:e.axis},y={item:e.item,axis:e.item.vertical/2};let v=0;const w=e.axis+e.item.vertical;this.groups[Za].redraw(r,y,p);const k={};let _=0;if(Qe(X).call(X,this.groups,(C,E)=>{if(E===Za)return;const P=C==g?b:y,O=!0;k[E]=C.redraw(r,P,p,O),_=k[E].length}),_>0){const C={};for(let E=0;E<_;E++)Qe(X).call(X,k,(P,O)=>{C[O]=P[E]()});Qe(X).call(X,this.groups,(E,P)=>{if(P===Za)return;a=C[P]||a,v+=E.height}),v=Math.max(v,w)}return v=Math.max(v,w),l.style.height=i(v),this.props.width=l.offsetWidth,this.props.height=v,this.dom.axis.style.top=i(o=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,a=this._isResized()||a,a}_firstGroup(){const e=this.options.orientation.item=="top"?0:this.groupIds.length-1,r=this.groupIds[e];return this.groups[r]||this.groups[pd]||null}_updateUngrouped(){let e=this.groups[pd],r,i;if(this.groupsData){if(e){e.dispose(),delete this.groups[pd];for(i in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,i))continue;r=this.items[i],r.parent&&r.parent.remove(r);const s=this.getGroupId(r.data),o=this.groups[s];o&&o.add(r)||r.hide()}}}else if(!e){e=new mI(null,null,this),this.groups[pd]=e;for(i in this.items)Object.prototype.hasOwnProperty.call(this.items,i)&&(r=this.items[i],e.add(r));e.show()}}getLabelSet(){return this.dom.labelSet}setItems(e){this.itemsSettingTime=new Date;const r=this;let i;const s=this.itemsData;if(!e)this.itemsData=null;else if(Na(e))this.itemsData=bf(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(s&&(Qe(X).call(X,this.itemListeners,(o,a)=>{s.off(a,o)}),s.dispose(),i=s.getIds(),this._onRemove(i)),this.itemsData){const o=this.id;Qe(X).call(X,this.itemListeners,(a,l)=>{r.itemsData.on(l,a,o)}),i=this.itemsData.getIds(),this._onAdd(i),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}getItems(){return this.itemsData!=null?this.itemsData.rawDS:null}setGroups(e){const r=this;let i;if(this.groupsData&&(Qe(X).call(X,this.groupListeners,(o,a)=>{r.groupsData.off(a,o)}),i=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(i)),!e)this.groupsData=null;else if(Na(e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var s;const o=this.groupsData.getDataSet();Qe(s=o.get()).call(s,l=>{if(l.nestedGroups){var c;Qe(c=l.nestedGroups).call(c,u=>{const h=o.get(u);h.nestedInGroup=l.id,l.showNested==!1&&(h.visible=!1),o.update(h)})}});const a=this.id;Qe(X).call(X,this.groupListeners,(l,c)=>{r.groupsData.on(c,l,a)}),i=this.groupsData.getIds(),this._onAddGroups(i)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}getGroups(){return this.groupsData}removeItem(e){const r=this.itemsData.get(e);r&&this.options.onRemove(r,i=>{i&&this.itemsData.remove(e)})}_getType(e){return e.type||this.options.type||(e.end?"range":"box")}getGroupId(e){return this._getType(e)=="background"&&e.group==null?Za:this.groupsData?e.group:pd}_onUpdate(e){const r=this;Qe(e).call(e,i=>{const s=r.itemsData.get(i);let o=r.items[i];const a=s?r._getType(s):null,l=Nu.types[a];let c;if(o&&(!l||!(o instanceof l)?(c=o.selected,r._removeItem(o),o=null):r._updateItem(o,s)),!o&&s)if(l)o=new l(s,r.conversion,r.options),o.id=i,r._addItem(o),c&&(this.selection.push(i),o.select());else throw new TypeError('Unknown item type "'.concat(a,'"'))}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}_onRemove(e){let r=0;const i=this;Qe(e).call(e,s=>{const o=i.items[s];o&&(r++,i._removeItem(o))}),r&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}_order(){Qe(X).call(X,this.groups,e=>{e.order()})}_onUpdateGroups(e){this._onAddGroups(e)}_onAddGroups(e){const r=this;Qe(e).call(e,i=>{const s=r.groupsData.get(i);let o=r.groups[i];if(o)o.setData(s);else{if(i==pd||i==Za)throw new Error("Illegal group id. ".concat(i," is a reserved id."));const a=q0(r.options);X.extend(a,{height:null}),o=new mI(i,s,r),r.groups[i]=o;for(const l in r.items){if(!Object.prototype.hasOwnProperty.call(r.items,l))continue;const c=r.items[l];c.data.group==i&&o.add(c)}o.order(),o.show()}}),this.body.emitter.emit("_change",{queue:!0})}_onRemoveGroups(e){Qe(e).call(e,r=>{const i=this.groups[r];i&&(i.dispose(),delete this.groups[r])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}_orderGroups(){if(this.groupsData){let e=this.groupsData.getIds({order:this.options.groupOrder});e=this._orderNestedGroups(e);const r=!X.equalArray(e,this.groupIds);if(r){const i=this.groups;Qe(e).call(e,s=>{i[s].hide()}),Qe(e).call(e,s=>{i[s].show()}),this.groupIds=e}return r}else return!1}_orderNestedGroups(e){function r(s,o){let a=[];return Qe(o).call(o,l=>{if(a.push(l),s.groupsData.get(l).nestedGroups){var u;const h=Kt(u=s.groupsData.get({filter(d){return d.nestedInGroup==l},order:s.options.groupOrder})).call(u,d=>d.id);a=Bn(a).call(a,r(s,h))}}),a}const i=ht(e).call(e,s=>!this.groupsData.get(s).nestedInGroup);return r(this,i)}_addItem(e){this.items[e.id]=e;const r=this.getGroupId(e.data),i=this.groups[r];i?i&&i.data&&i.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1,i&&i.add(e)}_updateItem(e,r){e.setData(r);const i=this.getGroupId(e.data),s=this.groups[i];s?s&&s.data&&s.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1}_removeItem(e){var r,i;e.hide(),delete this.items[e.id];const s=nn(r=this.selection).call(r,e.id);s!=-1&&Vr(i=this.selection).call(i,s,1),e.parent&&e.parent.remove(e),this.popup!=null&&this.popup.hide()}_constructByEndArray(e){const r=[];for(let i=0;i<e.length;i++)e[i]instanceof Au&&r.push(e[i]);return r}_onTouch(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null}_getGroupIndex(e){for(let r=0;r<this.groupIds.length;r++)if(e==this.groupIds[r])return r}_onDragStart(e){if(this.touchParams.itemIsDragging)return;const r=this.touchParams.item||null,i=this;let s;if(r&&(r.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||r.editable!=null&&!r.editable.updateTime&&!r.editable.updateGroup&&!this.options.editable.overrideItems)return;const o=this.touchParams.dragLeftItem,a=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=r,o)s={item:o,initialX:e.center.x,dragLeft:!0,data:this._cloneItemData(r.data)},this.touchParams.itemProps=[s];else if(a)s={item:a,initialX:e.center.x,dragRight:!0,data:this._cloneItemData(r.data)},this.touchParams.itemProps=[s];else if(this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey))this._onDragStartAddItem(e);else{this.groupIds.length<1&&this.redraw();const l=this._getGroupIndex(r.data.group),c=this.options.itemsAlwaysDraggable.item&&!r.selected?[r.id]:this.getSelection();this.touchParams.itemProps=Kt(c).call(c,u=>{const h=i.items[u],d=i._getGroupIndex(h.data.group);return{item:h,initialX:e.center.x,groupOffset:l-d,data:this._cloneItemData(h.data)}})}e.stopPropagation()}else this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)&&this._onDragStartAddItem(e)}_onDragStartAddItem(e){const r=this.options.snap||null,i=this.dom.frame.getBoundingClientRect(),s=this.options.rtl?i.right-e.center.x+10:e.center.x-i.left-10,o=this.body.util.toTime(s),a=this.body.util.getScale(),l=this.body.util.getStep(),c=r?r(o,a,l):o,h={type:"range",start:c,end:c,content:"new item"},d=uu();h[this.itemsData.idProp]=d;const f=this.groupFromTarget(e);f&&(h.group=f.groupId);const p=new Au(h,this.conversion,this.options);p.id=d,p.data=this._cloneItemData(h),this._addItem(p),this.touchParams.selectedItem=p;const g={item:p,initialX:e.center.x,data:p.data};this.options.rtl?g.dragLeft=!0:g.dragRight=!0,this.touchParams.itemProps=[g],e.stopPropagation()}_onDrag(e){if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){const i=this.body.dom.centerContainer,s=i.getBoundingClientRect();this.popup.setPosition(e.center.x-s.left+i.offsetLeft,e.center.y-s.top+i.offsetTop),this.popup.show()}if(this.touchParams.itemProps){var r;e.stopPropagation();const i=this,s=this.options.snap||null,o=this.body.dom.root.offsetLeft,a=this.options.rtl?o+this.body.domProps.right.width:o+this.body.domProps.left.width,l=this.body.util.getScale(),c=this.body.util.getStep(),u=this.touchParams.selectedItem,h=(this.options.editable.overrideItems||u.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&u.editable!=null&&u.editable.updateGroup;let d=null;if(h&&u&&u.data.group!=null){const f=i.groupFromTarget(e);f&&(d=this._getGroupIndex(f.groupId))}Qe(r=this.touchParams.itemProps).call(r,f=>{const p=i.body.util.toTime(e.center.x-a),g=i.body.util.toTime(f.initialX-a);let b,y,v,w,k;this.options.rtl?b=-(p-g):b=p-g;let _=this._cloneItemData(f.item.data);if(f.item.editable!=null&&!f.item.editable.updateTime&&!f.item.editable.updateGroup&&!i.options.editable.overrideItems)return;if((this.options.editable.overrideItems||u.editable==null)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&u.editable!=null&&u.editable.updateTime){if(f.dragLeft)this.options.rtl?_.end!=null&&(v=X.convert(f.data.end,"Date"),k=new Date(v.valueOf()+b),_.end=s?s(k,l,c):k):_.start!=null&&(y=X.convert(f.data.start,"Date"),w=new Date(y.valueOf()+b),_.start=s?s(w,l,c):w);else if(f.dragRight)this.options.rtl?_.start!=null&&(y=X.convert(f.data.start,"Date"),w=new Date(y.valueOf()+b),_.start=s?s(w,l,c):w):_.end!=null&&(v=X.convert(f.data.end,"Date"),k=new Date(v.valueOf()+b),_.end=s?s(k,l,c):k);else if(_.start!=null)if(y=X.convert(f.data.start,"Date").valueOf(),w=new Date(y+b),_.end!=null){v=X.convert(f.data.end,"Date");const C=v.valueOf()-y.valueOf();_.start=s?s(w,l,c):w,_.end=new Date(_.start.valueOf()+C)}else _.start=s?s(w,l,c):w}if(h&&!f.dragLeft&&!f.dragRight&&d!=null&&_.group!=null){let C=d-f.groupOffset;C=Math.max(0,C),C=Math.min(i.groupIds.length-1,C),_.group=i.groupIds[C]}_=this._cloneItemData(_),i.options.onMoving(_,C=>{C&&f.item.setData(this._cloneItemData(C,"Date"))})}),this.body.emitter.emit("_change")}}_moveToGroup(e,r){const i=this.groups[r];if(i&&i.groupId!=e.data.group){const s=e.parent;s.remove(e),s.order(),e.data.group=i.groupId,i.add(e),i.order()}}_onDragEnd(e){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){e.stopPropagation();const r=this,i=this.touchParams.itemProps;this.touchParams.itemProps=null,Qe(i).call(i,s=>{const o=s.item.id;if(!(r.itemsData.get(o)!=null))r.options.onAdd(s.item.data,l=>{r._removeItem(s.item),l&&r.itemsData.add(l),r.body.emitter.emit("_change")});else{const l=this._cloneItemData(s.item.data);r.options.onMove(l,c=>{c?(c[this.itemsData.idProp]=o,this.itemsData.update(c)):(s.item.setData(s.data),r.body.emitter.emit("_change"))})}})}}_onGroupClick(e){const r=this.groupFromTarget(e);Rr(()=>{this.toggleGroupShowNested(r)},1)}toggleGroupShowNested(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!e||!e.nestedGroups)return;const i=this.groupsData.getDataSet();r!=null?e.showNested=!!r:e.showNested=!e.showNested;let s=i.get(e.groupId);s.showNested=e.showNested;let o=e.nestedGroups,a=o;for(;a.length>0;){let h=a;a=[];for(let d=0;d<h.length;d++){let f=i.get(h[d]);f.nestedGroups&&(a=Bn(a).call(a,f.nestedGroups))}a.length>0&&(o=Bn(o).call(o,a))}var l;if(s.showNested){var c=i.get(s.nestedGroups);for(let h=0;h<c.length;h++){let d=c[h];d.nestedGroups&&d.nestedGroups.length>0&&(d.showNested==null||d.showNested==!0)&&c.push(...i.get(d.nestedGroups))}l=Kt(c).call(c,function(h){return h.visible==null&&(h.visible=!0),h.visible=!!s.showNested,h})}else{var u;l=Kt(u=i.get(o)).call(u,function(h){return h.visible==null&&(h.visible=!0),h.visible=!!s.showNested,h})}i.update(Bn(l).call(l,s)),s.showNested?(X.removeClassName(e.dom.label,"collapsed"),X.addClassName(e.dom.label,"expanded")):(X.removeClassName(e.dom.label,"expanded"),X.addClassName(e.dom.label,"collapsed"))}toggleGroupDragClassName(e){e.dom.label.classList.toggle("vis-group-is-dragging"),e.dom.foreground.classList.toggle("vis-group-is-dragging")}_onGroupDragStart(e){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}_onGroupDrag(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const r=this.groupsData.getDataSet(),i=this.groupFromTarget(e);if(i&&i.height!=this.groupTouchParams.group.height){const s=i.top<this.groupTouchParams.group.top,o=e.center?e.center.y:e.clientY,a=i.dom.foreground.getBoundingClientRect(),l=this.groupTouchParams.group.height;if(s){if(a.top+l<o)return}else{const c=i.height;if(a.top+c-l>o)return}}if(i&&i!=this.groupTouchParams.group){const s=r.get(i.groupId),o=r.get(this.groupTouchParams.group.groupId);o&&s&&(this.options.groupOrderSwap(o,s,r),r.update(o),r.update(s));const a=r.getIds({order:this.options.groupOrder});if(!X.equalArray(a,this.groupTouchParams.originalOrder)){const l=this.groupTouchParams.originalOrder,c=this.groupTouchParams.group.groupId,u=Math.min(l.length,a.length);let h=0,d=0,f=0;for(;h<u;){for(;h+d<u&&h+f<u&&a[h+d]==l[h+f];)h++;if(h+d>=u)break;if(a[h+d]==c)d=1;else if(l[h+f]==c)f=1;else{const p=nn(a).call(a,l[h+f]),g=r.get(a[h+d]),b=r.get(l[h+f]);this.options.groupOrderSwap(g,b,r),r.update(g),r.update(b);const y=a[h+d];a[h+d]=l[h+f],a[p]=y,h++}}}}}}_onGroupDragEnd(e){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const r=this,i=r.groupTouchParams.group.groupId,s=r.groupsData.getDataSet(),o=X.extend({},s.get(i));r.options.onMoveGroup(o,a=>{if(a)a[s._idProp]=i,s.update(a);else{const l=s.getIds({order:r.options.groupOrder});if(!X.equalArray(l,r.groupTouchParams.originalOrder)){const c=r.groupTouchParams.originalOrder,u=Math.min(c.length,l.length);let h=0;for(;h<u;){for(;h<u&&l[h]==c[h];)h++;if(h>=u)break;const d=nn(l).call(l,c[h]),f=s.get(l[h]),p=s.get(c[h]);r.options.groupOrderSwap(f,p,s),s.update(f),s.update(p);const g=l[h];l[h]=c[h],l[d]=g,h++}}}}),r.body.emitter.emit("groupDragged",{groupId:i}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}_onSelectItem(e){if(!this.options.selectable)return;const r=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),i=e.srcEvent&&e.srcEvent.shiftKey;if(r||i){this._onMultiSelectItem(e);return}const s=this.getSelection(),o=this.itemFromTarget(e),a=o&&o.selectable?[o.id]:[];this.setSelection(a);const l=this.getSelection();(l.length>0||s.length>0)&&this.body.emitter.emit("select",{items:l,event:e})}_onMouseOver(e){const r=this.itemFromTarget(e);if(!r)return;const i=this.itemFromRelatedTarget(e);if(r===i)return;const s=r.getTitle();if(this.options.showTooltips&&s){this.popup==null&&(this.popup=new $8e(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(s);const o=this.body.dom.centerContainer,a=o.getBoundingClientRect();this.popup.setPosition(e.clientX-a.left+o.offsetLeft,e.clientY-a.top+o.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:r.id,event:e})}_onMouseOut(e){const r=this.itemFromTarget(e);if(!r)return;const i=this.itemFromRelatedTarget(e);r!==i&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:r.id,event:e}))}_onMouseMove(e){if(this.itemFromTarget(e)&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){const i=this.body.dom.centerContainer,s=i.getBoundingClientRect();this.popup.setPosition(e.clientX-s.left+i.offsetLeft,e.clientY-s.top+i.offsetTop),this.popup.show()}}_onMouseWheel(e){this.touchParams.itemIsDragging&&this._onDragEnd(e)}_onUpdateItem(e){if(!this.options.selectable||!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;const r=this;if(e){const i=r.itemsData.get(e.id);this.options.onUpdate(i,s=>{s&&r.itemsData.update(s)})}}_onDropObjectOnItem(e){const r=this.itemFromTarget(e),i=JSON.parse(e.dataTransfer.getData("text"));this.options.onDropObjectOnItem(i,r)}_onAddItem(e){if(!this.options.selectable||!this.options.editable.add)return;const r=this,i=this.options.snap||null,s=this.dom.frame.getBoundingClientRect(),o=this.options.rtl?s.right-e.center.x:e.center.x-s.left,a=this.body.util.toTime(o),l=this.body.util.getScale(),c=this.body.util.getStep();let u,h;e.type=="drop"?(h=JSON.parse(e.dataTransfer.getData("text")),h.content=h.content?h.content:"new item",h.start=h.start?h.start:i?i(a,l,c):a,h.type=h.type||"box",h[this.itemsData.idProp]=h.id||uu(),h.type=="range"&&!h.end&&(u=this.body.util.toTime(o+this.props.width/5),h.end=i?i(u,l,c):u)):(h={start:i?i(a,l,c):a,content:"new item"},h[this.itemsData.idProp]=uu(),this.options.type==="range"&&(u=this.body.util.toTime(o+this.props.width/5),h.end=i?i(u,l,c):u));const d=this.groupFromTarget(e);d&&(h.group=d.groupId),h=this._cloneItemData(h),this.options.onAdd(h,f=>{f&&(r.itemsData.add(f),e.type=="drop"&&r.setSelection([f.id]))})}_onMultiSelectItem(e){if(!this.options.selectable)return;const r=this.itemFromTarget(e);if(r){let i=this.options.multiselect?this.getSelection():[];if((e.srcEvent&&e.srcEvent.shiftKey||!1||this.options.sequentialSelection)&&this.options.multiselect){const a=this.itemsData.get(r.id).group;let l;this.options.multiselectPerGroup&&i.length>0&&(l=this.itemsData.get(i[0]).group),(!this.options.multiselectPerGroup||l==null||l==a)&&i.push(r.id);const c=Nu._getItemRange(this.itemsData.get(i));if(!this.options.multiselectPerGroup||l==a){i=[];for(const u in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,u))continue;const h=this.items[u],d=h.data.start,f=h.data.end!==void 0?h.data.end:d;d>=c.min&&f<=c.max&&(!this.options.multiselectPerGroup||l==this.itemsData.get(h.id).group)&&!(h instanceof Zu)&&i.push(h.id)}}}else{const a=nn(i).call(i,r.id);a==-1?i.push(r.id):Vr(i).call(i,a,1)}const o=ht(i).call(i,a=>this.getItemById(a).selectable);this.setSelection(o),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}static _getItemRange(e){let r=null,i=null;return Qe(e).call(e,s=>{(i==null||s.start<i)&&(i=s.start),s.end!=null?(r==null||s.end>r)&&(r=s.end):(r==null||s.start>r)&&(r=s.start)}),{min:i,max:r}}itemFromElement(e){let r=e;for(;r;){if(Object.prototype.hasOwnProperty.call(r,"vis-item"))return r["vis-item"];r=r.parentNode}return null}itemFromTarget(e){return this.itemFromElement(e.target)}itemFromRelatedTarget(e){return this.itemFromElement(e.relatedTarget)}groupFromTarget(e){const r=e.center?e.center.y:e.clientY;let i=this.groupIds;i.length<=0&&this.groupsData&&(i=this.groupsData.getIds({order:this.options.groupOrder}));for(let s=0;s<i.length;s++){const o=i[s],a=this.groups[o],l=a.dom.foreground,c=l.getBoundingClientRect();if(r>=c.top&&r<c.top+l.offsetHeight)return a;if(this.options.orientation.item==="top"){if(s===this.groupIds.length-1&&r>c.top)return a}else if(s===0&&r<c.top+l.offset)return a}return null}static itemSetFromTarget(e){let r=e.target;for(;r;){if(Object.prototype.hasOwnProperty.call(r,"vis-itemset"))return r["vis-itemset"];r=r.parentNode}return null}_cloneItemData(e,r){const i=X.extend({},e);return r||(r=this.itemsData.type),i.start!=null&&(i.start=X.convert(i.start,r&&r.start||"Date")),i.end!=null&&(i.end=X.convert(i.end,r&&r.end||"Date")),i}_clusterItems(){if(!this.options.cluster)return;const{scale:e}=this.body.range.conversion(this.body.domProps.center.width),r=this.clusterGenerator.getClusters(this.clusters,e,this.options.cluster);if(this.clusters!=r){if(this._detachAllClusters(),r){for(let i of r)i.attach();this.clusters=r}this._updateClusters(r)}}_detachAllClusters(){if(this.options.cluster&&this.clusters&&this.clusters.length)for(let e of this.clusters)e.detach()}_updateClusters(e){if(this.clusters&&this.clusters.length){var r;const o=new Ul(Kt(e).call(e,c=>c.id)),a=ht(r=this.clusters).call(r,c=>!o.has(c.id));let l=!1;for(let c of a){var i;const u=nn(i=this.selection).call(i,c.id);if(u!==-1){var s;c.unselect(),Vr(s=this.selection).call(s,u,1),l=!0}}if(l){const c=this.getSelection();this.body.emitter.emit("select",{items:c,event})}}this.clusters=e||[]}}Nu.types={background:Zu,box:L8e,range:Au,point:F8e};Nu.prototype._onAdd=Nu.prototype._onUpdate;let Np=!1,XV,Gx="background: #FFeeee; color: #dd0000";class wn{constructor(){}static validate(e,r,i){Np=!1,XV=r;let s=r;return i!==void 0&&(s=r[i]),wn.parse(e,s,[]),Np}static parse(e,r,i){for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&wn.check(s,e,r,i)}static check(e,r,i,s){if(i[e]===void 0&&i.__any__===void 0){wn.getSuggestion(e,i,s);return}let o=e,a=!0;i[e]===void 0&&i.__any__!==void 0&&(o="__any__",a=wn.getType(r[e])==="object");let l=i[o];a&&l.__type__!==void 0&&(l=l.__type__),wn.checkFields(e,r,i,o,l,s)}static checkFields(e,r,i,s,o,a){let l=function(h){console.log("%c"+h+wn.printLocation(a,e),Gx)},c=wn.getType(r[e]),u=o[c];u!==void 0?wn.getType(u)==="array"&&nn(u).call(u,r[e])===-1?(l('Invalid option detected in "'+e+'". Allowed values are:'+wn.print(u)+' not "'+r[e]+'". '),Np=!0):c==="object"&&s!=="__any__"&&(a=X.copyAndExtendArray(a,e),wn.parse(r[e],i[s],a)):o.any===void 0&&(l('Invalid type received for "'+e+'". Expected: '+wn.print(nr(o))+". Received ["+c+'] "'+r[e]+'"'),Np=!0)}static getType(e){var r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Et(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,i){let s=wn.findInOptions(e,r,i,!1),o=wn.findInOptions(e,XV,[],!0),a=8,l=4,c;s.indexMatch!==void 0?c=" in "+wn.printLocation(s.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:o.distance<=l&&s.distance>o.distance?c=" in "+wn.printLocation(s.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+wn.printLocation(o.path,o.closestMatch,""):s.distance<=a?c='. Did you mean "'+s.closestMatch+'"?'+wn.printLocation(s.path,e):c=". Did you mean one of these: "+wn.print(nr(r))+wn.printLocation(i,e),console.log('%cUnknown option detected: "'+e+'"'+c,Gx),Np=!0}static findInOptions(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,a="",l=[],c=e.toLowerCase(),u;for(let d in r){if(!Object.prototype.hasOwnProperty.call(r,d))continue;let f;if(r[d].__type__!==void 0&&s===!0){let p=wn.findInOptions(e,r[d],X.copyAndExtendArray(i,d));o>p.distance&&(a=p.closestMatch,l=p.path,o=p.distance,u=p.indexMatch)}else{var h;nn(h=d.toLowerCase()).call(h,c)!==-1&&(u=d),f=wn.levenshteinDistance(e,d),o>f&&(a=d,l=X.copyArray(i),o=f)}}return{closestMatch:a,path:l,distance:o,indexMatch:u}}static printLocation(e,r){let s=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let o=0;o<e.length;o++){for(let a=0;a<o+1;a++)s+="  ";s+=e[o]+`: {
`}for(let o=0;o<e.length+1;o++)s+="  ";s+=r+`
`;for(let o=0;o<e.length+1;o++){for(let a=0;a<e.length-o;a++)s+="  ";s+=`}
`}return s+`

`}static print(e){return ui(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;var i=[],s;for(s=0;s<=r.length;s++)i[s]=[s];var o;for(o=0;o<=e.length;o++)i[0][o]=o;for(s=1;s<=r.length;s++)for(o=1;o<=e.length;o++)r.charAt(s-1)==e.charAt(o-1)?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o-1]+1,Math.min(i[s][o-1]+1,i[s-1][o]+1));return i[r.length][e.length]}}let xt="string",bt="boolean",ln="number",QV="array",md="date",zn="object",X8e="dom",gd="moment",JV="any",Q8e={configure:{enabled:{boolean:bt},filter:{boolean:bt,function:"function"},container:{dom:X8e},__type__:{object:zn,boolean:bt,function:"function"}},align:{string:xt},alignCurrentTime:{string:xt,undefined:"undefined"},rtl:{boolean:bt,undefined:"undefined"},rollingMode:{follow:{boolean:bt},offset:{number:ln,undefined:"undefined"},__type__:{object:zn}},onTimeout:{timeoutMs:{number:ln},callback:{function:"function"},__type__:{object:zn}},verticalScroll:{boolean:bt,undefined:"undefined"},horizontalScroll:{boolean:bt,undefined:"undefined"},horizontalScrollKey:{string:xt,undefined:"undefined"},horizontalScrollInvert:{boolean:bt,undefined:"undefined"},autoResize:{boolean:bt},throttleRedraw:{number:ln},clickToUse:{boolean:bt},dataAttributes:{string:xt,array:QV},editable:{add:{boolean:bt,undefined:"undefined"},remove:{boolean:bt,undefined:"undefined"},updateGroup:{boolean:bt,undefined:"undefined"},updateTime:{boolean:bt,undefined:"undefined"},overrideItems:{boolean:bt,undefined:"undefined"},__type__:{boolean:bt,object:zn}},end:{number:ln,date:md,string:xt,moment:gd},format:{minorLabels:{millisecond:{string:xt,undefined:"undefined"},second:{string:xt,undefined:"undefined"},minute:{string:xt,undefined:"undefined"},hour:{string:xt,undefined:"undefined"},weekday:{string:xt,undefined:"undefined"},day:{string:xt,undefined:"undefined"},week:{string:xt,undefined:"undefined"},month:{string:xt,undefined:"undefined"},year:{string:xt,undefined:"undefined"},__type__:{object:zn,function:"function"}},majorLabels:{millisecond:{string:xt,undefined:"undefined"},second:{string:xt,undefined:"undefined"},minute:{string:xt,undefined:"undefined"},hour:{string:xt,undefined:"undefined"},weekday:{string:xt,undefined:"undefined"},day:{string:xt,undefined:"undefined"},week:{string:xt,undefined:"undefined"},month:{string:xt,undefined:"undefined"},year:{string:xt,undefined:"undefined"},__type__:{object:zn,function:"function"}},__type__:{object:zn}},moment:{function:"function"},groupHeightMode:{string:xt},groupOrder:{string:xt,function:"function"},groupEditable:{add:{boolean:bt,undefined:"undefined"},remove:{boolean:bt,undefined:"undefined"},order:{boolean:bt,undefined:"undefined"},__type__:{boolean:bt,object:zn}},groupOrderSwap:{function:"function"},height:{string:xt,number:ln},hiddenDates:{start:{date:md,number:ln,string:xt,moment:gd},end:{date:md,number:ln,string:xt,moment:gd},repeat:{string:xt},__type__:{object:zn,array:QV}},itemsAlwaysDraggable:{item:{boolean:bt,undefined:"undefined"},range:{boolean:bt,undefined:"undefined"},__type__:{boolean:bt,object:zn}},limitSize:{boolean:bt},locale:{string:xt},locales:{__any__:{any:JV},__type__:{object:zn}},longSelectPressTime:{number:ln},margin:{axis:{number:ln},item:{horizontal:{number:ln,undefined:"undefined"},vertical:{number:ln,undefined:"undefined"},__type__:{object:zn,number:ln}},__type__:{object:zn,number:ln}},max:{date:md,number:ln,string:xt,moment:gd},maxHeight:{number:ln,string:xt},maxMinorChars:{number:ln},min:{date:md,number:ln,string:xt,moment:gd},minHeight:{number:ln,string:xt},moveable:{boolean:bt},multiselect:{boolean:bt},multiselectPerGroup:{boolean:bt},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:xt,undefined:"undefined"},item:{string:xt,undefined:"undefined"},__type__:{string:xt,object:zn}},selectable:{boolean:bt},sequentialSelection:{boolean:bt},showCurrentTime:{boolean:bt},showMajorLabels:{boolean:bt},showMinorLabels:{boolean:bt},showWeekScale:{boolean:bt},stack:{boolean:bt},stackSubgroups:{boolean:bt},cluster:{maxItems:{number:ln,undefined:"undefined"},titleTemplate:{string:xt,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:bt,undefined:"undefined"},fitOnDoubleClick:{boolean:bt,undefined:"undefined"},__type__:{boolean:bt,object:zn}},snap:{function:"function",null:"null"},start:{date:md,number:ln,string:xt,moment:gd},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:xt,function:"function"},showTooltips:{boolean:bt},tooltip:{followMouse:{boolean:bt},overflowMethod:{string:["cap","flip","none"]},delay:{number:ln},template:{function:"function"},__type__:{object:zn}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:bt,object:zn}},timeAxis:{scale:{string:xt,undefined:"undefined"},step:{number:ln,undefined:"undefined"},__type__:{object:zn}},type:{string:xt},width:{string:xt,number:ln},preferZoom:{boolean:bt},zoomable:{boolean:bt},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:ln},zoomMax:{number:ln},zoomMin:{number:ln},xss:{disabled:{boolean:bt},filterOptions:{__any__:{any:JV},__type__:{object:zn}},__type__:{object:zn}},__type__:{object:zn}},J8e={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}};var Z8e={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class e6e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return Z8e[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let i;var s=this._isColorString(e);if(s!==void 0&&(e=s),X.isString(e)===!0){if(X.isValidRGB(e)===!0){let o=e.substr(4).substr(0,e.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(X.isValidRGBA(e)===!0){let o=e.substr(5).substr(0,e.length-6).split(",");i={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(X.isValidHex(e)===!0){let o=X.hexToRGB(e);i={r:o.r,g:o.g,b:o.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){let o=e.a!==void 0?e.a:"1.0";i={r:e.r,g:e.g,b:e.b,a:o}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+ui(e));this._setColor(i,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=X.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Rr(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=X.extend({},e)),this.color=e;let i=X.RGBToHSV(e.r,e.g,e.b),s=2*Math.PI,o=this.r*i.s,a=this.centerCoordinates.x+o*Math.sin(s*i.h),l=this.centerCoordinates.y+o*Math.cos(s*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){let r=X.RGBToHSV(this.color.r,this.color.g,this.color.b);r.v=e/100;let i=X.HSVToRGB(r.h,r.s,r.v);i.a=this.color.a,this.color=i,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,r=X.RGBToHSV(e.r,e.g,e.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,s,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-r.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),lne(i).call(i),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,i,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){let a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{let a=document.createElement("DIV");a.style.color="red",a.style.fontWeight="bold",a.style.padding="10px",a.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(a)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var o=this;this.opacityRange.onchange=function(){o._setOpacity(this.value)},this.opacityRange.oninput=function(){o._setOpacity(this.value)},this.brightnessRange.onchange=function(){o._setBrightness(this.value)},this.brightnessRange.oninput=function(){o._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=Ee(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=Ee(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=Ee(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=Ee(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new Hr(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),lre(this.hammer,e=>{this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){let e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let r=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,i);let s,o,a,l;this.centerCoordinates={x:r*.5,y:i*.5},this.r=.49*r;let c=2*Math.PI/360,u=1/360,h=1/this.r,d;for(a=0;a<360;a++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*Math.sin(c*a),o=this.centerCoordinates.y+l*Math.cos(c*a),d=X.HSVToRGB(a*u,l*h,1),e.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",e.fillRect(s-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,i)}this.generated=!0}_moveSelector(e){let r=this.colorPickerDiv.getBoundingClientRect(),i=e.center.x-r.left,s=e.center.y-r.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=i-a,c=s-o,u=Math.atan2(l,c),h=.98*Math.min(Math.sqrt(l*l+c*c),a),d=Math.cos(u)*h+o,f=Math.sin(u)*h+a;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=u/(2*Math.PI);p=p<0?p+1:p;let g=h/this.r,b=X.RGBToHSV(this.color.r,this.color.g,this.color.b);b.h=p,b.s=g;let y=X.HSVToRGB(b.h,b.s,b.v);y.a=this.color.a,this.color=y,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}class yre{constructor(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},X.extend(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new e6e(s),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(Et(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),ht(e)!==void 0&&(this.options.filter=ht(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);ht(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];let e=ht(this.options),r=0,i=!1;for(let s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,i=!1,typeof e=="function"?(i=e(s,[]),i=i||this._handleObject(this.configureOptions[s],[s],!0)):(e===!0||nn(e).call(e,s)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let i=0;i<e.length;i++)if(r[e[i]]!==void 0)r=r[e[i]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){let o=document.createElement("div");o.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return Qe(i).call(i,a=>{o.appendChild(a)}),this.domElements.push(o),this.domElements.length}return 0}_makeHeader(e){let r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerHTML=X.xss(e),this._makeItem([],r)}_makeLabel(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=document.createElement("div");return s.className="vis-configuration vis-config-label vis-config-s"+r.length,i===!0?s.innerHTML=X.xss("<i><b>"+e+":</b></i>"):s.innerHTML=X.xss(e+":"),s}_makeDropdown(e,r,i){let s=document.createElement("select");s.className="vis-configuration vis-config-select";let o=0;r!==void 0&&nn(e).call(e,r)!==-1&&(o=nn(e).call(e,r));for(let c=0;c<e.length;c++){let u=document.createElement("option");u.value=e[c],c===o&&(u.selected="selected"),u.innerHTML=e[c],s.appendChild(u)}let a=this;s.onchange=function(){a._update(this.value,i)};let l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,s)}_makeRange(e,r,i){let s=e[0],o=e[1],a=e[2],l=e[3],c=document.createElement("input");c.className="vis-configuration vis-config-range";try{c.type="range",c.min=o,c.max=a}catch{}c.step=l;let u="",h=0;if(r!==void 0){let b=1.2;r<0&&r*b<o?(c.min=Math.ceil(r*b),h=c.min,u="range increased"):r/b<o&&(c.min=Math.ceil(r/b),h=c.min,u="range increased"),r*b>a&&a!==1&&(c.max=Math.ceil(r*b),h=c.max,u="range increased"),c.value=r}else c.value=s;let d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=Number(c.value);var f=this;c.onchange=function(){d.value=this.value,f._update(Number(this.value),i)},c.oninput=function(){d.value=this.value};let p=this._makeLabel(i[i.length-1],i),g=this._makeItem(i,p,c,d);u!==""&&this.popupHistory[g]!==h&&(this.popupHistory[g]=h,this._setupPopup(u,g))}_makeButton(){if(this.options.showButton===!0){let e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){let i=document.createElement("div");i.id="vis-configuration-popup",i.className="vis-configuration-popup",i.innerHTML=X.xss(e),i.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:i,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){let r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Rr(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Rr(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,i){var s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=e,r!==void 0&&(s.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:i,value:r}):this.changedOptions.push({path:i,value:r})));let o=this;s.onchange=function(){o._update(this.checked,i)};let a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}_makeTextInput(e,r,i){var s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=r,r!==e&&this.changedOptions.push({path:i,value:r});let o=this;s.onchange=function(){o._update(this.value,i)};let a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}_makeColorField(e,r,i){let s=e[1],o=document.createElement("div");r=r===void 0?s:r,r!=="none"?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=r):o.className="vis-configuration vis-config-colorBlock none",r=r===void 0?s:r,o.onclick=()=>{this._showColorPicker(r,o,i)};let a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,o)}_showColorPicker(e,r,i){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(s=>{let o="rgba("+s.r+","+s.g+","+s.b+","+s.a+")";r.style.backgroundColor=o,this._update(o,i)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,i)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1,o=ht(this.options),a=!1;for(let l in e){if(!Object.prototype.hasOwnProperty.call(e,l))continue;s=!0;let c=e[l],u=X.copyAndExtendArray(r,l);if(typeof o=="function"&&(s=o(l,r),s===!1&&!Et(c)&&typeof c!="string"&&typeof c!="boolean"&&c instanceof Object&&(this.allowCreation=!1,s=this._handleObject(c,u,!0),this.allowCreation=i===!1)),s!==!1){a=!0;let h=this._getValue(u);if(Et(c))this._handleArray(c,h,u);else if(typeof c=="string")this._makeTextInput(c,h,u);else if(typeof c=="boolean")this._makeCheckbox(c,h,u);else if(c instanceof Object){let d=!0;if(nn(r).call(r,"physics")!==-1&&this.moduleOptions.physics.solver!==l&&(d=!1),d===!0)if(c.enabled!==void 0){let f=X.copyAndExtendArray(u,"enabled"),p=this._getValue(f);if(p===!0){let g=this._makeLabel(l,u,!0);this._makeItem(u,g),a=this._handleObject(c,u)||a}else this._makeCheckbox(c,p,u)}else{let f=this._makeLabel(l,u,!0);this._makeItem(u,f),a=this._handleObject(c,u)||a}}else console.error("dont know how to handle",c,l,u)}}return a}_handleArray(e,r,i){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,i),e[1]!==r&&this.changedOptions.push({path:i,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,i),e[0]!==r&&this.changedOptions.push({path:i,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,i),e[0]!==r&&this.changedOptions.push({path:i,value:Number(r)}))}_update(e,r){let i=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}_constructOptions(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let o=0;o<r.length;o++)r[o]!=="global"&&(s[r[o]]===void 0&&(s[r[o]]={}),o!==r.length-1?s=s[r[o]]:s[r[o]]=e);return i}_printOptions(){let e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+ui(e,null,2)+"</pre>"}getOptions(){let e={};for(var r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}}class f3 extends oh{constructor(e,r,i,s){var o,a,l,c,u,h,d;if(super(),this.initTime=new Date,this.itemsDone=!1,!(this instanceof f3))throw new SyntaxError("Constructor must be called with the new operator");if(!(Et(i)||Na(i))&&i instanceof Object){const y=s;s=i,i=y}s&&s.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');const f=this;if(this.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:Yr},this.options=X.deepExtend({},this.defaultOptions),s&&X.setupXSSProtection(s.xss),this._create(e),!s||s&&typeof s.rtl>"u"){this.dom.root.style.visibility="hidden";let y,v=this.dom.root;for(;!y&&v;)y=window.getComputedStyle(v,null).direction,v=v.parentElement;this.options.rtl=y&&y.toLowerCase()=="rtl"}else this.options.rtl=s.rtl;s&&(s.rollingMode&&(this.options.rollingMode=s.rollingMode),s.onInitialDrawComplete&&(this.options.onInitialDrawComplete=s.onInitialDrawComplete),s.onTimeout&&(this.options.onTimeout=s.onTimeout),s.loadingScreenTemplate&&(this.options.loadingScreenTemplate=s.loadingScreenTemplate));const p=document.createElement("div");if(this.options.loadingScreenTemplate){var g;const y=Ee(g=this.options.loadingScreenTemplate).call(g,this),v=y(this.dom.loadingScreen);v instanceof Object&&!(v instanceof Element)?y(p):v instanceof Element?(p.innerHTML="",p.appendChild(v)):v!=null&&(p.innerHTML=X.xss(v))}this.dom.loadingScreen.appendChild(p),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:Ee(o=this.on).call(o,this),off:Ee(a=this.off).call(a,this),emit:Ee(l=this.emit).call(l,this)},hiddenDates:[],util:{getScale(){return f.timeAxis.step.scale},getStep(){return f.timeAxis.step.step},toScreen:Ee(c=f._toScreen).call(c,f),toGlobalScreen:Ee(u=f._toGlobalScreen).call(u,f),toTime:Ee(h=f._toTime).call(h,f),toGlobalTime:Ee(d=f._toGlobalTime).call(d,f)}},this.range=new F1(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Yx(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new vre(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new Nu(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null;function b(y,v){f.hasListeners(y)&&f.emit(y,f.getEventProperties(v))}this.dom.root.onclick=y=>b("click",y),this.dom.root.ondblclick=y=>b("doubleClick",y),this.dom.root.oncontextmenu=y=>b("contextmenu",y),this.dom.root.onmouseover=y=>b("mouseOver",y),window.PointerEvent?(this.dom.root.onpointerdown=y=>b("mouseDown",y),this.dom.root.onpointermove=y=>b("mouseMove",y),this.dom.root.onpointerup=y=>b("mouseUp",y)):(this.dom.root.onmousemove=y=>b("mouseMove",y),this.dom.root.onmousedown=y=>b("mouseDown",y),this.dom.root.onmouseup=y=>b("mouseUp",y)),this.initialFitDone=!1,this.on("changed",()=>{if(f.itemsData!=null){if(!f.initialFitDone&&!f.options.rollingMode)if(f.initialFitDone=!0,f.options.start!=null||f.options.end!=null){if(f.options.start==null||f.options.end==null)var y=f.getItemRange();const v=f.options.start!=null?f.options.start:y.min,w=f.options.end!=null?f.options.end:y.max;f.setWindow(v,w,{animation:!1})}else f.fit({animation:!1});!f.initialDrawDone&&(f.initialRangeChangeDone||!f.options.start&&!f.options.end||f.options.rollingMode)&&(f.initialDrawDone=!0,f.itemSet.initialDrawDone=!0,f.dom.root.style.visibility="visible",f.dom.loadingScreen.parentNode.removeChild(f.dom.loadingScreen),f.options.onInitialDrawComplete&&Rr(()=>f.options.onInitialDrawComplete(),0))}}),this.on("destroyTimeline",()=>{f.destroy()}),s&&this.setOptions(s),this.body.emitter.on("fit",y=>{this._onFit(y),this.redraw()}),i&&this.setGroups(i),r&&this.setItems(r),this._redraw()}_createConfigurator(){return new yre(this,this.dom.container,J8e)}redraw(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}setOptions(e){if(wn.validate(e,Q8e)===!0&&console.log("%cErrors have been found in the supplied options object.",Gx),oh.prototype.setOptions.call(this,e),"type"in e&&e.type!==this.options.type){this.options.type=e.type;const i=this.itemsData;if(i){const s=this.getSelection();this.setItems(null),this.setItems(i.rawDS),this.setSelection(s)}}}setItems(e){this.itemsDone=!1;let r;e?Na(e)?r=bf(e):r=bf(new vf(e)):r=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=r,this.itemSet&&this.itemSet.setItems(r!=null?r.rawDS:null)}setGroups(e){let r;const i=s=>s.visible!==!1;e?(Et(e)&&(e=new vf(e)),r=new hLe(e,{filter:i})):r=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=r,this.itemSet.setGroups(r)}setData(e){e&&e.groups&&this.setGroups(e.groups),e&&e.items&&this.setItems(e.items)}setSelection(e,r){this.itemSet&&this.itemSet.setSelection(e),r&&r.focus&&this.focus(e,r)}getSelection(){return this.itemSet&&this.itemSet.getSelection()||[]}focus(e,r){if(!this.itemsData||e==null)return;const i=Et(e)?e:[e],s=this.itemsData.get(i);let o=null,a=null;if(Qe(s).call(s,l=>{const c=l.start.valueOf(),u="end"in l?l.end.valueOf():l.start.valueOf();(o===null||c<o)&&(o=c),(a===null||u>a)&&(a=u)}),o!==null&&a!==null){const l=this,c=this.itemSet.items[i[0]];let u=this._getScrollTop()*-1,h=null;const d=(w,k,_)=>{const S=ZV(l,c);if(S===!1||(h||(h=S),h.itemTop==S.itemTop&&!h.shouldScroll))return;h.itemTop!=S.itemTop&&S.shouldScroll&&(h=S,u=l._getScrollTop()*-1);const C=u,E=h.scrollOffset,P=_?E:C+(E-C)*w;l._setScrollTop(-P),k||l._redraw()},f=()=>{const w=ZV(l,c);w.shouldScroll&&w.itemTop!=h.itemTop&&(l._setScrollTop(-w.scrollOffset),l._redraw())},p=()=>{f(),Rr(f,100)},g=r&&r.zoom!==void 0?r.zoom:!0,b=(o+a)/2,y=g?(a-o)*1.1:Math.max(this.range.end-this.range.start,(a-o)*1.1),v=r&&r.animation!==void 0?r.animation:!0;v||(h={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.stopRolling(),this.range.setRange(b-y/2,b+y/2,{animation:v},p,d)}}fit(e,r){const i=e&&e.animation!==void 0?e.animation:!0;let s;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(s=this.getDataRange(),this.moveTo(s.min.valueOf(),{animation:i},r)):(s=this.getItemRange(),this.range.setRange(s.min,s.max,{animation:i},r))}getItemRange(){const e=this.getDataRange();let r=e.min!==null?e.min.valueOf():null,i=e.max!==null?e.max.valueOf():null,s=null,o=null;if(r!=null&&i!=null){let a=i-r;a<=0&&(a=10);const l=a/this.props.center.width,c={};let u=0;if(Qe(X).call(X,this.itemSet.items,(d,f)=>{d.groupShowing&&(c[f]=d.redraw(!0),u=c[f].length)}),u>0)for(let d=0;d<u;d++)Qe(X).call(X,c,f=>{f[d]()});if(Qe(X).call(X,this.itemSet.items,d=>{const f=DM(d),p=OM(d);let g,b;this.options.rtl?(g=f-(d.getWidthRight()+10)*l,b=p+(d.getWidthLeft()+10)*l):(g=f-(d.getWidthLeft()+10)*l,b=p+(d.getWidthRight()+10)*l),g<r&&(r=g,s=d),b>i&&(i=b,o=d)}),s&&o){const d=s.getWidthLeft()+10,f=o.getWidthRight()+10,p=this.props.center.width-d-f;p>0&&(this.options.rtl?(r=DM(s)-f*a/p,i=OM(o)+d*a/p):(r=DM(s)-d*a/p,i=OM(o)+f*a/p))}}return{min:r!=null?new Date(r):null,max:i!=null?new Date(i):null}}getDataRange(){let e=null,r=null;if(this.itemsData){var i;Qe(i=this.itemsData).call(i,s=>{const o=X.convert(s.start,"Date").valueOf(),a=X.convert(s.end!=null?s.end:s.start,"Date").valueOf();(e===null||o<e)&&(e=o),(r===null||a>r)&&(r=a)})}return{min:e!=null?new Date(e):null,max:r!=null?new Date(r):null}}getEventProperties(e){const r=e.center?e.center.x:e.clientX,i=e.center?e.center.y:e.clientY,s=this.dom.centerContainer.getBoundingClientRect(),o=this.options.rtl?s.right-r:r-s.left,a=i-s.top,l=this.itemSet.itemFromTarget(e),c=this.itemSet.groupFromTarget(e),u=d3.customTimeFromTarget(e),h=this.itemSet.options.snap||null,d=this.body.util.getScale(),f=this.body.util.getStep(),p=this._toTime(o),g=h?h(p,d,f):p,b=X.getTarget(e);let y=null;return l!=null?y="item":u!=null?y="custom-time":X.hasParent(b,this.timeAxis.dom.foreground)||this.timeAxis2&&X.hasParent(b,this.timeAxis2.dom.foreground)?y="axis":X.hasParent(b,this.itemSet.dom.labelSet)?y="group-label":X.hasParent(b,this.currentTime.bar)?y="current-time":X.hasParent(b,this.dom.center)&&(y="background"),{event:e,item:l?l.id:null,isCluster:l?!!l.isCluster:!1,items:l?l.items||[]:null,group:c?c.groupId:null,customTime:u?u.options.id:null,what:y,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:o,y:a,time:p,snappedTime:g}}toggleRollingMode(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}_redraw(){oh.prototype._redraw.call(this)}_onFit(e){const{start:r,end:i,animation:s}=e;i?this.range.setRange(r,i,{animation:s}):this.moveTo(r.valueOf(),{animation:s})}}function DM(n){return X.convert(n.data.start,"Date").valueOf()}function OM(n){const e=n.data.end!=null?n.data.end:n.data.start;return X.convert(e,"Date").valueOf()}function ZV(n,e){if(!e.parent)return!1;const r=n.options.rtl?n.props.rightContainer.height:n.props.leftContainer.height,i=n.props.center.height,s=e.parent;let o=s.top,a=!0;const l=n.timeAxis.options.orientation.axis,c=()=>l=="bottom"?s.height-e.top-e.height:e.top,u=n._getScrollTop()*-1,h=o+c(),d=e.height;return h<u?o+r<=o+c()+d&&(o+=c()-n.itemSet.options.margin.item.vertical):h+d>u+r?o+=c()+d-r+n.itemSet.options.margin.item.vertical:a=!1,o=Math.min(o,i-r),{shouldScroll:a,scrollOffset:o,itemTop:h}}class t6e{constructor(e,r,i,s,o,a){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=o,this.majorCharHeight=a,this._start=e,this._end=r,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=l,this.autoScaleStart=i,this.autoScaleEnd=s,this.formattingFunction=c,i||s){const u=this,h=d=>{const f=d-d%(u.magnitudefactor*u.minorSteps[u.minorStepIdx]);return d%(u.magnitudefactor*u.minorSteps[u.minorStepIdx])>.5*(u.magnitudefactor*u.minorSteps[u.minorStepIdx])?f+u.magnitudefactor*u.minorSteps[u.minorStepIdx]:f};i&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=h(this._start)),s&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=h(this._end)),this.determineScale()}}setCharHeight(e){this.majorCharHeight=e}setHeight(e){this.containerHeight=e}determineScale(){const e=this._end-this._start;this.scale=this.containerHeight/e;const r=this.majorCharHeight/this.scale,i=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,i);let s=0;i<0&&(s=i);let o=!1;for(let a=s;Math.abs(a)<=Math.abs(i);a++){this.magnitudefactor=Math.pow(10,a);for(let l=0;l<this.minorSteps.length;l++)if(this.magnitudefactor*this.minorSteps[l]>=r){o=!0,this.minorStepIdx=l;break}if(o===!0)break}}is_major(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0}getStep(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}getFirstMajor(){const e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)}formatValue(e){let r=e.toPrecision(5);return typeof this.formattingFunction=="function"&&(r=this.formattingFunction(e)),typeof r=="number"?"".concat(r):typeof r=="string"?r:e.toPrecision(5)}getLines(){const e=[],r=this.getStep(),i=(r-this._start%r)%r;for(let s=this._start+i;this._end-s>1e-5;s+=r)s!=this._start&&e.push({major:this.is_major(s),y:this.convertValue(s),val:this.formatValue(s)});return e}followScale(e){const r=this.minorStepIdx,i=this._start,s=this._end,o=this,a=()=>{o.magnitudefactor*=2},l=()=>{o.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,r==2||a(),a()):(this.minorStepIdx=2,r==1||l(),l()));const c=e.convertValue(0),u=e.getStep()*e.scale;let h=!1,d=0;for(;!h&&d++<5;){this.scale=u/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);const f=this.containerHeight/this.scale;this._start=i,this._end=this._start+f;const p=this._end*this.scale,g=this.magnitudefactor*this.majorSteps[this.minorStepIdx],b=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){const y=c-p;this._end+=y/this.scale,this._start=this._end-f}else this.autoScaleStart?(this._start-=b/this.scale,this._end=this._start+f):(this._start+=g-b/this.scale,this._end=this._start+f);if(!this.autoScaleEnd&&this._end>s+1e-5){l(),h=!1;continue}if(!this.autoScaleStart&&this._start<i-1e-5)if(this.zeroAlign&&i>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{l(),h=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&f<s-i){a(),h=!1;continue}h=!0}}convertValue(e){return this.containerHeight-(e-this._start)*this.scale}screenToValue(e){return(this.containerHeight-e)/this.scale+this._start}}class eY extends ac{constructor(e,r,i,s){super(),this.id=uu(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format(a){return"".concat(qx(a.toPrecision(3)))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format(a){return"".concat(qx(a.toPrecision(3)))},title:{text:void 0,style:void 0}}},this.linegraphOptions=s,this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=X.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(r),this.width=Number("".concat(this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.scale==null&&this._redrawLabels(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};const o=this;this.body.emitter.on("verticalDrag",()=>{o.dom.lineContainer.style.top="".concat(o.body.domProps.scrollTop,"px")})}addGroup(e,r){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.groups[e]=r),this.amountOfGroups+=1}updateGroup(e,r){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.amountOfGroups+=1),this.groups[e]=r}removeGroup(e){Object.prototype.hasOwnProperty.call(this.groups,e)&&(delete this.groups[e],this.amountOfGroups-=1)}setOptions(e){if(e){let r=!1;this.options.orientation!=e.orientation&&e.orientation!==void 0&&(r=!0);const i=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];X.selectiveDeepExtend(i,this.options,e),this.minWidth=Number("".concat(this.options.width).replace("px","")),r===!0&&this.dom.frame&&(this.hide(),this.show())}}_create(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}_redrawGroupIcons(){hl(this.svgElements);let e;const r=this.options.iconWidth,i=15,s=4;let o=s+.5*i;this.options.orientation==="left"?e=s:e=this.width-r-s;const a=nr(this.groups);Hn(a).call(a,(l,c)=>l<c?-1:1);for(const l of a)this.groups[l].visible===!0&&(this.linegraphOptions.visibility[l]===void 0||this.linegraphOptions.visibility[l]===!0)&&(this.groups[l].getLegend(r,i,this.framework,e,o),o+=i+s);ss(this.svgElements),this.iconsRemoved=!1}_cleanupIcons(){this.iconsRemoved===!1&&(hl(this.svgElements),ss(this.svgElements),this.iconsRemoved=!0)}show(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}hide(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}setRange(e,r){this.range.start=e,this.range.end=r}redraw(){let e=!1,r=0;this.dom.lineContainer.style.top="".concat(this.body.domProps.scrollTop,"px");for(const i in this.groups)Object.prototype.hasOwnProperty.call(this.groups,i)&&this.groups[i].visible===!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]===!0)&&r++;if(this.amountOfGroups===0||r===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height="".concat(this.height,"px"),this.width=this.options.visible===!0?Number("".concat(this.options.width).replace("px","")):0;const i=this.props,s=this.dom.frame;s.className="vis-data-axis",this._calculateCharSize();const o=this.options.orientation,a=this.options.showMinorLabels,l=this.options.showMajorLabels,c=this.body.dom.backgroundHorizontal.offsetWidth;i.minorLabelHeight=a?i.minorCharHeight:0,i.majorLabelHeight=l?i.majorCharHeight:0,i.minorLineWidth=c-this.lineOffset-this.width+2*this.options.minorLinesOffset,i.minorLineHeight=1,i.majorLineWidth=c-this.lineOffset-this.width+2*this.options.majorLinesOffset,i.majorLineHeight=1,o==="left"?(s.style.top="0",s.style.left="0",s.style.bottom="",s.style.width="".concat(this.width,"px"),s.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(s.style.top="",s.style.bottom="0",s.style.left="0",s.style.width="".concat(this.width,"px"),s.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(o)}return e}_redrawLabels(){let e=!1;hl(this.DOMelements.lines),hl(this.DOMelements.labels);const r=this.options.orientation,i=this.options[r].range!=null?this.options[r].range:{};let s=!0;i.max!=null&&(this.range.end=i.max,s=!1);let o=!0;i.min!=null&&(this.range.start=i.min,o=!1),this.scale=new t6e(this.range.start,this.range.end,o,s,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[r].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0;const a=this.scale.getLines();Qe(a).call(a,u=>{const h=u.y,d=u.major;this.options.showMinorLabels&&d===!1&&this._redrawLabel(h-2,u.val,r,"vis-y-axis vis-minor",this.props.minorCharHeight),d&&h>=0&&this._redrawLabel(h-2,u.val,r,"vis-y-axis vis-major",this.props.majorCharHeight),this.master===!0&&(d?this._redrawLine(h,r,"vis-grid vis-horizontal vis-major",this.options.majorLinesOffset,this.props.majorLineWidth):this._redrawLine(h,r,"vis-grid vis-horizontal vis-minor",this.options.minorLinesOffset,this.props.minorLineWidth))});let l=0;this.options[r].title!==void 0&&this.options[r].title.text!==void 0&&(l=this.props.titleCharHeight);const c=this.options.icons===!0?Math.max(this.options.iconWidth,l)+this.options.labelOffsetX+15:l+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-c&&this.options.visible===!0?(this.width=this.maxLabelSize+c,this.options.width="".concat(this.width,"px"),ss(this.DOMelements.lines),ss(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-c&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+c),this.options.width="".concat(this.width,"px"),ss(this.DOMelements.lines),ss(this.DOMelements.labels),this.redraw(),e=!0):(ss(this.DOMelements.lines),ss(this.DOMelements.labels),e=!1),e}convertValue(e){return this.scale.convertValue(e)}screenToValue(e){return this.scale.screenToValue(e)}_redrawLabel(e,r,i,s,o){const a=XE("div",this.DOMelements.labels,this.dom.frame);a.className=s,a.innerHTML=X.xss(r),i==="left"?(a.style.left="-".concat(this.options.labelOffsetX,"px"),a.style.textAlign="right"):(a.style.right="-".concat(this.options.labelOffsetX,"px"),a.style.textAlign="left"),a.style.top="".concat(e-.5*o+this.options.labelOffsetY,"px"),r+="";const l=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<r.length*l&&(this.maxLabelSize=r.length*l)}_redrawLine(e,r,i,s,o){if(this.master===!0){const a=XE("div",this.DOMelements.lines,this.dom.lineContainer);a.className=i,a.innerHTML="",r==="left"?a.style.left="".concat(this.width-s,"px"):a.style.right="".concat(this.width-s,"px"),a.style.width="".concat(o,"px"),a.style.top="".concat(e,"px")}}_redrawTitle(e){if(hl(this.DOMelements.title),this.options[e].title!==void 0&&this.options[e].title.text!==void 0){const r=XE("div",this.DOMelements.title,this.dom.frame);r.className="vis-y-axis vis-title vis-".concat(e),r.innerHTML=X.xss(this.options[e].title.text),this.options[e].title.style!==void 0&&X.addCssText(r,this.options[e].title.style),e==="left"?r.style.left="".concat(this.props.titleCharHeight,"px"):r.style.right="".concat(this.props.titleCharHeight,"px"),r.style.width="".concat(this.height,"px")}ss(this.DOMelements.title)}_calculateCharSize(){if(!("minorCharHeight"in this.props)){const e=document.createTextNode("0"),r=document.createElement("div");r.className="vis-y-axis vis-minor vis-measure",r.appendChild(e),this.dom.frame.appendChild(r),this.props.minorCharHeight=r.clientHeight,this.props.minorCharWidth=r.clientWidth,this.dom.frame.removeChild(r)}if(!("majorCharHeight"in this.props)){const e=document.createTextNode("0"),r=document.createElement("div");r.className="vis-y-axis vis-major vis-measure",r.appendChild(e),this.dom.frame.appendChild(r),this.props.majorCharHeight=r.clientHeight,this.props.majorCharWidth=r.clientWidth,this.dom.frame.removeChild(r)}if(!("titleCharHeight"in this.props)){const e=document.createTextNode("0"),r=document.createElement("div");r.className="vis-y-axis vis-title vis-measure",r.appendChild(e),this.dom.frame.appendChild(r),this.props.titleCharHeight=r.clientHeight,this.props.titleCharWidth=r.clientWidth,this.dom.frame.removeChild(r)}}}function J0(){}J0.draw=function(n,e,r,i){i=i||0;for(var s=n6e(r,e),o=0;o<n.length;o++)if(!s)gf(n[o].screen_x+i,n[o].screen_y,gI(e),r.svgElements,r.svg,n[o].label);else{var a=s(n[o],e);(a===!0||typeof a=="object")&&gf(n[o].screen_x+i,n[o].screen_y,gI(e,a),r.svgElements,r.svg,n[o].label)}};J0.drawIcon=function(n,e,r,i,s,o){var a=s*.5,l=Hs("rect",o.svgElements,o.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",r-a),l.setAttributeNS(null,"width",i),l.setAttributeNS(null,"height",2*a),l.setAttributeNS(null,"class","vis-outline"),gf(e+.5*i,r,gI(n),o.svgElements,o.svg)};function gI(n,e){return e=typeof e>"u"?{}:e,{style:e.style||n.options.drawPoints.style,styles:e.styles||n.options.drawPoints.styles,size:e.size||n.options.drawPoints.size,className:e.className||n.className}}function n6e(n,e){var r=void 0;return n.options&&n.options.drawPoints&&n.options.drawPoints.onRender&&typeof n.options.drawPoints.onRender=="function"&&(r=n.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&typeof e.group.options.drawPoints.onRender=="function"&&(r=e.group.options.drawPoints.onRender),r}function Gr(){}Gr.drawIcon=function(n,e,r,i,s,o){var a=s*.5,l=Hs("rect",o.svgElements,o.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",r-a),l.setAttributeNS(null,"width",i),l.setAttributeNS(null,"height",2*a),l.setAttributeNS(null,"class","vis-outline");var c=Math.round(.3*i),u=n.options.barChart.width,h=u/c,d=Math.round(.4*s),f=Math.round(.75*s),p=Math.round((i-2*c)/3);if(cI(e+.5*c+p,r+a-d-1,c,d,n.className+" vis-bar",o.svgElements,o.svg,n.style),cI(e+1.5*c+p+2,r+a-f-1,c,f,n.className+" vis-bar",o.svgElements,o.svg,n.style),n.options.drawPoints.enabled==!0){var g={style:n.options.drawPoints.style,styles:n.options.drawPoints.styles,size:n.options.drawPoints.size/h,className:n.className};gf(e+.5*c+p,r+a-d-1,g,o.svgElements,o.svg),gf(e+1.5*c+p+2,r+a-f-1,g,o.svgElements,o.svg)}};Gr.draw=function(n,e,r){var i=[],s={},o,a,l,c,u,h,d=0;for(u=0;u<n.length;u++)if(c=r.groups[n[u]],c.options.style==="bar"&&c.visible===!0&&(r.options.groups.visibility[n[u]]===void 0||r.options.groups.visibility[n[u]]===!0))for(h=0;h<e[n[u]].length;h++)i.push({screen_x:e[n[u]][h].screen_x,screen_end:e[n[u]][h].screen_end,screen_y:e[n[u]][h].screen_y,x:e[n[u]][h].x,end:e[n[u]][h].end,y:e[n[u]][h].y,groupId:n[u],label:e[n[u]][h].label}),d+=1;if(d!==0)for(Hn(i).call(i,function(b,y){return b.screen_x===y.screen_x?b.groupId<y.groupId?-1:1:b.screen_x-y.screen_x}),Gr._getDataIntersections(s,i),u=0;u<i.length;u++){c=r.groups[i[u].groupId];var f=c.options.barChart.minWidth!=null?c.options.barChart.minWidth:.1*c.options.barChart.width;a=i[u].screen_x;var p=0;if(s[a]===void 0)u+1<i.length&&(o=Math.abs(i[u+1].screen_x-a)),l=Gr._getSafeDrawData(o,c,f);else{var g=u+(s[a].amount-s[a].resolved);g<i.length&&(o=Math.abs(i[g].screen_x-a)),l=Gr._getSafeDrawData(o,c,f),s[a].resolved+=1,c.options.stack===!0&&c.options.excludeFromStacking!==!0?i[u].screen_y<c.zeroPosition?(p=s[a].accumulatedNegative,s[a].accumulatedNegative+=c.zeroPosition-i[u].screen_y):(p=s[a].accumulatedPositive,s[a].accumulatedPositive+=c.zeroPosition-i[u].screen_y):c.options.barChart.sideBySide===!0&&(l.width=l.width/s[a].amount,l.offset+=s[a].resolved*l.width-.5*l.width*(s[a].amount+1))}let b=l.width,y=i[u].screen_x;if(i[u].screen_end!=null?(b=i[u].screen_end-i[u].screen_x,y+=b*.5):y+=l.offset,cI(y,i[u].screen_y-p,b,c.zeroPosition-i[u].screen_y,c.className+" vis-bar",r.svgElements,r.svg,c.style),c.options.drawPoints.enabled===!0){let v={screen_x:i[u].screen_x,screen_y:i[u].screen_y-p,x:i[u].x,y:i[u].y,groupId:i[u].groupId,label:i[u].label};J0.draw([v],c,r,l.offset)}}};Gr._getDataIntersections=function(n,e){for(var r,i=0;i<e.length;i++)i+1<e.length&&(r=Math.abs(e[i+1].screen_x-e[i].screen_x)),i>0&&(r=Math.min(r,Math.abs(e[i-1].screen_x-e[i].screen_x))),r===0&&(n[e[i].screen_x]===void 0&&(n[e[i].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),n[e[i].screen_x].amount+=1)};Gr._getSafeDrawData=function(n,e,r){var i,s;return n<e.options.barChart.width&&n>0?(i=n<r?r:n,s=0,e.options.barChart.align==="left"?s-=.5*n:e.options.barChart.align==="right"&&(s+=.5*n)):(i=e.options.barChart.width,s=0,e.options.barChart.align==="left"?s-=.5*e.options.barChart.width:e.options.barChart.align==="right"&&(s+=.5*e.options.barChart.width)),{width:i,offset:s}};Gr.getStackedYRange=function(n,e,r,i,s){if(n.length>0){Hn(n).call(n,function(a,l){return a.screen_x===l.screen_x?a.groupId<l.groupId?-1:1:a.screen_x-l.screen_x});var o={};Gr._getDataIntersections(o,n),e[i]=Gr._getStackedYRange(o,n),e[i].yAxisOrientation=s,r.push(i)}};Gr._getStackedYRange=function(n,e){for(var r,i=e[0].screen_y,s=e[0].screen_y,o=0;o<e.length;o++)r=e[o].screen_x,n[r]===void 0?(i=i>e[o].screen_y?e[o].screen_y:i,s=s<e[o].screen_y?e[o].screen_y:s):e[o].screen_y<0?n[r].accumulatedNegative+=e[o].screen_y:n[r].accumulatedPositive+=e[o].screen_y;for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i=i>n[a].accumulatedNegative?n[a].accumulatedNegative:i,i=i>n[a].accumulatedPositive?n[a].accumulatedPositive:i,s=s<n[a].accumulatedNegative?n[a].accumulatedNegative:s,s=s<n[a].accumulatedPositive?n[a].accumulatedPositive:s);return{min:i,max:s}};function yr(){}yr.calcPath=function(n,e){if(n!=null&&n.length>0){var r=[];return e.options.interpolation.enabled==!0?r=yr._catmullRom(n,e):r=yr._linear(n),r}};yr.drawIcon=function(n,e,r,i,s,o){var a=s*.5,l,c,u=Hs("rect",o.svgElements,o.svg);if(u.setAttributeNS(null,"x",e),u.setAttributeNS(null,"y",r-a),u.setAttributeNS(null,"width",i),u.setAttributeNS(null,"height",2*a),u.setAttributeNS(null,"class","vis-outline"),l=Hs("path",o.svgElements,o.svg),l.setAttributeNS(null,"class",n.className),n.style!==void 0&&l.setAttributeNS(null,"style",n.style),l.setAttributeNS(null,"d","M"+e+","+r+" L"+(e+i)+","+r),n.options.shaded.enabled==!0&&(c=Hs("path",o.svgElements,o.svg),n.options.shaded.orientation=="top"?c.setAttributeNS(null,"d","M"+e+", "+(r-a)+"L"+e+","+r+" L"+(e+i)+","+r+" L"+(e+i)+","+(r-a)):c.setAttributeNS(null,"d","M"+e+","+r+" L"+e+","+(r+a)+" L"+(e+i)+","+(r+a)+"L"+(e+i)+","+r),c.setAttributeNS(null,"class",n.className+" vis-icon-fill"),n.options.shaded.style!==void 0&&n.options.shaded.style!==""&&c.setAttributeNS(null,"style",n.options.shaded.style)),n.options.drawPoints.enabled==!0){var h={style:n.options.drawPoints.style,styles:n.options.drawPoints.styles,size:n.options.drawPoints.size,className:n.className};gf(e+.5*i,r,h,o.svgElements,o.svg)}};yr.drawShading=function(n,e,r,i){if(e.options.shaded.enabled==!0){var s=Number(i.svg.style.height.replace("px","")),o=Hs("path",i.svgElements,i.svg),a="L";e.options.interpolation.enabled==!0&&(a="C");var l,c=0;e.options.shaded.orientation=="top"?c=0:e.options.shaded.orientation=="bottom"?c=s:c=Math.min(Math.max(0,e.zeroPosition),s),e.options.shaded.orientation=="group"&&r!=null&&r!=null?l="M"+n[0][0]+","+n[0][1]+" "+this.serializePath(n,a,!1)+" L"+r[r.length-1][0]+","+r[r.length-1][1]+" "+this.serializePath(r,a,!0)+r[0][0]+","+r[0][1]+" Z":l="M"+n[0][0]+","+n[0][1]+" "+this.serializePath(n,a,!1)+" V"+c+" H"+n[0][0]+" Z",o.setAttributeNS(null,"class",e.className+" vis-fill"),e.options.shaded.style!==void 0&&o.setAttributeNS(null,"style",e.options.shaded.style),o.setAttributeNS(null,"d",l)}};yr.draw=function(n,e,r){if(n!=null&&n!=null){var i=Hs("path",r.svgElements,r.svg);i.setAttributeNS(null,"class",e.className),e.style!==void 0&&i.setAttributeNS(null,"style",e.style);var s="L";e.options.interpolation.enabled==!0&&(s="C"),i.setAttributeNS(null,"d","M"+n[0][0]+","+n[0][1]+" "+this.serializePath(n,s,!1))}};yr.serializePath=function(n,e,r){if(n.length<2)return"";var i=e,s;if(r)for(s=n.length-2;s>0;s--)i+=n[s][0]+","+n[s][1]+" ";else for(s=1;s<n.length;s++)i+=n[s][0]+","+n[s][1]+" ";return i};yr._catmullRomUniform=function(n){var e,r,i,s,o,a,l=[];l.push([Math.round(n[0].screen_x),Math.round(n[0].screen_y)]);for(var c=1/6,u=n.length,h=0;h<u-1;h++)e=h==0?n[0]:n[h-1],r=n[h],i=n[h+1],s=h+2<u?n[h+2]:i,o={screen_x:(-e.screen_x+6*r.screen_x+i.screen_x)*c,screen_y:(-e.screen_y+6*r.screen_y+i.screen_y)*c},a={screen_x:(r.screen_x+6*i.screen_x-s.screen_x)*c,screen_y:(r.screen_y+6*i.screen_y-s.screen_y)*c},l.push([o.screen_x,o.screen_y]),l.push([a.screen_x,a.screen_y]),l.push([i.screen_x,i.screen_y]);return l};yr._catmullRom=function(n,e){var r=e.options.interpolation.alpha;if(r==0||r===void 0)return this._catmullRomUniform(n);var i,s,o,a,l,c,u,h,d,f,p,g,b,y,v,w,k,_,S,C=[];C.push([Math.round(n[0].screen_x),Math.round(n[0].screen_y)]);for(var E=n.length,P=0;P<E-1;P++)i=P==0?n[0]:n[P-1],s=n[P],o=n[P+1],a=P+2<E?n[P+2]:o,u=Math.sqrt(Math.pow(i.screen_x-s.screen_x,2)+Math.pow(i.screen_y-s.screen_y,2)),h=Math.sqrt(Math.pow(s.screen_x-o.screen_x,2)+Math.pow(s.screen_y-o.screen_y,2)),d=Math.sqrt(Math.pow(o.screen_x-a.screen_x,2)+Math.pow(o.screen_y-a.screen_y,2)),y=Math.pow(d,r),w=Math.pow(d,2*r),v=Math.pow(h,r),k=Math.pow(h,2*r),S=Math.pow(u,r),_=Math.pow(u,2*r),f=2*_+3*S*v+k,p=2*w+3*y*v+k,g=3*S*(S+v),g>0&&(g=1/g),b=3*y*(y+v),b>0&&(b=1/b),l={screen_x:(-k*i.screen_x+f*s.screen_x+_*o.screen_x)*g,screen_y:(-k*i.screen_y+f*s.screen_y+_*o.screen_y)*g},c={screen_x:(w*s.screen_x+p*o.screen_x-k*a.screen_x)*b,screen_y:(w*s.screen_y+p*o.screen_y-k*a.screen_y)*b},l.screen_x==0&&l.screen_y==0&&(l=s),c.screen_x==0&&c.screen_y==0&&(c=o),C.push([l.screen_x,l.screen_y]),C.push([c.screen_x,c.screen_y]),C.push([o.screen_x,o.screen_y]);return C};yr._linear=function(n){for(var e=[],r=0;r<n.length;r++)e.push([n[r].screen_x,n[r].screen_y]);return e};function lc(n,e,r,i){this.id=e;var s=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=X.selectiveBridgeObject(s,r),this.usingDefaultStyle=n.className===void 0,this.groupsUsingDefaultStyles=i,this.zeroPosition=0,this.update(n),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=n.visible===void 0?!0:n.visible}lc.prototype.setItems=function(n){n!=null?(this.itemsData=n,Hn(this.options)==!0&&X.insertSort(this.itemsData,function(e,r){return e.x>r.x?1:-1})):this.itemsData=[]};lc.prototype.getItems=function(){return this.itemsData};lc.prototype.setZeroPosition=function(n){this.zeroPosition=n};lc.prototype.setOptions=function(n){if(n!==void 0){var e=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];X.selectiveDeepExtend(e,this.options,n),typeof n.drawPoints=="function"&&(n.drawPoints={onRender:n.drawPoints}),X.mergeOptions(this.options,n,"interpolation"),X.mergeOptions(this.options,n,"drawPoints"),X.mergeOptions(this.options,n,"shaded"),n.interpolation&&typeof n.interpolation=="object"&&n.interpolation.parametrization&&(n.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:n.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};lc.prototype.update=function(n){this.group=n,this.content=n.content||"graph",this.className=n.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=n.visible===void 0?!0:n.visible,this.style=n.style,this.setOptions(n.options)};lc.prototype.getLegend=function(n,e,r,i,s){if(r==null||r==null){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");r={svg:o,svgElements:{},options:this.options,groups:[this]}}switch((i==null||i==null)&&(i=0),(s==null||s==null)&&(s=.5*e),this.options.style){case"line":yr.drawIcon(this,i,s,n,e,r);break;case"points":case"point":J0.drawIcon(this,i,s,n,e,r);break;case"bar":Gr.drawIcon(this,i,s,n,e,r);break}return{icon:r.svg,label:this.content,orientation:this.options.yAxisOrientation}};lc.prototype.getYRange=function(n){for(var e=n[0].y,r=n[0].y,i=0;i<n.length;i++)e=e>n[i].y?n[i].y:e,r=r<n[i].y?n[i].y:r;return{min:e,max:r,yAxisOrientation:this.options.yAxisOrientation}};function qi(n,e,r,i){this.body=n,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=r,this.options=X.extend({},this.defaultOptions),this.linegraphOptions=i,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}qi.prototype=new ac;qi.prototype.clear=function(){this.groups={},this.amountOfGroups=0};qi.prototype.addGroup=function(n,e){e.options.excludeFromLegend!=!0&&(Object.prototype.hasOwnProperty.call(this.groups,n)||(this.groups[n]=e),this.amountOfGroups+=1)};qi.prototype.updateGroup=function(n,e){this.groups[n]=e};qi.prototype.removeGroup=function(n){Object.prototype.hasOwnProperty.call(this.groups,n)&&(delete this.groups[n],this.amountOfGroups-=1)};qi.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};qi.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};qi.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};qi.prototype.setOptions=function(n){var e=["enabled","orientation","icons","left","right"];X.selectiveDeepExtend(e,this.options,n)};qi.prototype.redraw=function(){var n=0,e=nr(this.groups);Hn(e).call(e,function(a,l){return a<l?-1:1});for(var r=0;r<e.length;r++){var i=e[r];this.groups[i].visible==!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]==!0)&&n++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||n==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var s=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+s+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var o="";for(r=0;r<e.length;r++)i=e[r],this.groups[i].visible==!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]==!0)&&(o+=this.groups[i].content+"<br />");this.dom.textArea.innerHTML=X.xss(o),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};qi.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var n=nr(this.groups);Hn(n).call(n,function(u,h){return u<h?-1:1}),l5e(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,r=Number(e.replace("px","")),i=r,s=this.options.iconSize,o=.75*this.options.iconSize,a=r+.5*o+3;this.svg.style.width=s+5+r+"px";for(var l=0;l<n.length;l++){var c=n[l];this.groups[c].visible==!0&&(this.linegraphOptions.visibility[c]===void 0||this.linegraphOptions.visibility[c]==!0)&&(this.groups[c].getLegend(s,o,this.framework,i,a),a+=o+this.options.iconSpacing)}}};var Kx="__ungrouped__";function sn(n,e){this.id=uu(),this.body=n,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=X.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var r=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(i,s){r._onAdd(s.items)},update:function(i,s){r._onUpdate(s.items)},remove:function(i,s){r._onRemove(s.items)}},this.groupListeners={add:function(i,s){r._onAddGroups(s.items)},update:function(i,s){r._onUpdateGroups(s.items)},remove:function(i,s){r._onRemoveGroups(s.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){r.svg.style.left=X.option.asSize(-r.props.width),r.forceGraphUpdate=!0,r.redraw.call(r)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}sn.prototype=new ac;sn.prototype._create=function(){var n=document.createElement("div");n.className="vis-line-graph",this.dom.frame=n,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",n.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new eY(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new eY(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new qi(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new qi(this.body,this.options.legend,"right",this.options.groups),this.show()};sn.prototype.setOptions=function(n){if(n){var e=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];n.graphHeight===void 0&&n.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&n.graphHeight!==void 0&&Ri((n.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),X.selectiveDeepExtend(e,this.options,n),X.mergeOptions(this.options,n,"interpolation"),X.mergeOptions(this.options,n,"drawPoints"),X.mergeOptions(this.options,n,"shaded"),X.mergeOptions(this.options,n,"legend"),n.interpolation&&typeof n.interpolation=="object"&&n.interpolation.parametrization&&(n.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:n.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&n.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&n.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),Object.prototype.hasOwnProperty.call(this.groups,Kx)&&this.groups[Kx].setOptions(n)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};sn.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};sn.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};sn.prototype.setItems=function(n){var e=this,r,i=this.itemsData;if(!n)this.itemsData=null;else if(Na(n))this.itemsData=bf(n);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(i&&(Qe(X).call(X,this.itemListeners,function(o,a){i.off(a,o)}),i.dispose(),r=i.getIds(),this._onRemove(r)),this.itemsData){var s=this.id;Qe(X).call(X,this.itemListeners,function(o,a){e.itemsData.on(a,o,s)}),r=this.itemsData.getIds(),this._onAdd(r)}};sn.prototype.setGroups=function(n){var e=this,r;if(this.groupsData){Qe(X).call(X,this.groupListeners,function(o,a){e.groupsData.off(a,o)}),r=this.groupsData.getIds(),this.groupsData=null;for(var i=0;i<r.length;i++)this._removeGroup(r[i])}if(!n)this.groupsData=null;else if(Na(n))this.groupsData=n;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var s=this.id;Qe(X).call(X,this.groupListeners,function(o,a){e.groupsData.on(a,o,s)}),r=this.groupsData.getIds(),this._onAddGroups(r)}};sn.prototype._onUpdate=function(n){this._updateAllGroupData(n)};sn.prototype._onAdd=function(n){this._onUpdate(n)};sn.prototype._onRemove=function(n){this._onUpdate(n)};sn.prototype._onUpdateGroups=function(n){this._updateAllGroupData(null,n)};sn.prototype._onAddGroups=function(n){this._onUpdateGroups(n)};sn.prototype._onRemoveGroups=function(n){for(var e=0;e<n.length;e++)this._removeGroup(n[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};sn.prototype._removeGroup=function(n){Object.prototype.hasOwnProperty.call(this.groups,n)&&(this.groups[n].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(n),this.legendRight.removeGroup(n),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(n),this.legendLeft.removeGroup(n),this.legendLeft.redraw()),delete this.groups[n])};sn.prototype._updateGroup=function(n,e){Object.prototype.hasOwnProperty.call(this.groups,e)?(this.groups[e].update(n),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new lc(n,e,this.options,this.groupsUsingDefaultStyles),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()};sn.prototype._updateAllGroupData=function(n,e){if(this.itemsData!=null){var r={},i=this.itemsData.get(),s=this.itemsData.idProp,o={};n&&Kt(n).call(n,function(y){o[y]=y});for(var a={},l=0;l<i.length;l++){var c=i[l],u=c.group;u==null&&(u=Kx),Object.prototype.hasOwnProperty.call(a,u)?a[u]++:a[u]=1}var h={};if(!e&&n){for(u in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,u)){b=this.groups[u];var d=b.getItems();r[u]=ht(d).call(d,function(y){return h[y[s]]=y[s],y[s]!==o[y[s]]});var f=a[u];a[u]-=r[u].length,r[u].length<f&&(r[u][f-1]={})}}for(l=0;l<i.length;l++)if(c=i[l],u=c.group,u==null&&(u=Kx),!(!e&&n&&c[s]!==o[c[s]]&&Object.prototype.hasOwnProperty.call(h,c[s]))){Object.prototype.hasOwnProperty.call(r,u)||(r[u]=new Array(a[u]));var p=X.bridgeObject(c);p.x=X.convert(c.x,"Date"),p.end=X.convert(c.end,"Date"),p.orginalY=c.y,p.y=Number(c.y),p[s]=c[s];var g=r[u].length-a[u]--;r[u][g]=p}for(u in this.groups)!Object.prototype.hasOwnProperty.call(this.groups,u)||Object.prototype.hasOwnProperty.call(r,u)||(r[u]=new Array(0));for(u in r)if(Object.prototype.hasOwnProperty.call(r,u))if(r[u].length==0)Object.prototype.hasOwnProperty.call(this.groups,u)&&this._removeGroup(u);else{var b=void 0;this.groupsData!=null&&(b=this.groupsData.get(u)),b==null&&(b={id:u,content:this.options.defaultGroup+u}),this._updateGroup(b,u),this.groups[u].setItems(r[u])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};sn.prototype.redraw=function(){var n=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,n=this._isResized()||n;var e=this.body.range.end-this.body.range.start,r=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,n==!0){var i;this.svg.style.width=X.option.asSize(3*this.props.width),this.svg.style.left=X.option.asSize(-this.props.width),(nn(i=this.options.height+"").call(i,"%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)}if(this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",n==!0||r==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)n=this._updateGraph()||n,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var s=this.body.range.start-this.lastStart,o=this.body.range.end-this.body.range.start;if(this.props.width!=0){var a=this.props.width/o,l=s*a;this.svg.style.left=-this.props.width-l+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),n};sn.prototype._getSortedGroupIds=function(){var n=[];for(var e in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,e)){var r=this.groups[e];r.visible==!0&&(this.options.groups.visibility[e]===void 0||this.options.groups.visibility[e]==!0)&&n.push({id:e,zIndex:r.options.zIndex})}X.insertSort(n,function(o,a){var l=o.zIndex,c=a.zIndex;return l===void 0&&(l=0),c===void 0&&(c=0),l==c?0:l<c?-1:1});for(var i=new Array(n.length),s=0;s<n.length;s++)i[s]=n[s].id;return i};sn.prototype._updateGraph=function(){if(hl(this.svgElements),this.props.width!=0&&this.itemsData!=null){var n,e,r={},i=!1,s=this.body.util.toGlobalTime(-this.body.domProps.root.width),o=this.body.util.toGlobalTime(2*this.body.domProps.root.width),a=this._getSortedGroupIds();if(a.length>0){var l={};for(this._getRelevantData(a,l,s,o),this._applySampling(a,l),e=0;e<a.length;e++)this._convertXcoordinates(l[a[e]]);if(this._getYRanges(a,l,r),i=this._updateYAxis(a,r),i==!0)return ss(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var c=void 0;for(e=0;e<a.length;e++)n=this.groups[a[e]],this.options.stack===!0&&this.options.style==="line"&&(n.options.excludeFromStacking==null||!n.options.excludeFromStacking)&&(c!=null&&(this._stack(l[n.id],l[c.id]),n.options.shaded.enabled==!0&&n.options.shaded.orientation!=="group"&&(n.options.shaded.orientation=="top"&&c.options.shaded.orientation!=="group"?(c.options.shaded.orientation="group",c.options.shaded.groupId=n.id):(n.options.shaded.orientation="group",n.options.shaded.groupId=c.id))),c=n),this._convertYcoordinates(l[a[e]],n);var u={};for(e=0;e<a.length;e++)if(n=this.groups[a[e]],n.options.style==="line"&&n.options.shaded.enabled==!0){var h=l[a[e]];if(h==null||h.length==0)continue;if(Object.prototype.hasOwnProperty.call(u,a[e])||(u[a[e]]=yr.calcPath(h,n)),n.options.shaded.orientation==="group"){var d=n.options.shaded.groupId;if(nn(a).call(a,d)===-1){console.log(n.id+": Unknown shading group target given:"+d);continue}Object.prototype.hasOwnProperty.call(u,d)||(u[d]=yr.calcPath(l[d],this.groups[d])),yr.drawShading(u[a[e]],n,u[d],this.framework)}else yr.drawShading(u[a[e]],n,void 0,this.framework)}for(Gr.draw(a,l,this.framework),e=0;e<a.length;e++)if(n=this.groups[a[e]],l[a[e]].length>0)switch(n.options.style){case"line":Object.prototype.hasOwnProperty.call(u,a[e])||(u[a[e]]=yr.calcPath(l[a[e]],n)),yr.draw(u[a[e]],n,this.framework);case"point":case"points":(n.options.style=="point"||n.options.style=="points"||n.options.drawPoints.enabled==!0)&&J0.draw(l[a[e]],n,this.framework);break}}}return ss(this.svgElements),!1};sn.prototype._stack=function(n,e){var r,i,s,o,a;r=0;for(var l=0;l<n.length;l++){o=void 0,a=void 0;for(var c=r;c<e.length;c++)if(e[c].x===n[l].x){o=e[c],a=e[c],r=c;break}else if(e[c].x>n[l].x){a=e[c],c==0?o=a:o=e[c-1],r=c;break}a===void 0&&(o=e[e.length-1],a=e[e.length-1]),i=a.x-o.x,s=a.y-o.y,i==0?n[l].y=n[l].orginalY+a.y:n[l].y=n[l].orginalY+s/i*(n[l].x-o.x)+o.y}};sn.prototype._getRelevantData=function(n,e,r,i){var s,o,a,l;if(n.length>0)for(o=0;o<n.length;o++){s=this.groups[n[o]];var c=s.getItems();if(Hn(s.options)==!0){var u=function(p,g){return p.getTime()==g.getTime()?0:p<g?-1:1},h=Math.max(0,X.binarySearchValue(c,r,"x","before",u)),d=Math.min(c.length,X.binarySearchValue(c,i,"x","after",u)+1);d<=0&&(d=c.length);var f=new Array(d-h);for(a=h;a<d;a++)l=s.itemsData[a],f[a-h]=l;e[n[o]]=f}else e[n[o]]=s.itemsData}};sn.prototype._applySampling=function(n,e){var r;if(n.length>0){for(var i=0;i<n.length;i++)if(r=this.groups[n[i]],r.options.sampling==!0){var s=e[n[i]];if(s.length>0){var o=1,a=s.length,l=this.body.util.toGlobalScreen(s[s.length-1].x)-this.body.util.toGlobalScreen(s[0].x),c=a/l;o=Math.min(Math.ceil(.2*a),Math.max(1,Math.round(c)));for(var u=new Array(a),h=0;h<a;h+=o){var d=Math.round(h/o);u[d]=s[h]}e[n[i]]=Vr(u).call(u,0,Math.round(a/o))}}}};sn.prototype._getYRanges=function(n,e,r){var i,s,o,a=[],l=[],c;if(n.length>0){for(o=0;o<n.length;o++)i=e[n[o]],c=this.groups[n[o]].options,i.length>0&&(s=this.groups[n[o]],c.stack===!0&&c.style==="bar"?c.yAxisOrientation==="left"?a=Bn(a).call(a,i):l=Bn(l).call(l,i):r[n[o]]=s.getYRange(i,n[o]));Gr.getStackedYRange(a,r,n,"__barStackLeft","left"),Gr.getStackedYRange(l,r,n,"__barStackRight","right")}};sn.prototype._updateYAxis=function(n,e){var r=!1,i=!1,s=!1,o=1e9,a=1e9,l=-1e9,c=-1e9,u,h;if(n.length>0){for(var d=0;d<n.length;d++){var f=this.groups[n[d]];f&&f.options.yAxisOrientation!="right"?(i=!0,o=1e9,l=-1e9):f&&f.options.yAxisOrientation&&(s=!0,a=1e9,c=-1e9)}for(d=0;d<n.length;d++)!Object.prototype.hasOwnProperty.call(e,n[d])||e[n[d]].ignore===!0||(u=e[n[d]].min,h=e[n[d]].max,e[n[d]].yAxisOrientation!="right"?(i=!0,o=o>u?u:o,l=l<h?h:l):(s=!0,a=a>u?u:a,c=c<h?h:c));i==!0&&this.yAxisLeft.setRange(o,l),s==!0&&this.yAxisRight.setRange(a,c)}r=this._toggleAxisVisiblity(i,this.yAxisLeft)||r,r=this._toggleAxisVisiblity(s,this.yAxisRight)||r,s==!0&&i==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!i,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(s==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,r=this.yAxisLeft.redraw()||r,r=this.yAxisRight.redraw()||r):r=this.yAxisRight.redraw()||r;var p=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(d=0;d<p.length;d++)nn(n).call(n,p[d])!=-1&&Vr(n).call(n,nn(n).call(n,p[d]),1);return r};sn.prototype._toggleAxisVisiblity=function(n,e){var r=!1;return n==!1?e.dom.frame.parentNode&&e.hidden==!1&&(e.hide(),r=!0):!e.dom.frame.parentNode&&e.hidden==!0&&(e.show(),r=!0),r};sn.prototype._convertXcoordinates=function(n){for(var e=this.body.util.toScreen,r=0;r<n.length;r++)n[r].screen_x=e(n[r].x)+this.props.width,n[r].screen_y=n[r].y,n[r].end!=null?n[r].screen_end=e(n[r].end)+this.props.width:n[r].screen_end=void 0};sn.prototype._convertYcoordinates=function(n,e){var r=this.yAxisLeft,i=Number(this.svg.style.height.replace("px",""));e.options.yAxisOrientation=="right"&&(r=this.yAxisRight);for(var s=0;s<n.length;s++)n[s].screen_y=Math.round(r.convertValue(n[s].y));e.setZeroPosition(Math.min(i,r.convertValue(0)))};let wt="string",Ft="boolean",Jt="number",r6e="array",vd="date",xn="object",i6e="dom",bd="moment",tY="any",s6e={configure:{enabled:{boolean:Ft},filter:{boolean:Ft,function:"function"},container:{dom:i6e},__type__:{object:xn,boolean:Ft,function:"function"}},alignCurrentTime:{string:wt,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:wt},sort:{boolean:Ft},sampling:{boolean:Ft},stack:{boolean:Ft},graphHeight:{string:wt,number:Jt},shaded:{enabled:{boolean:Ft},orientation:{string:["bottom","top","zero","group"]},groupId:{object:xn},__type__:{boolean:Ft,object:xn}},style:{string:["line","bar","points"]},barChart:{width:{number:Jt},minWidth:{number:Jt},sideBySide:{boolean:Ft},align:{string:["left","center","right"]},__type__:{object:xn}},interpolation:{enabled:{boolean:Ft},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:Jt},__type__:{object:xn,boolean:Ft}},drawPoints:{enabled:{boolean:Ft},onRender:{function:"function"},size:{number:Jt},style:{string:["square","circle"]},__type__:{object:xn,boolean:Ft,function:"function"}},dataAxis:{showMinorLabels:{boolean:Ft},showMajorLabels:{boolean:Ft},showWeekScale:{boolean:Ft},icons:{boolean:Ft},width:{string:wt,number:Jt},visible:{boolean:Ft},alignZeros:{boolean:Ft},left:{range:{min:{number:Jt,undefined:"undefined"},max:{number:Jt,undefined:"undefined"},__type__:{object:xn}},format:{function:"function"},title:{text:{string:wt,number:Jt,undefined:"undefined"},style:{string:wt,undefined:"undefined"},__type__:{object:xn}},__type__:{object:xn}},right:{range:{min:{number:Jt,undefined:"undefined"},max:{number:Jt,undefined:"undefined"},__type__:{object:xn}},format:{function:"function"},title:{text:{string:wt,number:Jt,undefined:"undefined"},style:{string:wt,undefined:"undefined"},__type__:{object:xn}},__type__:{object:xn}},__type__:{object:xn}},legend:{enabled:{boolean:Ft},icons:{boolean:Ft},left:{visible:{boolean:Ft},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:xn}},right:{visible:{boolean:Ft},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:xn}},__type__:{object:xn,boolean:Ft}},groups:{visibility:{any:tY},__type__:{object:xn}},autoResize:{boolean:Ft},throttleRedraw:{number:Jt},clickToUse:{boolean:Ft},end:{number:Jt,date:vd,string:wt,moment:bd},format:{minorLabels:{millisecond:{string:wt,undefined:"undefined"},second:{string:wt,undefined:"undefined"},minute:{string:wt,undefined:"undefined"},hour:{string:wt,undefined:"undefined"},weekday:{string:wt,undefined:"undefined"},day:{string:wt,undefined:"undefined"},week:{string:wt,undefined:"undefined"},month:{string:wt,undefined:"undefined"},quarter:{string:wt,undefined:"undefined"},year:{string:wt,undefined:"undefined"},__type__:{object:xn}},majorLabels:{millisecond:{string:wt,undefined:"undefined"},second:{string:wt,undefined:"undefined"},minute:{string:wt,undefined:"undefined"},hour:{string:wt,undefined:"undefined"},weekday:{string:wt,undefined:"undefined"},day:{string:wt,undefined:"undefined"},week:{string:wt,undefined:"undefined"},month:{string:wt,undefined:"undefined"},quarter:{string:wt,undefined:"undefined"},year:{string:wt,undefined:"undefined"},__type__:{object:xn}},__type__:{object:xn}},moment:{function:"function"},height:{string:wt,number:Jt},hiddenDates:{start:{date:vd,number:Jt,string:wt,moment:bd},end:{date:vd,number:Jt,string:wt,moment:bd},repeat:{string:wt},__type__:{object:xn,array:r6e}},locale:{string:wt},locales:{__any__:{any:tY},__type__:{object:xn}},max:{date:vd,number:Jt,string:wt,moment:bd},maxHeight:{number:Jt,string:wt},maxMinorChars:{number:Jt},min:{date:vd,number:Jt,string:wt,moment:bd},minHeight:{number:Jt,string:wt},moveable:{boolean:Ft},multiselect:{boolean:Ft},orientation:{string:wt},showCurrentTime:{boolean:Ft},showMajorLabels:{boolean:Ft},showMinorLabels:{boolean:Ft},showWeekScale:{boolean:Ft},snap:{function:"function",null:"null"},start:{date:vd,number:Jt,string:wt,moment:bd},timeAxis:{scale:{string:wt,undefined:"undefined"},step:{number:Jt,undefined:"undefined"},__type__:{object:xn}},width:{string:wt,number:Jt},zoomable:{boolean:Ft},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:Jt},zoomMin:{number:Jt},zIndex:{number:Jt},__type__:{object:xn}},o6e={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function $a(n,e,r,i){var s,o,a,l,c,u,h;if(!(Et(r)||Na(r))&&r instanceof Object){var d=i;i=r,r=d}i&&i.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var f=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:Yr,width:null,height:null,maxHeight:null,minHeight:null},this.options=X.deepExtend({},this.defaultOptions),this._create(n),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:Ee(s=this.on).call(s,this),off:Ee(o=this.off).call(o,this),emit:Ee(a=this.emit).call(a,this)},hiddenDates:[],util:{getScale(){return f.timeAxis.step.scale},getStep(){return f.timeAxis.step.step},toScreen:Ee(l=f._toScreen).call(l,f),toGlobalScreen:Ee(c=f._toGlobalScreen).call(c,f),toTime:Ee(u=f._toTime).call(u,f),toGlobalTime:Ee(h=f._toGlobalTime).call(h,f)}},this.range=new F1(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Yx(this.body),this.components.push(this.timeAxis),this.currentTime=new vre(this.body),this.components.push(this.currentTime),this.linegraph=new sn(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(p){f.emit("click",f.getEventProperties(p))}),this.on("doubletap",function(p){f.emit("doubleClick",f.getEventProperties(p))}),this.dom.root.oncontextmenu=function(p){f.emit("contextmenu",f.getEventProperties(p))},this.initialFitDone=!1,this.on("changed",function(){if(f.itemsData!=null){if(!f.initialFitDone&&!f.options.rollingMode)if(f.initialFitDone=!0,f.options.start!=null||f.options.end!=null){if(f.options.start==null||f.options.end==null)var p=f.getItemRange();var g=f.options.start!=null?f.options.start:p.min,b=f.options.end!=null?f.options.end:p.max;f.setWindow(g,b,{animation:!1})}else f.fit({animation:!1});!f.initialDrawDone&&(f.initialRangeChangeDone||!f.options.start&&!f.options.end||f.options.rollingMode)&&(f.initialDrawDone=!0,f.dom.root.style.visibility="visible",f.dom.loadingScreen.parentNode.removeChild(f.dom.loadingScreen),f.options.onInitialDrawComplete&&Rr(()=>f.options.onInitialDrawComplete(),0))}}),i&&this.setOptions(i),r&&this.setGroups(r),e&&this.setItems(e),this._redraw()}$a.prototype=new oh;$a.prototype.setOptions=function(n){wn.validate(n,s6e)===!0&&console.log("%cErrors have been found in the supplied options object.",Gx),oh.prototype.setOptions.call(this,n)};$a.prototype.setItems=function(n){var e=this.itemsData==null,r;if(n?Na(n)?r=bf(n):r=bf(new vf(n)):r=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=r,this.linegraph&&this.linegraph.setItems(r!=null?r.rawDS:null),e)if(this.options.start!=null||this.options.end!=null){var i=this.options.start!=null?this.options.start:null,s=this.options.end!=null?this.options.end:null;this.setWindow(i,s,{animation:!1})}else this.fit({animation:!1})};$a.prototype.setGroups=function(n){var e;n?Na(n)?e=n:e=new vf(n):e=null,this.groupsData=e,this.linegraph.setGroups(e)};$a.prototype.getLegend=function(n,e,r){return e===void 0&&(e=15),r===void 0&&(r=15),this.linegraph.groups[n]!==void 0?this.linegraph.groups[n].getLegend(e,r):"cannot find group:'"+n+"'"};$a.prototype.isGroupVisible=function(n){return this.linegraph.groups[n]!==void 0?this.linegraph.groups[n].visible&&(this.linegraph.options.groups.visibility[n]===void 0||this.linegraph.options.groups.visibility[n]==!0):!1};$a.prototype.getDataRange=function(){var n=null,e=null;for(var r in this.linegraph.groups)if(!(!Object.prototype.hasOwnProperty.call(this.linegraph.groups,r)||this.linegraph.groups[r].visible!==!0))for(var i=0;i<this.linegraph.groups[r].itemsData.length;i++){var s=this.linegraph.groups[r].itemsData[i],o=X.convert(s.x,"Date").valueOf();n=n==null||n>o?o:n,e=e==null||e<o?o:e}return{min:n!=null?new Date(n):null,max:e!=null?new Date(e):null}};$a.prototype.getEventProperties=function(n){var e=n.center?n.center.x:n.clientX,r=n.center?n.center.y:n.clientY,i=e-X.getAbsoluteLeft(this.dom.centerContainer),s=r-X.getAbsoluteTop(this.dom.centerContainer),o=this._toTime(i),a=d3.customTimeFromTarget(n),l=X.getTarget(n),c=null;X.hasParent(l,this.timeAxis.dom.foreground)||this.timeAxis2&&X.hasParent(l,this.timeAxis2.dom.foreground)?c="axis":X.hasParent(l,this.linegraph.yAxisLeft.dom.frame)||X.hasParent(l,this.linegraph.yAxisRight.dom.frame)?c="data-axis":X.hasParent(l,this.linegraph.legendLeft.dom.frame)||X.hasParent(l,this.linegraph.legendRight.dom.frame)?c="legend":a!=null?c="custom-time":X.hasParent(l,this.currentTime.bar)?c="current-time":X.hasParent(l,this.dom.center)&&(c="background");var u=[],h=this.linegraph.yAxisLeft,d=this.linegraph.yAxisRight;return!h.hidden&&this.itemsData.length>0&&u.push(h.screenToValue(s)),!d.hidden&&this.itemsData.length>0&&u.push(d.screenToValue(s)),{event:n,customTime:a?a.options.id:null,what:c,pageX:n.srcEvent?n.srcEvent.pageX:n.pageX,pageY:n.srcEvent?n.srcEvent.pageY:n.pageY,x:i,y:s,time:o,value:u}};$a.prototype._createConfigurator=function(){return new yre(this,this.dom.container,o6e)};const a6e=c5e();Yr.locale(a6e);function l6e(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function c6e(n,e,r){return e=v6e(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function nY(n,e){return h6e(n)||l6e(n,e)||xre(n,e)||m6e()}function u6e(n){return d6e(n)||f6e(n)||xre(n)||p6e()}function d6e(n){if(Array.isArray(n))return vI(n)}function h6e(n){if(Array.isArray(n))return n}function f6e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function xre(n,e){if(n){if(typeof n=="string")return vI(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vI(n,e)}}function vI(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function p6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g6e(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function v6e(n){var e=g6e(n,"string");return typeof e=="symbol"?e:String(e)}var b6e=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(u6e(Object.entries(e).filter(function(s){var o=nY(s,1),a=o[0];return!i.has(a)}).map(function(s){var o=nY(s,2),a=o[0],l=o[1];return c6e({},a,l)}))))};function bI(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function y6e(n){if(Array.isArray(n))return n}function x6e(n){if(Array.isArray(n))return bI(n)}function w6e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _6e(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function S6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C6e(n,e){return y6e(n)||_6e(n,e)||wre(n,e)||S6e()}function rY(n){return x6e(n)||w6e(n)||wre(n)||k6e()}function wre(n,e){if(n){if(typeof n=="string")return bI(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bI(n,e):void 0}}function E6e(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,s=e.nodeMapper,o=s===void 0?function(h){return h}:s,a=e.methodNames,l=a===void 0?[]:a,c=e.initPropNames,u=c===void 0?[]:c;return D.forwardRef(function(h,d){var f=D.useRef(),p=D.useMemo(function(){var y=Object.fromEntries(u.filter(function(v){return h.hasOwnProperty(v)}).map(function(v){return[v,h[v]]}));return n(y)},[]);iY(function(){p(o(f.current))},D.useLayoutEffect),iY(function(){return p._destructor instanceof Function?p._destructor:void 0});var g=D.useCallback(function(y){for(var v=arguments.length,w=new Array(v>1?v-1:0),k=1;k<v;k++)w[k-1]=arguments[k];return p[y]instanceof Function?p[y].apply(p,w):void 0},[p]),b=D.useRef({});return Object.keys(b6e(h,[].concat(rY(l),rY(u)))).filter(function(y){return b.current[y]!==h[y]}).forEach(function(y){return g(y,h[y])}),b.current=h,D.useImperativeHandle(d,function(){return Object.fromEntries(l.map(function(y){return[y,function(){for(var v=arguments.length,w=new Array(v),k=0;k<v;k++)w[k]=arguments[k];return g.apply(void 0,[y].concat(w))}]}))},[g]),Ne.createElement(i,{ref:f})})}function iY(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D.useEffect,r=D.useRef(),i=D.useRef(!1),s=D.useRef(!1),o=D.useState(0),a=C6e(o,2);a[0];var l=a[1];i.current&&(s.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(c){return c+1}),function(){s.current&&r.current&&r.current()}},[])}var T6e=typeof global=="object"&&global&&global.Object===Object&&global,P6e=typeof self=="object"&&self&&self.Object===Object&&self,_re=T6e||P6e||Function("return this")(),Xx=_re.Symbol,Sre=Object.prototype,M6e=Sre.hasOwnProperty,D6e=Sre.toString,jp=Xx?Xx.toStringTag:void 0;function O6e(n){var e=M6e.call(n,jp),r=n[jp];try{n[jp]=void 0;var i=!0}catch{}var s=D6e.call(n);return i&&(e?n[jp]=r:delete n[jp]),s}var I6e=Object.prototype,R6e=I6e.toString;function A6e(n){return R6e.call(n)}var N6e="[object Null]",j6e="[object Undefined]",sY=Xx?Xx.toStringTag:void 0;function L6e(n){return n==null?n===void 0?j6e:N6e:sY&&sY in Object(n)?O6e(n):A6e(n)}function F6e(n){return n!=null&&typeof n=="object"}var $6e="[object Symbol]";function z6e(n){return typeof n=="symbol"||F6e(n)&&L6e(n)==$6e}var B6e=/\s/;function U6e(n){for(var e=n.length;e--&&B6e.test(n.charAt(e)););return e}var q6e=/^\s+/;function W6e(n){return n&&n.slice(0,U6e(n)+1).replace(q6e,"")}function Qx(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var oY=NaN,H6e=/^[-+]0x[0-9a-f]+$/i,V6e=/^0b[01]+$/i,Y6e=/^0o[0-7]+$/i,G6e=parseInt;function aY(n){if(typeof n=="number")return n;if(z6e(n))return oY;if(Qx(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Qx(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=W6e(n);var r=V6e.test(n);return r||Y6e.test(n)?G6e(n.slice(2),r?2:8):H6e.test(n)?oY:+n}var IM=function(){return _re.Date.now()},K6e="Expected a function",X6e=Math.max,Q6e=Math.min;function kre(n,e,r){var i,s,o,a,l,c,u=0,h=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(K6e);e=aY(e)||0,Qx(r)&&(h=!!r.leading,d="maxWait"in r,o=d?X6e(aY(r.maxWait)||0,e):o,f="trailing"in r?!!r.trailing:f);function p(C){var E=i,P=s;return i=s=void 0,u=C,a=n.apply(P,E),a}function g(C){return u=C,l=setTimeout(v,e),h?p(C):a}function b(C){var E=C-c,P=C-u,O=e-E;return d?Q6e(O,o-P):O}function y(C){var E=C-c,P=C-u;return c===void 0||E>=e||E<0||d&&P>=o}function v(){var C=IM();if(y(C))return w(C);l=setTimeout(v,b(C))}function w(C){return l=void 0,f&&i?p(C):(i=s=void 0,a)}function k(){l!==void 0&&clearTimeout(l),u=0,i=c=s=l=void 0}function _(){return l===void 0?a:w(IM())}function S(){var C=IM(),E=y(C);if(i=arguments,s=this,c=C,E){if(l===void 0)return g(c);if(d)return clearTimeout(l),l=setTimeout(v,e),p(c)}return l===void 0&&(l=setTimeout(v,e)),a}return S.cancel=k,S.flush=_,S}var J6e="Expected a function";function Z6e(n,e,r){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(J6e);return Qx(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),kre(n,e,{leading:i,maxWait:e,trailing:s})}var du=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-du.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?du.Bounce.In(n*2)*.5:du.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),lm=function(){return performance.now()},Cre=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var s=0,o=r;s<o.length;s++){var a=o[s];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,s=e;i<s.length;i++){var o=s[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=lm()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var o=this._tweens[i[s]],a=!r;o&&o.update(e,a)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),yI={Linear:function(n,e){var r=n.length-1,i=r*e,s=Math.floor(i),o=yI.Utils.Linear;return e<0?o(n[0],n[1],i):e>1?o(n[r],n[r-1],r-i):o(n[s],n[s+1>r?r:s+1],i-s)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},Ere=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),xI=new Cre,lY=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=du.Linear.None,this._interpolationFunction=yI.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Ere.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=xI,xI.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=lm()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,s,o){for(var a in i){var l=e[a],c=Array.isArray(l),u=c?"array":typeof l,h=!c&&Array.isArray(i[a]);if(!(u==="undefined"||u==="function")){if(h){var d=i[a];if(d.length===0)continue;for(var f=[l],p=0,g=d.length;p<g;p+=1){var b=this._handleRelativeValue(l,d[p]);if(isNaN(b)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(b)}h&&(i[a]=f)}if((u==="object"||c)&&l&&!h){r[a]=c?[]:{};var y=l;for(var v in y)r[a][v]=y[v];s[a]=c?[]:{};var d=i[a];if(!this._isDynamic){var w={};for(var v in d)w[v]=d[v];i[a]=d=w}this._setupProperties(y,r[a],d,s[a],o)}else(typeof r[a]>"u"||o)&&(r[a]=l),c||(r[a]*=1),h?s[a]=i[a].slice().reverse():s[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=lm()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=lm()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=du.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=yI.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,s;if(e===void 0&&(e=lm()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(i._duration===0||a>c)return 1;var b=Math.trunc(a/l),y=a-b*l,v=Math.min(y/i._duration,1);return v===0&&a===i._duration?1:v},h=u(),d=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||a>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,g=this._chainedTweens.length;p<g;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,s){for(var o in i)if(r[o]!==void 0){var a=r[o]||0,l=i[o],c=Array.isArray(e[o]),u=Array.isArray(l),h=!c&&u;h?e[o]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[o],a,l,s):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[o]=a+(l-a)*s))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();Ere.nextId;var Oo=xI;Oo.getAll.bind(Oo);Oo.removeAll.bind(Oo);Oo.add.bind(Oo);Oo.remove.bind(Oo);Oo.update.bind(Oo);function cY(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function eFe(n){if(Array.isArray(n))return n}function tFe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function nFe(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function rFe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function iFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sFe(n,e){return eFe(n)||rFe(n,e)||oFe(n,e)||iFe()}function oFe(n,e){if(n){if(typeof n=="string")return cY(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cY(n,e):void 0}}var aFe=nFe(function n(e,r){var i=r.default,s=i===void 0?null:i,o=r.triggerUpdate,a=o===void 0?!0:o,l=r.onChange,c=l===void 0?function(u,h){}:l;tFe(this,n),this.name=e,this.defaultVal=s,this.triggerUpdate=a,this.onChange=c});function p3(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,s=i===void 0?{}:i,o=n.methods,a=o===void 0?{}:o,l=n.aliases,c=l===void 0?{}:l,u=n.init,h=u===void 0?function(){}:u,d=n.update,f=d===void 0?function(){}:d,p=Object.keys(s).map(function(g){return new aFe(g,s[g])});return function g(){for(var b=arguments.length,y=new Array(b),v=0;v<b;v++)y[v]=arguments[v];var w=!!(this instanceof g&&this.constructor),k=w?y.shift():void 0,_=y[0],S=_===void 0?{}:_,C=Object.assign({},r instanceof Function?r(S):r,{initialised:!1}),E={};function P(R){return O(R,S),M(),P}var O=function(j,B){h.call(P,j,C,B),C.initialised=!0},M=kre(function(){C.initialised&&(f.call(P,C,E),E={})},1);return p.forEach(function(R){P[R.name]=j(R);function j(B){var L=B.name,$=B.triggerUpdate,z=$===void 0?!1:$,W=B.onChange,q=W===void 0?function(G,H){}:W,V=B.defaultVal,F=V===void 0?null:V;return function(G){var H=C[L];if(!arguments.length)return H;var A=G===void 0?F:G;return C[L]=A,q.call(P,A,C,H),!E.hasOwnProperty(L)&&(E[L]=H),z&&M(),P}}}),Object.keys(a).forEach(function(R){P[R]=function(){for(var j,B=arguments.length,L=new Array(B),$=0;$<B;$++)L[$]=arguments[$];return(j=a[R]).call.apply(j,[P,C].concat(L))}}),Object.entries(c).forEach(function(R){var j=sFe(R,2),B=j[0],L=j[1];return P[B]=P[L]}),P.resetProps=function(){return p.forEach(function(R){P[R.name](R.defaultVal)}),P},P.resetProps(),C._rerender=M,w&&k&&P(k),P}}var Gt=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function Jx(n){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jx(n)}var lFe=/^\s+/,cFe=/\s+$/;function at(n,e){if(n=n||"",e=e||{},n instanceof at)return n;if(!(this instanceof at))return new at(n,e);var r=uFe(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}at.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,s,o,a,l;return r=e.r/255,i=e.g/255,s=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*o+.7152*a+.0722*l},setAlpha:function(e){return this._a=Tre(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=dY(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=dY(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+s+"%)":"hsva("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=uY(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=uY(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+s+"%)":"hsla("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return hY(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return pFe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Sn(this._r,255)*100)+"%",g:Math.round(Sn(this._g,255)*100)+"%",b:Math.round(Sn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Sn(this._r,255)*100)+"%, "+Math.round(Sn(this._g,255)*100)+"%, "+Math.round(Sn(this._b,255)*100)+"%)":"rgba("+Math.round(Sn(this._r,255)*100)+"%, "+Math.round(Sn(this._g,255)*100)+"%, "+Math.round(Sn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:EFe[hY(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+fY(this._r,this._g,this._b,this._a),i=r,s=this._gradientType?"GradientType = 1, ":"";if(e){var o=at(e);i="#"+fY(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,s=this._a<1&&this._a>=0,o=!r&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return at(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(bFe,arguments)},brighten:function(){return this._applyModification(yFe,arguments)},darken:function(){return this._applyModification(xFe,arguments)},desaturate:function(){return this._applyModification(mFe,arguments)},saturate:function(){return this._applyModification(gFe,arguments)},greyscale:function(){return this._applyModification(vFe,arguments)},spin:function(){return this._applyModification(wFe,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(kFe,arguments)},complement:function(){return this._applyCombination(_Fe,arguments)},monochromatic:function(){return this._applyCombination(CFe,arguments)},splitcomplement:function(){return this._applyCombination(SFe,arguments)},triad:function(){return this._applyCombination(pY,[3])},tetrad:function(){return this._applyCombination(pY,[4])}};at.fromRatio=function(n,e){if(Jx(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=cm(n[i]));n=r}return at(n,e)};function uFe(n){var e={r:0,g:0,b:0},r=1,i=null,s=null,o=null,a=!1,l=!1;return typeof n=="string"&&(n=DFe(n)),Jx(n)=="object"&&(Go(n.r)&&Go(n.g)&&Go(n.b)?(e=dFe(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Go(n.h)&&Go(n.s)&&Go(n.v)?(i=cm(n.s),s=cm(n.v),e=fFe(n.h,i,s),a=!0,l="hsv"):Go(n.h)&&Go(n.s)&&Go(n.l)&&(i=cm(n.s),o=cm(n.l),e=hFe(n.h,i,o),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=Tre(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function dFe(n,e,r){return{r:Sn(n,255)*255,g:Sn(e,255)*255,b:Sn(r,255)*255}}function uY(n,e,r){n=Sn(n,255),e=Sn(e,255),r=Sn(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=(i+s)/2;if(i==s)o=a=0;else{var c=i-s;switch(a=l>.5?c/(2-i-s):c/(i+s),i){case n:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-n)/c+2;break;case r:o=(n-e)/c+4;break}o/=6}return{h:o,s:a,l}}function hFe(n,e,r){var i,s,o;n=Sn(n,360),e=Sn(e,100),r=Sn(r,100);function a(u,h,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?u+(h-u)*6*d:d<1/2?h:d<2/3?u+(h-u)*(2/3-d)*6:u}if(e===0)i=s=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=a(c,l,n+1/3),s=a(c,l,n),o=a(c,l,n-1/3)}return{r:i*255,g:s*255,b:o*255}}function dY(n,e,r){n=Sn(n,255),e=Sn(e,255),r=Sn(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=i,c=i-s;if(a=i===0?0:c/i,i==s)o=0;else{switch(i){case n:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-n)/c+2;break;case r:o=(n-e)/c+4;break}o/=6}return{h:o,s:a,v:l}}function fFe(n,e,r){n=Sn(n,360)*6,e=Sn(e,100),r=Sn(r,100);var i=Math.floor(n),s=n-i,o=r*(1-e),a=r*(1-s*e),l=r*(1-(1-s)*e),c=i%6,u=[r,a,o,o,l,r][c],h=[l,r,r,a,o,o][c],d=[o,o,l,r,r,a][c];return{r:u*255,g:h*255,b:d*255}}function hY(n,e,r,i){var s=[Us(Math.round(n).toString(16)),Us(Math.round(e).toString(16)),Us(Math.round(r).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function pFe(n,e,r,i,s){var o=[Us(Math.round(n).toString(16)),Us(Math.round(e).toString(16)),Us(Math.round(r).toString(16)),Us(Pre(i))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function fY(n,e,r,i){var s=[Us(Pre(i)),Us(Math.round(n).toString(16)),Us(Math.round(e).toString(16)),Us(Math.round(r).toString(16))];return s.join("")}at.equals=function(n,e){return!n||!e?!1:at(n).toRgbString()==at(e).toRgbString()};at.random=function(){return at.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function mFe(n,e){e=e===0?0:e||10;var r=at(n).toHsl();return r.s-=e/100,r.s=B1(r.s),at(r)}function gFe(n,e){e=e===0?0:e||10;var r=at(n).toHsl();return r.s+=e/100,r.s=B1(r.s),at(r)}function vFe(n){return at(n).desaturate(100)}function bFe(n,e){e=e===0?0:e||10;var r=at(n).toHsl();return r.l+=e/100,r.l=B1(r.l),at(r)}function yFe(n,e){e=e===0?0:e||10;var r=at(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),at(r)}function xFe(n,e){e=e===0?0:e||10;var r=at(n).toHsl();return r.l-=e/100,r.l=B1(r.l),at(r)}function wFe(n,e){var r=at(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,at(r)}function _Fe(n){var e=at(n).toHsl();return e.h=(e.h+180)%360,at(e)}function pY(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=at(n).toHsl(),i=[at(n)],s=360/e,o=1;o<e;o++)i.push(at({h:(r.h+o*s)%360,s:r.s,l:r.l}));return i}function SFe(n){var e=at(n).toHsl(),r=e.h;return[at(n),at({h:(r+72)%360,s:e.s,l:e.l}),at({h:(r+216)%360,s:e.s,l:e.l})]}function kFe(n,e,r){e=e||6,r=r||30;var i=at(n).toHsl(),s=360/r,o=[at(n)];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,o.push(at(i));return o}function CFe(n,e){e=e||6;for(var r=at(n).toHsv(),i=r.h,s=r.s,o=r.v,a=[],l=1/e;e--;)a.push(at({h:i,s,v:o})),o=(o+l)%1;return a}at.mix=function(n,e,r){r=r===0?0:r||50;var i=at(n).toRgb(),s=at(e).toRgb(),o=r/100,a={r:(s.r-i.r)*o+i.r,g:(s.g-i.g)*o+i.g,b:(s.b-i.b)*o+i.b,a:(s.a-i.a)*o+i.a};return at(a)};at.readability=function(n,e){var r=at(n),i=at(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};at.isReadable=function(n,e,r){var i=at.readability(n,e),s,o;switch(o=!1,s=OFe(r),s.level+s.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};at.mostReadable=function(n,e,r){var i=null,s=0,o,a,l,c;r=r||{},a=r.includeFallbackColors,l=r.level,c=r.size;for(var u=0;u<e.length;u++)o=at.readability(n,e[u]),o>s&&(s=o,i=at(e[u]));return at.isReadable(n,i,{level:l,size:c})||!a?i:(r.includeFallbackColors=!1,at.mostReadable(n,["#fff","#000"],r))};var wI=at.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},EFe=at.hexNames=TFe(wI);function TFe(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function Tre(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Sn(n,e){PFe(n)&&(n="100%");var r=MFe(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function B1(n){return Math.min(1,Math.max(0,n))}function Pi(n){return parseInt(n,16)}function PFe(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function MFe(n){return typeof n=="string"&&n.indexOf("%")!=-1}function Us(n){return n.length==1?"0"+n:""+n}function cm(n){return n<=1&&(n=n*100+"%"),n}function Pre(n){return Math.round(parseFloat(n)*255).toString(16)}function mY(n){return Pi(n)/255}var Ms=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Go(n){return!!Ms.CSS_UNIT.exec(n)}function DFe(n){n=n.replace(lFe,"").replace(cFe,"").toLowerCase();var e=!1;if(wI[n])n=wI[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Ms.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=Ms.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Ms.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=Ms.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Ms.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=Ms.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Ms.hex8.exec(n))?{r:Pi(r[1]),g:Pi(r[2]),b:Pi(r[3]),a:mY(r[4]),format:e?"name":"hex8"}:(r=Ms.hex6.exec(n))?{r:Pi(r[1]),g:Pi(r[2]),b:Pi(r[3]),format:e?"name":"hex"}:(r=Ms.hex4.exec(n))?{r:Pi(r[1]+""+r[1]),g:Pi(r[2]+""+r[2]),b:Pi(r[3]+""+r[3]),a:mY(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=Ms.hex3.exec(n))?{r:Pi(r[1]+""+r[1]),g:Pi(r[2]+""+r[2]),b:Pi(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function OFe(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function _I(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function IFe(n){if(Array.isArray(n))return _I(n)}function Mre(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function RFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function AFe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ji(n,e){return n.get(Mre(n,e))}function gY(n,e,r){RFe(n,e),e.set(n,r)}function vY(n,e,r){return n.set(Mre(n,e),r),r}function NFe(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,BFe(i.key),i)}}function jFe(n,e,r){return e&&NFe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function LFe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function FFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Fe(n){return IFe(n)||LFe(n)||UFe(n)||FFe()}function zFe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function BFe(n){var e=zFe(n,"string");return typeof e=="symbol"?e:e+""}function UFe(n,e){if(n){if(typeof n=="string")return _I(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_I(n,e):void 0}}var qFe=123,WFe=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},Dre=function(e,r,i){return(e<<16)+(r<<8)+i},HFe=function(e){var r=at(e).toRgb(),i=r.r,s=r.g,o=r.b;return Dre(i,s,o)},bY=function(e,r){return e*qFe%Math.pow(2,r)},yc=new WeakMap,Ko=new WeakMap,VFe=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;AFe(this,n),gY(this,yc,void 0),gY(this,Ko,void 0),vY(Ko,this,e),this.reset()}return jFe(n,[{key:"reset",value:function(){vY(yc,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Ji(yc,this).length>=Math.pow(2,24-Ji(Ko,this)))return null;var i=Ji(yc,this).length,s=bY(i,Ji(Ko,this)),o=WFe(i+(s<<24-Ji(Ko,this)));return Ji(yc,this).push(r),o}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?HFe(r):Dre.apply(void 0,$Fe(r));if(!i)return null;var s=i&Math.pow(2,24-Ji(Ko,this))-1,o=i>>24-Ji(Ko,this)&Math.pow(2,Ji(Ko,this))-1;return bY(s,Ji(Ko,this))!==o||s>=Ji(yc,this).length?null:Ji(yc,this)[s]}}])}(),Z0,En,Ore,Ire,Dc,yY,Rre,Are,Nre,m3,SI,kI,Kg={},jre=[],YFe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,U1=Array.isArray;function ko(n,e){for(var r in e)n[r]=e[r];return n}function g3(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function GFe(n,e,r){var i,s,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?s=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?Z0.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return Lm(n,a,i,s,null)}function Lm(n,e,r,i,s){var o={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Ore,__i:-1,__u:0};return s==null&&En.vnode!=null&&En.vnode(o),o}function q1(n){return n.children}function _y(n,e){this.props=n,this.context=e}function xf(n,e){if(e==null)return n.__?xf(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?xf(n):null}function Lre(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return Lre(n)}}function xY(n){(!n.__d&&(n.__d=!0)&&Dc.push(n)&&!Zx.__r++||yY!=En.debounceRendering)&&((yY=En.debounceRendering)||Rre)(Zx)}function Zx(){for(var n,e,r,i,s,o,a,l=1;Dc.length;)Dc.length>l&&Dc.sort(Are),n=Dc.shift(),l=Dc.length,n.__d&&(r=void 0,i=void 0,s=(i=(e=n).__v).__e,o=[],a=[],e.__P&&((r=ko({},i)).__v=i.__v+1,En.vnode&&En.vnode(r),v3(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,o,s??xf(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,zre(o,r,a),i.__e=i.__=null,r.__e!=s&&Lre(r)));Zx.__r=0}function Fre(n,e,r,i,s,o,a,l,c,u,h){var d,f,p,g,b,y,v,w=i&&i.__k||jre,k=e.length;for(c=KFe(r,e,w,c,k),d=0;d<k;d++)(p=r.__k[d])!=null&&(f=p.__i==-1?Kg:w[p.__i]||Kg,p.__i=d,y=v3(n,p,f,s,o,a,l,c,u,h),g=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&b3(f.ref,null,p),h.push(p.ref,p.__c||g,p)),b==null&&g!=null&&(b=g),(v=!!(4&p.__u))||f.__k===p.__k?c=$re(p,c,n,v):typeof p.type=="function"&&y!==void 0?c=y:g&&(c=g.nextSibling),p.__u&=-7);return r.__e=b,c}function KFe(n,e,r,i,s){var o,a,l,c,u,h=r.length,d=h,f=0;for(n.__k=new Array(s),o=0;o<s;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[o]=Lm(null,a,null,null,null):U1(a)?a=n.__k[o]=Lm(q1,{children:a},null,null,null):a.constructor==null&&a.__b>0?a=n.__k[o]=Lm(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[o]=a,c=o+f,a.__=n,a.__b=n.__b+1,l=null,(u=a.__i=XFe(a,r,c,d))!=-1&&(d--,(l=r[u])&&(l.__u|=2)),l==null||l.__v==null?(u==-1&&(s>h?f--:s<h&&f++),typeof a.type!="function"&&(a.__u|=4)):u!=c&&(u==c-1?f--:u==c+1?f++:(u>c?f--:f++,a.__u|=4))):n.__k[o]=null;if(d)for(o=0;o<h;o++)(l=r[o])!=null&&!(2&l.__u)&&(l.__e==i&&(i=xf(l)),Ure(l,l));return i}function $re(n,e,r,i){var s,o;if(typeof n.type=="function"){for(s=n.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=n,e=$re(s[o],e,r,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=xf(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function XFe(n,e,r,i){var s,o,a,l=n.key,c=n.type,u=e[r],h=u!=null&&(2&u.__u)==0;if(u===null&&l==null||h&&l==u.key&&c==u.type)return r;if(i>(h?1:0)){for(s=r-1,o=r+1;s>=0||o<e.length;)if((u=e[a=s>=0?s--:o++])!=null&&!(2&u.__u)&&l==u.key&&c==u.type)return a}return-1}function wY(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||YFe.test(e)?r:r+"px"}function Ab(n,e,r,i,s){var o,a;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||wY(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||wY(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Nre,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=r,r?i?r.u=i.u:(r.u=m3,n.addEventListener(e,o?kI:SI,o)):n.removeEventListener(e,o?kI:SI,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function _Y(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=m3++;else if(e.t<r.u)return;return r(En.event?En.event(e):e)}}}function v3(n,e,r,i,s,o,a,l,c,u){var h,d,f,p,g,b,y,v,w,k,_,S,C,E,P,O,M,R=e.type;if(e.constructor!=null)return null;128&r.__u&&(c=!!(32&r.__u),o=[l=e.__e=r.__e]),(h=En.__b)&&h(e);e:if(typeof R=="function")try{if(v=e.props,w="prototype"in R&&R.prototype.render,k=(h=R.contextType)&&i[h.__c],_=h?k?k.props.value:h.__:i,r.__c?y=(d=e.__c=r.__c).__=d.__E:(w?e.__c=d=new R(v,_):(e.__c=d=new _y(v,_),d.constructor=R,d.render=JFe),k&&k.sub(d),d.state||(d.state={}),d.__n=i,f=d.__d=!0,d.__h=[],d._sb=[]),w&&d.__s==null&&(d.__s=d.state),w&&R.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=ko({},d.__s)),ko(d.__s,R.getDerivedStateFromProps(v,d.__s))),p=d.props,g=d.state,d.__v=e,f)w&&R.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),w&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(w&&R.getDerivedStateFromProps==null&&v!==p&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,_),e.__v==r.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,_)===!1){for(e.__v!=r.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(j){j&&(j.__=e)}),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,_),w&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(p,g,b)})}if(d.context=_,d.props=v,d.__P=n,d.__e=!1,C=En.__r,E=0,w){for(d.state=d.__s,d.__d=!1,C&&C(e),h=d.render(d.props,d.state,d.context),P=0;P<d._sb.length;P++)d.__h.push(d._sb[P]);d._sb=[]}else do d.__d=!1,C&&C(e),h=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++E<25);d.state=d.__s,d.getChildContext!=null&&(i=ko(ko({},i),d.getChildContext())),w&&!f&&d.getSnapshotBeforeUpdate!=null&&(b=d.getSnapshotBeforeUpdate(p,g)),O=h,h!=null&&h.type===q1&&h.key==null&&(O=Bre(h.props.children)),l=Fre(n,U1(O)?O:[O],e,r,i,s,o,a,l,c,u),d.base=e.__e,e.__u&=-161,d.__h.length&&a.push(d),y&&(d.__E=d.__=null)}catch(j){if(e.__v=null,c||o!=null)if(j.then){for(e.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(M=o.length;M--;)g3(o[M]);CI(e)}else e.__e=r.__e,e.__k=r.__k,j.then||CI(e);En.__e(j,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=QFe(r.__e,e,r,i,s,o,a,c,u);return(h=En.diffed)&&h(e),128&e.__u?void 0:l}function CI(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(CI)}function zre(n,e,r){for(var i=0;i<r.length;i++)b3(r[i],r[++i],r[++i]);En.__c&&En.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){En.__e(o,s.__v)}})}function Bre(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:U1(n)?n.map(Bre):ko({},n)}function QFe(n,e,r,i,s,o,a,l,c){var u,h,d,f,p,g,b,y=r.props||Kg,v=e.props,w=e.type;if(w=="svg"?s="http://www.w3.org/2000/svg":w=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((p=o[u])&&"setAttribute"in p==!!w&&(w?p.localName==w:p.nodeType==3)){n=p,o[u]=null;break}}if(n==null){if(w==null)return document.createTextNode(v);n=document.createElementNS(s,w,v.is&&v),l&&(En.__m&&En.__m(e,o),l=!1),o=null}if(w==null)y===v||l&&n.data==v||(n.data=v);else{if(o=o&&Z0.call(n.childNodes),!l&&o!=null)for(y={},u=0;u<n.attributes.length;u++)y[(p=n.attributes[u]).name]=p.value;for(u in y)if(p=y[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=p;else if(!(u in v)){if(u=="value"&&"defaultValue"in v||u=="checked"&&"defaultChecked"in v)continue;Ab(n,u,null,p,s)}}for(u in v)p=v[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?h=p:u=="value"?g=p:u=="checked"?b=p:l&&typeof p!="function"||y[u]===p||Ab(n,u,p,y[u],s);if(h)l||d&&(h.__html==d.__html||h.__html==n.innerHTML)||(n.innerHTML=h.__html),e.__k=[];else if(d&&(n.innerHTML=""),Fre(e.type=="template"?n.content:n,U1(f)?f:[f],e,r,i,w=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,a,o?o[0]:r.__k&&xf(r,0),l,c),o!=null)for(u=o.length;u--;)g3(o[u]);l||(u="value",w=="progress"&&g==null?n.removeAttribute("value"):g!=null&&(g!==n[u]||w=="progress"&&!g||w=="option"&&g!=y[u])&&Ab(n,u,g,y[u],s),u="checked",b!=null&&b!=n[u]&&Ab(n,u,b,y[u],s))}return n}function b3(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){En.__e(s,r)}}function Ure(n,e,r){var i,s;if(En.unmount&&En.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||b3(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){En.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&Ure(i[s],e,r||typeof n.type!="function");r||g3(n.__e),n.__c=n.__=n.__e=void 0}function JFe(n,e,r){return this.constructor(n,r)}function ZFe(n,e,r){var i,s,o,a;e==document&&(e=document.documentElement),En.__&&En.__(n,e),s=(i=!1)?null:e.__k,o=[],a=[],v3(e,n=e.__k=GFe(q1,null,[n]),s||Kg,Kg,e.namespaceURI,s?null:e.firstChild?Z0.call(e.childNodes):null,o,s?s.__e:e.firstChild,i,a),zre(o,n,a)}function qre(n,e,r){var i,s,o,a,l=ko({},n.props);for(o in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?s=e[o]:l[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?Z0.call(arguments,2):r),Lm(n.type,l,i||n.key,s||n.ref,null)}Z0=jre.slice,En={__e:function(n,e,r,i){for(var s,o,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),a=s.__d),a)return s.__E=s}catch(l){n=l}throw n}},Ore=0,Ire=function(n){return n!=null&&n.constructor==null},_y.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ko({},this.state),typeof n=="function"&&(n=n(ko({},r),this.props)),n&&ko(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),xY(this))},_y.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),xY(this))},_y.prototype.render=q1,Dc=[],Rre=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Are=function(n,e){return n.__v.__b-e.__v.__b},Zx.__r=0,Nre=/(PointerCapture)$|Capture$/i,m3=0,SI=_Y(!1),kI=_Y(!0);function SY(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function e$e(n){if(Array.isArray(n))return n}function t$e(n,e,r){return(e=a$e(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function n$e(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function r$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kY(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function i$e(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kY(Object(r),!0).forEach(function(i){t$e(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):kY(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function s$e(n,e){return e$e(n)||n$e(n,e)||l$e(n,e)||r$e()}function o$e(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function a$e(n){var e=o$e(n,"string");return typeof e=="symbol"?e:e+""}function ew(n){"@babel/helpers - typeof";return ew=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ew(n)}function l$e(n,e){if(n){if(typeof n=="string")return SY(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?SY(n,e):void 0}}var EI=function(e){if(ew(e)!=="object")return e;var r=qre(e);if(r.props){var i;r.props=i$e({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(EI):EI(r.props.children))}return r},c$e=function(e){return Ire(qre(e))},u$e=function(e,r){delete r.__k,ZFe(EI(e),r)};function d$e(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var h$e=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;d$e(h$e);var f$e=p3({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.style,o=s===void 0?{}:s,a=!!e&&ew(e)==="object"&&!!e.node&&typeof e.node=="function",l=Ir(a?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(u){var h=s$e(u,2),d=h[0],f=h[1];return r.tooltipEl.style(d,f)}),r.tooltipEl.style("left","-10000px").style("display","none");var c="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(c),function(u){r.mouseInside=!0;var h=Ls(u),d=l.node(),f=d.offsetWidth,p=d.offsetHeight,g=[r.offsetX===null||r.offsetX===void 0?"-".concat(h[0]/f*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?p>130&&p-h[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(g.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(c),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(c),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):c$e(e.content)?(e.tooltipEl.text(""),u$e(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function p$e(n,e,r){var i,s=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function o(){var a,l=i.length,c,u=0,h=0,d=0;for(a=0;a<l;++a)c=i[a],u+=c.x||0,h+=c.y||0,d+=c.z||0;for(u=(u/l-n)*s,h=(h/l-e)*s,d=(d/l-r)*s,a=0;a<l;++a)c=i[a],u&&(c.x-=u),h&&(c.y-=h),d&&(c.z-=d)}return o.initialize=function(a){i=a},o.x=function(a){return arguments.length?(n=+a,o):n},o.y=function(a){return arguments.length?(e=+a,o):e},o.z=function(a){return arguments.length?(r=+a,o):r},o.strength=function(a){return arguments.length?(s=+a,o):s},o}function m$e(n){const e=+this._x.call(null,n);return Wre(this.cover(e),e,n)}function Wre(n,e,r){if(isNaN(e))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._x1,c,u,h,d,f;if(!s)return n._root=o,n;for(;s.length;)if((h=e>=(c=(a+l)/2))?a=c:l=c,i=s,!(s=s[d=+h]))return i[d]=o,n;if(u=+n._x.call(null,s.data),e===u)return o.next=s,i?i[d]=o:n._root=o,n;do i=i?i[d]=new Array(2):n._root=new Array(2),(h=e>=(c=(a+l)/2))?a=c:l=c;while((d=+h)==(f=+(u>=c)));return i[f]=s,i[d]=o,n}function g$e(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,s=-1/0;for(let o=0,a;o<e;++o)isNaN(a=+this._x.call(null,n[o]))||(r[o]=a,a<i&&(i=a),a>s&&(s=a));if(i>s)return this;this.cover(i).cover(s);for(let o=0;o<e;++o)Wre(this,r[o],n[o]);return this}function v$e(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,s=this._root,o,a;e>n||n>=r;)switch(a=+(n<e),o=new Array(2),o[a]=s,s=o,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=r,this}function b$e(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function y$e(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Ea(n,e,r){this.node=n,this.x0=e,this.x1=r}function x$e(n,e){var r,i=this._x0,s,o,a=this._x1,l=[],c=this._root,u,h;for(c&&l.push(new Ea(c,i,a)),e==null?e=1/0:(i=n-e,a=n+e);u=l.pop();)if(!(!(c=u.node)||(s=u.x0)>a||(o=u.x1)<i))if(c.length){var d=(s+o)/2;l.push(new Ea(c[1],d,o),new Ea(c[0],s,d)),(h=+(n>=d))&&(u=l[l.length-1],l[l.length-1]=l[l.length-1-h],l[l.length-1-h]=u)}else{var f=Math.abs(n-+this._x.call(null,c.data));f<e&&(e=f,i=n-f,a=n+f,r=c.data)}return r}function w$e(n){if(isNaN(c=+this._x.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._x1,c,u,h,d,f;if(!r)return this;if(r.length)for(;;){if((h=c>=(u=(a+l)/2))?a=u:l=u,e=r,!(r=r[d=+h]))return this;if(!r.length)break;e[d+1&1]&&(i=e,f=d)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[d]=o:delete e[d],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[f]=r:this._root=r),this):(this._root=o,this)}function _$e(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function S$e(){return this._root}function k$e(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function C$e(n){var e=[],r,i=this._root,s,o,a;for(i&&e.push(new Ea(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.x1)&&i.length){var l=(o+a)/2;(s=i[1])&&e.push(new Ea(s,l,a)),(s=i[0])&&e.push(new Ea(s,o,l))}return this}function E$e(n){var e=[],r=[],i;for(this._root&&e.push(new Ea(this._root,this._x0,this._x1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.x1,c=(a+l)/2;(o=s[0])&&e.push(new Ea(o,a,c)),(o=s[1])&&e.push(new Ea(o,c,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function T$e(n){return n[0]}function P$e(n){return arguments.length?(this._x=n,this):this._x}function Hre(n,e){var r=new y3(e??T$e,NaN,NaN);return n==null?r:r.addAll(n)}function y3(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function CY(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Ei=Hre.prototype=y3.prototype;Ei.copy=function(){var n=new y3(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=CY(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var s=0;s<2;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(2)}):e.target[s]=CY(i));return n};Ei.add=m$e;Ei.addAll=g$e;Ei.cover=v$e;Ei.data=b$e;Ei.extent=y$e;Ei.find=x$e;Ei.remove=w$e;Ei.removeAll=_$e;Ei.root=S$e;Ei.size=k$e;Ei.visit=C$e;Ei.visitAfter=E$e;Ei.x=P$e;function M$e(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return Vre(this.cover(e,r,i),e,r,i,n)}function Vre(n,e,r,i,s){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var o,a=n._root,l={data:s},c=n._x0,u=n._y0,h=n._z0,d=n._x1,f=n._y1,p=n._z1,g,b,y,v,w,k,_,S,C,E,P;if(!a)return n._root=l,n;for(;a.length;)if((_=e>=(g=(c+d)/2))?c=g:d=g,(S=r>=(b=(u+f)/2))?u=b:f=b,(C=i>=(y=(h+p)/2))?h=y:p=y,o=a,!(a=a[E=C<<2|S<<1|_]))return o[E]=l,n;if(v=+n._x.call(null,a.data),w=+n._y.call(null,a.data),k=+n._z.call(null,a.data),e===v&&r===w&&i===k)return l.next=a,o?o[E]=l:n._root=l,n;do o=o?o[E]=new Array(8):n._root=new Array(8),(_=e>=(g=(c+d)/2))?c=g:d=g,(S=r>=(b=(u+f)/2))?u=b:f=b,(C=i>=(y=(h+p)/2))?h=y:p=y;while((E=C<<2|S<<1|_)===(P=(k>=y)<<2|(w>=b)<<1|v>=g));return o[P]=a,o[E]=l,n}function D$e(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),s=new Float64Array(e);let o=1/0,a=1/0,l=1/0,c=-1/0,u=-1/0,h=-1/0;for(let d=0,f,p,g,b;d<e;++d)isNaN(p=+this._x.call(null,f=n[d]))||isNaN(g=+this._y.call(null,f))||isNaN(b=+this._z.call(null,f))||(r[d]=p,i[d]=g,s[d]=b,p<o&&(o=p),p>c&&(c=p),g<a&&(a=g),g>u&&(u=g),b<l&&(l=b),b>h&&(h=b));if(o>c||a>u||l>h)return this;this.cover(o,a,l).cover(c,u,h);for(let d=0;d<e;++d)Vre(this,r[d],i[d],s[d],n[d]);return this}function O$e(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,o=this._z0,a=this._x1,l=this._y1,c=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(s=Math.floor(e))+1,c=(o=Math.floor(r))+1;else{for(var u=a-i||1,h=this._root,d,f;i>n||n>=a||s>e||e>=l||o>r||r>=c;)switch(f=(r<o)<<2|(e<s)<<1|n<i,d=new Array(8),d[f]=h,h=d,u*=2,f){case 0:a=i+u,l=s+u,c=o+u;break;case 1:i=a-u,l=s+u,c=o+u;break;case 2:a=i+u,s=l-u,c=o+u;break;case 3:i=a-u,s=l-u,c=o+u;break;case 4:a=i+u,l=s+u,o=c-u;break;case 5:i=a-u,l=s+u,o=c-u;break;case 6:a=i+u,s=l-u,o=c-u;break;case 7:i=a-u,s=l-u,o=c-u;break}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=c,this}function I$e(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function R$e(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function on(n,e,r,i,s,o,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=s,this.y1=o,this.z1=a}function A$e(n,e,r,i){var s,o=this._x0,a=this._y0,l=this._z0,c,u,h,d,f,p,g=this._x1,b=this._y1,y=this._z1,v=[],w=this._root,k,_;for(w&&v.push(new on(w,o,a,l,g,b,y)),i==null?i=1/0:(o=n-i,a=e-i,l=r-i,g=n+i,b=e+i,y=r+i,i*=i);k=v.pop();)if(!(!(w=k.node)||(c=k.x0)>g||(u=k.y0)>b||(h=k.z0)>y||(d=k.x1)<o||(f=k.y1)<a||(p=k.z1)<l))if(w.length){var S=(c+d)/2,C=(u+f)/2,E=(h+p)/2;v.push(new on(w[7],S,C,E,d,f,p),new on(w[6],c,C,E,S,f,p),new on(w[5],S,u,E,d,C,p),new on(w[4],c,u,E,S,C,p),new on(w[3],S,C,h,d,f,E),new on(w[2],c,C,h,S,f,E),new on(w[1],S,u,h,d,C,E),new on(w[0],c,u,h,S,C,E)),(_=(r>=E)<<2|(e>=C)<<1|n>=S)&&(k=v[v.length-1],v[v.length-1]=v[v.length-1-_],v[v.length-1-_]=k)}else{var P=n-+this._x.call(null,w.data),O=e-+this._y.call(null,w.data),M=r-+this._z.call(null,w.data),R=P*P+O*O+M*M;if(R<i){var j=Math.sqrt(i=R);o=n-j,a=e-j,l=r-j,g=n+j,b=e+j,y=r+j,s=w.data}}return s}const N$e=(n,e,r,i,s,o)=>Math.sqrt((n-i)**2+(e-s)**2+(r-o)**2);function j$e(n,e,r,i){const s=[],o=n-i,a=e-i,l=r-i,c=n+i,u=e+i,h=r+i;return this.visit((d,f,p,g,b,y,v)=>{if(!d.length)do{const w=d.data;N$e(n,e,r,this._x(w),this._y(w),this._z(w))<=i&&s.push(w)}while(d=d.next);return f>c||p>u||g>h||b<o||y<a||v<l}),s}function L$e(n){if(isNaN(f=+this._x.call(null,n))||isNaN(p=+this._y.call(null,n))||isNaN(g=+this._z.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,c=this._z0,u=this._x1,h=this._y1,d=this._z1,f,p,g,b,y,v,w,k,_,S,C;if(!r)return this;if(r.length)for(;;){if((w=f>=(b=(a+u)/2))?a=b:u=b,(k=p>=(y=(l+h)/2))?l=y:h=y,(_=g>=(v=(c+d)/2))?c=v:d=v,e=r,!(r=r[S=_<<2|k<<1|w]))return this;if(!r.length)break;(e[S+1&7]||e[S+2&7]||e[S+3&7]||e[S+4&7]||e[S+5&7]||e[S+6&7]||e[S+7&7])&&(i=e,C=S)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[S]=o:delete e[S],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[C]=r:this._root=r),this):(this._root=o,this)}function F$e(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function $$e(){return this._root}function z$e(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function B$e(n){var e=[],r,i=this._root,s,o,a,l,c,u,h;for(i&&e.push(new on(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.z0,c=r.x1,u=r.y1,h=r.z1)&&i.length){var d=(o+c)/2,f=(a+u)/2,p=(l+h)/2;(s=i[7])&&e.push(new on(s,d,f,p,c,u,h)),(s=i[6])&&e.push(new on(s,o,f,p,d,u,h)),(s=i[5])&&e.push(new on(s,d,a,p,c,f,h)),(s=i[4])&&e.push(new on(s,o,a,p,d,f,h)),(s=i[3])&&e.push(new on(s,d,f,l,c,u,p)),(s=i[2])&&e.push(new on(s,o,f,l,d,u,p)),(s=i[1])&&e.push(new on(s,d,a,l,c,f,p)),(s=i[0])&&e.push(new on(s,o,a,l,d,f,p))}return this}function U$e(n){var e=[],r=[],i;for(this._root&&e.push(new on(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,c=i.z0,u=i.x1,h=i.y1,d=i.z1,f=(a+u)/2,p=(l+h)/2,g=(c+d)/2;(o=s[0])&&e.push(new on(o,a,l,c,f,p,g)),(o=s[1])&&e.push(new on(o,f,l,c,u,p,g)),(o=s[2])&&e.push(new on(o,a,p,c,f,h,g)),(o=s[3])&&e.push(new on(o,f,p,c,u,h,g)),(o=s[4])&&e.push(new on(o,a,l,g,f,p,d)),(o=s[5])&&e.push(new on(o,f,l,g,u,p,d)),(o=s[6])&&e.push(new on(o,a,p,g,f,h,d)),(o=s[7])&&e.push(new on(o,f,p,g,u,h,d))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function q$e(n){return n[0]}function W$e(n){return arguments.length?(this._x=n,this):this._x}function H$e(n){return n[1]}function V$e(n){return arguments.length?(this._y=n,this):this._y}function Y$e(n){return n[2]}function G$e(n){return arguments.length?(this._z=n,this):this._z}function Yre(n,e,r,i){var s=new x3(e??q$e,r??H$e,i??Y$e,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function x3(n,e,r,i,s,o,a,l,c){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=c,this._root=void 0}function EY(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var kr=Yre.prototype=x3.prototype;kr.copy=function(){var n=new x3(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=EY(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=EY(i));return n};kr.add=M$e;kr.addAll=D$e;kr.cover=O$e;kr.data=I$e;kr.extent=R$e;kr.find=A$e;kr.findAllWithinRadius=j$e;kr.remove=L$e;kr.removeAll=F$e;kr.root=$$e;kr.size=z$e;kr.visit=B$e;kr.visitAfter=U$e;kr.x=W$e;kr.y=V$e;kr.z=G$e;function va(n){return function(){return n}}function ia(n){return(n()-.5)*1e-6}function K$e(n){return n.index}function TY(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function X$e(n){var e=K$e,r=f,i,s=va(30),o,a,l,c,u,h,d=1;n==null&&(n=[]);function f(v){return 1/Math.min(c[v.source.index],c[v.target.index])}function p(v){for(var w=0,k=n.length;w<d;++w)for(var _=0,S,C,E,P=0,O=0,M=0,R,j;_<k;++_)S=n[_],C=S.source,E=S.target,P=E.x+E.vx-C.x-C.vx||ia(h),l>1&&(O=E.y+E.vy-C.y-C.vy||ia(h)),l>2&&(M=E.z+E.vz-C.z-C.vz||ia(h)),R=Math.sqrt(P*P+O*O+M*M),R=(R-o[_])/R*v*i[_],P*=R,O*=R,M*=R,E.vx-=P*(j=u[_]),l>1&&(E.vy-=O*j),l>2&&(E.vz-=M*j),C.vx+=P*(j=1-j),l>1&&(C.vy+=O*j),l>2&&(C.vz+=M*j)}function g(){if(a){var v,w=a.length,k=n.length,_=new Map(a.map((C,E)=>[e(C,E,a),C])),S;for(v=0,c=new Array(w);v<k;++v)S=n[v],S.index=v,typeof S.source!="object"&&(S.source=TY(_,S.source)),typeof S.target!="object"&&(S.target=TY(_,S.target)),c[S.source.index]=(c[S.source.index]||0)+1,c[S.target.index]=(c[S.target.index]||0)+1;for(v=0,u=new Array(k);v<k;++v)S=n[v],u[v]=c[S.source.index]/(c[S.source.index]+c[S.target.index]);i=new Array(k),b(),o=new Array(k),y()}}function b(){if(a)for(var v=0,w=n.length;v<w;++v)i[v]=+r(n[v],v,n)}function y(){if(a)for(var v=0,w=n.length;v<w;++v)o[v]=+s(n[v],v,n)}return p.initialize=function(v,...w){a=v,h=w.find(k=>typeof k=="function")||Math.random,l=w.find(k=>[1,2,3].includes(k))||2,g()},p.links=function(v){return arguments.length?(n=v,g(),p):n},p.id=function(v){return arguments.length?(e=v,p):e},p.iterations=function(v){return arguments.length?(d=+v,p):d},p.strength=function(v){return arguments.length?(r=typeof v=="function"?v:va(+v),b(),p):r},p.distance=function(v){return arguments.length?(s=typeof v=="function"?v:va(+v),y(),p):s},p}const Q$e=1664525,J$e=1013904223,PY=4294967296;function Z$e(){let n=1;return()=>(n=(Q$e*n+J$e)%PY)/PY}var MY=3;function RM(n){return n.x}function DY(n){return n.y}function e9e(n){return n.z}var t9e=10,n9e=Math.PI*(3-Math.sqrt(5)),r9e=Math.PI*20/(9+Math.sqrt(221));function i9e(n,e){e=e||2;var r=Math.min(MY,Math.max(1,Math.round(e))),i,s=1,o=.001,a=1-Math.pow(o,1/300),l=0,c=.6,u=new Map,h=HA(p),d=S0("tick","end"),f=Z$e();n==null&&(n=[]);function p(){g(),d.call("tick",i),s<o&&(h.stop(),d.call("end",i))}function g(v){var w,k=n.length,_;v===void 0&&(v=1);for(var S=0;S<v;++S)for(s+=(l-s)*a,u.forEach(function(C){C(s)}),w=0;w<k;++w)_=n[w],_.fx==null?_.x+=_.vx*=c:(_.x=_.fx,_.vx=0),r>1&&(_.fy==null?_.y+=_.vy*=c:(_.y=_.fy,_.vy=0)),r>2&&(_.fz==null?_.z+=_.vz*=c:(_.z=_.fz,_.vz=0));return i}function b(){for(var v=0,w=n.length,k;v<w;++v){if(k=n[v],k.index=v,k.fx!=null&&(k.x=k.fx),k.fy!=null&&(k.y=k.fy),k.fz!=null&&(k.z=k.fz),isNaN(k.x)||r>1&&isNaN(k.y)||r>2&&isNaN(k.z)){var _=t9e*(r>2?Math.cbrt(.5+v):r>1?Math.sqrt(.5+v):v),S=v*n9e,C=v*r9e;r===1?k.x=_:r===2?(k.x=_*Math.cos(S),k.y=_*Math.sin(S)):(k.x=_*Math.sin(S)*Math.cos(C),k.y=_*Math.cos(S),k.z=_*Math.sin(S)*Math.sin(C))}(isNaN(k.vx)||r>1&&isNaN(k.vy)||r>2&&isNaN(k.vz))&&(k.vx=0,r>1&&(k.vy=0),r>2&&(k.vz=0))}}function y(v){return v.initialize&&v.initialize(n,f,r),v}return b(),i={tick:g,restart:function(){return h.restart(p),i},stop:function(){return h.stop(),i},numDimensions:function(v){return arguments.length?(r=Math.min(MY,Math.max(1,Math.round(v))),u.forEach(y),i):r},nodes:function(v){return arguments.length?(n=v,b(),u.forEach(y),i):n},alpha:function(v){return arguments.length?(s=+v,i):s},alphaMin:function(v){return arguments.length?(o=+v,i):o},alphaDecay:function(v){return arguments.length?(a=+v,i):+a},alphaTarget:function(v){return arguments.length?(l=+v,i):l},velocityDecay:function(v){return arguments.length?(c=1-v,i):1-c},randomSource:function(v){return arguments.length?(f=v,u.forEach(y),i):f},force:function(v,w){return arguments.length>1?(w==null?u.delete(v):u.set(v,y(w)),i):u.get(v)},find:function(){var v=Array.prototype.slice.call(arguments),w=v.shift()||0,k=(r>1?v.shift():null)||0,_=(r>2?v.shift():null)||0,S=v.shift()||1/0,C=0,E=n.length,P,O,M,R,j,B;for(S*=S,C=0;C<E;++C)j=n[C],P=w-j.x,O=k-(j.y||0),M=_-(j.z||0),R=P*P+O*O+M*M,R<S&&(B=j,S=R);return B},on:function(v,w){return arguments.length>1?(d.on(v,w),i):d.on(v)}}}function s9e(){var n,e,r,i,s,o=va(-30),a,l=1,c=1/0,u=.81;function h(g){var b,y=n.length,v=(e===1?Hre(n,RM):e===2?vee(n,RM,DY):e===3?Yre(n,RM,DY,e9e):null).visitAfter(f);for(s=g,b=0;b<y;++b)r=n[b],v.visit(p)}function d(){if(n){var g,b=n.length,y;for(a=new Array(b),g=0;g<b;++g)y=n[g],a[y.index]=+o(y,g,n)}}function f(g){var b=0,y,v,w=0,k,_,S,C,E=g.length;if(E){for(k=_=S=C=0;C<E;++C)(y=g[C])&&(v=Math.abs(y.value))&&(b+=y.value,w+=v,k+=v*(y.x||0),_+=v*(y.y||0),S+=v*(y.z||0));b*=Math.sqrt(4/E),g.x=k/w,e>1&&(g.y=_/w),e>2&&(g.z=S/w)}else{y=g,y.x=y.data.x,e>1&&(y.y=y.data.y),e>2&&(y.z=y.data.z);do b+=a[y.data.index];while(y=y.next)}g.value=b}function p(g,b,y,v,w){if(!g.value)return!0;var k=[y,v,w][e-1],_=g.x-r.x,S=e>1?g.y-r.y:0,C=e>2?g.z-r.z:0,E=k-b,P=_*_+S*S+C*C;if(E*E/u<P)return P<c&&(_===0&&(_=ia(i),P+=_*_),e>1&&S===0&&(S=ia(i),P+=S*S),e>2&&C===0&&(C=ia(i),P+=C*C),P<l&&(P=Math.sqrt(l*P)),r.vx+=_*g.value*s/P,e>1&&(r.vy+=S*g.value*s/P),e>2&&(r.vz+=C*g.value*s/P)),!0;if(g.length||P>=c)return;(g.data!==r||g.next)&&(_===0&&(_=ia(i),P+=_*_),e>1&&S===0&&(S=ia(i),P+=S*S),e>2&&C===0&&(C=ia(i),P+=C*C),P<l&&(P=Math.sqrt(l*P)));do g.data!==r&&(E=a[g.data.index]*s/P,r.vx+=_*E,e>1&&(r.vy+=S*E),e>2&&(r.vz+=C*E));while(g=g.next)}return h.initialize=function(g,...b){n=g,i=b.find(y=>typeof y=="function")||Math.random,e=b.find(y=>[1,2,3].includes(y))||2,d()},h.strength=function(g){return arguments.length?(o=typeof g=="function"?g:va(+g),d(),h):o},h.distanceMin=function(g){return arguments.length?(l=g*g,h):Math.sqrt(l)},h.distanceMax=function(g){return arguments.length?(c=g*g,h):Math.sqrt(c)},h.theta=function(g){return arguments.length?(u=g*g,h):Math.sqrt(u)},h}function o9e(n,e,r,i){var s,o,a=va(.1),l,c;typeof n!="function"&&(n=va(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function u(d){for(var f=0,p=s.length;f<p;++f){var g=s[f],b=g.x-e||1e-6,y=(g.y||0)-r||1e-6,v=(g.z||0)-i||1e-6,w=Math.sqrt(b*b+y*y+v*v),k=(c[f]-w)*l[f]*d/w;g.vx+=b*k,o>1&&(g.vy+=y*k),o>2&&(g.vz+=v*k)}}function h(){if(s){var d,f=s.length;for(l=new Array(f),c=new Array(f),d=0;d<f;++d)c[d]=+n(s[d],d,s),l[d]=isNaN(c[d])?0:+a(s[d],d,s)}}return u.initialize=function(d,...f){s=d,o=f.find(p=>[1,2,3].includes(p))||2,h()},u.strength=function(d){return arguments.length?(a=typeof d=="function"?d:va(+d),h(),u):a},u.radius=function(d){return arguments.length?(n=typeof d=="function"?d:va(+d),h(),u):n},u.x=function(d){return arguments.length?(e=+d,u):e},u.y=function(d){return arguments.length?(r=+d,u):r},u.z=function(d){return arguments.length?(i=+d,u):i},u}const{abs:Lp,cos:Xo,sin:yd,acos:a9e,atan2:Fp,sqrt:el,pow:ns}=Math;function $p(n){return n<0?-ns(-n,1/3):ns(n,1/3)}const Gre=Math.PI,Nb=2*Gre,tl=Gre/2,l9e=1e-6,AM=Number.MAX_SAFE_INTEGER||9007199254740991,NM=Number.MIN_SAFE_INTEGER||-9007199254740991,c9e={x:0,y:0,z:0},Ue={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),el(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const s=1-n;let o=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:s*o[0].x+n*o[1].x,y:s*o[0].y+n*o[1].y,t:n};return r&&(l.z=s*o[0].z+n*o[1].z),l}if(i<4){let l=s*s,c=n*n,u,h,d,f=0;i===2?(o=[o[0],o[1],o[2],c9e],u=l,h=s*n*2,d=c):i===3&&(u=l*s,h=l*n*3,d=s*c*3,f=n*c);const p={x:u*o[0].x+h*o[1].x+d*o[2].x+f*o[3].x,y:u*o[0].y+h*o[1].y+d*o[2].y+f*o[3].y,t:n};return r&&(p.z=u*o[0].z+h*o[1].z+d*o[2].z+f*o[3].z),p}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const s=1-n,o=r,a=e;let l=o[0],c=o[1],u=o[2],h=o[3],d;if(l*=s,c*=n,a.length===2)return d=l+c,{x:(l*a[0].x+c*a[1].x)/d,y:(l*a[0].y+c*a[1].y)/d,z:i?(l*a[0].z+c*a[1].z)/d:!1,t:n};if(l*=s,c*=2*s,u*=n*n,a.length===3)return d=l+c+u,{x:(l*a[0].x+c*a[1].x+u*a[2].x)/d,y:(l*a[0].y+c*a[1].y+u*a[2].y)/d,z:i?(l*a[0].z+c*a[1].z+u*a[2].z)/d:!1,t:n};if(l*=s,c*=1.5*s,u*=3*s,h*=n*n*n,a.length===4)return d=l+c+u+h,{x:(l*a[0].x+c*a[1].x+u*a[2].x+h*a[3].x)/d,y:(l*a[0].y+c*a[1].y+u*a[2].y+h*a[3].y)/d,z:i?(l*a[0].z+c*a[1].z+u*a[2].z+h*a[3].z)/d:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,s=i.length,o=s-1;s>1;s--,o--){const a=[];for(let l=0,c;l<o;l++)c={x:o*(i[l+1].x-i[l].x),y:o*(i[l+1].y-i[l].y)},e&&(c.z=o*(i[l+1].z-i[l].z)),a.push(c);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||Ue.approximately(n,e)||Ue.approximately(n,r)},approximately:function(n,e,r){return Lp(n-e)<=(r||l9e)},length:function(n){const r=Ue.Tvalues.length;let i=0;for(let s=0,o;s<r;s++)o=.5*Ue.Tvalues[s]+.5,i+=Ue.Cvalues[s]*Ue.arcfn(o,n);return .5*i},map:function(n,e,r,i,s){const o=r-e,a=s-i,l=n-e,c=l/o;return i+a*c},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(Ue.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-n.x,a=r.y-n.y,l=i*a-s*o,c=i*o+s*a;return Fp(l,c)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return el(r*r+i*i)},closest:function(n,e){let r=ns(2,63),i,s;return n.forEach(function(o,a){s=Ue.dist(e,o),s<r&&(r=s,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=ns(n,e)+ns(1-n,e),i=r-1;return Lp(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=ns(1-n,e),i=ns(n,e)+r;return r/i},lli8:function(n,e,r,i,s,o,a,l){const c=(n*i-e*r)*(s-a)-(n-r)*(s*l-o*a),u=(n*i-e*r)*(o-l)-(e-i)*(s*l-o*a),h=(n-r)*(o-l)-(e-i)*(s-a);return h==0?!1:{x:c/h,y:u/h}},lli4:function(n,e,r,i){const s=n.x,o=n.y,a=e.x,l=e.y,c=r.x,u=r.y,h=i.x,d=i.y;return Ue.lli8(s,o,a,l,c,u,h,d)},lli:function(n,e){return Ue.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new mn(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=AM,r=AM,i=NM,s=NM;return n.forEach(function(o){const a=o.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+s)/2,max:s,size:s-r}}},shapeintersections:function(n,e,r,i,s){if(!Ue.bboxoverlap(e,i))return[];const o=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(c){c.virtual||l.forEach(function(u){if(u.virtual)return;const h=c.intersects(u,s);h.length>0&&(h.c1=c,h.c2=u,h.s1=n,h.s2=r,o.push(h))})}),o},makeshape:function(n,e,r){const i=e.points.length,s=n.points.length,o=Ue.makeline(e.points[i-1],n.points[0]),a=Ue.makeline(n.points[s-1],e.points[0]),l={startcap:o,forward:n,back:e,endcap:a,bbox:Ue.findbbox([o,n,e,a])};return l.intersections=function(c){return Ue.shapeintersections(l,l.bbox,c,c.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=AM,s=NM,o,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,c=r.length;l<c;l++)o=r[l],a=n.get(o),a[e]<i&&(i=a[e]),a[e]>s&&(s=a[e]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,s=-Fp(e.p2.y-i,e.p2.x-r),o=function(a){return{x:(a.x-r)*Xo(s)-(a.y-i)*yd(s),y:(a.x-r)*yd(s)+(a.y-i)*Xo(s)}};return n.map(o)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=Ue.align(n,e),s=function(E){return 0<=E&&E<=1};if(r===2){const E=i[0].y,P=i[1].y,O=i[2].y,M=E-2*P+O;if(M!==0){const R=-el(P*P-E*O),j=-E+P,B=-(R+j)/M,L=-(-R+j)/M;return[B,L].filter(s)}else if(P!==O&&M===0)return[(2*P-O)/(2*P-2*O)].filter(s);return[]}const o=i[0].y,a=i[1].y,l=i[2].y,c=i[3].y;let u=-o+3*a-3*l+c,h=3*o-6*a+3*l,d=-3*o+3*a,f=o;if(Ue.approximately(u,0)){if(Ue.approximately(h,0))return Ue.approximately(d,0)?[]:[-f/d].filter(s);const E=el(d*d-4*h*f),P=2*h;return[(E-d)/P,(-d-E)/P].filter(s)}h/=u,d/=u,f/=u;const p=(3*d-h*h)/3,g=p/3,b=(2*h*h*h-9*h*d+27*f)/27,y=b/2,v=y*y+g*g*g;let w,k,_,S,C;if(v<0){const E=-p/3,P=E*E*E,O=el(P),M=-b/(2*O),R=M<-1?-1:M>1?1:M,j=a9e(R),B=$p(O),L=2*B;return _=L*Xo(j/3)-h/3,S=L*Xo((j+Nb)/3)-h/3,C=L*Xo((j+2*Nb)/3)-h/3,[_,S,C].filter(s)}else{if(v===0)return w=y<0?$p(-y):-$p(y),_=2*w-h/3,S=-w-h/3,[_,S].filter(s);{const E=el(v);return w=$p(-y+E),k=$p(y+E),[w-k-h/3].filter(s)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],s=e-2*r+i;if(s!==0){const o=-el(r*r-e*i),a=-e+r,l=-(o+a)/s,c=-(-o+a)/s;return[l,c]}else if(r!==i&&s===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,s){let o,a,l,c,u=0,h=0;const d=Ue.compute(n,e),f=Ue.compute(n,r),p=d.x*d.x+d.y*d.y;if(i?(o=el(ns(d.y*f.z-f.y*d.z,2)+ns(d.z*f.x-f.z*d.x,2)+ns(d.x*f.y-f.x*d.y,2)),a=ns(p+d.z*d.z,3/2)):(o=d.x*f.y-d.y*f.x,a=ns(p,3/2)),o===0||a===0)return{k:0,r:0};if(u=o/a,h=a/o,!s){const g=Ue.curvature(n-.001,e,r,i,!0).k,b=Ue.curvature(n+.001,e,r,i,!0).k;c=(b-u+(u-g))/2,l=(Lp(b-u)+Lp(u-g))/2}return{k:u,r:h,dk:c,adk:l}},inflections:function(n){if(n.length<4)return[];const e=Ue.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=e[3].x*e[2].y,a=18*(-3*r+2*i+3*s-o),l=18*(3*r-i-3*s),c=18*(s-r);if(Ue.approximately(a,0)){if(!Ue.approximately(l,0)){let f=-c/l;if(0<=f&&f<=1)return[f]}return[]}const u=2*a;if(Ue.approximately(u,0))return[];const h=l*l-4*a*c;if(h<0)return[];const d=Math.sqrt(h);return[(d-l)/u,-(l+d)/u].filter(function(f){return 0<=f&&f<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let s=0,o,a,l,c;s<i;s++)if(o=r[s],a=n[o].mid,l=e[o].mid,c=(n[o].size+e[o].size)/2,Lp(a-l)>=c)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),s=e.bbox(),o=1e5,a=r||.5;if(i.x.size+i.y.size<a&&s.x.size+s.y.size<a)return[(o*(n._t1+n._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=n.split(.5),c=e.split(.5),u=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];u=u.filter(function(d){return Ue.bboxoverlap(d.left.bbox(),d.right.bbox())});let h=[];return u.length===0||(u.forEach(function(d){h=h.concat(Ue.pairiteration(d.left,d.right,a))}),h=h.filter(function(d,f){return h.indexOf(d)===f})),h},getccenter:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-e.x,a=r.y-e.y,l=i*Xo(tl)-s*yd(tl),c=i*yd(tl)+s*Xo(tl),u=o*Xo(tl)-a*yd(tl),h=o*yd(tl)+a*Xo(tl),d=(n.x+e.x)/2,f=(n.y+e.y)/2,p=(e.x+r.x)/2,g=(e.y+r.y)/2,b=d+l,y=f+c,v=p+u,w=g+h,k=Ue.lli8(d,f,b,y,p,g,v,w),_=Ue.dist(k,n);let S=Fp(n.y-k.y,n.x-k.x),C=Fp(e.y-k.y,e.x-k.x),E=Fp(r.y-k.y,r.x-k.x),P;return S<E?((S>C||C>E)&&(S+=Nb),S>E&&(P=E,E=S,S=P)):E<C&&C<S?(P=E,E=S,S=P):E+=Nb,k.s=S,k.e=E,k.r=_,k},numberSort:function(n,e){return n-e}};class Fm{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return Ue.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)Ue.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new Fm(r)}}const{abs:zp,min:OY,max:IY,cos:u9e,sin:d9e,acos:h9e,sqrt:Bp}=Math,f9e=Math.PI;class mn{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const p=[];r.forEach(function(g){["x","y","z"].forEach(function(b){typeof g[b]<"u"&&p.push(g[b])})}),r=p}let s=!1;const o=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!s&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let p=0,g=a?3:2;p<o;p+=g){var c={x:r[p],y:r[p+1]};a&&(c.z=r[p+2]),l.push(c)}const u=this.order=l.length-1,h=this.dims=["x","y"];a&&h.push("z"),this.dimlen=h.length;const d=Ue.align(l,{p1:l[0],p2:l[u]}),f=Ue.dist(l[0],l[u]);this._linear=d.reduce((p,g)=>p+zp(g.y),0)<f/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,s){if(typeof s>"u"&&(s=.5),s===0)return new mn(r,r,i);if(s===1)return new mn(e,r,r);const o=mn.getABC(2,e,r,i,s);return new mn(e,o.A,i)}static cubicFromPoints(e,r,i,s,o){typeof s>"u"&&(s=.5);const a=mn.getABC(3,e,r,i,s);typeof o>"u"&&(o=Ue.dist(r,a.C));const l=o*(1-s)/s,c=Ue.dist(e,i),u=(i.x-e.x)/c,h=(i.y-e.y)/c,d=o*u,f=o*h,p=l*u,g=l*h,b={x:r.x-d,y:r.y-f},y={x:r.x+p,y:r.y+g},v=a.A,w={x:v.x+(b.x-v.x)/(1-s),y:v.y+(b.y-v.y)/(1-s)},k={x:v.x+(y.x-v.x)/s,y:v.y+(y.y-v.y)/s},_={x:e.x+(w.x-e.x)/s,y:e.y+(w.y-e.y)/s},S={x:i.x+(k.x-i.x)/(1-s),y:i.y+(k.y-i.y)/(1-s)};return new mn(e,_,S,i)}static getUtils(){return Ue}getUtils(){return mn.getUtils()}static get PolyBezier(){return Fm}valueOf(){return this.toString()}toString(){return Ue.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,s=["M",r,i,this.order===2?"Q":"C"];for(let o=1,a=e.length;o<a;o++)s.push(e[o].x),s.push(e[o].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=Ue.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=Ue.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return Ue.length(this.derivative.bind(this))}static getABC(e=2,r,i,s,o=.5){const a=Ue.projectionratio(o,e),l=1-a,c={x:a*r.x+l*s.x,y:a*r.y+l*s.y},u=Ue.abcratio(o,e);return{A:{x:i.x+(i.x-c.x)/u,y:i.y+(i.y-c.y)/u},B:i,C:c,S:r,E:s}}getABC(e,r){r=r||this.get(e);let i=this.points[0],s=this.points[this.order];return mn.getABC(this.order,i,r,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,s;r<e;r++)s=r/(e-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),s=[];for(let o=0,a,l=0;o<i.length;o++)a=i[o],Ue.dist(a,e)<r&&(s.push(a),l+=o/i.length);return s.length?t/=s.length:!1}project(e){const r=this.getLUT(),i=r.length-1,s=Ue.closest(r,e),o=s.mpos,a=(o-1)/i,l=(o+1)/i,c=.1/i;let u=s.mdist,h=a,d=h,f;u+=1;for(let p;h<l+c;h+=c)f=this.compute(h),p=Ue.dist(e,f),p<u&&(u=p,d=h);return d=d<0?0:d>1?1:d,f=this.compute(d),f.t=d,f.d=u,f}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?Ue.computeWithRatios(e,this.points,this.ratios,this._3d):Ue.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let s=1,o,a;s<i;s++)o=e[s],a=e[s-1],r[s]={x:(i-s)/i*o.x+s/i*a.x,y:(i-s)/i*o.y+s/i*a.y};return r[i]=e[i-1],new mn(r)}derivative(e){return Ue.compute(e,this.dpoints[0],this._3d)}dderivative(e){return Ue.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new mn(Ue.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return Ue.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return Ue.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=Bp(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),s=Bp(r.x*r.x+r.y*r.y+r.z*r.z),o=Bp(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=s,r.y/=s,r.z/=s,i.x/=o,i.y/=o,i.z/=o;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Bp(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const c=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:c[0]*r.x+c[1]*r.y+c[2]*r.z,y:c[3]*r.x+c[4]*r.y+c[5]*r.z,z:c[6]*r.x+c[7]*r.y+c[8]*r.z}}hull(e){let r=this.points,i=[],s=[],o=0;for(s[o++]=r[0],s[o++]=r[1],s[o++]=r[2],this.order===3&&(s[o++]=r[3]);r.length>1;){i=[];for(let a=0,l,c=r.length-1;a<c;a++)l=Ue.lerp(e,r[a],r[a+1]),s[o++]=l,i.push(l);r=i}return s}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),s={left:this.order===2?new mn([i[0],i[3],i[5]]):new mn([i[0],i[4],i[7],i[9]]),right:this.order===2?new mn([i[5],i[4],i[2]]):new mn([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=Ue.map(0,0,1,this._t1,this._t2),s.left._t2=Ue.map(e,0,1,this._t1,this._t2),s.right._t1=Ue.map(e,0,1,this._t1,this._t2),s.right._t2=Ue.map(1,0,1,this._t1,this._t2),r?(r=Ue.map(r,e,1,0,1),s.right.split(r).left):s}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let s=function(a){return a[i]},o=this.dpoints[0].map(s);e[i]=Ue.droots(o),this.order===3&&(o=this.dpoints[1].map(s),e[i]=e[i].concat(Ue.droots(o))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(Ue.numberSort))}).bind(this)),e.values=r.sort(Ue.numberSort).filter(function(i,s){return r.indexOf(i)===s}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=Ue.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return Ue.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),s=this.normal(e),o={c:i,n:s,x:i.x+s.x*r,y:i.y+s.y*r};return this._3d&&(o.z=i.z+s.z*r),o}if(this._linear){const i=this.normal(0),s=this.points.map(function(o){const a={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(a.z=o.z+e*i.z),a});return[new mn(s)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const s=Ue.angle(this.points[0],this.points[3],this.points[1]),o=Ue.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&o<0||s<0&&o>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),zp(h9e(i))<f9e/3}reduce(){let e,r=0,i=0,s=.01,o,a=[],l=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),r=c[0],e=1;e<c.length;e++)i=c[e],o=this.split(r,i),o._t1=r,o._t2=i,a.push(o),r=i;return a.forEach(function(u){for(r=0,i=0;i<=1;)for(i=r+s;i<=1+s;i+=s)if(o=u.split(r,i),!o.simple()){if(i-=s,zp(r-i)<s)return[];o=u.split(r,i),o._t1=Ue.map(r,0,1,u._t1,u._t2),o._t2=Ue.map(i,0,1,u._t1,u._t2),l.push(o),r=i;break}r<1&&(o=u.split(r,1),o._t1=Ue.map(r,0,1,u._t1,u._t2),o._t2=u._t2,l.push(o))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const s=this.order;let o=this.points.map((a,l)=>(1-l/s)*r+l/s*i);return new mn(this.points.map((a,l)=>({x:a.x+e.x*o[l],y:a.y+e.y*o[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const s=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,c=[this.offset(0,10),this.offset(1,10)],u=[],h=Ue.lli4(c[0],c[0].c,c[1],c[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(d){const f=u[d*r]=Ue.copy(o[d*r]);f.x+=(d?l:a)*c[d].n.x,f.y+=(d?l:a)*c[d].n.y}),i?([0,1].forEach(function(d){if(!(r===2&&d)){var f=o[d+1],p={x:f.x-h.x,y:f.y-h.y},g=i?i((d+1)/r):e;i&&!s&&(g=-g);var b=Bp(p.x*p.x+p.y*p.y);p.x/=b,p.y/=b,u[d+1]={x:f.x+g*p.x,y:f.y+g*p.y}}}),new mn(u)):([0,1].forEach(d=>{if(r===2&&d)return;const f=u[d*r],p=this.derivative(d),g={x:f.x+p.x,y:f.y+p.y};u[d+1]=Ue.lli4(f,g,h,o[d+1])}),new mn(u))}outline(e,r,i,s){if(r=r===void 0?e:r,this._linear){const S=this.normal(0),C=this.points[0],E=this.points[this.points.length-1];let P,O,M;i===void 0&&(i=e,s=r),P={x:C.x+S.x*e,y:C.y+S.y*e},M={x:E.x+S.x*i,y:E.y+S.y*i},O={x:(P.x+M.x)/2,y:(P.y+M.y)/2};const R=[P,O,M];P={x:C.x-S.x*r,y:C.y-S.y*r},M={x:E.x-S.x*s,y:E.y-S.y*s},O={x:(P.x+M.x)/2,y:(P.y+M.y)/2};const j=[M,O,P],B=Ue.makeline(j[2],R[0]),L=Ue.makeline(R[2],j[0]),$=[B,new mn(R),L,new mn(j)];return new Fm($)}const o=this.reduce(),a=o.length,l=[];let c=[],u,h=0,d=this.length();const f=typeof i<"u"&&typeof s<"u";function p(S,C,E,P,O){return function(M){const R=P/E,j=(P+O)/E,B=C-S;return Ue.map(M,0,1,S+R*B,S+j*B)}}o.forEach(function(S){const C=S.length();f?(l.push(S.scale(p(e,i,d,h,C))),c.push(S.scale(p(-r,-s,d,h,C)))):(l.push(S.scale(e)),c.push(S.scale(-r))),h+=C}),c=c.map(function(S){return u=S.points,u[3]?S.points=[u[3],u[2],u[1],u[0]]:S.points=[u[2],u[1],u[0]],S}).reverse();const g=l[0].points[0],b=l[a-1].points[l[a-1].points.length-1],y=c[a-1].points[c[a-1].points.length-1],v=c[0].points[0],w=Ue.makeline(y,g),k=Ue.makeline(b,v),_=[w].concat(l).concat([k]).concat(c);return new Fm(_)}outlineshapes(e,r,i){r=r||e;const s=this.outline(e,r).curves,o=[];for(let a=1,l=s.length;a<l/2;a++){const c=Ue.makeshape(s[a],s[l-a],i);c.startcap.virtual=a>1,c.endcap.virtual=a<l/2-1,o.push(c)}return o}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof mn&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=OY(e.p1.x,e.p2.x),i=OY(e.p1.y,e.p2.y),s=IY(e.p1.x,e.p2.x),o=IY(e.p1.y,e.p2.y);return Ue.roots(this.points,e).filter(a=>{var l=this.get(a);return Ue.between(l.x,r,s)&&Ue.between(l.y,i,o)})}selfintersects(e){const r=this.reduce(),i=r.length-2,s=[];for(let o=0,a,l,c;o<i;o++)l=r.slice(o,o+1),c=r.slice(o+2),a=this.curveintersects(l,c,e),s.push(...a);return s}curveintersects(e,r,i){const s=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&s.push({left:a,right:l})})});let o=[];return s.forEach(function(a){const l=Ue.pairiteration(a.left,a.right,i);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,s){const o=(s-i)/4,a=this.get(i+o),l=this.get(s-o),c=Ue.dist(e,r),u=Ue.dist(e,a),h=Ue.dist(e,l);return zp(u-c)+zp(h-c)}_iterate(e,r){let i=0,s=1,o;do{o=0,s=1;let a=this.get(i),l,c,u,h,d=!1,f=!1,p,g=s,b=1;do if(f=d,h=u,g=(i+s)/2,l=this.get(g),c=this.get(s),u=Ue.getccenter(a,l,c),u.interval={start:i,end:s},d=this._error(u,a,i,s)<=e,p=f&&!d,p||(b=s),d){if(s>=1){if(u.interval.end=b=1,h=u,s>1){let v={x:u.x+u.r*u9e(u.e),y:u.y+u.r*d9e(u.e)};u.e+=Ue.angle({x:u.x,y:u.y},v,this.get(1))}break}s=s+(s-i)/2}else s=g;while(!p&&o++<100);if(o>=100)break;h=h||u,r.push(h),i=b}while(s<1);return r}}function TI(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function p9e(n){if(Array.isArray(n))return n}function m9e(n){if(Array.isArray(n))return TI(n)}function g9e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function v9e(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function b9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x9e(n,e){if(n==null)return{};var r,i,s=w9e(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(s[r]=n[r])}return s}function w9e(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function _9e(n,e){return p9e(n)||v9e(n,e)||Kre(n,e)||b9e()}function S9e(n){return m9e(n)||g9e(n)||Kre(n)||y9e()}function k9e(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function C9e(n){var e=k9e(n,"string");return typeof e=="symbol"?e:e+""}function Kre(n,e){if(n){if(typeof n=="string")return TI(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?TI(n,e):void 0}}var E9e=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),o=n.reduce(function(l,c){var u=l,h=c;return s.forEach(function(d,f){var p=d.keyAccessor,g=d.isProp,b;if(g){var y=h,v=y[p],w=x9e(y,[p].map(C9e));b=v,h=w}else b=p(h,f);f+1<s.length?(u.hasOwnProperty(b)||(u[b]={}),u=u[b]):r?(u.hasOwnProperty(b)||(u[b]=[]),u[b].push(h)):u[b]=h}),l},{});r instanceof Function&&function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===s.length?Object.keys(c).forEach(function(h){return c[h]=r(c[h])}):Object.values(c).forEach(function(h){return l(h,u+1)})}(o);var a=o;return i&&(a=[],function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===s.length?a.push({keys:u,vals:c}):Object.entries(c).forEach(function(h){var d=_9e(h,2),f=d[0],p=d[1];return l(p,[].concat(S9e(u),[f]))})}(o),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function T9e(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var P9e=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;T9e(P9e);function PI(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function M9e(n){if(Array.isArray(n))return n}function D9e(n){if(Array.isArray(n))return PI(n)}function RY(n,e,r){if(Xre())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(n.bind.apply(n,i));return s}function Xg(n,e,r){return(e=j9e(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Xre(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xre=function(){return!!n})()}function O9e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function I9e(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function R9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AY(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function xd(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AY(Object(r),!0).forEach(function(i){Xg(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):AY(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function $m(n,e){return M9e(n)||I9e(n,e)||Qre(n,e)||R9e()}function hs(n){return D9e(n)||O9e(n)||Qre(n)||A9e()}function N9e(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function j9e(n){var e=N9e(n,"string");return typeof e=="symbol"?e:e+""}function MI(n){"@babel/helpers - typeof";return MI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MI(n)}function Qre(n,e){if(n){if(typeof n=="string")return PI(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?PI(n,e):void 0}}var L9e=QA(o2e);function NY(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=L9e(e(i))})}function F9e(n,e){var r=n.nodes,i=n.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.nodeFilter,a=o===void 0?function(){return!0}:o,l=s.onLoopError,c=l===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:l,u={};r.forEach(function(p){return u[e(p)]={data:p,out:[],depth:-1,skip:!a(p)}}),i.forEach(function(p){var g=p.source,b=p.target,y=_(g),v=_(b);if(!u.hasOwnProperty(y))throw"Missing source node with id: ".concat(y);if(!u.hasOwnProperty(v))throw"Missing target node with id: ".concat(v);var w=u[y],k=u[v];w.out.push(k);function _(S){return MI(S)==="object"?e(S):S}});var h=[];f(Object.values(u));var d=Object.assign.apply(Object,[{}].concat(hs(Object.entries(u).filter(function(p){var g=$m(p,2),b=g[1];return!b.skip}).map(function(p){var g=$m(p,2),b=g[0],y=g[1];return Xg({},b,y.depth)}))));return d;function f(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=function(){var _=p[v];if(g.indexOf(_)!==-1){var S=[].concat(hs(g.slice(g.indexOf(_))),[_]).map(function(C){return e(C.data)});return h.some(function(C){return C.length===S.length&&C.every(function(E,P){return E===S[P]})})||(h.push(S),c(S)),1}b>_.depth&&(_.depth=b,f(_.out,[].concat(hs(g),[_]),b+(_.skip?0:1)))},v=0,w=p.length;v<w;v++)y()}}var $9e=2,Mr=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},jY=function(e,r){if(!r.isShadow){var i=Gt(r.linkDirectionalParticles);r.graphData.links.forEach(function(s){var o=Math.round(Math.abs(i(s)));o?s.__photons=hs(Array(o)).map(function(){return{}}):delete s.__photons})}},tw=p3({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,jY(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Mr},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Mr},nodeColor:{default:"color",triggerUpdate:!1,onChange:Mr},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Mr},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Mr},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Mr},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Mr},linkColor:{default:"color",triggerUpdate:!1,onChange:Mr},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Mr},linkWidth:{default:1,triggerUpdate:!1,onChange:Mr},linkCurvature:{default:0,triggerUpdate:!1,onChange:Mr},linkCanvasObject:{triggerUpdate:!1,onChange:Mr},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Mr},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Mr},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Mr},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Mr},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:jY},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),s(),!e.isShadow&&o(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=Gt(e.nodeVisibility),c=Gt(e.nodeVal),u=Gt(e.nodeColor),h=Gt(e.nodeCanvasObjectMode),d=e.ctx,f=e.isShadow/e.globalScale,p=e.graphData.nodes.filter(l);d.save(),p.forEach(function(g){var b=h(g);if(e.nodeCanvasObject&&(b==="before"||b==="replace")&&(e.nodeCanvasObject(g,d,e.globalScale),b==="replace")){d.restore();return}var y=Math.sqrt(Math.max(0,c(g)||1))*e.nodeRelSize+f;d.beginPath(),d.arc(g.x,g.y,y,0,2*Math.PI,!1),d.fillStyle=u(g)||"rgba(31, 120, 180, 0.92)",d.fill(),e.nodeCanvasObject&&b==="after"&&e.nodeCanvasObject(g,e.ctx,e.globalScale)}),d.restore()}function s(){var l=Gt(e.linkVisibility),c=Gt(e.linkColor),u=Gt(e.linkWidth),h=Gt(e.linkLineDash),d=Gt(e.linkCurvature),f=Gt(e.linkCanvasObjectMode),p=e.ctx,g=e.isShadow*2,b=e.graphData.links.filter(l);b.forEach(C);var y=[],v=[],w=b;if(e.linkCanvasObject){var k=[],_=[];b.forEach(function(E){return({before:y,after:v,replace:k}[f(E)]||_).push(E)}),w=[].concat(hs(y),v,_),y=y.concat(k)}p.save(),y.forEach(function(E){return e.linkCanvasObject(E,p,e.globalScale)}),p.restore();var S=E9e(w,[c,u,h]);p.save(),Object.entries(S).forEach(function(E){var P=$m(E,2),O=P[0],M=P[1],R=!O||O==="undefined"?"rgba(0,0,0,0.15)":O;Object.entries(M).forEach(function(j){var B=$m(j,2),L=B[0],$=B[1],z=(L||1)/e.globalScale+g;Object.entries($).forEach(function(W){var q=$m(W,2);q[0];var V=q[1],F=h(V[0]);p.beginPath(),V.forEach(function(G){var H=G.source,A=G.target;if(!(!H||!A||!H.hasOwnProperty("x")||!A.hasOwnProperty("x"))){p.moveTo(H.x,H.y);var Q=G.__controlPoints;Q?p[Q.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(p,hs(Q).concat([A.x,A.y])):p.lineTo(A.x,A.y)}}),p.strokeStyle=R,p.lineWidth=z,p.setLineDash(F||[]),p.stroke()})})}),p.restore(),p.save(),v.forEach(function(E){return e.linkCanvasObject(E,p,e.globalScale)}),p.restore();function C(E){var P=d(E);if(!P){E.__controlPoints=null;return}var O=E.source,M=E.target;if(!(!O||!M||!O.hasOwnProperty("x")||!M.hasOwnProperty("x"))){var R=Math.sqrt(Math.pow(M.x-O.x,2)+Math.pow(M.y-O.y,2));if(R>0){var j=Math.atan2(M.y-O.y,M.x-O.x),B=R*P,L={x:(O.x+M.x)/2+B*Math.cos(j-Math.PI/2),y:(O.y+M.y)/2+B*Math.sin(j-Math.PI/2)};E.__controlPoints=[L.x,L.y]}else{var $=P*70;E.__controlPoints=[M.x,M.y-$,M.x+$,M.y]}}}}function o(){var l=1.6,c=.2,u=Gt(e.linkDirectionalArrowLength),h=Gt(e.linkDirectionalArrowRelPos),d=Gt(e.linkVisibility),f=Gt(e.linkDirectionalArrowColor||e.linkColor),p=Gt(e.nodeVal),g=e.ctx;g.save(),e.graphData.links.filter(d).forEach(function(b){var y=u(b);if(!(!y||y<0)){var v=b.source,w=b.target;if(!(!v||!w||!v.hasOwnProperty("x")||!w.hasOwnProperty("x"))){var k=Math.sqrt(Math.max(0,p(v)||1))*e.nodeRelSize,_=Math.sqrt(Math.max(0,p(w)||1))*e.nodeRelSize,S=Math.min(1,Math.max(0,h(b))),C=f(b)||"rgba(0,0,0,0.28)",E=y/l/2,P=b.__controlPoints&&RY(mn,[v.x,v.y].concat(hs(b.__controlPoints),[w.x,w.y])),O=P?function(z){return P.get(z)}:function(z){return{x:v.x+(w.x-v.x)*z||0,y:v.y+(w.y-v.y)*z||0}},M=P?P.length():Math.sqrt(Math.pow(w.x-v.x,2)+Math.pow(w.y-v.y,2)),R=k+y+(M-k-_-y)*S,j=O(R/M),B=O((R-y)/M),L=O((R-y*(1-c))/M),$=Math.atan2(j.y-B.y,j.x-B.x)-Math.PI/2;g.beginPath(),g.moveTo(j.x,j.y),g.lineTo(B.x+E*Math.cos($),B.y+E*Math.sin($)),g.lineTo(L.x,L.y),g.lineTo(B.x-E*Math.cos($),B.y-E*Math.sin($)),g.fillStyle=C,g.fill()}}}),g.restore()}function a(){var l=Gt(e.linkDirectionalParticles),c=Gt(e.linkDirectionalParticleSpeed),u=Gt(e.linkDirectionalParticleOffset),h=Gt(e.linkDirectionalParticleWidth),d=Gt(e.linkVisibility),f=Gt(e.linkDirectionalParticleColor||e.linkColor),p=e.ctx;p.save(),e.graphData.links.filter(d).forEach(function(g){var b=l(g);if(!(!g.hasOwnProperty("__photons")||!g.__photons.length)){var y=g.source,v=g.target;if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var w=c(g),k=Math.abs(u(g)),_=g.__photons||[],S=Math.max(0,h(g)/2)/Math.sqrt(e.globalScale),C=f(g)||"rgba(0,0,0,0.28)";p.fillStyle=C;var E=g.__controlPoints?RY(mn,[y.x,y.y].concat(hs(g.__controlPoints),[v.x,v.y])):null,P=0,O=!1;_.forEach(function(M){var R=!!M.__singleHop;if(M.hasOwnProperty("__progressRatio")||(M.__progressRatio=R?0:(P+k)/b),!R&&P++,M.__progressRatio+=w,M.__progressRatio>=1)if(!R)M.__progressRatio=M.__progressRatio%1;else{O=!0;return}var j=M.__progressRatio,B=E?E.get(j):{x:y.x+(v.x-y.x)*j||0,y:y.y+(v.y-y.y)*j||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(B.x,B.y,g,p,e.globalScale):(p.beginPath(),p.arc(B.x,B.y,S,0,2*Math.PI,!1),p.fill())}),O&&(g.__photons=g.__photons.filter(function(M){return!M.__singleHop||M.__progressRatio<=1}))}}}),p.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:i9e().force("link",X$e()).force("charge",s9e()).force("center",p$e()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&NY(e.graphData.nodes,Gt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&NY(e.graphData.links,Gt(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(f){f.source=f[e.linkSource],f.target=f[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(f){return f[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&F9e(e.graphData,function(f){return f[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,hs(Object.values(s||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*$9e*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(f){return delete f[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var c=["rl","bu"].includes(e.dagMode),u=function(p){return(s[p[e.nodeId]]-o/2)*a*(c?-1:1)},h=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(f){return f[h]=u(f)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?o9e(function(f){var p=s[f[e.nodeId]]||-1;return(e.dagMode==="radialin"?o-p:p)*a}).strength(function(f){return e.dagNodeFilter(f)?1:0}):null);for(var d=0;d<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);d++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function Jre(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(o){return{default:i[o](),onChange:function(l,c){r.forEach(function(u){return c[u][o](l)})},triggerUpdate:!1}},linkMethod:function(o){return function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var h=[];return r.forEach(function(d){var f=a[d],p=f[o].apply(f,c);p!==f&&h.push(p)}),h.length?h[0]:this}}}}var z9e=800,B9e=4,U9e=5,Zre=Jre("forceGraph",tw),q9e=Jre(["forceGraph","shadowGraph"],tw),W9e=Object.assign.apply(Object,hs(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return Xg({},n,Zre.linkProp(n))})).concat(hs(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return Xg({},n,q9e.linkProp(n))})))),H9e=Object.assign.apply(Object,hs(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return Xg({},n,Zre.linkMethod(n))})));function jM(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(o){o.style.width="".concat(n.width,"px"),o.style.height="".concat(n.height,"px"),o.width=n.width*i,o.height=n.height*i,!e&&!r&&o.getContext("2d").scale(i,i)});var s=uo(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/s,(n.height-r)/2/s),n.needsRedraw=!0}}function eie(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function LY(n,e,r){n.save(),eie(n),n.clearRect(0,0,e,r),n.restore()}var V9e=p3({props:xd({width:{default:window.innerWidth,onChange:function(e,r){return jM(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return jM(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(s){return(s||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(s){var o=s.type,a=s.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var c=r.colorTracker.lookup(l.__indexColor);return!c||!c.hasOwnProperty("d")||c.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:o,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},W9e),aliases:{stopAnimation:"pauseAnimation"},methods:xd({graph2ScreenCoords:function(e,r,i){var s=uo(e.canvas);return{x:r*s.k+s.x,y:i*s.k+s.y}},screen2GraphCoords:function(e,r,i){var s=uo(e.canvas);return{x:(r-s.x)/s.k,y:(i-s.y)/s.k}},centerAt:function(e,r,i,s){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var o=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return s?e.tweenGroup.add(new lY(a()).to(o,s).easing(du.Quadratic.Out).onUpdate(l).start()):l(o),this}return a();function a(){var c=uo(e.canvas);return{x:(e.width/2-c.x)/c.k,y:(e.height/2-c.y)/c.k}}function l(c){var u=c.x,h=c.y;e.zoom.translateTo(e.zoom.__baseElem,u===void 0?a().x:u,h===void 0?a().y:h),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new lY({k:s()}).to({k:r},i).easing(du.Quadratic.Out).onUpdate(function(a){var l=a.k;return o(l)}).start()):o(r),this;return s();function s(){return uo(e.canvas).k}function o(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,o);if(l){var c={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(c.x,c.y,r),this.zoom(u,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=Gt(e.nodeVal),s=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},o=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:s(a)}});return o.length?{x:[h8(o,function(a){return a.x-a.r}),vO(o,function(a){return a.x+a.r})],y:[h8(o,function(a){return a.y-a.r}),vO(o,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},H9e),stateInit:function(){return{lastSetZoom:1,zoom:f2e(),forceGraph:new tw,shadowGraph:new tw().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new VFe,tweenGroup:new Cre}},init:function(e,r){var i=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),s.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var o=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},c=function(){var d=null,f=window.devicePixelRatio,p=l.x>0&&l.y>0?a.getImageData(l.x*f,l.y*f,1,1):null;return p&&(d=r.colorTracker.lookup(p.data)),d};Ir(r.canvas).call(RSe().subject(function(){if(!r.enableNodeDrag)return null;var h=c();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var d=h.subject;d.__initialDragPos={x:d.x,y:d.y,fx:d.fx,fy:d.fy},h.active||(d.fx=d.x,d.fy=d.y),r.canvas.classList.add("grabbable")}).on("drag",function(h){var d=h.subject,f=d.__initialDragPos,p=h,g=uo(r.canvas).k,b={x:f.x+(p.x-f.x)/g-d.x,y:f.y+(p.y-f.y)/g-d.y};["x","y"].forEach(function(y){return d["f".concat(y)]=d[y]=f[y]+(p[y]-f[y])/g}),!(!d.__dragged&&U9e>=Math.sqrt(F1e(["x","y"].map(function(y){return Math.pow(h[y]-f[y],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,d.__dragged=!0,r.onNodeDrag(d,b))}).on("end",function(h){var d=h.subject,f=d.__initialDragPos,p={x:d.x-f.x,y:d.y-f.y};f.fx===void 0&&(d.fx=void 0),f.fy===void 0&&(d.fy=void 0),delete d.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,d.__dragged&&(delete d.__dragged,r.onNodeDragEnd(d,p))})),r.zoom(r.zoom.__baseElem=Ir(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(h){return!h.button&&r.enableZoomPanInteraction&&(h.type!=="wheel"||Gt(r.enableZoomInteraction)(h))&&(h.type==="wheel"||Gt(r.enablePanInteraction)(h))}).on("zoom",function(h){var d=h.transform;[o,a].forEach(function(f){eie(f),f.translate(d.x,d.y),f.scale(d.k,d.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(xd(xd({},d),i.centerAt())),r.needsRedraw=!0}).on("end",function(h){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(xd(xd({},h.transform),i.centerAt()))}),jM(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){uo(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=B9e/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new f$e(s),["pointermove","pointerdown"].forEach(function(h){return s.addEventListener(h,function(d){h==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=d),!r.isPointerDragging&&d.type==="pointermove"&&r.onBackgroundClick&&(d.pressure>0||r.isPointerPressed)&&(d.pointerType==="mouse"||d.movementX===void 0||[d.movementX,d.movementY].some(function(g){return Math.abs(g)>1}))&&(r.isPointerDragging=!0);var f=p(s);l.x=d.pageX-f.left,l.y=d.pageY-f.top;function p(g){var b=g.getBoundingClientRect(),y=window.pageXOffset||document.documentElement.scrollLeft,v=window.pageYOffset||document.documentElement.scrollTop;return{top:b.top+v,left:b.left+y}}},{passive:!0})}),s.addEventListener("pointerup",function(h){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var d=[h,r.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(r.hoverObj){var f=r["on".concat(r.hoverObj.type,"Click")];f&&f.apply(void 0,[r.hoverObj.d].concat(d))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,d);if(h.button===2)if(r.hoverObj){var p=r["on".concat(r.hoverObj.type,"RightClick")];p&&p.apply(void 0,[r.hoverObj.d].concat(d))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,d)})}},{passive:!0}),s.addEventListener("contextmenu",function(h){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(h.preventDefault(),!1)}),r.forceGraph(o),r.shadowGraph(a);var u=Z6e(function(){LY(a,r.width,r.height),r.shadowGraph.linkWidth(function(d){return Gt(r.linkWidth)(d)+r.linkHoverPrecision});var h=uo(r.canvas);r.shadowGraph.globalScale(h.k).tickFrame()},z9e);r.flushShadowCanvas=u.flush,(this._animationCycle=function h(){var d=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(k){return k.__photons&&k.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var f=r.isPointerDragging?null:c();if(f!==r.hoverObj){var p=r.hoverObj,g=p?p.type:null,b=f?f.type:null;if(g&&g!==b){var y=r["on".concat(g,"Hover")];y&&y(null,p.d)}if(b){var v=r["on".concat(b,"Hover")];v&&v(f.d,g===b?p.d:null)}r.tooltip.content(f&&Gt(r["".concat(f.type.toLowerCase(),"Label")])(f.d)||null),r.canvas.classList[(f&&r["on".concat(b,"Click")]||!f&&r.onBackgroundClick)&&Gt(r.showPointerCursor)(f==null?void 0:f.d)?"add":"remove"]("clickable"),r.hoverObj=f}d&&u()}if(d){LY(o,r.width,r.height);var w=uo(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(o,w),r.forceGraph.globalScale(w).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(o,w)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(e){}});const W1={width:ae.number,height:ae.number,graphData:ae.shape({nodes:ae.arrayOf(ae.object).isRequired,links:ae.arrayOf(ae.object).isRequired}),backgroundColor:ae.string,nodeRelSize:ae.number,nodeId:ae.string,nodeLabel:ae.oneOfType([ae.string,ae.func]),nodeVal:ae.oneOfType([ae.number,ae.string,ae.func]),nodeVisibility:ae.oneOfType([ae.bool,ae.string,ae.func]),nodeColor:ae.oneOfType([ae.string,ae.func]),nodeAutoColorBy:ae.oneOfType([ae.string,ae.func]),onNodeHover:ae.func,onNodeClick:ae.func,linkSource:ae.string,linkTarget:ae.string,linkLabel:ae.oneOfType([ae.string,ae.func]),linkVisibility:ae.oneOfType([ae.bool,ae.string,ae.func]),linkColor:ae.oneOfType([ae.string,ae.func]),linkAutoColorBy:ae.oneOfType([ae.string,ae.func]),linkWidth:ae.oneOfType([ae.number,ae.string,ae.func]),linkCurvature:ae.oneOfType([ae.number,ae.string,ae.func]),linkDirectionalArrowLength:ae.oneOfType([ae.number,ae.string,ae.func]),linkDirectionalArrowColor:ae.oneOfType([ae.string,ae.func]),linkDirectionalArrowRelPos:ae.oneOfType([ae.number,ae.string,ae.func]),linkDirectionalParticles:ae.oneOfType([ae.number,ae.string,ae.func]),linkDirectionalParticleSpeed:ae.oneOfType([ae.number,ae.string,ae.func]),linkDirectionalParticleOffset:ae.oneOfType([ae.number,ae.string,ae.func]),linkDirectionalParticleWidth:ae.oneOfType([ae.number,ae.string,ae.func]),linkDirectionalParticleColor:ae.oneOfType([ae.string,ae.func]),onLinkHover:ae.func,onLinkClick:ae.func,dagMode:ae.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:ae.number,dagNodeFilter:ae.func,onDagError:ae.func,d3AlphaMin:ae.number,d3AlphaDecay:ae.number,d3VelocityDecay:ae.number,warmupTicks:ae.number,cooldownTicks:ae.number,cooldownTime:ae.number,onEngineTick:ae.func,onEngineStop:ae.func,getGraphBbox:ae.func},tie={zoomToFit:ae.func,onNodeRightClick:ae.func,onNodeDrag:ae.func,onNodeDragEnd:ae.func,onLinkRightClick:ae.func,linkHoverPrecision:ae.number,onBackgroundClick:ae.func,onBackgroundRightClick:ae.func,showPointerCursor:ae.oneOfType([ae.bool,ae.func]),enablePointerInteraction:ae.bool,enableNodeDrag:ae.bool},w3={showNavInfo:ae.bool,nodeOpacity:ae.number,nodeResolution:ae.number,nodeThreeObject:ae.oneOfType([ae.object,ae.string,ae.func]),nodeThreeObjectExtend:ae.oneOfType([ae.bool,ae.string,ae.func]),nodePositionUpdate:ae.func,linkOpacity:ae.number,linkResolution:ae.number,linkCurveRotation:ae.oneOfType([ae.number,ae.string,ae.func]),linkMaterial:ae.oneOfType([ae.object,ae.string,ae.func]),linkThreeObject:ae.oneOfType([ae.object,ae.string,ae.func]),linkThreeObjectExtend:ae.oneOfType([ae.bool,ae.string,ae.func]),linkPositionUpdate:ae.func,linkDirectionalArrowResolution:ae.number,linkDirectionalParticleResolution:ae.number,linkDirectionalParticleThreeObject:ae.oneOfType([ae.object,ae.string,ae.func]),forceEngine:ae.oneOf(["d3","ngraph"]),ngraphPhysics:ae.object,numDimensions:ae.oneOf([1,2,3])},Y9e=Object.assign({},W1,tie,{linkLineDash:ae.oneOfType([ae.arrayOf(ae.number),ae.string,ae.func]),nodeCanvasObjectMode:ae.oneOfType([ae.string,ae.func]),nodeCanvasObject:ae.func,nodePointerAreaPaint:ae.func,linkCanvasObjectMode:ae.oneOfType([ae.string,ae.func]),linkCanvasObject:ae.func,linkPointerAreaPaint:ae.func,linkDirectionalParticleCanvasObject:ae.func,autoPauseRedraw:ae.bool,minZoom:ae.number,maxZoom:ae.number,enableZoomInteraction:ae.oneOfType([ae.bool,ae.func]),enablePanInteraction:ae.oneOfType([ae.bool,ae.func]),onZoom:ae.func,onZoomEnd:ae.func,onRenderFramePre:ae.func,onRenderFramePost:ae.func});Object.assign({},W1,tie,w3,{enableNavigationControls:ae.bool,controlType:ae.oneOf(["trackball","orbit","fly"]),rendererConfig:ae.object,extraRenderers:ae.arrayOf(ae.shape({render:ae.func.isRequired}))});Object.assign({},W1,w3,{nodeDesc:ae.oneOfType([ae.string,ae.func]),linkDesc:ae.oneOfType([ae.string,ae.func])});Object.assign({},W1,w3,{markerAttrs:ae.object,yOffset:ae.number,glScale:ae.number});const _3=E6e(V9e,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});_3.displayName="ForceGraph2D";_3.propTypes=Y9e;function G9e(){const[n,e]=D.useState(v0),[r,i]=D.useState(()=>localStorage.getItem("authToken")||""),[s,o]=D.useState(zw),[a,l]=D.useState(""),[c,u]=D.useState(""),[h,d]=D.useState(!1),[f,p]=D.useState([]),[g,b]=D.useState(!1),[y,v]=D.useState(!1),[w,k]=D.useState("list"),[_,S]=D.useState(()=>vF()),[C,E]=D.useState([]),[P,O]=D.useState(null),M=D.useRef(null),R=D.useRef(0),j=D.useRef(null),B=D.useRef(null),L=D.useRef(null),$=D.useRef(!1),z=(Z,se="success")=>{const be={id:R.current++,timestamp:Date.now(),event:Z,type:se};p(Oe=>[be,...Oe].slice(0,1e3))},W=D.useRef(new Set);D.useEffect(()=>{if(f.length===0)return;const Z=f.filter(Oe=>!W.current.has(Oe.id));if(Z.length===0)return;Z.forEach(Oe=>W.current.add(Oe.id));const se=Z.map(Oe=>Oe.event);xOe(se,_,Oe=>{E(Ke=>{const Pe=[...Ke,...Oe].filter((U,_e,Ie)=>Ie.findIndex(me=>me.id===U.id)===_e),We=Date.now()/1e3-7200,nt=Pe.filter(U=>U.timestamp>=We);return nt.length>5e3?nt.slice(-5e3):nt})})},[f]),D.useEffect(()=>()=>{bF(_),B.current&&(B.current.destroy(),B.current=null),L.current&&(clearInterval(L.current),L.current=null),W.current.clear()},[]),D.useEffect(()=>(L.current=window.setInterval(()=>{hOe(_,3e4)},3e4),()=>{L.current&&(clearInterval(L.current),L.current=null)}),[]);const q=async()=>{if(!y){v(!0),z({event_type:"info",data:{id:"connection",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"connecting",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"info");try{const Z=new URL(n);if(Z.protocol!=="ws:"&&Z.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol")}catch{z({event_type:"error",data:{id:"connection-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error"),v(!1);return}if(M.current)try{M.current.disconnect()}catch{}try{M.current=new yJ({url:n,authToken:r||void 0,walletAddress:void 0,deviceID:s||void 0}),M.current.onStateChange(Z=>{Z===Pt.Connected?(d(!0),$.current&&(console.warn("[ExplorerTestPage] Reconnected - history may be incomplete"),$.current=!1),z({event_type:"info",data:{id:"connection-success",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"connected",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"success")):(Z===Pt.Disconnected||Z===Pt.Reconnecting)&&(d(!1),b(!1),$.current=!0)}),await M.current.connect()}catch{z({event_type:"error",data:{id:"connection-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error"),d(!1)}finally{v(!1)}}},V=()=>{if(M.current)try{M.current.disconnect(),d(!1),b(!1),z({event_type:"info",data:{id:"disconnected",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"disconnected",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"info")}catch{z({event_type:"error",data:{id:"disconnect-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error")}},F=()=>{var se;if(!((se=M.current)!=null&&se.isConnected())){z({event_type:"error",data:{id:"subscription-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error");return}const Z=be=>{z(be,"success")};try{const be={};a&&(be.shard_id=a),c&&(be.event_type=c),M.current.subscribeConsensusFlat(Z,Object.keys(be).length>0?be:void 0),b(!0),z({event_type:"info",data:{id:"subscription-success",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"subscribed",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"success")}catch{z({event_type:"error",data:{id:"subscription-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error")}},G=()=>{var Z;if((Z=M.current)!=null&&Z.isConnected())try{M.current.unsubscribeConsensusFlat(),b(!1),z({event_type:"info",data:{id:"unsubscribed",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"unsubscribed",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"info")}catch{z({event_type:"error",data:{id:"unsubscribe-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error")}},H=()=>{p([]),E([]),bF(_),S(vF()),O(null),W.current.clear()};D.useEffect(()=>{if(w!=="timeline"){B.current&&(B.current.destroy(),B.current=null);return}if(!j.current||C.length===0)return;B.current&&(B.current.destroy(),B.current=null);const Z=setTimeout(()=>{if(!j.current)return;const se=wOe(C),be=Array.from(new Set(se.map(Ke=>Ke.group||"root"))).map(Ke=>({id:Ke,content:Ke})),Oe={height:"500px",zoomable:!0,moveable:!0,selectable:!0,onSelect:Ke=>{Ke.items&&Ke.items.length>0&&O(Ke.items[0])}};B.current=new f3(j.current,se,be,Oe)},0);return()=>{clearTimeout(Z),B.current&&(B.current.destroy(),B.current=null)}},[w,C]);const[A,Q]=D.useState(()=>typeof window<"u"?window.innerWidth-100:800);D.useEffect(()=>{if(w!=="graph")return;const Z=()=>{Q(window.innerWidth-100)};return window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[w]);const J=D.useMemo(()=>w!=="graph"?{nodes:[],links:[]}:_Oe(C,P||void 0,5),[w,C,P]),K=D.useMemo(()=>P?C.find(Z=>Z.id===P):null,[P,C]);return m.jsxs("div",{className:"explorer-test-page",children:[m.jsxs("div",{className:"explorer-test-header",children:[m.jsx("h2",{children:"Consensus Explorer Test"}),m.jsx("p",{children:"Test the consensus_flat WebSocket channel to view flattened consensus events from Morpheum's DAG-based consensus system."})]}),m.jsx(ZDe,{wsURL:n,setWsURL:e,authToken:r,setAuthToken:i,deviceID:s,setDeviceID:o,shardId:a,setShardId:l,eventType:c,setEventType:u}),m.jsxs("div",{className:"explorer-test-controls",children:[m.jsxs("div",{className:"control-buttons",children:[m.jsx(Yo,{onClick:q,disabled:y||h,variant:"primary",children:y?"Connecting...":"Connect"}),m.jsx(Yo,{onClick:V,disabled:!h,variant:"secondary",children:"Disconnect"}),m.jsx(Yo,{onClick:F,disabled:!h||g,variant:"primary",children:"Subscribe"}),m.jsx(Yo,{onClick:G,disabled:!h||!g,variant:"secondary",children:"Unsubscribe"}),m.jsx(Yo,{onClick:H,variant:"secondary",children:"Clear Events"})]}),m.jsxs("div",{className:"connection-status",children:[m.jsx("span",{className:`status-indicator ${h?"connected":"disconnected"}`,children:h?" Connected":" Disconnected"}),g&&m.jsx("span",{className:"status-indicator subscribed",children:" Subscribed to consensus_flat"}),m.jsxs("span",{className:"event-count",children:["Events: ",f.length]}),m.jsxs("span",{className:"event-count",children:["DAG Nodes: ",C.length]})]})]}),m.jsxs("div",{className:"view-controls",children:[m.jsx(Yo,{onClick:()=>k("list"),variant:w==="list"?"primary":"secondary",children:"List View"}),m.jsx(Yo,{onClick:()=>k("timeline"),variant:w==="timeline"?"primary":"secondary",children:"Timeline View"}),m.jsxs(Yo,{onClick:()=>k("graph"),variant:w==="graph"?"primary":"secondary",disabled:C.length>100&&!P,children:["Graph View ",C.length>100&&!P?"(Select node first)":""]})]}),w==="timeline"&&m.jsxs("div",{className:"dag-timeline-container",children:[m.jsx("div",{ref:j,style:{height:"500px",border:"1px solid var(--border)"}}),C.length===0&&m.jsx("div",{className:"empty-state",children:m.jsx("p",{children:"No DAG nodes to display. Connect and subscribe to start receiving events."})})]}),w==="graph"&&m.jsx("div",{className:"dag-graph-container",children:m.jsx(D.Suspense,{fallback:m.jsx("div",{className:"loading-state",children:"Loading graph..."}),children:J.nodes.length>0?m.jsx(_3,{graphData:J,nodeLabel:Z=>`${Z.label}
Type: ${Z.type}
Shard: ${Z.shardId}`,nodeColor:Z=>Z.type==="vertex"?"#3b82f6":Z.type==="tx"?"#10b981":"#f59e0b",linkDirectionalArrowLength:6,linkDirectionalArrowRelPos:1,linkColor:()=>"rgba(255, 255, 255, 0.3)",onNodeClick:Z=>O(Z.id),nodeCanvasObjectMode:()=>"after",nodeCanvasObject:(Z,se)=>{Z.id===P&&(se.beginPath(),se.arc(Z.x||0,Z.y||0,8,0,2*Math.PI),se.fillStyle="#f0f63b",se.fill(),se.strokeStyle="#f0f63b",se.lineWidth=2,se.stroke())},height:500,width:A}):m.jsx("div",{className:"empty-state",children:m.jsx("p",{children:C.length===0?"No DAG nodes to display. Connect and subscribe to start receiving events.":C.length>100?"Graph view requires node selection for large datasets. Click a node in timeline view first.":"No graph data available."})})})}),w==="list"&&m.jsx(oOe,{events:f}),P&&K&&m.jsxs("div",{className:"dag-details-pane",children:[m.jsxs("h3",{children:["Node Details: ",P]}),m.jsxs("div",{className:"detail-section",children:[m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Type:"}),m.jsx("span",{className:"detail-value",children:K.nodeType})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Timestamp:"}),m.jsx("span",{className:"detail-value",children:new Date(K.timestamp*1e3).toLocaleString()})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Shard ID:"}),m.jsx("span",{className:"detail-value",children:K.shardId})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Parents:"}),m.jsx("span",{className:"detail-value",children:K.parents.length})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"detail-label",children:"Children:"}),m.jsx("span",{className:"detail-value",children:K.children.length})]}),m.jsxs("details",{className:"raw-data-details",children:[m.jsx("summary",{children:"View Raw Data"}),m.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(K.data,null,2)})]})]}),m.jsx("div",{style:{marginTop:"10px"},children:m.jsx(Yo,{onClick:()=>O(null),variant:"secondary",children:"Close Details"})})]})]})}const K9e=D.createContext(void 0),Up="onboard_mnemonic",qp="onboard_wallet_address",X9e=({children:n})=>{const[e,r]=D.useState(null),[i,s]=D.useState(null);D.useEffect(()=>{const c=localStorage.getItem(qp),u=localStorage.getItem(Up),h=localStorage.getItem("generatedAddress"),d=localStorage.getItem("mnemonic");c&&u?(r(c),s(u)):h&&d&&(r(h),s(d),localStorage.setItem(qp,h),localStorage.setItem(Up,d),localStorage.removeItem("generatedAddress"),localStorage.removeItem("mnemonic"))},[]),D.useEffect(()=>{const c=u=>{u.key===qp?r(u.newValue):u.key===Up&&s(u.newValue)};return window.addEventListener("storage",c),()=>window.removeEventListener("storage",c)},[]);const o=D.useCallback((c,u)=>{r(c),s(u),localStorage.setItem(qp,c),localStorage.setItem(Up,u)},[]),a=D.useCallback(()=>{r(null),s(null),localStorage.removeItem(qp),localStorage.removeItem(Up)},[]),l=D.useMemo(()=>({generatedAddress:e,mnemonic:i,setGeneratedData:o,clearGeneratedData:a}),[e,i,o,a]);return m.jsx(K9e.Provider,{value:l,children:n})};function Q9e(){const{wasmStatus:n,isReady:e}=Mge(),[r,i]=D.useState("main");return D.useEffect(()=>{const s=()=>{i("websocket-test")};return window.addEventListener("navigateToWebSocketTest",s),()=>{window.removeEventListener("navigateToWebSocketTest",s)}},[]),m.jsxs(X9e,{children:[m.jsxs("div",{className:"App",children:[m.jsxs("header",{className:"App-header",children:[m.jsx("h3",{children:"SDK, Testing, QA"}),m.jsxs("nav",{children:[m.jsx("button",{onClick:()=>i("main"),className:`nav-button ${r==="main"?"active":""}`,children:"Morm Signer"}),m.jsx("button",{onClick:()=>i("sdk-test"),className:`nav-button ${r==="sdk-test"?"active":""}`,children:"SDK Trade API"}),m.jsx("button",{onClick:()=>i("websocket-test"),className:`nav-button ${r==="websocket-test"?"active":""}`,children:"WebSocket Test"}),m.jsx("button",{onClick:()=>i("hooks-test"),className:`nav-button ${r==="hooks-test"?"active":""}`,children:"Hooks Test"}),m.jsx("button",{onClick:()=>i("layout-test"),className:`nav-button ${r==="layout-test"?"active":""}`,children:"Layout Test"}),m.jsx("button",{onClick:()=>i("trading-test"),className:`nav-button ${r==="trading-test"?"active":""}`,children:"Trading Test"}),m.jsx("button",{onClick:()=>i("swap-test"),className:`nav-button ${r==="swap-test"?"active":""}`,children:"Swap Test"}),m.jsx("button",{onClick:()=>i("explorer-test"),className:`nav-button ${r==="explorer-test"?"active":""}`,children:"Explorer Test"})]})]}),m.jsx("main",{className:"App-main",children:r==="sdk-test"?m.jsx(cve,{}):r==="websocket-test"?m.jsx(Cye,{}):r==="layout-test"?m.jsx(_1e,{}):r==="hooks-test"?m.jsx(p2e,{}):r==="trading-test"?m.jsx(QDe,{}):r==="swap-test"?m.jsx(JDe,{}):r==="explorer-test"?m.jsx(G9e,{}):m.jsxs(m.Fragment,{children:[m.jsx("h1",{children:"Morm SDK"}),m.jsx("p",{children:"Test WebAssembly integration for morm_signer with Agent Delegation"}),m.jsx(nve,{status:n}),e&&m.jsxs("div",{className:"App-content",children:[m.jsx("div",{className:"App-section",children:m.jsx(J0e,{})}),m.jsx("div",{className:"App-section",children:m.jsx(Z0e,{})}),m.jsx("div",{className:"App-section",children:m.jsx(eve,{})}),m.jsx("div",{className:"App-section",children:m.jsx(tve,{})})]}),n.error&&m.jsxs("div",{className:"App-error",children:[m.jsx("h3",{children:"Error Loading WASM"}),m.jsx("p",{children:n.error}),m.jsx("p",{children:"Make sure the morm_signer.wasm file is available in the public directory."})]})]})})]}),m.jsx(c1e,{position:"bottom-right",toastOptions:{duration:4e3,style:{color:"var(--foreground)",border:"1px solid var(--border)"}}})]})}const FY=NX({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),$Y=NX({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://11155111.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0}),J9e=The({chains:[FY,$Y],connectors:[Sw()],transports:{[FY.id]:$4(),[$Y.id]:$4()}}),Z9e=new Iue,e7e=LM.createRoot(document.getElementById("root"));e7e.render(m.jsx(Ne.StrictMode,{children:m.jsx(Dhe,{config:J9e,children:m.jsx(Aue,{client:Z9e,children:m.jsx(Q9e,{})})})}));
//# sourceMappingURL=index-2FJEZdEX.js.map
