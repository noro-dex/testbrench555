var sP=Object.defineProperty;var Ny=t=>{throw TypeError(t)};var rP=(t,e,n)=>e in t?sP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ie=(t,e,n)=>rP(t,typeof e!="symbol"?e+"":e,n),F0=(t,e,n)=>e.has(t)||Ny("Cannot "+n);var _e=(t,e,n)=>(F0(t,e,"read from private field"),n?n.call(t):e.get(t)),Be=(t,e,n)=>e.has(t)?Ny("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),xe=(t,e,n,s)=>(F0(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),rn=(t,e,n)=>(F0(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function bk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function iP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var yk={exports:{}},Rf={},vk={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bu=Symbol.for("react.element"),oP=Symbol.for("react.portal"),aP=Symbol.for("react.fragment"),lP=Symbol.for("react.strict_mode"),cP=Symbol.for("react.profiler"),uP=Symbol.for("react.provider"),dP=Symbol.for("react.context"),hP=Symbol.for("react.forward_ref"),fP=Symbol.for("react.suspense"),pP=Symbol.for("react.memo"),gP=Symbol.for("react.lazy"),Oy=Symbol.iterator;function mP(t){return t===null||typeof t!="object"?null:(t=Oy&&t[Oy]||t["@@iterator"],typeof t=="function"?t:null)}var wk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sk=Object.assign,kk={};function cl(t,e,n){this.props=t,this.context=e,this.refs=kk,this.updater=n||wk}cl.prototype.isReactComponent={};cl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _k(){}_k.prototype=cl.prototype;function px(t,e,n){this.props=t,this.context=e,this.refs=kk,this.updater=n||wk}var gx=px.prototype=new _k;gx.constructor=px;Sk(gx,cl.prototype);gx.isPureReactComponent=!0;var Dy=Array.isArray,Ck=Object.prototype.hasOwnProperty,mx={current:null},Ek={key:!0,ref:!0,__self:!0,__source:!0};function Pk(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ck.call(e,s)&&!Ek.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:bu,type:t,key:i,ref:o,props:r,_owner:mx.current}}function xP(t,e){return{$$typeof:bu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xx(t){return typeof t=="object"&&t!==null&&t.$$typeof===bu}function bP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ly=/\/+/g;function z0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bP(""+t.key):e.toString(36)}function Gd(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bu:case oP:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+z0(o,0):s,Dy(r)?(n="",t!=null&&(n=t.replace(Ly,"$&/")+"/"),Gd(r,e,n,"",function(c){return c})):r!=null&&(xx(r)&&(r=xP(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Ly,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",Dy(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+z0(i,a);o+=Gd(i,e,n,l,r)}else if(l=mP(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+z0(i,a++),o+=Gd(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yu(t,e,n){if(t==null)return t;var s=[],r=0;return Gd(t,s,"","",function(i){return e.call(n,i,r++)}),s}function yP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kn={current:null},Kd={transition:null},vP={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:Kd,ReactCurrentOwner:mx};function Tk(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Yu,forEach:function(t,e,n){Yu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yu(t,function(){e++}),e},toArray:function(t){return Yu(t,function(e){return e})||[]},only:function(t){if(!xx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=cl;$e.Fragment=aP;$e.Profiler=cP;$e.PureComponent=px;$e.StrictMode=lP;$e.Suspense=fP;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vP;$e.act=Tk;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Sk({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=mx.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Ck.call(e,l)&&!Ek.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:bu,type:t.type,key:r,ref:i,props:s,_owner:o}};$e.createContext=function(t){return t={$$typeof:dP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uP,_context:t},t.Consumer=t};$e.createElement=Pk;$e.createFactory=function(t){var e=Pk.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:hP,render:t}};$e.isValidElement=xx;$e.lazy=function(t){return{$$typeof:gP,_payload:{_status:-1,_result:t},_init:yP}};$e.memo=function(t,e){return{$$typeof:pP,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=Kd.transition;Kd.transition={};try{t()}finally{Kd.transition=e}};$e.unstable_act=Tk;$e.useCallback=function(t,e){return kn.current.useCallback(t,e)};$e.useContext=function(t){return kn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return kn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return kn.current.useEffect(t,e)};$e.useId=function(){return kn.current.useId()};$e.useImperativeHandle=function(t,e,n){return kn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return kn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return kn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return kn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return kn.current.useReducer(t,e,n)};$e.useRef=function(t){return kn.current.useRef(t)};$e.useState=function(t){return kn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return kn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return kn.current.useTransition()};$e.version="18.3.1";vk.exports=$e;var k=vk.exports;const ae=bk(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wP=k,SP=Symbol.for("react.element"),kP=Symbol.for("react.fragment"),_P=Object.prototype.hasOwnProperty,CP=wP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EP={key:!0,ref:!0,__self:!0,__source:!0};function Mk(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)_P.call(e,s)&&!EP.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:SP,type:t,key:i,ref:o,props:r,_owner:CP.current}}Rf.Fragment=kP;Rf.jsx=Mk;Rf.jsxs=Mk;yk.exports=Rf;var f=yk.exports,kg={},Ik={exports:{}},qn={},Rk={exports:{}},Ak={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,B){var M=L.length;L.push(B);e:for(;0<M;){var G=M-1>>>1,j=L[G];if(0<r(j,B))L[G]=B,L[M]=j,M=G;else break e}}function n(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var B=L[0],M=L.pop();if(M!==B){L[0]=M;e:for(var G=0,j=L.length,I=j>>>1;G<I;){var U=2*(G+1)-1,q=L[U],X=U+1,K=L[X];if(0>r(q,M))X<j&&0>r(K,q)?(L[G]=K,L[X]=M,G=X):(L[G]=q,L[U]=M,G=U);else if(X<j&&0>r(K,M))L[G]=K,L[X]=M,G=X;else break e}}return B}function r(L,B){var M=L.sortIndex-B.sortIndex;return M!==0?M:L.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,m=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var B=n(c);B!==null;){if(B.callback===null)s(c);else if(B.startTime<=L)s(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function v(L){if(x=!1,b(L),!m)if(n(l)!==null)m=!0,N(S);else{var B=n(c);B!==null&&z(v,B.startTime-L)}}function S(L,B){m=!1,x&&(x=!1,g(T),T=-1),p=!0;var M=h;try{for(b(B),d=n(l);d!==null&&(!(d.expirationTime>B)||L&&!R());){var G=d.callback;if(typeof G=="function"){d.callback=null,h=d.priorityLevel;var j=G(d.expirationTime<=B);B=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&s(l),b(B)}else s(l);d=n(l)}if(d!==null)var I=!0;else{var U=n(c);U!==null&&z(v,U.startTime-B),I=!1}return I}finally{d=null,h=M,p=!1}}var _=!1,E=null,T=-1,P=5,C=-1;function R(){return!(t.unstable_now()-C<P)}function A(){if(E!==null){var L=t.unstable_now();C=L;var B=!0;try{B=E(!0,L)}finally{B?$():(_=!1,E=null)}}else _=!1}var $;if(typeof y=="function")$=function(){y(A)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,F=H.port2;H.port1.onmessage=A,$=function(){F.postMessage(null)}}else $=function(){w(A,0)};function N(L){E=L,_||(_=!0,$())}function z(L,B){T=w(function(){L(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,N(S))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var M=h;h=B;try{return L()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var M=h;h=L;try{return B()}finally{h=M}},t.unstable_scheduleCallback=function(L,B,M){var G=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?G+M:G):M=G,L){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=M+j,L={id:u++,callback:B,priorityLevel:L,startTime:M,expirationTime:j,sortIndex:-1},M>G?(L.sortIndex=M,e(c,L),n(l)===null&&L===n(c)&&(x?(g(T),T=-1):x=!0,z(v,M-G))):(L.sortIndex=j,e(l,L),m||p||(m=!0,N(S))),L},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(L){var B=h;return function(){var M=h;h=B;try{return L.apply(this,arguments)}finally{h=M}}}})(Ak);Rk.exports=Ak;var PP=Rk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TP=k,Gn=PP;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nk=new Set,Dc={};function yo(t,e){ja(t,e),ja(t+"Capture",e)}function ja(t,e){for(Dc[t]=e,t=0;t<e.length;t++)Nk.add(e[t])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_g=Object.prototype.hasOwnProperty,MP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jy={},Fy={};function IP(t){return _g.call(Fy,t)?!0:_g.call(jy,t)?!1:MP.test(t)?Fy[t]=!0:(jy[t]=!0,!1)}function RP(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AP(t,e,n,s){if(e===null||typeof e>"u"||RP(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var bx=/[\-:]([a-z])/g;function yx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bx,yx);nn[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bx,yx);nn[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bx,yx);nn[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function vx(t,e,n,s){var r=nn.hasOwnProperty(e)?nn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AP(e,n,r,s)&&(n=null),s||r===null?IP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Mr=TP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gu=Symbol.for("react.element"),zo=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),wx=Symbol.for("react.strict_mode"),Cg=Symbol.for("react.profiler"),Ok=Symbol.for("react.provider"),Dk=Symbol.for("react.context"),Sx=Symbol.for("react.forward_ref"),Eg=Symbol.for("react.suspense"),Pg=Symbol.for("react.suspense_list"),kx=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),Lk=Symbol.for("react.offscreen"),zy=Symbol.iterator;function kl(t){return t===null||typeof t!="object"?null:(t=zy&&t[zy]||t["@@iterator"],typeof t=="function"?t:null)}var wt=Object.assign,B0;function Zl(t){if(B0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);B0=e&&e[1]||""}return`
`+B0+t}var $0=!1;function U0(t,e){if(!t||$0)return"";$0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{$0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zl(t):""}function NP(t){switch(t.tag){case 5:return Zl(t.type);case 16:return Zl("Lazy");case 13:return Zl("Suspense");case 19:return Zl("SuspenseList");case 0:case 2:case 15:return t=U0(t.type,!1),t;case 11:return t=U0(t.type.render,!1),t;case 1:return t=U0(t.type,!0),t;default:return""}}function Tg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bo:return"Fragment";case zo:return"Portal";case Cg:return"Profiler";case wx:return"StrictMode";case Eg:return"Suspense";case Pg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dk:return(t.displayName||"Context")+".Consumer";case Ok:return(t._context.displayName||"Context")+".Provider";case Sx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kx:return e=t.displayName||null,e!==null?e:Tg(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return Tg(t(e))}catch{}}return null}function OP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tg(e);case 8:return e===wx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DP(t){var e=jk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ku(t){t._valueTracker||(t._valueTracker=DP(t))}function Fk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=jk(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function kh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mg(t,e){var n=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function By(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=gi(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zk(t,e){e=e.checked,e!=null&&vx(t,"checked",e,!1)}function Ig(t,e){zk(t,e);var n=gi(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rg(t,e.type,gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $y(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rg(t,e,n){(e!=="number"||kh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ec=Array.isArray;function sa(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+gi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Ag(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(ec(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gi(n)}}function Bk(t,e){var n=gi(e.value),s=gi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Wy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $k(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ng(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$k(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qu,Uk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qu=qu||document.createElement("div"),qu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LP=["Webkit","ms","Moz","O"];Object.keys(mc).forEach(function(t){LP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mc[e]=mc[t]})});function Wk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mc.hasOwnProperty(t)&&mc[t]?(""+e).trim():e+"px"}function Hk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=Wk(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var jP=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Og(t,e){if(e){if(jP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function Dg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lg=null;function _x(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jg=null,ra=null,ia=null;function Hy(t){if(t=wu(t)){if(typeof jg!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=Lf(e),jg(t.stateNode,t.type,e))}}function Vk(t){ra?ia?ia.push(t):ia=[t]:ra=t}function Yk(){if(ra){var t=ra,e=ia;if(ia=ra=null,Hy(t),e)for(t=0;t<e.length;t++)Hy(e[t])}}function Gk(t,e){return t(e)}function Kk(){}var W0=!1;function qk(t,e,n){if(W0)return t(e,n);W0=!0;try{return Gk(t,e,n)}finally{W0=!1,(ra!==null||ia!==null)&&(Kk(),Yk())}}function jc(t,e){var n=t.stateNode;if(n===null)return null;var s=Lf(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var Fg=!1;if(kr)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){Fg=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{Fg=!1}function FP(t,e,n,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var xc=!1,_h=null,Ch=!1,zg=null,zP={onError:function(t){xc=!0,_h=t}};function BP(t,e,n,s,r,i,o,a,l){xc=!1,_h=null,FP.apply(zP,arguments)}function $P(t,e,n,s,r,i,o,a,l){if(BP.apply(this,arguments),xc){if(xc){var c=_h;xc=!1,_h=null}else throw Error(ce(198));Ch||(Ch=!0,zg=c)}}function vo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vy(t){if(vo(t)!==t)throw Error(ce(188))}function UP(t){var e=t.alternate;if(!e){if(e=vo(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Vy(r),t;if(i===s)return Vy(r),e;i=i.sibling}throw Error(ce(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==s)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function Qk(t){return t=UP(t),t!==null?Jk(t):null}function Jk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Jk(t);if(e!==null)return e;t=t.sibling}return null}var Zk=Gn.unstable_scheduleCallback,Yy=Gn.unstable_cancelCallback,WP=Gn.unstable_shouldYield,HP=Gn.unstable_requestPaint,Pt=Gn.unstable_now,VP=Gn.unstable_getCurrentPriorityLevel,Cx=Gn.unstable_ImmediatePriority,e_=Gn.unstable_UserBlockingPriority,Eh=Gn.unstable_NormalPriority,YP=Gn.unstable_LowPriority,t_=Gn.unstable_IdlePriority,Af=null,Xs=null;function GP(t){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(Af,t,void 0,(t.current.flags&128)===128)}catch{}}var Ms=Math.clz32?Math.clz32:XP,KP=Math.log,qP=Math.LN2;function XP(t){return t>>>=0,t===0?32:31-(KP(t)/qP|0)|0}var Xu=64,Qu=4194304;function tc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ph(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=tc(a):(i&=o,i!==0&&(s=tc(i)))}else o=n&~r,o!==0?s=tc(o):i!==0&&(s=tc(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Ms(e),r=1<<n,s|=t[n],e&=~r;return s}function QP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JP(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ms(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=QP(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Bg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n_(){var t=Xu;return Xu<<=1,!(Xu&4194240)&&(Xu=64),t}function H0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ms(e),t[e]=n}function ZP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ms(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Ex(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Ms(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var tt=0;function s_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var r_,Px,i_,o_,a_,$g=!1,Ju=[],ri=null,ii=null,oi=null,Fc=new Map,zc=new Map,Vr=[],eT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gy(t,e){switch(t){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ii=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":Fc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zc.delete(e.pointerId)}}function Cl(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=wu(e),e!==null&&Px(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function tT(t,e,n,s,r){switch(e){case"focusin":return ri=Cl(ri,t,e,n,s,r),!0;case"dragenter":return ii=Cl(ii,t,e,n,s,r),!0;case"mouseover":return oi=Cl(oi,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Fc.set(i,Cl(Fc.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,zc.set(i,Cl(zc.get(i)||null,t,e,n,s,r)),!0}return!1}function l_(t){var e=zi(t.target);if(e!==null){var n=vo(e);if(n!==null){if(e=n.tag,e===13){if(e=Xk(n),e!==null){t.blockedOn=e,a_(t.priority,function(){i_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ug(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Lg=s,n.target.dispatchEvent(s),Lg=null}else return e=wu(n),e!==null&&Px(e),t.blockedOn=n,!1;e.shift()}return!0}function Ky(t,e,n){qd(t)&&n.delete(e)}function nT(){$g=!1,ri!==null&&qd(ri)&&(ri=null),ii!==null&&qd(ii)&&(ii=null),oi!==null&&qd(oi)&&(oi=null),Fc.forEach(Ky),zc.forEach(Ky)}function El(t,e){t.blockedOn===e&&(t.blockedOn=null,$g||($g=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,nT)))}function Bc(t){function e(r){return El(r,t)}if(0<Ju.length){El(Ju[0],t);for(var n=1;n<Ju.length;n++){var s=Ju[n];s.blockedOn===t&&(s.blockedOn=null)}}for(ri!==null&&El(ri,t),ii!==null&&El(ii,t),oi!==null&&El(oi,t),Fc.forEach(e),zc.forEach(e),n=0;n<Vr.length;n++)s=Vr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Vr.length&&(n=Vr[0],n.blockedOn===null);)l_(n),n.blockedOn===null&&Vr.shift()}var oa=Mr.ReactCurrentBatchConfig,Th=!0;function sT(t,e,n,s){var r=tt,i=oa.transition;oa.transition=null;try{tt=1,Tx(t,e,n,s)}finally{tt=r,oa.transition=i}}function rT(t,e,n,s){var r=tt,i=oa.transition;oa.transition=null;try{tt=4,Tx(t,e,n,s)}finally{tt=r,oa.transition=i}}function Tx(t,e,n,s){if(Th){var r=Ug(t,e,n,s);if(r===null)ep(t,e,s,Mh,n),Gy(t,s);else if(tT(r,t,e,n,s))s.stopPropagation();else if(Gy(t,s),e&4&&-1<eT.indexOf(t)){for(;r!==null;){var i=wu(r);if(i!==null&&r_(i),i=Ug(t,e,n,s),i===null&&ep(t,e,s,Mh,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else ep(t,e,s,null,n)}}var Mh=null;function Ug(t,e,n,s){if(Mh=null,t=_x(s),t=zi(t),t!==null)if(e=vo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mh=t,null}function c_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VP()){case Cx:return 1;case e_:return 4;case Eh:case YP:return 16;case t_:return 536870912;default:return 16}default:return 16}}var Jr=null,Mx=null,Xd=null;function u_(){if(Xd)return Xd;var t,e=Mx,n=e.length,s,r="value"in Jr?Jr.value:Jr.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return Xd=r.slice(t,1<s?1-s:void 0)}function Qd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zu(){return!0}function qy(){return!1}function Xn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zu:qy,this.isPropagationStopped=qy,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zu)},persist:function(){},isPersistent:Zu}),e}var ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ix=Xn(ul),vu=wt({},ul,{view:0,detail:0}),iT=Xn(vu),V0,Y0,Pl,Nf=wt({},vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pl&&(Pl&&t.type==="mousemove"?(V0=t.screenX-Pl.screenX,Y0=t.screenY-Pl.screenY):Y0=V0=0,Pl=t),V0)},movementY:function(t){return"movementY"in t?t.movementY:Y0}}),Xy=Xn(Nf),oT=wt({},Nf,{dataTransfer:0}),aT=Xn(oT),lT=wt({},vu,{relatedTarget:0}),G0=Xn(lT),cT=wt({},ul,{animationName:0,elapsedTime:0,pseudoElement:0}),uT=Xn(cT),dT=wt({},ul,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hT=Xn(dT),fT=wt({},ul,{data:0}),Qy=Xn(fT),pT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mT[t])?!!e[t]:!1}function Rx(){return xT}var bT=wt({},vu,{key:function(t){if(t.key){var e=pT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rx,charCode:function(t){return t.type==="keypress"?Qd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yT=Xn(bT),vT=wt({},Nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=Xn(vT),wT=wt({},vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rx}),ST=Xn(wT),kT=wt({},ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),_T=Xn(kT),CT=wt({},Nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ET=Xn(CT),PT=[9,13,27,32],Ax=kr&&"CompositionEvent"in window,bc=null;kr&&"documentMode"in document&&(bc=document.documentMode);var TT=kr&&"TextEvent"in window&&!bc,d_=kr&&(!Ax||bc&&8<bc&&11>=bc),Zy=" ",ev=!1;function h_(t,e){switch(t){case"keyup":return PT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $o=!1;function MT(t,e){switch(t){case"compositionend":return f_(e);case"keypress":return e.which!==32?null:(ev=!0,Zy);case"textInput":return t=e.data,t===Zy&&ev?null:t;default:return null}}function IT(t,e){if($o)return t==="compositionend"||!Ax&&h_(t,e)?(t=u_(),Xd=Mx=Jr=null,$o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d_&&e.locale!=="ko"?null:e.data;default:return null}}var RT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!RT[t.type]:e==="textarea"}function p_(t,e,n,s){Vk(s),e=Ih(e,"onChange"),0<e.length&&(n=new Ix("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var yc=null,$c=null;function AT(t){C_(t,0)}function Of(t){var e=Ho(t);if(Fk(e))return t}function NT(t,e){if(t==="change")return e}var g_=!1;if(kr){var K0;if(kr){var q0="oninput"in document;if(!q0){var nv=document.createElement("div");nv.setAttribute("oninput","return;"),q0=typeof nv.oninput=="function"}K0=q0}else K0=!1;g_=K0&&(!document.documentMode||9<document.documentMode)}function sv(){yc&&(yc.detachEvent("onpropertychange",m_),$c=yc=null)}function m_(t){if(t.propertyName==="value"&&Of($c)){var e=[];p_(e,$c,t,_x(t)),qk(AT,e)}}function OT(t,e,n){t==="focusin"?(sv(),yc=e,$c=n,yc.attachEvent("onpropertychange",m_)):t==="focusout"&&sv()}function DT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Of($c)}function LT(t,e){if(t==="click")return Of(e)}function jT(t,e){if(t==="input"||t==="change")return Of(e)}function FT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rs=typeof Object.is=="function"?Object.is:FT;function Uc(t,e){if(Rs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!_g.call(e,r)||!Rs(t[r],e[r]))return!1}return!0}function rv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iv(t,e){var n=rv(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rv(n)}}function x_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?x_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function b_(){for(var t=window,e=kh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kh(t.document)}return e}function Nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zT(t){var e=b_(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&x_(n.ownerDocument.documentElement,n)){if(s!==null&&Nx(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=iv(n,i);var o=iv(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BT=kr&&"documentMode"in document&&11>=document.documentMode,Uo=null,Wg=null,vc=null,Hg=!1;function ov(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hg||Uo==null||Uo!==kh(s)||(s=Uo,"selectionStart"in s&&Nx(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),vc&&Uc(vc,s)||(vc=s,s=Ih(Wg,"onSelect"),0<s.length&&(e=new Ix("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Uo)))}function ed(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wo={animationend:ed("Animation","AnimationEnd"),animationiteration:ed("Animation","AnimationIteration"),animationstart:ed("Animation","AnimationStart"),transitionend:ed("Transition","TransitionEnd")},X0={},y_={};kr&&(y_=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function Df(t){if(X0[t])return X0[t];if(!Wo[t])return t;var e=Wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in y_)return X0[t]=e[n];return t}var v_=Df("animationend"),w_=Df("animationiteration"),S_=Df("animationstart"),k_=Df("transitionend"),__=new Map,av="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vi(t,e){__.set(t,e),yo(e,[t])}for(var Q0=0;Q0<av.length;Q0++){var J0=av[Q0],$T=J0.toLowerCase(),UT=J0[0].toUpperCase()+J0.slice(1);vi($T,"on"+UT)}vi(v_,"onAnimationEnd");vi(w_,"onAnimationIteration");vi(S_,"onAnimationStart");vi("dblclick","onDoubleClick");vi("focusin","onFocus");vi("focusout","onBlur");vi(k_,"onTransitionEnd");ja("onMouseEnter",["mouseout","mouseover"]);ja("onMouseLeave",["mouseout","mouseover"]);ja("onPointerEnter",["pointerout","pointerover"]);ja("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WT=new Set("cancel close invalid load scroll toggle".split(" ").concat(nc));function lv(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,$P(s,e,void 0,t),t.currentTarget=null}function C_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;lv(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;lv(r,a,c),i=l}}}if(Ch)throw t=zg,Ch=!1,zg=null,t}function pt(t,e){var n=e[qg];n===void 0&&(n=e[qg]=new Set);var s=t+"__bubble";n.has(s)||(E_(e,t,2,!1),n.add(s))}function Z0(t,e,n){var s=0;e&&(s|=4),E_(n,t,s,e)}var td="_reactListening"+Math.random().toString(36).slice(2);function Wc(t){if(!t[td]){t[td]=!0,Nk.forEach(function(n){n!=="selectionchange"&&(WT.has(n)||Z0(n,!1,t),Z0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[td]||(e[td]=!0,Z0("selectionchange",!1,e))}}function E_(t,e,n,s){switch(c_(e)){case 1:var r=sT;break;case 4:r=rT;break;default:r=Tx}n=r.bind(null,e,n,t),r=void 0,!Fg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ep(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=zi(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}qk(function(){var c=i,u=_x(n),d=[];e:{var h=__.get(t);if(h!==void 0){var p=Ix,m=t;switch(t){case"keypress":if(Qd(n)===0)break e;case"keydown":case"keyup":p=yT;break;case"focusin":m="focus",p=G0;break;case"focusout":m="blur",p=G0;break;case"beforeblur":case"afterblur":p=G0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Xy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=aT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=ST;break;case v_:case w_:case S_:p=uT;break;case k_:p=_T;break;case"scroll":p=iT;break;case"wheel":p=ET;break;case"copy":case"cut":case"paste":p=hT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Jy}var x=(e&4)!==0,w=!x&&t==="scroll",g=x?h!==null?h+"Capture":null:h;x=[];for(var y=c,b;y!==null;){b=y;var v=b.stateNode;if(b.tag===5&&v!==null&&(b=v,g!==null&&(v=jc(y,g),v!=null&&x.push(Hc(y,v,b)))),w)break;y=y.return}0<x.length&&(h=new p(h,m,null,n,u),d.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==Lg&&(m=n.relatedTarget||n.fromElement)&&(zi(m)||m[_r]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?zi(m):null,m!==null&&(w=vo(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(x=Xy,v="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=Jy,v="onPointerLeave",g="onPointerEnter",y="pointer"),w=p==null?h:Ho(p),b=m==null?h:Ho(m),h=new x(v,y+"leave",p,n,u),h.target=w,h.relatedTarget=b,v=null,zi(u)===c&&(x=new x(g,y+"enter",m,n,u),x.target=b,x.relatedTarget=w,v=x),w=v,p&&m)t:{for(x=p,g=m,y=0,b=x;b;b=Io(b))y++;for(b=0,v=g;v;v=Io(v))b++;for(;0<y-b;)x=Io(x),y--;for(;0<b-y;)g=Io(g),b--;for(;y--;){if(x===g||g!==null&&x===g.alternate)break t;x=Io(x),g=Io(g)}x=null}else x=null;p!==null&&cv(d,h,p,x,!1),m!==null&&w!==null&&cv(d,w,m,x,!0)}}e:{if(h=c?Ho(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=NT;else if(tv(h))if(g_)S=jT;else{S=DT;var _=OT}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=LT);if(S&&(S=S(t,c))){p_(d,S,n,u);break e}_&&_(t,h,c),t==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&Rg(h,"number",h.value)}switch(_=c?Ho(c):window,t){case"focusin":(tv(_)||_.contentEditable==="true")&&(Uo=_,Wg=c,vc=null);break;case"focusout":vc=Wg=Uo=null;break;case"mousedown":Hg=!0;break;case"contextmenu":case"mouseup":case"dragend":Hg=!1,ov(d,n,u);break;case"selectionchange":if(BT)break;case"keydown":case"keyup":ov(d,n,u)}var E;if(Ax)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else $o?h_(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(d_&&n.locale!=="ko"&&($o||T!=="onCompositionStart"?T==="onCompositionEnd"&&$o&&(E=u_()):(Jr=u,Mx="value"in Jr?Jr.value:Jr.textContent,$o=!0)),_=Ih(c,T),0<_.length&&(T=new Qy(T,t,null,n,u),d.push({event:T,listeners:_}),E?T.data=E:(E=f_(n),E!==null&&(T.data=E)))),(E=TT?MT(t,n):IT(t,n))&&(c=Ih(c,"onBeforeInput"),0<c.length&&(u=new Qy("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}C_(d,e)})}function Hc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ih(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=jc(t,n),i!=null&&s.unshift(Hc(t,i,r)),i=jc(t,e),i!=null&&s.push(Hc(t,i,r))),t=t.return}return s}function Io(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cv(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=jc(n,i),l!=null&&o.unshift(Hc(n,l,a))):r||(l=jc(n,i),l!=null&&o.push(Hc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var HT=/\r\n?/g,VT=/\u0000|\uFFFD/g;function uv(t){return(typeof t=="string"?t:""+t).replace(HT,`
`).replace(VT,"")}function nd(t,e,n){if(e=uv(e),uv(t)!==e&&n)throw Error(ce(425))}function Rh(){}var Vg=null,Yg=null;function Gg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kg=typeof setTimeout=="function"?setTimeout:void 0,YT=typeof clearTimeout=="function"?clearTimeout:void 0,dv=typeof Promise=="function"?Promise:void 0,GT=typeof queueMicrotask=="function"?queueMicrotask:typeof dv<"u"?function(t){return dv.resolve(null).then(t).catch(KT)}:Kg;function KT(t){setTimeout(function(){throw t})}function tp(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Bc(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Bc(e)}function ai(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var dl=Math.random().toString(36).slice(2),Ks="__reactFiber$"+dl,Vc="__reactProps$"+dl,_r="__reactContainer$"+dl,qg="__reactEvents$"+dl,qT="__reactListeners$"+dl,XT="__reactHandles$"+dl;function zi(t){var e=t[Ks];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_r]||n[Ks]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hv(t);t!==null;){if(n=t[Ks])return n;t=hv(t)}return e}t=n,n=t.parentNode}return null}function wu(t){return t=t[Ks]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ho(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function Lf(t){return t[Vc]||null}var Xg=[],Vo=-1;function wi(t){return{current:t}}function gt(t){0>Vo||(t.current=Xg[Vo],Xg[Vo]=null,Vo--)}function dt(t,e){Vo++,Xg[Vo]=t.current,t.current=e}var mi={},hn=wi(mi),An=wi(!1),ro=mi;function Fa(t,e){var n=t.type.contextTypes;if(!n)return mi;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Nn(t){return t=t.childContextTypes,t!=null}function Ah(){gt(An),gt(hn)}function fv(t,e,n){if(hn.current!==mi)throw Error(ce(168));dt(hn,e),dt(An,n)}function P_(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(ce(108,OP(t)||"Unknown",r));return wt({},n,s)}function Nh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mi,ro=hn.current,dt(hn,t),dt(An,An.current),!0}function pv(t,e,n){var s=t.stateNode;if(!s)throw Error(ce(169));n?(t=P_(t,e,ro),s.__reactInternalMemoizedMergedChildContext=t,gt(An),gt(hn),dt(hn,t)):gt(An),dt(An,n)}var ur=null,jf=!1,np=!1;function T_(t){ur===null?ur=[t]:ur.push(t)}function QT(t){jf=!0,T_(t)}function Si(){if(!np&&ur!==null){np=!0;var t=0,e=tt;try{var n=ur;for(tt=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}ur=null,jf=!1}catch(r){throw ur!==null&&(ur=ur.slice(t+1)),Zk(Cx,Si),r}finally{tt=e,np=!1}}return null}var Yo=[],Go=0,Oh=null,Dh=0,as=[],ls=0,io=null,mr=1,xr="";function Ii(t,e){Yo[Go++]=Dh,Yo[Go++]=Oh,Oh=t,Dh=e}function M_(t,e,n){as[ls++]=mr,as[ls++]=xr,as[ls++]=io,io=t;var s=mr;t=xr;var r=32-Ms(s)-1;s&=~(1<<r),n+=1;var i=32-Ms(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,mr=1<<32-Ms(e)+r|n<<r|s,xr=i+t}else mr=1<<i|n<<r|s,xr=t}function Ox(t){t.return!==null&&(Ii(t,1),M_(t,1,0))}function Dx(t){for(;t===Oh;)Oh=Yo[--Go],Yo[Go]=null,Dh=Yo[--Go],Yo[Go]=null;for(;t===io;)io=as[--ls],as[ls]=null,xr=as[--ls],as[ls]=null,mr=as[--ls],as[ls]=null}var Un=null,$n=null,mt=!1,Cs=null;function I_(t,e){var n=cs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Un=t,$n=ai(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Un=t,$n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=io!==null?{id:mr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Un=t,$n=null,!0):!1;default:return!1}}function Qg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jg(t){if(mt){var e=$n;if(e){var n=e;if(!gv(t,e)){if(Qg(t))throw Error(ce(418));e=ai(n.nextSibling);var s=Un;e&&gv(t,e)?I_(s,n):(t.flags=t.flags&-4097|2,mt=!1,Un=t)}}else{if(Qg(t))throw Error(ce(418));t.flags=t.flags&-4097|2,mt=!1,Un=t}}}function mv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Un=t}function sd(t){if(t!==Un)return!1;if(!mt)return mv(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gg(t.type,t.memoizedProps)),e&&(e=$n)){if(Qg(t))throw R_(),Error(ce(418));for(;e;)I_(t,e),e=ai(e.nextSibling)}if(mv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$n=ai(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$n=null}}else $n=Un?ai(t.stateNode.nextSibling):null;return!0}function R_(){for(var t=$n;t;)t=ai(t.nextSibling)}function za(){$n=Un=null,mt=!1}function Lx(t){Cs===null?Cs=[t]:Cs.push(t)}var JT=Mr.ReactCurrentBatchConfig;function Tl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var s=n.stateNode}if(!s)throw Error(ce(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function rd(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xv(t){var e=t._init;return e(t._payload)}function A_(t){function e(g,y){if(t){var b=g.deletions;b===null?(g.deletions=[y],g.flags|=16):b.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function s(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=di(g,y),g.index=0,g.sibling=null,g}function i(g,y,b){return g.index=b,t?(b=g.alternate,b!==null?(b=b.index,b<y?(g.flags|=2,y):b):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,b,v){return y===null||y.tag!==6?(y=cp(b,g.mode,v),y.return=g,y):(y=r(y,b),y.return=g,y)}function l(g,y,b,v){var S=b.type;return S===Bo?u(g,y,b.props.children,v,b.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wr&&xv(S)===y.type)?(v=r(y,b.props),v.ref=Tl(g,y,b),v.return=g,v):(v=rh(b.type,b.key,b.props,null,g.mode,v),v.ref=Tl(g,y,b),v.return=g,v)}function c(g,y,b,v){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=up(b,g.mode,v),y.return=g,y):(y=r(y,b.children||[]),y.return=g,y)}function u(g,y,b,v,S){return y===null||y.tag!==7?(y=Qi(b,g.mode,v,S),y.return=g,y):(y=r(y,b),y.return=g,y)}function d(g,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=cp(""+y,g.mode,b),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Gu:return b=rh(y.type,y.key,y.props,null,g.mode,b),b.ref=Tl(g,null,y),b.return=g,b;case zo:return y=up(y,g.mode,b),y.return=g,y;case Wr:var v=y._init;return d(g,v(y._payload),b)}if(ec(y)||kl(y))return y=Qi(y,g.mode,b,null),y.return=g,y;rd(g,y)}return null}function h(g,y,b,v){var S=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(g,y,""+b,v);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Gu:return b.key===S?l(g,y,b,v):null;case zo:return b.key===S?c(g,y,b,v):null;case Wr:return S=b._init,h(g,y,S(b._payload),v)}if(ec(b)||kl(b))return S!==null?null:u(g,y,b,v,null);rd(g,b)}return null}function p(g,y,b,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return g=g.get(b)||null,a(y,g,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Gu:return g=g.get(v.key===null?b:v.key)||null,l(y,g,v,S);case zo:return g=g.get(v.key===null?b:v.key)||null,c(y,g,v,S);case Wr:var _=v._init;return p(g,y,b,_(v._payload),S)}if(ec(v)||kl(v))return g=g.get(b)||null,u(y,g,v,S,null);rd(y,v)}return null}function m(g,y,b,v){for(var S=null,_=null,E=y,T=y=0,P=null;E!==null&&T<b.length;T++){E.index>T?(P=E,E=null):P=E.sibling;var C=h(g,E,b[T],v);if(C===null){E===null&&(E=P);break}t&&E&&C.alternate===null&&e(g,E),y=i(C,y,T),_===null?S=C:_.sibling=C,_=C,E=P}if(T===b.length)return n(g,E),mt&&Ii(g,T),S;if(E===null){for(;T<b.length;T++)E=d(g,b[T],v),E!==null&&(y=i(E,y,T),_===null?S=E:_.sibling=E,_=E);return mt&&Ii(g,T),S}for(E=s(g,E);T<b.length;T++)P=p(E,g,T,b[T],v),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?T:P.key),y=i(P,y,T),_===null?S=P:_.sibling=P,_=P);return t&&E.forEach(function(R){return e(g,R)}),mt&&Ii(g,T),S}function x(g,y,b,v){var S=kl(b);if(typeof S!="function")throw Error(ce(150));if(b=S.call(b),b==null)throw Error(ce(151));for(var _=S=null,E=y,T=y=0,P=null,C=b.next();E!==null&&!C.done;T++,C=b.next()){E.index>T?(P=E,E=null):P=E.sibling;var R=h(g,E,C.value,v);if(R===null){E===null&&(E=P);break}t&&E&&R.alternate===null&&e(g,E),y=i(R,y,T),_===null?S=R:_.sibling=R,_=R,E=P}if(C.done)return n(g,E),mt&&Ii(g,T),S;if(E===null){for(;!C.done;T++,C=b.next())C=d(g,C.value,v),C!==null&&(y=i(C,y,T),_===null?S=C:_.sibling=C,_=C);return mt&&Ii(g,T),S}for(E=s(g,E);!C.done;T++,C=b.next())C=p(E,g,T,C.value,v),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?T:C.key),y=i(C,y,T),_===null?S=C:_.sibling=C,_=C);return t&&E.forEach(function(A){return e(g,A)}),mt&&Ii(g,T),S}function w(g,y,b,v){if(typeof b=="object"&&b!==null&&b.type===Bo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Gu:e:{for(var S=b.key,_=y;_!==null;){if(_.key===S){if(S=b.type,S===Bo){if(_.tag===7){n(g,_.sibling),y=r(_,b.props.children),y.return=g,g=y;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wr&&xv(S)===_.type){n(g,_.sibling),y=r(_,b.props),y.ref=Tl(g,_,b),y.return=g,g=y;break e}n(g,_);break}else e(g,_);_=_.sibling}b.type===Bo?(y=Qi(b.props.children,g.mode,v,b.key),y.return=g,g=y):(v=rh(b.type,b.key,b.props,null,g.mode,v),v.ref=Tl(g,y,b),v.return=g,g=v)}return o(g);case zo:e:{for(_=b.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(g,y.sibling),y=r(y,b.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=up(b,g.mode,v),y.return=g,g=y}return o(g);case Wr:return _=b._init,w(g,y,_(b._payload),v)}if(ec(b))return m(g,y,b,v);if(kl(b))return x(g,y,b,v);rd(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(g,y.sibling),y=r(y,b),y.return=g,g=y):(n(g,y),y=cp(b,g.mode,v),y.return=g,g=y),o(g)):n(g,y)}return w}var Ba=A_(!0),N_=A_(!1),Lh=wi(null),jh=null,Ko=null,jx=null;function Fx(){jx=Ko=jh=null}function zx(t){var e=Lh.current;gt(Lh),t._currentValue=e}function Zg(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function aa(t,e){jh=t,jx=Ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(In=!0),t.firstContext=null)}function fs(t){var e=t._currentValue;if(jx!==t)if(t={context:t,memoizedValue:e,next:null},Ko===null){if(jh===null)throw Error(ce(308));Ko=t,jh.dependencies={lanes:0,firstContext:t}}else Ko=Ko.next=t;return e}var Bi=null;function Bx(t){Bi===null?Bi=[t]:Bi.push(t)}function O_(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Bx(e)):(n.next=r.next,r.next=n),e.interleaved=n,Cr(t,s)}function Cr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hr=!1;function $x(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function li(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ge&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Cr(t,n)}return r=s.interleaved,r===null?(e.next=e,Bx(s)):(e.next=r.next,r.next=e),s.interleaved=e,Cr(t,n)}function Jd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Ex(t,n)}}function bv(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fh(t,e,n,s){var r=t.updateQueue;Hr=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=r.baseState;o=0,u=c=l=null,a=i;do{var h=a.lane,p=a.eventTime;if((s&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,x=a;switch(h=e,p=n,x.tag){case 1:if(m=x.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=wt({},d,h);break e;case 2:Hr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);ao|=o,t.lanes=o,t.memoizedState=d}}function yv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(ce(191,r));r.call(s)}}}var Su={},Qs=wi(Su),Yc=wi(Su),Gc=wi(Su);function $i(t){if(t===Su)throw Error(ce(174));return t}function Ux(t,e){switch(dt(Gc,e),dt(Yc,t),dt(Qs,Su),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ng(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ng(e,t)}gt(Qs),dt(Qs,e)}function $a(){gt(Qs),gt(Yc),gt(Gc)}function L_(t){$i(Gc.current);var e=$i(Qs.current),n=Ng(e,t.type);e!==n&&(dt(Yc,t),dt(Qs,n))}function Wx(t){Yc.current===t&&(gt(Qs),gt(Yc))}var yt=wi(0);function zh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sp=[];function Hx(){for(var t=0;t<sp.length;t++)sp[t]._workInProgressVersionPrimary=null;sp.length=0}var Zd=Mr.ReactCurrentDispatcher,rp=Mr.ReactCurrentBatchConfig,oo=0,vt=null,Ot=null,zt=null,Bh=!1,wc=!1,Kc=0,ZT=0;function on(){throw Error(ce(321))}function Vx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rs(t[n],e[n]))return!1;return!0}function Yx(t,e,n,s,r,i){if(oo=i,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zd.current=t===null||t.memoizedState===null?s8:r8,t=n(s,r),wc){i=0;do{if(wc=!1,Kc=0,25<=i)throw Error(ce(301));i+=1,zt=Ot=null,e.updateQueue=null,Zd.current=i8,t=n(s,r)}while(wc)}if(Zd.current=$h,e=Ot!==null&&Ot.next!==null,oo=0,zt=Ot=vt=null,Bh=!1,e)throw Error(ce(300));return t}function Gx(){var t=Kc!==0;return Kc=0,t}function Us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?vt.memoizedState=zt=t:zt=zt.next=t,zt}function ps(){if(Ot===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=zt===null?vt.memoizedState:zt.next;if(e!==null)zt=e,Ot=t;else{if(t===null)throw Error(ce(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},zt===null?vt.memoizedState=zt=t:zt=zt.next=t}return zt}function qc(t,e){return typeof e=="function"?e(t):e}function ip(t){var e=ps(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var s=Ot,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((oo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=s):l=l.next=d,vt.lanes|=u,ao|=u}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,Rs(s,e.memoizedState)||(In=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,vt.lanes|=i,ao|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function op(t){var e=ps(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Rs(i,e.memoizedState)||(In=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function j_(){}function F_(t,e){var n=vt,s=ps(),r=e(),i=!Rs(s.memoizedState,r);if(i&&(s.memoizedState=r,In=!0),s=s.queue,Kx($_.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,Xc(9,B_.bind(null,n,s,r,e),void 0,null),Ht===null)throw Error(ce(349));oo&30||z_(n,e,r)}return r}function z_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function B_(t,e,n,s){e.value=n,e.getSnapshot=s,U_(e)&&W_(t)}function $_(t,e,n){return n(function(){U_(e)&&W_(t)})}function U_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rs(t,n)}catch{return!0}}function W_(t){var e=Cr(t,1);e!==null&&Is(e,t,1,-1)}function vv(t){var e=Us();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:t},e.queue=t,t=t.dispatch=n8.bind(null,vt,t),[e.memoizedState,t]}function Xc(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function H_(){return ps().memoizedState}function eh(t,e,n,s){var r=Us();vt.flags|=t,r.memoizedState=Xc(1|e,n,void 0,s===void 0?null:s)}function Ff(t,e,n,s){var r=ps();s=s===void 0?null:s;var i=void 0;if(Ot!==null){var o=Ot.memoizedState;if(i=o.destroy,s!==null&&Vx(s,o.deps)){r.memoizedState=Xc(e,n,i,s);return}}vt.flags|=t,r.memoizedState=Xc(1|e,n,i,s)}function wv(t,e){return eh(8390656,8,t,e)}function Kx(t,e){return Ff(2048,8,t,e)}function V_(t,e){return Ff(4,2,t,e)}function Y_(t,e){return Ff(4,4,t,e)}function G_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K_(t,e,n){return n=n!=null?n.concat([t]):null,Ff(4,4,G_.bind(null,e,t),n)}function qx(){}function q_(t,e){var n=ps();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Vx(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function X_(t,e){var n=ps();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Vx(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Q_(t,e,n){return oo&21?(Rs(n,e)||(n=n_(),vt.lanes|=n,ao|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,In=!0),t.memoizedState=n)}function e8(t,e){var n=tt;tt=n!==0&&4>n?n:4,t(!0);var s=rp.transition;rp.transition={};try{t(!1),e()}finally{tt=n,rp.transition=s}}function J_(){return ps().memoizedState}function t8(t,e,n){var s=ui(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Z_(t))eC(e,n);else if(n=O_(t,e,n,s),n!==null){var r=yn();Is(n,t,s,r),tC(n,e,s)}}function n8(t,e,n){var s=ui(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Z_(t))eC(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Rs(a,o)){var l=e.interleaved;l===null?(r.next=r,Bx(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=O_(t,e,r,s),n!==null&&(r=yn(),Is(n,t,s,r),tC(n,e,s))}}function Z_(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function eC(t,e){wc=Bh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tC(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Ex(t,n)}}var $h={readContext:fs,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},s8={readContext:fs,useCallback:function(t,e){return Us().memoizedState=[t,e===void 0?null:e],t},useContext:fs,useEffect:wv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,eh(4194308,4,G_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return eh(4194308,4,t,e)},useInsertionEffect:function(t,e){return eh(4,2,t,e)},useMemo:function(t,e){var n=Us();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Us();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=t8.bind(null,vt,t),[s.memoizedState,t]},useRef:function(t){var e=Us();return t={current:t},e.memoizedState=t},useState:vv,useDebugValue:qx,useDeferredValue:function(t){return Us().memoizedState=t},useTransition:function(){var t=vv(!1),e=t[0];return t=e8.bind(null,t[1]),Us().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=vt,r=Us();if(mt){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),Ht===null)throw Error(ce(349));oo&30||z_(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,wv($_.bind(null,s,i,t),[t]),s.flags|=2048,Xc(9,B_.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Us(),e=Ht.identifierPrefix;if(mt){var n=xr,s=mr;n=(s&~(1<<32-Ms(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Kc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},r8={readContext:fs,useCallback:q_,useContext:fs,useEffect:Kx,useImperativeHandle:K_,useInsertionEffect:V_,useLayoutEffect:Y_,useMemo:X_,useReducer:ip,useRef:H_,useState:function(){return ip(qc)},useDebugValue:qx,useDeferredValue:function(t){var e=ps();return Q_(e,Ot.memoizedState,t)},useTransition:function(){var t=ip(qc)[0],e=ps().memoizedState;return[t,e]},useMutableSource:j_,useSyncExternalStore:F_,useId:J_,unstable_isNewReconciler:!1},i8={readContext:fs,useCallback:q_,useContext:fs,useEffect:Kx,useImperativeHandle:K_,useInsertionEffect:V_,useLayoutEffect:Y_,useMemo:X_,useReducer:op,useRef:H_,useState:function(){return op(qc)},useDebugValue:qx,useDeferredValue:function(t){var e=ps();return Ot===null?e.memoizedState=t:Q_(e,Ot.memoizedState,t)},useTransition:function(){var t=op(qc)[0],e=ps().memoizedState;return[t,e]},useMutableSource:j_,useSyncExternalStore:F_,useId:J_,unstable_isNewReconciler:!1};function ws(t,e){if(t&&t.defaultProps){e=wt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function em(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:wt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zf={isMounted:function(t){return(t=t._reactInternals)?vo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=yn(),r=ui(t),i=vr(s,r);i.payload=e,n!=null&&(i.callback=n),e=li(t,i,r),e!==null&&(Is(e,t,r,s),Jd(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=yn(),r=ui(t),i=vr(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=li(t,i,r),e!==null&&(Is(e,t,r,s),Jd(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),s=ui(t),r=vr(n,s);r.tag=2,e!=null&&(r.callback=e),e=li(t,r,s),e!==null&&(Is(e,t,s,n),Jd(e,t,s))}};function Sv(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Uc(n,s)||!Uc(r,i):!0}function nC(t,e,n){var s=!1,r=mi,i=e.contextType;return typeof i=="object"&&i!==null?i=fs(i):(r=Nn(e)?ro:hn.current,s=e.contextTypes,i=(s=s!=null)?Fa(t,r):mi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zf,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function kv(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&zf.enqueueReplaceState(e,e.state,null)}function tm(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},$x(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=fs(i):(i=Nn(e)?ro:hn.current,r.context=Fa(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(em(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&zf.enqueueReplaceState(r,r.state,null),Fh(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ua(t,e){try{var n="",s=e;do n+=NP(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function ap(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var o8=typeof WeakMap=="function"?WeakMap:Map;function sC(t,e,n){n=vr(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Wh||(Wh=!0,hm=s),nm(t,e)},n}function rC(t,e,n){n=vr(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){nm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nm(t,e),typeof s!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _v(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new o8;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=v8.bind(null,t,e,n),e.then(t,t))}function Cv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ev(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vr(-1,1),e.tag=2,li(n,e,1))),n.lanes|=1),t)}var a8=Mr.ReactCurrentOwner,In=!1;function bn(t,e,n,s){e.child=t===null?N_(e,null,n,s):Ba(e,t.child,n,s)}function Pv(t,e,n,s,r){n=n.render;var i=e.ref;return aa(e,r),s=Yx(t,e,n,s,i,r),n=Gx(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Er(t,e,r)):(mt&&n&&Ox(e),e.flags|=1,bn(t,e,s,r),e.child)}function Tv(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!sb(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iC(t,e,i,s,r)):(t=rh(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Uc,n(o,s)&&t.ref===e.ref)return Er(t,e,r)}return e.flags|=1,t=di(i,s),t.ref=e.ref,t.return=e,e.child=t}function iC(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Uc(i,s)&&t.ref===e.ref)if(In=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(In=!0);else return e.lanes=t.lanes,Er(t,e,r)}return sm(t,e,n,s,r)}function oC(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Xo,zn),zn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dt(Xo,zn),zn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,dt(Xo,zn),zn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,dt(Xo,zn),zn|=s;return bn(t,e,r,n),e.child}function aC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sm(t,e,n,s,r){var i=Nn(n)?ro:hn.current;return i=Fa(e,i),aa(e,r),n=Yx(t,e,n,s,i,r),s=Gx(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Er(t,e,r)):(mt&&s&&Ox(e),e.flags|=1,bn(t,e,n,r),e.child)}function Mv(t,e,n,s,r){if(Nn(n)){var i=!0;Nh(e)}else i=!1;if(aa(e,r),e.stateNode===null)th(t,e),nC(e,n,s),tm(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fs(c):(c=Nn(n)?ro:hn.current,c=Fa(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&kv(e,o,s,c),Hr=!1;var h=e.memoizedState;o.state=h,Fh(e,s,o,r),l=e.memoizedState,a!==s||h!==l||An.current||Hr?(typeof u=="function"&&(em(e,n,u,s),l=e.memoizedState),(a=Hr||Sv(e,n,a,s,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,D_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ws(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=fs(l):(l=Nn(n)?ro:hn.current,l=Fa(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&kv(e,o,s,l),Hr=!1,h=e.memoizedState,o.state=h,Fh(e,s,o,r);var m=e.memoizedState;a!==d||h!==m||An.current||Hr?(typeof p=="function"&&(em(e,n,p,s),m=e.memoizedState),(c=Hr||Sv(e,n,c,s,h,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),o.props=s,o.state=m,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return rm(t,e,n,s,i,r)}function rm(t,e,n,s,r,i){aC(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&pv(e,n,!1),Er(t,e,i);s=e.stateNode,a8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Ba(e,t.child,null,i),e.child=Ba(e,null,a,i)):bn(t,e,a,i),e.memoizedState=s.state,r&&pv(e,n,!0),e.child}function lC(t){var e=t.stateNode;e.pendingContext?fv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fv(t,e.context,!1),Ux(t,e.containerInfo)}function Iv(t,e,n,s,r){return za(),Lx(r),e.flags|=256,bn(t,e,n,s),e.child}var im={dehydrated:null,treeContext:null,retryLane:0};function om(t){return{baseLanes:t,cachePool:null,transitions:null}}function cC(t,e,n){var s=e.pendingProps,r=yt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),dt(yt,r&1),t===null)return Jg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Uf(o,s,0,null),t=Qi(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=om(n),e.memoizedState=im,t):Xx(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return l8(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=di(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=di(a,i):(i=Qi(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?om(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=im,s}return i=t.child,t=i.sibling,s=di(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Xx(t,e){return e=Uf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function id(t,e,n,s){return s!==null&&Lx(s),Ba(e,t.child,null,n),t=Xx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function l8(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=ap(Error(ce(422))),id(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Uf({mode:"visible",children:s.children},r,0,null),i=Qi(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Ba(e,t.child,null,o),e.child.memoizedState=om(o),e.memoizedState=im,i);if(!(e.mode&1))return id(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(ce(419)),s=ap(i,s,void 0),id(t,e,o,s)}if(a=(o&t.childLanes)!==0,In||a){if(s=Ht,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Cr(t,r),Is(s,t,r,-1))}return nb(),s=ap(Error(ce(421))),id(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=w8.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,$n=ai(r.nextSibling),Un=e,mt=!0,Cs=null,t!==null&&(as[ls++]=mr,as[ls++]=xr,as[ls++]=io,mr=t.id,xr=t.overflow,io=e),e=Xx(e,s.children),e.flags|=4096,e)}function Rv(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Zg(t.return,e,n)}function lp(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function uC(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(bn(t,e,s.children,n),s=yt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rv(t,n,e);else if(t.tag===19)Rv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(dt(yt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&zh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),lp(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&zh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}lp(e,!0,n,null,i);break;case"together":lp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function th(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ao|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=di(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=di(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function c8(t,e,n){switch(e.tag){case 3:lC(e),za();break;case 5:L_(e);break;case 1:Nn(e.type)&&Nh(e);break;case 4:Ux(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;dt(Lh,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(dt(yt,yt.current&1),e.flags|=128,null):n&e.child.childLanes?cC(t,e,n):(dt(yt,yt.current&1),t=Er(t,e,n),t!==null?t.sibling:null);dt(yt,yt.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return uC(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),dt(yt,yt.current),s)break;return null;case 22:case 23:return e.lanes=0,oC(t,e,n)}return Er(t,e,n)}var dC,am,hC,fC;dC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};am=function(){};hC=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,$i(Qs.current);var i=null;switch(n){case"input":r=Mg(t,r),s=Mg(t,s),i=[];break;case"select":r=wt({},r,{value:void 0}),s=wt({},s,{value:void 0}),i=[];break;case"textarea":r=Ag(t,r),s=Ag(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Rh)}Og(n,s);var o;n=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Dc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Dc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&pt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};fC=function(t,e,n,s){n!==s&&(e.flags|=4)};function Ml(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function an(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function u8(t,e,n){var s=e.pendingProps;switch(Dx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(e),null;case 1:return Nn(e.type)&&Ah(),an(e),null;case 3:return s=e.stateNode,$a(),gt(An),gt(hn),Hx(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(sd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Cs!==null&&(gm(Cs),Cs=null))),am(t,e),an(e),null;case 5:Wx(e);var r=$i(Gc.current);if(n=e.type,t!==null&&e.stateNode!=null)hC(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(ce(166));return an(e),null}if(t=$i(Qs.current),sd(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Ks]=e,s[Vc]=i,t=(e.mode&1)!==0,n){case"dialog":pt("cancel",s),pt("close",s);break;case"iframe":case"object":case"embed":pt("load",s);break;case"video":case"audio":for(r=0;r<nc.length;r++)pt(nc[r],s);break;case"source":pt("error",s);break;case"img":case"image":case"link":pt("error",s),pt("load",s);break;case"details":pt("toggle",s);break;case"input":By(s,i),pt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},pt("invalid",s);break;case"textarea":Uy(s,i),pt("invalid",s)}Og(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&nd(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&nd(s.textContent,a,t),r=["children",""+a]):Dc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pt("scroll",s)}switch(n){case"input":Ku(s),$y(s,i,!0);break;case"textarea":Ku(s),Wy(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Rh)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$k(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Ks]=e,t[Vc]=s,dC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dg(n,s),n){case"dialog":pt("cancel",t),pt("close",t),r=s;break;case"iframe":case"object":case"embed":pt("load",t),r=s;break;case"video":case"audio":for(r=0;r<nc.length;r++)pt(nc[r],t);r=s;break;case"source":pt("error",t),r=s;break;case"img":case"image":case"link":pt("error",t),pt("load",t),r=s;break;case"details":pt("toggle",t),r=s;break;case"input":By(t,s),r=Mg(t,s),pt("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=wt({},s,{value:void 0}),pt("invalid",t);break;case"textarea":Uy(t,s),r=Ag(t,s),pt("invalid",t);break;default:r=s}Og(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Hk(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Uk(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lc(t,l):typeof l=="number"&&Lc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Dc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&pt("scroll",t):l!=null&&vx(t,i,l,o))}switch(n){case"input":Ku(t),$y(t,s,!1);break;case"textarea":Ku(t),Wy(t);break;case"option":s.value!=null&&t.setAttribute("value",""+gi(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?sa(t,!!s.multiple,i,!1):s.defaultValue!=null&&sa(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Rh)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return an(e),null;case 6:if(t&&e.stateNode!=null)fC(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(ce(166));if(n=$i(Gc.current),$i(Qs.current),sd(e)){if(s=e.stateNode,n=e.memoizedProps,s[Ks]=e,(i=s.nodeValue!==n)&&(t=Un,t!==null))switch(t.tag){case 3:nd(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nd(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Ks]=e,e.stateNode=s}return an(e),null;case 13:if(gt(yt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&$n!==null&&e.mode&1&&!(e.flags&128))R_(),za(),e.flags|=98560,i=!1;else if(i=sd(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ce(317));i[Ks]=e}else za(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;an(e),i=!1}else Cs!==null&&(gm(Cs),Cs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||yt.current&1?Lt===0&&(Lt=3):nb())),e.updateQueue!==null&&(e.flags|=4),an(e),null);case 4:return $a(),am(t,e),t===null&&Wc(e.stateNode.containerInfo),an(e),null;case 10:return zx(e.type._context),an(e),null;case 17:return Nn(e.type)&&Ah(),an(e),null;case 19:if(gt(yt),i=e.memoizedState,i===null)return an(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Ml(i,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zh(t),o!==null){for(e.flags|=128,Ml(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dt(yt,yt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pt()>Wa&&(e.flags|=128,s=!0,Ml(i,!1),e.lanes=4194304)}else{if(!s)if(t=zh(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ml(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!mt)return an(e),null}else 2*Pt()-i.renderingStartTime>Wa&&n!==1073741824&&(e.flags|=128,s=!0,Ml(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pt(),e.sibling=null,n=yt.current,dt(yt,s?n&1|2:n&1),e):(an(e),null);case 22:case 23:return tb(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?zn&1073741824&&(an(e),e.subtreeFlags&6&&(e.flags|=8192)):an(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function d8(t,e){switch(Dx(e),e.tag){case 1:return Nn(e.type)&&Ah(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $a(),gt(An),gt(hn),Hx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wx(e),null;case 13:if(gt(yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));za()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(yt),null;case 4:return $a(),null;case 10:return zx(e.type._context),null;case 22:case 23:return tb(),null;case 24:return null;default:return null}}var od=!1,dn=!1,h8=typeof WeakSet=="function"?WeakSet:Set,me=null;function qo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){St(t,e,s)}else n.current=null}function lm(t,e,n){try{n()}catch(s){St(t,e,s)}}var Av=!1;function f8(t,e){if(Vg=Th,t=b_(),Nx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==i||s!==0&&d.nodeType!==3||(l=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===n&&++c===r&&(a=o),h===i&&++u===s&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yg={focusedElem:t,selectionRange:n},Th=!1,me=e;me!==null;)if(e=me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,me=t;else for(;me!==null;){e=me;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,w=m.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:ws(e.type,x),w);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(v){St(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}return m=Av,Av=!1,m}function Sc(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&lm(e,n,i)}r=r.next}while(r!==s)}}function Bf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function cm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pC(t){var e=t.alternate;e!==null&&(t.alternate=null,pC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ks],delete e[Vc],delete e[qg],delete e[qT],delete e[XT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gC(t){return t.tag===5||t.tag===3||t.tag===4}function Nv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function um(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rh));else if(s!==4&&(t=t.child,t!==null))for(um(t,e,n),t=t.sibling;t!==null;)um(t,e,n),t=t.sibling}function dm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(dm(t,e,n),t=t.sibling;t!==null;)dm(t,e,n),t=t.sibling}var qt=null,_s=!1;function Ir(t,e,n){for(n=n.child;n!==null;)mC(t,e,n),n=n.sibling}function mC(t,e,n){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(Af,n)}catch{}switch(n.tag){case 5:dn||qo(n,e);case 6:var s=qt,r=_s;qt=null,Ir(t,e,n),qt=s,_s=r,qt!==null&&(_s?(t=qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(_s?(t=qt,n=n.stateNode,t.nodeType===8?tp(t.parentNode,n):t.nodeType===1&&tp(t,n),Bc(t)):tp(qt,n.stateNode));break;case 4:s=qt,r=_s,qt=n.stateNode.containerInfo,_s=!0,Ir(t,e,n),qt=s,_s=r;break;case 0:case 11:case 14:case 15:if(!dn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&lm(n,e,o),r=r.next}while(r!==s)}Ir(t,e,n);break;case 1:if(!dn&&(qo(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){St(n,e,a)}Ir(t,e,n);break;case 21:Ir(t,e,n);break;case 22:n.mode&1?(dn=(s=dn)||n.memoizedState!==null,Ir(t,e,n),dn=s):Ir(t,e,n);break;default:Ir(t,e,n)}}function Ov(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new h8),e.forEach(function(s){var r=S8.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function bs(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qt=a.stateNode,_s=!1;break e;case 3:qt=a.stateNode.containerInfo,_s=!0;break e;case 4:qt=a.stateNode.containerInfo,_s=!0;break e}a=a.return}if(qt===null)throw Error(ce(160));mC(i,o,r),qt=null,_s=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){St(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xC(e,t),e=e.sibling}function xC(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bs(e,t),Ds(t),s&4){try{Sc(3,t,t.return),Bf(3,t)}catch(x){St(t,t.return,x)}try{Sc(5,t,t.return)}catch(x){St(t,t.return,x)}}break;case 1:bs(e,t),Ds(t),s&512&&n!==null&&qo(n,n.return);break;case 5:if(bs(e,t),Ds(t),s&512&&n!==null&&qo(n,n.return),t.flags&32){var r=t.stateNode;try{Lc(r,"")}catch(x){St(t,t.return,x)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&zk(r,i),Dg(a,o);var c=Dg(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Hk(r,d):u==="dangerouslySetInnerHTML"?Uk(r,d):u==="children"?Lc(r,d):vx(r,u,d,c)}switch(a){case"input":Ig(r,i);break;case"textarea":Bk(r,i);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?sa(r,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?sa(r,!!i.multiple,i.defaultValue,!0):sa(r,!!i.multiple,i.multiple?[]:"",!1))}r[Vc]=i}catch(x){St(t,t.return,x)}}break;case 6:if(bs(e,t),Ds(t),s&4){if(t.stateNode===null)throw Error(ce(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(x){St(t,t.return,x)}}break;case 3:if(bs(e,t),Ds(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Bc(e.containerInfo)}catch(x){St(t,t.return,x)}break;case 4:bs(e,t),Ds(t);break;case 13:bs(e,t),Ds(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Zx=Pt())),s&4&&Ov(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(dn=(c=dn)||u,bs(e,t),dn=c):bs(e,t),Ds(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(me=t,u=t.child;u!==null;){for(d=me=u;me!==null;){switch(h=me,p=h.child,h.tag){case 0:case 11:case 14:case 15:Sc(4,h,h.return);break;case 1:qo(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){s=h,n=h.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(x){St(s,n,x)}}break;case 5:qo(h,h.return);break;case 22:if(h.memoizedState!==null){Lv(d);continue}}p!==null?(p.return=h,me=p):Lv(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Wk("display",o))}catch(x){St(t,t.return,x)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){St(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bs(e,t),Ds(t),s&4&&Ov(t);break;case 21:break;default:bs(e,t),Ds(t)}}function Ds(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gC(n)){var s=n;break e}n=n.return}throw Error(ce(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Lc(r,""),s.flags&=-33);var i=Nv(t);dm(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=Nv(t);um(t,a,o);break;default:throw Error(ce(161))}}catch(l){St(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function p8(t,e,n){me=t,bC(t)}function bC(t,e,n){for(var s=(t.mode&1)!==0;me!==null;){var r=me,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||od;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||dn;a=od;var c=dn;if(od=o,(dn=l)&&!c)for(me=r;me!==null;)o=me,l=o.child,o.tag===22&&o.memoizedState!==null?jv(r):l!==null?(l.return=o,me=l):jv(r);for(;i!==null;)me=i,bC(i),i=i.sibling;me=r,od=a,dn=c}Dv(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,me=i):Dv(t)}}function Dv(t){for(;me!==null;){var e=me;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||Bf(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!dn)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ws(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&yv(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Bc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}dn||e.flags&512&&cm(e)}catch(h){St(e,e.return,h)}}if(e===t){me=null;break}if(n=e.sibling,n!==null){n.return=e.return,me=n;break}me=e.return}}function Lv(t){for(;me!==null;){var e=me;if(e===t){me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,me=n;break}me=e.return}}function jv(t){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bf(4,e)}catch(l){St(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){St(e,r,l)}}var i=e.return;try{cm(e)}catch(l){St(e,i,l)}break;case 5:var o=e.return;try{cm(e)}catch(l){St(e,o,l)}}}catch(l){St(e,e.return,l)}if(e===t){me=null;break}var a=e.sibling;if(a!==null){a.return=e.return,me=a;break}me=e.return}}var g8=Math.ceil,Uh=Mr.ReactCurrentDispatcher,Qx=Mr.ReactCurrentOwner,hs=Mr.ReactCurrentBatchConfig,Ge=0,Ht=null,Nt=null,tn=0,zn=0,Xo=wi(0),Lt=0,Qc=null,ao=0,$f=0,Jx=0,kc=null,Tn=null,Zx=0,Wa=1/0,cr=null,Wh=!1,hm=null,ci=null,ad=!1,Zr=null,Hh=0,_c=0,fm=null,nh=-1,sh=0;function yn(){return Ge&6?Pt():nh!==-1?nh:nh=Pt()}function ui(t){return t.mode&1?Ge&2&&tn!==0?tn&-tn:JT.transition!==null?(sh===0&&(sh=n_()),sh):(t=tt,t!==0||(t=window.event,t=t===void 0?16:c_(t.type)),t):1}function Is(t,e,n,s){if(50<_c)throw _c=0,fm=null,Error(ce(185));yu(t,n,s),(!(Ge&2)||t!==Ht)&&(t===Ht&&(!(Ge&2)&&($f|=n),Lt===4&&Yr(t,tn)),On(t,s),n===1&&Ge===0&&!(e.mode&1)&&(Wa=Pt()+500,jf&&Si()))}function On(t,e){var n=t.callbackNode;JP(t,e);var s=Ph(t,t===Ht?tn:0);if(s===0)n!==null&&Yy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Yy(n),e===1)t.tag===0?QT(Fv.bind(null,t)):T_(Fv.bind(null,t)),GT(function(){!(Ge&6)&&Si()}),n=null;else{switch(s_(s)){case 1:n=Cx;break;case 4:n=e_;break;case 16:n=Eh;break;case 536870912:n=t_;break;default:n=Eh}n=EC(n,yC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yC(t,e){if(nh=-1,sh=0,Ge&6)throw Error(ce(327));var n=t.callbackNode;if(la()&&t.callbackNode!==n)return null;var s=Ph(t,t===Ht?tn:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Vh(t,s);else{e=s;var r=Ge;Ge|=2;var i=wC();(Ht!==t||tn!==e)&&(cr=null,Wa=Pt()+500,Xi(t,e));do try{b8();break}catch(a){vC(t,a)}while(!0);Fx(),Uh.current=i,Ge=r,Nt!==null?e=0:(Ht=null,tn=0,e=Lt)}if(e!==0){if(e===2&&(r=Bg(t),r!==0&&(s=r,e=pm(t,r))),e===1)throw n=Qc,Xi(t,0),Yr(t,s),On(t,Pt()),n;if(e===6)Yr(t,s);else{if(r=t.current.alternate,!(s&30)&&!m8(r)&&(e=Vh(t,s),e===2&&(i=Bg(t),i!==0&&(s=i,e=pm(t,i))),e===1))throw n=Qc,Xi(t,0),Yr(t,s),On(t,Pt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(ce(345));case 2:Ri(t,Tn,cr);break;case 3:if(Yr(t,s),(s&130023424)===s&&(e=Zx+500-Pt(),10<e)){if(Ph(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){yn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Kg(Ri.bind(null,t,Tn,cr),e);break}Ri(t,Tn,cr);break;case 4:if(Yr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Ms(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Pt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*g8(s/1960))-s,10<s){t.timeoutHandle=Kg(Ri.bind(null,t,Tn,cr),s);break}Ri(t,Tn,cr);break;case 5:Ri(t,Tn,cr);break;default:throw Error(ce(329))}}}return On(t,Pt()),t.callbackNode===n?yC.bind(null,t):null}function pm(t,e){var n=kc;return t.current.memoizedState.isDehydrated&&(Xi(t,e).flags|=256),t=Vh(t,e),t!==2&&(e=Tn,Tn=n,e!==null&&gm(e)),t}function gm(t){Tn===null?Tn=t:Tn.push.apply(Tn,t)}function m8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Rs(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yr(t,e){for(e&=~Jx,e&=~$f,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ms(e),s=1<<n;t[n]=-1,e&=~s}}function Fv(t){if(Ge&6)throw Error(ce(327));la();var e=Ph(t,0);if(!(e&1))return On(t,Pt()),null;var n=Vh(t,e);if(t.tag!==0&&n===2){var s=Bg(t);s!==0&&(e=s,n=pm(t,s))}if(n===1)throw n=Qc,Xi(t,0),Yr(t,e),On(t,Pt()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ri(t,Tn,cr),On(t,Pt()),null}function eb(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(Wa=Pt()+500,jf&&Si())}}function lo(t){Zr!==null&&Zr.tag===0&&!(Ge&6)&&la();var e=Ge;Ge|=1;var n=hs.transition,s=tt;try{if(hs.transition=null,tt=1,t)return t()}finally{tt=s,hs.transition=n,Ge=e,!(Ge&6)&&Si()}}function tb(){zn=Xo.current,gt(Xo)}function Xi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YT(n)),Nt!==null)for(n=Nt.return;n!==null;){var s=n;switch(Dx(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ah();break;case 3:$a(),gt(An),gt(hn),Hx();break;case 5:Wx(s);break;case 4:$a();break;case 13:gt(yt);break;case 19:gt(yt);break;case 10:zx(s.type._context);break;case 22:case 23:tb()}n=n.return}if(Ht=t,Nt=t=di(t.current,null),tn=zn=e,Lt=0,Qc=null,Jx=$f=ao=0,Tn=kc=null,Bi!==null){for(e=0;e<Bi.length;e++)if(n=Bi[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}Bi=null}return t}function vC(t,e){do{var n=Nt;try{if(Fx(),Zd.current=$h,Bh){for(var s=vt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Bh=!1}if(oo=0,zt=Ot=vt=null,wc=!1,Kc=0,Qx.current=null,n===null||n.return===null){Lt=1,Qc=e,Nt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=tn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Cv(o);if(p!==null){p.flags&=-257,Ev(p,o,a,i,e),p.mode&1&&_v(i,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var x=new Set;x.add(l),e.updateQueue=x}else m.add(l);break e}else{if(!(e&1)){_v(i,c,e),nb();break e}l=Error(ce(426))}}else if(mt&&a.mode&1){var w=Cv(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Ev(w,o,a,i,e),Lx(Ua(l,a));break e}}i=l=Ua(l,a),Lt!==4&&(Lt=2),kc===null?kc=[i]:kc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=sC(i,l,e);bv(i,g);break e;case 1:a=l;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ci===null||!ci.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var v=rC(i,a,e);bv(i,v);break e}}i=i.return}while(i!==null)}kC(n)}catch(S){e=S,Nt===n&&n!==null&&(Nt=n=n.return);continue}break}while(!0)}function wC(){var t=Uh.current;return Uh.current=$h,t===null?$h:t}function nb(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Ht===null||!(ao&268435455)&&!($f&268435455)||Yr(Ht,tn)}function Vh(t,e){var n=Ge;Ge|=2;var s=wC();(Ht!==t||tn!==e)&&(cr=null,Xi(t,e));do try{x8();break}catch(r){vC(t,r)}while(!0);if(Fx(),Ge=n,Uh.current=s,Nt!==null)throw Error(ce(261));return Ht=null,tn=0,Lt}function x8(){for(;Nt!==null;)SC(Nt)}function b8(){for(;Nt!==null&&!WP();)SC(Nt)}function SC(t){var e=CC(t.alternate,t,zn);t.memoizedProps=t.pendingProps,e===null?kC(t):Nt=e,Qx.current=null}function kC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=d8(n,e),n!==null){n.flags&=32767,Nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,Nt=null;return}}else if(n=u8(n,e,zn),n!==null){Nt=n;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);Lt===0&&(Lt=5)}function Ri(t,e,n){var s=tt,r=hs.transition;try{hs.transition=null,tt=1,y8(t,e,n,s)}finally{hs.transition=r,tt=s}return null}function y8(t,e,n,s){do la();while(Zr!==null);if(Ge&6)throw Error(ce(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ZP(t,i),t===Ht&&(Nt=Ht=null,tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ad||(ad=!0,EC(Eh,function(){return la(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=hs.transition,hs.transition=null;var o=tt;tt=1;var a=Ge;Ge|=4,Qx.current=null,f8(t,n),xC(n,t),zT(Yg),Th=!!Vg,Yg=Vg=null,t.current=n,p8(n),HP(),Ge=a,tt=o,hs.transition=i}else t.current=n;if(ad&&(ad=!1,Zr=t,Hh=r),i=t.pendingLanes,i===0&&(ci=null),GP(n.stateNode),On(t,Pt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Wh)throw Wh=!1,t=hm,hm=null,t;return Hh&1&&t.tag!==0&&la(),i=t.pendingLanes,i&1?t===fm?_c++:(_c=0,fm=t):_c=0,Si(),null}function la(){if(Zr!==null){var t=s_(Hh),e=hs.transition,n=tt;try{if(hs.transition=null,tt=16>t?16:t,Zr===null)var s=!1;else{if(t=Zr,Zr=null,Hh=0,Ge&6)throw Error(ce(331));var r=Ge;for(Ge|=4,me=t.current;me!==null;){var i=me,o=i.child;if(me.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(me=c;me!==null;){var u=me;switch(u.tag){case 0:case 11:case 15:Sc(8,u,i)}var d=u.child;if(d!==null)d.return=u,me=d;else for(;me!==null;){u=me;var h=u.sibling,p=u.return;if(pC(u),u===c){me=null;break}if(h!==null){h.return=p,me=h;break}me=p}}}var m=i.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}me=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,me=o;else e:for(;me!==null;){if(i=me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Sc(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,me=g;break e}me=i.return}}var y=t.current;for(me=y;me!==null;){o=me;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,me=b;else e:for(o=y;me!==null;){if(a=me,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bf(9,a)}}catch(S){St(a,a.return,S)}if(a===o){me=null;break e}var v=a.sibling;if(v!==null){v.return=a.return,me=v;break e}me=a.return}}if(Ge=r,Si(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(Af,t)}catch{}s=!0}return s}finally{tt=n,hs.transition=e}}return!1}function zv(t,e,n){e=Ua(n,e),e=sC(t,e,1),t=li(t,e,1),e=yn(),t!==null&&(yu(t,1,e),On(t,e))}function St(t,e,n){if(t.tag===3)zv(t,t,n);else for(;e!==null;){if(e.tag===3){zv(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ci===null||!ci.has(s))){t=Ua(n,t),t=rC(e,t,1),e=li(e,t,1),t=yn(),e!==null&&(yu(e,1,t),On(e,t));break}}e=e.return}}function v8(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,Ht===t&&(tn&n)===n&&(Lt===4||Lt===3&&(tn&130023424)===tn&&500>Pt()-Zx?Xi(t,0):Jx|=n),On(t,e)}function _C(t,e){e===0&&(t.mode&1?(e=Qu,Qu<<=1,!(Qu&130023424)&&(Qu=4194304)):e=1);var n=yn();t=Cr(t,e),t!==null&&(yu(t,e,n),On(t,n))}function w8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_C(t,n)}function S8(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(ce(314))}s!==null&&s.delete(e),_C(t,n)}var CC;CC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||An.current)In=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return In=!1,c8(t,e,n);In=!!(t.flags&131072)}else In=!1,mt&&e.flags&1048576&&M_(e,Dh,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;th(t,e),t=e.pendingProps;var r=Fa(e,hn.current);aa(e,n),r=Yx(null,e,s,t,r,n);var i=Gx();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(s)?(i=!0,Nh(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,$x(e),r.updater=zf,e.stateNode=r,r._reactInternals=e,tm(e,s,t,n),e=rm(null,e,s,!0,i,n)):(e.tag=0,mt&&i&&Ox(e),bn(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(th(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=_8(s),t=ws(s,t),r){case 0:e=sm(null,e,s,t,n);break e;case 1:e=Mv(null,e,s,t,n);break e;case 11:e=Pv(null,e,s,t,n);break e;case 14:e=Tv(null,e,s,ws(s.type,t),n);break e}throw Error(ce(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ws(s,r),sm(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ws(s,r),Mv(t,e,s,r,n);case 3:e:{if(lC(e),t===null)throw Error(ce(387));s=e.pendingProps,i=e.memoizedState,r=i.element,D_(t,e),Fh(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Ua(Error(ce(423)),e),e=Iv(t,e,s,n,r);break e}else if(s!==r){r=Ua(Error(ce(424)),e),e=Iv(t,e,s,n,r);break e}else for($n=ai(e.stateNode.containerInfo.firstChild),Un=e,mt=!0,Cs=null,n=N_(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(za(),s===r){e=Er(t,e,n);break e}bn(t,e,s,n)}e=e.child}return e;case 5:return L_(e),t===null&&Jg(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Gg(s,r)?o=null:i!==null&&Gg(s,i)&&(e.flags|=32),aC(t,e),bn(t,e,o,n),e.child;case 6:return t===null&&Jg(e),null;case 13:return cC(t,e,n);case 4:return Ux(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ba(e,null,s,n):bn(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ws(s,r),Pv(t,e,s,r,n);case 7:return bn(t,e,e.pendingProps,n),e.child;case 8:return bn(t,e,e.pendingProps.children,n),e.child;case 12:return bn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,dt(Lh,s._currentValue),s._currentValue=o,i!==null)if(Rs(i.value,o)){if(i.children===r.children&&!An.current){e=Er(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=vr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Zg(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Zg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,aa(e,n),r=fs(r),s=s(r),e.flags|=1,bn(t,e,s,n),e.child;case 14:return s=e.type,r=ws(s,e.pendingProps),r=ws(s.type,r),Tv(t,e,s,r,n);case 15:return iC(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ws(s,r),th(t,e),e.tag=1,Nn(s)?(t=!0,Nh(e)):t=!1,aa(e,n),nC(e,s,r),tm(e,s,r,n),rm(null,e,s,!0,t,n);case 19:return uC(t,e,n);case 22:return oC(t,e,n)}throw Error(ce(156,e.tag))};function EC(t,e){return Zk(t,e)}function k8(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(t,e,n,s){return new k8(t,e,n,s)}function sb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _8(t){if(typeof t=="function")return sb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sx)return 11;if(t===kx)return 14}return 2}function di(t,e){var n=t.alternate;return n===null?(n=cs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rh(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")sb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bo:return Qi(n.children,r,i,e);case wx:o=8,r|=8;break;case Cg:return t=cs(12,n,e,r|2),t.elementType=Cg,t.lanes=i,t;case Eg:return t=cs(13,n,e,r),t.elementType=Eg,t.lanes=i,t;case Pg:return t=cs(19,n,e,r),t.elementType=Pg,t.lanes=i,t;case Lk:return Uf(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ok:o=10;break e;case Dk:o=9;break e;case Sx:o=11;break e;case kx:o=14;break e;case Wr:o=16,s=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=cs(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function Qi(t,e,n,s){return t=cs(7,t,s,e),t.lanes=n,t}function Uf(t,e,n,s){return t=cs(22,t,s,e),t.elementType=Lk,t.lanes=n,t.stateNode={isHidden:!1},t}function cp(t,e,n){return t=cs(6,t,null,e),t.lanes=n,t}function up(t,e,n){return e=cs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function C8(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H0(0),this.expirationTimes=H0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H0(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function rb(t,e,n,s,r,i,o,a,l){return t=new C8(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=cs(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$x(i),t}function E8(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zo,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function PC(t){if(!t)return mi;t=t._reactInternals;e:{if(vo(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(Nn(n))return P_(t,n,e)}return e}function TC(t,e,n,s,r,i,o,a,l){return t=rb(n,s,!0,t,r,i,o,a,l),t.context=PC(null),n=t.current,s=yn(),r=ui(n),i=vr(s,r),i.callback=e??null,li(n,i,r),t.current.lanes=r,yu(t,r,s),On(t,s),t}function Wf(t,e,n,s){var r=e.current,i=yn(),o=ui(r);return n=PC(n),e.context===null?e.context=n:e.pendingContext=n,e=vr(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=li(r,e,o),t!==null&&(Is(t,r,o,i),Jd(t,r,o)),o}function Yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ib(t,e){Bv(t,e),(t=t.alternate)&&Bv(t,e)}function P8(){return null}var MC=typeof reportError=="function"?reportError:function(t){console.error(t)};function ob(t){this._internalRoot=t}Hf.prototype.render=ob.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));Wf(t,e,null,null)};Hf.prototype.unmount=ob.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;lo(function(){Wf(null,t,null,null)}),e[_r]=null}};function Hf(t){this._internalRoot=t}Hf.prototype.unstable_scheduleHydration=function(t){if(t){var e=o_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vr.length&&e!==0&&e<Vr[n].priority;n++);Vr.splice(n,0,t),n===0&&l_(t)}};function ab(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $v(){}function T8(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=Yh(o);i.call(c)}}var o=TC(e,s,t,0,null,!1,!1,"",$v);return t._reactRootContainer=o,t[_r]=o.current,Wc(t.nodeType===8?t.parentNode:t),lo(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=Yh(l);a.call(c)}}var l=rb(t,0,!1,null,null,!1,!1,"",$v);return t._reactRootContainer=l,t[_r]=l.current,Wc(t.nodeType===8?t.parentNode:t),lo(function(){Wf(e,l,n,s)}),l}function Yf(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Yh(o);a.call(l)}}Wf(e,o,t,r)}else o=T8(n,e,t,r,s);return Yh(o)}r_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=tc(e.pendingLanes);n!==0&&(Ex(e,n|1),On(e,Pt()),!(Ge&6)&&(Wa=Pt()+500,Si()))}break;case 13:lo(function(){var s=Cr(t,1);if(s!==null){var r=yn();Is(s,t,1,r)}}),ib(t,1)}};Px=function(t){if(t.tag===13){var e=Cr(t,134217728);if(e!==null){var n=yn();Is(e,t,134217728,n)}ib(t,134217728)}};i_=function(t){if(t.tag===13){var e=ui(t),n=Cr(t,e);if(n!==null){var s=yn();Is(n,t,e,s)}ib(t,e)}};o_=function(){return tt};a_=function(t,e){var n=tt;try{return tt=t,e()}finally{tt=n}};jg=function(t,e,n){switch(e){case"input":if(Ig(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Lf(s);if(!r)throw Error(ce(90));Fk(s),Ig(s,r)}}}break;case"textarea":Bk(t,n);break;case"select":e=n.value,e!=null&&sa(t,!!n.multiple,e,!1)}};Gk=eb;Kk=lo;var M8={usingClientEntryPoint:!1,Events:[wu,Ho,Lf,Vk,Yk,eb]},Il={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I8={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qk(t),t===null?null:t.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||P8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{Af=ld.inject(I8),Xs=ld}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M8;qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ab(e))throw Error(ce(200));return E8(t,e,null,n)};qn.createRoot=function(t,e){if(!ab(t))throw Error(ce(299));var n=!1,s="",r=MC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=rb(t,1,!1,null,null,n,!1,s,r),t[_r]=e.current,Wc(t.nodeType===8?t.parentNode:t),new ob(e)};qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=Qk(e),t=t===null?null:t.stateNode,t};qn.flushSync=function(t){return lo(t)};qn.hydrate=function(t,e,n){if(!Vf(e))throw Error(ce(200));return Yf(null,t,e,!0,n)};qn.hydrateRoot=function(t,e,n){if(!ab(t))throw Error(ce(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=MC;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=TC(e,null,t,1,n??null,r,!1,i,o),t[_r]=e.current,Wc(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Hf(e)};qn.render=function(t,e,n){if(!Vf(e))throw Error(ce(200));return Yf(null,t,e,!1,n)};qn.unmountComponentAtNode=function(t){if(!Vf(t))throw Error(ce(40));return t._reactRootContainer?(lo(function(){Yf(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1};qn.unstable_batchedUpdates=eb;qn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Vf(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return Yf(t,e,n,!1,s)};qn.version="18.3.1-next-f1338f8080-20240426";function IC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IC)}catch(t){console.error(t)}}IC(),Ik.exports=qn;var wo=Ik.exports;const R8=bk(wo);var Uv=wo;kg.createRoot=Uv.createRoot,kg.hydrateRoot=Uv.hydrateRoot;class lb{constructor(e,n=3,s=3e4){ie(this,"baseURL");ie(this,"timeout");ie(this,"maxRetries");this.baseURL=e.replace(/\/$/,""),this.maxRetries=n,this.timeout=s}async do(e){const n=Date.now();let s=null;for(let r=1;r<=this.maxRetries;r++)try{return{...await this.doRequest(e),duration:Date.now()-n}}catch(i){if(s=i,this.isNonceError(i))throw i;if(r<this.maxRetries){const o=r*1e3;await this.delay(o)}}throw new Error(`Request failed after ${this.maxRetries} attempts: ${s==null?void 0:s.message}`)}async doRequest(e){const n=`${this.baseURL}${e.path}`,s={"Content-Type":"application/json",Accept:"application/json, */*",...e.headers},r={method:e.method,headers:s,signal:AbortSignal.timeout(this.timeout)};e.body&&e.method!=="GET"?r.body=JSON.stringify(e.body):e.method==="GET"&&(r.body=void 0);const i=await fetch(n,r);let o;const a=i.headers.get("content-type");if(a!=null&&a.includes("application/json"))try{o=await i.json()}catch{o=await i.text()}else o=await i.text();if(i.status>=400)throw new Error(`HTTP ${i.status}: ${JSON.stringify(o)}`);return{statusCode:i.status,body:o,headers:i.headers}}isNonceError(e){const n=(e==null?void 0:e.message)||"";return n.toLowerCase().includes("nonce")||n.includes("InvalidNonce")||n.includes("NonceError")}delay(e){return new Promise(n=>setTimeout(n,e))}async get(e,n){return this.do({method:"GET",path:e,headers:n})}async post(e,n,s){return this.do({method:"POST",path:e,body:n,headers:s})}async put(e,n,s){return this.do({method:"PUT",path:e,body:n,headers:s})}async delete(e,n){return this.do({method:"DELETE",path:e,headers:n})}getBaseURL(){return this.baseURL}setTimeout(e){this.timeout=e}getTimeout(){return this.timeout}}const ca=1e8;function bt(t){const e=typeof t=="string"?parseFloat(t):t;if(isNaN(e))throw new Error(`Invalid value for satoshi conversion: ${t}`);if(e<0)throw new Error(`Negative values not allowed for satoshi conversion: ${t}`);return BigInt(Math.floor(e*ca)).toString()}function Ce(t){const e=BigInt(t);return Number(e)/ca}function RC(t){if(t<0)throw new Error(`Negative values not allowed: ${t}`);return Math.floor(t*ca)}function Wv(t){try{return BigInt(t)>=0n}catch{return!1}}function A8(t){return t.map(bt)}function N8(t){return t.map(Ce)}function Hv(t){return`0x${(typeof t=="string"?parseInt(t,10):t).toString(16)}`}let Rl={instance:null,module:null},O8=null;async function D8(){try{if(window.Go)console.log("wasm_exec.js already loaded");else{console.log("Loading wasm_exec.js...");const a=["/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.21.0/misc/wasm/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.20.0/misc/wasm/wasm_exec.js","https://unpkg.com/@go-wasm/wasm_exec@latest/wasm_exec.js"];let l=!1,c=null;for(const u of a)try{console.log(`Trying to load wasm_exec.js from: ${u}`),await new Promise((d,h)=>{const p=document.createElement("script");p.src=u,p.async=!0,p.onload=()=>{console.log(`Successfully loaded wasm_exec.js from: ${u}`),d()},p.onerror=()=>{h(new Error(`Failed to load from ${u}`))},document.head.appendChild(p)}),l=!0;break}catch(d){console.warn(`Failed to load from ${u}:`,d==null?void 0:d.message),c=d,document.head.querySelectorAll(`script[src="${u}"]`).forEach(p=>p.remove())}if(!l)throw new Error(`Failed to load wasm_exec.js from all sources. Last error: ${(c==null?void 0:c.message)||"Unknown error"}. Please ensure wasm_exec.js is available. You can download it from: https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.js`);console.log("wasm_exec.js loaded successfully")}const t=window.Go;if(!t)throw new Error("Go runtime not available. Make sure wasm_exec.js is loaded.");console.log("Go runtime available");const e=new t;O8=e,console.log("Go instance created");const n="/morm_signer.wasm";console.log("Loading WASM from:",n);let s;try{const a=await fetch(n);if(console.log("WASM fetch response:",{status:a.status,statusText:a.statusText,ok:a.ok,url:a.url}),!a.ok){const l=await a.text().catch(()=>"Unable to read error response");throw new Error(`Failed to load WASM from ${n}: ${a.status} ${a.statusText}. Make sure the morm_signer.wasm file is available in the public directory.`)}s=await a.arrayBuffer(),console.log("WASM file loaded successfully, size:",s.byteLength,"bytes")}catch(a){throw console.error("WASM fetch failed:",a),new Error(`Failed to fetch WASM file: ${(a==null?void 0:a.message)||a}. The file should be accessible at ${window.location.origin}${n}`)}console.log("Instantiating WASM module...");let r;try{r=await WebAssembly.instantiate(s,e.importObject),console.log("WASM module instantiated successfully")}catch(a){throw console.error("Failed to instantiate WASM:",a),new Error(`Failed to instantiate WASM module: ${(a==null?void 0:a.message)||a}. The WASM file may be corrupted or incompatible.`)}Rl.instance=r.instance,Rl.module=r.module,console.log("Running Go program..."),console.log("Window object before Go run:",Object.keys(window).filter(a=>typeof window[a]=="function"&&(a.startsWith("morm")||a.startsWith("derive")||a.startsWith("generate")||a==="Go")));try{e.run(Rl.instance),console.log("Go program started (run() completed)")}catch(a){throw console.error("Failed to run Go program:",a),new Error(`Failed to run Go program: ${(a==null?void 0:a.message)||a}. The WASM module may not be compatible with the current Go runtime.`)}console.log("Waiting for Go initialization and function exports...");const i=10;let o=[];for(let a=1;a<=i;a++){const l=Math.min(a*200,2e3);await new Promise(u=>setTimeout(u,l));const c=Object.keys(window).filter(u=>typeof window[u]=="function");if(o=c.filter(u=>u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u.startsWith("verify")||u.startsWith("map")||u.startsWith("validate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"),console.log(`Attempt ${a}/${i}:`,{waitTime:`${l}ms`,allWindowFunctions:c.length,exportedFunctions:o,sampleWindowKeys:c.slice(0,20)}),o.length>0){console.log(" Go functions found!",o);break}a===i&&(console.warn(" No expected functions found. All window functions:",c.sort()),console.warn(" Check if functions are exported with different names or if there are Go runtime errors"))}if(o.length===0){const a=[],l=Object.keys(window);if(console.error("Debugging info:",{totalWindowKeys:l.length,allFunctions:l.filter(c=>typeof window[c]=="function"),hasGo:typeof window.Go=="function",wasmInstance:Rl.instance!==null,wasmModule:Rl.module!==null}),typeof window.InitWASMSigner=="function"){console.log("Found InitWASMSigner function, calling it...");try{window.InitWASMSigner(),await new Promise(u=>setTimeout(u,500));const c=Object.keys(window).filter(u=>typeof window[u]=="function"&&(u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"));c.length>0&&(console.log(" Functions found after InitWASMSigner!",c),o=c)}catch(c){console.error("Failed to call InitWASMSigner:",c)}}if(o.length===0)throw new Error(`Go functions not exported after initialization.

ROOT CAUSE: The Go main() function in main_wasm.go does not call InitWASMSigner(), which is required to export functions via js.Global().Set().

SOLUTION: The Go code needs to be fixed. In main_wasm.go, the main() function should call:
  InitWASMSigner(CreateTestnetDomain()) // or appropriate domain

Current status:
- WASM file loaded: 
- Go runtime loaded: ${typeof window.Go=="function"?"":""}
- Go program run: 
- Functions exported: 

Check the browser console for detailed debugging information.`)}return console.log("WASM module loaded and initialized successfully"),!0}catch(t){throw console.error("Failed to load WASM module:",t),new Error((t==null?void 0:t.message)||`Failed to load WASM module: ${String(t)}`)}}class L8{constructor(){ie(this,"isInitialized",!1);ie(this,"wasmLoaded",!1)}async initialize(){try{return this.wasmLoaded=await D8(),this.isInitialized=this.wasmLoaded,this.wasmLoaded}catch(e){throw console.error("Failed to initialize MormSigner:",e),new Error((e==null?void 0:e.message)||"Failed to initialize WASM module")}}isReady(){return this.isInitialized&&this.wasmLoaded&&typeof window.mormGenerateEthereumKeypair=="function"&&typeof window.GenerateSingleSignature=="function"&&typeof window.GenerateMultisignSignatures=="function"&&typeof window.GetSupportedSignatureTypes=="function"&&typeof window.IsSignatureTypeSupported=="function"}async generateAddress(e,n=0){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=window.deriveAddress(e,n);return typeof s=="string"?{success:!0,address:s,index:n,mnemonic:e.substring(0,20)+"..."}:s&&s.error?{success:!1,error:s.error}:{success:!1,error:"Failed to derive address"}}catch(s){return console.error("Failed to generate address:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async generateMnemonic(e=12){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.generateMnemonic(e);return typeof n=="string"?{success:!0,mnemonic:n}:n&&n.error?{success:!1,error:n.error}:{success:!1,error:"Failed to generate mnemonic"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async generateKeypair(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const e=window.mormGenerateEthereumKeypair();return e.error?{success:!1,error:e.error}:{success:!0,privateKey:e.privateKey,address:e.address}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async signMessage(e,n,s={}){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=(s.useEIP712,"ECDSA_LEGACY"),i=window.generateSignature(r,e,n);return typeof i=="string"?{success:!0,signature:i,message:n,options:s}:i&&i.error?{success:!1,error:i.error}:{success:!1,error:"Failed to generate signature"}}catch(r){return console.error("Failed to sign message:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async signDeposit(e,n,s,r={}){const i={...r,depositMode:!0,walletAddress:n,amount:s},o=JSON.stringify({action:"deposit",owner:n,amount:s,nonce:r.nonce||Date.now(),deadline:r.deadline||Date.now()+36e5}),a=await this.signMessage(e,o,i);return{success:a.success,signature:a.signature,message:a.message,address:n,options:a.options,error:a.error}}async signEIP712(e,n,s={}){const r={...s,useEIP712:!0};return this.signMessage(e,n,r)}async prepareAgentSign(e){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.mormPrepareAgentSign(e.owner,e.agent,e.expiresInDays,e.permissions,e.nonce);return n&&n.error?{success:!1,error:n.error}:{success:!0,typedData:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async signAgentApproval(e,n){const s=await this.prepareAgentSign(n);if(!s.success||!s.typedData)return s;const r=JSON.stringify({action:"agent::approve",wallet:n.owner,agent:n.agent,agentName:n.agentName||"",expiresInDays:n.expiresInDays,permissions:n.permissions,nonce:n.nonce,deadline:Date.now()+n.expiresInDays*24*60*60*1e3}),i=await this.signMessage(e,r,{useEIP712:!0});return i.success?{success:!0,typedData:s.typedData,signature:i.signature}:{success:!1,error:i.error}}async verifySignature(e,n,s){if(!this.isReady())throw new Error("MormSigner not initialized");try{const r=window.verifySignature(e,n,s);return typeof r=="boolean"?r:!1}catch(r){return console.error("Failed to verify signature:",r),!1}}mapAlgorithm(e){if(!this.isReady())return"ECDSA_LEGACY";try{return window.mapAlgorithm(e)}catch(n){return console.error("Failed to map algorithm:",n),"ECDSA_LEGACY"}}validateNonce(e,n){if(!this.isReady())return!1;try{return window.validateNonce(e,n)}catch(s){return console.error("Failed to validate nonce:",s),!1}}getStatus(){return{initialized:this.isInitialized,wasmLoaded:this.wasmLoaded,ready:this.isReady()}}async generateSingleSignature(e,n,s){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateSingleSignature(e,n,s);return r.error?{success:!1,error:r.error}:{success:!0,signature:r.signature}}catch(r){return console.error("Failed to generate single signature:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async generateMultisignSignatures(e,n,s=!1){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateMultisignSignatures(e,n,s);if(r.error)return{success:!1,error:r.error};let i=null;if(r.tx)try{i=JSON.parse(r.tx)}catch(o){console.warn("Failed to parse updated transaction JSON:",o)}return{success:!0,tx:i,txJSON:r.tx}}catch(r){return console.error("Failed to generate multisign signatures:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}getSupportedSignatureTypes(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{return{success:!0,types:window.GetSupportedSignatureTypes()}}catch(e){return console.error("Failed to get supported signature types:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}isSignatureTypeSupported(e){if(!this.isReady())return!1;try{return window.IsSignatureTypeSupported(e)}catch(n){return console.error("Failed to check signature type support:",n),!1}}}const Ae=new L8,AC="6.16.0";async function cb(t){const e=Object.keys(t);return(await Promise.all(e.map(s=>Promise.resolve(t[s])))).reduce((s,r,i)=>(s[e[i]]=r,s),{})}function Wn(t,e,n){for(let s in e){let r=e[s];Object.defineProperty(t,s,{enumerable:!0,value:r,writable:!1})}}function Qo(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Qo(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let s="0x";for(let r=0;r<t.length;r++)s+=n[t[r]>>4],s+=n[t[r]&15];return s}if(typeof t=="object"&&typeof t.toJSON=="function")return Qo(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(s=>`${Qo(s,e)}: ${Qo(t[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function j8(t,e,n){let s=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Qo(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Qo(a))}}i.push(`code=${e}`),i.push(`version=${AC}`),i.length&&(t+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(t);break;default:r=new Error(t)}return Wn(r,{code:e}),n&&Object.assign(r,n),r.shortMessage==null&&Wn(r,{shortMessage:s}),r}function Ye(t,e,n,s){if(!t)throw j8(e,n,s)}function Z(t,e,n,s){Ye(t,e,"INVALID_ARGUMENT",{argument:n,value:s})}const F8=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function NC(t){Ye(F8.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function Gf(t,e,n){if(n==null&&(n=""),t!==e){let s=n,r="new";n&&(s+=".",r+=" "+n),Ye(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function OC(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const s=new Uint8Array((t.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(t.substring(r,r+2),16),r+=2;return s}Z(!1,"invalid BytesLike value",e||"value",t)}function be(t,e){return OC(t,e,!1)}function Fo(t,e){return OC(t,e,!0)}function er(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function Kf(t){return er(t,!0)||t instanceof Uint8Array}const Vv="0123456789abcdef";function pe(t){const e=be(t);let n="0x";for(let s=0;s<e.length;s++){const r=e[s];n+=Vv[(r&240)>>4]+Vv[r&15]}return n}function It(t){return"0x"+t.map(e=>pe(e).substring(2)).join("")}function Cc(t){return er(t,!0)?(t.length-2)/2:be(t).length}function ub(t,e,n){const s=be(t);return n>s.length&&Ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),pe(s.slice(e,n))}function z8(t,e,n){const s=be(t);Ye(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),r.set(s,e-s.length),pe(r)}function xi(t,e){return z8(t,e)}const qf=BigInt(0),Li=BigInt(1),Jo=9007199254740991;function B8(t,e){let n=ut(t,"value");const s=BigInt(Hn(e,"width")),r=Li<<s-Li;if(n<qf){n=-n,Ye(n<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Li<<s)-Li;return(~n&i)+Li}else Ye(n<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function $8(t,e){const n=db(t,"value"),s=BigInt(Hn(e,"bits"));return n&(Li<<s)-Li}function ut(t,e){switch(typeof t){case"bigint":return t;case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-Jo&&t<=Jo,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Z(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Z(!1,"invalid BigNumberish value",e||"value",t)}function db(t,e){const n=ut(t,e);return Ye(n>=qf,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const Yv="0123456789abcdef";function DC(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=Yv[n>>4],e+=Yv[n&15];return BigInt(e)}return ut(t)}function Hn(t,e){switch(typeof t){case"bigint":return Z(t>=-Jo&&t<=Jo,"overflow",e||"value",t),Number(t);case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-Jo&&t<=Jo,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Hn(BigInt(t),e)}catch(n){Z(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Z(!1,"invalid numeric value",e||"value",t)}function Ha(t,e){const n=db(t,"value");let s=n.toString(16);{const r=Hn(e,"width");if(r===0&&n===qf)return"0x";for(Ye(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});s.length<r*2;)s="0"+s}return"0x"+s}function Mt(t,e){const n=db(t,"value");if(n===qf)return new Uint8Array(0);let s=n.toString(16);s.length%2&&(s="0"+s);const r=new Uint8Array(s.length/2);for(let i=0;i<r.length;i++){const o=i*2;r[i]=parseInt(s.substring(o,o+2),16)}return r}function U8(t){let e=pe(Kf(t)?t:Mt(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Gh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let cd=null;function W8(t){if(cd==null){cd={};for(let n=0;n<Gh.length;n++)cd[Gh[n]]=BigInt(n)}const e=cd[t];return Z(e!=null,"invalid base58 value","letter",t),e}const H8=BigInt(0),mm=BigInt(58);function V8(t){const e=be(t);let n=DC(e),s="";for(;n;)s=Gh[Number(n%mm)]+s,n/=mm;for(let r=0;r<e.length&&!e[r];r++)s=Gh[0]+s;return s}function Y8(t){let e=H8;for(let n=0;n<t.length;n++)e*=mm,e+=W8(t[n]);return e}function Ji(t,e){Z(typeof t=="string","invalid string value","str",t),e!=null&&(NC(e),t=t.normalize(e));let n=[];for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(r&63|128);else if((r&64512)==55296){s++;const i=t.charCodeAt(s);Z(s<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((r&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(r&63|128)}return new Uint8Array(n)}function G8(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Gv(t,e,n){let s=0;for(let r=0;r<n;r++)s=s*256+t[e+r];return s}function Kv(t,e,n,s){const r=[];for(;n<e+1+s;){const i=LC(t,n);r.push(i.result),n+=i.consumed,Ye(n<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:t,length:s,offset:e})}return{consumed:1+s,result:r}}function LC(t,e){Ye(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=s=>{Ye(s<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:s})};if(t[e]>=248){const s=t[e]-247;n(e+1+s);const r=Gv(t,e+1,s);return n(e+1+s+r),Kv(t,e,e+1+s,s+r)}else if(t[e]>=192){const s=t[e]-192;return n(e+1+s),Kv(t,e,e+1,s)}else if(t[e]>=184){const s=t[e]-183;n(e+1+s);const r=Gv(t,e+1,s);n(e+1+s+r);const i=pe(t.slice(e+1+s,e+1+s+r));return{consumed:1+s+r,result:i}}else if(t[e]>=128){const s=t[e]-128;n(e+1+s);const r=pe(t.slice(e+1,e+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:G8(t[e])}}function ku(t){const e=be(t,"data"),n=LC(e,0);return Z(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function qv(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function jC(t){if(Array.isArray(t)){let s=[];if(t.forEach(function(i){s=s.concat(jC(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=qv(s.length);return r.unshift(247+r.length),r.concat(s)}const e=Array.prototype.slice.call(be(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=qv(e.length);return n.unshift(183+n.length),n.concat(e)}const Xv="0123456789abcdef";function wr(t){let e="0x";for(const n of jC(t))e+=Xv[n>>4],e+=Xv[n&15];return e}function K8(t){const e=be(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=pe(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}function Bn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function hb(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function FC(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Bn(t.outputLen),Bn(t.blockLen)}function Va(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zC(t,e){hb(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const dp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const BC=t=>t instanceof Uint8Array,ih=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),oh=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ls=(t,e)=>t<<32-e|t>>>e,q8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!q8)throw new Error("Non little-endian hardware is not supported");const X8=async()=>{};async function Qv(t,e,n){let s=Date.now();for(let r=0;r<t;r++){n(r);const i=Date.now()-s;i>=0&&i<e||(await X8(),s+=i)}}function Q8(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ya(t){if(typeof t=="string"&&(t=Q8(t)),!BC(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function J8(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!BC(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}class fb{clone(){return this._cloneInto()}}const Z8={}.toString;function $C(t,e){if(e!==void 0&&Z8.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function Xf(t){const e=s=>t().update(Ya(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function eM(t=32){if(dp&&typeof dp.getRandomValues=="function")return dp.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class UC extends fb{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,FC(e);const s=Ya(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Va(this),this.iHash.update(e),this}digestInto(e){Va(this),hb(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Qf=(t,e,n)=>new UC(t,e).update(n).digest();Qf.create=(t,e)=>new UC(t,e);function tM(t,e,n,s){FC(t);const r=$C({dkLen:32,asyncTick:10},s),{c:i,dkLen:o,asyncTick:a}=r;if(Bn(i),Bn(o),Bn(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Ya(e),c=Ya(n),u=new Uint8Array(o),d=Qf.create(t,l),h=d._cloneInto().update(c);return{c:i,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:h}}function nM(t,e,n,s,r){return t.destroy(),e.destroy(),s&&s.destroy(),r.fill(0),n}function pb(t,e,n,s){const{c:r,dkLen:i,DK:o,PRF:a,PRFSalt:l}=tM(t,e,n,s);let c;const u=new Uint8Array(4),d=oh(u),h=new Uint8Array(a.outputLen);for(let p=1,m=0;m<i;p++,m+=a.outputLen){const x=o.subarray(m,m+a.outputLen);d.setInt32(0,p,!1),(c=l._cloneInto(c)).update(u).digestInto(h),x.set(h.subarray(0,x.length));for(let w=1;w<r;w++){a._cloneInto(c).update(h).digestInto(h);for(let g=0;g<x.length;g++)x[g]^=h[g]}}return nM(a,l,o,c,h)}function sM(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),l=s?4:0,c=s?0:4;t.setUint32(e+l,o,s),t.setUint32(e+c,a,s)}class gb extends fb{constructor(e,n,s,r){super(),this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=oh(this.buffer)}update(e){Va(this);const{view:n,buffer:s,blockLen:r}=this;e=Ya(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const l=oh(e);for(;r<=i-o;o+=r)this.process(l,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Va(this),zC(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let d=o;d<r;d++)n[d]=0;sM(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=oh(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%n&&e.buffer.set(s),e}}const rM=(t,e,n)=>t&e^~t&n,iM=(t,e,n)=>t&e^t&n^e&n,oM=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ar=new Uint32Array(64);class aM extends gb{constructor(){super(64,32,8,!1),this.A=Rr[0]|0,this.B=Rr[1]|0,this.C=Rr[2]|0,this.D=Rr[3]|0,this.E=Rr[4]|0,this.F=Rr[5]|0,this.G=Rr[6]|0,this.H=Rr[7]|0}get(){const{A:e,B:n,C:s,D:r,E:i,F:o,G:a,H:l}=this;return[e,n,s,r,i,o,a,l]}set(e,n,s,r,i,o,a,l){this.A=e|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ar[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ar[d-15],p=Ar[d-2],m=Ls(h,7)^Ls(h,18)^h>>>3,x=Ls(p,17)^Ls(p,19)^p>>>10;Ar[d]=x+Ar[d-7]+m+Ar[d-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const h=Ls(a,6)^Ls(a,11)^Ls(a,25),p=u+h+rM(a,l,c)+oM[d]+Ar[d]|0,x=(Ls(s,2)^Ls(s,13)^Ls(s,22))+iM(s,r,i)|0;u=c,c=l,l=a,a=o+p|0,o=i,i=r,r=s,s=p+x|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(s,r,i,o,a,l,c,u)}roundClean(){Ar.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const hl=Xf(()=>new aM),ud=BigInt(2**32-1),xm=BigInt(32);function WC(t,e=!1){return e?{h:Number(t&ud),l:Number(t>>xm&ud)}:{h:Number(t>>xm&ud)|0,l:Number(t&ud)|0}}function HC(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let r=0;r<t.length;r++){const{h:i,l:o}=WC(t[r],e);[n[r],s[r]]=[i,o]}return[n,s]}const lM=(t,e)=>BigInt(t>>>0)<<xm|BigInt(e>>>0),cM=(t,e,n)=>t>>>n,uM=(t,e,n)=>t<<32-n|e>>>n,dM=(t,e,n)=>t>>>n|e<<32-n,hM=(t,e,n)=>t<<32-n|e>>>n,fM=(t,e,n)=>t<<64-n|e>>>n-32,pM=(t,e,n)=>t>>>n-32|e<<64-n,gM=(t,e)=>e,mM=(t,e)=>t,VC=(t,e,n)=>t<<n|e>>>32-n,YC=(t,e,n)=>e<<n|t>>>32-n,GC=(t,e,n)=>e<<n-32|t>>>64-n,KC=(t,e,n)=>t<<n-32|e>>>64-n;function xM(t,e,n,s){const r=(e>>>0)+(s>>>0);return{h:t+n+(r/2**32|0)|0,l:r|0}}const bM=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),yM=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,vM=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),wM=(t,e,n,s,r)=>e+n+s+r+(t/2**32|0)|0,SM=(t,e,n,s,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(r>>>0),kM=(t,e,n,s,r,i)=>e+n+s+r+i+(t/2**32|0)|0,De={fromBig:WC,split:HC,toBig:lM,shrSH:cM,shrSL:uM,rotrSH:dM,rotrSL:hM,rotrBH:fM,rotrBL:pM,rotr32H:gM,rotr32L:mM,rotlSH:VC,rotlSL:YC,rotlBH:GC,rotlBL:KC,add:xM,add3L:bM,add3H:yM,add4L:vM,add4H:wM,add5H:kM,add5L:SM},[_M,CM]=De.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Nr=new Uint32Array(80),Or=new Uint32Array(80);class EM extends gb{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:h,Gh:p,Gl:m,Hh:x,Hl:w}=this;return[e,n,s,r,i,o,a,l,c,u,d,h,p,m,x,w]}set(e,n,s,r,i,o,a,l,c,u,d,h,p,m,x,w){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=p|0,this.Gl=m|0,this.Hh=x|0,this.Hl=w|0}process(e,n){for(let b=0;b<16;b++,n+=4)Nr[b]=e.getUint32(n),Or[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const v=Nr[b-15]|0,S=Or[b-15]|0,_=De.rotrSH(v,S,1)^De.rotrSH(v,S,8)^De.shrSH(v,S,7),E=De.rotrSL(v,S,1)^De.rotrSL(v,S,8)^De.shrSL(v,S,7),T=Nr[b-2]|0,P=Or[b-2]|0,C=De.rotrSH(T,P,19)^De.rotrBH(T,P,61)^De.shrSH(T,P,6),R=De.rotrSL(T,P,19)^De.rotrBL(T,P,61)^De.shrSL(T,P,6),A=De.add4L(E,R,Or[b-7],Or[b-16]),$=De.add4H(A,_,C,Nr[b-7],Nr[b-16]);Nr[b]=$|0,Or[b]=A|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:h,Fh:p,Fl:m,Gh:x,Gl:w,Hh:g,Hl:y}=this;for(let b=0;b<80;b++){const v=De.rotrSH(d,h,14)^De.rotrSH(d,h,18)^De.rotrBH(d,h,41),S=De.rotrSL(d,h,14)^De.rotrSL(d,h,18)^De.rotrBL(d,h,41),_=d&p^~d&x,E=h&m^~h&w,T=De.add5L(y,S,E,CM[b],Or[b]),P=De.add5H(T,g,v,_,_M[b],Nr[b]),C=T|0,R=De.rotrSH(s,r,28)^De.rotrBH(s,r,34)^De.rotrBH(s,r,39),A=De.rotrSL(s,r,28)^De.rotrBL(s,r,34)^De.rotrBL(s,r,39),$=s&i^s&a^i&a,H=r&o^r&l^o&l;g=x|0,y=w|0,x=p|0,w=m|0,p=d|0,m=h|0,{h:d,l:h}=De.add(c|0,u|0,P|0,C|0),c=a|0,u=l|0,a=i|0,l=o|0,i=s|0,o=r|0;const F=De.add3L(C,A,H);s=De.add3H(F,P,R,$),r=F|0}({h:s,l:r}=De.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=De.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=De.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=De.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:d,l:h}=De.add(this.Eh|0,this.El|0,d|0,h|0),{h:p,l:m}=De.add(this.Fh|0,this.Fl|0,p|0,m|0),{h:x,l:w}=De.add(this.Gh|0,this.Gl|0,x|0,w|0),{h:g,l:y}=De.add(this.Hh|0,this.Hl|0,g|0,y|0),this.set(s,r,i,o,a,l,c,u,d,h,p,m,x,w,g,y)}roundClean(){Nr.fill(0),Or.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const mb=Xf(()=>new EM);function PM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Jv=PM(),Zv=Jv.crypto||Jv.msCrypto;function TM(t){switch(t){case"sha256":return hl.create();case"sha512":return mb.create()}Z(!1,"invalid hashing algorithm name","algorithm",t)}function MM(t,e){const n={sha256:hl,sha512:mb}[t];return Z(n!=null,"invalid hmac algorithm","algorithm",t),Qf.create(n,e)}function IM(t,e,n,s,r){const i={sha256:hl,sha512:mb}[r];return Z(i!=null,"invalid pbkdf2 algorithm","algorithm",r),pb(i,t,e,{c:n,dkLen:s})}function RM(t){Ye(Zv!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),Z(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return Zv.getRandomValues(e),e}let qC=!1;const XC=function(t,e,n){return MM(t,e).update(n).digest()};let QC=XC;function fl(t,e,n){const s=be(e,"key"),r=be(n,"data");return pe(QC(t,s,r))}fl._=XC;fl.lock=function(){qC=!0};fl.register=function(t){if(qC)throw new Error("computeHmac is locked");QC=t};Object.freeze(fl);const[JC,ZC,e5]=[[],[],[]],AM=BigInt(0),Al=BigInt(1),NM=BigInt(2),OM=BigInt(7),DM=BigInt(256),LM=BigInt(113);for(let t=0,e=Al,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],JC.push(2*(5*s+n)),ZC.push((t+1)*(t+2)/2%64);let r=AM;for(let i=0;i<7;i++)e=(e<<Al^(e>>OM)*LM)%DM,e&NM&&(r^=Al<<(Al<<BigInt(i))-Al);e5.push(r)}const[jM,FM]=HC(e5,!0),ew=(t,e,n)=>n>32?GC(t,e,n):VC(t,e,n),tw=(t,e,n)=>n>32?KC(t,e,n):YC(t,e,n);function zM(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],d=ew(c,u,1)^n[a],h=tw(c,u,1)^n[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=h}let r=t[2],i=t[3];for(let o=0;o<24;o++){const a=ZC[o],l=ew(r,i,a),c=tw(r,i,a),u=JC[o];r=t[u],i=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=jM[s],t[1]^=FM[s]}n.fill(0)}class xb extends fb{constructor(e,n,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Bn(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ih(this.state)}keccak(){zM(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Va(this);const{blockLen:n,state:s}=this;e=Ya(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:r}=this;e[s]^=n,n&128&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Va(this,!1),hb(e),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(n.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bn(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(zC(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new xb(n,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const BM=(t,e,n)=>Xf(()=>new xb(e,t,n)),$M=BM(1,136,256/8);let t5=!1;const n5=function(t){return $M(t)};let s5=n5;function $t(t){const e=be(t,"data");return pe(s5(e))}$t._=n5;$t.lock=function(){t5=!0};$t.register=function(t){if(t5)throw new TypeError("keccak256 is locked");s5=t};Object.freeze($t);const UM=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),r5=Uint8Array.from({length:16},(t,e)=>e),WM=r5.map(t=>(9*t+5)%16);let bb=[r5],yb=[WM];for(let t=0;t<4;t++)for(let e of[bb,yb])e.push(e[t].map(n=>UM[n]));const i5=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),HM=bb.map((t,e)=>t.map(n=>i5[e][n])),VM=yb.map((t,e)=>t.map(n=>i5[e][n])),YM=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),GM=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),dd=(t,e)=>t<<e|t>>>32-e;function nw(t,e,n,s){return t===0?e^n^s:t===1?e&n|~e&s:t===2?(e|~n)^s:t===3?e&s|n&~s:e^(n|~s)}const hd=new Uint32Array(16);class KM extends gb{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:s,h3:r,h4:i}=this;return[e,n,s,r,i]}set(e,n,s,r,i){this.h0=e|0,this.h1=n|0,this.h2=s|0,this.h3=r|0,this.h4=i|0}process(e,n){for(let p=0;p<16;p++,n+=4)hd[p]=e.getUint32(n,!0);let s=this.h0|0,r=s,i=this.h1|0,o=i,a=this.h2|0,l=a,c=this.h3|0,u=c,d=this.h4|0,h=d;for(let p=0;p<5;p++){const m=4-p,x=YM[p],w=GM[p],g=bb[p],y=yb[p],b=HM[p],v=VM[p];for(let S=0;S<16;S++){const _=dd(s+nw(p,i,a,c)+hd[g[S]]+x,b[S])+d|0;s=d,d=c,c=dd(a,10)|0,a=i,i=_}for(let S=0;S<16;S++){const _=dd(r+nw(m,o,l,u)+hd[y[S]]+w,v[S])+h|0;r=h,h=u,u=dd(l,10)|0,l=o,o=_}}this.set(this.h1+a+u|0,this.h2+c+h|0,this.h3+d+r|0,this.h4+s+o|0,this.h0+i+l|0)}roundClean(){hd.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const qM=Xf(()=>new KM);let o5=!1;const a5=function(t){return qM(t)};let l5=a5;function pl(t){const e=be(t,"data");return pe(l5(e))}pl._=a5;pl.lock=function(){o5=!0};pl.register=function(t){if(o5)throw new TypeError("ripemd160 is locked");l5=t};Object.freeze(pl);let c5=!1;const u5=function(t,e,n,s,r){return IM(t,e,n,s,r)};let d5=u5;function _u(t,e,n,s,r){const i=be(t,"password"),o=be(e,"salt");return pe(d5(i,o,n,s,r))}_u._=u5;_u.lock=function(){c5=!0};_u.register=function(t){if(c5)throw new Error("pbkdf2 is locked");d5=t};Object.freeze(_u);let h5=!1;const f5=function(t){return new Uint8Array(RM(t))};let p5=f5;function Sr(t){return p5(t)}Sr._=f5;Sr.lock=function(){h5=!0};Sr.register=function(t){if(h5)throw new Error("randomBytes is locked");p5=t};Object.freeze(Sr);const qe=(t,e)=>t<<e|t>>>32-e;function sw(t,e,n,s,r,i){let o=t[e++]^n[s++],a=t[e++]^n[s++],l=t[e++]^n[s++],c=t[e++]^n[s++],u=t[e++]^n[s++],d=t[e++]^n[s++],h=t[e++]^n[s++],p=t[e++]^n[s++],m=t[e++]^n[s++],x=t[e++]^n[s++],w=t[e++]^n[s++],g=t[e++]^n[s++],y=t[e++]^n[s++],b=t[e++]^n[s++],v=t[e++]^n[s++],S=t[e++]^n[s++],_=o,E=a,T=l,P=c,C=u,R=d,A=h,$=p,H=m,F=x,N=w,z=g,L=y,B=b,M=v,G=S;for(let j=0;j<8;j+=2)C^=qe(_+L|0,7),H^=qe(C+_|0,9),L^=qe(H+C|0,13),_^=qe(L+H|0,18),F^=qe(R+E|0,7),B^=qe(F+R|0,9),E^=qe(B+F|0,13),R^=qe(E+B|0,18),M^=qe(N+A|0,7),T^=qe(M+N|0,9),A^=qe(T+M|0,13),N^=qe(A+T|0,18),P^=qe(G+z|0,7),$^=qe(P+G|0,9),z^=qe($+P|0,13),G^=qe(z+$|0,18),E^=qe(_+P|0,7),T^=qe(E+_|0,9),P^=qe(T+E|0,13),_^=qe(P+T|0,18),A^=qe(R+C|0,7),$^=qe(A+R|0,9),C^=qe($+A|0,13),R^=qe(C+$|0,18),z^=qe(N+F|0,7),H^=qe(z+N|0,9),F^=qe(H+z|0,13),N^=qe(F+H|0,18),L^=qe(G+M|0,7),B^=qe(L+G|0,9),M^=qe(B+L|0,13),G^=qe(M+B|0,18);r[i++]=o+_|0,r[i++]=a+E|0,r[i++]=l+T|0,r[i++]=c+P|0,r[i++]=u+C|0,r[i++]=d+R|0,r[i++]=h+A|0,r[i++]=p+$|0,r[i++]=m+H|0,r[i++]=x+F|0,r[i++]=w+N|0,r[i++]=g+z|0,r[i++]=y+L|0,r[i++]=b+B|0,r[i++]=v+M|0,r[i++]=S+G|0}function ua(t,e,n,s,r){let i=s+0,o=s+16*r;for(let a=0;a<16;a++)n[o+a]=t[e+(2*r-1)*16+a];for(let a=0;a<r;a++,i+=16,e+=16)sw(n,o,t,e,n,i),a>0&&(o+=16),sw(n,i,t,e+=16,n,o)}function g5(t,e,n){const s=$C({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:r,r:i,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=s;if(Bn(r),Bn(i),Bn(o),Bn(a),Bn(l),Bn(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const d=128*i,h=d/4;if(r<=1||r&r-1||r>=2**(d/8)||r>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=d*(r+o);if(p>c)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${c} (maxmem)`);const m=pb(hl,t,e,{c:1,dkLen:d*o}),x=ih(m),w=ih(new Uint8Array(d*r)),g=ih(new Uint8Array(d));let y=()=>{};if(u){const b=2*r*o,v=Math.max(Math.floor(b/1e4),1);let S=0;y=()=>{S++,u&&(!(S%v)||S===b)&&u(S/b)}}return{N:r,r:i,p:o,dkLen:a,blockSize32:h,V:w,B32:x,B:m,tmp:g,blockMixCb:y,asyncTick:l}}function m5(t,e,n,s,r){const i=pb(hl,t,n,{c:1,dkLen:e});return n.fill(0),s.fill(0),r.fill(0),i}function XM(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:h}=g5(t,e,n);for(let p=0;p<i;p++){const m=a*p;for(let x=0;x<a;x++)l[x]=c[m+x];for(let x=0,w=0;x<s-1;x++)ua(l,w,l,w+=a,r),h();ua(l,(s-1)*a,c,m,r),h();for(let x=0;x<s;x++){const w=c[m+a-16]%s;for(let g=0;g<a;g++)d[g]=c[m+g]^l[w*a+g];ua(d,0,c,m,r),h()}}return m5(t,o,u,l,d)}async function QM(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:h,asyncTick:p}=g5(t,e,n);for(let m=0;m<i;m++){const x=a*m;for(let g=0;g<a;g++)l[g]=c[x+g];let w=0;await Qv(s-1,p,()=>{ua(l,w,l,w+=a,r),h()}),ua(l,(s-1)*a,c,x,r),h(),await Qv(s,p,()=>{const g=c[x+a-16]%s;for(let y=0;y<a;y++)d[y]=c[x+y]^l[g*a+y];ua(d,0,c,x,r),h()})}return m5(t,o,u,l,d)}let x5=!1,b5=!1;const y5=async function(t,e,n,s,r,i,o){return await QM(t,e,{N:n,r:s,p:r,dkLen:i,onProgress:o})},v5=function(t,e,n,s,r,i){return XM(t,e,{N:n,r:s,p:r,dkLen:i})};let w5=y5,S5=v5;async function Cu(t,e,n,s,r,i,o){const a=be(t,"passwd"),l=be(e,"salt");return pe(await w5(a,l,n,s,r,i,o))}Cu._=y5;Cu.lock=function(){b5=!0};Cu.register=function(t){if(b5)throw new Error("scrypt is locked");w5=t};Object.freeze(Cu);function Eu(t,e,n,s,r,i){const o=be(t,"passwd"),a=be(e,"salt");return pe(S5(o,a,n,s,r,i))}Eu._=v5;Eu.lock=function(){x5=!0};Eu.register=function(t){if(x5)throw new Error("scryptSync is locked");S5=t};Object.freeze(Eu);const k5=function(t){return TM("sha256").update(t).digest()};let _5=k5,C5=!1;function gs(t){const e=be(t,"data");return pe(_5(e))}gs._=k5;gs.lock=function(){C5=!0};gs.register=function(t){if(C5)throw new Error("sha256 is locked");_5=t};Object.freeze(gs);Object.freeze(gs);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const E5=BigInt(0),Jf=BigInt(1),JM=BigInt(2),Zf=t=>t instanceof Uint8Array,ZM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ga(t){if(!Zf(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=ZM[t[n]];return e}function P5(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function vb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Ka(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let s=0;s<n.length;s++){const r=s*2,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[s]=o}return n}function Zi(t){return vb(Ga(t))}function wb(t){if(!Zf(t))throw new Error("Uint8Array expected");return vb(Ga(Uint8Array.from(t).reverse()))}function qa(t,e){return Ka(t.toString(16).padStart(e*2,"0"))}function Sb(t,e){return qa(t,e).reverse()}function e6(t){return Ka(P5(t))}function Ss(t,e,n){let s;if(typeof e=="string")try{s=Ka(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Zf(e))s=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const r=s.length;if(typeof n=="number"&&r!==n)throw new Error(`${t} expected ${n} bytes, got ${r}`);return s}function Jc(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!Zf(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}function t6(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function n6(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function s6(t){let e;for(e=0;t>E5;t>>=Jf,e+=1);return e}function r6(t,e){return t>>BigInt(e)&Jf}const i6=(t,e,n)=>t|(n?Jf:E5)<<BigInt(e),kb=t=>(JM<<BigInt(t-1))-Jf,hp=t=>new Uint8Array(t),rw=t=>Uint8Array.from(t);function T5(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let s=hp(t),r=hp(t),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...d)=>n(r,s,...d),l=(d=hp())=>{r=a(rw([0]),d),s=a(),d.length!==0&&(r=a(rw([1]),d),s=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){s=a();const p=s.slice();h.push(p),d+=s.length}return Jc(...h)};return(d,h)=>{o(),l(d);let p;for(;!(p=h(c()));)l();return o(),p}}const o6={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Pu(t,e,n={}){const s=(r,i,o)=>{const a=o6[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=t[r];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(e))s(r,i,!1);for(const[r,i]of Object.entries(n))s(r,i,!0);return t}const a6=Object.freeze(Object.defineProperty({__proto__:null,bitGet:r6,bitLen:s6,bitMask:kb,bitSet:i6,bytesToHex:Ga,bytesToNumberBE:Zi,bytesToNumberLE:wb,concatBytes:Jc,createHmacDrbg:T5,ensureBytes:Ss,equalBytes:t6,hexToBytes:Ka,hexToNumber:vb,numberToBytesBE:qa,numberToBytesLE:Sb,numberToHexUnpadded:P5,numberToVarBytesBE:e6,utf8ToBytes:n6,validateObject:Pu},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ut=BigInt(0),Tt=BigInt(1),ji=BigInt(2),l6=BigInt(3),bm=BigInt(4),iw=BigInt(5),ow=BigInt(8);BigInt(9);BigInt(16);function Pn(t,e){const n=t%e;return n>=Ut?n:e+n}function c6(t,e,n){if(n<=Ut||e<Ut)throw new Error("Expected power/modulo > 0");if(n===Tt)return Ut;let s=Tt;for(;e>Ut;)e&Tt&&(s=s*t%n),t=t*t%n,e>>=Tt;return s}function Qn(t,e,n){let s=t;for(;e-- >Ut;)s*=s,s%=n;return s}function ym(t,e){if(t===Ut||e<=Ut)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Pn(t,e),s=e,r=Ut,i=Tt;for(;n!==Ut;){const a=s/n,l=s%n,c=r-i*a;s=n,n=l,r=i,i=c}if(s!==Tt)throw new Error("invert: does not exist");return Pn(r,e)}function u6(t){const e=(t-Tt)/ji;let n,s,r;for(n=t-Tt,s=0;n%ji===Ut;n/=ji,s++);for(r=ji;r<t&&c6(r,e,t)!==t-Tt;r++);if(s===1){const o=(t+Tt)/bm;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+Tt)/ji;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=s,u=a.pow(a.mul(a.ONE,r),n),d=a.pow(l,i),h=a.pow(l,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let p=1;for(let x=a.sqr(h);p<c&&!a.eql(x,a.ONE);p++)x=a.sqr(x);const m=a.pow(u,Tt<<BigInt(c-p-1));u=a.sqr(m),d=a.mul(d,m),h=a.mul(h,u),c=p}return d}}function d6(t){if(t%bm===l6){const e=(t+Tt)/bm;return function(s,r){const i=s.pow(r,e);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%ow===iw){const e=(t-iw)/ow;return function(s,r){const i=s.mul(r,ji),o=s.pow(i,e),a=s.mul(r,o),l=s.mul(s.mul(a,ji),o),c=s.mul(a,s.sub(l,s.ONE));if(!s.eql(s.sqr(c),r))throw new Error("Cannot find square root");return c}}return u6(t)}const h6=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function f6(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=h6.reduce((s,r)=>(s[r]="function",s),e);return Pu(t,n)}function p6(t,e,n){if(n<Ut)throw new Error("Expected power > 0");if(n===Ut)return t.ONE;if(n===Tt)return e;let s=t.ONE,r=e;for(;n>Ut;)n&Tt&&(s=t.mul(s,r)),r=t.sqr(r),n>>=Tt;return s}function g6(t,e){const n=new Array(e.length),s=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),r=t.inv(s);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),r),n}function M5(t,e){const n=e!==void 0?e:t.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function m6(t,e,n=!1,s={}){if(t<=Ut)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:r,nByteLength:i}=M5(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=d6(t),a=Object.freeze({ORDER:t,BITS:r,BYTES:i,MASK:kb(r),ZERO:Ut,ONE:Tt,create:l=>Pn(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Ut<=l&&l<t},is0:l=>l===Ut,isOdd:l=>(l&Tt)===Tt,neg:l=>Pn(-l,t),eql:(l,c)=>l===c,sqr:l=>Pn(l*l,t),add:(l,c)=>Pn(l+c,t),sub:(l,c)=>Pn(l-c,t),mul:(l,c)=>Pn(l*c,t),pow:(l,c)=>p6(a,l,c),div:(l,c)=>Pn(l*ym(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>ym(l,t),sqrt:s.sqrt||(l=>o(a,l)),invertBatch:l=>g6(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?Sb(l,i):qa(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return n?wb(l):Zi(l)}});return Object.freeze(a)}function I5(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function R5(t){const e=I5(t);return e+Math.ceil(e/2)}function x6(t,e,n=!1){const s=t.length,r=I5(e),i=R5(e);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=n?Zi(t):wb(t),a=Pn(o,e-Tt)+Tt;return n?Sb(a,r):qa(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const b6=BigInt(0),fp=BigInt(1);function y6(t,e){const n=(r,i)=>{const o=i.negate();return r?o:i},s=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(r,i){let o=t.ZERO,a=r;for(;i>b6;)i&fp&&(o=o.add(a)),a=a.double(),i>>=fp;return o},precomputeWindow(r,i){const{windows:o,windowSize:a}=s(i),l=[];let c=r,u=c;for(let d=0;d<o;d++){u=c,l.push(u);for(let h=1;h<a;h++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(r,i,o){const{windows:a,windowSize:l}=s(r);let c=t.ZERO,u=t.BASE;const d=BigInt(2**r-1),h=2**r,p=BigInt(r);for(let m=0;m<a;m++){const x=m*l;let w=Number(o&d);o>>=p,w>l&&(w-=h,o+=fp);const g=x,y=x+Math.abs(w)-1,b=m%2!==0,v=w<0;w===0?u=u.add(n(b,i[g])):c=c.add(n(v,i[y]))}return{p:c,f:u}},wNAFCached(r,i,o,a){const l=r._WINDOW_SIZE||1;let c=i.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&i.set(r,a(c))),this.wNAF(l,c,o)}}}function A5(t){return f6(t.Fp),Pu(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...M5(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function v6(t){const e=A5(t);Pu(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:r}=e;if(n){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:w6,hexToBytes:S6}=a6,Ui={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Ui;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],s=t.subarray(2,n+2);if(!n||s.length!==n)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:w6(s),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Ui,n=typeof t=="string"?S6(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let s=n.length;if(s<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=Ui._parseInt(n.subarray(2)),{d:o,l:a}=Ui._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},s=e(n(t.s)),r=e(n(t.r)),i=s.length/2,o=r.length/2,a=n(i),l=n(o);return`30${n(o+i+4)}02${l}${r}02${a}${s}`}},pr=BigInt(0),is=BigInt(1);BigInt(2);const aw=BigInt(3);BigInt(4);function k6(t){const e=v6(t),{Fp:n}=e,s=e.toBytes||((m,x,w)=>{const g=x.toAffine();return Jc(Uint8Array.from([4]),n.toBytes(g.x),n.toBytes(g.y))}),r=e.fromBytes||(m=>{const x=m.subarray(1),w=n.fromBytes(x.subarray(0,n.BYTES)),g=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:w,y:g}});function i(m){const{a:x,b:w}=e,g=n.sqr(m),y=n.mul(g,m);return n.add(n.add(y,n.mul(m,x)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&pr<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(m){const{allowedPrivateKeyLengths:x,nByteLength:w,wrapPrivateKey:g,n:y}=e;if(x&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=Ga(m)),typeof m!="string"||!x.includes(m.length))throw new Error("Invalid key");m=m.padStart(w*2,"0")}let b;try{b=typeof m=="bigint"?m:Zi(Ss("private key",m,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof m}`)}return g&&(b=Pn(b,y)),a(b),b}const c=new Map;function u(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(x,w,g){if(this.px=x,this.py=w,this.pz=g,x==null||!n.isValid(x))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(g==null||!n.isValid(g))throw new Error("z required")}static fromAffine(x){const{x:w,y:g}=x||{};if(!x||!n.isValid(w)||!n.isValid(g))throw new Error("invalid affine point");if(x instanceof d)throw new Error("projective point not allowed");const y=b=>n.eql(b,n.ZERO);return y(w)&&y(g)?d.ZERO:new d(w,g,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const w=n.invertBatch(x.map(g=>g.pz));return x.map((g,y)=>g.toAffine(w[y])).map(d.fromAffine)}static fromHex(x){const w=d.fromAffine(r(Ss("pointHex",x)));return w.assertValidity(),w}static fromPrivateKey(x){return d.BASE.multiply(l(x))}_setWindowSize(x){this._WINDOW_SIZE=x,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:w}=this.toAffine();if(!n.isValid(x)||!n.isValid(w))throw new Error("bad point: x or y not FE");const g=n.sqr(w),y=i(x);if(!n.eql(g,y))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(n.isOdd)return!n.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){u(x);const{px:w,py:g,pz:y}=this,{px:b,py:v,pz:S}=x,_=n.eql(n.mul(w,S),n.mul(b,y)),E=n.eql(n.mul(g,S),n.mul(v,y));return _&&E}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:x,b:w}=e,g=n.mul(w,aw),{px:y,py:b,pz:v}=this;let S=n.ZERO,_=n.ZERO,E=n.ZERO,T=n.mul(y,y),P=n.mul(b,b),C=n.mul(v,v),R=n.mul(y,b);return R=n.add(R,R),E=n.mul(y,v),E=n.add(E,E),S=n.mul(x,E),_=n.mul(g,C),_=n.add(S,_),S=n.sub(P,_),_=n.add(P,_),_=n.mul(S,_),S=n.mul(R,S),E=n.mul(g,E),C=n.mul(x,C),R=n.sub(T,C),R=n.mul(x,R),R=n.add(R,E),E=n.add(T,T),T=n.add(E,T),T=n.add(T,C),T=n.mul(T,R),_=n.add(_,T),C=n.mul(b,v),C=n.add(C,C),T=n.mul(C,R),S=n.sub(S,T),E=n.mul(C,P),E=n.add(E,E),E=n.add(E,E),new d(S,_,E)}add(x){u(x);const{px:w,py:g,pz:y}=this,{px:b,py:v,pz:S}=x;let _=n.ZERO,E=n.ZERO,T=n.ZERO;const P=e.a,C=n.mul(e.b,aw);let R=n.mul(w,b),A=n.mul(g,v),$=n.mul(y,S),H=n.add(w,g),F=n.add(b,v);H=n.mul(H,F),F=n.add(R,A),H=n.sub(H,F),F=n.add(w,y);let N=n.add(b,S);return F=n.mul(F,N),N=n.add(R,$),F=n.sub(F,N),N=n.add(g,y),_=n.add(v,S),N=n.mul(N,_),_=n.add(A,$),N=n.sub(N,_),T=n.mul(P,F),_=n.mul(C,$),T=n.add(_,T),_=n.sub(A,T),T=n.add(A,T),E=n.mul(_,T),A=n.add(R,R),A=n.add(A,R),$=n.mul(P,$),F=n.mul(C,F),A=n.add(A,$),$=n.sub(R,$),$=n.mul(P,$),F=n.add(F,$),R=n.mul(A,F),E=n.add(E,R),R=n.mul(N,F),_=n.mul(H,_),_=n.sub(_,R),R=n.mul(H,A),T=n.mul(N,T),T=n.add(T,R),new d(_,E,T)}subtract(x){return this.add(x.negate())}is0(){return this.equals(d.ZERO)}wNAF(x){return p.wNAFCached(this,c,x,w=>{const g=n.invertBatch(w.map(y=>y.pz));return w.map((y,b)=>y.toAffine(g[b])).map(d.fromAffine)})}multiplyUnsafe(x){const w=d.ZERO;if(x===pr)return w;if(a(x),x===is)return this;const{endo:g}=e;if(!g)return p.unsafeLadder(this,x);let{k1neg:y,k1:b,k2neg:v,k2:S}=g.splitScalar(x),_=w,E=w,T=this;for(;b>pr||S>pr;)b&is&&(_=_.add(T)),S&is&&(E=E.add(T)),T=T.double(),b>>=is,S>>=is;return y&&(_=_.negate()),v&&(E=E.negate()),E=new d(n.mul(E.px,g.beta),E.py,E.pz),_.add(E)}multiply(x){a(x);let w=x,g,y;const{endo:b}=e;if(b){const{k1neg:v,k1:S,k2neg:_,k2:E}=b.splitScalar(w);let{p:T,f:P}=this.wNAF(S),{p:C,f:R}=this.wNAF(E);T=p.constTimeNegate(v,T),C=p.constTimeNegate(_,C),C=new d(n.mul(C.px,b.beta),C.py,C.pz),g=T.add(C),y=P.add(R)}else{const{p:v,f:S}=this.wNAF(w);g=v,y=S}return d.normalizeZ([g,y])[0]}multiplyAndAddUnsafe(x,w,g){const y=d.BASE,b=(S,_)=>_===pr||_===is||!S.equals(y)?S.multiplyUnsafe(_):S.multiply(_),v=b(this,w).add(b(x,g));return v.is0()?void 0:v}toAffine(x){const{px:w,py:g,pz:y}=this,b=this.is0();x==null&&(x=b?n.ONE:n.inv(y));const v=n.mul(w,x),S=n.mul(g,x),_=n.mul(y,x);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:v,y:S}}isTorsionFree(){const{h:x,isTorsionFree:w}=e;if(x===is)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:w}=e;return x===is?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return this.assertValidity(),s(d,this,x)}toHex(x=!0){return Ga(this.toRawBytes(x))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,p=y6(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function _6(t){const e=A5(t);return Pu(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function C6(t){const e=_6(t),{Fp:n,n:s}=e,r=n.BYTES+1,i=2*n.BYTES+1;function o(F){return pr<F&&F<n.ORDER}function a(F){return Pn(F,s)}function l(F){return ym(F,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=k6({...e,toBytes(F,N,z){const L=N.toAffine(),B=n.toBytes(L.x),M=Jc;return z?M(Uint8Array.from([N.hasEvenY()?2:3]),B):M(Uint8Array.from([4]),B,n.toBytes(L.y))},fromBytes(F){const N=F.length,z=F[0],L=F.subarray(1);if(N===r&&(z===2||z===3)){const B=Zi(L);if(!o(B))throw new Error("Point is not on curve");const M=d(B);let G=n.sqrt(M);const j=(G&is)===is;return(z&1)===1!==j&&(G=n.neg(G)),{x:B,y:G}}else if(N===i&&z===4){const B=n.fromBytes(L.subarray(0,n.BYTES)),M=n.fromBytes(L.subarray(n.BYTES,2*n.BYTES));return{x:B,y:M}}else throw new Error(`Point of length ${N} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),p=F=>Ga(qa(F,e.nByteLength));function m(F){const N=s>>is;return F>N}function x(F){return m(F)?a(-F):F}const w=(F,N,z)=>Zi(F.slice(N,z));class g{constructor(N,z,L){this.r=N,this.s=z,this.recovery=L,this.assertValidity()}static fromCompact(N){const z=e.nByteLength;return N=Ss("compactSignature",N,z*2),new g(w(N,0,z),w(N,z,2*z))}static fromDER(N){const{r:z,s:L}=Ui.toSig(Ss("DER",N));return new g(z,L)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new g(this.r,this.s,N)}recoverPublicKey(N){const{r:z,s:L,recovery:B}=this,M=E(Ss("msgHash",N));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const G=B===2||B===3?z+e.n:z;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const j=B&1?"03":"02",I=c.fromHex(j+p(G)),U=l(G),q=a(-M*U),X=a(L*U),K=c.BASE.multiplyAndAddUnsafe(I,q,X);if(!K)throw new Error("point at infinify");return K.assertValidity(),K}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ka(this.toDERHex())}toDERHex(){return Ui.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ka(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const y={isValidPrivateKey(F){try{return u(F),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const F=R5(e.n);return x6(e.randomBytes(F),e.n)},precompute(F=8,N=c.BASE){return N._setWindowSize(F),N.multiply(BigInt(3)),N}};function b(F,N=!0){return c.fromPrivateKey(F).toRawBytes(N)}function v(F){const N=F instanceof Uint8Array,z=typeof F=="string",L=(N||z)&&F.length;return N?L===r||L===i:z?L===2*r||L===2*i:F instanceof c}function S(F,N,z=!0){if(v(F))throw new Error("first arg must be private key");if(!v(N))throw new Error("second arg must be public key");return c.fromHex(N).multiply(u(F)).toRawBytes(z)}const _=e.bits2int||function(F){const N=Zi(F),z=F.length*8-e.nBitLength;return z>0?N>>BigInt(z):N},E=e.bits2int_modN||function(F){return a(_(F))},T=kb(e.nBitLength);function P(F){if(typeof F!="bigint")throw new Error("bigint expected");if(!(pr<=F&&F<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return qa(F,e.nByteLength)}function C(F,N,z=R){if(["recovered","canonical"].some(se=>se in z))throw new Error("sign() legacy options not supported");const{hash:L,randomBytes:B}=e;let{lowS:M,prehash:G,extraEntropy:j}=z;M==null&&(M=!0),F=Ss("msgHash",F),G&&(F=Ss("prehashed msgHash",L(F)));const I=E(F),U=u(N),q=[P(U),P(I)];if(j!=null){const se=j===!0?B(n.BYTES):j;q.push(Ss("extraEntropy",se))}const X=Jc(...q),K=I;function ee(se){const ge=_(se);if(!h(ge))return;const Ue=l(ge),Pe=c.BASE.multiply(ge).toAffine(),ke=a(Pe.x);if(ke===pr)return;const Te=a(Ue*a(K+ke*U));if(Te===pr)return;let ft=(Pe.x===ke?0:2)|Number(Pe.y&is),D=Te;return M&&m(Te)&&(D=x(Te),ft^=1),new g(ke,D,ft)}return{seed:X,k2sig:ee}}const R={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};function $(F,N,z=R){const{seed:L,k2sig:B}=C(F,N,z),M=e;return T5(M.hash.outputLen,M.nByteLength,M.hmac)(L,B)}c.BASE._setWindowSize(8);function H(F,N,z,L=A){var Pe;const B=F;if(N=Ss("msgHash",N),z=Ss("publicKey",z),"strict"in L)throw new Error("options.strict was renamed to lowS");const{lowS:M,prehash:G}=L;let j,I;try{if(typeof B=="string"||B instanceof Uint8Array)try{j=g.fromDER(B)}catch(ke){if(!(ke instanceof Ui.Err))throw ke;j=g.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){const{r:ke,s:Te}=B;j=new g(ke,Te)}else throw new Error("PARSE");I=c.fromHex(z)}catch(ke){if(ke.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&j.hasHighS())return!1;G&&(N=e.hash(N));const{r:U,s:q}=j,X=E(N),K=l(q),ee=a(X*K),se=a(U*K),ge=(Pe=c.BASE.multiplyAndAddUnsafe(I,ee,se))==null?void 0:Pe.toAffine();return ge?a(ge.x)===U:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:S,sign:$,verify:H,ProjectivePoint:c,Signature:g,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function E6(t){return{hash:t,hmac:(e,...n)=>Qf(t,e,J8(...n)),randomBytes:eM}}function P6(t,e){const n=s=>C6({...t,...E6(s)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const N5=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),lw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),T6=BigInt(1),vm=BigInt(2),cw=(t,e)=>(t+e/vm)/e;function M6(t){const e=N5,n=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,d=Qn(u,n,e)*u%e,h=Qn(d,n,e)*u%e,p=Qn(h,vm,e)*c%e,m=Qn(p,r,e)*p%e,x=Qn(m,i,e)*m%e,w=Qn(x,a,e)*x%e,g=Qn(w,l,e)*w%e,y=Qn(g,a,e)*x%e,b=Qn(y,n,e)*u%e,v=Qn(b,o,e)*m%e,S=Qn(v,s,e)*c%e,_=Qn(S,vm,e);if(!wm.eql(wm.sqr(_),t))throw new Error("Cannot find square root");return _}const wm=m6(N5,void 0,void 0,{sqrt:M6}),Br=P6({a:BigInt(0),b:BigInt(7),Fp:wm,n:lw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=lw,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-T6*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=cw(i*t,e),l=cw(-s*t,e);let c=Pn(t-a*n-l*r,e),u=Pn(-a*s-l*i,e);const d=c>o,h=u>o;if(d&&(c=e-c),h&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:h,k2:u}}}},hl);BigInt(0);Br.ProjectivePoint;const O5="0x0000000000000000000000000000000000000000",uw="0x0000000000000000000000000000000000000000000000000000000000000000",I6=`Ethereum Signed Message:
`,dw=BigInt(0),hw=BigInt(1),Sm=BigInt(2),fw=BigInt(27),pw=BigInt(28),fd=BigInt(35),D5=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),R6=D5/Sm,A6=Symbol.for("nodejs.util.inspect.custom"),_i={};function pp(t){return xi(Mt(t),32)}var xa,Ys,ba,qr;const ss=class ss{constructor(e,n,s,r){Be(this,xa);Be(this,Ys);Be(this,ba);Be(this,qr);Gf(e,_i,"Signature"),xe(this,xa,n),xe(this,Ys,s),xe(this,ba,r),xe(this,qr,null)}get r(){return _e(this,xa)}set r(e){Z(Cc(e)===32,"invalid r","value",e),xe(this,xa,pe(e))}get s(){return Z(parseInt(_e(this,Ys).substring(0,3))<8,"non-canonical s; use ._s","s",_e(this,Ys)),_e(this,Ys)}set s(e){Z(Cc(e)===32,"invalid s","value",e),xe(this,Ys,pe(e))}get _s(){return _e(this,Ys)}isValid(){return BigInt(_e(this,Ys))<=R6}get v(){return _e(this,ba)}set v(e){const n=Hn(e,"value");Z(n===27||n===28,"invalid v","v",e),xe(this,ba,n)}get networkV(){return _e(this,qr)}get legacyChainId(){const e=this.networkV;return e==null?null:ss.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=be(this.s);return this.yParity&&(e[0]|=128),pe(e)}get compactSerialized(){return It([this.r,this.yParityAndS])}get serialized(){return It([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=D5-BigInt(this._s),n=55-this.v,s=new ss(_i,this.r,pp(e),n);return this.networkV&&xe(s,qr,this.networkV),s}clone(){const e=new ss(_i,this.r,this._s,this.v);return this.networkV&&xe(e,qr,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[A6](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=ut(e,"v");return n==fw||n==pw?dw:(Z(n>=fd,"invalid EIP-155 v","v",e),(n-fd)/Sm)}static getChainIdV(e,n){return ut(e)*Sm+BigInt(35+n-27)}static getNormalizedV(e){const n=ut(e);return n===dw||n===fw?27:n===hw||n===pw?28:(Z(n>=fd,"invalid v","v",e),n&hw?27:28)}static from(e){function n(c,u){Z(c,u,"signature",e)}if(e==null)return new ss(_i,uw,uw,27);if(typeof e=="string"){const c=be(e,"signature");if(c.length===64){const u=pe(c.slice(0,32)),d=c.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new ss(_i,u,pe(d),h)}if(c.length===65){const u=pe(c.slice(0,32)),d=pe(c.slice(32,64)),h=ss.getNormalizedV(c[64]);return new ss(_i,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof ss)return e.clone();const s=e.r;n(s!=null,"missing r");const r=pp(s),i=function(c,u){if(c!=null)return pp(c);if(u!=null){n(er(u,32),"invalid yParityAndS");const d=be(u);return d[0]&=127,pe(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(c,u,d){if(c!=null){const h=ut(c);return{networkV:h>=fd?h:void 0,v:ss.getNormalizedV(h)}}if(u!=null)return n(er(u,32),"invalid yParityAndS"),{v:be(u)[0]&128?28:27};if(d!=null){switch(Hn(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new ss(_i,r,i,a);return o&&xe(l,qr,o),n(e.yParity==null||Hn(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};xa=new WeakMap,Ys=new WeakMap,ba=new WeakMap,qr=new WeakMap;let As=ss;var hr;const Fi=class Fi{constructor(e){Be(this,hr);Z(Cc(e)===32,"invalid private key","privateKey","[REDACTED]"),xe(this,hr,pe(e))}get privateKey(){return _e(this,hr)}get publicKey(){return Fi.computePublicKey(_e(this,hr))}get compressedPublicKey(){return Fi.computePublicKey(_e(this,hr),!0)}sign(e){Z(Cc(e)===32,"invalid digest length","digest",e);const n=Br.sign(Fo(e),Fo(_e(this,hr)),{lowS:!0});return As.from({r:Ha(n.r,32),s:Ha(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=Fi.computePublicKey(e);return pe(Br.getSharedSecret(Fo(_e(this,hr)),be(n),!1))}static computePublicKey(e,n){let s=be(e,"key");if(s.length===32){const i=Br.getPublicKey(s,!!n);return pe(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=Br.ProjectivePoint.fromHex(s);return pe(r.toRawBytes(n))}static recoverPublicKey(e,n){Z(Cc(e)===32,"invalid digest length","digest",e);const s=As.from(n);let r=Br.Signature.fromCompact(Fo(It([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(Fo(e));return Z(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,s){const r=Br.ProjectivePoint.fromHex(Fi.computePublicKey(e).substring(2)),i=Br.ProjectivePoint.fromHex(Fi.computePublicKey(n).substring(2));return"0x"+r.add(i).toHex(!!s)}};hr=new WeakMap;let Js=Fi;const N6=BigInt(0),O6=BigInt(36);function gw(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let r=0;r<40;r++)n[r]=e[r].charCodeAt(0);const s=be($t(n));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(s[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const _b={};for(let t=0;t<10;t++)_b[String(t)]=String(t);for(let t=0;t<26;t++)_b[String.fromCharCode(65+t)]=String(10+t);const mw=15;function D6(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(s=>_b[s]).join("");for(;e.length>=mw;){let s=e.substring(0,mw);e=parseInt(s,10)%97+e.substring(s.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const L6=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function j6(t){t=t.toLowerCase();let e=N6;for(let n=0;n<t.length;n++)e=e*O6+L6[t[n]];return e}function ms(t){if(Z(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=gw(t);return Z(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(t.substring(2,4)===D6(t),"bad icap checksum","address",t);let e=j6(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return gw("0x"+e)}Z(!1,"invalid address","address",t)}function F6(t){return t&&typeof t.getAddress=="function"}async function gp(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Ye(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),ms(n)}function Ec(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?ms(t):(Ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),gp(t,e.resolveName(t)));if(F6(t))return gp(t,t.getAddress());if(t&&typeof t.then=="function")return gp(t,t);Z(!1,"unsupported addressable value","target",t)}function mp(t,e){return{address:ms(t),storageKeys:e.map((n,s)=>(Z(er(n,32),"invalid slot",`storageKeys[${s}]`,n),n.toLowerCase()))}}function e0(t){if(Array.isArray(t))return t.map((n,s)=>Array.isArray(n)?(Z(n.length===2,"invalid slot set",`value[${s}]`,n),mp(n[0],n[1])):(Z(n!=null&&typeof n=="object","invalid address-slot set","value",t),mp(n.address,n.storageKeys)));Z(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const s=t[n].reduce((r,i)=>(r[i]=!0,r),{});return mp(n,Object.keys(s).sort())});return e.sort((n,s)=>n.address.localeCompare(s.address)),e}function z6(t){return{address:ms(t.address),nonce:ut(t.nonce!=null?t.nonce:0),chainId:ut(t.chainId!=null?t.chainId:0),signature:As.from(t.signature)}}function Tu(t){let e;return typeof t=="string"?e=Js.computePublicKey(t,!1):e=t.publicKey,ms($t("0x"+e.substring(4)).substring(26))}function B6(t,e){return Tu(Js.recoverPublicKey(t,e))}const Bt=BigInt(0),$6=BigInt(2),U6=BigInt(27),W6=BigInt(28),H6=BigInt(35),V6=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Y6=Symbol.for("nodejs.util.inspect.custom"),xp=4096*32,ah=128;function G6(t){return{blobToKzgCommitment:s=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return be(t.blobToKzgCommitment(pe(s)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return be(t.blobToKzgCommitment(s));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return be(t.blobToKZGCommitment(pe(s)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return be(t.computeBlobProof(pe(s),pe(r)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return be(t.computeBlobKZGProof(pe(s),pe(r)));Z(!1,"unsupported KZG library","kzg",t)}}}function xw(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=gs(e).substring(4),"0x"+n}function gl(t){return t==="0x"?null:ms(t)}function t0(t,e){try{return e0(t)}catch(n){Z(!1,n.message,e,t)}}function K6(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let s=0;s<t.length;s++){const r=t[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);n.push({address:gl(r[1]),nonce:rt(r[2],"nonce"),chainId:rt(r[0],"chainId"),signature:As.from({yParity:So(r[3],"yParity"),r:xi(r[4],32),s:xi(r[5],32)})})}return n}catch(n){Z(!1,n.message,e,t)}}function So(t,e){return t==="0x"?0:Hn(t,e)}function rt(t,e){if(t==="0x")return Bt;const n=ut(t,e);return Z(n<=V6,"value exceeds uint size",e,n),n}function He(t,e){const n=ut(t,"value"),s=Mt(n);return Z(s.length<=32,"value too large",`tx.${e}`,n),s}function n0(t){return e0(t).map(e=>[e.address,e.storageKeys])}function q6(t){return t.map(e=>[He(e.chainId,"chainId"),e.address,He(e.nonce,"nonce"),He(e.signature.yParity,"yParity"),Mt(e.signature.r),Mt(e.signature._s)])}function X6(t,e){Z(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Z(er(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function Q6(t){const e=ku(t);Z(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:So(e[0],"nonce"),gasPrice:rt(e[1],"gasPrice"),gasLimit:rt(e[2],"gasLimit"),to:gl(e[3]),value:rt(e[4],"value"),data:pe(e[5]),chainId:Bt};if(e.length===6)return n;const s=rt(e[6],"v"),r=rt(e[7],"r"),i=rt(e[8],"s");if(r===Bt&&i===Bt)n.chainId=s;else{let o=(s-H6)/$6;o<Bt&&(o=Bt),n.chainId=o,Z(o!==Bt||s===U6||s===W6,"non-canonical legacy v","v",e[6]),n.signature=As.from({r:xi(e[7],32),s:xi(e[8],32),v:s})}return n}function J6(t,e){const n=[He(t.nonce,"nonce"),He(t.gasPrice||0,"gasPrice"),He(t.gasLimit,"gasLimit"),t.to||"0x",He(t.value,"value"),t.data];let s=Bt;if(t.chainId!=Bt)s=ut(t.chainId,"tx.chainId"),Z(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(s=i)}if(!e)return s!==Bt&&(n.push(Mt(s)),n.push("0x"),n.push("0x")),wr(n);let r=BigInt(27+e.yParity);return s!==Bt?r=As.getChainIdV(s,e.v):BigInt(e.v)!==r&&Z(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Mt(r)),n.push(Mt(e.r)),n.push(Mt(e._s)),wr(n)}function s0(t,e){let n;try{if(n=So(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const s=xi(e[1],32),r=xi(e[2],32),i=As.from({r:s,s:r,yParity:n});t.signature=i}function Z6(t){const e=ku(be(t).slice(1));Z(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",pe(t));const n={type:2,chainId:rt(e[0],"chainId"),nonce:So(e[1],"nonce"),maxPriorityFeePerGas:rt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:rt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:rt(e[4],"gasLimit"),to:gl(e[5]),value:rt(e[6],"value"),data:pe(e[7]),accessList:t0(e[8],"accessList")};return e.length===9||s0(n,e.slice(9)),n}function eI(t,e){const n=[He(t.chainId,"chainId"),He(t.nonce,"nonce"),He(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),He(t.maxFeePerGas||0,"maxFeePerGas"),He(t.gasLimit,"gasLimit"),t.to||"0x",He(t.value,"value"),t.data,n0(t.accessList||[])];return e&&(n.push(He(e.yParity,"yParity")),n.push(Mt(e.r)),n.push(Mt(e.s))),It(["0x02",wr(n)])}function tI(t){const e=ku(be(t).slice(1));Z(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",pe(t));const n={type:1,chainId:rt(e[0],"chainId"),nonce:So(e[1],"nonce"),gasPrice:rt(e[2],"gasPrice"),gasLimit:rt(e[3],"gasLimit"),to:gl(e[4]),value:rt(e[5],"value"),data:pe(e[6]),accessList:t0(e[7],"accessList")};return e.length===8||s0(n,e.slice(8)),n}function nI(t,e){const n=[He(t.chainId,"chainId"),He(t.nonce,"nonce"),He(t.gasPrice||0,"gasPrice"),He(t.gasLimit,"gasLimit"),t.to||"0x",He(t.value,"value"),t.data,n0(t.accessList||[])];return e&&(n.push(He(e.yParity,"recoveryParam")),n.push(Mt(e.r)),n.push(Mt(e.s))),It(["0x01",wr(n)])}function sI(t){let e=ku(be(t).slice(1)),n="3",s=null,r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];Z(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),Z(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),Z(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),Z(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",s=Hn(e[1]);const o=e[2],a=e[3],l=e[4];Z(s===1,`unsupported EIP-7594 network format version: ${s}`,"fields[1]",s),Z(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),Z(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),Z(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),Z(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(o.length*ah===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<o.length;c++){const u=[];for(let d=0;d<ah;d++)u.push(l[c*ah+d]);r.push({data:o[c],commitment:a[c],proof:It(u)})}e=e[0]}Z(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",pe(t));const i={type:3,chainId:rt(e[0],"chainId"),nonce:So(e[1],"nonce"),maxPriorityFeePerGas:rt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:rt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:rt(e[4],"gasLimit"),to:gl(e[5]),value:rt(e[6],"value"),data:pe(e[7]),accessList:t0(e[8],"accessList"),maxFeePerBlobGas:rt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:s};r&&(i.blobs=r),Z(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),Z(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<i.blobVersionedHashes.length;o++)Z(er(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||s0(i,e.slice(11)),i}function rI(t,e,n){const s=[He(t.chainId,"chainId"),He(t.nonce,"nonce"),He(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),He(t.maxFeePerGas||0,"maxFeePerGas"),He(t.gasLimit,"gasLimit"),t.to||O5,He(t.value,"value"),t.data,n0(t.accessList||[]),He(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),X6(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(s.push(He(e.yParity,"yParity")),s.push(Mt(e.r)),s.push(Mt(e.s)),n)){if(t.blobWrapperVersion!=null){const r=Mt(t.blobWrapperVersion),i=[];for(const{proof:o}of n){const a=be(o),l=a.length/ah;for(let c=0;c<a.length;c+=l)i.push(a.subarray(c,c+l))}return It(["0x03",wr([s,r,n.map(o=>o.data),n.map(o=>o.commitment),i])])}return It(["0x03",wr([s,n.map(r=>r.data),n.map(r=>r.commitment),n.map(r=>r.proof)])])}return It(["0x03",wr(s)])}function iI(t){const e=ku(be(t).slice(1));Z(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",pe(t));const n={type:4,chainId:rt(e[0],"chainId"),nonce:So(e[1],"nonce"),maxPriorityFeePerGas:rt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:rt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:rt(e[4],"gasLimit"),to:gl(e[5]),value:rt(e[6],"value"),data:pe(e[7]),accessList:t0(e[8],"accessList"),authorizationList:K6(e[9],"authorizationList")};return e.length===10||s0(n,e.slice(10)),n}function oI(t,e){const n=[He(t.chainId,"chainId"),He(t.nonce,"nonce"),He(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),He(t.maxFeePerGas||0,"maxFeePerGas"),He(t.gasLimit,"gasLimit"),t.to||"0x",He(t.value,"value"),t.data,n0(t.accessList||[]),q6(t.authorizationList||[])];return e&&(n.push(He(e.yParity,"yParity")),n.push(Mt(e.r)),n.push(Mt(e.s))),It(["0x04",wr(n)])}var ks,ya,va,wa,Sa,ka,_a,Ca,Ea,Pa,Ta,Ma,Gi,Xr,Gs,Qr,Ia,Ra,Aa,lh;const Hs=class Hs{constructor(){Be(this,Aa);Be(this,ks);Be(this,ya);Be(this,va);Be(this,wa);Be(this,Sa);Be(this,ka);Be(this,_a);Be(this,Ca);Be(this,Ea);Be(this,Pa);Be(this,Ta);Be(this,Ma);Be(this,Gi);Be(this,Xr);Be(this,Gs);Be(this,Qr);Be(this,Ia);Be(this,Ra);xe(this,ks,null),xe(this,ya,null),xe(this,wa,0),xe(this,Sa,Bt),xe(this,ka,null),xe(this,_a,null),xe(this,Ca,null),xe(this,va,"0x"),xe(this,Ea,Bt),xe(this,Pa,Bt),xe(this,Ta,null),xe(this,Ma,null),xe(this,Gi,null),xe(this,Xr,null),xe(this,Gs,null),xe(this,Qr,null),xe(this,Ia,null),xe(this,Ra,null)}get type(){return _e(this,ks)}set type(e){switch(e){case null:xe(this,ks,null);break;case 0:case"legacy":xe(this,ks,0);break;case 1:case"berlin":case"eip-2930":xe(this,ks,1);break;case 2:case"london":case"eip-1559":xe(this,ks,2);break;case 3:case"cancun":case"eip-4844":xe(this,ks,3);break;case 4:case"pectra":case"eip-7702":xe(this,ks,4);break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_e(this,ya);return e==null&&this.type===3?O5:e}set to(e){xe(this,ya,e==null?null:ms(e))}get nonce(){return _e(this,wa)}set nonce(e){xe(this,wa,Hn(e,"value"))}get gasLimit(){return _e(this,Sa)}set gasLimit(e){xe(this,Sa,ut(e))}get gasPrice(){const e=_e(this,ka);return e==null&&(this.type===0||this.type===1)?Bt:e}set gasPrice(e){xe(this,ka,e==null?null:ut(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_e(this,_a);return e??(this.type===2||this.type===3?Bt:null)}set maxPriorityFeePerGas(e){xe(this,_a,e==null?null:ut(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_e(this,Ca);return e??(this.type===2||this.type===3?Bt:null)}set maxFeePerGas(e){xe(this,Ca,e==null?null:ut(e,"maxFeePerGas"))}get data(){return _e(this,va)}set data(e){xe(this,va,pe(e))}get value(){return _e(this,Ea)}set value(e){xe(this,Ea,ut(e,"value"))}get chainId(){return _e(this,Pa)}set chainId(e){xe(this,Pa,ut(e))}get signature(){return _e(this,Ta)||null}set signature(e){xe(this,Ta,e==null?null:As.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const s of n)if(!s.signature.isValid())return!1}return!0}get accessList(){const e=_e(this,Ma)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){xe(this,Ma,e==null?null:e0(e))}get authorizationList(){const e=_e(this,Ia)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){xe(this,Ia,e==null?null:e.map(n=>z6(n)))}get maxFeePerBlobGas(){const e=_e(this,Gi);return e==null&&this.type===3?Bt:e}set maxFeePerBlobGas(e){xe(this,Gi,e==null?null:ut(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_e(this,Xr);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Z(er(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}xe(this,Xr,e)}get blobs(){return _e(this,Qr)==null?null:_e(this,Qr).map(e=>Object.assign({},e))}set blobs(e){if(e==null){xe(this,Qr,null);return}const n=[],s=[];for(let r=0;r<e.length;r++){const i=e[r];if(Kf(i)){Ye(_e(this,Gs),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=be(i);if(Z(o.length<=xp,"blob is too large",`blobs[${r}]`,i),o.length!==xp){const c=new Uint8Array(xp);c.set(o),o=c}const a=_e(this,Gs).blobToKzgCommitment(o),l=pe(_e(this,Gs).computeBlobKzgProof(o,a));n.push({data:pe(o),commitment:pe(a),proof:l}),s.push(xw(1,a))}else{const o=pe(i.data),a=pe(i.commitment),l=pe(i.proof);n.push({data:o,commitment:a,proof:l}),s.push(xw(1,a))}}xe(this,Qr,n),xe(this,Xr,s)}get kzg(){return _e(this,Gs)}set kzg(e){e==null?xe(this,Gs,null):xe(this,Gs,G6(e))}get blobWrapperVersion(){return _e(this,Ra)}set blobWrapperVersion(e){xe(this,Ra,e)}get hash(){return this.signature==null?null:$t(rn(this,Aa,lh).call(this,!0,!1))}get unsignedHash(){return $t(this.unsignedSerialized)}get from(){return this.signature==null?null:B6(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Js.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return rn(this,Aa,lh).call(this,!0,!0)}get unsignedSerialized(){return rn(this,Aa,lh).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=_e(this,Gi)!=null||_e(this,Xr);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Ye(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Ye(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Hs.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[Y6](){return this.toString()}toString(){const e=[],n=r=>{let i=this[r];typeof i=="string"&&(i=JSON.stringify(i)),e.push(`${r}: ${i}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const s=this.authorizationList;if(s){const r=[];for(const i of s){const o=[];o.push(`address: ${JSON.stringify(i.address)}`),i.nonce!=null&&o.push(`nonce: ${i.nonce}`),i.chainId!=null&&o.push(`chainId: ${i.chainId}`),i.signature&&o.push(`signature: ${i.signature.toString()}`),r.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${r.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new Hs;if(typeof e=="string"){const s=be(e);if(s[0]>=127)return Hs.from(Q6(s));switch(s[0]){case 1:return Hs.from(tI(s));case 2:return Hs.from(Z6(s));case 3:return Hs.from(sI(s));case 4:return Hs.from(iI(s))}Ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Hs;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=As.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};ks=new WeakMap,ya=new WeakMap,va=new WeakMap,wa=new WeakMap,Sa=new WeakMap,ka=new WeakMap,_a=new WeakMap,Ca=new WeakMap,Ea=new WeakMap,Pa=new WeakMap,Ta=new WeakMap,Ma=new WeakMap,Gi=new WeakMap,Xr=new WeakMap,Gs=new WeakMap,Qr=new WeakMap,Ia=new WeakMap,Ra=new WeakMap,Aa=new WeakSet,lh=function(e,n){Ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return J6(this,s);case 1:return nI(this,s);case 2:return eI(this,s);case 3:return rI(this,s,n?this.blobs:null);case 4:return oI(this,s)}Ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Kh=Hs;function aI(t){return Z(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),$t(It(["0x05",wr([t.chainId!=null?Mt(t.chainId):"0x",ms(t.address),t.nonce!=null?Mt(t.nonce):"0x"])]))}function Cb(t){return $t(Ji(t))}function lI(t){return typeof t=="string"&&(t=Ji(t)),$t(It([Ji(I6),Ji(String(t.length)),t]))}const L5=new Uint8Array(32);L5.fill(0);const cI=BigInt(-1),j5=BigInt(0),F5=BigInt(1),uI=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function dI(t){const e=be(t),n=e.length%32;return n?It([e,L5.slice(n)]):pe(e)}const hI=Ha(F5,32),fI=Ha(j5,32),bw={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},bp=["name","version","chainId","verifyingContract","salt"];function yw(t){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const pI={name:yw("name"),version:yw("version"),chainId:function(t){const e=ut(t,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):U8(e)},verifyingContract:function(t){try{return ms(t).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=be(t,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",t),pe(e)}};function yp(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",s=parseInt(e[2]);Z(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",t);const r=$8(uI,n?s-1:s),i=n?(r+F5)*cI:j5;return function(o){const a=ut(o,"value");return Z(a>=i&&a<=r,`value out-of-bounds for ${t}`,"value",a),Ha(n?B8(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Z(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(s){const r=be(s);return Z(r.length===n,`invalid length for ${t}`,"value",s),dI(s)}}}switch(t){case"address":return function(e){return xi(ms(e),32)};case"bool":return function(e){return e?hI:fI};case"bytes":return function(e){return $t(e)};case"string":return function(e){return Cb(e)}}return null}function vw(t,e){return`${t}(${e.map(({name:n,type:s})=>s+" "+n).join(",")})`}function pd(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var pu,fr,Na,Mf,z5;const rs=class rs{constructor(e){Be(this,Mf);ie(this,"primaryType");Be(this,pu);Be(this,fr);Be(this,Na);xe(this,fr,new Map),xe(this,Na,new Map);const n=new Map,s=new Map,r=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:c,type:u})=>{let{base:d,index:h}=pd(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:c,type:d+(h||"")}}),n.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),xe(this,pu,JSON.stringify(i));for(const l in i){const c=new Set;for(const u of i[l]){Z(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const d=pd(u.type).base;Z(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",e),!yp(d)&&(Z(s.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),s.get(d).push(l),n.get(l).add(d))}}const o=Array.from(s.keys()).filter(l=>s.get(l).length===0);Z(o.length!==0,"missing primary type","types",e),Z(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Wn(this,{primaryType:o[0]});function a(l,c){Z(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(s.has(u)){a(u,c);for(const d of c)r.get(d).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of r){const u=Array.from(c);u.sort(),_e(this,fr).set(l,vw(l,i[l])+u.map(d=>vw(d,i[d])).join(""))}}get types(){return JSON.parse(_e(this,pu))}getEncoder(e){let n=_e(this,Na).get(e);return n||(n=rn(this,Mf,z5).call(this,e),_e(this,Na).set(e,n)),n}encodeType(e){const n=_e(this,fr).get(e);return Z(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return $t(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,s){if(yp(e))return s(e,n);const r=pd(e).array;if(r)return Z(r.count===-1||r.count===n.length,`array length mismatch; expected length ${r.count}`,"value",n),n.map(o=>this._visit(r.prefix,o,s));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],s),o),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new rs(e)}static getPrimaryType(e){return rs.from(e).primaryType}static hashStruct(e,n,s){return rs.from(n).hashStruct(e,s)}static hashDomain(e){const n=[];for(const s in e){if(e[s]==null)continue;const r=bw[s];Z(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),n.push({name:s,type:r})}return n.sort((s,r)=>bp.indexOf(s.name)-bp.indexOf(r.name)),rs.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,s){return It(["0x1901",rs.hashDomain(e),rs.from(n).hash(s)])}static hash(e,n,s){return $t(rs.encode(e,n,s))}static async resolveNames(e,n,s,r){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!er(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=rs.from(n);o.visit(s,(a,l)=>(a==="address"&&!er(l,20)&&(i[l]="0x"),l));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),s=o.visit(s,(a,l)=>a==="address"&&i[l]?i[l]:l),{domain:e,value:s}}static getPayload(e,n,s){rs.hashDomain(e);const r={},i=[];bp.forEach(l=>{const c=e[l];c!=null&&(r[l]=pI[l](c),i.push({name:l,type:bw[l]}))});const o=rs.from(n);n=o.types;const a=Object.assign({},n);return Z(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(s),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(s,(l,c)=>{if(l.match(/^bytes(\d*)/))return pe(be(c));if(l.match(/^u?int/))return ut(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return Z(typeof c=="string","invalid string","value",c),c}Z(!1,"unsupported type","type",l)})}}};pu=new WeakMap,fr=new WeakMap,Na=new WeakMap,Mf=new WeakSet,z5=function(e){{const r=yp(e);if(r)return r}const n=pd(e).array;if(n){const r=n.prefix,i=this.getEncoder(r);return o=>{Z(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return _e(this,fr).has(r)&&(a=a.map($t)),$t(It(a))}}const s=this.types[e];if(s){const r=Cb(_e(this,fr).get(e));return i=>{const o=s.map(({name:a,type:l})=>{const c=this.getEncoder(l)(i[a]);return _e(this,fr).has(l)?$t(c):c});return o.unshift(r),It(o)}}Z(!1,`unknown type: ${e}`,"type",e)};let qh=rs;BigInt(0);function B5(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=pe(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of n)!(r in t)||t[r]==null||(e[r]=ut(t[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in t)||t[r]==null||(e[r]=Hn(t[r],`request.${r}`));return t.accessList&&(e.accessList=e0(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(r=>Kf(r)?pe(r):Object.assign({},r))),e}function Ci(t,e){if(t.provider)return t.provider;Ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function ww(t,e){let n=B5(e);if(n.to!=null&&(n.to=Ec(n.to,t)),n.from!=null){const s=n.from;n.from=Promise.all([t.getAddress(),Ec(s,t)]).then(([r,i])=>(Z(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else n.from=t.getAddress();return await cb(n)}class $5{constructor(e){ie(this,"provider");Wn(this,{provider:e||null})}async getNonce(e){return Ci(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await ww(this,e)}async populateTransaction(e){const n=Ci(this,"populateTransaction"),s=await ww(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const o=ut(s.chainId);Z(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?Z(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&i&&Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const o=await n.getFeeData();Ye(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(s.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const a=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=a,s.maxPriorityFeePerGas=a}else s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Ye(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice),s.type=0):Ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await cb(s)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Ci(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Ci(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Ci(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Ci(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Ci(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const r=Kh.from(s);return await n.broadcastTransaction(await this.signTransaction(r))}authorize(e){Ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var Oa,ch;const Iy=class Iy extends $5{constructor(n,s){super(s);Be(this,Oa);ie(this,"address");Wn(this,{address:n})}async getAddress(){return this.address}connect(n){return new Iy(this.address,n)}async signTransaction(n){rn(this,Oa,ch).call(this,"transactions","signTransaction")}async signMessage(n){rn(this,Oa,ch).call(this,"messages","signMessage")}async signTypedData(n,s,r){rn(this,Oa,ch).call(this,"typed-data","signTypedData")}};Oa=new WeakSet,ch=function(n,s){Ye(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:s})};let km=Iy;var Da;const Ry=class Ry extends $5{constructor(n,s){super(s);ie(this,"address");Be(this,Da);Z(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),xe(this,Da,n);const r=Tu(this.signingKey.publicKey);Wn(this,{address:r})}get signingKey(){return _e(this,Da)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new Ry(_e(this,Da),n)}async signTransaction(n){n=B5(n);const{to:s,from:r}=await cb({to:n.to?Ec(n.to,this):void 0,from:n.from?Ec(n.from,this):void 0});s!=null&&(n.to=s),r!=null&&(n.from=r),n.from!=null&&(Z(ms(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const i=Kh.from(n);return i.signature=this.signingKey.sign(i.unsignedHash),i.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(lI(n)).serialized}authorizeSync(n){Z(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const s=this.signingKey.sign(aI(n));return Object.assign({},{address:ms(n.address),nonce:ut(n.nonce||0),chainId:ut(n.chainId||0)},{signature:s})}async authorize(n){return n=Object.assign({},n,{address:await Ec(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,s,r){const i=await qh.resolveNames(n,s,r,async o=>{Ye(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return Ye(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(qh.hash(i.domain,s,i.value)).serialized}};Da=new WeakMap;let _m=Ry;const Xh=" !#$%&'()*+,-./<=>?@[]^_`{|}~",gI=/^[a-z]*$/i;function Sw(t,e){let n=97;return t.reduce((s,r)=>(r===e?n++:r.match(gI)?s.push(String.fromCharCode(n)+r):(n=97,s.push(r)),s),[])}function mI(t,e){for(let r=Xh.length-1;r>=0;r--)t=t.split(Xh[r]).join(e.substring(2*r,2*r+2));const n=[],s=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(r,i,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(i.toLowerCase());return""});if(s)throw new Error(`leftovers: ${JSON.stringify(s)}`);return Sw(Sw(n,";"),":")}function xI(t){return Z(t[0]==="0","unsupported auwl data","data",t),mI(t.substring(1+2*Xh.length),t.substring(1,1+2*Xh.length))}class bI{constructor(e){ie(this,"locale");Wn(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var La,gu,Ki,mu,Cm;class yI extends bI{constructor(n,s,r){super(n);Be(this,mu);Be(this,La);Be(this,gu);Be(this,Ki);xe(this,La,s),xe(this,gu,r),xe(this,Ki,null)}get _data(){return _e(this,La)}_decodeWords(){return xI(_e(this,La))}getWord(n){const s=rn(this,mu,Cm).call(this);return Z(n>=0&&n<s.length,`invalid word index: ${n}`,"index",n),s[n]}getWordIndex(n){return rn(this,mu,Cm).call(this).indexOf(n)}}La=new WeakMap,gu=new WeakMap,Ki=new WeakMap,mu=new WeakSet,Cm=function(){if(_e(this,Ki)==null){const n=this._decodeWords();if(Cb(n.join(`
`)+`
`)!==_e(this,gu))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);xe(this,Ki,n)}return _e(this,Ki)};const vI="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",wI="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let vp=null;class co extends yI{constructor(){super("en",vI,wI)}static wordlist(){return vp==null&&(vp=new co),vp}}function U5(t){return(1<<t)-1<<8-t&255}function SI(t){return(1<<t)-1&255}function wp(t,e){NC("NFKD"),e==null&&(e=co.wordlist());const n=e.split(t);Z(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const s=new Uint8Array(Math.ceil(11*n.length/8));let r=0;for(let c=0;c<n.length;c++){let u=e.getWordIndex(n[c].normalize("NFKD"));Z(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let d=0;d<11;d++)u&1<<10-d&&(s[r>>3]|=1<<7-r%8),r++}const i=32*n.length/3,o=n.length/3,a=U5(o),l=be(gs(s.slice(0,i/8)))[0]&a;return Z(l===(s[s.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),pe(s.slice(0,i/8))}function Sp(t,e){Z(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=co.wordlist());const n=[0];let s=11;for(let o=0;o<t.length;o++)s>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],s-=8):(n[n.length-1]<<=s,n[n.length-1]|=t[o]>>8-s,n.push(t[o]&SI(8-s)),s+=3);const r=t.length/4,i=parseInt(gs(t).substring(2,4),16)&U5(r);return n[n.length-1]<<=r,n[n.length-1]|=i>>8-r,e.join(n.map(o=>e.getWord(o)))}const kp={};class Zc{constructor(e,n,s,r,i){ie(this,"phrase");ie(this,"password");ie(this,"wordlist");ie(this,"entropy");r==null&&(r=""),i==null&&(i=co.wordlist()),Gf(e,kp,"Mnemonic"),Wn(this,{phrase:s,password:r,wordlist:i,entropy:n})}computeSeed(){const e=Ji("mnemonic"+this.password,"NFKD");return _u(Ji(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,s){const r=wp(e,s);return e=Sp(be(r),s),new Zc(kp,r,e,n,s)}static fromEntropy(e,n,s){const r=be(e,"entropy"),i=Sp(r,s);return new Zc(kp,pe(r),i,n,s)}static entropyToPhrase(e,n){const s=be(e,"entropy");return Sp(s,n)}static phraseToEntropy(e,n){return wp(e,n)}static isValidMnemonic(e,n){try{return wp(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Kt=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},_p=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},uh,ts,Bs;const kI={16:10,24:12,32:14},_I=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Jn=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],gd=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],CI=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],EI=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],PI=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],TI=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],MI=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],II=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],RI=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],AI=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],NI=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],OI=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],DI=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],LI=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Cp(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class Eb{get key(){return Kt(this,uh,"f").slice()}constructor(e){if(uh.set(this,void 0),ts.set(this,void 0),Bs.set(this,void 0),!(this instanceof Eb))throw Error("AES must be instanitated with `new`");_p(this,uh,new Uint8Array(e),"f");const n=kI[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");_p(this,Bs,[],"f"),_p(this,ts,[],"f");for(let u=0;u<=n;u++)Kt(this,Bs,"f").push([0,0,0,0]),Kt(this,ts,"f").push([0,0,0,0]);const s=(n+1)*4,r=this.key.length/4,i=Cp(this.key);let o;for(let u=0;u<r;u++)o=u>>2,Kt(this,Bs,"f")[o][u%4]=i[u],Kt(this,ts,"f")[n-o][u%4]=i[u];let a=0,l=r,c;for(;l<s;){if(c=i[r-1],i[0]^=Jn[c>>16&255]<<24^Jn[c>>8&255]<<16^Jn[c&255]<<8^Jn[c>>24&255]^_I[a]<<24,a+=1,r!=8)for(let p=1;p<r;p++)i[p]^=i[p-1];else{for(let p=1;p<r/2;p++)i[p]^=i[p-1];c=i[r/2-1],i[r/2]^=Jn[c&255]^Jn[c>>8&255]<<8^Jn[c>>16&255]<<16^Jn[c>>24&255]<<24;for(let p=r/2+1;p<r;p++)i[p]^=i[p-1]}let u=0,d,h;for(;u<r&&l<s;)d=l>>2,h=l%4,Kt(this,Bs,"f")[d][h]=i[u],Kt(this,ts,"f")[n-d][h]=i[u++],l++}for(let u=1;u<n;u++)for(let d=0;d<4;d++)c=Kt(this,ts,"f")[u][d],Kt(this,ts,"f")[u][d]=NI[c>>24&255]^OI[c>>16&255]^DI[c>>8&255]^LI[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=Kt(this,Bs,"f").length-1,s=[0,0,0,0];let r=Cp(e);for(let a=0;a<4;a++)r[a]^=Kt(this,Bs,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=CI[r[l]>>24&255]^EI[r[(l+1)%4]>>16&255]^PI[r[(l+2)%4]>>8&255]^TI[r[(l+3)%4]&255]^Kt(this,Bs,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Kt(this,Bs,"f")[n][a],i[4*a]=(Jn[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(Jn[r[(a+1)%4]>>16&255]^o>>16)&255,i[4*a+2]=(Jn[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(Jn[r[(a+3)%4]&255]^o)&255;return i}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=Kt(this,ts,"f").length-1,s=[0,0,0,0];let r=Cp(e);for(let a=0;a<4;a++)r[a]^=Kt(this,ts,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=MI[r[l]>>24&255]^II[r[(l+3)%4]>>16&255]^RI[r[(l+2)%4]>>8&255]^AI[r[(l+1)%4]&255]^Kt(this,ts,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Kt(this,ts,"f")[n][a],i[4*a]=(gd[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(gd[r[(a+3)%4]>>16&255]^o>>16)&255,i[4*a+2]=(gd[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(gd[r[(a+1)%4]&255]^o)&255;return i}}uh=new WeakMap,ts=new WeakMap,Bs=new WeakMap;class jI{constructor(e,n,s){if(s&&!(this instanceof s))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Eb(n)},name:{enumerable:!0,value:e}})}}var Ro=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},Zn=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},sc,Ai,ns;class Qh extends jI{constructor(e,n){super("CTR",e,Qh),sc.set(this,void 0),Ai.set(this,void 0),ns.set(this,void 0),Ro(this,ns,new Uint8Array(16),"f"),Zn(this,ns,"f").fill(0),Ro(this,sc,Zn(this,ns,"f"),"f"),Ro(this,Ai,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(Zn(this,ns,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)Zn(this,ns,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Zn(this,ns,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(Zn(this,ns,"f")[e]===255)Zn(this,ns,"f")[e]=0;else{Zn(this,ns,"f")[e]++;break}}encrypt(e){var n,s;const r=new Uint8Array(e);for(let i=0;i<r.length;i++)Zn(this,Ai,"f")===16&&(Ro(this,sc,this.aes.encrypt(Zn(this,ns,"f")),"f"),Ro(this,Ai,0,"f"),this.increment()),r[i]^=Zn(this,sc,"f")[Ro(this,Ai,(s=Zn(this,Ai,"f"),n=s++,s),"f"),n];return r}decrypt(e){return this.encrypt(e)}}sc=new WeakMap,Ai=new WeakMap,ns=new WeakMap;function Nl(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function W5(t){return typeof t=="string"?Ji(t,"NFKC"):Fo(t)}const FI="m/44'/60'/0'/0/0";function H5(t){const e=t.salt!=null?be(t.salt,"options.salt"):Sr(32);let n=1<<17,s=8,r=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(s=t.scrypt.r),t.scrypt.p&&(r=t.scrypt.p)),Z(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),Z(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt r parameter","options.r",s),Z(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt p parameter","options.p",r),{name:"scrypt",dkLen:32,salt:e,N:n,r:s,p:r}}function V5(t,e,n,s){const r=be(n.privateKey,"privateKey"),i=s.iv!=null?be(s.iv,"options.iv"):Sr(16);Z(i.length===16,"invalid options.iv length","options.iv",s.iv);const o=s.uuid!=null?be(s.uuid,"options.uuid"):Sr(16);Z(o.length===16,"invalid options.uuid length","options.uuid",s.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new Qh(a,i),u=be(c.encrypt(r)),d=$t(It([l,u])),h={address:n.address.substring(2).toLowerCase(),id:K8(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:pe(i).substring(2)},ciphertext:pe(u).substring(2),kdf:"scrypt",kdfparams:{salt:pe(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:d.substring(2)}};if(n.mnemonic){const p=s.client!=null?s.client:`ethers/${AC}`,m=n.mnemonic.path||FI,x=n.mnemonic.locale||"en",w=t.slice(32,64),g=be(n.mnemonic.entropy,"account.mnemonic.entropy"),y=Sr(16),b=new Qh(w,y),v=be(b.encrypt(g)),S=new Date,E="UTC--"+(S.getUTCFullYear()+"-"+Nl(S.getUTCMonth()+1,2)+"-"+Nl(S.getUTCDate(),2)+"T"+Nl(S.getUTCHours(),2)+"-"+Nl(S.getUTCMinutes(),2)+"-"+Nl(S.getUTCSeconds(),2)+".0Z")+"--"+h.address;h["x-ethers"]={client:p,gethFilename:E,path:m,locale:x,mnemonicCounter:pe(y).substring(2),mnemonicCiphertext:pe(v).substring(2),version:"0.1"}}return JSON.stringify(h)}function zI(t,e,n){n==null&&(n={});const s=W5(e),r=H5(n),i=Eu(s,r.salt,r.N,r.r,r.p,64);return V5(be(i),r,t,n)}async function BI(t,e,n){n==null&&(n={});const s=W5(e),r=H5(n),i=await Cu(s,r.salt,r.N,r.r,r.p,64,n.progressCallback);return V5(be(i),r,t,n)}const Ep="m/44'/60'/0'/0/0",$I=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),hi=2147483648,UI=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),WI="0123456789abcdef";function Jh(t,e){let n="";for(;t;)n=WI[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function Em(t){const e=be(t),n=ub(gs(gs(e)),0,4),s=It([e,n]);return V8(s)}const Vs={};function Y5(t,e,n,s){const r=new Uint8Array(37);t&hi?(Ye(s!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),r.set(be(s),1)):r.set(be(n));for(let o=24;o>=0;o-=8)r[33+(o>>3)]=t>>24-o&255;const i=be(fl("sha512",e,r));return{IL:i.slice(0,32),IR:i.slice(32)}}function G5(t,e){const n=e.split("/");Z(n.length>0,"invalid path","path",e),n[0]==="m"&&(Z(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let s=t;for(let r=0;r<n.length;r++){const i=n[r];if(i.match(/^[0-9]+'$/)){const o=parseInt(i.substring(0,i.length-1));Z(o<hi,"invalid path index",`path[${r}]`,i),s=s.deriveChild(hi+o)}else if(i.match(/^[0-9]+$/)){const o=parseInt(i);Z(o<hi,"invalid path index",`path[${r}]`,i),s=s.deriveChild(o)}else Z(!1,"invalid path component",`path[${r}]`,i)}return s}var xu,Pm,qi,rc;const vs=class vs extends _m{constructor(n,s,r,i,o,a,l,c,u){super(s,u);Be(this,xu);ie(this,"publicKey");ie(this,"fingerprint");ie(this,"parentFingerprint");ie(this,"mnemonic");ie(this,"chainCode");ie(this,"path");ie(this,"index");ie(this,"depth");Gf(n,Vs,"HDNodeWallet"),Wn(this,{publicKey:s.compressedPublicKey});const d=ub(pl(gs(this.publicKey)),0,4);Wn(this,{parentFingerprint:r,fingerprint:d,chainCode:i,path:o,index:a,depth:l}),Wn(this,{mnemonic:c})}connect(n){return new vs(Vs,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,s){return await BI(rn(this,xu,Pm).call(this),n,{progressCallback:s})}encryptSync(n){return zI(rn(this,xu,Pm).call(this),n)}get extendedKey(){return Ye(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Em(It(["0x0488ADE4",Jh(this.depth,1),this.parentFingerprint,Jh(this.index,4),this.chainCode,It(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new tu(Vs,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const s=Hn(n,"index");Z(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~hi),s&hi&&(r+="'"));const{IR:i,IL:o}=Y5(s,this.chainCode,this.publicKey,this.privateKey),a=new Js(Ha((DC(o)+BigInt(this.privateKey))%UI,32));return new vs(Vs,a,this.fingerprint,pe(i),r,s,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return G5(this,n)}static fromExtendedKey(n){const s=Mt(Y8(n));Z(s.length===82||Em(s.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const r=s[4],i=pe(s.slice(5,9)),o=parseInt(pe(s.slice(9,13)).substring(2),16),a=pe(s.slice(13,45)),l=s.slice(45,78);switch(pe(s.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=pe(l);return new tu(Vs,Tu(c),c,i,a,null,o,r,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new vs(Vs,new Js(l.slice(1)),i,a,null,o,r,null,null)}Z(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,s,r){var o;n==null&&(n=""),s==null&&(s=Ep),r==null&&(r=co.wordlist());const i=Zc.fromEntropy(Sr(16),n,r);return rn(o=vs,qi,rc).call(o,i.computeSeed(),i).derivePath(s)}static fromMnemonic(n,s){var r;return s||(s=Ep),rn(r=vs,qi,rc).call(r,n.computeSeed(),n).derivePath(s)}static fromPhrase(n,s,r,i){var a;s==null&&(s=""),r==null&&(r=Ep),i==null&&(i=co.wordlist());const o=Zc.fromPhrase(n,s,i);return rn(a=vs,qi,rc).call(a,o.computeSeed(),o).derivePath(r)}static fromSeed(n){var s;return rn(s=vs,qi,rc).call(s,n,null)}};xu=new WeakSet,Pm=function(){const n={address:this.address,privateKey:this.privateKey},s=this.mnemonic;return this.path&&s&&s.wordlist.locale==="en"&&s.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:s.entropy}),n},qi=new WeakSet,rc=function(n,s){Z(Kf(n),"invalid seed","seed","[REDACTED]");const r=be(n,"seed");Z(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const i=be(fl("sha512",$I,r)),o=new Js(pe(i.slice(0,32)));return new vs(Vs,o,"0x00000000",pe(i.slice(32)),"m",0,0,s,null)},Be(vs,qi);let eu=vs;class tu extends km{constructor(n,s,r,i,o,a,l,c,u){super(s,u);ie(this,"publicKey");ie(this,"fingerprint");ie(this,"parentFingerprint");ie(this,"chainCode");ie(this,"path");ie(this,"index");ie(this,"depth");Gf(n,Vs,"HDNodeVoidWallet"),Wn(this,{publicKey:r});const d=ub(pl(gs(r)),0,4);Wn(this,{publicKey:r,fingerprint:d,parentFingerprint:i,chainCode:o,path:a,index:l,depth:c})}connect(n){return new tu(Vs,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return Ye(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Em(It(["0x0488B21E",Jh(this.depth,1),this.parentFingerprint,Jh(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const s=Hn(n,"index");Z(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~hi),s&hi&&(r+="'"));const{IR:i,IL:o}=Y5(s,this.chainCode,this.publicKey,null),a=Js.addPoints(o,this.publicKey,!0),l=Tu(a);return new tu(Vs,l,a,this.fingerprint,pe(i),r,s,this.depth+1,this.provider)}derivePath(n){return G5(this,n)}}const HI=6e4,kw=100,Pp=24*60*60*1e3,Tp=1;class K5{constructor(e){ie(this,"infoClient");ie(this,"onChainState",new Map);ie(this,"offChainNonces",new Map);ie(this,"syncTimers",new Map);this.infoClient=e}getOrCreateState(e){const n=e.toLowerCase();let s=this.onChainState.get(n);return s||(s={confirmed:0,pending:[],lastSync:0,mu:!1},this.onChainState.set(n,s)),s}async acquireLock(e){for(;e.mu;)await new Promise(n=>setTimeout(n,10));e.mu=!0}releaseLock(e){e.mu=!1}async syncWithCore(e){const n=this.getOrCreateState(e),s=Date.now();if(!(s-n.lastSync<HI))try{const r=await this.infoClient.getNonceStatus(e,!1),i=(r==null?void 0:r.next_nonce)!==void 0?typeof r.next_nonce=="string"?parseInt(r.next_nonce,10):r.next_nonce:0;n.confirmed=i,n.lastSync=s}catch(r){console.warn(`[NonceManager] Failed to sync with core for ${e}:`,r)}}async getNonce(e,n="latest"){const s=e.toLowerCase(),r=this.getOrCreateState(s);if(await this.syncWithCore(s),n==="latest")return r.confirmed;{const i=r.pending.length>0?Math.max(...r.pending):r.confirmed;return Math.max(r.confirmed,i)}}async validateNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{if(s||await this.syncWithCore(r),i.confirmed===0&&n<Tp)throw new Error(`nonce too low for new account: got ${n}, minimum ${Tp}`);if(i.confirmed>0&&n<=i.confirmed)throw new Error(`nonce too low: got ${n}, confirmed ${i.confirmed}`);if(i.pending.includes(n))throw new Error(`nonce already pending: ${n}`);if(i.pending.length>=kw)throw new Error(`pending nonce limit reached: max ${kw} pending nonces`);if(s){const o=this.offChainNonces.get(r);if(o){const a=o.get(n);if(a){const l=Date.now();if(l-a<Pp)throw new Error(`nonce already used (off-chain): ${n}, expires in ${Math.floor((Pp-(l-a))/1e3)}s`);o.delete(n)}}}i.pending.push(n),i.pending.sort((o,a)=>o-a)}finally{this.releaseLock(i)}}async commitNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){let a=this.offChainNonces.get(r);a||(a=new Map,this.offChainNonces.set(r,a)),a.set(n,Date.now())}else if(n===i.confirmed+1)for(i.confirmed=n;i.pending.length>0&&i.pending[0]===i.confirmed+1;){const a=i.pending.shift();i.confirmed=a}}finally{this.releaseLock(i)}}async rejectNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){const a=this.offChainNonces.get(r);a&&a.delete(n)}}finally{this.releaseLock(i)}}async getExpectedNextNonce(e,n=!1){const s=e.toLowerCase();await this.syncWithCore(s);const r=this.getOrCreateState(s),i=r.pending.length>0?Math.max(...r.pending):r.confirmed,o=Math.max(r.confirmed+1,i+1),a=o===0?Tp:o;if(n)try{await this.validateNonce(s,a,!1)}catch(l){console.warn(`[NonceManager] Failed to reserve nonce ${a}:`,l.message)}return{next_nonce:a,reserved:n,timestamp:Date.now()}}cleanupExpiredOffChainNonces(){const e=Date.now();for(const[n,s]of this.offChainNonces.entries()){for(const[r,i]of s.entries())e-i>=Pp&&s.delete(r);s.size===0&&this.offChainNonces.delete(n)}}resetNonce(e){const n=e.toLowerCase();this.onChainState.delete(n),this.offChainNonces.delete(n);const s=this.syncTimers.get(n);s&&(clearInterval(s),this.syncTimers.delete(n))}getState(e){const n=e.toLowerCase();return this.onChainState.get(n)}}class vn{constructor(e){ie(this,"httpClient");ie(this,"sessionToken");this.httpClient=new lb(e.baseURL),this.sessionToken=e.sessionToken}setSessionToken(e){this.sessionToken=e}getHeaders(){const e={Accept:"application/json, */*"};return this.sessionToken&&(e.Authorization=`Bearer ${this.sessionToken}`),e}async getMarkets(){var n;const e=await this.httpClient.get("/market/v1/all",this.getHeaders());return((n=e.body)==null?void 0:n.markets)??e.body}async getMarketsWithFilters(e,n){var o;let s="/market/v1/all";const r=[];e&&r.push(`filter=${e}`),n&&r.push("active_only=true"),r.length>0&&(s+="?"+r.join("&"));const i=await this.httpClient.get(s,this.getHeaders());return((o=i.body)==null?void 0:o.markets)??i.body}async getMarketByID(e){return(await this.httpClient.get(`/market/v1/market/${e}`,this.getHeaders())).body}async getMarketByMoniker(e){return(await this.httpClient.get(`/market/v1/market/by-moniker/${e}`,this.getHeaders())).body}async getMarketStats(e){return(await this.httpClient.get(`/market/v1/market/${e}/stats`,this.getHeaders())).body}async getTicker(e){return this.getMarketStats(e)}async getExchangeInfo(){return(await this.httpClient.get("/market/v1/exchangeInfo",this.getHeaders())).body}async getOrderbook(e,n=!0,s=20){let r=`/clob/v1/orderbook/${e}`,i=20;s>0&&s<100&&(i=s),r+=`?depth=${i}`;const o=await this.httpClient.get(r,this.getHeaders());return n&&o.body&&(o.body.bids&&Array.isArray(o.body.bids)&&(o.body.bids=o.body.bids.map(([a,l])=>[Ce(a),Ce(l)])),o.body.asks&&Array.isArray(o.body.asks)&&(o.body.asks=o.body.asks.map(([a,l])=>[Ce(a),Ce(l)]))),o.body}async getMarketTrades(e,n){var i,o;let s=`/clob/v1/trades?market_id=${e}`;n&&n>0&&(s+=`&limit=${n}`);const r=await this.httpClient.get(s,this.getHeaders());return console.debug("[InfoClient] getMarketTrades response for marketId:",e,"response:",r.body),Array.isArray(r.body)?r.body:(i=r.body)!=null&&i.trades&&Array.isArray(r.body.trades)?r.body.trades:(o=r.body)!=null&&o.data&&Array.isArray(r.body.data)?r.body.data:(console.warn("[InfoClient] getMarketTrades: Unexpected response structure:",r.body),[])}async getRecentTrades(e,n=100){return this.getMarketTrades(e,n)}async getTrades(e,n){let s=`/clob/v1/trades?symbol=${e}`;return n&&n>0&&(s+=`&limit=${n}`),(await this.httpClient.get(s,this.getHeaders())).body}async getAggTrades(e,n,s,r){let i=`/market/v1/aggTrades?symbol=${e}`;return n&&n>0&&(i+=`&limit=${n}`),s&&s>0&&(i+=`&startTime=${s}`),r&&r>0&&(i+=`&endTime=${r}`),(await this.httpClient.get(i,this.getHeaders())).body}async getKlines(e,n,s,r,i){let o=`/clob/v1/klines?symbol=${e}&interval=${n}`;return s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`),(await this.httpClient.get(o,this.getHeaders())).body}async getContinuousKlines(e,n,s,r,i,o){let a=`/market/v1/continuousKlines?pair=${e}&contractType=${n}&interval=${s}`;return r&&r>0&&(a+=`&limit=${r}`),i&&i>0&&(a+=`&startTime=${i}`),o&&o>0&&(a+=`&endTime=${o}`),(await this.httpClient.get(a,this.getHeaders())).body}async getPremiumIndex(e){let n="/market/v1/premiumIndex";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getFundingRate(e,n,s,r){let i="/market/v1/fundingRate";const o=[];return e&&o.push(`symbol=${e}`),n&&n>0&&o.push(`limit=${n}`),s&&s>0&&o.push(`startTime=${s}`),r&&r>0&&o.push(`endTime=${r}`),o.length>0&&(i+="?"+o.join("&")),(await this.httpClient.get(i,this.getHeaders())).body}async getFundingInfo(){return(await this.httpClient.get("/market/v1/fundingInfo",this.getHeaders())).body}async getDeliveryPrice(e){return(await this.httpClient.get(`/market/v1/deliveryPrice?pair=${e}`,this.getHeaders())).body}async getOpenInterest(e){return(await this.httpClient.get(`/market/v1/openInterest?symbol=${e}`,this.getHeaders())).body}async getTopLongShortPositionRatio(e,n,s,r,i){let o=`/market/v1/topLongShortPositionRatio?symbol=${e}&period=${n}`;return s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`),(await this.httpClient.get(o,this.getHeaders())).body}async getGlobalLongShortAccountRatio(e,n,s,r,i){let o=`/market/v1/globalLongShortAccountRatio?symbol=${e}&period=${n}`;return s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`),(await this.httpClient.get(o,this.getHeaders())).body}async getTicker24hr(e){let n="/market/v1/moniker/24hr";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getTickerPrice(e){let n="/market/v1/moniker/price";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getOrderbookMoniker(e){let n="/market/v1/moniker/bookTicker";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getBasis(e,n,s,r,i){let o=`/market/v1/basis?symbol=${e}&period=${n}`;return s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`),(await this.httpClient.get(o,this.getHeaders())).body}async getIndexInfo(e){let n="/market/v1/indexInfo";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getAssetIndex(e){let n="/market/v1/assetIndex";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getConstituents(e){return(await this.httpClient.get(`/market/v1/constituents?symbol=${e}`,this.getHeaders())).body}async getTWAP(e,n){return(await this.httpClient.get(`/market/v1/twap?symbol=${e}&duration=${n}`,this.getHeaders())).body}async getPositions(e,n){var i;if(!e)throw new Error("walletAddress is required for getPositions");let s=`/bucket/v1/address/${e}/positions`;n!==void 0&&(s+=`?active_only=${n}`);const r=await this.httpClient.get(s,this.getHeaders());return Array.isArray(r.body)?r.body:(i=r.body)!=null&&i.positions&&Array.isArray(r.body.positions)?r.body.positions:[]}async getPositionsDecimal(e,n){const s=await this.getPositions(e,n);return Array.isArray(s)?s.map(r=>{const i=r.size,o=r.entry_price||r.entryPrice,a=r.mark_price||r.markPrice,l=r.liquidation_price||r.liquidationPrice,c=r.unrealized_pnl||r.unrealizedPnL;return{...r,size:i&&Ce(i),entry_price:o&&Ce(o),entryPrice:o&&Ce(o),mark_price:a&&Ce(a),markPrice:a&&Ce(a),liquidation_price:l&&Ce(l),liquidationPrice:l&&Ce(l),unrealized_pnl:c&&Ce(c),unrealizedPnL:c&&Ce(c)}}):s}async getBalance(e,n){let s=`/bank/v1/balance/${e}?asset=${n}`;return(await this.httpClient.get(s,this.getHeaders())).body}async getBalances(e){return(await this.httpClient.get(`/bank/v1/balances/${e}`,this.getHeaders())).body}async getBalanceDecimal(e,n){const s=await this.getBalance(e,n);if(s&&typeof s=="object"){const r={...s};return r.balance&&(r.balance=Ce(r.balance)),r.available&&(r.available=Ce(r.available)),r.locked&&(r.locked=Ce(r.locked)),r}return s}async getOrders(e,n){let s=`/clob/v1/address/orders?address=${encodeURIComponent(e)}`;return n&&(s+=`&asset_pair=${encodeURIComponent(n)}`),(await this.httpClient.get(s,this.getHeaders())).body}async getOrder(e){return(await this.httpClient.get(`/clob/v1/order/${e}`,this.getHeaders())).body}async getOrderHistory(e){return(await this.httpClient.get(`/clob/v1/address/orders/history?address=${e}`,this.getHeaders())).body}async getUserTrades(e,n){let s=`/clob/v1/address/trades?address=${e}`;return n&&(s+=`&asset_pair=${n}`),(await this.httpClient.get(s,this.getHeaders())).body}async getTradeHistory(e,n){return this.getUserTrades(e,n)}async getPosition(e,n){let s=`/clob/v1/address/position?address=${e}`;return n&&(s+=`&asset_pair=${n}`),(await this.httpClient.get(s,this.getHeaders())).body}async getBuckets(e){var s;const n=await this.httpClient.get(`/bucket/v1/address/${e}/buckets`,this.getHeaders());return Array.isArray(n.body)?n.body:(s=n.body)!=null&&s.buckets&&Array.isArray(n.body.buckets)?n.body.buckets:[]}async getBucket(e){return(await this.httpClient.get(`/bucket/v1/bucket/${e}`,this.getHeaders())).body}async getMarketData(e){return(await this.httpClient.get(`/clob/v1/market/data?asset_pair=${e}`,this.getHeaders())).body}async getMarketCandles(e,n,s){return(await this.httpClient.get(`/clob/v1/market/candles?asset_pair=${e}&interval=${n}&limit=${s}`,this.getHeaders())).body}async getNonceStatus(e,n=!1){let s=`/router/v1/nonce/status/${e}`;return n&&(s+="?reserve=true"),(await this.httpClient.get(s,this.getHeaders())).body}async getSupportedActions(){return(await this.httpClient.get("/router/v1/tx/supported-actions",this.getHeaders())).body}async validateAction(e){return(await this.httpClient.get(`/router/v1/tx/validate-action?action=${encodeURIComponent(e)}`,this.getHeaders())).body}async getHealthSummary(){return(await this.httpClient.get("/router/v1/health/summary",this.getHeaders())).body}async getHealthDaemons(){return(await this.httpClient.get("/router/v1/health/daemons",this.getHeaders())).body}async getHealthBucket(){return(await this.httpClient.get("/router/v1/health/bucket",this.getHeaders())).body}async getHealthOracle(){return(await this.httpClient.get("/router/v1/health/oracle",this.getHeaders())).body}async getServerTime(){return(await this.httpClient.get("/router/v1/time",this.getHeaders())).body}async getMetricsTPS(){return(await this.httpClient.get("/router/v1/metrics/tps",this.getHeaders())).body}async getMetricsLatency(){return(await this.httpClient.get("/router/v1/metrics/latency",this.getHeaders())).body}}function VI(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["nonce too low","nonce too high","nonce already used","nonce already pending","nonce invalid","nonce expired","nonce mismatch","invalid nonce","nonce out of order"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function YI(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["signature verification failed","invalid signature","unauthenticated","signature mismatch","signature invalid"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function GI(t){if(!t)return[!1,!1];const e=VI(t),n=YI(t);return[e,n]}function q5(t){const[e,n]=GI(t);return e||n}const Pb="sys::onboard",KI="clob::change_margin_ratio",qI="clob::submit_order",_w="clob::cancel_order",XI="bucket::close_position",QI="clob::modify_order",JI="clob::change_leverage",ZI="clob::inter_transfer",e7="clob::swap",t7="bank::mint",n7="bank::extract_to_bucket",s7="bank::withdraw_from_bucket",r7="bank::bucket_transfer",i7="bank::transfer";var Je=(t=>(t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t))(Je||{});class Mu{constructor(e){ie(this,"httpClient");ie(this,"infoClient");ie(this,"nonceManager");ie(this,"mnemonic");ie(this,"chainID");ie(this,"walletAddress");ie(this,"nonceCounter",null);this.httpClient=new lb(e.baseURL,e.maxRetries||3),this.infoClient=new vn({baseURL:e.baseURL}),this.nonceManager=new K5(this.infoClient),this.mnemonic=e.mnemonic,this.chainID=e.chainID||10900}async initialize(){await Ae.initialize();const e=await Ae.generateAddress(this.mnemonic,0);if(!e.success||!e.address)throw new Error(`Failed to generate wallet address: ${e.error}`);this.walletAddress=e.address}getWalletAddress(){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");return this.walletAddress}async refreshNonceFromServer(){const e=this.getWalletAddress(),n=await this.nonceManager.getExpectedNextNonce(e,!1);this.nonceCounter=n.next_nonce,console.log("[ExchangeClient] Refreshed nonce from server",{walletAddress:e,newNonce:this.nonceCounter})}async getNextNonce(){return this.nonceCounter===null&&await this.refreshNonceFromServer(),this.nonceCounter++,this.nonceCounter.toString()}generateTxID(){const e=Date.now(),n=Math.floor(Math.random()*1e6);return`tx-${e}-${n}`}async getPrivateKeyHex(){const e=this.getWalletAddress(),n=eu.fromPhrase(this.mnemonic.trim(),"","m/44'/60'/0'/0/0");if(n.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${n.address} does not match ${e}`);const s=BigInt(n.privateKey),r=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(s===0n||s>=r)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const o=s.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(o))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return o}async signPayload(e){const n=this.getWalletAddress(),s=await this.getPrivateKeyHex(),r=Math.floor(Date.now()/1e3);let i;e.deadline&&(i=parseInt(e.deadline,10));const o={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:r,payload:e};i!==void 0&&(o.deadline=i);const a=await Ae.generateSingleSignature(JSON.stringify(o),s,n.toLowerCase());if(!a.success||!a.signature)throw new Error(a.error||"Failed to generate signature");return a.signature}buildOrderPayload(e){const n=typeof e.price=="string"?e.price:bt(e.price),s=typeof e.quantity=="string"?e.quantity:bt(e.quantity),r={action:qI,marketId:e.marketId,side:e.side.toUpperCase(),orderType:e.orderType.toUpperCase(),price:n,quantity:s};return e.leverage&&(r.leverage=e.leverage),e.takeProfit&&(r.takeProfit=e.takeProfit),e.stopLoss&&(r.stopLoss=e.stopLoss),r}async buildCompleteMessage(e){const s=Math.floor(Date.now()/1e3)+3600,r=await this.getNextNonce();return{...e,owner:this.getWalletAddress(),nonce:r,deadline:s.toString()}}buildEIP712Tx(e,n){const s=Math.floor(Date.now()/1e3);let r;e.deadline&&(r=parseInt(e.deadline,10));const i={txId:this.generateTxID(),sigType:1,threshold:1,timestamp:s,payload:e,signatures:[{signer:this.getWalletAddress(),signature:n}]};return r!==void 0&&(i.deadline=r),i}async placeOrder(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.side||e.side.toUpperCase()!=="BUY"&&e.side.toUpperCase()!=="SELL")throw new Error("side must be BUY or SELL");if(!e.orderType||e.orderType.toUpperCase()!=="LIMIT"&&e.orderType.toUpperCase()!=="MARKET")throw new Error("orderType must be LIMIT or MARKET");const n=typeof e.price=="string"?parseFloat(e.price):e.price,s=typeof e.quantity=="string"?parseFloat(e.quantity):e.quantity;if(!n||n<=0)throw new Error("price must be positive");if(!s||s<=0)throw new Error("quantity must be positive");this.walletAddress||await this.initialize();const r=this.buildOrderPayload(e),i=await this.buildCompleteMessage(r),o=await this.signPayload(i),a=Math.floor(Date.now()/1e3)-5,l=`order-${Date.now()}-${Math.floor(Math.random()*1e6)}`,c=e.side.toUpperCase()==="BUY",u={address:this.getWalletAddress(),asset_pair:e.marketId,market_id:e.marketId,price:i.price,size:i.quantity,is_buy:c,order_type:e.orderType.toUpperCase(),timestamp:a,client_order_id:l,nonce:i.nonce,deadline:i.deadline,signature:o,time_in_force:e.timeInForce||"GTC"};return e.leverage&&(u.leverage=e.leverage),e.takeProfit&&(u.take_profit=e.takeProfit),e.stopLoss&&(u.stop_loss=e.stopLoss),e.postOnly&&(u.post_only=!0),e.hidden&&(u.hidden=!0),e.displayQuantity&&(u.display_quantity=e.displayQuantity),e.reduceOnly&&(u.reduce_only=!0),(await this.httpClient.post("/clob/v1/order",u)).body}async cancelOrder(e){var l,c,u,d,h,p;if(console.log("[ExchangeClient.cancelOrder] Starting cancel order request",{orderId:e.orderId,marketId:e.marketId,timestamp:new Date().toISOString()}),!e.orderId||e.orderId==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: orderId is empty",e),new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: marketId is empty",e),new Error("marketId cannot be empty");console.log("[ExchangeClient.cancelOrder] Input validation passed",{orderId:e.orderId,marketId:e.marketId}),this.walletAddress?console.log("[ExchangeClient.cancelOrder] Using existing wallet",{walletAddress:this.walletAddress}):(console.log("[ExchangeClient.cancelOrder] Wallet not initialized, initializing now..."),await this.initialize(),console.log("[ExchangeClient.cancelOrder] Wallet initialized",{walletAddress:this.walletAddress}));const n=this.getWalletAddress(),s={action:_w,orderId:e.orderId,marketId:e.marketId,address:n};console.log("[ExchangeClient.cancelOrder] Payload built",{payload:s,action:_w});const r=await this.buildCompleteMessage(s);console.log("[ExchangeClient.cancelOrder] Complete message built",{action:r.action,orderId:r.orderId,marketId:r.marketId,address:r.address,owner:r.owner,nonce:r.nonce,deadline:r.deadline,hasAllFields:!!(r.action&&r.orderId&&r.marketId&&r.owner&&r.nonce&&r.deadline)}),console.log("[ExchangeClient.cancelOrder] Generating signature...");const i=await this.signPayload(r);console.log("[ExchangeClient.cancelOrder] Signature generated",{signatureLength:i==null?void 0:i.length,signaturePrefix:(i==null?void 0:i.substring(0,10))+"..."});const o=this.buildEIP712Tx(r,i);console.log("[ExchangeClient.cancelOrder] EIP712Tx built",{eip712Tx:{txId:o.txId,sigType:o.sigType,threshold:o.threshold,timestamp:o.timestamp,deadline:o.deadline,payloadAction:(l=o.payload)==null?void 0:l.action,payloadOrderId:(c=o.payload)==null?void 0:c.orderId,payloadMarketId:(u=o.payload)==null?void 0:u.marketId,signaturesCount:(d=o.signatures)==null?void 0:d.length,signer:(p=(h=o.signatures)==null?void 0:h[0])==null?void 0:p.signer}});const a=this.httpClient.getBaseURL?this.httpClient.getBaseURL():"unknown";console.log("[ExchangeClient.cancelOrder] Submitting to /router/v1/tx endpoint...",{endpoint:"/router/v1/tx",baseURL:a,fullURL:`${a}/router/v1/tx`});try{const m=await this.httpClient.post("/router/v1/tx",o);return console.log("[ExchangeClient.cancelOrder] API response received",{status:m.statusCode,hasBody:!!m.body,responseBody:m.body,orderId:e.orderId}),m.body}catch(m){if(q5(m)){console.log("[ExchangeClient.cancelOrder] Nonce error detected, refreshing nonce from server",{error:m instanceof Error?m.message:String(m),orderId:e.orderId}),await this.refreshNonceFromServer();const x=await this.buildCompleteMessage(s),w=await this.signPayload(x),g=this.buildEIP712Tx(x,w);console.log("[ExchangeClient.cancelOrder] Retrying with refreshed nonce",{newNonce:x.nonce});const y=await this.httpClient.post("/router/v1/tx",g);return console.log("[ExchangeClient.cancelOrder] Retry successful",{status:y.statusCode,responseBody:y.body}),y.body}throw console.error("[ExchangeClient.cancelOrder] API call failed",{error:m,errorMessage:m instanceof Error?m.message:String(m),errorStack:m instanceof Error?m.stack:void 0,orderId:e.orderId,marketId:e.marketId,walletAddress:this.walletAddress}),m}}async modifyOrder(e){if(!e.orderId||e.orderId==="")throw new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newPrice===void 0&&e.newQuantity===void 0)throw new Error("at least one of newPrice or newQuantity must be provided");this.walletAddress||await this.initialize();const n={action:QI,orderId:e.orderId,marketId:e.marketId};e.newPrice!==void 0&&(n.newPrice=typeof e.newPrice=="string"?e.newPrice:bt(e.newPrice)),e.newQuantity!==void 0&&(n.newQuantity=typeof e.newQuantity=="string"?e.newQuantity:bt(e.newQuantity));const s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async changeLeverage(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newLeverage===void 0)throw new Error("newLeverage must be provided");this.walletAddress||await this.initialize();const n={action:JI,marketId:e.marketId,newLeverage:typeof e.newLeverage=="string"?e.newLeverage:bt(e.newLeverage),address:this.getWalletAddress()};e.leverageType&&(n.leverageType=e.leverageType),e.bucketId&&(n.bucketId=e.bucketId),e.reason&&(n.reason=e.reason);const s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async closePosition(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n={action:XI,marketId:e.marketId,address:this.getWalletAddress()};e.positionId&&(n.positionId=e.positionId),e.quantity!==void 0&&(n.quantity=typeof e.quantity=="string"?e.quantity:bt(e.quantity));const s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async swap(e){if(!e.fromToken||e.fromToken==="")throw new Error("fromToken cannot be empty");if(!e.toToken||e.toToken==="")throw new Error("toToken cannot be empty");if(e.amountIn===void 0||typeof e.amountIn=="number"&&e.amountIn<=0)throw new Error("amountIn must be positive");if(e.minAmountOut===void 0||typeof e.minAmountOut=="number"&&e.minAmountOut<=0)throw new Error("minAmountOut must be positive");this.walletAddress||await this.initialize();const n={action:e7,fromToken:e.fromToken,toToken:e.toToken,amountIn:typeof e.amountIn=="string"?e.amountIn:bt(e.amountIn),minAmountOut:typeof e.minAmountOut=="string"?e.minAmountOut:bt(e.minAmountOut)};e.path&&e.path.length>0&&(n.path=e.path);const s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async changeMarginRatio(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n={action:KI,marketId:e.marketId,address:this.getWalletAddress()};e.bucketId&&(n.bucketId=e.bucketId);const s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async internTransfer(e){if(!e.fromAccount||e.fromAccount==="")throw new Error("fromAccount cannot be empty");if(!e.toAccount||e.toAccount==="")throw new Error("toAccount cannot be empty");if(!e.tokenAddress||e.tokenAddress==="")throw new Error("tokenAddress cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n={action:ZI,fromAccount:e.fromAccount,toAccount:e.toAccount,amount:typeof e.amount=="string"?e.amount:bt(e.amount),tokenAddress:e.tokenAddress,address:this.getWalletAddress()},s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async bucketTransfer(e){if(!e.fromBucketId||e.fromBucketId.trim()==="")throw new Error("fromBucketId cannot be empty");if(!e.toBucketId||e.toBucketId.trim()==="")throw new Error("toBucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=typeof e.amount=="string"?e.amount:bt(e.amount),r={action:r7,fromBucketId:e.fromBucketId,toBucketId:e.toBucketId,asset:e.assetId,amount:s},i=await this.buildCompleteMessage(r),o=await this.signPayload(i),a=Math.floor(Date.now()/1e3),l={address:n,source_bucket_id:e.fromBucketId,target_bucket_id:e.toBucketId,amount:s,reason:"sdk_transfer",timestamp:a,nonce:i.nonce,deadline:i.deadline,signature:o,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bucket/v1/bucket/transfer",l)).body}async extractToBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=typeof e.amount=="string"?e.amount:bt(e.amount),r={action:n7,bucketId:e.bucketId,asset:e.assetId,amount:s},i=await this.buildCompleteMessage(r),o=await this.signPayload(i),a=Math.floor(Date.now()/1e3),l={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:a,nonce:i.nonce,deadline:i.deadline,signature:o,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/extract-to-bucket",l)).body}async withdrawFromBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=typeof e.amount=="string"?e.amount:bt(e.amount),r={action:s7,bucketId:e.bucketId,asset:e.assetId,amount:s},i=await this.buildCompleteMessage(r),o=await this.signPayload(i),a=Math.floor(Date.now()/1e3),l={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:a,nonce:i.nonce,deadline:i.deadline,signature:o,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/withdraw-from-bucket",l)).body}async bankMint(e){if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=typeof e.amount=="string"?e.amount:bt(e.amount),s={action:t7,asset:e.assetId,amount:n},r=await this.buildCompleteMessage(s),i=await this.signPayload(r),o=this.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async bankTransfer(e){if(!e.to||e.to.trim()==="")throw new Error("to address cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=typeof e.amount=="string"?e.amount:bt(e.amount),s={action:i7,to:e.to,asset:e.assetId,amount:n},r=await this.buildCompleteMessage(s),i=await this.signPayload(r),o=this.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}}class o7{constructor(e){ie(this,"ws",null);ie(this,"state",Je.Disconnected);ie(this,"handlers",new Map);ie(this,"reconnectTimer",null);ie(this,"reconnectAttempts",0);ie(this,"config");ie(this,"originalConfig");ie(this,"pingInterval",null);ie(this,"stateChangeHandlers",new Set);this.originalConfig=e;const n=this.convertHTTPToWebSocketURL(e.url);this.config={url:n,authToken:e.authToken||"",walletAddress:e.walletAddress||"",deviceID:e.deviceID||"",reconnectInterval:e.reconnectInterval||5e3,maxReconnectAttempts:e.maxReconnectAttempts||10}}convertHTTPToWebSocketURL(e){if(e.startsWith("ws://")||e.startsWith("wss://")){if(e.includes("router.morpheum.io")){const n=new URL(e);if(!n.pathname||n.pathname==="/")return n.pathname="/websocket",n.toString()}return e}if(e.includes("localhost")||e.includes("127.0.0.1")){const n=e.match(/:(\d+)/);return`ws://localhost:${n?n[1]:"8080"}/websocket`}if(e.startsWith("http://")){const n=e.replace("http://","ws://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(e.startsWith("https://")){const n=e.replace("https://","wss://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(!e||e.trim()===""||e.includes("router.morpheum.io"))return"wss://router.morpheum.io/websocket";try{const n=new URL(e.startsWith("http")?e:`https://${e}`),s=n.protocol==="https:"?"wss:":"ws:",r=n.pathname&&n.pathname!=="/"?n.pathname:"",i=r.endsWith("/websocket")?r:`${r}/websocket`;return`${s}//${n.host}${i}`}catch{return console.warn(`Failed to parse URL ${e}, defaulting to router.morpheum.io/websocket`),"wss://router.morpheum.io/websocket"}}getConnectionURL(){const e=[];this.config.authToken&&e.push(`token=${encodeURIComponent(this.config.authToken)}`),"walletAddress"in this.originalConfig&&this.originalConfig.walletAddress!==void 0&&e.push(`wallet=${encodeURIComponent(this.originalConfig.walletAddress||"")}`),this.config.deviceID&&e.push(`device_id=${encodeURIComponent(this.config.deviceID)}`);const n=this.config.url.includes("?")?"&":"?";return e.length>0?`${this.config.url}${n}${e.join("&")}`:this.config.url}async connect(){if(!(this.state===Je.Connected||this.state===Je.Connecting))return this.setState(Je.Connecting),new Promise((e,n)=>{let s=!1,r=!1,i=null;const o=a=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),this.setState(Je.Disconnected),n(a))};try{const a=this.getConnectionURL();console.log("Connecting to WebSocket:",a);const l=new WebSocket(a);i=window.setTimeout(()=>{!s&&!r&&(l.close(),o(new Error(`WebSocket connection timeout after 10 seconds. Unable to connect to ${a}. Check if the server is running and accessible.`)))},1e4),l.onopen=()=>{if(i!==null&&(clearTimeout(i),i=null),s=!0,this.ws=l,this.setState(Je.Connected),this.reconnectAttempts=0,this.config.authToken)try{const c={type:"auth",token:this.config.authToken};this.config.deviceID&&(c.device_id=this.config.deviceID),l.send(JSON.stringify(c))}catch(c){console.warn("Failed to send auth message after connection:",c)}this.startPing(),e()},l.onmessage=c=>{try{const u=JSON.parse(c.data);this.handleMessage(u)}catch(u){console.error("Failed to parse WebSocket message:",u)}},l.onerror=c=>{console.error("WebSocket error event:",c)},l.onclose=c=>{if(i!==null&&(clearTimeout(i),i=null),this.ws=null,this.stopPing(),!s&&!r){const u=c.code,d=c.reason||"Unknown reason",h=c.wasClean;let p=`WebSocket connection failed. Close code: ${u}`;u===1006?p=`WebSocket connection failed (abnormal closure, code ${u}). Unable to connect to ${a}. Possible causes: Server is not running, network issue, firewall blocking connection, or incorrect URL.`:u===1002?p=`WebSocket protocol error (code ${u}). The server may not support WebSocket protocol or there's a protocol mismatch.`:u===1003?p=`WebSocket unsupported data type (code ${u}).`:u===1008?p=`WebSocket connection closed due to policy violation (code ${u}): ${d}`:u===1011?p=`WebSocket server error (code ${u}): ${d}`:u===1e3?p=`WebSocket connection closed normally (code ${u}) but before opening.`:d&&d!=="Unknown reason"&&(p+=` Reason: ${d}`),!h&&u===1006&&(p+=" This usually indicates the connection was refused or the server is unreachable."),o(new Error(p))}else s&&(this.setState(Je.Disconnected),this.scheduleReconnect())}}catch(a){i!==null&&(clearTimeout(i),i=null);const l=a instanceof Error?a.message:String(a);o(new Error(`Failed to create WebSocket connection: ${l}`))}})}disconnect(){this.cancelReconnect(),this.stopPing(),this.ws&&(this.ws.close(),this.ws=null),this.handlers.clear(),this.stateChangeHandlers.clear(),this.setState(Je.Disconnected)}send(e){if(this.state!==Je.Connected||!this.ws)throw new Error("WebSocket not connected");this.ws.send(JSON.stringify(e))}on(e,n){this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(n)}off(e,n){if(!n){this.handlers.delete(e);return}const s=this.handlers.get(e);if(s){const r=s.indexOf(n);r>-1&&s.splice(r,1)}}getState(){return this.state}isConnected(){return this.state===Je.Connected}setState(e){const n=this.state;this.state=e,n!==e&&this.stateChangeHandlers.forEach(s=>{try{s(e)}catch(r){console.error("Error in state change handler:",r)}})}onStateChange(e){return this.stateChangeHandlers.add(e),()=>{this.stateChangeHandlers.delete(e)}}handleMessage(e){let n;if(typeof e.type=="string")if(e.type==="data")if(typeof e.channel=="string")n=e.channel;else{console.error("Missing channel in data message");return}else e.type==="error"?(n="error",e.error&&console.error("WebSocket server error:",{code:e.error.code,message:e.error.message,details:e.error.details})):e.type==="ack"?n="ack":e.type==="pong"?n="pong":n=e.type;else typeof e.event=="string"?n=e.event:n="message";const s=this.handlers.get(n)||[],r=this.handlers.get("*")||[];s.forEach(i=>{try{i(e)}catch(o){console.error(`Error in handler for ${n}:`,o)}}),n!=="error"&&r.forEach(i=>{try{i(e)}catch(o){console.error("Error in wildcard handler:",o)}})}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}this.reconnectAttempts++,this.setState(Je.Reconnecting),this.reconnectTimer=window.setTimeout(()=>{this.connect().catch(e=>{console.error("Reconnection failed:",e)})},this.config.reconnectInterval)}cancelReconnect(){this.reconnectTimer!==null&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectAttempts=0}startPing(){this.pingInterval=window.setInterval(()=>{this.ws&&this.state===Je.Connected&&this.send({type:"ping"})},3e4)}stopPing(){this.pingInterval!==null&&(clearInterval(this.pingInterval),this.pingInterval=null)}setAuthToken(e,n,s){this.config.authToken=e,this.config.walletAddress=n,this.config.deviceID=s,this.originalConfig.authToken=e,this.originalConfig.walletAddress=n,this.originalConfig.deviceID=s,console.log(`Auth set: address=${n}, device=${s}`)}updateAuth(e,n,s){e!==void 0&&(this.config.authToken=e,this.originalConfig.authToken=e),n!==void 0&&(this.config.walletAddress=n,this.originalConfig.walletAddress=n),s!==void 0&&(this.config.deviceID=s,this.originalConfig.deviceID=s),this.isConnected()&&(this.disconnect(),this.connect())}}class ko{constructor(e){ie(this,"wsClient");ie(this,"subscriptions",new Map);ie(this,"lastPriceWrappedCallbacks",new Map);ie(this,"wrappedCallbacks",new Map);ie(this,"multiFeedSubscriptions",new Map);ie(this,"multiFeedHandlerRegistered",!1);this.wsClient=new o7({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID})}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.lastPriceWrappedCallbacks.clear(),this.wrappedCallbacks.clear(),this.multiFeedSubscriptions.clear(),this.multiFeedHandlerRegistered=!1}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,n,s){this.wsClient.setAuthToken(e,n,s)}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(n){return console.error("Failed to parse router data field:",n),null}return e}extractRouterData(e){if(e.type==="data"&&e.data){const n=this.parseRouterData(e.data);return n||console.warn("[SubscriptionClient] Failed to parse router data:",e.data),n}return e.type==="error"&&e.error?(console.error("WebSocket error response:",e.error),null):(e.type==="ack"||(e.type!=="data"?console.debug("[SubscriptionClient] Unexpected message type:",e.type,"Full message:",e):e.data||console.warn("[SubscriptionClient] Message type is 'data' but missing data field:",e)),null)}subscribeOrderbook(e,n,s=!0){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="orderbook";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&(s&&l.bids&&Array.isArray(l.bids)&&(l.bids=l.bids.map(([c,u])=>[Ce(c),Ce(u)])),s&&l.asks&&Array.isArray(l.asks)&&(l.asks=l.asks.map(([c,u])=>[Ce(c),Ce(u)])),n(l))};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeOrderbook(e,n){var i,o;const s="orderbook",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTrades(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="trades";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"trades",params:{market_id:e.toString()}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeTrades(e,n){var i,o;const s="trades",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"trades",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTicker(e,n){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="moniker",r="ticker";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&n(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(s,i);try{this.wsClient.send({type:"subscribe",channel:s,params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTicker(e,n){var o,a;const s="ticker",r="moniker",i=this.subscriptions.get(s)||[];if(n){const l=i.indexOf(n);if(l>-1){i.splice(l,1),this.subscriptions.set(s,i);const c=(o=this.wrappedCallbacks.get(s))==null?void 0:o.get(n);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(s).delete(n))}}else{const l=this.wrappedCallbacks.get(s);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((a=this.subscriptions.get(s))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:r,params:{market_id:e.toString()}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeUserUpdates(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="positions";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"positions",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeUserUpdates(e){var r,i;const n="positions",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"positions"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeLastPrice(e,n,s=!0){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="last_price";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=o=>{console.debug("[SubscriptionClient] last_price message received:",o);const a=this.extractRouterData(o);if(!a){console.warn("[SubscriptionClient] Failed to extract trade data from message:",o);return}if(console.debug("[SubscriptionClient] Extracted trade data:",a),!a.price){console.warn("[SubscriptionClient] Trade data missing price field:",a);return}s&&(a.price&&(a.price=Ce(a.price)),a.quantity&&(a.quantity=Ce(a.quantity))),console.debug("[SubscriptionClient] Calling callback with trade data:",a),n(a)};this.lastPriceWrappedCallbacks.set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){this.lastPriceWrappedCallbacks.delete(n);const a=this.subscriptions.get(r)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(r,a)),o}}unsubscribeLastPrice(e,n){var i;const s="last_price",r=this.subscriptions.get(s)||[];if(n){const o=r.indexOf(n);if(o>-1){r.splice(o,1),this.subscriptions.set(s,r);const a=this.lastPriceWrappedCallbacks.get(n);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(n))}}else r.forEach(o=>{const a=this.lastPriceWrappedCallbacks.get(o);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(o))}),this.subscriptions.delete(s);if(((i=this.subscriptions.get(s))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeFundingRate(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="funding_rate";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"funding_rate",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeFundingRate(e,n){var i,o;const s="funding_rate",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"funding_rate",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeBuckets(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="buckets";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"buckets",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBuckets(e){var r,i;const n="buckets",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"buckets"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeDeviation(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="deviation";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"deviation",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeDeviation(e,n){var i,o;const s="deviation",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"deviation",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeIndexPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="index_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"index_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeIndexPrice(e,n){var i,o;const s="index_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"index_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeKline(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n)throw new Error("Interval is required for kline subscription");const r="kline";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeKline(e,n,s){var o,a;const r="kline",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMarkPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="mark_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"mark_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeMarkPrice(e,n){var i,o;const s="mark_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"mark_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribePriceFeed(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="price_feed";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"price_feed",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribePriceFeed(e,n){var i,o;const s="price_feed",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"price_feed",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTWAP(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n||n<=0)throw new Error("Window size must be a positive number");const r="twap";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTWAP(e,n,s){var o,a;const r="twap",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMultiFeed(e,n,s,r){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const i="multi_feed";if(!this.multiFeedHandlerRegistered){const o=a=>{if(a.type==="data"&&a.channel==="multi_feed"&&a.sub_channel){const l=a.sub_channel,c=this.multiFeedSubscriptions.get(l)||[],u=this.subscriptions.get(i)||[];let d=a.data;if(typeof d=="string")try{d=JSON.parse(d)}catch(h){console.error("Failed to parse multi-feed data field:",h);return}d&&(c.forEach(h=>{try{h(d)}catch(p){console.error(`Error in multi-feed sub-channel callback for ${l}:`,p)}}),u.forEach(h=>{try{h({sub_channel:l,data:d})}catch(p){console.error("Error in multi-feed callback:",p)}}))}};this.wsClient.on(i,o),this.multiFeedHandlerRegistered=!0}this.subscriptions.has(i)||this.subscriptions.set(i,[]),this.subscriptions.get(i).push(s);try{const o={market_id:e.toString(),symbol:n};r&&(o.interval=r),this.wsClient.send({type:"subscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed",params:o})}catch(o){const a=this.subscriptions.get(i)||[],l=a.indexOf(s);throw l>-1&&(a.splice(l,1),this.subscriptions.set(i,a)),o}}subscribeMultiFeedSubChannel(e,n,s,r,i){if(this.multiFeedSubscriptions.has(s)||this.multiFeedSubscriptions.set(s,[]),this.multiFeedSubscriptions.get(s).push(r),(this.subscriptions.get("multi_feed")||[]).length===0){const a=()=>{};this.subscribeMultiFeed(e,n,a,i)}}unsubscribeMultiFeed(e,n,s){var o,a;const r="multi_feed",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);l>-1&&(i.splice(l,1),this.subscriptions.set(r,i))}else this.subscriptions.delete(r);if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.multiFeedSubscriptions.clear(),((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}unsubscribeMultiFeedSubChannel(e,n){const s=this.multiFeedSubscriptions.get(e)||[];if(n){const r=s.indexOf(n);r>-1&&(s.splice(r,1),s.length===0?this.multiFeedSubscriptions.delete(e):this.multiFeedSubscriptions.set(e,s))}else this.multiFeedSubscriptions.delete(e)}subscribeBalances(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="balances";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"balances",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBalances(e){var r,i;const n="balances",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"balances"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeOrders(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="orders";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"orders",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeOrders(e){var r,i;const n="orders",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orders"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}}async function a7(t,e,n,s,r){const i=eu.fromPhrase(t.trim(),"","m/44'/60'/0'/0/0");if(i.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${i.address} does not match provided ${e}`);let o;try{o=new Js(i.privateKey)}catch(v){throw new Error(`Invalid private key: cannot create signing key - ${v.message}`)}const a=Tu(o.publicKey);if(a.toLowerCase()!==e.toLowerCase())throw new Error(`Private key validation failed: derived address ${a} does not match ${e}`);const l=BigInt(i.privateKey),c=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(l===0n||l>=c)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const d=l.toString(16).toLowerCase().padStart(64,"0"),h=be("0x"+d);if(h.length!==32)throw new Error(`Invalid private key: expected 32 bytes, got ${h.length}`);if(h.every(v=>v===0))throw new Error("Invalid private key: cannot be zero");const m=BigInt("0x"+d);if(m!==l)throw new Error(`Private key encoding error: bytes do not match BigInt value. Original: ${l.toString(16)}, Reconstructed: ${m.toString(16)}`);const x=d;if(x.length!==64)throw new Error(`Invalid private key format: expected exactly 64 hex chars, got ${x.length}. This should never happen with a valid 32-byte private key.`);if(!/^[0-9a-f]{64}$/.test(x))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");const w=x,g={action:Pb,owner:e.toLowerCase(),nonce:n,timestamp:s,deadline:r},y={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:s,payload:g,deadline:parseInt(r,16)};console.log("[Onboard] Signing EIP-712 typed data with generateSingleSignature:",y),console.log("[Onboard] Private key format validated:",{length:w.length,format:"64 lowercase hex chars (no 0x prefix) - matches Go's hex.EncodeToString",preview:`${w.substring(0,8)}...${w.substring(56)}`,isValidSecp256k1:!0,withinCurveOrder:l<c,notZero:l!==0n,bytesLength:h.length,fullHex:w,firstByte:w.substring(0,2),lastByte:w.substring(62,64)}),console.log("[Onboard] Calling WASM GenerateSingleSignature with:",{txJSONLength:JSON.stringify(y).length,privateKeyHexLength:w.length,privateKeyHexPreview:w,signerAddress:e.toLowerCase()});const b=await Ae.generateSingleSignature(JSON.stringify(y),w,e.toLowerCase());if(console.log(b),!b.success||!b.signature)throw new Error(b.error||"Failed to generate signature");return console.log("[Onboard] signature:",b.signature),b.signature}async function l7(t){var e,n;try{const s=await a7(t.mnemonic,t.walletAddress,t.message.nonce,t.message.timestamp,t.message.deadline);console.log("[Onboard] Signature generated successfully, length:",s.length);const r={address:t.walletAddress,signature:s,nonce:t.message.nonce,timestamp:t.timestamp,deadline:t.message.deadline,action:Pb};t.username&&(r.username=t.username),t.referralCode&&(r.referral_code=t.referralCode),console.log("[Onboard] Request body:",{...r,signature:s.substring(0,20)+"..."});const o=await new lb(t.baseURL).post("/auth/v1/onboard",r);if(o.statusCode===200&&o.body){const a=o.body.access_token||o.body.authToken||o.body.token||o.body.accessToken,l=o.body.refresh_token||o.body.refreshToken,c=o.body.expires_at||o.body.expiresAt||(o.body.expires_in?t.timestamp+o.body.expires_in:void 0);return a?{success:!0,authToken:a,refreshToken:l,expiresAt:c}:{success:!1,error:"Response missing authToken field"}}else{const a=((e=o.body)==null?void 0:e.message)||((n=o.body)==null?void 0:n.error)||`HTTP ${o.statusCode}: ${o.body}`,l=new Error(a);throw l.responseBody=o.body,l.statusCode=o.statusCode,l}}catch(s){throw s}}const c7={auth:{maxRetries:4,baseDelay:500,maxDelay:3e3,jitter:!0,multiplier:2},http:{maxRetries:3,baseDelay:100,maxDelay:5e3,jitter:!0,multiplier:2},nonce:{maxRetries:5,baseDelay:200,maxDelay:2e3,jitter:!0,multiplier:1.5}};function u7(t,e){let n=t.baseDelay*Math.pow(t.multiplier,e);n>t.maxDelay&&(n=t.maxDelay);{const s=n*.25*Math.random();n+=s}return Math.floor(n)}function d7(t){return new Promise(e=>setTimeout(e,t))}async function h7(t,e,n=()=>!0){let s;for(let r=0;r<=t.maxRetries;r++)try{return await e()}catch(i){if(s=i,!await Promise.resolve(n(i)))throw i;if(r>=t.maxRetries)break;const a=u7(t,r);await d7(a)}throw new Error(`Operation failed after ${t.maxRetries+1} attempts: ${(s==null?void 0:s.message)||s}`)}async function X5(t,e,n,s){try{Ae.isReady()||await Ae.initialize();const r=await Ae.generateAddress(t,0);if(!r.success||!r.address)return{success:!1,error:`Failed to generate address: ${r.error}`};const i=r.address.toLowerCase(),o=new vn({baseURL:e}),a=new K5(o);let l=null;try{return await h7(c7.auth,async()=>{console.log(`[Onboard] Attempt starting - currentNonce: ${l}`),l===null?(l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] First attempt: queried server, using next nonce: ${l}`)):console.log(`[Onboard] Retry attempt: using incremented nonce ${l} from previous failure`);let u=0;const d=10;for(;u<d;)try{await a.validateNonce(i,l,!0);break}catch(w){if(u++,w.message.includes("already pending")||w.message.includes("already used")){if(l=l+1,console.log(`[Onboard] Nonce ${l-1} already pending, incrementing to ${l}`),u>=d)throw new Error(`Failed to find available nonce after ${d} attempts`)}else throw w}const h=Math.floor(Date.now()/1e3),p=h+3600,m={action:Pb,owner:i,nonce:Hv(l),timestamp:h,deadline:Hv(p)};let x;try{x=await l7({mnemonic:t,walletAddress:i,message:m,baseURL:e,username:n,referralCode:s,timestamp:h})}catch(w){if(l!==null){const g=l;try{await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Rejected nonce ${g}, incremented to nonce ${l} (will use on retry)`)}catch(y){console.warn("[Onboard] Failed to reject nonce after thrown error:",y),l=l+1,console.log(`[Onboard] Incremented nonce to ${l} (reject failed but incrementing anyway)`)}}else console.warn("[Onboard] Error thrown but currentNonce is null, cannot reject/increment");throw w.currentNonce=l,w}if(!x.success){if(l!==null){const g=l;await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Request failed with nonce ${g}, rejected and incremented to ${l} (will keep incrementing until it works)`)}const w=new Error(x.error||"Onboarding failed");throw w.onboardResult=x,w}return l!==null&&await a.commitNonce(i,l,!0),x},async u=>{var g,y,b;const d=String(u).toLowerCase(),h=((g=u==null?void 0:u.message)==null?void 0:g.toLowerCase())||d,p=(u==null?void 0:u.responseBody)||(u==null?void 0:u.onboardResult),m=((y=p==null?void 0:p.error)==null?void 0:y.toLowerCase())||((b=p==null?void 0:p.message)==null?void 0:b.toLowerCase())||"";if(`${h} ${d} ${m}`.toLowerCase().includes("nonce already pending")){if(l!==null){const v=l;l=l+1,console.log(`[Onboard] Off-chain operation: nonce ${v} already pending/used, incrementing to ${l} (server will validate)`)}else try{l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] currentNonce was null, queried server for starting nonce: ${l}`)}catch(v){console.warn("[Onboard] Failed to query server nonce:",v),l=1}return!0}return q5(u)?(console.log('[Onboard] Nonce-consuming error detected (not "already pending"), clearing currentNonce to force re-query'),l=null,!0):!["failed to generate address","address mismatch","invalid mnemonic"].some(v=>d.includes(v))})}catch(c){if(l!==null)try{await a.rejectNonce(i,l,!0)}catch(u){console.warn("[Onboard] Failed to reject nonce during cleanup:",u)}return{success:!1,error:(c==null?void 0:c.message)||"Unknown error during onboarding"}}}catch(r){return{success:!1,error:(r==null?void 0:r.message)||"Unknown error during onboarding"}}}const f7=Object.freeze(Object.defineProperty({__proto__:null,onboardAndGetAuthToken:X5},Symbol.toStringTag,{value:"Module"})),Cw=t=>{let e;const n=new Set,s=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(p=>p(e,h))}},r=()=>e,a={setState:s,getState:r,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(s,r,a);return a},p7=t=>t?Cw(t):Cw,g7=t=>t;function m7(t,e=g7){const n=ae.useSyncExternalStore(t.subscribe,ae.useCallback(()=>e(t.getState()),[t,e]),ae.useCallback(()=>e(t.getInitialState()),[t,e]));return ae.useDebugValue(n),n}const Ew=t=>{const e=p7(t),n=s=>m7(e,s);return Object.assign(n,e),n},x7=t=>t?Ew(t):Ew,ot=x7((t,e)=>({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,selectedMarketId:null,loadingMarkets:!1,loadingOrderbooks:new Set,loadingTickers:new Set,loadingTrades:new Set,errors:new Map,setMarkets:n=>{const s=new Map,r=new Map;n.forEach(a=>{s.set(a.id,a),a.symbol&&r.set(a.symbol,a),a.moniker&&r.set(a.moniker,a)});let o=e().selectedMarketId;if(!o&&n.length>0){const l=n.find(u=>u.active)||n[0],c=l.market_id?l.market_id:l.id?typeof l.id=="string"?l.id:l.id.toString():null;c&&(o=c)}t({markets:n,marketsById:s,marketsBySymbol:r,selectedMarketId:o,lastUpdated:new Map(e().lastUpdated).set("markets",Date.now())})},setMarket:n=>{const s=e(),r=new Map(s.marketsById),i=new Map(s.marketsBySymbol);r.set(n.id,n),n.symbol&&i.set(n.symbol,n),n.moniker&&i.set(n.moniker,n);const o=s.markets.find(a=>a.id===n.id)?s.markets.map(a=>a.id===n.id?n:a):[...s.markets,n];t({markets:o,marketsById:r,marketsBySymbol:i})},getMarket:n=>e().marketsById.get(n),getMarketBySymbol:n=>e().marketsBySymbol.get(n),setSelectedMarketId:n=>{t({selectedMarketId:n})},setOrderbook:(n,s)=>{const r=e(),i=new Map(r.orderbooks);i.set(n,{...s,timestamp:Date.now()}),t({orderbooks:i,lastUpdated:new Map(r.lastUpdated).set(n,Date.now())})},getOrderbook:n=>e().orderbooks.get(n),updateOrderbook:(n,s)=>{const r=e(),i=r.orderbooks.get(n);if(i){const o={...i,...s,timestamp:Date.now()};r.setOrderbook(n,o)}else r.setOrderbook(n,{bids:s.bids||[],asks:s.asks||[],timestamp:Date.now()})},setTicker:(n,s)=>{const r=e(),i=new Map(r.tickers);i.set(n,{...s,marketId:n,timestamp:Date.now()}),t({tickers:i,lastUpdated:new Map(r.lastUpdated).set(`ticker_${n}`,Date.now())})},getTicker:n=>e().tickers.get(n),setRecentTrades:(n,s)=>{const r=e(),i=new Map(r.recentTrades);i.set(n,s),t({recentTrades:i,lastUpdated:new Map(r.lastUpdated).set(`trades_${n}`,Date.now())})},getRecentTrades:n=>e().recentTrades.get(n),setLoading:(n,s)=>{const r=e();if(n==="markets")t({loadingMarkets:s});else if(n.startsWith("orderbook_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingOrderbooks);s?o.add(i):o.delete(i),t({loadingOrderbooks:o})}else if(n.startsWith("ticker_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTickers);s?o.add(i):o.delete(i),t({loadingTickers:o})}else if(n.startsWith("trades_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTrades);s?o.add(i):o.delete(i),t({loadingTrades:o})}},setError:(n,s)=>{const r=e(),i=new Map(r.errors);s?i.set(n,s):i.delete(n),t({errors:i})},clearError:n=>{e().setError(n,null)},clearCache:n=>{const s=e();if(n){const r=new Map(s.orderbooks),i=new Map(s.tickers),o=new Map(s.recentTrades),a=new Map(s.lastUpdated);r.delete(n),i.delete(n),o.delete(n),a.delete(n),a.delete(`ticker_${n}`),a.delete(`trades_${n}`),t({orderbooks:r,tickers:i,recentTrades:o,lastUpdated:a})}else t({orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map})},clearAllCache:()=>{t({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,errors:new Map,selectedMarketId:null})}}));function b7(){const[t,e]=k.useState({loading:!0,loaded:!1,error:null}),[n,s]=k.useState({initialized:!1,wasmLoaded:!1,ready:!1});k.useEffect(()=>{(async()=>{try{e(a=>({...a,loading:!0,error:null})),await Ae.initialize()?(e({loading:!1,loaded:!0,error:null}),s(Ae.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(Ae.getStatus()))}catch(o){e({loading:!1,loaded:!1,error:o instanceof Error?o.message:"Unknown error"}),s(Ae.getStatus())}})()},[]),k.useEffect(()=>{if(t.loaded){const i=setInterval(()=>{s(Ae.getStatus())},1e3);return()=>clearInterval(i)}},[t.loaded]);const r=async()=>{e({loading:!0,loaded:!1,error:null});try{await Ae.initialize()?(e({loading:!1,loaded:!0,error:null}),s(Ae.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(Ae.getStatus()))}catch(i){e({loading:!1,loaded:!1,error:i instanceof Error?i.message:"Unknown error"}),s(Ae.getStatus())}};return{wasmStatus:t,isReady:t.loaded&&n.ready,status:n,retry:r}}function y7(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=0){const[n,s]=k.useState(t),[r,i]=k.useState(e),[o,a]=k.useState(null),[l,c]=k.useState(!1);return{mnemonic:n,setMnemonic:s,addressIndex:r,setAddressIndex:i,result:o,loading:l,generateAddress:async()=>{if(!Ae.isReady()){a({success:!1,error:"WASM module not ready"});return}c(!0),a(null);try{const d=await Ae.generateAddress(n,r);a(d)}catch(d){a({success:!1,error:d instanceof Error?d.message:"Unknown error"})}finally{c(!1)}},isReady:Ae.isReady()}}function v7(){const[t,e]=k.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=k.useState("Hello, World!"),[r,i]=k.useState(!1),[o,a]=k.useState(0),[l,c]=k.useState(null),[u,d]=k.useState(!1);return{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:u,signMessage:async()=>{if(!Ae.isReady()){c({success:!1,error:"WASM module not ready"});return}d(!0),c(null);try{const p={addressIndex:o,useEIP712:r},m=r?await Ae.signEIP712(t,n,p):await Ae.signMessage(t,n,p);c(m)}catch(p){c({success:!1,error:p instanceof Error?p.message:"Unknown error"})}finally{d(!1)}},isReady:Ae.isReady()}}function w7(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=180,n="clob::submit_order,clob::cancel_order",s="TradingBot"){const[r,i]=k.useState(t),[o,a]=k.useState(""),[l,c]=k.useState(""),[u,d]=k.useState(""),[h,p]=k.useState(e),[m,x]=k.useState(n),[w,g]=k.useState(s),[y,b]=k.useState(Date.now().toString()),[v,S]=k.useState(null),[_,E]=k.useState(!1);return{ownerMnemonic:r,setOwnerMnemonic:i,ownerAddress:o,setOwnerAddress:a,agentAddress:l,setAgentAddress:c,agentPrivateKey:u,setAgentPrivateKey:d,expiresInDays:h,setExpiresInDays:p,permissions:m,setPermissions:x,agentName:w,setAgentName:g,nonce:y,setNonce:b,result:v,loading:_,generateOwnerAddress:async()=>{if(!Ae.isReady()){S({success:!1,error:"WASM module not ready"});return}E(!0);try{const A=await Ae.generateAddress(r,0);A.success&&A.address?a(A.address):S({success:!1,error:A.error||"Failed to generate owner address"})}catch(A){S({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},generateAgentKeypair:async()=>{if(!Ae.isReady()){S({success:!1,error:"WASM module not ready"});return}E(!0);try{const A=await Ae.generateKeypair();A.success&&A.address&&A.privateKey?(c(A.address),d(A.privateKey)):S({success:!1,error:A.error||"Failed to generate agent keypair"})}catch(A){S({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},prepareAgentSign:async()=>{if(!Ae.isReady()){S({success:!1,error:"WASM module not ready"});return}if(!o||!l){S({success:!1,error:"Owner and agent addresses are required"});return}E(!0),S(null);try{const A=m.split(",").map(H=>H.trim()).filter(H=>H.length>0),$=await Ae.prepareAgentSign({owner:o,agent:l,expiresInDays:h,permissions:A,nonce:y,agentName:w});S($)}catch(A){S({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},signAgentApproval:async()=>{if(!Ae.isReady()){S({success:!1,error:"WASM module not ready"});return}if(!o||!l||!r){S({success:!1,error:"Owner address, agent address, and owner mnemonic are required"});return}E(!0),S(null);try{const A=m.split(",").map(H=>H.trim()).filter(H=>H.length>0),$=await Ae.signAgentApproval(r,{owner:o,agent:l,expiresInDays:h,permissions:A,nonce:y,agentName:w});S($)}catch(A){S({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},isReady:Ae.isReady()}}const Iu="http://localhost:8080",Q5="ws://localhost:8080/websocket",S7="300px",k7="300px",_7="270px",C7="630px",Tb=5e3,E7="1",P7=100,T7=20,M7="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",I7=1,R7=100,A7=1,Pw=0,Tw=100,Mp=1,N7=.01,Mw=0,O7="BINANCE:BTCUSDT",D7="5",L7="https://s3.tradingview.com/tv.js",Ao=2,j7=2,ei="asc",da="desc",Tm="market",Ip="limit",F7="ORDER_TYPE_MARKET",z7="ORDER_TYPE_LIMIT",Iw="ORDER_TYPE_",nu="CROSS",B7="ISOLATED",$7="ONE_WAY",md="buy",U7="sell",Gr="LONG",Zh="SHORT",Rw="symbol",Aw="leverage",Nw="size",Ow="liquidationPrice",Dw="unrealizedPnL",Lw="entryPrice",jw="margin",Rp="all",Fw="byBucket",zw="1.5fr 1.2fr 1fr 1fr 1fr 1.2fr 1.2fr 1fr",W7="#51cf66",H7="#ff6b6b",V7="Loading positions...",Y7="No open positions",G7="POSITIONS",K7="All",q7="By Bucket",xd="--",Bw="symbol",$w="side",Uw="type",Ww="quantity",Hw="price",Vw="filledQuantity",Yw="status",Dr="pending",Gw="history",X7="ORDER_STATUS_PENDING",Q7="ORDER_STATUS_OPEN",J7="PARTIALLY_FILLED",Kw=[X7,Q7,"PENDING","OPEN","NEW",J7],Ap="#ffc107",Np="#17a2b8",qw="#28a745",Op="#dc3545",Xw="#dc3545",Z7="#6c757d",eR="#51cf66",tR="#ff6b6b",Qw="1.5fr 1fr 1fr 1.2fr 1.2fr 1.2fr 1fr 1fr",nR="Loading pending orders...",sR="No pending orders",rR="No historical orders",iR="PENDING ORDERS",oR="ORDER HISTORY",aR="Wallet address required to view pending orders",lR="Pending",cR="History",uR="--",dR="Unknown",Jw="LIMIT",Zw="MARKET";function hR(t){const[e,n]=k.useState(null),[s,r]=k.useState(null),[i,o]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState(null),[d,h]=k.useState(Tm),[p,m]=k.useState(0),[x,w]=k.useState(0),[g,y]=k.useState("0"),[b,v]=k.useState(A7),[S,_]=k.useState($7),[E,T]=k.useState(nu),[P,C]=k.useState(0),[R,A]=k.useState(0),[$,H]=k.useState(t.marketId||"1");k.useEffect(()=>{t.selectedBucketBalance!==void 0&&C(t.selectedBucketBalance)},[t.selectedBucketBalance]),k.useEffect(()=>{const K=new Mu({baseURL:t.baseURL,mnemonic:t.mnemonic}),ee=new vn({baseURL:t.baseURL});n(K),r(ee),K.initialize().then(()=>{o(!0)}).catch(se=>{console.error("Failed to initialize exchange client:",se),u({success:!1,error:`Initialization failed: ${se.message}`})})},[t.baseURL,t.mnemonic]);const F=k.useCallback(async()=>{if(!(!s||!e)&&t.selectedBucketBalance===void 0)try{const K=e.getWalletAddress(),ee=await s.getBalanceDecimal(K,"MORM");ee&&ee.available!==void 0&&C(ee.available||0)}catch(K){console.error("Failed to load balance:",K)}},[s,e,t.selectedBucketBalance]);k.useEffect(()=>{i&&s&&e&&t.selectedBucketBalance===void 0&&F()},[i,s,e,t.selectedBucketBalance,F]);const N=k.useCallback(async()=>{if(s)try{const K=await s.getTicker($);if(K&&K.lastPrice){const ee=typeof K.lastPrice=="string"?Ce(K.lastPrice):K.lastPrice;A(ee),(!g||g==="0")&&y(ee.toString())}}catch(K){console.error("Failed to load market price:",K)}},[s,$,g]);k.useEffect(()=>{i&&s&&N()},[i,s,N]);const z=k.useCallback(()=>d==="market"?t.tradePrice&&t.tradePrice>0?t.tradePrice:R:g?parseFloat(g):R,[d,g,R,t.tradePrice]),L=k.useCallback(()=>P*b,[P,b]),B=k.useCallback(()=>{let K;if(x>0)K=x;else{const se=L()*p/100,ge=z();if(ge<=0)return 0;K=se/ge}return t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&K>t.maxSizeLimit?t.maxSizeLimit:K},[x,p,L,z,t.maxSizeLimit]),M=k.useCallback(()=>{const K=B(),ee=z();return K*ee},[B,z]),G=k.useCallback(()=>{const K=B(),ee=z(),se=K*ee;return RC(se)},[B,z]),j=k.useCallback(()=>{const K=G();return b<=0?0:Math.floor(K/b)},[G,b]),I=k.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const K=B();if(K<=0){u({success:!1,error:"Invalid order size"});return}const ee=z();if(ee<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!g){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const se=bt(b.toString()),ge=await e.placeOrder({marketId:$,side:"buy",orderType:d,price:ee,quantity:K,leverage:se});u({success:!0,orderId:ge.orderId||ge.id,message:"Buy order placed successfully"}),await F()}catch(se){u({success:!1,error:se instanceof Error?se.message:"Unknown error"})}finally{l(!1)}},[e,i,B,z,d,g,b,$,F]),U=k.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const K=B();if(K<=0){u({success:!1,error:"Invalid order size"});return}const ee=z();if(ee<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!g){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const se=bt(b.toString()),ge=await e.placeOrder({marketId:$,side:"sell",orderType:d,price:ee,quantity:K,leverage:se});u({success:!0,orderId:ge.orderId||ge.id,message:"Sell order placed successfully"}),await F()}catch(se){u({success:!1,error:se instanceof Error?se.message:"Unknown error"})}finally{l(!1)}},[e,i,B,z,d,g,b,$,F]),q=k.useCallback(K=>{const ee=L(),se=ee*K/100,ge=t.tradePrice&&t.tradePrice>0?t.tradePrice:R>0?R:0,Ue=ge>0?se/ge:0;let Pe=isNaN(Ue)||!isFinite(Ue)?0:Math.round(Ue*1e8)/1e8;if(t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&Pe>t.maxSizeLimit){Pe=t.maxSizeLimit;const ke=z();if(Pe>0&&ee>0&&ke>0){const ft=Pe*ke/ee*100;m(Math.min(100,Math.max(0,ft)))}else m(K)}else m(K);w(Pe)},[L,R,t.tradePrice,t.maxSizeLimit,z]),X=k.useCallback(K=>{let ee=isNaN(K)||K<0?0:K;t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&ee>t.maxSizeLimit&&(ee=t.maxSizeLimit),w(ee);const se=L(),ge=z();if(ee>0&&se>0&&ge>0){const Pe=ee*ge/se*100;m(Math.min(100,Math.max(0,Pe)))}else m(0)},[L,z,t.maxSizeLimit]);return{orderType:d,setOrderType:h,fundPercent:p,sizeInput:x,price:g,leverage:b,positionMode:S,marginMode:E,availableBalance:P,currentPrice:R,marketId:$,isReady:i,loading:a,result:c,setFundPercent:q,setSizeInput:X,setPrice:y,setLeverage:v,setPositionMode:_,setMarginMode:T,setMarketId:H,placeBuyOrder:I,placeSellOrder:U,loadBalance:F,loadMarketPrice:N,calculateSize:B,calculateSizeUSD:M,calculateValue:G,calculateMargin:j,getOrderPrice:z,getAvailableTradeAmount:L}}function fR(t){const[e,n]=k.useState({asks:[],bids:[]}),[s,r]=k.useState(!0),[i,o]=k.useState(null),[a,l]=k.useState(!1),[c,u]=k.useState(null),d=k.useRef(null),h=k.useRef(null),p=k.useRef([]),m=k.useRef(null),x=k.useRef(!1),w=k.useRef(null),g=k.useRef(null),y=k.useRef(null),b=k.useCallback(P=>{const C=[...P].sort((A,$)=>$[0]-A[0]);let R=0;return C.map(([A,$])=>(R+=$,{price:A,size:$,cumulative:R,flash:null}))},[]),v=k.useCallback((P,C)=>{const R=new Map,A=new Map,$=new Map,H=new Map;P.asks.forEach(U=>{U.size>0&&R.set(U.price,U.size)}),P.bids.forEach(U=>{U.size>0&&A.set(U.price,U.size)}),C.asks&&C.asks.forEach(([U,q])=>{const X=R.get(U)||0;q===0?R.delete(U):(X>0?$.set(U,q>X?"up":"down"):$.set(U,"up"),R.set(U,q))}),C.bids&&C.bids.forEach(([U,q])=>{const X=A.get(U)||0;q===0?A.delete(U):(X>0?H.set(U,q>X?"up":"down"):H.set(U,"up"),A.set(U,q))});const F=Array.from(R.entries()),N=Array.from(A.entries()),z=b(F),L=b(N);z.forEach(U=>{U.flash=$.get(U.price)||null}),L.forEach(U=>{U.flash=H.get(U.price)||null});const B=t.maxDepth||100,M=z.slice(0,B),G=L.slice(0,B);let j,I;if(M.length>0&&G.length>0){const U=M[M.length-1].price,q=G[0].price;j=U-q,I=(U+q)/2}return{asks:M,bids:G,spread:j,midPrice:I}},[b,t.maxDepth]),S=k.useCallback(async()=>{if(d.current)try{const P=await d.current.getOrderbook(t.marketId,!0);if(P&&(P.bids||P.asks)){const C=P.asks||[],R=P.bids||[],A=b(C),$=b(R),H=t.maxDepth||100,F=A.slice(0,H),N=$.slice(0,H);let z,L;if(F.length>0&&N.length>0){const B=F[F.length-1].price,M=N[0].price;z=B-M,L=(B+M)/2}n({asks:F,bids:N,spread:z,midPrice:L})}}catch(P){o(P instanceof Error?P.message:"Failed to load orderbook")}},[t.marketId,t.maxDepth,b]),_=k.useCallback(async()=>{if(d.current){r(!0),o(null);try{const P=await d.current.getOrderbook(t.marketId,!0);if(P&&(P.bids||P.asks)){const C=P.asks||[],R=P.bids||[],A=b(C),$=b(R),H=t.maxDepth||100,F=A.slice(0,H),N=$.slice(0,H);let z,L;if(F.length>0&&N.length>0){const B=F[F.length-1].price,M=N[0].price;z=B-M,L=(B+M)/2}n({asks:F,bids:N,spread:z,midPrice:L})}}catch(P){o(P instanceof Error?P.message:"Failed to load orderbook")}finally{r(!1)}}},[t.marketId,t.maxDepth,b]),E=k.useCallback((P,C)=>{if(P.snapshot===!0||P.type==="snapshot"||P.bids&&P.asks&&P.bids.length>10&&P.asks.length>10&&!P.delta){const A=P.asks||[],$=P.bids||[],H=b(A),F=b($),N=t.maxDepth||100,z=H.slice(0,N),L=F.slice(0,N);let B,M;if(z.length>0&&L.length>0){const G=z[z.length-1].price,j=L[0].price;B=G-j,M=(G+j)/2}return{asks:z,bids:L,spread:B,midPrice:M}}else return v(C,{bids:P.bids,asks:P.asks})},[b,v,t.maxDepth]),T=k.useCallback(P=>{!P||!P.bids&&!P.asks||(p.current.push(P),m.current!==null&&clearTimeout(m.current),m.current=window.setTimeout(()=>{n(C=>{let R=C;for(const A of p.current)R=E(A,R);if(p.current=[],C.asks.length===R.asks.length&&C.bids.length===R.bids.length&&C.spread===R.spread&&C.midPrice===R.midPrice){const A=C.bids.length>0?C.bids[0].price:0,$=C.asks.length>0?C.asks[C.asks.length-1].price:0,H=R.bids.length>0?R.bids[0].price:0,F=R.asks.length>0?R.asks[R.asks.length-1].price:0;if(A===H&&$===F)return C}return R}),m.current=null},100))},[E]);return k.useEffect(()=>{const P=new vn({baseURL:t.baseURL});d.current=P;const C=new ko({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});h.current=C,w.current===null&&(w.current=t.marketId);const R=()=>{if(C.isConnected()){const F=w.current!==null?w.current:t.marketId;w.current!==null&&w.current!==F&&C.unsubscribeOrderbook(w.current,T),(!x.current||w.current!==F)&&(C.subscribeOrderbook(F,T,!0),x.current=!0,w.current=F)}},A=C.connect();y.current=window.setTimeout(()=>{!C.isConnected()&&d.current&&g.current===null&&(u("WebSocket connection timeout. Using HTTP polling."),l(!1),S(),g.current=window.setInterval(()=>{S()},5e3))},12e3),A.then(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),l(!0),u(null),R()}).catch(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),u("slow connection due to network issue"),l(!1),d.current&&(g.current!==null&&(clearInterval(g.current),g.current=null),S(),g.current=window.setInterval(()=>{S()},5e3))});let $=null;const H=C.wsClient;return H&&($=H.onStateChange(F=>{F===Je.Connected?(l(!0),u(null),x.current&&R()):(F===Je.Disconnected||F===Je.Reconnecting)&&(l(!1),x.current=!1,u("WebSocket disconnected. Using static data."))})),()=>{m.current!==null&&(clearTimeout(m.current),m.current=null),y.current!==null&&(clearTimeout(y.current),y.current=null),p.current=[],x.current=!1,w.current=null,$&&$(),h.current&&(w.current!==null&&h.current.unsubscribeOrderbook(w.current,T),h.current.disconnect())}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID]),k.useEffect(()=>{if(!d.current||!h.current)return;const P=w.current;return P!==null&&P!==t.marketId&&h.current.isConnected()&&(h.current.unsubscribeOrderbook(P,T),x.current=!1),n({asks:[],bids:[]}),r(!0),o(null),u(null),_(),h.current.isConnected()&&(h.current.subscribeOrderbook(t.marketId,T,!0),x.current=!0),w.current=t.marketId,()=>{h.current&&h.current.isConnected()&&w.current===t.marketId&&(h.current.unsubscribeOrderbook(t.marketId,T),x.current=!1)}},[t.marketId,_,T]),k.useEffect(()=>(g.current!==null&&(clearInterval(g.current),g.current=null),!a&&d.current&&(S(),g.current=window.setInterval(()=>{S()},5e3)),()=>{g.current!==null&&(clearInterval(g.current),g.current=null)}),[a,t.marketId,S]),k.useEffect(()=>{const P=setInterval(()=>{n(C=>({...C,asks:C.asks.map(R=>({...R,flash:null})),bids:C.bids.map(R=>({...R,flash:null}))}))},500);return()=>clearInterval(P)},[]),{orderbook:e,loading:s,error:i,isConnected:a,wsError:c,refresh:_}}function Ol(t){return t!==null&&typeof t=="object"&&typeof t.price=="number"&&typeof t.market_id=="string"&&typeof t.quantity=="number"&&typeof t.timestamp=="number"&&typeof t.is_buyer_maker=="boolean"&&typeof t.trade_id=="string"}function Dp(t){return t!==null&&typeof t=="object"&&typeof t.symbol=="string"&&typeof t.mark_price=="number"&&typeof t.timestamp=="number"}function r0(t){const[e,n]=k.useState(null),[s,r]=k.useState(null),[i,o]=k.useState(!0),[a,l]=k.useState(null),[c,u]=k.useState(!1),[d,h]=k.useState(null),p=k.useRef(null),m=k.useRef(null),x=k.useRef(!1),w=k.useRef(!1),g=k.useRef(null),y=k.useRef(null),b=k.useCallback(async()=>{if(!p.current){console.warn("[useTradePrice] pollRecentTrades called but infoClientRef.current is null");return}console.debug("[useTradePrice] Polling recent trades (marketId:",t.marketId,")");try{const P=t.limit||100,C=await p.current.getRecentTrades(t.marketId,P);if(C&&Array.isArray(C)&&C.length>0){console.debug("[useTradePrice] Polling received",C.length,"trades for marketId:",t.marketId);const A=[...C].sort((H,F)=>{const N=H.timestamp||0;return(F.timestamp||0)-N})[0];console.debug("[useTradePrice] Most recent trade:",A);const $={market_id:A.market_id||t.marketId,price:typeof A.price=="string"?Ce(A.price):A.price,quantity:typeof A.quantity=="string"?Ce(A.quantity):A.quantity||0,timestamp:A.timestamp||Date.now(),is_buyer_maker:A.is_buyer_maker||!1,trade_id:A.trade_id||A.id||""};console.debug("[useTradePrice] Processed lastPriceData:",$),n(H=>(H&&typeof H.price=="number"&&($.price>H.price?h("up"):$.price<H.price&&h("down")),setTimeout(()=>h(null),500),$)),console.debug("[useTradePrice] Polling successful - received trade price:",$.price)}else console.warn("[useTradePrice] Polling returned no trades or invalid data:",C)}catch(P){l(P instanceof Error?P.message:"Failed to load recent trades"),console.error("[useTradePrice] Failed to poll recent trades:",P)}},[t.marketId,t.limit]),v=k.useCallback(async()=>{if(p.current){o(!0),l(null);try{const P=t.limit||100,C=await p.current.getRecentTrades(t.marketId,P);if(C&&Array.isArray(C)&&C.length>0){const A=[...C].sort((H,F)=>{const N=H.timestamp||0;return(F.timestamp||0)-N})[0],$={market_id:A.market_id||t.marketId,price:typeof A.price=="string"?Ce(A.price):A.price,quantity:typeof A.quantity=="string"?Ce(A.quantity):A.quantity||0,timestamp:A.timestamp||Date.now(),is_buyer_maker:A.is_buyer_maker||!1,trade_id:A.trade_id||A.id||""};n($)}else console.warn("[useTradePrice] Initialization returned no trades or invalid data:",C)}catch(P){l(P instanceof Error?P.message:"Failed to load recent trades"),console.error("Failed to initialize recent trades:",P)}finally{o(!1)}}},[t.marketId,t.limit]),S=k.useCallback(P=>{if(console.debug("[useTradePrice] handleLastPriceUpdate called with data:",P),!P){console.warn("[useTradePrice] handleLastPriceUpdate received null/undefined data");return}if(!P.price&&P.price!==0){console.warn("[useTradePrice] handleLastPriceUpdate received data without price field:",P);return}const C=typeof P.price=="string"?Ce(P.price):Number(P.price),R=typeof P.quantity=="string"?Ce(P.quantity):Number(P.quantity)||0;if(isNaN(C)){console.warn("[useTradePrice] Invalid price value:",P.price);return}n(A=>{Ol(A)&&typeof A.price=="number"&&(C>A.price?h("up"):C<A.price&&h("down")),setTimeout(()=>h(null),500);const $={market_id:P.market_id||t.marketId,price:C,quantity:R,timestamp:P.timestamp||Date.now(),is_buyer_maker:P.is_buyer_maker||!1,trade_id:P.trade_id||P.id||""};return Ol($)||console.error("[useTradePrice] Invalid LastPriceData structure:",$),console.debug("[useTradePrice] Setting lastPrice to:",$),console.debug("[useTradePrice] Type check - isLastPriceData:",Ol($)),$})},[t.marketId]),_=k.useCallback(P=>{if(!P){console.warn("[useTradePrice] handleMarkPriceUpdate received null/undefined data");return}if(P.mark_price===void 0||P.mark_price===null){console.warn("[useTradePrice] handleMarkPriceUpdate received data without mark_price field:",P);return}const C=Number(P.mark_price);if(isNaN(C)){console.warn("[useTradePrice] Invalid mark_price value:",P.mark_price);return}const R={symbol:P.symbol||t.symbol||"",mark_price:C,timestamp:P.timestamp||Date.now()};Dp(R)||console.error("[useTradePrice] Invalid MarkPriceData structure:",R),r(R)},[t.symbol]);k.useEffect(()=>{const P=new vn({baseURL:t.baseURL});p.current=P;const C=new ko({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});m.current=C,v();const R=()=>{C.isConnected()&&(x.current||(C.subscribeLastPrice(t.marketId,S,!0),x.current=!0),t.symbol&&!w.current&&(C.subscribeMarkPrice(t.symbol,_),w.current=!0))};console.debug("[useTradePrice] Attempting WebSocket connection...");const A=C.connect();console.debug("[useTradePrice] Connect promise created, waiting for result..."),y.current=window.setTimeout(()=>{console.warn("[useTradePrice] WebSocket connection timeout fallback triggered after 12 seconds");const F=C.isConnected();console.warn("[useTradePrice] subscriptionClient.isConnected():",F,"hasPollingInterval:",g.current!==null),!F&&p.current&&g.current===null?(console.debug("[useTradePrice] Starting HTTP polling due to connection timeout (marketId:",t.marketId,")"),u(!1),b(),g.current=window.setInterval(()=>{b()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):F?console.debug("[useTradePrice] Connection established before timeout, no polling needed"):g.current!==null&&console.debug("[useTradePrice] Polling already started, skipping")},12e3),A.then(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),console.debug("[useTradePrice] WebSocket connected successfully"),u(!0),R()}).catch(F=>{y.current!==null&&(clearTimeout(y.current),y.current=null),console.error("[useTradePrice] WebSocket connection promise rejected:",F);const N=F instanceof Error?F.message:"Unknown error";console.info("WebSocket failed to establish connection. Falling back to HTTP polling:",N),u(!1),p.current?(g.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (WebSocket failure handler)"),clearInterval(g.current),g.current=null),console.debug("[useTradePrice] Starting HTTP polling due to WebSocket connection failure (marketId:",t.marketId,")"),b(),g.current=window.setInterval(()=>{b()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null")});let $=null;const H=C.wsClient;return H&&($=H.onStateChange(F=>{console.debug("[useTradePrice] WebSocket state changed to:",F),F===Je.Connected?(console.debug("[useTradePrice] WebSocket connected - stopping polling if active"),u(!0),x.current&&R()):(F===Je.Disconnected||F===Je.Reconnecting)&&(console.debug("[useTradePrice] WebSocket disconnected/reconnecting - polling effect should start polling"),u(!1),x.current=!1,w.current=!1)})),()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),x.current=!1,w.current=!1,$&&$(),m.current&&(m.current.unsubscribeLastPrice(t.marketId,S),t.symbol&&m.current.unsubscribeMarkPrice(t.symbol,_),m.current.disconnect())}},[t.baseURL,t.wsURL,t.marketId,t.symbol,t.authToken,t.walletAddress,t.deviceID]),k.useEffect(()=>{p.current&&m.current&&(m.current.isConnected()&&(m.current.unsubscribeLastPrice(t.marketId,S),x.current=!1,t.symbol&&(m.current.unsubscribeMarkPrice(t.symbol,_),w.current=!1)),v(),m.current.isConnected()&&(m.current.subscribeLastPrice(t.marketId,S,!0),x.current=!0,t.symbol&&(m.current.subscribeMarkPrice(t.symbol,_),w.current=!0)))},[t.marketId,t.symbol]),k.useEffect(()=>(console.debug("[useTradePrice] Polling effect triggered - isConnected:",c,"marketId:",t.marketId),g.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (polling effect)"),clearInterval(g.current),g.current=null),!c&&p.current?(console.debug("[useTradePrice] Starting HTTP polling (WebSocket disconnected, marketId:",t.marketId,")"),b(),g.current=window.setInterval(()=>{b()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):!c&&!p.current?console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null (isConnected:",c,")"):c&&console.debug("[useTradePrice] WebSocket connected, polling not needed"),()=>{g.current!==null&&(console.debug("[useTradePrice] Cleaning up polling interval (polling effect cleanup)"),clearInterval(g.current),g.current=null)}),[c,t.marketId]);const{displayPrice:E,displayTimestamp:T}=k.useMemo(()=>{const P=Ol(e)&&e.price!=null,C=Dp(s)&&s.mark_price!=null;if(P&&C){const R=e.timestamp||0,A=s.timestamp||0;return R>=A?{displayPrice:e.price,displayTimestamp:R}:{displayPrice:s.mark_price,displayTimestamp:A}}return P?{displayPrice:e.price,displayTimestamp:e.timestamp||0}:C?{displayPrice:s.mark_price,displayTimestamp:s.timestamp||0}:{displayPrice:null,displayTimestamp:null}},[e,s]);return{lastPrice:e,markPrice:s,displayPrice:E,displayTimestamp:T,loading:i,error:a,isConnected:c,priceChange:d,refresh:v,isLastPriceData:Ol,isMarkPriceData:Dp}}async function pR(t,e=3,n=1e3){let s=null;for(let r=0;r<=e;r++)try{return await t()}catch(i){if(s=i instanceof Error?i:new Error(String(i)),r<e){const o=n*Math.pow(2,r);await new Promise(a=>setTimeout(a,o))}}throw s||new Error("Retry failed")}function J5(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(null),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(null),h=k.useRef(null),p=k.useRef(!1),m=k.useRef(t);m.current=t;const x=k.useCallback(y=>{const b=y.size||0,v=b>=0?Gr:Zh;let S=y.margin;return!S&&y.leverage&&y.entryPrice&&b!==0&&(S=Math.abs(b*y.entryPrice/y.leverage)),{marketId:y.marketId||y.market_id||0,symbol:y.symbol||`m-${y.marketId||y.market_id||"N/A"}`,size:Math.abs(b),entryPrice:y.entryPrice||y.entry_price||0,markPrice:y.markPrice||y.mark_price||0,liquidationPrice:y.liquidationPrice||y.liquidation_price||void 0,unrealizedPnL:y.unrealizedPnL||y.unrealized_pnl||y.pnl||0,leverage:y.leverage?Number(y.leverage):void 0,margin:S||0,side:v,marginMode:y.marginMode||y.margin_mode||nu,bucketId:y.bucketId||y.bucket_id||void 0}},[]),w=k.useCallback(async()=>{if(!u.current)return;const y=m.current;if(!y.walletAddress||y.walletAddress.trim()===""){a(null),s([]),i(!1);return}a(null);try{const b=await pR(()=>u.current.getPositionsDecimal(y.walletAddress),3,1e3);if(Array.isArray(b)){const v=b.map(x);s(S=>{if(S.length!==v.length)return v;const _=JSON.stringify(S),E=JSON.stringify(v);return _===E?S:v})}else s(v=>v.length===0?v:[])}catch(b){const v=b instanceof Error?b.message:"Failed to load positions";a(v),console.error("Failed to fetch positions after retries:",b)}finally{i(!1)}},[x]),g=k.useCallback(y=>{if(y.positions&&Array.isArray(y.positions)){const b=y.positions.map(x);s(v=>{if(v.length!==b.length)return b;const S=JSON.stringify(v),_=JSON.stringify(b);return S===_?v:b})}},[x]);return k.useEffect(()=>{const y=new vn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=y,w(),e&&t.wsURL){const b=new ko({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=b;const v=()=>{b.isConnected()&&!p.current&&(b.subscribeUserUpdates(g),p.current=!0)};b.connect().then(()=>{c(!0),v()}).catch(E=>{console.error("Failed to connect WebSocket:",E),c(!1),t.refreshInterval&&t.refreshInterval>0&&(h.current=window.setInterval(()=>{w()},t.refreshInterval))});let S=null;const _=b.wsClient;return _&&(S=_.onStateChange(E=>{E===Je.Connected?(c(!0),p.current&&v(),h.current!==null&&(clearInterval(h.current),h.current=null)):(E===Je.Disconnected||E===Je.Reconnecting)&&(c(!1),p.current=!1,t.refreshInterval&&t.refreshInterval>0&&h.current===null&&(h.current=window.setInterval(()=>{w()},t.refreshInterval)))})),()=>{S&&S(),h.current!==null&&(clearInterval(h.current),h.current=null),d.current&&(d.current.unsubscribeUserUpdates(g),d.current.disconnect())}}else return t.refreshInterval&&t.refreshInterval>0&&(h.current=window.setInterval(()=>{w()},t.refreshInterval)),()=>{h.current!==null&&(clearInterval(h.current),h.current=null)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{positions:n,loading:r,error:o,isConnected:l,refresh:w}}function Z5(t){const[e,n]=k.useState([]),[s,r]=k.useState(!0),[i,o]=k.useState(null),a=k.useRef(null),l=k.useRef(null),c=k.useCallback(async()=>{if(a.current){o(null),r(!0);try{let u=[];try{if(t.walletAddress){const h=await a.current.getBuckets(t.walletAddress);u=Array.isArray(h)?h:[]}}catch{const p=await a.current.getPositionsDecimal();if(Array.isArray(p)){const m=new Map;p.forEach(x=>{const w=x.bucketId||x.bucket_id||"default",g=m.get(w)||{positions:[],totalMargin:0,totalPnL:0};g.positions.push(x),g.totalMargin+=x.margin||0,g.totalPnL+=x.unrealizedPnL||x.unrealized_pnl||0,m.set(w,g)}),u=Array.from(m.entries()).map(([x,w])=>{var g,y;return{bucketId:x,totalMargin:w.totalMargin,totalPositions:w.positions.length,unrealizedPnL:w.totalPnL,marginMode:((g=w.positions[0])==null?void 0:g.marginMode)||((y=w.positions[0])==null?void 0:y.margin_mode)||"CROSS"}})}}const d=u.map(h=>({bucketId:h.bucketId||h.bucket_id||h.id||"unknown",address:h.address||t.walletAddress,totalMargin:h.totalMargin||h.total_margin||0,totalPositions:h.totalPositions||h.total_positions||0,unrealizedPnL:h.unrealizedPnL||h.unrealized_pnl||h.pnl||0,leverage:h.leverage,marginMode:h.marginMode||h.margin_mode||"CROSS",createdAt:h.createdAt||h.created_at}));n(d)}catch(u){o(u instanceof Error?u.message:"Failed to load buckets"),console.error("Failed to fetch buckets:",u)}finally{r(!1)}}},[t.walletAddress]);return k.useEffect(()=>{const u=new vn({baseURL:t.baseURL,sessionToken:t.authToken});return a.current=u,c(),t.refreshInterval&&t.refreshInterval>0&&(l.current=window.setInterval(()=>{c()},t.refreshInterval)),()=>{l.current!==null&&(clearInterval(l.current),l.current=null)}},[t.baseURL,t.authToken,t.walletAddress,t.refreshInterval]),{buckets:e,loading:s,error:i,refresh:c}}function gR(t){const e=t.maxDataPoints||100,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(null),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(!1),h=k.useRef(null),p=k.useCallback(m=>{if(!m){console.warn("[useKline] handleKlineUpdate received null/undefined data");return}try{const x={market_id:m.market_id||String(t.marketId),symbol:m.symbol,interval:m.interval||t.interval,open_time:m.open_time||m.timestamp||Date.now(),close_time:m.close_time||m.open_time||Date.now(),open:typeof m.open=="string"?Ce(m.open):Number(m.open)||0,high:typeof m.high=="string"?Ce(m.high):Number(m.high)||0,low:typeof m.low=="string"?Ce(m.low):Number(m.low)||0,close:typeof m.close=="string"?Ce(m.close):Number(m.close)||0,volume:typeof m.volume=="string"?Ce(m.volume):Number(m.volume)||0,trade_count:m.trade_count||m.tradeCount,timestamp:m.timestamp||m.open_time||Date.now(),raw:m};s(w=>{const g=[...w,x];return g.length>e?g.slice(-e):g})}catch(x){console.error("[useKline] Error processing kline update:",x),a(x instanceof Error?x.message:"Failed to process kline data")}},[t.marketId,t.interval,e]);return k.useEffect(()=>{const m=new ko({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});u.current=m;const x=()=>{m.isConnected()&&(d.current||(m.subscribeKline(t.marketId,t.interval,p),d.current=!0))};console.debug("[useKline] Attempting WebSocket connection...");const w=m.connect();h.current=window.setTimeout(()=>{console.warn("[useKline] WebSocket connection timeout after 12 seconds"),m.isConnected()||(c(!1),a("WebSocket connection timeout"),i(!1))},12e3),w.then(()=>{h.current!==null&&(clearTimeout(h.current),h.current=null),console.debug("[useKline] WebSocket connected successfully"),c(!0),i(!1),x()}).catch(b=>{h.current!==null&&(clearTimeout(h.current),h.current=null),console.error("[useKline] WebSocket connection failed:",b);const v=b instanceof Error?b.message:"Unknown error";c(!1),a(v),i(!1)});let g=null;const y=m.wsClient;return y&&(g=y.onStateChange(b=>{console.debug("[useKline] WebSocket state changed to:",b),b===Je.Connected?(c(!0),d.current&&x()):(b===Je.Disconnected||b===Je.Reconnecting)&&(c(!1),d.current=!1)})),()=>{h.current!==null&&(clearTimeout(h.current),h.current=null),d.current=!1,g&&g(),u.current&&(u.current.unsubscribeKline(t.marketId,t.interval,p),u.current.disconnect())}},[t.wsURL,t.marketId,t.interval,t.authToken,t.walletAddress,t.deviceID,p]),{klineData:n,loading:r,error:o,isConnected:l}}function _o(t){const e=k.useRef(null),n=ot(j=>j.markets),s=ot(j=>j.marketsById),r=ot(j=>j.orderbooks),i=ot(j=>j.tickers),o=ot(j=>j.recentTrades),a=ot(j=>j.selectedMarketId),l=ot(j=>j.loadingMarkets),c=ot(j=>j.loadingOrderbooks),u=ot(j=>j.loadingTickers),d=ot(j=>j.loadingTrades),h=ot(j=>j.errors),p=ot(j=>j.setMarkets),m=ot(j=>j.setMarket),x=ot(j=>j.getMarket),w=ot(j=>j.getMarketBySymbol),g=ot(j=>j.setSelectedMarketId),y=ot(j=>j.setOrderbook),b=ot(j=>j.getOrderbook),v=ot(j=>j.updateOrderbook),S=ot(j=>j.setTicker),_=ot(j=>j.getTicker),E=ot(j=>j.setRecentTrades),T=ot(j=>j.getRecentTrades),P=ot(j=>j.setLoading),C=ot(j=>j.setError),R=ot(j=>j.clearError),A=ot(j=>j.clearCache);k.useEffect(()=>{e.current?t.sessionToken&&e.current.setSessionToken(t.sessionToken):e.current=new vn({baseURL:t.baseURL,sessionToken:t.sessionToken})},[t.baseURL,t.sessionToken]);const $=k.useCallback(async()=>{if(!e.current)throw new Error("InfoClient not initialized");const j="markets";P(j,!0),C(j,null);try{const I=await e.current.getMarkets(),q=(Array.isArray(I)?I:(I==null?void 0:I.markets)||[]).map((X,K)=>{let ee;if(X.id!==void 0)ee=typeof X.id=="string"?parseInt(X.id,10)||K+1:X.id;else if(X.market_id!==void 0){const se=String(X.market_id),ge=parseInt(se,10);isNaN(ge)?ee=K+1:ge>Number.MAX_SAFE_INTEGER?ee=ge%Number.MAX_SAFE_INTEGER||K+1:ee=ge}else ee=K+1;return{id:ee,symbol:X.symbol||X.moniker,moniker:X.moniker,baseAsset:X.base_asset||X.baseAsset,quoteAsset:X.quote_asset||X.quoteAsset,active:X.active!==void 0?X.active:X.status==="active",market_id:X.market_id,status:X.status,...X}});return p(q),q}catch(I){const U=I instanceof Error?I.message:"Failed to fetch markets";throw C(j,U),I}finally{P(j,!1)}},[p,P,C]),H=k.useCallback(async j=>{if(!e.current)throw new Error("InfoClient not initialized");const I=typeof j=="string"?parseInt(j,10):j,U=isNaN(I)?null:x(I);if(U)return U;try{const q=await e.current.getMarketByID(j);return q?(m(q),q):null}catch(q){const X=q instanceof Error?q.message:`Failed to fetch market ${j}`;throw C(`market_${j}`,X),q}},[x,m,C]),F=k.useCallback(async j=>{if(!e.current)throw new Error("InfoClient not initialized");const I=w(j);if(I)return I;try{const U=await e.current.getMarketByMoniker(j);return U?(m(U),U):null}catch(U){const q=U instanceof Error?U.message:`Failed to fetch market ${j}`;throw C(`market_${j}`,q),U}},[w,m,C]),N=k.useCallback(async(j,I=!0,U=20)=>{if(!e.current)throw new Error("InfoClient not initialized");const q=`orderbook_${j}`;P(q,!0),C(q,null);try{const X=await e.current.getOrderbook(j,I,U);if(X&&(X.bids||X.asks)){const K={bids:X.bids||[],asks:X.asks||[],timestamp:Date.now()};return y(typeof j=="string"?j:j.toString(),K),K}return null}catch(X){const K=X instanceof Error?X.message:`Failed to fetch orderbook for market ${j}`;throw C(q,K),X}finally{P(q,!1)}},[y,P,C]),z=k.useCallback(async j=>{if(!e.current)throw new Error("InfoClient not initialized");const I=`ticker_${j}`;P(I,!0),C(I,null);try{const U=await e.current.getTicker(j);if(U){const q=typeof j=="string"?j:j.toString(),X={marketId:q,...U,timestamp:Date.now()};return S(q,X),X}return null}catch(U){const q=U instanceof Error?U.message:`Failed to fetch ticker for market ${j}`;throw C(I,q),U}finally{P(I,!1)}},[S,P,C]),L=k.useCallback(async(j,I=100)=>{if(!e.current)throw new Error("InfoClient not initialized");const U=`trades_${j}`;P(U,!0),C(U,null);try{const q=await e.current.getRecentTrades(j,I);if(q){const X=Array.isArray(q)?q:[];return E(typeof j=="string"?j:j.toString(),X),X}return null}catch(q){const X=q instanceof Error?q.message:`Failed to fetch trades for market ${j}`;throw C(U,X),q}finally{P(U,!1)}},[E,P,C]);k.useEffect(()=>{t.autoFetchMarkets&&n.length===0&&!l&&$().catch(console.error)},[t.autoFetchMarkets,n.length,l,$]);const B=a?n.find(j=>{var I;return j.market_id===a||((I=j.id)==null?void 0:I.toString())===a}):null,M=B?B.moniker||B.symbol||(B.baseAsset&&B.quoteAsset?`${B.baseAsset}-${B.quoteAsset}`:null):null,G=k.useCallback(j=>{const I=typeof j=="string"?j:j.toString(),U=n.find(q=>{var X;return q.market_id===I||((X=q.id)==null?void 0:X.toString())===I});return U?U.moniker||U.symbol||(U.baseAsset&&U.quoteAsset?`${U.baseAsset}/${U.quoteAsset}`:null):null},[n]);return{markets:n,marketsById:s,orderbooks:r,tickers:i,recentTrades:o,selectedMarketId:a,selectedMarket:B,selectedMarketSymbol:M,loadingMarkets:l,loadingOrderbooks:c,loadingTickers:u,loadingTrades:d,isLoading:j=>{if(j==="markets")return l;if(j.startsWith("orderbook_")){const I=j.split("_").slice(1).join("_");return c.has(I)}if(j.startsWith("ticker_")){const I=j.split("_").slice(1).join("_");return u.has(I)}if(j.startsWith("trades_")){const I=j.split("_").slice(1).join("_");return d.has(I)}return!1},errors:h,getError:j=>h.get(j),getMarket:x,getMarketBySymbol:w,getSymbolByMarketId:G,getOrderbook:b,getTicker:_,getRecentTrades:T,fetchMarkets:$,fetchMarket:H,fetchMarketBySymbol:F,fetchOrderbook:N,fetchTicker:z,fetchRecentTrades:L,updateOrderbook:v,clearCache:A,clearError:R,setSelectedMarketId:g,infoClient:e.current}}function mR(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const xR=t=>{switch(t){case"success":return vR;case"info":return SR;case"warning":return wR;case"error":return kR;default:return null}},bR=Array(12).fill(0),yR=({visible:t,className:e})=>ae.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ae.createElement("div",{className:"sonner-spinner"},bR.map((n,s)=>ae.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),vR=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),wR=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),SR=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),kR=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_R=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),CR=()=>{const[t,e]=ae.useState(document.hidden);return ae.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let Mm=1;class ER{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:s,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Mm++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:s}),{...l,...e,id:i,dismissible:a,title:s}):l):this.addToast({title:s,...r,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i=s!==void 0,o;const a=r.then(async c=>{if(o=["resolve",c],ae.isValidElement(c))i=!1,this.create({id:s,type:"default",message:c});else if(TR(c)&&!c.ok){i=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,m=typeof d=="object"&&!ae.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:h,...m})}else if(c instanceof Error){i=!1;const d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,m=typeof d=="object"&&!ae.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:h,...m})}else if(n.success!==void 0){i=!1;const d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description,m=typeof d=="object"&&!ae.isValidElement(d)?d:{message:d};this.create({id:s,type:"success",description:h,...m})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description,p=typeof u=="object"&&!ae.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:d,...p})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,n)=>{const s=(n==null?void 0:n.id)||Mm++;return this.create({jsx:e(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const En=new ER,PR=(t,e)=>{const n=(e==null?void 0:e.id)||Mm++;return En.addToast({title:t,...e,id:n}),n},TR=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",MR=PR,IR=()=>En.toasts,RR=()=>En.getActiveToasts(),Ie=Object.assign(MR,{success:En.success,info:En.info,warning:En.warning,error:En.error,custom:En.custom,message:En.message,promise:En.promise,dismiss:En.dismiss,loading:En.loading},{getHistory:IR,getToasts:RR});mR("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function bd(t){return t.label!==void 0}const AR=3,NR="24px",OR="16px",e1=4e3,DR=356,LR=14,jR=45,FR=200;function js(...t){return t.filter(Boolean).join(" ")}function zR(t){const[e,n]=t.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}const BR=t=>{var e,n,s,r,i,o,a,l,c;const{invert:u,toast:d,unstyled:h,interacting:p,setHeights:m,visibleToasts:x,heights:w,index:g,toasts:y,expanded:b,removeToast:v,defaultRichColors:S,closeButton:_,style:E,cancelButtonStyle:T,actionButtonStyle:P,className:C="",descriptionClassName:R="",duration:A,position:$,gap:H,expandByDefault:F,classNames:N,icons:z,closeButtonAriaLabel:L="Close toast"}=t,[B,M]=ae.useState(null),[G,j]=ae.useState(null),[I,U]=ae.useState(!1),[q,X]=ae.useState(!1),[K,ee]=ae.useState(!1),[se,ge]=ae.useState(!1),[Ue,Pe]=ae.useState(!1),[ke,Te]=ae.useState(0),[ft,D]=ae.useState(0),Q=ae.useRef(d.duration||A||e1),oe=ae.useRef(null),de=ae.useRef(null),ve=g===0,ye=g+1<=x,W=d.type,le=d.dismissible!==!1,O=d.className||"",ne=d.descriptionClassName||"",re=ae.useMemo(()=>w.findIndex(V=>V.toastId===d.id)||0,[w,d.id]),Y=ae.useMemo(()=>{var V;return(V=d.closeButton)!=null?V:_},[d.closeButton,_]),he=ae.useMemo(()=>d.duration||A||e1,[d.duration,A]),Me=ae.useRef(0),we=ae.useRef(0),Ee=ae.useRef(0),We=ae.useRef(null),[Ze,lt]=$.split("-"),Ct=ae.useMemo(()=>w.reduce((V,Re,it)=>it>=re?V:V+Re.height,0),[w,re]),Vt=CR(),Ft=d.invert||u,Yt=W==="loading";we.current=ae.useMemo(()=>re*H+Ct,[re,Ct]),ae.useEffect(()=>{Q.current=he},[he]),ae.useEffect(()=>{U(!0)},[]),ae.useEffect(()=>{const V=de.current;if(V){const Re=V.getBoundingClientRect().height;return D(Re),m(it=>[{toastId:d.id,height:Re,position:d.position},...it]),()=>m(it=>it.filter(Ne=>Ne.toastId!==d.id))}},[m,d.id]),ae.useLayoutEffect(()=>{if(!I)return;const V=de.current,Re=V.style.height;V.style.height="auto";const it=V.getBoundingClientRect().height;V.style.height=Re,D(it),m(Ne=>Ne.find(je=>je.toastId===d.id)?Ne.map(je=>je.toastId===d.id?{...je,height:it}:je):[{toastId:d.id,height:it,position:d.position},...Ne])},[I,d.title,d.description,m,d.id,d.jsx,d.action,d.cancel]);const ct=ae.useCallback(()=>{X(!0),Te(we.current),m(V=>V.filter(Re=>Re.toastId!==d.id)),setTimeout(()=>{v(d)},FR)},[d,v,m,we]);ae.useEffect(()=>{if(d.promise&&W==="loading"||d.duration===1/0||d.type==="loading")return;let V;return b||p||Vt?(()=>{if(Ee.current<Me.current){const Ne=new Date().getTime()-Me.current;Q.current=Q.current-Ne}Ee.current=new Date().getTime()})():(()=>{Q.current!==1/0&&(Me.current=new Date().getTime(),V=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),ct()},Q.current))})(),()=>clearTimeout(V)},[b,p,d,W,Vt,ct]),ae.useEffect(()=>{d.delete&&(ct(),d.onDismiss==null||d.onDismiss.call(d,d))},[ct,d.delete]);function xs(){var V;if(z!=null&&z.loading){var Re;return ae.createElement("div",{className:js(N==null?void 0:N.loader,d==null||(Re=d.classNames)==null?void 0:Re.loader,"sonner-loader"),"data-visible":W==="loading"},z.loading)}return ae.createElement(yR,{className:js(N==null?void 0:N.loader,d==null||(V=d.classNames)==null?void 0:V.loader),visible:W==="loading"})}const gn=d.icon||(z==null?void 0:z[W])||xR(W);var te,J;return ae.createElement("li",{tabIndex:0,ref:de,className:js(C,O,N==null?void 0:N.toast,d==null||(e=d.classNames)==null?void 0:e.toast,N==null?void 0:N.default,N==null?void 0:N[W],d==null||(n=d.classNames)==null?void 0:n[W]),"data-sonner-toast":"","data-rich-colors":(te=d.richColors)!=null?te:S,"data-styled":!(d.jsx||d.unstyled||h),"data-mounted":I,"data-promise":!!d.promise,"data-swiped":Ue,"data-removed":q,"data-visible":ye,"data-y-position":Ze,"data-x-position":lt,"data-index":g,"data-front":ve,"data-swiping":K,"data-dismissible":le,"data-type":W,"data-invert":Ft,"data-swipe-out":se,"data-swipe-direction":G,"data-expanded":!!(b||F&&I),"data-testid":d.testId,style:{"--index":g,"--toasts-before":g,"--z-index":y.length-g,"--offset":`${q?ke:we.current}px`,"--initial-height":F?"auto":`${ft}px`,...E,...d.style},onDragEnd:()=>{ee(!1),M(null),We.current=null},onPointerDown:V=>{V.button!==2&&(Yt||!le||(oe.current=new Date,Te(we.current),V.target.setPointerCapture(V.pointerId),V.target.tagName!=="BUTTON"&&(ee(!0),We.current={x:V.clientX,y:V.clientY})))},onPointerUp:()=>{var V,Re,it;if(se||!le)return;We.current=null;const Ne=Number(((V=de.current)==null?void 0:V.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Gt=Number(((Re=de.current)==null?void 0:Re.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),je=new Date().getTime()-((it=oe.current)==null?void 0:it.getTime()),fe=B==="x"?Ne:Gt,Xe=Math.abs(fe)/je;if(Math.abs(fe)>=jR||Xe>.11){Te(we.current),d.onDismiss==null||d.onDismiss.call(d,d),j(B==="x"?Ne>0?"right":"left":Gt>0?"down":"up"),ct(),ge(!0);return}else{var Se,ze;(Se=de.current)==null||Se.style.setProperty("--swipe-amount-x","0px"),(ze=de.current)==null||ze.style.setProperty("--swipe-amount-y","0px")}Pe(!1),ee(!1),M(null)},onPointerMove:V=>{var Re,it,Ne;if(!We.current||!le||((Re=window.getSelection())==null?void 0:Re.toString().length)>0)return;const je=V.clientY-We.current.y,fe=V.clientX-We.current.x;var Xe;const Se=(Xe=t.swipeDirections)!=null?Xe:zR($);!B&&(Math.abs(fe)>1||Math.abs(je)>1)&&M(Math.abs(fe)>Math.abs(je)?"x":"y");let ze={x:0,y:0};const Ke=Ve=>1/(1.5+Math.abs(Ve)/20);if(B==="y"){if(Se.includes("top")||Se.includes("bottom"))if(Se.includes("top")&&je<0||Se.includes("bottom")&&je>0)ze.y=je;else{const Ve=je*Ke(je);ze.y=Math.abs(Ve)<Math.abs(je)?Ve:je}}else if(B==="x"&&(Se.includes("left")||Se.includes("right")))if(Se.includes("left")&&fe<0||Se.includes("right")&&fe>0)ze.x=fe;else{const Ve=fe*Ke(fe);ze.x=Math.abs(Ve)<Math.abs(fe)?Ve:fe}(Math.abs(ze.x)>0||Math.abs(ze.y)>0)&&Pe(!0),(it=de.current)==null||it.style.setProperty("--swipe-amount-x",`${ze.x}px`),(Ne=de.current)==null||Ne.style.setProperty("--swipe-amount-y",`${ze.y}px`)}},Y&&!d.jsx&&W!=="loading"?ae.createElement("button",{"aria-label":L,"data-disabled":Yt,"data-close-button":!0,onClick:Yt||!le?()=>{}:()=>{ct(),d.onDismiss==null||d.onDismiss.call(d,d)},className:js(N==null?void 0:N.closeButton,d==null||(s=d.classNames)==null?void 0:s.closeButton)},(J=z==null?void 0:z.close)!=null?J:_R):null,(W||d.icon||d.promise)&&d.icon!==null&&((z==null?void 0:z[W])!==null||d.icon)?ae.createElement("div",{"data-icon":"",className:js(N==null?void 0:N.icon,d==null||(r=d.classNames)==null?void 0:r.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||xs():null,d.type!=="loading"?gn:null):null,ae.createElement("div",{"data-content":"",className:js(N==null?void 0:N.content,d==null||(i=d.classNames)==null?void 0:i.content)},ae.createElement("div",{"data-title":"",className:js(N==null?void 0:N.title,d==null||(o=d.classNames)==null?void 0:o.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?ae.createElement("div",{"data-description":"",className:js(R,ne,N==null?void 0:N.description,d==null||(a=d.classNames)==null?void 0:a.description)},typeof d.description=="function"?d.description():d.description):null),ae.isValidElement(d.cancel)?d.cancel:d.cancel&&bd(d.cancel)?ae.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||T,onClick:V=>{bd(d.cancel)&&le&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,V),ct())},className:js(N==null?void 0:N.cancelButton,d==null||(l=d.classNames)==null?void 0:l.cancelButton)},d.cancel.label):null,ae.isValidElement(d.action)?d.action:d.action&&bd(d.action)?ae.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||P,onClick:V=>{bd(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,V),!V.defaultPrevented&&ct())},className:js(N==null?void 0:N.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function t1(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function $R(t,e){const n={};return[t,e].forEach((s,r)=>{const i=r===1,o=i?"--mobile-offset":"--offset",a=i?OR:NR;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(c=>{s[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof s[c]=="number"?`${s[c]}px`:s[c]}):l(a)}),n}const UR=ae.forwardRef(function(e,n){const{id:s,invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:l,className:c,offset:u,mobileOffset:d,theme:h="light",richColors:p,duration:m,style:x,visibleToasts:w=AR,toastOptions:g,dir:y=t1(),gap:b=LR,icons:v,containerAriaLabel:S="Notifications"}=e,[_,E]=ae.useState([]),T=ae.useMemo(()=>s?_.filter(I=>I.toasterId===s):_.filter(I=>!I.toasterId),[_,s]),P=ae.useMemo(()=>Array.from(new Set([i].concat(T.filter(I=>I.position).map(I=>I.position)))),[T,i]),[C,R]=ae.useState([]),[A,$]=ae.useState(!1),[H,F]=ae.useState(!1),[N,z]=ae.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=ae.useRef(null),B=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=ae.useRef(null),G=ae.useRef(!1),j=ae.useCallback(I=>{E(U=>{var q;return(q=U.find(X=>X.id===I.id))!=null&&q.delete||En.dismiss(I.id),U.filter(({id:X})=>X!==I.id)})},[]);return ae.useEffect(()=>En.subscribe(I=>{if(I.dismiss){requestAnimationFrame(()=>{E(U=>U.map(q=>q.id===I.id?{...q,delete:!0}:q))});return}setTimeout(()=>{R8.flushSync(()=>{E(U=>{const q=U.findIndex(X=>X.id===I.id);return q!==-1?[...U.slice(0,q),{...U[q],...I},...U.slice(q+1)]:[I,...U]})})})}),[_]),ae.useEffect(()=>{if(h!=="system"){z(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;const I=window.matchMedia("(prefers-color-scheme: dark)");try{I.addEventListener("change",({matches:U})=>{z(U?"dark":"light")})}catch{I.addListener(({matches:q})=>{try{z(q?"dark":"light")}catch(X){console.error(X)}})}},[h]),ae.useEffect(()=>{_.length<=1&&$(!1)},[_]),ae.useEffect(()=>{const I=U=>{var q;if(o.every(ee=>U[ee]||U.code===ee)){var K;$(!0),(K=L.current)==null||K.focus()}U.code==="Escape"&&(document.activeElement===L.current||(q=L.current)!=null&&q.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[o]),ae.useEffect(()=>{if(L.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,G.current=!1)}},[L.current]),ae.createElement("section",{ref:n,"aria-label":`${S} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((I,U)=>{var q;const[X,K]=I.split("-");return T.length?ae.createElement("ol",{key:I,dir:y==="auto"?t1():y,tabIndex:-1,ref:L,className:c,"data-sonner-toaster":!0,"data-sonner-theme":N,"data-y-position":X,"data-x-position":K,style:{"--front-toast-height":`${((q=C[0])==null?void 0:q.height)||0}px`,"--width":`${DR}px`,"--gap":`${b}px`,...x,...$R(u,d)},onBlur:ee=>{G.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(G.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||G.current||(G.current=!0,M.current=ee.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{H||$(!1)},onDragEnd:()=>$(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},T.filter(ee=>!ee.position&&U===0||ee.position===I).map((ee,se)=>{var ge,Ue;return ae.createElement(BR,{key:ee.id,icons:v,index:se,toast:ee,defaultRichColors:p,duration:(ge=g==null?void 0:g.duration)!=null?ge:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:w,closeButton:(Ue=g==null?void 0:g.closeButton)!=null?Ue:l,interacting:H,position:I,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,closeButtonAriaLabel:g==null?void 0:g.closeButtonAriaLabel,removeToast:j,toasts:T.filter(Pe=>Pe.position==ee.position),heights:C.filter(Pe=>Pe.position==ee.position),setHeights:R,expandByDefault:a,gap:b,expanded:A,swipeDirections:e.swipeDirections})})):null}))}),Dl="onboard_mnemonic",No="onboard_wallet_address",Ll="onboard_auth_token",jl="onboard_refresh_token",Fl="onboard_expires_at";function ml(t){const[e,n]=k.useState(""),[s,r]=k.useState(""),[i,o]=k.useState(!1),[a,l]=k.useState(""),[c,u]=k.useState(void 0),[d,h]=k.useState(void 0),[p,m]=k.useState(!1),[x,w]=k.useState(null);k.useEffect(()=>{const C=localStorage.getItem(Dl),R=localStorage.getItem(No),A=localStorage.getItem(Ll),$=localStorage.getItem(jl),H=localStorage.getItem(Fl);if(n(C||""),r(R||""),A&&l(A),$&&u($),H){const F=parseInt(H,10);isNaN(F)||h(F)}},[]);const g=k.useCallback(async C=>{if(!C||C.trim()==="")return null;o(!0);try{Ae.isReady()||await Ae.initialize();const R=await Ae.generateAddress(C.trim(),0);return R.success&&R.address?R.address.toLowerCase():(console.error("Failed to generate address:",R.error),null)}catch(R){return console.error("Error generating address:",R),null}finally{o(!1)}},[]),y=k.useCallback(async C=>{const R=C.trim();if(R===""){n(""),r(""),localStorage.removeItem(Dl),localStorage.removeItem(No);return}n(R),localStorage.setItem(Dl,R);const A=await g(R);A?(r(A),localStorage.setItem(No,A)):(r(""),localStorage.removeItem(No))},[g]),b=k.useCallback((C,R)=>{const A=C.trim(),$=R.trim().toLowerCase();n(A),r($),localStorage.setItem(Dl,A),localStorage.setItem(No,$)},[]),v=k.useCallback(()=>{n(""),r(""),localStorage.removeItem(Dl),localStorage.removeItem(No)},[]),S=k.useMemo(()=>{if(e==="")return null;const C=e.trim();if(C==="")return null;try{const R=eu.fromPhrase(C,"","m/44'/60'/0'/0/0");if(s&&R.address.toLowerCase()!==s.toLowerCase())return console.warn("Address mismatch: derived address does not match stored address"),null;const A=BigInt(R.privateKey),$=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(A===0n||A>=$)return console.error("Invalid private key: out of secp256k1 curve order"),null;const F=A.toString(16).toLowerCase().padStart(64,"0");return/^[0-9a-f]{64}$/.test(F)?F:(console.error("Invalid private key format"),null)}catch(R){return console.error("Error computing private key:",R),null}},[e,s]),_=k.useCallback(async(C,R,A,$)=>{m(!0),w(null);try{await y(C);const H=await X5(C,R,A,$);if(H.success&&H.authToken)l(H.authToken),u(H.refreshToken),h(H.expiresAt),localStorage.setItem(Ll,H.authToken),H.refreshToken&&localStorage.setItem(jl,H.refreshToken),H.expiresAt&&localStorage.setItem(Fl,H.expiresAt.toString()),Ie.success("Onboarding successful",{description:"Wallet authenticated and auth token generated.",duration:5e3});else{const F=H.error||"Onboarding failed";w(F),l(""),u(void 0),h(void 0),localStorage.removeItem(Ll),localStorage.removeItem(jl),localStorage.removeItem(Fl),Ie.error("Onboarding failed",{description:F,duration:6e3})}}catch(H){const F=(H==null?void 0:H.message)||"Unknown error during onboarding";w(F),l(""),u(void 0),h(void 0),localStorage.removeItem(Ll),localStorage.removeItem(jl),localStorage.removeItem(Fl),Ie.error("Onboarding error",{description:F,duration:6e3})}finally{m(!1)}},[y]),E=k.useCallback(()=>{w(null)},[]),T=k.useCallback(()=>{l(""),u(void 0),h(void 0),w(null),m(!1),localStorage.removeItem(Ll),localStorage.removeItem(jl),localStorage.removeItem(Fl)},[]),P=k.useCallback(()=>{v(),T()},[v,T]);return{mnemonic:e,walletAddress:s,privateKey:S,authToken:a,refreshToken:c,expiresAt:d,loading:p,error:x,addressLoading:i,onboard:_,setMnemonic:y,setAccountData:b,clearAccountData:v,clearError:E,reset:T,resetAll:P}}function WR(){const{setAccountData:t}=ml(),{mnemonic:e,setMnemonic:n,addressIndex:s,setAddressIndex:r,result:i,loading:o,generateAddress:a,isReady:l}=y7();return k.useEffect(()=>{i!=null&&i.success&&i.address&&e&&t(e,i.address)},[i,e,t]),f.jsxs("div",{className:"component",children:[f.jsx("h3",{children:"Address Generator"}),f.jsx("p",{children:"Generate Ethereum addresses from mnemonic phrases"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),f.jsx("textarea",{id:"mnemonic",value:e,onChange:c=>n(c.target.value),placeholder:"Enter your mnemonic phrase...",rows:3})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),f.jsx("input",{id:"addressIndex",type:"number",value:s,onChange:c=>r(parseInt(c.target.value)||0),min:"0",max:"1000"})]}),f.jsx("button",{className:"button",onClick:a,disabled:o||!l,children:o?"Generating...":"Generate Address"}),i&&f.jsx("div",{className:`output ${i.success?"success":"error"}`,children:i.success?f.jsxs(f.Fragment,{children:[f.jsx("strong",{children:"Generated Address:"}),f.jsx("br",{}),i.address,f.jsx("br",{}),f.jsx("br",{}),f.jsx("strong",{children:"Details:"}),f.jsx("br",{}),"Index: ",i.index,f.jsx("br",{}),"Mnemonic: ",i.mnemonic]}):f.jsxs(f.Fragment,{children:[f.jsx("strong",{children:"Error:"}),f.jsx("br",{}),i.error]})})]})}function HR(){var h,p;const{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:c,signMessage:u,isReady:d}=v7();return f.jsxs("div",{className:"component",children:[f.jsx("h3",{children:"Message Signer"}),f.jsx("p",{children:"Sign messages with your private key"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),f.jsx("textarea",{id:"mnemonic",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"message",children:"Message to Sign:"}),f.jsx("textarea",{id:"message",value:n,onChange:m=>s(m.target.value),placeholder:"Enter message to sign...",rows:3})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),f.jsx("input",{id:"addressIndex",type:"number",value:o,onChange:m=>a(parseInt(m.target.value)||0),min:"0",max:"1000"})]}),f.jsx("div",{className:"form-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:r,onChange:m=>i(m.target.checked),style:{marginRight:"0.5rem"}}),"Use EIP-712 Typed Data"]})}),f.jsx("button",{className:"button",onClick:u,disabled:c||!d,children:c?"Signing...":"Sign Message"}),l&&f.jsx("div",{className:`output ${l.success?"success":"error"}`,children:l.success?f.jsxs(f.Fragment,{children:[f.jsx("strong",{children:"Signature:"}),f.jsx("br",{}),l.signature,f.jsx("br",{}),f.jsx("br",{}),f.jsx("strong",{children:"Details:"}),f.jsx("br",{}),"Message: ",l.message,f.jsx("br",{}),"EIP-712: ",(h=l.options)!=null&&h.useEIP712?"Yes":"No",f.jsx("br",{}),"Address Index: ",((p=l.options)==null?void 0:p.addressIndex)||0]}):f.jsxs(f.Fragment,{children:[f.jsx("strong",{children:"Error:"}),f.jsx("br",{}),l.error]})})]})}function VR(){var w,g,y,b;const[t,e]=k.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=k.useState(""),[r,i]=k.useState("1000000000000000000000000"),[o,a]=k.useState(0),[l,c]=k.useState(0),[u,d]=k.useState(null),[h,p]=k.useState(!1),m=async()=>{if(!Ae.isReady()){d({success:!1,error:"WASM module not ready"});return}if(!n){d({success:!1,error:"Wallet address is required"});return}p(!0),d(null);try{const v={nonce:o||Date.now(),deadline:l||Date.now()+36e5},S=await Ae.signDeposit(t,n,r,v);d(S)}catch(v){d({success:!1,error:v instanceof Error?v.message:"Unknown error"})}finally{p(!1)}},x=async()=>{if(!Ae.isReady()){d({success:!1,error:"WASM module not ready"});return}p(!0),d(null);try{const v=await Ae.generateAddress(t,0);v.success&&v.address?(s(v.address),d({success:!0,message:"Wallet address generated and set",address:v.address})):d({success:!1,error:v.error||"Failed to generate address"})}catch(v){d({success:!1,error:v instanceof Error?v.message:"Unknown error"})}finally{p(!1)}};return f.jsxs("div",{className:"component",children:[f.jsx("h3",{children:"Deposit Signer"}),f.jsx("p",{children:"Sign deposit messages for the Morpheum protocol"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),f.jsx("textarea",{id:"mnemonic",value:t,onChange:v=>e(v.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"walletAddress",children:"Wallet Address:"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("input",{id:"walletAddress",type:"text",value:n,onChange:v=>s(v.target.value),placeholder:"0x...",style:{flex:1}}),f.jsx("button",{className:"button secondary",onClick:x,disabled:h||!Ae.isReady(),style:{padding:"0.75rem 1rem"},children:"Generate"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"amount",children:"Amount (wei):"}),f.jsx("input",{id:"amount",type:"text",value:r,onChange:v=>i(v.target.value),placeholder:"1000000000000000000000000"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"nonce",children:"Nonce (0 for current timestamp):"}),f.jsx("input",{id:"nonce",type:"number",value:o,onChange:v=>a(parseInt(v.target.value)||0),min:"0"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"deadline",children:"Deadline (0 for 1 hour from now):"}),f.jsx("input",{id:"deadline",type:"number",value:l,onChange:v=>c(parseInt(v.target.value)||0),min:"0"})]})]}),f.jsx("button",{className:"button",onClick:m,disabled:h||!Ae.isReady()||!n,children:h?"Signing Deposit...":"Sign Deposit"}),u&&f.jsx("div",{className:`output ${u.success?"success":"error"}`,children:u.success?f.jsx(f.Fragment,{children:u.signature?f.jsxs(f.Fragment,{children:[f.jsx("strong",{children:"Deposit Signature:"}),f.jsx("br",{}),u.signature,f.jsx("br",{}),f.jsx("br",{}),f.jsx("strong",{children:"Details:"}),f.jsx("br",{}),"Wallet: ",(w=u.options)==null?void 0:w.walletAddress,f.jsx("br",{}),"Amount: ",(g=u.options)==null?void 0:g.amount," wei",f.jsx("br",{}),"Nonce: ",(y=u.options)==null?void 0:y.nonce,f.jsx("br",{}),"Deadline: ",(b=u.options)==null?void 0:b.deadline]}):f.jsxs(f.Fragment,{children:[f.jsx("strong",{children:"Wallet Address Generated:"}),f.jsx("br",{}),u.address,f.jsx("br",{}),f.jsx("br",{}),f.jsx("strong",{children:"Message:"}),f.jsx("br",{}),u.message]})}):f.jsxs(f.Fragment,{children:[f.jsx("strong",{children:"Error:"}),f.jsx("br",{}),u.error]})})]})}function YR(){const{ownerMnemonic:t,setOwnerMnemonic:e,ownerAddress:n,setOwnerAddress:s,agentAddress:r,setAgentAddress:i,agentPrivateKey:o,expiresInDays:a,setExpiresInDays:l,permissions:c,setPermissions:u,agentName:d,setAgentName:h,nonce:p,setNonce:m,result:x,loading:w,generateOwnerAddress:g,generateAgentKeypair:y,prepareAgentSign:b,signAgentApproval:v,isReady:S}=w7();return f.jsxs("div",{className:"component",children:[f.jsx("h3",{children:"Agent Delegation"}),f.jsx("p",{children:"Approve an agent private key to act on behalf of the owner wallet"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"ownerMnemonic",children:"Owner Mnemonic (for signing approval):"}),f.jsx("textarea",{id:"ownerMnemonic",value:t,onChange:_=>e(_.target.value),placeholder:"Enter owner mnemonic phrase...",rows:2})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("input",{id:"ownerAddress",type:"text",value:n,onChange:_=>s(_.target.value),placeholder:"0x...",style:{flex:1}}),f.jsx("button",{className:"button secondary",onClick:g,disabled:w||!S,style:{padding:"0.75rem 1rem"},children:"Generate"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"agentAddress",children:"Agent Address:"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("input",{id:"agentAddress",type:"text",value:r,onChange:_=>i(_.target.value),placeholder:"0x...",style:{flex:1}}),f.jsx("button",{className:"button secondary",onClick:y,disabled:w||!S,style:{padding:"0.75rem 1rem"},children:"Generate Keypair"})]})]}),o&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"agentPrivateKey",children:"Agent Private Key (save securely):"}),f.jsx("input",{id:"agentPrivateKey",type:"text",value:o,readOnly:!0,style:{fontFamily:"monospace",fontSize:"0.9rem"}})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"agentName",children:"Agent Name (optional):"}),f.jsx("input",{id:"agentName",type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"TradingBot"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"expiresInDays",children:"Expires In Days:"}),f.jsx("input",{id:"expiresInDays",type:"number",value:a,onChange:_=>l(parseInt(_.target.value)||180),min:"1",max:"365"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"permissions",children:"Permissions (comma-separated):"}),f.jsx("input",{id:"permissions",type:"text",value:c,onChange:_=>u(_.target.value),placeholder:"clob::submit_order,clob::cancel_order"}),f.jsx("small",{style:{display:"block",marginTop:"0.5rem",opacity:.8},children:"Example: clob::submit_order, clob::cancel_order, clob::modify_order"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),f.jsx("input",{id:"nonce",type:"text",value:p,onChange:_=>m(_.target.value),placeholder:Date.now().toString()})]}),f.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[f.jsx("button",{className:"button secondary",onClick:b,disabled:w||!S||!n||!r,children:w?"Preparing...":"Prepare Agent Sign"}),f.jsx("button",{className:"button",onClick:v,disabled:w||!S||!n||!r||!t,children:w?"Signing Approval...":"Sign Agent Approval"})]}),x&&f.jsx("div",{className:`output ${x.success?"success":"error"}`,children:x.success?f.jsxs(f.Fragment,{children:[x.signature&&f.jsxs(f.Fragment,{children:[f.jsx("strong",{children:"Agent Approval Signature:"}),f.jsx("br",{}),x.signature,f.jsx("br",{}),f.jsx("br",{})]}),x.typedData&&f.jsxs(f.Fragment,{children:[f.jsx("strong",{children:"EIP-712 Typed Data:"}),f.jsx("br",{}),f.jsx("pre",{style:{fontSize:"0.85rem",overflow:"auto",maxHeight:"300px"},children:JSON.stringify(x.typedData,null,2)}),f.jsx("br",{}),f.jsx("strong",{children:"Usage:"}),f.jsx("br",{}),"Use this typed data with MetaMask or other EIP-712 compatible wallets to sign the agent approval."]})]}):f.jsxs(f.Fragment,{children:[f.jsx("strong",{children:"Error:"}),f.jsx("br",{}),x.error]})})]})}function GR({status:t}){const e=()=>t.loading?"loading":t.loaded?"success":t.error?"error":"loading",n=()=>t.loading?"Loading WASM...":t.loaded?"WASM Ready":t.error?"WASM Error":"Unknown";return f.jsxs("div",{className:"App-section",children:[f.jsx("h3",{children:"WASM Status"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[f.jsx("span",{className:`status ${e()}`,children:n()}),t.loading&&f.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"Initializing WebAssembly module..."}),t.loaded&&f.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"morm_signer.wasm loaded successfully"}),t.error&&f.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:t.error})]})]})}const KR="modulepreload",qR=function(t){return"/"+t},n1={},XR=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=qR(l),l in n1)return;n1[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":KR,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Ru="https://router.morpheum.io",i0="wss://router.morpheum.io/websocket",Mb="ios-device-1234567890",QR=({isRunning:t,onClick:e})=>f.jsx("button",{onClick:e,disabled:t,style:{color:"#fff",backgroundColor:t?"#ccc":"#007bff",cursor:t?"not-allowed":"pointer"},children:t?"Running Tests...":"Run All Tests"}),JR=({mnemonic:t,baseURL:e,onboardLoading:n,isRunning:s,onOnboard:r})=>{const i=n||s||!t||t.trim()==="";return f.jsx("button",{onClick:()=>{t&&t.trim()!==""&&r(t,e)},disabled:i,style:{color:i?"#ccc":"#fff",backgroundColor:i?"#ccc":"#28a745",cursor:i?"not-allowed":"pointer"},children:n?"Onboarding...":"Onboard & Get Auth Token"})},ZR=({isRunning:t,onClick:e})=>f.jsx("button",{onClick:e,disabled:t,style:{color:t?"#ccc":"#fff",backgroundColor:t?"#ccc":"#dc3545",cursor:t?"not-allowed":"pointer"},children:"Clear Results"}),eA=({onClick:t})=>f.jsx("button",{onClick:t,className:"sdk-test-button-dismiss",children:"Dismiss"}),tA=({result:t})=>f.jsxs("div",{className:`sdk-test-result-item ${t.success?"success":"error"}`,children:[f.jsxs("div",{className:"sdk-test-result-content",children:[f.jsxs("div",{className:"sdk-test-result-message",children:[t.success?"":""," ",t.message]}),t.error&&f.jsxs("div",{className:"sdk-test-result-error",children:["Error: ",t.error]}),t.data&&f.jsxs("details",{className:"sdk-test-result-data",children:[f.jsx("summary",{children:"View Data"}),f.jsx("pre",{children:JSON.stringify(t.data,null,2)})]})]}),f.jsx("div",{className:"sdk-test-result-timestamp",children:new Date(t.timestamp).toLocaleTimeString()})]}),nA=({sectionName:t,isExpanded:e,onToggle:n})=>f.jsxs("h2",{className:"sdk-test-section-header",onClick:n,children:[f.jsx("span",{children:t}),f.jsx("span",{className:"sdk-test-section-chevron",children:e?"":""})]});function sA(){var Pe,ke,Te,ft;const[t,e]=k.useState(Ru),[n,s]=k.useState(""),[r,i]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(Mb),[u,d]=k.useState({}),[h,p]=k.useState(!1),[m,x]=k.useState(new Set),w=k.useRef(null),g=k.useRef(null),y=k.useRef(t),b=k.useRef([]),v=k.useRef(""),{markets:S,fetchMarkets:_}=_o({baseURL:t,sessionToken:r,autoFetchMarkets:!1}),{mnemonic:E,walletAddress:T,authToken:P,loading:C,error:R,onboard:A,clearError:$,setMnemonic:H}=ml();k.useEffect(()=>{E||H("legal winner thank year wave sausage worth useful legal winner thank yellow")},[E,H]);const F=k.useRef(E||"");k.useEffect(()=>{F.current=E||""},[E]);const{buckets:N,loading:z,error:L,refresh:B}=Z5({baseURL:t,authToken:r||o,walletAddress:T||void 0,refreshInterval:0});k.useEffect(()=>{P&&(a(P),localStorage.setItem("authToken",P))},[P]),k.useEffect(()=>{o&&o.trim()!==""&&localStorage.setItem("authToken",o)},[o]);const M=k.useRef(h);k.useEffect(()=>{M.current===!0&&h===!1&&setTimeout(()=>{const D=Object.values(u).flatMap(ve=>ve.results),Q=D.filter(ve=>ve.success).length,oe=D.length,de=oe-Q;oe>0&&(de===0?Ie.success("All tests passed",{description:`${oe} test(s) completed successfully.`,duration:5e3}):Ie.warning("Tests completed with failures",{description:`${Q}/${oe} tests passed. ${de} test(s) failed.`,duration:6e3}))},100),M.current=h},[h,u]),k.useEffect(()=>{const D=localStorage.getItem("authToken");D&&!o&&a(D)},[]);const G=S.length>0?(((Pe=S.find(D=>D.active))==null?void 0:Pe.market_id)??S[0].market_id)||(((Te=(ke=S.find(D=>D.active))==null?void 0:ke.id)==null?void 0:Te.toString())??((ft=S[0].id)==null?void 0:ft.toString())??""):null,j=G??n;k.useEffect(()=>{G&&n!==G&&s(G)},[G]),k.useEffect(()=>{y.current=t},[t]);const I=(D,Q)=>{d(oe=>{const de=oe[D]||{name:D,results:[]};return{...oe,[D]:{...de,results:[...de.results,Q]}}})},U=()=>{d({}),x(new Set)},q=D=>{x(Q=>{const oe=new Set(Q);return oe.has(D)?oe.delete(D):oe.add(D),oe})};k.useEffect(()=>{const D=Object.keys(u).filter(Q=>u[Q].results.length>0);D.length>0&&x(Q=>{const oe=new Set(Q);return D.forEach(de=>oe.add(de)),oe})},[u]);const X=()=>{const D="Utilities";I(D,{success:!0,message:"Testing utility functions...",timestamp:Date.now()});try{const Q=bt(1);I(D,{success:Q==="100000000",message:`toSatoshi(1.0) = ${Q}`,data:{expected:"100000000",got:Q},timestamp:Date.now()});const oe=bt("1.5");I(D,{success:oe==="150000000",message:`toSatoshi("1.5") = ${oe}`,data:{expected:"150000000",got:oe},timestamp:Date.now()});const de=Ce("100000000");I(D,{success:de===1,message:`fromSatoshi("100000000") = ${de}`,data:{expected:1,got:de},timestamp:Date.now()});const ve=RC(1);I(D,{success:ve===1e8,message:`toSatoshiUint64(1.0) = ${ve}`,data:{expected:1e8,got:ve},timestamp:Date.now()});const ye=Wv("100000000"),W=Wv("abc");I(D,{success:ye&&!W,message:`isValidSatoshi tests: "100000000"=${ye}, "abc"=${W}`,data:{valid1:ye,valid2:W},timestamp:Date.now()});const le=[1,1.5,2],O=A8(le),ne=N8(O);I(D,{success:ne.length===3,message:`Batch conversion: ${le.length} items`,data:{input:le,satoshi:O,decimal:ne},timestamp:Date.now()}),I(D,{success:ca===1e8,message:`SATOSHI_SCALE = ${ca}`,data:{expected:1e8,got:ca},timestamp:Date.now()})}catch(Q){I(D,{success:!1,message:"Utility test error",error:Q.message,timestamp:Date.now()})}},K=async(D="Authentication")=>{if(!T||T.trim()===""){I(D,{success:!1,message:"Authentication skipped: Wallet address required",timestamp:Date.now()});return}if(!Ae.isReady()){I(D,{success:!1,message:"Authentication failed: mormSigner not loaded. Please initialize mormSigner first for address generation.",timestamp:Date.now()});return}try{I(D,{success:!0,message:"Starting authentication (onboarding) with ethers.js EIP-712 signing...",timestamp:Date.now()});const{onboardAndGetAuthToken:Q}=await XR(async()=>{const{onboardAndGetAuthToken:de}=await Promise.resolve().then(()=>f7);return{onboardAndGetAuthToken:de}},void 0);if(I(D,{success:!0,message:"Calling onboardAndGetAuthToken (handles nonce, EIP-712 signing with ethers.js, and API request)...",timestamp:Date.now()}),!E)throw new Error("Mnemonic is required for authentication");const oe=await Q(E,y.current);if(!oe.success||!oe.authToken)throw new Error(oe.error||"Onboarding failed");a(oe.authToken),localStorage.setItem("authToken",oe.authToken),I(D,{success:!0,message:"AUTHENTICATION SUCCESSFUL!",data:{walletAddress:T,authToken:oe.authToken.substring(0,32)+"...",refreshToken:oe.refreshToken,expiresAt:oe.expiresAt},timestamp:Date.now()})}catch(Q){const oe=Q.message||String(Q);I(D,{success:!1,message:`Authentication failed: ${oe}`,error:oe,timestamp:Date.now()})}},ee=async()=>{var ve;const D="Wallet Specific";g.current=new vn({baseURL:y.current}),r&&g.current&&g.current.setSessionToken(r),I(D,{success:!0,message:"Waiting for wallet address to be available...",timestamp:Date.now()});const Q=5e3,oe=200;let de=0;for(;!T||T.trim()==="";){if(de>=Q){I(D,{success:!1,message:"Timeout: Wallet address not available after 5 seconds",error:"Wallet address is required for wallet-specific tests. Please ensure mnemonic is provided.",timestamp:Date.now()});return}await new Promise(ye=>setTimeout(ye,oe)),de+=oe}if(!T||T.trim()===""){I(D,{success:!1,message:"Wallet address is required for wallet-specific tests",error:"Wallet address not available",timestamp:Date.now()});return}I(D,{success:!0,message:`Wallet address available: ${T.substring(0,10)}...`,timestamp:Date.now()});try{I(D,{success:!0,message:`Testing getBalance() for asset "MORM" at address ${T.substring(0,10)}...`,timestamp:Date.now()});try{const W=await g.current.getBalance(T,"MORM"),le=(W==null?void 0:W.balance)||(W==null?void 0:W.amount)||(W==null?void 0:W.value)||"N/A",O=typeof le=="string"?le:JSON.stringify(le);I(D,{success:!!W,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: MORM | Balance: ${O} (raw satoshi format)`,data:{balance:W,asset:"MORM",walletAddress:T.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(W){I(D,{success:!1,message:'getBalance() failed for asset "MORM" (may require authentication)',error:W.message,data:{asset:"MORM",walletAddress:T.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}I(D,{success:!0,message:`Testing getBalance() for asset "USDC" at address ${T.substring(0,10)}...`,timestamp:Date.now()});try{const W=await g.current.getBalance(T,"USDC"),le=(W==null?void 0:W.balance)||(W==null?void 0:W.amount)||(W==null?void 0:W.value)||"N/A",O=typeof le=="string"?le:JSON.stringify(le);I(D,{success:!!W,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: USDC | Balance: ${O} (raw satoshi format)`,data:{balance:W,asset:"USDC",walletAddress:T.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(W){I(D,{success:!1,message:'getBalance() failed for asset "USDC" (may require authentication)',error:W.message,data:{asset:"USDC",walletAddress:T.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}try{const W=await g.current.getBalanceDecimal(T,"USDC");I(D,{success:!!W,message:"getBalanceDecimal() - GET /bank/v1/balance/{address}",data:W,timestamp:Date.now()})}catch(W){I(D,{success:!1,message:"getBalanceDecimal() failed",error:W.message,timestamp:Date.now()})}try{const W=await g.current.getBalances(T);I(D,{success:!!W,message:"getBalances() - GET /bank/v1/balances/{address}",data:W,timestamp:Date.now()})}catch(W){I(D,{success:!1,message:"getBalances() failed (may require authentication)",error:W.message,timestamp:Date.now()})}try{const W=await g.current.getPositions(T);I(D,{success:Array.isArray(W),message:`getPositions() - GET /bucket/v1/address/{address}/positions returned ${Array.isArray(W)?W.length:0} positions`,data:W,timestamp:Date.now()})}catch(W){I(D,{success:!1,message:"getPositions() failed",error:W.message,timestamp:Date.now()})}try{const W=await g.current.getPositionsDecimal(T);I(D,{success:Array.isArray(W),message:`getPositionsDecimal() - GET /bucket/v1/address/{address}/positions returned ${Array.isArray(W)?W.length:0} positions`,data:W,timestamp:Date.now()})}catch(W){I(D,{success:!1,message:"getPositionsDecimal() failed",error:W.message,timestamp:Date.now()})}let ye=[];try{const W=await g.current.getOrders(T);ye=(W==null?void 0:W.orders)||[];const le=W&&(Array.isArray(ye)||W.total_count!==void 0);I(D,{success:le,message:`getOrders() - GET /clob/v1/address/orders?address={address} returned ${Array.isArray(ye)?ye.length:0} orders (total_count: ${(W==null?void 0:W.total_count)??"N/A"})`,data:{orders:Array.isArray(ye)?ye.slice(0,3):ye,total_count:W==null?void 0:W.total_count,timestamp:W==null?void 0:W.timestamp},timestamp:Date.now()})}catch(W){I(D,{success:!1,message:"getOrders() failed",error:W.message,timestamp:Date.now()})}if(Array.isArray(ye)&&ye.length>0){const W=ye[0],le=(W==null?void 0:W.orderId)||(W==null?void 0:W.order_id)||(W==null?void 0:W.id);if(le){I(D,{success:!0,message:`Testing getOrder() for order ID: ${le.substring(0,16)}... (from getOrders result)`,timestamp:Date.now()});try{const O=await g.current.getOrder(le);I(D,{success:!!O,message:`getOrder() - GET /clob/v1/order/{orderID} | Order ID: ${le.substring(0,16)}...`,data:{order:O,orderId:le,source:"First order from getOrders() result"},timestamp:Date.now()})}catch(O){I(D,{success:!1,message:`getOrder() failed for order ID: ${le.substring(0,16)}...`,error:O.message,data:{orderId:le,endpoint:"GET /clob/v1/order/{orderID}"},timestamp:Date.now()})}}else I(D,{success:!1,message:"getOrder() test skipped: No valid order ID found in getOrders() result",error:"Order ID not found in order object",data:{order:W,availableFields:Object.keys(W||{})},timestamp:Date.now()})}else I(D,{success:!0,message:"getOrder() test skipped: No orders available from getOrders() (need at least 1 order)",data:{ordersCount:ye.length,note:"getOrder() test requires at least one order from getOrders()"},timestamp:Date.now()});try{const W=await g.current.getOrderHistory(T),le=Array.isArray(W)?W:(W==null?void 0:W.orders)||[],O=W&&(Array.isArray(le)||W.orders!==void 0);I(D,{success:O,message:`getOrderHistory() - GET /clob/v1/address/orders/history?address={address} returned ${Array.isArray(le)?le.length:0} orders`,data:Array.isArray(le)?le.slice(0,3):W,timestamp:Date.now()})}catch(W){I(D,{success:!1,message:"getOrderHistory() failed",error:W.message,timestamp:Date.now()})}try{const W=await g.current.getTradeHistory(T),le=Array.isArray(W)?W:(W==null?void 0:W.trades)||(W==null?void 0:W.data)||[],O=W&&(Array.isArray(le)||W.trades!==void 0||W.data!==void 0);I(D,{success:O,message:`getTradeHistory() - GET /clob/v1/address/trades?address={address} returned ${Array.isArray(le)?le.length:0} trades`,data:Array.isArray(le)?le.slice(0,3):W,timestamp:Date.now()})}catch(W){I(D,{success:!1,message:"getTradeHistory() failed",error:W.message,timestamp:Date.now()})}try{const W=await g.current.getBuckets(T);if(I(D,{success:Array.isArray(W)||W!==void 0,message:`getBuckets() - GET /bucket/v1/address/{address}/buckets returned ${Array.isArray(W)?W.length:"data"}`,data:Array.isArray(W)?W.slice(0,3):W,timestamp:Date.now()}),Array.isArray(W)&&W.length>0){const le=W[0],O=le.bucket_id||le.id||le.bucketId;if(O)try{const ne=await g.current.getBucket(O);I(D,{success:!!ne,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} (${O.substring(0,16)}...)`,data:ne,timestamp:Date.now()})}catch(ne){I(D,{success:!1,message:`getBucket(${O.substring(0,16)}...) failed`,error:ne.message,timestamp:Date.now()})}}}catch(W){I(D,{success:!1,message:"getBuckets() failed",error:W.message,timestamp:Date.now()})}I(D,{success:!0,message:"Testing useBuckets hook...",timestamp:Date.now()});try{if(await B(),I(D,{success:!L&&!z,message:`useBuckets hook: ${N.length} buckets loaded`,data:{buckets:N.slice(0,3),loading:z,error:L,totalBuckets:N.length},timestamp:Date.now()}),N.length>0){const le=(ve=N[0].bucketId)==null?void 0:ve.toString();if(le)try{const O=await g.current.getBucket(le);I(D,{success:!!O,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} via hook bucket ID (${le.substring(0,16)}...)`,data:O,timestamp:Date.now()})}catch(O){I(D,{success:!1,message:"getBucket() via hook bucket ID failed",error:O.message,timestamp:Date.now()})}}}catch(W){I(D,{success:!1,message:"useBuckets hook test failed",error:W.message,timestamp:Date.now()})}}catch(ye){I(D,{success:!1,message:"Wallet Specific test error",error:ye.message,timestamp:Date.now()})}},se=async()=>{var Q,oe,de,ve,ye;const D="InfoClient";g.current=new vn({baseURL:y.current}),r&&g.current&&g.current.setSessionToken(r);try{I(D,{success:!0,message:"Testing getMarkets()...",timestamp:Date.now()});const W=await _();b.current=Array.isArray(W)?W:[];const le=Array.isArray(W)?W.length:0,O=le>0?W.find(Y=>Y.active||Y.status==="active")??W[0]:null,ne=(O==null?void 0:O.market_id)??((Q=O==null?void 0:O.id)==null?void 0:Q.toString())??null;if(I(D,{success:Array.isArray(W)&&le>0,message:`getMarkets() - GET /market/v1/all returned ${le} markets${ne?` | Using market ID: ${ne} (${(O==null?void 0:O.moniker)||(O==null?void 0:O.symbol)||"auto-selected"})`:""}`,data:{count:le,defaultMarketId:ne,defaultMarket:O?{id:O.id,market_id:O.market_id,moniker:O.moniker,symbol:O.symbol,active:O.active,status:O.status}:null,markets:W.slice(0,5)},timestamp:Date.now()}),ne){s(ne),v.current=ne;const Y=(O==null?void 0:O.moniker)||(O==null?void 0:O.symbol)||(O!=null&&O.baseAsset&&(O!=null&&O.quoteAsset)?`${O.baseAsset}-${O.quoteAsset}`:"Unknown");I(D,{success:!0,message:`Markets loaded: ${le} | Auto-selected: ${Y} (ID: ${ne.substring(0,10)}...)`,data:{selectedMarketId:ne,count:le,market:O},timestamp:Date.now()}),I(D,{success:!0,message:"Waiting 1.5s for market selection to take effect...",timestamp:Date.now()}),await new Promise(he=>setTimeout(he,1500)),I(D,{success:!0,message:`Market ID ready: ${ne}`,data:{marketId:ne},timestamp:Date.now()}),I(D,{success:!0,message:`Proceeding with market: ${Y}`,timestamp:Date.now()})}const re=ne||j||n;if(re){I(D,{success:!0,message:`Testing getOrderbook(${re}, true)...`,timestamp:Date.now()});try{const Y=await g.current.getOrderbook(re,!0);I(D,{success:Y&&(Y.bids||Y.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} with decimal conversion",data:{bids:(oe=Y==null?void 0:Y.bids)==null?void 0:oe.slice(0,3),asks:(de=Y==null?void 0:Y.asks)==null?void 0:de.slice(0,3)},timestamp:Date.now()});const he=await g.current.getOrderbook(re,!1);I(D,{success:he&&(he.bids||he.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} raw satoshi format",data:{bids:(ve=he==null?void 0:he.bids)==null?void 0:ve.slice(0,2),asks:(ye=he==null?void 0:he.asks)==null?void 0:ye.slice(0,2)},timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} failed",error:Y.message,timestamp:Date.now()})}I(D,{success:!0,message:`Testing getTicker(${re})...`,timestamp:Date.now()});try{const Y=await g.current.getTicker(re);I(D,{success:!!Y,message:"getTicker() - GET /market/v1/market/{marketId}/stats",data:Y,timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"getTicker() - GET /market/v1/market/{marketId}/stats failed",error:Y.message,timestamp:Date.now()})}I(D,{success:!0,message:`Testing getRecentTrades(${re}, 10)...`,timestamp:Date.now()});try{const Y=await g.current.getRecentTrades(re,10);I(D,{success:Array.isArray(Y),message:`getRecentTrades() - GET /clob/v1/trades?market_id={marketId} returned ${Array.isArray(Y)?Y.length:0} trades`,data:Y==null?void 0:Y.slice(0,3),timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"getRecentTrades() - GET /clob/v1/trades?market_id={marketId} failed",error:Y.message,timestamp:Date.now()})}}else I(D,{success:!1,message:"Skipping market-specific tests: No market ID available",error:"Please ensure markets are loaded and a market is selected",timestamp:Date.now()});I(D,{success:!0,message:"Testing router/v1 endpoints...",timestamp:Date.now()});try{const Y=await g.current.getSupportedActions();I(D,{success:Array.isArray(Y==null?void 0:Y.actions)||(Y==null?void 0:Y.actions)!==void 0,message:"getSupportedActions() - GET /router/v1/tx/supported-actions",data:Y,timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"getSupportedActions() - GET /router/v1/tx/supported-actions failed",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.validateAction("clob::submit_order");I(D,{success:(Y==null?void 0:Y.valid)!==void 0||Y!==void 0,message:'validateAction() - GET /router/v1/tx/validate-action ("clob::submit_order")',data:Y,timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"validateAction() - GET /router/v1/tx/validate-action failed",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.getHealthSummary();I(D,{success:!!Y,message:"getHealthSummary() - GET /router/v1/health/summary",data:Y,timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"getHealthSummary() - GET /router/v1/health/summary failed",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.getHealthDaemons();I(D,{success:!!Y,message:"getHealthDaemons() - GET /router/v1/health/daemons",data:Y,timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"getHealthDaemons() - GET /router/v1/health/daemons failed",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.getHealthOracle();I(D,{success:!!Y,message:"getHealthOracle() - GET /router/v1/health/oracle",data:Y,timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"getHealthOracle() - GET /router/v1/health/oracle failed",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.getServerTime();I(D,{success:!!Y&&(Y.serverTime!==void 0||Y!==void 0),message:"getServerTime() - GET /router/v1/time",data:Y,timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"getServerTime() - GET /router/v1/time failed",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.getMetricsTPS();I(D,{success:!!Y,message:"getMetricsTPS() - GET /router/v1/metrics/tps",data:Y,timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"getMetricsTPS() - GET /router/v1/metrics/tps failed",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.getMetricsLatency();I(D,{success:!!Y,message:"getMetricsLatency() - GET /router/v1/metrics/latency",data:Y,timestamp:Date.now()})}catch(Y){I(D,{success:!1,message:"getMetricsLatency() - GET /router/v1/metrics/latency failed",error:Y.message,timestamp:Date.now()})}}catch(W){I(D,{success:!1,message:"InfoClient test error",error:W.message,timestamp:Date.now()})}},ge=async()=>{var ve,ye;const D="ExchangeClient";if(!E){I(D,{success:!1,message:"Mnemonic required for ExchangeClient tests",error:"No mnemonic provided",timestamp:Date.now()});return}let Q=n||j||v.current||"";if(!Q||Q.trim()===""){if(b.current&&b.current.length>0){const W=b.current.find(le=>le.active||le.status==="active")??b.current[0];W&&(Q=W.market_id??((ve=W.id)==null?void 0:ve.toString())??"",v.current=Q,I(D,{success:!0,message:`Market ID not in state, using from fetched markets ref: ${Q.substring(0,16)}...`,data:{source:"fetchedMarketsRef",marketId:Q,market:{moniker:W.moniker,symbol:W.symbol,active:W.active}},timestamp:Date.now()}))}else if(S&&S.length>0){const W=S.find(le=>le.active||le.status==="active")??S[0];W&&(Q=W.market_id??((ye=W.id)==null?void 0:ye.toString())??"",I(D,{success:!0,message:`Market ID not in state, using from markets state: ${Q.substring(0,16)}...`,data:{source:"markets state",marketId:Q,market:{moniker:W.moniker,symbol:W.symbol,active:W.active}},timestamp:Date.now()}))}}if(!Q||Q.trim()===""){I(D,{success:!1,message:"Market ID required from page or loaded markets",error:`Please enter or select a market ID in the configuration section, or ensure markets are loaded first. Debug: marketId="${n||"(empty)"}", effectiveMarketId="${j||"(empty)"}", fetchedMarketIdRef="${v.current||"(empty)"}", fetchedMarketsRef.length=${b.current.length}, markets.length=${S.length}`,data:{marketId:n||"(empty)",effectiveMarketId:j||"(empty)",defaultMarketId:G||"(empty)",fetchedMarketIdRef:v.current||"(empty)",fetchedMarketsRefCount:b.current.length,marketsCount:S.length,marketsAvailable:S.length>0||b.current.length>0},timestamp:Date.now()});return}const oe=T||"";if(!oe||oe.trim()===""){I(D,{success:!1,message:"Wallet address required from page",error:"Wallet address should be generated from mnemonic or entered manually. Please ensure mnemonic is valid.",timestamp:Date.now()});return}const de=n?"page state (marketId)":j?"page state (effectiveMarketId)":"loaded markets array";I(D,{success:!0,message:`Using market ID from ${de}: ${Q.substring(0,16)}...`,data:{marketId:Q,source:de},timestamp:Date.now()}),I(D,{success:!0,message:`Using wallet address from page: ${oe.substring(0,10)}...`,data:{walletAddress:oe},timestamp:Date.now()}),(r||o)&&I(D,{success:!0,message:`Using signing tokens: ${r?"Session Token":""} ${o?"Auth Token":""}`,data:{hasSessionToken:!!r,hasAuthToken:!!o},timestamp:Date.now()}),w.current=new Mu({baseURL:y.current,mnemonic:F.current});try{I(D,{success:!0,message:"Initializing ExchangeClient...",timestamp:Date.now()}),await w.current.initialize();const W=w.current.getWalletAddress();if(W.toLowerCase()!==oe.toLowerCase()){I(D,{success:!1,message:"Wallet address mismatch",error:`ExchangeClient wallet (${W}) does not match page wallet (${oe})`,timestamp:Date.now()});return}I(D,{success:!0,message:`ExchangeClient initialized successfully (Wallet: ${W.substring(0,10)}...)`,data:{walletAddress:W,marketId:Q,verified:!0},timestamp:Date.now()});const le=Q;I(D,{success:!0,message:`Using market ID as string: ${le}`,data:{marketId:le},timestamp:Date.now()});let O=null;if(Q){const Y=bt("1"),he={marketId:le,side:"buy",orderType:"LIMIT",price:40010.8778,quantity:.01,timeInForce:"GTC",leverage:Y};I(D,{success:!0,message:`Testing placeOrder() (submit order) for market ${Q}...`,data:{requestBody:he,endpoint:"POST /clob/v1/order",note:"Request body (price, quantity, leverage) will be converted to satoshi format by SDK. Leverage is already in satoshi format.",leverage:{decimal:1,satoshi:Y}},timestamp:Date.now()});try{const Me=await w.current.placeOrder(he);Me?(O=Me.orderId||Me.order_id||Me.id||null,O?I(D,{success:!0,message:`placeOrder() - POST /clob/v1/order executed successfully. Order ID: ${O.substring(0,16)}...`,data:{orderResult:Me,orderId:O,requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()}):I(D,{success:!0,message:"placeOrder() - POST /clob/v1/order executed successfully (orderId not found in response)",data:{orderResult:Me,requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})):I(D,{success:!1,message:"placeOrder() - POST /clob/v1/order returned empty response",data:{requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}catch(Me){I(D,{success:!1,message:"placeOrder() - POST /clob/v1/order failed",error:Me.message,data:{requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}}else I(D,{success:!0,message:"Skipping placeOrder() test: No market ID available",timestamp:Date.now()});if(Q&&O){I(D,{success:!0,message:`Testing cancelOrder() for order ${O.substring(0,16)}...`,timestamp:Date.now()});try{const re=await w.current.cancelOrder({orderId:O,marketId:le});I(D,{success:!!re,message:"cancelOrder() - POST /router/v1/tx executed successfully",data:re,timestamp:Date.now()})}catch(re){I(D,{success:!1,message:"cancelOrder() - POST /router/v1/tx failed",error:re.message,timestamp:Date.now()})}}else Q?O||I(D,{success:!0,message:"Skipping cancelOrder() test: No order ID available (placeOrder may have failed or orderId not in response)",timestamp:Date.now()}):I(D,{success:!0,message:"Skipping cancelOrder() test: No market ID available",timestamp:Date.now()});if(Q){I(D,{success:!0,message:`Testing closePosition() for market ${Q}...`,timestamp:Date.now()});try{const re=await w.current.closePosition({marketId:le});I(D,{success:!!re,message:"closePosition() - POST /router/v1/tx executed successfully",data:re,timestamp:Date.now()})}catch(re){I(D,{success:!1,message:"closePosition() - POST /router/v1/tx failed (may not have open position)",error:re.message,timestamp:Date.now()})}}else I(D,{success:!0,message:"Skipping closePosition() test: No market ID available",timestamp:Date.now()});I(D,{success:!0,message:"Fetching buckets for bucket operation tests...",timestamp:Date.now()});let ne=[];try{g.current||(g.current=new vn({baseURL:y.current})),r&&g.current&&g.current.setSessionToken(r);const re=await g.current.getBuckets(W);ne=Array.isArray(re)?re:[],I(D,{success:!0,message:`Found ${ne.length} bucket(s) for testing`,data:{bucketCount:ne.length,buckets:ne.slice(0,3).map(Y=>({bucketId:Y.bucket_id||Y.id||Y.bucketId,availableMargin:Y.available_margin||Y.availableMargin}))},timestamp:Date.now()})}catch(re){I(D,{success:!1,message:"Failed to fetch buckets for testing",error:re.message,timestamp:Date.now()})}if(ne.length>0){const re=ne[0],Y=re.bucket_id||re.id||re.bucketId;if(Y){I(D,{success:!0,message:"Testing extractToBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const he=await w.current.extractToBucket({bucketId:Y,assetId:"USDC",amount:"100000000"});I(D,{success:!!he,message:"extractToBucket() - POST /bank/v1/extract-to-bucket executed successfully",data:he,timestamp:Date.now()})}catch(he){I(D,{success:!1,message:"extractToBucket() - POST /bank/v1/extract-to-bucket failed",error:he.message,timestamp:Date.now()})}}else I(D,{success:!0,message:"Skipping extractToBucket() test: No valid bucket ID found",timestamp:Date.now()})}else I(D,{success:!0,message:"Skipping extractToBucket() test: No buckets available",timestamp:Date.now()});if(ne.length>0){const re=ne[0],Y=re.bucket_id||re.id||re.bucketId;if(Y){I(D,{success:!0,message:"Testing withdrawFromBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const he=await w.current.withdrawFromBucket({bucketId:Y,assetId:"USDC",amount:"100000000"});I(D,{success:!!he,message:"withdrawFromBucket() - POST /bank/v1/withdraw-from-bucket executed successfully",data:he,timestamp:Date.now()})}catch(he){I(D,{success:!1,message:"withdrawFromBucket() - POST /bank/v1/withdraw-from-bucket failed",error:he.message,timestamp:Date.now()})}}else I(D,{success:!0,message:"Skipping withdrawFromBucket() test: No valid bucket ID found",timestamp:Date.now()})}else I(D,{success:!0,message:"Skipping withdrawFromBucket() test: No buckets available",timestamp:Date.now()});if(ne.length>=2){const re=ne[0],Y=ne[1],he=re.bucket_id||re.id||re.bucketId,Me=Y.bucket_id||Y.id||Y.bucketId;if(he&&Me){I(D,{success:!0,message:"Testing bucketTransfer() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const we=await w.current.bucketTransfer({fromBucketId:he,toBucketId:Me,assetId:"USDC",amount:"100000000"});I(D,{success:!!we,message:"bucketTransfer() - POST /bucket/v1/bucket/transfer executed successfully",data:we,timestamp:Date.now()})}catch(we){I(D,{success:!1,message:"bucketTransfer() - POST /bucket/v1/bucket/transfer failed",error:we.message,timestamp:Date.now()})}}else I(D,{success:!0,message:"Skipping bucketTransfer() test: Invalid bucket IDs",timestamp:Date.now()})}else I(D,{success:!0,message:"Skipping bucketTransfer() test: Need at least 2 buckets (found "+ne.length+")",timestamp:Date.now()});I(D,{success:!0,message:"ExchangeClient tests completed",data:{walletAddress:W,marketId:le,sessionToken:r?"present":"not set",authToken:o?"present":"not set",methodsTested:["placeOrder","cancelOrder","closePosition","extractToBucket","withdrawFromBucket","bucketTransfer"]},timestamp:Date.now()})}catch(W){I(D,{success:!1,message:"ExchangeClient test error",error:W.message,timestamp:Date.now()})}},Ue=async()=>{if(!h){p(!0),U(),Ie.info("Running tests",{description:"Starting comprehensive SDK test suite..."});try{X(),await se(),await K("Authentication"),await ee(),E&&await ge()}catch(D){I("General",{success:!1,message:"Test suite error",error:D.message,timestamp:Date.now()}),Ie.error("Test suite error",{description:D.message||"An unexpected error occurred during testing.",duration:6e3})}finally{p(!1)}}};return f.jsxs("div",{className:"App-content-row",children:[f.jsx("h1",{children:"SDK Test Page"}),f.jsx("p",{children:"Comprehensive test suite for all SDK APIs"}),f.jsxs("div",{className:"App-section",children:[f.jsx("h2",{children:"Configuration"}),f.jsxs("div",{className:"sdk-test-config-grid",children:[f.jsx("div",{children:f.jsxs("label",{children:["HTTP Base URL:",f.jsx("input",{type:"text",value:t,onChange:D=>e(D.target.value),className:"sdk-test-config-input"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Market:",f.jsx("select",{value:n||"",onChange:D=>{const Q=D.target.value;Q&&s(Q)},className:"sdk-test-config-select",children:S.length===0?f.jsx("option",{value:"",children:"Loading markets..."}):f.jsxs(f.Fragment,{children:[f.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),S.map(D=>{var ye;const Q=D.market_id??((ye=D.id)==null?void 0:ye.toString())??"",oe=D.moniker?D.moniker:D.symbol?D.symbol:D.baseAsset&&D.quoteAsset?`${D.baseAsset}-${D.quoteAsset}`:`Market ID: ${Q}`,de=D.active?" [ACTIVE]":"",ve=Q.length>8?`${Q.substring(0,8)}...`:Q;return f.jsxs("option",{value:Q,children:[oe," - ID: ",ve,de]},Q)})]})}),S.length>0&&f.jsx("small",{className:`sdk-test-config-hint ${n===G?"info":"warning"}`,children:n===G?` Auto-selected default market (ID: ${G==null?void 0:G.substring(0,16)}...)`:` Manual selection (ID: ${n==null?void 0:n.substring(0,16)}...)`})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Mnemonic (for ExchangeClient):",f.jsx("input",{type:"text",value:E||"",onChange:D=>H(D.target.value),placeholder:"Optional",className:"sdk-test-config-input"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Session Token (for authenticated InfoClient):",f.jsx("input",{type:"text",value:r,onChange:D=>i(D.target.value),disabled:!!(r&&r.trim()!==""),placeholder:"Optional",className:"sdk-test-config-input"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Auth Token:",f.jsx("input",{type:"text",value:o,onChange:D=>a(D.target.value),disabled:!!(P&&P.trim()!==""),placeholder:P?"Auto-filled from onboarding":'Optional - Use "Onboard" button to generate',className:"sdk-test-config-input"}),P&&f.jsx("small",{className:"sdk-test-config-hint success",children:" Auto-filled from onboarding"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Wallet Address:",f.jsx("input",{type:"text",value:T||"",disabled:!!(E&&E.trim()!==""),onChange:()=>{},placeholder:"automatic (from mnemonic)",className:"sdk-test-config-input"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Device ID:",f.jsx("input",{type:"text",value:l,onChange:D=>c(D.target.value),className:"sdk-test-config-input"})]})}),f.jsxs("div",{className:"control-box",children:[f.jsx(QR,{isRunning:h,onClick:Ue}),f.jsx(JR,{mnemonic:E||"",baseURL:t,onboardLoading:C,isRunning:h,onOnboard:(D,Q)=>{D&&D.trim()!==""?A(D,Q):Ie.warning("Mnemonic required",{description:"Please enter a mnemonic first to perform onboard."})}}),f.jsx(ZR,{isRunning:h,onClick:U})]})]}),P&&f.jsxs("span",{className:"sdk-test-status success",children:[" Auth Token: ",P.substring(0,20),"..."]}),R&&f.jsxs("span",{className:"sdk-test-status error",children:[" Onboard Error: ",R,f.jsx(eA,{onClick:$})]})]}),f.jsx("div",{className:"sdk-test-results",children:Object.entries(u).map(([D,Q])=>{const oe=m.has(D);return f.jsxs("div",{className:"sdk-test-section",children:[f.jsx(nA,{sectionName:D,isExpanded:oe,onToggle:()=>q(D)}),oe&&f.jsx("div",{className:"sdk-test-section-content",children:Q.results.map((de,ve)=>f.jsx(tA,{result:de},ve))})]},D)})}),Object.keys(u).length===0&&!h&&f.jsx("div",{className:"sdk-test-empty-state",children:'Click "Run All Tests" to start testing the SDK APIs'})]})}const rA=({isConnected:t,isConnecting:e,onConnect:n,onDisconnect:s})=>f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:n,disabled:t||e,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:t?"#ccc":e?"#ffc107":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:t||e?"not-allowed":"pointer"},children:e?" Connecting...":t?" Connected":"Connect"}),e&&f.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Connection in progress... Check messages below for details"}),f.jsx("button",{onClick:s,disabled:!t,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:t?"#dc3545":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:t?"pointer":"not-allowed"},children:"Disconnect"})]}),iA=({onClick:t})=>f.jsx("button",{onClick:t,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),ln=({channel:t,isSubscribed:e,isConnected:n,disabled:s=!1,subscribeLabel:r,unsubscribeLabel:i,onSubscribe:o,onUnsubscribe:a,variant:l="public"})=>{const c=!n||s,u=e?"#dc3545":l==="private"?"#28a745":"#007bff";return f.jsx("button",{onClick:e?a:o,disabled:c,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:u,color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer"},children:e?i:r})},oA=({steps:t})=>t.length===0?null:f.jsxs("div",{className:"connection-steps-container",children:[f.jsx("h2",{children:"Connection Steps"}),f.jsx("div",{className:"connection-steps-list",children:t.map((e,n)=>f.jsxs("div",{className:`connection-step-item ${e.status==="error"?"error":e.status==="success"?"success":e.status==="in-progress"?"in-progress":"pending"}`,children:[f.jsx("span",{className:"connection-step-icon",children:e.status==="error"?"":e.status==="success"?"":e.status==="in-progress"?"":""}),f.jsxs("div",{className:"connection-step-content",children:[f.jsxs("div",{className:"connection-step-title",children:["Step ",e.step,": ",e.message]}),e.details&&f.jsx("div",{className:"connection-step-details",children:JSON.stringify(e.details,null,2)}),f.jsx("div",{className:"connection-step-timestamp",children:new Date(e.timestamp).toLocaleTimeString()})]})]},n))})]}),aA=({wsURL:t,onWsURLChange:e,marketId:n,onMarketIdChange:s,markets:r,symbol:i,onSymbolChange:o,klineInterval:a,onKlineIntervalChange:l,twapWindowSize:c,onTwapWindowSizeChange:u,authToken:d,onAuthTokenChange:h,walletAddress:p,deviceID:m,onDeviceIDChange:x,isConnected:w,isConnecting:g,onConnect:y,onDisconnect:b})=>f.jsxs("div",{className:"App-section",children:[f.jsx("h2",{children:"Configuration"}),f.jsxs("div",{className:"config-grid",children:[f.jsx("div",{children:f.jsxs("label",{children:["WebSocket URL:",f.jsx("input",{type:"text",value:t,onChange:v=>e(v.target.value),className:"config-input"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Market:",f.jsx("select",{value:n||"",onChange:v=>s(v.target.value),className:"config-select",children:r.length===0?f.jsx("option",{value:"",children:"Loading markets..."}):f.jsxs(f.Fragment,{children:[f.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),r.map(v=>{var P;const S=v.market_id??((P=v.id)==null?void 0:P.toString())??"",_=v.moniker?v.moniker:v.symbol?v.symbol:v.baseAsset&&v.quoteAsset?`${v.baseAsset}-${v.quoteAsset}`:`Market ID: ${S}`,E=v.active?" [ACTIVE]":"",T=S.length>8?`${S.substring(0,8)}...`:S;return f.jsxs("option",{value:S,children:[_," - ID: ",T,E]},S)})]})})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Symbol (for funding_rate, deviation, index_price, mark_price, price_feed, twap):",f.jsx("input",{type:"text",value:i,onChange:v=>o(v.target.value),placeholder:"e.g., BTC/USDT or BTC/USDC",className:"config-input"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Kline Interval:",f.jsxs("select",{value:a,onChange:v=>l(v.target.value),className:"config-select",children:[f.jsx("option",{value:"1m",children:"1 minute"}),f.jsx("option",{value:"5m",children:"5 minutes"}),f.jsx("option",{value:"15m",children:"15 minutes"}),f.jsx("option",{value:"1h",children:"1 hour"}),f.jsx("option",{value:"4h",children:"4 hours"}),f.jsx("option",{value:"1d",children:"1 day"})]})]})}),f.jsx("div",{children:f.jsxs("label",{children:["TWAP Window Size (seconds):",f.jsx("input",{type:"number",value:c,onChange:v=>u(v.target.value),placeholder:"e.g., 300 for 5 minutes",min:"1",className:"config-input"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Auth Token (for private channels):",f.jsx("input",{type:"text",value:d,onChange:v=>h(v.target.value),placeholder:"Required for user_updates (auto-filled from SDK Test Page)",className:"config-input"}),d&&f.jsx("small",{className:"config-hint",children:" Auto-filled from SDK Test Page"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Wallet Address:",f.jsx("input",{type:"text",value:p||"",disabled:!0,placeholder:"Auto-filled from useOnboard hook",className:`config-input-disabled ${p?"has-value":""}`}),p&&f.jsx("small",{className:"config-hint",children:" Auto-filled from useOnboard hook"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Device ID:",f.jsx("input",{type:"text",value:m,onChange:v=>x(v.target.value),className:"config-input"})]})})]}),f.jsx("div",{className:"config-actions",children:f.jsx(rA,{isConnected:w,isConnecting:g,onConnect:y,onDisconnect:b})})]}),lA=({data:t})=>f.jsxs("div",{className:"funding-rate-details",children:[f.jsx("strong",{className:"funding-rate-title",children:"Funding Rate Details:"}),f.jsxs("div",{className:"funding-rate-grid",children:[f.jsxs("div",{children:[f.jsx("strong",{children:"Symbol:"})," ",t.symbol??"N/A"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Funding Rate:"})," ",t.funding_rate?parseFloat(String(t.funding_rate)).toFixed(6):"N/A"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Mark Price:"})," ",t.mark_price??"N/A"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Index Price:"})," ",t.index_price??"N/A"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Premium Rate:"})," ",t.premium_rate??"N/A"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"EMA Funding Rate:"})," ",t.ema_funding_rate??"N/A"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Next Funding Time:"})," ",t.next_funding_time_unix?new Date(t.next_funding_time_unix*1e3).toLocaleString():"N/A"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Funding Interval:"})," ",t.funding_interval_seconds?`${t.funding_interval_seconds}s`:"N/A"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Valid:"})," ",t.is_valid!==void 0?t.is_valid?"Yes":"No":"N/A"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Stale:"})," ",f.jsx("span",{className:`funding-rate-stale ${t.is_stale?"":"valid"}`,children:t.is_stale!==void 0?t.is_stale?"Yes":"No":"N/A"})]}),t.option_type&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("strong",{children:"Option Type:"})," ",t.option_type]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Strike Price:"})," ",t.strike_price??"N/A"]})]})]})]}),cA=({positions:t})=>!t||t.length===0?null:f.jsxs("div",{className:"positions-container",children:[f.jsxs("strong",{className:"positions-title",children:["Positions (",t.length,"):"]}),f.jsx("div",{className:"positions-grid",children:t.map((e,n)=>{const s=e.size||0,r=s>=0?"LONG":"SHORT";return f.jsxs("div",{className:"position-card",children:[f.jsx("div",{className:"position-symbol",children:e.symbol||`Market ${e.marketId||e.market_id||"N/A"}`}),f.jsxs("div",{className:"position-details",children:[f.jsxs("div",{children:[f.jsx("strong",{children:"Side:"})," ",f.jsx("span",{className:r==="LONG"?"position-side-long":"position-side-short",children:r})]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Size:"})," ",Math.abs(s).toFixed(8)]}),e.entryPrice!==void 0||e.entry_price!==void 0?f.jsxs("div",{children:[f.jsx("strong",{children:"Entry Price:"})," ",(e.entryPrice||e.entry_price||0).toFixed(8)]}):null,e.markPrice!==void 0||e.mark_price!==void 0?f.jsxs("div",{children:[f.jsx("strong",{children:"Mark Price:"})," ",(e.markPrice||e.mark_price||0).toFixed(8)]}):null,e.liquidationPrice!==void 0||e.liquidation_price!==void 0?f.jsxs("div",{children:[f.jsx("strong",{children:"Liquidation Price:"})," ",(e.liquidationPrice||e.liquidation_price||0).toFixed(8)]}):null,e.unrealizedPnL!==void 0||e.unrealized_pnl!==void 0||e.pnl!==void 0?f.jsxs("div",{children:[f.jsx("strong",{children:"Unrealized PnL:"})," ",f.jsx("span",{className:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0)>=0?"position-pnl-positive":"position-pnl-negative",children:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0).toFixed(8)})]}):null,e.leverage!==void 0?f.jsxs("div",{children:[f.jsx("strong",{children:"Leverage:"})," ",e.leverage,"x"]}):null,e.margin!==void 0?f.jsxs("div",{children:[f.jsx("strong",{children:"Margin:"})," ",e.margin.toFixed(8)]}):null,e.marginMode!==void 0||e.margin_mode!==void 0?f.jsxs("div",{children:[f.jsx("strong",{children:"Margin Mode:"})," ",e.marginMode||e.margin_mode||"N/A"]}):null]})]},n)})})]}),uA=({message:t})=>{const{channel:e,data:n,type:s,step:r,timestamp:i}=t,o=e==="funding_rate"&&typeof n=="object"&&n!==null,a=e==="user_updates"&&typeof n=="object"&&n!==null&&Array.isArray(n.positions)&&n.positions.length>0,l=o||a;return f.jsx("div",{className:`message-item ${s}`,children:f.jsx("div",{className:"message-header",children:f.jsxs("div",{className:"message-content",children:[f.jsxs("div",{className:"message-title",children:[f.jsxs("span",{children:["[",e,"]"]}),r&&f.jsxs("span",{className:"message-step",children:["(",r,")"]}),f.jsx("span",{children:new Date(i).toLocaleTimeString()})]}),o&&f.jsx(lA,{data:n}),a&&f.jsx(cA,{positions:n.positions}),!l&&f.jsx("div",{className:"message-body",children:typeof n=="string"?n:JSON.stringify(n,null,2)}),typeof n!="string"&&f.jsxs("details",{children:[f.jsx("summary",{className:"raw-data-summary",children:"View Raw Data"}),f.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(n,null,2)})]})]})})})},dA=({messages:t,isPrivate:e=!1,emptyMessage:n})=>{const s=e?"No messages yet. Connect with auth token and subscribe to user updates.":"No messages yet. Connect and subscribe to channels to see updates.";return f.jsx("div",{className:`messages-container ${e?"private":"public"}`,children:t.length===0?f.jsx("div",{className:`messages-empty ${e?"private":""}`,children:n||s}):t.map(r=>f.jsx(uA,{message:r},r.id))})},s1=({title:t,isPrivate:e=!1,messages:n,onClearMessages:s,children:r,emptyMessage:i})=>f.jsxs("div",{className:"channel-section",children:[f.jsxs("div",{className:"channel-header",children:[f.jsx("h2",{className:"channel-title",children:t}),f.jsx(iA,{onClick:s})]}),f.jsxs("div",{className:"channel-content",children:[f.jsx("div",{className:"channel-buttons-container",children:r}),f.jsx(dA,{messages:n,isPrivate:e,emptyMessage:i}),e&&f.jsxs("div",{className:"private-note",children:[f.jsx("strong",{children:"Note:"})," Private channels require authentication. Enter your auth token in the configuration above."]})]})]});function at(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function eo(t,e){return t.width===e.width&&t.height===e.height}var hA=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){n._observers=n._observers.filter(function(r){return r!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function fA(t){return new hA(t)}var pA=function(){function t(e,n,s){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=at({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(i){return i},this._allowResizeObserver=(r=s==null?void 0:s.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return at({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=at(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;eo(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var s=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,s=at(this._transformBitmapSize(e,this._canvasElementClientSize)),r=eo(this.bitmapSize,s)?null:s;n===null&&r===null||n!==null&&r!==null&&eo(n,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(n,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}mA().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=r1(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=fA(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var s=r1(this._canvasElement);if(s!==null){var r=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:s.devicePixelRatio,i=this._canvasElement.getClientRects(),o=i[0]!==void 0?xA(i[0],r):at({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var s=n.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var r=s.devicePixelContentBoxSize[0],i=at({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function gA(t,e){return new pA(t,e.transform,e.options)}function r1(t){return t.ownerDocument.defaultView}function mA(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function xA(t,e){return at({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var bA=function(){function t(e,n,s){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function uo(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new bA(r,n,s)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const e3={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var i1,o1;function Xa(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function t3(t,e,n,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(n,e+r),t.lineTo(s,e+r),t.stroke()}function Jt(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Ln(t){if(t===void 0)throw new Error("Value is undefined");return t}function ue(t){if(t===null)throw new Error("Value is null");return t}function ti(t){return ue(Ln(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(i1||(i1={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(o1||(o1={}));class Rt{constructor(){this.t=[]}i(e,n,s){const r={h:e,l:n,o:s===!0};this.t.push(r)}_(e){const n=this.t.findIndex(s=>e===s.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,s){const r=[...this.t];this.t=this.t.filter(i=>!i.o),r.forEach(i=>i.h(e,n,s))}v(){return this.t.length>0}m(){this.t=[]}}function Vn(t,...e){for(const n of e)for(const s in n)n[s]!==void 0&&Object.prototype.hasOwnProperty.call(n,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof n[s]!="object"||t[s]===void 0||Array.isArray(n[s])?t[s]=n[s]:Vn(t[s],n[s]));return t}function Qa(t){return typeof t=="number"&&isFinite(t)}function su(t){return typeof t=="number"&&t%1==0}function Au(t){return typeof t=="string"}function yd(t){return typeof t=="boolean"}function br(t){const e=t;if(!e||typeof e!="object")return e;let n,s,r;for(s in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(r=e[s],n[s]=r&&typeof r=="object"?br(r):r);return n}function yA(t){return t!==null}function vA(t){return t===null?void 0:t}const n3="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function ef(t,e,n){return e===void 0&&(e=n3),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class wA{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),s=this.W();return e.P===n&&e.T===s||(e.P=n,e.T=s,e.k=ef(n,s),e.A=2.5/12*n,e.V=e.A,e.B=n/12*e.C,e.I=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Lp(t){return t<0?0:t>255?255:Math.round(t)||0}function a1(t){return .199*t[0]+.687*t[1]+.114*t[2]}class SA{constructor(e,n){this.q=new Map,this.Y=e,n&&(this.q=n)}j(e,n){if(e==="transparent")return e;const s=this.K(e),r=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${n*r})`}X(e){const n=this.K(e);return{Z:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,G:a1(n)>160?"black":"white"}}J(e){return a1(this.K(e))}tt(e,n,s){const[r,i,o,a]=this.K(e),[l,c,u,d]=this.K(n),h=[Lp(r+s*(l-r)),Lp(i+s*(c-i)),Lp(o+s*(u-o)),(p=a+s*(d-a),p<=0||p>1?Math.min(Math.max(p,0),1):Math.round(1e4*p)/1e4)];var p;return`rgba(${h[0]}, ${h[1]}, ${h[2]}, ${h[3]})`}K(e){const n=this.q.get(e);if(n)return n;const s=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(e),r=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(const o of this.Y){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const i=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,i),i}}class kA{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,s){this.it.forEach(r=>{r.nt(e,n,s)})}}class Nu{nt(e,n,s){e.useBitmapCoordinateSpace(r=>this.et(r,n,s))}}class _A extends Nu{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const r=this.rt.lt,i=this.rt,o=Math.max(1,Math.floor(n))%2/2,a=l=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){const u=i.ot[c],d=Math.round(u._t*n)+o,h=u.ut*s,p=l*s+o;e.moveTo(d,h),e.arc(d,h,p,0,2*Math.PI)}e.fill()};i.ct>0&&(e.fillStyle=i.dt,a(i.ft+i.ct)),e.fillStyle=i.vt,a(i.ft)}}function CA(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const EA={from:0,to:1};class PA{constructor(e,n,s){this.Mt=new kA,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.Pt=s,this.Mt.st(this.bt)}yt(e){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(CA),this.bt=this.St.map(n=>{const s=new _A;return s.ht(n),s}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),n=this.Pt.Bt(),s=this.Ct.It(),r=this.O.Et();this.kt(),n.forEach((i,o)=>{const a=this.St[o],l=i.At(s),c=i.zt();!e&&l!==null&&i.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=i.Ft().Nt(l.gt,c.Wt),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/i.Ft().$t()),a.ot[0].wt=s,a.ot[0]._t=r.qt(s),a.lt=EA):a.lt=null})}}class TA extends Nu{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!i&&!o)return;const a=Math.round(this.Yt._t*s),l=Math.round(this.Yt.ut*r);e.lineCap="butt",i&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*s),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Xa(e,this.Yt.jt.Xt),function(c,u,d,h){c.beginPath();const p=c.lineWidth%2?.5:0;c.moveTo(u+p,d),c.lineTo(u+p,h),c.stroke()}(e,a,0,n.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*r),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Xa(e,this.Yt.Kt.Xt),t3(e,l,0,n.width))}}class MA{constructor(e,n){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new TA(this.Zt),this.Jt=e,this.Pt=n}yt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),n=this.Pt.Qt().N().crosshair,s=this.Zt;if(n.mode===2)return s.Kt.Vt=!1,void(s.jt.Vt=!1);s.Kt.Vt=e&&this.Jt.ti(this.Pt),s.jt.Vt=e&&this.Jt.ii(),s.Kt.ct=n.horzLine.width,s.Kt.Xt=n.horzLine.style,s.Kt.R=n.horzLine.color,s.jt.ct=n.vertLine.width,s.jt.Xt=n.vertLine.style,s.jt.R=n.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function o0(t,e,n,s,r,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,n,s,r),t.restore()}function l1(t,e,n,s,r,i){t.beginPath(),t.roundRect?t.roundRect(e,n,s,r,i):(t.lineTo(e+s-i[1],n),i[1]!==0&&t.arcTo(e+s,n,e+s,n+i[1],i[1]),t.lineTo(e+s,n+r-i[2]),i[2]!==0&&t.arcTo(e+s,n+r,e+s-i[2],n+r,i[2]),t.lineTo(e+i[3],n+r),i[3]!==0&&t.arcTo(e,n+r,e,n+r-i[3],i[3]),t.lineTo(e,n+i[0]),i[0]!==0&&t.arcTo(e,n,e+i[0],n,i[0]))}function c1(t,e,n,s,r,i,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===i)return l1(t,e,n,s,r,a),t.fillStyle=i,t.fill(),void t.restore();const c=o/2;var u;l1(t,e+c,n+c,s-o,r-o,(u=-c,a.map(d=>d===0?d:d+u))),i!=="transparent"&&(t.fillStyle=i,t.fill()),l!=="transparent"&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function s3(t,e,n,s,r,i,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,r);a.addColorStop(0,i),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,n,s,r),t.restore()}class u1{constructor(e,n){this.ht(e,n)}ht(e,n){this.Yt=e,this.ei=n}$t(e,n){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,n,s,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const i=this.Yt.R,o=this.ei.Z,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=n.k;const u=this.hi(l,n,s,r),d=u.ai;return u.li?c1(c,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):c1(c,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(c.fillStyle=i,c.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(c.fillStyle=n.D,c.fillRect(u.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),u});e.useMediaCoordinateSpace(({context:l})=>{const c=a.xi;l.font=n.k,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=i,l.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.Pi)})}hi(e,n,s,r){const{context:i,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=e,u=this.Yt.pi||!this.Yt.yi?n.C:0,d=this.Yt.ki?n.S:0,h=n.A+this.ei.Ti,p=n.V+this.ei.Ri,m=n.B,x=n.I,w=this.Yt.ri,g=n.P,y=s.Di(i,w),b=Math.ceil(s.Vi(i,w)),v=g+h+p,S=n.S+m+x+b+u,_=Math.max(1,Math.floor(c));let E=Math.round(v*c);E%2!=_%2&&(E+=1);const T=d>0?Math.max(1,Math.floor(d*l)):0,P=Math.round(S*l),C=Math.round(u*l),R=this.ei.Bi??this.ei.Ii,A=Math.round(R*c)-Math.floor(.5*c),$=Math.floor(A+_/2-E/2),H=$+E,F=r==="right",N=F?a.width-d:d,z=F?o.width-T:T;let L,B,M;return F?(L=z-P,B=z-C,M=N-u-m-d):(L=z+P,B=z+C,M=N+u+m),{li:F,ai:{_i:$,mi:A,Si:H,ui:P,ci:E,ft:2*l,di:T,oi:L,fi:z,wi:B,gi:_,bi:o.width},xi:{_i:$/c,Si:H/c,Ci:M,Pi:y}}}}class a0{constructor(e){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(e||u1)(this.Ai,this.Ei),this.Oi=new(e||u1)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Li.$t(e,n),this.Oi.$t(e,n))}Fi(){return this.Ei.Bi||0}Wi(e){this.Ei.Bi=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class IA extends a0{constructor(e,n,s){super(),this.Jt=e,this.Yi=n,this.ji=s}qi(e,n,s){if(e.Vt=!1,this.Jt.N().mode===2)return;const r=this.Jt.N().horzLine;if(!r.labelVisible)return;const i=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||i===null)return;const o=this.Yi.Xi().X(r.labelBackgroundColor);s.Z=o.Z,e.R=o.G;const a=2/12*this.Yi.P();s.Ti=a,s.Ri=a;const l=this.ji(this.Yi);s.Ii=l.Ii,e.ri=this.Yi.Zi(l.gt,i),e.Vt=!0}}const RA=/[1-9]/g;class r3{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,n){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const s=e.useMediaCoordinateSpace(({context:h})=>(h.font=n.k,Math.round(n.Gi.Vi(h,ue(this.Yt).ri,RA))));if(s<=0)return;const r=n.Ji,i=s+2*r,o=i/2,a=this.Yt.Qi;let l=this.Yt.Ii,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+i>a&&(l-=Math.abs(a-(c+i)),c=Math.floor(l-o)+.5);const u=c+i,d=Math.ceil(0+n.S+n.C+n.A+n.P+n.V);e.useBitmapCoordinateSpace(({context:h,horizontalPixelRatio:p,verticalPixelRatio:m})=>{const x=ue(this.Yt);h.fillStyle=x.Z;const w=Math.round(c*p),g=Math.round(0*m),y=Math.round(u*p),b=Math.round(d*m),v=Math.round(2*p);if(h.beginPath(),h.moveTo(w,g),h.lineTo(w,b-v),h.arcTo(w,b,w+v,b,v),h.lineTo(y-v,b),h.arcTo(y,b,y,b-v,v),h.lineTo(y,g),h.fill(),x.pi){const S=Math.round(x.Ii*p),_=g,E=Math.round((_+n.C)*m);h.fillStyle=x.R;const T=Math.max(1,Math.floor(p)),P=Math.floor(.5*p);h.fillRect(S-P,_,T,E-_)}}),e.useMediaCoordinateSpace(({context:h})=>{const p=ue(this.Yt),m=0+n.S+n.C+n.A+n.P/2;h.font=n.k,h.textAlign="left",h.textBaseline="middle",h.fillStyle=p.R;const x=n.Gi.Di(h,"Apr0");h.translate(c+r,m+x),h.fillText(p.ri,0,0)})}}class AA{constructor(e,n,s){this.xt=!0,this.Gt=new r3,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=e,this.ts=n,this.ji=s}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const s=this.ts.Et();if(s.Ki())return;e.Qi=s.Qi();const r=this.ji();if(r===null)return;e.Ii=r.Ii;const i=s.ss(this.Ct.It());e.ri=s.ns(ue(i)),e.Vt=!0;const o=this.ts.Xi().X(n.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=s.N().ticksVisible}}class i3{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var d1;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(d1||(d1={}));class NA extends i3{constructor(e,n){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=n,this.ys=((r,i)=>o=>{const a=i(),l=r();if(o===ue(this.Pt).ks())return{gt:l,Ii:a};{const c=ue(o.zt());return{gt:o.Ts(a,c),Ii:a}}})(()=>this.ds,()=>this.Ss);const s=((r,i)=>()=>{const o=this.ts.Et().Rs(r()),a=i();return o&&Number.isFinite(a)?{wt:o,Ii:a}:null})(()=>this.fs,()=>this.si());this.Ds=new AA(this,e,s)}N(){return this.Ps}Vs(e,n){this.xs=e,this.Cs=n}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(e,n,s){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,n,s)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(e){let n=this.gs.get(e);n||(n=new MA(this,e),this.gs.set(e,n));let s=this.Ms.get(e);return s||(s=new PA(this.ts,this,e),this.Ms.set(e,s)),[n,s]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,n){this.ps&&this.Pt===e||this.vs.clear();const s=[];return this.Pt===e&&s.push(this.Hs(this.vs,n,this.ys)),s}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var n,s;(n=this.gs.get(e))==null||n.yt(),(s=this.Ms.get(e))==null||s.yt()}),this.vs.forEach(e=>e.yt()),this.Ds.yt()}qs(e){return e&&!e.ks().Ki()?e.ks():null}zs(e,n,s){this.Ys(e,n,s)&&this.Ns()}Ys(e,n,s){const r=this.bs,i=this.Ss,o=this.ds,a=this.fs,l=this.Pt,c=this.qs(s);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=s;const u=c!==null?c.zt():null;return c!==null&&u!==null?(this.ds=n,this.Ss=c.Nt(n,u)):(this.ds=NaN,this.Ss=NaN),r!==this.bs||i!==this.Ss||a!==this.fs||o!==this.ds||l!==this.Pt}Os(){const e=this.ts.js().map(s=>s.Xs().Ks()).filter(yA),n=e.length===0?null:Math.max(...e);this.fs=n!==null?n:NaN}Hs(e,n,s){let r=e.get(n);return r===void 0&&(r=new IA(this,n,s),e.set(n,r)),r}}function l0(t){return t==="left"||t==="right"}class Xt{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,n){const s=function(r,i){return r===void 0?i:{tn:Math.max(r.tn,i.tn),sn:r.sn||i.sn}}(this.Zs.get(e),n);this.Zs.set(e,s)}nn(){return this.Js}en(e){const n=this.Zs.get(e);return n===void 0?{tn:this.Js}:{tn:Math.max(this.Js,n.tn),sn:n.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const n of e.Gs)this.mn(n);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((n,s)=>{this.Qs(s,n)})}static wn(){return new Xt(2)}static gn(){return new Xt(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(n=>n.an===5);e!==-1&&this.Gs.splice(e,1)}}class o3{formatTickmarks(e){return e.map(n=>this.format(n))}}const h1=".";function yr(t,e){if(!Qa(t))return"n/a";if(!su(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class c0 extends o3{constructor(e,n){if(super(),n||(n=1),Qa(e)&&su(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=n,this.bn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const n=this.Yi/this.Mn;let s=Math.floor(e),r="";const i=this.xn!==void 0?this.xn:NaN;if(n>1){let o=+(Math.round(e*n)-s*n).toFixed(this.xn);o>=n&&(o-=n,s+=1),r=h1+yr(+o.toFixed(this.xn)*this.Mn,i)}else s=Math.round(s*n)/n,i>0&&(r=h1+yr(0,i));return s.toFixed(0)+r}}class a3 extends c0{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class OA extends o3{constructor(e){super(),this.Cn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.Pn(e):e<999995?n+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.Pn(e/1e9)+"B")}Pn(e){let n;const s=Math.pow(10,this.Cn);return n=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(r,i)=>i)}}const DA=/[2-9]/g;class tf{constructor(e=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(e,n,s){return this.In(e,n,s).width}Di(e,n,s){const r=this.In(e,n,s);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}In(e,n,s){const r=s||DA,i=String(n).replace(r,"0");if(this.Dn.has(i))return Ln(this.Dn.get(i)).En;if(this.yn===this.Vn){const a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.yn--}e.save(),e.textBaseline="middle";const o=e.measureText(i);return e.restore(),o.width===0&&n.length||(this.Dn.set(i,{En:o,An:this.kn}),this.Rn[this.kn]=i,this.yn++,this.kn++),o}}class LA{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,n,s){this.zn=e,this.M=n,this.Ln=s}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class l3{constructor(e,n,s){this.Fn=e,this.On=new tf(50),this.Wn=n,this.O=s,this.F=-1,this.Gt=new LA(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const n=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(n===null)return null;const s=e.qn(n);if(s==="overlay")return null;const r=this.O.Yn();return r.P!==this.F&&(this.F=r.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),r,s),this.Gt}}class jA extends Nu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,n){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:s,ct:r,Kn:i}=this.Yt;return n>=s-r-7&&n<=s+r+7?{Xn:this.Yt,Kn:i}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;const i=Math.round(this.Yt.ut*r);i<0||i>n.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*s),Xa(e,this.Yt.Xt),t3(e,i,0,n.width))}}class Ib{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new jA,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class FA extends Ib{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),n=e.ie().ie;if(n!==2&&n!==3)return;const s=this.Jn.N();if(!s.baseLineVisible||!this.Jn.Vt())return;const r=this.Jn.zt();r!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(r.Wt,r.Wt),this.Zn.R=s.baseLineColor,this.Zn.ct=s.baseLineWidth,this.Zn.Xt=s.baseLineStyle)}}class zA extends Nu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){const r=this.Yt;if(r===null)return;const i=Math.max(1,Math.floor(n)),o=i%2/2,a=Math.round(r.ne.x*n)+o,l=r.ne.y*s;e.fillStyle=r.ee,e.beginPath();const c=Math.max(2,1.5*r.re)*n;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.he,e.beginPath(),e.arc(a,l,r.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=r.ae,e.beginPath(),e.arc(a,l,r.ft*n+i/2,0,2*Math.PI,!1),e.stroke()}}const BA=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class $A{constructor(e){this.Gt=new zA,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),n=this.we-e;if(n>0)return void(n<650&&(this.we+=2600));this.me=e,this.we=e+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),n=e.Pe(),s=this.ge.zt();if(n===null||s===null)return;const r=this.ge.ye(!0);if(r.ke||!n.Te(r.Re))return;const i={x:e.qt(r.Re),y:this.ge.Ft().Nt(r.gt,s.Wt)},o=r.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:i})}Ce(){const e=this.Gt.se();if(e!==null){const n=this.De(this.Ve(),e.ee);e.he=n.he,e.ae=n.ae,e.ft=n.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(e,n,s,r){const i=s+(r-s)*n;return this.ge.Qt().Xi().j(e,i)}De(e,n){const s=e%2600/2600;let r;for(const c of BA)if(s>=c.le&&s<=c.oe){r=c;break}Jt(r!==void 0,"Last price animation internal logic error");const i=(s-r.le)/(r.oe-r.le);return{he:this.Be(n,i,r.ce,r.de),ae:this.Be(n,i,r.fe,r.pe),ft:(o=i,a=r._e,l=r.ue,a+(l-a)*o)};var o,a,l}}class UA extends Ib{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const n=this.Jn.N();if(!n.priceLineVisible||!this.Jn.Vt())return;const s=this.Jn.ye(n.priceLineSource===0);s.ke||(e.Vt=!0,e.ut=s.Ii,e.R=this.Jn.Ie(s.R),e.ct=n.priceLineWidth,e.Xt=n.priceLineStyle)}}class WA extends a0{constructor(e){super(),this.Jt=e}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.Jt;if(!r.Vt())return;const i=r.N(),o=i.lastValueVisible,a=r.Ee()!=="",l=i.seriesLastValueMode===0,c=r.ye(!1);if(c.ke)return;o&&(e.ri=this.Ae(c,o,l),e.Vt=e.ri.length!==0),(a||l)&&(n.ri=this.ze(c,o,a,l),n.Vt=n.ri.length>0);const u=r.Ie(c.R),d=this.Jt.Qt().Xi().X(u);s.Z=d.Z,s.Ii=c.Ii,n.Ht=r.Qt().Ut(c.Ii/r.Ft().$t()),e.Ht=u,e.R=d.G,n.R=d.G}ze(e,n,s,r){let i="";const o=this.Jt.Ee();return s&&o.length!==0&&(i+=`${o} `),n&&r&&(i+=this.Jt.Ft().Le()?e.Oe:e.Ne),i.trim()}Ae(e,n,s){return n?s?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function f1(t,e,n,s){const r=Number.isFinite(e),i=Number.isFinite(n);return r&&i?t(e,n):r||i?r?e:n:s}class wn{constructor(e,n){this.Fe=e,this.We=n}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new wn(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new wn(f1(Math.min,this.$e(),e.$e(),-1/0),f1(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!Qa(e)||this.We-this.Fe===0)return;const n=.5*(this.We+this.Fe);let s=this.We-n,r=this.Fe-n;s*=e,r*=e,this.We=n+s,this.Fe=n+r}Ke(e){Qa(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new wn(e.minValue,e.maxValue)}}class nf{constructor(e,n){this.Ge=e,this.Je=n||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new nf(wn.Ze(e.priceRange),e.margins)}}class HA extends Ib{constructor(e,n){super(e),this.ir=n}te(){const e=this.Zn;e.Vt=!1;const n=this.ir.N();if(!this.Jn.Vt()||!n.lineVisible)return;const s=this.ir.sr();s!==null&&(e.Vt=!0,e.ut=s,e.R=n.color,e.ct=n.lineWidth,e.Xt=n.lineStyle,e.Kn=this.ir.N().id)}}class VA extends a0{constructor(e,n){super(),this.ge=e,this.ir=n}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.ir.N(),i=r.axisLabelVisible,o=r.title!=="",a=this.ge;if(!i||!a.Vt())return;const l=this.ir.sr();if(l===null)return;o&&(n.ri=r.title,n.Vt=!0),n.Ht=a.Qt().Ut(l/a.Ft().$t()),e.ri=this.nr(r.price),e.Vt=!0;const c=this.ge.Qt().Xi().X(r.axisLabelColor||r.color);s.Z=c.Z;const u=r.axisLabelTextColor||c.G;e.R=u,n.R=u,s.Ii=l}nr(e){const n=this.ge.zt();return n===null?"":this.ge.Ft().Zi(e,n.Wt)}}class YA{constructor(e,n){this.ge=e,this.Ps=n,this.er=new HA(e,this),this.Fn=new VA(e,this),this.rr=new l3(this.Fn,e,e.Qt())}hr(e){Vn(this.Ps,e),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const e=this.ge,n=e.Ft();if(e.Qt().Et().Ki()||n.Ki())return null;const s=e.zt();return s===null?null:n.Nt(this.Ps.price,s.Wt)}}class GA extends i3{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const KA={Bar:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=ue(t(n,s)),a=ti(o.Wt[0])<=ti(o.Wt[3]);return{cr:o.R??(a?r:i)}},Candlestick:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,u=ue(t(n,s)),d=ti(u.Wt[0])<=ti(u.Wt[3]);return{cr:u.R??(d?r:i),dr:u.Ht??(d?o:a),pr:u.vr??(d?l:c)}},Custom:(t,e,n,s)=>({cr:ue(t(n,s)).R??e.color}),Area:(t,e,n,s)=>{const r=ue(t(n,s));return{cr:r.vt??e.lineColor,vt:r.vt??e.lineColor,mr:r.mr??e.topColor,wr:r.wr??e.bottomColor}},Baseline:(t,e,n,s)=>{const r=ue(t(n,s));return{cr:r.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:r.gr??e.topLineColor,Mr:r.Mr??e.bottomLineColor,br:r.br??e.topFillColor1,Sr:r.Sr??e.topFillColor2,Cr:r.Cr??e.bottomFillColor1,Pr:r.Pr??e.bottomFillColor2}},Line:(t,e,n,s)=>{const r=ue(t(n,s));return{cr:r.R??e.color,vt:r.R??e.color}},Histogram:(t,e,n,s)=>({cr:ue(t(n,s)).R??e.color})};class qA{constructor(e){this.yr=(n,s)=>s!==void 0?s.Wt:this.ge.Xs().kr(n),this.ge=e,this.Tr=KA[e.Rr()]}Dr(e,n){return this.Tr(this.yr,this.ge.N(),e,n)}}function c3(t,e,n,s,r=0,i=e.length){let o=i-r;for(;0<o;){const a=o>>1,l=r+a;s(e[l],n)===t?(r=l+1,o-=a+1):o=a}return r}const Ja=c3.bind(null,!0),u3=c3.bind(null,!1);var p1;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(p1||(p1={}));const Lr=30;class XA{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}kr(e){return this.Fr(e)}Fr(e,n=0){const s=this.Nr(e,n);return s===null?null:{...this.Wr(s),Re:this.Or(s)}}Hr(){return this.Vr}Ur(e,n,s){if(this.Ki())return null;let r=null;for(const i of s)r=vd(r,this.$r(e,n,i));return r}ht(e){this.Ir.clear(),this.Br.clear(),this.Vr=e,this.Er=e.map(n=>n.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,n){const s=this.Yr(e);if(s===null&&n!==0)switch(n){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return s}jr(e){let n=this.Xr(e);return n>0&&(n-=1),n!==this.Vr.length&&this.Or(n)<e?n:null}Kr(e){const n=this.Zr(e);return n!==this.Vr.length&&e<this.Or(n)?n:null}Yr(e){const n=this.Xr(e);return n===this.Vr.length||e<this.Vr[n].Re?null:n}Xr(e){return Ja(this.Vr,e,(n,s)=>n.Re<s)}Zr(e){return u3(this.Vr,e,(n,s)=>n.Re>s)}Gr(e,n,s){let r=null;for(let i=e;i<n;i++){const o=this.Vr[i].Wt[s];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(e,n,s){if(this.Ki())return null;let r=null;const i=ue(this.Lr()),o=ue(this.Ks()),a=Math.max(e,i),l=Math.min(n,o),c=Math.ceil(a/Lr)*Lr,u=Math.max(c,Math.floor(l/Lr)*Lr);{const h=this.Xr(a),p=this.Zr(Math.min(l,c,n));r=vd(r,this.Gr(h,p,s))}let d=this.Br.get(s);d===void 0&&(d=new Map,this.Br.set(s,d));for(let h=Math.max(c+1,a);h<u;h+=Lr){const p=Math.floor(h/Lr);let m=d.get(p);if(m===void 0){const x=this.Xr(p*Lr),w=this.Zr((p+1)*Lr-1);m=this.Gr(x,w,s),d.set(p,m)}r=vd(r,m)}{const h=this.Xr(u),p=this.Zr(l);r=vd(r,this.Gr(h,p,s))}return r}}function vd(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}const sf={setLineStyle:Xa};class QA{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,sf)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,sf)}}class JA{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new QA(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}class d3{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,n;(n=(e=this.ah).updateAllViews)==null||n.call(e)}Fs(){var s,r,i;const e=((r=(s=this.ah).paneViews)==null?void 0:r.call(s))??[];if(((i=this.hh)==null?void 0:i.nh)===e)return this.hh.eh;const n=e.map(o=>new JA(o));return this.hh={nh:e,eh:n},n}jn(e,n){var s,r;return((r=(s=this.ah).hitTest)==null?void 0:r.call(s,e,n))??null}}let ZA=class extends d3{us(){return[]}};class eN{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,sf)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,sf)}}class g1{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new eN(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}function h3(t){var e,n,s;return{ri:t.text(),Ii:t.coordinate(),Bi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),Z:t.backColor(),Vt:((n=t.visible)==null?void 0:n.call(t))??!0,pi:((s=t.tickVisible)==null?void 0:s.call(t))??!0}}class tN{constructor(e,n){this.Gt=new r3,this._h=e,this.uh=n}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...h3(this._h)}),this.Gt}}class nN extends a0{constructor(e,n){super(),this._h=e,this.Yi=n}qi(e,n,s){const r=h3(this._h);s.Z=r.Z,e.R=r.R;const i=2/12*this.Yi.P();s.Ti=i,s.Ri=i,s.Ii=r.Ii,s.Bi=r.Bi,e.ri=r.ri,e.Vt=r.Vt,e.pi=r.pi}}class sN extends d3{constructor(e,n){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=n}cs(){var r,i,o;const e=((i=(r=this.ah).timeAxisViews)==null?void 0:i.call(r))??[];if(((o=this.dh)==null?void 0:o.nh)===e)return this.dh.eh;const n=this.ge.Qt().Et(),s=e.map(a=>new tN(a,n));return this.dh={nh:e,eh:s},s}Ws(){var r,i,o;const e=((i=(r=this.ah).priceAxisViews)==null?void 0:i.call(r))??[];if(((o=this.fh)==null?void 0:o.nh)===e)return this.fh.eh;const n=this.ge.Ft(),s=e.map(a=>new nN(a,n));return this.fh={nh:e,eh:s},s}wh(){var s,r,i;const e=((r=(s=this.ah).priceAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.ph)==null?void 0:i.nh)===e)return this.ph.eh;const n=e.map(o=>new g1(o));return this.ph={nh:e,eh:n},n}gh(){var s,r,i;const e=((r=(s=this.ah).timeAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.mh)==null?void 0:i.nh)===e)return this.mh.eh;const n=e.map(o=>new g1(o));return this.mh={nh:e,eh:n},n}Mh(e,n){var s,r;return((r=(s=this.ah).autoscaleInfo)==null?void 0:r.call(s,e,n))??null}}function jp(t,e,n,s){t.forEach(r=>{e(r).forEach(i=>{i.rh()===n&&s.push(i)})})}function Fp(t){return t.Fs()}function rN(t){return t.wh()}function iN(t){return t.gh()}const oN=["Area","Line","Baseline"];class u0 extends GA{constructor(e,n,s,r,i){super(e),this.Yt=new XA,this.er=new UA(this),this.bh=[],this.Sh=new FA(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=s,this.kh=n;const o=new WA(this);this.vs=[o],this.rr=new l3(o,this,e),oN.includes(this.kh)&&(this.xh=new $A(this)),this.Th(),this.sh=r(this,this.Qt(),i)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(e){return this.Ps.priceLineColor||e}ye(e){const n={ke:!0},s=this.Ft();if(this.Qt().Et().Ki()||s.Ki()||this.Yt.Ki())return n;const r=this.Qt().Et().Pe(),i=this.zt();if(r===null||i===null)return n;let o,a;if(e){const d=this.Yt.Ar();if(d===null)return n;o=d,a=d.Re}else{const d=this.Yt.Fr(r.bi(),-1);if(d===null||(o=this.Yt.kr(d.Re),o===null))return n;a=d.Re}const l=o.Wt[3],c=this.Rh().Dr(a,{Wt:o}),u=s.Nt(l,i.Wt);return{ke:!1,gt:l,ri:s.Zi(l,i.Wt),Oe:s.Dh(l),Ne:s.Vh(l,i.Wt),R:c.cr,Ii:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new qA(this)),this.Ch}N(){return this.Ps}hr(e){const n=e.priceScaleId;n!==void 0&&n!==this.Ps.priceScaleId&&this.Qt().Bh(this,n),Vn(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(e,n){this.Yt.ht(e),this.sh.yt("data"),this.xh!==null&&(n&&n.zh?this.xh.be():e.length===0&&this.xh.Me());const s=this.Qt().Hn(this);this.Qt().Lh(s),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const n=new YA(this,e);return this.bh.push(n),this.Qt().Eh(this),n}Nh(e){const n=this.bh.indexOf(e);n!==-1&&this.bh.splice(n,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const n=e.Uh();return this.Yt.Fr(n,1)}Xs(){return this.Yt}$h(e){const n=this.Yt.kr(e);return n===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:n.Wt[0],Yh:n.Wt[1],jh:n.Wt[2],Kh:n.Wt[3]}:n.Wt[3]}Xh(e){const n=[];jp(this.yh,Fp,"top",n);const s=this.xh;return s!==null&&s.Vt()&&(this.Ph===null&&s.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),s.Se(),n.unshift(s)),n}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const n=this.bh.map(s=>s.lr());return e.push(...n),jp(this.yh,Fp,"normal",e),e}Jh(){return this.Qh(Fp,"bottom")}ta(e){return this.Qh(rN,e)}ia(e){return this.Qh(iN,e)}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,n){if(n!==this.es&&!this.Gh())return[];const s=[...this.vs];for(const r of this.bh)s.push(r.ur());return this.yh.forEach(r=>{s.push(...r.Ws())}),s}cs(){const e=[];return this.yh.forEach(n=>{e.push(...n.cs())}),e}Mh(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider(()=>{const r=this.na(e,n);return r===null?null:r.Xe()});return nf.Ze(s)}return this.na(e,n)}nh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}ea(){return this.ra}Ns(){var e;this.sh.yt();for(const n of this.vs)n.yt();for(const n of this.bh)n.yt();this.er.yt(),this.Sh.yt(),(e=this.xh)==null||e.yt(),this.yh.forEach(n=>n.Ns())}Ft(){return ue(super.Ft())}At(e){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.Yt.kr(e);return n===null?null:{gt:n.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(e){this.yh.push(new sN(e,this))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e)}ca(){if(this.kh==="Custom")return e=>this.sh.da(e)}fa(){if(this.kh==="Custom")return e=>this.sh.pa(e)}va(){return this.Yt.qr()}Gh(){return!l0(this.Ft().ma())}na(e,n){if(!su(e)||!su(n)||this.Yt.Ki())return null;const s=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(e,n,s);let i=r!==null?new wn(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){const a=this.Ps.base,l=new wn(a,a);i=i!==null?i.vn(l):l}return this.yh.forEach(a=>{const l=a.Mh(e,n);if(l!=null&&l.priceRange){const c=new wn(l.priceRange.minValue,l.priceRange.maxValue);i=i!==null?i.vn(c):c}l!=null&&l.margins&&(o=l.margins)}),new nf(i,o)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(e){switch(this.kh){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ra={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.ra=new OA(this.Ps.priceFormat.precision);break;case"percent":this.ra=new a3(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new c0(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.wa()}Qh(e,n){const s=[];return jp(this.yh,e,n,s),s}}const aN=[3],lN=[0,1,2,3];class cN{constructor(e){this.Ps=e}ga(e,n,s){let r=e;if(this.Ps.mode===0)return r;const i=s.ks(),o=i.zt();if(o===null)return r;const a=i.Nt(e,o),l=s.Ma().filter(u=>u instanceof u0).reduce((u,d)=>{if(s.Un(d)||!d.Vt())return u;const h=d.Ft(),p=d.Xs();if(h.Ki()||!p.Te(n))return u;const m=p.kr(n);if(m===null)return u;const x=ti(d.zt()),w=this.Ps.mode===3?lN:aN;return u.concat(w.map(g=>h.Nt(m.Wt[g],x.Wt)))},[]);if(l.length===0)return r;l.sort((u,d)=>Math.abs(u-a)-Math.abs(d-a));const c=l[0];return r=i.Ts(c,o),r}}function Pc(t,e,n){return Math.min(Math.max(t,e),n)}function wd(t,e,n){return e-t<=n}class uN extends Nu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=Math.max(1,Math.floor(s));e.lineWidth=i,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=ue(this.Yt);if(o.ba){e.strokeStyle=o.Sa,Xa(e,o.xa),e.beginPath();for(const a of o.Ca){const l=Math.round(a.Pa*s);e.moveTo(l,-i),e.lineTo(l,n.height+i)}e.stroke()}if(o.ya){e.strokeStyle=o.ka,Xa(e,o.Ta),e.beginPath();for(const a of o.Ra){const l=Math.round(a.Pa*r);e.moveTo(-i,l),e.lineTo(n.width+i,l)}e.stroke()}})}}class dN{constructor(e){this.Gt=new uN,this.xt=!0,this.Pt=e}yt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,n={ya:e.horzLines.visible,ba:e.vertLines.visible,ka:e.horzLines.color,Sa:e.vertLines.color,Ta:e.horzLines.style,xa:e.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map(s=>({Pa:s.coord}))};this.Gt.ht(n),this.xt=!1}return this.Gt}}class hN{constructor(e){this.sh=new dN(e)}lr(){return this.sh}}const zp={Va:4,Ba:1e-4};function Zo(t,e){const n=100*(t-e)/e;return e<0?-n:n}function fN(t,e){const n=Zo(t.$e(),e),s=Zo(t.qe(),e);return new wn(n,s)}function Tc(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function pN(t,e){const n=Tc(t.$e(),e),s=Tc(t.qe(),e);return new wn(n,s)}function rf(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.log10(n+e.Ba)+e.Va;return t<0?-s:s}function Mc(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.pow(10,n-e.Va)-e.Ba;return t<0?-s:s}function zl(t,e){if(t===null)return null;const n=rf(t.$e(),e),s=rf(t.qe(),e);return new wn(n,s)}function ea(t,e){if(t===null)return null;const n=Mc(t.$e(),e),s=Mc(t.qe(),e);return new wn(n,s)}function Bp(t){if(t===null)return zp;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return zp;const n=Math.ceil(Math.abs(Math.log10(e))),s=zp.Va+n;return{Va:s,Ba:1/Math.pow(10,s)}}class $p{constructor(e,n){if(this.Ia=e,this.Ea=n,function(s){if(s<0)return!1;if(s>1e18)return!0;for(let r=s;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let s=this.Ia;s!==1;){if(s%2==0)this.Aa.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),s/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(e,n,s){const r=this.Ia===0?0:1/this.Ia;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,a=this.Ea[0];for(;;){const d=wd(i,r,1e-14)&&i>r+1e-14,h=wd(i,s*a,1e-14),p=wd(i,1,1e-14);if(!(d&&h&&p))break;i/=a,a=this.Ea[++o%this.Ea.length]}if(i<=r+1e-14&&(i=r),i=Math.max(1,i),this.Aa.length>0&&(l=i,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.Aa[0];wd(i,s*a,1e-14)&&i>r+1e-14;)i/=a,a=this.Aa[++o%this.Aa.length];var l,c,u;return i}}class m1{constructor(e,n,s,r){this.La=[],this.Yi=e,this.Ia=n,this.Oa=s,this.Na=r}za(e,n){if(e<n)throw new Error("high < low");const s=this.Yi.$t(),r=(e-n)*this.Fa()/s,i=new $p(this.Ia,[2,2.5,2]),o=new $p(this.Ia,[2,2,2.5]),a=new $p(this.Ia,[2.5,2,2]),l=[];return l.push(i.za(e,n,r),o.za(e,n,r),a.za(e,n,r)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let d=1;d<c.length;++d)c[d]<u&&(u=c[d]);return u}(l)}Wa(){const e=this.Yi,n=e.zt();if(n===null)return void(this.La=[]);const s=e.$t(),r=this.Oa(s-1,n),i=this.Oa(0,n),o=this.Yi.N().entireTextOnly?this.Ha()/2:0,a=o,l=s-1-o,c=Math.max(r,i),u=Math.min(r,i);if(c===u)return void(this.La=[]);const d=this.za(c,u);if(this.Ua(n,d,c,u,a,l),e.$a()&&this.qa(d,u,c)){const m=this.Yi.Ya();this.ja(n,d,a,l,m,2*m)}const h=this.La.map(m=>m.Ka),p=this.Yi.Xa(h);for(let m=0;m<this.La.length;m++)this.La[m].Za=p[m]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(e,n,s,r,i,o){const a=this.La,l=this.Yi;let c=s%n;c+=c<0?n:0;const u=s>=r?1:-1;let d=null,h=0;for(let p=s-c;p>r;p-=n){const m=this.Na(p,e,!0);d!==null&&Math.abs(m-d)<this.Fa()||m<i||m>o||(h<a.length?(a[h].Pa=m,a[h].Za=l.Ga(p),a[h].Ka=p):a.push({Pa:m,Za:l.Ga(p),Ka:p}),h++,d=m,l.Ja()&&(n=this.za(p*u,r)))}a.length=h}ja(e,n,s,r,i,o){const a=this.La,l=this.Qa(e,s,i,o),c=this.Qa(e,r,-o,-i),u=this.Na(0,e,!0)-this.Na(n,e,!0);a.length>0&&a[0].Pa-l.Pa<u/2&&a.shift(),a.length>0&&c.Pa-a[a.length-1].Pa<u/2&&a.pop(),a.unshift(l),a.push(c)}Qa(e,n,s,r){const i=(s+r)/2,o=this.Oa(n+s,e),a=this.Oa(n+r,e),l=Math.min(o,a),c=Math.max(o,a),u=Math.max(.1,this.za(c,l)),d=this.Oa(n+i,e),h=d-d%u,p=this.Na(h,e,!0);return{Za:this.Yi.Ga(h),Pa:p,Ka:h}}qa(e,n,s){let r=ti(this.Yi.Qe());return this.Yi.Ja()&&(r=ea(r,this.Yi.tl())),r.$e()-n<e&&s-r.qe()<e}}function f3(t){return t.slice().sort((e,n)=>ue(e.hs())-ue(n.hs()))}var x1;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(x1||(x1={}));const b1=new a3,y1=new c0(100,1);class gN{constructor(e,n,s,r,i){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new Rt,this.ul=new Rt,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=y1,this.wl=Bp(null),this.gl=e,this.Ps=n,this.Ml=s,this.bl=r,this.Sl=i,this.xl=new m1(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(e){if(Vn(this.Ps,e),this.wa(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const n=Ln(e.scaleMargins.top),s=Ln(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(n+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+s}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const n=this.ie();let s=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),n.ie===1&&e.ie!==n.ie&&(function(i,o){if(i===null)return!1;const a=Mc(i.$e(),o),l=Mc(i.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.wl)?(s=ea(this.Ge,this.wl),s!==null&&this.Bl(s)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==n.ie&&(s=zl(this.Ge,this.wl),s!==null&&this.Bl(s));const r=n.ie!==this.Ps.mode;r&&(n.ie===2||this.Le())&&this.wa(),r&&(n.ie===3||this.Dl())&&this.wa(),e.Vl!==void 0&&n.Vl!==e.Vl&&(this.Ps.invertScale=e.Vl,this.Il()),this.ul.p(n,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(e){this.il!==e&&(this.il=e,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const e=this.$t()-this.Ll()-this.Ol();return this.sl=e,e}Qe(){return this.Nl(),this.Ge}Bl(e,n){const s=this.Ge;(n||s===null&&e!==null||s!==null&&!s.He(e))&&(this.pl=null,this.Ge=e)}Fl(e){this.Bl(e),this.Wl(e!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(e){return this.Vl()?e:this.$t()-1-e}Nt(e,n){return this.Le()?e=Zo(e,n):this.Dl()&&(e=Tc(e,n)),this.Pl(e,n)}Ul(e,n,s){this.Nl();const r=this.Ol(),i=ue(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,h=s===void 0?e.length:s.to,p=this.$l();for(let m=d;m<h;m++){const x=e[m],w=x.gt;if(isNaN(w))continue;let g=w;p!==null&&(g=p(x.gt,n));const y=r+u*(g-o),b=c?y:this.il-1-y;x.ut=b}}ql(e,n,s){this.Nl();const r=this.Ol(),i=ue(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,h=s===void 0?e.length:s.to,p=this.$l();for(let m=d;m<h;m++){const x=e[m];let w=x.qh,g=x.Yh,y=x.jh,b=x.Kh;p!==null&&(w=p(x.qh,n),g=p(x.Yh,n),y=p(x.jh,n),b=p(x.Kh,n));let v=r+u*(w-o),S=c?v:this.il-1-v;x.Yl=S,v=r+u*(g-o),S=c?v:this.il-1-v,x.jl=S,v=r+u*(y-o),S=c?v:this.il-1-v,x.Kl=S,v=r+u*(b-o),S=c?v:this.il-1-v,x.Xl=S}}Ts(e,n){const s=this.Cl(e,n);return this.Zl(s,n)}Zl(e,n){let s=e;return this.Le()?s=function(r,i){return i<0&&(r=-r),r/100*i+i}(s,n):this.Dl()&&(s=function(r,i){return r-=100,i<0&&(r=-r),r/100*i+i}(s,n)),s}Ma(){return this.cl}Dt(){return this.fl||(this.fl=f3(this.cl)),this.fl}Gl(e){this.cl.indexOf(e)===-1&&(this.cl.push(e),this.wa(),this.Jl())}Ql(e){const n=this.cl.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.cl.splice(n,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let e=null;for(const n of this.cl){const s=n.zt();s!==null&&(e===null||s.Hh<e.Hh)&&(e=s)}return e===null?null:e.Wt}Vl(){return this.Ps.invertScale}Da(){const e=this.zt()===null;if(this.pl!==null&&(e||this.pl.io===e))return this.pl.Da;this.xl.Wa();const n=this.xl.Da();return this.pl={Da:n,io:e},this._l.p(),n}so(){return this._l}no(e){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-e,this.nl=ue(this.Qe()).Ue()))}eo(e){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(e=this.il-e)<0&&(e=0);let n=(this.vl+.2*(this.il-1))/(e+.2*(this.il-1));const s=ue(this.nl).Ue();n=Math.max(n,.1),s.je(n),this.Bl(s)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(e){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=e,this.nl=ue(this.Qe()).Ue()))}ao(e){if(this.Tl()||this.ml===null)return;const n=ue(this.Qe()).Ye()/(this.zl()-1);let s=e-this.ml;this.Vl()&&(s*=-1);const r=s*n,i=ue(this.nl).Ue();i.Ke(r),this.Bl(i,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(e,n){switch(this.Ps.mode){case 2:return this.oo(Zo(e,n));case 3:return this.ea().format(Tc(e,n));default:return this.nr(e)}}Ga(e){switch(this.Ps.mode){case 2:return this.oo(e);case 3:return this.ea().format(e);default:return this.nr(e)}}Xa(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ea().formatTickmarks(e);default:return this.uo(e)}}Dh(e){return this.nr(e,ue(this.dl).ea())}Vh(e,n){return e=Zo(e,n),this.oo(e,b1)}co(){return this.cl}do(e){this.el={hl:e,rl:!1}}Ns(){this.cl.forEach(e=>e.Ns())}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let e=1/0;this.dl=null;for(const s of this.cl)s.hs()<e&&(e=s.hs(),this.dl=s);let n=100;this.dl!==null&&(n=Math.round(this.dl.nh())),this.ra=y1,this.Le()?(this.ra=b1,n=100):this.Dl()?(this.ra=new c0(100,1),n=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new m1(this,n,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(e){this.al=e}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(e,n){if(this.Nl(),this.Ki())return 0;e=this.Ja()&&e?rf(e,this.wl):e;const s=ue(this.Qe()),r=this.Ol()+(this.zl()-1)*(e-s.$e())/s.Ye();return this.Hl(r)}Cl(e,n){if(this.Nl(),this.Ki())return 0;const s=this.Hl(e),r=ue(this.Qe()),i=r.$e()+r.Ye()*((s-this.Ol())/(this.zl()-1));return this.Ja()?Mc(i,this.wl):i}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const e=this.el.hl;if(e===null)return;let n=null;const s=this.co();let r=0,i=0;for(const l of s){if(!l.Vt())continue;const c=l.zt();if(c===null)continue;const u=l.Mh(e.Uh(),e.bi());let d=u&&u.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=zl(d,this.wl);break;case 2:d=fN(d,c.Wt);break;case 3:d=pN(d,c.Wt)}if(n=n===null?d:n.vn(ue(d)),u!==null){const h=u.tr();h!==null&&(r=Math.max(r,h.above),i=Math.max(i,h.below))}}}if(this.$a()&&(r=Math.max(r,this.Ya()),i=Math.max(i,this.Ya())),r===this.ll&&i===this.ol||(this.ll=r,this.ol=i,this.pl=null,this.kl()),n!==null){if(n.$e()===n.qe()){const l=5*this.fo();this.Ja()&&(n=ea(n,this.wl)),n=new wn(n.$e()-l,n.qe()+l),this.Ja()&&(n=zl(n,this.wl))}if(this.Ja()){const l=ea(n,this.wl),c=Bp(l);if(o=c,a=this.wl,o.Va!==a.Va||o.Ba!==a.Ba){const u=this.nl!==null?ea(this.nl,this.wl):null;this.wl=c,n=zl(l,c),u!==null&&(this.nl=zl(u,c))}}this.Bl(n)}else this.Ge===null&&(this.Bl(new wn(-.5,.5)),this.wl=Bp(null));var o,a}$l(){return this.Le()?Zo:this.Dl()?Tc:this.Ja()?e=>rf(e,this.wl):null}vo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.format(e)):n(e)}mo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.formatTickmarks(e)):n(e)}nr(e,n){return this.vo(e,this.bl.priceFormatter,n)}uo(e,n){const s=this.bl.priceFormatter;return this.mo(e,this.bl.tickmarksPriceFormatter??(s?r=>r.map(s):void 0),n)}oo(e,n){return this.vo(e,this.bl.percentageFormatter,n)}_o(e,n){const s=this.bl.percentageFormatter;return this.mo(e,this.bl.tickmarksPercentageFormatter??(s?r=>r.map(s):void 0),n)}}function v1(t){return t instanceof u0}class w1{constructor(e,n){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new Rt,this.yh=[],this.uh=e,this.ts=n,this.Co=new hN(this);const s=n.N();this.Po=this.yo("left",s.leftPriceScale),this.ko=this.yo("right",s.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(s)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.ko.hr(e.rightPriceScale),e.localization&&(this.Po.wa(),this.ko.wa()),e.overlayPriceScales){const n=Array.from(this.wo.values());for(const s of n){const r=ue(s[0].Ft());r.hr(e.overlayPriceScales),e.localization&&r.wa()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.ko}return this.wo.has(e)?Ln(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach(e=>{e.m&&e.m()}),this.yh=this.yh.filter(e=>{const n=e.oh();return n.detached&&n.detached(),!1}),this.xo.p()}Bo(){return this.bo}Io(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(e){this.Mo=e,this.Ao()}Al(e){this.il=e,this.Po.Al(e),this.ko.Al(e),this.cl.forEach(n=>{if(this.Un(n)){const s=n.Ft();s!==null&&s.Al(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.cl.filter(v1)}Ma(){return this.cl}Un(e){const n=e.Ft();return n===null||this.Po!==n&&this.ko!==n}Gl(e,n,s){this.No(e,n,s?e.hs():this.cl.length)}Ql(e,n){const s=this.cl.indexOf(e);Jt(s!==-1,"removeDataSource: invalid data source"),this.cl.splice(s,1),n||this.cl.forEach((o,a)=>o.ls(a));const r=ue(e.Ft()).ma();if(this.wo.has(r)){const o=Ln(this.wo.get(r)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.wo.delete(r))}const i=e.Ft();i&&i.Ma().indexOf(e)>=0&&(i.Ql(e),this.Fo(i)),this.fl=null}qn(e){return e===this.Po?"left":e===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(e,n){e.no(n)}$o(e,n){e.eo(n),this.Ao()}qo(e){e.ro()}Yo(e,n){e.ho(n)}jo(e,n){e.ao(n),this.Ao()}Ko(e){e.lo()}Ao(){this.cl.forEach(e=>{e.Ns()})}ks(){let e=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?e=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?e=this.Po:this.cl.length!==0&&(e=this.cl[0].Ft()),e===null&&(e=this.ko),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.ko:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Tl()&&this.Xo(e)}Zo(e){const n=this.uh.Pe();e.yl({sn:!0}),n!==null&&e.do(n),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=f3(this.cl)),this.fl}Qo(e,n){n=Pc(n,0,this.cl.length-1);const s=this.cl.indexOf(e);Jt(s!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(s,1),this.cl.splice(n,0,e),this.cl.forEach((r,i)=>r.ls(i)),this.fl=null;for(const r of[this.Po,this.ko])r.Jl(),r.wa();this.ts.ar()}Bt(){return this.Dt().filter(v1)}t_(){return this.xo}i_(){return this.Co}_a(e){this.yh.push(new ZA(e))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.yh}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}Xo(e){const n=e.co();if(n&&n.length>0&&!this.uh.Ki()){const s=this.uh.Pe();s!==null&&e.do(s)}e.Ns()}No(e,n,s){let r=this.Do(n);if(r===null&&(r=this.yo(n,this.ts.N().overlayPriceScales)),this.cl.splice(s,0,e),!l0(n)){const i=this.wo.get(n)||[];i.push(e),this.wo.set(n,i)}e.ls(s),r.Gl(e),e._s(r),this.Fo(r),this.fl=null}To(e,n,s){n.ie!==s.ie&&this.Xo(e)}yo(e,n){const s={visible:!0,autoScale:!0,...br(n)},r=new gN(e,s,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return r.Al(this.$t()),r}}function Sd(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function mN(t,e,n,s){for(const r of t){const i=r.Tt(s);if(i!==null&&i.jn){const o=i.jn(e,n);if(o!==null)return{a_:r,e_:o}}}return null}function xN(t){return t.Fs!==void 0}function p3(t,e,n){const s=[t,...t.Dt()],r=function(i,o,a){var h;let l,c;for(const p of i){const m=((h=p.sa)==null?void 0:h.call(p,o,a))??[];for(const x of m)u=x.zOrder,d=l==null?void 0:l.zOrder,(!d||u==="top"&&d!=="top"||u==="normal"&&d==="bottom")&&(l=x,c=p)}var u,d;return l&&c?{r_:l,n_:c}:null}(s,e,n);if((r==null?void 0:r.r_.zOrder)==="top")return Sd(r);for(const i of s){if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&!r.r_.isBackground)return Sd(r);if(xN(i)){const o=mN(i.Fs(t),e,n,t);if(o!==null)return{n_:i,a_:o.a_,e_:o.e_}}if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&r.r_.isBackground)return Sd(r)}return r!=null&&r.r_?Sd(r):null}class bN{constructor(e,n,s=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=n,this.Vn=s}__(e){const n=e.time,s=this.o_.cacheKey(n),r=this.Dn.get(s);if(r!==void 0)return r.u_;if(this.yn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Ln(o)),this.Tn++,this.yn--}const i=this.l_(e);return this.Dn.set(s,{u_:i,An:this.kn}),this.Rn.set(this.kn,s),this.yn++,this.kn++,i}}class Ic{constructor(e,n){Jt(e<=n,"right should be >= left"),this.c_=e,this.d_=n}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function S1(t,e){return t===null||e===null?t===e:t.He(e)}class yN{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,n){this.g_(n),this.Dn=null;for(let s=n;s<e.length;++s){const r=e[s];let i=this.p_.get(r.timeWeight);i===void 0&&(i=[],this.p_.set(r.timeWeight,i)),i.push({index:s,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}M_(e,n,s,r,i){const o=Math.ceil(n/e);return this.Dn!==null&&this.Dn.b_===o&&i===this.Dn.S_&&s===this.Dn.x_||(this.Dn={S_:i,x_:s,Da:this.C_(o,s,r),b_:o}),this.Dn.Da}g_(e){if(e===0)return void this.p_.clear();const n=[];this.p_.forEach((s,r)=>{e<=s[0].index?n.push(r):s.splice(Ja(s,e,i=>i.index<e),1/0)});for(const s of n)this.p_.delete(s)}C_(e,n,s){let r=[];const i=o=>!n||s.has(o.index);for(const o of Array.from(this.p_.keys()).sort((a,l)=>l-a)){if(!this.p_.get(o))continue;const a=r;r=[];const l=a.length;let c=0;const u=Ln(this.p_.get(o)),d=u.length;let h=1/0,p=-1/0;for(let m=0;m<d;m++){const x=u[m],w=x.index;for(;c<l;){const g=a[c],y=g.index;if(!(y<w&&i(g))){h=y;break}c++,r.push(g),p=y,h=1/0}if(h-w>=e&&w-p>=e&&i(x))r.push(x),p=w;else if(this.v_)return a}for(;c<l;c++)i(a[c])&&r.push(a[c])}return r}}class ha{constructor(e){this.P_=e}y_(){return this.P_===null?null:new Ic(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new ha(null)}}function vN(t,e){return t.weight>e.weight?t:e}class wN{constructor(e,n,s,r){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new yN,this.B_=new Map,this.I_=ha.T_(),this.E_=!0,this.A_=new Rt,this.z_=new Rt,this.L_=new Rt,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=n,this.bl=s,this.U_=n.rightOffset,this.q_=n.barSpacing,this.ts=e,this.Y_(n),this.o_=r,this.j_(),this.V_.m_(n.uniformDistribution),this.K_()}N(){return this.Ps}X_(e){Vn(this.bl,e),this.Z_(),this.j_()}hr(e,n){Vn(this.Ps,e),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),this.Y_(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(e){var n;return((n=this.D_[e])==null?void 0:n.time)??null}ss(e){return this.D_[e]??null}Q_(e,n){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return n?this.D_.length-1:null;const s=Ja(this.D_,this.o_.key(e),(r,i)=>this.o_.key(r.time)<i);return this.o_.key(e)<this.o_.key(this.D_[s].time)?n?s:null:s}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const e=this.Pe();if(e===null)return null;const n={from:e.Uh(),to:e.bi()};return this.eu(n)}eu(e){const n=Math.round(e.from),s=Math.round(e.to),r=ue(this.ru()),i=ue(this.hu());return{from:ue(this.ss(Math.max(r,n))),to:ue(this.ss(Math.min(i,s)))}}au(e){return{from:ue(this.Q_(e.from,!0)),to:ue(this.Q_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const n=this.su(),s=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const r=this.q_*e/s;this.q_=r}if(this.Ps.fixLeftEdge&&n!==null&&n.Uh()<=0){const r=s-e;this.U_-=Math.round(r/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(e){if(this.Ki()||!su(e))return 0;const n=this._u()+this.U_-e;return this.Mo-(n+.5)*this.q_-1}uu(e,n){const s=this._u(),r=n===void 0?0:n.from,i=n===void 0?e.length:n.to;for(let o=r;o<i;o++){const a=e[o].wt,l=s+this.U_-a,c=this.Mo-(l+.5)*this.q_-1;e[o]._t=c}}cu(e,n){const s=Math.ceil(this.du(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.fu(s)?this.pu(s):s}fn(e){this.E_=!0,this.U_=e,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(e){const n=this.q_;if(this.wu(e),this.Ps.rightOffsetPixels!==void 0&&n!==0){const s=this.U_*n/this.q_;this.U_=s}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,n=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(n/e),r=ue(this.Pe()),i=Math.max(r.Uh(),r.Uh()-s),o=Math.max(r.bi(),r.bi()-s),a=this.V_.M_(e,n,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),l=this.ru()+s,c=this.hu()-s,u=this.Mu(),d=this.Ps.fixLeftEdge||u,h=this.Ps.fixRightEdge||u;let p=0;for(const m of a){if(!(i<=m.index&&m.index<=o))continue;let x;p<this.H_.length?(x=this.H_[p],x.coord=this.qt(m.index),x.label=this.bu(m),x.weight=m.weight):(x={needAlignCoordinate:!1,coord:this.qt(m.index),label:this.bu(m),weight:m.weight},this.H_.push(x)),this.q_>n/2&&!u?x.needAlignCoordinate=!1:x.needAlignCoordinate=d&&m.index<=l||h&&m.index>=c,p++}return this.H_.length=p,this.N_=this.H_,this.H_}Su(){let e;this.E_=!0,this.dn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(e)}xu(e){this.E_=!0,this.R_=e,this.ou(),this.G_()}Cu(e,n){const s=this.du(e),r=this.mu(),i=r+n*(r/10);this.dn(i),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(s-this.du(e)))}no(e){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=e,this.Pu()))}eo(e){if(this.O_===null)return;const n=Pc(this.Mo-e,0,this.Mo),s=Pc(this.Mo-ue(this.vl),0,this.Mo);n!==0&&s!==0&&this.dn(this.O_.mu*n/s)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(e){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Pu()))}ao(e){if(this.ml===null)return;const n=(this.ml-e)/this.mu();this.U_=ue(this.O_).gu+n,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.U_,r=performance.now();this.ts._n({Ru:i=>(i-r)/n>=1,Du:i=>{const o=(i-r)/n;return o>=1?e:s+(e-s)*o}})}yt(e,n){this.E_=!0,this.D_=e,this.V_.w_(e,n),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(e,n){const s=e.f_(),r=n&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-r)/s),this.U_=e.bi()-this._u(),n&&(this.U_=r?r/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const e=this.ru(),n=this.hu();e!==null&&n!==null&&this.Eu(new Ic(e,n),!0)}zu(e){const n=new Ic(e.from,e.to);this.Eu(n)}ns(e){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const n of e)for(const s of n.va())this.F_.set(s,!0);this.W_++}Mu(){const e=this.ts.N().handleScroll,n=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(e){return(this.Mo-1-e)/this.q_}du(e){const n=this.Lu(e),s=this._u()+this.U_-n;return Math.round(1e6*s)/1e6}wu(e){const n=this.q_;this.q_=e,this.lu(),n!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(ha.T_());const e=this._u(),n=this.Mo/this.q_,s=this.U_+e,r=new Ic(s-n+1,s);this.Nu(new ha(r))}lu(){const e=Pc(this.q_,this.Fu(),this.Wu());this.q_!==e&&(this.q_=e,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const e=this.Hu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const n=this.Uu();this.U_>n&&(this.U_=n,this.E_=!0)}Hu(){const e=this.ru(),n=this.R_;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(e){let n=this.B_.get(e.weight);return n===void 0&&(n=new bN(s=>this.$u(s),this.o_),this.B_.set(e.weight,n)),n.__(e)}$u(e){return this.o_.formatTickmark(e,this.bl)}Nu(e){const n=this.I_;this.I_=e,S1(n.y_(),this.I_.y_())||this.A_.p(),S1(n.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const e=this.ru();if(e===null)return;const n=this.Pe();if(n===null)return;const s=n.Uh()-e;if(s<0){const r=this.U_-s-1;this.fn(r)}this.lu()}J_(){this.ou(),this.lu()}fu(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}pu(e){const n=function*(r){const i=Math.round(r),o=i<r;let a=1;for(;;)o?(yield i+a,yield i-a):(yield i-a,yield i+a),a++}(e),s=this.hu();for(;s;){const r=n.next().value;if(this.F_.get(r))return r;if(r<0||r>s)break}return e}Y_(e){if(e.rightOffsetPixels!==void 0){const n=e.rightOffsetPixels/(e.barSpacing||this.q_);this.ts.fn(n)}}}var k1,_1,C1,E1,P1;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(k1||(k1={}));class SN{constructor(e,n,s){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new Rt,this.Xu=new Rt,this.Zu=null,this.Gu=e,this.Ps=n,this.o_=s,this.Sl=new SA(this.Ps.layout.colorParsers),this.Ju=new wA(this),this.uh=new wN(this,n.timeScale,this.Ps.localization,s),this.Ct=new NA(this,n.crosshair),this.Qu=new cN(n.crosshair),n.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(Xt.gn())}ar(){this.rc(Xt.wn())}Zh(){this.rc(new Xt(1))}Eh(e){const n=this.hc(e);this.rc(n)}ac(){return this.ju}lc(e){var s,r,i,o;if(((s=this.ju)==null?void 0:s.n_)===(e==null?void 0:e.n_)&&((i=(r=this.ju)==null?void 0:r.e_)==null?void 0:i.Kn)===((o=e==null?void 0:e.e_)==null?void 0:o.Kn))return;const n=this.ju;this.ju=e,n!==null&&this.Eh(n.n_),e!==null&&e.n_!==(n==null?void 0:n.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Vn(this.Ps,e),this.qu.forEach(n=>n.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.X_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(e,n,s=0){const r=this.qu[s];if(r===void 0)return;if(e==="left")return Vn(this.Ps,{leftPriceScale:n}),r.Ro({leftPriceScale:n}),this.Ku.p(),void this.Ih();if(e==="right")return Vn(this.Ps,{rightPriceScale:n}),r.Ro({rightPriceScale:n}),this.Ku.p(),void this.Ih();const i=this._c(e,s);i!==null&&(i.Ft.hr(n),this.Ku.p())}_c(e,n){const s=this.qu[n];if(s===void 0)return null;const r=s.Do(e);return r!==null?{Us:s,Ft:r}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(e,n){e.Al(n),this.vu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.qu.forEach(n=>n.Eo(e)),this.vu()}fc(e){this.qu.length!==1&&(Jt(e>=0&&e<this.qu.length,"Invalid pane index"),this.qu.splice(e,1),this.Ih())}vc(e,n){if(this.qu.length<2)return;Jt(e>=0&&e<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu.reduce((d,h)=>d+h.Bo(),0),i=this.qu.reduce((d,h)=>d+h.$t(),0),o=i-30*(this.qu.length-1);n=Math.min(o,Math.max(30,n));const a=r/i,l=s.$t();s.Io(n*a);let c=n-l,u=this.qu.length-1;for(const d of this.qu)if(d!==s){const h=Math.min(o,Math.max(30,d.$t()-c/u));c-=d.$t()-h,u-=1;const p=h*a;d.Io(p)}this.Ih()}mc(e,n){Jt(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu[n];this.qu[e]=r,this.qu[n]=s,this.Ih()}wc(e,n){if(Jt(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index"),e===n)return;const[s]=this.qu.splice(e,1);this.qu.splice(n,0,s),this.Ih()}Uo(e,n,s){e.Uo(n,s)}$o(e,n,s){e.$o(n,s),this.Ah(),this.rc(this.gc(e,2))}qo(e,n){e.qo(n),this.rc(this.gc(e,2))}Yo(e,n,s){n.Tl()||e.Yo(n,s)}jo(e,n,s){n.Tl()||(e.jo(n,s),this.Ah(),this.rc(this.gc(e,2)))}Ko(e,n){n.Tl()||(e.Ko(n),this.rc(this.gc(e,2)))}Zo(e,n){e.Zo(n),this.rc(this.gc(e,2))}Mc(e){this.uh.no(e)}bc(e,n){const s=this.Et();if(s.Ki()||n===0)return;const r=s.Qi();e=Math.max(1,Math.min(e,r)),s.Cu(e,n),this.vu()}Sc(e){this.xc(0),this.Cc(e),this.Pc()}yc(e){this.uh.eo(e),this.vu()}kc(){this.uh.ro(),this.ar()}xc(e){this.uh.ho(e)}Cc(e){this.uh.ao(e),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(e,n,s,r,i){this.Ct.Vs(e,n);let o=NaN,a=this.uh.cu(e,!0);const l=this.uh.Pe();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));const c=r.ks(),u=c.zt();if(u!==null&&(o=c.Ts(n,u)),o=this.Qu.ga(o,a,r),this.Ct.As(a,o,r),this.Zh(),!i){const d=p3(r,e,n);this.lc(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Xu.p(this.Ct.It(),{x:e,y:n},s)}}Rc(e,n,s){const r=s.ks(),i=r.zt(),o=r.Nt(e,ue(i)),a=this.uh.Q_(n,!0),l=this.uh.qt(ue(a));this.Tc(l,o,null,s,!0)}Dc(e){this.uc().Ls(),this.Zh(),e||this.Xu.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const n=this.Ct.Is(),s=this.Ct.Es();this.Tc(n,s,null,e)}this.Ct.Ns()}Vc(e,n,s){const r=this.uh.Rs(0);n!==void 0&&s!==void 0&&this.uh.yt(n,s);const i=this.uh.Rs(0),o=this.uh._u(),a=this.uh.Pe();if(a!==null&&r!==null&&i!==null){const l=a.Te(o),c=this.o_.key(r)>this.o_.key(i),u=e!==null&&e>o&&!c,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,h=l&&(s!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!h){const p=e-o;this.uh.fn(this.uh.gu()-p)}}this.uh.xu(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(s){return s instanceof w1}(e))return e;const n=this.qu.find(s=>s.Dt().includes(e));return n===void 0?null:n}vu(){this.qu.forEach(e=>e.Jo()),this.Ah()}m(){this.qu.forEach(e=>e.m()),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(e,n){const s=this.tc(n);this.Ec(e,s),this.Yu.push(e),this.Yu.length===1?this.Ih():this.ar()}Ac(e){const n=this.Hn(e),s=this.Yu.indexOf(e);Jt(s!==-1,"Series not found");const r=ue(n);this.Yu.splice(s,1),r.Ql(e),e.m&&e.m(),this.uh.K_(),this.zc(r)}Bh(e,n){const s=ue(this.Hn(e));s.Ql(e,!0),s.Gl(e,n,!0)}Au(){const e=Xt.wn();e.rn(),this.rc(e)}Lc(e){const n=Xt.wn();n.ln(e),this.rc(n)}cn(){const e=Xt.wn();e.cn(),this.rc(e)}dn(e){const n=Xt.wn();n.dn(e),this.rc(n)}fn(e){const n=Xt.wn();n.fn(e),this.rc(n)}_n(e){const n=Xt.wn();n._n(e),this.rc(n)}hn(){const e=Xt.wn();e.hn(),this.rc(e)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(e,n){if(Jt(n>=0,"Index should be greater or equal to 0"),n===this.Fc(e))return;const s=ue(this.Hn(e));s.Ql(e);const r=this.tc(n);this.Ec(e,r),s.Ma().length===0&&this.zc(s),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(e){const n=this.ec,s=this.sc;if(n===s)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Zu===null||this.Zu.mr!==s||this.Zu.wr!==n)this.Zu={mr:s,wr:n,Hc:new Map};else{const i=this.Zu.Hc.get(e);if(i!==void 0)return i}const r=this.Sl.tt(s,n,e/100);return this.Zu.Hc.set(e,r),r}Uc(e){return this.qu.indexOf(e)}Xi(){return this.Sl}$c(){return this.qc()}qc(e){const n=new w1(this.uh,this);this.qu.push(n);const s=e??this.qu.length-1,r=Xt.gn();return r.Qs(s,{tn:0,sn:!0}),this.rc(r),n}tc(e){return Jt(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.qu.length,e))<this.qu.length?this.qu[e]:this.qc(e)}Fc(e){return this.qu.findIndex(n=>n.Oo().includes(e))}gc(e,n){const s=new Xt(n);if(e!==null){const r=this.qu.indexOf(e);s.Qs(r,{tn:n})}return s}hc(e,n){return n===void 0&&(n=2),this.gc(this.Hn(e),n)}rc(e){this.Gu&&this.Gu(e),this.qu.forEach(n=>n.i_().lr().yt())}Ec(e,n){const s=e.N().priceScaleId,r=s!==void 0?s:this.Oc();n.Gl(e,r),l0(r)||e.hr(e.N())}nc(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}zc(e){!e.Lo()&&e.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(e),1)}}function g3(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}function Im(t){return!Qa(t)&&!Au(t)}function m3(t){return Qa(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(_1||(_1={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(C1||(C1={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(E1||(E1={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(P1||(P1={}));const T1=t=>t.getUTCFullYear();function kN(t,e,n){return e.replace(/yyyy/g,(s=>yr(T1(s),4))(t)).replace(/yy/g,(s=>yr(T1(s)%100,2))(t)).replace(/MMMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,n)).replace(/MMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,n)).replace(/MM/g,(s=>yr((r=>r.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>yr((r=>r.getUTCDate())(s),2))(t))}class x3{constructor(e="yyyy-MM-dd",n="default"){this.Yc=e,this.jc=n}__(e){return kN(e,this.Yc,this.jc)}}class _N{constructor(e){this.Kc=e||"%h:%m:%s"}__(e){return this.Kc.replace("%h",yr(e.getUTCHours(),2)).replace("%m",yr(e.getUTCMinutes(),2)).replace("%s",yr(e.getUTCSeconds(),2))}}const CN={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class EN{constructor(e={}){const n={...CN,...e};this.Qc=new x3(n.Xc,n.Jc),this.td=new _N(n.Zc),this.sd=n.Gc}__(e){return`${this.Qc.__(e)}${this.sd}${this.td.__(e)}`}}function kd(t){return 60*t*60*1e3}function Up(t){return 60*t*1e3}const _d=[{nd:(M1=1,1e3*M1),ed:10},{nd:Up(1),ed:20},{nd:Up(5),ed:21},{nd:Up(30),ed:22},{nd:kd(1),ed:30},{nd:kd(3),ed:31},{nd:kd(6),ed:32},{nd:kd(12),ed:33}];var M1;function I1(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=_d.length-1;n>=0;--n)if(Math.floor(e.getTime()/_d[n].nd)!==Math.floor(t.getTime()/_d[n].nd))return _d[n].ed;return 0}function Wp(t){let e=t;if(Au(t)&&(e=Rb(t)),!Im(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{rd:Math.round(n.getTime()/1e3),hd:e}}function R1(t){if(!m3(t))throw new Error("time must be of type isUTCTimestamp");return{rd:t}}function Rb(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function A1(t){Au(t.time)&&(t.time=Rb(t.time))}class N1{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(A1)}(e):A1(e)}createConverterToInternalObj(e){return ue(function(n){return n.length===0?null:Im(n[0].time)||Au(n[0].time)?Wp:R1}(e))}key(e){return typeof e=="object"&&"rd"in e?e.rd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.hd===void 0?new Date(1e3*n.rd).getTime():new Date(Date.UTC(n.hd.year,n.hd.month-1,n.hd.day)).getTime()}convertHorzItemToInternal(e){return m3(n=e)?R1(n):Im(n)?Wp(n):Wp(Rb(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new EN({Xc:n,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:e.locale}):this.ad=new x3(n,e.locale)}formatHorzItem(e){const n=e;return this.ad.__(new Date(1e3*n.rd))}formatTickmark(e,n){const s=function(i,o,a){switch(i){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),r=this.Ps.timeScale;if(r.tickMarkFormatter!==void 0){const i=r.tickMarkFormatter(e.originalTime,s,n.locale);if(i!==null)return i}return function(i,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=i.hd===void 0?new Date(1e3*i.rd):new Date(Date.UTC(i.hd.year,i.hd.month-1,i.hd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,s,n.locale)}maxTickMarkWeight(e){let n=e.reduce(vN,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(s,r=0){if(s.length===0)return;let i=r===0?null:s[r-1].time.rd,o=i!==null?new Date(1e3*i):null,a=0;for(let l=r;l<s.length;++l){const c=s[l],u=new Date(1e3*c.time.rd);o!==null&&(c.timeWeight=I1(u,o)),a+=c.time.rd-(i||c.time.rd),i=c.time.rd,o=u}if(r===0&&s.length>1){const l=Math.ceil(a/(s.length-1)),c=new Date(1e3*(s[0].time.rd-l));s[0].timeWeight=I1(new Date(1e3*s[0].time.rd),c)}})(e,n)}static ld(e){return Vn({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Za=typeof window<"u";function O1(){return!!Za&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Hp(){return!!Za&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Rm(t){return t+t%2}function PN(t){Za&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class d0{constructor(e,n,s){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!Hp(),this.Ld=r=>{this.Od(r)},this.Nd=r=>{if(this.Fd(r)){const i=this.Wd(r);if(++this.dd,this.fd&&this.dd>1){const{Hd:o}=this.Ud(Fs(r),this.pd);o<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}}else{const i=this.Wd(r);if(++this.od,this._d&&this.od>1){const{Hd:o}=this.Ud(Fs(r),this.ud);o<5&&!this.bd&&this.Kd(i,this.Yd.Xd),this.Zd()}}},this.Gd=e,this.Yd=n,this.Ps=s,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(e){this.yd&&this.yd();const n=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",n)},this.Gd.addEventListener("mousemove",n),this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(e){if(this.Id||this.gd!==null||this.Fd(e))return;const n=this.Wd(e);this.Kd(n,this.Yd.nf),this.zd=!0}ef(e){const n=Vp(e.changedTouches,ue(this.Ad));if(n===null||(this.Ed=Cd(e),this.Rd!==null)||this.Bd)return;this.Vd=!0;const s=this.Ud(Fs(n),ue(this.gd)),{rf:r,hf:i,Hd:o}=s;if(this.Md||!(o<5)){if(!this.Md){const a=.5*r,l=i>=a&&!this.Ps.af(),c=a>i&&!this.Ps.lf();l||c||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const a=this.Wd(e,n);this.$d(a,this.Yd._f),Oo(e)}}}uf(e){if(e.button!==0)return;const n=this.Ud(Fs(e),ue(this.wd)),{Hd:s}=n;if(s>=5&&(this.bd=!0,this.Zd()),this.bd){const r=this.Wd(e);this.Kd(r,this.Yd.cf)}}Ud(e,n){const s=Math.abs(n._t-e._t),r=Math.abs(n.ut-e.ut);return{rf:s,hf:r,Hd:s+r}}df(e){let n=Vp(e.changedTouches,ue(this.Ad));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Ad=null,this.Ed=Cd(e),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const s=this.Wd(e,n);if(this.$d(s,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:r}=this.Ud(Fs(n),this.pd);r<30&&!this.Sd&&this.$d(s,this.Yd.qd),this.jd()}else this.Sd||(this.$d(s,this.Yd.pf),this.Yd.pf&&Oo(e));this.dd===0&&Oo(e),e.touches.length===0&&this.md&&(this.md=!1,Oo(e))}Od(e){if(e.button!==0)return;const n=this.Wd(e);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),O1()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(e))if(this.Kd(n,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:s}=this.Ud(Fs(e),this.ud);s<5&&!this.bd&&this.Kd(n,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(n,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(e){if(this.Ad!==null)return;const n=e.changedTouches[0];this.Ad=n.identifier,this.Ed=Cd(e);const s=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=Fs(n),this.Td&&(this.Td(),this.Td=null);{const i=this.ef.bind(this),o=this.df.bind(this);this.Td=()=>{s.removeEventListener("touchmove",i),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,e),240)}const r=this.Wd(e,n);this.$d(r,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=Fs(n))}bf(e){if(e.button!==0)return;const n=this.Gd.ownerDocument.documentElement;O1()&&n.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=Fs(e),this.kd&&(this.kd(),this.kd=null);{const r=this.uf.bind(this),i=this.Od.bind(this);this.kd=()=>{n.removeEventListener("mousemove",r),n.removeEventListener("mouseup",i)},n.addEventListener("mousemove",r),n.addEventListener("mouseup",i)}if(this.Id=!0,this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=Fs(e))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const e=this.Gd.ownerDocument,n=s=>{this.Yd.xf&&(s.composed&&this.Gd.contains(s.composedPath()[0])||s.target&&this.Gd.contains(s.target)||this.Yd.xf())};this.Cd=()=>{e.removeEventListener("touchstart",n)},this.xd=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Hp()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),PN(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",()=>{},{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",e=>this.Rf(e.touches),{passive:!0}),this.Gd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const n=D1(e.touches[0],e.touches[1])/this.Dd;this.Yd.kf(this.Rd,n),Oo(e)}},{passive:!1}),this.Gd.addEventListener("touchend",e=>{this.Rf(e.touches)}))}Rf(e){e.length===1&&(this.Vd=!1),e.length!==2||this.Vd||this.md?this.Df():this.Vf(e)}Vf(e){const n=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Dd=D1(e[0],e[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(e){if(this.yd&&this.yd(),this.Fd(e)||!this.zd)return;const n=this.Wd(e);this.Kd(n,this.Yd.Bf),this.zd=!Hp()}gf(e){const n=Vp(e.touches,ue(this.Ad));if(n===null)return;const s=this.Wd(e,n);this.$d(s,this.Yd.If),this.Sd=!0,this.md=!0}Fd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Cd(e)<this.Ed+500}$d(e,n){n&&n.call(this.Yd,e)}Kd(e,n){n&&n.call(this.Yd,e)}Wd(e,n){const s=n||e,r=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-r.left,localY:s.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Ef:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Af:e.type,zf:s.target,a_:e.view,Lf:()=>{e.type!=="touchstart"&&Oo(e)}}}}function D1(t,e){const n=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(n*n+s*s)}function Oo(t){t.cancelable&&t.preventDefault()}function Fs(t){return{_t:t.pageX,ut:t.pageY}}function Cd(t){return t.timeStamp||performance.now()}function Vp(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class TN{constructor(e,n,s){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=e,this.Uf=e.$f()[n],this.qf=e.$f()[s],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return at({width:this.Uf.Gf().width,height:1})}Jf(){return at({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(e,n,s){const r=this.Jf();e.fillStyle=this.Hf.N().layout.panes.separatorColor,e.fillRect(n,s,r.width,r.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.jf.appendChild(e);const s=document.createElement("div"),r=s.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.jf.appendChild(s);const i={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new d0(s,i,{af:()=>!1,lf:()=>!0}),this.Of={ip:s,tp:e}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(e){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(e){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(e){if(this.Of===null)return;const n=this.Uf.ap().Bo()+this.qf.ap().Bo(),s=n/(this.Uf.Gf().height+this.qf.Gf().height),r=30*s;n<=2*r||(this.Wf={lp:e.pageY,op:this.Uf.ap().Bo(),_p:n-r,up:n,cp:s,dp:r},this.Of.tp.style.display="block")}rp(e){const n=this.Wf;if(n===null)return;const s=(e.pageY-n.lp)*n.cp,r=Pc(n.op+s,n.dp,n._p);this.Uf.ap().Io(r),this.qf.ap().Io(n.up-r),this.Hf.Qt().Ih()}hp(e){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function Yp(t,e){return t.fp-e.fp}function Gp(t,e,n){const s=(t.fp-e.fp)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),n)}class MN{constructor(e,n,s,r){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=e,this.xp=n,this.Cp=s,this.Mn=r}Pp(e,n){if(this.pp!==null){if(this.pp.wt===n)return void(this.pp.fp=e);if(Math.abs(this.pp.fp-e)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:n,fp:e}}le(e,n){if(this.pp===null||this.vp===null||n-this.pp.wt>50)return;let s=0;const r=Gp(this.pp,this.vp,this.xp),i=Yp(this.pp,this.vp),o=[r],a=[i];if(s+=i,this.mp!==null){const c=Gp(this.vp,this.mp,this.xp);if(Math.sign(c)===Math.sign(r)){const u=Yp(this.vp,this.mp);if(o.push(c),a.push(u),s+=u,this.wp!==null){const d=Gp(this.mp,this.wp,this.xp);if(Math.sign(d)===Math.sign(r)){const h=Yp(this.mp,this.wp);o.push(d),a.push(h),s+=h}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/s*o[c];Math.abs(l)<this.Sp||(this.gp={fp:e,wt:n},this.bp=l,this.Mp=function(c,u){const d=Math.log(u);return Math.log(1*d/-c)/d}(Math.abs(l),this.Cp))}Du(e){const n=ue(this.gp),s=e-n.wt;return n.fp+this.bp*(Math.pow(this.Cp,s)-1)/Math.log(this.Cp)}Ru(e){return this.gp===null||this.yp(e)===this.Mp}yp(e){const n=e-ue(this.gp).wt;return Math.min(n,this.Mp)}}class IN{constructor(e,n){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=e,this.Vp=n,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function ho(t,e){const n=ue(t.ownerDocument).createElement("canvas");t.appendChild(n);const s=gA(n,{options:{allowResizeObserver:!0},transform:(r,i)=>({width:Math.max(r.width,i.width),height:Math.max(r.height,i.height)})});return s.resizeCanvasElement(e),s}function fo(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function Am(t,e,n,s){t.ih&&t.ih(e,n,s)}function dh(t,e,n,s){t.nt(e,n,s)}function Nm(t,e,n,s){const r=t(n,s);for(const i of r){const o=i.Tt(s);o!==null&&e(o)}}function Kp(t,e){return n=>{var s,r;return function(i){return i.Ft!==void 0}(n)?(((s=n.Ft())==null?void 0:s.ma())??"")!==e?[]:((r=n.ta)==null?void 0:r.call(n,t))??[]:[]}}function L1(t,e,n,s){if(!t.length)return;let r=0;const i=t[0].$t(s,!0);let o=e===1?n/2-(t[0].Fi()-i/2):t[0].Fi()-i/2-n/2;o=Math.max(0,o);for(let a=1;a<t.length;a++){const l=t[a],c=t[a-1],u=c.$t(s,!1),d=l.Fi(),h=c.Fi();if(e===1?d>h-u:d<h+u){const p=h-u*e;l.Wi(p);const m=p-e*u/2;if((e===1?m<0:m>n)&&o>0){const x=e===1?-1-m:m-n,w=Math.min(x,o);for(let g=r;g<t.length;g++)t[g].Wi(t[g].Fi()+e*w);o-=w}}else r=a,o=e===1?h-u-d:d-(h+u)}}class j1{constructor(e,n,s,r){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new tf(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=e,this.Ps=n,this.Ml=n.layout,this.Ju=s,this.jp=r==="left",this.Kp=Kp("normal",r),this.Xp=Kp("top",r),this.Zp=Kp("bottom",r),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=ho(this.jf,at({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=ho(this.jf,at({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new d0(this.Jp.canvasElement,a,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),fo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),fo(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const e=this.Ju.N();return this.Wp!==e.k&&(this.Fp.Bn(),this.Wp=e.k),e}nv(){if(this.Yi===null)return 0;let e=0;const n=this.sv(),s=ue(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));s.save();const r=this.Yi.Da();s.font=this.ev(),r.length>0&&(e=Math.max(this.Fp.Vi(s,r[0].Za),this.Fp.Vi(s,r[r.length-1].Za)));const i=this.rv();for(let c=i.length;c--;){const u=this.Fp.Vi(s,i[c].ri());u>e&&(e=u)}const o=this.Yi.zt();if(o!==null&&this.Op!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Yi.Ts(1,o),u=this.Yi.Ts(this.Op.height-2,o);e=Math.max(e,this.Fp.Vi(s,this.Yi.Zi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Fp.Vi(s,this.Yi.Zi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;s.restore();const l=e||34;return Rm(Math.ceil(n.S+n.C+n.B+n.I+5+l))}hv(e){this.Op!==null&&eo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`)}av(){return ue(this.Op).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=e,e.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const e=this.Pt.ap();this.Pt.qp().Qt().Zo(e,ue(this.Ft()))}lv(e){if(this.Op===null)return;const n={colorSpace:this.Pt.qp().N().layout.colorSpace};if(e!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const r=uo(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i)}),this.Pt.cv(r,this.Zp),this.dv(r),this.Pt.cv(r,this.Kp),this.fv(r))}this.Jp.applySuggestedBitmapSize();const s=uo(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.pv(s),this.Pt.cv(s,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}yt(){var e;(e=this.Yi)==null||e.Da()}ep(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!0,n.Uo(s,this.Yi,e.localY)}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap(),r=this.Yi;n.$o(s,r,e.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),n=this.Pt.ap(),s=this.Yi;this.Np&&(this.Np=!1,e.qo(n,s))}hp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!1,n.qo(s,this.Yi)}tv(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(e){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(e){this.vv(0)}rv(){const e=[],n=this.Yi===null?void 0:this.Yi;return(s=>{for(let r=0;r<s.length;++r){const i=s[r].Ws(this.Pt.ap(),n);for(let o=0;o<i.length;o++)e.push(i[o])}})(this.Pt.ap().Dt()),e}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.Pt.ap().Qt(),o=i.$(),a=i.Wc();o===a?o0(e,0,0,s,r,o):s3(e,0,0,s,r,o,a)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const r=Math.max(1,Math.floor(this.sv().S*s));let i;i=this.jp?n.width-r:0,e.fillRect(i,0,r,n.height)}dv(e){if(this.Op===null||this.Yi===null)return;const n=this.Yi.Da(),s=this.Yi.N(),r=this.sv(),i=this.jp?this.Op.width-r.C:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=s.borderColor;const c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),d=Math.round(r.C*a);o.beginPath();for(const h of n)o.rect(Math.floor(i*a),Math.round(h.Pa*l)-u,d,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.ev(),o.fillStyle=s.textColor??this.Ml.textColor,o.textAlign=this.jp?"right":"left",o.textBaseline="middle";const a=this.jp?Math.round(i-r.B):Math.round(i+r.C+r.B),l=n.map(c=>this.Fp.Di(o,c.Za));for(let c=n.length;c--;){const u=n[c];o.fillText(u.Za,a,u.Pa+l[c])}})}ov(){if(this.Op===null||this.Yi===null)return;let e=this.Op.height/2;const n=[],s=this.Yi.Dt().slice(),r=this.Pt.ap(),i=this.sv();this.Yi===r.$n()&&this.Pt.ap().Dt().forEach(l=>{r.Un(l)&&s.push(l)});const o=this.Yi.Ma()[0],a=this.Yi;s.forEach(l=>{const c=l.Ws(r,a);c.forEach(u=>{u.Wi(null),u.Hi()&&n.push(u)}),o===l&&c.length>0&&(e=c[0].Ii())}),n.forEach(l=>l.Wi(l.Ii())),this.Yi.N().alignLabels&&this.mv(n,i,e)}mv(e,n,s){if(this.Op===null)return;const r=e.filter(o=>o.Ii()<=s),i=e.filter(o=>o.Ii()>s);r.sort((o,a)=>a.Ii()-o.Ii()),r.length&&i.length&&i.push(r[0]),i.sort((o,a)=>o.Ii()-a.Ii());for(const o of e){const a=Math.floor(o.$t(n)/2),l=o.Ii();l>-a&&l<a&&o.Wi(a),l>this.Op.height-a&&l<this.Op.height+a&&o.Wi(this.Op.height-a)}L1(r,1,this.Op.height,n),L1(i,-1,this.Op.height,n)}fv(e){if(this.Op===null)return;const n=this.rv(),s=this.sv(),r=this.jp?"right":"left";n.forEach(i=>{i.Ui()&&i.Tt(ue(this.Yi)).nt(e,s,this.Fp,r)})}pv(e){if(this.Op===null||this.Yi===null)return;const n=this.Pt.qp().Qt(),s=[],r=this.Pt.ap(),i=n.uc().Ws(r,this.Yi);i.length&&s.push(i);const o=this.sv(),a=this.jp?"right":"left";s.forEach(l=>{l.forEach(c=>{c.Tt(ue(this.Yi)).nt(e,o,this.Fp,a)})})}vv(e){this.jf.style.cursor=e===1?"ns-resize":"default"}_l(){const e=this.nv();this.Hp<e&&this.Pt.qp().Qt().Ih(),this.Hp=e}ev(){return ef(this.Ml.fontSize,this.Ml.fontFamily)}}function RN(t,e){var n;return((n=t.Jh)==null?void 0:n.call(t,e))??[]}function F1(t,e){var n;return((n=t.Fs)==null?void 0:n.call(t,e))??[]}function z1(t,e){var n;return((n=t.us)==null?void 0:n.call(t,e))??[]}function AN(t,e){var n;return((n=t.Xh)==null?void 0:n.call(t,e))??[]}class Ab{constructor(e,n){this.Op=at({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new Rt,this.Cv=new Rt,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=e,this.Vv=n,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(s),this.Gp=ho(s,at({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jp=ho(s,at({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const i=this.Jp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new d0(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),fo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),fo(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return ue(this.Vv)}Lv(e){var n;this.Vv!==null&&this.Vv.t_().u(this),this.Vv=e,this.Vv!==null&&this.Vv.t_().i(Ab.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new IN(this.Iv,this.Vp),this.Mv.yt()):((n=this.Mv)==null||n.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const e=this.Vv.Wo();this.wv._s(ue(e))}if(this.gv!==null){const e=this.Vv.Ho();this.gv._s(ue(e))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(e){this.Vv&&this.Vv.Io(e)}sf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}Sf(e){this.Fv(),this.Hv(),this.Wv(e.localX,e.localY,e)}nf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}mf(e){this.Vv!==null&&(this.Fv(),this.Uv(e))}Xd(e){this.Vv!==null&&this.$v(this.Cv,e)}qd(e){this.Xd(e)}cf(e){this.Fv(),this.qv(e),this.Wv(e.localX,e.localY,e)}vf(e){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(e))}pf(e){this.Vv!==null&&this.Uv(e)}If(e){if(this.yv=!0,this.kv===null){const n={x:e.localX,y:e.localY};this.jv(n,n,e)}}Bf(e){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(e,n){if(!this.Vp.N().handleScale.pinch)return;const s=5*(n-this.Pv);this.Pv=n,this.ts().bc(e._t,s)}Mf(e){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const n=this.ts().uc();this.kv!==null&&n.Vt()&&(this.Rv={x:n.si(),y:n.ni()},this.kv={x:e.localX,y:e.localY})}_f(e){if(this.Vv===null)return;const n=e.localX,s=e.localY;if(this.kv===null)this.qv(e);else{this.Tv=!1;const r=ue(this.Rv),i=r.x+(n-this.kv.x),o=r.y+(s-this.kv.y);this.Wv(i,o,e)}}ff(e){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(e)}jn(e,n){const s=this.Vv;return s===null?null:p3(s,e,n)}Jv(e,n){ue(n==="left"?this.wv:this.gv).hv(at({width:e,height:this.Op.height}))}Gf(){return this.Op}hv(e){eo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Qv(){const e=ue(this.Vv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const n of e.Ma())if(e.Un(n)){const s=n.Ft();s!==null&&e.Fo(s),n.Ns()}for(const n of e.s_())n.Ns()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e!==null&&e.drawImage(o,n,s)}}lv(e){if(e===0||this.Vv===null)return;e>1&&this.Qv(),this.wv!==null&&this.wv.lv(e),this.gv!==null&&this.gv.lv(e);const n={colorSpace:this.Vp.N().layout.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=uo(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i)}),this.Vv&&(this.tm(r,RN),this.im(r),this.tm(r,F1),this.tm(r,z1)))}this.Jp.applySuggestedBitmapSize();const s=uo(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.sm(s),this.tm(s,AN),this.tm(s,z1))}nm(){return this.wv}rm(){return this.gv}cv(e,n){this.tm(e,n)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(e){this.$v(this.xv,e)}$v(e,n){const s=n.localX,r=n.localY;e.v()&&e.p(this.ts().Et().cu(s),{x:s,y:r},n)}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.ts(),o=i.$(),a=i.Wc();o===a?o0(e,0,0,s,r,a):s3(e,0,0,s,r,o,a)}im(e){const n=ue(this.Vv),s=n.i_().lr().Tt(n);s!==null&&s.nt(e,!1)}sm(e){this.hm(e,F1,dh,this.ts().uc())}tm(e,n){const s=ue(this.Vv),r=s.Dt(),i=s.s_();for(const o of i)this.hm(e,n,Am,o);for(const o of r)this.hm(e,n,Am,o);for(const o of i)this.hm(e,n,dh,o);for(const o of r)this.hm(e,n,dh,o)}hm(e,n,s,r){const i=ue(this.Vv),o=i.Qt().ac(),a=o!==null&&o.n_===r,l=o!==null&&a&&o.e_!==void 0?o.e_.Xn:void 0;Nm(n,c=>s(c,e,a,l),r,i)}Ov(){if(this.Vv===null)return;const e=this.Vp,n=this.Vv.Wo().N().visible,s=this.Vv.Ho().N().visible;n||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),s||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const r=e.Qt().Bc();n&&this.wv===null&&(this.wv=new j1(this,e.N(),r,"left"),this.Ev.appendChild(this.wv.Zf())),s&&this.gv===null&&(this.gv=new j1(this,e.N(),r,"right"),this.Av.appendChild(this.gv.Zf()))}am(e){return e.Ef&&this.yv||this.kv!==null}lm(e){return Math.max(0,Math.min(e,this.Op.width-1))}om(e){return Math.max(0,Math.min(e,this.Op.height-1))}Wv(e,n,s){this.ts().Tc(this.lm(e),this.om(n),s,ue(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(e,n,s){this.kv=e,this.Tv=!1,this.Wv(n.x,n.y,s);const r=this.ts().uc();this.Rv={x:r.si(),y:r.ni()}}ts(){return this.Vp.Qt()}Yv(e){if(!this.Sv)return;const n=this.ts(),s=this.ap();if(n.Ko(s,s.ks()),this.bv=null,this.Sv=!1,n.Pc(),this.Dv!==null){const r=performance.now(),i=n.Et();this.Dv.le(i.gu(),r),this.Dv.Ru(r)||n._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ue(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(e){if(this.Vv===null)return;const n=this.ts(),s=n.Et();if(s.Ki())return;const r=this.Vp.N(),i=r.handleScroll,o=r.kineticScroll;if((!i.pressedMouseMove||e.Ef)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Ef))return;const a=this.Vv.ks(),l=performance.now();if(this.bv!==null||this.am(e)||(this.bv={x:e.clientX,y:e.clientY,rd:l,_m:e.localX,um:e.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==e.clientX||this.bv.y!==e.clientY)){if(e.Ef&&o.touch||!e.Ef&&o.mouse){const c=s.mu();this.Dv=new MN(.2/c,7/c,.997,15/c),this.Dv.Pp(s.gu(),this.bv.rd)}else this.Dv=null;a.Ki()||n.Yo(this.Vv,a,e.localY),n.xc(e.localX),this.Sv=!0}this.Sv&&(a.Ki()||n.jo(this.Vv,a,e.localY),n.Cc(e.localX),this.Dv!==null&&this.Dv.Pp(s.gu(),l))}}class B1{constructor(e,n,s,r,i){this.xt=!0,this.Op=at({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=e==="left",this.Ju=s.Bc,this.Ps=n,this.dm=r,this.fm=i,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=ho(this.jf,at({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),fo(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(e){eo(this.Op,e)||(this.Op=e,this.Gp.resizeCanvasElement(e),this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.xt=!0)}lv(e){if(e<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const n=uo(this.Gp,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(s=>{this._v(s),this.uv(s)})}Jf(){return this.Gp.bitmapSize}Qf(e,n,s){const r=this.Jf();r.width>0&&r.height>0&&e.drawImage(this.Gp.canvasElement,n,s)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(!this.dm())return;e.fillStyle=this.Ps.timeScale.borderColor;const i=Math.floor(this.Ju.N().S*s),o=Math.floor(this.Ju.N().S*r),a=this.jp?n.width-i:0;e.fillRect(a,0,i,o)}_v({context:e,bitmapSize:n}){o0(e,0,0,n.width,n.height,this.fm())}}function Nb(t){return e=>{var n;return((n=e.ia)==null?void 0:n.call(e,t))??[]}}const NN=Nb("normal"),ON=Nb("top"),DN=Nb("bottom");class LN{constructor(e,n){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=at({width:0,height:0}),this.gm=new Rt,this.Fp=new tf(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=e,this.o_=n,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=ho(this.Sm,at({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jp=ho(this.Sm,at({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const r=this.Jp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new d0(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),fo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),fo(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(e){if(this.wm)return;this.wm=!0;const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.Mc(e.localX)}Mf(e){this.Sf(e)}xf(){const e=this.Vp.Qt();!e.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&e.kc())}cf(e){const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.yc(e.localX)}_f(e){this.cf(e)}vf(){this.wm=!1;const e=this.Vp.Qt();e.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||e.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(e,n,s){eo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.gm.p(e)),this.pm!==null&&this.pm.hv(at({width:n,height:e.height})),this.vm!==null&&this.vm.hv(at({width:s,height:e.height}))}Tm(){const e=this.Rm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}lv(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=uo(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i),this.Vm(r,DN)}),this.dv(r),this.Vm(r,NN)),this.pm!==null&&this.pm.lv(e),this.vm!==null&&this.vm.lv(e)}this.Jp.applySuggestedBitmapSize();const s=uo(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],s),this.Vm(s,ON))}Vm(e,n){const s=this.Vp.Qt().js();for(const r of s)Nm(n,i=>Am(i,e,!1,void 0),r,void 0);for(const r of s)Nm(n,i=>dh(i,e,!1,void 0),r,void 0)}_v({context:e,bitmapSize:n}){o0(e,0,0,n.width,n.height,this.Vp.Qt().Wc())}uv({context:e,bitmapSize:n,verticalPixelRatio:s}){if(this.Vp.N().timeScale.borderVisible){e.fillStyle=this.Im();const r=Math.max(1,Math.floor(this.Rm().S*s));e.fillRect(0,0,n.width,r)}}dv(e){const n=this.Vp.Qt().Et(),s=n.Da();if(!s||s.length===0)return;const r=this.o_.maxTickMarkWeight(s),i=this.Rm(),o=n.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.Im(),a.fillStyle=this.Im();const u=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();const h=Math.round(i.C*c);for(let p=s.length;p--;){const m=Math.round(s[p].coord*l);a.rect(m-d,0,u,h)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=i.S+i.C+i.A+i.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.ev();for(const c of s)if(c.weight<r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.Vp.N().timeScale.allowBoldLabels&&(a.font=this.Am());for(const c of s)if(c.weight>=r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Em(e,n,s){const r=this.Fp.Vi(e,s),i=r/2,o=Math.floor(n-i)+.5;return o<0?n+=Math.abs(0-o):o+r>this.Op.width&&(n-=Math.abs(this.Op.width-(o+r))),n}Bm(e,n){const s=this.Rm();for(const r of e)for(const i of r.cs())i.Tt().nt(n,s)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return ef(this.F(),this.Ps.fontFamily)}Am(){return ef(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new tf,Dm:0});const e=this.M,n=this.ev();if(e.k!==n){const s=this.F();e.P=s,e.k=n,e.A=3*s/12,e.V=3*s/12,e.Ji=9*s/12,e.L=0,e.Dm=4*s/12,e.Gi.Bn()}return this.M}vv(e){this.jf.style.cursor=e===1?"ew-resize":"default"}xm(){const e=this.Vp.Qt(),n=e.N();n.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),n.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const s={Bc:this.Vp.Qt().Bc()},r=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,i=()=>e.Wc();n.leftPriceScale.visible&&this.pm===null&&(this.pm=new B1("left",n,s,r,i),this.Mm.appendChild(this.pm.Zf())),n.rightPriceScale.visible&&this.vm===null&&(this.vm=new B1("right",n,s,r,i),this.bm.appendChild(this.vm.Zf()))}}var xk;const jN=!!Za&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Za&&((xk=navigator==null?void 0:navigator.userAgentData)!=null&&xk.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class FN{constructor(e,n,s){var r;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new Rt,this.Cv=new Rt,this.Xu=new Rt,this.Um=null,this.$m=null,this.Dp=e,this.Ps=n,this.o_=s,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(r=this.kp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),qp(this.Ps)&&this.Km(!0),this.ts=new SN(this.Gu.bind(this),this.Ps,s),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new LN(this,this.o_),this.qm.appendChild(this.Zm.Zf());const i=n.autoSize&&this.Gm();let o=this.Ps.width,a=this.Ps.height;if(i||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Jm(o,a),this.Qm(),e.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.zm)this.qm.removeChild(e.Zf()),e.Xv().u(this),e.Zv().u(this),e.m();this.zm=[];for(const e of this.Lm)this.sw(e);this.Lm=[],ue(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(e,n,s=!1){if(this.il===n&&this.Mo===e)return;const r=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return at({width:l-l%2,height:c-c%2})}(at({width:e,height:n}));this.il=r.height,this.Mo=r.width;const i=this.il+"px",o=this.Mo+"px";ue(this.kp).style.height=i,ue(this.kp).style.width=o,this.qm.style.height=i,this.qm.style.width=o,s?this.ew(Xt.gn(),performance.now()):this.ts.Ih()}lv(e){e===void 0&&(e=Xt.gn());for(let n=0;n<this.zm.length;n++)this.zm[n].lv(e.en(n).tn);this.Ps.timeScale.visible&&this.Zm.lv(e.nn())}hr(e){var r;const n=qp(this.Ps);this.ts.hr(e);const s=qp(this.Ps);s!==n&&this.Km(s),(r=e.layout)!=null&&r.panes&&this.rw(),this.tw(),this.hw(e)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(e=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const n=this.lw(null),s=document.createElement("canvas");s.width=n.width,s.height=n.height;const r=ue(s.getContext("2d"));return this.lw(r,e),s}ow(e){return e==="left"&&!this._w()||e==="right"&&!this.uw()||this.zm.length===0?0:ue(e==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(e){this.$m=e,this.$m?this.ip().style.setProperty("cursor",e):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(e){return Ln(this.zm[e]).Gf()}rw(){this.Lm.forEach(e=>{e.yt()})}hw(e){(e.autoSize!==void 0||!this.Um||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Um&&this.Gm(),e.autoSize===!1&&this.Um!==null&&this.nw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Jm(e.width||this.Mo,e.height||this.il))}lw(e,n){let s=0,r=0;const i=this.zm[0],o=(l,c)=>{let u=0;for(let d=0;d<this.zm.length;d++){const h=this.zm[d],p=ue(l==="left"?h.nm():h.rm()),m=p.Jf();if(e!==null&&p.Qf(e,c,u,n),u+=m.height,d<this.zm.length-1){const x=this.Lm[d],w=x.Jf();e!==null&&x.Qf(e,c,u),u+=w.height}}};this._w()&&(o("left",0),s+=ue(i.nm()).Jf().width);for(let l=0;l<this.zm.length;l++){const c=this.zm[l],u=c.Jf();if(e!==null&&c.Qf(e,s,r,n),r+=u.height,l<this.zm.length-1){const d=this.Lm[l],h=d.Jf();e!==null&&d.Qf(e,s,r),r+=h.height}}s+=i.Jf().width,this.uw()&&(o("right",s),s+=ue(i.rm()).Jf().width);const a=(l,c,u)=>{ue(l==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(ue(e),c,u)};if(this.Ps.timeScale.visible){const l=this.Zm.Jf();if(e!==null){let c=0;this._w()&&(a("left",c,r),c=ue(i.nm()).Jf().width),this.Zm.Qf(e,c,r,n),c+=l.width,this.uw()&&a("right",c,r)}r+=l.height}return at({width:s,height:r})}mw(){let e=0,n=0,s=0;for(const w of this.zm)this._w()&&(n=Math.max(n,ue(w.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(s=Math.max(s,ue(w.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),e+=w.Bo();n=Rm(n),s=Rm(s);const r=this.Mo,i=this.il,o=Math.max(r-n-s,0),a=1*this.Lm.length,l=this.Ps.timeScale.visible;let c=l?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const d=a+c,h=i<d?0:i-d,p=h/e;let m=0;const x=window.devicePixelRatio||1;for(let w=0;w<this.zm.length;++w){const g=this.zm[w];g.Lv(this.ts.$s()[w]);let y=0,b=0;b=w===this.zm.length-1?Math.ceil((h-m)*x)/x:Math.round(g.Bo()*p*x)/x,y=Math.max(b,2),m+=y,g.hv(at({width:o,height:y})),this._w()&&g.Jv(n,"left"),this.uw()&&g.Jv(s,"right"),g.ap()&&this.ts.dc(g.ap(),y)}this.Zm.km(at({width:l?o:0,height:c}),l?n:0,l?s:0),this.ts.Eo(o),this.Nm!==n&&(this.Nm=n),this.Fm!==s&&(this.Fm=s)}Km(e){e?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return jN?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.ww(e),s=n*e.deltaX/100,r=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.Ps.handleScale.mouseWheel){const i=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(o,i)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*s)}ew(e,n){var r;const s=e.nn();s===3&&this.gw(),s!==3&&s!==2||(this.Mw(e),this.bw(e,n),this.Zm.yt(),this.zm.forEach(i=>{i.Nv()}),((r=this.Wm)==null?void 0:r.nn())===3&&(this.Wm.vn(e),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,n),e=this.Wm,this.Wm=null)),this.lv(e)}bw(e,n){for(const s of e.pn())this.mn(s,n)}Mw(e){const n=this.ts.$s();for(let s=0;s<n.length;s++)e.en(s).sn&&n[s].Go()}mn(e,n){const s=this.ts.Et();switch(e.an){case 0:s.Au();break;case 1:s.zu(e.Wt);break;case 2:s.dn(e.Wt);break;case 3:s.fn(e.Wt);break;case 4:s.Su();break;case 5:e.Wt.Ru(n)||s.fn(e.Wt.Du(n))}}Gu(e){this.Wm!==null?this.Wm.vn(e):this.Wm=e,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame(n=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const s=this.Wm;this.Wm=null,this.ew(s,n);for(const r of s.pn())if(r.an===5&&!r.Wt.Ru(n)){this.Qt()._n(r.Wt);break}}}))}gw(){this.Qm()}sw(e){this.qm.removeChild(e.Zf()),e.m()}Qm(){const e=this.ts.$s(),n=e.length,s=this.zm.length;for(let r=n;r<s;r++){const i=Ln(this.zm.pop());this.qm.removeChild(i.Zf()),i.Xv().u(this),i.Zv().u(this),i.m();const o=this.Lm.pop();o!==void 0&&this.sw(o)}for(let r=s;r<n;r++){const i=new Ab(this,e[r]);if(i.Xv().i(this.Sw.bind(this,i),this),i.Zv().i(this.xw.bind(this,i),this),this.zm.push(i),r>0){const o=new TN(this,r-1,r);this.Lm.push(o),this.qm.insertBefore(o.Zf(),this.Zm.Zf())}this.qm.insertBefore(i.Zf(),this.Zm.Zf())}for(let r=0;r<n;r++){const i=e[r],o=this.zm[r];o.ap()!==i?o.Lv(i):o.zv()}this.tw(),this.mw()}Cw(e,n,s,r){var d;const i=new Map;e!==null&&this.ts.js().forEach(h=>{const p=h.Xs().Fr(e);p!==null&&i.set(h,p)});let o;if(e!==null){const h=(d=this.ts.Et().ss(e))==null?void 0:d.originalTime;h!==void 0&&(o=h)}const a=this.Qt().ac(),l=a!==null&&a.n_ instanceof u0?a.n_:void 0,c=a!==null&&a.e_!==void 0?a.e_.Kn:void 0,u=this.Pw(r);return{yw:o,Re:e??void 0,kw:n??void 0,Tw:u!==-1?u:void 0,Rw:l,Dw:i,Vw:c,Bw:s??void 0}}Pw(e){let n=-1;if(e)n=this.zm.indexOf(e);else{const s=this.Qt().uc().Us();s!==null&&(n=this.Qt().$s().indexOf(s))}return n}Sw(e,n,s,r){this.xv.p(()=>this.Cw(n,s,r,e))}xw(e,n,s,r){this.Cv.p(()=>this.Cw(n,s,r,e))}Xm(e,n,s){var r;this.dw(((r=this.Qt().ac())==null?void 0:r.h_)??null),this.Xu.p(()=>this.Cw(e,n,s))}tw(){const e=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=e}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.Jm(n.contentRect.width,n.contentRect.height)}),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function qp(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function zN(t){return t.open===void 0&&t.value===void 0}function BN(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function $1(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.color!==void 0&&(i.R=n.color),i}function $N(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.lineColor!==void 0&&(i.vt=n.lineColor),n.topColor!==void 0&&(i.mr=n.topColor),n.bottomColor!==void 0&&(i.wr=n.bottomColor),i}function UN(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.topLineColor!==void 0&&(i.gr=n.topLineColor),n.bottomLineColor!==void 0&&(i.Mr=n.bottomLineColor),n.topFillColor1!==void 0&&(i.br=n.topFillColor1),n.topFillColor2!==void 0&&(i.Sr=n.topFillColor2),n.bottomFillColor1!==void 0&&(i.Cr=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(i.Pr=n.bottomFillColor2),i}function WN(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),r}function HN(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),n.borderColor!==void 0&&(r.Ht=n.borderColor),n.wickColor!==void 0&&(r.vr=n.wickColor),r}function VN(t,e,n,s,r){const i=Ln(r)(n),o=Math.max(...i),a=Math.min(...i),l=i[i.length-1],c=[l,o,a,l],{time:u,color:d,...h}=n;return{Re:e,wt:t,Wt:c,yw:s,se:h,R:d}}function Bl(t){return t.Wt!==void 0}function U1(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function Ei(t){return(e,n,s,r,i,o)=>function(a,l){return l?l(a):zN(a)}(s,o)?U1({wt:e,Re:n,yw:r},s):U1(t(e,n,s,r,i),s)}function W1(t){return{Candlestick:Ei(HN),Bar:Ei(WN),Area:Ei($N),Baseline:Ei(UN),Histogram:Ei($1),Line:Ei($1),Custom:Ei(VN)}[t]}function H1(t){return{Re:0,Ew:new Map,Hh:t}}function V1(t,e){if(t!==void 0&&t.length!==0)return{Aw:e.key(t[0].wt),zw:e.key(t[t.length-1].wt)}}function Y1(t){let e;return t.forEach(n=>{e===void 0&&(e=n.yw)}),Ln(e)}class YN{constructor(e){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=e}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(e,n){let s=this.Lw.size!==0,r=!1;const i=this.Ow.get(e);if(i!==void 0)if(this.Ow.size===1)s=!1,r=!0,this.Lw.clear();else for(const l of this.Fw)l.pointData.Ew.delete(e)&&(r=!0);let o=[];if(n.length!==0){const l=n.map(p=>p.time),c=this.o_.createConverterToInternalObj(n),u=W1(e.Rr()),d=e.ca(),h=e.fa();o=n.map((p,m)=>{const x=c(p.time),w=this.o_.key(x);let g=this.Lw.get(w);g===void 0&&(g=H1(x),this.Lw.set(w,g),r=!0);const y=u(x,g.Re,p,l[m],d,h);return g.Ew.set(e,y),y})}s&&this.Hw(),this.Uw(e,o);let a=-1;if(r){const l=[];this.Lw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:Y1(c.Ew)})}),l.sort((c,u)=>this.o_.key(c.time)-this.o_.key(u.time)),a=this.$w(l)}return this.qw(e,a,function(l,c,u){const d=V1(l,u),h=V1(c,u);if(d!==void 0&&h!==void 0)return{Yw:!1,zh:d.zw>=h.zw&&d.Aw>=h.Aw}}(this.Ow.get(e),i,this.o_))}Ac(e){return this.Ww(e,[])}jw(e,n,s){const r=n;(function(w){w.yw===void 0&&(w.yw=w.time)})(r),this.o_.preprocessData(n);const i=this.o_.createConverterToInternalObj([n])(n.time),o=this.Nw.get(e);if(!s&&o!==void 0&&this.o_.key(i)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${i}`);let a=this.Lw.get(this.o_.key(i));if(s&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=a===void 0;a===void 0&&(a=H1(i),this.Lw.set(this.o_.key(i),a));const c=W1(e.Rr()),u=e.ca(),d=e.fa(),h=c(i,a.Re,n,r.yw,u,d);a.Ew.set(e,h),s?this.Kw(e,h,a.Re):this.Xw(e,h);const p={zh:Bl(h),Yw:s};if(!l)return this.qw(e,-1,p);const m={timeWeight:0,time:a.Hh,pointData:a,originalTime:Y1(a.Ew)},x=Ja(this.Fw,this.o_.key(m.time),(w,g)=>this.o_.key(w.time)<g);this.Fw.splice(x,0,m);for(let w=x;w<this.Fw.length;++w)Ed(this.Fw[w].pointData,w);return this.o_.fillWeightsForPoints(this.Fw,x),this.qw(e,x,p)}Zw(e,n){const s=this.Ow.get(e);if(s===void 0||n<=0)return[[],this.Gw()];n=Math.min(n,s.length);const r=s.splice(-n).reverse();s.length===0?this.Nw.delete(e):this.Nw.set(e,s[s.length-1].wt);for(const i of r){const o=this.Lw.get(this.o_.key(i.wt));if(o&&(o.Ew.delete(e),o.Ew.size===0)){this.Lw.delete(this.o_.key(o.Hh)),this.Fw.splice(o.Re,1);for(let a=o.Re;a<this.Fw.length;++a)Ed(this.Fw[a].pointData,a)}}return[r,this.qw(e,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(e,n){let s=this.Ow.get(e);s===void 0&&(s=[],this.Ow.set(e,s));const r=s.length!==0?s[s.length-1]:null;r===null||this.o_.key(n.wt)>this.o_.key(r.wt)?Bl(n)&&s.push(n):Bl(n)?s[s.length-1]=n:s.splice(-1,1),this.Nw.set(e,n.wt)}Kw(e,n,s){const r=this.Ow.get(e);if(r===void 0)return;const i=Ja(r,s,(o,a)=>o.Re<a);Bl(n)?r[i]=n:r.splice(i,1)}Uw(e,n){n.length!==0?(this.Ow.set(e,n.filter(Bl)),this.Nw.set(e,n[n.length-1].wt)):(this.Ow.delete(e),this.Nw.delete(e))}Hw(){for(const e of this.Fw)e.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(e.time))}$w(e){let n=-1;for(let s=0;s<this.Fw.length&&s<e.length;++s){const r=this.Fw[s],i=e[s];if(this.o_.key(r.time)!==this.o_.key(i.time)){n=s;break}i.timeWeight=r.timeWeight,Ed(i.pointData,s)}if(n===-1&&this.Fw.length!==e.length&&(n=Math.min(this.Fw.length,e.length)),n===-1)return-1;for(let s=n;s<e.length;++s)Ed(e[s].pointData,s);return this.o_.fillWeightsForPoints(e,n),this.Fw=e,n}Jw(){if(this.Ow.size===0)return null;let e=0;return this.Ow.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].Re))}),e}qw(e,n,s){const r=this.Gw();if(n!==-1)this.Ow.forEach((i,o)=>{r.Oo.set(o,{se:i,Qw:o===e?s:void 0})}),this.Ow.has(e)||r.Oo.set(e,{se:[],Qw:s}),r.Et.tg=this.Fw,r.Et.ig=n;else{const i=this.Ow.get(e);r.Oo.set(e,{se:i||[],Qw:s})}return r}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function Ed(t,e){t.Re=e,t.Ew.forEach(n=>{n.Re=e})}function GN(t,e){return t.wt<e}function KN(t,e){return e<t.wt}function qN(t,e,n){const s=e.Uh(),r=e.bi(),i=Ja(t,s,GN),o=u3(t,r,KN);if(!n)return{from:i,to:o};let a=i,l=o;return i>0&&i<t.length&&t[i].wt>=s&&(a=i-1),o>0&&o<t.length&&t[o-1].wt<=r&&(l=o+1),{from:a,to:l}}class XN{constructor(e,n,s){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=e,this.Qn=n,this.ag=s}yt(e){this.sg=!0,e==="data"&&(this.ng=!0),e==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const e=this.Jn.Ft(),n=this.Qn.Et();if(this.ug(),n.Ki()||e.Ki())return;const s=n.Pe();if(s===null||this.Jn.Xs().zr()===0)return;const r=this.Jn.zt();r!==null&&(this.hg=qN(this.rg,s,this.ag),this.fg(e,n,r.Wt),this.pg())}}class QN{constructor(e,n){this.vg=e,this.Yi=n}nt(e,n,s){this.vg.draw(e,this.Yi,n,s)}}class JN extends XN{constructor(e,n,s){super(e,n,!1),this.sh=s,this.og=new QN(this.sh.renderer(),r=>{const i=e.zt();return i===null?null:e.Ft().Nt(r,i.Wt)})}da(e){return this.sh.priceValueBuilder(e)}pa(e){return this.sh.isWhitespace(e)}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(n=>({wt:n.Re,_t:NaN,...e.Dr(n.Re),mg:n.se}))}fg(e,n){n.uu(this.rg,vA(this.hg))}pg(){this.sh.update({bars:this.rg.map(ZN),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function ZN(t){return{x:t._t,time:t.wt,originalData:t.mg,barColor:t.cr}}const eO={color:"#2196f3"},tO=(t,e,n)=>{const s=ti(n);return new JN(t,e,s)};function Ob(t){const e={value:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function G1(t){const e=Ob(t);return t.R!==void 0&&(e.color=t.R),e}function nO(t){const e=Ob(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function sO(t){const e=Ob(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function b3(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function rO(t){const e=b3(t);return t.R!==void 0&&(e.color=t.R),e}function iO(t){const e=b3(t),{R:n,Ht:s,vr:r}=t;return n!==void 0&&(e.color=n),s!==void 0&&(e.borderColor=s),r!==void 0&&(e.wickColor=r),e}function hh(t){return{Area:nO,Line:G1,Baseline:sO,Histogram:G1,Bar:rO,Candlestick:iO,Custom:oO}[t]}function oO(t){const e=t.yw;return{...t.se,time:e}}const aO={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},lO={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},cO={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:n3,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Xp={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},uO={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function K1(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:cO,crosshair:aO,grid:lO,overlayPriceScales:{...Xp},leftPriceScale:{...Xp,visible:!1},rightPriceScale:{...Xp,visible:!0},timeScale:uO,localization:{locale:Za?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class y3{constructor(e,n,s){this.Hf=e,this.wg=n,this.gg=s??0}applyOptions(e){this.Hf.Qt().oc(this.wg,e,this.gg)}options(){return this.Yi().N()}width(){return l0(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Fl(new wn(e.from,e.to))}getVisibleRange(){let e,n,s=this.Yi().Qe();if(s===null)return null;if(this.Yi().Ja()){const r=this.Yi().fo(),i=g3(r);s=ea(s,this.Yi().tl()),e=Number((Math.round(s.$e()/r)*r).toFixed(i)),n=Number((Math.round(s.qe()/r)*r).toFixed(i))}else e=s.$e(),n=s.qe();return{from:e,to:n}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return ue(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class dO{constructor(e,n,s,r){this.Hf=e,this.Pt=s,this.Mg=n,this.bg=r}getHeight(){return this.Pt.$t()}setHeight(e){const n=this.Hf.Qt(),s=n.Uc(this.Pt);n.vc(s,e)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(e){this.Pt.Io(e),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(e){const n=this.paneIndex();n!==e&&(Jt(e>=0&&e<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(n,e))}getSeries(){return this.Pt.Oo().map(e=>this.Mg(e))??[]}getHTMLElement(){const e=this.Hf.$f();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Zf():null}attachPrimitive(e){this.Pt._a(e),e.attached&&e.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(e){this.Pt.ua(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new y3(this.Hf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,n={},s=0){return this.bg.addCustomSeries(e,n,s)}addSeries(e,n={}){return this.bg.addSeries(e,n,this.paneIndex())}}const hO={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class q1{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}Sg(){return this.ir}}class fO{constructor(e,n,s,r,i,o){this.xg=new Rt,this.Jn=e,this.Cg=n,this.Pg=s,this.o_=i,this.bg=r,this.yg=o}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Ts(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new ha(new Ic(e.from,e.to)).y_(),s=this.Jn.Xs();if(s.Ki())return null;const r=s.Fr(n.Uh(),1),i=s.Fr(n.bi(),-1),o=ue(s.Lr()),a=ue(s.Ks());if(r!==null&&i!==null&&r.Re>i.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:r===null||r.Re===o?e.from-o:r.Re-o,barsAfter:i===null||i.Re===a?a-e.to:a-i.Re};return r!==null&&i!==null&&(l.from=r.yw,l.to=i.yw),l}setData(e){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,e),this.Tg("full")}update(e,n=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,e,n),this.Tg("update")}pop(e=1){const n=this.Cg.Dg(this.Jn,e);n.length!==0&&this.Tg("update");const s=hh(this.seriesType());return n.map(r=>s(r))}dataByIndex(e,n){const s=this.Jn.Xs().Fr(e,n);return s===null?null:hh(this.seriesType())(s)}data(){const e=hh(this.seriesType());return this.Jn.Xs().Hr().map(n=>e(n))}subscribeDataChanged(e){this.xg.i(e)}unsubscribeDataChanged(e){this.xg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return br(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(e){const n=Vn(br(hO),e),s=this.Jn.Oh(n);return new q1(s)}removePriceLine(e){this.Jn.Nh(e.Sg())}priceLines(){return this.Jn.Fh().map(e=>new q1(e))}seriesType(){return this.Jn.Rr()}lastValueData(e){const n=this.Jn.ye(e);return n.ke?{noData:!0}:{noData:!1,price:n.gt,color:n.R}}attachPrimitive(e){this.Jn._a(e),e.attached&&e.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ua(e),e.detached&&e.detached(),this.Jn.Qt().Ih()}getPane(){const e=this.Jn,n=ue(this.Jn.Qt().Hn(e));return this.yg(n)}moveToPane(e){this.Jn.Qt().Nc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const n=this.Jn.Qt().Hn(this.Jn);n!==null&&n.Qo(this.Jn,e)}Tg(e){this.xg.v()&&this.xg.p(e)}}class pO{constructor(e,n,s){this.Vg=new Rt,this.z_=new Rt,this.gm=new Rt,this.ts=e,this.uh=e.Et(),this.Zm=n,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=s}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(e,n){n?this.uh.Tu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.nu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},s=this.uh.au(n);this.ts.Lc(s)}getVisibleLogicalRange(){const e=this.uh.su();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){Jt(e.from<=e.to,"The from index cannot be after the to index."),this.ts.Lc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(e){const n=this.ts.Et();return n.Ki()?null:n.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.cu(e)}timeToIndex(e,n){const s=this.o_.convertHorzItemToInternal(e);return this.uh.Q_(s,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.uh.qt(n)}coordinateToTime(e){const n=this.ts.Et(),s=n.cu(e),r=n.ss(s);return r===null?null:r.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(e){this.Vg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.Vg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.gm.i(e)}unsubscribeSizeChange(e){this.gm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...br(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(e){this.gm.p(e.width,e.height)}}function X1(t){return function(e){if(yd(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:r}=e.handleScale;yd(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),yd(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const n=e.handleScroll;yd(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class gO{constructor(e,n,s){this.Ag=new Map,this.zg=new Map,this.Lg=new Rt,this.Og=new Rt,this.Ng=new Rt,this.qu=new WeakMap,this.Fg=new YN(n);const r=s===void 0?br(K1()):Vn(br(K1()),X1(s));this.Wg=n,this.Hf=new FN(e,r,n),this.Hf.Xv().i(o=>{this.Lg.v()&&this.Lg.p(this.Hg(o()))},this),this.Hf.Zv().i(o=>{this.Og.v()&&this.Og.p(this.Hg(o()))},this),this.Hf.cc().i(o=>{this.Ng.v()&&this.Ng.p(this.Hg(o()))},this);const i=this.Hf.Qt();this.Ug=new pO(i,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(e,n,s){this.autoSizeActive()||this.Hf.Jm(e,n,s)}addCustomSeries(e,n={},s=0){const r=(i=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...eO,...i.defaultOptions()},$g:tO,qg:i}))(ti(e));return this.Yg(r,n,s)}addSeries(e,n={},s=0){return this.Yg(e,n,s)}removeSeries(e){const n=Ln(this.Ag.get(e)),s=this.Fg.Ac(n);this.Hf.Qt().Ac(n),this.jg(s),this.Ag.delete(e),this.zg.delete(n)}kg(e,n){this.jg(this.Fg.Ww(e,n))}Rg(e,n,s){this.jg(this.Fg.jw(e,n,s))}Dg(e,n){const[s,r]=this.Fg.Zw(e,n);return s.length!==0&&this.jg(r),s}subscribeClick(e){this.Lg.i(e)}unsubscribeClick(e){this.Lg._(e)}subscribeCrosshairMove(e){this.Ng.i(e)}unsubscribeCrosshairMove(e){this.Ng._(e)}subscribeDblClick(e){this.Og.i(e)}unsubscribeDblClick(e){this.Og._(e)}priceScale(e,n=0){return new y3(this.Hf,e,n)}timeScale(){return this.Ug}applyOptions(e){this.Hf.hr(X1(e))}options(){return this.Hf.N()}takeScreenshot(e=!1,n=!1){let s,r;try{n||(s=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),r=this.Hf.aw(e)}finally{n||s===void 0||this.Hf.Qt().hr({crosshair:{mode:s}})}return r}addPane(e=!1){const n=this.Hf.Qt().$c();return n.zo(e),this.Kg(n)}removePane(e){this.Hf.Qt().fc(e)}swapPanes(e,n){this.Hf.Qt().mc(e,n)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map(e=>this.Kg(e))}paneSize(e=0){const n=this.Hf.pw(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,s){const r=this.Ag.get(s);if(r===void 0)return;const i=this.Hf.Qt().Hn(r);i!==null&&this.Hf.Qt().Rc(e,n,i)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(e,n={},s=0){Jt(e.$g!==void 0),function(l){if(l===void 0||l.type==="custom")return;const c=l;c.minMove!==void 0&&c.precision===void 0&&(c.precision=g3(c.minMove))}(n.priceFormat),e.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(n);const r=Vn(br(e3),br(e.defaultOptions),n),i=e.$g,o=new u0(this.Hf.Qt(),e.type,r,i,e.qg);this.Hf.Qt().Ic(o,s);const a=new fO(o,this,this,this,this.Wg,l=>this.Kg(l));return this.Ag.set(a,o),this.zg.set(o,a),a}jg(e){const n=this.Hf.Qt();n.Vc(e.Et._u,e.Et.tg,e.Et.ig),e.Oo.forEach((s,r)=>r.ht(s.se,s.Qw)),n.Et().K_(),n.vu()}Xg(e){return Ln(this.zg.get(e))}Hg(e){const n=new Map;e.Dw.forEach((r,i)=>{const o=i.Rr(),a=hh(o)(r);if(o!=="Custom")Jt(BN(a));else{const l=i.fa();Jt(!l||l(a)===!1)}n.set(this.Xg(i),a)});const s=e.Rw!==void 0&&this.zg.has(e.Rw)?this.Xg(e.Rw):void 0;return{time:e.yw,logical:e.Re,point:e.kw,paneIndex:e.Tw,hoveredSeries:s,hoveredObjectId:e.Vw,seriesData:n,sourceEvent:e.Bw}}Kg(e){let n=this.qu.get(e);return n||(n=new dO(this.Hf,s=>this.Xg(s),e,this),this.qu.set(e,n)),n}}function mO(t){if(Au(t)){const e=document.getElementById(t);return Jt(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function xO(t,e,n){const s=mO(t),r=new gO(s,e,n);return e.setOptions(r.options()),r}function bO(t,e){return xO(t,new N1,N1.ld(e))}({...e3});const v3=k.forwardRef(({initialData:t=[],symbol:e="BTC/USDC",height:n=500,showVolume:s=!0},r)=>{const i=k.useRef(null),o=k.useRef(null),a=k.useRef(null),l=k.useRef(null),[c,u]=k.useState(null),d=x=>typeof x=="number"?x:Ce(x),h=x=>({time:Math.floor((x.open_time||x.close_time||Date.now())/1e3),open:d(x.open),high:d(x.high),low:d(x.low),close:d(x.close)}),p=x=>{if(!x.volume)return null;const w=Math.floor((x.open_time||x.close_time||Date.now())/1e3),g=typeof x.volume=="number"?x.volume:Ce(x.volume),y=d(x.close),b=d(x.open),v=y>=b;return{time:w,value:g,color:v?"#26a69a80":"#ef535080"}},m=x=>{const w=h(x),g=s?p(x):null;a.current&&(a.current.update(w),u(w.close)),s&&l.current&&g&&l.current.update(g)};return k.useImperativeHandle(r,()=>({updateChart:m})),k.useEffect(()=>{if(!i.current)return;const x=bO(i.current,{width:i.current.clientWidth,height:n,layout:{background:{color:"#1e1e1e"},textColor:"#d1d4dc"},grid:{vertLines:{color:"#2a2e39"},horzLines:{color:"#2a2e39"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2e39"},timeScale:{borderColor:"#2a2e39",timeVisible:!0,secondsVisible:!1}}),w=x.addSeries("Candlestick",{upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"});let g=null;s&&(g=x.addSeries("Histogram",{color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""})),t.length>0&&(w.setData(t),c===null&&t.length>0&&u(t[t.length-1].close)),o.current=x,a.current=w,l.current=g;const y=()=>{i.current&&o.current&&o.current.applyOptions({width:i.current.clientWidth})};return window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y),x.remove()}},[n,s]),k.useEffect(()=>{a.current&&t.length>0&&(a.current.setData(t),t.length>0&&u(t[t.length-1].close))},[t]),f.jsxs("div",{style:{position:"relative",width:"100%"},children:[f.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"1.2rem",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:f.jsxs("span",{children:[e," Live Kline Chart",c!==null&&` - Current: $${c.toFixed(2)}`]})}),f.jsx("div",{ref:i,style:{position:"relative",width:"100%"}})]})});v3.displayName="KlineChart";function yO(){var Yt,ct,xs,gn;const[t,e]=k.useState(i0),[n,s]=k.useState(()=>localStorage.getItem("authToken")||""),[r,i]=k.useState(Mb),[o,a]=k.useState(""),[l,c]=k.useState("BTC/USDC"),[u,d]=k.useState("1m"),[h,p]=k.useState("300"),[m,x]=k.useState(!1),[w,g]=k.useState([]),[y,b]=k.useState([]),[v,S]=k.useState(new Set),[_,E]=k.useState([]),[T,P]=k.useState(!1),C=k.useRef(null),R=k.useRef(0),A=Ru,$=k.useRef(null),[H,F]=k.useState([]),{walletAddress:N,authToken:z}=ml(),{markets:L}=_o({baseURL:A,sessionToken:"",autoFetchMarkets:!0}),B=L.length>0?(((Yt=L.find(te=>te.active))==null?void 0:Yt.market_id)??L[0].market_id)||(((xs=(ct=L.find(te=>te.active))==null?void 0:ct.id)==null?void 0:xs.toString())??((gn=L[0].id)==null?void 0:gn.toString())??""):null;k.useEffect(()=>{B&&!o&&a(B)},[B]),k.useEffect(()=>{z&&s(z)},[z]),k.useEffect(()=>{const te=V=>{V.key==="authToken"&&V.newValue&&s(V.newValue)};window.addEventListener("storage",te);const J=setInterval(()=>{const V=localStorage.getItem("authToken");V&&V!==n&&s(V)},1e3);return()=>{window.removeEventListener("storage",te),clearInterval(J)}},[n]),k.useEffect(()=>{n&&n.trim()!==""&&localStorage.setItem("authToken",n)},[n]);const M=(te,J,V,Re,it)=>{const Ne={id:R.current++,timestamp:Date.now(),channel:te,data:J,type:V,step:it};Re?b(Gt=>[...Gt.slice(-99),Ne]):g(Gt=>[...Gt.slice(-99),Ne])},G=(te,J,V,Re)=>{E(it=>[...it,{step:te,status:J,message:V,timestamp:Date.now(),details:Re}])},j=()=>{E([])},I=async()=>{var it;if((it=C.current)!=null&&it.isConnected()){M("connection","Already connected","info",!1);return}if(P(!0),j(),G("1","in-progress","Validating configuration..."),M("connection","Starting connection process...","debug",!1,"Step 1: Validation"),!t||!t.trim()){G("1","error","WebSocket URL is required"),M("connection","Error: WebSocket URL is required","error",!1,"Step 1: Validation"),P(!1);return}try{const Ne=new URL(t);if(Ne.protocol!=="ws:"&&Ne.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol");G("1","success",`URL format valid: ${t}`),M("connection",`URL validated: ${t}`,"debug",!1,"Step 1: Validation")}catch(Ne){G("1","error",`Invalid URL format: ${Ne.message}`),M("connection",`Error: Invalid URL format - ${Ne.message}`,"error",!1,"Step 1: Validation"),P(!1);return}G("2","in-progress","Building connection URL with parameters...");const te=[];n&&te.push(`token=${encodeURIComponent(n)}`),N&&te.push(`wallet=${encodeURIComponent(N)}`),r&&te.push(`device_id=${encodeURIComponent(r)}`);const J=t.includes("?")?"&":"?",V=te.length>0?`${t}${J}${te.join("&")}`:t;if(G("2","success",`Connection URL: ${V}`),M("connection",`Connection URL: ${V}`,"debug",!1,"Step 2: URL Construction"),te.length>0?M("connection",`Query parameters: ${te.join(", ")}`,"debug",!1,"Step 2: URL Construction"):M("connection","No query parameters (authToken, walletAddress, deviceID)","warning",!1,"Step 2: URL Construction"),G("3","in-progress","Cleaning up existing connection..."),C.current)try{C.current.disconnect(),G("3","success","Previous connection cleaned up"),M("connection","Previous connection cleaned up","debug",!1,"Step 3: Cleanup")}catch{G("3","success","No previous connection to clean up"),M("connection","No previous connection found","debug",!1,"Step 3: Cleanup")}else G("3","success","No previous connection to clean up");G("4","in-progress","Creating SubscriptionClient instance...");try{C.current=new ko({url:t,authToken:n||void 0,walletAddress:N||void 0,deviceID:r||void 0}),G("4","success","SubscriptionClient created"),M("connection","SubscriptionClient instance created","debug",!1,"Step 4: Client Creation"),M("connection",`Config: ${JSON.stringify({url:t,hasToken:!!n,hasWallet:!!N,deviceID:r},null,2)}`,"debug",!1,"Step 4: Client Creation")}catch(Ne){G("4","error",`Failed to create client: ${Ne.message}`),M("connection",`Error creating client: ${Ne.message}`,"error",!1,"Step 4: Client Creation"),P(!1);return}G("5","in-progress","Initiating WebSocket connection..."),M("connection","Initiating WebSocket handshake...","debug",!1,"Step 5: Connection"),M("connection","Browser will attempt to upgrade HTTP connection to WebSocket","debug",!1,"Step 5: Connection");const Re=Date.now();try{await C.current.connect();const Ne=Date.now()-Re,Gt=C.current.isConnected(),je=C.current.getState();M("connection",`Connection attempt completed in ${Ne}ms`,"debug",!1,"Step 5: Connection"),M("connection",`Connection state: ${je}`,"debug",!1,"Step 5: Connection"),x(Gt),Gt?(G("5","success",`WebSocket connected successfully (${Ne}ms)`),M("connection"," WebSocket connected successfully!","success",!1,"Step 5: Connection"),M("connection",`Connection established in ${Ne}ms`,"success",!1,"Step 5: Connection")):(G("5","error","Connection completed but state is not connected"),M("connection"," Connection attempt completed but state is not connected","error",!1,"Step 5: Connection"),M("connection",`Current state: ${je}`,"error",!1,"Step 5: Connection"))}catch(Ne){const Gt=Date.now()-Re,je=Ne.message||String(Ne);let fe="";je.includes("abnormal closure")?fe=`The server closed the connection abnormally. Possible causes:
- Server is not running
- Wrong URL or port
- Network connectivity issues
- Firewall blocking the connection`:je.includes("protocol error")?fe="WebSocket protocol error. The server may not support WebSocket connections.":je.includes("policy violation")?fe="Connection closed due to policy violation. Check authentication requirements.":je.includes("server error")?fe="Server returned an error. Check server logs for details.":(je.includes("Unauthorized")||je.includes("401"))&&(fe=`Authentication failed. Possible causes:
- Missing or invalid JWT token (if server requires authentication)
- Token expired
- Server is in production mode requiring JWT authentication
Note: If server uses JWT auth, you must provide a valid token in the authToken field.`),G("5","error",`Connection failed: ${je}`),M("connection",` Connection error: ${je}`,"error",!1,"Step 5: Connection"),fe&&M("connection",`Error details:
${fe}`,"error",!1,"Step 5: Connection"),M("connection",`Connection failed after ${Gt}ms`,"error",!1,"Step 5: Connection"),M("connection",`Full error: ${JSON.stringify(Ne,Object.getOwnPropertyNames(Ne),2)}`,"error",!1,"Step 5: Connection"),x(!1)}finally{P(!1)}},U=()=>{if(C.current)try{C.current.disconnect(),x(!1),S(new Set),M("connection","WebSocket disconnected","info",!1)}catch(te){M("connection",`Disconnect error: ${te.message}`,"error",!1)}},q=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("orderbook","Not connected. Please connect first.","error",!1);return}if(!o){M("orderbook","Please select a market first","error",!1);return}const te=V=>{M("orderbook",V,"success",!1)};try{C.current.subscribeOrderbook(o,te,!0),S(V=>new Set([...V,"orderbook"])),M("orderbook",`Subscribed to orderbook for market ${o}`,"success",!1)}catch(V){M("orderbook",`Subscription error: ${V.message}`,"error",!1)}},X=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&o)try{C.current.unsubscribeOrderbook(o),S(J=>{const V=new Set(J);return V.delete("orderbook"),V}),M("orderbook","Unsubscribed from orderbook","info",!1)}catch(J){M("orderbook",`Unsubscribe error: ${J.message}`,"error",!1)}},K=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("trades","Not connected. Please connect first.","error",!1);return}if(!o){M("trades","Please select a market first","error",!1);return}const te=V=>{M("trades",V,"success",!1)};try{C.current.subscribeTrades(o,te),S(V=>new Set([...V,"trades"])),M("trades",`Subscribed to trades for market ${o}`,"success",!1)}catch(V){M("trades",`Subscription error: ${V.message}`,"error",!1)}},ee=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&o)try{C.current.unsubscribeTrades(o),S(J=>{const V=new Set(J);return V.delete("trades"),V}),M("trades","Unsubscribed from trades","info",!1)}catch(J){M("trades",`Unsubscribe error: ${J.message}`,"error",!1)}},se=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("ticker","Not connected. Please connect first.","error",!1);return}if(!o){M("ticker","Please select a market first","error",!1);return}const te=V=>{M("ticker",V,"success",!1)};try{C.current.subscribeTicker(o,te),S(V=>new Set([...V,"ticker"])),M("ticker",`Subscribed to ticker for market ${o}`,"success",!1)}catch(V){M("ticker",`Subscription error: ${V.message}`,"error",!1)}},ge=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&o)try{C.current.unsubscribeTicker(o),S(J=>{const V=new Set(J);return V.delete("ticker"),V}),M("ticker","Unsubscribed from ticker","info",!1)}catch(J){M("ticker",`Unsubscribe error: ${J.message}`,"error",!1)}},Ue=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("last_price","Not connected. Please connect first.","error",!1);return}if(!o){M("last_price","Please select a market first","error",!1);return}const te=V=>{M("last_price",V,"success",!1)};try{C.current.subscribeLastPrice(o,te,!0),S(V=>new Set([...V,"last_price"])),M("last_price",`Subscribed to last price for market ${o}`,"success",!1)}catch(V){M("last_price",`Subscription error: ${V.message}`,"error",!1)}},Pe=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&o)try{C.current.unsubscribeLastPrice(o),S(J=>{const V=new Set(J);return V.delete("last_price"),V}),M("last_price","Unsubscribed from last price","info",!1)}catch(J){M("last_price",`Unsubscribe error: ${J.message}`,"error",!1)}},ke=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("user_updates","Not connected. Please connect first.","error",!0);return}if(!N){M("user_updates","Wallet address required for position updates (positions channel)","error",!0);return}const te=V=>{M("user_updates",V,"success",!0)};try{C.current.subscribeUserUpdates(te),S(V=>new Set([...V,"user_updates"])),M("user_updates","Subscribed to user updates (positions, orders, etc.)","success",!0)}catch(V){M("user_updates",`Subscription error: ${V.message}`,"error",!0)}},Te=()=>{var te;if((te=C.current)!=null&&te.isConnected())try{C.current.unsubscribeUserUpdates(),S(J=>{const V=new Set(J);return V.delete("user_updates"),V}),M("user_updates","Unsubscribed from user updates","info",!0)}catch(J){M("user_updates",`Unsubscribe error: ${J.message}`,"error",!0)}},ft=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("funding_rate","Not connected. Please connect first.","error",!1);return}if(!l){M("funding_rate","Please enter a symbol first","error",!1);return}const te=V=>{M("funding_rate",V,"success",!1)};try{C.current.subscribeFundingRate(l,te),S(V=>new Set([...V,"funding_rate"])),M("funding_rate",`Subscribed to funding rate for ${l}`,"success",!1)}catch(V){M("funding_rate",`Subscription error: ${V.message}`,"error",!1)}},D=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&l)try{C.current.unsubscribeFundingRate(l),S(J=>{const V=new Set(J);return V.delete("funding_rate"),V}),M("funding_rate","Unsubscribed from funding rate","info",!1)}catch(J){M("funding_rate",`Unsubscribe error: ${J.message}`,"error",!1)}},Q=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("buckets","Not connected. Please connect first.","error",!0);return}if(!N){M("buckets","Wallet address required for buckets subscription","error",!0);return}const te=V=>{M("buckets",V,"success",!0)};try{C.current.subscribeBuckets(te),S(V=>new Set([...V,"buckets"])),M("buckets","Subscribed to buckets","success",!0)}catch(V){M("buckets",`Subscription error: ${V.message}`,"error",!0)}},oe=()=>{var te;if((te=C.current)!=null&&te.isConnected())try{C.current.unsubscribeBuckets(),S(J=>{const V=new Set(J);return V.delete("buckets"),V}),M("buckets","Unsubscribed from buckets","info",!0)}catch(J){M("buckets",`Unsubscribe error: ${J.message}`,"error",!0)}},de=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("deviation","Not connected. Please connect first.","error",!1);return}if(!l){M("deviation","Please enter a symbol first","error",!1);return}const te=V=>{M("deviation",V,"success",!1)};try{C.current.subscribeDeviation(l,te),S(V=>new Set([...V,"deviation"])),M("deviation",`Subscribed to deviation for ${l}`,"success",!1)}catch(V){M("deviation",`Subscription error: ${V.message}`,"error",!1)}},ve=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&l)try{C.current.unsubscribeDeviation(l),S(J=>{const V=new Set(J);return V.delete("deviation"),V}),M("deviation","Unsubscribed from deviation","info",!1)}catch(J){M("deviation",`Unsubscribe error: ${J.message}`,"error",!1)}},ye=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("index_price","Not connected. Please connect first.","error",!1);return}if(!l){M("index_price","Please enter a symbol first","error",!1);return}const te=V=>{M("index_price",V,"success",!1)};try{C.current.subscribeIndexPrice(l,te),S(V=>new Set([...V,"index_price"])),M("index_price",`Subscribed to index price for ${l}`,"success",!1)}catch(V){M("index_price",`Subscription error: ${V.message}`,"error",!1)}},W=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&l)try{C.current.unsubscribeIndexPrice(l),S(J=>{const V=new Set(J);return V.delete("index_price"),V}),M("index_price","Unsubscribed from index price","info",!1)}catch(J){M("index_price",`Unsubscribe error: ${J.message}`,"error",!1)}},le=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("kline","Not connected. Please connect first.","error",!1);return}if(!o){M("kline","Please select a market first","error",!1);return}if(!u){M("kline","Please select an interval first","error",!1);return}const te=V=>{if(M("kline",V,"success",!1),$.current&&V){const Re={open_time:V.open_time||V.timestamp||Date.now(),close_time:V.close_time,open:V.open,high:V.high,low:V.low,close:V.close,volume:V.volume};$.current.updateChart(Re);const Ne={time:Math.floor((Re.open_time||Date.now())/1e3),open:typeof Re.open=="string"?Ce(Re.open):Re.open,high:typeof Re.high=="string"?Ce(Re.high):Re.high,low:typeof Re.low=="string"?Ce(Re.low):Re.low,close:typeof Re.close=="string"?Ce(Re.close):Re.close};F(Gt=>{const je=[...Gt];return je.length===0||je[je.length-1].time!==Ne.time?je.push(Ne):je[je.length-1]=Ne,je})}};try{C.current.subscribeKline(o,u,te),S(V=>new Set([...V,"kline"])),M("kline",`Subscribed to kline for market ${o} with interval ${u}`,"success",!1)}catch(V){M("kline",`Subscription error: ${V.message}`,"error",!1)}},O=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&!(!o||!u))try{C.current.unsubscribeKline(o,u),S(J=>{const V=new Set(J);return V.delete("kline"),V}),F([]),M("kline","Unsubscribed from kline","info",!1)}catch(J){M("kline",`Unsubscribe error: ${J.message}`,"error",!1)}},ne=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("mark_price","Not connected. Please connect first.","error",!1);return}if(!l){M("mark_price","Please enter a symbol first","error",!1);return}const te=V=>{M("mark_price",V,"success",!1)};try{C.current.subscribeMarkPrice(l,te),S(V=>new Set([...V,"mark_price"])),M("mark_price",`Subscribed to mark price for ${l}`,"success",!1)}catch(V){M("mark_price",`Subscription error: ${V.message}`,"error",!1)}},re=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&l)try{C.current.unsubscribeMarkPrice(l),S(J=>{const V=new Set(J);return V.delete("mark_price"),V}),M("mark_price","Unsubscribed from mark price","info",!1)}catch(J){M("mark_price",`Unsubscribe error: ${J.message}`,"error",!1)}},Y=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("price_feed","Not connected. Please connect first.","error",!1);return}if(!l){M("price_feed","Please enter a symbol first","error",!1);return}const te=V=>{M("price_feed",V,"success",!1)};try{C.current.subscribePriceFeed(l,te),S(V=>new Set([...V,"price_feed"])),M("price_feed",`Subscribed to price feed for ${l}`,"success",!1)}catch(V){M("price_feed",`Subscription error: ${V.message}`,"error",!1)}},he=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&l)try{C.current.unsubscribePriceFeed(l),S(J=>{const V=new Set(J);return V.delete("price_feed"),V}),M("price_feed","Unsubscribed from price feed","info",!1)}catch(J){M("price_feed",`Unsubscribe error: ${J.message}`,"error",!1)}},Me=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){M("twap","Not connected. Please connect first.","error",!1);return}if(!l){M("twap","Please enter a symbol first","error",!1);return}if(!h||isNaN(Number(h))||Number(h)<=0){M("twap","Please enter a valid window size (positive number in seconds)","error",!1);return}const te=V=>{M("twap",V,"success",!1)};try{C.current.subscribeTWAP(l,Number(h),te),S(V=>new Set([...V,"twap"])),M("twap",`Subscribed to TWAP for ${l} with window size ${h}s`,"success",!1)}catch(V){M("twap",`Subscription error: ${V.message}`,"error",!1)}},we=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&!(!l||!h))try{C.current.unsubscribeTWAP(l,Number(h)),S(J=>{const V=new Set(J);return V.delete("twap"),V}),M("twap","Unsubscribed from TWAP","info",!1)}catch(J){M("twap",`Unsubscribe error: ${J.message}`,"error",!1)}},Ee=()=>{if(!C.current){M("multi_feed","SubscriptionClient not initialized. Please connect first.","error",!1);return}if(!C.current.isConnected()){M("multi_feed","Not connected. Please connect first.","error",!1);return}if(!o){M("multi_feed","Please select a market first","error",!1);return}if(!l){M("multi_feed","Please enter a symbol first","error",!1);return}if(typeof C.current.subscribeMultiFeed!="function"){M("multi_feed","subscribeMultiFeed method not available. Please check SDK version.","error",!1),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(C.current)));return}const te=J=>{const V=J.sub_channel||"unknown";M(`multi_feed:${V}`,J,"success",V==="balances"||V==="buckets"||V==="orders"||V==="positions")};try{C.current.subscribeMultiFeed(o,l,te,u||"1m"),S(J=>new Set([...J,"multi_feed"])),M("multi_feed",`Subscribed to multi-feed for market ${o}, symbol ${l}`,"success",!1)}catch(J){M("multi_feed",`Subscription error: ${J.message}`,"error",!1)}},We=()=>{var te;if((te=C.current)!=null&&te.isConnected()&&!(!o||!l))try{C.current.unsubscribeMultiFeed(o,l),S(J=>{const V=new Set(J);return V.delete("multi_feed"),V}),M("multi_feed","Unsubscribed from multi-feed","info",!1)}catch(J){M("multi_feed",`Unsubscribe error: ${J.message}`,"error",!1)}},Ze=()=>{if(!C.current){M("balances","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!C.current.isConnected()){M("balances","Not connected. Please connect first.","error",!0);return}if(!N){M("balances","Wallet address required for balances subscription","error",!0);return}if(typeof C.current.subscribeBalances!="function"){M("balances","subscribeBalances method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(C.current)));return}const te=J=>{M("balances",J,"success",!0)};try{C.current.subscribeBalances(te),S(J=>new Set([...J,"balances"])),M("balances","Subscribed to balances","success",!0)}catch(J){M("balances",`Subscription error: ${J.message}`,"error",!0)}},lt=()=>{if(C.current&&C.current.isConnected()){if(typeof C.current.unsubscribeBalances!="function"){M("balances","unsubscribeBalances method not available. Please check SDK version.","error",!0);return}try{C.current.unsubscribeBalances(),S(te=>{const J=new Set(te);return J.delete("balances"),J}),M("balances","Unsubscribed from balances","info",!0)}catch(te){M("balances",`Unsubscribe error: ${te.message}`,"error",!0)}}},Ct=()=>{if(!C.current){M("orders","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!C.current.isConnected()){M("orders","Not connected. Please connect first.","error",!0);return}if(!N){M("orders","Wallet address required for orders subscription","error",!0);return}if(typeof C.current.subscribeOrders!="function"){M("orders","subscribeOrders method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(C.current)));return}const te=J=>{M("orders",J,"success",!0)};try{C.current.subscribeOrders(te),S(J=>new Set([...J,"orders"])),M("orders","Subscribed to orders","success",!0)}catch(J){M("orders",`Subscription error: ${J.message}`,"error",!0)}},Vt=()=>{if(C.current&&C.current.isConnected()){if(typeof C.current.unsubscribeOrders!="function"){M("orders","unsubscribeOrders method not available. Please check SDK version.","error",!0);return}try{C.current.unsubscribeOrders(),S(te=>{const J=new Set(te);return J.delete("orders"),J}),M("orders","Unsubscribed from orders","info",!0)}catch(te){M("orders",`Unsubscribe error: ${te.message}`,"error",!0)}}},Ft=te=>{te?b([]):g([])};return k.useEffect(()=>()=>{if(C.current)try{C.current.disconnect()}catch{}},[]),f.jsxs("div",{className:"ws-test-page",children:[f.jsx("h1",{children:"WebSocket Test Page"}),f.jsx("p",{children:"Test WebSocket subscriptions for public and private channels"}),f.jsx(oA,{steps:_}),f.jsx(aA,{wsURL:t,onWsURLChange:e,marketId:o,onMarketIdChange:a,markets:L,symbol:l,onSymbolChange:c,klineInterval:u,onKlineIntervalChange:d,twapWindowSize:h,onTwapWindowSizeChange:p,authToken:n,onAuthTokenChange:s,walletAddress:N,deviceID:r,onDeviceIDChange:i,isConnected:m,isConnecting:T,onConnect:I,onDisconnect:U}),f.jsxs("div",{className:"ws-test-page-layout",children:[f.jsxs(s1,{title:"WebSocket Public",isPrivate:!1,messages:w,onClearMessages:()=>Ft(!1),children:[f.jsxs("div",{className:"channel-buttons-row",children:[f.jsx(ln,{channel:"orderbook",isSubscribed:v.has("orderbook"),isConnected:m,subscribeLabel:"Subscribe Orderbook",unsubscribeLabel:"Unsubscribe Orderbook",onSubscribe:q,onUnsubscribe:X}),f.jsx(ln,{channel:"trades",isSubscribed:v.has("trades"),isConnected:m,subscribeLabel:"Subscribe Trades",unsubscribeLabel:"Unsubscribe Trades",onSubscribe:K,onUnsubscribe:ee}),f.jsx(ln,{channel:"ticker",isSubscribed:v.has("ticker"),isConnected:m,subscribeLabel:"Subscribe Ticker",unsubscribeLabel:"Unsubscribe Ticker",onSubscribe:se,onUnsubscribe:ge}),f.jsx(ln,{channel:"last_price",isSubscribed:v.has("last_price"),isConnected:m,subscribeLabel:"Subscribe Last Price",unsubscribeLabel:"Unsubscribe Last Price",onSubscribe:Ue,onUnsubscribe:Pe}),f.jsx(ln,{channel:"funding_rate",isSubscribed:v.has("funding_rate"),isConnected:m,subscribeLabel:"Subscribe Funding Rate",unsubscribeLabel:"Unsubscribe Funding Rate",onSubscribe:ft,onUnsubscribe:D}),f.jsx(ln,{channel:"deviation",isSubscribed:v.has("deviation"),isConnected:m,subscribeLabel:"Subscribe Deviation",unsubscribeLabel:"Unsubscribe Deviation",onSubscribe:de,onUnsubscribe:ve}),f.jsx(ln,{channel:"index_price",isSubscribed:v.has("index_price"),isConnected:m,subscribeLabel:"Subscribe Index Price",unsubscribeLabel:"Unsubscribe Index Price",onSubscribe:ye,onUnsubscribe:W}),f.jsx(ln,{channel:"kline",isSubscribed:v.has("kline"),isConnected:m,subscribeLabel:"Subscribe Kline",unsubscribeLabel:"Unsubscribe Kline",onSubscribe:le,onUnsubscribe:O})]}),v.has("kline")&&f.jsx("div",{style:{marginTop:"20px",marginBottom:"20px"},children:f.jsx(v3,{ref:$,initialData:H,symbol:l||"BTC/USDC",height:500,showVolume:!0})}),f.jsxs("div",{className:"channel-buttons-row",children:[f.jsx(ln,{channel:"mark_price",isSubscribed:v.has("mark_price"),isConnected:m,subscribeLabel:"Subscribe Mark Price",unsubscribeLabel:"Unsubscribe Mark Price",onSubscribe:ne,onUnsubscribe:re}),f.jsx(ln,{channel:"price_feed",isSubscribed:v.has("price_feed"),isConnected:m,subscribeLabel:"Subscribe Price Feed",unsubscribeLabel:"Unsubscribe Price Feed",onSubscribe:Y,onUnsubscribe:he}),f.jsx(ln,{channel:"twap",isSubscribed:v.has("twap"),isConnected:m,subscribeLabel:"Subscribe TWAP",unsubscribeLabel:"Unsubscribe TWAP",onSubscribe:Me,onUnsubscribe:we}),f.jsx(ln,{channel:"multi_feed",isSubscribed:v.has("multi_feed"),isConnected:m,subscribeLabel:"Subscribe Multi-Feed",unsubscribeLabel:"Unsubscribe Multi-Feed",onSubscribe:Ee,onUnsubscribe:We})]}),f.jsx("small",{className:"private-note-text-block",style:{marginTop:"10px"},children:"Multi-Feed: Unified channel streaming all sub-channels (orderbook, trades, positions, balances, orders, buckets, etc.) Requires market ID and symbol. Authenticated sub-channels (balances, orders, positions, buckets) require wallet address."})]}),f.jsxs(s1,{title:"WebSocket Private",isPrivate:!0,messages:y,onClearMessages:()=>Ft(!0),children:[f.jsx(ln,{channel:"user_updates",isSubscribed:v.has("user_updates"),isConnected:m,disabled:!N,subscribeLabel:"Subscribe User Updates",unsubscribeLabel:"Unsubscribe User Updates",onSubscribe:ke,onUnsubscribe:Te,variant:"private"}),f.jsx("small",{className:"private-note-text",children:"Position updates (positions channel): Requires wallet address. Returns user positions."}),f.jsx(ln,{channel:"buckets",isSubscribed:v.has("buckets"),isConnected:m,disabled:!N,subscribeLabel:"Subscribe Buckets",unsubscribeLabel:"Unsubscribe Buckets",onSubscribe:Q,onUnsubscribe:oe,variant:"private"}),f.jsx("small",{className:"private-note-text-block",children:"Buckets: User's margin buckets (requires wallet address)"}),f.jsx(ln,{channel:"balances",isSubscribed:v.has("balances"),isConnected:m,disabled:!N,subscribeLabel:"Subscribe Balances",unsubscribeLabel:"Unsubscribe Balances",onSubscribe:Ze,onUnsubscribe:lt,variant:"private"}),f.jsx("small",{className:"private-note-text-block",children:"Balances: User's spot balances (USDC, MORM, BTC, etc.) - requires wallet address"}),f.jsx(ln,{channel:"orders",isSubscribed:v.has("orders"),isConnected:m,disabled:!N,subscribeLabel:"Subscribe Orders",unsubscribeLabel:"Unsubscribe Orders",onSubscribe:Ct,onUnsubscribe:Vt,variant:"private"}),f.jsx("small",{className:"private-note-text-block",children:"Orders: User's open orders - requires wallet address"})]})]})]})}function Db({top:t,left:e,width:n,height:s}){const r=`translate(${e}px,${t}px)`;return{transform:r,WebkitTransform:r,MozTransform:r,msTransform:r,OTransform:r,width:`${n}px`,height:`${s}px`,position:"absolute"}}function w3({top:t,left:e,width:n,height:s}){return{top:`${t}px`,left:`${e}px`,width:`${n}px`,height:`${s}px`,position:"absolute"}}function Q1(t){return t*100+"%"}function vO(t,e,n,s){return t+n>s?e:n}function S3(t,e,n){return t<0?e:n}function wO(t){return Math.max(0,t)}function of(t){return Math.max(0,t)}var Lb=(t,e,n)=>{const{left:s,height:r,width:i}=e,o=t.top-(r-t.height);return{left:s,width:i,height:S3(o,t.height,r),top:of(o)}},jb=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{top:s,height:i,width:vO(t.left,t.width,o,n),left:wO(r)}},Fb=(t,e,n)=>{const{top:s,height:r,width:i}=e,o=t.left+t.width-i;return o<0?{height:r,width:t.left+t.width,top:of(s),left:0}:{height:r,width:i,top:of(s),left:o}},zb=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{width:o,left:r,height:S3(s,t.height,i),top:of(s)}},SO=(t,e,n)=>Lb(t,jb(t,e,n)),kO=(t,e,n)=>Lb(t,Fb(t,e)),_O=(t,e,n)=>zb(t,jb(t,e,n)),CO=(t,e,n)=>zb(t,Fb(t,e)),EO={n:Lb,ne:SO,e:jb,se:_O,s:zb,sw:CO,w:Fb,nw:kO};function PO(t,e,n,s){const r=EO[t];return r?r(e,{...e,...n},s):n}var k3={type:"transform",scale:1,calcStyle(t){return Db(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}},TO={type:"absolute",scale:1,calcStyle(t){return w3(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}};function MO(t){return{type:"transform",scale:t,calcStyle(e){return Db(e)},calcDragPosition(e,n,s,r){return{left:(e-s)/t,top:(n-r)/t}}}}var IO=k3,RO={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},AO={enabled:!0,bounded:!1,threshold:3},NO={enabled:!0,handles:["se"]},OO={enabled:!1,defaultItem:{w:1,h:1}};function h0(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function Ts(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&h0(s,e))return s}}function _3(t,e){return t.filter(n=>h0(n,e))}function C3(t,e){return e==="horizontal"?P3(t):e==="vertical"?E3(t):[...t]}function E3(t){return[...t].sort((e,n)=>e.y!==n.y?e.y-n.y:e.x-n.x)}function P3(t){return[...t].sort((e,n)=>e.x!==n.x?e.x-n.x:e.y-n.y)}function xl(t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0){const r=s.y+s.h;r>e&&(e=r)}}return e}function Ni(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&s.i===e)return s}}function Bb(t){return t.filter(e=>e.static===!0)}function bi(t){return{i:t.i,x:t.x,y:t.y,w:t.w,h:t.h,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function Ns(t){const e=new Array(t.length);for(let n=0;n<t.length;n++){const s=t[n];s!==void 0&&(e[n]=bi(s))}return e}function DO(t,e){const n=new Array(t.length);for(let s=0;s<t.length;s++){const r=t[s];r!==void 0&&(e.i===r.i?n[s]=e:n[s]=r)}return n}function LO(t,e,n){let s=Ni(t,e);return s?(s=n(bi(s)),[DO(t,s),s]):[[...t],null]}function $b(t,e){const n=Bb(t);for(let s=0;s<t.length;s++){const r=t[s];if(r!==void 0)if(r.x+r.w>e.cols&&(r.x=e.cols-r.w),r.x<0&&(r.x=0,r.w=e.cols),!r.static)n.push(r);else for(;Ts(n,r);)r.y++}return t}function Wi(t,e,n,s,r,i,o,a,l){if(e.static&&e.isDraggable!==!0)return[...t];if(e.y===s&&e.x===n)return[...t];const c=e.x,u=e.y;typeof n=="number"&&(e.x=n),typeof s=="number"&&(e.y=s),e.moved=!0;let d=C3(t,o);(o==="vertical"&&typeof s=="number"?u>=s:o==="horizontal"&&typeof n=="number"?c>=n:!1)&&(d=d.reverse());const p=_3(d,e),m=p.length>0;if(m&&l)return Ns(t);if(m&&i)return e.x=c,e.y=u,e.moved=!1,t;let x=[...t];for(let w=0;w<p.length;w++){const g=p[w];g!==void 0&&(g.moved||(g.static?x=J1(x,g,e,r,o):x=J1(x,e,g,r,o)))}return x}function J1(t,e,n,s,r,i){const o=r==="horizontal",a=r==="vertical",l=e.static;if(s){s=!1;const d={x:o?Math.max(e.x-n.w,0):n.x,y:a?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},h=Ts(t,d),p=h!==void 0&&h.y+h.h>e.y,m=h!==void 0&&e.x+e.w>h.x;if(!h)return Wi(t,n,o?d.x:void 0,a?d.y:void 0,s,l,r);if(p&&a)return Wi(t,n,void 0,n.y+1,s,l,r);if(p&&r===null)return e.y=n.y,n.y=n.y+n.h,[...t];if(m&&o)return Wi(t,e,n.x,void 0,s,l,r)}const c=o?n.x+1:void 0,u=a?n.y+1:void 0;return c===void 0&&u===void 0?[...t]:Wi(t,n,c,u,s,l,r)}function jO(t){return t.filter(e=>e.static)}var FO={x:"w",y:"h"};function Om(t,e,n,s){const r=FO[s];e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;h0(e,a)&&Om(t,a,n+e[r],s)}}e[s]=n}function zO(t,e,n,s,r,i,o){const a=n==="vertical",l=n==="horizontal";if(a)for(typeof o=="number"?e.y=Math.min(o,e.y):e.y=Math.min(xl(t),e.y);e.y>0&&!Ts(t,e);)e.y--;else if(l)for(;e.x>0&&!Ts(t,e);)e.x--;let c;for(;(c=Ts(t,e))!==void 0&&!(n===null&&i);)if(l?Om(r,e,c.x+c.w,"x"):Om(r,e,c.y+c.h,"y"),l&&e.x+e.w>s)for(e.x=s-e.w,e.y++;e.x>0&&!Ts(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function gr(t,e,n,s){const r=jO(t);let i=xl(r);const o=C3(t,e),a=new Array(t.length);for(let l=0;l<o.length;l++){const c=o[l];if(c===void 0)continue;let u=bi(c);u.static||(u=zO(r,u,e,n,o,s,i),i=Math.max(i,u.y+u.h),r.push(u));const d=t.indexOf(c);a[d]=u,u.moved=!1}return a}function Ub(t,e,n,s){const r=s==="x"?"w":"h";e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;h0(e,a)&&Ub(t,a,n+e[r],s)}}e[s]=n}function BO(t,e,n,s){for(e.y=Math.min(s,e.y);e.y>0&&!Ts(t,e);)e.y--;let r;for(;(r=Ts(t,e))!==void 0;)Ub(n,e,r.y+r.h,"y");return e.y=Math.max(e.y,0),e}function $O(t,e,n,s){for(;e.x>0&&!Ts(t,e);)e.x--;let r;for(;(r=Ts(t,e))!==void 0;)if(Ub(s,e,r.x+r.w,"x"),e.x+e.w>n)for(e.x=n-e.w,e.y++;e.x>0&&!Ts(t,e);)e.x--;return e.x=Math.max(e.x,0),e}var T3={type:"vertical",allowOverlap:!1,compact(t,e){const n=Bb(t);let s=xl(n);const r=E3(t),i=new Array(t.length);for(let o=0;o<r.length;o++){const a=r[o];if(a===void 0)continue;let l=bi(a);l.static||(l=BO(n,l,r,s),s=Math.max(s,l.y+l.h),n.push(l));const c=t.indexOf(a);i[c]=l,l.moved=!1}return i},onMove(t,e,n,s,r){const i=Ns(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},M3={type:"horizontal",allowOverlap:!1,compact(t,e){const n=Bb(t),s=P3(t),r=new Array(t.length);for(let i=0;i<s.length;i++){const o=s[i];if(o===void 0)continue;let a=bi(o);a.static||(a=$O(n,a,e,s),n.push(a));const l=t.indexOf(o);r[l]=a,a.moved=!1}return r},onMove(t,e,n,s,r){const i=Ns(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},Z1={type:null,allowOverlap:!1,compact(t,e){return Ns(t)},onMove(t,e,n,s,r){const i=Ns(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},UO={...T3,allowOverlap:!0,compact(t,e){return Ns(t)}},WO={...M3,allowOverlap:!0,compact(t,e){return Ns(t)}};function Wb(t,e=!1,n=!1){let s;return e?t==="vertical"?s=UO:t==="horizontal"?s=WO:s=Z1:t==="vertical"?s=T3:t==="horizontal"?s=M3:s=Z1,n?{...s,preventCollision:n}:s}function I3(t){return Object.keys(t).sort((n,s)=>t[n]-t[s])}function e2(t,e){const n=I3(t);let s=n[0];if(s===void 0)throw new Error("No breakpoints defined");for(let r=1;r<n.length;r++){const i=n[r];if(i===void 0)continue;const o=t[i];e>o&&(s=i)}return s}function t2(t,e){const n=e[t];if(n===void 0)throw new Error(`ResponsiveReactGridLayout: \`cols\` entry for breakpoint ${String(t)} is missing!`);return n}function Qp(t,e,n,s,r,i){const o=t[n];if(o)return Ns(o);let a=t[s];const l=I3(e),c=l.slice(l.indexOf(n));for(let d=0;d<c.length;d++){const h=c[d];if(h===void 0)continue;const p=t[h];if(p){a=p;break}}const u=Ns(a||[]);return gr($b(u,{cols:r}),i,r)}function Pd(t,e){if(Array.isArray(t))return t;const n=t,s=n[e];if(s!==void 0)return s;const r=Object.keys(n);for(const i of r){const o=n[i];if(o!==void 0)return o}return[10,10]}function f0(t){const{margin:e,containerPadding:n,containerWidth:s,cols:r}=t;return(s-e[0]*(r-1)-n[0]*2)/r}function af(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function Pi(t,e,n,s,r,i,o){const{margin:a,containerPadding:l,rowHeight:c}=t,u=f0(t);let d,h,p,m;return o?(d=Math.round(o.width),h=Math.round(o.height)):(d=af(s,u,a[0]),h=af(r,c,a[1])),i?(p=Math.round(i.top),m=Math.round(i.left)):o?(p=Math.round(o.top),m=Math.round(o.left)):(p=Math.round((c+a[1])*n+l[1]),m=Math.round((u+a[0])*e+l[0])),{top:p,left:m,width:d,height:h}}function fh(t,e,n,s,r){const{margin:i,containerPadding:o,cols:a,rowHeight:l,maxRows:c}=t,u=f0(t);let d=Math.round((n-o[0])/(u+i[0])),h=Math.round((e-o[1])/(l+i[1]));return d=qs(d,0,a-s),h=qs(h,0,c-r),{x:d,y:h}}function HO(t,e,n,s,r,i){const{margin:o,maxRows:a,cols:l,rowHeight:c}=t,u=f0(t),d=Math.round((e+o[0])/(u+o[0])),h=Math.round((n+o[1])/(c+o[1]));let p=qs(d,0,l-s),m=qs(h,0,a-r);return(i==="sw"||i==="w"||i==="nw")&&(p=qs(d,0,l)),(i==="nw"||i==="n"||i==="ne")&&(m=qs(h,0,a)),{w:p,h:m}}function qs(t,e,n){return Math.max(Math.min(t,n),e)}var p0={exports:{}},R3={},A3={exports:{}},VO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",YO=VO,GO=YO;function N3(){}function O3(){}O3.resetWarningCache=N3;var KO=function(){function t(s,r,i,o,a,l){if(l!==GO){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:O3,resetWarningCache:N3};return n.PropTypes=n,n};A3.exports=KO();var g0=A3.exports;function D3(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=D3(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function ru(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=D3(t))&&(s&&(s+=" "),s+=e);return s}const qO=Object.freeze(Object.defineProperty({__proto__:null,clsx:ru,default:ru},Symbol.toStringTag,{value:"Module"})),XO=iP(qO);var _t={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.dontSetMe=tD;tr.findInArray=QO;tr.int=eD;tr.isFunction=JO;tr.isNum=ZO;function QO(t,e){for(let n=0,s=t.length;n<s;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function JO(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function ZO(t){return typeof t=="number"&&!isNaN(t)}function eD(t){return parseInt(t,10)}function tD(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Co={};Object.defineProperty(Co,"__esModule",{value:!0});Co.browserPrefixToKey=j3;Co.browserPrefixToStyle=nD;Co.default=void 0;Co.getPrefix=L3;const Jp=["Moz","Webkit","O","ms"];function L3(){var n,s;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(s=(n=window.document)==null?void 0:n.documentElement)==null?void 0:s.style;if(!e||t in e)return"";for(let r=0;r<Jp.length;r++)if(j3(t,Jp[r])in e)return Jp[r];return""}function j3(t,e){return e?`${e}${sD(t)}`:t}function nD(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function sD(t){let e="",n=!0;for(let s=0;s<t.length;s++)n?(e+=t[s].toUpperCase(),n=!1):t[s]==="-"?n=!0:e+=t[s];return e}Co.default=L3();Object.defineProperty(_t,"__esModule",{value:!0});_t.addClassName=B3;_t.addEvent=iD;_t.addUserSelectStyles=mD;_t.createCSSTransform=hD;_t.createSVGTransform=fD;_t.getTouch=pD;_t.getTouchIdentifier=gD;_t.getTranslation=Hb;_t.innerHeight=cD;_t.innerWidth=uD;_t.matchesSelector=z3;_t.matchesSelectorAndParentsTo=rD;_t.offsetXYFromParent=dD;_t.outerHeight=aD;_t.outerWidth=lD;_t.removeClassName=$3;_t.removeEvent=oD;_t.scheduleRemoveUserSelectStyles=xD;var Yn=tr,n2=F3(Co);function F3(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(F3=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}let Td="";function z3(t,e){return Td||(Td=(0,Yn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Yn.isFunction)(t[n])})),(0,Yn.isFunction)(t[Td])?t[Td](e):!1}function rD(t,e,n){let s=t;do{if(z3(s,e))return!0;if(s===n)return!1;s=s.parentNode}while(s);return!1}function iD(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.addEventListener?t.addEventListener(e,n,r):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function oD(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function aD(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Yn.int)(n.borderTopWidth),e+=(0,Yn.int)(n.borderBottomWidth),e}function lD(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Yn.int)(n.borderLeftWidth),e+=(0,Yn.int)(n.borderRightWidth),e}function cD(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Yn.int)(n.paddingTop),e-=(0,Yn.int)(n.paddingBottom),e}function uD(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Yn.int)(n.paddingLeft),e-=(0,Yn.int)(n.paddingRight),e}function dD(t,e,n){const r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-r.left)/n,o=(t.clientY+e.scrollTop-r.top)/n;return{x:i,y:o}}function hD(t,e){const n=Hb(t,e,"px");return{[(0,n2.browserPrefixToKey)("transform",n2.default)]:n}}function fD(t,e){return Hb(t,e,"")}function Hb(t,e,n){let{x:s,y:r}=t,i=`translate(${s}${n},${r}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function pD(t,e){return t.targetTouches&&(0,Yn.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Yn.findInArray)(t.changedTouches,n=>e===n.identifier)}function gD(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function mD(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&B3(t.body,"react-draggable-transparent-selection")}function xD(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{s2(t)}):s2(t)}function s2(t){if(t)try{if(t.body&&$3(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function B3(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function $3(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.canDragX=vD;nr.canDragY=wD;nr.createCoreData=kD;nr.createDraggableData=_D;nr.getBoundPosition=bD;nr.getControlPosition=SD;nr.snapToGrid=yD;var Fn=tr,ta=_t;function bD(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:s}=t.props;s=typeof s=="string"?s:CD(s);const r=Vb(t);if(typeof s=="string"){const{ownerDocument:i}=r,o=i.defaultView;let a;if(s==="parent"?a=r.parentNode:a=r.getRootNode().querySelector(s),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');const l=a,c=o.getComputedStyle(r),u=o.getComputedStyle(l);s={left:-r.offsetLeft+(0,Fn.int)(u.paddingLeft)+(0,Fn.int)(c.marginLeft),top:-r.offsetTop+(0,Fn.int)(u.paddingTop)+(0,Fn.int)(c.marginTop),right:(0,ta.innerWidth)(l)-(0,ta.outerWidth)(r)-r.offsetLeft+(0,Fn.int)(u.paddingRight)-(0,Fn.int)(c.marginRight),bottom:(0,ta.innerHeight)(l)-(0,ta.outerHeight)(r)-r.offsetTop+(0,Fn.int)(u.paddingBottom)-(0,Fn.int)(c.marginBottom)}}return(0,Fn.isNum)(s.right)&&(e=Math.min(e,s.right)),(0,Fn.isNum)(s.bottom)&&(n=Math.min(n,s.bottom)),(0,Fn.isNum)(s.left)&&(e=Math.max(e,s.left)),(0,Fn.isNum)(s.top)&&(n=Math.max(n,s.top)),[e,n]}function yD(t,e,n){const s=Math.round(e/t[0])*t[0],r=Math.round(n/t[1])*t[1];return[s,r]}function vD(t){return t.props.axis==="both"||t.props.axis==="x"}function wD(t){return t.props.axis==="both"||t.props.axis==="y"}function SD(t,e,n){const s=typeof e=="number"?(0,ta.getTouch)(t,e):null;if(typeof e=="number"&&!s)return null;const r=Vb(n),i=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,ta.offsetXYFromParent)(s||t,i,n.props.scale)}function kD(t,e,n){const s=!(0,Fn.isNum)(t.lastX),r=Vb(t);return s?{node:r,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:r,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function _D(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function CD(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function Vb(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var m0={},x0={};Object.defineProperty(x0,"__esModule",{value:!0});x0.default=ED;function ED(){}Object.defineProperty(m0,"__esModule",{value:!0});m0.default=void 0;var Zp=U3(k),mn=Yb(g0),PD=Yb(wo),cn=_t,jr=nr,eg=tr,$l=Yb(x0);function Yb(t){return t&&t.__esModule?t:{default:t}}function U3(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(U3=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}function xn(t,e,n){return(e=TD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TD(t){var e=MD(t,"string");return typeof e=="symbol"?e:e+""}function MD(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ys={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Fr=ys.mouse,b0=class extends Zp.Component{constructor(){super(...arguments),xn(this,"dragging",!1),xn(this,"lastX",NaN),xn(this,"lastY",NaN),xn(this,"touchIdentifier",null),xn(this,"mounted",!1),xn(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:s}=n;if(this.props.disabled||!(e.target instanceof s.defaultView.Node)||this.props.handle&&!(0,cn.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,cn.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const r=(0,cn.getTouchIdentifier)(e);this.touchIdentifier=r;const i=(0,jr.getControlPosition)(e,r,this);if(i==null)return;const{x:o,y:a}=i,l=(0,jr.createCoreData)(this,o,a);(0,$l.default)("DraggableCore: handleDragStart: %j",l),(0,$l.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,cn.addUserSelectStyles)(s),this.dragging=!0,this.lastX=o,this.lastY=a,(0,cn.addEvent)(s,Fr.move,this.handleDrag),(0,cn.addEvent)(s,Fr.stop,this.handleDragStop))}),xn(this,"handleDrag",e=>{const n=(0,jr.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let a=s-this.lastX,l=r-this.lastY;if([a,l]=(0,jr.snapToGrid)(this.props.grid,a,l),!a&&!l)return;s=this.lastX+a,r=this.lastY+l}const i=(0,jr.createCoreData)(this,s,r);if((0,$l.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=s,this.lastY=r}),xn(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,jr.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let l=s-this.lastX||0,c=r-this.lastY||0;[l,c]=(0,jr.snapToGrid)(this.props.grid,l,c),s=this.lastX+l,r=this.lastY+c}const i=(0,jr.createCoreData)(this,s,r);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,cn.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,$l.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,$l.default)("DraggableCore: Removing handlers"),(0,cn.removeEvent)(a.ownerDocument,Fr.move,this.handleDrag),(0,cn.removeEvent)(a.ownerDocument,Fr.stop,this.handleDragStop))}),xn(this,"onMouseDown",e=>(Fr=ys.mouse,this.handleDragStart(e))),xn(this,"onMouseUp",e=>(Fr=ys.mouse,this.handleDragStop(e))),xn(this,"onTouchStart",e=>(Fr=ys.touch,this.handleDragStart(e))),xn(this,"onTouchEnd",e=>(Fr=ys.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,cn.addEvent)(e,ys.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,cn.removeEvent)(n,ys.mouse.move,this.handleDrag),(0,cn.removeEvent)(n,ys.touch.move,this.handleDrag),(0,cn.removeEvent)(n,ys.mouse.stop,this.handleDragStop),(0,cn.removeEvent)(n,ys.touch.stop,this.handleDragStop),(0,cn.removeEvent)(e,ys.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,cn.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,s;return(e=this.props)!=null&&e.nodeRef?(s=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:s.current:PD.default.findDOMNode(this)}render(){return Zp.cloneElement(Zp.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};m0.default=b0;xn(b0,"displayName","DraggableCore");xn(b0,"propTypes",{allowAnyClick:mn.default.bool,allowMobileScroll:mn.default.bool,children:mn.default.node.isRequired,disabled:mn.default.bool,enableUserSelectHack:mn.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:mn.default.arrayOf(mn.default.number),handle:mn.default.string,cancel:mn.default.string,nodeRef:mn.default.object,onStart:mn.default.func,onDrag:mn.default.func,onStop:mn.default.func,onMouseDown:mn.default.func,scale:mn.default.number,className:eg.dontSetMe,style:eg.dontSetMe,transform:eg.dontSetMe});xn(b0,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=d(k),n=u(g0),s=u(wo),r=XO,i=_t,o=nr,a=tr,l=u(m0),c=u(x0);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,y){if(typeof WeakMap=="function")var b=new WeakMap,v=new WeakMap;return(d=function(S,_){if(!_&&S&&S.__esModule)return S;var E,T,P={__proto__:null,default:S};if(S===null||typeof S!="object"&&typeof S!="function")return P;if(E=_?v:b){if(E.has(S))return E.get(S);E.set(S,P)}for(const C in S)C!=="default"&&{}.hasOwnProperty.call(S,C)&&((T=(E=Object.defineProperty)&&Object.getOwnPropertyDescriptor(S,C))&&(T.get||T.set)?E(P,C,T):P[C]=S[C]);return P})(g,y)}function h(){return h=Object.assign?Object.assign.bind():function(g){for(var y=1;y<arguments.length;y++){var b=arguments[y];for(var v in b)({}).hasOwnProperty.call(b,v)&&(g[v]=b[v])}return g},h.apply(null,arguments)}function p(g,y,b){return(y=m(y))in g?Object.defineProperty(g,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[y]=b,g}function m(g){var y=x(g,"string");return typeof y=="symbol"?y:y+""}function x(g,y){if(typeof g!="object"||!g)return g;var b=g[Symbol.toPrimitive];if(b!==void 0){var v=b.call(g,y);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}class w extends e.Component{static getDerivedStateFromProps(y,b){let{position:v}=y,{prevPropsPosition:S}=b;return v&&(!S||v.x!==S.x||v.y!==S.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:v,prevPropsPosition:S}),{x:v.x,y:v.y,prevPropsPosition:{...v}}):null}constructor(y){super(y),p(this,"onDragStart",(b,v)=>{if((0,c.default)("Draggable: onDragStart: %j",v),this.props.onStart(b,(0,o.createDraggableData)(this,v))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(b,v)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",v);const S=(0,o.createDraggableData)(this,v),_={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:P}=_;_.x+=this.state.slackX,_.y+=this.state.slackY;const[C,R]=(0,o.getBoundPosition)(this,_.x,_.y);_.x=C,_.y=R,_.slackX=this.state.slackX+(T-_.x),_.slackY=this.state.slackY+(P-_.y),S.x=_.x,S.y=_.y,S.deltaX=_.x-this.state.x,S.deltaY=_.y-this.state.y}if(this.props.onDrag(b,S)===!1)return!1;this.setState(_)}),p(this,"onDragStop",(b,v)=>{if(!this.state.dragging||this.props.onStop(b,(0,o.createDraggableData)(this,v))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",v);const _={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:P}=this.props.position;_.x=T,_.y=P}this.setState(_)}),this.state={dragging:!1,dragged:!1,x:y.position?y.position.x:y.defaultPosition.x,y:y.position?y.position.y:y.defaultPosition.y,prevPropsPosition:{...y.position},slackX:0,slackY:0,isElementSVG:!1},y.position&&!(y.onDrag||y.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var y,b;return((b=(y=this.props)==null?void 0:y.nodeRef)==null?void 0:b.current)??s.default.findDOMNode(this)}render(){const{axis:y,bounds:b,children:v,defaultPosition:S,defaultClassName:_,defaultClassNameDragging:E,defaultClassNameDragged:T,position:P,positionOffset:C,scale:R,...A}=this.props;let $={},H=null;const N=!!!P||this.state.dragging,z=P||S,L={x:(0,o.canDragX)(this)&&N?this.state.x:z.x,y:(0,o.canDragY)(this)&&N?this.state.y:z.y};this.state.isElementSVG?H=(0,i.createSVGTransform)(L,C):$=(0,i.createCSSTransform)(L,C);const B=(0,r.clsx)(v.props.className||"",_,{[E]:this.state.dragging,[T]:this.state.dragged});return e.createElement(l.default,h({},A,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(v),{className:B,style:{...v.props.style,...$},transform:H}))}}t.default=w,p(w,"displayName","Draggable"),p(w,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(w,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(R3);const{default:W3,DraggableCore:ID}=R3;p0.exports=W3;p0.exports.default=W3;var RD=p0.exports.DraggableCore=ID,AD=p0.exports,Gb={exports:{}},Ou={},Kb={};Kb.__esModule=!0;Kb.cloneElement=FD;var ND=OD(k);function OD(t){return t&&t.__esModule?t:{default:t}}function r2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function i2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r2(Object(n),!0).forEach(function(s){DD(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function DD(t,e,n){return e=LD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LD(t){var e=jD(t,"string");return typeof e=="symbol"?e:String(e)}function jD(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FD(t,e){return e.style&&t.props.style&&(e.style=i2(i2({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),ND.default.cloneElement(t,e)}var Du={};Du.__esModule=!0;Du.resizableProps=void 0;var Oe=zD(g0);function zD(t){return t&&t.__esModule?t:{default:t}}var BD={axis:Oe.default.oneOf(["both","x","y","none"]),className:Oe.default.string,children:Oe.default.element.isRequired,draggableOpts:Oe.default.shape({allowAnyClick:Oe.default.bool,cancel:Oe.default.string,children:Oe.default.node,disabled:Oe.default.bool,enableUserSelectHack:Oe.default.bool,offsetParent:Oe.default.node,grid:Oe.default.arrayOf(Oe.default.number),handle:Oe.default.string,nodeRef:Oe.default.object,onStart:Oe.default.func,onDrag:Oe.default.func,onStop:Oe.default.func,onMouseDown:Oe.default.func,scale:Oe.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="y"){var i;return(i=Oe.default.number).isRequired.apply(i,n)}return Oe.default.number.apply(Oe.default,n)},handle:Oe.default.oneOfType([Oe.default.node,Oe.default.func]),handleSize:Oe.default.arrayOf(Oe.default.number),lockAspectRatio:Oe.default.bool,maxConstraints:Oe.default.arrayOf(Oe.default.number),minConstraints:Oe.default.arrayOf(Oe.default.number),onResizeStop:Oe.default.func,onResizeStart:Oe.default.func,onResize:Oe.default.func,resizeHandles:Oe.default.arrayOf(Oe.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Oe.default.number,width:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="x"){var i;return(i=Oe.default.number).isRequired.apply(i,n)}return Oe.default.number.apply(Oe.default,n)}};Du.resizableProps=BD;Ou.__esModule=!0;Ou.default=void 0;var Ul=VD(k),$D=AD,UD=Kb,WD=Du,HD=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function H3(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(H3=function(r){return r?n:e})(t)}function VD(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=H3(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Dm.apply(this,arguments)}function YD(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function o2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function tg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o2(Object(n),!0).forEach(function(s){GD(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function GD(t,e,n){return e=KD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KD(t){var e=qD(t,"string");return typeof e=="symbol"?e:String(e)}function qD(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XD(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Lm(t,e)}function Lm(t,e){return Lm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},Lm(t,e)}var qb=function(t){XD(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.handleRefs={},s.lastHandleRect=null,s.slack=null,s}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(r,i){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[r,i];if(c){var u=this.props.width/this.props.height,d=r-this.props.width,h=i-this.props.height;Math.abs(d)>Math.abs(h*u)?i=r/u:r=i*u}var p=r,m=i,x=this.slack||[0,0],w=x[0],g=x[1];return r+=w,i+=g,a&&(r=Math.max(a[0],r),i=Math.max(a[1],i)),l&&(r=Math.min(l[0],r),i=Math.min(l[1],i)),this.slack=[w+(p-r),g+(m-i)],[r,i]},n.resizeHandler=function(r,i){var o=this;return function(a,l){var c=l.node,u=l.deltaX,d=l.deltaY;r==="onResizeStart"&&o.resetData();var h=(o.props.axis==="both"||o.props.axis==="x")&&i!=="n"&&i!=="s",p=(o.props.axis==="both"||o.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!h&&!p)){var m=i[0],x=i[i.length-1],w=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(x==="w"){var g=w.left-o.lastHandleRect.left;u+=g}if(m==="n"){var y=w.top-o.lastHandleRect.top;d+=y}}o.lastHandleRect=w,x==="w"&&(u=-u),m==="n"&&(d=-d);var b=o.props.width+(h?u/o.props.transformScale:0),v=o.props.height+(p?d/o.props.transformScale:0),S=o.runConstraints(b,v);b=S[0],v=S[1];var _=b!==o.props.width||v!==o.props.height,E=typeof o.props[r]=="function"?o.props[r]:null,T=r==="onResize"&&!_;E&&!T&&(a.persist==null||a.persist(),E(a,{node:c,size:{width:b,height:v},handle:i})),r==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(r,i){var o=this.props.handle;if(!o)return Ul.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+r,ref:i});if(typeof o=="function")return o(r,i);var a=typeof o.type=="string",l=tg({ref:i},a?{}:{handleAxis:r});return Ul.cloneElement(o,l)},n.render=function(){var r=this,i=this.props,o=i.children,a=i.className,l=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var c=i.resizeHandles;i.transformScale;var u=YD(i,HD);return(0,UD.cloneElement)(o,tg(tg({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(d){var h,p=(h=r.handleRefs[d])!=null?h:r.handleRefs[d]=Ul.createRef();return Ul.createElement($D.DraggableCore,Dm({},l,{nodeRef:p,key:"resizableHandle-"+d,onStop:r.resizeHandler("onResizeStop",d),onStart:r.resizeHandler("onResizeStart",d),onDrag:r.resizeHandler("onResize",d)}),r.renderResizeHandle(d,p))}))}))},e}(Ul.Component);Ou.default=qb;qb.propTypes=WD.resizableProps;qb.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var y0={};y0.__esModule=!0;y0.default=void 0;var ng=t9(k),QD=V3(g0),JD=V3(Ou),ZD=Du,e9=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function V3(t){return t&&t.__esModule?t:{default:t}}function Y3(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Y3=function(r){return r?n:e})(t)}function t9(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Y3(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function jm(){return jm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},jm.apply(this,arguments)}function a2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function lf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a2(Object(n),!0).forEach(function(s){n9(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function n9(t,e,n){return e=s9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s9(t){var e=r9(t,"string");return typeof e=="symbol"?e:String(e)}function r9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i9(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function o9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Fm(t,e)}function Fm(t,e){return Fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},Fm(t,e)}var G3=function(t){o9(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.state={width:s.props.width,height:s.props.height,propsWidth:s.props.width,propsHeight:s.props.height},s.onResize=function(a,l){var c=l.size;s.props.onResize?(a.persist==null||a.persist(),s.setState(c,function(){return s.props.onResize&&s.props.onResize(a,l)})):s.setState(c)},s}e.getDerivedStateFromProps=function(r,i){return i.propsWidth!==r.width||i.propsHeight!==r.height?{width:r.width,height:r.height,propsWidth:r.width,propsHeight:r.height}:null};var n=e.prototype;return n.render=function(){var r=this.props,i=r.handle,o=r.handleSize;r.onResize;var a=r.onResizeStart,l=r.onResizeStop,c=r.draggableOpts,u=r.minConstraints,d=r.maxConstraints,h=r.lockAspectRatio,p=r.axis;r.width,r.height;var m=r.resizeHandles,x=r.style,w=r.transformScale,g=i9(r,e9);return ng.createElement(JD.default,{axis:p,draggableOpts:c,handle:i,handleSize:o,height:this.state.height,lockAspectRatio:h,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:m,transformScale:w,width:this.state.width},ng.createElement("div",jm({},g,{style:lf(lf({},x),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(ng.Component);y0.default=G3;G3.propTypes=lf(lf({},ZD.resizableProps),{},{children:QD.default.element});Gb.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var a9=Gb.exports.Resizable=Ou.default;Gb.exports.ResizableBox=y0.default;function K3(t){return function(n,s,r,i,o,a,l){return t(n,s,l)}}function v0(t){return function(n,s,r,i){if(!n||!s||typeof n!="object"||typeof s!="object")return t(n,s,r,i);var o=i.get(n),a=i.get(s);if(o&&a)return o===s&&a===n;i.set(n,s),i.set(s,n);var l=t(n,s,r,i);return i.delete(n),i.delete(s),l}}function q3(t,e){var n={};for(var s in t)n[s]=t[s];for(var s in e)n[s]=e[s];return n}function l2(t){return t.constructor===Object||t.constructor==null}function c2(t){return typeof t.then=="function"}function w0(t,e){return t===e||t!==t&&e!==e}var l9="[object Arguments]",c9="[object Boolean]",u9="[object Date]",d9="[object RegExp]",h9="[object Map]",f9="[object Number]",p9="[object Object]",g9="[object Set]",m9="[object String]",u2=Object.prototype.toString;function S0(t){var e=t.areArraysEqual,n=t.areDatesEqual,s=t.areMapsEqual,r=t.areObjectsEqual,i=t.areRegExpsEqual,o=t.areSetsEqual,a=t.createIsNestedEqual,l=a(c);function c(u,d,h){if(u===d)return!0;if(!u||!d||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;if(l2(u)&&l2(d))return r(u,d,l,h);var p=Array.isArray(u),m=Array.isArray(d);if(p||m)return p===m&&e(u,d,l,h);var x=u2.call(u);return x!==u2.call(d)?!1:x===u9?n(u,d,l,h):x===d9?i(u,d,l,h):x===h9?s(u,d,l,h):x===g9?o(u,d,l,h):x===p9||x===l9?c2(u)||c2(d)?!1:r(u,d,l,h):x===c9||x===f9||x===m9?w0(u.valueOf(),d.valueOf()):!1}return c}function X3(t,e,n,s){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n(t[r],e[r],r,r,t,e,s))return!1;return!0}var x9=v0(X3);function Q3(t,e){return w0(t.valueOf(),e.valueOf())}function J3(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={},o=0;return t.forEach(function(a,l){if(r){var c=!1,u=0;e.forEach(function(d,h){!c&&!i[u]&&(c=n(l,h,o,u,t,e,s)&&n(a,d,l,h,t,e,s))&&(i[u]=!0),u++}),o++,r=c}}),r}var b9=v0(J3),y9="_owner",v9=Object.prototype.hasOwnProperty;function Z3(t,e,n,s){var r=Object.keys(t),i=r.length;if(Object.keys(e).length!==i)return!1;for(var o;i-- >0;){if(o=r[i],o===y9){var a=!!t.$$typeof,l=!!e.$$typeof;if((a||l)&&a!==l)return!1}if(!v9.call(e,o)||!n(t[o],e[o],o,o,t,e,s))return!1}return!0}var w9=v0(Z3);function eE(t,e){return t.source===e.source&&t.flags===e.flags}function tE(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={};return t.forEach(function(o,a){if(r){var l=!1,c=0;e.forEach(function(u,d){!l&&!i[c]&&(l=n(o,u,a,d,t,e,s))&&(i[c]=!0),c++}),r=l}}),r}var S9=v0(tE),nE=Object.freeze({areArraysEqual:X3,areDatesEqual:Q3,areMapsEqual:J3,areObjectsEqual:Z3,areRegExpsEqual:eE,areSetsEqual:tE,createIsNestedEqual:K3}),sE=Object.freeze({areArraysEqual:x9,areDatesEqual:Q3,areMapsEqual:b9,areObjectsEqual:w9,areRegExpsEqual:eE,areSetsEqual:S9,createIsNestedEqual:K3}),k9=S0(nE);function Kr(t,e){return k9(t,e,void 0)}S0(q3(nE,{createIsNestedEqual:function(){return w0}}));S0(sE);S0(q3(sE,{createIsNestedEqual:function(){return w0}}));function d2(t){const{children:e,cols:n,containerWidth:s,margin:r,containerPadding:i,rowHeight:o,maxRows:a,isDraggable:l,isResizable:c,isBounded:u,static:d,useCSSTransforms:h=!0,usePercentages:p=!1,transformScale:m=1,droppingPosition:x,className:w="",style:g,handle:y="",cancel:b="",x:v,y:S,w:_,h:E,minW:T=1,maxW:P=1/0,minH:C=1,maxH:R=1/0,i:A,resizeHandles:$,resizeHandle:H,onDragStart:F,onDrag:N,onDragStop:z,onResizeStart:L,onResize:B,onResizeStop:M}=t,[G,j]=k.useState(!1),[I,U]=k.useState(!1),q=k.useRef(null),X=k.useRef({left:0,top:0}),K=k.useRef({top:0,left:0,width:0,height:0}),ee=k.useRef(void 0),se=k.useMemo(()=>({cols:n,containerPadding:i,containerWidth:s,margin:r,maxRows:a,rowHeight:o}),[n,i,s,r,a,o]),ge=k.useCallback(we=>{if(h)return Db(we);const Ee=w3(we);return p?{...Ee,left:Q1(we.left/s),width:Q1(we.width/s)}:Ee},[h,p,s]),Ue=k.useCallback((we,{node:Ee})=>{if(!F)return;const{offsetParent:We}=Ee;if(!We)return;const Ze=We.getBoundingClientRect(),lt=Ee.getBoundingClientRect(),Ct=lt.left/m,Vt=Ze.left/m,Ft=lt.top/m,Yt=Ze.top/m,ct={left:Ct-Vt+We.scrollLeft,top:Ft-Yt+We.scrollTop};X.current=ct,j(!0);const{x:xs,y:gn}=fh(se,ct.top,ct.left,_,E);F(A,xs,gn,{e:we,node:Ee,newPosition:ct})},[F,m,se,_,E,A]),Pe=k.useCallback((we,{node:Ee,deltaX:We,deltaY:Ze})=>{if(!N||!G)return;let lt=X.current.top+Ze,Ct=X.current.left+We;if(u){const{offsetParent:ct}=Ee;if(ct){const xs=ct.clientHeight-af(E,o,r[1]);lt=qs(lt,0,xs);const gn=f0(se),te=s-af(_,gn,r[0]);Ct=qs(Ct,0,te)}}const Vt={top:lt,left:Ct};X.current=Vt;const{x:Ft,y:Yt}=fh(se,lt,Ct,_,E);N(A,Ft,Yt,{e:we,node:Ee,newPosition:Vt})},[N,G,u,E,o,r,se,s,_,A]),ke=k.useCallback((we,{node:Ee})=>{if(!z||!G)return;const{left:We,top:Ze}=X.current,lt={top:Ze,left:We};j(!1),X.current={left:0,top:0};const{x:Ct,y:Vt}=fh(se,Ze,We,_,E);z(A,Ct,Vt,{e:we,node:Ee,newPosition:lt})},[z,G,se,_,E,A]),Te=k.useCallback((we,{node:Ee,size:We,handle:Ze},lt,Ct)=>{const Vt=Ct==="onResizeStart"?L:Ct==="onResize"?B:M;if(!Vt)return;let Ft;Ee?Ft=PO(Ze,lt,We,s):Ft={...We,top:lt.top,left:lt.left},K.current=Ft;let{w:Yt,h:ct}=HO(se,Ft.width,Ft.height,v,S,Ze);Yt=qs(Yt,Math.max(T,1),P),ct=qs(ct,C,R),Vt(A,Yt,ct,{e:we.nativeEvent,node:Ee,size:Ft,handle:Ze})},[L,B,M,s,se,v,S,T,P,C,R,A]),ft=k.useCallback((we,Ee)=>{U(!0);const We=Pi(se,v,S,_,E),Ze={...Ee,handle:Ee.handle};Te(we,Ze,We,"onResizeStart")},[Te,se,v,S,_,E]),D=k.useCallback((we,Ee)=>{const We=Pi(se,v,S,_,E),Ze={...Ee,handle:Ee.handle};Te(we,Ze,We,"onResize")},[Te,se,v,S,_,E]),Q=k.useCallback((we,Ee)=>{U(!1),K.current={top:0,left:0,width:0,height:0};const We=Pi(se,v,S,_,E),Ze={...Ee,handle:Ee.handle};Te(we,Ze,We,"onResizeStop")},[Te,se,v,S,_,E]);k.useEffect(()=>{if(!x)return;const we=q.current;if(!we)return;const Ee=ee.current||{left:0,top:0},We=G&&(x.left!==Ee.left||x.top!==Ee.top);if(G){if(We){const Ze=x.left-X.current.left,lt=x.top-X.current.top,Ct={node:we,deltaX:Ze,deltaY:lt,lastX:X.current.left,lastY:X.current.top,x:x.left,y:x.top};Pe(x.e,Ct)}}else{const Ze={node:we,deltaX:x.left,deltaY:x.top,lastX:0,lastY:0,x:x.left,y:x.top};Ue(x.e,Ze)}ee.current=x},[x,G,Ue,Pe]);const oe=Pi(se,v,S,_,E,G?X.current:null,I?K.current:null),de=ae.Children.only(e),ve=Pi(se,0,0,n,0).width,ye=Pi(se,0,0,T,C),W=Pi(se,0,0,P,R),le=[ye.width,ye.height],O=[Math.min(W.width,ve),Math.min(W.height,1/0)],ne=de.props,re=ne.className,Y=ne.style;let he=ae.cloneElement(de,{ref:q,className:ru("react-grid-item",re,w,{static:d,resizing:I,"react-draggable":l,"react-draggable-dragging":G,dropping:!!x,cssTransforms:h}),style:{...g,...Y,...ge(oe)}});const Me=H;return he=f.jsx(a9,{draggableOpts:{disabled:!c},className:c?void 0:"react-resizable-hide",width:oe.width,height:oe.height,minConstraints:le,maxConstraints:O,onResizeStart:ft,onResize:D,onResizeStop:Q,transformScale:m,resizeHandles:$,handle:Me,children:he}),he=f.jsx(RD,{disabled:!l,onStart:Ue,onDrag:Pe,onStop:ke,handle:y,cancel:".react-resizable-handle"+(b?","+b:""),scale:m,nodeRef:q,children:he}),he}var rr=()=>{},h2="react-grid-layout",rE=!1;try{rE=/firefox/i.test(navigator.userAgent)}catch{}function _9(t,e){const n=ae.Children.toArray(t),s=ae.Children.toArray(e);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const i=n[r],o=s[r];if((i==null?void 0:i.key)!==(o==null?void 0:o.key))return!1}return!0}function f2(t,e,n,s,r){const i=[],o=new Set;ae.Children.forEach(e,l=>{if(!ae.isValidElement(l)||l.key===null)return;const c=String(l.key);o.add(c);const u=t.find(d=>d.i===c);if(u)i.push(bi(u));else{const h=l.props["data-grid"];h?i.push({i:c,x:h.x??0,y:h.y??0,w:h.w??1,h:h.h??1,minW:h.minW,maxW:h.maxW,minH:h.minH,maxH:h.maxH,static:h.static,isDraggable:h.isDraggable,isResizable:h.isResizable,resizeHandles:h.resizeHandles,isBounded:h.isBounded}):i.push({i:c,x:0,y:xl(i),w:1,h:1})}});const a=$b(i,{cols:n});return gr(a,s,n,r)}function C9(t){const{children:e,width:n,gridConfig:s,dragConfig:r,resizeConfig:i,dropConfig:o,positionStrategy:a=IO,compactor:l,layout:c=[],droppingItem:u,autoSize:d=!0,className:h="",style:p={},innerRef:m,onLayoutChange:x=rr,onDragStart:w=rr,onDrag:g=rr,onDragStop:y=rr,onResizeStart:b=rr,onResize:v=rr,onResizeStop:S=rr,onDrop:_=rr,onDropDragOver:E=rr}=t,T=k.useMemo(()=>({...RO,...s}),[s]),P=k.useMemo(()=>({...AO,...r}),[r]),C=k.useMemo(()=>({...NO,...i}),[i]),R=k.useMemo(()=>({...OO,...o}),[o]),{cols:A,rowHeight:$,maxRows:H,margin:F,containerPadding:N}=T,{enabled:z,bounded:L,handle:B,cancel:M}=P,{enabled:G,handles:j,handleComponent:I}=C,{enabled:U,defaultItem:q}=R,X=l??Wb("vertical"),K=X.type,ee=X.allowOverlap,se=X.preventCollision??!1,ge=k.useMemo(()=>u??{i:"__dropping-elem__",...q},[u,q]),Ue=a.type==="transform",Pe=a.scale,ke=N??F,[Te,ft]=k.useState(!1),[D,Q]=k.useState(()=>f2(c,e,A,K,ee)),[oe,de]=k.useState(null),[ve,ye]=k.useState(!1),[W,le]=k.useState(null),[O,ne]=k.useState(),re=k.useRef(null),Y=k.useRef(null),he=k.useRef(null),Me=k.useRef(0),we=k.useRef(D),Ee=k.useRef(c),We=k.useRef(e),Ze=k.useRef(K);k.useEffect(()=>{ft(!0),Kr(D,c)||x(D)},[]),k.useEffect(()=>{if(oe)return;const fe=!Kr(c,Ee.current),Xe=!_9(e,We.current),Se=K!==Ze.current;if(fe||Xe||Se){const Ke=f2(fe?c:D,e,A,K,ee);Q(Ke)}Ee.current=c,We.current=e,Ze.current=K},[c,e,A,K,ee,oe,D]),k.useEffect(()=>{!oe&&!Kr(D,we.current)&&(we.current=D,x(D))},[D,oe,x]);const lt=k.useMemo(()=>{if(!d)return;const fe=xl(D),Xe=ke[1];return fe*$+(fe-1)*F[1]+Xe*2+"px"},[d,D,$,F,ke]),Ct=k.useCallback((fe,Xe,Se,ze)=>{const Ke=Ni(D,fe);if(!Ke)return;const Ve={w:Ke.w,h:Ke.h,x:Ke.x,y:Ke.y,i:fe};re.current=bi(Ke),he.current=D,de(Ve),w(D,Ke,Ke,null,ze.e,ze.node)},[D,w]),Vt=k.useCallback((fe,Xe,Se,ze)=>{const Ke=re.current,Ve=Ni(D,fe);if(!Ve)return;const At={w:Ve.w,h:Ve.h,x:Ve.x,y:Ve.y,i:fe},nt=Wi(D,Ve,Xe,Se,!0,se,K,A,ee);g(nt,Ke,Ve,At,ze.e,ze.node),Q(ee?nt:gr(nt,K,A)),de(At)},[D,se,K,A,ee,g]),Ft=k.useCallback((fe,Xe,Se,ze)=>{if(!oe)return;const Ke=re.current,Ve=Ni(D,fe);if(!Ve)return;const At=Wi(D,Ve,Xe,Se,!0,se,K,A,ee),nt=ee?At:gr(At,K,A);y(nt,Ke,Ve,null,ze.e,ze.node);const sn=he.current;re.current=null,he.current=null,de(null),Q(nt),sn&&!Kr(sn,nt)&&x(nt)},[oe,D,se,K,A,ee,y,x]),Yt=k.useCallback((fe,Xe,Se,ze)=>{const Ke=Ni(D,fe);Ke&&(Y.current=bi(Ke),he.current=D,ye(!0),b(D,Ke,Ke,null,ze.e,ze.node))},[D,b]),ct=k.useCallback((fe,Xe,Se,ze)=>{const Ke=Y.current,{handle:Ve}=ze;let At=!1,nt,sn;const[Sl,ki]=LO(D,fe,Et=>(nt=Et.x,sn=Et.y,["sw","w","nw","n","ne"].includes(Ve)&&(["sw","nw","w"].includes(Ve)&&(nt=Et.x+(Et.w-Xe),Xe=Et.x!==nt&&nt<0?Et.w:Xe,nt=nt<0?0:nt),["ne","n","nw"].includes(Ve)&&(sn=Et.y+(Et.h-Se),Se=Et.y!==sn&&sn<0?Et.h:Se,sn=sn<0?0:sn),At=!0),se&&!ee&&_3(D,{...Et,w:Xe,h:Se,x:nt??Et.x,y:sn??Et.y}).filter(nP=>nP.i!==Et.i).length>0&&(sn=Et.y,Se=Et.h,nt=Et.x,Xe=Et.w,At=!1),Et.w=Xe,Et.h=Se,Et));if(!ki)return;let Vu=Sl;At&&nt!==void 0&&sn!==void 0&&(Vu=Wi(Sl,ki,nt,sn,!0,se,K,A,ee));const Ay={w:ki.w,h:ki.h,x:ki.x,y:ki.y,i:fe,static:!0};v(Vu,Ke,ki,Ay,ze.e,ze.node),Q(ee?Vu:gr(Vu,K,A)),de(Ay)},[D,se,ee,K,A,v]),xs=k.useCallback((fe,Xe,Se,ze)=>{const Ke=Y.current,Ve=Ni(D,fe),At=ee?D:gr(D,K,A);S(At,Ke,Ve??null,null,ze.e,ze.node);const nt=he.current;Y.current=null,he.current=null,de(null),ye(!1),Q(At),nt&&!Kr(nt,At)&&x(At)},[D,ee,K,A,S,x]),gn=k.useCallback(()=>{const fe=gr(D.filter(Xe=>Xe.i!==ge.i),K,A,ee);Q(fe),le(null),de(null),ne(void 0)},[D,ge.i,K,A,ee]),te=k.useCallback(fe=>{var nt;if(fe.preventDefault(),fe.stopPropagation(),rE&&!((nt=fe.nativeEvent.target)!=null&&nt.classList.contains(h2)))return!1;const Xe=E(fe);if(Xe===!1)return W&&gn(),!1;const Se={...ge,...Xe},ze=fe.currentTarget.getBoundingClientRect(),Ke=fe.clientX-ze.left,Ve=fe.clientY-ze.top,At={left:Ke/Pe,top:Ve/Pe,e:fe.nativeEvent};if(W)O&&(O.left!==Ke||O.top!==Ve)&&ne(At);else{const Sl=fh({cols:A,margin:F,maxRows:H,rowHeight:$,containerWidth:n,containerPadding:ke},Ve,Ke,Se.w,Se.h);le(f.jsx("div",{},Se.i)),ne(At),Q([...D,{...Se,x:Sl.x,y:Sl.y,static:!1,isDraggable:!0}])}},[W,O,ge,E,gn,Pe,A,F,H,$,n,ke,D]),J=k.useCallback(fe=>{fe.preventDefault(),fe.stopPropagation(),Me.current--,Me.current===0&&gn()},[gn]),V=k.useCallback(fe=>{fe.preventDefault(),fe.stopPropagation(),Me.current++},[]),Re=k.useCallback(fe=>{fe.preventDefault(),fe.stopPropagation();const Xe=D.find(Se=>Se.i===ge.i);Me.current=0,gn(),_(D,Xe,fe.nativeEvent)},[D,ge.i,gn,_]),it=k.useCallback((fe,Xe)=>{if(!fe||!fe.key)return null;const Se=Ni(D,String(fe.key));if(!Se)return null;const ze=typeof Se.isDraggable=="boolean"?Se.isDraggable:!Se.static&&z,Ke=typeof Se.isResizable=="boolean"?Se.isResizable:!Se.static&&G,Ve=Se.resizeHandles||[...j],At=ze&&L&&Se.isBounded!==!1,nt=I;return f.jsx(d2,{containerWidth:n,cols:A,margin:F,containerPadding:ke,maxRows:H,rowHeight:$,cancel:M,handle:B,onDragStart:Ct,onDrag:Vt,onDragStop:Ft,onResizeStart:Yt,onResize:ct,onResizeStop:xs,isDraggable:ze,isResizable:Ke,isBounded:At,useCSSTransforms:Ue&&Te,usePercentages:!Te,transformScale:Pe,w:Se.w,h:Se.h,x:Se.x,y:Se.y,i:Se.i,minH:Se.minH,minW:Se.minW,maxH:Se.maxH,maxW:Se.maxW,static:Se.static,droppingPosition:Xe?O:void 0,resizeHandles:Ve,resizeHandle:nt,children:fe},Se.i)},[D,n,A,F,ke,H,$,M,B,Ct,Vt,Ft,Yt,ct,xs,z,G,L,Ue,Te,Pe,O,j,I]),Ne=()=>oe?f.jsx(d2,{w:oe.w,h:oe.h,x:oe.x,y:oe.y,i:oe.i,className:`react-grid-placeholder ${ve?"placeholder-resizing":""}`,containerWidth:n,cols:A,margin:F,containerPadding:ke,maxRows:H,rowHeight:$,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:Ue,transformScale:Pe,children:f.jsx("div",{})}):null,Gt=ru(h2,h),je={height:lt,...p};return f.jsxs("div",{ref:m,className:Gt,style:je,onDrop:U?Re:void 0,onDragLeave:U?J:void 0,onDragEnter:U?V:void 0,onDragOver:U?te:void 0,children:[ae.Children.map(e,fe=>ae.isValidElement(fe)?it(fe):null),U&&W&&it(W,!0),Ne()]})}var E9={lg:1200,md:996,sm:768,xs:480,xxs:0},P9={lg:12,md:10,sm:6,xs:4,xxs:2},sg=()=>{};function T9(t,e,n,s,r){const i=[];ae.Children.forEach(e,a=>{if(!ae.isValidElement(a)||a.key===null)return;const l=String(a.key),c=t.find(u=>u.i===l);if(c)i.push({...c,i:l});else{const d=a.props["data-grid"];d?i.push({i:l,x:d.x??0,y:d.y??0,w:d.w??1,h:d.h??1,minW:d.minW,maxW:d.maxW,minH:d.minH,maxH:d.maxH,static:d.static,isDraggable:d.isDraggable,isResizable:d.isResizable,resizeHandles:d.resizeHandles,isBounded:d.isBounded}):i.push({i:l,x:0,y:xl(i),w:1,h:1})}});const o=$b(i,{cols:n});return gr(o,s,n,r)}function M9(t){const{children:e,width:n,breakpoint:s,breakpoints:r=E9,cols:i=P9,layouts:o={},rowHeight:a=150,maxRows:l=1/0,margin:c=[10,10],containerPadding:u=null,compactor:d,onBreakpointChange:h=sg,onLayoutChange:p=sg,onWidthChange:m=sg,...x}=t,w=d??Wb("vertical"),g=w.type,y=w.allowOverlap,b=k.useMemo(()=>s??e2(r,n),[]),v=k.useMemo(()=>t2(b,i),[b,i]),S=k.useMemo(()=>Qp(o,r,b,b,v,g),[]),[_,E]=k.useState(b),[T,P]=k.useState(v),[C,R]=k.useState(S),[A,$]=k.useState(o),H=k.useRef(n),F=k.useRef(s),N=k.useRef(r),z=k.useRef(i),L=k.useRef(o),B=k.useRef(g);k.useEffect(()=>{if(!Kr(o,L.current)){const U=Qp(o,r,_,_,T,g);R(U),$(o),L.current=o}},[o,r,_,T,g]),k.useEffect(()=>{if(g!==B.current){const U=gr(Ns(C),g,T,y),q={...A,[_]:U};R(U),$(q),p(U,q),B.current=g}},[g,C,T,y,A,_,p]),k.useEffect(()=>{const U=n!==H.current,q=s!==F.current,X=!Kr(r,N.current),K=!Kr(i,z.current);if(U||q||X||K){const ee=s??e2(r,n),se=t2(ee,i),ge=_;if(ge!==ee||X||K){const ke={...A};ke[ge]||(ke[ge]=Ns(C));let Te=Qp(ke,r,ee,ge,se,g);Te=T9(Te,e,se,g,y),ke[ee]=Te,E(ee),P(se),R(Te),$(ke),h(ee,se),p(Te,ke)}const Ue=Pd(c,ee),Pe=u?Pd(u,ee):null;m(n,Ue,se,Pe),H.current=n,F.current=s,N.current=r,z.current=i}},[n,s,r,i,_,T,C,A,e,g,y,c,u,h,p,m]);const M=k.useCallback(U=>{const q={...A,[_]:U};R(U),$(q),p(U,q)},[A,_,p]),G=k.useMemo(()=>Pd(c,_),[c,_]),j=k.useMemo(()=>u===null?null:Pd(u,_),[u,_]),I=k.useMemo(()=>({cols:T,rowHeight:a,maxRows:l,margin:G,containerPadding:j}),[T,a,l,G,j]);return f.jsx(C9,{...x,width:n,gridConfig:I,compactor:w,onLayoutChange:M,layout:C,children:e})}function iE(t){const{children:e,width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,rowHeight:u,maxRows:d,margin:h,containerPadding:p,droppingItem:m,compactType:x,preventCollision:w=!1,allowOverlap:g=!1,verticalCompact:y,isDraggable:b=!0,isBounded:v=!1,draggableHandle:S,draggableCancel:_,isResizable:E=!0,resizeHandles:T=["se"],resizeHandle:P,isDroppable:C=!1,useCSSTransforms:R=!0,transformScale:A=1,autoSize:$,className:H,style:F,innerRef:N,onDragStart:z,onDrag:L,onDragStop:B,onResizeStart:M,onResize:G,onResizeStop:j,onDrop:I,onDropDragOver:U}=t;let q=x===void 0?"vertical":x;y===!1&&(q=null);const X={enabled:b,bounded:v,handle:S,cancel:_},K={enabled:E,handles:T,handleComponent:P},ee={enabled:C};let se;R?A!==1?se=MO(A):se=k3:se=TO;const ge=Wb(q,g,w);return f.jsx(M9,{width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,rowHeight:u,maxRows:d,margin:h,containerPadding:p,compactor:ge,dragConfig:X,resizeConfig:K,dropConfig:ee,positionStrategy:se,droppingItem:m,autoSize:$,className:H,style:F,innerRef:N,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,onDragStart:z,onDrag:L,onDragStop:B,onResizeStart:M,onResize:G,onResizeStop:j,onDrop:I,onDropDragOver:U,children:e})}iE.displayName="ResponsiveReactGridLayout";var I9=iE,R9="react-grid-layout";function A9(t){function e(n){const{measureBeforeMount:s=!1,className:r,style:i,...o}=n,[a,l]=k.useState(1280),[c,u]=k.useState(!1),d=k.useRef(null),h=k.useRef(null);return k.useEffect(()=>{u(!0),h.current=new ResizeObserver(m=>{if(d.current instanceof HTMLElement&&m[0]){const w=m[0].contentRect.width;l(w)}});const p=d.current;return p instanceof HTMLElement&&h.current.observe(p),()=>{var m;p instanceof HTMLElement&&h.current&&h.current.unobserve(p),(m=h.current)==null||m.disconnect()}},[]),s&&!c?f.jsx("div",{className:ru(r,R9),style:i,ref:d}):f.jsx(t,{innerRef:d,className:r,style:i,...o,width:a})}return e.displayName=`WidthProvider(${t.displayName||t.name||"Component"})`,e}const rg=[[0,0,8,16],[8,0,2,16],[0,31,3,8],[0,16,3,15],[3,16,7,7],[3,23,7,8],[5,31,7,6],[3,39,7,6]],p2=0,N9=7;function O9(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""}function D9(t,e){return Math.floor(Math.random()*(e-t+1))+t}function L9(t){const e=Math.ceil(Math.random()*4)+1;return{x:D9(0,5)*2%12,y:Math.floor(t/6)*e,w:2,h:e,i:t.toString(),static:Math.random()<.05}}function j9(t,e){const[n,s,r,i]=e;return{x:n,y:s,w:r,h:i,i:t.toString(),static:!0}}function ig(t,e=9){const n=[];for(let s=0;s<e;s++)s<t.length?n.push(j9(s,t[s])):n.push(L9(s));return n}function F9(t,e){const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const r of n){const i=t[r],o=e[r];if(!i||!o){if(i!==o)return!1;continue}if(i.length!==o.length)return!1;for(let a=0;a<i.length;a++){const l=i[a],c=o[a];if(l.x!==c.x||l.y!==c.y||l.w!==c.w||l.h!==c.h)return!1}}return!0}function og(t,e){const n={};for(const s in t){const r=t[s];r&&(n[s]=r.map(i=>({...i,static:e})))}return n}const z9=A9(I9),If=class If extends ae.Component{constructor(n){super(n);ie(this,"isUpdatingLayout",!1);ie(this,"domCache",null);ie(this,"lastLayoutKey","");ie(this,"handleResponsiveLayoutChange",(n,s)=>{const r=Array.isArray(n)?n:[n],i=s;this.onLayoutChange(r,i)});ie(this,"generateNewLayout",()=>{const n=ig(rg),s=this.props.allStatic??this.state.allStatic,r=n.map(i=>({...i,static:s}));this.domCache=null,this.lastLayoutKey="",this.setState({layouts:{lg:r}})});this.state={currentBreakpoint:"lg",compactType:n.compactType??"vertical",mounted:!1,layouts:{lg:n.initialLayout||ig(rg)},allStatic:n.allStatic??!0},this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onCompactTypeChange=this.onCompactTypeChange.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.onNewLayout=this.onNewLayout.bind(this),this.onToggleStatic=this.onToggleStatic.bind(this)}componentDidMount(){this.setState({mounted:!0})}generateDOM(){const n=this.state.layouts.lg||[],{slotContent:s=[]}=this.props,r=this.props.allStatic??this.state.allStatic,i=`${n.length}-${r}-${s.length}`;if(this.domCache&&this.lastLayoutKey===i)return this.domCache;const o=[];for(let a=0;a<n.length;a++){const l=n[a],c=a>=p2&&a<=N9,u=a-p2,d=c&&s[u]?s[u]:null,h=l.static??r;o.push(f.jsx("div",{className:h?"static":"",children:d?f.jsx("div",{className:"external-slot-content",children:d}):h?f.jsxs("span",{className:"text",title:"This item is static and cannot be removed or resized.",children:["Static - ",a]}):f.jsx("span",{className:"text",children:a})},l.i||a.toString()))}return this.domCache=o,this.lastLayoutKey=i,o}onBreakpointChange(n){this.setState({currentBreakpoint:n})}onCompactTypeChange(){if(this.props.onCompactTypeChange)this.props.onCompactTypeChange();else{const{compactType:n}=this.state,s=n==="horizontal"?"vertical":n==="vertical"?null:"horizontal";this.setState({compactType:s})}}onLayoutChange(n,s){if(this.isUpdatingLayout){this.props.onLayoutChange(n,s);return}const r=this.props.allStatic??this.state.allStatic;if(r){this.props.onLayoutChange(n,s);return}const i=og(s,r);!F9(this.state.layouts,i)&&(this.domCache=null,this.lastLayoutKey="",this.isUpdatingLayout=!0,this.setState({layouts:i},()=>{this.isUpdatingLayout=!1})),this.props.onLayoutChange(n,i)}onNewLayout(){this.props.onNewLayout?this.props.onNewLayout():this.generateNewLayout()}onToggleStatic(){if(this.props.onToggleStatic)this.props.onToggleStatic();else{const n=!this.state.allStatic,s=og(this.state.layouts,n);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:n,layouts:s})}}componentDidUpdate(n){if(n.compactType!==this.props.compactType&&this.props.compactType!==void 0&&this.setState({compactType:this.props.compactType}),n.allStatic!==this.props.allStatic&&this.props.allStatic!==void 0){const s=og(this.state.layouts,this.props.allStatic);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:this.props.allStatic,layouts:s})}n.slotContent!==this.props.slotContent&&(this.domCache=null,this.lastLayoutKey="")}render(){const{cols:n}=this.props,s=n||If.defaultProps.cols||{},r=this.props.compactType??this.state.compactType;return f.jsxs("div",{children:[f.jsxs("div",{children:["Current Breakpoint: ",this.state.currentBreakpoint," (",s[this.state.currentBreakpoint]," columns)"]}),f.jsxs("div",{children:["Compaction type: ",O9(r)||"No Compaction"]}),f.jsx(z9,{...this.props,layouts:this.state.layouts,onBreakpointChange:this.onBreakpointChange,onLayoutChange:this.handleResponsiveLayoutChange,measureBeforeMount:!1,useCSSTransforms:this.state.mounted,compactType:r,preventCollision:!r,children:this.generateDOM()})]})}};ie(If,"defaultProps",{className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},initialLayout:ig(rg)});let zm=If;function oE(){const t=document.getElementById("tradingview-widget-script");t&&t.parentNode&&t.parentNode.removeChild(t)}function B9(){return new Promise((t,e)=>{if(typeof window.TradingView<"u"){t();return}oE();const n=document.createElement("script");n.id="tradingview-widget-script",n.src=L7,n.async=!0,n.onload=()=>{typeof window.TradingView<"u"?t():e(new Error("TradingView script loaded but TradingView object not found"))},n.onerror=()=>{e(new Error("Failed to load TradingView script"))},document.head.appendChild(n)})}function $9(t){if(typeof window.TradingView>"u")throw new Error("TradingView is not loaded. Call loadTradingViewScript() first.");const e={autosize:t.autosize!==!1,symbol:t.symbol,interval:t.interval,timezone:t.timezone||"Etc/UTC",theme:"dark",style:"1",locale:t.locale||"en",toolbar_bg:"#1a1a1a",enable_publishing:t.enablePublishing||!1,hide_top_toolbar:t.hideTopToolbar||!1,hide_legend:t.hideLegend||!1,save_image:!1,container_id:t.containerId,hide_volume:t.hideVolume||!1,studies:t.studies||["RSI@tv-basicstudies","MASimple@tv-basicstudies"]};return new window.TradingView.widget(e)}function U9(){return`tradingview-widget-container-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function W9({symbol:t=O7,interval:e=D7,isCollapsed:n=!1,className:s=""}){const r=k.useRef(null),i=k.useRef(null),o=k.useRef(U9());return k.useEffect(()=>{if(n||!r.current)return;r.current&&(r.current.id=o.current);let a=!0;return B9().then(()=>{if(!a||!r.current)return;const l={symbol:t,interval:e,containerId:o.current};i.current=$9(l)}).catch(l=>{console.error("Failed to load TradingView widget:",l)}),()=>{a=!1,i.current&&(i.current=null)}},[t,e,n]),k.useEffect(()=>()=>{oE()},[]),n?f.jsx("div",{className:`tradingview-widget-container ${s}`}):f.jsx("div",{className:`tradingview-widget-wrapper ${s}`,children:f.jsx("div",{ref:r,id:o.current,className:"tradingview-widget-container"})})}function Eo(t,e=2,n=2,s="0.00"){return t==null||isNaN(t)?s:t.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:n})}function Bm(t){return t==null||isNaN(t)?"--":Eo(t,2,2,"--")}function ag(t){return t==null||isNaN(t)?"--":Eo(t,2,8,"--")}function aE(t){return t==null||isNaN(t)?"0.000":Eo(t,3,3,"0.000")}function H9(t){return t==null||isNaN(t)?"0":Eo(t,3,8,"0")}function V9(t){return t==null||isNaN(t)?"0.00":Eo(t,2,2,"0.00")}function Y9(t){return t==null||isNaN(t)?"0.00":Eo(t,2,2,"0.00")}function Qt(t){return t==null||isNaN(t)?"0.00":Eo(t,2,2,"0.00")}function G9(t){return t==null||isNaN(t)?"0%":`${(t*100).toFixed(2)}%`}function lE(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return Ce(t).toFixed(8).replace(/\.?0+$/,"")}catch{return"0"}}function K9(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"--";try{const n=lE(t).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")}catch{return"--"}}function q9(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return lE(t)}catch{return"0"}}function X9(t,e,n){return e!==t?f.jsx("span",{style:{fontSize:"0.7rem",opacity:.5,marginLeft:"0.25rem"},children:""}):f.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"0.25rem"},children:n==="asc"?"":""})}function Lu({message:t="Loading..."}){return f.jsx("div",{className:"message loading",children:t})}function ju({error:t}){return f.jsxs("div",{className:"message error",children:["Error: ",t]})}function el({message:t}){return f.jsx("div",{className:"message empty",children:t})}function cE({message:t}){return f.jsx("div",{className:"message warning",children:t})}function uE({isConnected:t,connectedText:e=" LIVE",disconnectedText:n=" OFFLINE"}){return f.jsx("div",{className:"status-indicator",children:f.jsx("span",{className:`status-dot ${t?"connected":"disconnected"}`,children:t?e:n})})}function Fu({title:t,children:e}){return f.jsxs("div",{className:"layout-header",children:[f.jsx("div",{className:"layout-header-title",children:t}),e&&f.jsx("div",{className:"layout-header-actions",children:e})]})}function Dt({field:t,currentSortField:e,sortDirection:n,onSort:s,children:r,center:i=!1}){return f.jsxs("div",{className:`table-header-cell ${i?"center":""}`,onClick:()=>s(t),children:[r,X9(t,e,n)]})}function dE({children:t,center:e=!1}){return f.jsx("div",{className:`table-header-cell ${e?"center":""}`,children:t})}function Q9({onClick:t,disabled:e}){return console.log("[CancelButton] Rendering",{disabled:e,hasOnClick:!!t}),f.jsx("button",{onClick:n=>{console.log("[CancelButton] Button clicked",{disabled:e,event:n}),!e&&t?t(n):console.warn("[CancelButton] Click ignored - button is disabled",{disabled:e})},onMouseDown:n=>{console.log("[CancelButton] Mouse down",{disabled:e,event:n})},className:"btn btn-danger",disabled:e,style:{pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer"},children:"Cancel"})}function J9({onClick:t}){return f.jsx("button",{onClick:t,className:"btn btn-success",children:"Close"})}function Z9({baseURL:t,wsURL:e,marketId:n,maxDepth:s=T7,height:r=C7,authToken:i,walletAddress:o,deviceID:a}){const{orderbook:l,loading:c,error:u,isConnected:d,wsError:h}=fR({baseURL:t,wsURL:e,marketId:n,maxDepth:s,authToken:i,walletAddress:o,deviceID:a}),p=k.useMemo(()=>Math.max(l.asks.length>0?l.asks[l.asks.length-1].cumulative:0,l.bids.length>0?l.bids[l.bids.length-1].cumulative:0),[l.asks,l.bids]),m=k.useCallback(g=>Bm(g),[]),x=k.useCallback(g=>aE(g),[]),w=k.useCallback(g=>p===0?0:g/p*100,[p]);return c?f.jsx(Lu,{message:"Loading orderbook..."}):u?f.jsx(ju,{error:u}):f.jsxs("div",{className:"layout-container",style:{height:r},children:[h&&(l.asks.length>0||l.bids.length>0)&&f.jsxs("div",{className:"orderbook-ws-warning",children:[f.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),f.jsx("span",{className:"orderbook-ws-warning-text",children:h})]}),f.jsx(Fu,{title:f.jsx(uE,{isConnected:d}),children:f.jsxs("div",{children:["Depth: ",s]})}),l.midPrice&&f.jsxs("div",{className:"orderbook-mid-price",children:[f.jsx("div",{className:"orderbook-mid-price-value",children:m(l.midPrice)}),l.spread!==void 0&&f.jsxs("div",{className:"orderbook-mid-price-spread",children:["Spread: ",m(l.spread)]})]}),f.jsxs("div",{className:"orderbook-content",children:[f.jsxs("div",{className:"orderbook-section",children:[l.asks.map((g,y)=>{const b=w(g.cumulative),v=g.flash==="up"?"flash-up":g.flash==="down"?"flash-down-ask":"";return f.jsxs("div",{className:`orderbook-level ask ${v}`,style:{borderBottom:y<l.asks.length-1?void 0:"none"},children:[f.jsx("div",{className:"orderbook-depth-bar ask",style:{width:`${b}%`}}),f.jsx("div",{className:"orderbook-level-content ask",children:m(g.price)}),f.jsx("div",{className:"orderbook-level-content right",children:x(g.size)}),f.jsx("div",{className:"orderbook-depth-indicator",children:f.jsx("div",{className:"orderbook-depth-line ask"})})]},`ask-${g.price}-${y}`)}),l.asks.length===0&&f.jsx(el,{message:"No ask orders"})]}),f.jsxs("div",{className:"orderbook-section bids",children:[l.bids.map((g,y)=>{const b=w(g.cumulative),v=g.flash==="up"?"flash-up":g.flash==="down"?"flash-down-bid":"";return f.jsxs("div",{className:`orderbook-level bid ${v}`,style:{borderBottom:y<l.bids.length-1?void 0:"none"},children:[f.jsx("div",{className:"orderbook-depth-bar bid",style:{width:`${b}%`}}),f.jsx("div",{className:"orderbook-level-content bid",children:m(g.price)}),f.jsx("div",{className:"orderbook-level-content right",children:x(g.size)}),f.jsx("div",{className:"orderbook-depth-indicator",children:f.jsx("div",{className:"orderbook-depth-line bid"})})]},`bid-${g.price}-${y}`)}),l.bids.length===0&&f.jsx(el,{message:"No bid orders"})]})]}),f.jsxs("div",{className:"orderbook-footer",children:[f.jsxs("div",{className:"orderbook-footer-legend",children:[f.jsx("div",{className:"orderbook-footer-bar bid"}),f.jsx("span",{className:"color-text-muted",children:(()=>{const g=l.bids.length>0?l.bids[l.bids.length-1].cumulative:0,y=l.asks.length>0?l.asks[l.asks.length-1].cumulative:0,b=g+y;return b>0?`${(g/b*100).toFixed(0)}%`:"0%"})()})]}),f.jsxs("div",{className:"orderbook-footer-legend",children:[f.jsx("div",{className:"orderbook-footer-bar ask"}),f.jsx("span",{className:"color-text-muted",children:(()=>{const g=l.bids.length>0?l.bids[l.bids.length-1].cumulative:0,y=l.asks.length>0?l.asks[l.asks.length-1].cumulative:0,b=g+y;return b>0?`${(y/b*100).toFixed(0)}%`:"0%"})()})]})]})]})}function eL({baseURL:t=Iu,wsURL:e=Q5,marketId:n=E7,symbol:s,limit:r=P7,authToken:i,walletAddress:o,deviceID:a}){const{lastPrice:l,displayPrice:c,loading:u,error:d,isConnected:h,priceChange:p}=r0({baseURL:t,wsURL:e,marketId:n,symbol:s,limit:r,authToken:i,walletAddress:o,deviceID:a}),[m,x]=k.useState([]),[w,g]=k.useState(!1),y=k.useRef(null),b=k.useRef(!1),v=k.useRef(null),S=k.useCallback(async()=>{if(!y.current||!n){console.debug("[TradePrice] fetchRecentTrades skipped: missing client or marketId");return}if(b.current){console.debug("[TradePrice] fetchRecentTrades skipped: already fetching");return}console.debug("[TradePrice] Starting fetchRecentTrades"),b.current=!0,g(!0);try{const L=await y.current.getRecentTrades(n,20);if(L&&Array.isArray(L)&&L.length>0){const B=j=>{if(!j)return Date.now();const I=typeof j=="string"?Number(j):j;return isNaN(I)||I<=0?Date.now():I<9466848e5?I*1e3:I},G=[...L].sort((j,I)=>{const U=B(j.timestamp||j.time);return B(I.timestamp||I.time)-U}).map(j=>({time:B(j.timestamp||j.time),size:typeof j.quantity=="string"?Ce(j.quantity):typeof j.size=="string"?Ce(j.size):j.quantity||j.size||0,price:typeof j.price=="string"?Ce(j.price):j.price||0,is_buyer_maker:j.is_buyer_maker!==void 0?j.is_buyer_maker:j.side!=="sell"}));x(G),console.debug("[TradePrice] fetchRecentTrades completed successfully")}else x([]),console.debug("[TradePrice] fetchRecentTrades: no trades returned")}catch(L){console.error("[TradePrice] Failed to fetch recent trades:",L),x([])}finally{console.debug("[TradePrice] fetchRecentTrades finished, clearing loading state"),g(!1),b.current=!1}},[n]);k.useEffect(()=>{if(!n){console.debug("[TradePrice] Initialization skipped: no marketId");return}console.debug("[TradePrice] Initializing trades fetch for marketId:",n),b.current=!1,g(!1),y.current=new vn({baseURL:t});const L=setTimeout(()=>{y.current&&n&&!b.current?(console.debug("[TradePrice] Executing initial fetchRecentTrades"),S()):console.debug("[TradePrice] Initial fetch skipped:",{hasClient:!!y.current,hasMarketId:!!n,isFetching:b.current})},100);return()=>{console.debug("[TradePrice] Cleaning up trades fetch effect"),clearTimeout(L),b.current=!1,g(!1)}},[t,n]);const _=k.useRef(""),E=k.useRef(null),T=k.useCallback(()=>{const L=v.current;if(!L)return;const B=L.parentElement;if(!B)return;const M=L.textContent||"";if(!M)return;const G=window.getComputedStyle(B),j=parseFloat(G.paddingLeft)+parseFloat(G.paddingRight),I=B.clientWidth-j;let U=12,q=48,X=U;const K=document.createElement("div");for(K.style.position="absolute",K.style.visibility="hidden",K.style.whiteSpace="nowrap",K.style.fontFamily=window.getComputedStyle(L).fontFamily,K.style.fontWeight=window.getComputedStyle(L).fontWeight,document.body.appendChild(K);U<=q;){const se=Math.floor((U+q)/2);K.style.fontSize=`${se}px`,K.textContent=M,K.offsetWidth<=I?(X=se,U=se+1):q=se-1}document.body.removeChild(K);const ee=parseFloat(window.getComputedStyle(L).fontSize);Math.abs(ee-X)>.5&&(L.style.fontSize=`${X}px`)},[]);k.useEffect(()=>{if(c==null)return;const L=ag(c);if(L===_.current)return;_.current=L,E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{T()},150);let B;const M=()=>{clearTimeout(B),B=window.setTimeout(()=>{E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{T()},150)},100)};return window.addEventListener("resize",M),()=>{E.current!==null&&clearTimeout(E.current),clearTimeout(B),window.removeEventListener("resize",M)}},[c,T]);const P=L=>{if(!L||isNaN(L)||L<=0)return"Invalid";let B=L;B<9466848e5&&(B=B*1e3);const M=new Date(B);return isNaN(M.getTime())?"Invalid":M.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},C=L=>L?"#51cf66":"#ff6b6b",R=L=>L?"BUY":"SELL",A=L=>L?"":"";if(u)return f.jsx(Lu,{message:"Loading trade price..."});if(d)return f.jsx(ju,{error:d});if(c==null)return f.jsx(el,{message:"No trade data available"});const $=l&&l.is_buyer_maker!==void 0,H=$?C(l.is_buyer_maker):"#888",F=$?R(l.is_buyer_maker):"N/A",N=$?A(l.is_buyer_maker):"",z=p==="up"?"flash-price-up":p==="down"?"flash-price-down":"";return f.jsxs("div",{className:"layout-container trade-price-container",children:[f.jsx(Fu,{title:f.jsx(uE,{isConnected:h}),children:f.jsx("div",{children:"Last Trade Price"})}),f.jsxs("div",{className:`trade-price-main ${z}`,children:[f.jsx("div",{ref:v,className:"trade-price-value",style:{color:H},children:ag(c)}),f.jsxs("div",{className:"trade-price-side",style:{color:H},children:[f.jsx("span",{children:N}),f.jsx("span",{children:F})]})]}),f.jsx("div",{className:"trade-price-trades-table",children:w?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#888"},children:"Loading trades..."}):m.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#888"},children:"No trades available"}):f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{borderBottom:"1px solid #2a2e39",color:"#888"},children:[f.jsx("th",{style:{textAlign:"left",padding:"0.5rem",fontWeight:"500"},children:"Time"}),f.jsx("th",{style:{textAlign:"right",padding:"0.5rem",fontWeight:"500"},children:"Size"}),f.jsx("th",{style:{textAlign:"right",padding:"0.5rem",fontWeight:"500"},children:"Price"})]})}),f.jsx("tbody",{children:m.map((L,B)=>{const M=L.is_buyer_maker?"#51cf66":"#ff6b6b";return f.jsxs("tr",{style:{borderBottom:"1px solid #2a2e39"},children:[f.jsx("td",{style:{padding:"0.5rem",color:"#d1d4dc"},children:P(L.time)}),f.jsx("td",{style:{padding:"0.5rem",textAlign:"right",color:"#d1d4dc"},children:H9(L.size)}),f.jsx("td",{style:{padding:"0.5rem",textAlign:"right",color:M,fontWeight:"500"},children:ag(L.price)})]},B)})})]})})]})}const tL=k.forwardRef(function({baseURL:e=Iu,wsURL:n=Q5,mnemonic:s=M7,marketId:r,marketSymbol:i,selectedBucketBalance:o,selectedBucketId:a,onLeverageClick:l},c){const{selectedMarketId:u,selectedMarketSymbol:d}=_o({baseURL:e,autoFetchMarkets:!0}),h=r||u||"",p=i||d||"Market",{lastPrice:m}=r0({baseURL:e,wsURL:n,marketId:h}),x=(m==null?void 0:m.price)||0,{orderType:w,setOrderType:g,fundPercent:y,sizeInput:b,price:v,leverage:S,positionMode:_,marginMode:E,availableBalance:T,currentPrice:P,isReady:C,loading:R,result:A,setFundPercent:$,setSizeInput:H,setPrice:F,setMarginMode:N,setLeverage:z,placeBuyOrder:L,placeSellOrder:B,calculateValue:M,calculateMargin:G,calculateSizeUSD:j,getOrderPrice:I,getAvailableTradeAmount:U}=hR({baseURL:e,mnemonic:s,marketId:h,selectedBucketBalance:o,tradePrice:x}),q=k.useMemo(()=>I(),[I,w,v,P]),X=k.useMemo(()=>U(),[U,T,S]),K=k.useMemo(()=>M(),[M,b,y,T,q,S]),ee=k.useMemo(()=>G(),[G,S,K]),se=k.useMemo(()=>Ce(K),[K]),ge=k.useMemo(()=>Ce(ee),[ee]),Ue=k.useMemo(()=>({minimumFractionDigits:Ao,maximumFractionDigits:j7}),[]),Pe=k.useMemo(()=>P.toFixed(Ao),[P]),ke=k.useMemo(()=>a?`Available in ${a}`:"Available to Trade",[a]),Te=k.useCallback(()=>{N(E===nu?B7:nu)},[E,N]),ft=k.useCallback(()=>{g(Tm)},[g]),D=k.useCallback(()=>{g(Ip)},[g]),Q=k.useCallback(()=>{$(Math.min(Tw,y+Mp))},[y,$]),oe=k.useCallback(()=>{$(Math.max(Pw,y-Mp))},[y,$]),de=k.useCallback(O=>{const ne=parseInt(O.target.value);$(ne)},[$]),ve=k.useCallback(O=>{F(O.target.value)},[F]),ye=k.useCallback(O=>{const ne=parseFloat(O.target.value);H(isNaN(ne)?0:ne)},[H]),W=k.useCallback(()=>{Ie.info("Submission of trade transaction",{description:"Processing your buy order..."}),L()},[L]),le=k.useCallback(()=>{Ie.info("Submission of trade transaction",{description:"Processing your sell order..."}),B()},[B]);return k.useImperativeHandle(c,()=>({leverage:S,setLeverage:z,calculateMaxRatio:O=>{const ne=j();I();const re=ne;return T>0&&re>0?(re/T).toFixed(Ao):O.toFixed(Ao)}}),[S,z,j,I,T]),k.useEffect(()=>{if(A)if(A.success){const O=A.orderId?`Order ID: ${A.orderId}`:A.message||"Order placed successfully";Ie.success("Order Placed Successfully",{description:O})}else A.error&&Ie.error("Order Failed",{description:A.error})},[A]),f.jsxs("div",{className:"component",children:[f.jsx("h2",{children:p}),f.jsxs("div",{className:"trade-op-config",children:[f.jsxs("div",{className:"trade-op-badge",children:[f.jsx("span",{className:"trade-op-badge-label",children:_}),f.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),f.jsxs("div",{className:"trade-op-badge",onClick:Te,style:{cursor:"pointer"},children:[f.jsx("span",{className:"trade-op-badge-label",children:E}),f.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),f.jsxs("div",{className:"trade-op-badge",onClick:l,style:{cursor:"pointer"},children:[f.jsxs("span",{className:"trade-op-badge-label",children:[S,"x"]}),f.jsx("span",{className:"trade-op-info-icon",children:"i"})]})]}),f.jsxs("div",{className:"trade-op-order-type-selector",children:[f.jsx("button",{onClick:ft,className:`btn-toggle ${w===Tm?"active":""}`,children:"MARKET"}),f.jsx("button",{onClick:D,className:`btn-toggle ${w===Ip?"active":""}`,children:"LIMIT"})]}),w===Ip&&f.jsx("div",{className:"trade-op-form-group",children:f.jsxs("div",{className:"trade-op-form-row",children:[f.jsx("label",{htmlFor:"price",className:"trade-op-label",children:"Price:"}),f.jsx("input",{id:"price",type:"number",value:v,onChange:ve,placeholder:Pe,step:N7,min:Mw})]})}),f.jsxs("div",{className:"trade-op-form-group",children:[f.jsxs("div",{className:"trade-op-form-row",style:{marginBottom:"0.5rem"},children:[f.jsx("label",{htmlFor:"size",className:"trade-op-label",children:"Size:"}),f.jsxs("div",{className:"trade-op-size-controls",children:[f.jsx("input",{id:"size",type:"number",step:"any",value:b===0?"":b,onChange:ye,placeholder:"0",min:Mw,max:X,className:"trade-op-input"}),f.jsxs("div",{className:"trade-op-size-buttons",children:[f.jsx("button",{onClick:Q,className:"btn-small",children:""}),f.jsx("button",{onClick:oe,className:"btn-small",children:""})]})]})]}),f.jsx("input",{type:"range",min:Pw,max:Tw,value:y,onChange:de,step:Mp,style:{width:"100%"}}),f.jsxs("div",{className:"trade-op-slider-labels",children:[f.jsx("span",{children:"0"}),f.jsx("span",{children:"20"}),f.jsx("span",{children:"40"}),f.jsx("span",{children:"60"}),f.jsx("span",{children:"80"}),f.jsx("span",{children:"100"})]})]}),f.jsxs("div",{className:"trade-op-action-panel",children:[f.jsxs("div",{children:[f.jsx("div",{className:"trade-op-panel-title buy",children:"BUY"}),f.jsxs("div",{className:"trade-op-panel-size",children:["BTC ",b.toFixed(3),"/100.000"]}),f.jsx("button",{onClick:W,disabled:R||!C||K<=0,className:"btn-buy",children:R?"PLACING...":"BUY LONG"}),f.jsxs("div",{className:"trade-op-panel-details",children:[f.jsxs("div",{children:["Value ",se.toFixed(2)]}),f.jsxs("div",{children:["Margin ",ge.toFixed(2)]})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"trade-op-panel-title sell",children:"SELL"}),f.jsxs("div",{className:"trade-op-panel-size",children:[b.toFixed(3),"/100.000 BTC"]}),f.jsx("button",{onClick:le,disabled:R||!C||K<=0,className:"btn-sell",children:R?"PLACING...":"SELL SHORT"}),f.jsxs("div",{className:"trade-op-panel-details",children:[f.jsxs("div",{children:["Value ",se.toFixed(Ao)]}),f.jsxs("div",{children:["Margin ",ge.toFixed(Ao)]})]})]})]}),f.jsx("div",{className:"trade-op-info-panel",children:f.jsxs("div",{children:[f.jsx("label",{children:ke}),f.jsxs("div",{className:"trade-op-available-funds",children:[X.toLocaleString("en-US",Ue)," ","USDC"]})]})})]})});async function nL(t,e=3,n=1e3){let s=null;for(let r=0;r<=e;r++)try{return await t()}catch(i){if(s=i instanceof Error?i:new Error(String(i)),r<e){const o=n*Math.pow(2,r);await new Promise(a=>setTimeout(a,o))}}throw s||new Error("Retry failed")}function hE(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(null),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(null),h=k.useRef(null),p=k.useRef(!1),m=k.useRef(t);m.current=t;const x=k.useCallback(b=>({id:b.id||b.orderId||b.order_id,orderId:b.orderId||b.order_id||b.id,marketId:b.marketId||b.market_id||b.assetPair,symbol:b.symbol||b.pair||`Market-${b.marketId||b.market_id||"N/A"}`,side:b.side||(b.direction==="LONG"?"LONG":b.direction==="SHORT"?"SHORT":void 0),type:b.type||b.orderType||b.order_type,quantity:b.quantity||b.size||b.amount||0,price:b.price||b.limitPrice||b.limit_price||0,filledQuantity:b.filledQuantity||b.filled_quantity||b.filled||0,remainingQuantity:b.remainingQuantity||b.remaining_quantity||b.remaining||0,status:b.status||b.orderStatus||b.order_status||"PENDING",timeInForce:b.timeInForce||b.time_in_force||b.tif,createdAt:b.createdAt||b.created_at||b.timestamp,updatedAt:b.updatedAt||b.updated_at}),[]),w=k.useCallback(async()=>{if(!u.current)return;const b=m.current;if(!b.walletAddress||b.walletAddress.trim()===""){a(null),s([]),i(!1);return}a(null);try{const v=await nL(()=>u.current.getOrders(b.walletAddress),3,1e3),S=Array.isArray(v)?v:(v==null?void 0:v.orders)||[];if(Array.isArray(S)){const _=S.map(x);s(E=>{if(E.length!==_.length)return _;const T=JSON.stringify(E),P=JSON.stringify(_);return T===P?E:_})}else s(_=>_.length===0?_:[])}catch(v){const S=v instanceof Error?v.message:"Failed to load orders";a(S),console.error("Failed to fetch orders after retries:",v)}finally{i(!1)}},[x]),g=k.useCallback(b=>b.id||b.orderId,[]),y=k.useCallback(b=>{let v=[];if(Array.isArray(b)?v=b:b.orders&&Array.isArray(b.orders)?v=b.orders:b&&typeof b=="object"&&(b.id||b.orderId||b.order_id?v=[b]:v=b.order||b.orderList||[]),v.length>0||b&&typeof b=="object"&&"count"in b&&b.count===0){const S=v.map(x);s(_=>{const E=new Map;_.forEach(R=>{const A=g(R);A&&E.set(A,R)}),S.forEach(R=>{var F;const A=g(R);if(!A){console.warn("Received order without ID, skipping:",R);return}const $=(F=R.status)==null?void 0:F.toUpperCase();$==="FILLED"||$==="CANCELLED"||$==="REJECTED"||$==="EXPIRED"||$==="CLOSED"||$==="DONE"?E.delete(A):E.set(A,R)});const T=Array.from(E.values()).filter(R=>g(R));if(_.length!==T.length)return T;const P=JSON.stringify(_),C=JSON.stringify(T);return P===C?_:T})}},[x,g]);return k.useEffect(()=>{if(!t.walletAddress||t.walletAddress.trim()===""){i(!1),a(null),s([]),d.current&&(d.current.disconnect(),d.current=null),h.current!==null&&(clearInterval(h.current),h.current=null);return}const b=new vn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=b,w(),e&&t.wsURL){const v=new ko({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=v;const S=()=>{v.isConnected()&&!p.current&&(v.subscribeOrders(y),p.current=!0)};v.connect().then(()=>{c(!0),S()}).catch(T=>{console.error("Failed to connect WebSocket:",T),c(!1),t.refreshInterval&&t.refreshInterval>0&&(h.current=window.setInterval(()=>{w()},t.refreshInterval))});let _=null;const E=v.wsClient;return E&&(_=E.onStateChange(T=>{T===Je.Connected?(c(!0),p.current&&S(),h.current!==null&&(clearInterval(h.current),h.current=null)):(T===Je.Disconnected||T===Je.Reconnecting)&&(c(!1),p.current=!1,t.refreshInterval&&t.refreshInterval>0&&h.current===null&&(h.current=window.setInterval(()=>{w()},t.refreshInterval)))})),()=>{_&&_(),h.current!==null&&(clearInterval(h.current),h.current=null),d.current&&(d.current.unsubscribeOrders(y),d.current.disconnect())}}else return t.refreshInterval&&t.refreshInterval>0&&(h.current=window.setInterval(()=>{w()},t.refreshInterval)),()=>{h.current!==null&&(clearInterval(h.current),h.current=null)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{orders:n,loading:r,error:o,isConnected:l,refresh:w}}function sL({baseURL:t=Iu,wsURL:e,authToken:n,walletAddress:s,mnemonic:r,height:i=_7,refreshInterval:o=Tb}){const{orders:a,loading:l,error:c,refresh:u}=hE({baseURL:t,wsURL:e,authToken:n,walletAddress:s,refreshInterval:o}),d=k.useRef(null),[h,p]=k.useState(null);ae.useEffect(()=>{console.log("[PendingOrders] Component rendered with props",{hasMnemonic:!!r,mnemonicLength:r==null?void 0:r.length,mnemonicType:typeof r,walletAddress:s,ordersCount:a==null?void 0:a.length,baseURL:t})},[r,s,a==null?void 0:a.length,t]);const{getSymbolByMarketId:m}=_o({baseURL:t,sessionToken:n,autoFetchMarkets:!1}),[x,w]=k.useState(Dr),[g,y]=k.useState(null),[b,v]=k.useState(da),S=k.useMemo(()=>a.filter(N=>{const z=(N.status||"").toUpperCase(),L=z.startsWith("ORDER_STATUS_")?z:`ORDER_STATUS_${z}`;return x===Dr?Kw.some(B=>z===B.toUpperCase()||L===B.toUpperCase()):!Kw.some(B=>z===B.toUpperCase()||L===B.toUpperCase())}),[a,x]),_=k.useMemo(()=>g?[...S].sort((N,z)=>{let L=0,B=0;switch(g){case Bw:L=N.symbol||"",B=z.symbol||"";break;case $w:L=N.side||"",B=z.side||"";break;case Uw:L=H(N.type),B=H(z.type);break;case Ww:L=N.quantity||0,B=z.quantity||0;break;case Hw:L=N.price||0,B=z.price||0;break;case Vw:L=N.filledQuantity||0,B=z.filledQuantity||0;break;case Yw:L=N.status||"",B=z.status||"";break}if(typeof L=="string"&&typeof B=="string")return b===ei?L.localeCompare(B):B.localeCompare(L);const M=Number(L),G=Number(B);return b===ei?M-G:G-M}):S,[S,g,b]),E=N=>{g===N?v(b===ei?da:ei):(y(N),v(da))},T=N=>{const z=(N.side||"").toUpperCase();return z===Gr||z===Zh},P=N=>{const z=(N.side||"").toUpperCase();return T(N)?z===md||z===Gr?Gr:Zh:z===Gr||z===md?md:U7},C=K9,R=q9,A=N=>{const z=(N||"").toUpperCase(),L={ORDER_STATUS_PENDING:{short:"P",full:"Pending",color:Ap},PENDING:{short:"P",full:"Pending",color:Ap},ORDER_STATUS_OPEN:{short:"O",full:"Open",color:Np},OPEN:{short:"O",full:"Open",color:Np},NEW:{short:"N",full:"New",color:Np},ORDER_STATUS_FILLED:{short:"F",full:"Filled",color:qw},FILLED:{short:"F",full:"Filled",color:qw},ORDER_STATUS_CANCELED:{short:"C",full:"Canceled",color:Op},CANCELED:{short:"C",full:"Canceled",color:Op},CANCELLED:{short:"C",full:"Canceled",color:Op},ORDER_STATUS_REJECTED:{short:"R",full:"Rejected",color:Xw},REJECTED:{short:"R",full:"Rejected",color:Xw},PARTIALLY_FILLED:{short:"PF",full:"Partially Filled",color:Ap}};if(L[z])return L[z];const B=z.startsWith("ORDER_STATUS_")?z:`ORDER_STATUS_${z}`;return L[B]?L[B]:{short:"?",full:N||dR,color:Z7}},$=N=>N===Gr||N===md?eR:tR,H=N=>{if(!N)return uR;const z=N.toUpperCase();return z===z7||z===Jw?Jw:z===F7||z===Zw?Zw:z.startsWith(Iw)?z.replace(Iw,""):z},F=async N=>{var B;console.log("[PendingOrders.handleCancelOrder] Function called",{order:N,orderId:N.orderId||N.id,marketId:N.marketId,hasMnemonic:!!r,mnemonicType:typeof r,mnemonicLength:r==null?void 0:r.length,timestamp:new Date().toISOString()});const z=N.orderId||N.id,L=N.marketId;if(!z){console.error("Cancel order failed: Order ID is missing",N),Ie.error("Order ID is missing",{description:"Cannot cancel order without a valid order ID."});return}if(!L){console.error("Cancel order failed: Market ID is missing",N),Ie.error("Market ID is missing",{description:"Cannot cancel order without a valid market ID."});return}if(!r){console.warn("Cancel order failed: Mnemonic prop is not provided",{orderId:z,marketId:L,mnemonicProvided:!1}),Ie.error("Mnemonic required",{description:`Please provide the 'mnemonic' prop to the PendingOrders component. Order ID: ${z}`,duration:5e3});return}if(typeof r!="string"||r.trim()===""){console.warn("Cancel order failed: Mnemonic is empty or invalid",{orderId:z,marketId:L,mnemonicType:typeof r,mnemonicLength:r==null?void 0:r.length}),Ie.error("Invalid mnemonic",{description:`The mnemonic prop is empty or invalid. Please provide a valid mnemonic. Order ID: ${z}`,duration:5e3});return}if(h){console.log("Cancel order skipped: Already canceling another order",{currentCancelingOrderId:h,requestedOrderId:z}),Ie.info("Cancellation in progress",{description:"Please wait for the current cancellation to complete."});return}console.log("Starting order cancellation",{orderId:z,marketId:L}),p(z);try{d.current||(console.log("Initializing ExchangeClient for order cancellation"),d.current=new Mu({baseURL:t,mnemonic:r.trim()}),await d.current.initialize(),console.log("ExchangeClient initialized successfully")),console.log("Calling cancelOrder API",{orderId:z,marketId:L});const M=await d.current.cancelOrder({orderId:z,marketId:L});if(console.log("Cancel order API response",M),(M==null?void 0:M.success)===!0||(M==null?void 0:M.result)==="success"||M&&!M.error&&!M.message)console.log(`Order ${z} canceled successfully`),Ie.success("Order canceled successfully",{description:`Order ${z} has been canceled.`}),u&&await u();else{const j=(M==null?void 0:M.error)||(M==null?void 0:M.message)||((B=M==null?void 0:M.response)==null?void 0:B.error)||"Failed to cancel order";throw console.error("Cancel order failed: API returned error",{orderId:z,marketId:L,response:M}),new Error(j)}}catch(M){const G=M instanceof Error?M.message:"Unknown error occurred";console.error(`Failed to cancel order ${z}:`,{error:M,errorMessage:G,orderId:z,marketId:L,stack:M instanceof Error?M.stack:void 0}),Ie.error("Failed to cancel order",{description:`${G}. Order ID: ${z}`,duration:6e3})}finally{p(null)}};return!s||s.trim()===""?f.jsx(cE,{message:aR}):l?f.jsx(Lu,{message:nR}):c?f.jsx(ju,{error:c}):f.jsxs("div",{className:"layout-container",style:{height:i},children:[f.jsxs(Fu,{title:x===Dr?iR:oR,children:[f.jsxs("div",{className:"btn-tab",children:[f.jsx("span",{style:{fontSize:"0.7rem"},children:""}),f.jsx("span",{children:"Current Symbol"})]}),f.jsxs("div",{onClick:()=>w(x===Dr?Gw:Dr),className:`btn-tab ${x===Gw?"active":""}`,children:[f.jsx("img",{src:"/transfer-net.svg"}),f.jsx("span",{children:x===Dr?cR:lR})]})]}),f.jsxs("div",{className:"table-container shrinkable",children:[f.jsxs("div",{className:"table-header",style:{gridTemplateColumns:Qw},children:[f.jsx(Dt,{field:Bw,currentSortField:g,sortDirection:b,onSort:E,children:"Symbol"}),f.jsx(Dt,{field:$w,currentSortField:g,sortDirection:b,onSort:E,children:"Side"}),f.jsx(Dt,{field:Uw,currentSortField:g,sortDirection:b,onSort:E,children:"Type"}),f.jsx(Dt,{field:Ww,currentSortField:g,sortDirection:b,onSort:E,children:"Quantity"}),f.jsx(Dt,{field:Hw,currentSortField:g,sortDirection:b,onSort:E,children:"Price"}),f.jsx(Dt,{field:Vw,currentSortField:g,sortDirection:b,onSort:E,children:"Filled"}),f.jsx(Dt,{field:Yw,currentSortField:g,sortDirection:b,onSort:E,children:"Status"}),f.jsx(dE,{center:!0,children:"Actions"})]}),_.length===0?f.jsx(el,{message:x===Dr?sR:rR}):_.map((N,z)=>{const L=P(N),B=$(L),{short:M,full:G,color:j}=A(N.status),I=N.marketId?m(N.marketId)||N.symbol||`m-${N.marketId}`:N.symbol||"N/A";return f.jsxs("div",{className:`table-row ${z%2===0?"even":""}`,style:{gridTemplateColumns:Qw},children:[f.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:f.jsx("span",{children:I})}),f.jsx("div",{className:"table-cell center",style:{color:B,fontWeight:500},children:L}),f.jsx("div",{className:"table-cell center",children:H(N.type)}),f.jsx("div",{className:"table-cell right monospace",children:R(N.quantity)}),f.jsx("div",{className:"table-cell right monospace",children:C(N.price)}),f.jsxs("div",{className:"table-cell right monospace",children:[R(N.filledQuantity)," /"," ",R(N.quantity)]}),f.jsx("div",{className:"table-cell center",style:{color:j,fontWeight:600,cursor:"help",fontSize:"0.9rem"},title:G,children:M}),f.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},onClick:U=>{console.log("[PendingOrders] Actions div clicked",{target:U.target,currentTarget:U.currentTarget,orderId:N.orderId||N.id})},children:x===Dr?f.jsxs(f.Fragment,{children:[(!r||r.trim()==="")&&f.jsx("span",{style:{fontSize:"0.7rem",color:"#ffc107",cursor:"help"},title:"Mnemonic required to cancel orders",children:""}),f.jsx("div",{onClick:U=>{console.log("[PendingOrders] Cancel button wrapper clicked",{target:U.target,currentTarget:U.currentTarget,orderId:N.orderId||N.id})},onMouseDown:U=>{console.log("[PendingOrders] Cancel button wrapper mouse down",{target:U.target,orderId:N.orderId||N.id})},children:(()=>{const U=!r||r.trim()===""||h===(N.orderId||N.id)||!!h;return f.jsx(Q9,{onClick:q=>{q.preventDefault(),q.stopPropagation(),console.log("[PendingOrders] Cancel button onClick fired",{orderId:N.orderId||N.id,marketId:N.marketId,hasMnemonic:!!r,mnemonicLength:r==null?void 0:r.length,mnemonicType:typeof r,cancelingOrderId:h,isDisabled:U,event:q}),U?console.warn("[PendingOrders] Cancel order prevented - button is disabled",{orderId:N.orderId||N.id,isDisabled:U}):F(N)},disabled:U})})()})]}):f.jsx("span",{className:"color-text-dim",children:""})})]},`order-${N.id||N.orderId||z}`)})]})]})}const rL=ae.memo(sL);function iL({baseURL:t=Iu,authToken:e,walletAddress:n,height:s=k7,refreshInterval:r=Tb,selectedBucketId:i=null}){const{positions:o,loading:a,error:l}=J5({baseURL:t,authToken:e,walletAddress:n,refreshInterval:r}),[c,u]=k.useState(Rp),[d,h]=k.useState(null),[p,m]=k.useState(da),x=b=>{if(b==null)return xd;try{return(typeof b=="string"||typeof b=="number"?Ce(b):0).toFixed(2).replace(/\.?0+$/,"")}catch{return xd}},w=k.useMemo(()=>{let b=[...o];return i&&(b=b.filter(v=>{var E;const S=(E=v.bucketId)==null?void 0:E.toString(),_=i.toString();return S===_})),d?b.sort((v,S)=>{let _=0,E=0;switch(d){case Rw:_=v.symbol||"",E=S.symbol||"";break;case Aw:try{_=v.leverage?Ce(v.leverage):0,E=S.leverage?Ce(S.leverage):0}catch{_=0,E=0}break;case Nw:_=v.size||0,E=S.size||0;break;case Ow:_=v.liquidationPrice||0,E=S.liquidationPrice||0;break;case Dw:_=v.unrealizedPnL||0,E=S.unrealizedPnL||0;break;case Lw:_=v.entryPrice||0,E=S.entryPrice||0;break;case jw:_=v.margin||0,E=S.margin||0;break}if(typeof _=="string"&&typeof E=="string")return p===ei?_.localeCompare(E):E.localeCompare(_);const T=Number(_),P=Number(E);return p===ei?T-P:P-T}):b},[o,d,p,i]),g=b=>{d===b?m(p===ei?da:ei):(h(b),m(da))},y=b=>{console.log("Close position:",b),Ie.warning("Feature not implemented",{description:`Close position for ${b.symbol} - This functionality needs to be implemented`})};return a?f.jsx(Lu,{message:V7}):l?f.jsx(ju,{error:l}):f.jsxs("div",{className:"layout-container",style:{height:s},children:[f.jsxs(Fu,{title:`${G7} ${i?`(Bucket ${i})`:""}`,children:[f.jsx("div",{onClick:()=>{u(Rp),h(null)},className:`btn-tab ${c===Rp?"active":""}`,children:K7}),f.jsxs("div",{onClick:()=>{u(Fw),h(null)},className:`btn-tab ${c===Fw?"active":""}`,children:[f.jsx("img",{src:"/bucket-g.svg"}),f.jsx("span",{children:q7})]})]}),f.jsxs("div",{className:"table-container",children:[f.jsxs("div",{className:"table-header",style:{gridTemplateColumns:zw},children:[f.jsx(Dt,{field:Rw,currentSortField:d,sortDirection:p,onSort:g,children:"Symbol"}),f.jsx(Dt,{field:Aw,currentSortField:d,sortDirection:p,onSort:g,children:"Leverage"}),f.jsx(Dt,{field:Nw,currentSortField:d,sortDirection:p,onSort:g,children:"Size"}),f.jsx(Dt,{field:Ow,currentSortField:d,sortDirection:p,onSort:g,children:"Liq. Price"}),f.jsx(Dt,{field:Dw,currentSortField:d,sortDirection:p,onSort:g,children:"P/L"}),f.jsx(Dt,{field:Lw,currentSortField:d,sortDirection:p,onSort:g,children:"Entry Price"}),f.jsx(Dt,{field:jw,currentSortField:d,sortDirection:p,onSort:g,children:"Margin"}),f.jsx(dE,{center:!0,children:"Actions"})]}),w.length===0?f.jsx(el,{message:Y7}):w.map((b,v)=>{const S=b.side===Gr,_=(b.unrealizedPnL||0)>=0?W7:H7,E=x(b.leverage);return f.jsxs("div",{className:`table-row ${v%2===0?"even":""}`,style:{gridTemplateColumns:zw},children:[f.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:f.jsx("span",{children:b.symbol})}),f.jsxs("div",{className:"color-buy",style:{fontWeight:500},children:[S?Gr:Zh," ",E===xd?xd:`${E}x`," @"," ",b.marginMode||nu]}),f.jsx("div",{className:"color-buy right",children:aE(b.size)}),f.jsx("div",{className:"table-cell right",children:Bm(b.liquidationPrice)}),f.jsx("div",{className:"table-cell right",style:{color:_,fontWeight:500},children:Y9(b.unrealizedPnL)}),f.jsx("div",{className:"table-cell right",children:Bm(b.entryPrice)}),f.jsx("div",{className:"table-cell right",children:V9(b.margin)}),f.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:f.jsx(J9,{onClick:()=>y(b)})})]},`position-${b.marketId}-${v}`)})]})]})}const oL=ae.memo(iL);function aL(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(null),[l,c]=k.useState(0),u=k.useRef(null),d=k.useRef(null),h=k.useRef(null),p=k.useRef(!0),m=k.useRef(!1),x=k.useRef(t);x.current=t;const w=k.useCallback(v=>{const S=String(v.bucketId||v.bucket_id||v.id||""),_=v.marginMode||v.margin_mode||v.margin_type||"CROSS",E=_==="ISOLATED"||_==="Isolated"||_==="ISOLATE"?"Isolated":"Cross",T=v.maintenanceMargin||v.maintenance_margin||v.usedMargin||v.used_margin||0,P=v.nominalValue||v.nominal_value||v.totalEquity||v.total_equity||v.totalMargin||v.total_margin||v.dedicated_margin||0,C=typeof T=="string"||typeof T=="number"?Ce(T):0,R=typeof P=="string"||typeof P=="number"?Ce(P):0,A=R>0?Math.min(C/R,1):0;return{bucketId:S,marginType:E,maintenanceMargin:C,nominalValue:R,riskRatio:A}},[]),g=k.useCallback(async()=>{if(!u.current)return;const v=x.current;if(!v.walletAddress||v.walletAddress.trim()===""){c(0);return}try{const S=await u.current.getBalanceDecimal(v.walletAddress,"USDC"),_=(S==null?void 0:S.available)||0;c(_)}catch(S){console.warn("Failed to fetch spot wallet balance (USDC):",S),c(0)}},[]),y=k.useCallback(async()=>{if(!u.current)return;const v=x.current;if(!v.walletAddress||v.walletAddress.trim()===""){a(null),s([]),i(!1),p.current=!1;return}a(null),p.current&&i(!0);try{g();let S=[];if(v.walletAddress)try{S=await u.current.getBuckets(v.walletAddress),Array.isArray(S)||(S=[])}catch(E){console.warn("Failed to fetch buckets, attempting to derive from positions:",E);try{const T=await u.current.getPositionsDecimal(v.walletAddress);if(Array.isArray(T)){const P=new Map;T.forEach(C=>{const R=C.bucketId||C.bucket_id||"default",A=P.get(R)||{positions:[],totalMargin:0,marginMode:C.marginMode||C.margin_mode||"CROSS"};A.positions.push(C),A.totalMargin+=C.margin||0,P.set(R,A)}),S=Array.from(P.entries()).map(([C,R])=>({bucketId:C,marginMode:R.marginMode,totalMargin:R.totalMargin,maintenanceMargin:R.totalMargin*.1,totalEquity:R.totalMargin}))}}catch(T){throw new Error(`Failed to fetch buckets: ${E instanceof Error?E.message:String(E)}. Also failed to derive from positions: ${T instanceof Error?T.message:String(T)}`)}}else throw new Error("walletAddress is required to fetch bucket collections");const _=S.map(w);s(_),p.current=!1}catch(S){const _=S instanceof Error?S.message:"Failed to load bucket collections";a(_),console.error("Failed to fetch bucket collections:",S),p.current=!1}finally{i(!1)}},[w,g]),b=k.useCallback(v=>{if(v.buckets&&Array.isArray(v.buckets)){const S=v.buckets.map(w);s(_=>{if(_.length!==S.length)return S;const E=JSON.stringify(_),T=JSON.stringify(S);return E===T?_:S}),p.current&&(p.current=!1,i(!1))}},[w]);return k.useEffect(()=>{if(!t.walletAddress||t.walletAddress.trim()===""){i(!1),a(null),s([]),d.current&&(d.current.disconnect(),d.current=null),h.current!==null&&(clearInterval(h.current),h.current=null);return}const v=new vn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=v,p.current=!0,m.current=!1,y(),e&&t.wsURL){const S=new ko({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=S;const _=()=>{S.isConnected()&&!m.current&&(S.subscribeBuckets(b),m.current=!0)};S.connect().then(()=>{_()}).catch(P=>{console.error("Failed to connect WebSocket:",P),t.refreshInterval&&t.refreshInterval>0&&(h.current=window.setInterval(()=>{y()},t.refreshInterval))});let E=null;const T=S.wsClient;return T&&(E=T.onStateChange(P=>{P===Je.Connected?(m.current&&_(),h.current!==null&&(clearInterval(h.current),h.current=null)):P===Je.Disconnected&&t.refreshInterval&&t.refreshInterval>0&&h.current===null&&(h.current=window.setInterval(()=>{y()},t.refreshInterval))})),()=>{E&&E(),d.current&&(d.current.unsubscribeBuckets(b),d.current.disconnect(),d.current=null),h.current!==null&&(clearInterval(h.current),h.current=null)}}else return t.refreshInterval&&t.refreshInterval>0&&(h.current=window.setInterval(()=>{y()},t.refreshInterval)),()=>{h.current!==null&&(clearInterval(h.current),h.current=null)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e,b]),{collections:n,loading:r,error:o,refresh:y,spotWalletBalance:l}}function lL({isOpen:t,currentLeverage:e,tempLeverage:n,maxRatio:s,onLeverageChange:r,onConfirm:i,onCancel:o}){if(!t)return null;const a=f.jsx("div",{className:"modal-overlay",onClick:o,children:f.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h3",{children:"Select Leverage"})}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{className:"leverage-max-ratio",children:[f.jsx("div",{className:"leverage-max-ratio-label",children:"Maximum Ratio"}),f.jsxs("div",{className:"leverage-max-ratio-value",children:[s,"x"]})]}),f.jsxs("div",{className:"leverage-slider-container",children:[f.jsx("input",{type:"range",min:I7,max:R7,value:n,onChange:l=>r(parseInt(l.target.value)),className:"leverage-slider"}),f.jsxs("div",{className:"leverage-slider-labels",children:[f.jsx("span",{children:"1x"}),f.jsxs("span",{className:"leverage-current-value",children:[n,"x"]}),f.jsx("span",{children:"100x"})]})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),f.jsx("button",{onClick:i,className:"btn btn-primary",children:"Confirm"})]})]})});return typeof document<"u"?wo.createPortal(a,document.body):null}function cL({isOpen:t,fromValue:e,toValue:n,options:s,bucketsData:r,transferAmount:i,createBucketAmount:o,onFromChange:a,onToChange:l,onTransferAmountChange:c,onCreateBucketAmountChange:u,onConfirm:d,onCancel:h,spotWalletBalance:p=0,activeTab:m,onActiveTabChange:x,isTransferring:w=!1,onOpen:g}){const[y,b]=k.useState("transfer"),v=m??y,S=x??b,_=k.useRef(!1);k.useEffect(()=>{t&&!_.current&&g&&g(),_.current=t},[t,g]);const E=k.useMemo(()=>e==="spot-wallet"?null:r.find(H=>H.bucketId===e),[r,e]),T=k.useMemo(()=>e==="spot-wallet"?p:(E==null?void 0:E.nominalValue)||0,[e,p,E]),P=10,C=Math.max(P,T);if(ae.useEffect(()=>{if(e&&C>0){const H=v==="transfer"?i:o;H>C?v==="transfer"?c(C):u(C):H<P&&C>=P&&(v==="transfer"?c(P):u(P))}},[e,C,v,i,o,c,u]),!t)return null;const R=e&&n&&i>=P&&i<=C,A=e&&o>=P&&o<=C,$=f.jsx("div",{className:"modal-overlay",onClick:h,children:f.jsxs("div",{className:"modal-content transfer-modal-content",onClick:H=>H.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h3",{children:"Transfer Funds"})}),f.jsxs("div",{className:"transfer-modal-tabs",children:[f.jsx("button",{className:`transfer-tab ${v==="transfer"?"active":""}`,onClick:()=>S("transfer"),type:"button",disabled:w,children:"Transfer"}),f.jsx("button",{className:`transfer-tab ${v==="create"?"active":""}`,onClick:()=>S("create"),type:"button",disabled:w,children:"Create Bucket"})]}),f.jsx("div",{className:"modal-body",children:v==="transfer"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"transfer-field-group",children:[f.jsx("label",{className:"transfer-field-label",children:"From"}),f.jsxs("select",{value:e,onChange:H=>a(H.target.value),className:"transfer-select",children:[f.jsx("option",{value:"",children:"Select source bucket"}),s.map(H=>f.jsx("option",{value:H.value,children:H.label},H.value))]})]}),f.jsxs("div",{className:"transfer-field-group",children:[f.jsx("label",{className:"transfer-field-label",children:"To"}),f.jsxs("select",{value:n,onChange:H=>l(H.target.value),className:"transfer-select",disabled:!e,children:[f.jsx("option",{value:"",children:"Select destination bucket"}),s.filter(H=>H.value!==e).map(H=>f.jsx("option",{value:H.value,children:H.label},H.value))]})]}),e&&C>=P?f.jsxs("div",{className:"transfer-field-group",children:[f.jsxs("div",{className:"transfer-amount-header",children:[f.jsx("label",{className:"transfer-field-label",children:"Amount"}),f.jsxs("div",{className:"transfer-available-balance",children:["Available: ",Qt(T)]})]}),f.jsx("div",{className:"transfer-amount-display",children:f.jsx("span",{className:"transfer-amount-value",children:Qt(i)})}),f.jsxs("div",{className:"transfer-amount-container",children:[f.jsx("input",{type:"range",min:P,max:C,step:.01,value:i,onChange:H=>c(parseFloat(H.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(i-P)/(C-P)*100}%`}}),f.jsxs("div",{className:"transfer-amount-labels",children:[f.jsx("span",{children:Qt(P)}),f.jsx("span",{children:Qt(C)})]})]})]}):e?f.jsx("div",{className:"transfer-field-group",children:f.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required: ",Qt(P)]})}):null]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"transfer-field-group",children:[f.jsx("label",{className:"transfer-field-label",children:"From"}),f.jsxs("select",{value:e,onChange:H=>a(H.target.value),className:"transfer-select",children:[f.jsx("option",{value:"",children:"Select source bucket"}),s.map(H=>f.jsx("option",{value:H.value,children:H.label},H.value))]})]}),e&&C>=P?f.jsxs("div",{className:"transfer-field-group",children:[f.jsxs("div",{className:"transfer-amount-header",children:[f.jsx("label",{className:"transfer-field-label",children:"Amount"}),f.jsxs("div",{className:"transfer-available-balance",children:["Available: ",Qt(T)]})]}),f.jsx("div",{className:"transfer-amount-display",children:f.jsx("span",{className:"transfer-amount-value",children:Qt(o)})}),f.jsxs("div",{className:"transfer-amount-container",children:[f.jsx("input",{type:"range",min:P,max:C,step:.01,value:o,onChange:H=>u(parseFloat(H.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(o-P)/(C-P)*100}%`}}),f.jsxs("div",{className:"transfer-amount-labels",children:[f.jsx("span",{children:Qt(P)}),f.jsx("span",{children:Qt(C)})]})]})]}):e?f.jsx("div",{className:"transfer-field-group",children:f.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required: ",Qt(P)]})}):null]})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:h,className:"btn btn-secondary",disabled:w,children:"Cancel"}),f.jsx("button",{onClick:d,className:"btn btn-primary",disabled:w||(v==="transfer"?!R:!A),children:w?"Processing...":"Confirm"})]})]})});return typeof document<"u"?wo.createPortal($,document.body):null}function uL({baseURL:t=Iu,authToken:e,walletAddress:n,mnemonic:s,height:r=S7,refreshInterval:i=Tb,onBucketSelect:o}){const{collections:a,loading:l,error:c,spotWalletBalance:u,refresh:d}=aL({baseURL:t,authToken:e,walletAddress:n,refreshInterval:i}),[h,p]=k.useState(null),[m,x]=k.useState("desc"),[w,g]=k.useState(!1),[y,b]=k.useState(""),[v,S]=k.useState(""),[_,E]=k.useState(10),[T,P]=k.useState(10),[C,R]=k.useState("transfer"),[A,$]=k.useState(!1),H=k.useRef(null),F=k.useMemo(()=>h?[...a].sort((I,U)=>{let q=0,X=0;switch(h){case"marginType":q=I.marginType||"",X=U.marginType||"";break;case"maintenanceMargin":q=I.maintenanceMargin||0,X=U.maintenanceMargin||0;break;case"nominalValue":q=I.nominalValue||0,X=U.nominalValue||0;break;case"riskRatio":q=I.riskRatio||0,X=U.riskRatio||0;break;case"bucketId":q=I.bucketId||"",X=U.bucketId||"";break}if(typeof q=="string"&&typeof X=="string")return m==="asc"?q.localeCompare(X):X.localeCompare(q);const K=Number(q),ee=Number(X);return m==="asc"?K-ee:ee-K}):a,[a,h,m]),N=I=>{h===I?x(m==="asc"?"desc":"asc"):(p(I),x("desc"))},z=(I,U)=>{o&&o(I,U)},L=()=>{g(!0),b(""),S(""),E(10),P(10),R("transfer")},B=()=>{g(!1),b(""),S(""),E(10),P(10),R("transfer")};k.useEffect(()=>{if(!s||!t){H.current=null;return}const I=new Mu({baseURL:t,mnemonic:s});I.initialize().then(()=>{H.current=I}).catch(U=>{const q=U instanceof Error?U.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",U),Ie.error("Exchange client initialization failed",{description:q}),H.current=null})},[s,t]);const M=async()=>{if(!s){Ie.error("Mnemonic required",{description:"Mnemonic is required to perform transfers. Please provide a mnemonic to enable transfer functionality."});return}const I=H.current;if(!I){Ie.error("Exchange client not ready",{description:"Exchange client is still initializing. Please wait a moment and try again."});return}$(!0);try{const U="USDC";let q,X="";const K=bt(_);if(C==="transfer"){if(!y||!v)throw new Error("Please select both source and destination");if(y==="spot-wallet"&&v==="spot-wallet")throw new Error("Cannot transfer from spot wallet to spot wallet");y==="spot-wallet"?(q=await I.extractToBucket({bucketId:v,assetId:U,amount:K}),X=`Successfully transferred ${Qt(_)} from Spot Wallet to ${v}`):v==="spot-wallet"?(q=await I.withdrawFromBucket({bucketId:y,assetId:U,amount:K}),X=`Successfully transferred ${Qt(_)} from ${y} to Spot Wallet`):(q=await I.bucketTransfer({fromBucketId:y,toBucketId:v,assetId:U,amount:K}),X=`Successfully transferred ${Qt(_)} from ${y} to ${v}`)}else throw y?y==="spot-wallet"?new Error("Create Bucket from spot wallet requires a target bucket ID. Please use the Transfer tab to extract funds to an existing bucket, or create the bucket first."):new Error("Create Bucket requires a target bucket ID. Please use the Transfer tab to transfer between buckets."):new Error("Please select a source");console.log("Transfer successful:",q),Ie.success("Transfer completed",{description:X}),d(),g(!1),b(""),S(""),E(10),P(10)}catch(U){const q=U instanceof Error?U.message:"Transfer failed";Ie.error("Transfer failed",{description:q}),console.error("Transfer error:",U)}finally{$(!1)}},G=k.useMemo(()=>{const I=F.map(U=>({value:U.bucketId,label:`${U.bucketId} (${Qt(U.nominalValue)})`}));return[{value:"spot-wallet",label:`Spot Wallet (${Qt(u)})`},...I]},[F,u]),j=k.useMemo(()=>F.map(I=>({bucketId:I.bucketId,nominalValue:I.nominalValue})),[F]);return!n||n.trim()===""?f.jsx(cE,{message:"Wallet address required to view bucket collections"}):l?f.jsx(Lu,{message:"Loading bucket collections..."}):c?f.jsx(ju,{error:c}):f.jsxs("div",{className:"layout-container",style:{height:r},children:[f.jsx(Fu,{title:"BUCKET COLLECTIONS",children:f.jsxs("div",{onClick:L,className:"btn-tab",children:[f.jsx("img",{src:"/transfer-repu.svg"}),f.jsx("span",{children:"Transfer"})]})}),f.jsxs("div",{className:"table-container shrinkable",children:[f.jsxs("div",{className:"table-header",style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[f.jsx(Dt,{field:"bucketId",currentSortField:h,sortDirection:m,onSort:N,children:"Bucket ID"}),f.jsx(Dt,{field:"marginType",currentSortField:h,sortDirection:m,onSort:N,children:"Margin Type"}),f.jsx(Dt,{field:"maintenanceMargin",currentSortField:h,sortDirection:m,onSort:N,children:"Maintenance Margin"}),f.jsx(Dt,{field:"nominalValue",currentSortField:h,sortDirection:m,onSort:N,children:"Balance"}),f.jsx(Dt,{field:"riskRatio",currentSortField:h,sortDirection:m,onSort:N,children:"Risk Ratio"})]}),F.length===0?f.jsx(el,{message:"No bucket collections"}):F.map((I,U)=>f.jsxs("div",{onClick:()=>z(I.bucketId,I.nominalValue),className:`table-row clickable ${U%2===0?"even":""}`,style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[f.jsx("div",{className:"table-cell primary",children:I.bucketId}),f.jsx("div",{className:"table-cell",children:I.marginType.toUpperCase()}),f.jsx("div",{className:"table-cell right",children:Qt(I.maintenanceMargin)}),f.jsx("div",{className:"table-cell right",children:Qt(I.nominalValue)}),f.jsx("div",{className:"table-cell right",style:{color:(I.riskRatio||0)>.5?"#ff6b6b":"#51cf66",fontWeight:500},children:G9(I.riskRatio)})]},`collection-${I.bucketId}-${U}`))]}),f.jsx(cL,{isOpen:w,fromValue:y,toValue:v,options:G,bucketsData:j,transferAmount:_,createBucketAmount:T,onFromChange:b,onToChange:S,onTransferAmountChange:E,onCreateBucketAmountChange:P,onConfirm:M,onCancel:B,spotWalletBalance:u,activeTab:C,onActiveTabChange:R,isTransferring:A,onOpen:d})]})}const dL=ae.memo(uL);function hL(t){var D;const[e,n]=k.useState([]),[s,r]=k.useState("vertical"),[i,o]=k.useState(!0),[a,l]=k.useState(!1),[c,u]=k.useState(null),[d,h]=k.useState(void 0),[p,m]=k.useState(!1),[x,w]=k.useState(10),g=k.useRef(null),y=k.useRef(null),b=k.useRef(!1),v=k.useRef(Ru),S=k.useRef(i0),_=k.useRef([]),E=v.current,T=S.current,[P,C]=k.useState(()=>localStorage.getItem("authToken")||""),{markets:R,selectedMarketId:A,selectedMarketSymbol:$,setSelectedMarketId:H,loadingMarkets:F,getError:N}=_o({baseURL:E,sessionToken:P,autoFetchMarkets:!0}),{mnemonic:z,walletAddress:L,authToken:B,setMnemonic:M}=ml();k.useEffect(()=>{z||M("legal winner thank year wave sausage worth useful legal winner thank yellow")},[z,M]),k.useEffect(()=>{_.current=e},[e]),k.useEffect(()=>{B&&(C(B),localStorage.setItem("authToken",B))},[B]);const G=k.useRef(!1);k.useEffect(()=>{P&&P.trim()!==""&&!G.current&&localStorage.getItem("authToken")!==P&&localStorage.setItem("authToken",P),G.current=!1},[P]),k.useEffect(()=>{const Q=de=>{de.key==="authToken"&&de.newValue&&(G.current=!0,C(de.newValue))};window.addEventListener("storage",Q);const oe=setInterval(()=>{const de=localStorage.getItem("authToken");C(ve=>de&&de!==ve?(G.current=!0,de):ve)},5e3);return()=>{window.removeEventListener("storage",Q),clearInterval(oe)}},[]);const j=k.useMemo(()=>{var Q,oe,de,ve;return R.length>0?((Q=R.find(ye=>ye.active))==null?void 0:Q.market_id)??R[0].market_id??((de=(oe=R.find(ye=>ye.active))==null?void 0:oe.id)==null?void 0:de.toString())??((ve=R[0].id)==null?void 0:ve.toString())??null:null},[R]),I=k.useCallback((Q,oe)=>{if(i)return;const de=_.current,ve=Q;if(de.length!==ve.length){b.current=!0,_.current=ve,n(ve);return}let ye=!1;for(let W=0;W<de.length;W++){const le=de[W],O=ve[W];if(le.x!==O.x||le.y!==O.y||le.w!==O.w||le.h!==O.h||le.i!==O.i){ye=!0;break}}ye&&(b.current=!0,_.current=ve,n(ve))},[i]),U=k.useCallback(()=>{r(Q=>Q==="horizontal"?"vertical":Q==="vertical"?null:"horizontal")},[]),q=k.useCallback(()=>{l(Q=>!Q)},[]);k.useEffect(()=>(a?document.body.classList.add("full-width-screen"):document.body.classList.remove("full-width-screen"),()=>{document.body.classList.remove("full-width-screen")}),[a]);const X=k.useCallback(()=>{o(Q=>!Q),i&&(b.current=!1)},[i]),K=k.useCallback(()=>{g.current&&(b.current=!1,g.current.generateNewLayout())},[]),ee=k.useMemo(()=>e.map(function(Q){return f.jsxs("div",{className:"layoutItem",children:[f.jsx("b",{children:Q.i}),": [",Q.x,", ",Q.y,", ",Q.w,", ",Q.h,"]"]},Q.i)}),[e]),se=A||"",ge=30,Ue=10,Pe=12,ke=k.useMemo(()=>{if(e.length===0)return{};const Q={};for(let oe=0;oe<=6;oe++){const de=e.find(ve=>ve.i===oe.toString());if(de){const ve=de.h*ge+(de.h-1)*Ue,ye=de.w/Pe*100;Q[oe]={width:`${ye}%`,height:`${ve}px`}}}return Q},[e]),Te=k.useMemo(()=>{var Q,oe,de,ve;return[f.jsx(W9,{symbol:"BINANCE:BTCUSDT",interval:"5",isCollapsed:!1},"tv"),f.jsx(Z9,{baseURL:E,wsURL:T,marketId:se,maxDepth:20,height:(Q=ke[1])==null?void 0:Q.height,authToken:P},`clob-${se}`),f.jsx(eL,{baseURL:E,wsURL:T,marketId:se,symbol:$||void 0,authToken:P},`price-${se}`),f.jsx(tL,{ref:y,baseURL:E,marketId:se,selectedBucketBalance:d,selectedBucketId:c,onLeverageClick:()=>{y.current&&w(y.current.leverage),m(!0)}},`trade-${se}`),f.jsx(rL,{baseURL:E,wsURL:T,authToken:P,walletAddress:L,mnemonic:z,height:(oe=ke[4])==null?void 0:oe.height,refreshInterval:5e3},`order-${se}`),f.jsx(oL,{baseURL:E,authToken:P,walletAddress:L,height:(de=ke[5])==null?void 0:de.height,refreshInterval:5e3,selectedBucketId:c},`pos-${se}`),f.jsx(dL,{baseURL:E,mnemonic:z,authToken:P,walletAddress:L,height:(ve=ke[6])==null?void 0:ve.height,refreshInterval:5e3,onBucketSelect:(ye,W)=>{u(ye),h(W)}},`bucket-${se}`)]},[E,T,P,L,se,$,ke,c,d]);if(F)return f.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:f.jsx("div",{children:"Loading markets..."})});const ft=N("markets");return ft?f.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:f.jsxs("div",{children:["Error loading markets: ",ft]})}):R.length===0||!A?f.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:f.jsx("div",{children:"No markets available."})}):f.jsxs("div",{children:[f.jsxs("div",{className:"App-section",children:[f.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Configuration"}),f.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[f.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[f.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Market:"}),f.jsx("select",{value:A||"",onChange:Q=>{const oe=Q.target.value;oe&&H(oe)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:R.length===0?f.jsx("option",{value:"",children:"Loading markets..."}):f.jsxs(f.Fragment,{children:[f.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),R.map(Q=>{var le,O;const oe=Q.market_id??((le=Q.id)==null?void 0:le.toString())??"",de=Q.market_id??((O=Q.id)==null?void 0:O.toString())??"",ve=de.length>8?`${de.substring(0,8)}...`:de,ye=Q.moniker?Q.moniker:Q.symbol?Q.symbol:Q.baseAsset&&Q.quoteAsset?`${Q.baseAsset}-${Q.quoteAsset}`:`Market ID: ${de}`,W=Q.active?" [ACTIVE]":"";return f.jsxs("option",{value:oe,children:[ye," - ID: ",ve,W]},oe)})]})}),R.length>0&&f.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:A===j?"#51cf66":"#ff9f43"},children:A===j?` Auto-selected default market (ID: ${j==null?void 0:j.substring(0,16)}...)`:` Manual selection (ID: ${A==null?void 0:A.substring(0,16)}...)`})]}),f.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[f.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Mnemonic (for wallet address):"}),f.jsx("input",{type:"text",value:z||"",onChange:Q=>M(Q.target.value),placeholder:"Enter mnemonic to generate wallet address",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:"white",color:"#333"}})]}),f.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[f.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Wallet Address:"}),f.jsx("input",{type:"text",value:L||"",disabled:!!(z&&z.trim()!==""),placeholder:"automatic (from mnemonic via useOnboard)",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:L?"#e7f3ff":"#f5f5f5",color:"#333"}}),L&&f.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#28a745"},children:" Auto-generated from mnemonic via useOnboard hook"})]})]}),f.jsx("h3",{children:"Layout Controls"}),f.jsx("button",{onClick:K,style:{marginRight:"0.5rem"},children:"Generate New Layout"}),f.jsx("button",{onClick:X,style:{marginRight:"0.5rem"},children:i?"Enable Dragging":"Disable Dragging"}),f.jsx("button",{onClick:U,style:{marginRight:"0.5rem"},children:"Change Compaction Type"}),f.jsx("button",{onClick:q,children:"Full Width Screen"}),f.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9em",color:"#fff"},children:["Compaction type:"," ",s?s.charAt(0).toUpperCase()+s.slice(1):"No Compaction"]})]}),f.jsx(zm,{ref:g,onLayoutChange:I,slotContent:Te,compactType:s,allStatic:i,onCompactTypeChange:U,onToggleStatic:X,onNewLayout:K}),f.jsxs("div",{className:"layoutJSON",children:["Displayed as ",f.jsx("code",{children:"[x, y, w, h]"}),":",f.jsx("div",{className:"columns",children:ee})]}),f.jsx(lL,{isOpen:p,currentLeverage:((D=y.current)==null?void 0:D.leverage)||10,tempLeverage:x,maxRatio:y.current?y.current.calculateMaxRatio(x):x.toFixed(2),onLeverageChange:w,onConfirm:()=>{y.current&&y.current.setLeverage(x),m(!1)},onCancel:()=>{y.current&&w(y.current.leverage),m(!1)}})]})}function Do({data:t,maxVisible:e=10,maxDataPoints:n=100,height:s=400,width:r=1080,rowWidth:i=280,onItemClick:o,getValue:a,color:l="#2196F3"}){const c=k.useRef(null),u=k.useRef(null),d=k.useRef(0),[h,p]=k.useState(!1),[m,x]=k.useState(0),w=20,g=800,y=k.useMemo(()=>!t||t.length===0?[]:t.length<=n?t:t.slice(-n),[t,n]),b=v=>{const S=[];return v.timestamp!==void 0&&S.push({label:"Time",value:new Date(v.timestamp).toLocaleTimeString()}),v.market_id!==void 0&&S.push({label:"Market",value:String(v.market_id)}),v.symbol!==void 0&&S.push({label:"Symbol",value:String(v.symbol)}),v.open!==void 0&&S.push({label:"Open",value:v.open.toFixed(4)}),v.close!==void 0&&S.push({label:"Close",value:v.close.toFixed(4)}),v.high!==void 0&&S.push({label:"High",value:v.high.toFixed(4)}),v.low!==void 0&&S.push({label:"Low",value:v.low.toFixed(4)}),v.volume!==void 0&&S.push({label:"Volume",value:v.volume.toFixed(2)}),v.price!==void 0&&S.push({label:"Price",value:v.price.toFixed(4)}),v.mark_price!==void 0&&S.push({label:"Mark Price",value:v.mark_price.toFixed(4)}),v.last_price!==void 0&&S.push({label:"Last Price",value:v.last_price.toFixed(4)}),v.size!==void 0&&S.push({label:"Size",value:v.size.toFixed(4)}),v.entryPrice!==void 0&&S.push({label:"Entry",value:v.entryPrice.toFixed(4)}),v.unrealizedPnL!==void 0&&S.push({label:"PnL",value:v.unrealizedPnL.toFixed(4)}),v.orderId!==void 0&&S.push({label:"Order ID",value:String(v.orderId)}),v.status!==void 0&&S.push({label:"Status",value:String(v.status)}),v.bucketId!==void 0&&S.push({label:"Bucket ID",value:String(v.bucketId)}),v.maxLeverage!==void 0&&S.push({label:"Max Lev",value:String(v.maxLeverage)}),v.value!==void 0&&S.length===0&&S.push({label:"Value",value:v.value.toFixed(4)}),S.length===0&&S.push({label:"Data",value:"Click to view"}),S.slice(0,6)};return k.useEffect(()=>{if(!u.current||!c.current)return;const v=y.length;if(v===0){x(0),d.current=0;return}const E=c.current.offsetWidth-20*2,T=v*i+(v-1)*w;if(T>E){const C=T-E;x(-C)}else x(0);const P=y.length>d.current;d.current=y.length,P&&u.current&&requestAnimationFrame(()=>{u.current&&u.current.offsetWidth})},[y.length,i,w,r]),k.useEffect(()=>{u.current&&(u.current.style.transition=h?"none":`transform ${g}ms ease-out`,u.current.style.transform=`translateX(${m}px)`)},[m,h,g]),f.jsxs("div",{ref:c,className:"data-flow-container",style:{width:`${r}px`,height:`${s}px`},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[f.jsx("div",{ref:u,className:"data-flow-rows-wrapper",style:{gap:`${w}px`},children:y.map((v,S)=>{const _=b(v),E=S;return f.jsxs("div",{className:"data-flow-row",onClick:()=>{o&&o(v)},style:{width:`${i}px`,background:l},children:[f.jsx("div",{className:"data-flow-row-header",children:v.timestamp?new Date(v.timestamp).toLocaleTimeString():`#${E+1}`}),f.jsx("div",{className:"data-flow-row-fields",children:_.map((T,P)=>f.jsxs("div",{className:"data-flow-field",children:[f.jsxs("span",{className:"data-flow-field-label",children:[T.label,":"]}),f.jsx("span",{className:"data-flow-field-value",children:T.value})]},P))}),f.jsx("div",{className:"data-flow-row-footer",children:"Click to view details"})]},`${E}-${v.timestamp||Date.now()}-${v.id||JSON.stringify(v)}`)})}),h&&f.jsx("div",{className:"data-flow-paused-indicator",children:"Paused"})]})}function fL({data:t,isOpen:e,onClose:n,title:s="Data Details"}){return k.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),k.useEffect(()=>{const r=i=>{i.key==="Escape"&&e&&n()};return e&&window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[e,n]),e?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"data-modal-overlay",onClick:n}),f.jsxs("div",{className:"data-modal",onClick:r=>r.stopPropagation(),children:[f.jsx("h3",{className:"data-modal-title",children:s}),f.jsx("pre",{className:"data-modal-content",children:JSON.stringify(t,null,2)}),f.jsx("button",{className:"data-modal-close-button",onClick:n,children:"Close"})]})]}):null}function ph(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pL(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fE(t){let e,n,s;t.length!==2?(e=ph,n=(a,l)=>ph(t(a),l),s=(a,l)=>t(a)-l):(e=t===ph||t===pL?t:gL,n=t,s=t);function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=r(a,l,c,u-1);return d>c&&s(a[d-1],l)>-s(a[d],l)?d-1:d}return{left:r,center:o,right:i}}function gL(){return 0}function mL(t){return t===null?NaN:+t}const xL=fE(ph),bL=xL.right;fE(mL).center;class g2 extends Map{constructor(e,n=wL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[s,r]of e)this.set(s,r)}get(e){return super.get(m2(this,e))}has(e){return super.has(m2(this,e))}set(e,n){return super.set(yL(this,e),n)}delete(e){return super.delete(vL(this,e))}}function m2({_intern:t,_key:e},n){const s=e(n);return t.has(s)?t.get(s):n}function yL({_intern:t,_key:e},n){const s=e(n);return t.has(s)?t.get(s):(t.set(s,n),n)}function vL({_intern:t,_key:e},n){const s=e(n);return t.has(s)&&(n=t.get(s),t.delete(s)),n}function wL(t){return t!==null&&typeof t=="object"?t.valueOf():t}const SL=Math.sqrt(50),kL=Math.sqrt(10),_L=Math.sqrt(2);function cf(t,e,n){const s=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(s)),i=s/Math.pow(10,r),o=i>=SL?10:i>=kL?5:i>=_L?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?cf(t,e,n*2):[a,l,c]}function CL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const s=e<t,[r,i,o]=s?cf(e,t,n):cf(t,e,n);if(!(i>=r))return[];const a=i-r+1,l=new Array(a);if(s)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function $m(t,e,n){return e=+e,t=+t,n=+n,cf(t,e,n)[2]}function EL(t,e,n){e=+e,t=+t,n=+n;const s=e<t,r=s?$m(e,t,n):$m(t,e,n);return(s?-1:1)*(r<0?1/-r:r)}function PL(t,e){let n;if(e===void 0)for(const s of t)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);else{let s=-1;for(let r of t)(r=e(r,++s,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function TL(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var s=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(r);++s<r;)i[s]=t+s*n;return i}function ML(t){return t}var lg=1,cg=2,Um=3,ic=4,x2=1e-6;function IL(t){return"translate("+t+",0)"}function RL(t){return"translate(0,"+t+")"}function AL(t){return e=>+t(e)}function NL(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function OL(){return!this.__axis}function pE(t,e){var n=[],s=null,r=null,i=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===lg||t===ic?-1:1,u=t===ic||t===cg?"x":"y",d=t===lg||t===Um?IL:RL;function h(p){var m=s??(e.ticks?e.ticks.apply(e,n):e.domain()),x=r??(e.tickFormat?e.tickFormat.apply(e,n):ML),w=Math.max(i,0)+a,g=e.range(),y=+g[0]+l,b=+g[g.length-1]+l,v=(e.bandwidth?NL:AL)(e.copy(),l),S=p.selection?p.selection():p,_=S.selectAll(".domain").data([null]),E=S.selectAll(".tick").data(m,e).order(),T=E.exit(),P=E.enter().append("g").attr("class","tick"),C=E.select("line"),R=E.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(P),C=C.merge(P.append("line").attr("stroke","currentColor").attr(u+"2",c*i)),R=R.merge(P.append("text").attr("fill","currentColor").attr(u,c*w).attr("dy",t===lg?"0em":t===Um?"0.71em":"0.32em")),p!==S&&(_=_.transition(p),E=E.transition(p),C=C.transition(p),R=R.transition(p),T=T.transition(p).attr("opacity",x2).attr("transform",function(A){return isFinite(A=v(A))?d(A+l):this.getAttribute("transform")}),P.attr("opacity",x2).attr("transform",function(A){var $=this.parentNode.__axis;return d(($&&isFinite($=$(A))?$:v(A))+l)})),T.remove(),_.attr("d",t===ic||t===cg?o?"M"+c*o+","+y+"H"+l+"V"+b+"H"+c*o:"M"+l+","+y+"V"+b:o?"M"+y+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+y+","+l+"H"+b),E.attr("opacity",1).attr("transform",function(A){return d(v(A)+l)}),C.attr(u+"2",c*i),R.attr(u,c*w).text(x),S.filter(OL).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===cg?"start":t===ic?"end":"middle"),S.each(function(){this.__axis=v})}return h.scale=function(p){return arguments.length?(e=p,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(s=p==null?null:Array.from(p),h):s&&s.slice()},h.tickFormat=function(p){return arguments.length?(r=p,h):r},h.tickSize=function(p){return arguments.length?(i=o=+p,h):i},h.tickSizeInner=function(p){return arguments.length?(i=+p,h):i},h.tickSizeOuter=function(p){return arguments.length?(o=+p,h):o},h.tickPadding=function(p){return arguments.length?(a=+p,h):a},h.offset=function(p){return arguments.length?(l=+p,h):l},h}function b2(t){return pE(Um,t)}function DL(t){return pE(ic,t)}var LL={value:()=>{}};function gE(){for(var t=0,e=arguments.length,n={},s;t<e;++t){if(!(s=arguments[t]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new gh(n)}function gh(t){this._=t}function jL(t,e){return t.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}gh.prototype=gE.prototype={constructor:gh,on:function(t,e){var n=this._,s=jL(t+"",n),r,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((r=(t=s[i]).type)&&(r=FL(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(r=(t=s[i]).type)n[r]=y2(n[r],t.name,e);else if(e==null)for(r in n)n[r]=y2(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new gh(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,i;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],s=0,r=i.length;s<r;++s)i[s].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)}};function FL(t,e){for(var n=0,s=t.length,r;n<s;++n)if((r=t[n]).name===e)return r.value}function y2(t,e,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===e){t[s]=LL,t=t.slice(0,s).concat(t.slice(s+1));break}return n!=null&&t.push({name:e,value:n}),t}var Wm="http://www.w3.org/1999/xhtml";const v2={svg:"http://www.w3.org/2000/svg",xhtml:Wm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function k0(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),v2.hasOwnProperty(e)?{space:v2[e],local:t}:t}function zL(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Wm&&e.documentElement.namespaceURI===Wm?e.createElement(t):e.createElementNS(n,t)}}function BL(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function mE(t){var e=k0(t);return(e.local?BL:zL)(e)}function $L(){}function Xb(t){return t==null?$L:function(){return this.querySelector(t)}}function UL(t){typeof t!="function"&&(t=Xb(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=t.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Sn(s,this._parents)}function xE(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function WL(){return[]}function bE(t){return t==null?WL:function(){return this.querySelectorAll(t)}}function HL(t){return function(){return xE(t.apply(this,arguments))}}function VL(t){typeof t=="function"?t=HL(t):t=bE(t);for(var e=this._groups,n=e.length,s=[],r=[],i=0;i<n;++i)for(var o=e[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(s.push(t.call(l,l.__data__,c,o)),r.push(l));return new Sn(s,r)}function yE(t){return function(){return this.matches(t)}}function vE(t){return function(e){return e.matches(t)}}var YL=Array.prototype.find;function GL(t){return function(){return YL.call(this.children,t)}}function KL(){return this.firstElementChild}function qL(t){return this.select(t==null?KL:GL(typeof t=="function"?t:vE(t)))}var XL=Array.prototype.filter;function QL(){return Array.from(this.children)}function JL(t){return function(){return XL.call(this.children,t)}}function ZL(t){return this.selectAll(t==null?QL:JL(typeof t=="function"?t:vE(t)))}function ej(t){typeof t!="function"&&(t=yE(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=[],l,c=0;c<o;++c)(l=i[c])&&t.call(l,l.__data__,c,i)&&a.push(l);return new Sn(s,this._parents)}function wE(t){return new Array(t.length)}function tj(){return new Sn(this._enter||this._groups.map(wE),this._parents)}function uf(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}uf.prototype={constructor:uf,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function nj(t){return function(){return t}}function sj(t,e,n,s,r,i){for(var o=0,a,l=e.length,c=i.length;o<c;++o)(a=e[o])?(a.__data__=i[o],s[o]=a):n[o]=new uf(t,i[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function rj(t,e,n,s,r,i,o){var a,l,c=new Map,u=e.length,d=i.length,h=new Array(u),p;for(a=0;a<u;++a)(l=e[a])&&(h[a]=p=o.call(l,l.__data__,a,e)+"",c.has(p)?r[a]=l:c.set(p,l));for(a=0;a<d;++a)p=o.call(t,i[a],a,i)+"",(l=c.get(p))?(s[a]=l,l.__data__=i[a],c.delete(p)):n[a]=new uf(t,i[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(h[a])===l&&(r[a]=l)}function ij(t){return t.__data__}function oj(t,e){if(!arguments.length)return Array.from(this,ij);var n=e?rj:sj,s=this._parents,r=this._groups;typeof t!="function"&&(t=nj(t));for(var i=r.length,o=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=s[c],d=r[c],h=d.length,p=aj(t.call(u,u&&u.__data__,c,s)),m=p.length,x=a[c]=new Array(m),w=o[c]=new Array(m),g=l[c]=new Array(h);n(u,d,x,w,g,p,e);for(var y=0,b=0,v,S;y<m;++y)if(v=x[y]){for(y>=b&&(b=y+1);!(S=w[b])&&++b<m;);v._next=S||null}}return o=new Sn(o,s),o._enter=a,o._exit=l,o}function aj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function lj(){return new Sn(this._exit||this._groups.map(wE),this._parents)}function cj(t,e,n){var s=this.enter(),r=this,i=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?i.remove():n(i),s&&r?s.merge(r).order():r}function uj(t){for(var e=t.selection?t.selection():t,n=this._groups,s=e._groups,r=n.length,i=s.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=s[l],d=c.length,h=a[l]=new Array(d),p,m=0;m<d;++m)(p=c[m]||u[m])&&(h[m]=p);for(;l<r;++l)a[l]=n[l];return new Sn(a,this._parents)}function dj(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s=t[e],r=s.length-1,i=s[r],o;--r>=0;)(o=s[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function hj(t){t||(t=fj);function e(d,h){return d&&h?t(d.__data__,h.__data__):!d-!h}for(var n=this._groups,s=n.length,r=new Array(s),i=0;i<s;++i){for(var o=n[i],a=o.length,l=r[i]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new Sn(r,this._parents).order()}function fj(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function pj(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function gj(){return Array.from(this)}function mj(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length;r<i;++r){var o=s[r];if(o)return o}return null}function xj(){let t=0;for(const e of this)++t;return t}function bj(){return!this.node()}function yj(t){for(var e=this._groups,n=0,s=e.length;n<s;++n)for(var r=e[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&t.call(a,a.__data__,i,r);return this}function vj(t){return function(){this.removeAttribute(t)}}function wj(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sj(t,e){return function(){this.setAttribute(t,e)}}function kj(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _j(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Cj(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ej(t,e){var n=k0(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((e==null?n.local?wj:vj:typeof e=="function"?n.local?Cj:_j:n.local?kj:Sj)(n,e))}function SE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Pj(t){return function(){this.style.removeProperty(t)}}function Tj(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Mj(t,e,n){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function Ij(t,e,n){return arguments.length>1?this.each((e==null?Pj:typeof e=="function"?Mj:Tj)(t,e,n??"")):tl(this.node(),t)}function tl(t,e){return t.style.getPropertyValue(e)||SE(t).getComputedStyle(t,null).getPropertyValue(e)}function Rj(t){return function(){delete this[t]}}function Aj(t,e){return function(){this[t]=e}}function Nj(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Oj(t,e){return arguments.length>1?this.each((e==null?Rj:typeof e=="function"?Nj:Aj)(t,e)):this.node()[t]}function kE(t){return t.trim().split(/^|\s+/)}function Qb(t){return t.classList||new _E(t)}function _E(t){this._node=t,this._names=kE(t.getAttribute("class")||"")}_E.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function CE(t,e){for(var n=Qb(t),s=-1,r=e.length;++s<r;)n.add(e[s])}function EE(t,e){for(var n=Qb(t),s=-1,r=e.length;++s<r;)n.remove(e[s])}function Dj(t){return function(){CE(this,t)}}function Lj(t){return function(){EE(this,t)}}function jj(t,e){return function(){(e.apply(this,arguments)?CE:EE)(this,t)}}function Fj(t,e){var n=kE(t+"");if(arguments.length<2){for(var s=Qb(this.node()),r=-1,i=n.length;++r<i;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?jj:e?Dj:Lj)(n,e))}function zj(){this.textContent=""}function Bj(t){return function(){this.textContent=t}}function $j(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Uj(t){return arguments.length?this.each(t==null?zj:(typeof t=="function"?$j:Bj)(t)):this.node().textContent}function Wj(){this.innerHTML=""}function Hj(t){return function(){this.innerHTML=t}}function Vj(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Yj(t){return arguments.length?this.each(t==null?Wj:(typeof t=="function"?Vj:Hj)(t)):this.node().innerHTML}function Gj(){this.nextSibling&&this.parentNode.appendChild(this)}function Kj(){return this.each(Gj)}function qj(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xj(){return this.each(qj)}function Qj(t){var e=typeof t=="function"?t:mE(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Jj(){return null}function Zj(t,e){var n=typeof t=="function"?t:mE(t),s=e==null?Jj:typeof e=="function"?e:Xb(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function eF(){var t=this.parentNode;t&&t.removeChild(this)}function tF(){return this.each(eF)}function nF(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function sF(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rF(t){return this.select(t?sF:nF)}function iF(t){return arguments.length?this.property("__data__",t):this.node().__data__}function oF(t){return function(e){t.call(this,e,this.__data__)}}function aF(t){return t.trim().split(/^|\s+/).map(function(e){var n="",s=e.indexOf(".");return s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),{type:e,name:n}})}function lF(t){return function(){var e=this.__on;if(e){for(var n=0,s=-1,r=e.length,i;n<r;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++s]=i;++s?e.length=s:delete this.__on}}}function cF(t,e,n){return function(){var s=this.__on,r,i=oF(e);if(s){for(var o=0,a=s.length;o<a;++o)if((r=s[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=e;return}}this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},s?s.push(r):this.__on=[r]}}function uF(t,e,n){var s=aF(t+""),r,i=s.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<i;++r)if((o=s[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?cF:lF,r=0;r<i;++r)this.each(a(s[r],e,n));return this}function PE(t,e,n){var s=SE(t),r=s.CustomEvent;typeof r=="function"?r=new r(e,n):(r=s.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function dF(t,e){return function(){return PE(this,t,e)}}function hF(t,e){return function(){return PE(this,t,e.apply(this,arguments))}}function fF(t,e){return this.each((typeof e=="function"?hF:dF)(t,e))}function*pF(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length,o;r<i;++r)(o=s[r])&&(yield o)}var Jb=[null];function Sn(t,e){this._groups=t,this._parents=e}function zu(){return new Sn([[document.documentElement]],Jb)}function gF(){return this}Sn.prototype=zu.prototype={constructor:Sn,select:UL,selectAll:VL,selectChild:qL,selectChildren:ZL,filter:ej,data:oj,enter:tj,exit:lj,join:cj,merge:uj,selection:gF,order:dj,sort:hj,call:pj,nodes:gj,node:mj,size:xj,empty:bj,each:yj,attr:Ej,style:Ij,property:Oj,classed:Fj,text:Uj,html:Yj,raise:Kj,lower:Xj,append:Qj,insert:Zj,remove:tF,clone:rF,datum:iF,on:uF,dispatch:fF,[Symbol.iterator]:pF};function Md(t){return typeof t=="string"?new Sn([[document.querySelector(t)]],[document.documentElement]):new Sn([[t]],Jb)}function mF(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xF(t,e){if(t=mF(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function bF(t){return typeof t=="string"?new Sn([document.querySelectorAll(t)],[document.documentElement]):new Sn([xE(t)],Jb)}function Zb(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function TE(t,e){var n=Object.create(t.prototype);for(var s in e)n[s]=e[s];return n}function Bu(){}var iu=.7,df=1/iu,fa="\\s*([+-]?\\d+)\\s*",ou="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yF=/^#([0-9a-f]{3,8})$/,vF=new RegExp(`^rgb\\(${fa},${fa},${fa}\\)$`),wF=new RegExp(`^rgb\\(${Zs},${Zs},${Zs}\\)$`),SF=new RegExp(`^rgba\\(${fa},${fa},${fa},${ou}\\)$`),kF=new RegExp(`^rgba\\(${Zs},${Zs},${Zs},${ou}\\)$`),_F=new RegExp(`^hsl\\(${ou},${Zs},${Zs}\\)$`),CF=new RegExp(`^hsla\\(${ou},${Zs},${Zs},${ou}\\)$`),w2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zb(Bu,po,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:S2,formatHex:S2,formatHex8:EF,formatHsl:PF,formatRgb:k2,toString:k2});function S2(){return this.rgb().formatHex()}function EF(){return this.rgb().formatHex8()}function PF(){return ME(this).formatHsl()}function k2(){return this.rgb().formatRgb()}function po(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=yF.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?_2(e):n===3?new Rn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Id(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Id(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=vF.exec(t))?new Rn(e[1],e[2],e[3],1):(e=wF.exec(t))?new Rn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=SF.exec(t))?Id(e[1],e[2],e[3],e[4]):(e=kF.exec(t))?Id(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_F.exec(t))?P2(e[1],e[2]/100,e[3]/100,1):(e=CF.exec(t))?P2(e[1],e[2]/100,e[3]/100,e[4]):w2.hasOwnProperty(t)?_2(w2[t]):t==="transparent"?new Rn(NaN,NaN,NaN,0):null}function _2(t){return new Rn(t>>16&255,t>>8&255,t&255,1)}function Id(t,e,n,s){return s<=0&&(t=e=n=NaN),new Rn(t,e,n,s)}function TF(t){return t instanceof Bu||(t=po(t)),t?(t=t.rgb(),new Rn(t.r,t.g,t.b,t.opacity)):new Rn}function Hm(t,e,n,s){return arguments.length===1?TF(t):new Rn(t,e,n,s??1)}function Rn(t,e,n,s){this.r=+t,this.g=+e,this.b=+n,this.opacity=+s}Zb(Rn,Hm,TE(Bu,{brighter(t){return t=t==null?df:Math.pow(df,t),new Rn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?iu:Math.pow(iu,t),new Rn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rn(to(this.r),to(this.g),to(this.b),hf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C2,formatHex:C2,formatHex8:MF,formatRgb:E2,toString:E2}));function C2(){return`#${Hi(this.r)}${Hi(this.g)}${Hi(this.b)}`}function MF(){return`#${Hi(this.r)}${Hi(this.g)}${Hi(this.b)}${Hi((isNaN(this.opacity)?1:this.opacity)*255)}`}function E2(){const t=hf(this.opacity);return`${t===1?"rgb(":"rgba("}${to(this.r)}, ${to(this.g)}, ${to(this.b)}${t===1?")":`, ${t})`}`}function hf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function to(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hi(t){return t=to(t),(t<16?"0":"")+t.toString(16)}function P2(t,e,n,s){return s<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ps(t,e,n,s)}function ME(t){if(t instanceof Ps)return new Ps(t.h,t.s,t.l,t.opacity);if(t instanceof Bu||(t=po(t)),!t)return new Ps;if(t instanceof Ps)return t;t=t.rgb();var e=t.r/255,n=t.g/255,s=t.b/255,r=Math.min(e,n,s),i=Math.max(e,n,s),o=NaN,a=i-r,l=(i+r)/2;return a?(e===i?o=(n-s)/a+(n<s)*6:n===i?o=(s-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+r:2-i-r,o*=60):a=l>0&&l<1?0:o,new Ps(o,a,l,t.opacity)}function IF(t,e,n,s){return arguments.length===1?ME(t):new Ps(t,e,n,s??1)}function Ps(t,e,n,s){this.h=+t,this.s=+e,this.l=+n,this.opacity=+s}Zb(Ps,IF,TE(Bu,{brighter(t){return t=t==null?df:Math.pow(df,t),new Ps(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?iu:Math.pow(iu,t),new Ps(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*e,r=2*n-s;return new Rn(ug(t>=240?t-240:t+120,r,s),ug(t,r,s),ug(t<120?t+240:t-120,r,s),this.opacity)},clamp(){return new Ps(T2(this.h),Rd(this.s),Rd(this.l),hf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=hf(this.opacity);return`${t===1?"hsl(":"hsla("}${T2(this.h)}, ${Rd(this.s)*100}%, ${Rd(this.l)*100}%${t===1?")":`, ${t})`}`}}));function T2(t){return t=(t||0)%360,t<0?t+360:t}function Rd(t){return Math.max(0,Math.min(1,t||0))}function ug(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ey=t=>()=>t;function RF(t,e){return function(n){return t+n*e}}function AF(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(s){return Math.pow(t+s*e,n)}}function NF(t){return(t=+t)==1?IE:function(e,n){return n-e?AF(e,n,t):ey(isNaN(e)?n:e)}}function IE(t,e){var n=e-t;return n?RF(t,n):ey(isNaN(t)?e:t)}const ff=function t(e){var n=NF(e);function s(r,i){var o=n((r=Hm(r)).r,(i=Hm(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),c=IE(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return s.gamma=t,s}(1);function OF(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,s=e.slice(),r;return function(i){for(r=0;r<n;++r)s[r]=t[r]*(1-i)+e[r]*i;return s}}function DF(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function LF(t,e){var n=e?e.length:0,s=t?Math.min(n,t.length):0,r=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)r[o]=ty(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<s;++o)i[o]=r[o](a);return i}}function jF(t,e){var n=new Date;return t=+t,e=+e,function(s){return n.setTime(t*(1-s)+e*s),n}}function Es(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function FF(t,e){var n={},s={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=ty(t[r],e[r]):s[r]=e[r];return function(i){for(r in n)s[r]=n[r](i);return s}}var Vm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dg=new RegExp(Vm.source,"g");function zF(t){return function(){return t}}function BF(t){return function(e){return t(e)+""}}function RE(t,e){var n=Vm.lastIndex=dg.lastIndex=0,s,r,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(s=Vm.exec(t))&&(r=dg.exec(e));)(i=r.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(s=s[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Es(s,r)})),n=dg.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?BF(l[0].x):zF(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function ty(t,e){var n=typeof e,s;return e==null||n==="boolean"?ey(e):(n==="number"?Es:n==="string"?(s=po(e))?(e=s,ff):RE:e instanceof po?ff:e instanceof Date?jF:DF(e)?OF:Array.isArray(e)?LF:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?FF:Es)(t,e)}function $F(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var M2=180/Math.PI,Ym={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function AE(t,e,n,s,r,i){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*s)&&(n-=t*l,s-=e*l),(a=Math.sqrt(n*n+s*s))&&(n/=a,s/=a,l/=a),t*s<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*M2,skewX:Math.atan(l)*M2,scaleX:o,scaleY:a}}var Ad;function UF(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ym:AE(e.a,e.b,e.c,e.d,e.e,e.f)}function WF(t){return t==null||(Ad||(Ad=document.createElementNS("http://www.w3.org/2000/svg","g")),Ad.setAttribute("transform",t),!(t=Ad.transform.baseVal.consolidate()))?Ym:(t=t.matrix,AE(t.a,t.b,t.c,t.d,t.e,t.f))}function NE(t,e,n,s){function r(c){return c.length?c.pop()+" ":""}function i(c,u,d,h,p,m){if(c!==d||u!==h){var x=p.push("translate(",null,e,null,n);m.push({i:x-4,x:Es(c,d)},{i:x-2,x:Es(u,h)})}else(d||h)&&p.push("translate("+d+e+h+n)}function o(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(r(d)+"rotate(",null,s)-2,x:Es(c,u)})):u&&d.push(r(d)+"rotate("+u+s)}function a(c,u,d,h){c!==u?h.push({i:d.push(r(d)+"skewX(",null,s)-2,x:Es(c,u)}):u&&d.push(r(d)+"skewX("+u+s)}function l(c,u,d,h,p,m){if(c!==d||u!==h){var x=p.push(r(p)+"scale(",null,",",null,")");m.push({i:x-4,x:Es(c,d)},{i:x-2,x:Es(u,h)})}else(d!==1||h!==1)&&p.push(r(p)+"scale("+d+","+h+")")}return function(c,u){var d=[],h=[];return c=t(c),u=t(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,h),o(c.rotate,u.rotate,d,h),a(c.skewX,u.skewX,d,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(p){for(var m=-1,x=h.length,w;++m<x;)d[(w=h[m]).i]=w.x(p);return d.join("")}}}var HF=NE(UF,"px, ","px)","deg)"),VF=NE(WF,", ",")",")"),nl=0,oc=0,Wl=0,OE=1e3,pf,ac,gf=0,go=0,_0=0,au=typeof performance=="object"&&performance.now?performance:Date,DE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ny(){return go||(DE(YF),go=au.now()+_0)}function YF(){go=0}function mf(){this._call=this._time=this._next=null}mf.prototype=LE.prototype={constructor:mf,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ny():+n)+(e==null?0:+e),!this._next&&ac!==this&&(ac?ac._next=this:pf=this,ac=this),this._call=t,this._time=n,Gm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gm())}};function LE(t,e,n){var s=new mf;return s.restart(t,e,n),s}function GF(){ny(),++nl;for(var t=pf,e;t;)(e=go-t._time)>=0&&t._call.call(void 0,e),t=t._next;--nl}function I2(){go=(gf=au.now())+_0,nl=oc=0;try{GF()}finally{nl=0,qF(),go=0}}function KF(){var t=au.now(),e=t-gf;e>OE&&(_0-=e,gf=t)}function qF(){for(var t,e=pf,n,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:pf=n);ac=t,Gm(s)}function Gm(t){if(!nl){oc&&(oc=clearTimeout(oc));var e=t-go;e>24?(t<1/0&&(oc=setTimeout(I2,t-au.now()-_0)),Wl&&(Wl=clearInterval(Wl))):(Wl||(gf=au.now(),Wl=setInterval(KF,OE)),nl=1,DE(I2))}}function R2(t,e,n){var s=new mf;return e=e==null?0:+e,s.restart(r=>{s.stop(),t(r+e)},e,n),s}var XF=gE("start","end","cancel","interrupt"),QF=[],jE=0,A2=1,Km=2,mh=3,N2=4,qm=5,xh=6;function C0(t,e,n,s,r,i){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;JF(t,n,{name:e,index:s,group:r,on:XF,tween:QF,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:jE})}function sy(t,e){var n=Os(t,e);if(n.state>jE)throw new Error("too late; already scheduled");return n}function sr(t,e){var n=Os(t,e);if(n.state>mh)throw new Error("too late; already running");return n}function Os(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function JF(t,e,n){var s=t.__transition,r;s[e]=n,n.timer=LE(i,0,n.time);function i(c){n.state=A2,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,h,p;if(n.state!==A2)return l();for(u in s)if(p=s[u],p.name===n.name){if(p.state===mh)return R2(o);p.state===N2?(p.state=xh,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete s[u]):+u<e&&(p.state=xh,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete s[u])}if(R2(function(){n.state===mh&&(n.state=N2,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Km,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Km){for(n.state=mh,r=new Array(h=n.tween.length),u=0,d=-1;u<h;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=p);r.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=qm,1),d=-1,h=r.length;++d<h;)r[d].call(t,u);n.state===qm&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=xh,n.timer.stop(),delete s[e];for(var c in s)return;delete t.__transition}}function ZF(t,e){var n=t.__transition,s,r,i=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((s=n[o]).name!==e){i=!1;continue}r=s.state>Km&&s.state<qm,s.state=xh,s.timer.stop(),s.on.call(r?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete n[o]}i&&delete t.__transition}}function ez(t){return this.each(function(){ZF(this,t)})}function tz(t,e){var n,s;return function(){var r=sr(this,t),i=r.tween;if(i!==n){s=n=i;for(var o=0,a=s.length;o<a;++o)if(s[o].name===e){s=s.slice(),s.splice(o,1);break}}r.tween=s}}function nz(t,e,n){var s,r;if(typeof n!="function")throw new Error;return function(){var i=sr(this,t),o=i.tween;if(o!==s){r=(s=o).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}i.tween=r}}function sz(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s=Os(this.node(),n).tween,r=0,i=s.length,o;r<i;++r)if((o=s[r]).name===t)return o.value;return null}return this.each((e==null?tz:nz)(n,t,e))}function ry(t,e,n){var s=t._id;return t.each(function(){var r=sr(this,s);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Os(r,s).value[e]}}function FE(t,e){var n;return(typeof e=="number"?Es:e instanceof po?ff:(n=po(e))?(e=n,ff):RE)(t,e)}function rz(t){return function(){this.removeAttribute(t)}}function iz(t){return function(){this.removeAttributeNS(t.space,t.local)}}function oz(t,e,n){var s,r=n+"",i;return function(){var o=this.getAttribute(t);return o===r?null:o===s?i:i=e(s=o,n)}}function az(t,e,n){var s,r=n+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===s?i:i=e(s=o,n)}}function lz(t,e,n){var s,r,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a)))}}function cz(t,e,n){var s,r,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a)))}}function uz(t,e){var n=k0(t),s=n==="transform"?VF:FE;return this.attrTween(t,typeof e=="function"?(n.local?cz:lz)(n,s,ry(this,"attr."+t,e)):e==null?(n.local?iz:rz)(n):(n.local?az:oz)(n,s,e))}function dz(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function hz(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function fz(t,e){var n,s;function r(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&hz(t,i)),n}return r._value=e,r}function pz(t,e){var n,s;function r(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&dz(t,i)),n}return r._value=e,r}function gz(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var s=k0(t);return this.tween(n,(s.local?fz:pz)(s,e))}function mz(t,e){return function(){sy(this,t).delay=+e.apply(this,arguments)}}function xz(t,e){return e=+e,function(){sy(this,t).delay=e}}function bz(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?mz:xz)(e,t)):Os(this.node(),e).delay}function yz(t,e){return function(){sr(this,t).duration=+e.apply(this,arguments)}}function vz(t,e){return e=+e,function(){sr(this,t).duration=e}}function wz(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?yz:vz)(e,t)):Os(this.node(),e).duration}function Sz(t,e){if(typeof e!="function")throw new Error;return function(){sr(this,t).ease=e}}function kz(t){var e=this._id;return arguments.length?this.each(Sz(e,t)):Os(this.node(),e).ease}function _z(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;sr(this,t).ease=n}}function Cz(t){if(typeof t!="function")throw new Error;return this.each(_z(this._id,t))}function Ez(t){typeof t!="function"&&(t=yE(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=[],l,c=0;c<o;++c)(l=i[c])&&t.call(l,l.__data__,c,i)&&a.push(l);return new Pr(s,this._parents,this._name,this._id)}function Pz(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,s=e.length,r=n.length,i=Math.min(s,r),o=new Array(s),a=0;a<i;++a)for(var l=e[a],c=n[a],u=l.length,d=o[a]=new Array(u),h,p=0;p<u;++p)(h=l[p]||c[p])&&(d[p]=h);for(;a<s;++a)o[a]=e[a];return new Pr(o,this._parents,this._name,this._id)}function Tz(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Mz(t,e,n){var s,r,i=Tz(e)?sy:sr;return function(){var o=i(this,t),a=o.on;a!==s&&(r=(s=a).copy()).on(e,n),o.on=r}}function Iz(t,e){var n=this._id;return arguments.length<2?Os(this.node(),n).on.on(t):this.each(Mz(n,t,e))}function Rz(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Az(){return this.on("end.remove",Rz(this._id))}function Nz(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Xb(t));for(var s=this._groups,r=s.length,i=new Array(r),o=0;o<r;++o)for(var a=s[o],l=a.length,c=i[o]=new Array(l),u,d,h=0;h<l;++h)(u=a[h])&&(d=t.call(u,u.__data__,h,a))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,C0(c[h],e,n,h,c,Os(u,n)));return new Pr(i,this._parents,e,n)}function Oz(t){var e=this._name,n=this._id;typeof t!="function"&&(t=bE(t));for(var s=this._groups,r=s.length,i=[],o=[],a=0;a<r;++a)for(var l=s[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var h=t.call(u,u.__data__,d,l),p,m=Os(u,n),x=0,w=h.length;x<w;++x)(p=h[x])&&C0(p,e,n,x,h,m);i.push(h),o.push(u)}return new Pr(i,o,e,n)}var Dz=zu.prototype.constructor;function Lz(){return new Dz(this._groups,this._parents)}function jz(t,e){var n,s,r;return function(){var i=tl(this,t),o=(this.style.removeProperty(t),tl(this,t));return i===o?null:i===n&&o===s?r:r=e(n=i,s=o)}}function zE(t){return function(){this.style.removeProperty(t)}}function Fz(t,e,n){var s,r=n+"",i;return function(){var o=tl(this,t);return o===r?null:o===s?i:i=e(s=o,n)}}function zz(t,e,n){var s,r,i;return function(){var o=tl(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),tl(this,t))),o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a))}}function Bz(t,e){var n,s,r,i="style."+e,o="end."+i,a;return function(){var l=sr(this,t),c=l.on,u=l.value[i]==null?a||(a=zE(e)):void 0;(c!==n||r!==u)&&(s=(n=c).copy()).on(o,r=u),l.on=s}}function $z(t,e,n){var s=(t+="")=="transform"?HF:FE;return e==null?this.styleTween(t,jz(t,s)).on("end.style."+t,zE(t)):typeof e=="function"?this.styleTween(t,zz(t,s,ry(this,"style."+t,e))).each(Bz(this._id,t)):this.styleTween(t,Fz(t,s,e),n).on("end.style."+t,null)}function Uz(t,e,n){return function(s){this.style.setProperty(t,e.call(this,s),n)}}function Wz(t,e,n){var s,r;function i(){var o=e.apply(this,arguments);return o!==r&&(s=(r=o)&&Uz(t,o,n)),s}return i._value=e,i}function Hz(t,e,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,Wz(t,e,n??""))}function Vz(t){return function(){this.textContent=t}}function Yz(t){return function(){var e=t(this);this.textContent=e??""}}function Gz(t){return this.tween("text",typeof t=="function"?Yz(ry(this,"text",t)):Vz(t==null?"":t+""))}function Kz(t){return function(e){this.textContent=t.call(this,e)}}function qz(t){var e,n;function s(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Kz(r)),e}return s._value=t,s}function Xz(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,qz(t))}function Qz(){for(var t=this._name,e=this._id,n=BE(),s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Os(l,e);C0(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Pr(s,this._parents,t,n)}function Jz(){var t,e,n=this,s=n._id,r=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--r===0&&i()}};n.each(function(){var c=sr(this,s),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&i()})}var Zz=0;function Pr(t,e,n,s){this._groups=t,this._parents=e,this._name=n,this._id=s}function BE(){return++Zz}var ir=zu.prototype;Pr.prototype={constructor:Pr,select:Nz,selectAll:Oz,selectChild:ir.selectChild,selectChildren:ir.selectChildren,filter:Ez,merge:Pz,selection:Lz,transition:Qz,call:ir.call,nodes:ir.nodes,node:ir.node,size:ir.size,empty:ir.empty,each:ir.each,on:Iz,attr:uz,attrTween:gz,style:$z,styleTween:Hz,text:Gz,textTween:Xz,remove:Az,tween:sz,delay:bz,duration:wz,ease:kz,easeVarying:Cz,end:Jz,[Symbol.iterator]:ir[Symbol.iterator]};function eB(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var tB={time:null,delay:0,duration:250,ease:eB};function nB(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function sB(t){var e,n;t instanceof Pr?(e=t._id,t=t._name):(e=BE(),(n=tB).time=ny(),t=t==null?null:t+"");for(var s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&C0(l,t,e,c,o,n||nB(l,e));return new Pr(s,this._parents,t,e)}zu.prototype.interrupt=ez;zu.prototype.transition=sB;function rB(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function xf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function sl(t){return t=xf(Math.abs(t)),t?t[1]:NaN}function iB(t,e){return function(n,s){for(var r=n.length,i=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>s&&(a=Math.max(1,s-l)),i.push(n.substring(r-=a,r+a)),!((l+=a+1)>s));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function oB(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var aB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bf(t){if(!(e=aB.exec(t)))throw new Error("invalid format: "+t);var e;return new iy({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}bf.prototype=iy.prototype;function iy(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}iy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lB(t){e:for(var e=t.length,n=1,s=-1,r;n<e;++n)switch(t[n]){case".":s=r=n;break;case"0":s===0&&(s=n),r=n;break;default:if(!+t[n])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(r+1):t}var $E;function cB(t,e){var n=xf(t,e);if(!n)return t+"";var s=n[0],r=n[1],i=r-($E=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+xf(t,Math.max(0,e+i-1))[0]}function O2(t,e){var n=xf(t,e);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const D2={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:rB,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>O2(t*100,e),r:O2,s:cB,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function L2(t){return t}var j2=Array.prototype.map,F2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uB(t){var e=t.grouping===void 0||t.thousands===void 0?L2:iB(j2.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?L2:oB(j2.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=bf(d);var h=d.fill,p=d.align,m=d.sign,x=d.symbol,w=d.zero,g=d.width,y=d.comma,b=d.precision,v=d.trim,S=d.type;S==="n"?(y=!0,S="g"):D2[S]||(b===void 0&&(b=12),v=!0,S="g"),(w||h==="0"&&p==="=")&&(w=!0,h="0",p="=");var _=x==="$"?n:x==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=x==="$"?s:/[%p]/.test(S)?o:"",T=D2[S],P=/[defgprs%]/.test(S);b=b===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function C(R){var A=_,$=E,H,F,N;if(S==="c")$=T(R)+$,R="";else{R=+R;var z=R<0||1/R<0;if(R=isNaN(R)?l:T(Math.abs(R),b),v&&(R=lB(R)),z&&+R==0&&m!=="+"&&(z=!1),A=(z?m==="("?m:a:m==="-"||m==="("?"":m)+A,$=(S==="s"?F2[8+$E/3]:"")+$+(z&&m==="("?")":""),P){for(H=-1,F=R.length;++H<F;)if(N=R.charCodeAt(H),48>N||N>57){$=(N===46?r+R.slice(H+1):R.slice(H))+$,R=R.slice(0,H);break}}}y&&!w&&(R=e(R,1/0));var L=A.length+R.length+$.length,B=L<g?new Array(g-L+1).join(h):"";switch(y&&w&&(R=e(B+R,B.length?g-$.length:1/0),B=""),p){case"<":R=A+R+$+B;break;case"=":R=A+B+R+$;break;case"^":R=B.slice(0,L=B.length>>1)+A+R+$+B.slice(L);break;default:R=B+A+R+$;break}return i(R)}return C.toString=function(){return d+""},C}function u(d,h){var p=c((d=bf(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(sl(h)/3)))*3,x=Math.pow(10,-m),w=F2[8+m/3];return function(g){return p(x*g)+w}}return{format:c,formatPrefix:u}}var Nd,UE,WE;dB({thousands:",",grouping:[3],currency:["$",""]});function dB(t){return Nd=uB(t),UE=Nd.format,WE=Nd.formatPrefix,Nd}function hB(t){return Math.max(0,-sl(Math.abs(t)))}function fB(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sl(e)/3)))*3-sl(Math.abs(t)))}function pB(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,sl(e)-sl(t))+1}function oy(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const z2=Symbol("implicit");function HE(){var t=new g2,e=[],n=[],s=z2;function r(i){let o=t.get(i);if(o===void 0){if(s!==z2)return s;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return r.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new g2;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(i){return arguments.length?(n=Array.from(i),r):n.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return HE(e,n).unknown(s)},oy.apply(r,arguments),r}function VE(){var t=HE().unknown(void 0),e=t.domain,n=t.range,s=0,r=1,i,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var h=e().length,p=r<s,m=p?r:s,x=p?s:r;i=(x-m)/Math.max(1,h-l+c*2),a&&(i=Math.floor(i)),m+=(x-m-i*(h-l))*u,o=i*(1-l),a&&(m=Math.round(m),o=Math.round(o));var w=TL(h).map(function(g){return m+i*g});return n(p?w.reverse():w)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([s,r]=h,s=+s,r=+r,d()):[s,r]},t.rangeRound=function(h){return[s,r]=h,s=+s,r=+r,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(h){return arguments.length?(a=!!h,d()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},t.copy=function(){return VE(e(),[s,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},oy.apply(d(),arguments)}function gB(t){return function(){return t}}function mB(t){return+t}var B2=[0,1];function na(t){return t}function Xm(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:gB(isNaN(e)?NaN:.5)}function xB(t,e){var n;return t>e&&(n=t,t=e,e=n),function(s){return Math.max(t,Math.min(e,s))}}function bB(t,e,n){var s=t[0],r=t[1],i=e[0],o=e[1];return r<s?(s=Xm(r,s),i=n(o,i)):(s=Xm(s,r),i=n(i,o)),function(a){return i(s(a))}}function yB(t,e,n){var s=Math.min(t.length,e.length)-1,r=new Array(s),i=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<s;)r[o]=Xm(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=bL(t,a,1,s)-1;return i[l](r[l](a))}}function vB(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wB(){var t=B2,e=B2,n=ty,s,r,i,o=na,a,l,c;function u(){var h=Math.min(t.length,e.length);return o!==na&&(o=xB(t[0],t[h-1])),a=h>2?yB:bB,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?i:(l||(l=a(t.map(s),e,n)))(s(o(h)))}return d.invert=function(h){return o(r((c||(c=a(e,t.map(s),Es)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,mB),u()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=$F,u()},d.clamp=function(h){return arguments.length?(o=h?!0:na,u()):o!==na},d.interpolate=function(h){return arguments.length?(n=h,u()):n},d.unknown=function(h){return arguments.length?(i=h,d):i},function(h,p){return s=h,r=p,u()}}function SB(){return wB()(na,na)}function kB(t,e,n,s){var r=EL(t,e,n),i;switch(s=bf(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return s.precision==null&&!isNaN(i=fB(r,o))&&(s.precision=i),WE(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=pB(r,Math.max(Math.abs(t),Math.abs(e))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=hB(r))&&(s.precision=i-(s.type==="%")*2);break}}return UE(s)}function _B(t){var e=t.domain;return t.ticks=function(n){var s=e();return CL(s[0],s[s.length-1],n??10)},t.tickFormat=function(n,s){var r=e();return kB(r[0],r[r.length-1],n??10,s)},t.nice=function(n){n==null&&(n=10);var s=e(),r=0,i=s.length-1,o=s[r],a=s[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=i,i=c);u-- >0;){if(c=$m(o,a,n),c===l)return s[r]=o,s[i]=a,e(s);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function YE(){var t=SB();return t.copy=function(){return vB(t,YE())},oy.apply(t,arguments),_B(t)}function lc(t,e,n){this.k=t,this.x=e,this.y=n}lc.prototype={constructor:lc,scale:function(t){return t===1?this:new lc(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new lc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};lc.prototype;function Lo({data:t,height:e=150,width:n=900,maxBars:s=60,getTimestamp:r=i=>i.timestamp||Date.now()}){const i=k.useRef(null),o=k.useRef(null),[a,l]=k.useState([]),c=k.useCallback(u=>r(u),[r]);return k.useEffect(()=>{if(t.length===0){l([]);return}const u=Date.now(),d=new Map;t.forEach(p=>{const m=c(p);if(!m||isNaN(m)||!isFinite(m))return;const x=Math.floor((u-m)/1e3);if(x>=0&&x<s){const w=d.get(x)||0;d.set(x,w+1)}});const h=[];for(let p=s-1;p>=0;p--)h.push({time:p,count:d.get(p)||0});l(h)},[t,s,c]),k.useEffect(()=>{if(!i.current||a.length===0)return;const u=Md(i.current);u.selectAll("*").remove();const d={top:20,right:20,bottom:40,left:50},h=n-d.left-d.right,p=e-d.top-d.bottom,m=u.append("g").attr("transform",`translate(${d.left}, ${d.top})`),x=VE().domain(a.map((y,b)=>b.toString())).range([0,h]).padding(.1);PL(a,y=>y.count);const g=YE().domain([0,5]).range([p,0]).nice();return m.append("g").attr("transform",`translate(0, ${p})`).call(b2(x).tickValues(x.domain().filter((y,b)=>b%Math.ceil(s/10)===0)).tickFormat((y,b)=>{var E;const v=parseInt(y||"0"),S=((E=a[v])==null?void 0:E.time)||0;return S===0?"now":S<60?`-${S}s`:`-${Math.floor(S/60)}m`})).selectAll("text").attr("class","data-rate-axis-text"),m.append("g").call(DL(g).ticks(5)).selectAll("text").attr("class","data-rate-axis-text"),m.append("text").attr("class","data-rate-y-axis-label").attr("transform","rotate(-90)").attr("y",-35).attr("x",-p/2).attr("text-anchor","middle").text("Data Points/sec"),m.selectAll("rect").data(a).enter().append("rect").attr("x",(y,b)=>x(b.toString())||0).attr("y",y=>g(y.count)).attr("width",x.bandwidth()).attr("height",y=>p-g(y.count)).attr("fill",y=>y.count>=3.5?"#4CAF50":y.count>=2?"#FF9800":y.count>0?"#F44336":"#E0E0E0").attr("rx",2).style("opacity",.8).on("mouseover",function(y,b){var P;Md(this).style("opacity",1),o.current&&o.current.remove();const S=Md("body").append("div").attr("class","data-rate-tooltip").style("opacity",0),_=(P=i.current)==null?void 0:P.getBoundingClientRect(),[E,T]=xF(y,i.current);_&&S.style("left",`${_.left+E+10}px`).style("top",`${_.top+T-10}px`).text(`${b.count} data points ${b.time===0?"now":`${b.time}s ago`}`).transition().duration(200).style("opacity",1),o.current=S}).on("mouseout",function(){Md(this).style("opacity",.8),o.current&&(o.current.transition().duration(200).style("opacity",0).remove(),o.current=null)}),m.append("g").attr("class","grid").attr("transform",`translate(0, ${p})`).call(b2(x).tickSize(-p).tickValues(x.domain().filter((y,b)=>b%Math.ceil(s/10)===0)).tickFormat(()=>"")).selectAll("line").attr("class","data-rate-grid-line"),()=>{o.current&&(o.current.remove(),o.current=null),bF(".data-rate-tooltip").remove()}},[a,n,e,s]),f.jsxs("div",{className:"data-rate-histogram-container",children:[f.jsx("h4",{className:"data-rate-histogram-title",children:"Data Rate (points/second)"}),f.jsx("svg",{ref:i,className:"data-rate-histogram-svg",width:n,height:e})]})}function CB(){const[t,e]=k.useState(Ru),[n,s]=k.useState(i0),[r,i]=k.useState(Mb),[o,a]=k.useState(100),[l,c]=k.useState(10),{walletAddress:u,authToken:d,error:h}=ml(),{markets:p,selectedMarketId:m,setSelectedMarketId:x,fetchMarkets:w,loadingMarkets:g,getMarket:y}=_o({baseURL:t,sessionToken:d,autoFetchMarkets:!0}),[b,v]=k.useState("0"),[S,_]=k.useState("1m"),[E,T]=k.useState("0"),[P,C]=k.useState("BTC/USDC");k.useEffect(()=>{if(m){const O=String(m);v(O),T(O);const ne=typeof m=="string"?parseInt(m,10):Number(m);if(!isNaN(ne)&&isFinite(ne)){const re=y(ne);re&&C(re.symbol||`${re.baseAsset}/${re.quoteAsset}`)}}},[m,y]);const[R,A]=k.useState(null),[$,H]=k.useState("Data Details"),[F,N]=k.useState(!1),{klineData:z,loading:L,error:B,isConnected:M}=gR({baseURL:t,wsURL:n,marketId:b,interval:S,authToken:d,walletAddress:u,deviceID:r,maxDataPoints:o}),{lastPrice:G,markPrice:j,error:I,isConnected:U}=r0({baseURL:t,wsURL:n,marketId:E,symbol:P,authToken:d,walletAddress:u,deviceID:r}),[q,X]=k.useState([]),[K,ee]=k.useState([]);k.useEffect(()=>{G&&X(O=>{const ne=[...O,{...G,value:G.price,timestamp:G.timestamp,arrivalTime:Date.now(),raw:G}];return ne.length>o?ne.slice(-o):ne})},[G,o]),k.useEffect(()=>{j&&ee(O=>{const ne=[...O,{...j,value:j.mark_price,timestamp:j.timestamp,arrivalTime:Date.now(),raw:j}];return ne.length>o?ne.slice(-o):ne})},[j,o]);const{buckets:se,loading:ge,error:Ue,refresh:Pe}=Z5({baseURL:t,authToken:d,walletAddress:u,refreshInterval:5e3}),{positions:ke,loading:Te,error:ft,isConnected:D,refresh:Q}=J5({baseURL:t,wsURL:n,authToken:d,walletAddress:u,deviceID:r,useWebSocket:!0}),{orders:oe,loading:de,error:ve,isConnected:ye,refresh:W}=hE({baseURL:t,wsURL:n,authToken:d,walletAddress:u,deviceID:r,useWebSocket:!0}),le=(O,ne)=>{A(O.raw||O),H(ne),N(!0)};return f.jsxs("div",{className:"App-content-row",children:[f.jsx("h1",{style:{marginBottom:"2rem",color:"#333"},children:"Hooks Test Page"}),f.jsxs("div",{className:"App-section",children:[f.jsx("h2",{style:{marginTop:0,marginBottom:"1rem",color:"#495057"},children:"Shared Configuration"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:[f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["API Base URL:",f.jsx("input",{type:"text",value:t,onChange:O=>e(O.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})}),f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["WebSocket URL:",f.jsx("input",{type:"text",value:n,onChange:O=>s(O.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})}),f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Wallet Address (from useOnboard):",f.jsx("input",{type:"text",value:u||"",readOnly:!0,placeholder:"Set via useOnboard hook",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da",backgroundColor:"#f8f9fa",cursor:"not-allowed"}}),h&&f.jsx("div",{style:{color:"#dc3545",fontSize:"0.875rem",marginTop:"0.25rem"},children:h})]})}),f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Auth Token (from useOnboard):",f.jsx("input",{type:"text",value:d||"",readOnly:!0,placeholder:"Set via useOnboard hook",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da",backgroundColor:"#f8f9fa",cursor:"not-allowed"}})]})}),f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Market Selection:",f.jsxs("select",{value:m||"",onChange:O=>{const ne=O.target.value;ne&&x(ne)},style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"},children:[f.jsx("option",{value:"",children:"Select a market..."}),p.map(O=>f.jsxs("option",{value:String(O.id),children:[O.symbol||`${O.baseAsset}/${O.quoteAsset}`," (ID: ",O.id,")"]},O.id))]}),g&&f.jsx("div",{style:{color:"#6c757d",fontSize:"0.875rem",marginTop:"0.25rem"},children:"Loading markets..."}),!g&&p.length===0&&f.jsx("button",{onClick:()=>w(),style:{marginTop:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem"},children:"Fetch Markets"})]})}),f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Device ID:",f.jsx("input",{type:"text",value:r,onChange:O=>i(O.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})}),f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Max Data Points (Memory):",f.jsx("input",{type:"number",value:o,onChange:O=>a(Math.max(10,parseInt(O.target.value)||100)),min:"10",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})}),f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Max Visible Rectangles:",f.jsx("input",{type:"number",value:l,onChange:O=>c(Math.max(1,parseInt(O.target.value)||10)),min:"1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})})]})]}),f.jsxs("div",{className:"App-section",children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[f.jsx("h2",{style:{margin:0,color:"#495057"},children:"Kline Hook"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[f.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:M?"#d4edda":"#f8d7da",color:M?"#155724":"#721c24"},children:M?"WS Connected":"WS Disconnected"}),f.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:"#e7f3ff",color:"#004085"},children:[z.length," data points"]})]})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Market ID (controlled by Market Selection above):",f.jsx("input",{type:"text",value:b,onChange:O=>v(O.target.value),placeholder:"Select market from dropdown above",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da",backgroundColor:m?"#f8f9fa":"white"}}),f.jsx("div",{style:{fontSize:"0.75rem",color:"#6c757d",marginTop:"0.25rem"},children:"Can be manually overridden if needed"})]})}),f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Interval:",f.jsxs("select",{value:S,onChange:O=>_(O.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"},children:[f.jsx("option",{value:"1m",children:"1m"}),f.jsx("option",{value:"5m",children:"5m"}),f.jsx("option",{value:"15m",children:"15m"}),f.jsx("option",{value:"1h",children:"1h"}),f.jsx("option",{value:"4h",children:"4h"}),f.jsx("option",{value:"1d",children:"1d"})]})]})})]}),B&&f.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"1rem"},children:["Error: ",B]}),L&&z.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"Loading kline data..."}):z.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"No kline data available"}):f.jsxs(f.Fragment,{children:[f.jsx(Do,{data:z,maxVisible:l,maxDataPoints:o,getValue:O=>O.close||O.high||100,onItemClick:O=>le(O,"Kline Data")}),f.jsx(Lo,{data:z,getTimestamp:O=>{let ne=O.timestamp||O.open_time||Date.now();return ne<9466848e5&&(ne=ne*1e3),ne}})]})]}),f.jsxs("div",{className:"App-section",children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[f.jsx("h2",{style:{margin:0,color:"#495057"},children:"Mark Price Hook"}),f.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:U?"#d4edda":"#f8d7da",color:U?"#155724":"#721c24"},children:U?"WS Connected":"WS Disconnected"})]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Symbol (auto-updated from selected market):",f.jsx("input",{type:"text",value:P,onChange:O=>C(O.target.value),placeholder:"BTC/USDC",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da",backgroundColor:m?"#f8f9fa":"white"}}),f.jsx("div",{style:{fontSize:"0.75rem",color:"#6c757d",marginTop:"0.25rem"},children:"Can be manually overridden if needed"})]})})}),I&&f.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"1rem"},children:["Error: ",I]}),K.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"No mark price data available"}):f.jsxs(f.Fragment,{children:[f.jsx(Do,{data:K,maxVisible:l,maxDataPoints:o,getValue:O=>O.value||O.mark_price||100,onItemClick:O=>le(O,"Mark Price Data")}),f.jsx(Lo,{data:K,getTimestamp:O=>O.arrivalTime||O.timestamp||Date.now()})]})]}),f.jsxs("div",{className:"App-section",children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[f.jsx("h2",{style:{margin:0,color:"#495057"},children:"Last Price Hook"}),f.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:U?"#d4edda":"#f8d7da",color:U?"#155724":"#721c24"},children:U?"WS Connected":"WS Disconnected"})]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:f.jsx("div",{children:f.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Market ID (controlled by Market Selection above):",f.jsx("input",{type:"text",value:E,onChange:O=>T(O.target.value),placeholder:"Select market from dropdown above",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da",backgroundColor:m?"#f8f9fa":"white"}}),f.jsx("div",{style:{fontSize:"0.75rem",color:"#6c757d",marginTop:"0.25rem"},children:"Can be manually overridden if needed"})]})})}),I&&f.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"1rem"},children:["Error: ",I]}),q.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"No last price data available"}):f.jsxs(f.Fragment,{children:[f.jsx(Do,{data:q,maxVisible:l,maxDataPoints:o,getValue:O=>O.value||O.price||100,onItemClick:O=>le(O,"Last Price Data")}),f.jsx(Lo,{data:q,getTimestamp:O=>O.arrivalTime||O.timestamp||Date.now()})]})]}),f.jsxs("div",{className:"App-section",children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[f.jsx("h2",{style:{margin:0,color:"#495057"},children:"Bucket Hook"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[f.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:"#e7f3ff",color:"#004085"},children:[se.length," buckets"]}),f.jsx("button",{onClick:()=>Pe(),disabled:ge,style:{padding:"0.5rem 1rem",borderRadius:"4px",border:"1px solid #007bff",backgroundColor:"#007bff",color:"white",cursor:ge?"not-allowed":"pointer",opacity:ge?.6:1},children:ge?"Loading...":"Refresh"})]})]}),Ue&&f.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"1rem"},children:["Error: ",Ue]}),ge&&se.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"Loading buckets..."}):se.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"No buckets found"}):f.jsxs(f.Fragment,{children:[f.jsx(Do,{data:se,maxVisible:l,maxDataPoints:o,getValue:O=>O.totalMargin||O.unrealizedPnL||100,onItemClick:O=>le(O,"Bucket Data")}),f.jsx(Lo,{data:se,getTimestamp:O=>O.createdAt?new Date(O.createdAt).getTime():Date.now()})]})]}),f.jsxs("div",{className:"App-section",children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[f.jsx("h2",{style:{margin:0,color:"#495057"},children:"Position Hook"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[f.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:D?"#d4edda":"#f8d7da",color:D?"#155724":"#721c24"},children:D?"WS Connected":"WS Disconnected"}),f.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:"#e7f3ff",color:"#004085"},children:[ke.length," positions"]}),f.jsx("button",{onClick:()=>Q(),disabled:Te,style:{padding:"0.5rem 1rem",borderRadius:"4px",border:"1px solid #007bff",backgroundColor:"#007bff",color:"white",cursor:Te?"not-allowed":"pointer",opacity:Te?.6:1},children:Te?"Loading...":"Refresh"})]})]}),ft&&f.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"1rem"},children:["Error: ",ft]}),Te&&ke.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"Loading positions..."}):ke.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"No positions found"}):f.jsxs(f.Fragment,{children:[f.jsx(Do,{data:ke,maxVisible:l,maxDataPoints:o,getValue:O=>O.size||O.margin||100,onItemClick:O=>le(O,"Position Data")}),f.jsx(Lo,{data:ke,getTimestamp:O=>Date.now()})]})]}),f.jsxs("div",{className:"App-section",children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[f.jsx("h2",{style:{margin:0,color:"#495057"},children:"Order Hook"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[f.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:ye?"#d4edda":"#f8d7da",color:ye?"#155724":"#721c24"},children:ye?"WS Connected":"WS Disconnected"}),f.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:"#e7f3ff",color:"#004085"},children:[oe.length," orders"]}),f.jsx("button",{onClick:()=>W(),disabled:de,style:{padding:"0.5rem 1rem",borderRadius:"4px",border:"1px solid #007bff",backgroundColor:"#007bff",color:"white",cursor:de?"not-allowed":"pointer",opacity:de?.6:1},children:de?"Loading...":"Refresh"})]})]}),ve&&f.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"1rem"},children:["Error: ",ve]}),de&&oe.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"Loading orders..."}):oe.length===0?f.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"No orders found"}):f.jsxs(f.Fragment,{children:[f.jsx(Do,{data:oe,maxVisible:l,maxDataPoints:o,getValue:O=>O.quantity||O.price||100,onItemClick:O=>le(O,"Order Data")}),f.jsx(Lo,{data:oe,getTimestamp:O=>O.createdAt?typeof O.createdAt=="number"?O.createdAt:new Date(O.createdAt).getTime():O.updatedAt?typeof O.updatedAt=="number"?O.updatedAt:new Date(O.updatedAt).getTime():Date.now()})]})]}),f.jsx(fL,{data:R,isOpen:F,onClose:()=>N(!1),title:$})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function $u(t){return t+.5|0}const ni=(t,e,n)=>Math.max(Math.min(t,n),e);function cc(t){return ni($u(t*2.55),0,255)}function fi(t){return ni($u(t*255),0,255)}function dr(t){return ni($u(t/2.55)/100,0,1)}function $2(t){return ni($u(t*100),0,100)}const es={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qm=[..."0123456789ABCDEF"],EB=t=>Qm[t&15],PB=t=>Qm[(t&240)>>4]+Qm[t&15],Od=t=>(t&240)>>4===(t&15),TB=t=>Od(t.r)&&Od(t.g)&&Od(t.b)&&Od(t.a);function MB(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&es[t[1]]*17,g:255&es[t[2]]*17,b:255&es[t[3]]*17,a:e===5?es[t[4]]*17:255}:(e===7||e===9)&&(n={r:es[t[1]]<<4|es[t[2]],g:es[t[3]]<<4|es[t[4]],b:es[t[5]]<<4|es[t[6]],a:e===9?es[t[7]]<<4|es[t[8]]:255})),n}const IB=(t,e)=>t<255?e(t):"";function RB(t){var e=TB(t)?EB:PB;return t?"#"+e(t.r)+e(t.g)+e(t.b)+IB(t.a,e):void 0}const AB=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function GE(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function NB(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function OB(t,e,n){const s=GE(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function DB(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function ay(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=DB(n,s,r,u,i),l=l*60+.5),[l|0,c||0,a]}function ly(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(fi)}function cy(t,e,n){return ly(GE,t,e,n)}function LB(t,e,n){return ly(OB,t,e,n)}function jB(t,e,n){return ly(NB,t,e,n)}function KE(t){return(t%360+360)%360}function FB(t){const e=AB.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?cc(+e[5]):fi(+e[5]));const r=KE(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=LB(r,i,o):e[1]==="hsv"?s=jB(r,i,o):s=cy(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function zB(t,e){var n=ay(t);n[0]=KE(n[0]+e),n=cy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function BB(t){if(!t)return;const e=ay(t),n=e[0],s=$2(e[1]),r=$2(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${dr(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const U2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},W2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $B(){const t={},e=Object.keys(W2),n=Object.keys(U2);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,U2[i]);i=parseInt(W2[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Dd;function UB(t){Dd||(Dd=$B(),Dd.transparent=[0,0,0,0]);const e=Dd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const WB=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function HB(t){const e=WB.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?cc(o):ni(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?cc(s):ni(s,0,255)),r=255&(e[4]?cc(r):ni(r,0,255)),i=255&(e[6]?cc(i):ni(i,0,255)),{r:s,g:r,b:i,a:n}}}function VB(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${dr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const hg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,jo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function YB(t,e,n){const s=jo(dr(t.r)),r=jo(dr(t.g)),i=jo(dr(t.b));return{r:fi(hg(s+n*(jo(dr(e.r))-s))),g:fi(hg(r+n*(jo(dr(e.g))-r))),b:fi(hg(i+n*(jo(dr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Ld(t,e,n){if(t){let s=ay(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=cy(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function qE(t,e){return t&&Object.assign(e||{},t)}function H2(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=fi(t[3]))):(e=qE(t,{r:0,g:0,b:0,a:1}),e.a=fi(e.a)),e}function GB(t){return t.charAt(0)==="r"?HB(t):FB(t)}class lu{constructor(e){if(e instanceof lu)return e;const n=typeof e;let s;n==="object"?s=H2(e):n==="string"&&(s=MB(e)||UB(e)||GB(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=qE(this._rgb);return e&&(e.a=dr(e.a)),e}set rgb(e){this._rgb=H2(e)}rgbString(){return this._valid?VB(this._rgb):void 0}hexString(){return this._valid?RB(this._rgb):void 0}hslString(){return this._valid?BB(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=YB(this._rgb,e._rgb,n)),this}clone(){return new lu(this.rgb)}alpha(e){return this._rgb.a=fi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=$u(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ld(this._rgb,2,e),this}darken(e){return Ld(this._rgb,2,-e),this}saturate(e){return Ld(this._rgb,1,e),this}desaturate(e){return Ld(this._rgb,1,-e),this}rotate(e){return zB(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function or(){}const KB=(()=>{let t=0;return()=>t++})();function ht(t){return t==null}function xt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Fe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function jn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function zs(t,e){return jn(t)?t:e}function Le(t,e){return typeof t>"u"?e:t}const qB=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,XE=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function st(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function et(t,e,n,s){let r,i,o;if(xt(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(Fe(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function yf(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function vf(t){if(xt(t))return t.map(vf);if(Fe(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=vf(t[n[r]]);return e}return t}function QE(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function XB(t,e,n,s){if(!QE(t))return;const r=e[t],i=n[t];Fe(r)&&Fe(i)?cu(r,i,s):e[t]=vf(i)}function cu(t,e,n){const s=xt(e)?e:[e],r=s.length;if(!Fe(t))return t;n=n||{};const i=n.merger||XB;let o;for(let a=0;a<r;++a){if(o=s[a],!Fe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Rc(t,e){return cu(t,e,{merger:QB})}function QB(t,e,n){if(!QE(t))return;const s=e[t],r=n[t];Fe(s)&&Fe(r)?Rc(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=vf(r))}const V2={"":t=>t,x:t=>t.x,y:t=>t.y};function JB(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function ZB(t){const e=JB(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function uu(t,e){return(V2[e]||(V2[e]=ZB(e)))(t)}function uy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Kn=t=>typeof t<"u",Dn=t=>typeof t=="function",Y2=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function e$(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Qe=Math.PI,Zt=2*Qe,t$=Zt+Qe,wf=Number.POSITIVE_INFINITY,dy=Qe/180,en=Qe/2,os=Qe/4,Sf=Qe*2/3,JE=Math.log10,rl=Math.sign;function Ac(t,e,n){return Math.abs(t-e)<n}function G2(t){const e=Math.round(t);t=Ac(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(JE(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function n$(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function s$(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function mo(t){return!s$(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function r$(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function i$(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Wt(t){return t*(Qe/180)}function ZE(t){return t*(180/Qe)}function K2(t){if(!jn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Jm(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Qe&&(i+=Zt),{angle:i,distance:r}}function il(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function o$(t,e){return(t-e+t$)%Zt-Qe}function $r(t){return(t%Zt+Zt)%Zt}function kf(t,e,n,s){const r=$r(t),i=$r(e),o=$r(n),a=$r(i-r),l=$r(o-r),c=$r(r-i),u=$r(r-o);return r===i||r===o||s&&i===o||a>l&&c<u}function us(t,e,n){return Math.max(e,Math.min(n,t))}function a$(t){return us(t,-32768,32767)}function uc(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function hy(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Vi=(t,e,n,s)=>hy(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),l$=(t,e,n)=>hy(t,n,s=>t[s][e]>=n);function c$(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const e4=["push","pop","shift","splice","unshift"];function u$(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),e4.forEach(n=>{const s="_onData"+uy(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function q2(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(e4.forEach(i=>{delete t[i]}),delete t._chartjs)}function d$(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const t4=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function n4(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,t4.call(window,()=>{s=!1,t.apply(e,n)}))}}function h$(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const fy=t=>t==="start"?"left":t==="end"?"right":"center",un=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,f$=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function p$(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(r=Math.min(Vi(l,u,d).lo,n?s:Vi(e,u,o.getPixelForValue(d)).lo),c){const x=l.slice(0,r+1).reverse().findIndex(w=>!ht(w[a.axis]));r-=Math.max(0,x)}r=us(r,0,s-1)}if(m){let x=Math.max(Vi(l,o.axis,h,!0).hi+1,n?0:Vi(e,u,o.getPixelForValue(h),!0).hi+1);if(c){const w=l.slice(x-1).findIndex(g=>!ht(g[a.axis]));x+=Math.max(0,w)}i=us(x,r,s)-r}else i=s-r}return{start:r,count:i}}function g$(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const jd=t=>t===0||t===1,X2=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Zt/n)),Q2=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Zt/n)+1,Nc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*en)+1,easeOutSine:t=>Math.sin(t*en),easeInOutSine:t=>-.5*(Math.cos(Qe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>jd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>jd(t)?t:X2(t,.075,.3),easeOutElastic:t=>jd(t)?t:Q2(t,.075,.3),easeInOutElastic(t){return jd(t)?t:t<.5?.5*X2(t*2,.1125,.45):.5+.5*Q2(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Nc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Nc.easeInBounce(t*2)*.5:Nc.easeOutBounce(t*2-1)*.5+.5};function py(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function J2(t){return py(t)?t:new lu(t)}function fg(t){return py(t)?t:new lu(t).saturate(.5).darken(.1).hexString()}const m$=["x","y","borderWidth","radius","tension"],x$=["color","borderColor","backgroundColor"];function b$(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:x$},numbers:{type:"number",properties:m$}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function y$(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Z2=new Map;function v$(t,e){e=e||{};const n=t+JSON.stringify(e);let s=Z2.get(n);return s||(s=new Intl.NumberFormat(t,e),Z2.set(n,s)),s}function gy(t,e,n){return v$(e,n).format(t)}const w$={values(t){return xt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=S$(t,n)}const o=JE(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),gy(t,s,l)}};function S$(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var s4={formatters:w$};function k$(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:s4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const xo=Object.create(null),Zm=Object.create(null);function Oc(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function pg(t,e,n){return typeof e=="string"?cu(Oc(t,e),n):cu(Oc(t,""),e)}class _${constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>fg(r.backgroundColor),this.hoverBorderColor=(s,r)=>fg(r.borderColor),this.hoverColor=(s,r)=>fg(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return pg(this,e,n)}get(e){return Oc(this,e)}describe(e,n){return pg(Zm,e,n)}override(e,n){return pg(xo,e,n)}route(e,n,s,r){const i=Oc(this,e),o=Oc(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Fe(l)?Object.assign({},c,l):Le(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var kt=new _$({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[b$,y$,k$]);function C$(t){return!t||ht(t.size)||ht(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function eS(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Ti(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function tS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function ex(t,e,n,s){r4(t,e,n,s,null)}function r4(t,e,n,s,r){let i,o,a,l,c,u,d,h;const p=e.pointStyle,m=e.rotation,x=e.radius;let w=(m||0)*dy;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(w),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:r?t.ellipse(n,s,r/2,x,0,0,Zt):t.arc(n,s,x,0,Zt),t.closePath();break;case"triangle":u=r?r/2:x,t.moveTo(n+Math.sin(w)*u,s-Math.cos(w)*x),w+=Sf,t.lineTo(n+Math.sin(w)*u,s-Math.cos(w)*x),w+=Sf,t.lineTo(n+Math.sin(w)*u,s-Math.cos(w)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(w+os)*l,d=Math.cos(w+os)*(r?r/2-c:l),a=Math.sin(w+os)*l,h=Math.sin(w+os)*(r?r/2-c:l),t.arc(n-d,s-a,c,w-Qe,w-en),t.arc(n+h,s-o,c,w-en,w),t.arc(n+d,s+a,c,w,w+en),t.arc(n-h,s+o,c,w+en,w+Qe),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*x,u=r?r/2:l,t.rect(n-u,s-l,2*u,2*l);break}w+=os;case"rectRot":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,h=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+h,s-o),t.lineTo(n+d,s+a),t.lineTo(n-h,s+o),t.closePath();break;case"crossRot":w+=os;case"cross":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,h=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o);break;case"star":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,h=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o),w+=os,d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,h=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o);break;case"line":o=r?r/2:Math.cos(w)*x,a=Math.sin(w)*x,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(w)*(r?r/2:x),s+Math.sin(w)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function du(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function E0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function P0(t){t.restore()}function E$(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function P$(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function T$(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ht(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function M$(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function I$(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function hu(t,e,n,s,r,i={}){const o=xt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,T$(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&I$(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ht(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,s,i.maxWidth)),t.fillText(c,n,s,i.maxWidth),M$(t,n,s,c,i),s+=Number(r.lineHeight);t.restore()}function _f(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Qe,Qe,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Qe,en,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,en,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-en,!0),t.lineTo(n+o.topLeft,s)}const R$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,A$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function N$(t,e){const n=(""+t).match(R$);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const O$=t=>+t||0;function i4(t,e){const n={},s=Fe(e),r=s?Object.keys(e):e,i=Fe(t)?s?o=>Le(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=O$(i(o));return n}function D$(t){return i4(t,{top:"y",right:"x",bottom:"y",left:"x"})}function pa(t){return i4(t,["topLeft","topRight","bottomLeft","bottomRight"])}function fn(t){const e=D$(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function jt(t,e){t=t||{},e=e||kt.font;let n=Le(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Le(t.style,e.style);s&&!(""+s).match(A$)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Le(t.family,e.family),lineHeight:N$(Le(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Le(t.weight,e.weight),string:""};return r.string=C$(r),r}function Fd(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function L$(t,e,n){const{min:s,max:r}=t,i=XE(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Po(t,e){return Object.assign(Object.create(t),e)}function my(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=c4("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>my([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return a4(a,l,()=>H$(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return sS(a).includes(l)},ownKeys(a){return sS(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function ol(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:o4(t,s),setContext:i=>ol(t,i,n,s),override:i=>ol(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return a4(i,o,()=>F$(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function o4(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Dn(n)?n:()=>n,isIndexable:Dn(s)?s:()=>s}}const j$=(t,e)=>t?t+uy(e):e,xy=(t,e)=>Fe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function a4(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function F$(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return Dn(a)&&o.isScriptable(e)&&(a=z$(e,a,t,n)),xt(a)&&a.length&&(a=B$(e,a,t,o.isIndexable)),xy(e,a)&&(a=ol(a,r,i&&i[e],o)),a}function z$(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),xy(t,l)&&(l=by(r._scopes,r,t,l)),l}function B$(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Fe(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=by(c,r,t,u);e.push(ol(d,i,o&&o[t],a))}}return e}function l4(t,e,n){return Dn(t)?t(e,n):t}const $$=(t,e)=>t===!0?e:typeof t=="string"?uu(e,t):void 0;function U$(t,e,n,s,r){for(const i of e){const o=$$(n,i);if(o){t.add(o);const a=l4(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function by(t,e,n,s){const r=e._rootScopes,i=l4(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=nS(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=nS(a,o,i,l,s),l===null)?!1:my(Array.from(a),[""],r,i,()=>W$(e,n,s))}function nS(t,e,n,s,r){for(;n;)n=U$(t,e,n,s,r);return n}function W$(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return xt(r)&&Fe(n)?n:r||{}}function H$(t,e,n,s){let r;for(const i of e)if(r=c4(j$(i,t),n),typeof r<"u")return xy(t,r)?by(n,s,t,r):r}function c4(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function sS(t){let e=t._keys;return e||(e=t._keys=V$(t._scopes)),e}function V$(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const Y$=Number.EPSILON||1e-14,al=(t,e)=>e<t.length&&!t[e].skip&&t[e],u4=t=>t==="x"?"y":"x";function G$(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=il(i,r),l=il(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,h=s*u;return{previous:{x:i.x-d*(o.x-r.x),y:i.y-d*(o.y-r.y)},next:{x:i.x+h*(o.x-r.x),y:i.y+h*(o.y-r.y)}}}function K$(t,e,n){const s=t.length;let r,i,o,a,l,c=al(t,0);for(let u=0;u<s-1;++u)if(l=c,c=al(t,u+1),!(!l||!c)){if(Ac(e[u],0,Y$)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=i*o*e[u])}}function q$(t,e,n="x"){const s=u4(n),r=t.length;let i,o,a,l=al(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=al(t,c+1),!a)continue;const u=a[n],d=a[s];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${s}`]=d-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${s}`]=d+i*e[c])}}function X$(t,e="x"){const n=u4(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=al(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=al(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?rl(r[o-1])!==rl(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}K$(t,r,i),q$(t,i,e)}function zd(t,e,n){return Math.max(Math.min(t,n),e)}function Q$(t,e){let n,s,r,i,o,a=du(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&du(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=zd(r.cp1x,e.left,e.right),r.cp1y=zd(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=zd(r.cp2x,e.left,e.right),r.cp2y=zd(r.cp2y,e.top,e.bottom)))}function J$(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")X$(t,r);else{let c=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=G$(c,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&Q$(t,n)}function yy(){return typeof window<"u"&&typeof document<"u"}function vy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Cf(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const T0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Z$(t,e){return T0(t).getPropertyValue(e)}const eU=["top","right","bottom","left"];function no(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=eU[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const tU=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function nU(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(tU(r,i,t.target))a=r,l=i;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Oi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=T0(n),i=r.boxSizing==="border-box",o=no(r,"padding"),a=no(r,"border","width"),{x:l,y:c,box:u}=nU(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:p,height:m}=e;return i&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/p*n.width/s),y:Math.round((c-h)/m*n.height/s)}}function sU(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&vy(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=T0(i),l=no(a,"border","width"),c=no(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Cf(a.maxWidth,i,"clientWidth"),r=Cf(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||wf,maxHeight:r||wf}}const si=t=>Math.round(t*10)/10;function rU(t,e,n,s){const r=T0(t),i=no(r,"margin"),o=Cf(r.maxWidth,t,"clientWidth")||wf,a=Cf(r.maxHeight,t,"clientHeight")||wf,l=sU(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const h=no(r,"border","width"),p=no(r,"padding");c-=p.width+h.width,u-=p.height+h.height}return c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=si(Math.min(c,o,l.maxWidth)),u=si(Math.min(u,a,l.maxHeight)),c&&!u&&(u=si(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=si(Math.floor(u*s))),{width:c,height:u}}function rS(t,e,n){const s=e||1,r=si(t.height*s),i=si(t.width*s);t.height=si(t.height),t.width=si(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const iU=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};yy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function iS(t,e){const n=Z$(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Di(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function oU(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function aU(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Di(t,r,n),a=Di(r,i,n),l=Di(i,e,n),c=Di(o,a,n),u=Di(a,l,n);return Di(c,u,n)}const lU=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},cU=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ga(t,e,n){return t?lU(e,n):cU()}function d4(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function h4(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function f4(t){return t==="angle"?{between:kf,compare:o$,normalize:$r}:{between:uc,compare:(e,n)=>e-n,normalize:e=>e}}function oS({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function uU(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=f4(s),l=e.length;let{start:c,end:u,loop:d}=t,h,p;if(d){for(c+=l,u+=l,h=0,p=l;h<p&&o(a(e[c%l][s]),r,i);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function dU(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=f4(s),{start:u,end:d,loop:h,style:p}=uU(t,e,n),m=[];let x=!1,w=null,g,y,b;const v=()=>l(r,b,g)&&a(r,b)!==0,S=()=>a(i,g)===0||l(i,b,g),_=()=>x||v(),E=()=>!x||S();for(let T=u,P=u;T<=d;++T)y=e[T%o],!y.skip&&(g=c(y[s]),g!==b&&(x=l(g,r,i),w===null&&_()&&(w=a(g,r)===0?T:P),w!==null&&E()&&(m.push(oS({start:w,end:T,loop:h,count:o,style:p})),w=null),P=T,b=g));return w!==null&&m.push(oS({start:w,end:d,loop:h,count:o,style:p})),m}function hU(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=dU(s[r],t.points,e);i.length&&n.push(...i)}return n}function fU(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function pU(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function gU(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=fU(n,r,i,s);if(s===!0)return aS(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return aS(t,pU(n,o,l,c),n,e)}function aS(t,e,n,s){return!s||!s.setContext||!n?e:mU(t,e,n,s)}function mU(t,e,n,s){const r=t._chart.getContext(),i=lS(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,d=e[0].start,h=d;function p(m,x,w,g){const y=a?-1:1;if(m!==x){for(m+=l;n[m%l].skip;)m-=y;for(;n[x%l].skip;)x+=y;m%l!==x%l&&(c.push({start:m%l,end:x%l,loop:w,style:g}),u=g,d=x%l)}}for(const m of e){d=a?d:m.start;let x=n[d%l],w;for(h=d+1;h<=m.end;h++){const g=n[h%l];w=lS(s.setContext(Po(r,{type:"segment",p0:x,p1:g,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),xU(w,u)&&p(d,h-1,m.loop,u),x=g,u=w}d<h-1&&p(d,h-1,m.loop,u)}return c}function lS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function xU(t,e){if(!e)return!1;const n=[],s=function(r,i){return py(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function Bd(t,e,n){return t.options.clip?t[n]:e[n]}function bU(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Bd(n,e,"left"),right:Bd(n,e,"right"),top:Bd(s,e,"top"),bottom:Bd(s,e,"bottom")}:e}function yU(t,e){const n=e._clip;if(n.disabled)return!1;const s=bU(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class vU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=t4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ar=new vU;const cS="transparent",wU={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=J2(t||cS),r=s.valid&&J2(e||cS);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class SU{constructor(e,n,s,r){const i=n[s];r=Fd([e.to,r,i,e.from]);const o=Fd([e.from,i,r]);this._active=!0,this._fn=e.fn||wU[e.type||typeof o],this._easing=Nc[e.easing]||Nc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Fd([e.to,n,r,e.from]),this._from=Fd([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class wy{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Fe(e))return;const n=Object.keys(kt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!Fe(i))return;const o={};for(const a of n)o[a]=i[a];(xt(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=_U(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&kU(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let d=i[c];const h=s.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}i[c]=d=new SU(h,e,c,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return ar.add(this._chart,s),!0}}function kU(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function _U(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function uS(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function CU(t,e,n){if(n===!1)return!1;const s=uS(t,n),r=uS(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function EU(t){let e,n,s,r;return Fe(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function p4(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function dS(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],jn(c)&&(i||e===0||rl(e)===rl(c))&&(e+=c)}return!u&&!s.all?0:e}function PU(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[i]:t[u]};return a}function gg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function TU(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function MU(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function IU(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function hS(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function fS(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,u=TU(i,o,s),d=e.length;let h;for(let p=0;p<d;++p){const m=e[p],{[l]:x,[c]:w}=m,g=m._stacks||(m._stacks={});h=g[c]=IU(r,u,x),h[a]=w,h._top=hS(h,o,!0,s.type),h._bottom=hS(h,o,!1,s.type);const y=h._visualValues||(h._visualValues={});y[a]=w}}function mg(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function RU(t,e){return Po(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function AU(t,e,n){return Po(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Hl(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const xg=t=>t==="reset"||t==="none",pS=(t,e)=>e?t:Object.assign({},t),NU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:p4(n,!0),values:null};class ma{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=gg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Hl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(d,h,p,m)=>d==="x"?h:d==="r"?m:p,i=n.xAxisID=Le(s.xAxisID,mg(e,"x")),o=n.yAxisID=Le(s.yAxisID,mg(e,"y")),a=n.rAxisID=Le(s.rAxisID,mg(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),u=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&q2(this._data,this),e._stacked&&Hl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Fe(n)){const r=this._cachedMeta;this._data=PU(n,r)}else if(s!==n){if(s){q2(s,this);const r=this._cachedMeta;Hl(r),r._parsed=[]}n&&Object.isExtensible(n)&&u$(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=gg(n.vScale,n),n.stack!==s.stack&&(r=!0,Hl(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(fS(this,n._parsed),n._stacked=gg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,d,h;if(this._parsing===!1)s._parsed=r,s._sorted=!0,h=r;else{xt(r[e])?h=this.parseArrayData(s,r,e,n):Fe(r[e])?h=this.parseObjectData(s,r,e,n):h=this.parsePrimitiveData(s,r,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=d=h[u],l&&(p()&&(l=!1),c=d);s._sorted=l}o&&fS(this,h)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,d=new Array(r);let h,p,m;for(h=0,p=r;h<p;++h)m=h+s,d[h]={[a]:u||i.parse(c[m],m),[l]:o.parse(n[m],m)};return d}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,c,u,d;for(l=0,c=r;l<c;++l)u=l+s,d=n[u],a[l]={x:i.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,d,h,p;for(u=0,d=r;u<d;++u)h=u+s,p=n[h],c[u]={x:i.parse(uu(p,a),h),y:o.parse(uu(p,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:p4(r,!0),values:n._stacks[e.axis]._visualValues};return dS(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=dS(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=NU(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=MU(a);let h,p;function m(){p=r[h];const x=p[a.axis];return!jn(p[e.axis])||u>x||d<x}for(h=0;h<o&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),i));++h);if(i){for(h=o-1;h>=0;--h)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],jn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=EU(Le(this.options.clip,CU(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const d=r[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=AU(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=RU(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Kn(s);if(a)return pS(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),p=Object.keys(kt.elements[e]),m=()=>this.getContext(s,r,n),x=c.resolveNamedOptions(h,p,m,d);return x.$shared&&(x.$shared=l,i[o]=Object.freeze(pS(x,l))),x}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,s,n))}const c=new wy(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||xg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){xg(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!xg(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&Hl(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ie(ma,"defaults",{}),ie(ma,"datasetElementType",null),ie(ma,"dataElementType",null);function OU(t,e,n){let s=1,r=1,i=0,o=0;if(e<Zt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),p=(b,v,S)=>kf(b,a,l,!0)?1:Math.max(v,v*n,S,S*n),m=(b,v,S)=>kf(b,a,l,!0)?-1:Math.min(v,v*n,S,S*n),x=p(0,c,d),w=p(en,u,h),g=m(Qe,c,d),y=m(Qe+en,u,h);s=(x-g)/2,r=(w-y)/2,i=-(x+g)/2,o=-(w+y)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class dc extends ma{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(Fe(s[e])){const{key:l="value"}=this._parsing;i=c=>+uu(s[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Wt(this.options.rotation-90)}_getCircumference(){return Wt(this.options.circumference)}_getRotationExtents(){let e=Zt,n=-Zt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(qB(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:p,offsetX:m,offsetY:x}=OU(d,u,l),w=(s.width-o)/h,g=(s.height-o)/p,y=Math.max(Math.min(w,g)/2,0),b=XE(this.options.radius,y),v=Math.max(b*l,0),S=(b-v)/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=x*b,r.total=this.calculateTotal(),this.outerRadius=b-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/Zt)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=i&&c.animateScale,p=h?0:this.innerRadius,m=h?0:this.outerRadius,{sharedOptions:x,includeOptions:w}=this._getSharedOptions(n,r);let g=this._getRotation(),y;for(y=0;y<n;++y)g+=this._circumference(y,i);for(y=n;y<n+s;++y){const b=this._circumference(y,i),v=e[y],S={x:u+this.offsetX,y:d+this.offsetY,startAngle:g,endAngle:g+b,circumference:b,outerRadius:m,innerRadius:p};w&&(S.options=x||this.resolveDataElementOptions(y,v.active?"active":r)),g+=b,this.updateElement(v,y,S,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Zt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=gy(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Le(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ie(dc,"id","doughnut"),ie(dc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ie(dc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ie(dc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class bh extends ma{getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:i}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=i.getLabelForValue(o.y);return{label:s[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,r=this.chart._animationsDisabled;let{start:i,count:o}=p$(n,s,r);if(this._drawStart=i,this._drawCount=o,g$(n)&&(i=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,r),d=this.getSharedOptions(u),h=this.includeOptions(r,d),p=o.axis,m=a.axis,{spanGaps:x,segment:w}=this.options,g=mo(x)?x:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||r==="none";let b=n>0&&this.getParsed(n-1);for(let v=n;v<n+s;++v){const S=e[v],_=this.getParsed(v),E=y?S:{},T=ht(_[m]),P=E[p]=o.getPixelForValue(_[p],v),C=E[m]=i||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],v);E.skip=isNaN(P)||isNaN(C)||T,E.stop=v>0&&Math.abs(_[p]-b[p])>g,w&&(E.parsed=_,E.raw=c.data[v]),h&&(E.options=d||this.resolveDataElementOptions(v,S.active?"active":r)),y||this.updateElement(S,v,E,r),b=_}this.updateSharedOptions(d,r,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=e.dataset,r=s.options&&s.options.borderWidth||0;if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,o)/2}}ie(bh,"id","scatter"),ie(bh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ie(bh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Mi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Sy{constructor(e){ie(this,"options");this.options=e||{}}static override(e){Object.assign(Sy.prototype,e)}init(){}formats(){return Mi()}parse(){return Mi()}format(){return Mi()}add(){return Mi()}diff(){return Mi()}startOf(){return Mi()}endOf(){return Mi()}}var DU={_date:Sy};function LU(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?l$:Vi;if(s){if(r._sharedOptions){const u=i[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(i,e,n-d),p=c(i,e,n+d);return{lo:h.lo,hi:p.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:h}=t,p=h.slice(0,u.lo+1).reverse().findIndex(x=>!ht(x[d.axis]));u.lo-=Math.max(0,p);const m=h.slice(u.hi).findIndex(x=>!ht(x[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:i.length-1}}function M0(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:d,hi:h}=LU(i[a],e,o,r);for(let p=d;p<=h;++p){const m=u[p];m.skip||s(m,c,p)}}}function jU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function bg(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||M0(t,n,e,function(a,l,c){!r&&!du(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function FU(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:d}=Jm(o,{x:e.x,y:e.y});kf(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return M0(t,n,e,i),r}function zU(t,e,n,s,r,i){let o=[];const a=jU(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const p=u.inRange(e.x,e.y,r);if(s&&!p)return;const m=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(m))&&!p)return;const w=a(e,m);w<l?(o=[{element:u,datasetIndex:d,index:h}],l=w):w===l&&o.push({element:u,datasetIndex:d,index:h})}return M0(t,n,e,c),o}function yg(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?FU(t,e,n,r):zU(t,e,n,s,r,i)}function gS(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return M0(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var BU={modes:{index(t,e,n,s){const r=Oi(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?bg(t,r,i,s,o):yg(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const r=Oi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?bg(t,r,i,s,o):yg(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const r=Oi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return bg(t,r,i,s,o)},nearest(t,e,n,s){const r=Oi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return yg(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=Oi(e,t);return gS(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=Oi(e,t);return gS(t,r,"y",n.intersect,s)}}};const g4=["left","top","right","bottom"];function Vl(t,e){return t.filter(n=>n.pos===e)}function mS(t,e){return t.filter(n=>g4.indexOf(n.pos)===-1&&n.box.axis===e)}function Yl(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function $U(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function UU(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!g4.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function WU(t,e){const n=UU(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=u?u*r:l&&e.availableHeight)}return n}function HU(t){const e=$U(t),n=Yl(e.filter(c=>c.box.fullSize),!0),s=Yl(Vl(e,"left"),!0),r=Yl(Vl(e,"right")),i=Yl(Vl(e,"top"),!0),o=Yl(Vl(e,"bottom")),a=mS(e,"x"),l=mS(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Vl(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function xS(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function m4(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function VU(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!Fe(r)){n.size&&(t[r]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[r]+=n.size}i.getPadding&&m4(o,i.getPadding());const a=Math.max(0,e.outerWidth-xS(o,t,"left","right")),l=Math.max(0,e.outerHeight-xS(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function YU(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function GU(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function hc(t,e,n,s){const r=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,GU(a.horizontal,e));const{same:d,other:h}=VU(e,n,a,s);c|=d&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&hc(r,e,n,s)||u}function $d(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function bS(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;Kn(c.start)&&(o=c.start),l.fullSize?$d(l,r.left,o,n.outerWidth-r.right-r.left,h):$d(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;Kn(c.start)&&(i=c.start),l.fullSize?$d(l,i,r.top,h,n.outerHeight-r.bottom-r.top):$d(l,i,e.top+c.placed,h,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var ds={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=fn(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=HU(t.boxes),l=a.vertical,c=a.horizontal;et(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=l.reduce((x,w)=>w.box.options&&w.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);m4(h,fn(s));const p=Object.assign({maxPadding:h,w:i,h:o,x:r.left,y:r.top},r),m=WU(l.concat(c),d);hc(a.fullSize,p,d,m),hc(l,p,d,m),hc(c,p,d,m)&&hc(l,p,d,m),YU(p),bS(a.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,bS(a.rightAndBottom,p,d,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},et(a.chartArea,x=>{const w=x.box;Object.assign(w,t.chartArea),w.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class x4{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class KU extends x4{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yh="$chartjs",qU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},yS=t=>t===null||t==="";function XU(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[yh]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",yS(r)){const i=iS(t,"width");i!==void 0&&(t.width=i)}if(yS(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=iS(t,"height");i!==void 0&&(t.height=i)}return t}const b4=iU?{passive:!0}:!1;function QU(t,e,n){t&&t.addEventListener(e,n,b4)}function JU(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,b4)}function ZU(t,e){const n=qU[t.type]||t.type,{x:s,y:r}=Oi(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Ef(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function eW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Ef(a.addedNodes,s),o=o&&!Ef(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function tW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Ef(a.removedNodes,s),o=o&&!Ef(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const fu=new Map;let vS=0;function y4(){const t=window.devicePixelRatio;t!==vS&&(vS=t,fu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function nW(t,e){fu.size||window.addEventListener("resize",y4),fu.set(t,e)}function sW(t){fu.delete(t),fu.size||window.removeEventListener("resize",y4)}function rW(t,e,n){const s=t.canvas,r=s&&vy(s);if(!r)return;const i=n4((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(r),nW(t,i),o}function vg(t,e,n){n&&n.disconnect(),e==="resize"&&sW(t)}function iW(t,e,n){const s=t.canvas,r=n4(i=>{t.ctx!==null&&n(ZU(i,t))},t);return QU(s,e,r),r}class oW extends x4{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(XU(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[yh])return!1;const s=n[yh].initial;["height","width"].forEach(i=>{const o=s[i];ht(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[yh],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:eW,detach:tW,resize:rW}[n]||iW;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:vg,detach:vg,resize:vg}[n]||JU)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return rU(e,n,s,r)}isAttached(e){const n=e&&vy(e);return!!(n&&n.isConnected)}}function aW(t){return!yy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?KU:oW}class pn{constructor(){ie(this,"x");ie(this,"y");ie(this,"active",!1);ie(this,"options");ie(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return mo(this.x)&&mo(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}}ie(pn,"defaults",{}),ie(pn,"defaultRoutes");function lW(t,e){const n=t.options.ticks,s=cW(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?dW(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return hW(e,c,i,o/r),c;const u=uW(i,e,r);if(o>0){let d,h;const p=o>1?Math.round((l-a)/(o-1)):null;for(Ud(e,c,u,ht(p)?0:a-p,a),d=0,h=o-1;d<h;d++)Ud(e,c,u,i[d],i[d+1]);return Ud(e,c,u,l,ht(p)?e.length:l+p),c}return Ud(e,c,u),c}function cW(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function uW(t,e,n){const s=fW(t),r=e.length/n;if(!s)return Math.max(r,1);const i=n$(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function dW(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function hW(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function Ud(t,e,n,s,r){const i=Le(s,0),o=Math.min(Le(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function fW(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const pW=t=>t==="left"?"right":t==="right"?"left":t,wS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,SS=(t,e)=>Math.min(e||t,t);function kS(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function gW(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<i-a||l>o+a)))return l}function mW(t,e){et(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function Gl(t){return t.drawTicks?t.tickLength:0}function _S(t,e){if(!t.display)return 0;const n=jt(t.font,e),s=fn(t.padding);return(xt(t.text)?t.text.length:1)*n.lineHeight+s.height}function xW(t,e){return Po(t,{scale:e,type:"scale"})}function bW(t,e,n){return Po(t,{tick:n,index:e,type:"tick"})}function yW(t,e,n){let s=fy(t);return(n&&e!=="right"||!n&&e==="right")&&(s=pW(s)),s}function vW(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,p,m;const x=o-r,w=a-i;if(t.isHorizontal()){if(p=un(s,i,a),Fe(n)){const g=Object.keys(n)[0],y=n[g];m=u[g].getPixelForValue(y)+x-e}else n==="center"?m=(c.bottom+c.top)/2+x-e:m=wS(t,n,e);h=a-i}else{if(Fe(n)){const g=Object.keys(n)[0],y=n[g];p=u[g].getPixelForValue(y)-w+e}else n==="center"?p=(c.left+c.right)/2-w+e:p=wS(t,n,e);m=un(s,o,r),d=n==="left"?-en:en}return{titleX:p,titleY:m,maxWidth:h,rotation:d}}class bl extends pn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=zs(e,Number.POSITIVE_INFINITY),n=zs(n,Number.NEGATIVE_INFINITY),s=zs(s,Number.POSITIVE_INFINITY),r=zs(r,Number.NEGATIVE_INFINITY),{min:zs(e,s),max:zs(n,r),minDefined:jn(e),maxDefined:jn(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:zs(n,zs(s,n)),max:zs(s,zs(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){st(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=L$(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?kS(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=lW(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){st(this.options.afterUpdate,[this])}beforeSetDimensions(){st(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){st(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),st(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){st(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=st(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){st(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){st(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=SS(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=us(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/s:p/(s-1),d+6>a&&(a=p/(s-(e.offset?.5:1)),l=this.maxHeight-Gl(e.grid)-n.padding-_S(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=ZE(Math.min(Math.asin(us((u.highest.height+6)/a,-1,1)),Math.asin(us(l/c,-1,1))-Math.asin(us(h/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){st(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){st(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=_S(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Gl(i)+l):(e.height=this.maxHeight,e.width=Gl(i)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),p=s.padding*2,m=Wt(this.labelRotation),x=Math.cos(m),w=Math.sin(m);if(a){const g=s.mirror?0:w*d.width+x*h.height;e.height=Math.min(this.maxHeight,e.height+g+p)}else{const g=s.mirror?0:x*d.width+w*h.height;e.width=Math.min(this.maxWidth,e.width+g+p)}this._calculatePadding(c,u,w,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;l?c?(h=r*e.width,p=s*n.height):(h=s*e.height,p=r*n.width):i==="start"?p=n.width:i==="end"?h=e.width:i!=="inner"&&(h=e.width/2,p=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;i==="start"?(u=0,d=e.height):i==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){st(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)ht(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=kS(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/SS(n,s));let c=0,u=0,d,h,p,m,x,w,g,y,b,v,S;for(d=0;d<n;d+=l){if(m=e[d].label,x=this._resolveTickFontOptions(d),r.font=w=x.string,g=i[w]=i[w]||{data:{},gc:[]},y=x.lineHeight,b=v=0,!ht(m)&&!xt(m))b=eS(r,g.data,g.gc,b,m),v=y;else if(xt(m))for(h=0,p=m.length;h<p;++h)S=m[h],!ht(S)&&!xt(S)&&(b=eS(r,g.data,g.gc,b,S),v+=y);o.push(b),a.push(v),c=Math.max(b,c),u=Math.max(v,u)}mW(i,n);const _=o.indexOf(c),E=a.indexOf(u),T=P=>({width:o[P]||0,height:a[P]||0});return{first:T(0),last:T(n-1),widest:T(_),highest:T(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return a$(this._alignToPixels?Ti(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=bW(this.getContext(),e,s))}return this.$context||(this.$context=xW(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Wt(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Gl(i),p=[],m=a.setContext(this.getContext()),x=m.display?m.width:0,w=x/2,g=function(N){return Ti(s,N,x)};let y,b,v,S,_,E,T,P,C,R,A,$;if(o==="top")y=g(this.bottom),E=this.bottom-h,P=y-w,R=g(e.top)+w,$=e.bottom;else if(o==="bottom")y=g(this.top),R=e.top,$=g(e.bottom)-w,E=y+w,P=this.top+h;else if(o==="left")y=g(this.right),_=this.right-h,T=y-w,C=g(e.left)+w,A=e.right;else if(o==="right")y=g(this.left),C=e.left,A=g(e.right)-w,_=y+w,T=this.left+h;else if(n==="x"){if(o==="center")y=g((e.top+e.bottom)/2+.5);else if(Fe(o)){const N=Object.keys(o)[0],z=o[N];y=g(this.chart.scales[N].getPixelForValue(z))}R=e.top,$=e.bottom,E=y+w,P=E+h}else if(n==="y"){if(o==="center")y=g((e.left+e.right)/2);else if(Fe(o)){const N=Object.keys(o)[0],z=o[N];y=g(this.chart.scales[N].getPixelForValue(z))}_=y-w,T=_-h,C=e.left,A=e.right}const H=Le(r.ticks.maxTicksLimit,d),F=Math.max(1,Math.ceil(d/H));for(b=0;b<d;b+=F){const N=this.getContext(b),z=i.setContext(N),L=a.setContext(N),B=z.lineWidth,M=z.color,G=L.dash||[],j=L.dashOffset,I=z.tickWidth,U=z.tickColor,q=z.tickBorderDash||[],X=z.tickBorderDashOffset;v=gW(this,b,l),v!==void 0&&(S=Ti(s,v,B),c?_=T=C=A=S:E=P=R=$=S,p.push({tx1:_,ty1:E,tx2:T,ty2:P,x1:C,y1:R,x2:A,y2:$,width:B,color:M,borderDash:G,borderDashOffset:j,tickWidth:I,tickColor:U,tickBorderDash:q,tickBorderDashOffset:X}))}return this._ticksLength=d,this._borderValue=y,p}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=i,h=Gl(s.grid),p=h+u,m=d?-u:p,x=-Wt(this.labelRotation),w=[];let g,y,b,v,S,_,E,T,P,C,R,A,$="middle";if(r==="top")_=this.bottom-m,E=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+m,E=this._getXAxisLabelAlignment();else if(r==="left"){const F=this._getYAxisLabelAlignment(h);E=F.textAlign,S=F.x}else if(r==="right"){const F=this._getYAxisLabelAlignment(h);E=F.textAlign,S=F.x}else if(n==="x"){if(r==="center")_=(e.top+e.bottom)/2+p;else if(Fe(r)){const F=Object.keys(r)[0],N=r[F];_=this.chart.scales[F].getPixelForValue(N)+p}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")S=(e.left+e.right)/2-p;else if(Fe(r)){const F=Object.keys(r)[0],N=r[F];S=this.chart.scales[F].getPixelForValue(N)}E=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?$="top":l==="end"&&($="bottom"));const H=this._getLabelSizes();for(g=0,y=a.length;g<y;++g){b=a[g],v=b.label;const F=i.setContext(this.getContext(g));T=this.getPixelForTick(g)+i.labelOffset,P=this._resolveTickFontOptions(g),C=P.lineHeight,R=xt(v)?v.length:1;const N=R/2,z=F.color,L=F.textStrokeColor,B=F.textStrokeWidth;let M=E;o?(S=T,E==="inner"&&(g===y-1?M=this.options.reverse?"left":"right":g===0?M=this.options.reverse?"right":"left":M="center"),r==="top"?c==="near"||x!==0?A=-R*C+C/2:c==="center"?A=-H.highest.height/2-N*C+C:A=-H.highest.height+C/2:c==="near"||x!==0?A=C/2:c==="center"?A=H.highest.height/2-N*C:A=H.highest.height-R*C,d&&(A*=-1),x!==0&&!F.showLabelBackdrop&&(S+=C/2*Math.sin(x))):(_=T,A=(1-R)*C/2);let G;if(F.showLabelBackdrop){const j=fn(F.backdropPadding),I=H.heights[g],U=H.widths[g];let q=A-j.top,X=0-j.left;switch($){case"middle":q-=I/2;break;case"bottom":q-=I;break}switch(E){case"center":X-=U/2;break;case"right":X-=U;break;case"inner":g===y-1?X-=U:g>0&&(X-=U/2);break}G={left:X,top:q,width:U+j.width,height:I+j.height,color:F.backdropColor}}w.push({label:v,font:P,textOffset:A,options:{rotation:x,color:z,strokeColor:L,strokeWidth:B,textAlign:M,textBaseline:$,translation:[S,_],backdrop:G}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Wt(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+i,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=Ti(e,this.left,o)-o/2,u=Ti(e,this.right,a)+a/2,d=h=l):(d=Ti(e,this.top,o)-o/2,h=Ti(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&E0(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;hu(s,c,0,u,l,a)}r&&P0(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=jt(s.font),o=fn(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Fe(n)?(l+=o.bottom,xt(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=vW(this,l,n,a);hu(e,s.text,0,0,i,{color:s.color,maxWidth:d,rotation:h,textAlign:yW(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Le(e.grid&&e.grid.z,-1),r=Le(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==bl.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return jt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Wd{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;kW(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,wW(e,o,s),this.override&&kt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in kt[r]&&(delete kt[r][s],this.override&&delete xo[s])}}function wW(t,e,n){const s=cu(Object.create(null),[n?kt.get(n):{},kt.get(e),t.defaults]);kt.set(e,s),t.defaultRoutes&&SW(e,t.defaultRoutes),t.descriptors&&kt.describe(e,t.descriptors)}function SW(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");kt.route(i,r,l,a)})}function kW(t){return"id"in t&&"defaults"in t}class _W{constructor(){this.controllers=new Wd(ma,"datasets",!0),this.elements=new Wd(pn,"elements"),this.plugins=new Wd(Object,"plugins"),this.scales=new Wd(bl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):et(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=uy(e);st(s["before"+r],[],s),n[e](s),st(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var Ws=new _W;class CW{constructor(){this._init=void 0}notify(e,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(st(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ht(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=Le(s.options&&s.options.plugins,{}),i=EW(s);return r===!1&&!n?[]:TW(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function EW(t){const e={},n=[],s=Object.keys(Ws.plugins.items);for(let i=0;i<s.length;i++)n.push(Ws.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function PW(t,e){return!e&&t===!1?null:t===!0?{}:t}function TW(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=PW(s[l],r);c!==null&&i.push({plugin:a,options:MW(t.config,{plugin:a,local:n[l]},c,o)})}return i}function MW(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function tx(t,e){const n=kt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function IW(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function RW(t,e){return t===e?"_index_":"_value_"}function CS(t){if(t==="x"||t==="y"||t==="r")return t}function AW(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function nx(t,...e){if(CS(t))return t;for(const n of e){const s=n.axis||AW(n.position)||t.length>1&&CS(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function ES(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function NW(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return ES(t,"x",n[0])||ES(t,"y",n[0])}return{}}function OW(t,e){const n=xo[t.type]||{scales:{}},s=e.scales||{},r=tx(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Fe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=nx(o,a,NW(o,t),kt.scales[a.type]),c=RW(l,r),u=n.scales||{};i[o]=Rc(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||tx(a,e),u=(xo[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=IW(d,l),p=o[h+"AxisID"]||h;i[p]=i[p]||Object.create(null),Rc(i[p],[{axis:h},s[p],u[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];Rc(a,[kt.scales[a.type],kt.scale])}),i}function v4(t){const e=t.options||(t.options={});e.plugins=Le(e.plugins,{}),e.scales=OW(t,e)}function w4(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function DW(t){return t=t||{},t.data=w4(t.data),v4(t),t}const PS=new Map,S4=new Set;function Hd(t,e){let n=PS.get(t);return n||(n=e(),PS.set(t,n),S4.add(n)),n}const Kl=(t,e,n)=>{const s=uu(e,n);s!==void 0&&t.add(s)};class LW{constructor(e){this._config=DW(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=w4(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),v4(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Hd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Hd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Hd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Hd(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>Kl(l,e,d))),u.forEach(d=>Kl(l,r,d)),u.forEach(d=>Kl(l,xo[i]||{},d)),u.forEach(d=>Kl(l,kt,d)),u.forEach(d=>Kl(l,Zm,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),S4.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,xo[n]||{},kt.datasets[n]||{},{type:n},kt,Zm]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=TS(this._resolverCache,e,r);let l=o;if(FW(o,n)){i.$shared=!1,s=Dn(s)?s():s;const c=this.createResolver(e,s,a);l=ol(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,s=[""],r){const{resolver:i}=TS(this._resolverCache,e,s);return Fe(n)?ol(i,n,void 0,r):i}}function TS(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:my(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const jW=t=>Fe(t)&&Object.getOwnPropertyNames(t).some(e=>Dn(t[e]));function FW(t,e){const{isScriptable:n,isIndexable:s}=o4(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(Dn(a)||jW(a))||o&&xt(a))return!0}return!1}var zW="4.5.1";const BW=["top","bottom","left","right","chartArea"];function MS(t,e){return t==="top"||t==="bottom"||BW.indexOf(t)===-1&&e==="x"}function IS(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function RS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),st(n&&n.onComplete,[t],e)}function $W(t){const e=t.chart,n=e.options.animation;st(n&&n.onProgress,[t],e)}function k4(t){return yy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const vh={},AS=t=>{const e=k4(t);return Object.values(vh).filter(n=>n.canvas===e).pop()};function UW(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function WW(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var zr;let so=(zr=class{static register(...e){Ws.add(...e),NS()}static unregister(...e){Ws.remove(...e),NS()}constructor(e,n){const s=this.config=new LW(n),r=k4(e),i=AS(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||aW(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=KB(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new CW,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=h$(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],vh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ar.listen(this,"complete",RS),ar.listen(this,"progress",$W),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return ht(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ws}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return tS(this.canvas,this.ctx),this}stop(){return ar.stop(this),this}resize(e,n){ar.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,rS(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),st(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};et(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=nx(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),et(i,o=>{const a=o.options,l=a.id,c=nx(l,a),u=Le(a.type,o.dtype);(a.position===void 0||MS(a.position,c)!==MS(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in s&&s[l].type===u)d=s[l];else{const h=Ws.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,e)}),et(r,(o,a)=>{o||delete s[a]}),et(s,o=>{ds.configure(this,o,o.options),ds.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(IS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||tx(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Ws.getController(a),{datasetElementType:c,dataElementType:u}=kt.datasets[a];Object.assign(l,{dataElementType:Ws.getElement(u),datasetElementType:c&&Ws.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){et(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!r&&i.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||et(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(IS("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){et(this.scales,e=>{ds.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!Y2(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;UW(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!Y2(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ds.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],et(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Dn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ar.has(this)?this.attached&&!ar.running(this)&&ar.start(this):(this.draw(),RS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=yU(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&E0(n,r),e.controller.draw(),r&&P0(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return du(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=BU.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Po(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Kn(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ar.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),tS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete vh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};et(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){et(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},et(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!yf(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=e$(e),c=WW(e,this._lastEvent,s,l);s&&(this._lastEvent=null,st(i.onHover,[e,a,this],this),l&&st(i.onClick,[e,a,this],this));const u=!yf(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},ie(zr,"defaults",kt),ie(zr,"instances",vh),ie(zr,"overrides",xo),ie(zr,"registry",Ws),ie(zr,"version",zW),ie(zr,"getChart",AS),zr);function NS(){return et(so.instances,t=>t._plugins.invalidate())}function _4(t,e,n=e){t.lineCap=Le(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Le(n.borderDash,e.borderDash)),t.lineDashOffset=Le(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Le(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Le(n.borderWidth,e.borderWidth),t.strokeStyle=Le(n.borderColor,e.borderColor)}function HW(t,e,n){t.lineTo(n.x,n.y)}function VW(t){return t.stepped?E$:t.tension||t.cubicInterpolationMode==="monotone"?P$:HW}function C4(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(i,a),u=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function YW(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:c}=C4(r,n,s),u=VW(i);let{move:d=!0,reverse:h}=s||{},p,m,x;for(p=0;p<=c;++p)m=r[(a+(h?c-p:p))%o],!m.skip&&(d?(t.moveTo(m.x,m.y),d=!1):u(t,x,m,h,i.stepped),x=m);return l&&(m=r[(a+(h?c:0))%o],u(t,x,m,h,i.stepped)),!!l}function GW(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=C4(r,n,s),{move:l=!0,reverse:c}=s||{};let u=0,d=0,h,p,m,x,w,g;const y=v=>(o+(c?a-v:v))%i,b=()=>{x!==w&&(t.lineTo(u,w),t.lineTo(u,x),t.lineTo(u,g))};for(l&&(p=r[y(0)],t.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=r[y(h)],p.skip)continue;const v=p.x,S=p.y,_=v|0;_===m?(S<x?x=S:S>w&&(w=S),u=(d*u+v)/++d):(b(),t.lineTo(v,S),m=_,d=0,x=w=S),g=S}b()}function sx(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?GW:YW}function KW(t){return t.stepped?oU:t.tension||t.cubicInterpolationMode==="monotone"?aU:Di}function qW(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),_4(t,e.options),t.stroke(r)}function XW(t,e,n,s){const{segments:r,options:i}=e,o=sx(e);for(const a of r)_4(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const QW=typeof Path2D=="function";function JW(t,e,n,s){QW&&!e.options.segment?qW(t,e,n,s):XW(t,e,n,s)}class fc extends pn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;J$(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=gU(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=hU(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=KW(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],p=i[d],m=i[h];if(p===m){a.push(p);continue}const x=Math.abs((r-p[n])/(m[n]-p[n])),w=l(p,m,x,s.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,s){return sx(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=sx(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),JW(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ie(fc,"id","line"),ie(fc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ie(fc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ie(fc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function OS(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class wh extends pn{constructor(n){super();ie(this,"parsed");ie(this,"skip");ie(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return OS(this,n,"x",s)}inYRange(n,s){return OS(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!du(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,ex(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ie(wh,"id","point"),ie(wh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ie(wh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const DS=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},ZW=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class LS extends pn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=st(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=jt(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=DS(s,i);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let d=e;i.textAlign="left",i.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((m,x)=>{const w=s+n/2+i.measureText(m.text).width;(x===0||c[c.length-1]+w+2*a>o)&&(d+=u,c[c.length-(x>0?0:1)]=0,p+=u,h++),l[x]={left:0,top:p,row:h,width:w,height:r},c[c.length-1]+=w+a}),d}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,p=0,m=0,x=0;return this.legendItems.forEach((w,g)=>{const{itemWidth:y,itemHeight:b}=eH(s,n,i,w,r);g>0&&p+b+2*a>u&&(d+=h+a,c.push({width:h,height:p}),m+=h+a,x++,h=p=0),l[g]={left:m,top:p,col:x,width:y,height:b},h=Math.max(h,y),p+=b+a}),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=ga(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=un(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=un(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=un(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=un(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;E0(e,this),this._draw(),P0(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=kt.color,l=ga(e.rtl,this.left,this.width),c=jt(o.font),{padding:u}=o,d=c.size,h=d/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:m,boxHeight:x,itemHeight:w}=DS(o,d),g=function(_,E,T){if(isNaN(m)||m<=0||isNaN(x)||x<0)return;r.save();const P=Le(T.lineWidth,1);if(r.fillStyle=Le(T.fillStyle,a),r.lineCap=Le(T.lineCap,"butt"),r.lineDashOffset=Le(T.lineDashOffset,0),r.lineJoin=Le(T.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=Le(T.strokeStyle,a),r.setLineDash(Le(T.lineDash,[])),o.usePointStyle){const C={radius:x*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:P},R=l.xPlus(_,m/2),A=E+h;r4(r,C,R,A,o.pointStyleWidth&&m)}else{const C=E+Math.max((d-x)/2,0),R=l.leftForLtr(_,m),A=pa(T.borderRadius);r.beginPath(),Object.values(A).some($=>$!==0)?_f(r,{x:R,y:C,w:m,h:x,radius:A}):r.rect(R,C,m,x),r.fill(),P!==0&&r.stroke()}r.restore()},y=function(_,E,T){hu(r,T.text,_,E+w/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},b=this.isHorizontal(),v=this._computeTitleHeight();b?p={x:un(i,this.left+u,this.right-s[0]),y:this.top+u+v,line:0}:p={x:this.left+u,y:un(i,this.top+v+u,this.bottom-n[0].height),line:0},d4(this.ctx,e.textDirection);const S=w+u;this.legendItems.forEach((_,E)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const T=r.measureText(_.text).width,P=l.textAlign(_.textAlign||(_.textAlign=o.textAlign)),C=m+h+T;let R=p.x,A=p.y;l.setWidth(this.width),b?E>0&&R+C+u>this.right&&(A=p.y+=S,p.line++,R=p.x=un(i,this.left+u,this.right-s[p.line])):E>0&&A+S>this.bottom&&(R=p.x=R+n[p.line].width+u,p.line++,A=p.y=un(i,this.top+v+u,this.bottom-n[p.line].height));const $=l.x(R);if(g($,A,_),R=f$(P,R+m+h,b?R+C:this.right,e.rtl),y(l.x(R),A,_),b)p.x+=C+u;else if(typeof _.text!="string"){const H=c.lineHeight;p.y+=E4(_,H)+u}else p.y+=S}),h4(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=jt(n.font),r=fn(n.padding);if(!n.display)return;const i=ga(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=un(e.align,d,this.right-h);else{const m=this.columnSizes.reduce((x,w)=>Math.max(x,w.height),0);u=c+un(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=un(a,d,d+h);o.textAlign=i.textAlign(fy(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,hu(o,n.text,p,u,s)}_computeTitleHeight(){const e=this.options.title,n=jt(e.font),s=fn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(uc(e,this.left,this.right)&&uc(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],uc(e,r.left,r.left+r.width)&&uc(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!sH(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=ZW(r,s);r&&!i&&st(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&st(n.onHover,[e,s,this],this)}else s&&st(n.onClick,[e,s,this],this)}}function eH(t,e,n,s,r){const i=tH(s,t,e,n),o=nH(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function tH(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function nH(t,e,n){let s=t;return typeof e.text!="string"&&(s=E4(e,n)),s}function E4(t,e){const n=t.text?t.text.length:0;return e*n}function sH(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var rH={id:"legend",_element:LS,start(t,e,n){const s=t.legend=new LS({ctx:t.ctx,options:n,chart:t});ds.configure(t,s,n),ds.addBox(t,s)},stop(t){ds.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;ds.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=fn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class P4 extends pn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=xt(s.text)?s.text.length:1;this._padding=fn(s.padding);const i=r*jt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=un(a,s,i),d=n+e,c=i-s):(o.position==="left"?(u=s+e,d=un(a,r,n),l=Qe*-.5):(u=i-e,d=un(a,n,r),l=Qe*.5),c=r-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=jt(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);hu(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:fy(n.align),textBaseline:"middle",translation:[o,a]})}}function iH(t,e){const n=new P4({ctx:t.ctx,options:e,chart:t});ds.configure(t,n,e),ds.addBox(t,n),t.titleBlock=n}var oH={id:"title",_element:P4,start(t,e,n){iH(t,n)},stop(t){const e=t.titleBlock;ds.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;ds.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const pc={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=il(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function $s(t,e){return e&&(xt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function lr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function aH(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function jS(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=jt(e.bodyFont),c=jt(e.titleFont),u=jt(e.footerFont),d=i.length,h=r.length,p=s.length,m=fn(e.padding);let x=m.height,w=0,g=s.reduce((v,S)=>v+S.before.length+S.lines.length+S.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),g){const v=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=p*v+(g-p)*l.lineHeight+(g-1)*e.bodySpacing}h&&(x+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let y=0;const b=function(v){w=Math.max(w,n.measureText(v).width+y)};return n.save(),n.font=c.string,et(t.title,b),n.font=l.string,et(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?o+2+e.boxPadding:0,et(s,v=>{et(v.before,b),et(v.lines,b),et(v.after,b)}),y=0,n.font=u.string,et(t.footer,b),n.restore(),w+=m.width,{width:w,height:x}}function lH(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function cH(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function uH(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),cH(c,t,e,n)&&(c="center"),c}function FS(t,e,n){const s=n.yAlign||e.yAlign||lH(t,n);return{xAlign:n.xAlign||e.xAlign||uH(t,e,n,s),yAlign:s}}function dH(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function hH(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function zS(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=pa(o);let m=dH(e,a);const x=hH(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,h)+r:a==="right"&&(m+=Math.max(d,p)+r),{x:us(m,0,s.width-e.width),y:us(x,0,s.height-e.height)}}function Vd(t,e,n){const s=fn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function BS(t){return $s([],lr(t))}function fH(t,e,n){return Po(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function $S(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const T4={beforeTitle:or,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:or,beforeBody:or,beforeLabel:or,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ht(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:or,afterBody:or,beforeFooter:or,footer:or,afterFooter:or};function Cn(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?T4[e].call(n,s):r}class rx extends pn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new wy(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=fH(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=Cn(s,"beforeTitle",this,e),i=Cn(s,"title",this,e),o=Cn(s,"afterTitle",this,e);let a=[];return a=$s(a,lr(r)),a=$s(a,lr(i)),a=$s(a,lr(o)),a}getBeforeBody(e,n){return BS(Cn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return et(e,i=>{const o={before:[],lines:[],after:[]},a=$S(s,i);$s(o.before,lr(Cn(a,"beforeLabel",this,i))),$s(o.lines,Cn(a,"label",this,i)),$s(o.after,lr(Cn(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return BS(Cn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=Cn(s,"beforeFooter",this,e),i=Cn(s,"footer",this,e),o=Cn(s,"afterFooter",this,e);let a=[];return a=$s(a,lr(r)),a=$s(a,lr(i)),a=$s(a,lr(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(aH(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,s))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,s))),et(a,u=>{const d=$S(e.callbacks,u);r.push(Cn(d,"labelColor",this,u)),i.push(Cn(d,"labelPointStyle",this,u)),o.push(Cn(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=pc[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=jS(this,s),c=Object.assign({},a,l),u=FS(this.chart,s,c),d=zS(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=pa(a),{x:h,y:p}=e,{width:m,height:x}=n;let w,g,y,b,v,S;return i==="center"?(v=p+x/2,r==="left"?(w=h,g=w-o,b=v+o,S=v-o):(w=h+m,g=w+o,b=v-o,S=v+o),y=w):(r==="left"?g=h+Math.max(l,u)+o:r==="right"?g=h+m-Math.max(c,d)-o:g=this.caretX,i==="top"?(b=p,v=b-o,w=g-o,y=g+o):(b=p+x,v=b+o,w=g+o,y=g-o),S=b),{x1:w,x2:g,x3:y,y1:b,y2:v,y3:S}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=ga(s.rtl,this.x,this.width);for(e.x=Vd(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=jt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,u=jt(i.bodyFont),d=Vd(this,"left",i),h=r.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+p;if(i.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(h,c)+c/2,g=m+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,ex(e,x,w,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,ex(e,x,w,g)}else{e.lineWidth=Fe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(h,c),w=r.leftForLtr(r.xPlus(h,1),c-2),g=pa(o.borderRadius);Object.values(g).some(y=>y!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,_f(e,{x,y:m,w:c,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),_f(e,{x:w,y:m+1,w:c-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(x,m,c,l),e.strokeRect(x,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,d=jt(s.bodyFont);let h=d.lineHeight,p=0;const m=ga(s.rtl,this.x,this.width),x=function(T){n.fillText(T,m.x(e.x+p),e.y+h/2),e.y+=h+i},w=m.textAlign(o);let g,y,b,v,S,_,E;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Vd(this,w,s),n.fillStyle=s.bodyColor,et(this.beforeBody,x),p=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,v=0,_=r.length;v<_;++v){for(g=r[v],y=this.labelTextColors[v],n.fillStyle=y,et(g.before,x),b=g.lines,a&&b.length&&(this._drawColorBox(n,e,v,m,s),h=Math.max(d.lineHeight,l)),S=0,E=b.length;S<E;++S)x(b[S]),h=d.lineHeight;et(g.after,x)}p=0,h=d.lineHeight,et(this.afterBody,x),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=ga(s.rtl,this.x,this.width);for(e.x=Vd(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=jt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:m}=pa(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=pc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=jS(this,e),l=Object.assign({},o,this._size),c=FS(n,e,l),u=zS(e,l,c,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=fn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),d4(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),h4(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!yf(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!yf(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=pc[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}ie(rx,"positioners",pc);var pH={id:"tooltip",_element:rx,positioners:pc,afterInit(t,e,n){n&&(t.tooltip=new rx({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:T4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const gH=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function mH(t,e,n,s){const r=t.indexOf(e);if(r===-1)return gH(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const xH=(t,e)=>t===null?null:us(Math.round(t),0,e);function US(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ix extends bl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ht(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:mH(s,e,Le(n,e),this._addedLabels),xH(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return US.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ie(ix,"id","category"),ie(ix,"defaults",{ticks:{callback:US}});function bH(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,p=i||1,m=u-1,{min:x,max:w}=e,g=!ht(o),y=!ht(a),b=!ht(c),v=(w-x)/(d+1);let S=G2((w-x)/m/p)*p,_,E,T,P;if(S<1e-14&&!g&&!y)return[{value:x},{value:w}];P=Math.ceil(w/S)-Math.floor(x/S),P>m&&(S=G2(P*S/m/p)*p),ht(l)||(_=Math.pow(10,l),S=Math.ceil(S*_)/_),r==="ticks"?(E=Math.floor(x/S)*S,T=Math.ceil(w/S)*S):(E=x,T=w),g&&y&&i&&r$((a-o)/i,S/1e3)?(P=Math.round(Math.min((a-o)/S,u)),S=(a-o)/P,E=o,T=a):b?(E=g?o:E,T=y?a:T,P=c-1,S=(T-E)/P):(P=(T-E)/S,Ac(P,Math.round(P),S/1e3)?P=Math.round(P):P=Math.ceil(P));const C=Math.max(K2(S),K2(E));_=Math.pow(10,ht(l)?C:l),E=Math.round(E*_)/_,T=Math.round(T*_)/_;let R=0;for(g&&(h&&E!==o?(n.push({value:o}),E<o&&R++,Ac(Math.round((E+R*S)*_)/_,o,WS(o,v,t))&&R++):E<o&&R++);R<P;++R){const A=Math.round((E+R*S)*_)/_;if(y&&A>a)break;n.push({value:A})}return y&&h&&T!==a?n.length&&Ac(n[n.length-1].value,a,WS(a,v,t))?n[n.length-1].value=a:n.push({value:a}):(!y||T===a)&&n.push({value:T}),n}function WS(t,e,{horizontal:n,minRotation:s}){const r=Wt(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class yH extends bl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ht(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=rl(r),c=rl(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=bH(r,i);return e.bounds==="ticks"&&i$(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return gy(e,this.chart.options.locale,this.options.ticks.format)}}class ox extends yH{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=jn(e)?e:0,this.max=jn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Wt(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ie(ox,"id","linear"),ie(ox,"defaults",{ticks:{callback:s4.formatters.numeric}});const I0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Mn=Object.keys(I0);function HS(t,e){return t-e}function VS(t,e){if(ht(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),jn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(mo(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function YS(t,e,n,s){const r=Mn.length;for(let i=Mn.indexOf(t);i<r-1;++i){const o=I0[Mn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return Mn[i]}return Mn[r-1]}function vH(t,e,n,s,r){for(let i=Mn.length-1;i>=Mn.indexOf(n);i--){const o=Mn[i];if(I0[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return Mn[n?Mn.indexOf(n):0]}function wH(t){for(let e=Mn.indexOf(t)+1,n=Mn.length;e<n;++e)if(I0[Mn[e]].common)return Mn[e]}function GS(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=hy(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function SH(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function KS(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:SH(t,s,r,n)}class Pf extends bl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new DU._date(e.adapters.date);r.init(n),Rc(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:VS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=jn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=jn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=c$(r,i,o);return this._unit=n.unit||(s.autoSkip?YS(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):vH(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:wH(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),KS(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=us(n,0,o),s=us(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||YS(i.minUnit,n,s,this._getLabelCapacity(n)),a=Le(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=mo(l)||l===!0,u={};let d=n,h,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const m=r.ticks.source==="data"&&this.getDataTimestamps();for(h=d,p=0;h<s;h=+e.add(h,a,o),p++)GS(u,h,m);return(h===s||r.bounds==="ticks"||p===1)&&GS(u,h,m),Object.keys(u).sort(HS).map(x=>+x)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return st(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=s[n],p=c&&d&&h&&h.major;return this._adapter.format(e,r||(p?d:u))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Wt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,KS(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(VS(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return d$(e.sort(HS))}}ie(Pf,"id","time"),ie(Pf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Yd(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=Vi(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=Vi(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class qS extends Pf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Yd(n,this.min),this._tableRange=Yd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Yd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Yd(this._table,s*this._tableRange+this._minPos,!0)}}ie(qS,"id","timeseries"),ie(qS,"defaults",Pf.defaults);const M4="label";function XS(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function kH(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function I4(t,e){t.labels=e}function R4(t,e,n=M4){const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function _H(t,e=M4){const n={labels:[],datasets:[]};return I4(n,t.labels),R4(n,t.datasets,e),n}function CH(t,e){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=t,p=k.useRef(null),m=k.useRef(null),x=()=>{p.current&&(m.current=new so(p.current,{type:o,data:_H(a,i),options:l&&{...l},plugins:c}),XS(e,m.current))},w=()=>{XS(e,null),m.current&&(m.current.destroy(),m.current=null)};return k.useEffect(()=>{!r&&m.current&&l&&kH(m.current,l)},[r,l]),k.useEffect(()=>{!r&&m.current&&I4(m.current.config.data,a.labels)},[r,a.labels]),k.useEffect(()=>{!r&&m.current&&a.datasets&&R4(m.current.config.data,a.datasets,i)},[r,a.datasets]),k.useEffect(()=>{m.current&&(r?(w(),setTimeout(x)):m.current.update(d))},[r,l,a.labels,a.datasets,d]),k.useEffect(()=>{m.current&&(w(),setTimeout(x))},[o]),k.useEffect(()=>(x(),()=>w()),[]),f.jsx("canvas",{ref:p,role:"img",height:n,width:s,...h,children:u})}const EH=k.forwardRef(CH);function PH(t,e){return so.register(e),k.forwardRef((n,s)=>f.jsx(EH,{...n,ref:s,type:t}))}const TH=PH("scatter",bh);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const QS={modes:{point(t,e){return Sh(t,e,{intersect:!0})},nearest(t,e,n){return RH(t,e,n)},x(t,e,n){return Sh(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return Sh(t,e,{intersect:n.intersect,axis:"y"})}}};function ky(t,e,n){return(QS.modes[n.mode]||QS.modes.nearest)(t,e,n)}function MH(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function IH(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function Sh(t,e,n){return t.filter(s=>n.intersect?s.inRange(e.x,e.y):MH(s,e,n.axis))}function RH(t,e,n){let s=Number.POSITIVE_INFINITY;return Sh(t,e,n).reduce((r,i)=>{const o=i.getCenterPoint(),a=IH(e,o,n.axis),l=il(e,a);return l<s?(r=[i],s=l):l===s&&r.push(i),r},[]).sort((r,i)=>r._index-i._index).slice(0,1)}function To(t,e,n){const s=Math.cos(n),r=Math.sin(n),i=e.x,o=e.y;return{x:i+s*(t.x-i)-r*(t.y-o),y:o+r*(t.x-i)+s*(t.y-o)}}const AH=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Yi=.001,R0=(t,e,n)=>Math.min(n,Math.max(e,t)),A4=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function NH(t,e,n){for(const s of Object.keys(t))t[s]=R0(t[s],e,n);return t}function OH(t,e,n,s){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function N4(t,{x:e,y:n,x2:s,y2:r},i,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=t.x>=e-l-Yi&&t.x<=s+l+Yi,u=t.y>=n-l-Yi&&t.y<=r+l+Yi;return i==="x"?c:(i==="y"||c)&&u}function O4(t,{rect:e,center:n},s,{rotation:r,borderWidth:i,hitTolerance:o}){const a=To(t,n,Wt(-r));return N4(a,e,s,{borderWidth:i,hitTolerance:o})}function Mo(t,e){const{centerX:n,centerY:s}=t.getProps(["centerX","centerY"],e);return{x:n,y:s}}function DH(t,e,n,s=!0){const r=n.split(".");let i=0;for(const o of e.split(".")){const a=r[i++];if(parseInt(o,10)<parseInt(a,10))break;if(AH(a,o)){if(s)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const D4=t=>typeof t=="string"&&t.endsWith("%"),L4=t=>parseFloat(t)/100,j4=t=>R0(L4(t),0,1),ql=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),LH={box:t=>ql(t.centerX,t.centerY),doughnutLabel:t=>ql(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>ql(t.centerX,t.centerY),line:t=>ql(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>ql(t.centerX,t.centerY)};function _y(t,e){return e==="start"?0:e==="end"?t:D4(e)?j4(e)*t:t/2}function yi(t,e,n=!0){return typeof e=="number"?e:D4(e)?(n?j4(e):L4(e))*t:t}function jH(t,e){const{x:n,width:s}=t,r=e.textAlign;return r==="center"?n+s/2:r==="end"||r==="right"?n+s:n}function F4(t,e,{borderWidth:n,position:s,xAdjust:r,yAdjust:i},o){const a=Fe(o),l=e.width+(a?o.width:0)+n,c=e.height+(a?o.height:0)+n,u=Cy(s),d=JS(t.x,l,r,u.x),h=JS(t.y,c,i,u.y);return{x:d,y:h,x2:d+l,y2:h+c,width:l,height:c,centerX:d+l/2,centerY:h+c/2}}function Cy(t,e="center"){return Fe(t)?{x:Le(t.x,e),y:Le(t.y,e)}:(t=Le(t,e),{x:t,y:t})}const z4=(t,e)=>t&&t.autoFit&&e<1;function B4(t,e){const n=t.font,s=xt(n)?n:[n];return z4(t,e)?s.map(function(r){const i=jt(r);return i.size=Math.floor(r.size*e),i.lineHeight=r.lineHeight,jt(i)}):s.map(r=>jt(r))}function $4(t){return t&&(Kn(t.xValue)||Kn(t.yValue))}function JS(t,e,n=0,s){return t-_y(e,s)+n}function yl(t,e,n){const s=n.init;if(s){if(s===!0)return W4(e,n)}else return;return FH(t,e,n)}function U4(t,e,n){let s=!1;return e.forEach(r=>{Dn(t[r])?(s=!0,n[r]=t[r]):Kn(n[r])&&delete n[r]}),s}function W4(t,e){const n=e.type||"line";return LH[n](t)}function FH(t,e,n){const s=st(n.init,[{chart:t,properties:e,options:n}]);if(s===!0)return W4(e,n);if(Fe(s))return s}const wg=new Map,zH=t=>isNaN(t)||t<=0,BH=t=>t.reduce(function(e,n){return e+=n.string,e},"");function A0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function N0(t,{x:e,y:n},s){s&&(t.translate(e,n),t.rotate(Wt(s)),t.translate(-e,-n))}function Tr(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function vl(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function O0(t,e){const n=e.content;if(A0(n))return{width:yi(n.width,e.width),height:yi(n.height,e.height)};const s=B4(e),r=e.textStrokeWidth,i=xt(n)?n:[n],o=i.join()+BH(s)+r+(t._measureText?"-spriting":"");return wg.has(o)||wg.set(o,HH(t,i,s,r)),wg.get(o)}function H4(t,e,n){const{x:s,y:r,width:i,height:o}=e;t.save(),vl(t,n);const a=Tr(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),_f(t,{x:s,y:r,w:i,h:o,radius:NH(pa(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function V4(t,e,n,s){const r=n.content;if(A0(r)){t.save(),t.globalAlpha=GH(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const i=xt(r)?r:[r],o=B4(n,s),a=n.color,l=xt(a)?a:[a],c=jH(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,$H(t,n)&&VH(t,{x:c,y:u},i,o),YH(t,{x:c,y:u},i,{fonts:o,colors:l}),t.restore()}function $H(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function UH(t,e,n,s){const{radius:r,options:i}=e,o=i.pointStyle,a=i.rotation;let l=(a||0)*dy;if(A0(o)){t.save(),t.translate(n,s),t.rotate(l),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}zH(r)||WH(t,{x:n,y:s,radius:r,rotation:a,style:o,rad:l})}function WH(t,{x:e,y:n,radius:s,rotation:r,style:i,rad:o}){let a,l,c,u;switch(t.beginPath(),i){default:t.arc(e,n,s,0,Zt),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=Sf,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=Sf,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),t.closePath();break;case"rectRounded":u=s*.516,c=s-u,a=Math.cos(o+os)*c,l=Math.sin(o+os)*c,t.arc(e-a,n-l,u,o-Qe,o-en),t.arc(e+l,n-a,u,o-en,o),t.arc(e+a,n+l,u,o,o+en),t.arc(e-l,n+a,u,o+en,o+Qe),t.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*s,t.rect(e-c,n-c,2*c,2*c);break}o+=os;case"rectRot":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+l,n-a),t.lineTo(e+a,n+l),t.lineTo(e-l,n+a),t.closePath();break;case"crossRot":o+=os;case"cross":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"star":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a),o+=os,a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"line":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*s,n+Math.sin(o)*s);break}t.fill()}function HH(t,e,n,s){t.save();const r=e.length;let i=0,o=s;for(let a=0;a<r;a++){const l=n[Math.min(a,n.length-1)];t.font=l.string;const c=e[a];i=Math.max(i,t.measureText(c).width+s),o+=l.lineHeight}return t.restore(),{width:i,height:o}}function VH(t,{x:e,y:n},s,r){t.beginPath();let i=0;s.forEach(function(o,a){const l=r[Math.min(a,r.length-1)],c=l.lineHeight;t.font=l.string,t.strokeText(o,e,n+c/2+i),i+=c}),t.stroke()}function YH(t,{x:e,y:n},s,{fonts:r,colors:i}){let o=0;s.forEach(function(a,l){const c=i[Math.min(l,i.length-1)],u=r[Math.min(l,r.length-1)],d=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=c,t.fillText(a,e,n+d/2+o),o+=d,t.fill()})}function GH(t,e){const n=mo(t)?t:e;return mo(n)?R0(n,0,1):1}const Y4=["left","bottom","top","right"];function KH(t,e){const{pointX:n,pointY:s,options:r}=e,i=r.callout,o=i&&i.display&&ZH(e,i);if(!o||tV(e,i,o))return;if(t.save(),t.beginPath(),!Tr(t,i))return t.restore();const{separatorStart:l,separatorEnd:c}=qH(e,o),{sideStart:u,sideEnd:d}=QH(e,o,l);(i.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(d.x,d.y);const h=To({x:n,y:s},e.getCenterPoint(),Wt(-e.rotation));t.lineTo(h.x,h.y),t.stroke(),t.restore()}function qH(t,e){const{x:n,y:s,x2:r,y2:i}=t,o=XH(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:s},l={x:a.x,y:i}):(a={x:n,y:s+o},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function XH(t,e){const{width:n,height:s,options:r}=t,i=r.callout.margin+r.borderWidth/2;return e==="right"?n+i:e==="bottom"?s+i:-i}function QH(t,e,n){const{y:s,width:r,height:i,options:o}=t,a=o.callout.start,l=JH(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:s+yi(i,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+yi(r,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function JH(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function ZH(t,e){const n=e.position;return Y4.includes(n)?n:eV(t,e)}function eV(t,e){const{x:n,y:s,x2:r,y2:i,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:h}=t,p={x:u,y:d},m=e.start,x=yi(o,m),w=yi(a,m),g=[n,n+x,n+x,r],y=[s+w,i,s,i],b=[];for(let v=0;v<4;v++){const S=To({x:g[v],y:y[v]},p,Wt(h));b.push({position:Y4[v],distance:il(S,{x:l,y:c})})}return b.sort((v,S)=>v.distance-S.distance)[0].position}function tV(t,e,n){const{pointX:s,pointY:r}=t,i=e.margin;let o=s,a=r;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?a+=i:n==="bottom"&&(a-=i),t.inRange(o,a)}const ZS={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function ll(t,e,n){return e=typeof e=="number"?e:t.parse(e),jn(e)?t.getPixelForValue(e):n}function bo(t,e,n){const s=e[n];if(s||n==="scaleID")return s;const r=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===r);return i.length?i[0].id:r}function G4(t,e){if(t){const n=t.options.reverse,s=ll(t,e.min,n?e.end:e.start),r=ll(t,e.max,n?e.start:e.end);return{start:s,end:r}}}function K4(t,e){const{chartArea:n,scales:s}=t,r=s[bo(s,e,"xScaleID")],i=s[bo(s,e,"yScaleID")];let o=n.width/2,a=n.height/2;return r&&(o=ll(r,e.xValue,r.left+r.width/2)),i&&(a=ll(i,e.yValue,i.top+i.height/2)),{x:o,y:a}}function Ey(t,e){const n=t.scales,s=n[bo(n,e,"xScaleID")],r=n[bo(n,e,"yScaleID")];if(!s&&!r)return{};let{left:i,right:o}=s||t.chartArea,{top:a,bottom:l}=r||t.chartArea;const c=ek(s,{min:e.xMin,max:e.xMax,start:i,end:o});i=c.start,o=c.end;const u=ek(r,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:i,y:a,x2:o,y2:l,width:o-i,height:l-a,centerX:i+(o-i)/2,centerY:a+(l-a)/2}}function q4(t,e){if(!$4(e)){const n=Ey(t,e);let s=e.radius;(!s||isNaN(s))&&(s=Math.min(n.width,n.height)/2,e.radius=s);const r=s*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-s,y:o-s,x2:i+s,y2:o+s,centerX:i,centerY:o,width:r,height:r,radius:s}}return sV(t,e)}function nV(t,e){const{scales:n,chartArea:s}=t,r=n[e.scaleID],i={x:s.left,y:s.top,x2:s.right,y2:s.bottom};return r?rV(r,i,e):iV(n,i,e),i}function X4(t,e){const n=Ey(t,e);return n.initProperties=yl(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:lV(t,n,e),initProperties:n.initProperties}],n}function sV(t,e){const n=K4(t,e),s=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:s,height:s}}function ek(t,e){const n=G4(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function rV(t,e,n){const s=ll(t,n.value,NaN),r=ll(t,n.endValue,s);t.isHorizontal()?(e.x=s,e.x2=r):(e.y=s,e.y2=r)}function iV(t,e,n){for(const s of Object.keys(ZS)){const r=t[bo(t,n,s)];if(r){const{min:i,max:o,start:a,end:l,startProp:c,endProp:u}=ZS[s],d=G4(r,{min:n[i],max:n[o],start:r[a],end:r[l]});e[c]=d.start,e[u]=d.end}}}function oV({properties:t,options:e},n,s,r){const{x:i,x2:o,width:a}=t;return Q4({start:i,end:o,borderWidth:e.borderWidth},{position:s.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function aV({properties:t,options:e},n,s,r){const{y:i,y2:o,height:a}=t;return Q4({start:i,end:o,borderWidth:e.borderWidth},{position:s.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function Q4(t,e){const{start:n,end:s,borderWidth:r}=t,{position:i,padding:{start:o,end:a},adjust:l}=e,c=s-r-n-o-a-e.size;return n+r/2+l+_y(c,i)}function lV(t,e,n){const s=n.label;s.backgroundColor="transparent",s.callout.display=!1;const r=Cy(s.position),i=fn(s.padding),o=O0(t.ctx,s),a=oV({properties:e,options:n},o,r,i),l=aV({properties:e,options:n},o,r,i),c=o.width+i.width,u=o.height+i.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:s.rotation}}const ax=["enter","leave"],Py=ax.concat("click");function cV(t,e,n){e.listened=U4(n,Py,e.listeners),e.moveListened=!1,ax.forEach(s=>{Dn(n[s])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(s=>{!e.listened&&Dn(s.click)&&(e.listened=!0),e.moveListened||ax.forEach(r=>{Dn(s[r])&&(e.listened=!0,e.moveListened=!0)})})}function uV(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return dV(t,e,n);case"click":return hV(t,e,n)}}function dV(t,e,n){if(!t.moveListened)return;let s;e.type==="mousemove"?s=ky(t.visibleElements,e,n.interaction):s=[];const r=t.hovered;t.hovered=s;const i={state:t,event:e};let o=tk(i,"leave",r,s);return tk(i,"enter",s,r)||o}function tk({state:t,event:e},n,s,r){let i;for(const o of s)r.indexOf(o)<0&&(i=J4(o.options[n]||t.listeners[n],o,e)||i);return i}function hV(t,e,n){const s=t.listeners,r=ky(t.visibleElements,e,n.interaction);let i;for(const o of r)i=J4(o.options.click||s.click,o,e)||i;return i}function J4(t,e,n){return st(t,[e.$context,n])===!0}const Tf=["afterDraw","beforeDraw"];function fV(t,e,n){const s=e.visibleElements;e.hooked=U4(n,Tf,e.hooks),e.hooked||s.forEach(r=>{e.hooked||Tf.forEach(i=>{Dn(r.options[i])&&(e.hooked=!0)})})}function nk(t,e,n){if(t.hooked){const s=e.options[n]||t.hooks[n];return st(s,[e.$context])}}function pV(t,e,n){const s=yV(t.scales,e,n);let r=sk(e,s,"min","suggestedMin");r=sk(e,s,"max","suggestedMax")||r,r&&Dn(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function gV(t,e){for(const n of t)xV(n,e)}function sk(t,e,n,s){if(jn(e[n])&&!mV(t.options,n,s)){const r=t[n]!==e[n];return t[n]=e[n],r}}function mV(t,e,n){return Kn(t[e])||Kn(t[n])}function xV(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const s=bo(e,t,n);s&&!e[s]&&bV(t,n)&&console.warn(`No scale found with id '${s}' for annotation '${t.id}'`)}}function bV(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const s of["Min","Max","Value"])if(Kn(t[n+s]))return!0;return!1}function yV(t,e,n){const s=e.axis,r=e.id,i=s+"ScaleID",o={min:Le(e.min,Number.NEGATIVE_INFINITY),max:Le(e.max,Number.POSITIVE_INFINITY)};for(const a of n)a.scaleID===r?rk(a,e,["value","endValue"],o):bo(t,a,i)===r&&rk(a,e,[s+"Min",s+"Max",s+"Value"],o);return o}function rk(t,e,n,s){for(const r of n){const i=t[r];if(Kn(i)){const o=e.parse(i);s.min=Math.min(s.min,o),s.max=Math.max(s.max,o)}}}class wl extends pn{inRange(e,n,s,r){const{x:i,y:o}=To({x:e,y:n},this.getCenterPoint(r),Wt(-this.options.rotation));return N4({x:i,y:o},this.getProps(["x","y","x2","y2"],r),s,this.options)}getCenterPoint(e){return Mo(this,e)}draw(e){e.save(),N0(e,this.getCenterPoint(),this.options.rotation),H4(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return X4(e,n)}}wl.id="boxAnnotation";wl.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};wl.defaultRoutes={borderColor:"color",backgroundColor:"color"};wl.descriptors={label:{_fallback:!0}};class D0 extends pn{inRange(e,n,s,r){return O4({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Mo(this,e)}draw(e){const n=this.options;!n.display||!n.content||(CV(e,this),e.save(),N0(e,this.getCenterPoint(),this.rotation),V4(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const s=vV(e,n);if(!s)return{};const{controllerMeta:r,point:i,radius:o}=SV(e,n,s);let a=O0(e.ctx,n);const l=kV(a,o);z4(n,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:d}=n,h=F4(i,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return{initProperties:yl(e,h,n),...h,...r,rotation:n.rotation,_fitRatio:l}}}D0.id="doughnutLabelAnnotation";D0.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};D0.defaultRoutes={};function vV(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,s){const r=s.controller;return r instanceof dc&&wV(t,e,s.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?s:n},void 0)}function wV(t,e,n){if(!e.autoHide)return!0;for(let s=0;s<n.length;s++)if(!n[s].hidden&&t.getDataVisibility(s))return!0}function SV({chartArea:t},e,n){const{left:s,top:r,right:i,bottom:o}=t,{innerRadius:a,offsetX:l,offsetY:c}=n.controller,u=(s+i)/2+l,d=(r+o)/2+c,h={left:Math.max(u-a,s),right:Math.min(u+a,i),top:Math.max(d-a,r),bottom:Math.min(d+a,o)},p={x:(h.left+h.right)/2,y:(h.top+h.bottom)/2},m=e.spacing+e.borderWidth/2,x=a-m,w=p.y>d,g=w?r+m:o-m,y=_V(g,u,d,x);return{controllerMeta:{_centerX:u,_centerY:d,_radius:x,_counterclockwise:w,...y},point:p,radius:Math.min(a,Math.min(h.right-h.left,h.bottom-h.top)/2)}}function kV({width:t,height:e},n){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/s}function _V(t,e,n,s){const r=Math.pow(n-t,2),i=Math.pow(s,2),o=e*-2,a=Math.pow(e,2)+r-i,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:Zt};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:Jm({x:e,y:n},{x:c,y:t}).angle,_endAngle:Jm({x:e,y:n},{x:u,y:t}).angle}}function CV(t,e){const{_centerX:n,_centerY:s,_radius:r,_startAngle:i,_endAngle:o,_counterclockwise:a,options:l}=e;t.save();const c=Tr(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,s,r,i,o,a),t.closePath(),t.fill(),c&&t.stroke(),t.restore()}class Uu extends pn{inRange(e,n,s,r){return O4({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Mo(this,e)}draw(e){const n=this.options,s=!Kn(this._visible)||this._visible;!n.display||!n.content||!s||(e.save(),N0(e,this.getCenterPoint(),this.rotation),KH(e,this),H4(e,this,n),V4(e,EV(this),n),e.restore())}resolveElementProperties(e,n){let s;if($4(n))s=K4(e,n);else{const{centerX:a,centerY:l}=Ey(e,n);s={x:a,y:l}}const r=fn(n.padding),i=O0(e.ctx,n),o=F4(s,i,n,r);return{initProperties:yl(e,o,n),pointX:s.x,pointY:s.y,...o,rotation:n.rotation}}}Uu.id="labelAnnotation";Uu.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Uu.defaultRoutes={borderColor:"color"};function EV({x:t,y:e,width:n,height:s,options:r}){const i=r.borderWidth/2,o=fn(r.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-r.borderWidth,height:s-o.top-o.bottom-r.borderWidth}}const Ty=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),lx=(t,e,n)=>Ty(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,ik=(t,e,n)=>Ty(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,gc=t=>t*t,PV=(t,e,{x:n,y:s,x2:r,y2:i},o)=>o==="y"?{start:Math.min(s,i),end:Math.max(s,i),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},ok=(t,e,n,s)=>(1-s)*(1-s)*t+2*(1-s)*s*e+s*s*n,cx=(t,e,n,s)=>({x:ok(t.x,e.x,n.x,s),y:ok(t.y,e.y,n.y,s)}),ak=(t,e,n,s)=>2*(1-s)*(e-t)+2*s*(n-e),lk=(t,e,n,s)=>-Math.atan2(ak(t.x,e.x,n.x,s),ak(t.y,e.y,n.y,s))+.5*Qe;class Wu extends pn{inRange(e,n,s,r){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y"){const o={mouseX:e,mouseY:n},{path:a,ctx:l}=this;if(a){Tr(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=e*u.currentDevicePixelRatio,h=n*u.currentDevicePixelRatio,p=l.isPointInStroke(a,d,h)||ux(this,o,r);return l.restore(),p}const c=gc(i);return RV(this,o,c,r)||ux(this,o,r)}return TV(this,{mouseX:e,mouseY:n},s,{hitSize:i,useFinalPosition:r})}getCenterPoint(e){return Mo(this,e)}draw(e){const{x:n,y:s,x2:r,y2:i,cp:o,options:a}=this;if(e.save(),!Tr(e,a))return e.restore();vl(e,a);const l=Math.sqrt(Math.pow(r-n,2)+Math.pow(i-s,2));if(a.curve&&o)return zV(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=Z4(this),p=Math.atan2(i-s,r-n);e.translate(n,s),e.rotate(p),e.beginPath(),e.moveTo(0+d,0),e.lineTo(l-h,0),e.shadowColor=a.borderShadowColor,e.stroke(),dx(e,0,d,c),dx(e,l,-h,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const s=nV(e,n),{x:r,y:i,x2:o,y2:a}=s,l=MV(s,e.chartArea),c=l?IV({x:r,y:i},{x:o,y:a},e.chartArea):{x:r,y:i,x2:o,y2:a,width:Math.abs(o-r),height:Math.abs(a-i)};if(c.centerX=(o+r)/2,c.centerY=(a+i)/2,c.initProperties=yl(e,c,n),n.curve){const d={x:c.x,y:c.y},h={x:c.x2,y:c.y2};c.cp=FV(c,n,il(d,h))}const u=AV(e,c,n.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}Wu.id="lineAnnotation";const ck={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Wu.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},ck),fill:!1,length:12,start:Object.assign({},ck),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Uu.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Wu.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Wu.defaultRoutes={borderColor:"color"};function TV(t,{mouseX:e,mouseY:n},s,{hitSize:r,useFinalPosition:i}){const o=PV(e,n,t.getProps(["x","y","x2","y2"],i),s);return A4(o,r)||ux(t,{mouseX:e,mouseY:n},i,s)}function MV({x:t,y:e,x2:n,y2:s},{top:r,right:i,bottom:o,left:a}){return!(t<a&&n<a||t>i&&n>i||e<r&&s<r||e>o&&s>o)}function uk({x:t,y:e},n,{top:s,right:r,bottom:i,left:o}){return t<o&&(e=ik(o,{x:t,y:e},n),t=o),t>r&&(e=ik(r,{x:t,y:e},n),t=r),e<s&&(t=lx(s,{x:t,y:e},n),e=s),e>i&&(t=lx(i,{x:t,y:e},n),e=i),{x:t,y:e}}function IV(t,e,n){const{x:s,y:r}=uk(t,e,n),{x:i,y:o}=uk(e,t,n);return{x:s,y:r,x2:i,y2:o,width:Math.abs(i-s),height:Math.abs(o-r)}}function RV(t,{mouseX:e,mouseY:n},s=Yi,r){const{x:i,y:o,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],r),c=a-i,u=l-o,d=gc(c)+gc(u),h=d===0?-1:((e-i)*c+(n-o)*u)/d;let p,m;return h<0?(p=i,m=o):h>1?(p=a,m=l):(p=i+h*c,m=o+h*u),gc(e-p)+gc(n-m)<=s}function ux(t,{mouseX:e,mouseY:n},s,r){const i=t.label;return i.options.display&&i.inRange(e,n,r,s)}function AV(t,e,n){const s=n.borderWidth,r=fn(n.padding),i=O0(t.ctx,n),o=i.width+r.width+s,a=i.height+r.height+s;return OV(e,n,{width:o,height:a,padding:r},t.chartArea)}function NV(t){const{x:e,y:n,x2:s,y2:r}=t,i=Math.atan2(r-n,s-e);return i>Qe/2?i-Qe:i<Qe/-2?i+Qe:i}function OV(t,e,n,s){const{width:r,height:i,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},d=e.rotation==="auto"?NV(t):Wt(e.rotation),h=DV(r,i,d),p=LV(t,e,{labelSize:h,padding:o},s),m=t.cp?cx(c,t.cp,u,p):Ty(c,u,p),x={size:h.w,min:s.left,max:s.right,padding:o.left},w={size:h.h,min:s.top,max:s.bottom,padding:o.top},g=hk(m.x,x)+a,y=hk(m.y,w)+l;return{x:g-r/2,y:y-i/2,x2:g+r/2,y2:y+i/2,centerX:g,centerY:y,pointX:m.x,pointY:m.y,width:r,height:i,rotation:ZE(d)}}function DV(t,e,n){const s=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*s)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*s)}}function LV(t,e,n,s){let r;const i=jV(t,s);return e.position==="start"?r=dk({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?r=1-dk({w:t.x-t.x2,h:t.y-t.y2},n,e,i):r=_y(1,e.position),r}function dk(t,e,n,s){const{labelSize:r,padding:i}=e,o=t.w*s.dx,a=t.h*s.dy,l=o>0&&(r.w/2+i.left-s.x)/o,c=a>0&&(r.h/2+i.top-s.y)/a;return R0(Math.max(l,c),0,.25)}function jV(t,e){const{x:n,x2:s,y:r,y2:i}=t,o=Math.min(r,i)-e.top,a=Math.min(n,s)-e.left,l=e.bottom-Math.max(r,i),c=e.right-Math.max(n,s);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function hk(t,e){const{size:n,min:s,max:r,padding:i}=e,o=n/2;return n>r-s?(r+s)/2:(s>=t-i-o&&(t=s+i+o),r<=t+i+o&&(t=r-i-o),t)}function Z4(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,s=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:fk(t,n),endAdjust:fk(t,s)}}function fk(t,e){if(!e||!e.display)return 0;const{length:n,width:s}=e,r=t.options.borderWidth/2,i={x:n,y:s+r};return Math.abs(lx(0,i,{x:0,y:r}))}function dx(t,e,n,s){if(!s||!s.display)return;const{length:r,width:i,fill:o,backgroundColor:a,borderColor:l}=s,c=Math.abs(e-r)+n;t.beginPath(),vl(t,s),Tr(t,s),t.moveTo(c,-i),t.lineTo(e+n,0),t.lineTo(c,i),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=s.borderShadowColor,t.stroke()}function FV(t,e,n){const{x:s,y:r,x2:i,y2:o,centerX:a,centerY:l}=t,c=Math.atan2(o-r,i-s),u=Cy(e.controlPoint,0),d={x:a+yi(n,u.x,!1),y:l+yi(n,u.y,!1)};return To(d,{x:a,y:l},c)}function pk(t,{x:e,y:n},{angle:s,adjust:r},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(s),dx(t,0,-r,i),t.restore())}function zV(t,e,n,s){const{x:r,y:i,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=Z4(e),p={x:r,y:i},m={x:o,y:a},x=lk(p,n,m,0),w=lk(p,n,m,1)-Qe,g=cx(p,n,m,d/s),y=cx(p,n,m,1-h/s),b=new Path2D;t.beginPath(),b.moveTo(g.x,g.y),b.quadraticCurveTo(n.x,n.y,y.x,y.y),t.shadowColor=l.borderShadowColor,t.stroke(b),e.path=b,e.ctx=t,pk(t,g,{angle:x,adjust:d},c),pk(t,y,{angle:w,adjust:h},u)}class Hu extends pn{inRange(e,n,s,r){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y")return BV({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),i,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],r),d=s==="y"?{start:l,end:u}:{start:a,end:c},h=To({x:e,y:n},this.getCenterPoint(r),Wt(-i));return h[s]>=d.start-o-Yi&&h[s]<=d.end+o+Yi}getCenterPoint(e){return Mo(this,e)}draw(e){const{width:n,height:s,centerX:r,centerY:i,options:o}=this;e.save(),N0(e,this.getCenterPoint(),o.rotation),vl(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=Tr(e,o);e.ellipse(r,i,s/2,n/2,Qe/2,0,2*Qe),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return X4(e,n)}}Hu.id="ellipseAnnotation";Hu.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},wl.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Hu.defaultRoutes={borderColor:"color",backgroundColor:"color"};Hu.descriptors={label:{_fallback:!0}};function BV(t,e,n,s){const{width:r,height:i,centerX:o,centerY:a}=e,l=r/2,c=i/2;if(l<=0||c<=0)return!1;const u=Wt(n||0),d=Math.cos(u),h=Math.sin(u),p=Math.pow(d*(t.x-o)+h*(t.y-a),2),m=Math.pow(h*(t.x-o)-d*(t.y-a),2);return p/Math.pow(l+s,2)+m/Math.pow(c+s,2)<=1.0001}class L0 extends pn{inRange(e,n,s,r){const{x:i,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return s!=="x"&&s!=="y"?OH({x:e,y:n},this.getCenterPoint(r),c/2,u):A4(s==="y"?{start:o,end:l,value:n}:{start:i,end:a,value:e},u)}getCenterPoint(e){return Mo(this,e)}draw(e){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,vl(e,n);const r=Tr(e,n);UH(e,this,this.centerX,this.centerY),r&&!A0(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=s}resolveElementProperties(e,n){const s=q4(e,n);return s.initProperties=yl(e,s,n),s}}L0.id="pointAnnotation";L0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};L0.defaultRoutes={borderColor:"color",backgroundColor:"color"};class j0 extends pn{inRange(e,n,s,r){if(s!=="x"&&s!=="y")return this.options.radius>=.1&&this.elements.length>1&&UV(this.elements,e,n,r);const i=To({x:e,y:n},this.getCenterPoint(r),Wt(-this.options.rotation)),o=this.elements.map(c=>s==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return i[s]>=a&&i[s]<=l}getCenterPoint(e){return Mo(this,e)}draw(e){const{elements:n,options:s}=this;e.save(),e.beginPath(),e.fillStyle=s.backgroundColor,vl(e,s);const r=Tr(e,s);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),r&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const s=q4(e,n),{sides:r,rotation:i}=n,o=[],a=2*Qe/r;let l=i*dy;for(let c=0;c<r;c++,l+=a){const u=$V(s,n,l);u.initProperties=yl(e,s,n),o.push(u)}return s.elements=o,s}}j0.id="polygonAnnotation";j0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};j0.defaultRoutes={borderColor:"color",backgroundColor:"color"};function $V({centerX:t,centerY:e},{radius:n,borderWidth:s,hitTolerance:r},i){const o=(s+r)/2,a=Math.sin(i),l=Math.cos(i),c={x:t+a*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:t+a*(n+o),bY:e-l*(n+o)}}}function UV(t,e,n,s){let r=!1,i=t[t.length-1].getProps(["bX","bY"],s);for(const o of t){const a=o.getProps(["bX","bY"],s);a.bY>n!=i.bY>n&&e<(i.bX-a.bX)*(n-a.bY)/(i.bY-a.bY)+a.bX&&(r=!r),i=a}return r}const pi={box:wl,doughnutLabel:D0,ellipse:Hu,label:Uu,line:Wu,point:L0,polygon:j0};Object.keys(pi).forEach(t=>{kt.describe(`elements.${pi[t].id}`,{_fallback:"plugins.annotation.common"})});const WV={update:Object.assign},HV=Py.concat(Tf),gk=(t,e)=>Fe(e)?fx(t,e):t,hx=t=>t==="color"||t==="font";function My(t="line"){return pi[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function VV(t,e,n,s){const r=GV(t,n.animations,s),i=e.annotations,o=XV(e.elements,i);for(let a=0;a<i.length;a++){const l=i[a],c=eP(o,a,l.type),u=l.setContext(qV(t,c,o,l)),d=c.resolveElementProperties(t,u);d.skip=YV(d),"elements"in d&&(KV(c,d.elements,u,r),delete d.elements),Kn(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=tP(u),r.update(c,d)}}function YV(t){return isNaN(t.x)||isNaN(t.y)}function GV(t,e,n){return n==="reset"||n==="none"||n==="resize"?WV:new wy(t,e)}function KV(t,e,n,s){const r=t.elements||(t.elements=[]);r.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],a=o.properties,l=eP(r,i,o.type,o.initProperties),c=n[o.optionScope].override(o);a.options=tP(c),s.update(l,a)}}function eP(t,e,n,s){const r=pi[My(n)];let i=t[e];return(!i||!(i instanceof r))&&(i=t[e]=new r,Object.assign(i,s)),i}function tP(t){const e=pi[My(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,fx(t,e.defaults),fx(t,e.defaultRoutes));for(const s of HV)n[s]=t[s];return n}function fx(t,e){const n={};for(const s of Object.keys(e)){const r=e[s],i=t[s];hx(s)&&xt(i)?n[s]=i.map(o=>gk(o,r)):n[s]=gk(i,r)}return n}function qV(t,e,n,s){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:s.id,type:"annotation"}))}function XV(t,e){const n=e.length,s=t.length;if(s<n){const r=n-s;t.splice(s,0,...new Array(r))}else s>n&&t.splice(n,s-n);return t}var QV="3.1.0";const Ur=new Map,mk=t=>t.type!=="doughnutLabel",JV=Py.concat(Tf);var ZV={id:"annotation",version:QV,beforeRegister(){DH("chart.js","4.0",so.version)},afterRegister(){so.register(pi)},afterUnregister(){so.unregister(pi)},beforeInit(t){Ur.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const s=Ur.get(t),r=s.annotations=[];let i=n.annotations;Fe(i)?Object.keys(i).forEach(o=>{const a=i[o];Fe(a)&&(a.id=o,r.push(a))}):xt(i)&&r.push(...i),gV(r.filter(mk),t.scales)},afterDataLimits(t,e){const n=Ur.get(t);pV(t,e.scale,n.annotations.filter(mk).filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(t,e,n){const s=Ur.get(t);cV(t,s,n),VV(t,s,n,e.mode),s.visibleElements=s.elements.filter(r=>!r.skip&&r.options.display),fV(t,s,n)},beforeDatasetsDraw(t,e,n){Xl(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){Xl(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){Xl(t,e.index,n.clip)},beforeDraw(t,e,n){Xl(t,"beforeDraw",n.clip)},afterDraw(t,e,n){Xl(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const s=Ur.get(t);uV(s,e.event,n)&&(e.changed=!0)},afterDestroy(t){Ur.delete(t)},getAnnotations(t){const e=Ur.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return ky(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!JV.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${pi[My(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:hx,_fallback:!0},_indexable:hx}},additionalOptionScopes:[""]};function Xl(t,e,n){const{ctx:s,chartArea:r}=t,i=Ur.get(t);n&&E0(s,r);const o=eY(i.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)tY(s,r,i,a);n&&P0(s)}function eY(t,e){const n=[];for(const s of t)if(s.options.drawTime===e&&n.push({element:s,main:!0}),s.elements&&s.elements.length)for(const r of s.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function tY(t,e,n,s){const r=s.element;s.main?(nk(n,r,"beforeDraw"),r.draw(t,e),nk(n,r,"afterDraw")):r.draw(t,e)}so.register(ix,ox,wh,fc,oH,pH,rH,ZV);const nY=({minPrice:t,maxPrice:e,orders:n,pendingOrders:s=[],onAddOrder:r,onRemoveOrder:i,currentPrice:o,markPrice:a})=>{const l=k.useRef(null),[c,u]=k.useState(null),d=k.useMemo(()=>{const m=[...n,...s];return m.length>0?Math.max(...m.map(x=>x.amount),.1):.1},[n,s]),h=k.useMemo(()=>{const m=n.map(w=>({x:w.amount,y:w.price,id:w.id,side:w.side,isPending:!1})),x=s.map(w=>({x:w.amount,y:w.price,id:w.id,side:w.side,isPending:!0}));return{datasets:[{label:"Long Orders",data:m.filter(w=>{const g=n.find(y=>y.id===w.id);return(g==null?void 0:g.side)==="long"||(g==null?void 0:g.side)==="buy"||!(g!=null&&g.side)}),backgroundColor:"rgba(77, 171, 247, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Short Orders",data:m.filter(w=>{const g=n.find(y=>y.id===w.id);return(g==null?void 0:g.side)==="short"||(g==null?void 0:g.side)==="sell"}),backgroundColor:"rgba(255, 152, 0, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Pending Long",data:x.filter(w=>{const g=s.find(y=>y.id===w.id);return(g==null?void 0:g.side)==="long"||(g==null?void 0:g.side)==="buy"}),backgroundColor:"rgba(40, 167, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10},{label:"Pending Short",data:x.filter(w=>{const g=s.find(y=>y.id===w.id);return(g==null?void 0:g.side)==="short"||(g==null?void 0:g.side)==="sell"}),backgroundColor:"rgba(220, 53, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10}]}},[n,s]),p=k.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,backgroundColor:"#1a1a1a",plugins:{legend:{display:!0,position:"top",labels:{color:"#fff",font:{size:12}}},tooltip:{enabled:!0,callbacks:{label:m=>{const x=m.raw,w=[...n,...s].find(g=>g.id===x.id);return w?[`Price: ${w.price.toFixed(2)} USDC`,`Amount: ${w.amount.toFixed(4)} BTC`,w.isPending?`Pending ${w.side==="long"||w.side==="buy"?"Long":"Short"}`:""].filter(Boolean):`Price: ${x.y.toFixed(2)}, Amount: ${x.x.toFixed(4)}`}}},annotation:{annotations:{...o!==null&&o>=t&&o<=e?{currentPriceLine:{type:"line",xMin:0,xMax:d,yMin:o,yMax:o,borderColor:"#00ff00",borderWidth:2,borderDash:[5,5],label:{display:!0,content:`Current: ${o.toLocaleString()}`,position:"end",backgroundColor:"rgba(0, 255, 0, 0.8)",color:"#000",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y"}}:{},...a!==null&&a>=t&&a<=e?{markPriceLine:{type:"line",xMin:0,xMax:d,yMin:a,yMax:a,borderColor:"#ff0000",borderWidth:2,label:{display:!0,content:`Mark Price: ${a.toLocaleString()}`,position:"start",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y",arrowHeads:{start:{enabled:!1,fill:!1,length:0,width:0},end:{enabled:!0,fill:!0,length:15,width:10,backgroundColor:"#ff0000",borderColor:"#ff0000",borderWidth:2}}}}:{}}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Amount (BTC)",color:"#fff",font:{size:14,weight:"bold"}},min:0,max:d,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(m){return Number(m).toFixed(4)}},grid:{color:"#333"}},y:{type:"linear",title:{display:!0,text:"Price (USDC)",color:"#fff",font:{size:14,weight:"bold"}},min:t,max:e,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(m){return Number(m).toLocaleString()}},grid:{color:"#333"}}},onClick:(m,x)=>{if(!l.current)return;const w=l.current,g=w.canvas;if(!g)return;const y=g.getBoundingClientRect(),b=m.native;if(!b)return;const v=b.clientX-y.left,S=b.clientY-y.top,_=w.scales.x,E=w.scales.y,T=_.getValueForPixel(v),P=E.getValueForPixel(S);if(T==null||P===null||P===void 0)return;const R=[...n,...s].find(A=>{const $=_.getPixelForValue(A.amount),H=E.getPixelForValue(A.price);return Math.sqrt(Math.pow(v-$,2)+Math.pow(S-H,2))<=12});if(R)i(R.id);else{const A=Math.max(t,Math.min(e,P)),$=Math.max(.001,Math.min(1,T));r(A,$)}},onHover:(m,x)=>{if(!l.current)return;const w=l.current,g=w.canvas;if(!g)return;const y=g.getBoundingClientRect(),b=m.native;if(!b)return;const v=b.clientX-y.left,S=b.clientY-y.top,_=[...n,...s],E=w.scales.x,T=w.scales.y,P=_.find(C=>{const R=E.getPixelForValue(C.amount),A=T.getPixelForValue(C.price);return Math.sqrt(Math.pow(v-R,2)+Math.pow(S-A,2))<=10});u((P==null?void 0:P.id)||null)}}),[t,e,d,n,s,r,i,o,a]);return f.jsx("div",{className:"price-amount-chart-container",style:{height:"600px",position:"relative"},children:f.jsx("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #333",padding:"10px",height:"100%"},children:f.jsx(TH,{ref:l,data:h,options:p,style:{cursor:c?"pointer":"crosshair"}})})})},sY=({isOpen:t,onClose:e,minPrice:n,maxPrice:s,onMinPriceChange:r,onMaxPriceChange:i,markPrice:o,hasManualPriceChange:a,onResetToAuto:l,orderMode:c,onOrderModeChange:u,curveIntensity:d,onCurveIntensityChange:h,roundingStep:p,onRoundingStepChange:m})=>{const x=v=>Math.round(v/1.5/p)*p,w=v=>Math.round(v*1.5/p)*p;if(!t)return null;const g=o!=null&&o.mark_price?parseFloat(o.mark_price):null,y=g?x(g):null,b=g?w(g):null;return typeof document<"u"?wo.createPortal(f.jsx("div",{className:"modal-overlay",onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:f.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:0,minWidth:"400px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[f.jsx("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:f.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:600,color:"rgba(255, 255, 255, 0.9)"},children:"Price Range Configuration"})}),f.jsx("div",{className:"modal-body",style:{padding:"2rem 1.5rem"},children:f.jsxs("div",{className:"trading-test-price-range-controls",children:[f.jsxs("div",{children:[f.jsxs("label",{children:["Rounding Step ($):",f.jsx("input",{type:"number",value:p,onChange:v=>m(Math.max(1,parseFloat(v.target.value)||100)),min:1,step:10,className:"trading-test-input"})]}),f.jsxs("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:["Prices will be rounded to the nearest $",p]})]}),f.jsxs("div",{children:[f.jsxs("label",{children:["Min Price (USDC):",f.jsx("input",{type:"number",value:n,onChange:v=>{r(parseFloat(v.target.value)||1e4)},min:1e3,max:s-1e3,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price / 1.5, rounded to $${p})`:""})]}),(o==null?void 0:o.mark_price)&&y!==null&&f.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?f.jsxs(f.Fragment,{children:["Manual override (Auto:"," ",g.toLocaleString()," / 1.5 ="," ",y.toLocaleString(),")"]}):f.jsxs(f.Fragment,{children:["Auto: ",g.toLocaleString()," / 1.5 ="," ",n.toLocaleString()]})})]}),f.jsxs("div",{children:[f.jsxs("label",{children:["Max Price (USDC):",f.jsx("input",{type:"number",value:s,onChange:v=>{i(parseFloat(v.target.value)||1e5)},min:n+1e3,max:1e6,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price  1.5, rounded to $${p})`:""})]}),(o==null?void 0:o.mark_price)&&b!==null&&f.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?f.jsxs(f.Fragment,{children:["Manual override (Auto:"," ",g.toLocaleString(),"  1.5 ="," ",b.toLocaleString(),")"]}):f.jsxs(f.Fragment,{children:["Auto: ",g.toLocaleString(),"  1.5 ="," ",s.toLocaleString()]})})]}),f.jsx("div",{children:f.jsxs("label",{children:["Order Mode:",f.jsxs("select",{value:c,onChange:v=>u(v.target.value),className:"trading-test-select",children:[f.jsx("option",{value:"random",children:"Random"}),f.jsx("option",{value:"curve",children:"Curve (Buy more at lower prices)"})]})]})}),c==="curve"&&f.jsx("div",{children:f.jsxs("label",{children:["Curve Intensity: ",d,f.jsx("input",{type:"range",value:d,onChange:v=>h(parseFloat(v.target.value)),min:1,max:5,step:.5,className:"trading-test-range"}),f.jsx("small",{children:"Higher = more aggressive buying at lower prices"})]})})]})}),f.jsxs("div",{className:"modal-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[a&&(o==null?void 0:o.mark_price)&&f.jsx("button",{onClick:l,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(77, 171, 247, 0.2)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Reset to Auto"}),f.jsx("div",{style:{display:"flex",gap:"1rem",marginLeft:"auto"},children:f.jsx("button",{onClick:e,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Close"})})]})]})}),document.body):null},rY=({onClick:t,disabled:e,orderMode:n})=>f.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-primary",style:{backgroundColor:e?"#ccc":"#007bff",cursor:e?"not-allowed":"pointer"},children:["Submit Test Orders (",n==="random"?"Random":"Curve-Based",")"]}),iY=({onClick:t,disabled:e,orderCount:n})=>f.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-success",style:{backgroundColor:e?"#ccc":"#28a745",cursor:e?"not-allowed":"pointer"},children:["Submit Chart Orders (",n," orders)"]}),oY=({onClick:t,disabled:e})=>f.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-secondary",style:{cursor:e?"not-allowed":"pointer"},children:"Reset Chart"}),aY=({onClick:t,disabled:e,pendingCount:n})=>f.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-info",style:{backgroundColor:e?"#ccc":"#17a2b8",cursor:e?"not-allowed":"pointer"},children:["Load Pending Orders ",n>0&&`(${n})`]}),Sg=({onClick:t,disabled:e,filter:n})=>{const s=n==="long"?"Cancel All Long":n==="short"?"Cancel All Short":"Cancel All Orders";return f.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-danger",style:{backgroundColor:e?"#ccc":"#dc3545",cursor:e?"not-allowed":"pointer"},children:s})};function lY(){var ve,ye,W,le;const[t,e]=k.useState(Ru),[n,s]=k.useState(""),[r,i]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(1e4),[u,d]=k.useState(1e5),[h,p]=k.useState(null),[m,x]=k.useState("random"),[w,g]=k.useState(2),[y,b]=k.useState("long"),[v,S]=k.useState([]),[_,E]=k.useState([]),[T,P]=k.useState([]),[C,R]=k.useState(!1),[A,$]=k.useState(!1),[H,F]=k.useState(100),N=k.useRef(null),z=k.useRef(null),L=k.useRef(t),{markets:B,getSymbolByMarketId:M}=_o({baseURL:t,sessionToken:"",autoFetchMarkets:!0}),{mnemonic:G,walletAddress:j,authToken:I,setMnemonic:U}=ml(),q=n?M(n):null,X=q!==null?q:void 0,{markPrice:K}=r0({baseURL:t,wsURL:i0,marketId:n||"",symbol:X}),[ee,se]=k.useState(!1);k.useEffect(()=>{if(K!=null&&K.mark_price&&!ee){const O=parseFloat(K.mark_price),ne=Math.round(O*1.5/H)*H,re=Math.round(O/1.5/H)*H;c(re),d(ne)}},[K==null?void 0:K.mark_price,ee,H]),k.useEffect(()=>{G&&i(G),I&&a(I)},[G,I]);const ge=B.length>0?(((ve=B.find(O=>O.active))==null?void 0:ve.market_id)??B[0].market_id)||(((W=(ye=B.find(O=>O.active))==null?void 0:ye.id)==null?void 0:W.toString())??((le=B[0].id)==null?void 0:le.toString())??""):null;k.useEffect(()=>{ge&&!n&&s(ge)},[ge]),k.useEffect(()=>{L.current=t},[t]),k.useEffect(()=>{r&&r.trim()!==""&&(N.current=new Mu({baseURL:L.current,mnemonic:r}),N.current.initialize().catch(O=>{console.error("Failed to initialize ExchangeClient:",O)}))},[r,t]),k.useEffect(()=>{z.current=new vn({baseURL:L.current})},[t]),k.useEffect(()=>{if(!n||!z.current)return;const O=async()=>{try{const re=await z.current.getTicker(n);if(re!=null&&re.lastPrice){const Y=typeof re.lastPrice=="string"?parseFloat(re.lastPrice):re.lastPrice;p(Y)}}catch(re){console.error("Failed to fetch current price:",re)}};O();const ne=setInterval(O,5e3);return()=>clearInterval(ne)},[n]);const Ue=k.useCallback(O=>{const ne=[];for(let re=0;re<O;re++){const Y=l+Math.random()*(u-l),he=.001+Math.random()*.01;ne.push({price:Y,amount:he})}return ne.sort((re,Y)=>re.price-Y.price)},[l,u]),Pe=k.useCallback(O=>{const ne=[],re=u-l;for(let Y=0;Y<O;Y++){const he=Math.random(),Me=Math.pow(he,w),we=l+Me*re,We=.001+(u-we)/re*.02;ne.push({price:we,amount:We})}return ne.sort((Y,he)=>Y.price-he.price)},[l,u,w]),ke=k.useCallback(async()=>{if(!N.current||!n||!j){Ie.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}R(!0);const O=[];try{const re=m==="random"?Ue(10):Pe(10);Ie.info("Submitting test orders",{description:`Submitting ${re.length} ${m} orders...`});for(const he of re){try{const we=bt("1"),Ee=await N.current.placeOrder({marketId:n,side:y==="long"?"buy":"sell",orderType:"LIMIT",price:he.price,quantity:he.amount,timeInForce:"GTC",leverage:we});O.push({success:!0,order:{price:he.price,amount:he.amount,orderId:(Ee==null?void 0:Ee.orderId)||(Ee==null?void 0:Ee.id)},timestamp:Date.now()})}catch(Me){O.push({success:!1,order:{price:he.price,amount:he.amount},error:Me.message,timestamp:Date.now()})}await new Promise(Me=>setTimeout(Me,200))}P(he=>[...he,...O]);const Y=O.filter(he=>he.success).length;Ie.success("Test orders submitted",{description:`${Y}/${O.length} orders placed successfully.`})}catch(ne){Ie.error("Test submission failed",{description:ne.message||"Unknown error occurred"})}finally{R(!1)}},[n,j,m,Ue,Pe]),Te=k.useCallback(async()=>{if(!N.current||!n||!j){Ie.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}if(v.length===0){Ie.warning("No chart orders",{description:"Please add orders to the chart first."});return}R(!0);const O=[];try{Ie.info("Submitting chart orders",{description:`Submitting ${v.length} chart orders...`});for(const re of v){try{const he=bt("1"),Me=await N.current.placeOrder({marketId:n,side:re.side==="short"||re.side==="sell"?"sell":"buy",orderType:"LIMIT",price:re.price,quantity:re.amount,timeInForce:"GTC",leverage:he});O.push({success:!0,order:{price:re.price,amount:re.amount,orderId:(Me==null?void 0:Me.orderId)||(Me==null?void 0:Me.id)},timestamp:Date.now()})}catch(Y){O.push({success:!1,order:{price:re.price,amount:re.amount},error:Y.message,timestamp:Date.now()})}await new Promise(Y=>setTimeout(Y,200))}P(re=>[...re,...O]);const ne=O.filter(re=>re.success).length;Ie.success("Chart orders submitted",{description:`${ne}/${O.length} orders placed successfully.`})}catch(ne){Ie.error("Chart order submission failed",{description:ne.message||"Unknown error occurred"})}finally{R(!1)}},[n,j,v]),ft=k.useCallback(()=>{S([]),Ie.info("Chart reset",{description:"All chart orders have been cleared."})},[]),D=k.useCallback((O,ne)=>{const re={price:O,amount:ne,id:`chart-${Date.now()}-${Math.random()}`,side:y};S(Y=>[...Y,re])},[y]),Q=k.useCallback(O=>{S(ne=>ne.filter(re=>re.id!==O)),E(ne=>ne.filter(re=>re.id!==O))},[]),oe=k.useCallback(async()=>{if(!z.current||!j||!n){Ie.error("Setup required",{description:"Please ensure wallet address and market ID are configured."});return}try{Ie.info("Loading pending orders...");const O=await z.current.getOrders(j),ne=(O==null?void 0:O.orders)||[];console.log(O);const re=ne.filter(Y=>{const he=Y.marketId||Y.market_id||Y.assetPair,Me=(Y.status||"").toUpperCase();return he===n&&["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(Me)}).map(Y=>{const he=Y.side||(Y.direction==="LONG"?"long":Y.direction==="SHORT"?"short":"buy");return{price:Y.price,amount:Y.quantity,id:`pending-${Y.id||Y.orderId||Y.order_id}`,side:he==="buy"?"long":he==="sell"?"short":he,orderId:Y.id||Y.orderId||Y.order_id,isPending:!0}});E(re),Ie.success("Pending orders loaded",{description:`Loaded ${re.length} pending orders.`})}catch(O){Ie.error("Failed to load pending orders",{description:O.message||"Unknown error occurred"})}},[j,n]),de=k.useCallback(async O=>{if(!N.current||!n||!j){Ie.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}try{const ne=await z.current.getOrders(j),Y=((ne==null?void 0:ne.orders)||[]).filter(we=>{const Ee=we.marketId||we.market_id||we.assetPair,We=(we.status||"").toUpperCase();if(Ee!==n||!["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(We))return!1;if(O==="all")return!0;const lt=we.side||(we.direction==="LONG"?"long":we.direction==="SHORT"?"short":"buy");return O==="long"?lt==="buy"||lt==="long":O==="short"?lt==="sell"||lt==="short":!1});if(Y.length===0){Ie.info("No orders to cancel",{description:`No ${O} pending orders found.`});return}R(!0),Ie.info("Canceling orders",{description:`Canceling ${Y.length} ${O} orders...`});let he=0,Me=0;for(const we of Y){try{const Ee=we.id||we.orderId||we.order_id;await N.current.cancelOrder({orderId:Ee,marketId:n}),he++}catch(Ee){Me++,console.error("Failed to cancel order:",Ee)}await new Promise(Ee=>setTimeout(Ee,100))}await oe(),Ie.success("Orders canceled",{description:`${he} orders canceled successfully${Me>0?`, ${Me} failed`:""}.`})}catch(ne){Ie.error("Failed to cancel orders",{description:ne.message||"Unknown error occurred"})}finally{R(!1)}},[n,j,oe]);return f.jsxs("div",{className:"App-content-row",children:[f.jsx("h1",{children:"Trading Test Page"}),f.jsx("p",{children:"Advanced trading test with price range, interactive chart, and multiple submission modes"}),f.jsxs("div",{className:"App-section",children:[f.jsx("h2",{children:"Configuration"}),f.jsxs("div",{className:"trading-test-config-grid",children:[f.jsx("div",{children:f.jsxs("label",{children:["HTTP Base URL:",f.jsx("input",{type:"text",value:t,onChange:O=>e(O.target.value),className:"trading-test-input"})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Market:",f.jsx("select",{value:n||"",onChange:O=>s(O.target.value),className:"trading-test-select",children:B.length===0?f.jsx("option",{value:"",children:"Loading markets..."}):f.jsxs(f.Fragment,{children:[f.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),B.map(O=>{var Y;const ne=O.market_id??((Y=O.id)==null?void 0:Y.toString())??"",re=O.moniker?O.moniker:O.symbol?O.symbol:`Market ID: ${ne}`;return f.jsx("option",{value:ne,children:re},ne)})]})})]})}),f.jsx("div",{children:f.jsxs("label",{children:["Mnemonic:",f.jsx("input",{type:"text",value:r,onChange:O=>{i(O.target.value),U(O.target.value)},placeholder:"Enter mnemonic",className:"trading-test-input"})]})}),h&&f.jsxs("div",{className:"trading-test-price-display",children:[f.jsx("strong",{children:"Current Price:"})," ",h.toLocaleString()," ","USDC"]})]})]}),f.jsxs("div",{className:"trading-test-tabs",children:[f.jsx("button",{className:`trading-test-tab ${y==="long"?"active":""}`,onClick:()=>b("long"),children:"Long (Buy)"}),f.jsx("button",{className:`trading-test-tab ${y==="short"?"active":""}`,onClick:()=>b("short"),children:"Short (Sell)"})]}),f.jsxs("div",{className:"App-section",children:[f.jsx("h2",{children:"Interactive Price-Amount Chart"}),f.jsx("div",{className:"trading-test-chart-controls",children:f.jsxs("div",{className:"trading-test-chart-info",children:[f.jsxs("span",{children:["Orders on chart: ",v.length]}),f.jsxs("span",{onClick:()=>$(!0),style:{cursor:"pointer",textDecoration:"underline"},title:"Click to configure price range",children:["Price range: ",l.toLocaleString()," -"," ",u.toLocaleString()," USDC"]})]})}),f.jsx(nY,{minPrice:l,maxPrice:u,orders:v,pendingOrders:_,onAddOrder:D,onRemoveOrder:Q,currentPrice:h,markPrice:K!=null&&K.mark_price?parseFloat(K.mark_price):null}),f.jsxs("div",{className:"price-amount-chart-instructions",children:[f.jsx("p",{children:"Click on the chart to add orders. Click on existing orders to remove them."}),f.jsx("p",{children:"Y-axis: Price (USDC) | X-axis: Amount (BTC)"})]})]}),f.jsxs("div",{className:"App-section",children:[f.jsx("h2",{children:"Order Submission"}),f.jsxs("div",{className:"trading-test-submission-buttons",children:[f.jsx(oY,{onClick:ft,disabled:v.length===0}),f.jsx(rY,{onClick:ke,disabled:C||!n||!j,orderMode:m}),f.jsx(iY,{onClick:Te,disabled:C||v.length===0||!n||!j,orderCount:v.length})]}),f.jsx("h2",{children:"Pending Orders Management"}),f.jsxs("div",{className:"trading-test-pending-orders-controls",children:[f.jsx(aY,{onClick:oe,disabled:!n||!j,pendingCount:_.length}),f.jsxs("div",{className:"trading-test-cancel-buttons",children:[f.jsx(Sg,{onClick:()=>de("long"),disabled:C||!n||!j,filter:"long"}),f.jsx(Sg,{onClick:()=>de("short"),disabled:C||!n||!j,filter:"short"}),f.jsx(Sg,{onClick:()=>de("all"),disabled:C||!n||!j,filter:"all"})]})]})]}),T.length>0&&f.jsxs("div",{className:"trading-test-results",children:[f.jsx("h2",{children:"Test Results"}),f.jsxs("div",{className:"trading-test-results-summary",children:[f.jsxs("div",{children:["Total: ",T.length," | Success:"," ",T.filter(O=>O.success).length," | Failed:"," ",T.filter(O=>!O.success).length]}),f.jsx("button",{onClick:()=>P([]),className:"trading-test-button-secondary",children:"Clear Results"})]}),f.jsx("div",{className:"trading-test-results-list",children:T.slice(-20).map((O,ne)=>f.jsx("div",{className:`trading-test-result-item ${O.success?"success":"error"}`,children:f.jsxs("div",{children:[f.jsxs("strong",{children:[O.success?"":""," Order @"," ",O.order.price.toFixed(2)," USDC"]}),f.jsxs("span",{children:["Amount: ",O.order.amount.toFixed(4)," BTC"]}),O.order.orderId&&f.jsxs("span",{children:["Order ID: ",O.order.orderId.substring(0,16),"..."]}),O.error&&f.jsx("span",{className:"error-text",children:O.error})]})},ne))})]}),f.jsx(sY,{isOpen:A,onClose:()=>$(!1),minPrice:l,maxPrice:u,onMinPriceChange:O=>{c(O),se(!0)},onMaxPriceChange:O=>{d(O),se(!0)},markPrice:K,hasManualPriceChange:ee,onResetToAuto:()=>{if(K!=null&&K.mark_price){se(!1);const O=parseFloat(K.mark_price),ne=Math.round(O*1.5/H)*H,re=Math.round(O/1.5/H)*H;c(re),d(ne)}},orderMode:m,onOrderModeChange:x,curveIntensity:w,onCurveIntensityChange:g,roundingStep:H,onRoundingStepChange:F})]})}const cY=k.createContext(void 0),Ql="onboard_mnemonic",Jl="onboard_wallet_address",uY=({children:t})=>{const[e,n]=k.useState(null),[s,r]=k.useState(null);k.useEffect(()=>{const l=localStorage.getItem(Jl),c=localStorage.getItem(Ql),u=localStorage.getItem("generatedAddress"),d=localStorage.getItem("mnemonic");l&&c?(n(l),r(c)):u&&d&&(n(u),r(d),localStorage.setItem(Jl,u),localStorage.setItem(Ql,d),localStorage.removeItem("generatedAddress"),localStorage.removeItem("mnemonic"))},[]),k.useEffect(()=>{const l=c=>{c.key===Jl?n(c.newValue):c.key===Ql&&r(c.newValue)};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const i=k.useCallback((l,c)=>{n(l),r(c),localStorage.setItem(Jl,l),localStorage.setItem(Ql,c)},[]),o=k.useCallback(()=>{n(null),r(null),localStorage.removeItem(Jl),localStorage.removeItem(Ql)},[]),a=k.useMemo(()=>({generatedAddress:e,mnemonic:s,setGeneratedData:i,clearGeneratedData:o}),[e,s,i,o]);return f.jsx(cY.Provider,{value:a,children:t})},dY=({...t})=>f.jsx(UR,{className:"toaster",expand:!0,richColors:!1,closeButton:!1,toastOptions:{duration:4e3,classNames:{toast:"toast",title:"toast-title",description:"toast-description",actionButton:"toast-action-button",cancelButton:"toast-cancel-button",closeButton:"toast-close-button"}},...t});function hY(){const{wasmStatus:t,isReady:e}=b7(),[n,s]=k.useState("main");return k.useEffect(()=>{const r=()=>{s("websocket-test")};return window.addEventListener("navigateToWebSocketTest",r),()=>{window.removeEventListener("navigateToWebSocketTest",r)}},[]),f.jsxs(uY,{children:[f.jsxs("div",{className:"App",children:[f.jsxs("header",{className:"App-header",children:[f.jsx("h1",{children:"Morm SDK"}),f.jsx("p",{children:"Test WebAssembly integration for morm_signer with Agent Delegation"}),f.jsxs("nav",{style:{marginTop:"1rem",display:"flex",gap:"1rem"},children:[f.jsx("button",{onClick:()=>s("main"),style:{padding:"0.5rem 1rem",backgroundColor:n==="main"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Morm Signer"}),f.jsx("button",{onClick:()=>s("sdk-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="sdk-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"SDK Trade API"}),f.jsx("button",{onClick:()=>s("websocket-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="websocket-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"WebSocket Test"}),f.jsx("button",{onClick:()=>s("hooks-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="hooks-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Hooks Test"}),f.jsx("button",{onClick:()=>s("layout-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="layout-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Layout Test"}),f.jsx("button",{onClick:()=>s("trading-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="trading-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Trading Test"})]})]}),f.jsx("main",{className:"App-main",children:n==="sdk-test"?f.jsx(sA,{}):n==="websocket-test"?f.jsx(yO,{}):n==="layout-test"?f.jsx(hL,{}):n==="hooks-test"?f.jsx(CB,{}):n==="trading-test"?f.jsx(lY,{}):f.jsxs(f.Fragment,{children:[f.jsx(GR,{status:t}),e&&f.jsxs("div",{className:"App-content",children:[f.jsx("div",{className:"App-section",children:f.jsx(WR,{})}),f.jsx("div",{className:"App-section",children:f.jsx(HR,{})}),f.jsx("div",{className:"App-section",children:f.jsx(VR,{})}),f.jsx("div",{className:"App-section",children:f.jsx(YR,{})})]}),t.error&&f.jsxs("div",{className:"App-error",children:[f.jsx("h3",{children:"Error Loading WASM"}),f.jsx("p",{children:t.error}),f.jsx("p",{children:"Make sure the morm_signer.wasm file is available in the public directory."})]})]})})]}),f.jsx(dY,{position:"bottom-right",toastOptions:{duration:4e3,style:{color:"var(--foreground)",border:"1px solid var(--border)"}}})]})}const fY=kg.createRoot(document.getElementById("root"));fY.render(f.jsx(ae.StrictMode,{children:f.jsx(hY,{})}));
//# sourceMappingURL=index-BpRFFJny.js.map
