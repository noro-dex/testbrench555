var E3=Object.defineProperty;var ub=t=>{throw TypeError(t)};var P3=(t,e,n)=>e in t?E3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>P3(t,typeof e!="symbol"?e+"":e,n),zf=(t,e,n)=>e.has(t)||ub("Cannot "+n);var ke=(t,e,n)=>(zf(t,e,"read from private field"),n?n.call(t):e.get(t)),Be=(t,e,n)=>e.has(t)?ub("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,s)=>(zf(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),rn=(t,e,n)=>(zf(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function kS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function T3(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var CS={exports:{}},Nh={},_S={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc=Symbol.for("react.element"),I3=Symbol.for("react.portal"),M3=Symbol.for("react.fragment"),R3=Symbol.for("react.strict_mode"),O3=Symbol.for("react.profiler"),A3=Symbol.for("react.provider"),D3=Symbol.for("react.context"),N3=Symbol.for("react.forward_ref"),L3=Symbol.for("react.suspense"),j3=Symbol.for("react.memo"),F3=Symbol.for("react.lazy"),db=Symbol.iterator;function z3(t){return t===null||typeof t!="object"?null:(t=db&&t[db]||t["@@iterator"],typeof t=="function"?t:null)}var ES={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PS=Object.assign,TS={};function Ua(t,e,n){this.props=t,this.context=e,this.refs=TS,this.updater=n||ES}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function IS(){}IS.prototype=Ua.prototype;function tm(t,e,n){this.props=t,this.context=e,this.refs=TS,this.updater=n||ES}var nm=tm.prototype=new IS;nm.constructor=tm;PS(nm,Ua.prototype);nm.isPureReactComponent=!0;var hb=Array.isArray,MS=Object.prototype.hasOwnProperty,sm={current:null},RS={key:!0,ref:!0,__self:!0,__source:!0};function OS(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)MS.call(e,s)&&!RS.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Wc,type:t,key:i,ref:o,props:r,_owner:sm.current}}function B3(t,e){return{$$typeof:Wc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wc}function $3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fb=/\/+/g;function Bf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$3(""+t.key):e.toString(36)}function hd(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wc:case I3:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+Bf(o,0):s,hb(r)?(n="",t!=null&&(n=t.replace(fb,"$&/")+"/"),hd(r,e,n,"",function(c){return c})):r!=null&&(rm(r)&&(r=B3(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(fb,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",hb(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+Bf(i,a);o+=hd(i,e,n,l,r)}else if(l=z3(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+Bf(i,a++),o+=hd(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mu(t,e,n){if(t==null)return t;var s=[],r=0;return hd(t,s,"","",function(i){return e.call(n,i,r++)}),s}function U3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sn={current:null},fd={transition:null},W3={ReactCurrentDispatcher:Sn,ReactCurrentBatchConfig:fd,ReactCurrentOwner:sm};function AS(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:mu,forEach:function(t,e,n){mu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mu(t,function(){e++}),e},toArray:function(t){return mu(t,function(e){return e})||[]},only:function(t){if(!rm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=Ua;$e.Fragment=M3;$e.Profiler=O3;$e.PureComponent=tm;$e.StrictMode=R3;$e.Suspense=L3;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W3;$e.act=AS;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=PS({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=sm.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)MS.call(e,l)&&!RS.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:Wc,type:t.type,key:r,ref:i,props:s,_owner:o}};$e.createContext=function(t){return t={$$typeof:D3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:A3,_context:t},t.Consumer=t};$e.createElement=OS;$e.createFactory=function(t){var e=OS.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:N3,render:t}};$e.isValidElement=rm;$e.lazy=function(t){return{$$typeof:F3,_payload:{_status:-1,_result:t},_init:U3}};$e.memo=function(t,e){return{$$typeof:j3,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=fd.transition;fd.transition={};try{t()}finally{fd.transition=e}};$e.unstable_act=AS;$e.useCallback=function(t,e){return Sn.current.useCallback(t,e)};$e.useContext=function(t){return Sn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return Sn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return Sn.current.useEffect(t,e)};$e.useId=function(){return Sn.current.useId()};$e.useImperativeHandle=function(t,e,n){return Sn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return Sn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return Sn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return Sn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return Sn.current.useReducer(t,e,n)};$e.useRef=function(t){return Sn.current.useRef(t)};$e.useState=function(t){return Sn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return Sn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return Sn.current.useTransition()};$e.version="18.3.1";_S.exports=$e;var S=_S.exports;const ie=kS(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H3=S,V3=Symbol.for("react.element"),Y3=Symbol.for("react.fragment"),G3=Object.prototype.hasOwnProperty,K3=H3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q3={key:!0,ref:!0,__self:!0,__source:!0};function DS(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)G3.call(e,s)&&!q3.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:V3,type:t,key:i,ref:o,props:r,_owner:K3.current}}Nh.Fragment=Y3;Nh.jsx=DS;Nh.jsxs=DS;CS.exports=Nh;var h=CS.exports,vp={},NS={exports:{}},Gn={},LS={exports:{}},jS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,z){var I=L.length;L.push(z);e:for(;0<I;){var K=I-1>>>1,j=L[K];if(0<r(j,z))L[K]=z,L[I]=j,I=K;else break e}}function n(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var z=L[0],I=L.pop();if(I!==z){L[0]=I;e:for(var K=0,j=L.length,M=j>>>1;K<M;){var $=2*(K+1)-1,q=L[$],X=$+1,G=L[X];if(0>r(q,I))X<j&&0>r(G,q)?(L[K]=G,L[X]=I,K=X):(L[K]=q,L[$]=I,K=$);else if(X<j&&0>r(G,I))L[K]=G,L[X]=I,K=X;else break e}}return z}function r(L,z){var I=L.sortIndex-z.sortIndex;return I!==0?I:L.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,g=!1,m=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(L){for(var z=n(c);z!==null;){if(z.callback===null)s(c);else if(z.startTime<=L)s(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function v(L){if(b=!1,x(L),!m)if(n(l)!==null)m=!0,R(k);else{var z=n(c);z!==null&&F(v,z.startTime-L)}}function k(L,z){m=!1,b&&(b=!1,p(T),T=-1),g=!0;var I=f;try{for(x(z),d=n(l);d!==null&&(!(d.expirationTime>z)||L&&!D());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var j=K(d.expirationTime<=z);z=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&s(l),x(z)}else s(l);d=n(l)}if(d!==null)var M=!0;else{var $=n(c);$!==null&&F(v,$.startTime-z),M=!1}return M}finally{d=null,f=I,g=!1}}var C=!1,E=null,T=-1,P=5,_=-1;function D(){return!(t.unstable_now()-_<P)}function A(){if(E!==null){var L=t.unstable_now();_=L;var z=!0;try{z=E(!0,L)}finally{z?W():(C=!1,E=null)}}else C=!1}var W;if(typeof y=="function")W=function(){y(A)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,O=H.port2;H.port1.onmessage=A,W=function(){O.postMessage(null)}}else W=function(){w(A,0)};function R(L){E=L,C||(C=!0,W())}function F(L,z){T=w(function(){L(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,R(k))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var I=f;f=z;try{return L()}finally{f=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var I=f;f=L;try{return z()}finally{f=I}},t.unstable_scheduleCallback=function(L,z,I){var K=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?K+I:K):I=K,L){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=I+j,L={id:u++,callback:z,priorityLevel:L,startTime:I,expirationTime:j,sortIndex:-1},I>K?(L.sortIndex=I,e(c,L),n(l)===null&&L===n(c)&&(b?(p(T),T=-1):b=!0,F(v,I-K))):(L.sortIndex=j,e(l,L),m||g||(m=!0,R(k))),L},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(L){var z=f;return function(){var I=f;f=z;try{return L.apply(this,arguments)}finally{f=I}}}})(jS);LS.exports=jS;var X3=LS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q3=S,Vn=X3;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FS=new Set,cc={};function io(t,e){ya(t,e),ya(t+"Capture",e)}function ya(t,e){for(cc[t]=e,t=0;t<e.length;t++)FS.add(e[t])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wp=Object.prototype.hasOwnProperty,J3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pb={},gb={};function Z3(t){return wp.call(gb,t)?!0:wp.call(pb,t)?!1:J3.test(t)?gb[t]=!0:(pb[t]=!0,!1)}function eE(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tE(t,e,n,s){if(e===null||typeof e>"u"||eE(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kn(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var im=/[\-:]([a-z])/g;function om(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(im,om);nn[e]=new kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(im,om);nn[e]=new kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(im,om);nn[e]=new kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new kn(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function am(t,e,n,s){var r=nn.hasOwnProperty(e)?nn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tE(e,n,r,s)&&(n=null),s||r===null?Z3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var vr=Q3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xu=Symbol.for("react.element"),ko=Symbol.for("react.portal"),Co=Symbol.for("react.fragment"),lm=Symbol.for("react.strict_mode"),Sp=Symbol.for("react.profiler"),zS=Symbol.for("react.provider"),BS=Symbol.for("react.context"),cm=Symbol.for("react.forward_ref"),kp=Symbol.for("react.suspense"),Cp=Symbol.for("react.suspense_list"),um=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),$S=Symbol.for("react.offscreen"),mb=Symbol.iterator;function nl(t){return t===null||typeof t!="object"?null:(t=mb&&t[mb]||t["@@iterator"],typeof t=="function"?t:null)}var vt=Object.assign,$f;function Rl(t){if($f===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$f=e&&e[1]||""}return`
`+$f+t}var Uf=!1;function Wf(t,e){if(!t||Uf)return"";Uf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Uf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rl(t):""}function nE(t){switch(t.tag){case 5:return Rl(t.type);case 16:return Rl("Lazy");case 13:return Rl("Suspense");case 19:return Rl("SuspenseList");case 0:case 2:case 15:return t=Wf(t.type,!1),t;case 11:return t=Wf(t.type.render,!1),t;case 1:return t=Wf(t.type,!0),t;default:return""}}function _p(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Co:return"Fragment";case ko:return"Portal";case Sp:return"Profiler";case lm:return"StrictMode";case kp:return"Suspense";case Cp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BS:return(t.displayName||"Context")+".Consumer";case zS:return(t._context.displayName||"Context")+".Provider";case cm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case um:return e=t.displayName||null,e!==null?e:_p(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return _p(t(e))}catch{}}return null}function sE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _p(e);case 8:return e===lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function US(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rE(t){var e=US(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bu(t){t._valueTracker||(t._valueTracker=rE(t))}function WS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=US(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Fd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ep(t,e){var n=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xb(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function HS(t,e){e=e.checked,e!=null&&am(t,"checked",e,!1)}function Pp(t,e){HS(t,e);var n=oi(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tp(t,e.type,oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tp(t,e,n){(e!=="number"||Fd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ol=Array.isArray;function Bo(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+oi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Ip(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Ol(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:oi(n)}}function VS(t,e){var n=oi(e.value),s=oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function vb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yu,GS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yu=yu||document.createElement("div"),yu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iE=["Webkit","ms","Moz","O"];Object.keys(Hl).forEach(function(t){iE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hl[e]=Hl[t]})});function KS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hl.hasOwnProperty(t)&&Hl[t]?(""+e).trim():e+"px"}function qS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=KS(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var oE=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rp(t,e){if(e){if(oE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Op(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ap=null;function dm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dp=null,$o=null,Uo=null;function wb(t){if(t=Yc(t)){if(typeof Dp!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=Bh(e),Dp(t.stateNode,t.type,e))}}function XS(t){$o?Uo?Uo.push(t):Uo=[t]:$o=t}function QS(){if($o){var t=$o,e=Uo;if(Uo=$o=null,wb(t),e)for(t=0;t<e.length;t++)wb(e[t])}}function JS(t,e){return t(e)}function ZS(){}var Hf=!1;function e2(t,e,n){if(Hf)return t(e,n);Hf=!0;try{return JS(t,e,n)}finally{Hf=!1,($o!==null||Uo!==null)&&(ZS(),QS())}}function dc(t,e){var n=t.stateNode;if(n===null)return null;var s=Bh(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var Np=!1;if(gr)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){Np=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{Np=!1}function aE(t,e,n,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Vl=!1,zd=null,Bd=!1,Lp=null,lE={onError:function(t){Vl=!0,zd=t}};function cE(t,e,n,s,r,i,o,a,l){Vl=!1,zd=null,aE.apply(lE,arguments)}function uE(t,e,n,s,r,i,o,a,l){if(cE.apply(this,arguments),Vl){if(Vl){var c=zd;Vl=!1,zd=null}else throw Error(ae(198));Bd||(Bd=!0,Lp=c)}}function oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function t2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sb(t){if(oo(t)!==t)throw Error(ae(188))}function dE(t){var e=t.alternate;if(!e){if(e=oo(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Sb(r),t;if(i===s)return Sb(r),e;i=i.sibling}throw Error(ae(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==s)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function n2(t){return t=dE(t),t!==null?s2(t):null}function s2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=s2(t);if(e!==null)return e;t=t.sibling}return null}var r2=Vn.unstable_scheduleCallback,kb=Vn.unstable_cancelCallback,hE=Vn.unstable_shouldYield,fE=Vn.unstable_requestPaint,Pt=Vn.unstable_now,pE=Vn.unstable_getCurrentPriorityLevel,hm=Vn.unstable_ImmediatePriority,i2=Vn.unstable_UserBlockingPriority,$d=Vn.unstable_NormalPriority,gE=Vn.unstable_LowPriority,o2=Vn.unstable_IdlePriority,Lh=null,Vs=null;function mE(t){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(Lh,t,void 0,(t.current.flags&128)===128)}catch{}}var _s=Math.clz32?Math.clz32:yE,xE=Math.log,bE=Math.LN2;function yE(t){return t>>>=0,t===0?32:31-(xE(t)/bE|0)|0}var vu=64,wu=4194304;function Al(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ud(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Al(a):(i&=o,i!==0&&(s=Al(i)))}else o=n&~r,o!==0?s=Al(o):i!==0&&(s=Al(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-_s(e),r=1<<n,s|=t[n],e&=~r;return s}function vE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wE(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-_s(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=vE(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function jp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a2(){var t=vu;return vu<<=1,!(vu&4194240)&&(vu=64),t}function Vf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_s(e),t[e]=n}function SE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-_s(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function fm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-_s(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var tt=0;function l2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var c2,pm,u2,d2,h2,Fp=!1,Su=[],qr=null,Xr=null,Qr=null,hc=new Map,fc=new Map,Lr=[],kE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cb(t,e){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":hc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(e.pointerId)}}function rl(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Yc(e),e!==null&&pm(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function CE(t,e,n,s,r){switch(e){case"focusin":return qr=rl(qr,t,e,n,s,r),!0;case"dragenter":return Xr=rl(Xr,t,e,n,s,r),!0;case"mouseover":return Qr=rl(Qr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return hc.set(i,rl(hc.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,fc.set(i,rl(fc.get(i)||null,t,e,n,s,r)),!0}return!1}function f2(t){var e=Mi(t.target);if(e!==null){var n=oo(e);if(n!==null){if(e=n.tag,e===13){if(e=t2(n),e!==null){t.blockedOn=e,h2(t.priority,function(){u2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Ap=s,n.target.dispatchEvent(s),Ap=null}else return e=Yc(n),e!==null&&pm(e),t.blockedOn=n,!1;e.shift()}return!0}function _b(t,e,n){pd(t)&&n.delete(e)}function _E(){Fp=!1,qr!==null&&pd(qr)&&(qr=null),Xr!==null&&pd(Xr)&&(Xr=null),Qr!==null&&pd(Qr)&&(Qr=null),hc.forEach(_b),fc.forEach(_b)}function il(t,e){t.blockedOn===e&&(t.blockedOn=null,Fp||(Fp=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,_E)))}function pc(t){function e(r){return il(r,t)}if(0<Su.length){il(Su[0],t);for(var n=1;n<Su.length;n++){var s=Su[n];s.blockedOn===t&&(s.blockedOn=null)}}for(qr!==null&&il(qr,t),Xr!==null&&il(Xr,t),Qr!==null&&il(Qr,t),hc.forEach(e),fc.forEach(e),n=0;n<Lr.length;n++)s=Lr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Lr.length&&(n=Lr[0],n.blockedOn===null);)f2(n),n.blockedOn===null&&Lr.shift()}var Wo=vr.ReactCurrentBatchConfig,Wd=!0;function EE(t,e,n,s){var r=tt,i=Wo.transition;Wo.transition=null;try{tt=1,gm(t,e,n,s)}finally{tt=r,Wo.transition=i}}function PE(t,e,n,s){var r=tt,i=Wo.transition;Wo.transition=null;try{tt=4,gm(t,e,n,s)}finally{tt=r,Wo.transition=i}}function gm(t,e,n,s){if(Wd){var r=zp(t,e,n,s);if(r===null)t0(t,e,s,Hd,n),Cb(t,s);else if(CE(r,t,e,n,s))s.stopPropagation();else if(Cb(t,s),e&4&&-1<kE.indexOf(t)){for(;r!==null;){var i=Yc(r);if(i!==null&&c2(i),i=zp(t,e,n,s),i===null&&t0(t,e,s,Hd,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else t0(t,e,s,null,n)}}var Hd=null;function zp(t,e,n,s){if(Hd=null,t=dm(s),t=Mi(t),t!==null)if(e=oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=t2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hd=t,null}function p2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pE()){case hm:return 1;case i2:return 4;case $d:case gE:return 16;case o2:return 536870912;default:return 16}default:return 16}}var Wr=null,mm=null,gd=null;function g2(){if(gd)return gd;var t,e=mm,n=e.length,s,r="value"in Wr?Wr.value:Wr.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return gd=r.slice(t,1<s?1-s:void 0)}function md(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ku(){return!0}function Eb(){return!1}function Kn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ku:Eb,this.isPropagationStopped=Eb,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ku)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ku)},persist:function(){},isPersistent:ku}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xm=Kn(Wa),Vc=vt({},Wa,{view:0,detail:0}),TE=Kn(Vc),Yf,Gf,ol,jh=vt({},Vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ol&&(ol&&t.type==="mousemove"?(Yf=t.screenX-ol.screenX,Gf=t.screenY-ol.screenY):Gf=Yf=0,ol=t),Yf)},movementY:function(t){return"movementY"in t?t.movementY:Gf}}),Pb=Kn(jh),IE=vt({},jh,{dataTransfer:0}),ME=Kn(IE),RE=vt({},Vc,{relatedTarget:0}),Kf=Kn(RE),OE=vt({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),AE=Kn(OE),DE=vt({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NE=Kn(DE),LE=vt({},Wa,{data:0}),Tb=Kn(LE),jE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zE[t])?!!e[t]:!1}function bm(){return BE}var $E=vt({},Vc,{key:function(t){if(t.key){var e=jE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=md(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bm,charCode:function(t){return t.type==="keypress"?md(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?md(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UE=Kn($E),WE=vt({},jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ib=Kn(WE),HE=vt({},Vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bm}),VE=Kn(HE),YE=vt({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),GE=Kn(YE),KE=vt({},jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qE=Kn(KE),XE=[9,13,27,32],ym=gr&&"CompositionEvent"in window,Yl=null;gr&&"documentMode"in document&&(Yl=document.documentMode);var QE=gr&&"TextEvent"in window&&!Yl,m2=gr&&(!ym||Yl&&8<Yl&&11>=Yl),Mb=" ",Rb=!1;function x2(t,e){switch(t){case"keyup":return XE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _o=!1;function JE(t,e){switch(t){case"compositionend":return b2(e);case"keypress":return e.which!==32?null:(Rb=!0,Mb);case"textInput":return t=e.data,t===Mb&&Rb?null:t;default:return null}}function ZE(t,e){if(_o)return t==="compositionend"||!ym&&x2(t,e)?(t=g2(),gd=mm=Wr=null,_o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m2&&e.locale!=="ko"?null:e.data;default:return null}}var eP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ob(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eP[t.type]:e==="textarea"}function y2(t,e,n,s){XS(s),e=Vd(e,"onChange"),0<e.length&&(n=new xm("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Gl=null,gc=null;function tP(t){M2(t,0)}function Fh(t){var e=To(t);if(WS(e))return t}function nP(t,e){if(t==="change")return e}var v2=!1;if(gr){var qf;if(gr){var Xf="oninput"in document;if(!Xf){var Ab=document.createElement("div");Ab.setAttribute("oninput","return;"),Xf=typeof Ab.oninput=="function"}qf=Xf}else qf=!1;v2=qf&&(!document.documentMode||9<document.documentMode)}function Db(){Gl&&(Gl.detachEvent("onpropertychange",w2),gc=Gl=null)}function w2(t){if(t.propertyName==="value"&&Fh(gc)){var e=[];y2(e,gc,t,dm(t)),e2(tP,e)}}function sP(t,e,n){t==="focusin"?(Db(),Gl=e,gc=n,Gl.attachEvent("onpropertychange",w2)):t==="focusout"&&Db()}function rP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fh(gc)}function iP(t,e){if(t==="click")return Fh(e)}function oP(t,e){if(t==="input"||t==="change")return Fh(e)}function aP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ps=typeof Object.is=="function"?Object.is:aP;function mc(t,e){if(Ps(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!wp.call(e,r)||!Ps(t[r],e[r]))return!1}return!0}function Nb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lb(t,e){var n=Nb(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nb(n)}}function S2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function k2(){for(var t=window,e=Fd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fd(t.document)}return e}function vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lP(t){var e=k2(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&S2(n.ownerDocument.documentElement,n)){if(s!==null&&vm(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=Lb(n,i);var o=Lb(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cP=gr&&"documentMode"in document&&11>=document.documentMode,Eo=null,Bp=null,Kl=null,$p=!1;function jb(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$p||Eo==null||Eo!==Fd(s)||(s=Eo,"selectionStart"in s&&vm(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Kl&&mc(Kl,s)||(Kl=s,s=Vd(Bp,"onSelect"),0<s.length&&(e=new xm("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Eo)))}function Cu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Po={animationend:Cu("Animation","AnimationEnd"),animationiteration:Cu("Animation","AnimationIteration"),animationstart:Cu("Animation","AnimationStart"),transitionend:Cu("Transition","TransitionEnd")},Qf={},C2={};gr&&(C2=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function zh(t){if(Qf[t])return Qf[t];if(!Po[t])return t;var e=Po[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in C2)return Qf[t]=e[n];return t}var _2=zh("animationend"),E2=zh("animationiteration"),P2=zh("animationstart"),T2=zh("transitionend"),I2=new Map,Fb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(t,e){I2.set(t,e),io(e,[t])}for(var Jf=0;Jf<Fb.length;Jf++){var Zf=Fb[Jf],uP=Zf.toLowerCase(),dP=Zf[0].toUpperCase()+Zf.slice(1);di(uP,"on"+dP)}di(_2,"onAnimationEnd");di(E2,"onAnimationIteration");di(P2,"onAnimationStart");di("dblclick","onDoubleClick");di("focusin","onFocus");di("focusout","onBlur");di(T2,"onTransitionEnd");ya("onMouseEnter",["mouseout","mouseover"]);ya("onMouseLeave",["mouseout","mouseover"]);ya("onPointerEnter",["pointerout","pointerover"]);ya("onPointerLeave",["pointerout","pointerover"]);io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));io("onBeforeInput",["compositionend","keypress","textInput","paste"]);io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dl));function zb(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,uE(s,e,void 0,t),t.currentTarget=null}function M2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;zb(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;zb(r,a,c),i=l}}}if(Bd)throw t=Lp,Bd=!1,Lp=null,t}function ft(t,e){var n=e[Yp];n===void 0&&(n=e[Yp]=new Set);var s=t+"__bubble";n.has(s)||(R2(e,t,2,!1),n.add(s))}function e0(t,e,n){var s=0;e&&(s|=4),R2(n,t,s,e)}var _u="_reactListening"+Math.random().toString(36).slice(2);function xc(t){if(!t[_u]){t[_u]=!0,FS.forEach(function(n){n!=="selectionchange"&&(hP.has(n)||e0(n,!1,t),e0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_u]||(e[_u]=!0,e0("selectionchange",!1,e))}}function R2(t,e,n,s){switch(p2(e)){case 1:var r=EE;break;case 4:r=PE;break;default:r=gm}n=r.bind(null,e,n,t),r=void 0,!Np||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function t0(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Mi(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}e2(function(){var c=i,u=dm(n),d=[];e:{var f=I2.get(t);if(f!==void 0){var g=xm,m=t;switch(t){case"keypress":if(md(n)===0)break e;case"keydown":case"keyup":g=UE;break;case"focusin":m="focus",g=Kf;break;case"focusout":m="blur",g=Kf;break;case"beforeblur":case"afterblur":g=Kf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Pb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ME;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=VE;break;case _2:case E2:case P2:g=AE;break;case T2:g=GE;break;case"scroll":g=TE;break;case"wheel":g=qE;break;case"copy":case"cut":case"paste":g=NE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ib}var b=(e&4)!==0,w=!b&&t==="scroll",p=b?f!==null?f+"Capture":null:f;b=[];for(var y=c,x;y!==null;){x=y;var v=x.stateNode;if(x.tag===5&&v!==null&&(x=v,p!==null&&(v=dc(y,p),v!=null&&b.push(bc(y,v,x)))),w)break;y=y.return}0<b.length&&(f=new g(f,m,null,n,u),d.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Ap&&(m=n.relatedTarget||n.fromElement)&&(Mi(m)||m[mr]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=n.relatedTarget||n.toElement,g=c,m=m?Mi(m):null,m!==null&&(w=oo(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=c),g!==m)){if(b=Pb,v="onMouseLeave",p="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(b=Ib,v="onPointerLeave",p="onPointerEnter",y="pointer"),w=g==null?f:To(g),x=m==null?f:To(m),f=new b(v,y+"leave",g,n,u),f.target=w,f.relatedTarget=x,v=null,Mi(u)===c&&(b=new b(p,y+"enter",m,n,u),b.target=x,b.relatedTarget=w,v=b),w=v,g&&m)t:{for(b=g,p=m,y=0,x=b;x;x=mo(x))y++;for(x=0,v=p;v;v=mo(v))x++;for(;0<y-x;)b=mo(b),y--;for(;0<x-y;)p=mo(p),x--;for(;y--;){if(b===p||p!==null&&b===p.alternate)break t;b=mo(b),p=mo(p)}b=null}else b=null;g!==null&&Bb(d,f,g,b,!1),m!==null&&w!==null&&Bb(d,w,m,b,!0)}}e:{if(f=c?To(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var k=nP;else if(Ob(f))if(v2)k=oP;else{k=rP;var C=sP}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=iP);if(k&&(k=k(t,c))){y2(d,k,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Tp(f,"number",f.value)}switch(C=c?To(c):window,t){case"focusin":(Ob(C)||C.contentEditable==="true")&&(Eo=C,Bp=c,Kl=null);break;case"focusout":Kl=Bp=Eo=null;break;case"mousedown":$p=!0;break;case"contextmenu":case"mouseup":case"dragend":$p=!1,jb(d,n,u);break;case"selectionchange":if(cP)break;case"keydown":case"keyup":jb(d,n,u)}var E;if(ym)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else _o?x2(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(m2&&n.locale!=="ko"&&(_o||T!=="onCompositionStart"?T==="onCompositionEnd"&&_o&&(E=g2()):(Wr=u,mm="value"in Wr?Wr.value:Wr.textContent,_o=!0)),C=Vd(c,T),0<C.length&&(T=new Tb(T,t,null,n,u),d.push({event:T,listeners:C}),E?T.data=E:(E=b2(n),E!==null&&(T.data=E)))),(E=QE?JE(t,n):ZE(t,n))&&(c=Vd(c,"onBeforeInput"),0<c.length&&(u=new Tb("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}M2(d,e)})}function bc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vd(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=dc(t,n),i!=null&&s.unshift(bc(t,i,r)),i=dc(t,e),i!=null&&s.push(bc(t,i,r))),t=t.return}return s}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bb(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=dc(n,i),l!=null&&o.unshift(bc(n,l,a))):r||(l=dc(n,i),l!=null&&o.push(bc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fP=/\r\n?/g,pP=/\u0000|\uFFFD/g;function $b(t){return(typeof t=="string"?t:""+t).replace(fP,`
`).replace(pP,"")}function Eu(t,e,n){if(e=$b(e),$b(t)!==e&&n)throw Error(ae(425))}function Yd(){}var Up=null,Wp=null;function Hp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vp=typeof setTimeout=="function"?setTimeout:void 0,gP=typeof clearTimeout=="function"?clearTimeout:void 0,Ub=typeof Promise=="function"?Promise:void 0,mP=typeof queueMicrotask=="function"?queueMicrotask:typeof Ub<"u"?function(t){return Ub.resolve(null).then(t).catch(xP)}:Vp;function xP(t){setTimeout(function(){throw t})}function n0(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),pc(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);pc(e)}function Jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),Ws="__reactFiber$"+Ha,yc="__reactProps$"+Ha,mr="__reactContainer$"+Ha,Yp="__reactEvents$"+Ha,bP="__reactListeners$"+Ha,yP="__reactHandles$"+Ha;function Mi(t){var e=t[Ws];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mr]||n[Ws]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wb(t);t!==null;){if(n=t[Ws])return n;t=Wb(t)}return e}t=n,n=t.parentNode}return null}function Yc(t){return t=t[Ws]||t[mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function To(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function Bh(t){return t[yc]||null}var Gp=[],Io=-1;function hi(t){return{current:t}}function pt(t){0>Io||(t.current=Gp[Io],Gp[Io]=null,Io--)}function dt(t,e){Io++,Gp[Io]=t.current,t.current=e}var ai={},fn=hi(ai),Mn=hi(!1),Gi=ai;function va(t,e){var n=t.type.contextTypes;if(!n)return ai;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Rn(t){return t=t.childContextTypes,t!=null}function Gd(){pt(Mn),pt(fn)}function Hb(t,e,n){if(fn.current!==ai)throw Error(ae(168));dt(fn,e),dt(Mn,n)}function O2(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(ae(108,sE(t)||"Unknown",r));return vt({},n,s)}function Kd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,Gi=fn.current,dt(fn,t),dt(Mn,Mn.current),!0}function Vb(t,e,n){var s=t.stateNode;if(!s)throw Error(ae(169));n?(t=O2(t,e,Gi),s.__reactInternalMemoizedMergedChildContext=t,pt(Mn),pt(fn),dt(fn,t)):pt(Mn),dt(Mn,n)}var nr=null,$h=!1,s0=!1;function A2(t){nr===null?nr=[t]:nr.push(t)}function vP(t){$h=!0,A2(t)}function fi(){if(!s0&&nr!==null){s0=!0;var t=0,e=tt;try{var n=nr;for(tt=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}nr=null,$h=!1}catch(r){throw nr!==null&&(nr=nr.slice(t+1)),r2(hm,fi),r}finally{tt=e,s0=!1}}return null}var Mo=[],Ro=0,qd=null,Xd=0,is=[],os=0,Ki=null,lr=1,cr="";function wi(t,e){Mo[Ro++]=Xd,Mo[Ro++]=qd,qd=t,Xd=e}function D2(t,e,n){is[os++]=lr,is[os++]=cr,is[os++]=Ki,Ki=t;var s=lr;t=cr;var r=32-_s(s)-1;s&=~(1<<r),n+=1;var i=32-_s(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,lr=1<<32-_s(e)+r|n<<r|s,cr=i+t}else lr=1<<i|n<<r|s,cr=t}function wm(t){t.return!==null&&(wi(t,1),D2(t,1,0))}function Sm(t){for(;t===qd;)qd=Mo[--Ro],Mo[Ro]=null,Xd=Mo[--Ro],Mo[Ro]=null;for(;t===Ki;)Ki=is[--os],is[os]=null,cr=is[--os],is[os]=null,lr=is[--os],is[os]=null}var Bn=null,zn=null,gt=!1,ks=null;function N2(t,e){var n=as(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,zn=Jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,zn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ki!==null?{id:lr,overflow:cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=as(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,zn=null,!0):!1;default:return!1}}function Kp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qp(t){if(gt){var e=zn;if(e){var n=e;if(!Yb(t,e)){if(Kp(t))throw Error(ae(418));e=Jr(n.nextSibling);var s=Bn;e&&Yb(t,e)?N2(s,n):(t.flags=t.flags&-4097|2,gt=!1,Bn=t)}}else{if(Kp(t))throw Error(ae(418));t.flags=t.flags&-4097|2,gt=!1,Bn=t}}}function Gb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function Pu(t){if(t!==Bn)return!1;if(!gt)return Gb(t),gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hp(t.type,t.memoizedProps)),e&&(e=zn)){if(Kp(t))throw L2(),Error(ae(418));for(;e;)N2(t,e),e=Jr(e.nextSibling)}if(Gb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zn=Jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zn=null}}else zn=Bn?Jr(t.stateNode.nextSibling):null;return!0}function L2(){for(var t=zn;t;)t=Jr(t.nextSibling)}function wa(){zn=Bn=null,gt=!1}function km(t){ks===null?ks=[t]:ks.push(t)}var wP=vr.ReactCurrentBatchConfig;function al(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var s=n.stateNode}if(!s)throw Error(ae(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Tu(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kb(t){var e=t._init;return e(t._payload)}function j2(t){function e(p,y){if(t){var x=p.deletions;x===null?(p.deletions=[y],p.flags|=16):x.push(y)}}function n(p,y){if(!t)return null;for(;y!==null;)e(p,y),y=y.sibling;return null}function s(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function r(p,y){return p=ni(p,y),p.index=0,p.sibling=null,p}function i(p,y,x){return p.index=x,t?(x=p.alternate,x!==null?(x=x.index,x<y?(p.flags|=2,y):x):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,y,x,v){return y===null||y.tag!==6?(y=u0(x,p.mode,v),y.return=p,y):(y=r(y,x),y.return=p,y)}function l(p,y,x,v){var k=x.type;return k===Co?u(p,y,x.props.children,v,x.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Dr&&Kb(k)===y.type)?(v=r(y,x.props),v.ref=al(p,y,x),v.return=p,v):(v=kd(x.type,x.key,x.props,null,p.mode,v),v.ref=al(p,y,x),v.return=p,v)}function c(p,y,x,v){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=d0(x,p.mode,v),y.return=p,y):(y=r(y,x.children||[]),y.return=p,y)}function u(p,y,x,v,k){return y===null||y.tag!==7?(y=$i(x,p.mode,v,k),y.return=p,y):(y=r(y,x),y.return=p,y)}function d(p,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=u0(""+y,p.mode,x),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case xu:return x=kd(y.type,y.key,y.props,null,p.mode,x),x.ref=al(p,null,y),x.return=p,x;case ko:return y=d0(y,p.mode,x),y.return=p,y;case Dr:var v=y._init;return d(p,v(y._payload),x)}if(Ol(y)||nl(y))return y=$i(y,p.mode,x,null),y.return=p,y;Tu(p,y)}return null}function f(p,y,x,v){var k=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:a(p,y,""+x,v);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xu:return x.key===k?l(p,y,x,v):null;case ko:return x.key===k?c(p,y,x,v):null;case Dr:return k=x._init,f(p,y,k(x._payload),v)}if(Ol(x)||nl(x))return k!==null?null:u(p,y,x,v,null);Tu(p,x)}return null}function g(p,y,x,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return p=p.get(x)||null,a(y,p,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xu:return p=p.get(v.key===null?x:v.key)||null,l(y,p,v,k);case ko:return p=p.get(v.key===null?x:v.key)||null,c(y,p,v,k);case Dr:var C=v._init;return g(p,y,x,C(v._payload),k)}if(Ol(v)||nl(v))return p=p.get(x)||null,u(y,p,v,k,null);Tu(y,v)}return null}function m(p,y,x,v){for(var k=null,C=null,E=y,T=y=0,P=null;E!==null&&T<x.length;T++){E.index>T?(P=E,E=null):P=E.sibling;var _=f(p,E,x[T],v);if(_===null){E===null&&(E=P);break}t&&E&&_.alternate===null&&e(p,E),y=i(_,y,T),C===null?k=_:C.sibling=_,C=_,E=P}if(T===x.length)return n(p,E),gt&&wi(p,T),k;if(E===null){for(;T<x.length;T++)E=d(p,x[T],v),E!==null&&(y=i(E,y,T),C===null?k=E:C.sibling=E,C=E);return gt&&wi(p,T),k}for(E=s(p,E);T<x.length;T++)P=g(E,p,T,x[T],v),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?T:P.key),y=i(P,y,T),C===null?k=P:C.sibling=P,C=P);return t&&E.forEach(function(D){return e(p,D)}),gt&&wi(p,T),k}function b(p,y,x,v){var k=nl(x);if(typeof k!="function")throw Error(ae(150));if(x=k.call(x),x==null)throw Error(ae(151));for(var C=k=null,E=y,T=y=0,P=null,_=x.next();E!==null&&!_.done;T++,_=x.next()){E.index>T?(P=E,E=null):P=E.sibling;var D=f(p,E,_.value,v);if(D===null){E===null&&(E=P);break}t&&E&&D.alternate===null&&e(p,E),y=i(D,y,T),C===null?k=D:C.sibling=D,C=D,E=P}if(_.done)return n(p,E),gt&&wi(p,T),k;if(E===null){for(;!_.done;T++,_=x.next())_=d(p,_.value,v),_!==null&&(y=i(_,y,T),C===null?k=_:C.sibling=_,C=_);return gt&&wi(p,T),k}for(E=s(p,E);!_.done;T++,_=x.next())_=g(E,p,T,_.value,v),_!==null&&(t&&_.alternate!==null&&E.delete(_.key===null?T:_.key),y=i(_,y,T),C===null?k=_:C.sibling=_,C=_);return t&&E.forEach(function(A){return e(p,A)}),gt&&wi(p,T),k}function w(p,y,x,v){if(typeof x=="object"&&x!==null&&x.type===Co&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case xu:e:{for(var k=x.key,C=y;C!==null;){if(C.key===k){if(k=x.type,k===Co){if(C.tag===7){n(p,C.sibling),y=r(C,x.props.children),y.return=p,p=y;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Dr&&Kb(k)===C.type){n(p,C.sibling),y=r(C,x.props),y.ref=al(p,C,x),y.return=p,p=y;break e}n(p,C);break}else e(p,C);C=C.sibling}x.type===Co?(y=$i(x.props.children,p.mode,v,x.key),y.return=p,p=y):(v=kd(x.type,x.key,x.props,null,p.mode,v),v.ref=al(p,y,x),v.return=p,p=v)}return o(p);case ko:e:{for(C=x.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(p,y.sibling),y=r(y,x.children||[]),y.return=p,p=y;break e}else{n(p,y);break}else e(p,y);y=y.sibling}y=d0(x,p.mode,v),y.return=p,p=y}return o(p);case Dr:return C=x._init,w(p,y,C(x._payload),v)}if(Ol(x))return m(p,y,x,v);if(nl(x))return b(p,y,x,v);Tu(p,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(p,y.sibling),y=r(y,x),y.return=p,p=y):(n(p,y),y=u0(x,p.mode,v),y.return=p,p=y),o(p)):n(p,y)}return w}var Sa=j2(!0),F2=j2(!1),Qd=hi(null),Jd=null,Oo=null,Cm=null;function _m(){Cm=Oo=Jd=null}function Em(t){var e=Qd.current;pt(Qd),t._currentValue=e}function Xp(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Ho(t,e){Jd=t,Cm=Oo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(In=!0),t.firstContext=null)}function ds(t){var e=t._currentValue;if(Cm!==t)if(t={context:t,memoizedValue:e,next:null},Oo===null){if(Jd===null)throw Error(ae(308));Oo=t,Jd.dependencies={lanes:0,firstContext:t}}else Oo=Oo.next=t;return e}var Ri=null;function Pm(t){Ri===null?Ri=[t]:Ri.push(t)}function z2(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Pm(e)):(n.next=r.next,r.next=n),e.interleaved=n,xr(t,s)}function xr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nr=!1;function Tm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ge&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,xr(t,n)}return r=s.interleaved,r===null?(e.next=e,Pm(s)):(e.next=r.next,r.next=e),s.interleaved=e,xr(t,n)}function xd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,fm(t,n)}}function qb(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zd(t,e,n,s){var r=t.updateQueue;Nr=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=r.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,g=a.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,b=a;switch(f=e,g=n,b.tag){case 1:if(m=b.payload,typeof m=="function"){d=m.call(g,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=b.payload,f=typeof m=="function"?m.call(g,d,f):m,f==null)break e;d=vt({},d,f);break e;case 2:Nr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=d):u=u.next=g,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Xi|=o,t.lanes=o,t.memoizedState=d}}function Xb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(ae(191,r));r.call(s)}}}var Gc={},Ys=hi(Gc),vc=hi(Gc),wc=hi(Gc);function Oi(t){if(t===Gc)throw Error(ae(174));return t}function Im(t,e){switch(dt(wc,e),dt(vc,t),dt(Ys,Gc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mp(e,t)}pt(Ys),dt(Ys,e)}function ka(){pt(Ys),pt(vc),pt(wc)}function $2(t){Oi(wc.current);var e=Oi(Ys.current),n=Mp(e,t.type);e!==n&&(dt(vc,t),dt(Ys,n))}function Mm(t){vc.current===t&&(pt(Ys),pt(vc))}var bt=hi(0);function eh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var r0=[];function Rm(){for(var t=0;t<r0.length;t++)r0[t]._workInProgressVersionPrimary=null;r0.length=0}var bd=vr.ReactCurrentDispatcher,i0=vr.ReactCurrentBatchConfig,qi=0,yt=null,Dt=null,zt=null,th=!1,ql=!1,Sc=0,SP=0;function on(){throw Error(ae(321))}function Om(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ps(t[n],e[n]))return!1;return!0}function Am(t,e,n,s,r,i){if(qi=i,yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bd.current=t===null||t.memoizedState===null?EP:PP,t=n(s,r),ql){i=0;do{if(ql=!1,Sc=0,25<=i)throw Error(ae(301));i+=1,zt=Dt=null,e.updateQueue=null,bd.current=TP,t=n(s,r)}while(ql)}if(bd.current=nh,e=Dt!==null&&Dt.next!==null,qi=0,zt=Dt=yt=null,th=!1,e)throw Error(ae(300));return t}function Dm(){var t=Sc!==0;return Sc=0,t}function js(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?yt.memoizedState=zt=t:zt=zt.next=t,zt}function hs(){if(Dt===null){var t=yt.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=zt===null?yt.memoizedState:zt.next;if(e!==null)zt=e,Dt=t;else{if(t===null)throw Error(ae(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},zt===null?yt.memoizedState=zt=t:zt=zt.next=t}return zt}function kc(t,e){return typeof e=="function"?e(t):e}function o0(t){var e=hs(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var s=Dt,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((qi&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=s):l=l.next=d,yt.lanes|=u,Xi|=u}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,Ps(s,e.memoizedState)||(In=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,yt.lanes|=i,Xi|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function a0(t){var e=hs(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Ps(i,e.memoizedState)||(In=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function U2(){}function W2(t,e){var n=yt,s=hs(),r=e(),i=!Ps(s.memoizedState,r);if(i&&(s.memoizedState=r,In=!0),s=s.queue,Nm(Y2.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,Cc(9,V2.bind(null,n,s,r,e),void 0,null),Ht===null)throw Error(ae(349));qi&30||H2(n,e,r)}return r}function H2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V2(t,e,n,s){e.value=n,e.getSnapshot=s,G2(e)&&K2(t)}function Y2(t,e,n){return n(function(){G2(e)&&K2(t)})}function G2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ps(t,n)}catch{return!0}}function K2(t){var e=xr(t,1);e!==null&&Es(e,t,1,-1)}function Qb(t){var e=js();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kc,lastRenderedState:t},e.queue=t,t=t.dispatch=_P.bind(null,yt,t),[e.memoizedState,t]}function Cc(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function q2(){return hs().memoizedState}function yd(t,e,n,s){var r=js();yt.flags|=t,r.memoizedState=Cc(1|e,n,void 0,s===void 0?null:s)}function Uh(t,e,n,s){var r=hs();s=s===void 0?null:s;var i=void 0;if(Dt!==null){var o=Dt.memoizedState;if(i=o.destroy,s!==null&&Om(s,o.deps)){r.memoizedState=Cc(e,n,i,s);return}}yt.flags|=t,r.memoizedState=Cc(1|e,n,i,s)}function Jb(t,e){return yd(8390656,8,t,e)}function Nm(t,e){return Uh(2048,8,t,e)}function X2(t,e){return Uh(4,2,t,e)}function Q2(t,e){return Uh(4,4,t,e)}function J2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Z2(t,e,n){return n=n!=null?n.concat([t]):null,Uh(4,4,J2.bind(null,e,t),n)}function Lm(){}function ek(t,e){var n=hs();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Om(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function tk(t,e){var n=hs();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Om(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function nk(t,e,n){return qi&21?(Ps(n,e)||(n=a2(),yt.lanes|=n,Xi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,In=!0),t.memoizedState=n)}function kP(t,e){var n=tt;tt=n!==0&&4>n?n:4,t(!0);var s=i0.transition;i0.transition={};try{t(!1),e()}finally{tt=n,i0.transition=s}}function sk(){return hs().memoizedState}function CP(t,e,n){var s=ti(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},rk(t))ik(e,n);else if(n=z2(t,e,n,s),n!==null){var r=vn();Es(n,t,s,r),ok(n,e,s)}}function _P(t,e,n){var s=ti(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(rk(t))ik(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Ps(a,o)){var l=e.interleaved;l===null?(r.next=r,Pm(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=z2(t,e,r,s),n!==null&&(r=vn(),Es(n,t,s,r),ok(n,e,s))}}function rk(t){var e=t.alternate;return t===yt||e!==null&&e===yt}function ik(t,e){ql=th=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ok(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,fm(t,n)}}var nh={readContext:ds,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},EP={readContext:ds,useCallback:function(t,e){return js().memoizedState=[t,e===void 0?null:e],t},useContext:ds,useEffect:Jb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yd(4194308,4,J2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yd(4194308,4,t,e)},useInsertionEffect:function(t,e){return yd(4,2,t,e)},useMemo:function(t,e){var n=js();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=js();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=CP.bind(null,yt,t),[s.memoizedState,t]},useRef:function(t){var e=js();return t={current:t},e.memoizedState=t},useState:Qb,useDebugValue:Lm,useDeferredValue:function(t){return js().memoizedState=t},useTransition:function(){var t=Qb(!1),e=t[0];return t=kP.bind(null,t[1]),js().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=yt,r=js();if(gt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Ht===null)throw Error(ae(349));qi&30||H2(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Jb(Y2.bind(null,s,i,t),[t]),s.flags|=2048,Cc(9,V2.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=js(),e=Ht.identifierPrefix;if(gt){var n=cr,s=lr;n=(s&~(1<<32-_s(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PP={readContext:ds,useCallback:ek,useContext:ds,useEffect:Nm,useImperativeHandle:Z2,useInsertionEffect:X2,useLayoutEffect:Q2,useMemo:tk,useReducer:o0,useRef:q2,useState:function(){return o0(kc)},useDebugValue:Lm,useDeferredValue:function(t){var e=hs();return nk(e,Dt.memoizedState,t)},useTransition:function(){var t=o0(kc)[0],e=hs().memoizedState;return[t,e]},useMutableSource:U2,useSyncExternalStore:W2,useId:sk,unstable_isNewReconciler:!1},TP={readContext:ds,useCallback:ek,useContext:ds,useEffect:Nm,useImperativeHandle:Z2,useInsertionEffect:X2,useLayoutEffect:Q2,useMemo:tk,useReducer:a0,useRef:q2,useState:function(){return a0(kc)},useDebugValue:Lm,useDeferredValue:function(t){var e=hs();return Dt===null?e.memoizedState=t:nk(e,Dt.memoizedState,t)},useTransition:function(){var t=a0(kc)[0],e=hs().memoizedState;return[t,e]},useMutableSource:U2,useSyncExternalStore:W2,useId:sk,unstable_isNewReconciler:!1};function ys(t,e){if(t&&t.defaultProps){e=vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qp(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wh={isMounted:function(t){return(t=t._reactInternals)?oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=vn(),r=ti(t),i=hr(s,r);i.payload=e,n!=null&&(i.callback=n),e=Zr(t,i,r),e!==null&&(Es(e,t,r,s),xd(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=vn(),r=ti(t),i=hr(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zr(t,i,r),e!==null&&(Es(e,t,r,s),xd(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),s=ti(t),r=hr(n,s);r.tag=2,e!=null&&(r.callback=e),e=Zr(t,r,s),e!==null&&(Es(e,t,s,n),xd(e,t,s))}};function Zb(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!mc(n,s)||!mc(r,i):!0}function ak(t,e,n){var s=!1,r=ai,i=e.contextType;return typeof i=="object"&&i!==null?i=ds(i):(r=Rn(e)?Gi:fn.current,s=e.contextTypes,i=(s=s!=null)?va(t,r):ai),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wh,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function ey(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Wh.enqueueReplaceState(e,e.state,null)}function Jp(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Tm(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=ds(i):(i=Rn(e)?Gi:fn.current,r.context=va(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Qp(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Wh.enqueueReplaceState(r,r.state,null),Zd(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ca(t,e){try{var n="",s=e;do n+=nE(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function l0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IP=typeof WeakMap=="function"?WeakMap:Map;function lk(t,e,n){n=hr(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){rh||(rh=!0,cg=s),Zp(t,e)},n}function ck(t,e,n){n=hr(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){Zp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Zp(t,e),typeof s!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ty(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new IP;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=WP.bind(null,t,e,n),e.then(t,t))}function ny(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sy(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hr(-1,1),e.tag=2,Zr(n,e,1))),n.lanes|=1),t)}var MP=vr.ReactCurrentOwner,In=!1;function yn(t,e,n,s){e.child=t===null?F2(e,null,n,s):Sa(e,t.child,n,s)}function ry(t,e,n,s,r){n=n.render;var i=e.ref;return Ho(e,r),s=Am(t,e,n,s,i,r),n=Dm(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,br(t,e,r)):(gt&&n&&wm(e),e.flags|=1,yn(t,e,s,r),e.child)}function iy(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!Hm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,uk(t,e,i,s,r)):(t=kd(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:mc,n(o,s)&&t.ref===e.ref)return br(t,e,r)}return e.flags|=1,t=ni(i,s),t.ref=e.ref,t.return=e,e.child=t}function uk(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(mc(i,s)&&t.ref===e.ref)if(In=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(In=!0);else return e.lanes=t.lanes,br(t,e,r)}return eg(t,e,n,s,r)}function dk(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Do,jn),jn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dt(Do,jn),jn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,dt(Do,jn),jn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,dt(Do,jn),jn|=s;return yn(t,e,r,n),e.child}function hk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function eg(t,e,n,s,r){var i=Rn(n)?Gi:fn.current;return i=va(e,i),Ho(e,r),n=Am(t,e,n,s,i,r),s=Dm(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,br(t,e,r)):(gt&&s&&wm(e),e.flags|=1,yn(t,e,n,r),e.child)}function oy(t,e,n,s,r){if(Rn(n)){var i=!0;Kd(e)}else i=!1;if(Ho(e,r),e.stateNode===null)vd(t,e),ak(e,n,s),Jp(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ds(c):(c=Rn(n)?Gi:fn.current,c=va(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&ey(e,o,s,c),Nr=!1;var f=e.memoizedState;o.state=f,Zd(e,s,o,r),l=e.memoizedState,a!==s||f!==l||Mn.current||Nr?(typeof u=="function"&&(Qp(e,n,u,s),l=e.memoizedState),(a=Nr||Zb(e,n,a,s,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,B2(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ys(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ds(l):(l=Rn(n)?Gi:fn.current,l=va(e,l));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&ey(e,o,s,l),Nr=!1,f=e.memoizedState,o.state=f,Zd(e,s,o,r);var m=e.memoizedState;a!==d||f!==m||Mn.current||Nr?(typeof g=="function"&&(Qp(e,n,g,s),m=e.memoizedState),(c=Nr||Zb(e,n,c,s,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),o.props=s,o.state=m,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return tg(t,e,n,s,i,r)}function tg(t,e,n,s,r,i){hk(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Vb(e,n,!1),br(t,e,i);s=e.stateNode,MP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Sa(e,t.child,null,i),e.child=Sa(e,null,a,i)):yn(t,e,a,i),e.memoizedState=s.state,r&&Vb(e,n,!0),e.child}function fk(t){var e=t.stateNode;e.pendingContext?Hb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hb(t,e.context,!1),Im(t,e.containerInfo)}function ay(t,e,n,s,r){return wa(),km(r),e.flags|=256,yn(t,e,n,s),e.child}var ng={dehydrated:null,treeContext:null,retryLane:0};function sg(t){return{baseLanes:t,cachePool:null,transitions:null}}function pk(t,e,n){var s=e.pendingProps,r=bt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),dt(bt,r&1),t===null)return qp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yh(o,s,0,null),t=$i(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=sg(n),e.memoizedState=ng,t):jm(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return RP(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=ni(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=ni(a,i):(i=$i(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?sg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ng,s}return i=t.child,t=i.sibling,s=ni(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function jm(t,e){return e=Yh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Iu(t,e,n,s){return s!==null&&km(s),Sa(e,t.child,null,n),t=jm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RP(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=l0(Error(ae(422))),Iu(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Yh({mode:"visible",children:s.children},r,0,null),i=$i(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Sa(e,t.child,null,o),e.child.memoizedState=sg(o),e.memoizedState=ng,i);if(!(e.mode&1))return Iu(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(ae(419)),s=l0(i,s,void 0),Iu(t,e,o,s)}if(a=(o&t.childLanes)!==0,In||a){if(s=Ht,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,xr(t,r),Es(s,t,r,-1))}return Wm(),s=l0(Error(ae(421))),Iu(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=HP.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,zn=Jr(r.nextSibling),Bn=e,gt=!0,ks=null,t!==null&&(is[os++]=lr,is[os++]=cr,is[os++]=Ki,lr=t.id,cr=t.overflow,Ki=e),e=jm(e,s.children),e.flags|=4096,e)}function ly(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Xp(t.return,e,n)}function c0(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function gk(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(yn(t,e,s.children,n),s=bt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ly(t,n,e);else if(t.tag===19)ly(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(dt(bt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&eh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),c0(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&eh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}c0(e,!0,n,null,i);break;case"together":c0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=ni(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ni(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OP(t,e,n){switch(e.tag){case 3:fk(e),wa();break;case 5:$2(e);break;case 1:Rn(e.type)&&Kd(e);break;case 4:Im(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;dt(Qd,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(dt(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?pk(t,e,n):(dt(bt,bt.current&1),t=br(t,e,n),t!==null?t.sibling:null);dt(bt,bt.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return gk(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),dt(bt,bt.current),s)break;return null;case 22:case 23:return e.lanes=0,dk(t,e,n)}return br(t,e,n)}var mk,rg,xk,bk;mk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rg=function(){};xk=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Oi(Ys.current);var i=null;switch(n){case"input":r=Ep(t,r),s=Ep(t,s),i=[];break;case"select":r=vt({},r,{value:void 0}),s=vt({},s,{value:void 0}),i=[];break;case"textarea":r=Ip(t,r),s=Ip(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Yd)}Rp(n,s);var o;n=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(cc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(cc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ft("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};bk=function(t,e,n,s){n!==s&&(e.flags|=4)};function ll(t,e){if(!gt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function an(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function AP(t,e,n){var s=e.pendingProps;switch(Sm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(e),null;case 1:return Rn(e.type)&&Gd(),an(e),null;case 3:return s=e.stateNode,ka(),pt(Mn),pt(fn),Rm(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Pu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ks!==null&&(hg(ks),ks=null))),rg(t,e),an(e),null;case 5:Mm(e);var r=Oi(wc.current);if(n=e.type,t!==null&&e.stateNode!=null)xk(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(ae(166));return an(e),null}if(t=Oi(Ys.current),Pu(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Ws]=e,s[yc]=i,t=(e.mode&1)!==0,n){case"dialog":ft("cancel",s),ft("close",s);break;case"iframe":case"object":case"embed":ft("load",s);break;case"video":case"audio":for(r=0;r<Dl.length;r++)ft(Dl[r],s);break;case"source":ft("error",s);break;case"img":case"image":case"link":ft("error",s),ft("load",s);break;case"details":ft("toggle",s);break;case"input":xb(s,i),ft("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},ft("invalid",s);break;case"textarea":yb(s,i),ft("invalid",s)}Rp(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Eu(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Eu(s.textContent,a,t),r=["children",""+a]):cc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ft("scroll",s)}switch(n){case"input":bu(s),bb(s,i,!0);break;case"textarea":bu(s),vb(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Yd)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Ws]=e,t[yc]=s,mk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Op(n,s),n){case"dialog":ft("cancel",t),ft("close",t),r=s;break;case"iframe":case"object":case"embed":ft("load",t),r=s;break;case"video":case"audio":for(r=0;r<Dl.length;r++)ft(Dl[r],t);r=s;break;case"source":ft("error",t),r=s;break;case"img":case"image":case"link":ft("error",t),ft("load",t),r=s;break;case"details":ft("toggle",t),r=s;break;case"input":xb(t,s),r=Ep(t,s),ft("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=vt({},s,{value:void 0}),ft("invalid",t);break;case"textarea":yb(t,s),r=Ip(t,s),ft("invalid",t);break;default:r=s}Rp(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?qS(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&GS(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&uc(t,l):typeof l=="number"&&uc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ft("scroll",t):l!=null&&am(t,i,l,o))}switch(n){case"input":bu(t),bb(t,s,!1);break;case"textarea":bu(t),vb(t);break;case"option":s.value!=null&&t.setAttribute("value",""+oi(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?Bo(t,!!s.multiple,i,!1):s.defaultValue!=null&&Bo(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Yd)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return an(e),null;case 6:if(t&&e.stateNode!=null)bk(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Oi(wc.current),Oi(Ys.current),Pu(e)){if(s=e.stateNode,n=e.memoizedProps,s[Ws]=e,(i=s.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:Eu(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Eu(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Ws]=e,e.stateNode=s}return an(e),null;case 13:if(pt(bt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gt&&zn!==null&&e.mode&1&&!(e.flags&128))L2(),wa(),e.flags|=98560,i=!1;else if(i=Pu(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[Ws]=e}else wa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;an(e),i=!1}else ks!==null&&(hg(ks),ks=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?Lt===0&&(Lt=3):Wm())),e.updateQueue!==null&&(e.flags|=4),an(e),null);case 4:return ka(),rg(t,e),t===null&&xc(e.stateNode.containerInfo),an(e),null;case 10:return Em(e.type._context),an(e),null;case 17:return Rn(e.type)&&Gd(),an(e),null;case 19:if(pt(bt),i=e.memoizedState,i===null)return an(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)ll(i,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=eh(t),o!==null){for(e.flags|=128,ll(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dt(bt,bt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pt()>_a&&(e.flags|=128,s=!0,ll(i,!1),e.lanes=4194304)}else{if(!s)if(t=eh(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ll(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!gt)return an(e),null}else 2*Pt()-i.renderingStartTime>_a&&n!==1073741824&&(e.flags|=128,s=!0,ll(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pt(),e.sibling=null,n=bt.current,dt(bt,s?n&1|2:n&1),e):(an(e),null);case 22:case 23:return Um(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?jn&1073741824&&(an(e),e.subtreeFlags&6&&(e.flags|=8192)):an(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function DP(t,e){switch(Sm(e),e.tag){case 1:return Rn(e.type)&&Gd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ka(),pt(Mn),pt(fn),Rm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mm(e),null;case 13:if(pt(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));wa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(bt),null;case 4:return ka(),null;case 10:return Em(e.type._context),null;case 22:case 23:return Um(),null;case 24:return null;default:return null}}var Mu=!1,dn=!1,NP=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){St(t,e,s)}else n.current=null}function ig(t,e,n){try{n()}catch(s){St(t,e,s)}}var cy=!1;function LP(t,e){if(Up=Wd,t=k2(),vm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==i||s!==0&&d.nodeType!==3||(l=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===i&&++u===s&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wp={focusedElem:t,selectionRange:n},Wd=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var b=m.memoizedProps,w=m.memoizedState,p=e.stateNode,y=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:ys(e.type,b),w);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(v){St(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return m=cy,cy=!1,m}function Xl(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&ig(e,n,i)}r=r.next}while(r!==s)}}function Hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function og(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yk(t){var e=t.alternate;e!==null&&(t.alternate=null,yk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ws],delete e[yc],delete e[Yp],delete e[bP],delete e[yP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vk(t){return t.tag===5||t.tag===3||t.tag===4}function uy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ag(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yd));else if(s!==4&&(t=t.child,t!==null))for(ag(t,e,n),t=t.sibling;t!==null;)ag(t,e,n),t=t.sibling}function lg(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(lg(t,e,n),t=t.sibling;t!==null;)lg(t,e,n),t=t.sibling}var qt=null,Ss=!1;function wr(t,e,n){for(n=n.child;n!==null;)wk(t,e,n),n=n.sibling}function wk(t,e,n){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(Lh,n)}catch{}switch(n.tag){case 5:dn||Ao(n,e);case 6:var s=qt,r=Ss;qt=null,wr(t,e,n),qt=s,Ss=r,qt!==null&&(Ss?(t=qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(Ss?(t=qt,n=n.stateNode,t.nodeType===8?n0(t.parentNode,n):t.nodeType===1&&n0(t,n),pc(t)):n0(qt,n.stateNode));break;case 4:s=qt,r=Ss,qt=n.stateNode.containerInfo,Ss=!0,wr(t,e,n),qt=s,Ss=r;break;case 0:case 11:case 14:case 15:if(!dn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ig(n,e,o),r=r.next}while(r!==s)}wr(t,e,n);break;case 1:if(!dn&&(Ao(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){St(n,e,a)}wr(t,e,n);break;case 21:wr(t,e,n);break;case 22:n.mode&1?(dn=(s=dn)||n.memoizedState!==null,wr(t,e,n),dn=s):wr(t,e,n);break;default:wr(t,e,n)}}function dy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NP),e.forEach(function(s){var r=VP.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function ms(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qt=a.stateNode,Ss=!1;break e;case 3:qt=a.stateNode.containerInfo,Ss=!0;break e;case 4:qt=a.stateNode.containerInfo,Ss=!0;break e}a=a.return}if(qt===null)throw Error(ae(160));wk(i,o,r),qt=null,Ss=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){St(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Sk(e,t),e=e.sibling}function Sk(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ms(e,t),Ms(t),s&4){try{Xl(3,t,t.return),Hh(3,t)}catch(b){St(t,t.return,b)}try{Xl(5,t,t.return)}catch(b){St(t,t.return,b)}}break;case 1:ms(e,t),Ms(t),s&512&&n!==null&&Ao(n,n.return);break;case 5:if(ms(e,t),Ms(t),s&512&&n!==null&&Ao(n,n.return),t.flags&32){var r=t.stateNode;try{uc(r,"")}catch(b){St(t,t.return,b)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&HS(r,i),Op(a,o);var c=Op(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?qS(r,d):u==="dangerouslySetInnerHTML"?GS(r,d):u==="children"?uc(r,d):am(r,u,d,c)}switch(a){case"input":Pp(r,i);break;case"textarea":VS(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Bo(r,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Bo(r,!!i.multiple,i.defaultValue,!0):Bo(r,!!i.multiple,i.multiple?[]:"",!1))}r[yc]=i}catch(b){St(t,t.return,b)}}break;case 6:if(ms(e,t),Ms(t),s&4){if(t.stateNode===null)throw Error(ae(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(b){St(t,t.return,b)}}break;case 3:if(ms(e,t),Ms(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{pc(e.containerInfo)}catch(b){St(t,t.return,b)}break;case 4:ms(e,t),Ms(t);break;case 13:ms(e,t),Ms(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Bm=Pt())),s&4&&dy(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(dn=(c=dn)||u,ms(e,t),dn=c):ms(e,t),Ms(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ge=t,u=t.child;u!==null;){for(d=ge=u;ge!==null;){switch(f=ge,g=f.child,f.tag){case 0:case 11:case 14:case 15:Xl(4,f,f.return);break;case 1:Ao(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(b){St(s,n,b)}}break;case 5:Ao(f,f.return);break;case 22:if(f.memoizedState!==null){fy(d);continue}}g!==null?(g.return=f,ge=g):fy(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=KS("display",o))}catch(b){St(t,t.return,b)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){St(t,t.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ms(e,t),Ms(t),s&4&&dy(t);break;case 21:break;default:ms(e,t),Ms(t)}}function Ms(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vk(n)){var s=n;break e}n=n.return}throw Error(ae(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(uc(r,""),s.flags&=-33);var i=uy(t);lg(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=uy(t);ag(t,a,o);break;default:throw Error(ae(161))}}catch(l){St(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jP(t,e,n){ge=t,kk(t)}function kk(t,e,n){for(var s=(t.mode&1)!==0;ge!==null;){var r=ge,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Mu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||dn;a=Mu;var c=dn;if(Mu=o,(dn=l)&&!c)for(ge=r;ge!==null;)o=ge,l=o.child,o.tag===22&&o.memoizedState!==null?py(r):l!==null?(l.return=o,ge=l):py(r);for(;i!==null;)ge=i,kk(i),i=i.sibling;ge=r,Mu=a,dn=c}hy(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ge=i):hy(t)}}function hy(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||Hh(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!dn)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ys(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Xb(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&pc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}dn||e.flags&512&&og(e)}catch(f){St(e,e.return,f)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function fy(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function py(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hh(4,e)}catch(l){St(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){St(e,r,l)}}var i=e.return;try{og(e)}catch(l){St(e,i,l)}break;case 5:var o=e.return;try{og(e)}catch(l){St(e,o,l)}}}catch(l){St(e,e.return,l)}if(e===t){ge=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ge=a;break}ge=e.return}}var FP=Math.ceil,sh=vr.ReactCurrentDispatcher,Fm=vr.ReactCurrentOwner,us=vr.ReactCurrentBatchConfig,Ge=0,Ht=null,At=null,tn=0,jn=0,Do=hi(0),Lt=0,_c=null,Xi=0,Vh=0,zm=0,Ql=null,Pn=null,Bm=0,_a=1/0,tr=null,rh=!1,cg=null,ei=null,Ru=!1,Hr=null,ih=0,Jl=0,ug=null,wd=-1,Sd=0;function vn(){return Ge&6?Pt():wd!==-1?wd:wd=Pt()}function ti(t){return t.mode&1?Ge&2&&tn!==0?tn&-tn:wP.transition!==null?(Sd===0&&(Sd=a2()),Sd):(t=tt,t!==0||(t=window.event,t=t===void 0?16:p2(t.type)),t):1}function Es(t,e,n,s){if(50<Jl)throw Jl=0,ug=null,Error(ae(185));Hc(t,n,s),(!(Ge&2)||t!==Ht)&&(t===Ht&&(!(Ge&2)&&(Vh|=n),Lt===4&&jr(t,tn)),On(t,s),n===1&&Ge===0&&!(e.mode&1)&&(_a=Pt()+500,$h&&fi()))}function On(t,e){var n=t.callbackNode;wE(t,e);var s=Ud(t,t===Ht?tn:0);if(s===0)n!==null&&kb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&kb(n),e===1)t.tag===0?vP(gy.bind(null,t)):A2(gy.bind(null,t)),mP(function(){!(Ge&6)&&fi()}),n=null;else{switch(l2(s)){case 1:n=hm;break;case 4:n=i2;break;case 16:n=$d;break;case 536870912:n=o2;break;default:n=$d}n=Rk(n,Ck.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ck(t,e){if(wd=-1,Sd=0,Ge&6)throw Error(ae(327));var n=t.callbackNode;if(Vo()&&t.callbackNode!==n)return null;var s=Ud(t,t===Ht?tn:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=oh(t,s);else{e=s;var r=Ge;Ge|=2;var i=Ek();(Ht!==t||tn!==e)&&(tr=null,_a=Pt()+500,Bi(t,e));do try{$P();break}catch(a){_k(t,a)}while(!0);_m(),sh.current=i,Ge=r,At!==null?e=0:(Ht=null,tn=0,e=Lt)}if(e!==0){if(e===2&&(r=jp(t),r!==0&&(s=r,e=dg(t,r))),e===1)throw n=_c,Bi(t,0),jr(t,s),On(t,Pt()),n;if(e===6)jr(t,s);else{if(r=t.current.alternate,!(s&30)&&!zP(r)&&(e=oh(t,s),e===2&&(i=jp(t),i!==0&&(s=i,e=dg(t,i))),e===1))throw n=_c,Bi(t,0),jr(t,s),On(t,Pt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(ae(345));case 2:Si(t,Pn,tr);break;case 3:if(jr(t,s),(s&130023424)===s&&(e=Bm+500-Pt(),10<e)){if(Ud(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){vn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Vp(Si.bind(null,t,Pn,tr),e);break}Si(t,Pn,tr);break;case 4:if(jr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-_s(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Pt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*FP(s/1960))-s,10<s){t.timeoutHandle=Vp(Si.bind(null,t,Pn,tr),s);break}Si(t,Pn,tr);break;case 5:Si(t,Pn,tr);break;default:throw Error(ae(329))}}}return On(t,Pt()),t.callbackNode===n?Ck.bind(null,t):null}function dg(t,e){var n=Ql;return t.current.memoizedState.isDehydrated&&(Bi(t,e).flags|=256),t=oh(t,e),t!==2&&(e=Pn,Pn=n,e!==null&&hg(e)),t}function hg(t){Pn===null?Pn=t:Pn.push.apply(Pn,t)}function zP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Ps(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~zm,e&=~Vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_s(e),s=1<<n;t[n]=-1,e&=~s}}function gy(t){if(Ge&6)throw Error(ae(327));Vo();var e=Ud(t,0);if(!(e&1))return On(t,Pt()),null;var n=oh(t,e);if(t.tag!==0&&n===2){var s=jp(t);s!==0&&(e=s,n=dg(t,s))}if(n===1)throw n=_c,Bi(t,0),jr(t,e),On(t,Pt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Si(t,Pn,tr),On(t,Pt()),null}function $m(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(_a=Pt()+500,$h&&fi())}}function Qi(t){Hr!==null&&Hr.tag===0&&!(Ge&6)&&Vo();var e=Ge;Ge|=1;var n=us.transition,s=tt;try{if(us.transition=null,tt=1,t)return t()}finally{tt=s,us.transition=n,Ge=e,!(Ge&6)&&fi()}}function Um(){jn=Do.current,pt(Do)}function Bi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gP(n)),At!==null)for(n=At.return;n!==null;){var s=n;switch(Sm(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Gd();break;case 3:ka(),pt(Mn),pt(fn),Rm();break;case 5:Mm(s);break;case 4:ka();break;case 13:pt(bt);break;case 19:pt(bt);break;case 10:Em(s.type._context);break;case 22:case 23:Um()}n=n.return}if(Ht=t,At=t=ni(t.current,null),tn=jn=e,Lt=0,_c=null,zm=Vh=Xi=0,Pn=Ql=null,Ri!==null){for(e=0;e<Ri.length;e++)if(n=Ri[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}Ri=null}return t}function _k(t,e){do{var n=At;try{if(_m(),bd.current=nh,th){for(var s=yt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}th=!1}if(qi=0,zt=Dt=yt=null,ql=!1,Sc=0,Fm.current=null,n===null||n.return===null){Lt=1,_c=e,At=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=tn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=ny(o);if(g!==null){g.flags&=-257,sy(g,o,a,i,e),g.mode&1&&ty(i,c,e),e=g,l=c;var m=e.updateQueue;if(m===null){var b=new Set;b.add(l),e.updateQueue=b}else m.add(l);break e}else{if(!(e&1)){ty(i,c,e),Wm();break e}l=Error(ae(426))}}else if(gt&&a.mode&1){var w=ny(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),sy(w,o,a,i,e),km(Ca(l,a));break e}}i=l=Ca(l,a),Lt!==4&&(Lt=2),Ql===null?Ql=[i]:Ql.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=lk(i,l,e);qb(i,p);break e;case 1:a=l;var y=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ei===null||!ei.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var v=ck(i,a,e);qb(i,v);break e}}i=i.return}while(i!==null)}Tk(n)}catch(k){e=k,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function Ek(){var t=sh.current;return sh.current=nh,t===null?nh:t}function Wm(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Ht===null||!(Xi&268435455)&&!(Vh&268435455)||jr(Ht,tn)}function oh(t,e){var n=Ge;Ge|=2;var s=Ek();(Ht!==t||tn!==e)&&(tr=null,Bi(t,e));do try{BP();break}catch(r){_k(t,r)}while(!0);if(_m(),Ge=n,sh.current=s,At!==null)throw Error(ae(261));return Ht=null,tn=0,Lt}function BP(){for(;At!==null;)Pk(At)}function $P(){for(;At!==null&&!hE();)Pk(At)}function Pk(t){var e=Mk(t.alternate,t,jn);t.memoizedProps=t.pendingProps,e===null?Tk(t):At=e,Fm.current=null}function Tk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DP(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,At=null;return}}else if(n=AP(n,e,jn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Lt===0&&(Lt=5)}function Si(t,e,n){var s=tt,r=us.transition;try{us.transition=null,tt=1,UP(t,e,n,s)}finally{us.transition=r,tt=s}return null}function UP(t,e,n,s){do Vo();while(Hr!==null);if(Ge&6)throw Error(ae(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(SE(t,i),t===Ht&&(At=Ht=null,tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ru||(Ru=!0,Rk($d,function(){return Vo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=us.transition,us.transition=null;var o=tt;tt=1;var a=Ge;Ge|=4,Fm.current=null,LP(t,n),Sk(n,t),lP(Wp),Wd=!!Up,Wp=Up=null,t.current=n,jP(n),fE(),Ge=a,tt=o,us.transition=i}else t.current=n;if(Ru&&(Ru=!1,Hr=t,ih=r),i=t.pendingLanes,i===0&&(ei=null),mE(n.stateNode),On(t,Pt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(rh)throw rh=!1,t=cg,cg=null,t;return ih&1&&t.tag!==0&&Vo(),i=t.pendingLanes,i&1?t===ug?Jl++:(Jl=0,ug=t):Jl=0,fi(),null}function Vo(){if(Hr!==null){var t=l2(ih),e=us.transition,n=tt;try{if(us.transition=null,tt=16>t?16:t,Hr===null)var s=!1;else{if(t=Hr,Hr=null,ih=0,Ge&6)throw Error(ae(331));var r=Ge;for(Ge|=4,ge=t.current;ge!==null;){var i=ge,o=i.child;if(ge.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ge=c;ge!==null;){var u=ge;switch(u.tag){case 0:case 11:case 15:Xl(8,u,i)}var d=u.child;if(d!==null)d.return=u,ge=d;else for(;ge!==null;){u=ge;var f=u.sibling,g=u.return;if(yk(u),u===c){ge=null;break}if(f!==null){f.return=g,ge=f;break}ge=g}}}var m=i.alternate;if(m!==null){var b=m.child;if(b!==null){m.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}ge=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ge=o;else e:for(;ge!==null;){if(i=ge,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xl(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,ge=p;break e}ge=i.return}}var y=t.current;for(ge=y;ge!==null;){o=ge;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ge=x;else e:for(o=y;ge!==null;){if(a=ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hh(9,a)}}catch(k){St(a,a.return,k)}if(a===o){ge=null;break e}var v=a.sibling;if(v!==null){v.return=a.return,ge=v;break e}ge=a.return}}if(Ge=r,fi(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(Lh,t)}catch{}s=!0}return s}finally{tt=n,us.transition=e}}return!1}function my(t,e,n){e=Ca(n,e),e=lk(t,e,1),t=Zr(t,e,1),e=vn(),t!==null&&(Hc(t,1,e),On(t,e))}function St(t,e,n){if(t.tag===3)my(t,t,n);else for(;e!==null;){if(e.tag===3){my(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ei===null||!ei.has(s))){t=Ca(n,t),t=ck(e,t,1),e=Zr(e,t,1),t=vn(),e!==null&&(Hc(e,1,t),On(e,t));break}}e=e.return}}function WP(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,Ht===t&&(tn&n)===n&&(Lt===4||Lt===3&&(tn&130023424)===tn&&500>Pt()-Bm?Bi(t,0):zm|=n),On(t,e)}function Ik(t,e){e===0&&(t.mode&1?(e=wu,wu<<=1,!(wu&130023424)&&(wu=4194304)):e=1);var n=vn();t=xr(t,e),t!==null&&(Hc(t,e,n),On(t,n))}function HP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ik(t,n)}function VP(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(ae(314))}s!==null&&s.delete(e),Ik(t,n)}var Mk;Mk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mn.current)In=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return In=!1,OP(t,e,n);In=!!(t.flags&131072)}else In=!1,gt&&e.flags&1048576&&D2(e,Xd,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;vd(t,e),t=e.pendingProps;var r=va(e,fn.current);Ho(e,n),r=Am(null,e,s,t,r,n);var i=Dm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rn(s)?(i=!0,Kd(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Tm(e),r.updater=Wh,e.stateNode=r,r._reactInternals=e,Jp(e,s,t,n),e=tg(null,e,s,!0,i,n)):(e.tag=0,gt&&i&&wm(e),yn(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(vd(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=GP(s),t=ys(s,t),r){case 0:e=eg(null,e,s,t,n);break e;case 1:e=oy(null,e,s,t,n);break e;case 11:e=ry(null,e,s,t,n);break e;case 14:e=iy(null,e,s,ys(s.type,t),n);break e}throw Error(ae(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ys(s,r),eg(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ys(s,r),oy(t,e,s,r,n);case 3:e:{if(fk(e),t===null)throw Error(ae(387));s=e.pendingProps,i=e.memoizedState,r=i.element,B2(t,e),Zd(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Ca(Error(ae(423)),e),e=ay(t,e,s,n,r);break e}else if(s!==r){r=Ca(Error(ae(424)),e),e=ay(t,e,s,n,r);break e}else for(zn=Jr(e.stateNode.containerInfo.firstChild),Bn=e,gt=!0,ks=null,n=F2(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wa(),s===r){e=br(t,e,n);break e}yn(t,e,s,n)}e=e.child}return e;case 5:return $2(e),t===null&&qp(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Hp(s,r)?o=null:i!==null&&Hp(s,i)&&(e.flags|=32),hk(t,e),yn(t,e,o,n),e.child;case 6:return t===null&&qp(e),null;case 13:return pk(t,e,n);case 4:return Im(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Sa(e,null,s,n):yn(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ys(s,r),ry(t,e,s,r,n);case 7:return yn(t,e,e.pendingProps,n),e.child;case 8:return yn(t,e,e.pendingProps.children,n),e.child;case 12:return yn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,dt(Qd,s._currentValue),s._currentValue=o,i!==null)if(Ps(i.value,o)){if(i.children===r.children&&!Mn.current){e=br(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=hr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Xp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}yn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Ho(e,n),r=ds(r),s=s(r),e.flags|=1,yn(t,e,s,n),e.child;case 14:return s=e.type,r=ys(s,e.pendingProps),r=ys(s.type,r),iy(t,e,s,r,n);case 15:return uk(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ys(s,r),vd(t,e),e.tag=1,Rn(s)?(t=!0,Kd(e)):t=!1,Ho(e,n),ak(e,s,r),Jp(e,s,r,n),tg(null,e,s,!0,t,n);case 19:return gk(t,e,n);case 22:return dk(t,e,n)}throw Error(ae(156,e.tag))};function Rk(t,e){return r2(t,e)}function YP(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(t,e,n,s){return new YP(t,e,n,s)}function Hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GP(t){if(typeof t=="function")return Hm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cm)return 11;if(t===um)return 14}return 2}function ni(t,e){var n=t.alternate;return n===null?(n=as(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kd(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")Hm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Co:return $i(n.children,r,i,e);case lm:o=8,r|=8;break;case Sp:return t=as(12,n,e,r|2),t.elementType=Sp,t.lanes=i,t;case kp:return t=as(13,n,e,r),t.elementType=kp,t.lanes=i,t;case Cp:return t=as(19,n,e,r),t.elementType=Cp,t.lanes=i,t;case $S:return Yh(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zS:o=10;break e;case BS:o=9;break e;case cm:o=11;break e;case um:o=14;break e;case Dr:o=16,s=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=as(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function $i(t,e,n,s){return t=as(7,t,s,e),t.lanes=n,t}function Yh(t,e,n,s){return t=as(22,t,s,e),t.elementType=$S,t.lanes=n,t.stateNode={isHidden:!1},t}function u0(t,e,n){return t=as(6,t,null,e),t.lanes=n,t}function d0(t,e,n){return e=as(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KP(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vf(0),this.expirationTimes=Vf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vf(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vm(t,e,n,s,r,i,o,a,l){return t=new KP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=as(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tm(i),t}function qP(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ko,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Ok(t){if(!t)return ai;t=t._reactInternals;e:{if(oo(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Rn(n))return O2(t,n,e)}return e}function Ak(t,e,n,s,r,i,o,a,l){return t=Vm(n,s,!0,t,r,i,o,a,l),t.context=Ok(null),n=t.current,s=vn(),r=ti(n),i=hr(s,r),i.callback=e??null,Zr(n,i,r),t.current.lanes=r,Hc(t,r,s),On(t,s),t}function Gh(t,e,n,s){var r=e.current,i=vn(),o=ti(r);return n=Ok(n),e.context===null?e.context=n:e.pendingContext=n,e=hr(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Zr(r,e,o),t!==null&&(Es(t,r,o,i),xd(t,r,o)),o}function ah(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ym(t,e){xy(t,e),(t=t.alternate)&&xy(t,e)}function XP(){return null}var Dk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gm(t){this._internalRoot=t}Kh.prototype.render=Gm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Gh(t,e,null,null)};Kh.prototype.unmount=Gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){Gh(null,t,null,null)}),e[mr]=null}};function Kh(t){this._internalRoot=t}Kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=d2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lr.length&&e!==0&&e<Lr[n].priority;n++);Lr.splice(n,0,t),n===0&&f2(t)}};function Km(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function by(){}function QP(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=ah(o);i.call(c)}}var o=Ak(e,s,t,0,null,!1,!1,"",by);return t._reactRootContainer=o,t[mr]=o.current,xc(t.nodeType===8?t.parentNode:t),Qi(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=ah(l);a.call(c)}}var l=Vm(t,0,!1,null,null,!1,!1,"",by);return t._reactRootContainer=l,t[mr]=l.current,xc(t.nodeType===8?t.parentNode:t),Qi(function(){Gh(e,l,n,s)}),l}function Xh(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=ah(o);a.call(l)}}Gh(e,o,t,r)}else o=QP(n,e,t,r,s);return ah(o)}c2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Al(e.pendingLanes);n!==0&&(fm(e,n|1),On(e,Pt()),!(Ge&6)&&(_a=Pt()+500,fi()))}break;case 13:Qi(function(){var s=xr(t,1);if(s!==null){var r=vn();Es(s,t,1,r)}}),Ym(t,1)}};pm=function(t){if(t.tag===13){var e=xr(t,134217728);if(e!==null){var n=vn();Es(e,t,134217728,n)}Ym(t,134217728)}};u2=function(t){if(t.tag===13){var e=ti(t),n=xr(t,e);if(n!==null){var s=vn();Es(n,t,e,s)}Ym(t,e)}};d2=function(){return tt};h2=function(t,e){var n=tt;try{return tt=t,e()}finally{tt=n}};Dp=function(t,e,n){switch(e){case"input":if(Pp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Bh(s);if(!r)throw Error(ae(90));WS(s),Pp(s,r)}}}break;case"textarea":VS(t,n);break;case"select":e=n.value,e!=null&&Bo(t,!!n.multiple,e,!1)}};JS=$m;ZS=Qi;var JP={usingClientEntryPoint:!1,Events:[Yc,To,Bh,XS,QS,$m]},cl={findFiberByHostInstance:Mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZP={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=n2(t),t===null?null:t.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||XP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{Lh=Ou.inject(ZP),Vs=Ou}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JP;Gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(e))throw Error(ae(200));return qP(t,e,null,n)};Gn.createRoot=function(t,e){if(!Km(t))throw Error(ae(299));var n=!1,s="",r=Dk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Vm(t,1,!1,null,null,n,!1,s,r),t[mr]=e.current,xc(t.nodeType===8?t.parentNode:t),new Gm(e)};Gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=n2(e),t=t===null?null:t.stateNode,t};Gn.flushSync=function(t){return Qi(t)};Gn.hydrate=function(t,e,n){if(!qh(e))throw Error(ae(200));return Xh(null,t,e,!0,n)};Gn.hydrateRoot=function(t,e,n){if(!Km(t))throw Error(ae(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=Dk;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ak(e,null,t,1,n??null,r,!1,i,o),t[mr]=e.current,xc(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Kh(e)};Gn.render=function(t,e,n){if(!qh(e))throw Error(ae(200));return Xh(null,t,e,!1,n)};Gn.unmountComponentAtNode=function(t){if(!qh(t))throw Error(ae(40));return t._reactRootContainer?(Qi(function(){Xh(null,null,t,!1,function(){t._reactRootContainer=null,t[mr]=null})}),!0):!1};Gn.unstable_batchedUpdates=$m;Gn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!qh(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Xh(t,e,n,!1,s)};Gn.version="18.3.1-next-f1338f8080-20240426";function Nk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nk)}catch(t){console.error(t)}}Nk(),NS.exports=Gn;var ao=NS.exports;const e4=kS(ao);var yy=ao;vp.createRoot=yy.createRoot,vp.hydrateRoot=yy.hydrateRoot;class qm{constructor(e,n=3,s=3e4){ne(this,"baseURL");ne(this,"timeout");ne(this,"maxRetries");this.baseURL=e.replace(/\/$/,""),this.maxRetries=n,this.timeout=s}async do(e){const n=Date.now();let s=null;for(let r=1;r<=this.maxRetries;r++)try{return{...await this.doRequest(e),duration:Date.now()-n}}catch(i){if(s=i,this.isNonceError(i))throw i;if(r<this.maxRetries){const o=r*1e3;await this.delay(o)}}throw new Error(`Request failed after ${this.maxRetries} attempts: ${s==null?void 0:s.message}`)}async doRequest(e){const n=`${this.baseURL}${e.path}`,s={"Content-Type":"application/json",Accept:"application/json, */*",...e.headers},r={method:e.method,headers:s,signal:AbortSignal.timeout(this.timeout)};e.body&&e.method!=="GET"?r.body=JSON.stringify(e.body):e.method==="GET"&&(r.body=void 0);const i=await fetch(n,r);let o;const a=i.headers.get("content-type");if(a!=null&&a.includes("application/json"))try{o=await i.json()}catch{o=await i.text()}else o=await i.text();if(i.status>=400)throw new Error(`HTTP ${i.status}: ${JSON.stringify(o)}`);return{statusCode:i.status,body:o,headers:i.headers}}isNonceError(e){const n=(e==null?void 0:e.message)||"";return n.toLowerCase().includes("nonce")||n.includes("InvalidNonce")||n.includes("NonceError")}delay(e){return new Promise(n=>setTimeout(n,e))}async get(e,n){return this.do({method:"GET",path:e,headers:n})}async post(e,n,s){return this.do({method:"POST",path:e,body:n,headers:s})}async put(e,n,s){return this.do({method:"PUT",path:e,body:n,headers:s})}async delete(e,n){return this.do({method:"DELETE",path:e,headers:n})}getBaseURL(){return this.baseURL}setTimeout(e){this.timeout=e}getTimeout(){return this.timeout}}const Yo=1e8;function xt(t){const e=typeof t=="string"?parseFloat(t):t;if(isNaN(e))throw new Error(`Invalid value for satoshi conversion: ${t}`);if(e<0)throw new Error(`Negative values not allowed for satoshi conversion: ${t}`);return BigInt(Math.floor(e*Yo)).toString()}function Ee(t){const e=BigInt(t);return Number(e)/Yo}function Lk(t){if(t<0)throw new Error(`Negative values not allowed: ${t}`);return Math.floor(t*Yo)}function vy(t){try{return BigInt(t)>=0n}catch{return!1}}function t4(t){return t.map(xt)}function n4(t){return t.map(Ee)}function wy(t){return`0x${(typeof t=="string"?parseInt(t,10):t).toString(16)}`}let ul={instance:null,module:null},s4=null;async function r4(){try{if(window.Go)console.log("wasm_exec.js already loaded");else{console.log("Loading wasm_exec.js...");const a=["/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.21.0/misc/wasm/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.20.0/misc/wasm/wasm_exec.js","https://unpkg.com/@go-wasm/wasm_exec@latest/wasm_exec.js"];let l=!1,c=null;for(const u of a)try{console.log(`Trying to load wasm_exec.js from: ${u}`),await new Promise((d,f)=>{const g=document.createElement("script");g.src=u,g.async=!0,g.onload=()=>{console.log(`Successfully loaded wasm_exec.js from: ${u}`),d()},g.onerror=()=>{f(new Error(`Failed to load from ${u}`))},document.head.appendChild(g)}),l=!0;break}catch(d){console.warn(`Failed to load from ${u}:`,d==null?void 0:d.message),c=d,document.head.querySelectorAll(`script[src="${u}"]`).forEach(g=>g.remove())}if(!l)throw new Error(`Failed to load wasm_exec.js from all sources. Last error: ${(c==null?void 0:c.message)||"Unknown error"}. Please ensure wasm_exec.js is available. You can download it from: https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.js`);console.log("wasm_exec.js loaded successfully")}const t=window.Go;if(!t)throw new Error("Go runtime not available. Make sure wasm_exec.js is loaded.");console.log("Go runtime available");const e=new t;s4=e,console.log("Go instance created");const n="/morm_signer.wasm";console.log("Loading WASM from:",n);let s;try{const a=await fetch(n);if(console.log("WASM fetch response:",{status:a.status,statusText:a.statusText,ok:a.ok,url:a.url}),!a.ok){const l=await a.text().catch(()=>"Unable to read error response");throw new Error(`Failed to load WASM from ${n}: ${a.status} ${a.statusText}. Make sure the morm_signer.wasm file is available in the public directory.`)}s=await a.arrayBuffer(),console.log("WASM file loaded successfully, size:",s.byteLength,"bytes")}catch(a){throw console.error("WASM fetch failed:",a),new Error(`Failed to fetch WASM file: ${(a==null?void 0:a.message)||a}. The file should be accessible at ${window.location.origin}${n}`)}console.log("Instantiating WASM module...");let r;try{r=await WebAssembly.instantiate(s,e.importObject),console.log("WASM module instantiated successfully")}catch(a){throw console.error("Failed to instantiate WASM:",a),new Error(`Failed to instantiate WASM module: ${(a==null?void 0:a.message)||a}. The WASM file may be corrupted or incompatible.`)}ul.instance=r.instance,ul.module=r.module,console.log("Running Go program..."),console.log("Window object before Go run:",Object.keys(window).filter(a=>typeof window[a]=="function"&&(a.startsWith("morm")||a.startsWith("derive")||a.startsWith("generate")||a==="Go")));try{e.run(ul.instance),console.log("Go program started (run() completed)")}catch(a){throw console.error("Failed to run Go program:",a),new Error(`Failed to run Go program: ${(a==null?void 0:a.message)||a}. The WASM module may not be compatible with the current Go runtime.`)}console.log("Waiting for Go initialization and function exports...");const i=10;let o=[];for(let a=1;a<=i;a++){const l=Math.min(a*200,2e3);await new Promise(u=>setTimeout(u,l));const c=Object.keys(window).filter(u=>typeof window[u]=="function");if(o=c.filter(u=>u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u.startsWith("verify")||u.startsWith("map")||u.startsWith("validate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"),console.log(`Attempt ${a}/${i}:`,{waitTime:`${l}ms`,allWindowFunctions:c.length,exportedFunctions:o,sampleWindowKeys:c.slice(0,20)}),o.length>0){console.log(" Go functions found!",o);break}a===i&&(console.warn(" No expected functions found. All window functions:",c.sort()),console.warn(" Check if functions are exported with different names or if there are Go runtime errors"))}if(o.length===0){const a=[],l=Object.keys(window);if(console.error("Debugging info:",{totalWindowKeys:l.length,allFunctions:l.filter(c=>typeof window[c]=="function"),hasGo:typeof window.Go=="function",wasmInstance:ul.instance!==null,wasmModule:ul.module!==null}),typeof window.InitWASMSigner=="function"){console.log("Found InitWASMSigner function, calling it...");try{window.InitWASMSigner(),await new Promise(u=>setTimeout(u,500));const c=Object.keys(window).filter(u=>typeof window[u]=="function"&&(u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"));c.length>0&&(console.log(" Functions found after InitWASMSigner!",c),o=c)}catch(c){console.error("Failed to call InitWASMSigner:",c)}}if(o.length===0)throw new Error(`Go functions not exported after initialization.

ROOT CAUSE: The Go main() function in main_wasm.go does not call InitWASMSigner(), which is required to export functions via js.Global().Set().

SOLUTION: The Go code needs to be fixed. In main_wasm.go, the main() function should call:
  InitWASMSigner(CreateTestnetDomain()) // or appropriate domain

Current status:
- WASM file loaded: 
- Go runtime loaded: ${typeof window.Go=="function"?"":""}
- Go program run: 
- Functions exported: 

Check the browser console for detailed debugging information.`)}return console.log("WASM module loaded and initialized successfully"),!0}catch(t){throw console.error("Failed to load WASM module:",t),new Error((t==null?void 0:t.message)||`Failed to load WASM module: ${String(t)}`)}}class i4{constructor(){ne(this,"isInitialized",!1);ne(this,"wasmLoaded",!1)}async initialize(){try{return this.wasmLoaded=await r4(),this.isInitialized=this.wasmLoaded,this.wasmLoaded}catch(e){throw console.error("Failed to initialize MormSigner:",e),new Error((e==null?void 0:e.message)||"Failed to initialize WASM module")}}isReady(){return this.isInitialized&&this.wasmLoaded&&typeof window.mormGenerateEthereumKeypair=="function"&&typeof window.GenerateSingleSignature=="function"&&typeof window.GenerateMultisignSignatures=="function"&&typeof window.GetSupportedSignatureTypes=="function"&&typeof window.IsSignatureTypeSupported=="function"}async generateAddress(e,n=0){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=window.deriveAddress(e,n);return typeof s=="string"?{success:!0,address:s,index:n,mnemonic:e.substring(0,20)+"..."}:s&&s.error?{success:!1,error:s.error}:{success:!1,error:"Failed to derive address"}}catch(s){return console.error("Failed to generate address:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async generateMnemonic(e=12){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.generateMnemonic(e);return typeof n=="string"?{success:!0,mnemonic:n}:n&&n.error?{success:!1,error:n.error}:{success:!1,error:"Failed to generate mnemonic"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async generateKeypair(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const e=window.mormGenerateEthereumKeypair();return e.error?{success:!1,error:e.error}:{success:!0,privateKey:e.privateKey,address:e.address}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async signMessage(e,n,s={}){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=(s.useEIP712,"ECDSA_LEGACY"),i=window.generateSignature(r,e,n);return typeof i=="string"?{success:!0,signature:i,message:n,options:s}:i&&i.error?{success:!1,error:i.error}:{success:!1,error:"Failed to generate signature"}}catch(r){return console.error("Failed to sign message:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async signDeposit(e,n,s,r={}){const i={...r,depositMode:!0,walletAddress:n,amount:s},o=JSON.stringify({action:"deposit",owner:n,amount:s,nonce:r.nonce||Date.now(),deadline:r.deadline||Date.now()+36e5}),a=await this.signMessage(e,o,i);return{success:a.success,signature:a.signature,message:a.message,address:n,options:a.options,error:a.error}}async signEIP712(e,n,s={}){const r={...s,useEIP712:!0};return this.signMessage(e,n,r)}async prepareAgentSign(e){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.mormPrepareAgentSign(e.owner,e.agent,e.expiresInDays,e.permissions,e.nonce);return n&&n.error?{success:!1,error:n.error}:{success:!0,typedData:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async signAgentApproval(e,n){const s=await this.prepareAgentSign(n);if(!s.success||!s.typedData)return s;const r=JSON.stringify({action:"agent::approve",wallet:n.owner,agent:n.agent,agentName:n.agentName||"",expiresInDays:n.expiresInDays,permissions:n.permissions,nonce:n.nonce,deadline:Date.now()+n.expiresInDays*24*60*60*1e3}),i=await this.signMessage(e,r,{useEIP712:!0});return i.success?{success:!0,typedData:s.typedData,signature:i.signature}:{success:!1,error:i.error}}async verifySignature(e,n,s){if(!this.isReady())throw new Error("MormSigner not initialized");try{const r=window.verifySignature(e,n,s);return typeof r=="boolean"?r:!1}catch(r){return console.error("Failed to verify signature:",r),!1}}mapAlgorithm(e){if(!this.isReady())return"ECDSA_LEGACY";try{return window.mapAlgorithm(e)}catch(n){return console.error("Failed to map algorithm:",n),"ECDSA_LEGACY"}}validateNonce(e,n){if(!this.isReady())return!1;try{return window.validateNonce(e,n)}catch(s){return console.error("Failed to validate nonce:",s),!1}}getStatus(){return{initialized:this.isInitialized,wasmLoaded:this.wasmLoaded,ready:this.isReady()}}async generateSingleSignature(e,n,s){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateSingleSignature(e,n,s);return r.error?{success:!1,error:r.error}:{success:!0,signature:r.signature}}catch(r){return console.error("Failed to generate single signature:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async generateMultisignSignatures(e,n,s=!1){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateMultisignSignatures(e,n,s);if(r.error)return{success:!1,error:r.error};let i=null;if(r.tx)try{i=JSON.parse(r.tx)}catch(o){console.warn("Failed to parse updated transaction JSON:",o)}return{success:!0,tx:i,txJSON:r.tx}}catch(r){return console.error("Failed to generate multisign signatures:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}getSupportedSignatureTypes(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{return{success:!0,types:window.GetSupportedSignatureTypes()}}catch(e){return console.error("Failed to get supported signature types:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}isSignatureTypeSupported(e){if(!this.isReady())return!1;try{return window.IsSignatureTypeSupported(e)}catch(n){return console.error("Failed to check signature type support:",n),!1}}}const Re=new i4,jk="6.16.0";async function Xm(t){const e=Object.keys(t);return(await Promise.all(e.map(s=>Promise.resolve(t[s])))).reduce((s,r,i)=>(s[e[i]]=r,s),{})}function $n(t,e,n){for(let s in e){let r=e[s];Object.defineProperty(t,s,{enumerable:!0,value:r,writable:!1})}}function No(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>No(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let s="0x";for(let r=0;r<t.length;r++)s+=n[t[r]>>4],s+=n[t[r]&15];return s}if(typeof t=="object"&&typeof t.toJSON=="function")return No(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(s=>`${No(s,e)}: ${No(t[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function o4(t,e,n){let s=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${No(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+No(a))}}i.push(`code=${e}`),i.push(`version=${jk}`),i.length&&(t+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(t);break;default:r=new Error(t)}return $n(r,{code:e}),n&&Object.assign(r,n),r.shortMessage==null&&$n(r,{shortMessage:s}),r}function Ye(t,e,n,s){if(!t)throw o4(e,n,s)}function Z(t,e,n,s){Ye(t,e,"INVALID_ARGUMENT",{argument:n,value:s})}const a4=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function Fk(t){Ye(a4.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function Qh(t,e,n){if(n==null&&(n=""),t!==e){let s=n,r="new";n&&(s+=".",r+=" "+n),Ye(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function zk(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const s=new Uint8Array((t.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(t.substring(r,r+2),16),r+=2;return s}Z(!1,"invalid BytesLike value",e||"value",t)}function xe(t,e){return zk(t,e,!1)}function So(t,e){return zk(t,e,!0)}function Ks(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function Jh(t){return Ks(t,!0)||t instanceof Uint8Array}const Sy="0123456789abcdef";function pe(t){const e=xe(t);let n="0x";for(let s=0;s<e.length;s++){const r=e[s];n+=Sy[(r&240)>>4]+Sy[r&15]}return n}function Mt(t){return"0x"+t.map(e=>pe(e).substring(2)).join("")}function Zl(t){return Ks(t,!0)?(t.length-2)/2:xe(t).length}function Qm(t,e,n){const s=xe(t);return n>s.length&&Ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),pe(s.slice(e,n))}function l4(t,e,n){const s=xe(t);Ye(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),r.set(s,e-s.length),pe(r)}function li(t,e){return l4(t,e)}const Zh=BigInt(0),Pi=BigInt(1),Lo=9007199254740991;function c4(t,e){let n=ut(t,"value");const s=BigInt(Un(e,"width")),r=Pi<<s-Pi;if(n<Zh){n=-n,Ye(n<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Pi<<s)-Pi;return(~n&i)+Pi}else Ye(n<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function u4(t,e){const n=Jm(t,"value"),s=BigInt(Un(e,"bits"));return n&(Pi<<s)-Pi}function ut(t,e){switch(typeof t){case"bigint":return t;case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-Lo&&t<=Lo,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Z(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Z(!1,"invalid BigNumberish value",e||"value",t)}function Jm(t,e){const n=ut(t,e);return Ye(n>=Zh,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const ky="0123456789abcdef";function Bk(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=ky[n>>4],e+=ky[n&15];return BigInt(e)}return ut(t)}function Un(t,e){switch(typeof t){case"bigint":return Z(t>=-Lo&&t<=Lo,"overflow",e||"value",t),Number(t);case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-Lo&&t<=Lo,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Un(BigInt(t),e)}catch(n){Z(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Z(!1,"invalid numeric value",e||"value",t)}function Ea(t,e){const n=Jm(t,"value");let s=n.toString(16);{const r=Un(e,"width");if(r===0&&n===Zh)return"0x";for(Ye(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});s.length<r*2;)s="0"+s}return"0x"+s}function It(t,e){const n=Jm(t,"value");if(n===Zh)return new Uint8Array(0);let s=n.toString(16);s.length%2&&(s="0"+s);const r=new Uint8Array(s.length/2);for(let i=0;i<r.length;i++){const o=i*2;r[i]=parseInt(s.substring(o,o+2),16)}return r}function d4(t){let e=pe(Jh(t)?t:It(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const lh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let Au=null;function h4(t){if(Au==null){Au={};for(let n=0;n<lh.length;n++)Au[lh[n]]=BigInt(n)}const e=Au[t];return Z(e!=null,"invalid base58 value","letter",t),e}const f4=BigInt(0),fg=BigInt(58);function p4(t){const e=xe(t);let n=Bk(e),s="";for(;n;)s=lh[Number(n%fg)]+s,n/=fg;for(let r=0;r<e.length&&!e[r];r++)s=lh[0]+s;return s}function g4(t){let e=f4;for(let n=0;n<t.length;n++)e*=fg,e+=h4(t[n]);return e}function Ui(t,e){Z(typeof t=="string","invalid string value","str",t),e!=null&&(Fk(e),t=t.normalize(e));let n=[];for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(r&63|128);else if((r&64512)==55296){s++;const i=t.charCodeAt(s);Z(s<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((r&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(r&63|128)}return new Uint8Array(n)}function m4(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Cy(t,e,n){let s=0;for(let r=0;r<n;r++)s=s*256+t[e+r];return s}function _y(t,e,n,s){const r=[];for(;n<e+1+s;){const i=$k(t,n);r.push(i.result),n+=i.consumed,Ye(n<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:t,length:s,offset:e})}return{consumed:1+s,result:r}}function $k(t,e){Ye(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=s=>{Ye(s<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:s})};if(t[e]>=248){const s=t[e]-247;n(e+1+s);const r=Cy(t,e+1,s);return n(e+1+s+r),_y(t,e,e+1+s,s+r)}else if(t[e]>=192){const s=t[e]-192;return n(e+1+s),_y(t,e,e+1,s)}else if(t[e]>=184){const s=t[e]-183;n(e+1+s);const r=Cy(t,e+1,s);n(e+1+s+r);const i=pe(t.slice(e+1+s,e+1+s+r));return{consumed:1+s+r,result:i}}else if(t[e]>=128){const s=t[e]-128;n(e+1+s);const r=pe(t.slice(e+1,e+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:m4(t[e])}}function Kc(t){const e=xe(t,"data"),n=$k(e,0);return Z(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Ey(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Uk(t){if(Array.isArray(t)){let s=[];if(t.forEach(function(i){s=s.concat(Uk(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=Ey(s.length);return r.unshift(247+r.length),r.concat(s)}const e=Array.prototype.slice.call(xe(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Ey(e.length);return n.unshift(183+n.length),n.concat(e)}const Py="0123456789abcdef";function fr(t){let e="0x";for(const n of Uk(t))e+=Py[n>>4],e+=Py[n&15];return e}function x4(t){const e=xe(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=pe(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}function Fn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Zm(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Wk(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Fn(t.outputLen),Fn(t.blockLen)}function Pa(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Hk(t,e){Zm(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const h0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vk=t=>t instanceof Uint8Array,Cd=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),_d=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Rs=(t,e)=>t<<32-e|t>>>e,b4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!b4)throw new Error("Non little-endian hardware is not supported");const y4=async()=>{};async function Ty(t,e,n){let s=Date.now();for(let r=0;r<t;r++){n(r);const i=Date.now()-s;i>=0&&i<e||(await y4(),s+=i)}}function v4(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ta(t){if(typeof t=="string"&&(t=v4(t)),!Vk(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function w4(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!Vk(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}class ex{clone(){return this._cloneInto()}}const S4={}.toString;function Yk(t,e){if(e!==void 0&&S4.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function ef(t){const e=s=>t().update(Ta(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function k4(t=32){if(h0&&typeof h0.getRandomValues=="function")return h0.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Gk extends ex{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Wk(e);const s=Ta(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Pa(this),this.iHash.update(e),this}digestInto(e){Pa(this),Zm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const tf=(t,e,n)=>new Gk(t,e).update(n).digest();tf.create=(t,e)=>new Gk(t,e);function C4(t,e,n,s){Wk(t);const r=Yk({dkLen:32,asyncTick:10},s),{c:i,dkLen:o,asyncTick:a}=r;if(Fn(i),Fn(o),Fn(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Ta(e),c=Ta(n),u=new Uint8Array(o),d=tf.create(t,l),f=d._cloneInto().update(c);return{c:i,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:f}}function _4(t,e,n,s,r){return t.destroy(),e.destroy(),s&&s.destroy(),r.fill(0),n}function tx(t,e,n,s){const{c:r,dkLen:i,DK:o,PRF:a,PRFSalt:l}=C4(t,e,n,s);let c;const u=new Uint8Array(4),d=_d(u),f=new Uint8Array(a.outputLen);for(let g=1,m=0;m<i;g++,m+=a.outputLen){const b=o.subarray(m,m+a.outputLen);d.setInt32(0,g,!1),(c=l._cloneInto(c)).update(u).digestInto(f),b.set(f.subarray(0,b.length));for(let w=1;w<r;w++){a._cloneInto(c).update(f).digestInto(f);for(let p=0;p<b.length;p++)b[p]^=f[p]}}return _4(a,l,o,c,f)}function E4(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),l=s?4:0,c=s?0:4;t.setUint32(e+l,o,s),t.setUint32(e+c,a,s)}class nx extends ex{constructor(e,n,s,r){super(),this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_d(this.buffer)}update(e){Pa(this);const{view:n,buffer:s,blockLen:r}=this;e=Ta(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const l=_d(e);for(;r<=i-o;o+=r)this.process(l,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Pa(this),Hk(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let d=o;d<r;d++)n[d]=0;E4(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=_d(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%n&&e.buffer.set(s),e}}const P4=(t,e,n)=>t&e^~t&n,T4=(t,e,n)=>t&e^t&n^e&n,I4=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),kr=new Uint32Array(64);class M4 extends nx{constructor(){super(64,32,8,!1),this.A=Sr[0]|0,this.B=Sr[1]|0,this.C=Sr[2]|0,this.D=Sr[3]|0,this.E=Sr[4]|0,this.F=Sr[5]|0,this.G=Sr[6]|0,this.H=Sr[7]|0}get(){const{A:e,B:n,C:s,D:r,E:i,F:o,G:a,H:l}=this;return[e,n,s,r,i,o,a,l]}set(e,n,s,r,i,o,a,l){this.A=e|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let d=0;d<16;d++,n+=4)kr[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=kr[d-15],g=kr[d-2],m=Rs(f,7)^Rs(f,18)^f>>>3,b=Rs(g,17)^Rs(g,19)^g>>>10;kr[d]=b+kr[d-7]+m+kr[d-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const f=Rs(a,6)^Rs(a,11)^Rs(a,25),g=u+f+P4(a,l,c)+I4[d]+kr[d]|0,b=(Rs(s,2)^Rs(s,13)^Rs(s,22))+T4(s,r,i)|0;u=c,c=l,l=a,a=o+g|0,o=i,i=r,r=s,s=g+b|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(s,r,i,o,a,l,c,u)}roundClean(){kr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Va=ef(()=>new M4),Du=BigInt(2**32-1),pg=BigInt(32);function Kk(t,e=!1){return e?{h:Number(t&Du),l:Number(t>>pg&Du)}:{h:Number(t>>pg&Du)|0,l:Number(t&Du)|0}}function qk(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let r=0;r<t.length;r++){const{h:i,l:o}=Kk(t[r],e);[n[r],s[r]]=[i,o]}return[n,s]}const R4=(t,e)=>BigInt(t>>>0)<<pg|BigInt(e>>>0),O4=(t,e,n)=>t>>>n,A4=(t,e,n)=>t<<32-n|e>>>n,D4=(t,e,n)=>t>>>n|e<<32-n,N4=(t,e,n)=>t<<32-n|e>>>n,L4=(t,e,n)=>t<<64-n|e>>>n-32,j4=(t,e,n)=>t>>>n-32|e<<64-n,F4=(t,e)=>e,z4=(t,e)=>t,Xk=(t,e,n)=>t<<n|e>>>32-n,Qk=(t,e,n)=>e<<n|t>>>32-n,Jk=(t,e,n)=>e<<n-32|t>>>64-n,Zk=(t,e,n)=>t<<n-32|e>>>64-n;function B4(t,e,n,s){const r=(e>>>0)+(s>>>0);return{h:t+n+(r/2**32|0)|0,l:r|0}}const $4=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),U4=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,W4=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),H4=(t,e,n,s,r)=>e+n+s+r+(t/2**32|0)|0,V4=(t,e,n,s,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(r>>>0),Y4=(t,e,n,s,r,i)=>e+n+s+r+i+(t/2**32|0)|0,De={fromBig:Kk,split:qk,toBig:R4,shrSH:O4,shrSL:A4,rotrSH:D4,rotrSL:N4,rotrBH:L4,rotrBL:j4,rotr32H:F4,rotr32L:z4,rotlSH:Xk,rotlSL:Qk,rotlBH:Jk,rotlBL:Zk,add:B4,add3L:$4,add3H:U4,add4L:W4,add4H:H4,add5H:Y4,add5L:V4},[G4,K4]=De.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Cr=new Uint32Array(80),_r=new Uint32Array(80);class q4 extends nx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:f,Gh:g,Gl:m,Hh:b,Hl:w}=this;return[e,n,s,r,i,o,a,l,c,u,d,f,g,m,b,w]}set(e,n,s,r,i,o,a,l,c,u,d,f,g,m,b,w){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=g|0,this.Gl=m|0,this.Hh=b|0,this.Hl=w|0}process(e,n){for(let x=0;x<16;x++,n+=4)Cr[x]=e.getUint32(n),_r[x]=e.getUint32(n+=4);for(let x=16;x<80;x++){const v=Cr[x-15]|0,k=_r[x-15]|0,C=De.rotrSH(v,k,1)^De.rotrSH(v,k,8)^De.shrSH(v,k,7),E=De.rotrSL(v,k,1)^De.rotrSL(v,k,8)^De.shrSL(v,k,7),T=Cr[x-2]|0,P=_r[x-2]|0,_=De.rotrSH(T,P,19)^De.rotrBH(T,P,61)^De.shrSH(T,P,6),D=De.rotrSL(T,P,19)^De.rotrBL(T,P,61)^De.shrSL(T,P,6),A=De.add4L(E,D,_r[x-7],_r[x-16]),W=De.add4H(A,C,_,Cr[x-7],Cr[x-16]);Cr[x]=W|0,_r[x]=A|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:f,Fh:g,Fl:m,Gh:b,Gl:w,Hh:p,Hl:y}=this;for(let x=0;x<80;x++){const v=De.rotrSH(d,f,14)^De.rotrSH(d,f,18)^De.rotrBH(d,f,41),k=De.rotrSL(d,f,14)^De.rotrSL(d,f,18)^De.rotrBL(d,f,41),C=d&g^~d&b,E=f&m^~f&w,T=De.add5L(y,k,E,K4[x],_r[x]),P=De.add5H(T,p,v,C,G4[x],Cr[x]),_=T|0,D=De.rotrSH(s,r,28)^De.rotrBH(s,r,34)^De.rotrBH(s,r,39),A=De.rotrSL(s,r,28)^De.rotrBL(s,r,34)^De.rotrBL(s,r,39),W=s&i^s&a^i&a,H=r&o^r&l^o&l;p=b|0,y=w|0,b=g|0,w=m|0,g=d|0,m=f|0,{h:d,l:f}=De.add(c|0,u|0,P|0,_|0),c=a|0,u=l|0,a=i|0,l=o|0,i=s|0,o=r|0;const O=De.add3L(_,A,H);s=De.add3H(O,P,D,W),r=O|0}({h:s,l:r}=De.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=De.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=De.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=De.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:d,l:f}=De.add(this.Eh|0,this.El|0,d|0,f|0),{h:g,l:m}=De.add(this.Fh|0,this.Fl|0,g|0,m|0),{h:b,l:w}=De.add(this.Gh|0,this.Gl|0,b|0,w|0),{h:p,l:y}=De.add(this.Hh|0,this.Hl|0,p|0,y|0),this.set(s,r,i,o,a,l,c,u,d,f,g,m,b,w,p,y)}roundClean(){Cr.fill(0),_r.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sx=ef(()=>new q4);function X4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Iy=X4(),My=Iy.crypto||Iy.msCrypto;function Q4(t){switch(t){case"sha256":return Va.create();case"sha512":return sx.create()}Z(!1,"invalid hashing algorithm name","algorithm",t)}function J4(t,e){const n={sha256:Va,sha512:sx}[t];return Z(n!=null,"invalid hmac algorithm","algorithm",t),tf.create(n,e)}function Z4(t,e,n,s,r){const i={sha256:Va,sha512:sx}[r];return Z(i!=null,"invalid pbkdf2 algorithm","algorithm",r),tx(i,t,e,{c:n,dkLen:s})}function eT(t){Ye(My!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),Z(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return My.getRandomValues(e),e}let eC=!1;const tC=function(t,e,n){return J4(t,e).update(n).digest()};let nC=tC;function Ya(t,e,n){const s=xe(e,"key"),r=xe(n,"data");return pe(nC(t,s,r))}Ya._=tC;Ya.lock=function(){eC=!0};Ya.register=function(t){if(eC)throw new Error("computeHmac is locked");nC=t};Object.freeze(Ya);const[sC,rC,iC]=[[],[],[]],tT=BigInt(0),dl=BigInt(1),nT=BigInt(2),sT=BigInt(7),rT=BigInt(256),iT=BigInt(113);for(let t=0,e=dl,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],sC.push(2*(5*s+n)),rC.push((t+1)*(t+2)/2%64);let r=tT;for(let i=0;i<7;i++)e=(e<<dl^(e>>sT)*iT)%rT,e&nT&&(r^=dl<<(dl<<BigInt(i))-dl);iC.push(r)}const[oT,aT]=qk(iC,!0),Ry=(t,e,n)=>n>32?Jk(t,e,n):Xk(t,e,n),Oy=(t,e,n)=>n>32?Zk(t,e,n):Qk(t,e,n);function lT(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],d=Ry(c,u,1)^n[a],f=Oy(c,u,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=d,t[o+g+1]^=f}let r=t[2],i=t[3];for(let o=0;o<24;o++){const a=rC[o],l=Ry(r,i,a),c=Oy(r,i,a),u=sC[o];r=t[u],i=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=oT[s],t[1]^=aT[s]}n.fill(0)}class rx extends ex{constructor(e,n,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Fn(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Cd(this.state)}keccak(){lT(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Pa(this);const{blockLen:n,state:s}=this;e=Ta(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:r}=this;e[s]^=n,n&128&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Pa(this,!1),Zm(e),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(n.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Fn(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Hk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new rx(n,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const cT=(t,e,n)=>ef(()=>new rx(e,t,n)),uT=cT(1,136,256/8);let oC=!1;const aC=function(t){return uT(t)};let lC=aC;function $t(t){const e=xe(t,"data");return pe(lC(e))}$t._=aC;$t.lock=function(){oC=!0};$t.register=function(t){if(oC)throw new TypeError("keccak256 is locked");lC=t};Object.freeze($t);const dT=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),cC=Uint8Array.from({length:16},(t,e)=>e),hT=cC.map(t=>(9*t+5)%16);let ix=[cC],ox=[hT];for(let t=0;t<4;t++)for(let e of[ix,ox])e.push(e[t].map(n=>dT[n]));const uC=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),fT=ix.map((t,e)=>t.map(n=>uC[e][n])),pT=ox.map((t,e)=>t.map(n=>uC[e][n])),gT=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),mT=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Nu=(t,e)=>t<<e|t>>>32-e;function Ay(t,e,n,s){return t===0?e^n^s:t===1?e&n|~e&s:t===2?(e|~n)^s:t===3?e&s|n&~s:e^(n|~s)}const Lu=new Uint32Array(16);class xT extends nx{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:s,h3:r,h4:i}=this;return[e,n,s,r,i]}set(e,n,s,r,i){this.h0=e|0,this.h1=n|0,this.h2=s|0,this.h3=r|0,this.h4=i|0}process(e,n){for(let g=0;g<16;g++,n+=4)Lu[g]=e.getUint32(n,!0);let s=this.h0|0,r=s,i=this.h1|0,o=i,a=this.h2|0,l=a,c=this.h3|0,u=c,d=this.h4|0,f=d;for(let g=0;g<5;g++){const m=4-g,b=gT[g],w=mT[g],p=ix[g],y=ox[g],x=fT[g],v=pT[g];for(let k=0;k<16;k++){const C=Nu(s+Ay(g,i,a,c)+Lu[p[k]]+b,x[k])+d|0;s=d,d=c,c=Nu(a,10)|0,a=i,i=C}for(let k=0;k<16;k++){const C=Nu(r+Ay(m,o,l,u)+Lu[y[k]]+w,v[k])+f|0;r=f,f=u,u=Nu(l,10)|0,l=o,o=C}}this.set(this.h1+a+u|0,this.h2+c+f|0,this.h3+d+r|0,this.h4+s+o|0,this.h0+i+l|0)}roundClean(){Lu.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const bT=ef(()=>new xT);let dC=!1;const hC=function(t){return bT(t)};let fC=hC;function Ga(t){const e=xe(t,"data");return pe(fC(e))}Ga._=hC;Ga.lock=function(){dC=!0};Ga.register=function(t){if(dC)throw new TypeError("ripemd160 is locked");fC=t};Object.freeze(Ga);let pC=!1;const gC=function(t,e,n,s,r){return Z4(t,e,n,s,r)};let mC=gC;function qc(t,e,n,s,r){const i=xe(t,"password"),o=xe(e,"salt");return pe(mC(i,o,n,s,r))}qc._=gC;qc.lock=function(){pC=!0};qc.register=function(t){if(pC)throw new Error("pbkdf2 is locked");mC=t};Object.freeze(qc);let xC=!1;const bC=function(t){return new Uint8Array(eT(t))};let yC=bC;function pr(t){return yC(t)}pr._=bC;pr.lock=function(){xC=!0};pr.register=function(t){if(xC)throw new Error("randomBytes is locked");yC=t};Object.freeze(pr);const qe=(t,e)=>t<<e|t>>>32-e;function Dy(t,e,n,s,r,i){let o=t[e++]^n[s++],a=t[e++]^n[s++],l=t[e++]^n[s++],c=t[e++]^n[s++],u=t[e++]^n[s++],d=t[e++]^n[s++],f=t[e++]^n[s++],g=t[e++]^n[s++],m=t[e++]^n[s++],b=t[e++]^n[s++],w=t[e++]^n[s++],p=t[e++]^n[s++],y=t[e++]^n[s++],x=t[e++]^n[s++],v=t[e++]^n[s++],k=t[e++]^n[s++],C=o,E=a,T=l,P=c,_=u,D=d,A=f,W=g,H=m,O=b,R=w,F=p,L=y,z=x,I=v,K=k;for(let j=0;j<8;j+=2)_^=qe(C+L|0,7),H^=qe(_+C|0,9),L^=qe(H+_|0,13),C^=qe(L+H|0,18),O^=qe(D+E|0,7),z^=qe(O+D|0,9),E^=qe(z+O|0,13),D^=qe(E+z|0,18),I^=qe(R+A|0,7),T^=qe(I+R|0,9),A^=qe(T+I|0,13),R^=qe(A+T|0,18),P^=qe(K+F|0,7),W^=qe(P+K|0,9),F^=qe(W+P|0,13),K^=qe(F+W|0,18),E^=qe(C+P|0,7),T^=qe(E+C|0,9),P^=qe(T+E|0,13),C^=qe(P+T|0,18),A^=qe(D+_|0,7),W^=qe(A+D|0,9),_^=qe(W+A|0,13),D^=qe(_+W|0,18),F^=qe(R+O|0,7),H^=qe(F+R|0,9),O^=qe(H+F|0,13),R^=qe(O+H|0,18),L^=qe(K+I|0,7),z^=qe(L+K|0,9),I^=qe(z+L|0,13),K^=qe(I+z|0,18);r[i++]=o+C|0,r[i++]=a+E|0,r[i++]=l+T|0,r[i++]=c+P|0,r[i++]=u+_|0,r[i++]=d+D|0,r[i++]=f+A|0,r[i++]=g+W|0,r[i++]=m+H|0,r[i++]=b+O|0,r[i++]=w+R|0,r[i++]=p+F|0,r[i++]=y+L|0,r[i++]=x+z|0,r[i++]=v+I|0,r[i++]=k+K|0}function Go(t,e,n,s,r){let i=s+0,o=s+16*r;for(let a=0;a<16;a++)n[o+a]=t[e+(2*r-1)*16+a];for(let a=0;a<r;a++,i+=16,e+=16)Dy(n,o,t,e,n,i),a>0&&(o+=16),Dy(n,i,t,e+=16,n,o)}function vC(t,e,n){const s=Yk({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:r,r:i,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=s;if(Fn(r),Fn(i),Fn(o),Fn(a),Fn(l),Fn(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const d=128*i,f=d/4;if(r<=1||r&r-1||r>=2**(d/8)||r>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=d*(r+o);if(g>c)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${c} (maxmem)`);const m=tx(Va,t,e,{c:1,dkLen:d*o}),b=Cd(m),w=Cd(new Uint8Array(d*r)),p=Cd(new Uint8Array(d));let y=()=>{};if(u){const x=2*r*o,v=Math.max(Math.floor(x/1e4),1);let k=0;y=()=>{k++,u&&(!(k%v)||k===x)&&u(k/x)}}return{N:r,r:i,p:o,dkLen:a,blockSize32:f,V:w,B32:b,B:m,tmp:p,blockMixCb:y,asyncTick:l}}function wC(t,e,n,s,r){const i=tx(Va,t,n,{c:1,dkLen:e});return n.fill(0),s.fill(0),r.fill(0),i}function yT(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f}=vC(t,e,n);for(let g=0;g<i;g++){const m=a*g;for(let b=0;b<a;b++)l[b]=c[m+b];for(let b=0,w=0;b<s-1;b++)Go(l,w,l,w+=a,r),f();Go(l,(s-1)*a,c,m,r),f();for(let b=0;b<s;b++){const w=c[m+a-16]%s;for(let p=0;p<a;p++)d[p]=c[m+p]^l[w*a+p];Go(d,0,c,m,r),f()}}return wC(t,o,u,l,d)}async function vT(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f,asyncTick:g}=vC(t,e,n);for(let m=0;m<i;m++){const b=a*m;for(let p=0;p<a;p++)l[p]=c[b+p];let w=0;await Ty(s-1,g,()=>{Go(l,w,l,w+=a,r),f()}),Go(l,(s-1)*a,c,b,r),f(),await Ty(s,g,()=>{const p=c[b+a-16]%s;for(let y=0;y<a;y++)d[y]=c[b+y]^l[p*a+y];Go(d,0,c,b,r),f()})}return wC(t,o,u,l,d)}let SC=!1,kC=!1;const CC=async function(t,e,n,s,r,i,o){return await vT(t,e,{N:n,r:s,p:r,dkLen:i,onProgress:o})},_C=function(t,e,n,s,r,i){return yT(t,e,{N:n,r:s,p:r,dkLen:i})};let EC=CC,PC=_C;async function Xc(t,e,n,s,r,i,o){const a=xe(t,"passwd"),l=xe(e,"salt");return pe(await EC(a,l,n,s,r,i,o))}Xc._=CC;Xc.lock=function(){kC=!0};Xc.register=function(t){if(kC)throw new Error("scrypt is locked");EC=t};Object.freeze(Xc);function Qc(t,e,n,s,r,i){const o=xe(t,"passwd"),a=xe(e,"salt");return pe(PC(o,a,n,s,r,i))}Qc._=_C;Qc.lock=function(){SC=!0};Qc.register=function(t){if(SC)throw new Error("scryptSync is locked");PC=t};Object.freeze(Qc);const TC=function(t){return Q4("sha256").update(t).digest()};let IC=TC,MC=!1;function fs(t){const e=xe(t,"data");return pe(IC(e))}fs._=TC;fs.lock=function(){MC=!0};fs.register=function(t){if(MC)throw new Error("sha256 is locked");IC=t};Object.freeze(fs);Object.freeze(fs);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const RC=BigInt(0),nf=BigInt(1),wT=BigInt(2),sf=t=>t instanceof Uint8Array,ST=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ia(t){if(!sf(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=ST[t[n]];return e}function OC(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function ax(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Ma(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let s=0;s<n.length;s++){const r=s*2,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[s]=o}return n}function Wi(t){return ax(Ia(t))}function lx(t){if(!sf(t))throw new Error("Uint8Array expected");return ax(Ia(Uint8Array.from(t).reverse()))}function Ra(t,e){return Ma(t.toString(16).padStart(e*2,"0"))}function cx(t,e){return Ra(t,e).reverse()}function kT(t){return Ma(OC(t))}function vs(t,e,n){let s;if(typeof e=="string")try{s=Ma(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(sf(e))s=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const r=s.length;if(typeof n=="number"&&r!==n)throw new Error(`${t} expected ${n} bytes, got ${r}`);return s}function Ec(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!sf(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}function CT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function _T(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function ET(t){let e;for(e=0;t>RC;t>>=nf,e+=1);return e}function PT(t,e){return t>>BigInt(e)&nf}const TT=(t,e,n)=>t|(n?nf:RC)<<BigInt(e),ux=t=>(wT<<BigInt(t-1))-nf,f0=t=>new Uint8Array(t),Ny=t=>Uint8Array.from(t);function AC(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let s=f0(t),r=f0(t),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...d)=>n(r,s,...d),l=(d=f0())=>{r=a(Ny([0]),d),s=a(),d.length!==0&&(r=a(Ny([1]),d),s=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){s=a();const g=s.slice();f.push(g),d+=s.length}return Ec(...f)};return(d,f)=>{o(),l(d);let g;for(;!(g=f(c()));)l();return o(),g}}const IT={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Jc(t,e,n={}){const s=(r,i,o)=>{const a=IT[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=t[r];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(e))s(r,i,!1);for(const[r,i]of Object.entries(n))s(r,i,!0);return t}const MT=Object.freeze(Object.defineProperty({__proto__:null,bitGet:PT,bitLen:ET,bitMask:ux,bitSet:TT,bytesToHex:Ia,bytesToNumberBE:Wi,bytesToNumberLE:lx,concatBytes:Ec,createHmacDrbg:AC,ensureBytes:vs,equalBytes:CT,hexToBytes:Ma,hexToNumber:ax,numberToBytesBE:Ra,numberToBytesLE:cx,numberToHexUnpadded:OC,numberToVarBytesBE:kT,utf8ToBytes:_T,validateObject:Jc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ut=BigInt(0),Tt=BigInt(1),Ti=BigInt(2),RT=BigInt(3),gg=BigInt(4),Ly=BigInt(5),jy=BigInt(8);BigInt(9);BigInt(16);function En(t,e){const n=t%e;return n>=Ut?n:e+n}function OT(t,e,n){if(n<=Ut||e<Ut)throw new Error("Expected power/modulo > 0");if(n===Tt)return Ut;let s=Tt;for(;e>Ut;)e&Tt&&(s=s*t%n),t=t*t%n,e>>=Tt;return s}function qn(t,e,n){let s=t;for(;e-- >Ut;)s*=s,s%=n;return s}function mg(t,e){if(t===Ut||e<=Ut)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=En(t,e),s=e,r=Ut,i=Tt;for(;n!==Ut;){const a=s/n,l=s%n,c=r-i*a;s=n,n=l,r=i,i=c}if(s!==Tt)throw new Error("invert: does not exist");return En(r,e)}function AT(t){const e=(t-Tt)/Ti;let n,s,r;for(n=t-Tt,s=0;n%Ti===Ut;n/=Ti,s++);for(r=Ti;r<t&&OT(r,e,t)!==t-Tt;r++);if(s===1){const o=(t+Tt)/gg;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+Tt)/Ti;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=s,u=a.pow(a.mul(a.ONE,r),n),d=a.pow(l,i),f=a.pow(l,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let g=1;for(let b=a.sqr(f);g<c&&!a.eql(b,a.ONE);g++)b=a.sqr(b);const m=a.pow(u,Tt<<BigInt(c-g-1));u=a.sqr(m),d=a.mul(d,m),f=a.mul(f,u),c=g}return d}}function DT(t){if(t%gg===RT){const e=(t+Tt)/gg;return function(s,r){const i=s.pow(r,e);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%jy===Ly){const e=(t-Ly)/jy;return function(s,r){const i=s.mul(r,Ti),o=s.pow(i,e),a=s.mul(r,o),l=s.mul(s.mul(a,Ti),o),c=s.mul(a,s.sub(l,s.ONE));if(!s.eql(s.sqr(c),r))throw new Error("Cannot find square root");return c}}return AT(t)}const NT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function LT(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=NT.reduce((s,r)=>(s[r]="function",s),e);return Jc(t,n)}function jT(t,e,n){if(n<Ut)throw new Error("Expected power > 0");if(n===Ut)return t.ONE;if(n===Tt)return e;let s=t.ONE,r=e;for(;n>Ut;)n&Tt&&(s=t.mul(s,r)),r=t.sqr(r),n>>=Tt;return s}function FT(t,e){const n=new Array(e.length),s=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),r=t.inv(s);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),r),n}function DC(t,e){const n=e!==void 0?e:t.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function zT(t,e,n=!1,s={}){if(t<=Ut)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:r,nByteLength:i}=DC(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=DT(t),a=Object.freeze({ORDER:t,BITS:r,BYTES:i,MASK:ux(r),ZERO:Ut,ONE:Tt,create:l=>En(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Ut<=l&&l<t},is0:l=>l===Ut,isOdd:l=>(l&Tt)===Tt,neg:l=>En(-l,t),eql:(l,c)=>l===c,sqr:l=>En(l*l,t),add:(l,c)=>En(l+c,t),sub:(l,c)=>En(l-c,t),mul:(l,c)=>En(l*c,t),pow:(l,c)=>jT(a,l,c),div:(l,c)=>En(l*mg(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>mg(l,t),sqrt:s.sqrt||(l=>o(a,l)),invertBatch:l=>FT(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?cx(l,i):Ra(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return n?lx(l):Wi(l)}});return Object.freeze(a)}function NC(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function LC(t){const e=NC(t);return e+Math.ceil(e/2)}function BT(t,e,n=!1){const s=t.length,r=NC(e),i=LC(e);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=n?Wi(t):lx(t),a=En(o,e-Tt)+Tt;return n?cx(a,r):Ra(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $T=BigInt(0),p0=BigInt(1);function UT(t,e){const n=(r,i)=>{const o=i.negate();return r?o:i},s=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(r,i){let o=t.ZERO,a=r;for(;i>$T;)i&p0&&(o=o.add(a)),a=a.double(),i>>=p0;return o},precomputeWindow(r,i){const{windows:o,windowSize:a}=s(i),l=[];let c=r,u=c;for(let d=0;d<o;d++){u=c,l.push(u);for(let f=1;f<a;f++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(r,i,o){const{windows:a,windowSize:l}=s(r);let c=t.ZERO,u=t.BASE;const d=BigInt(2**r-1),f=2**r,g=BigInt(r);for(let m=0;m<a;m++){const b=m*l;let w=Number(o&d);o>>=g,w>l&&(w-=f,o+=p0);const p=b,y=b+Math.abs(w)-1,x=m%2!==0,v=w<0;w===0?u=u.add(n(x,i[p])):c=c.add(n(v,i[y]))}return{p:c,f:u}},wNAFCached(r,i,o,a){const l=r._WINDOW_SIZE||1;let c=i.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&i.set(r,a(c))),this.wNAF(l,c,o)}}}function jC(t){return LT(t.Fp),Jc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...DC(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function WT(t){const e=jC(t);Jc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:r}=e;if(n){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:HT,hexToBytes:VT}=MT,Ai={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Ai;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],s=t.subarray(2,n+2);if(!n||s.length!==n)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:HT(s),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Ai,n=typeof t=="string"?VT(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let s=n.length;if(s<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=Ai._parseInt(n.subarray(2)),{d:o,l:a}=Ai._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},s=e(n(t.s)),r=e(n(t.r)),i=s.length/2,o=r.length/2,a=n(i),l=n(o);return`30${n(o+i+4)}02${l}${r}02${a}${s}`}},or=BigInt(0),ss=BigInt(1);BigInt(2);const Fy=BigInt(3);BigInt(4);function YT(t){const e=WT(t),{Fp:n}=e,s=e.toBytes||((m,b,w)=>{const p=b.toAffine();return Ec(Uint8Array.from([4]),n.toBytes(p.x),n.toBytes(p.y))}),r=e.fromBytes||(m=>{const b=m.subarray(1),w=n.fromBytes(b.subarray(0,n.BYTES)),p=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x:w,y:p}});function i(m){const{a:b,b:w}=e,p=n.sqr(m),y=n.mul(p,m);return n.add(n.add(y,n.mul(m,b)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&or<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(m){const{allowedPrivateKeyLengths:b,nByteLength:w,wrapPrivateKey:p,n:y}=e;if(b&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=Ia(m)),typeof m!="string"||!b.includes(m.length))throw new Error("Invalid key");m=m.padStart(w*2,"0")}let x;try{x=typeof m=="bigint"?m:Wi(vs("private key",m,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof m}`)}return p&&(x=En(x,y)),a(x),x}const c=new Map;function u(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(b,w,p){if(this.px=b,this.py=w,this.pz=p,b==null||!n.isValid(b))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(p==null||!n.isValid(p))throw new Error("z required")}static fromAffine(b){const{x:w,y:p}=b||{};if(!b||!n.isValid(w)||!n.isValid(p))throw new Error("invalid affine point");if(b instanceof d)throw new Error("projective point not allowed");const y=x=>n.eql(x,n.ZERO);return y(w)&&y(p)?d.ZERO:new d(w,p,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const w=n.invertBatch(b.map(p=>p.pz));return b.map((p,y)=>p.toAffine(w[y])).map(d.fromAffine)}static fromHex(b){const w=d.fromAffine(r(vs("pointHex",b)));return w.assertValidity(),w}static fromPrivateKey(b){return d.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:b,y:w}=this.toAffine();if(!n.isValid(b)||!n.isValid(w))throw new Error("bad point: x or y not FE");const p=n.sqr(w),y=i(b);if(!n.eql(p,y))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(n.isOdd)return!n.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){u(b);const{px:w,py:p,pz:y}=this,{px:x,py:v,pz:k}=b,C=n.eql(n.mul(w,k),n.mul(x,y)),E=n.eql(n.mul(p,k),n.mul(v,y));return C&&E}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:b,b:w}=e,p=n.mul(w,Fy),{px:y,py:x,pz:v}=this;let k=n.ZERO,C=n.ZERO,E=n.ZERO,T=n.mul(y,y),P=n.mul(x,x),_=n.mul(v,v),D=n.mul(y,x);return D=n.add(D,D),E=n.mul(y,v),E=n.add(E,E),k=n.mul(b,E),C=n.mul(p,_),C=n.add(k,C),k=n.sub(P,C),C=n.add(P,C),C=n.mul(k,C),k=n.mul(D,k),E=n.mul(p,E),_=n.mul(b,_),D=n.sub(T,_),D=n.mul(b,D),D=n.add(D,E),E=n.add(T,T),T=n.add(E,T),T=n.add(T,_),T=n.mul(T,D),C=n.add(C,T),_=n.mul(x,v),_=n.add(_,_),T=n.mul(_,D),k=n.sub(k,T),E=n.mul(_,P),E=n.add(E,E),E=n.add(E,E),new d(k,C,E)}add(b){u(b);const{px:w,py:p,pz:y}=this,{px:x,py:v,pz:k}=b;let C=n.ZERO,E=n.ZERO,T=n.ZERO;const P=e.a,_=n.mul(e.b,Fy);let D=n.mul(w,x),A=n.mul(p,v),W=n.mul(y,k),H=n.add(w,p),O=n.add(x,v);H=n.mul(H,O),O=n.add(D,A),H=n.sub(H,O),O=n.add(w,y);let R=n.add(x,k);return O=n.mul(O,R),R=n.add(D,W),O=n.sub(O,R),R=n.add(p,y),C=n.add(v,k),R=n.mul(R,C),C=n.add(A,W),R=n.sub(R,C),T=n.mul(P,O),C=n.mul(_,W),T=n.add(C,T),C=n.sub(A,T),T=n.add(A,T),E=n.mul(C,T),A=n.add(D,D),A=n.add(A,D),W=n.mul(P,W),O=n.mul(_,O),A=n.add(A,W),W=n.sub(D,W),W=n.mul(P,W),O=n.add(O,W),D=n.mul(A,O),E=n.add(E,D),D=n.mul(R,O),C=n.mul(H,C),C=n.sub(C,D),D=n.mul(H,A),T=n.mul(R,T),T=n.add(T,D),new d(C,E,T)}subtract(b){return this.add(b.negate())}is0(){return this.equals(d.ZERO)}wNAF(b){return g.wNAFCached(this,c,b,w=>{const p=n.invertBatch(w.map(y=>y.pz));return w.map((y,x)=>y.toAffine(p[x])).map(d.fromAffine)})}multiplyUnsafe(b){const w=d.ZERO;if(b===or)return w;if(a(b),b===ss)return this;const{endo:p}=e;if(!p)return g.unsafeLadder(this,b);let{k1neg:y,k1:x,k2neg:v,k2:k}=p.splitScalar(b),C=w,E=w,T=this;for(;x>or||k>or;)x&ss&&(C=C.add(T)),k&ss&&(E=E.add(T)),T=T.double(),x>>=ss,k>>=ss;return y&&(C=C.negate()),v&&(E=E.negate()),E=new d(n.mul(E.px,p.beta),E.py,E.pz),C.add(E)}multiply(b){a(b);let w=b,p,y;const{endo:x}=e;if(x){const{k1neg:v,k1:k,k2neg:C,k2:E}=x.splitScalar(w);let{p:T,f:P}=this.wNAF(k),{p:_,f:D}=this.wNAF(E);T=g.constTimeNegate(v,T),_=g.constTimeNegate(C,_),_=new d(n.mul(_.px,x.beta),_.py,_.pz),p=T.add(_),y=P.add(D)}else{const{p:v,f:k}=this.wNAF(w);p=v,y=k}return d.normalizeZ([p,y])[0]}multiplyAndAddUnsafe(b,w,p){const y=d.BASE,x=(k,C)=>C===or||C===ss||!k.equals(y)?k.multiplyUnsafe(C):k.multiply(C),v=x(this,w).add(x(b,p));return v.is0()?void 0:v}toAffine(b){const{px:w,py:p,pz:y}=this,x=this.is0();b==null&&(b=x?n.ONE:n.inv(y));const v=n.mul(w,b),k=n.mul(p,b),C=n.mul(y,b);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x:v,y:k}}isTorsionFree(){const{h:b,isTorsionFree:w}=e;if(b===ss)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:w}=e;return b===ss?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),s(d,this,b)}toHex(b=!0){return Ia(this.toRawBytes(b))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,g=UT(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function GT(t){const e=jC(t);return Jc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function KT(t){const e=GT(t),{Fp:n,n:s}=e,r=n.BYTES+1,i=2*n.BYTES+1;function o(O){return or<O&&O<n.ORDER}function a(O){return En(O,s)}function l(O){return mg(O,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:f}=YT({...e,toBytes(O,R,F){const L=R.toAffine(),z=n.toBytes(L.x),I=Ec;return F?I(Uint8Array.from([R.hasEvenY()?2:3]),z):I(Uint8Array.from([4]),z,n.toBytes(L.y))},fromBytes(O){const R=O.length,F=O[0],L=O.subarray(1);if(R===r&&(F===2||F===3)){const z=Wi(L);if(!o(z))throw new Error("Point is not on curve");const I=d(z);let K=n.sqrt(I);const j=(K&ss)===ss;return(F&1)===1!==j&&(K=n.neg(K)),{x:z,y:K}}else if(R===i&&F===4){const z=n.fromBytes(L.subarray(0,n.BYTES)),I=n.fromBytes(L.subarray(n.BYTES,2*n.BYTES));return{x:z,y:I}}else throw new Error(`Point of length ${R} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),g=O=>Ia(Ra(O,e.nByteLength));function m(O){const R=s>>ss;return O>R}function b(O){return m(O)?a(-O):O}const w=(O,R,F)=>Wi(O.slice(R,F));class p{constructor(R,F,L){this.r=R,this.s=F,this.recovery=L,this.assertValidity()}static fromCompact(R){const F=e.nByteLength;return R=vs("compactSignature",R,F*2),new p(w(R,0,F),w(R,F,2*F))}static fromDER(R){const{r:F,s:L}=Ai.toSig(vs("DER",R));return new p(F,L)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new p(this.r,this.s,R)}recoverPublicKey(R){const{r:F,s:L,recovery:z}=this,I=E(vs("msgHash",R));if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");const K=z===2||z===3?F+e.n:F;if(K>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const j=z&1?"03":"02",M=c.fromHex(j+g(K)),$=l(K),q=a(-I*$),X=a(L*$),G=c.BASE.multiplyAndAddUnsafe(M,q,X);if(!G)throw new Error("point at infinify");return G.assertValidity(),G}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ma(this.toDERHex())}toDERHex(){return Ai.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ma(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const y={isValidPrivateKey(O){try{return u(O),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const O=LC(e.n);return BT(e.randomBytes(O),e.n)},precompute(O=8,R=c.BASE){return R._setWindowSize(O),R.multiply(BigInt(3)),R}};function x(O,R=!0){return c.fromPrivateKey(O).toRawBytes(R)}function v(O){const R=O instanceof Uint8Array,F=typeof O=="string",L=(R||F)&&O.length;return R?L===r||L===i:F?L===2*r||L===2*i:O instanceof c}function k(O,R,F=!0){if(v(O))throw new Error("first arg must be private key");if(!v(R))throw new Error("second arg must be public key");return c.fromHex(R).multiply(u(O)).toRawBytes(F)}const C=e.bits2int||function(O){const R=Wi(O),F=O.length*8-e.nBitLength;return F>0?R>>BigInt(F):R},E=e.bits2int_modN||function(O){return a(C(O))},T=ux(e.nBitLength);function P(O){if(typeof O!="bigint")throw new Error("bigint expected");if(!(or<=O&&O<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ra(O,e.nByteLength)}function _(O,R,F=D){if(["recovered","canonical"].some(se=>se in F))throw new Error("sign() legacy options not supported");const{hash:L,randomBytes:z}=e;let{lowS:I,prehash:K,extraEntropy:j}=F;I==null&&(I=!0),O=vs("msgHash",O),K&&(O=vs("prehashed msgHash",L(O)));const M=E(O),$=u(R),q=[P($),P(M)];if(j!=null){const se=j===!0?z(n.BYTES):j;q.push(vs("extraEntropy",se))}const X=Ec(...q),G=M;function ee(se){const be=C(se);if(!f(be))return;const He=l(be),Pe=c.BASE.multiply(be).toAffine(),_e=a(Pe.x);if(_e===or)return;const Le=a(He*a(G+_e*$));if(Le===or)return;let wt=(Pe.x===_e?0:2)|Number(Pe.y&ss),N=Le;return I&&m(Le)&&(N=b(Le),wt^=1),new p(_e,N,wt)}return{seed:X,k2sig:ee}}const D={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};function W(O,R,F=D){const{seed:L,k2sig:z}=_(O,R,F),I=e;return AC(I.hash.outputLen,I.nByteLength,I.hmac)(L,z)}c.BASE._setWindowSize(8);function H(O,R,F,L=A){var Pe;const z=O;if(R=vs("msgHash",R),F=vs("publicKey",F),"strict"in L)throw new Error("options.strict was renamed to lowS");const{lowS:I,prehash:K}=L;let j,M;try{if(typeof z=="string"||z instanceof Uint8Array)try{j=p.fromDER(z)}catch(_e){if(!(_e instanceof Ai.Err))throw _e;j=p.fromCompact(z)}else if(typeof z=="object"&&typeof z.r=="bigint"&&typeof z.s=="bigint"){const{r:_e,s:Le}=z;j=new p(_e,Le)}else throw new Error("PARSE");M=c.fromHex(F)}catch(_e){if(_e.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(I&&j.hasHighS())return!1;K&&(R=e.hash(R));const{r:$,s:q}=j,X=E(R),G=l(q),ee=a(X*G),se=a($*G),be=(Pe=c.BASE.multiplyAndAddUnsafe(M,ee,se))==null?void 0:Pe.toAffine();return be?a(be.x)===$:!1}return{CURVE:e,getPublicKey:x,getSharedSecret:k,sign:W,verify:H,ProjectivePoint:c,Signature:p,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qT(t){return{hash:t,hmac:(e,...n)=>tf(t,e,w4(...n)),randomBytes:k4}}function XT(t,e){const n=s=>KT({...t,...qT(s)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const FC=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),zy=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),QT=BigInt(1),xg=BigInt(2),By=(t,e)=>(t+e/xg)/e;function JT(t){const e=FC,n=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,d=qn(u,n,e)*u%e,f=qn(d,n,e)*u%e,g=qn(f,xg,e)*c%e,m=qn(g,r,e)*g%e,b=qn(m,i,e)*m%e,w=qn(b,a,e)*b%e,p=qn(w,l,e)*w%e,y=qn(p,a,e)*b%e,x=qn(y,n,e)*u%e,v=qn(x,o,e)*m%e,k=qn(v,s,e)*c%e,C=qn(k,xg,e);if(!bg.eql(bg.sqr(C),t))throw new Error("Cannot find square root");return C}const bg=zT(FC,void 0,void 0,{sqrt:JT}),Rr=XT({a:BigInt(0),b:BigInt(7),Fp:bg,n:zy,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=zy,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-QT*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=By(i*t,e),l=By(-s*t,e);let c=En(t-a*n-l*r,e),u=En(-a*s-l*i,e);const d=c>o,f=u>o;if(d&&(c=e-c),f&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:f,k2:u}}}},Va);BigInt(0);Rr.ProjectivePoint;const zC="0x0000000000000000000000000000000000000000",$y="0x0000000000000000000000000000000000000000000000000000000000000000",ZT=`Ethereum Signed Message:
`,Uy=BigInt(0),Wy=BigInt(1),yg=BigInt(2),Hy=BigInt(27),Vy=BigInt(28),ju=BigInt(35),BC=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),e6=BC/yg,t6=Symbol.for("nodejs.util.inspect.custom"),gi={};function g0(t){return li(It(t),32)}var Zo,$s,ea,Br;const ts=class ts{constructor(e,n,s,r){Be(this,Zo);Be(this,$s);Be(this,ea);Be(this,Br);Qh(e,gi,"Signature"),me(this,Zo,n),me(this,$s,s),me(this,ea,r),me(this,Br,null)}get r(){return ke(this,Zo)}set r(e){Z(Zl(e)===32,"invalid r","value",e),me(this,Zo,pe(e))}get s(){return Z(parseInt(ke(this,$s).substring(0,3))<8,"non-canonical s; use ._s","s",ke(this,$s)),ke(this,$s)}set s(e){Z(Zl(e)===32,"invalid s","value",e),me(this,$s,pe(e))}get _s(){return ke(this,$s)}isValid(){return BigInt(ke(this,$s))<=e6}get v(){return ke(this,ea)}set v(e){const n=Un(e,"value");Z(n===27||n===28,"invalid v","v",e),me(this,ea,n)}get networkV(){return ke(this,Br)}get legacyChainId(){const e=this.networkV;return e==null?null:ts.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=xe(this.s);return this.yParity&&(e[0]|=128),pe(e)}get compactSerialized(){return Mt([this.r,this.yParityAndS])}get serialized(){return Mt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=BC-BigInt(this._s),n=55-this.v,s=new ts(gi,this.r,g0(e),n);return this.networkV&&me(s,Br,this.networkV),s}clone(){const e=new ts(gi,this.r,this._s,this.v);return this.networkV&&me(e,Br,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[t6](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=ut(e,"v");return n==Hy||n==Vy?Uy:(Z(n>=ju,"invalid EIP-155 v","v",e),(n-ju)/yg)}static getChainIdV(e,n){return ut(e)*yg+BigInt(35+n-27)}static getNormalizedV(e){const n=ut(e);return n===Uy||n===Hy?27:n===Wy||n===Vy?28:(Z(n>=ju,"invalid v","v",e),n&Wy?27:28)}static from(e){function n(c,u){Z(c,u,"signature",e)}if(e==null)return new ts(gi,$y,$y,27);if(typeof e=="string"){const c=xe(e,"signature");if(c.length===64){const u=pe(c.slice(0,32)),d=c.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new ts(gi,u,pe(d),f)}if(c.length===65){const u=pe(c.slice(0,32)),d=pe(c.slice(32,64)),f=ts.getNormalizedV(c[64]);return new ts(gi,u,d,f)}n(!1,"invalid raw signature length")}if(e instanceof ts)return e.clone();const s=e.r;n(s!=null,"missing r");const r=g0(s),i=function(c,u){if(c!=null)return g0(c);if(u!=null){n(Ks(u,32),"invalid yParityAndS");const d=xe(u);return d[0]&=127,pe(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(c,u,d){if(c!=null){const f=ut(c);return{networkV:f>=ju?f:void 0,v:ts.getNormalizedV(f)}}if(u!=null)return n(Ks(u,32),"invalid yParityAndS"),{v:xe(u)[0]&128?28:27};if(d!=null){switch(Un(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new ts(gi,r,i,a);return o&&me(l,Br,o),n(e.yParity==null||Un(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};Zo=new WeakMap,$s=new WeakMap,ea=new WeakMap,Br=new WeakMap;let Ts=ts;var rr;const Ii=class Ii{constructor(e){Be(this,rr);Z(Zl(e)===32,"invalid private key","privateKey","[REDACTED]"),me(this,rr,pe(e))}get privateKey(){return ke(this,rr)}get publicKey(){return Ii.computePublicKey(ke(this,rr))}get compressedPublicKey(){return Ii.computePublicKey(ke(this,rr),!0)}sign(e){Z(Zl(e)===32,"invalid digest length","digest",e);const n=Rr.sign(So(e),So(ke(this,rr)),{lowS:!0});return Ts.from({r:Ea(n.r,32),s:Ea(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=Ii.computePublicKey(e);return pe(Rr.getSharedSecret(So(ke(this,rr)),xe(n),!1))}static computePublicKey(e,n){let s=xe(e,"key");if(s.length===32){const i=Rr.getPublicKey(s,!!n);return pe(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=Rr.ProjectivePoint.fromHex(s);return pe(r.toRawBytes(n))}static recoverPublicKey(e,n){Z(Zl(e)===32,"invalid digest length","digest",e);const s=Ts.from(n);let r=Rr.Signature.fromCompact(So(Mt([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(So(e));return Z(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,s){const r=Rr.ProjectivePoint.fromHex(Ii.computePublicKey(e).substring(2)),i=Rr.ProjectivePoint.fromHex(Ii.computePublicKey(n).substring(2));return"0x"+r.add(i).toHex(!!s)}};rr=new WeakMap;let Gs=Ii;const n6=BigInt(0),s6=BigInt(36);function Yy(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let r=0;r<40;r++)n[r]=e[r].charCodeAt(0);const s=xe($t(n));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(s[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const dx={};for(let t=0;t<10;t++)dx[String(t)]=String(t);for(let t=0;t<26;t++)dx[String.fromCharCode(65+t)]=String(10+t);const Gy=15;function r6(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(s=>dx[s]).join("");for(;e.length>=Gy;){let s=e.substring(0,Gy);e=parseInt(s,10)%97+e.substring(s.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const i6=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function o6(t){t=t.toLowerCase();let e=n6;for(let n=0;n<t.length;n++)e=e*s6+i6[t[n]];return e}function ps(t){if(Z(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Yy(t);return Z(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(t.substring(2,4)===r6(t),"bad icap checksum","address",t);let e=o6(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Yy("0x"+e)}Z(!1,"invalid address","address",t)}function a6(t){return t&&typeof t.getAddress=="function"}async function m0(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Ye(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),ps(n)}function ec(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?ps(t):(Ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),m0(t,e.resolveName(t)));if(a6(t))return m0(t,t.getAddress());if(t&&typeof t.then=="function")return m0(t,t);Z(!1,"unsupported addressable value","target",t)}function x0(t,e){return{address:ps(t),storageKeys:e.map((n,s)=>(Z(Ks(n,32),"invalid slot",`storageKeys[${s}]`,n),n.toLowerCase()))}}function rf(t){if(Array.isArray(t))return t.map((n,s)=>Array.isArray(n)?(Z(n.length===2,"invalid slot set",`value[${s}]`,n),x0(n[0],n[1])):(Z(n!=null&&typeof n=="object","invalid address-slot set","value",t),x0(n.address,n.storageKeys)));Z(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const s=t[n].reduce((r,i)=>(r[i]=!0,r),{});return x0(n,Object.keys(s).sort())});return e.sort((n,s)=>n.address.localeCompare(s.address)),e}function l6(t){return{address:ps(t.address),nonce:ut(t.nonce!=null?t.nonce:0),chainId:ut(t.chainId!=null?t.chainId:0),signature:Ts.from(t.signature)}}function Zc(t){let e;return typeof t=="string"?e=Gs.computePublicKey(t,!1):e=t.publicKey,ps($t("0x"+e.substring(4)).substring(26))}function c6(t,e){return Zc(Gs.recoverPublicKey(t,e))}const Bt=BigInt(0),u6=BigInt(2),d6=BigInt(27),h6=BigInt(28),f6=BigInt(35),p6=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),g6=Symbol.for("nodejs.util.inspect.custom"),b0=4096*32,Ed=128;function m6(t){return{blobToKzgCommitment:s=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return xe(t.blobToKzgCommitment(pe(s)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return xe(t.blobToKzgCommitment(s));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return xe(t.blobToKZGCommitment(pe(s)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return xe(t.computeBlobProof(pe(s),pe(r)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return xe(t.computeBlobKZGProof(pe(s),pe(r)));Z(!1,"unsupported KZG library","kzg",t)}}}function Ky(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=fs(e).substring(4),"0x"+n}function Ka(t){return t==="0x"?null:ps(t)}function of(t,e){try{return rf(t)}catch(n){Z(!1,n.message,e,t)}}function x6(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let s=0;s<t.length;s++){const r=t[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);n.push({address:Ka(r[1]),nonce:rt(r[2],"nonce"),chainId:rt(r[0],"chainId"),signature:Ts.from({yParity:lo(r[3],"yParity"),r:li(r[4],32),s:li(r[5],32)})})}return n}catch(n){Z(!1,n.message,e,t)}}function lo(t,e){return t==="0x"?0:Un(t,e)}function rt(t,e){if(t==="0x")return Bt;const n=ut(t,e);return Z(n<=p6,"value exceeds uint size",e,n),n}function We(t,e){const n=ut(t,"value"),s=It(n);return Z(s.length<=32,"value too large",`tx.${e}`,n),s}function af(t){return rf(t).map(e=>[e.address,e.storageKeys])}function b6(t){return t.map(e=>[We(e.chainId,"chainId"),e.address,We(e.nonce,"nonce"),We(e.signature.yParity,"yParity"),It(e.signature.r),It(e.signature._s)])}function y6(t,e){Z(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Z(Ks(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function v6(t){const e=Kc(t);Z(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:lo(e[0],"nonce"),gasPrice:rt(e[1],"gasPrice"),gasLimit:rt(e[2],"gasLimit"),to:Ka(e[3]),value:rt(e[4],"value"),data:pe(e[5]),chainId:Bt};if(e.length===6)return n;const s=rt(e[6],"v"),r=rt(e[7],"r"),i=rt(e[8],"s");if(r===Bt&&i===Bt)n.chainId=s;else{let o=(s-f6)/u6;o<Bt&&(o=Bt),n.chainId=o,Z(o!==Bt||s===d6||s===h6,"non-canonical legacy v","v",e[6]),n.signature=Ts.from({r:li(e[7],32),s:li(e[8],32),v:s})}return n}function w6(t,e){const n=[We(t.nonce,"nonce"),We(t.gasPrice||0,"gasPrice"),We(t.gasLimit,"gasLimit"),t.to||"0x",We(t.value,"value"),t.data];let s=Bt;if(t.chainId!=Bt)s=ut(t.chainId,"tx.chainId"),Z(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(s=i)}if(!e)return s!==Bt&&(n.push(It(s)),n.push("0x"),n.push("0x")),fr(n);let r=BigInt(27+e.yParity);return s!==Bt?r=Ts.getChainIdV(s,e.v):BigInt(e.v)!==r&&Z(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(It(r)),n.push(It(e.r)),n.push(It(e._s)),fr(n)}function lf(t,e){let n;try{if(n=lo(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const s=li(e[1],32),r=li(e[2],32),i=Ts.from({r:s,s:r,yParity:n});t.signature=i}function S6(t){const e=Kc(xe(t).slice(1));Z(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",pe(t));const n={type:2,chainId:rt(e[0],"chainId"),nonce:lo(e[1],"nonce"),maxPriorityFeePerGas:rt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:rt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:rt(e[4],"gasLimit"),to:Ka(e[5]),value:rt(e[6],"value"),data:pe(e[7]),accessList:of(e[8],"accessList")};return e.length===9||lf(n,e.slice(9)),n}function k6(t,e){const n=[We(t.chainId,"chainId"),We(t.nonce,"nonce"),We(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),We(t.maxFeePerGas||0,"maxFeePerGas"),We(t.gasLimit,"gasLimit"),t.to||"0x",We(t.value,"value"),t.data,af(t.accessList||[])];return e&&(n.push(We(e.yParity,"yParity")),n.push(It(e.r)),n.push(It(e.s))),Mt(["0x02",fr(n)])}function C6(t){const e=Kc(xe(t).slice(1));Z(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",pe(t));const n={type:1,chainId:rt(e[0],"chainId"),nonce:lo(e[1],"nonce"),gasPrice:rt(e[2],"gasPrice"),gasLimit:rt(e[3],"gasLimit"),to:Ka(e[4]),value:rt(e[5],"value"),data:pe(e[6]),accessList:of(e[7],"accessList")};return e.length===8||lf(n,e.slice(8)),n}function _6(t,e){const n=[We(t.chainId,"chainId"),We(t.nonce,"nonce"),We(t.gasPrice||0,"gasPrice"),We(t.gasLimit,"gasLimit"),t.to||"0x",We(t.value,"value"),t.data,af(t.accessList||[])];return e&&(n.push(We(e.yParity,"recoveryParam")),n.push(It(e.r)),n.push(It(e.s))),Mt(["0x01",fr(n)])}function E6(t){let e=Kc(xe(t).slice(1)),n="3",s=null,r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];Z(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),Z(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),Z(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),Z(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",s=Un(e[1]);const o=e[2],a=e[3],l=e[4];Z(s===1,`unsupported EIP-7594 network format version: ${s}`,"fields[1]",s),Z(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),Z(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),Z(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),Z(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(o.length*Ed===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<o.length;c++){const u=[];for(let d=0;d<Ed;d++)u.push(l[c*Ed+d]);r.push({data:o[c],commitment:a[c],proof:Mt(u)})}e=e[0]}Z(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",pe(t));const i={type:3,chainId:rt(e[0],"chainId"),nonce:lo(e[1],"nonce"),maxPriorityFeePerGas:rt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:rt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:rt(e[4],"gasLimit"),to:Ka(e[5]),value:rt(e[6],"value"),data:pe(e[7]),accessList:of(e[8],"accessList"),maxFeePerBlobGas:rt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:s};r&&(i.blobs=r),Z(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),Z(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<i.blobVersionedHashes.length;o++)Z(Ks(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||lf(i,e.slice(11)),i}function P6(t,e,n){const s=[We(t.chainId,"chainId"),We(t.nonce,"nonce"),We(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),We(t.maxFeePerGas||0,"maxFeePerGas"),We(t.gasLimit,"gasLimit"),t.to||zC,We(t.value,"value"),t.data,af(t.accessList||[]),We(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),y6(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(s.push(We(e.yParity,"yParity")),s.push(It(e.r)),s.push(It(e.s)),n)){if(t.blobWrapperVersion!=null){const r=It(t.blobWrapperVersion),i=[];for(const{proof:o}of n){const a=xe(o),l=a.length/Ed;for(let c=0;c<a.length;c+=l)i.push(a.subarray(c,c+l))}return Mt(["0x03",fr([s,r,n.map(o=>o.data),n.map(o=>o.commitment),i])])}return Mt(["0x03",fr([s,n.map(r=>r.data),n.map(r=>r.commitment),n.map(r=>r.proof)])])}return Mt(["0x03",fr(s)])}function T6(t){const e=Kc(xe(t).slice(1));Z(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",pe(t));const n={type:4,chainId:rt(e[0],"chainId"),nonce:lo(e[1],"nonce"),maxPriorityFeePerGas:rt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:rt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:rt(e[4],"gasLimit"),to:Ka(e[5]),value:rt(e[6],"value"),data:pe(e[7]),accessList:of(e[8],"accessList"),authorizationList:x6(e[9],"authorizationList")};return e.length===10||lf(n,e.slice(10)),n}function I6(t,e){const n=[We(t.chainId,"chainId"),We(t.nonce,"nonce"),We(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),We(t.maxFeePerGas||0,"maxFeePerGas"),We(t.gasLimit,"gasLimit"),t.to||"0x",We(t.value,"value"),t.data,af(t.accessList||[]),b6(t.authorizationList||[])];return e&&(n.push(We(e.yParity,"yParity")),n.push(It(e.r)),n.push(It(e.s))),Mt(["0x04",fr(n)])}var ws,ta,na,sa,ra,ia,oa,aa,la,ca,ua,da,ji,$r,Us,Ur,ha,fa,pa,Pd;const zs=class zs{constructor(){Be(this,pa);Be(this,ws);Be(this,ta);Be(this,na);Be(this,sa);Be(this,ra);Be(this,ia);Be(this,oa);Be(this,aa);Be(this,la);Be(this,ca);Be(this,ua);Be(this,da);Be(this,ji);Be(this,$r);Be(this,Us);Be(this,Ur);Be(this,ha);Be(this,fa);me(this,ws,null),me(this,ta,null),me(this,sa,0),me(this,ra,Bt),me(this,ia,null),me(this,oa,null),me(this,aa,null),me(this,na,"0x"),me(this,la,Bt),me(this,ca,Bt),me(this,ua,null),me(this,da,null),me(this,ji,null),me(this,$r,null),me(this,Us,null),me(this,Ur,null),me(this,ha,null),me(this,fa,null)}get type(){return ke(this,ws)}set type(e){switch(e){case null:me(this,ws,null);break;case 0:case"legacy":me(this,ws,0);break;case 1:case"berlin":case"eip-2930":me(this,ws,1);break;case 2:case"london":case"eip-1559":me(this,ws,2);break;case 3:case"cancun":case"eip-4844":me(this,ws,3);break;case 4:case"pectra":case"eip-7702":me(this,ws,4);break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=ke(this,ta);return e==null&&this.type===3?zC:e}set to(e){me(this,ta,e==null?null:ps(e))}get nonce(){return ke(this,sa)}set nonce(e){me(this,sa,Un(e,"value"))}get gasLimit(){return ke(this,ra)}set gasLimit(e){me(this,ra,ut(e))}get gasPrice(){const e=ke(this,ia);return e==null&&(this.type===0||this.type===1)?Bt:e}set gasPrice(e){me(this,ia,e==null?null:ut(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=ke(this,oa);return e??(this.type===2||this.type===3?Bt:null)}set maxPriorityFeePerGas(e){me(this,oa,e==null?null:ut(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=ke(this,aa);return e??(this.type===2||this.type===3?Bt:null)}set maxFeePerGas(e){me(this,aa,e==null?null:ut(e,"maxFeePerGas"))}get data(){return ke(this,na)}set data(e){me(this,na,pe(e))}get value(){return ke(this,la)}set value(e){me(this,la,ut(e,"value"))}get chainId(){return ke(this,ca)}set chainId(e){me(this,ca,ut(e))}get signature(){return ke(this,ua)||null}set signature(e){me(this,ua,e==null?null:Ts.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const s of n)if(!s.signature.isValid())return!1}return!0}get accessList(){const e=ke(this,da)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){me(this,da,e==null?null:rf(e))}get authorizationList(){const e=ke(this,ha)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){me(this,ha,e==null?null:e.map(n=>l6(n)))}get maxFeePerBlobGas(){const e=ke(this,ji);return e==null&&this.type===3?Bt:e}set maxFeePerBlobGas(e){me(this,ji,e==null?null:ut(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=ke(this,$r);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Z(Ks(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}me(this,$r,e)}get blobs(){return ke(this,Ur)==null?null:ke(this,Ur).map(e=>Object.assign({},e))}set blobs(e){if(e==null){me(this,Ur,null);return}const n=[],s=[];for(let r=0;r<e.length;r++){const i=e[r];if(Jh(i)){Ye(ke(this,Us),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=xe(i);if(Z(o.length<=b0,"blob is too large",`blobs[${r}]`,i),o.length!==b0){const c=new Uint8Array(b0);c.set(o),o=c}const a=ke(this,Us).blobToKzgCommitment(o),l=pe(ke(this,Us).computeBlobKzgProof(o,a));n.push({data:pe(o),commitment:pe(a),proof:l}),s.push(Ky(1,a))}else{const o=pe(i.data),a=pe(i.commitment),l=pe(i.proof);n.push({data:o,commitment:a,proof:l}),s.push(Ky(1,a))}}me(this,Ur,n),me(this,$r,s)}get kzg(){return ke(this,Us)}set kzg(e){e==null?me(this,Us,null):me(this,Us,m6(e))}get blobWrapperVersion(){return ke(this,fa)}set blobWrapperVersion(e){me(this,fa,e)}get hash(){return this.signature==null?null:$t(rn(this,pa,Pd).call(this,!0,!1))}get unsignedHash(){return $t(this.unsignedSerialized)}get from(){return this.signature==null?null:c6(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Gs.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return rn(this,pa,Pd).call(this,!0,!0)}get unsignedSerialized(){return rn(this,pa,Pd).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=ke(this,ji)!=null||ke(this,$r);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Ye(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Ye(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return zs.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[g6](){return this.toString()}toString(){const e=[],n=r=>{let i=this[r];typeof i=="string"&&(i=JSON.stringify(i)),e.push(`${r}: ${i}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const s=this.authorizationList;if(s){const r=[];for(const i of s){const o=[];o.push(`address: ${JSON.stringify(i.address)}`),i.nonce!=null&&o.push(`nonce: ${i.nonce}`),i.chainId!=null&&o.push(`chainId: ${i.chainId}`),i.signature&&o.push(`signature: ${i.signature.toString()}`),r.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${r.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new zs;if(typeof e=="string"){const s=xe(e);if(s[0]>=127)return zs.from(v6(s));switch(s[0]){case 1:return zs.from(C6(s));case 2:return zs.from(S6(s));case 3:return zs.from(E6(s));case 4:return zs.from(T6(s))}Ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new zs;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Ts.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};ws=new WeakMap,ta=new WeakMap,na=new WeakMap,sa=new WeakMap,ra=new WeakMap,ia=new WeakMap,oa=new WeakMap,aa=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,da=new WeakMap,ji=new WeakMap,$r=new WeakMap,Us=new WeakMap,Ur=new WeakMap,ha=new WeakMap,fa=new WeakMap,pa=new WeakSet,Pd=function(e,n){Ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return w6(this,s);case 1:return _6(this,s);case 2:return k6(this,s);case 3:return P6(this,s,n?this.blobs:null);case 4:return I6(this,s)}Ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let ch=zs;function M6(t){return Z(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),$t(Mt(["0x05",fr([t.chainId!=null?It(t.chainId):"0x",ps(t.address),t.nonce!=null?It(t.nonce):"0x"])]))}function hx(t){return $t(Ui(t))}function R6(t){return typeof t=="string"&&(t=Ui(t)),$t(Mt([Ui(ZT),Ui(String(t.length)),t]))}const $C=new Uint8Array(32);$C.fill(0);const O6=BigInt(-1),UC=BigInt(0),WC=BigInt(1),A6=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function D6(t){const e=xe(t),n=e.length%32;return n?Mt([e,$C.slice(n)]):pe(e)}const N6=Ea(WC,32),L6=Ea(UC,32),qy={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},y0=["name","version","chainId","verifyingContract","salt"];function Xy(t){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const j6={name:Xy("name"),version:Xy("version"),chainId:function(t){const e=ut(t,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):d4(e)},verifyingContract:function(t){try{return ps(t).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=xe(t,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",t),pe(e)}};function v0(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",s=parseInt(e[2]);Z(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",t);const r=u4(A6,n?s-1:s),i=n?(r+WC)*O6:UC;return function(o){const a=ut(o,"value");return Z(a>=i&&a<=r,`value out-of-bounds for ${t}`,"value",a),Ea(n?c4(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Z(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(s){const r=xe(s);return Z(r.length===n,`invalid length for ${t}`,"value",s),D6(s)}}}switch(t){case"address":return function(e){return li(ps(e),32)};case"bool":return function(e){return e?N6:L6};case"bytes":return function(e){return $t(e)};case"string":return function(e){return hx(e)}}return null}function Qy(t,e){return`${t}(${e.map(({name:n,type:s})=>s+" "+n).join(",")})`}function Fu(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var zc,ir,ga,Ah,HC;const ns=class ns{constructor(e){Be(this,Ah);ne(this,"primaryType");Be(this,zc);Be(this,ir);Be(this,ga);me(this,ir,new Map),me(this,ga,new Map);const n=new Map,s=new Map,r=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:c,type:u})=>{let{base:d,index:f}=Fu(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:c,type:d+(f||"")}}),n.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),me(this,zc,JSON.stringify(i));for(const l in i){const c=new Set;for(const u of i[l]){Z(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const d=Fu(u.type).base;Z(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",e),!v0(d)&&(Z(s.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),s.get(d).push(l),n.get(l).add(d))}}const o=Array.from(s.keys()).filter(l=>s.get(l).length===0);Z(o.length!==0,"missing primary type","types",e),Z(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),$n(this,{primaryType:o[0]});function a(l,c){Z(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(s.has(u)){a(u,c);for(const d of c)r.get(d).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of r){const u=Array.from(c);u.sort(),ke(this,ir).set(l,Qy(l,i[l])+u.map(d=>Qy(d,i[d])).join(""))}}get types(){return JSON.parse(ke(this,zc))}getEncoder(e){let n=ke(this,ga).get(e);return n||(n=rn(this,Ah,HC).call(this,e),ke(this,ga).set(e,n)),n}encodeType(e){const n=ke(this,ir).get(e);return Z(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return $t(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,s){if(v0(e))return s(e,n);const r=Fu(e).array;if(r)return Z(r.count===-1||r.count===n.length,`array length mismatch; expected length ${r.count}`,"value",n),n.map(o=>this._visit(r.prefix,o,s));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],s),o),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new ns(e)}static getPrimaryType(e){return ns.from(e).primaryType}static hashStruct(e,n,s){return ns.from(n).hashStruct(e,s)}static hashDomain(e){const n=[];for(const s in e){if(e[s]==null)continue;const r=qy[s];Z(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),n.push({name:s,type:r})}return n.sort((s,r)=>y0.indexOf(s.name)-y0.indexOf(r.name)),ns.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,s){return Mt(["0x1901",ns.hashDomain(e),ns.from(n).hash(s)])}static hash(e,n,s){return $t(ns.encode(e,n,s))}static async resolveNames(e,n,s,r){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Ks(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=ns.from(n);o.visit(s,(a,l)=>(a==="address"&&!Ks(l,20)&&(i[l]="0x"),l));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),s=o.visit(s,(a,l)=>a==="address"&&i[l]?i[l]:l),{domain:e,value:s}}static getPayload(e,n,s){ns.hashDomain(e);const r={},i=[];y0.forEach(l=>{const c=e[l];c!=null&&(r[l]=j6[l](c),i.push({name:l,type:qy[l]}))});const o=ns.from(n);n=o.types;const a=Object.assign({},n);return Z(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(s),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(s,(l,c)=>{if(l.match(/^bytes(\d*)/))return pe(xe(c));if(l.match(/^u?int/))return ut(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return Z(typeof c=="string","invalid string","value",c),c}Z(!1,"unsupported type","type",l)})}}};zc=new WeakMap,ir=new WeakMap,ga=new WeakMap,Ah=new WeakSet,HC=function(e){{const r=v0(e);if(r)return r}const n=Fu(e).array;if(n){const r=n.prefix,i=this.getEncoder(r);return o=>{Z(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return ke(this,ir).has(r)&&(a=a.map($t)),$t(Mt(a))}}const s=this.types[e];if(s){const r=hx(ke(this,ir).get(e));return i=>{const o=s.map(({name:a,type:l})=>{const c=this.getEncoder(l)(i[a]);return ke(this,ir).has(l)?$t(c):c});return o.unshift(r),Mt(o)}}Z(!1,`unknown type: ${e}`,"type",e)};let uh=ns;BigInt(0);function VC(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=pe(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of n)!(r in t)||t[r]==null||(e[r]=ut(t[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in t)||t[r]==null||(e[r]=Un(t[r],`request.${r}`));return t.accessList&&(e.accessList=rf(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(r=>Jh(r)?pe(r):Object.assign({},r))),e}function mi(t,e){if(t.provider)return t.provider;Ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Jy(t,e){let n=VC(e);if(n.to!=null&&(n.to=ec(n.to,t)),n.from!=null){const s=n.from;n.from=Promise.all([t.getAddress(),ec(s,t)]).then(([r,i])=>(Z(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else n.from=t.getAddress();return await Xm(n)}class YC{constructor(e){ne(this,"provider");$n(this,{provider:e||null})}async getNonce(e){return mi(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Jy(this,e)}async populateTransaction(e){const n=mi(this,"populateTransaction"),s=await Jy(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const o=ut(s.chainId);Z(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?Z(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&i&&Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const o=await n.getFeeData();Ye(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(s.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const a=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=a,s.maxPriorityFeePerGas=a}else s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Ye(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice),s.type=0):Ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Xm(s)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await mi(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return mi(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return mi(this,"call").call(await this.populateCall(e))}async resolveName(e){return await mi(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=mi(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const r=ch.from(s);return await n.broadcastTransaction(await this.signTransaction(r))}authorize(e){Ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var ma,Td;const ab=class ab extends YC{constructor(n,s){super(s);Be(this,ma);ne(this,"address");$n(this,{address:n})}async getAddress(){return this.address}connect(n){return new ab(this.address,n)}async signTransaction(n){rn(this,ma,Td).call(this,"transactions","signTransaction")}async signMessage(n){rn(this,ma,Td).call(this,"messages","signMessage")}async signTypedData(n,s,r){rn(this,ma,Td).call(this,"typed-data","signTypedData")}};ma=new WeakSet,Td=function(n,s){Ye(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:s})};let vg=ab;var xa;const lb=class lb extends YC{constructor(n,s){super(s);ne(this,"address");Be(this,xa);Z(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),me(this,xa,n);const r=Zc(this.signingKey.publicKey);$n(this,{address:r})}get signingKey(){return ke(this,xa)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new lb(ke(this,xa),n)}async signTransaction(n){n=VC(n);const{to:s,from:r}=await Xm({to:n.to?ec(n.to,this):void 0,from:n.from?ec(n.from,this):void 0});s!=null&&(n.to=s),r!=null&&(n.from=r),n.from!=null&&(Z(ps(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const i=ch.from(n);return i.signature=this.signingKey.sign(i.unsignedHash),i.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(R6(n)).serialized}authorizeSync(n){Z(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const s=this.signingKey.sign(M6(n));return Object.assign({},{address:ps(n.address),nonce:ut(n.nonce||0),chainId:ut(n.chainId||0)},{signature:s})}async authorize(n){return n=Object.assign({},n,{address:await ec(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,s,r){const i=await uh.resolveNames(n,s,r,async o=>{Ye(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return Ye(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(uh.hash(i.domain,s,i.value)).serialized}};xa=new WeakMap;let wg=lb;const dh=" !#$%&'()*+,-./<=>?@[]^_`{|}~",F6=/^[a-z]*$/i;function Zy(t,e){let n=97;return t.reduce((s,r)=>(r===e?n++:r.match(F6)?s.push(String.fromCharCode(n)+r):(n=97,s.push(r)),s),[])}function z6(t,e){for(let r=dh.length-1;r>=0;r--)t=t.split(dh[r]).join(e.substring(2*r,2*r+2));const n=[],s=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(r,i,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(i.toLowerCase());return""});if(s)throw new Error(`leftovers: ${JSON.stringify(s)}`);return Zy(Zy(n,";"),":")}function B6(t){return Z(t[0]==="0","unsupported auwl data","data",t),z6(t.substring(1+2*dh.length),t.substring(1,1+2*dh.length))}class $6{constructor(e){ne(this,"locale");$n(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var ba,Bc,Fi,$c,Sg;class U6 extends $6{constructor(n,s,r){super(n);Be(this,$c);Be(this,ba);Be(this,Bc);Be(this,Fi);me(this,ba,s),me(this,Bc,r),me(this,Fi,null)}get _data(){return ke(this,ba)}_decodeWords(){return B6(ke(this,ba))}getWord(n){const s=rn(this,$c,Sg).call(this);return Z(n>=0&&n<s.length,`invalid word index: ${n}`,"index",n),s[n]}getWordIndex(n){return rn(this,$c,Sg).call(this).indexOf(n)}}ba=new WeakMap,Bc=new WeakMap,Fi=new WeakMap,$c=new WeakSet,Sg=function(){if(ke(this,Fi)==null){const n=this._decodeWords();if(hx(n.join(`
`)+`
`)!==ke(this,Bc))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);me(this,Fi,n)}return ke(this,Fi)};const W6="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",H6="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let w0=null;class Ji extends U6{constructor(){super("en",W6,H6)}static wordlist(){return w0==null&&(w0=new Ji),w0}}function GC(t){return(1<<t)-1<<8-t&255}function V6(t){return(1<<t)-1&255}function S0(t,e){Fk("NFKD"),e==null&&(e=Ji.wordlist());const n=e.split(t);Z(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const s=new Uint8Array(Math.ceil(11*n.length/8));let r=0;for(let c=0;c<n.length;c++){let u=e.getWordIndex(n[c].normalize("NFKD"));Z(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let d=0;d<11;d++)u&1<<10-d&&(s[r>>3]|=1<<7-r%8),r++}const i=32*n.length/3,o=n.length/3,a=GC(o),l=xe(fs(s.slice(0,i/8)))[0]&a;return Z(l===(s[s.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),pe(s.slice(0,i/8))}function k0(t,e){Z(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=Ji.wordlist());const n=[0];let s=11;for(let o=0;o<t.length;o++)s>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],s-=8):(n[n.length-1]<<=s,n[n.length-1]|=t[o]>>8-s,n.push(t[o]&V6(8-s)),s+=3);const r=t.length/4,i=parseInt(fs(t).substring(2,4),16)&GC(r);return n[n.length-1]<<=r,n[n.length-1]|=i>>8-r,e.join(n.map(o=>e.getWord(o)))}const C0={};class Pc{constructor(e,n,s,r,i){ne(this,"phrase");ne(this,"password");ne(this,"wordlist");ne(this,"entropy");r==null&&(r=""),i==null&&(i=Ji.wordlist()),Qh(e,C0,"Mnemonic"),$n(this,{phrase:s,password:r,wordlist:i,entropy:n})}computeSeed(){const e=Ui("mnemonic"+this.password,"NFKD");return qc(Ui(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,s){const r=S0(e,s);return e=k0(xe(r),s),new Pc(C0,r,e,n,s)}static fromEntropy(e,n,s){const r=xe(e,"entropy"),i=k0(r,s);return new Pc(C0,pe(r),i,n,s)}static entropyToPhrase(e,n){const s=xe(e,"entropy");return k0(s,n)}static phraseToEntropy(e,n){return S0(e,n)}static isValidMnemonic(e,n){try{return S0(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Kt=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},_0=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},Id,Zn,Ns;const Y6={16:10,24:12,32:14},G6=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Xn=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],zu=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],K6=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],q6=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],X6=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Q6=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],J6=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],Z6=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],e8=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],t8=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],n8=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],s8=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],r8=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],i8=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function E0(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class fx{get key(){return Kt(this,Id,"f").slice()}constructor(e){if(Id.set(this,void 0),Zn.set(this,void 0),Ns.set(this,void 0),!(this instanceof fx))throw Error("AES must be instanitated with `new`");_0(this,Id,new Uint8Array(e),"f");const n=Y6[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");_0(this,Ns,[],"f"),_0(this,Zn,[],"f");for(let u=0;u<=n;u++)Kt(this,Ns,"f").push([0,0,0,0]),Kt(this,Zn,"f").push([0,0,0,0]);const s=(n+1)*4,r=this.key.length/4,i=E0(this.key);let o;for(let u=0;u<r;u++)o=u>>2,Kt(this,Ns,"f")[o][u%4]=i[u],Kt(this,Zn,"f")[n-o][u%4]=i[u];let a=0,l=r,c;for(;l<s;){if(c=i[r-1],i[0]^=Xn[c>>16&255]<<24^Xn[c>>8&255]<<16^Xn[c&255]<<8^Xn[c>>24&255]^G6[a]<<24,a+=1,r!=8)for(let g=1;g<r;g++)i[g]^=i[g-1];else{for(let g=1;g<r/2;g++)i[g]^=i[g-1];c=i[r/2-1],i[r/2]^=Xn[c&255]^Xn[c>>8&255]<<8^Xn[c>>16&255]<<16^Xn[c>>24&255]<<24;for(let g=r/2+1;g<r;g++)i[g]^=i[g-1]}let u=0,d,f;for(;u<r&&l<s;)d=l>>2,f=l%4,Kt(this,Ns,"f")[d][f]=i[u],Kt(this,Zn,"f")[n-d][f]=i[u++],l++}for(let u=1;u<n;u++)for(let d=0;d<4;d++)c=Kt(this,Zn,"f")[u][d],Kt(this,Zn,"f")[u][d]=n8[c>>24&255]^s8[c>>16&255]^r8[c>>8&255]^i8[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=Kt(this,Ns,"f").length-1,s=[0,0,0,0];let r=E0(e);for(let a=0;a<4;a++)r[a]^=Kt(this,Ns,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=K6[r[l]>>24&255]^q6[r[(l+1)%4]>>16&255]^X6[r[(l+2)%4]>>8&255]^Q6[r[(l+3)%4]&255]^Kt(this,Ns,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Kt(this,Ns,"f")[n][a],i[4*a]=(Xn[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(Xn[r[(a+1)%4]>>16&255]^o>>16)&255,i[4*a+2]=(Xn[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(Xn[r[(a+3)%4]&255]^o)&255;return i}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=Kt(this,Zn,"f").length-1,s=[0,0,0,0];let r=E0(e);for(let a=0;a<4;a++)r[a]^=Kt(this,Zn,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=J6[r[l]>>24&255]^Z6[r[(l+3)%4]>>16&255]^e8[r[(l+2)%4]>>8&255]^t8[r[(l+1)%4]&255]^Kt(this,Zn,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Kt(this,Zn,"f")[n][a],i[4*a]=(zu[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(zu[r[(a+3)%4]>>16&255]^o>>16)&255,i[4*a+2]=(zu[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(zu[r[(a+1)%4]&255]^o)&255;return i}}Id=new WeakMap,Zn=new WeakMap,Ns=new WeakMap;class o8{constructor(e,n,s){if(s&&!(this instanceof s))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new fx(n)},name:{enumerable:!0,value:e}})}}var xo=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},Qn=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},Nl,ki,es;class hh extends o8{constructor(e,n){super("CTR",e,hh),Nl.set(this,void 0),ki.set(this,void 0),es.set(this,void 0),xo(this,es,new Uint8Array(16),"f"),Qn(this,es,"f").fill(0),xo(this,Nl,Qn(this,es,"f"),"f"),xo(this,ki,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(Qn(this,es,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)Qn(this,es,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Qn(this,es,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(Qn(this,es,"f")[e]===255)Qn(this,es,"f")[e]=0;else{Qn(this,es,"f")[e]++;break}}encrypt(e){var n,s;const r=new Uint8Array(e);for(let i=0;i<r.length;i++)Qn(this,ki,"f")===16&&(xo(this,Nl,this.aes.encrypt(Qn(this,es,"f")),"f"),xo(this,ki,0,"f"),this.increment()),r[i]^=Qn(this,Nl,"f")[xo(this,ki,(s=Qn(this,ki,"f"),n=s++,s),"f"),n];return r}decrypt(e){return this.encrypt(e)}}Nl=new WeakMap,ki=new WeakMap,es=new WeakMap;function hl(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function KC(t){return typeof t=="string"?Ui(t,"NFKC"):So(t)}const a8="m/44'/60'/0'/0/0";function qC(t){const e=t.salt!=null?xe(t.salt,"options.salt"):pr(32);let n=1<<17,s=8,r=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(s=t.scrypt.r),t.scrypt.p&&(r=t.scrypt.p)),Z(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),Z(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt r parameter","options.r",s),Z(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt p parameter","options.p",r),{name:"scrypt",dkLen:32,salt:e,N:n,r:s,p:r}}function XC(t,e,n,s){const r=xe(n.privateKey,"privateKey"),i=s.iv!=null?xe(s.iv,"options.iv"):pr(16);Z(i.length===16,"invalid options.iv length","options.iv",s.iv);const o=s.uuid!=null?xe(s.uuid,"options.uuid"):pr(16);Z(o.length===16,"invalid options.uuid length","options.uuid",s.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new hh(a,i),u=xe(c.encrypt(r)),d=$t(Mt([l,u])),f={address:n.address.substring(2).toLowerCase(),id:x4(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:pe(i).substring(2)},ciphertext:pe(u).substring(2),kdf:"scrypt",kdfparams:{salt:pe(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:d.substring(2)}};if(n.mnemonic){const g=s.client!=null?s.client:`ethers/${jk}`,m=n.mnemonic.path||a8,b=n.mnemonic.locale||"en",w=t.slice(32,64),p=xe(n.mnemonic.entropy,"account.mnemonic.entropy"),y=pr(16),x=new hh(w,y),v=xe(x.encrypt(p)),k=new Date,E="UTC--"+(k.getUTCFullYear()+"-"+hl(k.getUTCMonth()+1,2)+"-"+hl(k.getUTCDate(),2)+"T"+hl(k.getUTCHours(),2)+"-"+hl(k.getUTCMinutes(),2)+"-"+hl(k.getUTCSeconds(),2)+".0Z")+"--"+f.address;f["x-ethers"]={client:g,gethFilename:E,path:m,locale:b,mnemonicCounter:pe(y).substring(2),mnemonicCiphertext:pe(v).substring(2),version:"0.1"}}return JSON.stringify(f)}function l8(t,e,n){n==null&&(n={});const s=KC(e),r=qC(n),i=Qc(s,r.salt,r.N,r.r,r.p,64);return XC(xe(i),r,t,n)}async function c8(t,e,n){n==null&&(n={});const s=KC(e),r=qC(n),i=await Xc(s,r.salt,r.N,r.r,r.p,64,n.progressCallback);return XC(xe(i),r,t,n)}const P0="m/44'/60'/0'/0/0",u8=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),si=2147483648,d8=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h8="0123456789abcdef";function fh(t,e){let n="";for(;t;)n=h8[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function kg(t){const e=xe(t),n=Qm(fs(fs(e)),0,4),s=Mt([e,n]);return p4(s)}const Bs={};function QC(t,e,n,s){const r=new Uint8Array(37);t&si?(Ye(s!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),r.set(xe(s),1)):r.set(xe(n));for(let o=24;o>=0;o-=8)r[33+(o>>3)]=t>>24-o&255;const i=xe(Ya("sha512",e,r));return{IL:i.slice(0,32),IR:i.slice(32)}}function JC(t,e){const n=e.split("/");Z(n.length>0,"invalid path","path",e),n[0]==="m"&&(Z(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let s=t;for(let r=0;r<n.length;r++){const i=n[r];if(i.match(/^[0-9]+'$/)){const o=parseInt(i.substring(0,i.length-1));Z(o<si,"invalid path index",`path[${r}]`,i),s=s.deriveChild(si+o)}else if(i.match(/^[0-9]+$/)){const o=parseInt(i);Z(o<si,"invalid path index",`path[${r}]`,i),s=s.deriveChild(o)}else Z(!1,"invalid path component",`path[${r}]`,i)}return s}var Uc,Cg,zi,Ll;const bs=class bs extends wg{constructor(n,s,r,i,o,a,l,c,u){super(s,u);Be(this,Uc);ne(this,"publicKey");ne(this,"fingerprint");ne(this,"parentFingerprint");ne(this,"mnemonic");ne(this,"chainCode");ne(this,"path");ne(this,"index");ne(this,"depth");Qh(n,Bs,"HDNodeWallet"),$n(this,{publicKey:s.compressedPublicKey});const d=Qm(Ga(fs(this.publicKey)),0,4);$n(this,{parentFingerprint:r,fingerprint:d,chainCode:i,path:o,index:a,depth:l}),$n(this,{mnemonic:c})}connect(n){return new bs(Bs,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,s){return await c8(rn(this,Uc,Cg).call(this),n,{progressCallback:s})}encryptSync(n){return l8(rn(this,Uc,Cg).call(this),n)}get extendedKey(){return Ye(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),kg(Mt(["0x0488ADE4",fh(this.depth,1),this.parentFingerprint,fh(this.index,4),this.chainCode,Mt(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new Ic(Bs,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const s=Un(n,"index");Z(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~si),s&si&&(r+="'"));const{IR:i,IL:o}=QC(s,this.chainCode,this.publicKey,this.privateKey),a=new Gs(Ea((Bk(o)+BigInt(this.privateKey))%d8,32));return new bs(Bs,a,this.fingerprint,pe(i),r,s,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return JC(this,n)}static fromExtendedKey(n){const s=It(g4(n));Z(s.length===82||kg(s.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const r=s[4],i=pe(s.slice(5,9)),o=parseInt(pe(s.slice(9,13)).substring(2),16),a=pe(s.slice(13,45)),l=s.slice(45,78);switch(pe(s.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=pe(l);return new Ic(Bs,Zc(c),c,i,a,null,o,r,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new bs(Bs,new Gs(l.slice(1)),i,a,null,o,r,null,null)}Z(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,s,r){var o;n==null&&(n=""),s==null&&(s=P0),r==null&&(r=Ji.wordlist());const i=Pc.fromEntropy(pr(16),n,r);return rn(o=bs,zi,Ll).call(o,i.computeSeed(),i).derivePath(s)}static fromMnemonic(n,s){var r;return s||(s=P0),rn(r=bs,zi,Ll).call(r,n.computeSeed(),n).derivePath(s)}static fromPhrase(n,s,r,i){var a;s==null&&(s=""),r==null&&(r=P0),i==null&&(i=Ji.wordlist());const o=Pc.fromPhrase(n,s,i);return rn(a=bs,zi,Ll).call(a,o.computeSeed(),o).derivePath(r)}static fromSeed(n){var s;return rn(s=bs,zi,Ll).call(s,n,null)}};Uc=new WeakSet,Cg=function(){const n={address:this.address,privateKey:this.privateKey},s=this.mnemonic;return this.path&&s&&s.wordlist.locale==="en"&&s.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:s.entropy}),n},zi=new WeakSet,Ll=function(n,s){Z(Jh(n),"invalid seed","seed","[REDACTED]");const r=xe(n,"seed");Z(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const i=xe(Ya("sha512",u8,r)),o=new Gs(pe(i.slice(0,32)));return new bs(Bs,o,"0x00000000",pe(i.slice(32)),"m",0,0,s,null)},Be(bs,zi);let Tc=bs;class Ic extends vg{constructor(n,s,r,i,o,a,l,c,u){super(s,u);ne(this,"publicKey");ne(this,"fingerprint");ne(this,"parentFingerprint");ne(this,"chainCode");ne(this,"path");ne(this,"index");ne(this,"depth");Qh(n,Bs,"HDNodeVoidWallet"),$n(this,{publicKey:r});const d=Qm(Ga(fs(r)),0,4);$n(this,{publicKey:r,fingerprint:d,parentFingerprint:i,chainCode:o,path:a,index:l,depth:c})}connect(n){return new Ic(Bs,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return Ye(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),kg(Mt(["0x0488B21E",fh(this.depth,1),this.parentFingerprint,fh(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const s=Un(n,"index");Z(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~si),s&si&&(r+="'"));const{IR:i,IL:o}=QC(s,this.chainCode,this.publicKey,null),a=Gs.addPoints(o,this.publicKey,!0),l=Zc(a);return new Ic(Bs,l,a,this.fingerprint,pe(i),r,s,this.depth+1,this.provider)}derivePath(n){return JC(this,n)}}const f8=6e4,ev=100,T0=24*60*60*1e3,I0=1;class ZC{constructor(e){ne(this,"infoClient");ne(this,"onChainState",new Map);ne(this,"offChainNonces",new Map);ne(this,"syncTimers",new Map);this.infoClient=e}getOrCreateState(e){const n=e.toLowerCase();let s=this.onChainState.get(n);return s||(s={confirmed:0,pending:[],lastSync:0,mu:!1},this.onChainState.set(n,s)),s}async acquireLock(e){for(;e.mu;)await new Promise(n=>setTimeout(n,10));e.mu=!0}releaseLock(e){e.mu=!1}async syncWithCore(e){const n=this.getOrCreateState(e),s=Date.now();if(!(s-n.lastSync<f8))try{const r=await this.infoClient.getNonceStatus(e,!1),i=(r==null?void 0:r.next_nonce)!==void 0?typeof r.next_nonce=="string"?parseInt(r.next_nonce,10):r.next_nonce:0;n.confirmed=i,n.lastSync=s}catch(r){console.warn(`[NonceManager] Failed to sync with core for ${e}:`,r)}}async getNonce(e,n="latest"){const s=e.toLowerCase(),r=this.getOrCreateState(s);if(await this.syncWithCore(s),n==="latest")return r.confirmed;{const i=r.pending.length>0?Math.max(...r.pending):r.confirmed;return Math.max(r.confirmed,i)}}async validateNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{if(s||await this.syncWithCore(r),i.confirmed===0&&n<I0)throw new Error(`nonce too low for new account: got ${n}, minimum ${I0}`);if(i.confirmed>0&&n<=i.confirmed)throw new Error(`nonce too low: got ${n}, confirmed ${i.confirmed}`);if(i.pending.includes(n))throw new Error(`nonce already pending: ${n}`);if(i.pending.length>=ev)throw new Error(`pending nonce limit reached: max ${ev} pending nonces`);if(s){const o=this.offChainNonces.get(r);if(o){const a=o.get(n);if(a){const l=Date.now();if(l-a<T0)throw new Error(`nonce already used (off-chain): ${n}, expires in ${Math.floor((T0-(l-a))/1e3)}s`);o.delete(n)}}}i.pending.push(n),i.pending.sort((o,a)=>o-a)}finally{this.releaseLock(i)}}async commitNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){let a=this.offChainNonces.get(r);a||(a=new Map,this.offChainNonces.set(r,a)),a.set(n,Date.now())}else if(n===i.confirmed+1)for(i.confirmed=n;i.pending.length>0&&i.pending[0]===i.confirmed+1;){const a=i.pending.shift();i.confirmed=a}}finally{this.releaseLock(i)}}async rejectNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){const a=this.offChainNonces.get(r);a&&a.delete(n)}}finally{this.releaseLock(i)}}async getExpectedNextNonce(e,n=!1){const s=e.toLowerCase();await this.syncWithCore(s);const r=this.getOrCreateState(s),i=r.pending.length>0?Math.max(...r.pending):r.confirmed,o=Math.max(r.confirmed+1,i+1),a=o===0?I0:o;if(n)try{await this.validateNonce(s,a,!1)}catch(l){console.warn(`[NonceManager] Failed to reserve nonce ${a}:`,l.message)}return{next_nonce:a,reserved:n,timestamp:Date.now()}}cleanupExpiredOffChainNonces(){const e=Date.now();for(const[n,s]of this.offChainNonces.entries()){for(const[r,i]of s.entries())e-i>=T0&&s.delete(r);s.size===0&&this.offChainNonces.delete(n)}}resetNonce(e){const n=e.toLowerCase();this.onChainState.delete(n),this.offChainNonces.delete(n);const s=this.syncTimers.get(n);s&&(clearInterval(s),this.syncTimers.delete(n))}getState(e){const n=e.toLowerCase();return this.onChainState.get(n)}}class hn{constructor(e){ne(this,"httpClient");ne(this,"sessionToken");this.httpClient=new qm(e.baseURL),this.sessionToken=e.sessionToken}setSessionToken(e){this.sessionToken=e}getHeaders(){const e={Accept:"application/json, */*"};return this.sessionToken&&(e.Authorization=`Bearer ${this.sessionToken}`),e}async getMarkets(){var n;const e=await this.httpClient.get("/market/v1/all",this.getHeaders());return((n=e.body)==null?void 0:n.markets)??e.body}async getMarketsWithFilters(e,n){var o;let s="/market/v1/all";const r=[];e&&r.push(`filter=${e}`),n&&r.push("active_only=true"),r.length>0&&(s+="?"+r.join("&"));const i=await this.httpClient.get(s,this.getHeaders());return((o=i.body)==null?void 0:o.markets)??i.body}async getMarketByID(e){return(await this.httpClient.get(`/market/v1/market/${e}`,this.getHeaders())).body}async getMarketByMoniker(e){return(await this.httpClient.get(`/market/v1/market/by-moniker/${e}`,this.getHeaders())).body}async getMarketStats(e){return(await this.httpClient.get(`/market/v1/market/${e}/stats`,this.getHeaders())).body}async getTicker(e){return this.getMarketStats(e)}async getExchangeInfo(){return(await this.httpClient.get("/market/v1/exchangeInfo",this.getHeaders())).body}async getOrderbook(e,n=!0,s=20){let r=`/clob/v1/orderbook/${e}`,i=20;s>0&&s<100&&(i=s),r+=`?depth=${i}`;const o=await this.httpClient.get(r,this.getHeaders());return n&&o.body&&(o.body.bids&&Array.isArray(o.body.bids)&&(o.body.bids=o.body.bids.map(([a,l])=>[Ee(a),Ee(l)])),o.body.asks&&Array.isArray(o.body.asks)&&(o.body.asks=o.body.asks.map(([a,l])=>[Ee(a),Ee(l)]))),o.body}async getMarketTrades(e,n){var i,o;let s=`/clob/v1/trades?market_id=${e}`;n&&n>0&&(s+=`&limit=${n}`);const r=await this.httpClient.get(s,this.getHeaders());return console.debug("[InfoClient] getMarketTrades response for marketId:",e,"response:",r.body),Array.isArray(r.body)?r.body:(i=r.body)!=null&&i.trades&&Array.isArray(r.body.trades)?r.body.trades:(o=r.body)!=null&&o.data&&Array.isArray(r.body.data)?r.body.data:(console.warn("[InfoClient] getMarketTrades: Unexpected response structure:",r.body),[])}async getRecentTrades(e,n=100){return this.getMarketTrades(e,n)}async getTrades(e,n){let s=`/clob/v1/trades?symbol=${e}`;return n&&n>0&&(s+=`&limit=${n}`),(await this.httpClient.get(s,this.getHeaders())).body}async getAggTrades(e,n,s,r){let i=`/market/v1/aggTrades?symbol=${e}`;return n&&n>0&&(i+=`&limit=${n}`),s&&s>0&&(i+=`&startTime=${s}`),r&&r>0&&(i+=`&endTime=${r}`),(await this.httpClient.get(i,this.getHeaders())).body}async getKlines(e,n,s,r,i){let o=`/clob/v1/klines?symbol=${e}&interval=${n}`;return s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`),(await this.httpClient.get(o,this.getHeaders())).body}async getContinuousKlines(e,n,s,r,i,o){let a=`/market/v1/continuousKlines?pair=${e}&contractType=${n}&interval=${s}`;return r&&r>0&&(a+=`&limit=${r}`),i&&i>0&&(a+=`&startTime=${i}`),o&&o>0&&(a+=`&endTime=${o}`),(await this.httpClient.get(a,this.getHeaders())).body}async getPremiumIndex(e){let n="/market/v1/premiumIndex";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getFundingRate(e,n,s,r){let i="/market/v1/fundingRate";const o=[];return e&&o.push(`symbol=${e}`),n&&n>0&&o.push(`limit=${n}`),s&&s>0&&o.push(`startTime=${s}`),r&&r>0&&o.push(`endTime=${r}`),o.length>0&&(i+="?"+o.join("&")),(await this.httpClient.get(i,this.getHeaders())).body}async getFundingInfo(){return(await this.httpClient.get("/market/v1/fundingInfo",this.getHeaders())).body}async getDeliveryPrice(e){return(await this.httpClient.get(`/market/v1/deliveryPrice?pair=${e}`,this.getHeaders())).body}async getOpenInterest(e){return(await this.httpClient.get(`/market/v1/openInterest?symbol=${e}`,this.getHeaders())).body}async getTopLongShortPositionRatio(e,n,s,r,i){let o=`/market/v1/topLongShortPositionRatio?symbol=${e}&period=${n}`;return s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`),(await this.httpClient.get(o,this.getHeaders())).body}async getGlobalLongShortAccountRatio(e,n,s,r,i){let o=`/market/v1/globalLongShortAccountRatio?symbol=${e}&period=${n}`;return s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`),(await this.httpClient.get(o,this.getHeaders())).body}async getTicker24hr(e){let n="/market/v1/moniker/24hr";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getTickerPrice(e){let n="/market/v1/moniker/price";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getOrderbookMoniker(e){let n="/market/v1/moniker/bookTicker";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getBasis(e,n,s,r,i){let o=`/market/v1/basis?symbol=${e}&period=${n}`;return s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`),(await this.httpClient.get(o,this.getHeaders())).body}async getIndexInfo(e){let n="/market/v1/indexInfo";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getAssetIndex(e){let n="/market/v1/assetIndex";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getConstituents(e){return(await this.httpClient.get(`/market/v1/constituents?symbol=${e}`,this.getHeaders())).body}async getTWAP(e,n){return(await this.httpClient.get(`/market/v1/twap?symbol=${e}&duration=${n}`,this.getHeaders())).body}async getPositions(e,n){var i;if(!e)throw new Error("walletAddress is required for getPositions");let s=`/bucket/v1/address/${e}/positions`;n!==void 0&&(s+=`?active_only=${n}`);const r=await this.httpClient.get(s,this.getHeaders());return Array.isArray(r.body)?r.body:(i=r.body)!=null&&i.positions&&Array.isArray(r.body.positions)?r.body.positions:[]}async getPositionsDecimal(e,n){const s=await this.getPositions(e,n);return Array.isArray(s)?s.map(r=>{const i=r.size,o=r.entry_price||r.entryPrice,a=r.mark_price||r.markPrice,l=r.liquidation_price||r.liquidationPrice,c=r.unrealized_pnl||r.unrealizedPnL;return{...r,size:i&&Ee(i),entry_price:o&&Ee(o),entryPrice:o&&Ee(o),mark_price:a&&Ee(a),markPrice:a&&Ee(a),liquidation_price:l&&Ee(l),liquidationPrice:l&&Ee(l),unrealized_pnl:c&&Ee(c),unrealizedPnL:c&&Ee(c)}}):s}async getBalance(e,n){let s=`/bank/v1/balance/${e}?asset=${n}`;return(await this.httpClient.get(s,this.getHeaders())).body}async getBalances(e){return(await this.httpClient.get(`/bank/v1/balances/${e}`,this.getHeaders())).body}async getBalanceDecimal(e,n){const s=await this.getBalance(e,n);if(s&&typeof s=="object"){const r={...s};return r.balance&&(r.balance=Ee(r.balance)),r.available&&(r.available=Ee(r.available)),r.locked&&(r.locked=Ee(r.locked)),r}return s}async getOrders(e,n){let s=`/clob/v1/address/orders?address=${encodeURIComponent(e)}`;return n&&(s+=`&asset_pair=${encodeURIComponent(n)}`),(await this.httpClient.get(s,this.getHeaders())).body}async getOrder(e){return(await this.httpClient.get(`/clob/v1/order/${e}`,this.getHeaders())).body}async getOrderHistory(e){return(await this.httpClient.get(`/clob/v1/address/orders/history?address=${e}`,this.getHeaders())).body}async getUserTrades(e,n){let s=`/clob/v1/address/trades?address=${e}`;return n&&(s+=`&asset_pair=${n}`),(await this.httpClient.get(s,this.getHeaders())).body}async getTradeHistory(e,n){return this.getUserTrades(e,n)}async getPosition(e,n){let s=`/clob/v1/address/position?address=${e}`;return n&&(s+=`&asset_pair=${n}`),(await this.httpClient.get(s,this.getHeaders())).body}async getBuckets(e){var s;const n=await this.httpClient.get(`/bucket/v1/address/${e}/buckets`,this.getHeaders());return Array.isArray(n.body)?n.body:(s=n.body)!=null&&s.buckets&&Array.isArray(n.body.buckets)?n.body.buckets:[]}async getBucket(e){return(await this.httpClient.get(`/bucket/v1/bucket/${e}`,this.getHeaders())).body}async getMarketData(e){return(await this.httpClient.get(`/clob/v1/market/data?asset_pair=${e}`,this.getHeaders())).body}async getMarketCandles(e,n,s){return(await this.httpClient.get(`/clob/v1/market/candles?asset_pair=${e}&interval=${n}&limit=${s}`,this.getHeaders())).body}async getNonceStatus(e,n=!1){let s=`/router/v1/nonce/status/${e}`;return n&&(s+="?reserve=true"),(await this.httpClient.get(s,this.getHeaders())).body}async getSupportedActions(){return(await this.httpClient.get("/router/v1/tx/supported-actions",this.getHeaders())).body}async validateAction(e){return(await this.httpClient.get(`/router/v1/tx/validate-action?action=${encodeURIComponent(e)}`,this.getHeaders())).body}async getHealthSummary(){return(await this.httpClient.get("/router/v1/health/summary",this.getHeaders())).body}async getHealthDaemons(){return(await this.httpClient.get("/router/v1/health/daemons",this.getHeaders())).body}async getHealthBucket(){return(await this.httpClient.get("/router/v1/health/bucket",this.getHeaders())).body}async getHealthOracle(){return(await this.httpClient.get("/router/v1/health/oracle",this.getHeaders())).body}async getServerTime(){return(await this.httpClient.get("/router/v1/time",this.getHeaders())).body}async getMetricsTPS(){return(await this.httpClient.get("/router/v1/metrics/tps",this.getHeaders())).body}async getMetricsLatency(){return(await this.httpClient.get("/router/v1/metrics/latency",this.getHeaders())).body}}function p8(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["nonce too low","nonce too high","nonce already used","nonce already pending","nonce invalid","nonce expired","nonce mismatch","invalid nonce","nonce out of order"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function g8(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["signature verification failed","invalid signature","unauthenticated","signature mismatch","signature invalid"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function m8(t){if(!t)return[!1,!1];const e=p8(t),n=g8(t);return[e,n]}function e_(t){const[e,n]=m8(t);return e||n}const px="sys::onboard",x8="clob::change_margin_ratio",b8="clob::submit_order",tv="clob::cancel_order",y8="bucket::close_position",v8="clob::modify_order",w8="clob::change_leverage",S8="clob::inter_transfer",k8="clob::swap",C8="bank::mint",_8="bank::extract_to_bucket",E8="bank::withdraw_from_bucket",P8="bank::bucket_transfer",T8="bank::transfer";var Je=(t=>(t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t))(Je||{});class eu{constructor(e){ne(this,"httpClient");ne(this,"infoClient");ne(this,"nonceManager");ne(this,"mnemonic");ne(this,"chainID");ne(this,"walletAddress");ne(this,"nonceCounter",null);this.httpClient=new qm(e.baseURL,e.maxRetries||3),this.infoClient=new hn({baseURL:e.baseURL}),this.nonceManager=new ZC(this.infoClient),this.mnemonic=e.mnemonic,this.chainID=e.chainID||10900}async initialize(){await Re.initialize();const e=await Re.generateAddress(this.mnemonic,0);if(!e.success||!e.address)throw new Error(`Failed to generate wallet address: ${e.error}`);this.walletAddress=e.address}getWalletAddress(){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");return this.walletAddress}async refreshNonceFromServer(){const e=this.getWalletAddress(),n=await this.nonceManager.getExpectedNextNonce(e,!1);this.nonceCounter=n.next_nonce,console.log("[ExchangeClient] Refreshed nonce from server",{walletAddress:e,newNonce:this.nonceCounter})}async getNextNonce(){return this.nonceCounter===null&&await this.refreshNonceFromServer(),this.nonceCounter++,this.nonceCounter.toString()}generateTxID(){const e=Date.now(),n=Math.floor(Math.random()*1e6);return`tx-${e}-${n}`}async getPrivateKeyHex(){const e=this.getWalletAddress(),n=Tc.fromPhrase(this.mnemonic.trim(),"","m/44'/60'/0'/0/0");if(n.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${n.address} does not match ${e}`);const s=BigInt(n.privateKey),r=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(s===0n||s>=r)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const o=s.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(o))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return o}async signPayload(e){const n=this.getWalletAddress(),s=await this.getPrivateKeyHex(),r=Math.floor(Date.now()/1e3);let i;e.deadline&&(i=parseInt(e.deadline,10));const o={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:r,payload:e};i!==void 0&&(o.deadline=i);const a=await Re.generateSingleSignature(JSON.stringify(o),s,n.toLowerCase());if(!a.success||!a.signature)throw new Error(a.error||"Failed to generate signature");return a.signature}buildOrderPayload(e){const n=typeof e.price=="string"?e.price:xt(e.price),s=typeof e.quantity=="string"?e.quantity:xt(e.quantity),r={action:b8,marketId:e.marketId,side:e.side.toUpperCase(),orderType:e.orderType.toUpperCase(),price:n,quantity:s};return e.leverage&&(r.leverage=e.leverage),e.takeProfit&&(r.takeProfit=e.takeProfit),e.stopLoss&&(r.stopLoss=e.stopLoss),r}async buildCompleteMessage(e){const s=Math.floor(Date.now()/1e3)+3600,r=await this.getNextNonce();return{...e,owner:this.getWalletAddress(),nonce:r,deadline:s.toString()}}buildEIP712Tx(e,n){const s=Math.floor(Date.now()/1e3);let r;e.deadline&&(r=parseInt(e.deadline,10));const i={txId:this.generateTxID(),sigType:1,threshold:1,timestamp:s,payload:e,signatures:[{signer:this.getWalletAddress(),signature:n}]};return r!==void 0&&(i.deadline=r),i}async placeOrder(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.side||e.side.toUpperCase()!=="BUY"&&e.side.toUpperCase()!=="SELL")throw new Error("side must be BUY or SELL");if(!e.orderType||e.orderType.toUpperCase()!=="LIMIT"&&e.orderType.toUpperCase()!=="MARKET")throw new Error("orderType must be LIMIT or MARKET");const n=typeof e.price=="string"?parseFloat(e.price):e.price,s=typeof e.quantity=="string"?parseFloat(e.quantity):e.quantity;if(!n||n<=0)throw new Error("price must be positive");if(!s||s<=0)throw new Error("quantity must be positive");this.walletAddress||await this.initialize();const r=this.buildOrderPayload(e),i=await this.buildCompleteMessage(r),o=await this.signPayload(i),a=Math.floor(Date.now()/1e3)-5,l=`order-${Date.now()}-${Math.floor(Math.random()*1e6)}`,c=e.side.toUpperCase()==="BUY",u={address:this.getWalletAddress(),asset_pair:e.marketId,market_id:e.marketId,price:i.price,size:i.quantity,is_buy:c,order_type:e.orderType.toUpperCase(),timestamp:a,client_order_id:l,nonce:i.nonce,deadline:i.deadline,signature:o,time_in_force:e.timeInForce||"GTC"};return e.leverage&&(u.leverage=e.leverage),e.takeProfit&&(u.take_profit=e.takeProfit),e.stopLoss&&(u.stop_loss=e.stopLoss),e.postOnly&&(u.post_only=!0),e.hidden&&(u.hidden=!0),e.displayQuantity&&(u.display_quantity=e.displayQuantity),e.reduceOnly&&(u.reduce_only=!0),(await this.httpClient.post("/clob/v1/order",u)).body}async cancelOrder(e){var l,c,u,d,f,g;if(console.log("[ExchangeClient.cancelOrder] Starting cancel order request",{orderId:e.orderId,marketId:e.marketId,timestamp:new Date().toISOString()}),!e.orderId||e.orderId==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: orderId is empty",e),new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: marketId is empty",e),new Error("marketId cannot be empty");console.log("[ExchangeClient.cancelOrder] Input validation passed",{orderId:e.orderId,marketId:e.marketId}),this.walletAddress?console.log("[ExchangeClient.cancelOrder] Using existing wallet",{walletAddress:this.walletAddress}):(console.log("[ExchangeClient.cancelOrder] Wallet not initialized, initializing now..."),await this.initialize(),console.log("[ExchangeClient.cancelOrder] Wallet initialized",{walletAddress:this.walletAddress}));const n=this.getWalletAddress(),s={action:tv,orderId:e.orderId,marketId:e.marketId,address:n};console.log("[ExchangeClient.cancelOrder] Payload built",{payload:s,action:tv});const r=await this.buildCompleteMessage(s);console.log("[ExchangeClient.cancelOrder] Complete message built",{action:r.action,orderId:r.orderId,marketId:r.marketId,address:r.address,owner:r.owner,nonce:r.nonce,deadline:r.deadline,hasAllFields:!!(r.action&&r.orderId&&r.marketId&&r.owner&&r.nonce&&r.deadline)}),console.log("[ExchangeClient.cancelOrder] Generating signature...");const i=await this.signPayload(r);console.log("[ExchangeClient.cancelOrder] Signature generated",{signatureLength:i==null?void 0:i.length,signaturePrefix:(i==null?void 0:i.substring(0,10))+"..."});const o=this.buildEIP712Tx(r,i);console.log("[ExchangeClient.cancelOrder] EIP712Tx built",{eip712Tx:{txId:o.txId,sigType:o.sigType,threshold:o.threshold,timestamp:o.timestamp,deadline:o.deadline,payloadAction:(l=o.payload)==null?void 0:l.action,payloadOrderId:(c=o.payload)==null?void 0:c.orderId,payloadMarketId:(u=o.payload)==null?void 0:u.marketId,signaturesCount:(d=o.signatures)==null?void 0:d.length,signer:(g=(f=o.signatures)==null?void 0:f[0])==null?void 0:g.signer}});const a=this.httpClient.getBaseURL?this.httpClient.getBaseURL():"unknown";console.log("[ExchangeClient.cancelOrder] Submitting to /router/v1/tx endpoint...",{endpoint:"/router/v1/tx",baseURL:a,fullURL:`${a}/router/v1/tx`});try{const m=await this.httpClient.post("/router/v1/tx",o);return console.log("[ExchangeClient.cancelOrder] API response received",{status:m.statusCode,hasBody:!!m.body,responseBody:m.body,orderId:e.orderId}),m.body}catch(m){if(e_(m)){console.log("[ExchangeClient.cancelOrder] Nonce error detected, refreshing nonce from server",{error:m instanceof Error?m.message:String(m),orderId:e.orderId}),await this.refreshNonceFromServer();const b=await this.buildCompleteMessage(s),w=await this.signPayload(b),p=this.buildEIP712Tx(b,w);console.log("[ExchangeClient.cancelOrder] Retrying with refreshed nonce",{newNonce:b.nonce});const y=await this.httpClient.post("/router/v1/tx",p);return console.log("[ExchangeClient.cancelOrder] Retry successful",{status:y.statusCode,responseBody:y.body}),y.body}throw console.error("[ExchangeClient.cancelOrder] API call failed",{error:m,errorMessage:m instanceof Error?m.message:String(m),errorStack:m instanceof Error?m.stack:void 0,orderId:e.orderId,marketId:e.marketId,walletAddress:this.walletAddress}),m}}async modifyOrder(e){if(!e.orderId||e.orderId==="")throw new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newPrice===void 0&&e.newQuantity===void 0)throw new Error("at least one of newPrice or newQuantity must be provided");this.walletAddress||await this.initialize();const n={action:v8,orderId:e.orderId,marketId:e.marketId};e.newPrice!==void 0&&(n.newPrice=typeof e.newPrice=="string"?e.newPrice:xt(e.newPrice)),e.newQuantity!==void 0&&(n.newQuantity=typeof e.newQuantity=="string"?e.newQuantity:xt(e.newQuantity));const s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async changeLeverage(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newLeverage===void 0)throw new Error("newLeverage must be provided");this.walletAddress||await this.initialize();const n={action:w8,marketId:e.marketId,newLeverage:typeof e.newLeverage=="string"?e.newLeverage:xt(e.newLeverage),address:this.getWalletAddress()};e.leverageType&&(n.leverageType=e.leverageType),e.bucketId&&(n.bucketId=e.bucketId),e.reason&&(n.reason=e.reason);const s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async closePosition(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n={action:y8,marketId:e.marketId,address:this.getWalletAddress()};e.positionId&&(n.positionId=e.positionId),e.quantity!==void 0&&(n.quantity=typeof e.quantity=="string"?e.quantity:xt(e.quantity));const s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async swap(e){if(!e.fromToken||e.fromToken==="")throw new Error("fromToken cannot be empty");if(!e.toToken||e.toToken==="")throw new Error("toToken cannot be empty");if(e.amountIn===void 0||typeof e.amountIn=="number"&&e.amountIn<=0)throw new Error("amountIn must be positive");if(e.minAmountOut===void 0||typeof e.minAmountOut=="number"&&e.minAmountOut<=0)throw new Error("minAmountOut must be positive");this.walletAddress||await this.initialize();const n={action:k8,fromToken:e.fromToken,toToken:e.toToken,amountIn:typeof e.amountIn=="string"?e.amountIn:xt(e.amountIn),minAmountOut:typeof e.minAmountOut=="string"?e.minAmountOut:xt(e.minAmountOut)};e.path&&e.path.length>0&&(n.path=e.path);const s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async changeMarginRatio(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n={action:x8,marketId:e.marketId,address:this.getWalletAddress()};e.bucketId&&(n.bucketId=e.bucketId);const s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async internTransfer(e){if(!e.fromAccount||e.fromAccount==="")throw new Error("fromAccount cannot be empty");if(!e.toAccount||e.toAccount==="")throw new Error("toAccount cannot be empty");if(!e.tokenAddress||e.tokenAddress==="")throw new Error("tokenAddress cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n={action:S8,fromAccount:e.fromAccount,toAccount:e.toAccount,amount:typeof e.amount=="string"?e.amount:xt(e.amount),tokenAddress:e.tokenAddress,address:this.getWalletAddress()},s=await this.buildCompleteMessage(n),r=await this.signPayload(s),i=this.buildEIP712Tx(s,r);return(await this.httpClient.post("/router/v1/tx",i)).body}async bucketTransfer(e){if(!e.fromBucketId||e.fromBucketId.trim()==="")throw new Error("fromBucketId cannot be empty");if(!e.toBucketId||e.toBucketId.trim()==="")throw new Error("toBucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=typeof e.amount=="string"?e.amount:xt(e.amount),r={action:P8,fromBucketId:e.fromBucketId,toBucketId:e.toBucketId,asset:e.assetId,amount:s},i=await this.buildCompleteMessage(r),o=await this.signPayload(i),a=Math.floor(Date.now()/1e3),l={address:n,source_bucket_id:e.fromBucketId,target_bucket_id:e.toBucketId,amount:s,reason:"sdk_transfer",timestamp:a,nonce:i.nonce,deadline:i.deadline,signature:o,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bucket/v1/bucket/transfer",l)).body}async extractToBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=typeof e.amount=="string"?e.amount:xt(e.amount),r={action:_8,bucketId:e.bucketId,asset:e.assetId,amount:s},i=await this.buildCompleteMessage(r),o=await this.signPayload(i),a=Math.floor(Date.now()/1e3),l={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:a,nonce:i.nonce,deadline:i.deadline,signature:o,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/extract-to-bucket",l)).body}async withdrawFromBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=typeof e.amount=="string"?e.amount:xt(e.amount),r={action:E8,bucketId:e.bucketId,asset:e.assetId,amount:s},i=await this.buildCompleteMessage(r),o=await this.signPayload(i),a=Math.floor(Date.now()/1e3),l={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:a,nonce:i.nonce,deadline:i.deadline,signature:o,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/withdraw-from-bucket",l)).body}async bankMint(e){if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=typeof e.amount=="string"?e.amount:xt(e.amount),s={action:C8,asset:e.assetId,amount:n},r=await this.buildCompleteMessage(s),i=await this.signPayload(r),o=this.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async bankTransfer(e){if(!e.to||e.to.trim()==="")throw new Error("to address cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=typeof e.amount=="string"?e.amount:xt(e.amount),s={action:T8,to:e.to,asset:e.assetId,amount:n},r=await this.buildCompleteMessage(s),i=await this.signPayload(r),o=this.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}}class I8{constructor(e){ne(this,"ws",null);ne(this,"state",Je.Disconnected);ne(this,"handlers",new Map);ne(this,"reconnectTimer",null);ne(this,"reconnectAttempts",0);ne(this,"config");ne(this,"originalConfig");ne(this,"pingInterval",null);ne(this,"stateChangeHandlers",new Set);this.originalConfig=e;const n=this.convertHTTPToWebSocketURL(e.url);this.config={url:n,authToken:e.authToken||"",walletAddress:e.walletAddress||"",deviceID:e.deviceID||"",reconnectInterval:e.reconnectInterval||5e3,maxReconnectAttempts:e.maxReconnectAttempts||10}}convertHTTPToWebSocketURL(e){if(e.startsWith("ws://")||e.startsWith("wss://")){if(e.includes("router.morpheum.io")){const n=new URL(e);if(!n.pathname||n.pathname==="/")return n.pathname="/websocket",n.toString()}return e}if(e.includes("localhost")||e.includes("127.0.0.1")){const n=e.match(/:(\d+)/);return`ws://localhost:${n?n[1]:"8080"}/websocket`}if(e.startsWith("http://")){const n=e.replace("http://","ws://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(e.startsWith("https://")){const n=e.replace("https://","wss://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(!e||e.trim()===""||e.includes("router.morpheum.io"))return"wss://router.morpheum.io/websocket";try{const n=new URL(e.startsWith("http")?e:`https://${e}`),s=n.protocol==="https:"?"wss:":"ws:",r=n.pathname&&n.pathname!=="/"?n.pathname:"",i=r.endsWith("/websocket")?r:`${r}/websocket`;return`${s}//${n.host}${i}`}catch{return console.warn(`Failed to parse URL ${e}, defaulting to router.morpheum.io/websocket`),"wss://router.morpheum.io/websocket"}}getConnectionURL(){const e=[];this.config.authToken&&e.push(`token=${encodeURIComponent(this.config.authToken)}`),"walletAddress"in this.originalConfig&&this.originalConfig.walletAddress!==void 0&&e.push(`wallet=${encodeURIComponent(this.originalConfig.walletAddress||"")}`),this.config.deviceID&&e.push(`device_id=${encodeURIComponent(this.config.deviceID)}`);const n=this.config.url.includes("?")?"&":"?";return e.length>0?`${this.config.url}${n}${e.join("&")}`:this.config.url}async connect(){if(!(this.state===Je.Connected||this.state===Je.Connecting))return this.setState(Je.Connecting),new Promise((e,n)=>{let s=!1,r=!1,i=null;const o=a=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),this.setState(Je.Disconnected),n(a))};try{const a=this.getConnectionURL();console.log("Connecting to WebSocket:",a);const l=new WebSocket(a);i=window.setTimeout(()=>{!s&&!r&&(l.close(),o(new Error(`WebSocket connection timeout after 10 seconds. Unable to connect to ${a}. Check if the server is running and accessible.`)))},1e4),l.onopen=()=>{if(i!==null&&(clearTimeout(i),i=null),s=!0,this.ws=l,this.setState(Je.Connected),this.reconnectAttempts=0,this.config.authToken)try{const c={type:"auth",token:this.config.authToken};this.config.deviceID&&(c.device_id=this.config.deviceID),l.send(JSON.stringify(c))}catch(c){console.warn("Failed to send auth message after connection:",c)}this.startPing(),e()},l.onmessage=c=>{try{const u=JSON.parse(c.data);this.handleMessage(u)}catch(u){console.error("Failed to parse WebSocket message:",u)}},l.onerror=c=>{console.error("WebSocket error event:",c)},l.onclose=c=>{if(i!==null&&(clearTimeout(i),i=null),this.ws=null,this.stopPing(),!s&&!r){const u=c.code,d=c.reason||"Unknown reason",f=c.wasClean;let g=`WebSocket connection failed. Close code: ${u}`;u===1006?g=`WebSocket connection failed (abnormal closure, code ${u}). Unable to connect to ${a}. Possible causes: Server is not running, network issue, firewall blocking connection, or incorrect URL.`:u===1002?g=`WebSocket protocol error (code ${u}). The server may not support WebSocket protocol or there's a protocol mismatch.`:u===1003?g=`WebSocket unsupported data type (code ${u}).`:u===1008?g=`WebSocket connection closed due to policy violation (code ${u}): ${d}`:u===1011?g=`WebSocket server error (code ${u}): ${d}`:u===1e3?g=`WebSocket connection closed normally (code ${u}) but before opening.`:d&&d!=="Unknown reason"&&(g+=` Reason: ${d}`),!f&&u===1006&&(g+=" This usually indicates the connection was refused or the server is unreachable."),o(new Error(g))}else s&&(this.setState(Je.Disconnected),this.scheduleReconnect())}}catch(a){i!==null&&(clearTimeout(i),i=null);const l=a instanceof Error?a.message:String(a);o(new Error(`Failed to create WebSocket connection: ${l}`))}})}disconnect(){this.cancelReconnect(),this.stopPing(),this.ws&&(this.ws.close(),this.ws=null),this.handlers.clear(),this.stateChangeHandlers.clear(),this.setState(Je.Disconnected)}send(e){if(this.state!==Je.Connected||!this.ws)throw new Error("WebSocket not connected");this.ws.send(JSON.stringify(e))}on(e,n){this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(n)}off(e,n){if(!n){this.handlers.delete(e);return}const s=this.handlers.get(e);if(s){const r=s.indexOf(n);r>-1&&s.splice(r,1)}}getState(){return this.state}isConnected(){return this.state===Je.Connected}setState(e){const n=this.state;this.state=e,n!==e&&this.stateChangeHandlers.forEach(s=>{try{s(e)}catch(r){console.error("Error in state change handler:",r)}})}onStateChange(e){return this.stateChangeHandlers.add(e),()=>{this.stateChangeHandlers.delete(e)}}handleMessage(e){let n;if(typeof e.type=="string")if(e.type==="data")if(typeof e.channel=="string")n=e.channel;else{console.error("Missing channel in data message");return}else e.type==="error"?(n="error",e.error&&console.error("WebSocket server error:",{code:e.error.code,message:e.error.message,details:e.error.details})):e.type==="ack"?n="ack":e.type==="pong"?n="pong":n=e.type;else typeof e.event=="string"?n=e.event:n="message";const s=this.handlers.get(n)||[],r=this.handlers.get("*")||[];s.forEach(i=>{try{i(e)}catch(o){console.error(`Error in handler for ${n}:`,o)}}),n!=="error"&&r.forEach(i=>{try{i(e)}catch(o){console.error("Error in wildcard handler:",o)}})}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}this.reconnectAttempts++,this.setState(Je.Reconnecting),this.reconnectTimer=window.setTimeout(()=>{this.connect().catch(e=>{console.error("Reconnection failed:",e)})},this.config.reconnectInterval)}cancelReconnect(){this.reconnectTimer!==null&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectAttempts=0}startPing(){this.pingInterval=window.setInterval(()=>{this.ws&&this.state===Je.Connected&&this.send({type:"ping"})},3e4)}stopPing(){this.pingInterval!==null&&(clearInterval(this.pingInterval),this.pingInterval=null)}setAuthToken(e,n,s){this.config.authToken=e,this.config.walletAddress=n,this.config.deviceID=s,this.originalConfig.authToken=e,this.originalConfig.walletAddress=n,this.originalConfig.deviceID=s,console.log(`Auth set: address=${n}, device=${s}`)}updateAuth(e,n,s){e!==void 0&&(this.config.authToken=e,this.originalConfig.authToken=e),n!==void 0&&(this.config.walletAddress=n,this.originalConfig.walletAddress=n),s!==void 0&&(this.config.deviceID=s,this.originalConfig.deviceID=s),this.isConnected()&&(this.disconnect(),this.connect())}}class co{constructor(e){ne(this,"wsClient");ne(this,"subscriptions",new Map);ne(this,"lastPriceWrappedCallbacks",new Map);ne(this,"wrappedCallbacks",new Map);ne(this,"multiFeedSubscriptions",new Map);ne(this,"multiFeedHandlerRegistered",!1);this.wsClient=new I8({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID})}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.lastPriceWrappedCallbacks.clear(),this.wrappedCallbacks.clear(),this.multiFeedSubscriptions.clear(),this.multiFeedHandlerRegistered=!1}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,n,s){this.wsClient.setAuthToken(e,n,s)}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(n){return console.error("Failed to parse router data field:",n),null}return e}extractRouterData(e){if(e.type==="data"&&e.data){const n=this.parseRouterData(e.data);return n||console.warn("[SubscriptionClient] Failed to parse router data:",e.data),n}return e.type==="error"&&e.error?(console.error("WebSocket error response:",e.error),null):(e.type==="ack"||(e.type!=="data"?console.debug("[SubscriptionClient] Unexpected message type:",e.type,"Full message:",e):e.data||console.warn("[SubscriptionClient] Message type is 'data' but missing data field:",e)),null)}subscribeOrderbook(e,n,s=!0){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="orderbook";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&(s&&l.bids&&Array.isArray(l.bids)&&(l.bids=l.bids.map(([c,u])=>[Ee(c),Ee(u)])),s&&l.asks&&Array.isArray(l.asks)&&(l.asks=l.asks.map(([c,u])=>[Ee(c),Ee(u)])),n(l))};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeOrderbook(e,n){var i,o;const s="orderbook",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTrades(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="trades";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"trades",params:{market_id:e.toString()}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeTrades(e,n){var i,o;const s="trades",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"trades",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTicker(e,n){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="moniker",r="ticker";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&n(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(s,i);try{this.wsClient.send({type:"subscribe",channel:s,params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTicker(e,n){var o,a;const s="ticker",r="moniker",i=this.subscriptions.get(s)||[];if(n){const l=i.indexOf(n);if(l>-1){i.splice(l,1),this.subscriptions.set(s,i);const c=(o=this.wrappedCallbacks.get(s))==null?void 0:o.get(n);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(s).delete(n))}}else{const l=this.wrappedCallbacks.get(s);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((a=this.subscriptions.get(s))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:r,params:{market_id:e.toString()}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeUserUpdates(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="positions";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"positions",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeUserUpdates(e){var r,i;const n="positions",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"positions"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeLastPrice(e,n,s=!0){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="last_price";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=o=>{console.debug("[SubscriptionClient] last_price message received:",o);const a=this.extractRouterData(o);if(!a){console.warn("[SubscriptionClient] Failed to extract trade data from message:",o);return}if(console.debug("[SubscriptionClient] Extracted trade data:",a),!a.price){console.warn("[SubscriptionClient] Trade data missing price field:",a);return}s&&(a.price&&(a.price=Ee(a.price)),a.quantity&&(a.quantity=Ee(a.quantity))),console.debug("[SubscriptionClient] Calling callback with trade data:",a),n(a)};this.lastPriceWrappedCallbacks.set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){this.lastPriceWrappedCallbacks.delete(n);const a=this.subscriptions.get(r)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(r,a)),o}}unsubscribeLastPrice(e,n){var i;const s="last_price",r=this.subscriptions.get(s)||[];if(n){const o=r.indexOf(n);if(o>-1){r.splice(o,1),this.subscriptions.set(s,r);const a=this.lastPriceWrappedCallbacks.get(n);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(n))}}else r.forEach(o=>{const a=this.lastPriceWrappedCallbacks.get(o);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(o))}),this.subscriptions.delete(s);if(((i=this.subscriptions.get(s))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeFundingRate(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="funding_rate";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"funding_rate",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeFundingRate(e,n){var i,o;const s="funding_rate",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"funding_rate",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeBuckets(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="buckets";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"buckets",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBuckets(e){var r,i;const n="buckets",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"buckets"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeDeviation(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="deviation";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"deviation",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeDeviation(e,n){var i,o;const s="deviation",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"deviation",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeIndexPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="index_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"index_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeIndexPrice(e,n){var i,o;const s="index_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"index_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeKline(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n)throw new Error("Interval is required for kline subscription");const r="kline";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeKline(e,n,s){var o,a;const r="kline",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMarkPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="mark_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"mark_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeMarkPrice(e,n){var i,o;const s="mark_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"mark_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribePriceFeed(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="price_feed";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"price_feed",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribePriceFeed(e,n){var i,o;const s="price_feed",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"price_feed",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTWAP(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n||n<=0)throw new Error("Window size must be a positive number");const r="twap";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTWAP(e,n,s){var o,a;const r="twap",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMultiFeed(e,n,s,r){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const i="multi_feed";if(!this.multiFeedHandlerRegistered){const o=a=>{if(a.type==="data"&&a.channel==="multi_feed"&&a.sub_channel){const l=a.sub_channel,c=this.multiFeedSubscriptions.get(l)||[],u=this.subscriptions.get(i)||[];let d=a.data;if(typeof d=="string")try{d=JSON.parse(d)}catch(f){console.error("Failed to parse multi-feed data field:",f);return}d&&(c.forEach(f=>{try{f(d)}catch(g){console.error(`Error in multi-feed sub-channel callback for ${l}:`,g)}}),u.forEach(f=>{try{f({sub_channel:l,data:d})}catch(g){console.error("Error in multi-feed callback:",g)}}))}};this.wsClient.on(i,o),this.multiFeedHandlerRegistered=!0}this.subscriptions.has(i)||this.subscriptions.set(i,[]),this.subscriptions.get(i).push(s);try{const o={market_id:e.toString(),symbol:n};r&&(o.interval=r),this.wsClient.send({type:"subscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed",params:o})}catch(o){const a=this.subscriptions.get(i)||[],l=a.indexOf(s);throw l>-1&&(a.splice(l,1),this.subscriptions.set(i,a)),o}}subscribeMultiFeedSubChannel(e,n,s,r,i){if(this.multiFeedSubscriptions.has(s)||this.multiFeedSubscriptions.set(s,[]),this.multiFeedSubscriptions.get(s).push(r),(this.subscriptions.get("multi_feed")||[]).length===0){const a=()=>{};this.subscribeMultiFeed(e,n,a,i)}}unsubscribeMultiFeed(e,n,s){var o,a;const r="multi_feed",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);l>-1&&(i.splice(l,1),this.subscriptions.set(r,i))}else this.subscriptions.delete(r);if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.multiFeedSubscriptions.clear(),((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}unsubscribeMultiFeedSubChannel(e,n){const s=this.multiFeedSubscriptions.get(e)||[];if(n){const r=s.indexOf(n);r>-1&&(s.splice(r,1),s.length===0?this.multiFeedSubscriptions.delete(e):this.multiFeedSubscriptions.set(e,s))}else this.multiFeedSubscriptions.delete(e)}subscribeBalances(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="balances";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"balances",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBalances(e){var r,i;const n="balances",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"balances"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeOrders(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="orders";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"orders",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeOrders(e){var r,i;const n="orders",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orders"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}}async function M8(t,e,n,s,r){const i=Tc.fromPhrase(t.trim(),"","m/44'/60'/0'/0/0");if(i.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${i.address} does not match provided ${e}`);let o;try{o=new Gs(i.privateKey)}catch(v){throw new Error(`Invalid private key: cannot create signing key - ${v.message}`)}const a=Zc(o.publicKey);if(a.toLowerCase()!==e.toLowerCase())throw new Error(`Private key validation failed: derived address ${a} does not match ${e}`);const l=BigInt(i.privateKey),c=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(l===0n||l>=c)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const d=l.toString(16).toLowerCase().padStart(64,"0"),f=xe("0x"+d);if(f.length!==32)throw new Error(`Invalid private key: expected 32 bytes, got ${f.length}`);if(f.every(v=>v===0))throw new Error("Invalid private key: cannot be zero");const m=BigInt("0x"+d);if(m!==l)throw new Error(`Private key encoding error: bytes do not match BigInt value. Original: ${l.toString(16)}, Reconstructed: ${m.toString(16)}`);const b=d;if(b.length!==64)throw new Error(`Invalid private key format: expected exactly 64 hex chars, got ${b.length}. This should never happen with a valid 32-byte private key.`);if(!/^[0-9a-f]{64}$/.test(b))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");const w=b,p={action:px,owner:e.toLowerCase(),nonce:n,timestamp:s,deadline:r},y={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:s,payload:p,deadline:parseInt(r,16)};console.log("[Onboard] Signing EIP-712 typed data with generateSingleSignature:",y),console.log("[Onboard] Private key format validated:",{length:w.length,format:"64 lowercase hex chars (no 0x prefix) - matches Go's hex.EncodeToString",preview:`${w.substring(0,8)}...${w.substring(56)}`,isValidSecp256k1:!0,withinCurveOrder:l<c,notZero:l!==0n,bytesLength:f.length,fullHex:w,firstByte:w.substring(0,2),lastByte:w.substring(62,64)}),console.log("[Onboard] Calling WASM GenerateSingleSignature with:",{txJSONLength:JSON.stringify(y).length,privateKeyHexLength:w.length,privateKeyHexPreview:w,signerAddress:e.toLowerCase()});const x=await Re.generateSingleSignature(JSON.stringify(y),w,e.toLowerCase());if(console.log(x),!x.success||!x.signature)throw new Error(x.error||"Failed to generate signature");return console.log("[Onboard] signature:",x.signature),x.signature}async function R8(t){var e,n;try{const s=await M8(t.mnemonic,t.walletAddress,t.message.nonce,t.message.timestamp,t.message.deadline);console.log("[Onboard] Signature generated successfully, length:",s.length);const r={address:t.walletAddress,signature:s,nonce:t.message.nonce,timestamp:t.timestamp,deadline:t.message.deadline,action:px};t.username&&(r.username=t.username),t.referralCode&&(r.referral_code=t.referralCode),console.log("[Onboard] Request body:",{...r,signature:s.substring(0,20)+"..."});const o=await new qm(t.baseURL).post("/auth/v1/onboard",r);if(o.statusCode===200&&o.body){const a=o.body.access_token||o.body.authToken||o.body.token||o.body.accessToken,l=o.body.refresh_token||o.body.refreshToken,c=o.body.expires_at||o.body.expiresAt||(o.body.expires_in?t.timestamp+o.body.expires_in:void 0);return a?{success:!0,authToken:a,refreshToken:l,expiresAt:c}:{success:!1,error:"Response missing authToken field"}}else{const a=((e=o.body)==null?void 0:e.message)||((n=o.body)==null?void 0:n.error)||`HTTP ${o.statusCode}: ${o.body}`,l=new Error(a);throw l.responseBody=o.body,l.statusCode=o.statusCode,l}}catch(s){throw s}}const O8={auth:{maxRetries:4,baseDelay:500,maxDelay:3e3,jitter:!0,multiplier:2},http:{maxRetries:3,baseDelay:100,maxDelay:5e3,jitter:!0,multiplier:2},nonce:{maxRetries:5,baseDelay:200,maxDelay:2e3,jitter:!0,multiplier:1.5}};function A8(t,e){let n=t.baseDelay*Math.pow(t.multiplier,e);n>t.maxDelay&&(n=t.maxDelay);{const s=n*.25*Math.random();n+=s}return Math.floor(n)}function D8(t){return new Promise(e=>setTimeout(e,t))}async function N8(t,e,n=()=>!0){let s;for(let r=0;r<=t.maxRetries;r++)try{return await e()}catch(i){if(s=i,!await Promise.resolve(n(i)))throw i;if(r>=t.maxRetries)break;const a=A8(t,r);await D8(a)}throw new Error(`Operation failed after ${t.maxRetries+1} attempts: ${(s==null?void 0:s.message)||s}`)}async function t_(t,e,n,s){try{Re.isReady()||await Re.initialize();const r=await Re.generateAddress(t,0);if(!r.success||!r.address)return{success:!1,error:`Failed to generate address: ${r.error}`};const i=r.address.toLowerCase(),o=new hn({baseURL:e}),a=new ZC(o);let l=null;try{return await N8(O8.auth,async()=>{console.log(`[Onboard] Attempt starting - currentNonce: ${l}`),l===null?(l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] First attempt: queried server, using next nonce: ${l}`)):console.log(`[Onboard] Retry attempt: using incremented nonce ${l} from previous failure`);let u=0;const d=10;for(;u<d;)try{await a.validateNonce(i,l,!0);break}catch(w){if(u++,w.message.includes("already pending")||w.message.includes("already used")){if(l=l+1,console.log(`[Onboard] Nonce ${l-1} already pending, incrementing to ${l}`),u>=d)throw new Error(`Failed to find available nonce after ${d} attempts`)}else throw w}const f=Math.floor(Date.now()/1e3),g=f+3600,m={action:px,owner:i,nonce:wy(l),timestamp:f,deadline:wy(g)};let b;try{b=await R8({mnemonic:t,walletAddress:i,message:m,baseURL:e,username:n,referralCode:s,timestamp:f})}catch(w){if(l!==null){const p=l;try{await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Rejected nonce ${p}, incremented to nonce ${l} (will use on retry)`)}catch(y){console.warn("[Onboard] Failed to reject nonce after thrown error:",y),l=l+1,console.log(`[Onboard] Incremented nonce to ${l} (reject failed but incrementing anyway)`)}}else console.warn("[Onboard] Error thrown but currentNonce is null, cannot reject/increment");throw w.currentNonce=l,w}if(!b.success){if(l!==null){const p=l;await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Request failed with nonce ${p}, rejected and incremented to ${l} (will keep incrementing until it works)`)}const w=new Error(b.error||"Onboarding failed");throw w.onboardResult=b,w}return l!==null&&await a.commitNonce(i,l,!0),b},async u=>{var p,y,x;const d=String(u).toLowerCase(),f=((p=u==null?void 0:u.message)==null?void 0:p.toLowerCase())||d,g=(u==null?void 0:u.responseBody)||(u==null?void 0:u.onboardResult),m=((y=g==null?void 0:g.error)==null?void 0:y.toLowerCase())||((x=g==null?void 0:g.message)==null?void 0:x.toLowerCase())||"";if(`${f} ${d} ${m}`.toLowerCase().includes("nonce already pending")){if(l!==null){const v=l;l=l+1,console.log(`[Onboard] Off-chain operation: nonce ${v} already pending/used, incrementing to ${l} (server will validate)`)}else try{l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] currentNonce was null, queried server for starting nonce: ${l}`)}catch(v){console.warn("[Onboard] Failed to query server nonce:",v),l=1}return!0}return e_(u)?(console.log('[Onboard] Nonce-consuming error detected (not "already pending"), clearing currentNonce to force re-query'),l=null,!0):!["failed to generate address","address mismatch","invalid mnemonic"].some(v=>d.includes(v))})}catch(c){if(l!==null)try{await a.rejectNonce(i,l,!0)}catch(u){console.warn("[Onboard] Failed to reject nonce during cleanup:",u)}return{success:!1,error:(c==null?void 0:c.message)||"Unknown error during onboarding"}}}catch(r){return{success:!1,error:(r==null?void 0:r.message)||"Unknown error during onboarding"}}}const L8=Object.freeze(Object.defineProperty({__proto__:null,onboardAndGetAuthToken:t_},Symbol.toStringTag,{value:"Module"})),nv=t=>{let e;const n=new Set,s=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(g=>g(e,f))}},r=()=>e,a={setState:s,getState:r,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(s,r,a);return a},j8=t=>t?nv(t):nv,F8=t=>t;function z8(t,e=F8){const n=ie.useSyncExternalStore(t.subscribe,ie.useCallback(()=>e(t.getState()),[t,e]),ie.useCallback(()=>e(t.getInitialState()),[t,e]));return ie.useDebugValue(n),n}const sv=t=>{const e=j8(t),n=s=>z8(e,s);return Object.assign(n,e),n},B8=t=>t?sv(t):sv,ot=B8((t,e)=>({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,selectedMarketId:null,loadingMarkets:!1,loadingOrderbooks:new Set,loadingTickers:new Set,loadingTrades:new Set,errors:new Map,setMarkets:n=>{const s=new Map,r=new Map;n.forEach(a=>{s.set(a.id,a),a.symbol&&r.set(a.symbol,a),a.moniker&&r.set(a.moniker,a)});let o=e().selectedMarketId;if(!o&&n.length>0){const l=n.find(u=>u.active)||n[0],c=l.market_id?l.market_id:l.id?typeof l.id=="string"?l.id:l.id.toString():null;c&&(o=c)}t({markets:n,marketsById:s,marketsBySymbol:r,selectedMarketId:o,lastUpdated:new Map(e().lastUpdated).set("markets",Date.now())})},setMarket:n=>{const s=e(),r=new Map(s.marketsById),i=new Map(s.marketsBySymbol);r.set(n.id,n),n.symbol&&i.set(n.symbol,n),n.moniker&&i.set(n.moniker,n);const o=s.markets.find(a=>a.id===n.id)?s.markets.map(a=>a.id===n.id?n:a):[...s.markets,n];t({markets:o,marketsById:r,marketsBySymbol:i})},getMarket:n=>e().marketsById.get(n),getMarketBySymbol:n=>e().marketsBySymbol.get(n),setSelectedMarketId:n=>{t({selectedMarketId:n})},setOrderbook:(n,s)=>{const r=e(),i=new Map(r.orderbooks);i.set(n,{...s,timestamp:Date.now()}),t({orderbooks:i,lastUpdated:new Map(r.lastUpdated).set(n,Date.now())})},getOrderbook:n=>e().orderbooks.get(n),updateOrderbook:(n,s)=>{const r=e(),i=r.orderbooks.get(n);if(i){const o={...i,...s,timestamp:Date.now()};r.setOrderbook(n,o)}else r.setOrderbook(n,{bids:s.bids||[],asks:s.asks||[],timestamp:Date.now()})},setTicker:(n,s)=>{const r=e(),i=new Map(r.tickers);i.set(n,{...s,marketId:n,timestamp:Date.now()}),t({tickers:i,lastUpdated:new Map(r.lastUpdated).set(`ticker_${n}`,Date.now())})},getTicker:n=>e().tickers.get(n),setRecentTrades:(n,s)=>{const r=e(),i=new Map(r.recentTrades);i.set(n,s),t({recentTrades:i,lastUpdated:new Map(r.lastUpdated).set(`trades_${n}`,Date.now())})},getRecentTrades:n=>e().recentTrades.get(n),setLoading:(n,s)=>{const r=e();if(n==="markets")t({loadingMarkets:s});else if(n.startsWith("orderbook_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingOrderbooks);s?o.add(i):o.delete(i),t({loadingOrderbooks:o})}else if(n.startsWith("ticker_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTickers);s?o.add(i):o.delete(i),t({loadingTickers:o})}else if(n.startsWith("trades_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTrades);s?o.add(i):o.delete(i),t({loadingTrades:o})}},setError:(n,s)=>{const r=e(),i=new Map(r.errors);s?i.set(n,s):i.delete(n),t({errors:i})},clearError:n=>{e().setError(n,null)},clearCache:n=>{const s=e();if(n){const r=new Map(s.orderbooks),i=new Map(s.tickers),o=new Map(s.recentTrades),a=new Map(s.lastUpdated);r.delete(n),i.delete(n),o.delete(n),a.delete(n),a.delete(`ticker_${n}`),a.delete(`trades_${n}`),t({orderbooks:r,tickers:i,recentTrades:o,lastUpdated:a})}else t({orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map})},clearAllCache:()=>{t({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,errors:new Map,selectedMarketId:null})}}));function $8(){const[t,e]=S.useState({loading:!0,loaded:!1,error:null}),[n,s]=S.useState({initialized:!1,wasmLoaded:!1,ready:!1});S.useEffect(()=>{(async()=>{try{e(a=>({...a,loading:!0,error:null})),await Re.initialize()?(e({loading:!1,loaded:!0,error:null}),s(Re.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(Re.getStatus()))}catch(o){e({loading:!1,loaded:!1,error:o instanceof Error?o.message:"Unknown error"}),s(Re.getStatus())}})()},[]),S.useEffect(()=>{if(t.loaded){const i=setInterval(()=>{s(Re.getStatus())},1e3);return()=>clearInterval(i)}},[t.loaded]);const r=async()=>{e({loading:!0,loaded:!1,error:null});try{await Re.initialize()?(e({loading:!1,loaded:!0,error:null}),s(Re.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(Re.getStatus()))}catch(i){e({loading:!1,loaded:!1,error:i instanceof Error?i.message:"Unknown error"}),s(Re.getStatus())}};return{wasmStatus:t,isReady:t.loaded&&n.ready,status:n,retry:r}}function U8(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=0){const[n,s]=S.useState(t),[r,i]=S.useState(e),[o,a]=S.useState(null),[l,c]=S.useState(!1);return{mnemonic:n,setMnemonic:s,addressIndex:r,setAddressIndex:i,result:o,loading:l,generateAddress:async()=>{if(!Re.isReady()){a({success:!1,error:"WASM module not ready"});return}c(!0),a(null);try{const d=await Re.generateAddress(n,r);a(d)}catch(d){a({success:!1,error:d instanceof Error?d.message:"Unknown error"})}finally{c(!1)}},isReady:Re.isReady()}}function W8(){const[t,e]=S.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=S.useState("Hello, World!"),[r,i]=S.useState(!1),[o,a]=S.useState(0),[l,c]=S.useState(null),[u,d]=S.useState(!1);return{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:u,signMessage:async()=>{if(!Re.isReady()){c({success:!1,error:"WASM module not ready"});return}d(!0),c(null);try{const g={addressIndex:o,useEIP712:r},m=r?await Re.signEIP712(t,n,g):await Re.signMessage(t,n,g);c(m)}catch(g){c({success:!1,error:g instanceof Error?g.message:"Unknown error"})}finally{d(!1)}},isReady:Re.isReady()}}function H8(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=180,n="clob::submit_order,clob::cancel_order",s="TradingBot"){const[r,i]=S.useState(t),[o,a]=S.useState(""),[l,c]=S.useState(""),[u,d]=S.useState(""),[f,g]=S.useState(e),[m,b]=S.useState(n),[w,p]=S.useState(s),[y,x]=S.useState(Date.now().toString()),[v,k]=S.useState(null),[C,E]=S.useState(!1);return{ownerMnemonic:r,setOwnerMnemonic:i,ownerAddress:o,setOwnerAddress:a,agentAddress:l,setAgentAddress:c,agentPrivateKey:u,setAgentPrivateKey:d,expiresInDays:f,setExpiresInDays:g,permissions:m,setPermissions:b,agentName:w,setAgentName:p,nonce:y,setNonce:x,result:v,loading:C,generateOwnerAddress:async()=>{if(!Re.isReady()){k({success:!1,error:"WASM module not ready"});return}E(!0);try{const A=await Re.generateAddress(r,0);A.success&&A.address?a(A.address):k({success:!1,error:A.error||"Failed to generate owner address"})}catch(A){k({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},generateAgentKeypair:async()=>{if(!Re.isReady()){k({success:!1,error:"WASM module not ready"});return}E(!0);try{const A=await Re.generateKeypair();A.success&&A.address&&A.privateKey?(c(A.address),d(A.privateKey)):k({success:!1,error:A.error||"Failed to generate agent keypair"})}catch(A){k({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},prepareAgentSign:async()=>{if(!Re.isReady()){k({success:!1,error:"WASM module not ready"});return}if(!o||!l){k({success:!1,error:"Owner and agent addresses are required"});return}E(!0),k(null);try{const A=m.split(",").map(H=>H.trim()).filter(H=>H.length>0),W=await Re.prepareAgentSign({owner:o,agent:l,expiresInDays:f,permissions:A,nonce:y,agentName:w});k(W)}catch(A){k({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},signAgentApproval:async()=>{if(!Re.isReady()){k({success:!1,error:"WASM module not ready"});return}if(!o||!l||!r){k({success:!1,error:"Owner address, agent address, and owner mnemonic are required"});return}E(!0),k(null);try{const A=m.split(",").map(H=>H.trim()).filter(H=>H.length>0),W=await Re.signAgentApproval(r,{owner:o,agent:l,expiresInDays:f,permissions:A,nonce:y,agentName:w});k(W)}catch(A){k({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},isReady:Re.isReady()}}const tu="http://localhost:8080",n_="ws://localhost:8080/websocket",V8="300px",Y8="300px",G8="270px",K8="630px",gx=5e3,q8="1",X8=100,Q8=20,J8="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",Z8=1,eI=100,tI=1,rv=0,iv=100,M0=1,nI=.01,ov=0,sI="BINANCE:BTCUSDT",rI="5",iI="https://s3.tradingview.com/tv.js",bo=2,oI=2,Vr="asc",Ko="desc",_g="market",R0="limit",aI="ORDER_TYPE_MARKET",lI="ORDER_TYPE_LIMIT",av="ORDER_TYPE_",Mc="CROSS",cI="ISOLATED",uI="ONE_WAY",Bu="buy",dI="sell",Fr="LONG",ph="SHORT",lv="symbol",cv="leverage",uv="size",dv="liquidationPrice",hv="unrealizedPnL",fv="entryPrice",pv="margin",O0="all",gv="byBucket",mv="1.5fr 1.2fr 1fr 1fr 1fr 1.2fr 1.2fr 1fr",hI="#51cf66",fI="#ff6b6b",pI="Loading positions...",gI="No open positions",mI="POSITIONS",xI="All",bI="By Bucket",$u="--",xv="symbol",bv="side",yv="type",vv="quantity",wv="price",Sv="filledQuantity",kv="status",Er="pending",Cv="history",yI="ORDER_STATUS_PENDING",vI="ORDER_STATUS_OPEN",wI="PARTIALLY_FILLED",_v=[yI,vI,"PENDING","OPEN","NEW",wI],A0="#ffc107",D0="#17a2b8",Ev="#28a745",N0="#dc3545",Pv="#dc3545",SI="#6c757d",kI="#51cf66",CI="#ff6b6b",Tv="1.5fr 1fr 1fr 1.2fr 1.2fr 1.2fr 1fr 1fr",_I="Loading pending orders...",EI="No pending orders",PI="No historical orders",TI="PENDING ORDERS",II="ORDER HISTORY",MI="Wallet address required to view pending orders",RI="Pending",OI="History",AI="--",DI="Unknown",Iv="LIMIT",Mv="MARKET";function NI(t){const[e,n]=S.useState(null),[s,r]=S.useState(null),[i,o]=S.useState(!1),[a,l]=S.useState(!1),[c,u]=S.useState(null),[d,f]=S.useState(_g),[g,m]=S.useState(0),[b,w]=S.useState(0),[p,y]=S.useState("0"),[x,v]=S.useState(tI),[k,C]=S.useState(uI),[E,T]=S.useState(Mc),[P,_]=S.useState(0),[D,A]=S.useState(0),[W,H]=S.useState(t.marketId||"1");S.useEffect(()=>{t.selectedBucketBalance!==void 0&&_(t.selectedBucketBalance)},[t.selectedBucketBalance]),S.useEffect(()=>{const G=new eu({baseURL:t.baseURL,mnemonic:t.mnemonic}),ee=new hn({baseURL:t.baseURL});n(G),r(ee),G.initialize().then(()=>{o(!0)}).catch(se=>{console.error("Failed to initialize exchange client:",se),u({success:!1,error:`Initialization failed: ${se.message}`})})},[t.baseURL,t.mnemonic]);const O=S.useCallback(async()=>{if(!(!s||!e)&&t.selectedBucketBalance===void 0)try{const G=e.getWalletAddress(),ee=await s.getBalanceDecimal(G,"MORM");ee&&ee.available!==void 0&&_(ee.available||0)}catch(G){console.error("Failed to load balance:",G)}},[s,e,t.selectedBucketBalance]);S.useEffect(()=>{i&&s&&e&&t.selectedBucketBalance===void 0&&O()},[i,s,e,t.selectedBucketBalance,O]);const R=S.useCallback(async()=>{if(s)try{const G=await s.getTicker(W);if(G&&G.lastPrice){const ee=typeof G.lastPrice=="string"?Ee(G.lastPrice):G.lastPrice;A(ee),(!p||p==="0")&&y(ee.toString())}}catch(G){console.error("Failed to load market price:",G)}},[s,W,p]);S.useEffect(()=>{i&&s&&R()},[i,s,R]);const F=S.useCallback(()=>d==="market"?t.tradePrice&&t.tradePrice>0?t.tradePrice:D:p?parseFloat(p):D,[d,p,D,t.tradePrice]),L=S.useCallback(()=>P*x,[P,x]),z=S.useCallback(()=>{let G;if(b>0)G=b;else{const se=L()*g/100,be=F();if(be<=0)return 0;G=se/be}return t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&G>t.maxSizeLimit?t.maxSizeLimit:G},[b,g,L,F,t.maxSizeLimit]),I=S.useCallback(()=>{const G=z(),ee=F();return G*ee},[z,F]),K=S.useCallback(()=>{const G=z(),ee=F(),se=G*ee;return Lk(se)},[z,F]),j=S.useCallback(()=>{const G=K();return x<=0?0:Math.floor(G/x)},[K,x]),M=S.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const G=z();if(G<=0){u({success:!1,error:"Invalid order size"});return}const ee=F();if(ee<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!p){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const se=xt(x.toString()),be=await e.placeOrder({marketId:W,side:"buy",orderType:d,price:ee,quantity:G,leverage:se});u({success:!0,orderId:be.orderId||be.id,message:"Buy order placed successfully"}),await O()}catch(se){u({success:!1,error:se instanceof Error?se.message:"Unknown error"})}finally{l(!1)}},[e,i,z,F,d,p,x,W,O]),$=S.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const G=z();if(G<=0){u({success:!1,error:"Invalid order size"});return}const ee=F();if(ee<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!p){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const se=xt(x.toString()),be=await e.placeOrder({marketId:W,side:"sell",orderType:d,price:ee,quantity:G,leverage:se});u({success:!0,orderId:be.orderId||be.id,message:"Sell order placed successfully"}),await O()}catch(se){u({success:!1,error:se instanceof Error?se.message:"Unknown error"})}finally{l(!1)}},[e,i,z,F,d,p,x,W,O]),q=S.useCallback(G=>{const ee=L(),se=ee*G/100,be=t.tradePrice&&t.tradePrice>0?t.tradePrice:D>0?D:0,He=be>0?se/be:0;let Pe=isNaN(He)||!isFinite(He)?0:Math.round(He*1e8)/1e8;if(t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&Pe>t.maxSizeLimit){Pe=t.maxSizeLimit;const _e=F();if(Pe>0&&ee>0&&_e>0){const wt=Pe*_e/ee*100;m(Math.min(100,Math.max(0,wt)))}else m(G)}else m(G);w(Pe)},[L,D,t.tradePrice,t.maxSizeLimit,F]),X=S.useCallback(G=>{let ee=isNaN(G)||G<0?0:G;t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&ee>t.maxSizeLimit&&(ee=t.maxSizeLimit),w(ee);const se=L(),be=F();if(ee>0&&se>0&&be>0){const Pe=ee*be/se*100;m(Math.min(100,Math.max(0,Pe)))}else m(0)},[L,F,t.maxSizeLimit]);return{orderType:d,setOrderType:f,fundPercent:g,sizeInput:b,price:p,leverage:x,positionMode:k,marginMode:E,availableBalance:P,currentPrice:D,marketId:W,isReady:i,loading:a,result:c,setFundPercent:q,setSizeInput:X,setPrice:y,setLeverage:v,setPositionMode:C,setMarginMode:T,setMarketId:H,placeBuyOrder:M,placeSellOrder:$,loadBalance:O,loadMarketPrice:R,calculateSize:z,calculateSizeUSD:I,calculateValue:K,calculateMargin:j,getOrderPrice:F,getAvailableTradeAmount:L}}function LI(t){const[e,n]=S.useState({asks:[],bids:[]}),[s,r]=S.useState(!0),[i,o]=S.useState(null),[a,l]=S.useState(!1),[c,u]=S.useState(null),d=S.useRef(null),f=S.useRef(null),g=S.useRef([]),m=S.useRef(null),b=S.useRef(!1),w=S.useRef(null),p=S.useRef(null),y=S.useRef(null),x=S.useCallback(P=>{const _=[...P].sort((A,W)=>W[0]-A[0]);let D=0;return _.map(([A,W])=>(D+=W,{price:A,size:W,cumulative:D,flash:null}))},[]),v=S.useCallback((P,_)=>{const D=new Map,A=new Map,W=new Map,H=new Map;P.asks.forEach($=>{$.size>0&&D.set($.price,$.size)}),P.bids.forEach($=>{$.size>0&&A.set($.price,$.size)}),_.asks&&_.asks.forEach(([$,q])=>{const X=D.get($)||0;q===0?D.delete($):(X>0?W.set($,q>X?"up":"down"):W.set($,"up"),D.set($,q))}),_.bids&&_.bids.forEach(([$,q])=>{const X=A.get($)||0;q===0?A.delete($):(X>0?H.set($,q>X?"up":"down"):H.set($,"up"),A.set($,q))});const O=Array.from(D.entries()),R=Array.from(A.entries()),F=x(O),L=x(R);F.forEach($=>{$.flash=W.get($.price)||null}),L.forEach($=>{$.flash=H.get($.price)||null});const z=t.maxDepth||100,I=F.slice(0,z),K=L.slice(0,z);let j,M;if(I.length>0&&K.length>0){const $=I[I.length-1].price,q=K[0].price;j=$-q,M=($+q)/2}return{asks:I,bids:K,spread:j,midPrice:M}},[x,t.maxDepth]),k=S.useCallback(async()=>{if(d.current)try{const P=await d.current.getOrderbook(t.marketId,!0);if(P&&(P.bids||P.asks)){const _=P.asks||[],D=P.bids||[],A=x(_),W=x(D),H=t.maxDepth||100,O=A.slice(0,H),R=W.slice(0,H);let F,L;if(O.length>0&&R.length>0){const z=O[O.length-1].price,I=R[0].price;F=z-I,L=(z+I)/2}n({asks:O,bids:R,spread:F,midPrice:L})}}catch(P){o(P instanceof Error?P.message:"Failed to load orderbook")}},[t.marketId,t.maxDepth,x]),C=S.useCallback(async()=>{if(d.current){r(!0),o(null);try{const P=await d.current.getOrderbook(t.marketId,!0);if(P&&(P.bids||P.asks)){const _=P.asks||[],D=P.bids||[],A=x(_),W=x(D),H=t.maxDepth||100,O=A.slice(0,H),R=W.slice(0,H);let F,L;if(O.length>0&&R.length>0){const z=O[O.length-1].price,I=R[0].price;F=z-I,L=(z+I)/2}n({asks:O,bids:R,spread:F,midPrice:L})}}catch(P){o(P instanceof Error?P.message:"Failed to load orderbook")}finally{r(!1)}}},[t.marketId,t.maxDepth,x]),E=S.useCallback((P,_)=>{if(P.snapshot===!0||P.type==="snapshot"||P.bids&&P.asks&&P.bids.length>10&&P.asks.length>10&&!P.delta){const A=P.asks||[],W=P.bids||[],H=x(A),O=x(W),R=t.maxDepth||100,F=H.slice(0,R),L=O.slice(0,R);let z,I;if(F.length>0&&L.length>0){const K=F[F.length-1].price,j=L[0].price;z=K-j,I=(K+j)/2}return{asks:F,bids:L,spread:z,midPrice:I}}else return v(_,{bids:P.bids,asks:P.asks})},[x,v,t.maxDepth]),T=S.useCallback(P=>{!P||!P.bids&&!P.asks||(g.current.push(P),m.current!==null&&clearTimeout(m.current),m.current=window.setTimeout(()=>{n(_=>{let D=_;for(const A of g.current)D=E(A,D);if(g.current=[],_.asks.length===D.asks.length&&_.bids.length===D.bids.length&&_.spread===D.spread&&_.midPrice===D.midPrice){const A=_.bids.length>0?_.bids[0].price:0,W=_.asks.length>0?_.asks[_.asks.length-1].price:0,H=D.bids.length>0?D.bids[0].price:0,O=D.asks.length>0?D.asks[D.asks.length-1].price:0;if(A===H&&W===O)return _}return D}),m.current=null},100))},[E]);return S.useEffect(()=>{const P=new hn({baseURL:t.baseURL});d.current=P;const _=new co({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});f.current=_,w.current===null&&(w.current=t.marketId);const D=()=>{if(_.isConnected()){const O=w.current!==null?w.current:t.marketId;w.current!==null&&w.current!==O&&_.unsubscribeOrderbook(w.current,T),(!b.current||w.current!==O)&&(_.subscribeOrderbook(O,T,!0),b.current=!0,w.current=O)}},A=_.connect();y.current=window.setTimeout(()=>{!_.isConnected()&&d.current&&p.current===null&&(u("WebSocket connection timeout. Using HTTP polling."),l(!1),k(),p.current=window.setInterval(()=>{k()},5e3))},12e3),A.then(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),l(!0),u(null),D()}).catch(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),u("slow connection due to network issue"),l(!1),d.current&&(p.current!==null&&(clearInterval(p.current),p.current=null),k(),p.current=window.setInterval(()=>{k()},5e3))});let W=null;const H=_.wsClient;return H&&(W=H.onStateChange(O=>{O===Je.Connected?(l(!0),u(null),b.current&&D()):(O===Je.Disconnected||O===Je.Reconnecting)&&(l(!1),b.current=!1,u("WebSocket disconnected. Using static data."))})),()=>{m.current!==null&&(clearTimeout(m.current),m.current=null),y.current!==null&&(clearTimeout(y.current),y.current=null),g.current=[],b.current=!1,w.current=null,W&&W(),f.current&&(w.current!==null&&f.current.unsubscribeOrderbook(w.current,T),f.current.disconnect())}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID]),S.useEffect(()=>{if(!d.current||!f.current)return;const P=w.current;return P!==null&&P!==t.marketId&&f.current.isConnected()&&(f.current.unsubscribeOrderbook(P,T),b.current=!1),n({asks:[],bids:[]}),r(!0),o(null),u(null),C(),f.current.isConnected()&&(f.current.subscribeOrderbook(t.marketId,T,!0),b.current=!0),w.current=t.marketId,()=>{f.current&&f.current.isConnected()&&w.current===t.marketId&&(f.current.unsubscribeOrderbook(t.marketId,T),b.current=!1)}},[t.marketId,C,T]),S.useEffect(()=>(p.current!==null&&(clearInterval(p.current),p.current=null),!a&&d.current&&(k(),p.current=window.setInterval(()=>{k()},5e3)),()=>{p.current!==null&&(clearInterval(p.current),p.current=null)}),[a,t.marketId,k]),S.useEffect(()=>{const P=setInterval(()=>{n(_=>({..._,asks:_.asks.map(D=>({...D,flash:null})),bids:_.bids.map(D=>({...D,flash:null}))}))},500);return()=>clearInterval(P)},[]),{orderbook:e,loading:s,error:i,isConnected:a,wsError:c,refresh:C}}function fl(t){return t!==null&&typeof t=="object"&&typeof t.price=="number"&&typeof t.market_id=="string"&&typeof t.quantity=="number"&&typeof t.timestamp=="number"&&typeof t.is_buyer_maker=="boolean"&&typeof t.trade_id=="string"}function L0(t){return t!==null&&typeof t=="object"&&typeof t.symbol=="string"&&typeof t.mark_price=="number"&&typeof t.timestamp=="number"}function mx(t){const[e,n]=S.useState(null),[s,r]=S.useState(null),[i,o]=S.useState(!0),[a,l]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(null),g=S.useRef(null),m=S.useRef(null),b=S.useRef(!1),w=S.useRef(!1),p=S.useRef(null),y=S.useRef(null),x=S.useCallback(async()=>{if(!g.current){console.warn("[useTradePrice] pollRecentTrades called but infoClientRef.current is null");return}console.debug("[useTradePrice] Polling recent trades (marketId:",t.marketId,")");try{const P=t.limit||100,_=await g.current.getRecentTrades(t.marketId,P);if(_&&Array.isArray(_)&&_.length>0){console.debug("[useTradePrice] Polling received",_.length,"trades for marketId:",t.marketId);const A=[..._].sort((H,O)=>{const R=H.timestamp||0;return(O.timestamp||0)-R})[0];console.debug("[useTradePrice] Most recent trade:",A);const W={market_id:A.market_id||t.marketId,price:typeof A.price=="string"?Ee(A.price):A.price,quantity:typeof A.quantity=="string"?Ee(A.quantity):A.quantity||0,timestamp:A.timestamp||Date.now(),is_buyer_maker:A.is_buyer_maker||!1,trade_id:A.trade_id||A.id||""};console.debug("[useTradePrice] Processed lastPriceData:",W),n(H=>(H&&typeof H.price=="number"&&(W.price>H.price?f("up"):W.price<H.price&&f("down")),setTimeout(()=>f(null),500),W)),console.debug("[useTradePrice] Polling successful - received trade price:",W.price)}else console.warn("[useTradePrice] Polling returned no trades or invalid data:",_)}catch(P){l(P instanceof Error?P.message:"Failed to load recent trades"),console.error("[useTradePrice] Failed to poll recent trades:",P)}},[t.marketId,t.limit]),v=S.useCallback(async()=>{if(g.current){o(!0),l(null);try{const P=t.limit||100,_=await g.current.getRecentTrades(t.marketId,P);if(_&&Array.isArray(_)&&_.length>0){const A=[..._].sort((H,O)=>{const R=H.timestamp||0;return(O.timestamp||0)-R})[0],W={market_id:A.market_id||t.marketId,price:typeof A.price=="string"?Ee(A.price):A.price,quantity:typeof A.quantity=="string"?Ee(A.quantity):A.quantity||0,timestamp:A.timestamp||Date.now(),is_buyer_maker:A.is_buyer_maker||!1,trade_id:A.trade_id||A.id||""};n(W)}else console.warn("[useTradePrice] Initialization returned no trades or invalid data:",_)}catch(P){l(P instanceof Error?P.message:"Failed to load recent trades"),console.error("Failed to initialize recent trades:",P)}finally{o(!1)}}},[t.marketId,t.limit]),k=S.useCallback(P=>{if(console.debug("[useTradePrice] handleLastPriceUpdate called with data:",P),!P){console.warn("[useTradePrice] handleLastPriceUpdate received null/undefined data");return}if(!P.price&&P.price!==0){console.warn("[useTradePrice] handleLastPriceUpdate received data without price field:",P);return}const _=typeof P.price=="string"?Ee(P.price):Number(P.price),D=typeof P.quantity=="string"?Ee(P.quantity):Number(P.quantity)||0;if(isNaN(_)){console.warn("[useTradePrice] Invalid price value:",P.price);return}n(A=>{fl(A)&&typeof A.price=="number"&&(_>A.price?f("up"):_<A.price&&f("down")),setTimeout(()=>f(null),500);const W={market_id:P.market_id||t.marketId,price:_,quantity:D,timestamp:P.timestamp||Date.now(),is_buyer_maker:P.is_buyer_maker||!1,trade_id:P.trade_id||P.id||""};return fl(W)||console.error("[useTradePrice] Invalid LastPriceData structure:",W),console.debug("[useTradePrice] Setting lastPrice to:",W),console.debug("[useTradePrice] Type check - isLastPriceData:",fl(W)),W})},[t.marketId]),C=S.useCallback(P=>{if(!P){console.warn("[useTradePrice] handleMarkPriceUpdate received null/undefined data");return}if(P.mark_price===void 0||P.mark_price===null){console.warn("[useTradePrice] handleMarkPriceUpdate received data without mark_price field:",P);return}const _=Number(P.mark_price);if(isNaN(_)){console.warn("[useTradePrice] Invalid mark_price value:",P.mark_price);return}const D={symbol:P.symbol||t.symbol||"",mark_price:_,timestamp:P.timestamp||Date.now()};L0(D)||console.error("[useTradePrice] Invalid MarkPriceData structure:",D),r(D)},[t.symbol]);S.useEffect(()=>{const P=new hn({baseURL:t.baseURL});g.current=P;const _=new co({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});m.current=_,v();const D=()=>{_.isConnected()&&(b.current||(_.subscribeLastPrice(t.marketId,k,!0),b.current=!0),t.symbol&&!w.current&&(_.subscribeMarkPrice(t.symbol,C),w.current=!0))};console.debug("[useTradePrice] Attempting WebSocket connection...");const A=_.connect();console.debug("[useTradePrice] Connect promise created, waiting for result..."),y.current=window.setTimeout(()=>{console.warn("[useTradePrice] WebSocket connection timeout fallback triggered after 12 seconds");const O=_.isConnected();console.warn("[useTradePrice] subscriptionClient.isConnected():",O,"hasPollingInterval:",p.current!==null),!O&&g.current&&p.current===null?(console.debug("[useTradePrice] Starting HTTP polling due to connection timeout (marketId:",t.marketId,")"),u(!1),x(),p.current=window.setInterval(()=>{x()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):O?console.debug("[useTradePrice] Connection established before timeout, no polling needed"):p.current!==null&&console.debug("[useTradePrice] Polling already started, skipping")},12e3),A.then(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),console.debug("[useTradePrice] WebSocket connected successfully"),u(!0),D()}).catch(O=>{y.current!==null&&(clearTimeout(y.current),y.current=null),console.error("[useTradePrice] WebSocket connection promise rejected:",O);const R=O instanceof Error?O.message:"Unknown error";console.info("WebSocket failed to establish connection. Falling back to HTTP polling:",R),u(!1),g.current?(p.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (WebSocket failure handler)"),clearInterval(p.current),p.current=null),console.debug("[useTradePrice] Starting HTTP polling due to WebSocket connection failure (marketId:",t.marketId,")"),x(),p.current=window.setInterval(()=>{x()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null")});let W=null;const H=_.wsClient;return H&&(W=H.onStateChange(O=>{console.debug("[useTradePrice] WebSocket state changed to:",O),O===Je.Connected?(console.debug("[useTradePrice] WebSocket connected - stopping polling if active"),u(!0),b.current&&D()):(O===Je.Disconnected||O===Je.Reconnecting)&&(console.debug("[useTradePrice] WebSocket disconnected/reconnecting - polling effect should start polling"),u(!1),b.current=!1,w.current=!1)})),()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),b.current=!1,w.current=!1,W&&W(),m.current&&(m.current.unsubscribeLastPrice(t.marketId,k),t.symbol&&m.current.unsubscribeMarkPrice(t.symbol,C),m.current.disconnect())}},[t.baseURL,t.wsURL,t.marketId,t.symbol,t.authToken,t.walletAddress,t.deviceID]),S.useEffect(()=>{g.current&&m.current&&(m.current.isConnected()&&(m.current.unsubscribeLastPrice(t.marketId,k),b.current=!1,t.symbol&&(m.current.unsubscribeMarkPrice(t.symbol,C),w.current=!1)),v(),m.current.isConnected()&&(m.current.subscribeLastPrice(t.marketId,k,!0),b.current=!0,t.symbol&&(m.current.subscribeMarkPrice(t.symbol,C),w.current=!0)))},[t.marketId,t.symbol]),S.useEffect(()=>(console.debug("[useTradePrice] Polling effect triggered - isConnected:",c,"marketId:",t.marketId),p.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (polling effect)"),clearInterval(p.current),p.current=null),!c&&g.current?(console.debug("[useTradePrice] Starting HTTP polling (WebSocket disconnected, marketId:",t.marketId,")"),x(),p.current=window.setInterval(()=>{x()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):!c&&!g.current?console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null (isConnected:",c,")"):c&&console.debug("[useTradePrice] WebSocket connected, polling not needed"),()=>{p.current!==null&&(console.debug("[useTradePrice] Cleaning up polling interval (polling effect cleanup)"),clearInterval(p.current),p.current=null)}),[c,t.marketId]);const{displayPrice:E,displayTimestamp:T}=S.useMemo(()=>{const P=fl(e)&&e.price!=null,_=L0(s)&&s.mark_price!=null;if(P&&_){const D=e.timestamp||0,A=s.timestamp||0;return D>=A?{displayPrice:e.price,displayTimestamp:D}:{displayPrice:s.mark_price,displayTimestamp:A}}return P?{displayPrice:e.price,displayTimestamp:e.timestamp||0}:_?{displayPrice:s.mark_price,displayTimestamp:s.timestamp||0}:{displayPrice:null,displayTimestamp:null}},[e,s]);return{lastPrice:e,markPrice:s,displayPrice:E,displayTimestamp:T,loading:i,error:a,isConnected:c,priceChange:d,refresh:v,isLastPriceData:fl,isMarkPriceData:L0}}async function jI(t,e=3,n=1e3){let s=null;for(let r=0;r<=e;r++)try{return await t()}catch(i){if(s=i instanceof Error?i:new Error(String(i)),r<e){const o=n*Math.pow(2,r);await new Promise(a=>setTimeout(a,o))}}throw s||new Error("Retry failed")}function FI(t){const e=t.historyDepth??1,[n,s]=S.useState(new Map),[r,i]=S.useState(!0),[o,a]=S.useState(null),[l,c]=S.useState(!1),u=S.useRef(null),d=S.useRef(null),f=S.useRef(new Set),g=S.useCallback(async y=>{if(u.current){a(null);try{const x=await jI(()=>u.current.getFundingRate(y,1),3,1e3),v=Array.isArray(x)?x[0]:x;v&&s(k=>{const C=new Map(k);return e===1?C.set(y,v):C.set(y,[v]),C})}catch(x){console.error(`Failed to initialize funding rate for ${y} after retries:`,x)}}},[e]),m=S.useCallback((y,x)=>{!x||!x.symbol||s(v=>{const k=new Map(v),C=k.get(y);if(e===1)k.set(y,x);else{const E=Array.isArray(C)?C:C?[C]:[],T=[x,...E].slice(0,e);k.set(y,T)}return k})},[e]);S.useEffect(()=>{const y=new hn({baseURL:t.baseURL});u.current=y;const x=new co({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=x,i(!0),Promise.all(t.symbols.map(E=>g(E))).finally(()=>{i(!1)});const v=()=>{x.isConnected()&&d.current&&t.symbols.forEach(E=>{if(!f.current.has(E)){const T=P=>{m(E,P)};x.subscribeFundingRate(E,T),f.current.add(E)}})};x.connect().then(()=>{c(!0),v()}).catch(E=>{console.error("Failed to connect WebSocket:",E),a("WebSocket connection failed")});let k=null;const C=x.wsClient;return C&&(k=C.onStateChange(E=>{E===Je.Connected?(c(!0),f.current.size>0&&v()):(E===Je.Disconnected||E===Je.Reconnecting)&&(c(!1),f.current.clear())})),()=>{k&&k(),d.current&&(t.symbols.forEach(E=>{var T;try{(T=d.current)==null||T.unsubscribeFundingRate(E)}catch(P){console.error(`Failed to unsubscribe from funding rate for ${E}:`,P)}}),d.current.disconnect())}},[t.baseURL,t.wsURL,t.symbols.join(","),t.authToken,t.walletAddress,t.deviceID,g,m]),S.useEffect(()=>{var y;if((y=d.current)!=null&&y.isConnected()&&d.current){const x=new Set(t.symbols);f.current.forEach(v=>{var k;x.has(v)||((k=d.current)==null||k.unsubscribeFundingRate(v),f.current.delete(v))}),t.symbols.forEach(v=>{var k;if(!f.current.has(v)){const C=E=>{m(v,E)};(k=d.current)==null||k.subscribeFundingRate(v,C),f.current.add(v)}})}},[t.symbols.join(","),m]);const b=S.useCallback(y=>n.get(y),[n]),w=S.useCallback(y=>{const x=n.get(y);if(x)return Array.isArray(x)?x[0]:x},[n]),p=S.useCallback(async y=>{y?await g(y):(i(!0),await Promise.all(t.symbols.map(x=>g(x))),i(!1))},[t.symbols,g]);return{fundingRates:n,getFundingRate:b,getLatestFundingRate:w,loading:r,error:o,isConnected:l,refresh:p}}async function zI(t,e=3,n=1e3){let s=null;for(let r=0;r<=e;r++)try{return await t()}catch(i){if(s=i instanceof Error?i:new Error(String(i)),r<e){const o=n*Math.pow(2,r);await new Promise(a=>setTimeout(a,o))}}throw s||new Error("Retry failed")}function s_(t){const e=t.useWebSocket!==!1,[n,s]=S.useState([]),[r,i]=S.useState(!0),[o,a]=S.useState(null),[l,c]=S.useState(!1),u=S.useRef(null),d=S.useRef(null),f=S.useRef(null),g=S.useRef(!1),m=S.useRef(t);m.current=t;const b=S.useCallback(y=>{const x=y.size||0,v=x>=0?Fr:ph;let k=y.margin;return!k&&y.leverage&&y.entryPrice&&x!==0&&(k=Math.abs(x*y.entryPrice/y.leverage)),{marketId:y.marketId||y.market_id||0,symbol:y.symbol||`m-${y.marketId||y.market_id||"N/A"}`,size:Math.abs(x),entryPrice:y.entryPrice||y.entry_price||0,markPrice:y.markPrice||y.mark_price||0,liquidationPrice:y.liquidationPrice||y.liquidation_price||void 0,unrealizedPnL:y.unrealizedPnL||y.unrealized_pnl||y.pnl||0,leverage:y.leverage?Number(y.leverage):void 0,margin:k||0,side:v,marginMode:y.marginMode||y.margin_mode||Mc,bucketId:y.bucketId||y.bucket_id||void 0}},[]),w=S.useCallback(async()=>{if(!u.current)return;const y=m.current;if(!y.walletAddress||y.walletAddress.trim()===""){a(null),s([]),i(!1);return}a(null);try{const x=await zI(()=>u.current.getPositionsDecimal(y.walletAddress),3,1e3);if(Array.isArray(x)){const v=x.map(b);s(k=>{if(k.length!==v.length)return v;const C=JSON.stringify(k),E=JSON.stringify(v);return C===E?k:v})}else s(v=>v.length===0?v:[])}catch(x){const v=x instanceof Error?x.message:"Failed to load positions";a(v),console.error("Failed to fetch positions after retries:",x)}finally{i(!1)}},[b]),p=S.useCallback(y=>{if(y.positions&&Array.isArray(y.positions)){const x=y.positions.map(b);s(v=>{if(v.length!==x.length)return x;const k=JSON.stringify(v),C=JSON.stringify(x);return k===C?v:x})}},[b]);return S.useEffect(()=>{const y=new hn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=y,w(),e&&t.wsURL){const x=new co({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=x;const v=()=>{x.isConnected()&&!g.current&&(x.subscribeUserUpdates(p),g.current=!0)};x.connect().then(()=>{c(!0),v()}).catch(E=>{console.error("Failed to connect WebSocket:",E),c(!1),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{w()},t.refreshInterval))});let k=null;const C=x.wsClient;return C&&(k=C.onStateChange(E=>{E===Je.Connected?(c(!0),g.current&&v(),f.current!==null&&(clearInterval(f.current),f.current=null)):(E===Je.Disconnected||E===Je.Reconnecting)&&(c(!1),g.current=!1,t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{w()},t.refreshInterval)))})),()=>{k&&k(),f.current!==null&&(clearInterval(f.current),f.current=null),d.current&&(d.current.unsubscribeUserUpdates(p),d.current.disconnect())}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{w()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=null)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{positions:n,loading:r,error:o,isConnected:l,refresh:w}}function BI(t){const[e,n]=S.useState([]),[s,r]=S.useState(!0),[i,o]=S.useState(null),a=S.useRef(null),l=S.useRef(null),c=S.useCallback(async()=>{if(a.current){o(null),r(!0);try{let u=[];try{if(t.walletAddress){const f=await a.current.getBuckets(t.walletAddress);u=Array.isArray(f)?f:[]}}catch{const g=await a.current.getPositionsDecimal();if(Array.isArray(g)){const m=new Map;g.forEach(b=>{const w=b.bucketId||b.bucket_id||"default",p=m.get(w)||{positions:[],totalMargin:0,totalPnL:0};p.positions.push(b),p.totalMargin+=b.margin||0,p.totalPnL+=b.unrealizedPnL||b.unrealized_pnl||0,m.set(w,p)}),u=Array.from(m.entries()).map(([b,w])=>{var p,y;return{bucketId:b,totalMargin:w.totalMargin,totalPositions:w.positions.length,unrealizedPnL:w.totalPnL,marginMode:((p=w.positions[0])==null?void 0:p.marginMode)||((y=w.positions[0])==null?void 0:y.margin_mode)||"CROSS"}})}}const d=u.map(f=>({bucketId:f.bucketId||f.bucket_id||f.id||"unknown",address:f.address||t.walletAddress,totalMargin:f.totalMargin||f.total_margin||0,totalPositions:f.totalPositions||f.total_positions||0,unrealizedPnL:f.unrealizedPnL||f.unrealized_pnl||f.pnl||0,leverage:f.leverage,marginMode:f.marginMode||f.margin_mode||"CROSS",createdAt:f.createdAt||f.created_at}));n(d)}catch(u){o(u instanceof Error?u.message:"Failed to load buckets"),console.error("Failed to fetch buckets:",u)}finally{r(!1)}}},[t.walletAddress]);return S.useEffect(()=>{const u=new hn({baseURL:t.baseURL,sessionToken:t.authToken});return a.current=u,c(),t.refreshInterval&&t.refreshInterval>0&&(l.current=window.setInterval(()=>{c()},t.refreshInterval)),()=>{l.current!==null&&(clearInterval(l.current),l.current=null)}},[t.baseURL,t.authToken,t.walletAddress,t.refreshInterval]),{buckets:e,loading:s,error:i,refresh:c}}function qa(t){const e=S.useRef(null),n=ot(j=>j.markets),s=ot(j=>j.marketsById),r=ot(j=>j.orderbooks),i=ot(j=>j.tickers),o=ot(j=>j.recentTrades),a=ot(j=>j.selectedMarketId),l=ot(j=>j.loadingMarkets),c=ot(j=>j.loadingOrderbooks),u=ot(j=>j.loadingTickers),d=ot(j=>j.loadingTrades),f=ot(j=>j.errors),g=ot(j=>j.setMarkets),m=ot(j=>j.setMarket),b=ot(j=>j.getMarket),w=ot(j=>j.getMarketBySymbol),p=ot(j=>j.setSelectedMarketId),y=ot(j=>j.setOrderbook),x=ot(j=>j.getOrderbook),v=ot(j=>j.updateOrderbook),k=ot(j=>j.setTicker),C=ot(j=>j.getTicker),E=ot(j=>j.setRecentTrades),T=ot(j=>j.getRecentTrades),P=ot(j=>j.setLoading),_=ot(j=>j.setError),D=ot(j=>j.clearError),A=ot(j=>j.clearCache);S.useEffect(()=>{e.current?t.sessionToken&&e.current.setSessionToken(t.sessionToken):e.current=new hn({baseURL:t.baseURL,sessionToken:t.sessionToken})},[t.baseURL,t.sessionToken]);const W=S.useCallback(async()=>{if(!e.current)throw new Error("InfoClient not initialized");const j="markets";P(j,!0),_(j,null);try{const M=await e.current.getMarkets(),q=(Array.isArray(M)?M:(M==null?void 0:M.markets)||[]).map((X,G)=>{let ee;if(X.id!==void 0)ee=typeof X.id=="string"?parseInt(X.id,10)||G+1:X.id;else if(X.market_id!==void 0){const se=String(X.market_id),be=parseInt(se,10);isNaN(be)?ee=G+1:be>Number.MAX_SAFE_INTEGER?ee=be%Number.MAX_SAFE_INTEGER||G+1:ee=be}else ee=G+1;return{id:ee,symbol:X.symbol||X.moniker,moniker:X.moniker,baseAsset:X.base_asset||X.baseAsset,quoteAsset:X.quote_asset||X.quoteAsset,active:X.active!==void 0?X.active:X.status==="active",market_id:X.market_id,status:X.status,...X}});return g(q),q}catch(M){const $=M instanceof Error?M.message:"Failed to fetch markets";throw _(j,$),M}finally{P(j,!1)}},[g,P,_]),H=S.useCallback(async j=>{if(!e.current)throw new Error("InfoClient not initialized");const M=typeof j=="string"?parseInt(j,10):j,$=isNaN(M)?null:b(M);if($)return $;try{const q=await e.current.getMarketByID(j);return q?(m(q),q):null}catch(q){const X=q instanceof Error?q.message:`Failed to fetch market ${j}`;throw _(`market_${j}`,X),q}},[b,m,_]),O=S.useCallback(async j=>{if(!e.current)throw new Error("InfoClient not initialized");const M=w(j);if(M)return M;try{const $=await e.current.getMarketByMoniker(j);return $?(m($),$):null}catch($){const q=$ instanceof Error?$.message:`Failed to fetch market ${j}`;throw _(`market_${j}`,q),$}},[w,m,_]),R=S.useCallback(async(j,M=!0,$=20)=>{if(!e.current)throw new Error("InfoClient not initialized");const q=`orderbook_${j}`;P(q,!0),_(q,null);try{const X=await e.current.getOrderbook(j,M,$);if(X&&(X.bids||X.asks)){const G={bids:X.bids||[],asks:X.asks||[],timestamp:Date.now()};return y(typeof j=="string"?j:j.toString(),G),G}return null}catch(X){const G=X instanceof Error?X.message:`Failed to fetch orderbook for market ${j}`;throw _(q,G),X}finally{P(q,!1)}},[y,P,_]),F=S.useCallback(async j=>{if(!e.current)throw new Error("InfoClient not initialized");const M=`ticker_${j}`;P(M,!0),_(M,null);try{const $=await e.current.getTicker(j);if($){const q=typeof j=="string"?j:j.toString(),X={marketId:q,...$,timestamp:Date.now()};return k(q,X),X}return null}catch($){const q=$ instanceof Error?$.message:`Failed to fetch ticker for market ${j}`;throw _(M,q),$}finally{P(M,!1)}},[k,P,_]),L=S.useCallback(async(j,M=100)=>{if(!e.current)throw new Error("InfoClient not initialized");const $=`trades_${j}`;P($,!0),_($,null);try{const q=await e.current.getRecentTrades(j,M);if(q){const X=Array.isArray(q)?q:[];return E(typeof j=="string"?j:j.toString(),X),X}return null}catch(q){const X=q instanceof Error?q.message:`Failed to fetch trades for market ${j}`;throw _($,X),q}finally{P($,!1)}},[E,P,_]);S.useEffect(()=>{t.autoFetchMarkets&&n.length===0&&!l&&W().catch(console.error)},[t.autoFetchMarkets,n.length,l,W]);const z=a?n.find(j=>{var M;return j.market_id===a||((M=j.id)==null?void 0:M.toString())===a}):null,I=z?z.moniker||z.symbol||(z.baseAsset&&z.quoteAsset?`${z.baseAsset}-${z.quoteAsset}`:null):null,K=S.useCallback(j=>{const M=typeof j=="string"?j:j.toString(),$=n.find(q=>{var X;return q.market_id===M||((X=q.id)==null?void 0:X.toString())===M});return $?$.moniker||$.symbol||($.baseAsset&&$.quoteAsset?`${$.baseAsset}/${$.quoteAsset}`:null):null},[n]);return{markets:n,marketsById:s,orderbooks:r,tickers:i,recentTrades:o,selectedMarketId:a,selectedMarket:z,selectedMarketSymbol:I,loadingMarkets:l,loadingOrderbooks:c,loadingTickers:u,loadingTrades:d,isLoading:j=>{if(j==="markets")return l;if(j.startsWith("orderbook_")){const M=j.split("_").slice(1).join("_");return c.has(M)}if(j.startsWith("ticker_")){const M=j.split("_").slice(1).join("_");return u.has(M)}if(j.startsWith("trades_")){const M=j.split("_").slice(1).join("_");return d.has(M)}return!1},errors:f,getError:j=>f.get(j),getMarket:b,getMarketBySymbol:w,getSymbolByMarketId:K,getOrderbook:x,getTicker:C,getRecentTrades:T,fetchMarkets:W,fetchMarket:H,fetchMarketBySymbol:O,fetchOrderbook:R,fetchTicker:F,fetchRecentTrades:L,updateOrderbook:v,clearCache:A,clearError:D,setSelectedMarketId:p,infoClient:e.current}}function $I(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const UI=t=>{switch(t){case"success":return VI;case"info":return GI;case"warning":return YI;case"error":return KI;default:return null}},WI=Array(12).fill(0),HI=({visible:t,className:e})=>ie.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ie.createElement("div",{className:"sonner-spinner"},WI.map((n,s)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),VI=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),YI=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),GI=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),KI=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),qI=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),XI=()=>{const[t,e]=ie.useState(document.hidden);return ie.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let Eg=1;class QI{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:s,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Eg++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:s}),{...l,...e,id:i,dismissible:a,title:s}):l):this.addToast({title:s,...r,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i=s!==void 0,o;const a=r.then(async c=>{if(o=["resolve",c],ie.isValidElement(c))i=!1,this.create({id:s,type:"default",message:c});else if(ZI(c)&&!c.ok){i=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,m=typeof d=="object"&&!ie.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:f,...m})}else if(c instanceof Error){i=!1;const d=typeof n.error=="function"?await n.error(c):n.error,f=typeof n.description=="function"?await n.description(c):n.description,m=typeof d=="object"&&!ie.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:f,...m})}else if(n.success!==void 0){i=!1;const d=typeof n.success=="function"?await n.success(c):n.success,f=typeof n.description=="function"?await n.description(c):n.description,m=typeof d=="object"&&!ie.isValidElement(d)?d:{message:d};this.create({id:s,type:"success",description:f,...m})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description,g=typeof u=="object"&&!ie.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:d,...g})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,n)=>{const s=(n==null?void 0:n.id)||Eg++;return this.create({jsx:e(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const _n=new QI,JI=(t,e)=>{const n=(e==null?void 0:e.id)||Eg++;return _n.addToast({title:t,...e,id:n}),n},ZI=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",eM=JI,tM=()=>_n.toasts,nM=()=>_n.getActiveToasts(),Ie=Object.assign(eM,{success:_n.success,info:_n.info,warning:_n.warning,error:_n.error,custom:_n.custom,message:_n.message,promise:_n.promise,dismiss:_n.dismiss,loading:_n.loading},{getHistory:tM,getToasts:nM});$I("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Uu(t){return t.label!==void 0}const sM=3,rM="24px",iM="16px",Rv=4e3,oM=356,aM=14,lM=45,cM=200;function Os(...t){return t.filter(Boolean).join(" ")}function uM(t){const[e,n]=t.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}const dM=t=>{var e,n,s,r,i,o,a,l,c;const{invert:u,toast:d,unstyled:f,interacting:g,setHeights:m,visibleToasts:b,heights:w,index:p,toasts:y,expanded:x,removeToast:v,defaultRichColors:k,closeButton:C,style:E,cancelButtonStyle:T,actionButtonStyle:P,className:_="",descriptionClassName:D="",duration:A,position:W,gap:H,expandByDefault:O,classNames:R,icons:F,closeButtonAriaLabel:L="Close toast"}=t,[z,I]=ie.useState(null),[K,j]=ie.useState(null),[M,$]=ie.useState(!1),[q,X]=ie.useState(!1),[G,ee]=ie.useState(!1),[se,be]=ie.useState(!1),[He,Pe]=ie.useState(!1),[_e,Le]=ie.useState(0),[wt,N]=ie.useState(0),J=ie.useRef(d.duration||A||Rv),oe=ie.useRef(null),de=ie.useRef(null),we=p===0,ve=p+1<=b,B=d.type,le=d.dismissible!==!1,V=d.className||"",ce=d.descriptionClassName||"",re=ie.useMemo(()=>w.findIndex(U=>U.toastId===d.id)||0,[w,d.id]),Y=ie.useMemo(()=>{var U;return(U=d.closeButton)!=null?U:C},[d.closeButton,C]),he=ie.useMemo(()=>d.duration||A||Rv,[d.duration,A]),Te=ie.useRef(0),ye=ie.useRef(0),Ce=ie.useRef(0),Ue=ie.useRef(null),[Ze,lt]=W.split("-"),_t=ie.useMemo(()=>w.reduce((U,Me,it)=>it>=re?U:U+Me.height,0),[w,re]),Vt=XI(),Ft=d.invert||u,Yt=B==="loading";ye.current=ie.useMemo(()=>re*H+_t,[re,_t]),ie.useEffect(()=>{J.current=he},[he]),ie.useEffect(()=>{$(!0)},[]),ie.useEffect(()=>{const U=de.current;if(U){const Me=U.getBoundingClientRect().height;return N(Me),m(it=>[{toastId:d.id,height:Me,position:d.position},...it]),()=>m(it=>it.filter(Oe=>Oe.toastId!==d.id))}},[m,d.id]),ie.useLayoutEffect(()=>{if(!M)return;const U=de.current,Me=U.style.height;U.style.height="auto";const it=U.getBoundingClientRect().height;U.style.height=Me,N(it),m(Oe=>Oe.find(je=>je.toastId===d.id)?Oe.map(je=>je.toastId===d.id?{...je,height:it}:je):[{toastId:d.id,height:it,position:d.position},...Oe])},[M,d.title,d.description,m,d.id,d.jsx,d.action,d.cancel]);const ct=ie.useCallback(()=>{X(!0),Le(ye.current),m(U=>U.filter(Me=>Me.toastId!==d.id)),setTimeout(()=>{v(d)},cM)},[d,v,m,ye]);ie.useEffect(()=>{if(d.promise&&B==="loading"||d.duration===1/0||d.type==="loading")return;let U;return x||g||Vt?(()=>{if(Ce.current<Te.current){const Oe=new Date().getTime()-Te.current;J.current=J.current-Oe}Ce.current=new Date().getTime()})():(()=>{J.current!==1/0&&(Te.current=new Date().getTime(),U=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),ct()},J.current))})(),()=>clearTimeout(U)},[x,g,d,B,Vt,ct]),ie.useEffect(()=>{d.delete&&(ct(),d.onDismiss==null||d.onDismiss.call(d,d))},[ct,d.delete]);function gs(){var U;if(F!=null&&F.loading){var Me;return ie.createElement("div",{className:Os(R==null?void 0:R.loader,d==null||(Me=d.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":B==="loading"},F.loading)}return ie.createElement(HI,{className:Os(R==null?void 0:R.loader,d==null||(U=d.classNames)==null?void 0:U.loader),visible:B==="loading"})}const mn=d.icon||(F==null?void 0:F[B])||UI(B);var te,Q;return ie.createElement("li",{tabIndex:0,ref:de,className:Os(_,V,R==null?void 0:R.toast,d==null||(e=d.classNames)==null?void 0:e.toast,R==null?void 0:R.default,R==null?void 0:R[B],d==null||(n=d.classNames)==null?void 0:n[B]),"data-sonner-toast":"","data-rich-colors":(te=d.richColors)!=null?te:k,"data-styled":!(d.jsx||d.unstyled||f),"data-mounted":M,"data-promise":!!d.promise,"data-swiped":He,"data-removed":q,"data-visible":ve,"data-y-position":Ze,"data-x-position":lt,"data-index":p,"data-front":we,"data-swiping":G,"data-dismissible":le,"data-type":B,"data-invert":Ft,"data-swipe-out":se,"data-swipe-direction":K,"data-expanded":!!(x||O&&M),"data-testid":d.testId,style:{"--index":p,"--toasts-before":p,"--z-index":y.length-p,"--offset":`${q?_e:ye.current}px`,"--initial-height":O?"auto":`${wt}px`,...E,...d.style},onDragEnd:()=>{ee(!1),I(null),Ue.current=null},onPointerDown:U=>{U.button!==2&&(Yt||!le||(oe.current=new Date,Le(ye.current),U.target.setPointerCapture(U.pointerId),U.target.tagName!=="BUTTON"&&(ee(!0),Ue.current={x:U.clientX,y:U.clientY})))},onPointerUp:()=>{var U,Me,it;if(se||!le)return;Ue.current=null;const Oe=Number(((U=de.current)==null?void 0:U.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Gt=Number(((Me=de.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),je=new Date().getTime()-((it=oe.current)==null?void 0:it.getTime()),fe=z==="x"?Oe:Gt,Xe=Math.abs(fe)/je;if(Math.abs(fe)>=lM||Xe>.11){Le(ye.current),d.onDismiss==null||d.onDismiss.call(d,d),j(z==="x"?Oe>0?"right":"left":Gt>0?"down":"up"),ct(),be(!0);return}else{var Se,ze;(Se=de.current)==null||Se.style.setProperty("--swipe-amount-x","0px"),(ze=de.current)==null||ze.style.setProperty("--swipe-amount-y","0px")}Pe(!1),ee(!1),I(null)},onPointerMove:U=>{var Me,it,Oe;if(!Ue.current||!le||((Me=window.getSelection())==null?void 0:Me.toString().length)>0)return;const je=U.clientY-Ue.current.y,fe=U.clientX-Ue.current.x;var Xe;const Se=(Xe=t.swipeDirections)!=null?Xe:uM(W);!z&&(Math.abs(fe)>1||Math.abs(je)>1)&&I(Math.abs(fe)>Math.abs(je)?"x":"y");let ze={x:0,y:0};const Ke=Ve=>1/(1.5+Math.abs(Ve)/20);if(z==="y"){if(Se.includes("top")||Se.includes("bottom"))if(Se.includes("top")&&je<0||Se.includes("bottom")&&je>0)ze.y=je;else{const Ve=je*Ke(je);ze.y=Math.abs(Ve)<Math.abs(je)?Ve:je}}else if(z==="x"&&(Se.includes("left")||Se.includes("right")))if(Se.includes("left")&&fe<0||Se.includes("right")&&fe>0)ze.x=fe;else{const Ve=fe*Ke(fe);ze.x=Math.abs(Ve)<Math.abs(fe)?Ve:fe}(Math.abs(ze.x)>0||Math.abs(ze.y)>0)&&Pe(!0),(it=de.current)==null||it.style.setProperty("--swipe-amount-x",`${ze.x}px`),(Oe=de.current)==null||Oe.style.setProperty("--swipe-amount-y",`${ze.y}px`)}},Y&&!d.jsx&&B!=="loading"?ie.createElement("button",{"aria-label":L,"data-disabled":Yt,"data-close-button":!0,onClick:Yt||!le?()=>{}:()=>{ct(),d.onDismiss==null||d.onDismiss.call(d,d)},className:Os(R==null?void 0:R.closeButton,d==null||(s=d.classNames)==null?void 0:s.closeButton)},(Q=F==null?void 0:F.close)!=null?Q:qI):null,(B||d.icon||d.promise)&&d.icon!==null&&((F==null?void 0:F[B])!==null||d.icon)?ie.createElement("div",{"data-icon":"",className:Os(R==null?void 0:R.icon,d==null||(r=d.classNames)==null?void 0:r.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||gs():null,d.type!=="loading"?mn:null):null,ie.createElement("div",{"data-content":"",className:Os(R==null?void 0:R.content,d==null||(i=d.classNames)==null?void 0:i.content)},ie.createElement("div",{"data-title":"",className:Os(R==null?void 0:R.title,d==null||(o=d.classNames)==null?void 0:o.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?ie.createElement("div",{"data-description":"",className:Os(D,ce,R==null?void 0:R.description,d==null||(a=d.classNames)==null?void 0:a.description)},typeof d.description=="function"?d.description():d.description):null),ie.isValidElement(d.cancel)?d.cancel:d.cancel&&Uu(d.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||T,onClick:U=>{Uu(d.cancel)&&le&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,U),ct())},className:Os(R==null?void 0:R.cancelButton,d==null||(l=d.classNames)==null?void 0:l.cancelButton)},d.cancel.label):null,ie.isValidElement(d.action)?d.action:d.action&&Uu(d.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||P,onClick:U=>{Uu(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,U),!U.defaultPrevented&&ct())},className:Os(R==null?void 0:R.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function Ov(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function hM(t,e){const n={};return[t,e].forEach((s,r)=>{const i=r===1,o=i?"--mobile-offset":"--offset",a=i?iM:rM;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(c=>{s[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof s[c]=="number"?`${s[c]}px`:s[c]}):l(a)}),n}const fM=ie.forwardRef(function(e,n){const{id:s,invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:l,className:c,offset:u,mobileOffset:d,theme:f="light",richColors:g,duration:m,style:b,visibleToasts:w=sM,toastOptions:p,dir:y=Ov(),gap:x=aM,icons:v,containerAriaLabel:k="Notifications"}=e,[C,E]=ie.useState([]),T=ie.useMemo(()=>s?C.filter(M=>M.toasterId===s):C.filter(M=>!M.toasterId),[C,s]),P=ie.useMemo(()=>Array.from(new Set([i].concat(T.filter(M=>M.position).map(M=>M.position)))),[T,i]),[_,D]=ie.useState([]),[A,W]=ie.useState(!1),[H,O]=ie.useState(!1),[R,F]=ie.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=ie.useRef(null),z=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=ie.useRef(null),K=ie.useRef(!1),j=ie.useCallback(M=>{E($=>{var q;return(q=$.find(X=>X.id===M.id))!=null&&q.delete||_n.dismiss(M.id),$.filter(({id:X})=>X!==M.id)})},[]);return ie.useEffect(()=>_n.subscribe(M=>{if(M.dismiss){requestAnimationFrame(()=>{E($=>$.map(q=>q.id===M.id?{...q,delete:!0}:q))});return}setTimeout(()=>{e4.flushSync(()=>{E($=>{const q=$.findIndex(X=>X.id===M.id);return q!==-1?[...$.slice(0,q),{...$[q],...M},...$.slice(q+1)]:[M,...$]})})})}),[C]),ie.useEffect(()=>{if(f!=="system"){F(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;const M=window.matchMedia("(prefers-color-scheme: dark)");try{M.addEventListener("change",({matches:$})=>{F($?"dark":"light")})}catch{M.addListener(({matches:q})=>{try{F(q?"dark":"light")}catch(X){console.error(X)}})}},[f]),ie.useEffect(()=>{C.length<=1&&W(!1)},[C]),ie.useEffect(()=>{const M=$=>{var q;if(o.every(ee=>$[ee]||$.code===ee)){var G;W(!0),(G=L.current)==null||G.focus()}$.code==="Escape"&&(document.activeElement===L.current||(q=L.current)!=null&&q.contains(document.activeElement))&&W(!1)};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[o]),ie.useEffect(()=>{if(L.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,K.current=!1)}},[L.current]),ie.createElement("section",{ref:n,"aria-label":`${k} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((M,$)=>{var q;const[X,G]=M.split("-");return T.length?ie.createElement("ol",{key:M,dir:y==="auto"?Ov():y,tabIndex:-1,ref:L,className:c,"data-sonner-toaster":!0,"data-sonner-theme":R,"data-y-position":X,"data-x-position":G,style:{"--front-toast-height":`${((q=_[0])==null?void 0:q.height)||0}px`,"--width":`${oM}px`,"--gap":`${x}px`,...b,...hM(u,d)},onBlur:ee=>{K.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(K.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||K.current||(K.current=!0,I.current=ee.relatedTarget)},onMouseEnter:()=>W(!0),onMouseMove:()=>W(!0),onMouseLeave:()=>{H||W(!1)},onDragEnd:()=>W(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},T.filter(ee=>!ee.position&&$===0||ee.position===M).map((ee,se)=>{var be,He;return ie.createElement(dM,{key:ee.id,icons:v,index:se,toast:ee,defaultRichColors:g,duration:(be=p==null?void 0:p.duration)!=null?be:m,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:r,visibleToasts:w,closeButton:(He=p==null?void 0:p.closeButton)!=null?He:l,interacting:H,position:M,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,closeButtonAriaLabel:p==null?void 0:p.closeButtonAriaLabel,removeToast:j,toasts:T.filter(Pe=>Pe.position==ee.position),heights:_.filter(Pe=>Pe.position==ee.position),setHeights:D,expandByDefault:a,gap:x,expanded:A,swipeDirections:e.swipeDirections})})):null}))}),pl="onboard_mnemonic",yo="onboard_wallet_address",gl="onboard_auth_token",ml="onboard_refresh_token",xl="onboard_expires_at";function nu(t){const[e,n]=S.useState(""),[s,r]=S.useState(""),[i,o]=S.useState(!1),[a,l]=S.useState(""),[c,u]=S.useState(void 0),[d,f]=S.useState(void 0),[g,m]=S.useState(!1),[b,w]=S.useState(null);S.useEffect(()=>{const _=localStorage.getItem(pl),D=localStorage.getItem(yo),A=localStorage.getItem(gl),W=localStorage.getItem(ml),H=localStorage.getItem(xl);if(n(_||""),r(D||""),A&&l(A),W&&u(W),H){const O=parseInt(H,10);isNaN(O)||f(O)}},[]);const p=S.useCallback(async _=>{if(!_||_.trim()==="")return null;o(!0);try{Re.isReady()||await Re.initialize();const D=await Re.generateAddress(_.trim(),0);return D.success&&D.address?D.address.toLowerCase():(console.error("Failed to generate address:",D.error),null)}catch(D){return console.error("Error generating address:",D),null}finally{o(!1)}},[]),y=S.useCallback(async _=>{const D=_.trim();if(D===""){n(""),r(""),localStorage.removeItem(pl),localStorage.removeItem(yo);return}n(D),localStorage.setItem(pl,D);const A=await p(D);A?(r(A),localStorage.setItem(yo,A)):(r(""),localStorage.removeItem(yo))},[p]),x=S.useCallback((_,D)=>{const A=_.trim(),W=D.trim().toLowerCase();n(A),r(W),localStorage.setItem(pl,A),localStorage.setItem(yo,W)},[]),v=S.useCallback(()=>{n(""),r(""),localStorage.removeItem(pl),localStorage.removeItem(yo)},[]),k=S.useMemo(()=>{if(e==="")return null;const _=e.trim();if(_==="")return null;try{const D=Tc.fromPhrase(_,"","m/44'/60'/0'/0/0");if(s&&D.address.toLowerCase()!==s.toLowerCase())return console.warn("Address mismatch: derived address does not match stored address"),null;const A=BigInt(D.privateKey),W=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(A===0n||A>=W)return console.error("Invalid private key: out of secp256k1 curve order"),null;const O=A.toString(16).toLowerCase().padStart(64,"0");return/^[0-9a-f]{64}$/.test(O)?O:(console.error("Invalid private key format"),null)}catch(D){return console.error("Error computing private key:",D),null}},[e,s]),C=S.useCallback(async(_,D,A,W)=>{m(!0),w(null);try{await y(_);const H=await t_(_,D,A,W);if(H.success&&H.authToken)l(H.authToken),u(H.refreshToken),f(H.expiresAt),localStorage.setItem(gl,H.authToken),H.refreshToken&&localStorage.setItem(ml,H.refreshToken),H.expiresAt&&localStorage.setItem(xl,H.expiresAt.toString()),Ie.success("Onboarding successful",{description:"Wallet authenticated and auth token generated.",duration:5e3});else{const O=H.error||"Onboarding failed";w(O),l(""),u(void 0),f(void 0),localStorage.removeItem(gl),localStorage.removeItem(ml),localStorage.removeItem(xl),Ie.error("Onboarding failed",{description:O,duration:6e3})}}catch(H){const O=(H==null?void 0:H.message)||"Unknown error during onboarding";w(O),l(""),u(void 0),f(void 0),localStorage.removeItem(gl),localStorage.removeItem(ml),localStorage.removeItem(xl),Ie.error("Onboarding error",{description:O,duration:6e3})}finally{m(!1)}},[y]),E=S.useCallback(()=>{w(null)},[]),T=S.useCallback(()=>{l(""),u(void 0),f(void 0),w(null),m(!1),localStorage.removeItem(gl),localStorage.removeItem(ml),localStorage.removeItem(xl)},[]),P=S.useCallback(()=>{v(),T()},[v,T]);return{mnemonic:e,walletAddress:s,privateKey:k,authToken:a,refreshToken:c,expiresAt:d,loading:g,error:b,addressLoading:i,onboard:C,setMnemonic:y,setAccountData:x,clearAccountData:v,clearError:E,reset:T,resetAll:P}}function pM(){const{setAccountData:t}=nu(),{mnemonic:e,setMnemonic:n,addressIndex:s,setAddressIndex:r,result:i,loading:o,generateAddress:a,isReady:l}=U8();return S.useEffect(()=>{i!=null&&i.success&&i.address&&e&&t(e,i.address)},[i,e,t]),h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Address Generator"}),h.jsx("p",{children:"Generate Ethereum addresses from mnemonic phrases"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:e,onChange:c=>n(c.target.value),placeholder:"Enter your mnemonic phrase...",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),h.jsx("input",{id:"addressIndex",type:"number",value:s,onChange:c=>r(parseInt(c.target.value)||0),min:"0",max:"1000"})]}),h.jsx("button",{className:"button",onClick:a,disabled:o||!l,children:o?"Generating...":"Generate Address"}),i&&h.jsx("div",{className:`output ${i.success?"success":"error"}`,children:i.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Generated Address:"}),h.jsx("br",{}),i.address,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Index: ",i.index,h.jsx("br",{}),"Mnemonic: ",i.mnemonic]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),i.error]})})]})}function gM(){var f,g;const{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:c,signMessage:u,isReady:d}=W8();return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Message Signer"}),h.jsx("p",{children:"Sign messages with your private key"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"message",children:"Message to Sign:"}),h.jsx("textarea",{id:"message",value:n,onChange:m=>s(m.target.value),placeholder:"Enter message to sign...",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),h.jsx("input",{id:"addressIndex",type:"number",value:o,onChange:m=>a(parseInt(m.target.value)||0),min:"0",max:"1000"})]}),h.jsx("div",{className:"form-group",children:h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:r,onChange:m=>i(m.target.checked),style:{marginRight:"0.5rem"}}),"Use EIP-712 Typed Data"]})}),h.jsx("button",{className:"button",onClick:u,disabled:c||!d,children:c?"Signing...":"Sign Message"}),l&&h.jsx("div",{className:`output ${l.success?"success":"error"}`,children:l.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Signature:"}),h.jsx("br",{}),l.signature,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Message: ",l.message,h.jsx("br",{}),"EIP-712: ",(f=l.options)!=null&&f.useEIP712?"Yes":"No",h.jsx("br",{}),"Address Index: ",((g=l.options)==null?void 0:g.addressIndex)||0]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),l.error]})})]})}function mM(){var w,p,y,x;const[t,e]=S.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=S.useState(""),[r,i]=S.useState("1000000000000000000000000"),[o,a]=S.useState(0),[l,c]=S.useState(0),[u,d]=S.useState(null),[f,g]=S.useState(!1),m=async()=>{if(!Re.isReady()){d({success:!1,error:"WASM module not ready"});return}if(!n){d({success:!1,error:"Wallet address is required"});return}g(!0),d(null);try{const v={nonce:o||Date.now(),deadline:l||Date.now()+36e5},k=await Re.signDeposit(t,n,r,v);d(k)}catch(v){d({success:!1,error:v instanceof Error?v.message:"Unknown error"})}finally{g(!1)}},b=async()=>{if(!Re.isReady()){d({success:!1,error:"WASM module not ready"});return}g(!0),d(null);try{const v=await Re.generateAddress(t,0);v.success&&v.address?(s(v.address),d({success:!0,message:"Wallet address generated and set",address:v.address})):d({success:!1,error:v.error||"Failed to generate address"})}catch(v){d({success:!1,error:v instanceof Error?v.message:"Unknown error"})}finally{g(!1)}};return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Deposit Signer"}),h.jsx("p",{children:"Sign deposit messages for the Morpheum protocol"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:t,onChange:v=>e(v.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"walletAddress",children:"Wallet Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"walletAddress",type:"text",value:n,onChange:v=>s(v.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:b,disabled:f||!Re.isReady(),style:{padding:"0.75rem 1rem"},children:"Generate"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"amount",children:"Amount (wei):"}),h.jsx("input",{id:"amount",type:"text",value:r,onChange:v=>i(v.target.value),placeholder:"1000000000000000000000000"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"nonce",children:"Nonce (0 for current timestamp):"}),h.jsx("input",{id:"nonce",type:"number",value:o,onChange:v=>a(parseInt(v.target.value)||0),min:"0"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"deadline",children:"Deadline (0 for 1 hour from now):"}),h.jsx("input",{id:"deadline",type:"number",value:l,onChange:v=>c(parseInt(v.target.value)||0),min:"0"})]})]}),h.jsx("button",{className:"button",onClick:m,disabled:f||!Re.isReady()||!n,children:f?"Signing Deposit...":"Sign Deposit"}),u&&h.jsx("div",{className:`output ${u.success?"success":"error"}`,children:u.success?h.jsx(h.Fragment,{children:u.signature?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Deposit Signature:"}),h.jsx("br",{}),u.signature,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Wallet: ",(w=u.options)==null?void 0:w.walletAddress,h.jsx("br",{}),"Amount: ",(p=u.options)==null?void 0:p.amount," wei",h.jsx("br",{}),"Nonce: ",(y=u.options)==null?void 0:y.nonce,h.jsx("br",{}),"Deadline: ",(x=u.options)==null?void 0:x.deadline]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Wallet Address Generated:"}),h.jsx("br",{}),u.address,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Message:"}),h.jsx("br",{}),u.message]})}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),u.error]})})]})}function xM(){const{ownerMnemonic:t,setOwnerMnemonic:e,ownerAddress:n,setOwnerAddress:s,agentAddress:r,setAgentAddress:i,agentPrivateKey:o,expiresInDays:a,setExpiresInDays:l,permissions:c,setPermissions:u,agentName:d,setAgentName:f,nonce:g,setNonce:m,result:b,loading:w,generateOwnerAddress:p,generateAgentKeypair:y,prepareAgentSign:x,signAgentApproval:v,isReady:k}=H8();return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Agent Delegation"}),h.jsx("p",{children:"Approve an agent private key to act on behalf of the owner wallet"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"ownerMnemonic",children:"Owner Mnemonic (for signing approval):"}),h.jsx("textarea",{id:"ownerMnemonic",value:t,onChange:C=>e(C.target.value),placeholder:"Enter owner mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"ownerAddress",type:"text",value:n,onChange:C=>s(C.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:p,disabled:w||!k,style:{padding:"0.75rem 1rem"},children:"Generate"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentAddress",children:"Agent Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"agentAddress",type:"text",value:r,onChange:C=>i(C.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:y,disabled:w||!k,style:{padding:"0.75rem 1rem"},children:"Generate Keypair"})]})]}),o&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentPrivateKey",children:"Agent Private Key (save securely):"}),h.jsx("input",{id:"agentPrivateKey",type:"text",value:o,readOnly:!0,style:{fontFamily:"monospace",fontSize:"0.9rem"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentName",children:"Agent Name (optional):"}),h.jsx("input",{id:"agentName",type:"text",value:d,onChange:C=>f(C.target.value),placeholder:"TradingBot"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"expiresInDays",children:"Expires In Days:"}),h.jsx("input",{id:"expiresInDays",type:"number",value:a,onChange:C=>l(parseInt(C.target.value)||180),min:"1",max:"365"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"permissions",children:"Permissions (comma-separated):"}),h.jsx("input",{id:"permissions",type:"text",value:c,onChange:C=>u(C.target.value),placeholder:"clob::submit_order,clob::cancel_order"}),h.jsx("small",{style:{display:"block",marginTop:"0.5rem",opacity:.8},children:"Example: clob::submit_order, clob::cancel_order, clob::modify_order"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),h.jsx("input",{id:"nonce",type:"text",value:g,onChange:C=>m(C.target.value),placeholder:Date.now().toString()})]}),h.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[h.jsx("button",{className:"button secondary",onClick:x,disabled:w||!k||!n||!r,children:w?"Preparing...":"Prepare Agent Sign"}),h.jsx("button",{className:"button",onClick:v,disabled:w||!k||!n||!r||!t,children:w?"Signing Approval...":"Sign Agent Approval"})]}),b&&h.jsx("div",{className:`output ${b.success?"success":"error"}`,children:b.success?h.jsxs(h.Fragment,{children:[b.signature&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Agent Approval Signature:"}),h.jsx("br",{}),b.signature,h.jsx("br",{}),h.jsx("br",{})]}),b.typedData&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"EIP-712 Typed Data:"}),h.jsx("br",{}),h.jsx("pre",{style:{fontSize:"0.85rem",overflow:"auto",maxHeight:"300px"},children:JSON.stringify(b.typedData,null,2)}),h.jsx("br",{}),h.jsx("strong",{children:"Usage:"}),h.jsx("br",{}),"Use this typed data with MetaMask or other EIP-712 compatible wallets to sign the agent approval."]})]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),b.error]})})]})}function bM({status:t}){const e=()=>t.loading?"loading":t.loaded?"success":t.error?"error":"loading",n=()=>t.loading?"Loading WASM...":t.loaded?"WASM Ready":t.error?"WASM Error":"Unknown";return h.jsxs("div",{className:"App-section",children:[h.jsx("h3",{children:"WASM Status"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[h.jsx("span",{className:`status ${e()}`,children:n()}),t.loading&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"Initializing WebAssembly module..."}),t.loaded&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"morm_signer.wasm loaded successfully"}),t.error&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:t.error})]})]})}const yM="modulepreload",vM=function(t){return"/"+t},Av={},wM=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=vM(l),l in Av)return;Av[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":yM,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},su="https://router.morpheum.io",cf="wss://router.morpheum.io/websocket",xx="ios-device-1234567890",SM=({isRunning:t,onClick:e})=>h.jsx("button",{onClick:e,disabled:t,style:{color:"#fff",backgroundColor:t?"#ccc":"#007bff",cursor:t?"not-allowed":"pointer"},children:t?"Running Tests...":"Run All Tests"}),kM=({mnemonic:t,baseURL:e,onboardLoading:n,isRunning:s,onOnboard:r})=>{const i=n||s||!t||t.trim()==="";return h.jsx("button",{onClick:()=>{t&&t.trim()!==""&&r(t,e)},disabled:i,style:{color:i?"#ccc":"#fff",backgroundColor:i?"#ccc":"#28a745",cursor:i?"not-allowed":"pointer"},children:n?"Onboarding...":"Onboard & Get Auth Token"})},CM=({isRunning:t,onClick:e})=>h.jsx("button",{onClick:e,disabled:t,style:{color:t?"#ccc":"#fff",backgroundColor:t?"#ccc":"#dc3545",cursor:t?"not-allowed":"pointer"},children:"Clear Results"}),_M=({onClick:t})=>h.jsx("button",{onClick:t,className:"sdk-test-button-dismiss",children:"Dismiss"}),EM=({result:t})=>h.jsxs("div",{className:`sdk-test-result-item ${t.success?"success":"error"}`,children:[h.jsxs("div",{className:"sdk-test-result-content",children:[h.jsxs("div",{className:"sdk-test-result-message",children:[t.success?"":""," ",t.message]}),t.error&&h.jsxs("div",{className:"sdk-test-result-error",children:["Error: ",t.error]}),t.data&&h.jsxs("details",{className:"sdk-test-result-data",children:[h.jsx("summary",{children:"View Data"}),h.jsx("pre",{children:JSON.stringify(t.data,null,2)})]})]}),h.jsx("div",{className:"sdk-test-result-timestamp",children:new Date(t.timestamp).toLocaleTimeString()})]}),PM=({sectionName:t,isExpanded:e,onToggle:n})=>h.jsxs("h2",{className:"sdk-test-section-header",onClick:n,children:[h.jsx("span",{children:t}),h.jsx("span",{className:"sdk-test-section-chevron",children:e?"":""})]});function TM(){var Pe,_e,Le,wt;const[t,e]=S.useState(su),[n,s]=S.useState(""),[r,i]=S.useState(""),[o,a]=S.useState(""),[l,c]=S.useState(xx),[u,d]=S.useState({}),[f,g]=S.useState(!1),[m,b]=S.useState(new Set),w=S.useRef(null),p=S.useRef(null),y=S.useRef(t),x=S.useRef([]),v=S.useRef(""),{markets:k,fetchMarkets:C}=qa({baseURL:t,sessionToken:r,autoFetchMarkets:!1}),{mnemonic:E,walletAddress:T,authToken:P,loading:_,error:D,onboard:A,clearError:W,setMnemonic:H}=nu();S.useEffect(()=>{E||H("legal winner thank year wave sausage worth useful legal winner thank yellow")},[E,H]);const O=S.useRef(E||"");S.useEffect(()=>{O.current=E||""},[E]);const{buckets:R,loading:F,error:L,refresh:z}=BI({baseURL:t,authToken:r||o,walletAddress:T||void 0,refreshInterval:0});S.useEffect(()=>{P&&(a(P),localStorage.setItem("authToken",P))},[P]),S.useEffect(()=>{o&&o.trim()!==""&&localStorage.setItem("authToken",o)},[o]);const I=S.useRef(f);S.useEffect(()=>{I.current===!0&&f===!1&&setTimeout(()=>{const N=Object.values(u).flatMap(we=>we.results),J=N.filter(we=>we.success).length,oe=N.length,de=oe-J;oe>0&&(de===0?Ie.success("All tests passed",{description:`${oe} test(s) completed successfully.`,duration:5e3}):Ie.warning("Tests completed with failures",{description:`${J}/${oe} tests passed. ${de} test(s) failed.`,duration:6e3}))},100),I.current=f},[f,u]),S.useEffect(()=>{const N=localStorage.getItem("authToken");N&&!o&&a(N)},[]);const K=k.length>0?(((Pe=k.find(N=>N.active))==null?void 0:Pe.market_id)??k[0].market_id)||(((Le=(_e=k.find(N=>N.active))==null?void 0:_e.id)==null?void 0:Le.toString())??((wt=k[0].id)==null?void 0:wt.toString())??""):null,j=K??n;S.useEffect(()=>{K&&n!==K&&s(K)},[K]),S.useEffect(()=>{y.current=t},[t]);const M=(N,J)=>{d(oe=>{const de=oe[N]||{name:N,results:[]};return{...oe,[N]:{...de,results:[...de.results,J]}}})},$=()=>{d({}),b(new Set)},q=N=>{b(J=>{const oe=new Set(J);return oe.has(N)?oe.delete(N):oe.add(N),oe})};S.useEffect(()=>{const N=Object.keys(u).filter(J=>u[J].results.length>0);N.length>0&&b(J=>{const oe=new Set(J);return N.forEach(de=>oe.add(de)),oe})},[u]);const X=()=>{const N="Utilities";M(N,{success:!0,message:"Testing utility functions...",timestamp:Date.now()});try{const J=xt(1);M(N,{success:J==="100000000",message:`toSatoshi(1.0) = ${J}`,data:{expected:"100000000",got:J},timestamp:Date.now()});const oe=xt("1.5");M(N,{success:oe==="150000000",message:`toSatoshi("1.5") = ${oe}`,data:{expected:"150000000",got:oe},timestamp:Date.now()});const de=Ee("100000000");M(N,{success:de===1,message:`fromSatoshi("100000000") = ${de}`,data:{expected:1,got:de},timestamp:Date.now()});const we=Lk(1);M(N,{success:we===1e8,message:`toSatoshiUint64(1.0) = ${we}`,data:{expected:1e8,got:we},timestamp:Date.now()});const ve=vy("100000000"),B=vy("abc");M(N,{success:ve&&!B,message:`isValidSatoshi tests: "100000000"=${ve}, "abc"=${B}`,data:{valid1:ve,valid2:B},timestamp:Date.now()});const le=[1,1.5,2],V=t4(le),ce=n4(V);M(N,{success:ce.length===3,message:`Batch conversion: ${le.length} items`,data:{input:le,satoshi:V,decimal:ce},timestamp:Date.now()}),M(N,{success:Yo===1e8,message:`SATOSHI_SCALE = ${Yo}`,data:{expected:1e8,got:Yo},timestamp:Date.now()})}catch(J){M(N,{success:!1,message:"Utility test error",error:J.message,timestamp:Date.now()})}},G=async(N="Authentication")=>{if(!T||T.trim()===""){M(N,{success:!1,message:"Authentication skipped: Wallet address required",timestamp:Date.now()});return}if(!Re.isReady()){M(N,{success:!1,message:"Authentication failed: mormSigner not loaded. Please initialize mormSigner first for address generation.",timestamp:Date.now()});return}try{M(N,{success:!0,message:"Starting authentication (onboarding) with ethers.js EIP-712 signing...",timestamp:Date.now()});const{onboardAndGetAuthToken:J}=await wM(async()=>{const{onboardAndGetAuthToken:de}=await Promise.resolve().then(()=>L8);return{onboardAndGetAuthToken:de}},void 0);if(M(N,{success:!0,message:"Calling onboardAndGetAuthToken (handles nonce, EIP-712 signing with ethers.js, and API request)...",timestamp:Date.now()}),!E)throw new Error("Mnemonic is required for authentication");const oe=await J(E,y.current);if(!oe.success||!oe.authToken)throw new Error(oe.error||"Onboarding failed");a(oe.authToken),localStorage.setItem("authToken",oe.authToken),M(N,{success:!0,message:"AUTHENTICATION SUCCESSFUL!",data:{walletAddress:T,authToken:oe.authToken.substring(0,32)+"...",refreshToken:oe.refreshToken,expiresAt:oe.expiresAt},timestamp:Date.now()})}catch(J){const oe=J.message||String(J);M(N,{success:!1,message:`Authentication failed: ${oe}`,error:oe,timestamp:Date.now()})}},ee=async()=>{var we;const N="Wallet Specific";p.current=new hn({baseURL:y.current}),r&&p.current&&p.current.setSessionToken(r),M(N,{success:!0,message:"Waiting for wallet address to be available...",timestamp:Date.now()});const J=5e3,oe=200;let de=0;for(;!T||T.trim()==="";){if(de>=J){M(N,{success:!1,message:"Timeout: Wallet address not available after 5 seconds",error:"Wallet address is required for wallet-specific tests. Please ensure mnemonic is provided.",timestamp:Date.now()});return}await new Promise(ve=>setTimeout(ve,oe)),de+=oe}if(!T||T.trim()===""){M(N,{success:!1,message:"Wallet address is required for wallet-specific tests",error:"Wallet address not available",timestamp:Date.now()});return}M(N,{success:!0,message:`Wallet address available: ${T.substring(0,10)}...`,timestamp:Date.now()});try{M(N,{success:!0,message:`Testing getBalance() for asset "MORM" at address ${T.substring(0,10)}...`,timestamp:Date.now()});try{const B=await p.current.getBalance(T,"MORM"),le=(B==null?void 0:B.balance)||(B==null?void 0:B.amount)||(B==null?void 0:B.value)||"N/A",V=typeof le=="string"?le:JSON.stringify(le);M(N,{success:!!B,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: MORM | Balance: ${V} (raw satoshi format)`,data:{balance:B,asset:"MORM",walletAddress:T.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(B){M(N,{success:!1,message:'getBalance() failed for asset "MORM" (may require authentication)',error:B.message,data:{asset:"MORM",walletAddress:T.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}M(N,{success:!0,message:`Testing getBalance() for asset "USDC" at address ${T.substring(0,10)}...`,timestamp:Date.now()});try{const B=await p.current.getBalance(T,"USDC"),le=(B==null?void 0:B.balance)||(B==null?void 0:B.amount)||(B==null?void 0:B.value)||"N/A",V=typeof le=="string"?le:JSON.stringify(le);M(N,{success:!!B,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: USDC | Balance: ${V} (raw satoshi format)`,data:{balance:B,asset:"USDC",walletAddress:T.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(B){M(N,{success:!1,message:'getBalance() failed for asset "USDC" (may require authentication)',error:B.message,data:{asset:"USDC",walletAddress:T.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}try{const B=await p.current.getBalanceDecimal(T,"USDC");M(N,{success:!!B,message:"getBalanceDecimal() - GET /bank/v1/balance/{address}",data:B,timestamp:Date.now()})}catch(B){M(N,{success:!1,message:"getBalanceDecimal() failed",error:B.message,timestamp:Date.now()})}try{const B=await p.current.getBalances(T);M(N,{success:!!B,message:"getBalances() - GET /bank/v1/balances/{address}",data:B,timestamp:Date.now()})}catch(B){M(N,{success:!1,message:"getBalances() failed (may require authentication)",error:B.message,timestamp:Date.now()})}try{const B=await p.current.getPositions(T);M(N,{success:Array.isArray(B),message:`getPositions() - GET /bucket/v1/address/{address}/positions returned ${Array.isArray(B)?B.length:0} positions`,data:B,timestamp:Date.now()})}catch(B){M(N,{success:!1,message:"getPositions() failed",error:B.message,timestamp:Date.now()})}try{const B=await p.current.getPositionsDecimal(T);M(N,{success:Array.isArray(B),message:`getPositionsDecimal() - GET /bucket/v1/address/{address}/positions returned ${Array.isArray(B)?B.length:0} positions`,data:B,timestamp:Date.now()})}catch(B){M(N,{success:!1,message:"getPositionsDecimal() failed",error:B.message,timestamp:Date.now()})}let ve=[];try{const B=await p.current.getOrders(T);ve=(B==null?void 0:B.orders)||[];const le=B&&(Array.isArray(ve)||B.total_count!==void 0);M(N,{success:le,message:`getOrders() - GET /clob/v1/address/orders?address={address} returned ${Array.isArray(ve)?ve.length:0} orders (total_count: ${(B==null?void 0:B.total_count)??"N/A"})`,data:{orders:Array.isArray(ve)?ve.slice(0,3):ve,total_count:B==null?void 0:B.total_count,timestamp:B==null?void 0:B.timestamp},timestamp:Date.now()})}catch(B){M(N,{success:!1,message:"getOrders() failed",error:B.message,timestamp:Date.now()})}if(Array.isArray(ve)&&ve.length>0){const B=ve[0],le=(B==null?void 0:B.orderId)||(B==null?void 0:B.order_id)||(B==null?void 0:B.id);if(le){M(N,{success:!0,message:`Testing getOrder() for order ID: ${le.substring(0,16)}... (from getOrders result)`,timestamp:Date.now()});try{const V=await p.current.getOrder(le);M(N,{success:!!V,message:`getOrder() - GET /clob/v1/order/{orderID} | Order ID: ${le.substring(0,16)}...`,data:{order:V,orderId:le,source:"First order from getOrders() result"},timestamp:Date.now()})}catch(V){M(N,{success:!1,message:`getOrder() failed for order ID: ${le.substring(0,16)}...`,error:V.message,data:{orderId:le,endpoint:"GET /clob/v1/order/{orderID}"},timestamp:Date.now()})}}else M(N,{success:!1,message:"getOrder() test skipped: No valid order ID found in getOrders() result",error:"Order ID not found in order object",data:{order:B,availableFields:Object.keys(B||{})},timestamp:Date.now()})}else M(N,{success:!0,message:"getOrder() test skipped: No orders available from getOrders() (need at least 1 order)",data:{ordersCount:ve.length,note:"getOrder() test requires at least one order from getOrders()"},timestamp:Date.now()});try{const B=await p.current.getOrderHistory(T),le=Array.isArray(B)?B:(B==null?void 0:B.orders)||[],V=B&&(Array.isArray(le)||B.orders!==void 0);M(N,{success:V,message:`getOrderHistory() - GET /clob/v1/address/orders/history?address={address} returned ${Array.isArray(le)?le.length:0} orders`,data:Array.isArray(le)?le.slice(0,3):B,timestamp:Date.now()})}catch(B){M(N,{success:!1,message:"getOrderHistory() failed",error:B.message,timestamp:Date.now()})}try{const B=await p.current.getTradeHistory(T),le=Array.isArray(B)?B:(B==null?void 0:B.trades)||(B==null?void 0:B.data)||[],V=B&&(Array.isArray(le)||B.trades!==void 0||B.data!==void 0);M(N,{success:V,message:`getTradeHistory() - GET /clob/v1/address/trades?address={address} returned ${Array.isArray(le)?le.length:0} trades`,data:Array.isArray(le)?le.slice(0,3):B,timestamp:Date.now()})}catch(B){M(N,{success:!1,message:"getTradeHistory() failed",error:B.message,timestamp:Date.now()})}try{const B=await p.current.getBuckets(T);if(M(N,{success:Array.isArray(B)||B!==void 0,message:`getBuckets() - GET /bucket/v1/address/{address}/buckets returned ${Array.isArray(B)?B.length:"data"}`,data:Array.isArray(B)?B.slice(0,3):B,timestamp:Date.now()}),Array.isArray(B)&&B.length>0){const le=B[0],V=le.bucket_id||le.id||le.bucketId;if(V)try{const ce=await p.current.getBucket(V);M(N,{success:!!ce,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} (${V.substring(0,16)}...)`,data:ce,timestamp:Date.now()})}catch(ce){M(N,{success:!1,message:`getBucket(${V.substring(0,16)}...) failed`,error:ce.message,timestamp:Date.now()})}}}catch(B){M(N,{success:!1,message:"getBuckets() failed",error:B.message,timestamp:Date.now()})}M(N,{success:!0,message:"Testing useBuckets hook...",timestamp:Date.now()});try{if(await z(),M(N,{success:!L&&!F,message:`useBuckets hook: ${R.length} buckets loaded`,data:{buckets:R.slice(0,3),loading:F,error:L,totalBuckets:R.length},timestamp:Date.now()}),R.length>0){const le=(we=R[0].bucketId)==null?void 0:we.toString();if(le)try{const V=await p.current.getBucket(le);M(N,{success:!!V,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} via hook bucket ID (${le.substring(0,16)}...)`,data:V,timestamp:Date.now()})}catch(V){M(N,{success:!1,message:"getBucket() via hook bucket ID failed",error:V.message,timestamp:Date.now()})}}}catch(B){M(N,{success:!1,message:"useBuckets hook test failed",error:B.message,timestamp:Date.now()})}}catch(ve){M(N,{success:!1,message:"Wallet Specific test error",error:ve.message,timestamp:Date.now()})}},se=async()=>{var J,oe,de,we,ve;const N="InfoClient";p.current=new hn({baseURL:y.current}),r&&p.current&&p.current.setSessionToken(r);try{M(N,{success:!0,message:"Testing getMarkets()...",timestamp:Date.now()});const B=await C();x.current=Array.isArray(B)?B:[];const le=Array.isArray(B)?B.length:0,V=le>0?B.find(Y=>Y.active||Y.status==="active")??B[0]:null,ce=(V==null?void 0:V.market_id)??((J=V==null?void 0:V.id)==null?void 0:J.toString())??null;if(M(N,{success:Array.isArray(B)&&le>0,message:`getMarkets() - GET /market/v1/all returned ${le} markets${ce?` | Using market ID: ${ce} (${(V==null?void 0:V.moniker)||(V==null?void 0:V.symbol)||"auto-selected"})`:""}`,data:{count:le,defaultMarketId:ce,defaultMarket:V?{id:V.id,market_id:V.market_id,moniker:V.moniker,symbol:V.symbol,active:V.active,status:V.status}:null,markets:B.slice(0,5)},timestamp:Date.now()}),ce){s(ce),v.current=ce;const Y=(V==null?void 0:V.moniker)||(V==null?void 0:V.symbol)||(V!=null&&V.baseAsset&&(V!=null&&V.quoteAsset)?`${V.baseAsset}-${V.quoteAsset}`:"Unknown");M(N,{success:!0,message:`Markets loaded: ${le} | Auto-selected: ${Y} (ID: ${ce.substring(0,10)}...)`,data:{selectedMarketId:ce,count:le,market:V},timestamp:Date.now()}),M(N,{success:!0,message:"Waiting 1.5s for market selection to take effect...",timestamp:Date.now()}),await new Promise(he=>setTimeout(he,1500)),M(N,{success:!0,message:`Market ID ready: ${ce}`,data:{marketId:ce},timestamp:Date.now()}),M(N,{success:!0,message:`Proceeding with market: ${Y}`,timestamp:Date.now()})}const re=ce||j||n;if(re){M(N,{success:!0,message:`Testing getOrderbook(${re}, true)...`,timestamp:Date.now()});try{const Y=await p.current.getOrderbook(re,!0);M(N,{success:Y&&(Y.bids||Y.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} with decimal conversion",data:{bids:(oe=Y==null?void 0:Y.bids)==null?void 0:oe.slice(0,3),asks:(de=Y==null?void 0:Y.asks)==null?void 0:de.slice(0,3)},timestamp:Date.now()});const he=await p.current.getOrderbook(re,!1);M(N,{success:he&&(he.bids||he.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} raw satoshi format",data:{bids:(we=he==null?void 0:he.bids)==null?void 0:we.slice(0,2),asks:(ve=he==null?void 0:he.asks)==null?void 0:ve.slice(0,2)},timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} failed",error:Y.message,timestamp:Date.now()})}M(N,{success:!0,message:`Testing getTicker(${re})...`,timestamp:Date.now()});try{const Y=await p.current.getTicker(re);M(N,{success:!!Y,message:"getTicker() - GET /market/v1/market/{marketId}/stats",data:Y,timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"getTicker() - GET /market/v1/market/{marketId}/stats failed",error:Y.message,timestamp:Date.now()})}M(N,{success:!0,message:`Testing getRecentTrades(${re}, 10)...`,timestamp:Date.now()});try{const Y=await p.current.getRecentTrades(re,10);M(N,{success:Array.isArray(Y),message:`getRecentTrades() - GET /clob/v1/trades?market_id={marketId} returned ${Array.isArray(Y)?Y.length:0} trades`,data:Y==null?void 0:Y.slice(0,3),timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"getRecentTrades() - GET /clob/v1/trades?market_id={marketId} failed",error:Y.message,timestamp:Date.now()})}}else M(N,{success:!1,message:"Skipping market-specific tests: No market ID available",error:"Please ensure markets are loaded and a market is selected",timestamp:Date.now()});M(N,{success:!0,message:"Testing router/v1 endpoints...",timestamp:Date.now()});try{const Y=await p.current.getSupportedActions();M(N,{success:Array.isArray(Y==null?void 0:Y.actions)||(Y==null?void 0:Y.actions)!==void 0,message:"getSupportedActions() - GET /router/v1/tx/supported-actions",data:Y,timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"getSupportedActions() - GET /router/v1/tx/supported-actions failed",error:Y.message,timestamp:Date.now()})}try{const Y=await p.current.validateAction("clob::submit_order");M(N,{success:(Y==null?void 0:Y.valid)!==void 0||Y!==void 0,message:'validateAction() - GET /router/v1/tx/validate-action ("clob::submit_order")',data:Y,timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"validateAction() - GET /router/v1/tx/validate-action failed",error:Y.message,timestamp:Date.now()})}try{const Y=await p.current.getHealthSummary();M(N,{success:!!Y,message:"getHealthSummary() - GET /router/v1/health/summary",data:Y,timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"getHealthSummary() - GET /router/v1/health/summary failed",error:Y.message,timestamp:Date.now()})}try{const Y=await p.current.getHealthDaemons();M(N,{success:!!Y,message:"getHealthDaemons() - GET /router/v1/health/daemons",data:Y,timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"getHealthDaemons() - GET /router/v1/health/daemons failed",error:Y.message,timestamp:Date.now()})}try{const Y=await p.current.getHealthOracle();M(N,{success:!!Y,message:"getHealthOracle() - GET /router/v1/health/oracle",data:Y,timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"getHealthOracle() - GET /router/v1/health/oracle failed",error:Y.message,timestamp:Date.now()})}try{const Y=await p.current.getServerTime();M(N,{success:!!Y&&(Y.serverTime!==void 0||Y!==void 0),message:"getServerTime() - GET /router/v1/time",data:Y,timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"getServerTime() - GET /router/v1/time failed",error:Y.message,timestamp:Date.now()})}try{const Y=await p.current.getMetricsTPS();M(N,{success:!!Y,message:"getMetricsTPS() - GET /router/v1/metrics/tps",data:Y,timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"getMetricsTPS() - GET /router/v1/metrics/tps failed",error:Y.message,timestamp:Date.now()})}try{const Y=await p.current.getMetricsLatency();M(N,{success:!!Y,message:"getMetricsLatency() - GET /router/v1/metrics/latency",data:Y,timestamp:Date.now()})}catch(Y){M(N,{success:!1,message:"getMetricsLatency() - GET /router/v1/metrics/latency failed",error:Y.message,timestamp:Date.now()})}}catch(B){M(N,{success:!1,message:"InfoClient test error",error:B.message,timestamp:Date.now()})}},be=async()=>{var we,ve;const N="ExchangeClient";if(!E){M(N,{success:!1,message:"Mnemonic required for ExchangeClient tests",error:"No mnemonic provided",timestamp:Date.now()});return}let J=n||j||v.current||"";if(!J||J.trim()===""){if(x.current&&x.current.length>0){const B=x.current.find(le=>le.active||le.status==="active")??x.current[0];B&&(J=B.market_id??((we=B.id)==null?void 0:we.toString())??"",v.current=J,M(N,{success:!0,message:`Market ID not in state, using from fetched markets ref: ${J.substring(0,16)}...`,data:{source:"fetchedMarketsRef",marketId:J,market:{moniker:B.moniker,symbol:B.symbol,active:B.active}},timestamp:Date.now()}))}else if(k&&k.length>0){const B=k.find(le=>le.active||le.status==="active")??k[0];B&&(J=B.market_id??((ve=B.id)==null?void 0:ve.toString())??"",M(N,{success:!0,message:`Market ID not in state, using from markets state: ${J.substring(0,16)}...`,data:{source:"markets state",marketId:J,market:{moniker:B.moniker,symbol:B.symbol,active:B.active}},timestamp:Date.now()}))}}if(!J||J.trim()===""){M(N,{success:!1,message:"Market ID required from page or loaded markets",error:`Please enter or select a market ID in the configuration section, or ensure markets are loaded first. Debug: marketId="${n||"(empty)"}", effectiveMarketId="${j||"(empty)"}", fetchedMarketIdRef="${v.current||"(empty)"}", fetchedMarketsRef.length=${x.current.length}, markets.length=${k.length}`,data:{marketId:n||"(empty)",effectiveMarketId:j||"(empty)",defaultMarketId:K||"(empty)",fetchedMarketIdRef:v.current||"(empty)",fetchedMarketsRefCount:x.current.length,marketsCount:k.length,marketsAvailable:k.length>0||x.current.length>0},timestamp:Date.now()});return}const oe=T||"";if(!oe||oe.trim()===""){M(N,{success:!1,message:"Wallet address required from page",error:"Wallet address should be generated from mnemonic or entered manually. Please ensure mnemonic is valid.",timestamp:Date.now()});return}const de=n?"page state (marketId)":j?"page state (effectiveMarketId)":"loaded markets array";M(N,{success:!0,message:`Using market ID from ${de}: ${J.substring(0,16)}...`,data:{marketId:J,source:de},timestamp:Date.now()}),M(N,{success:!0,message:`Using wallet address from page: ${oe.substring(0,10)}...`,data:{walletAddress:oe},timestamp:Date.now()}),(r||o)&&M(N,{success:!0,message:`Using signing tokens: ${r?"Session Token":""} ${o?"Auth Token":""}`,data:{hasSessionToken:!!r,hasAuthToken:!!o},timestamp:Date.now()}),w.current=new eu({baseURL:y.current,mnemonic:O.current});try{M(N,{success:!0,message:"Initializing ExchangeClient...",timestamp:Date.now()}),await w.current.initialize();const B=w.current.getWalletAddress();if(B.toLowerCase()!==oe.toLowerCase()){M(N,{success:!1,message:"Wallet address mismatch",error:`ExchangeClient wallet (${B}) does not match page wallet (${oe})`,timestamp:Date.now()});return}M(N,{success:!0,message:`ExchangeClient initialized successfully (Wallet: ${B.substring(0,10)}...)`,data:{walletAddress:B,marketId:J,verified:!0},timestamp:Date.now()});const le=J;M(N,{success:!0,message:`Using market ID as string: ${le}`,data:{marketId:le},timestamp:Date.now()});let V=null;if(J){const Y=xt("1"),he={marketId:le,side:"buy",orderType:"LIMIT",price:40010.8778,quantity:.01,timeInForce:"GTC",leverage:Y};M(N,{success:!0,message:`Testing placeOrder() (submit order) for market ${J}...`,data:{requestBody:he,endpoint:"POST /clob/v1/order",note:"Request body (price, quantity, leverage) will be converted to satoshi format by SDK. Leverage is already in satoshi format.",leverage:{decimal:1,satoshi:Y}},timestamp:Date.now()});try{const Te=await w.current.placeOrder(he);Te?(V=Te.orderId||Te.order_id||Te.id||null,V?M(N,{success:!0,message:`placeOrder() - POST /clob/v1/order executed successfully. Order ID: ${V.substring(0,16)}...`,data:{orderResult:Te,orderId:V,requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()}):M(N,{success:!0,message:"placeOrder() - POST /clob/v1/order executed successfully (orderId not found in response)",data:{orderResult:Te,requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})):M(N,{success:!1,message:"placeOrder() - POST /clob/v1/order returned empty response",data:{requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}catch(Te){M(N,{success:!1,message:"placeOrder() - POST /clob/v1/order failed",error:Te.message,data:{requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}}else M(N,{success:!0,message:"Skipping placeOrder() test: No market ID available",timestamp:Date.now()});if(J&&V){M(N,{success:!0,message:`Testing cancelOrder() for order ${V.substring(0,16)}...`,timestamp:Date.now()});try{const re=await w.current.cancelOrder({orderId:V,marketId:le});M(N,{success:!!re,message:"cancelOrder() - POST /router/v1/tx executed successfully",data:re,timestamp:Date.now()})}catch(re){M(N,{success:!1,message:"cancelOrder() - POST /router/v1/tx failed",error:re.message,timestamp:Date.now()})}}else J?V||M(N,{success:!0,message:"Skipping cancelOrder() test: No order ID available (placeOrder may have failed or orderId not in response)",timestamp:Date.now()}):M(N,{success:!0,message:"Skipping cancelOrder() test: No market ID available",timestamp:Date.now()});if(J){M(N,{success:!0,message:`Testing closePosition() for market ${J}...`,timestamp:Date.now()});try{const re=await w.current.closePosition({marketId:le});M(N,{success:!!re,message:"closePosition() - POST /router/v1/tx executed successfully",data:re,timestamp:Date.now()})}catch(re){M(N,{success:!1,message:"closePosition() - POST /router/v1/tx failed (may not have open position)",error:re.message,timestamp:Date.now()})}}else M(N,{success:!0,message:"Skipping closePosition() test: No market ID available",timestamp:Date.now()});M(N,{success:!0,message:"Fetching buckets for bucket operation tests...",timestamp:Date.now()});let ce=[];try{p.current||(p.current=new hn({baseURL:y.current})),r&&p.current&&p.current.setSessionToken(r);const re=await p.current.getBuckets(B);ce=Array.isArray(re)?re:[],M(N,{success:!0,message:`Found ${ce.length} bucket(s) for testing`,data:{bucketCount:ce.length,buckets:ce.slice(0,3).map(Y=>({bucketId:Y.bucket_id||Y.id||Y.bucketId,availableMargin:Y.available_margin||Y.availableMargin}))},timestamp:Date.now()})}catch(re){M(N,{success:!1,message:"Failed to fetch buckets for testing",error:re.message,timestamp:Date.now()})}if(ce.length>0){const re=ce[0],Y=re.bucket_id||re.id||re.bucketId;if(Y){M(N,{success:!0,message:"Testing extractToBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const he=await w.current.extractToBucket({bucketId:Y,assetId:"USDC",amount:"100000000"});M(N,{success:!!he,message:"extractToBucket() - POST /bank/v1/extract-to-bucket executed successfully",data:he,timestamp:Date.now()})}catch(he){M(N,{success:!1,message:"extractToBucket() - POST /bank/v1/extract-to-bucket failed",error:he.message,timestamp:Date.now()})}}else M(N,{success:!0,message:"Skipping extractToBucket() test: No valid bucket ID found",timestamp:Date.now()})}else M(N,{success:!0,message:"Skipping extractToBucket() test: No buckets available",timestamp:Date.now()});if(ce.length>0){const re=ce[0],Y=re.bucket_id||re.id||re.bucketId;if(Y){M(N,{success:!0,message:"Testing withdrawFromBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const he=await w.current.withdrawFromBucket({bucketId:Y,assetId:"USDC",amount:"100000000"});M(N,{success:!!he,message:"withdrawFromBucket() - POST /bank/v1/withdraw-from-bucket executed successfully",data:he,timestamp:Date.now()})}catch(he){M(N,{success:!1,message:"withdrawFromBucket() - POST /bank/v1/withdraw-from-bucket failed",error:he.message,timestamp:Date.now()})}}else M(N,{success:!0,message:"Skipping withdrawFromBucket() test: No valid bucket ID found",timestamp:Date.now()})}else M(N,{success:!0,message:"Skipping withdrawFromBucket() test: No buckets available",timestamp:Date.now()});if(ce.length>=2){const re=ce[0],Y=ce[1],he=re.bucket_id||re.id||re.bucketId,Te=Y.bucket_id||Y.id||Y.bucketId;if(he&&Te){M(N,{success:!0,message:"Testing bucketTransfer() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const ye=await w.current.bucketTransfer({fromBucketId:he,toBucketId:Te,assetId:"USDC",amount:"100000000"});M(N,{success:!!ye,message:"bucketTransfer() - POST /bucket/v1/bucket/transfer executed successfully",data:ye,timestamp:Date.now()})}catch(ye){M(N,{success:!1,message:"bucketTransfer() - POST /bucket/v1/bucket/transfer failed",error:ye.message,timestamp:Date.now()})}}else M(N,{success:!0,message:"Skipping bucketTransfer() test: Invalid bucket IDs",timestamp:Date.now()})}else M(N,{success:!0,message:"Skipping bucketTransfer() test: Need at least 2 buckets (found "+ce.length+")",timestamp:Date.now()});M(N,{success:!0,message:"ExchangeClient tests completed",data:{walletAddress:B,marketId:le,sessionToken:r?"present":"not set",authToken:o?"present":"not set",methodsTested:["placeOrder","cancelOrder","closePosition","extractToBucket","withdrawFromBucket","bucketTransfer"]},timestamp:Date.now()})}catch(B){M(N,{success:!1,message:"ExchangeClient test error",error:B.message,timestamp:Date.now()})}},He=async()=>{if(!f){g(!0),$(),Ie.info("Running tests",{description:"Starting comprehensive SDK test suite..."});try{X(),await se(),await G("Authentication"),await ee(),E&&await be()}catch(N){M("General",{success:!1,message:"Test suite error",error:N.message,timestamp:Date.now()}),Ie.error("Test suite error",{description:N.message||"An unexpected error occurred during testing.",duration:6e3})}finally{g(!1)}}};return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"SDK Test Page"}),h.jsx("p",{children:"Comprehensive test suite for all SDK APIs"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"sdk-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:N=>e(N.target.value),className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:N=>{const J=N.target.value;J&&s(J)},className:"sdk-test-config-select",children:k.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),k.map(N=>{var ve;const J=N.market_id??((ve=N.id)==null?void 0:ve.toString())??"",oe=N.moniker?N.moniker:N.symbol?N.symbol:N.baseAsset&&N.quoteAsset?`${N.baseAsset}-${N.quoteAsset}`:`Market ID: ${J}`,de=N.active?" [ACTIVE]":"",we=J.length>8?`${J.substring(0,8)}...`:J;return h.jsxs("option",{value:J,children:[oe," - ID: ",we,de]},J)})]})}),k.length>0&&h.jsx("small",{className:`sdk-test-config-hint ${n===K?"info":"warning"}`,children:n===K?` Auto-selected default market (ID: ${K==null?void 0:K.substring(0,16)}...)`:` Manual selection (ID: ${n==null?void 0:n.substring(0,16)}...)`})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic (for ExchangeClient):",h.jsx("input",{type:"text",value:E||"",onChange:N=>H(N.target.value),placeholder:"Optional",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Session Token (for authenticated InfoClient):",h.jsx("input",{type:"text",value:r,onChange:N=>i(N.target.value),disabled:!!(r&&r.trim()!==""),placeholder:"Optional",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Auth Token:",h.jsx("input",{type:"text",value:o,onChange:N=>a(N.target.value),disabled:!!(P&&P.trim()!==""),placeholder:P?"Auto-filled from onboarding":'Optional - Use "Onboard" button to generate',className:"sdk-test-config-input"}),P&&h.jsx("small",{className:"sdk-test-config-hint success",children:" Auto-filled from onboarding"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:T||"",disabled:!!(E&&E.trim()!==""),onChange:()=>{},placeholder:"automatic (from mnemonic)",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Device ID:",h.jsx("input",{type:"text",value:l,onChange:N=>c(N.target.value),className:"sdk-test-config-input"})]})}),h.jsxs("div",{className:"control-box",children:[h.jsx(SM,{isRunning:f,onClick:He}),h.jsx(kM,{mnemonic:E||"",baseURL:t,onboardLoading:_,isRunning:f,onOnboard:(N,J)=>{N&&N.trim()!==""?A(N,J):Ie.warning("Mnemonic required",{description:"Please enter a mnemonic first to perform onboard."})}}),h.jsx(CM,{isRunning:f,onClick:$})]})]}),P&&h.jsxs("span",{className:"sdk-test-status success",children:[" Auth Token: ",P.substring(0,20),"..."]}),D&&h.jsxs("span",{className:"sdk-test-status error",children:[" Onboard Error: ",D,h.jsx(_M,{onClick:W})]})]}),h.jsx("div",{className:"sdk-test-results",children:Object.entries(u).map(([N,J])=>{const oe=m.has(N);return h.jsxs("div",{className:"sdk-test-section",children:[h.jsx(PM,{sectionName:N,isExpanded:oe,onToggle:()=>q(N)}),oe&&h.jsx("div",{className:"sdk-test-section-content",children:J.results.map((de,we)=>h.jsx(EM,{result:de},we))})]},N)})}),Object.keys(u).length===0&&!f&&h.jsx("div",{className:"sdk-test-empty-state",children:'Click "Run All Tests" to start testing the SDK APIs'})]})}const IM=({isConnected:t,isConnecting:e,onConnect:n,onDisconnect:s})=>h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:n,disabled:t||e,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:t?"#ccc":e?"#ffc107":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:t||e?"not-allowed":"pointer"},children:e?" Connecting...":t?" Connected":"Connect"}),e&&h.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Connection in progress... Check messages below for details"}),h.jsx("button",{onClick:s,disabled:!t,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:t?"#dc3545":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:t?"pointer":"not-allowed"},children:"Disconnect"})]}),MM=({onClick:t})=>h.jsx("button",{onClick:t,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),ln=({channel:t,isSubscribed:e,isConnected:n,disabled:s=!1,subscribeLabel:r,unsubscribeLabel:i,onSubscribe:o,onUnsubscribe:a,variant:l="public"})=>{const c=!n||s,u=e?"#dc3545":l==="private"?"#28a745":"#007bff";return h.jsx("button",{onClick:e?a:o,disabled:c,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:u,color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer"},children:e?i:r})},RM=({steps:t})=>t.length===0?null:h.jsxs("div",{className:"connection-steps-container",children:[h.jsx("h2",{children:"Connection Steps"}),h.jsx("div",{className:"connection-steps-list",children:t.map((e,n)=>h.jsxs("div",{className:`connection-step-item ${e.status==="error"?"error":e.status==="success"?"success":e.status==="in-progress"?"in-progress":"pending"}`,children:[h.jsx("span",{className:"connection-step-icon",children:e.status==="error"?"":e.status==="success"?"":e.status==="in-progress"?"":""}),h.jsxs("div",{className:"connection-step-content",children:[h.jsxs("div",{className:"connection-step-title",children:["Step ",e.step,": ",e.message]}),e.details&&h.jsx("div",{className:"connection-step-details",children:JSON.stringify(e.details,null,2)}),h.jsx("div",{className:"connection-step-timestamp",children:new Date(e.timestamp).toLocaleTimeString()})]})]},n))})]}),OM=({wsURL:t,onWsURLChange:e,marketId:n,onMarketIdChange:s,markets:r,symbol:i,onSymbolChange:o,klineInterval:a,onKlineIntervalChange:l,twapWindowSize:c,onTwapWindowSizeChange:u,authToken:d,onAuthTokenChange:f,walletAddress:g,deviceID:m,onDeviceIDChange:b,isConnected:w,isConnecting:p,onConnect:y,onDisconnect:x})=>h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["WebSocket URL:",h.jsx("input",{type:"text",value:t,onChange:v=>e(v.target.value),className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:v=>s(v.target.value),className:"config-select",children:r.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),r.map(v=>{var P;const k=v.market_id??((P=v.id)==null?void 0:P.toString())??"",C=v.moniker?v.moniker:v.symbol?v.symbol:v.baseAsset&&v.quoteAsset?`${v.baseAsset}-${v.quoteAsset}`:`Market ID: ${k}`,E=v.active?" [ACTIVE]":"",T=k.length>8?`${k.substring(0,8)}...`:k;return h.jsxs("option",{value:k,children:[C," - ID: ",T,E]},k)})]})})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Symbol (for funding_rate, deviation, index_price, mark_price, price_feed, twap):",h.jsx("input",{type:"text",value:i,onChange:v=>o(v.target.value),placeholder:"e.g., BTC/USDT or BTC/USDC",className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Kline Interval:",h.jsxs("select",{value:a,onChange:v=>l(v.target.value),className:"config-select",children:[h.jsx("option",{value:"1m",children:"1 minute"}),h.jsx("option",{value:"5m",children:"5 minutes"}),h.jsx("option",{value:"15m",children:"15 minutes"}),h.jsx("option",{value:"1h",children:"1 hour"}),h.jsx("option",{value:"4h",children:"4 hours"}),h.jsx("option",{value:"1d",children:"1 day"})]})]})}),h.jsx("div",{children:h.jsxs("label",{children:["TWAP Window Size (seconds):",h.jsx("input",{type:"number",value:c,onChange:v=>u(v.target.value),placeholder:"e.g., 300 for 5 minutes",min:"1",className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Auth Token (for private channels):",h.jsx("input",{type:"text",value:d,onChange:v=>f(v.target.value),placeholder:"Required for user_updates (auto-filled from SDK Test Page)",className:"config-input"}),d&&h.jsx("small",{className:"config-hint",children:" Auto-filled from SDK Test Page"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:g||"",disabled:!0,placeholder:"Auto-filled from useOnboard hook",className:`config-input-disabled ${g?"has-value":""}`}),g&&h.jsx("small",{className:"config-hint",children:" Auto-filled from useOnboard hook"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Device ID:",h.jsx("input",{type:"text",value:m,onChange:v=>b(v.target.value),className:"config-input"})]})})]}),h.jsx("div",{className:"config-actions",children:h.jsx(IM,{isConnected:w,isConnecting:p,onConnect:y,onDisconnect:x})})]}),AM=({data:t})=>h.jsxs("div",{className:"funding-rate-details",children:[h.jsx("strong",{className:"funding-rate-title",children:"Funding Rate Details:"}),h.jsxs("div",{className:"funding-rate-grid",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Symbol:"})," ",t.symbol??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Rate:"})," ",t.funding_rate?parseFloat(String(t.funding_rate)).toFixed(6):"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",t.mark_price??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Index Price:"})," ",t.index_price??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Premium Rate:"})," ",t.premium_rate??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"EMA Funding Rate:"})," ",t.ema_funding_rate??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Next Funding Time:"})," ",t.next_funding_time_unix?new Date(t.next_funding_time_unix*1e3).toLocaleString():"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Interval:"})," ",t.funding_interval_seconds?`${t.funding_interval_seconds}s`:"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Valid:"})," ",t.is_valid!==void 0?t.is_valid?"Yes":"No":"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Stale:"})," ",h.jsx("span",{className:`funding-rate-stale ${t.is_stale?"":"valid"}`,children:t.is_stale!==void 0?t.is_stale?"Yes":"No":"N/A"})]}),t.option_type&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Option Type:"})," ",t.option_type]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Strike Price:"})," ",t.strike_price??"N/A"]})]})]})]}),DM=({positions:t})=>!t||t.length===0?null:h.jsxs("div",{className:"positions-container",children:[h.jsxs("strong",{className:"positions-title",children:["Positions (",t.length,"):"]}),h.jsx("div",{className:"positions-grid",children:t.map((e,n)=>{const s=e.size||0,r=s>=0?"LONG":"SHORT";return h.jsxs("div",{className:"position-card",children:[h.jsx("div",{className:"position-symbol",children:e.symbol||`Market ${e.marketId||e.market_id||"N/A"}`}),h.jsxs("div",{className:"position-details",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Side:"})," ",h.jsx("span",{className:r==="LONG"?"position-side-long":"position-side-short",children:r})]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Size:"})," ",Math.abs(s).toFixed(8)]}),e.entryPrice!==void 0||e.entry_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Entry Price:"})," ",(e.entryPrice||e.entry_price||0).toFixed(8)]}):null,e.markPrice!==void 0||e.mark_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",(e.markPrice||e.mark_price||0).toFixed(8)]}):null,e.liquidationPrice!==void 0||e.liquidation_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Liquidation Price:"})," ",(e.liquidationPrice||e.liquidation_price||0).toFixed(8)]}):null,e.unrealizedPnL!==void 0||e.unrealized_pnl!==void 0||e.pnl!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Unrealized PnL:"})," ",h.jsx("span",{className:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0)>=0?"position-pnl-positive":"position-pnl-negative",children:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0).toFixed(8)})]}):null,e.leverage!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Leverage:"})," ",e.leverage,"x"]}):null,e.margin!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Margin:"})," ",e.margin.toFixed(8)]}):null,e.marginMode!==void 0||e.margin_mode!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Margin Mode:"})," ",e.marginMode||e.margin_mode||"N/A"]}):null]})]},n)})})]}),NM=({message:t})=>{const{channel:e,data:n,type:s,step:r,timestamp:i}=t,o=e==="funding_rate"&&typeof n=="object"&&n!==null,a=e==="user_updates"&&typeof n=="object"&&n!==null&&Array.isArray(n.positions)&&n.positions.length>0,l=o||a;return h.jsx("div",{className:`message-item ${s}`,children:h.jsx("div",{className:"message-header",children:h.jsxs("div",{className:"message-content",children:[h.jsxs("div",{className:"message-title",children:[h.jsxs("span",{children:["[",e,"]"]}),r&&h.jsxs("span",{className:"message-step",children:["(",r,")"]}),h.jsx("span",{children:new Date(i).toLocaleTimeString()})]}),o&&h.jsx(AM,{data:n}),a&&h.jsx(DM,{positions:n.positions}),!l&&h.jsx("div",{className:"message-body",children:typeof n=="string"?n:JSON.stringify(n,null,2)}),typeof n!="string"&&h.jsxs("details",{children:[h.jsx("summary",{className:"raw-data-summary",children:"View Raw Data"}),h.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(n,null,2)})]})]})})})},LM=({messages:t,isPrivate:e=!1,emptyMessage:n})=>{const s=e?"No messages yet. Connect with auth token and subscribe to user updates.":"No messages yet. Connect and subscribe to channels to see updates.";return h.jsx("div",{className:`messages-container ${e?"private":"public"}`,children:t.length===0?h.jsx("div",{className:`messages-empty ${e?"private":""}`,children:n||s}):t.map(r=>h.jsx(NM,{message:r},r.id))})},Dv=({title:t,isPrivate:e=!1,messages:n,onClearMessages:s,children:r,emptyMessage:i})=>h.jsxs("div",{className:"channel-section",children:[h.jsxs("div",{className:"channel-header",children:[h.jsx("h2",{className:"channel-title",children:t}),h.jsx(MM,{onClick:s})]}),h.jsxs("div",{className:"channel-content",children:[h.jsx("div",{className:"channel-buttons-container",children:r}),h.jsx(LM,{messages:n,isPrivate:e,emptyMessage:i}),e&&h.jsxs("div",{className:"private-note",children:[h.jsx("strong",{children:"Note:"})," Private channels require authentication. Enter your auth token in the configuration above."]})]})]});function at(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function Hi(t,e){return t.width===e.width&&t.height===e.height}var jM=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){n._observers=n._observers.filter(function(r){return r!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function FM(t){return new jM(t)}var zM=function(){function t(e,n,s){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=at({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(i){return i},this._allowResizeObserver=(r=s==null?void 0:s.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return at({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=at(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;Hi(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var s=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,s=at(this._transformBitmapSize(e,this._canvasElementClientSize)),r=Hi(this.bitmapSize,s)?null:s;n===null&&r===null||n!==null&&r!==null&&Hi(n,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(n,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}$M().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=Nv(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=FM(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var s=Nv(this._canvasElement);if(s!==null){var r=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:s.devicePixelRatio,i=this._canvasElement.getClientRects(),o=i[0]!==void 0?UM(i[0],r):at({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var s=n.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var r=s.devicePixelContentBoxSize[0],i=at({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function BM(t,e){return new zM(t,e.transform,e.options)}function Nv(t){return t.ownerDocument.defaultView}function $M(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function UM(t,e){return at({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var WM=function(){function t(e,n,s){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Zi(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new WM(r,n,s)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const r_={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Lv,jv;function Oa(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function i_(t,e,n,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(n,e+r),t.lineTo(s,e+r),t.stroke()}function Jt(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Dn(t){if(t===void 0)throw new Error("Value is undefined");return t}function ue(t){if(t===null)throw new Error("Value is null");return t}function Yr(t){return ue(Dn(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(Lv||(Lv={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(jv||(jv={}));class Rt{constructor(){this.t=[]}i(e,n,s){const r={h:e,l:n,o:s===!0};this.t.push(r)}_(e){const n=this.t.findIndex(s=>e===s.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,s){const r=[...this.t];this.t=this.t.filter(i=>!i.o),r.forEach(i=>i.h(e,n,s))}v(){return this.t.length>0}m(){this.t=[]}}function Wn(t,...e){for(const n of e)for(const s in n)n[s]!==void 0&&Object.prototype.hasOwnProperty.call(n,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof n[s]!="object"||t[s]===void 0||Array.isArray(n[s])?t[s]=n[s]:Wn(t[s],n[s]));return t}function Aa(t){return typeof t=="number"&&isFinite(t)}function Rc(t){return typeof t=="number"&&t%1==0}function ru(t){return typeof t=="string"}function Wu(t){return typeof t=="boolean"}function ur(t){const e=t;if(!e||typeof e!="object")return e;let n,s,r;for(s in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(r=e[s],n[s]=r&&typeof r=="object"?ur(r):r);return n}function HM(t){return t!==null}function VM(t){return t===null?void 0:t}const o_="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function gh(t,e,n){return e===void 0&&(e=o_),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class YM{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),s=this.W();return e.P===n&&e.T===s||(e.P=n,e.T=s,e.k=gh(n,s),e.A=2.5/12*n,e.V=e.A,e.B=n/12*e.C,e.I=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function j0(t){return t<0?0:t>255?255:Math.round(t)||0}function Fv(t){return .199*t[0]+.687*t[1]+.114*t[2]}class GM{constructor(e,n){this.q=new Map,this.Y=e,n&&(this.q=n)}j(e,n){if(e==="transparent")return e;const s=this.K(e),r=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${n*r})`}X(e){const n=this.K(e);return{Z:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,G:Fv(n)>160?"black":"white"}}J(e){return Fv(this.K(e))}tt(e,n,s){const[r,i,o,a]=this.K(e),[l,c,u,d]=this.K(n),f=[j0(r+s*(l-r)),j0(i+s*(c-i)),j0(o+s*(u-o)),(g=a+s*(d-a),g<=0||g>1?Math.min(Math.max(g,0),1):Math.round(1e4*g)/1e4)];var g;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const n=this.q.get(e);if(n)return n;const s=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(e),r=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(const o of this.Y){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const i=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,i),i}}class KM{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,s){this.it.forEach(r=>{r.nt(e,n,s)})}}class iu{nt(e,n,s){e.useBitmapCoordinateSpace(r=>this.et(r,n,s))}}class qM extends iu{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const r=this.rt.lt,i=this.rt,o=Math.max(1,Math.floor(n))%2/2,a=l=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){const u=i.ot[c],d=Math.round(u._t*n)+o,f=u.ut*s,g=l*s+o;e.moveTo(d,f),e.arc(d,f,g,0,2*Math.PI)}e.fill()};i.ct>0&&(e.fillStyle=i.dt,a(i.ft+i.ct)),e.fillStyle=i.vt,a(i.ft)}}function XM(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const QM={from:0,to:1};class JM{constructor(e,n,s){this.Mt=new KM,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.Pt=s,this.Mt.st(this.bt)}yt(e){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(XM),this.bt=this.St.map(n=>{const s=new qM;return s.ht(n),s}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),n=this.Pt.Bt(),s=this.Ct.It(),r=this.O.Et();this.kt(),n.forEach((i,o)=>{const a=this.St[o],l=i.At(s),c=i.zt();!e&&l!==null&&i.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=i.Ft().Nt(l.gt,c.Wt),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/i.Ft().$t()),a.ot[0].wt=s,a.ot[0]._t=r.qt(s),a.lt=QM):a.lt=null})}}class ZM extends iu{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!i&&!o)return;const a=Math.round(this.Yt._t*s),l=Math.round(this.Yt.ut*r);e.lineCap="butt",i&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*s),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Oa(e,this.Yt.jt.Xt),function(c,u,d,f){c.beginPath();const g=c.lineWidth%2?.5:0;c.moveTo(u+g,d),c.lineTo(u+g,f),c.stroke()}(e,a,0,n.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*r),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Oa(e,this.Yt.Kt.Xt),i_(e,l,0,n.width))}}class eR{constructor(e,n){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new ZM(this.Zt),this.Jt=e,this.Pt=n}yt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),n=this.Pt.Qt().N().crosshair,s=this.Zt;if(n.mode===2)return s.Kt.Vt=!1,void(s.jt.Vt=!1);s.Kt.Vt=e&&this.Jt.ti(this.Pt),s.jt.Vt=e&&this.Jt.ii(),s.Kt.ct=n.horzLine.width,s.Kt.Xt=n.horzLine.style,s.Kt.R=n.horzLine.color,s.jt.ct=n.vertLine.width,s.jt.Xt=n.vertLine.style,s.jt.R=n.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function uf(t,e,n,s,r,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,n,s,r),t.restore()}function zv(t,e,n,s,r,i){t.beginPath(),t.roundRect?t.roundRect(e,n,s,r,i):(t.lineTo(e+s-i[1],n),i[1]!==0&&t.arcTo(e+s,n,e+s,n+i[1],i[1]),t.lineTo(e+s,n+r-i[2]),i[2]!==0&&t.arcTo(e+s,n+r,e+s-i[2],n+r,i[2]),t.lineTo(e+i[3],n+r),i[3]!==0&&t.arcTo(e,n+r,e,n+r-i[3],i[3]),t.lineTo(e,n+i[0]),i[0]!==0&&t.arcTo(e,n,e+i[0],n,i[0]))}function Bv(t,e,n,s,r,i,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===i)return zv(t,e,n,s,r,a),t.fillStyle=i,t.fill(),void t.restore();const c=o/2;var u;zv(t,e+c,n+c,s-o,r-o,(u=-c,a.map(d=>d===0?d:d+u))),i!=="transparent"&&(t.fillStyle=i,t.fill()),l!=="transparent"&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function a_(t,e,n,s,r,i,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,r);a.addColorStop(0,i),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,n,s,r),t.restore()}class $v{constructor(e,n){this.ht(e,n)}ht(e,n){this.Yt=e,this.ei=n}$t(e,n){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,n,s,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const i=this.Yt.R,o=this.ei.Z,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=n.k;const u=this.hi(l,n,s,r),d=u.ai;return u.li?Bv(c,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):Bv(c,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(c.fillStyle=i,c.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(c.fillStyle=n.D,c.fillRect(u.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),u});e.useMediaCoordinateSpace(({context:l})=>{const c=a.xi;l.font=n.k,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=i,l.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.Pi)})}hi(e,n,s,r){const{context:i,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=e,u=this.Yt.pi||!this.Yt.yi?n.C:0,d=this.Yt.ki?n.S:0,f=n.A+this.ei.Ti,g=n.V+this.ei.Ri,m=n.B,b=n.I,w=this.Yt.ri,p=n.P,y=s.Di(i,w),x=Math.ceil(s.Vi(i,w)),v=p+f+g,k=n.S+m+b+x+u,C=Math.max(1,Math.floor(c));let E=Math.round(v*c);E%2!=C%2&&(E+=1);const T=d>0?Math.max(1,Math.floor(d*l)):0,P=Math.round(k*l),_=Math.round(u*l),D=this.ei.Bi??this.ei.Ii,A=Math.round(D*c)-Math.floor(.5*c),W=Math.floor(A+C/2-E/2),H=W+E,O=r==="right",R=O?a.width-d:d,F=O?o.width-T:T;let L,z,I;return O?(L=F-P,z=F-_,I=R-u-m-d):(L=F+P,z=F+_,I=R+u+m),{li:O,ai:{_i:W,mi:A,Si:H,ui:P,ci:E,ft:2*l,di:T,oi:L,fi:F,wi:z,gi:C,bi:o.width},xi:{_i:W/c,Si:H/c,Ci:I,Pi:y}}}}class df{constructor(e){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(e||$v)(this.Ai,this.Ei),this.Oi=new(e||$v)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Li.$t(e,n),this.Oi.$t(e,n))}Fi(){return this.Ei.Bi||0}Wi(e){this.Ei.Bi=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class tR extends df{constructor(e,n,s){super(),this.Jt=e,this.Yi=n,this.ji=s}qi(e,n,s){if(e.Vt=!1,this.Jt.N().mode===2)return;const r=this.Jt.N().horzLine;if(!r.labelVisible)return;const i=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||i===null)return;const o=this.Yi.Xi().X(r.labelBackgroundColor);s.Z=o.Z,e.R=o.G;const a=2/12*this.Yi.P();s.Ti=a,s.Ri=a;const l=this.ji(this.Yi);s.Ii=l.Ii,e.ri=this.Yi.Zi(l.gt,i),e.Vt=!0}}const nR=/[1-9]/g;class l_{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,n){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const s=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.k,Math.round(n.Gi.Vi(f,ue(this.Yt).ri,nR))));if(s<=0)return;const r=n.Ji,i=s+2*r,o=i/2,a=this.Yt.Qi;let l=this.Yt.Ii,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+i>a&&(l-=Math.abs(a-(c+i)),c=Math.floor(l-o)+.5);const u=c+i,d=Math.ceil(0+n.S+n.C+n.A+n.P+n.V);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:g,verticalPixelRatio:m})=>{const b=ue(this.Yt);f.fillStyle=b.Z;const w=Math.round(c*g),p=Math.round(0*m),y=Math.round(u*g),x=Math.round(d*m),v=Math.round(2*g);if(f.beginPath(),f.moveTo(w,p),f.lineTo(w,x-v),f.arcTo(w,x,w+v,x,v),f.lineTo(y-v,x),f.arcTo(y,x,y,x-v,v),f.lineTo(y,p),f.fill(),b.pi){const k=Math.round(b.Ii*g),C=p,E=Math.round((C+n.C)*m);f.fillStyle=b.R;const T=Math.max(1,Math.floor(g)),P=Math.floor(.5*g);f.fillRect(k-P,C,T,E-C)}}),e.useMediaCoordinateSpace(({context:f})=>{const g=ue(this.Yt),m=0+n.S+n.C+n.A+n.P/2;f.font=n.k,f.textAlign="left",f.textBaseline="middle",f.fillStyle=g.R;const b=n.Gi.Di(f,"Apr0");f.translate(c+r,m+b),f.fillText(g.ri,0,0)})}}class sR{constructor(e,n,s){this.xt=!0,this.Gt=new l_,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=e,this.ts=n,this.ji=s}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const s=this.ts.Et();if(s.Ki())return;e.Qi=s.Qi();const r=this.ji();if(r===null)return;e.Ii=r.Ii;const i=s.ss(this.Ct.It());e.ri=s.ns(ue(i)),e.Vt=!0;const o=this.ts.Xi().X(n.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=s.N().ticksVisible}}class c_{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var Uv;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(Uv||(Uv={}));class rR extends c_{constructor(e,n){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=n,this.ys=((r,i)=>o=>{const a=i(),l=r();if(o===ue(this.Pt).ks())return{gt:l,Ii:a};{const c=ue(o.zt());return{gt:o.Ts(a,c),Ii:a}}})(()=>this.ds,()=>this.Ss);const s=((r,i)=>()=>{const o=this.ts.Et().Rs(r()),a=i();return o&&Number.isFinite(a)?{wt:o,Ii:a}:null})(()=>this.fs,()=>this.si());this.Ds=new sR(this,e,s)}N(){return this.Ps}Vs(e,n){this.xs=e,this.Cs=n}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(e,n,s){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,n,s)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(e){let n=this.gs.get(e);n||(n=new eR(this,e),this.gs.set(e,n));let s=this.Ms.get(e);return s||(s=new JM(this.ts,this,e),this.Ms.set(e,s)),[n,s]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,n){this.ps&&this.Pt===e||this.vs.clear();const s=[];return this.Pt===e&&s.push(this.Hs(this.vs,n,this.ys)),s}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var n,s;(n=this.gs.get(e))==null||n.yt(),(s=this.Ms.get(e))==null||s.yt()}),this.vs.forEach(e=>e.yt()),this.Ds.yt()}qs(e){return e&&!e.ks().Ki()?e.ks():null}zs(e,n,s){this.Ys(e,n,s)&&this.Ns()}Ys(e,n,s){const r=this.bs,i=this.Ss,o=this.ds,a=this.fs,l=this.Pt,c=this.qs(s);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=s;const u=c!==null?c.zt():null;return c!==null&&u!==null?(this.ds=n,this.Ss=c.Nt(n,u)):(this.ds=NaN,this.Ss=NaN),r!==this.bs||i!==this.Ss||a!==this.fs||o!==this.ds||l!==this.Pt}Os(){const e=this.ts.js().map(s=>s.Xs().Ks()).filter(HM),n=e.length===0?null:Math.max(...e);this.fs=n!==null?n:NaN}Hs(e,n,s){let r=e.get(n);return r===void 0&&(r=new tR(this,n,s),e.set(n,r)),r}}function hf(t){return t==="left"||t==="right"}class Xt{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,n){const s=function(r,i){return r===void 0?i:{tn:Math.max(r.tn,i.tn),sn:r.sn||i.sn}}(this.Zs.get(e),n);this.Zs.set(e,s)}nn(){return this.Js}en(e){const n=this.Zs.get(e);return n===void 0?{tn:this.Js}:{tn:Math.max(this.Js,n.tn),sn:n.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const n of e.Gs)this.mn(n);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((n,s)=>{this.Qs(s,n)})}static wn(){return new Xt(2)}static gn(){return new Xt(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(n=>n.an===5);e!==-1&&this.Gs.splice(e,1)}}class u_{formatTickmarks(e){return e.map(n=>this.format(n))}}const Wv=".";function dr(t,e){if(!Aa(t))return"n/a";if(!Rc(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class ff extends u_{constructor(e,n){if(super(),n||(n=1),Aa(e)&&Rc(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=n,this.bn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const n=this.Yi/this.Mn;let s=Math.floor(e),r="";const i=this.xn!==void 0?this.xn:NaN;if(n>1){let o=+(Math.round(e*n)-s*n).toFixed(this.xn);o>=n&&(o-=n,s+=1),r=Wv+dr(+o.toFixed(this.xn)*this.Mn,i)}else s=Math.round(s*n)/n,i>0&&(r=Wv+dr(0,i));return s.toFixed(0)+r}}class d_ extends ff{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class iR extends u_{constructor(e){super(),this.Cn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.Pn(e):e<999995?n+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.Pn(e/1e9)+"B")}Pn(e){let n;const s=Math.pow(10,this.Cn);return n=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(r,i)=>i)}}const oR=/[2-9]/g;class mh{constructor(e=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(e,n,s){return this.In(e,n,s).width}Di(e,n,s){const r=this.In(e,n,s);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}In(e,n,s){const r=s||oR,i=String(n).replace(r,"0");if(this.Dn.has(i))return Dn(this.Dn.get(i)).En;if(this.yn===this.Vn){const a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.yn--}e.save(),e.textBaseline="middle";const o=e.measureText(i);return e.restore(),o.width===0&&n.length||(this.Dn.set(i,{En:o,An:this.kn}),this.Rn[this.kn]=i,this.yn++,this.kn++),o}}class aR{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,n,s){this.zn=e,this.M=n,this.Ln=s}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class h_{constructor(e,n,s){this.Fn=e,this.On=new mh(50),this.Wn=n,this.O=s,this.F=-1,this.Gt=new aR(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const n=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(n===null)return null;const s=e.qn(n);if(s==="overlay")return null;const r=this.O.Yn();return r.P!==this.F&&(this.F=r.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),r,s),this.Gt}}class lR extends iu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,n){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:s,ct:r,Kn:i}=this.Yt;return n>=s-r-7&&n<=s+r+7?{Xn:this.Yt,Kn:i}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;const i=Math.round(this.Yt.ut*r);i<0||i>n.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*s),Oa(e,this.Yt.Xt),i_(e,i,0,n.width))}}class bx{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new lR,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class cR extends bx{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),n=e.ie().ie;if(n!==2&&n!==3)return;const s=this.Jn.N();if(!s.baseLineVisible||!this.Jn.Vt())return;const r=this.Jn.zt();r!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(r.Wt,r.Wt),this.Zn.R=s.baseLineColor,this.Zn.ct=s.baseLineWidth,this.Zn.Xt=s.baseLineStyle)}}class uR extends iu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){const r=this.Yt;if(r===null)return;const i=Math.max(1,Math.floor(n)),o=i%2/2,a=Math.round(r.ne.x*n)+o,l=r.ne.y*s;e.fillStyle=r.ee,e.beginPath();const c=Math.max(2,1.5*r.re)*n;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.he,e.beginPath(),e.arc(a,l,r.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=r.ae,e.beginPath(),e.arc(a,l,r.ft*n+i/2,0,2*Math.PI,!1),e.stroke()}}const dR=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class hR{constructor(e){this.Gt=new uR,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),n=this.we-e;if(n>0)return void(n<650&&(this.we+=2600));this.me=e,this.we=e+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),n=e.Pe(),s=this.ge.zt();if(n===null||s===null)return;const r=this.ge.ye(!0);if(r.ke||!n.Te(r.Re))return;const i={x:e.qt(r.Re),y:this.ge.Ft().Nt(r.gt,s.Wt)},o=r.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:i})}Ce(){const e=this.Gt.se();if(e!==null){const n=this.De(this.Ve(),e.ee);e.he=n.he,e.ae=n.ae,e.ft=n.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(e,n,s,r){const i=s+(r-s)*n;return this.ge.Qt().Xi().j(e,i)}De(e,n){const s=e%2600/2600;let r;for(const c of dR)if(s>=c.le&&s<=c.oe){r=c;break}Jt(r!==void 0,"Last price animation internal logic error");const i=(s-r.le)/(r.oe-r.le);return{he:this.Be(n,i,r.ce,r.de),ae:this.Be(n,i,r.fe,r.pe),ft:(o=i,a=r._e,l=r.ue,a+(l-a)*o)};var o,a,l}}class fR extends bx{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const n=this.Jn.N();if(!n.priceLineVisible||!this.Jn.Vt())return;const s=this.Jn.ye(n.priceLineSource===0);s.ke||(e.Vt=!0,e.ut=s.Ii,e.R=this.Jn.Ie(s.R),e.ct=n.priceLineWidth,e.Xt=n.priceLineStyle)}}class pR extends df{constructor(e){super(),this.Jt=e}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.Jt;if(!r.Vt())return;const i=r.N(),o=i.lastValueVisible,a=r.Ee()!=="",l=i.seriesLastValueMode===0,c=r.ye(!1);if(c.ke)return;o&&(e.ri=this.Ae(c,o,l),e.Vt=e.ri.length!==0),(a||l)&&(n.ri=this.ze(c,o,a,l),n.Vt=n.ri.length>0);const u=r.Ie(c.R),d=this.Jt.Qt().Xi().X(u);s.Z=d.Z,s.Ii=c.Ii,n.Ht=r.Qt().Ut(c.Ii/r.Ft().$t()),e.Ht=u,e.R=d.G,n.R=d.G}ze(e,n,s,r){let i="";const o=this.Jt.Ee();return s&&o.length!==0&&(i+=`${o} `),n&&r&&(i+=this.Jt.Ft().Le()?e.Oe:e.Ne),i.trim()}Ae(e,n,s){return n?s?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function Hv(t,e,n,s){const r=Number.isFinite(e),i=Number.isFinite(n);return r&&i?t(e,n):r||i?r?e:n:s}class wn{constructor(e,n){this.Fe=e,this.We=n}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new wn(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new wn(Hv(Math.min,this.$e(),e.$e(),-1/0),Hv(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!Aa(e)||this.We-this.Fe===0)return;const n=.5*(this.We+this.Fe);let s=this.We-n,r=this.Fe-n;s*=e,r*=e,this.We=n+s,this.Fe=n+r}Ke(e){Aa(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new wn(e.minValue,e.maxValue)}}class xh{constructor(e,n){this.Ge=e,this.Je=n||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new xh(wn.Ze(e.priceRange),e.margins)}}class gR extends bx{constructor(e,n){super(e),this.ir=n}te(){const e=this.Zn;e.Vt=!1;const n=this.ir.N();if(!this.Jn.Vt()||!n.lineVisible)return;const s=this.ir.sr();s!==null&&(e.Vt=!0,e.ut=s,e.R=n.color,e.ct=n.lineWidth,e.Xt=n.lineStyle,e.Kn=this.ir.N().id)}}class mR extends df{constructor(e,n){super(),this.ge=e,this.ir=n}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.ir.N(),i=r.axisLabelVisible,o=r.title!=="",a=this.ge;if(!i||!a.Vt())return;const l=this.ir.sr();if(l===null)return;o&&(n.ri=r.title,n.Vt=!0),n.Ht=a.Qt().Ut(l/a.Ft().$t()),e.ri=this.nr(r.price),e.Vt=!0;const c=this.ge.Qt().Xi().X(r.axisLabelColor||r.color);s.Z=c.Z;const u=r.axisLabelTextColor||c.G;e.R=u,n.R=u,s.Ii=l}nr(e){const n=this.ge.zt();return n===null?"":this.ge.Ft().Zi(e,n.Wt)}}class xR{constructor(e,n){this.ge=e,this.Ps=n,this.er=new gR(e,this),this.Fn=new mR(e,this),this.rr=new h_(this.Fn,e,e.Qt())}hr(e){Wn(this.Ps,e),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const e=this.ge,n=e.Ft();if(e.Qt().Et().Ki()||n.Ki())return null;const s=e.zt();return s===null?null:n.Nt(this.Ps.price,s.Wt)}}class bR extends c_{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const yR={Bar:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=ue(t(n,s)),a=Yr(o.Wt[0])<=Yr(o.Wt[3]);return{cr:o.R??(a?r:i)}},Candlestick:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,u=ue(t(n,s)),d=Yr(u.Wt[0])<=Yr(u.Wt[3]);return{cr:u.R??(d?r:i),dr:u.Ht??(d?o:a),pr:u.vr??(d?l:c)}},Custom:(t,e,n,s)=>({cr:ue(t(n,s)).R??e.color}),Area:(t,e,n,s)=>{const r=ue(t(n,s));return{cr:r.vt??e.lineColor,vt:r.vt??e.lineColor,mr:r.mr??e.topColor,wr:r.wr??e.bottomColor}},Baseline:(t,e,n,s)=>{const r=ue(t(n,s));return{cr:r.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:r.gr??e.topLineColor,Mr:r.Mr??e.bottomLineColor,br:r.br??e.topFillColor1,Sr:r.Sr??e.topFillColor2,Cr:r.Cr??e.bottomFillColor1,Pr:r.Pr??e.bottomFillColor2}},Line:(t,e,n,s)=>{const r=ue(t(n,s));return{cr:r.R??e.color,vt:r.R??e.color}},Histogram:(t,e,n,s)=>({cr:ue(t(n,s)).R??e.color})};class vR{constructor(e){this.yr=(n,s)=>s!==void 0?s.Wt:this.ge.Xs().kr(n),this.ge=e,this.Tr=yR[e.Rr()]}Dr(e,n){return this.Tr(this.yr,this.ge.N(),e,n)}}function f_(t,e,n,s,r=0,i=e.length){let o=i-r;for(;0<o;){const a=o>>1,l=r+a;s(e[l],n)===t?(r=l+1,o-=a+1):o=a}return r}const Da=f_.bind(null,!0),p_=f_.bind(null,!1);var Vv;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(Vv||(Vv={}));const Pr=30;class wR{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}kr(e){return this.Fr(e)}Fr(e,n=0){const s=this.Nr(e,n);return s===null?null:{...this.Wr(s),Re:this.Or(s)}}Hr(){return this.Vr}Ur(e,n,s){if(this.Ki())return null;let r=null;for(const i of s)r=Hu(r,this.$r(e,n,i));return r}ht(e){this.Ir.clear(),this.Br.clear(),this.Vr=e,this.Er=e.map(n=>n.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,n){const s=this.Yr(e);if(s===null&&n!==0)switch(n){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return s}jr(e){let n=this.Xr(e);return n>0&&(n-=1),n!==this.Vr.length&&this.Or(n)<e?n:null}Kr(e){const n=this.Zr(e);return n!==this.Vr.length&&e<this.Or(n)?n:null}Yr(e){const n=this.Xr(e);return n===this.Vr.length||e<this.Vr[n].Re?null:n}Xr(e){return Da(this.Vr,e,(n,s)=>n.Re<s)}Zr(e){return p_(this.Vr,e,(n,s)=>n.Re>s)}Gr(e,n,s){let r=null;for(let i=e;i<n;i++){const o=this.Vr[i].Wt[s];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(e,n,s){if(this.Ki())return null;let r=null;const i=ue(this.Lr()),o=ue(this.Ks()),a=Math.max(e,i),l=Math.min(n,o),c=Math.ceil(a/Pr)*Pr,u=Math.max(c,Math.floor(l/Pr)*Pr);{const f=this.Xr(a),g=this.Zr(Math.min(l,c,n));r=Hu(r,this.Gr(f,g,s))}let d=this.Br.get(s);d===void 0&&(d=new Map,this.Br.set(s,d));for(let f=Math.max(c+1,a);f<u;f+=Pr){const g=Math.floor(f/Pr);let m=d.get(g);if(m===void 0){const b=this.Xr(g*Pr),w=this.Zr((g+1)*Pr-1);m=this.Gr(b,w,s),d.set(g,m)}r=Hu(r,m)}{const f=this.Xr(u),g=this.Zr(l);r=Hu(r,this.Gr(f,g,s))}return r}}function Hu(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}const bh={setLineStyle:Oa};class SR{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,bh)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,bh)}}class kR{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new SR(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}class g_{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,n;(n=(e=this.ah).updateAllViews)==null||n.call(e)}Fs(){var s,r,i;const e=((r=(s=this.ah).paneViews)==null?void 0:r.call(s))??[];if(((i=this.hh)==null?void 0:i.nh)===e)return this.hh.eh;const n=e.map(o=>new kR(o));return this.hh={nh:e,eh:n},n}jn(e,n){var s,r;return((r=(s=this.ah).hitTest)==null?void 0:r.call(s,e,n))??null}}let CR=class extends g_{us(){return[]}};class _R{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,bh)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,bh)}}class Yv{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new _R(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}function m_(t){var e,n,s;return{ri:t.text(),Ii:t.coordinate(),Bi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),Z:t.backColor(),Vt:((n=t.visible)==null?void 0:n.call(t))??!0,pi:((s=t.tickVisible)==null?void 0:s.call(t))??!0}}class ER{constructor(e,n){this.Gt=new l_,this._h=e,this.uh=n}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...m_(this._h)}),this.Gt}}class PR extends df{constructor(e,n){super(),this._h=e,this.Yi=n}qi(e,n,s){const r=m_(this._h);s.Z=r.Z,e.R=r.R;const i=2/12*this.Yi.P();s.Ti=i,s.Ri=i,s.Ii=r.Ii,s.Bi=r.Bi,e.ri=r.ri,e.Vt=r.Vt,e.pi=r.pi}}class TR extends g_{constructor(e,n){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=n}cs(){var r,i,o;const e=((i=(r=this.ah).timeAxisViews)==null?void 0:i.call(r))??[];if(((o=this.dh)==null?void 0:o.nh)===e)return this.dh.eh;const n=this.ge.Qt().Et(),s=e.map(a=>new ER(a,n));return this.dh={nh:e,eh:s},s}Ws(){var r,i,o;const e=((i=(r=this.ah).priceAxisViews)==null?void 0:i.call(r))??[];if(((o=this.fh)==null?void 0:o.nh)===e)return this.fh.eh;const n=this.ge.Ft(),s=e.map(a=>new PR(a,n));return this.fh={nh:e,eh:s},s}wh(){var s,r,i;const e=((r=(s=this.ah).priceAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.ph)==null?void 0:i.nh)===e)return this.ph.eh;const n=e.map(o=>new Yv(o));return this.ph={nh:e,eh:n},n}gh(){var s,r,i;const e=((r=(s=this.ah).timeAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.mh)==null?void 0:i.nh)===e)return this.mh.eh;const n=e.map(o=>new Yv(o));return this.mh={nh:e,eh:n},n}Mh(e,n){var s,r;return((r=(s=this.ah).autoscaleInfo)==null?void 0:r.call(s,e,n))??null}}function F0(t,e,n,s){t.forEach(r=>{e(r).forEach(i=>{i.rh()===n&&s.push(i)})})}function z0(t){return t.Fs()}function IR(t){return t.wh()}function MR(t){return t.gh()}const RR=["Area","Line","Baseline"];class pf extends bR{constructor(e,n,s,r,i){super(e),this.Yt=new wR,this.er=new fR(this),this.bh=[],this.Sh=new cR(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=s,this.kh=n;const o=new pR(this);this.vs=[o],this.rr=new h_(o,this,e),RR.includes(this.kh)&&(this.xh=new hR(this)),this.Th(),this.sh=r(this,this.Qt(),i)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(e){return this.Ps.priceLineColor||e}ye(e){const n={ke:!0},s=this.Ft();if(this.Qt().Et().Ki()||s.Ki()||this.Yt.Ki())return n;const r=this.Qt().Et().Pe(),i=this.zt();if(r===null||i===null)return n;let o,a;if(e){const d=this.Yt.Ar();if(d===null)return n;o=d,a=d.Re}else{const d=this.Yt.Fr(r.bi(),-1);if(d===null||(o=this.Yt.kr(d.Re),o===null))return n;a=d.Re}const l=o.Wt[3],c=this.Rh().Dr(a,{Wt:o}),u=s.Nt(l,i.Wt);return{ke:!1,gt:l,ri:s.Zi(l,i.Wt),Oe:s.Dh(l),Ne:s.Vh(l,i.Wt),R:c.cr,Ii:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new vR(this)),this.Ch}N(){return this.Ps}hr(e){const n=e.priceScaleId;n!==void 0&&n!==this.Ps.priceScaleId&&this.Qt().Bh(this,n),Wn(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(e,n){this.Yt.ht(e),this.sh.yt("data"),this.xh!==null&&(n&&n.zh?this.xh.be():e.length===0&&this.xh.Me());const s=this.Qt().Hn(this);this.Qt().Lh(s),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const n=new xR(this,e);return this.bh.push(n),this.Qt().Eh(this),n}Nh(e){const n=this.bh.indexOf(e);n!==-1&&this.bh.splice(n,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const n=e.Uh();return this.Yt.Fr(n,1)}Xs(){return this.Yt}$h(e){const n=this.Yt.kr(e);return n===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:n.Wt[0],Yh:n.Wt[1],jh:n.Wt[2],Kh:n.Wt[3]}:n.Wt[3]}Xh(e){const n=[];F0(this.yh,z0,"top",n);const s=this.xh;return s!==null&&s.Vt()&&(this.Ph===null&&s.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),s.Se(),n.unshift(s)),n}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const n=this.bh.map(s=>s.lr());return e.push(...n),F0(this.yh,z0,"normal",e),e}Jh(){return this.Qh(z0,"bottom")}ta(e){return this.Qh(IR,e)}ia(e){return this.Qh(MR,e)}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,n){if(n!==this.es&&!this.Gh())return[];const s=[...this.vs];for(const r of this.bh)s.push(r.ur());return this.yh.forEach(r=>{s.push(...r.Ws())}),s}cs(){const e=[];return this.yh.forEach(n=>{e.push(...n.cs())}),e}Mh(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider(()=>{const r=this.na(e,n);return r===null?null:r.Xe()});return xh.Ze(s)}return this.na(e,n)}nh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}ea(){return this.ra}Ns(){var e;this.sh.yt();for(const n of this.vs)n.yt();for(const n of this.bh)n.yt();this.er.yt(),this.Sh.yt(),(e=this.xh)==null||e.yt(),this.yh.forEach(n=>n.Ns())}Ft(){return ue(super.Ft())}At(e){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.Yt.kr(e);return n===null?null:{gt:n.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(e){this.yh.push(new TR(e,this))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e)}ca(){if(this.kh==="Custom")return e=>this.sh.da(e)}fa(){if(this.kh==="Custom")return e=>this.sh.pa(e)}va(){return this.Yt.qr()}Gh(){return!hf(this.Ft().ma())}na(e,n){if(!Rc(e)||!Rc(n)||this.Yt.Ki())return null;const s=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(e,n,s);let i=r!==null?new wn(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){const a=this.Ps.base,l=new wn(a,a);i=i!==null?i.vn(l):l}return this.yh.forEach(a=>{const l=a.Mh(e,n);if(l!=null&&l.priceRange){const c=new wn(l.priceRange.minValue,l.priceRange.maxValue);i=i!==null?i.vn(c):c}l!=null&&l.margins&&(o=l.margins)}),new xh(i,o)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(e){switch(this.kh){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ra={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.ra=new iR(this.Ps.priceFormat.precision);break;case"percent":this.ra=new d_(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new ff(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.wa()}Qh(e,n){const s=[];return F0(this.yh,e,n,s),s}}const OR=[3],AR=[0,1,2,3];class DR{constructor(e){this.Ps=e}ga(e,n,s){let r=e;if(this.Ps.mode===0)return r;const i=s.ks(),o=i.zt();if(o===null)return r;const a=i.Nt(e,o),l=s.Ma().filter(u=>u instanceof pf).reduce((u,d)=>{if(s.Un(d)||!d.Vt())return u;const f=d.Ft(),g=d.Xs();if(f.Ki()||!g.Te(n))return u;const m=g.kr(n);if(m===null)return u;const b=Yr(d.zt()),w=this.Ps.mode===3?AR:OR;return u.concat(w.map(p=>f.Nt(m.Wt[p],b.Wt)))},[]);if(l.length===0)return r;l.sort((u,d)=>Math.abs(u-a)-Math.abs(d-a));const c=l[0];return r=i.Ts(c,o),r}}function tc(t,e,n){return Math.min(Math.max(t,e),n)}function Vu(t,e,n){return e-t<=n}class NR extends iu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=Math.max(1,Math.floor(s));e.lineWidth=i,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=ue(this.Yt);if(o.ba){e.strokeStyle=o.Sa,Oa(e,o.xa),e.beginPath();for(const a of o.Ca){const l=Math.round(a.Pa*s);e.moveTo(l,-i),e.lineTo(l,n.height+i)}e.stroke()}if(o.ya){e.strokeStyle=o.ka,Oa(e,o.Ta),e.beginPath();for(const a of o.Ra){const l=Math.round(a.Pa*r);e.moveTo(-i,l),e.lineTo(n.width+i,l)}e.stroke()}})}}class LR{constructor(e){this.Gt=new NR,this.xt=!0,this.Pt=e}yt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,n={ya:e.horzLines.visible,ba:e.vertLines.visible,ka:e.horzLines.color,Sa:e.vertLines.color,Ta:e.horzLines.style,xa:e.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map(s=>({Pa:s.coord}))};this.Gt.ht(n),this.xt=!1}return this.Gt}}class jR{constructor(e){this.sh=new LR(e)}lr(){return this.sh}}const B0={Va:4,Ba:1e-4};function jo(t,e){const n=100*(t-e)/e;return e<0?-n:n}function FR(t,e){const n=jo(t.$e(),e),s=jo(t.qe(),e);return new wn(n,s)}function nc(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function zR(t,e){const n=nc(t.$e(),e),s=nc(t.qe(),e);return new wn(n,s)}function yh(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.log10(n+e.Ba)+e.Va;return t<0?-s:s}function sc(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.pow(10,n-e.Va)-e.Ba;return t<0?-s:s}function bl(t,e){if(t===null)return null;const n=yh(t.$e(),e),s=yh(t.qe(),e);return new wn(n,s)}function Fo(t,e){if(t===null)return null;const n=sc(t.$e(),e),s=sc(t.qe(),e);return new wn(n,s)}function $0(t){if(t===null)return B0;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return B0;const n=Math.ceil(Math.abs(Math.log10(e))),s=B0.Va+n;return{Va:s,Ba:1/Math.pow(10,s)}}class U0{constructor(e,n){if(this.Ia=e,this.Ea=n,function(s){if(s<0)return!1;if(s>1e18)return!0;for(let r=s;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let s=this.Ia;s!==1;){if(s%2==0)this.Aa.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),s/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(e,n,s){const r=this.Ia===0?0:1/this.Ia;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,a=this.Ea[0];for(;;){const d=Vu(i,r,1e-14)&&i>r+1e-14,f=Vu(i,s*a,1e-14),g=Vu(i,1,1e-14);if(!(d&&f&&g))break;i/=a,a=this.Ea[++o%this.Ea.length]}if(i<=r+1e-14&&(i=r),i=Math.max(1,i),this.Aa.length>0&&(l=i,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.Aa[0];Vu(i,s*a,1e-14)&&i>r+1e-14;)i/=a,a=this.Aa[++o%this.Aa.length];var l,c,u;return i}}class Gv{constructor(e,n,s,r){this.La=[],this.Yi=e,this.Ia=n,this.Oa=s,this.Na=r}za(e,n){if(e<n)throw new Error("high < low");const s=this.Yi.$t(),r=(e-n)*this.Fa()/s,i=new U0(this.Ia,[2,2.5,2]),o=new U0(this.Ia,[2,2,2.5]),a=new U0(this.Ia,[2.5,2,2]),l=[];return l.push(i.za(e,n,r),o.za(e,n,r),a.za(e,n,r)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let d=1;d<c.length;++d)c[d]<u&&(u=c[d]);return u}(l)}Wa(){const e=this.Yi,n=e.zt();if(n===null)return void(this.La=[]);const s=e.$t(),r=this.Oa(s-1,n),i=this.Oa(0,n),o=this.Yi.N().entireTextOnly?this.Ha()/2:0,a=o,l=s-1-o,c=Math.max(r,i),u=Math.min(r,i);if(c===u)return void(this.La=[]);const d=this.za(c,u);if(this.Ua(n,d,c,u,a,l),e.$a()&&this.qa(d,u,c)){const m=this.Yi.Ya();this.ja(n,d,a,l,m,2*m)}const f=this.La.map(m=>m.Ka),g=this.Yi.Xa(f);for(let m=0;m<this.La.length;m++)this.La[m].Za=g[m]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(e,n,s,r,i,o){const a=this.La,l=this.Yi;let c=s%n;c+=c<0?n:0;const u=s>=r?1:-1;let d=null,f=0;for(let g=s-c;g>r;g-=n){const m=this.Na(g,e,!0);d!==null&&Math.abs(m-d)<this.Fa()||m<i||m>o||(f<a.length?(a[f].Pa=m,a[f].Za=l.Ga(g),a[f].Ka=g):a.push({Pa:m,Za:l.Ga(g),Ka:g}),f++,d=m,l.Ja()&&(n=this.za(g*u,r)))}a.length=f}ja(e,n,s,r,i,o){const a=this.La,l=this.Qa(e,s,i,o),c=this.Qa(e,r,-o,-i),u=this.Na(0,e,!0)-this.Na(n,e,!0);a.length>0&&a[0].Pa-l.Pa<u/2&&a.shift(),a.length>0&&c.Pa-a[a.length-1].Pa<u/2&&a.pop(),a.unshift(l),a.push(c)}Qa(e,n,s,r){const i=(s+r)/2,o=this.Oa(n+s,e),a=this.Oa(n+r,e),l=Math.min(o,a),c=Math.max(o,a),u=Math.max(.1,this.za(c,l)),d=this.Oa(n+i,e),f=d-d%u,g=this.Na(f,e,!0);return{Za:this.Yi.Ga(f),Pa:g,Ka:f}}qa(e,n,s){let r=Yr(this.Yi.Qe());return this.Yi.Ja()&&(r=Fo(r,this.Yi.tl())),r.$e()-n<e&&s-r.qe()<e}}function x_(t){return t.slice().sort((e,n)=>ue(e.hs())-ue(n.hs()))}var Kv;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(Kv||(Kv={}));const qv=new d_,Xv=new ff(100,1);class BR{constructor(e,n,s,r,i){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new Rt,this.ul=new Rt,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=Xv,this.wl=$0(null),this.gl=e,this.Ps=n,this.Ml=s,this.bl=r,this.Sl=i,this.xl=new Gv(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(e){if(Wn(this.Ps,e),this.wa(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const n=Dn(e.scaleMargins.top),s=Dn(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(n+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+s}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const n=this.ie();let s=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),n.ie===1&&e.ie!==n.ie&&(function(i,o){if(i===null)return!1;const a=sc(i.$e(),o),l=sc(i.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.wl)?(s=Fo(this.Ge,this.wl),s!==null&&this.Bl(s)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==n.ie&&(s=bl(this.Ge,this.wl),s!==null&&this.Bl(s));const r=n.ie!==this.Ps.mode;r&&(n.ie===2||this.Le())&&this.wa(),r&&(n.ie===3||this.Dl())&&this.wa(),e.Vl!==void 0&&n.Vl!==e.Vl&&(this.Ps.invertScale=e.Vl,this.Il()),this.ul.p(n,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(e){this.il!==e&&(this.il=e,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const e=this.$t()-this.Ll()-this.Ol();return this.sl=e,e}Qe(){return this.Nl(),this.Ge}Bl(e,n){const s=this.Ge;(n||s===null&&e!==null||s!==null&&!s.He(e))&&(this.pl=null,this.Ge=e)}Fl(e){this.Bl(e),this.Wl(e!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(e){return this.Vl()?e:this.$t()-1-e}Nt(e,n){return this.Le()?e=jo(e,n):this.Dl()&&(e=nc(e,n)),this.Pl(e,n)}Ul(e,n,s){this.Nl();const r=this.Ol(),i=ue(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,g=this.$l();for(let m=d;m<f;m++){const b=e[m],w=b.gt;if(isNaN(w))continue;let p=w;g!==null&&(p=g(b.gt,n));const y=r+u*(p-o),x=c?y:this.il-1-y;b.ut=x}}ql(e,n,s){this.Nl();const r=this.Ol(),i=ue(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,g=this.$l();for(let m=d;m<f;m++){const b=e[m];let w=b.qh,p=b.Yh,y=b.jh,x=b.Kh;g!==null&&(w=g(b.qh,n),p=g(b.Yh,n),y=g(b.jh,n),x=g(b.Kh,n));let v=r+u*(w-o),k=c?v:this.il-1-v;b.Yl=k,v=r+u*(p-o),k=c?v:this.il-1-v,b.jl=k,v=r+u*(y-o),k=c?v:this.il-1-v,b.Kl=k,v=r+u*(x-o),k=c?v:this.il-1-v,b.Xl=k}}Ts(e,n){const s=this.Cl(e,n);return this.Zl(s,n)}Zl(e,n){let s=e;return this.Le()?s=function(r,i){return i<0&&(r=-r),r/100*i+i}(s,n):this.Dl()&&(s=function(r,i){return r-=100,i<0&&(r=-r),r/100*i+i}(s,n)),s}Ma(){return this.cl}Dt(){return this.fl||(this.fl=x_(this.cl)),this.fl}Gl(e){this.cl.indexOf(e)===-1&&(this.cl.push(e),this.wa(),this.Jl())}Ql(e){const n=this.cl.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.cl.splice(n,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let e=null;for(const n of this.cl){const s=n.zt();s!==null&&(e===null||s.Hh<e.Hh)&&(e=s)}return e===null?null:e.Wt}Vl(){return this.Ps.invertScale}Da(){const e=this.zt()===null;if(this.pl!==null&&(e||this.pl.io===e))return this.pl.Da;this.xl.Wa();const n=this.xl.Da();return this.pl={Da:n,io:e},this._l.p(),n}so(){return this._l}no(e){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-e,this.nl=ue(this.Qe()).Ue()))}eo(e){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(e=this.il-e)<0&&(e=0);let n=(this.vl+.2*(this.il-1))/(e+.2*(this.il-1));const s=ue(this.nl).Ue();n=Math.max(n,.1),s.je(n),this.Bl(s)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(e){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=e,this.nl=ue(this.Qe()).Ue()))}ao(e){if(this.Tl()||this.ml===null)return;const n=ue(this.Qe()).Ye()/(this.zl()-1);let s=e-this.ml;this.Vl()&&(s*=-1);const r=s*n,i=ue(this.nl).Ue();i.Ke(r),this.Bl(i,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(e,n){switch(this.Ps.mode){case 2:return this.oo(jo(e,n));case 3:return this.ea().format(nc(e,n));default:return this.nr(e)}}Ga(e){switch(this.Ps.mode){case 2:return this.oo(e);case 3:return this.ea().format(e);default:return this.nr(e)}}Xa(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ea().formatTickmarks(e);default:return this.uo(e)}}Dh(e){return this.nr(e,ue(this.dl).ea())}Vh(e,n){return e=jo(e,n),this.oo(e,qv)}co(){return this.cl}do(e){this.el={hl:e,rl:!1}}Ns(){this.cl.forEach(e=>e.Ns())}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let e=1/0;this.dl=null;for(const s of this.cl)s.hs()<e&&(e=s.hs(),this.dl=s);let n=100;this.dl!==null&&(n=Math.round(this.dl.nh())),this.ra=Xv,this.Le()?(this.ra=qv,n=100):this.Dl()?(this.ra=new ff(100,1),n=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new Gv(this,n,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(e){this.al=e}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(e,n){if(this.Nl(),this.Ki())return 0;e=this.Ja()&&e?yh(e,this.wl):e;const s=ue(this.Qe()),r=this.Ol()+(this.zl()-1)*(e-s.$e())/s.Ye();return this.Hl(r)}Cl(e,n){if(this.Nl(),this.Ki())return 0;const s=this.Hl(e),r=ue(this.Qe()),i=r.$e()+r.Ye()*((s-this.Ol())/(this.zl()-1));return this.Ja()?sc(i,this.wl):i}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const e=this.el.hl;if(e===null)return;let n=null;const s=this.co();let r=0,i=0;for(const l of s){if(!l.Vt())continue;const c=l.zt();if(c===null)continue;const u=l.Mh(e.Uh(),e.bi());let d=u&&u.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=bl(d,this.wl);break;case 2:d=FR(d,c.Wt);break;case 3:d=zR(d,c.Wt)}if(n=n===null?d:n.vn(ue(d)),u!==null){const f=u.tr();f!==null&&(r=Math.max(r,f.above),i=Math.max(i,f.below))}}}if(this.$a()&&(r=Math.max(r,this.Ya()),i=Math.max(i,this.Ya())),r===this.ll&&i===this.ol||(this.ll=r,this.ol=i,this.pl=null,this.kl()),n!==null){if(n.$e()===n.qe()){const l=5*this.fo();this.Ja()&&(n=Fo(n,this.wl)),n=new wn(n.$e()-l,n.qe()+l),this.Ja()&&(n=bl(n,this.wl))}if(this.Ja()){const l=Fo(n,this.wl),c=$0(l);if(o=c,a=this.wl,o.Va!==a.Va||o.Ba!==a.Ba){const u=this.nl!==null?Fo(this.nl,this.wl):null;this.wl=c,n=bl(l,c),u!==null&&(this.nl=bl(u,c))}}this.Bl(n)}else this.Ge===null&&(this.Bl(new wn(-.5,.5)),this.wl=$0(null));var o,a}$l(){return this.Le()?jo:this.Dl()?nc:this.Ja()?e=>yh(e,this.wl):null}vo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.format(e)):n(e)}mo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.formatTickmarks(e)):n(e)}nr(e,n){return this.vo(e,this.bl.priceFormatter,n)}uo(e,n){const s=this.bl.priceFormatter;return this.mo(e,this.bl.tickmarksPriceFormatter??(s?r=>r.map(s):void 0),n)}oo(e,n){return this.vo(e,this.bl.percentageFormatter,n)}_o(e,n){const s=this.bl.percentageFormatter;return this.mo(e,this.bl.tickmarksPercentageFormatter??(s?r=>r.map(s):void 0),n)}}function Qv(t){return t instanceof pf}class Jv{constructor(e,n){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new Rt,this.yh=[],this.uh=e,this.ts=n,this.Co=new jR(this);const s=n.N();this.Po=this.yo("left",s.leftPriceScale),this.ko=this.yo("right",s.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(s)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.ko.hr(e.rightPriceScale),e.localization&&(this.Po.wa(),this.ko.wa()),e.overlayPriceScales){const n=Array.from(this.wo.values());for(const s of n){const r=ue(s[0].Ft());r.hr(e.overlayPriceScales),e.localization&&r.wa()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.ko}return this.wo.has(e)?Dn(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach(e=>{e.m&&e.m()}),this.yh=this.yh.filter(e=>{const n=e.oh();return n.detached&&n.detached(),!1}),this.xo.p()}Bo(){return this.bo}Io(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(e){this.Mo=e,this.Ao()}Al(e){this.il=e,this.Po.Al(e),this.ko.Al(e),this.cl.forEach(n=>{if(this.Un(n)){const s=n.Ft();s!==null&&s.Al(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.cl.filter(Qv)}Ma(){return this.cl}Un(e){const n=e.Ft();return n===null||this.Po!==n&&this.ko!==n}Gl(e,n,s){this.No(e,n,s?e.hs():this.cl.length)}Ql(e,n){const s=this.cl.indexOf(e);Jt(s!==-1,"removeDataSource: invalid data source"),this.cl.splice(s,1),n||this.cl.forEach((o,a)=>o.ls(a));const r=ue(e.Ft()).ma();if(this.wo.has(r)){const o=Dn(this.wo.get(r)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.wo.delete(r))}const i=e.Ft();i&&i.Ma().indexOf(e)>=0&&(i.Ql(e),this.Fo(i)),this.fl=null}qn(e){return e===this.Po?"left":e===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(e,n){e.no(n)}$o(e,n){e.eo(n),this.Ao()}qo(e){e.ro()}Yo(e,n){e.ho(n)}jo(e,n){e.ao(n),this.Ao()}Ko(e){e.lo()}Ao(){this.cl.forEach(e=>{e.Ns()})}ks(){let e=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?e=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?e=this.Po:this.cl.length!==0&&(e=this.cl[0].Ft()),e===null&&(e=this.ko),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.ko:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Tl()&&this.Xo(e)}Zo(e){const n=this.uh.Pe();e.yl({sn:!0}),n!==null&&e.do(n),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=x_(this.cl)),this.fl}Qo(e,n){n=tc(n,0,this.cl.length-1);const s=this.cl.indexOf(e);Jt(s!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(s,1),this.cl.splice(n,0,e),this.cl.forEach((r,i)=>r.ls(i)),this.fl=null;for(const r of[this.Po,this.ko])r.Jl(),r.wa();this.ts.ar()}Bt(){return this.Dt().filter(Qv)}t_(){return this.xo}i_(){return this.Co}_a(e){this.yh.push(new CR(e))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.yh}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}Xo(e){const n=e.co();if(n&&n.length>0&&!this.uh.Ki()){const s=this.uh.Pe();s!==null&&e.do(s)}e.Ns()}No(e,n,s){let r=this.Do(n);if(r===null&&(r=this.yo(n,this.ts.N().overlayPriceScales)),this.cl.splice(s,0,e),!hf(n)){const i=this.wo.get(n)||[];i.push(e),this.wo.set(n,i)}e.ls(s),r.Gl(e),e._s(r),this.Fo(r),this.fl=null}To(e,n,s){n.ie!==s.ie&&this.Xo(e)}yo(e,n){const s={visible:!0,autoScale:!0,...ur(n)},r=new BR(e,s,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return r.Al(this.$t()),r}}function Yu(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function $R(t,e,n,s){for(const r of t){const i=r.Tt(s);if(i!==null&&i.jn){const o=i.jn(e,n);if(o!==null)return{a_:r,e_:o}}}return null}function UR(t){return t.Fs!==void 0}function b_(t,e,n){const s=[t,...t.Dt()],r=function(i,o,a){var f;let l,c;for(const g of i){const m=((f=g.sa)==null?void 0:f.call(g,o,a))??[];for(const b of m)u=b.zOrder,d=l==null?void 0:l.zOrder,(!d||u==="top"&&d!=="top"||u==="normal"&&d==="bottom")&&(l=b,c=g)}var u,d;return l&&c?{r_:l,n_:c}:null}(s,e,n);if((r==null?void 0:r.r_.zOrder)==="top")return Yu(r);for(const i of s){if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&!r.r_.isBackground)return Yu(r);if(UR(i)){const o=$R(i.Fs(t),e,n,t);if(o!==null)return{n_:i,a_:o.a_,e_:o.e_}}if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&r.r_.isBackground)return Yu(r)}return r!=null&&r.r_?Yu(r):null}class WR{constructor(e,n,s=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=n,this.Vn=s}__(e){const n=e.time,s=this.o_.cacheKey(n),r=this.Dn.get(s);if(r!==void 0)return r.u_;if(this.yn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Dn(o)),this.Tn++,this.yn--}const i=this.l_(e);return this.Dn.set(s,{u_:i,An:this.kn}),this.Rn.set(this.kn,s),this.yn++,this.kn++,i}}class rc{constructor(e,n){Jt(e<=n,"right should be >= left"),this.c_=e,this.d_=n}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function Zv(t,e){return t===null||e===null?t===e:t.He(e)}class HR{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,n){this.g_(n),this.Dn=null;for(let s=n;s<e.length;++s){const r=e[s];let i=this.p_.get(r.timeWeight);i===void 0&&(i=[],this.p_.set(r.timeWeight,i)),i.push({index:s,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}M_(e,n,s,r,i){const o=Math.ceil(n/e);return this.Dn!==null&&this.Dn.b_===o&&i===this.Dn.S_&&s===this.Dn.x_||(this.Dn={S_:i,x_:s,Da:this.C_(o,s,r),b_:o}),this.Dn.Da}g_(e){if(e===0)return void this.p_.clear();const n=[];this.p_.forEach((s,r)=>{e<=s[0].index?n.push(r):s.splice(Da(s,e,i=>i.index<e),1/0)});for(const s of n)this.p_.delete(s)}C_(e,n,s){let r=[];const i=o=>!n||s.has(o.index);for(const o of Array.from(this.p_.keys()).sort((a,l)=>l-a)){if(!this.p_.get(o))continue;const a=r;r=[];const l=a.length;let c=0;const u=Dn(this.p_.get(o)),d=u.length;let f=1/0,g=-1/0;for(let m=0;m<d;m++){const b=u[m],w=b.index;for(;c<l;){const p=a[c],y=p.index;if(!(y<w&&i(p))){f=y;break}c++,r.push(p),g=y,f=1/0}if(f-w>=e&&w-g>=e&&i(b))r.push(b),g=w;else if(this.v_)return a}for(;c<l;c++)i(a[c])&&r.push(a[c])}return r}}class qo{constructor(e){this.P_=e}y_(){return this.P_===null?null:new rc(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new qo(null)}}function VR(t,e){return t.weight>e.weight?t:e}class YR{constructor(e,n,s,r){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new HR,this.B_=new Map,this.I_=qo.T_(),this.E_=!0,this.A_=new Rt,this.z_=new Rt,this.L_=new Rt,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=n,this.bl=s,this.U_=n.rightOffset,this.q_=n.barSpacing,this.ts=e,this.Y_(n),this.o_=r,this.j_(),this.V_.m_(n.uniformDistribution),this.K_()}N(){return this.Ps}X_(e){Wn(this.bl,e),this.Z_(),this.j_()}hr(e,n){Wn(this.Ps,e),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),this.Y_(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(e){var n;return((n=this.D_[e])==null?void 0:n.time)??null}ss(e){return this.D_[e]??null}Q_(e,n){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return n?this.D_.length-1:null;const s=Da(this.D_,this.o_.key(e),(r,i)=>this.o_.key(r.time)<i);return this.o_.key(e)<this.o_.key(this.D_[s].time)?n?s:null:s}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const e=this.Pe();if(e===null)return null;const n={from:e.Uh(),to:e.bi()};return this.eu(n)}eu(e){const n=Math.round(e.from),s=Math.round(e.to),r=ue(this.ru()),i=ue(this.hu());return{from:ue(this.ss(Math.max(r,n))),to:ue(this.ss(Math.min(i,s)))}}au(e){return{from:ue(this.Q_(e.from,!0)),to:ue(this.Q_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const n=this.su(),s=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const r=this.q_*e/s;this.q_=r}if(this.Ps.fixLeftEdge&&n!==null&&n.Uh()<=0){const r=s-e;this.U_-=Math.round(r/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(e){if(this.Ki()||!Rc(e))return 0;const n=this._u()+this.U_-e;return this.Mo-(n+.5)*this.q_-1}uu(e,n){const s=this._u(),r=n===void 0?0:n.from,i=n===void 0?e.length:n.to;for(let o=r;o<i;o++){const a=e[o].wt,l=s+this.U_-a,c=this.Mo-(l+.5)*this.q_-1;e[o]._t=c}}cu(e,n){const s=Math.ceil(this.du(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.fu(s)?this.pu(s):s}fn(e){this.E_=!0,this.U_=e,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(e){const n=this.q_;if(this.wu(e),this.Ps.rightOffsetPixels!==void 0&&n!==0){const s=this.U_*n/this.q_;this.U_=s}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,n=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(n/e),r=ue(this.Pe()),i=Math.max(r.Uh(),r.Uh()-s),o=Math.max(r.bi(),r.bi()-s),a=this.V_.M_(e,n,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),l=this.ru()+s,c=this.hu()-s,u=this.Mu(),d=this.Ps.fixLeftEdge||u,f=this.Ps.fixRightEdge||u;let g=0;for(const m of a){if(!(i<=m.index&&m.index<=o))continue;let b;g<this.H_.length?(b=this.H_[g],b.coord=this.qt(m.index),b.label=this.bu(m),b.weight=m.weight):(b={needAlignCoordinate:!1,coord:this.qt(m.index),label:this.bu(m),weight:m.weight},this.H_.push(b)),this.q_>n/2&&!u?b.needAlignCoordinate=!1:b.needAlignCoordinate=d&&m.index<=l||f&&m.index>=c,g++}return this.H_.length=g,this.N_=this.H_,this.H_}Su(){let e;this.E_=!0,this.dn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(e)}xu(e){this.E_=!0,this.R_=e,this.ou(),this.G_()}Cu(e,n){const s=this.du(e),r=this.mu(),i=r+n*(r/10);this.dn(i),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(s-this.du(e)))}no(e){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=e,this.Pu()))}eo(e){if(this.O_===null)return;const n=tc(this.Mo-e,0,this.Mo),s=tc(this.Mo-ue(this.vl),0,this.Mo);n!==0&&s!==0&&this.dn(this.O_.mu*n/s)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(e){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Pu()))}ao(e){if(this.ml===null)return;const n=(this.ml-e)/this.mu();this.U_=ue(this.O_).gu+n,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.U_,r=performance.now();this.ts._n({Ru:i=>(i-r)/n>=1,Du:i=>{const o=(i-r)/n;return o>=1?e:s+(e-s)*o}})}yt(e,n){this.E_=!0,this.D_=e,this.V_.w_(e,n),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(e,n){const s=e.f_(),r=n&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-r)/s),this.U_=e.bi()-this._u(),n&&(this.U_=r?r/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const e=this.ru(),n=this.hu();e!==null&&n!==null&&this.Eu(new rc(e,n),!0)}zu(e){const n=new rc(e.from,e.to);this.Eu(n)}ns(e){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const n of e)for(const s of n.va())this.F_.set(s,!0);this.W_++}Mu(){const e=this.ts.N().handleScroll,n=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(e){return(this.Mo-1-e)/this.q_}du(e){const n=this.Lu(e),s=this._u()+this.U_-n;return Math.round(1e6*s)/1e6}wu(e){const n=this.q_;this.q_=e,this.lu(),n!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(qo.T_());const e=this._u(),n=this.Mo/this.q_,s=this.U_+e,r=new rc(s-n+1,s);this.Nu(new qo(r))}lu(){const e=tc(this.q_,this.Fu(),this.Wu());this.q_!==e&&(this.q_=e,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const e=this.Hu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const n=this.Uu();this.U_>n&&(this.U_=n,this.E_=!0)}Hu(){const e=this.ru(),n=this.R_;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(e){let n=this.B_.get(e.weight);return n===void 0&&(n=new WR(s=>this.$u(s),this.o_),this.B_.set(e.weight,n)),n.__(e)}$u(e){return this.o_.formatTickmark(e,this.bl)}Nu(e){const n=this.I_;this.I_=e,Zv(n.y_(),this.I_.y_())||this.A_.p(),Zv(n.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const e=this.ru();if(e===null)return;const n=this.Pe();if(n===null)return;const s=n.Uh()-e;if(s<0){const r=this.U_-s-1;this.fn(r)}this.lu()}J_(){this.ou(),this.lu()}fu(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}pu(e){const n=function*(r){const i=Math.round(r),o=i<r;let a=1;for(;;)o?(yield i+a,yield i-a):(yield i-a,yield i+a),a++}(e),s=this.hu();for(;s;){const r=n.next().value;if(this.F_.get(r))return r;if(r<0||r>s)break}return e}Y_(e){if(e.rightOffsetPixels!==void 0){const n=e.rightOffsetPixels/(e.barSpacing||this.q_);this.ts.fn(n)}}}var ew,tw,nw,sw,rw;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(ew||(ew={}));class GR{constructor(e,n,s){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new Rt,this.Xu=new Rt,this.Zu=null,this.Gu=e,this.Ps=n,this.o_=s,this.Sl=new GM(this.Ps.layout.colorParsers),this.Ju=new YM(this),this.uh=new YR(this,n.timeScale,this.Ps.localization,s),this.Ct=new rR(this,n.crosshair),this.Qu=new DR(n.crosshair),n.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(Xt.gn())}ar(){this.rc(Xt.wn())}Zh(){this.rc(new Xt(1))}Eh(e){const n=this.hc(e);this.rc(n)}ac(){return this.ju}lc(e){var s,r,i,o;if(((s=this.ju)==null?void 0:s.n_)===(e==null?void 0:e.n_)&&((i=(r=this.ju)==null?void 0:r.e_)==null?void 0:i.Kn)===((o=e==null?void 0:e.e_)==null?void 0:o.Kn))return;const n=this.ju;this.ju=e,n!==null&&this.Eh(n.n_),e!==null&&e.n_!==(n==null?void 0:n.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Wn(this.Ps,e),this.qu.forEach(n=>n.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.X_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(e,n,s=0){const r=this.qu[s];if(r===void 0)return;if(e==="left")return Wn(this.Ps,{leftPriceScale:n}),r.Ro({leftPriceScale:n}),this.Ku.p(),void this.Ih();if(e==="right")return Wn(this.Ps,{rightPriceScale:n}),r.Ro({rightPriceScale:n}),this.Ku.p(),void this.Ih();const i=this._c(e,s);i!==null&&(i.Ft.hr(n),this.Ku.p())}_c(e,n){const s=this.qu[n];if(s===void 0)return null;const r=s.Do(e);return r!==null?{Us:s,Ft:r}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(e,n){e.Al(n),this.vu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.qu.forEach(n=>n.Eo(e)),this.vu()}fc(e){this.qu.length!==1&&(Jt(e>=0&&e<this.qu.length,"Invalid pane index"),this.qu.splice(e,1),this.Ih())}vc(e,n){if(this.qu.length<2)return;Jt(e>=0&&e<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu.reduce((d,f)=>d+f.Bo(),0),i=this.qu.reduce((d,f)=>d+f.$t(),0),o=i-30*(this.qu.length-1);n=Math.min(o,Math.max(30,n));const a=r/i,l=s.$t();s.Io(n*a);let c=n-l,u=this.qu.length-1;for(const d of this.qu)if(d!==s){const f=Math.min(o,Math.max(30,d.$t()-c/u));c-=d.$t()-f,u-=1;const g=f*a;d.Io(g)}this.Ih()}mc(e,n){Jt(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu[n];this.qu[e]=r,this.qu[n]=s,this.Ih()}wc(e,n){if(Jt(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index"),e===n)return;const[s]=this.qu.splice(e,1);this.qu.splice(n,0,s),this.Ih()}Uo(e,n,s){e.Uo(n,s)}$o(e,n,s){e.$o(n,s),this.Ah(),this.rc(this.gc(e,2))}qo(e,n){e.qo(n),this.rc(this.gc(e,2))}Yo(e,n,s){n.Tl()||e.Yo(n,s)}jo(e,n,s){n.Tl()||(e.jo(n,s),this.Ah(),this.rc(this.gc(e,2)))}Ko(e,n){n.Tl()||(e.Ko(n),this.rc(this.gc(e,2)))}Zo(e,n){e.Zo(n),this.rc(this.gc(e,2))}Mc(e){this.uh.no(e)}bc(e,n){const s=this.Et();if(s.Ki()||n===0)return;const r=s.Qi();e=Math.max(1,Math.min(e,r)),s.Cu(e,n),this.vu()}Sc(e){this.xc(0),this.Cc(e),this.Pc()}yc(e){this.uh.eo(e),this.vu()}kc(){this.uh.ro(),this.ar()}xc(e){this.uh.ho(e)}Cc(e){this.uh.ao(e),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(e,n,s,r,i){this.Ct.Vs(e,n);let o=NaN,a=this.uh.cu(e,!0);const l=this.uh.Pe();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));const c=r.ks(),u=c.zt();if(u!==null&&(o=c.Ts(n,u)),o=this.Qu.ga(o,a,r),this.Ct.As(a,o,r),this.Zh(),!i){const d=b_(r,e,n);this.lc(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Xu.p(this.Ct.It(),{x:e,y:n},s)}}Rc(e,n,s){const r=s.ks(),i=r.zt(),o=r.Nt(e,ue(i)),a=this.uh.Q_(n,!0),l=this.uh.qt(ue(a));this.Tc(l,o,null,s,!0)}Dc(e){this.uc().Ls(),this.Zh(),e||this.Xu.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const n=this.Ct.Is(),s=this.Ct.Es();this.Tc(n,s,null,e)}this.Ct.Ns()}Vc(e,n,s){const r=this.uh.Rs(0);n!==void 0&&s!==void 0&&this.uh.yt(n,s);const i=this.uh.Rs(0),o=this.uh._u(),a=this.uh.Pe();if(a!==null&&r!==null&&i!==null){const l=a.Te(o),c=this.o_.key(r)>this.o_.key(i),u=e!==null&&e>o&&!c,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=l&&(s!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!f){const g=e-o;this.uh.fn(this.uh.gu()-g)}}this.uh.xu(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(s){return s instanceof Jv}(e))return e;const n=this.qu.find(s=>s.Dt().includes(e));return n===void 0?null:n}vu(){this.qu.forEach(e=>e.Jo()),this.Ah()}m(){this.qu.forEach(e=>e.m()),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(e,n){const s=this.tc(n);this.Ec(e,s),this.Yu.push(e),this.Yu.length===1?this.Ih():this.ar()}Ac(e){const n=this.Hn(e),s=this.Yu.indexOf(e);Jt(s!==-1,"Series not found");const r=ue(n);this.Yu.splice(s,1),r.Ql(e),e.m&&e.m(),this.uh.K_(),this.zc(r)}Bh(e,n){const s=ue(this.Hn(e));s.Ql(e,!0),s.Gl(e,n,!0)}Au(){const e=Xt.wn();e.rn(),this.rc(e)}Lc(e){const n=Xt.wn();n.ln(e),this.rc(n)}cn(){const e=Xt.wn();e.cn(),this.rc(e)}dn(e){const n=Xt.wn();n.dn(e),this.rc(n)}fn(e){const n=Xt.wn();n.fn(e),this.rc(n)}_n(e){const n=Xt.wn();n._n(e),this.rc(n)}hn(){const e=Xt.wn();e.hn(),this.rc(e)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(e,n){if(Jt(n>=0,"Index should be greater or equal to 0"),n===this.Fc(e))return;const s=ue(this.Hn(e));s.Ql(e);const r=this.tc(n);this.Ec(e,r),s.Ma().length===0&&this.zc(s),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(e){const n=this.ec,s=this.sc;if(n===s)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Zu===null||this.Zu.mr!==s||this.Zu.wr!==n)this.Zu={mr:s,wr:n,Hc:new Map};else{const i=this.Zu.Hc.get(e);if(i!==void 0)return i}const r=this.Sl.tt(s,n,e/100);return this.Zu.Hc.set(e,r),r}Uc(e){return this.qu.indexOf(e)}Xi(){return this.Sl}$c(){return this.qc()}qc(e){const n=new Jv(this.uh,this);this.qu.push(n);const s=e??this.qu.length-1,r=Xt.gn();return r.Qs(s,{tn:0,sn:!0}),this.rc(r),n}tc(e){return Jt(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.qu.length,e))<this.qu.length?this.qu[e]:this.qc(e)}Fc(e){return this.qu.findIndex(n=>n.Oo().includes(e))}gc(e,n){const s=new Xt(n);if(e!==null){const r=this.qu.indexOf(e);s.Qs(r,{tn:n})}return s}hc(e,n){return n===void 0&&(n=2),this.gc(this.Hn(e),n)}rc(e){this.Gu&&this.Gu(e),this.qu.forEach(n=>n.i_().lr().yt())}Ec(e,n){const s=e.N().priceScaleId,r=s!==void 0?s:this.Oc();n.Gl(e,r),hf(r)||e.hr(e.N())}nc(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}zc(e){!e.Lo()&&e.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(e),1)}}function y_(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}function Pg(t){return!Aa(t)&&!ru(t)}function v_(t){return Aa(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(tw||(tw={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(nw||(nw={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(sw||(sw={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(rw||(rw={}));const iw=t=>t.getUTCFullYear();function KR(t,e,n){return e.replace(/yyyy/g,(s=>dr(iw(s),4))(t)).replace(/yy/g,(s=>dr(iw(s)%100,2))(t)).replace(/MMMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,n)).replace(/MMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,n)).replace(/MM/g,(s=>dr((r=>r.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>dr((r=>r.getUTCDate())(s),2))(t))}class w_{constructor(e="yyyy-MM-dd",n="default"){this.Yc=e,this.jc=n}__(e){return KR(e,this.Yc,this.jc)}}class qR{constructor(e){this.Kc=e||"%h:%m:%s"}__(e){return this.Kc.replace("%h",dr(e.getUTCHours(),2)).replace("%m",dr(e.getUTCMinutes(),2)).replace("%s",dr(e.getUTCSeconds(),2))}}const XR={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class QR{constructor(e={}){const n={...XR,...e};this.Qc=new w_(n.Xc,n.Jc),this.td=new qR(n.Zc),this.sd=n.Gc}__(e){return`${this.Qc.__(e)}${this.sd}${this.td.__(e)}`}}function Gu(t){return 60*t*60*1e3}function W0(t){return 60*t*1e3}const Ku=[{nd:(ow=1,1e3*ow),ed:10},{nd:W0(1),ed:20},{nd:W0(5),ed:21},{nd:W0(30),ed:22},{nd:Gu(1),ed:30},{nd:Gu(3),ed:31},{nd:Gu(6),ed:32},{nd:Gu(12),ed:33}];var ow;function aw(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=Ku.length-1;n>=0;--n)if(Math.floor(e.getTime()/Ku[n].nd)!==Math.floor(t.getTime()/Ku[n].nd))return Ku[n].ed;return 0}function H0(t){let e=t;if(ru(t)&&(e=yx(t)),!Pg(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{rd:Math.round(n.getTime()/1e3),hd:e}}function lw(t){if(!v_(t))throw new Error("time must be of type isUTCTimestamp");return{rd:t}}function yx(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function cw(t){ru(t.time)&&(t.time=yx(t.time))}class uw{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(cw)}(e):cw(e)}createConverterToInternalObj(e){return ue(function(n){return n.length===0?null:Pg(n[0].time)||ru(n[0].time)?H0:lw}(e))}key(e){return typeof e=="object"&&"rd"in e?e.rd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.hd===void 0?new Date(1e3*n.rd).getTime():new Date(Date.UTC(n.hd.year,n.hd.month-1,n.hd.day)).getTime()}convertHorzItemToInternal(e){return v_(n=e)?lw(n):Pg(n)?H0(n):H0(yx(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new QR({Xc:n,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:e.locale}):this.ad=new w_(n,e.locale)}formatHorzItem(e){const n=e;return this.ad.__(new Date(1e3*n.rd))}formatTickmark(e,n){const s=function(i,o,a){switch(i){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),r=this.Ps.timeScale;if(r.tickMarkFormatter!==void 0){const i=r.tickMarkFormatter(e.originalTime,s,n.locale);if(i!==null)return i}return function(i,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=i.hd===void 0?new Date(1e3*i.rd):new Date(Date.UTC(i.hd.year,i.hd.month-1,i.hd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,s,n.locale)}maxTickMarkWeight(e){let n=e.reduce(VR,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(s,r=0){if(s.length===0)return;let i=r===0?null:s[r-1].time.rd,o=i!==null?new Date(1e3*i):null,a=0;for(let l=r;l<s.length;++l){const c=s[l],u=new Date(1e3*c.time.rd);o!==null&&(c.timeWeight=aw(u,o)),a+=c.time.rd-(i||c.time.rd),i=c.time.rd,o=u}if(r===0&&s.length>1){const l=Math.ceil(a/(s.length-1)),c=new Date(1e3*(s[0].time.rd-l));s[0].timeWeight=aw(new Date(1e3*s[0].time.rd),c)}})(e,n)}static ld(e){return Wn({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Na=typeof window<"u";function dw(){return!!Na&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function V0(){return!!Na&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Tg(t){return t+t%2}function JR(t){Na&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class gf{constructor(e,n,s){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!V0(),this.Ld=r=>{this.Od(r)},this.Nd=r=>{if(this.Fd(r)){const i=this.Wd(r);if(++this.dd,this.fd&&this.dd>1){const{Hd:o}=this.Ud(As(r),this.pd);o<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}}else{const i=this.Wd(r);if(++this.od,this._d&&this.od>1){const{Hd:o}=this.Ud(As(r),this.ud);o<5&&!this.bd&&this.Kd(i,this.Yd.Xd),this.Zd()}}},this.Gd=e,this.Yd=n,this.Ps=s,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(e){this.yd&&this.yd();const n=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",n)},this.Gd.addEventListener("mousemove",n),this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(e){if(this.Id||this.gd!==null||this.Fd(e))return;const n=this.Wd(e);this.Kd(n,this.Yd.nf),this.zd=!0}ef(e){const n=Y0(e.changedTouches,ue(this.Ad));if(n===null||(this.Ed=qu(e),this.Rd!==null)||this.Bd)return;this.Vd=!0;const s=this.Ud(As(n),ue(this.gd)),{rf:r,hf:i,Hd:o}=s;if(this.Md||!(o<5)){if(!this.Md){const a=.5*r,l=i>=a&&!this.Ps.af(),c=a>i&&!this.Ps.lf();l||c||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const a=this.Wd(e,n);this.$d(a,this.Yd._f),vo(e)}}}uf(e){if(e.button!==0)return;const n=this.Ud(As(e),ue(this.wd)),{Hd:s}=n;if(s>=5&&(this.bd=!0,this.Zd()),this.bd){const r=this.Wd(e);this.Kd(r,this.Yd.cf)}}Ud(e,n){const s=Math.abs(n._t-e._t),r=Math.abs(n.ut-e.ut);return{rf:s,hf:r,Hd:s+r}}df(e){let n=Y0(e.changedTouches,ue(this.Ad));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Ad=null,this.Ed=qu(e),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const s=this.Wd(e,n);if(this.$d(s,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:r}=this.Ud(As(n),this.pd);r<30&&!this.Sd&&this.$d(s,this.Yd.qd),this.jd()}else this.Sd||(this.$d(s,this.Yd.pf),this.Yd.pf&&vo(e));this.dd===0&&vo(e),e.touches.length===0&&this.md&&(this.md=!1,vo(e))}Od(e){if(e.button!==0)return;const n=this.Wd(e);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),dw()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(e))if(this.Kd(n,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:s}=this.Ud(As(e),this.ud);s<5&&!this.bd&&this.Kd(n,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(n,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(e){if(this.Ad!==null)return;const n=e.changedTouches[0];this.Ad=n.identifier,this.Ed=qu(e);const s=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=As(n),this.Td&&(this.Td(),this.Td=null);{const i=this.ef.bind(this),o=this.df.bind(this);this.Td=()=>{s.removeEventListener("touchmove",i),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,e),240)}const r=this.Wd(e,n);this.$d(r,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=As(n))}bf(e){if(e.button!==0)return;const n=this.Gd.ownerDocument.documentElement;dw()&&n.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=As(e),this.kd&&(this.kd(),this.kd=null);{const r=this.uf.bind(this),i=this.Od.bind(this);this.kd=()=>{n.removeEventListener("mousemove",r),n.removeEventListener("mouseup",i)},n.addEventListener("mousemove",r),n.addEventListener("mouseup",i)}if(this.Id=!0,this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=As(e))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const e=this.Gd.ownerDocument,n=s=>{this.Yd.xf&&(s.composed&&this.Gd.contains(s.composedPath()[0])||s.target&&this.Gd.contains(s.target)||this.Yd.xf())};this.Cd=()=>{e.removeEventListener("touchstart",n)},this.xd=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}V0()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),JR(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",()=>{},{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",e=>this.Rf(e.touches),{passive:!0}),this.Gd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const n=hw(e.touches[0],e.touches[1])/this.Dd;this.Yd.kf(this.Rd,n),vo(e)}},{passive:!1}),this.Gd.addEventListener("touchend",e=>{this.Rf(e.touches)}))}Rf(e){e.length===1&&(this.Vd=!1),e.length!==2||this.Vd||this.md?this.Df():this.Vf(e)}Vf(e){const n=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Dd=hw(e[0],e[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(e){if(this.yd&&this.yd(),this.Fd(e)||!this.zd)return;const n=this.Wd(e);this.Kd(n,this.Yd.Bf),this.zd=!V0()}gf(e){const n=Y0(e.touches,ue(this.Ad));if(n===null)return;const s=this.Wd(e,n);this.$d(s,this.Yd.If),this.Sd=!0,this.md=!0}Fd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:qu(e)<this.Ed+500}$d(e,n){n&&n.call(this.Yd,e)}Kd(e,n){n&&n.call(this.Yd,e)}Wd(e,n){const s=n||e,r=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-r.left,localY:s.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Ef:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Af:e.type,zf:s.target,a_:e.view,Lf:()=>{e.type!=="touchstart"&&vo(e)}}}}function hw(t,e){const n=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(n*n+s*s)}function vo(t){t.cancelable&&t.preventDefault()}function As(t){return{_t:t.pageX,ut:t.pageY}}function qu(t){return t.timeStamp||performance.now()}function Y0(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class ZR{constructor(e,n,s){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=e,this.Uf=e.$f()[n],this.qf=e.$f()[s],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return at({width:this.Uf.Gf().width,height:1})}Jf(){return at({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(e,n,s){const r=this.Jf();e.fillStyle=this.Hf.N().layout.panes.separatorColor,e.fillRect(n,s,r.width,r.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.jf.appendChild(e);const s=document.createElement("div"),r=s.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.jf.appendChild(s);const i={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new gf(s,i,{af:()=>!1,lf:()=>!0}),this.Of={ip:s,tp:e}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(e){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(e){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(e){if(this.Of===null)return;const n=this.Uf.ap().Bo()+this.qf.ap().Bo(),s=n/(this.Uf.Gf().height+this.qf.Gf().height),r=30*s;n<=2*r||(this.Wf={lp:e.pageY,op:this.Uf.ap().Bo(),_p:n-r,up:n,cp:s,dp:r},this.Of.tp.style.display="block")}rp(e){const n=this.Wf;if(n===null)return;const s=(e.pageY-n.lp)*n.cp,r=tc(n.op+s,n.dp,n._p);this.Uf.ap().Io(r),this.qf.ap().Io(n.up-r),this.Hf.Qt().Ih()}hp(e){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function G0(t,e){return t.fp-e.fp}function K0(t,e,n){const s=(t.fp-e.fp)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),n)}class e7{constructor(e,n,s,r){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=e,this.xp=n,this.Cp=s,this.Mn=r}Pp(e,n){if(this.pp!==null){if(this.pp.wt===n)return void(this.pp.fp=e);if(Math.abs(this.pp.fp-e)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:n,fp:e}}le(e,n){if(this.pp===null||this.vp===null||n-this.pp.wt>50)return;let s=0;const r=K0(this.pp,this.vp,this.xp),i=G0(this.pp,this.vp),o=[r],a=[i];if(s+=i,this.mp!==null){const c=K0(this.vp,this.mp,this.xp);if(Math.sign(c)===Math.sign(r)){const u=G0(this.vp,this.mp);if(o.push(c),a.push(u),s+=u,this.wp!==null){const d=K0(this.mp,this.wp,this.xp);if(Math.sign(d)===Math.sign(r)){const f=G0(this.mp,this.wp);o.push(d),a.push(f),s+=f}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/s*o[c];Math.abs(l)<this.Sp||(this.gp={fp:e,wt:n},this.bp=l,this.Mp=function(c,u){const d=Math.log(u);return Math.log(1*d/-c)/d}(Math.abs(l),this.Cp))}Du(e){const n=ue(this.gp),s=e-n.wt;return n.fp+this.bp*(Math.pow(this.Cp,s)-1)/Math.log(this.Cp)}Ru(e){return this.gp===null||this.yp(e)===this.Mp}yp(e){const n=e-ue(this.gp).wt;return Math.min(n,this.Mp)}}class t7{constructor(e,n){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=e,this.Vp=n,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function eo(t,e){const n=ue(t.ownerDocument).createElement("canvas");t.appendChild(n);const s=BM(n,{options:{allowResizeObserver:!0},transform:(r,i)=>({width:Math.max(r.width,i.width),height:Math.max(r.height,i.height)})});return s.resizeCanvasElement(e),s}function to(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function Ig(t,e,n,s){t.ih&&t.ih(e,n,s)}function Md(t,e,n,s){t.nt(e,n,s)}function Mg(t,e,n,s){const r=t(n,s);for(const i of r){const o=i.Tt(s);o!==null&&e(o)}}function q0(t,e){return n=>{var s,r;return function(i){return i.Ft!==void 0}(n)?(((s=n.Ft())==null?void 0:s.ma())??"")!==e?[]:((r=n.ta)==null?void 0:r.call(n,t))??[]:[]}}function fw(t,e,n,s){if(!t.length)return;let r=0;const i=t[0].$t(s,!0);let o=e===1?n/2-(t[0].Fi()-i/2):t[0].Fi()-i/2-n/2;o=Math.max(0,o);for(let a=1;a<t.length;a++){const l=t[a],c=t[a-1],u=c.$t(s,!1),d=l.Fi(),f=c.Fi();if(e===1?d>f-u:d<f+u){const g=f-u*e;l.Wi(g);const m=g-e*u/2;if((e===1?m<0:m>n)&&o>0){const b=e===1?-1-m:m-n,w=Math.min(b,o);for(let p=r;p<t.length;p++)t[p].Wi(t[p].Fi()+e*w);o-=w}}else r=a,o=e===1?f-u-d:d-(f+u)}}class pw{constructor(e,n,s,r){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new mh(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=e,this.Ps=n,this.Ml=n.layout,this.Ju=s,this.jp=r==="left",this.Kp=q0("normal",r),this.Xp=q0("top",r),this.Zp=q0("bottom",r),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=eo(this.jf,at({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=eo(this.jf,at({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new gf(this.Jp.canvasElement,a,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),to(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),to(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const e=this.Ju.N();return this.Wp!==e.k&&(this.Fp.Bn(),this.Wp=e.k),e}nv(){if(this.Yi===null)return 0;let e=0;const n=this.sv(),s=ue(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));s.save();const r=this.Yi.Da();s.font=this.ev(),r.length>0&&(e=Math.max(this.Fp.Vi(s,r[0].Za),this.Fp.Vi(s,r[r.length-1].Za)));const i=this.rv();for(let c=i.length;c--;){const u=this.Fp.Vi(s,i[c].ri());u>e&&(e=u)}const o=this.Yi.zt();if(o!==null&&this.Op!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Yi.Ts(1,o),u=this.Yi.Ts(this.Op.height-2,o);e=Math.max(e,this.Fp.Vi(s,this.Yi.Zi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Fp.Vi(s,this.Yi.Zi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;s.restore();const l=e||34;return Tg(Math.ceil(n.S+n.C+n.B+n.I+5+l))}hv(e){this.Op!==null&&Hi(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`)}av(){return ue(this.Op).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=e,e.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const e=this.Pt.ap();this.Pt.qp().Qt().Zo(e,ue(this.Ft()))}lv(e){if(this.Op===null)return;const n={colorSpace:this.Pt.qp().N().layout.colorSpace};if(e!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const r=Zi(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i)}),this.Pt.cv(r,this.Zp),this.dv(r),this.Pt.cv(r,this.Kp),this.fv(r))}this.Jp.applySuggestedBitmapSize();const s=Zi(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.pv(s),this.Pt.cv(s,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}yt(){var e;(e=this.Yi)==null||e.Da()}ep(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!0,n.Uo(s,this.Yi,e.localY)}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap(),r=this.Yi;n.$o(s,r,e.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),n=this.Pt.ap(),s=this.Yi;this.Np&&(this.Np=!1,e.qo(n,s))}hp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!1,n.qo(s,this.Yi)}tv(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(e){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(e){this.vv(0)}rv(){const e=[],n=this.Yi===null?void 0:this.Yi;return(s=>{for(let r=0;r<s.length;++r){const i=s[r].Ws(this.Pt.ap(),n);for(let o=0;o<i.length;o++)e.push(i[o])}})(this.Pt.ap().Dt()),e}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.Pt.ap().Qt(),o=i.$(),a=i.Wc();o===a?uf(e,0,0,s,r,o):a_(e,0,0,s,r,o,a)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const r=Math.max(1,Math.floor(this.sv().S*s));let i;i=this.jp?n.width-r:0,e.fillRect(i,0,r,n.height)}dv(e){if(this.Op===null||this.Yi===null)return;const n=this.Yi.Da(),s=this.Yi.N(),r=this.sv(),i=this.jp?this.Op.width-r.C:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=s.borderColor;const c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),d=Math.round(r.C*a);o.beginPath();for(const f of n)o.rect(Math.floor(i*a),Math.round(f.Pa*l)-u,d,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.ev(),o.fillStyle=s.textColor??this.Ml.textColor,o.textAlign=this.jp?"right":"left",o.textBaseline="middle";const a=this.jp?Math.round(i-r.B):Math.round(i+r.C+r.B),l=n.map(c=>this.Fp.Di(o,c.Za));for(let c=n.length;c--;){const u=n[c];o.fillText(u.Za,a,u.Pa+l[c])}})}ov(){if(this.Op===null||this.Yi===null)return;let e=this.Op.height/2;const n=[],s=this.Yi.Dt().slice(),r=this.Pt.ap(),i=this.sv();this.Yi===r.$n()&&this.Pt.ap().Dt().forEach(l=>{r.Un(l)&&s.push(l)});const o=this.Yi.Ma()[0],a=this.Yi;s.forEach(l=>{const c=l.Ws(r,a);c.forEach(u=>{u.Wi(null),u.Hi()&&n.push(u)}),o===l&&c.length>0&&(e=c[0].Ii())}),n.forEach(l=>l.Wi(l.Ii())),this.Yi.N().alignLabels&&this.mv(n,i,e)}mv(e,n,s){if(this.Op===null)return;const r=e.filter(o=>o.Ii()<=s),i=e.filter(o=>o.Ii()>s);r.sort((o,a)=>a.Ii()-o.Ii()),r.length&&i.length&&i.push(r[0]),i.sort((o,a)=>o.Ii()-a.Ii());for(const o of e){const a=Math.floor(o.$t(n)/2),l=o.Ii();l>-a&&l<a&&o.Wi(a),l>this.Op.height-a&&l<this.Op.height+a&&o.Wi(this.Op.height-a)}fw(r,1,this.Op.height,n),fw(i,-1,this.Op.height,n)}fv(e){if(this.Op===null)return;const n=this.rv(),s=this.sv(),r=this.jp?"right":"left";n.forEach(i=>{i.Ui()&&i.Tt(ue(this.Yi)).nt(e,s,this.Fp,r)})}pv(e){if(this.Op===null||this.Yi===null)return;const n=this.Pt.qp().Qt(),s=[],r=this.Pt.ap(),i=n.uc().Ws(r,this.Yi);i.length&&s.push(i);const o=this.sv(),a=this.jp?"right":"left";s.forEach(l=>{l.forEach(c=>{c.Tt(ue(this.Yi)).nt(e,o,this.Fp,a)})})}vv(e){this.jf.style.cursor=e===1?"ns-resize":"default"}_l(){const e=this.nv();this.Hp<e&&this.Pt.qp().Qt().Ih(),this.Hp=e}ev(){return gh(this.Ml.fontSize,this.Ml.fontFamily)}}function n7(t,e){var n;return((n=t.Jh)==null?void 0:n.call(t,e))??[]}function gw(t,e){var n;return((n=t.Fs)==null?void 0:n.call(t,e))??[]}function mw(t,e){var n;return((n=t.us)==null?void 0:n.call(t,e))??[]}function s7(t,e){var n;return((n=t.Xh)==null?void 0:n.call(t,e))??[]}class vx{constructor(e,n){this.Op=at({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new Rt,this.Cv=new Rt,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=e,this.Vv=n,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(s),this.Gp=eo(s,at({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jp=eo(s,at({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const i=this.Jp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new gf(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),to(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),to(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return ue(this.Vv)}Lv(e){var n;this.Vv!==null&&this.Vv.t_().u(this),this.Vv=e,this.Vv!==null&&this.Vv.t_().i(vx.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new t7(this.Iv,this.Vp),this.Mv.yt()):((n=this.Mv)==null||n.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const e=this.Vv.Wo();this.wv._s(ue(e))}if(this.gv!==null){const e=this.Vv.Ho();this.gv._s(ue(e))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(e){this.Vv&&this.Vv.Io(e)}sf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}Sf(e){this.Fv(),this.Hv(),this.Wv(e.localX,e.localY,e)}nf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}mf(e){this.Vv!==null&&(this.Fv(),this.Uv(e))}Xd(e){this.Vv!==null&&this.$v(this.Cv,e)}qd(e){this.Xd(e)}cf(e){this.Fv(),this.qv(e),this.Wv(e.localX,e.localY,e)}vf(e){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(e))}pf(e){this.Vv!==null&&this.Uv(e)}If(e){if(this.yv=!0,this.kv===null){const n={x:e.localX,y:e.localY};this.jv(n,n,e)}}Bf(e){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(e,n){if(!this.Vp.N().handleScale.pinch)return;const s=5*(n-this.Pv);this.Pv=n,this.ts().bc(e._t,s)}Mf(e){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const n=this.ts().uc();this.kv!==null&&n.Vt()&&(this.Rv={x:n.si(),y:n.ni()},this.kv={x:e.localX,y:e.localY})}_f(e){if(this.Vv===null)return;const n=e.localX,s=e.localY;if(this.kv===null)this.qv(e);else{this.Tv=!1;const r=ue(this.Rv),i=r.x+(n-this.kv.x),o=r.y+(s-this.kv.y);this.Wv(i,o,e)}}ff(e){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(e)}jn(e,n){const s=this.Vv;return s===null?null:b_(s,e,n)}Jv(e,n){ue(n==="left"?this.wv:this.gv).hv(at({width:e,height:this.Op.height}))}Gf(){return this.Op}hv(e){Hi(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Qv(){const e=ue(this.Vv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const n of e.Ma())if(e.Un(n)){const s=n.Ft();s!==null&&e.Fo(s),n.Ns()}for(const n of e.s_())n.Ns()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e!==null&&e.drawImage(o,n,s)}}lv(e){if(e===0||this.Vv===null)return;e>1&&this.Qv(),this.wv!==null&&this.wv.lv(e),this.gv!==null&&this.gv.lv(e);const n={colorSpace:this.Vp.N().layout.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=Zi(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i)}),this.Vv&&(this.tm(r,n7),this.im(r),this.tm(r,gw),this.tm(r,mw)))}this.Jp.applySuggestedBitmapSize();const s=Zi(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.sm(s),this.tm(s,s7),this.tm(s,mw))}nm(){return this.wv}rm(){return this.gv}cv(e,n){this.tm(e,n)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(e){this.$v(this.xv,e)}$v(e,n){const s=n.localX,r=n.localY;e.v()&&e.p(this.ts().Et().cu(s),{x:s,y:r},n)}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.ts(),o=i.$(),a=i.Wc();o===a?uf(e,0,0,s,r,a):a_(e,0,0,s,r,o,a)}im(e){const n=ue(this.Vv),s=n.i_().lr().Tt(n);s!==null&&s.nt(e,!1)}sm(e){this.hm(e,gw,Md,this.ts().uc())}tm(e,n){const s=ue(this.Vv),r=s.Dt(),i=s.s_();for(const o of i)this.hm(e,n,Ig,o);for(const o of r)this.hm(e,n,Ig,o);for(const o of i)this.hm(e,n,Md,o);for(const o of r)this.hm(e,n,Md,o)}hm(e,n,s,r){const i=ue(this.Vv),o=i.Qt().ac(),a=o!==null&&o.n_===r,l=o!==null&&a&&o.e_!==void 0?o.e_.Xn:void 0;Mg(n,c=>s(c,e,a,l),r,i)}Ov(){if(this.Vv===null)return;const e=this.Vp,n=this.Vv.Wo().N().visible,s=this.Vv.Ho().N().visible;n||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),s||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const r=e.Qt().Bc();n&&this.wv===null&&(this.wv=new pw(this,e.N(),r,"left"),this.Ev.appendChild(this.wv.Zf())),s&&this.gv===null&&(this.gv=new pw(this,e.N(),r,"right"),this.Av.appendChild(this.gv.Zf()))}am(e){return e.Ef&&this.yv||this.kv!==null}lm(e){return Math.max(0,Math.min(e,this.Op.width-1))}om(e){return Math.max(0,Math.min(e,this.Op.height-1))}Wv(e,n,s){this.ts().Tc(this.lm(e),this.om(n),s,ue(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(e,n,s){this.kv=e,this.Tv=!1,this.Wv(n.x,n.y,s);const r=this.ts().uc();this.Rv={x:r.si(),y:r.ni()}}ts(){return this.Vp.Qt()}Yv(e){if(!this.Sv)return;const n=this.ts(),s=this.ap();if(n.Ko(s,s.ks()),this.bv=null,this.Sv=!1,n.Pc(),this.Dv!==null){const r=performance.now(),i=n.Et();this.Dv.le(i.gu(),r),this.Dv.Ru(r)||n._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ue(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(e){if(this.Vv===null)return;const n=this.ts(),s=n.Et();if(s.Ki())return;const r=this.Vp.N(),i=r.handleScroll,o=r.kineticScroll;if((!i.pressedMouseMove||e.Ef)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Ef))return;const a=this.Vv.ks(),l=performance.now();if(this.bv!==null||this.am(e)||(this.bv={x:e.clientX,y:e.clientY,rd:l,_m:e.localX,um:e.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==e.clientX||this.bv.y!==e.clientY)){if(e.Ef&&o.touch||!e.Ef&&o.mouse){const c=s.mu();this.Dv=new e7(.2/c,7/c,.997,15/c),this.Dv.Pp(s.gu(),this.bv.rd)}else this.Dv=null;a.Ki()||n.Yo(this.Vv,a,e.localY),n.xc(e.localX),this.Sv=!0}this.Sv&&(a.Ki()||n.jo(this.Vv,a,e.localY),n.Cc(e.localX),this.Dv!==null&&this.Dv.Pp(s.gu(),l))}}class xw{constructor(e,n,s,r,i){this.xt=!0,this.Op=at({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=e==="left",this.Ju=s.Bc,this.Ps=n,this.dm=r,this.fm=i,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=eo(this.jf,at({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),to(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(e){Hi(this.Op,e)||(this.Op=e,this.Gp.resizeCanvasElement(e),this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.xt=!0)}lv(e){if(e<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const n=Zi(this.Gp,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(s=>{this._v(s),this.uv(s)})}Jf(){return this.Gp.bitmapSize}Qf(e,n,s){const r=this.Jf();r.width>0&&r.height>0&&e.drawImage(this.Gp.canvasElement,n,s)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(!this.dm())return;e.fillStyle=this.Ps.timeScale.borderColor;const i=Math.floor(this.Ju.N().S*s),o=Math.floor(this.Ju.N().S*r),a=this.jp?n.width-i:0;e.fillRect(a,0,i,o)}_v({context:e,bitmapSize:n}){uf(e,0,0,n.width,n.height,this.fm())}}function wx(t){return e=>{var n;return((n=e.ia)==null?void 0:n.call(e,t))??[]}}const r7=wx("normal"),i7=wx("top"),o7=wx("bottom");class a7{constructor(e,n){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=at({width:0,height:0}),this.gm=new Rt,this.Fp=new mh(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=e,this.o_=n,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=eo(this.Sm,at({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jp=eo(this.Sm,at({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const r=this.Jp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new gf(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),to(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),to(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(e){if(this.wm)return;this.wm=!0;const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.Mc(e.localX)}Mf(e){this.Sf(e)}xf(){const e=this.Vp.Qt();!e.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&e.kc())}cf(e){const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.yc(e.localX)}_f(e){this.cf(e)}vf(){this.wm=!1;const e=this.Vp.Qt();e.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||e.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(e,n,s){Hi(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.gm.p(e)),this.pm!==null&&this.pm.hv(at({width:n,height:e.height})),this.vm!==null&&this.vm.hv(at({width:s,height:e.height}))}Tm(){const e=this.Rm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}lv(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=Zi(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i),this.Vm(r,o7)}),this.dv(r),this.Vm(r,r7)),this.pm!==null&&this.pm.lv(e),this.vm!==null&&this.vm.lv(e)}this.Jp.applySuggestedBitmapSize();const s=Zi(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],s),this.Vm(s,i7))}Vm(e,n){const s=this.Vp.Qt().js();for(const r of s)Mg(n,i=>Ig(i,e,!1,void 0),r,void 0);for(const r of s)Mg(n,i=>Md(i,e,!1,void 0),r,void 0)}_v({context:e,bitmapSize:n}){uf(e,0,0,n.width,n.height,this.Vp.Qt().Wc())}uv({context:e,bitmapSize:n,verticalPixelRatio:s}){if(this.Vp.N().timeScale.borderVisible){e.fillStyle=this.Im();const r=Math.max(1,Math.floor(this.Rm().S*s));e.fillRect(0,0,n.width,r)}}dv(e){const n=this.Vp.Qt().Et(),s=n.Da();if(!s||s.length===0)return;const r=this.o_.maxTickMarkWeight(s),i=this.Rm(),o=n.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.Im(),a.fillStyle=this.Im();const u=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();const f=Math.round(i.C*c);for(let g=s.length;g--;){const m=Math.round(s[g].coord*l);a.rect(m-d,0,u,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=i.S+i.C+i.A+i.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.ev();for(const c of s)if(c.weight<r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.Vp.N().timeScale.allowBoldLabels&&(a.font=this.Am());for(const c of s)if(c.weight>=r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Em(e,n,s){const r=this.Fp.Vi(e,s),i=r/2,o=Math.floor(n-i)+.5;return o<0?n+=Math.abs(0-o):o+r>this.Op.width&&(n-=Math.abs(this.Op.width-(o+r))),n}Bm(e,n){const s=this.Rm();for(const r of e)for(const i of r.cs())i.Tt().nt(n,s)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return gh(this.F(),this.Ps.fontFamily)}Am(){return gh(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new mh,Dm:0});const e=this.M,n=this.ev();if(e.k!==n){const s=this.F();e.P=s,e.k=n,e.A=3*s/12,e.V=3*s/12,e.Ji=9*s/12,e.L=0,e.Dm=4*s/12,e.Gi.Bn()}return this.M}vv(e){this.jf.style.cursor=e===1?"ew-resize":"default"}xm(){const e=this.Vp.Qt(),n=e.N();n.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),n.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const s={Bc:this.Vp.Qt().Bc()},r=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,i=()=>e.Wc();n.leftPriceScale.visible&&this.pm===null&&(this.pm=new xw("left",n,s,r,i),this.Mm.appendChild(this.pm.Zf())),n.rightPriceScale.visible&&this.vm===null&&(this.vm=new xw("right",n,s,r,i),this.bm.appendChild(this.vm.Zf()))}}var SS;const l7=!!Na&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Na&&((SS=navigator==null?void 0:navigator.userAgentData)!=null&&SS.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class c7{constructor(e,n,s){var r;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new Rt,this.Cv=new Rt,this.Xu=new Rt,this.Um=null,this.$m=null,this.Dp=e,this.Ps=n,this.o_=s,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(r=this.kp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),X0(this.Ps)&&this.Km(!0),this.ts=new GR(this.Gu.bind(this),this.Ps,s),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new a7(this,this.o_),this.qm.appendChild(this.Zm.Zf());const i=n.autoSize&&this.Gm();let o=this.Ps.width,a=this.Ps.height;if(i||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Jm(o,a),this.Qm(),e.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.zm)this.qm.removeChild(e.Zf()),e.Xv().u(this),e.Zv().u(this),e.m();this.zm=[];for(const e of this.Lm)this.sw(e);this.Lm=[],ue(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(e,n,s=!1){if(this.il===n&&this.Mo===e)return;const r=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return at({width:l-l%2,height:c-c%2})}(at({width:e,height:n}));this.il=r.height,this.Mo=r.width;const i=this.il+"px",o=this.Mo+"px";ue(this.kp).style.height=i,ue(this.kp).style.width=o,this.qm.style.height=i,this.qm.style.width=o,s?this.ew(Xt.gn(),performance.now()):this.ts.Ih()}lv(e){e===void 0&&(e=Xt.gn());for(let n=0;n<this.zm.length;n++)this.zm[n].lv(e.en(n).tn);this.Ps.timeScale.visible&&this.Zm.lv(e.nn())}hr(e){var r;const n=X0(this.Ps);this.ts.hr(e);const s=X0(this.Ps);s!==n&&this.Km(s),(r=e.layout)!=null&&r.panes&&this.rw(),this.tw(),this.hw(e)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(e=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const n=this.lw(null),s=document.createElement("canvas");s.width=n.width,s.height=n.height;const r=ue(s.getContext("2d"));return this.lw(r,e),s}ow(e){return e==="left"&&!this._w()||e==="right"&&!this.uw()||this.zm.length===0?0:ue(e==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(e){this.$m=e,this.$m?this.ip().style.setProperty("cursor",e):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(e){return Dn(this.zm[e]).Gf()}rw(){this.Lm.forEach(e=>{e.yt()})}hw(e){(e.autoSize!==void 0||!this.Um||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Um&&this.Gm(),e.autoSize===!1&&this.Um!==null&&this.nw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Jm(e.width||this.Mo,e.height||this.il))}lw(e,n){let s=0,r=0;const i=this.zm[0],o=(l,c)=>{let u=0;for(let d=0;d<this.zm.length;d++){const f=this.zm[d],g=ue(l==="left"?f.nm():f.rm()),m=g.Jf();if(e!==null&&g.Qf(e,c,u,n),u+=m.height,d<this.zm.length-1){const b=this.Lm[d],w=b.Jf();e!==null&&b.Qf(e,c,u),u+=w.height}}};this._w()&&(o("left",0),s+=ue(i.nm()).Jf().width);for(let l=0;l<this.zm.length;l++){const c=this.zm[l],u=c.Jf();if(e!==null&&c.Qf(e,s,r,n),r+=u.height,l<this.zm.length-1){const d=this.Lm[l],f=d.Jf();e!==null&&d.Qf(e,s,r),r+=f.height}}s+=i.Jf().width,this.uw()&&(o("right",s),s+=ue(i.rm()).Jf().width);const a=(l,c,u)=>{ue(l==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(ue(e),c,u)};if(this.Ps.timeScale.visible){const l=this.Zm.Jf();if(e!==null){let c=0;this._w()&&(a("left",c,r),c=ue(i.nm()).Jf().width),this.Zm.Qf(e,c,r,n),c+=l.width,this.uw()&&a("right",c,r)}r+=l.height}return at({width:s,height:r})}mw(){let e=0,n=0,s=0;for(const w of this.zm)this._w()&&(n=Math.max(n,ue(w.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(s=Math.max(s,ue(w.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),e+=w.Bo();n=Tg(n),s=Tg(s);const r=this.Mo,i=this.il,o=Math.max(r-n-s,0),a=1*this.Lm.length,l=this.Ps.timeScale.visible;let c=l?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const d=a+c,f=i<d?0:i-d,g=f/e;let m=0;const b=window.devicePixelRatio||1;for(let w=0;w<this.zm.length;++w){const p=this.zm[w];p.Lv(this.ts.$s()[w]);let y=0,x=0;x=w===this.zm.length-1?Math.ceil((f-m)*b)/b:Math.round(p.Bo()*g*b)/b,y=Math.max(x,2),m+=y,p.hv(at({width:o,height:y})),this._w()&&p.Jv(n,"left"),this.uw()&&p.Jv(s,"right"),p.ap()&&this.ts.dc(p.ap(),y)}this.Zm.km(at({width:l?o:0,height:c}),l?n:0,l?s:0),this.ts.Eo(o),this.Nm!==n&&(this.Nm=n),this.Fm!==s&&(this.Fm=s)}Km(e){e?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return l7?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.ww(e),s=n*e.deltaX/100,r=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.Ps.handleScale.mouseWheel){const i=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(o,i)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*s)}ew(e,n){var r;const s=e.nn();s===3&&this.gw(),s!==3&&s!==2||(this.Mw(e),this.bw(e,n),this.Zm.yt(),this.zm.forEach(i=>{i.Nv()}),((r=this.Wm)==null?void 0:r.nn())===3&&(this.Wm.vn(e),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,n),e=this.Wm,this.Wm=null)),this.lv(e)}bw(e,n){for(const s of e.pn())this.mn(s,n)}Mw(e){const n=this.ts.$s();for(let s=0;s<n.length;s++)e.en(s).sn&&n[s].Go()}mn(e,n){const s=this.ts.Et();switch(e.an){case 0:s.Au();break;case 1:s.zu(e.Wt);break;case 2:s.dn(e.Wt);break;case 3:s.fn(e.Wt);break;case 4:s.Su();break;case 5:e.Wt.Ru(n)||s.fn(e.Wt.Du(n))}}Gu(e){this.Wm!==null?this.Wm.vn(e):this.Wm=e,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame(n=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const s=this.Wm;this.Wm=null,this.ew(s,n);for(const r of s.pn())if(r.an===5&&!r.Wt.Ru(n)){this.Qt()._n(r.Wt);break}}}))}gw(){this.Qm()}sw(e){this.qm.removeChild(e.Zf()),e.m()}Qm(){const e=this.ts.$s(),n=e.length,s=this.zm.length;for(let r=n;r<s;r++){const i=Dn(this.zm.pop());this.qm.removeChild(i.Zf()),i.Xv().u(this),i.Zv().u(this),i.m();const o=this.Lm.pop();o!==void 0&&this.sw(o)}for(let r=s;r<n;r++){const i=new vx(this,e[r]);if(i.Xv().i(this.Sw.bind(this,i),this),i.Zv().i(this.xw.bind(this,i),this),this.zm.push(i),r>0){const o=new ZR(this,r-1,r);this.Lm.push(o),this.qm.insertBefore(o.Zf(),this.Zm.Zf())}this.qm.insertBefore(i.Zf(),this.Zm.Zf())}for(let r=0;r<n;r++){const i=e[r],o=this.zm[r];o.ap()!==i?o.Lv(i):o.zv()}this.tw(),this.mw()}Cw(e,n,s,r){var d;const i=new Map;e!==null&&this.ts.js().forEach(f=>{const g=f.Xs().Fr(e);g!==null&&i.set(f,g)});let o;if(e!==null){const f=(d=this.ts.Et().ss(e))==null?void 0:d.originalTime;f!==void 0&&(o=f)}const a=this.Qt().ac(),l=a!==null&&a.n_ instanceof pf?a.n_:void 0,c=a!==null&&a.e_!==void 0?a.e_.Kn:void 0,u=this.Pw(r);return{yw:o,Re:e??void 0,kw:n??void 0,Tw:u!==-1?u:void 0,Rw:l,Dw:i,Vw:c,Bw:s??void 0}}Pw(e){let n=-1;if(e)n=this.zm.indexOf(e);else{const s=this.Qt().uc().Us();s!==null&&(n=this.Qt().$s().indexOf(s))}return n}Sw(e,n,s,r){this.xv.p(()=>this.Cw(n,s,r,e))}xw(e,n,s,r){this.Cv.p(()=>this.Cw(n,s,r,e))}Xm(e,n,s){var r;this.dw(((r=this.Qt().ac())==null?void 0:r.h_)??null),this.Xu.p(()=>this.Cw(e,n,s))}tw(){const e=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=e}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.Jm(n.contentRect.width,n.contentRect.height)}),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function X0(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function u7(t){return t.open===void 0&&t.value===void 0}function d7(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function bw(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.color!==void 0&&(i.R=n.color),i}function h7(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.lineColor!==void 0&&(i.vt=n.lineColor),n.topColor!==void 0&&(i.mr=n.topColor),n.bottomColor!==void 0&&(i.wr=n.bottomColor),i}function f7(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.topLineColor!==void 0&&(i.gr=n.topLineColor),n.bottomLineColor!==void 0&&(i.Mr=n.bottomLineColor),n.topFillColor1!==void 0&&(i.br=n.topFillColor1),n.topFillColor2!==void 0&&(i.Sr=n.topFillColor2),n.bottomFillColor1!==void 0&&(i.Cr=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(i.Pr=n.bottomFillColor2),i}function p7(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),r}function g7(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),n.borderColor!==void 0&&(r.Ht=n.borderColor),n.wickColor!==void 0&&(r.vr=n.wickColor),r}function m7(t,e,n,s,r){const i=Dn(r)(n),o=Math.max(...i),a=Math.min(...i),l=i[i.length-1],c=[l,o,a,l],{time:u,color:d,...f}=n;return{Re:e,wt:t,Wt:c,yw:s,se:f,R:d}}function yl(t){return t.Wt!==void 0}function yw(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function xi(t){return(e,n,s,r,i,o)=>function(a,l){return l?l(a):u7(a)}(s,o)?yw({wt:e,Re:n,yw:r},s):yw(t(e,n,s,r,i),s)}function vw(t){return{Candlestick:xi(g7),Bar:xi(p7),Area:xi(h7),Baseline:xi(f7),Histogram:xi(bw),Line:xi(bw),Custom:xi(m7)}[t]}function ww(t){return{Re:0,Ew:new Map,Hh:t}}function Sw(t,e){if(t!==void 0&&t.length!==0)return{Aw:e.key(t[0].wt),zw:e.key(t[t.length-1].wt)}}function kw(t){let e;return t.forEach(n=>{e===void 0&&(e=n.yw)}),Dn(e)}class x7{constructor(e){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=e}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(e,n){let s=this.Lw.size!==0,r=!1;const i=this.Ow.get(e);if(i!==void 0)if(this.Ow.size===1)s=!1,r=!0,this.Lw.clear();else for(const l of this.Fw)l.pointData.Ew.delete(e)&&(r=!0);let o=[];if(n.length!==0){const l=n.map(g=>g.time),c=this.o_.createConverterToInternalObj(n),u=vw(e.Rr()),d=e.ca(),f=e.fa();o=n.map((g,m)=>{const b=c(g.time),w=this.o_.key(b);let p=this.Lw.get(w);p===void 0&&(p=ww(b),this.Lw.set(w,p),r=!0);const y=u(b,p.Re,g,l[m],d,f);return p.Ew.set(e,y),y})}s&&this.Hw(),this.Uw(e,o);let a=-1;if(r){const l=[];this.Lw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:kw(c.Ew)})}),l.sort((c,u)=>this.o_.key(c.time)-this.o_.key(u.time)),a=this.$w(l)}return this.qw(e,a,function(l,c,u){const d=Sw(l,u),f=Sw(c,u);if(d!==void 0&&f!==void 0)return{Yw:!1,zh:d.zw>=f.zw&&d.Aw>=f.Aw}}(this.Ow.get(e),i,this.o_))}Ac(e){return this.Ww(e,[])}jw(e,n,s){const r=n;(function(w){w.yw===void 0&&(w.yw=w.time)})(r),this.o_.preprocessData(n);const i=this.o_.createConverterToInternalObj([n])(n.time),o=this.Nw.get(e);if(!s&&o!==void 0&&this.o_.key(i)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${i}`);let a=this.Lw.get(this.o_.key(i));if(s&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=a===void 0;a===void 0&&(a=ww(i),this.Lw.set(this.o_.key(i),a));const c=vw(e.Rr()),u=e.ca(),d=e.fa(),f=c(i,a.Re,n,r.yw,u,d);a.Ew.set(e,f),s?this.Kw(e,f,a.Re):this.Xw(e,f);const g={zh:yl(f),Yw:s};if(!l)return this.qw(e,-1,g);const m={timeWeight:0,time:a.Hh,pointData:a,originalTime:kw(a.Ew)},b=Da(this.Fw,this.o_.key(m.time),(w,p)=>this.o_.key(w.time)<p);this.Fw.splice(b,0,m);for(let w=b;w<this.Fw.length;++w)Xu(this.Fw[w].pointData,w);return this.o_.fillWeightsForPoints(this.Fw,b),this.qw(e,b,g)}Zw(e,n){const s=this.Ow.get(e);if(s===void 0||n<=0)return[[],this.Gw()];n=Math.min(n,s.length);const r=s.splice(-n).reverse();s.length===0?this.Nw.delete(e):this.Nw.set(e,s[s.length-1].wt);for(const i of r){const o=this.Lw.get(this.o_.key(i.wt));if(o&&(o.Ew.delete(e),o.Ew.size===0)){this.Lw.delete(this.o_.key(o.Hh)),this.Fw.splice(o.Re,1);for(let a=o.Re;a<this.Fw.length;++a)Xu(this.Fw[a].pointData,a)}}return[r,this.qw(e,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(e,n){let s=this.Ow.get(e);s===void 0&&(s=[],this.Ow.set(e,s));const r=s.length!==0?s[s.length-1]:null;r===null||this.o_.key(n.wt)>this.o_.key(r.wt)?yl(n)&&s.push(n):yl(n)?s[s.length-1]=n:s.splice(-1,1),this.Nw.set(e,n.wt)}Kw(e,n,s){const r=this.Ow.get(e);if(r===void 0)return;const i=Da(r,s,(o,a)=>o.Re<a);yl(n)?r[i]=n:r.splice(i,1)}Uw(e,n){n.length!==0?(this.Ow.set(e,n.filter(yl)),this.Nw.set(e,n[n.length-1].wt)):(this.Ow.delete(e),this.Nw.delete(e))}Hw(){for(const e of this.Fw)e.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(e.time))}$w(e){let n=-1;for(let s=0;s<this.Fw.length&&s<e.length;++s){const r=this.Fw[s],i=e[s];if(this.o_.key(r.time)!==this.o_.key(i.time)){n=s;break}i.timeWeight=r.timeWeight,Xu(i.pointData,s)}if(n===-1&&this.Fw.length!==e.length&&(n=Math.min(this.Fw.length,e.length)),n===-1)return-1;for(let s=n;s<e.length;++s)Xu(e[s].pointData,s);return this.o_.fillWeightsForPoints(e,n),this.Fw=e,n}Jw(){if(this.Ow.size===0)return null;let e=0;return this.Ow.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].Re))}),e}qw(e,n,s){const r=this.Gw();if(n!==-1)this.Ow.forEach((i,o)=>{r.Oo.set(o,{se:i,Qw:o===e?s:void 0})}),this.Ow.has(e)||r.Oo.set(e,{se:[],Qw:s}),r.Et.tg=this.Fw,r.Et.ig=n;else{const i=this.Ow.get(e);r.Oo.set(e,{se:i||[],Qw:s})}return r}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function Xu(t,e){t.Re=e,t.Ew.forEach(n=>{n.Re=e})}function b7(t,e){return t.wt<e}function y7(t,e){return e<t.wt}function v7(t,e,n){const s=e.Uh(),r=e.bi(),i=Da(t,s,b7),o=p_(t,r,y7);if(!n)return{from:i,to:o};let a=i,l=o;return i>0&&i<t.length&&t[i].wt>=s&&(a=i-1),o>0&&o<t.length&&t[o-1].wt<=r&&(l=o+1),{from:a,to:l}}class w7{constructor(e,n,s){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=e,this.Qn=n,this.ag=s}yt(e){this.sg=!0,e==="data"&&(this.ng=!0),e==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const e=this.Jn.Ft(),n=this.Qn.Et();if(this.ug(),n.Ki()||e.Ki())return;const s=n.Pe();if(s===null||this.Jn.Xs().zr()===0)return;const r=this.Jn.zt();r!==null&&(this.hg=v7(this.rg,s,this.ag),this.fg(e,n,r.Wt),this.pg())}}class S7{constructor(e,n){this.vg=e,this.Yi=n}nt(e,n,s){this.vg.draw(e,this.Yi,n,s)}}class k7 extends w7{constructor(e,n,s){super(e,n,!1),this.sh=s,this.og=new S7(this.sh.renderer(),r=>{const i=e.zt();return i===null?null:e.Ft().Nt(r,i.Wt)})}da(e){return this.sh.priceValueBuilder(e)}pa(e){return this.sh.isWhitespace(e)}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(n=>({wt:n.Re,_t:NaN,...e.Dr(n.Re),mg:n.se}))}fg(e,n){n.uu(this.rg,VM(this.hg))}pg(){this.sh.update({bars:this.rg.map(C7),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function C7(t){return{x:t._t,time:t.wt,originalData:t.mg,barColor:t.cr}}const _7={color:"#2196f3"},E7=(t,e,n)=>{const s=Yr(n);return new k7(t,e,s)};function Sx(t){const e={value:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function Cw(t){const e=Sx(t);return t.R!==void 0&&(e.color=t.R),e}function P7(t){const e=Sx(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function T7(t){const e=Sx(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function S_(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function I7(t){const e=S_(t);return t.R!==void 0&&(e.color=t.R),e}function M7(t){const e=S_(t),{R:n,Ht:s,vr:r}=t;return n!==void 0&&(e.color=n),s!==void 0&&(e.borderColor=s),r!==void 0&&(e.wickColor=r),e}function Rd(t){return{Area:P7,Line:Cw,Baseline:T7,Histogram:Cw,Bar:I7,Candlestick:M7,Custom:R7}[t]}function R7(t){const e=t.yw;return{...t.se,time:e}}const O7={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},A7={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},D7={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:o_,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Q0={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},N7={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function _w(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:D7,crosshair:O7,grid:A7,overlayPriceScales:{...Q0},leftPriceScale:{...Q0,visible:!1},rightPriceScale:{...Q0,visible:!0},timeScale:N7,localization:{locale:Na?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class k_{constructor(e,n,s){this.Hf=e,this.wg=n,this.gg=s??0}applyOptions(e){this.Hf.Qt().oc(this.wg,e,this.gg)}options(){return this.Yi().N()}width(){return hf(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Fl(new wn(e.from,e.to))}getVisibleRange(){let e,n,s=this.Yi().Qe();if(s===null)return null;if(this.Yi().Ja()){const r=this.Yi().fo(),i=y_(r);s=Fo(s,this.Yi().tl()),e=Number((Math.round(s.$e()/r)*r).toFixed(i)),n=Number((Math.round(s.qe()/r)*r).toFixed(i))}else e=s.$e(),n=s.qe();return{from:e,to:n}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return ue(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class L7{constructor(e,n,s,r){this.Hf=e,this.Pt=s,this.Mg=n,this.bg=r}getHeight(){return this.Pt.$t()}setHeight(e){const n=this.Hf.Qt(),s=n.Uc(this.Pt);n.vc(s,e)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(e){this.Pt.Io(e),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(e){const n=this.paneIndex();n!==e&&(Jt(e>=0&&e<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(n,e))}getSeries(){return this.Pt.Oo().map(e=>this.Mg(e))??[]}getHTMLElement(){const e=this.Hf.$f();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Zf():null}attachPrimitive(e){this.Pt._a(e),e.attached&&e.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(e){this.Pt.ua(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new k_(this.Hf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,n={},s=0){return this.bg.addCustomSeries(e,n,s)}addSeries(e,n={}){return this.bg.addSeries(e,n,this.paneIndex())}}const j7={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class Ew{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}Sg(){return this.ir}}class F7{constructor(e,n,s,r,i,o){this.xg=new Rt,this.Jn=e,this.Cg=n,this.Pg=s,this.o_=i,this.bg=r,this.yg=o}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Ts(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new qo(new rc(e.from,e.to)).y_(),s=this.Jn.Xs();if(s.Ki())return null;const r=s.Fr(n.Uh(),1),i=s.Fr(n.bi(),-1),o=ue(s.Lr()),a=ue(s.Ks());if(r!==null&&i!==null&&r.Re>i.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:r===null||r.Re===o?e.from-o:r.Re-o,barsAfter:i===null||i.Re===a?a-e.to:a-i.Re};return r!==null&&i!==null&&(l.from=r.yw,l.to=i.yw),l}setData(e){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,e),this.Tg("full")}update(e,n=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,e,n),this.Tg("update")}pop(e=1){const n=this.Cg.Dg(this.Jn,e);n.length!==0&&this.Tg("update");const s=Rd(this.seriesType());return n.map(r=>s(r))}dataByIndex(e,n){const s=this.Jn.Xs().Fr(e,n);return s===null?null:Rd(this.seriesType())(s)}data(){const e=Rd(this.seriesType());return this.Jn.Xs().Hr().map(n=>e(n))}subscribeDataChanged(e){this.xg.i(e)}unsubscribeDataChanged(e){this.xg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return ur(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(e){const n=Wn(ur(j7),e),s=this.Jn.Oh(n);return new Ew(s)}removePriceLine(e){this.Jn.Nh(e.Sg())}priceLines(){return this.Jn.Fh().map(e=>new Ew(e))}seriesType(){return this.Jn.Rr()}lastValueData(e){const n=this.Jn.ye(e);return n.ke?{noData:!0}:{noData:!1,price:n.gt,color:n.R}}attachPrimitive(e){this.Jn._a(e),e.attached&&e.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ua(e),e.detached&&e.detached(),this.Jn.Qt().Ih()}getPane(){const e=this.Jn,n=ue(this.Jn.Qt().Hn(e));return this.yg(n)}moveToPane(e){this.Jn.Qt().Nc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const n=this.Jn.Qt().Hn(this.Jn);n!==null&&n.Qo(this.Jn,e)}Tg(e){this.xg.v()&&this.xg.p(e)}}class z7{constructor(e,n,s){this.Vg=new Rt,this.z_=new Rt,this.gm=new Rt,this.ts=e,this.uh=e.Et(),this.Zm=n,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=s}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(e,n){n?this.uh.Tu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.nu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},s=this.uh.au(n);this.ts.Lc(s)}getVisibleLogicalRange(){const e=this.uh.su();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){Jt(e.from<=e.to,"The from index cannot be after the to index."),this.ts.Lc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(e){const n=this.ts.Et();return n.Ki()?null:n.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.cu(e)}timeToIndex(e,n){const s=this.o_.convertHorzItemToInternal(e);return this.uh.Q_(s,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.uh.qt(n)}coordinateToTime(e){const n=this.ts.Et(),s=n.cu(e),r=n.ss(s);return r===null?null:r.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(e){this.Vg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.Vg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.gm.i(e)}unsubscribeSizeChange(e){this.gm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...ur(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(e){this.gm.p(e.width,e.height)}}function Pw(t){return function(e){if(Wu(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:r}=e.handleScale;Wu(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),Wu(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const n=e.handleScroll;Wu(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class B7{constructor(e,n,s){this.Ag=new Map,this.zg=new Map,this.Lg=new Rt,this.Og=new Rt,this.Ng=new Rt,this.qu=new WeakMap,this.Fg=new x7(n);const r=s===void 0?ur(_w()):Wn(ur(_w()),Pw(s));this.Wg=n,this.Hf=new c7(e,r,n),this.Hf.Xv().i(o=>{this.Lg.v()&&this.Lg.p(this.Hg(o()))},this),this.Hf.Zv().i(o=>{this.Og.v()&&this.Og.p(this.Hg(o()))},this),this.Hf.cc().i(o=>{this.Ng.v()&&this.Ng.p(this.Hg(o()))},this);const i=this.Hf.Qt();this.Ug=new z7(i,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(e,n,s){this.autoSizeActive()||this.Hf.Jm(e,n,s)}addCustomSeries(e,n={},s=0){const r=(i=>({type:"Custom",isBuiltIn:!1,defaultOptions:{..._7,...i.defaultOptions()},$g:E7,qg:i}))(Yr(e));return this.Yg(r,n,s)}addSeries(e,n={},s=0){return this.Yg(e,n,s)}removeSeries(e){const n=Dn(this.Ag.get(e)),s=this.Fg.Ac(n);this.Hf.Qt().Ac(n),this.jg(s),this.Ag.delete(e),this.zg.delete(n)}kg(e,n){this.jg(this.Fg.Ww(e,n))}Rg(e,n,s){this.jg(this.Fg.jw(e,n,s))}Dg(e,n){const[s,r]=this.Fg.Zw(e,n);return s.length!==0&&this.jg(r),s}subscribeClick(e){this.Lg.i(e)}unsubscribeClick(e){this.Lg._(e)}subscribeCrosshairMove(e){this.Ng.i(e)}unsubscribeCrosshairMove(e){this.Ng._(e)}subscribeDblClick(e){this.Og.i(e)}unsubscribeDblClick(e){this.Og._(e)}priceScale(e,n=0){return new k_(this.Hf,e,n)}timeScale(){return this.Ug}applyOptions(e){this.Hf.hr(Pw(e))}options(){return this.Hf.N()}takeScreenshot(e=!1,n=!1){let s,r;try{n||(s=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),r=this.Hf.aw(e)}finally{n||s===void 0||this.Hf.Qt().hr({crosshair:{mode:s}})}return r}addPane(e=!1){const n=this.Hf.Qt().$c();return n.zo(e),this.Kg(n)}removePane(e){this.Hf.Qt().fc(e)}swapPanes(e,n){this.Hf.Qt().mc(e,n)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map(e=>this.Kg(e))}paneSize(e=0){const n=this.Hf.pw(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,s){const r=this.Ag.get(s);if(r===void 0)return;const i=this.Hf.Qt().Hn(r);i!==null&&this.Hf.Qt().Rc(e,n,i)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(e,n={},s=0){Jt(e.$g!==void 0),function(l){if(l===void 0||l.type==="custom")return;const c=l;c.minMove!==void 0&&c.precision===void 0&&(c.precision=y_(c.minMove))}(n.priceFormat),e.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(n);const r=Wn(ur(r_),ur(e.defaultOptions),n),i=e.$g,o=new pf(this.Hf.Qt(),e.type,r,i,e.qg);this.Hf.Qt().Ic(o,s);const a=new F7(o,this,this,this,this.Wg,l=>this.Kg(l));return this.Ag.set(a,o),this.zg.set(o,a),a}jg(e){const n=this.Hf.Qt();n.Vc(e.Et._u,e.Et.tg,e.Et.ig),e.Oo.forEach((s,r)=>r.ht(s.se,s.Qw)),n.Et().K_(),n.vu()}Xg(e){return Dn(this.zg.get(e))}Hg(e){const n=new Map;e.Dw.forEach((r,i)=>{const o=i.Rr(),a=Rd(o)(r);if(o!=="Custom")Jt(d7(a));else{const l=i.fa();Jt(!l||l(a)===!1)}n.set(this.Xg(i),a)});const s=e.Rw!==void 0&&this.zg.has(e.Rw)?this.Xg(e.Rw):void 0;return{time:e.yw,logical:e.Re,point:e.kw,paneIndex:e.Tw,hoveredSeries:s,hoveredObjectId:e.Vw,seriesData:n,sourceEvent:e.Bw}}Kg(e){let n=this.qu.get(e);return n||(n=new L7(this.Hf,s=>this.Xg(s),e,this),this.qu.set(e,n)),n}}function $7(t){if(ru(t)){const e=document.getElementById(t);return Jt(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function U7(t,e,n){const s=$7(t),r=new B7(s,e,n);return e.setOptions(r.options()),r}function W7(t,e){return U7(t,new uw,uw.ld(e))}({...r_});const C_=S.forwardRef(({initialData:t=[],symbol:e="BTC/USDC",height:n=500,showVolume:s=!0},r)=>{const i=S.useRef(null),o=S.useRef(null),a=S.useRef(null),l=S.useRef(null),[c,u]=S.useState(null),d=b=>typeof b=="number"?b:Ee(b),f=b=>({time:Math.floor((b.open_time||b.close_time||Date.now())/1e3),open:d(b.open),high:d(b.high),low:d(b.low),close:d(b.close)}),g=b=>{if(!b.volume)return null;const w=Math.floor((b.open_time||b.close_time||Date.now())/1e3),p=typeof b.volume=="number"?b.volume:Ee(b.volume),y=d(b.close),x=d(b.open),v=y>=x;return{time:w,value:p,color:v?"#26a69a80":"#ef535080"}},m=b=>{const w=f(b),p=s?g(b):null;a.current&&(a.current.update(w),u(w.close)),s&&l.current&&p&&l.current.update(p)};return S.useImperativeHandle(r,()=>({updateChart:m})),S.useEffect(()=>{if(!i.current)return;const b=W7(i.current,{width:i.current.clientWidth,height:n,layout:{background:{color:"#1e1e1e"},textColor:"#d1d4dc"},grid:{vertLines:{color:"#2a2e39"},horzLines:{color:"#2a2e39"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2e39"},timeScale:{borderColor:"#2a2e39",timeVisible:!0,secondsVisible:!1}}),w=b.addSeries("Candlestick",{upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"});let p=null;s&&(p=b.addSeries("Histogram",{color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""})),t.length>0&&(w.setData(t),c===null&&t.length>0&&u(t[t.length-1].close)),o.current=b,a.current=w,l.current=p;const y=()=>{i.current&&o.current&&o.current.applyOptions({width:i.current.clientWidth})};return window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y),b.remove()}},[n,s]),S.useEffect(()=>{a.current&&t.length>0&&(a.current.setData(t),t.length>0&&u(t[t.length-1].close))},[t]),h.jsxs("div",{style:{position:"relative",width:"100%"},children:[h.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"1.2rem",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:h.jsxs("span",{children:[e," Live Kline Chart",c!==null&&` - Current: $${c.toFixed(2)}`]})}),h.jsx("div",{ref:i,style:{position:"relative",width:"100%"}})]})});C_.displayName="KlineChart";function H7(){var Yt,ct,gs,mn;const[t,e]=S.useState(cf),[n,s]=S.useState(()=>localStorage.getItem("authToken")||""),[r,i]=S.useState(xx),[o,a]=S.useState(""),[l,c]=S.useState("BTC/USDC"),[u,d]=S.useState("1m"),[f,g]=S.useState("300"),[m,b]=S.useState(!1),[w,p]=S.useState([]),[y,x]=S.useState([]),[v,k]=S.useState(new Set),[C,E]=S.useState([]),[T,P]=S.useState(!1),_=S.useRef(null),D=S.useRef(0),A=su,W=S.useRef(null),[H,O]=S.useState([]),{walletAddress:R,authToken:F}=nu(),{markets:L}=qa({baseURL:A,sessionToken:"",autoFetchMarkets:!0}),z=L.length>0?(((Yt=L.find(te=>te.active))==null?void 0:Yt.market_id)??L[0].market_id)||(((gs=(ct=L.find(te=>te.active))==null?void 0:ct.id)==null?void 0:gs.toString())??((mn=L[0].id)==null?void 0:mn.toString())??""):null;S.useEffect(()=>{z&&!o&&a(z)},[z]),S.useEffect(()=>{F&&s(F)},[F]),S.useEffect(()=>{const te=U=>{U.key==="authToken"&&U.newValue&&s(U.newValue)};window.addEventListener("storage",te);const Q=setInterval(()=>{const U=localStorage.getItem("authToken");U&&U!==n&&s(U)},1e3);return()=>{window.removeEventListener("storage",te),clearInterval(Q)}},[n]),S.useEffect(()=>{n&&n.trim()!==""&&localStorage.setItem("authToken",n)},[n]);const I=(te,Q,U,Me,it)=>{const Oe={id:D.current++,timestamp:Date.now(),channel:te,data:Q,type:U,step:it};Me?x(Gt=>[...Gt.slice(-99),Oe]):p(Gt=>[...Gt.slice(-99),Oe])},K=(te,Q,U,Me)=>{E(it=>[...it,{step:te,status:Q,message:U,timestamp:Date.now(),details:Me}])},j=()=>{E([])},M=async()=>{var it;if((it=_.current)!=null&&it.isConnected()){I("connection","Already connected","info",!1);return}if(P(!0),j(),K("1","in-progress","Validating configuration..."),I("connection","Starting connection process...","debug",!1,"Step 1: Validation"),!t||!t.trim()){K("1","error","WebSocket URL is required"),I("connection","Error: WebSocket URL is required","error",!1,"Step 1: Validation"),P(!1);return}try{const Oe=new URL(t);if(Oe.protocol!=="ws:"&&Oe.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol");K("1","success",`URL format valid: ${t}`),I("connection",`URL validated: ${t}`,"debug",!1,"Step 1: Validation")}catch(Oe){K("1","error",`Invalid URL format: ${Oe.message}`),I("connection",`Error: Invalid URL format - ${Oe.message}`,"error",!1,"Step 1: Validation"),P(!1);return}K("2","in-progress","Building connection URL with parameters...");const te=[];n&&te.push(`token=${encodeURIComponent(n)}`),R&&te.push(`wallet=${encodeURIComponent(R)}`),r&&te.push(`device_id=${encodeURIComponent(r)}`);const Q=t.includes("?")?"&":"?",U=te.length>0?`${t}${Q}${te.join("&")}`:t;if(K("2","success",`Connection URL: ${U}`),I("connection",`Connection URL: ${U}`,"debug",!1,"Step 2: URL Construction"),te.length>0?I("connection",`Query parameters: ${te.join(", ")}`,"debug",!1,"Step 2: URL Construction"):I("connection","No query parameters (authToken, walletAddress, deviceID)","warning",!1,"Step 2: URL Construction"),K("3","in-progress","Cleaning up existing connection..."),_.current)try{_.current.disconnect(),K("3","success","Previous connection cleaned up"),I("connection","Previous connection cleaned up","debug",!1,"Step 3: Cleanup")}catch{K("3","success","No previous connection to clean up"),I("connection","No previous connection found","debug",!1,"Step 3: Cleanup")}else K("3","success","No previous connection to clean up");K("4","in-progress","Creating SubscriptionClient instance...");try{_.current=new co({url:t,authToken:n||void 0,walletAddress:R||void 0,deviceID:r||void 0}),K("4","success","SubscriptionClient created"),I("connection","SubscriptionClient instance created","debug",!1,"Step 4: Client Creation"),I("connection",`Config: ${JSON.stringify({url:t,hasToken:!!n,hasWallet:!!R,deviceID:r},null,2)}`,"debug",!1,"Step 4: Client Creation")}catch(Oe){K("4","error",`Failed to create client: ${Oe.message}`),I("connection",`Error creating client: ${Oe.message}`,"error",!1,"Step 4: Client Creation"),P(!1);return}K("5","in-progress","Initiating WebSocket connection..."),I("connection","Initiating WebSocket handshake...","debug",!1,"Step 5: Connection"),I("connection","Browser will attempt to upgrade HTTP connection to WebSocket","debug",!1,"Step 5: Connection");const Me=Date.now();try{await _.current.connect();const Oe=Date.now()-Me,Gt=_.current.isConnected(),je=_.current.getState();I("connection",`Connection attempt completed in ${Oe}ms`,"debug",!1,"Step 5: Connection"),I("connection",`Connection state: ${je}`,"debug",!1,"Step 5: Connection"),b(Gt),Gt?(K("5","success",`WebSocket connected successfully (${Oe}ms)`),I("connection"," WebSocket connected successfully!","success",!1,"Step 5: Connection"),I("connection",`Connection established in ${Oe}ms`,"success",!1,"Step 5: Connection")):(K("5","error","Connection completed but state is not connected"),I("connection"," Connection attempt completed but state is not connected","error",!1,"Step 5: Connection"),I("connection",`Current state: ${je}`,"error",!1,"Step 5: Connection"))}catch(Oe){const Gt=Date.now()-Me,je=Oe.message||String(Oe);let fe="";je.includes("abnormal closure")?fe=`The server closed the connection abnormally. Possible causes:
- Server is not running
- Wrong URL or port
- Network connectivity issues
- Firewall blocking the connection`:je.includes("protocol error")?fe="WebSocket protocol error. The server may not support WebSocket connections.":je.includes("policy violation")?fe="Connection closed due to policy violation. Check authentication requirements.":je.includes("server error")?fe="Server returned an error. Check server logs for details.":(je.includes("Unauthorized")||je.includes("401"))&&(fe=`Authentication failed. Possible causes:
- Missing or invalid JWT token (if server requires authentication)
- Token expired
- Server is in production mode requiring JWT authentication
Note: If server uses JWT auth, you must provide a valid token in the authToken field.`),K("5","error",`Connection failed: ${je}`),I("connection",` Connection error: ${je}`,"error",!1,"Step 5: Connection"),fe&&I("connection",`Error details:
${fe}`,"error",!1,"Step 5: Connection"),I("connection",`Connection failed after ${Gt}ms`,"error",!1,"Step 5: Connection"),I("connection",`Full error: ${JSON.stringify(Oe,Object.getOwnPropertyNames(Oe),2)}`,"error",!1,"Step 5: Connection"),b(!1)}finally{P(!1)}},$=()=>{if(_.current)try{_.current.disconnect(),b(!1),k(new Set),I("connection","WebSocket disconnected","info",!1)}catch(te){I("connection",`Disconnect error: ${te.message}`,"error",!1)}},q=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("orderbook","Not connected. Please connect first.","error",!1);return}if(!o){I("orderbook","Please select a market first","error",!1);return}const te=U=>{I("orderbook",U,"success",!1)};try{_.current.subscribeOrderbook(o,te,!0),k(U=>new Set([...U,"orderbook"])),I("orderbook",`Subscribed to orderbook for market ${o}`,"success",!1)}catch(U){I("orderbook",`Subscription error: ${U.message}`,"error",!1)}},X=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&o)try{_.current.unsubscribeOrderbook(o),k(Q=>{const U=new Set(Q);return U.delete("orderbook"),U}),I("orderbook","Unsubscribed from orderbook","info",!1)}catch(Q){I("orderbook",`Unsubscribe error: ${Q.message}`,"error",!1)}},G=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("trades","Not connected. Please connect first.","error",!1);return}if(!o){I("trades","Please select a market first","error",!1);return}const te=U=>{I("trades",U,"success",!1)};try{_.current.subscribeTrades(o,te),k(U=>new Set([...U,"trades"])),I("trades",`Subscribed to trades for market ${o}`,"success",!1)}catch(U){I("trades",`Subscription error: ${U.message}`,"error",!1)}},ee=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&o)try{_.current.unsubscribeTrades(o),k(Q=>{const U=new Set(Q);return U.delete("trades"),U}),I("trades","Unsubscribed from trades","info",!1)}catch(Q){I("trades",`Unsubscribe error: ${Q.message}`,"error",!1)}},se=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("ticker","Not connected. Please connect first.","error",!1);return}if(!o){I("ticker","Please select a market first","error",!1);return}const te=U=>{I("ticker",U,"success",!1)};try{_.current.subscribeTicker(o,te),k(U=>new Set([...U,"ticker"])),I("ticker",`Subscribed to ticker for market ${o}`,"success",!1)}catch(U){I("ticker",`Subscription error: ${U.message}`,"error",!1)}},be=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&o)try{_.current.unsubscribeTicker(o),k(Q=>{const U=new Set(Q);return U.delete("ticker"),U}),I("ticker","Unsubscribed from ticker","info",!1)}catch(Q){I("ticker",`Unsubscribe error: ${Q.message}`,"error",!1)}},He=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("last_price","Not connected. Please connect first.","error",!1);return}if(!o){I("last_price","Please select a market first","error",!1);return}const te=U=>{I("last_price",U,"success",!1)};try{_.current.subscribeLastPrice(o,te,!0),k(U=>new Set([...U,"last_price"])),I("last_price",`Subscribed to last price for market ${o}`,"success",!1)}catch(U){I("last_price",`Subscription error: ${U.message}`,"error",!1)}},Pe=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&o)try{_.current.unsubscribeLastPrice(o),k(Q=>{const U=new Set(Q);return U.delete("last_price"),U}),I("last_price","Unsubscribed from last price","info",!1)}catch(Q){I("last_price",`Unsubscribe error: ${Q.message}`,"error",!1)}},_e=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("user_updates","Not connected. Please connect first.","error",!0);return}if(!R){I("user_updates","Wallet address required for position updates (positions channel)","error",!0);return}const te=U=>{I("user_updates",U,"success",!0)};try{_.current.subscribeUserUpdates(te),k(U=>new Set([...U,"user_updates"])),I("user_updates","Subscribed to user updates (positions, orders, etc.)","success",!0)}catch(U){I("user_updates",`Subscription error: ${U.message}`,"error",!0)}},Le=()=>{var te;if((te=_.current)!=null&&te.isConnected())try{_.current.unsubscribeUserUpdates(),k(Q=>{const U=new Set(Q);return U.delete("user_updates"),U}),I("user_updates","Unsubscribed from user updates","info",!0)}catch(Q){I("user_updates",`Unsubscribe error: ${Q.message}`,"error",!0)}},wt=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("funding_rate","Not connected. Please connect first.","error",!1);return}if(!l){I("funding_rate","Please enter a symbol first","error",!1);return}const te=U=>{I("funding_rate",U,"success",!1)};try{_.current.subscribeFundingRate(l,te),k(U=>new Set([...U,"funding_rate"])),I("funding_rate",`Subscribed to funding rate for ${l}`,"success",!1)}catch(U){I("funding_rate",`Subscription error: ${U.message}`,"error",!1)}},N=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&l)try{_.current.unsubscribeFundingRate(l),k(Q=>{const U=new Set(Q);return U.delete("funding_rate"),U}),I("funding_rate","Unsubscribed from funding rate","info",!1)}catch(Q){I("funding_rate",`Unsubscribe error: ${Q.message}`,"error",!1)}},J=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("buckets","Not connected. Please connect first.","error",!0);return}if(!R){I("buckets","Wallet address required for buckets subscription","error",!0);return}const te=U=>{I("buckets",U,"success",!0)};try{_.current.subscribeBuckets(te),k(U=>new Set([...U,"buckets"])),I("buckets","Subscribed to buckets","success",!0)}catch(U){I("buckets",`Subscription error: ${U.message}`,"error",!0)}},oe=()=>{var te;if((te=_.current)!=null&&te.isConnected())try{_.current.unsubscribeBuckets(),k(Q=>{const U=new Set(Q);return U.delete("buckets"),U}),I("buckets","Unsubscribed from buckets","info",!0)}catch(Q){I("buckets",`Unsubscribe error: ${Q.message}`,"error",!0)}},de=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("deviation","Not connected. Please connect first.","error",!1);return}if(!l){I("deviation","Please enter a symbol first","error",!1);return}const te=U=>{I("deviation",U,"success",!1)};try{_.current.subscribeDeviation(l,te),k(U=>new Set([...U,"deviation"])),I("deviation",`Subscribed to deviation for ${l}`,"success",!1)}catch(U){I("deviation",`Subscription error: ${U.message}`,"error",!1)}},we=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&l)try{_.current.unsubscribeDeviation(l),k(Q=>{const U=new Set(Q);return U.delete("deviation"),U}),I("deviation","Unsubscribed from deviation","info",!1)}catch(Q){I("deviation",`Unsubscribe error: ${Q.message}`,"error",!1)}},ve=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("index_price","Not connected. Please connect first.","error",!1);return}if(!l){I("index_price","Please enter a symbol first","error",!1);return}const te=U=>{I("index_price",U,"success",!1)};try{_.current.subscribeIndexPrice(l,te),k(U=>new Set([...U,"index_price"])),I("index_price",`Subscribed to index price for ${l}`,"success",!1)}catch(U){I("index_price",`Subscription error: ${U.message}`,"error",!1)}},B=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&l)try{_.current.unsubscribeIndexPrice(l),k(Q=>{const U=new Set(Q);return U.delete("index_price"),U}),I("index_price","Unsubscribed from index price","info",!1)}catch(Q){I("index_price",`Unsubscribe error: ${Q.message}`,"error",!1)}},le=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("kline","Not connected. Please connect first.","error",!1);return}if(!o){I("kline","Please select a market first","error",!1);return}if(!u){I("kline","Please select an interval first","error",!1);return}const te=U=>{if(I("kline",U,"success",!1),W.current&&U){const Me={open_time:U.open_time||U.timestamp||Date.now(),close_time:U.close_time,open:U.open,high:U.high,low:U.low,close:U.close,volume:U.volume};W.current.updateChart(Me);const Oe={time:Math.floor((Me.open_time||Date.now())/1e3),open:typeof Me.open=="string"?Ee(Me.open):Me.open,high:typeof Me.high=="string"?Ee(Me.high):Me.high,low:typeof Me.low=="string"?Ee(Me.low):Me.low,close:typeof Me.close=="string"?Ee(Me.close):Me.close};O(Gt=>{const je=[...Gt];return je.length===0||je[je.length-1].time!==Oe.time?je.push(Oe):je[je.length-1]=Oe,je})}};try{_.current.subscribeKline(o,u,te),k(U=>new Set([...U,"kline"])),I("kline",`Subscribed to kline for market ${o} with interval ${u}`,"success",!1)}catch(U){I("kline",`Subscription error: ${U.message}`,"error",!1)}},V=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&!(!o||!u))try{_.current.unsubscribeKline(o,u),k(Q=>{const U=new Set(Q);return U.delete("kline"),U}),O([]),I("kline","Unsubscribed from kline","info",!1)}catch(Q){I("kline",`Unsubscribe error: ${Q.message}`,"error",!1)}},ce=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("mark_price","Not connected. Please connect first.","error",!1);return}if(!l){I("mark_price","Please enter a symbol first","error",!1);return}const te=U=>{I("mark_price",U,"success",!1)};try{_.current.subscribeMarkPrice(l,te),k(U=>new Set([...U,"mark_price"])),I("mark_price",`Subscribed to mark price for ${l}`,"success",!1)}catch(U){I("mark_price",`Subscription error: ${U.message}`,"error",!1)}},re=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&l)try{_.current.unsubscribeMarkPrice(l),k(Q=>{const U=new Set(Q);return U.delete("mark_price"),U}),I("mark_price","Unsubscribed from mark price","info",!1)}catch(Q){I("mark_price",`Unsubscribe error: ${Q.message}`,"error",!1)}},Y=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("price_feed","Not connected. Please connect first.","error",!1);return}if(!l){I("price_feed","Please enter a symbol first","error",!1);return}const te=U=>{I("price_feed",U,"success",!1)};try{_.current.subscribePriceFeed(l,te),k(U=>new Set([...U,"price_feed"])),I("price_feed",`Subscribed to price feed for ${l}`,"success",!1)}catch(U){I("price_feed",`Subscription error: ${U.message}`,"error",!1)}},he=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&l)try{_.current.unsubscribePriceFeed(l),k(Q=>{const U=new Set(Q);return U.delete("price_feed"),U}),I("price_feed","Unsubscribed from price feed","info",!1)}catch(Q){I("price_feed",`Unsubscribe error: ${Q.message}`,"error",!1)}},Te=()=>{var Q;if(!((Q=_.current)!=null&&Q.isConnected())){I("twap","Not connected. Please connect first.","error",!1);return}if(!l){I("twap","Please enter a symbol first","error",!1);return}if(!f||isNaN(Number(f))||Number(f)<=0){I("twap","Please enter a valid window size (positive number in seconds)","error",!1);return}const te=U=>{I("twap",U,"success",!1)};try{_.current.subscribeTWAP(l,Number(f),te),k(U=>new Set([...U,"twap"])),I("twap",`Subscribed to TWAP for ${l} with window size ${f}s`,"success",!1)}catch(U){I("twap",`Subscription error: ${U.message}`,"error",!1)}},ye=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&!(!l||!f))try{_.current.unsubscribeTWAP(l,Number(f)),k(Q=>{const U=new Set(Q);return U.delete("twap"),U}),I("twap","Unsubscribed from TWAP","info",!1)}catch(Q){I("twap",`Unsubscribe error: ${Q.message}`,"error",!1)}},Ce=()=>{if(!_.current){I("multi_feed","SubscriptionClient not initialized. Please connect first.","error",!1);return}if(!_.current.isConnected()){I("multi_feed","Not connected. Please connect first.","error",!1);return}if(!o){I("multi_feed","Please select a market first","error",!1);return}if(!l){I("multi_feed","Please enter a symbol first","error",!1);return}if(typeof _.current.subscribeMultiFeed!="function"){I("multi_feed","subscribeMultiFeed method not available. Please check SDK version.","error",!1),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(_.current)));return}const te=Q=>{const U=Q.sub_channel||"unknown";I(`multi_feed:${U}`,Q,"success",U==="balances"||U==="buckets"||U==="orders"||U==="positions")};try{_.current.subscribeMultiFeed(o,l,te,u||"1m"),k(Q=>new Set([...Q,"multi_feed"])),I("multi_feed",`Subscribed to multi-feed for market ${o}, symbol ${l}`,"success",!1)}catch(Q){I("multi_feed",`Subscription error: ${Q.message}`,"error",!1)}},Ue=()=>{var te;if((te=_.current)!=null&&te.isConnected()&&!(!o||!l))try{_.current.unsubscribeMultiFeed(o,l),k(Q=>{const U=new Set(Q);return U.delete("multi_feed"),U}),I("multi_feed","Unsubscribed from multi-feed","info",!1)}catch(Q){I("multi_feed",`Unsubscribe error: ${Q.message}`,"error",!1)}},Ze=()=>{if(!_.current){I("balances","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!_.current.isConnected()){I("balances","Not connected. Please connect first.","error",!0);return}if(!R){I("balances","Wallet address required for balances subscription","error",!0);return}if(typeof _.current.subscribeBalances!="function"){I("balances","subscribeBalances method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(_.current)));return}const te=Q=>{I("balances",Q,"success",!0)};try{_.current.subscribeBalances(te),k(Q=>new Set([...Q,"balances"])),I("balances","Subscribed to balances","success",!0)}catch(Q){I("balances",`Subscription error: ${Q.message}`,"error",!0)}},lt=()=>{if(_.current&&_.current.isConnected()){if(typeof _.current.unsubscribeBalances!="function"){I("balances","unsubscribeBalances method not available. Please check SDK version.","error",!0);return}try{_.current.unsubscribeBalances(),k(te=>{const Q=new Set(te);return Q.delete("balances"),Q}),I("balances","Unsubscribed from balances","info",!0)}catch(te){I("balances",`Unsubscribe error: ${te.message}`,"error",!0)}}},_t=()=>{if(!_.current){I("orders","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!_.current.isConnected()){I("orders","Not connected. Please connect first.","error",!0);return}if(!R){I("orders","Wallet address required for orders subscription","error",!0);return}if(typeof _.current.subscribeOrders!="function"){I("orders","subscribeOrders method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(_.current)));return}const te=Q=>{I("orders",Q,"success",!0)};try{_.current.subscribeOrders(te),k(Q=>new Set([...Q,"orders"])),I("orders","Subscribed to orders","success",!0)}catch(Q){I("orders",`Subscription error: ${Q.message}`,"error",!0)}},Vt=()=>{if(_.current&&_.current.isConnected()){if(typeof _.current.unsubscribeOrders!="function"){I("orders","unsubscribeOrders method not available. Please check SDK version.","error",!0);return}try{_.current.unsubscribeOrders(),k(te=>{const Q=new Set(te);return Q.delete("orders"),Q}),I("orders","Unsubscribed from orders","info",!0)}catch(te){I("orders",`Unsubscribe error: ${te.message}`,"error",!0)}}},Ft=te=>{te?x([]):p([])};return S.useEffect(()=>()=>{if(_.current)try{_.current.disconnect()}catch{}},[]),h.jsxs("div",{className:"ws-test-page",children:[h.jsx("h1",{children:"WebSocket Test Page"}),h.jsx("p",{children:"Test WebSocket subscriptions for public and private channels"}),h.jsx(RM,{steps:C}),h.jsx(OM,{wsURL:t,onWsURLChange:e,marketId:o,onMarketIdChange:a,markets:L,symbol:l,onSymbolChange:c,klineInterval:u,onKlineIntervalChange:d,twapWindowSize:f,onTwapWindowSizeChange:g,authToken:n,onAuthTokenChange:s,walletAddress:R,deviceID:r,onDeviceIDChange:i,isConnected:m,isConnecting:T,onConnect:M,onDisconnect:$}),h.jsxs("div",{className:"ws-test-page-layout",children:[h.jsxs(Dv,{title:"WebSocket Public",isPrivate:!1,messages:w,onClearMessages:()=>Ft(!1),children:[h.jsxs("div",{className:"channel-buttons-row",children:[h.jsx(ln,{channel:"orderbook",isSubscribed:v.has("orderbook"),isConnected:m,subscribeLabel:"Subscribe Orderbook",unsubscribeLabel:"Unsubscribe Orderbook",onSubscribe:q,onUnsubscribe:X}),h.jsx(ln,{channel:"trades",isSubscribed:v.has("trades"),isConnected:m,subscribeLabel:"Subscribe Trades",unsubscribeLabel:"Unsubscribe Trades",onSubscribe:G,onUnsubscribe:ee}),h.jsx(ln,{channel:"ticker",isSubscribed:v.has("ticker"),isConnected:m,subscribeLabel:"Subscribe Ticker",unsubscribeLabel:"Unsubscribe Ticker",onSubscribe:se,onUnsubscribe:be}),h.jsx(ln,{channel:"last_price",isSubscribed:v.has("last_price"),isConnected:m,subscribeLabel:"Subscribe Last Price",unsubscribeLabel:"Unsubscribe Last Price",onSubscribe:He,onUnsubscribe:Pe}),h.jsx(ln,{channel:"funding_rate",isSubscribed:v.has("funding_rate"),isConnected:m,subscribeLabel:"Subscribe Funding Rate",unsubscribeLabel:"Unsubscribe Funding Rate",onSubscribe:wt,onUnsubscribe:N}),h.jsx(ln,{channel:"deviation",isSubscribed:v.has("deviation"),isConnected:m,subscribeLabel:"Subscribe Deviation",unsubscribeLabel:"Unsubscribe Deviation",onSubscribe:de,onUnsubscribe:we}),h.jsx(ln,{channel:"index_price",isSubscribed:v.has("index_price"),isConnected:m,subscribeLabel:"Subscribe Index Price",unsubscribeLabel:"Unsubscribe Index Price",onSubscribe:ve,onUnsubscribe:B}),h.jsx(ln,{channel:"kline",isSubscribed:v.has("kline"),isConnected:m,subscribeLabel:"Subscribe Kline",unsubscribeLabel:"Unsubscribe Kline",onSubscribe:le,onUnsubscribe:V})]}),v.has("kline")&&h.jsx("div",{style:{marginTop:"20px",marginBottom:"20px"},children:h.jsx(C_,{ref:W,initialData:H,symbol:l||"BTC/USDC",height:500,showVolume:!0})}),h.jsxs("div",{className:"channel-buttons-row",children:[h.jsx(ln,{channel:"mark_price",isSubscribed:v.has("mark_price"),isConnected:m,subscribeLabel:"Subscribe Mark Price",unsubscribeLabel:"Unsubscribe Mark Price",onSubscribe:ce,onUnsubscribe:re}),h.jsx(ln,{channel:"price_feed",isSubscribed:v.has("price_feed"),isConnected:m,subscribeLabel:"Subscribe Price Feed",unsubscribeLabel:"Unsubscribe Price Feed",onSubscribe:Y,onUnsubscribe:he}),h.jsx(ln,{channel:"twap",isSubscribed:v.has("twap"),isConnected:m,subscribeLabel:"Subscribe TWAP",unsubscribeLabel:"Unsubscribe TWAP",onSubscribe:Te,onUnsubscribe:ye}),h.jsx(ln,{channel:"multi_feed",isSubscribed:v.has("multi_feed"),isConnected:m,subscribeLabel:"Subscribe Multi-Feed",unsubscribeLabel:"Unsubscribe Multi-Feed",onSubscribe:Ce,onUnsubscribe:Ue})]}),h.jsx("small",{className:"private-note-text-block",style:{marginTop:"10px"},children:"Multi-Feed: Unified channel streaming all sub-channels (orderbook, trades, positions, balances, orders, buckets, etc.) Requires market ID and symbol. Authenticated sub-channels (balances, orders, positions, buckets) require wallet address."})]}),h.jsxs(Dv,{title:"WebSocket Private",isPrivate:!0,messages:y,onClearMessages:()=>Ft(!0),children:[h.jsx(ln,{channel:"user_updates",isSubscribed:v.has("user_updates"),isConnected:m,disabled:!R,subscribeLabel:"Subscribe User Updates",unsubscribeLabel:"Unsubscribe User Updates",onSubscribe:_e,onUnsubscribe:Le,variant:"private"}),h.jsx("small",{className:"private-note-text",children:"Position updates (positions channel): Requires wallet address. Returns user positions."}),h.jsx(ln,{channel:"buckets",isSubscribed:v.has("buckets"),isConnected:m,disabled:!R,subscribeLabel:"Subscribe Buckets",unsubscribeLabel:"Unsubscribe Buckets",onSubscribe:J,onUnsubscribe:oe,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Buckets: User's margin buckets (requires wallet address)"}),h.jsx(ln,{channel:"balances",isSubscribed:v.has("balances"),isConnected:m,disabled:!R,subscribeLabel:"Subscribe Balances",unsubscribeLabel:"Unsubscribe Balances",onSubscribe:Ze,onUnsubscribe:lt,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Balances: User's spot balances (USDC, MORM, BTC, etc.) - requires wallet address"}),h.jsx(ln,{channel:"orders",isSubscribed:v.has("orders"),isConnected:m,disabled:!R,subscribeLabel:"Subscribe Orders",unsubscribeLabel:"Unsubscribe Orders",onSubscribe:_t,onUnsubscribe:Vt,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Orders: User's open orders - requires wallet address"})]})]})]})}function kx({top:t,left:e,width:n,height:s}){const r=`translate(${e}px,${t}px)`;return{transform:r,WebkitTransform:r,MozTransform:r,msTransform:r,OTransform:r,width:`${n}px`,height:`${s}px`,position:"absolute"}}function __({top:t,left:e,width:n,height:s}){return{top:`${t}px`,left:`${e}px`,width:`${n}px`,height:`${s}px`,position:"absolute"}}function Tw(t){return t*100+"%"}function V7(t,e,n,s){return t+n>s?e:n}function E_(t,e,n){return t<0?e:n}function Y7(t){return Math.max(0,t)}function vh(t){return Math.max(0,t)}var Cx=(t,e,n)=>{const{left:s,height:r,width:i}=e,o=t.top-(r-t.height);return{left:s,width:i,height:E_(o,t.height,r),top:vh(o)}},_x=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{top:s,height:i,width:V7(t.left,t.width,o,n),left:Y7(r)}},Ex=(t,e,n)=>{const{top:s,height:r,width:i}=e,o=t.left+t.width-i;return o<0?{height:r,width:t.left+t.width,top:vh(s),left:0}:{height:r,width:i,top:vh(s),left:o}},Px=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{width:o,left:r,height:E_(s,t.height,i),top:vh(s)}},G7=(t,e,n)=>Cx(t,_x(t,e,n)),K7=(t,e,n)=>Cx(t,Ex(t,e)),q7=(t,e,n)=>Px(t,_x(t,e,n)),X7=(t,e,n)=>Px(t,Ex(t,e)),Q7={n:Cx,ne:G7,e:_x,se:q7,s:Px,sw:X7,w:Ex,nw:K7};function J7(t,e,n,s){const r=Q7[t];return r?r(e,{...e,...n},s):n}var P_={type:"transform",scale:1,calcStyle(t){return kx(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}},Z7={type:"absolute",scale:1,calcStyle(t){return __(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}};function eO(t){return{type:"transform",scale:t,calcStyle(e){return kx(e)},calcDragPosition(e,n,s,r){return{left:(e-s)/t,top:(n-r)/t}}}}var tO=P_,nO={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},sO={enabled:!0,bounded:!1,threshold:3},rO={enabled:!0,handles:["se"]},iO={enabled:!1,defaultItem:{w:1,h:1}};function mf(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function Cs(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&mf(s,e))return s}}function T_(t,e){return t.filter(n=>mf(n,e))}function I_(t,e){return e==="horizontal"?R_(t):e==="vertical"?M_(t):[...t]}function M_(t){return[...t].sort((e,n)=>e.y!==n.y?e.y-n.y:e.x-n.x)}function R_(t){return[...t].sort((e,n)=>e.x!==n.x?e.x-n.x:e.y-n.y)}function Xa(t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0){const r=s.y+s.h;r>e&&(e=r)}}return e}function Ci(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&s.i===e)return s}}function Tx(t){return t.filter(e=>e.static===!0)}function ci(t){return{i:t.i,x:t.x,y:t.y,w:t.w,h:t.h,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function Is(t){const e=new Array(t.length);for(let n=0;n<t.length;n++){const s=t[n];s!==void 0&&(e[n]=ci(s))}return e}function oO(t,e){const n=new Array(t.length);for(let s=0;s<t.length;s++){const r=t[s];r!==void 0&&(e.i===r.i?n[s]=e:n[s]=r)}return n}function aO(t,e,n){let s=Ci(t,e);return s?(s=n(ci(s)),[oO(t,s),s]):[[...t],null]}function Ix(t,e){const n=Tx(t);for(let s=0;s<t.length;s++){const r=t[s];if(r!==void 0)if(r.x+r.w>e.cols&&(r.x=e.cols-r.w),r.x<0&&(r.x=0,r.w=e.cols),!r.static)n.push(r);else for(;Cs(n,r);)r.y++}return t}function Di(t,e,n,s,r,i,o,a,l){if(e.static&&e.isDraggable!==!0)return[...t];if(e.y===s&&e.x===n)return[...t];const c=e.x,u=e.y;typeof n=="number"&&(e.x=n),typeof s=="number"&&(e.y=s),e.moved=!0;let d=I_(t,o);(o==="vertical"&&typeof s=="number"?u>=s:o==="horizontal"&&typeof n=="number"?c>=n:!1)&&(d=d.reverse());const g=T_(d,e),m=g.length>0;if(m&&l)return Is(t);if(m&&i)return e.x=c,e.y=u,e.moved=!1,t;let b=[...t];for(let w=0;w<g.length;w++){const p=g[w];p!==void 0&&(p.moved||(p.static?b=Iw(b,p,e,r,o):b=Iw(b,e,p,r,o)))}return b}function Iw(t,e,n,s,r,i){const o=r==="horizontal",a=r==="vertical",l=e.static;if(s){s=!1;const d={x:o?Math.max(e.x-n.w,0):n.x,y:a?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},f=Cs(t,d),g=f!==void 0&&f.y+f.h>e.y,m=f!==void 0&&e.x+e.w>f.x;if(!f)return Di(t,n,o?d.x:void 0,a?d.y:void 0,s,l,r);if(g&&a)return Di(t,n,void 0,n.y+1,s,l,r);if(g&&r===null)return e.y=n.y,n.y=n.y+n.h,[...t];if(m&&o)return Di(t,e,n.x,void 0,s,l,r)}const c=o?n.x+1:void 0,u=a?n.y+1:void 0;return c===void 0&&u===void 0?[...t]:Di(t,n,c,u,s,l,r)}function lO(t){return t.filter(e=>e.static)}var cO={x:"w",y:"h"};function Rg(t,e,n,s){const r=cO[s];e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;mf(e,a)&&Rg(t,a,n+e[r],s)}}e[s]=n}function uO(t,e,n,s,r,i,o){const a=n==="vertical",l=n==="horizontal";if(a)for(typeof o=="number"?e.y=Math.min(o,e.y):e.y=Math.min(Xa(t),e.y);e.y>0&&!Cs(t,e);)e.y--;else if(l)for(;e.x>0&&!Cs(t,e);)e.x--;let c;for(;(c=Cs(t,e))!==void 0&&!(n===null&&i);)if(l?Rg(r,e,c.x+c.w,"x"):Rg(r,e,c.y+c.h,"y"),l&&e.x+e.w>s)for(e.x=s-e.w,e.y++;e.x>0&&!Cs(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function ar(t,e,n,s){const r=lO(t);let i=Xa(r);const o=I_(t,e),a=new Array(t.length);for(let l=0;l<o.length;l++){const c=o[l];if(c===void 0)continue;let u=ci(c);u.static||(u=uO(r,u,e,n,o,s,i),i=Math.max(i,u.y+u.h),r.push(u));const d=t.indexOf(c);a[d]=u,u.moved=!1}return a}function Mx(t,e,n,s){const r=s==="x"?"w":"h";e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;mf(e,a)&&Mx(t,a,n+e[r],s)}}e[s]=n}function dO(t,e,n,s){for(e.y=Math.min(s,e.y);e.y>0&&!Cs(t,e);)e.y--;let r;for(;(r=Cs(t,e))!==void 0;)Mx(n,e,r.y+r.h,"y");return e.y=Math.max(e.y,0),e}function hO(t,e,n,s){for(;e.x>0&&!Cs(t,e);)e.x--;let r;for(;(r=Cs(t,e))!==void 0;)if(Mx(s,e,r.x+r.w,"x"),e.x+e.w>n)for(e.x=n-e.w,e.y++;e.x>0&&!Cs(t,e);)e.x--;return e.x=Math.max(e.x,0),e}var O_={type:"vertical",allowOverlap:!1,compact(t,e){const n=Tx(t);let s=Xa(n);const r=M_(t),i=new Array(t.length);for(let o=0;o<r.length;o++){const a=r[o];if(a===void 0)continue;let l=ci(a);l.static||(l=dO(n,l,r,s),s=Math.max(s,l.y+l.h),n.push(l));const c=t.indexOf(a);i[c]=l,l.moved=!1}return i},onMove(t,e,n,s,r){const i=Is(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},A_={type:"horizontal",allowOverlap:!1,compact(t,e){const n=Tx(t),s=R_(t),r=new Array(t.length);for(let i=0;i<s.length;i++){const o=s[i];if(o===void 0)continue;let a=ci(o);a.static||(a=hO(n,a,e,s),n.push(a));const l=t.indexOf(o);r[l]=a,a.moved=!1}return r},onMove(t,e,n,s,r){const i=Is(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},Mw={type:null,allowOverlap:!1,compact(t,e){return Is(t)},onMove(t,e,n,s,r){const i=Is(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},fO={...O_,allowOverlap:!0,compact(t,e){return Is(t)}},pO={...A_,allowOverlap:!0,compact(t,e){return Is(t)}};function Rx(t,e=!1,n=!1){let s;return e?t==="vertical"?s=fO:t==="horizontal"?s=pO:s=Mw:t==="vertical"?s=O_:t==="horizontal"?s=A_:s=Mw,n?{...s,preventCollision:n}:s}function D_(t){return Object.keys(t).sort((n,s)=>t[n]-t[s])}function Rw(t,e){const n=D_(t);let s=n[0];if(s===void 0)throw new Error("No breakpoints defined");for(let r=1;r<n.length;r++){const i=n[r];if(i===void 0)continue;const o=t[i];e>o&&(s=i)}return s}function Ow(t,e){const n=e[t];if(n===void 0)throw new Error(`ResponsiveReactGridLayout: \`cols\` entry for breakpoint ${String(t)} is missing!`);return n}function J0(t,e,n,s,r,i){const o=t[n];if(o)return Is(o);let a=t[s];const l=D_(e),c=l.slice(l.indexOf(n));for(let d=0;d<c.length;d++){const f=c[d];if(f===void 0)continue;const g=t[f];if(g){a=g;break}}const u=Is(a||[]);return ar(Ix(u,{cols:r}),i,r)}function Qu(t,e){if(Array.isArray(t))return t;const n=t,s=n[e];if(s!==void 0)return s;const r=Object.keys(n);for(const i of r){const o=n[i];if(o!==void 0)return o}return[10,10]}function xf(t){const{margin:e,containerPadding:n,containerWidth:s,cols:r}=t;return(s-e[0]*(r-1)-n[0]*2)/r}function wh(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function bi(t,e,n,s,r,i,o){const{margin:a,containerPadding:l,rowHeight:c}=t,u=xf(t);let d,f,g,m;return o?(d=Math.round(o.width),f=Math.round(o.height)):(d=wh(s,u,a[0]),f=wh(r,c,a[1])),i?(g=Math.round(i.top),m=Math.round(i.left)):o?(g=Math.round(o.top),m=Math.round(o.left)):(g=Math.round((c+a[1])*n+l[1]),m=Math.round((u+a[0])*e+l[0])),{top:g,left:m,width:d,height:f}}function Od(t,e,n,s,r){const{margin:i,containerPadding:o,cols:a,rowHeight:l,maxRows:c}=t,u=xf(t);let d=Math.round((n-o[0])/(u+i[0])),f=Math.round((e-o[1])/(l+i[1]));return d=Hs(d,0,a-s),f=Hs(f,0,c-r),{x:d,y:f}}function gO(t,e,n,s,r,i){const{margin:o,maxRows:a,cols:l,rowHeight:c}=t,u=xf(t),d=Math.round((e+o[0])/(u+o[0])),f=Math.round((n+o[1])/(c+o[1]));let g=Hs(d,0,l-s),m=Hs(f,0,a-r);return(i==="sw"||i==="w"||i==="nw")&&(g=Hs(d,0,l)),(i==="nw"||i==="n"||i==="ne")&&(m=Hs(f,0,a)),{w:g,h:m}}function Hs(t,e,n){return Math.max(Math.min(t,n),e)}var bf={exports:{}},N_={},L_={exports:{}},mO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xO=mO,bO=xO;function j_(){}function F_(){}F_.resetWarningCache=j_;var yO=function(){function t(s,r,i,o,a,l){if(l!==bO){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:F_,resetWarningCache:j_};return n.PropTypes=n,n};L_.exports=yO();var yf=L_.exports;function z_(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=z_(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Oc(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=z_(t))&&(s&&(s+=" "),s+=e);return s}const vO=Object.freeze(Object.defineProperty({__proto__:null,clsx:Oc,default:Oc},Symbol.toStringTag,{value:"Module"})),wO=T3(vO);var Ct={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.dontSetMe=EO;qs.findInArray=SO;qs.int=_O;qs.isFunction=kO;qs.isNum=CO;function SO(t,e){for(let n=0,s=t.length;n<s;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function kO(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function CO(t){return typeof t=="number"&&!isNaN(t)}function _O(t){return parseInt(t,10)}function EO(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.browserPrefixToKey=$_;uo.browserPrefixToStyle=PO;uo.default=void 0;uo.getPrefix=B_;const Z0=["Moz","Webkit","O","ms"];function B_(){var n,s;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(s=(n=window.document)==null?void 0:n.documentElement)==null?void 0:s.style;if(!e||t in e)return"";for(let r=0;r<Z0.length;r++)if($_(t,Z0[r])in e)return Z0[r];return""}function $_(t,e){return e?`${e}${TO(t)}`:t}function PO(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function TO(t){let e="",n=!0;for(let s=0;s<t.length;s++)n?(e+=t[s].toUpperCase(),n=!1):t[s]==="-"?n=!0:e+=t[s];return e}uo.default=B_();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.addClassName=H_;Ct.addEvent=MO;Ct.addUserSelectStyles=$O;Ct.createCSSTransform=jO;Ct.createSVGTransform=FO;Ct.getTouch=zO;Ct.getTouchIdentifier=BO;Ct.getTranslation=Ox;Ct.innerHeight=DO;Ct.innerWidth=NO;Ct.matchesSelector=W_;Ct.matchesSelectorAndParentsTo=IO;Ct.offsetXYFromParent=LO;Ct.outerHeight=OO;Ct.outerWidth=AO;Ct.removeClassName=V_;Ct.removeEvent=RO;Ct.scheduleRemoveUserSelectStyles=UO;var Hn=qs,Aw=U_(uo);function U_(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(U_=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}let Ju="";function W_(t,e){return Ju||(Ju=(0,Hn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Hn.isFunction)(t[n])})),(0,Hn.isFunction)(t[Ju])?t[Ju](e):!1}function IO(t,e,n){let s=t;do{if(W_(s,e))return!0;if(s===n)return!1;s=s.parentNode}while(s);return!1}function MO(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.addEventListener?t.addEventListener(e,n,r):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function RO(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function OO(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Hn.int)(n.borderTopWidth),e+=(0,Hn.int)(n.borderBottomWidth),e}function AO(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Hn.int)(n.borderLeftWidth),e+=(0,Hn.int)(n.borderRightWidth),e}function DO(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Hn.int)(n.paddingTop),e-=(0,Hn.int)(n.paddingBottom),e}function NO(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Hn.int)(n.paddingLeft),e-=(0,Hn.int)(n.paddingRight),e}function LO(t,e,n){const r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-r.left)/n,o=(t.clientY+e.scrollTop-r.top)/n;return{x:i,y:o}}function jO(t,e){const n=Ox(t,e,"px");return{[(0,Aw.browserPrefixToKey)("transform",Aw.default)]:n}}function FO(t,e){return Ox(t,e,"")}function Ox(t,e,n){let{x:s,y:r}=t,i=`translate(${s}${n},${r}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function zO(t,e){return t.targetTouches&&(0,Hn.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Hn.findInArray)(t.changedTouches,n=>e===n.identifier)}function BO(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function $O(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&H_(t.body,"react-draggable-transparent-selection")}function UO(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{Dw(t)}):Dw(t)}function Dw(t){if(t)try{if(t.body&&V_(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function H_(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function V_(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Xs={};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.canDragX=VO;Xs.canDragY=YO;Xs.createCoreData=KO;Xs.createDraggableData=qO;Xs.getBoundPosition=WO;Xs.getControlPosition=GO;Xs.snapToGrid=HO;var Ln=qs,zo=Ct;function WO(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:s}=t.props;s=typeof s=="string"?s:XO(s);const r=Ax(t);if(typeof s=="string"){const{ownerDocument:i}=r,o=i.defaultView;let a;if(s==="parent"?a=r.parentNode:a=r.getRootNode().querySelector(s),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');const l=a,c=o.getComputedStyle(r),u=o.getComputedStyle(l);s={left:-r.offsetLeft+(0,Ln.int)(u.paddingLeft)+(0,Ln.int)(c.marginLeft),top:-r.offsetTop+(0,Ln.int)(u.paddingTop)+(0,Ln.int)(c.marginTop),right:(0,zo.innerWidth)(l)-(0,zo.outerWidth)(r)-r.offsetLeft+(0,Ln.int)(u.paddingRight)-(0,Ln.int)(c.marginRight),bottom:(0,zo.innerHeight)(l)-(0,zo.outerHeight)(r)-r.offsetTop+(0,Ln.int)(u.paddingBottom)-(0,Ln.int)(c.marginBottom)}}return(0,Ln.isNum)(s.right)&&(e=Math.min(e,s.right)),(0,Ln.isNum)(s.bottom)&&(n=Math.min(n,s.bottom)),(0,Ln.isNum)(s.left)&&(e=Math.max(e,s.left)),(0,Ln.isNum)(s.top)&&(n=Math.max(n,s.top)),[e,n]}function HO(t,e,n){const s=Math.round(e/t[0])*t[0],r=Math.round(n/t[1])*t[1];return[s,r]}function VO(t){return t.props.axis==="both"||t.props.axis==="x"}function YO(t){return t.props.axis==="both"||t.props.axis==="y"}function GO(t,e,n){const s=typeof e=="number"?(0,zo.getTouch)(t,e):null;if(typeof e=="number"&&!s)return null;const r=Ax(n),i=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,zo.offsetXYFromParent)(s||t,i,n.props.scale)}function KO(t,e,n){const s=!(0,Ln.isNum)(t.lastX),r=Ax(t);return s?{node:r,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:r,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function qO(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function XO(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function Ax(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var vf={},wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.default=QO;function QO(){}Object.defineProperty(vf,"__esModule",{value:!0});vf.default=void 0;var ep=Y_(S),xn=Dx(yf),JO=Dx(ao),cn=Ct,Tr=Xs,tp=qs,vl=Dx(wf);function Dx(t){return t&&t.__esModule?t:{default:t}}function Y_(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(Y_=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}function bn(t,e,n){return(e=ZO(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZO(t){var e=eA(t,"string");return typeof e=="symbol"?e:e+""}function eA(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const xs={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ir=xs.mouse,Sf=class extends ep.Component{constructor(){super(...arguments),bn(this,"dragging",!1),bn(this,"lastX",NaN),bn(this,"lastY",NaN),bn(this,"touchIdentifier",null),bn(this,"mounted",!1),bn(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:s}=n;if(this.props.disabled||!(e.target instanceof s.defaultView.Node)||this.props.handle&&!(0,cn.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,cn.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const r=(0,cn.getTouchIdentifier)(e);this.touchIdentifier=r;const i=(0,Tr.getControlPosition)(e,r,this);if(i==null)return;const{x:o,y:a}=i,l=(0,Tr.createCoreData)(this,o,a);(0,vl.default)("DraggableCore: handleDragStart: %j",l),(0,vl.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,cn.addUserSelectStyles)(s),this.dragging=!0,this.lastX=o,this.lastY=a,(0,cn.addEvent)(s,Ir.move,this.handleDrag),(0,cn.addEvent)(s,Ir.stop,this.handleDragStop))}),bn(this,"handleDrag",e=>{const n=(0,Tr.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let a=s-this.lastX,l=r-this.lastY;if([a,l]=(0,Tr.snapToGrid)(this.props.grid,a,l),!a&&!l)return;s=this.lastX+a,r=this.lastY+l}const i=(0,Tr.createCoreData)(this,s,r);if((0,vl.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=s,this.lastY=r}),bn(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Tr.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let l=s-this.lastX||0,c=r-this.lastY||0;[l,c]=(0,Tr.snapToGrid)(this.props.grid,l,c),s=this.lastX+l,r=this.lastY+c}const i=(0,Tr.createCoreData)(this,s,r);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,cn.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,vl.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,vl.default)("DraggableCore: Removing handlers"),(0,cn.removeEvent)(a.ownerDocument,Ir.move,this.handleDrag),(0,cn.removeEvent)(a.ownerDocument,Ir.stop,this.handleDragStop))}),bn(this,"onMouseDown",e=>(Ir=xs.mouse,this.handleDragStart(e))),bn(this,"onMouseUp",e=>(Ir=xs.mouse,this.handleDragStop(e))),bn(this,"onTouchStart",e=>(Ir=xs.touch,this.handleDragStart(e))),bn(this,"onTouchEnd",e=>(Ir=xs.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,cn.addEvent)(e,xs.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,cn.removeEvent)(n,xs.mouse.move,this.handleDrag),(0,cn.removeEvent)(n,xs.touch.move,this.handleDrag),(0,cn.removeEvent)(n,xs.mouse.stop,this.handleDragStop),(0,cn.removeEvent)(n,xs.touch.stop,this.handleDragStop),(0,cn.removeEvent)(e,xs.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,cn.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,s;return(e=this.props)!=null&&e.nodeRef?(s=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:s.current:JO.default.findDOMNode(this)}render(){return ep.cloneElement(ep.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};vf.default=Sf;bn(Sf,"displayName","DraggableCore");bn(Sf,"propTypes",{allowAnyClick:xn.default.bool,allowMobileScroll:xn.default.bool,children:xn.default.node.isRequired,disabled:xn.default.bool,enableUserSelectHack:xn.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:xn.default.arrayOf(xn.default.number),handle:xn.default.string,cancel:xn.default.string,nodeRef:xn.default.object,onStart:xn.default.func,onDrag:xn.default.func,onStop:xn.default.func,onMouseDown:xn.default.func,scale:xn.default.number,className:tp.dontSetMe,style:tp.dontSetMe,transform:tp.dontSetMe});bn(Sf,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=d(S),n=u(yf),s=u(ao),r=wO,i=Ct,o=Xs,a=qs,l=u(vf),c=u(wf);function u(p){return p&&p.__esModule?p:{default:p}}function d(p,y){if(typeof WeakMap=="function")var x=new WeakMap,v=new WeakMap;return(d=function(k,C){if(!C&&k&&k.__esModule)return k;var E,T,P={__proto__:null,default:k};if(k===null||typeof k!="object"&&typeof k!="function")return P;if(E=C?v:x){if(E.has(k))return E.get(k);E.set(k,P)}for(const _ in k)_!=="default"&&{}.hasOwnProperty.call(k,_)&&((T=(E=Object.defineProperty)&&Object.getOwnPropertyDescriptor(k,_))&&(T.get||T.set)?E(P,_,T):P[_]=k[_]);return P})(p,y)}function f(){return f=Object.assign?Object.assign.bind():function(p){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var v in x)({}).hasOwnProperty.call(x,v)&&(p[v]=x[v])}return p},f.apply(null,arguments)}function g(p,y,x){return(y=m(y))in p?Object.defineProperty(p,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):p[y]=x,p}function m(p){var y=b(p,"string");return typeof y=="symbol"?y:y+""}function b(p,y){if(typeof p!="object"||!p)return p;var x=p[Symbol.toPrimitive];if(x!==void 0){var v=x.call(p,y);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(p)}class w extends e.Component{static getDerivedStateFromProps(y,x){let{position:v}=y,{prevPropsPosition:k}=x;return v&&(!k||v.x!==k.x||v.y!==k.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:v,prevPropsPosition:k}),{x:v.x,y:v.y,prevPropsPosition:{...v}}):null}constructor(y){super(y),g(this,"onDragStart",(x,v)=>{if((0,c.default)("Draggable: onDragStart: %j",v),this.props.onStart(x,(0,o.createDraggableData)(this,v))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(x,v)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",v);const k=(0,o.createDraggableData)(this,v),C={x:k.x,y:k.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:P}=C;C.x+=this.state.slackX,C.y+=this.state.slackY;const[_,D]=(0,o.getBoundPosition)(this,C.x,C.y);C.x=_,C.y=D,C.slackX=this.state.slackX+(T-C.x),C.slackY=this.state.slackY+(P-C.y),k.x=C.x,k.y=C.y,k.deltaX=C.x-this.state.x,k.deltaY=C.y-this.state.y}if(this.props.onDrag(x,k)===!1)return!1;this.setState(C)}),g(this,"onDragStop",(x,v)=>{if(!this.state.dragging||this.props.onStop(x,(0,o.createDraggableData)(this,v))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",v);const C={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:P}=this.props.position;C.x=T,C.y=P}this.setState(C)}),this.state={dragging:!1,dragged:!1,x:y.position?y.position.x:y.defaultPosition.x,y:y.position?y.position.y:y.defaultPosition.y,prevPropsPosition:{...y.position},slackX:0,slackY:0,isElementSVG:!1},y.position&&!(y.onDrag||y.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var y,x;return((x=(y=this.props)==null?void 0:y.nodeRef)==null?void 0:x.current)??s.default.findDOMNode(this)}render(){const{axis:y,bounds:x,children:v,defaultPosition:k,defaultClassName:C,defaultClassNameDragging:E,defaultClassNameDragged:T,position:P,positionOffset:_,scale:D,...A}=this.props;let W={},H=null;const R=!!!P||this.state.dragging,F=P||k,L={x:(0,o.canDragX)(this)&&R?this.state.x:F.x,y:(0,o.canDragY)(this)&&R?this.state.y:F.y};this.state.isElementSVG?H=(0,i.createSVGTransform)(L,_):W=(0,i.createCSSTransform)(L,_);const z=(0,r.clsx)(v.props.className||"",C,{[E]:this.state.dragging,[T]:this.state.dragged});return e.createElement(l.default,f({},A,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(v),{className:z,style:{...v.props.style,...W},transform:H}))}}t.default=w,g(w,"displayName","Draggable"),g(w,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),g(w,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(N_);const{default:G_,DraggableCore:tA}=N_;bf.exports=G_;bf.exports.default=G_;var nA=bf.exports.DraggableCore=tA,sA=bf.exports,Nx={exports:{}},ou={},Lx={};Lx.__esModule=!0;Lx.cloneElement=cA;var rA=iA(S);function iA(t){return t&&t.__esModule?t:{default:t}}function Nw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Lw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nw(Object(n),!0).forEach(function(s){oA(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nw(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function oA(t,e,n){return e=aA(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aA(t){var e=lA(t,"string");return typeof e=="symbol"?e:String(e)}function lA(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cA(t,e){return e.style&&t.props.style&&(e.style=Lw(Lw({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),rA.default.cloneElement(t,e)}var au={};au.__esModule=!0;au.resizableProps=void 0;var Ae=uA(yf);function uA(t){return t&&t.__esModule?t:{default:t}}var dA={axis:Ae.default.oneOf(["both","x","y","none"]),className:Ae.default.string,children:Ae.default.element.isRequired,draggableOpts:Ae.default.shape({allowAnyClick:Ae.default.bool,cancel:Ae.default.string,children:Ae.default.node,disabled:Ae.default.bool,enableUserSelectHack:Ae.default.bool,offsetParent:Ae.default.node,grid:Ae.default.arrayOf(Ae.default.number),handle:Ae.default.string,nodeRef:Ae.default.object,onStart:Ae.default.func,onDrag:Ae.default.func,onStop:Ae.default.func,onMouseDown:Ae.default.func,scale:Ae.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="y"){var i;return(i=Ae.default.number).isRequired.apply(i,n)}return Ae.default.number.apply(Ae.default,n)},handle:Ae.default.oneOfType([Ae.default.node,Ae.default.func]),handleSize:Ae.default.arrayOf(Ae.default.number),lockAspectRatio:Ae.default.bool,maxConstraints:Ae.default.arrayOf(Ae.default.number),minConstraints:Ae.default.arrayOf(Ae.default.number),onResizeStop:Ae.default.func,onResizeStart:Ae.default.func,onResize:Ae.default.func,resizeHandles:Ae.default.arrayOf(Ae.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Ae.default.number,width:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="x"){var i;return(i=Ae.default.number).isRequired.apply(i,n)}return Ae.default.number.apply(Ae.default,n)}};au.resizableProps=dA;ou.__esModule=!0;ou.default=void 0;var wl=mA(S),hA=sA,fA=Lx,pA=au,gA=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function K_(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(K_=function(r){return r?n:e})(t)}function mA(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=K_(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function Og(){return Og=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Og.apply(this,arguments)}function xA(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function jw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function np(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jw(Object(n),!0).forEach(function(s){bA(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jw(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function bA(t,e,n){return e=yA(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yA(t){var e=vA(t,"string");return typeof e=="symbol"?e:String(e)}function vA(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ag(t,e)}function Ag(t,e){return Ag=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},Ag(t,e)}var jx=function(t){wA(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.handleRefs={},s.lastHandleRect=null,s.slack=null,s}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(r,i){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[r,i];if(c){var u=this.props.width/this.props.height,d=r-this.props.width,f=i-this.props.height;Math.abs(d)>Math.abs(f*u)?i=r/u:r=i*u}var g=r,m=i,b=this.slack||[0,0],w=b[0],p=b[1];return r+=w,i+=p,a&&(r=Math.max(a[0],r),i=Math.max(a[1],i)),l&&(r=Math.min(l[0],r),i=Math.min(l[1],i)),this.slack=[w+(g-r),p+(m-i)],[r,i]},n.resizeHandler=function(r,i){var o=this;return function(a,l){var c=l.node,u=l.deltaX,d=l.deltaY;r==="onResizeStart"&&o.resetData();var f=(o.props.axis==="both"||o.props.axis==="x")&&i!=="n"&&i!=="s",g=(o.props.axis==="both"||o.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!f&&!g)){var m=i[0],b=i[i.length-1],w=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(b==="w"){var p=w.left-o.lastHandleRect.left;u+=p}if(m==="n"){var y=w.top-o.lastHandleRect.top;d+=y}}o.lastHandleRect=w,b==="w"&&(u=-u),m==="n"&&(d=-d);var x=o.props.width+(f?u/o.props.transformScale:0),v=o.props.height+(g?d/o.props.transformScale:0),k=o.runConstraints(x,v);x=k[0],v=k[1];var C=x!==o.props.width||v!==o.props.height,E=typeof o.props[r]=="function"?o.props[r]:null,T=r==="onResize"&&!C;E&&!T&&(a.persist==null||a.persist(),E(a,{node:c,size:{width:x,height:v},handle:i})),r==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(r,i){var o=this.props.handle;if(!o)return wl.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+r,ref:i});if(typeof o=="function")return o(r,i);var a=typeof o.type=="string",l=np({ref:i},a?{}:{handleAxis:r});return wl.cloneElement(o,l)},n.render=function(){var r=this,i=this.props,o=i.children,a=i.className,l=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var c=i.resizeHandles;i.transformScale;var u=xA(i,gA);return(0,fA.cloneElement)(o,np(np({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(d){var f,g=(f=r.handleRefs[d])!=null?f:r.handleRefs[d]=wl.createRef();return wl.createElement(hA.DraggableCore,Og({},l,{nodeRef:g,key:"resizableHandle-"+d,onStop:r.resizeHandler("onResizeStop",d),onStart:r.resizeHandler("onResizeStart",d),onDrag:r.resizeHandler("onResize",d)}),r.renderResizeHandle(d,g))}))}))},e}(wl.Component);ou.default=jx;jx.propTypes=pA.resizableProps;jx.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var kf={};kf.__esModule=!0;kf.default=void 0;var sp=EA(S),SA=q_(yf),kA=q_(ou),CA=au,_A=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function q_(t){return t&&t.__esModule?t:{default:t}}function X_(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(X_=function(r){return r?n:e})(t)}function EA(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=X_(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function Dg(){return Dg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Dg.apply(this,arguments)}function Fw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Sh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fw(Object(n),!0).forEach(function(s){PA(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fw(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function PA(t,e,n){return e=TA(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TA(t){var e=IA(t,"string");return typeof e=="symbol"?e:String(e)}function IA(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MA(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function RA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ng(t,e)}function Ng(t,e){return Ng=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},Ng(t,e)}var Q_=function(t){RA(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.state={width:s.props.width,height:s.props.height,propsWidth:s.props.width,propsHeight:s.props.height},s.onResize=function(a,l){var c=l.size;s.props.onResize?(a.persist==null||a.persist(),s.setState(c,function(){return s.props.onResize&&s.props.onResize(a,l)})):s.setState(c)},s}e.getDerivedStateFromProps=function(r,i){return i.propsWidth!==r.width||i.propsHeight!==r.height?{width:r.width,height:r.height,propsWidth:r.width,propsHeight:r.height}:null};var n=e.prototype;return n.render=function(){var r=this.props,i=r.handle,o=r.handleSize;r.onResize;var a=r.onResizeStart,l=r.onResizeStop,c=r.draggableOpts,u=r.minConstraints,d=r.maxConstraints,f=r.lockAspectRatio,g=r.axis;r.width,r.height;var m=r.resizeHandles,b=r.style,w=r.transformScale,p=MA(r,_A);return sp.createElement(kA.default,{axis:g,draggableOpts:c,handle:i,handleSize:o,height:this.state.height,lockAspectRatio:f,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:m,transformScale:w,width:this.state.width},sp.createElement("div",Dg({},p,{style:Sh(Sh({},b),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(sp.Component);kf.default=Q_;Q_.propTypes=Sh(Sh({},CA.resizableProps),{},{children:SA.default.element});Nx.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var OA=Nx.exports.Resizable=ou.default;Nx.exports.ResizableBox=kf.default;function J_(t){return function(n,s,r,i,o,a,l){return t(n,s,l)}}function Cf(t){return function(n,s,r,i){if(!n||!s||typeof n!="object"||typeof s!="object")return t(n,s,r,i);var o=i.get(n),a=i.get(s);if(o&&a)return o===s&&a===n;i.set(n,s),i.set(s,n);var l=t(n,s,r,i);return i.delete(n),i.delete(s),l}}function Z_(t,e){var n={};for(var s in t)n[s]=t[s];for(var s in e)n[s]=e[s];return n}function zw(t){return t.constructor===Object||t.constructor==null}function Bw(t){return typeof t.then=="function"}function _f(t,e){return t===e||t!==t&&e!==e}var AA="[object Arguments]",DA="[object Boolean]",NA="[object Date]",LA="[object RegExp]",jA="[object Map]",FA="[object Number]",zA="[object Object]",BA="[object Set]",$A="[object String]",$w=Object.prototype.toString;function Ef(t){var e=t.areArraysEqual,n=t.areDatesEqual,s=t.areMapsEqual,r=t.areObjectsEqual,i=t.areRegExpsEqual,o=t.areSetsEqual,a=t.createIsNestedEqual,l=a(c);function c(u,d,f){if(u===d)return!0;if(!u||!d||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;if(zw(u)&&zw(d))return r(u,d,l,f);var g=Array.isArray(u),m=Array.isArray(d);if(g||m)return g===m&&e(u,d,l,f);var b=$w.call(u);return b!==$w.call(d)?!1:b===NA?n(u,d,l,f):b===LA?i(u,d,l,f):b===jA?s(u,d,l,f):b===BA?o(u,d,l,f):b===zA||b===AA?Bw(u)||Bw(d)?!1:r(u,d,l,f):b===DA||b===FA||b===$A?_f(u.valueOf(),d.valueOf()):!1}return c}function e5(t,e,n,s){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n(t[r],e[r],r,r,t,e,s))return!1;return!0}var UA=Cf(e5);function t5(t,e){return _f(t.valueOf(),e.valueOf())}function n5(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={},o=0;return t.forEach(function(a,l){if(r){var c=!1,u=0;e.forEach(function(d,f){!c&&!i[u]&&(c=n(l,f,o,u,t,e,s)&&n(a,d,l,f,t,e,s))&&(i[u]=!0),u++}),o++,r=c}}),r}var WA=Cf(n5),HA="_owner",VA=Object.prototype.hasOwnProperty;function s5(t,e,n,s){var r=Object.keys(t),i=r.length;if(Object.keys(e).length!==i)return!1;for(var o;i-- >0;){if(o=r[i],o===HA){var a=!!t.$$typeof,l=!!e.$$typeof;if((a||l)&&a!==l)return!1}if(!VA.call(e,o)||!n(t[o],e[o],o,o,t,e,s))return!1}return!0}var YA=Cf(s5);function r5(t,e){return t.source===e.source&&t.flags===e.flags}function i5(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={};return t.forEach(function(o,a){if(r){var l=!1,c=0;e.forEach(function(u,d){!l&&!i[c]&&(l=n(o,u,a,d,t,e,s))&&(i[c]=!0),c++}),r=l}}),r}var GA=Cf(i5),o5=Object.freeze({areArraysEqual:e5,areDatesEqual:t5,areMapsEqual:n5,areObjectsEqual:s5,areRegExpsEqual:r5,areSetsEqual:i5,createIsNestedEqual:J_}),a5=Object.freeze({areArraysEqual:UA,areDatesEqual:t5,areMapsEqual:WA,areObjectsEqual:YA,areRegExpsEqual:r5,areSetsEqual:GA,createIsNestedEqual:J_}),KA=Ef(o5);function zr(t,e){return KA(t,e,void 0)}Ef(Z_(o5,{createIsNestedEqual:function(){return _f}}));Ef(a5);Ef(Z_(a5,{createIsNestedEqual:function(){return _f}}));function Uw(t){const{children:e,cols:n,containerWidth:s,margin:r,containerPadding:i,rowHeight:o,maxRows:a,isDraggable:l,isResizable:c,isBounded:u,static:d,useCSSTransforms:f=!0,usePercentages:g=!1,transformScale:m=1,droppingPosition:b,className:w="",style:p,handle:y="",cancel:x="",x:v,y:k,w:C,h:E,minW:T=1,maxW:P=1/0,minH:_=1,maxH:D=1/0,i:A,resizeHandles:W,resizeHandle:H,onDragStart:O,onDrag:R,onDragStop:F,onResizeStart:L,onResize:z,onResizeStop:I}=t,[K,j]=S.useState(!1),[M,$]=S.useState(!1),q=S.useRef(null),X=S.useRef({left:0,top:0}),G=S.useRef({top:0,left:0,width:0,height:0}),ee=S.useRef(void 0),se=S.useMemo(()=>({cols:n,containerPadding:i,containerWidth:s,margin:r,maxRows:a,rowHeight:o}),[n,i,s,r,a,o]),be=S.useCallback(ye=>{if(f)return kx(ye);const Ce=__(ye);return g?{...Ce,left:Tw(ye.left/s),width:Tw(ye.width/s)}:Ce},[f,g,s]),He=S.useCallback((ye,{node:Ce})=>{if(!O)return;const{offsetParent:Ue}=Ce;if(!Ue)return;const Ze=Ue.getBoundingClientRect(),lt=Ce.getBoundingClientRect(),_t=lt.left/m,Vt=Ze.left/m,Ft=lt.top/m,Yt=Ze.top/m,ct={left:_t-Vt+Ue.scrollLeft,top:Ft-Yt+Ue.scrollTop};X.current=ct,j(!0);const{x:gs,y:mn}=Od(se,ct.top,ct.left,C,E);O(A,gs,mn,{e:ye,node:Ce,newPosition:ct})},[O,m,se,C,E,A]),Pe=S.useCallback((ye,{node:Ce,deltaX:Ue,deltaY:Ze})=>{if(!R||!K)return;let lt=X.current.top+Ze,_t=X.current.left+Ue;if(u){const{offsetParent:ct}=Ce;if(ct){const gs=ct.clientHeight-wh(E,o,r[1]);lt=Hs(lt,0,gs);const mn=xf(se),te=s-wh(C,mn,r[0]);_t=Hs(_t,0,te)}}const Vt={top:lt,left:_t};X.current=Vt;const{x:Ft,y:Yt}=Od(se,lt,_t,C,E);R(A,Ft,Yt,{e:ye,node:Ce,newPosition:Vt})},[R,K,u,E,o,r,se,s,C,A]),_e=S.useCallback((ye,{node:Ce})=>{if(!F||!K)return;const{left:Ue,top:Ze}=X.current,lt={top:Ze,left:Ue};j(!1),X.current={left:0,top:0};const{x:_t,y:Vt}=Od(se,Ze,Ue,C,E);F(A,_t,Vt,{e:ye,node:Ce,newPosition:lt})},[F,K,se,C,E,A]),Le=S.useCallback((ye,{node:Ce,size:Ue,handle:Ze},lt,_t)=>{const Vt=_t==="onResizeStart"?L:_t==="onResize"?z:I;if(!Vt)return;let Ft;Ce?Ft=J7(Ze,lt,Ue,s):Ft={...Ue,top:lt.top,left:lt.left},G.current=Ft;let{w:Yt,h:ct}=gO(se,Ft.width,Ft.height,v,k,Ze);Yt=Hs(Yt,Math.max(T,1),P),ct=Hs(ct,_,D),Vt(A,Yt,ct,{e:ye.nativeEvent,node:Ce,size:Ft,handle:Ze})},[L,z,I,s,se,v,k,T,P,_,D,A]),wt=S.useCallback((ye,Ce)=>{$(!0);const Ue=bi(se,v,k,C,E),Ze={...Ce,handle:Ce.handle};Le(ye,Ze,Ue,"onResizeStart")},[Le,se,v,k,C,E]),N=S.useCallback((ye,Ce)=>{const Ue=bi(se,v,k,C,E),Ze={...Ce,handle:Ce.handle};Le(ye,Ze,Ue,"onResize")},[Le,se,v,k,C,E]),J=S.useCallback((ye,Ce)=>{$(!1),G.current={top:0,left:0,width:0,height:0};const Ue=bi(se,v,k,C,E),Ze={...Ce,handle:Ce.handle};Le(ye,Ze,Ue,"onResizeStop")},[Le,se,v,k,C,E]);S.useEffect(()=>{if(!b)return;const ye=q.current;if(!ye)return;const Ce=ee.current||{left:0,top:0},Ue=K&&(b.left!==Ce.left||b.top!==Ce.top);if(K){if(Ue){const Ze=b.left-X.current.left,lt=b.top-X.current.top,_t={node:ye,deltaX:Ze,deltaY:lt,lastX:X.current.left,lastY:X.current.top,x:b.left,y:b.top};Pe(b.e,_t)}}else{const Ze={node:ye,deltaX:b.left,deltaY:b.top,lastX:0,lastY:0,x:b.left,y:b.top};He(b.e,Ze)}ee.current=b},[b,K,He,Pe]);const oe=bi(se,v,k,C,E,K?X.current:null,M?G.current:null),de=ie.Children.only(e),we=bi(se,0,0,n,0).width,ve=bi(se,0,0,T,_),B=bi(se,0,0,P,D),le=[ve.width,ve.height],V=[Math.min(B.width,we),Math.min(B.height,1/0)],ce=de.props,re=ce.className,Y=ce.style;let he=ie.cloneElement(de,{ref:q,className:Oc("react-grid-item",re,w,{static:d,resizing:M,"react-draggable":l,"react-draggable-dragging":K,dropping:!!b,cssTransforms:f}),style:{...p,...Y,...be(oe)}});const Te=H;return he=h.jsx(OA,{draggableOpts:{disabled:!c},className:c?void 0:"react-resizable-hide",width:oe.width,height:oe.height,minConstraints:le,maxConstraints:V,onResizeStart:wt,onResize:N,onResizeStop:J,transformScale:m,resizeHandles:W,handle:Te,children:he}),he=h.jsx(nA,{disabled:!l,onStart:He,onDrag:Pe,onStop:_e,handle:y,cancel:".react-resizable-handle"+(x?","+x:""),scale:m,nodeRef:q,children:he}),he}var Qs=()=>{},Ww="react-grid-layout",l5=!1;try{l5=/firefox/i.test(navigator.userAgent)}catch{}function qA(t,e){const n=ie.Children.toArray(t),s=ie.Children.toArray(e);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const i=n[r],o=s[r];if((i==null?void 0:i.key)!==(o==null?void 0:o.key))return!1}return!0}function Hw(t,e,n,s,r){const i=[],o=new Set;ie.Children.forEach(e,l=>{if(!ie.isValidElement(l)||l.key===null)return;const c=String(l.key);o.add(c);const u=t.find(d=>d.i===c);if(u)i.push(ci(u));else{const f=l.props["data-grid"];f?i.push({i:c,x:f.x??0,y:f.y??0,w:f.w??1,h:f.h??1,minW:f.minW,maxW:f.maxW,minH:f.minH,maxH:f.maxH,static:f.static,isDraggable:f.isDraggable,isResizable:f.isResizable,resizeHandles:f.resizeHandles,isBounded:f.isBounded}):i.push({i:c,x:0,y:Xa(i),w:1,h:1})}});const a=Ix(i,{cols:n});return ar(a,s,n,r)}function XA(t){const{children:e,width:n,gridConfig:s,dragConfig:r,resizeConfig:i,dropConfig:o,positionStrategy:a=tO,compactor:l,layout:c=[],droppingItem:u,autoSize:d=!0,className:f="",style:g={},innerRef:m,onLayoutChange:b=Qs,onDragStart:w=Qs,onDrag:p=Qs,onDragStop:y=Qs,onResizeStart:x=Qs,onResize:v=Qs,onResizeStop:k=Qs,onDrop:C=Qs,onDropDragOver:E=Qs}=t,T=S.useMemo(()=>({...nO,...s}),[s]),P=S.useMemo(()=>({...sO,...r}),[r]),_=S.useMemo(()=>({...rO,...i}),[i]),D=S.useMemo(()=>({...iO,...o}),[o]),{cols:A,rowHeight:W,maxRows:H,margin:O,containerPadding:R}=T,{enabled:F,bounded:L,handle:z,cancel:I}=P,{enabled:K,handles:j,handleComponent:M}=_,{enabled:$,defaultItem:q}=D,X=l??Rx("vertical"),G=X.type,ee=X.allowOverlap,se=X.preventCollision??!1,be=S.useMemo(()=>u??{i:"__dropping-elem__",...q},[u,q]),He=a.type==="transform",Pe=a.scale,_e=R??O,[Le,wt]=S.useState(!1),[N,J]=S.useState(()=>Hw(c,e,A,G,ee)),[oe,de]=S.useState(null),[we,ve]=S.useState(!1),[B,le]=S.useState(null),[V,ce]=S.useState(),re=S.useRef(null),Y=S.useRef(null),he=S.useRef(null),Te=S.useRef(0),ye=S.useRef(N),Ce=S.useRef(c),Ue=S.useRef(e),Ze=S.useRef(G);S.useEffect(()=>{wt(!0),zr(N,c)||b(N)},[]),S.useEffect(()=>{if(oe)return;const fe=!zr(c,Ce.current),Xe=!qA(e,Ue.current),Se=G!==Ze.current;if(fe||Xe||Se){const Ke=Hw(fe?c:N,e,A,G,ee);J(Ke)}Ce.current=c,Ue.current=e,Ze.current=G},[c,e,A,G,ee,oe,N]),S.useEffect(()=>{!oe&&!zr(N,ye.current)&&(ye.current=N,b(N))},[N,oe,b]);const lt=S.useMemo(()=>{if(!d)return;const fe=Xa(N),Xe=_e[1];return fe*W+(fe-1)*O[1]+Xe*2+"px"},[d,N,W,O,_e]),_t=S.useCallback((fe,Xe,Se,ze)=>{const Ke=Ci(N,fe);if(!Ke)return;const Ve={w:Ke.w,h:Ke.h,x:Ke.x,y:Ke.y,i:fe};re.current=ci(Ke),he.current=N,de(Ve),w(N,Ke,Ke,null,ze.e,ze.node)},[N,w]),Vt=S.useCallback((fe,Xe,Se,ze)=>{const Ke=re.current,Ve=Ci(N,fe);if(!Ve)return;const Ot={w:Ve.w,h:Ve.h,x:Ve.x,y:Ve.y,i:fe},nt=Di(N,Ve,Xe,Se,!0,se,G,A,ee);p(nt,Ke,Ve,Ot,ze.e,ze.node),J(ee?nt:ar(nt,G,A)),de(Ot)},[N,se,G,A,ee,p]),Ft=S.useCallback((fe,Xe,Se,ze)=>{if(!oe)return;const Ke=re.current,Ve=Ci(N,fe);if(!Ve)return;const Ot=Di(N,Ve,Xe,Se,!0,se,G,A,ee),nt=ee?Ot:ar(Ot,G,A);y(nt,Ke,Ve,null,ze.e,ze.node);const sn=he.current;re.current=null,he.current=null,de(null),J(nt),sn&&!zr(sn,nt)&&b(nt)},[oe,N,se,G,A,ee,y,b]),Yt=S.useCallback((fe,Xe,Se,ze)=>{const Ke=Ci(N,fe);Ke&&(Y.current=ci(Ke),he.current=N,ve(!0),x(N,Ke,Ke,null,ze.e,ze.node))},[N,x]),ct=S.useCallback((fe,Xe,Se,ze)=>{const Ke=Y.current,{handle:Ve}=ze;let Ot=!1,nt,sn;const[tl,pi]=aO(N,fe,Et=>(nt=Et.x,sn=Et.y,["sw","w","nw","n","ne"].includes(Ve)&&(["sw","nw","w"].includes(Ve)&&(nt=Et.x+(Et.w-Xe),Xe=Et.x!==nt&&nt<0?Et.w:Xe,nt=nt<0?0:nt),["ne","n","nw"].includes(Ve)&&(sn=Et.y+(Et.h-Se),Se=Et.y!==sn&&sn<0?Et.h:Se,sn=sn<0?0:sn),Ot=!0),se&&!ee&&T_(N,{...Et,w:Xe,h:Se,x:nt??Et.x,y:sn??Et.y}).filter(_3=>_3.i!==Et.i).length>0&&(sn=Et.y,Se=Et.h,nt=Et.x,Xe=Et.w,Ot=!1),Et.w=Xe,Et.h=Se,Et));if(!pi)return;let gu=tl;Ot&&nt!==void 0&&sn!==void 0&&(gu=Di(tl,pi,nt,sn,!0,se,G,A,ee));const cb={w:pi.w,h:pi.h,x:pi.x,y:pi.y,i:fe,static:!0};v(gu,Ke,pi,cb,ze.e,ze.node),J(ee?gu:ar(gu,G,A)),de(cb)},[N,se,ee,G,A,v]),gs=S.useCallback((fe,Xe,Se,ze)=>{const Ke=Y.current,Ve=Ci(N,fe),Ot=ee?N:ar(N,G,A);k(Ot,Ke,Ve??null,null,ze.e,ze.node);const nt=he.current;Y.current=null,he.current=null,de(null),ve(!1),J(Ot),nt&&!zr(nt,Ot)&&b(Ot)},[N,ee,G,A,k,b]),mn=S.useCallback(()=>{const fe=ar(N.filter(Xe=>Xe.i!==be.i),G,A,ee);J(fe),le(null),de(null),ce(void 0)},[N,be.i,G,A,ee]),te=S.useCallback(fe=>{var nt;if(fe.preventDefault(),fe.stopPropagation(),l5&&!((nt=fe.nativeEvent.target)!=null&&nt.classList.contains(Ww)))return!1;const Xe=E(fe);if(Xe===!1)return B&&mn(),!1;const Se={...be,...Xe},ze=fe.currentTarget.getBoundingClientRect(),Ke=fe.clientX-ze.left,Ve=fe.clientY-ze.top,Ot={left:Ke/Pe,top:Ve/Pe,e:fe.nativeEvent};if(B)V&&(V.left!==Ke||V.top!==Ve)&&ce(Ot);else{const tl=Od({cols:A,margin:O,maxRows:H,rowHeight:W,containerWidth:n,containerPadding:_e},Ve,Ke,Se.w,Se.h);le(h.jsx("div",{},Se.i)),ce(Ot),J([...N,{...Se,x:tl.x,y:tl.y,static:!1,isDraggable:!0}])}},[B,V,be,E,mn,Pe,A,O,H,W,n,_e,N]),Q=S.useCallback(fe=>{fe.preventDefault(),fe.stopPropagation(),Te.current--,Te.current===0&&mn()},[mn]),U=S.useCallback(fe=>{fe.preventDefault(),fe.stopPropagation(),Te.current++},[]),Me=S.useCallback(fe=>{fe.preventDefault(),fe.stopPropagation();const Xe=N.find(Se=>Se.i===be.i);Te.current=0,mn(),C(N,Xe,fe.nativeEvent)},[N,be.i,mn,C]),it=S.useCallback((fe,Xe)=>{if(!fe||!fe.key)return null;const Se=Ci(N,String(fe.key));if(!Se)return null;const ze=typeof Se.isDraggable=="boolean"?Se.isDraggable:!Se.static&&F,Ke=typeof Se.isResizable=="boolean"?Se.isResizable:!Se.static&&K,Ve=Se.resizeHandles||[...j],Ot=ze&&L&&Se.isBounded!==!1,nt=M;return h.jsx(Uw,{containerWidth:n,cols:A,margin:O,containerPadding:_e,maxRows:H,rowHeight:W,cancel:I,handle:z,onDragStart:_t,onDrag:Vt,onDragStop:Ft,onResizeStart:Yt,onResize:ct,onResizeStop:gs,isDraggable:ze,isResizable:Ke,isBounded:Ot,useCSSTransforms:He&&Le,usePercentages:!Le,transformScale:Pe,w:Se.w,h:Se.h,x:Se.x,y:Se.y,i:Se.i,minH:Se.minH,minW:Se.minW,maxH:Se.maxH,maxW:Se.maxW,static:Se.static,droppingPosition:Xe?V:void 0,resizeHandles:Ve,resizeHandle:nt,children:fe},Se.i)},[N,n,A,O,_e,H,W,I,z,_t,Vt,Ft,Yt,ct,gs,F,K,L,He,Le,Pe,V,j,M]),Oe=()=>oe?h.jsx(Uw,{w:oe.w,h:oe.h,x:oe.x,y:oe.y,i:oe.i,className:`react-grid-placeholder ${we?"placeholder-resizing":""}`,containerWidth:n,cols:A,margin:O,containerPadding:_e,maxRows:H,rowHeight:W,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:He,transformScale:Pe,children:h.jsx("div",{})}):null,Gt=Oc(Ww,f),je={height:lt,...g};return h.jsxs("div",{ref:m,className:Gt,style:je,onDrop:$?Me:void 0,onDragLeave:$?Q:void 0,onDragEnter:$?U:void 0,onDragOver:$?te:void 0,children:[ie.Children.map(e,fe=>ie.isValidElement(fe)?it(fe):null),$&&B&&it(B,!0),Oe()]})}var QA={lg:1200,md:996,sm:768,xs:480,xxs:0},JA={lg:12,md:10,sm:6,xs:4,xxs:2},rp=()=>{};function ZA(t,e,n,s,r){const i=[];ie.Children.forEach(e,a=>{if(!ie.isValidElement(a)||a.key===null)return;const l=String(a.key),c=t.find(u=>u.i===l);if(c)i.push({...c,i:l});else{const d=a.props["data-grid"];d?i.push({i:l,x:d.x??0,y:d.y??0,w:d.w??1,h:d.h??1,minW:d.minW,maxW:d.maxW,minH:d.minH,maxH:d.maxH,static:d.static,isDraggable:d.isDraggable,isResizable:d.isResizable,resizeHandles:d.resizeHandles,isBounded:d.isBounded}):i.push({i:l,x:0,y:Xa(i),w:1,h:1})}});const o=Ix(i,{cols:n});return ar(o,s,n,r)}function eD(t){const{children:e,width:n,breakpoint:s,breakpoints:r=QA,cols:i=JA,layouts:o={},rowHeight:a=150,maxRows:l=1/0,margin:c=[10,10],containerPadding:u=null,compactor:d,onBreakpointChange:f=rp,onLayoutChange:g=rp,onWidthChange:m=rp,...b}=t,w=d??Rx("vertical"),p=w.type,y=w.allowOverlap,x=S.useMemo(()=>s??Rw(r,n),[]),v=S.useMemo(()=>Ow(x,i),[x,i]),k=S.useMemo(()=>J0(o,r,x,x,v,p),[]),[C,E]=S.useState(x),[T,P]=S.useState(v),[_,D]=S.useState(k),[A,W]=S.useState(o),H=S.useRef(n),O=S.useRef(s),R=S.useRef(r),F=S.useRef(i),L=S.useRef(o),z=S.useRef(p);S.useEffect(()=>{if(!zr(o,L.current)){const $=J0(o,r,C,C,T,p);D($),W(o),L.current=o}},[o,r,C,T,p]),S.useEffect(()=>{if(p!==z.current){const $=ar(Is(_),p,T,y),q={...A,[C]:$};D($),W(q),g($,q),z.current=p}},[p,_,T,y,A,C,g]),S.useEffect(()=>{const $=n!==H.current,q=s!==O.current,X=!zr(r,R.current),G=!zr(i,F.current);if($||q||X||G){const ee=s??Rw(r,n),se=Ow(ee,i),be=C;if(be!==ee||X||G){const _e={...A};_e[be]||(_e[be]=Is(_));let Le=J0(_e,r,ee,be,se,p);Le=ZA(Le,e,se,p,y),_e[ee]=Le,E(ee),P(se),D(Le),W(_e),f(ee,se),g(Le,_e)}const He=Qu(c,ee),Pe=u?Qu(u,ee):null;m(n,He,se,Pe),H.current=n,O.current=s,R.current=r,F.current=i}},[n,s,r,i,C,T,_,A,e,p,y,c,u,f,g,m]);const I=S.useCallback($=>{const q={...A,[C]:$};D($),W(q),g($,q)},[A,C,g]),K=S.useMemo(()=>Qu(c,C),[c,C]),j=S.useMemo(()=>u===null?null:Qu(u,C),[u,C]),M=S.useMemo(()=>({cols:T,rowHeight:a,maxRows:l,margin:K,containerPadding:j}),[T,a,l,K,j]);return h.jsx(XA,{...b,width:n,gridConfig:M,compactor:w,onLayoutChange:I,layout:_,children:e})}function c5(t){const{children:e,width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,rowHeight:u,maxRows:d,margin:f,containerPadding:g,droppingItem:m,compactType:b,preventCollision:w=!1,allowOverlap:p=!1,verticalCompact:y,isDraggable:x=!0,isBounded:v=!1,draggableHandle:k,draggableCancel:C,isResizable:E=!0,resizeHandles:T=["se"],resizeHandle:P,isDroppable:_=!1,useCSSTransforms:D=!0,transformScale:A=1,autoSize:W,className:H,style:O,innerRef:R,onDragStart:F,onDrag:L,onDragStop:z,onResizeStart:I,onResize:K,onResizeStop:j,onDrop:M,onDropDragOver:$}=t;let q=b===void 0?"vertical":b;y===!1&&(q=null);const X={enabled:x,bounded:v,handle:k,cancel:C},G={enabled:E,handles:T,handleComponent:P},ee={enabled:_};let se;D?A!==1?se=eO(A):se=P_:se=Z7;const be=Rx(q,p,w);return h.jsx(eD,{width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,rowHeight:u,maxRows:d,margin:f,containerPadding:g,compactor:be,dragConfig:X,resizeConfig:G,dropConfig:ee,positionStrategy:se,droppingItem:m,autoSize:W,className:H,style:O,innerRef:R,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,onDragStart:F,onDrag:L,onDragStop:z,onResizeStart:I,onResize:K,onResizeStop:j,onDrop:M,onDropDragOver:$,children:e})}c5.displayName="ResponsiveReactGridLayout";var tD=c5,nD="react-grid-layout";function sD(t){function e(n){const{measureBeforeMount:s=!1,className:r,style:i,...o}=n,[a,l]=S.useState(1280),[c,u]=S.useState(!1),d=S.useRef(null),f=S.useRef(null);return S.useEffect(()=>{u(!0),f.current=new ResizeObserver(m=>{if(d.current instanceof HTMLElement&&m[0]){const w=m[0].contentRect.width;l(w)}});const g=d.current;return g instanceof HTMLElement&&f.current.observe(g),()=>{var m;g instanceof HTMLElement&&f.current&&f.current.unobserve(g),(m=f.current)==null||m.disconnect()}},[]),s&&!c?h.jsx("div",{className:Oc(r,nD),style:i,ref:d}):h.jsx(t,{innerRef:d,className:r,style:i,...o,width:a})}return e.displayName=`WidthProvider(${t.displayName||t.name||"Component"})`,e}const ip=[[0,0,8,16],[8,0,2,16],[0,31,3,8],[0,16,3,15],[3,16,7,7],[3,23,7,8],[5,31,7,6],[3,39,7,6]],Vw=0,rD=7;function iD(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""}function oD(t,e){return Math.floor(Math.random()*(e-t+1))+t}function aD(t){const e=Math.ceil(Math.random()*4)+1;return{x:oD(0,5)*2%12,y:Math.floor(t/6)*e,w:2,h:e,i:t.toString(),static:Math.random()<.05}}function lD(t,e){const[n,s,r,i]=e;return{x:n,y:s,w:r,h:i,i:t.toString(),static:!0}}function op(t,e=9){const n=[];for(let s=0;s<e;s++)s<t.length?n.push(lD(s,t[s])):n.push(aD(s));return n}function cD(t,e){const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const r of n){const i=t[r],o=e[r];if(!i||!o){if(i!==o)return!1;continue}if(i.length!==o.length)return!1;for(let a=0;a<i.length;a++){const l=i[a],c=o[a];if(l.x!==c.x||l.y!==c.y||l.w!==c.w||l.h!==c.h)return!1}}return!0}function ap(t,e){const n={};for(const s in t){const r=t[s];r&&(n[s]=r.map(i=>({...i,static:e})))}return n}const uD=sD(tD),Dh=class Dh extends ie.Component{constructor(n){super(n);ne(this,"isUpdatingLayout",!1);ne(this,"domCache",null);ne(this,"lastLayoutKey","");ne(this,"handleResponsiveLayoutChange",(n,s)=>{const r=Array.isArray(n)?n:[n],i=s;this.onLayoutChange(r,i)});ne(this,"generateNewLayout",()=>{const n=op(ip),s=this.props.allStatic??this.state.allStatic,r=n.map(i=>({...i,static:s}));this.domCache=null,this.lastLayoutKey="",this.setState({layouts:{lg:r}})});this.state={currentBreakpoint:"lg",compactType:n.compactType??"vertical",mounted:!1,layouts:{lg:n.initialLayout||op(ip)},allStatic:n.allStatic??!0},this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onCompactTypeChange=this.onCompactTypeChange.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.onNewLayout=this.onNewLayout.bind(this),this.onToggleStatic=this.onToggleStatic.bind(this)}componentDidMount(){this.setState({mounted:!0})}generateDOM(){const n=this.state.layouts.lg||[],{slotContent:s=[]}=this.props,r=this.props.allStatic??this.state.allStatic,i=`${n.length}-${r}-${s.length}`;if(this.domCache&&this.lastLayoutKey===i)return this.domCache;const o=[];for(let a=0;a<n.length;a++){const l=n[a],c=a>=Vw&&a<=rD,u=a-Vw,d=c&&s[u]?s[u]:null,f=l.static??r;o.push(h.jsx("div",{className:f?"static":"",children:d?h.jsx("div",{className:"external-slot-content",children:d}):f?h.jsxs("span",{className:"text",title:"This item is static and cannot be removed or resized.",children:["Static - ",a]}):h.jsx("span",{className:"text",children:a})},l.i||a.toString()))}return this.domCache=o,this.lastLayoutKey=i,o}onBreakpointChange(n){this.setState({currentBreakpoint:n})}onCompactTypeChange(){if(this.props.onCompactTypeChange)this.props.onCompactTypeChange();else{const{compactType:n}=this.state,s=n==="horizontal"?"vertical":n==="vertical"?null:"horizontal";this.setState({compactType:s})}}onLayoutChange(n,s){if(this.isUpdatingLayout){this.props.onLayoutChange(n,s);return}const r=this.props.allStatic??this.state.allStatic;if(r){this.props.onLayoutChange(n,s);return}const i=ap(s,r);!cD(this.state.layouts,i)&&(this.domCache=null,this.lastLayoutKey="",this.isUpdatingLayout=!0,this.setState({layouts:i},()=>{this.isUpdatingLayout=!1})),this.props.onLayoutChange(n,i)}onNewLayout(){this.props.onNewLayout?this.props.onNewLayout():this.generateNewLayout()}onToggleStatic(){if(this.props.onToggleStatic)this.props.onToggleStatic();else{const n=!this.state.allStatic,s=ap(this.state.layouts,n);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:n,layouts:s})}}componentDidUpdate(n){if(n.compactType!==this.props.compactType&&this.props.compactType!==void 0&&this.setState({compactType:this.props.compactType}),n.allStatic!==this.props.allStatic&&this.props.allStatic!==void 0){const s=ap(this.state.layouts,this.props.allStatic);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:this.props.allStatic,layouts:s})}n.slotContent!==this.props.slotContent&&(this.domCache=null,this.lastLayoutKey="")}render(){const{cols:n}=this.props,s=n||Dh.defaultProps.cols||{},r=this.props.compactType??this.state.compactType;return h.jsxs("div",{children:[h.jsxs("div",{children:["Current Breakpoint: ",this.state.currentBreakpoint," (",s[this.state.currentBreakpoint]," columns)"]}),h.jsxs("div",{children:["Compaction type: ",iD(r)||"No Compaction"]}),h.jsx(uD,{...this.props,layouts:this.state.layouts,onBreakpointChange:this.onBreakpointChange,onLayoutChange:this.handleResponsiveLayoutChange,measureBeforeMount:!1,useCSSTransforms:this.state.mounted,compactType:r,preventCollision:!r,children:this.generateDOM()})]})}};ne(Dh,"defaultProps",{className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},initialLayout:op(ip)});let Lg=Dh;function u5(){const t=document.getElementById("tradingview-widget-script");t&&t.parentNode&&t.parentNode.removeChild(t)}function dD(){return new Promise((t,e)=>{if(typeof window.TradingView<"u"){t();return}u5();const n=document.createElement("script");n.id="tradingview-widget-script",n.src=iI,n.async=!0,n.onload=()=>{typeof window.TradingView<"u"?t():e(new Error("TradingView script loaded but TradingView object not found"))},n.onerror=()=>{e(new Error("Failed to load TradingView script"))},document.head.appendChild(n)})}function hD(t){if(typeof window.TradingView>"u")throw new Error("TradingView is not loaded. Call loadTradingViewScript() first.");const e={autosize:t.autosize!==!1,symbol:t.symbol,interval:t.interval,timezone:t.timezone||"Etc/UTC",theme:"dark",style:"1",locale:t.locale||"en",toolbar_bg:"#1a1a1a",enable_publishing:t.enablePublishing||!1,hide_top_toolbar:t.hideTopToolbar||!1,hide_legend:t.hideLegend||!1,save_image:!1,container_id:t.containerId,hide_volume:t.hideVolume||!1,studies:t.studies||["RSI@tv-basicstudies","MASimple@tv-basicstudies"]};return new window.TradingView.widget(e)}function fD(){return`tradingview-widget-container-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function pD({symbol:t=sI,interval:e=rI,isCollapsed:n=!1,className:s=""}){const r=S.useRef(null),i=S.useRef(null),o=S.useRef(fD());return S.useEffect(()=>{if(n||!r.current)return;r.current&&(r.current.id=o.current);let a=!0;return dD().then(()=>{if(!a||!r.current)return;const l={symbol:t,interval:e,containerId:o.current};i.current=hD(l)}).catch(l=>{console.error("Failed to load TradingView widget:",l)}),()=>{a=!1,i.current&&(i.current=null)}},[t,e,n]),S.useEffect(()=>()=>{u5()},[]),n?h.jsx("div",{className:`tradingview-widget-container ${s}`}):h.jsx("div",{className:`tradingview-widget-wrapper ${s}`,children:h.jsx("div",{ref:r,id:o.current,className:"tradingview-widget-container"})})}function ho(t,e=2,n=2,s="0.00"){return t==null||isNaN(t)?s:t.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:n})}function jg(t){return t==null||isNaN(t)?"--":ho(t,2,2,"--")}function lp(t){return t==null||isNaN(t)?"--":ho(t,2,8,"--")}function d5(t){return t==null||isNaN(t)?"0.000":ho(t,3,3,"0.000")}function gD(t){return t==null||isNaN(t)?"0":ho(t,3,8,"0")}function mD(t){return t==null||isNaN(t)?"0.00":ho(t,2,2,"0.00")}function xD(t){return t==null||isNaN(t)?"0.00":ho(t,2,2,"0.00")}function Qt(t){return t==null||isNaN(t)?"0.00":ho(t,2,2,"0.00")}function bD(t){return t==null||isNaN(t)?"0%":`${(t*100).toFixed(2)}%`}function h5(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return Ee(t).toFixed(8).replace(/\.?0+$/,"")}catch{return"0"}}function yD(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"--";try{const n=h5(t).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")}catch{return"--"}}function vD(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return h5(t)}catch{return"0"}}function wD(t,e,n){return e!==t?h.jsx("span",{style:{fontSize:"0.7rem",opacity:.5,marginLeft:"0.25rem"},children:""}):h.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"0.25rem"},children:n==="asc"?"":""})}function lu({message:t="Loading..."}){return h.jsx("div",{className:"message loading",children:t})}function cu({error:t}){return h.jsxs("div",{className:"message error",children:["Error: ",t]})}function La({message:t}){return h.jsx("div",{className:"message empty",children:t})}function f5({message:t}){return h.jsx("div",{className:"message warning",children:t})}function p5({isConnected:t,connectedText:e=" LIVE",disconnectedText:n=" OFFLINE"}){return h.jsx("div",{className:"status-indicator",children:h.jsx("span",{className:`status-dot ${t?"connected":"disconnected"}`,children:t?e:n})})}function uu({title:t,children:e}){return h.jsxs("div",{className:"layout-header",children:[h.jsx("div",{className:"layout-header-title",children:t}),e&&h.jsx("div",{className:"layout-header-actions",children:e})]})}function Nt({field:t,currentSortField:e,sortDirection:n,onSort:s,children:r,center:i=!1}){return h.jsxs("div",{className:`table-header-cell ${i?"center":""}`,onClick:()=>s(t),children:[r,wD(t,e,n)]})}function g5({children:t,center:e=!1}){return h.jsx("div",{className:`table-header-cell ${e?"center":""}`,children:t})}function SD({onClick:t,disabled:e}){return console.log("[CancelButton] Rendering",{disabled:e,hasOnClick:!!t}),h.jsx("button",{onClick:n=>{console.log("[CancelButton] Button clicked",{disabled:e,event:n}),!e&&t?t(n):console.warn("[CancelButton] Click ignored - button is disabled",{disabled:e})},onMouseDown:n=>{console.log("[CancelButton] Mouse down",{disabled:e,event:n})},className:"btn btn-danger",disabled:e,style:{pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer"},children:"Cancel"})}function kD({onClick:t}){return h.jsx("button",{onClick:t,className:"btn btn-success",children:"Close"})}function CD({baseURL:t,wsURL:e,marketId:n,maxDepth:s=Q8,height:r=K8,authToken:i,walletAddress:o,deviceID:a}){const{orderbook:l,loading:c,error:u,isConnected:d,wsError:f}=LI({baseURL:t,wsURL:e,marketId:n,maxDepth:s,authToken:i,walletAddress:o,deviceID:a}),g=S.useMemo(()=>Math.max(l.asks.length>0?l.asks[l.asks.length-1].cumulative:0,l.bids.length>0?l.bids[l.bids.length-1].cumulative:0),[l.asks,l.bids]),m=S.useCallback(p=>jg(p),[]),b=S.useCallback(p=>d5(p),[]),w=S.useCallback(p=>g===0?0:p/g*100,[g]);return c?h.jsx(lu,{message:"Loading orderbook..."}):u?h.jsx(cu,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[f&&(l.asks.length>0||l.bids.length>0)&&h.jsxs("div",{className:"orderbook-ws-warning",children:[h.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),h.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),h.jsx(uu,{title:h.jsx(p5,{isConnected:d}),children:h.jsxs("div",{children:["Depth: ",s]})}),l.midPrice&&h.jsxs("div",{className:"orderbook-mid-price",children:[h.jsx("div",{className:"orderbook-mid-price-value",children:m(l.midPrice)}),l.spread!==void 0&&h.jsxs("div",{className:"orderbook-mid-price-spread",children:["Spread: ",m(l.spread)]})]}),h.jsxs("div",{className:"orderbook-content",children:[h.jsxs("div",{className:"orderbook-section",children:[l.asks.map((p,y)=>{const x=w(p.cumulative),v=p.flash==="up"?"flash-up":p.flash==="down"?"flash-down-ask":"";return h.jsxs("div",{className:`orderbook-level ask ${v}`,style:{borderBottom:y<l.asks.length-1?void 0:"none"},children:[h.jsx("div",{className:"orderbook-depth-bar ask",style:{width:`${x}%`}}),h.jsx("div",{className:"orderbook-level-content ask",children:m(p.price)}),h.jsx("div",{className:"orderbook-level-content right",children:b(p.size)}),h.jsx("div",{className:"orderbook-depth-indicator",children:h.jsx("div",{className:"orderbook-depth-line ask"})})]},`ask-${p.price}-${y}`)}),l.asks.length===0&&h.jsx(La,{message:"No ask orders"})]}),h.jsxs("div",{className:"orderbook-section bids",children:[l.bids.map((p,y)=>{const x=w(p.cumulative),v=p.flash==="up"?"flash-up":p.flash==="down"?"flash-down-bid":"";return h.jsxs("div",{className:`orderbook-level bid ${v}`,style:{borderBottom:y<l.bids.length-1?void 0:"none"},children:[h.jsx("div",{className:"orderbook-depth-bar bid",style:{width:`${x}%`}}),h.jsx("div",{className:"orderbook-level-content bid",children:m(p.price)}),h.jsx("div",{className:"orderbook-level-content right",children:b(p.size)}),h.jsx("div",{className:"orderbook-depth-indicator",children:h.jsx("div",{className:"orderbook-depth-line bid"})})]},`bid-${p.price}-${y}`)}),l.bids.length===0&&h.jsx(La,{message:"No bid orders"})]})]}),h.jsxs("div",{className:"orderbook-footer",children:[h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar bid"}),h.jsx("span",{className:"color-text-muted",children:(()=>{const p=l.bids.length>0?l.bids[l.bids.length-1].cumulative:0,y=l.asks.length>0?l.asks[l.asks.length-1].cumulative:0,x=p+y;return x>0?`${(p/x*100).toFixed(0)}%`:"0%"})()})]}),h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar ask"}),h.jsx("span",{className:"color-text-muted",children:(()=>{const p=l.bids.length>0?l.bids[l.bids.length-1].cumulative:0,y=l.asks.length>0?l.asks[l.asks.length-1].cumulative:0,x=p+y;return x>0?`${(y/x*100).toFixed(0)}%`:"0%"})()})]})]})]})}function _D({baseURL:t=tu,wsURL:e=n_,marketId:n=q8,symbol:s,limit:r=X8,authToken:i,walletAddress:o,deviceID:a}){const{lastPrice:l,displayPrice:c,loading:u,error:d,isConnected:f,priceChange:g}=mx({baseURL:t,wsURL:e,marketId:n,symbol:s,limit:r,authToken:i,walletAddress:o,deviceID:a}),[m,b]=S.useState([]),[w,p]=S.useState(!1),y=S.useRef(null),x=S.useRef(!1),v=S.useRef(null),k=S.useCallback(async()=>{if(!y.current||!n){console.debug("[TradePrice] fetchRecentTrades skipped: missing client or marketId");return}if(x.current){console.debug("[TradePrice] fetchRecentTrades skipped: already fetching");return}console.debug("[TradePrice] Starting fetchRecentTrades"),x.current=!0,p(!0);try{const L=await y.current.getRecentTrades(n,20);if(L&&Array.isArray(L)&&L.length>0){const z=j=>{if(!j)return Date.now();const M=typeof j=="string"?Number(j):j;return isNaN(M)||M<=0?Date.now():M<9466848e5?M*1e3:M},K=[...L].sort((j,M)=>{const $=z(j.timestamp||j.time);return z(M.timestamp||M.time)-$}).map(j=>({time:z(j.timestamp||j.time),size:typeof j.quantity=="string"?Ee(j.quantity):typeof j.size=="string"?Ee(j.size):j.quantity||j.size||0,price:typeof j.price=="string"?Ee(j.price):j.price||0,is_buyer_maker:j.is_buyer_maker!==void 0?j.is_buyer_maker:j.side!=="sell"}));b(K),console.debug("[TradePrice] fetchRecentTrades completed successfully")}else b([]),console.debug("[TradePrice] fetchRecentTrades: no trades returned")}catch(L){console.error("[TradePrice] Failed to fetch recent trades:",L),b([])}finally{console.debug("[TradePrice] fetchRecentTrades finished, clearing loading state"),p(!1),x.current=!1}},[n]);S.useEffect(()=>{if(!n){console.debug("[TradePrice] Initialization skipped: no marketId");return}console.debug("[TradePrice] Initializing trades fetch for marketId:",n),x.current=!1,p(!1),y.current=new hn({baseURL:t});const L=setTimeout(()=>{y.current&&n&&!x.current?(console.debug("[TradePrice] Executing initial fetchRecentTrades"),k()):console.debug("[TradePrice] Initial fetch skipped:",{hasClient:!!y.current,hasMarketId:!!n,isFetching:x.current})},100);return()=>{console.debug("[TradePrice] Cleaning up trades fetch effect"),clearTimeout(L),x.current=!1,p(!1)}},[t,n]);const C=S.useRef(""),E=S.useRef(null),T=S.useCallback(()=>{const L=v.current;if(!L)return;const z=L.parentElement;if(!z)return;const I=L.textContent||"";if(!I)return;const K=window.getComputedStyle(z),j=parseFloat(K.paddingLeft)+parseFloat(K.paddingRight),M=z.clientWidth-j;let $=12,q=48,X=$;const G=document.createElement("div");for(G.style.position="absolute",G.style.visibility="hidden",G.style.whiteSpace="nowrap",G.style.fontFamily=window.getComputedStyle(L).fontFamily,G.style.fontWeight=window.getComputedStyle(L).fontWeight,document.body.appendChild(G);$<=q;){const se=Math.floor(($+q)/2);G.style.fontSize=`${se}px`,G.textContent=I,G.offsetWidth<=M?(X=se,$=se+1):q=se-1}document.body.removeChild(G);const ee=parseFloat(window.getComputedStyle(L).fontSize);Math.abs(ee-X)>.5&&(L.style.fontSize=`${X}px`)},[]);S.useEffect(()=>{if(c==null)return;const L=lp(c);if(L===C.current)return;C.current=L,E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{T()},150);let z;const I=()=>{clearTimeout(z),z=window.setTimeout(()=>{E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{T()},150)},100)};return window.addEventListener("resize",I),()=>{E.current!==null&&clearTimeout(E.current),clearTimeout(z),window.removeEventListener("resize",I)}},[c,T]);const P=L=>{if(!L||isNaN(L)||L<=0)return"Invalid";let z=L;z<9466848e5&&(z=z*1e3);const I=new Date(z);return isNaN(I.getTime())?"Invalid":I.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},_=L=>L?"#51cf66":"#ff6b6b",D=L=>L?"BUY":"SELL",A=L=>L?"":"";if(u)return h.jsx(lu,{message:"Loading trade price..."});if(d)return h.jsx(cu,{error:d});if(c==null)return h.jsx(La,{message:"No trade data available"});const W=l&&l.is_buyer_maker!==void 0,H=W?_(l.is_buyer_maker):"#888",O=W?D(l.is_buyer_maker):"N/A",R=W?A(l.is_buyer_maker):"",F=g==="up"?"flash-price-up":g==="down"?"flash-price-down":"";return h.jsxs("div",{className:"layout-container trade-price-container",children:[h.jsx(uu,{title:h.jsx(p5,{isConnected:f}),children:h.jsx("div",{children:"Last Trade Price"})}),h.jsxs("div",{className:`trade-price-main ${F}`,children:[h.jsx("div",{ref:v,className:"trade-price-value",style:{color:H},children:lp(c)}),h.jsxs("div",{className:"trade-price-side",style:{color:H},children:[h.jsx("span",{children:R}),h.jsx("span",{children:O})]})]}),h.jsx("div",{className:"trade-price-trades-table",children:w?h.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#888"},children:"Loading trades..."}):m.length===0?h.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#888"},children:"No trades available"}):h.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[h.jsx("thead",{children:h.jsxs("tr",{style:{borderBottom:"1px solid #2a2e39",color:"#888"},children:[h.jsx("th",{style:{textAlign:"left",padding:"0.5rem",fontWeight:"500"},children:"Time"}),h.jsx("th",{style:{textAlign:"right",padding:"0.5rem",fontWeight:"500"},children:"Size"}),h.jsx("th",{style:{textAlign:"right",padding:"0.5rem",fontWeight:"500"},children:"Price"})]})}),h.jsx("tbody",{children:m.map((L,z)=>{const I=L.is_buyer_maker?"#51cf66":"#ff6b6b";return h.jsxs("tr",{style:{borderBottom:"1px solid #2a2e39"},children:[h.jsx("td",{style:{padding:"0.5rem",color:"#d1d4dc"},children:P(L.time)}),h.jsx("td",{style:{padding:"0.5rem",textAlign:"right",color:"#d1d4dc"},children:gD(L.size)}),h.jsx("td",{style:{padding:"0.5rem",textAlign:"right",color:I,fontWeight:"500"},children:lp(L.price)})]},z)})})]})})]})}const ED=S.forwardRef(function({baseURL:e=tu,wsURL:n=n_,mnemonic:s=J8,marketId:r,marketSymbol:i,selectedBucketBalance:o,selectedBucketId:a,onLeverageClick:l},c){const{selectedMarketId:u,selectedMarketSymbol:d}=qa({baseURL:e,autoFetchMarkets:!0}),f=r||u||"",g=i||d||"Market",{lastPrice:m}=mx({baseURL:e,wsURL:n,marketId:f}),b=(m==null?void 0:m.price)||0,{orderType:w,setOrderType:p,fundPercent:y,sizeInput:x,price:v,leverage:k,positionMode:C,marginMode:E,availableBalance:T,currentPrice:P,isReady:_,loading:D,result:A,setFundPercent:W,setSizeInput:H,setPrice:O,setMarginMode:R,setLeverage:F,placeBuyOrder:L,placeSellOrder:z,calculateValue:I,calculateMargin:K,calculateSizeUSD:j,getOrderPrice:M,getAvailableTradeAmount:$}=NI({baseURL:e,mnemonic:s,marketId:f,selectedBucketBalance:o,tradePrice:b}),q=S.useMemo(()=>M(),[M,w,v,P]),X=S.useMemo(()=>$(),[$,T,k]),G=S.useMemo(()=>I(),[I,x,y,T,q,k]),ee=S.useMemo(()=>K(),[K,k,G]),se=S.useMemo(()=>Ee(G),[G]),be=S.useMemo(()=>Ee(ee),[ee]),He=S.useMemo(()=>({minimumFractionDigits:bo,maximumFractionDigits:oI}),[]),Pe=S.useMemo(()=>P.toFixed(bo),[P]),_e=S.useMemo(()=>a?`Available in ${a}`:"Available to Trade",[a]),Le=S.useCallback(()=>{R(E===Mc?cI:Mc)},[E,R]),wt=S.useCallback(()=>{p(_g)},[p]),N=S.useCallback(()=>{p(R0)},[p]),J=S.useCallback(()=>{W(Math.min(iv,y+M0))},[y,W]),oe=S.useCallback(()=>{W(Math.max(rv,y-M0))},[y,W]),de=S.useCallback(V=>{const ce=parseInt(V.target.value);W(ce)},[W]),we=S.useCallback(V=>{O(V.target.value)},[O]),ve=S.useCallback(V=>{const ce=parseFloat(V.target.value);H(isNaN(ce)?0:ce)},[H]),B=S.useCallback(()=>{Ie.info("Submission of trade transaction",{description:"Processing your buy order..."}),L()},[L]),le=S.useCallback(()=>{Ie.info("Submission of trade transaction",{description:"Processing your sell order..."}),z()},[z]);return S.useImperativeHandle(c,()=>({leverage:k,setLeverage:F,calculateMaxRatio:V=>{const ce=j();M();const re=ce;return T>0&&re>0?(re/T).toFixed(bo):V.toFixed(bo)}}),[k,F,j,M,T]),S.useEffect(()=>{if(A)if(A.success){const V=A.orderId?`Order ID: ${A.orderId}`:A.message||"Order placed successfully";Ie.success("Order Placed Successfully",{description:V})}else A.error&&Ie.error("Order Failed",{description:A.error})},[A]),h.jsxs("div",{className:"component",children:[h.jsx("h2",{children:g}),h.jsxs("div",{className:"trade-op-config",children:[h.jsxs("div",{className:"trade-op-badge",children:[h.jsx("span",{className:"trade-op-badge-label",children:C}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),h.jsxs("div",{className:"trade-op-badge",onClick:Le,style:{cursor:"pointer"},children:[h.jsx("span",{className:"trade-op-badge-label",children:E}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),h.jsxs("div",{className:"trade-op-badge",onClick:l,style:{cursor:"pointer"},children:[h.jsxs("span",{className:"trade-op-badge-label",children:[k,"x"]}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]})]}),h.jsxs("div",{className:"trade-op-order-type-selector",children:[h.jsx("button",{onClick:wt,className:`btn-toggle ${w===_g?"active":""}`,children:"MARKET"}),h.jsx("button",{onClick:N,className:`btn-toggle ${w===R0?"active":""}`,children:"LIMIT"})]}),w===R0&&h.jsx("div",{className:"trade-op-form-group",children:h.jsxs("div",{className:"trade-op-form-row",children:[h.jsx("label",{htmlFor:"price",className:"trade-op-label",children:"Price:"}),h.jsx("input",{id:"price",type:"number",value:v,onChange:we,placeholder:Pe,step:nI,min:ov})]})}),h.jsxs("div",{className:"trade-op-form-group",children:[h.jsxs("div",{className:"trade-op-form-row",style:{marginBottom:"0.5rem"},children:[h.jsx("label",{htmlFor:"size",className:"trade-op-label",children:"Size:"}),h.jsxs("div",{className:"trade-op-size-controls",children:[h.jsx("input",{id:"size",type:"number",step:"any",value:x===0?"":x,onChange:ve,placeholder:"0",min:ov,max:X,className:"trade-op-input"}),h.jsxs("div",{className:"trade-op-size-buttons",children:[h.jsx("button",{onClick:J,className:"btn-small",children:""}),h.jsx("button",{onClick:oe,className:"btn-small",children:""})]})]})]}),h.jsx("input",{type:"range",min:rv,max:iv,value:y,onChange:de,step:M0,style:{width:"100%"}}),h.jsxs("div",{className:"trade-op-slider-labels",children:[h.jsx("span",{children:"0"}),h.jsx("span",{children:"20"}),h.jsx("span",{children:"40"}),h.jsx("span",{children:"60"}),h.jsx("span",{children:"80"}),h.jsx("span",{children:"100"})]})]}),h.jsxs("div",{className:"trade-op-action-panel",children:[h.jsxs("div",{children:[h.jsx("div",{className:"trade-op-panel-title buy",children:"BUY"}),h.jsxs("div",{className:"trade-op-panel-size",children:["BTC ",x.toFixed(3),"/100.000"]}),h.jsx("button",{onClick:B,disabled:D||!_||G<=0,className:"btn-buy",children:D?"PLACING...":"BUY LONG"}),h.jsxs("div",{className:"trade-op-panel-details",children:[h.jsxs("div",{children:["Value ",se.toFixed(2)]}),h.jsxs("div",{children:["Margin ",be.toFixed(2)]})]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"trade-op-panel-title sell",children:"SELL"}),h.jsxs("div",{className:"trade-op-panel-size",children:[x.toFixed(3),"/100.000 BTC"]}),h.jsx("button",{onClick:le,disabled:D||!_||G<=0,className:"btn-sell",children:D?"PLACING...":"SELL SHORT"}),h.jsxs("div",{className:"trade-op-panel-details",children:[h.jsxs("div",{children:["Value ",se.toFixed(bo)]}),h.jsxs("div",{children:["Margin ",be.toFixed(bo)]})]})]})]}),h.jsx("div",{className:"trade-op-info-panel",children:h.jsxs("div",{children:[h.jsx("label",{children:_e}),h.jsxs("div",{className:"trade-op-available-funds",children:[X.toLocaleString("en-US",He)," ","USDC"]})]})})]})});async function PD(t,e=3,n=1e3){let s=null;for(let r=0;r<=e;r++)try{return await t()}catch(i){if(s=i instanceof Error?i:new Error(String(i)),r<e){const o=n*Math.pow(2,r);await new Promise(a=>setTimeout(a,o))}}throw s||new Error("Retry failed")}function TD(t){const e=t.useWebSocket!==!1,[n,s]=S.useState([]),[r,i]=S.useState(!0),[o,a]=S.useState(null),[l,c]=S.useState(!1),u=S.useRef(null),d=S.useRef(null),f=S.useRef(null),g=S.useRef(!1),m=S.useRef(t);m.current=t;const b=S.useCallback(x=>({id:x.id||x.orderId||x.order_id,orderId:x.orderId||x.order_id||x.id,marketId:x.marketId||x.market_id||x.assetPair,symbol:x.symbol||x.pair||`Market-${x.marketId||x.market_id||"N/A"}`,side:x.side||(x.direction==="LONG"?"LONG":x.direction==="SHORT"?"SHORT":void 0),type:x.type||x.orderType||x.order_type,quantity:x.quantity||x.size||x.amount||0,price:x.price||x.limitPrice||x.limit_price||0,filledQuantity:x.filledQuantity||x.filled_quantity||x.filled||0,remainingQuantity:x.remainingQuantity||x.remaining_quantity||x.remaining||0,status:x.status||x.orderStatus||x.order_status||"PENDING",timeInForce:x.timeInForce||x.time_in_force||x.tif,createdAt:x.createdAt||x.created_at||x.timestamp,updatedAt:x.updatedAt||x.updated_at}),[]),w=S.useCallback(async()=>{if(!u.current)return;const x=m.current;if(!x.walletAddress||x.walletAddress.trim()===""){a(null),s([]),i(!1);return}a(null);try{const v=await PD(()=>u.current.getOrders(x.walletAddress),3,1e3),k=Array.isArray(v)?v:(v==null?void 0:v.orders)||[];if(Array.isArray(k)){const C=k.map(b);s(E=>{if(E.length!==C.length)return C;const T=JSON.stringify(E),P=JSON.stringify(C);return T===P?E:C})}else s(C=>C.length===0?C:[])}catch(v){const k=v instanceof Error?v.message:"Failed to load orders";a(k),console.error("Failed to fetch orders after retries:",v)}finally{i(!1)}},[b]),p=S.useCallback(x=>x.id||x.orderId,[]),y=S.useCallback(x=>{let v=[];if(Array.isArray(x)?v=x:x.orders&&Array.isArray(x.orders)?v=x.orders:x&&typeof x=="object"&&(x.id||x.orderId||x.order_id?v=[x]:v=x.order||x.orderList||[]),v.length>0||x&&typeof x=="object"&&"count"in x&&x.count===0){const k=v.map(b);s(C=>{const E=new Map;C.forEach(D=>{const A=p(D);A&&E.set(A,D)}),k.forEach(D=>{var O;const A=p(D);if(!A){console.warn("Received order without ID, skipping:",D);return}const W=(O=D.status)==null?void 0:O.toUpperCase();W==="FILLED"||W==="CANCELLED"||W==="REJECTED"||W==="EXPIRED"||W==="CLOSED"||W==="DONE"?E.delete(A):E.set(A,D)});const T=Array.from(E.values()).filter(D=>p(D));if(C.length!==T.length)return T;const P=JSON.stringify(C),_=JSON.stringify(T);return P===_?C:T})}},[b,p]);return S.useEffect(()=>{if(!t.walletAddress||t.walletAddress.trim()===""){i(!1),a(null),s([]),d.current&&(d.current.disconnect(),d.current=null),f.current!==null&&(clearInterval(f.current),f.current=null);return}const x=new hn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=x,w(),e&&t.wsURL){const v=new co({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=v;const k=()=>{v.isConnected()&&!g.current&&(v.subscribeOrders(y),g.current=!0)};v.connect().then(()=>{c(!0),k()}).catch(T=>{console.error("Failed to connect WebSocket:",T),c(!1),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{w()},t.refreshInterval))});let C=null;const E=v.wsClient;return E&&(C=E.onStateChange(T=>{T===Je.Connected?(c(!0),g.current&&k(),f.current!==null&&(clearInterval(f.current),f.current=null)):(T===Je.Disconnected||T===Je.Reconnecting)&&(c(!1),g.current=!1,t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{w()},t.refreshInterval)))})),()=>{C&&C(),f.current!==null&&(clearInterval(f.current),f.current=null),d.current&&(d.current.unsubscribeOrders(y),d.current.disconnect())}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{w()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=null)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{orders:n,loading:r,error:o,isConnected:l,refresh:w}}function ID({baseURL:t=tu,wsURL:e,authToken:n,walletAddress:s,mnemonic:r,height:i=G8,refreshInterval:o=gx}){const{orders:a,loading:l,error:c,refresh:u}=TD({baseURL:t,wsURL:e,authToken:n,walletAddress:s,refreshInterval:o}),d=S.useRef(null),[f,g]=S.useState(null);ie.useEffect(()=>{console.log("[PendingOrders] Component rendered with props",{hasMnemonic:!!r,mnemonicLength:r==null?void 0:r.length,mnemonicType:typeof r,walletAddress:s,ordersCount:a==null?void 0:a.length,baseURL:t})},[r,s,a==null?void 0:a.length,t]);const{getSymbolByMarketId:m}=qa({baseURL:t,sessionToken:n,autoFetchMarkets:!1}),[b,w]=S.useState(Er),[p,y]=S.useState(null),[x,v]=S.useState(Ko),k=S.useMemo(()=>a.filter(R=>{const F=(R.status||"").toUpperCase(),L=F.startsWith("ORDER_STATUS_")?F:`ORDER_STATUS_${F}`;return b===Er?_v.some(z=>F===z.toUpperCase()||L===z.toUpperCase()):!_v.some(z=>F===z.toUpperCase()||L===z.toUpperCase())}),[a,b]),C=S.useMemo(()=>p?[...k].sort((R,F)=>{let L=0,z=0;switch(p){case xv:L=R.symbol||"",z=F.symbol||"";break;case bv:L=R.side||"",z=F.side||"";break;case yv:L=H(R.type),z=H(F.type);break;case vv:L=R.quantity||0,z=F.quantity||0;break;case wv:L=R.price||0,z=F.price||0;break;case Sv:L=R.filledQuantity||0,z=F.filledQuantity||0;break;case kv:L=R.status||"",z=F.status||"";break}if(typeof L=="string"&&typeof z=="string")return x===Vr?L.localeCompare(z):z.localeCompare(L);const I=Number(L),K=Number(z);return x===Vr?I-K:K-I}):k,[k,p,x]),E=R=>{p===R?v(x===Vr?Ko:Vr):(y(R),v(Ko))},T=R=>{const F=(R.side||"").toUpperCase();return F===Fr||F===ph},P=R=>{const F=(R.side||"").toUpperCase();return T(R)?F===Bu||F===Fr?Fr:ph:F===Fr||F===Bu?Bu:dI},_=yD,D=vD,A=R=>{const F=(R||"").toUpperCase(),L={ORDER_STATUS_PENDING:{short:"P",full:"Pending",color:A0},PENDING:{short:"P",full:"Pending",color:A0},ORDER_STATUS_OPEN:{short:"O",full:"Open",color:D0},OPEN:{short:"O",full:"Open",color:D0},NEW:{short:"N",full:"New",color:D0},ORDER_STATUS_FILLED:{short:"F",full:"Filled",color:Ev},FILLED:{short:"F",full:"Filled",color:Ev},ORDER_STATUS_CANCELED:{short:"C",full:"Canceled",color:N0},CANCELED:{short:"C",full:"Canceled",color:N0},CANCELLED:{short:"C",full:"Canceled",color:N0},ORDER_STATUS_REJECTED:{short:"R",full:"Rejected",color:Pv},REJECTED:{short:"R",full:"Rejected",color:Pv},PARTIALLY_FILLED:{short:"PF",full:"Partially Filled",color:A0}};if(L[F])return L[F];const z=F.startsWith("ORDER_STATUS_")?F:`ORDER_STATUS_${F}`;return L[z]?L[z]:{short:"?",full:R||DI,color:SI}},W=R=>R===Fr||R===Bu?kI:CI,H=R=>{if(!R)return AI;const F=R.toUpperCase();return F===lI||F===Iv?Iv:F===aI||F===Mv?Mv:F.startsWith(av)?F.replace(av,""):F},O=async R=>{var z;console.log("[PendingOrders.handleCancelOrder] Function called",{order:R,orderId:R.orderId||R.id,marketId:R.marketId,hasMnemonic:!!r,mnemonicType:typeof r,mnemonicLength:r==null?void 0:r.length,timestamp:new Date().toISOString()});const F=R.orderId||R.id,L=R.marketId;if(!F){console.error("Cancel order failed: Order ID is missing",R),Ie.error("Order ID is missing",{description:"Cannot cancel order without a valid order ID."});return}if(!L){console.error("Cancel order failed: Market ID is missing",R),Ie.error("Market ID is missing",{description:"Cannot cancel order without a valid market ID."});return}if(!r){console.warn("Cancel order failed: Mnemonic prop is not provided",{orderId:F,marketId:L,mnemonicProvided:!1}),Ie.error("Mnemonic required",{description:`Please provide the 'mnemonic' prop to the PendingOrders component. Order ID: ${F}`,duration:5e3});return}if(typeof r!="string"||r.trim()===""){console.warn("Cancel order failed: Mnemonic is empty or invalid",{orderId:F,marketId:L,mnemonicType:typeof r,mnemonicLength:r==null?void 0:r.length}),Ie.error("Invalid mnemonic",{description:`The mnemonic prop is empty or invalid. Please provide a valid mnemonic. Order ID: ${F}`,duration:5e3});return}if(f){console.log("Cancel order skipped: Already canceling another order",{currentCancelingOrderId:f,requestedOrderId:F}),Ie.info("Cancellation in progress",{description:"Please wait for the current cancellation to complete."});return}console.log("Starting order cancellation",{orderId:F,marketId:L}),g(F);try{d.current||(console.log("Initializing ExchangeClient for order cancellation"),d.current=new eu({baseURL:t,mnemonic:r.trim()}),await d.current.initialize(),console.log("ExchangeClient initialized successfully")),console.log("Calling cancelOrder API",{orderId:F,marketId:L});const I=await d.current.cancelOrder({orderId:F,marketId:L});if(console.log("Cancel order API response",I),(I==null?void 0:I.success)===!0||(I==null?void 0:I.result)==="success"||I&&!I.error&&!I.message)console.log(`Order ${F} canceled successfully`),Ie.success("Order canceled successfully",{description:`Order ${F} has been canceled.`}),u&&await u();else{const j=(I==null?void 0:I.error)||(I==null?void 0:I.message)||((z=I==null?void 0:I.response)==null?void 0:z.error)||"Failed to cancel order";throw console.error("Cancel order failed: API returned error",{orderId:F,marketId:L,response:I}),new Error(j)}}catch(I){const K=I instanceof Error?I.message:"Unknown error occurred";console.error(`Failed to cancel order ${F}:`,{error:I,errorMessage:K,orderId:F,marketId:L,stack:I instanceof Error?I.stack:void 0}),Ie.error("Failed to cancel order",{description:`${K}. Order ID: ${F}`,duration:6e3})}finally{g(null)}};return!s||s.trim()===""?h.jsx(f5,{message:MI}):l?h.jsx(lu,{message:_I}):c?h.jsx(cu,{error:c}):h.jsxs("div",{className:"layout-container",style:{height:i},children:[h.jsxs(uu,{title:b===Er?TI:II,children:[h.jsxs("div",{className:"btn-tab",children:[h.jsx("span",{style:{fontSize:"0.7rem"},children:""}),h.jsx("span",{children:"Current Symbol"})]}),h.jsxs("div",{onClick:()=>w(b===Er?Cv:Er),className:`btn-tab ${b===Cv?"active":""}`,children:[h.jsx("img",{src:"/transfer-net.svg"}),h.jsx("span",{children:b===Er?OI:RI})]})]}),h.jsxs("div",{className:"table-container shrinkable",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:Tv},children:[h.jsx(Nt,{field:xv,currentSortField:p,sortDirection:x,onSort:E,children:"Symbol"}),h.jsx(Nt,{field:bv,currentSortField:p,sortDirection:x,onSort:E,children:"Side"}),h.jsx(Nt,{field:yv,currentSortField:p,sortDirection:x,onSort:E,children:"Type"}),h.jsx(Nt,{field:vv,currentSortField:p,sortDirection:x,onSort:E,children:"Quantity"}),h.jsx(Nt,{field:wv,currentSortField:p,sortDirection:x,onSort:E,children:"Price"}),h.jsx(Nt,{field:Sv,currentSortField:p,sortDirection:x,onSort:E,children:"Filled"}),h.jsx(Nt,{field:kv,currentSortField:p,sortDirection:x,onSort:E,children:"Status"}),h.jsx(g5,{center:!0,children:"Actions"})]}),C.length===0?h.jsx(La,{message:b===Er?EI:PI}):C.map((R,F)=>{const L=P(R),z=W(L),{short:I,full:K,color:j}=A(R.status),M=R.marketId?m(R.marketId)||R.symbol||`m-${R.marketId}`:R.symbol||"N/A";return h.jsxs("div",{className:`table-row ${F%2===0?"even":""}`,style:{gridTemplateColumns:Tv},children:[h.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:h.jsx("span",{children:M})}),h.jsx("div",{className:"table-cell center",style:{color:z,fontWeight:500},children:L}),h.jsx("div",{className:"table-cell center",children:H(R.type)}),h.jsx("div",{className:"table-cell right monospace",children:D(R.quantity)}),h.jsx("div",{className:"table-cell right monospace",children:_(R.price)}),h.jsxs("div",{className:"table-cell right monospace",children:[D(R.filledQuantity)," /"," ",D(R.quantity)]}),h.jsx("div",{className:"table-cell center",style:{color:j,fontWeight:600,cursor:"help",fontSize:"0.9rem"},title:K,children:I}),h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},onClick:$=>{console.log("[PendingOrders] Actions div clicked",{target:$.target,currentTarget:$.currentTarget,orderId:R.orderId||R.id})},children:b===Er?h.jsxs(h.Fragment,{children:[(!r||r.trim()==="")&&h.jsx("span",{style:{fontSize:"0.7rem",color:"#ffc107",cursor:"help"},title:"Mnemonic required to cancel orders",children:""}),h.jsx("div",{onClick:$=>{console.log("[PendingOrders] Cancel button wrapper clicked",{target:$.target,currentTarget:$.currentTarget,orderId:R.orderId||R.id})},onMouseDown:$=>{console.log("[PendingOrders] Cancel button wrapper mouse down",{target:$.target,orderId:R.orderId||R.id})},children:(()=>{const $=!r||r.trim()===""||f===(R.orderId||R.id)||!!f;return h.jsx(SD,{onClick:q=>{q.preventDefault(),q.stopPropagation(),console.log("[PendingOrders] Cancel button onClick fired",{orderId:R.orderId||R.id,marketId:R.marketId,hasMnemonic:!!r,mnemonicLength:r==null?void 0:r.length,mnemonicType:typeof r,cancelingOrderId:f,isDisabled:$,event:q}),$?console.warn("[PendingOrders] Cancel order prevented - button is disabled",{orderId:R.orderId||R.id,isDisabled:$}):O(R)},disabled:$})})()})]}):h.jsx("span",{className:"color-text-dim",children:""})})]},`order-${R.id||R.orderId||F}`)})]})]})}const MD=ie.memo(ID);function RD({baseURL:t=tu,authToken:e,walletAddress:n,height:s=Y8,refreshInterval:r=gx,selectedBucketId:i=null}){const{positions:o,loading:a,error:l}=s_({baseURL:t,authToken:e,walletAddress:n,refreshInterval:r}),[c,u]=S.useState(O0),[d,f]=S.useState(null),[g,m]=S.useState(Ko),b=x=>{if(x==null)return $u;try{return(typeof x=="string"||typeof x=="number"?Ee(x):0).toFixed(2).replace(/\.?0+$/,"")}catch{return $u}},w=S.useMemo(()=>{let x=[...o];return i&&(x=x.filter(v=>{var E;const k=(E=v.bucketId)==null?void 0:E.toString(),C=i.toString();return k===C})),d?x.sort((v,k)=>{let C=0,E=0;switch(d){case lv:C=v.symbol||"",E=k.symbol||"";break;case cv:try{C=v.leverage?Ee(v.leverage):0,E=k.leverage?Ee(k.leverage):0}catch{C=0,E=0}break;case uv:C=v.size||0,E=k.size||0;break;case dv:C=v.liquidationPrice||0,E=k.liquidationPrice||0;break;case hv:C=v.unrealizedPnL||0,E=k.unrealizedPnL||0;break;case fv:C=v.entryPrice||0,E=k.entryPrice||0;break;case pv:C=v.margin||0,E=k.margin||0;break}if(typeof C=="string"&&typeof E=="string")return g===Vr?C.localeCompare(E):E.localeCompare(C);const T=Number(C),P=Number(E);return g===Vr?T-P:P-T}):x},[o,d,g,i]),p=x=>{d===x?m(g===Vr?Ko:Vr):(f(x),m(Ko))},y=x=>{console.log("Close position:",x),Ie.warning("Feature not implemented",{description:`Close position for ${x.symbol} - This functionality needs to be implemented`})};return a?h.jsx(lu,{message:pI}):l?h.jsx(cu,{error:l}):h.jsxs("div",{className:"layout-container",style:{height:s},children:[h.jsxs(uu,{title:`${mI} ${i?`(Bucket ${i})`:""}`,children:[h.jsx("div",{onClick:()=>{u(O0),f(null)},className:`btn-tab ${c===O0?"active":""}`,children:xI}),h.jsxs("div",{onClick:()=>{u(gv),f(null)},className:`btn-tab ${c===gv?"active":""}`,children:[h.jsx("img",{src:"/bucket-g.svg"}),h.jsx("span",{children:bI})]})]}),h.jsxs("div",{className:"table-container",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:mv},children:[h.jsx(Nt,{field:lv,currentSortField:d,sortDirection:g,onSort:p,children:"Symbol"}),h.jsx(Nt,{field:cv,currentSortField:d,sortDirection:g,onSort:p,children:"Leverage"}),h.jsx(Nt,{field:uv,currentSortField:d,sortDirection:g,onSort:p,children:"Size"}),h.jsx(Nt,{field:dv,currentSortField:d,sortDirection:g,onSort:p,children:"Liq. Price"}),h.jsx(Nt,{field:hv,currentSortField:d,sortDirection:g,onSort:p,children:"P/L"}),h.jsx(Nt,{field:fv,currentSortField:d,sortDirection:g,onSort:p,children:"Entry Price"}),h.jsx(Nt,{field:pv,currentSortField:d,sortDirection:g,onSort:p,children:"Margin"}),h.jsx(g5,{center:!0,children:"Actions"})]}),w.length===0?h.jsx(La,{message:gI}):w.map((x,v)=>{const k=x.side===Fr,C=(x.unrealizedPnL||0)>=0?hI:fI,E=b(x.leverage);return h.jsxs("div",{className:`table-row ${v%2===0?"even":""}`,style:{gridTemplateColumns:mv},children:[h.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:h.jsx("span",{children:x.symbol})}),h.jsxs("div",{className:"color-buy",style:{fontWeight:500},children:[k?Fr:ph," ",E===$u?$u:`${E}x`," @"," ",x.marginMode||Mc]}),h.jsx("div",{className:"color-buy right",children:d5(x.size)}),h.jsx("div",{className:"table-cell right",children:jg(x.liquidationPrice)}),h.jsx("div",{className:"table-cell right",style:{color:C,fontWeight:500},children:xD(x.unrealizedPnL)}),h.jsx("div",{className:"table-cell right",children:jg(x.entryPrice)}),h.jsx("div",{className:"table-cell right",children:mD(x.margin)}),h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsx(kD,{onClick:()=>y(x)})})]},`position-${x.marketId}-${v}`)})]})]})}const OD=ie.memo(RD);function AD(t){const e=t.useWebSocket!==!1,[n,s]=S.useState([]),[r,i]=S.useState(!0),[o,a]=S.useState(null),[l,c]=S.useState(0),u=S.useRef(null),d=S.useRef(null),f=S.useRef(null),g=S.useRef(!0),m=S.useRef(!1),b=S.useRef(t);b.current=t;const w=S.useCallback(v=>{const k=String(v.bucketId||v.bucket_id||v.id||""),C=v.marginMode||v.margin_mode||v.margin_type||"CROSS",E=C==="ISOLATED"||C==="Isolated"||C==="ISOLATE"?"Isolated":"Cross",T=v.maintenanceMargin||v.maintenance_margin||v.usedMargin||v.used_margin||0,P=v.nominalValue||v.nominal_value||v.totalEquity||v.total_equity||v.totalMargin||v.total_margin||v.dedicated_margin||0,_=typeof T=="string"||typeof T=="number"?Ee(T):0,D=typeof P=="string"||typeof P=="number"?Ee(P):0,A=D>0?Math.min(_/D,1):0;return{bucketId:k,marginType:E,maintenanceMargin:_,nominalValue:D,riskRatio:A}},[]),p=S.useCallback(async()=>{if(!u.current)return;const v=b.current;if(!v.walletAddress||v.walletAddress.trim()===""){c(0);return}try{const k=await u.current.getBalanceDecimal(v.walletAddress,"USDC"),C=(k==null?void 0:k.available)||0;c(C)}catch(k){console.warn("Failed to fetch spot wallet balance (USDC):",k),c(0)}},[]),y=S.useCallback(async()=>{if(!u.current)return;const v=b.current;if(!v.walletAddress||v.walletAddress.trim()===""){a(null),s([]),i(!1),g.current=!1;return}a(null),g.current&&i(!0);try{p();let k=[];if(v.walletAddress)try{k=await u.current.getBuckets(v.walletAddress),Array.isArray(k)||(k=[])}catch(E){console.warn("Failed to fetch buckets, attempting to derive from positions:",E);try{const T=await u.current.getPositionsDecimal(v.walletAddress);if(Array.isArray(T)){const P=new Map;T.forEach(_=>{const D=_.bucketId||_.bucket_id||"default",A=P.get(D)||{positions:[],totalMargin:0,marginMode:_.marginMode||_.margin_mode||"CROSS"};A.positions.push(_),A.totalMargin+=_.margin||0,P.set(D,A)}),k=Array.from(P.entries()).map(([_,D])=>({bucketId:_,marginMode:D.marginMode,totalMargin:D.totalMargin,maintenanceMargin:D.totalMargin*.1,totalEquity:D.totalMargin}))}}catch(T){throw new Error(`Failed to fetch buckets: ${E instanceof Error?E.message:String(E)}. Also failed to derive from positions: ${T instanceof Error?T.message:String(T)}`)}}else throw new Error("walletAddress is required to fetch bucket collections");const C=k.map(w);s(C),g.current=!1}catch(k){const C=k instanceof Error?k.message:"Failed to load bucket collections";a(C),console.error("Failed to fetch bucket collections:",k),g.current=!1}finally{i(!1)}},[w,p]),x=S.useCallback(v=>{if(v.buckets&&Array.isArray(v.buckets)){const k=v.buckets.map(w);s(C=>{if(C.length!==k.length)return k;const E=JSON.stringify(C),T=JSON.stringify(k);return E===T?C:k}),g.current&&(g.current=!1,i(!1))}},[w]);return S.useEffect(()=>{if(!t.walletAddress||t.walletAddress.trim()===""){i(!1),a(null),s([]),d.current&&(d.current.disconnect(),d.current=null),f.current!==null&&(clearInterval(f.current),f.current=null);return}const v=new hn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=v,g.current=!0,m.current=!1,y(),e&&t.wsURL){const k=new co({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=k;const C=()=>{k.isConnected()&&!m.current&&(k.subscribeBuckets(x),m.current=!0)};k.connect().then(()=>{C()}).catch(P=>{console.error("Failed to connect WebSocket:",P),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{y()},t.refreshInterval))});let E=null;const T=k.wsClient;return T&&(E=T.onStateChange(P=>{P===Je.Connected?(m.current&&C(),f.current!==null&&(clearInterval(f.current),f.current=null)):P===Je.Disconnected&&t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{y()},t.refreshInterval))})),()=>{E&&E(),d.current&&(d.current.unsubscribeBuckets(x),d.current.disconnect(),d.current=null),f.current!==null&&(clearInterval(f.current),f.current=null)}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{y()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=null)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e,x]),{collections:n,loading:r,error:o,refresh:y,spotWalletBalance:l}}function DD({isOpen:t,currentLeverage:e,tempLeverage:n,maxRatio:s,onLeverageChange:r,onConfirm:i,onCancel:o}){if(!t)return null;const a=h.jsx("div",{className:"modal-overlay",onClick:o,children:h.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Select Leverage"})}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{className:"leverage-max-ratio",children:[h.jsx("div",{className:"leverage-max-ratio-label",children:"Maximum Ratio"}),h.jsxs("div",{className:"leverage-max-ratio-value",children:[s,"x"]})]}),h.jsxs("div",{className:"leverage-slider-container",children:[h.jsx("input",{type:"range",min:Z8,max:eI,value:n,onChange:l=>r(parseInt(l.target.value)),className:"leverage-slider"}),h.jsxs("div",{className:"leverage-slider-labels",children:[h.jsx("span",{children:"1x"}),h.jsxs("span",{className:"leverage-current-value",children:[n,"x"]}),h.jsx("span",{children:"100x"})]})]})]}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),h.jsx("button",{onClick:i,className:"btn btn-primary",children:"Confirm"})]})]})});return typeof document<"u"?ao.createPortal(a,document.body):null}function ND({isOpen:t,fromValue:e,toValue:n,options:s,bucketsData:r,transferAmount:i,createBucketAmount:o,onFromChange:a,onToChange:l,onTransferAmountChange:c,onCreateBucketAmountChange:u,onConfirm:d,onCancel:f,spotWalletBalance:g=0,activeTab:m,onActiveTabChange:b,isTransferring:w=!1,onOpen:p}){const[y,x]=S.useState("transfer"),v=m??y,k=b??x,C=S.useRef(!1);S.useEffect(()=>{t&&!C.current&&p&&p(),C.current=t},[t,p]);const E=S.useMemo(()=>e==="spot-wallet"?null:r.find(H=>H.bucketId===e),[r,e]),T=S.useMemo(()=>e==="spot-wallet"?g:(E==null?void 0:E.nominalValue)||0,[e,g,E]),P=10,_=Math.max(P,T);if(ie.useEffect(()=>{if(e&&_>0){const H=v==="transfer"?i:o;H>_?v==="transfer"?c(_):u(_):H<P&&_>=P&&(v==="transfer"?c(P):u(P))}},[e,_,v,i,o,c,u]),!t)return null;const D=e&&n&&i>=P&&i<=_,A=e&&o>=P&&o<=_,W=h.jsx("div",{className:"modal-overlay",onClick:f,children:h.jsxs("div",{className:"modal-content transfer-modal-content",onClick:H=>H.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Transfer Funds"})}),h.jsxs("div",{className:"transfer-modal-tabs",children:[h.jsx("button",{className:`transfer-tab ${v==="transfer"?"active":""}`,onClick:()=>k("transfer"),type:"button",disabled:w,children:"Transfer"}),h.jsx("button",{className:`transfer-tab ${v==="create"?"active":""}`,onClick:()=>k("create"),type:"button",disabled:w,children:"Create Bucket"})]}),h.jsx("div",{className:"modal-body",children:v==="transfer"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"From"}),h.jsxs("select",{value:e,onChange:H=>a(H.target.value),className:"transfer-select",children:[h.jsx("option",{value:"",children:"Select source bucket"}),s.map(H=>h.jsx("option",{value:H.value,children:H.label},H.value))]})]}),h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"To"}),h.jsxs("select",{value:n,onChange:H=>l(H.target.value),className:"transfer-select",disabled:!e,children:[h.jsx("option",{value:"",children:"Select destination bucket"}),s.filter(H=>H.value!==e).map(H=>h.jsx("option",{value:H.value,children:H.label},H.value))]})]}),e&&_>=P?h.jsxs("div",{className:"transfer-field-group",children:[h.jsxs("div",{className:"transfer-amount-header",children:[h.jsx("label",{className:"transfer-field-label",children:"Amount"}),h.jsxs("div",{className:"transfer-available-balance",children:["Available: ",Qt(T)]})]}),h.jsx("div",{className:"transfer-amount-display",children:h.jsx("span",{className:"transfer-amount-value",children:Qt(i)})}),h.jsxs("div",{className:"transfer-amount-container",children:[h.jsx("input",{type:"range",min:P,max:_,step:.01,value:i,onChange:H=>c(parseFloat(H.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(i-P)/(_-P)*100}%`}}),h.jsxs("div",{className:"transfer-amount-labels",children:[h.jsx("span",{children:Qt(P)}),h.jsx("span",{children:Qt(_)})]})]})]}):e?h.jsx("div",{className:"transfer-field-group",children:h.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required: ",Qt(P)]})}):null]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"From"}),h.jsxs("select",{value:e,onChange:H=>a(H.target.value),className:"transfer-select",children:[h.jsx("option",{value:"",children:"Select source bucket"}),s.map(H=>h.jsx("option",{value:H.value,children:H.label},H.value))]})]}),e&&_>=P?h.jsxs("div",{className:"transfer-field-group",children:[h.jsxs("div",{className:"transfer-amount-header",children:[h.jsx("label",{className:"transfer-field-label",children:"Amount"}),h.jsxs("div",{className:"transfer-available-balance",children:["Available: ",Qt(T)]})]}),h.jsx("div",{className:"transfer-amount-display",children:h.jsx("span",{className:"transfer-amount-value",children:Qt(o)})}),h.jsxs("div",{className:"transfer-amount-container",children:[h.jsx("input",{type:"range",min:P,max:_,step:.01,value:o,onChange:H=>u(parseFloat(H.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(o-P)/(_-P)*100}%`}}),h.jsxs("div",{className:"transfer-amount-labels",children:[h.jsx("span",{children:Qt(P)}),h.jsx("span",{children:Qt(_)})]})]})]}):e?h.jsx("div",{className:"transfer-field-group",children:h.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required: ",Qt(P)]})}):null]})}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:f,className:"btn btn-secondary",disabled:w,children:"Cancel"}),h.jsx("button",{onClick:d,className:"btn btn-primary",disabled:w||(v==="transfer"?!D:!A),children:w?"Processing...":"Confirm"})]})]})});return typeof document<"u"?ao.createPortal(W,document.body):null}function LD({baseURL:t=tu,authToken:e,walletAddress:n,mnemonic:s,height:r=V8,refreshInterval:i=gx,onBucketSelect:o}){const{collections:a,loading:l,error:c,spotWalletBalance:u,refresh:d}=AD({baseURL:t,authToken:e,walletAddress:n,refreshInterval:i}),[f,g]=S.useState(null),[m,b]=S.useState("desc"),[w,p]=S.useState(!1),[y,x]=S.useState(""),[v,k]=S.useState(""),[C,E]=S.useState(10),[T,P]=S.useState(10),[_,D]=S.useState("transfer"),[A,W]=S.useState(!1),H=S.useRef(null),O=S.useMemo(()=>f?[...a].sort((M,$)=>{let q=0,X=0;switch(f){case"marginType":q=M.marginType||"",X=$.marginType||"";break;case"maintenanceMargin":q=M.maintenanceMargin||0,X=$.maintenanceMargin||0;break;case"nominalValue":q=M.nominalValue||0,X=$.nominalValue||0;break;case"riskRatio":q=M.riskRatio||0,X=$.riskRatio||0;break;case"bucketId":q=M.bucketId||"",X=$.bucketId||"";break}if(typeof q=="string"&&typeof X=="string")return m==="asc"?q.localeCompare(X):X.localeCompare(q);const G=Number(q),ee=Number(X);return m==="asc"?G-ee:ee-G}):a,[a,f,m]),R=M=>{f===M?b(m==="asc"?"desc":"asc"):(g(M),b("desc"))},F=(M,$)=>{o&&o(M,$)},L=()=>{p(!0),x(""),k(""),E(10),P(10),D("transfer")},z=()=>{p(!1),x(""),k(""),E(10),P(10),D("transfer")};S.useEffect(()=>{if(!s||!t){H.current=null;return}const M=new eu({baseURL:t,mnemonic:s});M.initialize().then(()=>{H.current=M}).catch($=>{const q=$ instanceof Error?$.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",$),Ie.error("Exchange client initialization failed",{description:q}),H.current=null})},[s,t]);const I=async()=>{if(!s){Ie.error("Mnemonic required",{description:"Mnemonic is required to perform transfers. Please provide a mnemonic to enable transfer functionality."});return}const M=H.current;if(!M){Ie.error("Exchange client not ready",{description:"Exchange client is still initializing. Please wait a moment and try again."});return}W(!0);try{const $="USDC";let q,X="";const G=xt(C);if(_==="transfer"){if(!y||!v)throw new Error("Please select both source and destination");if(y==="spot-wallet"&&v==="spot-wallet")throw new Error("Cannot transfer from spot wallet to spot wallet");y==="spot-wallet"?(q=await M.extractToBucket({bucketId:v,assetId:$,amount:G}),X=`Successfully transferred ${Qt(C)} from Spot Wallet to ${v}`):v==="spot-wallet"?(q=await M.withdrawFromBucket({bucketId:y,assetId:$,amount:G}),X=`Successfully transferred ${Qt(C)} from ${y} to Spot Wallet`):(q=await M.bucketTransfer({fromBucketId:y,toBucketId:v,assetId:$,amount:G}),X=`Successfully transferred ${Qt(C)} from ${y} to ${v}`)}else throw y?y==="spot-wallet"?new Error("Create Bucket from spot wallet requires a target bucket ID. Please use the Transfer tab to extract funds to an existing bucket, or create the bucket first."):new Error("Create Bucket requires a target bucket ID. Please use the Transfer tab to transfer between buckets."):new Error("Please select a source");console.log("Transfer successful:",q),Ie.success("Transfer completed",{description:X}),d(),p(!1),x(""),k(""),E(10),P(10)}catch($){const q=$ instanceof Error?$.message:"Transfer failed";Ie.error("Transfer failed",{description:q}),console.error("Transfer error:",$)}finally{W(!1)}},K=S.useMemo(()=>{const M=O.map($=>({value:$.bucketId,label:`${$.bucketId} (${Qt($.nominalValue)})`}));return[{value:"spot-wallet",label:`Spot Wallet (${Qt(u)})`},...M]},[O,u]),j=S.useMemo(()=>O.map(M=>({bucketId:M.bucketId,nominalValue:M.nominalValue})),[O]);return!n||n.trim()===""?h.jsx(f5,{message:"Wallet address required to view bucket collections"}):l?h.jsx(lu,{message:"Loading bucket collections..."}):c?h.jsx(cu,{error:c}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[h.jsx(uu,{title:"BUCKET COLLECTIONS",children:h.jsxs("div",{onClick:L,className:"btn-tab",children:[h.jsx("img",{src:"/transfer-repu.svg"}),h.jsx("span",{children:"Transfer"})]})}),h.jsxs("div",{className:"table-container shrinkable",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[h.jsx(Nt,{field:"bucketId",currentSortField:f,sortDirection:m,onSort:R,children:"Bucket ID"}),h.jsx(Nt,{field:"marginType",currentSortField:f,sortDirection:m,onSort:R,children:"Margin Type"}),h.jsx(Nt,{field:"maintenanceMargin",currentSortField:f,sortDirection:m,onSort:R,children:"Maintenance Margin"}),h.jsx(Nt,{field:"nominalValue",currentSortField:f,sortDirection:m,onSort:R,children:"Balance"}),h.jsx(Nt,{field:"riskRatio",currentSortField:f,sortDirection:m,onSort:R,children:"Risk Ratio"})]}),O.length===0?h.jsx(La,{message:"No bucket collections"}):O.map((M,$)=>h.jsxs("div",{onClick:()=>F(M.bucketId,M.nominalValue),className:`table-row clickable ${$%2===0?"even":""}`,style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[h.jsx("div",{className:"table-cell primary",children:M.bucketId}),h.jsx("div",{className:"table-cell",children:M.marginType.toUpperCase()}),h.jsx("div",{className:"table-cell right",children:Qt(M.maintenanceMargin)}),h.jsx("div",{className:"table-cell right",children:Qt(M.nominalValue)}),h.jsx("div",{className:"table-cell right",style:{color:(M.riskRatio||0)>.5?"#ff6b6b":"#51cf66",fontWeight:500},children:bD(M.riskRatio)})]},`collection-${M.bucketId}-${$}`))]}),h.jsx(ND,{isOpen:w,fromValue:y,toValue:v,options:K,bucketsData:j,transferAmount:C,createBucketAmount:T,onFromChange:x,onToChange:k,onTransferAmountChange:E,onCreateBucketAmountChange:P,onConfirm:I,onCancel:z,spotWalletBalance:u,activeTab:_,onActiveTabChange:D,isTransferring:A,onOpen:d})]})}const jD=ie.memo(LD);function FD(t){var N;const[e,n]=S.useState([]),[s,r]=S.useState("vertical"),[i,o]=S.useState(!0),[a,l]=S.useState(!1),[c,u]=S.useState(null),[d,f]=S.useState(void 0),[g,m]=S.useState(!1),[b,w]=S.useState(10),p=S.useRef(null),y=S.useRef(null),x=S.useRef(!1),v=S.useRef(su),k=S.useRef(cf),C=S.useRef([]),E=v.current,T=k.current,[P,_]=S.useState(()=>localStorage.getItem("authToken")||""),{markets:D,selectedMarketId:A,selectedMarketSymbol:W,setSelectedMarketId:H,loadingMarkets:O,getError:R}=qa({baseURL:E,sessionToken:P,autoFetchMarkets:!0}),{mnemonic:F,walletAddress:L,authToken:z,setMnemonic:I}=nu();S.useEffect(()=>{F||I("legal winner thank year wave sausage worth useful legal winner thank yellow")},[F,I]),S.useEffect(()=>{C.current=e},[e]),S.useEffect(()=>{z&&(_(z),localStorage.setItem("authToken",z))},[z]);const K=S.useRef(!1);S.useEffect(()=>{P&&P.trim()!==""&&!K.current&&localStorage.getItem("authToken")!==P&&localStorage.setItem("authToken",P),K.current=!1},[P]),S.useEffect(()=>{const J=de=>{de.key==="authToken"&&de.newValue&&(K.current=!0,_(de.newValue))};window.addEventListener("storage",J);const oe=setInterval(()=>{const de=localStorage.getItem("authToken");_(we=>de&&de!==we?(K.current=!0,de):we)},5e3);return()=>{window.removeEventListener("storage",J),clearInterval(oe)}},[]);const j=S.useMemo(()=>{var J,oe,de,we;return D.length>0?((J=D.find(ve=>ve.active))==null?void 0:J.market_id)??D[0].market_id??((de=(oe=D.find(ve=>ve.active))==null?void 0:oe.id)==null?void 0:de.toString())??((we=D[0].id)==null?void 0:we.toString())??null:null},[D]),M=S.useCallback((J,oe)=>{if(i)return;const de=C.current,we=J;if(de.length!==we.length){x.current=!0,C.current=we,n(we);return}let ve=!1;for(let B=0;B<de.length;B++){const le=de[B],V=we[B];if(le.x!==V.x||le.y!==V.y||le.w!==V.w||le.h!==V.h||le.i!==V.i){ve=!0;break}}ve&&(x.current=!0,C.current=we,n(we))},[i]),$=S.useCallback(()=>{r(J=>J==="horizontal"?"vertical":J==="vertical"?null:"horizontal")},[]),q=S.useCallback(()=>{l(J=>!J)},[]);S.useEffect(()=>(a?document.body.classList.add("full-width-screen"):document.body.classList.remove("full-width-screen"),()=>{document.body.classList.remove("full-width-screen")}),[a]);const X=S.useCallback(()=>{o(J=>!J),i&&(x.current=!1)},[i]),G=S.useCallback(()=>{p.current&&(x.current=!1,p.current.generateNewLayout())},[]),ee=S.useMemo(()=>e.map(function(J){return h.jsxs("div",{className:"layoutItem",children:[h.jsx("b",{children:J.i}),": [",J.x,", ",J.y,", ",J.w,", ",J.h,"]"]},J.i)}),[e]),se=A||"",be=30,He=10,Pe=12,_e=S.useMemo(()=>{if(e.length===0)return{};const J={};for(let oe=0;oe<=6;oe++){const de=e.find(we=>we.i===oe.toString());if(de){const we=de.h*be+(de.h-1)*He,ve=de.w/Pe*100;J[oe]={width:`${ve}%`,height:`${we}px`}}}return J},[e]),Le=S.useMemo(()=>{var J,oe,de,we;return[h.jsx(pD,{symbol:"BINANCE:BTCUSDT",interval:"5",isCollapsed:!1},"tv"),h.jsx(CD,{baseURL:E,wsURL:T,marketId:se,maxDepth:20,height:(J=_e[1])==null?void 0:J.height,authToken:P},`clob-${se}`),h.jsx(_D,{baseURL:E,wsURL:T,marketId:se,symbol:W||void 0,authToken:P},`price-${se}`),h.jsx(ED,{ref:y,baseURL:E,marketId:se,selectedBucketBalance:d,selectedBucketId:c,onLeverageClick:()=>{y.current&&w(y.current.leverage),m(!0)}},`trade-${se}`),h.jsx(MD,{baseURL:E,wsURL:T,authToken:P,walletAddress:L,mnemonic:F,height:(oe=_e[4])==null?void 0:oe.height,refreshInterval:5e3},`order-${se}`),h.jsx(OD,{baseURL:E,authToken:P,walletAddress:L,height:(de=_e[5])==null?void 0:de.height,refreshInterval:5e3,selectedBucketId:c},`pos-${se}`),h.jsx(jD,{baseURL:E,mnemonic:F,authToken:P,walletAddress:L,height:(we=_e[6])==null?void 0:we.height,refreshInterval:5e3,onBucketSelect:(ve,B)=>{u(ve),f(B)}},`bucket-${se}`)]},[E,T,P,L,se,W,_e,c,d]);if(O)return h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:h.jsx("div",{children:"Loading markets..."})});const wt=R("markets");return wt?h.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:h.jsxs("div",{children:["Error loading markets: ",wt]})}):D.length===0||!A?h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:h.jsx("div",{children:"No markets available."})}):h.jsxs("div",{children:[h.jsxs("div",{className:"App-section",children:[h.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Configuration"}),h.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Market:"}),h.jsx("select",{value:A||"",onChange:J=>{const oe=J.target.value;oe&&H(oe)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:D.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),D.map(J=>{var le,V;const oe=J.market_id??((le=J.id)==null?void 0:le.toString())??"",de=J.market_id??((V=J.id)==null?void 0:V.toString())??"",we=de.length>8?`${de.substring(0,8)}...`:de,ve=J.moniker?J.moniker:J.symbol?J.symbol:J.baseAsset&&J.quoteAsset?`${J.baseAsset}-${J.quoteAsset}`:`Market ID: ${de}`,B=J.active?" [ACTIVE]":"";return h.jsxs("option",{value:oe,children:[ve," - ID: ",we,B]},oe)})]})}),D.length>0&&h.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:A===j?"#51cf66":"#ff9f43"},children:A===j?` Auto-selected default market (ID: ${j==null?void 0:j.substring(0,16)}...)`:` Manual selection (ID: ${A==null?void 0:A.substring(0,16)}...)`})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Mnemonic (for wallet address):"}),h.jsx("input",{type:"text",value:F||"",onChange:J=>I(J.target.value),placeholder:"Enter mnemonic to generate wallet address",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:"white",color:"#333"}})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Wallet Address:"}),h.jsx("input",{type:"text",value:L||"",disabled:!!(F&&F.trim()!==""),placeholder:"automatic (from mnemonic via useOnboard)",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:L?"#e7f3ff":"#f5f5f5",color:"#333"}}),L&&h.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#28a745"},children:" Auto-generated from mnemonic via useOnboard hook"})]})]}),h.jsx("h3",{children:"Layout Controls"}),h.jsx("button",{onClick:G,style:{marginRight:"0.5rem"},children:"Generate New Layout"}),h.jsx("button",{onClick:X,style:{marginRight:"0.5rem"},children:i?"Enable Dragging":"Disable Dragging"}),h.jsx("button",{onClick:$,style:{marginRight:"0.5rem"},children:"Change Compaction Type"}),h.jsx("button",{onClick:q,children:"Full Width Screen"}),h.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9em",color:"#fff"},children:["Compaction type:"," ",s?s.charAt(0).toUpperCase()+s.slice(1):"No Compaction"]})]}),h.jsx(Lg,{ref:p,onLayoutChange:M,slotContent:Le,compactType:s,allStatic:i,onCompactTypeChange:$,onToggleStatic:X,onNewLayout:G}),h.jsxs("div",{className:"layoutJSON",children:["Displayed as ",h.jsx("code",{children:"[x, y, w, h]"}),":",h.jsx("div",{className:"columns",children:ee})]}),h.jsx(DD,{isOpen:g,currentLeverage:((N=y.current)==null?void 0:N.leverage)||10,tempLeverage:b,maxRatio:y.current?y.current.calculateMaxRatio(b):b.toFixed(2),onLeverageChange:w,onConfirm:()=>{y.current&&y.current.setLeverage(b),m(!1)},onCancel:()=>{y.current&&w(y.current.leverage),m(!1)}})]})}function zD(){const[t,e]=S.useState(su),[n,s]=S.useState(cf),[r,i]=S.useState(localStorage.getItem("authToken")||""),[o,a]=S.useState(""),[l,c]=S.useState(xx),[u,d]=S.useState("BTC/USDT"),[f,g]=S.useState(1),[m,b]=S.useState(!0),[w,p]=S.useState(5e3),y=u.split(",").map(O=>O.trim()).filter(O=>O.length>0),{fundingRates:x,getFundingRate:v,getLatestFundingRate:k,loading:C,error:E,isConnected:T,refresh:P}=FI({baseURL:t,wsURL:n,symbols:y,historyDepth:f,authToken:r,walletAddress:o,deviceID:l}),{positions:_,loading:D,error:A,isConnected:W,refresh:H}=s_({baseURL:t,wsURL:m?n:void 0,authToken:r,walletAddress:o,deviceID:l,refreshInterval:m?void 0:w,useWebSocket:m});return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{style:{marginBottom:"2rem",color:"#333"},children:"Hooks Test Page"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"1rem",color:"#495057"},children:"Configuration"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},children:[h.jsx("div",{children:h.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["API Base URL:",h.jsx("input",{type:"text",value:t,onChange:O=>e(O.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})}),h.jsx("div",{children:h.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["WebSocket URL:",h.jsx("input",{type:"text",value:n,onChange:O=>s(O.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})}),h.jsx("div",{children:h.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Auth Token:",h.jsx("input",{type:"text",value:r,onChange:O=>{i(O.target.value),O.target.value?localStorage.setItem("authToken",O.target.value):localStorage.removeItem("authToken")},placeholder:"Required for positions",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})}),h.jsx("div",{children:h.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Wallet Address:",h.jsx("input",{type:"text",value:o,onChange:O=>a(O.target.value),placeholder:"Optional",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})}),h.jsx("div",{children:h.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Device ID:",h.jsx("input",{type:"text",value:l,onChange:O=>c(O.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[h.jsx("h2",{style:{margin:0,color:"#495057"},children:"Funding Rate Hook"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[h.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:T?"#d4edda":"#f8d7da",color:T?"#155724":"#721c24"},children:T?"WS Connected":"WS Disconnected"}),h.jsx("button",{onClick:()=>P(),disabled:C,style:{padding:"0.5rem 1rem",borderRadius:"4px",border:"1px solid #007bff",backgroundColor:"#007bff",color:"white",cursor:C?"not-allowed":"pointer",opacity:C?.6:1},children:C?"Loading...":"Refresh"})]})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[h.jsx("div",{children:h.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Symbols (comma-separated):",h.jsx("input",{type:"text",value:u,onChange:O=>d(O.target.value),placeholder:"BTC/USDT, ETH/USDT",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})}),h.jsx("div",{children:h.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["History Depth:",h.jsx("input",{type:"number",value:f,onChange:O=>g(Math.max(1,parseInt(O.target.value)||1)),min:"1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})})]}),E&&h.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"1rem"},children:["Error: ",E]}),C&&x.size===0?h.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"Loading funding rates..."}):x.size===0?h.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"No funding rate data available"}):h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"1rem"},children:y.map(O=>{const R=k(O),F=v(O),L=Array.isArray(F);return h.jsxs("div",{style:{border:"1px solid #dee2e6",borderRadius:"4px",padding:"1rem",backgroundColor:"#f8f9fa"},children:[h.jsxs("h3",{style:{marginTop:0,marginBottom:"0.75rem",color:"#495057"},children:[O,L&&h.jsxs("span",{style:{marginLeft:"0.5rem",fontSize:"0.875rem",color:"#6c757d"},children:["(",F.length," updates)"]})]}),R?h.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.6"},children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Rate:"})," ",parseFloat(R.funding_rate||"0").toFixed(6)]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",R.mark_price||"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Index Price:"})," ",R.index_price||"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Premium Rate:"})," ",R.premium_rate||"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"EMA Funding Rate:"})," ",R.ema_funding_rate||"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Next Funding Time:"})," ",R.next_funding_time_unix?new Date(R.next_funding_time_unix*1e3).toLocaleString():"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Interval:"})," ",R.funding_interval_seconds?`${R.funding_interval_seconds}s`:"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Valid:"})," ",R.is_valid?"Yes":"No"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Stale:"})," ",R.is_stale?"Yes":"No"]}),R.option_type&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Option Type:"})," ",R.option_type]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Strike Price:"})," ",R.strike_price||"N/A"]})]}),h.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"#6c757d"},children:["Updated:"," ",R.calculation_time_unix?new Date(R.calculation_time_unix*1e3).toLocaleString():"N/A"]})]}):h.jsx("div",{style:{color:"#6c757d"},children:"No data available"})]},O)})})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[h.jsx("h2",{style:{margin:0,color:"#495057"},children:"Positions Hook"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[h.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.875rem",backgroundColor:W?"#d4edda":"#f8d7da",color:W?"#155724":"#721c24"},children:W?"WS Connected":m?"WS Disconnected":"Polling Mode"}),h.jsx("button",{onClick:()=>H(),disabled:D,style:{padding:"0.5rem 1rem",borderRadius:"4px",border:"1px solid #007bff",backgroundColor:"#007bff",color:"white",cursor:D?"not-allowed":"pointer",opacity:D?.6:1},children:D?"Loading...":"Refresh"})]})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[h.jsx("div",{children:h.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[h.jsx("input",{type:"checkbox",checked:m,onChange:O=>b(O.target.checked)}),h.jsx("span",{style:{fontWeight:"500"},children:"Use WebSocket (primary source)"})]})}),!m&&h.jsx("div",{children:h.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Polling Interval (ms):",h.jsx("input",{type:"number",value:w,onChange:O=>p(Math.max(1e3,parseInt(O.target.value)||5e3)),min:"1000",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"4px",border:"1px solid #ced4da"}})]})})]}),A&&h.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"1rem"},children:["Error: ",A]}),D&&_.length===0?h.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"Loading positions..."}):_.length===0?h.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"No positions found"}):h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"1rem"},children:_.map((O,R)=>h.jsxs("div",{style:{border:"1px solid #dee2e6",borderRadius:"4px",padding:"1rem",backgroundColor:"#f8f9fa"},children:[h.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem",color:"#495057"},children:O.symbol||`Market ${O.marketId}`}),h.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.6"},children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Side:"})," ",h.jsx("span",{style:{color:O.side==="LONG"?"#28a745":"#dc3545",fontWeight:"600"},children:O.side})]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Size:"})," ",O.size.toFixed(8)]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Entry Price:"})," ",O.entryPrice.toFixed(8)]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",O.markPrice.toFixed(8)]}),O.liquidationPrice!==void 0&&h.jsxs("div",{children:[h.jsx("strong",{children:"Liquidation Price:"})," ",O.liquidationPrice.toFixed(8)]}),O.unrealizedPnL!==void 0&&h.jsxs("div",{children:[h.jsx("strong",{children:"Unrealized PnL:"})," ",h.jsx("span",{style:{color:(O.unrealizedPnL||0)>=0?"#28a745":"#dc3545"},children:O.unrealizedPnL.toFixed(8)})]}),O.leverage!==void 0&&h.jsxs("div",{children:[h.jsx("strong",{children:"Leverage:"})," ",O.leverage,"x"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Margin:"})," ",O.margin.toFixed(8)]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Margin Mode:"})," ",O.marginMode||"N/A"]}),h.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"#6c757d"},children:["Market ID: ",O.marketId]})]})]},`${O.marketId}-${R}`))})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function du(t){return t+.5|0}const Gr=(t,e,n)=>Math.max(Math.min(t,n),e);function jl(t){return Gr(du(t*2.55),0,255)}function ri(t){return Gr(du(t*255),0,255)}function sr(t){return Gr(du(t/2.55)/100,0,1)}function Yw(t){return Gr(du(t*100),0,100)}const Jn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Fg=[..."0123456789ABCDEF"],BD=t=>Fg[t&15],$D=t=>Fg[(t&240)>>4]+Fg[t&15],Zu=t=>(t&240)>>4===(t&15),UD=t=>Zu(t.r)&&Zu(t.g)&&Zu(t.b)&&Zu(t.a);function WD(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Jn[t[1]]*17,g:255&Jn[t[2]]*17,b:255&Jn[t[3]]*17,a:e===5?Jn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Jn[t[1]]<<4|Jn[t[2]],g:Jn[t[3]]<<4|Jn[t[4]],b:Jn[t[5]]<<4|Jn[t[6]],a:e===9?Jn[t[7]]<<4|Jn[t[8]]:255})),n}const HD=(t,e)=>t<255?e(t):"";function VD(t){var e=UD(t)?BD:$D;return t?"#"+e(t.r)+e(t.g)+e(t.b)+HD(t.a,e):void 0}const YD=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function m5(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function GD(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function KD(t,e,n){const s=m5(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function qD(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function Fx(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=qD(n,s,r,u,i),l=l*60+.5),[l|0,c||0,a]}function zx(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(ri)}function Bx(t,e,n){return zx(m5,t,e,n)}function XD(t,e,n){return zx(KD,t,e,n)}function QD(t,e,n){return zx(GD,t,e,n)}function x5(t){return(t%360+360)%360}function JD(t){const e=YD.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?jl(+e[5]):ri(+e[5]));const r=x5(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=XD(r,i,o):e[1]==="hsv"?s=QD(r,i,o):s=Bx(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function ZD(t,e){var n=Fx(t);n[0]=x5(n[0]+e),n=Bx(n),t.r=n[0],t.g=n[1],t.b=n[2]}function eN(t){if(!t)return;const e=Fx(t),n=e[0],s=Yw(e[1]),r=Yw(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${sr(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const Gw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Kw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tN(){const t={},e=Object.keys(Kw),n=Object.keys(Gw);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,Gw[i]);i=parseInt(Kw[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let ed;function nN(t){ed||(ed=tN(),ed.transparent=[0,0,0,0]);const e=ed[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const sN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rN(t){const e=sN.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?jl(o):Gr(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?jl(s):Gr(s,0,255)),r=255&(e[4]?jl(r):Gr(r,0,255)),i=255&(e[6]?jl(i):Gr(i,0,255)),{r:s,g:r,b:i,a:n}}}function iN(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${sr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const cp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,wo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function oN(t,e,n){const s=wo(sr(t.r)),r=wo(sr(t.g)),i=wo(sr(t.b));return{r:ri(cp(s+n*(wo(sr(e.r))-s))),g:ri(cp(r+n*(wo(sr(e.g))-r))),b:ri(cp(i+n*(wo(sr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function td(t,e,n){if(t){let s=Fx(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Bx(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function b5(t,e){return t&&Object.assign(e||{},t)}function qw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ri(t[3]))):(e=b5(t,{r:0,g:0,b:0,a:1}),e.a=ri(e.a)),e}function aN(t){return t.charAt(0)==="r"?rN(t):JD(t)}class Ac{constructor(e){if(e instanceof Ac)return e;const n=typeof e;let s;n==="object"?s=qw(e):n==="string"&&(s=WD(e)||nN(e)||aN(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=b5(this._rgb);return e&&(e.a=sr(e.a)),e}set rgb(e){this._rgb=qw(e)}rgbString(){return this._valid?iN(this._rgb):void 0}hexString(){return this._valid?VD(this._rgb):void 0}hslString(){return this._valid?eN(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=oN(this._rgb,e._rgb,n)),this}clone(){return new Ac(this.rgb)}alpha(e){return this._rgb.a=ri(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=du(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return td(this._rgb,2,e),this}darken(e){return td(this._rgb,2,-e),this}saturate(e){return td(this._rgb,1,e),this}desaturate(e){return td(this._rgb,1,-e),this}rotate(e){return ZD(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Js(){}const lN=(()=>{let t=0;return()=>t++})();function ht(t){return t==null}function mt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Fe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Nn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ds(t,e){return Nn(t)?t:e}function Ne(t,e){return typeof t>"u"?e:t}const cN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,y5=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function st(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function et(t,e,n,s){let r,i,o;if(mt(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(Fe(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function kh(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Ch(t){if(mt(t))return t.map(Ch);if(Fe(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=Ch(t[n[r]]);return e}return t}function v5(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function uN(t,e,n,s){if(!v5(t))return;const r=e[t],i=n[t];Fe(r)&&Fe(i)?Dc(r,i,s):e[t]=Ch(i)}function Dc(t,e,n){const s=mt(e)?e:[e],r=s.length;if(!Fe(t))return t;n=n||{};const i=n.merger||uN;let o;for(let a=0;a<r;++a){if(o=s[a],!Fe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function ic(t,e){return Dc(t,e,{merger:dN})}function dN(t,e,n){if(!v5(t))return;const s=e[t],r=n[t];Fe(s)&&Fe(r)?ic(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ch(r))}const Xw={"":t=>t,x:t=>t.x,y:t=>t.y};function hN(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function fN(t){const e=hN(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function Nc(t,e){return(Xw[e]||(Xw[e]=fN(e)))(t)}function $x(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Yn=t=>typeof t<"u",An=t=>typeof t=="function",Qw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function pN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Qe=Math.PI,Zt=2*Qe,gN=Zt+Qe,_h=Number.POSITIVE_INFINITY,Ux=Qe/180,en=Qe/2,rs=Qe/4,Eh=Qe*2/3,w5=Math.log10,ja=Math.sign;function oc(t,e,n){return Math.abs(t-e)<n}function Jw(t){const e=Math.round(t);t=oc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(w5(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function mN(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function xN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function no(t){return!xN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function bN(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function yN(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Wt(t){return t*(Qe/180)}function S5(t){return t*(180/Qe)}function Zw(t){if(!Nn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function zg(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Qe&&(i+=Zt),{angle:i,distance:r}}function Fa(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vN(t,e){return(t-e+gN)%Zt-Qe}function Or(t){return(t%Zt+Zt)%Zt}function Ph(t,e,n,s){const r=Or(t),i=Or(e),o=Or(n),a=Or(i-r),l=Or(o-r),c=Or(r-i),u=Or(r-o);return r===i||r===o||s&&i===o||a>l&&c<u}function ls(t,e,n){return Math.max(e,Math.min(n,t))}function wN(t){return ls(t,-32768,32767)}function Fl(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function Wx(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Ni=(t,e,n,s)=>Wx(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),SN=(t,e,n)=>Wx(t,n,s=>t[s][e]>=n);function kN(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const k5=["push","pop","shift","splice","unshift"];function CN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),k5.forEach(n=>{const s="_onData"+$x(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function e1(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(k5.forEach(i=>{delete t[i]}),delete t._chartjs)}function _N(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const C5=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function _5(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,C5.call(window,()=>{s=!1,t.apply(e,n)}))}}function EN(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Hx=t=>t==="start"?"left":t==="end"?"right":"center",un=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,PN=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function TN(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:g,maxDefined:m}=o.getUserBounds();if(g){if(r=Math.min(Ni(l,u,d).lo,n?s:Ni(e,u,o.getPixelForValue(d)).lo),c){const b=l.slice(0,r+1).reverse().findIndex(w=>!ht(w[a.axis]));r-=Math.max(0,b)}r=ls(r,0,s-1)}if(m){let b=Math.max(Ni(l,o.axis,f,!0).hi+1,n?0:Ni(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const w=l.slice(b-1).findIndex(p=>!ht(p[a.axis]));b+=Math.max(0,w)}i=ls(b,r,s)-r}else i=s-r}return{start:r,count:i}}function IN(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const nd=t=>t===0||t===1,t1=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Zt/n)),n1=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Zt/n)+1,ac={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*en)+1,easeOutSine:t=>Math.sin(t*en),easeInOutSine:t=>-.5*(Math.cos(Qe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>nd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>nd(t)?t:t1(t,.075,.3),easeOutElastic:t=>nd(t)?t:n1(t,.075,.3),easeInOutElastic(t){return nd(t)?t:t<.5?.5*t1(t*2,.1125,.45):.5+.5*n1(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ac.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ac.easeInBounce(t*2)*.5:ac.easeOutBounce(t*2-1)*.5+.5};function Vx(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function s1(t){return Vx(t)?t:new Ac(t)}function up(t){return Vx(t)?t:new Ac(t).saturate(.5).darken(.1).hexString()}const MN=["x","y","borderWidth","radius","tension"],RN=["color","borderColor","backgroundColor"];function ON(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:RN},numbers:{type:"number",properties:MN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function AN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const r1=new Map;function DN(t,e){e=e||{};const n=t+JSON.stringify(e);let s=r1.get(n);return s||(s=new Intl.NumberFormat(t,e),r1.set(n,s)),s}function Yx(t,e,n){return DN(e,n).format(t)}const NN={values(t){return mt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=LN(t,n)}const o=w5(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Yx(t,s,l)}};function LN(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var E5={formatters:NN};function jN(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:E5.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const so=Object.create(null),Bg=Object.create(null);function lc(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function dp(t,e,n){return typeof e=="string"?Dc(lc(t,e),n):Dc(lc(t,""),e)}class FN{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>up(r.backgroundColor),this.hoverBorderColor=(s,r)=>up(r.borderColor),this.hoverColor=(s,r)=>up(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return dp(this,e,n)}get(e){return lc(this,e)}describe(e,n){return dp(Bg,e,n)}override(e,n){return dp(so,e,n)}route(e,n,s,r){const i=lc(this,e),o=lc(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Fe(l)?Object.assign({},c,l):Ne(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var kt=new FN({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ON,AN,jN]);function zN(t){return!t||ht(t.size)||ht(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function i1(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function yi(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function o1(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function $g(t,e,n,s){P5(t,e,n,s,null)}function P5(t,e,n,s,r){let i,o,a,l,c,u,d,f;const g=e.pointStyle,m=e.rotation,b=e.radius;let w=(m||0)*Ux;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(w),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,s,r/2,b,0,0,Zt):t.arc(n,s,b,0,Zt),t.closePath();break;case"triangle":u=r?r/2:b,t.moveTo(n+Math.sin(w)*u,s-Math.cos(w)*b),w+=Eh,t.lineTo(n+Math.sin(w)*u,s-Math.cos(w)*b),w+=Eh,t.lineTo(n+Math.sin(w)*u,s-Math.cos(w)*b),t.closePath();break;case"rectRounded":c=b*.516,l=b-c,o=Math.cos(w+rs)*l,d=Math.cos(w+rs)*(r?r/2-c:l),a=Math.sin(w+rs)*l,f=Math.sin(w+rs)*(r?r/2-c:l),t.arc(n-d,s-a,c,w-Qe,w-en),t.arc(n+f,s-o,c,w-en,w),t.arc(n+d,s+a,c,w,w+en),t.arc(n-f,s+o,c,w+en,w+Qe),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*b,u=r?r/2:l,t.rect(n-u,s-l,2*u,2*l);break}w+=rs;case"rectRot":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,s-a),t.lineTo(n+f,s-o),t.lineTo(n+d,s+a),t.lineTo(n-f,s+o),t.closePath();break;case"crossRot":w+=rs;case"cross":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"star":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o),w+=rs,d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(w)*b,a=Math.sin(w)*b,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(w)*(r?r/2:b),s+Math.sin(w)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Lc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Pf(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Tf(t){t.restore()}function BN(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function $N(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function UN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ht(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function WN(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function HN(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function jc(t,e,n,s,r,i={}){const o=mt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,UN(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&HN(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ht(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,s,i.maxWidth)),t.fillText(c,n,s,i.maxWidth),WN(t,n,s,c,i),s+=Number(r.lineHeight);t.restore()}function Th(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Qe,Qe,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Qe,en,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,en,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-en,!0),t.lineTo(n+o.topLeft,s)}const VN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,YN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function GN(t,e){const n=(""+t).match(VN);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const KN=t=>+t||0;function T5(t,e){const n={},s=Fe(e),r=s?Object.keys(e):e,i=Fe(t)?s?o=>Ne(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=KN(i(o));return n}function qN(t){return T5(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Xo(t){return T5(t,["topLeft","topRight","bottomLeft","bottomRight"])}function pn(t){const e=qN(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function jt(t,e){t=t||{},e=e||kt.font;let n=Ne(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Ne(t.style,e.style);s&&!(""+s).match(YN)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Ne(t.family,e.family),lineHeight:GN(Ne(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Ne(t.weight,e.weight),string:""};return r.string=zN(r),r}function sd(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function XN(t,e,n){const{min:s,max:r}=t,i=y5(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function fo(t,e){return Object.assign(Object.create(t),e)}function Gx(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=O5("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>Gx([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return M5(a,l,()=>r9(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return l1(a).includes(l)},ownKeys(a){return l1(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function za(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:I5(t,s),setContext:i=>za(t,i,n,s),override:i=>za(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return M5(i,o,()=>JN(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function I5(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:An(n)?n:()=>n,isIndexable:An(s)?s:()=>s}}const QN=(t,e)=>t?t+$x(e):e,Kx=(t,e)=>Fe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function M5(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function JN(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return An(a)&&o.isScriptable(e)&&(a=ZN(e,a,t,n)),mt(a)&&a.length&&(a=e9(e,a,t,o.isIndexable)),Kx(e,a)&&(a=za(a,r,i&&i[e],o)),a}function ZN(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),Kx(t,l)&&(l=qx(r._scopes,r,t,l)),l}function e9(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Fe(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=qx(c,r,t,u);e.push(za(d,i,o&&o[t],a))}}return e}function R5(t,e,n){return An(t)?t(e,n):t}const t9=(t,e)=>t===!0?e:typeof t=="string"?Nc(e,t):void 0;function n9(t,e,n,s,r){for(const i of e){const o=t9(n,i);if(o){t.add(o);const a=R5(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function qx(t,e,n,s){const r=e._rootScopes,i=R5(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=a1(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=a1(a,o,i,l,s),l===null)?!1:Gx(Array.from(a),[""],r,i,()=>s9(e,n,s))}function a1(t,e,n,s,r){for(;n;)n=n9(t,e,n,s,r);return n}function s9(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return mt(r)&&Fe(n)?n:r||{}}function r9(t,e,n,s){let r;for(const i of e)if(r=O5(QN(i,t),n),typeof r<"u")return Kx(t,r)?qx(n,s,t,r):r}function O5(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function l1(t){let e=t._keys;return e||(e=t._keys=i9(t._scopes)),e}function i9(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const o9=Number.EPSILON||1e-14,Ba=(t,e)=>e<t.length&&!t[e].skip&&t[e],A5=t=>t==="x"?"y":"x";function a9(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=Fa(i,r),l=Fa(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,f=s*u;return{previous:{x:i.x-d*(o.x-r.x),y:i.y-d*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function l9(t,e,n){const s=t.length;let r,i,o,a,l,c=Ba(t,0);for(let u=0;u<s-1;++u)if(l=c,c=Ba(t,u+1),!(!l||!c)){if(oc(e[u],0,o9)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=i*o*e[u])}}function c9(t,e,n="x"){const s=A5(n),r=t.length;let i,o,a,l=Ba(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Ba(t,c+1),!a)continue;const u=a[n],d=a[s];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${s}`]=d-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${s}`]=d+i*e[c])}}function u9(t,e="x"){const n=A5(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=Ba(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=Ba(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?ja(r[o-1])!==ja(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}l9(t,r,i),c9(t,i,e)}function rd(t,e,n){return Math.max(Math.min(t,n),e)}function d9(t,e){let n,s,r,i,o,a=Lc(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&Lc(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=rd(r.cp1x,e.left,e.right),r.cp1y=rd(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=rd(r.cp2x,e.left,e.right),r.cp2y=rd(r.cp2y,e.top,e.bottom)))}function h9(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")u9(t,r);else{let c=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=a9(c,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&d9(t,n)}function Xx(){return typeof window<"u"&&typeof document<"u"}function Qx(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ih(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const If=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function f9(t,e){return If(t).getPropertyValue(e)}const p9=["top","right","bottom","left"];function Vi(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=p9[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const g9=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function m9(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(g9(r,i,t.target))a=r,l=i;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function _i(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=If(n),i=r.boxSizing==="border-box",o=Vi(r,"padding"),a=Vi(r,"border","width"),{x:l,y:c,box:u}=m9(t,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:g,height:m}=e;return i&&(g-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/g*n.width/s),y:Math.round((c-f)/m*n.height/s)}}function x9(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&Qx(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=If(i),l=Vi(a,"border","width"),c=Vi(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Ih(a.maxWidth,i,"clientWidth"),r=Ih(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||_h,maxHeight:r||_h}}const Kr=t=>Math.round(t*10)/10;function b9(t,e,n,s){const r=If(t),i=Vi(r,"margin"),o=Ih(r.maxWidth,t,"clientWidth")||_h,a=Ih(r.maxHeight,t,"clientHeight")||_h,l=x9(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=Vi(r,"border","width"),g=Vi(r,"padding");c-=g.width+f.width,u-=g.height+f.height}return c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=Kr(Math.min(c,o,l.maxWidth)),u=Kr(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Kr(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=Kr(Math.floor(u*s))),{width:c,height:u}}function c1(t,e,n){const s=e||1,r=Kr(t.height*s),i=Kr(t.width*s);t.height=Kr(t.height),t.width=Kr(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const y9=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Xx()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function u1(t,e){const n=f9(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ei(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function v9(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function w9(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Ei(t,r,n),a=Ei(r,i,n),l=Ei(i,e,n),c=Ei(o,a,n),u=Ei(a,l,n);return Ei(c,u,n)}const S9=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},k9=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Qo(t,e,n){return t?S9(e,n):k9()}function D5(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function N5(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function L5(t){return t==="angle"?{between:Ph,compare:vN,normalize:Or}:{between:Fl,compare:(e,n)=>e-n,normalize:e=>e}}function d1({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function C9(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=L5(s),l=e.length;let{start:c,end:u,loop:d}=t,f,g;if(d){for(c+=l,u+=l,f=0,g=l;f<g&&o(a(e[c%l][s]),r,i);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function _9(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=L5(s),{start:u,end:d,loop:f,style:g}=C9(t,e,n),m=[];let b=!1,w=null,p,y,x;const v=()=>l(r,x,p)&&a(r,x)!==0,k=()=>a(i,p)===0||l(i,x,p),C=()=>b||v(),E=()=>!b||k();for(let T=u,P=u;T<=d;++T)y=e[T%o],!y.skip&&(p=c(y[s]),p!==x&&(b=l(p,r,i),w===null&&C()&&(w=a(p,r)===0?T:P),w!==null&&E()&&(m.push(d1({start:w,end:T,loop:f,count:o,style:g})),w=null),P=T,x=p));return w!==null&&m.push(d1({start:w,end:d,loop:f,count:o,style:g})),m}function E9(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=_9(s[r],t.points,e);i.length&&n.push(...i)}return n}function P9(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function T9(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function I9(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=P9(n,r,i,s);if(s===!0)return h1(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return h1(t,T9(n,o,l,c),n,e)}function h1(t,e,n,s){return!s||!s.setContext||!n?e:M9(t,e,n,s)}function M9(t,e,n,s){const r=t._chart.getContext(),i=f1(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,d=e[0].start,f=d;function g(m,b,w,p){const y=a?-1:1;if(m!==b){for(m+=l;n[m%l].skip;)m-=y;for(;n[b%l].skip;)b+=y;m%l!==b%l&&(c.push({start:m%l,end:b%l,loop:w,style:p}),u=p,d=b%l)}}for(const m of e){d=a?d:m.start;let b=n[d%l],w;for(f=d+1;f<=m.end;f++){const p=n[f%l];w=f1(s.setContext(fo(r,{type:"segment",p0:b,p1:p,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),R9(w,u)&&g(d,f-1,m.loop,u),b=p,u=w}d<f-1&&g(d,f-1,m.loop,u)}return c}function f1(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function R9(t,e){if(!e)return!1;const n=[],s=function(r,i){return Vx(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function id(t,e,n){return t.options.clip?t[n]:e[n]}function O9(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:id(n,e,"left"),right:id(n,e,"right"),top:id(s,e,"top"),bottom:id(s,e,"bottom")}:e}function A9(t,e){const n=e._clip;if(n.disabled)return!1;const s=O9(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class D9{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=C5.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Zs=new D9;const p1="transparent",N9={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=s1(t||p1),r=s.valid&&s1(e||p1);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class L9{constructor(e,n,s,r){const i=n[s];r=sd([e.to,r,i,e.from]);const o=sd([e.from,i,r]);this._active=!0,this._fn=e.fn||N9[e.type||typeof o],this._easing=ac[e.easing]||ac.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=sd([e.to,n,r,e.from]),this._from=sd([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class Jx{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Fe(e))return;const n=Object.keys(kt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!Fe(i))return;const o={};for(const a of n)o[a]=i[a];(mt(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=F9(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&j9(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let d=i[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}i[c]=d=new L9(f,e,c,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return Zs.add(this._chart,s),!0}}function j9(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function F9(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function g1(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function z9(t,e,n){if(n===!1)return!1;const s=g1(t,n),r=g1(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function B9(t){let e,n,s,r;return Fe(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function j5(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function m1(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],Nn(c)&&(i||e===0||ja(e)===ja(c))&&(e+=c)}return!u&&!s.all?0:e}function $9(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[i]:t[u]};return a}function hp(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function U9(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function W9(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function H9(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function x1(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function b1(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,u=U9(i,o,s),d=e.length;let f;for(let g=0;g<d;++g){const m=e[g],{[l]:b,[c]:w}=m,p=m._stacks||(m._stacks={});f=p[c]=H9(r,u,b),f[a]=w,f._top=x1(f,o,!0,s.type),f._bottom=x1(f,o,!1,s.type);const y=f._visualValues||(f._visualValues={});y[a]=w}}function fp(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function V9(t,e){return fo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Y9(t,e,n){return fo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Sl(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const pp=t=>t==="reset"||t==="none",y1=(t,e)=>e?t:Object.assign({},t),G9=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:j5(n,!0),values:null};class Jo{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=hp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Sl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(d,f,g,m)=>d==="x"?f:d==="r"?m:g,i=n.xAxisID=Ne(s.xAxisID,fp(e,"x")),o=n.yAxisID=Ne(s.yAxisID,fp(e,"y")),a=n.rAxisID=Ne(s.rAxisID,fp(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),u=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&e1(this._data,this),e._stacked&&Sl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Fe(n)){const r=this._cachedMeta;this._data=$9(n,r)}else if(s!==n){if(s){e1(s,this);const r=this._cachedMeta;Sl(r),r._parsed=[]}n&&Object.isExtensible(n)&&CN(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=hp(n.vScale,n),n.stack!==s.stack&&(r=!0,Sl(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(b1(this,n._parsed),n._stacked=hp(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,d,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{mt(r[e])?f=this.parseArrayData(s,r,e,n):Fe(r[e])?f=this.parseObjectData(s,r,e,n):f=this.parsePrimitiveData(s,r,e,n);const g=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=d=f[u],l&&(g()&&(l=!1),c=d);s._sorted=l}o&&b1(this,f)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,d=new Array(r);let f,g,m;for(f=0,g=r;f<g;++f)m=f+s,d[f]={[a]:u||i.parse(c[m],m),[l]:o.parse(n[m],m)};return d}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,c,u,d;for(l=0,c=r;l<c;++l)u=l+s,d=n[u],a[l]={x:i.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,d,f,g;for(u=0,d=r;u<d;++u)f=u+s,g=n[f],c[u]={x:i.parse(Nc(g,a),f),y:o.parse(Nc(g,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:j5(r,!0),values:n._stacks[e.axis]._visualValues};return m1(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=m1(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=G9(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=W9(a);let f,g;function m(){g=r[f];const b=g[a.axis];return!Nn(g[e.axis])||u>b||d<b}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(c,e,g,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],Nn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=B9(Ne(this.options.clip,z9(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const d=r[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Y9(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=V9(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Yn(s);if(a)return y1(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),g=Object.keys(kt.elements[e]),m=()=>this.getContext(s,r,n),b=c.resolveNamedOptions(f,g,m,d);return b.$shared&&(b.$shared=l,i[o]=Object.freeze(y1(b,l))),b}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,s,n))}const c=new Jx(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||pp(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){pp(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!pp(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&Sl(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ne(Jo,"defaults",{}),ne(Jo,"datasetElementType",null),ne(Jo,"dataElementType",null);function K9(t,e,n){let s=1,r=1,i=0,o=0;if(e<Zt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),g=(x,v,k)=>Ph(x,a,l,!0)?1:Math.max(v,v*n,k,k*n),m=(x,v,k)=>Ph(x,a,l,!0)?-1:Math.min(v,v*n,k,k*n),b=g(0,c,d),w=g(en,u,f),p=m(Qe,c,d),y=m(Qe+en,u,f);s=(b-p)/2,r=(w-y)/2,i=-(b+p)/2,o=-(w+y)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class zl extends Jo{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(Fe(s[e])){const{key:l="value"}=this._parsing;i=c=>+Nc(s[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Wt(this.options.rotation-90)}_getCircumference(){return Wt(this.options.circumference)}_getRotationExtents(){let e=Zt,n=-Zt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(cN(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:m,offsetY:b}=K9(d,u,l),w=(s.width-o)/f,p=(s.height-o)/g,y=Math.max(Math.min(w,p)/2,0),x=y5(this.options.radius,y),v=Math.max(x*l,0),k=(x-v)/this._getVisibleDatasetWeightTotal();this.offsetX=m*x,this.offsetY=b*x,r.total=this.calculateTotal(),this.outerRadius=x-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/Zt)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=i&&c.animateScale,g=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:b,includeOptions:w}=this._getSharedOptions(n,r);let p=this._getRotation(),y;for(y=0;y<n;++y)p+=this._circumference(y,i);for(y=n;y<n+s;++y){const x=this._circumference(y,i),v=e[y],k={x:u+this.offsetX,y:d+this.offsetY,startAngle:p,endAngle:p+x,circumference:x,outerRadius:m,innerRadius:g};w&&(k.options=b||this.resolveDataElementOptions(y,v.active?"active":r)),p+=x,this.updateElement(v,y,k,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Zt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=Yx(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Ne(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ne(zl,"id","doughnut"),ne(zl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ne(zl,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ne(zl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class Ad extends Jo{getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:i}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=i.getLabelForValue(o.y);return{label:s[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,r=this.chart._animationsDisabled;let{start:i,count:o}=TN(n,s,r);if(this._drawStart=i,this._drawCount=o,IN(n)&&(i=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,r),d=this.getSharedOptions(u),f=this.includeOptions(r,d),g=o.axis,m=a.axis,{spanGaps:b,segment:w}=this.options,p=no(b)?b:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||r==="none";let x=n>0&&this.getParsed(n-1);for(let v=n;v<n+s;++v){const k=e[v],C=this.getParsed(v),E=y?k:{},T=ht(C[m]),P=E[g]=o.getPixelForValue(C[g],v),_=E[m]=i||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[m],v);E.skip=isNaN(P)||isNaN(_)||T,E.stop=v>0&&Math.abs(C[g]-x[g])>p,w&&(E.parsed=C,E.raw=c.data[v]),f&&(E.options=d||this.resolveDataElementOptions(v,k.active?"active":r)),y||this.updateElement(k,v,E,r),x=C}this.updateSharedOptions(d,r,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=e.dataset,r=s.options&&s.options.borderWidth||0;if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,o)/2}}ne(Ad,"id","scatter"),ne(Ad,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ne(Ad,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function vi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Zx{constructor(e){ne(this,"options");this.options=e||{}}static override(e){Object.assign(Zx.prototype,e)}init(){}formats(){return vi()}parse(){return vi()}format(){return vi()}add(){return vi()}diff(){return vi()}startOf(){return vi()}endOf(){return vi()}}var q9={_date:Zx};function X9(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?SN:Ni;if(s){if(r._sharedOptions){const u=i[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=c(i,e,n-d),g=c(i,e,n+d);return{lo:f.lo,hi:g.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,g=f.slice(0,u.lo+1).reverse().findIndex(b=>!ht(b[d.axis]));u.lo-=Math.max(0,g);const m=f.slice(u.hi).findIndex(b=>!ht(b[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:i.length-1}}function Mf(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:d,hi:f}=X9(i[a],e,o,r);for(let g=d;g<=f;++g){const m=u[g];m.skip||s(m,c,g)}}}function Q9(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function gp(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||Mf(t,n,e,function(a,l,c){!r&&!Lc(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function J9(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:d}=zg(o,{x:e.x,y:e.y});Ph(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Mf(t,n,e,i),r}function Z9(t,e,n,s,r,i){let o=[];const a=Q9(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const g=u.inRange(e.x,e.y,r);if(s&&!g)return;const m=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(m))&&!g)return;const w=a(e,m);w<l?(o=[{element:u,datasetIndex:d,index:f}],l=w):w===l&&o.push({element:u,datasetIndex:d,index:f})}return Mf(t,n,e,c),o}function mp(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?J9(t,e,n,r):Z9(t,e,n,s,r,i)}function v1(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Mf(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var eL={modes:{index(t,e,n,s){const r=_i(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?gp(t,r,i,s,o):mp(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const r=_i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?gp(t,r,i,s,o):mp(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const r=_i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return gp(t,r,i,s,o)},nearest(t,e,n,s){const r=_i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return mp(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=_i(e,t);return v1(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=_i(e,t);return v1(t,r,"y",n.intersect,s)}}};const F5=["left","top","right","bottom"];function kl(t,e){return t.filter(n=>n.pos===e)}function w1(t,e){return t.filter(n=>F5.indexOf(n.pos)===-1&&n.box.axis===e)}function Cl(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function tL(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function nL(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!F5.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function sL(t,e){const n=nL(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=u?u*r:l&&e.availableHeight)}return n}function rL(t){const e=tL(t),n=Cl(e.filter(c=>c.box.fullSize),!0),s=Cl(kl(e,"left"),!0),r=Cl(kl(e,"right")),i=Cl(kl(e,"top"),!0),o=Cl(kl(e,"bottom")),a=w1(e,"x"),l=w1(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:kl(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function S1(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function z5(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function iL(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!Fe(r)){n.size&&(t[r]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[r]+=n.size}i.getPadding&&z5(o,i.getPadding());const a=Math.max(0,e.outerWidth-S1(o,t,"left","right")),l=Math.max(0,e.outerHeight-S1(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function oL(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function aL(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function Bl(t,e,n,s){const r=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,aL(a.horizontal,e));const{same:d,other:f}=iL(e,n,a,s);c|=d&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&Bl(r,e,n,s)||u}function od(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function k1(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;Yn(c.start)&&(o=c.start),l.fullSize?od(l,r.left,o,n.outerWidth-r.right-r.left,f):od(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;Yn(c.start)&&(i=c.start),l.fullSize?od(l,i,r.top,f,n.outerHeight-r.bottom-r.top):od(l,i,e.top+c.placed,f,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var cs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=pn(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=rL(t.boxes),l=a.vertical,c=a.horizontal;et(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=l.reduce((b,w)=>w.box.options&&w.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);z5(f,pn(s));const g=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),m=sL(l.concat(c),d);Bl(a.fullSize,g,d,m),Bl(l,g,d,m),Bl(c,g,d,m)&&Bl(l,g,d,m),oL(g),k1(a.leftAndTop,g,d,m),g.x+=g.w,g.y+=g.h,k1(a.rightAndBottom,g,d,m),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},et(a.chartArea,b=>{const w=b.box;Object.assign(w,t.chartArea),w.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class B5{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class lL extends B5{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Dd="$chartjs",cL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},C1=t=>t===null||t==="";function uL(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[Dd]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",C1(r)){const i=u1(t,"width");i!==void 0&&(t.width=i)}if(C1(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=u1(t,"height");i!==void 0&&(t.height=i)}return t}const $5=y9?{passive:!0}:!1;function dL(t,e,n){t&&t.addEventListener(e,n,$5)}function hL(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,$5)}function fL(t,e){const n=cL[t.type]||t.type,{x:s,y:r}=_i(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Mh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function pL(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Mh(a.addedNodes,s),o=o&&!Mh(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function gL(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Mh(a.removedNodes,s),o=o&&!Mh(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Fc=new Map;let _1=0;function U5(){const t=window.devicePixelRatio;t!==_1&&(_1=t,Fc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function mL(t,e){Fc.size||window.addEventListener("resize",U5),Fc.set(t,e)}function xL(t){Fc.delete(t),Fc.size||window.removeEventListener("resize",U5)}function bL(t,e,n){const s=t.canvas,r=s&&Qx(s);if(!r)return;const i=_5((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(r),mL(t,i),o}function xp(t,e,n){n&&n.disconnect(),e==="resize"&&xL(t)}function yL(t,e,n){const s=t.canvas,r=_5(i=>{t.ctx!==null&&n(fL(i,t))},t);return dL(s,e,r),r}class vL extends B5{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(uL(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Dd])return!1;const s=n[Dd].initial;["height","width"].forEach(i=>{const o=s[i];ht(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[Dd],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:pL,detach:gL,resize:bL}[n]||yL;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:xp,detach:xp,resize:xp}[n]||hL)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return b9(e,n,s,r)}isAttached(e){const n=e&&Qx(e);return!!(n&&n.isConnected)}}function wL(t){return!Xx()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?lL:vL}class gn{constructor(){ne(this,"x");ne(this,"y");ne(this,"active",!1);ne(this,"options");ne(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return no(this.x)&&no(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}}ne(gn,"defaults",{}),ne(gn,"defaultRoutes");function SL(t,e){const n=t.options.ticks,s=kL(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?_L(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return EL(e,c,i,o/r),c;const u=CL(i,e,r);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(ad(e,c,u,ht(g)?0:a-g,a),d=0,f=o-1;d<f;d++)ad(e,c,u,i[d],i[d+1]);return ad(e,c,u,l,ht(g)?e.length:l+g),c}return ad(e,c,u),c}function kL(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function CL(t,e,n){const s=PL(t),r=e.length/n;if(!s)return Math.max(r,1);const i=mN(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function _L(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function EL(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function ad(t,e,n,s,r){const i=Ne(s,0),o=Math.min(Ne(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function PL(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const TL=t=>t==="left"?"right":t==="right"?"left":t,E1=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,P1=(t,e)=>Math.min(e||t,t);function T1(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function IL(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<i-a||l>o+a)))return l}function ML(t,e){et(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function _l(t){return t.drawTicks?t.tickLength:0}function I1(t,e){if(!t.display)return 0;const n=jt(t.font,e),s=pn(t.padding);return(mt(t.text)?t.text.length:1)*n.lineHeight+s.height}function RL(t,e){return fo(t,{scale:e,type:"scale"})}function OL(t,e,n){return fo(t,{tick:n,index:e,type:"tick"})}function AL(t,e,n){let s=Hx(t);return(n&&e!=="right"||!n&&e==="right")&&(s=TL(s)),s}function DL(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,g,m;const b=o-r,w=a-i;if(t.isHorizontal()){if(g=un(s,i,a),Fe(n)){const p=Object.keys(n)[0],y=n[p];m=u[p].getPixelForValue(y)+b-e}else n==="center"?m=(c.bottom+c.top)/2+b-e:m=E1(t,n,e);f=a-i}else{if(Fe(n)){const p=Object.keys(n)[0],y=n[p];g=u[p].getPixelForValue(y)-w+e}else n==="center"?g=(c.left+c.right)/2-w+e:g=E1(t,n,e);m=un(s,o,r),d=n==="left"?-en:en}return{titleX:g,titleY:m,maxWidth:f,rotation:d}}class Qa extends gn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=Ds(e,Number.POSITIVE_INFINITY),n=Ds(n,Number.NEGATIVE_INFINITY),s=Ds(s,Number.POSITIVE_INFINITY),r=Ds(r,Number.NEGATIVE_INFINITY),{min:Ds(e,s),max:Ds(n,r),minDefined:Nn(e),maxDefined:Nn(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:Ds(n,Ds(s,n)),max:Ds(s,Ds(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){st(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=XN(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?T1(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=SL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){st(this.options.afterUpdate,[this])}beforeSetDimensions(){st(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){st(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),st(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){st(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=st(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){st(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){st(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=P1(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,g=ls(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/s:g/(s-1),d+6>a&&(a=g/(s-(e.offset?.5:1)),l=this.maxHeight-_l(e.grid)-n.padding-I1(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=S5(Math.min(Math.asin(ls((u.highest.height+6)/a,-1,1)),Math.asin(ls(l/c,-1,1))-Math.asin(ls(f/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){st(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){st(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=I1(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=_l(i)+l):(e.height=this.maxHeight,e.width=_l(i)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),g=s.padding*2,m=Wt(this.labelRotation),b=Math.cos(m),w=Math.sin(m);if(a){const p=s.mirror?0:w*d.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+p+g)}else{const p=s.mirror?0:b*d.width+w*f.height;e.width=Math.min(this.maxWidth,e.width+p+g)}this._calculatePadding(c,u,w,b)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=r*e.width,g=s*n.height):(f=s*e.height,g=r*n.width):i==="start"?g=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,g=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;i==="start"?(u=0,d=e.height):i==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){st(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)ht(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=T1(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/P1(n,s));let c=0,u=0,d,f,g,m,b,w,p,y,x,v,k;for(d=0;d<n;d+=l){if(m=e[d].label,b=this._resolveTickFontOptions(d),r.font=w=b.string,p=i[w]=i[w]||{data:{},gc:[]},y=b.lineHeight,x=v=0,!ht(m)&&!mt(m))x=i1(r,p.data,p.gc,x,m),v=y;else if(mt(m))for(f=0,g=m.length;f<g;++f)k=m[f],!ht(k)&&!mt(k)&&(x=i1(r,p.data,p.gc,x,k),v+=y);o.push(x),a.push(v),c=Math.max(x,c),u=Math.max(v,u)}ML(i,n);const C=o.indexOf(c),E=a.indexOf(u),T=P=>({width:o[P]||0,height:a[P]||0});return{first:T(0),last:T(n-1),widest:T(C),highest:T(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return wN(this._alignToPixels?yi(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=OL(this.getContext(),e,s))}return this.$context||(this.$context=RL(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Wt(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=_l(i),g=[],m=a.setContext(this.getContext()),b=m.display?m.width:0,w=b/2,p=function(R){return yi(s,R,b)};let y,x,v,k,C,E,T,P,_,D,A,W;if(o==="top")y=p(this.bottom),E=this.bottom-f,P=y-w,D=p(e.top)+w,W=e.bottom;else if(o==="bottom")y=p(this.top),D=e.top,W=p(e.bottom)-w,E=y+w,P=this.top+f;else if(o==="left")y=p(this.right),C=this.right-f,T=y-w,_=p(e.left)+w,A=e.right;else if(o==="right")y=p(this.left),_=e.left,A=p(e.right)-w,C=y+w,T=this.left+f;else if(n==="x"){if(o==="center")y=p((e.top+e.bottom)/2+.5);else if(Fe(o)){const R=Object.keys(o)[0],F=o[R];y=p(this.chart.scales[R].getPixelForValue(F))}D=e.top,W=e.bottom,E=y+w,P=E+f}else if(n==="y"){if(o==="center")y=p((e.left+e.right)/2);else if(Fe(o)){const R=Object.keys(o)[0],F=o[R];y=p(this.chart.scales[R].getPixelForValue(F))}C=y-w,T=C-f,_=e.left,A=e.right}const H=Ne(r.ticks.maxTicksLimit,d),O=Math.max(1,Math.ceil(d/H));for(x=0;x<d;x+=O){const R=this.getContext(x),F=i.setContext(R),L=a.setContext(R),z=F.lineWidth,I=F.color,K=L.dash||[],j=L.dashOffset,M=F.tickWidth,$=F.tickColor,q=F.tickBorderDash||[],X=F.tickBorderDashOffset;v=IL(this,x,l),v!==void 0&&(k=yi(s,v,z),c?C=T=_=A=k:E=P=D=W=k,g.push({tx1:C,ty1:E,tx2:T,ty2:P,x1:_,y1:D,x2:A,y2:W,width:z,color:I,borderDash:K,borderDashOffset:j,tickWidth:M,tickColor:$,tickBorderDash:q,tickBorderDashOffset:X}))}return this._ticksLength=d,this._borderValue=y,g}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=i,f=_l(s.grid),g=f+u,m=d?-u:g,b=-Wt(this.labelRotation),w=[];let p,y,x,v,k,C,E,T,P,_,D,A,W="middle";if(r==="top")C=this.bottom-m,E=this._getXAxisLabelAlignment();else if(r==="bottom")C=this.top+m,E=this._getXAxisLabelAlignment();else if(r==="left"){const O=this._getYAxisLabelAlignment(f);E=O.textAlign,k=O.x}else if(r==="right"){const O=this._getYAxisLabelAlignment(f);E=O.textAlign,k=O.x}else if(n==="x"){if(r==="center")C=(e.top+e.bottom)/2+g;else if(Fe(r)){const O=Object.keys(r)[0],R=r[O];C=this.chart.scales[O].getPixelForValue(R)+g}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")k=(e.left+e.right)/2-g;else if(Fe(r)){const O=Object.keys(r)[0],R=r[O];k=this.chart.scales[O].getPixelForValue(R)}E=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?W="top":l==="end"&&(W="bottom"));const H=this._getLabelSizes();for(p=0,y=a.length;p<y;++p){x=a[p],v=x.label;const O=i.setContext(this.getContext(p));T=this.getPixelForTick(p)+i.labelOffset,P=this._resolveTickFontOptions(p),_=P.lineHeight,D=mt(v)?v.length:1;const R=D/2,F=O.color,L=O.textStrokeColor,z=O.textStrokeWidth;let I=E;o?(k=T,E==="inner"&&(p===y-1?I=this.options.reverse?"left":"right":p===0?I=this.options.reverse?"right":"left":I="center"),r==="top"?c==="near"||b!==0?A=-D*_+_/2:c==="center"?A=-H.highest.height/2-R*_+_:A=-H.highest.height+_/2:c==="near"||b!==0?A=_/2:c==="center"?A=H.highest.height/2-R*_:A=H.highest.height-D*_,d&&(A*=-1),b!==0&&!O.showLabelBackdrop&&(k+=_/2*Math.sin(b))):(C=T,A=(1-D)*_/2);let K;if(O.showLabelBackdrop){const j=pn(O.backdropPadding),M=H.heights[p],$=H.widths[p];let q=A-j.top,X=0-j.left;switch(W){case"middle":q-=M/2;break;case"bottom":q-=M;break}switch(E){case"center":X-=$/2;break;case"right":X-=$;break;case"inner":p===y-1?X-=$:p>0&&(X-=$/2);break}K={left:X,top:q,width:$+j.width,height:M+j.height,color:O.backdropColor}}w.push({label:v,font:P,textOffset:A,options:{rotation:b,color:F,strokeColor:L,strokeWidth:z,textAlign:I,textBaseline:W,translation:[k,C],backdrop:K}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Wt(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+i,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=yi(e,this.left,o)-o/2,u=yi(e,this.right,a)+a/2,d=f=l):(d=yi(e,this.top,o)-o/2,f=yi(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Pf(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;jc(s,c,0,u,l,a)}r&&Tf(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=jt(s.font),o=pn(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Fe(n)?(l+=o.bottom,mt(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=DL(this,l,n,a);jc(e,s.text,0,0,i,{color:s.color,maxWidth:d,rotation:f,textAlign:AL(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Ne(e.grid&&e.grid.z,-1),r=Ne(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Qa.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return jt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ld{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;jL(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,NL(e,o,s),this.override&&kt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in kt[r]&&(delete kt[r][s],this.override&&delete so[s])}}function NL(t,e,n){const s=Dc(Object.create(null),[n?kt.get(n):{},kt.get(e),t.defaults]);kt.set(e,s),t.defaultRoutes&&LL(e,t.defaultRoutes),t.descriptors&&kt.describe(e,t.descriptors)}function LL(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");kt.route(i,r,l,a)})}function jL(t){return"id"in t&&"defaults"in t}class FL{constructor(){this.controllers=new ld(Jo,"datasets",!0),this.elements=new ld(gn,"elements"),this.plugins=new ld(Object,"plugins"),this.scales=new ld(Qa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):et(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=$x(e);st(s["before"+r],[],s),n[e](s),st(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var Fs=new FL;class zL{constructor(){this._init=void 0}notify(e,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(st(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ht(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=Ne(s.options&&s.options.plugins,{}),i=BL(s);return r===!1&&!n?[]:UL(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function BL(t){const e={},n=[],s=Object.keys(Fs.plugins.items);for(let i=0;i<s.length;i++)n.push(Fs.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function $L(t,e){return!e&&t===!1?null:t===!0?{}:t}function UL(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=$L(s[l],r);c!==null&&i.push({plugin:a,options:WL(t.config,{plugin:a,local:n[l]},c,o)})}return i}function WL(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ug(t,e){const n=kt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function HL(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function VL(t,e){return t===e?"_index_":"_value_"}function M1(t){if(t==="x"||t==="y"||t==="r")return t}function YL(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Wg(t,...e){if(M1(t))return t;for(const n of e){const s=n.axis||YL(n.position)||t.length>1&&M1(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function R1(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function GL(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return R1(t,"x",n[0])||R1(t,"y",n[0])}return{}}function KL(t,e){const n=so[t.type]||{scales:{}},s=e.scales||{},r=Ug(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Fe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Wg(o,a,GL(o,t),kt.scales[a.type]),c=VL(l,r),u=n.scales||{};i[o]=ic(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Ug(a,e),u=(so[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=HL(d,l),g=o[f+"AxisID"]||f;i[g]=i[g]||Object.create(null),ic(i[g],[{axis:f},s[g],u[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];ic(a,[kt.scales[a.type],kt.scale])}),i}function W5(t){const e=t.options||(t.options={});e.plugins=Ne(e.plugins,{}),e.scales=KL(t,e)}function H5(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function qL(t){return t=t||{},t.data=H5(t.data),W5(t),t}const O1=new Map,V5=new Set;function cd(t,e){let n=O1.get(t);return n||(n=e(),O1.set(t,n),V5.add(n)),n}const El=(t,e,n)=>{const s=Nc(e,n);s!==void 0&&t.add(s)};class XL{constructor(e){this._config=qL(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=H5(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),W5(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return cd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return cd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return cd(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>El(l,e,d))),u.forEach(d=>El(l,r,d)),u.forEach(d=>El(l,so[i]||{},d)),u.forEach(d=>El(l,kt,d)),u.forEach(d=>El(l,Bg,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),V5.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,so[n]||{},kt.datasets[n]||{},{type:n},kt,Bg]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=A1(this._resolverCache,e,r);let l=o;if(JL(o,n)){i.$shared=!1,s=An(s)?s():s;const c=this.createResolver(e,s,a);l=za(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,s=[""],r){const{resolver:i}=A1(this._resolverCache,e,s);return Fe(n)?za(i,n,void 0,r):i}}function A1(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:Gx(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const QL=t=>Fe(t)&&Object.getOwnPropertyNames(t).some(e=>An(t[e]));function JL(t,e){const{isScriptable:n,isIndexable:s}=I5(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(An(a)||QL(a))||o&&mt(a))return!0}return!1}var ZL="4.5.1";const ej=["top","bottom","left","right","chartArea"];function D1(t,e){return t==="top"||t==="bottom"||ej.indexOf(t)===-1&&e==="x"}function N1(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function L1(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),st(n&&n.onComplete,[t],e)}function tj(t){const e=t.chart,n=e.options.animation;st(n&&n.onProgress,[t],e)}function Y5(t){return Xx()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Nd={},j1=t=>{const e=Y5(t);return Object.values(Nd).filter(n=>n.canvas===e).pop()};function nj(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function sj(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var Mr;let Yi=(Mr=class{static register(...e){Fs.add(...e),F1()}static unregister(...e){Fs.remove(...e),F1()}constructor(e,n){const s=this.config=new XL(n),r=Y5(e),i=j1(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||wL(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=lN(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zL,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=EN(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Nd[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Zs.listen(this,"complete",L1),Zs.listen(this,"progress",tj),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return ht(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():c1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return o1(this.canvas,this.ctx),this}stop(){return Zs.stop(this),this}resize(e,n){Zs.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,c1(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),st(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};et(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Wg(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),et(i,o=>{const a=o.options,l=a.id,c=Wg(l,a),u=Ne(a.type,o.dtype);(a.position===void 0||D1(a.position,c)!==D1(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in s&&s[l].type===u)d=s[l];else{const f=Fs.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,e)}),et(r,(o,a)=>{o||delete s[a]}),et(s,o=>{cs.configure(this,o,o.options),cs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(N1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||Ug(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Fs.getController(a),{datasetElementType:c,dataElementType:u}=kt.datasets[a];Object.assign(l,{dataElementType:Fs.getElement(u),datasetElementType:c&&Fs.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){et(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&i.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||et(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(N1("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){et(this.scales,e=>{cs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!Qw(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;nj(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!Qw(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;cs.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],et(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,An(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Zs.has(this)?this.attached&&!Zs.running(this)&&Zs.start(this):(this.draw(),L1({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=A9(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Pf(n,r),e.controller.draw(),r&&Tf(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Lc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=eL.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=fo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Yn(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Zs.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),o1(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Nd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};et(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){et(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},et(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!kh(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=pN(e),c=sj(e,this._lastEvent,s,l);s&&(this._lastEvent=null,st(i.onHover,[e,a,this],this),l&&st(i.onClick,[e,a,this],this));const u=!kh(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},ne(Mr,"defaults",kt),ne(Mr,"instances",Nd),ne(Mr,"overrides",so),ne(Mr,"registry",Fs),ne(Mr,"version",ZL),ne(Mr,"getChart",j1),Mr);function F1(){return et(Yi.instances,t=>t._plugins.invalidate())}function G5(t,e,n=e){t.lineCap=Ne(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ne(n.borderDash,e.borderDash)),t.lineDashOffset=Ne(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ne(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ne(n.borderWidth,e.borderWidth),t.strokeStyle=Ne(n.borderColor,e.borderColor)}function rj(t,e,n){t.lineTo(n.x,n.y)}function ij(t){return t.stepped?BN:t.tension||t.cubicInterpolationMode==="monotone"?$N:rj}function K5(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(i,a),u=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function oj(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:c}=K5(r,n,s),u=ij(i);let{move:d=!0,reverse:f}=s||{},g,m,b;for(g=0;g<=c;++g)m=r[(a+(f?c-g:g))%o],!m.skip&&(d?(t.moveTo(m.x,m.y),d=!1):u(t,b,m,f,i.stepped),b=m);return l&&(m=r[(a+(f?c:0))%o],u(t,b,m,f,i.stepped)),!!l}function aj(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=K5(r,n,s),{move:l=!0,reverse:c}=s||{};let u=0,d=0,f,g,m,b,w,p;const y=v=>(o+(c?a-v:v))%i,x=()=>{b!==w&&(t.lineTo(u,w),t.lineTo(u,b),t.lineTo(u,p))};for(l&&(g=r[y(0)],t.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=r[y(f)],g.skip)continue;const v=g.x,k=g.y,C=v|0;C===m?(k<b?b=k:k>w&&(w=k),u=(d*u+v)/++d):(x(),t.lineTo(v,k),m=C,d=0,b=w=k),p=k}x()}function Hg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?aj:oj}function lj(t){return t.stepped?v9:t.tension||t.cubicInterpolationMode==="monotone"?w9:Ei}function cj(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),G5(t,e.options),t.stroke(r)}function uj(t,e,n,s){const{segments:r,options:i}=e,o=Hg(e);for(const a of r)G5(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const dj=typeof Path2D=="function";function hj(t,e,n,s){dj&&!e.options.segment?cj(t,e,n,s):uj(t,e,n,s)}class $l extends gn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;h9(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=I9(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=E9(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=lj(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],g=i[d],m=i[f];if(g===m){a.push(g);continue}const b=Math.abs((r-g[n])/(m[n]-g[n])),w=l(g,m,b,s.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,s){return Hg(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=Hg(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),hj(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ne($l,"id","line"),ne($l,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ne($l,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ne($l,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function z1(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class Ld extends gn{constructor(n){super();ne(this,"parsed");ne(this,"skip");ne(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return z1(this,n,"x",s)}inYRange(n,s){return z1(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!Lc(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,$g(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ne(Ld,"id","point"),ne(Ld,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ne(Ld,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const B1=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},fj=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class $1 extends gn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=st(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=jt(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=B1(s,i);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let d=e;i.textAlign="left",i.textBaseline="middle";let f=-1,g=-u;return this.legendItems.forEach((m,b)=>{const w=s+n/2+i.measureText(m.text).width;(b===0||c[c.length-1]+w+2*a>o)&&(d+=u,c[c.length-(b>0?0:1)]=0,g+=u,f++),l[b]={left:0,top:g,row:f,width:w,height:r},c[c.length-1]+=w+a}),d}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,g=0,m=0,b=0;return this.legendItems.forEach((w,p)=>{const{itemWidth:y,itemHeight:x}=pj(s,n,i,w,r);p>0&&g+x+2*a>u&&(d+=f+a,c.push({width:f,height:g}),m+=f+a,b++,f=g=0),l[p]={left:m,top:g,col:b,width:y,height:x},f=Math.max(f,y),g+=x+a}),d+=f,c.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=Qo(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=un(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=un(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=un(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=un(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Pf(e,this),this._draw(),Tf(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=kt.color,l=Qo(e.rtl,this.left,this.width),c=jt(o.font),{padding:u}=o,d=c.size,f=d/2;let g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:m,boxHeight:b,itemHeight:w}=B1(o,d),p=function(C,E,T){if(isNaN(m)||m<=0||isNaN(b)||b<0)return;r.save();const P=Ne(T.lineWidth,1);if(r.fillStyle=Ne(T.fillStyle,a),r.lineCap=Ne(T.lineCap,"butt"),r.lineDashOffset=Ne(T.lineDashOffset,0),r.lineJoin=Ne(T.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=Ne(T.strokeStyle,a),r.setLineDash(Ne(T.lineDash,[])),o.usePointStyle){const _={radius:b*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:P},D=l.xPlus(C,m/2),A=E+f;P5(r,_,D,A,o.pointStyleWidth&&m)}else{const _=E+Math.max((d-b)/2,0),D=l.leftForLtr(C,m),A=Xo(T.borderRadius);r.beginPath(),Object.values(A).some(W=>W!==0)?Th(r,{x:D,y:_,w:m,h:b,radius:A}):r.rect(D,_,m,b),r.fill(),P!==0&&r.stroke()}r.restore()},y=function(C,E,T){jc(r,T.text,C,E+w/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},x=this.isHorizontal(),v=this._computeTitleHeight();x?g={x:un(i,this.left+u,this.right-s[0]),y:this.top+u+v,line:0}:g={x:this.left+u,y:un(i,this.top+v+u,this.bottom-n[0].height),line:0},D5(this.ctx,e.textDirection);const k=w+u;this.legendItems.forEach((C,E)=>{r.strokeStyle=C.fontColor,r.fillStyle=C.fontColor;const T=r.measureText(C.text).width,P=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),_=m+f+T;let D=g.x,A=g.y;l.setWidth(this.width),x?E>0&&D+_+u>this.right&&(A=g.y+=k,g.line++,D=g.x=un(i,this.left+u,this.right-s[g.line])):E>0&&A+k>this.bottom&&(D=g.x=D+n[g.line].width+u,g.line++,A=g.y=un(i,this.top+v+u,this.bottom-n[g.line].height));const W=l.x(D);if(p(W,A,C),D=PN(P,D+m+f,x?D+_:this.right,e.rtl),y(l.x(D),A,C),x)g.x+=_+u;else if(typeof C.text!="string"){const H=c.lineHeight;g.y+=q5(C,H)+u}else g.y+=k}),N5(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=jt(n.font),r=pn(n.padding);if(!n.display)return;const i=Qo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=un(e.align,d,this.right-f);else{const m=this.columnSizes.reduce((b,w)=>Math.max(b,w.height),0);u=c+un(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const g=un(a,d,d+f);o.textAlign=i.textAlign(Hx(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,jc(o,n.text,g,u,s)}_computeTitleHeight(){const e=this.options.title,n=jt(e.font),s=pn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(Fl(e,this.left,this.right)&&Fl(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],Fl(e,r.left,r.left+r.width)&&Fl(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!xj(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=fj(r,s);r&&!i&&st(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&st(n.onHover,[e,s,this],this)}else s&&st(n.onClick,[e,s,this],this)}}function pj(t,e,n,s,r){const i=gj(s,t,e,n),o=mj(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function gj(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function mj(t,e,n){let s=t;return typeof e.text!="string"&&(s=q5(e,n)),s}function q5(t,e){const n=t.text?t.text.length:0;return e*n}function xj(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var bj={id:"legend",_element:$1,start(t,e,n){const s=t.legend=new $1({ctx:t.ctx,options:n,chart:t});cs.configure(t,s,n),cs.addBox(t,s)},stop(t){cs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;cs.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=pn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class X5 extends gn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=mt(s.text)?s.text.length:1;this._padding=pn(s.padding);const i=r*jt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=un(a,s,i),d=n+e,c=i-s):(o.position==="left"?(u=s+e,d=un(a,r,n),l=Qe*-.5):(u=i-e,d=un(a,n,r),l=Qe*.5),c=r-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=jt(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);jc(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:Hx(n.align),textBaseline:"middle",translation:[o,a]})}}function yj(t,e){const n=new X5({ctx:t.ctx,options:e,chart:t});cs.configure(t,n,e),cs.addBox(t,n),t.titleBlock=n}var vj={id:"title",_element:X5,start(t,e,n){yj(t,n)},stop(t){const e=t.titleBlock;cs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;cs.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ul={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Fa(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Ls(t,e){return e&&(mt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function er(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function wj(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function U1(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=jt(e.bodyFont),c=jt(e.titleFont),u=jt(e.footerFont),d=i.length,f=r.length,g=s.length,m=pn(e.padding);let b=m.height,w=0,p=s.reduce((v,k)=>v+k.before.length+k.lines.length+k.after.length,0);if(p+=t.beforeBody.length+t.afterBody.length,d&&(b+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),p){const v=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=g*v+(p-g)*l.lineHeight+(p-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let y=0;const x=function(v){w=Math.max(w,n.measureText(v).width+y)};return n.save(),n.font=c.string,et(t.title,x),n.font=l.string,et(t.beforeBody.concat(t.afterBody),x),y=e.displayColors?o+2+e.boxPadding:0,et(s,v=>{et(v.before,x),et(v.lines,x),et(v.after,x)}),y=0,n.font=u.string,et(t.footer,x),n.restore(),w+=m.width,{width:w,height:b}}function Sj(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function kj(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function Cj(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),kj(c,t,e,n)&&(c="center"),c}function W1(t,e,n){const s=n.yAlign||e.yAlign||Sj(t,n);return{xAlign:n.xAlign||e.xAlign||Cj(t,e,n,s),yAlign:s}}function _j(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function Ej(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function H1(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:g}=Xo(o);let m=_j(e,a);const b=Ej(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+r:a==="right"&&(m+=Math.max(d,g)+r),{x:ls(m,0,s.width-e.width),y:ls(b,0,s.height-e.height)}}function ud(t,e,n){const s=pn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function V1(t){return Ls([],er(t))}function Pj(t,e,n){return fo(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Y1(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Q5={beforeTitle:Js,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:Js,beforeBody:Js,beforeLabel:Js,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ht(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Js,afterBody:Js,beforeFooter:Js,footer:Js,afterFooter:Js};function Cn(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?Q5[e].call(n,s):r}class Vg extends gn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new Jx(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Pj(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=Cn(s,"beforeTitle",this,e),i=Cn(s,"title",this,e),o=Cn(s,"afterTitle",this,e);let a=[];return a=Ls(a,er(r)),a=Ls(a,er(i)),a=Ls(a,er(o)),a}getBeforeBody(e,n){return V1(Cn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return et(e,i=>{const o={before:[],lines:[],after:[]},a=Y1(s,i);Ls(o.before,er(Cn(a,"beforeLabel",this,i))),Ls(o.lines,Cn(a,"label",this,i)),Ls(o.after,er(Cn(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return V1(Cn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=Cn(s,"beforeFooter",this,e),i=Cn(s,"footer",this,e),o=Cn(s,"afterFooter",this,e);let a=[];return a=Ls(a,er(r)),a=Ls(a,er(i)),a=Ls(a,er(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(wj(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,s))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,s))),et(a,u=>{const d=Y1(e.callbacks,u);r.push(Cn(d,"labelColor",this,u)),i.push(Cn(d,"labelPointStyle",this,u)),o.push(Cn(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=Ul[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=U1(this,s),c=Object.assign({},a,l),u=W1(this.chart,s,c),d=H1(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Xo(a),{x:f,y:g}=e,{width:m,height:b}=n;let w,p,y,x,v,k;return i==="center"?(v=g+b/2,r==="left"?(w=f,p=w-o,x=v+o,k=v-o):(w=f+m,p=w+o,x=v-o,k=v+o),y=w):(r==="left"?p=f+Math.max(l,u)+o:r==="right"?p=f+m-Math.max(c,d)-o:p=this.caretX,i==="top"?(x=g,v=x-o,w=p-o,y=p+o):(x=g+b,v=x+o,w=p+o,y=p-o),k=x),{x1:w,x2:p,x3:y,y1:x,y2:v,y3:k}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=Qo(s.rtl,this.x,this.width);for(e.x=ud(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=jt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,u=jt(i.bodyFont),d=ud(this,"left",i),f=r.x(d),g=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+g;if(i.usePointStyle){const b={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(f,c)+c/2,p=m+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,$g(e,b,w,p),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,$g(e,b,w,p)}else{e.lineWidth=Fe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=r.leftForLtr(f,c),w=r.leftForLtr(r.xPlus(f,1),c-2),p=Xo(o.borderRadius);Object.values(p).some(y=>y!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Th(e,{x:b,y:m,w:c,h:l,radius:p}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Th(e,{x:w,y:m+1,w:c-2,h:l-2,radius:p}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(b,m,c,l),e.strokeRect(b,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,d=jt(s.bodyFont);let f=d.lineHeight,g=0;const m=Qo(s.rtl,this.x,this.width),b=function(T){n.fillText(T,m.x(e.x+g),e.y+f/2),e.y+=f+i},w=m.textAlign(o);let p,y,x,v,k,C,E;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=ud(this,w,s),n.fillStyle=s.bodyColor,et(this.beforeBody,b),g=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,v=0,C=r.length;v<C;++v){for(p=r[v],y=this.labelTextColors[v],n.fillStyle=y,et(p.before,b),x=p.lines,a&&x.length&&(this._drawColorBox(n,e,v,m,s),f=Math.max(d.lineHeight,l)),k=0,E=x.length;k<E;++k)b(x[k]),f=d.lineHeight;et(p.after,b)}g=0,f=d.lineHeight,et(this.afterBody,b),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=Qo(s.rtl,this.x,this.width);for(e.x=ud(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=jt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:m}=Xo(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+g,l+u),n.quadraticCurveTo(a,l+u,a,l+u-g),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Ul[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=U1(this,e),l=Object.assign({},o,this._size),c=W1(n,e,l),u=H1(e,l,c,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=pn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),D5(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),N5(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!kh(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!kh(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=Ul[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}ne(Vg,"positioners",Ul);var Tj={id:"tooltip",_element:Vg,positioners:Ul,afterInit(t,e,n){n&&(t.tooltip=new Vg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Q5},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Ij=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Mj(t,e,n,s){const r=t.indexOf(e);if(r===-1)return Ij(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const Rj=(t,e)=>t===null?null:ls(Math.round(t),0,e);function G1(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Yg extends Qa{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ht(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:Mj(s,e,Ne(n,e),this._addedLabels),Rj(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return G1.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ne(Yg,"id","category"),ne(Yg,"defaults",{ticks:{callback:G1}});function Oj(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,g=i||1,m=u-1,{min:b,max:w}=e,p=!ht(o),y=!ht(a),x=!ht(c),v=(w-b)/(d+1);let k=Jw((w-b)/m/g)*g,C,E,T,P;if(k<1e-14&&!p&&!y)return[{value:b},{value:w}];P=Math.ceil(w/k)-Math.floor(b/k),P>m&&(k=Jw(P*k/m/g)*g),ht(l)||(C=Math.pow(10,l),k=Math.ceil(k*C)/C),r==="ticks"?(E=Math.floor(b/k)*k,T=Math.ceil(w/k)*k):(E=b,T=w),p&&y&&i&&bN((a-o)/i,k/1e3)?(P=Math.round(Math.min((a-o)/k,u)),k=(a-o)/P,E=o,T=a):x?(E=p?o:E,T=y?a:T,P=c-1,k=(T-E)/P):(P=(T-E)/k,oc(P,Math.round(P),k/1e3)?P=Math.round(P):P=Math.ceil(P));const _=Math.max(Zw(k),Zw(E));C=Math.pow(10,ht(l)?_:l),E=Math.round(E*C)/C,T=Math.round(T*C)/C;let D=0;for(p&&(f&&E!==o?(n.push({value:o}),E<o&&D++,oc(Math.round((E+D*k)*C)/C,o,K1(o,v,t))&&D++):E<o&&D++);D<P;++D){const A=Math.round((E+D*k)*C)/C;if(y&&A>a)break;n.push({value:A})}return y&&f&&T!==a?n.length&&oc(n[n.length-1].value,a,K1(a,v,t))?n[n.length-1].value=a:n.push({value:a}):(!y||T===a)&&n.push({value:T}),n}function K1(t,e,{horizontal:n,minRotation:s}){const r=Wt(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class Aj extends Qa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ht(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=ja(r),c=ja(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=Oj(r,i);return e.bounds==="ticks"&&yN(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return Yx(e,this.chart.options.locale,this.options.ticks.format)}}class Gg extends Aj{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Nn(e)?e:0,this.max=Nn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Wt(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ne(Gg,"id","linear"),ne(Gg,"defaults",{ticks:{callback:E5.formatters.numeric}});const Rf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Tn=Object.keys(Rf);function q1(t,e){return t-e}function X1(t,e){if(ht(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Nn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(no(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function Q1(t,e,n,s){const r=Tn.length;for(let i=Tn.indexOf(t);i<r-1;++i){const o=Rf[Tn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return Tn[i]}return Tn[r-1]}function Dj(t,e,n,s,r){for(let i=Tn.length-1;i>=Tn.indexOf(n);i--){const o=Tn[i];if(Rf[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return Tn[n?Tn.indexOf(n):0]}function Nj(t){for(let e=Tn.indexOf(t)+1,n=Tn.length;e<n;++e)if(Rf[Tn[e]].common)return Tn[e]}function J1(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=Wx(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function Lj(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function Z1(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:Lj(t,s,r,n)}class Rh extends Qa{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new q9._date(e.adapters.date);r.init(n),ic(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:X1(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Nn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Nn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=kN(r,i,o);return this._unit=n.unit||(s.autoSkip?Q1(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):Dj(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Nj(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Z1(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ls(n,0,o),s=ls(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||Q1(i.minUnit,n,s,this._getLabelCapacity(n)),a=Ne(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=no(l)||l===!0,u={};let d=n,f,g;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const m=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<s;f=+e.add(f,a,o),g++)J1(u,f,m);return(f===s||r.bounds==="ticks"||g===1)&&J1(u,f,m),Object.keys(u).sort(q1).map(b=>+b)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return st(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=s[n],g=c&&d&&f&&f.major;return this._adapter.format(e,r||(g?d:u))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Wt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,Z1(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(X1(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _N(e.sort(q1))}}ne(Rh,"id","time"),ne(Rh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function dd(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=Ni(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=Ni(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class eS extends Rh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=dd(n,this.min),this._tableRange=dd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(dd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return dd(this._table,s*this._tableRange+this._minPos,!0)}}ne(eS,"id","timeseries"),ne(eS,"defaults",Rh.defaults);const J5="label";function tS(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function jj(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Z5(t,e){t.labels=e}function e3(t,e,n=J5){const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function Fj(t,e=J5){const n={labels:[],datasets:[]};return Z5(n,t.labels),e3(n,t.datasets,e),n}function zj(t,e){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...f}=t,g=S.useRef(null),m=S.useRef(null),b=()=>{g.current&&(m.current=new Yi(g.current,{type:o,data:Fj(a,i),options:l&&{...l},plugins:c}),tS(e,m.current))},w=()=>{tS(e,null),m.current&&(m.current.destroy(),m.current=null)};return S.useEffect(()=>{!r&&m.current&&l&&jj(m.current,l)},[r,l]),S.useEffect(()=>{!r&&m.current&&Z5(m.current.config.data,a.labels)},[r,a.labels]),S.useEffect(()=>{!r&&m.current&&a.datasets&&e3(m.current.config.data,a.datasets,i)},[r,a.datasets]),S.useEffect(()=>{m.current&&(r?(w(),setTimeout(b)):m.current.update(d))},[r,l,a.labels,a.datasets,d]),S.useEffect(()=>{m.current&&(w(),setTimeout(b))},[o]),S.useEffect(()=>(b(),()=>w()),[]),h.jsx("canvas",{ref:g,role:"img",height:n,width:s,...f,children:u})}const Bj=S.forwardRef(zj);function $j(t,e){return Yi.register(e),S.forwardRef((n,s)=>h.jsx(Bj,{...n,ref:s,type:t}))}const Uj=$j("scatter",Ad);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const nS={modes:{point(t,e){return jd(t,e,{intersect:!0})},nearest(t,e,n){return Vj(t,e,n)},x(t,e,n){return jd(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return jd(t,e,{intersect:n.intersect,axis:"y"})}}};function eb(t,e,n){return(nS.modes[n.mode]||nS.modes.nearest)(t,e,n)}function Wj(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function Hj(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function jd(t,e,n){return t.filter(s=>n.intersect?s.inRange(e.x,e.y):Wj(s,e,n.axis))}function Vj(t,e,n){let s=Number.POSITIVE_INFINITY;return jd(t,e,n).reduce((r,i)=>{const o=i.getCenterPoint(),a=Hj(e,o,n.axis),l=Fa(e,a);return l<s?(r=[i],s=l):l===s&&r.push(i),r},[]).sort((r,i)=>r._index-i._index).slice(0,1)}function po(t,e,n){const s=Math.cos(n),r=Math.sin(n),i=e.x,o=e.y;return{x:i+s*(t.x-i)-r*(t.y-o),y:o+r*(t.x-i)+s*(t.y-o)}}const Yj=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Li=.001,Of=(t,e,n)=>Math.min(n,Math.max(e,t)),t3=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function Gj(t,e,n){for(const s of Object.keys(t))t[s]=Of(t[s],e,n);return t}function Kj(t,e,n,s){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function n3(t,{x:e,y:n,x2:s,y2:r},i,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=t.x>=e-l-Li&&t.x<=s+l+Li,u=t.y>=n-l-Li&&t.y<=r+l+Li;return i==="x"?c:(i==="y"||c)&&u}function s3(t,{rect:e,center:n},s,{rotation:r,borderWidth:i,hitTolerance:o}){const a=po(t,n,Wt(-r));return n3(a,e,s,{borderWidth:i,hitTolerance:o})}function go(t,e){const{centerX:n,centerY:s}=t.getProps(["centerX","centerY"],e);return{x:n,y:s}}function qj(t,e,n,s=!0){const r=n.split(".");let i=0;for(const o of e.split(".")){const a=r[i++];if(parseInt(o,10)<parseInt(a,10))break;if(Yj(a,o)){if(s)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const r3=t=>typeof t=="string"&&t.endsWith("%"),i3=t=>parseFloat(t)/100,o3=t=>Of(i3(t),0,1),Pl=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),Xj={box:t=>Pl(t.centerX,t.centerY),doughnutLabel:t=>Pl(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>Pl(t.centerX,t.centerY),line:t=>Pl(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>Pl(t.centerX,t.centerY)};function tb(t,e){return e==="start"?0:e==="end"?t:r3(e)?o3(e)*t:t/2}function ui(t,e,n=!0){return typeof e=="number"?e:r3(e)?(n?o3(e):i3(e))*t:t}function Qj(t,e){const{x:n,width:s}=t,r=e.textAlign;return r==="center"?n+s/2:r==="end"||r==="right"?n+s:n}function a3(t,e,{borderWidth:n,position:s,xAdjust:r,yAdjust:i},o){const a=Fe(o),l=e.width+(a?o.width:0)+n,c=e.height+(a?o.height:0)+n,u=nb(s),d=sS(t.x,l,r,u.x),f=sS(t.y,c,i,u.y);return{x:d,y:f,x2:d+l,y2:f+c,width:l,height:c,centerX:d+l/2,centerY:f+c/2}}function nb(t,e="center"){return Fe(t)?{x:Ne(t.x,e),y:Ne(t.y,e)}:(t=Ne(t,e),{x:t,y:t})}const l3=(t,e)=>t&&t.autoFit&&e<1;function c3(t,e){const n=t.font,s=mt(n)?n:[n];return l3(t,e)?s.map(function(r){const i=jt(r);return i.size=Math.floor(r.size*e),i.lineHeight=r.lineHeight,jt(i)}):s.map(r=>jt(r))}function u3(t){return t&&(Yn(t.xValue)||Yn(t.yValue))}function sS(t,e,n=0,s){return t-tb(e,s)+n}function Ja(t,e,n){const s=n.init;if(s){if(s===!0)return h3(e,n)}else return;return Jj(t,e,n)}function d3(t,e,n){let s=!1;return e.forEach(r=>{An(t[r])?(s=!0,n[r]=t[r]):Yn(n[r])&&delete n[r]}),s}function h3(t,e){const n=e.type||"line";return Xj[n](t)}function Jj(t,e,n){const s=st(n.init,[{chart:t,properties:e,options:n}]);if(s===!0)return h3(e,n);if(Fe(s))return s}const bp=new Map,Zj=t=>isNaN(t)||t<=0,eF=t=>t.reduce(function(e,n){return e+=n.string,e},"");function Af(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function Df(t,{x:e,y:n},s){s&&(t.translate(e,n),t.rotate(Wt(s)),t.translate(-e,-n))}function yr(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function Za(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function Nf(t,e){const n=e.content;if(Af(n))return{width:ui(n.width,e.width),height:ui(n.height,e.height)};const s=c3(e),r=e.textStrokeWidth,i=mt(n)?n:[n],o=i.join()+eF(s)+r+(t._measureText?"-spriting":"");return bp.has(o)||bp.set(o,rF(t,i,s,r)),bp.get(o)}function f3(t,e,n){const{x:s,y:r,width:i,height:o}=e;t.save(),Za(t,n);const a=yr(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),Th(t,{x:s,y:r,w:i,h:o,radius:Gj(Xo(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function p3(t,e,n,s){const r=n.content;if(Af(r)){t.save(),t.globalAlpha=aF(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const i=mt(r)?r:[r],o=c3(n,s),a=n.color,l=mt(a)?a:[a],c=Qj(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,tF(t,n)&&iF(t,{x:c,y:u},i,o),oF(t,{x:c,y:u},i,{fonts:o,colors:l}),t.restore()}function tF(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function nF(t,e,n,s){const{radius:r,options:i}=e,o=i.pointStyle,a=i.rotation;let l=(a||0)*Ux;if(Af(o)){t.save(),t.translate(n,s),t.rotate(l),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}Zj(r)||sF(t,{x:n,y:s,radius:r,rotation:a,style:o,rad:l})}function sF(t,{x:e,y:n,radius:s,rotation:r,style:i,rad:o}){let a,l,c,u;switch(t.beginPath(),i){default:t.arc(e,n,s,0,Zt),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=Eh,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=Eh,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),t.closePath();break;case"rectRounded":u=s*.516,c=s-u,a=Math.cos(o+rs)*c,l=Math.sin(o+rs)*c,t.arc(e-a,n-l,u,o-Qe,o-en),t.arc(e+l,n-a,u,o-en,o),t.arc(e+a,n+l,u,o,o+en),t.arc(e-l,n+a,u,o+en,o+Qe),t.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*s,t.rect(e-c,n-c,2*c,2*c);break}o+=rs;case"rectRot":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+l,n-a),t.lineTo(e+a,n+l),t.lineTo(e-l,n+a),t.closePath();break;case"crossRot":o+=rs;case"cross":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"star":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a),o+=rs,a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"line":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*s,n+Math.sin(o)*s);break}t.fill()}function rF(t,e,n,s){t.save();const r=e.length;let i=0,o=s;for(let a=0;a<r;a++){const l=n[Math.min(a,n.length-1)];t.font=l.string;const c=e[a];i=Math.max(i,t.measureText(c).width+s),o+=l.lineHeight}return t.restore(),{width:i,height:o}}function iF(t,{x:e,y:n},s,r){t.beginPath();let i=0;s.forEach(function(o,a){const l=r[Math.min(a,r.length-1)],c=l.lineHeight;t.font=l.string,t.strokeText(o,e,n+c/2+i),i+=c}),t.stroke()}function oF(t,{x:e,y:n},s,{fonts:r,colors:i}){let o=0;s.forEach(function(a,l){const c=i[Math.min(l,i.length-1)],u=r[Math.min(l,r.length-1)],d=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=c,t.fillText(a,e,n+d/2+o),o+=d,t.fill()})}function aF(t,e){const n=no(t)?t:e;return no(n)?Of(n,0,1):1}const g3=["left","bottom","top","right"];function lF(t,e){const{pointX:n,pointY:s,options:r}=e,i=r.callout,o=i&&i.display&&fF(e,i);if(!o||gF(e,i,o))return;if(t.save(),t.beginPath(),!yr(t,i))return t.restore();const{separatorStart:l,separatorEnd:c}=cF(e,o),{sideStart:u,sideEnd:d}=dF(e,o,l);(i.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(d.x,d.y);const f=po({x:n,y:s},e.getCenterPoint(),Wt(-e.rotation));t.lineTo(f.x,f.y),t.stroke(),t.restore()}function cF(t,e){const{x:n,y:s,x2:r,y2:i}=t,o=uF(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:s},l={x:a.x,y:i}):(a={x:n,y:s+o},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function uF(t,e){const{width:n,height:s,options:r}=t,i=r.callout.margin+r.borderWidth/2;return e==="right"?n+i:e==="bottom"?s+i:-i}function dF(t,e,n){const{y:s,width:r,height:i,options:o}=t,a=o.callout.start,l=hF(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:s+ui(i,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+ui(r,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function hF(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function fF(t,e){const n=e.position;return g3.includes(n)?n:pF(t,e)}function pF(t,e){const{x:n,y:s,x2:r,y2:i,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:f}=t,g={x:u,y:d},m=e.start,b=ui(o,m),w=ui(a,m),p=[n,n+b,n+b,r],y=[s+w,i,s,i],x=[];for(let v=0;v<4;v++){const k=po({x:p[v],y:y[v]},g,Wt(f));x.push({position:g3[v],distance:Fa(k,{x:l,y:c})})}return x.sort((v,k)=>v.distance-k.distance)[0].position}function gF(t,e,n){const{pointX:s,pointY:r}=t,i=e.margin;let o=s,a=r;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?a+=i:n==="bottom"&&(a-=i),t.inRange(o,a)}const rS={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function $a(t,e,n){return e=typeof e=="number"?e:t.parse(e),Nn(e)?t.getPixelForValue(e):n}function ro(t,e,n){const s=e[n];if(s||n==="scaleID")return s;const r=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===r);return i.length?i[0].id:r}function m3(t,e){if(t){const n=t.options.reverse,s=$a(t,e.min,n?e.end:e.start),r=$a(t,e.max,n?e.start:e.end);return{start:s,end:r}}}function x3(t,e){const{chartArea:n,scales:s}=t,r=s[ro(s,e,"xScaleID")],i=s[ro(s,e,"yScaleID")];let o=n.width/2,a=n.height/2;return r&&(o=$a(r,e.xValue,r.left+r.width/2)),i&&(a=$a(i,e.yValue,i.top+i.height/2)),{x:o,y:a}}function sb(t,e){const n=t.scales,s=n[ro(n,e,"xScaleID")],r=n[ro(n,e,"yScaleID")];if(!s&&!r)return{};let{left:i,right:o}=s||t.chartArea,{top:a,bottom:l}=r||t.chartArea;const c=iS(s,{min:e.xMin,max:e.xMax,start:i,end:o});i=c.start,o=c.end;const u=iS(r,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:i,y:a,x2:o,y2:l,width:o-i,height:l-a,centerX:i+(o-i)/2,centerY:a+(l-a)/2}}function b3(t,e){if(!u3(e)){const n=sb(t,e);let s=e.radius;(!s||isNaN(s))&&(s=Math.min(n.width,n.height)/2,e.radius=s);const r=s*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-s,y:o-s,x2:i+s,y2:o+s,centerX:i,centerY:o,width:r,height:r,radius:s}}return xF(t,e)}function mF(t,e){const{scales:n,chartArea:s}=t,r=n[e.scaleID],i={x:s.left,y:s.top,x2:s.right,y2:s.bottom};return r?bF(r,i,e):yF(n,i,e),i}function y3(t,e){const n=sb(t,e);return n.initProperties=Ja(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:SF(t,n,e),initProperties:n.initProperties}],n}function xF(t,e){const n=x3(t,e),s=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:s,height:s}}function iS(t,e){const n=m3(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function bF(t,e,n){const s=$a(t,n.value,NaN),r=$a(t,n.endValue,s);t.isHorizontal()?(e.x=s,e.x2=r):(e.y=s,e.y2=r)}function yF(t,e,n){for(const s of Object.keys(rS)){const r=t[ro(t,n,s)];if(r){const{min:i,max:o,start:a,end:l,startProp:c,endProp:u}=rS[s],d=m3(r,{min:n[i],max:n[o],start:r[a],end:r[l]});e[c]=d.start,e[u]=d.end}}}function vF({properties:t,options:e},n,s,r){const{x:i,x2:o,width:a}=t;return v3({start:i,end:o,borderWidth:e.borderWidth},{position:s.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function wF({properties:t,options:e},n,s,r){const{y:i,y2:o,height:a}=t;return v3({start:i,end:o,borderWidth:e.borderWidth},{position:s.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function v3(t,e){const{start:n,end:s,borderWidth:r}=t,{position:i,padding:{start:o,end:a},adjust:l}=e,c=s-r-n-o-a-e.size;return n+r/2+l+tb(c,i)}function SF(t,e,n){const s=n.label;s.backgroundColor="transparent",s.callout.display=!1;const r=nb(s.position),i=pn(s.padding),o=Nf(t.ctx,s),a=vF({properties:e,options:n},o,r,i),l=wF({properties:e,options:n},o,r,i),c=o.width+i.width,u=o.height+i.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:s.rotation}}const Kg=["enter","leave"],rb=Kg.concat("click");function kF(t,e,n){e.listened=d3(n,rb,e.listeners),e.moveListened=!1,Kg.forEach(s=>{An(n[s])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(s=>{!e.listened&&An(s.click)&&(e.listened=!0),e.moveListened||Kg.forEach(r=>{An(s[r])&&(e.listened=!0,e.moveListened=!0)})})}function CF(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return _F(t,e,n);case"click":return EF(t,e,n)}}function _F(t,e,n){if(!t.moveListened)return;let s;e.type==="mousemove"?s=eb(t.visibleElements,e,n.interaction):s=[];const r=t.hovered;t.hovered=s;const i={state:t,event:e};let o=oS(i,"leave",r,s);return oS(i,"enter",s,r)||o}function oS({state:t,event:e},n,s,r){let i;for(const o of s)r.indexOf(o)<0&&(i=w3(o.options[n]||t.listeners[n],o,e)||i);return i}function EF(t,e,n){const s=t.listeners,r=eb(t.visibleElements,e,n.interaction);let i;for(const o of r)i=w3(o.options.click||s.click,o,e)||i;return i}function w3(t,e,n){return st(t,[e.$context,n])===!0}const Oh=["afterDraw","beforeDraw"];function PF(t,e,n){const s=e.visibleElements;e.hooked=d3(n,Oh,e.hooks),e.hooked||s.forEach(r=>{e.hooked||Oh.forEach(i=>{An(r.options[i])&&(e.hooked=!0)})})}function aS(t,e,n){if(t.hooked){const s=e.options[n]||t.hooks[n];return st(s,[e.$context])}}function TF(t,e,n){const s=AF(t.scales,e,n);let r=lS(e,s,"min","suggestedMin");r=lS(e,s,"max","suggestedMax")||r,r&&An(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function IF(t,e){for(const n of t)RF(n,e)}function lS(t,e,n,s){if(Nn(e[n])&&!MF(t.options,n,s)){const r=t[n]!==e[n];return t[n]=e[n],r}}function MF(t,e,n){return Yn(t[e])||Yn(t[n])}function RF(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const s=ro(e,t,n);s&&!e[s]&&OF(t,n)&&console.warn(`No scale found with id '${s}' for annotation '${t.id}'`)}}function OF(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const s of["Min","Max","Value"])if(Yn(t[n+s]))return!0;return!1}function AF(t,e,n){const s=e.axis,r=e.id,i=s+"ScaleID",o={min:Ne(e.min,Number.NEGATIVE_INFINITY),max:Ne(e.max,Number.POSITIVE_INFINITY)};for(const a of n)a.scaleID===r?cS(a,e,["value","endValue"],o):ro(t,a,i)===r&&cS(a,e,[s+"Min",s+"Max",s+"Value"],o);return o}function cS(t,e,n,s){for(const r of n){const i=t[r];if(Yn(i)){const o=e.parse(i);s.min=Math.min(s.min,o),s.max=Math.max(s.max,o)}}}class el extends gn{inRange(e,n,s,r){const{x:i,y:o}=po({x:e,y:n},this.getCenterPoint(r),Wt(-this.options.rotation));return n3({x:i,y:o},this.getProps(["x","y","x2","y2"],r),s,this.options)}getCenterPoint(e){return go(this,e)}draw(e){e.save(),Df(e,this.getCenterPoint(),this.options.rotation),f3(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return y3(e,n)}}el.id="boxAnnotation";el.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};el.defaultRoutes={borderColor:"color",backgroundColor:"color"};el.descriptors={label:{_fallback:!0}};class Lf extends gn{inRange(e,n,s,r){return s3({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return go(this,e)}draw(e){const n=this.options;!n.display||!n.content||(zF(e,this),e.save(),Df(e,this.getCenterPoint(),this.rotation),p3(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const s=DF(e,n);if(!s)return{};const{controllerMeta:r,point:i,radius:o}=LF(e,n,s);let a=Nf(e.ctx,n);const l=jF(a,o);l3(n,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:d}=n,f=a3(i,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return{initProperties:Ja(e,f,n),...f,...r,rotation:n.rotation,_fitRatio:l}}}Lf.id="doughnutLabelAnnotation";Lf.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Lf.defaultRoutes={};function DF(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,s){const r=s.controller;return r instanceof zl&&NF(t,e,s.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?s:n},void 0)}function NF(t,e,n){if(!e.autoHide)return!0;for(let s=0;s<n.length;s++)if(!n[s].hidden&&t.getDataVisibility(s))return!0}function LF({chartArea:t},e,n){const{left:s,top:r,right:i,bottom:o}=t,{innerRadius:a,offsetX:l,offsetY:c}=n.controller,u=(s+i)/2+l,d=(r+o)/2+c,f={left:Math.max(u-a,s),right:Math.min(u+a,i),top:Math.max(d-a,r),bottom:Math.min(d+a,o)},g={x:(f.left+f.right)/2,y:(f.top+f.bottom)/2},m=e.spacing+e.borderWidth/2,b=a-m,w=g.y>d,p=w?r+m:o-m,y=FF(p,u,d,b);return{controllerMeta:{_centerX:u,_centerY:d,_radius:b,_counterclockwise:w,...y},point:g,radius:Math.min(a,Math.min(f.right-f.left,f.bottom-f.top)/2)}}function jF({width:t,height:e},n){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/s}function FF(t,e,n,s){const r=Math.pow(n-t,2),i=Math.pow(s,2),o=e*-2,a=Math.pow(e,2)+r-i,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:Zt};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:zg({x:e,y:n},{x:c,y:t}).angle,_endAngle:zg({x:e,y:n},{x:u,y:t}).angle}}function zF(t,e){const{_centerX:n,_centerY:s,_radius:r,_startAngle:i,_endAngle:o,_counterclockwise:a,options:l}=e;t.save();const c=yr(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,s,r,i,o,a),t.closePath(),t.fill(),c&&t.stroke(),t.restore()}class hu extends gn{inRange(e,n,s,r){return s3({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return go(this,e)}draw(e){const n=this.options,s=!Yn(this._visible)||this._visible;!n.display||!n.content||!s||(e.save(),Df(e,this.getCenterPoint(),this.rotation),lF(e,this),f3(e,this,n),p3(e,BF(this),n),e.restore())}resolveElementProperties(e,n){let s;if(u3(n))s=x3(e,n);else{const{centerX:a,centerY:l}=sb(e,n);s={x:a,y:l}}const r=pn(n.padding),i=Nf(e.ctx,n),o=a3(s,i,n,r);return{initProperties:Ja(e,o,n),pointX:s.x,pointY:s.y,...o,rotation:n.rotation}}}hu.id="labelAnnotation";hu.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};hu.defaultRoutes={borderColor:"color"};function BF({x:t,y:e,width:n,height:s,options:r}){const i=r.borderWidth/2,o=pn(r.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-r.borderWidth,height:s-o.top-o.bottom-r.borderWidth}}const ib=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),qg=(t,e,n)=>ib(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,uS=(t,e,n)=>ib(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,Wl=t=>t*t,$F=(t,e,{x:n,y:s,x2:r,y2:i},o)=>o==="y"?{start:Math.min(s,i),end:Math.max(s,i),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},dS=(t,e,n,s)=>(1-s)*(1-s)*t+2*(1-s)*s*e+s*s*n,Xg=(t,e,n,s)=>({x:dS(t.x,e.x,n.x,s),y:dS(t.y,e.y,n.y,s)}),hS=(t,e,n,s)=>2*(1-s)*(e-t)+2*s*(n-e),fS=(t,e,n,s)=>-Math.atan2(hS(t.x,e.x,n.x,s),hS(t.y,e.y,n.y,s))+.5*Qe;class fu extends gn{inRange(e,n,s,r){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y"){const o={mouseX:e,mouseY:n},{path:a,ctx:l}=this;if(a){yr(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=e*u.currentDevicePixelRatio,f=n*u.currentDevicePixelRatio,g=l.isPointInStroke(a,d,f)||Qg(this,o,r);return l.restore(),g}const c=Wl(i);return VF(this,o,c,r)||Qg(this,o,r)}return UF(this,{mouseX:e,mouseY:n},s,{hitSize:i,useFinalPosition:r})}getCenterPoint(e){return go(this,e)}draw(e){const{x:n,y:s,x2:r,y2:i,cp:o,options:a}=this;if(e.save(),!yr(e,a))return e.restore();Za(e,a);const l=Math.sqrt(Math.pow(r-n,2)+Math.pow(i-s,2));if(a.curve&&o)return ZF(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:d,endAdjust:f}=S3(this),g=Math.atan2(i-s,r-n);e.translate(n,s),e.rotate(g),e.beginPath(),e.moveTo(0+d,0),e.lineTo(l-f,0),e.shadowColor=a.borderShadowColor,e.stroke(),Jg(e,0,d,c),Jg(e,l,-f,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const s=mF(e,n),{x:r,y:i,x2:o,y2:a}=s,l=WF(s,e.chartArea),c=l?HF({x:r,y:i},{x:o,y:a},e.chartArea):{x:r,y:i,x2:o,y2:a,width:Math.abs(o-r),height:Math.abs(a-i)};if(c.centerX=(o+r)/2,c.centerY=(a+i)/2,c.initProperties=Ja(e,c,n),n.curve){const d={x:c.x,y:c.y},f={x:c.x2,y:c.y2};c.cp=JF(c,n,Fa(d,f))}const u=YF(e,c,n.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}fu.id="lineAnnotation";const pS={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};fu.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},pS),fill:!1,length:12,start:Object.assign({},pS),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},hu.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};fu.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};fu.defaultRoutes={borderColor:"color"};function UF(t,{mouseX:e,mouseY:n},s,{hitSize:r,useFinalPosition:i}){const o=$F(e,n,t.getProps(["x","y","x2","y2"],i),s);return t3(o,r)||Qg(t,{mouseX:e,mouseY:n},i,s)}function WF({x:t,y:e,x2:n,y2:s},{top:r,right:i,bottom:o,left:a}){return!(t<a&&n<a||t>i&&n>i||e<r&&s<r||e>o&&s>o)}function gS({x:t,y:e},n,{top:s,right:r,bottom:i,left:o}){return t<o&&(e=uS(o,{x:t,y:e},n),t=o),t>r&&(e=uS(r,{x:t,y:e},n),t=r),e<s&&(t=qg(s,{x:t,y:e},n),e=s),e>i&&(t=qg(i,{x:t,y:e},n),e=i),{x:t,y:e}}function HF(t,e,n){const{x:s,y:r}=gS(t,e,n),{x:i,y:o}=gS(e,t,n);return{x:s,y:r,x2:i,y2:o,width:Math.abs(i-s),height:Math.abs(o-r)}}function VF(t,{mouseX:e,mouseY:n},s=Li,r){const{x:i,y:o,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],r),c=a-i,u=l-o,d=Wl(c)+Wl(u),f=d===0?-1:((e-i)*c+(n-o)*u)/d;let g,m;return f<0?(g=i,m=o):f>1?(g=a,m=l):(g=i+f*c,m=o+f*u),Wl(e-g)+Wl(n-m)<=s}function Qg(t,{mouseX:e,mouseY:n},s,r){const i=t.label;return i.options.display&&i.inRange(e,n,r,s)}function YF(t,e,n){const s=n.borderWidth,r=pn(n.padding),i=Nf(t.ctx,n),o=i.width+r.width+s,a=i.height+r.height+s;return KF(e,n,{width:o,height:a,padding:r},t.chartArea)}function GF(t){const{x:e,y:n,x2:s,y2:r}=t,i=Math.atan2(r-n,s-e);return i>Qe/2?i-Qe:i<Qe/-2?i+Qe:i}function KF(t,e,n,s){const{width:r,height:i,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},d=e.rotation==="auto"?GF(t):Wt(e.rotation),f=qF(r,i,d),g=XF(t,e,{labelSize:f,padding:o},s),m=t.cp?Xg(c,t.cp,u,g):ib(c,u,g),b={size:f.w,min:s.left,max:s.right,padding:o.left},w={size:f.h,min:s.top,max:s.bottom,padding:o.top},p=xS(m.x,b)+a,y=xS(m.y,w)+l;return{x:p-r/2,y:y-i/2,x2:p+r/2,y2:y+i/2,centerX:p,centerY:y,pointX:m.x,pointY:m.y,width:r,height:i,rotation:S5(d)}}function qF(t,e,n){const s=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*s)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*s)}}function XF(t,e,n,s){let r;const i=QF(t,s);return e.position==="start"?r=mS({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?r=1-mS({w:t.x-t.x2,h:t.y-t.y2},n,e,i):r=tb(1,e.position),r}function mS(t,e,n,s){const{labelSize:r,padding:i}=e,o=t.w*s.dx,a=t.h*s.dy,l=o>0&&(r.w/2+i.left-s.x)/o,c=a>0&&(r.h/2+i.top-s.y)/a;return Of(Math.max(l,c),0,.25)}function QF(t,e){const{x:n,x2:s,y:r,y2:i}=t,o=Math.min(r,i)-e.top,a=Math.min(n,s)-e.left,l=e.bottom-Math.max(r,i),c=e.right-Math.max(n,s);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function xS(t,e){const{size:n,min:s,max:r,padding:i}=e,o=n/2;return n>r-s?(r+s)/2:(s>=t-i-o&&(t=s+i+o),r<=t+i+o&&(t=r-i-o),t)}function S3(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,s=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:bS(t,n),endAdjust:bS(t,s)}}function bS(t,e){if(!e||!e.display)return 0;const{length:n,width:s}=e,r=t.options.borderWidth/2,i={x:n,y:s+r};return Math.abs(qg(0,i,{x:0,y:r}))}function Jg(t,e,n,s){if(!s||!s.display)return;const{length:r,width:i,fill:o,backgroundColor:a,borderColor:l}=s,c=Math.abs(e-r)+n;t.beginPath(),Za(t,s),yr(t,s),t.moveTo(c,-i),t.lineTo(e+n,0),t.lineTo(c,i),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=s.borderShadowColor,t.stroke()}function JF(t,e,n){const{x:s,y:r,x2:i,y2:o,centerX:a,centerY:l}=t,c=Math.atan2(o-r,i-s),u=nb(e.controlPoint,0),d={x:a+ui(n,u.x,!1),y:l+ui(n,u.y,!1)};return po(d,{x:a,y:l},c)}function yS(t,{x:e,y:n},{angle:s,adjust:r},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(s),Jg(t,0,-r,i),t.restore())}function ZF(t,e,n,s){const{x:r,y:i,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:f}=S3(e),g={x:r,y:i},m={x:o,y:a},b=fS(g,n,m,0),w=fS(g,n,m,1)-Qe,p=Xg(g,n,m,d/s),y=Xg(g,n,m,1-f/s),x=new Path2D;t.beginPath(),x.moveTo(p.x,p.y),x.quadraticCurveTo(n.x,n.y,y.x,y.y),t.shadowColor=l.borderShadowColor,t.stroke(x),e.path=x,e.ctx=t,yS(t,p,{angle:b,adjust:d},c),yS(t,y,{angle:w,adjust:f},u)}class pu extends gn{inRange(e,n,s,r){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y")return ez({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),i,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],r),d=s==="y"?{start:l,end:u}:{start:a,end:c},f=po({x:e,y:n},this.getCenterPoint(r),Wt(-i));return f[s]>=d.start-o-Li&&f[s]<=d.end+o+Li}getCenterPoint(e){return go(this,e)}draw(e){const{width:n,height:s,centerX:r,centerY:i,options:o}=this;e.save(),Df(e,this.getCenterPoint(),o.rotation),Za(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=yr(e,o);e.ellipse(r,i,s/2,n/2,Qe/2,0,2*Qe),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return y3(e,n)}}pu.id="ellipseAnnotation";pu.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},el.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};pu.defaultRoutes={borderColor:"color",backgroundColor:"color"};pu.descriptors={label:{_fallback:!0}};function ez(t,e,n,s){const{width:r,height:i,centerX:o,centerY:a}=e,l=r/2,c=i/2;if(l<=0||c<=0)return!1;const u=Wt(n||0),d=Math.cos(u),f=Math.sin(u),g=Math.pow(d*(t.x-o)+f*(t.y-a),2),m=Math.pow(f*(t.x-o)-d*(t.y-a),2);return g/Math.pow(l+s,2)+m/Math.pow(c+s,2)<=1.0001}class jf extends gn{inRange(e,n,s,r){const{x:i,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return s!=="x"&&s!=="y"?Kj({x:e,y:n},this.getCenterPoint(r),c/2,u):t3(s==="y"?{start:o,end:l,value:n}:{start:i,end:a,value:e},u)}getCenterPoint(e){return go(this,e)}draw(e){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,Za(e,n);const r=yr(e,n);nF(e,this,this.centerX,this.centerY),r&&!Af(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=s}resolveElementProperties(e,n){const s=b3(e,n);return s.initProperties=Ja(e,s,n),s}}jf.id="pointAnnotation";jf.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};jf.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Ff extends gn{inRange(e,n,s,r){if(s!=="x"&&s!=="y")return this.options.radius>=.1&&this.elements.length>1&&nz(this.elements,e,n,r);const i=po({x:e,y:n},this.getCenterPoint(r),Wt(-this.options.rotation)),o=this.elements.map(c=>s==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return i[s]>=a&&i[s]<=l}getCenterPoint(e){return go(this,e)}draw(e){const{elements:n,options:s}=this;e.save(),e.beginPath(),e.fillStyle=s.backgroundColor,Za(e,s);const r=yr(e,s);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),r&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const s=b3(e,n),{sides:r,rotation:i}=n,o=[],a=2*Qe/r;let l=i*Ux;for(let c=0;c<r;c++,l+=a){const u=tz(s,n,l);u.initProperties=Ja(e,s,n),o.push(u)}return s.elements=o,s}}Ff.id="polygonAnnotation";Ff.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Ff.defaultRoutes={borderColor:"color",backgroundColor:"color"};function tz({centerX:t,centerY:e},{radius:n,borderWidth:s,hitTolerance:r},i){const o=(s+r)/2,a=Math.sin(i),l=Math.cos(i),c={x:t+a*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:t+a*(n+o),bY:e-l*(n+o)}}}function nz(t,e,n,s){let r=!1,i=t[t.length-1].getProps(["bX","bY"],s);for(const o of t){const a=o.getProps(["bX","bY"],s);a.bY>n!=i.bY>n&&e<(i.bX-a.bX)*(n-a.bY)/(i.bY-a.bY)+a.bX&&(r=!r),i=a}return r}const ii={box:el,doughnutLabel:Lf,ellipse:pu,label:hu,line:fu,point:jf,polygon:Ff};Object.keys(ii).forEach(t=>{kt.describe(`elements.${ii[t].id}`,{_fallback:"plugins.annotation.common"})});const sz={update:Object.assign},rz=rb.concat(Oh),vS=(t,e)=>Fe(e)?em(t,e):t,Zg=t=>t==="color"||t==="font";function ob(t="line"){return ii[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function iz(t,e,n,s){const r=az(t,n.animations,s),i=e.annotations,o=uz(e.elements,i);for(let a=0;a<i.length;a++){const l=i[a],c=k3(o,a,l.type),u=l.setContext(cz(t,c,o,l)),d=c.resolveElementProperties(t,u);d.skip=oz(d),"elements"in d&&(lz(c,d.elements,u,r),delete d.elements),Yn(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=C3(u),r.update(c,d)}}function oz(t){return isNaN(t.x)||isNaN(t.y)}function az(t,e,n){return n==="reset"||n==="none"||n==="resize"?sz:new Jx(t,e)}function lz(t,e,n,s){const r=t.elements||(t.elements=[]);r.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],a=o.properties,l=k3(r,i,o.type,o.initProperties),c=n[o.optionScope].override(o);a.options=C3(c),s.update(l,a)}}function k3(t,e,n,s){const r=ii[ob(n)];let i=t[e];return(!i||!(i instanceof r))&&(i=t[e]=new r,Object.assign(i,s)),i}function C3(t){const e=ii[ob(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,em(t,e.defaults),em(t,e.defaultRoutes));for(const s of rz)n[s]=t[s];return n}function em(t,e){const n={};for(const s of Object.keys(e)){const r=e[s],i=t[s];Zg(s)&&mt(i)?n[s]=i.map(o=>vS(o,r)):n[s]=vS(i,r)}return n}function cz(t,e,n,s){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:s.id,type:"annotation"}))}function uz(t,e){const n=e.length,s=t.length;if(s<n){const r=n-s;t.splice(s,0,...new Array(r))}else s>n&&t.splice(n,s-n);return t}var dz="3.1.0";const Ar=new Map,wS=t=>t.type!=="doughnutLabel",hz=rb.concat(Oh);var fz={id:"annotation",version:dz,beforeRegister(){qj("chart.js","4.0",Yi.version)},afterRegister(){Yi.register(ii)},afterUnregister(){Yi.unregister(ii)},beforeInit(t){Ar.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const s=Ar.get(t),r=s.annotations=[];let i=n.annotations;Fe(i)?Object.keys(i).forEach(o=>{const a=i[o];Fe(a)&&(a.id=o,r.push(a))}):mt(i)&&r.push(...i),IF(r.filter(wS),t.scales)},afterDataLimits(t,e){const n=Ar.get(t);TF(t,e.scale,n.annotations.filter(wS).filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(t,e,n){const s=Ar.get(t);kF(t,s,n),iz(t,s,n,e.mode),s.visibleElements=s.elements.filter(r=>!r.skip&&r.options.display),PF(t,s,n)},beforeDatasetsDraw(t,e,n){Tl(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){Tl(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){Tl(t,e.index,n.clip)},beforeDraw(t,e,n){Tl(t,"beforeDraw",n.clip)},afterDraw(t,e,n){Tl(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const s=Ar.get(t);CF(s,e.event,n)&&(e.changed=!0)},afterDestroy(t){Ar.delete(t)},getAnnotations(t){const e=Ar.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return eb(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!hz.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${ii[ob(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:Zg,_fallback:!0},_indexable:Zg}},additionalOptionScopes:[""]};function Tl(t,e,n){const{ctx:s,chartArea:r}=t,i=Ar.get(t);n&&Pf(s,r);const o=pz(i.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)gz(s,r,i,a);n&&Tf(s)}function pz(t,e){const n=[];for(const s of t)if(s.options.drawTime===e&&n.push({element:s,main:!0}),s.elements&&s.elements.length)for(const r of s.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function gz(t,e,n,s){const r=s.element;s.main?(aS(n,r,"beforeDraw"),r.draw(t,e),aS(n,r,"afterDraw")):r.draw(t,e)}Yi.register(Yg,Gg,Ld,$l,vj,Tj,bj,fz);const mz=({minPrice:t,maxPrice:e,orders:n,pendingOrders:s=[],onAddOrder:r,onRemoveOrder:i,currentPrice:o,markPrice:a})=>{const l=S.useRef(null),[c,u]=S.useState(null),d=S.useMemo(()=>{const m=[...n,...s];return m.length>0?Math.max(...m.map(b=>b.amount),.1):.1},[n,s]),f=S.useMemo(()=>{const m=n.map(w=>({x:w.amount,y:w.price,id:w.id,side:w.side,isPending:!1})),b=s.map(w=>({x:w.amount,y:w.price,id:w.id,side:w.side,isPending:!0}));return{datasets:[{label:"Long Orders",data:m.filter(w=>{const p=n.find(y=>y.id===w.id);return(p==null?void 0:p.side)==="long"||(p==null?void 0:p.side)==="buy"||!(p!=null&&p.side)}),backgroundColor:"rgba(77, 171, 247, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Short Orders",data:m.filter(w=>{const p=n.find(y=>y.id===w.id);return(p==null?void 0:p.side)==="short"||(p==null?void 0:p.side)==="sell"}),backgroundColor:"rgba(255, 152, 0, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Pending Long",data:b.filter(w=>{const p=s.find(y=>y.id===w.id);return(p==null?void 0:p.side)==="long"||(p==null?void 0:p.side)==="buy"}),backgroundColor:"rgba(40, 167, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10},{label:"Pending Short",data:b.filter(w=>{const p=s.find(y=>y.id===w.id);return(p==null?void 0:p.side)==="short"||(p==null?void 0:p.side)==="sell"}),backgroundColor:"rgba(220, 53, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10}]}},[n,s]),g=S.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,backgroundColor:"#1a1a1a",plugins:{legend:{display:!0,position:"top",labels:{color:"#fff",font:{size:12}}},tooltip:{enabled:!0,callbacks:{label:m=>{const b=m.raw,w=[...n,...s].find(p=>p.id===b.id);return w?[`Price: ${w.price.toFixed(2)} USDC`,`Amount: ${w.amount.toFixed(4)} BTC`,w.isPending?`Pending ${w.side==="long"||w.side==="buy"?"Long":"Short"}`:""].filter(Boolean):`Price: ${b.y.toFixed(2)}, Amount: ${b.x.toFixed(4)}`}}},annotation:{annotations:{...o!==null&&o>=t&&o<=e?{currentPriceLine:{type:"line",xMin:0,xMax:d,yMin:o,yMax:o,borderColor:"#00ff00",borderWidth:2,borderDash:[5,5],label:{display:!0,content:`Current: ${o.toLocaleString()}`,position:"end",backgroundColor:"rgba(0, 255, 0, 0.8)",color:"#000",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y"}}:{},...a!==null&&a>=t&&a<=e?{markPriceLine:{type:"line",xMin:0,xMax:d,yMin:a,yMax:a,borderColor:"#ff0000",borderWidth:2,label:{display:!0,content:`Mark Price: ${a.toLocaleString()}`,position:"start",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y",arrowHeads:{start:{enabled:!1,fill:!1,length:0,width:0},end:{enabled:!0,fill:!0,length:15,width:10,backgroundColor:"#ff0000",borderColor:"#ff0000",borderWidth:2}}}}:{}}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Amount (BTC)",color:"#fff",font:{size:14,weight:"bold"}},min:0,max:d,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(m){return Number(m).toFixed(4)}},grid:{color:"#333"}},y:{type:"linear",title:{display:!0,text:"Price (USDC)",color:"#fff",font:{size:14,weight:"bold"}},min:t,max:e,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(m){return Number(m).toLocaleString()}},grid:{color:"#333"}}},onClick:(m,b)=>{if(!l.current)return;const w=l.current,p=w.canvas;if(!p)return;const y=p.getBoundingClientRect(),x=m.native;if(!x)return;const v=x.clientX-y.left,k=x.clientY-y.top,C=w.scales.x,E=w.scales.y,T=C.getValueForPixel(v),P=E.getValueForPixel(k);if(T==null||P===null||P===void 0)return;const D=[...n,...s].find(A=>{const W=C.getPixelForValue(A.amount),H=E.getPixelForValue(A.price);return Math.sqrt(Math.pow(v-W,2)+Math.pow(k-H,2))<=12});if(D)i(D.id);else{const A=Math.max(t,Math.min(e,P)),W=Math.max(.001,Math.min(1,T));r(A,W)}},onHover:(m,b)=>{if(!l.current)return;const w=l.current,p=w.canvas;if(!p)return;const y=p.getBoundingClientRect(),x=m.native;if(!x)return;const v=x.clientX-y.left,k=x.clientY-y.top,C=[...n,...s],E=w.scales.x,T=w.scales.y,P=C.find(_=>{const D=E.getPixelForValue(_.amount),A=T.getPixelForValue(_.price);return Math.sqrt(Math.pow(v-D,2)+Math.pow(k-A,2))<=10});u((P==null?void 0:P.id)||null)}}),[t,e,d,n,s,r,i,o,a]);return h.jsx("div",{className:"price-amount-chart-container",style:{height:"600px",position:"relative"},children:h.jsx("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #333",padding:"10px",height:"100%"},children:h.jsx(Uj,{ref:l,data:f,options:g,style:{cursor:c?"pointer":"crosshair"}})})})},xz=({isOpen:t,onClose:e,minPrice:n,maxPrice:s,onMinPriceChange:r,onMaxPriceChange:i,markPrice:o,hasManualPriceChange:a,onResetToAuto:l,orderMode:c,onOrderModeChange:u,curveIntensity:d,onCurveIntensityChange:f,roundingStep:g,onRoundingStepChange:m})=>{const b=v=>Math.round(v/1.5/g)*g,w=v=>Math.round(v*1.5/g)*g;if(!t)return null;const p=o!=null&&o.mark_price?parseFloat(o.mark_price):null,y=p?b(p):null,x=p?w(p):null;return typeof document<"u"?ao.createPortal(h.jsx("div",{className:"modal-overlay",onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:h.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:0,minWidth:"400px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[h.jsx("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:h.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:600,color:"rgba(255, 255, 255, 0.9)"},children:"Price Range Configuration"})}),h.jsx("div",{className:"modal-body",style:{padding:"2rem 1.5rem"},children:h.jsxs("div",{className:"trading-test-price-range-controls",children:[h.jsxs("div",{children:[h.jsxs("label",{children:["Rounding Step ($):",h.jsx("input",{type:"number",value:g,onChange:v=>m(Math.max(1,parseFloat(v.target.value)||100)),min:1,step:10,className:"trading-test-input"})]}),h.jsxs("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:["Prices will be rounded to the nearest $",g]})]}),h.jsxs("div",{children:[h.jsxs("label",{children:["Min Price (USDC):",h.jsx("input",{type:"number",value:n,onChange:v=>{r(parseFloat(v.target.value)||1e4)},min:1e3,max:s-1e3,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price / 1.5, rounded to $${g})`:""})]}),(o==null?void 0:o.mark_price)&&y!==null&&h.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?h.jsxs(h.Fragment,{children:["Manual override (Auto:"," ",p.toLocaleString()," / 1.5 ="," ",y.toLocaleString(),")"]}):h.jsxs(h.Fragment,{children:["Auto: ",p.toLocaleString()," / 1.5 ="," ",n.toLocaleString()]})})]}),h.jsxs("div",{children:[h.jsxs("label",{children:["Max Price (USDC):",h.jsx("input",{type:"number",value:s,onChange:v=>{i(parseFloat(v.target.value)||1e5)},min:n+1e3,max:1e6,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price  1.5, rounded to $${g})`:""})]}),(o==null?void 0:o.mark_price)&&x!==null&&h.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?h.jsxs(h.Fragment,{children:["Manual override (Auto:"," ",p.toLocaleString(),"  1.5 ="," ",x.toLocaleString(),")"]}):h.jsxs(h.Fragment,{children:["Auto: ",p.toLocaleString(),"  1.5 ="," ",s.toLocaleString()]})})]}),h.jsx("div",{children:h.jsxs("label",{children:["Order Mode:",h.jsxs("select",{value:c,onChange:v=>u(v.target.value),className:"trading-test-select",children:[h.jsx("option",{value:"random",children:"Random"}),h.jsx("option",{value:"curve",children:"Curve (Buy more at lower prices)"})]})]})}),c==="curve"&&h.jsx("div",{children:h.jsxs("label",{children:["Curve Intensity: ",d,h.jsx("input",{type:"range",value:d,onChange:v=>f(parseFloat(v.target.value)),min:1,max:5,step:.5,className:"trading-test-range"}),h.jsx("small",{children:"Higher = more aggressive buying at lower prices"})]})})]})}),h.jsxs("div",{className:"modal-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[a&&(o==null?void 0:o.mark_price)&&h.jsx("button",{onClick:l,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(77, 171, 247, 0.2)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Reset to Auto"}),h.jsx("div",{style:{display:"flex",gap:"1rem",marginLeft:"auto"},children:h.jsx("button",{onClick:e,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Close"})})]})]})}),document.body):null},bz=({onClick:t,disabled:e,orderMode:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-primary",style:{backgroundColor:e?"#ccc":"#007bff",cursor:e?"not-allowed":"pointer"},children:["Submit Test Orders (",n==="random"?"Random":"Curve-Based",")"]}),yz=({onClick:t,disabled:e,orderCount:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-success",style:{backgroundColor:e?"#ccc":"#28a745",cursor:e?"not-allowed":"pointer"},children:["Submit Chart Orders (",n," orders)"]}),vz=({onClick:t,disabled:e})=>h.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-secondary",style:{cursor:e?"not-allowed":"pointer"},children:"Reset Chart"}),wz=({onClick:t,disabled:e,pendingCount:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-info",style:{backgroundColor:e?"#ccc":"#17a2b8",cursor:e?"not-allowed":"pointer"},children:["Load Pending Orders ",n>0&&`(${n})`]}),yp=({onClick:t,disabled:e,filter:n})=>{const s=n==="long"?"Cancel All Long":n==="short"?"Cancel All Short":"Cancel All Orders";return h.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-danger",style:{backgroundColor:e?"#ccc":"#dc3545",cursor:e?"not-allowed":"pointer"},children:s})};function Sz(){var we,ve,B,le;const[t,e]=S.useState(su),[n,s]=S.useState(""),[r,i]=S.useState(""),[o,a]=S.useState(""),[l,c]=S.useState(1e4),[u,d]=S.useState(1e5),[f,g]=S.useState(null),[m,b]=S.useState("random"),[w,p]=S.useState(2),[y,x]=S.useState("long"),[v,k]=S.useState([]),[C,E]=S.useState([]),[T,P]=S.useState([]),[_,D]=S.useState(!1),[A,W]=S.useState(!1),[H,O]=S.useState(100),R=S.useRef(null),F=S.useRef(null),L=S.useRef(t),{markets:z,getSymbolByMarketId:I}=qa({baseURL:t,sessionToken:"",autoFetchMarkets:!0}),{mnemonic:K,walletAddress:j,authToken:M,setMnemonic:$}=nu(),q=n?I(n):null,X=q!==null?q:void 0,{markPrice:G}=mx({baseURL:t,wsURL:cf,marketId:n||"",symbol:X}),[ee,se]=S.useState(!1);S.useEffect(()=>{if(G!=null&&G.mark_price&&!ee){const V=parseFloat(G.mark_price),ce=Math.round(V*1.5/H)*H,re=Math.round(V/1.5/H)*H;c(re),d(ce)}},[G==null?void 0:G.mark_price,ee,H]),S.useEffect(()=>{K&&i(K),M&&a(M)},[K,M]);const be=z.length>0?(((we=z.find(V=>V.active))==null?void 0:we.market_id)??z[0].market_id)||(((B=(ve=z.find(V=>V.active))==null?void 0:ve.id)==null?void 0:B.toString())??((le=z[0].id)==null?void 0:le.toString())??""):null;S.useEffect(()=>{be&&!n&&s(be)},[be]),S.useEffect(()=>{L.current=t},[t]),S.useEffect(()=>{r&&r.trim()!==""&&(R.current=new eu({baseURL:L.current,mnemonic:r}),R.current.initialize().catch(V=>{console.error("Failed to initialize ExchangeClient:",V)}))},[r,t]),S.useEffect(()=>{F.current=new hn({baseURL:L.current})},[t]),S.useEffect(()=>{if(!n||!F.current)return;const V=async()=>{try{const re=await F.current.getTicker(n);if(re!=null&&re.lastPrice){const Y=typeof re.lastPrice=="string"?parseFloat(re.lastPrice):re.lastPrice;g(Y)}}catch(re){console.error("Failed to fetch current price:",re)}};V();const ce=setInterval(V,5e3);return()=>clearInterval(ce)},[n]);const He=S.useCallback(V=>{const ce=[];for(let re=0;re<V;re++){const Y=l+Math.random()*(u-l),he=.001+Math.random()*.01;ce.push({price:Y,amount:he})}return ce.sort((re,Y)=>re.price-Y.price)},[l,u]),Pe=S.useCallback(V=>{const ce=[],re=u-l;for(let Y=0;Y<V;Y++){const he=Math.random(),Te=Math.pow(he,w),ye=l+Te*re,Ue=.001+(u-ye)/re*.02;ce.push({price:ye,amount:Ue})}return ce.sort((Y,he)=>Y.price-he.price)},[l,u,w]),_e=S.useCallback(async()=>{if(!R.current||!n||!j){Ie.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}D(!0);const V=[];try{const re=m==="random"?He(10):Pe(10);Ie.info("Submitting test orders",{description:`Submitting ${re.length} ${m} orders...`});for(const he of re){try{const ye=xt("1"),Ce=await R.current.placeOrder({marketId:n,side:y==="long"?"buy":"sell",orderType:"LIMIT",price:he.price,quantity:he.amount,timeInForce:"GTC",leverage:ye});V.push({success:!0,order:{price:he.price,amount:he.amount,orderId:(Ce==null?void 0:Ce.orderId)||(Ce==null?void 0:Ce.id)},timestamp:Date.now()})}catch(Te){V.push({success:!1,order:{price:he.price,amount:he.amount},error:Te.message,timestamp:Date.now()})}await new Promise(Te=>setTimeout(Te,200))}P(he=>[...he,...V]);const Y=V.filter(he=>he.success).length;Ie.success("Test orders submitted",{description:`${Y}/${V.length} orders placed successfully.`})}catch(ce){Ie.error("Test submission failed",{description:ce.message||"Unknown error occurred"})}finally{D(!1)}},[n,j,m,He,Pe]),Le=S.useCallback(async()=>{if(!R.current||!n||!j){Ie.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}if(v.length===0){Ie.warning("No chart orders",{description:"Please add orders to the chart first."});return}D(!0);const V=[];try{Ie.info("Submitting chart orders",{description:`Submitting ${v.length} chart orders...`});for(const re of v){try{const he=xt("1"),Te=await R.current.placeOrder({marketId:n,side:re.side==="short"||re.side==="sell"?"sell":"buy",orderType:"LIMIT",price:re.price,quantity:re.amount,timeInForce:"GTC",leverage:he});V.push({success:!0,order:{price:re.price,amount:re.amount,orderId:(Te==null?void 0:Te.orderId)||(Te==null?void 0:Te.id)},timestamp:Date.now()})}catch(Y){V.push({success:!1,order:{price:re.price,amount:re.amount},error:Y.message,timestamp:Date.now()})}await new Promise(Y=>setTimeout(Y,200))}P(re=>[...re,...V]);const ce=V.filter(re=>re.success).length;Ie.success("Chart orders submitted",{description:`${ce}/${V.length} orders placed successfully.`})}catch(ce){Ie.error("Chart order submission failed",{description:ce.message||"Unknown error occurred"})}finally{D(!1)}},[n,j,v]),wt=S.useCallback(()=>{k([]),Ie.info("Chart reset",{description:"All chart orders have been cleared."})},[]),N=S.useCallback((V,ce)=>{const re={price:V,amount:ce,id:`chart-${Date.now()}-${Math.random()}`,side:y};k(Y=>[...Y,re])},[y]),J=S.useCallback(V=>{k(ce=>ce.filter(re=>re.id!==V)),E(ce=>ce.filter(re=>re.id!==V))},[]),oe=S.useCallback(async()=>{if(!F.current||!j||!n){Ie.error("Setup required",{description:"Please ensure wallet address and market ID are configured."});return}try{Ie.info("Loading pending orders...");const V=await F.current.getOrders(j),ce=(V==null?void 0:V.orders)||[];console.log(V);const re=ce.filter(Y=>{const he=Y.marketId||Y.market_id||Y.assetPair,Te=(Y.status||"").toUpperCase();return he===n&&["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(Te)}).map(Y=>{const he=Y.side||(Y.direction==="LONG"?"long":Y.direction==="SHORT"?"short":"buy");return{price:Y.price,amount:Y.quantity,id:`pending-${Y.id||Y.orderId||Y.order_id}`,side:he==="buy"?"long":he==="sell"?"short":he,orderId:Y.id||Y.orderId||Y.order_id,isPending:!0}});E(re),Ie.success("Pending orders loaded",{description:`Loaded ${re.length} pending orders.`})}catch(V){Ie.error("Failed to load pending orders",{description:V.message||"Unknown error occurred"})}},[j,n]),de=S.useCallback(async V=>{if(!R.current||!n||!j){Ie.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}try{const ce=await F.current.getOrders(j),Y=((ce==null?void 0:ce.orders)||[]).filter(ye=>{const Ce=ye.marketId||ye.market_id||ye.assetPair,Ue=(ye.status||"").toUpperCase();if(Ce!==n||!["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(Ue))return!1;if(V==="all")return!0;const lt=ye.side||(ye.direction==="LONG"?"long":ye.direction==="SHORT"?"short":"buy");return V==="long"?lt==="buy"||lt==="long":V==="short"?lt==="sell"||lt==="short":!1});if(Y.length===0){Ie.info("No orders to cancel",{description:`No ${V} pending orders found.`});return}D(!0),Ie.info("Canceling orders",{description:`Canceling ${Y.length} ${V} orders...`});let he=0,Te=0;for(const ye of Y){try{const Ce=ye.id||ye.orderId||ye.order_id;await R.current.cancelOrder({orderId:Ce,marketId:n}),he++}catch(Ce){Te++,console.error("Failed to cancel order:",Ce)}await new Promise(Ce=>setTimeout(Ce,100))}await oe(),Ie.success("Orders canceled",{description:`${he} orders canceled successfully${Te>0?`, ${Te} failed`:""}.`})}catch(ce){Ie.error("Failed to cancel orders",{description:ce.message||"Unknown error occurred"})}finally{D(!1)}},[n,j,oe]);return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"Trading Test Page"}),h.jsx("p",{children:"Advanced trading test with price range, interactive chart, and multiple submission modes"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"trading-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:V=>e(V.target.value),className:"trading-test-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:V=>s(V.target.value),className:"trading-test-select",children:z.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),z.map(V=>{var Y;const ce=V.market_id??((Y=V.id)==null?void 0:Y.toString())??"",re=V.moniker?V.moniker:V.symbol?V.symbol:`Market ID: ${ce}`;return h.jsx("option",{value:ce,children:re},ce)})]})})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic:",h.jsx("input",{type:"text",value:r,onChange:V=>{i(V.target.value),$(V.target.value)},placeholder:"Enter mnemonic",className:"trading-test-input"})]})}),f&&h.jsxs("div",{className:"trading-test-price-display",children:[h.jsx("strong",{children:"Current Price:"})," ",f.toLocaleString()," ","USDC"]})]})]}),h.jsxs("div",{className:"trading-test-tabs",children:[h.jsx("button",{className:`trading-test-tab ${y==="long"?"active":""}`,onClick:()=>x("long"),children:"Long (Buy)"}),h.jsx("button",{className:`trading-test-tab ${y==="short"?"active":""}`,onClick:()=>x("short"),children:"Short (Sell)"})]}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Interactive Price-Amount Chart"}),h.jsx("div",{className:"trading-test-chart-controls",children:h.jsxs("div",{className:"trading-test-chart-info",children:[h.jsxs("span",{children:["Orders on chart: ",v.length]}),h.jsxs("span",{onClick:()=>W(!0),style:{cursor:"pointer",textDecoration:"underline"},title:"Click to configure price range",children:["Price range: ",l.toLocaleString()," -"," ",u.toLocaleString()," USDC"]})]})}),h.jsx(mz,{minPrice:l,maxPrice:u,orders:v,pendingOrders:C,onAddOrder:N,onRemoveOrder:J,currentPrice:f,markPrice:G!=null&&G.mark_price?parseFloat(G.mark_price):null}),h.jsxs("div",{className:"price-amount-chart-instructions",children:[h.jsx("p",{children:"Click on the chart to add orders. Click on existing orders to remove them."}),h.jsx("p",{children:"Y-axis: Price (USDC) | X-axis: Amount (BTC)"})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Order Submission"}),h.jsxs("div",{className:"trading-test-submission-buttons",children:[h.jsx(vz,{onClick:wt,disabled:v.length===0}),h.jsx(bz,{onClick:_e,disabled:_||!n||!j,orderMode:m}),h.jsx(yz,{onClick:Le,disabled:_||v.length===0||!n||!j,orderCount:v.length})]}),h.jsx("h2",{children:"Pending Orders Management"}),h.jsxs("div",{className:"trading-test-pending-orders-controls",children:[h.jsx(wz,{onClick:oe,disabled:!n||!j,pendingCount:C.length}),h.jsxs("div",{className:"trading-test-cancel-buttons",children:[h.jsx(yp,{onClick:()=>de("long"),disabled:_||!n||!j,filter:"long"}),h.jsx(yp,{onClick:()=>de("short"),disabled:_||!n||!j,filter:"short"}),h.jsx(yp,{onClick:()=>de("all"),disabled:_||!n||!j,filter:"all"})]})]})]}),T.length>0&&h.jsxs("div",{className:"trading-test-results",children:[h.jsx("h2",{children:"Test Results"}),h.jsxs("div",{className:"trading-test-results-summary",children:[h.jsxs("div",{children:["Total: ",T.length," | Success:"," ",T.filter(V=>V.success).length," | Failed:"," ",T.filter(V=>!V.success).length]}),h.jsx("button",{onClick:()=>P([]),className:"trading-test-button-secondary",children:"Clear Results"})]}),h.jsx("div",{className:"trading-test-results-list",children:T.slice(-20).map((V,ce)=>h.jsx("div",{className:`trading-test-result-item ${V.success?"success":"error"}`,children:h.jsxs("div",{children:[h.jsxs("strong",{children:[V.success?"":""," Order @"," ",V.order.price.toFixed(2)," USDC"]}),h.jsxs("span",{children:["Amount: ",V.order.amount.toFixed(4)," BTC"]}),V.order.orderId&&h.jsxs("span",{children:["Order ID: ",V.order.orderId.substring(0,16),"..."]}),V.error&&h.jsx("span",{className:"error-text",children:V.error})]})},ce))})]}),h.jsx(xz,{isOpen:A,onClose:()=>W(!1),minPrice:l,maxPrice:u,onMinPriceChange:V=>{c(V),se(!0)},onMaxPriceChange:V=>{d(V),se(!0)},markPrice:G,hasManualPriceChange:ee,onResetToAuto:()=>{if(G!=null&&G.mark_price){se(!1);const V=parseFloat(G.mark_price),ce=Math.round(V*1.5/H)*H,re=Math.round(V/1.5/H)*H;c(re),d(ce)}},orderMode:m,onOrderModeChange:b,curveIntensity:w,onCurveIntensityChange:p,roundingStep:H,onRoundingStepChange:O})]})}const kz=S.createContext(void 0),Il="onboard_mnemonic",Ml="onboard_wallet_address",Cz=({children:t})=>{const[e,n]=S.useState(null),[s,r]=S.useState(null);S.useEffect(()=>{const l=localStorage.getItem(Ml),c=localStorage.getItem(Il),u=localStorage.getItem("generatedAddress"),d=localStorage.getItem("mnemonic");l&&c?(n(l),r(c)):u&&d&&(n(u),r(d),localStorage.setItem(Ml,u),localStorage.setItem(Il,d),localStorage.removeItem("generatedAddress"),localStorage.removeItem("mnemonic"))},[]),S.useEffect(()=>{const l=c=>{c.key===Ml?n(c.newValue):c.key===Il&&r(c.newValue)};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const i=S.useCallback((l,c)=>{n(l),r(c),localStorage.setItem(Ml,l),localStorage.setItem(Il,c)},[]),o=S.useCallback(()=>{n(null),r(null),localStorage.removeItem(Ml),localStorage.removeItem(Il)},[]),a=S.useMemo(()=>({generatedAddress:e,mnemonic:s,setGeneratedData:i,clearGeneratedData:o}),[e,s,i,o]);return h.jsx(kz.Provider,{value:a,children:t})},_z=({...t})=>h.jsx(fM,{className:"toaster",expand:!0,richColors:!1,closeButton:!1,toastOptions:{duration:4e3,classNames:{toast:"toast",title:"toast-title",description:"toast-description",actionButton:"toast-action-button",cancelButton:"toast-cancel-button",closeButton:"toast-close-button"}},...t});function Ez(){const{wasmStatus:t,isReady:e}=$8(),[n,s]=S.useState("main");return S.useEffect(()=>{const r=()=>{s("websocket-test")};return window.addEventListener("navigateToWebSocketTest",r),()=>{window.removeEventListener("navigateToWebSocketTest",r)}},[]),h.jsxs(Cz,{children:[h.jsxs("div",{className:"App",children:[h.jsxs("header",{className:"App-header",children:[h.jsx("h1",{children:"Morm SDK"}),h.jsx("p",{children:"Test WebAssembly integration for morm_signer with Agent Delegation"}),h.jsxs("nav",{style:{marginTop:"1rem",display:"flex",gap:"1rem"},children:[h.jsx("button",{onClick:()=>s("main"),style:{padding:"0.5rem 1rem",backgroundColor:n==="main"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Morm Signer"}),h.jsx("button",{onClick:()=>s("sdk-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="sdk-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"SDK Trade API"}),h.jsx("button",{onClick:()=>s("websocket-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="websocket-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"WebSocket Test"}),h.jsx("button",{onClick:()=>s("layout-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="layout-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Layout Test"}),h.jsx("button",{onClick:()=>s("hooks-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="hooks-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Hooks Test"}),h.jsx("button",{onClick:()=>s("trading-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="trading-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Trading Test"})]})]}),h.jsx("main",{className:"App-main",children:n==="sdk-test"?h.jsx(TM,{}):n==="websocket-test"?h.jsx(H7,{}):n==="layout-test"?h.jsx(FD,{}):n==="hooks-test"?h.jsx(zD,{}):n==="trading-test"?h.jsx(Sz,{}):h.jsxs(h.Fragment,{children:[h.jsx(bM,{status:t}),e&&h.jsxs("div",{className:"App-content",children:[h.jsx("div",{className:"App-section",children:h.jsx(pM,{})}),h.jsx("div",{className:"App-section",children:h.jsx(gM,{})}),h.jsx("div",{className:"App-section",children:h.jsx(mM,{})}),h.jsx("div",{className:"App-section",children:h.jsx(xM,{})})]}),t.error&&h.jsxs("div",{className:"App-error",children:[h.jsx("h3",{children:"Error Loading WASM"}),h.jsx("p",{children:t.error}),h.jsx("p",{children:"Make sure the morm_signer.wasm file is available in the public directory."})]})]})})]}),h.jsx(_z,{position:"bottom-right",toastOptions:{duration:4e3,style:{color:"var(--foreground)",border:"1px solid var(--border)"}}})]})}const Pz=vp.createRoot(document.getElementById("root"));Pz.render(h.jsx(ie.StrictMode,{children:h.jsx(Ez,{})}));
//# sourceMappingURL=index-C5HxOFdq.js.map
