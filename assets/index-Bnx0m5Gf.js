var h4=Object.defineProperty;var zy=t=>{throw TypeError(t)};var f4=(t,e,n)=>e in t?h4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var re=(t,e,n)=>f4(t,typeof e!="symbol"?e+"":e,n),U0=(t,e,n)=>e.has(t)||zy("Cannot "+n);var Ee=(t,e,n)=>(U0(t,e,"read from private field"),n?n.call(t):e.get(t)),We=(t,e,n)=>e.has(t)?zy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),be=(t,e,n,s)=>(U0(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),on=(t,e,n)=>(U0(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function C2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function p4(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var E2={exports:{}},Df={},P2={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Su=Symbol.for("react.element"),g4=Symbol.for("react.portal"),m4=Symbol.for("react.fragment"),x4=Symbol.for("react.strict_mode"),b4=Symbol.for("react.profiler"),y4=Symbol.for("react.provider"),v4=Symbol.for("react.context"),w4=Symbol.for("react.forward_ref"),k4=Symbol.for("react.suspense"),S4=Symbol.for("react.memo"),_4=Symbol.for("react.lazy"),By=Symbol.iterator;function C4(t){return t===null||typeof t!="object"?null:(t=By&&t[By]||t["@@iterator"],typeof t=="function"?t:null)}var T2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M2=Object.assign,I2={};function hl(t,e,n){this.props=t,this.context=e,this.refs=I2,this.updater=n||T2}hl.prototype.isReactComponent={};hl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function N2(){}N2.prototype=hl.prototype;function bx(t,e,n){this.props=t,this.context=e,this.refs=I2,this.updater=n||T2}var yx=bx.prototype=new N2;yx.constructor=bx;M2(yx,hl.prototype);yx.isPureReactComponent=!0;var $y=Array.isArray,A2=Object.prototype.hasOwnProperty,vx={current:null},R2={key:!0,ref:!0,__self:!0,__source:!0};function O2(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)A2.call(e,s)&&!R2.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Su,type:t,key:i,ref:o,props:r,_owner:vx.current}}function E4(t,e){return{$$typeof:Su,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Su}function P4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Uy=/\/+/g;function W0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P4(""+t.key):e.toString(36)}function Xd(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Su:case g4:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+W0(o,0):s,$y(r)?(n="",t!=null&&(n=t.replace(Uy,"$&/")+"/"),Xd(r,e,n,"",function(c){return c})):r!=null&&(wx(r)&&(r=E4(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Uy,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",$y(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+W0(i,a);o+=Xd(i,e,n,l,r)}else if(l=C4(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+W0(i,a++),o+=Xd(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ku(t,e,n){if(t==null)return t;var s=[],r=0;return Xd(t,s,"","",function(i){return e.call(n,i,r++)}),s}function T4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _n={current:null},Qd={transition:null},M4={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:Qd,ReactCurrentOwner:vx};function D2(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Ku,forEach:function(t,e,n){Ku(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ku(t,function(){e++}),e},toArray:function(t){return Ku(t,function(e){return e})||[]},only:function(t){if(!wx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=hl;He.Fragment=m4;He.Profiler=b4;He.PureComponent=bx;He.StrictMode=x4;He.Suspense=k4;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M4;He.act=D2;He.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=M2({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=vx.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)A2.call(e,l)&&!R2.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:Su,type:t.type,key:r,ref:i,props:s,_owner:o}};He.createContext=function(t){return t={$$typeof:v4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:y4,_context:t},t.Consumer=t};He.createElement=O2;He.createFactory=function(t){var e=O2.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:w4,render:t}};He.isValidElement=wx;He.lazy=function(t){return{$$typeof:_4,_payload:{_status:-1,_result:t},_init:T4}};He.memo=function(t,e){return{$$typeof:S4,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=Qd.transition;Qd.transition={};try{t()}finally{Qd.transition=e}};He.unstable_act=D2;He.useCallback=function(t,e){return _n.current.useCallback(t,e)};He.useContext=function(t){return _n.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return _n.current.useDeferredValue(t)};He.useEffect=function(t,e){return _n.current.useEffect(t,e)};He.useId=function(){return _n.current.useId()};He.useImperativeHandle=function(t,e,n){return _n.current.useImperativeHandle(t,e,n)};He.useInsertionEffect=function(t,e){return _n.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return _n.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return _n.current.useMemo(t,e)};He.useReducer=function(t,e,n){return _n.current.useReducer(t,e,n)};He.useRef=function(t){return _n.current.useRef(t)};He.useState=function(t){return _n.current.useState(t)};He.useSyncExternalStore=function(t,e,n){return _n.current.useSyncExternalStore(t,e,n)};He.useTransition=function(){return _n.current.useTransition()};He.version="18.3.1";P2.exports=He;var k=P2.exports;const oe=C2(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I4=k,N4=Symbol.for("react.element"),A4=Symbol.for("react.fragment"),R4=Object.prototype.hasOwnProperty,O4=I4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D4={key:!0,ref:!0,__self:!0,__source:!0};function L2(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)R4.call(e,s)&&!D4.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:N4,type:t,key:i,ref:o,props:r,_owner:O4.current}}Df.Fragment=A4;Df.jsx=L2;Df.jsxs=L2;E2.exports=Df;var h=E2.exports,Eg={},j2={exports:{}},Qn={},F2={exports:{}},z2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,$){var T=A.length;A.push($);e:for(;0<T;){var G=T-1>>>1,D=A[G];if(0<r(D,$))A[G]=$,A[T]=D,T=G;else break e}}function n(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var $=A[0],T=A.pop();if(T!==$){A[0]=T;e:for(var G=0,D=A.length,R=D>>>1;G<R;){var X=2*(G+1)-1,K=A[X],Y=X+1,V=A[Y];if(0>r(K,T))Y<D&&0>r(V,K)?(A[G]=V,A[Y]=T,G=Y):(A[G]=K,A[X]=T,G=X);else if(Y<D&&0>r(V,T))A[G]=V,A[Y]=T,G=Y;else break e}}return $}function r(A,$){var T=A.sortIndex-$.sortIndex;return T!==0?T:A.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(A){for(var $=n(c);$!==null;){if($.callback===null)s(c);else if($.startTime<=A)s(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function b(A){if(x=!1,v(A),!g)if(n(l)!==null)g=!0,z(S);else{var $=n(c);$!==null&&F(b,$.startTime-A)}}function S(A,$){g=!1,x&&(x=!1,m(P),P=-1),p=!0;var T=f;try{for(v($),d=n(l);d!==null&&(!(d.expirationTime>$)||A&&!N());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var D=G(d.expirationTime<=$);$=t.unstable_now(),typeof D=="function"?d.callback=D:d===n(l)&&s(l),v($)}else s(l);d=n(l)}if(d!==null)var R=!0;else{var X=n(c);X!==null&&F(b,X.startTime-$),R=!1}return R}finally{d=null,f=T,p=!1}}var _=!1,E=null,P=-1,M=5,C=-1;function N(){return!(t.unstable_now()-C<M)}function I(){if(E!==null){var A=t.unstable_now();C=A;var $=!0;try{$=E(!0,A)}finally{$?B():(_=!1,E=null)}}else _=!1}var B;if(typeof y=="function")B=function(){y(I)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,j=W.port2;W.port1.onmessage=I,B=function(){j.postMessage(null)}}else B=function(){w(I,0)};function z(A){E=A,_||(_=!0,B())}function F(A,$){P=w(function(){A(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,z(S))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var T=f;f=$;try{return A()}finally{f=T}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,$){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var T=f;f=A;try{return $()}finally{f=T}},t.unstable_scheduleCallback=function(A,$,T){var G=t.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?G+T:G):T=G,A){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=T+D,A={id:u++,callback:$,priorityLevel:A,startTime:T,expirationTime:D,sortIndex:-1},T>G?(A.sortIndex=T,e(c,A),n(l)===null&&A===n(c)&&(x?(m(P),P=-1):x=!0,F(b,T-G))):(A.sortIndex=D,e(l,A),g||p||(g=!0,z(S))),A},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(A){var $=f;return function(){var T=f;f=$;try{return A.apply(this,arguments)}finally{f=T}}}})(z2);F2.exports=z2;var L4=F2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j4=k,Kn=L4;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var B2=new Set,zc={};function So(t,e){za(t,e),za(t+"Capture",e)}function za(t,e){for(zc[t]=e,t=0;t<e.length;t++)B2.add(e[t])}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pg=Object.prototype.hasOwnProperty,F4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wy={},Hy={};function z4(t){return Pg.call(Hy,t)?!0:Pg.call(Wy,t)?!1:F4.test(t)?Hy[t]=!0:(Wy[t]=!0,!1)}function B4(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $4(t,e,n,s){if(e===null||typeof e>"u"||B4(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Cn(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new Cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new Cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new Cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new Cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new Cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new Cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new Cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new Cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new Cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var kx=/[\-:]([a-z])/g;function Sx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kx,Sx);nn[e]=new Cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kx,Sx);nn[e]=new Cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kx,Sx);nn[e]=new Cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new Cn(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new Cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new Cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function _x(t,e,n,s){var r=nn.hasOwnProperty(e)?nn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($4(e,n,r,s)&&(n=null),s||r===null?z4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Ar=j4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xu=Symbol.for("react.element"),$o=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),Tg=Symbol.for("react.profiler"),$2=Symbol.for("react.provider"),U2=Symbol.for("react.context"),Ex=Symbol.for("react.forward_ref"),Mg=Symbol.for("react.suspense"),Ig=Symbol.for("react.suspense_list"),Px=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),W2=Symbol.for("react.offscreen"),Vy=Symbol.iterator;function Pl(t){return t===null||typeof t!="object"?null:(t=Vy&&t[Vy]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,H0;function sc(t){if(H0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);H0=e&&e[1]||""}return`
`+H0+t}var V0=!1;function Y0(t,e){if(!t||V0)return"";V0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{V0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sc(t):""}function U4(t){switch(t.tag){case 5:return sc(t.type);case 16:return sc("Lazy");case 13:return sc("Suspense");case 19:return sc("SuspenseList");case 0:case 2:case 15:return t=Y0(t.type,!1),t;case 11:return t=Y0(t.type.render,!1),t;case 1:return t=Y0(t.type,!0),t;default:return""}}function Ng(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uo:return"Fragment";case $o:return"Portal";case Tg:return"Profiler";case Cx:return"StrictMode";case Mg:return"Suspense";case Ig:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case U2:return(t.displayName||"Context")+".Consumer";case $2:return(t._context.displayName||"Context")+".Provider";case Ex:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Px:return e=t.displayName||null,e!==null?e:Ng(t.type)||"Memo";case Gr:e=t._payload,t=t._init;try{return Ng(t(e))}catch{}}return null}function W4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ng(e);case 8:return e===Cx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function H2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function H4(t){var e=H2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qu(t){t._valueTracker||(t._valueTracker=H4(t))}function V2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=H2(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Th(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ag(t,e){var n=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yy(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=bi(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Y2(t,e){e=e.checked,e!=null&&_x(t,"checked",e,!1)}function Rg(t,e){Y2(t,e);var n=bi(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Og(t,e.type,n):e.hasOwnProperty("defaultValue")&&Og(t,e.type,bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Og(t,e,n){(e!=="number"||Th(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rc=Array.isArray;function ia(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+bi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Dg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(rc(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bi(n)}}function G2(t,e){var n=bi(e.value),s=bi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Ky(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ju,K2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ju=Ju||document.createElement("div"),Ju.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ju.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V4=["Webkit","ms","Moz","O"];Object.keys(vc).forEach(function(t){V4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vc[e]=vc[t]})});function X2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vc.hasOwnProperty(t)&&vc[t]?(""+e).trim():e+"px"}function Q2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=X2(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var Y4=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jg(t,e){if(e){if(Y4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function Fg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zg=null;function Tx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bg=null,oa=null,aa=null;function Xy(t){if(t=Eu(t)){if(typeof Bg!="function")throw Error(le(280));var e=t.stateNode;e&&(e=Bf(e),Bg(t.stateNode,t.type,e))}}function J2(t){oa?aa?aa.push(t):aa=[t]:oa=t}function Z2(){if(oa){var t=oa,e=aa;if(aa=oa=null,Xy(t),e)for(t=0;t<e.length;t++)Xy(e[t])}}function e_(t,e){return t(e)}function t_(){}var G0=!1;function n_(t,e,n){if(G0)return t(e,n);G0=!0;try{return e_(t,e,n)}finally{G0=!1,(oa!==null||aa!==null)&&(t_(),Z2())}}function $c(t,e){var n=t.stateNode;if(n===null)return null;var s=Bf(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var $g=!1;if(Er)try{var Tl={};Object.defineProperty(Tl,"passive",{get:function(){$g=!0}}),window.addEventListener("test",Tl,Tl),window.removeEventListener("test",Tl,Tl)}catch{$g=!1}function G4(t,e,n,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var wc=!1,Mh=null,Ih=!1,Ug=null,q4={onError:function(t){wc=!0,Mh=t}};function K4(t,e,n,s,r,i,o,a,l){wc=!1,Mh=null,G4.apply(q4,arguments)}function X4(t,e,n,s,r,i,o,a,l){if(K4.apply(this,arguments),wc){if(wc){var c=Mh;wc=!1,Mh=null}else throw Error(le(198));Ih||(Ih=!0,Ug=c)}}function _o(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function s_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qy(t){if(_o(t)!==t)throw Error(le(188))}function Q4(t){var e=t.alternate;if(!e){if(e=_o(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Qy(r),t;if(i===s)return Qy(r),e;i=i.sibling}throw Error(le(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==s)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function r_(t){return t=Q4(t),t!==null?i_(t):null}function i_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=i_(t);if(e!==null)return e;t=t.sibling}return null}var o_=Kn.unstable_scheduleCallback,Jy=Kn.unstable_cancelCallback,J4=Kn.unstable_shouldYield,Z4=Kn.unstable_requestPaint,Mt=Kn.unstable_now,eT=Kn.unstable_getCurrentPriorityLevel,Mx=Kn.unstable_ImmediatePriority,a_=Kn.unstable_UserBlockingPriority,Nh=Kn.unstable_NormalPriority,tT=Kn.unstable_LowPriority,l_=Kn.unstable_IdlePriority,Lf=null,Qs=null;function nT(t){if(Qs&&typeof Qs.onCommitFiberRoot=="function")try{Qs.onCommitFiberRoot(Lf,t,void 0,(t.current.flags&128)===128)}catch{}}var Is=Math.clz32?Math.clz32:iT,sT=Math.log,rT=Math.LN2;function iT(t){return t>>>=0,t===0?32:31-(sT(t)/rT|0)|0}var Zu=64,ed=4194304;function ic(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ah(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=ic(a):(i&=o,i!==0&&(s=ic(i)))}else o=n&~r,o!==0?s=ic(o):i!==0&&(s=ic(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Is(e),r=1<<n,s|=t[n],e&=~r;return s}function oT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aT(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Is(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=oT(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Wg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function c_(){var t=Zu;return Zu<<=1,!(Zu&4194240)&&(Zu=64),t}function q0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _u(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Is(e),t[e]=n}function lT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Is(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Ix(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Is(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var st=0;function u_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var d_,Nx,h_,f_,p_,Hg=!1,td=[],ai=null,li=null,ci=null,Uc=new Map,Wc=new Map,Kr=[],cT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zy(t,e){switch(t){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Uc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(e.pointerId)}}function Ml(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Eu(e),e!==null&&Nx(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function uT(t,e,n,s,r){switch(e){case"focusin":return ai=Ml(ai,t,e,n,s,r),!0;case"dragenter":return li=Ml(li,t,e,n,s,r),!0;case"mouseover":return ci=Ml(ci,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Uc.set(i,Ml(Uc.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Wc.set(i,Ml(Wc.get(i)||null,t,e,n,s,r)),!0}return!1}function g_(t){var e=Wi(t.target);if(e!==null){var n=_o(e);if(n!==null){if(e=n.tag,e===13){if(e=s_(n),e!==null){t.blockedOn=e,p_(t.priority,function(){h_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);zg=s,n.target.dispatchEvent(s),zg=null}else return e=Eu(n),e!==null&&Nx(e),t.blockedOn=n,!1;e.shift()}return!0}function ev(t,e,n){Jd(t)&&n.delete(e)}function dT(){Hg=!1,ai!==null&&Jd(ai)&&(ai=null),li!==null&&Jd(li)&&(li=null),ci!==null&&Jd(ci)&&(ci=null),Uc.forEach(ev),Wc.forEach(ev)}function Il(t,e){t.blockedOn===e&&(t.blockedOn=null,Hg||(Hg=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,dT)))}function Hc(t){function e(r){return Il(r,t)}if(0<td.length){Il(td[0],t);for(var n=1;n<td.length;n++){var s=td[n];s.blockedOn===t&&(s.blockedOn=null)}}for(ai!==null&&Il(ai,t),li!==null&&Il(li,t),ci!==null&&Il(ci,t),Uc.forEach(e),Wc.forEach(e),n=0;n<Kr.length;n++)s=Kr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Kr.length&&(n=Kr[0],n.blockedOn===null);)g_(n),n.blockedOn===null&&Kr.shift()}var la=Ar.ReactCurrentBatchConfig,Rh=!0;function hT(t,e,n,s){var r=st,i=la.transition;la.transition=null;try{st=1,Ax(t,e,n,s)}finally{st=r,la.transition=i}}function fT(t,e,n,s){var r=st,i=la.transition;la.transition=null;try{st=4,Ax(t,e,n,s)}finally{st=r,la.transition=i}}function Ax(t,e,n,s){if(Rh){var r=Vg(t,e,n,s);if(r===null)rp(t,e,s,Oh,n),Zy(t,s);else if(uT(r,t,e,n,s))s.stopPropagation();else if(Zy(t,s),e&4&&-1<cT.indexOf(t)){for(;r!==null;){var i=Eu(r);if(i!==null&&d_(i),i=Vg(t,e,n,s),i===null&&rp(t,e,s,Oh,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else rp(t,e,s,null,n)}}var Oh=null;function Vg(t,e,n,s){if(Oh=null,t=Tx(s),t=Wi(t),t!==null)if(e=_o(t),e===null)t=null;else if(n=e.tag,n===13){if(t=s_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Oh=t,null}function m_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eT()){case Mx:return 1;case a_:return 4;case Nh:case tT:return 16;case l_:return 536870912;default:return 16}default:return 16}}var ti=null,Rx=null,Zd=null;function x_(){if(Zd)return Zd;var t,e=Rx,n=e.length,s,r="value"in ti?ti.value:ti.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return Zd=r.slice(t,1<s?1-s:void 0)}function eh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nd(){return!0}function tv(){return!1}function Jn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?nd:tv,this.isPropagationStopped=tv,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nd)},persist:function(){},isPersistent:nd}),e}var fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ox=Jn(fl),Cu=St({},fl,{view:0,detail:0}),pT=Jn(Cu),K0,X0,Nl,jf=St({},Cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nl&&(Nl&&t.type==="mousemove"?(K0=t.screenX-Nl.screenX,X0=t.screenY-Nl.screenY):X0=K0=0,Nl=t),K0)},movementY:function(t){return"movementY"in t?t.movementY:X0}}),nv=Jn(jf),gT=St({},jf,{dataTransfer:0}),mT=Jn(gT),xT=St({},Cu,{relatedTarget:0}),Q0=Jn(xT),bT=St({},fl,{animationName:0,elapsedTime:0,pseudoElement:0}),yT=Jn(bT),vT=St({},fl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wT=Jn(vT),kT=St({},fl,{data:0}),sv=Jn(kT),ST={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_T={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ET(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CT[t])?!!e[t]:!1}function Dx(){return ET}var PT=St({},Cu,{key:function(t){if(t.key){var e=ST[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=eh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_T[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dx,charCode:function(t){return t.type==="keypress"?eh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?eh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TT=Jn(PT),MT=St({},jf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rv=Jn(MT),IT=St({},Cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dx}),NT=Jn(IT),AT=St({},fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),RT=Jn(AT),OT=St({},jf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DT=Jn(OT),LT=[9,13,27,32],Lx=Er&&"CompositionEvent"in window,kc=null;Er&&"documentMode"in document&&(kc=document.documentMode);var jT=Er&&"TextEvent"in window&&!kc,b_=Er&&(!Lx||kc&&8<kc&&11>=kc),iv=" ",ov=!1;function y_(t,e){switch(t){case"keyup":return LT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wo=!1;function FT(t,e){switch(t){case"compositionend":return v_(e);case"keypress":return e.which!==32?null:(ov=!0,iv);case"textInput":return t=e.data,t===iv&&ov?null:t;default:return null}}function zT(t,e){if(Wo)return t==="compositionend"||!Lx&&y_(t,e)?(t=x_(),Zd=Rx=ti=null,Wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return b_&&e.locale!=="ko"?null:e.data;default:return null}}var BT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!BT[t.type]:e==="textarea"}function w_(t,e,n,s){J2(s),e=Dh(e,"onChange"),0<e.length&&(n=new Ox("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Sc=null,Vc=null;function $T(t){A_(t,0)}function Ff(t){var e=Yo(t);if(V2(e))return t}function UT(t,e){if(t==="change")return e}var k_=!1;if(Er){var J0;if(Er){var Z0="oninput"in document;if(!Z0){var lv=document.createElement("div");lv.setAttribute("oninput","return;"),Z0=typeof lv.oninput=="function"}J0=Z0}else J0=!1;k_=J0&&(!document.documentMode||9<document.documentMode)}function cv(){Sc&&(Sc.detachEvent("onpropertychange",S_),Vc=Sc=null)}function S_(t){if(t.propertyName==="value"&&Ff(Vc)){var e=[];w_(e,Vc,t,Tx(t)),n_($T,e)}}function WT(t,e,n){t==="focusin"?(cv(),Sc=e,Vc=n,Sc.attachEvent("onpropertychange",S_)):t==="focusout"&&cv()}function HT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ff(Vc)}function VT(t,e){if(t==="click")return Ff(e)}function YT(t,e){if(t==="input"||t==="change")return Ff(e)}function GT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var As=typeof Object.is=="function"?Object.is:GT;function Yc(t,e){if(As(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Pg.call(e,r)||!As(t[r],e[r]))return!1}return!0}function uv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dv(t,e){var n=uv(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uv(n)}}function __(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?__(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function C_(){for(var t=window,e=Th();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Th(t.document)}return e}function jx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qT(t){var e=C_(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&__(n.ownerDocument.documentElement,n)){if(s!==null&&jx(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=dv(n,i);var o=dv(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KT=Er&&"documentMode"in document&&11>=document.documentMode,Ho=null,Yg=null,_c=null,Gg=!1;function hv(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gg||Ho==null||Ho!==Th(s)||(s=Ho,"selectionStart"in s&&jx(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),_c&&Yc(_c,s)||(_c=s,s=Dh(Yg,"onSelect"),0<s.length&&(e=new Ox("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Ho)))}function sd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vo={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},ep={},E_={};Er&&(E_=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function zf(t){if(ep[t])return ep[t];if(!Vo[t])return t;var e=Vo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in E_)return ep[t]=e[n];return t}var P_=zf("animationend"),T_=zf("animationiteration"),M_=zf("animationstart"),I_=zf("transitionend"),N_=new Map,fv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(t,e){N_.set(t,e),So(e,[t])}for(var tp=0;tp<fv.length;tp++){var np=fv[tp],XT=np.toLowerCase(),QT=np[0].toUpperCase()+np.slice(1);Si(XT,"on"+QT)}Si(P_,"onAnimationEnd");Si(T_,"onAnimationIteration");Si(M_,"onAnimationStart");Si("dblclick","onDoubleClick");Si("focusin","onFocus");Si("focusout","onBlur");Si(I_,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);So("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));So("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));So("onBeforeInput",["compositionend","keypress","textInput","paste"]);So("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));So("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));So("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JT=new Set("cancel close invalid load scroll toggle".split(" ").concat(oc));function pv(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,X4(s,e,void 0,t),t.currentTarget=null}function A_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;pv(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;pv(r,a,c),i=l}}}if(Ih)throw t=Ug,Ih=!1,Ug=null,t}function mt(t,e){var n=e[Jg];n===void 0&&(n=e[Jg]=new Set);var s=t+"__bubble";n.has(s)||(R_(e,t,2,!1),n.add(s))}function sp(t,e,n){var s=0;e&&(s|=4),R_(n,t,s,e)}var rd="_reactListening"+Math.random().toString(36).slice(2);function Gc(t){if(!t[rd]){t[rd]=!0,B2.forEach(function(n){n!=="selectionchange"&&(JT.has(n)||sp(n,!1,t),sp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rd]||(e[rd]=!0,sp("selectionchange",!1,e))}}function R_(t,e,n,s){switch(m_(e)){case 1:var r=hT;break;case 4:r=fT;break;default:r=Ax}n=r.bind(null,e,n,t),r=void 0,!$g||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function rp(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Wi(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}n_(function(){var c=i,u=Tx(n),d=[];e:{var f=N_.get(t);if(f!==void 0){var p=Ox,g=t;switch(t){case"keypress":if(eh(n)===0)break e;case"keydown":case"keyup":p=TT;break;case"focusin":g="focus",p=Q0;break;case"focusout":g="blur",p=Q0;break;case"beforeblur":case"afterblur":p=Q0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=nv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=mT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=NT;break;case P_:case T_:case M_:p=yT;break;case I_:p=RT;break;case"scroll":p=pT;break;case"wheel":p=DT;break;case"copy":case"cut":case"paste":p=wT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=rv}var x=(e&4)!==0,w=!x&&t==="scroll",m=x?f!==null?f+"Capture":null:f;x=[];for(var y=c,v;y!==null;){v=y;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,m!==null&&(b=$c(y,m),b!=null&&x.push(qc(y,b,v)))),w)break;y=y.return}0<x.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==zg&&(g=n.relatedTarget||n.fromElement)&&(Wi(g)||g[Pr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Wi(g):null,g!==null&&(w=_o(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(x=nv,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=rv,b="onPointerLeave",m="onPointerEnter",y="pointer"),w=p==null?f:Yo(p),v=g==null?f:Yo(g),f=new x(b,y+"leave",p,n,u),f.target=w,f.relatedTarget=v,b=null,Wi(u)===c&&(x=new x(m,y+"enter",g,n,u),x.target=v,x.relatedTarget=w,b=x),w=b,p&&g)t:{for(x=p,m=g,y=0,v=x;v;v=Ro(v))y++;for(v=0,b=m;b;b=Ro(b))v++;for(;0<y-v;)x=Ro(x),y--;for(;0<v-y;)m=Ro(m),v--;for(;y--;){if(x===m||m!==null&&x===m.alternate)break t;x=Ro(x),m=Ro(m)}x=null}else x=null;p!==null&&gv(d,f,p,x,!1),g!==null&&w!==null&&gv(d,w,g,x,!0)}}e:{if(f=c?Yo(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=UT;else if(av(f))if(k_)S=YT;else{S=HT;var _=WT}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=VT);if(S&&(S=S(t,c))){w_(d,S,n,u);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Og(f,"number",f.value)}switch(_=c?Yo(c):window,t){case"focusin":(av(_)||_.contentEditable==="true")&&(Ho=_,Yg=c,_c=null);break;case"focusout":_c=Yg=Ho=null;break;case"mousedown":Gg=!0;break;case"contextmenu":case"mouseup":case"dragend":Gg=!1,hv(d,n,u);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":hv(d,n,u)}var E;if(Lx)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Wo?y_(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(b_&&n.locale!=="ko"&&(Wo||P!=="onCompositionStart"?P==="onCompositionEnd"&&Wo&&(E=x_()):(ti=u,Rx="value"in ti?ti.value:ti.textContent,Wo=!0)),_=Dh(c,P),0<_.length&&(P=new sv(P,t,null,n,u),d.push({event:P,listeners:_}),E?P.data=E:(E=v_(n),E!==null&&(P.data=E)))),(E=jT?FT(t,n):zT(t,n))&&(c=Dh(c,"onBeforeInput"),0<c.length&&(u=new sv("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}A_(d,e)})}function qc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dh(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=$c(t,n),i!=null&&s.unshift(qc(t,i,r)),i=$c(t,e),i!=null&&s.push(qc(t,i,r))),t=t.return}return s}function Ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gv(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=$c(n,i),l!=null&&o.unshift(qc(n,l,a))):r||(l=$c(n,i),l!=null&&o.push(qc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ZT=/\r\n?/g,eM=/\u0000|\uFFFD/g;function mv(t){return(typeof t=="string"?t:""+t).replace(ZT,`
`).replace(eM,"")}function id(t,e,n){if(e=mv(e),mv(t)!==e&&n)throw Error(le(425))}function Lh(){}var qg=null,Kg=null;function Xg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qg=typeof setTimeout=="function"?setTimeout:void 0,tM=typeof clearTimeout=="function"?clearTimeout:void 0,xv=typeof Promise=="function"?Promise:void 0,nM=typeof queueMicrotask=="function"?queueMicrotask:typeof xv<"u"?function(t){return xv.resolve(null).then(t).catch(sM)}:Qg;function sM(t){setTimeout(function(){throw t})}function ip(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Hc(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Hc(e)}function ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var pl=Math.random().toString(36).slice(2),Ks="__reactFiber$"+pl,Kc="__reactProps$"+pl,Pr="__reactContainer$"+pl,Jg="__reactEvents$"+pl,rM="__reactListeners$"+pl,iM="__reactHandles$"+pl;function Wi(t){var e=t[Ks];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pr]||n[Ks]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bv(t);t!==null;){if(n=t[Ks])return n;t=bv(t)}return e}t=n,n=t.parentNode}return null}function Eu(t){return t=t[Ks]||t[Pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function Bf(t){return t[Kc]||null}var Zg=[],Go=-1;function _i(t){return{current:t}}function xt(t){0>Go||(t.current=Zg[Go],Zg[Go]=null,Go--)}function ft(t,e){Go++,Zg[Go]=t.current,t.current=e}var yi={},fn=_i(yi),On=_i(!1),lo=yi;function Ba(t,e){var n=t.type.contextTypes;if(!n)return yi;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Dn(t){return t=t.childContextTypes,t!=null}function jh(){xt(On),xt(fn)}function yv(t,e,n){if(fn.current!==yi)throw Error(le(168));ft(fn,e),ft(On,n)}function O_(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(le(108,W4(t)||"Unknown",r));return St({},n,s)}function Fh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yi,lo=fn.current,ft(fn,t),ft(On,On.current),!0}function vv(t,e,n){var s=t.stateNode;if(!s)throw Error(le(169));n?(t=O_(t,e,lo),s.__reactInternalMemoizedMergedChildContext=t,xt(On),xt(fn),ft(fn,t)):xt(On),ft(On,n)}var dr=null,$f=!1,op=!1;function D_(t){dr===null?dr=[t]:dr.push(t)}function oM(t){$f=!0,D_(t)}function Ci(){if(!op&&dr!==null){op=!0;var t=0,e=st;try{var n=dr;for(st=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}dr=null,$f=!1}catch(r){throw dr!==null&&(dr=dr.slice(t+1)),o_(Mx,Ci),r}finally{st=e,op=!1}}return null}var qo=[],Ko=0,zh=null,Bh=0,cs=[],us=0,co=null,yr=1,vr="";function Oi(t,e){qo[Ko++]=Bh,qo[Ko++]=zh,zh=t,Bh=e}function L_(t,e,n){cs[us++]=yr,cs[us++]=vr,cs[us++]=co,co=t;var s=yr;t=vr;var r=32-Is(s)-1;s&=~(1<<r),n+=1;var i=32-Is(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,yr=1<<32-Is(e)+r|n<<r|s,vr=i+t}else yr=1<<i|n<<r|s,vr=t}function Fx(t){t.return!==null&&(Oi(t,1),L_(t,1,0))}function zx(t){for(;t===zh;)zh=qo[--Ko],qo[Ko]=null,Bh=qo[--Ko],qo[Ko]=null;for(;t===co;)co=cs[--us],cs[us]=null,vr=cs[--us],cs[us]=null,yr=cs[--us],cs[us]=null}var Hn=null,Wn=null,bt=!1,Es=null;function j_(t,e){var n=ds(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hn=t,Wn=ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hn=t,Wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=co!==null?{id:yr,overflow:vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ds(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hn=t,Wn=null,!0):!1;default:return!1}}function em(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tm(t){if(bt){var e=Wn;if(e){var n=e;if(!wv(t,e)){if(em(t))throw Error(le(418));e=ui(n.nextSibling);var s=Hn;e&&wv(t,e)?j_(s,n):(t.flags=t.flags&-4097|2,bt=!1,Hn=t)}}else{if(em(t))throw Error(le(418));t.flags=t.flags&-4097|2,bt=!1,Hn=t}}}function kv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hn=t}function od(t){if(t!==Hn)return!1;if(!bt)return kv(t),bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xg(t.type,t.memoizedProps)),e&&(e=Wn)){if(em(t))throw F_(),Error(le(418));for(;e;)j_(t,e),e=ui(e.nextSibling)}if(kv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wn=ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wn=null}}else Wn=Hn?ui(t.stateNode.nextSibling):null;return!0}function F_(){for(var t=Wn;t;)t=ui(t.nextSibling)}function $a(){Wn=Hn=null,bt=!1}function Bx(t){Es===null?Es=[t]:Es.push(t)}var aM=Ar.ReactCurrentBatchConfig;function Al(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var s=n.stateNode}if(!s)throw Error(le(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function ad(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Sv(t){var e=t._init;return e(t._payload)}function z_(t){function e(m,y){if(t){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function s(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function r(m,y){return m=pi(m,y),m.index=0,m.sibling=null,m}function i(m,y,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,v,b){return y===null||y.tag!==6?(y=fp(v,m.mode,b),y.return=m,y):(y=r(y,v),y.return=m,y)}function l(m,y,v,b){var S=v.type;return S===Uo?u(m,y,v.props.children,b,v.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Gr&&Sv(S)===y.type)?(b=r(y,v.props),b.ref=Al(m,y,v),b.return=m,b):(b=ah(v.type,v.key,v.props,null,m.mode,b),b.ref=Al(m,y,v),b.return=m,b)}function c(m,y,v,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=pp(v,m.mode,b),y.return=m,y):(y=r(y,v.children||[]),y.return=m,y)}function u(m,y,v,b,S){return y===null||y.tag!==7?(y=to(v,m.mode,b,S),y.return=m,y):(y=r(y,v),y.return=m,y)}function d(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=fp(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xu:return v=ah(y.type,y.key,y.props,null,m.mode,v),v.ref=Al(m,null,y),v.return=m,v;case $o:return y=pp(y,m.mode,v),y.return=m,y;case Gr:var b=y._init;return d(m,b(y._payload),v)}if(rc(y)||Pl(y))return y=to(y,m.mode,v,null),y.return=m,y;ad(m,y)}return null}function f(m,y,v,b){var S=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(m,y,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xu:return v.key===S?l(m,y,v,b):null;case $o:return v.key===S?c(m,y,v,b):null;case Gr:return S=v._init,f(m,y,S(v._payload),b)}if(rc(v)||Pl(v))return S!==null?null:u(m,y,v,b,null);ad(m,v)}return null}function p(m,y,v,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(v)||null,a(y,m,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Xu:return m=m.get(b.key===null?v:b.key)||null,l(y,m,b,S);case $o:return m=m.get(b.key===null?v:b.key)||null,c(y,m,b,S);case Gr:var _=b._init;return p(m,y,v,_(b._payload),S)}if(rc(b)||Pl(b))return m=m.get(v)||null,u(y,m,b,S,null);ad(y,b)}return null}function g(m,y,v,b){for(var S=null,_=null,E=y,P=y=0,M=null;E!==null&&P<v.length;P++){E.index>P?(M=E,E=null):M=E.sibling;var C=f(m,E,v[P],b);if(C===null){E===null&&(E=M);break}t&&E&&C.alternate===null&&e(m,E),y=i(C,y,P),_===null?S=C:_.sibling=C,_=C,E=M}if(P===v.length)return n(m,E),bt&&Oi(m,P),S;if(E===null){for(;P<v.length;P++)E=d(m,v[P],b),E!==null&&(y=i(E,y,P),_===null?S=E:_.sibling=E,_=E);return bt&&Oi(m,P),S}for(E=s(m,E);P<v.length;P++)M=p(E,m,P,v[P],b),M!==null&&(t&&M.alternate!==null&&E.delete(M.key===null?P:M.key),y=i(M,y,P),_===null?S=M:_.sibling=M,_=M);return t&&E.forEach(function(N){return e(m,N)}),bt&&Oi(m,P),S}function x(m,y,v,b){var S=Pl(v);if(typeof S!="function")throw Error(le(150));if(v=S.call(v),v==null)throw Error(le(151));for(var _=S=null,E=y,P=y=0,M=null,C=v.next();E!==null&&!C.done;P++,C=v.next()){E.index>P?(M=E,E=null):M=E.sibling;var N=f(m,E,C.value,b);if(N===null){E===null&&(E=M);break}t&&E&&N.alternate===null&&e(m,E),y=i(N,y,P),_===null?S=N:_.sibling=N,_=N,E=M}if(C.done)return n(m,E),bt&&Oi(m,P),S;if(E===null){for(;!C.done;P++,C=v.next())C=d(m,C.value,b),C!==null&&(y=i(C,y,P),_===null?S=C:_.sibling=C,_=C);return bt&&Oi(m,P),S}for(E=s(m,E);!C.done;P++,C=v.next())C=p(E,m,P,C.value,b),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?P:C.key),y=i(C,y,P),_===null?S=C:_.sibling=C,_=C);return t&&E.forEach(function(I){return e(m,I)}),bt&&Oi(m,P),S}function w(m,y,v,b){if(typeof v=="object"&&v!==null&&v.type===Uo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Xu:e:{for(var S=v.key,_=y;_!==null;){if(_.key===S){if(S=v.type,S===Uo){if(_.tag===7){n(m,_.sibling),y=r(_,v.props.children),y.return=m,m=y;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Gr&&Sv(S)===_.type){n(m,_.sibling),y=r(_,v.props),y.ref=Al(m,_,v),y.return=m,m=y;break e}n(m,_);break}else e(m,_);_=_.sibling}v.type===Uo?(y=to(v.props.children,m.mode,b,v.key),y.return=m,m=y):(b=ah(v.type,v.key,v.props,null,m.mode,b),b.ref=Al(m,y,v),b.return=m,m=b)}return o(m);case $o:e:{for(_=v.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(m,y.sibling),y=r(y,v.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=pp(v,m.mode,b),y.return=m,m=y}return o(m);case Gr:return _=v._init,w(m,y,_(v._payload),b)}if(rc(v))return g(m,y,v,b);if(Pl(v))return x(m,y,v,b);ad(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(m,y.sibling),y=r(y,v),y.return=m,m=y):(n(m,y),y=fp(v,m.mode,b),y.return=m,m=y),o(m)):n(m,y)}return w}var Ua=z_(!0),B_=z_(!1),$h=_i(null),Uh=null,Xo=null,$x=null;function Ux(){$x=Xo=Uh=null}function Wx(t){var e=$h.current;xt($h),t._currentValue=e}function nm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function ca(t,e){Uh=t,$x=Xo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(An=!0),t.firstContext=null)}function gs(t){var e=t._currentValue;if($x!==t)if(t={context:t,memoizedValue:e,next:null},Xo===null){if(Uh===null)throw Error(le(308));Xo=t,Uh.dependencies={lanes:0,firstContext:t}}else Xo=Xo.next=t;return e}var Hi=null;function Hx(t){Hi===null?Hi=[t]:Hi.push(t)}function $_(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Hx(e)):(n.next=r.next,r.next=n),e.interleaved=n,Tr(t,s)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qr=!1;function Vx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function di(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ke&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Tr(t,n)}return r=s.interleaved,r===null?(e.next=e,Hx(s)):(e.next=r.next,r.next=e),s.interleaved=e,Tr(t,n)}function th(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Ix(t,n)}}function _v(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wh(t,e,n,s){var r=t.updateQueue;qr=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=r.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,x=a;switch(f=e,p=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=St({},d,f);break e;case 2:qr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);ho|=o,t.lanes=o,t.memoizedState=d}}function Cv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(le(191,r));r.call(s)}}}var Pu={},Js=_i(Pu),Xc=_i(Pu),Qc=_i(Pu);function Vi(t){if(t===Pu)throw Error(le(174));return t}function Yx(t,e){switch(ft(Qc,e),ft(Xc,t),ft(Js,Pu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lg(e,t)}xt(Js),ft(Js,e)}function Wa(){xt(Js),xt(Xc),xt(Qc)}function W_(t){Vi(Qc.current);var e=Vi(Js.current),n=Lg(e,t.type);e!==n&&(ft(Xc,t),ft(Js,n))}function Gx(t){Xc.current===t&&(xt(Js),xt(Xc))}var wt=_i(0);function Hh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ap=[];function qx(){for(var t=0;t<ap.length;t++)ap[t]._workInProgressVersionPrimary=null;ap.length=0}var nh=Ar.ReactCurrentDispatcher,lp=Ar.ReactCurrentBatchConfig,uo=0,kt=null,Ft=null,Ut=null,Vh=!1,Cc=!1,Jc=0,lM=0;function an(){throw Error(le(321))}function Kx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!As(t[n],e[n]))return!1;return!0}function Xx(t,e,n,s,r,i){if(uo=i,kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nh.current=t===null||t.memoizedState===null?hM:fM,t=n(s,r),Cc){i=0;do{if(Cc=!1,Jc=0,25<=i)throw Error(le(301));i+=1,Ut=Ft=null,e.updateQueue=null,nh.current=pM,t=n(s,r)}while(Cc)}if(nh.current=Yh,e=Ft!==null&&Ft.next!==null,uo=0,Ut=Ft=kt=null,Vh=!1,e)throw Error(le(300));return t}function Qx(){var t=Jc!==0;return Jc=0,t}function Ws(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?kt.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function ms(){if(Ft===null){var t=kt.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Ut===null?kt.memoizedState:Ut.next;if(e!==null)Ut=e,Ft=t;else{if(t===null)throw Error(le(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Ut===null?kt.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function Zc(t,e){return typeof e=="function"?e(t):e}function cp(t){var e=ms(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var s=Ft,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((uo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=s):l=l.next=d,kt.lanes|=u,ho|=u}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,As(s,e.memoizedState)||(An=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,kt.lanes|=i,ho|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function up(t){var e=ms(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);As(i,e.memoizedState)||(An=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function H_(){}function V_(t,e){var n=kt,s=ms(),r=e(),i=!As(s.memoizedState,r);if(i&&(s.memoizedState=r,An=!0),s=s.queue,Jx(q_.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,eu(9,G_.bind(null,n,s,r,e),void 0,null),Gt===null)throw Error(le(349));uo&30||Y_(n,e,r)}return r}function Y_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function G_(t,e,n,s){e.value=n,e.getSnapshot=s,K_(e)&&X_(t)}function q_(t,e,n){return n(function(){K_(e)&&X_(t)})}function K_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!As(t,n)}catch{return!0}}function X_(t){var e=Tr(t,1);e!==null&&Ns(e,t,1,-1)}function Ev(t){var e=Ws();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zc,lastRenderedState:t},e.queue=t,t=t.dispatch=dM.bind(null,kt,t),[e.memoizedState,t]}function eu(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Q_(){return ms().memoizedState}function sh(t,e,n,s){var r=Ws();kt.flags|=t,r.memoizedState=eu(1|e,n,void 0,s===void 0?null:s)}function Uf(t,e,n,s){var r=ms();s=s===void 0?null:s;var i=void 0;if(Ft!==null){var o=Ft.memoizedState;if(i=o.destroy,s!==null&&Kx(s,o.deps)){r.memoizedState=eu(e,n,i,s);return}}kt.flags|=t,r.memoizedState=eu(1|e,n,i,s)}function Pv(t,e){return sh(8390656,8,t,e)}function Jx(t,e){return Uf(2048,8,t,e)}function J_(t,e){return Uf(4,2,t,e)}function Z_(t,e){return Uf(4,4,t,e)}function eC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tC(t,e,n){return n=n!=null?n.concat([t]):null,Uf(4,4,eC.bind(null,e,t),n)}function Zx(){}function nC(t,e){var n=ms();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Kx(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function sC(t,e){var n=ms();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Kx(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function rC(t,e,n){return uo&21?(As(n,e)||(n=c_(),kt.lanes|=n,ho|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,An=!0),t.memoizedState=n)}function cM(t,e){var n=st;st=n!==0&&4>n?n:4,t(!0);var s=lp.transition;lp.transition={};try{t(!1),e()}finally{st=n,lp.transition=s}}function iC(){return ms().memoizedState}function uM(t,e,n){var s=fi(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},oC(t))aC(e,n);else if(n=$_(t,e,n,s),n!==null){var r=vn();Ns(n,t,s,r),lC(n,e,s)}}function dM(t,e,n){var s=fi(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(oC(t))aC(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,As(a,o)){var l=e.interleaved;l===null?(r.next=r,Hx(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=$_(t,e,r,s),n!==null&&(r=vn(),Ns(n,t,s,r),lC(n,e,s))}}function oC(t){var e=t.alternate;return t===kt||e!==null&&e===kt}function aC(t,e){Cc=Vh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lC(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Ix(t,n)}}var Yh={readContext:gs,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},hM={readContext:gs,useCallback:function(t,e){return Ws().memoizedState=[t,e===void 0?null:e],t},useContext:gs,useEffect:Pv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sh(4194308,4,eC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sh(4194308,4,t,e)},useInsertionEffect:function(t,e){return sh(4,2,t,e)},useMemo:function(t,e){var n=Ws();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Ws();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=uM.bind(null,kt,t),[s.memoizedState,t]},useRef:function(t){var e=Ws();return t={current:t},e.memoizedState=t},useState:Ev,useDebugValue:Zx,useDeferredValue:function(t){return Ws().memoizedState=t},useTransition:function(){var t=Ev(!1),e=t[0];return t=cM.bind(null,t[1]),Ws().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=kt,r=Ws();if(bt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),Gt===null)throw Error(le(349));uo&30||Y_(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Pv(q_.bind(null,s,i,t),[t]),s.flags|=2048,eu(9,G_.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Ws(),e=Gt.identifierPrefix;if(bt){var n=vr,s=yr;n=(s&~(1<<32-Is(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Jc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fM={readContext:gs,useCallback:nC,useContext:gs,useEffect:Jx,useImperativeHandle:tC,useInsertionEffect:J_,useLayoutEffect:Z_,useMemo:sC,useReducer:cp,useRef:Q_,useState:function(){return cp(Zc)},useDebugValue:Zx,useDeferredValue:function(t){var e=ms();return rC(e,Ft.memoizedState,t)},useTransition:function(){var t=cp(Zc)[0],e=ms().memoizedState;return[t,e]},useMutableSource:H_,useSyncExternalStore:V_,useId:iC,unstable_isNewReconciler:!1},pM={readContext:gs,useCallback:nC,useContext:gs,useEffect:Jx,useImperativeHandle:tC,useInsertionEffect:J_,useLayoutEffect:Z_,useMemo:sC,useReducer:up,useRef:Q_,useState:function(){return up(Zc)},useDebugValue:Zx,useDeferredValue:function(t){var e=ms();return Ft===null?e.memoizedState=t:rC(e,Ft.memoizedState,t)},useTransition:function(){var t=up(Zc)[0],e=ms().memoizedState;return[t,e]},useMutableSource:H_,useSyncExternalStore:V_,useId:iC,unstable_isNewReconciler:!1};function ks(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sm(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:St({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wf={isMounted:function(t){return(t=t._reactInternals)?_o(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=vn(),r=fi(t),i=Sr(s,r);i.payload=e,n!=null&&(i.callback=n),e=di(t,i,r),e!==null&&(Ns(e,t,r,s),th(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=vn(),r=fi(t),i=Sr(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=di(t,i,r),e!==null&&(Ns(e,t,r,s),th(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),s=fi(t),r=Sr(n,s);r.tag=2,e!=null&&(r.callback=e),e=di(t,r,s),e!==null&&(Ns(e,t,s,n),th(e,t,s))}};function Tv(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Yc(n,s)||!Yc(r,i):!0}function cC(t,e,n){var s=!1,r=yi,i=e.contextType;return typeof i=="object"&&i!==null?i=gs(i):(r=Dn(e)?lo:fn.current,s=e.contextTypes,i=(s=s!=null)?Ba(t,r):yi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wf,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Mv(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Wf.enqueueReplaceState(e,e.state,null)}function rm(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Vx(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=gs(i):(i=Dn(e)?lo:fn.current,r.context=Ba(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sm(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Wf.enqueueReplaceState(r,r.state,null),Wh(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ha(t,e){try{var n="",s=e;do n+=U4(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function dp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function im(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gM=typeof WeakMap=="function"?WeakMap:Map;function uC(t,e,n){n=Sr(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){qh||(qh=!0,gm=s),im(t,e)},n}function dC(t,e,n){n=Sr(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){im(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){im(t,e),typeof s!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Iv(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new gM;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=MM.bind(null,t,e,n),e.then(t,t))}function Nv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Av(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Sr(-1,1),e.tag=2,di(n,e,1))),n.lanes|=1),t)}var mM=Ar.ReactCurrentOwner,An=!1;function yn(t,e,n,s){e.child=t===null?B_(e,null,n,s):Ua(e,t.child,n,s)}function Rv(t,e,n,s,r){n=n.render;var i=e.ref;return ca(e,r),s=Xx(t,e,n,s,i,r),n=Qx(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Mr(t,e,r)):(bt&&n&&Fx(e),e.flags|=1,yn(t,e,s,r),e.child)}function Ov(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!ab(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,hC(t,e,i,s,r)):(t=ah(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yc,n(o,s)&&t.ref===e.ref)return Mr(t,e,r)}return e.flags|=1,t=pi(i,s),t.ref=e.ref,t.return=e,e.child=t}function hC(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Yc(i,s)&&t.ref===e.ref)if(An=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(An=!0);else return e.lanes=t.lanes,Mr(t,e,r)}return om(t,e,n,s,r)}function fC(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Jo,$n),$n|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ft(Jo,$n),$n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,ft(Jo,$n),$n|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,ft(Jo,$n),$n|=s;return yn(t,e,r,n),e.child}function pC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function om(t,e,n,s,r){var i=Dn(n)?lo:fn.current;return i=Ba(e,i),ca(e,r),n=Xx(t,e,n,s,i,r),s=Qx(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Mr(t,e,r)):(bt&&s&&Fx(e),e.flags|=1,yn(t,e,n,r),e.child)}function Dv(t,e,n,s,r){if(Dn(n)){var i=!0;Fh(e)}else i=!1;if(ca(e,r),e.stateNode===null)rh(t,e),cC(e,n,s),rm(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gs(c):(c=Dn(n)?lo:fn.current,c=Ba(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&Mv(e,o,s,c),qr=!1;var f=e.memoizedState;o.state=f,Wh(e,s,o,r),l=e.memoizedState,a!==s||f!==l||On.current||qr?(typeof u=="function"&&(sm(e,n,u,s),l=e.memoizedState),(a=qr||Tv(e,n,a,s,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,U_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ks(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gs(l):(l=Dn(n)?lo:fn.current,l=Ba(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Mv(e,o,s,l),qr=!1,f=e.memoizedState,o.state=f,Wh(e,s,o,r);var g=e.memoizedState;a!==d||f!==g||On.current||qr?(typeof p=="function"&&(sm(e,n,p,s),g=e.memoizedState),(c=qr||Tv(e,n,c,s,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=g),o.props=s,o.state=g,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return am(t,e,n,s,i,r)}function am(t,e,n,s,r,i){pC(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&vv(e,n,!1),Mr(t,e,i);s=e.stateNode,mM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Ua(e,t.child,null,i),e.child=Ua(e,null,a,i)):yn(t,e,a,i),e.memoizedState=s.state,r&&vv(e,n,!0),e.child}function gC(t){var e=t.stateNode;e.pendingContext?yv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yv(t,e.context,!1),Yx(t,e.containerInfo)}function Lv(t,e,n,s,r){return $a(),Bx(r),e.flags|=256,yn(t,e,n,s),e.child}var lm={dehydrated:null,treeContext:null,retryLane:0};function cm(t){return{baseLanes:t,cachePool:null,transitions:null}}function mC(t,e,n){var s=e.pendingProps,r=wt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ft(wt,r&1),t===null)return tm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yf(o,s,0,null),t=to(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cm(n),e.memoizedState=lm,t):eb(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return xM(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=pi(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=pi(a,i):(i=to(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?cm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=lm,s}return i=t.child,t=i.sibling,s=pi(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function eb(t,e){return e=Yf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ld(t,e,n,s){return s!==null&&Bx(s),Ua(e,t.child,null,n),t=eb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xM(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=dp(Error(le(422))),ld(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Yf({mode:"visible",children:s.children},r,0,null),i=to(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Ua(e,t.child,null,o),e.child.memoizedState=cm(o),e.memoizedState=lm,i);if(!(e.mode&1))return ld(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(le(419)),s=dp(i,s,void 0),ld(t,e,o,s)}if(a=(o&t.childLanes)!==0,An||a){if(s=Gt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Tr(t,r),Ns(s,t,r,-1))}return ob(),s=dp(Error(le(421))),ld(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=IM.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Wn=ui(r.nextSibling),Hn=e,bt=!0,Es=null,t!==null&&(cs[us++]=yr,cs[us++]=vr,cs[us++]=co,yr=t.id,vr=t.overflow,co=e),e=eb(e,s.children),e.flags|=4096,e)}function jv(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),nm(t.return,e,n)}function hp(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function xC(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(yn(t,e,s.children,n),s=wt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jv(t,n,e);else if(t.tag===19)jv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ft(wt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Hh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),hp(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Hh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}hp(e,!0,n,null,i);break;case"together":hp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ho|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bM(t,e,n){switch(e.tag){case 3:gC(e),$a();break;case 5:W_(e);break;case 1:Dn(e.type)&&Fh(e);break;case 4:Yx(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;ft($h,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ft(wt,wt.current&1),e.flags|=128,null):n&e.child.childLanes?mC(t,e,n):(ft(wt,wt.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);ft(wt,wt.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return xC(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ft(wt,wt.current),s)break;return null;case 22:case 23:return e.lanes=0,fC(t,e,n)}return Mr(t,e,n)}var bC,um,yC,vC;bC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};um=function(){};yC=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Vi(Js.current);var i=null;switch(n){case"input":r=Ag(t,r),s=Ag(t,s),i=[];break;case"select":r=St({},r,{value:void 0}),s=St({},s,{value:void 0}),i=[];break;case"textarea":r=Dg(t,r),s=Dg(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Lh)}jg(n,s);var o;n=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(zc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&mt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};vC=function(t,e,n,s){n!==s&&(e.flags|=4)};function Rl(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function yM(t,e,n){var s=e.pendingProps;switch(zx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Dn(e.type)&&jh(),ln(e),null;case 3:return s=e.stateNode,Wa(),xt(On),xt(fn),qx(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(od(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Es!==null&&(bm(Es),Es=null))),um(t,e),ln(e),null;case 5:Gx(e);var r=Vi(Qc.current);if(n=e.type,t!==null&&e.stateNode!=null)yC(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(le(166));return ln(e),null}if(t=Vi(Js.current),od(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Ks]=e,s[Kc]=i,t=(e.mode&1)!==0,n){case"dialog":mt("cancel",s),mt("close",s);break;case"iframe":case"object":case"embed":mt("load",s);break;case"video":case"audio":for(r=0;r<oc.length;r++)mt(oc[r],s);break;case"source":mt("error",s);break;case"img":case"image":case"link":mt("error",s),mt("load",s);break;case"details":mt("toggle",s);break;case"input":Yy(s,i),mt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},mt("invalid",s);break;case"textarea":qy(s,i),mt("invalid",s)}jg(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&id(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&id(s.textContent,a,t),r=["children",""+a]):zc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&mt("scroll",s)}switch(n){case"input":Qu(s),Gy(s,i,!0);break;case"textarea":Qu(s),Ky(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Lh)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Ks]=e,t[Kc]=s,bC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fg(n,s),n){case"dialog":mt("cancel",t),mt("close",t),r=s;break;case"iframe":case"object":case"embed":mt("load",t),r=s;break;case"video":case"audio":for(r=0;r<oc.length;r++)mt(oc[r],t);r=s;break;case"source":mt("error",t),r=s;break;case"img":case"image":case"link":mt("error",t),mt("load",t),r=s;break;case"details":mt("toggle",t),r=s;break;case"input":Yy(t,s),r=Ag(t,s),mt("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=St({},s,{value:void 0}),mt("invalid",t);break;case"textarea":qy(t,s),r=Dg(t,s),mt("invalid",t);break;default:r=s}jg(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Q2(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&K2(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Bc(t,l):typeof l=="number"&&Bc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&mt("scroll",t):l!=null&&_x(t,i,l,o))}switch(n){case"input":Qu(t),Gy(t,s,!1);break;case"textarea":Qu(t),Ky(t);break;case"option":s.value!=null&&t.setAttribute("value",""+bi(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?ia(t,!!s.multiple,i,!1):s.defaultValue!=null&&ia(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Lh)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)vC(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(le(166));if(n=Vi(Qc.current),Vi(Js.current),od(e)){if(s=e.stateNode,n=e.memoizedProps,s[Ks]=e,(i=s.nodeValue!==n)&&(t=Hn,t!==null))switch(t.tag){case 3:id(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&id(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Ks]=e,e.stateNode=s}return ln(e),null;case 13:if(xt(wt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bt&&Wn!==null&&e.mode&1&&!(e.flags&128))F_(),$a(),e.flags|=98560,i=!1;else if(i=od(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[Ks]=e}else $a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),i=!1}else Es!==null&&(bm(Es),Es=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||wt.current&1?Bt===0&&(Bt=3):ob())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return Wa(),um(t,e),t===null&&Gc(e.stateNode.containerInfo),ln(e),null;case 10:return Wx(e.type._context),ln(e),null;case 17:return Dn(e.type)&&jh(),ln(e),null;case 19:if(xt(wt),i=e.memoizedState,i===null)return ln(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Rl(i,!1);else{if(Bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hh(t),o!==null){for(e.flags|=128,Rl(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ft(wt,wt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Mt()>Va&&(e.flags|=128,s=!0,Rl(i,!1),e.lanes=4194304)}else{if(!s)if(t=Hh(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!bt)return ln(e),null}else 2*Mt()-i.renderingStartTime>Va&&n!==1073741824&&(e.flags|=128,s=!0,Rl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Mt(),e.sibling=null,n=wt.current,ft(wt,s?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return ib(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?$n&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function vM(t,e){switch(zx(e),e.tag){case 1:return Dn(e.type)&&jh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wa(),xt(On),xt(fn),qx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gx(e),null;case 13:if(xt(wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));$a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(wt),null;case 4:return Wa(),null;case 10:return Wx(e.type._context),null;case 22:case 23:return ib(),null;case 24:return null;default:return null}}var cd=!1,hn=!1,wM=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Qo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ct(t,e,s)}else n.current=null}function dm(t,e,n){try{n()}catch(s){Ct(t,e,s)}}var Fv=!1;function kM(t,e){if(qg=Rh,t=C_(),jx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==i||s!==0&&d.nodeType!==3||(l=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===i&&++u===s&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kg={focusedElem:t,selectionRange:n},Rh=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,w=g.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:ks(e.type,x),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(b){Ct(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return g=Fv,Fv=!1,g}function Ec(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&dm(e,n,i)}r=r.next}while(r!==s)}}function Hf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function hm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wC(t){var e=t.alternate;e!==null&&(t.alternate=null,wC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ks],delete e[Kc],delete e[Jg],delete e[rM],delete e[iM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kC(t){return t.tag===5||t.tag===3||t.tag===4}function zv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lh));else if(s!==4&&(t=t.child,t!==null))for(fm(t,e,n),t=t.sibling;t!==null;)fm(t,e,n),t=t.sibling}function pm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(pm(t,e,n),t=t.sibling;t!==null;)pm(t,e,n),t=t.sibling}var Xt=null,Cs=!1;function Rr(t,e,n){for(n=n.child;n!==null;)SC(t,e,n),n=n.sibling}function SC(t,e,n){if(Qs&&typeof Qs.onCommitFiberUnmount=="function")try{Qs.onCommitFiberUnmount(Lf,n)}catch{}switch(n.tag){case 5:hn||Qo(n,e);case 6:var s=Xt,r=Cs;Xt=null,Rr(t,e,n),Xt=s,Cs=r,Xt!==null&&(Cs?(t=Xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(Cs?(t=Xt,n=n.stateNode,t.nodeType===8?ip(t.parentNode,n):t.nodeType===1&&ip(t,n),Hc(t)):ip(Xt,n.stateNode));break;case 4:s=Xt,r=Cs,Xt=n.stateNode.containerInfo,Cs=!0,Rr(t,e,n),Xt=s,Cs=r;break;case 0:case 11:case 14:case 15:if(!hn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&dm(n,e,o),r=r.next}while(r!==s)}Rr(t,e,n);break;case 1:if(!hn&&(Qo(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Ct(n,e,a)}Rr(t,e,n);break;case 21:Rr(t,e,n);break;case 22:n.mode&1?(hn=(s=hn)||n.memoizedState!==null,Rr(t,e,n),hn=s):Rr(t,e,n);break;default:Rr(t,e,n)}}function Bv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wM),e.forEach(function(s){var r=NM.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function ys(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xt=a.stateNode,Cs=!1;break e;case 3:Xt=a.stateNode.containerInfo,Cs=!0;break e;case 4:Xt=a.stateNode.containerInfo,Cs=!0;break e}a=a.return}if(Xt===null)throw Error(le(160));SC(i,o,r),Xt=null,Cs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ct(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_C(e,t),e=e.sibling}function _C(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ys(e,t),Ls(t),s&4){try{Ec(3,t,t.return),Hf(3,t)}catch(x){Ct(t,t.return,x)}try{Ec(5,t,t.return)}catch(x){Ct(t,t.return,x)}}break;case 1:ys(e,t),Ls(t),s&512&&n!==null&&Qo(n,n.return);break;case 5:if(ys(e,t),Ls(t),s&512&&n!==null&&Qo(n,n.return),t.flags&32){var r=t.stateNode;try{Bc(r,"")}catch(x){Ct(t,t.return,x)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Y2(r,i),Fg(a,o);var c=Fg(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Q2(r,d):u==="dangerouslySetInnerHTML"?K2(r,d):u==="children"?Bc(r,d):_x(r,u,d,c)}switch(a){case"input":Rg(r,i);break;case"textarea":G2(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ia(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ia(r,!!i.multiple,i.defaultValue,!0):ia(r,!!i.multiple,i.multiple?[]:"",!1))}r[Kc]=i}catch(x){Ct(t,t.return,x)}}break;case 6:if(ys(e,t),Ls(t),s&4){if(t.stateNode===null)throw Error(le(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(x){Ct(t,t.return,x)}}break;case 3:if(ys(e,t),Ls(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Hc(e.containerInfo)}catch(x){Ct(t,t.return,x)}break;case 4:ys(e,t),Ls(t);break;case 13:ys(e,t),Ls(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(sb=Mt())),s&4&&Bv(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(hn=(c=hn)||u,ys(e,t),hn=c):ys(e,t),Ls(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(xe=t,u=t.child;u!==null;){for(d=xe=u;xe!==null;){switch(f=xe,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ec(4,f,f.return);break;case 1:Qo(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){Ct(s,n,x)}}break;case 5:Qo(f,f.return);break;case 22:if(f.memoizedState!==null){Uv(d);continue}}p!==null?(p.return=f,xe=p):Uv(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=X2("display",o))}catch(x){Ct(t,t.return,x)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){Ct(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ys(e,t),Ls(t),s&4&&Bv(t);break;case 21:break;default:ys(e,t),Ls(t)}}function Ls(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(kC(n)){var s=n;break e}n=n.return}throw Error(le(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Bc(r,""),s.flags&=-33);var i=zv(t);pm(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=zv(t);fm(t,a,o);break;default:throw Error(le(161))}}catch(l){Ct(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SM(t,e,n){xe=t,CC(t)}function CC(t,e,n){for(var s=(t.mode&1)!==0;xe!==null;){var r=xe,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||cd;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||hn;a=cd;var c=hn;if(cd=o,(hn=l)&&!c)for(xe=r;xe!==null;)o=xe,l=o.child,o.tag===22&&o.memoizedState!==null?Wv(r):l!==null?(l.return=o,xe=l):Wv(r);for(;i!==null;)xe=i,CC(i),i=i.sibling;xe=r,cd=a,hn=c}$v(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,xe=i):$v(t)}}function $v(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||Hf(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!hn)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ks(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Cv(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Hc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}hn||e.flags&512&&hm(e)}catch(f){Ct(e,e.return,f)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function Uv(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function Wv(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hf(4,e)}catch(l){Ct(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Ct(e,r,l)}}var i=e.return;try{hm(e)}catch(l){Ct(e,i,l)}break;case 5:var o=e.return;try{hm(e)}catch(l){Ct(e,o,l)}}}catch(l){Ct(e,e.return,l)}if(e===t){xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,xe=a;break}xe=e.return}}var _M=Math.ceil,Gh=Ar.ReactCurrentDispatcher,tb=Ar.ReactCurrentOwner,ps=Ar.ReactCurrentBatchConfig,Ke=0,Gt=null,Lt=null,tn=0,$n=0,Jo=_i(0),Bt=0,tu=null,ho=0,Vf=0,nb=0,Pc=null,Mn=null,sb=0,Va=1/0,ur=null,qh=!1,gm=null,hi=null,ud=!1,ni=null,Kh=0,Tc=0,mm=null,ih=-1,oh=0;function vn(){return Ke&6?Mt():ih!==-1?ih:ih=Mt()}function fi(t){return t.mode&1?Ke&2&&tn!==0?tn&-tn:aM.transition!==null?(oh===0&&(oh=c_()),oh):(t=st,t!==0||(t=window.event,t=t===void 0?16:m_(t.type)),t):1}function Ns(t,e,n,s){if(50<Tc)throw Tc=0,mm=null,Error(le(185));_u(t,n,s),(!(Ke&2)||t!==Gt)&&(t===Gt&&(!(Ke&2)&&(Vf|=n),Bt===4&&Xr(t,tn)),Ln(t,s),n===1&&Ke===0&&!(e.mode&1)&&(Va=Mt()+500,$f&&Ci()))}function Ln(t,e){var n=t.callbackNode;aT(t,e);var s=Ah(t,t===Gt?tn:0);if(s===0)n!==null&&Jy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Jy(n),e===1)t.tag===0?oM(Hv.bind(null,t)):D_(Hv.bind(null,t)),nM(function(){!(Ke&6)&&Ci()}),n=null;else{switch(u_(s)){case 1:n=Mx;break;case 4:n=a_;break;case 16:n=Nh;break;case 536870912:n=l_;break;default:n=Nh}n=RC(n,EC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function EC(t,e){if(ih=-1,oh=0,Ke&6)throw Error(le(327));var n=t.callbackNode;if(ua()&&t.callbackNode!==n)return null;var s=Ah(t,t===Gt?tn:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Xh(t,s);else{e=s;var r=Ke;Ke|=2;var i=TC();(Gt!==t||tn!==e)&&(ur=null,Va=Mt()+500,eo(t,e));do try{PM();break}catch(a){PC(t,a)}while(!0);Ux(),Gh.current=i,Ke=r,Lt!==null?e=0:(Gt=null,tn=0,e=Bt)}if(e!==0){if(e===2&&(r=Wg(t),r!==0&&(s=r,e=xm(t,r))),e===1)throw n=tu,eo(t,0),Xr(t,s),Ln(t,Mt()),n;if(e===6)Xr(t,s);else{if(r=t.current.alternate,!(s&30)&&!CM(r)&&(e=Xh(t,s),e===2&&(i=Wg(t),i!==0&&(s=i,e=xm(t,i))),e===1))throw n=tu,eo(t,0),Xr(t,s),Ln(t,Mt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(le(345));case 2:Di(t,Mn,ur);break;case 3:if(Xr(t,s),(s&130023424)===s&&(e=sb+500-Mt(),10<e)){if(Ah(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){vn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Qg(Di.bind(null,t,Mn,ur),e);break}Di(t,Mn,ur);break;case 4:if(Xr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Is(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Mt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*_M(s/1960))-s,10<s){t.timeoutHandle=Qg(Di.bind(null,t,Mn,ur),s);break}Di(t,Mn,ur);break;case 5:Di(t,Mn,ur);break;default:throw Error(le(329))}}}return Ln(t,Mt()),t.callbackNode===n?EC.bind(null,t):null}function xm(t,e){var n=Pc;return t.current.memoizedState.isDehydrated&&(eo(t,e).flags|=256),t=Xh(t,e),t!==2&&(e=Mn,Mn=n,e!==null&&bm(e)),t}function bm(t){Mn===null?Mn=t:Mn.push.apply(Mn,t)}function CM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!As(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xr(t,e){for(e&=~nb,e&=~Vf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Is(e),s=1<<n;t[n]=-1,e&=~s}}function Hv(t){if(Ke&6)throw Error(le(327));ua();var e=Ah(t,0);if(!(e&1))return Ln(t,Mt()),null;var n=Xh(t,e);if(t.tag!==0&&n===2){var s=Wg(t);s!==0&&(e=s,n=xm(t,s))}if(n===1)throw n=tu,eo(t,0),Xr(t,e),Ln(t,Mt()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Di(t,Mn,ur),Ln(t,Mt()),null}function rb(t,e){var n=Ke;Ke|=1;try{return t(e)}finally{Ke=n,Ke===0&&(Va=Mt()+500,$f&&Ci())}}function fo(t){ni!==null&&ni.tag===0&&!(Ke&6)&&ua();var e=Ke;Ke|=1;var n=ps.transition,s=st;try{if(ps.transition=null,st=1,t)return t()}finally{st=s,ps.transition=n,Ke=e,!(Ke&6)&&Ci()}}function ib(){$n=Jo.current,xt(Jo)}function eo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tM(n)),Lt!==null)for(n=Lt.return;n!==null;){var s=n;switch(zx(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&jh();break;case 3:Wa(),xt(On),xt(fn),qx();break;case 5:Gx(s);break;case 4:Wa();break;case 13:xt(wt);break;case 19:xt(wt);break;case 10:Wx(s.type._context);break;case 22:case 23:ib()}n=n.return}if(Gt=t,Lt=t=pi(t.current,null),tn=$n=e,Bt=0,tu=null,nb=Vf=ho=0,Mn=Pc=null,Hi!==null){for(e=0;e<Hi.length;e++)if(n=Hi[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}Hi=null}return t}function PC(t,e){do{var n=Lt;try{if(Ux(),nh.current=Yh,Vh){for(var s=kt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Vh=!1}if(uo=0,Ut=Ft=kt=null,Cc=!1,Jc=0,tb.current=null,n===null||n.return===null){Bt=1,tu=e,Lt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=tn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Nv(o);if(p!==null){p.flags&=-257,Av(p,o,a,i,e),p.mode&1&&Iv(i,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var x=new Set;x.add(l),e.updateQueue=x}else g.add(l);break e}else{if(!(e&1)){Iv(i,c,e),ob();break e}l=Error(le(426))}}else if(bt&&a.mode&1){var w=Nv(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Av(w,o,a,i,e),Bx(Ha(l,a));break e}}i=l=Ha(l,a),Bt!==4&&(Bt=2),Pc===null?Pc=[i]:Pc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=uC(i,l,e);_v(i,m);break e;case 1:a=l;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(hi===null||!hi.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=dC(i,a,e);_v(i,b);break e}}i=i.return}while(i!==null)}IC(n)}catch(S){e=S,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(!0)}function TC(){var t=Gh.current;return Gh.current=Yh,t===null?Yh:t}function ob(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Gt===null||!(ho&268435455)&&!(Vf&268435455)||Xr(Gt,tn)}function Xh(t,e){var n=Ke;Ke|=2;var s=TC();(Gt!==t||tn!==e)&&(ur=null,eo(t,e));do try{EM();break}catch(r){PC(t,r)}while(!0);if(Ux(),Ke=n,Gh.current=s,Lt!==null)throw Error(le(261));return Gt=null,tn=0,Bt}function EM(){for(;Lt!==null;)MC(Lt)}function PM(){for(;Lt!==null&&!J4();)MC(Lt)}function MC(t){var e=AC(t.alternate,t,$n);t.memoizedProps=t.pendingProps,e===null?IC(t):Lt=e,tb.current=null}function IC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vM(n,e),n!==null){n.flags&=32767,Lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bt=6,Lt=null;return}}else if(n=yM(n,e,$n),n!==null){Lt=n;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=t}while(e!==null);Bt===0&&(Bt=5)}function Di(t,e,n){var s=st,r=ps.transition;try{ps.transition=null,st=1,TM(t,e,n,s)}finally{ps.transition=r,st=s}return null}function TM(t,e,n,s){do ua();while(ni!==null);if(Ke&6)throw Error(le(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(lT(t,i),t===Gt&&(Lt=Gt=null,tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ud||(ud=!0,RC(Nh,function(){return ua(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ps.transition,ps.transition=null;var o=st;st=1;var a=Ke;Ke|=4,tb.current=null,kM(t,n),_C(n,t),qT(Kg),Rh=!!qg,Kg=qg=null,t.current=n,SM(n),Z4(),Ke=a,st=o,ps.transition=i}else t.current=n;if(ud&&(ud=!1,ni=t,Kh=r),i=t.pendingLanes,i===0&&(hi=null),nT(n.stateNode),Ln(t,Mt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(qh)throw qh=!1,t=gm,gm=null,t;return Kh&1&&t.tag!==0&&ua(),i=t.pendingLanes,i&1?t===mm?Tc++:(Tc=0,mm=t):Tc=0,Ci(),null}function ua(){if(ni!==null){var t=u_(Kh),e=ps.transition,n=st;try{if(ps.transition=null,st=16>t?16:t,ni===null)var s=!1;else{if(t=ni,ni=null,Kh=0,Ke&6)throw Error(le(331));var r=Ke;for(Ke|=4,xe=t.current;xe!==null;){var i=xe,o=i.child;if(xe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(xe=c;xe!==null;){var u=xe;switch(u.tag){case 0:case 11:case 15:Ec(8,u,i)}var d=u.child;if(d!==null)d.return=u,xe=d;else for(;xe!==null;){u=xe;var f=u.sibling,p=u.return;if(wC(u),u===c){xe=null;break}if(f!==null){f.return=p,xe=f;break}xe=p}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}xe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,xe=o;else e:for(;xe!==null;){if(i=xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ec(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,xe=m;break e}xe=i.return}}var y=t.current;for(xe=y;xe!==null;){o=xe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,xe=v;else e:for(o=y;xe!==null;){if(a=xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hf(9,a)}}catch(S){Ct(a,a.return,S)}if(a===o){xe=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,xe=b;break e}xe=a.return}}if(Ke=r,Ci(),Qs&&typeof Qs.onPostCommitFiberRoot=="function")try{Qs.onPostCommitFiberRoot(Lf,t)}catch{}s=!0}return s}finally{st=n,ps.transition=e}}return!1}function Vv(t,e,n){e=Ha(n,e),e=uC(t,e,1),t=di(t,e,1),e=vn(),t!==null&&(_u(t,1,e),Ln(t,e))}function Ct(t,e,n){if(t.tag===3)Vv(t,t,n);else for(;e!==null;){if(e.tag===3){Vv(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(hi===null||!hi.has(s))){t=Ha(n,t),t=dC(e,t,1),e=di(e,t,1),t=vn(),e!==null&&(_u(e,1,t),Ln(e,t));break}}e=e.return}}function MM(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,Gt===t&&(tn&n)===n&&(Bt===4||Bt===3&&(tn&130023424)===tn&&500>Mt()-sb?eo(t,0):nb|=n),Ln(t,e)}function NC(t,e){e===0&&(t.mode&1?(e=ed,ed<<=1,!(ed&130023424)&&(ed=4194304)):e=1);var n=vn();t=Tr(t,e),t!==null&&(_u(t,e,n),Ln(t,n))}function IM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),NC(t,n)}function NM(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(le(314))}s!==null&&s.delete(e),NC(t,n)}var AC;AC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||On.current)An=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return An=!1,bM(t,e,n);An=!!(t.flags&131072)}else An=!1,bt&&e.flags&1048576&&L_(e,Bh,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;rh(t,e),t=e.pendingProps;var r=Ba(e,fn.current);ca(e,n),r=Xx(null,e,s,t,r,n);var i=Qx();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(s)?(i=!0,Fh(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Vx(e),r.updater=Wf,e.stateNode=r,r._reactInternals=e,rm(e,s,t,n),e=am(null,e,s,!0,i,n)):(e.tag=0,bt&&i&&Fx(e),yn(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(rh(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=RM(s),t=ks(s,t),r){case 0:e=om(null,e,s,t,n);break e;case 1:e=Dv(null,e,s,t,n);break e;case 11:e=Rv(null,e,s,t,n);break e;case 14:e=Ov(null,e,s,ks(s.type,t),n);break e}throw Error(le(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ks(s,r),om(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ks(s,r),Dv(t,e,s,r,n);case 3:e:{if(gC(e),t===null)throw Error(le(387));s=e.pendingProps,i=e.memoizedState,r=i.element,U_(t,e),Wh(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Ha(Error(le(423)),e),e=Lv(t,e,s,n,r);break e}else if(s!==r){r=Ha(Error(le(424)),e),e=Lv(t,e,s,n,r);break e}else for(Wn=ui(e.stateNode.containerInfo.firstChild),Hn=e,bt=!0,Es=null,n=B_(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($a(),s===r){e=Mr(t,e,n);break e}yn(t,e,s,n)}e=e.child}return e;case 5:return W_(e),t===null&&tm(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Xg(s,r)?o=null:i!==null&&Xg(s,i)&&(e.flags|=32),pC(t,e),yn(t,e,o,n),e.child;case 6:return t===null&&tm(e),null;case 13:return mC(t,e,n);case 4:return Yx(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ua(e,null,s,n):yn(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ks(s,r),Rv(t,e,s,r,n);case 7:return yn(t,e,e.pendingProps,n),e.child;case 8:return yn(t,e,e.pendingProps.children,n),e.child;case 12:return yn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,ft($h,s._currentValue),s._currentValue=o,i!==null)if(As(i.value,o)){if(i.children===r.children&&!On.current){e=Mr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=Sr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),nm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),nm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}yn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,ca(e,n),r=gs(r),s=s(r),e.flags|=1,yn(t,e,s,n),e.child;case 14:return s=e.type,r=ks(s,e.pendingProps),r=ks(s.type,r),Ov(t,e,s,r,n);case 15:return hC(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ks(s,r),rh(t,e),e.tag=1,Dn(s)?(t=!0,Fh(e)):t=!1,ca(e,n),cC(e,s,r),rm(e,s,r,n),am(null,e,s,!0,t,n);case 19:return xC(t,e,n);case 22:return fC(t,e,n)}throw Error(le(156,e.tag))};function RC(t,e){return o_(t,e)}function AM(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(t,e,n,s){return new AM(t,e,n,s)}function ab(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RM(t){if(typeof t=="function")return ab(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ex)return 11;if(t===Px)return 14}return 2}function pi(t,e){var n=t.alternate;return n===null?(n=ds(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ah(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")ab(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Uo:return to(n.children,r,i,e);case Cx:o=8,r|=8;break;case Tg:return t=ds(12,n,e,r|2),t.elementType=Tg,t.lanes=i,t;case Mg:return t=ds(13,n,e,r),t.elementType=Mg,t.lanes=i,t;case Ig:return t=ds(19,n,e,r),t.elementType=Ig,t.lanes=i,t;case W2:return Yf(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $2:o=10;break e;case U2:o=9;break e;case Ex:o=11;break e;case Px:o=14;break e;case Gr:o=16,s=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=ds(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function to(t,e,n,s){return t=ds(7,t,s,e),t.lanes=n,t}function Yf(t,e,n,s){return t=ds(22,t,s,e),t.elementType=W2,t.lanes=n,t.stateNode={isHidden:!1},t}function fp(t,e,n){return t=ds(6,t,null,e),t.lanes=n,t}function pp(t,e,n){return e=ds(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OM(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q0(0),this.expirationTimes=q0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q0(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function lb(t,e,n,s,r,i,o,a,l){return t=new OM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ds(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vx(i),t}function DM(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$o,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function OC(t){if(!t)return yi;t=t._reactInternals;e:{if(_o(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Dn(n))return O_(t,n,e)}return e}function DC(t,e,n,s,r,i,o,a,l){return t=lb(n,s,!0,t,r,i,o,a,l),t.context=OC(null),n=t.current,s=vn(),r=fi(n),i=Sr(s,r),i.callback=e??null,di(n,i,r),t.current.lanes=r,_u(t,r,s),Ln(t,s),t}function Gf(t,e,n,s){var r=e.current,i=vn(),o=fi(r);return n=OC(n),e.context===null?e.context=n:e.pendingContext=n,e=Sr(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=di(r,e,o),t!==null&&(Ns(t,r,o,i),th(t,r,o)),o}function Qh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cb(t,e){Yv(t,e),(t=t.alternate)&&Yv(t,e)}function LM(){return null}var LC=typeof reportError=="function"?reportError:function(t){console.error(t)};function ub(t){this._internalRoot=t}qf.prototype.render=ub.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));Gf(t,e,null,null)};qf.prototype.unmount=ub.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fo(function(){Gf(null,t,null,null)}),e[Pr]=null}};function qf(t){this._internalRoot=t}qf.prototype.unstable_scheduleHydration=function(t){if(t){var e=f_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kr.length&&e!==0&&e<Kr[n].priority;n++);Kr.splice(n,0,t),n===0&&g_(t)}};function db(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gv(){}function jM(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=Qh(o);i.call(c)}}var o=DC(e,s,t,0,null,!1,!1,"",Gv);return t._reactRootContainer=o,t[Pr]=o.current,Gc(t.nodeType===8?t.parentNode:t),fo(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=Qh(l);a.call(c)}}var l=lb(t,0,!1,null,null,!1,!1,"",Gv);return t._reactRootContainer=l,t[Pr]=l.current,Gc(t.nodeType===8?t.parentNode:t),fo(function(){Gf(e,l,n,s)}),l}function Xf(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Qh(o);a.call(l)}}Gf(e,o,t,r)}else o=jM(n,e,t,r,s);return Qh(o)}d_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ic(e.pendingLanes);n!==0&&(Ix(e,n|1),Ln(e,Mt()),!(Ke&6)&&(Va=Mt()+500,Ci()))}break;case 13:fo(function(){var s=Tr(t,1);if(s!==null){var r=vn();Ns(s,t,1,r)}}),cb(t,1)}};Nx=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=vn();Ns(e,t,134217728,n)}cb(t,134217728)}};h_=function(t){if(t.tag===13){var e=fi(t),n=Tr(t,e);if(n!==null){var s=vn();Ns(n,t,e,s)}cb(t,e)}};f_=function(){return st};p_=function(t,e){var n=st;try{return st=t,e()}finally{st=n}};Bg=function(t,e,n){switch(e){case"input":if(Rg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Bf(s);if(!r)throw Error(le(90));V2(s),Rg(s,r)}}}break;case"textarea":G2(t,n);break;case"select":e=n.value,e!=null&&ia(t,!!n.multiple,e,!1)}};e_=rb;t_=fo;var FM={usingClientEntryPoint:!1,Events:[Eu,Yo,Bf,J2,Z2,rb]},Ol={findFiberByHostInstance:Wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zM={bundleType:Ol.bundleType,version:Ol.version,rendererPackageName:Ol.rendererPackageName,rendererConfig:Ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=r_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ol.findFiberByHostInstance||LM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{Lf=dd.inject(zM),Qs=dd}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FM;Qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!db(e))throw Error(le(200));return DM(t,e,null,n)};Qn.createRoot=function(t,e){if(!db(t))throw Error(le(299));var n=!1,s="",r=LC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=lb(t,1,!1,null,null,n,!1,s,r),t[Pr]=e.current,Gc(t.nodeType===8?t.parentNode:t),new ub(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=r_(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return fo(t)};Qn.hydrate=function(t,e,n){if(!Kf(e))throw Error(le(200));return Xf(null,t,e,!0,n)};Qn.hydrateRoot=function(t,e,n){if(!db(t))throw Error(le(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=LC;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=DC(e,null,t,1,n??null,r,!1,i,o),t[Pr]=e.current,Gc(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new qf(e)};Qn.render=function(t,e,n){if(!Kf(e))throw Error(le(200));return Xf(null,t,e,!1,n)};Qn.unmountComponentAtNode=function(t){if(!Kf(t))throw Error(le(40));return t._reactRootContainer?(fo(function(){Xf(null,null,t,!1,function(){t._reactRootContainer=null,t[Pr]=null})}),!0):!1};Qn.unstable_batchedUpdates=rb;Qn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Kf(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return Xf(t,e,n,!1,s)};Qn.version="18.3.1-next-f1338f8080-20240426";function jC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jC)}catch(t){console.error(t)}}jC(),j2.exports=Qn;var Ei=j2.exports;const BM=C2(Ei);var qv=Ei;Eg.createRoot=qv.createRoot,Eg.hydrateRoot=qv.hydrateRoot;class hb{constructor(e,n=3,s=3e4){re(this,"baseURL");re(this,"timeout");re(this,"maxRetries");this.baseURL=e.replace(/\/$/,""),this.maxRetries=n,this.timeout=s}async do(e){const n=Date.now();let s=null;for(let r=1;r<=this.maxRetries;r++)try{return{...await this.doRequest(e),duration:Date.now()-n}}catch(i){if(s=i,this.isNonceError(i))throw i;if(r<this.maxRetries){const o=r*1e3;await this.delay(o)}}throw new Error(`Request failed after ${this.maxRetries} attempts: ${s==null?void 0:s.message}`)}async doRequest(e){const n=`${this.baseURL}${e.path}`,s={"Content-Type":"application/json",Accept:"application/json, */*",...e.headers},r={method:e.method,headers:s,signal:AbortSignal.timeout(this.timeout)};e.body&&e.method!=="GET"?r.body=JSON.stringify(e.body):e.method==="GET"&&(r.body=void 0);const i=await fetch(n,r);let o;const a=i.headers.get("content-type");if(a!=null&&a.includes("application/json"))try{o=await i.json()}catch{o=await i.text()}else o=await i.text();if(i.status>=400)throw new Error(`HTTP ${i.status}: ${JSON.stringify(o)}`);return{statusCode:i.status,body:o,headers:i.headers}}isNonceError(e){const n=(e==null?void 0:e.message)||"";return n.toLowerCase().includes("nonce")||n.includes("InvalidNonce")||n.includes("NonceError")}delay(e){return new Promise(n=>setTimeout(n,e))}async get(e,n){return this.do({method:"GET",path:e,headers:n})}async post(e,n,s){return this.do({method:"POST",path:e,body:n,headers:s})}async put(e,n,s){return this.do({method:"PUT",path:e,body:n,headers:s})}async delete(e,n){return this.do({method:"DELETE",path:e,headers:n})}getBaseURL(){return this.baseURL}setTimeout(e){this.timeout=e}getTimeout(){return this.timeout}}const da=1e8;function dt(t){const e=typeof t=="string"?parseFloat(t):t;if(isNaN(e))throw new Error(`Invalid value for satoshi conversion: ${t}`);if(e<0)throw new Error(`Negative values not allowed for satoshi conversion: ${t}`);return BigInt(Math.floor(e*da)).toString()}function Te(t){const e=BigInt(t);return Number(e)/da}function FC(t){if(t<0)throw new Error(`Negative values not allowed: ${t}`);return Math.floor(t*da)}function Kv(t){try{return BigInt(t)>=0n}catch{return!1}}function $M(t){return t.map(dt)}function UM(t){return t.map(Te)}function Xv(t){return`0x${(typeof t=="string"?parseInt(t,10):t).toString(16)}`}let Dl={instance:null,module:null},WM=null;async function HM(){try{if(window.Go)console.log("wasm_exec.js already loaded");else{console.log("Loading wasm_exec.js...");const a=["/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.21.0/misc/wasm/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.20.0/misc/wasm/wasm_exec.js","https://unpkg.com/@go-wasm/wasm_exec@latest/wasm_exec.js"];let l=!1,c=null;for(const u of a)try{console.log(`Trying to load wasm_exec.js from: ${u}`),await new Promise((d,f)=>{const p=document.createElement("script");p.src=u,p.async=!0,p.onload=()=>{console.log(`Successfully loaded wasm_exec.js from: ${u}`),d()},p.onerror=()=>{f(new Error(`Failed to load from ${u}`))},document.head.appendChild(p)}),l=!0;break}catch(d){console.warn(`Failed to load from ${u}:`,d==null?void 0:d.message),c=d,document.head.querySelectorAll(`script[src="${u}"]`).forEach(p=>p.remove())}if(!l)throw new Error(`Failed to load wasm_exec.js from all sources. Last error: ${(c==null?void 0:c.message)||"Unknown error"}. Please ensure wasm_exec.js is available. You can download it from: https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.js`);console.log("wasm_exec.js loaded successfully")}const t=window.Go;if(!t)throw new Error("Go runtime not available. Make sure wasm_exec.js is loaded.");console.log("Go runtime available");const e=new t;WM=e,console.log("Go instance created");const n="/morm_signer.wasm";console.log("Loading WASM from:",n);let s;try{const a=await fetch(n);if(console.log("WASM fetch response:",{status:a.status,statusText:a.statusText,ok:a.ok,url:a.url}),!a.ok){const l=await a.text().catch(()=>"Unable to read error response");throw new Error(`Failed to load WASM from ${n}: ${a.status} ${a.statusText}. Make sure the morm_signer.wasm file is available in the public directory.`)}s=await a.arrayBuffer(),console.log("WASM file loaded successfully, size:",s.byteLength,"bytes")}catch(a){throw console.error("WASM fetch failed:",a),new Error(`Failed to fetch WASM file: ${(a==null?void 0:a.message)||a}. The file should be accessible at ${window.location.origin}${n}`)}console.log("Instantiating WASM module...");let r;try{r=await WebAssembly.instantiate(s,e.importObject),console.log("WASM module instantiated successfully")}catch(a){throw console.error("Failed to instantiate WASM:",a),new Error(`Failed to instantiate WASM module: ${(a==null?void 0:a.message)||a}. The WASM file may be corrupted or incompatible.`)}Dl.instance=r.instance,Dl.module=r.module,console.log("Running Go program..."),console.log("Window object before Go run:",Object.keys(window).filter(a=>typeof window[a]=="function"&&(a.startsWith("morm")||a.startsWith("derive")||a.startsWith("generate")||a==="Go")));try{e.run(Dl.instance),console.log("Go program started (run() completed)")}catch(a){throw console.error("Failed to run Go program:",a),new Error(`Failed to run Go program: ${(a==null?void 0:a.message)||a}. The WASM module may not be compatible with the current Go runtime.`)}console.log("Waiting for Go initialization and function exports...");const i=10;let o=[];for(let a=1;a<=i;a++){const l=Math.min(a*200,2e3);await new Promise(u=>setTimeout(u,l));const c=Object.keys(window).filter(u=>typeof window[u]=="function");if(o=c.filter(u=>u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u.startsWith("verify")||u.startsWith("map")||u.startsWith("validate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"),console.log(`Attempt ${a}/${i}:`,{waitTime:`${l}ms`,allWindowFunctions:c.length,exportedFunctions:o,sampleWindowKeys:c.slice(0,20)}),o.length>0){console.log(" Go functions found!",o);break}a===i&&(console.warn(" No expected functions found. All window functions:",c.sort()),console.warn(" Check if functions are exported with different names or if there are Go runtime errors"))}if(o.length===0){const a=[],l=Object.keys(window);if(console.error("Debugging info:",{totalWindowKeys:l.length,allFunctions:l.filter(c=>typeof window[c]=="function"),hasGo:typeof window.Go=="function",wasmInstance:Dl.instance!==null,wasmModule:Dl.module!==null}),typeof window.InitWASMSigner=="function"){console.log("Found InitWASMSigner function, calling it...");try{window.InitWASMSigner(),await new Promise(u=>setTimeout(u,500));const c=Object.keys(window).filter(u=>typeof window[u]=="function"&&(u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"));c.length>0&&(console.log(" Functions found after InitWASMSigner!",c),o=c)}catch(c){console.error("Failed to call InitWASMSigner:",c)}}if(o.length===0)throw new Error(`Go functions not exported after initialization.

ROOT CAUSE: The Go main() function in main_wasm.go does not call InitWASMSigner(), which is required to export functions via js.Global().Set().

SOLUTION: The Go code needs to be fixed. In main_wasm.go, the main() function should call:
  InitWASMSigner(CreateTestnetDomain()) // or appropriate domain

Current status:
- WASM file loaded: 
- Go runtime loaded: ${typeof window.Go=="function"?"":""}
- Go program run: 
- Functions exported: 

Check the browser console for detailed debugging information.`)}return console.log("WASM module loaded and initialized successfully"),!0}catch(t){throw console.error("Failed to load WASM module:",t),new Error((t==null?void 0:t.message)||`Failed to load WASM module: ${String(t)}`)}}class VM{constructor(){re(this,"isInitialized",!1);re(this,"wasmLoaded",!1)}async initialize(){try{return this.wasmLoaded=await HM(),this.isInitialized=this.wasmLoaded,this.wasmLoaded}catch(e){throw console.error("Failed to initialize MormSigner:",e),new Error((e==null?void 0:e.message)||"Failed to initialize WASM module")}}isReady(){return this.isInitialized&&this.wasmLoaded&&typeof window.mormGenerateEthereumKeypair=="function"&&typeof window.GenerateSingleSignature=="function"&&typeof window.GenerateMultisignSignatures=="function"&&typeof window.GetSupportedSignatureTypes=="function"&&typeof window.IsSignatureTypeSupported=="function"}async generateAddress(e,n=0){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=window.deriveAddress(e,n);return typeof s=="string"?{success:!0,address:s,index:n,mnemonic:e.substring(0,20)+"..."}:s&&s.error?{success:!1,error:s.error}:{success:!1,error:"Failed to derive address"}}catch(s){return console.error("Failed to generate address:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async generateMnemonic(e=12){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.generateMnemonic(e);return typeof n=="string"?{success:!0,mnemonic:n}:n&&n.error?{success:!1,error:n.error}:{success:!1,error:"Failed to generate mnemonic"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async generateKeypair(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const e=window.mormGenerateEthereumKeypair();return e.error?{success:!1,error:e.error}:{success:!0,privateKey:e.privateKey,address:e.address}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async signMessage(e,n,s={}){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=(s.useEIP712,"ECDSA_LEGACY"),i=window.generateSignature(r,e,n);return typeof i=="string"?{success:!0,signature:i,message:n,options:s}:i&&i.error?{success:!1,error:i.error}:{success:!1,error:"Failed to generate signature"}}catch(r){return console.error("Failed to sign message:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async signDeposit(e,n,s,r={}){const i={...r,depositMode:!0,walletAddress:n,amount:s},o=JSON.stringify({action:"deposit",owner:n,amount:s,nonce:r.nonce||Date.now(),deadline:r.deadline||Date.now()+36e5}),a=await this.signMessage(e,o,i);return{success:a.success,signature:a.signature,message:a.message,address:n,options:a.options,error:a.error}}async signEIP712(e,n,s={}){const r={...s,useEIP712:!0};return this.signMessage(e,n,r)}async prepareAgentSign(e){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.mormPrepareAgentSign(e.owner,e.agent,e.expiresInDays,e.permissions,e.nonce);return n&&n.error?{success:!1,error:n.error}:{success:!0,typedData:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async signAgentApproval(e,n){const s=await this.prepareAgentSign(n);if(!s.success||!s.typedData)return s;const r=JSON.stringify({action:"agent::approve",wallet:n.owner,agent:n.agent,agentName:n.agentName||"",expiresInDays:n.expiresInDays,permissions:n.permissions,nonce:n.nonce,deadline:Date.now()+n.expiresInDays*24*60*60*1e3}),i=await this.signMessage(e,r,{useEIP712:!0});return i.success?{success:!0,typedData:s.typedData,signature:i.signature}:{success:!1,error:i.error}}async verifySignature(e,n,s){if(!this.isReady())throw new Error("MormSigner not initialized");try{const r=window.verifySignature(e,n,s);return typeof r=="boolean"?r:!1}catch(r){return console.error("Failed to verify signature:",r),!1}}mapAlgorithm(e){if(!this.isReady())return"ECDSA_LEGACY";try{return window.mapAlgorithm(e)}catch(n){return console.error("Failed to map algorithm:",n),"ECDSA_LEGACY"}}validateNonce(e,n){if(!this.isReady())return!1;try{return window.validateNonce(e,n)}catch(s){return console.error("Failed to validate nonce:",s),!1}}getStatus(){return{initialized:this.isInitialized,wasmLoaded:this.wasmLoaded,ready:this.isReady()}}async generateSingleSignature(e,n,s){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateSingleSignature(e,n,s);return r.error?{success:!1,error:r.error}:{success:!0,signature:r.signature}}catch(r){return console.error("Failed to generate single signature:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async generateMultisignSignatures(e,n,s=!1){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateMultisignSignatures(e,n,s);if(r.error)return{success:!1,error:r.error};let i=null;if(r.tx)try{i=JSON.parse(r.tx)}catch(o){console.warn("Failed to parse updated transaction JSON:",o)}return{success:!0,tx:i,txJSON:r.tx}}catch(r){return console.error("Failed to generate multisign signatures:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}getSupportedSignatureTypes(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{return{success:!0,types:window.GetSupportedSignatureTypes()}}catch(e){return console.error("Failed to get supported signature types:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}isSignatureTypeSupported(e){if(!this.isReady())return!1;try{return window.IsSignatureTypeSupported(e)}catch(n){return console.error("Failed to check signature type support:",n),!1}}}const Ae=new VM,YM=6e4,Qv=100,gp=24*60*60*1e3,mp=1;class zC{constructor(e){re(this,"infoClient");re(this,"onChainState",new Map);re(this,"offChainNonces",new Map);re(this,"syncTimers",new Map);this.infoClient=e}getOrCreateState(e){const n=e.toLowerCase();let s=this.onChainState.get(n);return s||(s={confirmed:0,pending:[],lastSync:0,mu:!1},this.onChainState.set(n,s)),s}async acquireLock(e){for(;e.mu;)await new Promise(n=>setTimeout(n,10));e.mu=!0}releaseLock(e){e.mu=!1}async syncWithCore(e){const n=this.getOrCreateState(e),s=Date.now();if(!(s-n.lastSync<YM))try{const r=await this.infoClient.getNonceStatus(e,!1),i=(r==null?void 0:r.next_nonce)!==void 0?typeof r.next_nonce=="string"?parseInt(r.next_nonce,10):r.next_nonce:0;n.confirmed=i,n.lastSync=s}catch(r){console.warn(`[NonceManager] Failed to sync with core for ${e}:`,r)}}async getNonce(e,n="latest"){const s=e.toLowerCase(),r=this.getOrCreateState(s);if(await this.syncWithCore(s),n==="latest")return r.confirmed;{const i=r.pending.length>0?Math.max(...r.pending):r.confirmed;return Math.max(r.confirmed,i)}}async validateNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{if(s||await this.syncWithCore(r),i.confirmed===0&&n<mp)throw new Error(`nonce too low for new account: got ${n}, minimum ${mp}`);if(i.confirmed>0&&n<=i.confirmed)throw new Error(`nonce too low: got ${n}, confirmed ${i.confirmed}`);if(i.pending.includes(n))throw new Error(`nonce already pending: ${n}`);if(i.pending.length>=Qv)throw new Error(`pending nonce limit reached: max ${Qv} pending nonces`);if(s){const o=this.offChainNonces.get(r);if(o){const a=o.get(n);if(a){const l=Date.now();if(l-a<gp)throw new Error(`nonce already used (off-chain): ${n}, expires in ${Math.floor((gp-(l-a))/1e3)}s`);o.delete(n)}}}i.pending.push(n),i.pending.sort((o,a)=>o-a)}finally{this.releaseLock(i)}}async commitNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){let a=this.offChainNonces.get(r);a||(a=new Map,this.offChainNonces.set(r,a)),a.set(n,Date.now())}else if(n===i.confirmed+1)for(i.confirmed=n;i.pending.length>0&&i.pending[0]===i.confirmed+1;){const a=i.pending.shift();i.confirmed=a}}finally{this.releaseLock(i)}}async rejectNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){const a=this.offChainNonces.get(r);a&&a.delete(n)}}finally{this.releaseLock(i)}}async getExpectedNextNonce(e,n=!1){const s=e.toLowerCase();await this.syncWithCore(s);const r=this.getOrCreateState(s),i=r.pending.length>0?Math.max(...r.pending):r.confirmed,o=Math.max(r.confirmed+1,i+1),a=o===0?mp:o;if(n)try{await this.validateNonce(s,a,!1)}catch(l){console.warn(`[NonceManager] Failed to reserve nonce ${a}:`,l.message)}return{next_nonce:a,reserved:n,timestamp:Date.now()}}cleanupExpiredOffChainNonces(){const e=Date.now();for(const[n,s]of this.offChainNonces.entries()){for(const[r,i]of s.entries())e-i>=gp&&s.delete(r);s.size===0&&this.offChainNonces.delete(n)}}resetNonce(e){const n=e.toLowerCase();this.onChainState.delete(n),this.offChainNonces.delete(n);const s=this.syncTimers.get(n);s&&(clearInterval(s),this.syncTimers.delete(n))}getState(e){const n=e.toLowerCase();return this.onChainState.get(n)}}class wn{constructor(e){re(this,"httpClient");re(this,"sessionToken");this.httpClient=new hb(e.baseURL),this.sessionToken=e.sessionToken}setSessionToken(e){this.sessionToken=e}getHeaders(){const e={Accept:"application/json, */*"};return this.sessionToken&&(e.Authorization=`Bearer ${this.sessionToken}`),e}async getMarkets(){const n=(await this.httpClient.get("/market/v1/all",this.getHeaders())).body;return Array.isArray(n)?n:n&&typeof n=="object"&&"markets"in n?n.markets:[]}async getMarketsWithFilters(e,n){let s="/market/v1/all";const r=[];e&&r.push(`filter=${e}`),n&&r.push("active_only=true"),r.length>0&&(s+="?"+r.join("&"));const o=(await this.httpClient.get(s,this.getHeaders())).body;return Array.isArray(o)?o:o&&typeof o=="object"&&"markets"in o?o.markets:[]}async getMarketByID(e){return(await this.httpClient.get(`/market/v1/market/${e}`,this.getHeaders())).body}async getMarketByMoniker(e){return(await this.httpClient.get(`/market/v1/market/by-moniker/${e}`,this.getHeaders())).body}async getMarketStats(e){return(await this.httpClient.get(`/market/v1/market/${e}/stats`,this.getHeaders())).body}async getTicker(e){return this.getMarketStats(e)}async getExchangeInfo(){return(await this.httpClient.get("/market/v1/exchangeInfo",this.getHeaders())).body}async getOrderbook(e,n=!0,s=20){let r=`/clob/v1/orderbook/${e}`,i=20;s>0&&s<100&&(i=s),r+=`?depth=${i}`;const a=(await this.httpClient.get(r,this.getHeaders())).body;return n&&a&&(a.bids&&Array.isArray(a.bids)&&(a.bids=a.bids.map(([l,c])=>[Te(l),Te(c)])),a.asks&&Array.isArray(a.asks)&&(a.asks=a.asks.map(([l,c])=>[Te(l),Te(c)]))),a}async getMarketTrades(e,n){let s=`/clob/v1/trades?market_id=${e}`;n&&n>0&&(s+=`&limit=${n}`);const r=await this.httpClient.get(s,this.getHeaders());console.debug("[InfoClient] getMarketTrades response for marketId:",e,"response:",r.body);const i=r.body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:(console.warn("[InfoClient] getMarketTrades: Unexpected response structure:",r.body),[])}async getRecentTrades(e,n=100){return this.getMarketTrades(e,n)}async getTrades(e,n){let s=`/clob/v1/trades?symbol=${e}`;n&&n>0&&(s+=`&limit=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:[]}async getAggTrades(e,n,s,r){let i=`/market/v1/aggTrades?symbol=${e}`;return n&&n>0&&(i+=`&limit=${n}`),s&&s>0&&(i+=`&startTime=${s}`),r&&r>0&&(i+=`&endTime=${r}`),(await this.httpClient.get(i,this.getHeaders())).body}async getKlines(e,n,s,r,i){let o=`/clob/v1/klines?symbol=${e}&interval=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l)?l:[]}async getContinuousKlines(e,n,s,r,i,o){let a=`/market/v1/continuousKlines?pair=${e}&contractType=${n}&interval=${s}`;return r&&r>0&&(a+=`&limit=${r}`),i&&i>0&&(a+=`&startTime=${i}`),o&&o>0&&(a+=`&endTime=${o}`),(await this.httpClient.get(a,this.getHeaders())).body}async getPremiumIndex(e){let n="/market/v1/premiumIndex";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getFundingRate(e,n,s,r){let i="/market/v1/fundingRate";const o=[];e&&o.push(`symbol=${e}`),n&&n>0&&o.push(`limit=${n}`),s&&s>0&&o.push(`startTime=${s}`),r&&r>0&&o.push(`endTime=${r}`),o.length>0&&(i+="?"+o.join("&"));const l=(await this.httpClient.get(i,this.getHeaders())).body;return Array.isArray(l)?l:l&&typeof l=="object"&&"data"in l&&Array.isArray(l.data)?l.data:l?[l]:[]}async getFundingInfo(){const n=(await this.httpClient.get("/market/v1/fundingInfo",this.getHeaders())).body;return Array.isArray(n)?n:[]}async getDeliveryPrice(e){return(await this.httpClient.get(`/market/v1/deliveryPrice?pair=${e}`,this.getHeaders())).body}async getOpenInterest(e){return(await this.httpClient.get(`/market/v1/openInterest?symbol=${e}`,this.getHeaders())).body}async getTopLongShortPositionRatio(e,n,s,r,i){let o=`/market/v1/topLongShortPositionRatio?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getGlobalLongShortAccountRatio(e,n,s,r,i){let o=`/market/v1/globalLongShortAccountRatio?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getTicker24hr(e){let n="/market/v1/moniker/24hr";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getTickerPrice(e){let n="/market/v1/moniker/price";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getOrderbookMoniker(e){let n="/market/v1/moniker/bookTicker";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getBasis(e,n,s,r,i){let o=`/market/v1/basis?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getIndexInfo(e){let n="/market/v1/indexInfo";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getAssetIndex(e){let n="/market/v1/assetIndex";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getConstituents(e){return(await this.httpClient.get(`/market/v1/constituents?symbol=${e}`,this.getHeaders())).body}async getTWAP(e,n){return(await this.httpClient.get(`/market/v1/twap?symbol=${e}&duration=${n}`,this.getHeaders())).body}async getPositions(e,n){if(!e)throw new Error("walletAddress is required for getPositions");let s=`/bucket/v1/address/${e}/positions`;n!==void 0&&(s+=`?active_only=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return Array.isArray(i)?i:i&&typeof i=="object"&&"positions"in i&&Array.isArray(i.positions)?i.positions:[]}async getBalance(e,n){let s=`/bank/v1/balance/${e}?asset=${n}`;return(await this.httpClient.get(s,this.getHeaders())).body}async getBalances(e){const s=(await this.httpClient.get(`/bank/v1/balances/${e}`,this.getHeaders())).body;return s&&typeof s=="object"&&"balances"in s&&Array.isArray(s.balances)?s.balances:[]}async getBalanceDecimal(e,n){const s=await this.getBalance(e,n);if(s&&typeof s=="object"){const r={...s};return r.balance&&(r.balance=Te(r.balance)),r.available_balance&&(r.available=Te(r.available_balance),r.available_balance=Te(r.available_balance)),r.available&&typeof r.available=="string"&&(r.available=Te(r.available)),r.locked_balance&&(r.locked=Te(r.locked_balance),r.locked_balance=Te(r.locked_balance)),r.locked&&typeof r.locked=="string"&&(r.locked=Te(r.locked)),r}return s}async getOrders(e,n){let s=`/clob/v1/address/orders?address=${encodeURIComponent(e)}`;return n&&(s+=`&asset_pair=${encodeURIComponent(n)}`),(await this.httpClient.get(s,this.getHeaders())).body}async getOrder(e){return(await this.httpClient.get(`/clob/v1/order/${e}`,this.getHeaders())).body}async getOrderHistory(e){return(await this.httpClient.get(`/clob/v1/address/orders/history?address=${e}`,this.getHeaders())).body}async getUserTrades(e,n){let s=`/clob/v1/address/trades?address=${e}`;n&&(s+=`&asset_pair=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:[]}async getTradeHistory(e,n){return this.getUserTrades(e,n)}async getPosition(e,n){let s=`/clob/v1/address/position?address=${e}`;n&&(s+=`&asset_pair=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"positions"in i&&Array.isArray(i.positions)?i.positions:[]}async getBuckets(e){var s;const n=await this.httpClient.get(`/bucket/v1/address/${e}/buckets`,this.getHeaders());return(s=n.body)!=null&&s.buckets&&Array.isArray(n.body.buckets)?n.body.buckets:[]}async getBucket(e){return(await this.httpClient.get(`/bucket/v1/bucket/${e}`,this.getHeaders())).body}async getMarketData(e){return(await this.httpClient.get(`/clob/v1/market/data?asset_pair=${e}`,this.getHeaders())).body}async getMarketCandles(e,n,s){const i=(await this.httpClient.get(`/clob/v1/market/candles?asset_pair=${e}&interval=${n}&limit=${s}`,this.getHeaders())).body;return Array.isArray(i)?i:[]}async getNonceStatus(e,n=!1){let s=`/router/v1/nonce/status/${e}`;return n&&(s+="?reserve=true"),(await this.httpClient.get(s,this.getHeaders())).body}async getSupportedActions(){return(await this.httpClient.get("/router/v1/tx/supported-actions",this.getHeaders())).body}async validateAction(e){return(await this.httpClient.get(`/router/v1/tx/validate-action?action=${encodeURIComponent(e)}`,this.getHeaders())).body}async getHealthSummary(){return(await this.httpClient.get("/router/v1/health/summary",this.getHeaders())).body}async getHealthDaemons(){return(await this.httpClient.get("/router/v1/health/daemons",this.getHeaders())).body}async getHealthBucket(){return(await this.httpClient.get("/router/v1/health/bucket",this.getHeaders())).body}async getHealthOracle(){return(await this.httpClient.get("/router/v1/health/oracle",this.getHeaders())).body}async getServerTime(){return(await this.httpClient.get("/router/v1/time",this.getHeaders())).body}async getMetricsTPS(){return(await this.httpClient.get("/router/v1/metrics/tps",this.getHeaders())).body}async getMetricsLatency(){return(await this.httpClient.get("/router/v1/metrics/latency",this.getHeaders())).body}}function GM(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["nonce too low","nonce too high","nonce already used","nonce already pending","nonce invalid","nonce expired","nonce mismatch","invalid nonce","nonce out of order"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function qM(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["signature verification failed","invalid signature","unauthenticated","signature mismatch","signature invalid"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function KM(t){if(!t)return[!1,!1];const e=GM(t),n=qM(t);return[e,n]}function BC(t){const[e,n]=KM(t);return e||n}const $C="6.16.0";async function fb(t){const e=Object.keys(t);return(await Promise.all(e.map(s=>Promise.resolve(t[s])))).reduce((s,r,i)=>(s[e[i]]=r,s),{})}function Vn(t,e,n){for(let s in e){let r=e[s];Object.defineProperty(t,s,{enumerable:!0,value:r,writable:!1})}}function Zo(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Zo(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let s="0x";for(let r=0;r<t.length;r++)s+=n[t[r]>>4],s+=n[t[r]&15];return s}if(typeof t=="object"&&typeof t.toJSON=="function")return Zo(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(s=>`${Zo(s,e)}: ${Zo(t[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function XM(t,e,n){let s=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Zo(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Zo(a))}}i.push(`code=${e}`),i.push(`version=${$C}`),i.length&&(t+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(t);break;default:r=new Error(t)}return Vn(r,{code:e}),n&&Object.assign(r,n),r.shortMessage==null&&Vn(r,{shortMessage:s}),r}function qe(t,e,n,s){if(!t)throw XM(e,n,s)}function Z(t,e,n,s){qe(t,e,"INVALID_ARGUMENT",{argument:n,value:s})}const QM=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function UC(t){qe(QM.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function Qf(t,e,n){if(n==null&&(n=""),t!==e){let s=n,r="new";n&&(s+=".",r+=" "+n),qe(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function WC(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const s=new Uint8Array((t.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(t.substring(r,r+2),16),r+=2;return s}Z(!1,"invalid BytesLike value",e||"value",t)}function ve(t,e){return WC(t,e,!1)}function Bo(t,e){return WC(t,e,!0)}function tr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function Jf(t){return tr(t,!0)||t instanceof Uint8Array}const Jv="0123456789abcdef";function ge(t){const e=ve(t);let n="0x";for(let s=0;s<e.length;s++){const r=e[s];n+=Jv[(r&240)>>4]+Jv[r&15]}return n}function At(t){return"0x"+t.map(e=>ge(e).substring(2)).join("")}function Mc(t){return tr(t,!0)?(t.length-2)/2:ve(t).length}function pb(t,e,n){const s=ve(t);return n>s.length&&qe(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),ge(s.slice(e,n))}function JM(t,e,n){const s=ve(t);qe(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),r.set(s,e-s.length),ge(r)}function vi(t,e){return JM(t,e)}const Zf=BigInt(0),Bi=BigInt(1),ea=9007199254740991;function ZM(t,e){let n=ht(t,"value");const s=BigInt(Yn(e,"width")),r=Bi<<s-Bi;if(n<Zf){n=-n,qe(n<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Bi<<s)-Bi;return(~n&i)+Bi}else qe(n<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function e8(t,e){const n=gb(t,"value"),s=BigInt(Yn(e,"bits"));return n&(Bi<<s)-Bi}function ht(t,e){switch(typeof t){case"bigint":return t;case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-ea&&t<=ea,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Z(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Z(!1,"invalid BigNumberish value",e||"value",t)}function gb(t,e){const n=ht(t,e);return qe(n>=Zf,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const Zv="0123456789abcdef";function HC(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=Zv[n>>4],e+=Zv[n&15];return BigInt(e)}return ht(t)}function Yn(t,e){switch(typeof t){case"bigint":return Z(t>=-ea&&t<=ea,"overflow",e||"value",t),Number(t);case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-ea&&t<=ea,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Yn(BigInt(t),e)}catch(n){Z(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Z(!1,"invalid numeric value",e||"value",t)}function Ya(t,e){const n=gb(t,"value");let s=n.toString(16);{const r=Yn(e,"width");if(r===0&&n===Zf)return"0x";for(qe(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});s.length<r*2;)s="0"+s}return"0x"+s}function Nt(t,e){const n=gb(t,"value");if(n===Zf)return new Uint8Array(0);let s=n.toString(16);s.length%2&&(s="0"+s);const r=new Uint8Array(s.length/2);for(let i=0;i<r.length;i++){const o=i*2;r[i]=parseInt(s.substring(o,o+2),16)}return r}function t8(t){let e=ge(Jf(t)?t:Nt(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Jh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let hd=null;function n8(t){if(hd==null){hd={};for(let n=0;n<Jh.length;n++)hd[Jh[n]]=BigInt(n)}const e=hd[t];return Z(e!=null,"invalid base58 value","letter",t),e}const s8=BigInt(0),ym=BigInt(58);function r8(t){const e=ve(t);let n=HC(e),s="";for(;n;)s=Jh[Number(n%ym)]+s,n/=ym;for(let r=0;r<e.length&&!e[r];r++)s=Jh[0]+s;return s}function i8(t){let e=s8;for(let n=0;n<t.length;n++)e*=ym,e+=n8(t[n]);return e}function no(t,e){Z(typeof t=="string","invalid string value","str",t),e!=null&&(UC(e),t=t.normalize(e));let n=[];for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(r&63|128);else if((r&64512)==55296){s++;const i=t.charCodeAt(s);Z(s<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((r&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(r&63|128)}return new Uint8Array(n)}function o8(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function ew(t,e,n){let s=0;for(let r=0;r<n;r++)s=s*256+t[e+r];return s}function tw(t,e,n,s){const r=[];for(;n<e+1+s;){const i=VC(t,n);r.push(i.result),n+=i.consumed,qe(n<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:t,length:s,offset:e})}return{consumed:1+s,result:r}}function VC(t,e){qe(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=s=>{qe(s<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:s})};if(t[e]>=248){const s=t[e]-247;n(e+1+s);const r=ew(t,e+1,s);return n(e+1+s+r),tw(t,e,e+1+s,s+r)}else if(t[e]>=192){const s=t[e]-192;return n(e+1+s),tw(t,e,e+1,s)}else if(t[e]>=184){const s=t[e]-183;n(e+1+s);const r=ew(t,e+1,s);n(e+1+s+r);const i=ge(t.slice(e+1+s,e+1+s+r));return{consumed:1+s+r,result:i}}else if(t[e]>=128){const s=t[e]-128;n(e+1+s);const r=ge(t.slice(e+1,e+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:o8(t[e])}}function Tu(t){const e=ve(t,"data"),n=VC(e,0);return Z(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function nw(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function YC(t){if(Array.isArray(t)){let s=[];if(t.forEach(function(i){s=s.concat(YC(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=nw(s.length);return r.unshift(247+r.length),r.concat(s)}const e=Array.prototype.slice.call(ve(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=nw(e.length);return n.unshift(183+n.length),n.concat(e)}const sw="0123456789abcdef";function _r(t){let e="0x";for(const n of YC(t))e+=sw[n>>4],e+=sw[n&15];return e}function a8(t){const e=ve(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=ge(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}function Un(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function mb(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function GC(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Un(t.outputLen),Un(t.blockLen)}function Ga(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qC(t,e){mb(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const xp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const KC=t=>t instanceof Uint8Array,lh=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),ch=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),js=(t,e)=>t<<32-e|t>>>e,l8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!l8)throw new Error("Non little-endian hardware is not supported");const c8=async()=>{};async function rw(t,e,n){let s=Date.now();for(let r=0;r<t;r++){n(r);const i=Date.now()-s;i>=0&&i<e||(await c8(),s+=i)}}function u8(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function qa(t){if(typeof t=="string"&&(t=u8(t)),!KC(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function d8(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!KC(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}class xb{clone(){return this._cloneInto()}}const h8={}.toString;function XC(t,e){if(e!==void 0&&h8.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function e0(t){const e=s=>t().update(qa(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function f8(t=32){if(xp&&typeof xp.getRandomValues=="function")return xp.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class QC extends xb{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,GC(e);const s=qa(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ga(this),this.iHash.update(e),this}digestInto(e){Ga(this),mb(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const t0=(t,e,n)=>new QC(t,e).update(n).digest();t0.create=(t,e)=>new QC(t,e);function p8(t,e,n,s){GC(t);const r=XC({dkLen:32,asyncTick:10},s),{c:i,dkLen:o,asyncTick:a}=r;if(Un(i),Un(o),Un(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=qa(e),c=qa(n),u=new Uint8Array(o),d=t0.create(t,l),f=d._cloneInto().update(c);return{c:i,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:f}}function g8(t,e,n,s,r){return t.destroy(),e.destroy(),s&&s.destroy(),r.fill(0),n}function bb(t,e,n,s){const{c:r,dkLen:i,DK:o,PRF:a,PRFSalt:l}=p8(t,e,n,s);let c;const u=new Uint8Array(4),d=ch(u),f=new Uint8Array(a.outputLen);for(let p=1,g=0;g<i;p++,g+=a.outputLen){const x=o.subarray(g,g+a.outputLen);d.setInt32(0,p,!1),(c=l._cloneInto(c)).update(u).digestInto(f),x.set(f.subarray(0,x.length));for(let w=1;w<r;w++){a._cloneInto(c).update(f).digestInto(f);for(let m=0;m<x.length;m++)x[m]^=f[m]}}return g8(a,l,o,c,f)}function m8(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),l=s?4:0,c=s?0:4;t.setUint32(e+l,o,s),t.setUint32(e+c,a,s)}class yb extends xb{constructor(e,n,s,r){super(),this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ch(this.buffer)}update(e){Ga(this);const{view:n,buffer:s,blockLen:r}=this;e=qa(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const l=ch(e);for(;r<=i-o;o+=r)this.process(l,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ga(this),qC(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let d=o;d<r;d++)n[d]=0;m8(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=ch(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%n&&e.buffer.set(s),e}}const x8=(t,e,n)=>t&e^~t&n,b8=(t,e,n)=>t&e^t&n^e&n,y8=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Or=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dr=new Uint32Array(64);class v8 extends yb{constructor(){super(64,32,8,!1),this.A=Or[0]|0,this.B=Or[1]|0,this.C=Or[2]|0,this.D=Or[3]|0,this.E=Or[4]|0,this.F=Or[5]|0,this.G=Or[6]|0,this.H=Or[7]|0}get(){const{A:e,B:n,C:s,D:r,E:i,F:o,G:a,H:l}=this;return[e,n,s,r,i,o,a,l]}set(e,n,s,r,i,o,a,l){this.A=e|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let d=0;d<16;d++,n+=4)Dr[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Dr[d-15],p=Dr[d-2],g=js(f,7)^js(f,18)^f>>>3,x=js(p,17)^js(p,19)^p>>>10;Dr[d]=x+Dr[d-7]+g+Dr[d-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const f=js(a,6)^js(a,11)^js(a,25),p=u+f+x8(a,l,c)+y8[d]+Dr[d]|0,x=(js(s,2)^js(s,13)^js(s,22))+b8(s,r,i)|0;u=c,c=l,l=a,a=o+p|0,o=i,i=r,r=s,s=p+x|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(s,r,i,o,a,l,c,u)}roundClean(){Dr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const gl=e0(()=>new v8),fd=BigInt(2**32-1),vm=BigInt(32);function JC(t,e=!1){return e?{h:Number(t&fd),l:Number(t>>vm&fd)}:{h:Number(t>>vm&fd)|0,l:Number(t&fd)|0}}function ZC(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let r=0;r<t.length;r++){const{h:i,l:o}=JC(t[r],e);[n[r],s[r]]=[i,o]}return[n,s]}const w8=(t,e)=>BigInt(t>>>0)<<vm|BigInt(e>>>0),k8=(t,e,n)=>t>>>n,S8=(t,e,n)=>t<<32-n|e>>>n,_8=(t,e,n)=>t>>>n|e<<32-n,C8=(t,e,n)=>t<<32-n|e>>>n,E8=(t,e,n)=>t<<64-n|e>>>n-32,P8=(t,e,n)=>t>>>n-32|e<<64-n,T8=(t,e)=>e,M8=(t,e)=>t,e5=(t,e,n)=>t<<n|e>>>32-n,t5=(t,e,n)=>e<<n|t>>>32-n,n5=(t,e,n)=>e<<n-32|t>>>64-n,s5=(t,e,n)=>t<<n-32|e>>>64-n;function I8(t,e,n,s){const r=(e>>>0)+(s>>>0);return{h:t+n+(r/2**32|0)|0,l:r|0}}const N8=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),A8=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,R8=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),O8=(t,e,n,s,r)=>e+n+s+r+(t/2**32|0)|0,D8=(t,e,n,s,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(r>>>0),L8=(t,e,n,s,r,i)=>e+n+s+r+i+(t/2**32|0)|0,De={fromBig:JC,split:ZC,toBig:w8,shrSH:k8,shrSL:S8,rotrSH:_8,rotrSL:C8,rotrBH:E8,rotrBL:P8,rotr32H:T8,rotr32L:M8,rotlSH:e5,rotlSL:t5,rotlBH:n5,rotlBL:s5,add:I8,add3L:N8,add3H:A8,add4L:R8,add4H:O8,add5H:L8,add5L:D8},[j8,F8]=De.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Lr=new Uint32Array(80),jr=new Uint32Array(80);class z8 extends yb{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:f,Gh:p,Gl:g,Hh:x,Hl:w}=this;return[e,n,s,r,i,o,a,l,c,u,d,f,p,g,x,w]}set(e,n,s,r,i,o,a,l,c,u,d,f,p,g,x,w){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=x|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Lr[v]=e.getUint32(n),jr[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const b=Lr[v-15]|0,S=jr[v-15]|0,_=De.rotrSH(b,S,1)^De.rotrSH(b,S,8)^De.shrSH(b,S,7),E=De.rotrSL(b,S,1)^De.rotrSL(b,S,8)^De.shrSL(b,S,7),P=Lr[v-2]|0,M=jr[v-2]|0,C=De.rotrSH(P,M,19)^De.rotrBH(P,M,61)^De.shrSH(P,M,6),N=De.rotrSL(P,M,19)^De.rotrBL(P,M,61)^De.shrSL(P,M,6),I=De.add4L(E,N,jr[v-7],jr[v-16]),B=De.add4H(I,_,C,Lr[v-7],Lr[v-16]);Lr[v]=B|0,jr[v]=I|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:f,Fh:p,Fl:g,Gh:x,Gl:w,Hh:m,Hl:y}=this;for(let v=0;v<80;v++){const b=De.rotrSH(d,f,14)^De.rotrSH(d,f,18)^De.rotrBH(d,f,41),S=De.rotrSL(d,f,14)^De.rotrSL(d,f,18)^De.rotrBL(d,f,41),_=d&p^~d&x,E=f&g^~f&w,P=De.add5L(y,S,E,F8[v],jr[v]),M=De.add5H(P,m,b,_,j8[v],Lr[v]),C=P|0,N=De.rotrSH(s,r,28)^De.rotrBH(s,r,34)^De.rotrBH(s,r,39),I=De.rotrSL(s,r,28)^De.rotrBL(s,r,34)^De.rotrBL(s,r,39),B=s&i^s&a^i&a,W=r&o^r&l^o&l;m=x|0,y=w|0,x=p|0,w=g|0,p=d|0,g=f|0,{h:d,l:f}=De.add(c|0,u|0,M|0,C|0),c=a|0,u=l|0,a=i|0,l=o|0,i=s|0,o=r|0;const j=De.add3L(C,I,W);s=De.add3H(j,M,N,B),r=j|0}({h:s,l:r}=De.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=De.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=De.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=De.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:d,l:f}=De.add(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:g}=De.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:x,l:w}=De.add(this.Gh|0,this.Gl|0,x|0,w|0),{h:m,l:y}=De.add(this.Hh|0,this.Hl|0,m|0,y|0),this.set(s,r,i,o,a,l,c,u,d,f,p,g,x,w,m,y)}roundClean(){Lr.fill(0),jr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const vb=e0(()=>new z8);function B8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const iw=B8(),ow=iw.crypto||iw.msCrypto;function $8(t){switch(t){case"sha256":return gl.create();case"sha512":return vb.create()}Z(!1,"invalid hashing algorithm name","algorithm",t)}function U8(t,e){const n={sha256:gl,sha512:vb}[t];return Z(n!=null,"invalid hmac algorithm","algorithm",t),t0.create(n,e)}function W8(t,e,n,s,r){const i={sha256:gl,sha512:vb}[r];return Z(i!=null,"invalid pbkdf2 algorithm","algorithm",r),bb(i,t,e,{c:n,dkLen:s})}function H8(t){qe(ow!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),Z(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return ow.getRandomValues(e),e}let r5=!1;const i5=function(t,e,n){return U8(t,e).update(n).digest()};let o5=i5;function ml(t,e,n){const s=ve(e,"key"),r=ve(n,"data");return ge(o5(t,s,r))}ml._=i5;ml.lock=function(){r5=!0};ml.register=function(t){if(r5)throw new Error("computeHmac is locked");o5=t};Object.freeze(ml);const[a5,l5,c5]=[[],[],[]],V8=BigInt(0),Ll=BigInt(1),Y8=BigInt(2),G8=BigInt(7),q8=BigInt(256),K8=BigInt(113);for(let t=0,e=Ll,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],a5.push(2*(5*s+n)),l5.push((t+1)*(t+2)/2%64);let r=V8;for(let i=0;i<7;i++)e=(e<<Ll^(e>>G8)*K8)%q8,e&Y8&&(r^=Ll<<(Ll<<BigInt(i))-Ll);c5.push(r)}const[X8,Q8]=ZC(c5,!0),aw=(t,e,n)=>n>32?n5(t,e,n):e5(t,e,n),lw=(t,e,n)=>n>32?s5(t,e,n):t5(t,e,n);function J8(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],d=aw(c,u,1)^n[a],f=lw(c,u,1)^n[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let r=t[2],i=t[3];for(let o=0;o<24;o++){const a=l5[o],l=aw(r,i,a),c=lw(r,i,a),u=a5[o];r=t[u],i=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=X8[s],t[1]^=Q8[s]}n.fill(0)}class wb extends xb{constructor(e,n,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Un(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=lh(this.state)}keccak(){J8(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Ga(this);const{blockLen:n,state:s}=this;e=qa(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:r}=this;e[s]^=n,n&128&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Ga(this,!1),mb(e),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(n.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Un(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(qC(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new wb(n,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Z8=(t,e,n)=>e0(()=>new wb(e,t,n)),e6=Z8(1,136,256/8);let u5=!1;const d5=function(t){return e6(t)};let h5=d5;function Ht(t){const e=ve(t,"data");return ge(h5(e))}Ht._=d5;Ht.lock=function(){u5=!0};Ht.register=function(t){if(u5)throw new TypeError("keccak256 is locked");h5=t};Object.freeze(Ht);const t6=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),f5=Uint8Array.from({length:16},(t,e)=>e),n6=f5.map(t=>(9*t+5)%16);let kb=[f5],Sb=[n6];for(let t=0;t<4;t++)for(let e of[kb,Sb])e.push(e[t].map(n=>t6[n]));const p5=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),s6=kb.map((t,e)=>t.map(n=>p5[e][n])),r6=Sb.map((t,e)=>t.map(n=>p5[e][n])),i6=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),o6=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),pd=(t,e)=>t<<e|t>>>32-e;function cw(t,e,n,s){return t===0?e^n^s:t===1?e&n|~e&s:t===2?(e|~n)^s:t===3?e&s|n&~s:e^(n|~s)}const gd=new Uint32Array(16);class a6 extends yb{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:s,h3:r,h4:i}=this;return[e,n,s,r,i]}set(e,n,s,r,i){this.h0=e|0,this.h1=n|0,this.h2=s|0,this.h3=r|0,this.h4=i|0}process(e,n){for(let p=0;p<16;p++,n+=4)gd[p]=e.getUint32(n,!0);let s=this.h0|0,r=s,i=this.h1|0,o=i,a=this.h2|0,l=a,c=this.h3|0,u=c,d=this.h4|0,f=d;for(let p=0;p<5;p++){const g=4-p,x=i6[p],w=o6[p],m=kb[p],y=Sb[p],v=s6[p],b=r6[p];for(let S=0;S<16;S++){const _=pd(s+cw(p,i,a,c)+gd[m[S]]+x,v[S])+d|0;s=d,d=c,c=pd(a,10)|0,a=i,i=_}for(let S=0;S<16;S++){const _=pd(r+cw(g,o,l,u)+gd[y[S]]+w,b[S])+f|0;r=f,f=u,u=pd(l,10)|0,l=o,o=_}}this.set(this.h1+a+u|0,this.h2+c+f|0,this.h3+d+r|0,this.h4+s+o|0,this.h0+i+l|0)}roundClean(){gd.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const l6=e0(()=>new a6);let g5=!1;const m5=function(t){return l6(t)};let x5=m5;function xl(t){const e=ve(t,"data");return ge(x5(e))}xl._=m5;xl.lock=function(){g5=!0};xl.register=function(t){if(g5)throw new TypeError("ripemd160 is locked");x5=t};Object.freeze(xl);let b5=!1;const y5=function(t,e,n,s,r){return W8(t,e,n,s,r)};let v5=y5;function Mu(t,e,n,s,r){const i=ve(t,"password"),o=ve(e,"salt");return ge(v5(i,o,n,s,r))}Mu._=y5;Mu.lock=function(){b5=!0};Mu.register=function(t){if(b5)throw new Error("pbkdf2 is locked");v5=t};Object.freeze(Mu);let w5=!1;const k5=function(t){return new Uint8Array(H8(t))};let S5=k5;function Cr(t){return S5(t)}Cr._=k5;Cr.lock=function(){w5=!0};Cr.register=function(t){if(w5)throw new Error("randomBytes is locked");S5=t};Object.freeze(Cr);const Qe=(t,e)=>t<<e|t>>>32-e;function uw(t,e,n,s,r,i){let o=t[e++]^n[s++],a=t[e++]^n[s++],l=t[e++]^n[s++],c=t[e++]^n[s++],u=t[e++]^n[s++],d=t[e++]^n[s++],f=t[e++]^n[s++],p=t[e++]^n[s++],g=t[e++]^n[s++],x=t[e++]^n[s++],w=t[e++]^n[s++],m=t[e++]^n[s++],y=t[e++]^n[s++],v=t[e++]^n[s++],b=t[e++]^n[s++],S=t[e++]^n[s++],_=o,E=a,P=l,M=c,C=u,N=d,I=f,B=p,W=g,j=x,z=w,F=m,A=y,$=v,T=b,G=S;for(let D=0;D<8;D+=2)C^=Qe(_+A|0,7),W^=Qe(C+_|0,9),A^=Qe(W+C|0,13),_^=Qe(A+W|0,18),j^=Qe(N+E|0,7),$^=Qe(j+N|0,9),E^=Qe($+j|0,13),N^=Qe(E+$|0,18),T^=Qe(z+I|0,7),P^=Qe(T+z|0,9),I^=Qe(P+T|0,13),z^=Qe(I+P|0,18),M^=Qe(G+F|0,7),B^=Qe(M+G|0,9),F^=Qe(B+M|0,13),G^=Qe(F+B|0,18),E^=Qe(_+M|0,7),P^=Qe(E+_|0,9),M^=Qe(P+E|0,13),_^=Qe(M+P|0,18),I^=Qe(N+C|0,7),B^=Qe(I+N|0,9),C^=Qe(B+I|0,13),N^=Qe(C+B|0,18),F^=Qe(z+j|0,7),W^=Qe(F+z|0,9),j^=Qe(W+F|0,13),z^=Qe(j+W|0,18),A^=Qe(G+T|0,7),$^=Qe(A+G|0,9),T^=Qe($+A|0,13),G^=Qe(T+$|0,18);r[i++]=o+_|0,r[i++]=a+E|0,r[i++]=l+P|0,r[i++]=c+M|0,r[i++]=u+C|0,r[i++]=d+N|0,r[i++]=f+I|0,r[i++]=p+B|0,r[i++]=g+W|0,r[i++]=x+j|0,r[i++]=w+z|0,r[i++]=m+F|0,r[i++]=y+A|0,r[i++]=v+$|0,r[i++]=b+T|0,r[i++]=S+G|0}function ha(t,e,n,s,r){let i=s+0,o=s+16*r;for(let a=0;a<16;a++)n[o+a]=t[e+(2*r-1)*16+a];for(let a=0;a<r;a++,i+=16,e+=16)uw(n,o,t,e,n,i),a>0&&(o+=16),uw(n,i,t,e+=16,n,o)}function _5(t,e,n){const s=XC({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:r,r:i,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=s;if(Un(r),Un(i),Un(o),Un(a),Un(l),Un(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const d=128*i,f=d/4;if(r<=1||r&r-1||r>=2**(d/8)||r>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=d*(r+o);if(p>c)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${c} (maxmem)`);const g=bb(gl,t,e,{c:1,dkLen:d*o}),x=lh(g),w=lh(new Uint8Array(d*r)),m=lh(new Uint8Array(d));let y=()=>{};if(u){const v=2*r*o,b=Math.max(Math.floor(v/1e4),1);let S=0;y=()=>{S++,u&&(!(S%b)||S===v)&&u(S/v)}}return{N:r,r:i,p:o,dkLen:a,blockSize32:f,V:w,B32:x,B:g,tmp:m,blockMixCb:y,asyncTick:l}}function C5(t,e,n,s,r){const i=bb(gl,t,n,{c:1,dkLen:e});return n.fill(0),s.fill(0),r.fill(0),i}function c6(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f}=_5(t,e,n);for(let p=0;p<i;p++){const g=a*p;for(let x=0;x<a;x++)l[x]=c[g+x];for(let x=0,w=0;x<s-1;x++)ha(l,w,l,w+=a,r),f();ha(l,(s-1)*a,c,g,r),f();for(let x=0;x<s;x++){const w=c[g+a-16]%s;for(let m=0;m<a;m++)d[m]=c[g+m]^l[w*a+m];ha(d,0,c,g,r),f()}}return C5(t,o,u,l,d)}async function u6(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f,asyncTick:p}=_5(t,e,n);for(let g=0;g<i;g++){const x=a*g;for(let m=0;m<a;m++)l[m]=c[x+m];let w=0;await rw(s-1,p,()=>{ha(l,w,l,w+=a,r),f()}),ha(l,(s-1)*a,c,x,r),f(),await rw(s,p,()=>{const m=c[x+a-16]%s;for(let y=0;y<a;y++)d[y]=c[x+y]^l[m*a+y];ha(d,0,c,x,r),f()})}return C5(t,o,u,l,d)}let E5=!1,P5=!1;const T5=async function(t,e,n,s,r,i,o){return await u6(t,e,{N:n,r:s,p:r,dkLen:i,onProgress:o})},M5=function(t,e,n,s,r,i){return c6(t,e,{N:n,r:s,p:r,dkLen:i})};let I5=T5,N5=M5;async function Iu(t,e,n,s,r,i,o){const a=ve(t,"passwd"),l=ve(e,"salt");return ge(await I5(a,l,n,s,r,i,o))}Iu._=T5;Iu.lock=function(){P5=!0};Iu.register=function(t){if(P5)throw new Error("scrypt is locked");I5=t};Object.freeze(Iu);function Nu(t,e,n,s,r,i){const o=ve(t,"passwd"),a=ve(e,"salt");return ge(N5(o,a,n,s,r,i))}Nu._=M5;Nu.lock=function(){E5=!0};Nu.register=function(t){if(E5)throw new Error("scryptSync is locked");N5=t};Object.freeze(Nu);const A5=function(t){return $8("sha256").update(t).digest()};let R5=A5,O5=!1;function xs(t){const e=ve(t,"data");return ge(R5(e))}xs._=A5;xs.lock=function(){O5=!0};xs.register=function(t){if(O5)throw new Error("sha256 is locked");R5=t};Object.freeze(xs);Object.freeze(xs);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const D5=BigInt(0),n0=BigInt(1),d6=BigInt(2),s0=t=>t instanceof Uint8Array,h6=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ka(t){if(!s0(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=h6[t[n]];return e}function L5(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function _b(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Xa(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let s=0;s<n.length;s++){const r=s*2,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[s]=o}return n}function so(t){return _b(Ka(t))}function Cb(t){if(!s0(t))throw new Error("Uint8Array expected");return _b(Ka(Uint8Array.from(t).reverse()))}function Qa(t,e){return Xa(t.toString(16).padStart(e*2,"0"))}function Eb(t,e){return Qa(t,e).reverse()}function f6(t){return Xa(L5(t))}function Ss(t,e,n){let s;if(typeof e=="string")try{s=Xa(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(s0(e))s=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const r=s.length;if(typeof n=="number"&&r!==n)throw new Error(`${t} expected ${n} bytes, got ${r}`);return s}function nu(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!s0(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}function p6(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function g6(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function m6(t){let e;for(e=0;t>D5;t>>=n0,e+=1);return e}function x6(t,e){return t>>BigInt(e)&n0}const b6=(t,e,n)=>t|(n?n0:D5)<<BigInt(e),Pb=t=>(d6<<BigInt(t-1))-n0,bp=t=>new Uint8Array(t),dw=t=>Uint8Array.from(t);function j5(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let s=bp(t),r=bp(t),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...d)=>n(r,s,...d),l=(d=bp())=>{r=a(dw([0]),d),s=a(),d.length!==0&&(r=a(dw([1]),d),s=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){s=a();const p=s.slice();f.push(p),d+=s.length}return nu(...f)};return(d,f)=>{o(),l(d);let p;for(;!(p=f(c()));)l();return o(),p}}const y6={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Au(t,e,n={}){const s=(r,i,o)=>{const a=y6[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=t[r];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(e))s(r,i,!1);for(const[r,i]of Object.entries(n))s(r,i,!0);return t}const v6=Object.freeze(Object.defineProperty({__proto__:null,bitGet:x6,bitLen:m6,bitMask:Pb,bitSet:b6,bytesToHex:Ka,bytesToNumberBE:so,bytesToNumberLE:Cb,concatBytes:nu,createHmacDrbg:j5,ensureBytes:Ss,equalBytes:p6,hexToBytes:Xa,hexToNumber:_b,numberToBytesBE:Qa,numberToBytesLE:Eb,numberToHexUnpadded:L5,numberToVarBytesBE:f6,utf8ToBytes:g6,validateObject:Au},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vt=BigInt(0),It=BigInt(1),$i=BigInt(2),w6=BigInt(3),wm=BigInt(4),hw=BigInt(5),fw=BigInt(8);BigInt(9);BigInt(16);function Tn(t,e){const n=t%e;return n>=Vt?n:e+n}function k6(t,e,n){if(n<=Vt||e<Vt)throw new Error("Expected power/modulo > 0");if(n===It)return Vt;let s=It;for(;e>Vt;)e&It&&(s=s*t%n),t=t*t%n,e>>=It;return s}function Zn(t,e,n){let s=t;for(;e-- >Vt;)s*=s,s%=n;return s}function km(t,e){if(t===Vt||e<=Vt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Tn(t,e),s=e,r=Vt,i=It;for(;n!==Vt;){const a=s/n,l=s%n,c=r-i*a;s=n,n=l,r=i,i=c}if(s!==It)throw new Error("invert: does not exist");return Tn(r,e)}function S6(t){const e=(t-It)/$i;let n,s,r;for(n=t-It,s=0;n%$i===Vt;n/=$i,s++);for(r=$i;r<t&&k6(r,e,t)!==t-It;r++);if(s===1){const o=(t+It)/wm;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+It)/$i;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=s,u=a.pow(a.mul(a.ONE,r),n),d=a.pow(l,i),f=a.pow(l,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let p=1;for(let x=a.sqr(f);p<c&&!a.eql(x,a.ONE);p++)x=a.sqr(x);const g=a.pow(u,It<<BigInt(c-p-1));u=a.sqr(g),d=a.mul(d,g),f=a.mul(f,u),c=p}return d}}function _6(t){if(t%wm===w6){const e=(t+It)/wm;return function(s,r){const i=s.pow(r,e);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%fw===hw){const e=(t-hw)/fw;return function(s,r){const i=s.mul(r,$i),o=s.pow(i,e),a=s.mul(r,o),l=s.mul(s.mul(a,$i),o),c=s.mul(a,s.sub(l,s.ONE));if(!s.eql(s.sqr(c),r))throw new Error("Cannot find square root");return c}}return S6(t)}const C6=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function E6(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=C6.reduce((s,r)=>(s[r]="function",s),e);return Au(t,n)}function P6(t,e,n){if(n<Vt)throw new Error("Expected power > 0");if(n===Vt)return t.ONE;if(n===It)return e;let s=t.ONE,r=e;for(;n>Vt;)n&It&&(s=t.mul(s,r)),r=t.sqr(r),n>>=It;return s}function T6(t,e){const n=new Array(e.length),s=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),r=t.inv(s);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),r),n}function F5(t,e){const n=e!==void 0?e:t.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function M6(t,e,n=!1,s={}){if(t<=Vt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:r,nByteLength:i}=F5(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=_6(t),a=Object.freeze({ORDER:t,BITS:r,BYTES:i,MASK:Pb(r),ZERO:Vt,ONE:It,create:l=>Tn(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Vt<=l&&l<t},is0:l=>l===Vt,isOdd:l=>(l&It)===It,neg:l=>Tn(-l,t),eql:(l,c)=>l===c,sqr:l=>Tn(l*l,t),add:(l,c)=>Tn(l+c,t),sub:(l,c)=>Tn(l-c,t),mul:(l,c)=>Tn(l*c,t),pow:(l,c)=>P6(a,l,c),div:(l,c)=>Tn(l*km(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>km(l,t),sqrt:s.sqrt||(l=>o(a,l)),invertBatch:l=>T6(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?Eb(l,i):Qa(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return n?Cb(l):so(l)}});return Object.freeze(a)}function z5(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function B5(t){const e=z5(t);return e+Math.ceil(e/2)}function I6(t,e,n=!1){const s=t.length,r=z5(e),i=B5(e);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=n?so(t):Cb(t),a=Tn(o,e-It)+It;return n?Eb(a,r):Qa(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const N6=BigInt(0),yp=BigInt(1);function A6(t,e){const n=(r,i)=>{const o=i.negate();return r?o:i},s=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(r,i){let o=t.ZERO,a=r;for(;i>N6;)i&yp&&(o=o.add(a)),a=a.double(),i>>=yp;return o},precomputeWindow(r,i){const{windows:o,windowSize:a}=s(i),l=[];let c=r,u=c;for(let d=0;d<o;d++){u=c,l.push(u);for(let f=1;f<a;f++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(r,i,o){const{windows:a,windowSize:l}=s(r);let c=t.ZERO,u=t.BASE;const d=BigInt(2**r-1),f=2**r,p=BigInt(r);for(let g=0;g<a;g++){const x=g*l;let w=Number(o&d);o>>=p,w>l&&(w-=f,o+=yp);const m=x,y=x+Math.abs(w)-1,v=g%2!==0,b=w<0;w===0?u=u.add(n(v,i[m])):c=c.add(n(b,i[y]))}return{p:c,f:u}},wNAFCached(r,i,o,a){const l=r._WINDOW_SIZE||1;let c=i.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&i.set(r,a(c))),this.wNAF(l,c,o)}}}function $5(t){return E6(t.Fp),Au(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...F5(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function R6(t){const e=$5(t);Au(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:r}=e;if(n){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:O6,hexToBytes:D6}=v6,Yi={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Yi;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],s=t.subarray(2,n+2);if(!n||s.length!==n)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:O6(s),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Yi,n=typeof t=="string"?D6(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let s=n.length;if(s<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=Yi._parseInt(n.subarray(2)),{d:o,l:a}=Yi._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},s=e(n(t.s)),r=e(n(t.r)),i=s.length/2,o=r.length/2,a=n(i),l=n(o);return`30${n(o+i+4)}02${l}${r}02${a}${s}`}},mr=BigInt(0),as=BigInt(1);BigInt(2);const pw=BigInt(3);BigInt(4);function L6(t){const e=R6(t),{Fp:n}=e,s=e.toBytes||((g,x,w)=>{const m=x.toAffine();return nu(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),r=e.fromBytes||(g=>{const x=g.subarray(1),w=n.fromBytes(x.subarray(0,n.BYTES)),m=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:w,y:m}});function i(g){const{a:x,b:w}=e,m=n.sqr(g),y=n.mul(m,g);return n.add(n.add(y,n.mul(g,x)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&mr<g&&g<e.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(g){const{allowedPrivateKeyLengths:x,nByteLength:w,wrapPrivateKey:m,n:y}=e;if(x&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=Ka(g)),typeof g!="string"||!x.includes(g.length))throw new Error("Invalid key");g=g.padStart(w*2,"0")}let v;try{v=typeof g=="bigint"?g:so(Ss("private key",g,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof g}`)}return m&&(v=Tn(v,y)),a(v),v}const c=new Map;function u(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(x,w,m){if(this.px=x,this.py=w,this.pz=m,x==null||!n.isValid(x))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(x){const{x:w,y:m}=x||{};if(!x||!n.isValid(w)||!n.isValid(m))throw new Error("invalid affine point");if(x instanceof d)throw new Error("projective point not allowed");const y=v=>n.eql(v,n.ZERO);return y(w)&&y(m)?d.ZERO:new d(w,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const w=n.invertBatch(x.map(m=>m.pz));return x.map((m,y)=>m.toAffine(w[y])).map(d.fromAffine)}static fromHex(x){const w=d.fromAffine(r(Ss("pointHex",x)));return w.assertValidity(),w}static fromPrivateKey(x){return d.BASE.multiply(l(x))}_setWindowSize(x){this._WINDOW_SIZE=x,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:w}=this.toAffine();if(!n.isValid(x)||!n.isValid(w))throw new Error("bad point: x or y not FE");const m=n.sqr(w),y=i(x);if(!n.eql(m,y))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(n.isOdd)return!n.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){u(x);const{px:w,py:m,pz:y}=this,{px:v,py:b,pz:S}=x,_=n.eql(n.mul(w,S),n.mul(v,y)),E=n.eql(n.mul(m,S),n.mul(b,y));return _&&E}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:x,b:w}=e,m=n.mul(w,pw),{px:y,py:v,pz:b}=this;let S=n.ZERO,_=n.ZERO,E=n.ZERO,P=n.mul(y,y),M=n.mul(v,v),C=n.mul(b,b),N=n.mul(y,v);return N=n.add(N,N),E=n.mul(y,b),E=n.add(E,E),S=n.mul(x,E),_=n.mul(m,C),_=n.add(S,_),S=n.sub(M,_),_=n.add(M,_),_=n.mul(S,_),S=n.mul(N,S),E=n.mul(m,E),C=n.mul(x,C),N=n.sub(P,C),N=n.mul(x,N),N=n.add(N,E),E=n.add(P,P),P=n.add(E,P),P=n.add(P,C),P=n.mul(P,N),_=n.add(_,P),C=n.mul(v,b),C=n.add(C,C),P=n.mul(C,N),S=n.sub(S,P),E=n.mul(C,M),E=n.add(E,E),E=n.add(E,E),new d(S,_,E)}add(x){u(x);const{px:w,py:m,pz:y}=this,{px:v,py:b,pz:S}=x;let _=n.ZERO,E=n.ZERO,P=n.ZERO;const M=e.a,C=n.mul(e.b,pw);let N=n.mul(w,v),I=n.mul(m,b),B=n.mul(y,S),W=n.add(w,m),j=n.add(v,b);W=n.mul(W,j),j=n.add(N,I),W=n.sub(W,j),j=n.add(w,y);let z=n.add(v,S);return j=n.mul(j,z),z=n.add(N,B),j=n.sub(j,z),z=n.add(m,y),_=n.add(b,S),z=n.mul(z,_),_=n.add(I,B),z=n.sub(z,_),P=n.mul(M,j),_=n.mul(C,B),P=n.add(_,P),_=n.sub(I,P),P=n.add(I,P),E=n.mul(_,P),I=n.add(N,N),I=n.add(I,N),B=n.mul(M,B),j=n.mul(C,j),I=n.add(I,B),B=n.sub(N,B),B=n.mul(M,B),j=n.add(j,B),N=n.mul(I,j),E=n.add(E,N),N=n.mul(z,j),_=n.mul(W,_),_=n.sub(_,N),N=n.mul(W,I),P=n.mul(z,P),P=n.add(P,N),new d(_,E,P)}subtract(x){return this.add(x.negate())}is0(){return this.equals(d.ZERO)}wNAF(x){return p.wNAFCached(this,c,x,w=>{const m=n.invertBatch(w.map(y=>y.pz));return w.map((y,v)=>y.toAffine(m[v])).map(d.fromAffine)})}multiplyUnsafe(x){const w=d.ZERO;if(x===mr)return w;if(a(x),x===as)return this;const{endo:m}=e;if(!m)return p.unsafeLadder(this,x);let{k1neg:y,k1:v,k2neg:b,k2:S}=m.splitScalar(x),_=w,E=w,P=this;for(;v>mr||S>mr;)v&as&&(_=_.add(P)),S&as&&(E=E.add(P)),P=P.double(),v>>=as,S>>=as;return y&&(_=_.negate()),b&&(E=E.negate()),E=new d(n.mul(E.px,m.beta),E.py,E.pz),_.add(E)}multiply(x){a(x);let w=x,m,y;const{endo:v}=e;if(v){const{k1neg:b,k1:S,k2neg:_,k2:E}=v.splitScalar(w);let{p:P,f:M}=this.wNAF(S),{p:C,f:N}=this.wNAF(E);P=p.constTimeNegate(b,P),C=p.constTimeNegate(_,C),C=new d(n.mul(C.px,v.beta),C.py,C.pz),m=P.add(C),y=M.add(N)}else{const{p:b,f:S}=this.wNAF(w);m=b,y=S}return d.normalizeZ([m,y])[0]}multiplyAndAddUnsafe(x,w,m){const y=d.BASE,v=(S,_)=>_===mr||_===as||!S.equals(y)?S.multiplyUnsafe(_):S.multiply(_),b=v(this,w).add(v(x,m));return b.is0()?void 0:b}toAffine(x){const{px:w,py:m,pz:y}=this,v=this.is0();x==null&&(x=v?n.ONE:n.inv(y));const b=n.mul(w,x),S=n.mul(m,x),_=n.mul(y,x);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:b,y:S}}isTorsionFree(){const{h:x,isTorsionFree:w}=e;if(x===as)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:w}=e;return x===as?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return this.assertValidity(),s(d,this,x)}toHex(x=!0){return Ka(this.toRawBytes(x))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=A6(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function j6(t){const e=$5(t);return Au(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function F6(t){const e=j6(t),{Fp:n,n:s}=e,r=n.BYTES+1,i=2*n.BYTES+1;function o(j){return mr<j&&j<n.ORDER}function a(j){return Tn(j,s)}function l(j){return km(j,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:f}=L6({...e,toBytes(j,z,F){const A=z.toAffine(),$=n.toBytes(A.x),T=nu;return F?T(Uint8Array.from([z.hasEvenY()?2:3]),$):T(Uint8Array.from([4]),$,n.toBytes(A.y))},fromBytes(j){const z=j.length,F=j[0],A=j.subarray(1);if(z===r&&(F===2||F===3)){const $=so(A);if(!o($))throw new Error("Point is not on curve");const T=d($);let G=n.sqrt(T);const D=(G&as)===as;return(F&1)===1!==D&&(G=n.neg(G)),{x:$,y:G}}else if(z===i&&F===4){const $=n.fromBytes(A.subarray(0,n.BYTES)),T=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:$,y:T}}else throw new Error(`Point of length ${z} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),p=j=>Ka(Qa(j,e.nByteLength));function g(j){const z=s>>as;return j>z}function x(j){return g(j)?a(-j):j}const w=(j,z,F)=>so(j.slice(z,F));class m{constructor(z,F,A){this.r=z,this.s=F,this.recovery=A,this.assertValidity()}static fromCompact(z){const F=e.nByteLength;return z=Ss("compactSignature",z,F*2),new m(w(z,0,F),w(z,F,2*F))}static fromDER(z){const{r:F,s:A}=Yi.toSig(Ss("DER",z));return new m(F,A)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(z){return new m(this.r,this.s,z)}recoverPublicKey(z){const{r:F,s:A,recovery:$}=this,T=E(Ss("msgHash",z));if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");const G=$===2||$===3?F+e.n:F;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const D=$&1?"03":"02",R=c.fromHex(D+p(G)),X=l(G),K=a(-T*X),Y=a(A*X),V=c.BASE.multiplyAndAddUnsafe(R,K,Y);if(!V)throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Xa(this.toDERHex())}toDERHex(){return Yi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Xa(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const y={isValidPrivateKey(j){try{return u(j),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const j=B5(e.n);return I6(e.randomBytes(j),e.n)},precompute(j=8,z=c.BASE){return z._setWindowSize(j),z.multiply(BigInt(3)),z}};function v(j,z=!0){return c.fromPrivateKey(j).toRawBytes(z)}function b(j){const z=j instanceof Uint8Array,F=typeof j=="string",A=(z||F)&&j.length;return z?A===r||A===i:F?A===2*r||A===2*i:j instanceof c}function S(j,z,F=!0){if(b(j))throw new Error("first arg must be private key");if(!b(z))throw new Error("second arg must be public key");return c.fromHex(z).multiply(u(j)).toRawBytes(F)}const _=e.bits2int||function(j){const z=so(j),F=j.length*8-e.nBitLength;return F>0?z>>BigInt(F):z},E=e.bits2int_modN||function(j){return a(_(j))},P=Pb(e.nBitLength);function M(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(mr<=j&&j<P))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Qa(j,e.nByteLength)}function C(j,z,F=N){if(["recovered","canonical"].some(ee=>ee in F))throw new Error("sign() legacy options not supported");const{hash:A,randomBytes:$}=e;let{lowS:T,prehash:G,extraEntropy:D}=F;T==null&&(T=!0),j=Ss("msgHash",j),G&&(j=Ss("prehashed msgHash",A(j)));const R=E(j),X=u(z),K=[M(X),M(R)];if(D!=null){const ee=D===!0?$(n.BYTES):D;K.push(Ss("extraEntropy",ee))}const Y=nu(...K),V=R;function Q(ee){const fe=_(ee);if(!f(fe))return;const je=l(fe),Se=c.BASE.multiply(fe).toAffine(),Ce=a(Se.x);if(Ce===mr)return;const Ie=a(je*a(V+Ce*X));if(Ie===mr)return;let gt=(Se.x===Ce?0:2)|Number(Se.y&as),L=Ie;return T&&g(Ie)&&(L=x(Ie),gt^=1),new m(Ce,L,gt)}return{seed:Y,k2sig:Q}}const N={lowS:e.lowS,prehash:!1},I={lowS:e.lowS,prehash:!1};function B(j,z,F=N){const{seed:A,k2sig:$}=C(j,z,F),T=e;return j5(T.hash.outputLen,T.nByteLength,T.hmac)(A,$)}c.BASE._setWindowSize(8);function W(j,z,F,A=I){var Se;const $=j;if(z=Ss("msgHash",z),F=Ss("publicKey",F),"strict"in A)throw new Error("options.strict was renamed to lowS");const{lowS:T,prehash:G}=A;let D,R;try{if(typeof $=="string"||$ instanceof Uint8Array)try{D=m.fromDER($)}catch(Ce){if(!(Ce instanceof Yi.Err))throw Ce;D=m.fromCompact($)}else if(typeof $=="object"&&typeof $.r=="bigint"&&typeof $.s=="bigint"){const{r:Ce,s:Ie}=$;D=new m(Ce,Ie)}else throw new Error("PARSE");R=c.fromHex(F)}catch(Ce){if(Ce.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(T&&D.hasHighS())return!1;G&&(z=e.hash(z));const{r:X,s:K}=D,Y=E(z),V=l(K),Q=a(Y*V),ee=a(X*V),fe=(Se=c.BASE.multiplyAndAddUnsafe(R,Q,ee))==null?void 0:Se.toAffine();return fe?a(fe.x)===X:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:S,sign:B,verify:W,ProjectivePoint:c,Signature:m,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function z6(t){return{hash:t,hmac:(e,...n)=>t0(t,e,d8(...n)),randomBytes:f8}}function B6(t,e){const n=s=>F6({...t,...z6(s)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const U5=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),gw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$6=BigInt(1),Sm=BigInt(2),mw=(t,e)=>(t+e/Sm)/e;function U6(t){const e=U5,n=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,d=Zn(u,n,e)*u%e,f=Zn(d,n,e)*u%e,p=Zn(f,Sm,e)*c%e,g=Zn(p,r,e)*p%e,x=Zn(g,i,e)*g%e,w=Zn(x,a,e)*x%e,m=Zn(w,l,e)*w%e,y=Zn(m,a,e)*x%e,v=Zn(y,n,e)*u%e,b=Zn(v,o,e)*g%e,S=Zn(b,s,e)*c%e,_=Zn(S,Sm,e);if(!_m.eql(_m.sqr(_),t))throw new Error("Cannot find square root");return _}const _m=M6(U5,void 0,void 0,{sqrt:U6}),Hr=B6({a:BigInt(0),b:BigInt(7),Fp:_m,n:gw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=gw,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-$6*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=mw(i*t,e),l=mw(-s*t,e);let c=Tn(t-a*n-l*r,e),u=Tn(-a*s-l*i,e);const d=c>o,f=u>o;if(d&&(c=e-c),f&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:f,k2:u}}}},gl);BigInt(0);Hr.ProjectivePoint;const W5="0x0000000000000000000000000000000000000000",xw="0x0000000000000000000000000000000000000000000000000000000000000000",W6=`Ethereum Signed Message:
`,bw=BigInt(0),yw=BigInt(1),Cm=BigInt(2),vw=BigInt(27),ww=BigInt(28),md=BigInt(35),H5=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),H6=H5/Cm,V6=Symbol.for("nodejs.util.inspect.custom"),Ti={};function vp(t){return vi(Nt(t),32)}var ya,Gs,va,Jr;const is=class is{constructor(e,n,s,r){We(this,ya);We(this,Gs);We(this,va);We(this,Jr);Qf(e,Ti,"Signature"),be(this,ya,n),be(this,Gs,s),be(this,va,r),be(this,Jr,null)}get r(){return Ee(this,ya)}set r(e){Z(Mc(e)===32,"invalid r","value",e),be(this,ya,ge(e))}get s(){return Z(parseInt(Ee(this,Gs).substring(0,3))<8,"non-canonical s; use ._s","s",Ee(this,Gs)),Ee(this,Gs)}set s(e){Z(Mc(e)===32,"invalid s","value",e),be(this,Gs,ge(e))}get _s(){return Ee(this,Gs)}isValid(){return BigInt(Ee(this,Gs))<=H6}get v(){return Ee(this,va)}set v(e){const n=Yn(e,"value");Z(n===27||n===28,"invalid v","v",e),be(this,va,n)}get networkV(){return Ee(this,Jr)}get legacyChainId(){const e=this.networkV;return e==null?null:is.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=ve(this.s);return this.yParity&&(e[0]|=128),ge(e)}get compactSerialized(){return At([this.r,this.yParityAndS])}get serialized(){return At([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=H5-BigInt(this._s),n=55-this.v,s=new is(Ti,this.r,vp(e),n);return this.networkV&&be(s,Jr,this.networkV),s}clone(){const e=new is(Ti,this.r,this._s,this.v);return this.networkV&&be(e,Jr,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[V6](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=ht(e,"v");return n==vw||n==ww?bw:(Z(n>=md,"invalid EIP-155 v","v",e),(n-md)/Cm)}static getChainIdV(e,n){return ht(e)*Cm+BigInt(35+n-27)}static getNormalizedV(e){const n=ht(e);return n===bw||n===vw?27:n===yw||n===ww?28:(Z(n>=md,"invalid v","v",e),n&yw?27:28)}static from(e){function n(c,u){Z(c,u,"signature",e)}if(e==null)return new is(Ti,xw,xw,27);if(typeof e=="string"){const c=ve(e,"signature");if(c.length===64){const u=ge(c.slice(0,32)),d=c.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new is(Ti,u,ge(d),f)}if(c.length===65){const u=ge(c.slice(0,32)),d=ge(c.slice(32,64)),f=is.getNormalizedV(c[64]);return new is(Ti,u,d,f)}n(!1,"invalid raw signature length")}if(e instanceof is)return e.clone();const s=e.r;n(s!=null,"missing r");const r=vp(s),i=function(c,u){if(c!=null)return vp(c);if(u!=null){n(tr(u,32),"invalid yParityAndS");const d=ve(u);return d[0]&=127,ge(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(c,u,d){if(c!=null){const f=ht(c);return{networkV:f>=md?f:void 0,v:is.getNormalizedV(f)}}if(u!=null)return n(tr(u,32),"invalid yParityAndS"),{v:ve(u)[0]&128?28:27};if(d!=null){switch(Yn(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new is(Ti,r,i,a);return o&&be(l,Jr,o),n(e.yParity==null||Yn(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};ya=new WeakMap,Gs=new WeakMap,va=new WeakMap,Jr=new WeakMap;let Rs=is;var pr;const Ui=class Ui{constructor(e){We(this,pr);Z(Mc(e)===32,"invalid private key","privateKey","[REDACTED]"),be(this,pr,ge(e))}get privateKey(){return Ee(this,pr)}get publicKey(){return Ui.computePublicKey(Ee(this,pr))}get compressedPublicKey(){return Ui.computePublicKey(Ee(this,pr),!0)}sign(e){Z(Mc(e)===32,"invalid digest length","digest",e);const n=Hr.sign(Bo(e),Bo(Ee(this,pr)),{lowS:!0});return Rs.from({r:Ya(n.r,32),s:Ya(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=Ui.computePublicKey(e);return ge(Hr.getSharedSecret(Bo(Ee(this,pr)),ve(n),!1))}static computePublicKey(e,n){let s=ve(e,"key");if(s.length===32){const i=Hr.getPublicKey(s,!!n);return ge(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=Hr.ProjectivePoint.fromHex(s);return ge(r.toRawBytes(n))}static recoverPublicKey(e,n){Z(Mc(e)===32,"invalid digest length","digest",e);const s=Rs.from(n);let r=Hr.Signature.fromCompact(Bo(At([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(Bo(e));return Z(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,s){const r=Hr.ProjectivePoint.fromHex(Ui.computePublicKey(e).substring(2)),i=Hr.ProjectivePoint.fromHex(Ui.computePublicKey(n).substring(2));return"0x"+r.add(i).toHex(!!s)}};pr=new WeakMap;let Zs=Ui;const Y6=BigInt(0),G6=BigInt(36);function kw(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let r=0;r<40;r++)n[r]=e[r].charCodeAt(0);const s=ve(Ht(n));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(s[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const Tb={};for(let t=0;t<10;t++)Tb[String(t)]=String(t);for(let t=0;t<26;t++)Tb[String.fromCharCode(65+t)]=String(10+t);const Sw=15;function q6(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(s=>Tb[s]).join("");for(;e.length>=Sw;){let s=e.substring(0,Sw);e=parseInt(s,10)%97+e.substring(s.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const K6=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function X6(t){t=t.toLowerCase();let e=Y6;for(let n=0;n<t.length;n++)e=e*G6+K6[t[n]];return e}function bs(t){if(Z(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=kw(t);return Z(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(t.substring(2,4)===q6(t),"bad icap checksum","address",t);let e=X6(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return kw("0x"+e)}Z(!1,"invalid address","address",t)}function Q6(t){return t&&typeof t.getAddress=="function"}async function wp(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(qe(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),bs(n)}function Ic(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?bs(t):(qe(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),wp(t,e.resolveName(t)));if(Q6(t))return wp(t,t.getAddress());if(t&&typeof t.then=="function")return wp(t,t);Z(!1,"unsupported addressable value","target",t)}function kp(t,e){return{address:bs(t),storageKeys:e.map((n,s)=>(Z(tr(n,32),"invalid slot",`storageKeys[${s}]`,n),n.toLowerCase()))}}function r0(t){if(Array.isArray(t))return t.map((n,s)=>Array.isArray(n)?(Z(n.length===2,"invalid slot set",`value[${s}]`,n),kp(n[0],n[1])):(Z(n!=null&&typeof n=="object","invalid address-slot set","value",t),kp(n.address,n.storageKeys)));Z(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const s=t[n].reduce((r,i)=>(r[i]=!0,r),{});return kp(n,Object.keys(s).sort())});return e.sort((n,s)=>n.address.localeCompare(s.address)),e}function J6(t){return{address:bs(t.address),nonce:ht(t.nonce!=null?t.nonce:0),chainId:ht(t.chainId!=null?t.chainId:0),signature:Rs.from(t.signature)}}function Ru(t){let e;return typeof t=="string"?e=Zs.computePublicKey(t,!1):e=t.publicKey,bs(Ht("0x"+e.substring(4)).substring(26))}function Z6(t,e){return Ru(Zs.recoverPublicKey(t,e))}const Wt=BigInt(0),eI=BigInt(2),tI=BigInt(27),nI=BigInt(28),sI=BigInt(35),rI=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),iI=Symbol.for("nodejs.util.inspect.custom"),Sp=4096*32,uh=128;function oI(t){return{blobToKzgCommitment:s=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return ve(t.blobToKzgCommitment(ge(s)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return ve(t.blobToKzgCommitment(s));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return ve(t.blobToKZGCommitment(ge(s)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return ve(t.computeBlobProof(ge(s),ge(r)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return ve(t.computeBlobKZGProof(ge(s),ge(r)));Z(!1,"unsupported KZG library","kzg",t)}}}function _w(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=xs(e).substring(4),"0x"+n}function bl(t){return t==="0x"?null:bs(t)}function i0(t,e){try{return r0(t)}catch(n){Z(!1,n.message,e,t)}}function aI(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let s=0;s<t.length;s++){const r=t[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);n.push({address:bl(r[1]),nonce:at(r[2],"nonce"),chainId:at(r[0],"chainId"),signature:Rs.from({yParity:Co(r[3],"yParity"),r:vi(r[4],32),s:vi(r[5],32)})})}return n}catch(n){Z(!1,n.message,e,t)}}function Co(t,e){return t==="0x"?0:Yn(t,e)}function at(t,e){if(t==="0x")return Wt;const n=ht(t,e);return Z(n<=rI,"value exceeds uint size",e,n),n}function Ye(t,e){const n=ht(t,"value"),s=Nt(n);return Z(s.length<=32,"value too large",`tx.${e}`,n),s}function o0(t){return r0(t).map(e=>[e.address,e.storageKeys])}function lI(t){return t.map(e=>[Ye(e.chainId,"chainId"),e.address,Ye(e.nonce,"nonce"),Ye(e.signature.yParity,"yParity"),Nt(e.signature.r),Nt(e.signature._s)])}function cI(t,e){Z(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Z(tr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function uI(t){const e=Tu(t);Z(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Co(e[0],"nonce"),gasPrice:at(e[1],"gasPrice"),gasLimit:at(e[2],"gasLimit"),to:bl(e[3]),value:at(e[4],"value"),data:ge(e[5]),chainId:Wt};if(e.length===6)return n;const s=at(e[6],"v"),r=at(e[7],"r"),i=at(e[8],"s");if(r===Wt&&i===Wt)n.chainId=s;else{let o=(s-sI)/eI;o<Wt&&(o=Wt),n.chainId=o,Z(o!==Wt||s===tI||s===nI,"non-canonical legacy v","v",e[6]),n.signature=Rs.from({r:vi(e[7],32),s:vi(e[8],32),v:s})}return n}function dI(t,e){const n=[Ye(t.nonce,"nonce"),Ye(t.gasPrice||0,"gasPrice"),Ye(t.gasLimit,"gasLimit"),t.to||"0x",Ye(t.value,"value"),t.data];let s=Wt;if(t.chainId!=Wt)s=ht(t.chainId,"tx.chainId"),Z(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(s=i)}if(!e)return s!==Wt&&(n.push(Nt(s)),n.push("0x"),n.push("0x")),_r(n);let r=BigInt(27+e.yParity);return s!==Wt?r=Rs.getChainIdV(s,e.v):BigInt(e.v)!==r&&Z(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Nt(r)),n.push(Nt(e.r)),n.push(Nt(e._s)),_r(n)}function a0(t,e){let n;try{if(n=Co(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const s=vi(e[1],32),r=vi(e[2],32),i=Rs.from({r:s,s:r,yParity:n});t.signature=i}function hI(t){const e=Tu(ve(t).slice(1));Z(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",ge(t));const n={type:2,chainId:at(e[0],"chainId"),nonce:Co(e[1],"nonce"),maxPriorityFeePerGas:at(e[2],"maxPriorityFeePerGas"),maxFeePerGas:at(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:at(e[4],"gasLimit"),to:bl(e[5]),value:at(e[6],"value"),data:ge(e[7]),accessList:i0(e[8],"accessList")};return e.length===9||a0(n,e.slice(9)),n}function fI(t,e){const n=[Ye(t.chainId,"chainId"),Ye(t.nonce,"nonce"),Ye(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ye(t.maxFeePerGas||0,"maxFeePerGas"),Ye(t.gasLimit,"gasLimit"),t.to||"0x",Ye(t.value,"value"),t.data,o0(t.accessList||[])];return e&&(n.push(Ye(e.yParity,"yParity")),n.push(Nt(e.r)),n.push(Nt(e.s))),At(["0x02",_r(n)])}function pI(t){const e=Tu(ve(t).slice(1));Z(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",ge(t));const n={type:1,chainId:at(e[0],"chainId"),nonce:Co(e[1],"nonce"),gasPrice:at(e[2],"gasPrice"),gasLimit:at(e[3],"gasLimit"),to:bl(e[4]),value:at(e[5],"value"),data:ge(e[6]),accessList:i0(e[7],"accessList")};return e.length===8||a0(n,e.slice(8)),n}function gI(t,e){const n=[Ye(t.chainId,"chainId"),Ye(t.nonce,"nonce"),Ye(t.gasPrice||0,"gasPrice"),Ye(t.gasLimit,"gasLimit"),t.to||"0x",Ye(t.value,"value"),t.data,o0(t.accessList||[])];return e&&(n.push(Ye(e.yParity,"recoveryParam")),n.push(Nt(e.r)),n.push(Nt(e.s))),At(["0x01",_r(n)])}function mI(t){let e=Tu(ve(t).slice(1)),n="3",s=null,r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];Z(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),Z(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),Z(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),Z(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",s=Yn(e[1]);const o=e[2],a=e[3],l=e[4];Z(s===1,`unsupported EIP-7594 network format version: ${s}`,"fields[1]",s),Z(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),Z(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),Z(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),Z(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(o.length*uh===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<o.length;c++){const u=[];for(let d=0;d<uh;d++)u.push(l[c*uh+d]);r.push({data:o[c],commitment:a[c],proof:At(u)})}e=e[0]}Z(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",ge(t));const i={type:3,chainId:at(e[0],"chainId"),nonce:Co(e[1],"nonce"),maxPriorityFeePerGas:at(e[2],"maxPriorityFeePerGas"),maxFeePerGas:at(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:at(e[4],"gasLimit"),to:bl(e[5]),value:at(e[6],"value"),data:ge(e[7]),accessList:i0(e[8],"accessList"),maxFeePerBlobGas:at(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:s};r&&(i.blobs=r),Z(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),Z(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<i.blobVersionedHashes.length;o++)Z(tr(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||a0(i,e.slice(11)),i}function xI(t,e,n){const s=[Ye(t.chainId,"chainId"),Ye(t.nonce,"nonce"),Ye(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ye(t.maxFeePerGas||0,"maxFeePerGas"),Ye(t.gasLimit,"gasLimit"),t.to||W5,Ye(t.value,"value"),t.data,o0(t.accessList||[]),Ye(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),cI(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(s.push(Ye(e.yParity,"yParity")),s.push(Nt(e.r)),s.push(Nt(e.s)),n)){if(t.blobWrapperVersion!=null){const r=Nt(t.blobWrapperVersion),i=[];for(const{proof:o}of n){const a=ve(o),l=a.length/uh;for(let c=0;c<a.length;c+=l)i.push(a.subarray(c,c+l))}return At(["0x03",_r([s,r,n.map(o=>o.data),n.map(o=>o.commitment),i])])}return At(["0x03",_r([s,n.map(r=>r.data),n.map(r=>r.commitment),n.map(r=>r.proof)])])}return At(["0x03",_r(s)])}function bI(t){const e=Tu(ve(t).slice(1));Z(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",ge(t));const n={type:4,chainId:at(e[0],"chainId"),nonce:Co(e[1],"nonce"),maxPriorityFeePerGas:at(e[2],"maxPriorityFeePerGas"),maxFeePerGas:at(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:at(e[4],"gasLimit"),to:bl(e[5]),value:at(e[6],"value"),data:ge(e[7]),accessList:i0(e[8],"accessList"),authorizationList:aI(e[9],"authorizationList")};return e.length===10||a0(n,e.slice(10)),n}function yI(t,e){const n=[Ye(t.chainId,"chainId"),Ye(t.nonce,"nonce"),Ye(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ye(t.maxFeePerGas||0,"maxFeePerGas"),Ye(t.gasLimit,"gasLimit"),t.to||"0x",Ye(t.value,"value"),t.data,o0(t.accessList||[]),lI(t.authorizationList||[])];return e&&(n.push(Ye(e.yParity,"yParity")),n.push(Nt(e.r)),n.push(Nt(e.s))),At(["0x04",_r(n)])}var _s,wa,ka,Sa,_a,Ca,Ea,Pa,Ta,Ma,Ia,Na,Qi,Zr,qs,ei,Aa,Ra,Oa,dh;const Vs=class Vs{constructor(){We(this,Oa);We(this,_s);We(this,wa);We(this,ka);We(this,Sa);We(this,_a);We(this,Ca);We(this,Ea);We(this,Pa);We(this,Ta);We(this,Ma);We(this,Ia);We(this,Na);We(this,Qi);We(this,Zr);We(this,qs);We(this,ei);We(this,Aa);We(this,Ra);be(this,_s,null),be(this,wa,null),be(this,Sa,0),be(this,_a,Wt),be(this,Ca,null),be(this,Ea,null),be(this,Pa,null),be(this,ka,"0x"),be(this,Ta,Wt),be(this,Ma,Wt),be(this,Ia,null),be(this,Na,null),be(this,Qi,null),be(this,Zr,null),be(this,qs,null),be(this,ei,null),be(this,Aa,null),be(this,Ra,null)}get type(){return Ee(this,_s)}set type(e){switch(e){case null:be(this,_s,null);break;case 0:case"legacy":be(this,_s,0);break;case 1:case"berlin":case"eip-2930":be(this,_s,1);break;case 2:case"london":case"eip-1559":be(this,_s,2);break;case 3:case"cancun":case"eip-4844":be(this,_s,3);break;case 4:case"pectra":case"eip-7702":be(this,_s,4);break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=Ee(this,wa);return e==null&&this.type===3?W5:e}set to(e){be(this,wa,e==null?null:bs(e))}get nonce(){return Ee(this,Sa)}set nonce(e){be(this,Sa,Yn(e,"value"))}get gasLimit(){return Ee(this,_a)}set gasLimit(e){be(this,_a,ht(e))}get gasPrice(){const e=Ee(this,Ca);return e==null&&(this.type===0||this.type===1)?Wt:e}set gasPrice(e){be(this,Ca,e==null?null:ht(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=Ee(this,Ea);return e??(this.type===2||this.type===3?Wt:null)}set maxPriorityFeePerGas(e){be(this,Ea,e==null?null:ht(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=Ee(this,Pa);return e??(this.type===2||this.type===3?Wt:null)}set maxFeePerGas(e){be(this,Pa,e==null?null:ht(e,"maxFeePerGas"))}get data(){return Ee(this,ka)}set data(e){be(this,ka,ge(e))}get value(){return Ee(this,Ta)}set value(e){be(this,Ta,ht(e,"value"))}get chainId(){return Ee(this,Ma)}set chainId(e){be(this,Ma,ht(e))}get signature(){return Ee(this,Ia)||null}set signature(e){be(this,Ia,e==null?null:Rs.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const s of n)if(!s.signature.isValid())return!1}return!0}get accessList(){const e=Ee(this,Na)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){be(this,Na,e==null?null:r0(e))}get authorizationList(){const e=Ee(this,Aa)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){be(this,Aa,e==null?null:e.map(n=>J6(n)))}get maxFeePerBlobGas(){const e=Ee(this,Qi);return e==null&&this.type===3?Wt:e}set maxFeePerBlobGas(e){be(this,Qi,e==null?null:ht(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=Ee(this,Zr);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Z(tr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}be(this,Zr,e)}get blobs(){return Ee(this,ei)==null?null:Ee(this,ei).map(e=>Object.assign({},e))}set blobs(e){if(e==null){be(this,ei,null);return}const n=[],s=[];for(let r=0;r<e.length;r++){const i=e[r];if(Jf(i)){qe(Ee(this,qs),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ve(i);if(Z(o.length<=Sp,"blob is too large",`blobs[${r}]`,i),o.length!==Sp){const c=new Uint8Array(Sp);c.set(o),o=c}const a=Ee(this,qs).blobToKzgCommitment(o),l=ge(Ee(this,qs).computeBlobKzgProof(o,a));n.push({data:ge(o),commitment:ge(a),proof:l}),s.push(_w(1,a))}else{const o=ge(i.data),a=ge(i.commitment),l=ge(i.proof);n.push({data:o,commitment:a,proof:l}),s.push(_w(1,a))}}be(this,ei,n),be(this,Zr,s)}get kzg(){return Ee(this,qs)}set kzg(e){e==null?be(this,qs,null):be(this,qs,oI(e))}get blobWrapperVersion(){return Ee(this,Ra)}set blobWrapperVersion(e){be(this,Ra,e)}get hash(){return this.signature==null?null:Ht(on(this,Oa,dh).call(this,!0,!1))}get unsignedHash(){return Ht(this.unsignedSerialized)}get from(){return this.signature==null?null:Z6(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Zs.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return on(this,Oa,dh).call(this,!0,!0)}get unsignedSerialized(){return on(this,Oa,dh).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=Ee(this,Qi)!=null||Ee(this,Zr);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&qe(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),qe(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),qe(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Vs.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[iI](){return this.toString()}toString(){const e=[],n=r=>{let i=this[r];typeof i=="string"&&(i=JSON.stringify(i)),e.push(`${r}: ${i}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const s=this.authorizationList;if(s){const r=[];for(const i of s){const o=[];o.push(`address: ${JSON.stringify(i.address)}`),i.nonce!=null&&o.push(`nonce: ${i.nonce}`),i.chainId!=null&&o.push(`chainId: ${i.chainId}`),i.signature&&o.push(`signature: ${i.signature.toString()}`),r.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${r.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new Vs;if(typeof e=="string"){const s=ve(e);if(s[0]>=127)return Vs.from(uI(s));switch(s[0]){case 1:return Vs.from(pI(s));case 2:return Vs.from(hI(s));case 3:return Vs.from(mI(s));case 4:return Vs.from(bI(s))}qe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Vs;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Rs.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};_s=new WeakMap,wa=new WeakMap,ka=new WeakMap,Sa=new WeakMap,_a=new WeakMap,Ca=new WeakMap,Ea=new WeakMap,Pa=new WeakMap,Ta=new WeakMap,Ma=new WeakMap,Ia=new WeakMap,Na=new WeakMap,Qi=new WeakMap,Zr=new WeakMap,qs=new WeakMap,ei=new WeakMap,Aa=new WeakMap,Ra=new WeakMap,Oa=new WeakSet,dh=function(e,n){qe(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return dI(this,s);case 1:return gI(this,s);case 2:return fI(this,s);case 3:return xI(this,s,n?this.blobs:null);case 4:return yI(this,s)}qe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Zh=Vs;function vI(t){return Z(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),Ht(At(["0x05",_r([t.chainId!=null?Nt(t.chainId):"0x",bs(t.address),t.nonce!=null?Nt(t.nonce):"0x"])]))}function Mb(t){return Ht(no(t))}function wI(t){return typeof t=="string"&&(t=no(t)),Ht(At([no(W6),no(String(t.length)),t]))}const V5=new Uint8Array(32);V5.fill(0);const kI=BigInt(-1),Y5=BigInt(0),G5=BigInt(1),SI=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function _I(t){const e=ve(t),n=e.length%32;return n?At([e,V5.slice(n)]):ge(e)}const CI=Ya(G5,32),EI=Ya(Y5,32),Cw={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},_p=["name","version","chainId","verifyingContract","salt"];function Ew(t){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const PI={name:Ew("name"),version:Ew("version"),chainId:function(t){const e=ht(t,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):t8(e)},verifyingContract:function(t){try{return bs(t).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=ve(t,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",t),ge(e)}};function Cp(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",s=parseInt(e[2]);Z(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",t);const r=e8(SI,n?s-1:s),i=n?(r+G5)*kI:Y5;return function(o){const a=ht(o,"value");return Z(a>=i&&a<=r,`value out-of-bounds for ${t}`,"value",a),Ya(n?ZM(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Z(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(s){const r=ve(s);return Z(r.length===n,`invalid length for ${t}`,"value",s),_I(s)}}}switch(t){case"address":return function(e){return vi(bs(e),32)};case"bool":return function(e){return e?CI:EI};case"bytes":return function(e){return Ht(e)};case"string":return function(e){return Mb(e)}}return null}function Pw(t,e){return`${t}(${e.map(({name:n,type:s})=>s+" "+n).join(",")})`}function xd(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var yu,gr,Da,Rf,q5;const os=class os{constructor(e){We(this,Rf);re(this,"primaryType");We(this,yu);We(this,gr);We(this,Da);be(this,gr,new Map),be(this,Da,new Map);const n=new Map,s=new Map,r=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:c,type:u})=>{let{base:d,index:f}=xd(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:c,type:d+(f||"")}}),n.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),be(this,yu,JSON.stringify(i));for(const l in i){const c=new Set;for(const u of i[l]){Z(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const d=xd(u.type).base;Z(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",e),!Cp(d)&&(Z(s.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),s.get(d).push(l),n.get(l).add(d))}}const o=Array.from(s.keys()).filter(l=>s.get(l).length===0);Z(o.length!==0,"missing primary type","types",e),Z(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Vn(this,{primaryType:o[0]});function a(l,c){Z(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(s.has(u)){a(u,c);for(const d of c)r.get(d).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of r){const u=Array.from(c);u.sort(),Ee(this,gr).set(l,Pw(l,i[l])+u.map(d=>Pw(d,i[d])).join(""))}}get types(){return JSON.parse(Ee(this,yu))}getEncoder(e){let n=Ee(this,Da).get(e);return n||(n=on(this,Rf,q5).call(this,e),Ee(this,Da).set(e,n)),n}encodeType(e){const n=Ee(this,gr).get(e);return Z(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Ht(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,s){if(Cp(e))return s(e,n);const r=xd(e).array;if(r)return Z(r.count===-1||r.count===n.length,`array length mismatch; expected length ${r.count}`,"value",n),n.map(o=>this._visit(r.prefix,o,s));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],s),o),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new os(e)}static getPrimaryType(e){return os.from(e).primaryType}static hashStruct(e,n,s){return os.from(n).hashStruct(e,s)}static hashDomain(e){const n=[];for(const s in e){if(e[s]==null)continue;const r=Cw[s];Z(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),n.push({name:s,type:r})}return n.sort((s,r)=>_p.indexOf(s.name)-_p.indexOf(r.name)),os.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,s){return At(["0x1901",os.hashDomain(e),os.from(n).hash(s)])}static hash(e,n,s){return Ht(os.encode(e,n,s))}static async resolveNames(e,n,s,r){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!tr(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=os.from(n);o.visit(s,(a,l)=>(a==="address"&&!tr(l,20)&&(i[l]="0x"),l));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),s=o.visit(s,(a,l)=>a==="address"&&i[l]?i[l]:l),{domain:e,value:s}}static getPayload(e,n,s){os.hashDomain(e);const r={},i=[];_p.forEach(l=>{const c=e[l];c!=null&&(r[l]=PI[l](c),i.push({name:l,type:Cw[l]}))});const o=os.from(n);n=o.types;const a=Object.assign({},n);return Z(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(s),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(s,(l,c)=>{if(l.match(/^bytes(\d*)/))return ge(ve(c));if(l.match(/^u?int/))return ht(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return Z(typeof c=="string","invalid string","value",c),c}Z(!1,"unsupported type","type",l)})}}};yu=new WeakMap,gr=new WeakMap,Da=new WeakMap,Rf=new WeakSet,q5=function(e){{const r=Cp(e);if(r)return r}const n=xd(e).array;if(n){const r=n.prefix,i=this.getEncoder(r);return o=>{Z(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return Ee(this,gr).has(r)&&(a=a.map(Ht)),Ht(At(a))}}const s=this.types[e];if(s){const r=Mb(Ee(this,gr).get(e));return i=>{const o=s.map(({name:a,type:l})=>{const c=this.getEncoder(l)(i[a]);return Ee(this,gr).has(l)?Ht(c):c});return o.unshift(r),At(o)}}Z(!1,`unknown type: ${e}`,"type",e)};let ef=os;BigInt(0);function K5(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=ge(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of n)!(r in t)||t[r]==null||(e[r]=ht(t[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in t)||t[r]==null||(e[r]=Yn(t[r],`request.${r}`));return t.accessList&&(e.accessList=r0(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(r=>Jf(r)?ge(r):Object.assign({},r))),e}function Mi(t,e){if(t.provider)return t.provider;qe(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Tw(t,e){let n=K5(e);if(n.to!=null&&(n.to=Ic(n.to,t)),n.from!=null){const s=n.from;n.from=Promise.all([t.getAddress(),Ic(s,t)]).then(([r,i])=>(Z(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else n.from=t.getAddress();return await fb(n)}class X5{constructor(e){re(this,"provider");Vn(this,{provider:e||null})}async getNonce(e){return Mi(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Tw(this,e)}async populateTransaction(e){const n=Mi(this,"populateTransaction"),s=await Tw(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const o=ht(s.chainId);Z(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?Z(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&i&&Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const o=await n.getFeeData();qe(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(s.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const a=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=a,s.maxPriorityFeePerGas=a}else s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(qe(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice),s.type=0):qe(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await fb(s)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Mi(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Mi(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Mi(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Mi(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Mi(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const r=Zh.from(s);return await n.broadcastTransaction(await this.signTransaction(r))}authorize(e){qe(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var La,hh;const Ly=class Ly extends X5{constructor(n,s){super(s);We(this,La);re(this,"address");Vn(this,{address:n})}async getAddress(){return this.address}connect(n){return new Ly(this.address,n)}async signTransaction(n){on(this,La,hh).call(this,"transactions","signTransaction")}async signMessage(n){on(this,La,hh).call(this,"messages","signMessage")}async signTypedData(n,s,r){on(this,La,hh).call(this,"typed-data","signTypedData")}};La=new WeakSet,hh=function(n,s){qe(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:s})};let Em=Ly;var ja;const jy=class jy extends X5{constructor(n,s){super(s);re(this,"address");We(this,ja);Z(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),be(this,ja,n);const r=Ru(this.signingKey.publicKey);Vn(this,{address:r})}get signingKey(){return Ee(this,ja)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new jy(Ee(this,ja),n)}async signTransaction(n){n=K5(n);const{to:s,from:r}=await fb({to:n.to?Ic(n.to,this):void 0,from:n.from?Ic(n.from,this):void 0});s!=null&&(n.to=s),r!=null&&(n.from=r),n.from!=null&&(Z(bs(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const i=Zh.from(n);return i.signature=this.signingKey.sign(i.unsignedHash),i.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(wI(n)).serialized}authorizeSync(n){Z(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const s=this.signingKey.sign(vI(n));return Object.assign({},{address:bs(n.address),nonce:ht(n.nonce||0),chainId:ht(n.chainId||0)},{signature:s})}async authorize(n){return n=Object.assign({},n,{address:await Ic(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,s,r){const i=await ef.resolveNames(n,s,r,async o=>{qe(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return qe(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(ef.hash(i.domain,s,i.value)).serialized}};ja=new WeakMap;let Pm=jy;const tf=" !#$%&'()*+,-./<=>?@[]^_`{|}~",TI=/^[a-z]*$/i;function Mw(t,e){let n=97;return t.reduce((s,r)=>(r===e?n++:r.match(TI)?s.push(String.fromCharCode(n)+r):(n=97,s.push(r)),s),[])}function MI(t,e){for(let r=tf.length-1;r>=0;r--)t=t.split(tf[r]).join(e.substring(2*r,2*r+2));const n=[],s=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(r,i,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(i.toLowerCase());return""});if(s)throw new Error(`leftovers: ${JSON.stringify(s)}`);return Mw(Mw(n,";"),":")}function II(t){return Z(t[0]==="0","unsupported auwl data","data",t),MI(t.substring(1+2*tf.length),t.substring(1,1+2*tf.length))}class NI{constructor(e){re(this,"locale");Vn(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var Fa,vu,Ji,wu,Tm;class AI extends NI{constructor(n,s,r){super(n);We(this,wu);We(this,Fa);We(this,vu);We(this,Ji);be(this,Fa,s),be(this,vu,r),be(this,Ji,null)}get _data(){return Ee(this,Fa)}_decodeWords(){return II(Ee(this,Fa))}getWord(n){const s=on(this,wu,Tm).call(this);return Z(n>=0&&n<s.length,`invalid word index: ${n}`,"index",n),s[n]}getWordIndex(n){return on(this,wu,Tm).call(this).indexOf(n)}}Fa=new WeakMap,vu=new WeakMap,Ji=new WeakMap,wu=new WeakSet,Tm=function(){if(Ee(this,Ji)==null){const n=this._decodeWords();if(Mb(n.join(`
`)+`
`)!==Ee(this,vu))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);be(this,Ji,n)}return Ee(this,Ji)};const RI="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",OI="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let Ep=null;class po extends AI{constructor(){super("en",RI,OI)}static wordlist(){return Ep==null&&(Ep=new po),Ep}}function Q5(t){return(1<<t)-1<<8-t&255}function DI(t){return(1<<t)-1&255}function Pp(t,e){UC("NFKD"),e==null&&(e=po.wordlist());const n=e.split(t);Z(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const s=new Uint8Array(Math.ceil(11*n.length/8));let r=0;for(let c=0;c<n.length;c++){let u=e.getWordIndex(n[c].normalize("NFKD"));Z(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let d=0;d<11;d++)u&1<<10-d&&(s[r>>3]|=1<<7-r%8),r++}const i=32*n.length/3,o=n.length/3,a=Q5(o),l=ve(xs(s.slice(0,i/8)))[0]&a;return Z(l===(s[s.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),ge(s.slice(0,i/8))}function Tp(t,e){Z(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=po.wordlist());const n=[0];let s=11;for(let o=0;o<t.length;o++)s>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],s-=8):(n[n.length-1]<<=s,n[n.length-1]|=t[o]>>8-s,n.push(t[o]&DI(8-s)),s+=3);const r=t.length/4,i=parseInt(xs(t).substring(2,4),16)&Q5(r);return n[n.length-1]<<=r,n[n.length-1]|=i>>8-r,e.join(n.map(o=>e.getWord(o)))}const Mp={};class su{constructor(e,n,s,r,i){re(this,"phrase");re(this,"password");re(this,"wordlist");re(this,"entropy");r==null&&(r=""),i==null&&(i=po.wordlist()),Qf(e,Mp,"Mnemonic"),Vn(this,{phrase:s,password:r,wordlist:i,entropy:n})}computeSeed(){const e=no("mnemonic"+this.password,"NFKD");return Mu(no(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,s){const r=Pp(e,s);return e=Tp(ve(r),s),new su(Mp,r,e,n,s)}static fromEntropy(e,n,s){const r=ve(e,"entropy"),i=Tp(r,s);return new su(Mp,ge(r),i,n,s)}static entropyToPhrase(e,n){const s=ve(e,"entropy");return Tp(s,n)}static phraseToEntropy(e,n){return Pp(e,n)}static isValidMnemonic(e,n){try{return Pp(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Kt=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},Ip=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},fh,ss,$s;const LI={16:10,24:12,32:14},jI=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],es=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],bd=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],FI=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],zI=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],BI=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],$I=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],UI=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],WI=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],HI=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],VI=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],YI=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],GI=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],qI=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],KI=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Np(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class Ib{get key(){return Kt(this,fh,"f").slice()}constructor(e){if(fh.set(this,void 0),ss.set(this,void 0),$s.set(this,void 0),!(this instanceof Ib))throw Error("AES must be instanitated with `new`");Ip(this,fh,new Uint8Array(e),"f");const n=LI[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");Ip(this,$s,[],"f"),Ip(this,ss,[],"f");for(let u=0;u<=n;u++)Kt(this,$s,"f").push([0,0,0,0]),Kt(this,ss,"f").push([0,0,0,0]);const s=(n+1)*4,r=this.key.length/4,i=Np(this.key);let o;for(let u=0;u<r;u++)o=u>>2,Kt(this,$s,"f")[o][u%4]=i[u],Kt(this,ss,"f")[n-o][u%4]=i[u];let a=0,l=r,c;for(;l<s;){if(c=i[r-1],i[0]^=es[c>>16&255]<<24^es[c>>8&255]<<16^es[c&255]<<8^es[c>>24&255]^jI[a]<<24,a+=1,r!=8)for(let p=1;p<r;p++)i[p]^=i[p-1];else{for(let p=1;p<r/2;p++)i[p]^=i[p-1];c=i[r/2-1],i[r/2]^=es[c&255]^es[c>>8&255]<<8^es[c>>16&255]<<16^es[c>>24&255]<<24;for(let p=r/2+1;p<r;p++)i[p]^=i[p-1]}let u=0,d,f;for(;u<r&&l<s;)d=l>>2,f=l%4,Kt(this,$s,"f")[d][f]=i[u],Kt(this,ss,"f")[n-d][f]=i[u++],l++}for(let u=1;u<n;u++)for(let d=0;d<4;d++)c=Kt(this,ss,"f")[u][d],Kt(this,ss,"f")[u][d]=YI[c>>24&255]^GI[c>>16&255]^qI[c>>8&255]^KI[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=Kt(this,$s,"f").length-1,s=[0,0,0,0];let r=Np(e);for(let a=0;a<4;a++)r[a]^=Kt(this,$s,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=FI[r[l]>>24&255]^zI[r[(l+1)%4]>>16&255]^BI[r[(l+2)%4]>>8&255]^$I[r[(l+3)%4]&255]^Kt(this,$s,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Kt(this,$s,"f")[n][a],i[4*a]=(es[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(es[r[(a+1)%4]>>16&255]^o>>16)&255,i[4*a+2]=(es[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(es[r[(a+3)%4]&255]^o)&255;return i}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=Kt(this,ss,"f").length-1,s=[0,0,0,0];let r=Np(e);for(let a=0;a<4;a++)r[a]^=Kt(this,ss,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=UI[r[l]>>24&255]^WI[r[(l+3)%4]>>16&255]^HI[r[(l+2)%4]>>8&255]^VI[r[(l+1)%4]&255]^Kt(this,ss,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Kt(this,ss,"f")[n][a],i[4*a]=(bd[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(bd[r[(a+3)%4]>>16&255]^o>>16)&255,i[4*a+2]=(bd[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(bd[r[(a+1)%4]&255]^o)&255;return i}}fh=new WeakMap,ss=new WeakMap,$s=new WeakMap;class XI{constructor(e,n,s){if(s&&!(this instanceof s))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Ib(n)},name:{enumerable:!0,value:e}})}}var Oo=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},ts=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},ac,Li,rs;class nf extends XI{constructor(e,n){super("CTR",e,nf),ac.set(this,void 0),Li.set(this,void 0),rs.set(this,void 0),Oo(this,rs,new Uint8Array(16),"f"),ts(this,rs,"f").fill(0),Oo(this,ac,ts(this,rs,"f"),"f"),Oo(this,Li,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(ts(this,rs,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)ts(this,rs,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");ts(this,rs,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(ts(this,rs,"f")[e]===255)ts(this,rs,"f")[e]=0;else{ts(this,rs,"f")[e]++;break}}encrypt(e){var n,s;const r=new Uint8Array(e);for(let i=0;i<r.length;i++)ts(this,Li,"f")===16&&(Oo(this,ac,this.aes.encrypt(ts(this,rs,"f")),"f"),Oo(this,Li,0,"f"),this.increment()),r[i]^=ts(this,ac,"f")[Oo(this,Li,(s=ts(this,Li,"f"),n=s++,s),"f"),n];return r}decrypt(e){return this.encrypt(e)}}ac=new WeakMap,Li=new WeakMap,rs=new WeakMap;function jl(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function J5(t){return typeof t=="string"?no(t,"NFKC"):Bo(t)}const QI="m/44'/60'/0'/0/0";function Z5(t){const e=t.salt!=null?ve(t.salt,"options.salt"):Cr(32);let n=1<<17,s=8,r=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(s=t.scrypt.r),t.scrypt.p&&(r=t.scrypt.p)),Z(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),Z(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt r parameter","options.r",s),Z(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt p parameter","options.p",r),{name:"scrypt",dkLen:32,salt:e,N:n,r:s,p:r}}function e3(t,e,n,s){const r=ve(n.privateKey,"privateKey"),i=s.iv!=null?ve(s.iv,"options.iv"):Cr(16);Z(i.length===16,"invalid options.iv length","options.iv",s.iv);const o=s.uuid!=null?ve(s.uuid,"options.uuid"):Cr(16);Z(o.length===16,"invalid options.uuid length","options.uuid",s.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new nf(a,i),u=ve(c.encrypt(r)),d=Ht(At([l,u])),f={address:n.address.substring(2).toLowerCase(),id:a8(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:ge(i).substring(2)},ciphertext:ge(u).substring(2),kdf:"scrypt",kdfparams:{salt:ge(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:d.substring(2)}};if(n.mnemonic){const p=s.client!=null?s.client:`ethers/${$C}`,g=n.mnemonic.path||QI,x=n.mnemonic.locale||"en",w=t.slice(32,64),m=ve(n.mnemonic.entropy,"account.mnemonic.entropy"),y=Cr(16),v=new nf(w,y),b=ve(v.encrypt(m)),S=new Date,E="UTC--"+(S.getUTCFullYear()+"-"+jl(S.getUTCMonth()+1,2)+"-"+jl(S.getUTCDate(),2)+"T"+jl(S.getUTCHours(),2)+"-"+jl(S.getUTCMinutes(),2)+"-"+jl(S.getUTCSeconds(),2)+".0Z")+"--"+f.address;f["x-ethers"]={client:p,gethFilename:E,path:g,locale:x,mnemonicCounter:ge(y).substring(2),mnemonicCiphertext:ge(b).substring(2),version:"0.1"}}return JSON.stringify(f)}function JI(t,e,n){n==null&&(n={});const s=J5(e),r=Z5(n),i=Nu(s,r.salt,r.N,r.r,r.p,64);return e3(ve(i),r,t,n)}async function ZI(t,e,n){n==null&&(n={});const s=J5(e),r=Z5(n),i=await Iu(s,r.salt,r.N,r.r,r.p,64,n.progressCallback);return e3(ve(i),r,t,n)}const Ap="m/44'/60'/0'/0/0",eN=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),gi=2147483648,tN=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),nN="0123456789abcdef";function sf(t,e){let n="";for(;t;)n=nN[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function Mm(t){const e=ve(t),n=pb(xs(xs(e)),0,4),s=At([e,n]);return r8(s)}const Ys={};function t3(t,e,n,s){const r=new Uint8Array(37);t&gi?(qe(s!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),r.set(ve(s),1)):r.set(ve(n));for(let o=24;o>=0;o-=8)r[33+(o>>3)]=t>>24-o&255;const i=ve(ml("sha512",e,r));return{IL:i.slice(0,32),IR:i.slice(32)}}function n3(t,e){const n=e.split("/");Z(n.length>0,"invalid path","path",e),n[0]==="m"&&(Z(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let s=t;for(let r=0;r<n.length;r++){const i=n[r];if(i.match(/^[0-9]+'$/)){const o=parseInt(i.substring(0,i.length-1));Z(o<gi,"invalid path index",`path[${r}]`,i),s=s.deriveChild(gi+o)}else if(i.match(/^[0-9]+$/)){const o=parseInt(i);Z(o<gi,"invalid path index",`path[${r}]`,i),s=s.deriveChild(o)}else Z(!1,"invalid path component",`path[${r}]`,i)}return s}var ku,Im,Zi,lc;const ws=class ws extends Pm{constructor(n,s,r,i,o,a,l,c,u){super(s,u);We(this,ku);re(this,"publicKey");re(this,"fingerprint");re(this,"parentFingerprint");re(this,"mnemonic");re(this,"chainCode");re(this,"path");re(this,"index");re(this,"depth");Qf(n,Ys,"HDNodeWallet"),Vn(this,{publicKey:s.compressedPublicKey});const d=pb(xl(xs(this.publicKey)),0,4);Vn(this,{parentFingerprint:r,fingerprint:d,chainCode:i,path:o,index:a,depth:l}),Vn(this,{mnemonic:c})}connect(n){return new ws(Ys,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,s){return await ZI(on(this,ku,Im).call(this),n,{progressCallback:s})}encryptSync(n){return JI(on(this,ku,Im).call(this),n)}get extendedKey(){return qe(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Mm(At(["0x0488ADE4",sf(this.depth,1),this.parentFingerprint,sf(this.index,4),this.chainCode,At(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new iu(Ys,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const s=Yn(n,"index");Z(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~gi),s&gi&&(r+="'"));const{IR:i,IL:o}=t3(s,this.chainCode,this.publicKey,this.privateKey),a=new Zs(Ya((HC(o)+BigInt(this.privateKey))%tN,32));return new ws(Ys,a,this.fingerprint,ge(i),r,s,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return n3(this,n)}static fromExtendedKey(n){const s=Nt(i8(n));Z(s.length===82||Mm(s.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const r=s[4],i=ge(s.slice(5,9)),o=parseInt(ge(s.slice(9,13)).substring(2),16),a=ge(s.slice(13,45)),l=s.slice(45,78);switch(ge(s.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=ge(l);return new iu(Ys,Ru(c),c,i,a,null,o,r,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new ws(Ys,new Zs(l.slice(1)),i,a,null,o,r,null,null)}Z(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,s,r){var o;n==null&&(n=""),s==null&&(s=Ap),r==null&&(r=po.wordlist());const i=su.fromEntropy(Cr(16),n,r);return on(o=ws,Zi,lc).call(o,i.computeSeed(),i).derivePath(s)}static fromMnemonic(n,s){var r;return s||(s=Ap),on(r=ws,Zi,lc).call(r,n.computeSeed(),n).derivePath(s)}static fromPhrase(n,s,r,i){var a;s==null&&(s=""),r==null&&(r=Ap),i==null&&(i=po.wordlist());const o=su.fromPhrase(n,s,i);return on(a=ws,Zi,lc).call(a,o.computeSeed(),o).derivePath(r)}static fromSeed(n){var s;return on(s=ws,Zi,lc).call(s,n,null)}};ku=new WeakSet,Im=function(){const n={address:this.address,privateKey:this.privateKey},s=this.mnemonic;return this.path&&s&&s.wordlist.locale==="en"&&s.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:s.entropy}),n},Zi=new WeakSet,lc=function(n,s){Z(Jf(n),"invalid seed","seed","[REDACTED]");const r=ve(n,"seed");Z(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const i=ve(ml("sha512",eN,r)),o=new Zs(ge(i.slice(0,32)));return new ws(Ys,o,"0x00000000",ge(i.slice(32)),"m",0,0,s,null)},We(ws,Zi);let ru=ws;class iu extends Em{constructor(n,s,r,i,o,a,l,c,u){super(s,u);re(this,"publicKey");re(this,"fingerprint");re(this,"parentFingerprint");re(this,"chainCode");re(this,"path");re(this,"index");re(this,"depth");Qf(n,Ys,"HDNodeVoidWallet"),Vn(this,{publicKey:r});const d=pb(xl(xs(r)),0,4);Vn(this,{publicKey:r,fingerprint:d,parentFingerprint:i,chainCode:o,path:a,index:l,depth:c})}connect(n){return new iu(Ys,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return qe(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Mm(At(["0x0488B21E",sf(this.depth,1),this.parentFingerprint,sf(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const s=Yn(n,"index");Z(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~gi),s&gi&&(r+="'"));const{IR:i,IL:o}=t3(s,this.chainCode,this.publicKey,null),a=Zs.addPoints(o,this.publicKey,!0),l=Ru(a);return new iu(Ys,l,a,this.fingerprint,ge(i),r,s,this.depth+1,this.provider)}derivePath(n){return n3(this,n)}}class Iw{constructor(e){re(this,"mnemonic");re(this,"walletAddress");re(this,"chainID");this.mnemonic=e.mnemonic,this.walletAddress=e.walletAddress,this.chainID=e.chainID||10900}generateTxID(){const e=Date.now(),n=Math.floor(Math.random()*1e6);return`tx-${e}-${n}`}async getPrivateKeyHex(){const e=ru.fromPhrase(this.mnemonic.trim(),"","m/44'/60'/0'/0/0");if(e.address.toLowerCase()!==this.walletAddress.toLowerCase())throw new Error(`Address mismatch: derived ${e.address} does not match ${this.walletAddress}`);const n=BigInt(e.privateKey),s=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(n===0n||n>=s)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const i=n.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(i))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return i}async signPayload(e){const n=await this.getPrivateKeyHex(),s=Math.floor(Date.now()/1e3);let r;e.deadline&&(r=parseInt(e.deadline,10));const i={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:s,payload:e};r!==void 0&&(i.deadline=r);const o=await Ae.generateSingleSignature(JSON.stringify(i),n,this.walletAddress.toLowerCase());if(!o.success||!o.signature)throw new Error(o.error||"Failed to generate signature");return o.signature}async buildCompleteMessage(e,n,s=3600){const i=Math.floor(Date.now()/1e3)+s,o=await n.getNextNonce();return{...e,owner:this.walletAddress,nonce:o,deadline:i.toString()}}buildEIP712Tx(e,n,s){const r=Math.floor(Date.now()/1e3);let i;e.deadline&&(i=parseInt(e.deadline,10));const o={txId:s||this.generateTxID(),sigType:1,threshold:1,timestamp:r,payload:e,signatures:[{signer:this.walletAddress,signature:n}]};return i!==void 0&&(o.deadline=i),o}getWalletAddress(){return this.walletAddress}getChainID(){return this.chainID}}const Nb="sys::onboard",sN="clob::change_margin_ratio",rN="clob::submit_order",Nw="clob::cancel_order",Aw="bucket::close_position",iN="clob::modify_order",oN="clob::change_leverage",aN="clob::inter_transfer",lN="clob::swap",cN="bank::mint",uN="bank::extract_to_bucket",dN="bank::withdraw_from_bucket",hN="bank::bucket_transfer",fN="bank::transfer";var tt=(t=>(t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t))(tt||{});function s3(t,e){const n=t.bucket_id||"---",s=r=>r==null||r===""?0:typeof r=="string"||typeof r=="number"?e(r):0;return{bucketId:n,address:t.address||"",totalEquity:s(t.total_equity||t.dedicated_margin),dedicatedMargin:s(t.dedicated_margin),usedMargin:s(t.used_margin),availableMargin:s(t.available_margin),totalPositions:t.total_positions||0,unrealizedPnL:s(t.unrealized_pnl),leverage:typeof t.max_leverage=="string"?parseFloat(t.max_leverage):typeof t.max_leverage=="number"?t.max_leverage:0,maxLeverage:typeof t.max_leverage=="string"?parseFloat(t.max_leverage):typeof t.max_leverage=="number"?t.max_leverage:0,marginMode:t.margin_type||"CROSS",liquidationPrice:s(t.liquidation_price),riskLevel:t.risk_level||"",riskFactor:t.risk_factor||"",bucketType:t.bucket_type||"",collateralAsset:t.collateral_asset||"",lastUpdated:typeof t.last_updated=="string"?parseInt(t.last_updated,10):typeof t.last_updated=="number"?t.last_updated:0}}function pN(t){const e=t.totalEquity>0?Math.min(Math.max(t.usedMargin/t.totalEquity,0),1):0,n=t.totalEquity>0?t.usedMargin/t.totalEquity:0,s=t.marginMode==="ISOLATED"||t.marginMode==="Isolated"||t.marginMode==="ISOLATE"||t.marginMode==="isolated"?"Isolated":"Cross";return{bucketId:String(t.bucketId),marginType:s,maintenanceMargin:t.usedMargin,nominalValue:t.totalEquity,riskRatio:e,unrealizedPnL:t.unrealizedPnL,leverage:t.leverage,usedMargin:t.usedMargin,totalEquity:t.totalEquity,availableMargin:t.availableMargin,crossMarginRatio:n}}function Fl(t){return t!==null&&typeof t=="object"&&typeof t.price=="number"&&typeof t.market_id=="string"&&typeof t.quantity=="number"&&typeof t.timestamp=="number"&&typeof t.is_buyer_maker=="boolean"&&typeof t.trade_id=="string"}function Rp(t){return t!==null&&typeof t=="object"&&typeof t.symbol=="string"&&typeof t.mark_price=="number"&&typeof t.timestamp=="number"}class yl{constructor(e){re(this,"httpClient");re(this,"infoClient");re(this,"nonceManager");re(this,"mnemonic");re(this,"chainID");re(this,"walletAddress");re(this,"nonceCounter",null);re(this,"signatureBuilder");this.httpClient=new hb(e.baseURL,e.maxRetries||3),this.infoClient=new wn({baseURL:e.baseURL}),this.nonceManager=new zC(this.infoClient),this.mnemonic=e.mnemonic,this.chainID=e.chainID||10900}getSignatureBuilder(){if(!this.signatureBuilder){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");this.signatureBuilder=new Iw({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}return this.signatureBuilder}getNonceProvider(){return{getNextNonce:()=>this.getNextNonce()}}async initialize(){await Ae.initialize();const e=await Ae.generateAddress(this.mnemonic,0);if(!e.success||!e.address)throw new Error(`Failed to generate wallet address: ${e.error}`);this.walletAddress=e.address,this.signatureBuilder=new Iw({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}getWalletAddress(){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");return this.walletAddress}async refreshNonceFromServer(){const e=this.getWalletAddress(),n=await this.nonceManager.getExpectedNextNonce(e,!1);this.nonceCounter=n.next_nonce,console.log("[ExchangeClient] Refreshed nonce from server",{walletAddress:e,newNonce:this.nonceCounter})}async getNextNonce(){return this.nonceCounter===null&&await this.refreshNonceFromServer(),this.nonceCounter++,this.nonceCounter.toString()}buildOrderPayload(e){const n=typeof e.price=="string"?e.price:dt(e.price),s=typeof e.quantity=="string"?e.quantity:dt(e.quantity),r={action:rN,marketId:e.marketId,side:e.side.toUpperCase(),orderType:e.orderType.toUpperCase(),price:n,quantity:s};return e.leverage&&(r.leverage=e.leverage),e.takeProfit&&(r.takeProfit=e.takeProfit),e.stopLoss&&(r.stopLoss=e.stopLoss),r}async placeOrder(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.side||e.side.toUpperCase()!=="BUY"&&e.side.toUpperCase()!=="SELL")throw new Error("side must be BUY or SELL");if(!e.orderType||e.orderType.toUpperCase()!=="LIMIT"&&e.orderType.toUpperCase()!=="MARKET")throw new Error("orderType must be LIMIT or MARKET");const n=typeof e.price=="string"?parseFloat(e.price):e.price,s=typeof e.quantity=="string"?parseFloat(e.quantity):e.quantity;if(!n||n<=0)throw new Error("price must be positive");if(!s||s<=0)throw new Error("quantity must be positive");this.walletAddress||await this.initialize();const r=this.buildOrderPayload(e),i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3)-5,c=`order-${Date.now()}-${Math.floor(Math.random()*1e6)}`,u=e.side.toUpperCase()==="BUY",d={address:this.getWalletAddress(),asset_pair:e.marketId,market_id:e.marketId,price:o.price,size:o.quantity,is_buy:u,order_type:e.orderType.toUpperCase(),timestamp:l,client_order_id:c,nonce:o.nonce,deadline:o.deadline,signature:a,time_in_force:e.timeInForce||"GTC"};return e.leverage&&(d.leverage=e.leverage),e.takeProfit&&(d.take_profit=e.takeProfit),e.stopLoss&&(d.stop_loss=e.stopLoss),e.postOnly&&(d.post_only=!0),e.hidden&&(d.hidden=!0),e.displayQuantity&&(d.display_quantity=e.displayQuantity),e.reduceOnly&&(d.reduce_only=!0),(await this.httpClient.post("/clob/v1/order",d)).body}async cancelOrder(e){var c,u,d,f,p,g;if(!e.orderId||e.orderId==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: orderId is empty",e),new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: marketId is empty",e),new Error("marketId cannot be empty");console.log("[ExchangeClient.cancelOrder] Input validation passed",{orderId:e.orderId,marketId:e.marketId}),this.walletAddress?console.log("[ExchangeClient.cancelOrder] Using existing wallet",{walletAddress:this.walletAddress}):(console.log("[ExchangeClient.cancelOrder] Wallet not initialized, initializing now..."),await this.initialize(),console.log("[ExchangeClient.cancelOrder] Wallet initialized",{walletAddress:this.walletAddress}));const n=this.getWalletAddress(),s={action:Nw,orderId:e.orderId,marketId:e.marketId,address:n};console.log("[ExchangeClient.cancelOrder] Payload built",{payload:s,action:Nw});const r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider());console.log("[ExchangeClient.cancelOrder] Complete message built",{action:i.action,orderId:i.orderId,marketId:i.marketId,address:i.address,owner:i.owner,nonce:i.nonce,deadline:i.deadline,hasAllFields:!!(i.action&&i.orderId&&i.marketId&&i.owner&&i.nonce&&i.deadline)}),console.log("[ExchangeClient.cancelOrder] Generating signature...");const o=await r.signPayload(i);console.log("[ExchangeClient.cancelOrder] Signature generated",{signatureLength:o==null?void 0:o.length,signaturePrefix:(o==null?void 0:o.substring(0,10))+"..."});const a=r.buildEIP712Tx(i,o);console.log("[ExchangeClient.cancelOrder] EIP712Tx built",{eip712Tx:{txId:a.txId,sigType:a.sigType,threshold:a.threshold,timestamp:a.timestamp,deadline:a.deadline,payloadAction:(c=a.payload)==null?void 0:c.action,payloadOrderId:(u=a.payload)==null?void 0:u.orderId,payloadMarketId:(d=a.payload)==null?void 0:d.marketId,signaturesCount:(f=a.signatures)==null?void 0:f.length,signer:(g=(p=a.signatures)==null?void 0:p[0])==null?void 0:g.signer}});const l=this.httpClient.getBaseURL?this.httpClient.getBaseURL():"unknown";console.log("[ExchangeClient.cancelOrder] Submitting to /router/v1/tx endpoint...",{endpoint:"/router/v1/tx",baseURL:l,fullURL:`${l}/router/v1/tx`});try{const x=await this.httpClient.post("/router/v1/tx",a);return console.log("[ExchangeClient.cancelOrder] API response received",{status:x.statusCode,hasBody:!!x.body,responseBody:x.body,orderId:e.orderId}),x.body}catch(x){if(BC(x)){console.log("[ExchangeClient.cancelOrder] Nonce error detected, refreshing nonce from server",{error:x instanceof Error?x.message:String(x),orderId:e.orderId}),await this.refreshNonceFromServer();const w=this.getSignatureBuilder(),m=await w.buildCompleteMessage(s,this.getNonceProvider()),y=await w.signPayload(m),v=w.buildEIP712Tx(m,y);console.log("[ExchangeClient.cancelOrder] Retrying with refreshed nonce",{newNonce:m.nonce});const b=await this.httpClient.post("/router/v1/tx",v);return console.log("[ExchangeClient.cancelOrder] Retry successful",{status:b.statusCode,responseBody:b.body}),b.body}throw console.error("[ExchangeClient.cancelOrder] API call failed",{error:x,errorMessage:x instanceof Error?x.message:String(x),errorStack:x instanceof Error?x.stack:void 0,orderId:e.orderId,marketId:e.marketId,walletAddress:this.walletAddress}),x}}async modifyOrder(e){if(!e.orderId||e.orderId==="")throw new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newPrice===void 0&&e.newQuantity===void 0)throw new Error("at least one of newPrice or newQuantity must be provided");this.walletAddress||await this.initialize();const n={action:iN,orderId:e.orderId,marketId:e.marketId};e.newPrice!==void 0&&(n.newPrice=typeof e.newPrice=="string"?e.newPrice:dt(e.newPrice)),e.newQuantity!==void 0&&(n.newQuantity=typeof e.newQuantity=="string"?e.newQuantity:dt(e.newQuantity));const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async changeLeverage(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newLeverage===void 0)throw new Error("newLeverage must be provided");this.walletAddress||await this.initialize();const n={action:oN,marketId:e.marketId,newLeverage:typeof e.newLeverage=="string"?e.newLeverage:dt(e.newLeverage),address:this.getWalletAddress()};e.leverageType&&(n.leverageType=e.leverageType),e.bucketId&&(n.bucketId=e.bucketId),e.reason&&(n.reason=e.reason);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async closePosition(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=Math.floor(Date.now()/1e3),r=s+300,i=await this.getNextNonce();let o;if(e.quantity===void 0||e.quantity===null)throw new Error("quantity is required for closePosition");o=typeof e.quantity=="string"?e.quantity:dt(e.quantity).toString();const a=typeof e.marketPrice=="string"?e.marketPrice:dt(e.marketPrice).toString(),l={action:Aw,address:n,marketId:e.marketId,closeSize:o,marketPrice:a,nonce:i,deadline:r},u=await this.getSignatureBuilder().signPayload(l),d={address:n,market_id:e.marketId,close_size:o,market_price:a,timestamp:s,sign_type:1,nonce:i.toString(),chain_id:this.chainID.toString(),deadline:r.toString(),signature:u};return(await this.httpClient.post("/bucket/v1/position/close",d)).body}async closePositionEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();let n=typeof e.quantity=="string"?e.quantity:dt(e.quantity),s=typeof e.marketPrice=="string"?e.marketPrice:dt(e.marketPrice);const r={action:Aw,address:this.getWalletAddress(),marketId:e.marketId,closeSize:n,marketPrice:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=i.buildEIP712Tx(o,a);return(await this.httpClient.post("/router/v1/tx",l)).body}async swap(e){if(!e.fromToken||e.fromToken==="")throw new Error("fromToken cannot be empty");if(!e.toToken||e.toToken==="")throw new Error("toToken cannot be empty");if(e.amountIn===void 0||typeof e.amountIn=="number"&&e.amountIn<=0)throw new Error("amountIn must be positive");if(e.minAmountOut===void 0||typeof e.minAmountOut=="number"&&e.minAmountOut<=0)throw new Error("minAmountOut must be positive");this.walletAddress||await this.initialize();const n={action:lN,fromToken:e.fromToken,toToken:e.toToken,amountIn:typeof e.amountIn=="string"?e.amountIn:dt(e.amountIn),minAmountOut:typeof e.minAmountOut=="string"?e.minAmountOut:dt(e.minAmountOut)};e.path&&e.path.length>0&&(n.path=e.path);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async changeMarginRatioEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n={action:sN,marketId:e.marketId,address:this.getWalletAddress()};e.bucketId&&(n.bucketId=e.bucketId);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async internTransferEIP712Tx(e){if(!e.fromAccount||e.fromAccount==="")throw new Error("fromAccount cannot be empty");if(!e.toAccount||e.toAccount==="")throw new Error("toAccount cannot be empty");if(!e.tokenAddress||e.tokenAddress==="")throw new Error("tokenAddress cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n={action:aN,fromAccount:e.fromAccount,toAccount:e.toAccount,amount:typeof e.amount=="string"?e.amount:dt(e.amount),tokenAddress:e.tokenAddress,address:this.getWalletAddress()},s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async bucketTransfer(e){if(!e.fromBucketId||e.fromBucketId.trim()==="")throw new Error("fromBucketId cannot be empty");if(!e.toBucketId||e.toBucketId.trim()==="")throw new Error("toBucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=typeof e.amount=="string"?e.amount:dt(e.amount),r={action:hN,fromBucketId:e.fromBucketId,toBucketId:e.toBucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,source_bucket_id:e.fromBucketId,target_bucket_id:e.toBucketId,amount:s,reason:"sdk_transfer",timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bucket/v1/bucket/transfer",c)).body}async extractToBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=typeof e.amount=="string"?e.amount:dt(e.amount),r={action:uN,bucketId:e.bucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/extract-to-bucket",c)).body}async withdrawFromBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=typeof e.amount=="string"?e.amount:dt(e.amount),r={action:dN,bucketId:e.bucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/withdraw-from-bucket",c)).body}async bankMint(e){if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=typeof e.amount=="string"?e.amount:dt(e.amount),s={action:cN,asset:e.assetId,amount:n},r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider()),o=await r.signPayload(i),a=r.buildEIP712Tx(i,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async bankTransfer(e){if(!e.to||e.to.trim()==="")throw new Error("to address cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=typeof e.amount=="string"?e.amount:dt(e.amount),s={action:fN,to:e.to,asset:e.assetId,amount:n},r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider()),o=await r.signPayload(i),a=r.buildEIP712Tx(i,o);return(await this.httpClient.post("/router/v1/tx",a)).body}}class gN{constructor(e){re(this,"ws",null);re(this,"state",tt.Disconnected);re(this,"handlers",new Map);re(this,"reconnectTimer",null);re(this,"reconnectAttempts",0);re(this,"config");re(this,"originalConfig");re(this,"pingInterval",null);re(this,"stateChangeHandlers",new Set);this.originalConfig=e;const n=this.convertHTTPToWebSocketURL(e.url);this.config={url:n,authToken:e.authToken||"",walletAddress:e.walletAddress||"",deviceID:e.deviceID||"",reconnectInterval:e.reconnectInterval||5e3,maxReconnectAttempts:e.maxReconnectAttempts||10}}convertHTTPToWebSocketURL(e){if(e.startsWith("ws://")||e.startsWith("wss://")){if(e.includes("router.morpheum.io")){const n=new URL(e);if(!n.pathname||n.pathname==="/")return n.pathname="/websocket",n.toString()}return e}if(e.includes("localhost")||e.includes("127.0.0.1")){const n=e.match(/:(\d+)/);return`ws://localhost:${n?n[1]:"8080"}/websocket`}if(e.startsWith("http://")){const n=e.replace("http://","ws://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(e.startsWith("https://")){const n=e.replace("https://","wss://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(!e||e.trim()===""||e.includes("router.morpheum.io"))return"wss://router.morpheum.io/websocket";try{const n=new URL(e.startsWith("http")?e:`https://${e}`),s=n.protocol==="https:"?"wss:":"ws:",r=n.pathname&&n.pathname!=="/"?n.pathname:"",i=r.endsWith("/websocket")?r:`${r}/websocket`;return`${s}//${n.host}${i}`}catch{return console.warn(`Failed to parse URL ${e}, defaulting to router.morpheum.io/websocket`),"wss://router.morpheum.io/websocket"}}getConnectionURL(){const e=[];this.config.authToken&&e.push(`token=${encodeURIComponent(this.config.authToken)}`),"walletAddress"in this.originalConfig&&this.originalConfig.walletAddress!==void 0&&e.push(`wallet=${encodeURIComponent(this.originalConfig.walletAddress||"")}`),this.config.deviceID&&e.push(`device_id=${encodeURIComponent(this.config.deviceID)}`);const n=this.config.url.includes("?")?"&":"?";return e.length>0?`${this.config.url}${n}${e.join("&")}`:this.config.url}async connect(){if(!(this.state===tt.Connected||this.state===tt.Connecting))return this.setState(tt.Connecting),new Promise((e,n)=>{let s=!1,r=!1,i=null;const o=a=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),this.setState(tt.Disconnected),n(a))};try{const a=this.getConnectionURL();console.log("Connecting to WebSocket:",a);const l=new WebSocket(a);i=window.setTimeout(()=>{!s&&!r&&(l.close(),o(new Error(`WebSocket connection timeout after 10 seconds. Unable to connect to ${a}. Check if the server is running and accessible.`)))},1e4),l.onopen=()=>{if(i!==null&&(clearTimeout(i),i=null),s=!0,this.ws=l,this.setState(tt.Connected),this.reconnectAttempts=0,this.config.authToken)try{const c={type:"auth",token:this.config.authToken};this.config.deviceID&&(c.device_id=this.config.deviceID),l.send(JSON.stringify(c))}catch(c){console.warn("Failed to send auth message after connection:",c)}this.startPing(),e()},l.onmessage=c=>{try{const u=JSON.parse(c.data);this.handleMessage(u)}catch(u){console.error("Failed to parse WebSocket message:",u)}},l.onerror=c=>{console.error("WebSocket error event:",c)},l.onclose=c=>{if(i!==null&&(clearTimeout(i),i=null),this.ws=null,this.stopPing(),!s&&!r){const u=c.code,d=c.reason||"Unknown reason",f=c.wasClean;let p=`WebSocket connection failed. Close code: ${u}`;u===1006?p=`WebSocket connection failed (abnormal closure, code ${u}). Unable to connect to ${a}. Possible causes: Server is not running, network issue, firewall blocking connection, or incorrect URL.`:u===1002?p=`WebSocket protocol error (code ${u}). The server may not support WebSocket protocol or there's a protocol mismatch.`:u===1003?p=`WebSocket unsupported data type (code ${u}).`:u===1008?p=`WebSocket connection closed due to policy violation (code ${u}): ${d}`:u===1011?p=`WebSocket server error (code ${u}): ${d}`:u===1e3?p=`WebSocket connection closed normally (code ${u}) but before opening.`:d&&d!=="Unknown reason"&&(p+=` Reason: ${d}`),!f&&u===1006&&(p+=" This usually indicates the connection was refused or the server is unreachable."),o(new Error(p))}else s&&(this.setState(tt.Disconnected),this.scheduleReconnect())}}catch(a){i!==null&&(clearTimeout(i),i=null);const l=a instanceof Error?a.message:String(a);o(new Error(`Failed to create WebSocket connection: ${l}`))}})}disconnect(){this.cancelReconnect(),this.stopPing(),this.ws&&(this.ws.close(),this.ws=null),this.handlers.clear(),this.stateChangeHandlers.clear(),this.setState(tt.Disconnected)}send(e){if(this.state!==tt.Connected||!this.ws)throw new Error("WebSocket not connected");this.ws.send(JSON.stringify(e))}on(e,n){this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(n)}off(e,n){if(!n){this.handlers.delete(e);return}const s=this.handlers.get(e);if(s){const r=s.indexOf(n);r>-1&&s.splice(r,1)}}getState(){return this.state}isConnected(){return this.state===tt.Connected}setState(e){const n=this.state;this.state=e,n!==e&&this.stateChangeHandlers.forEach(s=>{try{s(e)}catch(r){console.error("Error in state change handler:",r)}})}onStateChange(e){return this.stateChangeHandlers.add(e),()=>{this.stateChangeHandlers.delete(e)}}handleMessage(e){let n;if(typeof e.type=="string")if(e.type==="data")if(typeof e.channel=="string")n=e.channel;else{console.error("Missing channel in data message");return}else e.type==="error"?(n="error",e.error&&console.error("WebSocket server error:",{code:e.error.code,message:e.error.message,details:e.error.details})):e.type==="ack"?n="ack":e.type==="pong"?n="pong":n=e.type;else typeof e.event=="string"?n=e.event:n="message";const s=this.handlers.get(n)||[],r=this.handlers.get("*")||[];s.forEach(i=>{try{i(e)}catch(o){console.error(`Error in handler for ${n}:`,o)}}),n!=="error"&&r.forEach(i=>{try{i(e)}catch(o){console.error("Error in wildcard handler:",o)}})}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}this.reconnectAttempts++,this.setState(tt.Reconnecting),this.reconnectTimer=window.setTimeout(()=>{this.connect().catch(e=>{console.error("Reconnection failed:",e)})},this.config.reconnectInterval)}cancelReconnect(){this.reconnectTimer!==null&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectAttempts=0}startPing(){this.pingInterval=window.setInterval(()=>{this.ws&&this.state===tt.Connected&&this.send({type:"ping"})},3e4)}stopPing(){this.pingInterval!==null&&(clearInterval(this.pingInterval),this.pingInterval=null)}setAuthToken(e,n,s){this.config.authToken=e,this.config.walletAddress=n,this.config.deviceID=s,this.originalConfig.authToken=e,this.originalConfig.walletAddress=n,this.originalConfig.deviceID=s,console.log(`Auth set: address=${n}, device=${s}`)}updateAuth(e,n,s){e!==void 0&&(this.config.authToken=e,this.originalConfig.authToken=e),n!==void 0&&(this.config.walletAddress=n,this.originalConfig.walletAddress=n),s!==void 0&&(this.config.deviceID=s,this.originalConfig.deviceID=s),this.isConnected()&&(this.disconnect(),this.connect())}}class Eo{constructor(e){re(this,"wsClient");re(this,"subscriptions",new Map);re(this,"lastPriceWrappedCallbacks",new Map);re(this,"wrappedCallbacks",new Map);re(this,"multiFeedSubscriptions",new Map);re(this,"multiFeedHandlerRegistered",!1);this.wsClient=new gN({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID})}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.lastPriceWrappedCallbacks.clear(),this.wrappedCallbacks.clear(),this.multiFeedSubscriptions.clear(),this.multiFeedHandlerRegistered=!1}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,n,s){this.wsClient.setAuthToken(e,n,s)}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(n){return console.error("Failed to parse router data field:",n),null}return e}extractRouterData(e){if(e.type==="data"&&e.data){const n=this.parseRouterData(e.data);return n||console.warn("[SubscriptionClient] Failed to parse router data:",e.data),n}return e.type==="error"&&e.error?(console.error("WebSocket error response:",e.error),null):(e.type==="ack"||(e.type!=="data"?console.debug("[SubscriptionClient] Unexpected message type:",e.type,"Full message:",e):e.data||console.warn("[SubscriptionClient] Message type is 'data' but missing data field:",e)),null)}subscribeOrderbook(e,n,s=!0){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="orderbook";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&(s&&l.bids&&Array.isArray(l.bids)&&(l.bids=l.bids.map(([c,u])=>[Te(c),Te(u)])),s&&l.asks&&Array.isArray(l.asks)&&(l.asks=l.asks.map(([c,u])=>[Te(c),Te(u)])),n(l))};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeOrderbook(e,n){var i,o;const s="orderbook",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTrades(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="trades";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"trades",params:{market_id:e.toString()}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeTrades(e,n){var i,o;const s="trades",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"trades",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTicker(e,n){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="moniker",r="ticker";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&n(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(s,i);try{this.wsClient.send({type:"subscribe",channel:s,params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTicker(e,n){var o,a;const s="ticker",r="moniker",i=this.subscriptions.get(s)||[];if(n){const l=i.indexOf(n);if(l>-1){i.splice(l,1),this.subscriptions.set(s,i);const c=(o=this.wrappedCallbacks.get(s))==null?void 0:o.get(n);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(s).delete(n))}}else{const l=this.wrappedCallbacks.get(s);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((a=this.subscriptions.get(s))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:r,params:{market_id:e.toString()}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeUserUpdates(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="positions";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"positions",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeUserUpdates(e){var r,i;const n="positions",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"positions"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeLastPrice(e,n,s=!0){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="last_price";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=o=>{console.debug("[SubscriptionClient] last_price message received:",o);const a=this.extractRouterData(o);if(!a){console.warn("[SubscriptionClient] Failed to extract trade data from message:",o);return}if(console.debug("[SubscriptionClient] Extracted trade data:",a),!a.price){console.warn("[SubscriptionClient] Trade data missing price field:",a);return}s&&(a.price&&(a.price=Te(a.price)),a.quantity&&(a.quantity=Te(a.quantity))),console.debug("[SubscriptionClient] Calling callback with trade data:",a),n(a)};this.lastPriceWrappedCallbacks.set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){this.lastPriceWrappedCallbacks.delete(n);const a=this.subscriptions.get(r)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(r,a)),o}}unsubscribeLastPrice(e,n){var i;const s="last_price",r=this.subscriptions.get(s)||[];if(n){const o=r.indexOf(n);if(o>-1){r.splice(o,1),this.subscriptions.set(s,r);const a=this.lastPriceWrappedCallbacks.get(n);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(n))}}else r.forEach(o=>{const a=this.lastPriceWrappedCallbacks.get(o);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(o))}),this.subscriptions.delete(s);if(((i=this.subscriptions.get(s))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeFundingRate(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="funding_rate";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"funding_rate",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeFundingRate(e,n){var i,o;const s="funding_rate",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"funding_rate",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeBuckets(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="buckets";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"buckets",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBuckets(e){var r,i;const n="buckets",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"buckets"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeDeviation(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="deviation";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"deviation",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeDeviation(e,n){var i,o;const s="deviation",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"deviation",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeIndexPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="index_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"index_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeIndexPrice(e,n){var i,o;const s="index_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"index_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeKline(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n)throw new Error("Interval is required for kline subscription");const r="kline";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeKline(e,n,s){var o,a;const r="kline",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMarkPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="mark_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"mark_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeMarkPrice(e,n){var i,o;const s="mark_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"mark_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribePriceFeed(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="price_feed";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"price_feed",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribePriceFeed(e,n){var i,o;const s="price_feed",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"price_feed",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTWAP(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n||n<=0)throw new Error("Window size must be a positive number");const r="twap";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTWAP(e,n,s){var o,a;const r="twap",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMultiFeed(e,n,s,r){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const i="multi_feed";if(!this.multiFeedHandlerRegistered){const o=a=>{if(a.type==="data"&&a.channel==="multi_feed"&&a.sub_channel){const l=a.sub_channel,c=this.multiFeedSubscriptions.get(l)||[],u=this.subscriptions.get(i)||[];let d=a.data;if(typeof d=="string")try{d=JSON.parse(d)}catch(f){console.error("Failed to parse multi-feed data field:",f);return}d&&(c.forEach(f=>{try{f(d)}catch(p){console.error(`Error in multi-feed sub-channel callback for ${l}:`,p)}}),u.forEach(f=>{try{f({sub_channel:l,data:d})}catch(p){console.error("Error in multi-feed callback:",p)}}))}};this.wsClient.on(i,o),this.multiFeedHandlerRegistered=!0}this.subscriptions.has(i)||this.subscriptions.set(i,[]),this.subscriptions.get(i).push(s);try{const o={market_id:e.toString(),symbol:n};r&&(o.interval=r),this.wsClient.send({type:"subscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed",params:o})}catch(o){const a=this.subscriptions.get(i)||[],l=a.indexOf(s);throw l>-1&&(a.splice(l,1),this.subscriptions.set(i,a)),o}}subscribeMultiFeedSubChannel(e,n,s,r,i){if(this.multiFeedSubscriptions.has(s)||this.multiFeedSubscriptions.set(s,[]),this.multiFeedSubscriptions.get(s).push(r),(this.subscriptions.get("multi_feed")||[]).length===0){const a=()=>{};this.subscribeMultiFeed(e,n,a,i)}}unsubscribeMultiFeed(e,n,s){var o,a;const r="multi_feed",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);l>-1&&(i.splice(l,1),this.subscriptions.set(r,i))}else this.subscriptions.delete(r);if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.multiFeedSubscriptions.clear(),((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}unsubscribeMultiFeedSubChannel(e,n){const s=this.multiFeedSubscriptions.get(e)||[];if(n){const r=s.indexOf(n);r>-1&&(s.splice(r,1),s.length===0?this.multiFeedSubscriptions.delete(e):this.multiFeedSubscriptions.set(e,s))}else this.multiFeedSubscriptions.delete(e)}subscribeBalances(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="balances";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"balances",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBalances(e){var r,i;const n="balances",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"balances"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeOrders(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="orders";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"orders",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeOrders(e){var r,i;const n="orders",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orders"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}}async function mN(t,e,n,s,r){const i=ru.fromPhrase(t.trim(),"","m/44'/60'/0'/0/0");if(i.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${i.address} does not match provided ${e}`);let o;try{o=new Zs(i.privateKey)}catch(b){throw new Error(`Invalid private key: cannot create signing key - ${b.message}`)}const a=Ru(o.publicKey);if(a.toLowerCase()!==e.toLowerCase())throw new Error(`Private key validation failed: derived address ${a} does not match ${e}`);const l=BigInt(i.privateKey),c=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(l===0n||l>=c)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const d=l.toString(16).toLowerCase().padStart(64,"0"),f=ve("0x"+d);if(f.length!==32)throw new Error(`Invalid private key: expected 32 bytes, got ${f.length}`);if(f.every(b=>b===0))throw new Error("Invalid private key: cannot be zero");const g=BigInt("0x"+d);if(g!==l)throw new Error(`Private key encoding error: bytes do not match BigInt value. Original: ${l.toString(16)}, Reconstructed: ${g.toString(16)}`);const x=d;if(x.length!==64)throw new Error(`Invalid private key format: expected exactly 64 hex chars, got ${x.length}. This should never happen with a valid 32-byte private key.`);if(!/^[0-9a-f]{64}$/.test(x))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");const w=x,m={action:Nb,owner:e.toLowerCase(),nonce:n,timestamp:s,deadline:r},y={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:s,payload:m,deadline:parseInt(r,16)};console.log("[Onboard] Signing EIP-712 typed data with generateSingleSignature:",y),console.log("[Onboard] Private key format validated:",{length:w.length,format:"64 lowercase hex chars (no 0x prefix) - matches Go's hex.EncodeToString",preview:`${w.substring(0,8)}...${w.substring(56)}`,isValidSecp256k1:!0,withinCurveOrder:l<c,notZero:l!==0n,bytesLength:f.length,fullHex:w,firstByte:w.substring(0,2),lastByte:w.substring(62,64)}),console.log("[Onboard] Calling WASM GenerateSingleSignature with:",{txJSONLength:JSON.stringify(y).length,privateKeyHexLength:w.length,privateKeyHexPreview:w,signerAddress:e.toLowerCase()});const v=await Ae.generateSingleSignature(JSON.stringify(y),w,e.toLowerCase());if(console.log(v),!v.success||!v.signature)throw new Error(v.error||"Failed to generate signature");return console.log("[Onboard] signature:",v.signature),v.signature}async function xN(t){var e,n;try{const s=await mN(t.mnemonic,t.walletAddress,t.message.nonce,t.message.timestamp,t.message.deadline);console.log("[Onboard] Signature generated successfully, length:",s.length);const r={address:t.walletAddress,signature:s,nonce:t.message.nonce,timestamp:t.timestamp,deadline:t.message.deadline,action:Nb};t.username&&(r.username=t.username),t.referralCode&&(r.referral_code=t.referralCode),console.log("[Onboard] Request body:",{...r,signature:s.substring(0,20)+"..."});const o=await new hb(t.baseURL).post("/auth/v1/onboard",r);if(o.statusCode===200&&o.body){const a=o.body.access_token||o.body.authToken||o.body.token||o.body.accessToken,l=o.body.refresh_token||o.body.refreshToken,c=o.body.expires_at||o.body.expiresAt||(o.body.expires_in?t.timestamp+o.body.expires_in:void 0);return a?{success:!0,authToken:a,refreshToken:l,expiresAt:c}:{success:!1,error:"Response missing authToken field"}}else{const a=((e=o.body)==null?void 0:e.message)||((n=o.body)==null?void 0:n.error)||`HTTP ${o.statusCode}: ${o.body}`,l=new Error(a);throw l.responseBody=o.body,l.statusCode=o.statusCode,l}}catch(s){throw s}}const Ab={auth:{maxRetries:4,baseDelay:500,maxDelay:3e3,jitter:!0,multiplier:2},http:{maxRetries:3,baseDelay:100,maxDelay:5e3,jitter:!0,multiplier:2},nonce:{maxRetries:5,baseDelay:200,maxDelay:2e3,jitter:!0,multiplier:1.5}};function bN(t,e){let n=t.baseDelay*Math.pow(t.multiplier,e);if(n>t.maxDelay&&(n=t.maxDelay),t.jitter){const s=n*.25*Math.random();n+=s}return Math.floor(n)}function yN(t){return new Promise(e=>setTimeout(e,t))}async function Rb(t,e,n=()=>!0){let s;for(let r=0;r<=t.maxRetries;r++)try{return await e()}catch(i){if(s=i,!await Promise.resolve(n(i)))throw i;if(r>=t.maxRetries)break;const a=bN(t,r);await yN(a)}throw new Error(`Operation failed after ${t.maxRetries+1} attempts: ${(s==null?void 0:s.message)||s}`)}async function r3(t,e,n,s){try{Ae.isReady()||await Ae.initialize();const r=await Ae.generateAddress(t,0);if(!r.success||!r.address)return{success:!1,error:`Failed to generate address: ${r.error}`};const i=r.address.toLowerCase(),o=new wn({baseURL:e}),a=new zC(o);let l=null;try{return await Rb(Ab.auth,async()=>{console.log(`[Onboard] Attempt starting - currentNonce: ${l}`),l===null?(l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] First attempt: queried server, using next nonce: ${l}`)):console.log(`[Onboard] Retry attempt: using incremented nonce ${l} from previous failure`);let u=0;const d=10;for(;u<d;)try{await a.validateNonce(i,l,!0);break}catch(w){if(u++,w.message.includes("already pending")||w.message.includes("already used")){if(l=l+1,console.log(`[Onboard] Nonce ${l-1} already pending, incrementing to ${l}`),u>=d)throw new Error(`Failed to find available nonce after ${d} attempts`)}else throw w}const f=Math.floor(Date.now()/1e3),p=f+3600,g={action:Nb,owner:i,nonce:Xv(l),timestamp:f,deadline:Xv(p)};let x;try{x=await xN({mnemonic:t,walletAddress:i,message:g,baseURL:e,username:n,referralCode:s,timestamp:f})}catch(w){if(l!==null){const m=l;try{await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Rejected nonce ${m}, incremented to nonce ${l} (will use on retry)`)}catch(y){console.warn("[Onboard] Failed to reject nonce after thrown error:",y),l=l+1,console.log(`[Onboard] Incremented nonce to ${l} (reject failed but incrementing anyway)`)}}else console.warn("[Onboard] Error thrown but currentNonce is null, cannot reject/increment");throw w.currentNonce=l,w}if(!x.success){if(l!==null){const m=l;await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Request failed with nonce ${m}, rejected and incremented to ${l} (will keep incrementing until it works)`)}const w=new Error(x.error||"Onboarding failed");throw w.onboardResult=x,w}return l!==null&&await a.commitNonce(i,l,!0),x},async u=>{var m,y,v;const d=String(u).toLowerCase(),f=((m=u==null?void 0:u.message)==null?void 0:m.toLowerCase())||d,p=(u==null?void 0:u.responseBody)||(u==null?void 0:u.onboardResult),g=((y=p==null?void 0:p.error)==null?void 0:y.toLowerCase())||((v=p==null?void 0:p.message)==null?void 0:v.toLowerCase())||"";if(`${f} ${d} ${g}`.toLowerCase().includes("nonce already pending")){if(l!==null){const b=l;l=l+1,console.log(`[Onboard] Off-chain operation: nonce ${b} already pending/used, incrementing to ${l} (server will validate)`)}else try{l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] currentNonce was null, queried server for starting nonce: ${l}`)}catch(b){console.warn("[Onboard] Failed to query server nonce:",b),l=1}return!0}return BC(u)?(console.log('[Onboard] Nonce-consuming error detected (not "already pending"), clearing currentNonce to force re-query'),l=null,!0):!["failed to generate address","address mismatch","invalid mnemonic"].some(b=>d.includes(b))})}catch(c){if(l!==null)try{await a.rejectNonce(i,l,!0)}catch(u){console.warn("[Onboard] Failed to reject nonce during cleanup:",u)}return{success:!1,error:(c==null?void 0:c.message)||"Unknown error during onboarding"}}}catch(r){return{success:!1,error:(r==null?void 0:r.message)||"Unknown error during onboarding"}}}const vN=Object.freeze(Object.defineProperty({__proto__:null,onboardAndGetAuthToken:r3},Symbol.toStringTag,{value:"Module"})),Rw=t=>{let e;const n=new Set,s=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(p=>p(e,f))}},r=()=>e,a={setState:s,getState:r,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(s,r,a);return a},wN=t=>t?Rw(t):Rw,kN=t=>t;function SN(t,e=kN){const n=oe.useSyncExternalStore(t.subscribe,oe.useCallback(()=>e(t.getState()),[t,e]),oe.useCallback(()=>e(t.getInitialState()),[t,e]));return oe.useDebugValue(n),n}const Ow=t=>{const e=wN(t),n=s=>SN(e,s);return Object.assign(n,e),n},_N=t=>t?Ow(t):Ow,ct=_N((t,e)=>({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,selectedMarketId:null,loadingMarkets:!1,loadingOrderbooks:new Set,loadingTickers:new Set,loadingTrades:new Set,errors:new Map,setMarkets:n=>{const s=new Map,r=new Map;n.forEach(a=>{s.set(a.id,a),a.symbol&&r.set(a.symbol,a),a.moniker&&r.set(a.moniker,a)});let o=e().selectedMarketId;if(!o&&n.length>0){const l=n.find(u=>u.active)||n[0],c=l.market_id?l.market_id:l.id?typeof l.id=="string"?l.id:l.id.toString():null;c&&(o=c)}t({markets:n,marketsById:s,marketsBySymbol:r,selectedMarketId:o,lastUpdated:new Map(e().lastUpdated).set("markets",Date.now())})},setMarket:n=>{const s=e(),r=new Map(s.marketsById),i=new Map(s.marketsBySymbol);r.set(n.id,n),n.symbol&&i.set(n.symbol,n),n.moniker&&i.set(n.moniker,n);const o=s.markets.find(a=>a.id===n.id)?s.markets.map(a=>a.id===n.id?n:a):[...s.markets,n];t({markets:o,marketsById:r,marketsBySymbol:i})},getMarket:n=>e().marketsById.get(n),getMarketBySymbol:n=>e().marketsBySymbol.get(n),setSelectedMarketId:n=>{t({selectedMarketId:n})},setOrderbook:(n,s)=>{const r=e(),i=new Map(r.orderbooks);i.set(n,{...s,timestamp:Date.now()}),t({orderbooks:i,lastUpdated:new Map(r.lastUpdated).set(n,Date.now())})},getOrderbook:n=>e().orderbooks.get(n),updateOrderbook:(n,s)=>{const r=e(),i=r.orderbooks.get(n);if(i){const o={...i,...s,timestamp:Date.now()};r.setOrderbook(n,o)}else r.setOrderbook(n,{bids:s.bids||[],asks:s.asks||[],timestamp:Date.now()})},setTicker:(n,s)=>{const r=e(),i=new Map(r.tickers);i.set(n,{...s,marketId:n,timestamp:Date.now()}),t({tickers:i,lastUpdated:new Map(r.lastUpdated).set(`ticker_${n}`,Date.now())})},getTicker:n=>e().tickers.get(n),setRecentTrades:(n,s)=>{const r=e(),i=new Map(r.recentTrades);i.set(n,s),t({recentTrades:i,lastUpdated:new Map(r.lastUpdated).set(`trades_${n}`,Date.now())})},getRecentTrades:n=>e().recentTrades.get(n),setLoading:(n,s)=>{const r=e();if(n==="markets")t({loadingMarkets:s});else if(n.startsWith("orderbook_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingOrderbooks);s?o.add(i):o.delete(i),t({loadingOrderbooks:o})}else if(n.startsWith("ticker_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTickers);s?o.add(i):o.delete(i),t({loadingTickers:o})}else if(n.startsWith("trades_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTrades);s?o.add(i):o.delete(i),t({loadingTrades:o})}},setError:(n,s)=>{const r=e(),i=new Map(r.errors);s?i.set(n,s):i.delete(n),t({errors:i})},clearError:n=>{e().setError(n,null)},clearCache:n=>{const s=e();if(n){const r=new Map(s.orderbooks),i=new Map(s.tickers),o=new Map(s.recentTrades),a=new Map(s.lastUpdated);r.delete(n),i.delete(n),o.delete(n),a.delete(n),a.delete(`ticker_${n}`),a.delete(`trades_${n}`),t({orderbooks:r,tickers:i,recentTrades:o,lastUpdated:a})}else t({orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map})},clearAllCache:()=>{t({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,errors:new Map,selectedMarketId:null})}}));function CN(){const[t,e]=k.useState({loading:!0,loaded:!1,error:null}),[n,s]=k.useState({initialized:!1,wasmLoaded:!1,ready:!1});k.useEffect(()=>{(async()=>{try{e(a=>({...a,loading:!0,error:null})),await Ae.initialize()?(e({loading:!1,loaded:!0,error:null}),s(Ae.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(Ae.getStatus()))}catch(o){e({loading:!1,loaded:!1,error:o instanceof Error?o.message:"Unknown error"}),s(Ae.getStatus())}})()},[]),k.useEffect(()=>{if(t.loaded){const i=setInterval(()=>{s(Ae.getStatus())},1e3);return()=>clearInterval(i)}},[t.loaded]);const r=async()=>{e({loading:!0,loaded:!1,error:null});try{await Ae.initialize()?(e({loading:!1,loaded:!0,error:null}),s(Ae.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(Ae.getStatus()))}catch(i){e({loading:!1,loaded:!1,error:i instanceof Error?i.message:"Unknown error"}),s(Ae.getStatus())}};return{wasmStatus:t,isReady:t.loaded&&n.ready,status:n,retry:r}}function EN(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=0){const[n,s]=k.useState(t),[r,i]=k.useState(e),[o,a]=k.useState(null),[l,c]=k.useState(!1);return{mnemonic:n,setMnemonic:s,addressIndex:r,setAddressIndex:i,result:o,loading:l,generateAddress:async()=>{if(!Ae.isReady()){a({success:!1,error:"WASM module not ready"});return}c(!0),a(null);try{const d=await Ae.generateAddress(n,r);a(d)}catch(d){a({success:!1,error:d instanceof Error?d.message:"Unknown error"})}finally{c(!1)}},isReady:Ae.isReady()}}function PN(){const[t,e]=k.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=k.useState("Hello, World!"),[r,i]=k.useState(!1),[o,a]=k.useState(0),[l,c]=k.useState(null),[u,d]=k.useState(!1);return{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:u,signMessage:async()=>{if(!Ae.isReady()){c({success:!1,error:"WASM module not ready"});return}d(!0),c(null);try{const p={addressIndex:o,useEIP712:r},g=r?await Ae.signEIP712(t,n,p):await Ae.signMessage(t,n,p);c(g)}catch(p){c({success:!1,error:p instanceof Error?p.message:"Unknown error"})}finally{d(!1)}},isReady:Ae.isReady()}}function TN(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=180,n="clob::submit_order,clob::cancel_order",s="TradingBot"){const[r,i]=k.useState(t),[o,a]=k.useState(""),[l,c]=k.useState(""),[u,d]=k.useState(""),[f,p]=k.useState(e),[g,x]=k.useState(n),[w,m]=k.useState(s),[y,v]=k.useState(Date.now().toString()),[b,S]=k.useState(null),[_,E]=k.useState(!1);return{ownerMnemonic:r,setOwnerMnemonic:i,ownerAddress:o,setOwnerAddress:a,agentAddress:l,setAgentAddress:c,agentPrivateKey:u,setAgentPrivateKey:d,expiresInDays:f,setExpiresInDays:p,permissions:g,setPermissions:x,agentName:w,setAgentName:m,nonce:y,setNonce:v,result:b,loading:_,generateOwnerAddress:async()=>{if(!Ae.isReady()){S({success:!1,error:"WASM module not ready"});return}E(!0);try{const I=await Ae.generateAddress(r,0);I.success&&I.address?a(I.address):S({success:!1,error:I.error||"Failed to generate owner address"})}catch(I){S({success:!1,error:I instanceof Error?I.message:"Unknown error"})}finally{E(!1)}},generateAgentKeypair:async()=>{if(!Ae.isReady()){S({success:!1,error:"WASM module not ready"});return}E(!0);try{const I=await Ae.generateKeypair();I.success&&I.address&&I.privateKey?(c(I.address),d(I.privateKey)):S({success:!1,error:I.error||"Failed to generate agent keypair"})}catch(I){S({success:!1,error:I instanceof Error?I.message:"Unknown error"})}finally{E(!1)}},prepareAgentSign:async()=>{if(!Ae.isReady()){S({success:!1,error:"WASM module not ready"});return}if(!o||!l){S({success:!1,error:"Owner and agent addresses are required"});return}E(!0),S(null);try{const I=g.split(",").map(W=>W.trim()).filter(W=>W.length>0),B=await Ae.prepareAgentSign({owner:o,agent:l,expiresInDays:f,permissions:I,nonce:y,agentName:w});S(B)}catch(I){S({success:!1,error:I instanceof Error?I.message:"Unknown error"})}finally{E(!1)}},signAgentApproval:async()=>{if(!Ae.isReady()){S({success:!1,error:"WASM module not ready"});return}if(!o||!l||!r){S({success:!1,error:"Owner address, agent address, and owner mnemonic are required"});return}E(!0),S(null);try{const I=g.split(",").map(W=>W.trim()).filter(W=>W.length>0),B=await Ae.signAgentApproval(r,{owner:o,agent:l,expiresInDays:f,permissions:I,nonce:y,agentName:w});S(B)}catch(I){S({success:!1,error:I instanceof Error?I.message:"Unknown error"})}finally{E(!1)}},isReady:Ae.isReady()}}const Ja="http://localhost:8080",i3="ws://localhost:8080/websocket",MN="300px",IN="300px",NN="270px",AN="630px",Ob=5e3,RN="1",ON=100,DN=20,LN="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",jN=1,FN=100,zN=1,Dw=0,Lw=100,Op=1,BN=.01,jw=0,$N="BINANCE:BTCUSDT",UN="5",WN="https://s3.tradingview.com/tv.js",Fr=2,HN=2,si="asc",fa="desc",Nm="market",Dp="limit",VN="ORDER_TYPE_MARKET",YN="ORDER_TYPE_LIMIT",Fw="ORDER_TYPE_",ou="CROSS",GN="ISOLATED",qN="ONE_WAY",yd="buy",KN="sell",xr="LONG",au="SHORT",zw="symbol",Bw="leverage",$w="size",Uw="liquidationPrice",Ww="unrealizedPnL",Hw="entryPrice",Vw="margin",Lp="all",vd="byBucket",Yw="1.5fr 1.2fr 1fr 1fr 1fr 1.2fr 1.2fr 1fr",XN="#51cf66",QN="#ff6b6b",JN="Loading positions...",ZN="No open positions",eA="POSITIONS",tA="All",nA="By Bucket",jp="--",Gw="symbol",qw="side",Kw="type",Xw="quantity",Qw="price",Jw="filledQuantity",Zw="status",zr="pending",e1="history",sA="ORDER_STATUS_PENDING",rA="ORDER_STATUS_OPEN",iA="PARTIALLY_FILLED",t1=[sA,rA,"PENDING","OPEN","NEW",iA],Fp="#ffc107",zp="#17a2b8",n1="#28a745",Bp="#dc3545",s1="#dc3545",oA="#6c757d",aA="#51cf66",lA="#ff6b6b",r1="1.5fr 1fr 1fr 1.2fr 1.2fr 1.2fr 1fr 1fr",cA="Loading pending orders...",uA="No pending orders",dA="No historical orders",hA="PENDING ORDERS",fA="ORDER HISTORY",pA="Wallet address required to view pending orders",gA="Pending",mA="History",xA="--",bA="Unknown",i1="LIMIT",o1="MARKET";function yA(t){const[e,n]=k.useState(null),[s,r]=k.useState(null),[i,o]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState(null),[d,f]=k.useState(Nm),[p,g]=k.useState(0),[x,w]=k.useState(0),[m,y]=k.useState("0"),[v,b]=k.useState(zN),[S,_]=k.useState(qN),[E,P]=k.useState(ou),[M,C]=k.useState(0),[N,I]=k.useState(0),[B,W]=k.useState(t.marketId||"1");k.useEffect(()=>{t.selectedBucketBalance!==void 0&&C(t.selectedBucketBalance)},[t.selectedBucketBalance]),k.useEffect(()=>{const V=new yl({baseURL:t.baseURL,mnemonic:t.mnemonic}),Q=new wn({baseURL:t.baseURL});n(V),r(Q),V.initialize().then(()=>{o(!0)}).catch(ee=>{console.error("Failed to initialize exchange client:",ee),u({success:!1,error:`Initialization failed: ${ee.message}`})})},[t.baseURL,t.mnemonic]);const j=k.useCallback(async()=>{if(!(!s||!e)&&t.selectedBucketBalance===void 0)try{const V=e.getWalletAddress(),Q=await s.getBalanceDecimal(V,"MORM");Q&&Q.available_balance!==void 0&&C(Te(Q.available_balance)||0)}catch(V){console.error("Failed to load balance:",V)}},[s,e,t.selectedBucketBalance]);k.useEffect(()=>{i&&s&&e&&t.selectedBucketBalance===void 0&&j()},[i,s,e,t.selectedBucketBalance,j]);const z=k.useCallback(async()=>{if(s)try{const V=await s.getTicker(B);if(V&&V.lastPrice){const Q=typeof V.lastPrice=="string"?Te(V.lastPrice):V.lastPrice;I(Q),(!m||m==="0")&&y(Q.toString())}}catch(V){console.error("Failed to load market price:",V)}},[s,B,m]);k.useEffect(()=>{i&&s&&z()},[i,s,z]);const F=k.useCallback(()=>d==="market"?t.tradePrice&&t.tradePrice>0?t.tradePrice:N:m?parseFloat(m):N,[d,m,N,t.tradePrice]),A=k.useCallback(()=>M*v,[M,v]),$=k.useCallback(()=>{let V;if(x>0)V=x;else{const ee=A()*p/100,fe=F();if(fe<=0)return 0;V=ee/fe}return t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&V>t.maxSizeLimit?t.maxSizeLimit:V},[x,p,A,F,t.maxSizeLimit]),T=k.useCallback(()=>{const V=$(),Q=F();return V*Q},[$,F]),G=k.useCallback(()=>{const V=$(),Q=F(),ee=V*Q;return FC(ee)},[$,F]),D=k.useCallback(()=>{const V=G();return v<=0?0:Math.floor(V/v)},[G,v]),R=k.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const V=$();if(V<=0){u({success:!1,error:"Invalid order size"});return}const Q=F();if(Q<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!m){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const ee=dt(v.toString()),fe=await e.placeOrder({marketId:B,side:"buy",orderType:d,price:Q,quantity:V,leverage:ee});u({success:!0,orderId:fe.order_id,message:"Buy order placed successfully"}),await j()}catch(ee){u({success:!1,error:ee instanceof Error?ee.message:"Unknown error"})}finally{l(!1)}},[e,i,$,F,d,m,v,B,j]),X=k.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const V=$();if(V<=0){u({success:!1,error:"Invalid order size"});return}const Q=F();if(Q<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!m){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const ee=dt(v.toString()),fe=await e.placeOrder({marketId:B,side:"sell",orderType:d,price:Q,quantity:V,leverage:ee});u({success:!0,orderId:fe.order_id,message:"Sell order placed successfully"}),await j()}catch(ee){u({success:!1,error:ee instanceof Error?ee.message:"Unknown error"})}finally{l(!1)}},[e,i,$,F,d,m,v,B,j]),K=k.useCallback(V=>{const Q=A(),ee=Q*V/100,fe=t.tradePrice&&t.tradePrice>0?t.tradePrice:N>0?N:0,je=fe>0?ee/fe:0;let Se=isNaN(je)||!isFinite(je)?0:Math.round(je*1e8)/1e8;if(t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&Se>t.maxSizeLimit){Se=t.maxSizeLimit;const Ce=F();if(Se>0&&Q>0&&Ce>0){const gt=Se*Ce/Q*100;g(Math.min(100,Math.max(0,gt)))}else g(V)}else g(V);w(Se)},[A,N,t.tradePrice,t.maxSizeLimit,F]),Y=k.useCallback(V=>{let Q=isNaN(V)||V<0?0:V;t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&Q>t.maxSizeLimit&&(Q=t.maxSizeLimit),w(Q);const ee=A(),fe=F();if(Q>0&&ee>0&&fe>0){const Se=Q*fe/ee*100;g(Math.min(100,Math.max(0,Se)))}else g(0)},[A,F,t.maxSizeLimit]);return{orderType:d,setOrderType:f,fundPercent:p,sizeInput:x,price:m,leverage:v,positionMode:S,marginMode:E,availableBalance:M,currentPrice:N,marketId:B,isReady:i,loading:a,result:c,setFundPercent:K,setSizeInput:Y,setPrice:y,setLeverage:b,setPositionMode:_,setMarginMode:P,setMarketId:W,placeBuyOrder:R,placeSellOrder:X,loadBalance:j,loadMarketPrice:z,calculateSize:$,calculateSizeUSD:T,calculateValue:G,calculateMargin:D,getOrderPrice:F,getAvailableTradeAmount:A}}function vA(t){const[e,n]=k.useState({asks:[],bids:[]}),[s,r]=k.useState(!0),[i,o]=k.useState(null),[a,l]=k.useState(!1),[c,u]=k.useState(null),d=k.useRef(null),f=k.useRef(null),p=k.useRef([]),g=k.useRef(null),x=k.useRef(!1),w=k.useRef(null),m=k.useRef(null),y=k.useRef(null),v=k.useRef(new Map),b=k.useCallback(C=>{const N=[...C].sort((B,W)=>W[0]-B[0]);let I=0;return N.map(([B,W])=>(I+=W,{price:B,size:W,cumulative:I,flash:null}))},[]),S=k.useCallback((C,N)=>{const I=new Map,B=new Map,W=new Map,j=new Map;C.asks.forEach(Y=>{Y.size>0&&I.set(Y.price,Y.size)}),C.bids.forEach(Y=>{Y.size>0&&B.set(Y.price,Y.size)}),N.asks&&N.asks.forEach(([Y,V])=>{const Q=I.get(Y)||0;V===0?I.delete(Y):(Q>0?W.set(Y,V>Q?"up":"down"):W.set(Y,"up"),I.set(Y,V))}),N.bids&&N.bids.forEach(([Y,V])=>{const Q=B.get(Y)||0;V===0?B.delete(Y):(Q>0?j.set(Y,V>Q?"up":"down"):j.set(Y,"up"),B.set(Y,V))});const z=Array.from(I.entries()),F=Array.from(B.entries()),A=b(z),$=b(F),T=Date.now();A.forEach(Y=>{const V=W.get(Y.price);V?(Y.flash=V,v.current.set(`ask-${Y.price}`,T)):Y.flash=null}),$.forEach(Y=>{const V=j.get(Y.price);V?(Y.flash=V,v.current.set(`bid-${Y.price}`,T)):Y.flash=null});const G=t.maxDepth||100,D=A.slice(0,G),R=$.slice(0,G);let X,K;if(D.length>0&&R.length>0){const Y=D[D.length-1].price,V=R[0].price;X=Y-V,K=(Y+V)/2}return{asks:D,bids:R,spread:X,midPrice:K}},[b,t.maxDepth]),_=k.useCallback(async()=>{if(d.current)try{const C=await d.current.getOrderbook(t.marketId,!0);if(C&&(C.bids||C.asks)){const N=C.asks||[],I=C.bids||[],B=b(N),W=b(I),j=t.maxDepth||100,z=B.slice(0,j),F=W.slice(0,j);let A,$;if(z.length>0&&F.length>0){const T=z[z.length-1].price,G=F[0].price;A=T-G,$=(T+G)/2}n({asks:z,bids:F,spread:A,midPrice:$})}}catch(C){o(C instanceof Error?C.message:"Failed to load orderbook")}},[t.marketId,t.maxDepth,b]),E=k.useCallback(async()=>{if(d.current){r(!0),o(null);try{const C=await d.current.getOrderbook(t.marketId,!0);if(C&&(C.bids||C.asks)){const N=C.asks||[],I=C.bids||[],B=b(N),W=b(I),j=t.maxDepth||100,z=B.slice(0,j),F=W.slice(0,j);let A,$;if(z.length>0&&F.length>0){const T=z[z.length-1].price,G=F[0].price;A=T-G,$=(T+G)/2}n({asks:z,bids:F,spread:A,midPrice:$})}}catch(C){o(C instanceof Error?C.message:"Failed to load orderbook")}finally{r(!1)}}},[t.marketId,t.maxDepth,b]),P=k.useCallback((C,N)=>{if(C.snapshot===!0||C.type==="snapshot"||C.bids&&C.asks&&C.bids.length>10&&C.asks.length>10&&!C.delta){const B=C.asks||[],W=C.bids||[],j=b(B),z=b(W),F=t.maxDepth||100,A=j.slice(0,F),$=z.slice(0,F);let T,G;if(A.length>0&&$.length>0){const D=A[A.length-1].price,R=$[0].price;T=D-R,G=(D+R)/2}return{asks:A,bids:$,spread:T,midPrice:G}}else return S(N,{bids:C.bids,asks:C.asks})},[b,S,t.maxDepth]),M=k.useCallback(C=>{!C||!C.bids&&!C.asks||(p.current.push(C),g.current!==null&&clearTimeout(g.current),g.current=window.setTimeout(()=>{n(N=>{let I=N;for(const B of p.current)I=P(B,I);if(p.current=[],N.asks.length===I.asks.length&&N.bids.length===I.bids.length&&N.spread===I.spread&&N.midPrice===I.midPrice){const B=N.bids.length>0?N.bids[0].price:0,W=N.asks.length>0?N.asks[N.asks.length-1].price:0,j=I.bids.length>0?I.bids[0].price:0,z=I.asks.length>0?I.asks[I.asks.length-1].price:0;if(B===j&&W===z)return N}return I}),g.current=null},100))},[P]);return k.useEffect(()=>{const C=new wn({baseURL:t.baseURL});d.current=C;const N=new Eo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});f.current=N,w.current===null&&(w.current=t.marketId);const I=()=>{if(N.isConnected()){const z=w.current!==null?w.current:t.marketId;(!x.current||w.current!==z)&&(x.current&&w.current!==null&&w.current!==z&&N.unsubscribeOrderbook(w.current,M),N.subscribeOrderbook(z,M,!0),x.current=!0,w.current=z)}},B=N.connect();y.current=window.setTimeout(()=>{!N.isConnected()&&d.current&&m.current===null&&(u("WebSocket connection timeout. Using HTTP polling."),l(!1),_(),m.current=window.setInterval(()=>{_()},5e3))},12e3),B.then(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),l(!0),u(null),I()}).catch(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),u("slow connection due to network issue"),l(!1),d.current&&(m.current!==null&&(clearInterval(m.current),m.current=null),_(),m.current=window.setInterval(()=>{_()},5e3))});let W=null;const j=N.wsClient;return j&&(W=j.onStateChange(z=>{z===tt.Connected?(l(!0),u(null),x.current&&I()):(z===tt.Disconnected||z===tt.Reconnecting)&&(l(!1),x.current=!1,u("WebSocket disconnected. Using static data."))})),()=>{const z=w.current;g.current!==null&&(clearTimeout(g.current),g.current=null),y.current!==null&&(clearTimeout(y.current),y.current=null),p.current=[],x.current=!1,w.current=null,W&&W(),f.current&&(z!==null&&f.current.unsubscribeOrderbook(z,M),f.current.disconnect())}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID]),k.useEffect(()=>{if(!d.current||!f.current)return;const C=w.current;return C!==null&&C!==t.marketId&&f.current.isConnected()&&(f.current.unsubscribeOrderbook(C,M),x.current=!1),n({asks:[],bids:[]}),r(!0),o(null),u(null),E(),f.current.isConnected()&&(f.current.subscribeOrderbook(t.marketId,M,!0),x.current=!0),w.current=t.marketId,()=>{f.current&&f.current.isConnected()&&w.current===t.marketId&&(f.current.unsubscribeOrderbook(t.marketId,M),x.current=!1)}},[t.marketId,E,M]),k.useEffect(()=>(m.current!==null&&(clearInterval(m.current),m.current=null),!a&&d.current&&(_(),m.current=window.setInterval(()=>{_()},5e3)),()=>{m.current!==null&&(clearInterval(m.current),m.current=null)}),[a,t.marketId,_]),k.useEffect(()=>{const C=setInterval(()=>{const N=Date.now(),I=500;n(B=>{let W=!1;const j=B.asks.map(F=>{const A=`ask-${F.price}`,$=v.current.get(A);return F.flash&&$&&N-$>=I?(W=!0,v.current.delete(A),{...F,flash:null}):F}),z=B.bids.map(F=>{const A=`bid-${F.price}`,$=v.current.get(A);return F.flash&&$&&N-$>=I?(W=!0,v.current.delete(A),{...F,flash:null}):F});return W?{...B,asks:j,bids:z}:B})},100);return()=>clearInterval(C)},[]),{orderbook:e,loading:s,error:i,isConnected:a,wsError:c,refresh:E}}function Po(t,e=2,n=2,s="0.00"){return t==null||isNaN(t)?s:t.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:n})}function Am(t){return t==null||isNaN(t)?"--":Po(t,2,2,"--")}function $p(t){return t==null||isNaN(t)?"--":Po(t,2,8,"--")}function Rm(t){return t==null||isNaN(t)?"0.000":Po(t,3,3,"0.000")}function wA(t){return t==null||isNaN(t)?"0":Po(t,3,8,"0")}function kA(t){return t==null||isNaN(t)?"0.00":Po(t,2,2,"0.00")}function SA(t){return t==null||isNaN(t)?"0.00":Po(t,2,2,"0.00")}function _t(t){return t==null||isNaN(t)?"0.00":Po(t,2,2,"0.00")}function _A(t){return t==null||isNaN(t)?"0%":`${(t*100).toFixed(2)}%`}function o3(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return Te(t).toFixed(8).replace(/\.?0+$/,"")}catch{return"0"}}function CA(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"--";try{const n=o3(t).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")}catch{return"--"}}function EA(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return o3(t)}catch{return"0"}}function PA(t,e="--"){if(t==null)return e;try{return(typeof t=="string"||typeof t=="number"?Te(t):0).toFixed(2).replace(/\.?0+$/,"")}catch{return e}}function hr(t){if(!t)return Date.now();const e=typeof t=="string"?Number(t):t;return isNaN(e)||e<=0?Date.now():e<9466848e5?e*1e3:e}function l0(t){const[e,n]=k.useState(null),[s,r]=k.useState(null),[i,o]=k.useState(!0),[a,l]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState(null),p=k.useRef(null),g=k.useRef(null),x=k.useRef(!1),w=k.useRef(!1),m=k.useRef(null),y=k.useRef(null),v=k.useCallback(async()=>{if(!p.current){console.warn("[useTradePrice] pollRecentTrades called but infoClientRef.current is null");return}console.debug("[useTradePrice] Polling recent trades (marketId:",t.marketId,")");try{const M=t.limit||100,C=await p.current.getRecentTrades(t.marketId,M);if(C&&Array.isArray(C)&&C.length>0){const I=[...C].sort((W,j)=>{const z=hr(W.timestamp);return hr(j.timestamp)-z})[0],B={market_id:I.market_id||t.marketId,price:typeof I.price=="string"?Te(I.price):I.price,quantity:typeof I.quantity=="string"?Te(I.quantity):I.quantity||0,timestamp:hr(I.timestamp),is_buyer_maker:I.is_buyer_maker||!1,trade_id:I.trade_id||""};n(W=>(W&&typeof W.price=="number"&&(B.price>W.price?f("up"):B.price<W.price&&f("down")),setTimeout(()=>f(null),500),B))}else console.warn("[useTradePrice] Polling returned no trades or invalid data:",C)}catch(M){l(M instanceof Error?M.message:"Failed to load recent trades"),console.error("[useTradePrice] Failed to poll recent trades:",M)}},[t.marketId,t.limit]),b=k.useCallback(async()=>{if(p.current){o(!0),l(null);try{const M=t.limit||100,C=await p.current.getRecentTrades(t.marketId,M);if(C&&Array.isArray(C)&&C.length>0){const I=[...C].sort((W,j)=>{const z=hr(W.timestamp);return hr(j.timestamp)-z})[0],B={market_id:I.market_id||t.marketId,price:typeof I.price=="string"?Te(I.price):I.price,quantity:typeof I.quantity=="string"?Te(I.quantity):I.quantity||0,timestamp:hr(I.timestamp),is_buyer_maker:I.is_buyer_maker||!1,trade_id:I.trade_id||""};n(B)}else console.warn("[useTradePrice] Initialization returned no trades or invalid data:",C)}catch(M){l(M instanceof Error?M.message:"Failed to load recent trades"),console.error("Failed to initialize recent trades:",M)}finally{o(!1)}}},[t.marketId,t.limit]),S=k.useCallback(M=>{if(console.debug("[useTradePrice] handleLastPriceUpdate called with data:",M),!M){console.warn("[useTradePrice] handleLastPriceUpdate received null/undefined data");return}if(!M.price&&M.price!==0){console.warn("[useTradePrice] handleLastPriceUpdate received data without price field:",M);return}const C=typeof M.price=="string"?Te(M.price):Number(M.price),N=typeof M.quantity=="string"?Te(M.quantity):Number(M.quantity)||0;if(isNaN(C)){console.warn("[useTradePrice] Invalid price value:",M.price);return}n(I=>{Fl(I)&&typeof I.price=="number"&&(C>I.price?f("up"):C<I.price&&f("down")),setTimeout(()=>f(null),500);const B={market_id:M.market_id||t.marketId,price:C,quantity:N,timestamp:M.timestamp||Date.now(),is_buyer_maker:M.is_buyer_maker||!1,trade_id:M.trade_id||""};return Fl(B)||console.error("[useTradePrice] Invalid LastPriceData structure:",B),console.debug("[useTradePrice] Setting lastPrice to:",B),console.debug("[useTradePrice] Type check - isLastPriceData:",Fl(B)),B})},[t.marketId]),_=k.useCallback(M=>{if(!M){console.warn("[useTradePrice] handleMarkPriceUpdate received null/undefined data");return}if(M.mark_price===void 0||M.mark_price===null){console.warn("[useTradePrice] handleMarkPriceUpdate received data without mark_price field:",M);return}const C=typeof M.mark_price=="string"?Te(M.mark_price):typeof M.mark_price=="number"?M.mark_price:Number(M.mark_price);if(isNaN(C)){console.warn("[useTradePrice] Invalid mark_price value:",M.mark_price);return}const N={symbol:M.symbol||t.symbol||"",mark_price:C,timestamp:M.timestamp||Date.now()};Rp(N)||console.error("[useTradePrice] Invalid MarkPriceData structure:",N),r(N)},[t.symbol]);k.useEffect(()=>{const M=new wn({baseURL:t.baseURL});p.current=M;const C=new Eo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});g.current=C,b();const N=()=>{C.isConnected()&&(x.current||(C.subscribeLastPrice(t.marketId,S,!0),x.current=!0),t.symbol&&!w.current&&(C.subscribeMarkPrice(t.symbol,_),w.current=!0))};console.debug("[useTradePrice] Attempting WebSocket connection...");const I=C.connect();console.debug("[useTradePrice] Connect promise created, waiting for result..."),y.current=window.setTimeout(()=>{console.warn("[useTradePrice] WebSocket connection timeout fallback triggered after 12 seconds");const j=C.isConnected();console.warn("[useTradePrice] subscriptionClient.isConnected():",j,"hasPollingInterval:",m.current!==null),!j&&p.current&&m.current===null?(console.debug("[useTradePrice] Starting HTTP polling due to connection timeout (marketId:",t.marketId,")"),u(!1),v(),m.current=window.setInterval(()=>{v()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):j?console.debug("[useTradePrice] Connection established before timeout, no polling needed"):m.current!==null&&console.debug("[useTradePrice] Polling already started, skipping")},12e3),I.then(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),console.debug("[useTradePrice] WebSocket connected successfully"),u(!0),N()}).catch(j=>{y.current!==null&&(clearTimeout(y.current),y.current=null),console.error("[useTradePrice] WebSocket connection promise rejected:",j);const z=j instanceof Error?j.message:"Unknown error";console.info("WebSocket failed to establish connection. Falling back to HTTP polling:",z),u(!1),p.current?(m.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (WebSocket failure handler)"),clearInterval(m.current),m.current=null),console.debug("[useTradePrice] Starting HTTP polling due to WebSocket connection failure (marketId:",t.marketId,")"),v(),m.current=window.setInterval(()=>{v()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null")});let B=null;const W=C.wsClient;return W&&(B=W.onStateChange(j=>{console.debug("[useTradePrice] WebSocket state changed to:",j),j===tt.Connected?(console.debug("[useTradePrice] WebSocket connected - stopping polling if active"),u(!0),x.current&&N()):(j===tt.Disconnected||j===tt.Reconnecting)&&(console.debug("[useTradePrice] WebSocket disconnected/reconnecting - polling effect should start polling"),u(!1),x.current=!1,w.current=!1)})),()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),x.current=!1,w.current=!1,B&&B(),g.current&&(g.current.unsubscribeLastPrice(t.marketId,S),t.symbol&&g.current.unsubscribeMarkPrice(t.symbol,_),g.current.disconnect())}},[t.baseURL,t.wsURL,t.marketId,t.symbol,t.authToken,t.walletAddress,t.deviceID]),k.useEffect(()=>{p.current&&g.current&&(g.current.isConnected()&&(g.current.unsubscribeLastPrice(t.marketId,S),x.current=!1,t.symbol&&(g.current.unsubscribeMarkPrice(t.symbol,_),w.current=!1)),b(),g.current.isConnected()&&(g.current.subscribeLastPrice(t.marketId,S,!0),x.current=!0,t.symbol&&(g.current.subscribeMarkPrice(t.symbol,_),w.current=!0)))},[t.marketId,t.symbol]),k.useEffect(()=>(console.debug("[useTradePrice] Polling effect triggered - isConnected:",c,"marketId:",t.marketId),m.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (polling effect)"),clearInterval(m.current),m.current=null),!c&&p.current?(console.debug("[useTradePrice] Starting HTTP polling (WebSocket disconnected, marketId:",t.marketId,")"),v(),m.current=window.setInterval(()=>{v()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):!c&&!p.current?console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null (isConnected:",c,")"):c&&console.debug("[useTradePrice] WebSocket connected, polling not needed"),()=>{m.current!==null&&(console.debug("[useTradePrice] Cleaning up polling interval (polling effect cleanup)"),clearInterval(m.current),m.current=null)}),[c,t.marketId]);const{displayPrice:E,displayTimestamp:P}=k.useMemo(()=>{const M=Fl(e)&&e.price!=null,C=Rp(s)&&s.mark_price!=null;if(M&&C){const N=e.timestamp||0,I=s.timestamp||0;return N>=I?{displayPrice:e.price,displayTimestamp:N}:{displayPrice:s.mark_price,displayTimestamp:I}}return M?{displayPrice:e.price,displayTimestamp:e.timestamp||0}:C?{displayPrice:s.mark_price,displayTimestamp:s.timestamp||0}:{displayPrice:null,displayTimestamp:null}},[e,s]);return{lastPrice:e,markPrice:s,displayPrice:E,displayTimestamp:P,loading:i,error:a,isConnected:c,priceChange:d,refresh:b,isLastPriceData:Fl,isMarkPriceData:Rp}}function a3(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(""),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(null),f=k.useRef(0),p=k.useRef(!1),g=k.useRef(t);g.current=t;const x=k.useCallback(y=>{const v=N=>!N||N===""?0:Te(N),b=v(y.size),S=y.is_long!==void 0?y.is_long?xr:au:b>=0?xr:au,_=v(y.entry_price),E=v(y.mark_price),P=y.leverage?parseFloat(y.leverage):void 0,C=v(y.margin_balance)||(P&&_&&b!==0?Math.abs(Math.abs(b)*_/P):0);return{marketId:y.market_id.toString(),symbol:y.symbol||`m-${y.market_id}`,size:Math.abs(b),entryPrice:_,markPrice:E,liquidationPrice:y.liquidation_price?v(y.liquidation_price):void 0,unrealizedPnL:v(y.unrealized_pnl||y.pnl),leverage:P,margin:C,side:S,marginMode:y.margin_mode||y.margin_type||ou,bucketId:y.bucket_id?String(y.bucket_id):void 0}},[]),w=k.useCallback(async()=>{if(!u.current)return;const y=g.current;if(!y.walletAddress||y.walletAddress.trim()===""){a(""),s([]),i(!1);return}a("");try{const v=await Rb(Ab.http,()=>u.current.getPositions(y.walletAddress));if(Array.isArray(v)){const b=v.map(x);s(S=>{if(S.length!==b.length)return b;const _=JSON.stringify(S),E=JSON.stringify(b);return _===E?S:b})}else s(b=>b.length===0?b:[])}catch(v){a(v instanceof Error?v.message:"Failed to load positions"),console.error("Failed to fetch positions after retries:",v)}finally{i(!1)}},[x]),m=k.useCallback(y=>{if(y.positions&&Array.isArray(y.positions)){const v=y.positions.map(x);s(b=>{if(b.length!==v.length)return v;const S=JSON.stringify(b),_=JSON.stringify(v);return S===_?b:v})}},[x]);return k.useEffect(()=>{const y=new wn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=y,w(),e&&t.wsURL){const v=new Eo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=v;const b=()=>{v.isConnected()&&!p.current&&(v.subscribeUserUpdates(m),p.current=!0)};v.connect().then(()=>{c(!0),b()}).catch(E=>{console.error("Failed to connect WebSocket:",E),c(!1),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{w()},t.refreshInterval))});let S=null;const _=v.wsClient;return _&&(S=_.onStateChange(E=>{E===tt.Connected?(c(!0),p.current&&b(),f.current!==null&&(clearInterval(f.current),f.current=0)):(E===tt.Disconnected||E===tt.Reconnecting)&&(c(!1),p.current=!1,t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{w()},t.refreshInterval)))})),()=>{S&&S(),f.current!==null&&(clearInterval(f.current),f.current=0),d.current&&(d.current.unsubscribeUserUpdates(m),d.current.disconnect())}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{w()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=0)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{positions:n,loading:r,error:o,isConnected:l,refresh:w}}function l3(t){const[e,n]=k.useState([]),[s,r]=k.useState(!0),[i,o]=k.useState(""),a=k.useRef(null),l=k.useRef(0),c=k.useCallback(async()=>{if(a.current){o(""),r(!0);try{if(!t.walletAddress){o("Wallet address is required"),n([]);return}const u=await a.current.getBuckets(t.walletAddress),d=Array.isArray(u)?u:[];Array.isArray(u)||console.warn("[useBuckets] getBuckets returned non-array:",u);const f=d.map(p=>s3(p,Te));n(f)}catch(u){const d=u instanceof Error?u.message:"Failed to load buckets";o(d),console.error("Failed to fetch buckets:",u),n([])}finally{r(!1)}}},[t.walletAddress]);return k.useEffect(()=>{const u=new wn({baseURL:t.baseURL,sessionToken:t.authToken});return a.current=u,c(),t.refreshInterval&&t.refreshInterval>0&&(l.current=window.setInterval(()=>{c()},t.refreshInterval)),()=>{l.current!==null&&(clearInterval(l.current),l.current=0)}},[t.baseURL,t.authToken,t.walletAddress,t.refreshInterval]),{buckets:e,loading:s,error:i,refresh:c}}function TA(t){const e=t.maxDataPoints||100,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(null),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(!1),f=k.useRef(null),p=k.useCallback(g=>{if(!g){console.warn("[useKline] handleKlineUpdate received null/undefined data");return}try{const x={market_id:g.market_id||String(t.marketId),symbol:g.symbol,interval:g.interval||t.interval,open_time:g.open_time||g.timestamp||Date.now(),close_time:g.close_time||g.open_time||Date.now(),open:typeof g.open=="string"?Te(g.open):Number(g.open)||0,high:typeof g.high=="string"?Te(g.high):Number(g.high)||0,low:typeof g.low=="string"?Te(g.low):Number(g.low)||0,close:typeof g.close=="string"?Te(g.close):Number(g.close)||0,volume:typeof g.volume=="string"?Te(g.volume):Number(g.volume)||0,trade_count:g.trade_count||g.tradeCount,timestamp:g.timestamp||g.open_time||Date.now(),raw:g};s(w=>{const m=[...w,x];return m.length>e?m.slice(-e):m})}catch(x){console.error("[useKline] Error processing kline update:",x),a(x instanceof Error?x.message:"Failed to process kline data")}},[t.marketId,t.interval,e]);return k.useEffect(()=>{const g=new Eo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});u.current=g;const x=()=>{g.isConnected()&&(d.current||(g.subscribeKline(t.marketId,t.interval,p),d.current=!0))};console.debug("[useKline] Attempting WebSocket connection...");const w=g.connect();f.current=window.setTimeout(()=>{console.warn("[useKline] WebSocket connection timeout after 12 seconds"),g.isConnected()||(c(!1),a("WebSocket connection timeout"),i(!1))},12e3),w.then(()=>{f.current!==null&&(clearTimeout(f.current),f.current=null),console.debug("[useKline] WebSocket connected successfully"),c(!0),i(!1),x()}).catch(v=>{f.current!==null&&(clearTimeout(f.current),f.current=null),console.error("[useKline] WebSocket connection failed:",v);const b=v instanceof Error?v.message:"Unknown error";c(!1),a(b),i(!1)});let m=null;const y=g.wsClient;return y&&(m=y.onStateChange(v=>{console.debug("[useKline] WebSocket state changed to:",v),v===tt.Connected?(c(!0),d.current&&x()):(v===tt.Disconnected||v===tt.Reconnecting)&&(c(!1),d.current=!1)})),()=>{f.current!==null&&(clearTimeout(f.current),f.current=null),d.current=!1,m&&m(),u.current&&(u.current.unsubscribeKline(t.marketId,t.interval,p),u.current.disconnect())}},[t.wsURL,t.marketId,t.interval,t.authToken,t.walletAddress,t.deviceID,p]),{klineData:n,loading:r,error:o,isConnected:l}}function To(t){const e=k.useRef(null),n=ct(D=>D.markets),s=ct(D=>D.marketsById),r=ct(D=>D.orderbooks),i=ct(D=>D.tickers),o=ct(D=>D.recentTrades),a=ct(D=>D.selectedMarketId),l=ct(D=>D.loadingMarkets),c=ct(D=>D.loadingOrderbooks),u=ct(D=>D.loadingTickers),d=ct(D=>D.loadingTrades),f=ct(D=>D.errors),p=ct(D=>D.setMarkets),g=ct(D=>D.setMarket),x=ct(D=>D.getMarket),w=ct(D=>D.getMarketBySymbol),m=ct(D=>D.setSelectedMarketId),y=ct(D=>D.setOrderbook),v=ct(D=>D.getOrderbook),b=ct(D=>D.updateOrderbook),S=ct(D=>D.setTicker),_=ct(D=>D.getTicker),E=ct(D=>D.setRecentTrades),P=ct(D=>D.getRecentTrades),M=ct(D=>D.setLoading),C=ct(D=>D.setError),N=ct(D=>D.clearError),I=ct(D=>D.clearCache);k.useEffect(()=>{e.current?t.sessionToken&&e.current.setSessionToken(t.sessionToken):e.current=new wn({baseURL:t.baseURL,sessionToken:t.sessionToken})},[t.baseURL,t.sessionToken]);const B=k.useCallback(async()=>{if(!e.current)throw new Error("InfoClient not initialized");const D="markets";M(D,!0),C(D,null);try{const R=await e.current.getMarkets(),K=(Array.isArray(R)?R:(R==null?void 0:R.markets)||[]).map((Y,V)=>{let Q;if(Y.id!==void 0)Q=typeof Y.id=="string"?parseInt(Y.id,10)||V+1:Y.id;else if(Y.market_id!==void 0){const ee=String(Y.market_id),fe=parseInt(ee,10);isNaN(fe)?Q=V+1:fe>Number.MAX_SAFE_INTEGER?Q=fe%Number.MAX_SAFE_INTEGER||V+1:Q=fe}else Q=V+1;return{id:Q,symbol:Y.symbol||Y.moniker,moniker:Y.moniker,baseAsset:Y.base_asset||Y.baseAsset,quoteAsset:Y.quote_asset||Y.quoteAsset,active:Y.active!==void 0?Y.active:Y.status==="active",market_id:Y.market_id,status:Y.status,...Y}});return p(K),K}catch(R){const X=R instanceof Error?R.message:"Failed to fetch markets";throw C(D,X),R}finally{M(D,!1)}},[p,M,C]),W=k.useCallback(async D=>{if(!e.current)throw new Error("InfoClient not initialized");const R=typeof D=="string"?parseInt(D,10):D,X=isNaN(R)?null:x(R);if(X)return X;try{const K=await e.current.getMarketByID(D);return K?(g(K),K):null}catch(K){const Y=K instanceof Error?K.message:`Failed to fetch market ${D}`;throw C(`market_${D}`,Y),K}},[x,g,C]),j=k.useCallback(async D=>{if(!e.current)throw new Error("InfoClient not initialized");const R=w(D);if(R)return R;try{const X=await e.current.getMarketByMoniker(D);return X?(g(X),X):null}catch(X){const K=X instanceof Error?X.message:`Failed to fetch market ${D}`;throw C(`market_${D}`,K),X}},[w,g,C]),z=k.useCallback(async(D,R=!0,X=20)=>{if(!e.current)throw new Error("InfoClient not initialized");const K=`orderbook_${D}`;M(K,!0),C(K,null);try{const Y=await e.current.getOrderbook(D,R,X);if(Y&&(Y.bids||Y.asks)){const V={bids:Y.bids||[],asks:Y.asks||[],timestamp:Date.now()};return y(typeof D=="string"?D:D.toString(),V),V}return null}catch(Y){const V=Y instanceof Error?Y.message:`Failed to fetch orderbook for market ${D}`;throw C(K,V),Y}finally{M(K,!1)}},[y,M,C]),F=k.useCallback(async D=>{if(!e.current)throw new Error("InfoClient not initialized");const R=`ticker_${D}`;M(R,!0),C(R,null);try{const X=await e.current.getTicker(D);if(X){const K=typeof D=="string"?D:D.toString(),Y={marketId:K,...X,timestamp:Date.now()};return S(K,Y),Y}return null}catch(X){const K=X instanceof Error?X.message:`Failed to fetch ticker for market ${D}`;throw C(R,K),X}finally{M(R,!1)}},[S,M,C]),A=k.useCallback(async(D,R=100)=>{if(!e.current)throw new Error("InfoClient not initialized");const X=`trades_${D}`;M(X,!0),C(X,null);try{const K=await e.current.getRecentTrades(D,R);if(K){const Y=Array.isArray(K)?K:[];return E(typeof D=="string"?D:D.toString(),Y),Y}return null}catch(K){const Y=K instanceof Error?K.message:`Failed to fetch trades for market ${D}`;throw C(X,Y),K}finally{M(X,!1)}},[E,M,C]);k.useEffect(()=>{t.autoFetchMarkets&&n.length===0&&!l&&B().catch(console.error)},[t.autoFetchMarkets,n.length,l,B]);const $=a?n.find(D=>{var R;return D.market_id===a||((R=D.id)==null?void 0:R.toString())===a}):null,T=$?$.moniker||$.symbol||($.baseAsset&&$.quoteAsset?`${$.baseAsset}-${$.quoteAsset}`:null):null,G=k.useCallback(D=>{const R=typeof D=="string"?D:D.toString(),X=n.find(K=>{var Y;return K.market_id===R||((Y=K.id)==null?void 0:Y.toString())===R});return X?X.moniker||X.symbol||(X.baseAsset&&X.quoteAsset?`${X.baseAsset}/${X.quoteAsset}`:null):null},[n]);return{markets:n,marketsById:s,orderbooks:r,tickers:i,recentTrades:o,selectedMarketId:a,selectedMarket:$,selectedMarketSymbol:T,loadingMarkets:l,loadingOrderbooks:c,loadingTickers:u,loadingTrades:d,isLoading:D=>{if(D==="markets")return l;if(D.startsWith("orderbook_")){const R=D.split("_").slice(1).join("_");return c.has(R)}if(D.startsWith("ticker_")){const R=D.split("_").slice(1).join("_");return u.has(R)}if(D.startsWith("trades_")){const R=D.split("_").slice(1).join("_");return d.has(R)}return!1},errors:f,getError:D=>f.get(D),getMarket:x,getMarketBySymbol:w,getSymbolByMarketId:G,getOrderbook:v,getTicker:_,getRecentTrades:P,fetchMarkets:B,fetchMarket:W,fetchMarketBySymbol:j,fetchOrderbook:z,fetchTicker:F,fetchRecentTrades:A,updateOrderbook:b,clearCache:I,clearError:N,setSelectedMarketId:m,infoClient:e.current}}function MA(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const IA=t=>{switch(t){case"success":return RA;case"info":return DA;case"warning":return OA;case"error":return LA;default:return null}},NA=Array(12).fill(0),AA=({visible:t,className:e})=>oe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},oe.createElement("div",{className:"sonner-spinner"},NA.map((n,s)=>oe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),RA=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),OA=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),DA=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),LA=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),jA=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},oe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),oe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),FA=()=>{const[t,e]=oe.useState(document.hidden);return oe.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let Om=1;class zA{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:s,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Om++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:s}),{...l,...e,id:i,dismissible:a,title:s}):l):this.addToast({title:s,...r,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i=s!==void 0,o;const a=r.then(async c=>{if(o=["resolve",c],oe.isValidElement(c))i=!1,this.create({id:s,type:"default",message:c});else if($A(c)&&!c.ok){i=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,g=typeof d=="object"&&!oe.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:f,...g})}else if(c instanceof Error){i=!1;const d=typeof n.error=="function"?await n.error(c):n.error,f=typeof n.description=="function"?await n.description(c):n.description,g=typeof d=="object"&&!oe.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:f,...g})}else if(n.success!==void 0){i=!1;const d=typeof n.success=="function"?await n.success(c):n.success,f=typeof n.description=="function"?await n.description(c):n.description,g=typeof d=="object"&&!oe.isValidElement(d)?d:{message:d};this.create({id:s,type:"success",description:f,...g})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description,p=typeof u=="object"&&!oe.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:d,...p})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,n)=>{const s=(n==null?void 0:n.id)||Om++;return this.create({jsx:e(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Pn=new zA,BA=(t,e)=>{const n=(e==null?void 0:e.id)||Om++;return Pn.addToast({title:t,...e,id:n}),n},$A=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",UA=BA,WA=()=>Pn.toasts,HA=()=>Pn.getActiveToasts(),we=Object.assign(UA,{success:Pn.success,info:Pn.info,warning:Pn.warning,error:Pn.error,custom:Pn.custom,message:Pn.message,promise:Pn.promise,dismiss:Pn.dismiss,loading:Pn.loading},{getHistory:WA,getToasts:HA});MA("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function wd(t){return t.label!==void 0}const VA=3,YA="24px",GA="16px",a1=4e3,qA=356,KA=14,XA=45,QA=200;function Fs(...t){return t.filter(Boolean).join(" ")}function JA(t){const[e,n]=t.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}const ZA=t=>{var e,n,s,r,i,o,a,l,c;const{invert:u,toast:d,unstyled:f,interacting:p,setHeights:g,visibleToasts:x,heights:w,index:m,toasts:y,expanded:v,removeToast:b,defaultRichColors:S,closeButton:_,style:E,cancelButtonStyle:P,actionButtonStyle:M,className:C="",descriptionClassName:N="",duration:I,position:B,gap:W,expandByDefault:j,classNames:z,icons:F,closeButtonAriaLabel:A="Close toast"}=t,[$,T]=oe.useState(null),[G,D]=oe.useState(null),[R,X]=oe.useState(!1),[K,Y]=oe.useState(!1),[V,Q]=oe.useState(!1),[ee,fe]=oe.useState(!1),[je,Se]=oe.useState(!1),[Ce,Ie]=oe.useState(0),[gt,L]=oe.useState(0),ae=oe.useRef(d.duration||I||a1),ue=oe.useRef(null),ye=oe.useRef(null),de=m===0,me=m+1<=x,U=d.type,ie=d.dismissible!==!1,O=d.className||"",te=d.descriptionClassName||"",ne=oe.useMemo(()=>w.findIndex(H=>H.toastId===d.id)||0,[w,d.id]),q=oe.useMemo(()=>{var H;return(H=d.closeButton)!=null?H:_},[d.closeButton,_]),he=oe.useMemo(()=>d.duration||I||a1,[d.duration,I]),Me=oe.useRef(0),ke=oe.useRef(0),Pe=oe.useRef(0),ze=oe.useRef(null),[Je,rt]=B.split("-"),vt=oe.useMemo(()=>w.reduce((H,Ne,lt)=>lt>=ne?H:H+Ne.height,0),[w,ne]),jt=FA(),Ot=d.invert||u,$e=U==="loading";ke.current=oe.useMemo(()=>ne*W+vt,[ne,vt]),oe.useEffect(()=>{ae.current=he},[he]),oe.useEffect(()=>{X(!0)},[]),oe.useEffect(()=>{const H=ye.current;if(H){const Ne=H.getBoundingClientRect().height;return L(Ne),g(lt=>[{toastId:d.id,height:Ne,position:d.position},...lt]),()=>g(lt=>lt.filter(Re=>Re.toastId!==d.id))}},[g,d.id]),oe.useLayoutEffect(()=>{if(!R)return;const H=ye.current,Ne=H.style.height;H.style.height="auto";const lt=H.getBoundingClientRect().height;H.style.height=Ne,L(lt),g(Re=>Re.find(Fe=>Fe.toastId===d.id)?Re.map(Fe=>Fe.toastId===d.id?{...Fe,height:lt}:Fe):[{toastId:d.id,height:lt,position:d.position},...Re])},[R,d.title,d.description,g,d.id,d.jsx,d.action,d.cancel]);const Ve=oe.useCallback(()=>{Y(!0),Ie(ke.current),g(H=>H.filter(Ne=>Ne.toastId!==d.id)),setTimeout(()=>{b(d)},QA)},[d,b,g,ke]);oe.useEffect(()=>{if(d.promise&&U==="loading"||d.duration===1/0||d.type==="loading")return;let H;return v||p||jt?(()=>{if(Pe.current<Me.current){const Re=new Date().getTime()-Me.current;ae.current=ae.current-Re}Pe.current=new Date().getTime()})():(()=>{ae.current!==1/0&&(Me.current=new Date().getTime(),H=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),Ve()},ae.current))})(),()=>clearTimeout(H)},[v,p,d,U,jt,Ve]),oe.useEffect(()=>{d.delete&&(Ve(),d.onDismiss==null||d.onDismiss.call(d,d))},[Ve,d.delete]);function sn(){var H;if(F!=null&&F.loading){var Ne;return oe.createElement("div",{className:Fs(z==null?void 0:z.loader,d==null||(Ne=d.classNames)==null?void 0:Ne.loader,"sonner-loader"),"data-visible":U==="loading"},F.loading)}return oe.createElement(AA,{className:Fs(z==null?void 0:z.loader,d==null||(H=d.classNames)==null?void 0:H.loader),visible:U==="loading"})}const mn=d.icon||(F==null?void 0:F[U])||IA(U);var se,J;return oe.createElement("li",{tabIndex:0,ref:ye,className:Fs(C,O,z==null?void 0:z.toast,d==null||(e=d.classNames)==null?void 0:e.toast,z==null?void 0:z.default,z==null?void 0:z[U],d==null||(n=d.classNames)==null?void 0:n[U]),"data-sonner-toast":"","data-rich-colors":(se=d.richColors)!=null?se:S,"data-styled":!(d.jsx||d.unstyled||f),"data-mounted":R,"data-promise":!!d.promise,"data-swiped":je,"data-removed":K,"data-visible":me,"data-y-position":Je,"data-x-position":rt,"data-index":m,"data-front":de,"data-swiping":V,"data-dismissible":ie,"data-type":U,"data-invert":Ot,"data-swipe-out":ee,"data-swipe-direction":G,"data-expanded":!!(v||j&&R),"data-testid":d.testId,style:{"--index":m,"--toasts-before":m,"--z-index":y.length-m,"--offset":`${K?Ce:ke.current}px`,"--initial-height":j?"auto":`${gt}px`,...E,...d.style},onDragEnd:()=>{Q(!1),T(null),ze.current=null},onPointerDown:H=>{H.button!==2&&($e||!ie||(ue.current=new Date,Ie(ke.current),H.target.setPointerCapture(H.pointerId),H.target.tagName!=="BUTTON"&&(Q(!0),ze.current={x:H.clientX,y:H.clientY})))},onPointerUp:()=>{var H,Ne,lt;if(ee||!ie)return;ze.current=null;const Re=Number(((H=ye.current)==null?void 0:H.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qt=Number(((Ne=ye.current)==null?void 0:Ne.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fe=new Date().getTime()-((lt=ue.current)==null?void 0:lt.getTime()),pe=$==="x"?Re:qt,Ze=Math.abs(pe)/Fe;if(Math.abs(pe)>=XA||Ze>.11){Ie(ke.current),d.onDismiss==null||d.onDismiss.call(d,d),D($==="x"?Re>0?"right":"left":qt>0?"down":"up"),Ve(),fe(!0);return}else{var _e,Ue;(_e=ye.current)==null||_e.style.setProperty("--swipe-amount-x","0px"),(Ue=ye.current)==null||Ue.style.setProperty("--swipe-amount-y","0px")}Se(!1),Q(!1),T(null)},onPointerMove:H=>{var Ne,lt,Re;if(!ze.current||!ie||((Ne=window.getSelection())==null?void 0:Ne.toString().length)>0)return;const Fe=H.clientY-ze.current.y,pe=H.clientX-ze.current.x;var Ze;const _e=(Ze=t.swipeDirections)!=null?Ze:JA(B);!$&&(Math.abs(pe)>1||Math.abs(Fe)>1)&&T(Math.abs(pe)>Math.abs(Fe)?"x":"y");let Ue={x:0,y:0};const Xe=Ge=>1/(1.5+Math.abs(Ge)/20);if($==="y"){if(_e.includes("top")||_e.includes("bottom"))if(_e.includes("top")&&Fe<0||_e.includes("bottom")&&Fe>0)Ue.y=Fe;else{const Ge=Fe*Xe(Fe);Ue.y=Math.abs(Ge)<Math.abs(Fe)?Ge:Fe}}else if($==="x"&&(_e.includes("left")||_e.includes("right")))if(_e.includes("left")&&pe<0||_e.includes("right")&&pe>0)Ue.x=pe;else{const Ge=pe*Xe(pe);Ue.x=Math.abs(Ge)<Math.abs(pe)?Ge:pe}(Math.abs(Ue.x)>0||Math.abs(Ue.y)>0)&&Se(!0),(lt=ye.current)==null||lt.style.setProperty("--swipe-amount-x",`${Ue.x}px`),(Re=ye.current)==null||Re.style.setProperty("--swipe-amount-y",`${Ue.y}px`)}},q&&!d.jsx&&U!=="loading"?oe.createElement("button",{"aria-label":A,"data-disabled":$e,"data-close-button":!0,onClick:$e||!ie?()=>{}:()=>{Ve(),d.onDismiss==null||d.onDismiss.call(d,d)},className:Fs(z==null?void 0:z.closeButton,d==null||(s=d.classNames)==null?void 0:s.closeButton)},(J=F==null?void 0:F.close)!=null?J:jA):null,(U||d.icon||d.promise)&&d.icon!==null&&((F==null?void 0:F[U])!==null||d.icon)?oe.createElement("div",{"data-icon":"",className:Fs(z==null?void 0:z.icon,d==null||(r=d.classNames)==null?void 0:r.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||sn():null,d.type!=="loading"?mn:null):null,oe.createElement("div",{"data-content":"",className:Fs(z==null?void 0:z.content,d==null||(i=d.classNames)==null?void 0:i.content)},oe.createElement("div",{"data-title":"",className:Fs(z==null?void 0:z.title,d==null||(o=d.classNames)==null?void 0:o.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?oe.createElement("div",{"data-description":"",className:Fs(N,te,z==null?void 0:z.description,d==null||(a=d.classNames)==null?void 0:a.description)},typeof d.description=="function"?d.description():d.description):null),oe.isValidElement(d.cancel)?d.cancel:d.cancel&&wd(d.cancel)?oe.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||P,onClick:H=>{wd(d.cancel)&&ie&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,H),Ve())},className:Fs(z==null?void 0:z.cancelButton,d==null||(l=d.classNames)==null?void 0:l.cancelButton)},d.cancel.label):null,oe.isValidElement(d.action)?d.action:d.action&&wd(d.action)?oe.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||M,onClick:H=>{wd(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,H),!H.defaultPrevented&&Ve())},className:Fs(z==null?void 0:z.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function l1(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function eR(t,e){const n={};return[t,e].forEach((s,r)=>{const i=r===1,o=i?"--mobile-offset":"--offset",a=i?GA:YA;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(c=>{s[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof s[c]=="number"?`${s[c]}px`:s[c]}):l(a)}),n}const tR=oe.forwardRef(function(e,n){const{id:s,invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:l,className:c,offset:u,mobileOffset:d,theme:f="light",richColors:p,duration:g,style:x,visibleToasts:w=VA,toastOptions:m,dir:y=l1(),gap:v=KA,icons:b,containerAriaLabel:S="Notifications"}=e,[_,E]=oe.useState([]),P=oe.useMemo(()=>s?_.filter(R=>R.toasterId===s):_.filter(R=>!R.toasterId),[_,s]),M=oe.useMemo(()=>Array.from(new Set([i].concat(P.filter(R=>R.position).map(R=>R.position)))),[P,i]),[C,N]=oe.useState([]),[I,B]=oe.useState(!1),[W,j]=oe.useState(!1),[z,F]=oe.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),A=oe.useRef(null),$=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=oe.useRef(null),G=oe.useRef(!1),D=oe.useCallback(R=>{E(X=>{var K;return(K=X.find(Y=>Y.id===R.id))!=null&&K.delete||Pn.dismiss(R.id),X.filter(({id:Y})=>Y!==R.id)})},[]);return oe.useEffect(()=>Pn.subscribe(R=>{if(R.dismiss){requestAnimationFrame(()=>{E(X=>X.map(K=>K.id===R.id?{...K,delete:!0}:K))});return}setTimeout(()=>{BM.flushSync(()=>{E(X=>{const K=X.findIndex(Y=>Y.id===R.id);return K!==-1?[...X.slice(0,K),{...X[K],...R},...X.slice(K+1)]:[R,...X]})})})}),[_]),oe.useEffect(()=>{if(f!=="system"){F(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;const R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:X})=>{F(X?"dark":"light")})}catch{R.addListener(({matches:K})=>{try{F(K?"dark":"light")}catch(Y){console.error(Y)}})}},[f]),oe.useEffect(()=>{_.length<=1&&B(!1)},[_]),oe.useEffect(()=>{const R=X=>{var K;if(o.every(Q=>X[Q]||X.code===Q)){var V;B(!0),(V=A.current)==null||V.focus()}X.code==="Escape"&&(document.activeElement===A.current||(K=A.current)!=null&&K.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[o]),oe.useEffect(()=>{if(A.current)return()=>{T.current&&(T.current.focus({preventScroll:!0}),T.current=null,G.current=!1)}},[A.current]),oe.createElement("section",{ref:n,"aria-label":`${S} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((R,X)=>{var K;const[Y,V]=R.split("-");return P.length?oe.createElement("ol",{key:R,dir:y==="auto"?l1():y,tabIndex:-1,ref:A,className:c,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":Y,"data-x-position":V,style:{"--front-toast-height":`${((K=C[0])==null?void 0:K.height)||0}px`,"--width":`${qA}px`,"--gap":`${v}px`,...x,...eR(u,d)},onBlur:Q=>{G.current&&!Q.currentTarget.contains(Q.relatedTarget)&&(G.current=!1,T.current&&(T.current.focus({preventScroll:!0}),T.current=null))},onFocus:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||G.current||(G.current=!0,T.current=Q.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{W||B(!1)},onDragEnd:()=>B(!1),onPointerDown:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},P.filter(Q=>!Q.position&&X===0||Q.position===R).map((Q,ee)=>{var fe,je;return oe.createElement(ZA,{key:Q.id,icons:b,index:ee,toast:Q,defaultRichColors:p,duration:(fe=m==null?void 0:m.duration)!=null?fe:g,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:r,visibleToasts:w,closeButton:(je=m==null?void 0:m.closeButton)!=null?je:l,interacting:W,position:R,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,closeButtonAriaLabel:m==null?void 0:m.closeButtonAriaLabel,removeToast:D,toasts:P.filter(Se=>Se.position==Q.position),heights:C.filter(Se=>Se.position==Q.position),setHeights:N,expandByDefault:a,gap:v,expanded:I,swipeDirections:e.swipeDirections})})):null}))}),zl="onboard_mnemonic",Do="onboard_wallet_address",Bl="onboard_auth_token",$l="onboard_refresh_token",Ul="onboard_expires_at";function vl(t){const[e,n]=k.useState(""),[s,r]=k.useState(""),[i,o]=k.useState(!1),[a,l]=k.useState(""),[c,u]=k.useState(void 0),[d,f]=k.useState(void 0),[p,g]=k.useState(!1),[x,w]=k.useState(null);k.useEffect(()=>{const C=localStorage.getItem(zl),N=localStorage.getItem(Do),I=localStorage.getItem(Bl),B=localStorage.getItem($l),W=localStorage.getItem(Ul);if(n(C||""),r(N||""),I&&l(I),B&&u(B),W){const j=parseInt(W,10);isNaN(j)||f(j)}},[]);const m=k.useCallback(async C=>{if(!C||C.trim()==="")return null;o(!0);try{Ae.isReady()||await Ae.initialize();const N=await Ae.generateAddress(C.trim(),0);return N.success&&N.address?N.address:(console.error("Failed to generate address:",N.error),null)}catch(N){return console.error("Error generating address:",N),null}finally{o(!1)}},[]),y=k.useCallback(async C=>{const N=C.trim();if(N===""){n(""),r(""),localStorage.removeItem(zl),localStorage.removeItem(Do);return}n(N),localStorage.setItem(zl,N);const I=await m(N);I?(r(I),localStorage.setItem(Do,I)):(r(""),localStorage.removeItem(Do))},[m]),v=k.useCallback((C,N)=>{const I=C.trim(),B=N.trim().toLowerCase();n(I),r(B),localStorage.setItem(zl,I),localStorage.setItem(Do,B)},[]),b=k.useCallback(()=>{n(""),r(""),localStorage.removeItem(zl),localStorage.removeItem(Do)},[]),S=k.useMemo(()=>{if(e==="")return null;const C=e.trim();if(C==="")return null;try{const N=ru.fromPhrase(C,"","m/44'/60'/0'/0/0");if(s&&N.address.toLowerCase()!==s.toLowerCase())return console.warn("Address mismatch: derived address does not match stored address"),null;const I=BigInt(N.privateKey),B=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(I===0n||I>=B)return console.error("Invalid private key: out of secp256k1 curve order"),null;const j=I.toString(16).toLowerCase().padStart(64,"0");return/^[0-9a-f]{64}$/.test(j)?j:(console.error("Invalid private key format"),null)}catch(N){return console.error("Error computing private key:",N),null}},[e,s]),_=k.useCallback(async(C,N,I,B)=>{g(!0),w(null);try{await y(C);const W=await r3(C,N,I,B);if(W.success&&W.authToken)l(W.authToken),u(W.refreshToken),f(W.expiresAt),localStorage.setItem(Bl,W.authToken),W.refreshToken&&localStorage.setItem($l,W.refreshToken),W.expiresAt&&localStorage.setItem(Ul,W.expiresAt.toString()),we.success("Onboarding successful",{description:"Wallet authenticated and auth token generated.",duration:5e3});else{const j=W.error||"Onboarding failed";w(j),l(""),u(void 0),f(void 0),localStorage.removeItem(Bl),localStorage.removeItem($l),localStorage.removeItem(Ul),we.error("Onboarding failed",{description:j,duration:6e3})}}catch(W){const j=(W==null?void 0:W.message)||"Unknown error during onboarding";w(j),l(""),u(void 0),f(void 0),localStorage.removeItem(Bl),localStorage.removeItem($l),localStorage.removeItem(Ul),we.error("Onboarding error",{description:j,duration:6e3})}finally{g(!1)}},[y]),E=k.useCallback(()=>{w(null)},[]),P=k.useCallback(()=>{l(""),u(void 0),f(void 0),w(null),g(!1),localStorage.removeItem(Bl),localStorage.removeItem($l),localStorage.removeItem(Ul)},[]),M=k.useCallback(()=>{b(),P()},[b,P]);return{mnemonic:e,walletAddress:s,privateKey:S,authToken:a,refreshToken:c,expiresAt:d,loading:p,error:x,addressLoading:i,onboard:_,setMnemonic:y,setAccountData:v,clearAccountData:b,clearError:E,reset:P,resetAll:M}}function nR(){const{setAccountData:t}=vl(),{mnemonic:e,setMnemonic:n,addressIndex:s,setAddressIndex:r,result:i,loading:o,generateAddress:a,isReady:l}=EN();return k.useEffect(()=>{i!=null&&i.success&&i.address&&e&&t(e,i.address)},[i,e,t]),h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Address Generator"}),h.jsx("p",{children:"Generate Ethereum addresses from mnemonic phrases"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:e,onChange:c=>n(c.target.value),placeholder:"Enter your mnemonic phrase...",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),h.jsx("input",{id:"addressIndex",type:"number",value:s,onChange:c=>r(parseInt(c.target.value)||0),min:"0",max:"1000"})]}),h.jsx("button",{className:"button",onClick:a,disabled:o||!l,children:o?"Generating...":"Generate Address"}),i&&h.jsx("div",{className:`output ${i.success?"success":"error"}`,children:i.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Generated Address:"}),h.jsx("br",{}),i.address,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Index: ",i.index,h.jsx("br",{}),"Mnemonic: ",i.mnemonic]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),i.error]})})]})}function sR(){var f,p;const{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:c,signMessage:u,isReady:d}=PN();return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Message Signer"}),h.jsx("p",{children:"Sign messages with your private key"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:t,onChange:g=>e(g.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"message",children:"Message to Sign:"}),h.jsx("textarea",{id:"message",value:n,onChange:g=>s(g.target.value),placeholder:"Enter message to sign...",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),h.jsx("input",{id:"addressIndex",type:"number",value:o,onChange:g=>a(parseInt(g.target.value)||0),min:"0",max:"1000"})]}),h.jsx("div",{className:"form-group",children:h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:r,onChange:g=>i(g.target.checked),style:{marginRight:"0.5rem"}}),"Use EIP-712 Typed Data"]})}),h.jsx("button",{className:"button",onClick:u,disabled:c||!d,children:c?"Signing...":"Sign Message"}),l&&h.jsx("div",{className:`output ${l.success?"success":"error"}`,children:l.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Signature:"}),h.jsx("br",{}),l.signature,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Message: ",l.message,h.jsx("br",{}),"EIP-712: ",(f=l.options)!=null&&f.useEIP712?"Yes":"No",h.jsx("br",{}),"Address Index: ",((p=l.options)==null?void 0:p.addressIndex)||0]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),l.error]})})]})}function rR(){var w,m,y,v;const[t,e]=k.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=k.useState(""),[r,i]=k.useState("1000000000000000000000000"),[o,a]=k.useState(0),[l,c]=k.useState(0),[u,d]=k.useState(null),[f,p]=k.useState(!1),g=async()=>{if(!Ae.isReady()){d({success:!1,error:"WASM module not ready"});return}if(!n){d({success:!1,error:"Wallet address is required"});return}p(!0),d(null);try{const b={nonce:o||Date.now(),deadline:l||Date.now()+36e5},S=await Ae.signDeposit(t,n,r,b);d(S)}catch(b){d({success:!1,error:b instanceof Error?b.message:"Unknown error"})}finally{p(!1)}},x=async()=>{if(!Ae.isReady()){d({success:!1,error:"WASM module not ready"});return}p(!0),d(null);try{const b=await Ae.generateAddress(t,0);b.success&&b.address?(s(b.address),d({success:!0,message:"Wallet address generated and set",address:b.address})):d({success:!1,error:b.error||"Failed to generate address"})}catch(b){d({success:!1,error:b instanceof Error?b.message:"Unknown error"})}finally{p(!1)}};return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Deposit Signer"}),h.jsx("p",{children:"Sign deposit messages for the Morpheum protocol"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:t,onChange:b=>e(b.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"walletAddress",children:"Wallet Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"walletAddress",type:"text",value:n,onChange:b=>s(b.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:x,disabled:f||!Ae.isReady(),style:{padding:"0.75rem 1rem"},children:"Generate"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"amount",children:"Amount (wei):"}),h.jsx("input",{id:"amount",type:"text",value:r,onChange:b=>i(b.target.value),placeholder:"1000000000000000000000000"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"nonce",children:"Nonce (0 for current timestamp):"}),h.jsx("input",{id:"nonce",type:"number",value:o,onChange:b=>a(parseInt(b.target.value)||0),min:"0"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"deadline",children:"Deadline (0 for 1 hour from now):"}),h.jsx("input",{id:"deadline",type:"number",value:l,onChange:b=>c(parseInt(b.target.value)||0),min:"0"})]})]}),h.jsx("button",{className:"button",onClick:g,disabled:f||!Ae.isReady()||!n,children:f?"Signing Deposit...":"Sign Deposit"}),u&&h.jsx("div",{className:`output ${u.success?"success":"error"}`,children:u.success?h.jsx(h.Fragment,{children:u.signature?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Deposit Signature:"}),h.jsx("br",{}),u.signature,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Wallet: ",(w=u.options)==null?void 0:w.walletAddress,h.jsx("br",{}),"Amount: ",(m=u.options)==null?void 0:m.amount," wei",h.jsx("br",{}),"Nonce: ",(y=u.options)==null?void 0:y.nonce,h.jsx("br",{}),"Deadline: ",(v=u.options)==null?void 0:v.deadline]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Wallet Address Generated:"}),h.jsx("br",{}),u.address,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Message:"}),h.jsx("br",{}),u.message]})}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),u.error]})})]})}function iR(){const{ownerMnemonic:t,setOwnerMnemonic:e,ownerAddress:n,setOwnerAddress:s,agentAddress:r,setAgentAddress:i,agentPrivateKey:o,expiresInDays:a,setExpiresInDays:l,permissions:c,setPermissions:u,agentName:d,setAgentName:f,nonce:p,setNonce:g,result:x,loading:w,generateOwnerAddress:m,generateAgentKeypair:y,prepareAgentSign:v,signAgentApproval:b,isReady:S}=TN();return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Agent Delegation"}),h.jsx("p",{children:"Approve an agent private key to act on behalf of the owner wallet"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"ownerMnemonic",children:"Owner Mnemonic (for signing approval):"}),h.jsx("textarea",{id:"ownerMnemonic",value:t,onChange:_=>e(_.target.value),placeholder:"Enter owner mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"ownerAddress",type:"text",value:n,onChange:_=>s(_.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:m,disabled:w||!S,style:{padding:"0.75rem 1rem"},children:"Generate"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentAddress",children:"Agent Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"agentAddress",type:"text",value:r,onChange:_=>i(_.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:y,disabled:w||!S,style:{padding:"0.75rem 1rem"},children:"Generate Keypair"})]})]}),o&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentPrivateKey",children:"Agent Private Key (save securely):"}),h.jsx("input",{id:"agentPrivateKey",type:"text",value:o,readOnly:!0,style:{fontFamily:"monospace",fontSize:"0.9rem"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentName",children:"Agent Name (optional):"}),h.jsx("input",{id:"agentName",type:"text",value:d,onChange:_=>f(_.target.value),placeholder:"TradingBot"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"expiresInDays",children:"Expires In Days:"}),h.jsx("input",{id:"expiresInDays",type:"number",value:a,onChange:_=>l(parseInt(_.target.value)||180),min:"1",max:"365"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"permissions",children:"Permissions (comma-separated):"}),h.jsx("input",{id:"permissions",type:"text",value:c,onChange:_=>u(_.target.value),placeholder:"clob::submit_order,clob::cancel_order"}),h.jsx("small",{style:{display:"block",marginTop:"0.5rem",opacity:.8},children:"Example: clob::submit_order, clob::cancel_order, clob::modify_order"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),h.jsx("input",{id:"nonce",type:"text",value:p,onChange:_=>g(_.target.value),placeholder:Date.now().toString()})]}),h.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[h.jsx("button",{className:"button secondary",onClick:v,disabled:w||!S||!n||!r,children:w?"Preparing...":"Prepare Agent Sign"}),h.jsx("button",{className:"button",onClick:b,disabled:w||!S||!n||!r||!t,children:w?"Signing Approval...":"Sign Agent Approval"})]}),x&&h.jsx("div",{className:`output ${x.success?"success":"error"}`,children:x.success?h.jsxs(h.Fragment,{children:[x.signature&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Agent Approval Signature:"}),h.jsx("br",{}),x.signature,h.jsx("br",{}),h.jsx("br",{})]}),x.typedData&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"EIP-712 Typed Data:"}),h.jsx("br",{}),h.jsx("pre",{style:{fontSize:"0.85rem",overflow:"auto",maxHeight:"300px"},children:JSON.stringify(x.typedData,null,2)}),h.jsx("br",{}),h.jsx("strong",{children:"Usage:"}),h.jsx("br",{}),"Use this typed data with MetaMask or other EIP-712 compatible wallets to sign the agent approval."]})]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),x.error]})})]})}function oR({status:t}){const e=()=>t.loading?"loading":t.loaded?"success":t.error?"error":"loading",n=()=>t.loading?"Loading WASM...":t.loaded?"WASM Ready":t.error?"WASM Error":"Unknown";return h.jsxs("div",{className:"App-section",children:[h.jsx("h3",{children:"WASM Status"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[h.jsx("span",{className:`status ${e()}`,children:n()}),t.loading&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"Initializing WebAssembly module..."}),t.loaded&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"morm_signer.wasm loaded successfully"}),t.error&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:t.error})]})]})}const aR="modulepreload",lR=function(t){return"/"+t},c1={},cR=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=lR(l),l in c1)return;c1[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":aR,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Ou="https://router.morpheum.io",c0="wss://router.morpheum.io/websocket",Db="ios-device-1234567890",uR=({isRunning:t,onClick:e})=>h.jsx("button",{onClick:e,disabled:t,style:{color:"#fff",backgroundColor:t?"#ccc":"#007bff",cursor:t?"not-allowed":"pointer"},children:t?"Running Tests...":"Run All Tests"}),dR=({mnemonic:t,baseURL:e,onboardLoading:n,isRunning:s,onOnboard:r})=>{const i=n||s||!t||t.trim()==="";return h.jsx("button",{onClick:()=>{t&&t.trim()!==""&&r(t,e)},disabled:i,style:{color:i?"#ccc":"#fff",backgroundColor:i?"#ccc":"#28a745",cursor:i?"not-allowed":"pointer"},children:n?"Onboarding...":"Onboard & Get Auth Token"})},hR=({isRunning:t,onClick:e})=>h.jsx("button",{onClick:e,disabled:t,style:{color:t?"#ccc":"#fff",backgroundColor:t?"#ccc":"#dc3545",cursor:t?"not-allowed":"pointer"},children:"Clear Results"}),fR=({onClick:t})=>h.jsx("button",{onClick:t,className:"sdk-test-button-dismiss",children:"Dismiss"}),pR=({result:t})=>h.jsxs("div",{className:`sdk-test-result-item ${t.success?"success":"error"}`,children:[h.jsxs("div",{className:"sdk-test-result-content",children:[h.jsxs("div",{className:"sdk-test-result-message",children:[t.success?"":""," ",t.message]}),t.error&&h.jsxs("div",{className:"sdk-test-result-error",children:["Error: ",t.error]}),t.data&&h.jsxs("details",{className:"sdk-test-result-data",children:[h.jsx("summary",{children:"View Data"}),h.jsx("pre",{children:JSON.stringify(t.data,null,2)})]})]}),h.jsx("div",{className:"sdk-test-result-timestamp",children:new Date(t.timestamp).toLocaleTimeString()})]}),gR=({sectionName:t,isExpanded:e,onToggle:n})=>h.jsxs("h2",{className:"sdk-test-section-header",onClick:n,children:[h.jsx("span",{children:t}),h.jsx("span",{className:"sdk-test-section-chevron",children:e?"":""})]});function mR(){var Se,Ce,Ie,gt;const[t,e]=k.useState(Ou),[n,s]=k.useState(""),[r,i]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(Db),[u,d]=k.useState({}),[f,p]=k.useState(!1),[g,x]=k.useState(new Set),w=k.useRef(null),m=k.useRef(null),y=k.useRef(t),v=k.useRef([]),b=k.useRef(""),{markets:S,fetchMarkets:_}=To({baseURL:t,sessionToken:r,autoFetchMarkets:!1}),{mnemonic:E,walletAddress:P,authToken:M,loading:C,error:N,onboard:I,clearError:B,setMnemonic:W}=vl();k.useEffect(()=>{E||W("legal winner thank year wave sausage worth useful legal winner thank yellow")},[E,W]);const j=k.useRef(E||"");k.useEffect(()=>{j.current=E||""},[E]);const{buckets:z,loading:F,error:A,refresh:$}=l3({baseURL:t,authToken:r||o,walletAddress:P||void 0,refreshInterval:0});k.useEffect(()=>{M&&(a(M),localStorage.setItem("authToken",M))},[M]),k.useEffect(()=>{o&&o.trim()!==""&&localStorage.setItem("authToken",o)},[o]);const T=k.useRef(f);k.useEffect(()=>{T.current===!0&&f===!1&&setTimeout(()=>{const L=Object.values(u).flatMap(de=>de.results),ae=L.filter(de=>de.success).length,ue=L.length,ye=ue-ae;ue>0&&(ye===0?we.success("All tests passed",{description:`${ue} test(s) completed successfully.`,duration:5e3}):we.warning("Tests completed with failures",{description:`${ae}/${ue} tests passed. ${ye} test(s) failed.`,duration:6e3}))},100),T.current=f},[f,u]),k.useEffect(()=>{const L=localStorage.getItem("authToken");L&&!o&&a(L)},[]);const G=S.length>0?(((Se=S.find(L=>L.active))==null?void 0:Se.market_id)??S[0].market_id)||(((Ie=(Ce=S.find(L=>L.active))==null?void 0:Ce.id)==null?void 0:Ie.toString())??((gt=S[0].id)==null?void 0:gt.toString())??""):null,D=G??n;k.useEffect(()=>{G&&n!==G&&s(G)},[G]),k.useEffect(()=>{y.current=t},[t]);const R=(L,ae)=>{d(ue=>{const ye=ue[L]||{name:L,results:[]};return{...ue,[L]:{...ye,results:[...ye.results,ae]}}})},X=()=>{d({}),x(new Set)},K=L=>{x(ae=>{const ue=new Set(ae);return ue.has(L)?ue.delete(L):ue.add(L),ue})};k.useEffect(()=>{const L=Object.keys(u).filter(ae=>u[ae].results.length>0);L.length>0&&x(ae=>{const ue=new Set(ae);return L.forEach(ye=>ue.add(ye)),ue})},[u]);const Y=()=>{const L="Utilities";R(L,{success:!0,message:"Testing utility functions...",timestamp:Date.now()});try{const ae=dt(1);R(L,{success:ae==="100000000",message:`toSatoshi(1.0) = ${ae}`,data:{expected:"100000000",got:ae},timestamp:Date.now()});const ue=dt("1.5");R(L,{success:ue==="150000000",message:`toSatoshi("1.5") = ${ue}`,data:{expected:"150000000",got:ue},timestamp:Date.now()});const ye=Te("100000000");R(L,{success:ye===1,message:`fromSatoshi("100000000") = ${ye}`,data:{expected:1,got:ye},timestamp:Date.now()});const de=FC(1);R(L,{success:de===1e8,message:`toSatoshiUint64(1.0) = ${de}`,data:{expected:1e8,got:de},timestamp:Date.now()});const me=Kv("100000000"),U=Kv("abc");R(L,{success:me&&!U,message:`isValidSatoshi tests: "100000000"=${me}, "abc"=${U}`,data:{valid1:me,valid2:U},timestamp:Date.now()});const ie=[1,1.5,2],O=$M(ie),te=UM(O);R(L,{success:te.length===3,message:`Batch conversion: ${ie.length} items`,data:{input:ie,satoshi:O,decimal:te},timestamp:Date.now()}),R(L,{success:da===1e8,message:`SATOSHI_SCALE = ${da}`,data:{expected:1e8,got:da},timestamp:Date.now()})}catch(ae){R(L,{success:!1,message:"Utility test error",error:ae.message,timestamp:Date.now()})}},V=async(L="Authentication")=>{if(!P||P.trim()===""){R(L,{success:!1,message:"Authentication skipped: Wallet address required",timestamp:Date.now()});return}if(!Ae.isReady()){R(L,{success:!1,message:"Authentication failed: mormSigner not loaded. Please initialize mormSigner first for address generation.",timestamp:Date.now()});return}try{R(L,{success:!0,message:"Starting authentication (onboarding) with ethers.js EIP-712 signing...",timestamp:Date.now()});const{onboardAndGetAuthToken:ae}=await cR(async()=>{const{onboardAndGetAuthToken:ye}=await Promise.resolve().then(()=>vN);return{onboardAndGetAuthToken:ye}},void 0);if(R(L,{success:!0,message:"Calling onboardAndGetAuthToken (handles nonce, EIP-712 signing with ethers.js, and API request)...",timestamp:Date.now()}),!E)throw new Error("Mnemonic is required for authentication");const ue=await ae(E,y.current);if(!ue.success||!ue.authToken)throw new Error(ue.error||"Onboarding failed");a(ue.authToken),localStorage.setItem("authToken",ue.authToken),R(L,{success:!0,message:"AUTHENTICATION SUCCESSFUL!",data:{walletAddress:P,authToken:ue.authToken.substring(0,32)+"...",refreshToken:ue.refreshToken,expiresAt:ue.expiresAt},timestamp:Date.now()})}catch(ae){const ue=ae.message||String(ae);R(L,{success:!1,message:`Authentication failed: ${ue}`,error:ue,timestamp:Date.now()})}},Q=async()=>{var de;const L="Wallet Specific";m.current=new wn({baseURL:y.current}),r&&m.current&&m.current.setSessionToken(r),R(L,{success:!0,message:"Waiting for wallet address to be available...",timestamp:Date.now()});const ae=5e3,ue=200;let ye=0;for(;!P||P.trim()==="";){if(ye>=ae){R(L,{success:!1,message:"Timeout: Wallet address not available after 5 seconds",error:"Wallet address is required for wallet-specific tests. Please ensure mnemonic is provided.",timestamp:Date.now()});return}await new Promise(me=>setTimeout(me,ue)),ye+=ue}if(!P||P.trim()===""){R(L,{success:!1,message:"Wallet address is required for wallet-specific tests",error:"Wallet address not available",timestamp:Date.now()});return}R(L,{success:!0,message:`Wallet address available: ${P.substring(0,10)}...`,timestamp:Date.now()});try{R(L,{success:!0,message:`Testing getBalance() for asset "MORM" at address ${P.substring(0,10)}...`,timestamp:Date.now()});try{const U=await m.current.getBalance(P,"MORM"),ie=(U==null?void 0:U.balance)||(U==null?void 0:U.amount)||(U==null?void 0:U.value)||"N/A",O=typeof ie=="string"?ie:JSON.stringify(ie);R(L,{success:!!U,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: MORM | Balance: ${O} (raw satoshi format)`,data:{balance:U,asset:"MORM",walletAddress:P.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(U){R(L,{success:!1,message:'getBalance() failed for asset "MORM" (may require authentication)',error:U.message,data:{asset:"MORM",walletAddress:P.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}R(L,{success:!0,message:`Testing getBalance() for asset "USDC" at address ${P.substring(0,10)}...`,timestamp:Date.now()});try{const U=await m.current.getBalance(P,"USDC"),ie=(U==null?void 0:U.balance)||(U==null?void 0:U.amount)||(U==null?void 0:U.value)||"N/A",O=typeof ie=="string"?ie:JSON.stringify(ie);R(L,{success:!!U,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: USDC | Balance: ${O} (raw satoshi format)`,data:{balance:U,asset:"USDC",walletAddress:P.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(U){R(L,{success:!1,message:'getBalance() failed for asset "USDC" (may require authentication)',error:U.message,data:{asset:"USDC",walletAddress:P.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}try{const U=await m.current.getBalanceDecimal(P,"USDC");R(L,{success:!!U,message:"getBalanceDecimal() - GET /bank/v1/balance/{address}",data:U,timestamp:Date.now()})}catch(U){R(L,{success:!1,message:"getBalanceDecimal() failed",error:U.message,timestamp:Date.now()})}try{const U=await m.current.getBalances(P);R(L,{success:!!U,message:"getBalances() - GET /bank/v1/balances/{address}",data:U,timestamp:Date.now()})}catch(U){R(L,{success:!1,message:"getBalances() failed (may require authentication)",error:U.message,timestamp:Date.now()})}try{const U=await m.current.getPositions(P);R(L,{success:Array.isArray(U),message:`getPositions() - GET /bucket/v1/address/{address}/positions returned ${Array.isArray(U)?U.length:0} positions`,data:U,timestamp:Date.now()})}catch(U){R(L,{success:!1,message:"getPositions() failed",error:U.message,timestamp:Date.now()})}let me=[];try{const U=await m.current.getOrders(P);me=(U==null?void 0:U.orders)||[];const ie=U&&(Array.isArray(me)||U.total_count!==void 0);R(L,{success:ie,message:`getOrders() - GET /clob/v1/address/orders?address={address} returned ${Array.isArray(me)?me.length:0} orders (total_count: ${(U==null?void 0:U.total_count)??"N/A"})`,data:{orders:Array.isArray(me)?me.slice(0,3):me,total_count:U==null?void 0:U.total_count,timestamp:U==null?void 0:U.timestamp},timestamp:Date.now()})}catch(U){R(L,{success:!1,message:"getOrders() failed",error:U.message,timestamp:Date.now()})}if(Array.isArray(me)&&me.length>0){const U=me[0],ie=(U==null?void 0:U.orderId)||(U==null?void 0:U.order_id)||(U==null?void 0:U.id);if(ie){R(L,{success:!0,message:`Testing getOrder() for order ID: ${ie.substring(0,16)}... (from getOrders result)`,timestamp:Date.now()});try{const O=await m.current.getOrder(ie);R(L,{success:!!O,message:`getOrder() - GET /clob/v1/order/{orderID} | Order ID: ${ie.substring(0,16)}...`,data:{order:O,orderId:ie,source:"First order from getOrders() result"},timestamp:Date.now()})}catch(O){R(L,{success:!1,message:`getOrder() failed for order ID: ${ie.substring(0,16)}...`,error:O.message,data:{orderId:ie,endpoint:"GET /clob/v1/order/{orderID}"},timestamp:Date.now()})}}else R(L,{success:!1,message:"getOrder() test skipped: No valid order ID found in getOrders() result",error:"Order ID not found in order object",data:{order:U,availableFields:Object.keys(U||{})},timestamp:Date.now()})}else R(L,{success:!0,message:"getOrder() test skipped: No orders available from getOrders() (need at least 1 order)",data:{ordersCount:me.length,note:"getOrder() test requires at least one order from getOrders()"},timestamp:Date.now()});try{const U=await m.current.getOrderHistory(P),ie=Array.isArray(U)?U:(U==null?void 0:U.orders)||[],O=U&&(Array.isArray(ie)||U.orders!==void 0);R(L,{success:O,message:`getOrderHistory() - GET /clob/v1/address/orders/history?address={address} returned ${Array.isArray(ie)?ie.length:0} orders`,data:Array.isArray(ie)?ie.slice(0,3):U,timestamp:Date.now()})}catch(U){R(L,{success:!1,message:"getOrderHistory() failed",error:U.message,timestamp:Date.now()})}try{const U=await m.current.getTradeHistory(P),ie=Array.isArray(U)?U:(U==null?void 0:U.trades)||(U==null?void 0:U.data)||[],O=U&&(Array.isArray(ie)||U.trades!==void 0||U.data!==void 0);R(L,{success:O,message:`getTradeHistory() - GET /clob/v1/address/trades?address={address} returned ${Array.isArray(ie)?ie.length:0} trades`,data:Array.isArray(ie)?ie.slice(0,3):U,timestamp:Date.now()})}catch(U){R(L,{success:!1,message:"getTradeHistory() failed",error:U.message,timestamp:Date.now()})}try{const U=await m.current.getBuckets(P);if(R(L,{success:Array.isArray(U)||U!==void 0,message:`getBuckets() - GET /bucket/v1/address/{address}/buckets returned ${Array.isArray(U)?U.length:"data"}`,data:Array.isArray(U)?U.slice(0,3):U,timestamp:Date.now()}),Array.isArray(U)&&U.length>0){const ie=U[0],O=ie.bucket_id||ie.id||ie.bucketId;if(O)try{const te=await m.current.getBucket(O);R(L,{success:!!te,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} (${O.substring(0,16)}...)`,data:te,timestamp:Date.now()})}catch(te){R(L,{success:!1,message:`getBucket(${O.substring(0,16)}...) failed`,error:te.message,timestamp:Date.now()})}}}catch(U){R(L,{success:!1,message:"getBuckets() failed",error:U.message,timestamp:Date.now()})}R(L,{success:!0,message:"Testing useBuckets hook...",timestamp:Date.now()});try{if(await $(),R(L,{success:!A&&!F,message:`useBuckets hook: ${z.length} buckets loaded`,data:{buckets:z.slice(0,3),loading:F,error:A,totalBuckets:z.length},timestamp:Date.now()}),z.length>0){const ie=(de=z[0].bucketId)==null?void 0:de.toString();if(ie)try{const O=await m.current.getBucket(ie);R(L,{success:!!O,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} via hook bucket ID (${ie.substring(0,16)}...)`,data:O,timestamp:Date.now()})}catch(O){R(L,{success:!1,message:"getBucket() via hook bucket ID failed",error:O.message,timestamp:Date.now()})}}}catch(U){R(L,{success:!1,message:"useBuckets hook test failed",error:U.message,timestamp:Date.now()})}}catch(me){R(L,{success:!1,message:"Wallet Specific test error",error:me.message,timestamp:Date.now()})}},ee=async()=>{var ae,ue,ye,de,me;const L="InfoClient";m.current=new wn({baseURL:y.current}),r&&m.current&&m.current.setSessionToken(r);try{R(L,{success:!0,message:"Testing getMarkets()...",timestamp:Date.now()});const U=await _();v.current=Array.isArray(U)?U:[];const ie=Array.isArray(U)?U.length:0,O=ie>0?U.find(q=>q.active||q.status==="active")??U[0]:null,te=(O==null?void 0:O.market_id)??((ae=O==null?void 0:O.id)==null?void 0:ae.toString())??null;if(R(L,{success:Array.isArray(U)&&ie>0,message:`getMarkets() - GET /market/v1/all returned ${ie} markets${te?` | Using market ID: ${te} (${(O==null?void 0:O.moniker)||(O==null?void 0:O.symbol)||"auto-selected"})`:""}`,data:{count:ie,defaultMarketId:te,defaultMarket:O?{id:O.id,market_id:O.market_id,moniker:O.moniker,symbol:O.symbol,active:O.active,status:O.status}:null,markets:U.slice(0,5)},timestamp:Date.now()}),te){s(te),b.current=te;const q=(O==null?void 0:O.moniker)||(O==null?void 0:O.symbol)||(O!=null&&O.baseAsset&&(O!=null&&O.quoteAsset)?`${O.baseAsset}-${O.quoteAsset}`:"Unknown");R(L,{success:!0,message:`Markets loaded: ${ie} | Auto-selected: ${q} (ID: ${te.substring(0,10)}...)`,data:{selectedMarketId:te,count:ie,market:O},timestamp:Date.now()}),R(L,{success:!0,message:"Waiting 1.5s for market selection to take effect...",timestamp:Date.now()}),await new Promise(he=>setTimeout(he,1500)),R(L,{success:!0,message:`Market ID ready: ${te}`,data:{marketId:te},timestamp:Date.now()}),R(L,{success:!0,message:`Proceeding with market: ${q}`,timestamp:Date.now()})}const ne=te||D||n;if(ne){R(L,{success:!0,message:`Testing getOrderbook(${ne}, true)...`,timestamp:Date.now()});try{const q=await m.current.getOrderbook(ne,!0);R(L,{success:q&&(q.bids||q.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} with decimal conversion",data:{bids:(ue=q==null?void 0:q.bids)==null?void 0:ue.slice(0,3),asks:(ye=q==null?void 0:q.asks)==null?void 0:ye.slice(0,3)},timestamp:Date.now()});const he=await m.current.getOrderbook(ne,!1);R(L,{success:he&&(he.bids||he.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} raw satoshi format",data:{bids:(de=he==null?void 0:he.bids)==null?void 0:de.slice(0,2),asks:(me=he==null?void 0:he.asks)==null?void 0:me.slice(0,2)},timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} failed",error:q.message,timestamp:Date.now()})}R(L,{success:!0,message:`Testing getTicker(${ne})...`,timestamp:Date.now()});try{const q=await m.current.getTicker(ne);R(L,{success:!!q,message:"getTicker() - GET /market/v1/market/{marketId}/stats",data:q,timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"getTicker() - GET /market/v1/market/{marketId}/stats failed",error:q.message,timestamp:Date.now()})}R(L,{success:!0,message:`Testing getRecentTrades(${ne}, 10)...`,timestamp:Date.now()});try{const q=await m.current.getRecentTrades(ne,10);R(L,{success:Array.isArray(q),message:`getRecentTrades() - GET /clob/v1/trades?market_id={marketId} returned ${Array.isArray(q)?q.length:0} trades`,data:q==null?void 0:q.slice(0,3),timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"getRecentTrades() - GET /clob/v1/trades?market_id={marketId} failed",error:q.message,timestamp:Date.now()})}}else R(L,{success:!1,message:"Skipping market-specific tests: No market ID available",error:"Please ensure markets are loaded and a market is selected",timestamp:Date.now()});R(L,{success:!0,message:"Testing router/v1 endpoints...",timestamp:Date.now()});try{const q=await m.current.getSupportedActions();R(L,{success:Array.isArray(q==null?void 0:q.actions)||(q==null?void 0:q.actions)!==void 0,message:"getSupportedActions() - GET /router/v1/tx/supported-actions",data:q,timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"getSupportedActions() - GET /router/v1/tx/supported-actions failed",error:q.message,timestamp:Date.now()})}try{const q=await m.current.validateAction("clob::submit_order");R(L,{success:(q==null?void 0:q.valid)!==void 0||q!==void 0,message:'validateAction() - GET /router/v1/tx/validate-action ("clob::submit_order")',data:q,timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"validateAction() - GET /router/v1/tx/validate-action failed",error:q.message,timestamp:Date.now()})}try{const q=await m.current.getHealthSummary();R(L,{success:!!q,message:"getHealthSummary() - GET /router/v1/health/summary",data:q,timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"getHealthSummary() - GET /router/v1/health/summary failed",error:q.message,timestamp:Date.now()})}try{const q=await m.current.getHealthDaemons();R(L,{success:!!q,message:"getHealthDaemons() - GET /router/v1/health/daemons",data:q,timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"getHealthDaemons() - GET /router/v1/health/daemons failed",error:q.message,timestamp:Date.now()})}try{const q=await m.current.getHealthOracle();R(L,{success:!!q,message:"getHealthOracle() - GET /router/v1/health/oracle",data:q,timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"getHealthOracle() - GET /router/v1/health/oracle failed",error:q.message,timestamp:Date.now()})}try{const q=await m.current.getServerTime();R(L,{success:!!q&&(q.serverTime!==void 0||q!==void 0),message:"getServerTime() - GET /router/v1/time",data:q,timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"getServerTime() - GET /router/v1/time failed",error:q.message,timestamp:Date.now()})}try{const q=await m.current.getMetricsTPS();R(L,{success:!!q,message:"getMetricsTPS() - GET /router/v1/metrics/tps",data:q,timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"getMetricsTPS() - GET /router/v1/metrics/tps failed",error:q.message,timestamp:Date.now()})}try{const q=await m.current.getMetricsLatency();R(L,{success:!!q,message:"getMetricsLatency() - GET /router/v1/metrics/latency",data:q,timestamp:Date.now()})}catch(q){R(L,{success:!1,message:"getMetricsLatency() - GET /router/v1/metrics/latency failed",error:q.message,timestamp:Date.now()})}}catch(U){R(L,{success:!1,message:"InfoClient test error",error:U.message,timestamp:Date.now()})}},fe=async()=>{var de,me;const L="ExchangeClient";if(!E){R(L,{success:!1,message:"Mnemonic required for ExchangeClient tests",error:"No mnemonic provided",timestamp:Date.now()});return}let ae=n||D||b.current||"";if(!ae||ae.trim()===""){if(v.current&&v.current.length>0){const U=v.current.find(ie=>ie.active||ie.status==="active")??v.current[0];U&&(ae=U.market_id??((de=U.id)==null?void 0:de.toString())??"",b.current=ae,R(L,{success:!0,message:`Market ID not in state, using from fetched markets ref: ${ae.substring(0,16)}...`,data:{source:"fetchedMarketsRef",marketId:ae,market:{moniker:U.moniker,symbol:U.symbol,active:U.active}},timestamp:Date.now()}))}else if(S&&S.length>0){const U=S.find(ie=>ie.active||ie.status==="active")??S[0];U&&(ae=U.market_id??((me=U.id)==null?void 0:me.toString())??"",R(L,{success:!0,message:`Market ID not in state, using from markets state: ${ae.substring(0,16)}...`,data:{source:"markets state",marketId:ae,market:{moniker:U.moniker,symbol:U.symbol,active:U.active}},timestamp:Date.now()}))}}if(!ae||ae.trim()===""){R(L,{success:!1,message:"Market ID required from page or loaded markets",error:`Please enter or select a market ID in the configuration section, or ensure markets are loaded first. Debug: marketId="${n||"(empty)"}", effectiveMarketId="${D||"(empty)"}", fetchedMarketIdRef="${b.current||"(empty)"}", fetchedMarketsRef.length=${v.current.length}, markets.length=${S.length}`,data:{marketId:n||"(empty)",effectiveMarketId:D||"(empty)",defaultMarketId:G||"(empty)",fetchedMarketIdRef:b.current||"(empty)",fetchedMarketsRefCount:v.current.length,marketsCount:S.length,marketsAvailable:S.length>0||v.current.length>0},timestamp:Date.now()});return}const ue=P||"";if(!ue||ue.trim()===""){R(L,{success:!1,message:"Wallet address required from page",error:"Wallet address should be generated from mnemonic or entered manually. Please ensure mnemonic is valid.",timestamp:Date.now()});return}const ye=n?"page state (marketId)":D?"page state (effectiveMarketId)":"loaded markets array";R(L,{success:!0,message:`Using market ID from ${ye}: ${ae.substring(0,16)}...`,data:{marketId:ae,source:ye},timestamp:Date.now()}),R(L,{success:!0,message:`Using wallet address from page: ${ue.substring(0,10)}...`,data:{walletAddress:ue},timestamp:Date.now()}),(r||o)&&R(L,{success:!0,message:`Using signing tokens: ${r?"Session Token":""} ${o?"Auth Token":""}`,data:{hasSessionToken:!!r,hasAuthToken:!!o},timestamp:Date.now()}),w.current=new yl({baseURL:y.current,mnemonic:j.current});try{R(L,{success:!0,message:"Initializing ExchangeClient...",timestamp:Date.now()}),await w.current.initialize();const U=w.current.getWalletAddress();if(U.toLowerCase()!==ue.toLowerCase()){R(L,{success:!1,message:"Wallet address mismatch",error:`ExchangeClient wallet (${U}) does not match page wallet (${ue})`,timestamp:Date.now()});return}R(L,{success:!0,message:`ExchangeClient initialized successfully (Wallet: ${U.substring(0,10)}...)`,data:{walletAddress:U,marketId:ae,verified:!0},timestamp:Date.now()});const ie=ae;R(L,{success:!0,message:`Using market ID as string: ${ie}`,data:{marketId:ie},timestamp:Date.now()});let O=null;if(ae){const q=dt("1"),he={marketId:ie,side:"buy",orderType:"LIMIT",price:40010.8778,quantity:.01,timeInForce:"GTC",leverage:q};R(L,{success:!0,message:`Testing placeOrder() (submit order) for market ${ae}...`,data:{requestBody:he,endpoint:"POST /clob/v1/order",note:"Request body (price, quantity, leverage) will be converted to satoshi format by SDK. Leverage is already in satoshi format.",leverage:{decimal:1,satoshi:q}},timestamp:Date.now()});try{const Me=await w.current.placeOrder(he);Me?(O=Me.orderId||Me.order_id||Me.id||null,O?R(L,{success:!0,message:`placeOrder() - POST /clob/v1/order executed successfully. Order ID: ${O.substring(0,16)}...`,data:{orderResult:Me,orderId:O,requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()}):R(L,{success:!0,message:"placeOrder() - POST /clob/v1/order executed successfully (orderId not found in response)",data:{orderResult:Me,requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})):R(L,{success:!1,message:"placeOrder() - POST /clob/v1/order returned empty response",data:{requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}catch(Me){R(L,{success:!1,message:"placeOrder() - POST /clob/v1/order failed",error:Me.message,data:{requestBody:he,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}}else R(L,{success:!0,message:"Skipping placeOrder() test: No market ID available",timestamp:Date.now()});if(ae&&O){R(L,{success:!0,message:`Testing cancelOrder() for order ${O.substring(0,16)}...`,timestamp:Date.now()});try{const ne=await w.current.cancelOrder({orderId:O,marketId:ie});R(L,{success:!!ne,message:"cancelOrder() - POST /router/v1/tx executed successfully",data:ne,timestamp:Date.now()})}catch(ne){R(L,{success:!1,message:"cancelOrder() - POST /router/v1/tx failed",error:ne.message,timestamp:Date.now()})}}else ae?O||R(L,{success:!0,message:"Skipping cancelOrder() test: No order ID available (placeOrder may have failed or orderId not in response)",timestamp:Date.now()}):R(L,{success:!0,message:"Skipping cancelOrder() test: No market ID available",timestamp:Date.now()});if(ae){R(L,{success:!0,message:`Testing closePosition() for market ${ae}...`,timestamp:Date.now()});try{const ne=await w.current.closePosition({marketId:ie});R(L,{success:!!ne,message:"closePosition() - POST /router/v1/tx executed successfully",data:ne,timestamp:Date.now()})}catch(ne){R(L,{success:!1,message:"closePosition() - POST /router/v1/tx failed (may not have open position)",error:ne.message,timestamp:Date.now()})}}else R(L,{success:!0,message:"Skipping closePosition() test: No market ID available",timestamp:Date.now()});R(L,{success:!0,message:"Fetching buckets for bucket operation tests...",timestamp:Date.now()});let te=[];try{m.current||(m.current=new wn({baseURL:y.current})),r&&m.current&&m.current.setSessionToken(r);const ne=await m.current.getBuckets(U);te=Array.isArray(ne)?ne:[],R(L,{success:!0,message:`Found ${te.length} bucket(s) for testing`,data:{bucketCount:te.length,buckets:te.slice(0,3).map(q=>({bucketId:q.bucket_id||q.id||q.bucketId,availableMargin:q.available_margin||q.availableMargin}))},timestamp:Date.now()})}catch(ne){R(L,{success:!1,message:"Failed to fetch buckets for testing",error:ne.message,timestamp:Date.now()})}if(te.length>0){const ne=te[0],q=ne.bucket_id||ne.id||ne.bucketId;if(q){R(L,{success:!0,message:"Testing extractToBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const he=await w.current.extractToBucket({bucketId:q,assetId:"USDC",amount:"100000000"});R(L,{success:!!he,message:"extractToBucket() - POST /bank/v1/extract-to-bucket executed successfully",data:he,timestamp:Date.now()})}catch(he){R(L,{success:!1,message:"extractToBucket() - POST /bank/v1/extract-to-bucket failed",error:he.message,timestamp:Date.now()})}}else R(L,{success:!0,message:"Skipping extractToBucket() test: No valid bucket ID found",timestamp:Date.now()})}else R(L,{success:!0,message:"Skipping extractToBucket() test: No buckets available",timestamp:Date.now()});if(te.length>0){const ne=te[0],q=ne.bucket_id||ne.id||ne.bucketId;if(q){R(L,{success:!0,message:"Testing withdrawFromBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const he=await w.current.withdrawFromBucket({bucketId:q,assetId:"USDC",amount:"100000000"});R(L,{success:!!he,message:"withdrawFromBucket() - POST /bank/v1/withdraw-from-bucket executed successfully",data:he,timestamp:Date.now()})}catch(he){R(L,{success:!1,message:"withdrawFromBucket() - POST /bank/v1/withdraw-from-bucket failed",error:he.message,timestamp:Date.now()})}}else R(L,{success:!0,message:"Skipping withdrawFromBucket() test: No valid bucket ID found",timestamp:Date.now()})}else R(L,{success:!0,message:"Skipping withdrawFromBucket() test: No buckets available",timestamp:Date.now()});if(te.length>=2){const ne=te[0],q=te[1],he=ne.bucket_id||ne.id||ne.bucketId,Me=q.bucket_id||q.id||q.bucketId;if(he&&Me){R(L,{success:!0,message:"Testing bucketTransfer() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const ke=await w.current.bucketTransfer({fromBucketId:he,toBucketId:Me,assetId:"USDC",amount:"100000000"});R(L,{success:!!ke,message:"bucketTransfer() - POST /bucket/v1/bucket/transfer executed successfully",data:ke,timestamp:Date.now()})}catch(ke){R(L,{success:!1,message:"bucketTransfer() - POST /bucket/v1/bucket/transfer failed",error:ke.message,timestamp:Date.now()})}}else R(L,{success:!0,message:"Skipping bucketTransfer() test: Invalid bucket IDs",timestamp:Date.now()})}else R(L,{success:!0,message:"Skipping bucketTransfer() test: Need at least 2 buckets (found "+te.length+")",timestamp:Date.now()});R(L,{success:!0,message:"ExchangeClient tests completed",data:{walletAddress:U,marketId:ie,sessionToken:r?"present":"not set",authToken:o?"present":"not set",methodsTested:["placeOrder","cancelOrder","closePosition","extractToBucket","withdrawFromBucket","bucketTransfer"]},timestamp:Date.now()})}catch(U){R(L,{success:!1,message:"ExchangeClient test error",error:U.message,timestamp:Date.now()})}},je=async()=>{if(!f){p(!0),X(),we.info("Running tests",{description:"Starting comprehensive SDK test suite..."});try{Y(),await ee(),await V("Authentication"),await Q(),E&&await fe()}catch(L){R("General",{success:!1,message:"Test suite error",error:L.message,timestamp:Date.now()}),we.error("Test suite error",{description:L.message||"An unexpected error occurred during testing.",duration:6e3})}finally{p(!1)}}};return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"SDK Test Page"}),h.jsx("p",{children:"Comprehensive test suite for all SDK APIs"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"sdk-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:L=>e(L.target.value),className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:L=>{const ae=L.target.value;ae&&s(ae)},className:"sdk-test-config-select",children:S.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),S.map(L=>{var de;const ae=L.market_id??((de=L.market_id)==null?void 0:de.toString())??"",ue=L.moniker?L.moniker:L.symbol?L.symbol:L.baseAsset&&L.quoteAsset?`${L.baseAsset}-${L.quoteAsset}`:`Market ID: ${ae}`,ye=L.active?" [ACTIVE]":"";return h.jsxs("option",{value:ae,children:[ue," - ID: ",ae,ye]},ae)})]})}),S.length>0&&h.jsx("small",{className:`sdk-test-config-hint ${n===G?"info":"warning"}`,children:n===G?` Auto-selected default market (ID: ${G==null?void 0:G.substring(0,16)}...)`:` Manual selection (ID: ${n==null?void 0:n.substring(0,16)}...)`})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic (for ExchangeClient):",h.jsx("input",{type:"text",value:E||"",onChange:L=>W(L.target.value),placeholder:"Optional",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Session Token (for authenticated InfoClient):",h.jsx("input",{type:"text",value:r,onChange:L=>i(L.target.value),disabled:!!(r&&r.trim()!==""),placeholder:"Optional",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Auth Token:",h.jsx("input",{type:"text",value:o,onChange:L=>a(L.target.value),disabled:!!(M&&M.trim()!==""),placeholder:M?"Auto-filled from onboarding":'Optional - Use "Onboard" button to generate',className:"sdk-test-config-input"}),M&&h.jsx("small",{className:"sdk-test-config-hint success",children:" Auto-filled from onboarding"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:P||"",disabled:!!(E&&E.trim()!==""),onChange:()=>{},placeholder:"automatic (from mnemonic)",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Device ID:",h.jsx("input",{type:"text",value:l,onChange:L=>c(L.target.value),className:"sdk-test-config-input"})]})}),h.jsxs("div",{className:"control-box",children:[h.jsx(uR,{isRunning:f,onClick:je}),h.jsx(dR,{mnemonic:E||"",baseURL:t,onboardLoading:C,isRunning:f,onOnboard:(L,ae)=>{L&&L.trim()!==""?I(L,ae):we.warning("Mnemonic required",{description:"Please enter a mnemonic first to perform onboard."})}}),h.jsx(hR,{isRunning:f,onClick:X})]})]}),M&&h.jsxs("span",{className:"sdk-test-status success",children:[" Auth Token: ",M.substring(0,20),"..."]}),N&&h.jsxs("span",{className:"sdk-test-status error",children:[" Onboard Error: ",N,h.jsx(fR,{onClick:B})]})]}),h.jsx("div",{className:"sdk-test-results",children:Object.entries(u).map(([L,ae])=>{const ue=g.has(L);return h.jsxs("div",{className:"sdk-test-section",children:[h.jsx(gR,{sectionName:L,isExpanded:ue,onToggle:()=>K(L)}),ue&&h.jsx("div",{className:"sdk-test-section-content",children:ae.results.map((ye,de)=>h.jsx(pR,{result:ye},de))})]},L)})}),Object.keys(u).length===0&&!f&&h.jsx("div",{className:"sdk-test-empty-state",children:'Click "Run All Tests" to start testing the SDK APIs'})]})}const xR=({isConnected:t,isConnecting:e,onConnect:n,onDisconnect:s})=>h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:n,disabled:t||e,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:t?"#ccc":e?"#ffc107":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:t||e?"not-allowed":"pointer"},children:e?" Connecting...":t?" Connected":"Connect"}),e&&h.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Connection in progress... Check messages below for details"}),h.jsx("button",{onClick:s,disabled:!t,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:t?"#dc3545":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:t?"pointer":"not-allowed"},children:"Disconnect"})]}),bR=({onClick:t})=>h.jsx("button",{onClick:t,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),cn=({channel:t,isSubscribed:e,isConnected:n,disabled:s=!1,subscribeLabel:r,unsubscribeLabel:i,onSubscribe:o,onUnsubscribe:a,variant:l="public"})=>{const c=!n||s,u=e?"#dc3545":l==="private"?"#28a745":"#007bff";return h.jsx("button",{onClick:e?a:o,disabled:c,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:u,color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer"},children:e?i:r})},yR=({steps:t})=>t.length===0?null:h.jsxs("div",{className:"connection-steps-container",children:[h.jsx("h2",{children:"Connection Steps"}),h.jsx("div",{className:"connection-steps-list",children:t.map((e,n)=>h.jsxs("div",{className:`connection-step-item ${e.status==="error"?"error":e.status==="success"?"success":e.status==="in-progress"?"in-progress":"pending"}`,children:[h.jsx("span",{className:"connection-step-icon",children:e.status==="error"?"":e.status==="success"?"":e.status==="in-progress"?"":""}),h.jsxs("div",{className:"connection-step-content",children:[h.jsxs("div",{className:"connection-step-title",children:["Step ",e.step,": ",e.message]}),e.details&&h.jsx("div",{className:"connection-step-details",children:JSON.stringify(e.details,null,2)}),h.jsx("div",{className:"connection-step-timestamp",children:new Date(e.timestamp).toLocaleTimeString()})]})]},n))})]}),vR=({wsURL:t,onWsURLChange:e,marketId:n,onMarketIdChange:s,markets:r,symbol:i,onSymbolChange:o,klineInterval:a,onKlineIntervalChange:l,twapWindowSize:c,onTwapWindowSizeChange:u,authToken:d,onAuthTokenChange:f,walletAddress:p,deviceID:g,onDeviceIDChange:x,isConnected:w,isConnecting:m,onConnect:y,onDisconnect:v})=>h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["WebSocket URL:",h.jsx("input",{type:"text",value:t,onChange:b=>e(b.target.value),className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:b=>s(b.target.value),className:"config-select",children:r.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),r.map(b=>{var P;const S=b.market_id??((P=b.market_id)==null?void 0:P.toString())??"",_=b.moniker?b.moniker:b.symbol?b.symbol:b.baseAsset&&b.quoteAsset?`${b.baseAsset}-${b.quoteAsset}`:`Market ID: ${S}`,E=b.active?" [ACTIVE]":"";return h.jsxs("option",{value:S,children:[_," - ID: ",S,E]},S)})]})})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Symbol (for funding_rate, deviation, index_price, mark_price, price_feed, twap):",h.jsx("input",{type:"text",value:i,onChange:b=>o(b.target.value),placeholder:"e.g., BTC/USDT or BTC/USDC",className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Kline Interval:",h.jsxs("select",{value:a,onChange:b=>l(b.target.value),className:"config-select",children:[h.jsx("option",{value:"1m",children:"1 minute"}),h.jsx("option",{value:"5m",children:"5 minutes"}),h.jsx("option",{value:"15m",children:"15 minutes"}),h.jsx("option",{value:"1h",children:"1 hour"}),h.jsx("option",{value:"4h",children:"4 hours"}),h.jsx("option",{value:"1d",children:"1 day"})]})]})}),h.jsx("div",{children:h.jsxs("label",{children:["TWAP Window Size (seconds):",h.jsx("input",{type:"number",value:c,onChange:b=>u(b.target.value),placeholder:"e.g., 300 for 5 minutes",min:"1",className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Auth Token (for private channels):",h.jsx("input",{type:"text",value:d,onChange:b=>f(b.target.value),placeholder:"Required for user_updates (auto-filled from SDK Test Page)",className:"config-input"}),d&&h.jsx("small",{className:"config-hint",children:" Auto-filled from SDK Test Page"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:p||"",disabled:!0,placeholder:"Auto-filled from useOnboard hook",className:`config-input-disabled ${p?"has-value":""}`}),p&&h.jsx("small",{className:"config-hint",children:" Auto-filled from useOnboard hook"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Device ID:",h.jsx("input",{type:"text",value:g,onChange:b=>x(b.target.value),className:"config-input"})]})})]}),h.jsx("div",{className:"config-actions",children:h.jsx(xR,{isConnected:w,isConnecting:m,onConnect:y,onDisconnect:v})})]}),wR=({data:t})=>h.jsxs("div",{className:"funding-rate-details",children:[h.jsx("strong",{className:"funding-rate-title",children:"Funding Rate Details:"}),h.jsxs("div",{className:"funding-rate-grid",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Symbol:"})," ",t.symbol??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Rate:"})," ",t.funding_rate?parseFloat(String(t.funding_rate)).toFixed(6):"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",t.mark_price??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Index Price:"})," ",t.index_price??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Premium Rate:"})," ",t.premium_rate??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"EMA Funding Rate:"})," ",t.ema_funding_rate??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Next Funding Time:"})," ",t.next_funding_time_unix?new Date(t.next_funding_time_unix*1e3).toLocaleString():"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Interval:"})," ",t.funding_interval_seconds?`${t.funding_interval_seconds}s`:"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Valid:"})," ",t.is_valid!==void 0?t.is_valid?"Yes":"No":"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Stale:"})," ",h.jsx("span",{className:`funding-rate-stale ${t.is_stale?"":"valid"}`,children:t.is_stale!==void 0?t.is_stale?"Yes":"No":"N/A"})]}),t.option_type&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Option Type:"})," ",t.option_type]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Strike Price:"})," ",t.strike_price??"N/A"]})]})]})]}),kR=({positions:t})=>!t||t.length===0?null:h.jsxs("div",{className:"positions-container",children:[h.jsxs("strong",{className:"positions-title",children:["Positions (",t.length,"):"]}),h.jsx("div",{className:"positions-grid",children:t.map((e,n)=>{const s=e.size||0,r=s>=0?"LONG":"SHORT";return h.jsxs("div",{className:"position-card",children:[h.jsx("div",{className:"position-symbol",children:e.symbol||`Market ${e.marketId||e.market_id||"N/A"}`}),h.jsxs("div",{className:"position-details",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Side:"})," ",h.jsx("span",{className:r==="LONG"?"position-side-long":"position-side-short",children:r})]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Size:"})," ",Math.abs(s).toFixed(8)]}),e.entryPrice!==void 0||e.entry_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Entry Price:"})," ",(e.entryPrice||e.entry_price||0).toFixed(8)]}):null,e.markPrice!==void 0||e.mark_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",(e.markPrice||e.mark_price||0).toFixed(8)]}):null,e.liquidationPrice!==void 0||e.liquidation_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Liquidation Price:"})," ",(e.liquidationPrice||e.liquidation_price||0).toFixed(8)]}):null,e.unrealizedPnL!==void 0||e.unrealized_pnl!==void 0||e.pnl!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Unrealized PnL:"})," ",h.jsx("span",{className:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0)>=0?"position-pnl-positive":"position-pnl-negative",children:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0).toFixed(8)})]}):null,e.leverage!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Leverage:"})," ",e.leverage,"x"]}):null,e.margin!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Margin:"})," ",e.margin.toFixed(8)]}):null,e.marginMode!==void 0||e.margin_mode!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Margin Mode:"})," ",e.marginMode||e.margin_mode||"N/A"]}):null]})]},n)})})]}),SR=({message:t})=>{const{channel:e,data:n,type:s,step:r,timestamp:i}=t,o=e==="funding_rate"&&typeof n=="object"&&n!==null,a=e==="user_updates"&&typeof n=="object"&&n!==null&&Array.isArray(n.positions)&&n.positions.length>0,l=o||a;return h.jsx("div",{className:`message-item ${s}`,children:h.jsx("div",{className:"message-header",children:h.jsxs("div",{className:"message-content",children:[h.jsxs("div",{className:"message-title",children:[h.jsxs("span",{children:["[",e,"]"]}),r&&h.jsxs("span",{className:"message-step",children:["(",r,")"]}),h.jsx("span",{children:new Date(i).toLocaleTimeString()})]}),o&&h.jsx(wR,{data:n}),a&&h.jsx(kR,{positions:n.positions}),!l&&h.jsx("div",{className:"message-body",children:typeof n=="string"?n:JSON.stringify(n,null,2)}),typeof n!="string"&&h.jsxs("details",{children:[h.jsx("summary",{className:"raw-data-summary",children:"View Raw Data"}),h.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(n,null,2)})]})]})})})},_R=({messages:t,isPrivate:e=!1,emptyMessage:n})=>{const s=e?"No messages yet. Connect with auth token and subscribe to user updates.":"No messages yet. Connect and subscribe to channels to see updates.";return h.jsx("div",{className:`messages-container ${e?"private":"public"}`,children:t.length===0?h.jsx("div",{className:`messages-empty ${e?"private":""}`,children:n||s}):t.map(r=>h.jsx(SR,{message:r},r.id))})},u1=({title:t,isPrivate:e=!1,messages:n,onClearMessages:s,children:r,emptyMessage:i})=>h.jsxs("div",{className:"channel-section",children:[h.jsxs("div",{className:"channel-header",children:[h.jsx("h2",{className:"channel-title",children:t}),h.jsx(bR,{onClick:s})]}),h.jsxs("div",{className:"channel-content",children:[h.jsx("div",{className:"channel-buttons-container",children:r}),h.jsx(_R,{messages:n,isPrivate:e,emptyMessage:i}),e&&h.jsxs("div",{className:"private-note",children:[h.jsx("strong",{children:"Note:"})," Private channels require authentication. Enter your auth token in the configuration above."]})]})]});function ut(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function ro(t,e){return t.width===e.width&&t.height===e.height}var CR=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){n._observers=n._observers.filter(function(r){return r!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function ER(t){return new CR(t)}var PR=function(){function t(e,n,s){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=ut({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(i){return i},this._allowResizeObserver=(r=s==null?void 0:s.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return ut({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=ut(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;ro(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var s=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,s=ut(this._transformBitmapSize(e,this._canvasElementClientSize)),r=ro(this.bitmapSize,s)?null:s;n===null&&r===null||n!==null&&r!==null&&ro(n,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(n,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}MR().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=d1(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=ER(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var s=d1(this._canvasElement);if(s!==null){var r=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:s.devicePixelRatio,i=this._canvasElement.getClientRects(),o=i[0]!==void 0?IR(i[0],r):ut({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var s=n.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var r=s.devicePixelContentBoxSize[0],i=ut({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function TR(t,e){return new PR(t,e.transform,e.options)}function d1(t){return t.ownerDocument.defaultView}function MR(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function IR(t,e){return ut({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var NR=function(){function t(e,n,s){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function go(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new NR(r,n,s)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const c3={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var h1,f1;function Za(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function u3(t,e,n,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(n,e+r),t.lineTo(s,e+r),t.stroke()}function Jt(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Fn(t){if(t===void 0)throw new Error("Value is undefined");return t}function ce(t){if(t===null)throw new Error("Value is null");return t}function ri(t){return ce(Fn(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(h1||(h1={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(f1||(f1={}));class Rt{constructor(){this.t=[]}i(e,n,s){const r={h:e,l:n,o:s===!0};this.t.push(r)}_(e){const n=this.t.findIndex(s=>e===s.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,s){const r=[...this.t];this.t=this.t.filter(i=>!i.o),r.forEach(i=>i.h(e,n,s))}v(){return this.t.length>0}m(){this.t=[]}}function Gn(t,...e){for(const n of e)for(const s in n)n[s]!==void 0&&Object.prototype.hasOwnProperty.call(n,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof n[s]!="object"||t[s]===void 0||Array.isArray(n[s])?t[s]=n[s]:Gn(t[s],n[s]));return t}function el(t){return typeof t=="number"&&isFinite(t)}function lu(t){return typeof t=="number"&&t%1==0}function Du(t){return typeof t=="string"}function kd(t){return typeof t=="boolean"}function wr(t){const e=t;if(!e||typeof e!="object")return e;let n,s,r;for(s in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(r=e[s],n[s]=r&&typeof r=="object"?wr(r):r);return n}function AR(t){return t!==null}function RR(t){return t===null?void 0:t}const d3="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function rf(t,e,n){return e===void 0&&(e=d3),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class OR{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),s=this.W();return e.P===n&&e.T===s||(e.P=n,e.T=s,e.k=rf(n,s),e.A=2.5/12*n,e.V=e.A,e.B=n/12*e.C,e.I=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Up(t){return t<0?0:t>255?255:Math.round(t)||0}function p1(t){return .199*t[0]+.687*t[1]+.114*t[2]}class DR{constructor(e,n){this.q=new Map,this.Y=e,n&&(this.q=n)}j(e,n){if(e==="transparent")return e;const s=this.K(e),r=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${n*r})`}X(e){const n=this.K(e);return{Z:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,G:p1(n)>160?"black":"white"}}J(e){return p1(this.K(e))}tt(e,n,s){const[r,i,o,a]=this.K(e),[l,c,u,d]=this.K(n),f=[Up(r+s*(l-r)),Up(i+s*(c-i)),Up(o+s*(u-o)),(p=a+s*(d-a),p<=0||p>1?Math.min(Math.max(p,0),1):Math.round(1e4*p)/1e4)];var p;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const n=this.q.get(e);if(n)return n;const s=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(e),r=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(const o of this.Y){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const i=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,i),i}}class LR{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,s){this.it.forEach(r=>{r.nt(e,n,s)})}}class Lu{nt(e,n,s){e.useBitmapCoordinateSpace(r=>this.et(r,n,s))}}class jR extends Lu{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const r=this.rt.lt,i=this.rt,o=Math.max(1,Math.floor(n))%2/2,a=l=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){const u=i.ot[c],d=Math.round(u._t*n)+o,f=u.ut*s,p=l*s+o;e.moveTo(d,f),e.arc(d,f,p,0,2*Math.PI)}e.fill()};i.ct>0&&(e.fillStyle=i.dt,a(i.ft+i.ct)),e.fillStyle=i.vt,a(i.ft)}}function FR(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const zR={from:0,to:1};class BR{constructor(e,n,s){this.Mt=new LR,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.Pt=s,this.Mt.st(this.bt)}yt(e){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(FR),this.bt=this.St.map(n=>{const s=new jR;return s.ht(n),s}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),n=this.Pt.Bt(),s=this.Ct.It(),r=this.O.Et();this.kt(),n.forEach((i,o)=>{const a=this.St[o],l=i.At(s),c=i.zt();!e&&l!==null&&i.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=i.Ft().Nt(l.gt,c.Wt),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/i.Ft().$t()),a.ot[0].wt=s,a.ot[0]._t=r.qt(s),a.lt=zR):a.lt=null})}}class $R extends Lu{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!i&&!o)return;const a=Math.round(this.Yt._t*s),l=Math.round(this.Yt.ut*r);e.lineCap="butt",i&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*s),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Za(e,this.Yt.jt.Xt),function(c,u,d,f){c.beginPath();const p=c.lineWidth%2?.5:0;c.moveTo(u+p,d),c.lineTo(u+p,f),c.stroke()}(e,a,0,n.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*r),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Za(e,this.Yt.Kt.Xt),u3(e,l,0,n.width))}}class UR{constructor(e,n){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new $R(this.Zt),this.Jt=e,this.Pt=n}yt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),n=this.Pt.Qt().N().crosshair,s=this.Zt;if(n.mode===2)return s.Kt.Vt=!1,void(s.jt.Vt=!1);s.Kt.Vt=e&&this.Jt.ti(this.Pt),s.jt.Vt=e&&this.Jt.ii(),s.Kt.ct=n.horzLine.width,s.Kt.Xt=n.horzLine.style,s.Kt.R=n.horzLine.color,s.jt.ct=n.vertLine.width,s.jt.Xt=n.vertLine.style,s.jt.R=n.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function u0(t,e,n,s,r,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,n,s,r),t.restore()}function g1(t,e,n,s,r,i){t.beginPath(),t.roundRect?t.roundRect(e,n,s,r,i):(t.lineTo(e+s-i[1],n),i[1]!==0&&t.arcTo(e+s,n,e+s,n+i[1],i[1]),t.lineTo(e+s,n+r-i[2]),i[2]!==0&&t.arcTo(e+s,n+r,e+s-i[2],n+r,i[2]),t.lineTo(e+i[3],n+r),i[3]!==0&&t.arcTo(e,n+r,e,n+r-i[3],i[3]),t.lineTo(e,n+i[0]),i[0]!==0&&t.arcTo(e,n,e+i[0],n,i[0]))}function m1(t,e,n,s,r,i,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===i)return g1(t,e,n,s,r,a),t.fillStyle=i,t.fill(),void t.restore();const c=o/2;var u;g1(t,e+c,n+c,s-o,r-o,(u=-c,a.map(d=>d===0?d:d+u))),i!=="transparent"&&(t.fillStyle=i,t.fill()),l!=="transparent"&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function h3(t,e,n,s,r,i,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,r);a.addColorStop(0,i),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,n,s,r),t.restore()}class x1{constructor(e,n){this.ht(e,n)}ht(e,n){this.Yt=e,this.ei=n}$t(e,n){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,n,s,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const i=this.Yt.R,o=this.ei.Z,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=n.k;const u=this.hi(l,n,s,r),d=u.ai;return u.li?m1(c,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):m1(c,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(c.fillStyle=i,c.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(c.fillStyle=n.D,c.fillRect(u.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),u});e.useMediaCoordinateSpace(({context:l})=>{const c=a.xi;l.font=n.k,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=i,l.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.Pi)})}hi(e,n,s,r){const{context:i,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=e,u=this.Yt.pi||!this.Yt.yi?n.C:0,d=this.Yt.ki?n.S:0,f=n.A+this.ei.Ti,p=n.V+this.ei.Ri,g=n.B,x=n.I,w=this.Yt.ri,m=n.P,y=s.Di(i,w),v=Math.ceil(s.Vi(i,w)),b=m+f+p,S=n.S+g+x+v+u,_=Math.max(1,Math.floor(c));let E=Math.round(b*c);E%2!=_%2&&(E+=1);const P=d>0?Math.max(1,Math.floor(d*l)):0,M=Math.round(S*l),C=Math.round(u*l),N=this.ei.Bi??this.ei.Ii,I=Math.round(N*c)-Math.floor(.5*c),B=Math.floor(I+_/2-E/2),W=B+E,j=r==="right",z=j?a.width-d:d,F=j?o.width-P:P;let A,$,T;return j?(A=F-M,$=F-C,T=z-u-g-d):(A=F+M,$=F+C,T=z+u+g),{li:j,ai:{_i:B,mi:I,Si:W,ui:M,ci:E,ft:2*l,di:P,oi:A,fi:F,wi:$,gi:_,bi:o.width},xi:{_i:B/c,Si:W/c,Ci:T,Pi:y}}}}class d0{constructor(e){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(e||x1)(this.Ai,this.Ei),this.Oi=new(e||x1)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Li.$t(e,n),this.Oi.$t(e,n))}Fi(){return this.Ei.Bi||0}Wi(e){this.Ei.Bi=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class WR extends d0{constructor(e,n,s){super(),this.Jt=e,this.Yi=n,this.ji=s}qi(e,n,s){if(e.Vt=!1,this.Jt.N().mode===2)return;const r=this.Jt.N().horzLine;if(!r.labelVisible)return;const i=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||i===null)return;const o=this.Yi.Xi().X(r.labelBackgroundColor);s.Z=o.Z,e.R=o.G;const a=2/12*this.Yi.P();s.Ti=a,s.Ri=a;const l=this.ji(this.Yi);s.Ii=l.Ii,e.ri=this.Yi.Zi(l.gt,i),e.Vt=!0}}const HR=/[1-9]/g;class f3{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,n){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const s=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.k,Math.round(n.Gi.Vi(f,ce(this.Yt).ri,HR))));if(s<=0)return;const r=n.Ji,i=s+2*r,o=i/2,a=this.Yt.Qi;let l=this.Yt.Ii,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+i>a&&(l-=Math.abs(a-(c+i)),c=Math.floor(l-o)+.5);const u=c+i,d=Math.ceil(0+n.S+n.C+n.A+n.P+n.V);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:p,verticalPixelRatio:g})=>{const x=ce(this.Yt);f.fillStyle=x.Z;const w=Math.round(c*p),m=Math.round(0*g),y=Math.round(u*p),v=Math.round(d*g),b=Math.round(2*p);if(f.beginPath(),f.moveTo(w,m),f.lineTo(w,v-b),f.arcTo(w,v,w+b,v,b),f.lineTo(y-b,v),f.arcTo(y,v,y,v-b,b),f.lineTo(y,m),f.fill(),x.pi){const S=Math.round(x.Ii*p),_=m,E=Math.round((_+n.C)*g);f.fillStyle=x.R;const P=Math.max(1,Math.floor(p)),M=Math.floor(.5*p);f.fillRect(S-M,_,P,E-_)}}),e.useMediaCoordinateSpace(({context:f})=>{const p=ce(this.Yt),g=0+n.S+n.C+n.A+n.P/2;f.font=n.k,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.R;const x=n.Gi.Di(f,"Apr0");f.translate(c+r,g+x),f.fillText(p.ri,0,0)})}}class VR{constructor(e,n,s){this.xt=!0,this.Gt=new f3,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=e,this.ts=n,this.ji=s}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const s=this.ts.Et();if(s.Ki())return;e.Qi=s.Qi();const r=this.ji();if(r===null)return;e.Ii=r.Ii;const i=s.ss(this.Ct.It());e.ri=s.ns(ce(i)),e.Vt=!0;const o=this.ts.Xi().X(n.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=s.N().ticksVisible}}class p3{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var b1;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(b1||(b1={}));class YR extends p3{constructor(e,n){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=n,this.ys=((r,i)=>o=>{const a=i(),l=r();if(o===ce(this.Pt).ks())return{gt:l,Ii:a};{const c=ce(o.zt());return{gt:o.Ts(a,c),Ii:a}}})(()=>this.ds,()=>this.Ss);const s=((r,i)=>()=>{const o=this.ts.Et().Rs(r()),a=i();return o&&Number.isFinite(a)?{wt:o,Ii:a}:null})(()=>this.fs,()=>this.si());this.Ds=new VR(this,e,s)}N(){return this.Ps}Vs(e,n){this.xs=e,this.Cs=n}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(e,n,s){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,n,s)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(e){let n=this.gs.get(e);n||(n=new UR(this,e),this.gs.set(e,n));let s=this.Ms.get(e);return s||(s=new BR(this.ts,this,e),this.Ms.set(e,s)),[n,s]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,n){this.ps&&this.Pt===e||this.vs.clear();const s=[];return this.Pt===e&&s.push(this.Hs(this.vs,n,this.ys)),s}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var n,s;(n=this.gs.get(e))==null||n.yt(),(s=this.Ms.get(e))==null||s.yt()}),this.vs.forEach(e=>e.yt()),this.Ds.yt()}qs(e){return e&&!e.ks().Ki()?e.ks():null}zs(e,n,s){this.Ys(e,n,s)&&this.Ns()}Ys(e,n,s){const r=this.bs,i=this.Ss,o=this.ds,a=this.fs,l=this.Pt,c=this.qs(s);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=s;const u=c!==null?c.zt():null;return c!==null&&u!==null?(this.ds=n,this.Ss=c.Nt(n,u)):(this.ds=NaN,this.Ss=NaN),r!==this.bs||i!==this.Ss||a!==this.fs||o!==this.ds||l!==this.Pt}Os(){const e=this.ts.js().map(s=>s.Xs().Ks()).filter(AR),n=e.length===0?null:Math.max(...e);this.fs=n!==null?n:NaN}Hs(e,n,s){let r=e.get(n);return r===void 0&&(r=new WR(this,n,s),e.set(n,r)),r}}function h0(t){return t==="left"||t==="right"}class Qt{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,n){const s=function(r,i){return r===void 0?i:{tn:Math.max(r.tn,i.tn),sn:r.sn||i.sn}}(this.Zs.get(e),n);this.Zs.set(e,s)}nn(){return this.Js}en(e){const n=this.Zs.get(e);return n===void 0?{tn:this.Js}:{tn:Math.max(this.Js,n.tn),sn:n.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const n of e.Gs)this.mn(n);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((n,s)=>{this.Qs(s,n)})}static wn(){return new Qt(2)}static gn(){return new Qt(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(n=>n.an===5);e!==-1&&this.Gs.splice(e,1)}}class g3{formatTickmarks(e){return e.map(n=>this.format(n))}}const y1=".";function kr(t,e){if(!el(t))return"n/a";if(!lu(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class f0 extends g3{constructor(e,n){if(super(),n||(n=1),el(e)&&lu(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=n,this.bn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const n=this.Yi/this.Mn;let s=Math.floor(e),r="";const i=this.xn!==void 0?this.xn:NaN;if(n>1){let o=+(Math.round(e*n)-s*n).toFixed(this.xn);o>=n&&(o-=n,s+=1),r=y1+kr(+o.toFixed(this.xn)*this.Mn,i)}else s=Math.round(s*n)/n,i>0&&(r=y1+kr(0,i));return s.toFixed(0)+r}}class m3 extends f0{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class GR extends g3{constructor(e){super(),this.Cn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.Pn(e):e<999995?n+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.Pn(e/1e9)+"B")}Pn(e){let n;const s=Math.pow(10,this.Cn);return n=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(r,i)=>i)}}const qR=/[2-9]/g;class of{constructor(e=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(e,n,s){return this.In(e,n,s).width}Di(e,n,s){const r=this.In(e,n,s);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}In(e,n,s){const r=s||qR,i=String(n).replace(r,"0");if(this.Dn.has(i))return Fn(this.Dn.get(i)).En;if(this.yn===this.Vn){const a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.yn--}e.save(),e.textBaseline="middle";const o=e.measureText(i);return e.restore(),o.width===0&&n.length||(this.Dn.set(i,{En:o,An:this.kn}),this.Rn[this.kn]=i,this.yn++,this.kn++),o}}class KR{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,n,s){this.zn=e,this.M=n,this.Ln=s}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class x3{constructor(e,n,s){this.Fn=e,this.On=new of(50),this.Wn=n,this.O=s,this.F=-1,this.Gt=new KR(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const n=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(n===null)return null;const s=e.qn(n);if(s==="overlay")return null;const r=this.O.Yn();return r.P!==this.F&&(this.F=r.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),r,s),this.Gt}}class XR extends Lu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,n){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:s,ct:r,Kn:i}=this.Yt;return n>=s-r-7&&n<=s+r+7?{Xn:this.Yt,Kn:i}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;const i=Math.round(this.Yt.ut*r);i<0||i>n.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*s),Za(e,this.Yt.Xt),u3(e,i,0,n.width))}}class Lb{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new XR,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class QR extends Lb{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),n=e.ie().ie;if(n!==2&&n!==3)return;const s=this.Jn.N();if(!s.baseLineVisible||!this.Jn.Vt())return;const r=this.Jn.zt();r!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(r.Wt,r.Wt),this.Zn.R=s.baseLineColor,this.Zn.ct=s.baseLineWidth,this.Zn.Xt=s.baseLineStyle)}}class JR extends Lu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){const r=this.Yt;if(r===null)return;const i=Math.max(1,Math.floor(n)),o=i%2/2,a=Math.round(r.ne.x*n)+o,l=r.ne.y*s;e.fillStyle=r.ee,e.beginPath();const c=Math.max(2,1.5*r.re)*n;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.he,e.beginPath(),e.arc(a,l,r.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=r.ae,e.beginPath(),e.arc(a,l,r.ft*n+i/2,0,2*Math.PI,!1),e.stroke()}}const ZR=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class e7{constructor(e){this.Gt=new JR,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),n=this.we-e;if(n>0)return void(n<650&&(this.we+=2600));this.me=e,this.we=e+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),n=e.Pe(),s=this.ge.zt();if(n===null||s===null)return;const r=this.ge.ye(!0);if(r.ke||!n.Te(r.Re))return;const i={x:e.qt(r.Re),y:this.ge.Ft().Nt(r.gt,s.Wt)},o=r.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:i})}Ce(){const e=this.Gt.se();if(e!==null){const n=this.De(this.Ve(),e.ee);e.he=n.he,e.ae=n.ae,e.ft=n.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(e,n,s,r){const i=s+(r-s)*n;return this.ge.Qt().Xi().j(e,i)}De(e,n){const s=e%2600/2600;let r;for(const c of ZR)if(s>=c.le&&s<=c.oe){r=c;break}Jt(r!==void 0,"Last price animation internal logic error");const i=(s-r.le)/(r.oe-r.le);return{he:this.Be(n,i,r.ce,r.de),ae:this.Be(n,i,r.fe,r.pe),ft:(o=i,a=r._e,l=r.ue,a+(l-a)*o)};var o,a,l}}class t7 extends Lb{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const n=this.Jn.N();if(!n.priceLineVisible||!this.Jn.Vt())return;const s=this.Jn.ye(n.priceLineSource===0);s.ke||(e.Vt=!0,e.ut=s.Ii,e.R=this.Jn.Ie(s.R),e.ct=n.priceLineWidth,e.Xt=n.priceLineStyle)}}class n7 extends d0{constructor(e){super(),this.Jt=e}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.Jt;if(!r.Vt())return;const i=r.N(),o=i.lastValueVisible,a=r.Ee()!=="",l=i.seriesLastValueMode===0,c=r.ye(!1);if(c.ke)return;o&&(e.ri=this.Ae(c,o,l),e.Vt=e.ri.length!==0),(a||l)&&(n.ri=this.ze(c,o,a,l),n.Vt=n.ri.length>0);const u=r.Ie(c.R),d=this.Jt.Qt().Xi().X(u);s.Z=d.Z,s.Ii=c.Ii,n.Ht=r.Qt().Ut(c.Ii/r.Ft().$t()),e.Ht=u,e.R=d.G,n.R=d.G}ze(e,n,s,r){let i="";const o=this.Jt.Ee();return s&&o.length!==0&&(i+=`${o} `),n&&r&&(i+=this.Jt.Ft().Le()?e.Oe:e.Ne),i.trim()}Ae(e,n,s){return n?s?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function v1(t,e,n,s){const r=Number.isFinite(e),i=Number.isFinite(n);return r&&i?t(e,n):r||i?r?e:n:s}class kn{constructor(e,n){this.Fe=e,this.We=n}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new kn(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new kn(v1(Math.min,this.$e(),e.$e(),-1/0),v1(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!el(e)||this.We-this.Fe===0)return;const n=.5*(this.We+this.Fe);let s=this.We-n,r=this.Fe-n;s*=e,r*=e,this.We=n+s,this.Fe=n+r}Ke(e){el(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new kn(e.minValue,e.maxValue)}}class af{constructor(e,n){this.Ge=e,this.Je=n||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new af(kn.Ze(e.priceRange),e.margins)}}class s7 extends Lb{constructor(e,n){super(e),this.ir=n}te(){const e=this.Zn;e.Vt=!1;const n=this.ir.N();if(!this.Jn.Vt()||!n.lineVisible)return;const s=this.ir.sr();s!==null&&(e.Vt=!0,e.ut=s,e.R=n.color,e.ct=n.lineWidth,e.Xt=n.lineStyle,e.Kn=this.ir.N().id)}}class r7 extends d0{constructor(e,n){super(),this.ge=e,this.ir=n}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.ir.N(),i=r.axisLabelVisible,o=r.title!=="",a=this.ge;if(!i||!a.Vt())return;const l=this.ir.sr();if(l===null)return;o&&(n.ri=r.title,n.Vt=!0),n.Ht=a.Qt().Ut(l/a.Ft().$t()),e.ri=this.nr(r.price),e.Vt=!0;const c=this.ge.Qt().Xi().X(r.axisLabelColor||r.color);s.Z=c.Z;const u=r.axisLabelTextColor||c.G;e.R=u,n.R=u,s.Ii=l}nr(e){const n=this.ge.zt();return n===null?"":this.ge.Ft().Zi(e,n.Wt)}}class i7{constructor(e,n){this.ge=e,this.Ps=n,this.er=new s7(e,this),this.Fn=new r7(e,this),this.rr=new x3(this.Fn,e,e.Qt())}hr(e){Gn(this.Ps,e),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const e=this.ge,n=e.Ft();if(e.Qt().Et().Ki()||n.Ki())return null;const s=e.zt();return s===null?null:n.Nt(this.Ps.price,s.Wt)}}class o7 extends p3{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const a7={Bar:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=ce(t(n,s)),a=ri(o.Wt[0])<=ri(o.Wt[3]);return{cr:o.R??(a?r:i)}},Candlestick:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,u=ce(t(n,s)),d=ri(u.Wt[0])<=ri(u.Wt[3]);return{cr:u.R??(d?r:i),dr:u.Ht??(d?o:a),pr:u.vr??(d?l:c)}},Custom:(t,e,n,s)=>({cr:ce(t(n,s)).R??e.color}),Area:(t,e,n,s)=>{const r=ce(t(n,s));return{cr:r.vt??e.lineColor,vt:r.vt??e.lineColor,mr:r.mr??e.topColor,wr:r.wr??e.bottomColor}},Baseline:(t,e,n,s)=>{const r=ce(t(n,s));return{cr:r.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:r.gr??e.topLineColor,Mr:r.Mr??e.bottomLineColor,br:r.br??e.topFillColor1,Sr:r.Sr??e.topFillColor2,Cr:r.Cr??e.bottomFillColor1,Pr:r.Pr??e.bottomFillColor2}},Line:(t,e,n,s)=>{const r=ce(t(n,s));return{cr:r.R??e.color,vt:r.R??e.color}},Histogram:(t,e,n,s)=>({cr:ce(t(n,s)).R??e.color})};class l7{constructor(e){this.yr=(n,s)=>s!==void 0?s.Wt:this.ge.Xs().kr(n),this.ge=e,this.Tr=a7[e.Rr()]}Dr(e,n){return this.Tr(this.yr,this.ge.N(),e,n)}}function b3(t,e,n,s,r=0,i=e.length){let o=i-r;for(;0<o;){const a=o>>1,l=r+a;s(e[l],n)===t?(r=l+1,o-=a+1):o=a}return r}const tl=b3.bind(null,!0),y3=b3.bind(null,!1);var w1;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(w1||(w1={}));const Br=30;class c7{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}kr(e){return this.Fr(e)}Fr(e,n=0){const s=this.Nr(e,n);return s===null?null:{...this.Wr(s),Re:this.Or(s)}}Hr(){return this.Vr}Ur(e,n,s){if(this.Ki())return null;let r=null;for(const i of s)r=Sd(r,this.$r(e,n,i));return r}ht(e){this.Ir.clear(),this.Br.clear(),this.Vr=e,this.Er=e.map(n=>n.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,n){const s=this.Yr(e);if(s===null&&n!==0)switch(n){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return s}jr(e){let n=this.Xr(e);return n>0&&(n-=1),n!==this.Vr.length&&this.Or(n)<e?n:null}Kr(e){const n=this.Zr(e);return n!==this.Vr.length&&e<this.Or(n)?n:null}Yr(e){const n=this.Xr(e);return n===this.Vr.length||e<this.Vr[n].Re?null:n}Xr(e){return tl(this.Vr,e,(n,s)=>n.Re<s)}Zr(e){return y3(this.Vr,e,(n,s)=>n.Re>s)}Gr(e,n,s){let r=null;for(let i=e;i<n;i++){const o=this.Vr[i].Wt[s];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(e,n,s){if(this.Ki())return null;let r=null;const i=ce(this.Lr()),o=ce(this.Ks()),a=Math.max(e,i),l=Math.min(n,o),c=Math.ceil(a/Br)*Br,u=Math.max(c,Math.floor(l/Br)*Br);{const f=this.Xr(a),p=this.Zr(Math.min(l,c,n));r=Sd(r,this.Gr(f,p,s))}let d=this.Br.get(s);d===void 0&&(d=new Map,this.Br.set(s,d));for(let f=Math.max(c+1,a);f<u;f+=Br){const p=Math.floor(f/Br);let g=d.get(p);if(g===void 0){const x=this.Xr(p*Br),w=this.Zr((p+1)*Br-1);g=this.Gr(x,w,s),d.set(p,g)}r=Sd(r,g)}{const f=this.Xr(u),p=this.Zr(l);r=Sd(r,this.Gr(f,p,s))}return r}}function Sd(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}const lf={setLineStyle:Za};class u7{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,lf)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,lf)}}class d7{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new u7(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}class v3{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,n;(n=(e=this.ah).updateAllViews)==null||n.call(e)}Fs(){var s,r,i;const e=((r=(s=this.ah).paneViews)==null?void 0:r.call(s))??[];if(((i=this.hh)==null?void 0:i.nh)===e)return this.hh.eh;const n=e.map(o=>new d7(o));return this.hh={nh:e,eh:n},n}jn(e,n){var s,r;return((r=(s=this.ah).hitTest)==null?void 0:r.call(s,e,n))??null}}let h7=class extends v3{us(){return[]}};class f7{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,lf)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,lf)}}class k1{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new f7(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}function w3(t){var e,n,s;return{ri:t.text(),Ii:t.coordinate(),Bi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),Z:t.backColor(),Vt:((n=t.visible)==null?void 0:n.call(t))??!0,pi:((s=t.tickVisible)==null?void 0:s.call(t))??!0}}class p7{constructor(e,n){this.Gt=new f3,this._h=e,this.uh=n}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...w3(this._h)}),this.Gt}}class g7 extends d0{constructor(e,n){super(),this._h=e,this.Yi=n}qi(e,n,s){const r=w3(this._h);s.Z=r.Z,e.R=r.R;const i=2/12*this.Yi.P();s.Ti=i,s.Ri=i,s.Ii=r.Ii,s.Bi=r.Bi,e.ri=r.ri,e.Vt=r.Vt,e.pi=r.pi}}class m7 extends v3{constructor(e,n){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=n}cs(){var r,i,o;const e=((i=(r=this.ah).timeAxisViews)==null?void 0:i.call(r))??[];if(((o=this.dh)==null?void 0:o.nh)===e)return this.dh.eh;const n=this.ge.Qt().Et(),s=e.map(a=>new p7(a,n));return this.dh={nh:e,eh:s},s}Ws(){var r,i,o;const e=((i=(r=this.ah).priceAxisViews)==null?void 0:i.call(r))??[];if(((o=this.fh)==null?void 0:o.nh)===e)return this.fh.eh;const n=this.ge.Ft(),s=e.map(a=>new g7(a,n));return this.fh={nh:e,eh:s},s}wh(){var s,r,i;const e=((r=(s=this.ah).priceAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.ph)==null?void 0:i.nh)===e)return this.ph.eh;const n=e.map(o=>new k1(o));return this.ph={nh:e,eh:n},n}gh(){var s,r,i;const e=((r=(s=this.ah).timeAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.mh)==null?void 0:i.nh)===e)return this.mh.eh;const n=e.map(o=>new k1(o));return this.mh={nh:e,eh:n},n}Mh(e,n){var s,r;return((r=(s=this.ah).autoscaleInfo)==null?void 0:r.call(s,e,n))??null}}function Wp(t,e,n,s){t.forEach(r=>{e(r).forEach(i=>{i.rh()===n&&s.push(i)})})}function Hp(t){return t.Fs()}function x7(t){return t.wh()}function b7(t){return t.gh()}const y7=["Area","Line","Baseline"];class p0 extends o7{constructor(e,n,s,r,i){super(e),this.Yt=new c7,this.er=new t7(this),this.bh=[],this.Sh=new QR(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=s,this.kh=n;const o=new n7(this);this.vs=[o],this.rr=new x3(o,this,e),y7.includes(this.kh)&&(this.xh=new e7(this)),this.Th(),this.sh=r(this,this.Qt(),i)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(e){return this.Ps.priceLineColor||e}ye(e){const n={ke:!0},s=this.Ft();if(this.Qt().Et().Ki()||s.Ki()||this.Yt.Ki())return n;const r=this.Qt().Et().Pe(),i=this.zt();if(r===null||i===null)return n;let o,a;if(e){const d=this.Yt.Ar();if(d===null)return n;o=d,a=d.Re}else{const d=this.Yt.Fr(r.bi(),-1);if(d===null||(o=this.Yt.kr(d.Re),o===null))return n;a=d.Re}const l=o.Wt[3],c=this.Rh().Dr(a,{Wt:o}),u=s.Nt(l,i.Wt);return{ke:!1,gt:l,ri:s.Zi(l,i.Wt),Oe:s.Dh(l),Ne:s.Vh(l,i.Wt),R:c.cr,Ii:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new l7(this)),this.Ch}N(){return this.Ps}hr(e){const n=e.priceScaleId;n!==void 0&&n!==this.Ps.priceScaleId&&this.Qt().Bh(this,n),Gn(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(e,n){this.Yt.ht(e),this.sh.yt("data"),this.xh!==null&&(n&&n.zh?this.xh.be():e.length===0&&this.xh.Me());const s=this.Qt().Hn(this);this.Qt().Lh(s),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const n=new i7(this,e);return this.bh.push(n),this.Qt().Eh(this),n}Nh(e){const n=this.bh.indexOf(e);n!==-1&&this.bh.splice(n,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const n=e.Uh();return this.Yt.Fr(n,1)}Xs(){return this.Yt}$h(e){const n=this.Yt.kr(e);return n===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:n.Wt[0],Yh:n.Wt[1],jh:n.Wt[2],Kh:n.Wt[3]}:n.Wt[3]}Xh(e){const n=[];Wp(this.yh,Hp,"top",n);const s=this.xh;return s!==null&&s.Vt()&&(this.Ph===null&&s.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),s.Se(),n.unshift(s)),n}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const n=this.bh.map(s=>s.lr());return e.push(...n),Wp(this.yh,Hp,"normal",e),e}Jh(){return this.Qh(Hp,"bottom")}ta(e){return this.Qh(x7,e)}ia(e){return this.Qh(b7,e)}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,n){if(n!==this.es&&!this.Gh())return[];const s=[...this.vs];for(const r of this.bh)s.push(r.ur());return this.yh.forEach(r=>{s.push(...r.Ws())}),s}cs(){const e=[];return this.yh.forEach(n=>{e.push(...n.cs())}),e}Mh(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider(()=>{const r=this.na(e,n);return r===null?null:r.Xe()});return af.Ze(s)}return this.na(e,n)}nh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}ea(){return this.ra}Ns(){var e;this.sh.yt();for(const n of this.vs)n.yt();for(const n of this.bh)n.yt();this.er.yt(),this.Sh.yt(),(e=this.xh)==null||e.yt(),this.yh.forEach(n=>n.Ns())}Ft(){return ce(super.Ft())}At(e){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.Yt.kr(e);return n===null?null:{gt:n.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(e){this.yh.push(new m7(e,this))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e)}ca(){if(this.kh==="Custom")return e=>this.sh.da(e)}fa(){if(this.kh==="Custom")return e=>this.sh.pa(e)}va(){return this.Yt.qr()}Gh(){return!h0(this.Ft().ma())}na(e,n){if(!lu(e)||!lu(n)||this.Yt.Ki())return null;const s=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(e,n,s);let i=r!==null?new kn(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){const a=this.Ps.base,l=new kn(a,a);i=i!==null?i.vn(l):l}return this.yh.forEach(a=>{const l=a.Mh(e,n);if(l!=null&&l.priceRange){const c=new kn(l.priceRange.minValue,l.priceRange.maxValue);i=i!==null?i.vn(c):c}l!=null&&l.margins&&(o=l.margins)}),new af(i,o)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(e){switch(this.kh){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ra={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.ra=new GR(this.Ps.priceFormat.precision);break;case"percent":this.ra=new m3(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new f0(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.wa()}Qh(e,n){const s=[];return Wp(this.yh,e,n,s),s}}const v7=[3],w7=[0,1,2,3];class k7{constructor(e){this.Ps=e}ga(e,n,s){let r=e;if(this.Ps.mode===0)return r;const i=s.ks(),o=i.zt();if(o===null)return r;const a=i.Nt(e,o),l=s.Ma().filter(u=>u instanceof p0).reduce((u,d)=>{if(s.Un(d)||!d.Vt())return u;const f=d.Ft(),p=d.Xs();if(f.Ki()||!p.Te(n))return u;const g=p.kr(n);if(g===null)return u;const x=ri(d.zt()),w=this.Ps.mode===3?w7:v7;return u.concat(w.map(m=>f.Nt(g.Wt[m],x.Wt)))},[]);if(l.length===0)return r;l.sort((u,d)=>Math.abs(u-a)-Math.abs(d-a));const c=l[0];return r=i.Ts(c,o),r}}function Nc(t,e,n){return Math.min(Math.max(t,e),n)}function _d(t,e,n){return e-t<=n}class S7 extends Lu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=Math.max(1,Math.floor(s));e.lineWidth=i,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=ce(this.Yt);if(o.ba){e.strokeStyle=o.Sa,Za(e,o.xa),e.beginPath();for(const a of o.Ca){const l=Math.round(a.Pa*s);e.moveTo(l,-i),e.lineTo(l,n.height+i)}e.stroke()}if(o.ya){e.strokeStyle=o.ka,Za(e,o.Ta),e.beginPath();for(const a of o.Ra){const l=Math.round(a.Pa*r);e.moveTo(-i,l),e.lineTo(n.width+i,l)}e.stroke()}})}}class _7{constructor(e){this.Gt=new S7,this.xt=!0,this.Pt=e}yt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,n={ya:e.horzLines.visible,ba:e.vertLines.visible,ka:e.horzLines.color,Sa:e.vertLines.color,Ta:e.horzLines.style,xa:e.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map(s=>({Pa:s.coord}))};this.Gt.ht(n),this.xt=!1}return this.Gt}}class C7{constructor(e){this.sh=new _7(e)}lr(){return this.sh}}const Vp={Va:4,Ba:1e-4};function ta(t,e){const n=100*(t-e)/e;return e<0?-n:n}function E7(t,e){const n=ta(t.$e(),e),s=ta(t.qe(),e);return new kn(n,s)}function Ac(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function P7(t,e){const n=Ac(t.$e(),e),s=Ac(t.qe(),e);return new kn(n,s)}function cf(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.log10(n+e.Ba)+e.Va;return t<0?-s:s}function Rc(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.pow(10,n-e.Va)-e.Ba;return t<0?-s:s}function Wl(t,e){if(t===null)return null;const n=cf(t.$e(),e),s=cf(t.qe(),e);return new kn(n,s)}function na(t,e){if(t===null)return null;const n=Rc(t.$e(),e),s=Rc(t.qe(),e);return new kn(n,s)}function Yp(t){if(t===null)return Vp;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return Vp;const n=Math.ceil(Math.abs(Math.log10(e))),s=Vp.Va+n;return{Va:s,Ba:1/Math.pow(10,s)}}class Gp{constructor(e,n){if(this.Ia=e,this.Ea=n,function(s){if(s<0)return!1;if(s>1e18)return!0;for(let r=s;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let s=this.Ia;s!==1;){if(s%2==0)this.Aa.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),s/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(e,n,s){const r=this.Ia===0?0:1/this.Ia;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,a=this.Ea[0];for(;;){const d=_d(i,r,1e-14)&&i>r+1e-14,f=_d(i,s*a,1e-14),p=_d(i,1,1e-14);if(!(d&&f&&p))break;i/=a,a=this.Ea[++o%this.Ea.length]}if(i<=r+1e-14&&(i=r),i=Math.max(1,i),this.Aa.length>0&&(l=i,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.Aa[0];_d(i,s*a,1e-14)&&i>r+1e-14;)i/=a,a=this.Aa[++o%this.Aa.length];var l,c,u;return i}}class S1{constructor(e,n,s,r){this.La=[],this.Yi=e,this.Ia=n,this.Oa=s,this.Na=r}za(e,n){if(e<n)throw new Error("high < low");const s=this.Yi.$t(),r=(e-n)*this.Fa()/s,i=new Gp(this.Ia,[2,2.5,2]),o=new Gp(this.Ia,[2,2,2.5]),a=new Gp(this.Ia,[2.5,2,2]),l=[];return l.push(i.za(e,n,r),o.za(e,n,r),a.za(e,n,r)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let d=1;d<c.length;++d)c[d]<u&&(u=c[d]);return u}(l)}Wa(){const e=this.Yi,n=e.zt();if(n===null)return void(this.La=[]);const s=e.$t(),r=this.Oa(s-1,n),i=this.Oa(0,n),o=this.Yi.N().entireTextOnly?this.Ha()/2:0,a=o,l=s-1-o,c=Math.max(r,i),u=Math.min(r,i);if(c===u)return void(this.La=[]);const d=this.za(c,u);if(this.Ua(n,d,c,u,a,l),e.$a()&&this.qa(d,u,c)){const g=this.Yi.Ya();this.ja(n,d,a,l,g,2*g)}const f=this.La.map(g=>g.Ka),p=this.Yi.Xa(f);for(let g=0;g<this.La.length;g++)this.La[g].Za=p[g]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(e,n,s,r,i,o){const a=this.La,l=this.Yi;let c=s%n;c+=c<0?n:0;const u=s>=r?1:-1;let d=null,f=0;for(let p=s-c;p>r;p-=n){const g=this.Na(p,e,!0);d!==null&&Math.abs(g-d)<this.Fa()||g<i||g>o||(f<a.length?(a[f].Pa=g,a[f].Za=l.Ga(p),a[f].Ka=p):a.push({Pa:g,Za:l.Ga(p),Ka:p}),f++,d=g,l.Ja()&&(n=this.za(p*u,r)))}a.length=f}ja(e,n,s,r,i,o){const a=this.La,l=this.Qa(e,s,i,o),c=this.Qa(e,r,-o,-i),u=this.Na(0,e,!0)-this.Na(n,e,!0);a.length>0&&a[0].Pa-l.Pa<u/2&&a.shift(),a.length>0&&c.Pa-a[a.length-1].Pa<u/2&&a.pop(),a.unshift(l),a.push(c)}Qa(e,n,s,r){const i=(s+r)/2,o=this.Oa(n+s,e),a=this.Oa(n+r,e),l=Math.min(o,a),c=Math.max(o,a),u=Math.max(.1,this.za(c,l)),d=this.Oa(n+i,e),f=d-d%u,p=this.Na(f,e,!0);return{Za:this.Yi.Ga(f),Pa:p,Ka:f}}qa(e,n,s){let r=ri(this.Yi.Qe());return this.Yi.Ja()&&(r=na(r,this.Yi.tl())),r.$e()-n<e&&s-r.qe()<e}}function k3(t){return t.slice().sort((e,n)=>ce(e.hs())-ce(n.hs()))}var _1;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(_1||(_1={}));const C1=new m3,E1=new f0(100,1);class T7{constructor(e,n,s,r,i){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new Rt,this.ul=new Rt,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=E1,this.wl=Yp(null),this.gl=e,this.Ps=n,this.Ml=s,this.bl=r,this.Sl=i,this.xl=new S1(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(e){if(Gn(this.Ps,e),this.wa(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const n=Fn(e.scaleMargins.top),s=Fn(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(n+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+s}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const n=this.ie();let s=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),n.ie===1&&e.ie!==n.ie&&(function(i,o){if(i===null)return!1;const a=Rc(i.$e(),o),l=Rc(i.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.wl)?(s=na(this.Ge,this.wl),s!==null&&this.Bl(s)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==n.ie&&(s=Wl(this.Ge,this.wl),s!==null&&this.Bl(s));const r=n.ie!==this.Ps.mode;r&&(n.ie===2||this.Le())&&this.wa(),r&&(n.ie===3||this.Dl())&&this.wa(),e.Vl!==void 0&&n.Vl!==e.Vl&&(this.Ps.invertScale=e.Vl,this.Il()),this.ul.p(n,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(e){this.il!==e&&(this.il=e,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const e=this.$t()-this.Ll()-this.Ol();return this.sl=e,e}Qe(){return this.Nl(),this.Ge}Bl(e,n){const s=this.Ge;(n||s===null&&e!==null||s!==null&&!s.He(e))&&(this.pl=null,this.Ge=e)}Fl(e){this.Bl(e),this.Wl(e!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(e){return this.Vl()?e:this.$t()-1-e}Nt(e,n){return this.Le()?e=ta(e,n):this.Dl()&&(e=Ac(e,n)),this.Pl(e,n)}Ul(e,n,s){this.Nl();const r=this.Ol(),i=ce(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,p=this.$l();for(let g=d;g<f;g++){const x=e[g],w=x.gt;if(isNaN(w))continue;let m=w;p!==null&&(m=p(x.gt,n));const y=r+u*(m-o),v=c?y:this.il-1-y;x.ut=v}}ql(e,n,s){this.Nl();const r=this.Ol(),i=ce(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,p=this.$l();for(let g=d;g<f;g++){const x=e[g];let w=x.qh,m=x.Yh,y=x.jh,v=x.Kh;p!==null&&(w=p(x.qh,n),m=p(x.Yh,n),y=p(x.jh,n),v=p(x.Kh,n));let b=r+u*(w-o),S=c?b:this.il-1-b;x.Yl=S,b=r+u*(m-o),S=c?b:this.il-1-b,x.jl=S,b=r+u*(y-o),S=c?b:this.il-1-b,x.Kl=S,b=r+u*(v-o),S=c?b:this.il-1-b,x.Xl=S}}Ts(e,n){const s=this.Cl(e,n);return this.Zl(s,n)}Zl(e,n){let s=e;return this.Le()?s=function(r,i){return i<0&&(r=-r),r/100*i+i}(s,n):this.Dl()&&(s=function(r,i){return r-=100,i<0&&(r=-r),r/100*i+i}(s,n)),s}Ma(){return this.cl}Dt(){return this.fl||(this.fl=k3(this.cl)),this.fl}Gl(e){this.cl.indexOf(e)===-1&&(this.cl.push(e),this.wa(),this.Jl())}Ql(e){const n=this.cl.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.cl.splice(n,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let e=null;for(const n of this.cl){const s=n.zt();s!==null&&(e===null||s.Hh<e.Hh)&&(e=s)}return e===null?null:e.Wt}Vl(){return this.Ps.invertScale}Da(){const e=this.zt()===null;if(this.pl!==null&&(e||this.pl.io===e))return this.pl.Da;this.xl.Wa();const n=this.xl.Da();return this.pl={Da:n,io:e},this._l.p(),n}so(){return this._l}no(e){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-e,this.nl=ce(this.Qe()).Ue()))}eo(e){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(e=this.il-e)<0&&(e=0);let n=(this.vl+.2*(this.il-1))/(e+.2*(this.il-1));const s=ce(this.nl).Ue();n=Math.max(n,.1),s.je(n),this.Bl(s)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(e){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=e,this.nl=ce(this.Qe()).Ue()))}ao(e){if(this.Tl()||this.ml===null)return;const n=ce(this.Qe()).Ye()/(this.zl()-1);let s=e-this.ml;this.Vl()&&(s*=-1);const r=s*n,i=ce(this.nl).Ue();i.Ke(r),this.Bl(i,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(e,n){switch(this.Ps.mode){case 2:return this.oo(ta(e,n));case 3:return this.ea().format(Ac(e,n));default:return this.nr(e)}}Ga(e){switch(this.Ps.mode){case 2:return this.oo(e);case 3:return this.ea().format(e);default:return this.nr(e)}}Xa(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ea().formatTickmarks(e);default:return this.uo(e)}}Dh(e){return this.nr(e,ce(this.dl).ea())}Vh(e,n){return e=ta(e,n),this.oo(e,C1)}co(){return this.cl}do(e){this.el={hl:e,rl:!1}}Ns(){this.cl.forEach(e=>e.Ns())}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let e=1/0;this.dl=null;for(const s of this.cl)s.hs()<e&&(e=s.hs(),this.dl=s);let n=100;this.dl!==null&&(n=Math.round(this.dl.nh())),this.ra=E1,this.Le()?(this.ra=C1,n=100):this.Dl()?(this.ra=new f0(100,1),n=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new S1(this,n,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(e){this.al=e}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(e,n){if(this.Nl(),this.Ki())return 0;e=this.Ja()&&e?cf(e,this.wl):e;const s=ce(this.Qe()),r=this.Ol()+(this.zl()-1)*(e-s.$e())/s.Ye();return this.Hl(r)}Cl(e,n){if(this.Nl(),this.Ki())return 0;const s=this.Hl(e),r=ce(this.Qe()),i=r.$e()+r.Ye()*((s-this.Ol())/(this.zl()-1));return this.Ja()?Rc(i,this.wl):i}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const e=this.el.hl;if(e===null)return;let n=null;const s=this.co();let r=0,i=0;for(const l of s){if(!l.Vt())continue;const c=l.zt();if(c===null)continue;const u=l.Mh(e.Uh(),e.bi());let d=u&&u.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=Wl(d,this.wl);break;case 2:d=E7(d,c.Wt);break;case 3:d=P7(d,c.Wt)}if(n=n===null?d:n.vn(ce(d)),u!==null){const f=u.tr();f!==null&&(r=Math.max(r,f.above),i=Math.max(i,f.below))}}}if(this.$a()&&(r=Math.max(r,this.Ya()),i=Math.max(i,this.Ya())),r===this.ll&&i===this.ol||(this.ll=r,this.ol=i,this.pl=null,this.kl()),n!==null){if(n.$e()===n.qe()){const l=5*this.fo();this.Ja()&&(n=na(n,this.wl)),n=new kn(n.$e()-l,n.qe()+l),this.Ja()&&(n=Wl(n,this.wl))}if(this.Ja()){const l=na(n,this.wl),c=Yp(l);if(o=c,a=this.wl,o.Va!==a.Va||o.Ba!==a.Ba){const u=this.nl!==null?na(this.nl,this.wl):null;this.wl=c,n=Wl(l,c),u!==null&&(this.nl=Wl(u,c))}}this.Bl(n)}else this.Ge===null&&(this.Bl(new kn(-.5,.5)),this.wl=Yp(null));var o,a}$l(){return this.Le()?ta:this.Dl()?Ac:this.Ja()?e=>cf(e,this.wl):null}vo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.format(e)):n(e)}mo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.formatTickmarks(e)):n(e)}nr(e,n){return this.vo(e,this.bl.priceFormatter,n)}uo(e,n){const s=this.bl.priceFormatter;return this.mo(e,this.bl.tickmarksPriceFormatter??(s?r=>r.map(s):void 0),n)}oo(e,n){return this.vo(e,this.bl.percentageFormatter,n)}_o(e,n){const s=this.bl.percentageFormatter;return this.mo(e,this.bl.tickmarksPercentageFormatter??(s?r=>r.map(s):void 0),n)}}function P1(t){return t instanceof p0}class T1{constructor(e,n){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new Rt,this.yh=[],this.uh=e,this.ts=n,this.Co=new C7(this);const s=n.N();this.Po=this.yo("left",s.leftPriceScale),this.ko=this.yo("right",s.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(s)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.ko.hr(e.rightPriceScale),e.localization&&(this.Po.wa(),this.ko.wa()),e.overlayPriceScales){const n=Array.from(this.wo.values());for(const s of n){const r=ce(s[0].Ft());r.hr(e.overlayPriceScales),e.localization&&r.wa()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.ko}return this.wo.has(e)?Fn(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach(e=>{e.m&&e.m()}),this.yh=this.yh.filter(e=>{const n=e.oh();return n.detached&&n.detached(),!1}),this.xo.p()}Bo(){return this.bo}Io(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(e){this.Mo=e,this.Ao()}Al(e){this.il=e,this.Po.Al(e),this.ko.Al(e),this.cl.forEach(n=>{if(this.Un(n)){const s=n.Ft();s!==null&&s.Al(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.cl.filter(P1)}Ma(){return this.cl}Un(e){const n=e.Ft();return n===null||this.Po!==n&&this.ko!==n}Gl(e,n,s){this.No(e,n,s?e.hs():this.cl.length)}Ql(e,n){const s=this.cl.indexOf(e);Jt(s!==-1,"removeDataSource: invalid data source"),this.cl.splice(s,1),n||this.cl.forEach((o,a)=>o.ls(a));const r=ce(e.Ft()).ma();if(this.wo.has(r)){const o=Fn(this.wo.get(r)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.wo.delete(r))}const i=e.Ft();i&&i.Ma().indexOf(e)>=0&&(i.Ql(e),this.Fo(i)),this.fl=null}qn(e){return e===this.Po?"left":e===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(e,n){e.no(n)}$o(e,n){e.eo(n),this.Ao()}qo(e){e.ro()}Yo(e,n){e.ho(n)}jo(e,n){e.ao(n),this.Ao()}Ko(e){e.lo()}Ao(){this.cl.forEach(e=>{e.Ns()})}ks(){let e=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?e=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?e=this.Po:this.cl.length!==0&&(e=this.cl[0].Ft()),e===null&&(e=this.ko),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.ko:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Tl()&&this.Xo(e)}Zo(e){const n=this.uh.Pe();e.yl({sn:!0}),n!==null&&e.do(n),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=k3(this.cl)),this.fl}Qo(e,n){n=Nc(n,0,this.cl.length-1);const s=this.cl.indexOf(e);Jt(s!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(s,1),this.cl.splice(n,0,e),this.cl.forEach((r,i)=>r.ls(i)),this.fl=null;for(const r of[this.Po,this.ko])r.Jl(),r.wa();this.ts.ar()}Bt(){return this.Dt().filter(P1)}t_(){return this.xo}i_(){return this.Co}_a(e){this.yh.push(new h7(e))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.yh}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}Xo(e){const n=e.co();if(n&&n.length>0&&!this.uh.Ki()){const s=this.uh.Pe();s!==null&&e.do(s)}e.Ns()}No(e,n,s){let r=this.Do(n);if(r===null&&(r=this.yo(n,this.ts.N().overlayPriceScales)),this.cl.splice(s,0,e),!h0(n)){const i=this.wo.get(n)||[];i.push(e),this.wo.set(n,i)}e.ls(s),r.Gl(e),e._s(r),this.Fo(r),this.fl=null}To(e,n,s){n.ie!==s.ie&&this.Xo(e)}yo(e,n){const s={visible:!0,autoScale:!0,...wr(n)},r=new T7(e,s,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return r.Al(this.$t()),r}}function Cd(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function M7(t,e,n,s){for(const r of t){const i=r.Tt(s);if(i!==null&&i.jn){const o=i.jn(e,n);if(o!==null)return{a_:r,e_:o}}}return null}function I7(t){return t.Fs!==void 0}function S3(t,e,n){const s=[t,...t.Dt()],r=function(i,o,a){var f;let l,c;for(const p of i){const g=((f=p.sa)==null?void 0:f.call(p,o,a))??[];for(const x of g)u=x.zOrder,d=l==null?void 0:l.zOrder,(!d||u==="top"&&d!=="top"||u==="normal"&&d==="bottom")&&(l=x,c=p)}var u,d;return l&&c?{r_:l,n_:c}:null}(s,e,n);if((r==null?void 0:r.r_.zOrder)==="top")return Cd(r);for(const i of s){if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&!r.r_.isBackground)return Cd(r);if(I7(i)){const o=M7(i.Fs(t),e,n,t);if(o!==null)return{n_:i,a_:o.a_,e_:o.e_}}if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&r.r_.isBackground)return Cd(r)}return r!=null&&r.r_?Cd(r):null}class N7{constructor(e,n,s=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=n,this.Vn=s}__(e){const n=e.time,s=this.o_.cacheKey(n),r=this.Dn.get(s);if(r!==void 0)return r.u_;if(this.yn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Fn(o)),this.Tn++,this.yn--}const i=this.l_(e);return this.Dn.set(s,{u_:i,An:this.kn}),this.Rn.set(this.kn,s),this.yn++,this.kn++,i}}class Oc{constructor(e,n){Jt(e<=n,"right should be >= left"),this.c_=e,this.d_=n}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function M1(t,e){return t===null||e===null?t===e:t.He(e)}class A7{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,n){this.g_(n),this.Dn=null;for(let s=n;s<e.length;++s){const r=e[s];let i=this.p_.get(r.timeWeight);i===void 0&&(i=[],this.p_.set(r.timeWeight,i)),i.push({index:s,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}M_(e,n,s,r,i){const o=Math.ceil(n/e);return this.Dn!==null&&this.Dn.b_===o&&i===this.Dn.S_&&s===this.Dn.x_||(this.Dn={S_:i,x_:s,Da:this.C_(o,s,r),b_:o}),this.Dn.Da}g_(e){if(e===0)return void this.p_.clear();const n=[];this.p_.forEach((s,r)=>{e<=s[0].index?n.push(r):s.splice(tl(s,e,i=>i.index<e),1/0)});for(const s of n)this.p_.delete(s)}C_(e,n,s){let r=[];const i=o=>!n||s.has(o.index);for(const o of Array.from(this.p_.keys()).sort((a,l)=>l-a)){if(!this.p_.get(o))continue;const a=r;r=[];const l=a.length;let c=0;const u=Fn(this.p_.get(o)),d=u.length;let f=1/0,p=-1/0;for(let g=0;g<d;g++){const x=u[g],w=x.index;for(;c<l;){const m=a[c],y=m.index;if(!(y<w&&i(m))){f=y;break}c++,r.push(m),p=y,f=1/0}if(f-w>=e&&w-p>=e&&i(x))r.push(x),p=w;else if(this.v_)return a}for(;c<l;c++)i(a[c])&&r.push(a[c])}return r}}class pa{constructor(e){this.P_=e}y_(){return this.P_===null?null:new Oc(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new pa(null)}}function R7(t,e){return t.weight>e.weight?t:e}class O7{constructor(e,n,s,r){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new A7,this.B_=new Map,this.I_=pa.T_(),this.E_=!0,this.A_=new Rt,this.z_=new Rt,this.L_=new Rt,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=n,this.bl=s,this.U_=n.rightOffset,this.q_=n.barSpacing,this.ts=e,this.Y_(n),this.o_=r,this.j_(),this.V_.m_(n.uniformDistribution),this.K_()}N(){return this.Ps}X_(e){Gn(this.bl,e),this.Z_(),this.j_()}hr(e,n){Gn(this.Ps,e),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),this.Y_(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(e){var n;return((n=this.D_[e])==null?void 0:n.time)??null}ss(e){return this.D_[e]??null}Q_(e,n){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return n?this.D_.length-1:null;const s=tl(this.D_,this.o_.key(e),(r,i)=>this.o_.key(r.time)<i);return this.o_.key(e)<this.o_.key(this.D_[s].time)?n?s:null:s}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const e=this.Pe();if(e===null)return null;const n={from:e.Uh(),to:e.bi()};return this.eu(n)}eu(e){const n=Math.round(e.from),s=Math.round(e.to),r=ce(this.ru()),i=ce(this.hu());return{from:ce(this.ss(Math.max(r,n))),to:ce(this.ss(Math.min(i,s)))}}au(e){return{from:ce(this.Q_(e.from,!0)),to:ce(this.Q_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const n=this.su(),s=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const r=this.q_*e/s;this.q_=r}if(this.Ps.fixLeftEdge&&n!==null&&n.Uh()<=0){const r=s-e;this.U_-=Math.round(r/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(e){if(this.Ki()||!lu(e))return 0;const n=this._u()+this.U_-e;return this.Mo-(n+.5)*this.q_-1}uu(e,n){const s=this._u(),r=n===void 0?0:n.from,i=n===void 0?e.length:n.to;for(let o=r;o<i;o++){const a=e[o].wt,l=s+this.U_-a,c=this.Mo-(l+.5)*this.q_-1;e[o]._t=c}}cu(e,n){const s=Math.ceil(this.du(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.fu(s)?this.pu(s):s}fn(e){this.E_=!0,this.U_=e,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(e){const n=this.q_;if(this.wu(e),this.Ps.rightOffsetPixels!==void 0&&n!==0){const s=this.U_*n/this.q_;this.U_=s}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,n=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(n/e),r=ce(this.Pe()),i=Math.max(r.Uh(),r.Uh()-s),o=Math.max(r.bi(),r.bi()-s),a=this.V_.M_(e,n,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),l=this.ru()+s,c=this.hu()-s,u=this.Mu(),d=this.Ps.fixLeftEdge||u,f=this.Ps.fixRightEdge||u;let p=0;for(const g of a){if(!(i<=g.index&&g.index<=o))continue;let x;p<this.H_.length?(x=this.H_[p],x.coord=this.qt(g.index),x.label=this.bu(g),x.weight=g.weight):(x={needAlignCoordinate:!1,coord:this.qt(g.index),label:this.bu(g),weight:g.weight},this.H_.push(x)),this.q_>n/2&&!u?x.needAlignCoordinate=!1:x.needAlignCoordinate=d&&g.index<=l||f&&g.index>=c,p++}return this.H_.length=p,this.N_=this.H_,this.H_}Su(){let e;this.E_=!0,this.dn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(e)}xu(e){this.E_=!0,this.R_=e,this.ou(),this.G_()}Cu(e,n){const s=this.du(e),r=this.mu(),i=r+n*(r/10);this.dn(i),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(s-this.du(e)))}no(e){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=e,this.Pu()))}eo(e){if(this.O_===null)return;const n=Nc(this.Mo-e,0,this.Mo),s=Nc(this.Mo-ce(this.vl),0,this.Mo);n!==0&&s!==0&&this.dn(this.O_.mu*n/s)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(e){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Pu()))}ao(e){if(this.ml===null)return;const n=(this.ml-e)/this.mu();this.U_=ce(this.O_).gu+n,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.U_,r=performance.now();this.ts._n({Ru:i=>(i-r)/n>=1,Du:i=>{const o=(i-r)/n;return o>=1?e:s+(e-s)*o}})}yt(e,n){this.E_=!0,this.D_=e,this.V_.w_(e,n),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(e,n){const s=e.f_(),r=n&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-r)/s),this.U_=e.bi()-this._u(),n&&(this.U_=r?r/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const e=this.ru(),n=this.hu();e!==null&&n!==null&&this.Eu(new Oc(e,n),!0)}zu(e){const n=new Oc(e.from,e.to);this.Eu(n)}ns(e){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const n of e)for(const s of n.va())this.F_.set(s,!0);this.W_++}Mu(){const e=this.ts.N().handleScroll,n=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(e){return(this.Mo-1-e)/this.q_}du(e){const n=this.Lu(e),s=this._u()+this.U_-n;return Math.round(1e6*s)/1e6}wu(e){const n=this.q_;this.q_=e,this.lu(),n!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(pa.T_());const e=this._u(),n=this.Mo/this.q_,s=this.U_+e,r=new Oc(s-n+1,s);this.Nu(new pa(r))}lu(){const e=Nc(this.q_,this.Fu(),this.Wu());this.q_!==e&&(this.q_=e,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const e=this.Hu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const n=this.Uu();this.U_>n&&(this.U_=n,this.E_=!0)}Hu(){const e=this.ru(),n=this.R_;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(e){let n=this.B_.get(e.weight);return n===void 0&&(n=new N7(s=>this.$u(s),this.o_),this.B_.set(e.weight,n)),n.__(e)}$u(e){return this.o_.formatTickmark(e,this.bl)}Nu(e){const n=this.I_;this.I_=e,M1(n.y_(),this.I_.y_())||this.A_.p(),M1(n.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const e=this.ru();if(e===null)return;const n=this.Pe();if(n===null)return;const s=n.Uh()-e;if(s<0){const r=this.U_-s-1;this.fn(r)}this.lu()}J_(){this.ou(),this.lu()}fu(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}pu(e){const n=function*(r){const i=Math.round(r),o=i<r;let a=1;for(;;)o?(yield i+a,yield i-a):(yield i-a,yield i+a),a++}(e),s=this.hu();for(;s;){const r=n.next().value;if(this.F_.get(r))return r;if(r<0||r>s)break}return e}Y_(e){if(e.rightOffsetPixels!==void 0){const n=e.rightOffsetPixels/(e.barSpacing||this.q_);this.ts.fn(n)}}}var I1,N1,A1,R1,O1;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(I1||(I1={}));class D7{constructor(e,n,s){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new Rt,this.Xu=new Rt,this.Zu=null,this.Gu=e,this.Ps=n,this.o_=s,this.Sl=new DR(this.Ps.layout.colorParsers),this.Ju=new OR(this),this.uh=new O7(this,n.timeScale,this.Ps.localization,s),this.Ct=new YR(this,n.crosshair),this.Qu=new k7(n.crosshair),n.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(Qt.gn())}ar(){this.rc(Qt.wn())}Zh(){this.rc(new Qt(1))}Eh(e){const n=this.hc(e);this.rc(n)}ac(){return this.ju}lc(e){var s,r,i,o;if(((s=this.ju)==null?void 0:s.n_)===(e==null?void 0:e.n_)&&((i=(r=this.ju)==null?void 0:r.e_)==null?void 0:i.Kn)===((o=e==null?void 0:e.e_)==null?void 0:o.Kn))return;const n=this.ju;this.ju=e,n!==null&&this.Eh(n.n_),e!==null&&e.n_!==(n==null?void 0:n.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Gn(this.Ps,e),this.qu.forEach(n=>n.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.X_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(e,n,s=0){const r=this.qu[s];if(r===void 0)return;if(e==="left")return Gn(this.Ps,{leftPriceScale:n}),r.Ro({leftPriceScale:n}),this.Ku.p(),void this.Ih();if(e==="right")return Gn(this.Ps,{rightPriceScale:n}),r.Ro({rightPriceScale:n}),this.Ku.p(),void this.Ih();const i=this._c(e,s);i!==null&&(i.Ft.hr(n),this.Ku.p())}_c(e,n){const s=this.qu[n];if(s===void 0)return null;const r=s.Do(e);return r!==null?{Us:s,Ft:r}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(e,n){e.Al(n),this.vu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.qu.forEach(n=>n.Eo(e)),this.vu()}fc(e){this.qu.length!==1&&(Jt(e>=0&&e<this.qu.length,"Invalid pane index"),this.qu.splice(e,1),this.Ih())}vc(e,n){if(this.qu.length<2)return;Jt(e>=0&&e<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu.reduce((d,f)=>d+f.Bo(),0),i=this.qu.reduce((d,f)=>d+f.$t(),0),o=i-30*(this.qu.length-1);n=Math.min(o,Math.max(30,n));const a=r/i,l=s.$t();s.Io(n*a);let c=n-l,u=this.qu.length-1;for(const d of this.qu)if(d!==s){const f=Math.min(o,Math.max(30,d.$t()-c/u));c-=d.$t()-f,u-=1;const p=f*a;d.Io(p)}this.Ih()}mc(e,n){Jt(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu[n];this.qu[e]=r,this.qu[n]=s,this.Ih()}wc(e,n){if(Jt(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index"),e===n)return;const[s]=this.qu.splice(e,1);this.qu.splice(n,0,s),this.Ih()}Uo(e,n,s){e.Uo(n,s)}$o(e,n,s){e.$o(n,s),this.Ah(),this.rc(this.gc(e,2))}qo(e,n){e.qo(n),this.rc(this.gc(e,2))}Yo(e,n,s){n.Tl()||e.Yo(n,s)}jo(e,n,s){n.Tl()||(e.jo(n,s),this.Ah(),this.rc(this.gc(e,2)))}Ko(e,n){n.Tl()||(e.Ko(n),this.rc(this.gc(e,2)))}Zo(e,n){e.Zo(n),this.rc(this.gc(e,2))}Mc(e){this.uh.no(e)}bc(e,n){const s=this.Et();if(s.Ki()||n===0)return;const r=s.Qi();e=Math.max(1,Math.min(e,r)),s.Cu(e,n),this.vu()}Sc(e){this.xc(0),this.Cc(e),this.Pc()}yc(e){this.uh.eo(e),this.vu()}kc(){this.uh.ro(),this.ar()}xc(e){this.uh.ho(e)}Cc(e){this.uh.ao(e),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(e,n,s,r,i){this.Ct.Vs(e,n);let o=NaN,a=this.uh.cu(e,!0);const l=this.uh.Pe();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));const c=r.ks(),u=c.zt();if(u!==null&&(o=c.Ts(n,u)),o=this.Qu.ga(o,a,r),this.Ct.As(a,o,r),this.Zh(),!i){const d=S3(r,e,n);this.lc(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Xu.p(this.Ct.It(),{x:e,y:n},s)}}Rc(e,n,s){const r=s.ks(),i=r.zt(),o=r.Nt(e,ce(i)),a=this.uh.Q_(n,!0),l=this.uh.qt(ce(a));this.Tc(l,o,null,s,!0)}Dc(e){this.uc().Ls(),this.Zh(),e||this.Xu.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const n=this.Ct.Is(),s=this.Ct.Es();this.Tc(n,s,null,e)}this.Ct.Ns()}Vc(e,n,s){const r=this.uh.Rs(0);n!==void 0&&s!==void 0&&this.uh.yt(n,s);const i=this.uh.Rs(0),o=this.uh._u(),a=this.uh.Pe();if(a!==null&&r!==null&&i!==null){const l=a.Te(o),c=this.o_.key(r)>this.o_.key(i),u=e!==null&&e>o&&!c,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=l&&(s!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!f){const p=e-o;this.uh.fn(this.uh.gu()-p)}}this.uh.xu(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(s){return s instanceof T1}(e))return e;const n=this.qu.find(s=>s.Dt().includes(e));return n===void 0?null:n}vu(){this.qu.forEach(e=>e.Jo()),this.Ah()}m(){this.qu.forEach(e=>e.m()),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(e,n){const s=this.tc(n);this.Ec(e,s),this.Yu.push(e),this.Yu.length===1?this.Ih():this.ar()}Ac(e){const n=this.Hn(e),s=this.Yu.indexOf(e);Jt(s!==-1,"Series not found");const r=ce(n);this.Yu.splice(s,1),r.Ql(e),e.m&&e.m(),this.uh.K_(),this.zc(r)}Bh(e,n){const s=ce(this.Hn(e));s.Ql(e,!0),s.Gl(e,n,!0)}Au(){const e=Qt.wn();e.rn(),this.rc(e)}Lc(e){const n=Qt.wn();n.ln(e),this.rc(n)}cn(){const e=Qt.wn();e.cn(),this.rc(e)}dn(e){const n=Qt.wn();n.dn(e),this.rc(n)}fn(e){const n=Qt.wn();n.fn(e),this.rc(n)}_n(e){const n=Qt.wn();n._n(e),this.rc(n)}hn(){const e=Qt.wn();e.hn(),this.rc(e)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(e,n){if(Jt(n>=0,"Index should be greater or equal to 0"),n===this.Fc(e))return;const s=ce(this.Hn(e));s.Ql(e);const r=this.tc(n);this.Ec(e,r),s.Ma().length===0&&this.zc(s),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(e){const n=this.ec,s=this.sc;if(n===s)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Zu===null||this.Zu.mr!==s||this.Zu.wr!==n)this.Zu={mr:s,wr:n,Hc:new Map};else{const i=this.Zu.Hc.get(e);if(i!==void 0)return i}const r=this.Sl.tt(s,n,e/100);return this.Zu.Hc.set(e,r),r}Uc(e){return this.qu.indexOf(e)}Xi(){return this.Sl}$c(){return this.qc()}qc(e){const n=new T1(this.uh,this);this.qu.push(n);const s=e??this.qu.length-1,r=Qt.gn();return r.Qs(s,{tn:0,sn:!0}),this.rc(r),n}tc(e){return Jt(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.qu.length,e))<this.qu.length?this.qu[e]:this.qc(e)}Fc(e){return this.qu.findIndex(n=>n.Oo().includes(e))}gc(e,n){const s=new Qt(n);if(e!==null){const r=this.qu.indexOf(e);s.Qs(r,{tn:n})}return s}hc(e,n){return n===void 0&&(n=2),this.gc(this.Hn(e),n)}rc(e){this.Gu&&this.Gu(e),this.qu.forEach(n=>n.i_().lr().yt())}Ec(e,n){const s=e.N().priceScaleId,r=s!==void 0?s:this.Oc();n.Gl(e,r),h0(r)||e.hr(e.N())}nc(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}zc(e){!e.Lo()&&e.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(e),1)}}function _3(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}function Dm(t){return!el(t)&&!Du(t)}function C3(t){return el(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(N1||(N1={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(A1||(A1={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(R1||(R1={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(O1||(O1={}));const D1=t=>t.getUTCFullYear();function L7(t,e,n){return e.replace(/yyyy/g,(s=>kr(D1(s),4))(t)).replace(/yy/g,(s=>kr(D1(s)%100,2))(t)).replace(/MMMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,n)).replace(/MMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,n)).replace(/MM/g,(s=>kr((r=>r.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>kr((r=>r.getUTCDate())(s),2))(t))}class E3{constructor(e="yyyy-MM-dd",n="default"){this.Yc=e,this.jc=n}__(e){return L7(e,this.Yc,this.jc)}}class j7{constructor(e){this.Kc=e||"%h:%m:%s"}__(e){return this.Kc.replace("%h",kr(e.getUTCHours(),2)).replace("%m",kr(e.getUTCMinutes(),2)).replace("%s",kr(e.getUTCSeconds(),2))}}const F7={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class z7{constructor(e={}){const n={...F7,...e};this.Qc=new E3(n.Xc,n.Jc),this.td=new j7(n.Zc),this.sd=n.Gc}__(e){return`${this.Qc.__(e)}${this.sd}${this.td.__(e)}`}}function Ed(t){return 60*t*60*1e3}function qp(t){return 60*t*1e3}const Pd=[{nd:(L1=1,1e3*L1),ed:10},{nd:qp(1),ed:20},{nd:qp(5),ed:21},{nd:qp(30),ed:22},{nd:Ed(1),ed:30},{nd:Ed(3),ed:31},{nd:Ed(6),ed:32},{nd:Ed(12),ed:33}];var L1;function j1(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=Pd.length-1;n>=0;--n)if(Math.floor(e.getTime()/Pd[n].nd)!==Math.floor(t.getTime()/Pd[n].nd))return Pd[n].ed;return 0}function Kp(t){let e=t;if(Du(t)&&(e=jb(t)),!Dm(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{rd:Math.round(n.getTime()/1e3),hd:e}}function F1(t){if(!C3(t))throw new Error("time must be of type isUTCTimestamp");return{rd:t}}function jb(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function z1(t){Du(t.time)&&(t.time=jb(t.time))}class B1{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(z1)}(e):z1(e)}createConverterToInternalObj(e){return ce(function(n){return n.length===0?null:Dm(n[0].time)||Du(n[0].time)?Kp:F1}(e))}key(e){return typeof e=="object"&&"rd"in e?e.rd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.hd===void 0?new Date(1e3*n.rd).getTime():new Date(Date.UTC(n.hd.year,n.hd.month-1,n.hd.day)).getTime()}convertHorzItemToInternal(e){return C3(n=e)?F1(n):Dm(n)?Kp(n):Kp(jb(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new z7({Xc:n,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:e.locale}):this.ad=new E3(n,e.locale)}formatHorzItem(e){const n=e;return this.ad.__(new Date(1e3*n.rd))}formatTickmark(e,n){const s=function(i,o,a){switch(i){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),r=this.Ps.timeScale;if(r.tickMarkFormatter!==void 0){const i=r.tickMarkFormatter(e.originalTime,s,n.locale);if(i!==null)return i}return function(i,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=i.hd===void 0?new Date(1e3*i.rd):new Date(Date.UTC(i.hd.year,i.hd.month-1,i.hd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,s,n.locale)}maxTickMarkWeight(e){let n=e.reduce(R7,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(s,r=0){if(s.length===0)return;let i=r===0?null:s[r-1].time.rd,o=i!==null?new Date(1e3*i):null,a=0;for(let l=r;l<s.length;++l){const c=s[l],u=new Date(1e3*c.time.rd);o!==null&&(c.timeWeight=j1(u,o)),a+=c.time.rd-(i||c.time.rd),i=c.time.rd,o=u}if(r===0&&s.length>1){const l=Math.ceil(a/(s.length-1)),c=new Date(1e3*(s[0].time.rd-l));s[0].timeWeight=j1(new Date(1e3*s[0].time.rd),c)}})(e,n)}static ld(e){return Gn({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const nl=typeof window<"u";function $1(){return!!nl&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Xp(){return!!nl&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Lm(t){return t+t%2}function B7(t){nl&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class g0{constructor(e,n,s){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!Xp(),this.Ld=r=>{this.Od(r)},this.Nd=r=>{if(this.Fd(r)){const i=this.Wd(r);if(++this.dd,this.fd&&this.dd>1){const{Hd:o}=this.Ud(zs(r),this.pd);o<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}}else{const i=this.Wd(r);if(++this.od,this._d&&this.od>1){const{Hd:o}=this.Ud(zs(r),this.ud);o<5&&!this.bd&&this.Kd(i,this.Yd.Xd),this.Zd()}}},this.Gd=e,this.Yd=n,this.Ps=s,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(e){this.yd&&this.yd();const n=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",n)},this.Gd.addEventListener("mousemove",n),this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(e){if(this.Id||this.gd!==null||this.Fd(e))return;const n=this.Wd(e);this.Kd(n,this.Yd.nf),this.zd=!0}ef(e){const n=Qp(e.changedTouches,ce(this.Ad));if(n===null||(this.Ed=Td(e),this.Rd!==null)||this.Bd)return;this.Vd=!0;const s=this.Ud(zs(n),ce(this.gd)),{rf:r,hf:i,Hd:o}=s;if(this.Md||!(o<5)){if(!this.Md){const a=.5*r,l=i>=a&&!this.Ps.af(),c=a>i&&!this.Ps.lf();l||c||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const a=this.Wd(e,n);this.$d(a,this.Yd._f),Lo(e)}}}uf(e){if(e.button!==0)return;const n=this.Ud(zs(e),ce(this.wd)),{Hd:s}=n;if(s>=5&&(this.bd=!0,this.Zd()),this.bd){const r=this.Wd(e);this.Kd(r,this.Yd.cf)}}Ud(e,n){const s=Math.abs(n._t-e._t),r=Math.abs(n.ut-e.ut);return{rf:s,hf:r,Hd:s+r}}df(e){let n=Qp(e.changedTouches,ce(this.Ad));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Ad=null,this.Ed=Td(e),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const s=this.Wd(e,n);if(this.$d(s,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:r}=this.Ud(zs(n),this.pd);r<30&&!this.Sd&&this.$d(s,this.Yd.qd),this.jd()}else this.Sd||(this.$d(s,this.Yd.pf),this.Yd.pf&&Lo(e));this.dd===0&&Lo(e),e.touches.length===0&&this.md&&(this.md=!1,Lo(e))}Od(e){if(e.button!==0)return;const n=this.Wd(e);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),$1()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(e))if(this.Kd(n,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:s}=this.Ud(zs(e),this.ud);s<5&&!this.bd&&this.Kd(n,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(n,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(e){if(this.Ad!==null)return;const n=e.changedTouches[0];this.Ad=n.identifier,this.Ed=Td(e);const s=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=zs(n),this.Td&&(this.Td(),this.Td=null);{const i=this.ef.bind(this),o=this.df.bind(this);this.Td=()=>{s.removeEventListener("touchmove",i),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,e),240)}const r=this.Wd(e,n);this.$d(r,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=zs(n))}bf(e){if(e.button!==0)return;const n=this.Gd.ownerDocument.documentElement;$1()&&n.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=zs(e),this.kd&&(this.kd(),this.kd=null);{const r=this.uf.bind(this),i=this.Od.bind(this);this.kd=()=>{n.removeEventListener("mousemove",r),n.removeEventListener("mouseup",i)},n.addEventListener("mousemove",r),n.addEventListener("mouseup",i)}if(this.Id=!0,this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=zs(e))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const e=this.Gd.ownerDocument,n=s=>{this.Yd.xf&&(s.composed&&this.Gd.contains(s.composedPath()[0])||s.target&&this.Gd.contains(s.target)||this.Yd.xf())};this.Cd=()=>{e.removeEventListener("touchstart",n)},this.xd=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Xp()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),B7(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",()=>{},{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",e=>this.Rf(e.touches),{passive:!0}),this.Gd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const n=U1(e.touches[0],e.touches[1])/this.Dd;this.Yd.kf(this.Rd,n),Lo(e)}},{passive:!1}),this.Gd.addEventListener("touchend",e=>{this.Rf(e.touches)}))}Rf(e){e.length===1&&(this.Vd=!1),e.length!==2||this.Vd||this.md?this.Df():this.Vf(e)}Vf(e){const n=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Dd=U1(e[0],e[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(e){if(this.yd&&this.yd(),this.Fd(e)||!this.zd)return;const n=this.Wd(e);this.Kd(n,this.Yd.Bf),this.zd=!Xp()}gf(e){const n=Qp(e.touches,ce(this.Ad));if(n===null)return;const s=this.Wd(e,n);this.$d(s,this.Yd.If),this.Sd=!0,this.md=!0}Fd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Td(e)<this.Ed+500}$d(e,n){n&&n.call(this.Yd,e)}Kd(e,n){n&&n.call(this.Yd,e)}Wd(e,n){const s=n||e,r=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-r.left,localY:s.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Ef:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Af:e.type,zf:s.target,a_:e.view,Lf:()=>{e.type!=="touchstart"&&Lo(e)}}}}function U1(t,e){const n=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(n*n+s*s)}function Lo(t){t.cancelable&&t.preventDefault()}function zs(t){return{_t:t.pageX,ut:t.pageY}}function Td(t){return t.timeStamp||performance.now()}function Qp(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class $7{constructor(e,n,s){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=e,this.Uf=e.$f()[n],this.qf=e.$f()[s],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return ut({width:this.Uf.Gf().width,height:1})}Jf(){return ut({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(e,n,s){const r=this.Jf();e.fillStyle=this.Hf.N().layout.panes.separatorColor,e.fillRect(n,s,r.width,r.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.jf.appendChild(e);const s=document.createElement("div"),r=s.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.jf.appendChild(s);const i={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new g0(s,i,{af:()=>!1,lf:()=>!0}),this.Of={ip:s,tp:e}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(e){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(e){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(e){if(this.Of===null)return;const n=this.Uf.ap().Bo()+this.qf.ap().Bo(),s=n/(this.Uf.Gf().height+this.qf.Gf().height),r=30*s;n<=2*r||(this.Wf={lp:e.pageY,op:this.Uf.ap().Bo(),_p:n-r,up:n,cp:s,dp:r},this.Of.tp.style.display="block")}rp(e){const n=this.Wf;if(n===null)return;const s=(e.pageY-n.lp)*n.cp,r=Nc(n.op+s,n.dp,n._p);this.Uf.ap().Io(r),this.qf.ap().Io(n.up-r),this.Hf.Qt().Ih()}hp(e){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function Jp(t,e){return t.fp-e.fp}function Zp(t,e,n){const s=(t.fp-e.fp)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),n)}class U7{constructor(e,n,s,r){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=e,this.xp=n,this.Cp=s,this.Mn=r}Pp(e,n){if(this.pp!==null){if(this.pp.wt===n)return void(this.pp.fp=e);if(Math.abs(this.pp.fp-e)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:n,fp:e}}le(e,n){if(this.pp===null||this.vp===null||n-this.pp.wt>50)return;let s=0;const r=Zp(this.pp,this.vp,this.xp),i=Jp(this.pp,this.vp),o=[r],a=[i];if(s+=i,this.mp!==null){const c=Zp(this.vp,this.mp,this.xp);if(Math.sign(c)===Math.sign(r)){const u=Jp(this.vp,this.mp);if(o.push(c),a.push(u),s+=u,this.wp!==null){const d=Zp(this.mp,this.wp,this.xp);if(Math.sign(d)===Math.sign(r)){const f=Jp(this.mp,this.wp);o.push(d),a.push(f),s+=f}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/s*o[c];Math.abs(l)<this.Sp||(this.gp={fp:e,wt:n},this.bp=l,this.Mp=function(c,u){const d=Math.log(u);return Math.log(1*d/-c)/d}(Math.abs(l),this.Cp))}Du(e){const n=ce(this.gp),s=e-n.wt;return n.fp+this.bp*(Math.pow(this.Cp,s)-1)/Math.log(this.Cp)}Ru(e){return this.gp===null||this.yp(e)===this.Mp}yp(e){const n=e-ce(this.gp).wt;return Math.min(n,this.Mp)}}class W7{constructor(e,n){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=e,this.Vp=n,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function mo(t,e){const n=ce(t.ownerDocument).createElement("canvas");t.appendChild(n);const s=TR(n,{options:{allowResizeObserver:!0},transform:(r,i)=>({width:Math.max(r.width,i.width),height:Math.max(r.height,i.height)})});return s.resizeCanvasElement(e),s}function xo(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function jm(t,e,n,s){t.ih&&t.ih(e,n,s)}function ph(t,e,n,s){t.nt(e,n,s)}function Fm(t,e,n,s){const r=t(n,s);for(const i of r){const o=i.Tt(s);o!==null&&e(o)}}function eg(t,e){return n=>{var s,r;return function(i){return i.Ft!==void 0}(n)?(((s=n.Ft())==null?void 0:s.ma())??"")!==e?[]:((r=n.ta)==null?void 0:r.call(n,t))??[]:[]}}function W1(t,e,n,s){if(!t.length)return;let r=0;const i=t[0].$t(s,!0);let o=e===1?n/2-(t[0].Fi()-i/2):t[0].Fi()-i/2-n/2;o=Math.max(0,o);for(let a=1;a<t.length;a++){const l=t[a],c=t[a-1],u=c.$t(s,!1),d=l.Fi(),f=c.Fi();if(e===1?d>f-u:d<f+u){const p=f-u*e;l.Wi(p);const g=p-e*u/2;if((e===1?g<0:g>n)&&o>0){const x=e===1?-1-g:g-n,w=Math.min(x,o);for(let m=r;m<t.length;m++)t[m].Wi(t[m].Fi()+e*w);o-=w}}else r=a,o=e===1?f-u-d:d-(f+u)}}class H1{constructor(e,n,s,r){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new of(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=e,this.Ps=n,this.Ml=n.layout,this.Ju=s,this.jp=r==="left",this.Kp=eg("normal",r),this.Xp=eg("top",r),this.Zp=eg("bottom",r),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=mo(this.jf,ut({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=mo(this.jf,ut({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new g0(this.Jp.canvasElement,a,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),xo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),xo(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const e=this.Ju.N();return this.Wp!==e.k&&(this.Fp.Bn(),this.Wp=e.k),e}nv(){if(this.Yi===null)return 0;let e=0;const n=this.sv(),s=ce(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));s.save();const r=this.Yi.Da();s.font=this.ev(),r.length>0&&(e=Math.max(this.Fp.Vi(s,r[0].Za),this.Fp.Vi(s,r[r.length-1].Za)));const i=this.rv();for(let c=i.length;c--;){const u=this.Fp.Vi(s,i[c].ri());u>e&&(e=u)}const o=this.Yi.zt();if(o!==null&&this.Op!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Yi.Ts(1,o),u=this.Yi.Ts(this.Op.height-2,o);e=Math.max(e,this.Fp.Vi(s,this.Yi.Zi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Fp.Vi(s,this.Yi.Zi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;s.restore();const l=e||34;return Lm(Math.ceil(n.S+n.C+n.B+n.I+5+l))}hv(e){this.Op!==null&&ro(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`)}av(){return ce(this.Op).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=e,e.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const e=this.Pt.ap();this.Pt.qp().Qt().Zo(e,ce(this.Ft()))}lv(e){if(this.Op===null)return;const n={colorSpace:this.Pt.qp().N().layout.colorSpace};if(e!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const r=go(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i)}),this.Pt.cv(r,this.Zp),this.dv(r),this.Pt.cv(r,this.Kp),this.fv(r))}this.Jp.applySuggestedBitmapSize();const s=go(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.pv(s),this.Pt.cv(s,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}yt(){var e;(e=this.Yi)==null||e.Da()}ep(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!0,n.Uo(s,this.Yi,e.localY)}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap(),r=this.Yi;n.$o(s,r,e.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),n=this.Pt.ap(),s=this.Yi;this.Np&&(this.Np=!1,e.qo(n,s))}hp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!1,n.qo(s,this.Yi)}tv(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(e){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(e){this.vv(0)}rv(){const e=[],n=this.Yi===null?void 0:this.Yi;return(s=>{for(let r=0;r<s.length;++r){const i=s[r].Ws(this.Pt.ap(),n);for(let o=0;o<i.length;o++)e.push(i[o])}})(this.Pt.ap().Dt()),e}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.Pt.ap().Qt(),o=i.$(),a=i.Wc();o===a?u0(e,0,0,s,r,o):h3(e,0,0,s,r,o,a)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const r=Math.max(1,Math.floor(this.sv().S*s));let i;i=this.jp?n.width-r:0,e.fillRect(i,0,r,n.height)}dv(e){if(this.Op===null||this.Yi===null)return;const n=this.Yi.Da(),s=this.Yi.N(),r=this.sv(),i=this.jp?this.Op.width-r.C:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=s.borderColor;const c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),d=Math.round(r.C*a);o.beginPath();for(const f of n)o.rect(Math.floor(i*a),Math.round(f.Pa*l)-u,d,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.ev(),o.fillStyle=s.textColor??this.Ml.textColor,o.textAlign=this.jp?"right":"left",o.textBaseline="middle";const a=this.jp?Math.round(i-r.B):Math.round(i+r.C+r.B),l=n.map(c=>this.Fp.Di(o,c.Za));for(let c=n.length;c--;){const u=n[c];o.fillText(u.Za,a,u.Pa+l[c])}})}ov(){if(this.Op===null||this.Yi===null)return;let e=this.Op.height/2;const n=[],s=this.Yi.Dt().slice(),r=this.Pt.ap(),i=this.sv();this.Yi===r.$n()&&this.Pt.ap().Dt().forEach(l=>{r.Un(l)&&s.push(l)});const o=this.Yi.Ma()[0],a=this.Yi;s.forEach(l=>{const c=l.Ws(r,a);c.forEach(u=>{u.Wi(null),u.Hi()&&n.push(u)}),o===l&&c.length>0&&(e=c[0].Ii())}),n.forEach(l=>l.Wi(l.Ii())),this.Yi.N().alignLabels&&this.mv(n,i,e)}mv(e,n,s){if(this.Op===null)return;const r=e.filter(o=>o.Ii()<=s),i=e.filter(o=>o.Ii()>s);r.sort((o,a)=>a.Ii()-o.Ii()),r.length&&i.length&&i.push(r[0]),i.sort((o,a)=>o.Ii()-a.Ii());for(const o of e){const a=Math.floor(o.$t(n)/2),l=o.Ii();l>-a&&l<a&&o.Wi(a),l>this.Op.height-a&&l<this.Op.height+a&&o.Wi(this.Op.height-a)}W1(r,1,this.Op.height,n),W1(i,-1,this.Op.height,n)}fv(e){if(this.Op===null)return;const n=this.rv(),s=this.sv(),r=this.jp?"right":"left";n.forEach(i=>{i.Ui()&&i.Tt(ce(this.Yi)).nt(e,s,this.Fp,r)})}pv(e){if(this.Op===null||this.Yi===null)return;const n=this.Pt.qp().Qt(),s=[],r=this.Pt.ap(),i=n.uc().Ws(r,this.Yi);i.length&&s.push(i);const o=this.sv(),a=this.jp?"right":"left";s.forEach(l=>{l.forEach(c=>{c.Tt(ce(this.Yi)).nt(e,o,this.Fp,a)})})}vv(e){this.jf.style.cursor=e===1?"ns-resize":"default"}_l(){const e=this.nv();this.Hp<e&&this.Pt.qp().Qt().Ih(),this.Hp=e}ev(){return rf(this.Ml.fontSize,this.Ml.fontFamily)}}function H7(t,e){var n;return((n=t.Jh)==null?void 0:n.call(t,e))??[]}function V1(t,e){var n;return((n=t.Fs)==null?void 0:n.call(t,e))??[]}function Y1(t,e){var n;return((n=t.us)==null?void 0:n.call(t,e))??[]}function V7(t,e){var n;return((n=t.Xh)==null?void 0:n.call(t,e))??[]}class Fb{constructor(e,n){this.Op=ut({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new Rt,this.Cv=new Rt,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=e,this.Vv=n,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(s),this.Gp=mo(s,ut({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jp=mo(s,ut({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const i=this.Jp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new g0(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),xo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),xo(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return ce(this.Vv)}Lv(e){var n;this.Vv!==null&&this.Vv.t_().u(this),this.Vv=e,this.Vv!==null&&this.Vv.t_().i(Fb.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new W7(this.Iv,this.Vp),this.Mv.yt()):((n=this.Mv)==null||n.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const e=this.Vv.Wo();this.wv._s(ce(e))}if(this.gv!==null){const e=this.Vv.Ho();this.gv._s(ce(e))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(e){this.Vv&&this.Vv.Io(e)}sf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}Sf(e){this.Fv(),this.Hv(),this.Wv(e.localX,e.localY,e)}nf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}mf(e){this.Vv!==null&&(this.Fv(),this.Uv(e))}Xd(e){this.Vv!==null&&this.$v(this.Cv,e)}qd(e){this.Xd(e)}cf(e){this.Fv(),this.qv(e),this.Wv(e.localX,e.localY,e)}vf(e){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(e))}pf(e){this.Vv!==null&&this.Uv(e)}If(e){if(this.yv=!0,this.kv===null){const n={x:e.localX,y:e.localY};this.jv(n,n,e)}}Bf(e){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(e,n){if(!this.Vp.N().handleScale.pinch)return;const s=5*(n-this.Pv);this.Pv=n,this.ts().bc(e._t,s)}Mf(e){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const n=this.ts().uc();this.kv!==null&&n.Vt()&&(this.Rv={x:n.si(),y:n.ni()},this.kv={x:e.localX,y:e.localY})}_f(e){if(this.Vv===null)return;const n=e.localX,s=e.localY;if(this.kv===null)this.qv(e);else{this.Tv=!1;const r=ce(this.Rv),i=r.x+(n-this.kv.x),o=r.y+(s-this.kv.y);this.Wv(i,o,e)}}ff(e){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(e)}jn(e,n){const s=this.Vv;return s===null?null:S3(s,e,n)}Jv(e,n){ce(n==="left"?this.wv:this.gv).hv(ut({width:e,height:this.Op.height}))}Gf(){return this.Op}hv(e){ro(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Qv(){const e=ce(this.Vv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const n of e.Ma())if(e.Un(n)){const s=n.Ft();s!==null&&e.Fo(s),n.Ns()}for(const n of e.s_())n.Ns()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e!==null&&e.drawImage(o,n,s)}}lv(e){if(e===0||this.Vv===null)return;e>1&&this.Qv(),this.wv!==null&&this.wv.lv(e),this.gv!==null&&this.gv.lv(e);const n={colorSpace:this.Vp.N().layout.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=go(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i)}),this.Vv&&(this.tm(r,H7),this.im(r),this.tm(r,V1),this.tm(r,Y1)))}this.Jp.applySuggestedBitmapSize();const s=go(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.sm(s),this.tm(s,V7),this.tm(s,Y1))}nm(){return this.wv}rm(){return this.gv}cv(e,n){this.tm(e,n)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(e){this.$v(this.xv,e)}$v(e,n){const s=n.localX,r=n.localY;e.v()&&e.p(this.ts().Et().cu(s),{x:s,y:r},n)}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.ts(),o=i.$(),a=i.Wc();o===a?u0(e,0,0,s,r,a):h3(e,0,0,s,r,o,a)}im(e){const n=ce(this.Vv),s=n.i_().lr().Tt(n);s!==null&&s.nt(e,!1)}sm(e){this.hm(e,V1,ph,this.ts().uc())}tm(e,n){const s=ce(this.Vv),r=s.Dt(),i=s.s_();for(const o of i)this.hm(e,n,jm,o);for(const o of r)this.hm(e,n,jm,o);for(const o of i)this.hm(e,n,ph,o);for(const o of r)this.hm(e,n,ph,o)}hm(e,n,s,r){const i=ce(this.Vv),o=i.Qt().ac(),a=o!==null&&o.n_===r,l=o!==null&&a&&o.e_!==void 0?o.e_.Xn:void 0;Fm(n,c=>s(c,e,a,l),r,i)}Ov(){if(this.Vv===null)return;const e=this.Vp,n=this.Vv.Wo().N().visible,s=this.Vv.Ho().N().visible;n||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),s||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const r=e.Qt().Bc();n&&this.wv===null&&(this.wv=new H1(this,e.N(),r,"left"),this.Ev.appendChild(this.wv.Zf())),s&&this.gv===null&&(this.gv=new H1(this,e.N(),r,"right"),this.Av.appendChild(this.gv.Zf()))}am(e){return e.Ef&&this.yv||this.kv!==null}lm(e){return Math.max(0,Math.min(e,this.Op.width-1))}om(e){return Math.max(0,Math.min(e,this.Op.height-1))}Wv(e,n,s){this.ts().Tc(this.lm(e),this.om(n),s,ce(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(e,n,s){this.kv=e,this.Tv=!1,this.Wv(n.x,n.y,s);const r=this.ts().uc();this.Rv={x:r.si(),y:r.ni()}}ts(){return this.Vp.Qt()}Yv(e){if(!this.Sv)return;const n=this.ts(),s=this.ap();if(n.Ko(s,s.ks()),this.bv=null,this.Sv=!1,n.Pc(),this.Dv!==null){const r=performance.now(),i=n.Et();this.Dv.le(i.gu(),r),this.Dv.Ru(r)||n._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ce(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(e){if(this.Vv===null)return;const n=this.ts(),s=n.Et();if(s.Ki())return;const r=this.Vp.N(),i=r.handleScroll,o=r.kineticScroll;if((!i.pressedMouseMove||e.Ef)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Ef))return;const a=this.Vv.ks(),l=performance.now();if(this.bv!==null||this.am(e)||(this.bv={x:e.clientX,y:e.clientY,rd:l,_m:e.localX,um:e.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==e.clientX||this.bv.y!==e.clientY)){if(e.Ef&&o.touch||!e.Ef&&o.mouse){const c=s.mu();this.Dv=new U7(.2/c,7/c,.997,15/c),this.Dv.Pp(s.gu(),this.bv.rd)}else this.Dv=null;a.Ki()||n.Yo(this.Vv,a,e.localY),n.xc(e.localX),this.Sv=!0}this.Sv&&(a.Ki()||n.jo(this.Vv,a,e.localY),n.Cc(e.localX),this.Dv!==null&&this.Dv.Pp(s.gu(),l))}}class G1{constructor(e,n,s,r,i){this.xt=!0,this.Op=ut({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=e==="left",this.Ju=s.Bc,this.Ps=n,this.dm=r,this.fm=i,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=mo(this.jf,ut({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),xo(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(e){ro(this.Op,e)||(this.Op=e,this.Gp.resizeCanvasElement(e),this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.xt=!0)}lv(e){if(e<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const n=go(this.Gp,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(s=>{this._v(s),this.uv(s)})}Jf(){return this.Gp.bitmapSize}Qf(e,n,s){const r=this.Jf();r.width>0&&r.height>0&&e.drawImage(this.Gp.canvasElement,n,s)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(!this.dm())return;e.fillStyle=this.Ps.timeScale.borderColor;const i=Math.floor(this.Ju.N().S*s),o=Math.floor(this.Ju.N().S*r),a=this.jp?n.width-i:0;e.fillRect(a,0,i,o)}_v({context:e,bitmapSize:n}){u0(e,0,0,n.width,n.height,this.fm())}}function zb(t){return e=>{var n;return((n=e.ia)==null?void 0:n.call(e,t))??[]}}const Y7=zb("normal"),G7=zb("top"),q7=zb("bottom");class K7{constructor(e,n){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=ut({width:0,height:0}),this.gm=new Rt,this.Fp=new of(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=e,this.o_=n,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=mo(this.Sm,ut({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jp=mo(this.Sm,ut({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const r=this.Jp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new g0(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),xo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),xo(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(e){if(this.wm)return;this.wm=!0;const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.Mc(e.localX)}Mf(e){this.Sf(e)}xf(){const e=this.Vp.Qt();!e.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&e.kc())}cf(e){const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.yc(e.localX)}_f(e){this.cf(e)}vf(){this.wm=!1;const e=this.Vp.Qt();e.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||e.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(e,n,s){ro(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.gm.p(e)),this.pm!==null&&this.pm.hv(ut({width:n,height:e.height})),this.vm!==null&&this.vm.hv(ut({width:s,height:e.height}))}Tm(){const e=this.Rm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}lv(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=go(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i),this.Vm(r,q7)}),this.dv(r),this.Vm(r,Y7)),this.pm!==null&&this.pm.lv(e),this.vm!==null&&this.vm.lv(e)}this.Jp.applySuggestedBitmapSize();const s=go(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],s),this.Vm(s,G7))}Vm(e,n){const s=this.Vp.Qt().js();for(const r of s)Fm(n,i=>jm(i,e,!1,void 0),r,void 0);for(const r of s)Fm(n,i=>ph(i,e,!1,void 0),r,void 0)}_v({context:e,bitmapSize:n}){u0(e,0,0,n.width,n.height,this.Vp.Qt().Wc())}uv({context:e,bitmapSize:n,verticalPixelRatio:s}){if(this.Vp.N().timeScale.borderVisible){e.fillStyle=this.Im();const r=Math.max(1,Math.floor(this.Rm().S*s));e.fillRect(0,0,n.width,r)}}dv(e){const n=this.Vp.Qt().Et(),s=n.Da();if(!s||s.length===0)return;const r=this.o_.maxTickMarkWeight(s),i=this.Rm(),o=n.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.Im(),a.fillStyle=this.Im();const u=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();const f=Math.round(i.C*c);for(let p=s.length;p--;){const g=Math.round(s[p].coord*l);a.rect(g-d,0,u,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=i.S+i.C+i.A+i.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.ev();for(const c of s)if(c.weight<r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.Vp.N().timeScale.allowBoldLabels&&(a.font=this.Am());for(const c of s)if(c.weight>=r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Em(e,n,s){const r=this.Fp.Vi(e,s),i=r/2,o=Math.floor(n-i)+.5;return o<0?n+=Math.abs(0-o):o+r>this.Op.width&&(n-=Math.abs(this.Op.width-(o+r))),n}Bm(e,n){const s=this.Rm();for(const r of e)for(const i of r.cs())i.Tt().nt(n,s)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return rf(this.F(),this.Ps.fontFamily)}Am(){return rf(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new of,Dm:0});const e=this.M,n=this.ev();if(e.k!==n){const s=this.F();e.P=s,e.k=n,e.A=3*s/12,e.V=3*s/12,e.Ji=9*s/12,e.L=0,e.Dm=4*s/12,e.Gi.Bn()}return this.M}vv(e){this.jf.style.cursor=e===1?"ew-resize":"default"}xm(){const e=this.Vp.Qt(),n=e.N();n.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),n.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const s={Bc:this.Vp.Qt().Bc()},r=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,i=()=>e.Wc();n.leftPriceScale.visible&&this.pm===null&&(this.pm=new G1("left",n,s,r,i),this.Mm.appendChild(this.pm.Zf())),n.rightPriceScale.visible&&this.vm===null&&(this.vm=new G1("right",n,s,r,i),this.bm.appendChild(this.vm.Zf()))}}var _2;const X7=!!nl&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!nl&&((_2=navigator==null?void 0:navigator.userAgentData)!=null&&_2.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class Q7{constructor(e,n,s){var r;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new Rt,this.Cv=new Rt,this.Xu=new Rt,this.Um=null,this.$m=null,this.Dp=e,this.Ps=n,this.o_=s,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(r=this.kp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),tg(this.Ps)&&this.Km(!0),this.ts=new D7(this.Gu.bind(this),this.Ps,s),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new K7(this,this.o_),this.qm.appendChild(this.Zm.Zf());const i=n.autoSize&&this.Gm();let o=this.Ps.width,a=this.Ps.height;if(i||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Jm(o,a),this.Qm(),e.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.zm)this.qm.removeChild(e.Zf()),e.Xv().u(this),e.Zv().u(this),e.m();this.zm=[];for(const e of this.Lm)this.sw(e);this.Lm=[],ce(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(e,n,s=!1){if(this.il===n&&this.Mo===e)return;const r=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return ut({width:l-l%2,height:c-c%2})}(ut({width:e,height:n}));this.il=r.height,this.Mo=r.width;const i=this.il+"px",o=this.Mo+"px";ce(this.kp).style.height=i,ce(this.kp).style.width=o,this.qm.style.height=i,this.qm.style.width=o,s?this.ew(Qt.gn(),performance.now()):this.ts.Ih()}lv(e){e===void 0&&(e=Qt.gn());for(let n=0;n<this.zm.length;n++)this.zm[n].lv(e.en(n).tn);this.Ps.timeScale.visible&&this.Zm.lv(e.nn())}hr(e){var r;const n=tg(this.Ps);this.ts.hr(e);const s=tg(this.Ps);s!==n&&this.Km(s),(r=e.layout)!=null&&r.panes&&this.rw(),this.tw(),this.hw(e)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(e=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const n=this.lw(null),s=document.createElement("canvas");s.width=n.width,s.height=n.height;const r=ce(s.getContext("2d"));return this.lw(r,e),s}ow(e){return e==="left"&&!this._w()||e==="right"&&!this.uw()||this.zm.length===0?0:ce(e==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(e){this.$m=e,this.$m?this.ip().style.setProperty("cursor",e):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(e){return Fn(this.zm[e]).Gf()}rw(){this.Lm.forEach(e=>{e.yt()})}hw(e){(e.autoSize!==void 0||!this.Um||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Um&&this.Gm(),e.autoSize===!1&&this.Um!==null&&this.nw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Jm(e.width||this.Mo,e.height||this.il))}lw(e,n){let s=0,r=0;const i=this.zm[0],o=(l,c)=>{let u=0;for(let d=0;d<this.zm.length;d++){const f=this.zm[d],p=ce(l==="left"?f.nm():f.rm()),g=p.Jf();if(e!==null&&p.Qf(e,c,u,n),u+=g.height,d<this.zm.length-1){const x=this.Lm[d],w=x.Jf();e!==null&&x.Qf(e,c,u),u+=w.height}}};this._w()&&(o("left",0),s+=ce(i.nm()).Jf().width);for(let l=0;l<this.zm.length;l++){const c=this.zm[l],u=c.Jf();if(e!==null&&c.Qf(e,s,r,n),r+=u.height,l<this.zm.length-1){const d=this.Lm[l],f=d.Jf();e!==null&&d.Qf(e,s,r),r+=f.height}}s+=i.Jf().width,this.uw()&&(o("right",s),s+=ce(i.rm()).Jf().width);const a=(l,c,u)=>{ce(l==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(ce(e),c,u)};if(this.Ps.timeScale.visible){const l=this.Zm.Jf();if(e!==null){let c=0;this._w()&&(a("left",c,r),c=ce(i.nm()).Jf().width),this.Zm.Qf(e,c,r,n),c+=l.width,this.uw()&&a("right",c,r)}r+=l.height}return ut({width:s,height:r})}mw(){let e=0,n=0,s=0;for(const w of this.zm)this._w()&&(n=Math.max(n,ce(w.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(s=Math.max(s,ce(w.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),e+=w.Bo();n=Lm(n),s=Lm(s);const r=this.Mo,i=this.il,o=Math.max(r-n-s,0),a=1*this.Lm.length,l=this.Ps.timeScale.visible;let c=l?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const d=a+c,f=i<d?0:i-d,p=f/e;let g=0;const x=window.devicePixelRatio||1;for(let w=0;w<this.zm.length;++w){const m=this.zm[w];m.Lv(this.ts.$s()[w]);let y=0,v=0;v=w===this.zm.length-1?Math.ceil((f-g)*x)/x:Math.round(m.Bo()*p*x)/x,y=Math.max(v,2),g+=y,m.hv(ut({width:o,height:y})),this._w()&&m.Jv(n,"left"),this.uw()&&m.Jv(s,"right"),m.ap()&&this.ts.dc(m.ap(),y)}this.Zm.km(ut({width:l?o:0,height:c}),l?n:0,l?s:0),this.ts.Eo(o),this.Nm!==n&&(this.Nm=n),this.Fm!==s&&(this.Fm=s)}Km(e){e?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return X7?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.ww(e),s=n*e.deltaX/100,r=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.Ps.handleScale.mouseWheel){const i=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(o,i)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*s)}ew(e,n){var r;const s=e.nn();s===3&&this.gw(),s!==3&&s!==2||(this.Mw(e),this.bw(e,n),this.Zm.yt(),this.zm.forEach(i=>{i.Nv()}),((r=this.Wm)==null?void 0:r.nn())===3&&(this.Wm.vn(e),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,n),e=this.Wm,this.Wm=null)),this.lv(e)}bw(e,n){for(const s of e.pn())this.mn(s,n)}Mw(e){const n=this.ts.$s();for(let s=0;s<n.length;s++)e.en(s).sn&&n[s].Go()}mn(e,n){const s=this.ts.Et();switch(e.an){case 0:s.Au();break;case 1:s.zu(e.Wt);break;case 2:s.dn(e.Wt);break;case 3:s.fn(e.Wt);break;case 4:s.Su();break;case 5:e.Wt.Ru(n)||s.fn(e.Wt.Du(n))}}Gu(e){this.Wm!==null?this.Wm.vn(e):this.Wm=e,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame(n=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const s=this.Wm;this.Wm=null,this.ew(s,n);for(const r of s.pn())if(r.an===5&&!r.Wt.Ru(n)){this.Qt()._n(r.Wt);break}}}))}gw(){this.Qm()}sw(e){this.qm.removeChild(e.Zf()),e.m()}Qm(){const e=this.ts.$s(),n=e.length,s=this.zm.length;for(let r=n;r<s;r++){const i=Fn(this.zm.pop());this.qm.removeChild(i.Zf()),i.Xv().u(this),i.Zv().u(this),i.m();const o=this.Lm.pop();o!==void 0&&this.sw(o)}for(let r=s;r<n;r++){const i=new Fb(this,e[r]);if(i.Xv().i(this.Sw.bind(this,i),this),i.Zv().i(this.xw.bind(this,i),this),this.zm.push(i),r>0){const o=new $7(this,r-1,r);this.Lm.push(o),this.qm.insertBefore(o.Zf(),this.Zm.Zf())}this.qm.insertBefore(i.Zf(),this.Zm.Zf())}for(let r=0;r<n;r++){const i=e[r],o=this.zm[r];o.ap()!==i?o.Lv(i):o.zv()}this.tw(),this.mw()}Cw(e,n,s,r){var d;const i=new Map;e!==null&&this.ts.js().forEach(f=>{const p=f.Xs().Fr(e);p!==null&&i.set(f,p)});let o;if(e!==null){const f=(d=this.ts.Et().ss(e))==null?void 0:d.originalTime;f!==void 0&&(o=f)}const a=this.Qt().ac(),l=a!==null&&a.n_ instanceof p0?a.n_:void 0,c=a!==null&&a.e_!==void 0?a.e_.Kn:void 0,u=this.Pw(r);return{yw:o,Re:e??void 0,kw:n??void 0,Tw:u!==-1?u:void 0,Rw:l,Dw:i,Vw:c,Bw:s??void 0}}Pw(e){let n=-1;if(e)n=this.zm.indexOf(e);else{const s=this.Qt().uc().Us();s!==null&&(n=this.Qt().$s().indexOf(s))}return n}Sw(e,n,s,r){this.xv.p(()=>this.Cw(n,s,r,e))}xw(e,n,s,r){this.Cv.p(()=>this.Cw(n,s,r,e))}Xm(e,n,s){var r;this.dw(((r=this.Qt().ac())==null?void 0:r.h_)??null),this.Xu.p(()=>this.Cw(e,n,s))}tw(){const e=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=e}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.Jm(n.contentRect.width,n.contentRect.height)}),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function tg(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function J7(t){return t.open===void 0&&t.value===void 0}function Z7(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function q1(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.color!==void 0&&(i.R=n.color),i}function eO(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.lineColor!==void 0&&(i.vt=n.lineColor),n.topColor!==void 0&&(i.mr=n.topColor),n.bottomColor!==void 0&&(i.wr=n.bottomColor),i}function tO(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.topLineColor!==void 0&&(i.gr=n.topLineColor),n.bottomLineColor!==void 0&&(i.Mr=n.bottomLineColor),n.topFillColor1!==void 0&&(i.br=n.topFillColor1),n.topFillColor2!==void 0&&(i.Sr=n.topFillColor2),n.bottomFillColor1!==void 0&&(i.Cr=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(i.Pr=n.bottomFillColor2),i}function nO(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),r}function sO(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),n.borderColor!==void 0&&(r.Ht=n.borderColor),n.wickColor!==void 0&&(r.vr=n.wickColor),r}function rO(t,e,n,s,r){const i=Fn(r)(n),o=Math.max(...i),a=Math.min(...i),l=i[i.length-1],c=[l,o,a,l],{time:u,color:d,...f}=n;return{Re:e,wt:t,Wt:c,yw:s,se:f,R:d}}function Hl(t){return t.Wt!==void 0}function K1(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function Ii(t){return(e,n,s,r,i,o)=>function(a,l){return l?l(a):J7(a)}(s,o)?K1({wt:e,Re:n,yw:r},s):K1(t(e,n,s,r,i),s)}function X1(t){return{Candlestick:Ii(sO),Bar:Ii(nO),Area:Ii(eO),Baseline:Ii(tO),Histogram:Ii(q1),Line:Ii(q1),Custom:Ii(rO)}[t]}function Q1(t){return{Re:0,Ew:new Map,Hh:t}}function J1(t,e){if(t!==void 0&&t.length!==0)return{Aw:e.key(t[0].wt),zw:e.key(t[t.length-1].wt)}}function Z1(t){let e;return t.forEach(n=>{e===void 0&&(e=n.yw)}),Fn(e)}class iO{constructor(e){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=e}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(e,n){let s=this.Lw.size!==0,r=!1;const i=this.Ow.get(e);if(i!==void 0)if(this.Ow.size===1)s=!1,r=!0,this.Lw.clear();else for(const l of this.Fw)l.pointData.Ew.delete(e)&&(r=!0);let o=[];if(n.length!==0){const l=n.map(p=>p.time),c=this.o_.createConverterToInternalObj(n),u=X1(e.Rr()),d=e.ca(),f=e.fa();o=n.map((p,g)=>{const x=c(p.time),w=this.o_.key(x);let m=this.Lw.get(w);m===void 0&&(m=Q1(x),this.Lw.set(w,m),r=!0);const y=u(x,m.Re,p,l[g],d,f);return m.Ew.set(e,y),y})}s&&this.Hw(),this.Uw(e,o);let a=-1;if(r){const l=[];this.Lw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:Z1(c.Ew)})}),l.sort((c,u)=>this.o_.key(c.time)-this.o_.key(u.time)),a=this.$w(l)}return this.qw(e,a,function(l,c,u){const d=J1(l,u),f=J1(c,u);if(d!==void 0&&f!==void 0)return{Yw:!1,zh:d.zw>=f.zw&&d.Aw>=f.Aw}}(this.Ow.get(e),i,this.o_))}Ac(e){return this.Ww(e,[])}jw(e,n,s){const r=n;(function(w){w.yw===void 0&&(w.yw=w.time)})(r),this.o_.preprocessData(n);const i=this.o_.createConverterToInternalObj([n])(n.time),o=this.Nw.get(e);if(!s&&o!==void 0&&this.o_.key(i)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${i}`);let a=this.Lw.get(this.o_.key(i));if(s&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=a===void 0;a===void 0&&(a=Q1(i),this.Lw.set(this.o_.key(i),a));const c=X1(e.Rr()),u=e.ca(),d=e.fa(),f=c(i,a.Re,n,r.yw,u,d);a.Ew.set(e,f),s?this.Kw(e,f,a.Re):this.Xw(e,f);const p={zh:Hl(f),Yw:s};if(!l)return this.qw(e,-1,p);const g={timeWeight:0,time:a.Hh,pointData:a,originalTime:Z1(a.Ew)},x=tl(this.Fw,this.o_.key(g.time),(w,m)=>this.o_.key(w.time)<m);this.Fw.splice(x,0,g);for(let w=x;w<this.Fw.length;++w)Md(this.Fw[w].pointData,w);return this.o_.fillWeightsForPoints(this.Fw,x),this.qw(e,x,p)}Zw(e,n){const s=this.Ow.get(e);if(s===void 0||n<=0)return[[],this.Gw()];n=Math.min(n,s.length);const r=s.splice(-n).reverse();s.length===0?this.Nw.delete(e):this.Nw.set(e,s[s.length-1].wt);for(const i of r){const o=this.Lw.get(this.o_.key(i.wt));if(o&&(o.Ew.delete(e),o.Ew.size===0)){this.Lw.delete(this.o_.key(o.Hh)),this.Fw.splice(o.Re,1);for(let a=o.Re;a<this.Fw.length;++a)Md(this.Fw[a].pointData,a)}}return[r,this.qw(e,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(e,n){let s=this.Ow.get(e);s===void 0&&(s=[],this.Ow.set(e,s));const r=s.length!==0?s[s.length-1]:null;r===null||this.o_.key(n.wt)>this.o_.key(r.wt)?Hl(n)&&s.push(n):Hl(n)?s[s.length-1]=n:s.splice(-1,1),this.Nw.set(e,n.wt)}Kw(e,n,s){const r=this.Ow.get(e);if(r===void 0)return;const i=tl(r,s,(o,a)=>o.Re<a);Hl(n)?r[i]=n:r.splice(i,1)}Uw(e,n){n.length!==0?(this.Ow.set(e,n.filter(Hl)),this.Nw.set(e,n[n.length-1].wt)):(this.Ow.delete(e),this.Nw.delete(e))}Hw(){for(const e of this.Fw)e.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(e.time))}$w(e){let n=-1;for(let s=0;s<this.Fw.length&&s<e.length;++s){const r=this.Fw[s],i=e[s];if(this.o_.key(r.time)!==this.o_.key(i.time)){n=s;break}i.timeWeight=r.timeWeight,Md(i.pointData,s)}if(n===-1&&this.Fw.length!==e.length&&(n=Math.min(this.Fw.length,e.length)),n===-1)return-1;for(let s=n;s<e.length;++s)Md(e[s].pointData,s);return this.o_.fillWeightsForPoints(e,n),this.Fw=e,n}Jw(){if(this.Ow.size===0)return null;let e=0;return this.Ow.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].Re))}),e}qw(e,n,s){const r=this.Gw();if(n!==-1)this.Ow.forEach((i,o)=>{r.Oo.set(o,{se:i,Qw:o===e?s:void 0})}),this.Ow.has(e)||r.Oo.set(e,{se:[],Qw:s}),r.Et.tg=this.Fw,r.Et.ig=n;else{const i=this.Ow.get(e);r.Oo.set(e,{se:i||[],Qw:s})}return r}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function Md(t,e){t.Re=e,t.Ew.forEach(n=>{n.Re=e})}function oO(t,e){return t.wt<e}function aO(t,e){return e<t.wt}function lO(t,e,n){const s=e.Uh(),r=e.bi(),i=tl(t,s,oO),o=y3(t,r,aO);if(!n)return{from:i,to:o};let a=i,l=o;return i>0&&i<t.length&&t[i].wt>=s&&(a=i-1),o>0&&o<t.length&&t[o-1].wt<=r&&(l=o+1),{from:a,to:l}}class cO{constructor(e,n,s){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=e,this.Qn=n,this.ag=s}yt(e){this.sg=!0,e==="data"&&(this.ng=!0),e==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const e=this.Jn.Ft(),n=this.Qn.Et();if(this.ug(),n.Ki()||e.Ki())return;const s=n.Pe();if(s===null||this.Jn.Xs().zr()===0)return;const r=this.Jn.zt();r!==null&&(this.hg=lO(this.rg,s,this.ag),this.fg(e,n,r.Wt),this.pg())}}class uO{constructor(e,n){this.vg=e,this.Yi=n}nt(e,n,s){this.vg.draw(e,this.Yi,n,s)}}class dO extends cO{constructor(e,n,s){super(e,n,!1),this.sh=s,this.og=new uO(this.sh.renderer(),r=>{const i=e.zt();return i===null?null:e.Ft().Nt(r,i.Wt)})}da(e){return this.sh.priceValueBuilder(e)}pa(e){return this.sh.isWhitespace(e)}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(n=>({wt:n.Re,_t:NaN,...e.Dr(n.Re),mg:n.se}))}fg(e,n){n.uu(this.rg,RR(this.hg))}pg(){this.sh.update({bars:this.rg.map(hO),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function hO(t){return{x:t._t,time:t.wt,originalData:t.mg,barColor:t.cr}}const fO={color:"#2196f3"},pO=(t,e,n)=>{const s=ri(n);return new dO(t,e,s)};function Bb(t){const e={value:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function ek(t){const e=Bb(t);return t.R!==void 0&&(e.color=t.R),e}function gO(t){const e=Bb(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function mO(t){const e=Bb(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function P3(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function xO(t){const e=P3(t);return t.R!==void 0&&(e.color=t.R),e}function bO(t){const e=P3(t),{R:n,Ht:s,vr:r}=t;return n!==void 0&&(e.color=n),s!==void 0&&(e.borderColor=s),r!==void 0&&(e.wickColor=r),e}function gh(t){return{Area:gO,Line:ek,Baseline:mO,Histogram:ek,Bar:xO,Candlestick:bO,Custom:yO}[t]}function yO(t){const e=t.yw;return{...t.se,time:e}}const vO={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},wO={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},kO={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:d3,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},ng={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},SO={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function tk(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:kO,crosshair:vO,grid:wO,overlayPriceScales:{...ng},leftPriceScale:{...ng,visible:!1},rightPriceScale:{...ng,visible:!0},timeScale:SO,localization:{locale:nl?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class T3{constructor(e,n,s){this.Hf=e,this.wg=n,this.gg=s??0}applyOptions(e){this.Hf.Qt().oc(this.wg,e,this.gg)}options(){return this.Yi().N()}width(){return h0(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Fl(new kn(e.from,e.to))}getVisibleRange(){let e,n,s=this.Yi().Qe();if(s===null)return null;if(this.Yi().Ja()){const r=this.Yi().fo(),i=_3(r);s=na(s,this.Yi().tl()),e=Number((Math.round(s.$e()/r)*r).toFixed(i)),n=Number((Math.round(s.qe()/r)*r).toFixed(i))}else e=s.$e(),n=s.qe();return{from:e,to:n}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return ce(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class _O{constructor(e,n,s,r){this.Hf=e,this.Pt=s,this.Mg=n,this.bg=r}getHeight(){return this.Pt.$t()}setHeight(e){const n=this.Hf.Qt(),s=n.Uc(this.Pt);n.vc(s,e)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(e){this.Pt.Io(e),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(e){const n=this.paneIndex();n!==e&&(Jt(e>=0&&e<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(n,e))}getSeries(){return this.Pt.Oo().map(e=>this.Mg(e))??[]}getHTMLElement(){const e=this.Hf.$f();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Zf():null}attachPrimitive(e){this.Pt._a(e),e.attached&&e.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(e){this.Pt.ua(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new T3(this.Hf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,n={},s=0){return this.bg.addCustomSeries(e,n,s)}addSeries(e,n={}){return this.bg.addSeries(e,n,this.paneIndex())}}const CO={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class nk{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}Sg(){return this.ir}}class EO{constructor(e,n,s,r,i,o){this.xg=new Rt,this.Jn=e,this.Cg=n,this.Pg=s,this.o_=i,this.bg=r,this.yg=o}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Ts(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new pa(new Oc(e.from,e.to)).y_(),s=this.Jn.Xs();if(s.Ki())return null;const r=s.Fr(n.Uh(),1),i=s.Fr(n.bi(),-1),o=ce(s.Lr()),a=ce(s.Ks());if(r!==null&&i!==null&&r.Re>i.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:r===null||r.Re===o?e.from-o:r.Re-o,barsAfter:i===null||i.Re===a?a-e.to:a-i.Re};return r!==null&&i!==null&&(l.from=r.yw,l.to=i.yw),l}setData(e){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,e),this.Tg("full")}update(e,n=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,e,n),this.Tg("update")}pop(e=1){const n=this.Cg.Dg(this.Jn,e);n.length!==0&&this.Tg("update");const s=gh(this.seriesType());return n.map(r=>s(r))}dataByIndex(e,n){const s=this.Jn.Xs().Fr(e,n);return s===null?null:gh(this.seriesType())(s)}data(){const e=gh(this.seriesType());return this.Jn.Xs().Hr().map(n=>e(n))}subscribeDataChanged(e){this.xg.i(e)}unsubscribeDataChanged(e){this.xg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return wr(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(e){const n=Gn(wr(CO),e),s=this.Jn.Oh(n);return new nk(s)}removePriceLine(e){this.Jn.Nh(e.Sg())}priceLines(){return this.Jn.Fh().map(e=>new nk(e))}seriesType(){return this.Jn.Rr()}lastValueData(e){const n=this.Jn.ye(e);return n.ke?{noData:!0}:{noData:!1,price:n.gt,color:n.R}}attachPrimitive(e){this.Jn._a(e),e.attached&&e.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ua(e),e.detached&&e.detached(),this.Jn.Qt().Ih()}getPane(){const e=this.Jn,n=ce(this.Jn.Qt().Hn(e));return this.yg(n)}moveToPane(e){this.Jn.Qt().Nc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const n=this.Jn.Qt().Hn(this.Jn);n!==null&&n.Qo(this.Jn,e)}Tg(e){this.xg.v()&&this.xg.p(e)}}class PO{constructor(e,n,s){this.Vg=new Rt,this.z_=new Rt,this.gm=new Rt,this.ts=e,this.uh=e.Et(),this.Zm=n,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=s}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(e,n){n?this.uh.Tu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.nu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},s=this.uh.au(n);this.ts.Lc(s)}getVisibleLogicalRange(){const e=this.uh.su();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){Jt(e.from<=e.to,"The from index cannot be after the to index."),this.ts.Lc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(e){const n=this.ts.Et();return n.Ki()?null:n.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.cu(e)}timeToIndex(e,n){const s=this.o_.convertHorzItemToInternal(e);return this.uh.Q_(s,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.uh.qt(n)}coordinateToTime(e){const n=this.ts.Et(),s=n.cu(e),r=n.ss(s);return r===null?null:r.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(e){this.Vg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.Vg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.gm.i(e)}unsubscribeSizeChange(e){this.gm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...wr(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(e){this.gm.p(e.width,e.height)}}function sk(t){return function(e){if(kd(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:r}=e.handleScale;kd(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),kd(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const n=e.handleScroll;kd(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class TO{constructor(e,n,s){this.Ag=new Map,this.zg=new Map,this.Lg=new Rt,this.Og=new Rt,this.Ng=new Rt,this.qu=new WeakMap,this.Fg=new iO(n);const r=s===void 0?wr(tk()):Gn(wr(tk()),sk(s));this.Wg=n,this.Hf=new Q7(e,r,n),this.Hf.Xv().i(o=>{this.Lg.v()&&this.Lg.p(this.Hg(o()))},this),this.Hf.Zv().i(o=>{this.Og.v()&&this.Og.p(this.Hg(o()))},this),this.Hf.cc().i(o=>{this.Ng.v()&&this.Ng.p(this.Hg(o()))},this);const i=this.Hf.Qt();this.Ug=new PO(i,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(e,n,s){this.autoSizeActive()||this.Hf.Jm(e,n,s)}addCustomSeries(e,n={},s=0){const r=(i=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...fO,...i.defaultOptions()},$g:pO,qg:i}))(ri(e));return this.Yg(r,n,s)}addSeries(e,n={},s=0){return this.Yg(e,n,s)}removeSeries(e){const n=Fn(this.Ag.get(e)),s=this.Fg.Ac(n);this.Hf.Qt().Ac(n),this.jg(s),this.Ag.delete(e),this.zg.delete(n)}kg(e,n){this.jg(this.Fg.Ww(e,n))}Rg(e,n,s){this.jg(this.Fg.jw(e,n,s))}Dg(e,n){const[s,r]=this.Fg.Zw(e,n);return s.length!==0&&this.jg(r),s}subscribeClick(e){this.Lg.i(e)}unsubscribeClick(e){this.Lg._(e)}subscribeCrosshairMove(e){this.Ng.i(e)}unsubscribeCrosshairMove(e){this.Ng._(e)}subscribeDblClick(e){this.Og.i(e)}unsubscribeDblClick(e){this.Og._(e)}priceScale(e,n=0){return new T3(this.Hf,e,n)}timeScale(){return this.Ug}applyOptions(e){this.Hf.hr(sk(e))}options(){return this.Hf.N()}takeScreenshot(e=!1,n=!1){let s,r;try{n||(s=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),r=this.Hf.aw(e)}finally{n||s===void 0||this.Hf.Qt().hr({crosshair:{mode:s}})}return r}addPane(e=!1){const n=this.Hf.Qt().$c();return n.zo(e),this.Kg(n)}removePane(e){this.Hf.Qt().fc(e)}swapPanes(e,n){this.Hf.Qt().mc(e,n)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map(e=>this.Kg(e))}paneSize(e=0){const n=this.Hf.pw(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,s){const r=this.Ag.get(s);if(r===void 0)return;const i=this.Hf.Qt().Hn(r);i!==null&&this.Hf.Qt().Rc(e,n,i)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(e,n={},s=0){Jt(e.$g!==void 0),function(l){if(l===void 0||l.type==="custom")return;const c=l;c.minMove!==void 0&&c.precision===void 0&&(c.precision=_3(c.minMove))}(n.priceFormat),e.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(n);const r=Gn(wr(c3),wr(e.defaultOptions),n),i=e.$g,o=new p0(this.Hf.Qt(),e.type,r,i,e.qg);this.Hf.Qt().Ic(o,s);const a=new EO(o,this,this,this,this.Wg,l=>this.Kg(l));return this.Ag.set(a,o),this.zg.set(o,a),a}jg(e){const n=this.Hf.Qt();n.Vc(e.Et._u,e.Et.tg,e.Et.ig),e.Oo.forEach((s,r)=>r.ht(s.se,s.Qw)),n.Et().K_(),n.vu()}Xg(e){return Fn(this.zg.get(e))}Hg(e){const n=new Map;e.Dw.forEach((r,i)=>{const o=i.Rr(),a=gh(o)(r);if(o!=="Custom")Jt(Z7(a));else{const l=i.fa();Jt(!l||l(a)===!1)}n.set(this.Xg(i),a)});const s=e.Rw!==void 0&&this.zg.has(e.Rw)?this.Xg(e.Rw):void 0;return{time:e.yw,logical:e.Re,point:e.kw,paneIndex:e.Tw,hoveredSeries:s,hoveredObjectId:e.Vw,seriesData:n,sourceEvent:e.Bw}}Kg(e){let n=this.qu.get(e);return n||(n=new _O(this.Hf,s=>this.Xg(s),e,this),this.qu.set(e,n)),n}}function MO(t){if(Du(t)){const e=document.getElementById(t);return Jt(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function IO(t,e,n){const s=MO(t),r=new TO(s,e,n);return e.setOptions(r.options()),r}function NO(t,e){return IO(t,new B1,B1.ld(e))}({...c3});const M3=k.forwardRef(({initialData:t=[],symbol:e="BTC/USDC",height:n=500,showVolume:s=!0},r)=>{const i=k.useRef(null),o=k.useRef(null),a=k.useRef(null),l=k.useRef(null),[c,u]=k.useState(null),d=x=>typeof x=="number"?x:Te(x),f=x=>({time:Math.floor((x.open_time||x.close_time||Date.now())/1e3),open:d(x.open),high:d(x.high),low:d(x.low),close:d(x.close)}),p=x=>{if(!x.volume)return null;const w=Math.floor((x.open_time||x.close_time||Date.now())/1e3),m=typeof x.volume=="number"?x.volume:Te(x.volume),y=d(x.close),v=d(x.open),b=y>=v;return{time:w,value:m,color:b?"#26a69a80":"#ef535080"}},g=x=>{const w=f(x),m=s?p(x):null;a.current&&(a.current.update(w),u(w.close)),s&&l.current&&m&&l.current.update(m)};return k.useImperativeHandle(r,()=>({updateChart:g})),k.useEffect(()=>{if(!i.current)return;const x=NO(i.current,{width:i.current.clientWidth,height:n,layout:{background:{color:"#1e1e1e"},textColor:"#d1d4dc"},grid:{vertLines:{color:"#2a2e39"},horzLines:{color:"#2a2e39"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2e39"},timeScale:{borderColor:"#2a2e39",timeVisible:!0,secondsVisible:!1}}),w=x.addSeries("Candlestick",{upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"});let m=null;s&&(m=x.addSeries("Histogram",{color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""})),t.length>0&&(w.setData(t),c===null&&t.length>0&&u(t[t.length-1].close)),o.current=x,a.current=w,l.current=m;const y=()=>{i.current&&o.current&&o.current.applyOptions({width:i.current.clientWidth})};return window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y),x.remove()}},[n,s]),k.useEffect(()=>{a.current&&t.length>0&&(a.current.setData(t),t.length>0&&u(t[t.length-1].close))},[t]),h.jsxs("div",{style:{position:"relative",width:"100%"},children:[h.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"1.2rem",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:h.jsxs("span",{children:[e," Live Kline Chart",c!==null&&` - Current: $${c.toFixed(2)}`]})}),h.jsx("div",{ref:i,style:{position:"relative",width:"100%"}})]})});M3.displayName="KlineChart";function AO(){var $e,Ve,sn,mn;const[t,e]=k.useState(c0),[n,s]=k.useState(()=>localStorage.getItem("authToken")||""),[r,i]=k.useState(Db),[o,a]=k.useState(""),[l,c]=k.useState("BTC/USDC"),[u,d]=k.useState("1m"),[f,p]=k.useState("300"),[g,x]=k.useState(!1),[w,m]=k.useState([]),[y,v]=k.useState([]),[b,S]=k.useState(new Set),[_,E]=k.useState([]),[P,M]=k.useState(!1),C=k.useRef(null),N=k.useRef(0),I=Ou,B=k.useRef(null),[W,j]=k.useState([]),{walletAddress:z,authToken:F}=vl(),{markets:A}=To({baseURL:I,sessionToken:"",autoFetchMarkets:!0}),$=A.length>0?((($e=A.find(se=>se.active))==null?void 0:$e.market_id)??A[0].market_id)||(((sn=(Ve=A.find(se=>se.active))==null?void 0:Ve.id)==null?void 0:sn.toString())??((mn=A[0].id)==null?void 0:mn.toString())??""):null;k.useEffect(()=>{$&&!o&&a($)},[$]),k.useEffect(()=>{F&&s(F)},[F]),k.useEffect(()=>{const se=H=>{H.key==="authToken"&&H.newValue&&s(H.newValue)};window.addEventListener("storage",se);const J=setInterval(()=>{const H=localStorage.getItem("authToken");H&&H!==n&&s(H)},1e3);return()=>{window.removeEventListener("storage",se),clearInterval(J)}},[n]),k.useEffect(()=>{n&&n.trim()!==""&&localStorage.setItem("authToken",n)},[n]);const T=(se,J,H,Ne,lt)=>{const Re={id:N.current++,timestamp:Date.now(),channel:se,data:J,type:H,step:lt};Ne?v(qt=>[...qt.slice(-99),Re]):m(qt=>[...qt.slice(-99),Re])},G=(se,J,H,Ne)=>{E(lt=>[...lt,{step:se,status:J,message:H,timestamp:Date.now(),details:Ne}])},D=()=>{E([])},R=async()=>{var lt;if((lt=C.current)!=null&&lt.isConnected()){T("connection","Already connected","info",!1);return}if(M(!0),D(),G("1","in-progress","Validating configuration..."),T("connection","Starting connection process...","debug",!1,"Step 1: Validation"),!t||!t.trim()){G("1","error","WebSocket URL is required"),T("connection","Error: WebSocket URL is required","error",!1,"Step 1: Validation"),M(!1);return}try{const Re=new URL(t);if(Re.protocol!=="ws:"&&Re.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol");G("1","success",`URL format valid: ${t}`),T("connection",`URL validated: ${t}`,"debug",!1,"Step 1: Validation")}catch(Re){G("1","error",`Invalid URL format: ${Re.message}`),T("connection",`Error: Invalid URL format - ${Re.message}`,"error",!1,"Step 1: Validation"),M(!1);return}G("2","in-progress","Building connection URL with parameters...");const se=[];n&&se.push(`token=${encodeURIComponent(n)}`),z&&se.push(`wallet=${encodeURIComponent(z)}`),r&&se.push(`device_id=${encodeURIComponent(r)}`);const J=t.includes("?")?"&":"?",H=se.length>0?`${t}${J}${se.join("&")}`:t;if(G("2","success",`Connection URL: ${H}`),T("connection",`Connection URL: ${H}`,"debug",!1,"Step 2: URL Construction"),se.length>0?T("connection",`Query parameters: ${se.join(", ")}`,"debug",!1,"Step 2: URL Construction"):T("connection","No query parameters (authToken, walletAddress, deviceID)","warning",!1,"Step 2: URL Construction"),G("3","in-progress","Cleaning up existing connection..."),C.current)try{C.current.disconnect(),G("3","success","Previous connection cleaned up"),T("connection","Previous connection cleaned up","debug",!1,"Step 3: Cleanup")}catch{G("3","success","No previous connection to clean up"),T("connection","No previous connection found","debug",!1,"Step 3: Cleanup")}else G("3","success","No previous connection to clean up");G("4","in-progress","Creating SubscriptionClient instance...");try{C.current=new Eo({url:t,authToken:n||void 0,walletAddress:z||void 0,deviceID:r||void 0}),G("4","success","SubscriptionClient created"),T("connection","SubscriptionClient instance created","debug",!1,"Step 4: Client Creation"),T("connection",`Config: ${JSON.stringify({url:t,hasToken:!!n,hasWallet:!!z,deviceID:r},null,2)}`,"debug",!1,"Step 4: Client Creation")}catch(Re){G("4","error",`Failed to create client: ${Re.message}`),T("connection",`Error creating client: ${Re.message}`,"error",!1,"Step 4: Client Creation"),M(!1);return}G("5","in-progress","Initiating WebSocket connection..."),T("connection","Initiating WebSocket handshake...","debug",!1,"Step 5: Connection"),T("connection","Browser will attempt to upgrade HTTP connection to WebSocket","debug",!1,"Step 5: Connection");const Ne=Date.now();try{await C.current.connect();const Re=Date.now()-Ne,qt=C.current.isConnected(),Fe=C.current.getState();T("connection",`Connection attempt completed in ${Re}ms`,"debug",!1,"Step 5: Connection"),T("connection",`Connection state: ${Fe}`,"debug",!1,"Step 5: Connection"),x(qt),qt?(G("5","success",`WebSocket connected successfully (${Re}ms)`),T("connection"," WebSocket connected successfully!","success",!1,"Step 5: Connection"),T("connection",`Connection established in ${Re}ms`,"success",!1,"Step 5: Connection")):(G("5","error","Connection completed but state is not connected"),T("connection"," Connection attempt completed but state is not connected","error",!1,"Step 5: Connection"),T("connection",`Current state: ${Fe}`,"error",!1,"Step 5: Connection"))}catch(Re){const qt=Date.now()-Ne,Fe=Re.message||String(Re);let pe="";Fe.includes("abnormal closure")?pe=`The server closed the connection abnormally. Possible causes:
- Server is not running
- Wrong URL or port
- Network connectivity issues
- Firewall blocking the connection`:Fe.includes("protocol error")?pe="WebSocket protocol error. The server may not support WebSocket connections.":Fe.includes("policy violation")?pe="Connection closed due to policy violation. Check authentication requirements.":Fe.includes("server error")?pe="Server returned an error. Check server logs for details.":(Fe.includes("Unauthorized")||Fe.includes("401"))&&(pe=`Authentication failed. Possible causes:
- Missing or invalid JWT token (if server requires authentication)
- Token expired
- Server is in production mode requiring JWT authentication
Note: If server uses JWT auth, you must provide a valid token in the authToken field.`),G("5","error",`Connection failed: ${Fe}`),T("connection",` Connection error: ${Fe}`,"error",!1,"Step 5: Connection"),pe&&T("connection",`Error details:
${pe}`,"error",!1,"Step 5: Connection"),T("connection",`Connection failed after ${qt}ms`,"error",!1,"Step 5: Connection"),T("connection",`Full error: ${JSON.stringify(Re,Object.getOwnPropertyNames(Re),2)}`,"error",!1,"Step 5: Connection"),x(!1)}finally{M(!1)}},X=()=>{if(C.current)try{C.current.disconnect(),x(!1),S(new Set),T("connection","WebSocket disconnected","info",!1)}catch(se){T("connection",`Disconnect error: ${se.message}`,"error",!1)}},K=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("orderbook","Not connected. Please connect first.","error",!1);return}if(!o){T("orderbook","Please select a market first","error",!1);return}const se=H=>{T("orderbook",H,"success",!1)};try{C.current.subscribeOrderbook(o,se,!0),S(H=>new Set([...H,"orderbook"])),T("orderbook",`Subscribed to orderbook for market ${o}`,"success",!1)}catch(H){T("orderbook",`Subscription error: ${H.message}`,"error",!1)}},Y=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&o)try{C.current.unsubscribeOrderbook(o),S(J=>{const H=new Set(J);return H.delete("orderbook"),H}),T("orderbook","Unsubscribed from orderbook","info",!1)}catch(J){T("orderbook",`Unsubscribe error: ${J.message}`,"error",!1)}},V=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("trades","Not connected. Please connect first.","error",!1);return}if(!o){T("trades","Please select a market first","error",!1);return}const se=H=>{T("trades",H,"success",!1)};try{C.current.subscribeTrades(o,se),S(H=>new Set([...H,"trades"])),T("trades",`Subscribed to trades for market ${o}`,"success",!1)}catch(H){T("trades",`Subscription error: ${H.message}`,"error",!1)}},Q=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&o)try{C.current.unsubscribeTrades(o),S(J=>{const H=new Set(J);return H.delete("trades"),H}),T("trades","Unsubscribed from trades","info",!1)}catch(J){T("trades",`Unsubscribe error: ${J.message}`,"error",!1)}},ee=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("ticker","Not connected. Please connect first.","error",!1);return}if(!o){T("ticker","Please select a market first","error",!1);return}const se=H=>{T("ticker",H,"success",!1)};try{C.current.subscribeTicker(o,se),S(H=>new Set([...H,"ticker"])),T("ticker",`Subscribed to ticker for market ${o}`,"success",!1)}catch(H){T("ticker",`Subscription error: ${H.message}`,"error",!1)}},fe=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&o)try{C.current.unsubscribeTicker(o),S(J=>{const H=new Set(J);return H.delete("ticker"),H}),T("ticker","Unsubscribed from ticker","info",!1)}catch(J){T("ticker",`Unsubscribe error: ${J.message}`,"error",!1)}},je=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("last_price","Not connected. Please connect first.","error",!1);return}if(!o){T("last_price","Please select a market first","error",!1);return}const se=H=>{T("last_price",H,"success",!1)};try{C.current.subscribeLastPrice(o,se,!0),S(H=>new Set([...H,"last_price"])),T("last_price",`Subscribed to last price for market ${o}`,"success",!1)}catch(H){T("last_price",`Subscription error: ${H.message}`,"error",!1)}},Se=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&o)try{C.current.unsubscribeLastPrice(o),S(J=>{const H=new Set(J);return H.delete("last_price"),H}),T("last_price","Unsubscribed from last price","info",!1)}catch(J){T("last_price",`Unsubscribe error: ${J.message}`,"error",!1)}},Ce=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("user_updates","Not connected. Please connect first.","error",!0);return}if(!z){T("user_updates","Wallet address required for position updates (positions channel)","error",!0);return}const se=H=>{T("user_updates",H,"success",!0)};try{C.current.subscribeUserUpdates(se),S(H=>new Set([...H,"user_updates"])),T("user_updates","Subscribed to user updates (positions, orders, etc.)","success",!0)}catch(H){T("user_updates",`Subscription error: ${H.message}`,"error",!0)}},Ie=()=>{var se;if((se=C.current)!=null&&se.isConnected())try{C.current.unsubscribeUserUpdates(),S(J=>{const H=new Set(J);return H.delete("user_updates"),H}),T("user_updates","Unsubscribed from user updates","info",!0)}catch(J){T("user_updates",`Unsubscribe error: ${J.message}`,"error",!0)}},gt=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("funding_rate","Not connected. Please connect first.","error",!1);return}if(!l){T("funding_rate","Please enter a symbol first","error",!1);return}const se=H=>{T("funding_rate",H,"success",!1)};try{C.current.subscribeFundingRate(l,se),S(H=>new Set([...H,"funding_rate"])),T("funding_rate",`Subscribed to funding rate for ${l}`,"success",!1)}catch(H){T("funding_rate",`Subscription error: ${H.message}`,"error",!1)}},L=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&l)try{C.current.unsubscribeFundingRate(l),S(J=>{const H=new Set(J);return H.delete("funding_rate"),H}),T("funding_rate","Unsubscribed from funding rate","info",!1)}catch(J){T("funding_rate",`Unsubscribe error: ${J.message}`,"error",!1)}},ae=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("buckets","Not connected. Please connect first.","error",!0);return}if(!z){T("buckets","Wallet address required for buckets subscription","error",!0);return}const se=H=>{T("buckets",H,"success",!0)};try{C.current.subscribeBuckets(se),S(H=>new Set([...H,"buckets"])),T("buckets","Subscribed to buckets","success",!0)}catch(H){T("buckets",`Subscription error: ${H.message}`,"error",!0)}},ue=()=>{var se;if((se=C.current)!=null&&se.isConnected())try{C.current.unsubscribeBuckets(),S(J=>{const H=new Set(J);return H.delete("buckets"),H}),T("buckets","Unsubscribed from buckets","info",!0)}catch(J){T("buckets",`Unsubscribe error: ${J.message}`,"error",!0)}},ye=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("deviation","Not connected. Please connect first.","error",!1);return}if(!l){T("deviation","Please enter a symbol first","error",!1);return}const se=H=>{T("deviation",H,"success",!1)};try{C.current.subscribeDeviation(l,se),S(H=>new Set([...H,"deviation"])),T("deviation",`Subscribed to deviation for ${l}`,"success",!1)}catch(H){T("deviation",`Subscription error: ${H.message}`,"error",!1)}},de=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&l)try{C.current.unsubscribeDeviation(l),S(J=>{const H=new Set(J);return H.delete("deviation"),H}),T("deviation","Unsubscribed from deviation","info",!1)}catch(J){T("deviation",`Unsubscribe error: ${J.message}`,"error",!1)}},me=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("index_price","Not connected. Please connect first.","error",!1);return}if(!l){T("index_price","Please enter a symbol first","error",!1);return}const se=H=>{T("index_price",H,"success",!1)};try{C.current.subscribeIndexPrice(l,se),S(H=>new Set([...H,"index_price"])),T("index_price",`Subscribed to index price for ${l}`,"success",!1)}catch(H){T("index_price",`Subscription error: ${H.message}`,"error",!1)}},U=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&l)try{C.current.unsubscribeIndexPrice(l),S(J=>{const H=new Set(J);return H.delete("index_price"),H}),T("index_price","Unsubscribed from index price","info",!1)}catch(J){T("index_price",`Unsubscribe error: ${J.message}`,"error",!1)}},ie=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("kline","Not connected. Please connect first.","error",!1);return}if(!o){T("kline","Please select a market first","error",!1);return}if(!u){T("kline","Please select an interval first","error",!1);return}const se=H=>{if(T("kline",H,"success",!1),B.current&&H){const Ne={open_time:H.open_time||H.timestamp||Date.now(),close_time:H.close_time,open:H.open,high:H.high,low:H.low,close:H.close,volume:H.volume};B.current.updateChart(Ne);const Re={time:Math.floor((Ne.open_time||Date.now())/1e3),open:typeof Ne.open=="string"?Te(Ne.open):Ne.open,high:typeof Ne.high=="string"?Te(Ne.high):Ne.high,low:typeof Ne.low=="string"?Te(Ne.low):Ne.low,close:typeof Ne.close=="string"?Te(Ne.close):Ne.close};j(qt=>{const Fe=[...qt];return Fe.length===0||Fe[Fe.length-1].time!==Re.time?Fe.push(Re):Fe[Fe.length-1]=Re,Fe})}};try{C.current.subscribeKline(o,u,se),S(H=>new Set([...H,"kline"])),T("kline",`Subscribed to kline for market ${o} with interval ${u}`,"success",!1)}catch(H){T("kline",`Subscription error: ${H.message}`,"error",!1)}},O=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&!(!o||!u))try{C.current.unsubscribeKline(o,u),S(J=>{const H=new Set(J);return H.delete("kline"),H}),j([]),T("kline","Unsubscribed from kline","info",!1)}catch(J){T("kline",`Unsubscribe error: ${J.message}`,"error",!1)}},te=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("mark_price","Not connected. Please connect first.","error",!1);return}if(!l){T("mark_price","Please enter a symbol first","error",!1);return}const se=H=>{T("mark_price",H,"success",!1)};try{C.current.subscribeMarkPrice(l,se),S(H=>new Set([...H,"mark_price"])),T("mark_price",`Subscribed to mark price for ${l}`,"success",!1)}catch(H){T("mark_price",`Subscription error: ${H.message}`,"error",!1)}},ne=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&l)try{C.current.unsubscribeMarkPrice(l),S(J=>{const H=new Set(J);return H.delete("mark_price"),H}),T("mark_price","Unsubscribed from mark price","info",!1)}catch(J){T("mark_price",`Unsubscribe error: ${J.message}`,"error",!1)}},q=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("price_feed","Not connected. Please connect first.","error",!1);return}if(!l){T("price_feed","Please enter a symbol first","error",!1);return}const se=H=>{T("price_feed",H,"success",!1)};try{C.current.subscribePriceFeed(l,se),S(H=>new Set([...H,"price_feed"])),T("price_feed",`Subscribed to price feed for ${l}`,"success",!1)}catch(H){T("price_feed",`Subscription error: ${H.message}`,"error",!1)}},he=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&l)try{C.current.unsubscribePriceFeed(l),S(J=>{const H=new Set(J);return H.delete("price_feed"),H}),T("price_feed","Unsubscribed from price feed","info",!1)}catch(J){T("price_feed",`Unsubscribe error: ${J.message}`,"error",!1)}},Me=()=>{var J;if(!((J=C.current)!=null&&J.isConnected())){T("twap","Not connected. Please connect first.","error",!1);return}if(!l){T("twap","Please enter a symbol first","error",!1);return}if(!f||isNaN(Number(f))||Number(f)<=0){T("twap","Please enter a valid window size (positive number in seconds)","error",!1);return}const se=H=>{T("twap",H,"success",!1)};try{C.current.subscribeTWAP(l,Number(f),se),S(H=>new Set([...H,"twap"])),T("twap",`Subscribed to TWAP for ${l} with window size ${f}s`,"success",!1)}catch(H){T("twap",`Subscription error: ${H.message}`,"error",!1)}},ke=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&!(!l||!f))try{C.current.unsubscribeTWAP(l,Number(f)),S(J=>{const H=new Set(J);return H.delete("twap"),H}),T("twap","Unsubscribed from TWAP","info",!1)}catch(J){T("twap",`Unsubscribe error: ${J.message}`,"error",!1)}},Pe=()=>{if(!C.current){T("multi_feed","SubscriptionClient not initialized. Please connect first.","error",!1);return}if(!C.current.isConnected()){T("multi_feed","Not connected. Please connect first.","error",!1);return}if(!o){T("multi_feed","Please select a market first","error",!1);return}if(!l){T("multi_feed","Please enter a symbol first","error",!1);return}if(typeof C.current.subscribeMultiFeed!="function"){T("multi_feed","subscribeMultiFeed method not available. Please check SDK version.","error",!1),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(C.current)));return}const se=J=>{const H=J.sub_channel||"unknown";T(`multi_feed:${H}`,J,"success",H==="balances"||H==="buckets"||H==="orders"||H==="positions")};try{C.current.subscribeMultiFeed(o,l,se,u||"1m"),S(J=>new Set([...J,"multi_feed"])),T("multi_feed",`Subscribed to multi-feed for market ${o}, symbol ${l}`,"success",!1)}catch(J){T("multi_feed",`Subscription error: ${J.message}`,"error",!1)}},ze=()=>{var se;if((se=C.current)!=null&&se.isConnected()&&!(!o||!l))try{C.current.unsubscribeMultiFeed(o,l),S(J=>{const H=new Set(J);return H.delete("multi_feed"),H}),T("multi_feed","Unsubscribed from multi-feed","info",!1)}catch(J){T("multi_feed",`Unsubscribe error: ${J.message}`,"error",!1)}},Je=()=>{if(!C.current){T("balances","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!C.current.isConnected()){T("balances","Not connected. Please connect first.","error",!0);return}if(!z){T("balances","Wallet address required for balances subscription","error",!0);return}if(typeof C.current.subscribeBalances!="function"){T("balances","subscribeBalances method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(C.current)));return}const se=J=>{T("balances",J,"success",!0)};try{C.current.subscribeBalances(se),S(J=>new Set([...J,"balances"])),T("balances","Subscribed to balances","success",!0)}catch(J){T("balances",`Subscription error: ${J.message}`,"error",!0)}},rt=()=>{if(C.current&&C.current.isConnected()){if(typeof C.current.unsubscribeBalances!="function"){T("balances","unsubscribeBalances method not available. Please check SDK version.","error",!0);return}try{C.current.unsubscribeBalances(),S(se=>{const J=new Set(se);return J.delete("balances"),J}),T("balances","Unsubscribed from balances","info",!0)}catch(se){T("balances",`Unsubscribe error: ${se.message}`,"error",!0)}}},vt=()=>{if(!C.current){T("orders","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!C.current.isConnected()){T("orders","Not connected. Please connect first.","error",!0);return}if(!z){T("orders","Wallet address required for orders subscription","error",!0);return}if(typeof C.current.subscribeOrders!="function"){T("orders","subscribeOrders method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(C.current)));return}const se=J=>{T("orders",J,"success",!0)};try{C.current.subscribeOrders(se),S(J=>new Set([...J,"orders"])),T("orders","Subscribed to orders","success",!0)}catch(J){T("orders",`Subscription error: ${J.message}`,"error",!0)}},jt=()=>{if(C.current&&C.current.isConnected()){if(typeof C.current.unsubscribeOrders!="function"){T("orders","unsubscribeOrders method not available. Please check SDK version.","error",!0);return}try{C.current.unsubscribeOrders(),S(se=>{const J=new Set(se);return J.delete("orders"),J}),T("orders","Unsubscribed from orders","info",!0)}catch(se){T("orders",`Unsubscribe error: ${se.message}`,"error",!0)}}},Ot=se=>{se?v([]):m([])};return k.useEffect(()=>()=>{if(C.current)try{C.current.disconnect()}catch{}},[]),h.jsxs("div",{className:"ws-test-page",children:[h.jsx("h1",{children:"WebSocket Test Page"}),h.jsx("p",{children:"Test WebSocket subscriptions for public and private channels"}),h.jsx(yR,{steps:_}),h.jsx(vR,{wsURL:t,onWsURLChange:e,marketId:o,onMarketIdChange:a,markets:A,symbol:l,onSymbolChange:c,klineInterval:u,onKlineIntervalChange:d,twapWindowSize:f,onTwapWindowSizeChange:p,authToken:n,onAuthTokenChange:s,walletAddress:z,deviceID:r,onDeviceIDChange:i,isConnected:g,isConnecting:P,onConnect:R,onDisconnect:X}),h.jsxs("div",{className:"ws-test-page-layout",children:[h.jsxs(u1,{title:"WebSocket Public",isPrivate:!1,messages:w,onClearMessages:()=>Ot(!1),children:[h.jsxs("div",{className:"channel-buttons-row",children:[h.jsx(cn,{channel:"orderbook",isSubscribed:b.has("orderbook"),isConnected:g,subscribeLabel:"Subscribe Orderbook",unsubscribeLabel:"Unsubscribe Orderbook",onSubscribe:K,onUnsubscribe:Y}),h.jsx(cn,{channel:"trades",isSubscribed:b.has("trades"),isConnected:g,subscribeLabel:"Subscribe Trades",unsubscribeLabel:"Unsubscribe Trades",onSubscribe:V,onUnsubscribe:Q}),h.jsx(cn,{channel:"ticker",isSubscribed:b.has("ticker"),isConnected:g,subscribeLabel:"Subscribe Ticker",unsubscribeLabel:"Unsubscribe Ticker",onSubscribe:ee,onUnsubscribe:fe}),h.jsx(cn,{channel:"last_price",isSubscribed:b.has("last_price"),isConnected:g,subscribeLabel:"Subscribe Last Price",unsubscribeLabel:"Unsubscribe Last Price",onSubscribe:je,onUnsubscribe:Se}),h.jsx(cn,{channel:"funding_rate",isSubscribed:b.has("funding_rate"),isConnected:g,subscribeLabel:"Subscribe Funding Rate",unsubscribeLabel:"Unsubscribe Funding Rate",onSubscribe:gt,onUnsubscribe:L}),h.jsx(cn,{channel:"deviation",isSubscribed:b.has("deviation"),isConnected:g,subscribeLabel:"Subscribe Deviation",unsubscribeLabel:"Unsubscribe Deviation",onSubscribe:ye,onUnsubscribe:de}),h.jsx(cn,{channel:"index_price",isSubscribed:b.has("index_price"),isConnected:g,subscribeLabel:"Subscribe Index Price",unsubscribeLabel:"Unsubscribe Index Price",onSubscribe:me,onUnsubscribe:U}),h.jsx(cn,{channel:"kline",isSubscribed:b.has("kline"),isConnected:g,subscribeLabel:"Subscribe Kline",unsubscribeLabel:"Unsubscribe Kline",onSubscribe:ie,onUnsubscribe:O})]}),b.has("kline")&&h.jsx("div",{style:{marginTop:"20px",marginBottom:"20px"},children:h.jsx(M3,{ref:B,initialData:W,symbol:l||"BTC/USDC",height:500,showVolume:!0})}),h.jsxs("div",{className:"channel-buttons-row",children:[h.jsx(cn,{channel:"mark_price",isSubscribed:b.has("mark_price"),isConnected:g,subscribeLabel:"Subscribe Mark Price",unsubscribeLabel:"Unsubscribe Mark Price",onSubscribe:te,onUnsubscribe:ne}),h.jsx(cn,{channel:"price_feed",isSubscribed:b.has("price_feed"),isConnected:g,subscribeLabel:"Subscribe Price Feed",unsubscribeLabel:"Unsubscribe Price Feed",onSubscribe:q,onUnsubscribe:he}),h.jsx(cn,{channel:"twap",isSubscribed:b.has("twap"),isConnected:g,subscribeLabel:"Subscribe TWAP",unsubscribeLabel:"Unsubscribe TWAP",onSubscribe:Me,onUnsubscribe:ke}),h.jsx(cn,{channel:"multi_feed",isSubscribed:b.has("multi_feed"),isConnected:g,subscribeLabel:"Subscribe Multi-Feed",unsubscribeLabel:"Unsubscribe Multi-Feed",onSubscribe:Pe,onUnsubscribe:ze})]}),h.jsx("small",{className:"private-note-text-block",style:{marginTop:"10px"},children:"Multi-Feed: Unified channel streaming all sub-channels (orderbook, trades, positions, balances, orders, buckets, etc.) Requires market ID and symbol. Authenticated sub-channels (balances, orders, positions, buckets) require wallet address."})]}),h.jsxs(u1,{title:"WebSocket Private",isPrivate:!0,messages:y,onClearMessages:()=>Ot(!0),children:[h.jsx(cn,{channel:"user_updates",isSubscribed:b.has("user_updates"),isConnected:g,disabled:!z,subscribeLabel:"Subscribe User Updates",unsubscribeLabel:"Unsubscribe User Updates",onSubscribe:Ce,onUnsubscribe:Ie,variant:"private"}),h.jsx("small",{className:"private-note-text",children:"Position updates (positions channel): Requires wallet address. Returns user positions."}),h.jsx(cn,{channel:"buckets",isSubscribed:b.has("buckets"),isConnected:g,disabled:!z,subscribeLabel:"Subscribe Buckets",unsubscribeLabel:"Unsubscribe Buckets",onSubscribe:ae,onUnsubscribe:ue,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Buckets: User's margin buckets (requires wallet address)"}),h.jsx(cn,{channel:"balances",isSubscribed:b.has("balances"),isConnected:g,disabled:!z,subscribeLabel:"Subscribe Balances",unsubscribeLabel:"Unsubscribe Balances",onSubscribe:Je,onUnsubscribe:rt,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Balances: User's spot balances (USDC, MORM, BTC, etc.) - requires wallet address"}),h.jsx(cn,{channel:"orders",isSubscribed:b.has("orders"),isConnected:g,disabled:!z,subscribeLabel:"Subscribe Orders",unsubscribeLabel:"Unsubscribe Orders",onSubscribe:vt,onUnsubscribe:jt,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Orders: User's open orders - requires wallet address"})]})]})]})}function $b({top:t,left:e,width:n,height:s}){const r=`translate(${e}px,${t}px)`;return{transform:r,WebkitTransform:r,MozTransform:r,msTransform:r,OTransform:r,width:`${n}px`,height:`${s}px`,position:"absolute"}}function I3({top:t,left:e,width:n,height:s}){return{top:`${t}px`,left:`${e}px`,width:`${n}px`,height:`${s}px`,position:"absolute"}}function rk(t){return t*100+"%"}function RO(t,e,n,s){return t+n>s?e:n}function N3(t,e,n){return t<0?e:n}function OO(t){return Math.max(0,t)}function uf(t){return Math.max(0,t)}var Ub=(t,e,n)=>{const{left:s,height:r,width:i}=e,o=t.top-(r-t.height);return{left:s,width:i,height:N3(o,t.height,r),top:uf(o)}},Wb=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{top:s,height:i,width:RO(t.left,t.width,o,n),left:OO(r)}},Hb=(t,e,n)=>{const{top:s,height:r,width:i}=e,o=t.left+t.width-i;return o<0?{height:r,width:t.left+t.width,top:uf(s),left:0}:{height:r,width:i,top:uf(s),left:o}},Vb=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{width:o,left:r,height:N3(s,t.height,i),top:uf(s)}},DO=(t,e,n)=>Ub(t,Wb(t,e,n)),LO=(t,e,n)=>Ub(t,Hb(t,e)),jO=(t,e,n)=>Vb(t,Wb(t,e,n)),FO=(t,e,n)=>Vb(t,Hb(t,e)),zO={n:Ub,ne:DO,e:Wb,se:jO,s:Vb,sw:FO,w:Hb,nw:LO};function BO(t,e,n,s){const r=zO[t];return r?r(e,{...e,...n},s):n}var A3={type:"transform",scale:1,calcStyle(t){return $b(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}},$O={type:"absolute",scale:1,calcStyle(t){return I3(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}};function UO(t){return{type:"transform",scale:t,calcStyle(e){return $b(e)},calcDragPosition(e,n,s,r){return{left:(e-s)/t,top:(n-r)/t}}}}var WO=A3,HO={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},VO={enabled:!0,bounded:!1,threshold:3},YO={enabled:!0,handles:["se"]},GO={enabled:!1,defaultItem:{w:1,h:1}};function m0(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function Ms(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&m0(s,e))return s}}function R3(t,e){return t.filter(n=>m0(n,e))}function O3(t,e){return e==="horizontal"?L3(t):e==="vertical"?D3(t):[...t]}function D3(t){return[...t].sort((e,n)=>e.y!==n.y?e.y-n.y:e.x-n.x)}function L3(t){return[...t].sort((e,n)=>e.x!==n.x?e.x-n.x:e.y-n.y)}function wl(t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0){const r=s.y+s.h;r>e&&(e=r)}}return e}function ji(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&s.i===e)return s}}function Yb(t){return t.filter(e=>e.static===!0)}function wi(t){return{i:t.i,x:t.x,y:t.y,w:t.w,h:t.h,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function Os(t){const e=new Array(t.length);for(let n=0;n<t.length;n++){const s=t[n];s!==void 0&&(e[n]=wi(s))}return e}function qO(t,e){const n=new Array(t.length);for(let s=0;s<t.length;s++){const r=t[s];r!==void 0&&(e.i===r.i?n[s]=e:n[s]=r)}return n}function KO(t,e,n){let s=ji(t,e);return s?(s=n(wi(s)),[qO(t,s),s]):[[...t],null]}function Gb(t,e){const n=Yb(t);for(let s=0;s<t.length;s++){const r=t[s];if(r!==void 0)if(r.x+r.w>e.cols&&(r.x=e.cols-r.w),r.x<0&&(r.x=0,r.w=e.cols),!r.static)n.push(r);else for(;Ms(n,r);)r.y++}return t}function Gi(t,e,n,s,r,i,o,a,l){if(e.static&&e.isDraggable!==!0)return[...t];if(e.y===s&&e.x===n)return[...t];const c=e.x,u=e.y;typeof n=="number"&&(e.x=n),typeof s=="number"&&(e.y=s),e.moved=!0;let d=O3(t,o);(o==="vertical"&&typeof s=="number"?u>=s:o==="horizontal"&&typeof n=="number"?c>=n:!1)&&(d=d.reverse());const p=R3(d,e),g=p.length>0;if(g&&l)return Os(t);if(g&&i)return e.x=c,e.y=u,e.moved=!1,t;let x=[...t];for(let w=0;w<p.length;w++){const m=p[w];m!==void 0&&(m.moved||(m.static?x=ik(x,m,e,r,o):x=ik(x,e,m,r,o)))}return x}function ik(t,e,n,s,r,i){const o=r==="horizontal",a=r==="vertical",l=e.static;if(s){s=!1;const d={x:o?Math.max(e.x-n.w,0):n.x,y:a?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},f=Ms(t,d),p=f!==void 0&&f.y+f.h>e.y,g=f!==void 0&&e.x+e.w>f.x;if(!f)return Gi(t,n,o?d.x:void 0,a?d.y:void 0,s,l,r);if(p&&a)return Gi(t,n,void 0,n.y+1,s,l,r);if(p&&r===null)return e.y=n.y,n.y=n.y+n.h,[...t];if(g&&o)return Gi(t,e,n.x,void 0,s,l,r)}const c=o?n.x+1:void 0,u=a?n.y+1:void 0;return c===void 0&&u===void 0?[...t]:Gi(t,n,c,u,s,l,r)}function XO(t){return t.filter(e=>e.static)}var QO={x:"w",y:"h"};function zm(t,e,n,s){const r=QO[s];e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;m0(e,a)&&zm(t,a,n+e[r],s)}}e[s]=n}function JO(t,e,n,s,r,i,o){const a=n==="vertical",l=n==="horizontal";if(a)for(typeof o=="number"?e.y=Math.min(o,e.y):e.y=Math.min(wl(t),e.y);e.y>0&&!Ms(t,e);)e.y--;else if(l)for(;e.x>0&&!Ms(t,e);)e.x--;let c;for(;(c=Ms(t,e))!==void 0&&!(n===null&&i);)if(l?zm(r,e,c.x+c.w,"x"):zm(r,e,c.y+c.h,"y"),l&&e.x+e.w>s)for(e.x=s-e.w,e.y++;e.x>0&&!Ms(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function br(t,e,n,s){const r=XO(t);let i=wl(r);const o=O3(t,e),a=new Array(t.length);for(let l=0;l<o.length;l++){const c=o[l];if(c===void 0)continue;let u=wi(c);u.static||(u=JO(r,u,e,n,o,s,i),i=Math.max(i,u.y+u.h),r.push(u));const d=t.indexOf(c);a[d]=u,u.moved=!1}return a}function qb(t,e,n,s){const r=s==="x"?"w":"h";e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;m0(e,a)&&qb(t,a,n+e[r],s)}}e[s]=n}function ZO(t,e,n,s){for(e.y=Math.min(s,e.y);e.y>0&&!Ms(t,e);)e.y--;let r;for(;(r=Ms(t,e))!==void 0;)qb(n,e,r.y+r.h,"y");return e.y=Math.max(e.y,0),e}function eD(t,e,n,s){for(;e.x>0&&!Ms(t,e);)e.x--;let r;for(;(r=Ms(t,e))!==void 0;)if(qb(s,e,r.x+r.w,"x"),e.x+e.w>n)for(e.x=n-e.w,e.y++;e.x>0&&!Ms(t,e);)e.x--;return e.x=Math.max(e.x,0),e}var j3={type:"vertical",allowOverlap:!1,compact(t,e){const n=Yb(t);let s=wl(n);const r=D3(t),i=new Array(t.length);for(let o=0;o<r.length;o++){const a=r[o];if(a===void 0)continue;let l=wi(a);l.static||(l=ZO(n,l,r,s),s=Math.max(s,l.y+l.h),n.push(l));const c=t.indexOf(a);i[c]=l,l.moved=!1}return i},onMove(t,e,n,s,r){const i=Os(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},F3={type:"horizontal",allowOverlap:!1,compact(t,e){const n=Yb(t),s=L3(t),r=new Array(t.length);for(let i=0;i<s.length;i++){const o=s[i];if(o===void 0)continue;let a=wi(o);a.static||(a=eD(n,a,e,s),n.push(a));const l=t.indexOf(o);r[l]=a,a.moved=!1}return r},onMove(t,e,n,s,r){const i=Os(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},ok={type:null,allowOverlap:!1,compact(t,e){return Os(t)},onMove(t,e,n,s,r){const i=Os(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},tD={...j3,allowOverlap:!0,compact(t,e){return Os(t)}},nD={...F3,allowOverlap:!0,compact(t,e){return Os(t)}};function Kb(t,e=!1,n=!1){let s;return e?t==="vertical"?s=tD:t==="horizontal"?s=nD:s=ok:t==="vertical"?s=j3:t==="horizontal"?s=F3:s=ok,n?{...s,preventCollision:n}:s}function z3(t){return Object.keys(t).sort((n,s)=>t[n]-t[s])}function ak(t,e){const n=z3(t);let s=n[0];if(s===void 0)throw new Error("No breakpoints defined");for(let r=1;r<n.length;r++){const i=n[r];if(i===void 0)continue;const o=t[i];e>o&&(s=i)}return s}function lk(t,e){const n=e[t];if(n===void 0)throw new Error(`ResponsiveReactGridLayout: \`cols\` entry for breakpoint ${String(t)} is missing!`);return n}function sg(t,e,n,s,r,i){const o=t[n];if(o)return Os(o);let a=t[s];const l=z3(e),c=l.slice(l.indexOf(n));for(let d=0;d<c.length;d++){const f=c[d];if(f===void 0)continue;const p=t[f];if(p){a=p;break}}const u=Os(a||[]);return br(Gb(u,{cols:r}),i,r)}function Id(t,e){if(Array.isArray(t))return t;const n=t,s=n[e];if(s!==void 0)return s;const r=Object.keys(n);for(const i of r){const o=n[i];if(o!==void 0)return o}return[10,10]}function x0(t){const{margin:e,containerPadding:n,containerWidth:s,cols:r}=t;return(s-e[0]*(r-1)-n[0]*2)/r}function df(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function Ni(t,e,n,s,r,i,o){const{margin:a,containerPadding:l,rowHeight:c}=t,u=x0(t);let d,f,p,g;return o?(d=Math.round(o.width),f=Math.round(o.height)):(d=df(s,u,a[0]),f=df(r,c,a[1])),i?(p=Math.round(i.top),g=Math.round(i.left)):o?(p=Math.round(o.top),g=Math.round(o.left)):(p=Math.round((c+a[1])*n+l[1]),g=Math.round((u+a[0])*e+l[0])),{top:p,left:g,width:d,height:f}}function mh(t,e,n,s,r){const{margin:i,containerPadding:o,cols:a,rowHeight:l,maxRows:c}=t,u=x0(t);let d=Math.round((n-o[0])/(u+i[0])),f=Math.round((e-o[1])/(l+i[1]));return d=Xs(d,0,a-s),f=Xs(f,0,c-r),{x:d,y:f}}function sD(t,e,n,s,r,i){const{margin:o,maxRows:a,cols:l,rowHeight:c}=t,u=x0(t),d=Math.round((e+o[0])/(u+o[0])),f=Math.round((n+o[1])/(c+o[1]));let p=Xs(d,0,l-s),g=Xs(f,0,a-r);return(i==="sw"||i==="w"||i==="nw")&&(p=Xs(d,0,l)),(i==="nw"||i==="n"||i==="ne")&&(g=Xs(f,0,a)),{w:p,h:g}}function Xs(t,e,n){return Math.max(Math.min(t,n),e)}var b0={exports:{}},B3={},$3={exports:{}},rD="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",iD=rD,oD=iD;function U3(){}function W3(){}W3.resetWarningCache=U3;var aD=function(){function t(s,r,i,o,a,l){if(l!==oD){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:W3,resetWarningCache:U3};return n.PropTypes=n,n};$3.exports=aD();var y0=$3.exports;function H3(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=H3(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function cu(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=H3(t))&&(s&&(s+=" "),s+=e);return s}const lD=Object.freeze(Object.defineProperty({__proto__:null,clsx:cu,default:cu},Symbol.toStringTag,{value:"Module"})),cD=p4(lD);var Pt={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.dontSetMe=pD;nr.findInArray=uD;nr.int=fD;nr.isFunction=dD;nr.isNum=hD;function uD(t,e){for(let n=0,s=t.length;n<s;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function dD(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function hD(t){return typeof t=="number"&&!isNaN(t)}function fD(t){return parseInt(t,10)}function pD(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.browserPrefixToKey=Y3;Mo.browserPrefixToStyle=gD;Mo.default=void 0;Mo.getPrefix=V3;const rg=["Moz","Webkit","O","ms"];function V3(){var n,s;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(s=(n=window.document)==null?void 0:n.documentElement)==null?void 0:s.style;if(!e||t in e)return"";for(let r=0;r<rg.length;r++)if(Y3(t,rg[r])in e)return rg[r];return""}function Y3(t,e){return e?`${e}${mD(t)}`:t}function gD(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function mD(t){let e="",n=!0;for(let s=0;s<t.length;s++)n?(e+=t[s].toUpperCase(),n=!1):t[s]==="-"?n=!0:e+=t[s];return e}Mo.default=V3();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.addClassName=K3;Pt.addEvent=bD;Pt.addUserSelectStyles=MD;Pt.createCSSTransform=CD;Pt.createSVGTransform=ED;Pt.getTouch=PD;Pt.getTouchIdentifier=TD;Pt.getTranslation=Xb;Pt.innerHeight=kD;Pt.innerWidth=SD;Pt.matchesSelector=q3;Pt.matchesSelectorAndParentsTo=xD;Pt.offsetXYFromParent=_D;Pt.outerHeight=vD;Pt.outerWidth=wD;Pt.removeClassName=X3;Pt.removeEvent=yD;Pt.scheduleRemoveUserSelectStyles=ID;var qn=nr,ck=G3(Mo);function G3(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(G3=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}let Nd="";function q3(t,e){return Nd||(Nd=(0,qn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,qn.isFunction)(t[n])})),(0,qn.isFunction)(t[Nd])?t[Nd](e):!1}function xD(t,e,n){let s=t;do{if(q3(s,e))return!0;if(s===n)return!1;s=s.parentNode}while(s);return!1}function bD(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.addEventListener?t.addEventListener(e,n,r):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function yD(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function vD(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,qn.int)(n.borderTopWidth),e+=(0,qn.int)(n.borderBottomWidth),e}function wD(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,qn.int)(n.borderLeftWidth),e+=(0,qn.int)(n.borderRightWidth),e}function kD(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,qn.int)(n.paddingTop),e-=(0,qn.int)(n.paddingBottom),e}function SD(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,qn.int)(n.paddingLeft),e-=(0,qn.int)(n.paddingRight),e}function _D(t,e,n){const r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-r.left)/n,o=(t.clientY+e.scrollTop-r.top)/n;return{x:i,y:o}}function CD(t,e){const n=Xb(t,e,"px");return{[(0,ck.browserPrefixToKey)("transform",ck.default)]:n}}function ED(t,e){return Xb(t,e,"")}function Xb(t,e,n){let{x:s,y:r}=t,i=`translate(${s}${n},${r}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function PD(t,e){return t.targetTouches&&(0,qn.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,qn.findInArray)(t.changedTouches,n=>e===n.identifier)}function TD(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function MD(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&K3(t.body,"react-draggable-transparent-selection")}function ID(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{uk(t)}):uk(t)}function uk(t){if(t)try{if(t.body&&X3(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function K3(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function X3(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.canDragX=RD;sr.canDragY=OD;sr.createCoreData=LD;sr.createDraggableData=jD;sr.getBoundPosition=ND;sr.getControlPosition=DD;sr.snapToGrid=AD;var Bn=nr,sa=Pt;function ND(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:s}=t.props;s=typeof s=="string"?s:FD(s);const r=Qb(t);if(typeof s=="string"){const{ownerDocument:i}=r,o=i.defaultView;let a;if(s==="parent"?a=r.parentNode:a=r.getRootNode().querySelector(s),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');const l=a,c=o.getComputedStyle(r),u=o.getComputedStyle(l);s={left:-r.offsetLeft+(0,Bn.int)(u.paddingLeft)+(0,Bn.int)(c.marginLeft),top:-r.offsetTop+(0,Bn.int)(u.paddingTop)+(0,Bn.int)(c.marginTop),right:(0,sa.innerWidth)(l)-(0,sa.outerWidth)(r)-r.offsetLeft+(0,Bn.int)(u.paddingRight)-(0,Bn.int)(c.marginRight),bottom:(0,sa.innerHeight)(l)-(0,sa.outerHeight)(r)-r.offsetTop+(0,Bn.int)(u.paddingBottom)-(0,Bn.int)(c.marginBottom)}}return(0,Bn.isNum)(s.right)&&(e=Math.min(e,s.right)),(0,Bn.isNum)(s.bottom)&&(n=Math.min(n,s.bottom)),(0,Bn.isNum)(s.left)&&(e=Math.max(e,s.left)),(0,Bn.isNum)(s.top)&&(n=Math.max(n,s.top)),[e,n]}function AD(t,e,n){const s=Math.round(e/t[0])*t[0],r=Math.round(n/t[1])*t[1];return[s,r]}function RD(t){return t.props.axis==="both"||t.props.axis==="x"}function OD(t){return t.props.axis==="both"||t.props.axis==="y"}function DD(t,e,n){const s=typeof e=="number"?(0,sa.getTouch)(t,e):null;if(typeof e=="number"&&!s)return null;const r=Qb(n),i=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,sa.offsetXYFromParent)(s||t,i,n.props.scale)}function LD(t,e,n){const s=!(0,Bn.isNum)(t.lastX),r=Qb(t);return s?{node:r,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:r,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function jD(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function FD(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function Qb(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var v0={},w0={};Object.defineProperty(w0,"__esModule",{value:!0});w0.default=zD;function zD(){}Object.defineProperty(v0,"__esModule",{value:!0});v0.default=void 0;var ig=Q3(k),xn=Jb(y0),BD=Jb(Ei),un=Pt,$r=sr,og=nr,Vl=Jb(w0);function Jb(t){return t&&t.__esModule?t:{default:t}}function Q3(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(Q3=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}function bn(t,e,n){return(e=$D(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $D(t){var e=UD(t,"string");return typeof e=="symbol"?e:e+""}function UD(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const vs={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ur=vs.mouse,k0=class extends ig.Component{constructor(){super(...arguments),bn(this,"dragging",!1),bn(this,"lastX",NaN),bn(this,"lastY",NaN),bn(this,"touchIdentifier",null),bn(this,"mounted",!1),bn(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:s}=n;if(this.props.disabled||!(e.target instanceof s.defaultView.Node)||this.props.handle&&!(0,un.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,un.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const r=(0,un.getTouchIdentifier)(e);this.touchIdentifier=r;const i=(0,$r.getControlPosition)(e,r,this);if(i==null)return;const{x:o,y:a}=i,l=(0,$r.createCoreData)(this,o,a);(0,Vl.default)("DraggableCore: handleDragStart: %j",l),(0,Vl.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,un.addUserSelectStyles)(s),this.dragging=!0,this.lastX=o,this.lastY=a,(0,un.addEvent)(s,Ur.move,this.handleDrag),(0,un.addEvent)(s,Ur.stop,this.handleDragStop))}),bn(this,"handleDrag",e=>{const n=(0,$r.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let a=s-this.lastX,l=r-this.lastY;if([a,l]=(0,$r.snapToGrid)(this.props.grid,a,l),!a&&!l)return;s=this.lastX+a,r=this.lastY+l}const i=(0,$r.createCoreData)(this,s,r);if((0,Vl.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=s,this.lastY=r}),bn(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,$r.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let l=s-this.lastX||0,c=r-this.lastY||0;[l,c]=(0,$r.snapToGrid)(this.props.grid,l,c),s=this.lastX+l,r=this.lastY+c}const i=(0,$r.createCoreData)(this,s,r);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,un.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Vl.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Vl.default)("DraggableCore: Removing handlers"),(0,un.removeEvent)(a.ownerDocument,Ur.move,this.handleDrag),(0,un.removeEvent)(a.ownerDocument,Ur.stop,this.handleDragStop))}),bn(this,"onMouseDown",e=>(Ur=vs.mouse,this.handleDragStart(e))),bn(this,"onMouseUp",e=>(Ur=vs.mouse,this.handleDragStop(e))),bn(this,"onTouchStart",e=>(Ur=vs.touch,this.handleDragStart(e))),bn(this,"onTouchEnd",e=>(Ur=vs.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,un.addEvent)(e,vs.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,un.removeEvent)(n,vs.mouse.move,this.handleDrag),(0,un.removeEvent)(n,vs.touch.move,this.handleDrag),(0,un.removeEvent)(n,vs.mouse.stop,this.handleDragStop),(0,un.removeEvent)(n,vs.touch.stop,this.handleDragStop),(0,un.removeEvent)(e,vs.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,un.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,s;return(e=this.props)!=null&&e.nodeRef?(s=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:s.current:BD.default.findDOMNode(this)}render(){return ig.cloneElement(ig.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};v0.default=k0;bn(k0,"displayName","DraggableCore");bn(k0,"propTypes",{allowAnyClick:xn.default.bool,allowMobileScroll:xn.default.bool,children:xn.default.node.isRequired,disabled:xn.default.bool,enableUserSelectHack:xn.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:xn.default.arrayOf(xn.default.number),handle:xn.default.string,cancel:xn.default.string,nodeRef:xn.default.object,onStart:xn.default.func,onDrag:xn.default.func,onStop:xn.default.func,onMouseDown:xn.default.func,scale:xn.default.number,className:og.dontSetMe,style:og.dontSetMe,transform:og.dontSetMe});bn(k0,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=d(k),n=u(y0),s=u(Ei),r=cD,i=Pt,o=sr,a=nr,l=u(v0),c=u(w0);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,y){if(typeof WeakMap=="function")var v=new WeakMap,b=new WeakMap;return(d=function(S,_){if(!_&&S&&S.__esModule)return S;var E,P,M={__proto__:null,default:S};if(S===null||typeof S!="object"&&typeof S!="function")return M;if(E=_?b:v){if(E.has(S))return E.get(S);E.set(S,M)}for(const C in S)C!=="default"&&{}.hasOwnProperty.call(S,C)&&((P=(E=Object.defineProperty)&&Object.getOwnPropertyDescriptor(S,C))&&(P.get||P.set)?E(M,C,P):M[C]=S[C]);return M})(m,y)}function f(){return f=Object.assign?Object.assign.bind():function(m){for(var y=1;y<arguments.length;y++){var v=arguments[y];for(var b in v)({}).hasOwnProperty.call(v,b)&&(m[b]=v[b])}return m},f.apply(null,arguments)}function p(m,y,v){return(y=g(y))in m?Object.defineProperty(m,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[y]=v,m}function g(m){var y=x(m,"string");return typeof y=="symbol"?y:y+""}function x(m,y){if(typeof m!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var b=v.call(m,y);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(m)}class w extends e.Component{static getDerivedStateFromProps(y,v){let{position:b}=y,{prevPropsPosition:S}=v;return b&&(!S||b.x!==S.x||b.y!==S.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:b,prevPropsPosition:S}),{x:b.x,y:b.y,prevPropsPosition:{...b}}):null}constructor(y){super(y),p(this,"onDragStart",(v,b)=>{if((0,c.default)("Draggable: onDragStart: %j",b),this.props.onStart(v,(0,o.createDraggableData)(this,b))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(v,b)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",b);const S=(0,o.createDraggableData)(this,b),_={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:P,y:M}=_;_.x+=this.state.slackX,_.y+=this.state.slackY;const[C,N]=(0,o.getBoundPosition)(this,_.x,_.y);_.x=C,_.y=N,_.slackX=this.state.slackX+(P-_.x),_.slackY=this.state.slackY+(M-_.y),S.x=_.x,S.y=_.y,S.deltaX=_.x-this.state.x,S.deltaY=_.y-this.state.y}if(this.props.onDrag(v,S)===!1)return!1;this.setState(_)}),p(this,"onDragStop",(v,b)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,b))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",b);const _={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:P,y:M}=this.props.position;_.x=P,_.y=M}this.setState(_)}),this.state={dragging:!1,dragged:!1,x:y.position?y.position.x:y.defaultPosition.x,y:y.position?y.position.y:y.defaultPosition.y,prevPropsPosition:{...y.position},slackX:0,slackY:0,isElementSVG:!1},y.position&&!(y.onDrag||y.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var y,v;return((v=(y=this.props)==null?void 0:y.nodeRef)==null?void 0:v.current)??s.default.findDOMNode(this)}render(){const{axis:y,bounds:v,children:b,defaultPosition:S,defaultClassName:_,defaultClassNameDragging:E,defaultClassNameDragged:P,position:M,positionOffset:C,scale:N,...I}=this.props;let B={},W=null;const z=!!!M||this.state.dragging,F=M||S,A={x:(0,o.canDragX)(this)&&z?this.state.x:F.x,y:(0,o.canDragY)(this)&&z?this.state.y:F.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(A,C):B=(0,i.createCSSTransform)(A,C);const $=(0,r.clsx)(b.props.className||"",_,{[E]:this.state.dragging,[P]:this.state.dragged});return e.createElement(l.default,f({},I,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(b),{className:$,style:{...b.props.style,...B},transform:W}))}}t.default=w,p(w,"displayName","Draggable"),p(w,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(w,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(B3);const{default:J3,DraggableCore:WD}=B3;b0.exports=J3;b0.exports.default=J3;var HD=b0.exports.DraggableCore=WD,VD=b0.exports,Zb={exports:{}},ju={},ey={};ey.__esModule=!0;ey.cloneElement=QD;var YD=GD(k);function GD(t){return t&&t.__esModule?t:{default:t}}function dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function hk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dk(Object(n),!0).forEach(function(s){qD(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function qD(t,e,n){return e=KD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KD(t){var e=XD(t,"string");return typeof e=="symbol"?e:String(e)}function XD(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QD(t,e){return e.style&&t.props.style&&(e.style=hk(hk({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),YD.default.cloneElement(t,e)}var Fu={};Fu.__esModule=!0;Fu.resizableProps=void 0;var Oe=JD(y0);function JD(t){return t&&t.__esModule?t:{default:t}}var ZD={axis:Oe.default.oneOf(["both","x","y","none"]),className:Oe.default.string,children:Oe.default.element.isRequired,draggableOpts:Oe.default.shape({allowAnyClick:Oe.default.bool,cancel:Oe.default.string,children:Oe.default.node,disabled:Oe.default.bool,enableUserSelectHack:Oe.default.bool,offsetParent:Oe.default.node,grid:Oe.default.arrayOf(Oe.default.number),handle:Oe.default.string,nodeRef:Oe.default.object,onStart:Oe.default.func,onDrag:Oe.default.func,onStop:Oe.default.func,onMouseDown:Oe.default.func,scale:Oe.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="y"){var i;return(i=Oe.default.number).isRequired.apply(i,n)}return Oe.default.number.apply(Oe.default,n)},handle:Oe.default.oneOfType([Oe.default.node,Oe.default.func]),handleSize:Oe.default.arrayOf(Oe.default.number),lockAspectRatio:Oe.default.bool,maxConstraints:Oe.default.arrayOf(Oe.default.number),minConstraints:Oe.default.arrayOf(Oe.default.number),onResizeStop:Oe.default.func,onResizeStart:Oe.default.func,onResize:Oe.default.func,resizeHandles:Oe.default.arrayOf(Oe.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Oe.default.number,width:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="x"){var i;return(i=Oe.default.number).isRequired.apply(i,n)}return Oe.default.number.apply(Oe.default,n)}};Fu.resizableProps=ZD;ju.__esModule=!0;ju.default=void 0;var Yl=r9(k),e9=VD,t9=ey,n9=Fu,s9=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function Z3(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Z3=function(r){return r?n:e})(t)}function r9(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Z3(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function Bm(){return Bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Bm.apply(this,arguments)}function i9(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function ag(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fk(Object(n),!0).forEach(function(s){o9(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function o9(t,e,n){return e=a9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a9(t){var e=l9(t,"string");return typeof e=="symbol"?e:String(e)}function l9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,$m(t,e)}function $m(t,e){return $m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},$m(t,e)}var ty=function(t){c9(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.handleRefs={},s.lastHandleRect=null,s.slack=null,s}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(r,i){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[r,i];if(c){var u=this.props.width/this.props.height,d=r-this.props.width,f=i-this.props.height;Math.abs(d)>Math.abs(f*u)?i=r/u:r=i*u}var p=r,g=i,x=this.slack||[0,0],w=x[0],m=x[1];return r+=w,i+=m,a&&(r=Math.max(a[0],r),i=Math.max(a[1],i)),l&&(r=Math.min(l[0],r),i=Math.min(l[1],i)),this.slack=[w+(p-r),m+(g-i)],[r,i]},n.resizeHandler=function(r,i){var o=this;return function(a,l){var c=l.node,u=l.deltaX,d=l.deltaY;r==="onResizeStart"&&o.resetData();var f=(o.props.axis==="both"||o.props.axis==="x")&&i!=="n"&&i!=="s",p=(o.props.axis==="both"||o.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!f&&!p)){var g=i[0],x=i[i.length-1],w=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(x==="w"){var m=w.left-o.lastHandleRect.left;u+=m}if(g==="n"){var y=w.top-o.lastHandleRect.top;d+=y}}o.lastHandleRect=w,x==="w"&&(u=-u),g==="n"&&(d=-d);var v=o.props.width+(f?u/o.props.transformScale:0),b=o.props.height+(p?d/o.props.transformScale:0),S=o.runConstraints(v,b);v=S[0],b=S[1];var _=v!==o.props.width||b!==o.props.height,E=typeof o.props[r]=="function"?o.props[r]:null,P=r==="onResize"&&!_;E&&!P&&(a.persist==null||a.persist(),E(a,{node:c,size:{width:v,height:b},handle:i})),r==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(r,i){var o=this.props.handle;if(!o)return Yl.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+r,ref:i});if(typeof o=="function")return o(r,i);var a=typeof o.type=="string",l=ag({ref:i},a?{}:{handleAxis:r});return Yl.cloneElement(o,l)},n.render=function(){var r=this,i=this.props,o=i.children,a=i.className,l=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var c=i.resizeHandles;i.transformScale;var u=i9(i,s9);return(0,t9.cloneElement)(o,ag(ag({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(d){var f,p=(f=r.handleRefs[d])!=null?f:r.handleRefs[d]=Yl.createRef();return Yl.createElement(e9.DraggableCore,Bm({},l,{nodeRef:p,key:"resizableHandle-"+d,onStop:r.resizeHandler("onResizeStop",d),onStart:r.resizeHandler("onResizeStart",d),onDrag:r.resizeHandler("onResize",d)}),r.renderResizeHandle(d,p))}))}))},e}(Yl.Component);ju.default=ty;ty.propTypes=n9.resizableProps;ty.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var S0={};S0.__esModule=!0;S0.default=void 0;var lg=p9(k),u9=eE(y0),d9=eE(ju),h9=Fu,f9=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function eE(t){return t&&t.__esModule?t:{default:t}}function tE(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(tE=function(r){return r?n:e})(t)}function p9(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=tE(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function Um(){return Um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Um.apply(this,arguments)}function pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function hf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pk(Object(n),!0).forEach(function(s){g9(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function g9(t,e,n){return e=m9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m9(t){var e=x9(t,"string");return typeof e=="symbol"?e:String(e)}function x9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b9(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function y9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Wm(t,e)}function Wm(t,e){return Wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},Wm(t,e)}var nE=function(t){y9(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.state={width:s.props.width,height:s.props.height,propsWidth:s.props.width,propsHeight:s.props.height},s.onResize=function(a,l){var c=l.size;s.props.onResize?(a.persist==null||a.persist(),s.setState(c,function(){return s.props.onResize&&s.props.onResize(a,l)})):s.setState(c)},s}e.getDerivedStateFromProps=function(r,i){return i.propsWidth!==r.width||i.propsHeight!==r.height?{width:r.width,height:r.height,propsWidth:r.width,propsHeight:r.height}:null};var n=e.prototype;return n.render=function(){var r=this.props,i=r.handle,o=r.handleSize;r.onResize;var a=r.onResizeStart,l=r.onResizeStop,c=r.draggableOpts,u=r.minConstraints,d=r.maxConstraints,f=r.lockAspectRatio,p=r.axis;r.width,r.height;var g=r.resizeHandles,x=r.style,w=r.transformScale,m=b9(r,f9);return lg.createElement(d9.default,{axis:p,draggableOpts:c,handle:i,handleSize:o,height:this.state.height,lockAspectRatio:f,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:g,transformScale:w,width:this.state.width},lg.createElement("div",Um({},m,{style:hf(hf({},x),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(lg.Component);S0.default=nE;nE.propTypes=hf(hf({},h9.resizableProps),{},{children:u9.default.element});Zb.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var v9=Zb.exports.Resizable=ju.default;Zb.exports.ResizableBox=S0.default;function sE(t){return function(n,s,r,i,o,a,l){return t(n,s,l)}}function _0(t){return function(n,s,r,i){if(!n||!s||typeof n!="object"||typeof s!="object")return t(n,s,r,i);var o=i.get(n),a=i.get(s);if(o&&a)return o===s&&a===n;i.set(n,s),i.set(s,n);var l=t(n,s,r,i);return i.delete(n),i.delete(s),l}}function rE(t,e){var n={};for(var s in t)n[s]=t[s];for(var s in e)n[s]=e[s];return n}function gk(t){return t.constructor===Object||t.constructor==null}function mk(t){return typeof t.then=="function"}function C0(t,e){return t===e||t!==t&&e!==e}var w9="[object Arguments]",k9="[object Boolean]",S9="[object Date]",_9="[object RegExp]",C9="[object Map]",E9="[object Number]",P9="[object Object]",T9="[object Set]",M9="[object String]",xk=Object.prototype.toString;function E0(t){var e=t.areArraysEqual,n=t.areDatesEqual,s=t.areMapsEqual,r=t.areObjectsEqual,i=t.areRegExpsEqual,o=t.areSetsEqual,a=t.createIsNestedEqual,l=a(c);function c(u,d,f){if(u===d)return!0;if(!u||!d||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;if(gk(u)&&gk(d))return r(u,d,l,f);var p=Array.isArray(u),g=Array.isArray(d);if(p||g)return p===g&&e(u,d,l,f);var x=xk.call(u);return x!==xk.call(d)?!1:x===S9?n(u,d,l,f):x===_9?i(u,d,l,f):x===C9?s(u,d,l,f):x===T9?o(u,d,l,f):x===P9||x===w9?mk(u)||mk(d)?!1:r(u,d,l,f):x===k9||x===E9||x===M9?C0(u.valueOf(),d.valueOf()):!1}return c}function iE(t,e,n,s){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n(t[r],e[r],r,r,t,e,s))return!1;return!0}var I9=_0(iE);function oE(t,e){return C0(t.valueOf(),e.valueOf())}function aE(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={},o=0;return t.forEach(function(a,l){if(r){var c=!1,u=0;e.forEach(function(d,f){!c&&!i[u]&&(c=n(l,f,o,u,t,e,s)&&n(a,d,l,f,t,e,s))&&(i[u]=!0),u++}),o++,r=c}}),r}var N9=_0(aE),A9="_owner",R9=Object.prototype.hasOwnProperty;function lE(t,e,n,s){var r=Object.keys(t),i=r.length;if(Object.keys(e).length!==i)return!1;for(var o;i-- >0;){if(o=r[i],o===A9){var a=!!t.$$typeof,l=!!e.$$typeof;if((a||l)&&a!==l)return!1}if(!R9.call(e,o)||!n(t[o],e[o],o,o,t,e,s))return!1}return!0}var O9=_0(lE);function cE(t,e){return t.source===e.source&&t.flags===e.flags}function uE(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={};return t.forEach(function(o,a){if(r){var l=!1,c=0;e.forEach(function(u,d){!l&&!i[c]&&(l=n(o,u,a,d,t,e,s))&&(i[c]=!0),c++}),r=l}}),r}var D9=_0(uE),dE=Object.freeze({areArraysEqual:iE,areDatesEqual:oE,areMapsEqual:aE,areObjectsEqual:lE,areRegExpsEqual:cE,areSetsEqual:uE,createIsNestedEqual:sE}),hE=Object.freeze({areArraysEqual:I9,areDatesEqual:oE,areMapsEqual:N9,areObjectsEqual:O9,areRegExpsEqual:cE,areSetsEqual:D9,createIsNestedEqual:sE}),L9=E0(dE);function Qr(t,e){return L9(t,e,void 0)}E0(rE(dE,{createIsNestedEqual:function(){return C0}}));E0(hE);E0(rE(hE,{createIsNestedEqual:function(){return C0}}));function bk(t){const{children:e,cols:n,containerWidth:s,margin:r,containerPadding:i,rowHeight:o,maxRows:a,isDraggable:l,isResizable:c,isBounded:u,static:d,useCSSTransforms:f=!0,usePercentages:p=!1,transformScale:g=1,droppingPosition:x,className:w="",style:m,handle:y="",cancel:v="",x:b,y:S,w:_,h:E,minW:P=1,maxW:M=1/0,minH:C=1,maxH:N=1/0,i:I,resizeHandles:B,resizeHandle:W,onDragStart:j,onDrag:z,onDragStop:F,onResizeStart:A,onResize:$,onResizeStop:T}=t,[G,D]=k.useState(!1),[R,X]=k.useState(!1),K=k.useRef(null),Y=k.useRef({left:0,top:0}),V=k.useRef({top:0,left:0,width:0,height:0}),Q=k.useRef(void 0),ee=k.useMemo(()=>({cols:n,containerPadding:i,containerWidth:s,margin:r,maxRows:a,rowHeight:o}),[n,i,s,r,a,o]),fe=k.useCallback(ke=>{if(f)return $b(ke);const Pe=I3(ke);return p?{...Pe,left:rk(ke.left/s),width:rk(ke.width/s)}:Pe},[f,p,s]),je=k.useCallback((ke,{node:Pe})=>{if(!j)return;const{offsetParent:ze}=Pe;if(!ze)return;const Je=ze.getBoundingClientRect(),rt=Pe.getBoundingClientRect(),vt=rt.left/g,jt=Je.left/g,Ot=rt.top/g,$e=Je.top/g,Ve={left:vt-jt+ze.scrollLeft,top:Ot-$e+ze.scrollTop};Y.current=Ve,D(!0);const{x:sn,y:mn}=mh(ee,Ve.top,Ve.left,_,E);j(I,sn,mn,{e:ke,node:Pe,newPosition:Ve})},[j,g,ee,_,E,I]),Se=k.useCallback((ke,{node:Pe,deltaX:ze,deltaY:Je})=>{if(!z||!G)return;let rt=Y.current.top+Je,vt=Y.current.left+ze;if(u){const{offsetParent:Ve}=Pe;if(Ve){const sn=Ve.clientHeight-df(E,o,r[1]);rt=Xs(rt,0,sn);const mn=x0(ee),se=s-df(_,mn,r[0]);vt=Xs(vt,0,se)}}const jt={top:rt,left:vt};Y.current=jt;const{x:Ot,y:$e}=mh(ee,rt,vt,_,E);z(I,Ot,$e,{e:ke,node:Pe,newPosition:jt})},[z,G,u,E,o,r,ee,s,_,I]),Ce=k.useCallback((ke,{node:Pe})=>{if(!F||!G)return;const{left:ze,top:Je}=Y.current,rt={top:Je,left:ze};D(!1),Y.current={left:0,top:0};const{x:vt,y:jt}=mh(ee,Je,ze,_,E);F(I,vt,jt,{e:ke,node:Pe,newPosition:rt})},[F,G,ee,_,E,I]),Ie=k.useCallback((ke,{node:Pe,size:ze,handle:Je},rt,vt)=>{const jt=vt==="onResizeStart"?A:vt==="onResize"?$:T;if(!jt)return;let Ot;Pe?Ot=BO(Je,rt,ze,s):Ot={...ze,top:rt.top,left:rt.left},V.current=Ot;let{w:$e,h:Ve}=sD(ee,Ot.width,Ot.height,b,S,Je);$e=Xs($e,Math.max(P,1),M),Ve=Xs(Ve,C,N),jt(I,$e,Ve,{e:ke.nativeEvent,node:Pe,size:Ot,handle:Je})},[A,$,T,s,ee,b,S,P,M,C,N,I]),gt=k.useCallback((ke,Pe)=>{X(!0);const ze=Ni(ee,b,S,_,E),Je={...Pe,handle:Pe.handle};Ie(ke,Je,ze,"onResizeStart")},[Ie,ee,b,S,_,E]),L=k.useCallback((ke,Pe)=>{const ze=Ni(ee,b,S,_,E),Je={...Pe,handle:Pe.handle};Ie(ke,Je,ze,"onResize")},[Ie,ee,b,S,_,E]),ae=k.useCallback((ke,Pe)=>{X(!1),V.current={top:0,left:0,width:0,height:0};const ze=Ni(ee,b,S,_,E),Je={...Pe,handle:Pe.handle};Ie(ke,Je,ze,"onResizeStop")},[Ie,ee,b,S,_,E]);k.useEffect(()=>{if(!x)return;const ke=K.current;if(!ke)return;const Pe=Q.current||{left:0,top:0},ze=G&&(x.left!==Pe.left||x.top!==Pe.top);if(G){if(ze){const Je=x.left-Y.current.left,rt=x.top-Y.current.top,vt={node:ke,deltaX:Je,deltaY:rt,lastX:Y.current.left,lastY:Y.current.top,x:x.left,y:x.top};Se(x.e,vt)}}else{const Je={node:ke,deltaX:x.left,deltaY:x.top,lastX:0,lastY:0,x:x.left,y:x.top};je(x.e,Je)}Q.current=x},[x,G,je,Se]);const ue=Ni(ee,b,S,_,E,G?Y.current:null,R?V.current:null),ye=oe.Children.only(e),de=Ni(ee,0,0,n,0).width,me=Ni(ee,0,0,P,C),U=Ni(ee,0,0,M,N),ie=[me.width,me.height],O=[Math.min(U.width,de),Math.min(U.height,1/0)],te=ye.props,ne=te.className,q=te.style;let he=oe.cloneElement(ye,{ref:K,className:cu("react-grid-item",ne,w,{static:d,resizing:R,"react-draggable":l,"react-draggable-dragging":G,dropping:!!x,cssTransforms:f}),style:{...m,...q,...fe(ue)}});const Me=W;return he=h.jsx(v9,{draggableOpts:{disabled:!c},className:c?void 0:"react-resizable-hide",width:ue.width,height:ue.height,minConstraints:ie,maxConstraints:O,onResizeStart:gt,onResize:L,onResizeStop:ae,transformScale:g,resizeHandles:B,handle:Me,children:he}),he=h.jsx(HD,{disabled:!l,onStart:je,onDrag:Se,onStop:Ce,handle:y,cancel:".react-resizable-handle"+(v?","+v:""),scale:g,nodeRef:K,children:he}),he}var ir=()=>{},yk="react-grid-layout",fE=!1;try{fE=/firefox/i.test(navigator.userAgent)}catch{}function j9(t,e){const n=oe.Children.toArray(t),s=oe.Children.toArray(e);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const i=n[r],o=s[r];if((i==null?void 0:i.key)!==(o==null?void 0:o.key))return!1}return!0}function vk(t,e,n,s,r){const i=[],o=new Set;oe.Children.forEach(e,l=>{if(!oe.isValidElement(l)||l.key===null)return;const c=String(l.key);o.add(c);const u=t.find(d=>d.i===c);if(u)i.push(wi(u));else{const f=l.props["data-grid"];f?i.push({i:c,x:f.x??0,y:f.y??0,w:f.w??1,h:f.h??1,minW:f.minW,maxW:f.maxW,minH:f.minH,maxH:f.maxH,static:f.static,isDraggable:f.isDraggable,isResizable:f.isResizable,resizeHandles:f.resizeHandles,isBounded:f.isBounded}):i.push({i:c,x:0,y:wl(i),w:1,h:1})}});const a=Gb(i,{cols:n});return br(a,s,n,r)}function F9(t){const{children:e,width:n,gridConfig:s,dragConfig:r,resizeConfig:i,dropConfig:o,positionStrategy:a=WO,compactor:l,layout:c=[],droppingItem:u,autoSize:d=!0,className:f="",style:p={},innerRef:g,onLayoutChange:x=ir,onDragStart:w=ir,onDrag:m=ir,onDragStop:y=ir,onResizeStart:v=ir,onResize:b=ir,onResizeStop:S=ir,onDrop:_=ir,onDropDragOver:E=ir}=t,P=k.useMemo(()=>({...HO,...s}),[s]),M=k.useMemo(()=>({...VO,...r}),[r]),C=k.useMemo(()=>({...YO,...i}),[i]),N=k.useMemo(()=>({...GO,...o}),[o]),{cols:I,rowHeight:B,maxRows:W,margin:j,containerPadding:z}=P,{enabled:F,bounded:A,handle:$,cancel:T}=M,{enabled:G,handles:D,handleComponent:R}=C,{enabled:X,defaultItem:K}=N,Y=l??Kb("vertical"),V=Y.type,Q=Y.allowOverlap,ee=Y.preventCollision??!1,fe=k.useMemo(()=>u??{i:"__dropping-elem__",...K},[u,K]),je=a.type==="transform",Se=a.scale,Ce=z??j,[Ie,gt]=k.useState(!1),[L,ae]=k.useState(()=>vk(c,e,I,V,Q)),[ue,ye]=k.useState(null),[de,me]=k.useState(!1),[U,ie]=k.useState(null),[O,te]=k.useState(),ne=k.useRef(null),q=k.useRef(null),he=k.useRef(null),Me=k.useRef(0),ke=k.useRef(L),Pe=k.useRef(c),ze=k.useRef(e),Je=k.useRef(V);k.useEffect(()=>{gt(!0),Qr(L,c)||x(L)},[]),k.useEffect(()=>{if(ue)return;const pe=!Qr(c,Pe.current),Ze=!j9(e,ze.current),_e=V!==Je.current;if(pe||Ze||_e){const Xe=vk(pe?c:L,e,I,V,Q);ae(Xe)}Pe.current=c,ze.current=e,Je.current=V},[c,e,I,V,Q,ue,L]),k.useEffect(()=>{!ue&&!Qr(L,ke.current)&&(ke.current=L,x(L))},[L,ue,x]);const rt=k.useMemo(()=>{if(!d)return;const pe=wl(L),Ze=Ce[1];return pe*B+(pe-1)*j[1]+Ze*2+"px"},[d,L,B,j,Ce]),vt=k.useCallback((pe,Ze,_e,Ue)=>{const Xe=ji(L,pe);if(!Xe)return;const Ge={w:Xe.w,h:Xe.h,x:Xe.x,y:Xe.y,i:pe};ne.current=wi(Xe),he.current=L,ye(Ge),w(L,Xe,Xe,null,Ue.e,Ue.node)},[L,w]),jt=k.useCallback((pe,Ze,_e,Ue)=>{const Xe=ne.current,Ge=ji(L,pe);if(!Ge)return;const Dt={w:Ge.w,h:Ge.h,x:Ge.x,y:Ge.y,i:pe},it=Gi(L,Ge,Ze,_e,!0,ee,V,I,Q);m(it,Xe,Ge,Dt,Ue.e,Ue.node),ae(Q?it:br(it,V,I)),ye(Dt)},[L,ee,V,I,Q,m]),Ot=k.useCallback((pe,Ze,_e,Ue)=>{if(!ue)return;const Xe=ne.current,Ge=ji(L,pe);if(!Ge)return;const Dt=Gi(L,Ge,Ze,_e,!0,ee,V,I,Q),it=Q?Dt:br(Dt,V,I);y(it,Xe,Ge,null,Ue.e,Ue.node);const rn=he.current;ne.current=null,he.current=null,ye(null),ae(it),rn&&!Qr(rn,it)&&x(it)},[ue,L,ee,V,I,Q,y,x]),$e=k.useCallback((pe,Ze,_e,Ue)=>{const Xe=ji(L,pe);Xe&&(q.current=wi(Xe),he.current=L,me(!0),v(L,Xe,Xe,null,Ue.e,Ue.node))},[L,v]),Ve=k.useCallback((pe,Ze,_e,Ue)=>{const Xe=q.current,{handle:Ge}=Ue;let Dt=!1,it,rn;const[El,Pi]=KO(L,pe,Tt=>(it=Tt.x,rn=Tt.y,["sw","w","nw","n","ne"].includes(Ge)&&(["sw","nw","w"].includes(Ge)&&(it=Tt.x+(Tt.w-Ze),Ze=Tt.x!==it&&it<0?Tt.w:Ze,it=it<0?0:it),["ne","n","nw"].includes(Ge)&&(rn=Tt.y+(Tt.h-_e),_e=Tt.y!==rn&&rn<0?Tt.h:_e,rn=rn<0?0:rn),Dt=!0),ee&&!Q&&R3(L,{...Tt,w:Ze,h:_e,x:it??Tt.x,y:rn??Tt.y}).filter(d4=>d4.i!==Tt.i).length>0&&(rn=Tt.y,_e=Tt.h,it=Tt.x,Ze=Tt.w,Dt=!1),Tt.w=Ze,Tt.h=_e,Tt));if(!Pi)return;let qu=El;Dt&&it!==void 0&&rn!==void 0&&(qu=Gi(El,Pi,it,rn,!0,ee,V,I,Q));const Fy={w:Pi.w,h:Pi.h,x:Pi.x,y:Pi.y,i:pe,static:!0};b(qu,Xe,Pi,Fy,Ue.e,Ue.node),ae(Q?qu:br(qu,V,I)),ye(Fy)},[L,ee,Q,V,I,b]),sn=k.useCallback((pe,Ze,_e,Ue)=>{const Xe=q.current,Ge=ji(L,pe),Dt=Q?L:br(L,V,I);S(Dt,Xe,Ge??null,null,Ue.e,Ue.node);const it=he.current;q.current=null,he.current=null,ye(null),me(!1),ae(Dt),it&&!Qr(it,Dt)&&x(Dt)},[L,Q,V,I,S,x]),mn=k.useCallback(()=>{const pe=br(L.filter(Ze=>Ze.i!==fe.i),V,I,Q);ae(pe),ie(null),ye(null),te(void 0)},[L,fe.i,V,I,Q]),se=k.useCallback(pe=>{var it;if(pe.preventDefault(),pe.stopPropagation(),fE&&!((it=pe.nativeEvent.target)!=null&&it.classList.contains(yk)))return!1;const Ze=E(pe);if(Ze===!1)return U&&mn(),!1;const _e={...fe,...Ze},Ue=pe.currentTarget.getBoundingClientRect(),Xe=pe.clientX-Ue.left,Ge=pe.clientY-Ue.top,Dt={left:Xe/Se,top:Ge/Se,e:pe.nativeEvent};if(U)O&&(O.left!==Xe||O.top!==Ge)&&te(Dt);else{const El=mh({cols:I,margin:j,maxRows:W,rowHeight:B,containerWidth:n,containerPadding:Ce},Ge,Xe,_e.w,_e.h);ie(h.jsx("div",{},_e.i)),te(Dt),ae([...L,{..._e,x:El.x,y:El.y,static:!1,isDraggable:!0}])}},[U,O,fe,E,mn,Se,I,j,W,B,n,Ce,L]),J=k.useCallback(pe=>{pe.preventDefault(),pe.stopPropagation(),Me.current--,Me.current===0&&mn()},[mn]),H=k.useCallback(pe=>{pe.preventDefault(),pe.stopPropagation(),Me.current++},[]),Ne=k.useCallback(pe=>{pe.preventDefault(),pe.stopPropagation();const Ze=L.find(_e=>_e.i===fe.i);Me.current=0,mn(),_(L,Ze,pe.nativeEvent)},[L,fe.i,mn,_]),lt=k.useCallback((pe,Ze)=>{if(!pe||!pe.key)return null;const _e=ji(L,String(pe.key));if(!_e)return null;const Ue=typeof _e.isDraggable=="boolean"?_e.isDraggable:!_e.static&&F,Xe=typeof _e.isResizable=="boolean"?_e.isResizable:!_e.static&&G,Ge=_e.resizeHandles||[...D],Dt=Ue&&A&&_e.isBounded!==!1,it=R;return h.jsx(bk,{containerWidth:n,cols:I,margin:j,containerPadding:Ce,maxRows:W,rowHeight:B,cancel:T,handle:$,onDragStart:vt,onDrag:jt,onDragStop:Ot,onResizeStart:$e,onResize:Ve,onResizeStop:sn,isDraggable:Ue,isResizable:Xe,isBounded:Dt,useCSSTransforms:je&&Ie,usePercentages:!Ie,transformScale:Se,w:_e.w,h:_e.h,x:_e.x,y:_e.y,i:_e.i,minH:_e.minH,minW:_e.minW,maxH:_e.maxH,maxW:_e.maxW,static:_e.static,droppingPosition:Ze?O:void 0,resizeHandles:Ge,resizeHandle:it,children:pe},_e.i)},[L,n,I,j,Ce,W,B,T,$,vt,jt,Ot,$e,Ve,sn,F,G,A,je,Ie,Se,O,D,R]),Re=()=>ue?h.jsx(bk,{w:ue.w,h:ue.h,x:ue.x,y:ue.y,i:ue.i,className:`react-grid-placeholder ${de?"placeholder-resizing":""}`,containerWidth:n,cols:I,margin:j,containerPadding:Ce,maxRows:W,rowHeight:B,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:je,transformScale:Se,children:h.jsx("div",{})}):null,qt=cu(yk,f),Fe={height:rt,...p};return h.jsxs("div",{ref:g,className:qt,style:Fe,onDrop:X?Ne:void 0,onDragLeave:X?J:void 0,onDragEnter:X?H:void 0,onDragOver:X?se:void 0,children:[oe.Children.map(e,pe=>oe.isValidElement(pe)?lt(pe):null),X&&U&&lt(U,!0),Re()]})}var z9={lg:1200,md:996,sm:768,xs:480,xxs:0},B9={lg:12,md:10,sm:6,xs:4,xxs:2},cg=()=>{};function $9(t,e,n,s,r){const i=[];oe.Children.forEach(e,a=>{if(!oe.isValidElement(a)||a.key===null)return;const l=String(a.key),c=t.find(u=>u.i===l);if(c)i.push({...c,i:l});else{const d=a.props["data-grid"];d?i.push({i:l,x:d.x??0,y:d.y??0,w:d.w??1,h:d.h??1,minW:d.minW,maxW:d.maxW,minH:d.minH,maxH:d.maxH,static:d.static,isDraggable:d.isDraggable,isResizable:d.isResizable,resizeHandles:d.resizeHandles,isBounded:d.isBounded}):i.push({i:l,x:0,y:wl(i),w:1,h:1})}});const o=Gb(i,{cols:n});return br(o,s,n,r)}function U9(t){const{children:e,width:n,breakpoint:s,breakpoints:r=z9,cols:i=B9,layouts:o={},rowHeight:a=150,maxRows:l=1/0,margin:c=[10,10],containerPadding:u=null,compactor:d,onBreakpointChange:f=cg,onLayoutChange:p=cg,onWidthChange:g=cg,...x}=t,w=d??Kb("vertical"),m=w.type,y=w.allowOverlap,v=k.useMemo(()=>s??ak(r,n),[]),b=k.useMemo(()=>lk(v,i),[v,i]),S=k.useMemo(()=>sg(o,r,v,v,b,m),[]),[_,E]=k.useState(v),[P,M]=k.useState(b),[C,N]=k.useState(S),[I,B]=k.useState(o),W=k.useRef(n),j=k.useRef(s),z=k.useRef(r),F=k.useRef(i),A=k.useRef(o),$=k.useRef(m);k.useEffect(()=>{if(!Qr(o,A.current)){const X=sg(o,r,_,_,P,m);N(X),B(o),A.current=o}},[o,r,_,P,m]),k.useEffect(()=>{if(m!==$.current){const X=br(Os(C),m,P,y),K={...I,[_]:X};N(X),B(K),p(X,K),$.current=m}},[m,C,P,y,I,_,p]),k.useEffect(()=>{const X=n!==W.current,K=s!==j.current,Y=!Qr(r,z.current),V=!Qr(i,F.current);if(X||K||Y||V){const Q=s??ak(r,n),ee=lk(Q,i),fe=_;if(fe!==Q||Y||V){const Ce={...I};Ce[fe]||(Ce[fe]=Os(C));let Ie=sg(Ce,r,Q,fe,ee,m);Ie=$9(Ie,e,ee,m,y),Ce[Q]=Ie,E(Q),M(ee),N(Ie),B(Ce),f(Q,ee),p(Ie,Ce)}const je=Id(c,Q),Se=u?Id(u,Q):null;g(n,je,ee,Se),W.current=n,j.current=s,z.current=r,F.current=i}},[n,s,r,i,_,P,C,I,e,m,y,c,u,f,p,g]);const T=k.useCallback(X=>{const K={...I,[_]:X};N(X),B(K),p(X,K)},[I,_,p]),G=k.useMemo(()=>Id(c,_),[c,_]),D=k.useMemo(()=>u===null?null:Id(u,_),[u,_]),R=k.useMemo(()=>({cols:P,rowHeight:a,maxRows:l,margin:G,containerPadding:D}),[P,a,l,G,D]);return h.jsx(F9,{...x,width:n,gridConfig:R,compactor:w,onLayoutChange:T,layout:C,children:e})}function pE(t){const{children:e,width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,rowHeight:u,maxRows:d,margin:f,containerPadding:p,droppingItem:g,compactType:x,preventCollision:w=!1,allowOverlap:m=!1,verticalCompact:y,isDraggable:v=!0,isBounded:b=!1,draggableHandle:S,draggableCancel:_,isResizable:E=!0,resizeHandles:P=["se"],resizeHandle:M,isDroppable:C=!1,useCSSTransforms:N=!0,transformScale:I=1,autoSize:B,className:W,style:j,innerRef:z,onDragStart:F,onDrag:A,onDragStop:$,onResizeStart:T,onResize:G,onResizeStop:D,onDrop:R,onDropDragOver:X}=t;let K=x===void 0?"vertical":x;y===!1&&(K=null);const Y={enabled:v,bounded:b,handle:S,cancel:_},V={enabled:E,handles:P,handleComponent:M},Q={enabled:C};let ee;N?I!==1?ee=UO(I):ee=A3:ee=$O;const fe=Kb(K,m,w);return h.jsx(U9,{width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,rowHeight:u,maxRows:d,margin:f,containerPadding:p,compactor:fe,dragConfig:Y,resizeConfig:V,dropConfig:Q,positionStrategy:ee,droppingItem:g,autoSize:B,className:W,style:j,innerRef:z,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,onDragStart:F,onDrag:A,onDragStop:$,onResizeStart:T,onResize:G,onResizeStop:D,onDrop:R,onDropDragOver:X,children:e})}pE.displayName="ResponsiveReactGridLayout";var W9=pE,H9="react-grid-layout";function V9(t){function e(n){const{measureBeforeMount:s=!1,className:r,style:i,...o}=n,[a,l]=k.useState(1280),[c,u]=k.useState(!1),d=k.useRef(null),f=k.useRef(null);return k.useEffect(()=>{u(!0),f.current=new ResizeObserver(g=>{if(d.current instanceof HTMLElement&&g[0]){const w=g[0].contentRect.width;l(w)}});const p=d.current;return p instanceof HTMLElement&&f.current.observe(p),()=>{var g;p instanceof HTMLElement&&f.current&&f.current.unobserve(p),(g=f.current)==null||g.disconnect()}},[]),s&&!c?h.jsx("div",{className:cu(r,H9),style:i,ref:d}):h.jsx(t,{innerRef:d,className:r,style:i,...o,width:a})}return e.displayName=`WidthProvider(${t.displayName||t.name||"Component"})`,e}const xh=[[0,0,8,16],[8,0,2,16],[0,36,3,12],[0,16,3,20],[3,16,7,7],[3,23,7,8],[5,31,7,6],[3,39,7,6]],Y9=[[0,0,8,16],[8,0,2,16],[8,39,2,11],[8,16,2,23],[0,16,8,7],[0,23,8,8],[0,31,8,6],[0,37,8,6]],wk=0,G9=7;function q9(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""}function K9(t,e){return Math.floor(Math.random()*(e-t+1))+t}function X9(t){const e=Math.ceil(Math.random()*4)+1;return{x:K9(0,5)*2%12,y:Math.floor(t/6)*e,w:2,h:e,i:t.toString(),static:Math.random()<.05}}function Q9(t,e){const[n,s,r,i]=e;return{x:n,y:s,w:r,h:i,i:t.toString(),static:!0}}function bh(t,e=9){const n=[];for(let s=0;s<e;s++)s<t.length?n.push(Q9(s,t[s])):n.push(X9(s));return n}function J9(t,e){const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const r of n){const i=t[r],o=e[r];if(!i||!o){if(i!==o)return!1;continue}if(i.length!==o.length)return!1;for(let a=0;a<i.length;a++){const l=i[a],c=o[a];if(l.x!==c.x||l.y!==c.y||l.w!==c.w||l.h!==c.h)return!1}}return!0}function ug(t,e){const n={};for(const s in t){const r=t[s];r&&(n[s]=r.map(i=>({...i,static:e})))}return n}const Z9=V9(W9),Of=class Of extends oe.Component{constructor(n){super(n);re(this,"isUpdatingLayout",!1);re(this,"domCache",null);re(this,"lastLayoutKey","");re(this,"handleResponsiveLayoutChange",(n,s)=>{const r=Array.isArray(n)?n:[n],i=s;this.onLayoutChange(r,i)});re(this,"generateNewLayout",()=>{const n=bh(xh),s=this.props.allStatic??this.state.allStatic,r=n.map(i=>({...i,static:s}));this.domCache=null,this.lastLayoutKey="",this.setState({layouts:{lg:r}})});this.state={currentBreakpoint:"lg",compactType:n.compactType??"vertical",mounted:!1,layouts:{lg:n.initialLayout||bh(xh)},allStatic:n.allStatic??!0},this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onCompactTypeChange=this.onCompactTypeChange.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.onNewLayout=this.onNewLayout.bind(this),this.onToggleStatic=this.onToggleStatic.bind(this)}componentDidMount(){this.setState({mounted:!0})}generateDOM(){const n=this.state.layouts.lg||[],{slotContent:s=[]}=this.props,r=this.props.allStatic??this.state.allStatic,i=`${n.length}-${r}-${s.length}`;if(this.domCache&&this.lastLayoutKey===i)return this.domCache;const o=[];for(let a=0;a<n.length;a++){const l=n[a],c=a>=wk&&a<=G9,u=a-wk,d=c&&s[u]?s[u]:null,f=l.static??r;o.push(h.jsx("div",{className:f?"static":"",children:d?h.jsx("div",{className:"external-slot-content",children:d}):f?h.jsxs("span",{className:"text",title:"This item is static and cannot be removed or resized.",children:["Static - ",a]}):h.jsx("span",{className:"text",children:a})},l.i||a.toString()))}return this.domCache=o,this.lastLayoutKey=i,o}onBreakpointChange(n){this.setState({currentBreakpoint:n})}onCompactTypeChange(){if(this.props.onCompactTypeChange)this.props.onCompactTypeChange();else{const{compactType:n}=this.state,s=n==="horizontal"?"vertical":n==="vertical"?null:"horizontal";this.setState({compactType:s})}}onLayoutChange(n,s){if(this.isUpdatingLayout){this.props.onLayoutChange(n,s);return}const r=this.props.allStatic??this.state.allStatic;if(r){this.props.onLayoutChange(n,s);return}const i=ug(s,r);!J9(this.state.layouts,i)&&(this.domCache=null,this.lastLayoutKey="",this.isUpdatingLayout=!0,this.setState({layouts:i},()=>{this.isUpdatingLayout=!1})),this.props.onLayoutChange(n,i)}onNewLayout(){this.props.onNewLayout?this.props.onNewLayout():this.generateNewLayout()}onToggleStatic(){if(this.props.onToggleStatic)this.props.onToggleStatic();else{const n=!this.state.allStatic,s=ug(this.state.layouts,n);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:n,layouts:s})}}componentDidUpdate(n){if(n.compactType!==this.props.compactType&&this.props.compactType!==void 0&&this.setState({compactType:this.props.compactType}),n.allStatic!==this.props.allStatic&&this.props.allStatic!==void 0){const s=ug(this.state.layouts,this.props.allStatic);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:this.props.allStatic,layouts:s})}n.slotContent!==this.props.slotContent&&(this.domCache=null,this.lastLayoutKey="")}render(){const{cols:n}=this.props,s=n||Of.defaultProps.cols||{},r=this.props.compactType??this.state.compactType;return h.jsxs("div",{children:[h.jsxs("div",{children:["Current Breakpoint: ",this.state.currentBreakpoint," (",s[this.state.currentBreakpoint]," columns)"]}),h.jsxs("div",{children:["Compaction type: ",q9(r)||"No Compaction"]}),h.jsx(Z9,{...this.props,layouts:this.state.layouts,onBreakpointChange:this.onBreakpointChange,onLayoutChange:this.handleResponsiveLayoutChange,measureBeforeMount:!1,useCSSTransforms:this.state.mounted,compactType:r,preventCollision:!r,children:this.generateDOM()})]})}};re(Of,"defaultProps",{className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},initialLayout:bh(xh)});let Hm=Of;function gE(){const t=document.getElementById("tradingview-widget-script");t&&t.parentNode&&t.parentNode.removeChild(t)}function eL(){return new Promise((t,e)=>{if(typeof window.TradingView<"u"){t();return}gE();const n=document.createElement("script");n.id="tradingview-widget-script",n.src=WN,n.async=!0,n.onload=()=>{typeof window.TradingView<"u"?t():e(new Error("TradingView script loaded but TradingView object not found"))},n.onerror=()=>{e(new Error("Failed to load TradingView script"))},document.head.appendChild(n)})}function tL(t){if(typeof window.TradingView>"u")throw new Error("TradingView is not loaded. Call loadTradingViewScript() first.");const e={autosize:t.autosize!==!1,symbol:t.symbol,interval:t.interval,timezone:t.timezone||"Etc/UTC",theme:"dark",style:"1",locale:t.locale||"en",toolbar_bg:"#1a1a1a",enable_publishing:t.enablePublishing||!1,hide_top_toolbar:t.hideTopToolbar||!1,hide_legend:t.hideLegend||!1,save_image:!1,container_id:t.containerId,hide_volume:t.hideVolume||!1,studies:t.studies||["RSI@tv-basicstudies","MASimple@tv-basicstudies"]};return new window.TradingView.widget(e)}function nL(){return`tradingview-widget-container-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function sL({symbol:t=$N,interval:e=UN,isCollapsed:n=!1,className:s=""}){const r=k.useRef(null),i=k.useRef(null),o=k.useRef(nL());return k.useEffect(()=>{if(n||!r.current)return;r.current&&(r.current.id=o.current);let a=!0;return eL().then(()=>{if(!a||!r.current)return;const l={symbol:t,interval:e,containerId:o.current};i.current=tL(l)}).catch(l=>{console.error("Failed to load TradingView widget:",l)}),()=>{a=!1,i.current&&(i.current=null)}},[t,e,n]),k.useEffect(()=>()=>{gE()},[]),n?h.jsx("div",{className:`tradingview-widget-container ${s}`}):h.jsx("div",{className:`tradingview-widget-wrapper ${s}`,children:h.jsx("div",{ref:r,id:o.current,className:"tradingview-widget-container"})})}function rL(t,e,n){return e!==t?h.jsx("span",{style:{fontSize:"0.7rem",opacity:.5,marginLeft:"0.25rem"},children:""}):h.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"0.25rem"},children:n==="asc"?"":""})}function zu({message:t="Loading..."}){return h.jsx("div",{className:"message loading",children:t})}function Bu({error:t}){return h.jsxs("div",{className:"message error",children:["Error: ",t]})}function sl({message:t}){return h.jsx("div",{className:"message empty",children:t})}function mE({message:t}){return h.jsx("div",{className:"message warning",children:t})}function xE({isConnected:t,connectedText:e=" LIVE",disconnectedText:n=" OFFLINE"}){return h.jsx("div",{className:"status-indicator",children:h.jsx("span",{className:`status-dot ${t?"connected":"disconnected"}`,children:t?e:n})})}function $u({title:t,children:e}){return h.jsxs("div",{className:"layout-header",children:[h.jsx("div",{className:"layout-header-title",children:t}),e&&h.jsx("div",{className:"layout-header-actions",children:e})]})}function zt({field:t,currentSortField:e,sortDirection:n,onSort:s,children:r,center:i=!1}){return h.jsxs("div",{className:`table-header-cell ${i?"center":""}`,onClick:()=>s(t),children:[r,rL(t,e,n)]})}function bE({children:t,center:e=!1}){return h.jsx("div",{className:`table-header-cell ${e?"center":""}`,children:t})}function iL({onClick:t,disabled:e}){return console.log("[CancelButton] Rendering",{disabled:e,hasOnClick:!!t}),h.jsx("button",{onClick:n=>{console.log("[CancelButton] Button clicked",{disabled:e,event:n}),!e&&t?t(n):console.warn("[CancelButton] Click ignored - button is disabled",{disabled:e})},onMouseDown:n=>{console.log("[CancelButton] Mouse down",{disabled:e,event:n})},className:"btn btn-danger",disabled:e,style:{pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer"},children:"Cancel"})}function oL({onClick:t}){return h.jsx("button",{onClick:t,className:"btn btn-success",children:"Close"})}function aL({baseURL:t,wsURL:e,marketId:n,maxDepth:s=DN,height:r=AN,authToken:i,walletAddress:o,deviceID:a}){var P,M;const{orderbook:l,loading:c,error:u,isConnected:d,wsError:f}=vA({baseURL:t,wsURL:e,marketId:n,maxDepth:s,authToken:i,walletAddress:o,deviceID:a}),p=k.useRef(null),g=k.useRef(null),x=k.useRef(null),w=k.useRef(0),m=k.useRef(0);k.useEffect(()=>{const C=l.asks.length!==w.current,N=l.bids.length!==m.current;if(!(!C&&!N))return w.current=l.asks.length,m.current=l.bids.length,x.current!==null&&cancelAnimationFrame(x.current),x.current=requestAnimationFrame(()=>{if(p.current&&C){const I=p.current;I.scrollTop=I.scrollHeight}if(g.current&&N){const I=g.current;I.scrollTop=0}x.current=null}),()=>{x.current!==null&&(cancelAnimationFrame(x.current),x.current=null)}},[l.asks.length,l.bids.length]);const y=l.asks.length>0?((P=l.asks[l.asks.length-1])==null?void 0:P.cumulative)??0:0,v=l.bids.length>0?((M=l.bids[l.bids.length-1])==null?void 0:M.cumulative)??0:0,b=k.useMemo(()=>Math.max(y,v),[y,v]),S=Am,_=Rm,E=k.useCallback(C=>b===0?0:C/b*100,[b]);return c?h.jsx(zu,{message:"Loading orderbook..."}):u?h.jsx(Bu,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[f&&(l.asks.length>0||l.bids.length>0)&&h.jsxs("div",{className:"orderbook-ws-warning",children:[h.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),h.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),h.jsx($u,{title:h.jsx(xE,{isConnected:d}),children:h.jsxs("div",{children:["Depth: ",s]})}),l.midPrice&&h.jsxs("div",{className:"orderbook-mid-price",children:[h.jsx("div",{className:"orderbook-mid-price-value",children:S(l.midPrice)}),l.spread!==void 0&&h.jsxs("div",{className:"orderbook-mid-price-spread",children:["Spread: ",S(l.spread)]})]}),h.jsxs("div",{className:"orderbook-content",children:[h.jsxs("div",{className:"orderbook-section",ref:p,children:[l.asks.map((C,N)=>{const I=E(C.cumulative),B=C.flash==="up"?"flash-up":C.flash==="down"?"flash-down-ask":"";return h.jsxs("div",{className:`orderbook-level ask ${B}`,style:{borderBottom:N<l.asks.length-1?void 0:"none"},children:[h.jsx("div",{className:"orderbook-depth-bar ask",style:{width:`${I}%`}}),h.jsx("div",{className:"orderbook-level-content ask",children:S(C.price)}),h.jsx("div",{className:"orderbook-level-content right",children:_(C.size)}),h.jsx("div",{className:"orderbook-depth-indicator",children:h.jsx("div",{className:"orderbook-depth-line ask"})})]},`ask-${C.price}-${N}`)}),l.asks.length===0&&h.jsx(sl,{message:"No ask orders"})]}),h.jsxs("div",{className:"orderbook-section bids",ref:g,children:[l.bids.map((C,N)=>{const I=E(C.cumulative),B=C.flash==="up"?"flash-up":C.flash==="down"?"flash-down-bid":"";return h.jsxs("div",{className:`orderbook-level bid ${B}`,style:{borderBottom:N<l.bids.length-1?void 0:"none"},children:[h.jsx("div",{className:"orderbook-depth-bar bid",style:{width:`${I}%`}}),h.jsx("div",{className:"orderbook-level-content bid",children:S(C.price)}),h.jsx("div",{className:"orderbook-level-content right",children:_(C.size)}),h.jsx("div",{className:"orderbook-depth-indicator",children:h.jsx("div",{className:"orderbook-depth-line bid"})})]},`bid-${C.price}-${N}`)}),l.bids.length===0&&h.jsx(sl,{message:"No bid orders"})]})]}),h.jsx(yE,{totalBids:v,totalAsks:y})]})}const yE=oe.memo(({totalBids:t,totalAsks:e})=>{const n=t+e,s=n>0?`${(t/n*100).toFixed(0)}%`:"0%",r=n>0?`${(e/n*100).toFixed(0)}%`:"0%";return h.jsxs("div",{className:"orderbook-footer",children:[h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar bid"}),h.jsx("span",{className:"color-text-muted",children:s})]}),h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar ask"}),h.jsx("span",{className:"color-text-muted",children:r})]})]})});yE.displayName="FooterSummary";const lL=oe.memo(aL);function cL({baseURL:t=Ja,wsURL:e=i3,marketId:n=RN,symbol:s,limit:r=ON,authToken:i,walletAddress:o,deviceID:a}){const{lastPrice:l,displayPrice:c,loading:u,error:d,isConnected:f,priceChange:p}=l0({baseURL:t,wsURL:e,marketId:n,symbol:s,limit:r,authToken:i,walletAddress:o,deviceID:a}),[g,x]=k.useState([]),[w,m]=k.useState(!1),y=k.useRef(null),v=k.useRef(!1),b=k.useRef(null),S=k.useCallback(async()=>{if(!y.current||!n){console.debug("[TradePrice] fetchRecentTrades skipped: missing client or marketId");return}if(v.current){console.debug("[TradePrice] fetchRecentTrades skipped: already fetching");return}console.debug("[TradePrice] Starting fetchRecentTrades"),v.current=!0,m(!0);try{const A=await y.current.getRecentTrades(n,20);if(A&&Array.isArray(A)&&A.length>0){const T=[...A].sort((G,D)=>{const R=hr(G.timestamp);return hr(D.timestamp)-R}).map(G=>{const D=hr(G.timestamp),R=typeof G.quantity=="string"?Te(G.quantity):typeof G.quantity=="number"?G.quantity:0,X=typeof G.price=="string"?Te(G.price):typeof G.price=="number"?G.price:0;return{time:D,size:R,price:X,is_buyer_maker:!1}});x(T),console.debug("[TradePrice] fetchRecentTrades completed successfully")}else x([]),console.debug("[TradePrice] fetchRecentTrades: no trades returned")}catch(A){console.error("[TradePrice] Failed to fetch recent trades:",A),x([])}finally{console.debug("[TradePrice] fetchRecentTrades finished, clearing loading state"),m(!1),v.current=!1}},[n]);k.useEffect(()=>{if(!n){console.debug("[TradePrice] Initialization skipped: no marketId");return}console.debug("[TradePrice] Initializing trades fetch for marketId:",n),v.current=!1,m(!1),y.current=new wn({baseURL:t});const A=setTimeout(()=>{y.current&&n&&!v.current?(console.debug("[TradePrice] Executing initial fetchRecentTrades"),S()):console.debug("[TradePrice] Initial fetch skipped:",{hasClient:!!y.current,hasMarketId:!!n,isFetching:v.current})},100);return()=>{console.debug("[TradePrice] Cleaning up trades fetch effect"),clearTimeout(A),v.current=!1,m(!1)}},[t,n]);const _=k.useRef(""),E=k.useRef(null),P=k.useCallback(()=>{const A=b.current;if(!A)return;const $=A.parentElement;if(!$)return;const T=A.textContent||"";if(!T)return;const G=window.getComputedStyle($),D=parseFloat(G.paddingLeft)+parseFloat(G.paddingRight),R=$.clientWidth-D;let X=12,K=48,Y=X;const V=document.createElement("div");for(V.style.position="absolute",V.style.visibility="hidden",V.style.whiteSpace="nowrap",V.style.fontFamily=window.getComputedStyle(A).fontFamily,V.style.fontWeight=window.getComputedStyle(A).fontWeight,document.body.appendChild(V);X<=K;){const ee=Math.floor((X+K)/2);V.style.fontSize=`${ee}px`,V.textContent=T,V.offsetWidth<=R?(Y=ee,X=ee+1):K=ee-1}document.body.removeChild(V);const Q=parseFloat(window.getComputedStyle(A).fontSize);Math.abs(Q-Y)>.5&&(A.style.fontSize=`${Y}px`)},[]);k.useEffect(()=>{if(c==null)return;const A=$p(c);if(A===_.current)return;_.current=A,E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{P()},150);let $;const T=()=>{clearTimeout($),$=window.setTimeout(()=>{E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{P()},150)},100)};return window.addEventListener("resize",T),()=>{E.current!==null&&clearTimeout(E.current),clearTimeout($),window.removeEventListener("resize",T)}},[c,P]);const M=k.useCallback(A=>{if(!A||isNaN(A)||A<=0)return"Invalid";let $=A;$<9466848e5&&($=$*1e3);const T=new Date($);return isNaN(T.getTime())?"Invalid":T.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},[]),C=k.useCallback(A=>A?"#51cf66":"#ff6b6b",[]),N=k.useCallback(A=>A?"BUY":"SELL",[]),I=k.useCallback(A=>A?"":"",[]);if(u)return h.jsx(zu,{message:"Loading trade price..."});if(d)return h.jsx(Bu,{error:d});if(c==null)return h.jsx(sl,{message:"No trade data available"});const B=l&&l.is_buyer_maker!==void 0,W=B?C(l.is_buyer_maker):"#888",j=B?N(l.is_buyer_maker):"N/A",z=B?I(l.is_buyer_maker):"",F=p==="up"?"flash-price-up":p==="down"?"flash-price-down":"";return h.jsxs("div",{className:"layout-container trade-price-container",children:[h.jsx($u,{title:h.jsx(xE,{isConnected:f}),children:h.jsx("div",{children:"Last Trade Price"})}),h.jsxs("div",{className:`trade-price-main ${F}`,children:[h.jsx("div",{ref:b,className:"trade-price-value",style:{color:W},children:$p(c)}),h.jsxs("div",{className:"trade-price-side",style:{color:W},children:[h.jsx("span",{children:z}),h.jsx("span",{children:j})]})]}),h.jsx("div",{className:"trade-price-trades-table",children:w?h.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#888"},children:"Loading trades..."}):g.length===0?h.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#888"},children:"No trades available"}):h.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[h.jsx("thead",{children:h.jsxs("tr",{style:{borderBottom:"1px solid #2a2e39",color:"#888"},children:[h.jsx("th",{style:{textAlign:"left",padding:"0.5rem",fontWeight:"500"},children:"Time"}),h.jsx("th",{style:{textAlign:"right",padding:"0.5rem",fontWeight:"500"},children:"Size"}),h.jsx("th",{style:{textAlign:"right",padding:"0.5rem",fontWeight:"500"},children:"Price"})]})}),h.jsx("tbody",{children:g.map(A=>{const $=A.is_buyer_maker?"#51cf66":"#ff6b6b";return h.jsxs("tr",{style:{borderBottom:"1px solid #2a2e39"},children:[h.jsx("td",{style:{padding:"0.5rem",color:"#d1d4dc"},children:M(A.time)}),h.jsx("td",{style:{padding:"0.5rem",textAlign:"right",color:"#d1d4dc"},children:wA(A.size)}),h.jsx("td",{style:{padding:"0.5rem",textAlign:"right",color:$,fontWeight:"500"},children:$p(A.price)})]},`${A.time}-${A.price}-${A.size}`)})})]})})]})}const uL=oe.memo(cL),dL=({...t})=>h.jsx(tR,{...t,className:"toaster",expand:!0,richColors:!1,closeButton:!1,toastOptions:{duration:4e3,classNames:{toast:"toast",title:"toast-title",description:"toast-description",actionButton:"toast-action-button",cancelButton:"toast-cancel-button",closeButton:"toast-close-button"}}}),hL=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch{try{const n=document.createElement("textarea");return n.value=t,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),!0}catch(n){return console.error("Failed to copy to clipboard:",n),!1}}},In=t=>({label:"Copy",onClick:async()=>{await hL(t)?we.success("Error message copied to clipboard"):we.error("Failed to copy error message")}});function vE(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(""),[l,c]=k.useState(0),u=k.useRef(null),d=k.useRef(null),f=k.useRef(0),p=k.useRef(!0),g=k.useRef(!1),x=k.useRef(t);x.current=t;const w=k.useCallback(b=>{console.log("[useBucketCollections] [transformBucketToCollection] Transforming bucket:",{rawBucket:b,bucketId:b.bucket_id,usedMargin:b.used_margin,totalEquity:b.total_equity,dedicatedMargin:b.dedicated_margin});const S=s3(b,Te);console.log("[useBucketCollections] [transformBucketToCollection] Transformed to Bucket:",S);const _=String(S.bucketId).trim();(!_||_===""||_==="undefined"||_==="null")&&console.warn("[useBucketCollections] [transformBucketToCollection] Invalid bucketId detected:",{bucketId:_,rawBucket:{bucket_id:b.bucket_id},fullRawBucket:b});const E=pN(S);return console.log("[useBucketCollections] [transformBucketToCollection] Final BucketCollection:",E),E},[]),m=k.useCallback(async()=>{if(!u.current)return;const b=x.current;if(!b.walletAddress||b.walletAddress.trim()===""){c(0);return}try{const S=await u.current.getBalanceDecimal(b.walletAddress,"USDC"),_=Te(S.available_balance);c(_)}catch(S){console.warn("Failed to fetch spot wallet balance (USDC):",S),c(0)}},[]),y=k.useCallback(async()=>{if(!u.current)return;const b=x.current;if(!b.walletAddress||b.walletAddress.trim()===""){a("Wallet address is required"),s([]),i(!1),p.current=!1;return}a(""),p.current&&i(!0);try{console.log("[useBucketCollections] [fetchCollections] Starting fetch...",{walletAddress:b.walletAddress,useWebSocket:e,isSubscribed:g.current}),m(),console.log("[useBucketCollections] [fetchCollections] Calling getBuckets API...");const S=await u.current.getBuckets(b.walletAddress);console.log("[useBucketCollections] [fetchCollections] Raw API response:",{response:S,responseType:typeof S,isArray:Array.isArray(S),responseLength:Array.isArray(S)?S.length:"N/A"});const _=Array.isArray(S)?S:[];console.log("[useBucketCollections] [fetchCollections] Buckets data after normalization:",{bucketsData:_,bucketsDataLength:_.length,bucketsDataTypes:_.map((M,C)=>({index:C,type:typeof M,hasBucketId:!!(M!=null&&M.bucket_id),bucketId:M==null?void 0:M.bucket_id}))}),console.log(`[useBucketCollections] [fetchCollections] About to transform ${_.length} buckets:`,_);const E=_.map(w);console.log(`[useBucketCollections] [fetchCollections] Transformed ${E.length} bucket collections:`,E.map(M=>({bucketId:M.bucketId,marginType:M.marginType,nominalValue:M.nominalValue,maintenanceMargin:M.maintenanceMargin,riskRatio:M.riskRatio})));const P=E.filter(M=>M.bucketId&&M.bucketId.trim()!=="");P.length!==E.length&&console.warn(`[useBucketCollections] [fetchCollections] Filtered out ${E.length-P.length} collections with empty bucketId`,{filtered:E.filter(M=>!M.bucketId||M.bucketId.trim()==="")}),console.log("[useBucketCollections] [fetchCollections] Setting collections state:",{validCollectionsCount:P.length,validCollections:P}),s(P),(!e||!g.current)&&(p.current=!1,i(!1))}catch(S){const _=S instanceof Error?S.message:"Failed to load bucket collections";a(_),console.error("[useBucketCollections] [fetchCollections] Failed to fetch bucket collections:",{error:S,errorMessage:_,walletAddress:b.walletAddress,stack:S instanceof Error?S.stack:void 0}),(!e||!g.current)&&(p.current=!1,i(!1))}},[w,m,e]),v=k.useCallback(b=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] WebSocket data received:",{data:b,hasBuckets:!!b.buckets,bucketsIsArray:Array.isArray(b.buckets),bucketsLength:Array.isArray(b.buckets)?b.buckets.length:0}),b.buckets&&Array.isArray(b.buckets)){console.log("[useBucketCollections] [handleBucketsUpdate] Transforming WebSocket buckets:",b.buckets);const S=b.buckets.map(w);console.log("[useBucketCollections] [handleBucketsUpdate] Transformed collections:",S);const _=S.filter(E=>E.bucketId&&E.bucketId.trim()!=="");_.length!==S.length&&console.warn(`[useBucketCollections] [handleBucketsUpdate] WebSocket: Filtered out ${S.length-_.length} collections with empty bucketId`,{filtered:S.filter(E=>!E.bucketId||E.bucketId.trim()==="")}),console.log("[useBucketCollections] [handleBucketsUpdate] Setting collections from WebSocket:",{validCollectionsCount:_.length,validCollections:_}),s(E=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] Previous collections:",{prevCount:E.length,prev:E}),E.length!==_.length)return _;const P=JSON.stringify(E),M=JSON.stringify(_);return P===M?E:_}),p.current&&(p.current=!1,i(!1))}},[w]);return k.useEffect(()=>{if(!t.walletAddress||t.walletAddress.trim()===""){i(!1),a("Wallet address is required"),s([]),d.current&&(d.current.disconnect(),d.current=null),f.current!==null&&(clearInterval(f.current),f.current=0);return}if(!t.wsURL||t.wsURL.trim()===""){i(!1),a("WebSocket URL is required"),s([]);return}const b=new wn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=b,p.current=!0,g.current=!1,console.log("[useBucketCollections] [useEffect] Initializing, calling fetchCollections..."),y(),e){const S=new Eo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=S;const _=()=>{S.isConnected()&&!g.current&&(S.subscribeBuckets(v),g.current=!0)};S.connect().then(()=>{_()}).catch(P=>{console.error("Failed to connect WebSocket:",P),p.current&&(p.current=!1,i(!1)),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{y()},t.refreshInterval))});const E=S.onStateChange(P=>{P===tt.Connected?(g.current&&_(),f.current!==null&&(clearInterval(f.current),f.current=0)):P===tt.Disconnected&&t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{y()},t.refreshInterval))});return()=>{E&&E(),d.current&&(d.current.unsubscribeBuckets(v),d.current.disconnect(),d.current=null),f.current!==null&&(clearInterval(f.current),f.current=0)}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{y()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=0)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e,v]),k.useEffect(()=>{console.log("[useBucketCollections] [useEffect] Hook state changed, returning:",{collectionsCount:n.length,collections:n,loading:r,error:o,spotWalletBalance:l})},[n,r,o,l]),{collections:n,loading:r,error:o,refresh:y,spotWalletBalance:l}}const fL=k.forwardRef(function({baseURL:e=Ja,wsURL:n=i3,mnemonic:s=LN,marketId:r,marketSymbol:i,selectedBucketBalance:o,selectedBucketId:a,onLeverageClick:l,authToken:c,walletAddress:u},d){const{selectedMarketId:f,selectedMarketSymbol:p}=To({baseURL:e,autoFetchMarkets:!0}),g=r||f||"",x=i||p||"Market",{lastPrice:w}=l0({baseURL:e,wsURL:n,marketId:g}),m=(w==null?void 0:w.price)||0,y=k.useRef(0),{collections:v,spotWalletBalance:b}=vE({baseURL:e,wsURL:n,walletAddress:u||"",authToken:c||"",useWebSocket:!!u&&!!c}),S=k.useMemo(()=>!a||!v.length?null:v.find($e=>$e.bucketId===a)||null,[v,a]),{orderType:_,setOrderType:E,fundPercent:P,sizeInput:M,price:C,leverage:N,positionMode:I,marginMode:B,availableBalance:W,currentPrice:j,isReady:z,loading:F,result:A,setFundPercent:$,setSizeInput:T,setPrice:G,setMarginMode:D,setLeverage:R,placeBuyOrder:X,placeSellOrder:K,calculateValue:Y,calculateMargin:V,calculateSizeUSD:Q,getOrderPrice:ee,getAvailableTradeAmount:fe}=yA({baseURL:e,mnemonic:s,marketId:g,selectedBucketBalance:o,tradePrice:m}),je=k.useMemo(()=>ee(),[ee,_,C,j]),Se=k.useMemo(()=>fe(),[fe,W,N]),Ce=k.useMemo(()=>Y(),[Y,M,P,W,je,N]),Ie=k.useMemo(()=>V(),[V,N,Ce]),gt=k.useMemo(()=>Te(Ce),[Ce]),L=k.useMemo(()=>Te(Ie),[Ie]),ae=k.useMemo(()=>({minimumFractionDigits:Fr,maximumFractionDigits:HN}),[]),ue=k.useMemo(()=>j.toFixed(Fr),[j]);k.useMemo(()=>a?`Available in ${a}`:"Available to Trade",[a]);const ye=k.useMemo(()=>{const $e=v.reduce((Ve,sn)=>Ve+sn.totalEquity,0);return b+$e},[v,b]),de=k.useMemo(()=>ye.toLocaleString("en-US",ae),[ye,ae]),me=k.useMemo(()=>b.toLocaleString("en-US",ae),[b,ae]),U=k.useMemo(()=>S?S.nominalValue.toLocaleString("en-US",ae):"--",[S,ae]),ie=k.useMemo(()=>S?S.nominalValue.toLocaleString("en-US",ae):"--",[S,ae]),O=k.useMemo(()=>S?S.unrealizedPnL.toLocaleString("en-US",ae):"--",[S,ae]),te=k.useMemo(()=>S?(S.crossMarginRatio*100).toFixed(Fr)+"%":"--",[S]),ne=k.useMemo(()=>S?S.maintenanceMargin.toLocaleString("en-US",ae):"--",[S,ae]),q=k.useMemo(()=>S?`${S.leverage.toFixed(Fr)}x`:"--",[S]),he=k.useCallback(()=>{D(B===ou?GN:ou)},[B,D]),Me=k.useCallback(()=>{E(Nm)},[E]),ke=k.useCallback(()=>{E(Dp)},[E]),Pe=k.useCallback(()=>{$(Math.min(Lw,P+Op))},[P,$]),ze=k.useCallback(()=>{$(Math.max(Dw,P-Op))},[P,$]),Je=k.useCallback($e=>{const Ve=parseInt($e.target.value);$(Ve)},[$]),rt=k.useCallback($e=>{G($e.target.value)},[G]),vt=k.useCallback($e=>{const Ve=parseFloat($e.target.value);T(isNaN(Ve)?0:Ve)},[T]),jt=k.useCallback(()=>{const $e=we.loading("Submit transaction...",{description:"Placing buy order"});y.current=typeof $e=="number"?$e:0,X()},[X]),Ot=k.useCallback(()=>{const $e=we.loading("Submit transaction...",{description:"Placing sell order"});y.current=typeof $e=="number"?$e:0,K()},[K]);return k.useImperativeHandle(d,()=>({leverage:N,setLeverage:R,calculateMaxRatio:$e=>{const Ve=Q();ee();const sn=Ve;return W>0&&sn>0?(sn/W).toFixed(Fr):$e.toFixed(Fr)}}),[N,R,Q,ee,W]),k.useEffect(()=>{if(A)if(y.current!==0&&(we.dismiss(y.current),y.current=0),A.success){const $e=A.orderId?`Order ID: ${A.orderId}`:A.message||"Order placed successfully";we.success("Order Placed Successfully",{description:$e})}else A.error&&we.error("Order Failed",{description:A.error,action:In(A.error||"")})},[A]),h.jsxs("div",{className:"component",children:[h.jsx("h2",{children:x}),h.jsxs("div",{className:"trade-op-config",children:[h.jsxs("div",{className:"trade-op-badge",children:[h.jsx("span",{className:"trade-op-badge-label",children:I}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),h.jsxs("div",{className:"trade-op-badge",onClick:he,style:{cursor:"pointer"},children:[h.jsx("span",{className:"trade-op-badge-label",children:B}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),h.jsxs("div",{className:"trade-op-badge",onClick:l,style:{cursor:"pointer"},children:[h.jsxs("span",{className:"trade-op-badge-label",children:[N,"x"]}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]})]}),h.jsxs("div",{className:"trade-op-order-type-selector",children:[h.jsx("button",{onClick:Me,className:`btn-toggle ${_===Nm?"active":""}`,children:"MARKET"}),h.jsx("button",{onClick:ke,className:`btn-toggle ${_===Dp?"active":""}`,children:"LIMIT"})]}),_===Dp&&h.jsx("div",{className:"trade-op-form-group",children:h.jsxs("div",{className:"trade-op-form-row",children:[h.jsx("label",{htmlFor:"price",className:"trade-op-label",children:"Price:"}),h.jsx("input",{id:"price",type:"number",value:C,onChange:rt,placeholder:ue,step:BN,min:jw})]})}),h.jsxs("div",{className:"trade-op-form-group",children:[h.jsxs("div",{className:"trade-op-form-row",style:{marginBottom:"0.5rem"},children:[h.jsx("label",{htmlFor:"size",className:"trade-op-label",children:"Size:"}),h.jsxs("div",{className:"trade-op-size-controls",children:[h.jsx("input",{id:"size",type:"number",step:"any",value:M===0?"":M,onChange:vt,placeholder:"0",min:jw,max:Se,className:"trade-op-input"}),h.jsxs("div",{className:"trade-op-size-buttons",children:[h.jsx("button",{onClick:Pe,className:"btn-small",children:""}),h.jsx("button",{onClick:ze,className:"btn-small",children:""})]})]})]}),h.jsx("input",{type:"range",min:Dw,max:Lw,value:P,onChange:Je,step:Op,style:{width:"100%"}}),h.jsxs("div",{className:"trade-op-slider-labels",children:[h.jsx("span",{children:"0"}),h.jsx("span",{children:"20"}),h.jsx("span",{children:"40"}),h.jsx("span",{children:"60"}),h.jsx("span",{children:"80"}),h.jsx("span",{children:"100"})]})]}),h.jsxs("div",{className:"trade-op-action-panel",children:[h.jsxs("div",{children:[h.jsx("div",{className:"trade-op-panel-title buy",children:"BUY"}),h.jsxs("div",{className:"trade-op-panel-size",children:["BTC ",M.toFixed(3),"/100.000"]}),h.jsx("button",{onClick:jt,disabled:F||!z||Ce<=0,className:"btn-buy",children:F?"PLACING...":"BUY LONG"}),h.jsxs("div",{className:"trade-op-panel-details",children:[h.jsxs("div",{children:["Value ",gt.toFixed(2)]}),h.jsxs("div",{children:["Margin ",L.toFixed(2)]})]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"trade-op-panel-title sell",children:"SELL"}),h.jsxs("div",{className:"trade-op-panel-size",children:[M.toFixed(3),"/100.000 BTC"]}),h.jsx("button",{onClick:Ot,disabled:F||!z||Ce<=0,className:"btn-sell",children:F?"PLACING...":"SELL SHORT"}),h.jsxs("div",{className:"trade-op-panel-details",children:[h.jsxs("div",{children:["Value ",gt.toFixed(Fr)]}),h.jsxs("div",{children:["Margin ",L.toFixed(Fr)]})]})]})]}),h.jsxs("div",{className:"trade-op-info-panel",children:[h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Account Equity:"}),h.jsxs("span",{className:"trade-op-info-value",children:[de," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Spot:"}),h.jsxs("span",{className:"trade-op-info-value",children:[me," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsxs("span",{className:"trade-op-info-label",children:[a||"Bucket",":"]}),h.jsxs("span",{className:"trade-op-info-value",children:[U," USDC"]})]}),h.jsx("div",{className:"trade-op-info-row",children:h.jsxs("span",{className:"trade-op-info-label",children:["Bucket Overview: ",a||"--"]})}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Balance:"}),h.jsxs("span",{className:"trade-op-info-value",children:[ie," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Unrealized PNL:"}),h.jsxs("span",{className:"trade-op-info-value",children:[O," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Cross Margin Ratio:"}),h.jsx("span",{className:"trade-op-info-value",children:te})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Maintenance Margin:"}),h.jsxs("span",{className:"trade-op-info-value",children:[ne," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Cross Account Leverage:"}),h.jsx("span",{className:"trade-op-info-value",children:q})]})]})]})});function wE(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(null),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(null),f=k.useRef(null),p=k.useRef(!1),g=k.useRef(t);g.current=t;const x=k.useCallback(v=>({id:v.id||v.orderId||v.order_id,orderId:v.orderId||v.order_id||v.id,marketId:v.marketId||v.market_id||v.assetPair,symbol:v.symbol||v.pair||`Market-${v.marketId||v.market_id||"N/A"}`,side:v.side||(v.direction==="LONG"?"LONG":v.direction==="SHORT"?"SHORT":void 0),type:v.type||v.orderType||v.order_type,quantity:v.quantity||v.size||v.amount||0,price:v.price||v.limitPrice||v.limit_price||0,filledQuantity:v.filledQuantity||v.filled_quantity||v.filled||0,remainingQuantity:v.remainingQuantity||v.remaining_quantity||v.remaining||0,status:v.status||v.orderStatus||v.order_status||"PENDING",timeInForce:v.timeInForce||v.time_in_force||v.tif,createdAt:v.createdAt||v.created_at||v.timestamp,updatedAt:v.updatedAt||v.updated_at}),[]),w=k.useCallback(async()=>{if(!u.current)return;const v=g.current;if(!v.walletAddress||v.walletAddress.trim()===""){a(null),s([]),i(!1);return}a(null);try{const b=await Rb(Ab.http,()=>u.current.getOrders(v.walletAddress)),S=Array.isArray(b)?b:(b==null?void 0:b.orders)||[];if(Array.isArray(S)){const _=S.map(x);s(E=>{if(E.length!==_.length)return _;const P=JSON.stringify(E),M=JSON.stringify(_);return P===M?E:_})}else s(_=>_.length===0?_:[])}catch(b){const S=b instanceof Error?b.message:"Failed to load orders";a(S),console.error("Failed to fetch orders after retries:",b)}finally{i(!1)}},[x]),m=k.useCallback(v=>v.id||v.orderId,[]),y=k.useCallback(v=>{let b=[];if(Array.isArray(v)?b=v:v.orders&&Array.isArray(v.orders)?b=v.orders:v&&typeof v=="object"&&(v.id||v.orderId||v.order_id?b=[v]:b=v.order||v.orderList||[]),b.length>0||v&&typeof v=="object"&&"count"in v&&v.count===0){const S=b.map(x);s(_=>{const E=new Map;_.forEach(N=>{const I=m(N);I&&E.set(I,N)}),S.forEach(N=>{var j;const I=m(N);if(!I){console.warn("Received order without ID, skipping:",N);return}const B=(j=N.status)==null?void 0:j.toUpperCase();B==="FILLED"||B==="CANCELLED"||B==="REJECTED"||B==="EXPIRED"||B==="CLOSED"||B==="DONE"?E.delete(I):E.set(I,N)});const P=Array.from(E.values()).filter(N=>m(N));if(_.length!==P.length)return P;const M=JSON.stringify(_),C=JSON.stringify(P);return M===C?_:P})}},[x,m]);return k.useEffect(()=>{if(!t.walletAddress||t.walletAddress.trim()===""){i(!1),a(null),s([]),d.current&&(d.current.disconnect(),d.current=null),f.current!==null&&(clearInterval(f.current),f.current=null);return}const v=new wn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=v,w(),e&&t.wsURL){const b=new Eo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=b;const S=()=>{b.isConnected()&&!p.current&&(b.subscribeOrders(y),p.current=!0)};b.connect().then(()=>{c(!0),S()}).catch(P=>{console.error("Failed to connect WebSocket:",P),c(!1),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{w()},t.refreshInterval))});let _=null;const E=b.wsClient;return E&&(_=E.onStateChange(P=>{P===tt.Connected?(c(!0),p.current&&S(),f.current!==null&&(clearInterval(f.current),f.current=null)):(P===tt.Disconnected||P===tt.Reconnecting)&&(c(!1),p.current=!1,t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{w()},t.refreshInterval)))})),()=>{_&&_(),f.current!==null&&(clearInterval(f.current),f.current=null),d.current&&(d.current.unsubscribeOrders(y),d.current.disconnect())}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{w()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=null)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{orders:n,loading:r,error:o,isConnected:l,refresh:w}}function pL({baseURL:t=Ja,wsURL:e,authToken:n,walletAddress:s,mnemonic:r,height:i=NN,refreshInterval:o=Ob}){const{orders:a,loading:l,error:c,refresh:u}=wE({baseURL:t,wsURL:e,authToken:n,walletAddress:s,refreshInterval:o}),d=k.useRef(null),f=k.useRef(0),[p,g]=k.useState(null),{getSymbolByMarketId:x}=To({baseURL:t,sessionToken:n,autoFetchMarkets:!1}),[w,m]=k.useState(zr),[y,v]=k.useState(null),[b,S]=k.useState(fa),_=k.useMemo(()=>a.filter(F=>{const A=(F.status||"").toUpperCase(),$=A.startsWith("ORDER_STATUS_")?A:`ORDER_STATUS_${A}`;return w===zr?t1.some(T=>A===T.toUpperCase()||$===T.toUpperCase()):!t1.some(T=>A===T.toUpperCase()||$===T.toUpperCase())}),[a,w]),E=k.useMemo(()=>y?[..._].sort((F,A)=>{let $=0,T=0;switch(y){case Gw:$=F.symbol||"",T=A.symbol||"";break;case qw:$=F.side||"",T=A.side||"";break;case Kw:$=j(F.type),T=j(A.type);break;case Xw:$=F.quantity||0,T=A.quantity||0;break;case Qw:$=F.price||0,T=A.price||0;break;case Jw:$=F.filledQuantity||0,T=A.filledQuantity||0;break;case Zw:$=F.status||"",T=A.status||"";break}if(typeof $=="string"&&typeof T=="string")return b===si?$.localeCompare(T):T.localeCompare($);const G=Number($),D=Number(T);return b===si?G-D:D-G}):_,[_,y,b]),P=F=>{y===F?S(b===si?fa:si):(v(F),S(fa))},M=F=>{const A=(F.side||"").toUpperCase();return A===xr||A===au},C=F=>{const A=(F.side||"").toUpperCase();return M(F)?A===yd||A===xr?xr:au:A===xr||A===yd?yd:KN},N=CA,I=EA,B=F=>{const A=(F||"").toUpperCase(),$={ORDER_STATUS_PENDING:{short:"P",full:"Pending",color:Fp},PENDING:{short:"P",full:"Pending",color:Fp},ORDER_STATUS_OPEN:{short:"O",full:"Open",color:zp},OPEN:{short:"O",full:"Open",color:zp},NEW:{short:"N",full:"New",color:zp},ORDER_STATUS_FILLED:{short:"F",full:"Filled",color:n1},FILLED:{short:"F",full:"Filled",color:n1},ORDER_STATUS_CANCELED:{short:"C",full:"Canceled",color:Bp},CANCELED:{short:"C",full:"Canceled",color:Bp},CANCELLED:{short:"C",full:"Canceled",color:Bp},ORDER_STATUS_REJECTED:{short:"R",full:"Rejected",color:s1},REJECTED:{short:"R",full:"Rejected",color:s1},PARTIALLY_FILLED:{short:"PF",full:"Partially Filled",color:Fp}};if($[A])return $[A];const T=A.startsWith("ORDER_STATUS_")?A:`ORDER_STATUS_${A}`;return $[T]?$[T]:{short:"?",full:F||bA,color:oA}},W=F=>F===xr||F===yd?aA:lA,j=F=>{if(!F)return xA;const A=F.toUpperCase();return A===YN||A===i1?i1:A===VN||A===o1?o1:A.startsWith(Fw)?A.replace(Fw,""):A},z=async F=>{var G;const A=F.orderId||F.id,$=F.marketId;if(!A){const D="Cannot cancel order without a valid order ID.";we.error("Order ID is missing",{description:D,action:In(D)});return}if(!$){const D="Cannot cancel order without a valid market ID.";we.error("Market ID is missing",{description:D,action:In(D)});return}if(!r){const D=`Please provide the 'mnemonic' prop to the PendingOrders component. Order ID: ${A}`;we.error("Mnemonic required",{description:D,duration:5e3,action:In(D)});return}if(typeof r!="string"||r.trim()===""){const D=`The mnemonic prop is empty or invalid. Please provide a valid mnemonic. Order ID: ${A}`;we.error("Invalid mnemonic",{description:D,duration:5e3,action:In(D)});return}if(p){we.info("Cancellation in progress",{description:"Please wait for the current cancellation to complete."});return}g(A);const T=we.loading("Canceling order...",{description:`Canceling order ${A}`});f.current=typeof T=="number"?T:0;try{d.current||(d.current=new yl({baseURL:t,mnemonic:r.trim()}),await d.current.initialize());const D=await d.current.cancelOrder({orderId:A,marketId:$}),R=(D==null?void 0:D.success)===!0||(D==null?void 0:D.result)==="success"||D&&!D.error&&!D.message;if(f.current!==0&&(we.dismiss(f.current),f.current=0),R)we.success("Order canceled successfully",{description:`Order ${A} has been canceled.`}),u&&await u();else{const X=(D==null?void 0:D.error)||(D==null?void 0:D.message)||((G=D==null?void 0:D.response)==null?void 0:G.error)||"Failed to cancel order";throw new Error(X)}}catch(D){f.current!==0&&(we.dismiss(f.current),f.current=0);const X=`${D instanceof Error?D.message:"Unknown error occurred"}. Order ID: ${A}`;we.error("Failed to cancel order",{description:X,duration:6e3,action:In(X)})}finally{g(null)}};return!s||s.trim()===""?h.jsx(mE,{message:pA}):l?h.jsx(zu,{message:cA}):c?h.jsx(Bu,{error:c}):h.jsxs("div",{className:"layout-container",style:{height:i},children:[h.jsxs($u,{title:w===zr?hA:fA,children:[h.jsxs("div",{className:"btn-tab",children:[h.jsx("span",{style:{fontSize:"0.7rem"},children:""}),h.jsx("span",{children:"Current Symbol"})]}),h.jsxs("div",{onClick:()=>m(w===zr?e1:zr),className:`btn-tab ${w===e1?"active":""}`,children:[h.jsx("img",{src:"/transfer-net.svg"}),h.jsx("span",{children:w===zr?mA:gA})]})]}),h.jsxs("div",{className:"table-container shrinkable",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:r1},children:[h.jsx(zt,{field:Gw,currentSortField:y,sortDirection:b,onSort:P,children:"Symbol"}),h.jsx(zt,{field:qw,currentSortField:y,sortDirection:b,onSort:P,children:"Side"}),h.jsx(zt,{field:Kw,currentSortField:y,sortDirection:b,onSort:P,children:"Type"}),h.jsx(zt,{field:Xw,currentSortField:y,sortDirection:b,onSort:P,children:"Quantity"}),h.jsx(zt,{field:Qw,currentSortField:y,sortDirection:b,onSort:P,children:"Price"}),h.jsx(zt,{field:Jw,currentSortField:y,sortDirection:b,onSort:P,children:"Filled"}),h.jsx(zt,{field:Zw,currentSortField:y,sortDirection:b,onSort:P,children:"Status"}),h.jsx(bE,{center:!0,children:"Actions"})]}),E.length===0?h.jsx(sl,{message:w===zr?uA:dA}):E.map((F,A)=>{const $=C(F),T=W($),{short:G,full:D,color:R}=B(F.status),X=F.marketId?x(F.marketId)||F.symbol||`m-${F.marketId}`:F.symbol||"N/A";return h.jsxs("div",{className:`table-row ${A%2===0?"even":""}`,style:{gridTemplateColumns:r1},children:[h.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:h.jsx("span",{children:X})}),h.jsx("div",{className:"table-cell center",style:{color:T,fontWeight:500},children:$}),h.jsx("div",{className:"table-cell center",children:j(F.type)}),h.jsx("div",{className:"table-cell right monospace",children:I(F.quantity)}),h.jsx("div",{className:"table-cell right monospace",children:N(F.price)}),h.jsxs("div",{className:"table-cell right monospace",children:[I(F.filledQuantity)," /"," ",I(F.quantity)]}),h.jsx("div",{className:"table-cell center",style:{color:R,fontWeight:600,cursor:"help",fontSize:"0.9rem"},title:D,children:G}),h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:w===zr?h.jsxs(h.Fragment,{children:[(!r||r.trim()==="")&&h.jsx("span",{style:{fontSize:"0.7rem",color:"#ffc107",cursor:"help"},title:"Mnemonic required to cancel orders",children:""}),h.jsx(iL,{onClick:K=>{K.preventDefault(),K.stopPropagation(),!r||r.trim()===""||p===(F.orderId||F.id)||!!p||z(F)},disabled:!r||r.trim()===""||p===(F.orderId||F.id)||!!p})]}):h.jsx("span",{className:"color-text-dim",children:""})})]},`order-${F.id||F.orderId||A}`)})]})]})}const gL=oe.memo(pL);function mL({baseURL:t=Ja,authToken:e,walletAddress:n,mnemonic:s,height:r=IN,refreshInterval:i=Ob,selectedBucketId:o=null}){const{positions:a,loading:l,error:c,refresh:u}=a3({baseURL:t,authToken:e,walletAddress:n,refreshInterval:i}),d=k.useRef(null);k.useEffect(()=>{if(!s||!t){d.current=null;return}const _=new yl({baseURL:t,mnemonic:s});_.initialize().then(()=>{d.current=_}).catch(E=>{const P=E instanceof Error?E.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",E),we.error("Exchange client initialization failed",{description:P,action:In(P)}),d.current=null})},[s,t]);const[f,p]=k.useState(Lp),[g,x]=k.useState(null),[w,m]=k.useState(fa),y=k.useMemo(()=>{let _=[...a];return f===vd&&o&&(_=_.filter(E=>{var C;const P=(C=E.bucketId)==null?void 0:C.toString(),M=o.toString();return P===M})),g?_.sort((E,P)=>{let M=0,C=0;switch(g){case zw:M=E.symbol||"",C=P.symbol||"";break;case Bw:try{M=E.leverage?fromSatoshi(E.leverage):0,C=P.leverage?fromSatoshi(P.leverage):0}catch{M=0,C=0}break;case $w:M=E.size||0,C=P.size||0;break;case Uw:M=E.liquidationPrice||0,C=P.liquidationPrice||0;break;case Ww:M=E.unrealizedPnL||0,C=P.unrealizedPnL||0;break;case Hw:M=E.entryPrice||0,C=P.entryPrice||0;break;case Vw:M=E.margin||0,C=P.margin||0;break}if(typeof M=="string"&&typeof C=="string")return w===si?M.localeCompare(C):C.localeCompare(M);const N=Number(M),I=Number(C);return w===si?N-I:I-N}):_},[a,g,w,o,f]),v=_=>{g===_?m(w===si?fa:si):(x(_),m(fa))},b=k.useRef(0),S=async _=>{if(!s){const P="Please provide the 'mnemonic' prop to enable position closing.";we.error("Mnemonic required",{description:P,action:In(P)});return}if(!d.current){const P="Please wait for the exchange client to initialize.";we.error("Exchange client not ready",{description:P,action:In(P)});return}const E=we.loading("Closing position...",{description:`Closing ${_.side} position for ${_.symbol} (Size: ${Rm(_.size)})`});b.current=typeof E=="number"?E:0;try{const P=await d.current.closePosition({marketId:_.marketId,marketPrice:_.markPrice,quantity:_.size});b.current!==0&&(we.dismiss(b.current),b.current=0),we.success("Position closed successfully",{description:`${_.side} position for ${_.symbol} has been closed. tx: ${P.txId}`,duration:5e3}),u&&await u()}catch(P){b.current!==0&&(we.dismiss(b.current),b.current=0);const M=P instanceof Error?P.message:"Unknown error occurred";we.error("Failed to close position",{description:M,duration:6e3,action:In(M)}),console.error("Failed to close position:",P)}};return l?h.jsx(zu,{message:JN}):c?h.jsx(Bu,{error:c}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[h.jsxs($u,{title:`${eA} ${f===vd&&o?`(Bucket ${o})`:""}`,children:[h.jsx("div",{onClick:()=>{p(Lp),x(null)},className:`btn-tab ${f===Lp?"active":""}`,children:tA}),h.jsxs("div",{onClick:()=>{p(vd),x(null)},className:`btn-tab ${f===vd?"active":""}`,children:[h.jsx("img",{src:"/bucket-g.svg"}),h.jsx("span",{children:nA})]})]}),h.jsxs("div",{className:"table-container",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:Yw},children:[h.jsx(zt,{field:zw,currentSortField:g,sortDirection:w,onSort:v,children:"Symbol"}),h.jsx(zt,{field:Bw,currentSortField:g,sortDirection:w,onSort:v,children:"Leverage"}),h.jsx(zt,{field:$w,currentSortField:g,sortDirection:w,onSort:v,children:"Size"}),h.jsx(zt,{field:Uw,currentSortField:g,sortDirection:w,onSort:v,children:"Liq. Price"}),h.jsx(zt,{field:Ww,currentSortField:g,sortDirection:w,onSort:v,children:"P/L"}),h.jsx(zt,{field:Hw,currentSortField:g,sortDirection:w,onSort:v,children:"Entry Price"}),h.jsx(zt,{field:Vw,currentSortField:g,sortDirection:w,onSort:v,children:"Margin"}),h.jsx(bE,{center:!0,children:"Actions"})]}),y.length===0?h.jsx(sl,{message:ZN}):y.map((_,E)=>{const P=_.side===xr,M=(_.unrealizedPnL||0)>=0?XN:QN,C=PA(_.leverage,jp);return h.jsxs("div",{className:`table-row ${E%2===0?"even":""}`,style:{gridTemplateColumns:Yw},children:[h.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:h.jsx("span",{children:_.symbol})}),h.jsxs("div",{className:"color-buy",style:{fontWeight:500},children:[P?xr:au," ",C===jp?jp:`${C}x`," ","@ ",_.marginMode||ou]}),h.jsx("div",{className:"color-buy right",children:Rm(_.size)}),h.jsx("div",{className:"table-cell right",children:Am(_.liquidationPrice)}),h.jsx("div",{className:"table-cell right",style:{color:M,fontWeight:500},children:SA(_.unrealizedPnL)}),h.jsx("div",{className:"table-cell right",children:Am(_.entryPrice)}),h.jsx("div",{className:"table-cell right",children:kA(_.margin)}),h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsx(oL,{onClick:()=>S(_)})})]},`position-${_.marketId}-${E}`)})]})]})}const xL=oe.memo(mL);function bL({isOpen:t,value:e,min:n,max:s,onConfirm:r,onCancel:i}){const[o,a]=k.useState("");if(k.useEffect(()=>{t&&a(e.toString())},[t,e]),!t)return null;const l=w=>{const m=o==="0"?w:o+w;parseFloat(m)<=s&&a(m)},c=()=>{o.includes(".")||a(o+".")},u=()=>{o.length>1?a(o.slice(0,-1)):a("0")},d=()=>{a("0")},f=()=>{const w=parseFloat(o)||0,m=Math.max(n,Math.min(s,w));r(m)},p=parseFloat(o)||0,g=p>=n&&p<=s,x=h.jsx("div",{className:"modal-overlay",onClick:i,style:{zIndex:1e4},children:h.jsxs("div",{className:"modal-content number-pad-content",onClick:w=>w.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Enter Amount"})}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{className:"number-pad-display",children:[h.jsx("div",{className:"number-pad-display-value",children:_t(p)}),h.jsxs("div",{className:"number-pad-display-range",children:["Min: ",_t(n)," | Max: ",_t(s)]}),!g&&p>0&&h.jsxs("div",{className:"number-pad-display-error",children:["Value must be between ",_t(n)," and ",_t(s)]})]}),h.jsxs("div",{className:"number-pad-grid",children:[h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"1"),children:"1"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"2"),children:"2"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"3"),children:"3"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"4"),children:"4"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"5"),children:"5"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"6"),children:"6"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"7"),children:"7"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"8"),children:"8"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"9"),children:"9"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:c,children:"."}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"0"),children:"0"}),h.jsx("button",{type:"button",className:"number-pad-button number-pad-button-action",onClick:u,children:""})]}),h.jsxs("div",{className:"number-pad-actions",children:[h.jsx("button",{type:"button",className:"number-pad-action-button",onClick:d,children:"Clear"}),h.jsx("button",{type:"button",className:"number-pad-action-button number-pad-action-button-max",onClick:()=>{a(s.toString())},children:"Max"})]})]}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:i,className:"btn btn-secondary",children:"Cancel"}),h.jsx("button",{onClick:f,className:"btn btn-primary",disabled:!g,children:"Confirm"})]})]})});return typeof document<"u"?Ei.createPortal(x,document.body):null}function yL({isOpen:t,currentLeverage:e,tempLeverage:n,maxRatio:s,onLeverageChange:r,onConfirm:i,onCancel:o}){if(!t)return null;const a=h.jsx("div",{className:"modal-overlay",onClick:o,children:h.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Select Leverage"})}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{className:"leverage-max-ratio",children:[h.jsx("div",{className:"leverage-max-ratio-label",children:"Maximum Ratio"}),h.jsxs("div",{className:"leverage-max-ratio-value",children:[s,"x"]})]}),h.jsxs("div",{className:"leverage-slider-container",children:[h.jsx("input",{type:"range",min:jN,max:FN,value:n,onChange:l=>r(parseInt(l.target.value)),className:"leverage-slider"}),h.jsxs("div",{className:"leverage-slider-labels",children:[h.jsx("span",{children:"1x"}),h.jsxs("span",{className:"leverage-current-value",children:[n,"x"]}),h.jsx("span",{children:"100x"})]})]})]}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),h.jsx("button",{onClick:i,className:"btn btn-primary",children:"Confirm"})]})]})});return typeof document<"u"?Ei.createPortal(a,document.body):null}function vL({isOpen:t,fromValue:e,toValue:n,options:s,bucketsData:r,transferAmount:i,createBucketAmount:o,onFromChange:a,onToChange:l,onTransferAmountChange:c,onCreateBucketAmountChange:u,onConfirm:d,onCancel:f,spotWalletBalance:p=0,activeTab:g,onActiveTabChange:x,isTransferring:w=!1,onOpen:m}){const[y,v]=k.useState("transfer"),b=g??y,S=x??v,_=k.useRef(!1),[E,P]=k.useState(!1),[M,C]=k.useState("transfer");k.useEffect(()=>{t&&!_.current&&m&&m(),_.current=t},[t,m]);const N=k.useMemo(()=>e==="spot-wallet"?null:r.find(T=>T.bucketId===e),[r,e]),I=k.useMemo(()=>e==="spot-wallet"?p:(N==null?void 0:N.nominalValue)||0,[e,p,N]),B=10,W=Math.max(B,I);if(oe.useEffect(()=>{if(e&&W>0){const T=b==="transfer"?i:o;T>W?b==="transfer"?c(W):u(W):T<B&&W>=B&&(b==="transfer"?c(B):u(B))}},[e,W,b,i,o,c,u]),!t)return null;const j=e&&n&&i>=B&&i<=W,z=e&&o>=B&&o<=W,F=h.jsx("div",{className:"modal-overlay",onClick:f,children:h.jsxs("div",{className:"modal-content transfer-modal-content",onClick:T=>T.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Transfer Funds"})}),h.jsxs("div",{className:"transfer-modal-tabs",children:[h.jsx("button",{className:`transfer-tab ${b==="transfer"?"active":""}`,onClick:()=>S("transfer"),type:"button",disabled:w,children:"Transfer"}),h.jsx("button",{className:`transfer-tab ${b==="create"?"active":""}`,onClick:()=>S("create"),type:"button",disabled:w,children:"Create Bucket"})]}),h.jsx("div",{className:"modal-body",children:b==="transfer"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"From"}),h.jsxs("select",{value:e,onChange:T=>a(T.target.value),className:"transfer-select",children:[h.jsx("option",{value:"",children:"Select source bucket"}),s.map(T=>h.jsx("option",{value:T.value,children:T.label},T.value))]})]}),h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"To"}),h.jsxs("select",{value:n,onChange:T=>l(T.target.value),className:"transfer-select",disabled:!e,children:[h.jsx("option",{value:"",children:"Select destination bucket"}),s.filter(T=>T.value!==e).map(T=>h.jsx("option",{value:T.value,children:T.label},T.value))]})]}),e&&W>=B?h.jsxs("div",{className:"transfer-field-group",children:[h.jsxs("div",{className:"transfer-amount-header",children:[h.jsx("label",{className:"transfer-field-label",children:"Amount"}),h.jsxs("div",{className:"transfer-available-balance",children:["Available: ",_t(I)]})]}),h.jsx("div",{className:"transfer-amount-display",onClick:()=>{C("transfer"),P(!0)},style:{cursor:"pointer"},children:h.jsx("span",{className:"transfer-amount-value",children:_t(i)})}),h.jsxs("div",{className:"transfer-amount-container",children:[h.jsx("input",{type:"range",min:B,max:W,step:.01,value:i,onChange:T=>c(parseFloat(T.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(i-B)/(W-B)*100}%`}}),h.jsxs("div",{className:"transfer-amount-labels",children:[h.jsx("span",{children:_t(B)}),h.jsx("span",{children:_t(W)})]})]})]}):e?h.jsx("div",{className:"transfer-field-group",children:h.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required: ",_t(B)]})}):null]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"From"}),h.jsxs("select",{value:e,onChange:T=>a(T.target.value),className:"transfer-select",children:[h.jsx("option",{value:"",children:"Select source bucket"}),s.map(T=>h.jsx("option",{value:T.value,children:T.label},T.value))]})]}),e&&W>=B?h.jsxs("div",{className:"transfer-field-group",children:[h.jsxs("div",{className:"transfer-amount-header",children:[h.jsx("label",{className:"transfer-field-label",children:"Amount"}),h.jsxs("div",{className:"transfer-available-balance",children:["Available: ",_t(I)]})]}),h.jsx("div",{className:"transfer-amount-display",onClick:()=>{C("create"),P(!0)},style:{cursor:"pointer"},children:h.jsx("span",{className:"transfer-amount-value",children:_t(o)})}),h.jsxs("div",{className:"transfer-amount-container",children:[h.jsx("input",{type:"range",min:B,max:W,step:.01,value:o,onChange:T=>u(parseFloat(T.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(o-B)/(W-B)*100}%`}}),h.jsxs("div",{className:"transfer-amount-labels",children:[h.jsx("span",{children:_t(B)}),h.jsx("span",{children:_t(W)})]})]})]}):e?h.jsx("div",{className:"transfer-field-group",children:h.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required: ",_t(B)]})}):null]})}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:f,className:"btn btn-secondary",disabled:w,children:"Cancel"}),h.jsx("button",{onClick:d,className:"btn btn-primary",disabled:w||(b==="transfer"?!j:!z),children:w?"Processing...":"Confirm"})]})]})}),A=M==="transfer"?i:o,$=T=>{M==="transfer"?c(T):u(T),P(!1)};return h.jsxs(h.Fragment,{children:[typeof document<"u"?Ei.createPortal(F,document.body):null,h.jsx(bL,{isOpen:E,value:A,min:B,max:W,onConfirm:$,onCancel:()=>P(!1)})]})}function wL({baseURL:t=Ja,wsURL:e=Ja,authToken:n,walletAddress:s,mnemonic:r,height:i=MN,refreshInterval:o=Ob,onBucketSelect:a}){const{collections:l,loading:c,error:u,spotWalletBalance:d,refresh:f}=vE({baseURL:t,wsURL:e,authToken:n,walletAddress:s,refreshInterval:o}),[p,g]=k.useState(null),[x,w]=k.useState("desc"),[m,y]=k.useState(!1),[v,b]=k.useState(""),[S,_]=k.useState(""),[E,P]=k.useState(10),[M,C]=k.useState(10),[N,I]=k.useState("transfer"),[B,W]=k.useState(!1),j=k.useRef(null),z=k.useRef(0),F=k.useMemo(()=>{const K=l.filter(Y=>Y&&Y.bucketId&&typeof Y.bucketId=="string"&&Y.bucketId.trim()!=="");return p?[...K].sort((Y,V)=>{let Q=0,ee=0;switch(p){case"marginType":Q=Y.marginType||"",ee=V.marginType||"";break;case"maintenanceMargin":Q=Y.maintenanceMargin||0,ee=V.maintenanceMargin||0;break;case"nominalValue":Q=Y.nominalValue||0,ee=V.nominalValue||0;break;case"riskRatio":Q=Y.riskRatio||0,ee=V.riskRatio||0;break;case"bucketId":Q=Y.bucketId||"",ee=V.bucketId||"";break}if(typeof Q=="string"&&typeof ee=="string")return x==="asc"?Q.localeCompare(ee):ee.localeCompare(Q);const fe=Number(Q),je=Number(ee);return x==="asc"?fe-je:je-fe}):K},[l,p,x]),A=K=>{p===K?w(x==="asc"?"desc":"asc"):(g(K),w("desc"))},$=(K,Y)=>{a&&a(K,Y)},T=()=>{y(!0),b(""),_(""),P(10),C(10),I("transfer")},G=()=>{y(!1),b(""),_(""),P(10),C(10),I("transfer")};k.useEffect(()=>{if(!r||!t){j.current=null;return}const K=new yl({baseURL:t,mnemonic:r});K.initialize().then(()=>{j.current=K}).catch(Y=>{const V=Y instanceof Error?Y.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",Y),we.error("Exchange client initialization failed",{description:V,action:In(V)}),j.current=null})},[r,t]);const D=async()=>{if(!r){const V="Mnemonic is required to perform transfers. Please provide a mnemonic to enable transfer functionality.";we.error("Mnemonic required",{description:V,action:In(V)});return}const K=j.current;if(!K){const V="Exchange client is still initializing. Please wait a moment and try again.";we.error("Exchange client not ready",{description:V,action:In(V)});return}W(!0);const Y=we.loading("Processing transfer...",{description:"Please wait while the transfer is being processed"});z.current=typeof Y=="number"?Y:0;try{const V="USDC";let Q,ee="";const fe=dt(E);if(N==="transfer"){if(!v||!S)throw new Error("Please select both source and destination");if(v==="spot-wallet"&&S==="spot-wallet")throw new Error("Cannot transfer from spot wallet to spot wallet");v==="spot-wallet"?(Q=await K.extractToBucket({bucketId:S,assetId:V,amount:fe}),ee=`Successfully transferred ${_t(E)} from Spot Wallet to ${S}`):S==="spot-wallet"?(Q=await K.withdrawFromBucket({bucketId:v,assetId:V,amount:fe}),ee=`Successfully transferred ${_t(E)} from ${v} to Spot Wallet`):(Q=await K.bucketTransfer({fromBucketId:v,toBucketId:S,assetId:V,amount:fe}),ee=`Successfully transferred ${_t(E)} from ${v} to ${S}`)}else throw v?v==="spot-wallet"?new Error("Create Bucket from spot wallet requires a target bucket ID. Please use the Transfer tab to extract funds to an existing bucket, or create the bucket first."):new Error("Create Bucket requires a target bucket ID. Please use the Transfer tab to transfer between buckets."):new Error("Please select a source");console.log("Transfer successful:",Q),z.current!==0&&(we.dismiss(z.current),z.current=0),we.success("Transfer completed",{description:ee}),f(),y(!1),b(""),_(""),P(10),C(10)}catch(V){z.current!==0&&(we.dismiss(z.current),z.current=0);const Q=V instanceof Error?V.message:"Transfer failed";we.error("Transfer failed",{description:Q,action:In(Q)}),console.error("Transfer error:",V)}finally{W(!1)}},R=k.useMemo(()=>{const K=F.map(Y=>({value:Y.bucketId,label:`${Y.bucketId} (${_t(Y.nominalValue)})`}));return[{value:"spot-wallet",label:`Spot Wallet (${_t(d)})`},...K]},[F,d]),X=k.useMemo(()=>F.map(K=>({bucketId:K.bucketId,nominalValue:K.nominalValue})),[F]);return!s||s.trim()===""?h.jsx(mE,{message:"Wallet address required to view bucket collections"}):c?h.jsx(zu,{message:"Loading bucket collections..."}):u?h.jsx(Bu,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:i},children:[h.jsx($u,{title:"BUCKET COLLECTIONS",children:h.jsxs("div",{onClick:T,className:"btn-tab",children:[h.jsx("img",{src:"/transfer-repu.svg"}),h.jsx("span",{children:"Transfer"})]})}),h.jsxs("div",{className:"table-container shrinkable",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[h.jsx(zt,{field:"bucketId",currentSortField:p,sortDirection:x,onSort:A,children:"Bucket ID"}),h.jsx(zt,{field:"marginType",currentSortField:p,sortDirection:x,onSort:A,children:"Margin Type"}),h.jsx(zt,{field:"maintenanceMargin",currentSortField:p,sortDirection:x,onSort:A,children:"Maintenance Margin"}),h.jsx(zt,{field:"nominalValue",currentSortField:p,sortDirection:x,onSort:A,children:"Balance"}),h.jsx(zt,{field:"riskRatio",currentSortField:p,sortDirection:x,onSort:A,children:"Risk Ratio"})]}),F.length===0?h.jsx(sl,{message:l.length===0?"No bucket collections found. Make sure your wallet address is correct and has buckets.":`Filtered out all ${l.length} collections (invalid data structure)`}):F.map((K,Y)=>h.jsxs("div",{onClick:()=>$(K.bucketId,K.nominalValue),className:`table-row clickable ${Y%2===0?"even":""}`,style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[h.jsx("div",{className:"table-cell primary",children:K.bucketId||"---"}),h.jsx("div",{className:"table-cell",children:(K.marginType||"CROSS").toUpperCase()}),h.jsx("div",{className:"table-cell right",children:_t(K.maintenanceMargin||0)}),h.jsx("div",{className:"table-cell right",children:_t(K.nominalValue||0)}),h.jsx("div",{className:"table-cell right",style:{color:(K.riskRatio||0)>.5?"#ff6b6b":"#51cf66",fontWeight:500},children:_A(K.riskRatio||0)})]},`collection-${K.bucketId}-${Y}`))]}),h.jsx(vL,{isOpen:m,fromValue:v,toValue:S,options:R,bucketsData:X,transferAmount:E,createBucketAmount:M,onFromChange:b,onToChange:_,onTransferAmountChange:P,onCreateBucketAmountChange:C,onConfirm:D,onCancel:G,spotWalletBalance:d,activeTab:N,onActiveTabChange:I,isTransferring:B,onOpen:f})]})}const kL=oe.memo(wL);function SL(t){var ye;const[e,n]=k.useState([]),[s,r]=k.useState("vertical"),[i,o]=k.useState(!0),[a,l]=k.useState(!1),[c,u]=k.useState("--"),[d,f]=k.useState(void 0),[p,g]=k.useState(!1),[x,w]=k.useState(10),[m,y]=k.useState("default"),v=k.useRef(null),b=k.useRef(null),S=k.useRef(!1),_=k.useRef(Ou),E=k.useRef(c0),P=k.useRef([]),M=_.current,C=E.current,N=k.useMemo(()=>bh(m==="default"?xh:Y9),[m]),[I,B]=k.useState(()=>localStorage.getItem("authToken")||""),{markets:W,selectedMarketId:j,selectedMarketSymbol:z,setSelectedMarketId:F,loadingMarkets:A,getError:$}=To({baseURL:M,sessionToken:I,autoFetchMarkets:!0}),{mnemonic:T,walletAddress:G,authToken:D,setMnemonic:R}=vl();k.useEffect(()=>{T||R("legal winner thank year wave sausage worth useful legal winner thank yellow")},[T,R]),k.useEffect(()=>{P.current=e},[e]),k.useEffect(()=>{D&&(B(D),localStorage.setItem("authToken",D))},[D]);const X=k.useRef(!1);k.useEffect(()=>{I&&I.trim()!==""&&!X.current&&localStorage.getItem("authToken")!==I&&localStorage.setItem("authToken",I),X.current=!1},[I]),k.useEffect(()=>{const de=U=>{U.key==="authToken"&&U.newValue&&(X.current=!0,B(U.newValue))};window.addEventListener("storage",de);const me=setInterval(()=>{const U=localStorage.getItem("authToken");B(ie=>U&&U!==ie?(X.current=!0,U):ie)},5e3);return()=>{window.removeEventListener("storage",de),clearInterval(me)}},[]);const K=k.useMemo(()=>{var de,me,U,ie;return W.length>0?((de=W.find(O=>O.active))==null?void 0:de.market_id)??W[0].market_id??((U=(me=W.find(O=>O.active))==null?void 0:me.id)==null?void 0:U.toString())??((ie=W[0].id)==null?void 0:ie.toString())??null:null},[W]),Y=k.useCallback((de,me)=>{if(i)return;const U=P.current,ie=de;if(U.length!==ie.length){S.current=!0,P.current=ie,n(ie);return}let O=!1;for(let te=0;te<U.length;te++){const ne=U[te],q=ie[te];if(ne.x!==q.x||ne.y!==q.y||ne.w!==q.w||ne.h!==q.h||ne.i!==q.i){O=!0;break}}O&&(S.current=!0,P.current=ie,n(ie))},[i]),V=k.useCallback(()=>{r(de=>de==="horizontal"?"vertical":de==="vertical"?null:"horizontal")},[]),Q=k.useCallback(()=>{l(de=>!de)},[]);k.useEffect(()=>(a?document.body.classList.add("full-width-screen"):document.body.classList.remove("full-width-screen"),()=>{document.body.classList.remove("full-width-screen")}),[a]);const ee=k.useCallback(()=>{o(de=>!de),i&&(S.current=!1)},[i]),fe=k.useCallback(()=>{v.current&&(S.current=!1,v.current.generateNewLayout())},[]),je=k.useMemo(()=>e.map(function(de){return h.jsxs("div",{className:"layoutItem",children:[h.jsx("b",{children:de.i}),": [",de.x,", ",de.y,", ",de.w,", ",de.h,"]"]},de.i)}),[e]),Se=j||"",Ce=30,Ie=10,gt=12,L=k.useMemo(()=>{if(e.length===0)return{};const de={};for(let me=0;me<=6;me++){const U=e.find(ie=>ie.i===me.toString());if(U){const ie=U.h*Ce+(U.h-1)*Ie,O=U.w/gt*100;de[me]={width:`${O}%`,height:`${ie}px`}}}return de},[e]),ae=k.useMemo(()=>{var de,me,U,ie;return[h.jsx(sL,{symbol:"BINANCE:BTCUSDT",interval:"5",isCollapsed:!1},"tv"),h.jsx(lL,{baseURL:M,wsURL:C,marketId:Se,maxDepth:20,height:(de=L[1])==null?void 0:de.height,authToken:I},`clob-${Se}`),h.jsx(uL,{baseURL:M,wsURL:C,marketId:Se,symbol:z||void 0,authToken:I},`price-${Se}`),h.jsx(fL,{ref:b,baseURL:M,wsURL:C,marketId:Se,selectedBucketBalance:d,selectedBucketId:c,authToken:I,walletAddress:G,onLeverageClick:()=>{b.current&&w(b.current.leverage),g(!0)}},`trade-${Se}`),h.jsx(gL,{baseURL:M,wsURL:C,authToken:I,walletAddress:G,mnemonic:T,height:(me=L[4])==null?void 0:me.height,refreshInterval:5e3},`order-${Se}`),h.jsx(xL,{baseURL:M,authToken:I,walletAddress:G,mnemonic:T,height:(U=L[5])==null?void 0:U.height,refreshInterval:5e3,selectedBucketId:c},`pos-${Se}`),h.jsx(kL,{baseURL:M,wsURL:C,mnemonic:T,authToken:I,walletAddress:G,height:(ie=L[6])==null?void 0:ie.height,refreshInterval:5e3,onBucketSelect:(O,te)=>{u(O),f(te)}},`bucket-${Se}`)]},[M,C,I,G,Se,z,L,c,d]);if(A)return h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:h.jsx("div",{children:"Loading markets..."})});const ue=$("markets");return ue?h.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:h.jsxs("div",{children:["Error loading markets: ",ue]})}):W.length===0||!j?h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:h.jsx("div",{children:"No markets available."})}):h.jsxs("div",{children:[h.jsxs("div",{className:"App-section",children:[h.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Configuration"}),h.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Market:"}),h.jsx("select",{value:j||"",onChange:de=>{const me=de.target.value;me&&F(me)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:W.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),W.map(de=>{var O;const me=de.market_id??((O=de.id)==null?void 0:O.toString())??"",U=de.moniker?de.moniker:de.symbol?de.symbol:de.baseAsset&&de.quoteAsset?`${de.baseAsset}-${de.quoteAsset}`:`Market ID: ${me}`,ie=de.active?" [ACTIVE]":"";return h.jsxs("option",{value:me,children:[U," - ID: ",me,ie]},me)})]})}),W.length>0&&h.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:j===K?"#51cf66":"#ff9f43"},children:j===K?` Auto-selected default market (ID: ${K==null?void 0:K.substring(0,16)}...)`:` Manual selection (ID: ${j==null?void 0:j.substring(0,16)}...)`})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Mnemonic (for wallet address):"}),h.jsx("input",{type:"text",value:T||"",onChange:de=>R(de.target.value),placeholder:"Enter mnemonic to generate wallet address",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:"white",color:"#333"}})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Wallet Address:"}),h.jsx("input",{type:"text",value:G||"",disabled:!!(T&&T.trim()!==""),placeholder:"automatic (from mnemonic via useOnboard)",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:G?"#e7f3ff":"#f5f5f5",color:"#333"}}),G&&h.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#28a745"},children:" Auto-generated from mnemonic via useOnboard hook"})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Layout Type:"}),h.jsxs("select",{value:m,onChange:de=>{const me=de.target.value;y(me)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:[h.jsx("option",{value:"default",children:"Default Predefined Layouts"}),h.jsx("option",{value:"widthfit",children:"Width Fit"})]})]})]}),h.jsx("h3",{children:"Layout Controls"}),h.jsx("button",{onClick:fe,style:{marginRight:"0.5rem"},children:"Generate New Layout"}),h.jsx("button",{onClick:ee,style:{marginRight:"0.5rem"},children:i?"Enable Dragging":"Disable Dragging"}),h.jsx("button",{onClick:V,style:{marginRight:"0.5rem"},children:"Change Compaction Type"}),h.jsx("button",{onClick:Q,children:"Full Width Screen"}),h.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9em",color:"#fff"},children:["Compaction type:"," ",s?s.charAt(0).toUpperCase()+s.slice(1):"No Compaction"]})]}),h.jsx(Hm,{ref:v,onLayoutChange:Y,slotContent:ae,compactType:s,allStatic:i,onCompactTypeChange:V,onToggleStatic:ee,onNewLayout:fe,initialLayout:N},m),h.jsxs("div",{className:"layoutJSON",children:["Displayed as ",h.jsx("code",{children:"[x, y, w, h]"}),":",h.jsx("div",{className:"columns",children:je})]}),h.jsx(yL,{isOpen:p,currentLeverage:((ye=b.current)==null?void 0:ye.leverage)||10,tempLeverage:x,maxRatio:b.current?b.current.calculateMaxRatio(x):x.toFixed(2),onLeverageChange:w,onConfirm:()=>{b.current&&b.current.setLeverage(x),g(!1)},onCancel:()=>{b.current&&w(b.current.leverage),g(!1)}})]})}function jo({data:t,maxVisible:e=10,maxDataPoints:n=100,height:s=400,width:r=1080,rowWidth:i=280,onItemClick:o,getValue:a,color:l="#2196F3"}){const c=k.useRef(null),u=k.useRef(null),d=k.useRef(0),[f,p]=k.useState(!1),[g,x]=k.useState(0),w=20,m=800,y=k.useMemo(()=>!t||t.length===0?[]:t.length<=n?t:t.slice(-n),[t,n]),v=b=>{const S=[];if(b.timestamp!==void 0&&S.push({label:"Time",value:new Date(b.timestamp).toLocaleTimeString()}),b.market_id!==void 0&&S.push({label:"Market",value:String(b.market_id)}),b.symbol!==void 0&&S.push({label:"Symbol",value:String(b.symbol)}),b.open!==void 0){const _=Number(b.open);S.push({label:"Open",value:isNaN(_)?String(b.open):_.toFixed(4)})}if(b.close!==void 0){const _=Number(b.close);S.push({label:"Close",value:isNaN(_)?String(b.close):_.toFixed(4)})}if(b.high!==void 0){const _=Number(b.high);S.push({label:"High",value:isNaN(_)?String(b.high):_.toFixed(4)})}if(b.low!==void 0){const _=Number(b.low);S.push({label:"Low",value:isNaN(_)?String(b.low):_.toFixed(4)})}if(b.volume!==void 0){const _=Number(b.volume);S.push({label:"Volume",value:isNaN(_)?String(b.volume):_.toFixed(2)})}if(b.price!==void 0){const _=Number(b.price);S.push({label:"Price",value:isNaN(_)?String(b.price):_.toFixed(4)})}if(b.mark_price!==void 0){const _=Number(b.mark_price);S.push({label:"Mark Price",value:isNaN(_)?String(b.mark_price):_.toFixed(4)})}if(b.last_price!==void 0){const _=Number(b.last_price);S.push({label:"Last Price",value:isNaN(_)?String(b.last_price):_.toFixed(4)})}if(b.size!==void 0){const _=Number(b.size);S.push({label:"Size",value:isNaN(_)?String(b.size):_.toFixed(4)})}if(b.entryPrice!==void 0){const _=Number(b.entryPrice);S.push({label:"Entry",value:isNaN(_)?String(b.entryPrice):_.toFixed(4)})}if(b.unrealizedPnL!==void 0){const _=Number(b.unrealizedPnL);S.push({label:"PnL",value:isNaN(_)?String(b.unrealizedPnL):_.toFixed(4)})}if(b.orderId!==void 0&&S.push({label:"Order ID",value:String(b.orderId)}),b.status!==void 0&&S.push({label:"Status",value:String(b.status)}),b.bucketId!==void 0&&S.push({label:"Bucket ID",value:String(b.bucketId)}),b.maxLeverage!==void 0&&S.push({label:"Max Lev",value:String(b.maxLeverage)}),b.value!==void 0&&S.length===0){const _=Number(b.value);S.push({label:"Value",value:isNaN(_)?String(b.value):_.toFixed(4)})}return S.length===0&&S.push({label:"Data",value:"Click to view"}),S.slice(0,6)};return k.useEffect(()=>{if(!u.current||!c.current)return;const b=y.length;if(b===0){x(0),d.current=0;return}const E=c.current.offsetWidth-20*2,P=b*i+(b-1)*w;if(P>E){const C=P-E;x(-C)}else x(0);const M=y.length>d.current;d.current=y.length,M&&u.current&&requestAnimationFrame(()=>{u.current&&u.current.offsetWidth})},[y.length,i,w,r]),k.useEffect(()=>{u.current&&(u.current.style.transition=f?"none":`transform ${m}ms ease-out`,u.current.style.transform=`translateX(${g}px)`)},[g,f,m]),h.jsxs("div",{ref:c,className:"data-flow-container",style:{width:`${r}px`,height:`${s}px`},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[h.jsx("div",{ref:u,className:"data-flow-rows-wrapper",style:{gap:`${w}px`},children:y.map((b,S)=>{const _=v(b),E=S;return h.jsxs("div",{className:"data-flow-row",onClick:()=>{o&&o(b)},style:{width:`${i}px`,background:l},children:[h.jsx("div",{className:"data-flow-row-header",children:b.timestamp?new Date(b.timestamp).toLocaleTimeString():`#${E+1}`}),h.jsx("div",{className:"data-flow-row-fields",children:_.map((P,M)=>h.jsxs("div",{className:"data-flow-field",children:[h.jsxs("span",{className:"data-flow-field-label",children:[P.label,":"]}),h.jsx("span",{className:"data-flow-field-value",children:P.value})]},M))}),h.jsx("div",{className:"data-flow-row-footer",children:"Click to view details"})]},`${E}-${b.timestamp||Date.now()}-${b.id||JSON.stringify(b)}`)})}),f&&h.jsx("div",{className:"data-flow-paused-indicator",children:"Paused"})]})}function _L({data:t,isOpen:e,onClose:n,title:s="Data Details"}){return k.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),k.useEffect(()=>{const r=i=>{i.key==="Escape"&&e&&n()};return e&&window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[e,n]),e?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"data-modal-overlay",onClick:n}),h.jsxs("div",{className:"data-modal",onClick:r=>r.stopPropagation(),children:[h.jsx("h3",{className:"data-modal-title",children:s}),h.jsx("pre",{className:"data-modal-content",children:JSON.stringify(t,null,2)}),h.jsx("button",{className:"data-modal-close-button",onClick:n,children:"Close"})]})]}):null}function yh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function CL(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kE(t){let e,n,s;t.length!==2?(e=yh,n=(a,l)=>yh(t(a),l),s=(a,l)=>t(a)-l):(e=t===yh||t===CL?t:EL,n=t,s=t);function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=r(a,l,c,u-1);return d>c&&s(a[d-1],l)>-s(a[d],l)?d-1:d}return{left:r,center:o,right:i}}function EL(){return 0}function PL(t){return t===null?NaN:+t}const TL=kE(yh),ML=TL.right;kE(PL).center;class kk extends Map{constructor(e,n=AL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[s,r]of e)this.set(s,r)}get(e){return super.get(Sk(this,e))}has(e){return super.has(Sk(this,e))}set(e,n){return super.set(IL(this,e),n)}delete(e){return super.delete(NL(this,e))}}function Sk({_intern:t,_key:e},n){const s=e(n);return t.has(s)?t.get(s):n}function IL({_intern:t,_key:e},n){const s=e(n);return t.has(s)?t.get(s):(t.set(s,n),n)}function NL({_intern:t,_key:e},n){const s=e(n);return t.has(s)&&(n=t.get(s),t.delete(s)),n}function AL(t){return t!==null&&typeof t=="object"?t.valueOf():t}const RL=Math.sqrt(50),OL=Math.sqrt(10),DL=Math.sqrt(2);function ff(t,e,n){const s=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(s)),i=s/Math.pow(10,r),o=i>=RL?10:i>=OL?5:i>=DL?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?ff(t,e,n*2):[a,l,c]}function LL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const s=e<t,[r,i,o]=s?ff(e,t,n):ff(t,e,n);if(!(i>=r))return[];const a=i-r+1,l=new Array(a);if(s)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Vm(t,e,n){return e=+e,t=+t,n=+n,ff(t,e,n)[2]}function jL(t,e,n){e=+e,t=+t,n=+n;const s=e<t,r=s?Vm(e,t,n):Vm(t,e,n);return(s?-1:1)*(r<0?1/-r:r)}function FL(t,e){let n;if(e===void 0)for(const s of t)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);else{let s=-1;for(let r of t)(r=e(r,++s,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function zL(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var s=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(r);++s<r;)i[s]=t+s*n;return i}function BL(t){return t}var dg=1,hg=2,Ym=3,cc=4,_k=1e-6;function $L(t){return"translate("+t+",0)"}function UL(t){return"translate(0,"+t+")"}function WL(t){return e=>+t(e)}function HL(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function VL(){return!this.__axis}function SE(t,e){var n=[],s=null,r=null,i=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===dg||t===cc?-1:1,u=t===cc||t===hg?"x":"y",d=t===dg||t===Ym?$L:UL;function f(p){var g=s??(e.ticks?e.ticks.apply(e,n):e.domain()),x=r??(e.tickFormat?e.tickFormat.apply(e,n):BL),w=Math.max(i,0)+a,m=e.range(),y=+m[0]+l,v=+m[m.length-1]+l,b=(e.bandwidth?HL:WL)(e.copy(),l),S=p.selection?p.selection():p,_=S.selectAll(".domain").data([null]),E=S.selectAll(".tick").data(g,e).order(),P=E.exit(),M=E.enter().append("g").attr("class","tick"),C=E.select("line"),N=E.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(M),C=C.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",c*i)),N=N.merge(M.append("text").attr("fill","currentColor").attr(u,c*w).attr("dy",t===dg?"0em":t===Ym?"0.71em":"0.32em")),p!==S&&(_=_.transition(p),E=E.transition(p),C=C.transition(p),N=N.transition(p),P=P.transition(p).attr("opacity",_k).attr("transform",function(I){return isFinite(I=b(I))?d(I+l):this.getAttribute("transform")}),M.attr("opacity",_k).attr("transform",function(I){var B=this.parentNode.__axis;return d((B&&isFinite(B=B(I))?B:b(I))+l)})),P.remove(),_.attr("d",t===cc||t===hg?o?"M"+c*o+","+y+"H"+l+"V"+v+"H"+c*o:"M"+l+","+y+"V"+v:o?"M"+y+","+c*o+"V"+l+"H"+v+"V"+c*o:"M"+y+","+l+"H"+v),E.attr("opacity",1).attr("transform",function(I){return d(b(I)+l)}),C.attr(u+"2",c*i),N.attr(u,c*w).text(x),S.filter(VL).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===hg?"start":t===cc?"end":"middle"),S.each(function(){this.__axis=b})}return f.scale=function(p){return arguments.length?(e=p,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),f):n.slice()},f.tickValues=function(p){return arguments.length?(s=p==null?null:Array.from(p),f):s&&s.slice()},f.tickFormat=function(p){return arguments.length?(r=p,f):r},f.tickSize=function(p){return arguments.length?(i=o=+p,f):i},f.tickSizeInner=function(p){return arguments.length?(i=+p,f):i},f.tickSizeOuter=function(p){return arguments.length?(o=+p,f):o},f.tickPadding=function(p){return arguments.length?(a=+p,f):a},f.offset=function(p){return arguments.length?(l=+p,f):l},f}function Ck(t){return SE(Ym,t)}function YL(t){return SE(cc,t)}var GL={value:()=>{}};function _E(){for(var t=0,e=arguments.length,n={},s;t<e;++t){if(!(s=arguments[t]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new vh(n)}function vh(t){this._=t}function qL(t,e){return t.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}vh.prototype=_E.prototype={constructor:vh,on:function(t,e){var n=this._,s=qL(t+"",n),r,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((r=(t=s[i]).type)&&(r=KL(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(r=(t=s[i]).type)n[r]=Ek(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Ek(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new vh(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,i;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],s=0,r=i.length;s<r;++s)i[s].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)}};function KL(t,e){for(var n=0,s=t.length,r;n<s;++n)if((r=t[n]).name===e)return r.value}function Ek(t,e,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===e){t[s]=GL,t=t.slice(0,s).concat(t.slice(s+1));break}return n!=null&&t.push({name:e,value:n}),t}var Gm="http://www.w3.org/1999/xhtml";const Pk={svg:"http://www.w3.org/2000/svg",xhtml:Gm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function P0(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pk.hasOwnProperty(e)?{space:Pk[e],local:t}:t}function XL(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Gm&&e.documentElement.namespaceURI===Gm?e.createElement(t):e.createElementNS(n,t)}}function QL(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function CE(t){var e=P0(t);return(e.local?QL:XL)(e)}function JL(){}function ny(t){return t==null?JL:function(){return this.querySelector(t)}}function ZL(t){typeof t!="function"&&(t=ny(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=t.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Sn(s,this._parents)}function EE(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ej(){return[]}function PE(t){return t==null?ej:function(){return this.querySelectorAll(t)}}function tj(t){return function(){return EE(t.apply(this,arguments))}}function nj(t){typeof t=="function"?t=tj(t):t=PE(t);for(var e=this._groups,n=e.length,s=[],r=[],i=0;i<n;++i)for(var o=e[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(s.push(t.call(l,l.__data__,c,o)),r.push(l));return new Sn(s,r)}function TE(t){return function(){return this.matches(t)}}function ME(t){return function(e){return e.matches(t)}}var sj=Array.prototype.find;function rj(t){return function(){return sj.call(this.children,t)}}function ij(){return this.firstElementChild}function oj(t){return this.select(t==null?ij:rj(typeof t=="function"?t:ME(t)))}var aj=Array.prototype.filter;function lj(){return Array.from(this.children)}function cj(t){return function(){return aj.call(this.children,t)}}function uj(t){return this.selectAll(t==null?lj:cj(typeof t=="function"?t:ME(t)))}function dj(t){typeof t!="function"&&(t=TE(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=[],l,c=0;c<o;++c)(l=i[c])&&t.call(l,l.__data__,c,i)&&a.push(l);return new Sn(s,this._parents)}function IE(t){return new Array(t.length)}function hj(){return new Sn(this._enter||this._groups.map(IE),this._parents)}function pf(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}pf.prototype={constructor:pf,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function fj(t){return function(){return t}}function pj(t,e,n,s,r,i){for(var o=0,a,l=e.length,c=i.length;o<c;++o)(a=e[o])?(a.__data__=i[o],s[o]=a):n[o]=new pf(t,i[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function gj(t,e,n,s,r,i,o){var a,l,c=new Map,u=e.length,d=i.length,f=new Array(u),p;for(a=0;a<u;++a)(l=e[a])&&(f[a]=p=o.call(l,l.__data__,a,e)+"",c.has(p)?r[a]=l:c.set(p,l));for(a=0;a<d;++a)p=o.call(t,i[a],a,i)+"",(l=c.get(p))?(s[a]=l,l.__data__=i[a],c.delete(p)):n[a]=new pf(t,i[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(f[a])===l&&(r[a]=l)}function mj(t){return t.__data__}function xj(t,e){if(!arguments.length)return Array.from(this,mj);var n=e?gj:pj,s=this._parents,r=this._groups;typeof t!="function"&&(t=fj(t));for(var i=r.length,o=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=s[c],d=r[c],f=d.length,p=bj(t.call(u,u&&u.__data__,c,s)),g=p.length,x=a[c]=new Array(g),w=o[c]=new Array(g),m=l[c]=new Array(f);n(u,d,x,w,m,p,e);for(var y=0,v=0,b,S;y<g;++y)if(b=x[y]){for(y>=v&&(v=y+1);!(S=w[v])&&++v<g;);b._next=S||null}}return o=new Sn(o,s),o._enter=a,o._exit=l,o}function bj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yj(){return new Sn(this._exit||this._groups.map(IE),this._parents)}function vj(t,e,n){var s=this.enter(),r=this,i=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?i.remove():n(i),s&&r?s.merge(r).order():r}function wj(t){for(var e=t.selection?t.selection():t,n=this._groups,s=e._groups,r=n.length,i=s.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=s[l],d=c.length,f=a[l]=new Array(d),p,g=0;g<d;++g)(p=c[g]||u[g])&&(f[g]=p);for(;l<r;++l)a[l]=n[l];return new Sn(a,this._parents)}function kj(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s=t[e],r=s.length-1,i=s[r],o;--r>=0;)(o=s[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function Sj(t){t||(t=_j);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,s=n.length,r=new Array(s),i=0;i<s;++i){for(var o=n[i],a=o.length,l=r[i]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new Sn(r,this._parents).order()}function _j(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Cj(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ej(){return Array.from(this)}function Pj(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length;r<i;++r){var o=s[r];if(o)return o}return null}function Tj(){let t=0;for(const e of this)++t;return t}function Mj(){return!this.node()}function Ij(t){for(var e=this._groups,n=0,s=e.length;n<s;++n)for(var r=e[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&t.call(a,a.__data__,i,r);return this}function Nj(t){return function(){this.removeAttribute(t)}}function Aj(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rj(t,e){return function(){this.setAttribute(t,e)}}function Oj(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Dj(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Lj(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function jj(t,e){var n=P0(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((e==null?n.local?Aj:Nj:typeof e=="function"?n.local?Lj:Dj:n.local?Oj:Rj)(n,e))}function NE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Fj(t){return function(){this.style.removeProperty(t)}}function zj(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Bj(t,e,n){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function $j(t,e,n){return arguments.length>1?this.each((e==null?Fj:typeof e=="function"?Bj:zj)(t,e,n??"")):rl(this.node(),t)}function rl(t,e){return t.style.getPropertyValue(e)||NE(t).getComputedStyle(t,null).getPropertyValue(e)}function Uj(t){return function(){delete this[t]}}function Wj(t,e){return function(){this[t]=e}}function Hj(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Vj(t,e){return arguments.length>1?this.each((e==null?Uj:typeof e=="function"?Hj:Wj)(t,e)):this.node()[t]}function AE(t){return t.trim().split(/^|\s+/)}function sy(t){return t.classList||new RE(t)}function RE(t){this._node=t,this._names=AE(t.getAttribute("class")||"")}RE.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function OE(t,e){for(var n=sy(t),s=-1,r=e.length;++s<r;)n.add(e[s])}function DE(t,e){for(var n=sy(t),s=-1,r=e.length;++s<r;)n.remove(e[s])}function Yj(t){return function(){OE(this,t)}}function Gj(t){return function(){DE(this,t)}}function qj(t,e){return function(){(e.apply(this,arguments)?OE:DE)(this,t)}}function Kj(t,e){var n=AE(t+"");if(arguments.length<2){for(var s=sy(this.node()),r=-1,i=n.length;++r<i;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?qj:e?Yj:Gj)(n,e))}function Xj(){this.textContent=""}function Qj(t){return function(){this.textContent=t}}function Jj(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Zj(t){return arguments.length?this.each(t==null?Xj:(typeof t=="function"?Jj:Qj)(t)):this.node().textContent}function eF(){this.innerHTML=""}function tF(t){return function(){this.innerHTML=t}}function nF(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function sF(t){return arguments.length?this.each(t==null?eF:(typeof t=="function"?nF:tF)(t)):this.node().innerHTML}function rF(){this.nextSibling&&this.parentNode.appendChild(this)}function iF(){return this.each(rF)}function oF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aF(){return this.each(oF)}function lF(t){var e=typeof t=="function"?t:CE(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cF(){return null}function uF(t,e){var n=typeof t=="function"?t:CE(t),s=e==null?cF:typeof e=="function"?e:ny(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function dF(){var t=this.parentNode;t&&t.removeChild(this)}function hF(){return this.each(dF)}function fF(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pF(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gF(t){return this.select(t?pF:fF)}function mF(t){return arguments.length?this.property("__data__",t):this.node().__data__}function xF(t){return function(e){t.call(this,e,this.__data__)}}function bF(t){return t.trim().split(/^|\s+/).map(function(e){var n="",s=e.indexOf(".");return s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),{type:e,name:n}})}function yF(t){return function(){var e=this.__on;if(e){for(var n=0,s=-1,r=e.length,i;n<r;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++s]=i;++s?e.length=s:delete this.__on}}}function vF(t,e,n){return function(){var s=this.__on,r,i=xF(e);if(s){for(var o=0,a=s.length;o<a;++o)if((r=s[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=e;return}}this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},s?s.push(r):this.__on=[r]}}function wF(t,e,n){var s=bF(t+""),r,i=s.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<i;++r)if((o=s[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?vF:yF,r=0;r<i;++r)this.each(a(s[r],e,n));return this}function LE(t,e,n){var s=NE(t),r=s.CustomEvent;typeof r=="function"?r=new r(e,n):(r=s.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function kF(t,e){return function(){return LE(this,t,e)}}function SF(t,e){return function(){return LE(this,t,e.apply(this,arguments))}}function _F(t,e){return this.each((typeof e=="function"?SF:kF)(t,e))}function*CF(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length,o;r<i;++r)(o=s[r])&&(yield o)}var ry=[null];function Sn(t,e){this._groups=t,this._parents=e}function Uu(){return new Sn([[document.documentElement]],ry)}function EF(){return this}Sn.prototype=Uu.prototype={constructor:Sn,select:ZL,selectAll:nj,selectChild:oj,selectChildren:uj,filter:dj,data:xj,enter:hj,exit:yj,join:vj,merge:wj,selection:EF,order:kj,sort:Sj,call:Cj,nodes:Ej,node:Pj,size:Tj,empty:Mj,each:Ij,attr:jj,style:$j,property:Vj,classed:Kj,text:Zj,html:sF,raise:iF,lower:aF,append:lF,insert:uF,remove:hF,clone:gF,datum:mF,on:wF,dispatch:_F,[Symbol.iterator]:CF};function Ad(t){return typeof t=="string"?new Sn([[document.querySelector(t)]],[document.documentElement]):new Sn([[t]],ry)}function PF(t){let e;for(;e=t.sourceEvent;)t=e;return t}function TF(t,e){if(t=PF(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function MF(t){return typeof t=="string"?new Sn([document.querySelectorAll(t)],[document.documentElement]):new Sn([EE(t)],ry)}function iy(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function jE(t,e){var n=Object.create(t.prototype);for(var s in e)n[s]=e[s];return n}function Wu(){}var uu=.7,gf=1/uu,ga="\\s*([+-]?\\d+)\\s*",du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",IF=/^#([0-9a-f]{3,8})$/,NF=new RegExp(`^rgb\\(${ga},${ga},${ga}\\)$`),AF=new RegExp(`^rgb\\(${er},${er},${er}\\)$`),RF=new RegExp(`^rgba\\(${ga},${ga},${ga},${du}\\)$`),OF=new RegExp(`^rgba\\(${er},${er},${er},${du}\\)$`),DF=new RegExp(`^hsl\\(${du},${er},${er}\\)$`),LF=new RegExp(`^hsla\\(${du},${er},${er},${du}\\)$`),Tk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iy(Wu,bo,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Mk,formatHex:Mk,formatHex8:jF,formatHsl:FF,formatRgb:Ik,toString:Ik});function Mk(){return this.rgb().formatHex()}function jF(){return this.rgb().formatHex8()}function FF(){return FE(this).formatHsl()}function Ik(){return this.rgb().formatRgb()}function bo(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=IF.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Nk(e):n===3?new Rn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Rd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Rd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=NF.exec(t))?new Rn(e[1],e[2],e[3],1):(e=AF.exec(t))?new Rn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=RF.exec(t))?Rd(e[1],e[2],e[3],e[4]):(e=OF.exec(t))?Rd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=DF.exec(t))?Ok(e[1],e[2]/100,e[3]/100,1):(e=LF.exec(t))?Ok(e[1],e[2]/100,e[3]/100,e[4]):Tk.hasOwnProperty(t)?Nk(Tk[t]):t==="transparent"?new Rn(NaN,NaN,NaN,0):null}function Nk(t){return new Rn(t>>16&255,t>>8&255,t&255,1)}function Rd(t,e,n,s){return s<=0&&(t=e=n=NaN),new Rn(t,e,n,s)}function zF(t){return t instanceof Wu||(t=bo(t)),t?(t=t.rgb(),new Rn(t.r,t.g,t.b,t.opacity)):new Rn}function qm(t,e,n,s){return arguments.length===1?zF(t):new Rn(t,e,n,s??1)}function Rn(t,e,n,s){this.r=+t,this.g=+e,this.b=+n,this.opacity=+s}iy(Rn,qm,jE(Wu,{brighter(t){return t=t==null?gf:Math.pow(gf,t),new Rn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?uu:Math.pow(uu,t),new Rn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rn(io(this.r),io(this.g),io(this.b),mf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ak,formatHex:Ak,formatHex8:BF,formatRgb:Rk,toString:Rk}));function Ak(){return`#${qi(this.r)}${qi(this.g)}${qi(this.b)}`}function BF(){return`#${qi(this.r)}${qi(this.g)}${qi(this.b)}${qi((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rk(){const t=mf(this.opacity);return`${t===1?"rgb(":"rgba("}${io(this.r)}, ${io(this.g)}, ${io(this.b)}${t===1?")":`, ${t})`}`}function mf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function io(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qi(t){return t=io(t),(t<16?"0":"")+t.toString(16)}function Ok(t,e,n,s){return s<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ts(t,e,n,s)}function FE(t){if(t instanceof Ts)return new Ts(t.h,t.s,t.l,t.opacity);if(t instanceof Wu||(t=bo(t)),!t)return new Ts;if(t instanceof Ts)return t;t=t.rgb();var e=t.r/255,n=t.g/255,s=t.b/255,r=Math.min(e,n,s),i=Math.max(e,n,s),o=NaN,a=i-r,l=(i+r)/2;return a?(e===i?o=(n-s)/a+(n<s)*6:n===i?o=(s-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+r:2-i-r,o*=60):a=l>0&&l<1?0:o,new Ts(o,a,l,t.opacity)}function $F(t,e,n,s){return arguments.length===1?FE(t):new Ts(t,e,n,s??1)}function Ts(t,e,n,s){this.h=+t,this.s=+e,this.l=+n,this.opacity=+s}iy(Ts,$F,jE(Wu,{brighter(t){return t=t==null?gf:Math.pow(gf,t),new Ts(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?uu:Math.pow(uu,t),new Ts(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*e,r=2*n-s;return new Rn(fg(t>=240?t-240:t+120,r,s),fg(t,r,s),fg(t<120?t+240:t-120,r,s),this.opacity)},clamp(){return new Ts(Dk(this.h),Od(this.s),Od(this.l),mf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=mf(this.opacity);return`${t===1?"hsl(":"hsla("}${Dk(this.h)}, ${Od(this.s)*100}%, ${Od(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Dk(t){return t=(t||0)%360,t<0?t+360:t}function Od(t){return Math.max(0,Math.min(1,t||0))}function fg(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const oy=t=>()=>t;function UF(t,e){return function(n){return t+n*e}}function WF(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(s){return Math.pow(t+s*e,n)}}function HF(t){return(t=+t)==1?zE:function(e,n){return n-e?WF(e,n,t):oy(isNaN(e)?n:e)}}function zE(t,e){var n=e-t;return n?UF(t,n):oy(isNaN(t)?e:t)}const xf=function t(e){var n=HF(e);function s(r,i){var o=n((r=qm(r)).r,(i=qm(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),c=zE(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return s.gamma=t,s}(1);function VF(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,s=e.slice(),r;return function(i){for(r=0;r<n;++r)s[r]=t[r]*(1-i)+e[r]*i;return s}}function YF(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function GF(t,e){var n=e?e.length:0,s=t?Math.min(n,t.length):0,r=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)r[o]=ay(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<s;++o)i[o]=r[o](a);return i}}function qF(t,e){var n=new Date;return t=+t,e=+e,function(s){return n.setTime(t*(1-s)+e*s),n}}function Ps(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function KF(t,e){var n={},s={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=ay(t[r],e[r]):s[r]=e[r];return function(i){for(r in n)s[r]=n[r](i);return s}}var Km=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pg=new RegExp(Km.source,"g");function XF(t){return function(){return t}}function QF(t){return function(e){return t(e)+""}}function BE(t,e){var n=Km.lastIndex=pg.lastIndex=0,s,r,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(s=Km.exec(t))&&(r=pg.exec(e));)(i=r.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(s=s[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Ps(s,r)})),n=pg.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?QF(l[0].x):XF(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function ay(t,e){var n=typeof e,s;return e==null||n==="boolean"?oy(e):(n==="number"?Ps:n==="string"?(s=bo(e))?(e=s,xf):BE:e instanceof bo?xf:e instanceof Date?qF:YF(e)?VF:Array.isArray(e)?GF:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?KF:Ps)(t,e)}function JF(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Lk=180/Math.PI,Xm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $E(t,e,n,s,r,i){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*s)&&(n-=t*l,s-=e*l),(a=Math.sqrt(n*n+s*s))&&(n/=a,s/=a,l/=a),t*s<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*Lk,skewX:Math.atan(l)*Lk,scaleX:o,scaleY:a}}var Dd;function ZF(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Xm:$E(e.a,e.b,e.c,e.d,e.e,e.f)}function ez(t){return t==null||(Dd||(Dd=document.createElementNS("http://www.w3.org/2000/svg","g")),Dd.setAttribute("transform",t),!(t=Dd.transform.baseVal.consolidate()))?Xm:(t=t.matrix,$E(t.a,t.b,t.c,t.d,t.e,t.f))}function UE(t,e,n,s){function r(c){return c.length?c.pop()+" ":""}function i(c,u,d,f,p,g){if(c!==d||u!==f){var x=p.push("translate(",null,e,null,n);g.push({i:x-4,x:Ps(c,d)},{i:x-2,x:Ps(u,f)})}else(d||f)&&p.push("translate("+d+e+f+n)}function o(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(r(d)+"rotate(",null,s)-2,x:Ps(c,u)})):u&&d.push(r(d)+"rotate("+u+s)}function a(c,u,d,f){c!==u?f.push({i:d.push(r(d)+"skewX(",null,s)-2,x:Ps(c,u)}):u&&d.push(r(d)+"skewX("+u+s)}function l(c,u,d,f,p,g){if(c!==d||u!==f){var x=p.push(r(p)+"scale(",null,",",null,")");g.push({i:x-4,x:Ps(c,d)},{i:x-2,x:Ps(u,f)})}else(d!==1||f!==1)&&p.push(r(p)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=t(c),u=t(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,f),o(c.rotate,u.rotate,d,f),a(c.skewX,u.skewX,d,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(p){for(var g=-1,x=f.length,w;++g<x;)d[(w=f[g]).i]=w.x(p);return d.join("")}}}var tz=UE(ZF,"px, ","px)","deg)"),nz=UE(ez,", ",")",")"),il=0,uc=0,Gl=0,WE=1e3,bf,dc,yf=0,yo=0,T0=0,hu=typeof performance=="object"&&performance.now?performance:Date,HE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ly(){return yo||(HE(sz),yo=hu.now()+T0)}function sz(){yo=0}function vf(){this._call=this._time=this._next=null}vf.prototype=VE.prototype={constructor:vf,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ly():+n)+(e==null?0:+e),!this._next&&dc!==this&&(dc?dc._next=this:bf=this,dc=this),this._call=t,this._time=n,Qm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qm())}};function VE(t,e,n){var s=new vf;return s.restart(t,e,n),s}function rz(){ly(),++il;for(var t=bf,e;t;)(e=yo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--il}function jk(){yo=(yf=hu.now())+T0,il=uc=0;try{rz()}finally{il=0,oz(),yo=0}}function iz(){var t=hu.now(),e=t-yf;e>WE&&(T0-=e,yf=t)}function oz(){for(var t,e=bf,n,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:bf=n);dc=t,Qm(s)}function Qm(t){if(!il){uc&&(uc=clearTimeout(uc));var e=t-yo;e>24?(t<1/0&&(uc=setTimeout(jk,t-hu.now()-T0)),Gl&&(Gl=clearInterval(Gl))):(Gl||(yf=hu.now(),Gl=setInterval(iz,WE)),il=1,HE(jk))}}function Fk(t,e,n){var s=new vf;return e=e==null?0:+e,s.restart(r=>{s.stop(),t(r+e)},e,n),s}var az=_E("start","end","cancel","interrupt"),lz=[],YE=0,zk=1,Jm=2,wh=3,Bk=4,Zm=5,kh=6;function M0(t,e,n,s,r,i){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;cz(t,n,{name:e,index:s,group:r,on:az,tween:lz,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:YE})}function cy(t,e){var n=Ds(t,e);if(n.state>YE)throw new Error("too late; already scheduled");return n}function rr(t,e){var n=Ds(t,e);if(n.state>wh)throw new Error("too late; already running");return n}function Ds(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function cz(t,e,n){var s=t.__transition,r;s[e]=n,n.timer=VE(i,0,n.time);function i(c){n.state=zk,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,f,p;if(n.state!==zk)return l();for(u in s)if(p=s[u],p.name===n.name){if(p.state===wh)return Fk(o);p.state===Bk?(p.state=kh,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete s[u]):+u<e&&(p.state=kh,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete s[u])}if(Fk(function(){n.state===wh&&(n.state=Bk,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Jm,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Jm){for(n.state=wh,r=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=p);r.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Zm,1),d=-1,f=r.length;++d<f;)r[d].call(t,u);n.state===Zm&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=kh,n.timer.stop(),delete s[e];for(var c in s)return;delete t.__transition}}function uz(t,e){var n=t.__transition,s,r,i=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((s=n[o]).name!==e){i=!1;continue}r=s.state>Jm&&s.state<Zm,s.state=kh,s.timer.stop(),s.on.call(r?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete n[o]}i&&delete t.__transition}}function dz(t){return this.each(function(){uz(this,t)})}function hz(t,e){var n,s;return function(){var r=rr(this,t),i=r.tween;if(i!==n){s=n=i;for(var o=0,a=s.length;o<a;++o)if(s[o].name===e){s=s.slice(),s.splice(o,1);break}}r.tween=s}}function fz(t,e,n){var s,r;if(typeof n!="function")throw new Error;return function(){var i=rr(this,t),o=i.tween;if(o!==s){r=(s=o).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}i.tween=r}}function pz(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s=Ds(this.node(),n).tween,r=0,i=s.length,o;r<i;++r)if((o=s[r]).name===t)return o.value;return null}return this.each((e==null?hz:fz)(n,t,e))}function uy(t,e,n){var s=t._id;return t.each(function(){var r=rr(this,s);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Ds(r,s).value[e]}}function GE(t,e){var n;return(typeof e=="number"?Ps:e instanceof bo?xf:(n=bo(e))?(e=n,xf):BE)(t,e)}function gz(t){return function(){this.removeAttribute(t)}}function mz(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xz(t,e,n){var s,r=n+"",i;return function(){var o=this.getAttribute(t);return o===r?null:o===s?i:i=e(s=o,n)}}function bz(t,e,n){var s,r=n+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===s?i:i=e(s=o,n)}}function yz(t,e,n){var s,r,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a)))}}function vz(t,e,n){var s,r,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a)))}}function wz(t,e){var n=P0(t),s=n==="transform"?nz:GE;return this.attrTween(t,typeof e=="function"?(n.local?vz:yz)(n,s,uy(this,"attr."+t,e)):e==null?(n.local?mz:gz)(n):(n.local?bz:xz)(n,s,e))}function kz(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Sz(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function _z(t,e){var n,s;function r(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&Sz(t,i)),n}return r._value=e,r}function Cz(t,e){var n,s;function r(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&kz(t,i)),n}return r._value=e,r}function Ez(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var s=P0(t);return this.tween(n,(s.local?_z:Cz)(s,e))}function Pz(t,e){return function(){cy(this,t).delay=+e.apply(this,arguments)}}function Tz(t,e){return e=+e,function(){cy(this,t).delay=e}}function Mz(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Pz:Tz)(e,t)):Ds(this.node(),e).delay}function Iz(t,e){return function(){rr(this,t).duration=+e.apply(this,arguments)}}function Nz(t,e){return e=+e,function(){rr(this,t).duration=e}}function Az(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Iz:Nz)(e,t)):Ds(this.node(),e).duration}function Rz(t,e){if(typeof e!="function")throw new Error;return function(){rr(this,t).ease=e}}function Oz(t){var e=this._id;return arguments.length?this.each(Rz(e,t)):Ds(this.node(),e).ease}function Dz(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;rr(this,t).ease=n}}function Lz(t){if(typeof t!="function")throw new Error;return this.each(Dz(this._id,t))}function jz(t){typeof t!="function"&&(t=TE(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=[],l,c=0;c<o;++c)(l=i[c])&&t.call(l,l.__data__,c,i)&&a.push(l);return new Ir(s,this._parents,this._name,this._id)}function Fz(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,s=e.length,r=n.length,i=Math.min(s,r),o=new Array(s),a=0;a<i;++a)for(var l=e[a],c=n[a],u=l.length,d=o[a]=new Array(u),f,p=0;p<u;++p)(f=l[p]||c[p])&&(d[p]=f);for(;a<s;++a)o[a]=e[a];return new Ir(o,this._parents,this._name,this._id)}function zz(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Bz(t,e,n){var s,r,i=zz(e)?cy:rr;return function(){var o=i(this,t),a=o.on;a!==s&&(r=(s=a).copy()).on(e,n),o.on=r}}function $z(t,e){var n=this._id;return arguments.length<2?Ds(this.node(),n).on.on(t):this.each(Bz(n,t,e))}function Uz(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Wz(){return this.on("end.remove",Uz(this._id))}function Hz(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ny(t));for(var s=this._groups,r=s.length,i=new Array(r),o=0;o<r;++o)for(var a=s[o],l=a.length,c=i[o]=new Array(l),u,d,f=0;f<l;++f)(u=a[f])&&(d=t.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,M0(c[f],e,n,f,c,Ds(u,n)));return new Ir(i,this._parents,e,n)}function Vz(t){var e=this._name,n=this._id;typeof t!="function"&&(t=PE(t));for(var s=this._groups,r=s.length,i=[],o=[],a=0;a<r;++a)for(var l=s[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var f=t.call(u,u.__data__,d,l),p,g=Ds(u,n),x=0,w=f.length;x<w;++x)(p=f[x])&&M0(p,e,n,x,f,g);i.push(f),o.push(u)}return new Ir(i,o,e,n)}var Yz=Uu.prototype.constructor;function Gz(){return new Yz(this._groups,this._parents)}function qz(t,e){var n,s,r;return function(){var i=rl(this,t),o=(this.style.removeProperty(t),rl(this,t));return i===o?null:i===n&&o===s?r:r=e(n=i,s=o)}}function qE(t){return function(){this.style.removeProperty(t)}}function Kz(t,e,n){var s,r=n+"",i;return function(){var o=rl(this,t);return o===r?null:o===s?i:i=e(s=o,n)}}function Xz(t,e,n){var s,r,i;return function(){var o=rl(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),rl(this,t))),o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a))}}function Qz(t,e){var n,s,r,i="style."+e,o="end."+i,a;return function(){var l=rr(this,t),c=l.on,u=l.value[i]==null?a||(a=qE(e)):void 0;(c!==n||r!==u)&&(s=(n=c).copy()).on(o,r=u),l.on=s}}function Jz(t,e,n){var s=(t+="")=="transform"?tz:GE;return e==null?this.styleTween(t,qz(t,s)).on("end.style."+t,qE(t)):typeof e=="function"?this.styleTween(t,Xz(t,s,uy(this,"style."+t,e))).each(Qz(this._id,t)):this.styleTween(t,Kz(t,s,e),n).on("end.style."+t,null)}function Zz(t,e,n){return function(s){this.style.setProperty(t,e.call(this,s),n)}}function eB(t,e,n){var s,r;function i(){var o=e.apply(this,arguments);return o!==r&&(s=(r=o)&&Zz(t,o,n)),s}return i._value=e,i}function tB(t,e,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,eB(t,e,n??""))}function nB(t){return function(){this.textContent=t}}function sB(t){return function(){var e=t(this);this.textContent=e??""}}function rB(t){return this.tween("text",typeof t=="function"?sB(uy(this,"text",t)):nB(t==null?"":t+""))}function iB(t){return function(e){this.textContent=t.call(this,e)}}function oB(t){var e,n;function s(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&iB(r)),e}return s._value=t,s}function aB(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,oB(t))}function lB(){for(var t=this._name,e=this._id,n=KE(),s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Ds(l,e);M0(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ir(s,this._parents,t,n)}function cB(){var t,e,n=this,s=n._id,r=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--r===0&&i()}};n.each(function(){var c=rr(this,s),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&i()})}var uB=0;function Ir(t,e,n,s){this._groups=t,this._parents=e,this._name=n,this._id=s}function KE(){return++uB}var or=Uu.prototype;Ir.prototype={constructor:Ir,select:Hz,selectAll:Vz,selectChild:or.selectChild,selectChildren:or.selectChildren,filter:jz,merge:Fz,selection:Gz,transition:lB,call:or.call,nodes:or.nodes,node:or.node,size:or.size,empty:or.empty,each:or.each,on:$z,attr:wz,attrTween:Ez,style:Jz,styleTween:tB,text:rB,textTween:aB,remove:Wz,tween:pz,delay:Mz,duration:Az,ease:Oz,easeVarying:Lz,end:cB,[Symbol.iterator]:or[Symbol.iterator]};function dB(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var hB={time:null,delay:0,duration:250,ease:dB};function fB(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function pB(t){var e,n;t instanceof Ir?(e=t._id,t=t._name):(e=KE(),(n=hB).time=ly(),t=t==null?null:t+"");for(var s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&M0(l,t,e,c,o,n||fB(l,e));return new Ir(s,this._parents,t,e)}Uu.prototype.interrupt=dz;Uu.prototype.transition=pB;function gB(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function wf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function ol(t){return t=wf(Math.abs(t)),t?t[1]:NaN}function mB(t,e){return function(n,s){for(var r=n.length,i=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>s&&(a=Math.max(1,s-l)),i.push(n.substring(r-=a,r+a)),!((l+=a+1)>s));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function xB(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var bB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kf(t){if(!(e=bB.exec(t)))throw new Error("invalid format: "+t);var e;return new dy({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}kf.prototype=dy.prototype;function dy(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}dy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yB(t){e:for(var e=t.length,n=1,s=-1,r;n<e;++n)switch(t[n]){case".":s=r=n;break;case"0":s===0&&(s=n),r=n;break;default:if(!+t[n])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(r+1):t}var XE;function vB(t,e){var n=wf(t,e);if(!n)return t+"";var s=n[0],r=n[1],i=r-(XE=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+wf(t,Math.max(0,e+i-1))[0]}function $k(t,e){var n=wf(t,e);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const Uk={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:gB,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$k(t*100,e),r:$k,s:vB,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Wk(t){return t}var Hk=Array.prototype.map,Vk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wB(t){var e=t.grouping===void 0||t.thousands===void 0?Wk:mB(Hk.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?Wk:xB(Hk.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=kf(d);var f=d.fill,p=d.align,g=d.sign,x=d.symbol,w=d.zero,m=d.width,y=d.comma,v=d.precision,b=d.trim,S=d.type;S==="n"?(y=!0,S="g"):Uk[S]||(v===void 0&&(v=12),b=!0,S="g"),(w||f==="0"&&p==="=")&&(w=!0,f="0",p="=");var _=x==="$"?n:x==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=x==="$"?s:/[%p]/.test(S)?o:"",P=Uk[S],M=/[defgprs%]/.test(S);v=v===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function C(N){var I=_,B=E,W,j,z;if(S==="c")B=P(N)+B,N="";else{N=+N;var F=N<0||1/N<0;if(N=isNaN(N)?l:P(Math.abs(N),v),b&&(N=yB(N)),F&&+N==0&&g!=="+"&&(F=!1),I=(F?g==="("?g:a:g==="-"||g==="("?"":g)+I,B=(S==="s"?Vk[8+XE/3]:"")+B+(F&&g==="("?")":""),M){for(W=-1,j=N.length;++W<j;)if(z=N.charCodeAt(W),48>z||z>57){B=(z===46?r+N.slice(W+1):N.slice(W))+B,N=N.slice(0,W);break}}}y&&!w&&(N=e(N,1/0));var A=I.length+N.length+B.length,$=A<m?new Array(m-A+1).join(f):"";switch(y&&w&&(N=e($+N,$.length?m-B.length:1/0),$=""),p){case"<":N=I+N+B+$;break;case"=":N=I+$+N+B;break;case"^":N=$.slice(0,A=$.length>>1)+I+N+B+$.slice(A);break;default:N=$+I+N+B;break}return i(N)}return C.toString=function(){return d+""},C}function u(d,f){var p=c((d=kf(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(ol(f)/3)))*3,x=Math.pow(10,-g),w=Vk[8+g/3];return function(m){return p(x*m)+w}}return{format:c,formatPrefix:u}}var Ld,QE,JE;kB({thousands:",",grouping:[3],currency:["$",""]});function kB(t){return Ld=wB(t),QE=Ld.format,JE=Ld.formatPrefix,Ld}function SB(t){return Math.max(0,-ol(Math.abs(t)))}function _B(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ol(e)/3)))*3-ol(Math.abs(t)))}function CB(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ol(e)-ol(t))+1}function hy(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Yk=Symbol("implicit");function ZE(){var t=new kk,e=[],n=[],s=Yk;function r(i){let o=t.get(i);if(o===void 0){if(s!==Yk)return s;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return r.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new kk;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(i){return arguments.length?(n=Array.from(i),r):n.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return ZE(e,n).unknown(s)},hy.apply(r,arguments),r}function eP(){var t=ZE().unknown(void 0),e=t.domain,n=t.range,s=0,r=1,i,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,p=r<s,g=p?r:s,x=p?s:r;i=(x-g)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),g+=(x-g-i*(f-l))*u,o=i*(1-l),a&&(g=Math.round(g),o=Math.round(o));var w=zL(f).map(function(m){return g+i*m});return n(p?w.reverse():w)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([s,r]=f,s=+s,r=+r,d()):[s,r]},t.rangeRound=function(f){return[s,r]=f,s=+s,r=+r,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return eP(e(),[s,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},hy.apply(d(),arguments)}function EB(t){return function(){return t}}function PB(t){return+t}var Gk=[0,1];function ra(t){return t}function ex(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:EB(isNaN(e)?NaN:.5)}function TB(t,e){var n;return t>e&&(n=t,t=e,e=n),function(s){return Math.max(t,Math.min(e,s))}}function MB(t,e,n){var s=t[0],r=t[1],i=e[0],o=e[1];return r<s?(s=ex(r,s),i=n(o,i)):(s=ex(s,r),i=n(i,o)),function(a){return i(s(a))}}function IB(t,e,n){var s=Math.min(t.length,e.length)-1,r=new Array(s),i=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<s;)r[o]=ex(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=ML(t,a,1,s)-1;return i[l](r[l](a))}}function NB(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function AB(){var t=Gk,e=Gk,n=ay,s,r,i,o=ra,a,l,c;function u(){var f=Math.min(t.length,e.length);return o!==ra&&(o=TB(t[0],t[f-1])),a=f>2?IB:MB,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?i:(l||(l=a(t.map(s),e,n)))(s(o(f)))}return d.invert=function(f){return o(r((c||(c=a(e,t.map(s),Ps)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,PB),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=JF,u()},d.clamp=function(f){return arguments.length?(o=f?!0:ra,u()):o!==ra},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,p){return s=f,r=p,u()}}function RB(){return AB()(ra,ra)}function OB(t,e,n,s){var r=jL(t,e,n),i;switch(s=kf(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return s.precision==null&&!isNaN(i=_B(r,o))&&(s.precision=i),JE(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=CB(r,Math.max(Math.abs(t),Math.abs(e))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=SB(r))&&(s.precision=i-(s.type==="%")*2);break}}return QE(s)}function DB(t){var e=t.domain;return t.ticks=function(n){var s=e();return LL(s[0],s[s.length-1],n??10)},t.tickFormat=function(n,s){var r=e();return OB(r[0],r[r.length-1],n??10,s)},t.nice=function(n){n==null&&(n=10);var s=e(),r=0,i=s.length-1,o=s[r],a=s[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=i,i=c);u-- >0;){if(c=Vm(o,a,n),c===l)return s[r]=o,s[i]=a,e(s);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function tP(){var t=RB();return t.copy=function(){return NB(t,tP())},hy.apply(t,arguments),DB(t)}function hc(t,e,n){this.k=t,this.x=e,this.y=n}hc.prototype={constructor:hc,scale:function(t){return t===1?this:new hc(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new hc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};hc.prototype;function Fo({data:t,height:e=150,width:n=900,maxBars:s=60,getTimestamp:r=i=>i.timestamp||Date.now()}){const i=k.useRef(null),o=k.useRef(null),[a,l]=k.useState([]),c=k.useCallback(u=>r(u),[r]);return k.useEffect(()=>{if(t.length===0){l([]);return}const u=Date.now(),d=new Map;t.forEach(p=>{const g=c(p);if(!g||isNaN(g)||!isFinite(g))return;const x=Math.floor((u-g)/1e3);if(x>=0&&x<s){const w=d.get(x)||0;d.set(x,w+1)}});const f=[];for(let p=s-1;p>=0;p--)f.push({time:p,count:d.get(p)||0});l(f)},[t,s,c]),k.useEffect(()=>{if(!i.current||a.length===0)return;const u=Ad(i.current);u.selectAll("*").remove();const d={top:20,right:20,bottom:40,left:50},f=n-d.left-d.right,p=e-d.top-d.bottom,g=u.append("g").attr("transform",`translate(${d.left}, ${d.top})`),x=eP().domain(a.map((y,v)=>v.toString())).range([0,f]).padding(.1);FL(a,y=>y.count);const m=tP().domain([0,5]).range([p,0]).nice();return g.append("g").attr("transform",`translate(0, ${p})`).call(Ck(x).tickValues(x.domain().filter((y,v)=>v%Math.ceil(s/10)===0)).tickFormat((y,v)=>{var E;const b=parseInt(y||"0"),S=((E=a[b])==null?void 0:E.time)||0;return S===0?"now":S<60?`-${S}s`:`-${Math.floor(S/60)}m`})).selectAll("text").attr("class","data-rate-axis-text"),g.append("g").call(YL(m).ticks(5)).selectAll("text").attr("class","data-rate-axis-text"),g.append("text").attr("class","data-rate-y-axis-label").attr("transform","rotate(-90)").attr("y",-35).attr("x",-p/2).attr("text-anchor","middle").text("Data Points/sec"),g.selectAll("rect").data(a).enter().append("rect").attr("x",(y,v)=>x(v.toString())||0).attr("y",y=>m(y.count)).attr("width",x.bandwidth()).attr("height",y=>p-m(y.count)).attr("fill",y=>y.count>=3.5?"#4CAF50":y.count>=2?"#FF9800":y.count>0?"#F44336":"#E0E0E0").attr("rx",2).style("opacity",.8).on("mouseover",function(y,v){var M;Ad(this).style("opacity",1),o.current&&o.current.remove();const S=Ad("body").append("div").attr("class","data-rate-tooltip").style("opacity",0),_=(M=i.current)==null?void 0:M.getBoundingClientRect(),[E,P]=TF(y,i.current);_&&S.style("left",`${_.left+E+10}px`).style("top",`${_.top+P-10}px`).text(`${v.count} data points ${v.time===0?"now":`${v.time}s ago`}`).transition().duration(200).style("opacity",1),o.current=S}).on("mouseout",function(){Ad(this).style("opacity",.8),o.current&&(o.current.transition().duration(200).style("opacity",0).remove(),o.current=null)}),g.append("g").attr("class","grid").attr("transform",`translate(0, ${p})`).call(Ck(x).tickSize(-p).tickValues(x.domain().filter((y,v)=>v%Math.ceil(s/10)===0)).tickFormat(()=>"")).selectAll("line").attr("class","data-rate-grid-line"),()=>{o.current&&(o.current.remove(),o.current=null),MF(".data-rate-tooltip").remove()}},[a,n,e,s]),h.jsxs("div",{className:"data-rate-histogram-container",children:[h.jsx("h4",{className:"data-rate-histogram-title",children:"Data Rate (points/second)"}),h.jsx("svg",{ref:i,className:"data-rate-histogram-svg",width:n,height:e})]})}function LB(){const[t,e]=k.useState(Ou),[n,s]=k.useState(c0),[r,i]=k.useState(Db),[o,a]=k.useState(100),[l,c]=k.useState(10),{walletAddress:u,authToken:d,error:f}=vl(),{markets:p,selectedMarketId:g,setSelectedMarketId:x,fetchMarkets:w,loadingMarkets:m,getMarket:y}=To({baseURL:t,sessionToken:d,autoFetchMarkets:!0}),[v,b]=k.useState("0"),[S,_]=k.useState("1m"),[E,P]=k.useState("0"),[M,C]=k.useState("BTC/USDC");k.useEffect(()=>{if(g){const O=String(g);b(O),P(O);const te=typeof g=="string"?parseInt(g,10):Number(g);if(!isNaN(te)&&isFinite(te)){const ne=y(te);ne&&C(ne.symbol||`${ne.baseAsset}/${ne.quoteAsset}`)}}},[g,y]);const[N,I]=k.useState(null),[B,W]=k.useState("Data Details"),[j,z]=k.useState(!1),{klineData:F,loading:A,error:$,isConnected:T}=TA({baseURL:t,wsURL:n,marketId:v,interval:S,authToken:d,walletAddress:u,deviceID:r,maxDataPoints:o}),{lastPrice:G,markPrice:D,error:R,isConnected:X}=l0({baseURL:t,wsURL:n,marketId:E,symbol:M,authToken:d,walletAddress:u,deviceID:r}),[K,Y]=k.useState([]),[V,Q]=k.useState([]);k.useEffect(()=>{G&&Y(O=>{const te=[...O,{...G,value:G.price,timestamp:G.timestamp,arrivalTime:Date.now(),raw:G}];return te.length>o?te.slice(-o):te})},[G,o]),k.useEffect(()=>{D&&Q(O=>{const te=[...O,{...D,value:D.mark_price,timestamp:D.timestamp,arrivalTime:Date.now(),raw:D}];return te.length>o?te.slice(-o):te})},[D,o]);const{buckets:ee,loading:fe,error:je,refresh:Se}=l3({baseURL:t,authToken:d,walletAddress:u,refreshInterval:5e3}),{positions:Ce,loading:Ie,error:gt,isConnected:L,refresh:ae}=a3({baseURL:t,wsURL:n,authToken:d,walletAddress:u,deviceID:r,useWebSocket:!0}),{orders:ue,loading:ye,error:de,isConnected:me,refresh:U}=wE({baseURL:t,wsURL:n,authToken:d,walletAddress:u,deviceID:r,useWebSocket:!0}),ie=(O,te)=>{I(O.raw||O),W(te),z(!0)};return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{className:"hooks-test-page-title",children:"Hooks Test Page"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{className:"hooks-test-section-header",children:"Shared Configuration"}),h.jsxs("div",{className:"hooks-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["API Base URL:",h.jsx("input",{type:"text",className:"hooks-test-input",value:t,onChange:O=>e(O.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["WebSocket URL:",h.jsx("input",{type:"text",className:"hooks-test-input",value:n,onChange:O=>s(O.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Wallet Address (from useOnboard):",h.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:u||"",readOnly:!0,placeholder:"Set via useOnboard hook"}),f&&h.jsx("div",{className:"hooks-test-error-message",children:f})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Auth Token (from useOnboard):",h.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:d||"",readOnly:!0,placeholder:"Set via useOnboard hook"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market Selection:",h.jsxs("select",{className:"hooks-test-select",value:g||"",onChange:O=>{const te=O.target.value;te&&x(te)},children:[h.jsx("option",{value:"",children:"Select a market..."}),p.map(O=>h.jsxs("option",{value:String(O.market_id),children:[O.symbol||`${O.baseAsset}/${O.quoteAsset}`," ","(ID: ",O.market_id,")"]},O.market_id))]}),m&&h.jsx("div",{className:"hooks-test-info-message",children:"Loading markets..."}),!m&&p.length===0&&h.jsx("button",{className:"hooks-test-button",onClick:()=>w(),style:{marginTop:"0.5rem"},children:"Fetch Markets"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Device ID:",h.jsx("input",{type:"text",className:"hooks-test-input",value:r,onChange:O=>i(O.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Max Data Points (Memory):",h.jsx("input",{type:"number",className:"hooks-test-input",value:o,onChange:O=>a(Math.max(10,parseInt(O.target.value)||100)),min:"10"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Max Visible Rectangles:",h.jsx("input",{type:"number",className:"hooks-test-input",value:l,onChange:O=>c(Math.max(1,parseInt(O.target.value)||10)),min:"1"})]})})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Kline Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${T?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:T?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[F.length," data points"]})]})]}),h.jsxs("div",{className:"hooks-test-form-grid",children:[h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",h.jsx("input",{type:"text",className:"hooks-test-input",value:v,onChange:O=>b(O.target.value),placeholder:"Select market from dropdown above",style:{backgroundColor:g?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Interval:",h.jsxs("select",{className:"hooks-test-select",value:S,onChange:O=>_(O.target.value),children:[h.jsx("option",{value:"1m",children:"1m"}),h.jsx("option",{value:"5m",children:"5m"}),h.jsx("option",{value:"15m",children:"15m"}),h.jsx("option",{value:"1h",children:"1h"}),h.jsx("option",{value:"4h",children:"4h"}),h.jsx("option",{value:"1d",children:"1d"})]})]})})]}),$&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",$]}),A&&F.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading kline data..."}):F.length===0?h.jsx("div",{className:"hooks-test-empty-state",children:"No kline data available"}):h.jsxs(h.Fragment,{children:[h.jsx(jo,{data:F,maxVisible:l,maxDataPoints:o,getValue:O=>O.close||O.high||100,onItemClick:O=>ie(O,"Kline Data")}),h.jsx(Fo,{data:F,getTimestamp:O=>{let te=O.timestamp||O.open_time||Date.now();return te<9466848e5&&(te=te*1e3),te}})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Mark Price Hook"}),h.jsx("span",{className:`hooks-test-status-badge ${X?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:X?"WS Connected":"WS Disconnected"})]}),h.jsx("div",{className:"hooks-test-form-grid",children:h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Symbol (auto-updated from selected market):",h.jsx("input",{type:"text",className:"hooks-test-input",value:M,onChange:O=>C(O.target.value),placeholder:"BTC/USDC",style:{backgroundColor:g?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),R&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",R]}),V.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No mark price data available"}):h.jsxs(h.Fragment,{children:[h.jsx(jo,{data:V,maxVisible:l,maxDataPoints:o,getValue:O=>O.value||O.mark_price||100,onItemClick:O=>ie(O,"Mark Price Data")}),h.jsx(Fo,{data:V,getTimestamp:O=>O.arrivalTime||O.timestamp||Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Last Price Hook"}),h.jsx("span",{className:`hooks-test-status-badge ${X?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:X?"WS Connected":"WS Disconnected"})]}),h.jsx("div",{className:"hooks-test-form-grid",children:h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",h.jsx("input",{type:"text",className:"hooks-test-input",value:E,onChange:O=>P(O.target.value),placeholder:"Select market from dropdown above",style:{backgroundColor:g?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),R&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",R]}),K.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No last price data available"}):h.jsxs(h.Fragment,{children:[h.jsx(jo,{data:K,maxVisible:l,maxDataPoints:o,getValue:O=>O.value||O.price||100,onItemClick:O=>ie(O,"Last Price Data")}),h.jsx(Fo,{data:K,getTimestamp:O=>O.arrivalTime||O.timestamp||Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Bucket Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[ee.length," buckets"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>Se(),disabled:fe,children:fe?"Loading...":"Refresh"})]})]}),je&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",je]}),fe&&ee.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading buckets..."}):ee.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No buckets found"}):h.jsxs(h.Fragment,{children:[h.jsx(jo,{data:ee,maxVisible:l,maxDataPoints:o,getValue:O=>O.totalMargin||O.unrealizedPnL||100,onItemClick:O=>ie(O,"Bucket Data")}),h.jsx(Fo,{data:ee,getTimestamp:O=>O.createdAt?new Date(O.createdAt).getTime():Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Position Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${L?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:L?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[Ce.length," positions"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>ae(),disabled:Ie,children:Ie?"Loading...":"Refresh"})]})]}),gt&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",gt]}),Ie&&Ce.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading positions..."}):Ce.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No positions found"}):h.jsxs(h.Fragment,{children:[h.jsx(jo,{data:Ce,maxVisible:l,maxDataPoints:o,getValue:O=>O.size||O.margin||100,onItemClick:O=>ie(O,"Position Data")}),h.jsx(Fo,{data:Ce,getTimestamp:O=>Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Order Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${me?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:me?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[ue.length," orders"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>U(),disabled:ye,children:ye?"Loading...":"Refresh"})]})]}),de&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",de]}),ye&&ue.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading orders..."}):ue.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No orders found"}):h.jsxs(h.Fragment,{children:[h.jsx(jo,{data:ue,maxVisible:l,maxDataPoints:o,getValue:O=>O.quantity||O.price||100,onItemClick:O=>ie(O,"Order Data")}),h.jsx(Fo,{data:ue,getTimestamp:O=>O.createdAt?typeof O.createdAt=="number"?O.createdAt:new Date(O.createdAt).getTime():O.updatedAt?typeof O.updatedAt=="number"?O.updatedAt:new Date(O.updatedAt).getTime():Date.now()})]})]}),h.jsx(_L,{data:N,isOpen:j,onClose:()=>z(!1),title:B})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Hu(t){return t+.5|0}const ii=(t,e,n)=>Math.max(Math.min(t,n),e);function fc(t){return ii(Hu(t*2.55),0,255)}function mi(t){return ii(Hu(t*255),0,255)}function fr(t){return ii(Hu(t/2.55)/100,0,1)}function qk(t){return ii(Hu(t*100),0,100)}const ns={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},tx=[..."0123456789ABCDEF"],jB=t=>tx[t&15],FB=t=>tx[(t&240)>>4]+tx[t&15],jd=t=>(t&240)>>4===(t&15),zB=t=>jd(t.r)&&jd(t.g)&&jd(t.b)&&jd(t.a);function BB(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ns[t[1]]*17,g:255&ns[t[2]]*17,b:255&ns[t[3]]*17,a:e===5?ns[t[4]]*17:255}:(e===7||e===9)&&(n={r:ns[t[1]]<<4|ns[t[2]],g:ns[t[3]]<<4|ns[t[4]],b:ns[t[5]]<<4|ns[t[6]],a:e===9?ns[t[7]]<<4|ns[t[8]]:255})),n}const $B=(t,e)=>t<255?e(t):"";function UB(t){var e=zB(t)?jB:FB;return t?"#"+e(t.r)+e(t.g)+e(t.b)+$B(t.a,e):void 0}const WB=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function nP(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function HB(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function VB(t,e,n){const s=nP(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function YB(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function fy(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=YB(n,s,r,u,i),l=l*60+.5),[l|0,c||0,a]}function py(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(mi)}function gy(t,e,n){return py(nP,t,e,n)}function GB(t,e,n){return py(VB,t,e,n)}function qB(t,e,n){return py(HB,t,e,n)}function sP(t){return(t%360+360)%360}function KB(t){const e=WB.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?fc(+e[5]):mi(+e[5]));const r=sP(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=GB(r,i,o):e[1]==="hsv"?s=qB(r,i,o):s=gy(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function XB(t,e){var n=fy(t);n[0]=sP(n[0]+e),n=gy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function QB(t){if(!t)return;const e=fy(t),n=e[0],s=qk(e[1]),r=qk(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${fr(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const Kk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Xk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function JB(){const t={},e=Object.keys(Xk),n=Object.keys(Kk);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,Kk[i]);i=parseInt(Xk[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Fd;function ZB(t){Fd||(Fd=JB(),Fd.transparent=[0,0,0,0]);const e=Fd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const e$=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function t$(t){const e=e$.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?fc(o):ii(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?fc(s):ii(s,0,255)),r=255&(e[4]?fc(r):ii(r,0,255)),i=255&(e[6]?fc(i):ii(i,0,255)),{r:s,g:r,b:i,a:n}}}function n$(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${fr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const gg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,zo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function s$(t,e,n){const s=zo(fr(t.r)),r=zo(fr(t.g)),i=zo(fr(t.b));return{r:mi(gg(s+n*(zo(fr(e.r))-s))),g:mi(gg(r+n*(zo(fr(e.g))-r))),b:mi(gg(i+n*(zo(fr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function zd(t,e,n){if(t){let s=fy(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=gy(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function rP(t,e){return t&&Object.assign(e||{},t)}function Qk(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=mi(t[3]))):(e=rP(t,{r:0,g:0,b:0,a:1}),e.a=mi(e.a)),e}function r$(t){return t.charAt(0)==="r"?t$(t):KB(t)}class fu{constructor(e){if(e instanceof fu)return e;const n=typeof e;let s;n==="object"?s=Qk(e):n==="string"&&(s=BB(e)||ZB(e)||r$(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=rP(this._rgb);return e&&(e.a=fr(e.a)),e}set rgb(e){this._rgb=Qk(e)}rgbString(){return this._valid?n$(this._rgb):void 0}hexString(){return this._valid?UB(this._rgb):void 0}hslString(){return this._valid?QB(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=s$(this._rgb,e._rgb,n)),this}clone(){return new fu(this.rgb)}alpha(e){return this._rgb.a=mi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Hu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return zd(this._rgb,2,e),this}darken(e){return zd(this._rgb,2,-e),this}saturate(e){return zd(this._rgb,1,e),this}desaturate(e){return zd(this._rgb,1,-e),this}rotate(e){return XB(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ar(){}const i$=(()=>{let t=0;return()=>t++})();function pt(t){return t==null}function yt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Be(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function zn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Bs(t,e){return zn(t)?t:e}function Le(t,e){return typeof t>"u"?e:t}const o$=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,iP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ot(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function nt(t,e,n,s){let r,i,o;if(yt(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(Be(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function Sf(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function _f(t){if(yt(t))return t.map(_f);if(Be(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=_f(t[n[r]]);return e}return t}function oP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function a$(t,e,n,s){if(!oP(t))return;const r=e[t],i=n[t];Be(r)&&Be(i)?pu(r,i,s):e[t]=_f(i)}function pu(t,e,n){const s=yt(e)?e:[e],r=s.length;if(!Be(t))return t;n=n||{};const i=n.merger||a$;let o;for(let a=0;a<r;++a){if(o=s[a],!Be(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Dc(t,e){return pu(t,e,{merger:l$})}function l$(t,e,n){if(!oP(t))return;const s=e[t],r=n[t];Be(s)&&Be(r)?Dc(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=_f(r))}const Jk={"":t=>t,x:t=>t.x,y:t=>t.y};function c$(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function u$(t){const e=c$(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function gu(t,e){return(Jk[e]||(Jk[e]=u$(e)))(t)}function my(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Xn=t=>typeof t<"u",jn=t=>typeof t=="function",Zk=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function d$(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const et=Math.PI,Zt=2*et,h$=Zt+et,Cf=Number.POSITIVE_INFINITY,xy=et/180,en=et/2,ls=et/4,Ef=et*2/3,aP=Math.log10,al=Math.sign;function Lc(t,e,n){return Math.abs(t-e)<n}function eS(t){const e=Math.round(t);t=Lc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(aP(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function f$(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function p$(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function vo(t){return!p$(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function g$(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function m$(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Yt(t){return t*(et/180)}function lP(t){return t*(180/et)}function tS(t){if(!zn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function nx(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*et&&(i+=Zt),{angle:i,distance:r}}function ll(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function x$(t,e){return(t-e+h$)%Zt-et}function Vr(t){return(t%Zt+Zt)%Zt}function Pf(t,e,n,s){const r=Vr(t),i=Vr(e),o=Vr(n),a=Vr(i-r),l=Vr(o-r),c=Vr(r-i),u=Vr(r-o);return r===i||r===o||s&&i===o||a>l&&c<u}function hs(t,e,n){return Math.max(e,Math.min(n,t))}function b$(t){return hs(t,-32768,32767)}function pc(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function by(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Ki=(t,e,n,s)=>by(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),y$=(t,e,n)=>by(t,n,s=>t[s][e]>=n);function v$(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const cP=["push","pop","shift","splice","unshift"];function w$(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),cP.forEach(n=>{const s="_onData"+my(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function nS(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(cP.forEach(i=>{delete t[i]}),delete t._chartjs)}function k$(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const uP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function dP(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,uP.call(window,()=>{s=!1,t.apply(e,n)}))}}function S$(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const yy=t=>t==="start"?"left":t==="end"?"right":"center",dn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,_$=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function C$(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:p,maxDefined:g}=o.getUserBounds();if(p){if(r=Math.min(Ki(l,u,d).lo,n?s:Ki(e,u,o.getPixelForValue(d)).lo),c){const x=l.slice(0,r+1).reverse().findIndex(w=>!pt(w[a.axis]));r-=Math.max(0,x)}r=hs(r,0,s-1)}if(g){let x=Math.max(Ki(l,o.axis,f,!0).hi+1,n?0:Ki(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const w=l.slice(x-1).findIndex(m=>!pt(m[a.axis]));x+=Math.max(0,w)}i=hs(x,r,s)-r}else i=s-r}return{start:r,count:i}}function E$(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const Bd=t=>t===0||t===1,sS=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Zt/n)),rS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Zt/n)+1,jc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*en)+1,easeOutSine:t=>Math.sin(t*en),easeInOutSine:t=>-.5*(Math.cos(et*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Bd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Bd(t)?t:sS(t,.075,.3),easeOutElastic:t=>Bd(t)?t:rS(t,.075,.3),easeInOutElastic(t){return Bd(t)?t:t<.5?.5*sS(t*2,.1125,.45):.5+.5*rS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-jc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?jc.easeInBounce(t*2)*.5:jc.easeOutBounce(t*2-1)*.5+.5};function vy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function iS(t){return vy(t)?t:new fu(t)}function mg(t){return vy(t)?t:new fu(t).saturate(.5).darken(.1).hexString()}const P$=["x","y","borderWidth","radius","tension"],T$=["color","borderColor","backgroundColor"];function M$(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:T$},numbers:{type:"number",properties:P$}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function I$(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const oS=new Map;function N$(t,e){e=e||{};const n=t+JSON.stringify(e);let s=oS.get(n);return s||(s=new Intl.NumberFormat(t,e),oS.set(n,s)),s}function wy(t,e,n){return N$(e,n).format(t)}const A$={values(t){return yt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=R$(t,n)}const o=aP(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),wy(t,s,l)}};function R$(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var hP={formatters:A$};function O$(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hP.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const wo=Object.create(null),sx=Object.create(null);function Fc(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function xg(t,e,n){return typeof e=="string"?pu(Fc(t,e),n):pu(Fc(t,""),e)}class D${constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>mg(r.backgroundColor),this.hoverBorderColor=(s,r)=>mg(r.borderColor),this.hoverColor=(s,r)=>mg(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return xg(this,e,n)}get(e){return Fc(this,e)}describe(e,n){return xg(sx,e,n)}override(e,n){return xg(wo,e,n)}route(e,n,s,r){const i=Fc(this,e),o=Fc(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Be(l)?Object.assign({},c,l):Le(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Et=new D$({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[M$,I$,O$]);function L$(t){return!t||pt(t.size)||pt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function aS(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Ai(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function lS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function rx(t,e,n,s){fP(t,e,n,s,null)}function fP(t,e,n,s,r){let i,o,a,l,c,u,d,f;const p=e.pointStyle,g=e.rotation,x=e.radius;let w=(g||0)*xy;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(w),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:r?t.ellipse(n,s,r/2,x,0,0,Zt):t.arc(n,s,x,0,Zt),t.closePath();break;case"triangle":u=r?r/2:x,t.moveTo(n+Math.sin(w)*u,s-Math.cos(w)*x),w+=Ef,t.lineTo(n+Math.sin(w)*u,s-Math.cos(w)*x),w+=Ef,t.lineTo(n+Math.sin(w)*u,s-Math.cos(w)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(w+ls)*l,d=Math.cos(w+ls)*(r?r/2-c:l),a=Math.sin(w+ls)*l,f=Math.sin(w+ls)*(r?r/2-c:l),t.arc(n-d,s-a,c,w-et,w-en),t.arc(n+f,s-o,c,w-en,w),t.arc(n+d,s+a,c,w,w+en),t.arc(n-f,s+o,c,w+en,w+et),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*x,u=r?r/2:l,t.rect(n-u,s-l,2*u,2*l);break}w+=ls;case"rectRot":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,f=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+f,s-o),t.lineTo(n+d,s+a),t.lineTo(n-f,s+o),t.closePath();break;case"crossRot":w+=ls;case"cross":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,f=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"star":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,f=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o),w+=ls,d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,f=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(w)*x,a=Math.sin(w)*x,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(w)*(r?r/2:x),s+Math.sin(w)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function mu(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function I0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function N0(t){t.restore()}function j$(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function F$(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function z$(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),pt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function B$(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function $$(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function xu(t,e,n,s,r,i={}){const o=yt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,z$(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&$$(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),pt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,s,i.maxWidth)),t.fillText(c,n,s,i.maxWidth),B$(t,n,s,c,i),s+=Number(r.lineHeight);t.restore()}function Tf(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*et,et,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,et,en,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,en,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-en,!0),t.lineTo(n+o.topLeft,s)}const U$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,W$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function H$(t,e){const n=(""+t).match(U$);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const V$=t=>+t||0;function pP(t,e){const n={},s=Be(e),r=s?Object.keys(e):e,i=Be(t)?s?o=>Le(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=V$(i(o));return n}function Y$(t){return pP(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ma(t){return pP(t,["topLeft","topRight","bottomLeft","bottomRight"])}function pn(t){const e=Y$(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function $t(t,e){t=t||{},e=e||Et.font;let n=Le(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Le(t.style,e.style);s&&!(""+s).match(W$)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Le(t.family,e.family),lineHeight:H$(Le(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Le(t.weight,e.weight),string:""};return r.string=L$(r),r}function $d(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function G$(t,e,n){const{min:s,max:r}=t,i=iP(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Io(t,e){return Object.assign(Object.create(t),e)}function ky(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=bP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>ky([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return mP(a,l,()=>tU(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return uS(a).includes(l)},ownKeys(a){return uS(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function cl(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:gP(t,s),setContext:i=>cl(t,i,n,s),override:i=>cl(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return mP(i,o,()=>K$(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function gP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:jn(n)?n:()=>n,isIndexable:jn(s)?s:()=>s}}const q$=(t,e)=>t?t+my(e):e,Sy=(t,e)=>Be(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function mP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function K$(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return jn(a)&&o.isScriptable(e)&&(a=X$(e,a,t,n)),yt(a)&&a.length&&(a=Q$(e,a,t,o.isIndexable)),Sy(e,a)&&(a=cl(a,r,i&&i[e],o)),a}function X$(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),Sy(t,l)&&(l=_y(r._scopes,r,t,l)),l}function Q$(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Be(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=_y(c,r,t,u);e.push(cl(d,i,o&&o[t],a))}}return e}function xP(t,e,n){return jn(t)?t(e,n):t}const J$=(t,e)=>t===!0?e:typeof t=="string"?gu(e,t):void 0;function Z$(t,e,n,s,r){for(const i of e){const o=J$(n,i);if(o){t.add(o);const a=xP(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function _y(t,e,n,s){const r=e._rootScopes,i=xP(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=cS(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=cS(a,o,i,l,s),l===null)?!1:ky(Array.from(a),[""],r,i,()=>eU(e,n,s))}function cS(t,e,n,s,r){for(;n;)n=Z$(t,e,n,s,r);return n}function eU(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return yt(r)&&Be(n)?n:r||{}}function tU(t,e,n,s){let r;for(const i of e)if(r=bP(q$(i,t),n),typeof r<"u")return Sy(t,r)?_y(n,s,t,r):r}function bP(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function uS(t){let e=t._keys;return e||(e=t._keys=nU(t._scopes)),e}function nU(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const sU=Number.EPSILON||1e-14,ul=(t,e)=>e<t.length&&!t[e].skip&&t[e],yP=t=>t==="x"?"y":"x";function rU(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=ll(i,r),l=ll(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,f=s*u;return{previous:{x:i.x-d*(o.x-r.x),y:i.y-d*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function iU(t,e,n){const s=t.length;let r,i,o,a,l,c=ul(t,0);for(let u=0;u<s-1;++u)if(l=c,c=ul(t,u+1),!(!l||!c)){if(Lc(e[u],0,sU)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=i*o*e[u])}}function oU(t,e,n="x"){const s=yP(n),r=t.length;let i,o,a,l=ul(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=ul(t,c+1),!a)continue;const u=a[n],d=a[s];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${s}`]=d-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${s}`]=d+i*e[c])}}function aU(t,e="x"){const n=yP(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=ul(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=ul(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?al(r[o-1])!==al(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}iU(t,r,i),oU(t,i,e)}function Ud(t,e,n){return Math.max(Math.min(t,n),e)}function lU(t,e){let n,s,r,i,o,a=mu(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&mu(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=Ud(r.cp1x,e.left,e.right),r.cp1y=Ud(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Ud(r.cp2x,e.left,e.right),r.cp2y=Ud(r.cp2y,e.top,e.bottom)))}function cU(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")aU(t,r);else{let c=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=rU(c,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&lU(t,n)}function Cy(){return typeof window<"u"&&typeof document<"u"}function Ey(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Mf(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const A0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function uU(t,e){return A0(t).getPropertyValue(e)}const dU=["top","right","bottom","left"];function oo(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=dU[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const hU=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function fU(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(hU(r,i,t.target))a=r,l=i;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Fi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=A0(n),i=r.boxSizing==="border-box",o=oo(r,"padding"),a=oo(r,"border","width"),{x:l,y:c,box:u}=fU(t,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:g}=e;return i&&(p-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/p*n.width/s),y:Math.round((c-f)/g*n.height/s)}}function pU(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&Ey(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=A0(i),l=oo(a,"border","width"),c=oo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Mf(a.maxWidth,i,"clientWidth"),r=Mf(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||Cf,maxHeight:r||Cf}}const oi=t=>Math.round(t*10)/10;function gU(t,e,n,s){const r=A0(t),i=oo(r,"margin"),o=Mf(r.maxWidth,t,"clientWidth")||Cf,a=Mf(r.maxHeight,t,"clientHeight")||Cf,l=pU(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=oo(r,"border","width"),p=oo(r,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=oi(Math.min(c,o,l.maxWidth)),u=oi(Math.min(u,a,l.maxHeight)),c&&!u&&(u=oi(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=oi(Math.floor(u*s))),{width:c,height:u}}function dS(t,e,n){const s=e||1,r=oi(t.height*s),i=oi(t.width*s);t.height=oi(t.height),t.width=oi(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const mU=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Cy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function hS(t,e){const n=uU(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function zi(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function xU(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function bU(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=zi(t,r,n),a=zi(r,i,n),l=zi(i,e,n),c=zi(o,a,n),u=zi(a,l,n);return zi(c,u,n)}const yU=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},vU=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function xa(t,e,n){return t?yU(e,n):vU()}function vP(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function wP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function kP(t){return t==="angle"?{between:Pf,compare:x$,normalize:Vr}:{between:pc,compare:(e,n)=>e-n,normalize:e=>e}}function fS({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function wU(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=kP(s),l=e.length;let{start:c,end:u,loop:d}=t,f,p;if(d){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(e[c%l][s]),r,i);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function kU(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=kP(s),{start:u,end:d,loop:f,style:p}=wU(t,e,n),g=[];let x=!1,w=null,m,y,v;const b=()=>l(r,v,m)&&a(r,v)!==0,S=()=>a(i,m)===0||l(i,v,m),_=()=>x||b(),E=()=>!x||S();for(let P=u,M=u;P<=d;++P)y=e[P%o],!y.skip&&(m=c(y[s]),m!==v&&(x=l(m,r,i),w===null&&_()&&(w=a(m,r)===0?P:M),w!==null&&E()&&(g.push(fS({start:w,end:P,loop:f,count:o,style:p})),w=null),M=P,v=m));return w!==null&&g.push(fS({start:w,end:d,loop:f,count:o,style:p})),g}function SU(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=kU(s[r],t.points,e);i.length&&n.push(...i)}return n}function _U(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function CU(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function EU(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=_U(n,r,i,s);if(s===!0)return pS(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return pS(t,CU(n,o,l,c),n,e)}function pS(t,e,n,s){return!s||!s.setContext||!n?e:PU(t,e,n,s)}function PU(t,e,n,s){const r=t._chart.getContext(),i=gS(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,d=e[0].start,f=d;function p(g,x,w,m){const y=a?-1:1;if(g!==x){for(g+=l;n[g%l].skip;)g-=y;for(;n[x%l].skip;)x+=y;g%l!==x%l&&(c.push({start:g%l,end:x%l,loop:w,style:m}),u=m,d=x%l)}}for(const g of e){d=a?d:g.start;let x=n[d%l],w;for(f=d+1;f<=g.end;f++){const m=n[f%l];w=gS(s.setContext(Io(r,{type:"segment",p0:x,p1:m,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),TU(w,u)&&p(d,f-1,g.loop,u),x=m,u=w}d<f-1&&p(d,f-1,g.loop,u)}return c}function gS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function TU(t,e){if(!e)return!1;const n=[],s=function(r,i){return vy(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function Wd(t,e,n){return t.options.clip?t[n]:e[n]}function MU(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Wd(n,e,"left"),right:Wd(n,e,"right"),top:Wd(s,e,"top"),bottom:Wd(s,e,"bottom")}:e}function IU(t,e){const n=e._clip;if(n.disabled)return!1;const s=MU(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class NU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=uP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var lr=new NU;const mS="transparent",AU={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=iS(t||mS),r=s.valid&&iS(e||mS);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class RU{constructor(e,n,s,r){const i=n[s];r=$d([e.to,r,i,e.from]);const o=$d([e.from,i,r]);this._active=!0,this._fn=e.fn||AU[e.type||typeof o],this._easing=jc[e.easing]||jc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=$d([e.to,n,r,e.from]),this._from=$d([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class Py{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Be(e))return;const n=Object.keys(Et.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!Be(i))return;const o={};for(const a of n)o[a]=i[a];(yt(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=DU(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&OU(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let d=i[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}i[c]=d=new RU(f,e,c,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return lr.add(this._chart,s),!0}}function OU(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function DU(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function xS(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function LU(t,e,n){if(n===!1)return!1;const s=xS(t,n),r=xS(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function jU(t){let e,n,s,r;return Be(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function SP(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function bS(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],zn(c)&&(i||e===0||al(e)===al(c))&&(e+=c)}return!u&&!s.all?0:e}function FU(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[i]:t[u]};return a}function bg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function zU(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function BU(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function $U(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function yS(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function vS(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,u=zU(i,o,s),d=e.length;let f;for(let p=0;p<d;++p){const g=e[p],{[l]:x,[c]:w}=g,m=g._stacks||(g._stacks={});f=m[c]=$U(r,u,x),f[a]=w,f._top=yS(f,o,!0,s.type),f._bottom=yS(f,o,!1,s.type);const y=f._visualValues||(f._visualValues={});y[a]=w}}function yg(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function UU(t,e){return Io(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function WU(t,e,n){return Io(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ql(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const vg=t=>t==="reset"||t==="none",wS=(t,e)=>e?t:Object.assign({},t),HU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:SP(n,!0),values:null};class ba{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=bg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ql(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(d,f,p,g)=>d==="x"?f:d==="r"?g:p,i=n.xAxisID=Le(s.xAxisID,yg(e,"x")),o=n.yAxisID=Le(s.yAxisID,yg(e,"y")),a=n.rAxisID=Le(s.rAxisID,yg(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),u=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&nS(this._data,this),e._stacked&&ql(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Be(n)){const r=this._cachedMeta;this._data=FU(n,r)}else if(s!==n){if(s){nS(s,this);const r=this._cachedMeta;ql(r),r._parsed=[]}n&&Object.isExtensible(n)&&w$(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=bg(n.vScale,n),n.stack!==s.stack&&(r=!0,ql(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(vS(this,n._parsed),n._stacked=bg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,d,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{yt(r[e])?f=this.parseArrayData(s,r,e,n):Be(r[e])?f=this.parseObjectData(s,r,e,n):f=this.parsePrimitiveData(s,r,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=d=f[u],l&&(p()&&(l=!1),c=d);s._sorted=l}o&&vS(this,f)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,d=new Array(r);let f,p,g;for(f=0,p=r;f<p;++f)g=f+s,d[f]={[a]:u||i.parse(c[g],g),[l]:o.parse(n[g],g)};return d}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,c,u,d;for(l=0,c=r;l<c;++l)u=l+s,d=n[u],a[l]={x:i.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,d,f,p;for(u=0,d=r;u<d;++u)f=u+s,p=n[f],c[u]={x:i.parse(gu(p,a),f),y:o.parse(gu(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:SP(r,!0),values:n._stacks[e.axis]._visualValues};return bS(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=bS(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=HU(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=BU(a);let f,p;function g(){p=r[f];const x=p[a.axis];return!zn(p[e.axis])||u>x||d<x}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(c,e,p,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],zn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=jU(Le(this.options.clip,LU(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const d=r[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=WU(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=UU(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Xn(s);if(a)return wS(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(Et.elements[e]),g=()=>this.getContext(s,r,n),x=c.resolveNamedOptions(f,p,g,d);return x.$shared&&(x.$shared=l,i[o]=Object.freeze(wS(x,l))),x}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,s,n))}const c=new Py(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||vg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){vg(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!vg(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&ql(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}re(ba,"defaults",{}),re(ba,"datasetElementType",null),re(ba,"dataElementType",null);function VU(t,e,n){let s=1,r=1,i=0,o=0;if(e<Zt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),p=(v,b,S)=>Pf(v,a,l,!0)?1:Math.max(b,b*n,S,S*n),g=(v,b,S)=>Pf(v,a,l,!0)?-1:Math.min(b,b*n,S,S*n),x=p(0,c,d),w=p(en,u,f),m=g(et,c,d),y=g(et+en,u,f);s=(x-m)/2,r=(w-y)/2,i=-(x+m)/2,o=-(w+y)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class gc extends ba{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(Be(s[e])){const{key:l="value"}=this._parsing;i=c=>+gu(s[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Yt(this.options.rotation-90)}_getCircumference(){return Yt(this.options.circumference)}_getRotationExtents(){let e=Zt,n=-Zt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(o$(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:x}=VU(d,u,l),w=(s.width-o)/f,m=(s.height-o)/p,y=Math.max(Math.min(w,m)/2,0),v=iP(this.options.radius,y),b=Math.max(v*l,0),S=(v-b)/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=x*v,r.total=this.calculateTotal(),this.outerRadius=v-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/Zt)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=i&&c.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:x,includeOptions:w}=this._getSharedOptions(n,r);let m=this._getRotation(),y;for(y=0;y<n;++y)m+=this._circumference(y,i);for(y=n;y<n+s;++y){const v=this._circumference(y,i),b=e[y],S={x:u+this.offsetX,y:d+this.offsetY,startAngle:m,endAngle:m+v,circumference:v,outerRadius:g,innerRadius:p};w&&(S.options=x||this.resolveDataElementOptions(y,b.active?"active":r)),m+=v,this.updateElement(b,y,S,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Zt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=wy(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Le(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}re(gc,"id","doughnut"),re(gc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),re(gc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),re(gc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class Sh extends ba{getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:i}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=i.getLabelForValue(o.y);return{label:s[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,r=this.chart._animationsDisabled;let{start:i,count:o}=C$(n,s,r);if(this._drawStart=i,this._drawCount=o,E$(n)&&(i=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,r),d=this.getSharedOptions(u),f=this.includeOptions(r,d),p=o.axis,g=a.axis,{spanGaps:x,segment:w}=this.options,m=vo(x)?x:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||r==="none";let v=n>0&&this.getParsed(n-1);for(let b=n;b<n+s;++b){const S=e[b],_=this.getParsed(b),E=y?S:{},P=pt(_[g]),M=E[p]=o.getPixelForValue(_[p],b),C=E[g]=i||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[g],b);E.skip=isNaN(M)||isNaN(C)||P,E.stop=b>0&&Math.abs(_[p]-v[p])>m,w&&(E.parsed=_,E.raw=c.data[b]),f&&(E.options=d||this.resolveDataElementOptions(b,S.active?"active":r)),y||this.updateElement(S,b,E,r),v=_}this.updateSharedOptions(d,r,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=e.dataset,r=s.options&&s.options.borderWidth||0;if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,o)/2}}re(Sh,"id","scatter"),re(Sh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),re(Sh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Ri(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ty{constructor(e){re(this,"options");this.options=e||{}}static override(e){Object.assign(Ty.prototype,e)}init(){}formats(){return Ri()}parse(){return Ri()}format(){return Ri()}add(){return Ri()}diff(){return Ri()}startOf(){return Ri()}endOf(){return Ri()}}var YU={_date:Ty};function GU(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?y$:Ki;if(s){if(r._sharedOptions){const u=i[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=c(i,e,n-d),p=c(i,e,n+d);return{lo:f.lo,hi:p.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(x=>!pt(x[d.axis]));u.lo-=Math.max(0,p);const g=f.slice(u.hi).findIndex(x=>!pt(x[d.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:i.length-1}}function R0(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:d,hi:f}=GU(i[a],e,o,r);for(let p=d;p<=f;++p){const g=u[p];g.skip||s(g,c,p)}}}function qU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function wg(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||R0(t,n,e,function(a,l,c){!r&&!mu(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function KU(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:d}=nx(o,{x:e.x,y:e.y});Pf(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return R0(t,n,e,i),r}function XU(t,e,n,s,r,i){let o=[];const a=qU(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const p=u.inRange(e.x,e.y,r);if(s&&!p)return;const g=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(g))&&!p)return;const w=a(e,g);w<l?(o=[{element:u,datasetIndex:d,index:f}],l=w):w===l&&o.push({element:u,datasetIndex:d,index:f})}return R0(t,n,e,c),o}function kg(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?KU(t,e,n,r):XU(t,e,n,s,r,i)}function kS(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return R0(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var QU={modes:{index(t,e,n,s){const r=Fi(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?wg(t,r,i,s,o):kg(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const r=Fi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?wg(t,r,i,s,o):kg(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const r=Fi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return wg(t,r,i,s,o)},nearest(t,e,n,s){const r=Fi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return kg(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=Fi(e,t);return kS(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=Fi(e,t);return kS(t,r,"y",n.intersect,s)}}};const _P=["left","top","right","bottom"];function Kl(t,e){return t.filter(n=>n.pos===e)}function SS(t,e){return t.filter(n=>_P.indexOf(n.pos)===-1&&n.box.axis===e)}function Xl(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function JU(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function ZU(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!_P.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function eW(t,e){const n=ZU(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=u?u*r:l&&e.availableHeight)}return n}function tW(t){const e=JU(t),n=Xl(e.filter(c=>c.box.fullSize),!0),s=Xl(Kl(e,"left"),!0),r=Xl(Kl(e,"right")),i=Xl(Kl(e,"top"),!0),o=Xl(Kl(e,"bottom")),a=SS(e,"x"),l=SS(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Kl(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function _S(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function CP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function nW(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!Be(r)){n.size&&(t[r]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[r]+=n.size}i.getPadding&&CP(o,i.getPadding());const a=Math.max(0,e.outerWidth-_S(o,t,"left","right")),l=Math.max(0,e.outerHeight-_S(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function sW(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function rW(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function mc(t,e,n,s){const r=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,rW(a.horizontal,e));const{same:d,other:f}=nW(e,n,a,s);c|=d&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&mc(r,e,n,s)||u}function Hd(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function CS(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;Xn(c.start)&&(o=c.start),l.fullSize?Hd(l,r.left,o,n.outerWidth-r.right-r.left,f):Hd(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;Xn(c.start)&&(i=c.start),l.fullSize?Hd(l,i,r.top,f,n.outerHeight-r.bottom-r.top):Hd(l,i,e.top+c.placed,f,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var fs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=pn(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=tW(t.boxes),l=a.vertical,c=a.horizontal;nt(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=l.reduce((x,w)=>w.box.options&&w.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);CP(f,pn(s));const p=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),g=eW(l.concat(c),d);mc(a.fullSize,p,d,g),mc(l,p,d,g),mc(c,p,d,g)&&mc(l,p,d,g),sW(p),CS(a.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,CS(a.rightAndBottom,p,d,g),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},nt(a.chartArea,x=>{const w=x.box;Object.assign(w,t.chartArea),w.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class EP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class iW extends EP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _h="$chartjs",oW={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ES=t=>t===null||t==="";function aW(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[_h]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ES(r)){const i=hS(t,"width");i!==void 0&&(t.width=i)}if(ES(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=hS(t,"height");i!==void 0&&(t.height=i)}return t}const PP=mU?{passive:!0}:!1;function lW(t,e,n){t&&t.addEventListener(e,n,PP)}function cW(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,PP)}function uW(t,e){const n=oW[t.type]||t.type,{x:s,y:r}=Fi(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function If(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function dW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||If(a.addedNodes,s),o=o&&!If(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function hW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||If(a.removedNodes,s),o=o&&!If(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const bu=new Map;let PS=0;function TP(){const t=window.devicePixelRatio;t!==PS&&(PS=t,bu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function fW(t,e){bu.size||window.addEventListener("resize",TP),bu.set(t,e)}function pW(t){bu.delete(t),bu.size||window.removeEventListener("resize",TP)}function gW(t,e,n){const s=t.canvas,r=s&&Ey(s);if(!r)return;const i=dP((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(r),fW(t,i),o}function Sg(t,e,n){n&&n.disconnect(),e==="resize"&&pW(t)}function mW(t,e,n){const s=t.canvas,r=dP(i=>{t.ctx!==null&&n(uW(i,t))},t);return lW(s,e,r),r}class xW extends EP{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(aW(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[_h])return!1;const s=n[_h].initial;["height","width"].forEach(i=>{const o=s[i];pt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[_h],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:dW,detach:hW,resize:gW}[n]||mW;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:Sg,detach:Sg,resize:Sg}[n]||cW)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return gU(e,n,s,r)}isAttached(e){const n=e&&Ey(e);return!!(n&&n.isConnected)}}function bW(t){return!Cy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?iW:xW}class gn{constructor(){re(this,"x");re(this,"y");re(this,"active",!1);re(this,"options");re(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return vo(this.x)&&vo(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}}re(gn,"defaults",{}),re(gn,"defaultRoutes");function yW(t,e){const n=t.options.ticks,s=vW(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?kW(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return SW(e,c,i,o/r),c;const u=wW(i,e,r);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(Vd(e,c,u,pt(p)?0:a-p,a),d=0,f=o-1;d<f;d++)Vd(e,c,u,i[d],i[d+1]);return Vd(e,c,u,l,pt(p)?e.length:l+p),c}return Vd(e,c,u),c}function vW(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function wW(t,e,n){const s=_W(t),r=e.length/n;if(!s)return Math.max(r,1);const i=f$(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function kW(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function SW(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function Vd(t,e,n,s,r){const i=Le(s,0),o=Math.min(Le(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function _W(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const CW=t=>t==="left"?"right":t==="right"?"left":t,TS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,MS=(t,e)=>Math.min(e||t,t);function IS(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function EW(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<i-a||l>o+a)))return l}function PW(t,e){nt(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function Ql(t){return t.drawTicks?t.tickLength:0}function NS(t,e){if(!t.display)return 0;const n=$t(t.font,e),s=pn(t.padding);return(yt(t.text)?t.text.length:1)*n.lineHeight+s.height}function TW(t,e){return Io(t,{scale:e,type:"scale"})}function MW(t,e,n){return Io(t,{tick:n,index:e,type:"tick"})}function IW(t,e,n){let s=yy(t);return(n&&e!=="right"||!n&&e==="right")&&(s=CW(s)),s}function NW(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,p,g;const x=o-r,w=a-i;if(t.isHorizontal()){if(p=dn(s,i,a),Be(n)){const m=Object.keys(n)[0],y=n[m];g=u[m].getPixelForValue(y)+x-e}else n==="center"?g=(c.bottom+c.top)/2+x-e:g=TS(t,n,e);f=a-i}else{if(Be(n)){const m=Object.keys(n)[0],y=n[m];p=u[m].getPixelForValue(y)-w+e}else n==="center"?p=(c.left+c.right)/2-w+e:p=TS(t,n,e);g=dn(s,o,r),d=n==="left"?-en:en}return{titleX:p,titleY:g,maxWidth:f,rotation:d}}class kl extends gn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=Bs(e,Number.POSITIVE_INFINITY),n=Bs(n,Number.NEGATIVE_INFINITY),s=Bs(s,Number.POSITIVE_INFINITY),r=Bs(r,Number.NEGATIVE_INFINITY),{min:Bs(e,s),max:Bs(n,r),minDefined:zn(e),maxDefined:zn(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:Bs(n,Bs(s,n)),max:Bs(s,Bs(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ot(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=G$(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?IS(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=yW(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ot(this.options.afterUpdate,[this])}beforeSetDimensions(){ot(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ot(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ot(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ot(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=ot(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){ot(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ot(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=MS(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=hs(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/s:p/(s-1),d+6>a&&(a=p/(s-(e.offset?.5:1)),l=this.maxHeight-Ql(e.grid)-n.padding-NS(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=lP(Math.min(Math.asin(hs((u.highest.height+6)/a,-1,1)),Math.asin(hs(l/c,-1,1))-Math.asin(hs(f/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ot(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ot(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=NS(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ql(i)+l):(e.height=this.maxHeight,e.width=Ql(i)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),p=s.padding*2,g=Yt(this.labelRotation),x=Math.cos(g),w=Math.sin(g);if(a){const m=s.mirror?0:w*d.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+m+p)}else{const m=s.mirror?0:x*d.width+w*f.height;e.width=Math.min(this.maxWidth,e.width+m+p)}this._calculatePadding(c,u,w,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=r*e.width,p=s*n.height):(f=s*e.height,p=r*n.width):i==="start"?p=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;i==="start"?(u=0,d=e.height):i==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ot(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)pt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=IS(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/MS(n,s));let c=0,u=0,d,f,p,g,x,w,m,y,v,b,S;for(d=0;d<n;d+=l){if(g=e[d].label,x=this._resolveTickFontOptions(d),r.font=w=x.string,m=i[w]=i[w]||{data:{},gc:[]},y=x.lineHeight,v=b=0,!pt(g)&&!yt(g))v=aS(r,m.data,m.gc,v,g),b=y;else if(yt(g))for(f=0,p=g.length;f<p;++f)S=g[f],!pt(S)&&!yt(S)&&(v=aS(r,m.data,m.gc,v,S),b+=y);o.push(v),a.push(b),c=Math.max(v,c),u=Math.max(b,u)}PW(i,n);const _=o.indexOf(c),E=a.indexOf(u),P=M=>({width:o[M]||0,height:a[M]||0});return{first:P(0),last:P(n-1),widest:P(_),highest:P(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return b$(this._alignToPixels?Ai(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=MW(this.getContext(),e,s))}return this.$context||(this.$context=TW(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Yt(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Ql(i),p=[],g=a.setContext(this.getContext()),x=g.display?g.width:0,w=x/2,m=function(z){return Ai(s,z,x)};let y,v,b,S,_,E,P,M,C,N,I,B;if(o==="top")y=m(this.bottom),E=this.bottom-f,M=y-w,N=m(e.top)+w,B=e.bottom;else if(o==="bottom")y=m(this.top),N=e.top,B=m(e.bottom)-w,E=y+w,M=this.top+f;else if(o==="left")y=m(this.right),_=this.right-f,P=y-w,C=m(e.left)+w,I=e.right;else if(o==="right")y=m(this.left),C=e.left,I=m(e.right)-w,_=y+w,P=this.left+f;else if(n==="x"){if(o==="center")y=m((e.top+e.bottom)/2+.5);else if(Be(o)){const z=Object.keys(o)[0],F=o[z];y=m(this.chart.scales[z].getPixelForValue(F))}N=e.top,B=e.bottom,E=y+w,M=E+f}else if(n==="y"){if(o==="center")y=m((e.left+e.right)/2);else if(Be(o)){const z=Object.keys(o)[0],F=o[z];y=m(this.chart.scales[z].getPixelForValue(F))}_=y-w,P=_-f,C=e.left,I=e.right}const W=Le(r.ticks.maxTicksLimit,d),j=Math.max(1,Math.ceil(d/W));for(v=0;v<d;v+=j){const z=this.getContext(v),F=i.setContext(z),A=a.setContext(z),$=F.lineWidth,T=F.color,G=A.dash||[],D=A.dashOffset,R=F.tickWidth,X=F.tickColor,K=F.tickBorderDash||[],Y=F.tickBorderDashOffset;b=EW(this,v,l),b!==void 0&&(S=Ai(s,b,$),c?_=P=C=I=S:E=M=N=B=S,p.push({tx1:_,ty1:E,tx2:P,ty2:M,x1:C,y1:N,x2:I,y2:B,width:$,color:T,borderDash:G,borderDashOffset:D,tickWidth:R,tickColor:X,tickBorderDash:K,tickBorderDashOffset:Y}))}return this._ticksLength=d,this._borderValue=y,p}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=i,f=Ql(s.grid),p=f+u,g=d?-u:p,x=-Yt(this.labelRotation),w=[];let m,y,v,b,S,_,E,P,M,C,N,I,B="middle";if(r==="top")_=this.bottom-g,E=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+g,E=this._getXAxisLabelAlignment();else if(r==="left"){const j=this._getYAxisLabelAlignment(f);E=j.textAlign,S=j.x}else if(r==="right"){const j=this._getYAxisLabelAlignment(f);E=j.textAlign,S=j.x}else if(n==="x"){if(r==="center")_=(e.top+e.bottom)/2+p;else if(Be(r)){const j=Object.keys(r)[0],z=r[j];_=this.chart.scales[j].getPixelForValue(z)+p}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")S=(e.left+e.right)/2-p;else if(Be(r)){const j=Object.keys(r)[0],z=r[j];S=this.chart.scales[j].getPixelForValue(z)}E=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?B="top":l==="end"&&(B="bottom"));const W=this._getLabelSizes();for(m=0,y=a.length;m<y;++m){v=a[m],b=v.label;const j=i.setContext(this.getContext(m));P=this.getPixelForTick(m)+i.labelOffset,M=this._resolveTickFontOptions(m),C=M.lineHeight,N=yt(b)?b.length:1;const z=N/2,F=j.color,A=j.textStrokeColor,$=j.textStrokeWidth;let T=E;o?(S=P,E==="inner"&&(m===y-1?T=this.options.reverse?"left":"right":m===0?T=this.options.reverse?"right":"left":T="center"),r==="top"?c==="near"||x!==0?I=-N*C+C/2:c==="center"?I=-W.highest.height/2-z*C+C:I=-W.highest.height+C/2:c==="near"||x!==0?I=C/2:c==="center"?I=W.highest.height/2-z*C:I=W.highest.height-N*C,d&&(I*=-1),x!==0&&!j.showLabelBackdrop&&(S+=C/2*Math.sin(x))):(_=P,I=(1-N)*C/2);let G;if(j.showLabelBackdrop){const D=pn(j.backdropPadding),R=W.heights[m],X=W.widths[m];let K=I-D.top,Y=0-D.left;switch(B){case"middle":K-=R/2;break;case"bottom":K-=R;break}switch(E){case"center":Y-=X/2;break;case"right":Y-=X;break;case"inner":m===y-1?Y-=X:m>0&&(Y-=X/2);break}G={left:Y,top:K,width:X+D.width,height:R+D.height,color:j.backdropColor}}w.push({label:b,font:M,textOffset:I,options:{rotation:x,color:F,strokeColor:A,strokeWidth:$,textAlign:T,textBaseline:B,translation:[S,_],backdrop:G}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Yt(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+i,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=Ai(e,this.left,o)-o/2,u=Ai(e,this.right,a)+a/2,d=f=l):(d=Ai(e,this.top,o)-o/2,f=Ai(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&I0(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;xu(s,c,0,u,l,a)}r&&N0(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=$t(s.font),o=pn(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Be(n)?(l+=o.bottom,yt(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=NW(this,l,n,a);xu(e,s.text,0,0,i,{color:s.color,maxWidth:d,rotation:f,textAlign:IW(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Le(e.grid&&e.grid.z,-1),r=Le(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==kl.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return $t(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Yd{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;OW(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,AW(e,o,s),this.override&&Et.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in Et[r]&&(delete Et[r][s],this.override&&delete wo[s])}}function AW(t,e,n){const s=pu(Object.create(null),[n?Et.get(n):{},Et.get(e),t.defaults]);Et.set(e,s),t.defaultRoutes&&RW(e,t.defaultRoutes),t.descriptors&&Et.describe(e,t.descriptors)}function RW(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Et.route(i,r,l,a)})}function OW(t){return"id"in t&&"defaults"in t}class DW{constructor(){this.controllers=new Yd(ba,"datasets",!0),this.elements=new Yd(gn,"elements"),this.plugins=new Yd(Object,"plugins"),this.scales=new Yd(kl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):nt(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=my(e);ot(s["before"+r],[],s),n[e](s),ot(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var Hs=new DW;class LW{constructor(){this._init=void 0}notify(e,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(ot(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){pt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=Le(s.options&&s.options.plugins,{}),i=jW(s);return r===!1&&!n?[]:zW(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function jW(t){const e={},n=[],s=Object.keys(Hs.plugins.items);for(let i=0;i<s.length;i++)n.push(Hs.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function FW(t,e){return!e&&t===!1?null:t===!0?{}:t}function zW(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=FW(s[l],r);c!==null&&i.push({plugin:a,options:BW(t.config,{plugin:a,local:n[l]},c,o)})}return i}function BW(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ix(t,e){const n=Et.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function $W(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function UW(t,e){return t===e?"_index_":"_value_"}function AS(t){if(t==="x"||t==="y"||t==="r")return t}function WW(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ox(t,...e){if(AS(t))return t;for(const n of e){const s=n.axis||WW(n.position)||t.length>1&&AS(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function RS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function HW(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return RS(t,"x",n[0])||RS(t,"y",n[0])}return{}}function VW(t,e){const n=wo[t.type]||{scales:{}},s=e.scales||{},r=ix(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Be(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ox(o,a,HW(o,t),Et.scales[a.type]),c=UW(l,r),u=n.scales||{};i[o]=Dc(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||ix(a,e),u=(wo[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=$W(d,l),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),Dc(i[p],[{axis:f},s[p],u[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];Dc(a,[Et.scales[a.type],Et.scale])}),i}function MP(t){const e=t.options||(t.options={});e.plugins=Le(e.plugins,{}),e.scales=VW(t,e)}function IP(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function YW(t){return t=t||{},t.data=IP(t.data),MP(t),t}const OS=new Map,NP=new Set;function Gd(t,e){let n=OS.get(t);return n||(n=e(),OS.set(t,n),NP.add(n)),n}const Jl=(t,e,n)=>{const s=gu(e,n);s!==void 0&&t.add(s)};class GW{constructor(e){this._config=YW(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=IP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),MP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Gd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Gd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Gd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Gd(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>Jl(l,e,d))),u.forEach(d=>Jl(l,r,d)),u.forEach(d=>Jl(l,wo[i]||{},d)),u.forEach(d=>Jl(l,Et,d)),u.forEach(d=>Jl(l,sx,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),NP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,wo[n]||{},Et.datasets[n]||{},{type:n},Et,sx]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=DS(this._resolverCache,e,r);let l=o;if(KW(o,n)){i.$shared=!1,s=jn(s)?s():s;const c=this.createResolver(e,s,a);l=cl(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,s=[""],r){const{resolver:i}=DS(this._resolverCache,e,s);return Be(n)?cl(i,n,void 0,r):i}}function DS(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:ky(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const qW=t=>Be(t)&&Object.getOwnPropertyNames(t).some(e=>jn(t[e]));function KW(t,e){const{isScriptable:n,isIndexable:s}=gP(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(jn(a)||qW(a))||o&&yt(a))return!0}return!1}var XW="4.5.1";const QW=["top","bottom","left","right","chartArea"];function LS(t,e){return t==="top"||t==="bottom"||QW.indexOf(t)===-1&&e==="x"}function jS(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function FS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ot(n&&n.onComplete,[t],e)}function JW(t){const e=t.chart,n=e.options.animation;ot(n&&n.onProgress,[t],e)}function AP(t){return Cy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ch={},zS=t=>{const e=AP(t);return Object.values(Ch).filter(n=>n.canvas===e).pop()};function ZW(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function eH(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var Wr;let ao=(Wr=class{static register(...e){Hs.add(...e),BS()}static unregister(...e){Hs.remove(...e),BS()}constructor(e,n){const s=this.config=new GW(n),r=AP(e),i=zS(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||bW(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=i$(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new LW,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=S$(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Ch[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}lr.listen(this,"complete",FS),lr.listen(this,"progress",JW),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return pt(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Hs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():dS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return lS(this.canvas,this.ctx),this}stop(){return lr.stop(this),this}resize(e,n){lr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,dS(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ot(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};nt(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=ox(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),nt(i,o=>{const a=o.options,l=a.id,c=ox(l,a),u=Le(a.type,o.dtype);(a.position===void 0||LS(a.position,c)!==LS(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in s&&s[l].type===u)d=s[l];else{const f=Hs.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,e)}),nt(r,(o,a)=>{o||delete s[a]}),nt(s,o=>{fs.configure(this,o,o.options),fs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(jS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||ix(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Hs.getController(a),{datasetElementType:c,dataElementType:u}=Et.datasets[a];Object.assign(l,{dataElementType:Hs.getElement(u),datasetElementType:c&&Hs.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){nt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&i.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||nt(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(jS("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){nt(this.scales,e=>{fs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!Zk(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;ZW(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!Zk(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fs.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],nt(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,jn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(lr.has(this)?this.attached&&!lr.running(this)&&lr.start(this):(this.draw(),FS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=IU(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&I0(n,r),e.controller.draw(),r&&N0(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return mu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=QU.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Io(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Xn(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),lr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),lS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ch[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};nt(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){nt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},nt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Sf(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=d$(e),c=eH(e,this._lastEvent,s,l);s&&(this._lastEvent=null,ot(i.onHover,[e,a,this],this),l&&ot(i.onClick,[e,a,this],this));const u=!Sf(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},re(Wr,"defaults",Et),re(Wr,"instances",Ch),re(Wr,"overrides",wo),re(Wr,"registry",Hs),re(Wr,"version",XW),re(Wr,"getChart",zS),Wr);function BS(){return nt(ao.instances,t=>t._plugins.invalidate())}function RP(t,e,n=e){t.lineCap=Le(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Le(n.borderDash,e.borderDash)),t.lineDashOffset=Le(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Le(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Le(n.borderWidth,e.borderWidth),t.strokeStyle=Le(n.borderColor,e.borderColor)}function tH(t,e,n){t.lineTo(n.x,n.y)}function nH(t){return t.stepped?j$:t.tension||t.cubicInterpolationMode==="monotone"?F$:tH}function OP(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(i,a),u=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function sH(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:c}=OP(r,n,s),u=nH(i);let{move:d=!0,reverse:f}=s||{},p,g,x;for(p=0;p<=c;++p)g=r[(a+(f?c-p:p))%o],!g.skip&&(d?(t.moveTo(g.x,g.y),d=!1):u(t,x,g,f,i.stepped),x=g);return l&&(g=r[(a+(f?c:0))%o],u(t,x,g,f,i.stepped)),!!l}function rH(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=OP(r,n,s),{move:l=!0,reverse:c}=s||{};let u=0,d=0,f,p,g,x,w,m;const y=b=>(o+(c?a-b:b))%i,v=()=>{x!==w&&(t.lineTo(u,w),t.lineTo(u,x),t.lineTo(u,m))};for(l&&(p=r[y(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=r[y(f)],p.skip)continue;const b=p.x,S=p.y,_=b|0;_===g?(S<x?x=S:S>w&&(w=S),u=(d*u+b)/++d):(v(),t.lineTo(b,S),g=_,d=0,x=w=S),m=S}v()}function ax(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?rH:sH}function iH(t){return t.stepped?xU:t.tension||t.cubicInterpolationMode==="monotone"?bU:zi}function oH(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),RP(t,e.options),t.stroke(r)}function aH(t,e,n,s){const{segments:r,options:i}=e,o=ax(e);for(const a of r)RP(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const lH=typeof Path2D=="function";function cH(t,e,n,s){lH&&!e.options.segment?oH(t,e,n,s):aH(t,e,n,s)}class xc extends gn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;cU(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=EU(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=SU(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=iH(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],p=i[d],g=i[f];if(p===g){a.push(p);continue}const x=Math.abs((r-p[n])/(g[n]-p[n])),w=l(p,g,x,s.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,s){return ax(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=ax(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),cH(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}re(xc,"id","line"),re(xc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),re(xc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),re(xc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function $S(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class Eh extends gn{constructor(n){super();re(this,"parsed");re(this,"skip");re(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return $S(this,n,"x",s)}inYRange(n,s){return $S(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!mu(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,rx(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}re(Eh,"id","point"),re(Eh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),re(Eh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const US=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},uH=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class WS extends gn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ot(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=$t(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=US(s,i);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let d=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((g,x)=>{const w=s+n/2+i.measureText(g.text).width;(x===0||c[c.length-1]+w+2*a>o)&&(d+=u,c[c.length-(x>0?0:1)]=0,p+=u,f++),l[x]={left:0,top:p,row:f,width:w,height:r},c[c.length-1]+=w+a}),d}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,p=0,g=0,x=0;return this.legendItems.forEach((w,m)=>{const{itemWidth:y,itemHeight:v}=dH(s,n,i,w,r);m>0&&p+v+2*a>u&&(d+=f+a,c.push({width:f,height:p}),g+=f+a,x++,f=p=0),l[m]={left:g,top:p,col:x,width:y,height:v},f=Math.max(f,y),p+=v+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=xa(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=dn(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=dn(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=dn(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=dn(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;I0(e,this),this._draw(),N0(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=Et.color,l=xa(e.rtl,this.left,this.width),c=$t(o.font),{padding:u}=o,d=c.size,f=d/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:g,boxHeight:x,itemHeight:w}=US(o,d),m=function(_,E,P){if(isNaN(g)||g<=0||isNaN(x)||x<0)return;r.save();const M=Le(P.lineWidth,1);if(r.fillStyle=Le(P.fillStyle,a),r.lineCap=Le(P.lineCap,"butt"),r.lineDashOffset=Le(P.lineDashOffset,0),r.lineJoin=Le(P.lineJoin,"miter"),r.lineWidth=M,r.strokeStyle=Le(P.strokeStyle,a),r.setLineDash(Le(P.lineDash,[])),o.usePointStyle){const C={radius:x*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:M},N=l.xPlus(_,g/2),I=E+f;fP(r,C,N,I,o.pointStyleWidth&&g)}else{const C=E+Math.max((d-x)/2,0),N=l.leftForLtr(_,g),I=ma(P.borderRadius);r.beginPath(),Object.values(I).some(B=>B!==0)?Tf(r,{x:N,y:C,w:g,h:x,radius:I}):r.rect(N,C,g,x),r.fill(),M!==0&&r.stroke()}r.restore()},y=function(_,E,P){xu(r,P.text,_,E+w/2,c,{strikethrough:P.hidden,textAlign:l.textAlign(P.textAlign)})},v=this.isHorizontal(),b=this._computeTitleHeight();v?p={x:dn(i,this.left+u,this.right-s[0]),y:this.top+u+b,line:0}:p={x:this.left+u,y:dn(i,this.top+b+u,this.bottom-n[0].height),line:0},vP(this.ctx,e.textDirection);const S=w+u;this.legendItems.forEach((_,E)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const P=r.measureText(_.text).width,M=l.textAlign(_.textAlign||(_.textAlign=o.textAlign)),C=g+f+P;let N=p.x,I=p.y;l.setWidth(this.width),v?E>0&&N+C+u>this.right&&(I=p.y+=S,p.line++,N=p.x=dn(i,this.left+u,this.right-s[p.line])):E>0&&I+S>this.bottom&&(N=p.x=N+n[p.line].width+u,p.line++,I=p.y=dn(i,this.top+b+u,this.bottom-n[p.line].height));const B=l.x(N);if(m(B,I,_),N=_$(M,N+g+f,v?N+C:this.right,e.rtl),y(l.x(N),I,_),v)p.x+=C+u;else if(typeof _.text!="string"){const W=c.lineHeight;p.y+=DP(_,W)+u}else p.y+=S}),wP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=$t(n.font),r=pn(n.padding);if(!n.display)return;const i=xa(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=dn(e.align,d,this.right-f);else{const g=this.columnSizes.reduce((x,w)=>Math.max(x,w.height),0);u=c+dn(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const p=dn(a,d,d+f);o.textAlign=i.textAlign(yy(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,xu(o,n.text,p,u,s)}_computeTitleHeight(){const e=this.options.title,n=$t(e.font),s=pn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(pc(e,this.left,this.right)&&pc(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],pc(e,r.left,r.left+r.width)&&pc(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!pH(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=uH(r,s);r&&!i&&ot(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&ot(n.onHover,[e,s,this],this)}else s&&ot(n.onClick,[e,s,this],this)}}function dH(t,e,n,s,r){const i=hH(s,t,e,n),o=fH(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function hH(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function fH(t,e,n){let s=t;return typeof e.text!="string"&&(s=DP(e,n)),s}function DP(t,e){const n=t.text?t.text.length:0;return e*n}function pH(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var gH={id:"legend",_element:WS,start(t,e,n){const s=t.legend=new WS({ctx:t.ctx,options:n,chart:t});fs.configure(t,s,n),fs.addBox(t,s)},stop(t){fs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;fs.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=pn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class LP extends gn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=yt(s.text)?s.text.length:1;this._padding=pn(s.padding);const i=r*$t(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=dn(a,s,i),d=n+e,c=i-s):(o.position==="left"?(u=s+e,d=dn(a,r,n),l=et*-.5):(u=i-e,d=dn(a,n,r),l=et*.5),c=r-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=$t(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);xu(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:yy(n.align),textBaseline:"middle",translation:[o,a]})}}function mH(t,e){const n=new LP({ctx:t.ctx,options:e,chart:t});fs.configure(t,n,e),fs.addBox(t,n),t.titleBlock=n}var xH={id:"title",_element:LP,start(t,e,n){mH(t,n)},stop(t){const e=t.titleBlock;fs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;fs.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bc={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=ll(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Us(t,e){return e&&(yt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function cr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function bH(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function HS(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=$t(e.bodyFont),c=$t(e.titleFont),u=$t(e.footerFont),d=i.length,f=r.length,p=s.length,g=pn(e.padding);let x=g.height,w=0,m=s.reduce((b,S)=>b+S.before.length+S.lines.length+S.after.length,0);if(m+=t.beforeBody.length+t.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),m){const b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=p*b+(m-p)*l.lineHeight+(m-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let y=0;const v=function(b){w=Math.max(w,n.measureText(b).width+y)};return n.save(),n.font=c.string,nt(t.title,v),n.font=l.string,nt(t.beforeBody.concat(t.afterBody),v),y=e.displayColors?o+2+e.boxPadding:0,nt(s,b=>{nt(b.before,v),nt(b.lines,v),nt(b.after,v)}),y=0,n.font=u.string,nt(t.footer,v),n.restore(),w+=g.width,{width:w,height:x}}function yH(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function vH(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function wH(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),vH(c,t,e,n)&&(c="center"),c}function VS(t,e,n){const s=n.yAlign||e.yAlign||yH(t,n);return{xAlign:n.xAlign||e.xAlign||wH(t,e,n,s),yAlign:s}}function kH(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function SH(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function YS(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=ma(o);let g=kH(e,a);const x=SH(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,f)+r:a==="right"&&(g+=Math.max(d,p)+r),{x:hs(g,0,s.width-e.width),y:hs(x,0,s.height-e.height)}}function qd(t,e,n){const s=pn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function GS(t){return Us([],cr(t))}function _H(t,e,n){return Io(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function qS(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const jP={beforeTitle:ar,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:ar,beforeBody:ar,beforeLabel:ar,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return pt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ar,afterBody:ar,beforeFooter:ar,footer:ar,afterFooter:ar};function En(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?jP[e].call(n,s):r}class lx extends gn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new Py(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=_H(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=En(s,"beforeTitle",this,e),i=En(s,"title",this,e),o=En(s,"afterTitle",this,e);let a=[];return a=Us(a,cr(r)),a=Us(a,cr(i)),a=Us(a,cr(o)),a}getBeforeBody(e,n){return GS(En(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return nt(e,i=>{const o={before:[],lines:[],after:[]},a=qS(s,i);Us(o.before,cr(En(a,"beforeLabel",this,i))),Us(o.lines,En(a,"label",this,i)),Us(o.after,cr(En(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return GS(En(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=En(s,"beforeFooter",this,e),i=En(s,"footer",this,e),o=En(s,"afterFooter",this,e);let a=[];return a=Us(a,cr(r)),a=Us(a,cr(i)),a=Us(a,cr(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(bH(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,s))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,s))),nt(a,u=>{const d=qS(e.callbacks,u);r.push(En(d,"labelColor",this,u)),i.push(En(d,"labelPointStyle",this,u)),o.push(En(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=bc[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=HS(this,s),c=Object.assign({},a,l),u=VS(this.chart,s,c),d=YS(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=ma(a),{x:f,y:p}=e,{width:g,height:x}=n;let w,m,y,v,b,S;return i==="center"?(b=p+x/2,r==="left"?(w=f,m=w-o,v=b+o,S=b-o):(w=f+g,m=w+o,v=b-o,S=b+o),y=w):(r==="left"?m=f+Math.max(l,u)+o:r==="right"?m=f+g-Math.max(c,d)-o:m=this.caretX,i==="top"?(v=p,b=v-o,w=m-o,y=m+o):(v=p+x,b=v+o,w=m+o,y=m-o),S=v),{x1:w,x2:m,x3:y,y1:v,y2:b,y3:S}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=xa(s.rtl,this.x,this.width);for(e.x=qd(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=$t(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,u=$t(i.bodyFont),d=qd(this,"left",i),f=r.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+p;if(i.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(f,c)+c/2,m=g+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,rx(e,x,w,m),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,rx(e,x,w,m)}else{e.lineWidth=Be(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(f,c),w=r.leftForLtr(r.xPlus(f,1),c-2),m=ma(o.borderRadius);Object.values(m).some(y=>y!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Tf(e,{x,y:g,w:c,h:l,radius:m}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Tf(e,{x:w,y:g+1,w:c-2,h:l-2,radius:m}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(x,g,c,l),e.strokeRect(x,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,d=$t(s.bodyFont);let f=d.lineHeight,p=0;const g=xa(s.rtl,this.x,this.width),x=function(P){n.fillText(P,g.x(e.x+p),e.y+f/2),e.y+=f+i},w=g.textAlign(o);let m,y,v,b,S,_,E;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=qd(this,w,s),n.fillStyle=s.bodyColor,nt(this.beforeBody,x),p=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,b=0,_=r.length;b<_;++b){for(m=r[b],y=this.labelTextColors[b],n.fillStyle=y,nt(m.before,x),v=m.lines,a&&v.length&&(this._drawColorBox(n,e,b,g,s),f=Math.max(d.lineHeight,l)),S=0,E=v.length;S<E;++S)x(v[S]),f=d.lineHeight;nt(m.after,x)}p=0,f=d.lineHeight,nt(this.afterBody,x),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=xa(s.rtl,this.x,this.width);for(e.x=qd(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=$t(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:g}=ma(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=bc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=HS(this,e),l=Object.assign({},o,this._size),c=VS(n,e,l),u=YS(e,l,c,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=pn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),vP(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),wP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Sf(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!Sf(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=bc[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}re(lx,"positioners",bc);var CH={id:"tooltip",_element:lx,positioners:bc,afterInit(t,e,n){n&&(t.tooltip=new lx({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const EH=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function PH(t,e,n,s){const r=t.indexOf(e);if(r===-1)return EH(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const TH=(t,e)=>t===null?null:hs(Math.round(t),0,e);function KS(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class cx extends kl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(pt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:PH(s,e,Le(n,e),this._addedLabels),TH(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return KS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}re(cx,"id","category"),re(cx,"defaults",{ticks:{callback:KS}});function MH(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,p=i||1,g=u-1,{min:x,max:w}=e,m=!pt(o),y=!pt(a),v=!pt(c),b=(w-x)/(d+1);let S=eS((w-x)/g/p)*p,_,E,P,M;if(S<1e-14&&!m&&!y)return[{value:x},{value:w}];M=Math.ceil(w/S)-Math.floor(x/S),M>g&&(S=eS(M*S/g/p)*p),pt(l)||(_=Math.pow(10,l),S=Math.ceil(S*_)/_),r==="ticks"?(E=Math.floor(x/S)*S,P=Math.ceil(w/S)*S):(E=x,P=w),m&&y&&i&&g$((a-o)/i,S/1e3)?(M=Math.round(Math.min((a-o)/S,u)),S=(a-o)/M,E=o,P=a):v?(E=m?o:E,P=y?a:P,M=c-1,S=(P-E)/M):(M=(P-E)/S,Lc(M,Math.round(M),S/1e3)?M=Math.round(M):M=Math.ceil(M));const C=Math.max(tS(S),tS(E));_=Math.pow(10,pt(l)?C:l),E=Math.round(E*_)/_,P=Math.round(P*_)/_;let N=0;for(m&&(f&&E!==o?(n.push({value:o}),E<o&&N++,Lc(Math.round((E+N*S)*_)/_,o,XS(o,b,t))&&N++):E<o&&N++);N<M;++N){const I=Math.round((E+N*S)*_)/_;if(y&&I>a)break;n.push({value:I})}return y&&f&&P!==a?n.length&&Lc(n[n.length-1].value,a,XS(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!y||P===a)&&n.push({value:P}),n}function XS(t,e,{horizontal:n,minRotation:s}){const r=Yt(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class IH extends kl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return pt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=al(r),c=al(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=MH(r,i);return e.bounds==="ticks"&&m$(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return wy(e,this.chart.options.locale,this.options.ticks.format)}}class ux extends IH{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=zn(e)?e:0,this.max=zn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Yt(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}re(ux,"id","linear"),re(ux,"defaults",{ticks:{callback:hP.formatters.numeric}});const O0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Nn=Object.keys(O0);function QS(t,e){return t-e}function JS(t,e){if(pt(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),zn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(vo(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function ZS(t,e,n,s){const r=Nn.length;for(let i=Nn.indexOf(t);i<r-1;++i){const o=O0[Nn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return Nn[i]}return Nn[r-1]}function NH(t,e,n,s,r){for(let i=Nn.length-1;i>=Nn.indexOf(n);i--){const o=Nn[i];if(O0[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return Nn[n?Nn.indexOf(n):0]}function AH(t){for(let e=Nn.indexOf(t)+1,n=Nn.length;e<n;++e)if(O0[Nn[e]].common)return Nn[e]}function e2(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=by(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function RH(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function t2(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:RH(t,s,r,n)}class Nf extends kl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new YU._date(e.adapters.date);r.init(n),Dc(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:JS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=zn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=zn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=v$(r,i,o);return this._unit=n.unit||(s.autoSkip?ZS(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):NH(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:AH(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),t2(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=hs(n,0,o),s=hs(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||ZS(i.minUnit,n,s,this._getLabelCapacity(n)),a=Le(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=vo(l)||l===!0,u={};let d=n,f,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<s;f=+e.add(f,a,o),p++)e2(u,f,g);return(f===s||r.bounds==="ticks"||p===1)&&e2(u,f,g),Object.keys(u).sort(QS).map(x=>+x)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return ot(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=s[n],p=c&&d&&f&&f.major;return this._adapter.format(e,r||(p?d:u))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Yt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,t2(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(JS(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return k$(e.sort(QS))}}re(Nf,"id","time"),re(Nf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Kd(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=Ki(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=Ki(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class n2 extends Nf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Kd(n,this.min),this._tableRange=Kd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Kd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Kd(this._table,s*this._tableRange+this._minPos,!0)}}re(n2,"id","timeseries"),re(n2,"defaults",Nf.defaults);const FP="label";function s2(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function OH(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function zP(t,e){t.labels=e}function BP(t,e,n=FP){const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function DH(t,e=FP){const n={labels:[],datasets:[]};return zP(n,t.labels),BP(n,t.datasets,e),n}function LH(t,e){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...f}=t,p=k.useRef(null),g=k.useRef(null),x=()=>{p.current&&(g.current=new ao(p.current,{type:o,data:DH(a,i),options:l&&{...l},plugins:c}),s2(e,g.current))},w=()=>{s2(e,null),g.current&&(g.current.destroy(),g.current=null)};return k.useEffect(()=>{!r&&g.current&&l&&OH(g.current,l)},[r,l]),k.useEffect(()=>{!r&&g.current&&zP(g.current.config.data,a.labels)},[r,a.labels]),k.useEffect(()=>{!r&&g.current&&a.datasets&&BP(g.current.config.data,a.datasets,i)},[r,a.datasets]),k.useEffect(()=>{g.current&&(r?(w(),setTimeout(x)):g.current.update(d))},[r,l,a.labels,a.datasets,d]),k.useEffect(()=>{g.current&&(w(),setTimeout(x))},[o]),k.useEffect(()=>(x(),()=>w()),[]),h.jsx("canvas",{ref:p,role:"img",height:n,width:s,...f,children:u})}const jH=k.forwardRef(LH);function FH(t,e){return ao.register(e),k.forwardRef((n,s)=>h.jsx(jH,{...n,ref:s,type:t}))}const zH=FH("scatter",Sh);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const r2={modes:{point(t,e){return Ph(t,e,{intersect:!0})},nearest(t,e,n){return UH(t,e,n)},x(t,e,n){return Ph(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return Ph(t,e,{intersect:n.intersect,axis:"y"})}}};function My(t,e,n){return(r2.modes[n.mode]||r2.modes.nearest)(t,e,n)}function BH(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function $H(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function Ph(t,e,n){return t.filter(s=>n.intersect?s.inRange(e.x,e.y):BH(s,e,n.axis))}function UH(t,e,n){let s=Number.POSITIVE_INFINITY;return Ph(t,e,n).reduce((r,i)=>{const o=i.getCenterPoint(),a=$H(e,o,n.axis),l=ll(e,a);return l<s?(r=[i],s=l):l===s&&r.push(i),r},[]).sort((r,i)=>r._index-i._index).slice(0,1)}function No(t,e,n){const s=Math.cos(n),r=Math.sin(n),i=e.x,o=e.y;return{x:i+s*(t.x-i)-r*(t.y-o),y:o+r*(t.x-i)+s*(t.y-o)}}const WH=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Xi=.001,D0=(t,e,n)=>Math.min(n,Math.max(e,t)),$P=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function HH(t,e,n){for(const s of Object.keys(t))t[s]=D0(t[s],e,n);return t}function VH(t,e,n,s){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function UP(t,{x:e,y:n,x2:s,y2:r},i,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=t.x>=e-l-Xi&&t.x<=s+l+Xi,u=t.y>=n-l-Xi&&t.y<=r+l+Xi;return i==="x"?c:(i==="y"||c)&&u}function WP(t,{rect:e,center:n},s,{rotation:r,borderWidth:i,hitTolerance:o}){const a=No(t,n,Yt(-r));return UP(a,e,s,{borderWidth:i,hitTolerance:o})}function Ao(t,e){const{centerX:n,centerY:s}=t.getProps(["centerX","centerY"],e);return{x:n,y:s}}function YH(t,e,n,s=!0){const r=n.split(".");let i=0;for(const o of e.split(".")){const a=r[i++];if(parseInt(o,10)<parseInt(a,10))break;if(WH(a,o)){if(s)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const HP=t=>typeof t=="string"&&t.endsWith("%"),VP=t=>parseFloat(t)/100,YP=t=>D0(VP(t),0,1),Zl=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),GH={box:t=>Zl(t.centerX,t.centerY),doughnutLabel:t=>Zl(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>Zl(t.centerX,t.centerY),line:t=>Zl(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>Zl(t.centerX,t.centerY)};function Iy(t,e){return e==="start"?0:e==="end"?t:HP(e)?YP(e)*t:t/2}function ki(t,e,n=!0){return typeof e=="number"?e:HP(e)?(n?YP(e):VP(e))*t:t}function qH(t,e){const{x:n,width:s}=t,r=e.textAlign;return r==="center"?n+s/2:r==="end"||r==="right"?n+s:n}function GP(t,e,{borderWidth:n,position:s,xAdjust:r,yAdjust:i},o){const a=Be(o),l=e.width+(a?o.width:0)+n,c=e.height+(a?o.height:0)+n,u=Ny(s),d=i2(t.x,l,r,u.x),f=i2(t.y,c,i,u.y);return{x:d,y:f,x2:d+l,y2:f+c,width:l,height:c,centerX:d+l/2,centerY:f+c/2}}function Ny(t,e="center"){return Be(t)?{x:Le(t.x,e),y:Le(t.y,e)}:(t=Le(t,e),{x:t,y:t})}const qP=(t,e)=>t&&t.autoFit&&e<1;function KP(t,e){const n=t.font,s=yt(n)?n:[n];return qP(t,e)?s.map(function(r){const i=$t(r);return i.size=Math.floor(r.size*e),i.lineHeight=r.lineHeight,$t(i)}):s.map(r=>$t(r))}function XP(t){return t&&(Xn(t.xValue)||Xn(t.yValue))}function i2(t,e,n=0,s){return t-Iy(e,s)+n}function Sl(t,e,n){const s=n.init;if(s){if(s===!0)return JP(e,n)}else return;return KH(t,e,n)}function QP(t,e,n){let s=!1;return e.forEach(r=>{jn(t[r])?(s=!0,n[r]=t[r]):Xn(n[r])&&delete n[r]}),s}function JP(t,e){const n=e.type||"line";return GH[n](t)}function KH(t,e,n){const s=ot(n.init,[{chart:t,properties:e,options:n}]);if(s===!0)return JP(e,n);if(Be(s))return s}const _g=new Map,XH=t=>isNaN(t)||t<=0,QH=t=>t.reduce(function(e,n){return e+=n.string,e},"");function L0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function j0(t,{x:e,y:n},s){s&&(t.translate(e,n),t.rotate(Yt(s)),t.translate(-e,-n))}function Nr(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function _l(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function F0(t,e){const n=e.content;if(L0(n))return{width:ki(n.width,e.width),height:ki(n.height,e.height)};const s=KP(e),r=e.textStrokeWidth,i=yt(n)?n:[n],o=i.join()+QH(s)+r+(t._measureText?"-spriting":"");return _g.has(o)||_g.set(o,tV(t,i,s,r)),_g.get(o)}function ZP(t,e,n){const{x:s,y:r,width:i,height:o}=e;t.save(),_l(t,n);const a=Nr(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),Tf(t,{x:s,y:r,w:i,h:o,radius:HH(ma(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function e4(t,e,n,s){const r=n.content;if(L0(r)){t.save(),t.globalAlpha=rV(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const i=yt(r)?r:[r],o=KP(n,s),a=n.color,l=yt(a)?a:[a],c=qH(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,JH(t,n)&&nV(t,{x:c,y:u},i,o),sV(t,{x:c,y:u},i,{fonts:o,colors:l}),t.restore()}function JH(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function ZH(t,e,n,s){const{radius:r,options:i}=e,o=i.pointStyle,a=i.rotation;let l=(a||0)*xy;if(L0(o)){t.save(),t.translate(n,s),t.rotate(l),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}XH(r)||eV(t,{x:n,y:s,radius:r,rotation:a,style:o,rad:l})}function eV(t,{x:e,y:n,radius:s,rotation:r,style:i,rad:o}){let a,l,c,u;switch(t.beginPath(),i){default:t.arc(e,n,s,0,Zt),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=Ef,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=Ef,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),t.closePath();break;case"rectRounded":u=s*.516,c=s-u,a=Math.cos(o+ls)*c,l=Math.sin(o+ls)*c,t.arc(e-a,n-l,u,o-et,o-en),t.arc(e+l,n-a,u,o-en,o),t.arc(e+a,n+l,u,o,o+en),t.arc(e-l,n+a,u,o+en,o+et),t.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*s,t.rect(e-c,n-c,2*c,2*c);break}o+=ls;case"rectRot":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+l,n-a),t.lineTo(e+a,n+l),t.lineTo(e-l,n+a),t.closePath();break;case"crossRot":o+=ls;case"cross":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"star":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a),o+=ls,a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"line":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*s,n+Math.sin(o)*s);break}t.fill()}function tV(t,e,n,s){t.save();const r=e.length;let i=0,o=s;for(let a=0;a<r;a++){const l=n[Math.min(a,n.length-1)];t.font=l.string;const c=e[a];i=Math.max(i,t.measureText(c).width+s),o+=l.lineHeight}return t.restore(),{width:i,height:o}}function nV(t,{x:e,y:n},s,r){t.beginPath();let i=0;s.forEach(function(o,a){const l=r[Math.min(a,r.length-1)],c=l.lineHeight;t.font=l.string,t.strokeText(o,e,n+c/2+i),i+=c}),t.stroke()}function sV(t,{x:e,y:n},s,{fonts:r,colors:i}){let o=0;s.forEach(function(a,l){const c=i[Math.min(l,i.length-1)],u=r[Math.min(l,r.length-1)],d=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=c,t.fillText(a,e,n+d/2+o),o+=d,t.fill()})}function rV(t,e){const n=vo(t)?t:e;return vo(n)?D0(n,0,1):1}const t4=["left","bottom","top","right"];function iV(t,e){const{pointX:n,pointY:s,options:r}=e,i=r.callout,o=i&&i.display&&uV(e,i);if(!o||hV(e,i,o))return;if(t.save(),t.beginPath(),!Nr(t,i))return t.restore();const{separatorStart:l,separatorEnd:c}=oV(e,o),{sideStart:u,sideEnd:d}=lV(e,o,l);(i.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(d.x,d.y);const f=No({x:n,y:s},e.getCenterPoint(),Yt(-e.rotation));t.lineTo(f.x,f.y),t.stroke(),t.restore()}function oV(t,e){const{x:n,y:s,x2:r,y2:i}=t,o=aV(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:s},l={x:a.x,y:i}):(a={x:n,y:s+o},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function aV(t,e){const{width:n,height:s,options:r}=t,i=r.callout.margin+r.borderWidth/2;return e==="right"?n+i:e==="bottom"?s+i:-i}function lV(t,e,n){const{y:s,width:r,height:i,options:o}=t,a=o.callout.start,l=cV(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:s+ki(i,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+ki(r,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function cV(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function uV(t,e){const n=e.position;return t4.includes(n)?n:dV(t,e)}function dV(t,e){const{x:n,y:s,x2:r,y2:i,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:f}=t,p={x:u,y:d},g=e.start,x=ki(o,g),w=ki(a,g),m=[n,n+x,n+x,r],y=[s+w,i,s,i],v=[];for(let b=0;b<4;b++){const S=No({x:m[b],y:y[b]},p,Yt(f));v.push({position:t4[b],distance:ll(S,{x:l,y:c})})}return v.sort((b,S)=>b.distance-S.distance)[0].position}function hV(t,e,n){const{pointX:s,pointY:r}=t,i=e.margin;let o=s,a=r;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?a+=i:n==="bottom"&&(a-=i),t.inRange(o,a)}const o2={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function dl(t,e,n){return e=typeof e=="number"?e:t.parse(e),zn(e)?t.getPixelForValue(e):n}function ko(t,e,n){const s=e[n];if(s||n==="scaleID")return s;const r=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===r);return i.length?i[0].id:r}function n4(t,e){if(t){const n=t.options.reverse,s=dl(t,e.min,n?e.end:e.start),r=dl(t,e.max,n?e.start:e.end);return{start:s,end:r}}}function s4(t,e){const{chartArea:n,scales:s}=t,r=s[ko(s,e,"xScaleID")],i=s[ko(s,e,"yScaleID")];let o=n.width/2,a=n.height/2;return r&&(o=dl(r,e.xValue,r.left+r.width/2)),i&&(a=dl(i,e.yValue,i.top+i.height/2)),{x:o,y:a}}function Ay(t,e){const n=t.scales,s=n[ko(n,e,"xScaleID")],r=n[ko(n,e,"yScaleID")];if(!s&&!r)return{};let{left:i,right:o}=s||t.chartArea,{top:a,bottom:l}=r||t.chartArea;const c=a2(s,{min:e.xMin,max:e.xMax,start:i,end:o});i=c.start,o=c.end;const u=a2(r,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:i,y:a,x2:o,y2:l,width:o-i,height:l-a,centerX:i+(o-i)/2,centerY:a+(l-a)/2}}function r4(t,e){if(!XP(e)){const n=Ay(t,e);let s=e.radius;(!s||isNaN(s))&&(s=Math.min(n.width,n.height)/2,e.radius=s);const r=s*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-s,y:o-s,x2:i+s,y2:o+s,centerX:i,centerY:o,width:r,height:r,radius:s}}return pV(t,e)}function fV(t,e){const{scales:n,chartArea:s}=t,r=n[e.scaleID],i={x:s.left,y:s.top,x2:s.right,y2:s.bottom};return r?gV(r,i,e):mV(n,i,e),i}function i4(t,e){const n=Ay(t,e);return n.initProperties=Sl(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:yV(t,n,e),initProperties:n.initProperties}],n}function pV(t,e){const n=s4(t,e),s=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:s,height:s}}function a2(t,e){const n=n4(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function gV(t,e,n){const s=dl(t,n.value,NaN),r=dl(t,n.endValue,s);t.isHorizontal()?(e.x=s,e.x2=r):(e.y=s,e.y2=r)}function mV(t,e,n){for(const s of Object.keys(o2)){const r=t[ko(t,n,s)];if(r){const{min:i,max:o,start:a,end:l,startProp:c,endProp:u}=o2[s],d=n4(r,{min:n[i],max:n[o],start:r[a],end:r[l]});e[c]=d.start,e[u]=d.end}}}function xV({properties:t,options:e},n,s,r){const{x:i,x2:o,width:a}=t;return o4({start:i,end:o,borderWidth:e.borderWidth},{position:s.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function bV({properties:t,options:e},n,s,r){const{y:i,y2:o,height:a}=t;return o4({start:i,end:o,borderWidth:e.borderWidth},{position:s.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function o4(t,e){const{start:n,end:s,borderWidth:r}=t,{position:i,padding:{start:o,end:a},adjust:l}=e,c=s-r-n-o-a-e.size;return n+r/2+l+Iy(c,i)}function yV(t,e,n){const s=n.label;s.backgroundColor="transparent",s.callout.display=!1;const r=Ny(s.position),i=pn(s.padding),o=F0(t.ctx,s),a=xV({properties:e,options:n},o,r,i),l=bV({properties:e,options:n},o,r,i),c=o.width+i.width,u=o.height+i.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:s.rotation}}const dx=["enter","leave"],Ry=dx.concat("click");function vV(t,e,n){e.listened=QP(n,Ry,e.listeners),e.moveListened=!1,dx.forEach(s=>{jn(n[s])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(s=>{!e.listened&&jn(s.click)&&(e.listened=!0),e.moveListened||dx.forEach(r=>{jn(s[r])&&(e.listened=!0,e.moveListened=!0)})})}function wV(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return kV(t,e,n);case"click":return SV(t,e,n)}}function kV(t,e,n){if(!t.moveListened)return;let s;e.type==="mousemove"?s=My(t.visibleElements,e,n.interaction):s=[];const r=t.hovered;t.hovered=s;const i={state:t,event:e};let o=l2(i,"leave",r,s);return l2(i,"enter",s,r)||o}function l2({state:t,event:e},n,s,r){let i;for(const o of s)r.indexOf(o)<0&&(i=a4(o.options[n]||t.listeners[n],o,e)||i);return i}function SV(t,e,n){const s=t.listeners,r=My(t.visibleElements,e,n.interaction);let i;for(const o of r)i=a4(o.options.click||s.click,o,e)||i;return i}function a4(t,e,n){return ot(t,[e.$context,n])===!0}const Af=["afterDraw","beforeDraw"];function _V(t,e,n){const s=e.visibleElements;e.hooked=QP(n,Af,e.hooks),e.hooked||s.forEach(r=>{e.hooked||Af.forEach(i=>{jn(r.options[i])&&(e.hooked=!0)})})}function c2(t,e,n){if(t.hooked){const s=e.options[n]||t.hooks[n];return ot(s,[e.$context])}}function CV(t,e,n){const s=IV(t.scales,e,n);let r=u2(e,s,"min","suggestedMin");r=u2(e,s,"max","suggestedMax")||r,r&&jn(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function EV(t,e){for(const n of t)TV(n,e)}function u2(t,e,n,s){if(zn(e[n])&&!PV(t.options,n,s)){const r=t[n]!==e[n];return t[n]=e[n],r}}function PV(t,e,n){return Xn(t[e])||Xn(t[n])}function TV(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const s=ko(e,t,n);s&&!e[s]&&MV(t,n)&&console.warn(`No scale found with id '${s}' for annotation '${t.id}'`)}}function MV(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const s of["Min","Max","Value"])if(Xn(t[n+s]))return!0;return!1}function IV(t,e,n){const s=e.axis,r=e.id,i=s+"ScaleID",o={min:Le(e.min,Number.NEGATIVE_INFINITY),max:Le(e.max,Number.POSITIVE_INFINITY)};for(const a of n)a.scaleID===r?d2(a,e,["value","endValue"],o):ko(t,a,i)===r&&d2(a,e,[s+"Min",s+"Max",s+"Value"],o);return o}function d2(t,e,n,s){for(const r of n){const i=t[r];if(Xn(i)){const o=e.parse(i);s.min=Math.min(s.min,o),s.max=Math.max(s.max,o)}}}class Cl extends gn{inRange(e,n,s,r){const{x:i,y:o}=No({x:e,y:n},this.getCenterPoint(r),Yt(-this.options.rotation));return UP({x:i,y:o},this.getProps(["x","y","x2","y2"],r),s,this.options)}getCenterPoint(e){return Ao(this,e)}draw(e){e.save(),j0(e,this.getCenterPoint(),this.options.rotation),ZP(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return i4(e,n)}}Cl.id="boxAnnotation";Cl.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Cl.defaultRoutes={borderColor:"color",backgroundColor:"color"};Cl.descriptors={label:{_fallback:!0}};class z0 extends gn{inRange(e,n,s,r){return WP({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ao(this,e)}draw(e){const n=this.options;!n.display||!n.content||(LV(e,this),e.save(),j0(e,this.getCenterPoint(),this.rotation),e4(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const s=NV(e,n);if(!s)return{};const{controllerMeta:r,point:i,radius:o}=RV(e,n,s);let a=F0(e.ctx,n);const l=OV(a,o);qP(n,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:d}=n,f=GP(i,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return{initProperties:Sl(e,f,n),...f,...r,rotation:n.rotation,_fitRatio:l}}}z0.id="doughnutLabelAnnotation";z0.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};z0.defaultRoutes={};function NV(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,s){const r=s.controller;return r instanceof gc&&AV(t,e,s.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?s:n},void 0)}function AV(t,e,n){if(!e.autoHide)return!0;for(let s=0;s<n.length;s++)if(!n[s].hidden&&t.getDataVisibility(s))return!0}function RV({chartArea:t},e,n){const{left:s,top:r,right:i,bottom:o}=t,{innerRadius:a,offsetX:l,offsetY:c}=n.controller,u=(s+i)/2+l,d=(r+o)/2+c,f={left:Math.max(u-a,s),right:Math.min(u+a,i),top:Math.max(d-a,r),bottom:Math.min(d+a,o)},p={x:(f.left+f.right)/2,y:(f.top+f.bottom)/2},g=e.spacing+e.borderWidth/2,x=a-g,w=p.y>d,m=w?r+g:o-g,y=DV(m,u,d,x);return{controllerMeta:{_centerX:u,_centerY:d,_radius:x,_counterclockwise:w,...y},point:p,radius:Math.min(a,Math.min(f.right-f.left,f.bottom-f.top)/2)}}function OV({width:t,height:e},n){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/s}function DV(t,e,n,s){const r=Math.pow(n-t,2),i=Math.pow(s,2),o=e*-2,a=Math.pow(e,2)+r-i,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:Zt};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:nx({x:e,y:n},{x:c,y:t}).angle,_endAngle:nx({x:e,y:n},{x:u,y:t}).angle}}function LV(t,e){const{_centerX:n,_centerY:s,_radius:r,_startAngle:i,_endAngle:o,_counterclockwise:a,options:l}=e;t.save();const c=Nr(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,s,r,i,o,a),t.closePath(),t.fill(),c&&t.stroke(),t.restore()}class Vu extends gn{inRange(e,n,s,r){return WP({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ao(this,e)}draw(e){const n=this.options,s=!Xn(this._visible)||this._visible;!n.display||!n.content||!s||(e.save(),j0(e,this.getCenterPoint(),this.rotation),iV(e,this),ZP(e,this,n),e4(e,jV(this),n),e.restore())}resolveElementProperties(e,n){let s;if(XP(n))s=s4(e,n);else{const{centerX:a,centerY:l}=Ay(e,n);s={x:a,y:l}}const r=pn(n.padding),i=F0(e.ctx,n),o=GP(s,i,n,r);return{initProperties:Sl(e,o,n),pointX:s.x,pointY:s.y,...o,rotation:n.rotation}}}Vu.id="labelAnnotation";Vu.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Vu.defaultRoutes={borderColor:"color"};function jV({x:t,y:e,width:n,height:s,options:r}){const i=r.borderWidth/2,o=pn(r.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-r.borderWidth,height:s-o.top-o.bottom-r.borderWidth}}const Oy=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),hx=(t,e,n)=>Oy(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,h2=(t,e,n)=>Oy(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,yc=t=>t*t,FV=(t,e,{x:n,y:s,x2:r,y2:i},o)=>o==="y"?{start:Math.min(s,i),end:Math.max(s,i),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},f2=(t,e,n,s)=>(1-s)*(1-s)*t+2*(1-s)*s*e+s*s*n,fx=(t,e,n,s)=>({x:f2(t.x,e.x,n.x,s),y:f2(t.y,e.y,n.y,s)}),p2=(t,e,n,s)=>2*(1-s)*(e-t)+2*s*(n-e),g2=(t,e,n,s)=>-Math.atan2(p2(t.x,e.x,n.x,s),p2(t.y,e.y,n.y,s))+.5*et;class Yu extends gn{inRange(e,n,s,r){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y"){const o={mouseX:e,mouseY:n},{path:a,ctx:l}=this;if(a){Nr(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=e*u.currentDevicePixelRatio,f=n*u.currentDevicePixelRatio,p=l.isPointInStroke(a,d,f)||px(this,o,r);return l.restore(),p}const c=yc(i);return UV(this,o,c,r)||px(this,o,r)}return zV(this,{mouseX:e,mouseY:n},s,{hitSize:i,useFinalPosition:r})}getCenterPoint(e){return Ao(this,e)}draw(e){const{x:n,y:s,x2:r,y2:i,cp:o,options:a}=this;if(e.save(),!Nr(e,a))return e.restore();_l(e,a);const l=Math.sqrt(Math.pow(r-n,2)+Math.pow(i-s,2));if(a.curve&&o)return XV(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:d,endAdjust:f}=l4(this),p=Math.atan2(i-s,r-n);e.translate(n,s),e.rotate(p),e.beginPath(),e.moveTo(0+d,0),e.lineTo(l-f,0),e.shadowColor=a.borderShadowColor,e.stroke(),gx(e,0,d,c),gx(e,l,-f,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const s=fV(e,n),{x:r,y:i,x2:o,y2:a}=s,l=BV(s,e.chartArea),c=l?$V({x:r,y:i},{x:o,y:a},e.chartArea):{x:r,y:i,x2:o,y2:a,width:Math.abs(o-r),height:Math.abs(a-i)};if(c.centerX=(o+r)/2,c.centerY=(a+i)/2,c.initProperties=Sl(e,c,n),n.curve){const d={x:c.x,y:c.y},f={x:c.x2,y:c.y2};c.cp=KV(c,n,ll(d,f))}const u=WV(e,c,n.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}Yu.id="lineAnnotation";const m2={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Yu.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},m2),fill:!1,length:12,start:Object.assign({},m2),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Vu.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Yu.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Yu.defaultRoutes={borderColor:"color"};function zV(t,{mouseX:e,mouseY:n},s,{hitSize:r,useFinalPosition:i}){const o=FV(e,n,t.getProps(["x","y","x2","y2"],i),s);return $P(o,r)||px(t,{mouseX:e,mouseY:n},i,s)}function BV({x:t,y:e,x2:n,y2:s},{top:r,right:i,bottom:o,left:a}){return!(t<a&&n<a||t>i&&n>i||e<r&&s<r||e>o&&s>o)}function x2({x:t,y:e},n,{top:s,right:r,bottom:i,left:o}){return t<o&&(e=h2(o,{x:t,y:e},n),t=o),t>r&&(e=h2(r,{x:t,y:e},n),t=r),e<s&&(t=hx(s,{x:t,y:e},n),e=s),e>i&&(t=hx(i,{x:t,y:e},n),e=i),{x:t,y:e}}function $V(t,e,n){const{x:s,y:r}=x2(t,e,n),{x:i,y:o}=x2(e,t,n);return{x:s,y:r,x2:i,y2:o,width:Math.abs(i-s),height:Math.abs(o-r)}}function UV(t,{mouseX:e,mouseY:n},s=Xi,r){const{x:i,y:o,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],r),c=a-i,u=l-o,d=yc(c)+yc(u),f=d===0?-1:((e-i)*c+(n-o)*u)/d;let p,g;return f<0?(p=i,g=o):f>1?(p=a,g=l):(p=i+f*c,g=o+f*u),yc(e-p)+yc(n-g)<=s}function px(t,{mouseX:e,mouseY:n},s,r){const i=t.label;return i.options.display&&i.inRange(e,n,r,s)}function WV(t,e,n){const s=n.borderWidth,r=pn(n.padding),i=F0(t.ctx,n),o=i.width+r.width+s,a=i.height+r.height+s;return VV(e,n,{width:o,height:a,padding:r},t.chartArea)}function HV(t){const{x:e,y:n,x2:s,y2:r}=t,i=Math.atan2(r-n,s-e);return i>et/2?i-et:i<et/-2?i+et:i}function VV(t,e,n,s){const{width:r,height:i,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},d=e.rotation==="auto"?HV(t):Yt(e.rotation),f=YV(r,i,d),p=GV(t,e,{labelSize:f,padding:o},s),g=t.cp?fx(c,t.cp,u,p):Oy(c,u,p),x={size:f.w,min:s.left,max:s.right,padding:o.left},w={size:f.h,min:s.top,max:s.bottom,padding:o.top},m=y2(g.x,x)+a,y=y2(g.y,w)+l;return{x:m-r/2,y:y-i/2,x2:m+r/2,y2:y+i/2,centerX:m,centerY:y,pointX:g.x,pointY:g.y,width:r,height:i,rotation:lP(d)}}function YV(t,e,n){const s=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*s)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*s)}}function GV(t,e,n,s){let r;const i=qV(t,s);return e.position==="start"?r=b2({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?r=1-b2({w:t.x-t.x2,h:t.y-t.y2},n,e,i):r=Iy(1,e.position),r}function b2(t,e,n,s){const{labelSize:r,padding:i}=e,o=t.w*s.dx,a=t.h*s.dy,l=o>0&&(r.w/2+i.left-s.x)/o,c=a>0&&(r.h/2+i.top-s.y)/a;return D0(Math.max(l,c),0,.25)}function qV(t,e){const{x:n,x2:s,y:r,y2:i}=t,o=Math.min(r,i)-e.top,a=Math.min(n,s)-e.left,l=e.bottom-Math.max(r,i),c=e.right-Math.max(n,s);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function y2(t,e){const{size:n,min:s,max:r,padding:i}=e,o=n/2;return n>r-s?(r+s)/2:(s>=t-i-o&&(t=s+i+o),r<=t+i+o&&(t=r-i-o),t)}function l4(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,s=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:v2(t,n),endAdjust:v2(t,s)}}function v2(t,e){if(!e||!e.display)return 0;const{length:n,width:s}=e,r=t.options.borderWidth/2,i={x:n,y:s+r};return Math.abs(hx(0,i,{x:0,y:r}))}function gx(t,e,n,s){if(!s||!s.display)return;const{length:r,width:i,fill:o,backgroundColor:a,borderColor:l}=s,c=Math.abs(e-r)+n;t.beginPath(),_l(t,s),Nr(t,s),t.moveTo(c,-i),t.lineTo(e+n,0),t.lineTo(c,i),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=s.borderShadowColor,t.stroke()}function KV(t,e,n){const{x:s,y:r,x2:i,y2:o,centerX:a,centerY:l}=t,c=Math.atan2(o-r,i-s),u=Ny(e.controlPoint,0),d={x:a+ki(n,u.x,!1),y:l+ki(n,u.y,!1)};return No(d,{x:a,y:l},c)}function w2(t,{x:e,y:n},{angle:s,adjust:r},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(s),gx(t,0,-r,i),t.restore())}function XV(t,e,n,s){const{x:r,y:i,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:f}=l4(e),p={x:r,y:i},g={x:o,y:a},x=g2(p,n,g,0),w=g2(p,n,g,1)-et,m=fx(p,n,g,d/s),y=fx(p,n,g,1-f/s),v=new Path2D;t.beginPath(),v.moveTo(m.x,m.y),v.quadraticCurveTo(n.x,n.y,y.x,y.y),t.shadowColor=l.borderShadowColor,t.stroke(v),e.path=v,e.ctx=t,w2(t,m,{angle:x,adjust:d},c),w2(t,y,{angle:w,adjust:f},u)}class Gu extends gn{inRange(e,n,s,r){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y")return QV({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),i,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],r),d=s==="y"?{start:l,end:u}:{start:a,end:c},f=No({x:e,y:n},this.getCenterPoint(r),Yt(-i));return f[s]>=d.start-o-Xi&&f[s]<=d.end+o+Xi}getCenterPoint(e){return Ao(this,e)}draw(e){const{width:n,height:s,centerX:r,centerY:i,options:o}=this;e.save(),j0(e,this.getCenterPoint(),o.rotation),_l(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=Nr(e,o);e.ellipse(r,i,s/2,n/2,et/2,0,2*et),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return i4(e,n)}}Gu.id="ellipseAnnotation";Gu.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Cl.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Gu.defaultRoutes={borderColor:"color",backgroundColor:"color"};Gu.descriptors={label:{_fallback:!0}};function QV(t,e,n,s){const{width:r,height:i,centerX:o,centerY:a}=e,l=r/2,c=i/2;if(l<=0||c<=0)return!1;const u=Yt(n||0),d=Math.cos(u),f=Math.sin(u),p=Math.pow(d*(t.x-o)+f*(t.y-a),2),g=Math.pow(f*(t.x-o)-d*(t.y-a),2);return p/Math.pow(l+s,2)+g/Math.pow(c+s,2)<=1.0001}class B0 extends gn{inRange(e,n,s,r){const{x:i,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return s!=="x"&&s!=="y"?VH({x:e,y:n},this.getCenterPoint(r),c/2,u):$P(s==="y"?{start:o,end:l,value:n}:{start:i,end:a,value:e},u)}getCenterPoint(e){return Ao(this,e)}draw(e){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,_l(e,n);const r=Nr(e,n);ZH(e,this,this.centerX,this.centerY),r&&!L0(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=s}resolveElementProperties(e,n){const s=r4(e,n);return s.initProperties=Sl(e,s,n),s}}B0.id="pointAnnotation";B0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};B0.defaultRoutes={borderColor:"color",backgroundColor:"color"};class $0 extends gn{inRange(e,n,s,r){if(s!=="x"&&s!=="y")return this.options.radius>=.1&&this.elements.length>1&&ZV(this.elements,e,n,r);const i=No({x:e,y:n},this.getCenterPoint(r),Yt(-this.options.rotation)),o=this.elements.map(c=>s==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return i[s]>=a&&i[s]<=l}getCenterPoint(e){return Ao(this,e)}draw(e){const{elements:n,options:s}=this;e.save(),e.beginPath(),e.fillStyle=s.backgroundColor,_l(e,s);const r=Nr(e,s);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),r&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const s=r4(e,n),{sides:r,rotation:i}=n,o=[],a=2*et/r;let l=i*xy;for(let c=0;c<r;c++,l+=a){const u=JV(s,n,l);u.initProperties=Sl(e,s,n),o.push(u)}return s.elements=o,s}}$0.id="polygonAnnotation";$0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};$0.defaultRoutes={borderColor:"color",backgroundColor:"color"};function JV({centerX:t,centerY:e},{radius:n,borderWidth:s,hitTolerance:r},i){const o=(s+r)/2,a=Math.sin(i),l=Math.cos(i),c={x:t+a*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:t+a*(n+o),bY:e-l*(n+o)}}}function ZV(t,e,n,s){let r=!1,i=t[t.length-1].getProps(["bX","bY"],s);for(const o of t){const a=o.getProps(["bX","bY"],s);a.bY>n!=i.bY>n&&e<(i.bX-a.bX)*(n-a.bY)/(i.bY-a.bY)+a.bX&&(r=!r),i=a}return r}const xi={box:Cl,doughnutLabel:z0,ellipse:Gu,label:Vu,line:Yu,point:B0,polygon:$0};Object.keys(xi).forEach(t=>{Et.describe(`elements.${xi[t].id}`,{_fallback:"plugins.annotation.common"})});const eY={update:Object.assign},tY=Ry.concat(Af),k2=(t,e)=>Be(e)?xx(t,e):t,mx=t=>t==="color"||t==="font";function Dy(t="line"){return xi[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function nY(t,e,n,s){const r=rY(t,n.animations,s),i=e.annotations,o=aY(e.elements,i);for(let a=0;a<i.length;a++){const l=i[a],c=c4(o,a,l.type),u=l.setContext(oY(t,c,o,l)),d=c.resolveElementProperties(t,u);d.skip=sY(d),"elements"in d&&(iY(c,d.elements,u,r),delete d.elements),Xn(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=u4(u),r.update(c,d)}}function sY(t){return isNaN(t.x)||isNaN(t.y)}function rY(t,e,n){return n==="reset"||n==="none"||n==="resize"?eY:new Py(t,e)}function iY(t,e,n,s){const r=t.elements||(t.elements=[]);r.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],a=o.properties,l=c4(r,i,o.type,o.initProperties),c=n[o.optionScope].override(o);a.options=u4(c),s.update(l,a)}}function c4(t,e,n,s){const r=xi[Dy(n)];let i=t[e];return(!i||!(i instanceof r))&&(i=t[e]=new r,Object.assign(i,s)),i}function u4(t){const e=xi[Dy(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,xx(t,e.defaults),xx(t,e.defaultRoutes));for(const s of tY)n[s]=t[s];return n}function xx(t,e){const n={};for(const s of Object.keys(e)){const r=e[s],i=t[s];mx(s)&&yt(i)?n[s]=i.map(o=>k2(o,r)):n[s]=k2(i,r)}return n}function oY(t,e,n,s){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:s.id,type:"annotation"}))}function aY(t,e){const n=e.length,s=t.length;if(s<n){const r=n-s;t.splice(s,0,...new Array(r))}else s>n&&t.splice(n,s-n);return t}var lY="3.1.0";const Yr=new Map,S2=t=>t.type!=="doughnutLabel",cY=Ry.concat(Af);var uY={id:"annotation",version:lY,beforeRegister(){YH("chart.js","4.0",ao.version)},afterRegister(){ao.register(xi)},afterUnregister(){ao.unregister(xi)},beforeInit(t){Yr.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const s=Yr.get(t),r=s.annotations=[];let i=n.annotations;Be(i)?Object.keys(i).forEach(o=>{const a=i[o];Be(a)&&(a.id=o,r.push(a))}):yt(i)&&r.push(...i),EV(r.filter(S2),t.scales)},afterDataLimits(t,e){const n=Yr.get(t);CV(t,e.scale,n.annotations.filter(S2).filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(t,e,n){const s=Yr.get(t);vV(t,s,n),nY(t,s,n,e.mode),s.visibleElements=s.elements.filter(r=>!r.skip&&r.options.display),_V(t,s,n)},beforeDatasetsDraw(t,e,n){ec(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){ec(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){ec(t,e.index,n.clip)},beforeDraw(t,e,n){ec(t,"beforeDraw",n.clip)},afterDraw(t,e,n){ec(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const s=Yr.get(t);wV(s,e.event,n)&&(e.changed=!0)},afterDestroy(t){Yr.delete(t)},getAnnotations(t){const e=Yr.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return My(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!cY.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${xi[Dy(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:mx,_fallback:!0},_indexable:mx}},additionalOptionScopes:[""]};function ec(t,e,n){const{ctx:s,chartArea:r}=t,i=Yr.get(t);n&&I0(s,r);const o=dY(i.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)hY(s,r,i,a);n&&N0(s)}function dY(t,e){const n=[];for(const s of t)if(s.options.drawTime===e&&n.push({element:s,main:!0}),s.elements&&s.elements.length)for(const r of s.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function hY(t,e,n,s){const r=s.element;s.main?(c2(n,r,"beforeDraw"),r.draw(t,e),c2(n,r,"afterDraw")):r.draw(t,e)}ao.register(cx,ux,Eh,xc,xH,CH,gH,uY);const fY=({minPrice:t,maxPrice:e,orders:n,pendingOrders:s=[],onAddOrder:r,onRemoveOrder:i,currentPrice:o,markPrice:a})=>{const l=k.useRef(null),[c,u]=k.useState(null),d=k.useMemo(()=>{const g=[...n,...s];return g.length>0?Math.max(...g.map(x=>x.amount),.1):.1},[n,s]),f=k.useMemo(()=>{const g=n.map(w=>({x:w.amount,y:w.price,id:w.id,side:w.side,isPending:!1})),x=s.map(w=>({x:w.amount,y:w.price,id:w.id,side:w.side,isPending:!0}));return{datasets:[{label:"Long Orders",data:g.filter(w=>{const m=n.find(y=>y.id===w.id);return(m==null?void 0:m.side)==="long"||(m==null?void 0:m.side)==="buy"||!(m!=null&&m.side)}),backgroundColor:"rgba(77, 171, 247, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Short Orders",data:g.filter(w=>{const m=n.find(y=>y.id===w.id);return(m==null?void 0:m.side)==="short"||(m==null?void 0:m.side)==="sell"}),backgroundColor:"rgba(255, 152, 0, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Pending Long",data:x.filter(w=>{const m=s.find(y=>y.id===w.id);return(m==null?void 0:m.side)==="long"||(m==null?void 0:m.side)==="buy"}),backgroundColor:"rgba(40, 167, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10},{label:"Pending Short",data:x.filter(w=>{const m=s.find(y=>y.id===w.id);return(m==null?void 0:m.side)==="short"||(m==null?void 0:m.side)==="sell"}),backgroundColor:"rgba(220, 53, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10}]}},[n,s]),p=k.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,backgroundColor:"#1a1a1a",plugins:{legend:{display:!0,position:"top",labels:{color:"#fff",font:{size:12}}},tooltip:{enabled:!0,callbacks:{label:g=>{const x=g.raw,w=[...n,...s].find(m=>m.id===x.id);return w?[`Price: ${w.price.toFixed(2)} USDC`,`Amount: ${w.amount.toFixed(4)} BTC`,w.isPending?`Pending ${w.side==="long"||w.side==="buy"?"Long":"Short"}`:""].filter(Boolean):`Price: ${x.y.toFixed(2)}, Amount: ${x.x.toFixed(4)}`}}},annotation:{annotations:{...o!==null&&o>=t&&o<=e?{currentPriceLine:{type:"line",xMin:0,xMax:d,yMin:o,yMax:o,borderColor:"#00ff00",borderWidth:2,borderDash:[5,5],label:{display:!0,content:`Current: ${o.toLocaleString()}`,position:"end",backgroundColor:"rgba(0, 255, 0, 0.8)",color:"#000",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y"}}:{},...a!==null&&a>=t&&a<=e?{markPriceLine:{type:"line",xMin:0,xMax:d,yMin:a,yMax:a,borderColor:"#ff0000",borderWidth:2,label:{display:!0,content:`Mark Price: ${a.toLocaleString()}`,position:"start",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y",arrowHeads:{start:{enabled:!1,fill:!1,length:0,width:0},end:{enabled:!0,fill:!0,length:15,width:10,backgroundColor:"#ff0000",borderColor:"#ff0000",borderWidth:2}}}}:{}}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Amount (BTC)",color:"#fff",font:{size:14,weight:"bold"}},min:0,max:d,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(g){return Number(g).toFixed(4)}},grid:{color:"#333"}},y:{type:"linear",title:{display:!0,text:"Price (USDC)",color:"#fff",font:{size:14,weight:"bold"}},min:t,max:e,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(g){return Number(g).toLocaleString()}},grid:{color:"#333"}}},onClick:(g,x)=>{if(!l.current)return;const w=l.current,m=w.canvas;if(!m)return;const y=m.getBoundingClientRect(),v=g.native;if(!v)return;const b=v.clientX-y.left,S=v.clientY-y.top,_=w.scales.x,E=w.scales.y,P=_.getValueForPixel(b),M=E.getValueForPixel(S);if(P==null||M===null||M===void 0)return;const N=[...n,...s].find(I=>{const B=_.getPixelForValue(I.amount),W=E.getPixelForValue(I.price);return Math.sqrt(Math.pow(b-B,2)+Math.pow(S-W,2))<=12});if(N)i(N.id);else{const I=Math.max(t,Math.min(e,M)),B=Math.max(.001,Math.min(1,P));r(I,B)}},onHover:(g,x)=>{if(!l.current)return;const w=l.current,m=w.canvas;if(!m)return;const y=m.getBoundingClientRect(),v=g.native;if(!v)return;const b=v.clientX-y.left,S=v.clientY-y.top,_=[...n,...s],E=w.scales.x,P=w.scales.y,M=_.find(C=>{const N=E.getPixelForValue(C.amount),I=P.getPixelForValue(C.price);return Math.sqrt(Math.pow(b-N,2)+Math.pow(S-I,2))<=10});u((M==null?void 0:M.id)||null)}}),[t,e,d,n,s,r,i,o,a]);return h.jsx("div",{className:"price-amount-chart-container",style:{height:"600px",position:"relative"},children:h.jsx("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #333",padding:"10px",height:"100%"},children:h.jsx(zH,{ref:l,data:f,options:p,style:{cursor:c?"pointer":"crosshair"}})})})},pY=({isOpen:t,onClose:e,minPrice:n,maxPrice:s,onMinPriceChange:r,onMaxPriceChange:i,markPrice:o,hasManualPriceChange:a,onResetToAuto:l,orderMode:c,onOrderModeChange:u,curveIntensity:d,onCurveIntensityChange:f,roundingStep:p,onRoundingStepChange:g})=>{const x=b=>Math.round(b/1.5/p)*p,w=b=>Math.round(b*1.5/p)*p;if(!t)return null;const m=o!=null&&o.mark_price?parseFloat(o.mark_price):null,y=m?x(m):null,v=m?w(m):null;return typeof document<"u"?Ei.createPortal(h.jsx("div",{className:"modal-overlay",onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:h.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:0,minWidth:"400px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[h.jsx("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:h.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:600,color:"rgba(255, 255, 255, 0.9)"},children:"Price Range Configuration"})}),h.jsx("div",{className:"modal-body",style:{padding:"2rem 1.5rem"},children:h.jsxs("div",{className:"trading-test-price-range-controls",children:[h.jsxs("div",{children:[h.jsxs("label",{children:["Rounding Step ($):",h.jsx("input",{type:"number",value:p,onChange:b=>g(Math.max(1,parseFloat(b.target.value)||100)),min:1,step:10,className:"trading-test-input"})]}),h.jsxs("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:["Prices will be rounded to the nearest $",p]})]}),h.jsxs("div",{children:[h.jsxs("label",{children:["Min Price (USDC):",h.jsx("input",{type:"number",value:n,onChange:b=>{r(parseFloat(b.target.value)||1e4)},min:1e3,max:s-1e3,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price / 1.5, rounded to $${p})`:""})]}),(o==null?void 0:o.mark_price)&&y!==null&&h.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?h.jsxs(h.Fragment,{children:["Manual override (Auto:"," ",m.toLocaleString()," / 1.5 ="," ",y.toLocaleString(),")"]}):h.jsxs(h.Fragment,{children:["Auto: ",m.toLocaleString()," / 1.5 ="," ",n.toLocaleString()]})})]}),h.jsxs("div",{children:[h.jsxs("label",{children:["Max Price (USDC):",h.jsx("input",{type:"number",value:s,onChange:b=>{i(parseFloat(b.target.value)||1e5)},min:n+1e3,max:1e6,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price  1.5, rounded to $${p})`:""})]}),(o==null?void 0:o.mark_price)&&v!==null&&h.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?h.jsxs(h.Fragment,{children:["Manual override (Auto:"," ",m.toLocaleString(),"  1.5 ="," ",v.toLocaleString(),")"]}):h.jsxs(h.Fragment,{children:["Auto: ",m.toLocaleString(),"  1.5 ="," ",s.toLocaleString()]})})]}),h.jsx("div",{children:h.jsxs("label",{children:["Order Mode:",h.jsxs("select",{value:c,onChange:b=>u(b.target.value),className:"trading-test-select",children:[h.jsx("option",{value:"random",children:"Random"}),h.jsx("option",{value:"curve",children:"Curve (Buy more at lower prices)"})]})]})}),c==="curve"&&h.jsx("div",{children:h.jsxs("label",{children:["Curve Intensity: ",d,h.jsx("input",{type:"range",value:d,onChange:b=>f(parseFloat(b.target.value)),min:1,max:5,step:.5,className:"trading-test-range"}),h.jsx("small",{children:"Higher = more aggressive buying at lower prices"})]})})]})}),h.jsxs("div",{className:"modal-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[a&&(o==null?void 0:o.mark_price)&&h.jsx("button",{onClick:l,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(77, 171, 247, 0.2)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Reset to Auto"}),h.jsx("div",{style:{display:"flex",gap:"1rem",marginLeft:"auto"},children:h.jsx("button",{onClick:e,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Close"})})]})]})}),document.body):null},gY=({onClick:t,disabled:e,orderMode:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-primary",style:{backgroundColor:e?"#ccc":"#007bff",cursor:e?"not-allowed":"pointer"},children:["Submit Test Orders (",n==="random"?"Random":"Curve-Based",")"]}),mY=({onClick:t,disabled:e,orderCount:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-success",style:{backgroundColor:e?"#ccc":"#28a745",cursor:e?"not-allowed":"pointer"},children:["Submit Chart Orders (",n," orders)"]}),xY=({onClick:t,disabled:e})=>h.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-secondary",style:{cursor:e?"not-allowed":"pointer"},children:"Reset Chart"}),bY=({onClick:t,disabled:e,pendingCount:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-info",style:{backgroundColor:e?"#ccc":"#17a2b8",cursor:e?"not-allowed":"pointer"},children:["Load Pending Orders ",n>0&&`(${n})`]}),Cg=({onClick:t,disabled:e,filter:n})=>{const s=n==="long"?"Cancel All Long":n==="short"?"Cancel All Short":"Cancel All Orders";return h.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-danger",style:{backgroundColor:e?"#ccc":"#dc3545",cursor:e?"not-allowed":"pointer"},children:s})};function yY(){var de,me,U,ie;const[t,e]=k.useState(Ou),[n,s]=k.useState(""),[r,i]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(1e4),[u,d]=k.useState(1e5),[f,p]=k.useState(null),[g,x]=k.useState("random"),[w,m]=k.useState(2),[y,v]=k.useState("long"),[b,S]=k.useState([]),[_,E]=k.useState([]),[P,M]=k.useState([]),[C,N]=k.useState(!1),[I,B]=k.useState(!1),[W,j]=k.useState(100),z=k.useRef(null),F=k.useRef(null),A=k.useRef(t),{markets:$,getSymbolByMarketId:T}=To({baseURL:t,sessionToken:"",autoFetchMarkets:!0}),{mnemonic:G,walletAddress:D,authToken:R,setMnemonic:X}=vl(),K=n?T(n):null,Y=K!==null?K:void 0,{markPrice:V}=l0({baseURL:t,wsURL:c0,marketId:n||"",symbol:Y}),[Q,ee]=k.useState(!1);k.useEffect(()=>{if(V!=null&&V.mark_price&&!Q){const O=parseFloat(V.mark_price),te=Math.round(O*1.5/W)*W,ne=Math.round(O/1.5/W)*W;c(ne),d(te)}},[V==null?void 0:V.mark_price,Q,W]),k.useEffect(()=>{G&&i(G),R&&a(R)},[G,R]);const fe=$.length>0?(((de=$.find(O=>O.active))==null?void 0:de.market_id)??$[0].market_id)||(((U=(me=$.find(O=>O.active))==null?void 0:me.id)==null?void 0:U.toString())??((ie=$[0].id)==null?void 0:ie.toString())??""):null;k.useEffect(()=>{fe&&!n&&s(fe)},[fe]),k.useEffect(()=>{A.current=t},[t]),k.useEffect(()=>{r&&r.trim()!==""&&(z.current=new yl({baseURL:A.current,mnemonic:r}),z.current.initialize().catch(O=>{console.error("Failed to initialize ExchangeClient:",O)}))},[r,t]),k.useEffect(()=>{F.current=new wn({baseURL:A.current})},[t]),k.useEffect(()=>{if(!n||!F.current)return;const O=async()=>{try{const ne=await F.current.getTicker(n);if(ne!=null&&ne.lastPrice){const q=typeof ne.lastPrice=="string"?parseFloat(ne.lastPrice):ne.lastPrice;p(q)}}catch(ne){console.error("Failed to fetch current price:",ne)}};O();const te=setInterval(O,5e3);return()=>clearInterval(te)},[n]);const je=k.useCallback(O=>{const te=[];for(let ne=0;ne<O;ne++){const q=l+Math.random()*(u-l),he=.001+Math.random()*.01;te.push({price:q,amount:he})}return te.sort((ne,q)=>ne.price-q.price)},[l,u]),Se=k.useCallback(O=>{const te=[],ne=u-l;for(let q=0;q<O;q++){const he=Math.random(),Me=Math.pow(he,w),ke=l+Me*ne,ze=.001+(u-ke)/ne*.02;te.push({price:ke,amount:ze})}return te.sort((q,he)=>q.price-he.price)},[l,u,w]),Ce=k.useCallback(async()=>{if(!z.current||!n||!D){we.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}N(!0);const O=[];try{const ne=g==="random"?je(10):Se(10);we.info("Submitting test orders",{description:`Submitting ${ne.length} ${g} orders...`});for(const he of ne){try{const ke=dt("1"),Pe=await z.current.placeOrder({marketId:n,side:y==="long"?"buy":"sell",orderType:"LIMIT",price:he.price,quantity:he.amount,timeInForce:"GTC",leverage:ke});O.push({success:!0,order:{price:he.price,amount:he.amount,orderId:(Pe==null?void 0:Pe.orderId)||(Pe==null?void 0:Pe.id)},timestamp:Date.now()})}catch(Me){O.push({success:!1,order:{price:he.price,amount:he.amount},error:Me.message,timestamp:Date.now()})}await new Promise(Me=>setTimeout(Me,200))}M(he=>[...he,...O]);const q=O.filter(he=>he.success).length;we.success("Test orders submitted",{description:`${q}/${O.length} orders placed successfully.`})}catch(te){we.error("Test submission failed",{description:te.message||"Unknown error occurred"})}finally{N(!1)}},[n,D,g,je,Se]),Ie=k.useCallback(async()=>{if(!z.current||!n||!D){we.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}if(b.length===0){we.warning("No chart orders",{description:"Please add orders to the chart first."});return}N(!0);const O=[];try{we.info("Submitting chart orders",{description:`Submitting ${b.length} chart orders...`});for(const ne of b){try{const he=dt("1"),Me=await z.current.placeOrder({marketId:n,side:ne.side==="short"||ne.side==="sell"?"sell":"buy",orderType:"LIMIT",price:ne.price,quantity:ne.amount,timeInForce:"GTC",leverage:he});O.push({success:!0,order:{price:ne.price,amount:ne.amount,orderId:(Me==null?void 0:Me.orderId)||(Me==null?void 0:Me.id)},timestamp:Date.now()})}catch(q){O.push({success:!1,order:{price:ne.price,amount:ne.amount},error:q.message,timestamp:Date.now()})}await new Promise(q=>setTimeout(q,200))}M(ne=>[...ne,...O]);const te=O.filter(ne=>ne.success).length;we.success("Chart orders submitted",{description:`${te}/${O.length} orders placed successfully.`})}catch(te){we.error("Chart order submission failed",{description:te.message||"Unknown error occurred"})}finally{N(!1)}},[n,D,b]),gt=k.useCallback(()=>{S([]),we.info("Chart reset",{description:"All chart orders have been cleared."})},[]),L=k.useCallback((O,te)=>{const ne={price:O,amount:te,id:`chart-${Date.now()}-${Math.random()}`,side:y};S(q=>[...q,ne])},[y]),ae=k.useCallback(O=>{S(te=>te.filter(ne=>ne.id!==O)),E(te=>te.filter(ne=>ne.id!==O))},[]),ue=k.useCallback(async()=>{if(!F.current||!D||!n){we.error("Setup required",{description:"Please ensure wallet address and market ID are configured."});return}try{we.info("Loading pending orders...");const O=await F.current.getOrders(D),te=(O==null?void 0:O.orders)||[];console.log(O);const ne=te.filter(q=>{const he=q.marketId||q.market_id||q.assetPair,Me=(q.status||"").toUpperCase();return he===n&&["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(Me)}).map(q=>{const he=q.side||(q.direction==="LONG"?"long":q.direction==="SHORT"?"short":"buy");return{price:q.price,amount:q.quantity,id:`pending-${q.id||q.orderId||q.order_id}`,side:he==="buy"?"long":he==="sell"?"short":he,orderId:q.id||q.orderId||q.order_id,isPending:!0}});E(ne),we.success("Pending orders loaded",{description:`Loaded ${ne.length} pending orders.`})}catch(O){we.error("Failed to load pending orders",{description:O.message||"Unknown error occurred"})}},[D,n]),ye=k.useCallback(async O=>{if(!z.current||!n||!D){we.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}try{const te=await F.current.getOrders(D),q=((te==null?void 0:te.orders)||[]).filter(ke=>{const Pe=ke.marketId||ke.market_id||ke.assetPair,ze=(ke.status||"").toUpperCase();if(Pe!==n||!["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(ze))return!1;if(O==="all")return!0;const rt=ke.side||(ke.direction==="LONG"?"long":ke.direction==="SHORT"?"short":"buy");return O==="long"?rt==="buy"||rt==="long":O==="short"?rt==="sell"||rt==="short":!1});if(q.length===0){we.info("No orders to cancel",{description:`No ${O} pending orders found.`});return}N(!0),we.info("Canceling orders",{description:`Canceling ${q.length} ${O} orders...`});let he=0,Me=0;for(const ke of q){try{const Pe=ke.id||ke.orderId||ke.order_id;await z.current.cancelOrder({orderId:Pe,marketId:n}),he++}catch(Pe){Me++,console.error("Failed to cancel order:",Pe)}await new Promise(Pe=>setTimeout(Pe,100))}await ue(),we.success("Orders canceled",{description:`${he} orders canceled successfully${Me>0?`, ${Me} failed`:""}.`})}catch(te){we.error("Failed to cancel orders",{description:te.message||"Unknown error occurred"})}finally{N(!1)}},[n,D,ue]);return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"Trading Test Page"}),h.jsx("p",{children:"Advanced trading test with price range, interactive chart, and multiple submission modes"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"trading-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:O=>e(O.target.value),className:"trading-test-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:O=>s(O.target.value),className:"trading-test-select",children:$.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),$.map(O=>{var q;const te=O.market_id??((q=O.id)==null?void 0:q.toString())??"",ne=O.moniker?O.moniker:O.symbol?O.symbol:`Market ID: ${te}`;return h.jsx("option",{value:te,children:ne},te)})]})})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic:",h.jsx("input",{type:"text",value:r,onChange:O=>{i(O.target.value),X(O.target.value)},placeholder:"Enter mnemonic",className:"trading-test-input"})]})}),f&&h.jsxs("div",{className:"trading-test-price-display",children:[h.jsx("strong",{children:"Current Price:"})," ",f.toLocaleString()," ","USDC"]})]})]}),h.jsxs("div",{className:"trading-test-tabs",children:[h.jsx("button",{className:`trading-test-tab ${y==="long"?"active":""}`,onClick:()=>v("long"),children:"Long (Buy)"}),h.jsx("button",{className:`trading-test-tab ${y==="short"?"active":""}`,onClick:()=>v("short"),children:"Short (Sell)"})]}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Interactive Price-Amount Chart"}),h.jsx("div",{className:"trading-test-chart-controls",children:h.jsxs("div",{className:"trading-test-chart-info",children:[h.jsxs("span",{children:["Orders on chart: ",b.length]}),h.jsxs("span",{onClick:()=>B(!0),style:{cursor:"pointer",textDecoration:"underline"},title:"Click to configure price range",children:["Price range: ",l.toLocaleString()," -"," ",u.toLocaleString()," USDC"]})]})}),h.jsx(fY,{minPrice:l,maxPrice:u,orders:b,pendingOrders:_,onAddOrder:L,onRemoveOrder:ae,currentPrice:f,markPrice:V!=null&&V.mark_price?parseFloat(V.mark_price):null}),h.jsxs("div",{className:"price-amount-chart-instructions",children:[h.jsx("p",{children:"Click on the chart to add orders. Click on existing orders to remove them."}),h.jsx("p",{children:"Y-axis: Price (USDC) | X-axis: Amount (BTC)"})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Order Submission"}),h.jsxs("div",{className:"trading-test-submission-buttons",children:[h.jsx(xY,{onClick:gt,disabled:b.length===0}),h.jsx(gY,{onClick:Ce,disabled:C||!n||!D,orderMode:g}),h.jsx(mY,{onClick:Ie,disabled:C||b.length===0||!n||!D,orderCount:b.length})]}),h.jsx("h2",{children:"Pending Orders Management"}),h.jsxs("div",{className:"trading-test-pending-orders-controls",children:[h.jsx(bY,{onClick:ue,disabled:!n||!D,pendingCount:_.length}),h.jsxs("div",{className:"trading-test-cancel-buttons",children:[h.jsx(Cg,{onClick:()=>ye("long"),disabled:C||!n||!D,filter:"long"}),h.jsx(Cg,{onClick:()=>ye("short"),disabled:C||!n||!D,filter:"short"}),h.jsx(Cg,{onClick:()=>ye("all"),disabled:C||!n||!D,filter:"all"})]})]})]}),P.length>0&&h.jsxs("div",{className:"trading-test-results",children:[h.jsx("h2",{children:"Test Results"}),h.jsxs("div",{className:"trading-test-results-summary",children:[h.jsxs("div",{children:["Total: ",P.length," | Success:"," ",P.filter(O=>O.success).length," | Failed:"," ",P.filter(O=>!O.success).length]}),h.jsx("button",{onClick:()=>M([]),className:"trading-test-button-secondary",children:"Clear Results"})]}),h.jsx("div",{className:"trading-test-results-list",children:P.slice(-20).map((O,te)=>h.jsx("div",{className:`trading-test-result-item ${O.success?"success":"error"}`,children:h.jsxs("div",{children:[h.jsxs("strong",{children:[O.success?"":""," Order @"," ",O.order.price.toFixed(2)," USDC"]}),h.jsxs("span",{children:["Amount: ",O.order.amount.toFixed(4)," BTC"]}),O.order.orderId&&h.jsxs("span",{children:["Order ID: ",O.order.orderId.substring(0,16),"..."]}),O.error&&h.jsx("span",{className:"error-text",children:O.error})]})},te))})]}),h.jsx(pY,{isOpen:I,onClose:()=>B(!1),minPrice:l,maxPrice:u,onMinPriceChange:O=>{c(O),ee(!0)},onMaxPriceChange:O=>{d(O),ee(!0)},markPrice:V,hasManualPriceChange:Q,onResetToAuto:()=>{if(V!=null&&V.mark_price){ee(!1);const O=parseFloat(V.mark_price),te=Math.round(O*1.5/W)*W,ne=Math.round(O/1.5/W)*W;c(ne),d(te)}},orderMode:g,onOrderModeChange:x,curveIntensity:w,onCurveIntensityChange:m,roundingStep:W,onRoundingStepChange:j})]})}const vY=k.createContext(void 0),tc="onboard_mnemonic",nc="onboard_wallet_address",wY=({children:t})=>{const[e,n]=k.useState(null),[s,r]=k.useState(null);k.useEffect(()=>{const l=localStorage.getItem(nc),c=localStorage.getItem(tc),u=localStorage.getItem("generatedAddress"),d=localStorage.getItem("mnemonic");l&&c?(n(l),r(c)):u&&d&&(n(u),r(d),localStorage.setItem(nc,u),localStorage.setItem(tc,d),localStorage.removeItem("generatedAddress"),localStorage.removeItem("mnemonic"))},[]),k.useEffect(()=>{const l=c=>{c.key===nc?n(c.newValue):c.key===tc&&r(c.newValue)};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const i=k.useCallback((l,c)=>{n(l),r(c),localStorage.setItem(nc,l),localStorage.setItem(tc,c)},[]),o=k.useCallback(()=>{n(null),r(null),localStorage.removeItem(nc),localStorage.removeItem(tc)},[]),a=k.useMemo(()=>({generatedAddress:e,mnemonic:s,setGeneratedData:i,clearGeneratedData:o}),[e,s,i,o]);return h.jsx(vY.Provider,{value:a,children:t})};function kY(){const{wasmStatus:t,isReady:e}=CN(),[n,s]=k.useState("main");return k.useEffect(()=>{const r=()=>{s("websocket-test")};return window.addEventListener("navigateToWebSocketTest",r),()=>{window.removeEventListener("navigateToWebSocketTest",r)}},[]),h.jsxs(wY,{children:[h.jsxs("div",{className:"App",children:[h.jsxs("header",{className:"App-header",children:[h.jsx("h1",{children:"Morm SDK"}),h.jsx("p",{children:"Test WebAssembly integration for morm_signer with Agent Delegation"}),h.jsxs("nav",{style:{marginTop:"1rem",display:"flex",gap:"1rem"},children:[h.jsx("button",{onClick:()=>s("main"),style:{padding:"0.5rem 1rem",backgroundColor:n==="main"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Morm Signer"}),h.jsx("button",{onClick:()=>s("sdk-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="sdk-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"SDK Trade API"}),h.jsx("button",{onClick:()=>s("websocket-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="websocket-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"WebSocket Test"}),h.jsx("button",{onClick:()=>s("hooks-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="hooks-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Hooks Test"}),h.jsx("button",{onClick:()=>s("layout-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="layout-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Layout Test"}),h.jsx("button",{onClick:()=>s("trading-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="trading-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Trading Test"})]})]}),h.jsx("main",{className:"App-main",children:n==="sdk-test"?h.jsx(mR,{}):n==="websocket-test"?h.jsx(AO,{}):n==="layout-test"?h.jsx(SL,{}):n==="hooks-test"?h.jsx(LB,{}):n==="trading-test"?h.jsx(yY,{}):h.jsxs(h.Fragment,{children:[h.jsx(oR,{status:t}),e&&h.jsxs("div",{className:"App-content",children:[h.jsx("div",{className:"App-section",children:h.jsx(nR,{})}),h.jsx("div",{className:"App-section",children:h.jsx(sR,{})}),h.jsx("div",{className:"App-section",children:h.jsx(rR,{})}),h.jsx("div",{className:"App-section",children:h.jsx(iR,{})})]}),t.error&&h.jsxs("div",{className:"App-error",children:[h.jsx("h3",{children:"Error Loading WASM"}),h.jsx("p",{children:t.error}),h.jsx("p",{children:"Make sure the morm_signer.wasm file is available in the public directory."})]})]})})]}),h.jsx(dL,{position:"bottom-right",toastOptions:{duration:4e3,style:{color:"var(--foreground)",border:"1px solid var(--border)"}}})]})}const SY=Eg.createRoot(document.getElementById("root"));SY.render(h.jsx(oe.StrictMode,{children:h.jsx(kY,{})}));
//# sourceMappingURL=index-Bnx0m5Gf.js.map
