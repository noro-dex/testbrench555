var bT=Object.defineProperty;var zy=t=>{throw TypeError(t)};var yT=(t,e,n)=>e in t?bT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ie=(t,e,n)=>yT(t,typeof e!="symbol"?e+"":e,n),V0=(t,e,n)=>e.has(t)||zy("Cannot "+n);var je=(t,e,n)=>(V0(t,e,"read from private field"),n?n.call(t):e.get(t)),Ze=(t,e,n)=>e.has(t)?zy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Pe=(t,e,n,s)=>(V0(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),an=(t,e,n)=>(V0(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function P2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var T2={exports:{}},jf={},M2={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tu=Symbol.for("react.element"),vT=Symbol.for("react.portal"),ST=Symbol.for("react.fragment"),kT=Symbol.for("react.strict_mode"),_T=Symbol.for("react.profiler"),CT=Symbol.for("react.provider"),ET=Symbol.for("react.context"),PT=Symbol.for("react.forward_ref"),TT=Symbol.for("react.suspense"),MT=Symbol.for("react.memo"),IT=Symbol.for("react.lazy"),Uy=Symbol.iterator;function DT(t){return t===null||typeof t!="object"?null:(t=Uy&&t[Uy]||t["@@iterator"],typeof t=="function"?t:null)}var I2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D2=Object.assign,N2={};function fl(t,e,n){this.props=t,this.context=e,this.refs=N2,this.updater=n||I2}fl.prototype.isReactComponent={};fl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function A2(){}A2.prototype=fl.prototype;function yx(t,e,n){this.props=t,this.context=e,this.refs=N2,this.updater=n||I2}var wx=yx.prototype=new A2;wx.constructor=yx;D2(wx,fl.prototype);wx.isPureReactComponent=!0;var Wy=Array.isArray,R2=Object.prototype.hasOwnProperty,vx={current:null},O2={key:!0,ref:!0,__self:!0,__source:!0};function L2(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)R2.call(e,s)&&!O2.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Tu,type:t,key:i,ref:o,props:r,_owner:vx.current}}function NT(t,e){return{$$typeof:Tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tu}function AT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hy=/\/+/g;function Y0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AT(""+t.key):e.toString(36)}function Jd(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tu:case vT:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+Y0(o,0):s,Wy(r)?(n="",t!=null&&(n=t.replace(Hy,"$&/")+"/"),Jd(r,e,n,"",function(c){return c})):r!=null&&(Sx(r)&&(r=NT(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Hy,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",Wy(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+Y0(i,a);o+=Jd(i,e,n,l,r)}else if(l=DT(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+Y0(i,a++),o+=Jd(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qu(t,e,n){if(t==null)return t;var s=[],r=0;return Jd(t,s,"","",function(i){return e.call(n,i,r++)}),s}function RT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _n={current:null},Zd={transition:null},OT={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:Zd,ReactCurrentOwner:vx};function j2(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:Qu,forEach:function(t,e,n){Qu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qu(t,function(){e++}),e},toArray:function(t){return Qu(t,function(e){return e})||[]},only:function(t){if(!Sx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};et.Component=fl;et.Fragment=ST;et.Profiler=_T;et.PureComponent=yx;et.StrictMode=kT;et.Suspense=TT;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OT;et.act=j2;et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=D2({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=vx.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)R2.call(e,l)&&!O2.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:Tu,type:t.type,key:r,ref:i,props:s,_owner:o}};et.createContext=function(t){return t={$$typeof:ET,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CT,_context:t},t.Consumer=t};et.createElement=L2;et.createFactory=function(t){var e=L2.bind(null,t);return e.type=t,e};et.createRef=function(){return{current:null}};et.forwardRef=function(t){return{$$typeof:PT,render:t}};et.isValidElement=Sx;et.lazy=function(t){return{$$typeof:IT,_payload:{_status:-1,_result:t},_init:RT}};et.memo=function(t,e){return{$$typeof:MT,type:t,compare:e===void 0?null:e}};et.startTransition=function(t){var e=Zd.transition;Zd.transition={};try{t()}finally{Zd.transition=e}};et.unstable_act=j2;et.useCallback=function(t,e){return _n.current.useCallback(t,e)};et.useContext=function(t){return _n.current.useContext(t)};et.useDebugValue=function(){};et.useDeferredValue=function(t){return _n.current.useDeferredValue(t)};et.useEffect=function(t,e){return _n.current.useEffect(t,e)};et.useId=function(){return _n.current.useId()};et.useImperativeHandle=function(t,e,n){return _n.current.useImperativeHandle(t,e,n)};et.useInsertionEffect=function(t,e){return _n.current.useInsertionEffect(t,e)};et.useLayoutEffect=function(t,e){return _n.current.useLayoutEffect(t,e)};et.useMemo=function(t,e){return _n.current.useMemo(t,e)};et.useReducer=function(t,e,n){return _n.current.useReducer(t,e,n)};et.useRef=function(t){return _n.current.useRef(t)};et.useState=function(t){return _n.current.useState(t)};et.useSyncExternalStore=function(t,e,n){return _n.current.useSyncExternalStore(t,e,n)};et.useTransition=function(){return _n.current.useTransition()};et.version="18.3.1";M2.exports=et;var S=M2.exports;const le=P2(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT=S,jT=Symbol.for("react.element"),FT=Symbol.for("react.fragment"),BT=Object.prototype.hasOwnProperty,$T=LT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zT={key:!0,ref:!0,__self:!0,__source:!0};function F2(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)BT.call(e,s)&&!zT.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:jT,type:t,key:i,ref:o,props:r,_owner:$T.current}}jf.Fragment=FT;jf.jsx=F2;jf.jsxs=F2;T2.exports=jf;var h=T2.exports,Mg={},B2={exports:{}},Qn={},$2={exports:{}},z2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,B){var I=R.length;R.push(B);e:for(;0<I;){var G=I-1>>>1,O=R[G];if(0<r(O,B))R[G]=B,R[I]=O,I=G;else break e}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var B=R[0],I=R.pop();if(I!==B){R[0]=I;e:for(var G=0,O=R.length,P=O>>>1;G<P;){var Z=2*(G+1)-1,Q=R[Z],Y=Z+1,q=R[Y];if(0>r(Q,I))Y<O&&0>r(q,Q)?(R[G]=q,R[Y]=I,G=Y):(R[G]=Q,R[Z]=I,G=Z);else if(Y<O&&0>r(q,I))R[G]=q,R[Y]=I,G=Y;else break e}}return B}function r(R,B){var I=R.sortIndex-B.sortIndex;return I!==0?I:R.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,m=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(R){for(var B=n(c);B!==null;){if(B.callback===null)s(c);else if(B.startTime<=R)s(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function y(R){if(x=!1,w(R),!m)if(n(l)!==null)m=!0,F(k);else{var B=n(c);B!==null&&j(y,B.startTime-R)}}function k(R,B){m=!1,x&&(x=!1,g(T),T=-1),p=!0;var I=f;try{for(w(B),d=n(l);d!==null&&(!(d.expirationTime>B)||R&&!A());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var O=G(d.expirationTime<=B);B=t.unstable_now(),typeof O=="function"?d.callback=O:d===n(l)&&s(l),w(B)}else s(l);d=n(l)}if(d!==null)var P=!0;else{var Z=n(c);Z!==null&&j(y,Z.startTime-B),P=!1}return P}finally{d=null,f=I,p=!1}}var _=!1,E=null,T=-1,D=5,C=-1;function A(){return!(t.unstable_now()-C<D)}function N(){if(E!==null){var R=t.unstable_now();C=R;var B=!0;try{B=E(!0,R)}finally{B?$():(_=!1,E=null)}}else _=!1}var $;if(typeof b=="function")$=function(){b(N)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,L=W.port2;W.port1.onmessage=N,$=function(){L.postMessage(null)}}else $=function(){v(N,0)};function F(R){E=R,_||(_=!0,$())}function j(R,B){T=v(function(){R(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,F(k))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var I=f;f=B;try{return R()}finally{f=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var I=f;f=R;try{return B()}finally{f=I}},t.unstable_scheduleCallback=function(R,B,I){var G=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?G+I:G):I=G,R){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=I+O,R={id:u++,callback:B,priorityLevel:R,startTime:I,expirationTime:O,sortIndex:-1},I>G?(R.sortIndex=I,e(c,R),n(l)===null&&R===n(c)&&(x?(g(T),T=-1):x=!0,j(y,I-G))):(R.sortIndex=O,e(l,R),m||p||(m=!0,F(k))),R},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(R){var B=f;return function(){var I=f;f=B;try{return R.apply(this,arguments)}finally{f=I}}}})(z2);$2.exports=z2;var UT=$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT=S,Kn=UT;function ue(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U2=new Set,Hc={};function Co(t,e){za(t,e),za(t+"Capture",e)}function za(t,e){for(Hc[t]=e,t=0;t<e.length;t++)U2.add(e[t])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ig=Object.prototype.hasOwnProperty,HT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vy={},Yy={};function VT(t){return Ig.call(Yy,t)?!0:Ig.call(Vy,t)?!1:HT.test(t)?Yy[t]=!0:(Vy[t]=!0,!1)}function YT(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GT(t,e,n,s){if(e===null||typeof e>"u"||YT(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Cn(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new Cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new Cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new Cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new Cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new Cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new Cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new Cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new Cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new Cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var kx=/[\-:]([a-z])/g;function _x(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kx,_x);on[e]=new Cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kx,_x);on[e]=new Cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kx,_x);on[e]=new Cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new Cn(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new Cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new Cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cx(t,e,n,s){var r=on.hasOwnProperty(e)?on[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GT(e,n,r,s)&&(n=null),s||r===null?VT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Rr=WT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),Wo=Symbol.for("react.portal"),Ho=Symbol.for("react.fragment"),Ex=Symbol.for("react.strict_mode"),Dg=Symbol.for("react.profiler"),W2=Symbol.for("react.provider"),H2=Symbol.for("react.context"),Px=Symbol.for("react.forward_ref"),Ng=Symbol.for("react.suspense"),Ag=Symbol.for("react.suspense_list"),Tx=Symbol.for("react.memo"),Kr=Symbol.for("react.lazy"),V2=Symbol.for("react.offscreen"),Gy=Symbol.iterator;function Il(t){return t===null||typeof t!="object"?null:(t=Gy&&t[Gy]||t["@@iterator"],typeof t=="function"?t:null)}var Mt=Object.assign,G0;function oc(t){if(G0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);G0=e&&e[1]||""}return`
`+G0+t}var q0=!1;function K0(t,e){if(!t||q0)return"";q0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{q0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oc(t):""}function qT(t){switch(t.tag){case 5:return oc(t.type);case 16:return oc("Lazy");case 13:return oc("Suspense");case 19:return oc("SuspenseList");case 0:case 2:case 15:return t=K0(t.type,!1),t;case 11:return t=K0(t.type.render,!1),t;case 1:return t=K0(t.type,!0),t;default:return""}}function Rg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ho:return"Fragment";case Wo:return"Portal";case Dg:return"Profiler";case Ex:return"StrictMode";case Ng:return"Suspense";case Ag:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H2:return(t.displayName||"Context")+".Consumer";case W2:return(t._context.displayName||"Context")+".Provider";case Px:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tx:return e=t.displayName||null,e!==null?e:Rg(t.type)||"Memo";case Kr:e=t._payload,t=t._init;try{return Rg(t(e))}catch{}}return null}function KT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rg(e);case 8:return e===Ex?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XT(t){var e=Y2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zu(t){t._valueTracker||(t._valueTracker=XT(t))}function G2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Y2(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Th(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Og(t,e){var n=e.checked;return Mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qy(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q2(t,e){e=e.checked,e!=null&&Cx(t,"checked",e,!1)}function Lg(t,e){q2(t,e);var n=wi(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jg(t,e.type,n):e.hasOwnProperty("defaultValue")&&jg(t,e.type,wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ky(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jg(t,e,n){(e!=="number"||Th(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ac=Array.isArray;function aa(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+wi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Fg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ue(91));return Mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ue(92));if(ac(n)){if(1<n.length)throw Error(ue(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wi(n)}}function K2(t,e){var n=wi(e.value),s=wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Qy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function X2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?X2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ed,Q2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ed=ed||document.createElement("div"),ed.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ed.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QT=["Webkit","ms","Moz","O"];Object.keys(kc).forEach(function(t){QT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kc[e]=kc[t]})});function J2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kc.hasOwnProperty(t)&&kc[t]?(""+e).trim():e+"px"}function Z2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=J2(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var JT=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $g(t,e){if(e){if(JT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ue(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ue(62))}}function zg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ug=null;function Mx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wg=null,la=null,ca=null;function Jy(t){if(t=Du(t)){if(typeof Wg!="function")throw Error(ue(280));var e=t.stateNode;e&&(e=Uf(e),Wg(t.stateNode,t.type,e))}}function e_(t){la?ca?ca.push(t):ca=[t]:la=t}function t_(){if(la){var t=la,e=ca;if(ca=la=null,Jy(t),e)for(t=0;t<e.length;t++)Jy(e[t])}}function n_(t,e){return t(e)}function s_(){}var X0=!1;function r_(t,e,n){if(X0)return t(e,n);X0=!0;try{return n_(t,e,n)}finally{X0=!1,(la!==null||ca!==null)&&(s_(),t_())}}function Yc(t,e){var n=t.stateNode;if(n===null)return null;var s=Uf(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ue(231,e,typeof n));return n}var Hg=!1;if(Tr)try{var Dl={};Object.defineProperty(Dl,"passive",{get:function(){Hg=!0}}),window.addEventListener("test",Dl,Dl),window.removeEventListener("test",Dl,Dl)}catch{Hg=!1}function ZT(t,e,n,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var _c=!1,Mh=null,Ih=!1,Vg=null,e4={onError:function(t){_c=!0,Mh=t}};function t4(t,e,n,s,r,i,o,a,l){_c=!1,Mh=null,ZT.apply(e4,arguments)}function n4(t,e,n,s,r,i,o,a,l){if(t4.apply(this,arguments),_c){if(_c){var c=Mh;_c=!1,Mh=null}else throw Error(ue(198));Ih||(Ih=!0,Vg=c)}}function Eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zy(t){if(Eo(t)!==t)throw Error(ue(188))}function s4(t){var e=t.alternate;if(!e){if(e=Eo(t),e===null)throw Error(ue(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Zy(r),t;if(i===s)return Zy(r),e;i=i.sibling}throw Error(ue(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(ue(189))}}if(n.alternate!==s)throw Error(ue(190))}if(n.tag!==3)throw Error(ue(188));return n.stateNode.current===n?t:e}function o_(t){return t=s4(t),t!==null?a_(t):null}function a_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=a_(t);if(e!==null)return e;t=t.sibling}return null}var l_=Kn.unstable_scheduleCallback,ew=Kn.unstable_cancelCallback,r4=Kn.unstable_shouldYield,i4=Kn.unstable_requestPaint,Lt=Kn.unstable_now,o4=Kn.unstable_getCurrentPriorityLevel,Ix=Kn.unstable_ImmediatePriority,c_=Kn.unstable_UserBlockingPriority,Dh=Kn.unstable_NormalPriority,a4=Kn.unstable_LowPriority,u_=Kn.unstable_IdlePriority,Ff=null,Js=null;function l4(t){if(Js&&typeof Js.onCommitFiberRoot=="function")try{Js.onCommitFiberRoot(Ff,t,void 0,(t.current.flags&128)===128)}catch{}}var Is=Math.clz32?Math.clz32:d4,c4=Math.log,u4=Math.LN2;function d4(t){return t>>>=0,t===0?32:31-(c4(t)/u4|0)|0}var td=64,nd=4194304;function lc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nh(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=lc(a):(i&=o,i!==0&&(s=lc(i)))}else o=n&~r,o!==0?s=lc(o):i!==0&&(s=lc(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Is(e),r=1<<n,s|=t[n],e&=~r;return s}function h4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f4(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Is(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=h4(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Yg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d_(){var t=td;return td<<=1,!(td&4194240)&&(td=64),t}function Q0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Is(e),t[e]=n}function p4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Is(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Dx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Is(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var ht=0;function h_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f_,Nx,p_,g_,m_,Gg=!1,sd=[],ci=null,ui=null,di=null,Gc=new Map,qc=new Map,Qr=[],g4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tw(t,e){switch(t){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Gc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(e.pointerId)}}function Nl(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Du(e),e!==null&&Nx(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function m4(t,e,n,s,r){switch(e){case"focusin":return ci=Nl(ci,t,e,n,s,r),!0;case"dragenter":return ui=Nl(ui,t,e,n,s,r),!0;case"mouseover":return di=Nl(di,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Gc.set(i,Nl(Gc.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,qc.set(i,Nl(qc.get(i)||null,t,e,n,s,r)),!0}return!1}function x_(t){var e=Vi(t.target);if(e!==null){var n=Eo(e);if(n!==null){if(e=n.tag,e===13){if(e=i_(n),e!==null){t.blockedOn=e,m_(t.priority,function(){p_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Ug=s,n.target.dispatchEvent(s),Ug=null}else return e=Du(n),e!==null&&Nx(e),t.blockedOn=n,!1;e.shift()}return!0}function nw(t,e,n){eh(t)&&n.delete(e)}function x4(){Gg=!1,ci!==null&&eh(ci)&&(ci=null),ui!==null&&eh(ui)&&(ui=null),di!==null&&eh(di)&&(di=null),Gc.forEach(nw),qc.forEach(nw)}function Al(t,e){t.blockedOn===e&&(t.blockedOn=null,Gg||(Gg=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,x4)))}function Kc(t){function e(r){return Al(r,t)}if(0<sd.length){Al(sd[0],t);for(var n=1;n<sd.length;n++){var s=sd[n];s.blockedOn===t&&(s.blockedOn=null)}}for(ci!==null&&Al(ci,t),ui!==null&&Al(ui,t),di!==null&&Al(di,t),Gc.forEach(e),qc.forEach(e),n=0;n<Qr.length;n++)s=Qr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Qr.length&&(n=Qr[0],n.blockedOn===null);)x_(n),n.blockedOn===null&&Qr.shift()}var ua=Rr.ReactCurrentBatchConfig,Ah=!0;function b4(t,e,n,s){var r=ht,i=ua.transition;ua.transition=null;try{ht=1,Ax(t,e,n,s)}finally{ht=r,ua.transition=i}}function y4(t,e,n,s){var r=ht,i=ua.transition;ua.transition=null;try{ht=4,Ax(t,e,n,s)}finally{ht=r,ua.transition=i}}function Ax(t,e,n,s){if(Ah){var r=qg(t,e,n,s);if(r===null)ap(t,e,s,Rh,n),tw(t,s);else if(m4(r,t,e,n,s))s.stopPropagation();else if(tw(t,s),e&4&&-1<g4.indexOf(t)){for(;r!==null;){var i=Du(r);if(i!==null&&f_(i),i=qg(t,e,n,s),i===null&&ap(t,e,s,Rh,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else ap(t,e,s,null,n)}}var Rh=null;function qg(t,e,n,s){if(Rh=null,t=Mx(s),t=Vi(t),t!==null)if(e=Eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rh=t,null}function b_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o4()){case Ix:return 1;case c_:return 4;case Dh:case a4:return 16;case u_:return 536870912;default:return 16}default:return 16}}var si=null,Rx=null,th=null;function y_(){if(th)return th;var t,e=Rx,n=e.length,s,r="value"in si?si.value:si.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return th=r.slice(t,1<s?1-s:void 0)}function nh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rd(){return!0}function sw(){return!1}function Jn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?rd:sw,this.isPropagationStopped=sw,this}return Mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rd)},persist:function(){},isPersistent:rd}),e}var pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ox=Jn(pl),Iu=Mt({},pl,{view:0,detail:0}),w4=Jn(Iu),J0,Z0,Rl,Bf=Mt({},Iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rl&&(Rl&&t.type==="mousemove"?(J0=t.screenX-Rl.screenX,Z0=t.screenY-Rl.screenY):Z0=J0=0,Rl=t),J0)},movementY:function(t){return"movementY"in t?t.movementY:Z0}}),rw=Jn(Bf),v4=Mt({},Bf,{dataTransfer:0}),S4=Jn(v4),k4=Mt({},Iu,{relatedTarget:0}),ep=Jn(k4),_4=Mt({},pl,{animationName:0,elapsedTime:0,pseudoElement:0}),C4=Jn(_4),E4=Mt({},pl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),P4=Jn(E4),T4=Mt({},pl,{data:0}),iw=Jn(T4),M4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=D4[t])?!!e[t]:!1}function Lx(){return N4}var A4=Mt({},Iu,{key:function(t){if(t.key){var e=M4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?I4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lx,charCode:function(t){return t.type==="keypress"?nh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),R4=Jn(A4),O4=Mt({},Bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ow=Jn(O4),L4=Mt({},Iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lx}),j4=Jn(L4),F4=Mt({},pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),B4=Jn(F4),$4=Mt({},Bf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),z4=Jn($4),U4=[9,13,27,32],jx=Tr&&"CompositionEvent"in window,Cc=null;Tr&&"documentMode"in document&&(Cc=document.documentMode);var W4=Tr&&"TextEvent"in window&&!Cc,w_=Tr&&(!jx||Cc&&8<Cc&&11>=Cc),aw=" ",lw=!1;function v_(t,e){switch(t){case"keyup":return U4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vo=!1;function H4(t,e){switch(t){case"compositionend":return S_(e);case"keypress":return e.which!==32?null:(lw=!0,aw);case"textInput":return t=e.data,t===aw&&lw?null:t;default:return null}}function V4(t,e){if(Vo)return t==="compositionend"||!jx&&v_(t,e)?(t=y_(),th=Rx=si=null,Vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return w_&&e.locale!=="ko"?null:e.data;default:return null}}var Y4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Y4[t.type]:e==="textarea"}function k_(t,e,n,s){e_(s),e=Oh(e,"onChange"),0<e.length&&(n=new Ox("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Ec=null,Xc=null;function G4(t){R_(t,0)}function $f(t){var e=qo(t);if(G2(e))return t}function q4(t,e){if(t==="change")return e}var __=!1;if(Tr){var tp;if(Tr){var np="oninput"in document;if(!np){var uw=document.createElement("div");uw.setAttribute("oninput","return;"),np=typeof uw.oninput=="function"}tp=np}else tp=!1;__=tp&&(!document.documentMode||9<document.documentMode)}function dw(){Ec&&(Ec.detachEvent("onpropertychange",C_),Xc=Ec=null)}function C_(t){if(t.propertyName==="value"&&$f(Xc)){var e=[];k_(e,Xc,t,Mx(t)),r_(G4,e)}}function K4(t,e,n){t==="focusin"?(dw(),Ec=e,Xc=n,Ec.attachEvent("onpropertychange",C_)):t==="focusout"&&dw()}function X4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $f(Xc)}function Q4(t,e){if(t==="click")return $f(e)}function J4(t,e){if(t==="input"||t==="change")return $f(e)}function Z4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ns=typeof Object.is=="function"?Object.is:Z4;function Qc(t,e){if(Ns(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Ig.call(e,r)||!Ns(t[r],e[r]))return!1}return!0}function hw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fw(t,e){var n=hw(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hw(n)}}function E_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?E_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function P_(){for(var t=window,e=Th();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Th(t.document)}return e}function Fx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eM(t){var e=P_(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&E_(n.ownerDocument.documentElement,n)){if(s!==null&&Fx(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=fw(n,i);var o=fw(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tM=Tr&&"documentMode"in document&&11>=document.documentMode,Yo=null,Kg=null,Pc=null,Xg=!1;function pw(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xg||Yo==null||Yo!==Th(s)||(s=Yo,"selectionStart"in s&&Fx(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Pc&&Qc(Pc,s)||(Pc=s,s=Oh(Kg,"onSelect"),0<s.length&&(e=new Ox("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Yo)))}function id(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Go={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionend:id("Transition","TransitionEnd")},sp={},T_={};Tr&&(T_=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function zf(t){if(sp[t])return sp[t];if(!Go[t])return t;var e=Go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in T_)return sp[t]=e[n];return t}var M_=zf("animationend"),I_=zf("animationiteration"),D_=zf("animationstart"),N_=zf("transitionend"),A_=new Map,gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(t,e){A_.set(t,e),Co(e,[t])}for(var rp=0;rp<gw.length;rp++){var ip=gw[rp],nM=ip.toLowerCase(),sM=ip[0].toUpperCase()+ip.slice(1);Ci(nM,"on"+sM)}Ci(M_,"onAnimationEnd");Ci(I_,"onAnimationIteration");Ci(D_,"onAnimationStart");Ci("dblclick","onDoubleClick");Ci("focusin","onFocus");Ci("focusout","onBlur");Ci(N_,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);Co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Co("onBeforeInput",["compositionend","keypress","textInput","paste"]);Co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rM=new Set("cancel close invalid load scroll toggle".split(" ").concat(cc));function mw(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,n4(s,e,void 0,t),t.currentTarget=null}function R_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;mw(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;mw(r,a,c),i=l}}}if(Ih)throw t=Vg,Ih=!1,Vg=null,t}function kt(t,e){var n=e[tm];n===void 0&&(n=e[tm]=new Set);var s=t+"__bubble";n.has(s)||(O_(e,t,2,!1),n.add(s))}function op(t,e,n){var s=0;e&&(s|=4),O_(n,t,s,e)}var od="_reactListening"+Math.random().toString(36).slice(2);function Jc(t){if(!t[od]){t[od]=!0,U2.forEach(function(n){n!=="selectionchange"&&(rM.has(n)||op(n,!1,t),op(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[od]||(e[od]=!0,op("selectionchange",!1,e))}}function O_(t,e,n,s){switch(b_(e)){case 1:var r=b4;break;case 4:r=y4;break;default:r=Ax}n=r.bind(null,e,n,t),r=void 0,!Hg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ap(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Vi(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}r_(function(){var c=i,u=Mx(n),d=[];e:{var f=A_.get(t);if(f!==void 0){var p=Ox,m=t;switch(t){case"keypress":if(nh(n)===0)break e;case"keydown":case"keyup":p=R4;break;case"focusin":m="focus",p=ep;break;case"focusout":m="blur",p=ep;break;case"beforeblur":case"afterblur":p=ep;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=rw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=S4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=j4;break;case M_:case I_:case D_:p=C4;break;case N_:p=B4;break;case"scroll":p=w4;break;case"wheel":p=z4;break;case"copy":case"cut":case"paste":p=P4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ow}var x=(e&4)!==0,v=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var b=c,w;b!==null;){w=b;var y=w.stateNode;if(w.tag===5&&y!==null&&(w=y,g!==null&&(y=Yc(b,g),y!=null&&x.push(Zc(b,y,w)))),v)break;b=b.return}0<x.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Ug&&(m=n.relatedTarget||n.fromElement)&&(Vi(m)||m[Mr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Vi(m):null,m!==null&&(v=Eo(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(x=rw,y="onMouseLeave",g="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(x=ow,y="onPointerLeave",g="onPointerEnter",b="pointer"),v=p==null?f:qo(p),w=m==null?f:qo(m),f=new x(y,b+"leave",p,n,u),f.target=v,f.relatedTarget=w,y=null,Vi(u)===c&&(x=new x(g,b+"enter",m,n,u),x.target=w,x.relatedTarget=v,y=x),v=y,p&&m)t:{for(x=p,g=m,b=0,w=x;w;w=Oo(w))b++;for(w=0,y=g;y;y=Oo(y))w++;for(;0<b-w;)x=Oo(x),b--;for(;0<w-b;)g=Oo(g),w--;for(;b--;){if(x===g||g!==null&&x===g.alternate)break t;x=Oo(x),g=Oo(g)}x=null}else x=null;p!==null&&xw(d,f,p,x,!1),m!==null&&v!==null&&xw(d,v,m,x,!0)}}e:{if(f=c?qo(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=q4;else if(cw(f))if(__)k=J4;else{k=X4;var _=K4}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Q4);if(k&&(k=k(t,c))){k_(d,k,n,u);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&jg(f,"number",f.value)}switch(_=c?qo(c):window,t){case"focusin":(cw(_)||_.contentEditable==="true")&&(Yo=_,Kg=c,Pc=null);break;case"focusout":Pc=Kg=Yo=null;break;case"mousedown":Xg=!0;break;case"contextmenu":case"mouseup":case"dragend":Xg=!1,pw(d,n,u);break;case"selectionchange":if(tM)break;case"keydown":case"keyup":pw(d,n,u)}var E;if(jx)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Vo?v_(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(w_&&n.locale!=="ko"&&(Vo||T!=="onCompositionStart"?T==="onCompositionEnd"&&Vo&&(E=y_()):(si=u,Rx="value"in si?si.value:si.textContent,Vo=!0)),_=Oh(c,T),0<_.length&&(T=new iw(T,t,null,n,u),d.push({event:T,listeners:_}),E?T.data=E:(E=S_(n),E!==null&&(T.data=E)))),(E=W4?H4(t,n):V4(t,n))&&(c=Oh(c,"onBeforeInput"),0<c.length&&(u=new iw("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}R_(d,e)})}function Zc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Oh(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Yc(t,n),i!=null&&s.unshift(Zc(t,i,r)),i=Yc(t,e),i!=null&&s.push(Zc(t,i,r))),t=t.return}return s}function Oo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xw(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=Yc(n,i),l!=null&&o.unshift(Zc(n,l,a))):r||(l=Yc(n,i),l!=null&&o.push(Zc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var iM=/\r\n?/g,oM=/\u0000|\uFFFD/g;function bw(t){return(typeof t=="string"?t:""+t).replace(iM,`
`).replace(oM,"")}function ad(t,e,n){if(e=bw(e),bw(t)!==e&&n)throw Error(ue(425))}function Lh(){}var Qg=null,Jg=null;function Zg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var em=typeof setTimeout=="function"?setTimeout:void 0,aM=typeof clearTimeout=="function"?clearTimeout:void 0,yw=typeof Promise=="function"?Promise:void 0,lM=typeof queueMicrotask=="function"?queueMicrotask:typeof yw<"u"?function(t){return yw.resolve(null).then(t).catch(cM)}:em;function cM(t){setTimeout(function(){throw t})}function lp(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Kc(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Kc(e)}function hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ww(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gl=Math.random().toString(36).slice(2),Xs="__reactFiber$"+gl,eu="__reactProps$"+gl,Mr="__reactContainer$"+gl,tm="__reactEvents$"+gl,uM="__reactListeners$"+gl,dM="__reactHandles$"+gl;function Vi(t){var e=t[Xs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mr]||n[Xs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ww(t);t!==null;){if(n=t[Xs])return n;t=ww(t)}return e}t=n,n=t.parentNode}return null}function Du(t){return t=t[Xs]||t[Mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ue(33))}function Uf(t){return t[eu]||null}var nm=[],Ko=-1;function Ei(t){return{current:t}}function _t(t){0>Ko||(t.current=nm[Ko],nm[Ko]=null,Ko--)}function bt(t,e){Ko++,nm[Ko]=t.current,t.current=e}var vi={},gn=Ei(vi),Rn=Ei(!1),uo=vi;function Ua(t,e){var n=t.type.contextTypes;if(!n)return vi;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function On(t){return t=t.childContextTypes,t!=null}function jh(){_t(Rn),_t(gn)}function vw(t,e,n){if(gn.current!==vi)throw Error(ue(168));bt(gn,e),bt(Rn,n)}function L_(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(ue(108,KT(t)||"Unknown",r));return Mt({},n,s)}function Fh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vi,uo=gn.current,bt(gn,t),bt(Rn,Rn.current),!0}function Sw(t,e,n){var s=t.stateNode;if(!s)throw Error(ue(169));n?(t=L_(t,e,uo),s.__reactInternalMemoizedMergedChildContext=t,_t(Rn),_t(gn),bt(gn,t)):_t(Rn),bt(Rn,n)}var hr=null,Wf=!1,cp=!1;function j_(t){hr===null?hr=[t]:hr.push(t)}function hM(t){Wf=!0,j_(t)}function Pi(){if(!cp&&hr!==null){cp=!0;var t=0,e=ht;try{var n=hr;for(ht=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}hr=null,Wf=!1}catch(r){throw hr!==null&&(hr=hr.slice(t+1)),l_(Ix,Pi),r}finally{ht=e,cp=!1}}return null}var Xo=[],Qo=0,Bh=null,$h=0,cs=[],us=0,ho=null,wr=1,vr="";function Li(t,e){Xo[Qo++]=$h,Xo[Qo++]=Bh,Bh=t,$h=e}function F_(t,e,n){cs[us++]=wr,cs[us++]=vr,cs[us++]=ho,ho=t;var s=wr;t=vr;var r=32-Is(s)-1;s&=~(1<<r),n+=1;var i=32-Is(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,wr=1<<32-Is(e)+r|n<<r|s,vr=i+t}else wr=1<<i|n<<r|s,vr=t}function Bx(t){t.return!==null&&(Li(t,1),F_(t,1,0))}function $x(t){for(;t===Bh;)Bh=Xo[--Qo],Xo[Qo]=null,$h=Xo[--Qo],Xo[Qo]=null;for(;t===ho;)ho=cs[--us],cs[us]=null,vr=cs[--us],cs[us]=null,wr=cs[--us],cs[us]=null}var Hn=null,Wn=null,Ct=!1,Es=null;function B_(t,e){var n=ds(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hn=t,Wn=hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hn=t,Wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ho!==null?{id:wr,overflow:vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ds(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hn=t,Wn=null,!0):!1;default:return!1}}function sm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rm(t){if(Ct){var e=Wn;if(e){var n=e;if(!kw(t,e)){if(sm(t))throw Error(ue(418));e=hi(n.nextSibling);var s=Hn;e&&kw(t,e)?B_(s,n):(t.flags=t.flags&-4097|2,Ct=!1,Hn=t)}}else{if(sm(t))throw Error(ue(418));t.flags=t.flags&-4097|2,Ct=!1,Hn=t}}}function _w(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hn=t}function ld(t){if(t!==Hn)return!1;if(!Ct)return _w(t),Ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zg(t.type,t.memoizedProps)),e&&(e=Wn)){if(sm(t))throw $_(),Error(ue(418));for(;e;)B_(t,e),e=hi(e.nextSibling)}if(_w(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ue(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wn=hi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wn=null}}else Wn=Hn?hi(t.stateNode.nextSibling):null;return!0}function $_(){for(var t=Wn;t;)t=hi(t.nextSibling)}function Wa(){Wn=Hn=null,Ct=!1}function zx(t){Es===null?Es=[t]:Es.push(t)}var fM=Rr.ReactCurrentBatchConfig;function Ol(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ue(309));var s=n.stateNode}if(!s)throw Error(ue(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ue(284));if(!n._owner)throw Error(ue(290,t))}return t}function cd(t,e){throw t=Object.prototype.toString.call(e),Error(ue(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cw(t){var e=t._init;return e(t._payload)}function z_(t){function e(g,b){if(t){var w=g.deletions;w===null?(g.deletions=[b],g.flags|=16):w.push(b)}}function n(g,b){if(!t)return null;for(;b!==null;)e(g,b),b=b.sibling;return null}function s(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function r(g,b){return g=mi(g,b),g.index=0,g.sibling=null,g}function i(g,b,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<b?(g.flags|=2,b):w):(g.flags|=2,b)):(g.flags|=1048576,b)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,b,w,y){return b===null||b.tag!==6?(b=mp(w,g.mode,y),b.return=g,b):(b=r(b,w),b.return=g,b)}function l(g,b,w,y){var k=w.type;return k===Ho?u(g,b,w.props.children,y,w.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Kr&&Cw(k)===b.type)?(y=r(b,w.props),y.ref=Ol(g,b,w),y.return=g,y):(y=ch(w.type,w.key,w.props,null,g.mode,y),y.ref=Ol(g,b,w),y.return=g,y)}function c(g,b,w,y){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=xp(w,g.mode,y),b.return=g,b):(b=r(b,w.children||[]),b.return=g,b)}function u(g,b,w,y,k){return b===null||b.tag!==7?(b=so(w,g.mode,y,k),b.return=g,b):(b=r(b,w),b.return=g,b)}function d(g,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=mp(""+b,g.mode,w),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ju:return w=ch(b.type,b.key,b.props,null,g.mode,w),w.ref=Ol(g,null,b),w.return=g,w;case Wo:return b=xp(b,g.mode,w),b.return=g,b;case Kr:var y=b._init;return d(g,y(b._payload),w)}if(ac(b)||Il(b))return b=so(b,g.mode,w,null),b.return=g,b;cd(g,b)}return null}function f(g,b,w,y){var k=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(g,b,""+w,y);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ju:return w.key===k?l(g,b,w,y):null;case Wo:return w.key===k?c(g,b,w,y):null;case Kr:return k=w._init,f(g,b,k(w._payload),y)}if(ac(w)||Il(w))return k!==null?null:u(g,b,w,y,null);cd(g,w)}return null}function p(g,b,w,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return g=g.get(w)||null,a(b,g,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ju:return g=g.get(y.key===null?w:y.key)||null,l(b,g,y,k);case Wo:return g=g.get(y.key===null?w:y.key)||null,c(b,g,y,k);case Kr:var _=y._init;return p(g,b,w,_(y._payload),k)}if(ac(y)||Il(y))return g=g.get(w)||null,u(b,g,y,k,null);cd(b,y)}return null}function m(g,b,w,y){for(var k=null,_=null,E=b,T=b=0,D=null;E!==null&&T<w.length;T++){E.index>T?(D=E,E=null):D=E.sibling;var C=f(g,E,w[T],y);if(C===null){E===null&&(E=D);break}t&&E&&C.alternate===null&&e(g,E),b=i(C,b,T),_===null?k=C:_.sibling=C,_=C,E=D}if(T===w.length)return n(g,E),Ct&&Li(g,T),k;if(E===null){for(;T<w.length;T++)E=d(g,w[T],y),E!==null&&(b=i(E,b,T),_===null?k=E:_.sibling=E,_=E);return Ct&&Li(g,T),k}for(E=s(g,E);T<w.length;T++)D=p(E,g,T,w[T],y),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?T:D.key),b=i(D,b,T),_===null?k=D:_.sibling=D,_=D);return t&&E.forEach(function(A){return e(g,A)}),Ct&&Li(g,T),k}function x(g,b,w,y){var k=Il(w);if(typeof k!="function")throw Error(ue(150));if(w=k.call(w),w==null)throw Error(ue(151));for(var _=k=null,E=b,T=b=0,D=null,C=w.next();E!==null&&!C.done;T++,C=w.next()){E.index>T?(D=E,E=null):D=E.sibling;var A=f(g,E,C.value,y);if(A===null){E===null&&(E=D);break}t&&E&&A.alternate===null&&e(g,E),b=i(A,b,T),_===null?k=A:_.sibling=A,_=A,E=D}if(C.done)return n(g,E),Ct&&Li(g,T),k;if(E===null){for(;!C.done;T++,C=w.next())C=d(g,C.value,y),C!==null&&(b=i(C,b,T),_===null?k=C:_.sibling=C,_=C);return Ct&&Li(g,T),k}for(E=s(g,E);!C.done;T++,C=w.next())C=p(E,g,T,C.value,y),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?T:C.key),b=i(C,b,T),_===null?k=C:_.sibling=C,_=C);return t&&E.forEach(function(N){return e(g,N)}),Ct&&Li(g,T),k}function v(g,b,w,y){if(typeof w=="object"&&w!==null&&w.type===Ho&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ju:e:{for(var k=w.key,_=b;_!==null;){if(_.key===k){if(k=w.type,k===Ho){if(_.tag===7){n(g,_.sibling),b=r(_,w.props.children),b.return=g,g=b;break e}}else if(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Kr&&Cw(k)===_.type){n(g,_.sibling),b=r(_,w.props),b.ref=Ol(g,_,w),b.return=g,g=b;break e}n(g,_);break}else e(g,_);_=_.sibling}w.type===Ho?(b=so(w.props.children,g.mode,y,w.key),b.return=g,g=b):(y=ch(w.type,w.key,w.props,null,g.mode,y),y.ref=Ol(g,b,w),y.return=g,g=y)}return o(g);case Wo:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(g,b.sibling),b=r(b,w.children||[]),b.return=g,g=b;break e}else{n(g,b);break}else e(g,b);b=b.sibling}b=xp(w,g.mode,y),b.return=g,g=b}return o(g);case Kr:return _=w._init,v(g,b,_(w._payload),y)}if(ac(w))return m(g,b,w,y);if(Il(w))return x(g,b,w,y);cd(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(g,b.sibling),b=r(b,w),b.return=g,g=b):(n(g,b),b=mp(w,g.mode,y),b.return=g,g=b),o(g)):n(g,b)}return v}var Ha=z_(!0),U_=z_(!1),zh=Ei(null),Uh=null,Jo=null,Ux=null;function Wx(){Ux=Jo=Uh=null}function Hx(t){var e=zh.current;_t(zh),t._currentValue=e}function im(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function da(t,e){Uh=t,Ux=Jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nn=!0),t.firstContext=null)}function gs(t){var e=t._currentValue;if(Ux!==t)if(t={context:t,memoizedValue:e,next:null},Jo===null){if(Uh===null)throw Error(ue(308));Jo=t,Uh.dependencies={lanes:0,firstContext:t}}else Jo=Jo.next=t;return e}var Yi=null;function Vx(t){Yi===null?Yi=[t]:Yi.push(t)}function W_(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Vx(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ir(t,s)}function Ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function Yx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fi(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ot&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Ir(t,n)}return r=s.interleaved,r===null?(e.next=e,Vx(s)):(e.next=r.next,r.next=e),s.interleaved=e,Ir(t,n)}function sh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Dx(t,n)}}function Ew(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wh(t,e,n,s){var r=t.updateQueue;Xr=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=r.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,x=a;switch(f=e,p=n,x.tag){case 1:if(m=x.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Mt({},d,f);break e;case 2:Xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);po|=o,t.lanes=o,t.memoizedState=d}}function Pw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(ue(191,r));r.call(s)}}}var Nu={},Zs=Ei(Nu),tu=Ei(Nu),nu=Ei(Nu);function Gi(t){if(t===Nu)throw Error(ue(174));return t}function Gx(t,e){switch(bt(nu,e),bt(tu,t),bt(Zs,Nu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bg(e,t)}_t(Zs),bt(Zs,e)}function Va(){_t(Zs),_t(tu),_t(nu)}function V_(t){Gi(nu.current);var e=Gi(Zs.current),n=Bg(e,t.type);e!==n&&(bt(tu,t),bt(Zs,n))}function qx(t){tu.current===t&&(_t(Zs),_t(tu))}var Pt=Ei(0);function Hh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var up=[];function Kx(){for(var t=0;t<up.length;t++)up[t]._workInProgressVersionPrimary=null;up.length=0}var rh=Rr.ReactCurrentDispatcher,dp=Rr.ReactCurrentBatchConfig,fo=0,Tt=null,Ut=null,Yt=null,Vh=!1,Tc=!1,su=0,pM=0;function ln(){throw Error(ue(321))}function Xx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ns(t[n],e[n]))return!1;return!0}function Qx(t,e,n,s,r,i){if(fo=i,Tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rh.current=t===null||t.memoizedState===null?bM:yM,t=n(s,r),Tc){i=0;do{if(Tc=!1,su=0,25<=i)throw Error(ue(301));i+=1,Yt=Ut=null,e.updateQueue=null,rh.current=wM,t=n(s,r)}while(Tc)}if(rh.current=Yh,e=Ut!==null&&Ut.next!==null,fo=0,Yt=Ut=Tt=null,Vh=!1,e)throw Error(ue(300));return t}function Jx(){var t=su!==0;return su=0,t}function Hs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Tt.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function ms(){if(Ut===null){var t=Tt.alternate;t=t!==null?t.memoizedState:null}else t=Ut.next;var e=Yt===null?Tt.memoizedState:Yt.next;if(e!==null)Yt=e,Ut=t;else{if(t===null)throw Error(ue(310));Ut=t,t={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Yt===null?Tt.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function ru(t,e){return typeof e=="function"?e(t):e}function hp(t){var e=ms(),n=e.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=t;var s=Ut,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((fo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=s):l=l.next=d,Tt.lanes|=u,po|=u}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,Ns(s,e.memoizedState)||(Nn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Tt.lanes|=i,po|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fp(t){var e=ms(),n=e.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Ns(i,e.memoizedState)||(Nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function Y_(){}function G_(t,e){var n=Tt,s=ms(),r=e(),i=!Ns(s.memoizedState,r);if(i&&(s.memoizedState=r,Nn=!0),s=s.queue,Zx(X_.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,iu(9,K_.bind(null,n,s,r,e),void 0,null),Qt===null)throw Error(ue(349));fo&30||q_(n,e,r)}return r}function q_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function K_(t,e,n,s){e.value=n,e.getSnapshot=s,Q_(e)&&J_(t)}function X_(t,e,n){return n(function(){Q_(e)&&J_(t)})}function Q_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ns(t,n)}catch{return!0}}function J_(t){var e=Ir(t,1);e!==null&&Ds(e,t,1,-1)}function Tw(t){var e=Hs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:t},e.queue=t,t=t.dispatch=xM.bind(null,Tt,t),[e.memoizedState,t]}function iu(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Z_(){return ms().memoizedState}function ih(t,e,n,s){var r=Hs();Tt.flags|=t,r.memoizedState=iu(1|e,n,void 0,s===void 0?null:s)}function Hf(t,e,n,s){var r=ms();s=s===void 0?null:s;var i=void 0;if(Ut!==null){var o=Ut.memoizedState;if(i=o.destroy,s!==null&&Xx(s,o.deps)){r.memoizedState=iu(e,n,i,s);return}}Tt.flags|=t,r.memoizedState=iu(1|e,n,i,s)}function Mw(t,e){return ih(8390656,8,t,e)}function Zx(t,e){return Hf(2048,8,t,e)}function eC(t,e){return Hf(4,2,t,e)}function tC(t,e){return Hf(4,4,t,e)}function nC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sC(t,e,n){return n=n!=null?n.concat([t]):null,Hf(4,4,nC.bind(null,e,t),n)}function eb(){}function rC(t,e){var n=ms();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Xx(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function iC(t,e){var n=ms();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Xx(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function oC(t,e,n){return fo&21?(Ns(n,e)||(n=d_(),Tt.lanes|=n,po|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nn=!0),t.memoizedState=n)}function gM(t,e){var n=ht;ht=n!==0&&4>n?n:4,t(!0);var s=dp.transition;dp.transition={};try{t(!1),e()}finally{ht=n,dp.transition=s}}function aC(){return ms().memoizedState}function mM(t,e,n){var s=gi(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},lC(t))cC(e,n);else if(n=W_(t,e,n,s),n!==null){var r=vn();Ds(n,t,s,r),uC(n,e,s)}}function xM(t,e,n){var s=gi(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(lC(t))cC(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Ns(a,o)){var l=e.interleaved;l===null?(r.next=r,Vx(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=W_(t,e,r,s),n!==null&&(r=vn(),Ds(n,t,s,r),uC(n,e,s))}}function lC(t){var e=t.alternate;return t===Tt||e!==null&&e===Tt}function cC(t,e){Tc=Vh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uC(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Dx(t,n)}}var Yh={readContext:gs,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},bM={readContext:gs,useCallback:function(t,e){return Hs().memoizedState=[t,e===void 0?null:e],t},useContext:gs,useEffect:Mw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ih(4194308,4,nC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return ih(4,2,t,e)},useMemo:function(t,e){var n=Hs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Hs();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=mM.bind(null,Tt,t),[s.memoizedState,t]},useRef:function(t){var e=Hs();return t={current:t},e.memoizedState=t},useState:Tw,useDebugValue:eb,useDeferredValue:function(t){return Hs().memoizedState=t},useTransition:function(){var t=Tw(!1),e=t[0];return t=gM.bind(null,t[1]),Hs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Tt,r=Hs();if(Ct){if(n===void 0)throw Error(ue(407));n=n()}else{if(n=e(),Qt===null)throw Error(ue(349));fo&30||q_(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Mw(X_.bind(null,s,i,t),[t]),s.flags|=2048,iu(9,K_.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Hs(),e=Qt.identifierPrefix;if(Ct){var n=vr,s=wr;n=(s&~(1<<32-Is(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=su++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yM={readContext:gs,useCallback:rC,useContext:gs,useEffect:Zx,useImperativeHandle:sC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:iC,useReducer:hp,useRef:Z_,useState:function(){return hp(ru)},useDebugValue:eb,useDeferredValue:function(t){var e=ms();return oC(e,Ut.memoizedState,t)},useTransition:function(){var t=hp(ru)[0],e=ms().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:G_,useId:aC,unstable_isNewReconciler:!1},wM={readContext:gs,useCallback:rC,useContext:gs,useEffect:Zx,useImperativeHandle:sC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:iC,useReducer:fp,useRef:Z_,useState:function(){return fp(ru)},useDebugValue:eb,useDeferredValue:function(t){var e=ms();return Ut===null?e.memoizedState=t:oC(e,Ut.memoizedState,t)},useTransition:function(){var t=fp(ru)[0],e=ms().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:G_,useId:aC,unstable_isNewReconciler:!1};function Ss(t,e){if(t&&t.defaultProps){e=Mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function om(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vf={isMounted:function(t){return(t=t._reactInternals)?Eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=vn(),r=gi(t),i=_r(s,r);i.payload=e,n!=null&&(i.callback=n),e=fi(t,i,r),e!==null&&(Ds(e,t,r,s),sh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=vn(),r=gi(t),i=_r(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fi(t,i,r),e!==null&&(Ds(e,t,r,s),sh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),s=gi(t),r=_r(n,s);r.tag=2,e!=null&&(r.callback=e),e=fi(t,r,s),e!==null&&(Ds(e,t,s,n),sh(e,t,s))}};function Iw(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Qc(n,s)||!Qc(r,i):!0}function dC(t,e,n){var s=!1,r=vi,i=e.contextType;return typeof i=="object"&&i!==null?i=gs(i):(r=On(e)?uo:gn.current,s=e.contextTypes,i=(s=s!=null)?Ua(t,r):vi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vf,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Dw(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Vf.enqueueReplaceState(e,e.state,null)}function am(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Yx(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=gs(i):(i=On(e)?uo:gn.current,r.context=Ua(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(om(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Vf.enqueueReplaceState(r,r.state,null),Wh(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ya(t,e){try{var n="",s=e;do n+=qT(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function pp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vM=typeof WeakMap=="function"?WeakMap:Map;function hC(t,e,n){n=_r(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){qh||(qh=!0,bm=s),lm(t,e)},n}function fC(t,e,n){n=_r(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){lm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lm(t,e),typeof s!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Nw(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new vM;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=OM.bind(null,t,e,n),e.then(t,t))}function Aw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rw(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_r(-1,1),e.tag=2,fi(n,e,1))),n.lanes|=1),t)}var SM=Rr.ReactCurrentOwner,Nn=!1;function wn(t,e,n,s){e.child=t===null?U_(e,null,n,s):Ha(e,t.child,n,s)}function Ow(t,e,n,s,r){n=n.render;var i=e.ref;return da(e,r),s=Qx(t,e,n,s,i,r),n=Jx(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Dr(t,e,r)):(Ct&&n&&Bx(e),e.flags|=1,wn(t,e,s,r),e.child)}function Lw(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!lb(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,pC(t,e,i,s,r)):(t=ch(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qc,n(o,s)&&t.ref===e.ref)return Dr(t,e,r)}return e.flags|=1,t=mi(i,s),t.ref=e.ref,t.return=e,e.child=t}function pC(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Qc(i,s)&&t.ref===e.ref)if(Nn=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Nn=!0);else return e.lanes=t.lanes,Dr(t,e,r)}return cm(t,e,n,s,r)}function gC(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(ea,zn),zn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,bt(ea,zn),zn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,bt(ea,zn),zn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,bt(ea,zn),zn|=s;return wn(t,e,r,n),e.child}function mC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cm(t,e,n,s,r){var i=On(n)?uo:gn.current;return i=Ua(e,i),da(e,r),n=Qx(t,e,n,s,i,r),s=Jx(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Dr(t,e,r)):(Ct&&s&&Bx(e),e.flags|=1,wn(t,e,n,r),e.child)}function jw(t,e,n,s,r){if(On(n)){var i=!0;Fh(e)}else i=!1;if(da(e,r),e.stateNode===null)oh(t,e),dC(e,n,s),am(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gs(c):(c=On(n)?uo:gn.current,c=Ua(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&Dw(e,o,s,c),Xr=!1;var f=e.memoizedState;o.state=f,Wh(e,s,o,r),l=e.memoizedState,a!==s||f!==l||Rn.current||Xr?(typeof u=="function"&&(om(e,n,u,s),l=e.memoizedState),(a=Xr||Iw(e,n,a,s,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,H_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ss(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gs(l):(l=On(n)?uo:gn.current,l=Ua(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Dw(e,o,s,l),Xr=!1,f=e.memoizedState,o.state=f,Wh(e,s,o,r);var m=e.memoizedState;a!==d||f!==m||Rn.current||Xr?(typeof p=="function"&&(om(e,n,p,s),m=e.memoizedState),(c=Xr||Iw(e,n,c,s,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),o.props=s,o.state=m,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return um(t,e,n,s,i,r)}function um(t,e,n,s,r,i){mC(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Sw(e,n,!1),Dr(t,e,i);s=e.stateNode,SM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Ha(e,t.child,null,i),e.child=Ha(e,null,a,i)):wn(t,e,a,i),e.memoizedState=s.state,r&&Sw(e,n,!0),e.child}function xC(t){var e=t.stateNode;e.pendingContext?vw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vw(t,e.context,!1),Gx(t,e.containerInfo)}function Fw(t,e,n,s,r){return Wa(),zx(r),e.flags|=256,wn(t,e,n,s),e.child}var dm={dehydrated:null,treeContext:null,retryLane:0};function hm(t){return{baseLanes:t,cachePool:null,transitions:null}}function bC(t,e,n){var s=e.pendingProps,r=Pt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),bt(Pt,r&1),t===null)return rm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=qf(o,s,0,null),t=so(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hm(n),e.memoizedState=dm,t):tb(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return kM(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=mi(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=mi(a,i):(i=so(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?hm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dm,s}return i=t.child,t=i.sibling,s=mi(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function tb(t,e){return e=qf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ud(t,e,n,s){return s!==null&&zx(s),Ha(e,t.child,null,n),t=tb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kM(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=pp(Error(ue(422))),ud(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=qf({mode:"visible",children:s.children},r,0,null),i=so(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Ha(e,t.child,null,o),e.child.memoizedState=hm(o),e.memoizedState=dm,i);if(!(e.mode&1))return ud(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(ue(419)),s=pp(i,s,void 0),ud(t,e,o,s)}if(a=(o&t.childLanes)!==0,Nn||a){if(s=Qt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ir(t,r),Ds(s,t,r,-1))}return ab(),s=pp(Error(ue(421))),ud(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=LM.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Wn=hi(r.nextSibling),Hn=e,Ct=!0,Es=null,t!==null&&(cs[us++]=wr,cs[us++]=vr,cs[us++]=ho,wr=t.id,vr=t.overflow,ho=e),e=tb(e,s.children),e.flags|=4096,e)}function Bw(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),im(t.return,e,n)}function gp(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function yC(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(wn(t,e,s.children,n),s=Pt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bw(t,n,e);else if(t.tag===19)Bw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(bt(Pt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Hh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),gp(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Hh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}gp(e,!0,n,null,i);break;case"together":gp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),po|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ue(153));if(e.child!==null){for(t=e.child,n=mi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _M(t,e,n){switch(e.tag){case 3:xC(e),Wa();break;case 5:V_(e);break;case 1:On(e.type)&&Fh(e);break;case 4:Gx(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;bt(zh,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(bt(Pt,Pt.current&1),e.flags|=128,null):n&e.child.childLanes?bC(t,e,n):(bt(Pt,Pt.current&1),t=Dr(t,e,n),t!==null?t.sibling:null);bt(Pt,Pt.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return yC(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),bt(Pt,Pt.current),s)break;return null;case 22:case 23:return e.lanes=0,gC(t,e,n)}return Dr(t,e,n)}var wC,fm,vC,SC;wC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fm=function(){};vC=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Gi(Zs.current);var i=null;switch(n){case"input":r=Og(t,r),s=Og(t,s),i=[];break;case"select":r=Mt({},r,{value:void 0}),s=Mt({},s,{value:void 0}),i=[];break;case"textarea":r=Fg(t,r),s=Fg(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Lh)}$g(n,s);var o;n=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&kt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};SC=function(t,e,n,s){n!==s&&(e.flags|=4)};function Ll(t,e){if(!Ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function CM(t,e,n){var s=e.pendingProps;switch($x(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(e),null;case 1:return On(e.type)&&jh(),cn(e),null;case 3:return s=e.stateNode,Va(),_t(Rn),_t(gn),Kx(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ld(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Es!==null&&(vm(Es),Es=null))),fm(t,e),cn(e),null;case 5:qx(e);var r=Gi(nu.current);if(n=e.type,t!==null&&e.stateNode!=null)vC(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(ue(166));return cn(e),null}if(t=Gi(Zs.current),ld(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Xs]=e,s[eu]=i,t=(e.mode&1)!==0,n){case"dialog":kt("cancel",s),kt("close",s);break;case"iframe":case"object":case"embed":kt("load",s);break;case"video":case"audio":for(r=0;r<cc.length;r++)kt(cc[r],s);break;case"source":kt("error",s);break;case"img":case"image":case"link":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"input":qy(s,i),kt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},kt("invalid",s);break;case"textarea":Xy(s,i),kt("invalid",s)}$g(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&ad(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ad(s.textContent,a,t),r=["children",""+a]):Hc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&kt("scroll",s)}switch(n){case"input":Zu(s),Ky(s,i,!0);break;case"textarea":Zu(s),Qy(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Lh)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=X2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Xs]=e,t[eu]=s,wC(t,e,!1,!1),e.stateNode=t;e:{switch(o=zg(n,s),n){case"dialog":kt("cancel",t),kt("close",t),r=s;break;case"iframe":case"object":case"embed":kt("load",t),r=s;break;case"video":case"audio":for(r=0;r<cc.length;r++)kt(cc[r],t);r=s;break;case"source":kt("error",t),r=s;break;case"img":case"image":case"link":kt("error",t),kt("load",t),r=s;break;case"details":kt("toggle",t),r=s;break;case"input":qy(t,s),r=Og(t,s),kt("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Mt({},s,{value:void 0}),kt("invalid",t);break;case"textarea":Xy(t,s),r=Fg(t,s),kt("invalid",t);break;default:r=s}$g(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Z2(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Q2(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vc(t,l):typeof l=="number"&&Vc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&kt("scroll",t):l!=null&&Cx(t,i,l,o))}switch(n){case"input":Zu(t),Ky(t,s,!1);break;case"textarea":Zu(t),Qy(t);break;case"option":s.value!=null&&t.setAttribute("value",""+wi(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?aa(t,!!s.multiple,i,!1):s.defaultValue!=null&&aa(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Lh)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cn(e),null;case 6:if(t&&e.stateNode!=null)SC(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(ue(166));if(n=Gi(nu.current),Gi(Zs.current),ld(e)){if(s=e.stateNode,n=e.memoizedProps,s[Xs]=e,(i=s.nodeValue!==n)&&(t=Hn,t!==null))switch(t.tag){case 3:ad(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ad(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Xs]=e,e.stateNode=s}return cn(e),null;case 13:if(_t(Pt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ct&&Wn!==null&&e.mode&1&&!(e.flags&128))$_(),Wa(),e.flags|=98560,i=!1;else if(i=ld(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(ue(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ue(317));i[Xs]=e}else Wa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cn(e),i=!1}else Es!==null&&(vm(Es),Es=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Pt.current&1?Ht===0&&(Ht=3):ab())),e.updateQueue!==null&&(e.flags|=4),cn(e),null);case 4:return Va(),fm(t,e),t===null&&Jc(e.stateNode.containerInfo),cn(e),null;case 10:return Hx(e.type._context),cn(e),null;case 17:return On(e.type)&&jh(),cn(e),null;case 19:if(_t(Pt),i=e.memoizedState,i===null)return cn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Ll(i,!1);else{if(Ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hh(t),o!==null){for(e.flags|=128,Ll(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return bt(Pt,Pt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Lt()>Ga&&(e.flags|=128,s=!0,Ll(i,!1),e.lanes=4194304)}else{if(!s)if(t=Hh(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ll(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ct)return cn(e),null}else 2*Lt()-i.renderingStartTime>Ga&&n!==1073741824&&(e.flags|=128,s=!0,Ll(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Lt(),e.sibling=null,n=Pt.current,bt(Pt,s?n&1|2:n&1),e):(cn(e),null);case 22:case 23:return ob(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?zn&1073741824&&(cn(e),e.subtreeFlags&6&&(e.flags|=8192)):cn(e),null;case 24:return null;case 25:return null}throw Error(ue(156,e.tag))}function EM(t,e){switch($x(e),e.tag){case 1:return On(e.type)&&jh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Va(),_t(Rn),_t(gn),Kx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qx(e),null;case 13:if(_t(Pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ue(340));Wa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _t(Pt),null;case 4:return Va(),null;case 10:return Hx(e.type._context),null;case 22:case 23:return ob(),null;case 24:return null;default:return null}}var dd=!1,fn=!1,PM=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Zo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Dt(t,e,s)}else n.current=null}function pm(t,e,n){try{n()}catch(s){Dt(t,e,s)}}var $w=!1;function TM(t,e){if(Qg=Ah,t=P_(),Fx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==i||s!==0&&d.nodeType!==3||(l=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===i&&++u===s&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jg={focusedElem:t,selectionRange:n},Ah=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,v=m.memoizedState,g=e.stateNode,b=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:Ss(e.type,x),v);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(y){Dt(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return m=$w,$w=!1,m}function Mc(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&pm(e,n,i)}r=r.next}while(r!==s)}}function Yf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function gm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kC(t){var e=t.alternate;e!==null&&(t.alternate=null,kC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xs],delete e[eu],delete e[tm],delete e[uM],delete e[dM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _C(t){return t.tag===5||t.tag===3||t.tag===4}function zw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_C(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lh));else if(s!==4&&(t=t.child,t!==null))for(mm(t,e,n),t=t.sibling;t!==null;)mm(t,e,n),t=t.sibling}function xm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(xm(t,e,n),t=t.sibling;t!==null;)xm(t,e,n),t=t.sibling}var Zt=null,Cs=!1;function Or(t,e,n){for(n=n.child;n!==null;)CC(t,e,n),n=n.sibling}function CC(t,e,n){if(Js&&typeof Js.onCommitFiberUnmount=="function")try{Js.onCommitFiberUnmount(Ff,n)}catch{}switch(n.tag){case 5:fn||Zo(n,e);case 6:var s=Zt,r=Cs;Zt=null,Or(t,e,n),Zt=s,Cs=r,Zt!==null&&(Cs?(t=Zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Zt.removeChild(n.stateNode));break;case 18:Zt!==null&&(Cs?(t=Zt,n=n.stateNode,t.nodeType===8?lp(t.parentNode,n):t.nodeType===1&&lp(t,n),Kc(t)):lp(Zt,n.stateNode));break;case 4:s=Zt,r=Cs,Zt=n.stateNode.containerInfo,Cs=!0,Or(t,e,n),Zt=s,Cs=r;break;case 0:case 11:case 14:case 15:if(!fn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pm(n,e,o),r=r.next}while(r!==s)}Or(t,e,n);break;case 1:if(!fn&&(Zo(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Dt(n,e,a)}Or(t,e,n);break;case 21:Or(t,e,n);break;case 22:n.mode&1?(fn=(s=fn)||n.memoizedState!==null,Or(t,e,n),fn=s):Or(t,e,n);break;default:Or(t,e,n)}}function Uw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new PM),e.forEach(function(s){var r=jM.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function ys(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Zt=a.stateNode,Cs=!1;break e;case 3:Zt=a.stateNode.containerInfo,Cs=!0;break e;case 4:Zt=a.stateNode.containerInfo,Cs=!0;break e}a=a.return}if(Zt===null)throw Error(ue(160));CC(i,o,r),Zt=null,Cs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Dt(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EC(e,t),e=e.sibling}function EC(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ys(e,t),js(t),s&4){try{Mc(3,t,t.return),Yf(3,t)}catch(x){Dt(t,t.return,x)}try{Mc(5,t,t.return)}catch(x){Dt(t,t.return,x)}}break;case 1:ys(e,t),js(t),s&512&&n!==null&&Zo(n,n.return);break;case 5:if(ys(e,t),js(t),s&512&&n!==null&&Zo(n,n.return),t.flags&32){var r=t.stateNode;try{Vc(r,"")}catch(x){Dt(t,t.return,x)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&q2(r,i),zg(a,o);var c=zg(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Z2(r,d):u==="dangerouslySetInnerHTML"?Q2(r,d):u==="children"?Vc(r,d):Cx(r,u,d,c)}switch(a){case"input":Lg(r,i);break;case"textarea":K2(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?aa(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?aa(r,!!i.multiple,i.defaultValue,!0):aa(r,!!i.multiple,i.multiple?[]:"",!1))}r[eu]=i}catch(x){Dt(t,t.return,x)}}break;case 6:if(ys(e,t),js(t),s&4){if(t.stateNode===null)throw Error(ue(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(x){Dt(t,t.return,x)}}break;case 3:if(ys(e,t),js(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Kc(e.containerInfo)}catch(x){Dt(t,t.return,x)}break;case 4:ys(e,t),js(t);break;case 13:ys(e,t),js(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(rb=Lt())),s&4&&Uw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(fn=(c=fn)||u,ys(e,t),fn=c):ys(e,t),js(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ee=t,u=t.child;u!==null;){for(d=Ee=u;Ee!==null;){switch(f=Ee,p=f.child,f.tag){case 0:case 11:case 14:case 15:Mc(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(x){Dt(s,n,x)}}break;case 5:Zo(f,f.return);break;case 22:if(f.memoizedState!==null){Hw(d);continue}}p!==null?(p.return=f,Ee=p):Hw(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=J2("display",o))}catch(x){Dt(t,t.return,x)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){Dt(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ys(e,t),js(t),s&4&&Uw(t);break;case 21:break;default:ys(e,t),js(t)}}function js(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_C(n)){var s=n;break e}n=n.return}throw Error(ue(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Vc(r,""),s.flags&=-33);var i=zw(t);xm(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=zw(t);mm(t,a,o);break;default:throw Error(ue(161))}}catch(l){Dt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MM(t,e,n){Ee=t,PC(t)}function PC(t,e,n){for(var s=(t.mode&1)!==0;Ee!==null;){var r=Ee,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||dd;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||fn;a=dd;var c=fn;if(dd=o,(fn=l)&&!c)for(Ee=r;Ee!==null;)o=Ee,l=o.child,o.tag===22&&o.memoizedState!==null?Vw(r):l!==null?(l.return=o,Ee=l):Vw(r);for(;i!==null;)Ee=i,PC(i),i=i.sibling;Ee=r,dd=a,fn=c}Ww(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Ee=i):Ww(t)}}function Ww(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fn||Yf(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!fn)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Ss(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Pw(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Kc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}fn||e.flags&512&&gm(e)}catch(f){Dt(e,e.return,f)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function Hw(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function Vw(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yf(4,e)}catch(l){Dt(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Dt(e,r,l)}}var i=e.return;try{gm(e)}catch(l){Dt(e,i,l)}break;case 5:var o=e.return;try{gm(e)}catch(l){Dt(e,o,l)}}}catch(l){Dt(e,e.return,l)}if(e===t){Ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ee=a;break}Ee=e.return}}var IM=Math.ceil,Gh=Rr.ReactCurrentDispatcher,nb=Rr.ReactCurrentOwner,ps=Rr.ReactCurrentBatchConfig,ot=0,Qt=null,zt=null,rn=0,zn=0,ea=Ei(0),Ht=0,ou=null,po=0,Gf=0,sb=0,Ic=null,Mn=null,rb=0,Ga=1/0,dr=null,qh=!1,bm=null,pi=null,hd=!1,ri=null,Kh=0,Dc=0,ym=null,ah=-1,lh=0;function vn(){return ot&6?Lt():ah!==-1?ah:ah=Lt()}function gi(t){return t.mode&1?ot&2&&rn!==0?rn&-rn:fM.transition!==null?(lh===0&&(lh=d_()),lh):(t=ht,t!==0||(t=window.event,t=t===void 0?16:b_(t.type)),t):1}function Ds(t,e,n,s){if(50<Dc)throw Dc=0,ym=null,Error(ue(185));Mu(t,n,s),(!(ot&2)||t!==Qt)&&(t===Qt&&(!(ot&2)&&(Gf|=n),Ht===4&&Jr(t,rn)),Ln(t,s),n===1&&ot===0&&!(e.mode&1)&&(Ga=Lt()+500,Wf&&Pi()))}function Ln(t,e){var n=t.callbackNode;f4(t,e);var s=Nh(t,t===Qt?rn:0);if(s===0)n!==null&&ew(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&ew(n),e===1)t.tag===0?hM(Yw.bind(null,t)):j_(Yw.bind(null,t)),lM(function(){!(ot&6)&&Pi()}),n=null;else{switch(h_(s)){case 1:n=Ix;break;case 4:n=c_;break;case 16:n=Dh;break;case 536870912:n=u_;break;default:n=Dh}n=OC(n,TC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function TC(t,e){if(ah=-1,lh=0,ot&6)throw Error(ue(327));var n=t.callbackNode;if(ha()&&t.callbackNode!==n)return null;var s=Nh(t,t===Qt?rn:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Xh(t,s);else{e=s;var r=ot;ot|=2;var i=IC();(Qt!==t||rn!==e)&&(dr=null,Ga=Lt()+500,no(t,e));do try{AM();break}catch(a){MC(t,a)}while(!0);Wx(),Gh.current=i,ot=r,zt!==null?e=0:(Qt=null,rn=0,e=Ht)}if(e!==0){if(e===2&&(r=Yg(t),r!==0&&(s=r,e=wm(t,r))),e===1)throw n=ou,no(t,0),Jr(t,s),Ln(t,Lt()),n;if(e===6)Jr(t,s);else{if(r=t.current.alternate,!(s&30)&&!DM(r)&&(e=Xh(t,s),e===2&&(i=Yg(t),i!==0&&(s=i,e=wm(t,i))),e===1))throw n=ou,no(t,0),Jr(t,s),Ln(t,Lt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(ue(345));case 2:ji(t,Mn,dr);break;case 3:if(Jr(t,s),(s&130023424)===s&&(e=rb+500-Lt(),10<e)){if(Nh(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){vn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=em(ji.bind(null,t,Mn,dr),e);break}ji(t,Mn,dr);break;case 4:if(Jr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Is(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Lt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*IM(s/1960))-s,10<s){t.timeoutHandle=em(ji.bind(null,t,Mn,dr),s);break}ji(t,Mn,dr);break;case 5:ji(t,Mn,dr);break;default:throw Error(ue(329))}}}return Ln(t,Lt()),t.callbackNode===n?TC.bind(null,t):null}function wm(t,e){var n=Ic;return t.current.memoizedState.isDehydrated&&(no(t,e).flags|=256),t=Xh(t,e),t!==2&&(e=Mn,Mn=n,e!==null&&vm(e)),t}function vm(t){Mn===null?Mn=t:Mn.push.apply(Mn,t)}function DM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Ns(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jr(t,e){for(e&=~sb,e&=~Gf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Is(e),s=1<<n;t[n]=-1,e&=~s}}function Yw(t){if(ot&6)throw Error(ue(327));ha();var e=Nh(t,0);if(!(e&1))return Ln(t,Lt()),null;var n=Xh(t,e);if(t.tag!==0&&n===2){var s=Yg(t);s!==0&&(e=s,n=wm(t,s))}if(n===1)throw n=ou,no(t,0),Jr(t,e),Ln(t,Lt()),n;if(n===6)throw Error(ue(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ji(t,Mn,dr),Ln(t,Lt()),null}function ib(t,e){var n=ot;ot|=1;try{return t(e)}finally{ot=n,ot===0&&(Ga=Lt()+500,Wf&&Pi())}}function go(t){ri!==null&&ri.tag===0&&!(ot&6)&&ha();var e=ot;ot|=1;var n=ps.transition,s=ht;try{if(ps.transition=null,ht=1,t)return t()}finally{ht=s,ps.transition=n,ot=e,!(ot&6)&&Pi()}}function ob(){zn=ea.current,_t(ea)}function no(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aM(n)),zt!==null)for(n=zt.return;n!==null;){var s=n;switch($x(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&jh();break;case 3:Va(),_t(Rn),_t(gn),Kx();break;case 5:qx(s);break;case 4:Va();break;case 13:_t(Pt);break;case 19:_t(Pt);break;case 10:Hx(s.type._context);break;case 22:case 23:ob()}n=n.return}if(Qt=t,zt=t=mi(t.current,null),rn=zn=e,Ht=0,ou=null,sb=Gf=po=0,Mn=Ic=null,Yi!==null){for(e=0;e<Yi.length;e++)if(n=Yi[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}Yi=null}return t}function MC(t,e){do{var n=zt;try{if(Wx(),rh.current=Yh,Vh){for(var s=Tt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Vh=!1}if(fo=0,Yt=Ut=Tt=null,Tc=!1,su=0,nb.current=null,n===null||n.return===null){Ht=1,ou=e,zt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=rn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Aw(o);if(p!==null){p.flags&=-257,Rw(p,o,a,i,e),p.mode&1&&Nw(i,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var x=new Set;x.add(l),e.updateQueue=x}else m.add(l);break e}else{if(!(e&1)){Nw(i,c,e),ab();break e}l=Error(ue(426))}}else if(Ct&&a.mode&1){var v=Aw(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Rw(v,o,a,i,e),zx(Ya(l,a));break e}}i=l=Ya(l,a),Ht!==4&&(Ht=2),Ic===null?Ic=[i]:Ic.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=hC(i,l,e);Ew(i,g);break e;case 1:a=l;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(pi===null||!pi.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var y=fC(i,a,e);Ew(i,y);break e}}i=i.return}while(i!==null)}NC(n)}catch(k){e=k,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function IC(){var t=Gh.current;return Gh.current=Yh,t===null?Yh:t}function ab(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Qt===null||!(po&268435455)&&!(Gf&268435455)||Jr(Qt,rn)}function Xh(t,e){var n=ot;ot|=2;var s=IC();(Qt!==t||rn!==e)&&(dr=null,no(t,e));do try{NM();break}catch(r){MC(t,r)}while(!0);if(Wx(),ot=n,Gh.current=s,zt!==null)throw Error(ue(261));return Qt=null,rn=0,Ht}function NM(){for(;zt!==null;)DC(zt)}function AM(){for(;zt!==null&&!r4();)DC(zt)}function DC(t){var e=RC(t.alternate,t,zn);t.memoizedProps=t.pendingProps,e===null?NC(t):zt=e,nb.current=null}function NC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EM(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ht=6,zt=null;return}}else if(n=CM(n,e,zn),n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Ht===0&&(Ht=5)}function ji(t,e,n){var s=ht,r=ps.transition;try{ps.transition=null,ht=1,RM(t,e,n,s)}finally{ps.transition=r,ht=s}return null}function RM(t,e,n,s){do ha();while(ri!==null);if(ot&6)throw Error(ue(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ue(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(p4(t,i),t===Qt&&(zt=Qt=null,rn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hd||(hd=!0,OC(Dh,function(){return ha(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ps.transition,ps.transition=null;var o=ht;ht=1;var a=ot;ot|=4,nb.current=null,TM(t,n),EC(n,t),eM(Jg),Ah=!!Qg,Jg=Qg=null,t.current=n,MM(n),i4(),ot=a,ht=o,ps.transition=i}else t.current=n;if(hd&&(hd=!1,ri=t,Kh=r),i=t.pendingLanes,i===0&&(pi=null),l4(n.stateNode),Ln(t,Lt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(qh)throw qh=!1,t=bm,bm=null,t;return Kh&1&&t.tag!==0&&ha(),i=t.pendingLanes,i&1?t===ym?Dc++:(Dc=0,ym=t):Dc=0,Pi(),null}function ha(){if(ri!==null){var t=h_(Kh),e=ps.transition,n=ht;try{if(ps.transition=null,ht=16>t?16:t,ri===null)var s=!1;else{if(t=ri,ri=null,Kh=0,ot&6)throw Error(ue(331));var r=ot;for(ot|=4,Ee=t.current;Ee!==null;){var i=Ee,o=i.child;if(Ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ee=c;Ee!==null;){var u=Ee;switch(u.tag){case 0:case 11:case 15:Mc(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ee=d;else for(;Ee!==null;){u=Ee;var f=u.sibling,p=u.return;if(kC(u),u===c){Ee=null;break}if(f!==null){f.return=p,Ee=f;break}Ee=p}}}var m=i.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(x!==null)}}Ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ee=o;else e:for(;Ee!==null;){if(i=Ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mc(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Ee=g;break e}Ee=i.return}}var b=t.current;for(Ee=b;Ee!==null;){o=Ee;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ee=w;else e:for(o=b;Ee!==null;){if(a=Ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yf(9,a)}}catch(k){Dt(a,a.return,k)}if(a===o){Ee=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,Ee=y;break e}Ee=a.return}}if(ot=r,Pi(),Js&&typeof Js.onPostCommitFiberRoot=="function")try{Js.onPostCommitFiberRoot(Ff,t)}catch{}s=!0}return s}finally{ht=n,ps.transition=e}}return!1}function Gw(t,e,n){e=Ya(n,e),e=hC(t,e,1),t=fi(t,e,1),e=vn(),t!==null&&(Mu(t,1,e),Ln(t,e))}function Dt(t,e,n){if(t.tag===3)Gw(t,t,n);else for(;e!==null;){if(e.tag===3){Gw(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(pi===null||!pi.has(s))){t=Ya(n,t),t=fC(e,t,1),e=fi(e,t,1),t=vn(),e!==null&&(Mu(e,1,t),Ln(e,t));break}}e=e.return}}function OM(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,Qt===t&&(rn&n)===n&&(Ht===4||Ht===3&&(rn&130023424)===rn&&500>Lt()-rb?no(t,0):sb|=n),Ln(t,e)}function AC(t,e){e===0&&(t.mode&1?(e=nd,nd<<=1,!(nd&130023424)&&(nd=4194304)):e=1);var n=vn();t=Ir(t,e),t!==null&&(Mu(t,e,n),Ln(t,n))}function LM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),AC(t,n)}function jM(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(ue(314))}s!==null&&s.delete(e),AC(t,n)}var RC;RC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rn.current)Nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nn=!1,_M(t,e,n);Nn=!!(t.flags&131072)}else Nn=!1,Ct&&e.flags&1048576&&F_(e,$h,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;oh(t,e),t=e.pendingProps;var r=Ua(e,gn.current);da(e,n),r=Qx(null,e,s,t,r,n);var i=Jx();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,On(s)?(i=!0,Fh(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Yx(e),r.updater=Vf,e.stateNode=r,r._reactInternals=e,am(e,s,t,n),e=um(null,e,s,!0,i,n)):(e.tag=0,Ct&&i&&Bx(e),wn(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(oh(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=BM(s),t=Ss(s,t),r){case 0:e=cm(null,e,s,t,n);break e;case 1:e=jw(null,e,s,t,n);break e;case 11:e=Ow(null,e,s,t,n);break e;case 14:e=Lw(null,e,s,Ss(s.type,t),n);break e}throw Error(ue(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ss(s,r),cm(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ss(s,r),jw(t,e,s,r,n);case 3:e:{if(xC(e),t===null)throw Error(ue(387));s=e.pendingProps,i=e.memoizedState,r=i.element,H_(t,e),Wh(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Ya(Error(ue(423)),e),e=Fw(t,e,s,n,r);break e}else if(s!==r){r=Ya(Error(ue(424)),e),e=Fw(t,e,s,n,r);break e}else for(Wn=hi(e.stateNode.containerInfo.firstChild),Hn=e,Ct=!0,Es=null,n=U_(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wa(),s===r){e=Dr(t,e,n);break e}wn(t,e,s,n)}e=e.child}return e;case 5:return V_(e),t===null&&rm(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Zg(s,r)?o=null:i!==null&&Zg(s,i)&&(e.flags|=32),mC(t,e),wn(t,e,o,n),e.child;case 6:return t===null&&rm(e),null;case 13:return bC(t,e,n);case 4:return Gx(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ha(e,null,s,n):wn(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ss(s,r),Ow(t,e,s,r,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,bt(zh,s._currentValue),s._currentValue=o,i!==null)if(Ns(i.value,o)){if(i.children===r.children&&!Rn.current){e=Dr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=_r(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),im(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ue(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),im(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,da(e,n),r=gs(r),s=s(r),e.flags|=1,wn(t,e,s,n),e.child;case 14:return s=e.type,r=Ss(s,e.pendingProps),r=Ss(s.type,r),Lw(t,e,s,r,n);case 15:return pC(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ss(s,r),oh(t,e),e.tag=1,On(s)?(t=!0,Fh(e)):t=!1,da(e,n),dC(e,s,r),am(e,s,r,n),um(null,e,s,!0,t,n);case 19:return yC(t,e,n);case 22:return gC(t,e,n)}throw Error(ue(156,e.tag))};function OC(t,e){return l_(t,e)}function FM(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(t,e,n,s){return new FM(t,e,n,s)}function lb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BM(t){if(typeof t=="function")return lb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Px)return 11;if(t===Tx)return 14}return 2}function mi(t,e){var n=t.alternate;return n===null?(n=ds(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ch(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")lb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ho:return so(n.children,r,i,e);case Ex:o=8,r|=8;break;case Dg:return t=ds(12,n,e,r|2),t.elementType=Dg,t.lanes=i,t;case Ng:return t=ds(13,n,e,r),t.elementType=Ng,t.lanes=i,t;case Ag:return t=ds(19,n,e,r),t.elementType=Ag,t.lanes=i,t;case V2:return qf(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W2:o=10;break e;case H2:o=9;break e;case Px:o=11;break e;case Tx:o=14;break e;case Kr:o=16,s=null;break e}throw Error(ue(130,t==null?t:typeof t,""))}return e=ds(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function so(t,e,n,s){return t=ds(7,t,s,e),t.lanes=n,t}function qf(t,e,n,s){return t=ds(22,t,s,e),t.elementType=V2,t.lanes=n,t.stateNode={isHidden:!1},t}function mp(t,e,n){return t=ds(6,t,null,e),t.lanes=n,t}function xp(t,e,n){return e=ds(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $M(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q0(0),this.expirationTimes=Q0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q0(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function cb(t,e,n,s,r,i,o,a,l){return t=new $M(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ds(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yx(i),t}function zM(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wo,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function LC(t){if(!t)return vi;t=t._reactInternals;e:{if(Eo(t)!==t||t.tag!==1)throw Error(ue(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(On(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ue(171))}if(t.tag===1){var n=t.type;if(On(n))return L_(t,n,e)}return e}function jC(t,e,n,s,r,i,o,a,l){return t=cb(n,s,!0,t,r,i,o,a,l),t.context=LC(null),n=t.current,s=vn(),r=gi(n),i=_r(s,r),i.callback=e??null,fi(n,i,r),t.current.lanes=r,Mu(t,r,s),Ln(t,s),t}function Kf(t,e,n,s){var r=e.current,i=vn(),o=gi(r);return n=LC(n),e.context===null?e.context=n:e.pendingContext=n,e=_r(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=fi(r,e,o),t!==null&&(Ds(t,r,o,i),sh(t,r,o)),o}function Qh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ub(t,e){qw(t,e),(t=t.alternate)&&qw(t,e)}function UM(){return null}var FC=typeof reportError=="function"?reportError:function(t){console.error(t)};function db(t){this._internalRoot=t}Xf.prototype.render=db.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ue(409));Kf(t,e,null,null)};Xf.prototype.unmount=db.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;go(function(){Kf(null,t,null,null)}),e[Mr]=null}};function Xf(t){this._internalRoot=t}Xf.prototype.unstable_scheduleHydration=function(t){if(t){var e=g_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qr.length&&e!==0&&e<Qr[n].priority;n++);Qr.splice(n,0,t),n===0&&x_(t)}};function hb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kw(){}function WM(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=Qh(o);i.call(c)}}var o=jC(e,s,t,0,null,!1,!1,"",Kw);return t._reactRootContainer=o,t[Mr]=o.current,Jc(t.nodeType===8?t.parentNode:t),go(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=Qh(l);a.call(c)}}var l=cb(t,0,!1,null,null,!1,!1,"",Kw);return t._reactRootContainer=l,t[Mr]=l.current,Jc(t.nodeType===8?t.parentNode:t),go(function(){Kf(e,l,n,s)}),l}function Jf(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Qh(o);a.call(l)}}Kf(e,o,t,r)}else o=WM(n,e,t,r,s);return Qh(o)}f_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lc(e.pendingLanes);n!==0&&(Dx(e,n|1),Ln(e,Lt()),!(ot&6)&&(Ga=Lt()+500,Pi()))}break;case 13:go(function(){var s=Ir(t,1);if(s!==null){var r=vn();Ds(s,t,1,r)}}),ub(t,1)}};Nx=function(t){if(t.tag===13){var e=Ir(t,134217728);if(e!==null){var n=vn();Ds(e,t,134217728,n)}ub(t,134217728)}};p_=function(t){if(t.tag===13){var e=gi(t),n=Ir(t,e);if(n!==null){var s=vn();Ds(n,t,e,s)}ub(t,e)}};g_=function(){return ht};m_=function(t,e){var n=ht;try{return ht=t,e()}finally{ht=n}};Wg=function(t,e,n){switch(e){case"input":if(Lg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Uf(s);if(!r)throw Error(ue(90));G2(s),Lg(s,r)}}}break;case"textarea":K2(t,n);break;case"select":e=n.value,e!=null&&aa(t,!!n.multiple,e,!1)}};n_=ib;s_=go;var HM={usingClientEntryPoint:!1,Events:[Du,qo,Uf,e_,t_,ib]},jl={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VM={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=o_(t),t===null?null:t.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||UM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{Ff=fd.inject(VM),Js=fd}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HM;Qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hb(e))throw Error(ue(200));return zM(t,e,null,n)};Qn.createRoot=function(t,e){if(!hb(t))throw Error(ue(299));var n=!1,s="",r=FC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=cb(t,1,!1,null,null,n,!1,s,r),t[Mr]=e.current,Jc(t.nodeType===8?t.parentNode:t),new db(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ue(188)):(t=Object.keys(t).join(","),Error(ue(268,t)));return t=o_(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return go(t)};Qn.hydrate=function(t,e,n){if(!Qf(e))throw Error(ue(200));return Jf(null,t,e,!0,n)};Qn.hydrateRoot=function(t,e,n){if(!hb(t))throw Error(ue(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=FC;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jC(e,null,t,1,n??null,r,!1,i,o),t[Mr]=e.current,Jc(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Xf(e)};Qn.render=function(t,e,n){if(!Qf(e))throw Error(ue(200));return Jf(null,t,e,!1,n)};Qn.unmountComponentAtNode=function(t){if(!Qf(t))throw Error(ue(40));return t._reactRootContainer?(go(function(){Jf(null,null,t,!1,function(){t._reactRootContainer=null,t[Mr]=null})}),!0):!1};Qn.unstable_batchedUpdates=ib;Qn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Qf(n))throw Error(ue(200));if(t==null||t._reactInternals===void 0)throw Error(ue(38));return Jf(t,e,n,!1,s)};Qn.version="18.3.1-next-f1338f8080-20240426";function BC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BC)}catch(t){console.error(t)}}BC(),B2.exports=Qn;var Ti=B2.exports;const YM=P2(Ti);var Xw=Ti;Mg.createRoot=Xw.createRoot,Mg.hydrateRoot=Xw.hydrateRoot;class fb{constructor(e,n=3,s=3e4){ie(this,"baseURL");ie(this,"timeout");ie(this,"maxRetries");this.baseURL=e.replace(/\/$/,""),this.maxRetries=n,this.timeout=s}async do(e){const n=Date.now();let s=null;for(let r=1;r<=this.maxRetries;r++)try{return{...await this.doRequest(e),duration:Date.now()-n}}catch(i){if(s=i,this.isNonceError(i))throw i;if(r<this.maxRetries){const o=r*1e3;await this.delay(o)}}throw new Error(`Request failed after ${this.maxRetries} attempts: ${s==null?void 0:s.message}`)}async doRequest(e){const n=`${this.baseURL}${e.path}`,s={"Content-Type":"application/json",Accept:"application/json, */*",...e.headers},r={method:e.method,headers:s,signal:AbortSignal.timeout(this.timeout)};e.body&&e.method!=="GET"?r.body=JSON.stringify(e.body):e.method==="GET"&&(r.body=void 0);const i=await fetch(n,r);let o;const a=i.headers.get("content-type");if(a!=null&&a.includes("application/json"))try{o=await i.json()}catch{o=await i.text()}else o=await i.text();if(i.status>=400)throw new Error(`HTTP ${i.status}: ${JSON.stringify(o)}`);return{statusCode:i.status,body:o,headers:i.headers}}isNonceError(e){const n=(e==null?void 0:e.message)||"";return n.toLowerCase().includes("nonce")||n.includes("InvalidNonce")||n.includes("NonceError")}delay(e){return new Promise(n=>setTimeout(n,e))}async get(e,n){return this.do({method:"GET",path:e,headers:n})}async post(e,n,s){return this.do({method:"POST",path:e,body:n,headers:s})}async put(e,n,s){return this.do({method:"PUT",path:e,body:n,headers:s})}async delete(e,n){return this.do({method:"DELETE",path:e,headers:n})}getBaseURL(){return this.baseURL}setTimeout(e){this.timeout=e}getTimeout(){return this.timeout}}const fa=1e8;function ct(t){const e=typeof t=="string"?parseFloat(t):t;if(isNaN(e))throw new Error(`Invalid value for satoshi conversion: ${t}`);if(e<0)throw new Error(`Negative values not allowed for satoshi conversion: ${t}`);return BigInt(Math.floor(e*fa)).toString()}function ve(t){const e=BigInt(t);return Number(e)/fa}function $C(t){if(t<0)throw new Error(`Negative values not allowed: ${t}`);return Math.floor(t*fa)}function Qw(t){try{return BigInt(t)>=0n}catch{return!1}}function GM(t){return t.map(ct)}function qM(t){return t.map(ve)}function Jw(t){return`0x${(typeof t=="string"?parseInt(t,10):t).toString(16)}`}let Fl={instance:null,module:null},KM=null;async function XM(){try{if(window.Go)console.log("wasm_exec.js already loaded");else{console.log("Loading wasm_exec.js...");const a=["/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.21.0/misc/wasm/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.20.0/misc/wasm/wasm_exec.js","https://unpkg.com/@go-wasm/wasm_exec@latest/wasm_exec.js"];let l=!1,c=null;for(const u of a)try{console.log(`Trying to load wasm_exec.js from: ${u}`),await new Promise((d,f)=>{const p=document.createElement("script");p.src=u,p.async=!0,p.onload=()=>{console.log(`Successfully loaded wasm_exec.js from: ${u}`),d()},p.onerror=()=>{f(new Error(`Failed to load from ${u}`))},document.head.appendChild(p)}),l=!0;break}catch(d){console.warn(`Failed to load from ${u}:`,d==null?void 0:d.message),c=d,document.head.querySelectorAll(`script[src="${u}"]`).forEach(p=>p.remove())}if(!l)throw new Error(`Failed to load wasm_exec.js from all sources. Last error: ${(c==null?void 0:c.message)||"Unknown error"}. Please ensure wasm_exec.js is available. You can download it from: https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.js`);console.log("wasm_exec.js loaded successfully")}const t=window.Go;if(!t)throw new Error("Go runtime not available. Make sure wasm_exec.js is loaded.");console.log("Go runtime available");const e=new t;KM=e,console.log("Go instance created");const n="/morm_signer.wasm";console.log("Loading WASM from:",n);let s;try{const a=await fetch(n);if(console.log("WASM fetch response:",{status:a.status,statusText:a.statusText,ok:a.ok,url:a.url}),!a.ok){const l=await a.text().catch(()=>"Unable to read error response");throw new Error(`Failed to load WASM from ${n}: ${a.status} ${a.statusText}. Make sure the morm_signer.wasm file is available in the public directory.`)}s=await a.arrayBuffer(),console.log("WASM file loaded successfully, size:",s.byteLength,"bytes")}catch(a){throw console.error("WASM fetch failed:",a),new Error(`Failed to fetch WASM file: ${(a==null?void 0:a.message)||a}. The file should be accessible at ${window.location.origin}${n}`)}console.log("Instantiating WASM module...");let r;try{r=await WebAssembly.instantiate(s,e.importObject),console.log("WASM module instantiated successfully")}catch(a){throw console.error("Failed to instantiate WASM:",a),new Error(`Failed to instantiate WASM module: ${(a==null?void 0:a.message)||a}. The WASM file may be corrupted or incompatible.`)}Fl.instance=r.instance,Fl.module=r.module,console.log("Running Go program..."),console.log("Window object before Go run:",Object.keys(window).filter(a=>typeof window[a]=="function"&&(a.startsWith("morm")||a.startsWith("derive")||a.startsWith("generate")||a==="Go")));try{e.run(Fl.instance),console.log("Go program started (run() completed)")}catch(a){throw console.error("Failed to run Go program:",a),new Error(`Failed to run Go program: ${(a==null?void 0:a.message)||a}. The WASM module may not be compatible with the current Go runtime.`)}console.log("Waiting for Go initialization and function exports...");const i=10;let o=[];for(let a=1;a<=i;a++){const l=Math.min(a*200,2e3);await new Promise(u=>setTimeout(u,l));const c=Object.keys(window).filter(u=>typeof window[u]=="function");if(o=c.filter(u=>u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u.startsWith("verify")||u.startsWith("map")||u.startsWith("validate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"),console.log(`Attempt ${a}/${i}:`,{waitTime:`${l}ms`,allWindowFunctions:c.length,exportedFunctions:o,sampleWindowKeys:c.slice(0,20)}),o.length>0){console.log(" Go functions found!",o);break}a===i&&(console.warn(" No expected functions found. All window functions:",c.sort()),console.warn(" Check if functions are exported with different names or if there are Go runtime errors"))}if(o.length===0){const a=[],l=Object.keys(window);if(console.error("Debugging info:",{totalWindowKeys:l.length,allFunctions:l.filter(c=>typeof window[c]=="function"),hasGo:typeof window.Go=="function",wasmInstance:Fl.instance!==null,wasmModule:Fl.module!==null}),typeof window.InitWASMSigner=="function"){console.log("Found InitWASMSigner function, calling it...");try{window.InitWASMSigner(),await new Promise(u=>setTimeout(u,500));const c=Object.keys(window).filter(u=>typeof window[u]=="function"&&(u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"));c.length>0&&(console.log(" Functions found after InitWASMSigner!",c),o=c)}catch(c){console.error("Failed to call InitWASMSigner:",c)}}if(o.length===0)throw new Error(`Go functions not exported after initialization.

ROOT CAUSE: The Go main() function in main_wasm.go does not call InitWASMSigner(), which is required to export functions via js.Global().Set().

SOLUTION: The Go code needs to be fixed. In main_wasm.go, the main() function should call:
  InitWASMSigner(CreateTestnetDomain()) // or appropriate domain

Current status:
- WASM file loaded: 
- Go runtime loaded: ${typeof window.Go=="function"?"":""}
- Go program run: 
- Functions exported: 

Check the browser console for detailed debugging information.`)}return console.log("WASM module loaded and initialized successfully"),!0}catch(t){throw console.error("Failed to load WASM module:",t),new Error((t==null?void 0:t.message)||`Failed to load WASM module: ${String(t)}`)}}class QM{constructor(){ie(this,"isInitialized",!1);ie(this,"wasmLoaded",!1)}async initialize(){try{return this.wasmLoaded=await XM(),this.isInitialized=this.wasmLoaded,this.wasmLoaded}catch(e){throw console.error("Failed to initialize MormSigner:",e),new Error((e==null?void 0:e.message)||"Failed to initialize WASM module")}}isReady(){return this.isInitialized&&this.wasmLoaded&&typeof window.mormGenerateEthereumKeypair=="function"&&typeof window.GenerateSingleSignature=="function"&&typeof window.GenerateMultisignSignatures=="function"&&typeof window.GetSupportedSignatureTypes=="function"&&typeof window.IsSignatureTypeSupported=="function"}async generateAddress(e,n=0){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=window.deriveAddress(e,n);return typeof s=="string"?{success:!0,address:s,index:n,mnemonic:e.substring(0,20)+"..."}:s&&s.error?{success:!1,error:s.error}:{success:!1,error:"Failed to derive address"}}catch(s){return console.error("Failed to generate address:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async generateMnemonic(e=12){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.generateMnemonic(e);return typeof n=="string"?{success:!0,mnemonic:n}:n&&n.error?{success:!1,error:n.error}:{success:!1,error:"Failed to generate mnemonic"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async generateKeypair(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const e=window.mormGenerateEthereumKeypair();return e.error?{success:!1,error:e.error}:{success:!0,privateKey:e.privateKey,address:e.address}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async signMessage(e,n,s={}){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=(s.useEIP712,"ECDSA_LEGACY"),i=window.generateSignature(r,e,n);return typeof i=="string"?{success:!0,signature:i,message:n,options:s}:i&&i.error?{success:!1,error:i.error}:{success:!1,error:"Failed to generate signature"}}catch(r){return console.error("Failed to sign message:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async signDeposit(e,n,s,r={}){const i={...r,depositMode:!0,walletAddress:n,amount:s},o=JSON.stringify({action:"deposit",owner:n,amount:s,nonce:r.nonce||Date.now(),deadline:r.deadline||Date.now()+36e5}),a=await this.signMessage(e,o,i);return{success:a.success,signature:a.signature,message:a.message,address:n,options:a.options,error:a.error}}async signEIP712(e,n,s={}){const r={...s,useEIP712:!0};return this.signMessage(e,n,r)}async prepareAgentSign(e){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.mormPrepareAgentSign(e.owner,e.agent,e.expiresInDays,e.permissions,e.nonce);return n&&n.error?{success:!1,error:n.error}:{success:!0,typedData:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async signAgentApproval(e,n){const s=await this.prepareAgentSign(n);if(!s.success||!s.typedData)return s;const r=JSON.stringify({action:"agent::approve",wallet:n.owner,agent:n.agent,agentName:n.agentName||"",expiresInDays:n.expiresInDays,permissions:n.permissions,nonce:n.nonce,deadline:Date.now()+n.expiresInDays*24*60*60*1e3}),i=await this.signMessage(e,r,{useEIP712:!0});return i.success?{success:!0,typedData:s.typedData,signature:i.signature}:{success:!1,error:i.error}}async verifySignature(e,n,s){if(!this.isReady())throw new Error("MormSigner not initialized");try{const r=window.verifySignature(e,n,s);return typeof r=="boolean"?r:!1}catch(r){return console.error("Failed to verify signature:",r),!1}}mapAlgorithm(e){if(!this.isReady())return"ECDSA_LEGACY";try{return window.mapAlgorithm(e)}catch(n){return console.error("Failed to map algorithm:",n),"ECDSA_LEGACY"}}validateNonce(e,n){if(!this.isReady())return!1;try{return window.validateNonce(e,n)}catch(s){return console.error("Failed to validate nonce:",s),!1}}getStatus(){return{initialized:this.isInitialized,wasmLoaded:this.wasmLoaded,ready:this.isReady()}}async generateSingleSignature(e,n,s){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateSingleSignature(e,n,s);return r.error?{success:!1,error:r.error}:{success:!0,signature:r.signature}}catch(r){return console.error("Failed to generate single signature:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async generateMultisignSignatures(e,n,s=!1){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateMultisignSignatures(e,n,s);if(r.error)return{success:!1,error:r.error};let i=null;if(r.tx)try{i=JSON.parse(r.tx)}catch(o){console.warn("Failed to parse updated transaction JSON:",o)}return{success:!0,tx:i,txJSON:r.tx}}catch(r){return console.error("Failed to generate multisign signatures:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}getSupportedSignatureTypes(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{return{success:!0,types:window.GetSupportedSignatureTypes()}}catch(e){return console.error("Failed to get supported signature types:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}isSignatureTypeSupported(e){if(!this.isReady())return!1;try{return window.IsSignatureTypeSupported(e)}catch(n){return console.error("Failed to check signature type support:",n),!1}}}const We=new QM,JM=6e4,Zw=100,bp=24*60*60*1e3,yp=1;class zC{constructor(e){ie(this,"infoClient");ie(this,"onChainState",new Map);ie(this,"offChainNonces",new Map);ie(this,"syncTimers",new Map);this.infoClient=e}getOrCreateState(e){const n=e.toLowerCase();let s=this.onChainState.get(n);return s||(s={confirmed:0,pending:[],lastSync:0,mu:!1},this.onChainState.set(n,s)),s}async acquireLock(e){for(;e.mu;)await new Promise(n=>setTimeout(n,10));e.mu=!0}releaseLock(e){e.mu=!1}async syncWithCore(e){const n=this.getOrCreateState(e),s=Date.now();if(!(s-n.lastSync<JM))try{const r=await this.infoClient.getNonceStatus(e,!1),i=(r==null?void 0:r.next_nonce)!==void 0?typeof r.next_nonce=="string"?parseInt(r.next_nonce,10):r.next_nonce:0;n.confirmed=i,n.lastSync=s}catch(r){console.warn(`[NonceManager] Failed to sync with core for ${e}:`,r)}}async getNonce(e,n="latest"){const s=e.toLowerCase(),r=this.getOrCreateState(s);if(await this.syncWithCore(s),n==="latest")return r.confirmed;{const i=r.pending.length>0?Math.max(...r.pending):r.confirmed;return Math.max(r.confirmed,i)}}async validateNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{if(s||await this.syncWithCore(r),i.confirmed===0&&n<yp)throw new Error(`nonce too low for new account: got ${n}, minimum ${yp}`);if(i.confirmed>0&&n<=i.confirmed)throw new Error(`nonce too low: got ${n}, confirmed ${i.confirmed}`);if(i.pending.includes(n))throw new Error(`nonce already pending: ${n}`);if(i.pending.length>=Zw)throw new Error(`pending nonce limit reached: max ${Zw} pending nonces`);if(s){const o=this.offChainNonces.get(r);if(o){const a=o.get(n);if(a){const l=Date.now();if(l-a<bp)throw new Error(`nonce already used (off-chain): ${n}, expires in ${Math.floor((bp-(l-a))/1e3)}s`);o.delete(n)}}}i.pending.push(n),i.pending.sort((o,a)=>o-a)}finally{this.releaseLock(i)}}async commitNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){let a=this.offChainNonces.get(r);a||(a=new Map,this.offChainNonces.set(r,a)),a.set(n,Date.now())}else if(n===i.confirmed+1)for(i.confirmed=n;i.pending.length>0&&i.pending[0]===i.confirmed+1;){const a=i.pending.shift();i.confirmed=a}}finally{this.releaseLock(i)}}async rejectNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){const a=this.offChainNonces.get(r);a&&a.delete(n)}}finally{this.releaseLock(i)}}async getExpectedNextNonce(e,n=!1){const s=e.toLowerCase();await this.syncWithCore(s);const r=this.getOrCreateState(s),i=r.pending.length>0?Math.max(...r.pending):r.confirmed,o=Math.max(r.confirmed+1,i+1),a=o===0?yp:o;if(n)try{await this.validateNonce(s,a,!1)}catch(l){console.warn(`[NonceManager] Failed to reserve nonce ${a}:`,l.message)}return{next_nonce:a,reserved:n,timestamp:Date.now()}}cleanupExpiredOffChainNonces(){const e=Date.now();for(const[n,s]of this.offChainNonces.entries()){for(const[r,i]of s.entries())e-i>=bp&&s.delete(r);s.size===0&&this.offChainNonces.delete(n)}}resetNonce(e){const n=e.toLowerCase();this.onChainState.delete(n),this.offChainNonces.delete(n);const s=this.syncTimers.get(n);s&&(clearInterval(s),this.syncTimers.delete(n))}getState(e){const n=e.toLowerCase();return this.onChainState.get(n)}}class pn{constructor(e){ie(this,"httpClient");ie(this,"sessionToken");this.httpClient=new fb(e.baseURL),this.sessionToken=e.sessionToken}setSessionToken(e){this.sessionToken=e}getHeaders(){const e={Accept:"application/json, */*"};return this.sessionToken&&(e.Authorization=`Bearer ${this.sessionToken}`),e}async getMarkets(){const n=(await this.httpClient.get("/market/v1/all",this.getHeaders())).body;return Array.isArray(n)?n:n&&typeof n=="object"&&"markets"in n?n.markets:[]}async getMarketsWithFilters(e,n){let s="/market/v1/all";const r=[];e&&r.push(`filter=${e}`),n&&r.push("active_only=true"),r.length>0&&(s+="?"+r.join("&"));const o=(await this.httpClient.get(s,this.getHeaders())).body;return Array.isArray(o)?o:o&&typeof o=="object"&&"markets"in o?o.markets:[]}async getMarketByID(e){return(await this.httpClient.get(`/market/v1/market/${e}`,this.getHeaders())).body}async getMarketByMoniker(e){return(await this.httpClient.get(`/market/v1/market/by-moniker/${e}`,this.getHeaders())).body}async getMarketStats(e){return(await this.httpClient.get(`/market/v1/market/${e}/stats`,this.getHeaders())).body}async getTicker(e){return this.getMarketStats(e)}async getExchangeInfo(){return(await this.httpClient.get("/market/v1/exchangeInfo",this.getHeaders())).body}async getOrderbook(e,n=!0,s=20){let r=`/clob/v1/orderbook/${e}`,i=20;s>0&&s<100&&(i=s),r+=`?depth=${i}`;const a=(await this.httpClient.get(r,this.getHeaders())).body;return n&&a&&(a.bids&&Array.isArray(a.bids)&&(a.bids=a.bids.map(([l,c])=>[ve(l),ve(c)])),a.asks&&Array.isArray(a.asks)&&(a.asks=a.asks.map(([l,c])=>[ve(l),ve(c)]))),a}async getMarketTrades(e,n){let s=`/clob/v1/trades?market_id=${e}`;n&&n>0&&(s+=`&limit=${n}`);const r=await this.httpClient.get(s,this.getHeaders());console.debug("[InfoClient] getMarketTrades response for marketId:",e,"response:",r.body);const i=r.body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:(console.warn("[InfoClient] getMarketTrades: Unexpected response structure:",r.body),[])}async getRecentTrades(e,n=100){return this.getMarketTrades(e,n)}async getTrades(e,n){let s=`/clob/v1/trades?symbol=${e}`;n&&n>0&&(s+=`&limit=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:[]}async getAggTrades(e,n,s,r){let i=`/market/v1/aggTrades?symbol=${e}`;return n&&n>0&&(i+=`&limit=${n}`),s&&s>0&&(i+=`&startTime=${s}`),r&&r>0&&(i+=`&endTime=${r}`),(await this.httpClient.get(i,this.getHeaders())).body}async getKlines(e,n,s,r,i){let o=`/clob/v1/klines?symbol=${e}&interval=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l)?l:[]}async getContinuousKlines(e,n,s,r,i,o){let a=`/market/v1/continuousKlines?pair=${e}&contractType=${n}&interval=${s}`;return r&&r>0&&(a+=`&limit=${r}`),i&&i>0&&(a+=`&startTime=${i}`),o&&o>0&&(a+=`&endTime=${o}`),(await this.httpClient.get(a,this.getHeaders())).body}async getPremiumIndex(e){let n="/market/v1/premiumIndex";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getFundingRate(e,n,s,r){let i="/market/v1/fundingRate";const o=[];e&&o.push(`symbol=${e}`),n&&n>0&&o.push(`limit=${n}`),s&&s>0&&o.push(`startTime=${s}`),r&&r>0&&o.push(`endTime=${r}`),o.length>0&&(i+="?"+o.join("&"));const l=(await this.httpClient.get(i,this.getHeaders())).body;return Array.isArray(l)?l:l&&typeof l=="object"&&"data"in l&&Array.isArray(l.data)?l.data:l?[l]:[]}async getFundingInfo(){const n=(await this.httpClient.get("/market/v1/fundingInfo",this.getHeaders())).body;return Array.isArray(n)?n:[]}async getDeliveryPrice(e){return(await this.httpClient.get(`/market/v1/deliveryPrice?pair=${e}`,this.getHeaders())).body}async getOpenInterest(e){return(await this.httpClient.get(`/market/v1/openInterest?symbol=${e}`,this.getHeaders())).body}async getTopLongShortPositionRatio(e,n,s,r,i){let o=`/market/v1/topLongShortPositionRatio?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getGlobalLongShortAccountRatio(e,n,s,r,i){let o=`/market/v1/globalLongShortAccountRatio?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getTicker24hr(e){let n="/market/v1/moniker/24hr";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getTickerPrice(e){let n="/market/v1/moniker/price";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getOrderbookMoniker(e){let n="/market/v1/moniker/bookTicker";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getBasis(e,n,s,r,i){let o=`/market/v1/basis?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getIndexInfo(e){let n="/market/v1/indexInfo";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getAssetIndex(e){let n="/market/v1/assetIndex";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getConstituents(e){return(await this.httpClient.get(`/market/v1/constituents?symbol=${e}`,this.getHeaders())).body}async getTWAP(e,n){return(await this.httpClient.get(`/market/v1/twap?symbol=${e}&duration=${n}`,this.getHeaders())).body}async getPositions(e,n){if(!e)throw new Error("walletAddress is required for getPositions");let s=`/bucket/v1/address/${e}/positions`;n!==void 0&&(s+=`?active_only=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return Array.isArray(i)?i:i&&typeof i=="object"&&"positions"in i&&Array.isArray(i.positions)?i.positions:[]}async getBalance(e,n){let s=`/bank/v1/balance/${e}?asset=${n}`;return(await this.httpClient.get(s,this.getHeaders())).body}async getBalances(e){const s=(await this.httpClient.get(`/bank/v1/balances/${e}`,this.getHeaders())).body;return s&&typeof s=="object"&&"balances"in s&&Array.isArray(s.balances)?s.balances:[]}async getBalanceDecimal(e,n){const s=await this.getBalance(e,n);if(s&&typeof s=="object"){const r={...s};return r.balance&&(r.balance=ve(r.balance)),r.available_balance&&(r.available=ve(r.available_balance),r.available_balance=ve(r.available_balance)),r.available&&typeof r.available=="string"&&(r.available=ve(r.available)),r.locked_balance&&(r.locked=ve(r.locked_balance),r.locked_balance=ve(r.locked_balance)),r.locked&&typeof r.locked=="string"&&(r.locked=ve(r.locked)),r}return s}async getOrders(e,n){let s=`/clob/v1/address/orders?address=${encodeURIComponent(e)}`;return n&&(s+=`&asset_pair=${encodeURIComponent(n)}`),(await this.httpClient.get(s,this.getHeaders())).body}async getOrder(e){return(await this.httpClient.get(`/clob/v1/order/${e}`,this.getHeaders())).body}async getOrderHistory(e){return(await this.httpClient.get(`/clob/v1/address/orders/history?address=${e}`,this.getHeaders())).body}async getUserTrades(e,n){let s=`/clob/v1/address/trades?address=${e}`;n&&(s+=`&asset_pair=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:[]}async getTradeHistory(e,n){return this.getUserTrades(e,n)}async getPosition(e,n){let s=`/clob/v1/address/position?address=${e}`;n&&(s+=`&asset_pair=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"positions"in i&&Array.isArray(i.positions)?i.positions:[]}async getBuckets(e){var s;const n=await this.httpClient.get(`/bucket/v1/address/${e}/buckets`,this.getHeaders());return(s=n.body)!=null&&s.buckets&&Array.isArray(n.body.buckets)?n.body.buckets:[]}async getBucket(e){return(await this.httpClient.get(`/bucket/v1/bucket/${e}`,this.getHeaders())).body}async getMarketData(e){return(await this.httpClient.get(`/clob/v1/market/data?asset_pair=${e}`,this.getHeaders())).body}async getMarketCandles(e,n,s){const i=(await this.httpClient.get(`/clob/v1/market/candles?asset_pair=${e}&interval=${n}&limit=${s}`,this.getHeaders())).body;return Array.isArray(i)?i:[]}async getNonceStatus(e,n=!1){let s=`/router/v1/nonce/status/${e}`;return n&&(s+="?reserve=true"),(await this.httpClient.get(s,this.getHeaders())).body}async getSupportedActions(){return(await this.httpClient.get("/router/v1/tx/supported-actions",this.getHeaders())).body}async validateAction(e){return(await this.httpClient.get(`/router/v1/tx/validate-action?action=${encodeURIComponent(e)}`,this.getHeaders())).body}async getHealthSummary(){return(await this.httpClient.get("/router/v1/health/summary",this.getHeaders())).body}async getHealthDaemons(){return(await this.httpClient.get("/router/v1/health/daemons",this.getHeaders())).body}async getHealthBucket(){return(await this.httpClient.get("/router/v1/health/bucket",this.getHeaders())).body}async getHealthOracle(){return(await this.httpClient.get("/router/v1/health/oracle",this.getHeaders())).body}async getServerTime(){return(await this.httpClient.get("/router/v1/time",this.getHeaders())).body}async getMetricsTPS(){return(await this.httpClient.get("/router/v1/metrics/tps",this.getHeaders())).body}async getMetricsLatency(){return(await this.httpClient.get("/router/v1/metrics/latency",this.getHeaders())).body}}function ZM(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["nonce too low","nonce too high","nonce already used","nonce already pending","nonce invalid","nonce expired","nonce mismatch","invalid nonce","nonce out of order"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function eI(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["signature verification failed","invalid signature","unauthenticated","signature mismatch","signature invalid"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function tI(t){if(!t)return[!1,!1];const e=ZM(t),n=eI(t);return[e,n]}function pb(t){const[e,n]=tI(t);return e||n}const UC="6.16.0";async function gb(t){const e=Object.keys(t);return(await Promise.all(e.map(s=>Promise.resolve(t[s])))).reduce((s,r,i)=>(s[e[i]]=r,s),{})}function Vn(t,e,n){for(let s in e){let r=e[s];Object.defineProperty(t,s,{enumerable:!0,value:r,writable:!1})}}function ta(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>ta(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let s="0x";for(let r=0;r<t.length;r++)s+=n[t[r]>>4],s+=n[t[r]&15];return s}if(typeof t=="object"&&typeof t.toJSON=="function")return ta(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(s=>`${ta(s,e)}: ${ta(t[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function nI(t,e,n){let s=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${ta(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+ta(a))}}i.push(`code=${e}`),i.push(`version=${UC}`),i.length&&(t+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(t);break;default:r=new Error(t)}return Vn(r,{code:e}),n&&Object.assign(r,n),r.shortMessage==null&&Vn(r,{shortMessage:s}),r}function it(t,e,n,s){if(!t)throw nI(e,n,s)}function te(t,e,n,s){it(t,e,"INVALID_ARGUMENT",{argument:n,value:s})}const sI=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function WC(t){it(sI.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function Zf(t,e,n){if(n==null&&(n=""),t!==e){let s=n,r="new";n&&(s+=".",r+=" "+n),it(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function HC(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const s=new Uint8Array((t.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(t.substring(r,r+2),16),r+=2;return s}te(!1,"invalid BytesLike value",e||"value",t)}function De(t,e){return HC(t,e,!1)}function Uo(t,e){return HC(t,e,!0)}function nr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function e0(t){return nr(t,!0)||t instanceof Uint8Array}const ev="0123456789abcdef";function Se(t){const e=De(t);let n="0x";for(let s=0;s<e.length;s++){const r=e[s];n+=ev[(r&240)>>4]+ev[r&15]}return n}function Bt(t){return"0x"+t.map(e=>Se(e).substring(2)).join("")}function Nc(t){return nr(t,!0)?(t.length-2)/2:De(t).length}function mb(t,e,n){const s=De(t);return n>s.length&&it(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),Se(s.slice(e,n))}function rI(t,e,n){const s=De(t);it(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),r.set(s,e-s.length),Se(r)}function Si(t,e){return rI(t,e)}const t0=BigInt(0),Ui=BigInt(1),na=9007199254740991;function iI(t,e){let n=xt(t,"value");const s=BigInt(Yn(e,"width")),r=Ui<<s-Ui;if(n<t0){n=-n,it(n<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Ui<<s)-Ui;return(~n&i)+Ui}else it(n<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function oI(t,e){const n=xb(t,"value"),s=BigInt(Yn(e,"bits"));return n&(Ui<<s)-Ui}function xt(t,e){switch(typeof t){case"bigint":return t;case"number":return te(Number.isInteger(t),"underflow",e||"value",t),te(t>=-na&&t<=na,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){te(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}te(!1,"invalid BigNumberish value",e||"value",t)}function xb(t,e){const n=xt(t,e);return it(n>=t0,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const tv="0123456789abcdef";function VC(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=tv[n>>4],e+=tv[n&15];return BigInt(e)}return xt(t)}function Yn(t,e){switch(typeof t){case"bigint":return te(t>=-na&&t<=na,"overflow",e||"value",t),Number(t);case"number":return te(Number.isInteger(t),"underflow",e||"value",t),te(t>=-na&&t<=na,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Yn(BigInt(t),e)}catch(n){te(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}te(!1,"invalid numeric value",e||"value",t)}function qa(t,e){const n=xb(t,"value");let s=n.toString(16);{const r=Yn(e,"width");if(r===0&&n===t0)return"0x";for(it(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});s.length<r*2;)s="0"+s}return"0x"+s}function Ft(t,e){const n=xb(t,"value");if(n===t0)return new Uint8Array(0);let s=n.toString(16);s.length%2&&(s="0"+s);const r=new Uint8Array(s.length/2);for(let i=0;i<r.length;i++){const o=i*2;r[i]=parseInt(s.substring(o,o+2),16)}return r}function aI(t){let e=Se(e0(t)?t:Ft(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Jh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let pd=null;function lI(t){if(pd==null){pd={};for(let n=0;n<Jh.length;n++)pd[Jh[n]]=BigInt(n)}const e=pd[t];return te(e!=null,"invalid base58 value","letter",t),e}const cI=BigInt(0),Sm=BigInt(58);function uI(t){const e=De(t);let n=VC(e),s="";for(;n;)s=Jh[Number(n%Sm)]+s,n/=Sm;for(let r=0;r<e.length&&!e[r];r++)s=Jh[0]+s;return s}function dI(t){let e=cI;for(let n=0;n<t.length;n++)e*=Sm,e+=lI(t[n]);return e}function ro(t,e){te(typeof t=="string","invalid string value","str",t),e!=null&&(WC(e),t=t.normalize(e));let n=[];for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(r&63|128);else if((r&64512)==55296){s++;const i=t.charCodeAt(s);te(s<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((r&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(r&63|128)}return new Uint8Array(n)}function hI(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function nv(t,e,n){let s=0;for(let r=0;r<n;r++)s=s*256+t[e+r];return s}function sv(t,e,n,s){const r=[];for(;n<e+1+s;){const i=YC(t,n);r.push(i.result),n+=i.consumed,it(n<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:t,length:s,offset:e})}return{consumed:1+s,result:r}}function YC(t,e){it(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=s=>{it(s<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:s})};if(t[e]>=248){const s=t[e]-247;n(e+1+s);const r=nv(t,e+1,s);return n(e+1+s+r),sv(t,e,e+1+s,s+r)}else if(t[e]>=192){const s=t[e]-192;return n(e+1+s),sv(t,e,e+1,s)}else if(t[e]>=184){const s=t[e]-183;n(e+1+s);const r=nv(t,e+1,s);n(e+1+s+r);const i=Se(t.slice(e+1+s,e+1+s+r));return{consumed:1+s+r,result:i}}else if(t[e]>=128){const s=t[e]-128;n(e+1+s);const r=Se(t.slice(e+1,e+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:hI(t[e])}}function Au(t){const e=De(t,"data"),n=YC(e,0);return te(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function rv(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function GC(t){if(Array.isArray(t)){let s=[];if(t.forEach(function(i){s=s.concat(GC(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=rv(s.length);return r.unshift(247+r.length),r.concat(s)}const e=Array.prototype.slice.call(De(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=rv(e.length);return n.unshift(183+n.length),n.concat(e)}const iv="0123456789abcdef";function Cr(t){let e="0x";for(const n of GC(t))e+=iv[n>>4],e+=iv[n&15];return e}function fI(t){const e=De(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=Se(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}function Un(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function bb(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function qC(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Un(t.outputLen),Un(t.blockLen)}function Ka(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function KC(t,e){bb(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const wp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const XC=t=>t instanceof Uint8Array,uh=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),dh=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Fs=(t,e)=>t<<32-e|t>>>e,pI=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!pI)throw new Error("Non little-endian hardware is not supported");const gI=async()=>{};async function ov(t,e,n){let s=Date.now();for(let r=0;r<t;r++){n(r);const i=Date.now()-s;i>=0&&i<e||(await gI(),s+=i)}}function mI(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Xa(t){if(typeof t=="string"&&(t=mI(t)),!XC(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function xI(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!XC(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}class yb{clone(){return this._cloneInto()}}const bI={}.toString;function QC(t,e){if(e!==void 0&&bI.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function n0(t){const e=s=>t().update(Xa(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function yI(t=32){if(wp&&typeof wp.getRandomValues=="function")return wp.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class JC extends yb{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,qC(e);const s=Xa(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ka(this),this.iHash.update(e),this}digestInto(e){Ka(this),bb(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s0=(t,e,n)=>new JC(t,e).update(n).digest();s0.create=(t,e)=>new JC(t,e);function wI(t,e,n,s){qC(t);const r=QC({dkLen:32,asyncTick:10},s),{c:i,dkLen:o,asyncTick:a}=r;if(Un(i),Un(o),Un(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Xa(e),c=Xa(n),u=new Uint8Array(o),d=s0.create(t,l),f=d._cloneInto().update(c);return{c:i,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:f}}function vI(t,e,n,s,r){return t.destroy(),e.destroy(),s&&s.destroy(),r.fill(0),n}function wb(t,e,n,s){const{c:r,dkLen:i,DK:o,PRF:a,PRFSalt:l}=wI(t,e,n,s);let c;const u=new Uint8Array(4),d=dh(u),f=new Uint8Array(a.outputLen);for(let p=1,m=0;m<i;p++,m+=a.outputLen){const x=o.subarray(m,m+a.outputLen);d.setInt32(0,p,!1),(c=l._cloneInto(c)).update(u).digestInto(f),x.set(f.subarray(0,x.length));for(let v=1;v<r;v++){a._cloneInto(c).update(f).digestInto(f);for(let g=0;g<x.length;g++)x[g]^=f[g]}}return vI(a,l,o,c,f)}function SI(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),l=s?4:0,c=s?0:4;t.setUint32(e+l,o,s),t.setUint32(e+c,a,s)}class vb extends yb{constructor(e,n,s,r){super(),this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=dh(this.buffer)}update(e){Ka(this);const{view:n,buffer:s,blockLen:r}=this;e=Xa(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const l=dh(e);for(;r<=i-o;o+=r)this.process(l,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ka(this),KC(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let d=o;d<r;d++)n[d]=0;SI(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=dh(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%n&&e.buffer.set(s),e}}const kI=(t,e,n)=>t&e^~t&n,_I=(t,e,n)=>t&e^t&n^e&n,CI=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jr=new Uint32Array(64);class EI extends vb{constructor(){super(64,32,8,!1),this.A=Lr[0]|0,this.B=Lr[1]|0,this.C=Lr[2]|0,this.D=Lr[3]|0,this.E=Lr[4]|0,this.F=Lr[5]|0,this.G=Lr[6]|0,this.H=Lr[7]|0}get(){const{A:e,B:n,C:s,D:r,E:i,F:o,G:a,H:l}=this;return[e,n,s,r,i,o,a,l]}set(e,n,s,r,i,o,a,l){this.A=e|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let d=0;d<16;d++,n+=4)jr[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=jr[d-15],p=jr[d-2],m=Fs(f,7)^Fs(f,18)^f>>>3,x=Fs(p,17)^Fs(p,19)^p>>>10;jr[d]=x+jr[d-7]+m+jr[d-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const f=Fs(a,6)^Fs(a,11)^Fs(a,25),p=u+f+kI(a,l,c)+CI[d]+jr[d]|0,x=(Fs(s,2)^Fs(s,13)^Fs(s,22))+_I(s,r,i)|0;u=c,c=l,l=a,a=o+p|0,o=i,i=r,r=s,s=p+x|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(s,r,i,o,a,l,c,u)}roundClean(){jr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ml=n0(()=>new EI),gd=BigInt(2**32-1),km=BigInt(32);function ZC(t,e=!1){return e?{h:Number(t&gd),l:Number(t>>km&gd)}:{h:Number(t>>km&gd)|0,l:Number(t&gd)|0}}function eE(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let r=0;r<t.length;r++){const{h:i,l:o}=ZC(t[r],e);[n[r],s[r]]=[i,o]}return[n,s]}const PI=(t,e)=>BigInt(t>>>0)<<km|BigInt(e>>>0),TI=(t,e,n)=>t>>>n,MI=(t,e,n)=>t<<32-n|e>>>n,II=(t,e,n)=>t>>>n|e<<32-n,DI=(t,e,n)=>t<<32-n|e>>>n,NI=(t,e,n)=>t<<64-n|e>>>n-32,AI=(t,e,n)=>t>>>n-32|e<<64-n,RI=(t,e)=>e,OI=(t,e)=>t,tE=(t,e,n)=>t<<n|e>>>32-n,nE=(t,e,n)=>e<<n|t>>>32-n,sE=(t,e,n)=>e<<n-32|t>>>64-n,rE=(t,e,n)=>t<<n-32|e>>>64-n;function LI(t,e,n,s){const r=(e>>>0)+(s>>>0);return{h:t+n+(r/2**32|0)|0,l:r|0}}const jI=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),FI=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,BI=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),$I=(t,e,n,s,r)=>e+n+s+r+(t/2**32|0)|0,zI=(t,e,n,s,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(r>>>0),UI=(t,e,n,s,r,i)=>e+n+s+r+i+(t/2**32|0)|0,Ke={fromBig:ZC,split:eE,toBig:PI,shrSH:TI,shrSL:MI,rotrSH:II,rotrSL:DI,rotrBH:NI,rotrBL:AI,rotr32H:RI,rotr32L:OI,rotlSH:tE,rotlSL:nE,rotlBH:sE,rotlBL:rE,add:LI,add3L:jI,add3H:FI,add4L:BI,add4H:$I,add5H:UI,add5L:zI},[WI,HI]=Ke.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Fr=new Uint32Array(80),Br=new Uint32Array(80);class VI extends vb{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:f,Gh:p,Gl:m,Hh:x,Hl:v}=this;return[e,n,s,r,i,o,a,l,c,u,d,f,p,m,x,v]}set(e,n,s,r,i,o,a,l,c,u,d,f,p,m,x,v){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=m|0,this.Hh=x|0,this.Hl=v|0}process(e,n){for(let w=0;w<16;w++,n+=4)Fr[w]=e.getUint32(n),Br[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const y=Fr[w-15]|0,k=Br[w-15]|0,_=Ke.rotrSH(y,k,1)^Ke.rotrSH(y,k,8)^Ke.shrSH(y,k,7),E=Ke.rotrSL(y,k,1)^Ke.rotrSL(y,k,8)^Ke.shrSL(y,k,7),T=Fr[w-2]|0,D=Br[w-2]|0,C=Ke.rotrSH(T,D,19)^Ke.rotrBH(T,D,61)^Ke.shrSH(T,D,6),A=Ke.rotrSL(T,D,19)^Ke.rotrBL(T,D,61)^Ke.shrSL(T,D,6),N=Ke.add4L(E,A,Br[w-7],Br[w-16]),$=Ke.add4H(N,_,C,Fr[w-7],Fr[w-16]);Fr[w]=$|0,Br[w]=N|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:f,Fh:p,Fl:m,Gh:x,Gl:v,Hh:g,Hl:b}=this;for(let w=0;w<80;w++){const y=Ke.rotrSH(d,f,14)^Ke.rotrSH(d,f,18)^Ke.rotrBH(d,f,41),k=Ke.rotrSL(d,f,14)^Ke.rotrSL(d,f,18)^Ke.rotrBL(d,f,41),_=d&p^~d&x,E=f&m^~f&v,T=Ke.add5L(b,k,E,HI[w],Br[w]),D=Ke.add5H(T,g,y,_,WI[w],Fr[w]),C=T|0,A=Ke.rotrSH(s,r,28)^Ke.rotrBH(s,r,34)^Ke.rotrBH(s,r,39),N=Ke.rotrSL(s,r,28)^Ke.rotrBL(s,r,34)^Ke.rotrBL(s,r,39),$=s&i^s&a^i&a,W=r&o^r&l^o&l;g=x|0,b=v|0,x=p|0,v=m|0,p=d|0,m=f|0,{h:d,l:f}=Ke.add(c|0,u|0,D|0,C|0),c=a|0,u=l|0,a=i|0,l=o|0,i=s|0,o=r|0;const L=Ke.add3L(C,N,W);s=Ke.add3H(L,D,A,$),r=L|0}({h:s,l:r}=Ke.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=Ke.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=Ke.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=Ke.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:d,l:f}=Ke.add(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:m}=Ke.add(this.Fh|0,this.Fl|0,p|0,m|0),{h:x,l:v}=Ke.add(this.Gh|0,this.Gl|0,x|0,v|0),{h:g,l:b}=Ke.add(this.Hh|0,this.Hl|0,g|0,b|0),this.set(s,r,i,o,a,l,c,u,d,f,p,m,x,v,g,b)}roundClean(){Fr.fill(0),Br.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Sb=n0(()=>new VI);function YI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const av=YI(),lv=av.crypto||av.msCrypto;function GI(t){switch(t){case"sha256":return ml.create();case"sha512":return Sb.create()}te(!1,"invalid hashing algorithm name","algorithm",t)}function qI(t,e){const n={sha256:ml,sha512:Sb}[t];return te(n!=null,"invalid hmac algorithm","algorithm",t),s0.create(n,e)}function KI(t,e,n,s,r){const i={sha256:ml,sha512:Sb}[r];return te(i!=null,"invalid pbkdf2 algorithm","algorithm",r),wb(i,t,e,{c:n,dkLen:s})}function XI(t){it(lv!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),te(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return lv.getRandomValues(e),e}let iE=!1;const oE=function(t,e,n){return qI(t,e).update(n).digest()};let aE=oE;function xl(t,e,n){const s=De(e,"key"),r=De(n,"data");return Se(aE(t,s,r))}xl._=oE;xl.lock=function(){iE=!0};xl.register=function(t){if(iE)throw new Error("computeHmac is locked");aE=t};Object.freeze(xl);const[lE,cE,uE]=[[],[],[]],QI=BigInt(0),Bl=BigInt(1),JI=BigInt(2),ZI=BigInt(7),e8=BigInt(256),t8=BigInt(113);for(let t=0,e=Bl,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],lE.push(2*(5*s+n)),cE.push((t+1)*(t+2)/2%64);let r=QI;for(let i=0;i<7;i++)e=(e<<Bl^(e>>ZI)*t8)%e8,e&JI&&(r^=Bl<<(Bl<<BigInt(i))-Bl);uE.push(r)}const[n8,s8]=eE(uE,!0),cv=(t,e,n)=>n>32?sE(t,e,n):tE(t,e,n),uv=(t,e,n)=>n>32?rE(t,e,n):nE(t,e,n);function r8(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],d=cv(c,u,1)^n[a],f=uv(c,u,1)^n[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let r=t[2],i=t[3];for(let o=0;o<24;o++){const a=cE[o],l=cv(r,i,a),c=uv(r,i,a),u=lE[o];r=t[u],i=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=n8[s],t[1]^=s8[s]}n.fill(0)}class kb extends yb{constructor(e,n,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Un(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=uh(this.state)}keccak(){r8(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Ka(this);const{blockLen:n,state:s}=this;e=Xa(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:r}=this;e[s]^=n,n&128&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Ka(this,!1),bb(e),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(n.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Un(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(KC(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new kb(n,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const i8=(t,e,n)=>n0(()=>new kb(e,t,n)),o8=i8(1,136,256/8);let dE=!1;const hE=function(t){return o8(t)};let fE=hE;function qt(t){const e=De(t,"data");return Se(fE(e))}qt._=hE;qt.lock=function(){dE=!0};qt.register=function(t){if(dE)throw new TypeError("keccak256 is locked");fE=t};Object.freeze(qt);const a8=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),pE=Uint8Array.from({length:16},(t,e)=>e),l8=pE.map(t=>(9*t+5)%16);let _b=[pE],Cb=[l8];for(let t=0;t<4;t++)for(let e of[_b,Cb])e.push(e[t].map(n=>a8[n]));const gE=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),c8=_b.map((t,e)=>t.map(n=>gE[e][n])),u8=Cb.map((t,e)=>t.map(n=>gE[e][n])),d8=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),h8=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),md=(t,e)=>t<<e|t>>>32-e;function dv(t,e,n,s){return t===0?e^n^s:t===1?e&n|~e&s:t===2?(e|~n)^s:t===3?e&s|n&~s:e^(n|~s)}const xd=new Uint32Array(16);class f8 extends vb{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:s,h3:r,h4:i}=this;return[e,n,s,r,i]}set(e,n,s,r,i){this.h0=e|0,this.h1=n|0,this.h2=s|0,this.h3=r|0,this.h4=i|0}process(e,n){for(let p=0;p<16;p++,n+=4)xd[p]=e.getUint32(n,!0);let s=this.h0|0,r=s,i=this.h1|0,o=i,a=this.h2|0,l=a,c=this.h3|0,u=c,d=this.h4|0,f=d;for(let p=0;p<5;p++){const m=4-p,x=d8[p],v=h8[p],g=_b[p],b=Cb[p],w=c8[p],y=u8[p];for(let k=0;k<16;k++){const _=md(s+dv(p,i,a,c)+xd[g[k]]+x,w[k])+d|0;s=d,d=c,c=md(a,10)|0,a=i,i=_}for(let k=0;k<16;k++){const _=md(r+dv(m,o,l,u)+xd[b[k]]+v,y[k])+f|0;r=f,f=u,u=md(l,10)|0,l=o,o=_}}this.set(this.h1+a+u|0,this.h2+c+f|0,this.h3+d+r|0,this.h4+s+o|0,this.h0+i+l|0)}roundClean(){xd.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const p8=n0(()=>new f8);let mE=!1;const xE=function(t){return p8(t)};let bE=xE;function bl(t){const e=De(t,"data");return Se(bE(e))}bl._=xE;bl.lock=function(){mE=!0};bl.register=function(t){if(mE)throw new TypeError("ripemd160 is locked");bE=t};Object.freeze(bl);let yE=!1;const wE=function(t,e,n,s,r){return KI(t,e,n,s,r)};let vE=wE;function Ru(t,e,n,s,r){const i=De(t,"password"),o=De(e,"salt");return Se(vE(i,o,n,s,r))}Ru._=wE;Ru.lock=function(){yE=!0};Ru.register=function(t){if(yE)throw new Error("pbkdf2 is locked");vE=t};Object.freeze(Ru);let SE=!1;const kE=function(t){return new Uint8Array(XI(t))};let _E=kE;function Er(t){return _E(t)}Er._=kE;Er.lock=function(){SE=!0};Er.register=function(t){if(SE)throw new Error("randomBytes is locked");_E=t};Object.freeze(Er);const at=(t,e)=>t<<e|t>>>32-e;function hv(t,e,n,s,r,i){let o=t[e++]^n[s++],a=t[e++]^n[s++],l=t[e++]^n[s++],c=t[e++]^n[s++],u=t[e++]^n[s++],d=t[e++]^n[s++],f=t[e++]^n[s++],p=t[e++]^n[s++],m=t[e++]^n[s++],x=t[e++]^n[s++],v=t[e++]^n[s++],g=t[e++]^n[s++],b=t[e++]^n[s++],w=t[e++]^n[s++],y=t[e++]^n[s++],k=t[e++]^n[s++],_=o,E=a,T=l,D=c,C=u,A=d,N=f,$=p,W=m,L=x,F=v,j=g,R=b,B=w,I=y,G=k;for(let O=0;O<8;O+=2)C^=at(_+R|0,7),W^=at(C+_|0,9),R^=at(W+C|0,13),_^=at(R+W|0,18),L^=at(A+E|0,7),B^=at(L+A|0,9),E^=at(B+L|0,13),A^=at(E+B|0,18),I^=at(F+N|0,7),T^=at(I+F|0,9),N^=at(T+I|0,13),F^=at(N+T|0,18),D^=at(G+j|0,7),$^=at(D+G|0,9),j^=at($+D|0,13),G^=at(j+$|0,18),E^=at(_+D|0,7),T^=at(E+_|0,9),D^=at(T+E|0,13),_^=at(D+T|0,18),N^=at(A+C|0,7),$^=at(N+A|0,9),C^=at($+N|0,13),A^=at(C+$|0,18),j^=at(F+L|0,7),W^=at(j+F|0,9),L^=at(W+j|0,13),F^=at(L+W|0,18),R^=at(G+I|0,7),B^=at(R+G|0,9),I^=at(B+R|0,13),G^=at(I+B|0,18);r[i++]=o+_|0,r[i++]=a+E|0,r[i++]=l+T|0,r[i++]=c+D|0,r[i++]=u+C|0,r[i++]=d+A|0,r[i++]=f+N|0,r[i++]=p+$|0,r[i++]=m+W|0,r[i++]=x+L|0,r[i++]=v+F|0,r[i++]=g+j|0,r[i++]=b+R|0,r[i++]=w+B|0,r[i++]=y+I|0,r[i++]=k+G|0}function pa(t,e,n,s,r){let i=s+0,o=s+16*r;for(let a=0;a<16;a++)n[o+a]=t[e+(2*r-1)*16+a];for(let a=0;a<r;a++,i+=16,e+=16)hv(n,o,t,e,n,i),a>0&&(o+=16),hv(n,i,t,e+=16,n,o)}function CE(t,e,n){const s=QC({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:r,r:i,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=s;if(Un(r),Un(i),Un(o),Un(a),Un(l),Un(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const d=128*i,f=d/4;if(r<=1||r&r-1||r>=2**(d/8)||r>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=d*(r+o);if(p>c)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${c} (maxmem)`);const m=wb(ml,t,e,{c:1,dkLen:d*o}),x=uh(m),v=uh(new Uint8Array(d*r)),g=uh(new Uint8Array(d));let b=()=>{};if(u){const w=2*r*o,y=Math.max(Math.floor(w/1e4),1);let k=0;b=()=>{k++,u&&(!(k%y)||k===w)&&u(k/w)}}return{N:r,r:i,p:o,dkLen:a,blockSize32:f,V:v,B32:x,B:m,tmp:g,blockMixCb:b,asyncTick:l}}function EE(t,e,n,s,r){const i=wb(ml,t,n,{c:1,dkLen:e});return n.fill(0),s.fill(0),r.fill(0),i}function g8(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f}=CE(t,e,n);for(let p=0;p<i;p++){const m=a*p;for(let x=0;x<a;x++)l[x]=c[m+x];for(let x=0,v=0;x<s-1;x++)pa(l,v,l,v+=a,r),f();pa(l,(s-1)*a,c,m,r),f();for(let x=0;x<s;x++){const v=c[m+a-16]%s;for(let g=0;g<a;g++)d[g]=c[m+g]^l[v*a+g];pa(d,0,c,m,r),f()}}return EE(t,o,u,l,d)}async function m8(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f,asyncTick:p}=CE(t,e,n);for(let m=0;m<i;m++){const x=a*m;for(let g=0;g<a;g++)l[g]=c[x+g];let v=0;await ov(s-1,p,()=>{pa(l,v,l,v+=a,r),f()}),pa(l,(s-1)*a,c,x,r),f(),await ov(s,p,()=>{const g=c[x+a-16]%s;for(let b=0;b<a;b++)d[b]=c[x+b]^l[g*a+b];pa(d,0,c,x,r),f()})}return EE(t,o,u,l,d)}let PE=!1,TE=!1;const ME=async function(t,e,n,s,r,i,o){return await m8(t,e,{N:n,r:s,p:r,dkLen:i,onProgress:o})},IE=function(t,e,n,s,r,i){return g8(t,e,{N:n,r:s,p:r,dkLen:i})};let DE=ME,NE=IE;async function Ou(t,e,n,s,r,i,o){const a=De(t,"passwd"),l=De(e,"salt");return Se(await DE(a,l,n,s,r,i,o))}Ou._=ME;Ou.lock=function(){TE=!0};Ou.register=function(t){if(TE)throw new Error("scrypt is locked");DE=t};Object.freeze(Ou);function Lu(t,e,n,s,r,i){const o=De(t,"passwd"),a=De(e,"salt");return Se(NE(o,a,n,s,r,i))}Lu._=IE;Lu.lock=function(){PE=!0};Lu.register=function(t){if(PE)throw new Error("scryptSync is locked");NE=t};Object.freeze(Lu);const AE=function(t){return GI("sha256").update(t).digest()};let RE=AE,OE=!1;function xs(t){const e=De(t,"data");return Se(RE(e))}xs._=AE;xs.lock=function(){OE=!0};xs.register=function(t){if(OE)throw new Error("sha256 is locked");RE=t};Object.freeze(xs);Object.freeze(xs);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const LE=BigInt(0),r0=BigInt(1),x8=BigInt(2),i0=t=>t instanceof Uint8Array,b8=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Qa(t){if(!i0(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=b8[t[n]];return e}function jE(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Eb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Ja(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let s=0;s<n.length;s++){const r=s*2,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[s]=o}return n}function io(t){return Eb(Qa(t))}function Pb(t){if(!i0(t))throw new Error("Uint8Array expected");return Eb(Qa(Uint8Array.from(t).reverse()))}function Za(t,e){return Ja(t.toString(16).padStart(e*2,"0"))}function Tb(t,e){return Za(t,e).reverse()}function y8(t){return Ja(jE(t))}function ks(t,e,n){let s;if(typeof e=="string")try{s=Ja(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(i0(e))s=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const r=s.length;if(typeof n=="number"&&r!==n)throw new Error(`${t} expected ${n} bytes, got ${r}`);return s}function au(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!i0(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}function w8(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function v8(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function S8(t){let e;for(e=0;t>LE;t>>=r0,e+=1);return e}function k8(t,e){return t>>BigInt(e)&r0}const _8=(t,e,n)=>t|(n?r0:LE)<<BigInt(e),Mb=t=>(x8<<BigInt(t-1))-r0,vp=t=>new Uint8Array(t),fv=t=>Uint8Array.from(t);function FE(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let s=vp(t),r=vp(t),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...d)=>n(r,s,...d),l=(d=vp())=>{r=a(fv([0]),d),s=a(),d.length!==0&&(r=a(fv([1]),d),s=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){s=a();const p=s.slice();f.push(p),d+=s.length}return au(...f)};return(d,f)=>{o(),l(d);let p;for(;!(p=f(c()));)l();return o(),p}}const C8={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ju(t,e,n={}){const s=(r,i,o)=>{const a=C8[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=t[r];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(e))s(r,i,!1);for(const[r,i]of Object.entries(n))s(r,i,!0);return t}const E8=Object.freeze(Object.defineProperty({__proto__:null,bitGet:k8,bitLen:S8,bitMask:Mb,bitSet:_8,bytesToHex:Qa,bytesToNumberBE:io,bytesToNumberLE:Pb,concatBytes:au,createHmacDrbg:FE,ensureBytes:ks,equalBytes:w8,hexToBytes:Ja,hexToNumber:Eb,numberToBytesBE:Za,numberToBytesLE:Tb,numberToHexUnpadded:jE,numberToVarBytesBE:y8,utf8ToBytes:v8,validateObject:ju},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kt=BigInt(0),jt=BigInt(1),Wi=BigInt(2),P8=BigInt(3),_m=BigInt(4),pv=BigInt(5),gv=BigInt(8);BigInt(9);BigInt(16);function Tn(t,e){const n=t%e;return n>=Kt?n:e+n}function T8(t,e,n){if(n<=Kt||e<Kt)throw new Error("Expected power/modulo > 0");if(n===jt)return Kt;let s=jt;for(;e>Kt;)e&jt&&(s=s*t%n),t=t*t%n,e>>=jt;return s}function Zn(t,e,n){let s=t;for(;e-- >Kt;)s*=s,s%=n;return s}function Cm(t,e){if(t===Kt||e<=Kt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Tn(t,e),s=e,r=Kt,i=jt;for(;n!==Kt;){const a=s/n,l=s%n,c=r-i*a;s=n,n=l,r=i,i=c}if(s!==jt)throw new Error("invert: does not exist");return Tn(r,e)}function M8(t){const e=(t-jt)/Wi;let n,s,r;for(n=t-jt,s=0;n%Wi===Kt;n/=Wi,s++);for(r=Wi;r<t&&T8(r,e,t)!==t-jt;r++);if(s===1){const o=(t+jt)/_m;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+jt)/Wi;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=s,u=a.pow(a.mul(a.ONE,r),n),d=a.pow(l,i),f=a.pow(l,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let p=1;for(let x=a.sqr(f);p<c&&!a.eql(x,a.ONE);p++)x=a.sqr(x);const m=a.pow(u,jt<<BigInt(c-p-1));u=a.sqr(m),d=a.mul(d,m),f=a.mul(f,u),c=p}return d}}function I8(t){if(t%_m===P8){const e=(t+jt)/_m;return function(s,r){const i=s.pow(r,e);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%gv===pv){const e=(t-pv)/gv;return function(s,r){const i=s.mul(r,Wi),o=s.pow(i,e),a=s.mul(r,o),l=s.mul(s.mul(a,Wi),o),c=s.mul(a,s.sub(l,s.ONE));if(!s.eql(s.sqr(c),r))throw new Error("Cannot find square root");return c}}return M8(t)}const D8=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function N8(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=D8.reduce((s,r)=>(s[r]="function",s),e);return ju(t,n)}function A8(t,e,n){if(n<Kt)throw new Error("Expected power > 0");if(n===Kt)return t.ONE;if(n===jt)return e;let s=t.ONE,r=e;for(;n>Kt;)n&jt&&(s=t.mul(s,r)),r=t.sqr(r),n>>=jt;return s}function R8(t,e){const n=new Array(e.length),s=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),r=t.inv(s);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),r),n}function BE(t,e){const n=e!==void 0?e:t.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function O8(t,e,n=!1,s={}){if(t<=Kt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:r,nByteLength:i}=BE(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=I8(t),a=Object.freeze({ORDER:t,BITS:r,BYTES:i,MASK:Mb(r),ZERO:Kt,ONE:jt,create:l=>Tn(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Kt<=l&&l<t},is0:l=>l===Kt,isOdd:l=>(l&jt)===jt,neg:l=>Tn(-l,t),eql:(l,c)=>l===c,sqr:l=>Tn(l*l,t),add:(l,c)=>Tn(l+c,t),sub:(l,c)=>Tn(l-c,t),mul:(l,c)=>Tn(l*c,t),pow:(l,c)=>A8(a,l,c),div:(l,c)=>Tn(l*Cm(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>Cm(l,t),sqrt:s.sqrt||(l=>o(a,l)),invertBatch:l=>R8(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?Tb(l,i):Za(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return n?Pb(l):io(l)}});return Object.freeze(a)}function $E(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function zE(t){const e=$E(t);return e+Math.ceil(e/2)}function L8(t,e,n=!1){const s=t.length,r=$E(e),i=zE(e);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=n?io(t):Pb(t),a=Tn(o,e-jt)+jt;return n?Tb(a,r):Za(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const j8=BigInt(0),Sp=BigInt(1);function F8(t,e){const n=(r,i)=>{const o=i.negate();return r?o:i},s=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(r,i){let o=t.ZERO,a=r;for(;i>j8;)i&Sp&&(o=o.add(a)),a=a.double(),i>>=Sp;return o},precomputeWindow(r,i){const{windows:o,windowSize:a}=s(i),l=[];let c=r,u=c;for(let d=0;d<o;d++){u=c,l.push(u);for(let f=1;f<a;f++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(r,i,o){const{windows:a,windowSize:l}=s(r);let c=t.ZERO,u=t.BASE;const d=BigInt(2**r-1),f=2**r,p=BigInt(r);for(let m=0;m<a;m++){const x=m*l;let v=Number(o&d);o>>=p,v>l&&(v-=f,o+=Sp);const g=x,b=x+Math.abs(v)-1,w=m%2!==0,y=v<0;v===0?u=u.add(n(w,i[g])):c=c.add(n(y,i[b]))}return{p:c,f:u}},wNAFCached(r,i,o,a){const l=r._WINDOW_SIZE||1;let c=i.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&i.set(r,a(c))),this.wNAF(l,c,o)}}}function UE(t){return N8(t.Fp),ju(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...BE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function B8(t){const e=UE(t);ju(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:r}=e;if(n){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:$8,hexToBytes:z8}=E8,qi={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=qi;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],s=t.subarray(2,n+2);if(!n||s.length!==n)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:$8(s),l:t.subarray(n+2)}},toSig(t){const{Err:e}=qi,n=typeof t=="string"?z8(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let s=n.length;if(s<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=qi._parseInt(n.subarray(2)),{d:o,l:a}=qi._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},s=e(n(t.s)),r=e(n(t.r)),i=s.length/2,o=r.length/2,a=n(i),l=n(o);return`30${n(o+i+4)}02${l}${r}02${a}${s}`}},xr=BigInt(0),as=BigInt(1);BigInt(2);const mv=BigInt(3);BigInt(4);function U8(t){const e=B8(t),{Fp:n}=e,s=e.toBytes||((m,x,v)=>{const g=x.toAffine();return au(Uint8Array.from([4]),n.toBytes(g.x),n.toBytes(g.y))}),r=e.fromBytes||(m=>{const x=m.subarray(1),v=n.fromBytes(x.subarray(0,n.BYTES)),g=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:v,y:g}});function i(m){const{a:x,b:v}=e,g=n.sqr(m),b=n.mul(g,m);return n.add(n.add(b,n.mul(m,x)),v)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&xr<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(m){const{allowedPrivateKeyLengths:x,nByteLength:v,wrapPrivateKey:g,n:b}=e;if(x&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=Qa(m)),typeof m!="string"||!x.includes(m.length))throw new Error("Invalid key");m=m.padStart(v*2,"0")}let w;try{w=typeof m=="bigint"?m:io(ks("private key",m,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof m}`)}return g&&(w=Tn(w,b)),a(w),w}const c=new Map;function u(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(x,v,g){if(this.px=x,this.py=v,this.pz=g,x==null||!n.isValid(x))throw new Error("x required");if(v==null||!n.isValid(v))throw new Error("y required");if(g==null||!n.isValid(g))throw new Error("z required")}static fromAffine(x){const{x:v,y:g}=x||{};if(!x||!n.isValid(v)||!n.isValid(g))throw new Error("invalid affine point");if(x instanceof d)throw new Error("projective point not allowed");const b=w=>n.eql(w,n.ZERO);return b(v)&&b(g)?d.ZERO:new d(v,g,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const v=n.invertBatch(x.map(g=>g.pz));return x.map((g,b)=>g.toAffine(v[b])).map(d.fromAffine)}static fromHex(x){const v=d.fromAffine(r(ks("pointHex",x)));return v.assertValidity(),v}static fromPrivateKey(x){return d.BASE.multiply(l(x))}_setWindowSize(x){this._WINDOW_SIZE=x,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:v}=this.toAffine();if(!n.isValid(x)||!n.isValid(v))throw new Error("bad point: x or y not FE");const g=n.sqr(v),b=i(x);if(!n.eql(g,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(n.isOdd)return!n.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){u(x);const{px:v,py:g,pz:b}=this,{px:w,py:y,pz:k}=x,_=n.eql(n.mul(v,k),n.mul(w,b)),E=n.eql(n.mul(g,k),n.mul(y,b));return _&&E}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:x,b:v}=e,g=n.mul(v,mv),{px:b,py:w,pz:y}=this;let k=n.ZERO,_=n.ZERO,E=n.ZERO,T=n.mul(b,b),D=n.mul(w,w),C=n.mul(y,y),A=n.mul(b,w);return A=n.add(A,A),E=n.mul(b,y),E=n.add(E,E),k=n.mul(x,E),_=n.mul(g,C),_=n.add(k,_),k=n.sub(D,_),_=n.add(D,_),_=n.mul(k,_),k=n.mul(A,k),E=n.mul(g,E),C=n.mul(x,C),A=n.sub(T,C),A=n.mul(x,A),A=n.add(A,E),E=n.add(T,T),T=n.add(E,T),T=n.add(T,C),T=n.mul(T,A),_=n.add(_,T),C=n.mul(w,y),C=n.add(C,C),T=n.mul(C,A),k=n.sub(k,T),E=n.mul(C,D),E=n.add(E,E),E=n.add(E,E),new d(k,_,E)}add(x){u(x);const{px:v,py:g,pz:b}=this,{px:w,py:y,pz:k}=x;let _=n.ZERO,E=n.ZERO,T=n.ZERO;const D=e.a,C=n.mul(e.b,mv);let A=n.mul(v,w),N=n.mul(g,y),$=n.mul(b,k),W=n.add(v,g),L=n.add(w,y);W=n.mul(W,L),L=n.add(A,N),W=n.sub(W,L),L=n.add(v,b);let F=n.add(w,k);return L=n.mul(L,F),F=n.add(A,$),L=n.sub(L,F),F=n.add(g,b),_=n.add(y,k),F=n.mul(F,_),_=n.add(N,$),F=n.sub(F,_),T=n.mul(D,L),_=n.mul(C,$),T=n.add(_,T),_=n.sub(N,T),T=n.add(N,T),E=n.mul(_,T),N=n.add(A,A),N=n.add(N,A),$=n.mul(D,$),L=n.mul(C,L),N=n.add(N,$),$=n.sub(A,$),$=n.mul(D,$),L=n.add(L,$),A=n.mul(N,L),E=n.add(E,A),A=n.mul(F,L),_=n.mul(W,_),_=n.sub(_,A),A=n.mul(W,N),T=n.mul(F,T),T=n.add(T,A),new d(_,E,T)}subtract(x){return this.add(x.negate())}is0(){return this.equals(d.ZERO)}wNAF(x){return p.wNAFCached(this,c,x,v=>{const g=n.invertBatch(v.map(b=>b.pz));return v.map((b,w)=>b.toAffine(g[w])).map(d.fromAffine)})}multiplyUnsafe(x){const v=d.ZERO;if(x===xr)return v;if(a(x),x===as)return this;const{endo:g}=e;if(!g)return p.unsafeLadder(this,x);let{k1neg:b,k1:w,k2neg:y,k2:k}=g.splitScalar(x),_=v,E=v,T=this;for(;w>xr||k>xr;)w&as&&(_=_.add(T)),k&as&&(E=E.add(T)),T=T.double(),w>>=as,k>>=as;return b&&(_=_.negate()),y&&(E=E.negate()),E=new d(n.mul(E.px,g.beta),E.py,E.pz),_.add(E)}multiply(x){a(x);let v=x,g,b;const{endo:w}=e;if(w){const{k1neg:y,k1:k,k2neg:_,k2:E}=w.splitScalar(v);let{p:T,f:D}=this.wNAF(k),{p:C,f:A}=this.wNAF(E);T=p.constTimeNegate(y,T),C=p.constTimeNegate(_,C),C=new d(n.mul(C.px,w.beta),C.py,C.pz),g=T.add(C),b=D.add(A)}else{const{p:y,f:k}=this.wNAF(v);g=y,b=k}return d.normalizeZ([g,b])[0]}multiplyAndAddUnsafe(x,v,g){const b=d.BASE,w=(k,_)=>_===xr||_===as||!k.equals(b)?k.multiplyUnsafe(_):k.multiply(_),y=w(this,v).add(w(x,g));return y.is0()?void 0:y}toAffine(x){const{px:v,py:g,pz:b}=this,w=this.is0();x==null&&(x=w?n.ONE:n.inv(b));const y=n.mul(v,x),k=n.mul(g,x),_=n.mul(b,x);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:y,y:k}}isTorsionFree(){const{h:x,isTorsionFree:v}=e;if(x===as)return!0;if(v)return v(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:v}=e;return x===as?this:v?v(d,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return this.assertValidity(),s(d,this,x)}toHex(x=!0){return Qa(this.toRawBytes(x))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=F8(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function W8(t){const e=UE(t);return ju(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function H8(t){const e=W8(t),{Fp:n,n:s}=e,r=n.BYTES+1,i=2*n.BYTES+1;function o(L){return xr<L&&L<n.ORDER}function a(L){return Tn(L,s)}function l(L){return Cm(L,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:f}=U8({...e,toBytes(L,F,j){const R=F.toAffine(),B=n.toBytes(R.x),I=au;return j?I(Uint8Array.from([F.hasEvenY()?2:3]),B):I(Uint8Array.from([4]),B,n.toBytes(R.y))},fromBytes(L){const F=L.length,j=L[0],R=L.subarray(1);if(F===r&&(j===2||j===3)){const B=io(R);if(!o(B))throw new Error("Point is not on curve");const I=d(B);let G=n.sqrt(I);const O=(G&as)===as;return(j&1)===1!==O&&(G=n.neg(G)),{x:B,y:G}}else if(F===i&&j===4){const B=n.fromBytes(R.subarray(0,n.BYTES)),I=n.fromBytes(R.subarray(n.BYTES,2*n.BYTES));return{x:B,y:I}}else throw new Error(`Point of length ${F} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),p=L=>Qa(Za(L,e.nByteLength));function m(L){const F=s>>as;return L>F}function x(L){return m(L)?a(-L):L}const v=(L,F,j)=>io(L.slice(F,j));class g{constructor(F,j,R){this.r=F,this.s=j,this.recovery=R,this.assertValidity()}static fromCompact(F){const j=e.nByteLength;return F=ks("compactSignature",F,j*2),new g(v(F,0,j),v(F,j,2*j))}static fromDER(F){const{r:j,s:R}=qi.toSig(ks("DER",F));return new g(j,R)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(F){return new g(this.r,this.s,F)}recoverPublicKey(F){const{r:j,s:R,recovery:B}=this,I=E(ks("msgHash",F));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const G=B===2||B===3?j+e.n:j;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const O=B&1?"03":"02",P=c.fromHex(O+p(G)),Z=l(G),Q=a(-I*Z),Y=a(R*Z),q=c.BASE.multiplyAndAddUnsafe(P,Q,Y);if(!q)throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ja(this.toDERHex())}toDERHex(){return qi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ja(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const b={isValidPrivateKey(L){try{return u(L),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const L=zE(e.n);return L8(e.randomBytes(L),e.n)},precompute(L=8,F=c.BASE){return F._setWindowSize(L),F.multiply(BigInt(3)),F}};function w(L,F=!0){return c.fromPrivateKey(L).toRawBytes(F)}function y(L){const F=L instanceof Uint8Array,j=typeof L=="string",R=(F||j)&&L.length;return F?R===r||R===i:j?R===2*r||R===2*i:L instanceof c}function k(L,F,j=!0){if(y(L))throw new Error("first arg must be private key");if(!y(F))throw new Error("second arg must be public key");return c.fromHex(F).multiply(u(L)).toRawBytes(j)}const _=e.bits2int||function(L){const F=io(L),j=L.length*8-e.nBitLength;return j>0?F>>BigInt(j):F},E=e.bits2int_modN||function(L){return a(_(L))},T=Mb(e.nBitLength);function D(L){if(typeof L!="bigint")throw new Error("bigint expected");if(!(xr<=L&&L<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Za(L,e.nByteLength)}function C(L,F,j=A){if(["recovered","canonical"].some(se=>se in j))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:B}=e;let{lowS:I,prehash:G,extraEntropy:O}=j;I==null&&(I=!0),L=ks("msgHash",L),G&&(L=ks("prehashed msgHash",R(L)));const P=E(L),Z=u(F),Q=[D(Z),D(P)];if(O!=null){const se=O===!0?B(n.BYTES):O;Q.push(ks("extraEntropy",se))}const Y=au(...Q),q=P;function J(se){const we=_(se);if(!f(we))return;const Ye=l(we),Ne=c.BASE.multiply(we).toAffine(),Le=a(Ne.x);if(Le===xr)return;const ze=a(Ye*a(q+Le*Z));if(ze===xr)return;let wt=(Ne.x===Le?0:2)|Number(Ne.y&as),M=ze;return I&&m(ze)&&(M=x(ze),wt^=1),new g(Le,M,wt)}return{seed:Y,k2sig:J}}const A={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function $(L,F,j=A){const{seed:R,k2sig:B}=C(L,F,j),I=e;return FE(I.hash.outputLen,I.nByteLength,I.hmac)(R,B)}c.BASE._setWindowSize(8);function W(L,F,j,R=N){var Ne;const B=L;if(F=ks("msgHash",F),j=ks("publicKey",j),"strict"in R)throw new Error("options.strict was renamed to lowS");const{lowS:I,prehash:G}=R;let O,P;try{if(typeof B=="string"||B instanceof Uint8Array)try{O=g.fromDER(B)}catch(Le){if(!(Le instanceof qi.Err))throw Le;O=g.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){const{r:Le,s:ze}=B;O=new g(Le,ze)}else throw new Error("PARSE");P=c.fromHex(j)}catch(Le){if(Le.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(I&&O.hasHighS())return!1;G&&(F=e.hash(F));const{r:Z,s:Q}=O,Y=E(F),q=l(Q),J=a(Y*q),se=a(Z*q),we=(Ne=c.BASE.multiplyAndAddUnsafe(P,J,se))==null?void 0:Ne.toAffine();return we?a(we.x)===Z:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:k,sign:$,verify:W,ProjectivePoint:c,Signature:g,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function V8(t){return{hash:t,hmac:(e,...n)=>s0(t,e,xI(...n)),randomBytes:yI}}function Y8(t,e){const n=s=>H8({...t,...V8(s)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const WE=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),xv=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),G8=BigInt(1),Em=BigInt(2),bv=(t,e)=>(t+e/Em)/e;function q8(t){const e=WE,n=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,d=Zn(u,n,e)*u%e,f=Zn(d,n,e)*u%e,p=Zn(f,Em,e)*c%e,m=Zn(p,r,e)*p%e,x=Zn(m,i,e)*m%e,v=Zn(x,a,e)*x%e,g=Zn(v,l,e)*v%e,b=Zn(g,a,e)*x%e,w=Zn(b,n,e)*u%e,y=Zn(w,o,e)*m%e,k=Zn(y,s,e)*c%e,_=Zn(k,Em,e);if(!Pm.eql(Pm.sqr(_),t))throw new Error("Cannot find square root");return _}const Pm=O8(WE,void 0,void 0,{sqrt:q8}),Yr=Y8({a:BigInt(0),b:BigInt(7),Fp:Pm,n:xv,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=xv,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-G8*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=bv(i*t,e),l=bv(-s*t,e);let c=Tn(t-a*n-l*r,e),u=Tn(-a*s-l*i,e);const d=c>o,f=u>o;if(d&&(c=e-c),f&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:f,k2:u}}}},ml);BigInt(0);Yr.ProjectivePoint;const HE="0x0000000000000000000000000000000000000000",yv="0x0000000000000000000000000000000000000000000000000000000000000000",K8=`Ethereum Signed Message:
`,wv=BigInt(0),vv=BigInt(1),Tm=BigInt(2),Sv=BigInt(27),kv=BigInt(28),bd=BigInt(35),VE=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),X8=VE/Tm,Q8=Symbol.for("nodejs.util.inspect.custom"),Ii={};function kp(t){return Si(Ft(t),32)}var va,qs,Sa,ei;const is=class is{constructor(e,n,s,r){Ze(this,va);Ze(this,qs);Ze(this,Sa);Ze(this,ei);Zf(e,Ii,"Signature"),Pe(this,va,n),Pe(this,qs,s),Pe(this,Sa,r),Pe(this,ei,null)}get r(){return je(this,va)}set r(e){te(Nc(e)===32,"invalid r","value",e),Pe(this,va,Se(e))}get s(){return te(parseInt(je(this,qs).substring(0,3))<8,"non-canonical s; use ._s","s",je(this,qs)),je(this,qs)}set s(e){te(Nc(e)===32,"invalid s","value",e),Pe(this,qs,Se(e))}get _s(){return je(this,qs)}isValid(){return BigInt(je(this,qs))<=X8}get v(){return je(this,Sa)}set v(e){const n=Yn(e,"value");te(n===27||n===28,"invalid v","v",e),Pe(this,Sa,n)}get networkV(){return je(this,ei)}get legacyChainId(){const e=this.networkV;return e==null?null:is.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=De(this.s);return this.yParity&&(e[0]|=128),Se(e)}get compactSerialized(){return Bt([this.r,this.yParityAndS])}get serialized(){return Bt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=VE-BigInt(this._s),n=55-this.v,s=new is(Ii,this.r,kp(e),n);return this.networkV&&Pe(s,ei,this.networkV),s}clone(){const e=new is(Ii,this.r,this._s,this.v);return this.networkV&&Pe(e,ei,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[Q8](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=xt(e,"v");return n==Sv||n==kv?wv:(te(n>=bd,"invalid EIP-155 v","v",e),(n-bd)/Tm)}static getChainIdV(e,n){return xt(e)*Tm+BigInt(35+n-27)}static getNormalizedV(e){const n=xt(e);return n===wv||n===Sv?27:n===vv||n===kv?28:(te(n>=bd,"invalid v","v",e),n&vv?27:28)}static from(e){function n(c,u){te(c,u,"signature",e)}if(e==null)return new is(Ii,yv,yv,27);if(typeof e=="string"){const c=De(e,"signature");if(c.length===64){const u=Se(c.slice(0,32)),d=c.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new is(Ii,u,Se(d),f)}if(c.length===65){const u=Se(c.slice(0,32)),d=Se(c.slice(32,64)),f=is.getNormalizedV(c[64]);return new is(Ii,u,d,f)}n(!1,"invalid raw signature length")}if(e instanceof is)return e.clone();const s=e.r;n(s!=null,"missing r");const r=kp(s),i=function(c,u){if(c!=null)return kp(c);if(u!=null){n(nr(u,32),"invalid yParityAndS");const d=De(u);return d[0]&=127,Se(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(c,u,d){if(c!=null){const f=xt(c);return{networkV:f>=bd?f:void 0,v:is.getNormalizedV(f)}}if(u!=null)return n(nr(u,32),"invalid yParityAndS"),{v:De(u)[0]&128?28:27};if(d!=null){switch(Yn(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new is(Ii,r,i,a);return o&&Pe(l,ei,o),n(e.yParity==null||Yn(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};va=new WeakMap,qs=new WeakMap,Sa=new WeakMap,ei=new WeakMap;let As=is;var gr;const Hi=class Hi{constructor(e){Ze(this,gr);te(Nc(e)===32,"invalid private key","privateKey","[REDACTED]"),Pe(this,gr,Se(e))}get privateKey(){return je(this,gr)}get publicKey(){return Hi.computePublicKey(je(this,gr))}get compressedPublicKey(){return Hi.computePublicKey(je(this,gr),!0)}sign(e){te(Nc(e)===32,"invalid digest length","digest",e);const n=Yr.sign(Uo(e),Uo(je(this,gr)),{lowS:!0});return As.from({r:qa(n.r,32),s:qa(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=Hi.computePublicKey(e);return Se(Yr.getSharedSecret(Uo(je(this,gr)),De(n),!1))}static computePublicKey(e,n){let s=De(e,"key");if(s.length===32){const i=Yr.getPublicKey(s,!!n);return Se(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=Yr.ProjectivePoint.fromHex(s);return Se(r.toRawBytes(n))}static recoverPublicKey(e,n){te(Nc(e)===32,"invalid digest length","digest",e);const s=As.from(n);let r=Yr.Signature.fromCompact(Uo(Bt([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(Uo(e));return te(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,s){const r=Yr.ProjectivePoint.fromHex(Hi.computePublicKey(e).substring(2)),i=Yr.ProjectivePoint.fromHex(Hi.computePublicKey(n).substring(2));return"0x"+r.add(i).toHex(!!s)}};gr=new WeakMap;let er=Hi;const J8=BigInt(0),Z8=BigInt(36);function _v(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let r=0;r<40;r++)n[r]=e[r].charCodeAt(0);const s=De(qt(n));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(s[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const Ib={};for(let t=0;t<10;t++)Ib[String(t)]=String(t);for(let t=0;t<26;t++)Ib[String.fromCharCode(65+t)]=String(10+t);const Cv=15;function e6(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(s=>Ib[s]).join("");for(;e.length>=Cv;){let s=e.substring(0,Cv);e=parseInt(s,10)%97+e.substring(s.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const t6=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function n6(t){t=t.toLowerCase();let e=J8;for(let n=0;n<t.length;n++)e=e*Z8+t6[t[n]];return e}function bs(t){if(te(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=_v(t);return te(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){te(t.substring(2,4)===e6(t),"bad icap checksum","address",t);let e=n6(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return _v("0x"+e)}te(!1,"invalid address","address",t)}function s6(t){return t&&typeof t.getAddress=="function"}async function _p(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(it(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),te(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),bs(n)}function Ac(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?bs(t):(it(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),_p(t,e.resolveName(t)));if(s6(t))return _p(t,t.getAddress());if(t&&typeof t.then=="function")return _p(t,t);te(!1,"unsupported addressable value","target",t)}function Cp(t,e){return{address:bs(t),storageKeys:e.map((n,s)=>(te(nr(n,32),"invalid slot",`storageKeys[${s}]`,n),n.toLowerCase()))}}function o0(t){if(Array.isArray(t))return t.map((n,s)=>Array.isArray(n)?(te(n.length===2,"invalid slot set",`value[${s}]`,n),Cp(n[0],n[1])):(te(n!=null&&typeof n=="object","invalid address-slot set","value",t),Cp(n.address,n.storageKeys)));te(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const s=t[n].reduce((r,i)=>(r[i]=!0,r),{});return Cp(n,Object.keys(s).sort())});return e.sort((n,s)=>n.address.localeCompare(s.address)),e}function r6(t){return{address:bs(t.address),nonce:xt(t.nonce!=null?t.nonce:0),chainId:xt(t.chainId!=null?t.chainId:0),signature:As.from(t.signature)}}function Fu(t){let e;return typeof t=="string"?e=er.computePublicKey(t,!1):e=t.publicKey,bs(qt("0x"+e.substring(4)).substring(26))}function i6(t,e){return Fu(er.recoverPublicKey(t,e))}const Gt=BigInt(0),o6=BigInt(2),a6=BigInt(27),l6=BigInt(28),c6=BigInt(35),u6=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),d6=Symbol.for("nodejs.util.inspect.custom"),Ep=4096*32,hh=128;function h6(t){return{blobToKzgCommitment:s=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return De(t.blobToKzgCommitment(Se(s)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return De(t.blobToKzgCommitment(s));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return De(t.blobToKZGCommitment(Se(s)));te(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return De(t.computeBlobProof(Se(s),Se(r)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return De(t.computeBlobKZGProof(Se(s),Se(r)));te(!1,"unsupported KZG library","kzg",t)}}}function Ev(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=xs(e).substring(4),"0x"+n}function yl(t){return t==="0x"?null:bs(t)}function a0(t,e){try{return o0(t)}catch(n){te(!1,n.message,e,t)}}function f6(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let s=0;s<t.length;s++){const r=t[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);n.push({address:yl(r[1]),nonce:pt(r[2],"nonce"),chainId:pt(r[0],"chainId"),signature:As.from({yParity:Po(r[3],"yParity"),r:Si(r[4],32),s:Si(r[5],32)})})}return n}catch(n){te(!1,n.message,e,t)}}function Po(t,e){return t==="0x"?0:Yn(t,e)}function pt(t,e){if(t==="0x")return Gt;const n=xt(t,e);return te(n<=u6,"value exceeds uint size",e,n),n}function nt(t,e){const n=xt(t,"value"),s=Ft(n);return te(s.length<=32,"value too large",`tx.${e}`,n),s}function l0(t){return o0(t).map(e=>[e.address,e.storageKeys])}function p6(t){return t.map(e=>[nt(e.chainId,"chainId"),e.address,nt(e.nonce,"nonce"),nt(e.signature.yParity,"yParity"),Ft(e.signature.r),Ft(e.signature._s)])}function g6(t,e){te(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)te(nr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function m6(t){const e=Au(t);te(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Po(e[0],"nonce"),gasPrice:pt(e[1],"gasPrice"),gasLimit:pt(e[2],"gasLimit"),to:yl(e[3]),value:pt(e[4],"value"),data:Se(e[5]),chainId:Gt};if(e.length===6)return n;const s=pt(e[6],"v"),r=pt(e[7],"r"),i=pt(e[8],"s");if(r===Gt&&i===Gt)n.chainId=s;else{let o=(s-c6)/o6;o<Gt&&(o=Gt),n.chainId=o,te(o!==Gt||s===a6||s===l6,"non-canonical legacy v","v",e[6]),n.signature=As.from({r:Si(e[7],32),s:Si(e[8],32),v:s})}return n}function x6(t,e){const n=[nt(t.nonce,"nonce"),nt(t.gasPrice||0,"gasPrice"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data];let s=Gt;if(t.chainId!=Gt)s=xt(t.chainId,"tx.chainId"),te(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(s=i)}if(!e)return s!==Gt&&(n.push(Ft(s)),n.push("0x"),n.push("0x")),Cr(n);let r=BigInt(27+e.yParity);return s!==Gt?r=As.getChainIdV(s,e.v):BigInt(e.v)!==r&&te(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Ft(r)),n.push(Ft(e.r)),n.push(Ft(e._s)),Cr(n)}function c0(t,e){let n;try{if(n=Po(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{te(!1,"invalid yParity","yParity",e[0])}const s=Si(e[1],32),r=Si(e[2],32),i=As.from({r:s,s:r,yParity:n});t.signature=i}function b6(t){const e=Au(De(t).slice(1));te(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Se(t));const n={type:2,chainId:pt(e[0],"chainId"),nonce:Po(e[1],"nonce"),maxPriorityFeePerGas:pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:pt(e[4],"gasLimit"),to:yl(e[5]),value:pt(e[6],"value"),data:Se(e[7]),accessList:a0(e[8],"accessList")};return e.length===9||c0(n,e.slice(9)),n}function y6(t,e){const n=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),nt(t.maxFeePerGas||0,"maxFeePerGas"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data,l0(t.accessList||[])];return e&&(n.push(nt(e.yParity,"yParity")),n.push(Ft(e.r)),n.push(Ft(e.s))),Bt(["0x02",Cr(n)])}function w6(t){const e=Au(De(t).slice(1));te(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Se(t));const n={type:1,chainId:pt(e[0],"chainId"),nonce:Po(e[1],"nonce"),gasPrice:pt(e[2],"gasPrice"),gasLimit:pt(e[3],"gasLimit"),to:yl(e[4]),value:pt(e[5],"value"),data:Se(e[6]),accessList:a0(e[7],"accessList")};return e.length===8||c0(n,e.slice(8)),n}function v6(t,e){const n=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.gasPrice||0,"gasPrice"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data,l0(t.accessList||[])];return e&&(n.push(nt(e.yParity,"recoveryParam")),n.push(Ft(e.r)),n.push(Ft(e.s))),Bt(["0x01",Cr(n)])}function S6(t){let e=Au(De(t).slice(1)),n="3",s=null,r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];te(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),te(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),te(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),te(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),te(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",s=Yn(e[1]);const o=e[2],a=e[3],l=e[4];te(s===1,`unsupported EIP-7594 network format version: ${s}`,"fields[1]",s),te(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),te(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),te(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),te(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),te(o.length*hh===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<o.length;c++){const u=[];for(let d=0;d<hh;d++)u.push(l[c*hh+d]);r.push({data:o[c],commitment:a[c],proof:Bt(u)})}e=e[0]}te(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Se(t));const i={type:3,chainId:pt(e[0],"chainId"),nonce:Po(e[1],"nonce"),maxPriorityFeePerGas:pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:pt(e[4],"gasLimit"),to:yl(e[5]),value:pt(e[6],"value"),data:Se(e[7]),accessList:a0(e[8],"accessList"),maxFeePerBlobGas:pt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:s};r&&(i.blobs=r),te(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),te(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<i.blobVersionedHashes.length;o++)te(nr(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||c0(i,e.slice(11)),i}function k6(t,e,n){const s=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),nt(t.maxFeePerGas||0,"maxFeePerGas"),nt(t.gasLimit,"gasLimit"),t.to||HE,nt(t.value,"value"),t.data,l0(t.accessList||[]),nt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),g6(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(s.push(nt(e.yParity,"yParity")),s.push(Ft(e.r)),s.push(Ft(e.s)),n)){if(t.blobWrapperVersion!=null){const r=Ft(t.blobWrapperVersion),i=[];for(const{proof:o}of n){const a=De(o),l=a.length/hh;for(let c=0;c<a.length;c+=l)i.push(a.subarray(c,c+l))}return Bt(["0x03",Cr([s,r,n.map(o=>o.data),n.map(o=>o.commitment),i])])}return Bt(["0x03",Cr([s,n.map(r=>r.data),n.map(r=>r.commitment),n.map(r=>r.proof)])])}return Bt(["0x03",Cr(s)])}function _6(t){const e=Au(De(t).slice(1));te(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Se(t));const n={type:4,chainId:pt(e[0],"chainId"),nonce:Po(e[1],"nonce"),maxPriorityFeePerGas:pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:pt(e[4],"gasLimit"),to:yl(e[5]),value:pt(e[6],"value"),data:Se(e[7]),accessList:a0(e[8],"accessList"),authorizationList:f6(e[9],"authorizationList")};return e.length===10||c0(n,e.slice(10)),n}function C6(t,e){const n=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),nt(t.maxFeePerGas||0,"maxFeePerGas"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data,l0(t.accessList||[]),p6(t.authorizationList||[])];return e&&(n.push(nt(e.yParity,"yParity")),n.push(Ft(e.r)),n.push(Ft(e.s))),Bt(["0x04",Cr(n)])}var _s,ka,_a,Ca,Ea,Pa,Ta,Ma,Ia,Da,Na,Aa,Zi,ti,Ks,ni,Ra,Oa,La,fh;const Ys=class Ys{constructor(){Ze(this,La);Ze(this,_s);Ze(this,ka);Ze(this,_a);Ze(this,Ca);Ze(this,Ea);Ze(this,Pa);Ze(this,Ta);Ze(this,Ma);Ze(this,Ia);Ze(this,Da);Ze(this,Na);Ze(this,Aa);Ze(this,Zi);Ze(this,ti);Ze(this,Ks);Ze(this,ni);Ze(this,Ra);Ze(this,Oa);Pe(this,_s,null),Pe(this,ka,null),Pe(this,Ca,0),Pe(this,Ea,Gt),Pe(this,Pa,null),Pe(this,Ta,null),Pe(this,Ma,null),Pe(this,_a,"0x"),Pe(this,Ia,Gt),Pe(this,Da,Gt),Pe(this,Na,null),Pe(this,Aa,null),Pe(this,Zi,null),Pe(this,ti,null),Pe(this,Ks,null),Pe(this,ni,null),Pe(this,Ra,null),Pe(this,Oa,null)}get type(){return je(this,_s)}set type(e){switch(e){case null:Pe(this,_s,null);break;case 0:case"legacy":Pe(this,_s,0);break;case 1:case"berlin":case"eip-2930":Pe(this,_s,1);break;case 2:case"london":case"eip-1559":Pe(this,_s,2);break;case 3:case"cancun":case"eip-4844":Pe(this,_s,3);break;case 4:case"pectra":case"eip-7702":Pe(this,_s,4);break;default:te(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=je(this,ka);return e==null&&this.type===3?HE:e}set to(e){Pe(this,ka,e==null?null:bs(e))}get nonce(){return je(this,Ca)}set nonce(e){Pe(this,Ca,Yn(e,"value"))}get gasLimit(){return je(this,Ea)}set gasLimit(e){Pe(this,Ea,xt(e))}get gasPrice(){const e=je(this,Pa);return e==null&&(this.type===0||this.type===1)?Gt:e}set gasPrice(e){Pe(this,Pa,e==null?null:xt(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=je(this,Ta);return e??(this.type===2||this.type===3?Gt:null)}set maxPriorityFeePerGas(e){Pe(this,Ta,e==null?null:xt(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=je(this,Ma);return e??(this.type===2||this.type===3?Gt:null)}set maxFeePerGas(e){Pe(this,Ma,e==null?null:xt(e,"maxFeePerGas"))}get data(){return je(this,_a)}set data(e){Pe(this,_a,Se(e))}get value(){return je(this,Ia)}set value(e){Pe(this,Ia,xt(e,"value"))}get chainId(){return je(this,Da)}set chainId(e){Pe(this,Da,xt(e))}get signature(){return je(this,Na)||null}set signature(e){Pe(this,Na,e==null?null:As.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const s of n)if(!s.signature.isValid())return!1}return!0}get accessList(){const e=je(this,Aa)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){Pe(this,Aa,e==null?null:o0(e))}get authorizationList(){const e=je(this,Ra)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){Pe(this,Ra,e==null?null:e.map(n=>r6(n)))}get maxFeePerBlobGas(){const e=je(this,Zi);return e==null&&this.type===3?Gt:e}set maxFeePerBlobGas(e){Pe(this,Zi,e==null?null:xt(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=je(this,ti);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){te(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)te(nr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}Pe(this,ti,e)}get blobs(){return je(this,ni)==null?null:je(this,ni).map(e=>Object.assign({},e))}set blobs(e){if(e==null){Pe(this,ni,null);return}const n=[],s=[];for(let r=0;r<e.length;r++){const i=e[r];if(e0(i)){it(je(this,Ks),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=De(i);if(te(o.length<=Ep,"blob is too large",`blobs[${r}]`,i),o.length!==Ep){const c=new Uint8Array(Ep);c.set(o),o=c}const a=je(this,Ks).blobToKzgCommitment(o),l=Se(je(this,Ks).computeBlobKzgProof(o,a));n.push({data:Se(o),commitment:Se(a),proof:l}),s.push(Ev(1,a))}else{const o=Se(i.data),a=Se(i.commitment),l=Se(i.proof);n.push({data:o,commitment:a,proof:l}),s.push(Ev(1,a))}}Pe(this,ni,n),Pe(this,ti,s)}get kzg(){return je(this,Ks)}set kzg(e){e==null?Pe(this,Ks,null):Pe(this,Ks,h6(e))}get blobWrapperVersion(){return je(this,Oa)}set blobWrapperVersion(e){Pe(this,Oa,e)}get hash(){return this.signature==null?null:qt(an(this,La,fh).call(this,!0,!1))}get unsignedHash(){return qt(this.unsignedSerialized)}get from(){return this.signature==null?null:i6(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:er.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return an(this,La,fh).call(this,!0,!0)}get unsignedSerialized(){return an(this,La,fh).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=je(this,Zi)!=null||je(this,ti);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&it(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),it(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),it(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ys.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[d6](){return this.toString()}toString(){const e=[],n=r=>{let i=this[r];typeof i=="string"&&(i=JSON.stringify(i)),e.push(`${r}: ${i}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const s=this.authorizationList;if(s){const r=[];for(const i of s){const o=[];o.push(`address: ${JSON.stringify(i.address)}`),i.nonce!=null&&o.push(`nonce: ${i.nonce}`),i.chainId!=null&&o.push(`chainId: ${i.chainId}`),i.signature&&o.push(`signature: ${i.signature.toString()}`),r.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${r.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new Ys;if(typeof e=="string"){const s=De(e);if(s[0]>=127)return Ys.from(m6(s));switch(s[0]){case 1:return Ys.from(w6(s));case 2:return Ys.from(b6(s));case 3:return Ys.from(S6(s));case 4:return Ys.from(_6(s))}it(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Ys;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=As.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(te(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),te(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(te(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),te(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};_s=new WeakMap,ka=new WeakMap,_a=new WeakMap,Ca=new WeakMap,Ea=new WeakMap,Pa=new WeakMap,Ta=new WeakMap,Ma=new WeakMap,Ia=new WeakMap,Da=new WeakMap,Na=new WeakMap,Aa=new WeakMap,Zi=new WeakMap,ti=new WeakMap,Ks=new WeakMap,ni=new WeakMap,Ra=new WeakMap,Oa=new WeakMap,La=new WeakSet,fh=function(e,n){it(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return x6(this,s);case 1:return v6(this,s);case 2:return y6(this,s);case 3:return k6(this,s,n?this.blobs:null);case 4:return C6(this,s)}it(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Zh=Ys;function E6(t){return te(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),qt(Bt(["0x05",Cr([t.chainId!=null?Ft(t.chainId):"0x",bs(t.address),t.nonce!=null?Ft(t.nonce):"0x"])]))}function Db(t){return qt(ro(t))}function P6(t){return typeof t=="string"&&(t=ro(t)),qt(Bt([ro(K8),ro(String(t.length)),t]))}const YE=new Uint8Array(32);YE.fill(0);const T6=BigInt(-1),GE=BigInt(0),qE=BigInt(1),M6=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function I6(t){const e=De(t),n=e.length%32;return n?Bt([e,YE.slice(n)]):Se(e)}const D6=qa(qE,32),N6=qa(GE,32),Pv={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Pp=["name","version","chainId","verifyingContract","salt"];function Tv(t){return function(e){return te(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const A6={name:Tv("name"),version:Tv("version"),chainId:function(t){const e=xt(t,"domain.chainId");return te(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):aI(e)},verifyingContract:function(t){try{return bs(t).toLowerCase()}catch{}te(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=De(t,"domain.salt");return te(e.length===32,'invalid domain value "salt"',"domain.salt",t),Se(e)}};function Tp(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",s=parseInt(e[2]);te(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",t);const r=oI(M6,n?s-1:s),i=n?(r+qE)*T6:GE;return function(o){const a=xt(o,"value");return te(a>=i&&a<=r,`value out-of-bounds for ${t}`,"value",a),qa(n?iI(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return te(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(s){const r=De(s);return te(r.length===n,`invalid length for ${t}`,"value",s),I6(s)}}}switch(t){case"address":return function(e){return Si(bs(e),32)};case"bool":return function(e){return e?D6:N6};case"bytes":return function(e){return qt(e)};case"string":return function(e){return Db(e)}}return null}function Mv(t,e){return`${t}(${e.map(({name:n,type:s})=>s+" "+n).join(",")})`}function yd(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var _u,mr,ja,Of,KE;const os=class os{constructor(e){Ze(this,Of);ie(this,"primaryType");Ze(this,_u);Ze(this,mr);Ze(this,ja);Pe(this,mr,new Map),Pe(this,ja,new Map);const n=new Map,s=new Map,r=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:c,type:u})=>{let{base:d,index:f}=yd(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:c,type:d+(f||"")}}),n.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),Pe(this,_u,JSON.stringify(i));for(const l in i){const c=new Set;for(const u of i[l]){te(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const d=yd(u.type).base;te(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",e),!Tp(d)&&(te(s.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),s.get(d).push(l),n.get(l).add(d))}}const o=Array.from(s.keys()).filter(l=>s.get(l).length===0);te(o.length!==0,"missing primary type","types",e),te(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Vn(this,{primaryType:o[0]});function a(l,c){te(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(s.has(u)){a(u,c);for(const d of c)r.get(d).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of r){const u=Array.from(c);u.sort(),je(this,mr).set(l,Mv(l,i[l])+u.map(d=>Mv(d,i[d])).join(""))}}get types(){return JSON.parse(je(this,_u))}getEncoder(e){let n=je(this,ja).get(e);return n||(n=an(this,Of,KE).call(this,e),je(this,ja).set(e,n)),n}encodeType(e){const n=je(this,mr).get(e);return te(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return qt(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,s){if(Tp(e))return s(e,n);const r=yd(e).array;if(r)return te(r.count===-1||r.count===n.length,`array length mismatch; expected length ${r.count}`,"value",n),n.map(o=>this._visit(r.prefix,o,s));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],s),o),{});te(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new os(e)}static getPrimaryType(e){return os.from(e).primaryType}static hashStruct(e,n,s){return os.from(n).hashStruct(e,s)}static hashDomain(e){const n=[];for(const s in e){if(e[s]==null)continue;const r=Pv[s];te(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),n.push({name:s,type:r})}return n.sort((s,r)=>Pp.indexOf(s.name)-Pp.indexOf(r.name)),os.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,s){return Bt(["0x1901",os.hashDomain(e),os.from(n).hash(s)])}static hash(e,n,s){return qt(os.encode(e,n,s))}static async resolveNames(e,n,s,r){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!nr(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=os.from(n);o.visit(s,(a,l)=>(a==="address"&&!nr(l,20)&&(i[l]="0x"),l));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),s=o.visit(s,(a,l)=>a==="address"&&i[l]?i[l]:l),{domain:e,value:s}}static getPayload(e,n,s){os.hashDomain(e);const r={},i=[];Pp.forEach(l=>{const c=e[l];c!=null&&(r[l]=A6[l](c),i.push({name:l,type:Pv[l]}))});const o=os.from(n);n=o.types;const a=Object.assign({},n);return te(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(s),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(s,(l,c)=>{if(l.match(/^bytes(\d*)/))return Se(De(c));if(l.match(/^u?int/))return xt(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return te(typeof c=="string","invalid string","value",c),c}te(!1,"unsupported type","type",l)})}}};_u=new WeakMap,mr=new WeakMap,ja=new WeakMap,Of=new WeakSet,KE=function(e){{const r=Tp(e);if(r)return r}const n=yd(e).array;if(n){const r=n.prefix,i=this.getEncoder(r);return o=>{te(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return je(this,mr).has(r)&&(a=a.map(qt)),qt(Bt(a))}}const s=this.types[e];if(s){const r=Db(je(this,mr).get(e));return i=>{const o=s.map(({name:a,type:l})=>{const c=this.getEncoder(l)(i[a]);return je(this,mr).has(l)?qt(c):c});return o.unshift(r),Bt(o)}}te(!1,`unknown type: ${e}`,"type",e)};let ef=os;BigInt(0);function XE(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Se(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of n)!(r in t)||t[r]==null||(e[r]=xt(t[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in t)||t[r]==null||(e[r]=Yn(t[r],`request.${r}`));return t.accessList&&(e.accessList=o0(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(r=>e0(r)?Se(r):Object.assign({},r))),e}function Di(t,e){if(t.provider)return t.provider;it(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Iv(t,e){let n=XE(e);if(n.to!=null&&(n.to=Ac(n.to,t)),n.from!=null){const s=n.from;n.from=Promise.all([t.getAddress(),Ac(s,t)]).then(([r,i])=>(te(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else n.from=t.getAddress();return await gb(n)}class QE{constructor(e){ie(this,"provider");Vn(this,{provider:e||null})}async getNonce(e){return Di(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Iv(this,e)}async populateTransaction(e){const n=Di(this,"populateTransaction"),s=await Iv(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const o=xt(s.chainId);te(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?te(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&i&&te(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const o=await n.getFeeData();it(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(s.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const a=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=a,s.maxPriorityFeePerGas=a}else s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(it(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice),s.type=0):it(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await gb(s)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Di(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Di(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Di(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Di(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Di(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const r=Zh.from(s);return await n.broadcastTransaction(await this.signTransaction(r))}authorize(e){it(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var Fa,ph;const Fy=class Fy extends QE{constructor(n,s){super(s);Ze(this,Fa);ie(this,"address");Vn(this,{address:n})}async getAddress(){return this.address}connect(n){return new Fy(this.address,n)}async signTransaction(n){an(this,Fa,ph).call(this,"transactions","signTransaction")}async signMessage(n){an(this,Fa,ph).call(this,"messages","signMessage")}async signTypedData(n,s,r){an(this,Fa,ph).call(this,"typed-data","signTypedData")}};Fa=new WeakSet,ph=function(n,s){it(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:s})};let Mm=Fy;var Ba;const By=class By extends QE{constructor(n,s){super(s);ie(this,"address");Ze(this,Ba);te(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),Pe(this,Ba,n);const r=Fu(this.signingKey.publicKey);Vn(this,{address:r})}get signingKey(){return je(this,Ba)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new By(je(this,Ba),n)}async signTransaction(n){n=XE(n);const{to:s,from:r}=await gb({to:n.to?Ac(n.to,this):void 0,from:n.from?Ac(n.from,this):void 0});s!=null&&(n.to=s),r!=null&&(n.from=r),n.from!=null&&(te(bs(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const i=Zh.from(n);return i.signature=this.signingKey.sign(i.unsignedHash),i.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(P6(n)).serialized}authorizeSync(n){te(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const s=this.signingKey.sign(E6(n));return Object.assign({},{address:bs(n.address),nonce:xt(n.nonce||0),chainId:xt(n.chainId||0)},{signature:s})}async authorize(n){return n=Object.assign({},n,{address:await Ac(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,s,r){const i=await ef.resolveNames(n,s,r,async o=>{it(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return it(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(ef.hash(i.domain,s,i.value)).serialized}};Ba=new WeakMap;let Im=By;const tf=" !#$%&'()*+,-./<=>?@[]^_`{|}~",R6=/^[a-z]*$/i;function Dv(t,e){let n=97;return t.reduce((s,r)=>(r===e?n++:r.match(R6)?s.push(String.fromCharCode(n)+r):(n=97,s.push(r)),s),[])}function O6(t,e){for(let r=tf.length-1;r>=0;r--)t=t.split(tf[r]).join(e.substring(2*r,2*r+2));const n=[],s=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(r,i,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(i.toLowerCase());return""});if(s)throw new Error(`leftovers: ${JSON.stringify(s)}`);return Dv(Dv(n,";"),":")}function L6(t){return te(t[0]==="0","unsupported auwl data","data",t),O6(t.substring(1+2*tf.length),t.substring(1,1+2*tf.length))}class j6{constructor(e){ie(this,"locale");Vn(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var $a,Cu,eo,Eu,Dm;class F6 extends j6{constructor(n,s,r){super(n);Ze(this,Eu);Ze(this,$a);Ze(this,Cu);Ze(this,eo);Pe(this,$a,s),Pe(this,Cu,r),Pe(this,eo,null)}get _data(){return je(this,$a)}_decodeWords(){return L6(je(this,$a))}getWord(n){const s=an(this,Eu,Dm).call(this);return te(n>=0&&n<s.length,`invalid word index: ${n}`,"index",n),s[n]}getWordIndex(n){return an(this,Eu,Dm).call(this).indexOf(n)}}$a=new WeakMap,Cu=new WeakMap,eo=new WeakMap,Eu=new WeakSet,Dm=function(){if(je(this,eo)==null){const n=this._decodeWords();if(Db(n.join(`
`)+`
`)!==je(this,Cu))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);Pe(this,eo,n)}return je(this,eo)};const B6="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",$6="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let Mp=null;class mo extends F6{constructor(){super("en",B6,$6)}static wordlist(){return Mp==null&&(Mp=new mo),Mp}}function JE(t){return(1<<t)-1<<8-t&255}function z6(t){return(1<<t)-1&255}function Ip(t,e){WC("NFKD"),e==null&&(e=mo.wordlist());const n=e.split(t);te(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const s=new Uint8Array(Math.ceil(11*n.length/8));let r=0;for(let c=0;c<n.length;c++){let u=e.getWordIndex(n[c].normalize("NFKD"));te(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let d=0;d<11;d++)u&1<<10-d&&(s[r>>3]|=1<<7-r%8),r++}const i=32*n.length/3,o=n.length/3,a=JE(o),l=De(xs(s.slice(0,i/8)))[0]&a;return te(l===(s[s.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),Se(s.slice(0,i/8))}function Dp(t,e){te(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=mo.wordlist());const n=[0];let s=11;for(let o=0;o<t.length;o++)s>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],s-=8):(n[n.length-1]<<=s,n[n.length-1]|=t[o]>>8-s,n.push(t[o]&z6(8-s)),s+=3);const r=t.length/4,i=parseInt(xs(t).substring(2,4),16)&JE(r);return n[n.length-1]<<=r,n[n.length-1]|=i>>8-r,e.join(n.map(o=>e.getWord(o)))}const Np={};class lu{constructor(e,n,s,r,i){ie(this,"phrase");ie(this,"password");ie(this,"wordlist");ie(this,"entropy");r==null&&(r=""),i==null&&(i=mo.wordlist()),Zf(e,Np,"Mnemonic"),Vn(this,{phrase:s,password:r,wordlist:i,entropy:n})}computeSeed(){const e=ro("mnemonic"+this.password,"NFKD");return Ru(ro(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,s){const r=Ip(e,s);return e=Dp(De(r),s),new lu(Np,r,e,n,s)}static fromEntropy(e,n,s){const r=De(e,"entropy"),i=Dp(r,s);return new lu(Np,Se(r),i,n,s)}static entropyToPhrase(e,n){const s=De(e,"entropy");return Dp(s,n)}static phraseToEntropy(e,n){return Ip(e,n)}static isValidMnemonic(e,n){try{return Ip(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Jt=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},Ap=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},gh,ss,Us;const U6={16:10,24:12,32:14},W6=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],es=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],wd=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],H6=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],V6=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Y6=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],G6=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],q6=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],K6=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],X6=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Q6=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],J6=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Z6=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],eD=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],tD=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Rp(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class Nb{get key(){return Jt(this,gh,"f").slice()}constructor(e){if(gh.set(this,void 0),ss.set(this,void 0),Us.set(this,void 0),!(this instanceof Nb))throw Error("AES must be instanitated with `new`");Ap(this,gh,new Uint8Array(e),"f");const n=U6[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");Ap(this,Us,[],"f"),Ap(this,ss,[],"f");for(let u=0;u<=n;u++)Jt(this,Us,"f").push([0,0,0,0]),Jt(this,ss,"f").push([0,0,0,0]);const s=(n+1)*4,r=this.key.length/4,i=Rp(this.key);let o;for(let u=0;u<r;u++)o=u>>2,Jt(this,Us,"f")[o][u%4]=i[u],Jt(this,ss,"f")[n-o][u%4]=i[u];let a=0,l=r,c;for(;l<s;){if(c=i[r-1],i[0]^=es[c>>16&255]<<24^es[c>>8&255]<<16^es[c&255]<<8^es[c>>24&255]^W6[a]<<24,a+=1,r!=8)for(let p=1;p<r;p++)i[p]^=i[p-1];else{for(let p=1;p<r/2;p++)i[p]^=i[p-1];c=i[r/2-1],i[r/2]^=es[c&255]^es[c>>8&255]<<8^es[c>>16&255]<<16^es[c>>24&255]<<24;for(let p=r/2+1;p<r;p++)i[p]^=i[p-1]}let u=0,d,f;for(;u<r&&l<s;)d=l>>2,f=l%4,Jt(this,Us,"f")[d][f]=i[u],Jt(this,ss,"f")[n-d][f]=i[u++],l++}for(let u=1;u<n;u++)for(let d=0;d<4;d++)c=Jt(this,ss,"f")[u][d],Jt(this,ss,"f")[u][d]=J6[c>>24&255]^Z6[c>>16&255]^eD[c>>8&255]^tD[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=Jt(this,Us,"f").length-1,s=[0,0,0,0];let r=Rp(e);for(let a=0;a<4;a++)r[a]^=Jt(this,Us,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=H6[r[l]>>24&255]^V6[r[(l+1)%4]>>16&255]^Y6[r[(l+2)%4]>>8&255]^G6[r[(l+3)%4]&255]^Jt(this,Us,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Jt(this,Us,"f")[n][a],i[4*a]=(es[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(es[r[(a+1)%4]>>16&255]^o>>16)&255,i[4*a+2]=(es[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(es[r[(a+3)%4]&255]^o)&255;return i}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=Jt(this,ss,"f").length-1,s=[0,0,0,0];let r=Rp(e);for(let a=0;a<4;a++)r[a]^=Jt(this,ss,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=q6[r[l]>>24&255]^K6[r[(l+3)%4]>>16&255]^X6[r[(l+2)%4]>>8&255]^Q6[r[(l+1)%4]&255]^Jt(this,ss,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Jt(this,ss,"f")[n][a],i[4*a]=(wd[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(wd[r[(a+3)%4]>>16&255]^o>>16)&255,i[4*a+2]=(wd[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(wd[r[(a+1)%4]&255]^o)&255;return i}}gh=new WeakMap,ss=new WeakMap,Us=new WeakMap;class nD{constructor(e,n,s){if(s&&!(this instanceof s))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Nb(n)},name:{enumerable:!0,value:e}})}}var Lo=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},ts=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},uc,Fi,rs;class nf extends nD{constructor(e,n){super("CTR",e,nf),uc.set(this,void 0),Fi.set(this,void 0),rs.set(this,void 0),Lo(this,rs,new Uint8Array(16),"f"),ts(this,rs,"f").fill(0),Lo(this,uc,ts(this,rs,"f"),"f"),Lo(this,Fi,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(ts(this,rs,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)ts(this,rs,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");ts(this,rs,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(ts(this,rs,"f")[e]===255)ts(this,rs,"f")[e]=0;else{ts(this,rs,"f")[e]++;break}}encrypt(e){var n,s;const r=new Uint8Array(e);for(let i=0;i<r.length;i++)ts(this,Fi,"f")===16&&(Lo(this,uc,this.aes.encrypt(ts(this,rs,"f")),"f"),Lo(this,Fi,0,"f"),this.increment()),r[i]^=ts(this,uc,"f")[Lo(this,Fi,(s=ts(this,Fi,"f"),n=s++,s),"f"),n];return r}decrypt(e){return this.encrypt(e)}}uc=new WeakMap,Fi=new WeakMap,rs=new WeakMap;function $l(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function ZE(t){return typeof t=="string"?ro(t,"NFKC"):Uo(t)}const sD="m/44'/60'/0'/0/0";function e5(t){const e=t.salt!=null?De(t.salt,"options.salt"):Er(32);let n=1<<17,s=8,r=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(s=t.scrypt.r),t.scrypt.p&&(r=t.scrypt.p)),te(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),te(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt r parameter","options.r",s),te(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt p parameter","options.p",r),{name:"scrypt",dkLen:32,salt:e,N:n,r:s,p:r}}function t5(t,e,n,s){const r=De(n.privateKey,"privateKey"),i=s.iv!=null?De(s.iv,"options.iv"):Er(16);te(i.length===16,"invalid options.iv length","options.iv",s.iv);const o=s.uuid!=null?De(s.uuid,"options.uuid"):Er(16);te(o.length===16,"invalid options.uuid length","options.uuid",s.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new nf(a,i),u=De(c.encrypt(r)),d=qt(Bt([l,u])),f={address:n.address.substring(2).toLowerCase(),id:fI(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Se(i).substring(2)},ciphertext:Se(u).substring(2),kdf:"scrypt",kdfparams:{salt:Se(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:d.substring(2)}};if(n.mnemonic){const p=s.client!=null?s.client:`ethers/${UC}`,m=n.mnemonic.path||sD,x=n.mnemonic.locale||"en",v=t.slice(32,64),g=De(n.mnemonic.entropy,"account.mnemonic.entropy"),b=Er(16),w=new nf(v,b),y=De(w.encrypt(g)),k=new Date,E="UTC--"+(k.getUTCFullYear()+"-"+$l(k.getUTCMonth()+1,2)+"-"+$l(k.getUTCDate(),2)+"T"+$l(k.getUTCHours(),2)+"-"+$l(k.getUTCMinutes(),2)+"-"+$l(k.getUTCSeconds(),2)+".0Z")+"--"+f.address;f["x-ethers"]={client:p,gethFilename:E,path:m,locale:x,mnemonicCounter:Se(b).substring(2),mnemonicCiphertext:Se(y).substring(2),version:"0.1"}}return JSON.stringify(f)}function rD(t,e,n){n==null&&(n={});const s=ZE(e),r=e5(n),i=Lu(s,r.salt,r.N,r.r,r.p,64);return t5(De(i),r,t,n)}async function iD(t,e,n){n==null&&(n={});const s=ZE(e),r=e5(n),i=await Ou(s,r.salt,r.N,r.r,r.p,64,n.progressCallback);return t5(De(i),r,t,n)}const Op="m/44'/60'/0'/0/0",oD=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),xi=2147483648,aD=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),lD="0123456789abcdef";function sf(t,e){let n="";for(;t;)n=lD[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function Nm(t){const e=De(t),n=mb(xs(xs(e)),0,4),s=Bt([e,n]);return uI(s)}const Gs={};function n5(t,e,n,s){const r=new Uint8Array(37);t&xi?(it(s!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),r.set(De(s),1)):r.set(De(n));for(let o=24;o>=0;o-=8)r[33+(o>>3)]=t>>24-o&255;const i=De(xl("sha512",e,r));return{IL:i.slice(0,32),IR:i.slice(32)}}function s5(t,e){const n=e.split("/");te(n.length>0,"invalid path","path",e),n[0]==="m"&&(te(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let s=t;for(let r=0;r<n.length;r++){const i=n[r];if(i.match(/^[0-9]+'$/)){const o=parseInt(i.substring(0,i.length-1));te(o<xi,"invalid path index",`path[${r}]`,i),s=s.deriveChild(xi+o)}else if(i.match(/^[0-9]+$/)){const o=parseInt(i);te(o<xi,"invalid path index",`path[${r}]`,i),s=s.deriveChild(o)}else te(!1,"invalid path component",`path[${r}]`,i)}return s}var Pu,Am,to,dc;const vs=class vs extends Im{constructor(n,s,r,i,o,a,l,c,u){super(s,u);Ze(this,Pu);ie(this,"publicKey");ie(this,"fingerprint");ie(this,"parentFingerprint");ie(this,"mnemonic");ie(this,"chainCode");ie(this,"path");ie(this,"index");ie(this,"depth");Zf(n,Gs,"HDNodeWallet"),Vn(this,{publicKey:s.compressedPublicKey});const d=mb(bl(xs(this.publicKey)),0,4);Vn(this,{parentFingerprint:r,fingerprint:d,chainCode:i,path:o,index:a,depth:l}),Vn(this,{mnemonic:c})}connect(n){return new vs(Gs,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,s){return await iD(an(this,Pu,Am).call(this),n,{progressCallback:s})}encryptSync(n){return rD(an(this,Pu,Am).call(this),n)}get extendedKey(){return it(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Nm(Bt(["0x0488ADE4",sf(this.depth,1),this.parentFingerprint,sf(this.index,4),this.chainCode,Bt(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new uu(Gs,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const s=Yn(n,"index");te(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~xi),s&xi&&(r+="'"));const{IR:i,IL:o}=n5(s,this.chainCode,this.publicKey,this.privateKey),a=new er(qa((VC(o)+BigInt(this.privateKey))%aD,32));return new vs(Gs,a,this.fingerprint,Se(i),r,s,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return s5(this,n)}static fromExtendedKey(n){const s=Ft(dI(n));te(s.length===82||Nm(s.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const r=s[4],i=Se(s.slice(5,9)),o=parseInt(Se(s.slice(9,13)).substring(2),16),a=Se(s.slice(13,45)),l=s.slice(45,78);switch(Se(s.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=Se(l);return new uu(Gs,Fu(c),c,i,a,null,o,r,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new vs(Gs,new er(l.slice(1)),i,a,null,o,r,null,null)}te(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,s,r){var o;n==null&&(n=""),s==null&&(s=Op),r==null&&(r=mo.wordlist());const i=lu.fromEntropy(Er(16),n,r);return an(o=vs,to,dc).call(o,i.computeSeed(),i).derivePath(s)}static fromMnemonic(n,s){var r;return s||(s=Op),an(r=vs,to,dc).call(r,n.computeSeed(),n).derivePath(s)}static fromPhrase(n,s,r,i){var a;s==null&&(s=""),r==null&&(r=Op),i==null&&(i=mo.wordlist());const o=lu.fromPhrase(n,s,i);return an(a=vs,to,dc).call(a,o.computeSeed(),o).derivePath(r)}static fromSeed(n){var s;return an(s=vs,to,dc).call(s,n,null)}};Pu=new WeakSet,Am=function(){const n={address:this.address,privateKey:this.privateKey},s=this.mnemonic;return this.path&&s&&s.wordlist.locale==="en"&&s.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:s.entropy}),n},to=new WeakSet,dc=function(n,s){te(e0(n),"invalid seed","seed","[REDACTED]");const r=De(n,"seed");te(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const i=De(xl("sha512",oD,r)),o=new er(Se(i.slice(0,32)));return new vs(Gs,o,"0x00000000",Se(i.slice(32)),"m",0,0,s,null)},Ze(vs,to);let cu=vs;class uu extends Mm{constructor(n,s,r,i,o,a,l,c,u){super(s,u);ie(this,"publicKey");ie(this,"fingerprint");ie(this,"parentFingerprint");ie(this,"chainCode");ie(this,"path");ie(this,"index");ie(this,"depth");Zf(n,Gs,"HDNodeVoidWallet"),Vn(this,{publicKey:r});const d=mb(bl(xs(r)),0,4);Vn(this,{publicKey:r,fingerprint:d,parentFingerprint:i,chainCode:o,path:a,index:l,depth:c})}connect(n){return new uu(Gs,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return it(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Nm(Bt(["0x0488B21E",sf(this.depth,1),this.parentFingerprint,sf(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const s=Yn(n,"index");te(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~xi),s&xi&&(r+="'"));const{IR:i,IL:o}=n5(s,this.chainCode,this.publicKey,null),a=er.addPoints(o,this.publicKey,!0),l=Fu(a);return new uu(Gs,l,a,this.fingerprint,Se(i),r,s,this.depth+1,this.provider)}derivePath(n){return s5(this,n)}}class Nv{constructor(e){ie(this,"mnemonic");ie(this,"walletAddress");ie(this,"chainID");this.mnemonic=e.mnemonic,this.walletAddress=e.walletAddress,this.chainID=e.chainID||10900}generateTxID(){const e=Date.now(),n=Math.floor(Math.random()*1e6);return`tx-${e}-${n}`}async getPrivateKeyHex(){const e=cu.fromPhrase(this.mnemonic.trim(),"","m/44'/60'/0'/0/0");if(e.address.toLowerCase()!==this.walletAddress.toLowerCase())throw new Error(`Address mismatch: derived ${e.address} does not match ${this.walletAddress}`);const n=BigInt(e.privateKey),s=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(n===0n||n>=s)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const i=n.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(i))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return i}async signPayload(e){const n=await this.getPrivateKeyHex(),s=Math.floor(Date.now()/1e3);let r;e.deadline&&(r=parseInt(e.deadline,10));const i={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:s,payload:e};r!==void 0&&(i.deadline=r);const o=await We.generateSingleSignature(JSON.stringify(i),n,this.walletAddress.toLowerCase());if(!o.success||!o.signature)throw new Error(o.error||"Failed to generate signature");return o.signature}async buildCompleteMessage(e,n,s=3600){const i=Math.floor(Date.now()/1e3)+s,o=await n.getNextNonce();return{...e,owner:this.walletAddress,nonce:o,deadline:i.toString()}}buildEIP712Tx(e,n,s){const r=Math.floor(Date.now()/1e3);let i;e.deadline&&(i=parseInt(e.deadline,10));const o={txId:s||this.generateTxID(),sigType:1,threshold:1,timestamp:r,payload:e,signatures:[{signer:this.walletAddress,signature:n}]};return i!==void 0&&(o.deadline=i),o}getWalletAddress(){return this.walletAddress}getChainID(){return this.chainID}}const Ab="sys::onboard",cD="clob::change_margin_ratio",uD="clob::submit_order",Av="clob::cancel_order",Rv="bucket::close_position",dD="clob::modify_order",hD="clob::change_leverage",fD="clob::inter_transfer",pD="clob::swap",gD="bank::mint",mD="bank::extract_to_bucket",xD="bank::withdraw_from_bucket",bD="bank::bucket_transfer",yD="bank::transfer";var ut=(t=>(t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t))(ut||{});function r5(t,e){const n=t.bucket_id||"---",s=r=>r==null||r===""?0:typeof r=="string"||typeof r=="number"?e(r):0;return{bucketId:n,address:t.address||"",totalEquity:s(t.total_equity||t.dedicated_margin),dedicatedMargin:s(t.dedicated_margin),usedMargin:s(t.used_margin),availableMargin:s(t.available_margin),totalPositions:t.total_positions||0,unrealizedPnL:s(t.unrealized_pnl),leverage:typeof t.max_leverage=="string"?parseFloat(t.max_leverage):typeof t.max_leverage=="number"?t.max_leverage:0,maxLeverage:typeof t.max_leverage=="string"?parseFloat(t.max_leverage):typeof t.max_leverage=="number"?t.max_leverage:0,marginMode:t.margin_type||"CROSS",liquidationPrice:s(t.liquidation_price),riskLevel:t.risk_level||"",riskFactor:t.risk_factor||"",bucketType:t.bucket_type||"",collateralAsset:t.collateral_asset||"",lastUpdated:typeof t.last_updated=="string"?parseInt(t.last_updated,10):typeof t.last_updated=="number"?t.last_updated:0}}function wD(t){const e=t.totalEquity>0?Math.min(Math.max(t.usedMargin/t.totalEquity,0),1):0,n=t.totalEquity>0?t.usedMargin/t.totalEquity:0,s=t.marginMode==="ISOLATED"||t.marginMode==="Isolated"||t.marginMode==="ISOLATE"||t.marginMode==="isolated"?"Isolated":"Cross";return{bucketId:String(t.bucketId),marginType:s,maintenanceMargin:t.usedMargin,nominalValue:t.totalEquity,riskRatio:e,unrealizedPnL:t.unrealizedPnL,leverage:t.leverage,usedMargin:t.usedMargin,totalEquity:t.totalEquity,availableMargin:t.availableMargin,crossMarginRatio:n}}function zl(t){return t!==null&&typeof t=="object"&&typeof t.price=="number"&&typeof t.market_id=="string"&&typeof t.quantity=="number"&&typeof t.timestamp=="number"&&typeof t.is_buyer_maker=="boolean"&&typeof t.trade_id=="string"}function Lp(t){return t!==null&&typeof t=="object"&&typeof t.symbol=="string"&&typeof t.mark_price=="number"&&typeof t.timestamp=="number"}class wl{constructor(e){ie(this,"httpClient");ie(this,"infoClient");ie(this,"nonceManager");ie(this,"mnemonic");ie(this,"chainID");ie(this,"walletAddress");ie(this,"nonceCounter",null);ie(this,"signatureBuilder");this.httpClient=new fb(e.baseURL,e.maxRetries||3),this.infoClient=new pn({baseURL:e.baseURL}),this.nonceManager=new zC(this.infoClient),this.mnemonic=e.mnemonic,this.chainID=e.chainID||10900}getSignatureBuilder(){if(!this.signatureBuilder){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");this.signatureBuilder=new Nv({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}return this.signatureBuilder}getNonceProvider(){return{getNextNonce:()=>this.getNextNonce()}}async initialize(){await We.initialize();const e=await We.generateAddress(this.mnemonic,0);if(!e.success||!e.address)throw new Error(`Failed to generate wallet address: ${e.error}`);this.walletAddress=e.address,this.signatureBuilder=new Nv({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}getWalletAddress(){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");return this.walletAddress}async refreshNonceFromServer(){const e=this.getWalletAddress(),n=await this.nonceManager.getExpectedNextNonce(e,!1);this.nonceCounter=n.next_nonce,console.log("[ExchangeClient] Refreshed nonce from server",{walletAddress:e,newNonce:this.nonceCounter})}async getNextNonce(){return this.nonceCounter===null&&await this.refreshNonceFromServer(),this.nonceCounter++,this.nonceCounter.toString()}buildOrderPayload(e){const n=ct(e.price),s=ct(e.quantity),r={action:uD,marketId:e.marketId,side:e.side.toUpperCase(),orderType:e.orderType.toUpperCase(),price:n,quantity:s};return e.leverage&&(r.leverage=e.leverage),e.takeProfit&&(r.takeProfit=e.takeProfit),e.stopLoss&&(r.stopLoss=e.stopLoss),r}async placeOrder(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.side||e.side.toUpperCase()!=="BUY"&&e.side.toUpperCase()!=="SELL")throw new Error("side must be BUY or SELL");if(!e.orderType||e.orderType.toUpperCase()!=="LIMIT"&&e.orderType.toUpperCase()!=="MARKET")throw new Error("orderType must be LIMIT or MARKET");if(!e.price||e.price<=0)throw new Error("price must be positive");if(!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");this.walletAddress||await this.initialize();const n=this.buildOrderPayload(e),s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=Math.floor(Date.now()/1e3)-5,a=`order-${Date.now()}-${Math.floor(Math.random()*1e6)}`,l=e.side.toUpperCase()==="BUY",c={address:this.getWalletAddress(),asset_pair:e.marketId,market_id:e.marketId,price:r.price,size:r.quantity,is_buy:l,order_type:e.orderType.toUpperCase(),timestamp:o,client_order_id:a,nonce:r.nonce,deadline:r.deadline,signature:i,time_in_force:e.timeInForce||"GTC"};return e.leverage&&(c.leverage=e.leverage),e.takeProfit&&(c.take_profit=e.takeProfit),e.stopLoss&&(c.stop_loss=e.stopLoss),e.postOnly&&(c.post_only=!0),e.hidden&&(c.hidden=!0),e.displayQuantity&&(c.display_quantity=e.displayQuantity),e.reduceOnly&&(c.reduce_only=!0),(await this.httpClient.post("/clob/v1/order",c)).body}async cancelOrder(e){var c,u,d,f,p,m;if(!e.orderId||e.orderId==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: orderId is empty",e),new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: marketId is empty",e),new Error("marketId cannot be empty");console.log("[ExchangeClient.cancelOrder] Input validation passed",{orderId:e.orderId,marketId:e.marketId}),this.walletAddress?console.log("[ExchangeClient.cancelOrder] Using existing wallet",{walletAddress:this.walletAddress}):(console.log("[ExchangeClient.cancelOrder] Wallet not initialized, initializing now..."),await this.initialize(),console.log("[ExchangeClient.cancelOrder] Wallet initialized",{walletAddress:this.walletAddress}));const n=this.getWalletAddress(),s={action:Av,orderId:e.orderId,marketId:e.marketId,address:n};console.log("[ExchangeClient.cancelOrder] Payload built",{payload:s,action:Av});const r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider());console.log("[ExchangeClient.cancelOrder] Complete message built",{action:i.action,orderId:i.orderId,marketId:i.marketId,address:i.address,owner:i.owner,nonce:i.nonce,deadline:i.deadline,hasAllFields:!!(i.action&&i.orderId&&i.marketId&&i.owner&&i.nonce&&i.deadline)}),console.log("[ExchangeClient.cancelOrder] Generating signature...");const o=await r.signPayload(i);console.log("[ExchangeClient.cancelOrder] Signature generated",{signatureLength:o==null?void 0:o.length,signaturePrefix:(o==null?void 0:o.substring(0,10))+"..."});const a=r.buildEIP712Tx(i,o);console.log("[ExchangeClient.cancelOrder] EIP712Tx built",{eip712Tx:{txId:a.txId,sigType:a.sigType,threshold:a.threshold,timestamp:a.timestamp,deadline:a.deadline,payloadAction:(c=a.payload)==null?void 0:c.action,payloadOrderId:(u=a.payload)==null?void 0:u.orderId,payloadMarketId:(d=a.payload)==null?void 0:d.marketId,signaturesCount:(f=a.signatures)==null?void 0:f.length,signer:(m=(p=a.signatures)==null?void 0:p[0])==null?void 0:m.signer}});const l=this.httpClient.getBaseURL?this.httpClient.getBaseURL():"unknown";console.log("[ExchangeClient.cancelOrder] Submitting to /router/v1/tx endpoint...",{endpoint:"/router/v1/tx",baseURL:l,fullURL:`${l}/router/v1/tx`});try{const x=await this.httpClient.post("/router/v1/tx",a);return console.log("[ExchangeClient.cancelOrder] API response received",{status:x.statusCode,hasBody:!!x.body,responseBody:x.body,orderId:e.orderId}),x.body}catch(x){if(pb(x)){console.log("[ExchangeClient.cancelOrder] Nonce error detected, refreshing nonce from server",{error:x instanceof Error?x.message:String(x),orderId:e.orderId}),await this.refreshNonceFromServer();const v=this.getSignatureBuilder(),g=await v.buildCompleteMessage(s,this.getNonceProvider()),b=await v.signPayload(g),w=v.buildEIP712Tx(g,b);console.log("[ExchangeClient.cancelOrder] Retrying with refreshed nonce",{newNonce:g.nonce});const y=await this.httpClient.post("/router/v1/tx",w);return console.log("[ExchangeClient.cancelOrder] Retry successful",{status:y.statusCode,responseBody:y.body}),y.body}throw console.error("[ExchangeClient.cancelOrder] API call failed",{error:x,errorMessage:x instanceof Error?x.message:String(x),errorStack:x instanceof Error?x.stack:void 0,orderId:e.orderId,marketId:e.marketId,walletAddress:this.walletAddress}),x}}async modifyOrder(e){if(!e.orderId||e.orderId==="")throw new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.newPrice||e.newPrice<=0)throw new Error("newPrice must be positive");if(!e.newQuantity||e.newQuantity<=0)throw new Error("newQuantity must be positive");this.walletAddress||await this.initialize();const n={action:dD,orderId:e.orderId,marketId:e.marketId,newPrice:ct(e.newPrice),newQuantity:ct(e.newQuantity)},s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async changeLeverage(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newLeverage===void 0)throw new Error("newLeverage must be provided");this.walletAddress||await this.initialize();const n={action:hD,marketId:e.marketId,newLeverage:ct(e.newLeverage),address:this.getWalletAddress()};e.leverageType&&(n.leverageType=e.leverageType),e.bucketId&&(n.bucketId=e.bucketId),e.reason&&(n.reason=e.reason);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async closePosition(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=Math.floor(Date.now()/1e3),r=s+300,i=await this.getNextNonce();if(!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");if(!e.marketPrice||e.marketPrice<=0)throw new Error("marketPrice must be positive");const o=ct(e.quantity).toString(),a=ct(e.marketPrice).toString(),l={action:Rv,address:n,marketId:e.marketId,closeSize:o,marketPrice:a,nonce:i,deadline:r},u=await this.getSignatureBuilder().signPayload(l),d={address:n,market_id:e.marketId,close_size:o,market_price:a,timestamp:s,sign_type:1,nonce:i.toString(),chain_id:this.chainID.toString(),deadline:r.toString(),signature:u};return(await this.httpClient.post("/bucket/v1/position/close",d)).body}async closePositionEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(this.walletAddress||await this.initialize(),!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");if(!e.marketPrice||e.marketPrice<=0)throw new Error("marketPrice must be positive");const n=ct(e.quantity),s=ct(e.marketPrice),r={action:Rv,address:this.getWalletAddress(),marketId:e.marketId,closeSize:n,marketPrice:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=i.buildEIP712Tx(o,a);return(await this.httpClient.post("/router/v1/tx",l)).body}async swap(e){if(!e.fromToken||e.fromToken==="")throw new Error("fromToken cannot be empty");if(!e.toToken||e.toToken==="")throw new Error("toToken cannot be empty");if(!e.amountIn||e.amountIn<=0)throw new Error("amountIn must be positive");if(!e.minAmountOut||e.minAmountOut<=0)throw new Error("minAmountOut must be positive");this.walletAddress||await this.initialize();const n={action:pD,fromToken:e.fromToken,toToken:e.toToken,amountIn:ct(e.amountIn),minAmountOut:ct(e.minAmountOut)};e.path&&e.path.length>0&&(n.path=e.path);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async changeMarginRatioEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n={action:cD,marketId:e.marketId,address:this.getWalletAddress()};e.bucketId&&(n.bucketId=e.bucketId);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async internTransferEIP712Tx(e){if(!e.fromAccount||e.fromAccount==="")throw new Error("fromAccount cannot be empty");if(!e.toAccount||e.toAccount==="")throw new Error("toAccount cannot be empty");if(!e.tokenAddress||e.tokenAddress==="")throw new Error("tokenAddress cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n={action:fD,fromAccount:e.fromAccount,toAccount:e.toAccount,amount:ct(e.amount),tokenAddress:e.tokenAddress,address:this.getWalletAddress()},s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async bucketTransfer(e){if(!e.fromBucketId||e.fromBucketId.trim()==="")throw new Error("fromBucketId cannot be empty");if(!e.toBucketId||e.toBucketId.trim()==="")throw new Error("toBucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=ct(e.amount),r={action:bD,fromBucketId:e.fromBucketId,toBucketId:e.toBucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,source_bucket_id:e.fromBucketId,target_bucket_id:e.toBucketId,amount:s,reason:"sdk_transfer",timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bucket/v1/bucket/transfer",c)).body}async extractToBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=ct(e.amount),r={action:mD,bucketId:e.bucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/extract-to-bucket",c)).body}async withdrawFromBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=ct(e.amount),r={action:xD,bucketId:e.bucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/withdraw-from-bucket",c)).body}async bankMint(e){if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=ct(e.amount),s={action:gD,asset:e.assetId,amount:n},r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider()),o=await r.signPayload(i),a=r.buildEIP712Tx(i,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async bankTransfer(e){if(!e.to||e.to.trim()==="")throw new Error("to address cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=ct(e.amount),s={action:yD,to:e.to,asset:e.assetId,amount:n},r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider()),o=await r.signPayload(i),a=r.buildEIP712Tx(i,o);return(await this.httpClient.post("/router/v1/tx",a)).body}}class vD{constructor(e){ie(this,"ws",null);ie(this,"state",ut.Disconnected);ie(this,"handlers",new Map);ie(this,"reconnectTimer",null);ie(this,"reconnectAttempts",0);ie(this,"config");ie(this,"originalConfig");ie(this,"pingInterval",null);ie(this,"stateChangeHandlers",new Set);this.originalConfig=e;const n=this.convertHTTPToWebSocketURL(e.url);this.config={url:n,authToken:e.authToken||"",walletAddress:e.walletAddress||"",deviceID:e.deviceID||"",reconnectInterval:e.reconnectInterval||5e3,maxReconnectAttempts:e.maxReconnectAttempts||10}}convertHTTPToWebSocketURL(e){if(e.startsWith("ws://")||e.startsWith("wss://")){if(e.includes("router.morpheum.io")){const n=new URL(e);if(!n.pathname||n.pathname==="/")return n.pathname="/websocket",n.toString()}return e}if(e.includes("localhost")||e.includes("127.0.0.1")){const n=e.match(/:(\d+)/);return`ws://localhost:${n?n[1]:"8080"}/websocket`}if(e.startsWith("http://")){const n=e.replace("http://","ws://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(e.startsWith("https://")){const n=e.replace("https://","wss://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(!e||e.trim()===""||e.includes("router.morpheum.io"))return"wss://router.morpheum.io/websocket";try{const n=new URL(e.startsWith("http")?e:`https://${e}`),s=n.protocol==="https:"?"wss:":"ws:",r=n.pathname&&n.pathname!=="/"?n.pathname:"",i=r.endsWith("/websocket")?r:`${r}/websocket`;return`${s}//${n.host}${i}`}catch{return console.warn(`Failed to parse URL ${e}, defaulting to router.morpheum.io/websocket`),"wss://router.morpheum.io/websocket"}}getConnectionURL(){const e=[];this.config.authToken&&e.push(`token=${encodeURIComponent(this.config.authToken)}`),"walletAddress"in this.originalConfig&&this.originalConfig.walletAddress!==void 0&&e.push(`wallet=${encodeURIComponent(this.originalConfig.walletAddress||"")}`),this.config.deviceID&&e.push(`device_id=${encodeURIComponent(this.config.deviceID)}`);const n=this.config.url.includes("?")?"&":"?";return e.length>0?`${this.config.url}${n}${e.join("&")}`:this.config.url}async connect(){if(!(this.state===ut.Connected||this.state===ut.Connecting))return this.setState(ut.Connecting),new Promise((e,n)=>{let s=!1,r=!1,i=null;const o=a=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),this.setState(ut.Disconnected),n(a))};try{const a=this.getConnectionURL();console.log("Connecting to WebSocket:",a);const l=new WebSocket(a);i=window.setTimeout(()=>{!s&&!r&&(l.close(),o(new Error(`WebSocket connection timeout after 10 seconds. Unable to connect to ${a}. Check if the server is running and accessible.`)))},1e4),l.onopen=()=>{if(i!==null&&(clearTimeout(i),i=null),s=!0,this.ws=l,this.setState(ut.Connected),this.reconnectAttempts=0,this.config.authToken)try{const c={type:"auth",token:this.config.authToken};this.config.deviceID&&(c.device_id=this.config.deviceID),l.send(JSON.stringify(c))}catch(c){console.warn("Failed to send auth message after connection:",c)}this.startPing(),e()},l.onmessage=c=>{try{const u=JSON.parse(c.data);this.handleMessage(u)}catch(u){console.error("Failed to parse WebSocket message:",u)}},l.onerror=c=>{console.error("WebSocket error event:",c)},l.onclose=c=>{if(i!==null&&(clearTimeout(i),i=null),this.ws=null,this.stopPing(),!s&&!r){const u=c.code,d=c.reason||"Unknown reason",f=c.wasClean;let p=`WebSocket connection failed. Close code: ${u}`;u===1006?p=`WebSocket connection failed (abnormal closure, code ${u}). Unable to connect to ${a}. Possible causes: Server is not running, network issue, firewall blocking connection, or incorrect URL.`:u===1002?p=`WebSocket protocol error (code ${u}). The server may not support WebSocket protocol or there's a protocol mismatch.`:u===1003?p=`WebSocket unsupported data type (code ${u}).`:u===1008?p=`WebSocket connection closed due to policy violation (code ${u}): ${d}`:u===1011?p=`WebSocket server error (code ${u}): ${d}`:u===1e3?p=`WebSocket connection closed normally (code ${u}) but before opening.`:d&&d!=="Unknown reason"&&(p+=` Reason: ${d}`),!f&&u===1006&&(p+=" This usually indicates the connection was refused or the server is unreachable."),o(new Error(p))}else s&&(this.setState(ut.Disconnected),this.scheduleReconnect())}}catch(a){i!==null&&(clearTimeout(i),i=null);const l=a instanceof Error?a.message:String(a);o(new Error(`Failed to create WebSocket connection: ${l}`))}})}disconnect(){this.cancelReconnect(),this.stopPing(),this.ws&&(this.ws.close(),this.ws=null),this.handlers.clear(),this.stateChangeHandlers.clear(),this.setState(ut.Disconnected)}send(e){if(this.state!==ut.Connected||!this.ws)throw new Error("WebSocket not connected");this.ws.send(JSON.stringify(e))}on(e,n){this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(n)}off(e,n){if(!n){this.handlers.delete(e);return}const s=this.handlers.get(e);if(s){const r=s.indexOf(n);r>-1&&s.splice(r,1)}}getState(){return this.state}isConnected(){return this.state===ut.Connected}setState(e){const n=this.state;this.state=e,n!==e&&this.stateChangeHandlers.forEach(s=>{try{s(e)}catch(r){console.error("Error in state change handler:",r)}})}onStateChange(e){return this.stateChangeHandlers.add(e),()=>{this.stateChangeHandlers.delete(e)}}handleMessage(e){let n;if(typeof e.type=="string")if(e.type==="data")if(typeof e.channel=="string")n=e.channel;else{console.error("Missing channel in data message");return}else e.type==="error"?(n="error",e.error&&console.error("WebSocket server error:",{code:e.error.code,message:e.error.message,details:e.error.details})):e.type==="ack"?n="ack":e.type==="pong"?n="pong":n=e.type;else typeof e.event=="string"?n=e.event:n="message";const s=this.handlers.get(n)||[],r=this.handlers.get("*")||[];s.forEach(i=>{try{i(e)}catch(o){console.error(`Error in handler for ${n}:`,o)}}),n!=="error"&&r.forEach(i=>{try{i(e)}catch(o){console.error("Error in wildcard handler:",o)}})}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}this.reconnectAttempts++,this.setState(ut.Reconnecting),this.reconnectTimer=window.setTimeout(()=>{this.connect().catch(e=>{console.error("Reconnection failed:",e)})},this.config.reconnectInterval)}cancelReconnect(){this.reconnectTimer!==null&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectAttempts=0}startPing(){this.pingInterval=window.setInterval(()=>{this.ws&&this.state===ut.Connected&&this.send({type:"ping"})},3e4)}stopPing(){this.pingInterval!==null&&(clearInterval(this.pingInterval),this.pingInterval=null)}setAuthToken(e,n,s){this.config.authToken=e,this.config.walletAddress=n,this.config.deviceID=s,this.originalConfig.authToken=e,this.originalConfig.walletAddress=n,this.originalConfig.deviceID=s,console.log(`Auth set: address=${n}, device=${s}`)}updateAuth(e,n,s){e!==void 0&&(this.config.authToken=e,this.originalConfig.authToken=e),n!==void 0&&(this.config.walletAddress=n,this.originalConfig.walletAddress=n),s!==void 0&&(this.config.deviceID=s,this.originalConfig.deviceID=s),this.isConnected()&&(this.disconnect(),this.connect())}}class To{constructor(e){ie(this,"wsClient");ie(this,"subscriptions",new Map);ie(this,"lastPriceWrappedCallbacks",new Map);ie(this,"wrappedCallbacks",new Map);ie(this,"multiFeedSubscriptions",new Map);ie(this,"multiFeedHandlerRegistered",!1);this.wsClient=new vD({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID})}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.lastPriceWrappedCallbacks.clear(),this.wrappedCallbacks.clear(),this.multiFeedSubscriptions.clear(),this.multiFeedHandlerRegistered=!1}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,n,s){this.wsClient.setAuthToken(e,n,s)}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(n){return console.error("Failed to parse router data field:",n),null}return e}extractRouterData(e){if(e.type==="data"&&e.data){const n=this.parseRouterData(e.data);return n||console.warn("[SubscriptionClient] Failed to parse router data:",e.data),n}return e.type==="error"&&e.error?(console.error("WebSocket error response:",e.error),null):(e.type==="ack"||(e.type!=="data"?console.debug("[SubscriptionClient] Unexpected message type:",e.type,"Full message:",e):e.data||console.warn("[SubscriptionClient] Message type is 'data' but missing data field:",e)),null)}subscribeOrderbook(e,n,s=!0){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="orderbook";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&(s&&l.bids&&Array.isArray(l.bids)&&(l.bids=l.bids.map(([c,u])=>[ve(c),ve(u)])),s&&l.asks&&Array.isArray(l.asks)&&(l.asks=l.asks.map(([c,u])=>[ve(c),ve(u)])),n(l))};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeOrderbook(e,n){var i,o;const s="orderbook",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTrades(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="trades";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"trades",params:{market_id:e.toString()}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeTrades(e,n){var i,o;const s="trades",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"trades",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTicker(e,n){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="moniker",r="ticker";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&n(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(s,i);try{this.wsClient.send({type:"subscribe",channel:s,params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTicker(e,n){var o,a;const s="ticker",r="moniker",i=this.subscriptions.get(s)||[];if(n){const l=i.indexOf(n);if(l>-1){i.splice(l,1),this.subscriptions.set(s,i);const c=(o=this.wrappedCallbacks.get(s))==null?void 0:o.get(n);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(s).delete(n))}}else{const l=this.wrappedCallbacks.get(s);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((a=this.subscriptions.get(s))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:r,params:{market_id:e.toString()}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeUserUpdates(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="positions";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"positions",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeUserUpdates(e){var r,i;const n="positions",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"positions"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeLastPrice(e,n,s=!0){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="last_price";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=o=>{console.debug("[SubscriptionClient] last_price message received:",o);const a=this.extractRouterData(o);if(!a){console.warn("[SubscriptionClient] Failed to extract trade data from message:",o);return}if(console.debug("[SubscriptionClient] Extracted trade data:",a),!a.price){console.warn("[SubscriptionClient] Trade data missing price field:",a);return}s&&(a.price&&(a.price=ve(a.price)),a.quantity&&(a.quantity=ve(a.quantity))),console.debug("[SubscriptionClient] Calling callback with trade data:",a),n(a)};this.lastPriceWrappedCallbacks.set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){this.lastPriceWrappedCallbacks.delete(n);const a=this.subscriptions.get(r)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(r,a)),o}}unsubscribeLastPrice(e,n){var i;const s="last_price",r=this.subscriptions.get(s)||[];if(n){const o=r.indexOf(n);if(o>-1){r.splice(o,1),this.subscriptions.set(s,r);const a=this.lastPriceWrappedCallbacks.get(n);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(n))}}else r.forEach(o=>{const a=this.lastPriceWrappedCallbacks.get(o);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(o))}),this.subscriptions.delete(s);if(((i=this.subscriptions.get(s))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeFundingRate(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="funding_rate";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"funding_rate",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeFundingRate(e,n){var i,o;const s="funding_rate",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"funding_rate",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeBuckets(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="buckets";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"buckets",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBuckets(e){var r,i;const n="buckets",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"buckets"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeDeviation(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="deviation";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"deviation",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeDeviation(e,n){var i,o;const s="deviation",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"deviation",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeIndexPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="index_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"index_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeIndexPrice(e,n){var i,o;const s="index_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"index_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeKline(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n)throw new Error("Interval is required for kline subscription");const r="kline";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeKline(e,n,s){var o,a;const r="kline",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMarkPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="mark_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"mark_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeMarkPrice(e,n){var i,o;const s="mark_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"mark_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribePriceFeed(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="price_feed";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"price_feed",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribePriceFeed(e,n){var i,o;const s="price_feed",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"price_feed",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTWAP(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n||n<=0)throw new Error("Window size must be a positive number");const r="twap";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTWAP(e,n,s){var o,a;const r="twap",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMultiFeed(e,n,s,r){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const i="multi_feed";if(!this.multiFeedHandlerRegistered){const o=a=>{if(a.type==="data"&&a.channel==="multi_feed"&&a.sub_channel){const l=a.sub_channel,c=this.multiFeedSubscriptions.get(l)||[],u=this.subscriptions.get(i)||[];let d=a.data;if(typeof d=="string")try{d=JSON.parse(d)}catch(f){console.error("Failed to parse multi-feed data field:",f);return}d&&(c.forEach(f=>{try{f(d)}catch(p){console.error(`Error in multi-feed sub-channel callback for ${l}:`,p)}}),u.forEach(f=>{try{f({sub_channel:l,data:d})}catch(p){console.error("Error in multi-feed callback:",p)}}))}};this.wsClient.on(i,o),this.multiFeedHandlerRegistered=!0}this.subscriptions.has(i)||this.subscriptions.set(i,[]),this.subscriptions.get(i).push(s);try{const o={market_id:e.toString(),symbol:n};r&&(o.interval=r),this.wsClient.send({type:"subscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed",params:o})}catch(o){const a=this.subscriptions.get(i)||[],l=a.indexOf(s);throw l>-1&&(a.splice(l,1),this.subscriptions.set(i,a)),o}}subscribeMultiFeedSubChannel(e,n,s,r,i){if(this.multiFeedSubscriptions.has(s)||this.multiFeedSubscriptions.set(s,[]),this.multiFeedSubscriptions.get(s).push(r),(this.subscriptions.get("multi_feed")||[]).length===0){const a=()=>{};this.subscribeMultiFeed(e,n,a,i)}}unsubscribeMultiFeed(e,n,s){var o,a;const r="multi_feed",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);l>-1&&(i.splice(l,1),this.subscriptions.set(r,i))}else this.subscriptions.delete(r);if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.multiFeedSubscriptions.clear(),((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}unsubscribeMultiFeedSubChannel(e,n){const s=this.multiFeedSubscriptions.get(e)||[];if(n){const r=s.indexOf(n);r>-1&&(s.splice(r,1),s.length===0?this.multiFeedSubscriptions.delete(e):this.multiFeedSubscriptions.set(e,s))}else this.multiFeedSubscriptions.delete(e)}subscribeBalances(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="balances";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"balances",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBalances(e){var r,i;const n="balances",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"balances"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeOrders(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="orders";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"orders",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeOrders(e){var r,i;const n="orders",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orders"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}}async function SD(t,e,n,s,r){const i=cu.fromPhrase(t.trim(),"","m/44'/60'/0'/0/0");if(i.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${i.address} does not match provided ${e}`);let o;try{o=new er(i.privateKey)}catch(y){throw new Error(`Invalid private key: cannot create signing key - ${y.message}`)}const a=Fu(o.publicKey);if(a.toLowerCase()!==e.toLowerCase())throw new Error(`Private key validation failed: derived address ${a} does not match ${e}`);const l=BigInt(i.privateKey),c=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(l===0n||l>=c)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const d=l.toString(16).toLowerCase().padStart(64,"0"),f=De("0x"+d);if(f.length!==32)throw new Error(`Invalid private key: expected 32 bytes, got ${f.length}`);if(f.every(y=>y===0))throw new Error("Invalid private key: cannot be zero");const m=BigInt("0x"+d);if(m!==l)throw new Error(`Private key encoding error: bytes do not match BigInt value. Original: ${l.toString(16)}, Reconstructed: ${m.toString(16)}`);const x=d;if(x.length!==64)throw new Error(`Invalid private key format: expected exactly 64 hex chars, got ${x.length}. This should never happen with a valid 32-byte private key.`);if(!/^[0-9a-f]{64}$/.test(x))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");const v=x,g={action:Ab,owner:e.toLowerCase(),nonce:n,timestamp:s,deadline:r},b={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:s,payload:g,deadline:parseInt(r,16)};console.log("[Onboard] Signing EIP-712 typed data with generateSingleSignature:",b),console.log("[Onboard] Private key format validated:",{length:v.length,format:"64 lowercase hex chars (no 0x prefix) - matches Go's hex.EncodeToString",preview:`${v.substring(0,8)}...${v.substring(56)}`,isValidSecp256k1:!0,withinCurveOrder:l<c,notZero:l!==0n,bytesLength:f.length,fullHex:v,firstByte:v.substring(0,2),lastByte:v.substring(62,64)}),console.log("[Onboard] Calling WASM GenerateSingleSignature with:",{txJSONLength:JSON.stringify(b).length,privateKeyHexLength:v.length,privateKeyHexPreview:v,signerAddress:e.toLowerCase()});const w=await We.generateSingleSignature(JSON.stringify(b),v,e.toLowerCase());if(console.log(w),!w.success||!w.signature)throw new Error(w.error||"Failed to generate signature");return console.log("[Onboard] signature:",w.signature),w.signature}async function kD(t){var e,n;try{const s=await SD(t.mnemonic,t.walletAddress,t.message.nonce,t.message.timestamp,t.message.deadline);console.log("[Onboard] Signature generated successfully, length:",s.length);const r={address:t.walletAddress,signature:s,nonce:t.message.nonce,timestamp:t.timestamp,deadline:t.message.deadline,action:Ab};t.username&&(r.username=t.username),t.referralCode&&(r.referral_code=t.referralCode),console.log("[Onboard] Request body:",{...r,signature:s.substring(0,20)+"..."});const o=await new fb(t.baseURL).post("/auth/v1/onboard",r);if(o.statusCode===200&&o.body){const a=o.body.access_token||o.body.authToken||o.body.token||o.body.accessToken,l=o.body.refresh_token||o.body.refreshToken,c=o.body.expires_at||o.body.expiresAt||(o.body.expires_in?t.timestamp+o.body.expires_in:void 0);return a?{success:!0,authToken:a,refreshToken:l,expiresAt:c}:{success:!1,error:"Response missing authToken field"}}else{const a=((e=o.body)==null?void 0:e.message)||((n=o.body)==null?void 0:n.error)||`HTTP ${o.statusCode}: ${o.body}`,l=new Error(a);throw l.responseBody=o.body,l.statusCode=o.statusCode,l}}catch(s){throw s}}const Rb={auth:{maxRetries:4,baseDelay:500,maxDelay:3e3,jitter:!0,multiplier:2},http:{maxRetries:3,baseDelay:100,maxDelay:5e3,jitter:!0,multiplier:2},nonce:{maxRetries:5,baseDelay:200,maxDelay:2e3,jitter:!0,multiplier:1.5}};function _D(t,e){let n=t.baseDelay*Math.pow(t.multiplier,e);if(n>t.maxDelay&&(n=t.maxDelay),t.jitter){const s=n*.25*Math.random();n+=s}return Math.floor(n)}function CD(t){return new Promise(e=>setTimeout(e,t))}async function u0(t,e,n=()=>!0){let s;for(let r=0;r<=t.maxRetries;r++)try{return await e()}catch(i){if(s=i,!await Promise.resolve(n(i)))throw i;if(r>=t.maxRetries)break;const a=_D(t,r);await CD(a)}throw new Error(`Operation failed after ${t.maxRetries+1} attempts: ${(s==null?void 0:s.message)||s}`)}async function i5(t,e,n,s){try{We.isReady()||await We.initialize();const r=await We.generateAddress(t,0);if(!r.success||!r.address)return{success:!1,error:`Failed to generate address: ${r.error}`};const i=r.address.toLowerCase(),o=new pn({baseURL:e}),a=new zC(o);let l=null;try{return await u0(Rb.auth,async()=>{console.log(`[Onboard] Attempt starting - currentNonce: ${l}`),l===null?(l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] First attempt: queried server, using next nonce: ${l}`)):console.log(`[Onboard] Retry attempt: using incremented nonce ${l} from previous failure`);let u=0;const d=10;for(;u<d;)try{await a.validateNonce(i,l,!0);break}catch(v){if(u++,v.message.includes("already pending")||v.message.includes("already used")){if(l=l+1,console.log(`[Onboard] Nonce ${l-1} already pending, incrementing to ${l}`),u>=d)throw new Error(`Failed to find available nonce after ${d} attempts`)}else throw v}const f=Math.floor(Date.now()/1e3),p=f+3600,m={action:Ab,owner:i,nonce:Jw(l),timestamp:f,deadline:Jw(p)};let x;try{x=await kD({mnemonic:t,walletAddress:i,message:m,baseURL:e,username:n,referralCode:s,timestamp:f})}catch(v){if(l!==null){const g=l;try{await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Rejected nonce ${g}, incremented to nonce ${l} (will use on retry)`)}catch(b){console.warn("[Onboard] Failed to reject nonce after thrown error:",b),l=l+1,console.log(`[Onboard] Incremented nonce to ${l} (reject failed but incrementing anyway)`)}}else console.warn("[Onboard] Error thrown but currentNonce is null, cannot reject/increment");throw v.currentNonce=l,v}if(!x.success){if(l!==null){const g=l;await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Request failed with nonce ${g}, rejected and incremented to ${l} (will keep incrementing until it works)`)}const v=new Error(x.error||"Onboarding failed");throw v.onboardResult=x,v}return l!==null&&await a.commitNonce(i,l,!0),x},async u=>{var g,b,w;const d=String(u).toLowerCase(),f=((g=u==null?void 0:u.message)==null?void 0:g.toLowerCase())||d,p=(u==null?void 0:u.responseBody)||(u==null?void 0:u.onboardResult),m=((b=p==null?void 0:p.error)==null?void 0:b.toLowerCase())||((w=p==null?void 0:p.message)==null?void 0:w.toLowerCase())||"";if(`${f} ${d} ${m}`.toLowerCase().includes("nonce already pending")){if(l!==null){const y=l;l=l+1,console.log(`[Onboard] Off-chain operation: nonce ${y} already pending/used, incrementing to ${l} (server will validate)`)}else try{l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] currentNonce was null, queried server for starting nonce: ${l}`)}catch(y){console.warn("[Onboard] Failed to query server nonce:",y),l=1}return!0}return pb(u)?(console.log('[Onboard] Nonce-consuming error detected (not "already pending"), clearing currentNonce to force re-query'),l=null,!0):!["failed to generate address","address mismatch","invalid mnemonic"].some(y=>d.includes(y))})}catch(c){if(l!==null)try{await a.rejectNonce(i,l,!0)}catch(u){console.warn("[Onboard] Failed to reject nonce during cleanup:",u)}return{success:!1,error:(c==null?void 0:c.message)||"Unknown error during onboarding"}}}catch(r){return{success:!1,error:(r==null?void 0:r.message)||"Unknown error during onboarding"}}}const ED=Object.freeze(Object.defineProperty({__proto__:null,onboardAndGetAuthToken:i5},Symbol.toStringTag,{value:"Module"})),Ov=t=>{let e;const n=new Set,s=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(p=>p(e,f))}},r=()=>e,a={setState:s,getState:r,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(s,r,a);return a},PD=t=>t?Ov(t):Ov,TD=t=>t;function MD(t,e=TD){const n=le.useSyncExternalStore(t.subscribe,le.useCallback(()=>e(t.getState()),[t,e]),le.useCallback(()=>e(t.getInitialState()),[t,e]));return le.useDebugValue(n),n}const Lv=t=>{const e=PD(t),n=s=>MD(e,s);return Object.assign(n,e),n},ID=t=>t?Lv(t):Lv,gt=ID((t,e)=>({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,selectedMarketId:null,loadingMarkets:!1,loadingOrderbooks:new Set,loadingTickers:new Set,loadingTrades:new Set,errors:new Map,setMarkets:n=>{const s=new Map,r=new Map;n.forEach(a=>{s.set(a.id,a),a.symbol&&r.set(a.symbol,a),a.moniker&&r.set(a.moniker,a)});let o=e().selectedMarketId;if(!o&&n.length>0){const l=n.find(u=>u.active)||n[0],c=l.market_id?l.market_id:l.id?typeof l.id=="string"?l.id:l.id.toString():null;c&&(o=c)}t({markets:n,marketsById:s,marketsBySymbol:r,selectedMarketId:o,lastUpdated:new Map(e().lastUpdated).set("markets",Date.now())})},setMarket:n=>{const s=e(),r=new Map(s.marketsById),i=new Map(s.marketsBySymbol);r.set(n.id,n),n.symbol&&i.set(n.symbol,n),n.moniker&&i.set(n.moniker,n);const o=s.markets.find(a=>a.id===n.id)?s.markets.map(a=>a.id===n.id?n:a):[...s.markets,n];t({markets:o,marketsById:r,marketsBySymbol:i})},getMarket:n=>e().marketsById.get(n),getMarketBySymbol:n=>e().marketsBySymbol.get(n),setSelectedMarketId:n=>{t({selectedMarketId:n})},setOrderbook:(n,s)=>{const r=e(),i=new Map(r.orderbooks);i.set(n,{...s,timestamp:Date.now()}),t({orderbooks:i,lastUpdated:new Map(r.lastUpdated).set(n,Date.now())})},getOrderbook:n=>e().orderbooks.get(n),updateOrderbook:(n,s)=>{const r=e(),i=r.orderbooks.get(n);if(i){const o={...i,...s,timestamp:Date.now()};r.setOrderbook(n,o)}else r.setOrderbook(n,{bids:s.bids||[],asks:s.asks||[],timestamp:Date.now()})},setTicker:(n,s)=>{const r=e(),i=new Map(r.tickers);i.set(n,{...s,marketId:n,timestamp:Date.now()}),t({tickers:i,lastUpdated:new Map(r.lastUpdated).set(`ticker_${n}`,Date.now())})},getTicker:n=>e().tickers.get(n),setRecentTrades:(n,s)=>{const r=e(),i=new Map(r.recentTrades);i.set(n,s),t({recentTrades:i,lastUpdated:new Map(r.lastUpdated).set(`trades_${n}`,Date.now())})},getRecentTrades:n=>e().recentTrades.get(n),setLoading:(n,s)=>{const r=e();if(n==="markets")t({loadingMarkets:s});else if(n.startsWith("orderbook_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingOrderbooks);s?o.add(i):o.delete(i),t({loadingOrderbooks:o})}else if(n.startsWith("ticker_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTickers);s?o.add(i):o.delete(i),t({loadingTickers:o})}else if(n.startsWith("trades_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTrades);s?o.add(i):o.delete(i),t({loadingTrades:o})}},setError:(n,s)=>{const r=e(),i=new Map(r.errors);s?i.set(n,s):i.delete(n),t({errors:i})},clearError:n=>{e().setError(n,null)},clearCache:n=>{const s=e();if(n){const r=new Map(s.orderbooks),i=new Map(s.tickers),o=new Map(s.recentTrades),a=new Map(s.lastUpdated);r.delete(n),i.delete(n),o.delete(n),a.delete(n),a.delete(`ticker_${n}`),a.delete(`trades_${n}`),t({orderbooks:r,tickers:i,recentTrades:o,lastUpdated:a})}else t({orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map})},clearAllCache:()=>{t({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,errors:new Map,selectedMarketId:null})}}));function DD(){const[t,e]=S.useState({loading:!0,loaded:!1,error:null}),[n,s]=S.useState({initialized:!1,wasmLoaded:!1,ready:!1});S.useEffect(()=>{(async()=>{try{e(a=>({...a,loading:!0,error:null})),await We.initialize()?(e({loading:!1,loaded:!0,error:null}),s(We.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(We.getStatus()))}catch(o){e({loading:!1,loaded:!1,error:o instanceof Error?o.message:"Unknown error"}),s(We.getStatus())}})()},[]),S.useEffect(()=>{if(t.loaded){const i=setInterval(()=>{s(We.getStatus())},1e3);return()=>clearInterval(i)}},[t.loaded]);const r=async()=>{e({loading:!0,loaded:!1,error:null});try{await We.initialize()?(e({loading:!1,loaded:!0,error:null}),s(We.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(We.getStatus()))}catch(i){e({loading:!1,loaded:!1,error:i instanceof Error?i.message:"Unknown error"}),s(We.getStatus())}};return{wasmStatus:t,isReady:t.loaded&&n.ready,status:n,retry:r}}function ND(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=0){const[n,s]=S.useState(t),[r,i]=S.useState(e),[o,a]=S.useState(null),[l,c]=S.useState(!1);return{mnemonic:n,setMnemonic:s,addressIndex:r,setAddressIndex:i,result:o,loading:l,generateAddress:async()=>{if(!We.isReady()){a({success:!1,error:"WASM module not ready"});return}c(!0),a(null);try{const d=await We.generateAddress(n,r);a(d)}catch(d){a({success:!1,error:d instanceof Error?d.message:"Unknown error"})}finally{c(!1)}},isReady:We.isReady()}}function AD(){const[t,e]=S.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=S.useState("Hello, World!"),[r,i]=S.useState(!1),[o,a]=S.useState(0),[l,c]=S.useState(null),[u,d]=S.useState(!1);return{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:u,signMessage:async()=>{if(!We.isReady()){c({success:!1,error:"WASM module not ready"});return}d(!0),c(null);try{const p={addressIndex:o,useEIP712:r},m=r?await We.signEIP712(t,n,p):await We.signMessage(t,n,p);c(m)}catch(p){c({success:!1,error:p instanceof Error?p.message:"Unknown error"})}finally{d(!1)}},isReady:We.isReady()}}function RD(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=180,n="clob::submit_order,clob::cancel_order",s="TradingBot"){const[r,i]=S.useState(t),[o,a]=S.useState(""),[l,c]=S.useState(""),[u,d]=S.useState(""),[f,p]=S.useState(e),[m,x]=S.useState(n),[v,g]=S.useState(s),[b,w]=S.useState(Date.now().toString()),[y,k]=S.useState(null),[_,E]=S.useState(!1);return{ownerMnemonic:r,setOwnerMnemonic:i,ownerAddress:o,setOwnerAddress:a,agentAddress:l,setAgentAddress:c,agentPrivateKey:u,setAgentPrivateKey:d,expiresInDays:f,setExpiresInDays:p,permissions:m,setPermissions:x,agentName:v,setAgentName:g,nonce:b,setNonce:w,result:y,loading:_,generateOwnerAddress:async()=>{if(!We.isReady()){k({success:!1,error:"WASM module not ready"});return}E(!0);try{const N=await We.generateAddress(r,0);N.success&&N.address?a(N.address):k({success:!1,error:N.error||"Failed to generate owner address"})}catch(N){k({success:!1,error:N instanceof Error?N.message:"Unknown error"})}finally{E(!1)}},generateAgentKeypair:async()=>{if(!We.isReady()){k({success:!1,error:"WASM module not ready"});return}E(!0);try{const N=await We.generateKeypair();N.success&&N.address&&N.privateKey?(c(N.address),d(N.privateKey)):k({success:!1,error:N.error||"Failed to generate agent keypair"})}catch(N){k({success:!1,error:N instanceof Error?N.message:"Unknown error"})}finally{E(!1)}},prepareAgentSign:async()=>{if(!We.isReady()){k({success:!1,error:"WASM module not ready"});return}if(!o||!l){k({success:!1,error:"Owner and agent addresses are required"});return}E(!0),k(null);try{const N=m.split(",").map(W=>W.trim()).filter(W=>W.length>0),$=await We.prepareAgentSign({owner:o,agent:l,expiresInDays:f,permissions:N,nonce:b,agentName:v});k($)}catch(N){k({success:!1,error:N instanceof Error?N.message:"Unknown error"})}finally{E(!1)}},signAgentApproval:async()=>{if(!We.isReady()){k({success:!1,error:"WASM module not ready"});return}if(!o||!l||!r){k({success:!1,error:"Owner address, agent address, and owner mnemonic are required"});return}E(!0),k(null);try{const N=m.split(",").map(W=>W.trim()).filter(W=>W.length>0),$=await We.signAgentApproval(r,{owner:o,agent:l,expiresInDays:f,permissions:N,nonce:b,agentName:v});k($)}catch(N){k({success:!1,error:N instanceof Error?N.message:"Unknown error"})}finally{E(!1)}},isReady:We.isReady()}}const el="http://localhost:8080",o5="ws://localhost:8080/websocket",OD="300px",LD="300px",jD="270px",a5="630px",Ob=5e3,FD="1",BD=100,l5=20,$D="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",zD=1,UD=100,WD=1,jv=0,Fv=100,jp=1,HD=.01,Bv=0,VD="BINANCE:BTCUSDT",YD="5",GD="https://s3.tradingview.com/tv.js",$r=2,qD=2,ii="asc",ga="desc",Rm="market",Fp="limit",KD="ORDER_TYPE_MARKET",XD="ORDER_TYPE_LIMIT",$v="ORDER_TYPE_",du="CROSS",QD="ISOLATED",JD="ONE_WAY",vd="buy",ZD="sell",br="LONG",hu="SHORT",zv="symbol",Uv="leverage",Wv="size",Hv="liquidationPrice",Vv="unrealizedPnL",Yv="entryPrice",Gv="margin",Bp="all",Sd="byBucket",qv="1.5fr 1.2fr 1fr 1fr 1fr 1.2fr 1.2fr 1fr",eN="#51cf66",tN="#ff6b6b",nN="Loading positions...",sN="No open positions",rN="POSITIONS",iN="All",oN="By Bucket",$p="--",Kv="symbol",Xv="side",Qv="type",Jv="quantity",Zv="price",e1="filledQuantity",t1="status",zr="pending",n1="history",aN="ORDER_STATUS_PENDING",lN="ORDER_STATUS_OPEN",cN="PARTIALLY_FILLED",s1=[aN,lN,"PENDING","OPEN","NEW",cN],zp="#ffc107",Up="#17a2b8",r1="#28a745",Wp="#dc3545",i1="#dc3545",uN="#6c757d",dN="#51cf66",hN="#ff6b6b",o1="1.5fr 1fr 1fr 1.2fr 1.2fr 1.2fr 1fr 1fr",fN="Loading pending orders...",pN="No pending orders",gN="No historical orders",mN="PENDING ORDERS",xN="ORDER HISTORY",bN="Wallet address required to view pending orders",yN="Pending",wN="History",vN="--",SN="Unknown",a1="LIMIT",l1="MARKET";function kN(t){const[e,n]=S.useState(null),[s,r]=S.useState(null),[i,o]=S.useState(!1),[a,l]=S.useState(!1),[c,u]=S.useState(null),[d,f]=S.useState(Rm),[p,m]=S.useState(0),[x,v]=S.useState(0),[g,b]=S.useState("0"),[w,y]=S.useState(WD),[k,_]=S.useState(JD),[E,T]=S.useState(du),[D,C]=S.useState(0),[A,N]=S.useState(0),[$,W]=S.useState(t.marketId||"1");S.useEffect(()=>{t.selectedBucketBalance!==void 0&&C(t.selectedBucketBalance)},[t.selectedBucketBalance]),S.useEffect(()=>{const q=new wl({baseURL:t.baseURL,mnemonic:t.mnemonic}),J=new pn({baseURL:t.baseURL});n(q),r(J),q.initialize().then(()=>{o(!0)}).catch(se=>{console.error("Failed to initialize exchange client:",se),u({success:!1,error:`Initialization failed: ${se.message}`})})},[t.baseURL,t.mnemonic]);const L=S.useCallback(async()=>{if(!(!s||!e)&&t.selectedBucketBalance===void 0)try{const q=e.getWalletAddress(),J=await s.getBalanceDecimal(q,"MORM");J&&J.available_balance!==void 0&&C(ve(J.available_balance)||0)}catch(q){console.error("Failed to load balance:",q)}},[s,e,t.selectedBucketBalance]);S.useEffect(()=>{i&&s&&e&&t.selectedBucketBalance===void 0&&L()},[i,s,e,t.selectedBucketBalance,L]);const F=S.useCallback(async()=>{if(s)try{const q=await s.getTicker($);if(q&&q.lastPrice){const J=typeof q.lastPrice=="string"?ve(q.lastPrice):q.lastPrice;N(J),(!g||g==="0")&&b(J.toString())}}catch(q){console.error("Failed to load market price:",q)}},[s,$,g]);S.useEffect(()=>{i&&s&&F()},[i,s,F]);const j=S.useCallback(()=>d==="market"?t.tradePrice&&t.tradePrice>0?t.tradePrice:A:g?parseFloat(g):A,[d,g,A,t.tradePrice]),R=S.useCallback(()=>D*w,[D,w]),B=S.useCallback(()=>{let q;if(x>0)q=x;else{const se=R()*p/100,we=j();if(we<=0)return 0;q=se/we}return t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&q>t.maxSizeLimit?t.maxSizeLimit:q},[x,p,R,j,t.maxSizeLimit]),I=S.useCallback(()=>{const q=B(),J=j();return q*J},[B,j]),G=S.useCallback(()=>{const q=B(),J=j(),se=q*J;return $C(se)},[B,j]),O=S.useCallback(()=>{const q=G();return w<=0?0:Math.floor(q/w)},[G,w]),P=S.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const q=B();if(q<=0){u({success:!1,error:"Invalid order size"});return}const J=j();if(J<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!g){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const se=ct(w.toString()),we=await e.placeOrder({marketId:$,side:"buy",orderType:d,price:J,quantity:q,leverage:se});u({success:!0,orderId:we.order_id,message:"Buy order placed successfully"}),await L()}catch(se){u({success:!1,error:se instanceof Error?se.message:"Unknown error"})}finally{l(!1)}},[e,i,B,j,d,g,w,$,L]),Z=S.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const q=B();if(q<=0){u({success:!1,error:"Invalid order size"});return}const J=j();if(J<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!g){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const se=ct(w.toString()),we=await e.placeOrder({marketId:$,side:"sell",orderType:d,price:J,quantity:q,leverage:se});u({success:!0,orderId:we.order_id,message:"Sell order placed successfully"}),await L()}catch(se){u({success:!1,error:se instanceof Error?se.message:"Unknown error"})}finally{l(!1)}},[e,i,B,j,d,g,w,$,L]),Q=S.useCallback(q=>{const J=R(),se=J*q/100,we=t.tradePrice&&t.tradePrice>0?t.tradePrice:A>0?A:0,Ye=we>0?se/we:0;let Ne=isNaN(Ye)||!isFinite(Ye)?0:Math.round(Ye*1e8)/1e8;if(t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&Ne>t.maxSizeLimit){Ne=t.maxSizeLimit;const Le=j();if(Ne>0&&J>0&&Le>0){const wt=Ne*Le/J*100;m(Math.min(100,Math.max(0,wt)))}else m(q)}else m(q);v(Ne)},[R,A,t.tradePrice,t.maxSizeLimit,j]),Y=S.useCallback(q=>{let J=isNaN(q)||q<0?0:q;t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&J>t.maxSizeLimit&&(J=t.maxSizeLimit),v(J);const se=R(),we=j();if(J>0&&se>0&&we>0){const Ne=J*we/se*100;m(Math.min(100,Math.max(0,Ne)))}else m(0)},[R,j,t.maxSizeLimit]);return{orderType:d,setOrderType:f,fundPercent:p,sizeInput:x,price:g,leverage:w,positionMode:k,marginMode:E,availableBalance:D,currentPrice:A,marketId:$,isReady:i,loading:a,result:c,setFundPercent:Q,setSizeInput:Y,setPrice:b,setLeverage:y,setPositionMode:_,setMarginMode:T,setMarketId:W,placeBuyOrder:P,placeSellOrder:Z,loadBalance:L,loadMarketPrice:F,calculateSize:B,calculateSizeUSD:I,calculateValue:G,calculateMargin:O,getOrderPrice:j,getAvailableTradeAmount:R}}function c5(t){const[e,n]=S.useState({asks:[],bids:[]}),[s,r]=S.useState(!0),[i,o]=S.useState(null),[a,l]=S.useState(!1),[c,u]=S.useState(null),d=S.useRef(null),f=S.useRef(null),p=S.useRef([]),m=S.useRef(null),x=S.useRef(!1),v=S.useRef(null),g=S.useRef(null),b=S.useRef(null),w=S.useRef(new Map),y=S.useCallback(C=>{const A=[...C].sort(($,W)=>W[0]-$[0]);let N=0;return A.map(([$,W])=>(N+=W,{price:$,size:W,cumulative:N,flash:null}))},[]),k=S.useCallback((C,A)=>{const N=new Map,$=new Map,W=new Map,L=new Map;C.asks.forEach(Y=>{Y.size>0&&N.set(Y.price,Y.size)}),C.bids.forEach(Y=>{Y.size>0&&$.set(Y.price,Y.size)}),A.asks&&A.asks.forEach(([Y,q])=>{const J=N.get(Y)||0;q===0?N.delete(Y):(J>0?W.set(Y,q>J?"up":"down"):W.set(Y,"up"),N.set(Y,q))}),A.bids&&A.bids.forEach(([Y,q])=>{const J=$.get(Y)||0;q===0?$.delete(Y):(J>0?L.set(Y,q>J?"up":"down"):L.set(Y,"up"),$.set(Y,q))});const F=Array.from(N.entries()),j=Array.from($.entries()),R=y(F),B=y(j),I=Date.now();R.forEach(Y=>{const q=W.get(Y.price);q?(Y.flash=q,w.current.set(`ask-${Y.price}`,I)):Y.flash=null}),B.forEach(Y=>{const q=L.get(Y.price);q?(Y.flash=q,w.current.set(`bid-${Y.price}`,I)):Y.flash=null});const G=t.maxDepth||100,O=R.slice(0,G),P=B.slice(0,G);let Z,Q;if(O.length>0&&P.length>0){const Y=O[O.length-1].price,q=P[0].price;Z=Y-q,Q=(Y+q)/2}return{asks:O,bids:P,spread:Z,midPrice:Q}},[y,t.maxDepth]),_=S.useCallback(async()=>{if(d.current)try{const C=await d.current.getOrderbook(t.marketId,!0);if(C&&(C.bids||C.asks)){const A=C.asks||[],N=C.bids||[],$=y(A),W=y(N),L=t.maxDepth||100,F=$.slice(0,L),j=W.slice(0,L);let R,B;if(F.length>0&&j.length>0){const I=F[F.length-1].price,G=j[0].price;R=I-G,B=(I+G)/2}n({asks:F,bids:j,spread:R,midPrice:B})}}catch(C){o(C instanceof Error?C.message:"Failed to load orderbook")}},[t.marketId,t.maxDepth,y]),E=S.useCallback(async()=>{if(d.current){r(!0),o(null);try{const C=await d.current.getOrderbook(t.marketId,!0);if(C&&(C.bids||C.asks)){const A=C.asks||[],N=C.bids||[],$=y(A),W=y(N),L=t.maxDepth||100,F=$.slice(0,L),j=W.slice(0,L);let R,B;if(F.length>0&&j.length>0){const I=F[F.length-1].price,G=j[0].price;R=I-G,B=(I+G)/2}n({asks:F,bids:j,spread:R,midPrice:B})}}catch(C){o(C instanceof Error?C.message:"Failed to load orderbook")}finally{r(!1)}}},[t.marketId,t.maxDepth,y]),T=S.useCallback((C,A)=>{if(C.snapshot===!0||C.type==="snapshot"||C.bids&&C.asks&&C.bids.length>10&&C.asks.length>10&&!C.delta){const $=C.asks||[],W=C.bids||[],L=y($),F=y(W),j=t.maxDepth||100,R=L.slice(0,j),B=F.slice(0,j);let I,G;if(R.length>0&&B.length>0){const O=R[R.length-1].price,P=B[0].price;I=O-P,G=(O+P)/2}return{asks:R,bids:B,spread:I,midPrice:G}}else return k(A,{bids:C.bids,asks:C.asks})},[y,k,t.maxDepth]),D=S.useCallback(C=>{!C||!C.bids&&!C.asks||(p.current.push(C),m.current!==null&&clearTimeout(m.current),m.current=window.setTimeout(()=>{n(A=>{let N=A;for(const $ of p.current)N=T($,N);if(p.current=[],A.asks.length===N.asks.length&&A.bids.length===N.bids.length&&A.spread===N.spread&&A.midPrice===N.midPrice){const $=A.bids.length>0?A.bids[0].price:0,W=A.asks.length>0?A.asks[A.asks.length-1].price:0,L=N.bids.length>0?N.bids[0].price:0,F=N.asks.length>0?N.asks[N.asks.length-1].price:0;if($===L&&W===F)return A}return N}),m.current=null},100))},[T]);return S.useEffect(()=>{const C=new pn({baseURL:t.baseURL});d.current=C;const A=new To({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});f.current=A,v.current===null&&(v.current=t.marketId);const N=()=>{if(A.isConnected()){const F=v.current!==null?v.current:t.marketId;(!x.current||v.current!==F)&&(x.current&&v.current!==null&&v.current!==F&&A.unsubscribeOrderbook(v.current,D),A.subscribeOrderbook(F,D,!0),x.current=!0,v.current=F)}},$=A.connect();b.current=window.setTimeout(()=>{!A.isConnected()&&d.current&&g.current===null&&(u("WebSocket connection timeout. Using HTTP polling."),l(!1),_(),g.current=window.setInterval(()=>{_()},5e3))},12e3),$.then(()=>{b.current!==null&&(clearTimeout(b.current),b.current=null),l(!0),u(null),N()}).catch(()=>{b.current!==null&&(clearTimeout(b.current),b.current=null),u("slow connection due to network issue"),l(!1),d.current&&(g.current!==null&&(clearInterval(g.current),g.current=null),_(),g.current=window.setInterval(()=>{_()},5e3))});let W=null;const L=A.wsClient;return L&&(W=L.onStateChange(F=>{F===ut.Connected?(l(!0),u(null),x.current&&N()):(F===ut.Disconnected||F===ut.Reconnecting)&&(l(!1),x.current=!1,u("WebSocket disconnected. Using static data."))})),()=>{const F=v.current;m.current!==null&&(clearTimeout(m.current),m.current=null),b.current!==null&&(clearTimeout(b.current),b.current=null),p.current=[],x.current=!1,v.current=null,W&&W(),f.current&&(F!==null&&f.current.unsubscribeOrderbook(F,D),f.current.disconnect())}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID]),S.useEffect(()=>{if(!d.current||!f.current)return;const C=v.current;return C!==null&&C!==t.marketId&&f.current.isConnected()&&(f.current.unsubscribeOrderbook(C,D),x.current=!1),n({asks:[],bids:[]}),r(!0),o(null),u(null),E(),f.current.isConnected()&&(f.current.subscribeOrderbook(t.marketId,D,!0),x.current=!0),v.current=t.marketId,()=>{f.current&&f.current.isConnected()&&v.current===t.marketId&&(f.current.unsubscribeOrderbook(t.marketId,D),x.current=!1)}},[t.marketId,E,D]),S.useEffect(()=>(g.current!==null&&(clearInterval(g.current),g.current=null),!a&&d.current&&(_(),g.current=window.setInterval(()=>{_()},5e3)),()=>{g.current!==null&&(clearInterval(g.current),g.current=null)}),[a,t.marketId,_]),S.useEffect(()=>{const C=setInterval(()=>{const A=Date.now(),N=500;n($=>{let W=!1;const L=$.asks.map(j=>{const R=`ask-${j.price}`,B=w.current.get(R);return j.flash&&B&&A-B>=N?(W=!0,w.current.delete(R),{...j,flash:null}):j}),F=$.bids.map(j=>{const R=`bid-${j.price}`,B=w.current.get(R);return j.flash&&B&&A-B>=N?(W=!0,w.current.delete(R),{...j,flash:null}):j});return W?{...$,asks:L,bids:F}:$})},100);return()=>clearInterval(C)},[]),{orderbook:e,loading:s,error:i,isConnected:a,wsError:c,refresh:E}}function Mo(t,e=2,n=2,s="0.00"){return t==null||isNaN(t)?s:t.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:n})}function rf(t){return t==null||isNaN(t)?"--":Mo(t,2,2,"--")}function Hp(t){return t==null||isNaN(t)?"--":Mo(t,2,8,"--")}function of(t){return t==null||isNaN(t)?"0.000":Mo(t,3,3,"0.000")}function _N(t){return t==null||isNaN(t)?"0":Mo(t,3,8,"0")}function CN(t){return t==null||isNaN(t)?"0.00":Mo(t,2,2,"0.00")}function EN(t){return t==null||isNaN(t)?"0.00":Mo(t,2,2,"0.00")}function It(t){return t==null||isNaN(t)?"0.00":Mo(t,2,2,"0.00")}function PN(t){return t==null||isNaN(t)?"0%":`${(t*100).toFixed(2)}%`}function u5(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return ve(t).toFixed(8).replace(/\.?0+$/,"")}catch{return"0"}}function TN(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"--";try{const n=u5(t).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")}catch{return"--"}}function MN(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return u5(t)}catch{return"0"}}function IN(t,e="--"){if(t==null)return e;try{return(typeof t=="string"||typeof t=="number"?ve(t):0).toFixed(2).replace(/\.?0+$/,"")}catch{return e}}function fr(t){if(!t)return Date.now();const e=typeof t=="string"?Number(t):t;return isNaN(e)||e<=0?Date.now():e<9466848e5?e*1e3:e}function d0(t){const[e,n]=S.useState(null),[s,r]=S.useState(null),[i,o]=S.useState(!0),[a,l]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(null),p=S.useRef(null),m=S.useRef(null),x=S.useRef(!1),v=S.useRef(!1),g=S.useRef(null),b=S.useRef(null),w=S.useCallback(async()=>{if(!p.current){console.warn("[useTradePrice] pollRecentTrades called but infoClientRef.current is null");return}console.debug("[useTradePrice] Polling recent trades (marketId:",t.marketId,")");try{const D=t.limit||100,C=await p.current.getRecentTrades(t.marketId,D);if(C&&Array.isArray(C)&&C.length>0){const N=[...C].sort((W,L)=>{const F=fr(W.timestamp);return fr(L.timestamp)-F})[0],$={market_id:N.market_id||t.marketId,price:typeof N.price=="string"?ve(N.price):N.price,quantity:typeof N.quantity=="string"?ve(N.quantity):N.quantity||0,timestamp:fr(N.timestamp),is_buyer_maker:N.is_buyer_maker||!1,trade_id:N.trade_id||""};n(W=>(W&&typeof W.price=="number"&&($.price>W.price?f("up"):$.price<W.price&&f("down")),setTimeout(()=>f(null),500),$))}else console.warn("[useTradePrice] Polling returned no trades or invalid data:",C)}catch(D){l(D instanceof Error?D.message:"Failed to load recent trades"),console.error("[useTradePrice] Failed to poll recent trades:",D)}},[t.marketId,t.limit]),y=S.useCallback(async()=>{if(p.current){o(!0),l(null);try{const D=t.limit||100,C=await p.current.getRecentTrades(t.marketId,D);if(C&&Array.isArray(C)&&C.length>0){const N=[...C].sort((W,L)=>{const F=fr(W.timestamp);return fr(L.timestamp)-F})[0],$={market_id:N.market_id||t.marketId,price:typeof N.price=="string"?ve(N.price):N.price,quantity:typeof N.quantity=="string"?ve(N.quantity):N.quantity||0,timestamp:fr(N.timestamp),is_buyer_maker:N.is_buyer_maker||!1,trade_id:N.trade_id||""};n($)}else console.warn("[useTradePrice] Initialization returned no trades or invalid data:",C)}catch(D){l(D instanceof Error?D.message:"Failed to load recent trades"),console.error("Failed to initialize recent trades:",D)}finally{o(!1)}}},[t.marketId,t.limit]),k=S.useCallback(D=>{if(console.debug("[useTradePrice] handleLastPriceUpdate called with data:",D),!D){console.warn("[useTradePrice] handleLastPriceUpdate received null/undefined data");return}if(!D.price&&D.price!==0){console.warn("[useTradePrice] handleLastPriceUpdate received data without price field:",D);return}const C=typeof D.price=="string"?ve(D.price):Number(D.price),A=typeof D.quantity=="string"?ve(D.quantity):Number(D.quantity)||0;if(isNaN(C)){console.warn("[useTradePrice] Invalid price value:",D.price);return}n(N=>{zl(N)&&typeof N.price=="number"&&(C>N.price?f("up"):C<N.price&&f("down")),setTimeout(()=>f(null),500);const $={market_id:D.market_id||t.marketId,price:C,quantity:A,timestamp:D.timestamp||Date.now(),is_buyer_maker:D.is_buyer_maker||!1,trade_id:D.trade_id||""};return zl($)||console.error("[useTradePrice] Invalid LastPriceData structure:",$),console.debug("[useTradePrice] Setting lastPrice to:",$),console.debug("[useTradePrice] Type check - isLastPriceData:",zl($)),$})},[t.marketId]),_=S.useCallback(D=>{if(!D){console.warn("[useTradePrice] handleMarkPriceUpdate received null/undefined data");return}if(D.mark_price===void 0||D.mark_price===null){console.warn("[useTradePrice] handleMarkPriceUpdate received data without mark_price field:",D);return}const C=typeof D.mark_price=="string"?ve(D.mark_price):typeof D.mark_price=="number"?D.mark_price:Number(D.mark_price);if(isNaN(C)){console.warn("[useTradePrice] Invalid mark_price value:",D.mark_price);return}const A={symbol:D.symbol||t.symbol||"",mark_price:C,timestamp:D.timestamp||Date.now()};Lp(A)||console.error("[useTradePrice] Invalid MarkPriceData structure:",A),r(A)},[t.symbol]);S.useEffect(()=>{const D=new pn({baseURL:t.baseURL});p.current=D;const C=new To({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});m.current=C,y();const A=()=>{C.isConnected()&&(x.current||(C.subscribeLastPrice(t.marketId,k,!0),x.current=!0),t.symbol&&!v.current&&(C.subscribeMarkPrice(t.symbol,_),v.current=!0))};console.debug("[useTradePrice] Attempting WebSocket connection...");const N=C.connect();console.debug("[useTradePrice] Connect promise created, waiting for result..."),b.current=window.setTimeout(()=>{console.warn("[useTradePrice] WebSocket connection timeout fallback triggered after 12 seconds");const L=C.isConnected();console.warn("[useTradePrice] subscriptionClient.isConnected():",L,"hasPollingInterval:",g.current!==null),!L&&p.current&&g.current===null?(console.debug("[useTradePrice] Starting HTTP polling due to connection timeout (marketId:",t.marketId,")"),u(!1),w(),g.current=window.setInterval(()=>{w()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):L?console.debug("[useTradePrice] Connection established before timeout, no polling needed"):g.current!==null&&console.debug("[useTradePrice] Polling already started, skipping")},12e3),N.then(()=>{b.current!==null&&(clearTimeout(b.current),b.current=null),console.debug("[useTradePrice] WebSocket connected successfully"),u(!0),A()}).catch(L=>{b.current!==null&&(clearTimeout(b.current),b.current=null),console.error("[useTradePrice] WebSocket connection promise rejected:",L);const F=L instanceof Error?L.message:"Unknown error";console.info("WebSocket failed to establish connection. Falling back to HTTP polling:",F),u(!1),p.current?(g.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (WebSocket failure handler)"),clearInterval(g.current),g.current=null),console.debug("[useTradePrice] Starting HTTP polling due to WebSocket connection failure (marketId:",t.marketId,")"),w(),g.current=window.setInterval(()=>{w()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null")});let $=null;const W=C.wsClient;return W&&($=W.onStateChange(L=>{console.debug("[useTradePrice] WebSocket state changed to:",L),L===ut.Connected?(console.debug("[useTradePrice] WebSocket connected - stopping polling if active"),u(!0),x.current&&A()):(L===ut.Disconnected||L===ut.Reconnecting)&&(console.debug("[useTradePrice] WebSocket disconnected/reconnecting - polling effect should start polling"),u(!1),x.current=!1,v.current=!1)})),()=>{b.current!==null&&(clearTimeout(b.current),b.current=null),x.current=!1,v.current=!1,$&&$(),m.current&&(m.current.unsubscribeLastPrice(t.marketId,k),t.symbol&&m.current.unsubscribeMarkPrice(t.symbol,_),m.current.disconnect())}},[t.baseURL,t.wsURL,t.marketId,t.symbol,t.authToken,t.walletAddress,t.deviceID]),S.useEffect(()=>{p.current&&m.current&&(m.current.isConnected()&&(m.current.unsubscribeLastPrice(t.marketId,k),x.current=!1,t.symbol&&(m.current.unsubscribeMarkPrice(t.symbol,_),v.current=!1)),y(),m.current.isConnected()&&(m.current.subscribeLastPrice(t.marketId,k,!0),x.current=!0,t.symbol&&(m.current.subscribeMarkPrice(t.symbol,_),v.current=!0)))},[t.marketId,t.symbol]),S.useEffect(()=>(console.debug("[useTradePrice] Polling effect triggered - isConnected:",c,"marketId:",t.marketId),g.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (polling effect)"),clearInterval(g.current),g.current=null),!c&&p.current?(console.debug("[useTradePrice] Starting HTTP polling (WebSocket disconnected, marketId:",t.marketId,")"),w(),g.current=window.setInterval(()=>{w()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):!c&&!p.current?console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null (isConnected:",c,")"):c&&console.debug("[useTradePrice] WebSocket connected, polling not needed"),()=>{g.current!==null&&(console.debug("[useTradePrice] Cleaning up polling interval (polling effect cleanup)"),clearInterval(g.current),g.current=null)}),[c,t.marketId]);const{displayPrice:E,displayTimestamp:T}=S.useMemo(()=>{const D=zl(e)&&e.price!=null,C=Lp(s)&&s.mark_price!=null;if(D&&C){const A=e.timestamp||0,N=s.timestamp||0;return A>=N?{displayPrice:e.price,displayTimestamp:A}:{displayPrice:s.mark_price,displayTimestamp:N}}return D?{displayPrice:e.price,displayTimestamp:e.timestamp||0}:C?{displayPrice:s.mark_price,displayTimestamp:s.timestamp||0}:{displayPrice:null,displayTimestamp:null}},[e,s]);return{lastPrice:e,markPrice:s,displayPrice:E,displayTimestamp:T,loading:i,error:a,isConnected:c,priceChange:d,refresh:y,isLastPriceData:zl,isMarkPriceData:Lp}}function d5(t){const e=t.useWebSocket!==!1,[n,s]=S.useState([]),[r,i]=S.useState(!0),[o,a]=S.useState(""),[l,c]=S.useState(!1),u=S.useRef(null),d=S.useRef(null),f=S.useRef(0),p=S.useRef(!1),m=S.useRef(t);m.current=t;const x=S.useCallback(b=>{const w=A=>!A||A===""?0:ve(A),y=w(b.size),k=b.is_long!==void 0?b.is_long?br:hu:y>=0?br:hu,_=w(b.entry_price),E=w(b.mark_price),T=b.leverage?parseFloat(b.leverage):void 0,C=w(b.margin_balance)||(T&&_&&y!==0?Math.abs(Math.abs(y)*_/T):0);return{marketId:b.market_id.toString(),symbol:b.symbol||`m-${b.market_id}`,size:Math.abs(y),entryPrice:_,markPrice:E,liquidationPrice:b.liquidation_price?w(b.liquidation_price):void 0,unrealizedPnL:w(b.unrealized_pnl||b.pnl),leverage:T,margin:C,side:k,marginMode:b.margin_mode||b.margin_type||du,bucketId:b.bucket_id?String(b.bucket_id):void 0}},[]),v=S.useCallback(async()=>{if(!u.current)return;const b=m.current;if(!b.walletAddress||b.walletAddress.trim()===""){a(""),s([]),i(!1);return}a("");try{const w=await u0(Rb.http,()=>u.current.getPositions(b.walletAddress));if(Array.isArray(w)){const y=w.map(x);s(k=>{if(k.length!==y.length)return y;const _=JSON.stringify(k),E=JSON.stringify(y);return _===E?k:y})}else s(y=>y.length===0?y:[])}catch(w){a(w instanceof Error?w.message:"Failed to load positions"),console.error("Failed to fetch positions after retries:",w)}finally{i(!1)}},[x]),g=S.useCallback(b=>{if(b.positions&&Array.isArray(b.positions)){const w=b.positions.map(x);s(y=>{if(y.length!==w.length)return w;const k=JSON.stringify(y),_=JSON.stringify(w);return k===_?y:w})}},[x]);return S.useEffect(()=>{const b=new pn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=b,v(),e&&t.wsURL){const w=new To({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=w;const y=()=>{w.isConnected()&&!p.current&&(w.subscribeUserUpdates(g),p.current=!0)};w.connect().then(()=>{c(!0),y()}).catch(E=>{console.error("Failed to connect WebSocket:",E),c(!1),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{v()},t.refreshInterval))});let k=null;const _=w.wsClient;return _&&(k=_.onStateChange(E=>{E===ut.Connected?(c(!0),p.current&&y(),f.current!==null&&(clearInterval(f.current),f.current=0)):(E===ut.Disconnected||E===ut.Reconnecting)&&(c(!1),p.current=!1,t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{v()},t.refreshInterval)))})),()=>{k&&k(),f.current!==null&&(clearInterval(f.current),f.current=0),d.current&&(d.current.unsubscribeUserUpdates(g),d.current.disconnect())}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{v()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=0)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{positions:n,loading:r,error:o,isConnected:l,refresh:v}}function h5(t){const[e,n]=S.useState([]),[s,r]=S.useState(!0),[i,o]=S.useState(""),a=S.useRef(null),l=S.useRef(0),c=S.useCallback(async()=>{if(a.current){o(""),r(!0);try{if(!t.walletAddress){o("Wallet address is required"),n([]);return}const u=await a.current.getBuckets(t.walletAddress),d=Array.isArray(u)?u:[];Array.isArray(u)||console.warn("[useBuckets] getBuckets returned non-array:",u);const f=d.map(p=>r5(p,ve));n(f)}catch(u){const d=u instanceof Error?u.message:"Failed to load buckets";o(d),console.error("Failed to fetch buckets:",u),n([])}finally{r(!1)}}},[t.walletAddress]);return S.useEffect(()=>{const u=new pn({baseURL:t.baseURL,sessionToken:t.authToken});return a.current=u,c(),t.refreshInterval&&t.refreshInterval>0&&(l.current=window.setInterval(()=>{c()},t.refreshInterval)),()=>{l.current!==null&&(clearInterval(l.current),l.current=0)}},[t.baseURL,t.authToken,t.walletAddress,t.refreshInterval]),{buckets:e,loading:s,error:i,refresh:c}}function DN(t){const e=t.maxDataPoints||100,[n,s]=S.useState([]),[r,i]=S.useState(!0),[o,a]=S.useState(null),[l,c]=S.useState(!1),u=S.useRef(null),d=S.useRef(!1),f=S.useRef(null),p=S.useCallback(m=>{if(!m){console.warn("[useKline] handleKlineUpdate received null/undefined data");return}try{const x={market_id:m.market_id||String(t.marketId),symbol:m.symbol,interval:m.interval||t.interval,open_time:m.open_time||m.timestamp||Date.now(),close_time:m.close_time||m.open_time||Date.now(),open:typeof m.open=="string"?ve(m.open):Number(m.open)||0,high:typeof m.high=="string"?ve(m.high):Number(m.high)||0,low:typeof m.low=="string"?ve(m.low):Number(m.low)||0,close:typeof m.close=="string"?ve(m.close):Number(m.close)||0,volume:typeof m.volume=="string"?ve(m.volume):Number(m.volume)||0,trade_count:m.trade_count||m.tradeCount,timestamp:m.timestamp||m.open_time||Date.now(),raw:m};s(v=>{const g=[...v,x];return g.length>e?g.slice(-e):g})}catch(x){console.error("[useKline] Error processing kline update:",x),a(x instanceof Error?x.message:"Failed to process kline data")}},[t.marketId,t.interval,e]);return S.useEffect(()=>{const m=new To({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});u.current=m;const x=()=>{m.isConnected()&&(d.current||(m.subscribeKline(t.marketId,t.interval,p),d.current=!0))};console.debug("[useKline] Attempting WebSocket connection...");const v=m.connect();f.current=window.setTimeout(()=>{console.warn("[useKline] WebSocket connection timeout after 12 seconds"),m.isConnected()||(c(!1),a("WebSocket connection timeout"),i(!1))},12e3),v.then(()=>{f.current!==null&&(clearTimeout(f.current),f.current=null),console.debug("[useKline] WebSocket connected successfully"),c(!0),i(!1),x()}).catch(w=>{f.current!==null&&(clearTimeout(f.current),f.current=null),console.error("[useKline] WebSocket connection failed:",w);const y=w instanceof Error?w.message:"Unknown error";c(!1),a(y),i(!1)});let g=null;const b=m.wsClient;return b&&(g=b.onStateChange(w=>{console.debug("[useKline] WebSocket state changed to:",w),w===ut.Connected?(c(!0),d.current&&x()):(w===ut.Disconnected||w===ut.Reconnecting)&&(c(!1),d.current=!1)})),()=>{f.current!==null&&(clearTimeout(f.current),f.current=null),d.current=!1,g&&g(),u.current&&(u.current.unsubscribeKline(t.marketId,t.interval,p),u.current.disconnect())}},[t.wsURL,t.marketId,t.interval,t.authToken,t.walletAddress,t.deviceID,p]),{klineData:n,loading:r,error:o,isConnected:l}}function Io(t){const e=S.useRef(null),n=gt(O=>O.markets),s=gt(O=>O.marketsById),r=gt(O=>O.orderbooks),i=gt(O=>O.tickers),o=gt(O=>O.recentTrades),a=gt(O=>O.selectedMarketId),l=gt(O=>O.loadingMarkets),c=gt(O=>O.loadingOrderbooks),u=gt(O=>O.loadingTickers),d=gt(O=>O.loadingTrades),f=gt(O=>O.errors),p=gt(O=>O.setMarkets),m=gt(O=>O.setMarket),x=gt(O=>O.getMarket),v=gt(O=>O.getMarketBySymbol),g=gt(O=>O.setSelectedMarketId),b=gt(O=>O.setOrderbook),w=gt(O=>O.getOrderbook),y=gt(O=>O.updateOrderbook),k=gt(O=>O.setTicker),_=gt(O=>O.getTicker),E=gt(O=>O.setRecentTrades),T=gt(O=>O.getRecentTrades),D=gt(O=>O.setLoading),C=gt(O=>O.setError),A=gt(O=>O.clearError),N=gt(O=>O.clearCache);S.useEffect(()=>{e.current?t.sessionToken&&e.current.setSessionToken(t.sessionToken):e.current=new pn({baseURL:t.baseURL,sessionToken:t.sessionToken})},[t.baseURL,t.sessionToken]);const $=S.useCallback(async()=>{if(!e.current)throw new Error("InfoClient not initialized");const O="markets";D(O,!0),C(O,null);try{const P=await e.current.getMarkets(),Q=(Array.isArray(P)?P:(P==null?void 0:P.markets)||[]).map((Y,q)=>{let J;if(Y.id!==void 0)J=typeof Y.id=="string"?parseInt(Y.id,10)||q+1:Y.id;else if(Y.market_id!==void 0){const se=String(Y.market_id),we=parseInt(se,10);isNaN(we)?J=q+1:we>Number.MAX_SAFE_INTEGER?J=we%Number.MAX_SAFE_INTEGER||q+1:J=we}else J=q+1;return{id:J,symbol:Y.symbol||Y.moniker,moniker:Y.moniker,baseAsset:Y.base_asset||Y.baseAsset,quoteAsset:Y.quote_asset||Y.quoteAsset,active:Y.active!==void 0?Y.active:Y.status==="active",market_id:Y.market_id,status:Y.status,...Y}});return p(Q),Q}catch(P){const Z=P instanceof Error?P.message:"Failed to fetch markets";throw C(O,Z),P}finally{D(O,!1)}},[p,D,C]),W=S.useCallback(async O=>{if(!e.current)throw new Error("InfoClient not initialized");const P=typeof O=="string"?parseInt(O,10):O,Z=isNaN(P)?null:x(P);if(Z)return Z;try{const Q=await e.current.getMarketByID(O);return Q?(m(Q),Q):null}catch(Q){const Y=Q instanceof Error?Q.message:`Failed to fetch market ${O}`;throw C(`market_${O}`,Y),Q}},[x,m,C]),L=S.useCallback(async O=>{if(!e.current)throw new Error("InfoClient not initialized");const P=v(O);if(P)return P;try{const Z=await e.current.getMarketByMoniker(O);return Z?(m(Z),Z):null}catch(Z){const Q=Z instanceof Error?Z.message:`Failed to fetch market ${O}`;throw C(`market_${O}`,Q),Z}},[v,m,C]),F=S.useCallback(async(O,P=!0,Z=20)=>{if(!e.current)throw new Error("InfoClient not initialized");const Q=`orderbook_${O}`;D(Q,!0),C(Q,null);try{const Y=await e.current.getOrderbook(O,P,Z);if(Y&&(Y.bids||Y.asks)){const q={bids:Y.bids||[],asks:Y.asks||[],timestamp:Date.now()};return b(typeof O=="string"?O:O.toString(),q),q}return null}catch(Y){const q=Y instanceof Error?Y.message:`Failed to fetch orderbook for market ${O}`;throw C(Q,q),Y}finally{D(Q,!1)}},[b,D,C]),j=S.useCallback(async O=>{if(!e.current)throw new Error("InfoClient not initialized");const P=`ticker_${O}`;D(P,!0),C(P,null);try{const Z=await e.current.getTicker(O);if(Z){const Q=typeof O=="string"?O:O.toString(),Y={marketId:Q,...Z,timestamp:Date.now()};return k(Q,Y),Y}return null}catch(Z){const Q=Z instanceof Error?Z.message:`Failed to fetch ticker for market ${O}`;throw C(P,Q),Z}finally{D(P,!1)}},[k,D,C]),R=S.useCallback(async(O,P=100)=>{if(!e.current)throw new Error("InfoClient not initialized");const Z=`trades_${O}`;D(Z,!0),C(Z,null);try{const Q=await e.current.getRecentTrades(O,P);if(Q){const Y=Array.isArray(Q)?Q:[];return E(typeof O=="string"?O:O.toString(),Y),Y}return null}catch(Q){const Y=Q instanceof Error?Q.message:`Failed to fetch trades for market ${O}`;throw C(Z,Y),Q}finally{D(Z,!1)}},[E,D,C]);S.useEffect(()=>{t.autoFetchMarkets&&n.length===0&&!l&&$().catch(console.error)},[t.autoFetchMarkets,n.length,l,$]);const B=a?n.find(O=>{var P;return O.market_id===a||((P=O.id)==null?void 0:P.toString())===a}):null,I=B?B.moniker||B.symbol||(B.baseAsset&&B.quoteAsset?`${B.baseAsset}-${B.quoteAsset}`:null):null,G=S.useCallback(O=>{const P=typeof O=="string"?O:O.toString(),Z=n.find(Q=>{var Y;return Q.market_id===P||((Y=Q.id)==null?void 0:Y.toString())===P});return Z?Z.moniker||Z.symbol||(Z.baseAsset&&Z.quoteAsset?`${Z.baseAsset}/${Z.quoteAsset}`:null):null},[n]);return{markets:n,marketsById:s,orderbooks:r,tickers:i,recentTrades:o,selectedMarketId:a,selectedMarket:B,selectedMarketSymbol:I,loadingMarkets:l,loadingOrderbooks:c,loadingTickers:u,loadingTrades:d,isLoading:O=>{if(O==="markets")return l;if(O.startsWith("orderbook_")){const P=O.split("_").slice(1).join("_");return c.has(P)}if(O.startsWith("ticker_")){const P=O.split("_").slice(1).join("_");return u.has(P)}if(O.startsWith("trades_")){const P=O.split("_").slice(1).join("_");return d.has(P)}return!1},errors:f,getError:O=>f.get(O),getMarket:x,getMarketBySymbol:v,getSymbolByMarketId:G,getOrderbook:w,getTicker:_,getRecentTrades:T,fetchMarkets:$,fetchMarket:W,fetchMarketBySymbol:L,fetchOrderbook:F,fetchTicker:j,fetchRecentTrades:R,updateOrderbook:y,clearCache:N,clearError:A,setSelectedMarketId:g,infoClient:e.current}}function NN(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const AN=t=>{switch(t){case"success":return LN;case"info":return FN;case"warning":return jN;case"error":return BN;default:return null}},RN=Array(12).fill(0),ON=({visible:t,className:e})=>le.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},le.createElement("div",{className:"sonner-spinner"},RN.map((n,s)=>le.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),LN=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),jN=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),FN=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),BN=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$N=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},le.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),le.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),zN=()=>{const[t,e]=le.useState(document.hidden);return le.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let Om=1;class UN{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:s,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Om++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:s}),{...l,...e,id:i,dismissible:a,title:s}):l):this.addToast({title:s,...r,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i=s!==void 0,o;const a=r.then(async c=>{if(o=["resolve",c],le.isValidElement(c))i=!1,this.create({id:s,type:"default",message:c});else if(HN(c)&&!c.ok){i=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,m=typeof d=="object"&&!le.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:f,...m})}else if(c instanceof Error){i=!1;const d=typeof n.error=="function"?await n.error(c):n.error,f=typeof n.description=="function"?await n.description(c):n.description,m=typeof d=="object"&&!le.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:f,...m})}else if(n.success!==void 0){i=!1;const d=typeof n.success=="function"?await n.success(c):n.success,f=typeof n.description=="function"?await n.description(c):n.description,m=typeof d=="object"&&!le.isValidElement(d)?d:{message:d};this.create({id:s,type:"success",description:f,...m})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description,p=typeof u=="object"&&!le.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:d,...p})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,n)=>{const s=(n==null?void 0:n.id)||Om++;return this.create({jsx:e(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Pn=new UN,WN=(t,e)=>{const n=(e==null?void 0:e.id)||Om++;return Pn.addToast({title:t,...e,id:n}),n},HN=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",VN=WN,YN=()=>Pn.toasts,GN=()=>Pn.getActiveToasts(),Te=Object.assign(VN,{success:Pn.success,info:Pn.info,warning:Pn.warning,error:Pn.error,custom:Pn.custom,message:Pn.message,promise:Pn.promise,dismiss:Pn.dismiss,loading:Pn.loading},{getHistory:YN,getToasts:GN});NN("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function kd(t){return t.label!==void 0}const qN=3,KN="24px",XN="16px",c1=4e3,QN=356,JN=14,ZN=45,eA=200;function Bs(...t){return t.filter(Boolean).join(" ")}function tA(t){const[e,n]=t.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}const nA=t=>{var e,n,s,r,i,o,a,l,c;const{invert:u,toast:d,unstyled:f,interacting:p,setHeights:m,visibleToasts:x,heights:v,index:g,toasts:b,expanded:w,removeToast:y,defaultRichColors:k,closeButton:_,style:E,cancelButtonStyle:T,actionButtonStyle:D,className:C="",descriptionClassName:A="",duration:N,position:$,gap:W,expandByDefault:L,classNames:F,icons:j,closeButtonAriaLabel:R="Close toast"}=t,[B,I]=le.useState(null),[G,O]=le.useState(null),[P,Z]=le.useState(!1),[Q,Y]=le.useState(!1),[q,J]=le.useState(!1),[se,we]=le.useState(!1),[Ye,Ne]=le.useState(!1),[Le,ze]=le.useState(0),[wt,M]=le.useState(0),ce=le.useRef(d.duration||N||c1),me=le.useRef(null),Ie=le.useRef(null),pe=g===0,_e=g+1<=x,V=d.type,ne=d.dismissible!==!1,H=d.className||"",X=d.descriptionClassName||"",xe=le.useMemo(()=>v.findIndex(z=>z.toastId===d.id)||0,[v,d.id]),K=le.useMemo(()=>{var z;return(z=d.closeButton)!=null?z:_},[d.closeButton,_]),de=le.useMemo(()=>d.duration||N||c1,[d.duration,N]),be=le.useRef(0),oe=le.useRef(0),re=le.useRef(0),he=le.useRef(null),[Ce,Me]=$.split("-"),Fe=le.useMemo(()=>v.reduce((z,ye,st)=>st>=xe?z:z+ye.height,0),[v,xe]),He=zN(),Oe=d.invert||u,Ae=V==="loading";oe.current=le.useMemo(()=>xe*W+Fe,[xe,Fe]),le.useEffect(()=>{ce.current=de},[de]),le.useEffect(()=>{Z(!0)},[]),le.useEffect(()=>{const z=Ie.current;if(z){const ye=z.getBoundingClientRect().height;return M(ye),m(st=>[{toastId:d.id,height:ye,position:d.position},...st]),()=>m(st=>st.filter($e=>$e.toastId!==d.id))}},[m,d.id]),le.useLayoutEffect(()=>{if(!P)return;const z=Ie.current,ye=z.style.height;z.style.height="auto";const st=z.getBoundingClientRect().height;z.style.height=ye,M(st),m($e=>$e.find(ae=>ae.toastId===d.id)?$e.map(ae=>ae.toastId===d.id?{...ae,height:st}:ae):[{toastId:d.id,height:st,position:d.position},...$e])},[P,d.title,d.description,m,d.id,d.jsx,d.action,d.cancel]);const ke=le.useCallback(()=>{Y(!0),ze(oe.current),m(z=>z.filter(ye=>ye.toastId!==d.id)),setTimeout(()=>{y(d)},eA)},[d,y,m,oe]);le.useEffect(()=>{if(d.promise&&V==="loading"||d.duration===1/0||d.type==="loading")return;let z;return w||p||He?(()=>{if(re.current<be.current){const $e=new Date().getTime()-be.current;ce.current=ce.current-$e}re.current=new Date().getTime()})():(()=>{ce.current!==1/0&&(be.current=new Date().getTime(),z=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),ke()},ce.current))})(),()=>clearTimeout(z)},[w,p,d,V,He,ke]),le.useEffect(()=>{d.delete&&(ke(),d.onDismiss==null||d.onDismiss.call(d,d))},[ke,d.delete]);function Ge(){var z;if(j!=null&&j.loading){var ye;return le.createElement("div",{className:Bs(F==null?void 0:F.loader,d==null||(ye=d.classNames)==null?void 0:ye.loader,"sonner-loader"),"data-visible":V==="loading"},j.loading)}return le.createElement(ON,{className:Bs(F==null?void 0:F.loader,d==null||(z=d.classNames)==null?void 0:z.loader),visible:V==="loading"})}const Be=d.icon||(j==null?void 0:j[V])||AN(V);var ee,U;return le.createElement("li",{tabIndex:0,ref:Ie,className:Bs(C,H,F==null?void 0:F.toast,d==null||(e=d.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[V],d==null||(n=d.classNames)==null?void 0:n[V]),"data-sonner-toast":"","data-rich-colors":(ee=d.richColors)!=null?ee:k,"data-styled":!(d.jsx||d.unstyled||f),"data-mounted":P,"data-promise":!!d.promise,"data-swiped":Ye,"data-removed":Q,"data-visible":_e,"data-y-position":Ce,"data-x-position":Me,"data-index":g,"data-front":pe,"data-swiping":q,"data-dismissible":ne,"data-type":V,"data-invert":Oe,"data-swipe-out":se,"data-swipe-direction":G,"data-expanded":!!(w||L&&P),"data-testid":d.testId,style:{"--index":g,"--toasts-before":g,"--z-index":b.length-g,"--offset":`${Q?Le:oe.current}px`,"--initial-height":L?"auto":`${wt}px`,...E,...d.style},onDragEnd:()=>{J(!1),I(null),he.current=null},onPointerDown:z=>{z.button!==2&&(Ae||!ne||(me.current=new Date,ze(oe.current),z.target.setPointerCapture(z.pointerId),z.target.tagName!=="BUTTON"&&(J(!0),he.current={x:z.clientX,y:z.clientY})))},onPointerUp:()=>{var z,ye,st;if(se||!ne)return;he.current=null;const $e=Number(((z=Ie.current)==null?void 0:z.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),vt=Number(((ye=Ie.current)==null?void 0:ye.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ae=new Date().getTime()-((st=me.current)==null?void 0:st.getTime()),ge=B==="x"?$e:vt,qe=Math.abs(ge)/ae;if(Math.abs(ge)>=ZN||qe>.11){ze(oe.current),d.onDismiss==null||d.onDismiss.call(d,d),O(B==="x"?$e>0?"right":"left":vt>0?"down":"up"),ke(),we(!0);return}else{var Re,Ue;(Re=Ie.current)==null||Re.style.setProperty("--swipe-amount-x","0px"),(Ue=Ie.current)==null||Ue.style.setProperty("--swipe-amount-y","0px")}Ne(!1),J(!1),I(null)},onPointerMove:z=>{var ye,st,$e;if(!he.current||!ne||((ye=window.getSelection())==null?void 0:ye.toString().length)>0)return;const ae=z.clientY-he.current.y,ge=z.clientX-he.current.x;var qe;const Re=(qe=t.swipeDirections)!=null?qe:tA($);!B&&(Math.abs(ge)>1||Math.abs(ae)>1)&&I(Math.abs(ge)>Math.abs(ae)?"x":"y");let Ue={x:0,y:0};const tt=Qe=>1/(1.5+Math.abs(Qe)/20);if(B==="y"){if(Re.includes("top")||Re.includes("bottom"))if(Re.includes("top")&&ae<0||Re.includes("bottom")&&ae>0)Ue.y=ae;else{const Qe=ae*tt(ae);Ue.y=Math.abs(Qe)<Math.abs(ae)?Qe:ae}}else if(B==="x"&&(Re.includes("left")||Re.includes("right")))if(Re.includes("left")&&ge<0||Re.includes("right")&&ge>0)Ue.x=ge;else{const Qe=ge*tt(ge);Ue.x=Math.abs(Qe)<Math.abs(ge)?Qe:ge}(Math.abs(Ue.x)>0||Math.abs(Ue.y)>0)&&Ne(!0),(st=Ie.current)==null||st.style.setProperty("--swipe-amount-x",`${Ue.x}px`),($e=Ie.current)==null||$e.style.setProperty("--swipe-amount-y",`${Ue.y}px`)}},K&&!d.jsx&&V!=="loading"?le.createElement("button",{"aria-label":R,"data-disabled":Ae,"data-close-button":!0,onClick:Ae||!ne?()=>{}:()=>{ke(),d.onDismiss==null||d.onDismiss.call(d,d)},className:Bs(F==null?void 0:F.closeButton,d==null||(s=d.classNames)==null?void 0:s.closeButton)},(U=j==null?void 0:j.close)!=null?U:$N):null,(V||d.icon||d.promise)&&d.icon!==null&&((j==null?void 0:j[V])!==null||d.icon)?le.createElement("div",{"data-icon":"",className:Bs(F==null?void 0:F.icon,d==null||(r=d.classNames)==null?void 0:r.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||Ge():null,d.type!=="loading"?Be:null):null,le.createElement("div",{"data-content":"",className:Bs(F==null?void 0:F.content,d==null||(i=d.classNames)==null?void 0:i.content)},le.createElement("div",{"data-title":"",className:Bs(F==null?void 0:F.title,d==null||(o=d.classNames)==null?void 0:o.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?le.createElement("div",{"data-description":"",className:Bs(A,X,F==null?void 0:F.description,d==null||(a=d.classNames)==null?void 0:a.description)},typeof d.description=="function"?d.description():d.description):null),le.isValidElement(d.cancel)?d.cancel:d.cancel&&kd(d.cancel)?le.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||T,onClick:z=>{kd(d.cancel)&&ne&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,z),ke())},className:Bs(F==null?void 0:F.cancelButton,d==null||(l=d.classNames)==null?void 0:l.cancelButton)},d.cancel.label):null,le.isValidElement(d.action)?d.action:d.action&&kd(d.action)?le.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||D,onClick:z=>{kd(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,z),!z.defaultPrevented&&ke())},className:Bs(F==null?void 0:F.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function u1(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function sA(t,e){const n={};return[t,e].forEach((s,r)=>{const i=r===1,o=i?"--mobile-offset":"--offset",a=i?XN:KN;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(c=>{s[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof s[c]=="number"?`${s[c]}px`:s[c]}):l(a)}),n}const rA=le.forwardRef(function(e,n){const{id:s,invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:l,className:c,offset:u,mobileOffset:d,theme:f="light",richColors:p,duration:m,style:x,visibleToasts:v=qN,toastOptions:g,dir:b=u1(),gap:w=JN,icons:y,containerAriaLabel:k="Notifications"}=e,[_,E]=le.useState([]),T=le.useMemo(()=>s?_.filter(P=>P.toasterId===s):_.filter(P=>!P.toasterId),[_,s]),D=le.useMemo(()=>Array.from(new Set([i].concat(T.filter(P=>P.position).map(P=>P.position)))),[T,i]),[C,A]=le.useState([]),[N,$]=le.useState(!1),[W,L]=le.useState(!1),[F,j]=le.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=le.useRef(null),B=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=le.useRef(null),G=le.useRef(!1),O=le.useCallback(P=>{E(Z=>{var Q;return(Q=Z.find(Y=>Y.id===P.id))!=null&&Q.delete||Pn.dismiss(P.id),Z.filter(({id:Y})=>Y!==P.id)})},[]);return le.useEffect(()=>Pn.subscribe(P=>{if(P.dismiss){requestAnimationFrame(()=>{E(Z=>Z.map(Q=>Q.id===P.id?{...Q,delete:!0}:Q))});return}setTimeout(()=>{YM.flushSync(()=>{E(Z=>{const Q=Z.findIndex(Y=>Y.id===P.id);return Q!==-1?[...Z.slice(0,Q),{...Z[Q],...P},...Z.slice(Q+1)]:[P,...Z]})})})}),[_]),le.useEffect(()=>{if(f!=="system"){j(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?j("dark"):j("light")),typeof window>"u")return;const P=window.matchMedia("(prefers-color-scheme: dark)");try{P.addEventListener("change",({matches:Z})=>{j(Z?"dark":"light")})}catch{P.addListener(({matches:Q})=>{try{j(Q?"dark":"light")}catch(Y){console.error(Y)}})}},[f]),le.useEffect(()=>{_.length<=1&&$(!1)},[_]),le.useEffect(()=>{const P=Z=>{var Q;if(o.every(J=>Z[J]||Z.code===J)){var q;$(!0),(q=R.current)==null||q.focus()}Z.code==="Escape"&&(document.activeElement===R.current||(Q=R.current)!=null&&Q.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[o]),le.useEffect(()=>{if(R.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,G.current=!1)}},[R.current]),le.createElement("section",{ref:n,"aria-label":`${k} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((P,Z)=>{var Q;const[Y,q]=P.split("-");return T.length?le.createElement("ol",{key:P,dir:b==="auto"?u1():b,tabIndex:-1,ref:R,className:c,"data-sonner-toaster":!0,"data-sonner-theme":F,"data-y-position":Y,"data-x-position":q,style:{"--front-toast-height":`${((Q=C[0])==null?void 0:Q.height)||0}px`,"--width":`${QN}px`,"--gap":`${w}px`,...x,...sA(u,d)},onBlur:J=>{G.current&&!J.currentTarget.contains(J.relatedTarget)&&(G.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:J=>{J.target instanceof HTMLElement&&J.target.dataset.dismissible==="false"||G.current||(G.current=!0,I.current=J.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{W||$(!1)},onDragEnd:()=>$(!1),onPointerDown:J=>{J.target instanceof HTMLElement&&J.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},T.filter(J=>!J.position&&Z===0||J.position===P).map((J,se)=>{var we,Ye;return le.createElement(nA,{key:J.id,icons:y,index:se,toast:J,defaultRichColors:p,duration:(we=g==null?void 0:g.duration)!=null?we:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:v,closeButton:(Ye=g==null?void 0:g.closeButton)!=null?Ye:l,interacting:W,position:P,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,closeButtonAriaLabel:g==null?void 0:g.closeButtonAriaLabel,removeToast:O,toasts:T.filter(Ne=>Ne.position==J.position),heights:C.filter(Ne=>Ne.position==J.position),setHeights:A,expandByDefault:a,gap:w,expanded:N,swipeDirections:e.swipeDirections})})):null}))}),Ul="onboard_mnemonic",jo="onboard_wallet_address",Wl="onboard_auth_token",Hl="onboard_refresh_token",Vl="onboard_expires_at";function vl(t){const[e,n]=S.useState(""),[s,r]=S.useState(""),[i,o]=S.useState(!1),[a,l]=S.useState(""),[c,u]=S.useState(void 0),[d,f]=S.useState(void 0),[p,m]=S.useState(!1),[x,v]=S.useState(null);S.useEffect(()=>{const C=localStorage.getItem(Ul),A=localStorage.getItem(jo),N=localStorage.getItem(Wl),$=localStorage.getItem(Hl),W=localStorage.getItem(Vl);if(n(C||""),r(A||""),N&&l(N),$&&u($),W){const L=parseInt(W,10);isNaN(L)||f(L)}},[]);const g=S.useCallback(async C=>{if(!C||C.trim()==="")return null;o(!0);try{We.isReady()||await We.initialize();const A=await We.generateAddress(C.trim(),0);return A.success&&A.address?A.address:(console.error("Failed to generate address:",A.error),null)}catch(A){return console.error("Error generating address:",A),null}finally{o(!1)}},[]),b=S.useCallback(async C=>{const A=C.trim();if(A===""){n(""),r(""),localStorage.removeItem(Ul),localStorage.removeItem(jo);return}n(A),localStorage.setItem(Ul,A);const N=await g(A);N?(r(N),localStorage.setItem(jo,N)):(r(""),localStorage.removeItem(jo))},[g]),w=S.useCallback((C,A)=>{const N=C.trim(),$=A.trim().toLowerCase();n(N),r($),localStorage.setItem(Ul,N),localStorage.setItem(jo,$)},[]),y=S.useCallback(()=>{n(""),r(""),localStorage.removeItem(Ul),localStorage.removeItem(jo)},[]),k=S.useMemo(()=>{if(e==="")return null;const C=e.trim();if(C==="")return null;try{const A=cu.fromPhrase(C,"","m/44'/60'/0'/0/0");if(s&&A.address.toLowerCase()!==s.toLowerCase())return console.warn("Address mismatch: derived address does not match stored address"),null;const N=BigInt(A.privateKey),$=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(N===0n||N>=$)return console.error("Invalid private key: out of secp256k1 curve order"),null;const L=N.toString(16).toLowerCase().padStart(64,"0");return/^[0-9a-f]{64}$/.test(L)?L:(console.error("Invalid private key format"),null)}catch(A){return console.error("Error computing private key:",A),null}},[e,s]),_=S.useCallback(async(C,A,N,$)=>{m(!0),v(null);try{await b(C);const W=await i5(C,A,N,$);if(W.success&&W.authToken)l(W.authToken),u(W.refreshToken),f(W.expiresAt),localStorage.setItem(Wl,W.authToken),W.refreshToken&&localStorage.setItem(Hl,W.refreshToken),W.expiresAt&&localStorage.setItem(Vl,W.expiresAt.toString()),Te.success("Onboarding successful",{description:"Wallet authenticated and auth token generated.",duration:5e3});else{const L=W.error||"Onboarding failed";v(L),l(""),u(void 0),f(void 0),localStorage.removeItem(Wl),localStorage.removeItem(Hl),localStorage.removeItem(Vl),Te.error("Onboarding failed",{description:L,duration:6e3})}}catch(W){const L=(W==null?void 0:W.message)||"Unknown error during onboarding";v(L),l(""),u(void 0),f(void 0),localStorage.removeItem(Wl),localStorage.removeItem(Hl),localStorage.removeItem(Vl),Te.error("Onboarding error",{description:L,duration:6e3})}finally{m(!1)}},[b]),E=S.useCallback(()=>{v(null)},[]),T=S.useCallback(()=>{l(""),u(void 0),f(void 0),v(null),m(!1),localStorage.removeItem(Wl),localStorage.removeItem(Hl),localStorage.removeItem(Vl)},[]),D=S.useCallback(()=>{y(),T()},[y,T]);return{mnemonic:e,walletAddress:s,privateKey:k,authToken:a,refreshToken:c,expiresAt:d,loading:p,error:x,addressLoading:i,onboard:_,setMnemonic:b,setAccountData:w,clearAccountData:y,clearError:E,reset:T,resetAll:D}}function iA(){const{setAccountData:t}=vl(),{mnemonic:e,setMnemonic:n,addressIndex:s,setAddressIndex:r,result:i,loading:o,generateAddress:a,isReady:l}=ND();return S.useEffect(()=>{i!=null&&i.success&&i.address&&e&&t(e,i.address)},[i,e,t]),h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Address Generator"}),h.jsx("p",{children:"Generate Ethereum addresses from mnemonic phrases"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:e,onChange:c=>n(c.target.value),placeholder:"Enter your mnemonic phrase...",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),h.jsx("input",{id:"addressIndex",type:"number",value:s,onChange:c=>r(parseInt(c.target.value)||0),min:"0",max:"1000"})]}),h.jsx("button",{className:"button",onClick:a,disabled:o||!l,children:o?"Generating...":"Generate Address"}),i&&h.jsx("div",{className:`output ${i.success?"success":"error"}`,children:i.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Generated Address:"}),h.jsx("br",{}),i.address,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Index: ",i.index,h.jsx("br",{}),"Mnemonic: ",i.mnemonic]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),i.error]})})]})}function oA(){var f,p;const{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:c,signMessage:u,isReady:d}=AD();return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Message Signer"}),h.jsx("p",{children:"Sign messages with your private key"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"message",children:"Message to Sign:"}),h.jsx("textarea",{id:"message",value:n,onChange:m=>s(m.target.value),placeholder:"Enter message to sign...",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),h.jsx("input",{id:"addressIndex",type:"number",value:o,onChange:m=>a(parseInt(m.target.value)||0),min:"0",max:"1000"})]}),h.jsx("div",{className:"form-group",children:h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:r,onChange:m=>i(m.target.checked),style:{marginRight:"0.5rem"}}),"Use EIP-712 Typed Data"]})}),h.jsx("button",{className:"button",onClick:u,disabled:c||!d,children:c?"Signing...":"Sign Message"}),l&&h.jsx("div",{className:`output ${l.success?"success":"error"}`,children:l.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Signature:"}),h.jsx("br",{}),l.signature,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Message: ",l.message,h.jsx("br",{}),"EIP-712: ",(f=l.options)!=null&&f.useEIP712?"Yes":"No",h.jsx("br",{}),"Address Index: ",((p=l.options)==null?void 0:p.addressIndex)||0]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),l.error]})})]})}function aA(){var v,g,b,w;const[t,e]=S.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=S.useState(""),[r,i]=S.useState("1000000000000000000000000"),[o,a]=S.useState(0),[l,c]=S.useState(0),[u,d]=S.useState(null),[f,p]=S.useState(!1),m=async()=>{if(!We.isReady()){d({success:!1,error:"WASM module not ready"});return}if(!n){d({success:!1,error:"Wallet address is required"});return}p(!0),d(null);try{const y={nonce:o||Date.now(),deadline:l||Date.now()+36e5},k=await We.signDeposit(t,n,r,y);d(k)}catch(y){d({success:!1,error:y instanceof Error?y.message:"Unknown error"})}finally{p(!1)}},x=async()=>{if(!We.isReady()){d({success:!1,error:"WASM module not ready"});return}p(!0),d(null);try{const y=await We.generateAddress(t,0);y.success&&y.address?(s(y.address),d({success:!0,message:"Wallet address generated and set",address:y.address})):d({success:!1,error:y.error||"Failed to generate address"})}catch(y){d({success:!1,error:y instanceof Error?y.message:"Unknown error"})}finally{p(!1)}};return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Deposit Signer"}),h.jsx("p",{children:"Sign deposit messages for the Morpheum protocol"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:t,onChange:y=>e(y.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"walletAddress",children:"Wallet Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"walletAddress",type:"text",value:n,onChange:y=>s(y.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:x,disabled:f||!We.isReady(),style:{padding:"0.75rem 1rem"},children:"Generate"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"amount",children:"Amount (wei):"}),h.jsx("input",{id:"amount",type:"text",value:r,onChange:y=>i(y.target.value),placeholder:"1000000000000000000000000"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"nonce",children:"Nonce (0 for current timestamp):"}),h.jsx("input",{id:"nonce",type:"number",value:o,onChange:y=>a(parseInt(y.target.value)||0),min:"0"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"deadline",children:"Deadline (0 for 1 hour from now):"}),h.jsx("input",{id:"deadline",type:"number",value:l,onChange:y=>c(parseInt(y.target.value)||0),min:"0"})]})]}),h.jsx("button",{className:"button",onClick:m,disabled:f||!We.isReady()||!n,children:f?"Signing Deposit...":"Sign Deposit"}),u&&h.jsx("div",{className:`output ${u.success?"success":"error"}`,children:u.success?h.jsx(h.Fragment,{children:u.signature?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Deposit Signature:"}),h.jsx("br",{}),u.signature,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Wallet: ",(v=u.options)==null?void 0:v.walletAddress,h.jsx("br",{}),"Amount: ",(g=u.options)==null?void 0:g.amount," wei",h.jsx("br",{}),"Nonce: ",(b=u.options)==null?void 0:b.nonce,h.jsx("br",{}),"Deadline: ",(w=u.options)==null?void 0:w.deadline]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Wallet Address Generated:"}),h.jsx("br",{}),u.address,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Message:"}),h.jsx("br",{}),u.message]})}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),u.error]})})]})}function lA(){const{ownerMnemonic:t,setOwnerMnemonic:e,ownerAddress:n,setOwnerAddress:s,agentAddress:r,setAgentAddress:i,agentPrivateKey:o,expiresInDays:a,setExpiresInDays:l,permissions:c,setPermissions:u,agentName:d,setAgentName:f,nonce:p,setNonce:m,result:x,loading:v,generateOwnerAddress:g,generateAgentKeypair:b,prepareAgentSign:w,signAgentApproval:y,isReady:k}=RD();return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Agent Delegation"}),h.jsx("p",{children:"Approve an agent private key to act on behalf of the owner wallet"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"ownerMnemonic",children:"Owner Mnemonic (for signing approval):"}),h.jsx("textarea",{id:"ownerMnemonic",value:t,onChange:_=>e(_.target.value),placeholder:"Enter owner mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"ownerAddress",type:"text",value:n,onChange:_=>s(_.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:g,disabled:v||!k,style:{padding:"0.75rem 1rem"},children:"Generate"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentAddress",children:"Agent Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"agentAddress",type:"text",value:r,onChange:_=>i(_.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:b,disabled:v||!k,style:{padding:"0.75rem 1rem"},children:"Generate Keypair"})]})]}),o&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentPrivateKey",children:"Agent Private Key (save securely):"}),h.jsx("input",{id:"agentPrivateKey",type:"text",value:o,readOnly:!0,style:{fontFamily:"monospace",fontSize:"0.9rem"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentName",children:"Agent Name (optional):"}),h.jsx("input",{id:"agentName",type:"text",value:d,onChange:_=>f(_.target.value),placeholder:"TradingBot"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"expiresInDays",children:"Expires In Days:"}),h.jsx("input",{id:"expiresInDays",type:"number",value:a,onChange:_=>l(parseInt(_.target.value)||180),min:"1",max:"365"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"permissions",children:"Permissions (comma-separated):"}),h.jsx("input",{id:"permissions",type:"text",value:c,onChange:_=>u(_.target.value),placeholder:"clob::submit_order,clob::cancel_order"}),h.jsx("small",{style:{display:"block",marginTop:"0.5rem",opacity:.8},children:"Example: clob::submit_order, clob::cancel_order, clob::modify_order"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),h.jsx("input",{id:"nonce",type:"text",value:p,onChange:_=>m(_.target.value),placeholder:Date.now().toString()})]}),h.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[h.jsx("button",{className:"button secondary",onClick:w,disabled:v||!k||!n||!r,children:v?"Preparing...":"Prepare Agent Sign"}),h.jsx("button",{className:"button",onClick:y,disabled:v||!k||!n||!r||!t,children:v?"Signing Approval...":"Sign Agent Approval"})]}),x&&h.jsx("div",{className:`output ${x.success?"success":"error"}`,children:x.success?h.jsxs(h.Fragment,{children:[x.signature&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Agent Approval Signature:"}),h.jsx("br",{}),x.signature,h.jsx("br",{}),h.jsx("br",{})]}),x.typedData&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"EIP-712 Typed Data:"}),h.jsx("br",{}),h.jsx("pre",{style:{fontSize:"0.85rem",overflow:"auto",maxHeight:"300px"},children:JSON.stringify(x.typedData,null,2)}),h.jsx("br",{}),h.jsx("strong",{children:"Usage:"}),h.jsx("br",{}),"Use this typed data with MetaMask or other EIP-712 compatible wallets to sign the agent approval."]})]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),x.error]})})]})}function cA({status:t}){const e=()=>t.loading?"loading":t.loaded?"success":t.error?"error":"loading",n=()=>t.loading?"Loading WASM...":t.loaded?"WASM Ready":t.error?"WASM Error":"Unknown";return h.jsxs("div",{className:"App-section",children:[h.jsx("h3",{children:"WASM Status"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[h.jsx("span",{className:`status ${e()}`,children:n()}),t.loading&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"Initializing WebAssembly module..."}),t.loaded&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"morm_signer.wasm loaded successfully"}),t.error&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:t.error})]})]})}const uA="modulepreload",dA=function(t){return"/"+t},d1={},hA=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=dA(l),l in d1)return;d1[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":uA,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Bu="https://router.morpheum.io",h0="wss://router.morpheum.io/websocket",Lb="ios-device-1234567890",fA=({isRunning:t,onClick:e})=>h.jsx("button",{onClick:e,disabled:t,style:{color:"#fff",backgroundColor:t?"#ccc":"#007bff",cursor:t?"not-allowed":"pointer"},children:t?"Running Tests...":"Run All Tests"}),pA=({mnemonic:t,baseURL:e,onboardLoading:n,isRunning:s,onOnboard:r})=>{const i=n||s||!t||t.trim()==="";return h.jsx("button",{onClick:()=>{t&&t.trim()!==""&&r(t,e)},disabled:i,style:{color:i?"#ccc":"#fff",backgroundColor:i?"#ccc":"#28a745",cursor:i?"not-allowed":"pointer"},children:n?"Onboarding...":"Onboard & Get Auth Token"})},gA=({isRunning:t,onClick:e})=>h.jsx("button",{onClick:e,disabled:t,style:{color:t?"#ccc":"#fff",backgroundColor:t?"#ccc":"#dc3545",cursor:t?"not-allowed":"pointer"},children:"Clear Results"}),mA=({onClick:t})=>h.jsx("button",{onClick:t,className:"sdk-test-button-dismiss",children:"Dismiss"}),xA=({result:t})=>h.jsxs("div",{className:`sdk-test-result-item ${t.success?"success":"error"}`,children:[h.jsxs("div",{className:"sdk-test-result-content",children:[h.jsxs("div",{className:"sdk-test-result-message",children:[t.success?"":""," ",t.message]}),t.error&&h.jsxs("div",{className:"sdk-test-result-error",children:["Error: ",t.error]}),t.data&&h.jsxs("details",{className:"sdk-test-result-data",children:[h.jsx("summary",{children:"View Data"}),h.jsx("pre",{children:JSON.stringify(t.data,null,2)})]})]}),h.jsx("div",{className:"sdk-test-result-timestamp",children:new Date(t.timestamp).toLocaleTimeString()})]}),bA=({sectionName:t,isExpanded:e,onToggle:n})=>h.jsxs("h2",{className:"sdk-test-section-header",onClick:n,children:[h.jsx("span",{children:t}),h.jsx("span",{className:"sdk-test-section-chevron",children:e?"":""})]});function yA(){var Ne,Le,ze,wt;const[t,e]=S.useState(Bu),[n,s]=S.useState(""),[r,i]=S.useState(""),[o,a]=S.useState(""),[l,c]=S.useState(Lb),[u,d]=S.useState({}),[f,p]=S.useState(!1),[m,x]=S.useState(new Set),v=S.useRef(null),g=S.useRef(null),b=S.useRef(t),w=S.useRef([]),y=S.useRef(""),{markets:k,fetchMarkets:_}=Io({baseURL:t,sessionToken:r,autoFetchMarkets:!1}),{mnemonic:E,walletAddress:T,authToken:D,loading:C,error:A,onboard:N,clearError:$,setMnemonic:W}=vl();S.useEffect(()=>{E||W("legal winner thank year wave sausage worth useful legal winner thank yellow")},[E,W]);const L=S.useRef(E||"");S.useEffect(()=>{L.current=E||""},[E]);const{buckets:F,loading:j,error:R,refresh:B}=h5({baseURL:t,authToken:r||o,walletAddress:T||void 0,refreshInterval:0});S.useEffect(()=>{D&&(a(D),localStorage.setItem("authToken",D))},[D]),S.useEffect(()=>{o&&o.trim()!==""&&localStorage.setItem("authToken",o)},[o]);const I=S.useRef(f);S.useEffect(()=>{I.current===!0&&f===!1&&setTimeout(()=>{const M=Object.values(u).flatMap(pe=>pe.results),ce=M.filter(pe=>pe.success).length,me=M.length,Ie=me-ce;me>0&&(Ie===0?Te.success("All tests passed",{description:`${me} test(s) completed successfully.`,duration:5e3}):Te.warning("Tests completed with failures",{description:`${ce}/${me} tests passed. ${Ie} test(s) failed.`,duration:6e3}))},100),I.current=f},[f,u]),S.useEffect(()=>{const M=localStorage.getItem("authToken");M&&!o&&a(M)},[]);const G=k.length>0?(((Ne=k.find(M=>M.active))==null?void 0:Ne.market_id)??k[0].market_id)||(((ze=(Le=k.find(M=>M.active))==null?void 0:Le.id)==null?void 0:ze.toString())??((wt=k[0].id)==null?void 0:wt.toString())??""):null,O=G??n;S.useEffect(()=>{G&&n!==G&&s(G)},[G]),S.useEffect(()=>{b.current=t},[t]);const P=(M,ce)=>{d(me=>{const Ie=me[M]||{name:M,results:[]};return{...me,[M]:{...Ie,results:[...Ie.results,ce]}}})},Z=()=>{d({}),x(new Set)},Q=M=>{x(ce=>{const me=new Set(ce);return me.has(M)?me.delete(M):me.add(M),me})};S.useEffect(()=>{const M=Object.keys(u).filter(ce=>u[ce].results.length>0);M.length>0&&x(ce=>{const me=new Set(ce);return M.forEach(Ie=>me.add(Ie)),me})},[u]);const Y=()=>{const M="Utilities";P(M,{success:!0,message:"Testing utility functions...",timestamp:Date.now()});try{const ce=ct(1);P(M,{success:ce==="100000000",message:`toSatoshi(1.0) = ${ce}`,data:{expected:"100000000",got:ce},timestamp:Date.now()});const me=ct("1.5");P(M,{success:me==="150000000",message:`toSatoshi("1.5") = ${me}`,data:{expected:"150000000",got:me},timestamp:Date.now()});const Ie=ve("100000000");P(M,{success:Ie===1,message:`fromSatoshi("100000000") = ${Ie}`,data:{expected:1,got:Ie},timestamp:Date.now()});const pe=$C(1);P(M,{success:pe===1e8,message:`toSatoshiUint64(1.0) = ${pe}`,data:{expected:1e8,got:pe},timestamp:Date.now()});const _e=Qw("100000000"),V=Qw("abc");P(M,{success:_e&&!V,message:`isValidSatoshi tests: "100000000"=${_e}, "abc"=${V}`,data:{valid1:_e,valid2:V},timestamp:Date.now()});const ne=[1,1.5,2],H=GM(ne),X=qM(H);P(M,{success:X.length===3,message:`Batch conversion: ${ne.length} items`,data:{input:ne,satoshi:H,decimal:X},timestamp:Date.now()}),P(M,{success:fa===1e8,message:`SATOSHI_SCALE = ${fa}`,data:{expected:1e8,got:fa},timestamp:Date.now()})}catch(ce){P(M,{success:!1,message:"Utility test error",error:ce.message,timestamp:Date.now()})}},q=async(M="Authentication")=>{if(!T||T.trim()===""){P(M,{success:!1,message:"Authentication skipped: Wallet address required",timestamp:Date.now()});return}if(!We.isReady()){P(M,{success:!1,message:"Authentication failed: mormSigner not loaded. Please initialize mormSigner first for address generation.",timestamp:Date.now()});return}try{P(M,{success:!0,message:"Starting authentication (onboarding) with ethers.js EIP-712 signing...",timestamp:Date.now()});const{onboardAndGetAuthToken:ce}=await hA(async()=>{const{onboardAndGetAuthToken:Ie}=await Promise.resolve().then(()=>ED);return{onboardAndGetAuthToken:Ie}},void 0);if(P(M,{success:!0,message:"Calling onboardAndGetAuthToken (handles nonce, EIP-712 signing with ethers.js, and API request)...",timestamp:Date.now()}),!E)throw new Error("Mnemonic is required for authentication");const me=await ce(E,b.current);if(!me.success||!me.authToken)throw new Error(me.error||"Onboarding failed");a(me.authToken),localStorage.setItem("authToken",me.authToken),P(M,{success:!0,message:"AUTHENTICATION SUCCESSFUL!",data:{walletAddress:T,authToken:me.authToken.substring(0,32)+"...",refreshToken:me.refreshToken,expiresAt:me.expiresAt},timestamp:Date.now()})}catch(ce){const me=ce.message||String(ce);P(M,{success:!1,message:`Authentication failed: ${me}`,error:me,timestamp:Date.now()})}},J=async()=>{var pe;const M="Wallet Specific";g.current=new pn({baseURL:b.current}),r&&g.current&&g.current.setSessionToken(r),P(M,{success:!0,message:"Waiting for wallet address to be available...",timestamp:Date.now()});const ce=5e3,me=200;let Ie=0;for(;!T||T.trim()==="";){if(Ie>=ce){P(M,{success:!1,message:"Timeout: Wallet address not available after 5 seconds",error:"Wallet address is required for wallet-specific tests. Please ensure mnemonic is provided.",timestamp:Date.now()});return}await new Promise(_e=>setTimeout(_e,me)),Ie+=me}if(!T||T.trim()===""){P(M,{success:!1,message:"Wallet address is required for wallet-specific tests",error:"Wallet address not available",timestamp:Date.now()});return}P(M,{success:!0,message:`Wallet address available: ${T.substring(0,10)}...`,timestamp:Date.now()});try{P(M,{success:!0,message:`Testing getBalance() for asset "MORM" at address ${T.substring(0,10)}...`,timestamp:Date.now()});try{const V=await g.current.getBalance(T,"MORM"),ne=(V==null?void 0:V.balance)||(V==null?void 0:V.amount)||(V==null?void 0:V.value)||"N/A",H=typeof ne=="string"?ne:JSON.stringify(ne);P(M,{success:!!V,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: MORM | Balance: ${H} (raw satoshi format)`,data:{balance:V,asset:"MORM",walletAddress:T.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(V){P(M,{success:!1,message:'getBalance() failed for asset "MORM" (may require authentication)',error:V.message,data:{asset:"MORM",walletAddress:T.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}P(M,{success:!0,message:`Testing getBalance() for asset "USDC" at address ${T.substring(0,10)}...`,timestamp:Date.now()});try{const V=await g.current.getBalance(T,"USDC"),ne=(V==null?void 0:V.balance)||(V==null?void 0:V.amount)||(V==null?void 0:V.value)||"N/A",H=typeof ne=="string"?ne:JSON.stringify(ne);P(M,{success:!!V,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: USDC | Balance: ${H} (raw satoshi format)`,data:{balance:V,asset:"USDC",walletAddress:T.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(V){P(M,{success:!1,message:'getBalance() failed for asset "USDC" (may require authentication)',error:V.message,data:{asset:"USDC",walletAddress:T.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}try{const V=await g.current.getBalanceDecimal(T,"USDC");P(M,{success:!!V,message:"getBalanceDecimal() - GET /bank/v1/balance/{address}",data:V,timestamp:Date.now()})}catch(V){P(M,{success:!1,message:"getBalanceDecimal() failed",error:V.message,timestamp:Date.now()})}try{const V=await g.current.getBalances(T);P(M,{success:!!V,message:"getBalances() - GET /bank/v1/balances/{address}",data:V,timestamp:Date.now()})}catch(V){P(M,{success:!1,message:"getBalances() failed (may require authentication)",error:V.message,timestamp:Date.now()})}try{const V=await g.current.getPositions(T);P(M,{success:Array.isArray(V),message:`getPositions() - GET /bucket/v1/address/{address}/positions returned ${Array.isArray(V)?V.length:0} positions`,data:V,timestamp:Date.now()})}catch(V){P(M,{success:!1,message:"getPositions() failed",error:V.message,timestamp:Date.now()})}let _e=[];try{const V=await g.current.getOrders(T);_e=(V==null?void 0:V.orders)||[];const ne=V&&(Array.isArray(_e)||V.total_count!==void 0);P(M,{success:ne,message:`getOrders() - GET /clob/v1/address/orders?address={address} returned ${Array.isArray(_e)?_e.length:0} orders (total_count: ${(V==null?void 0:V.total_count)??"N/A"})`,data:{orders:Array.isArray(_e)?_e.slice(0,3):_e,total_count:V==null?void 0:V.total_count,timestamp:V==null?void 0:V.timestamp},timestamp:Date.now()})}catch(V){P(M,{success:!1,message:"getOrders() failed",error:V.message,timestamp:Date.now()})}if(Array.isArray(_e)&&_e.length>0){const V=_e[0],ne=(V==null?void 0:V.orderId)||(V==null?void 0:V.order_id)||(V==null?void 0:V.id);if(ne){P(M,{success:!0,message:`Testing getOrder() for order ID: ${ne.substring(0,16)}... (from getOrders result)`,timestamp:Date.now()});try{const H=await g.current.getOrder(ne);P(M,{success:!!H,message:`getOrder() - GET /clob/v1/order/{orderID} | Order ID: ${ne.substring(0,16)}...`,data:{order:H,orderId:ne,source:"First order from getOrders() result"},timestamp:Date.now()})}catch(H){P(M,{success:!1,message:`getOrder() failed for order ID: ${ne.substring(0,16)}...`,error:H.message,data:{orderId:ne,endpoint:"GET /clob/v1/order/{orderID}"},timestamp:Date.now()})}}else P(M,{success:!1,message:"getOrder() test skipped: No valid order ID found in getOrders() result",error:"Order ID not found in order object",data:{order:V,availableFields:Object.keys(V||{})},timestamp:Date.now()})}else P(M,{success:!0,message:"getOrder() test skipped: No orders available from getOrders() (need at least 1 order)",data:{ordersCount:_e.length,note:"getOrder() test requires at least one order from getOrders()"},timestamp:Date.now()});try{const V=await g.current.getOrderHistory(T),ne=Array.isArray(V)?V:(V==null?void 0:V.orders)||[],H=V&&(Array.isArray(ne)||V.orders!==void 0);P(M,{success:H,message:`getOrderHistory() - GET /clob/v1/address/orders/history?address={address} returned ${Array.isArray(ne)?ne.length:0} orders`,data:Array.isArray(ne)?ne.slice(0,3):V,timestamp:Date.now()})}catch(V){P(M,{success:!1,message:"getOrderHistory() failed",error:V.message,timestamp:Date.now()})}try{const V=await g.current.getTradeHistory(T),ne=Array.isArray(V)?V:(V==null?void 0:V.trades)||(V==null?void 0:V.data)||[],H=V&&(Array.isArray(ne)||V.trades!==void 0||V.data!==void 0);P(M,{success:H,message:`getTradeHistory() - GET /clob/v1/address/trades?address={address} returned ${Array.isArray(ne)?ne.length:0} trades`,data:Array.isArray(ne)?ne.slice(0,3):V,timestamp:Date.now()})}catch(V){P(M,{success:!1,message:"getTradeHistory() failed",error:V.message,timestamp:Date.now()})}try{const V=await g.current.getBuckets(T);if(P(M,{success:Array.isArray(V)||V!==void 0,message:`getBuckets() - GET /bucket/v1/address/{address}/buckets returned ${Array.isArray(V)?V.length:"data"}`,data:Array.isArray(V)?V.slice(0,3):V,timestamp:Date.now()}),Array.isArray(V)&&V.length>0){const ne=V[0],H=ne.bucket_id||ne.id||ne.bucketId;if(H)try{const X=await g.current.getBucket(H);P(M,{success:!!X,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} (${H.substring(0,16)}...)`,data:X,timestamp:Date.now()})}catch(X){P(M,{success:!1,message:`getBucket(${H.substring(0,16)}...) failed`,error:X.message,timestamp:Date.now()})}}}catch(V){P(M,{success:!1,message:"getBuckets() failed",error:V.message,timestamp:Date.now()})}P(M,{success:!0,message:"Testing useBuckets hook...",timestamp:Date.now()});try{if(await B(),P(M,{success:!R&&!j,message:`useBuckets hook: ${F.length} buckets loaded`,data:{buckets:F.slice(0,3),loading:j,error:R,totalBuckets:F.length},timestamp:Date.now()}),F.length>0){const ne=(pe=F[0].bucketId)==null?void 0:pe.toString();if(ne)try{const H=await g.current.getBucket(ne);P(M,{success:!!H,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} via hook bucket ID (${ne.substring(0,16)}...)`,data:H,timestamp:Date.now()})}catch(H){P(M,{success:!1,message:"getBucket() via hook bucket ID failed",error:H.message,timestamp:Date.now()})}}}catch(V){P(M,{success:!1,message:"useBuckets hook test failed",error:V.message,timestamp:Date.now()})}}catch(_e){P(M,{success:!1,message:"Wallet Specific test error",error:_e.message,timestamp:Date.now()})}},se=async()=>{var ce,me,Ie,pe,_e;const M="InfoClient";g.current=new pn({baseURL:b.current}),r&&g.current&&g.current.setSessionToken(r);try{P(M,{success:!0,message:"Testing getMarkets()...",timestamp:Date.now()});const V=await _();w.current=Array.isArray(V)?V:[];const ne=Array.isArray(V)?V.length:0,H=ne>0?V.find(K=>K.active||K.status==="active")??V[0]:null,X=(H==null?void 0:H.market_id)??((ce=H==null?void 0:H.id)==null?void 0:ce.toString())??null;if(P(M,{success:Array.isArray(V)&&ne>0,message:`getMarkets() - GET /market/v1/all returned ${ne} markets${X?` | Using market ID: ${X} (${(H==null?void 0:H.moniker)||(H==null?void 0:H.symbol)||"auto-selected"})`:""}`,data:{count:ne,defaultMarketId:X,defaultMarket:H?{id:H.id,market_id:H.market_id,moniker:H.moniker,symbol:H.symbol,active:H.active,status:H.status}:null,markets:V.slice(0,5)},timestamp:Date.now()}),X){s(X),y.current=X;const K=(H==null?void 0:H.moniker)||(H==null?void 0:H.symbol)||(H!=null&&H.baseAsset&&(H!=null&&H.quoteAsset)?`${H.baseAsset}-${H.quoteAsset}`:"Unknown");P(M,{success:!0,message:`Markets loaded: ${ne} | Auto-selected: ${K} (ID: ${X.substring(0,10)}...)`,data:{selectedMarketId:X,count:ne,market:H},timestamp:Date.now()}),P(M,{success:!0,message:"Waiting 1.5s for market selection to take effect...",timestamp:Date.now()}),await new Promise(de=>setTimeout(de,1500)),P(M,{success:!0,message:`Market ID ready: ${X}`,data:{marketId:X},timestamp:Date.now()}),P(M,{success:!0,message:`Proceeding with market: ${K}`,timestamp:Date.now()})}const xe=X||O||n;if(xe){P(M,{success:!0,message:`Testing getOrderbook(${xe}, true)...`,timestamp:Date.now()});try{const K=await g.current.getOrderbook(xe,!0);P(M,{success:K&&(K.bids||K.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} with decimal conversion",data:{bids:(me=K==null?void 0:K.bids)==null?void 0:me.slice(0,3),asks:(Ie=K==null?void 0:K.asks)==null?void 0:Ie.slice(0,3)},timestamp:Date.now()});const de=await g.current.getOrderbook(xe,!1);P(M,{success:de&&(de.bids||de.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} raw satoshi format",data:{bids:(pe=de==null?void 0:de.bids)==null?void 0:pe.slice(0,2),asks:(_e=de==null?void 0:de.asks)==null?void 0:_e.slice(0,2)},timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} failed",error:K.message,timestamp:Date.now()})}P(M,{success:!0,message:`Testing getTicker(${xe})...`,timestamp:Date.now()});try{const K=await g.current.getTicker(xe);P(M,{success:!!K,message:"getTicker() - GET /market/v1/market/{marketId}/stats",data:K,timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"getTicker() - GET /market/v1/market/{marketId}/stats failed",error:K.message,timestamp:Date.now()})}P(M,{success:!0,message:`Testing getRecentTrades(${xe}, 10)...`,timestamp:Date.now()});try{const K=await g.current.getRecentTrades(xe,10);P(M,{success:Array.isArray(K),message:`getRecentTrades() - GET /clob/v1/trades?market_id={marketId} returned ${Array.isArray(K)?K.length:0} trades`,data:K==null?void 0:K.slice(0,3),timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"getRecentTrades() - GET /clob/v1/trades?market_id={marketId} failed",error:K.message,timestamp:Date.now()})}}else P(M,{success:!1,message:"Skipping market-specific tests: No market ID available",error:"Please ensure markets are loaded and a market is selected",timestamp:Date.now()});P(M,{success:!0,message:"Testing router/v1 endpoints...",timestamp:Date.now()});try{const K=await g.current.getSupportedActions();P(M,{success:Array.isArray(K==null?void 0:K.actions)||(K==null?void 0:K.actions)!==void 0,message:"getSupportedActions() - GET /router/v1/tx/supported-actions",data:K,timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"getSupportedActions() - GET /router/v1/tx/supported-actions failed",error:K.message,timestamp:Date.now()})}try{const K=await g.current.validateAction("clob::submit_order");P(M,{success:(K==null?void 0:K.valid)!==void 0||K!==void 0,message:'validateAction() - GET /router/v1/tx/validate-action ("clob::submit_order")',data:K,timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"validateAction() - GET /router/v1/tx/validate-action failed",error:K.message,timestamp:Date.now()})}try{const K=await g.current.getHealthSummary();P(M,{success:!!K,message:"getHealthSummary() - GET /router/v1/health/summary",data:K,timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"getHealthSummary() - GET /router/v1/health/summary failed",error:K.message,timestamp:Date.now()})}try{const K=await g.current.getHealthDaemons();P(M,{success:!!K,message:"getHealthDaemons() - GET /router/v1/health/daemons",data:K,timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"getHealthDaemons() - GET /router/v1/health/daemons failed",error:K.message,timestamp:Date.now()})}try{const K=await g.current.getHealthOracle();P(M,{success:!!K,message:"getHealthOracle() - GET /router/v1/health/oracle",data:K,timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"getHealthOracle() - GET /router/v1/health/oracle failed",error:K.message,timestamp:Date.now()})}try{const K=await g.current.getServerTime();P(M,{success:!!K&&(K.serverTime!==void 0||K!==void 0),message:"getServerTime() - GET /router/v1/time",data:K,timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"getServerTime() - GET /router/v1/time failed",error:K.message,timestamp:Date.now()})}try{const K=await g.current.getMetricsTPS();P(M,{success:!!K,message:"getMetricsTPS() - GET /router/v1/metrics/tps",data:K,timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"getMetricsTPS() - GET /router/v1/metrics/tps failed",error:K.message,timestamp:Date.now()})}try{const K=await g.current.getMetricsLatency();P(M,{success:!!K,message:"getMetricsLatency() - GET /router/v1/metrics/latency",data:K,timestamp:Date.now()})}catch(K){P(M,{success:!1,message:"getMetricsLatency() - GET /router/v1/metrics/latency failed",error:K.message,timestamp:Date.now()})}}catch(V){P(M,{success:!1,message:"InfoClient test error",error:V.message,timestamp:Date.now()})}},we=async()=>{var pe,_e,V;const M="ExchangeClient";if(!E){P(M,{success:!1,message:"Mnemonic required for ExchangeClient tests",error:"No mnemonic provided",timestamp:Date.now()});return}let ce=n||O||y.current||"";if(!ce||ce.trim()===""){if(w.current&&w.current.length>0){const ne=w.current.find(H=>H.active||H.status==="active")??w.current[0];ne&&(ce=ne.market_id??((pe=ne.id)==null?void 0:pe.toString())??"",y.current=ce,P(M,{success:!0,message:`Market ID not in state, using from fetched markets ref: ${ce.substring(0,16)}...`,data:{source:"fetchedMarketsRef",marketId:ce,market:{moniker:ne.moniker,symbol:ne.symbol,active:ne.active}},timestamp:Date.now()}))}else if(k&&k.length>0){const ne=k.find(H=>H.active||H.status==="active")??k[0];ne&&(ce=ne.market_id??((_e=ne.id)==null?void 0:_e.toString())??"",P(M,{success:!0,message:`Market ID not in state, using from markets state: ${ce.substring(0,16)}...`,data:{source:"markets state",marketId:ce,market:{moniker:ne.moniker,symbol:ne.symbol,active:ne.active}},timestamp:Date.now()}))}}if(!ce||ce.trim()===""){P(M,{success:!1,message:"Market ID required from page or loaded markets",error:`Please enter or select a market ID in the configuration section, or ensure markets are loaded first. Debug: marketId="${n||"(empty)"}", effectiveMarketId="${O||"(empty)"}", fetchedMarketIdRef="${y.current||"(empty)"}", fetchedMarketsRef.length=${w.current.length}, markets.length=${k.length}`,data:{marketId:n||"(empty)",effectiveMarketId:O||"(empty)",defaultMarketId:G||"(empty)",fetchedMarketIdRef:y.current||"(empty)",fetchedMarketsRefCount:w.current.length,marketsCount:k.length,marketsAvailable:k.length>0||w.current.length>0},timestamp:Date.now()});return}const me=T||"";if(!me||me.trim()===""){P(M,{success:!1,message:"Wallet address required from page",error:"Wallet address should be generated from mnemonic or entered manually. Please ensure mnemonic is valid.",timestamp:Date.now()});return}const Ie=n?"page state (marketId)":O?"page state (effectiveMarketId)":"loaded markets array";P(M,{success:!0,message:`Using market ID from ${Ie}: ${ce.substring(0,16)}...`,data:{marketId:ce,source:Ie},timestamp:Date.now()}),P(M,{success:!0,message:`Using wallet address from page: ${me.substring(0,10)}...`,data:{walletAddress:me},timestamp:Date.now()}),(r||o)&&P(M,{success:!0,message:`Using signing tokens: ${r?"Session Token":""} ${o?"Auth Token":""}`,data:{hasSessionToken:!!r,hasAuthToken:!!o},timestamp:Date.now()}),v.current=new wl({baseURL:b.current,mnemonic:L.current});try{P(M,{success:!0,message:"Initializing ExchangeClient...",timestamp:Date.now()}),await v.current.initialize();const ne=v.current.getWalletAddress();if(ne.toLowerCase()!==me.toLowerCase()){P(M,{success:!1,message:"Wallet address mismatch",error:`ExchangeClient wallet (${ne}) does not match page wallet (${me})`,timestamp:Date.now()});return}P(M,{success:!0,message:`ExchangeClient initialized successfully (Wallet: ${ne.substring(0,10)}...)`,data:{walletAddress:ne,marketId:ce,verified:!0},timestamp:Date.now()});const H=ce;P(M,{success:!0,message:`Using market ID as string: ${H}`,data:{marketId:H},timestamp:Date.now()});let X=null;P(M,{success:!0,message:"Testing placeOrder with validation for btc-usdc-perp market...",timestamp:Date.now()});let xe=[];try{g.current||(g.current=new pn({baseURL:b.current})),r&&g.current&&g.current.setSessionToken(r);const be=await g.current.getBuckets(ne);xe=Array.isArray(be)?be:[],P(M,{success:!0,message:`Fetched ${xe.length} bucket(s) for order test`,timestamp:Date.now()})}catch(be){P(M,{success:!1,message:"Failed to fetch buckets for order test",error:be.message,timestamp:Date.now()})}let K=null;try{const oe=(w.current.length>0?w.current:k).find(re=>{const he=(re.moniker||"").toLowerCase(),Ce=(re.symbol||"").toLowerCase();return he.includes("btc-usdc-perp")||he.includes("btcusdcperp")||Ce.includes("btc-usdc-perp")||Ce.includes("btcusdcperp")||re.baseAsset&&re.quoteAsset&&re.baseAsset.toLowerCase()==="btc"&&re.quoteAsset.toLowerCase()==="usdc"});oe?(K=oe.market_id||((V=oe.id)==null?void 0:V.toString())||null,P(M,{success:!!K,message:`Found btc-usdc-perp market: ${K==null?void 0:K.substring(0,16)}...`,data:{marketId:K,moniker:oe.moniker,symbol:oe.symbol},timestamp:Date.now()})):P(M,{success:!1,message:"btc-usdc-perp market not found in available markets",error:"Please ensure btc-usdc-perp market is available",timestamp:Date.now()})}catch(be){P(M,{success:!1,message:"Failed to find btc-usdc-perp market",error:be.message,timestamp:Date.now()})}if(K)try{let be=null;if(xe.length>0){const oe=xe[0];be=oe.bucket_id||oe.id||oe.bucketId||null}if(!be)P(M,{success:!1,message:"Default bucket not available for balance validation",error:"No buckets found",timestamp:Date.now()});else{P(M,{success:!0,message:"Step 1: Loading default bucket balance and checking available margin...",timestamp:Date.now()});const oe=1.01,re=100,he=10500,Ce=ct(re.toString()),Me=oe*he/re;let Fe=0,He=0,Oe=0,Ae=0;try{if(!g.current)throw new Error("InfoClient not initialized");const ae=await g.current.getBucket(be);Oe=ve(ae.available_margin||"0"),He=ve(ae.dedicated_margin||"0"),Ae=ve(ae.total_equity||"0"),Fe=Oe,P(M,{success:!0,message:"Step 1: Default bucket balance loaded",data:{availableMargin:Oe.toFixed(2),dedicatedMargin:He.toFixed(2),totalEquity:Ae.toFixed(2),requiredMargin:Me.toFixed(2),raw:ae},timestamp:Date.now()}),P(M,{success:!0,message:`Step 1: Validating sufficient available margin (required: ${Me.toFixed(2)} USDC, available: ${Oe.toFixed(2)} USDC)...`,timestamp:Date.now()});const ge=Oe>=Me;if(P(M,{success:ge,message:`Step 1: Margin validation ${ge?"PASSED":"FAILED"}`,data:{availableMargin:Oe.toFixed(2),requiredMargin:Me.toFixed(2),marginDifference:(Oe-Me).toFixed(2),hasSufficientMargin:ge,orderQuantity:`${oe.toFixed(2)} BTC`,orderPrice:`${he.toFixed(2)} USDC/BTC`,orderLeverage:re.toFixed(2),calculation:`(${oe.toFixed(2)} BTC * ${he.toFixed(2)} USDC/BTC) / ${re.toFixed(2)} = ${Me.toFixed(2)} USDC`},timestamp:Date.now()}),!ge)throw P(M,{success:!1,message:`Step 1: Insufficient available margin. Required: ${Me.toFixed(2)} USDC, Available: ${Oe.toFixed(2)} USDC`,error:`Available margin (${Oe.toFixed(2)} USDC) is less than required margin (${Me.toFixed(2)} USDC)`,data:{availableMargin:Oe.toFixed(2),requiredMargin:Me.toFixed(2),shortfall:(Me-Oe).toFixed(2)},timestamp:Date.now()}),new Error(`Insufficient available margin: ${Oe.toFixed(2)} USDC available, ${Me.toFixed(2)} USDC required`);P(M,{success:!0,message:"Step 1: Sufficient margin available. Proceeding to place order...",data:{availableMargin:Oe.toFixed(2),requiredMargin:Me.toFixed(2),marginRemaining:(Oe-Me).toFixed(2)},timestamp:Date.now()})}catch(ae){throw P(M,{success:!1,message:"Step 1: Failed to load or validate bucket balance",error:ae.message,timestamp:Date.now()}),ae}P(M,{success:!0,message:`Step 2: Preparing to place order - Quantity: ${oe.toFixed(2)} BTC, Leverage: ${re}x, Price: ${he.toFixed(2)} USDC/BTC...`,timestamp:Date.now()}),P(M,{success:!0,message:"Step 2.1: Re-checking default bucket available margin before placing order...",timestamp:Date.now()});let ke=0;try{if(!g.current)throw new Error("InfoClient not initialized");const ae=await g.current.getBucket(be);ke=ve(ae.available_margin||"0"),P(M,{success:!0,message:`Step 2.1: Current available margin: ${ke.toFixed(2)} USDC`,data:{currentAvailableMargin:ke.toFixed(2),requiredMargin:Me.toFixed(2),previousAvailableMargin:Oe.toFixed(2),raw:ae},timestamp:Date.now()});const ge=ke>=Me;if(P(M,{success:ge,message:`Step 2.1: Margin check ${ge?"PASSED":"FAILED"}`,data:{currentAvailableMargin:ke.toFixed(2),requiredMargin:Me.toFixed(2),marginDifference:(ke-Me).toFixed(2),stillHasSufficientMargin:ge},timestamp:Date.now()}),!ge)throw P(M,{success:!1,message:`Step 2.1: Insufficient available margin. Required: ${Me.toFixed(2)} USDC, Available: ${ke.toFixed(2)} USDC`,error:`Available margin (${ke.toFixed(2)} USDC) is less than required margin (${Me.toFixed(2)} USDC)`,data:{currentAvailableMargin:ke.toFixed(2),requiredMargin:Me.toFixed(2),shortfall:(Me-ke).toFixed(2)},timestamp:Date.now()}),new Error(`Insufficient available margin: ${ke.toFixed(2)} USDC available, ${Me.toFixed(2)} USDC required`);P(M,{success:!0,message:"Step 2.1: Sufficient margin confirmed. Proceeding with order placement...",data:{currentAvailableMargin:ke.toFixed(2),requiredMargin:Me.toFixed(2),marginRemaining:(ke-Me).toFixed(2)},timestamp:Date.now()})}catch(ae){throw P(M,{success:!1,message:"Step 2.1: Failed to validate available margin before order placement",error:ae.message,timestamp:Date.now()}),ae}P(M,{success:!0,message:`Step 2.2: Placing order - Quantity: ${oe.toFixed(2)} BTC, Leverage: ${re}x, Price: ${he.toFixed(2)} USDC/BTC...`,timestamp:Date.now()});let Ge=null,Be=null;const ee={marketId:K,side:"buy",orderType:"LIMIT",price:he,quantity:oe,timeInForce:"GTC",leverage:Ce},U={maxRetries:10,baseDelay:500,maxDelay:2e3,jitter:!0,multiplier:1.5};let z=0;try{Ge=await u0(U,async()=>{if(z++,z>1&&P(M,{success:!0,message:`Step 2.2: Retrying order placement (attempt ${z}/${U.maxRetries+1})...`,data:{attemptCount:z},timestamp:Date.now()}),!v.current)throw new Error("ExchangeClient not initialized");const ae=await v.current.placeOrder(ee),ge=(ae==null?void 0:ae.order_id)||null;if(!ae||!ge)throw new Error("Order placed but order_id not found in response");return ae},async ae=>{if(pb(ae)){P(M,{success:!1,message:`Step 2.2: Nonce error detected (attempt ${z}/${U.maxRetries+1}): ${(ae==null?void 0:ae.message)||String(ae)}`,data:{error:(ae==null?void 0:ae.message)||String(ae),errorType:"nonce error",attemptCount:z,willRetry:z<=U.maxRetries},timestamp:Date.now()});try{if(!v.current)throw new Error("ExchangeClient not initialized");await v.current.refreshNonceFromServer(),P(M,{success:!0,message:"Step 2.2: Refreshed nonce from server, will retry...",timestamp:Date.now()})}catch(qe){P(M,{success:!1,message:"Step 2.2: Failed to refresh nonce from server",error:(qe==null?void 0:qe.message)||String(qe),timestamp:Date.now()})}return!0}return P(M,{success:!1,message:"Step 2.2: Failed to place order (non-retryable error)",error:(ae==null?void 0:ae.message)||String(ae),data:{error:(ae==null?void 0:ae.message)||String(ae),isNonceError:!1},timestamp:Date.now()}),!1}),Be=(Ge==null?void 0:Ge.order_id)||null,P(M,{success:!!Ge&&!!Be,message:`Step 2.2: Order placed successfully${z>1?` (after ${z-1} retry${z>2?"ies":""})`:""}. Order ID: ${Be==null?void 0:Be.substring(0,16)}...`,data:{orderResult:Ge,orderId:Be,requestBody:ee,attemptCount:z},timestamp:Date.now()})}catch(ae){throw P(M,{success:!1,message:`Step 2.2: Failed to place order after ${z} attempt${z>1?"s":""}`,error:(ae==null?void 0:ae.message)||String(ae),data:{error:(ae==null?void 0:ae.message)||String(ae),attemptCount:z,maxRetriesReached:z>U.maxRetries},timestamp:Date.now()}),ae}if(!Ge||!Be)throw new Error(`Failed to place order after ${z} attempts`);if(await new Promise(ae=>setTimeout(ae,1500)),Be){P(M,{success:!0,message:"Step 3: Validating pending order details...",timestamp:Date.now()});try{if(!g.current)throw new Error("InfoClient not initialized");const ae=await g.current.getOrder(Be);if(ae){const ge=ve(ae.price||"0"),qe=ve(ae.quantity||"0"),Re=ve(ae.leverage||"0"),Ue=ae.side||"",tt=ae.market_id||"",Qe=Math.abs(ge-he)<.01,St=Math.abs(qe-oe)<.01,rt=Math.abs(Re-re)<.01,Rt=tt===K,Ls=Ue.toUpperCase().includes("BUY")||Ue==="buy";P(M,{success:Qe&&St&&rt&&Rt&&Ls,message:`Step 3: Order validation ${Qe&&St&&rt&&Rt&&Ls?"PASSED":"FAILED"}`,data:{orderId:Be,expectedPrice:he.toFixed(2),actualPrice:ge.toFixed(2),priceValid:Qe,expectedQuantity:`${oe.toFixed(2)} BTC`,actualQuantity:`${qe.toFixed(2)} BTC`,quantityValid:St,expectedLeverage:re.toFixed(2),actualLeverage:Re.toFixed(2),leverageValid:rt,expectedMarketId:K,actualMarketId:tt,marketIdValid:Rt,expectedSide:"buy",actualSide:Ue,sideValid:Ls,orderStatus:ae.status,rawOrder:ae},timestamp:Date.now()}),Qe||P(M,{success:!1,message:`Order price mismatch: Expected ${he.toFixed(2)}, got ${ge.toFixed(2)}`,timestamp:Date.now()}),St||P(M,{success:!1,message:`Order quantity mismatch: Expected ${oe.toFixed(2)} BTC, got ${qe.toFixed(2)} BTC`,timestamp:Date.now()}),rt||P(M,{success:!1,message:`Order leverage mismatch: Expected ${re.toFixed(2)}, got ${Re.toFixed(2)}`,timestamp:Date.now()}),Rt||P(M,{success:!1,message:`Order market ID mismatch: Expected ${K}, got ${tt}`,timestamp:Date.now()}),Ls||P(M,{success:!1,message:`Order side mismatch: Expected buy, got ${Ue}`,timestamp:Date.now()})}else P(M,{success:!1,message:"Step 3: Failed to retrieve pending order",error:"Order not found",timestamp:Date.now()})}catch(ae){P(M,{success:!1,message:"Step 3: Failed to validate pending order",error:ae.message,timestamp:Date.now()})}}P(M,{success:!0,message:"Step 4: Loading default bucket USDC balance after placing order...",timestamp:Date.now()});let ye=0;try{if(!g.current)throw new Error("InfoClient not initialized");const ae=await g.current.getBucket(be);ye=ve(ae.available_margin||"0"),P(M,{success:!0,message:`Step 4: Default bucket USDC balance after: ${ye.toFixed(2)} USDC`,data:{balance:ye,raw:ae},timestamp:Date.now()})}catch(ae){throw P(M,{success:!1,message:"Step 4: Failed to load bucket balance after order",error:ae.message,timestamp:Date.now()}),ae}P(M,{success:!0,message:"Step 5: Validating bucket balance change...",timestamp:Date.now()});const st=ke-ye,$e=Me,vt=Math.abs(st-$e)<.01;P(M,{success:vt,message:`Step 5: Bucket balance validation ${vt?"PASSED":"FAILED"}`,data:{availableMarginBeforeOrder:ke.toFixed(2),availableMarginAfterOrder:ye.toFixed(2),marginReserved:st.toFixed(2),expectedMarginReserved:$e.toFixed(2),marginReservedValid:vt,orderQuantity:`${oe.toFixed(2)} BTC`,orderPrice:`${he.toFixed(2)} USDC/BTC`,orderLeverage:re.toFixed(2),calculation:`(${oe.toFixed(2)} BTC * ${he.toFixed(2)} USDC/BTC) / ${re.toFixed(2)} = ${$e.toFixed(2)} USDC`,note:"Using available margin from Step 2.1 as baseline (most recent before order placement)"},timestamp:Date.now()}),vt||P(M,{success:!1,message:`Bucket balance change mismatch: Expected margin reserved ${$e.toFixed(2)} USDC, actual change ${st.toFixed(2)} USDC`,error:`Expected available margin to decrease by ${$e.toFixed(2)} USDC, but decreased by ${st.toFixed(2)} USDC`,timestamp:Date.now()}),P(M,{success:vt,message:`Place order validation test ${vt?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{orderId:Be,marketId:K,orderQuantity:`${oe.toFixed(2)} BTC`,orderLeverage:`${re}x`,orderPrice:`${he.toFixed(2)} USDC`,availableMarginBeforeOrder:`${ke.toFixed(2)} USDC`,availableMarginAfterOrder:`${ye.toFixed(2)} USDC`,marginReserved:`${st.toFixed(2)} USDC`,expectedMarginReserved:`${$e.toFixed(2)} USDC`,validationPassed:vt},timestamp:Date.now()})}}catch(be){P(M,{success:!1,message:"Place order validation test failed",error:be.message,timestamp:Date.now()})}if(ce){const oe=ct("1"),re={marketId:H,side:"buy",orderType:"LIMIT",price:40010.8778,quantity:.01,timeInForce:"GTC",leverage:oe};P(M,{success:!0,message:`Testing placeOrder() (submit order) for market ${ce}...`,data:{requestBody:re,endpoint:"POST /clob/v1/order",note:"Price and quantity are decimal numbers, converted to satoshi strings in buildOrderPayload(). Leverage is already in satoshi format.",leverage:{decimal:1,satoshi:oe}},timestamp:Date.now()});try{const he=await v.current.placeOrder(re);he?(X=he.order_id||he.orderId||he.id||null,X?P(M,{success:!0,message:`placeOrder() - POST /clob/v1/order executed successfully. Order ID: ${X.substring(0,16)}...`,data:{orderResult:he,orderId:X,requestBody:re,endpoint:"POST /clob/v1/order"},timestamp:Date.now()}):P(M,{success:!0,message:"placeOrder() - POST /clob/v1/order executed successfully (orderId not found in response)",data:{orderResult:he,requestBody:re,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})):P(M,{success:!1,message:"placeOrder() - POST /clob/v1/order returned empty response",data:{requestBody:re,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}catch(he){P(M,{success:!1,message:"placeOrder() - POST /clob/v1/order failed",error:he.message,data:{requestBody:re,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}}else P(M,{success:!0,message:"Skipping placeOrder() test: No market ID available",timestamp:Date.now()});if(ce&&X){P(M,{success:!0,message:`Testing cancelOrder() for order ${X.substring(0,16)}...`,timestamp:Date.now()});try{const be=await v.current.cancelOrder({orderId:X,marketId:H});P(M,{success:!!be,message:"cancelOrder() - POST /router/v1/tx executed successfully",data:be,timestamp:Date.now()})}catch(be){P(M,{success:!1,message:"cancelOrder() - POST /router/v1/tx failed",error:be.message,timestamp:Date.now()})}}else ce?X||P(M,{success:!0,message:"Skipping cancelOrder() test: No order ID available (placeOrder may have failed or orderId not in response)",timestamp:Date.now()}):P(M,{success:!0,message:"Skipping cancelOrder() test: No market ID available",timestamp:Date.now()});if(ce){P(M,{success:!0,message:`Testing closePosition() for market ${ce}...`,timestamp:Date.now()});try{const be=await v.current.closePosition({marketId:H});P(M,{success:!!be,message:"closePosition() - POST /router/v1/tx executed successfully",data:be,timestamp:Date.now()})}catch(be){P(M,{success:!1,message:"closePosition() - POST /router/v1/tx failed (may not have open position)",error:be.message,timestamp:Date.now()})}}else P(M,{success:!0,message:"Skipping closePosition() test: No market ID available",timestamp:Date.now()});P(M,{success:!0,message:"Fetching buckets for bucket operation tests...",timestamp:Date.now()});let de=[];try{g.current||(g.current=new pn({baseURL:b.current})),r&&g.current&&g.current.setSessionToken(r);const be=await g.current.getBuckets(ne);de=Array.isArray(be)?be:[],P(M,{success:!0,message:`Found ${de.length} bucket(s) for testing`,data:{bucketCount:de.length,buckets:de.slice(0,3).map(oe=>({bucketId:oe.bucket_id||oe.id||oe.bucketId,availableMargin:oe.available_margin||oe.availableMargin}))},timestamp:Date.now()})}catch(be){P(M,{success:!1,message:"Failed to fetch buckets for testing",error:be.message,timestamp:Date.now()})}if(de.length>0){const be=de[0],oe=be.bucket_id||be.id||be.bucketId;if(oe){P(M,{success:!0,message:"Testing extractToBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const re=await v.current.extractToBucket({bucketId:oe,assetId:"USDC",amount:"100000000"});P(M,{success:!!re,message:"extractToBucket() - POST /bank/v1/extract-to-bucket executed successfully",data:re,timestamp:Date.now()})}catch(re){P(M,{success:!1,message:"extractToBucket() - POST /bank/v1/extract-to-bucket failed",error:re.message,timestamp:Date.now()})}}else P(M,{success:!0,message:"Skipping extractToBucket() test: No valid bucket ID found",timestamp:Date.now()})}else P(M,{success:!0,message:"Skipping extractToBucket() test: No buckets available",timestamp:Date.now()});if(de.length>0){const be=de[0],oe=be.bucket_id||be.id||be.bucketId;if(oe){P(M,{success:!0,message:"Testing bucket to spot wallet transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{P(M,{success:!0,message:"Step 1: Loading bucket USDC balance before transfer...",timestamp:Date.now()});let re=0;try{const U=await g.current.getBucket(oe);re=ve(U.available_margin||"0"),P(M,{success:!0,message:`Step 1: Bucket USDC balance before: ${re.toFixed(2)} USDC`,data:{balance:re,raw:U},timestamp:Date.now()})}catch(U){throw P(M,{success:!1,message:"Step 1: Failed to load bucket balance",error:U.message,timestamp:Date.now()}),U}P(M,{success:!0,message:"Step 2: Loading spot wallet USDC balance before transfer...",timestamp:Date.now()});let he=0;try{const U=await g.current.getBalanceDecimal(ne,"USDC");he=ve(U.available_balance||"0"),P(M,{success:!0,message:`Step 2: Spot wallet USDC balance before: ${he.toFixed(2)} USDC`,data:{balance:he,raw:U},timestamp:Date.now()})}catch(U){throw P(M,{success:!1,message:"Step 2: Failed to load spot wallet balance",error:U.message,timestamp:Date.now()}),U}const Ce=10,Me=ct(Ce.toString());P(M,{success:!0,message:`Step 3: Transferring ${Ce.toFixed(2)} USDC (${Me} satoshi) from bucket to spot wallet...`,timestamp:Date.now()});try{const U=await v.current.withdrawFromBucket({bucketId:oe,assetId:"USDC",amount:Me});P(M,{success:!!U,message:"Step 3: Transfer executed successfully",data:U,timestamp:Date.now()})}catch(U){throw P(M,{success:!1,message:"Step 3: Transfer failed",error:U.message,timestamp:Date.now()}),U}await new Promise(U=>setTimeout(U,1e3)),P(M,{success:!0,message:"Step 4: Loading bucket USDC balance after transfer...",timestamp:Date.now()});let Fe=0;try{const U=await g.current.getBucket(oe);Fe=ve(U.available_margin||"0"),P(M,{success:!0,message:`Step 4: Bucket USDC balance after: ${Fe.toFixed(2)} USDC`,data:{balance:Fe,raw:U},timestamp:Date.now()})}catch(U){throw P(M,{success:!1,message:"Step 4: Failed to load bucket balance after transfer",error:U.message,timestamp:Date.now()}),U}P(M,{success:!0,message:"Step 5: Loading spot wallet USDC balance after transfer...",timestamp:Date.now()});let He=0;try{const U=await g.current.getBalanceDecimal(ne,"USDC");He=ve(U.available_balance||"0"),P(M,{success:!0,message:`Step 5: Spot wallet USDC balance after: ${He.toFixed(2)} USDC`,data:{balance:He,raw:U},timestamp:Date.now()})}catch(U){throw P(M,{success:!1,message:"Step 5: Failed to load spot wallet balance after transfer",error:U.message,timestamp:Date.now()}),U}P(M,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Oe=re-Fe,Ae=He-he,ke=Ce,Ge=Ce,Be=Math.abs(Oe-ke)<.01,ee=Math.abs(Ae-Ge)<.01;P(M,{success:Be&&ee,message:`Step 6: Validation ${Be&&ee?"PASSED":"FAILED"}`,data:{bucketBalanceBefore:re.toFixed(2),bucketBalanceAfter:Fe.toFixed(2),bucketBalanceDecrease:Oe.toFixed(2),expectedBucketDecrease:ke.toFixed(2),bucketDecreaseValid:Be,walletBalanceBefore:he.toFixed(2),walletBalanceAfter:He.toFixed(2),walletBalanceIncrease:Ae.toFixed(2),expectedWalletIncrease:Ge.toFixed(2),walletIncreaseValid:ee,transferAmount:Ce.toFixed(2)},timestamp:Date.now()}),Be||P(M,{success:!1,message:`Validation failed: Bucket balance decrease (${Oe.toFixed(2)}) does not match expected (${ke.toFixed(2)})`,error:`Expected bucket to decrease by ${ke.toFixed(2)} USDC, but decreased by ${Oe.toFixed(2)} USDC`,timestamp:Date.now()}),ee||P(M,{success:!1,message:`Validation failed: Wallet balance increase (${Ae.toFixed(2)}) does not match expected (${Ge.toFixed(2)})`,error:`Expected wallet to increase by ${Ge.toFixed(2)} USDC, but increased by ${Ae.toFixed(2)} USDC`,timestamp:Date.now()}),P(M,{success:Be&&ee,message:`Bucket to spot wallet transfer test ${Be&&ee?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Ce.toFixed(2)} USDC`,bucketBalanceBefore:`${re.toFixed(2)} USDC`,bucketBalanceAfter:`${Fe.toFixed(2)} USDC`,bucketBalanceChange:`${Oe.toFixed(2)} USDC`,walletBalanceBefore:`${he.toFixed(2)} USDC`,walletBalanceAfter:`${He.toFixed(2)} USDC`,walletBalanceChange:`${Ae.toFixed(2)} USDC`,validationPassed:Be&&ee},timestamp:Date.now()})}catch(re){P(M,{success:!1,message:"Bucket to spot wallet transfer test failed",error:re.message,timestamp:Date.now()})}}else P(M,{success:!0,message:"Skipping bucket to spot wallet transfer test: No valid bucket ID found",timestamp:Date.now()})}else P(M,{success:!0,message:"Skipping bucket to spot wallet transfer test: No buckets available",timestamp:Date.now()});if(de.length>=2){const be=de[0],oe=de[1],re=be.bucket_id||be.id||be.bucketId,he=oe.bucket_id||oe.id||oe.bucketId;if(re&&he){P(M,{success:!0,message:"Testing bucket to bucket transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{P(M,{success:!0,message:"Step 1: Loading source bucket USDC balance before transfer...",timestamp:Date.now()});let Ce=0;try{const ye=await g.current.getBucket(re);Ce=ve(ye.available_margin||"0"),P(M,{success:!0,message:`Step 1: Source bucket USDC balance before: ${Ce.toFixed(2)} USDC`,data:{balance:Ce,raw:ye},timestamp:Date.now()})}catch(ye){throw P(M,{success:!1,message:"Step 1: Failed to load source bucket balance",error:ye.message,timestamp:Date.now()}),ye}P(M,{success:!0,message:"Step 2: Loading target bucket USDC balance before transfer...",timestamp:Date.now()});let Me=0;try{const ye=await g.current.getBucket(he);Me=ve(ye.available_margin||"0"),P(M,{success:!0,message:`Step 2: Target bucket USDC balance before: ${Me.toFixed(2)} USDC`,data:{balance:Me,raw:ye},timestamp:Date.now()})}catch(ye){throw P(M,{success:!1,message:"Step 2: Failed to load target bucket balance",error:ye.message,timestamp:Date.now()}),ye}const Fe=10,He=ct(Fe.toString());P(M,{success:!0,message:`Step 3: Transferring ${Fe.toFixed(2)} USDC (${He} satoshi) from source bucket to target bucket...`,timestamp:Date.now()});try{const ye=await v.current.bucketTransfer({fromBucketId:re,toBucketId:he,assetId:"USDC",amount:He});P(M,{success:!!ye,message:"Step 3: Transfer executed successfully",data:ye,timestamp:Date.now()})}catch(ye){throw P(M,{success:!1,message:"Step 3: Transfer failed",error:ye.message,timestamp:Date.now()}),ye}await new Promise(ye=>setTimeout(ye,1e3)),P(M,{success:!0,message:"Step 4: Loading source bucket USDC balance after transfer...",timestamp:Date.now()});let Oe=0;try{const ye=await g.current.getBucket(re);Oe=ve(ye.available_margin||"0"),P(M,{success:!0,message:`Step 4: Source bucket USDC balance after: ${Oe.toFixed(2)} USDC`,data:{balance:Oe,raw:ye},timestamp:Date.now()})}catch(ye){throw P(M,{success:!1,message:"Step 4: Failed to load source bucket balance after transfer",error:ye.message,timestamp:Date.now()}),ye}P(M,{success:!0,message:"Step 5: Loading target bucket USDC balance after transfer...",timestamp:Date.now()});let Ae=0;try{const ye=await g.current.getBucket(he);Ae=ve(ye.available_margin||"0"),P(M,{success:!0,message:`Step 5: Target bucket USDC balance after: ${Ae.toFixed(2)} USDC`,data:{balance:Ae,raw:ye},timestamp:Date.now()})}catch(ye){throw P(M,{success:!1,message:"Step 5: Failed to load target bucket balance after transfer",error:ye.message,timestamp:Date.now()}),ye}P(M,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const ke=Ce-Oe,Ge=Ae-Me,Be=Fe,ee=Fe,U=Math.abs(ke-Be)<.01,z=Math.abs(Ge-ee)<.01;P(M,{success:U&&z,message:`Step 6: Validation ${U&&z?"PASSED":"FAILED"}`,data:{sourceBucketBalanceBefore:Ce.toFixed(2),sourceBucketBalanceAfter:Oe.toFixed(2),sourceBucketBalanceDecrease:ke.toFixed(2),expectedSourceDecrease:Be.toFixed(2),sourceDecreaseValid:U,targetBucketBalanceBefore:Me.toFixed(2),targetBucketBalanceAfter:Ae.toFixed(2),targetBucketBalanceIncrease:Ge.toFixed(2),expectedTargetIncrease:ee.toFixed(2),targetIncreaseValid:z,transferAmount:Fe.toFixed(2)},timestamp:Date.now()}),U||P(M,{success:!1,message:`Validation failed: Source bucket balance decrease (${ke.toFixed(2)}) does not match expected (${Be.toFixed(2)})`,error:`Expected source bucket to decrease by ${Be.toFixed(2)} USDC, but decreased by ${ke.toFixed(2)} USDC`,timestamp:Date.now()}),z||P(M,{success:!1,message:`Validation failed: Target bucket balance increase (${Ge.toFixed(2)}) does not match expected (${ee.toFixed(2)})`,error:`Expected target bucket to increase by ${ee.toFixed(2)} USDC, but increased by ${Ge.toFixed(2)} USDC`,timestamp:Date.now()}),P(M,{success:U&&z,message:`Bucket to bucket transfer test ${U&&z?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Fe.toFixed(2)} USDC`,sourceBucketBalanceBefore:`${Ce.toFixed(2)} USDC`,sourceBucketBalanceAfter:`${Oe.toFixed(2)} USDC`,sourceBucketBalanceChange:`${ke.toFixed(2)} USDC`,targetBucketBalanceBefore:`${Me.toFixed(2)} USDC`,targetBucketBalanceAfter:`${Ae.toFixed(2)} USDC`,targetBucketBalanceChange:`${Ge.toFixed(2)} USDC`,validationPassed:U&&z},timestamp:Date.now()})}catch(Ce){P(M,{success:!1,message:"Bucket to bucket transfer test failed",error:Ce.message,timestamp:Date.now()})}}else P(M,{success:!0,message:"Skipping bucket to bucket transfer test: Invalid bucket IDs",timestamp:Date.now()})}else P(M,{success:!0,message:"Skipping bucket to bucket transfer test: Need at least 2 buckets (found "+de.length+")",timestamp:Date.now()});if(de.length>0){const be=de[0],oe=be.bucket_id||be.id||be.bucketId;if(oe){P(M,{success:!0,message:"Testing spot wallet to bucket default transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{P(M,{success:!0,message:"Step 1: Loading spot wallet USDC balance before transfer...",timestamp:Date.now()});let re=0;try{const U=await g.current.getBalanceDecimal(ne,"USDC");re=ve(U.available_balance||"0"),P(M,{success:!0,message:`Step 1: Spot wallet USDC balance before: ${re.toFixed(2)} USDC`,data:{balance:re,raw:U},timestamp:Date.now()})}catch(U){throw P(M,{success:!1,message:"Step 1: Failed to load spot wallet balance",error:U.message,timestamp:Date.now()}),U}P(M,{success:!0,message:"Step 2: Loading default bucket USDC balance before transfer...",timestamp:Date.now()});let he=0;try{const U=await g.current.getBucket(oe);he=ve(U.available_margin||"0"),P(M,{success:!0,message:`Step 2: Default bucket USDC balance before: ${he.toFixed(2)} USDC`,data:{balance:he,raw:U},timestamp:Date.now()})}catch(U){throw P(M,{success:!1,message:"Step 2: Failed to load bucket balance",error:U.message,timestamp:Date.now()}),U}const Ce=10,Me=ct(Ce.toString());P(M,{success:!0,message:`Step 3: Transferring ${Ce.toFixed(2)} USDC (${Me} satoshi) from spot wallet to default bucket...`,timestamp:Date.now()});try{const U=await v.current.extractToBucket({bucketId:oe,assetId:"USDC",amount:Me});P(M,{success:!!U,message:"Step 3: Transfer executed successfully",data:U,timestamp:Date.now()})}catch(U){throw P(M,{success:!1,message:"Step 3: Transfer failed",error:U.message,timestamp:Date.now()}),U}await new Promise(U=>setTimeout(U,1e3)),P(M,{success:!0,message:"Step 4: Loading spot wallet USDC balance after transfer...",timestamp:Date.now()});let Fe=0;try{const U=await g.current.getBalanceDecimal(ne,"USDC");Fe=ve(U.available_balance||"0"),P(M,{success:!0,message:`Step 4: Spot wallet USDC balance after: ${Fe.toFixed(2)} USDC`,data:{balance:Fe,raw:U},timestamp:Date.now()})}catch(U){throw P(M,{success:!1,message:"Step 4: Failed to load spot wallet balance after transfer",error:U.message,timestamp:Date.now()}),U}P(M,{success:!0,message:"Step 5: Loading default bucket USDC balance after transfer...",timestamp:Date.now()});let He=0;try{const U=await g.current.getBucket(oe);He=ve(U.available_margin||"0"),P(M,{success:!0,message:`Step 5: Default bucket USDC balance after: ${He.toFixed(2)} USDC`,data:{balance:He,raw:U},timestamp:Date.now()})}catch(U){throw P(M,{success:!1,message:"Step 5: Failed to load bucket balance after transfer",error:U.message,timestamp:Date.now()}),U}P(M,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Oe=re-Fe,Ae=He-he,ke=Ce,Ge=Ce,Be=Math.abs(Oe-ke)<.01,ee=Math.abs(Ae-Ge)<.01;P(M,{success:Be&&ee,message:`Step 6: Validation ${Be&&ee?"PASSED":"FAILED"}`,data:{walletBalanceBefore:re.toFixed(2),walletBalanceAfter:Fe.toFixed(2),walletBalanceDecrease:Oe.toFixed(2),expectedWalletDecrease:ke.toFixed(2),walletDecreaseValid:Be,bucketBalanceBefore:he.toFixed(2),bucketBalanceAfter:He.toFixed(2),bucketBalanceIncrease:Ae.toFixed(2),expectedBucketIncrease:Ge.toFixed(2),bucketIncreaseValid:ee,transferAmount:Ce.toFixed(2)},timestamp:Date.now()}),Be||P(M,{success:!1,message:`Validation failed: Wallet balance decrease (${Oe.toFixed(2)}) does not match expected (${ke.toFixed(2)})`,error:`Expected wallet to decrease by ${ke.toFixed(2)} USDC, but decreased by ${Oe.toFixed(2)} USDC`,timestamp:Date.now()}),ee||P(M,{success:!1,message:`Validation failed: Bucket balance increase (${Ae.toFixed(2)}) does not match expected (${Ge.toFixed(2)})`,error:`Expected bucket to increase by ${Ge.toFixed(2)} USDC, but increased by ${Ae.toFixed(2)} USDC`,timestamp:Date.now()}),P(M,{success:Be&&ee,message:`Spot wallet to bucket transfer test ${Be&&ee?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Ce.toFixed(2)} USDC`,walletBalanceBefore:`${re.toFixed(2)} USDC`,walletBalanceAfter:`${Fe.toFixed(2)} USDC`,walletBalanceChange:`${Oe.toFixed(2)} USDC`,bucketBalanceBefore:`${he.toFixed(2)} USDC`,bucketBalanceAfter:`${He.toFixed(2)} USDC`,bucketBalanceChange:`${Ae.toFixed(2)} USDC`,validationPassed:Be&&ee},timestamp:Date.now()})}catch(re){P(M,{success:!1,message:"Spot wallet to bucket transfer test failed",error:re.message,timestamp:Date.now()})}}else P(M,{success:!0,message:"Skipping spot wallet to bucket transfer test: No valid default bucket ID found",timestamp:Date.now()})}else P(M,{success:!0,message:"Skipping spot wallet to bucket transfer test: No buckets available",timestamp:Date.now()});P(M,{success:!0,message:"ExchangeClient tests completed",data:{walletAddress:ne,marketId:H,sessionToken:r?"present":"not set",authToken:o?"present":"not set",methodsTested:["placeOrder","cancelOrder","closePosition","extractToBucket","withdrawFromBucket","bucketTransfer"]},timestamp:Date.now()})}catch(ne){P(M,{success:!1,message:"ExchangeClient test error",error:ne.message,timestamp:Date.now()})}},Ye=async()=>{if(!f){p(!0),Z(),Te.info("Running tests",{description:"Starting comprehensive SDK test suite..."});try{Y(),await se(),await q("Authentication"),await J(),E&&await we()}catch(M){P("General",{success:!1,message:"Test suite error",error:M.message,timestamp:Date.now()}),Te.error("Test suite error",{description:M.message||"An unexpected error occurred during testing.",duration:6e3})}finally{p(!1)}}};return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"SDK Test Page"}),h.jsx("p",{children:"Comprehensive test suite for all SDK APIs"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"sdk-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:M=>e(M.target.value),className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:M=>{const ce=M.target.value;ce&&s(ce)},className:"sdk-test-config-select",children:k.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),k.map(M=>{var pe;const ce=M.market_id??((pe=M.market_id)==null?void 0:pe.toString())??"",me=M.moniker?M.moniker:M.symbol?M.symbol:M.baseAsset&&M.quoteAsset?`${M.baseAsset}-${M.quoteAsset}`:`Market ID: ${ce}`,Ie=M.active?" [ACTIVE]":"";return h.jsxs("option",{value:ce,children:[me," - ID: ",ce,Ie]},ce)})]})}),k.length>0&&h.jsx("small",{className:`sdk-test-config-hint ${n===G?"info":"warning"}`,children:n===G?` Auto-selected default market (ID: ${G==null?void 0:G.substring(0,16)}...)`:` Manual selection (ID: ${n==null?void 0:n.substring(0,16)}...)`})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic (for ExchangeClient):",h.jsx("input",{type:"text",value:E||"",onChange:M=>W(M.target.value),placeholder:"Optional",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Session Token (for authenticated InfoClient):",h.jsx("input",{type:"text",value:r,onChange:M=>i(M.target.value),disabled:!!(r&&r.trim()!==""),placeholder:"Optional",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Auth Token:",h.jsx("input",{type:"text",value:o,onChange:M=>a(M.target.value),disabled:!!(D&&D.trim()!==""),placeholder:D?"Auto-filled from onboarding":'Optional - Use "Onboard" button to generate',className:"sdk-test-config-input"}),D&&h.jsx("small",{className:"sdk-test-config-hint success",children:" Auto-filled from onboarding"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:T||"",disabled:!!(E&&E.trim()!==""),onChange:()=>{},placeholder:"automatic (from mnemonic)",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Device ID:",h.jsx("input",{type:"text",value:l,onChange:M=>c(M.target.value),className:"sdk-test-config-input"})]})}),h.jsxs("div",{className:"control-box",children:[h.jsx(fA,{isRunning:f,onClick:Ye}),h.jsx(pA,{mnemonic:E||"",baseURL:t,onboardLoading:C,isRunning:f,onOnboard:(M,ce)=>{M&&M.trim()!==""?N(M,ce):Te.warning("Mnemonic required",{description:"Please enter a mnemonic first to perform onboard."})}}),h.jsx(gA,{isRunning:f,onClick:Z})]})]}),D&&h.jsxs("span",{className:"sdk-test-status success",children:[" Auth Token: ",D.substring(0,20),"..."]}),A&&h.jsxs("span",{className:"sdk-test-status error",children:[" Onboard Error: ",A,h.jsx(mA,{onClick:$})]})]}),h.jsx("div",{className:"sdk-test-results",children:Object.entries(u).map(([M,ce])=>{const me=m.has(M);return h.jsxs("div",{className:"sdk-test-section",children:[h.jsx(bA,{sectionName:M,isExpanded:me,onToggle:()=>Q(M)}),me&&h.jsx("div",{className:"sdk-test-section-content",children:ce.results.map((Ie,pe)=>h.jsx(xA,{result:Ie},pe))})]},M)})}),Object.keys(u).length===0&&!f&&h.jsx("div",{className:"sdk-test-empty-state",children:'Click "Run All Tests" to start testing the SDK APIs'})]})}const wA=({isConnected:t,isConnecting:e,onConnect:n,onDisconnect:s})=>h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:n,disabled:t||e,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:t?"#ccc":e?"#ffc107":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:t||e?"not-allowed":"pointer"},children:e?" Connecting...":t?" Connected":"Connect"}),e&&h.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Connection in progress... Check messages below for details"}),h.jsx("button",{onClick:s,disabled:!t,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:t?"#dc3545":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:t?"pointer":"not-allowed"},children:"Disconnect"})]}),vA=({onClick:t})=>h.jsx("button",{onClick:t,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),un=({channel:t,isSubscribed:e,isConnected:n,disabled:s=!1,subscribeLabel:r,unsubscribeLabel:i,onSubscribe:o,onUnsubscribe:a,variant:l="public"})=>{const c=!n||s,u=e?"#dc3545":l==="private"?"#28a745":"#007bff";return h.jsx("button",{onClick:e?a:o,disabled:c,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:u,color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer"},children:e?i:r})},SA=({steps:t})=>t.length===0?null:h.jsxs("div",{className:"connection-steps-container",children:[h.jsx("h2",{children:"Connection Steps"}),h.jsx("div",{className:"connection-steps-list",children:t.map((e,n)=>h.jsxs("div",{className:`connection-step-item ${e.status==="error"?"error":e.status==="success"?"success":e.status==="in-progress"?"in-progress":"pending"}`,children:[h.jsx("span",{className:"connection-step-icon",children:e.status==="error"?"":e.status==="success"?"":e.status==="in-progress"?"":""}),h.jsxs("div",{className:"connection-step-content",children:[h.jsxs("div",{className:"connection-step-title",children:["Step ",e.step,": ",e.message]}),e.details&&h.jsx("div",{className:"connection-step-details",children:JSON.stringify(e.details,null,2)}),h.jsx("div",{className:"connection-step-timestamp",children:new Date(e.timestamp).toLocaleTimeString()})]})]},n))})]}),kA=({wsURL:t,onWsURLChange:e,marketId:n,onMarketIdChange:s,markets:r,symbol:i,onSymbolChange:o,klineInterval:a,onKlineIntervalChange:l,twapWindowSize:c,onTwapWindowSizeChange:u,authToken:d,onAuthTokenChange:f,walletAddress:p,deviceID:m,onDeviceIDChange:x,isConnected:v,isConnecting:g,onConnect:b,onDisconnect:w})=>h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["WebSocket URL:",h.jsx("input",{type:"text",value:t,onChange:y=>e(y.target.value),className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:y=>s(y.target.value),className:"config-select",children:r.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),r.map(y=>{var T;const k=y.market_id??((T=y.market_id)==null?void 0:T.toString())??"",_=y.moniker?y.moniker:y.symbol?y.symbol:y.baseAsset&&y.quoteAsset?`${y.baseAsset}-${y.quoteAsset}`:`Market ID: ${k}`,E=y.active?" [ACTIVE]":"";return h.jsxs("option",{value:k,children:[_," - ID: ",k,E]},k)})]})})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Symbol (for funding_rate, deviation, index_price, mark_price, price_feed, twap):",h.jsx("input",{type:"text",value:i,onChange:y=>o(y.target.value),placeholder:"e.g., BTC/USDT or BTC/USDC",className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Kline Interval:",h.jsxs("select",{value:a,onChange:y=>l(y.target.value),className:"config-select",children:[h.jsx("option",{value:"1m",children:"1 minute"}),h.jsx("option",{value:"5m",children:"5 minutes"}),h.jsx("option",{value:"15m",children:"15 minutes"}),h.jsx("option",{value:"1h",children:"1 hour"}),h.jsx("option",{value:"4h",children:"4 hours"}),h.jsx("option",{value:"1d",children:"1 day"})]})]})}),h.jsx("div",{children:h.jsxs("label",{children:["TWAP Window Size (seconds):",h.jsx("input",{type:"number",value:c,onChange:y=>u(y.target.value),placeholder:"e.g., 300 for 5 minutes",min:"1",className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Auth Token (for private channels):",h.jsx("input",{type:"text",value:d,onChange:y=>f(y.target.value),placeholder:"Required for user_updates (auto-filled from SDK Test Page)",className:"config-input"}),d&&h.jsx("small",{className:"config-hint",children:" Auto-filled from SDK Test Page"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:p||"",disabled:!0,placeholder:"Auto-filled from useOnboard hook",className:`config-input-disabled ${p?"has-value":""}`}),p&&h.jsx("small",{className:"config-hint",children:" Auto-filled from useOnboard hook"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Device ID:",h.jsx("input",{type:"text",value:m,onChange:y=>x(y.target.value),className:"config-input"})]})})]}),h.jsx("div",{className:"config-actions",children:h.jsx(wA,{isConnected:v,isConnecting:g,onConnect:b,onDisconnect:w})})]}),_A=({data:t})=>h.jsxs("div",{className:"funding-rate-details",children:[h.jsx("strong",{className:"funding-rate-title",children:"Funding Rate Details:"}),h.jsxs("div",{className:"funding-rate-grid",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Symbol:"})," ",t.symbol??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Rate:"})," ",t.funding_rate?parseFloat(String(t.funding_rate)).toFixed(6):"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",t.mark_price??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Index Price:"})," ",t.index_price??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Premium Rate:"})," ",t.premium_rate??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"EMA Funding Rate:"})," ",t.ema_funding_rate??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Next Funding Time:"})," ",t.next_funding_time_unix?new Date(t.next_funding_time_unix*1e3).toLocaleString():"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Interval:"})," ",t.funding_interval_seconds?`${t.funding_interval_seconds}s`:"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Valid:"})," ",t.is_valid!==void 0?t.is_valid?"Yes":"No":"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Stale:"})," ",h.jsx("span",{className:`funding-rate-stale ${t.is_stale?"":"valid"}`,children:t.is_stale!==void 0?t.is_stale?"Yes":"No":"N/A"})]}),t.option_type&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Option Type:"})," ",t.option_type]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Strike Price:"})," ",t.strike_price??"N/A"]})]})]})]}),CA=({positions:t})=>!t||t.length===0?null:h.jsxs("div",{className:"positions-container",children:[h.jsxs("strong",{className:"positions-title",children:["Positions (",t.length,"):"]}),h.jsx("div",{className:"positions-grid",children:t.map((e,n)=>{const s=e.size||0,r=s>=0?"LONG":"SHORT";return h.jsxs("div",{className:"position-card",children:[h.jsx("div",{className:"position-symbol",children:e.symbol||`Market ${e.marketId||e.market_id||"N/A"}`}),h.jsxs("div",{className:"position-details",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Side:"})," ",h.jsx("span",{className:r==="LONG"?"position-side-long":"position-side-short",children:r})]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Size:"})," ",Math.abs(s).toFixed(8)]}),e.entryPrice!==void 0||e.entry_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Entry Price:"})," ",(e.entryPrice||e.entry_price||0).toFixed(8)]}):null,e.markPrice!==void 0||e.mark_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",(e.markPrice||e.mark_price||0).toFixed(8)]}):null,e.liquidationPrice!==void 0||e.liquidation_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Liquidation Price:"})," ",(e.liquidationPrice||e.liquidation_price||0).toFixed(8)]}):null,e.unrealizedPnL!==void 0||e.unrealized_pnl!==void 0||e.pnl!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Unrealized PnL:"})," ",h.jsx("span",{className:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0)>=0?"position-pnl-positive":"position-pnl-negative",children:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0).toFixed(8)})]}):null,e.leverage!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Leverage:"})," ",e.leverage,"x"]}):null,e.margin!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Margin:"})," ",e.margin.toFixed(8)]}):null,e.marginMode!==void 0||e.margin_mode!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Margin Mode:"})," ",e.marginMode||e.margin_mode||"N/A"]}):null]})]},n)})})]}),EA=({message:t})=>{const{channel:e,data:n,type:s,step:r,timestamp:i}=t,o=e==="funding_rate"&&typeof n=="object"&&n!==null,a=e==="user_updates"&&typeof n=="object"&&n!==null&&Array.isArray(n.positions)&&n.positions.length>0,l=o||a;return h.jsx("div",{className:`message-item ${s}`,children:h.jsx("div",{className:"message-header",children:h.jsxs("div",{className:"message-content",children:[h.jsxs("div",{className:"message-title",children:[h.jsxs("span",{children:["[",e,"]"]}),r&&h.jsxs("span",{className:"message-step",children:["(",r,")"]}),h.jsx("span",{children:new Date(i).toLocaleTimeString()})]}),o&&h.jsx(_A,{data:n}),a&&h.jsx(CA,{positions:n.positions}),!l&&h.jsx("div",{className:"message-body",children:typeof n=="string"?n:JSON.stringify(n,null,2)}),typeof n!="string"&&h.jsxs("details",{children:[h.jsx("summary",{className:"raw-data-summary",children:"View Raw Data"}),h.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(n,null,2)})]})]})})})},PA=({messages:t,isPrivate:e=!1,emptyMessage:n})=>{const s=e?"No messages yet. Connect with auth token and subscribe to user updates.":"No messages yet. Connect and subscribe to channels to see updates.";return h.jsx("div",{className:`messages-container ${e?"private":"public"}`,children:t.length===0?h.jsx("div",{className:`messages-empty ${e?"private":""}`,children:n||s}):t.map(r=>h.jsx(EA,{message:r},r.id))})},h1=({title:t,isPrivate:e=!1,messages:n,onClearMessages:s,children:r,emptyMessage:i})=>h.jsxs("div",{className:"channel-section",children:[h.jsxs("div",{className:"channel-header",children:[h.jsx("h2",{className:"channel-title",children:t}),h.jsx(vA,{onClick:s})]}),h.jsxs("div",{className:"channel-content",children:[h.jsx("div",{className:"channel-buttons-container",children:r}),h.jsx(PA,{messages:n,isPrivate:e,emptyMessage:i}),e&&h.jsxs("div",{className:"private-note",children:[h.jsx("strong",{children:"Note:"})," Private channels require authentication. Enter your auth token in the configuration above."]})]})]});function mt(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function oo(t,e){return t.width===e.width&&t.height===e.height}var TA=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){n._observers=n._observers.filter(function(r){return r!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function MA(t){return new TA(t)}var IA=function(){function t(e,n,s){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=mt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(i){return i},this._allowResizeObserver=(r=s==null?void 0:s.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return mt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=mt(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;oo(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var s=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,s=mt(this._transformBitmapSize(e,this._canvasElementClientSize)),r=oo(this.bitmapSize,s)?null:s;n===null&&r===null||n!==null&&r!==null&&oo(n,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(n,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}NA().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=f1(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=MA(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var s=f1(this._canvasElement);if(s!==null){var r=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:s.devicePixelRatio,i=this._canvasElement.getClientRects(),o=i[0]!==void 0?AA(i[0],r):mt({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var s=n.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var r=s.devicePixelContentBoxSize[0],i=mt({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function DA(t,e){return new IA(t,e.transform,e.options)}function f1(t){return t.ownerDocument.defaultView}function NA(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function AA(t,e){return mt({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var RA=function(){function t(e,n,s){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function xo(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new RA(r,n,s)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const f5={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var p1,g1;function tl(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function p5(t,e,n,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(n,e+r),t.lineTo(s,e+r),t.stroke()}function tn(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Fn(t){if(t===void 0)throw new Error("Value is undefined");return t}function fe(t){if(t===null)throw new Error("Value is null");return t}function oi(t){return fe(Fn(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(p1||(p1={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(g1||(g1={}));class $t{constructor(){this.t=[]}i(e,n,s){const r={h:e,l:n,o:s===!0};this.t.push(r)}_(e){const n=this.t.findIndex(s=>e===s.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,s){const r=[...this.t];this.t=this.t.filter(i=>!i.o),r.forEach(i=>i.h(e,n,s))}v(){return this.t.length>0}m(){this.t=[]}}function Gn(t,...e){for(const n of e)for(const s in n)n[s]!==void 0&&Object.prototype.hasOwnProperty.call(n,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof n[s]!="object"||t[s]===void 0||Array.isArray(n[s])?t[s]=n[s]:Gn(t[s],n[s]));return t}function nl(t){return typeof t=="number"&&isFinite(t)}function fu(t){return typeof t=="number"&&t%1==0}function $u(t){return typeof t=="string"}function _d(t){return typeof t=="boolean"}function Sr(t){const e=t;if(!e||typeof e!="object")return e;let n,s,r;for(s in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(r=e[s],n[s]=r&&typeof r=="object"?Sr(r):r);return n}function OA(t){return t!==null}function LA(t){return t===null?void 0:t}const g5="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function af(t,e,n){return e===void 0&&(e=g5),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class jA{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),s=this.W();return e.P===n&&e.T===s||(e.P=n,e.T=s,e.k=af(n,s),e.A=2.5/12*n,e.V=e.A,e.B=n/12*e.C,e.I=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Vp(t){return t<0?0:t>255?255:Math.round(t)||0}function m1(t){return .199*t[0]+.687*t[1]+.114*t[2]}class FA{constructor(e,n){this.q=new Map,this.Y=e,n&&(this.q=n)}j(e,n){if(e==="transparent")return e;const s=this.K(e),r=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${n*r})`}X(e){const n=this.K(e);return{Z:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,G:m1(n)>160?"black":"white"}}J(e){return m1(this.K(e))}tt(e,n,s){const[r,i,o,a]=this.K(e),[l,c,u,d]=this.K(n),f=[Vp(r+s*(l-r)),Vp(i+s*(c-i)),Vp(o+s*(u-o)),(p=a+s*(d-a),p<=0||p>1?Math.min(Math.max(p,0),1):Math.round(1e4*p)/1e4)];var p;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const n=this.q.get(e);if(n)return n;const s=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(e),r=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(const o of this.Y){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const i=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,i),i}}class BA{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,s){this.it.forEach(r=>{r.nt(e,n,s)})}}class zu{nt(e,n,s){e.useBitmapCoordinateSpace(r=>this.et(r,n,s))}}class $A extends zu{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const r=this.rt.lt,i=this.rt,o=Math.max(1,Math.floor(n))%2/2,a=l=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){const u=i.ot[c],d=Math.round(u._t*n)+o,f=u.ut*s,p=l*s+o;e.moveTo(d,f),e.arc(d,f,p,0,2*Math.PI)}e.fill()};i.ct>0&&(e.fillStyle=i.dt,a(i.ft+i.ct)),e.fillStyle=i.vt,a(i.ft)}}function zA(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const UA={from:0,to:1};class WA{constructor(e,n,s){this.Mt=new BA,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.Pt=s,this.Mt.st(this.bt)}yt(e){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(zA),this.bt=this.St.map(n=>{const s=new $A;return s.ht(n),s}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),n=this.Pt.Bt(),s=this.Ct.It(),r=this.O.Et();this.kt(),n.forEach((i,o)=>{const a=this.St[o],l=i.At(s),c=i.zt();!e&&l!==null&&i.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=i.Ft().Nt(l.gt,c.Wt),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/i.Ft().$t()),a.ot[0].wt=s,a.ot[0]._t=r.qt(s),a.lt=UA):a.lt=null})}}class HA extends zu{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!i&&!o)return;const a=Math.round(this.Yt._t*s),l=Math.round(this.Yt.ut*r);e.lineCap="butt",i&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*s),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,tl(e,this.Yt.jt.Xt),function(c,u,d,f){c.beginPath();const p=c.lineWidth%2?.5:0;c.moveTo(u+p,d),c.lineTo(u+p,f),c.stroke()}(e,a,0,n.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*r),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,tl(e,this.Yt.Kt.Xt),p5(e,l,0,n.width))}}class VA{constructor(e,n){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new HA(this.Zt),this.Jt=e,this.Pt=n}yt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),n=this.Pt.Qt().N().crosshair,s=this.Zt;if(n.mode===2)return s.Kt.Vt=!1,void(s.jt.Vt=!1);s.Kt.Vt=e&&this.Jt.ti(this.Pt),s.jt.Vt=e&&this.Jt.ii(),s.Kt.ct=n.horzLine.width,s.Kt.Xt=n.horzLine.style,s.Kt.R=n.horzLine.color,s.jt.ct=n.vertLine.width,s.jt.Xt=n.vertLine.style,s.jt.R=n.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function f0(t,e,n,s,r,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,n,s,r),t.restore()}function x1(t,e,n,s,r,i){t.beginPath(),t.roundRect?t.roundRect(e,n,s,r,i):(t.lineTo(e+s-i[1],n),i[1]!==0&&t.arcTo(e+s,n,e+s,n+i[1],i[1]),t.lineTo(e+s,n+r-i[2]),i[2]!==0&&t.arcTo(e+s,n+r,e+s-i[2],n+r,i[2]),t.lineTo(e+i[3],n+r),i[3]!==0&&t.arcTo(e,n+r,e,n+r-i[3],i[3]),t.lineTo(e,n+i[0]),i[0]!==0&&t.arcTo(e,n,e+i[0],n,i[0]))}function b1(t,e,n,s,r,i,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===i)return x1(t,e,n,s,r,a),t.fillStyle=i,t.fill(),void t.restore();const c=o/2;var u;x1(t,e+c,n+c,s-o,r-o,(u=-c,a.map(d=>d===0?d:d+u))),i!=="transparent"&&(t.fillStyle=i,t.fill()),l!=="transparent"&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function m5(t,e,n,s,r,i,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,r);a.addColorStop(0,i),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,n,s,r),t.restore()}class y1{constructor(e,n){this.ht(e,n)}ht(e,n){this.Yt=e,this.ei=n}$t(e,n){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,n,s,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const i=this.Yt.R,o=this.ei.Z,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=n.k;const u=this.hi(l,n,s,r),d=u.ai;return u.li?b1(c,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):b1(c,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(c.fillStyle=i,c.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(c.fillStyle=n.D,c.fillRect(u.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),u});e.useMediaCoordinateSpace(({context:l})=>{const c=a.xi;l.font=n.k,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=i,l.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.Pi)})}hi(e,n,s,r){const{context:i,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=e,u=this.Yt.pi||!this.Yt.yi?n.C:0,d=this.Yt.ki?n.S:0,f=n.A+this.ei.Ti,p=n.V+this.ei.Ri,m=n.B,x=n.I,v=this.Yt.ri,g=n.P,b=s.Di(i,v),w=Math.ceil(s.Vi(i,v)),y=g+f+p,k=n.S+m+x+w+u,_=Math.max(1,Math.floor(c));let E=Math.round(y*c);E%2!=_%2&&(E+=1);const T=d>0?Math.max(1,Math.floor(d*l)):0,D=Math.round(k*l),C=Math.round(u*l),A=this.ei.Bi??this.ei.Ii,N=Math.round(A*c)-Math.floor(.5*c),$=Math.floor(N+_/2-E/2),W=$+E,L=r==="right",F=L?a.width-d:d,j=L?o.width-T:T;let R,B,I;return L?(R=j-D,B=j-C,I=F-u-m-d):(R=j+D,B=j+C,I=F+u+m),{li:L,ai:{_i:$,mi:N,Si:W,ui:D,ci:E,ft:2*l,di:T,oi:R,fi:j,wi:B,gi:_,bi:o.width},xi:{_i:$/c,Si:W/c,Ci:I,Pi:b}}}}class p0{constructor(e){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(e||y1)(this.Ai,this.Ei),this.Oi=new(e||y1)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Li.$t(e,n),this.Oi.$t(e,n))}Fi(){return this.Ei.Bi||0}Wi(e){this.Ei.Bi=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class YA extends p0{constructor(e,n,s){super(),this.Jt=e,this.Yi=n,this.ji=s}qi(e,n,s){if(e.Vt=!1,this.Jt.N().mode===2)return;const r=this.Jt.N().horzLine;if(!r.labelVisible)return;const i=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||i===null)return;const o=this.Yi.Xi().X(r.labelBackgroundColor);s.Z=o.Z,e.R=o.G;const a=2/12*this.Yi.P();s.Ti=a,s.Ri=a;const l=this.ji(this.Yi);s.Ii=l.Ii,e.ri=this.Yi.Zi(l.gt,i),e.Vt=!0}}const GA=/[1-9]/g;class x5{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,n){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const s=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.k,Math.round(n.Gi.Vi(f,fe(this.Yt).ri,GA))));if(s<=0)return;const r=n.Ji,i=s+2*r,o=i/2,a=this.Yt.Qi;let l=this.Yt.Ii,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+i>a&&(l-=Math.abs(a-(c+i)),c=Math.floor(l-o)+.5);const u=c+i,d=Math.ceil(0+n.S+n.C+n.A+n.P+n.V);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:p,verticalPixelRatio:m})=>{const x=fe(this.Yt);f.fillStyle=x.Z;const v=Math.round(c*p),g=Math.round(0*m),b=Math.round(u*p),w=Math.round(d*m),y=Math.round(2*p);if(f.beginPath(),f.moveTo(v,g),f.lineTo(v,w-y),f.arcTo(v,w,v+y,w,y),f.lineTo(b-y,w),f.arcTo(b,w,b,w-y,y),f.lineTo(b,g),f.fill(),x.pi){const k=Math.round(x.Ii*p),_=g,E=Math.round((_+n.C)*m);f.fillStyle=x.R;const T=Math.max(1,Math.floor(p)),D=Math.floor(.5*p);f.fillRect(k-D,_,T,E-_)}}),e.useMediaCoordinateSpace(({context:f})=>{const p=fe(this.Yt),m=0+n.S+n.C+n.A+n.P/2;f.font=n.k,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.R;const x=n.Gi.Di(f,"Apr0");f.translate(c+r,m+x),f.fillText(p.ri,0,0)})}}class qA{constructor(e,n,s){this.xt=!0,this.Gt=new x5,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=e,this.ts=n,this.ji=s}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const s=this.ts.Et();if(s.Ki())return;e.Qi=s.Qi();const r=this.ji();if(r===null)return;e.Ii=r.Ii;const i=s.ss(this.Ct.It());e.ri=s.ns(fe(i)),e.Vt=!0;const o=this.ts.Xi().X(n.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=s.N().ticksVisible}}class b5{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var w1;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(w1||(w1={}));class KA extends b5{constructor(e,n){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=n,this.ys=((r,i)=>o=>{const a=i(),l=r();if(o===fe(this.Pt).ks())return{gt:l,Ii:a};{const c=fe(o.zt());return{gt:o.Ts(a,c),Ii:a}}})(()=>this.ds,()=>this.Ss);const s=((r,i)=>()=>{const o=this.ts.Et().Rs(r()),a=i();return o&&Number.isFinite(a)?{wt:o,Ii:a}:null})(()=>this.fs,()=>this.si());this.Ds=new qA(this,e,s)}N(){return this.Ps}Vs(e,n){this.xs=e,this.Cs=n}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(e,n,s){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,n,s)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(e){let n=this.gs.get(e);n||(n=new VA(this,e),this.gs.set(e,n));let s=this.Ms.get(e);return s||(s=new WA(this.ts,this,e),this.Ms.set(e,s)),[n,s]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,n){this.ps&&this.Pt===e||this.vs.clear();const s=[];return this.Pt===e&&s.push(this.Hs(this.vs,n,this.ys)),s}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var n,s;(n=this.gs.get(e))==null||n.yt(),(s=this.Ms.get(e))==null||s.yt()}),this.vs.forEach(e=>e.yt()),this.Ds.yt()}qs(e){return e&&!e.ks().Ki()?e.ks():null}zs(e,n,s){this.Ys(e,n,s)&&this.Ns()}Ys(e,n,s){const r=this.bs,i=this.Ss,o=this.ds,a=this.fs,l=this.Pt,c=this.qs(s);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=s;const u=c!==null?c.zt():null;return c!==null&&u!==null?(this.ds=n,this.Ss=c.Nt(n,u)):(this.ds=NaN,this.Ss=NaN),r!==this.bs||i!==this.Ss||a!==this.fs||o!==this.ds||l!==this.Pt}Os(){const e=this.ts.js().map(s=>s.Xs().Ks()).filter(OA),n=e.length===0?null:Math.max(...e);this.fs=n!==null?n:NaN}Hs(e,n,s){let r=e.get(n);return r===void 0&&(r=new YA(this,n,s),e.set(n,r)),r}}function g0(t){return t==="left"||t==="right"}class en{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,n){const s=function(r,i){return r===void 0?i:{tn:Math.max(r.tn,i.tn),sn:r.sn||i.sn}}(this.Zs.get(e),n);this.Zs.set(e,s)}nn(){return this.Js}en(e){const n=this.Zs.get(e);return n===void 0?{tn:this.Js}:{tn:Math.max(this.Js,n.tn),sn:n.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const n of e.Gs)this.mn(n);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((n,s)=>{this.Qs(s,n)})}static wn(){return new en(2)}static gn(){return new en(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(n=>n.an===5);e!==-1&&this.Gs.splice(e,1)}}class y5{formatTickmarks(e){return e.map(n=>this.format(n))}}const v1=".";function kr(t,e){if(!nl(t))return"n/a";if(!fu(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class m0 extends y5{constructor(e,n){if(super(),n||(n=1),nl(e)&&fu(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=n,this.bn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const n=this.Yi/this.Mn;let s=Math.floor(e),r="";const i=this.xn!==void 0?this.xn:NaN;if(n>1){let o=+(Math.round(e*n)-s*n).toFixed(this.xn);o>=n&&(o-=n,s+=1),r=v1+kr(+o.toFixed(this.xn)*this.Mn,i)}else s=Math.round(s*n)/n,i>0&&(r=v1+kr(0,i));return s.toFixed(0)+r}}class w5 extends m0{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class XA extends y5{constructor(e){super(),this.Cn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.Pn(e):e<999995?n+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.Pn(e/1e9)+"B")}Pn(e){let n;const s=Math.pow(10,this.Cn);return n=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(r,i)=>i)}}const QA=/[2-9]/g;class lf{constructor(e=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(e,n,s){return this.In(e,n,s).width}Di(e,n,s){const r=this.In(e,n,s);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}In(e,n,s){const r=s||QA,i=String(n).replace(r,"0");if(this.Dn.has(i))return Fn(this.Dn.get(i)).En;if(this.yn===this.Vn){const a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.yn--}e.save(),e.textBaseline="middle";const o=e.measureText(i);return e.restore(),o.width===0&&n.length||(this.Dn.set(i,{En:o,An:this.kn}),this.Rn[this.kn]=i,this.yn++,this.kn++),o}}class JA{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,n,s){this.zn=e,this.M=n,this.Ln=s}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class v5{constructor(e,n,s){this.Fn=e,this.On=new lf(50),this.Wn=n,this.O=s,this.F=-1,this.Gt=new JA(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const n=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(n===null)return null;const s=e.qn(n);if(s==="overlay")return null;const r=this.O.Yn();return r.P!==this.F&&(this.F=r.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),r,s),this.Gt}}class ZA extends zu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,n){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:s,ct:r,Kn:i}=this.Yt;return n>=s-r-7&&n<=s+r+7?{Xn:this.Yt,Kn:i}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;const i=Math.round(this.Yt.ut*r);i<0||i>n.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*s),tl(e,this.Yt.Xt),p5(e,i,0,n.width))}}class jb{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new ZA,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class eR extends jb{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),n=e.ie().ie;if(n!==2&&n!==3)return;const s=this.Jn.N();if(!s.baseLineVisible||!this.Jn.Vt())return;const r=this.Jn.zt();r!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(r.Wt,r.Wt),this.Zn.R=s.baseLineColor,this.Zn.ct=s.baseLineWidth,this.Zn.Xt=s.baseLineStyle)}}class tR extends zu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){const r=this.Yt;if(r===null)return;const i=Math.max(1,Math.floor(n)),o=i%2/2,a=Math.round(r.ne.x*n)+o,l=r.ne.y*s;e.fillStyle=r.ee,e.beginPath();const c=Math.max(2,1.5*r.re)*n;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.he,e.beginPath(),e.arc(a,l,r.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=r.ae,e.beginPath(),e.arc(a,l,r.ft*n+i/2,0,2*Math.PI,!1),e.stroke()}}const nR=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class sR{constructor(e){this.Gt=new tR,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),n=this.we-e;if(n>0)return void(n<650&&(this.we+=2600));this.me=e,this.we=e+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),n=e.Pe(),s=this.ge.zt();if(n===null||s===null)return;const r=this.ge.ye(!0);if(r.ke||!n.Te(r.Re))return;const i={x:e.qt(r.Re),y:this.ge.Ft().Nt(r.gt,s.Wt)},o=r.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:i})}Ce(){const e=this.Gt.se();if(e!==null){const n=this.De(this.Ve(),e.ee);e.he=n.he,e.ae=n.ae,e.ft=n.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(e,n,s,r){const i=s+(r-s)*n;return this.ge.Qt().Xi().j(e,i)}De(e,n){const s=e%2600/2600;let r;for(const c of nR)if(s>=c.le&&s<=c.oe){r=c;break}tn(r!==void 0,"Last price animation internal logic error");const i=(s-r.le)/(r.oe-r.le);return{he:this.Be(n,i,r.ce,r.de),ae:this.Be(n,i,r.fe,r.pe),ft:(o=i,a=r._e,l=r.ue,a+(l-a)*o)};var o,a,l}}class rR extends jb{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const n=this.Jn.N();if(!n.priceLineVisible||!this.Jn.Vt())return;const s=this.Jn.ye(n.priceLineSource===0);s.ke||(e.Vt=!0,e.ut=s.Ii,e.R=this.Jn.Ie(s.R),e.ct=n.priceLineWidth,e.Xt=n.priceLineStyle)}}class iR extends p0{constructor(e){super(),this.Jt=e}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.Jt;if(!r.Vt())return;const i=r.N(),o=i.lastValueVisible,a=r.Ee()!=="",l=i.seriesLastValueMode===0,c=r.ye(!1);if(c.ke)return;o&&(e.ri=this.Ae(c,o,l),e.Vt=e.ri.length!==0),(a||l)&&(n.ri=this.ze(c,o,a,l),n.Vt=n.ri.length>0);const u=r.Ie(c.R),d=this.Jt.Qt().Xi().X(u);s.Z=d.Z,s.Ii=c.Ii,n.Ht=r.Qt().Ut(c.Ii/r.Ft().$t()),e.Ht=u,e.R=d.G,n.R=d.G}ze(e,n,s,r){let i="";const o=this.Jt.Ee();return s&&o.length!==0&&(i+=`${o} `),n&&r&&(i+=this.Jt.Ft().Le()?e.Oe:e.Ne),i.trim()}Ae(e,n,s){return n?s?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function S1(t,e,n,s){const r=Number.isFinite(e),i=Number.isFinite(n);return r&&i?t(e,n):r||i?r?e:n:s}class Sn{constructor(e,n){this.Fe=e,this.We=n}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new Sn(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new Sn(S1(Math.min,this.$e(),e.$e(),-1/0),S1(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!nl(e)||this.We-this.Fe===0)return;const n=.5*(this.We+this.Fe);let s=this.We-n,r=this.Fe-n;s*=e,r*=e,this.We=n+s,this.Fe=n+r}Ke(e){nl(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new Sn(e.minValue,e.maxValue)}}class cf{constructor(e,n){this.Ge=e,this.Je=n||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new cf(Sn.Ze(e.priceRange),e.margins)}}class oR extends jb{constructor(e,n){super(e),this.ir=n}te(){const e=this.Zn;e.Vt=!1;const n=this.ir.N();if(!this.Jn.Vt()||!n.lineVisible)return;const s=this.ir.sr();s!==null&&(e.Vt=!0,e.ut=s,e.R=n.color,e.ct=n.lineWidth,e.Xt=n.lineStyle,e.Kn=this.ir.N().id)}}class aR extends p0{constructor(e,n){super(),this.ge=e,this.ir=n}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.ir.N(),i=r.axisLabelVisible,o=r.title!=="",a=this.ge;if(!i||!a.Vt())return;const l=this.ir.sr();if(l===null)return;o&&(n.ri=r.title,n.Vt=!0),n.Ht=a.Qt().Ut(l/a.Ft().$t()),e.ri=this.nr(r.price),e.Vt=!0;const c=this.ge.Qt().Xi().X(r.axisLabelColor||r.color);s.Z=c.Z;const u=r.axisLabelTextColor||c.G;e.R=u,n.R=u,s.Ii=l}nr(e){const n=this.ge.zt();return n===null?"":this.ge.Ft().Zi(e,n.Wt)}}class lR{constructor(e,n){this.ge=e,this.Ps=n,this.er=new oR(e,this),this.Fn=new aR(e,this),this.rr=new v5(this.Fn,e,e.Qt())}hr(e){Gn(this.Ps,e),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const e=this.ge,n=e.Ft();if(e.Qt().Et().Ki()||n.Ki())return null;const s=e.zt();return s===null?null:n.Nt(this.Ps.price,s.Wt)}}class cR extends b5{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const uR={Bar:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=fe(t(n,s)),a=oi(o.Wt[0])<=oi(o.Wt[3]);return{cr:o.R??(a?r:i)}},Candlestick:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,u=fe(t(n,s)),d=oi(u.Wt[0])<=oi(u.Wt[3]);return{cr:u.R??(d?r:i),dr:u.Ht??(d?o:a),pr:u.vr??(d?l:c)}},Custom:(t,e,n,s)=>({cr:fe(t(n,s)).R??e.color}),Area:(t,e,n,s)=>{const r=fe(t(n,s));return{cr:r.vt??e.lineColor,vt:r.vt??e.lineColor,mr:r.mr??e.topColor,wr:r.wr??e.bottomColor}},Baseline:(t,e,n,s)=>{const r=fe(t(n,s));return{cr:r.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:r.gr??e.topLineColor,Mr:r.Mr??e.bottomLineColor,br:r.br??e.topFillColor1,Sr:r.Sr??e.topFillColor2,Cr:r.Cr??e.bottomFillColor1,Pr:r.Pr??e.bottomFillColor2}},Line:(t,e,n,s)=>{const r=fe(t(n,s));return{cr:r.R??e.color,vt:r.R??e.color}},Histogram:(t,e,n,s)=>({cr:fe(t(n,s)).R??e.color})};class dR{constructor(e){this.yr=(n,s)=>s!==void 0?s.Wt:this.ge.Xs().kr(n),this.ge=e,this.Tr=uR[e.Rr()]}Dr(e,n){return this.Tr(this.yr,this.ge.N(),e,n)}}function S5(t,e,n,s,r=0,i=e.length){let o=i-r;for(;0<o;){const a=o>>1,l=r+a;s(e[l],n)===t?(r=l+1,o-=a+1):o=a}return r}const sl=S5.bind(null,!0),k5=S5.bind(null,!1);var k1;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(k1||(k1={}));const Ur=30;class hR{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}kr(e){return this.Fr(e)}Fr(e,n=0){const s=this.Nr(e,n);return s===null?null:{...this.Wr(s),Re:this.Or(s)}}Hr(){return this.Vr}Ur(e,n,s){if(this.Ki())return null;let r=null;for(const i of s)r=Cd(r,this.$r(e,n,i));return r}ht(e){this.Ir.clear(),this.Br.clear(),this.Vr=e,this.Er=e.map(n=>n.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,n){const s=this.Yr(e);if(s===null&&n!==0)switch(n){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return s}jr(e){let n=this.Xr(e);return n>0&&(n-=1),n!==this.Vr.length&&this.Or(n)<e?n:null}Kr(e){const n=this.Zr(e);return n!==this.Vr.length&&e<this.Or(n)?n:null}Yr(e){const n=this.Xr(e);return n===this.Vr.length||e<this.Vr[n].Re?null:n}Xr(e){return sl(this.Vr,e,(n,s)=>n.Re<s)}Zr(e){return k5(this.Vr,e,(n,s)=>n.Re>s)}Gr(e,n,s){let r=null;for(let i=e;i<n;i++){const o=this.Vr[i].Wt[s];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(e,n,s){if(this.Ki())return null;let r=null;const i=fe(this.Lr()),o=fe(this.Ks()),a=Math.max(e,i),l=Math.min(n,o),c=Math.ceil(a/Ur)*Ur,u=Math.max(c,Math.floor(l/Ur)*Ur);{const f=this.Xr(a),p=this.Zr(Math.min(l,c,n));r=Cd(r,this.Gr(f,p,s))}let d=this.Br.get(s);d===void 0&&(d=new Map,this.Br.set(s,d));for(let f=Math.max(c+1,a);f<u;f+=Ur){const p=Math.floor(f/Ur);let m=d.get(p);if(m===void 0){const x=this.Xr(p*Ur),v=this.Zr((p+1)*Ur-1);m=this.Gr(x,v,s),d.set(p,m)}r=Cd(r,m)}{const f=this.Xr(u),p=this.Zr(l);r=Cd(r,this.Gr(f,p,s))}return r}}function Cd(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}const uf={setLineStyle:tl};class fR{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,uf)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,uf)}}class pR{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new fR(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}class _5{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,n;(n=(e=this.ah).updateAllViews)==null||n.call(e)}Fs(){var s,r,i;const e=((r=(s=this.ah).paneViews)==null?void 0:r.call(s))??[];if(((i=this.hh)==null?void 0:i.nh)===e)return this.hh.eh;const n=e.map(o=>new pR(o));return this.hh={nh:e,eh:n},n}jn(e,n){var s,r;return((r=(s=this.ah).hitTest)==null?void 0:r.call(s,e,n))??null}}let gR=class extends _5{us(){return[]}};class mR{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,uf)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,uf)}}class _1{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new mR(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}function C5(t){var e,n,s;return{ri:t.text(),Ii:t.coordinate(),Bi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),Z:t.backColor(),Vt:((n=t.visible)==null?void 0:n.call(t))??!0,pi:((s=t.tickVisible)==null?void 0:s.call(t))??!0}}class xR{constructor(e,n){this.Gt=new x5,this._h=e,this.uh=n}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...C5(this._h)}),this.Gt}}class bR extends p0{constructor(e,n){super(),this._h=e,this.Yi=n}qi(e,n,s){const r=C5(this._h);s.Z=r.Z,e.R=r.R;const i=2/12*this.Yi.P();s.Ti=i,s.Ri=i,s.Ii=r.Ii,s.Bi=r.Bi,e.ri=r.ri,e.Vt=r.Vt,e.pi=r.pi}}class yR extends _5{constructor(e,n){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=n}cs(){var r,i,o;const e=((i=(r=this.ah).timeAxisViews)==null?void 0:i.call(r))??[];if(((o=this.dh)==null?void 0:o.nh)===e)return this.dh.eh;const n=this.ge.Qt().Et(),s=e.map(a=>new xR(a,n));return this.dh={nh:e,eh:s},s}Ws(){var r,i,o;const e=((i=(r=this.ah).priceAxisViews)==null?void 0:i.call(r))??[];if(((o=this.fh)==null?void 0:o.nh)===e)return this.fh.eh;const n=this.ge.Ft(),s=e.map(a=>new bR(a,n));return this.fh={nh:e,eh:s},s}wh(){var s,r,i;const e=((r=(s=this.ah).priceAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.ph)==null?void 0:i.nh)===e)return this.ph.eh;const n=e.map(o=>new _1(o));return this.ph={nh:e,eh:n},n}gh(){var s,r,i;const e=((r=(s=this.ah).timeAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.mh)==null?void 0:i.nh)===e)return this.mh.eh;const n=e.map(o=>new _1(o));return this.mh={nh:e,eh:n},n}Mh(e,n){var s,r;return((r=(s=this.ah).autoscaleInfo)==null?void 0:r.call(s,e,n))??null}}function Yp(t,e,n,s){t.forEach(r=>{e(r).forEach(i=>{i.rh()===n&&s.push(i)})})}function Gp(t){return t.Fs()}function wR(t){return t.wh()}function vR(t){return t.gh()}const SR=["Area","Line","Baseline"];class x0 extends cR{constructor(e,n,s,r,i){super(e),this.Yt=new hR,this.er=new rR(this),this.bh=[],this.Sh=new eR(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=s,this.kh=n;const o=new iR(this);this.vs=[o],this.rr=new v5(o,this,e),SR.includes(this.kh)&&(this.xh=new sR(this)),this.Th(),this.sh=r(this,this.Qt(),i)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(e){return this.Ps.priceLineColor||e}ye(e){const n={ke:!0},s=this.Ft();if(this.Qt().Et().Ki()||s.Ki()||this.Yt.Ki())return n;const r=this.Qt().Et().Pe(),i=this.zt();if(r===null||i===null)return n;let o,a;if(e){const d=this.Yt.Ar();if(d===null)return n;o=d,a=d.Re}else{const d=this.Yt.Fr(r.bi(),-1);if(d===null||(o=this.Yt.kr(d.Re),o===null))return n;a=d.Re}const l=o.Wt[3],c=this.Rh().Dr(a,{Wt:o}),u=s.Nt(l,i.Wt);return{ke:!1,gt:l,ri:s.Zi(l,i.Wt),Oe:s.Dh(l),Ne:s.Vh(l,i.Wt),R:c.cr,Ii:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new dR(this)),this.Ch}N(){return this.Ps}hr(e){const n=e.priceScaleId;n!==void 0&&n!==this.Ps.priceScaleId&&this.Qt().Bh(this,n),Gn(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(e,n){this.Yt.ht(e),this.sh.yt("data"),this.xh!==null&&(n&&n.zh?this.xh.be():e.length===0&&this.xh.Me());const s=this.Qt().Hn(this);this.Qt().Lh(s),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const n=new lR(this,e);return this.bh.push(n),this.Qt().Eh(this),n}Nh(e){const n=this.bh.indexOf(e);n!==-1&&this.bh.splice(n,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const n=e.Uh();return this.Yt.Fr(n,1)}Xs(){return this.Yt}$h(e){const n=this.Yt.kr(e);return n===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:n.Wt[0],Yh:n.Wt[1],jh:n.Wt[2],Kh:n.Wt[3]}:n.Wt[3]}Xh(e){const n=[];Yp(this.yh,Gp,"top",n);const s=this.xh;return s!==null&&s.Vt()&&(this.Ph===null&&s.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),s.Se(),n.unshift(s)),n}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const n=this.bh.map(s=>s.lr());return e.push(...n),Yp(this.yh,Gp,"normal",e),e}Jh(){return this.Qh(Gp,"bottom")}ta(e){return this.Qh(wR,e)}ia(e){return this.Qh(vR,e)}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,n){if(n!==this.es&&!this.Gh())return[];const s=[...this.vs];for(const r of this.bh)s.push(r.ur());return this.yh.forEach(r=>{s.push(...r.Ws())}),s}cs(){const e=[];return this.yh.forEach(n=>{e.push(...n.cs())}),e}Mh(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider(()=>{const r=this.na(e,n);return r===null?null:r.Xe()});return cf.Ze(s)}return this.na(e,n)}nh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}ea(){return this.ra}Ns(){var e;this.sh.yt();for(const n of this.vs)n.yt();for(const n of this.bh)n.yt();this.er.yt(),this.Sh.yt(),(e=this.xh)==null||e.yt(),this.yh.forEach(n=>n.Ns())}Ft(){return fe(super.Ft())}At(e){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.Yt.kr(e);return n===null?null:{gt:n.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(e){this.yh.push(new yR(e,this))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e)}ca(){if(this.kh==="Custom")return e=>this.sh.da(e)}fa(){if(this.kh==="Custom")return e=>this.sh.pa(e)}va(){return this.Yt.qr()}Gh(){return!g0(this.Ft().ma())}na(e,n){if(!fu(e)||!fu(n)||this.Yt.Ki())return null;const s=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(e,n,s);let i=r!==null?new Sn(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){const a=this.Ps.base,l=new Sn(a,a);i=i!==null?i.vn(l):l}return this.yh.forEach(a=>{const l=a.Mh(e,n);if(l!=null&&l.priceRange){const c=new Sn(l.priceRange.minValue,l.priceRange.maxValue);i=i!==null?i.vn(c):c}l!=null&&l.margins&&(o=l.margins)}),new cf(i,o)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(e){switch(this.kh){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ra={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.ra=new XA(this.Ps.priceFormat.precision);break;case"percent":this.ra=new w5(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new m0(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.wa()}Qh(e,n){const s=[];return Yp(this.yh,e,n,s),s}}const kR=[3],_R=[0,1,2,3];class CR{constructor(e){this.Ps=e}ga(e,n,s){let r=e;if(this.Ps.mode===0)return r;const i=s.ks(),o=i.zt();if(o===null)return r;const a=i.Nt(e,o),l=s.Ma().filter(u=>u instanceof x0).reduce((u,d)=>{if(s.Un(d)||!d.Vt())return u;const f=d.Ft(),p=d.Xs();if(f.Ki()||!p.Te(n))return u;const m=p.kr(n);if(m===null)return u;const x=oi(d.zt()),v=this.Ps.mode===3?_R:kR;return u.concat(v.map(g=>f.Nt(m.Wt[g],x.Wt)))},[]);if(l.length===0)return r;l.sort((u,d)=>Math.abs(u-a)-Math.abs(d-a));const c=l[0];return r=i.Ts(c,o),r}}function Rc(t,e,n){return Math.min(Math.max(t,e),n)}function Ed(t,e,n){return e-t<=n}class ER extends zu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=Math.max(1,Math.floor(s));e.lineWidth=i,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=fe(this.Yt);if(o.ba){e.strokeStyle=o.Sa,tl(e,o.xa),e.beginPath();for(const a of o.Ca){const l=Math.round(a.Pa*s);e.moveTo(l,-i),e.lineTo(l,n.height+i)}e.stroke()}if(o.ya){e.strokeStyle=o.ka,tl(e,o.Ta),e.beginPath();for(const a of o.Ra){const l=Math.round(a.Pa*r);e.moveTo(-i,l),e.lineTo(n.width+i,l)}e.stroke()}})}}class PR{constructor(e){this.Gt=new ER,this.xt=!0,this.Pt=e}yt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,n={ya:e.horzLines.visible,ba:e.vertLines.visible,ka:e.horzLines.color,Sa:e.vertLines.color,Ta:e.horzLines.style,xa:e.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map(s=>({Pa:s.coord}))};this.Gt.ht(n),this.xt=!1}return this.Gt}}class TR{constructor(e){this.sh=new PR(e)}lr(){return this.sh}}const qp={Va:4,Ba:1e-4};function sa(t,e){const n=100*(t-e)/e;return e<0?-n:n}function MR(t,e){const n=sa(t.$e(),e),s=sa(t.qe(),e);return new Sn(n,s)}function Oc(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function IR(t,e){const n=Oc(t.$e(),e),s=Oc(t.qe(),e);return new Sn(n,s)}function df(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.log10(n+e.Ba)+e.Va;return t<0?-s:s}function Lc(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.pow(10,n-e.Va)-e.Ba;return t<0?-s:s}function Yl(t,e){if(t===null)return null;const n=df(t.$e(),e),s=df(t.qe(),e);return new Sn(n,s)}function ra(t,e){if(t===null)return null;const n=Lc(t.$e(),e),s=Lc(t.qe(),e);return new Sn(n,s)}function Kp(t){if(t===null)return qp;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return qp;const n=Math.ceil(Math.abs(Math.log10(e))),s=qp.Va+n;return{Va:s,Ba:1/Math.pow(10,s)}}class Xp{constructor(e,n){if(this.Ia=e,this.Ea=n,function(s){if(s<0)return!1;if(s>1e18)return!0;for(let r=s;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let s=this.Ia;s!==1;){if(s%2==0)this.Aa.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),s/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(e,n,s){const r=this.Ia===0?0:1/this.Ia;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,a=this.Ea[0];for(;;){const d=Ed(i,r,1e-14)&&i>r+1e-14,f=Ed(i,s*a,1e-14),p=Ed(i,1,1e-14);if(!(d&&f&&p))break;i/=a,a=this.Ea[++o%this.Ea.length]}if(i<=r+1e-14&&(i=r),i=Math.max(1,i),this.Aa.length>0&&(l=i,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.Aa[0];Ed(i,s*a,1e-14)&&i>r+1e-14;)i/=a,a=this.Aa[++o%this.Aa.length];var l,c,u;return i}}class C1{constructor(e,n,s,r){this.La=[],this.Yi=e,this.Ia=n,this.Oa=s,this.Na=r}za(e,n){if(e<n)throw new Error("high < low");const s=this.Yi.$t(),r=(e-n)*this.Fa()/s,i=new Xp(this.Ia,[2,2.5,2]),o=new Xp(this.Ia,[2,2,2.5]),a=new Xp(this.Ia,[2.5,2,2]),l=[];return l.push(i.za(e,n,r),o.za(e,n,r),a.za(e,n,r)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let d=1;d<c.length;++d)c[d]<u&&(u=c[d]);return u}(l)}Wa(){const e=this.Yi,n=e.zt();if(n===null)return void(this.La=[]);const s=e.$t(),r=this.Oa(s-1,n),i=this.Oa(0,n),o=this.Yi.N().entireTextOnly?this.Ha()/2:0,a=o,l=s-1-o,c=Math.max(r,i),u=Math.min(r,i);if(c===u)return void(this.La=[]);const d=this.za(c,u);if(this.Ua(n,d,c,u,a,l),e.$a()&&this.qa(d,u,c)){const m=this.Yi.Ya();this.ja(n,d,a,l,m,2*m)}const f=this.La.map(m=>m.Ka),p=this.Yi.Xa(f);for(let m=0;m<this.La.length;m++)this.La[m].Za=p[m]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(e,n,s,r,i,o){const a=this.La,l=this.Yi;let c=s%n;c+=c<0?n:0;const u=s>=r?1:-1;let d=null,f=0;for(let p=s-c;p>r;p-=n){const m=this.Na(p,e,!0);d!==null&&Math.abs(m-d)<this.Fa()||m<i||m>o||(f<a.length?(a[f].Pa=m,a[f].Za=l.Ga(p),a[f].Ka=p):a.push({Pa:m,Za:l.Ga(p),Ka:p}),f++,d=m,l.Ja()&&(n=this.za(p*u,r)))}a.length=f}ja(e,n,s,r,i,o){const a=this.La,l=this.Qa(e,s,i,o),c=this.Qa(e,r,-o,-i),u=this.Na(0,e,!0)-this.Na(n,e,!0);a.length>0&&a[0].Pa-l.Pa<u/2&&a.shift(),a.length>0&&c.Pa-a[a.length-1].Pa<u/2&&a.pop(),a.unshift(l),a.push(c)}Qa(e,n,s,r){const i=(s+r)/2,o=this.Oa(n+s,e),a=this.Oa(n+r,e),l=Math.min(o,a),c=Math.max(o,a),u=Math.max(.1,this.za(c,l)),d=this.Oa(n+i,e),f=d-d%u,p=this.Na(f,e,!0);return{Za:this.Yi.Ga(f),Pa:p,Ka:f}}qa(e,n,s){let r=oi(this.Yi.Qe());return this.Yi.Ja()&&(r=ra(r,this.Yi.tl())),r.$e()-n<e&&s-r.qe()<e}}function E5(t){return t.slice().sort((e,n)=>fe(e.hs())-fe(n.hs()))}var E1;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(E1||(E1={}));const P1=new w5,T1=new m0(100,1);class DR{constructor(e,n,s,r,i){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new $t,this.ul=new $t,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=T1,this.wl=Kp(null),this.gl=e,this.Ps=n,this.Ml=s,this.bl=r,this.Sl=i,this.xl=new C1(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(e){if(Gn(this.Ps,e),this.wa(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const n=Fn(e.scaleMargins.top),s=Fn(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(n+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+s}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const n=this.ie();let s=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),n.ie===1&&e.ie!==n.ie&&(function(i,o){if(i===null)return!1;const a=Lc(i.$e(),o),l=Lc(i.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.wl)?(s=ra(this.Ge,this.wl),s!==null&&this.Bl(s)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==n.ie&&(s=Yl(this.Ge,this.wl),s!==null&&this.Bl(s));const r=n.ie!==this.Ps.mode;r&&(n.ie===2||this.Le())&&this.wa(),r&&(n.ie===3||this.Dl())&&this.wa(),e.Vl!==void 0&&n.Vl!==e.Vl&&(this.Ps.invertScale=e.Vl,this.Il()),this.ul.p(n,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(e){this.il!==e&&(this.il=e,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const e=this.$t()-this.Ll()-this.Ol();return this.sl=e,e}Qe(){return this.Nl(),this.Ge}Bl(e,n){const s=this.Ge;(n||s===null&&e!==null||s!==null&&!s.He(e))&&(this.pl=null,this.Ge=e)}Fl(e){this.Bl(e),this.Wl(e!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(e){return this.Vl()?e:this.$t()-1-e}Nt(e,n){return this.Le()?e=sa(e,n):this.Dl()&&(e=Oc(e,n)),this.Pl(e,n)}Ul(e,n,s){this.Nl();const r=this.Ol(),i=fe(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,p=this.$l();for(let m=d;m<f;m++){const x=e[m],v=x.gt;if(isNaN(v))continue;let g=v;p!==null&&(g=p(x.gt,n));const b=r+u*(g-o),w=c?b:this.il-1-b;x.ut=w}}ql(e,n,s){this.Nl();const r=this.Ol(),i=fe(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,p=this.$l();for(let m=d;m<f;m++){const x=e[m];let v=x.qh,g=x.Yh,b=x.jh,w=x.Kh;p!==null&&(v=p(x.qh,n),g=p(x.Yh,n),b=p(x.jh,n),w=p(x.Kh,n));let y=r+u*(v-o),k=c?y:this.il-1-y;x.Yl=k,y=r+u*(g-o),k=c?y:this.il-1-y,x.jl=k,y=r+u*(b-o),k=c?y:this.il-1-y,x.Kl=k,y=r+u*(w-o),k=c?y:this.il-1-y,x.Xl=k}}Ts(e,n){const s=this.Cl(e,n);return this.Zl(s,n)}Zl(e,n){let s=e;return this.Le()?s=function(r,i){return i<0&&(r=-r),r/100*i+i}(s,n):this.Dl()&&(s=function(r,i){return r-=100,i<0&&(r=-r),r/100*i+i}(s,n)),s}Ma(){return this.cl}Dt(){return this.fl||(this.fl=E5(this.cl)),this.fl}Gl(e){this.cl.indexOf(e)===-1&&(this.cl.push(e),this.wa(),this.Jl())}Ql(e){const n=this.cl.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.cl.splice(n,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let e=null;for(const n of this.cl){const s=n.zt();s!==null&&(e===null||s.Hh<e.Hh)&&(e=s)}return e===null?null:e.Wt}Vl(){return this.Ps.invertScale}Da(){const e=this.zt()===null;if(this.pl!==null&&(e||this.pl.io===e))return this.pl.Da;this.xl.Wa();const n=this.xl.Da();return this.pl={Da:n,io:e},this._l.p(),n}so(){return this._l}no(e){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-e,this.nl=fe(this.Qe()).Ue()))}eo(e){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(e=this.il-e)<0&&(e=0);let n=(this.vl+.2*(this.il-1))/(e+.2*(this.il-1));const s=fe(this.nl).Ue();n=Math.max(n,.1),s.je(n),this.Bl(s)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(e){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=e,this.nl=fe(this.Qe()).Ue()))}ao(e){if(this.Tl()||this.ml===null)return;const n=fe(this.Qe()).Ye()/(this.zl()-1);let s=e-this.ml;this.Vl()&&(s*=-1);const r=s*n,i=fe(this.nl).Ue();i.Ke(r),this.Bl(i,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(e,n){switch(this.Ps.mode){case 2:return this.oo(sa(e,n));case 3:return this.ea().format(Oc(e,n));default:return this.nr(e)}}Ga(e){switch(this.Ps.mode){case 2:return this.oo(e);case 3:return this.ea().format(e);default:return this.nr(e)}}Xa(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ea().formatTickmarks(e);default:return this.uo(e)}}Dh(e){return this.nr(e,fe(this.dl).ea())}Vh(e,n){return e=sa(e,n),this.oo(e,P1)}co(){return this.cl}do(e){this.el={hl:e,rl:!1}}Ns(){this.cl.forEach(e=>e.Ns())}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let e=1/0;this.dl=null;for(const s of this.cl)s.hs()<e&&(e=s.hs(),this.dl=s);let n=100;this.dl!==null&&(n=Math.round(this.dl.nh())),this.ra=T1,this.Le()?(this.ra=P1,n=100):this.Dl()?(this.ra=new m0(100,1),n=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new C1(this,n,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(e){this.al=e}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(e,n){if(this.Nl(),this.Ki())return 0;e=this.Ja()&&e?df(e,this.wl):e;const s=fe(this.Qe()),r=this.Ol()+(this.zl()-1)*(e-s.$e())/s.Ye();return this.Hl(r)}Cl(e,n){if(this.Nl(),this.Ki())return 0;const s=this.Hl(e),r=fe(this.Qe()),i=r.$e()+r.Ye()*((s-this.Ol())/(this.zl()-1));return this.Ja()?Lc(i,this.wl):i}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const e=this.el.hl;if(e===null)return;let n=null;const s=this.co();let r=0,i=0;for(const l of s){if(!l.Vt())continue;const c=l.zt();if(c===null)continue;const u=l.Mh(e.Uh(),e.bi());let d=u&&u.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=Yl(d,this.wl);break;case 2:d=MR(d,c.Wt);break;case 3:d=IR(d,c.Wt)}if(n=n===null?d:n.vn(fe(d)),u!==null){const f=u.tr();f!==null&&(r=Math.max(r,f.above),i=Math.max(i,f.below))}}}if(this.$a()&&(r=Math.max(r,this.Ya()),i=Math.max(i,this.Ya())),r===this.ll&&i===this.ol||(this.ll=r,this.ol=i,this.pl=null,this.kl()),n!==null){if(n.$e()===n.qe()){const l=5*this.fo();this.Ja()&&(n=ra(n,this.wl)),n=new Sn(n.$e()-l,n.qe()+l),this.Ja()&&(n=Yl(n,this.wl))}if(this.Ja()){const l=ra(n,this.wl),c=Kp(l);if(o=c,a=this.wl,o.Va!==a.Va||o.Ba!==a.Ba){const u=this.nl!==null?ra(this.nl,this.wl):null;this.wl=c,n=Yl(l,c),u!==null&&(this.nl=Yl(u,c))}}this.Bl(n)}else this.Ge===null&&(this.Bl(new Sn(-.5,.5)),this.wl=Kp(null));var o,a}$l(){return this.Le()?sa:this.Dl()?Oc:this.Ja()?e=>df(e,this.wl):null}vo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.format(e)):n(e)}mo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.formatTickmarks(e)):n(e)}nr(e,n){return this.vo(e,this.bl.priceFormatter,n)}uo(e,n){const s=this.bl.priceFormatter;return this.mo(e,this.bl.tickmarksPriceFormatter??(s?r=>r.map(s):void 0),n)}oo(e,n){return this.vo(e,this.bl.percentageFormatter,n)}_o(e,n){const s=this.bl.percentageFormatter;return this.mo(e,this.bl.tickmarksPercentageFormatter??(s?r=>r.map(s):void 0),n)}}function M1(t){return t instanceof x0}class I1{constructor(e,n){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new $t,this.yh=[],this.uh=e,this.ts=n,this.Co=new TR(this);const s=n.N();this.Po=this.yo("left",s.leftPriceScale),this.ko=this.yo("right",s.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(s)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.ko.hr(e.rightPriceScale),e.localization&&(this.Po.wa(),this.ko.wa()),e.overlayPriceScales){const n=Array.from(this.wo.values());for(const s of n){const r=fe(s[0].Ft());r.hr(e.overlayPriceScales),e.localization&&r.wa()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.ko}return this.wo.has(e)?Fn(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach(e=>{e.m&&e.m()}),this.yh=this.yh.filter(e=>{const n=e.oh();return n.detached&&n.detached(),!1}),this.xo.p()}Bo(){return this.bo}Io(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(e){this.Mo=e,this.Ao()}Al(e){this.il=e,this.Po.Al(e),this.ko.Al(e),this.cl.forEach(n=>{if(this.Un(n)){const s=n.Ft();s!==null&&s.Al(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.cl.filter(M1)}Ma(){return this.cl}Un(e){const n=e.Ft();return n===null||this.Po!==n&&this.ko!==n}Gl(e,n,s){this.No(e,n,s?e.hs():this.cl.length)}Ql(e,n){const s=this.cl.indexOf(e);tn(s!==-1,"removeDataSource: invalid data source"),this.cl.splice(s,1),n||this.cl.forEach((o,a)=>o.ls(a));const r=fe(e.Ft()).ma();if(this.wo.has(r)){const o=Fn(this.wo.get(r)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.wo.delete(r))}const i=e.Ft();i&&i.Ma().indexOf(e)>=0&&(i.Ql(e),this.Fo(i)),this.fl=null}qn(e){return e===this.Po?"left":e===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(e,n){e.no(n)}$o(e,n){e.eo(n),this.Ao()}qo(e){e.ro()}Yo(e,n){e.ho(n)}jo(e,n){e.ao(n),this.Ao()}Ko(e){e.lo()}Ao(){this.cl.forEach(e=>{e.Ns()})}ks(){let e=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?e=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?e=this.Po:this.cl.length!==0&&(e=this.cl[0].Ft()),e===null&&(e=this.ko),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.ko:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Tl()&&this.Xo(e)}Zo(e){const n=this.uh.Pe();e.yl({sn:!0}),n!==null&&e.do(n),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=E5(this.cl)),this.fl}Qo(e,n){n=Rc(n,0,this.cl.length-1);const s=this.cl.indexOf(e);tn(s!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(s,1),this.cl.splice(n,0,e),this.cl.forEach((r,i)=>r.ls(i)),this.fl=null;for(const r of[this.Po,this.ko])r.Jl(),r.wa();this.ts.ar()}Bt(){return this.Dt().filter(M1)}t_(){return this.xo}i_(){return this.Co}_a(e){this.yh.push(new gR(e))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.yh}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}Xo(e){const n=e.co();if(n&&n.length>0&&!this.uh.Ki()){const s=this.uh.Pe();s!==null&&e.do(s)}e.Ns()}No(e,n,s){let r=this.Do(n);if(r===null&&(r=this.yo(n,this.ts.N().overlayPriceScales)),this.cl.splice(s,0,e),!g0(n)){const i=this.wo.get(n)||[];i.push(e),this.wo.set(n,i)}e.ls(s),r.Gl(e),e._s(r),this.Fo(r),this.fl=null}To(e,n,s){n.ie!==s.ie&&this.Xo(e)}yo(e,n){const s={visible:!0,autoScale:!0,...Sr(n)},r=new DR(e,s,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return r.Al(this.$t()),r}}function Pd(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function NR(t,e,n,s){for(const r of t){const i=r.Tt(s);if(i!==null&&i.jn){const o=i.jn(e,n);if(o!==null)return{a_:r,e_:o}}}return null}function AR(t){return t.Fs!==void 0}function P5(t,e,n){const s=[t,...t.Dt()],r=function(i,o,a){var f;let l,c;for(const p of i){const m=((f=p.sa)==null?void 0:f.call(p,o,a))??[];for(const x of m)u=x.zOrder,d=l==null?void 0:l.zOrder,(!d||u==="top"&&d!=="top"||u==="normal"&&d==="bottom")&&(l=x,c=p)}var u,d;return l&&c?{r_:l,n_:c}:null}(s,e,n);if((r==null?void 0:r.r_.zOrder)==="top")return Pd(r);for(const i of s){if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&!r.r_.isBackground)return Pd(r);if(AR(i)){const o=NR(i.Fs(t),e,n,t);if(o!==null)return{n_:i,a_:o.a_,e_:o.e_}}if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&r.r_.isBackground)return Pd(r)}return r!=null&&r.r_?Pd(r):null}class RR{constructor(e,n,s=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=n,this.Vn=s}__(e){const n=e.time,s=this.o_.cacheKey(n),r=this.Dn.get(s);if(r!==void 0)return r.u_;if(this.yn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Fn(o)),this.Tn++,this.yn--}const i=this.l_(e);return this.Dn.set(s,{u_:i,An:this.kn}),this.Rn.set(this.kn,s),this.yn++,this.kn++,i}}class jc{constructor(e,n){tn(e<=n,"right should be >= left"),this.c_=e,this.d_=n}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function D1(t,e){return t===null||e===null?t===e:t.He(e)}class OR{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,n){this.g_(n),this.Dn=null;for(let s=n;s<e.length;++s){const r=e[s];let i=this.p_.get(r.timeWeight);i===void 0&&(i=[],this.p_.set(r.timeWeight,i)),i.push({index:s,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}M_(e,n,s,r,i){const o=Math.ceil(n/e);return this.Dn!==null&&this.Dn.b_===o&&i===this.Dn.S_&&s===this.Dn.x_||(this.Dn={S_:i,x_:s,Da:this.C_(o,s,r),b_:o}),this.Dn.Da}g_(e){if(e===0)return void this.p_.clear();const n=[];this.p_.forEach((s,r)=>{e<=s[0].index?n.push(r):s.splice(sl(s,e,i=>i.index<e),1/0)});for(const s of n)this.p_.delete(s)}C_(e,n,s){let r=[];const i=o=>!n||s.has(o.index);for(const o of Array.from(this.p_.keys()).sort((a,l)=>l-a)){if(!this.p_.get(o))continue;const a=r;r=[];const l=a.length;let c=0;const u=Fn(this.p_.get(o)),d=u.length;let f=1/0,p=-1/0;for(let m=0;m<d;m++){const x=u[m],v=x.index;for(;c<l;){const g=a[c],b=g.index;if(!(b<v&&i(g))){f=b;break}c++,r.push(g),p=b,f=1/0}if(f-v>=e&&v-p>=e&&i(x))r.push(x),p=v;else if(this.v_)return a}for(;c<l;c++)i(a[c])&&r.push(a[c])}return r}}class ma{constructor(e){this.P_=e}y_(){return this.P_===null?null:new jc(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new ma(null)}}function LR(t,e){return t.weight>e.weight?t:e}class jR{constructor(e,n,s,r){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new OR,this.B_=new Map,this.I_=ma.T_(),this.E_=!0,this.A_=new $t,this.z_=new $t,this.L_=new $t,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=n,this.bl=s,this.U_=n.rightOffset,this.q_=n.barSpacing,this.ts=e,this.Y_(n),this.o_=r,this.j_(),this.V_.m_(n.uniformDistribution),this.K_()}N(){return this.Ps}X_(e){Gn(this.bl,e),this.Z_(),this.j_()}hr(e,n){Gn(this.Ps,e),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),this.Y_(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(e){var n;return((n=this.D_[e])==null?void 0:n.time)??null}ss(e){return this.D_[e]??null}Q_(e,n){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return n?this.D_.length-1:null;const s=sl(this.D_,this.o_.key(e),(r,i)=>this.o_.key(r.time)<i);return this.o_.key(e)<this.o_.key(this.D_[s].time)?n?s:null:s}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const e=this.Pe();if(e===null)return null;const n={from:e.Uh(),to:e.bi()};return this.eu(n)}eu(e){const n=Math.round(e.from),s=Math.round(e.to),r=fe(this.ru()),i=fe(this.hu());return{from:fe(this.ss(Math.max(r,n))),to:fe(this.ss(Math.min(i,s)))}}au(e){return{from:fe(this.Q_(e.from,!0)),to:fe(this.Q_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const n=this.su(),s=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const r=this.q_*e/s;this.q_=r}if(this.Ps.fixLeftEdge&&n!==null&&n.Uh()<=0){const r=s-e;this.U_-=Math.round(r/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(e){if(this.Ki()||!fu(e))return 0;const n=this._u()+this.U_-e;return this.Mo-(n+.5)*this.q_-1}uu(e,n){const s=this._u(),r=n===void 0?0:n.from,i=n===void 0?e.length:n.to;for(let o=r;o<i;o++){const a=e[o].wt,l=s+this.U_-a,c=this.Mo-(l+.5)*this.q_-1;e[o]._t=c}}cu(e,n){const s=Math.ceil(this.du(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.fu(s)?this.pu(s):s}fn(e){this.E_=!0,this.U_=e,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(e){const n=this.q_;if(this.wu(e),this.Ps.rightOffsetPixels!==void 0&&n!==0){const s=this.U_*n/this.q_;this.U_=s}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,n=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(n/e),r=fe(this.Pe()),i=Math.max(r.Uh(),r.Uh()-s),o=Math.max(r.bi(),r.bi()-s),a=this.V_.M_(e,n,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),l=this.ru()+s,c=this.hu()-s,u=this.Mu(),d=this.Ps.fixLeftEdge||u,f=this.Ps.fixRightEdge||u;let p=0;for(const m of a){if(!(i<=m.index&&m.index<=o))continue;let x;p<this.H_.length?(x=this.H_[p],x.coord=this.qt(m.index),x.label=this.bu(m),x.weight=m.weight):(x={needAlignCoordinate:!1,coord:this.qt(m.index),label:this.bu(m),weight:m.weight},this.H_.push(x)),this.q_>n/2&&!u?x.needAlignCoordinate=!1:x.needAlignCoordinate=d&&m.index<=l||f&&m.index>=c,p++}return this.H_.length=p,this.N_=this.H_,this.H_}Su(){let e;this.E_=!0,this.dn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(e)}xu(e){this.E_=!0,this.R_=e,this.ou(),this.G_()}Cu(e,n){const s=this.du(e),r=this.mu(),i=r+n*(r/10);this.dn(i),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(s-this.du(e)))}no(e){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=e,this.Pu()))}eo(e){if(this.O_===null)return;const n=Rc(this.Mo-e,0,this.Mo),s=Rc(this.Mo-fe(this.vl),0,this.Mo);n!==0&&s!==0&&this.dn(this.O_.mu*n/s)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(e){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Pu()))}ao(e){if(this.ml===null)return;const n=(this.ml-e)/this.mu();this.U_=fe(this.O_).gu+n,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.U_,r=performance.now();this.ts._n({Ru:i=>(i-r)/n>=1,Du:i=>{const o=(i-r)/n;return o>=1?e:s+(e-s)*o}})}yt(e,n){this.E_=!0,this.D_=e,this.V_.w_(e,n),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(e,n){const s=e.f_(),r=n&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-r)/s),this.U_=e.bi()-this._u(),n&&(this.U_=r?r/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const e=this.ru(),n=this.hu();e!==null&&n!==null&&this.Eu(new jc(e,n),!0)}zu(e){const n=new jc(e.from,e.to);this.Eu(n)}ns(e){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const n of e)for(const s of n.va())this.F_.set(s,!0);this.W_++}Mu(){const e=this.ts.N().handleScroll,n=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(e){return(this.Mo-1-e)/this.q_}du(e){const n=this.Lu(e),s=this._u()+this.U_-n;return Math.round(1e6*s)/1e6}wu(e){const n=this.q_;this.q_=e,this.lu(),n!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(ma.T_());const e=this._u(),n=this.Mo/this.q_,s=this.U_+e,r=new jc(s-n+1,s);this.Nu(new ma(r))}lu(){const e=Rc(this.q_,this.Fu(),this.Wu());this.q_!==e&&(this.q_=e,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const e=this.Hu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const n=this.Uu();this.U_>n&&(this.U_=n,this.E_=!0)}Hu(){const e=this.ru(),n=this.R_;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(e){let n=this.B_.get(e.weight);return n===void 0&&(n=new RR(s=>this.$u(s),this.o_),this.B_.set(e.weight,n)),n.__(e)}$u(e){return this.o_.formatTickmark(e,this.bl)}Nu(e){const n=this.I_;this.I_=e,D1(n.y_(),this.I_.y_())||this.A_.p(),D1(n.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const e=this.ru();if(e===null)return;const n=this.Pe();if(n===null)return;const s=n.Uh()-e;if(s<0){const r=this.U_-s-1;this.fn(r)}this.lu()}J_(){this.ou(),this.lu()}fu(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}pu(e){const n=function*(r){const i=Math.round(r),o=i<r;let a=1;for(;;)o?(yield i+a,yield i-a):(yield i-a,yield i+a),a++}(e),s=this.hu();for(;s;){const r=n.next().value;if(this.F_.get(r))return r;if(r<0||r>s)break}return e}Y_(e){if(e.rightOffsetPixels!==void 0){const n=e.rightOffsetPixels/(e.barSpacing||this.q_);this.ts.fn(n)}}}var N1,A1,R1,O1,L1;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(N1||(N1={}));class FR{constructor(e,n,s){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new $t,this.Xu=new $t,this.Zu=null,this.Gu=e,this.Ps=n,this.o_=s,this.Sl=new FA(this.Ps.layout.colorParsers),this.Ju=new jA(this),this.uh=new jR(this,n.timeScale,this.Ps.localization,s),this.Ct=new KA(this,n.crosshair),this.Qu=new CR(n.crosshair),n.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(en.gn())}ar(){this.rc(en.wn())}Zh(){this.rc(new en(1))}Eh(e){const n=this.hc(e);this.rc(n)}ac(){return this.ju}lc(e){var s,r,i,o;if(((s=this.ju)==null?void 0:s.n_)===(e==null?void 0:e.n_)&&((i=(r=this.ju)==null?void 0:r.e_)==null?void 0:i.Kn)===((o=e==null?void 0:e.e_)==null?void 0:o.Kn))return;const n=this.ju;this.ju=e,n!==null&&this.Eh(n.n_),e!==null&&e.n_!==(n==null?void 0:n.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Gn(this.Ps,e),this.qu.forEach(n=>n.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.X_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(e,n,s=0){const r=this.qu[s];if(r===void 0)return;if(e==="left")return Gn(this.Ps,{leftPriceScale:n}),r.Ro({leftPriceScale:n}),this.Ku.p(),void this.Ih();if(e==="right")return Gn(this.Ps,{rightPriceScale:n}),r.Ro({rightPriceScale:n}),this.Ku.p(),void this.Ih();const i=this._c(e,s);i!==null&&(i.Ft.hr(n),this.Ku.p())}_c(e,n){const s=this.qu[n];if(s===void 0)return null;const r=s.Do(e);return r!==null?{Us:s,Ft:r}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(e,n){e.Al(n),this.vu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.qu.forEach(n=>n.Eo(e)),this.vu()}fc(e){this.qu.length!==1&&(tn(e>=0&&e<this.qu.length,"Invalid pane index"),this.qu.splice(e,1),this.Ih())}vc(e,n){if(this.qu.length<2)return;tn(e>=0&&e<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu.reduce((d,f)=>d+f.Bo(),0),i=this.qu.reduce((d,f)=>d+f.$t(),0),o=i-30*(this.qu.length-1);n=Math.min(o,Math.max(30,n));const a=r/i,l=s.$t();s.Io(n*a);let c=n-l,u=this.qu.length-1;for(const d of this.qu)if(d!==s){const f=Math.min(o,Math.max(30,d.$t()-c/u));c-=d.$t()-f,u-=1;const p=f*a;d.Io(p)}this.Ih()}mc(e,n){tn(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu[n];this.qu[e]=r,this.qu[n]=s,this.Ih()}wc(e,n){if(tn(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index"),e===n)return;const[s]=this.qu.splice(e,1);this.qu.splice(n,0,s),this.Ih()}Uo(e,n,s){e.Uo(n,s)}$o(e,n,s){e.$o(n,s),this.Ah(),this.rc(this.gc(e,2))}qo(e,n){e.qo(n),this.rc(this.gc(e,2))}Yo(e,n,s){n.Tl()||e.Yo(n,s)}jo(e,n,s){n.Tl()||(e.jo(n,s),this.Ah(),this.rc(this.gc(e,2)))}Ko(e,n){n.Tl()||(e.Ko(n),this.rc(this.gc(e,2)))}Zo(e,n){e.Zo(n),this.rc(this.gc(e,2))}Mc(e){this.uh.no(e)}bc(e,n){const s=this.Et();if(s.Ki()||n===0)return;const r=s.Qi();e=Math.max(1,Math.min(e,r)),s.Cu(e,n),this.vu()}Sc(e){this.xc(0),this.Cc(e),this.Pc()}yc(e){this.uh.eo(e),this.vu()}kc(){this.uh.ro(),this.ar()}xc(e){this.uh.ho(e)}Cc(e){this.uh.ao(e),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(e,n,s,r,i){this.Ct.Vs(e,n);let o=NaN,a=this.uh.cu(e,!0);const l=this.uh.Pe();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));const c=r.ks(),u=c.zt();if(u!==null&&(o=c.Ts(n,u)),o=this.Qu.ga(o,a,r),this.Ct.As(a,o,r),this.Zh(),!i){const d=P5(r,e,n);this.lc(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Xu.p(this.Ct.It(),{x:e,y:n},s)}}Rc(e,n,s){const r=s.ks(),i=r.zt(),o=r.Nt(e,fe(i)),a=this.uh.Q_(n,!0),l=this.uh.qt(fe(a));this.Tc(l,o,null,s,!0)}Dc(e){this.uc().Ls(),this.Zh(),e||this.Xu.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const n=this.Ct.Is(),s=this.Ct.Es();this.Tc(n,s,null,e)}this.Ct.Ns()}Vc(e,n,s){const r=this.uh.Rs(0);n!==void 0&&s!==void 0&&this.uh.yt(n,s);const i=this.uh.Rs(0),o=this.uh._u(),a=this.uh.Pe();if(a!==null&&r!==null&&i!==null){const l=a.Te(o),c=this.o_.key(r)>this.o_.key(i),u=e!==null&&e>o&&!c,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=l&&(s!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!f){const p=e-o;this.uh.fn(this.uh.gu()-p)}}this.uh.xu(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(s){return s instanceof I1}(e))return e;const n=this.qu.find(s=>s.Dt().includes(e));return n===void 0?null:n}vu(){this.qu.forEach(e=>e.Jo()),this.Ah()}m(){this.qu.forEach(e=>e.m()),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(e,n){const s=this.tc(n);this.Ec(e,s),this.Yu.push(e),this.Yu.length===1?this.Ih():this.ar()}Ac(e){const n=this.Hn(e),s=this.Yu.indexOf(e);tn(s!==-1,"Series not found");const r=fe(n);this.Yu.splice(s,1),r.Ql(e),e.m&&e.m(),this.uh.K_(),this.zc(r)}Bh(e,n){const s=fe(this.Hn(e));s.Ql(e,!0),s.Gl(e,n,!0)}Au(){const e=en.wn();e.rn(),this.rc(e)}Lc(e){const n=en.wn();n.ln(e),this.rc(n)}cn(){const e=en.wn();e.cn(),this.rc(e)}dn(e){const n=en.wn();n.dn(e),this.rc(n)}fn(e){const n=en.wn();n.fn(e),this.rc(n)}_n(e){const n=en.wn();n._n(e),this.rc(n)}hn(){const e=en.wn();e.hn(),this.rc(e)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(e,n){if(tn(n>=0,"Index should be greater or equal to 0"),n===this.Fc(e))return;const s=fe(this.Hn(e));s.Ql(e);const r=this.tc(n);this.Ec(e,r),s.Ma().length===0&&this.zc(s),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(e){const n=this.ec,s=this.sc;if(n===s)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Zu===null||this.Zu.mr!==s||this.Zu.wr!==n)this.Zu={mr:s,wr:n,Hc:new Map};else{const i=this.Zu.Hc.get(e);if(i!==void 0)return i}const r=this.Sl.tt(s,n,e/100);return this.Zu.Hc.set(e,r),r}Uc(e){return this.qu.indexOf(e)}Xi(){return this.Sl}$c(){return this.qc()}qc(e){const n=new I1(this.uh,this);this.qu.push(n);const s=e??this.qu.length-1,r=en.gn();return r.Qs(s,{tn:0,sn:!0}),this.rc(r),n}tc(e){return tn(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.qu.length,e))<this.qu.length?this.qu[e]:this.qc(e)}Fc(e){return this.qu.findIndex(n=>n.Oo().includes(e))}gc(e,n){const s=new en(n);if(e!==null){const r=this.qu.indexOf(e);s.Qs(r,{tn:n})}return s}hc(e,n){return n===void 0&&(n=2),this.gc(this.Hn(e),n)}rc(e){this.Gu&&this.Gu(e),this.qu.forEach(n=>n.i_().lr().yt())}Ec(e,n){const s=e.N().priceScaleId,r=s!==void 0?s:this.Oc();n.Gl(e,r),g0(r)||e.hr(e.N())}nc(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}zc(e){!e.Lo()&&e.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(e),1)}}function T5(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}function Lm(t){return!nl(t)&&!$u(t)}function M5(t){return nl(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(A1||(A1={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(R1||(R1={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(O1||(O1={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(L1||(L1={}));const j1=t=>t.getUTCFullYear();function BR(t,e,n){return e.replace(/yyyy/g,(s=>kr(j1(s),4))(t)).replace(/yy/g,(s=>kr(j1(s)%100,2))(t)).replace(/MMMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,n)).replace(/MMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,n)).replace(/MM/g,(s=>kr((r=>r.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>kr((r=>r.getUTCDate())(s),2))(t))}class I5{constructor(e="yyyy-MM-dd",n="default"){this.Yc=e,this.jc=n}__(e){return BR(e,this.Yc,this.jc)}}class $R{constructor(e){this.Kc=e||"%h:%m:%s"}__(e){return this.Kc.replace("%h",kr(e.getUTCHours(),2)).replace("%m",kr(e.getUTCMinutes(),2)).replace("%s",kr(e.getUTCSeconds(),2))}}const zR={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class UR{constructor(e={}){const n={...zR,...e};this.Qc=new I5(n.Xc,n.Jc),this.td=new $R(n.Zc),this.sd=n.Gc}__(e){return`${this.Qc.__(e)}${this.sd}${this.td.__(e)}`}}function Td(t){return 60*t*60*1e3}function Qp(t){return 60*t*1e3}const Md=[{nd:(F1=1,1e3*F1),ed:10},{nd:Qp(1),ed:20},{nd:Qp(5),ed:21},{nd:Qp(30),ed:22},{nd:Td(1),ed:30},{nd:Td(3),ed:31},{nd:Td(6),ed:32},{nd:Td(12),ed:33}];var F1;function B1(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=Md.length-1;n>=0;--n)if(Math.floor(e.getTime()/Md[n].nd)!==Math.floor(t.getTime()/Md[n].nd))return Md[n].ed;return 0}function Jp(t){let e=t;if($u(t)&&(e=Fb(t)),!Lm(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{rd:Math.round(n.getTime()/1e3),hd:e}}function $1(t){if(!M5(t))throw new Error("time must be of type isUTCTimestamp");return{rd:t}}function Fb(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function z1(t){$u(t.time)&&(t.time=Fb(t.time))}class U1{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(z1)}(e):z1(e)}createConverterToInternalObj(e){return fe(function(n){return n.length===0?null:Lm(n[0].time)||$u(n[0].time)?Jp:$1}(e))}key(e){return typeof e=="object"&&"rd"in e?e.rd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.hd===void 0?new Date(1e3*n.rd).getTime():new Date(Date.UTC(n.hd.year,n.hd.month-1,n.hd.day)).getTime()}convertHorzItemToInternal(e){return M5(n=e)?$1(n):Lm(n)?Jp(n):Jp(Fb(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new UR({Xc:n,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:e.locale}):this.ad=new I5(n,e.locale)}formatHorzItem(e){const n=e;return this.ad.__(new Date(1e3*n.rd))}formatTickmark(e,n){const s=function(i,o,a){switch(i){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),r=this.Ps.timeScale;if(r.tickMarkFormatter!==void 0){const i=r.tickMarkFormatter(e.originalTime,s,n.locale);if(i!==null)return i}return function(i,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=i.hd===void 0?new Date(1e3*i.rd):new Date(Date.UTC(i.hd.year,i.hd.month-1,i.hd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,s,n.locale)}maxTickMarkWeight(e){let n=e.reduce(LR,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(s,r=0){if(s.length===0)return;let i=r===0?null:s[r-1].time.rd,o=i!==null?new Date(1e3*i):null,a=0;for(let l=r;l<s.length;++l){const c=s[l],u=new Date(1e3*c.time.rd);o!==null&&(c.timeWeight=B1(u,o)),a+=c.time.rd-(i||c.time.rd),i=c.time.rd,o=u}if(r===0&&s.length>1){const l=Math.ceil(a/(s.length-1)),c=new Date(1e3*(s[0].time.rd-l));s[0].timeWeight=B1(new Date(1e3*s[0].time.rd),c)}})(e,n)}static ld(e){return Gn({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const rl=typeof window<"u";function W1(){return!!rl&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Zp(){return!!rl&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function jm(t){return t+t%2}function WR(t){rl&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class b0{constructor(e,n,s){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!Zp(),this.Ld=r=>{this.Od(r)},this.Nd=r=>{if(this.Fd(r)){const i=this.Wd(r);if(++this.dd,this.fd&&this.dd>1){const{Hd:o}=this.Ud($s(r),this.pd);o<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}}else{const i=this.Wd(r);if(++this.od,this._d&&this.od>1){const{Hd:o}=this.Ud($s(r),this.ud);o<5&&!this.bd&&this.Kd(i,this.Yd.Xd),this.Zd()}}},this.Gd=e,this.Yd=n,this.Ps=s,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(e){this.yd&&this.yd();const n=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",n)},this.Gd.addEventListener("mousemove",n),this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(e){if(this.Id||this.gd!==null||this.Fd(e))return;const n=this.Wd(e);this.Kd(n,this.Yd.nf),this.zd=!0}ef(e){const n=eg(e.changedTouches,fe(this.Ad));if(n===null||(this.Ed=Id(e),this.Rd!==null)||this.Bd)return;this.Vd=!0;const s=this.Ud($s(n),fe(this.gd)),{rf:r,hf:i,Hd:o}=s;if(this.Md||!(o<5)){if(!this.Md){const a=.5*r,l=i>=a&&!this.Ps.af(),c=a>i&&!this.Ps.lf();l||c||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const a=this.Wd(e,n);this.$d(a,this.Yd._f),Fo(e)}}}uf(e){if(e.button!==0)return;const n=this.Ud($s(e),fe(this.wd)),{Hd:s}=n;if(s>=5&&(this.bd=!0,this.Zd()),this.bd){const r=this.Wd(e);this.Kd(r,this.Yd.cf)}}Ud(e,n){const s=Math.abs(n._t-e._t),r=Math.abs(n.ut-e.ut);return{rf:s,hf:r,Hd:s+r}}df(e){let n=eg(e.changedTouches,fe(this.Ad));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Ad=null,this.Ed=Id(e),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const s=this.Wd(e,n);if(this.$d(s,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:r}=this.Ud($s(n),this.pd);r<30&&!this.Sd&&this.$d(s,this.Yd.qd),this.jd()}else this.Sd||(this.$d(s,this.Yd.pf),this.Yd.pf&&Fo(e));this.dd===0&&Fo(e),e.touches.length===0&&this.md&&(this.md=!1,Fo(e))}Od(e){if(e.button!==0)return;const n=this.Wd(e);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),W1()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(e))if(this.Kd(n,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:s}=this.Ud($s(e),this.ud);s<5&&!this.bd&&this.Kd(n,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(n,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(e){if(this.Ad!==null)return;const n=e.changedTouches[0];this.Ad=n.identifier,this.Ed=Id(e);const s=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=$s(n),this.Td&&(this.Td(),this.Td=null);{const i=this.ef.bind(this),o=this.df.bind(this);this.Td=()=>{s.removeEventListener("touchmove",i),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,e),240)}const r=this.Wd(e,n);this.$d(r,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=$s(n))}bf(e){if(e.button!==0)return;const n=this.Gd.ownerDocument.documentElement;W1()&&n.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=$s(e),this.kd&&(this.kd(),this.kd=null);{const r=this.uf.bind(this),i=this.Od.bind(this);this.kd=()=>{n.removeEventListener("mousemove",r),n.removeEventListener("mouseup",i)},n.addEventListener("mousemove",r),n.addEventListener("mouseup",i)}if(this.Id=!0,this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=$s(e))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const e=this.Gd.ownerDocument,n=s=>{this.Yd.xf&&(s.composed&&this.Gd.contains(s.composedPath()[0])||s.target&&this.Gd.contains(s.target)||this.Yd.xf())};this.Cd=()=>{e.removeEventListener("touchstart",n)},this.xd=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Zp()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),WR(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",()=>{},{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",e=>this.Rf(e.touches),{passive:!0}),this.Gd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const n=H1(e.touches[0],e.touches[1])/this.Dd;this.Yd.kf(this.Rd,n),Fo(e)}},{passive:!1}),this.Gd.addEventListener("touchend",e=>{this.Rf(e.touches)}))}Rf(e){e.length===1&&(this.Vd=!1),e.length!==2||this.Vd||this.md?this.Df():this.Vf(e)}Vf(e){const n=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Dd=H1(e[0],e[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(e){if(this.yd&&this.yd(),this.Fd(e)||!this.zd)return;const n=this.Wd(e);this.Kd(n,this.Yd.Bf),this.zd=!Zp()}gf(e){const n=eg(e.touches,fe(this.Ad));if(n===null)return;const s=this.Wd(e,n);this.$d(s,this.Yd.If),this.Sd=!0,this.md=!0}Fd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Id(e)<this.Ed+500}$d(e,n){n&&n.call(this.Yd,e)}Kd(e,n){n&&n.call(this.Yd,e)}Wd(e,n){const s=n||e,r=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-r.left,localY:s.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Ef:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Af:e.type,zf:s.target,a_:e.view,Lf:()=>{e.type!=="touchstart"&&Fo(e)}}}}function H1(t,e){const n=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(n*n+s*s)}function Fo(t){t.cancelable&&t.preventDefault()}function $s(t){return{_t:t.pageX,ut:t.pageY}}function Id(t){return t.timeStamp||performance.now()}function eg(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class HR{constructor(e,n,s){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=e,this.Uf=e.$f()[n],this.qf=e.$f()[s],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return mt({width:this.Uf.Gf().width,height:1})}Jf(){return mt({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(e,n,s){const r=this.Jf();e.fillStyle=this.Hf.N().layout.panes.separatorColor,e.fillRect(n,s,r.width,r.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.jf.appendChild(e);const s=document.createElement("div"),r=s.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.jf.appendChild(s);const i={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new b0(s,i,{af:()=>!1,lf:()=>!0}),this.Of={ip:s,tp:e}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(e){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(e){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(e){if(this.Of===null)return;const n=this.Uf.ap().Bo()+this.qf.ap().Bo(),s=n/(this.Uf.Gf().height+this.qf.Gf().height),r=30*s;n<=2*r||(this.Wf={lp:e.pageY,op:this.Uf.ap().Bo(),_p:n-r,up:n,cp:s,dp:r},this.Of.tp.style.display="block")}rp(e){const n=this.Wf;if(n===null)return;const s=(e.pageY-n.lp)*n.cp,r=Rc(n.op+s,n.dp,n._p);this.Uf.ap().Io(r),this.qf.ap().Io(n.up-r),this.Hf.Qt().Ih()}hp(e){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function tg(t,e){return t.fp-e.fp}function ng(t,e,n){const s=(t.fp-e.fp)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),n)}class VR{constructor(e,n,s,r){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=e,this.xp=n,this.Cp=s,this.Mn=r}Pp(e,n){if(this.pp!==null){if(this.pp.wt===n)return void(this.pp.fp=e);if(Math.abs(this.pp.fp-e)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:n,fp:e}}le(e,n){if(this.pp===null||this.vp===null||n-this.pp.wt>50)return;let s=0;const r=ng(this.pp,this.vp,this.xp),i=tg(this.pp,this.vp),o=[r],a=[i];if(s+=i,this.mp!==null){const c=ng(this.vp,this.mp,this.xp);if(Math.sign(c)===Math.sign(r)){const u=tg(this.vp,this.mp);if(o.push(c),a.push(u),s+=u,this.wp!==null){const d=ng(this.mp,this.wp,this.xp);if(Math.sign(d)===Math.sign(r)){const f=tg(this.mp,this.wp);o.push(d),a.push(f),s+=f}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/s*o[c];Math.abs(l)<this.Sp||(this.gp={fp:e,wt:n},this.bp=l,this.Mp=function(c,u){const d=Math.log(u);return Math.log(1*d/-c)/d}(Math.abs(l),this.Cp))}Du(e){const n=fe(this.gp),s=e-n.wt;return n.fp+this.bp*(Math.pow(this.Cp,s)-1)/Math.log(this.Cp)}Ru(e){return this.gp===null||this.yp(e)===this.Mp}yp(e){const n=e-fe(this.gp).wt;return Math.min(n,this.Mp)}}class YR{constructor(e,n){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=e,this.Vp=n,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function bo(t,e){const n=fe(t.ownerDocument).createElement("canvas");t.appendChild(n);const s=DA(n,{options:{allowResizeObserver:!0},transform:(r,i)=>({width:Math.max(r.width,i.width),height:Math.max(r.height,i.height)})});return s.resizeCanvasElement(e),s}function yo(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function Fm(t,e,n,s){t.ih&&t.ih(e,n,s)}function mh(t,e,n,s){t.nt(e,n,s)}function Bm(t,e,n,s){const r=t(n,s);for(const i of r){const o=i.Tt(s);o!==null&&e(o)}}function sg(t,e){return n=>{var s,r;return function(i){return i.Ft!==void 0}(n)?(((s=n.Ft())==null?void 0:s.ma())??"")!==e?[]:((r=n.ta)==null?void 0:r.call(n,t))??[]:[]}}function V1(t,e,n,s){if(!t.length)return;let r=0;const i=t[0].$t(s,!0);let o=e===1?n/2-(t[0].Fi()-i/2):t[0].Fi()-i/2-n/2;o=Math.max(0,o);for(let a=1;a<t.length;a++){const l=t[a],c=t[a-1],u=c.$t(s,!1),d=l.Fi(),f=c.Fi();if(e===1?d>f-u:d<f+u){const p=f-u*e;l.Wi(p);const m=p-e*u/2;if((e===1?m<0:m>n)&&o>0){const x=e===1?-1-m:m-n,v=Math.min(x,o);for(let g=r;g<t.length;g++)t[g].Wi(t[g].Fi()+e*v);o-=v}}else r=a,o=e===1?f-u-d:d-(f+u)}}class Y1{constructor(e,n,s,r){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new lf(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=e,this.Ps=n,this.Ml=n.layout,this.Ju=s,this.jp=r==="left",this.Kp=sg("normal",r),this.Xp=sg("top",r),this.Zp=sg("bottom",r),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=bo(this.jf,mt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=bo(this.jf,mt({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new b0(this.Jp.canvasElement,a,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),yo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),yo(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const e=this.Ju.N();return this.Wp!==e.k&&(this.Fp.Bn(),this.Wp=e.k),e}nv(){if(this.Yi===null)return 0;let e=0;const n=this.sv(),s=fe(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));s.save();const r=this.Yi.Da();s.font=this.ev(),r.length>0&&(e=Math.max(this.Fp.Vi(s,r[0].Za),this.Fp.Vi(s,r[r.length-1].Za)));const i=this.rv();for(let c=i.length;c--;){const u=this.Fp.Vi(s,i[c].ri());u>e&&(e=u)}const o=this.Yi.zt();if(o!==null&&this.Op!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Yi.Ts(1,o),u=this.Yi.Ts(this.Op.height-2,o);e=Math.max(e,this.Fp.Vi(s,this.Yi.Zi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Fp.Vi(s,this.Yi.Zi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;s.restore();const l=e||34;return jm(Math.ceil(n.S+n.C+n.B+n.I+5+l))}hv(e){this.Op!==null&&oo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`)}av(){return fe(this.Op).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=e,e.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const e=this.Pt.ap();this.Pt.qp().Qt().Zo(e,fe(this.Ft()))}lv(e){if(this.Op===null)return;const n={colorSpace:this.Pt.qp().N().layout.colorSpace};if(e!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const r=xo(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i)}),this.Pt.cv(r,this.Zp),this.dv(r),this.Pt.cv(r,this.Kp),this.fv(r))}this.Jp.applySuggestedBitmapSize();const s=xo(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.pv(s),this.Pt.cv(s,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}yt(){var e;(e=this.Yi)==null||e.Da()}ep(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!0,n.Uo(s,this.Yi,e.localY)}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap(),r=this.Yi;n.$o(s,r,e.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),n=this.Pt.ap(),s=this.Yi;this.Np&&(this.Np=!1,e.qo(n,s))}hp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!1,n.qo(s,this.Yi)}tv(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(e){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(e){this.vv(0)}rv(){const e=[],n=this.Yi===null?void 0:this.Yi;return(s=>{for(let r=0;r<s.length;++r){const i=s[r].Ws(this.Pt.ap(),n);for(let o=0;o<i.length;o++)e.push(i[o])}})(this.Pt.ap().Dt()),e}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.Pt.ap().Qt(),o=i.$(),a=i.Wc();o===a?f0(e,0,0,s,r,o):m5(e,0,0,s,r,o,a)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const r=Math.max(1,Math.floor(this.sv().S*s));let i;i=this.jp?n.width-r:0,e.fillRect(i,0,r,n.height)}dv(e){if(this.Op===null||this.Yi===null)return;const n=this.Yi.Da(),s=this.Yi.N(),r=this.sv(),i=this.jp?this.Op.width-r.C:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=s.borderColor;const c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),d=Math.round(r.C*a);o.beginPath();for(const f of n)o.rect(Math.floor(i*a),Math.round(f.Pa*l)-u,d,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.ev(),o.fillStyle=s.textColor??this.Ml.textColor,o.textAlign=this.jp?"right":"left",o.textBaseline="middle";const a=this.jp?Math.round(i-r.B):Math.round(i+r.C+r.B),l=n.map(c=>this.Fp.Di(o,c.Za));for(let c=n.length;c--;){const u=n[c];o.fillText(u.Za,a,u.Pa+l[c])}})}ov(){if(this.Op===null||this.Yi===null)return;let e=this.Op.height/2;const n=[],s=this.Yi.Dt().slice(),r=this.Pt.ap(),i=this.sv();this.Yi===r.$n()&&this.Pt.ap().Dt().forEach(l=>{r.Un(l)&&s.push(l)});const o=this.Yi.Ma()[0],a=this.Yi;s.forEach(l=>{const c=l.Ws(r,a);c.forEach(u=>{u.Wi(null),u.Hi()&&n.push(u)}),o===l&&c.length>0&&(e=c[0].Ii())}),n.forEach(l=>l.Wi(l.Ii())),this.Yi.N().alignLabels&&this.mv(n,i,e)}mv(e,n,s){if(this.Op===null)return;const r=e.filter(o=>o.Ii()<=s),i=e.filter(o=>o.Ii()>s);r.sort((o,a)=>a.Ii()-o.Ii()),r.length&&i.length&&i.push(r[0]),i.sort((o,a)=>o.Ii()-a.Ii());for(const o of e){const a=Math.floor(o.$t(n)/2),l=o.Ii();l>-a&&l<a&&o.Wi(a),l>this.Op.height-a&&l<this.Op.height+a&&o.Wi(this.Op.height-a)}V1(r,1,this.Op.height,n),V1(i,-1,this.Op.height,n)}fv(e){if(this.Op===null)return;const n=this.rv(),s=this.sv(),r=this.jp?"right":"left";n.forEach(i=>{i.Ui()&&i.Tt(fe(this.Yi)).nt(e,s,this.Fp,r)})}pv(e){if(this.Op===null||this.Yi===null)return;const n=this.Pt.qp().Qt(),s=[],r=this.Pt.ap(),i=n.uc().Ws(r,this.Yi);i.length&&s.push(i);const o=this.sv(),a=this.jp?"right":"left";s.forEach(l=>{l.forEach(c=>{c.Tt(fe(this.Yi)).nt(e,o,this.Fp,a)})})}vv(e){this.jf.style.cursor=e===1?"ns-resize":"default"}_l(){const e=this.nv();this.Hp<e&&this.Pt.qp().Qt().Ih(),this.Hp=e}ev(){return af(this.Ml.fontSize,this.Ml.fontFamily)}}function GR(t,e){var n;return((n=t.Jh)==null?void 0:n.call(t,e))??[]}function G1(t,e){var n;return((n=t.Fs)==null?void 0:n.call(t,e))??[]}function q1(t,e){var n;return((n=t.us)==null?void 0:n.call(t,e))??[]}function qR(t,e){var n;return((n=t.Xh)==null?void 0:n.call(t,e))??[]}class Bb{constructor(e,n){this.Op=mt({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new $t,this.Cv=new $t,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=e,this.Vv=n,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(s),this.Gp=bo(s,mt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jp=bo(s,mt({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const i=this.Jp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new b0(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),yo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),yo(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return fe(this.Vv)}Lv(e){var n;this.Vv!==null&&this.Vv.t_().u(this),this.Vv=e,this.Vv!==null&&this.Vv.t_().i(Bb.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new YR(this.Iv,this.Vp),this.Mv.yt()):((n=this.Mv)==null||n.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const e=this.Vv.Wo();this.wv._s(fe(e))}if(this.gv!==null){const e=this.Vv.Ho();this.gv._s(fe(e))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(e){this.Vv&&this.Vv.Io(e)}sf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}Sf(e){this.Fv(),this.Hv(),this.Wv(e.localX,e.localY,e)}nf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}mf(e){this.Vv!==null&&(this.Fv(),this.Uv(e))}Xd(e){this.Vv!==null&&this.$v(this.Cv,e)}qd(e){this.Xd(e)}cf(e){this.Fv(),this.qv(e),this.Wv(e.localX,e.localY,e)}vf(e){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(e))}pf(e){this.Vv!==null&&this.Uv(e)}If(e){if(this.yv=!0,this.kv===null){const n={x:e.localX,y:e.localY};this.jv(n,n,e)}}Bf(e){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(e,n){if(!this.Vp.N().handleScale.pinch)return;const s=5*(n-this.Pv);this.Pv=n,this.ts().bc(e._t,s)}Mf(e){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const n=this.ts().uc();this.kv!==null&&n.Vt()&&(this.Rv={x:n.si(),y:n.ni()},this.kv={x:e.localX,y:e.localY})}_f(e){if(this.Vv===null)return;const n=e.localX,s=e.localY;if(this.kv===null)this.qv(e);else{this.Tv=!1;const r=fe(this.Rv),i=r.x+(n-this.kv.x),o=r.y+(s-this.kv.y);this.Wv(i,o,e)}}ff(e){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(e)}jn(e,n){const s=this.Vv;return s===null?null:P5(s,e,n)}Jv(e,n){fe(n==="left"?this.wv:this.gv).hv(mt({width:e,height:this.Op.height}))}Gf(){return this.Op}hv(e){oo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Qv(){const e=fe(this.Vv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const n of e.Ma())if(e.Un(n)){const s=n.Ft();s!==null&&e.Fo(s),n.Ns()}for(const n of e.s_())n.Ns()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e!==null&&e.drawImage(o,n,s)}}lv(e){if(e===0||this.Vv===null)return;e>1&&this.Qv(),this.wv!==null&&this.wv.lv(e),this.gv!==null&&this.gv.lv(e);const n={colorSpace:this.Vp.N().layout.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=xo(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i)}),this.Vv&&(this.tm(r,GR),this.im(r),this.tm(r,G1),this.tm(r,q1)))}this.Jp.applySuggestedBitmapSize();const s=xo(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.sm(s),this.tm(s,qR),this.tm(s,q1))}nm(){return this.wv}rm(){return this.gv}cv(e,n){this.tm(e,n)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(e){this.$v(this.xv,e)}$v(e,n){const s=n.localX,r=n.localY;e.v()&&e.p(this.ts().Et().cu(s),{x:s,y:r},n)}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.ts(),o=i.$(),a=i.Wc();o===a?f0(e,0,0,s,r,a):m5(e,0,0,s,r,o,a)}im(e){const n=fe(this.Vv),s=n.i_().lr().Tt(n);s!==null&&s.nt(e,!1)}sm(e){this.hm(e,G1,mh,this.ts().uc())}tm(e,n){const s=fe(this.Vv),r=s.Dt(),i=s.s_();for(const o of i)this.hm(e,n,Fm,o);for(const o of r)this.hm(e,n,Fm,o);for(const o of i)this.hm(e,n,mh,o);for(const o of r)this.hm(e,n,mh,o)}hm(e,n,s,r){const i=fe(this.Vv),o=i.Qt().ac(),a=o!==null&&o.n_===r,l=o!==null&&a&&o.e_!==void 0?o.e_.Xn:void 0;Bm(n,c=>s(c,e,a,l),r,i)}Ov(){if(this.Vv===null)return;const e=this.Vp,n=this.Vv.Wo().N().visible,s=this.Vv.Ho().N().visible;n||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),s||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const r=e.Qt().Bc();n&&this.wv===null&&(this.wv=new Y1(this,e.N(),r,"left"),this.Ev.appendChild(this.wv.Zf())),s&&this.gv===null&&(this.gv=new Y1(this,e.N(),r,"right"),this.Av.appendChild(this.gv.Zf()))}am(e){return e.Ef&&this.yv||this.kv!==null}lm(e){return Math.max(0,Math.min(e,this.Op.width-1))}om(e){return Math.max(0,Math.min(e,this.Op.height-1))}Wv(e,n,s){this.ts().Tc(this.lm(e),this.om(n),s,fe(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(e,n,s){this.kv=e,this.Tv=!1,this.Wv(n.x,n.y,s);const r=this.ts().uc();this.Rv={x:r.si(),y:r.ni()}}ts(){return this.Vp.Qt()}Yv(e){if(!this.Sv)return;const n=this.ts(),s=this.ap();if(n.Ko(s,s.ks()),this.bv=null,this.Sv=!1,n.Pc(),this.Dv!==null){const r=performance.now(),i=n.Et();this.Dv.le(i.gu(),r),this.Dv.Ru(r)||n._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)fe(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(e){if(this.Vv===null)return;const n=this.ts(),s=n.Et();if(s.Ki())return;const r=this.Vp.N(),i=r.handleScroll,o=r.kineticScroll;if((!i.pressedMouseMove||e.Ef)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Ef))return;const a=this.Vv.ks(),l=performance.now();if(this.bv!==null||this.am(e)||(this.bv={x:e.clientX,y:e.clientY,rd:l,_m:e.localX,um:e.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==e.clientX||this.bv.y!==e.clientY)){if(e.Ef&&o.touch||!e.Ef&&o.mouse){const c=s.mu();this.Dv=new VR(.2/c,7/c,.997,15/c),this.Dv.Pp(s.gu(),this.bv.rd)}else this.Dv=null;a.Ki()||n.Yo(this.Vv,a,e.localY),n.xc(e.localX),this.Sv=!0}this.Sv&&(a.Ki()||n.jo(this.Vv,a,e.localY),n.Cc(e.localX),this.Dv!==null&&this.Dv.Pp(s.gu(),l))}}class K1{constructor(e,n,s,r,i){this.xt=!0,this.Op=mt({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=e==="left",this.Ju=s.Bc,this.Ps=n,this.dm=r,this.fm=i,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=bo(this.jf,mt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),yo(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(e){oo(this.Op,e)||(this.Op=e,this.Gp.resizeCanvasElement(e),this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.xt=!0)}lv(e){if(e<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const n=xo(this.Gp,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(s=>{this._v(s),this.uv(s)})}Jf(){return this.Gp.bitmapSize}Qf(e,n,s){const r=this.Jf();r.width>0&&r.height>0&&e.drawImage(this.Gp.canvasElement,n,s)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(!this.dm())return;e.fillStyle=this.Ps.timeScale.borderColor;const i=Math.floor(this.Ju.N().S*s),o=Math.floor(this.Ju.N().S*r),a=this.jp?n.width-i:0;e.fillRect(a,0,i,o)}_v({context:e,bitmapSize:n}){f0(e,0,0,n.width,n.height,this.fm())}}function $b(t){return e=>{var n;return((n=e.ia)==null?void 0:n.call(e,t))??[]}}const KR=$b("normal"),XR=$b("top"),QR=$b("bottom");class JR{constructor(e,n){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=mt({width:0,height:0}),this.gm=new $t,this.Fp=new lf(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=e,this.o_=n,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=bo(this.Sm,mt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jp=bo(this.Sm,mt({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const r=this.Jp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new b0(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),yo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),yo(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(e){if(this.wm)return;this.wm=!0;const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.Mc(e.localX)}Mf(e){this.Sf(e)}xf(){const e=this.Vp.Qt();!e.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&e.kc())}cf(e){const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.yc(e.localX)}_f(e){this.cf(e)}vf(){this.wm=!1;const e=this.Vp.Qt();e.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||e.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(e,n,s){oo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.gm.p(e)),this.pm!==null&&this.pm.hv(mt({width:n,height:e.height})),this.vm!==null&&this.vm.hv(mt({width:s,height:e.height}))}Tm(){const e=this.Rm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}lv(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=xo(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i),this.Vm(r,QR)}),this.dv(r),this.Vm(r,KR)),this.pm!==null&&this.pm.lv(e),this.vm!==null&&this.vm.lv(e)}this.Jp.applySuggestedBitmapSize();const s=xo(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],s),this.Vm(s,XR))}Vm(e,n){const s=this.Vp.Qt().js();for(const r of s)Bm(n,i=>Fm(i,e,!1,void 0),r,void 0);for(const r of s)Bm(n,i=>mh(i,e,!1,void 0),r,void 0)}_v({context:e,bitmapSize:n}){f0(e,0,0,n.width,n.height,this.Vp.Qt().Wc())}uv({context:e,bitmapSize:n,verticalPixelRatio:s}){if(this.Vp.N().timeScale.borderVisible){e.fillStyle=this.Im();const r=Math.max(1,Math.floor(this.Rm().S*s));e.fillRect(0,0,n.width,r)}}dv(e){const n=this.Vp.Qt().Et(),s=n.Da();if(!s||s.length===0)return;const r=this.o_.maxTickMarkWeight(s),i=this.Rm(),o=n.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.Im(),a.fillStyle=this.Im();const u=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();const f=Math.round(i.C*c);for(let p=s.length;p--;){const m=Math.round(s[p].coord*l);a.rect(m-d,0,u,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=i.S+i.C+i.A+i.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.ev();for(const c of s)if(c.weight<r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.Vp.N().timeScale.allowBoldLabels&&(a.font=this.Am());for(const c of s)if(c.weight>=r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Em(e,n,s){const r=this.Fp.Vi(e,s),i=r/2,o=Math.floor(n-i)+.5;return o<0?n+=Math.abs(0-o):o+r>this.Op.width&&(n-=Math.abs(this.Op.width-(o+r))),n}Bm(e,n){const s=this.Rm();for(const r of e)for(const i of r.cs())i.Tt().nt(n,s)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return af(this.F(),this.Ps.fontFamily)}Am(){return af(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new lf,Dm:0});const e=this.M,n=this.ev();if(e.k!==n){const s=this.F();e.P=s,e.k=n,e.A=3*s/12,e.V=3*s/12,e.Ji=9*s/12,e.L=0,e.Dm=4*s/12,e.Gi.Bn()}return this.M}vv(e){this.jf.style.cursor=e===1?"ew-resize":"default"}xm(){const e=this.Vp.Qt(),n=e.N();n.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),n.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const s={Bc:this.Vp.Qt().Bc()},r=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,i=()=>e.Wc();n.leftPriceScale.visible&&this.pm===null&&(this.pm=new K1("left",n,s,r,i),this.Mm.appendChild(this.pm.Zf())),n.rightPriceScale.visible&&this.vm===null&&(this.vm=new K1("right",n,s,r,i),this.bm.appendChild(this.vm.Zf()))}}var E2;const ZR=!!rl&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!rl&&((E2=navigator==null?void 0:navigator.userAgentData)!=null&&E2.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class eO{constructor(e,n,s){var r;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new $t,this.Cv=new $t,this.Xu=new $t,this.Um=null,this.$m=null,this.Dp=e,this.Ps=n,this.o_=s,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(r=this.kp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),rg(this.Ps)&&this.Km(!0),this.ts=new FR(this.Gu.bind(this),this.Ps,s),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new JR(this,this.o_),this.qm.appendChild(this.Zm.Zf());const i=n.autoSize&&this.Gm();let o=this.Ps.width,a=this.Ps.height;if(i||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Jm(o,a),this.Qm(),e.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.zm)this.qm.removeChild(e.Zf()),e.Xv().u(this),e.Zv().u(this),e.m();this.zm=[];for(const e of this.Lm)this.sw(e);this.Lm=[],fe(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(e,n,s=!1){if(this.il===n&&this.Mo===e)return;const r=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return mt({width:l-l%2,height:c-c%2})}(mt({width:e,height:n}));this.il=r.height,this.Mo=r.width;const i=this.il+"px",o=this.Mo+"px";fe(this.kp).style.height=i,fe(this.kp).style.width=o,this.qm.style.height=i,this.qm.style.width=o,s?this.ew(en.gn(),performance.now()):this.ts.Ih()}lv(e){e===void 0&&(e=en.gn());for(let n=0;n<this.zm.length;n++)this.zm[n].lv(e.en(n).tn);this.Ps.timeScale.visible&&this.Zm.lv(e.nn())}hr(e){var r;const n=rg(this.Ps);this.ts.hr(e);const s=rg(this.Ps);s!==n&&this.Km(s),(r=e.layout)!=null&&r.panes&&this.rw(),this.tw(),this.hw(e)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(e=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const n=this.lw(null),s=document.createElement("canvas");s.width=n.width,s.height=n.height;const r=fe(s.getContext("2d"));return this.lw(r,e),s}ow(e){return e==="left"&&!this._w()||e==="right"&&!this.uw()||this.zm.length===0?0:fe(e==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(e){this.$m=e,this.$m?this.ip().style.setProperty("cursor",e):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(e){return Fn(this.zm[e]).Gf()}rw(){this.Lm.forEach(e=>{e.yt()})}hw(e){(e.autoSize!==void 0||!this.Um||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Um&&this.Gm(),e.autoSize===!1&&this.Um!==null&&this.nw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Jm(e.width||this.Mo,e.height||this.il))}lw(e,n){let s=0,r=0;const i=this.zm[0],o=(l,c)=>{let u=0;for(let d=0;d<this.zm.length;d++){const f=this.zm[d],p=fe(l==="left"?f.nm():f.rm()),m=p.Jf();if(e!==null&&p.Qf(e,c,u,n),u+=m.height,d<this.zm.length-1){const x=this.Lm[d],v=x.Jf();e!==null&&x.Qf(e,c,u),u+=v.height}}};this._w()&&(o("left",0),s+=fe(i.nm()).Jf().width);for(let l=0;l<this.zm.length;l++){const c=this.zm[l],u=c.Jf();if(e!==null&&c.Qf(e,s,r,n),r+=u.height,l<this.zm.length-1){const d=this.Lm[l],f=d.Jf();e!==null&&d.Qf(e,s,r),r+=f.height}}s+=i.Jf().width,this.uw()&&(o("right",s),s+=fe(i.rm()).Jf().width);const a=(l,c,u)=>{fe(l==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(fe(e),c,u)};if(this.Ps.timeScale.visible){const l=this.Zm.Jf();if(e!==null){let c=0;this._w()&&(a("left",c,r),c=fe(i.nm()).Jf().width),this.Zm.Qf(e,c,r,n),c+=l.width,this.uw()&&a("right",c,r)}r+=l.height}return mt({width:s,height:r})}mw(){let e=0,n=0,s=0;for(const v of this.zm)this._w()&&(n=Math.max(n,fe(v.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(s=Math.max(s,fe(v.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),e+=v.Bo();n=jm(n),s=jm(s);const r=this.Mo,i=this.il,o=Math.max(r-n-s,0),a=1*this.Lm.length,l=this.Ps.timeScale.visible;let c=l?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const d=a+c,f=i<d?0:i-d,p=f/e;let m=0;const x=window.devicePixelRatio||1;for(let v=0;v<this.zm.length;++v){const g=this.zm[v];g.Lv(this.ts.$s()[v]);let b=0,w=0;w=v===this.zm.length-1?Math.ceil((f-m)*x)/x:Math.round(g.Bo()*p*x)/x,b=Math.max(w,2),m+=b,g.hv(mt({width:o,height:b})),this._w()&&g.Jv(n,"left"),this.uw()&&g.Jv(s,"right"),g.ap()&&this.ts.dc(g.ap(),b)}this.Zm.km(mt({width:l?o:0,height:c}),l?n:0,l?s:0),this.ts.Eo(o),this.Nm!==n&&(this.Nm=n),this.Fm!==s&&(this.Fm=s)}Km(e){e?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return ZR?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.ww(e),s=n*e.deltaX/100,r=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.Ps.handleScale.mouseWheel){const i=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(o,i)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*s)}ew(e,n){var r;const s=e.nn();s===3&&this.gw(),s!==3&&s!==2||(this.Mw(e),this.bw(e,n),this.Zm.yt(),this.zm.forEach(i=>{i.Nv()}),((r=this.Wm)==null?void 0:r.nn())===3&&(this.Wm.vn(e),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,n),e=this.Wm,this.Wm=null)),this.lv(e)}bw(e,n){for(const s of e.pn())this.mn(s,n)}Mw(e){const n=this.ts.$s();for(let s=0;s<n.length;s++)e.en(s).sn&&n[s].Go()}mn(e,n){const s=this.ts.Et();switch(e.an){case 0:s.Au();break;case 1:s.zu(e.Wt);break;case 2:s.dn(e.Wt);break;case 3:s.fn(e.Wt);break;case 4:s.Su();break;case 5:e.Wt.Ru(n)||s.fn(e.Wt.Du(n))}}Gu(e){this.Wm!==null?this.Wm.vn(e):this.Wm=e,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame(n=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const s=this.Wm;this.Wm=null,this.ew(s,n);for(const r of s.pn())if(r.an===5&&!r.Wt.Ru(n)){this.Qt()._n(r.Wt);break}}}))}gw(){this.Qm()}sw(e){this.qm.removeChild(e.Zf()),e.m()}Qm(){const e=this.ts.$s(),n=e.length,s=this.zm.length;for(let r=n;r<s;r++){const i=Fn(this.zm.pop());this.qm.removeChild(i.Zf()),i.Xv().u(this),i.Zv().u(this),i.m();const o=this.Lm.pop();o!==void 0&&this.sw(o)}for(let r=s;r<n;r++){const i=new Bb(this,e[r]);if(i.Xv().i(this.Sw.bind(this,i),this),i.Zv().i(this.xw.bind(this,i),this),this.zm.push(i),r>0){const o=new HR(this,r-1,r);this.Lm.push(o),this.qm.insertBefore(o.Zf(),this.Zm.Zf())}this.qm.insertBefore(i.Zf(),this.Zm.Zf())}for(let r=0;r<n;r++){const i=e[r],o=this.zm[r];o.ap()!==i?o.Lv(i):o.zv()}this.tw(),this.mw()}Cw(e,n,s,r){var d;const i=new Map;e!==null&&this.ts.js().forEach(f=>{const p=f.Xs().Fr(e);p!==null&&i.set(f,p)});let o;if(e!==null){const f=(d=this.ts.Et().ss(e))==null?void 0:d.originalTime;f!==void 0&&(o=f)}const a=this.Qt().ac(),l=a!==null&&a.n_ instanceof x0?a.n_:void 0,c=a!==null&&a.e_!==void 0?a.e_.Kn:void 0,u=this.Pw(r);return{yw:o,Re:e??void 0,kw:n??void 0,Tw:u!==-1?u:void 0,Rw:l,Dw:i,Vw:c,Bw:s??void 0}}Pw(e){let n=-1;if(e)n=this.zm.indexOf(e);else{const s=this.Qt().uc().Us();s!==null&&(n=this.Qt().$s().indexOf(s))}return n}Sw(e,n,s,r){this.xv.p(()=>this.Cw(n,s,r,e))}xw(e,n,s,r){this.Cv.p(()=>this.Cw(n,s,r,e))}Xm(e,n,s){var r;this.dw(((r=this.Qt().ac())==null?void 0:r.h_)??null),this.Xu.p(()=>this.Cw(e,n,s))}tw(){const e=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=e}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.Jm(n.contentRect.width,n.contentRect.height)}),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function rg(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function tO(t){return t.open===void 0&&t.value===void 0}function nO(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function X1(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.color!==void 0&&(i.R=n.color),i}function sO(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.lineColor!==void 0&&(i.vt=n.lineColor),n.topColor!==void 0&&(i.mr=n.topColor),n.bottomColor!==void 0&&(i.wr=n.bottomColor),i}function rO(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.topLineColor!==void 0&&(i.gr=n.topLineColor),n.bottomLineColor!==void 0&&(i.Mr=n.bottomLineColor),n.topFillColor1!==void 0&&(i.br=n.topFillColor1),n.topFillColor2!==void 0&&(i.Sr=n.topFillColor2),n.bottomFillColor1!==void 0&&(i.Cr=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(i.Pr=n.bottomFillColor2),i}function iO(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),r}function oO(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),n.borderColor!==void 0&&(r.Ht=n.borderColor),n.wickColor!==void 0&&(r.vr=n.wickColor),r}function aO(t,e,n,s,r){const i=Fn(r)(n),o=Math.max(...i),a=Math.min(...i),l=i[i.length-1],c=[l,o,a,l],{time:u,color:d,...f}=n;return{Re:e,wt:t,Wt:c,yw:s,se:f,R:d}}function Gl(t){return t.Wt!==void 0}function Q1(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function Ni(t){return(e,n,s,r,i,o)=>function(a,l){return l?l(a):tO(a)}(s,o)?Q1({wt:e,Re:n,yw:r},s):Q1(t(e,n,s,r,i),s)}function J1(t){return{Candlestick:Ni(oO),Bar:Ni(iO),Area:Ni(sO),Baseline:Ni(rO),Histogram:Ni(X1),Line:Ni(X1),Custom:Ni(aO)}[t]}function Z1(t){return{Re:0,Ew:new Map,Hh:t}}function eS(t,e){if(t!==void 0&&t.length!==0)return{Aw:e.key(t[0].wt),zw:e.key(t[t.length-1].wt)}}function tS(t){let e;return t.forEach(n=>{e===void 0&&(e=n.yw)}),Fn(e)}class lO{constructor(e){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=e}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(e,n){let s=this.Lw.size!==0,r=!1;const i=this.Ow.get(e);if(i!==void 0)if(this.Ow.size===1)s=!1,r=!0,this.Lw.clear();else for(const l of this.Fw)l.pointData.Ew.delete(e)&&(r=!0);let o=[];if(n.length!==0){const l=n.map(p=>p.time),c=this.o_.createConverterToInternalObj(n),u=J1(e.Rr()),d=e.ca(),f=e.fa();o=n.map((p,m)=>{const x=c(p.time),v=this.o_.key(x);let g=this.Lw.get(v);g===void 0&&(g=Z1(x),this.Lw.set(v,g),r=!0);const b=u(x,g.Re,p,l[m],d,f);return g.Ew.set(e,b),b})}s&&this.Hw(),this.Uw(e,o);let a=-1;if(r){const l=[];this.Lw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:tS(c.Ew)})}),l.sort((c,u)=>this.o_.key(c.time)-this.o_.key(u.time)),a=this.$w(l)}return this.qw(e,a,function(l,c,u){const d=eS(l,u),f=eS(c,u);if(d!==void 0&&f!==void 0)return{Yw:!1,zh:d.zw>=f.zw&&d.Aw>=f.Aw}}(this.Ow.get(e),i,this.o_))}Ac(e){return this.Ww(e,[])}jw(e,n,s){const r=n;(function(v){v.yw===void 0&&(v.yw=v.time)})(r),this.o_.preprocessData(n);const i=this.o_.createConverterToInternalObj([n])(n.time),o=this.Nw.get(e);if(!s&&o!==void 0&&this.o_.key(i)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${i}`);let a=this.Lw.get(this.o_.key(i));if(s&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=a===void 0;a===void 0&&(a=Z1(i),this.Lw.set(this.o_.key(i),a));const c=J1(e.Rr()),u=e.ca(),d=e.fa(),f=c(i,a.Re,n,r.yw,u,d);a.Ew.set(e,f),s?this.Kw(e,f,a.Re):this.Xw(e,f);const p={zh:Gl(f),Yw:s};if(!l)return this.qw(e,-1,p);const m={timeWeight:0,time:a.Hh,pointData:a,originalTime:tS(a.Ew)},x=sl(this.Fw,this.o_.key(m.time),(v,g)=>this.o_.key(v.time)<g);this.Fw.splice(x,0,m);for(let v=x;v<this.Fw.length;++v)Dd(this.Fw[v].pointData,v);return this.o_.fillWeightsForPoints(this.Fw,x),this.qw(e,x,p)}Zw(e,n){const s=this.Ow.get(e);if(s===void 0||n<=0)return[[],this.Gw()];n=Math.min(n,s.length);const r=s.splice(-n).reverse();s.length===0?this.Nw.delete(e):this.Nw.set(e,s[s.length-1].wt);for(const i of r){const o=this.Lw.get(this.o_.key(i.wt));if(o&&(o.Ew.delete(e),o.Ew.size===0)){this.Lw.delete(this.o_.key(o.Hh)),this.Fw.splice(o.Re,1);for(let a=o.Re;a<this.Fw.length;++a)Dd(this.Fw[a].pointData,a)}}return[r,this.qw(e,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(e,n){let s=this.Ow.get(e);s===void 0&&(s=[],this.Ow.set(e,s));const r=s.length!==0?s[s.length-1]:null;r===null||this.o_.key(n.wt)>this.o_.key(r.wt)?Gl(n)&&s.push(n):Gl(n)?s[s.length-1]=n:s.splice(-1,1),this.Nw.set(e,n.wt)}Kw(e,n,s){const r=this.Ow.get(e);if(r===void 0)return;const i=sl(r,s,(o,a)=>o.Re<a);Gl(n)?r[i]=n:r.splice(i,1)}Uw(e,n){n.length!==0?(this.Ow.set(e,n.filter(Gl)),this.Nw.set(e,n[n.length-1].wt)):(this.Ow.delete(e),this.Nw.delete(e))}Hw(){for(const e of this.Fw)e.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(e.time))}$w(e){let n=-1;for(let s=0;s<this.Fw.length&&s<e.length;++s){const r=this.Fw[s],i=e[s];if(this.o_.key(r.time)!==this.o_.key(i.time)){n=s;break}i.timeWeight=r.timeWeight,Dd(i.pointData,s)}if(n===-1&&this.Fw.length!==e.length&&(n=Math.min(this.Fw.length,e.length)),n===-1)return-1;for(let s=n;s<e.length;++s)Dd(e[s].pointData,s);return this.o_.fillWeightsForPoints(e,n),this.Fw=e,n}Jw(){if(this.Ow.size===0)return null;let e=0;return this.Ow.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].Re))}),e}qw(e,n,s){const r=this.Gw();if(n!==-1)this.Ow.forEach((i,o)=>{r.Oo.set(o,{se:i,Qw:o===e?s:void 0})}),this.Ow.has(e)||r.Oo.set(e,{se:[],Qw:s}),r.Et.tg=this.Fw,r.Et.ig=n;else{const i=this.Ow.get(e);r.Oo.set(e,{se:i||[],Qw:s})}return r}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function Dd(t,e){t.Re=e,t.Ew.forEach(n=>{n.Re=e})}function cO(t,e){return t.wt<e}function uO(t,e){return e<t.wt}function dO(t,e,n){const s=e.Uh(),r=e.bi(),i=sl(t,s,cO),o=k5(t,r,uO);if(!n)return{from:i,to:o};let a=i,l=o;return i>0&&i<t.length&&t[i].wt>=s&&(a=i-1),o>0&&o<t.length&&t[o-1].wt<=r&&(l=o+1),{from:a,to:l}}class hO{constructor(e,n,s){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=e,this.Qn=n,this.ag=s}yt(e){this.sg=!0,e==="data"&&(this.ng=!0),e==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const e=this.Jn.Ft(),n=this.Qn.Et();if(this.ug(),n.Ki()||e.Ki())return;const s=n.Pe();if(s===null||this.Jn.Xs().zr()===0)return;const r=this.Jn.zt();r!==null&&(this.hg=dO(this.rg,s,this.ag),this.fg(e,n,r.Wt),this.pg())}}class fO{constructor(e,n){this.vg=e,this.Yi=n}nt(e,n,s){this.vg.draw(e,this.Yi,n,s)}}class pO extends hO{constructor(e,n,s){super(e,n,!1),this.sh=s,this.og=new fO(this.sh.renderer(),r=>{const i=e.zt();return i===null?null:e.Ft().Nt(r,i.Wt)})}da(e){return this.sh.priceValueBuilder(e)}pa(e){return this.sh.isWhitespace(e)}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(n=>({wt:n.Re,_t:NaN,...e.Dr(n.Re),mg:n.se}))}fg(e,n){n.uu(this.rg,LA(this.hg))}pg(){this.sh.update({bars:this.rg.map(gO),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function gO(t){return{x:t._t,time:t.wt,originalData:t.mg,barColor:t.cr}}const mO={color:"#2196f3"},xO=(t,e,n)=>{const s=oi(n);return new pO(t,e,s)};function zb(t){const e={value:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function nS(t){const e=zb(t);return t.R!==void 0&&(e.color=t.R),e}function bO(t){const e=zb(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function yO(t){const e=zb(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function D5(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function wO(t){const e=D5(t);return t.R!==void 0&&(e.color=t.R),e}function vO(t){const e=D5(t),{R:n,Ht:s,vr:r}=t;return n!==void 0&&(e.color=n),s!==void 0&&(e.borderColor=s),r!==void 0&&(e.wickColor=r),e}function xh(t){return{Area:bO,Line:nS,Baseline:yO,Histogram:nS,Bar:wO,Candlestick:vO,Custom:SO}[t]}function SO(t){const e=t.yw;return{...t.se,time:e}}const kO={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},_O={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},CO={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:g5,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},ig={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},EO={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function sS(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:CO,crosshair:kO,grid:_O,overlayPriceScales:{...ig},leftPriceScale:{...ig,visible:!1},rightPriceScale:{...ig,visible:!0},timeScale:EO,localization:{locale:rl?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class N5{constructor(e,n,s){this.Hf=e,this.wg=n,this.gg=s??0}applyOptions(e){this.Hf.Qt().oc(this.wg,e,this.gg)}options(){return this.Yi().N()}width(){return g0(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Fl(new Sn(e.from,e.to))}getVisibleRange(){let e,n,s=this.Yi().Qe();if(s===null)return null;if(this.Yi().Ja()){const r=this.Yi().fo(),i=T5(r);s=ra(s,this.Yi().tl()),e=Number((Math.round(s.$e()/r)*r).toFixed(i)),n=Number((Math.round(s.qe()/r)*r).toFixed(i))}else e=s.$e(),n=s.qe();return{from:e,to:n}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return fe(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class PO{constructor(e,n,s,r){this.Hf=e,this.Pt=s,this.Mg=n,this.bg=r}getHeight(){return this.Pt.$t()}setHeight(e){const n=this.Hf.Qt(),s=n.Uc(this.Pt);n.vc(s,e)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(e){this.Pt.Io(e),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(e){const n=this.paneIndex();n!==e&&(tn(e>=0&&e<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(n,e))}getSeries(){return this.Pt.Oo().map(e=>this.Mg(e))??[]}getHTMLElement(){const e=this.Hf.$f();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Zf():null}attachPrimitive(e){this.Pt._a(e),e.attached&&e.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(e){this.Pt.ua(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new N5(this.Hf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,n={},s=0){return this.bg.addCustomSeries(e,n,s)}addSeries(e,n={}){return this.bg.addSeries(e,n,this.paneIndex())}}const TO={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class rS{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}Sg(){return this.ir}}class MO{constructor(e,n,s,r,i,o){this.xg=new $t,this.Jn=e,this.Cg=n,this.Pg=s,this.o_=i,this.bg=r,this.yg=o}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Ts(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new ma(new jc(e.from,e.to)).y_(),s=this.Jn.Xs();if(s.Ki())return null;const r=s.Fr(n.Uh(),1),i=s.Fr(n.bi(),-1),o=fe(s.Lr()),a=fe(s.Ks());if(r!==null&&i!==null&&r.Re>i.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:r===null||r.Re===o?e.from-o:r.Re-o,barsAfter:i===null||i.Re===a?a-e.to:a-i.Re};return r!==null&&i!==null&&(l.from=r.yw,l.to=i.yw),l}setData(e){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,e),this.Tg("full")}update(e,n=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,e,n),this.Tg("update")}pop(e=1){const n=this.Cg.Dg(this.Jn,e);n.length!==0&&this.Tg("update");const s=xh(this.seriesType());return n.map(r=>s(r))}dataByIndex(e,n){const s=this.Jn.Xs().Fr(e,n);return s===null?null:xh(this.seriesType())(s)}data(){const e=xh(this.seriesType());return this.Jn.Xs().Hr().map(n=>e(n))}subscribeDataChanged(e){this.xg.i(e)}unsubscribeDataChanged(e){this.xg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return Sr(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(e){const n=Gn(Sr(TO),e),s=this.Jn.Oh(n);return new rS(s)}removePriceLine(e){this.Jn.Nh(e.Sg())}priceLines(){return this.Jn.Fh().map(e=>new rS(e))}seriesType(){return this.Jn.Rr()}lastValueData(e){const n=this.Jn.ye(e);return n.ke?{noData:!0}:{noData:!1,price:n.gt,color:n.R}}attachPrimitive(e){this.Jn._a(e),e.attached&&e.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ua(e),e.detached&&e.detached(),this.Jn.Qt().Ih()}getPane(){const e=this.Jn,n=fe(this.Jn.Qt().Hn(e));return this.yg(n)}moveToPane(e){this.Jn.Qt().Nc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const n=this.Jn.Qt().Hn(this.Jn);n!==null&&n.Qo(this.Jn,e)}Tg(e){this.xg.v()&&this.xg.p(e)}}class IO{constructor(e,n,s){this.Vg=new $t,this.z_=new $t,this.gm=new $t,this.ts=e,this.uh=e.Et(),this.Zm=n,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=s}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(e,n){n?this.uh.Tu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.nu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},s=this.uh.au(n);this.ts.Lc(s)}getVisibleLogicalRange(){const e=this.uh.su();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){tn(e.from<=e.to,"The from index cannot be after the to index."),this.ts.Lc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(e){const n=this.ts.Et();return n.Ki()?null:n.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.cu(e)}timeToIndex(e,n){const s=this.o_.convertHorzItemToInternal(e);return this.uh.Q_(s,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.uh.qt(n)}coordinateToTime(e){const n=this.ts.Et(),s=n.cu(e),r=n.ss(s);return r===null?null:r.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(e){this.Vg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.Vg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.gm.i(e)}unsubscribeSizeChange(e){this.gm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...Sr(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(e){this.gm.p(e.width,e.height)}}function iS(t){return function(e){if(_d(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:r}=e.handleScale;_d(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),_d(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const n=e.handleScroll;_d(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class DO{constructor(e,n,s){this.Ag=new Map,this.zg=new Map,this.Lg=new $t,this.Og=new $t,this.Ng=new $t,this.qu=new WeakMap,this.Fg=new lO(n);const r=s===void 0?Sr(sS()):Gn(Sr(sS()),iS(s));this.Wg=n,this.Hf=new eO(e,r,n),this.Hf.Xv().i(o=>{this.Lg.v()&&this.Lg.p(this.Hg(o()))},this),this.Hf.Zv().i(o=>{this.Og.v()&&this.Og.p(this.Hg(o()))},this),this.Hf.cc().i(o=>{this.Ng.v()&&this.Ng.p(this.Hg(o()))},this);const i=this.Hf.Qt();this.Ug=new IO(i,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(e,n,s){this.autoSizeActive()||this.Hf.Jm(e,n,s)}addCustomSeries(e,n={},s=0){const r=(i=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...mO,...i.defaultOptions()},$g:xO,qg:i}))(oi(e));return this.Yg(r,n,s)}addSeries(e,n={},s=0){return this.Yg(e,n,s)}removeSeries(e){const n=Fn(this.Ag.get(e)),s=this.Fg.Ac(n);this.Hf.Qt().Ac(n),this.jg(s),this.Ag.delete(e),this.zg.delete(n)}kg(e,n){this.jg(this.Fg.Ww(e,n))}Rg(e,n,s){this.jg(this.Fg.jw(e,n,s))}Dg(e,n){const[s,r]=this.Fg.Zw(e,n);return s.length!==0&&this.jg(r),s}subscribeClick(e){this.Lg.i(e)}unsubscribeClick(e){this.Lg._(e)}subscribeCrosshairMove(e){this.Ng.i(e)}unsubscribeCrosshairMove(e){this.Ng._(e)}subscribeDblClick(e){this.Og.i(e)}unsubscribeDblClick(e){this.Og._(e)}priceScale(e,n=0){return new N5(this.Hf,e,n)}timeScale(){return this.Ug}applyOptions(e){this.Hf.hr(iS(e))}options(){return this.Hf.N()}takeScreenshot(e=!1,n=!1){let s,r;try{n||(s=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),r=this.Hf.aw(e)}finally{n||s===void 0||this.Hf.Qt().hr({crosshair:{mode:s}})}return r}addPane(e=!1){const n=this.Hf.Qt().$c();return n.zo(e),this.Kg(n)}removePane(e){this.Hf.Qt().fc(e)}swapPanes(e,n){this.Hf.Qt().mc(e,n)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map(e=>this.Kg(e))}paneSize(e=0){const n=this.Hf.pw(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,s){const r=this.Ag.get(s);if(r===void 0)return;const i=this.Hf.Qt().Hn(r);i!==null&&this.Hf.Qt().Rc(e,n,i)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(e,n={},s=0){tn(e.$g!==void 0),function(l){if(l===void 0||l.type==="custom")return;const c=l;c.minMove!==void 0&&c.precision===void 0&&(c.precision=T5(c.minMove))}(n.priceFormat),e.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(n);const r=Gn(Sr(f5),Sr(e.defaultOptions),n),i=e.$g,o=new x0(this.Hf.Qt(),e.type,r,i,e.qg);this.Hf.Qt().Ic(o,s);const a=new MO(o,this,this,this,this.Wg,l=>this.Kg(l));return this.Ag.set(a,o),this.zg.set(o,a),a}jg(e){const n=this.Hf.Qt();n.Vc(e.Et._u,e.Et.tg,e.Et.ig),e.Oo.forEach((s,r)=>r.ht(s.se,s.Qw)),n.Et().K_(),n.vu()}Xg(e){return Fn(this.zg.get(e))}Hg(e){const n=new Map;e.Dw.forEach((r,i)=>{const o=i.Rr(),a=xh(o)(r);if(o!=="Custom")tn(nO(a));else{const l=i.fa();tn(!l||l(a)===!1)}n.set(this.Xg(i),a)});const s=e.Rw!==void 0&&this.zg.has(e.Rw)?this.Xg(e.Rw):void 0;return{time:e.yw,logical:e.Re,point:e.kw,paneIndex:e.Tw,hoveredSeries:s,hoveredObjectId:e.Vw,seriesData:n,sourceEvent:e.Bw}}Kg(e){let n=this.qu.get(e);return n||(n=new PO(this.Hf,s=>this.Xg(s),e,this),this.qu.set(e,n)),n}}function NO(t){if($u(t)){const e=document.getElementById(t);return tn(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function AO(t,e,n){const s=NO(t),r=new DO(s,e,n);return e.setOptions(r.options()),r}function RO(t,e){return AO(t,new U1,U1.ld(e))}({...f5});const A5=S.forwardRef(({initialData:t=[],symbol:e="BTC/USDC",height:n=500,showVolume:s=!0},r)=>{const i=S.useRef(null),o=S.useRef(null),a=S.useRef(null),l=S.useRef(null),[c,u]=S.useState(null),d=x=>typeof x=="number"?x:ve(x),f=x=>({time:Math.floor((x.open_time||x.close_time||Date.now())/1e3),open:d(x.open),high:d(x.high),low:d(x.low),close:d(x.close)}),p=x=>{if(!x.volume)return null;const v=Math.floor((x.open_time||x.close_time||Date.now())/1e3),g=typeof x.volume=="number"?x.volume:ve(x.volume),b=d(x.close),w=d(x.open),y=b>=w;return{time:v,value:g,color:y?"#26a69a80":"#ef535080"}},m=x=>{const v=f(x),g=s?p(x):null;a.current&&(a.current.update(v),u(v.close)),s&&l.current&&g&&l.current.update(g)};return S.useImperativeHandle(r,()=>({updateChart:m})),S.useEffect(()=>{if(!i.current)return;const x=RO(i.current,{width:i.current.clientWidth,height:n,layout:{background:{color:"#1e1e1e"},textColor:"#d1d4dc"},grid:{vertLines:{color:"#2a2e39"},horzLines:{color:"#2a2e39"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2e39"},timeScale:{borderColor:"#2a2e39",timeVisible:!0,secondsVisible:!1}}),v=x.addSeries("Candlestick",{upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"});let g=null;s&&(g=x.addSeries("Histogram",{color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""})),t.length>0&&(v.setData(t),c===null&&t.length>0&&u(t[t.length-1].close)),o.current=x,a.current=v,l.current=g;const b=()=>{i.current&&o.current&&o.current.applyOptions({width:i.current.clientWidth})};return window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b),x.remove()}},[n,s]),S.useEffect(()=>{a.current&&t.length>0&&(a.current.setData(t),t.length>0&&u(t[t.length-1].close))},[t]),h.jsxs("div",{style:{position:"relative",width:"100%"},children:[h.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"1.2rem",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:h.jsxs("span",{children:[e," Live Kline Chart",c!==null&&` - Current: $${c.toFixed(2)}`]})}),h.jsx("div",{ref:i,style:{position:"relative",width:"100%"}})]})});A5.displayName="KlineChart";function OO(){var Ae,ke,Ge,Be;const[t,e]=S.useState(h0),[n,s]=S.useState(()=>localStorage.getItem("authToken")||""),[r,i]=S.useState(Lb),[o,a]=S.useState(""),[l,c]=S.useState("BTC/USDC"),[u,d]=S.useState("1m"),[f,p]=S.useState("300"),[m,x]=S.useState(!1),[v,g]=S.useState([]),[b,w]=S.useState([]),[y,k]=S.useState(new Set),[_,E]=S.useState([]),[T,D]=S.useState(!1),C=S.useRef(null),A=S.useRef(0),N=Bu,$=S.useRef(null),[W,L]=S.useState([]),{walletAddress:F,authToken:j}=vl(),{markets:R}=Io({baseURL:N,sessionToken:"",autoFetchMarkets:!0}),B=R.length>0?(((Ae=R.find(ee=>ee.active))==null?void 0:Ae.market_id)??R[0].market_id)||(((Ge=(ke=R.find(ee=>ee.active))==null?void 0:ke.id)==null?void 0:Ge.toString())??((Be=R[0].id)==null?void 0:Be.toString())??""):null;S.useEffect(()=>{B&&!o&&a(B)},[B]),S.useEffect(()=>{j&&s(j)},[j]),S.useEffect(()=>{const ee=z=>{z.key==="authToken"&&z.newValue&&s(z.newValue)};window.addEventListener("storage",ee);const U=setInterval(()=>{const z=localStorage.getItem("authToken");z&&z!==n&&s(z)},1e3);return()=>{window.removeEventListener("storage",ee),clearInterval(U)}},[n]),S.useEffect(()=>{n&&n.trim()!==""&&localStorage.setItem("authToken",n)},[n]);const I=(ee,U,z,ye,st)=>{const $e={id:A.current++,timestamp:Date.now(),channel:ee,data:U,type:z,step:st};ye?w(vt=>[...vt.slice(-99),$e]):g(vt=>[...vt.slice(-99),$e])},G=(ee,U,z,ye)=>{E(st=>[...st,{step:ee,status:U,message:z,timestamp:Date.now(),details:ye}])},O=()=>{E([])},P=async()=>{var st;if((st=C.current)!=null&&st.isConnected()){I("connection","Already connected","info",!1);return}if(D(!0),O(),G("1","in-progress","Validating configuration..."),I("connection","Starting connection process...","debug",!1,"Step 1: Validation"),!t||!t.trim()){G("1","error","WebSocket URL is required"),I("connection","Error: WebSocket URL is required","error",!1,"Step 1: Validation"),D(!1);return}try{const $e=new URL(t);if($e.protocol!=="ws:"&&$e.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol");G("1","success",`URL format valid: ${t}`),I("connection",`URL validated: ${t}`,"debug",!1,"Step 1: Validation")}catch($e){G("1","error",`Invalid URL format: ${$e.message}`),I("connection",`Error: Invalid URL format - ${$e.message}`,"error",!1,"Step 1: Validation"),D(!1);return}G("2","in-progress","Building connection URL with parameters...");const ee=[];n&&ee.push(`token=${encodeURIComponent(n)}`),F&&ee.push(`wallet=${encodeURIComponent(F)}`),r&&ee.push(`device_id=${encodeURIComponent(r)}`);const U=t.includes("?")?"&":"?",z=ee.length>0?`${t}${U}${ee.join("&")}`:t;if(G("2","success",`Connection URL: ${z}`),I("connection",`Connection URL: ${z}`,"debug",!1,"Step 2: URL Construction"),ee.length>0?I("connection",`Query parameters: ${ee.join(", ")}`,"debug",!1,"Step 2: URL Construction"):I("connection","No query parameters (authToken, walletAddress, deviceID)","warning",!1,"Step 2: URL Construction"),G("3","in-progress","Cleaning up existing connection..."),C.current)try{C.current.disconnect(),G("3","success","Previous connection cleaned up"),I("connection","Previous connection cleaned up","debug",!1,"Step 3: Cleanup")}catch{G("3","success","No previous connection to clean up"),I("connection","No previous connection found","debug",!1,"Step 3: Cleanup")}else G("3","success","No previous connection to clean up");G("4","in-progress","Creating SubscriptionClient instance...");try{C.current=new To({url:t,authToken:n||void 0,walletAddress:F||void 0,deviceID:r||void 0}),G("4","success","SubscriptionClient created"),I("connection","SubscriptionClient instance created","debug",!1,"Step 4: Client Creation"),I("connection",`Config: ${JSON.stringify({url:t,hasToken:!!n,hasWallet:!!F,deviceID:r},null,2)}`,"debug",!1,"Step 4: Client Creation")}catch($e){G("4","error",`Failed to create client: ${$e.message}`),I("connection",`Error creating client: ${$e.message}`,"error",!1,"Step 4: Client Creation"),D(!1);return}G("5","in-progress","Initiating WebSocket connection..."),I("connection","Initiating WebSocket handshake...","debug",!1,"Step 5: Connection"),I("connection","Browser will attempt to upgrade HTTP connection to WebSocket","debug",!1,"Step 5: Connection");const ye=Date.now();try{await C.current.connect();const $e=Date.now()-ye,vt=C.current.isConnected(),ae=C.current.getState();I("connection",`Connection attempt completed in ${$e}ms`,"debug",!1,"Step 5: Connection"),I("connection",`Connection state: ${ae}`,"debug",!1,"Step 5: Connection"),x(vt),vt?(G("5","success",`WebSocket connected successfully (${$e}ms)`),I("connection"," WebSocket connected successfully!","success",!1,"Step 5: Connection"),I("connection",`Connection established in ${$e}ms`,"success",!1,"Step 5: Connection")):(G("5","error","Connection completed but state is not connected"),I("connection"," Connection attempt completed but state is not connected","error",!1,"Step 5: Connection"),I("connection",`Current state: ${ae}`,"error",!1,"Step 5: Connection"))}catch($e){const vt=Date.now()-ye,ae=$e.message||String($e);let ge="";ae.includes("abnormal closure")?ge=`The server closed the connection abnormally. Possible causes:
- Server is not running
- Wrong URL or port
- Network connectivity issues
- Firewall blocking the connection`:ae.includes("protocol error")?ge="WebSocket protocol error. The server may not support WebSocket connections.":ae.includes("policy violation")?ge="Connection closed due to policy violation. Check authentication requirements.":ae.includes("server error")?ge="Server returned an error. Check server logs for details.":(ae.includes("Unauthorized")||ae.includes("401"))&&(ge=`Authentication failed. Possible causes:
- Missing or invalid JWT token (if server requires authentication)
- Token expired
- Server is in production mode requiring JWT authentication
Note: If server uses JWT auth, you must provide a valid token in the authToken field.`),G("5","error",`Connection failed: ${ae}`),I("connection",` Connection error: ${ae}`,"error",!1,"Step 5: Connection"),ge&&I("connection",`Error details:
${ge}`,"error",!1,"Step 5: Connection"),I("connection",`Connection failed after ${vt}ms`,"error",!1,"Step 5: Connection"),I("connection",`Full error: ${JSON.stringify($e,Object.getOwnPropertyNames($e),2)}`,"error",!1,"Step 5: Connection"),x(!1)}finally{D(!1)}},Z=()=>{if(C.current)try{C.current.disconnect(),x(!1),k(new Set),I("connection","WebSocket disconnected","info",!1)}catch(ee){I("connection",`Disconnect error: ${ee.message}`,"error",!1)}},Q=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("orderbook","Not connected. Please connect first.","error",!1);return}if(!o){I("orderbook","Please select a market first","error",!1);return}const ee=z=>{I("orderbook",z,"success",!1)};try{C.current.subscribeOrderbook(o,ee,!0),k(z=>new Set([...z,"orderbook"])),I("orderbook",`Subscribed to orderbook for market ${o}`,"success",!1)}catch(z){I("orderbook",`Subscription error: ${z.message}`,"error",!1)}},Y=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&o)try{C.current.unsubscribeOrderbook(o),k(U=>{const z=new Set(U);return z.delete("orderbook"),z}),I("orderbook","Unsubscribed from orderbook","info",!1)}catch(U){I("orderbook",`Unsubscribe error: ${U.message}`,"error",!1)}},q=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("trades","Not connected. Please connect first.","error",!1);return}if(!o){I("trades","Please select a market first","error",!1);return}const ee=z=>{I("trades",z,"success",!1)};try{C.current.subscribeTrades(o,ee),k(z=>new Set([...z,"trades"])),I("trades",`Subscribed to trades for market ${o}`,"success",!1)}catch(z){I("trades",`Subscription error: ${z.message}`,"error",!1)}},J=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&o)try{C.current.unsubscribeTrades(o),k(U=>{const z=new Set(U);return z.delete("trades"),z}),I("trades","Unsubscribed from trades","info",!1)}catch(U){I("trades",`Unsubscribe error: ${U.message}`,"error",!1)}},se=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("ticker","Not connected. Please connect first.","error",!1);return}if(!o){I("ticker","Please select a market first","error",!1);return}const ee=z=>{I("ticker",z,"success",!1)};try{C.current.subscribeTicker(o,ee),k(z=>new Set([...z,"ticker"])),I("ticker",`Subscribed to ticker for market ${o}`,"success",!1)}catch(z){I("ticker",`Subscription error: ${z.message}`,"error",!1)}},we=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&o)try{C.current.unsubscribeTicker(o),k(U=>{const z=new Set(U);return z.delete("ticker"),z}),I("ticker","Unsubscribed from ticker","info",!1)}catch(U){I("ticker",`Unsubscribe error: ${U.message}`,"error",!1)}},Ye=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("last_price","Not connected. Please connect first.","error",!1);return}if(!o){I("last_price","Please select a market first","error",!1);return}const ee=z=>{I("last_price",z,"success",!1)};try{C.current.subscribeLastPrice(o,ee,!0),k(z=>new Set([...z,"last_price"])),I("last_price",`Subscribed to last price for market ${o}`,"success",!1)}catch(z){I("last_price",`Subscription error: ${z.message}`,"error",!1)}},Ne=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&o)try{C.current.unsubscribeLastPrice(o),k(U=>{const z=new Set(U);return z.delete("last_price"),z}),I("last_price","Unsubscribed from last price","info",!1)}catch(U){I("last_price",`Unsubscribe error: ${U.message}`,"error",!1)}},Le=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("user_updates","Not connected. Please connect first.","error",!0);return}if(!F){I("user_updates","Wallet address required for position updates (positions channel)","error",!0);return}const ee=z=>{I("user_updates",z,"success",!0)};try{C.current.subscribeUserUpdates(ee),k(z=>new Set([...z,"user_updates"])),I("user_updates","Subscribed to user updates (positions, orders, etc.)","success",!0)}catch(z){I("user_updates",`Subscription error: ${z.message}`,"error",!0)}},ze=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected())try{C.current.unsubscribeUserUpdates(),k(U=>{const z=new Set(U);return z.delete("user_updates"),z}),I("user_updates","Unsubscribed from user updates","info",!0)}catch(U){I("user_updates",`Unsubscribe error: ${U.message}`,"error",!0)}},wt=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("funding_rate","Not connected. Please connect first.","error",!1);return}if(!l){I("funding_rate","Please enter a symbol first","error",!1);return}const ee=z=>{I("funding_rate",z,"success",!1)};try{C.current.subscribeFundingRate(l,ee),k(z=>new Set([...z,"funding_rate"])),I("funding_rate",`Subscribed to funding rate for ${l}`,"success",!1)}catch(z){I("funding_rate",`Subscription error: ${z.message}`,"error",!1)}},M=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&l)try{C.current.unsubscribeFundingRate(l),k(U=>{const z=new Set(U);return z.delete("funding_rate"),z}),I("funding_rate","Unsubscribed from funding rate","info",!1)}catch(U){I("funding_rate",`Unsubscribe error: ${U.message}`,"error",!1)}},ce=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("buckets","Not connected. Please connect first.","error",!0);return}if(!F){I("buckets","Wallet address required for buckets subscription","error",!0);return}const ee=z=>{I("buckets",z,"success",!0)};try{C.current.subscribeBuckets(ee),k(z=>new Set([...z,"buckets"])),I("buckets","Subscribed to buckets","success",!0)}catch(z){I("buckets",`Subscription error: ${z.message}`,"error",!0)}},me=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected())try{C.current.unsubscribeBuckets(),k(U=>{const z=new Set(U);return z.delete("buckets"),z}),I("buckets","Unsubscribed from buckets","info",!0)}catch(U){I("buckets",`Unsubscribe error: ${U.message}`,"error",!0)}},Ie=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("deviation","Not connected. Please connect first.","error",!1);return}if(!l){I("deviation","Please enter a symbol first","error",!1);return}const ee=z=>{I("deviation",z,"success",!1)};try{C.current.subscribeDeviation(l,ee),k(z=>new Set([...z,"deviation"])),I("deviation",`Subscribed to deviation for ${l}`,"success",!1)}catch(z){I("deviation",`Subscription error: ${z.message}`,"error",!1)}},pe=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&l)try{C.current.unsubscribeDeviation(l),k(U=>{const z=new Set(U);return z.delete("deviation"),z}),I("deviation","Unsubscribed from deviation","info",!1)}catch(U){I("deviation",`Unsubscribe error: ${U.message}`,"error",!1)}},_e=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("index_price","Not connected. Please connect first.","error",!1);return}if(!l){I("index_price","Please enter a symbol first","error",!1);return}const ee=z=>{I("index_price",z,"success",!1)};try{C.current.subscribeIndexPrice(l,ee),k(z=>new Set([...z,"index_price"])),I("index_price",`Subscribed to index price for ${l}`,"success",!1)}catch(z){I("index_price",`Subscription error: ${z.message}`,"error",!1)}},V=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&l)try{C.current.unsubscribeIndexPrice(l),k(U=>{const z=new Set(U);return z.delete("index_price"),z}),I("index_price","Unsubscribed from index price","info",!1)}catch(U){I("index_price",`Unsubscribe error: ${U.message}`,"error",!1)}},ne=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("kline","Not connected. Please connect first.","error",!1);return}if(!o){I("kline","Please select a market first","error",!1);return}if(!u){I("kline","Please select an interval first","error",!1);return}const ee=z=>{if(I("kline",z,"success",!1),$.current&&z){const ye={open_time:z.open_time||z.timestamp||Date.now(),close_time:z.close_time,open:z.open,high:z.high,low:z.low,close:z.close,volume:z.volume};$.current.updateChart(ye);const $e={time:Math.floor((ye.open_time||Date.now())/1e3),open:typeof ye.open=="string"?ve(ye.open):ye.open,high:typeof ye.high=="string"?ve(ye.high):ye.high,low:typeof ye.low=="string"?ve(ye.low):ye.low,close:typeof ye.close=="string"?ve(ye.close):ye.close};L(vt=>{const ae=[...vt];return ae.length===0||ae[ae.length-1].time!==$e.time?ae.push($e):ae[ae.length-1]=$e,ae})}};try{C.current.subscribeKline(o,u,ee),k(z=>new Set([...z,"kline"])),I("kline",`Subscribed to kline for market ${o} with interval ${u}`,"success",!1)}catch(z){I("kline",`Subscription error: ${z.message}`,"error",!1)}},H=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&!(!o||!u))try{C.current.unsubscribeKline(o,u),k(U=>{const z=new Set(U);return z.delete("kline"),z}),L([]),I("kline","Unsubscribed from kline","info",!1)}catch(U){I("kline",`Unsubscribe error: ${U.message}`,"error",!1)}},X=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("mark_price","Not connected. Please connect first.","error",!1);return}if(!l){I("mark_price","Please enter a symbol first","error",!1);return}const ee=z=>{I("mark_price",z,"success",!1)};try{C.current.subscribeMarkPrice(l,ee),k(z=>new Set([...z,"mark_price"])),I("mark_price",`Subscribed to mark price for ${l}`,"success",!1)}catch(z){I("mark_price",`Subscription error: ${z.message}`,"error",!1)}},xe=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&l)try{C.current.unsubscribeMarkPrice(l),k(U=>{const z=new Set(U);return z.delete("mark_price"),z}),I("mark_price","Unsubscribed from mark price","info",!1)}catch(U){I("mark_price",`Unsubscribe error: ${U.message}`,"error",!1)}},K=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("price_feed","Not connected. Please connect first.","error",!1);return}if(!l){I("price_feed","Please enter a symbol first","error",!1);return}const ee=z=>{I("price_feed",z,"success",!1)};try{C.current.subscribePriceFeed(l,ee),k(z=>new Set([...z,"price_feed"])),I("price_feed",`Subscribed to price feed for ${l}`,"success",!1)}catch(z){I("price_feed",`Subscription error: ${z.message}`,"error",!1)}},de=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&l)try{C.current.unsubscribePriceFeed(l),k(U=>{const z=new Set(U);return z.delete("price_feed"),z}),I("price_feed","Unsubscribed from price feed","info",!1)}catch(U){I("price_feed",`Unsubscribe error: ${U.message}`,"error",!1)}},be=()=>{var U;if(!((U=C.current)!=null&&U.isConnected())){I("twap","Not connected. Please connect first.","error",!1);return}if(!l){I("twap","Please enter a symbol first","error",!1);return}if(!f||isNaN(Number(f))||Number(f)<=0){I("twap","Please enter a valid window size (positive number in seconds)","error",!1);return}const ee=z=>{I("twap",z,"success",!1)};try{C.current.subscribeTWAP(l,Number(f),ee),k(z=>new Set([...z,"twap"])),I("twap",`Subscribed to TWAP for ${l} with window size ${f}s`,"success",!1)}catch(z){I("twap",`Subscription error: ${z.message}`,"error",!1)}},oe=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&!(!l||!f))try{C.current.unsubscribeTWAP(l,Number(f)),k(U=>{const z=new Set(U);return z.delete("twap"),z}),I("twap","Unsubscribed from TWAP","info",!1)}catch(U){I("twap",`Unsubscribe error: ${U.message}`,"error",!1)}},re=()=>{if(!C.current){I("multi_feed","SubscriptionClient not initialized. Please connect first.","error",!1);return}if(!C.current.isConnected()){I("multi_feed","Not connected. Please connect first.","error",!1);return}if(!o){I("multi_feed","Please select a market first","error",!1);return}if(!l){I("multi_feed","Please enter a symbol first","error",!1);return}if(typeof C.current.subscribeMultiFeed!="function"){I("multi_feed","subscribeMultiFeed method not available. Please check SDK version.","error",!1),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(C.current)));return}const ee=U=>{const z=U.sub_channel||"unknown";I(`multi_feed:${z}`,U,"success",z==="balances"||z==="buckets"||z==="orders"||z==="positions")};try{C.current.subscribeMultiFeed(o,l,ee,u||"1m"),k(U=>new Set([...U,"multi_feed"])),I("multi_feed",`Subscribed to multi-feed for market ${o}, symbol ${l}`,"success",!1)}catch(U){I("multi_feed",`Subscription error: ${U.message}`,"error",!1)}},he=()=>{var ee;if((ee=C.current)!=null&&ee.isConnected()&&!(!o||!l))try{C.current.unsubscribeMultiFeed(o,l),k(U=>{const z=new Set(U);return z.delete("multi_feed"),z}),I("multi_feed","Unsubscribed from multi-feed","info",!1)}catch(U){I("multi_feed",`Unsubscribe error: ${U.message}`,"error",!1)}},Ce=()=>{if(!C.current){I("balances","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!C.current.isConnected()){I("balances","Not connected. Please connect first.","error",!0);return}if(!F){I("balances","Wallet address required for balances subscription","error",!0);return}if(typeof C.current.subscribeBalances!="function"){I("balances","subscribeBalances method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(C.current)));return}const ee=U=>{I("balances",U,"success",!0)};try{C.current.subscribeBalances(ee),k(U=>new Set([...U,"balances"])),I("balances","Subscribed to balances","success",!0)}catch(U){I("balances",`Subscription error: ${U.message}`,"error",!0)}},Me=()=>{if(C.current&&C.current.isConnected()){if(typeof C.current.unsubscribeBalances!="function"){I("balances","unsubscribeBalances method not available. Please check SDK version.","error",!0);return}try{C.current.unsubscribeBalances(),k(ee=>{const U=new Set(ee);return U.delete("balances"),U}),I("balances","Unsubscribed from balances","info",!0)}catch(ee){I("balances",`Unsubscribe error: ${ee.message}`,"error",!0)}}},Fe=()=>{if(!C.current){I("orders","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!C.current.isConnected()){I("orders","Not connected. Please connect first.","error",!0);return}if(!F){I("orders","Wallet address required for orders subscription","error",!0);return}if(typeof C.current.subscribeOrders!="function"){I("orders","subscribeOrders method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(C.current)));return}const ee=U=>{I("orders",U,"success",!0)};try{C.current.subscribeOrders(ee),k(U=>new Set([...U,"orders"])),I("orders","Subscribed to orders","success",!0)}catch(U){I("orders",`Subscription error: ${U.message}`,"error",!0)}},He=()=>{if(C.current&&C.current.isConnected()){if(typeof C.current.unsubscribeOrders!="function"){I("orders","unsubscribeOrders method not available. Please check SDK version.","error",!0);return}try{C.current.unsubscribeOrders(),k(ee=>{const U=new Set(ee);return U.delete("orders"),U}),I("orders","Unsubscribed from orders","info",!0)}catch(ee){I("orders",`Unsubscribe error: ${ee.message}`,"error",!0)}}},Oe=ee=>{ee?w([]):g([])};return S.useEffect(()=>()=>{if(C.current)try{C.current.disconnect()}catch{}},[]),h.jsxs("div",{className:"ws-test-page",children:[h.jsx("h1",{children:"WebSocket Test Page"}),h.jsx("p",{children:"Test WebSocket subscriptions for public and private channels"}),h.jsx(SA,{steps:_}),h.jsx(kA,{wsURL:t,onWsURLChange:e,marketId:o,onMarketIdChange:a,markets:R,symbol:l,onSymbolChange:c,klineInterval:u,onKlineIntervalChange:d,twapWindowSize:f,onTwapWindowSizeChange:p,authToken:n,onAuthTokenChange:s,walletAddress:F,deviceID:r,onDeviceIDChange:i,isConnected:m,isConnecting:T,onConnect:P,onDisconnect:Z}),h.jsxs("div",{className:"ws-test-page-layout",children:[h.jsxs(h1,{title:"WebSocket Public",isPrivate:!1,messages:v,onClearMessages:()=>Oe(!1),children:[h.jsxs("div",{className:"channel-buttons-row",children:[h.jsx(un,{channel:"orderbook",isSubscribed:y.has("orderbook"),isConnected:m,subscribeLabel:"Subscribe Orderbook",unsubscribeLabel:"Unsubscribe Orderbook",onSubscribe:Q,onUnsubscribe:Y}),h.jsx(un,{channel:"trades",isSubscribed:y.has("trades"),isConnected:m,subscribeLabel:"Subscribe Trades",unsubscribeLabel:"Unsubscribe Trades",onSubscribe:q,onUnsubscribe:J}),h.jsx(un,{channel:"ticker",isSubscribed:y.has("ticker"),isConnected:m,subscribeLabel:"Subscribe Ticker",unsubscribeLabel:"Unsubscribe Ticker",onSubscribe:se,onUnsubscribe:we}),h.jsx(un,{channel:"last_price",isSubscribed:y.has("last_price"),isConnected:m,subscribeLabel:"Subscribe Last Price",unsubscribeLabel:"Unsubscribe Last Price",onSubscribe:Ye,onUnsubscribe:Ne}),h.jsx(un,{channel:"funding_rate",isSubscribed:y.has("funding_rate"),isConnected:m,subscribeLabel:"Subscribe Funding Rate",unsubscribeLabel:"Unsubscribe Funding Rate",onSubscribe:wt,onUnsubscribe:M}),h.jsx(un,{channel:"deviation",isSubscribed:y.has("deviation"),isConnected:m,subscribeLabel:"Subscribe Deviation",unsubscribeLabel:"Unsubscribe Deviation",onSubscribe:Ie,onUnsubscribe:pe}),h.jsx(un,{channel:"index_price",isSubscribed:y.has("index_price"),isConnected:m,subscribeLabel:"Subscribe Index Price",unsubscribeLabel:"Unsubscribe Index Price",onSubscribe:_e,onUnsubscribe:V}),h.jsx(un,{channel:"kline",isSubscribed:y.has("kline"),isConnected:m,subscribeLabel:"Subscribe Kline",unsubscribeLabel:"Unsubscribe Kline",onSubscribe:ne,onUnsubscribe:H})]}),y.has("kline")&&h.jsx("div",{style:{marginTop:"20px",marginBottom:"20px"},children:h.jsx(A5,{ref:$,initialData:W,symbol:l||"BTC/USDC",height:500,showVolume:!0})}),h.jsxs("div",{className:"channel-buttons-row",children:[h.jsx(un,{channel:"mark_price",isSubscribed:y.has("mark_price"),isConnected:m,subscribeLabel:"Subscribe Mark Price",unsubscribeLabel:"Unsubscribe Mark Price",onSubscribe:X,onUnsubscribe:xe}),h.jsx(un,{channel:"price_feed",isSubscribed:y.has("price_feed"),isConnected:m,subscribeLabel:"Subscribe Price Feed",unsubscribeLabel:"Unsubscribe Price Feed",onSubscribe:K,onUnsubscribe:de}),h.jsx(un,{channel:"twap",isSubscribed:y.has("twap"),isConnected:m,subscribeLabel:"Subscribe TWAP",unsubscribeLabel:"Unsubscribe TWAP",onSubscribe:be,onUnsubscribe:oe}),h.jsx(un,{channel:"multi_feed",isSubscribed:y.has("multi_feed"),isConnected:m,subscribeLabel:"Subscribe Multi-Feed",unsubscribeLabel:"Unsubscribe Multi-Feed",onSubscribe:re,onUnsubscribe:he})]}),h.jsx("small",{className:"private-note-text-block",style:{marginTop:"10px"},children:"Multi-Feed: Unified channel streaming all sub-channels (orderbook, trades, positions, balances, orders, buckets, etc.) Requires market ID and symbol. Authenticated sub-channels (balances, orders, positions, buckets) require wallet address."})]}),h.jsxs(h1,{title:"WebSocket Private",isPrivate:!0,messages:b,onClearMessages:()=>Oe(!0),children:[h.jsx(un,{channel:"user_updates",isSubscribed:y.has("user_updates"),isConnected:m,disabled:!F,subscribeLabel:"Subscribe User Updates",unsubscribeLabel:"Unsubscribe User Updates",onSubscribe:Le,onUnsubscribe:ze,variant:"private"}),h.jsx("small",{className:"private-note-text",children:"Position updates (positions channel): Requires wallet address. Returns user positions."}),h.jsx(un,{channel:"buckets",isSubscribed:y.has("buckets"),isConnected:m,disabled:!F,subscribeLabel:"Subscribe Buckets",unsubscribeLabel:"Unsubscribe Buckets",onSubscribe:ce,onUnsubscribe:me,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Buckets: User's margin buckets (requires wallet address)"}),h.jsx(un,{channel:"balances",isSubscribed:y.has("balances"),isConnected:m,disabled:!F,subscribeLabel:"Subscribe Balances",unsubscribeLabel:"Unsubscribe Balances",onSubscribe:Ce,onUnsubscribe:Me,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Balances: User's spot balances (USDC, MORM, BTC, etc.) - requires wallet address"}),h.jsx(un,{channel:"orders",isSubscribed:y.has("orders"),isConnected:m,disabled:!F,subscribeLabel:"Subscribe Orders",unsubscribeLabel:"Unsubscribe Orders",onSubscribe:Fe,onUnsubscribe:He,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Orders: User's open orders - requires wallet address"})]})]})]})}function Ub({top:t,left:e,width:n,height:s}){const r=`translate(${e}px,${t}px)`;return{transform:r,WebkitTransform:r,MozTransform:r,msTransform:r,OTransform:r,width:`${n}px`,height:`${s}px`,position:"absolute"}}function R5({top:t,left:e,width:n,height:s}){return{top:`${t}px`,left:`${e}px`,width:`${n}px`,height:`${s}px`,position:"absolute"}}function oS(t){return t*100+"%"}function LO(t,e,n,s){return t+n>s?e:n}function O5(t,e,n){return t<0?e:n}function jO(t){return Math.max(0,t)}function hf(t){return Math.max(0,t)}var Wb=(t,e,n)=>{const{left:s,height:r,width:i}=e,o=t.top-(r-t.height);return{left:s,width:i,height:O5(o,t.height,r),top:hf(o)}},Hb=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{top:s,height:i,width:LO(t.left,t.width,o,n),left:jO(r)}},Vb=(t,e,n)=>{const{top:s,height:r,width:i}=e,o=t.left+t.width-i;return o<0?{height:r,width:t.left+t.width,top:hf(s),left:0}:{height:r,width:i,top:hf(s),left:o}},Yb=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{width:o,left:r,height:O5(s,t.height,i),top:hf(s)}},FO=(t,e,n)=>Wb(t,Hb(t,e,n)),BO=(t,e,n)=>Wb(t,Vb(t,e)),$O=(t,e,n)=>Yb(t,Hb(t,e,n)),zO=(t,e,n)=>Yb(t,Vb(t,e)),UO={n:Wb,ne:FO,e:Hb,se:$O,s:Yb,sw:zO,w:Vb,nw:BO};function WO(t,e,n,s){const r=UO[t];return r?r(e,{...e,...n},s):n}var L5={type:"transform",scale:1,calcStyle(t){return Ub(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}},HO={type:"absolute",scale:1,calcStyle(t){return R5(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}};function VO(t){return{type:"transform",scale:t,calcStyle(e){return Ub(e)},calcDragPosition(e,n,s,r){return{left:(e-s)/t,top:(n-r)/t}}}}var YO=L5,GO={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},qO={enabled:!0,bounded:!1,threshold:3},KO={enabled:!0,handles:["se"]},XO={enabled:!1,defaultItem:{w:1,h:1}};function y0(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function Ms(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&y0(s,e))return s}}function j5(t,e){return t.filter(n=>y0(n,e))}function F5(t,e){return e==="horizontal"?$5(t):e==="vertical"?B5(t):[...t]}function B5(t){return[...t].sort((e,n)=>e.y!==n.y?e.y-n.y:e.x-n.x)}function $5(t){return[...t].sort((e,n)=>e.x!==n.x?e.x-n.x:e.y-n.y)}function Sl(t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0){const r=s.y+s.h;r>e&&(e=r)}}return e}function Bi(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&s.i===e)return s}}function Gb(t){return t.filter(e=>e.static===!0)}function ki(t){return{i:t.i,x:t.x,y:t.y,w:t.w,h:t.h,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function Rs(t){const e=new Array(t.length);for(let n=0;n<t.length;n++){const s=t[n];s!==void 0&&(e[n]=ki(s))}return e}function QO(t,e){const n=new Array(t.length);for(let s=0;s<t.length;s++){const r=t[s];r!==void 0&&(e.i===r.i?n[s]=e:n[s]=r)}return n}function JO(t,e,n){let s=Bi(t,e);return s?(s=n(ki(s)),[QO(t,s),s]):[[...t],null]}function qb(t,e){const n=Gb(t);for(let s=0;s<t.length;s++){const r=t[s];if(r!==void 0)if(r.x+r.w>e.cols&&(r.x=e.cols-r.w),r.x<0&&(r.x=0,r.w=e.cols),!r.static)n.push(r);else for(;Ms(n,r);)r.y++}return t}function Ki(t,e,n,s,r,i,o,a,l){if(e.static&&e.isDraggable!==!0)return[...t];if(e.y===s&&e.x===n)return[...t];const c=e.x,u=e.y;typeof n=="number"&&(e.x=n),typeof s=="number"&&(e.y=s),e.moved=!0;let d=F5(t,o);(o==="vertical"&&typeof s=="number"?u>=s:o==="horizontal"&&typeof n=="number"?c>=n:!1)&&(d=d.reverse());const p=j5(d,e),m=p.length>0;if(m&&l)return Rs(t);if(m&&i)return e.x=c,e.y=u,e.moved=!1,t;let x=[...t];for(let v=0;v<p.length;v++){const g=p[v];g!==void 0&&(g.moved||(g.static?x=aS(x,g,e,r,o):x=aS(x,e,g,r,o)))}return x}function aS(t,e,n,s,r,i){const o=r==="horizontal",a=r==="vertical",l=e.static;if(s){s=!1;const d={x:o?Math.max(e.x-n.w,0):n.x,y:a?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},f=Ms(t,d),p=f!==void 0&&f.y+f.h>e.y,m=f!==void 0&&e.x+e.w>f.x;if(!f)return Ki(t,n,o?d.x:void 0,a?d.y:void 0,s,l,r);if(p&&a)return Ki(t,n,void 0,n.y+1,s,l,r);if(p&&r===null)return e.y=n.y,n.y=n.y+n.h,[...t];if(m&&o)return Ki(t,e,n.x,void 0,s,l,r)}const c=o?n.x+1:void 0,u=a?n.y+1:void 0;return c===void 0&&u===void 0?[...t]:Ki(t,n,c,u,s,l,r)}function ZO(t){return t.filter(e=>e.static)}var e7={x:"w",y:"h"};function $m(t,e,n,s){const r=e7[s];e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;y0(e,a)&&$m(t,a,n+e[r],s)}}e[s]=n}function t7(t,e,n,s,r,i,o){const a=n==="vertical",l=n==="horizontal";if(a)for(typeof o=="number"?e.y=Math.min(o,e.y):e.y=Math.min(Sl(t),e.y);e.y>0&&!Ms(t,e);)e.y--;else if(l)for(;e.x>0&&!Ms(t,e);)e.x--;let c;for(;(c=Ms(t,e))!==void 0&&!(n===null&&i);)if(l?$m(r,e,c.x+c.w,"x"):$m(r,e,c.y+c.h,"y"),l&&e.x+e.w>s)for(e.x=s-e.w,e.y++;e.x>0&&!Ms(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function yr(t,e,n,s){const r=ZO(t);let i=Sl(r);const o=F5(t,e),a=new Array(t.length);for(let l=0;l<o.length;l++){const c=o[l];if(c===void 0)continue;let u=ki(c);u.static||(u=t7(r,u,e,n,o,s,i),i=Math.max(i,u.y+u.h),r.push(u));const d=t.indexOf(c);a[d]=u,u.moved=!1}return a}function Kb(t,e,n,s){const r=s==="x"?"w":"h";e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;y0(e,a)&&Kb(t,a,n+e[r],s)}}e[s]=n}function n7(t,e,n,s){for(e.y=Math.min(s,e.y);e.y>0&&!Ms(t,e);)e.y--;let r;for(;(r=Ms(t,e))!==void 0;)Kb(n,e,r.y+r.h,"y");return e.y=Math.max(e.y,0),e}function s7(t,e,n,s){for(;e.x>0&&!Ms(t,e);)e.x--;let r;for(;(r=Ms(t,e))!==void 0;)if(Kb(s,e,r.x+r.w,"x"),e.x+e.w>n)for(e.x=n-e.w,e.y++;e.x>0&&!Ms(t,e);)e.x--;return e.x=Math.max(e.x,0),e}var z5={type:"vertical",allowOverlap:!1,compact(t,e){const n=Gb(t);let s=Sl(n);const r=B5(t),i=new Array(t.length);for(let o=0;o<r.length;o++){const a=r[o];if(a===void 0)continue;let l=ki(a);l.static||(l=n7(n,l,r,s),s=Math.max(s,l.y+l.h),n.push(l));const c=t.indexOf(a);i[c]=l,l.moved=!1}return i},onMove(t,e,n,s,r){const i=Rs(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},U5={type:"horizontal",allowOverlap:!1,compact(t,e){const n=Gb(t),s=$5(t),r=new Array(t.length);for(let i=0;i<s.length;i++){const o=s[i];if(o===void 0)continue;let a=ki(o);a.static||(a=s7(n,a,e,s),n.push(a));const l=t.indexOf(o);r[l]=a,a.moved=!1}return r},onMove(t,e,n,s,r){const i=Rs(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},lS={type:null,allowOverlap:!1,compact(t,e){return Rs(t)},onMove(t,e,n,s,r){const i=Rs(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},r7={...z5,allowOverlap:!0,compact(t,e){return Rs(t)}},i7={...U5,allowOverlap:!0,compact(t,e){return Rs(t)}};function Xb(t,e=!1,n=!1){let s;return e?t==="vertical"?s=r7:t==="horizontal"?s=i7:s=lS:t==="vertical"?s=z5:t==="horizontal"?s=U5:s=lS,n?{...s,preventCollision:n}:s}function W5(t){return Object.keys(t).sort((n,s)=>t[n]-t[s])}function cS(t,e){const n=W5(t);let s=n[0];if(s===void 0)throw new Error("No breakpoints defined");for(let r=1;r<n.length;r++){const i=n[r];if(i===void 0)continue;const o=t[i];e>o&&(s=i)}return s}function uS(t,e){const n=e[t];if(n===void 0)throw new Error(`ResponsiveReactGridLayout: \`cols\` entry for breakpoint ${String(t)} is missing!`);return n}function og(t,e,n,s,r,i){const o=t[n];if(o)return Rs(o);let a=t[s];const l=W5(e),c=l.slice(l.indexOf(n));for(let d=0;d<c.length;d++){const f=c[d];if(f===void 0)continue;const p=t[f];if(p){a=p;break}}const u=Rs(a||[]);return yr(qb(u,{cols:r}),i,r)}function Nd(t,e){if(Array.isArray(t))return t;const n=t,s=n[e];if(s!==void 0)return s;const r=Object.keys(n);for(const i of r){const o=n[i];if(o!==void 0)return o}return[10,10]}function w0(t){const{margin:e,containerPadding:n,containerWidth:s,cols:r}=t;return(s-e[0]*(r-1)-n[0]*2)/r}function ff(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function Ai(t,e,n,s,r,i,o){const{margin:a,containerPadding:l,rowHeight:c}=t,u=w0(t);let d,f,p,m;return o?(d=Math.round(o.width),f=Math.round(o.height)):(d=ff(s,u,a[0]),f=ff(r,c,a[1])),i?(p=Math.round(i.top),m=Math.round(i.left)):o?(p=Math.round(o.top),m=Math.round(o.left)):(p=Math.round((c+a[1])*n+l[1]),m=Math.round((u+a[0])*e+l[0])),{top:p,left:m,width:d,height:f}}function bh(t,e,n,s,r){const{margin:i,containerPadding:o,cols:a,rowHeight:l,maxRows:c}=t,u=w0(t);let d=Math.round((n-o[0])/(u+i[0])),f=Math.round((e-o[1])/(l+i[1]));return d=Qs(d,0,a-s),f=Qs(f,0,c-r),{x:d,y:f}}function o7(t,e,n,s,r,i){const{margin:o,maxRows:a,cols:l,rowHeight:c}=t,u=w0(t),d=Math.round((e+o[0])/(u+o[0])),f=Math.round((n+o[1])/(c+o[1]));let p=Qs(d,0,l-s),m=Qs(f,0,a-r);return(i==="sw"||i==="w"||i==="nw")&&(p=Qs(d,0,l)),(i==="nw"||i==="n"||i==="ne")&&(m=Qs(f,0,a)),{w:p,h:m}}function Qs(t,e,n){return Math.max(Math.min(t,n),e)}var v0={exports:{}},H5={},V5={exports:{}},a7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",l7=a7,c7=l7;function Y5(){}function G5(){}G5.resetWarningCache=Y5;var u7=function(){function t(s,r,i,o,a,l){if(l!==c7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:G5,resetWarningCache:Y5};return n.PropTypes=n,n};V5.exports=u7();var S0=V5.exports;function q5(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=q5(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function pu(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=q5(t))&&(s&&(s+=" "),s+=e);return s}const d7=Object.freeze(Object.defineProperty({__proto__:null,clsx:pu,default:pu},Symbol.toStringTag,{value:"Module"})),h7=wT(d7);var At={},sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.dontSetMe=x7;sr.findInArray=f7;sr.int=m7;sr.isFunction=p7;sr.isNum=g7;function f7(t,e){for(let n=0,s=t.length;n<s;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function p7(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function g7(t){return typeof t=="number"&&!isNaN(t)}function m7(t){return parseInt(t,10)}function x7(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.browserPrefixToKey=X5;Do.browserPrefixToStyle=b7;Do.default=void 0;Do.getPrefix=K5;const ag=["Moz","Webkit","O","ms"];function K5(){var n,s;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(s=(n=window.document)==null?void 0:n.documentElement)==null?void 0:s.style;if(!e||t in e)return"";for(let r=0;r<ag.length;r++)if(X5(t,ag[r])in e)return ag[r];return""}function X5(t,e){return e?`${e}${y7(t)}`:t}function b7(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function y7(t){let e="",n=!0;for(let s=0;s<t.length;s++)n?(e+=t[s].toUpperCase(),n=!1):t[s]==="-"?n=!0:e+=t[s];return e}Do.default=K5();Object.defineProperty(At,"__esModule",{value:!0});At.addClassName=Z5;At.addEvent=v7;At.addUserSelectStyles=N7;At.createCSSTransform=T7;At.createSVGTransform=M7;At.getTouch=I7;At.getTouchIdentifier=D7;At.getTranslation=Qb;At.innerHeight=C7;At.innerWidth=E7;At.matchesSelector=J5;At.matchesSelectorAndParentsTo=w7;At.offsetXYFromParent=P7;At.outerHeight=k7;At.outerWidth=_7;At.removeClassName=e3;At.removeEvent=S7;At.scheduleRemoveUserSelectStyles=A7;var qn=sr,dS=Q5(Do);function Q5(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(Q5=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}let Ad="";function J5(t,e){return Ad||(Ad=(0,qn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,qn.isFunction)(t[n])})),(0,qn.isFunction)(t[Ad])?t[Ad](e):!1}function w7(t,e,n){let s=t;do{if(J5(s,e))return!0;if(s===n)return!1;s=s.parentNode}while(s);return!1}function v7(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.addEventListener?t.addEventListener(e,n,r):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function S7(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function k7(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,qn.int)(n.borderTopWidth),e+=(0,qn.int)(n.borderBottomWidth),e}function _7(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,qn.int)(n.borderLeftWidth),e+=(0,qn.int)(n.borderRightWidth),e}function C7(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,qn.int)(n.paddingTop),e-=(0,qn.int)(n.paddingBottom),e}function E7(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,qn.int)(n.paddingLeft),e-=(0,qn.int)(n.paddingRight),e}function P7(t,e,n){const r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-r.left)/n,o=(t.clientY+e.scrollTop-r.top)/n;return{x:i,y:o}}function T7(t,e){const n=Qb(t,e,"px");return{[(0,dS.browserPrefixToKey)("transform",dS.default)]:n}}function M7(t,e){return Qb(t,e,"")}function Qb(t,e,n){let{x:s,y:r}=t,i=`translate(${s}${n},${r}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function I7(t,e){return t.targetTouches&&(0,qn.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,qn.findInArray)(t.changedTouches,n=>e===n.identifier)}function D7(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function N7(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&Z5(t.body,"react-draggable-transparent-selection")}function A7(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{hS(t)}):hS(t)}function hS(t){if(t)try{if(t.body&&e3(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function Z5(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function e3(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.canDragX=L7;rr.canDragY=j7;rr.createCoreData=B7;rr.createDraggableData=$7;rr.getBoundPosition=R7;rr.getControlPosition=F7;rr.snapToGrid=O7;var $n=sr,ia=At;function R7(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:s}=t.props;s=typeof s=="string"?s:z7(s);const r=Jb(t);if(typeof s=="string"){const{ownerDocument:i}=r,o=i.defaultView;let a;if(s==="parent"?a=r.parentNode:a=r.getRootNode().querySelector(s),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');const l=a,c=o.getComputedStyle(r),u=o.getComputedStyle(l);s={left:-r.offsetLeft+(0,$n.int)(u.paddingLeft)+(0,$n.int)(c.marginLeft),top:-r.offsetTop+(0,$n.int)(u.paddingTop)+(0,$n.int)(c.marginTop),right:(0,ia.innerWidth)(l)-(0,ia.outerWidth)(r)-r.offsetLeft+(0,$n.int)(u.paddingRight)-(0,$n.int)(c.marginRight),bottom:(0,ia.innerHeight)(l)-(0,ia.outerHeight)(r)-r.offsetTop+(0,$n.int)(u.paddingBottom)-(0,$n.int)(c.marginBottom)}}return(0,$n.isNum)(s.right)&&(e=Math.min(e,s.right)),(0,$n.isNum)(s.bottom)&&(n=Math.min(n,s.bottom)),(0,$n.isNum)(s.left)&&(e=Math.max(e,s.left)),(0,$n.isNum)(s.top)&&(n=Math.max(n,s.top)),[e,n]}function O7(t,e,n){const s=Math.round(e/t[0])*t[0],r=Math.round(n/t[1])*t[1];return[s,r]}function L7(t){return t.props.axis==="both"||t.props.axis==="x"}function j7(t){return t.props.axis==="both"||t.props.axis==="y"}function F7(t,e,n){const s=typeof e=="number"?(0,ia.getTouch)(t,e):null;if(typeof e=="number"&&!s)return null;const r=Jb(n),i=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,ia.offsetXYFromParent)(s||t,i,n.props.scale)}function B7(t,e,n){const s=!(0,$n.isNum)(t.lastX),r=Jb(t);return s?{node:r,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:r,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function $7(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function z7(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function Jb(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var k0={},_0={};Object.defineProperty(_0,"__esModule",{value:!0});_0.default=U7;function U7(){}Object.defineProperty(k0,"__esModule",{value:!0});k0.default=void 0;var lg=t3(S),bn=Zb(S0),W7=Zb(Ti),dn=At,Wr=rr,cg=sr,ql=Zb(_0);function Zb(t){return t&&t.__esModule?t:{default:t}}function t3(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(t3=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}function yn(t,e,n){return(e=H7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H7(t){var e=V7(t,"string");return typeof e=="symbol"?e:e+""}function V7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ws={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Hr=ws.mouse,C0=class extends lg.Component{constructor(){super(...arguments),yn(this,"dragging",!1),yn(this,"lastX",NaN),yn(this,"lastY",NaN),yn(this,"touchIdentifier",null),yn(this,"mounted",!1),yn(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:s}=n;if(this.props.disabled||!(e.target instanceof s.defaultView.Node)||this.props.handle&&!(0,dn.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,dn.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const r=(0,dn.getTouchIdentifier)(e);this.touchIdentifier=r;const i=(0,Wr.getControlPosition)(e,r,this);if(i==null)return;const{x:o,y:a}=i,l=(0,Wr.createCoreData)(this,o,a);(0,ql.default)("DraggableCore: handleDragStart: %j",l),(0,ql.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,dn.addUserSelectStyles)(s),this.dragging=!0,this.lastX=o,this.lastY=a,(0,dn.addEvent)(s,Hr.move,this.handleDrag),(0,dn.addEvent)(s,Hr.stop,this.handleDragStop))}),yn(this,"handleDrag",e=>{const n=(0,Wr.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let a=s-this.lastX,l=r-this.lastY;if([a,l]=(0,Wr.snapToGrid)(this.props.grid,a,l),!a&&!l)return;s=this.lastX+a,r=this.lastY+l}const i=(0,Wr.createCoreData)(this,s,r);if((0,ql.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=s,this.lastY=r}),yn(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Wr.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let l=s-this.lastX||0,c=r-this.lastY||0;[l,c]=(0,Wr.snapToGrid)(this.props.grid,l,c),s=this.lastX+l,r=this.lastY+c}const i=(0,Wr.createCoreData)(this,s,r);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,dn.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,ql.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,ql.default)("DraggableCore: Removing handlers"),(0,dn.removeEvent)(a.ownerDocument,Hr.move,this.handleDrag),(0,dn.removeEvent)(a.ownerDocument,Hr.stop,this.handleDragStop))}),yn(this,"onMouseDown",e=>(Hr=ws.mouse,this.handleDragStart(e))),yn(this,"onMouseUp",e=>(Hr=ws.mouse,this.handleDragStop(e))),yn(this,"onTouchStart",e=>(Hr=ws.touch,this.handleDragStart(e))),yn(this,"onTouchEnd",e=>(Hr=ws.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,dn.addEvent)(e,ws.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,dn.removeEvent)(n,ws.mouse.move,this.handleDrag),(0,dn.removeEvent)(n,ws.touch.move,this.handleDrag),(0,dn.removeEvent)(n,ws.mouse.stop,this.handleDragStop),(0,dn.removeEvent)(n,ws.touch.stop,this.handleDragStop),(0,dn.removeEvent)(e,ws.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,dn.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,s;return(e=this.props)!=null&&e.nodeRef?(s=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:s.current:W7.default.findDOMNode(this)}render(){return lg.cloneElement(lg.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};k0.default=C0;yn(C0,"displayName","DraggableCore");yn(C0,"propTypes",{allowAnyClick:bn.default.bool,allowMobileScroll:bn.default.bool,children:bn.default.node.isRequired,disabled:bn.default.bool,enableUserSelectHack:bn.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:bn.default.arrayOf(bn.default.number),handle:bn.default.string,cancel:bn.default.string,nodeRef:bn.default.object,onStart:bn.default.func,onDrag:bn.default.func,onStop:bn.default.func,onMouseDown:bn.default.func,scale:bn.default.number,className:cg.dontSetMe,style:cg.dontSetMe,transform:cg.dontSetMe});yn(C0,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=d(S),n=u(S0),s=u(Ti),r=h7,i=At,o=rr,a=sr,l=u(k0),c=u(_0);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,b){if(typeof WeakMap=="function")var w=new WeakMap,y=new WeakMap;return(d=function(k,_){if(!_&&k&&k.__esModule)return k;var E,T,D={__proto__:null,default:k};if(k===null||typeof k!="object"&&typeof k!="function")return D;if(E=_?y:w){if(E.has(k))return E.get(k);E.set(k,D)}for(const C in k)C!=="default"&&{}.hasOwnProperty.call(k,C)&&((T=(E=Object.defineProperty)&&Object.getOwnPropertyDescriptor(k,C))&&(T.get||T.set)?E(D,C,T):D[C]=k[C]);return D})(g,b)}function f(){return f=Object.assign?Object.assign.bind():function(g){for(var b=1;b<arguments.length;b++){var w=arguments[b];for(var y in w)({}).hasOwnProperty.call(w,y)&&(g[y]=w[y])}return g},f.apply(null,arguments)}function p(g,b,w){return(b=m(b))in g?Object.defineProperty(g,b,{value:w,enumerable:!0,configurable:!0,writable:!0}):g[b]=w,g}function m(g){var b=x(g,"string");return typeof b=="symbol"?b:b+""}function x(g,b){if(typeof g!="object"||!g)return g;var w=g[Symbol.toPrimitive];if(w!==void 0){var y=w.call(g,b);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(g)}class v extends e.Component{static getDerivedStateFromProps(b,w){let{position:y}=b,{prevPropsPosition:k}=w;return y&&(!k||y.x!==k.x||y.y!==k.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:y,prevPropsPosition:k}),{x:y.x,y:y.y,prevPropsPosition:{...y}}):null}constructor(b){super(b),p(this,"onDragStart",(w,y)=>{if((0,c.default)("Draggable: onDragStart: %j",y),this.props.onStart(w,(0,o.createDraggableData)(this,y))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(w,y)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",y);const k=(0,o.createDraggableData)(this,y),_={x:k.x,y:k.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:D}=_;_.x+=this.state.slackX,_.y+=this.state.slackY;const[C,A]=(0,o.getBoundPosition)(this,_.x,_.y);_.x=C,_.y=A,_.slackX=this.state.slackX+(T-_.x),_.slackY=this.state.slackY+(D-_.y),k.x=_.x,k.y=_.y,k.deltaX=_.x-this.state.x,k.deltaY=_.y-this.state.y}if(this.props.onDrag(w,k)===!1)return!1;this.setState(_)}),p(this,"onDragStop",(w,y)=>{if(!this.state.dragging||this.props.onStop(w,(0,o.createDraggableData)(this,y))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",y);const _={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:D}=this.props.position;_.x=T,_.y=D}this.setState(_)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,w;return((w=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:w.current)??s.default.findDOMNode(this)}render(){const{axis:b,bounds:w,children:y,defaultPosition:k,defaultClassName:_,defaultClassNameDragging:E,defaultClassNameDragged:T,position:D,positionOffset:C,scale:A,...N}=this.props;let $={},W=null;const F=!!!D||this.state.dragging,j=D||k,R={x:(0,o.canDragX)(this)&&F?this.state.x:j.x,y:(0,o.canDragY)(this)&&F?this.state.y:j.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(R,C):$=(0,i.createCSSTransform)(R,C);const B=(0,r.clsx)(y.props.className||"",_,{[E]:this.state.dragging,[T]:this.state.dragged});return e.createElement(l.default,f({},N,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(y),{className:B,style:{...y.props.style,...$},transform:W}))}}t.default=v,p(v,"displayName","Draggable"),p(v,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(v,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(H5);const{default:n3,DraggableCore:Y7}=H5;v0.exports=n3;v0.exports.default=n3;var G7=v0.exports.DraggableCore=Y7,q7=v0.exports,ey={exports:{}},Uu={},ty={};ty.__esModule=!0;ty.cloneElement=e9;var K7=X7(S);function X7(t){return t&&t.__esModule?t:{default:t}}function fS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function pS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fS(Object(n),!0).forEach(function(s){Q7(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fS(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Q7(t,e,n){return e=J7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J7(t){var e=Z7(t,"string");return typeof e=="symbol"?e:String(e)}function Z7(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function e9(t,e){return e.style&&t.props.style&&(e.style=pS(pS({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),K7.default.cloneElement(t,e)}var Wu={};Wu.__esModule=!0;Wu.resizableProps=void 0;var Ve=t9(S0);function t9(t){return t&&t.__esModule?t:{default:t}}var n9={axis:Ve.default.oneOf(["both","x","y","none"]),className:Ve.default.string,children:Ve.default.element.isRequired,draggableOpts:Ve.default.shape({allowAnyClick:Ve.default.bool,cancel:Ve.default.string,children:Ve.default.node,disabled:Ve.default.bool,enableUserSelectHack:Ve.default.bool,offsetParent:Ve.default.node,grid:Ve.default.arrayOf(Ve.default.number),handle:Ve.default.string,nodeRef:Ve.default.object,onStart:Ve.default.func,onDrag:Ve.default.func,onStop:Ve.default.func,onMouseDown:Ve.default.func,scale:Ve.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="y"){var i;return(i=Ve.default.number).isRequired.apply(i,n)}return Ve.default.number.apply(Ve.default,n)},handle:Ve.default.oneOfType([Ve.default.node,Ve.default.func]),handleSize:Ve.default.arrayOf(Ve.default.number),lockAspectRatio:Ve.default.bool,maxConstraints:Ve.default.arrayOf(Ve.default.number),minConstraints:Ve.default.arrayOf(Ve.default.number),onResizeStop:Ve.default.func,onResizeStart:Ve.default.func,onResize:Ve.default.func,resizeHandles:Ve.default.arrayOf(Ve.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Ve.default.number,width:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="x"){var i;return(i=Ve.default.number).isRequired.apply(i,n)}return Ve.default.number.apply(Ve.default,n)}};Wu.resizableProps=n9;Uu.__esModule=!0;Uu.default=void 0;var Kl=a9(S),s9=q7,r9=ty,i9=Wu,o9=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function s3(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(s3=function(r){return r?n:e})(t)}function a9(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=s3(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function zm(){return zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zm.apply(this,arguments)}function l9(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function gS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function ug(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gS(Object(n),!0).forEach(function(s){c9(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gS(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function c9(t,e,n){return e=u9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u9(t){var e=d9(t,"string");return typeof e=="symbol"?e:String(e)}function d9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Um(t,e)}function Um(t,e){return Um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},Um(t,e)}var ny=function(t){h9(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.handleRefs={},s.lastHandleRect=null,s.slack=null,s}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(r,i){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[r,i];if(c){var u=this.props.width/this.props.height,d=r-this.props.width,f=i-this.props.height;Math.abs(d)>Math.abs(f*u)?i=r/u:r=i*u}var p=r,m=i,x=this.slack||[0,0],v=x[0],g=x[1];return r+=v,i+=g,a&&(r=Math.max(a[0],r),i=Math.max(a[1],i)),l&&(r=Math.min(l[0],r),i=Math.min(l[1],i)),this.slack=[v+(p-r),g+(m-i)],[r,i]},n.resizeHandler=function(r,i){var o=this;return function(a,l){var c=l.node,u=l.deltaX,d=l.deltaY;r==="onResizeStart"&&o.resetData();var f=(o.props.axis==="both"||o.props.axis==="x")&&i!=="n"&&i!=="s",p=(o.props.axis==="both"||o.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!f&&!p)){var m=i[0],x=i[i.length-1],v=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(x==="w"){var g=v.left-o.lastHandleRect.left;u+=g}if(m==="n"){var b=v.top-o.lastHandleRect.top;d+=b}}o.lastHandleRect=v,x==="w"&&(u=-u),m==="n"&&(d=-d);var w=o.props.width+(f?u/o.props.transformScale:0),y=o.props.height+(p?d/o.props.transformScale:0),k=o.runConstraints(w,y);w=k[0],y=k[1];var _=w!==o.props.width||y!==o.props.height,E=typeof o.props[r]=="function"?o.props[r]:null,T=r==="onResize"&&!_;E&&!T&&(a.persist==null||a.persist(),E(a,{node:c,size:{width:w,height:y},handle:i})),r==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(r,i){var o=this.props.handle;if(!o)return Kl.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+r,ref:i});if(typeof o=="function")return o(r,i);var a=typeof o.type=="string",l=ug({ref:i},a?{}:{handleAxis:r});return Kl.cloneElement(o,l)},n.render=function(){var r=this,i=this.props,o=i.children,a=i.className,l=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var c=i.resizeHandles;i.transformScale;var u=l9(i,o9);return(0,r9.cloneElement)(o,ug(ug({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(d){var f,p=(f=r.handleRefs[d])!=null?f:r.handleRefs[d]=Kl.createRef();return Kl.createElement(s9.DraggableCore,zm({},l,{nodeRef:p,key:"resizableHandle-"+d,onStop:r.resizeHandler("onResizeStop",d),onStart:r.resizeHandler("onResizeStart",d),onDrag:r.resizeHandler("onResize",d)}),r.renderResizeHandle(d,p))}))}))},e}(Kl.Component);Uu.default=ny;ny.propTypes=i9.resizableProps;ny.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var E0={};E0.__esModule=!0;E0.default=void 0;var dg=x9(S),f9=r3(S0),p9=r3(Uu),g9=Wu,m9=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function r3(t){return t&&t.__esModule?t:{default:t}}function i3(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(i3=function(r){return r?n:e})(t)}function x9(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=i3(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function Wm(){return Wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Wm.apply(this,arguments)}function mS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function pf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mS(Object(n),!0).forEach(function(s){b9(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mS(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function b9(t,e,n){return e=y9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y9(t){var e=w9(t,"string");return typeof e=="symbol"?e:String(e)}function w9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v9(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function S9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Hm(t,e)}function Hm(t,e){return Hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},Hm(t,e)}var o3=function(t){S9(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.state={width:s.props.width,height:s.props.height,propsWidth:s.props.width,propsHeight:s.props.height},s.onResize=function(a,l){var c=l.size;s.props.onResize?(a.persist==null||a.persist(),s.setState(c,function(){return s.props.onResize&&s.props.onResize(a,l)})):s.setState(c)},s}e.getDerivedStateFromProps=function(r,i){return i.propsWidth!==r.width||i.propsHeight!==r.height?{width:r.width,height:r.height,propsWidth:r.width,propsHeight:r.height}:null};var n=e.prototype;return n.render=function(){var r=this.props,i=r.handle,o=r.handleSize;r.onResize;var a=r.onResizeStart,l=r.onResizeStop,c=r.draggableOpts,u=r.minConstraints,d=r.maxConstraints,f=r.lockAspectRatio,p=r.axis;r.width,r.height;var m=r.resizeHandles,x=r.style,v=r.transformScale,g=v9(r,m9);return dg.createElement(p9.default,{axis:p,draggableOpts:c,handle:i,handleSize:o,height:this.state.height,lockAspectRatio:f,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:m,transformScale:v,width:this.state.width},dg.createElement("div",Wm({},g,{style:pf(pf({},x),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(dg.Component);E0.default=o3;o3.propTypes=pf(pf({},g9.resizableProps),{},{children:f9.default.element});ey.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var k9=ey.exports.Resizable=Uu.default;ey.exports.ResizableBox=E0.default;function a3(t){return function(n,s,r,i,o,a,l){return t(n,s,l)}}function P0(t){return function(n,s,r,i){if(!n||!s||typeof n!="object"||typeof s!="object")return t(n,s,r,i);var o=i.get(n),a=i.get(s);if(o&&a)return o===s&&a===n;i.set(n,s),i.set(s,n);var l=t(n,s,r,i);return i.delete(n),i.delete(s),l}}function l3(t,e){var n={};for(var s in t)n[s]=t[s];for(var s in e)n[s]=e[s];return n}function xS(t){return t.constructor===Object||t.constructor==null}function bS(t){return typeof t.then=="function"}function T0(t,e){return t===e||t!==t&&e!==e}var _9="[object Arguments]",C9="[object Boolean]",E9="[object Date]",P9="[object RegExp]",T9="[object Map]",M9="[object Number]",I9="[object Object]",D9="[object Set]",N9="[object String]",yS=Object.prototype.toString;function M0(t){var e=t.areArraysEqual,n=t.areDatesEqual,s=t.areMapsEqual,r=t.areObjectsEqual,i=t.areRegExpsEqual,o=t.areSetsEqual,a=t.createIsNestedEqual,l=a(c);function c(u,d,f){if(u===d)return!0;if(!u||!d||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;if(xS(u)&&xS(d))return r(u,d,l,f);var p=Array.isArray(u),m=Array.isArray(d);if(p||m)return p===m&&e(u,d,l,f);var x=yS.call(u);return x!==yS.call(d)?!1:x===E9?n(u,d,l,f):x===P9?i(u,d,l,f):x===T9?s(u,d,l,f):x===D9?o(u,d,l,f):x===I9||x===_9?bS(u)||bS(d)?!1:r(u,d,l,f):x===C9||x===M9||x===N9?T0(u.valueOf(),d.valueOf()):!1}return c}function c3(t,e,n,s){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n(t[r],e[r],r,r,t,e,s))return!1;return!0}var A9=P0(c3);function u3(t,e){return T0(t.valueOf(),e.valueOf())}function d3(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={},o=0;return t.forEach(function(a,l){if(r){var c=!1,u=0;e.forEach(function(d,f){!c&&!i[u]&&(c=n(l,f,o,u,t,e,s)&&n(a,d,l,f,t,e,s))&&(i[u]=!0),u++}),o++,r=c}}),r}var R9=P0(d3),O9="_owner",L9=Object.prototype.hasOwnProperty;function h3(t,e,n,s){var r=Object.keys(t),i=r.length;if(Object.keys(e).length!==i)return!1;for(var o;i-- >0;){if(o=r[i],o===O9){var a=!!t.$$typeof,l=!!e.$$typeof;if((a||l)&&a!==l)return!1}if(!L9.call(e,o)||!n(t[o],e[o],o,o,t,e,s))return!1}return!0}var j9=P0(h3);function f3(t,e){return t.source===e.source&&t.flags===e.flags}function p3(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={};return t.forEach(function(o,a){if(r){var l=!1,c=0;e.forEach(function(u,d){!l&&!i[c]&&(l=n(o,u,a,d,t,e,s))&&(i[c]=!0),c++}),r=l}}),r}var F9=P0(p3),g3=Object.freeze({areArraysEqual:c3,areDatesEqual:u3,areMapsEqual:d3,areObjectsEqual:h3,areRegExpsEqual:f3,areSetsEqual:p3,createIsNestedEqual:a3}),m3=Object.freeze({areArraysEqual:A9,areDatesEqual:u3,areMapsEqual:R9,areObjectsEqual:j9,areRegExpsEqual:f3,areSetsEqual:F9,createIsNestedEqual:a3}),B9=M0(g3);function Zr(t,e){return B9(t,e,void 0)}M0(l3(g3,{createIsNestedEqual:function(){return T0}}));M0(m3);M0(l3(m3,{createIsNestedEqual:function(){return T0}}));function wS(t){const{children:e,cols:n,containerWidth:s,margin:r,containerPadding:i,rowHeight:o,maxRows:a,isDraggable:l,isResizable:c,isBounded:u,static:d,useCSSTransforms:f=!0,usePercentages:p=!1,transformScale:m=1,droppingPosition:x,className:v="",style:g,handle:b="",cancel:w="",x:y,y:k,w:_,h:E,minW:T=1,maxW:D=1/0,minH:C=1,maxH:A=1/0,i:N,resizeHandles:$,resizeHandle:W,onDragStart:L,onDrag:F,onDragStop:j,onResizeStart:R,onResize:B,onResizeStop:I}=t,[G,O]=S.useState(!1),[P,Z]=S.useState(!1),Q=S.useRef(null),Y=S.useRef({left:0,top:0}),q=S.useRef({top:0,left:0,width:0,height:0}),J=S.useRef(void 0),se=S.useMemo(()=>({cols:n,containerPadding:i,containerWidth:s,margin:r,maxRows:a,rowHeight:o}),[n,i,s,r,a,o]),we=S.useCallback(oe=>{if(f)return Ub(oe);const re=R5(oe);return p?{...re,left:oS(oe.left/s),width:oS(oe.width/s)}:re},[f,p,s]),Ye=S.useCallback((oe,{node:re})=>{if(!L)return;const{offsetParent:he}=re;if(!he)return;const Ce=he.getBoundingClientRect(),Me=re.getBoundingClientRect(),Fe=Me.left/m,He=Ce.left/m,Oe=Me.top/m,Ae=Ce.top/m,ke={left:Fe-He+he.scrollLeft,top:Oe-Ae+he.scrollTop};Y.current=ke,O(!0);const{x:Ge,y:Be}=bh(se,ke.top,ke.left,_,E);L(N,Ge,Be,{e:oe,node:re,newPosition:ke})},[L,m,se,_,E,N]),Ne=S.useCallback((oe,{node:re,deltaX:he,deltaY:Ce})=>{if(!F||!G)return;let Me=Y.current.top+Ce,Fe=Y.current.left+he;if(u){const{offsetParent:ke}=re;if(ke){const Ge=ke.clientHeight-ff(E,o,r[1]);Me=Qs(Me,0,Ge);const Be=w0(se),ee=s-ff(_,Be,r[0]);Fe=Qs(Fe,0,ee)}}const He={top:Me,left:Fe};Y.current=He;const{x:Oe,y:Ae}=bh(se,Me,Fe,_,E);F(N,Oe,Ae,{e:oe,node:re,newPosition:He})},[F,G,u,E,o,r,se,s,_,N]),Le=S.useCallback((oe,{node:re})=>{if(!j||!G)return;const{left:he,top:Ce}=Y.current,Me={top:Ce,left:he};O(!1),Y.current={left:0,top:0};const{x:Fe,y:He}=bh(se,Ce,he,_,E);j(N,Fe,He,{e:oe,node:re,newPosition:Me})},[j,G,se,_,E,N]),ze=S.useCallback((oe,{node:re,size:he,handle:Ce},Me,Fe)=>{const He=Fe==="onResizeStart"?R:Fe==="onResize"?B:I;if(!He)return;let Oe;re?Oe=WO(Ce,Me,he,s):Oe={...he,top:Me.top,left:Me.left},q.current=Oe;let{w:Ae,h:ke}=o7(se,Oe.width,Oe.height,y,k,Ce);Ae=Qs(Ae,Math.max(T,1),D),ke=Qs(ke,C,A),He(N,Ae,ke,{e:oe.nativeEvent,node:re,size:Oe,handle:Ce})},[R,B,I,s,se,y,k,T,D,C,A,N]),wt=S.useCallback((oe,re)=>{Z(!0);const he=Ai(se,y,k,_,E),Ce={...re,handle:re.handle};ze(oe,Ce,he,"onResizeStart")},[ze,se,y,k,_,E]),M=S.useCallback((oe,re)=>{const he=Ai(se,y,k,_,E),Ce={...re,handle:re.handle};ze(oe,Ce,he,"onResize")},[ze,se,y,k,_,E]),ce=S.useCallback((oe,re)=>{Z(!1),q.current={top:0,left:0,width:0,height:0};const he=Ai(se,y,k,_,E),Ce={...re,handle:re.handle};ze(oe,Ce,he,"onResizeStop")},[ze,se,y,k,_,E]);S.useEffect(()=>{if(!x)return;const oe=Q.current;if(!oe)return;const re=J.current||{left:0,top:0},he=G&&(x.left!==re.left||x.top!==re.top);if(G){if(he){const Ce=x.left-Y.current.left,Me=x.top-Y.current.top,Fe={node:oe,deltaX:Ce,deltaY:Me,lastX:Y.current.left,lastY:Y.current.top,x:x.left,y:x.top};Ne(x.e,Fe)}}else{const Ce={node:oe,deltaX:x.left,deltaY:x.top,lastX:0,lastY:0,x:x.left,y:x.top};Ye(x.e,Ce)}J.current=x},[x,G,Ye,Ne]);const me=Ai(se,y,k,_,E,G?Y.current:null,P?q.current:null),Ie=le.Children.only(e),pe=Ai(se,0,0,n,0).width,_e=Ai(se,0,0,T,C),V=Ai(se,0,0,D,A),ne=[_e.width,_e.height],H=[Math.min(V.width,pe),Math.min(V.height,1/0)],X=Ie.props,xe=X.className,K=X.style;let de=le.cloneElement(Ie,{ref:Q,className:pu("react-grid-item",xe,v,{static:d,resizing:P,"react-draggable":l,"react-draggable-dragging":G,dropping:!!x,cssTransforms:f}),style:{...g,...K,...we(me)}});const be=W;return de=h.jsx(k9,{draggableOpts:{disabled:!c},className:c?void 0:"react-resizable-hide",width:me.width,height:me.height,minConstraints:ne,maxConstraints:H,onResizeStart:wt,onResize:M,onResizeStop:ce,transformScale:m,resizeHandles:$,handle:be,children:de}),de=h.jsx(G7,{disabled:!l,onStart:Ye,onDrag:Ne,onStop:Le,handle:b,cancel:".react-resizable-handle"+(w?","+w:""),scale:m,nodeRef:Q,children:de}),de}var or=()=>{},vS="react-grid-layout",x3=!1;try{x3=/firefox/i.test(navigator.userAgent)}catch{}function $9(t,e){const n=le.Children.toArray(t),s=le.Children.toArray(e);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const i=n[r],o=s[r];if((i==null?void 0:i.key)!==(o==null?void 0:o.key))return!1}return!0}function SS(t,e,n,s,r){const i=[],o=new Set;le.Children.forEach(e,l=>{if(!le.isValidElement(l)||l.key===null)return;const c=String(l.key);o.add(c);const u=t.find(d=>d.i===c);if(u)i.push(ki(u));else{const f=l.props["data-grid"];f?i.push({i:c,x:f.x??0,y:f.y??0,w:f.w??1,h:f.h??1,minW:f.minW,maxW:f.maxW,minH:f.minH,maxH:f.maxH,static:f.static,isDraggable:f.isDraggable,isResizable:f.isResizable,resizeHandles:f.resizeHandles,isBounded:f.isBounded}):i.push({i:c,x:0,y:Sl(i),w:1,h:1})}});const a=qb(i,{cols:n});return yr(a,s,n,r)}function z9(t){const{children:e,width:n,gridConfig:s,dragConfig:r,resizeConfig:i,dropConfig:o,positionStrategy:a=YO,compactor:l,layout:c=[],droppingItem:u,autoSize:d=!0,className:f="",style:p={},innerRef:m,onLayoutChange:x=or,onDragStart:v=or,onDrag:g=or,onDragStop:b=or,onResizeStart:w=or,onResize:y=or,onResizeStop:k=or,onDrop:_=or,onDropDragOver:E=or}=t,T=S.useMemo(()=>({...GO,...s}),[s]),D=S.useMemo(()=>({...qO,...r}),[r]),C=S.useMemo(()=>({...KO,...i}),[i]),A=S.useMemo(()=>({...XO,...o}),[o]),{cols:N,rowHeight:$,maxRows:W,margin:L,containerPadding:F}=T,{enabled:j,bounded:R,handle:B,cancel:I}=D,{enabled:G,handles:O,handleComponent:P}=C,{enabled:Z,defaultItem:Q}=A,Y=l??Xb("vertical"),q=Y.type,J=Y.allowOverlap,se=Y.preventCollision??!1,we=S.useMemo(()=>u??{i:"__dropping-elem__",...Q},[u,Q]),Ye=a.type==="transform",Ne=a.scale,Le=F??L,[ze,wt]=S.useState(!1),[M,ce]=S.useState(()=>SS(c,e,N,q,J)),[me,Ie]=S.useState(null),[pe,_e]=S.useState(!1),[V,ne]=S.useState(null),[H,X]=S.useState(),xe=S.useRef(null),K=S.useRef(null),de=S.useRef(null),be=S.useRef(0),oe=S.useRef(M),re=S.useRef(c),he=S.useRef(e),Ce=S.useRef(q);S.useEffect(()=>{wt(!0),Zr(M,c)||x(M)},[]),S.useEffect(()=>{if(me)return;const ge=!Zr(c,re.current),qe=!$9(e,he.current),Re=q!==Ce.current;if(ge||qe||Re){const tt=SS(ge?c:M,e,N,q,J);ce(tt)}re.current=c,he.current=e,Ce.current=q},[c,e,N,q,J,me,M]),S.useEffect(()=>{!me&&!Zr(M,oe.current)&&(oe.current=M,x(M))},[M,me,x]);const Me=S.useMemo(()=>{if(!d)return;const ge=Sl(M),qe=Le[1];return ge*$+(ge-1)*L[1]+qe*2+"px"},[d,M,$,L,Le]),Fe=S.useCallback((ge,qe,Re,Ue)=>{const tt=Bi(M,ge);if(!tt)return;const Qe={w:tt.w,h:tt.h,x:tt.x,y:tt.y,i:ge};xe.current=ki(tt),de.current=M,Ie(Qe),v(M,tt,tt,null,Ue.e,Ue.node)},[M,v]),He=S.useCallback((ge,qe,Re,Ue)=>{const tt=xe.current,Qe=Bi(M,ge);if(!Qe)return;const St={w:Qe.w,h:Qe.h,x:Qe.x,y:Qe.y,i:ge},rt=Ki(M,Qe,qe,Re,!0,se,q,N,J);g(rt,tt,Qe,St,Ue.e,Ue.node),ce(J?rt:yr(rt,q,N)),Ie(St)},[M,se,q,N,J,g]),Oe=S.useCallback((ge,qe,Re,Ue)=>{if(!me)return;const tt=xe.current,Qe=Bi(M,ge);if(!Qe)return;const St=Ki(M,Qe,qe,Re,!0,se,q,N,J),rt=J?St:yr(St,q,N);b(rt,tt,Qe,null,Ue.e,Ue.node);const Rt=de.current;xe.current=null,de.current=null,Ie(null),ce(rt),Rt&&!Zr(Rt,rt)&&x(rt)},[me,M,se,q,N,J,b,x]),Ae=S.useCallback((ge,qe,Re,Ue)=>{const tt=Bi(M,ge);tt&&(K.current=ki(tt),de.current=M,_e(!0),w(M,tt,tt,null,Ue.e,Ue.node))},[M,w]),ke=S.useCallback((ge,qe,Re,Ue)=>{const tt=K.current,{handle:Qe}=Ue;let St=!1,rt,Rt;const[Ls,Mi]=JO(M,ge,Ot=>(rt=Ot.x,Rt=Ot.y,["sw","w","nw","n","ne"].includes(Qe)&&(["sw","nw","w"].includes(Qe)&&(rt=Ot.x+(Ot.w-qe),qe=Ot.x!==rt&&rt<0?Ot.w:qe,rt=rt<0?0:rt),["ne","n","nw"].includes(Qe)&&(Rt=Ot.y+(Ot.h-Re),Re=Ot.y!==Rt&&Rt<0?Ot.h:Re,Rt=Rt<0?0:Rt),St=!0),se&&!J&&j5(M,{...Ot,w:qe,h:Re,x:rt??Ot.x,y:Rt??Ot.y}).filter(xT=>xT.i!==Ot.i).length>0&&(Rt=Ot.y,Re=Ot.h,rt=Ot.x,qe=Ot.w,St=!1),Ot.w=qe,Ot.h=Re,Ot));if(!Mi)return;let Xu=Ls;St&&rt!==void 0&&Rt!==void 0&&(Xu=Ki(Ls,Mi,rt,Rt,!0,se,q,N,J));const $y={w:Mi.w,h:Mi.h,x:Mi.x,y:Mi.y,i:ge,static:!0};y(Xu,tt,Mi,$y,Ue.e,Ue.node),ce(J?Xu:yr(Xu,q,N)),Ie($y)},[M,se,J,q,N,y]),Ge=S.useCallback((ge,qe,Re,Ue)=>{const tt=K.current,Qe=Bi(M,ge),St=J?M:yr(M,q,N);k(St,tt,Qe??null,null,Ue.e,Ue.node);const rt=de.current;K.current=null,de.current=null,Ie(null),_e(!1),ce(St),rt&&!Zr(rt,St)&&x(St)},[M,J,q,N,k,x]),Be=S.useCallback(()=>{const ge=yr(M.filter(qe=>qe.i!==we.i),q,N,J);ce(ge),ne(null),Ie(null),X(void 0)},[M,we.i,q,N,J]),ee=S.useCallback(ge=>{var rt;if(ge.preventDefault(),ge.stopPropagation(),x3&&!((rt=ge.nativeEvent.target)!=null&&rt.classList.contains(vS)))return!1;const qe=E(ge);if(qe===!1)return V&&Be(),!1;const Re={...we,...qe},Ue=ge.currentTarget.getBoundingClientRect(),tt=ge.clientX-Ue.left,Qe=ge.clientY-Ue.top,St={left:tt/Ne,top:Qe/Ne,e:ge.nativeEvent};if(V)H&&(H.left!==tt||H.top!==Qe)&&X(St);else{const Ls=bh({cols:N,margin:L,maxRows:W,rowHeight:$,containerWidth:n,containerPadding:Le},Qe,tt,Re.w,Re.h);ne(h.jsx("div",{},Re.i)),X(St),ce([...M,{...Re,x:Ls.x,y:Ls.y,static:!1,isDraggable:!0}])}},[V,H,we,E,Be,Ne,N,L,W,$,n,Le,M]),U=S.useCallback(ge=>{ge.preventDefault(),ge.stopPropagation(),be.current--,be.current===0&&Be()},[Be]),z=S.useCallback(ge=>{ge.preventDefault(),ge.stopPropagation(),be.current++},[]),ye=S.useCallback(ge=>{ge.preventDefault(),ge.stopPropagation();const qe=M.find(Re=>Re.i===we.i);be.current=0,Be(),_(M,qe,ge.nativeEvent)},[M,we.i,Be,_]),st=S.useCallback((ge,qe)=>{if(!ge||!ge.key)return null;const Re=Bi(M,String(ge.key));if(!Re)return null;const Ue=typeof Re.isDraggable=="boolean"?Re.isDraggable:!Re.static&&j,tt=typeof Re.isResizable=="boolean"?Re.isResizable:!Re.static&&G,Qe=Re.resizeHandles||[...O],St=Ue&&R&&Re.isBounded!==!1,rt=P;return h.jsx(wS,{containerWidth:n,cols:N,margin:L,containerPadding:Le,maxRows:W,rowHeight:$,cancel:I,handle:B,onDragStart:Fe,onDrag:He,onDragStop:Oe,onResizeStart:Ae,onResize:ke,onResizeStop:Ge,isDraggable:Ue,isResizable:tt,isBounded:St,useCSSTransforms:Ye&&ze,usePercentages:!ze,transformScale:Ne,w:Re.w,h:Re.h,x:Re.x,y:Re.y,i:Re.i,minH:Re.minH,minW:Re.minW,maxH:Re.maxH,maxW:Re.maxW,static:Re.static,droppingPosition:qe?H:void 0,resizeHandles:Qe,resizeHandle:rt,children:ge},Re.i)},[M,n,N,L,Le,W,$,I,B,Fe,He,Oe,Ae,ke,Ge,j,G,R,Ye,ze,Ne,H,O,P]),$e=()=>me?h.jsx(wS,{w:me.w,h:me.h,x:me.x,y:me.y,i:me.i,className:`react-grid-placeholder ${pe?"placeholder-resizing":""}`,containerWidth:n,cols:N,margin:L,containerPadding:Le,maxRows:W,rowHeight:$,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:Ye,transformScale:Ne,children:h.jsx("div",{})}):null,vt=pu(vS,f),ae={height:Me,...p};return h.jsxs("div",{ref:m,className:vt,style:ae,onDrop:Z?ye:void 0,onDragLeave:Z?U:void 0,onDragEnter:Z?z:void 0,onDragOver:Z?ee:void 0,children:[le.Children.map(e,ge=>le.isValidElement(ge)?st(ge):null),Z&&V&&st(V,!0),$e()]})}var U9={lg:1200,md:996,sm:768,xs:480,xxs:0},W9={lg:12,md:10,sm:6,xs:4,xxs:2},hg=()=>{};function H9(t,e,n,s,r){const i=[];le.Children.forEach(e,a=>{if(!le.isValidElement(a)||a.key===null)return;const l=String(a.key),c=t.find(u=>u.i===l);if(c)i.push({...c,i:l});else{const d=a.props["data-grid"];d?i.push({i:l,x:d.x??0,y:d.y??0,w:d.w??1,h:d.h??1,minW:d.minW,maxW:d.maxW,minH:d.minH,maxH:d.maxH,static:d.static,isDraggable:d.isDraggable,isResizable:d.isResizable,resizeHandles:d.resizeHandles,isBounded:d.isBounded}):i.push({i:l,x:0,y:Sl(i),w:1,h:1})}});const o=qb(i,{cols:n});return yr(o,s,n,r)}function V9(t){const{children:e,width:n,breakpoint:s,breakpoints:r=U9,cols:i=W9,layouts:o={},rowHeight:a=150,maxRows:l=1/0,margin:c=[10,10],containerPadding:u=null,compactor:d,onBreakpointChange:f=hg,onLayoutChange:p=hg,onWidthChange:m=hg,...x}=t,v=d??Xb("vertical"),g=v.type,b=v.allowOverlap,w=S.useMemo(()=>s??cS(r,n),[]),y=S.useMemo(()=>uS(w,i),[w,i]),k=S.useMemo(()=>og(o,r,w,w,y,g),[]),[_,E]=S.useState(w),[T,D]=S.useState(y),[C,A]=S.useState(k),[N,$]=S.useState(o),W=S.useRef(n),L=S.useRef(s),F=S.useRef(r),j=S.useRef(i),R=S.useRef(o),B=S.useRef(g);S.useEffect(()=>{if(!Zr(o,R.current)){const Z=og(o,r,_,_,T,g);A(Z),$(o),R.current=o}},[o,r,_,T,g]),S.useEffect(()=>{if(g!==B.current){const Z=yr(Rs(C),g,T,b),Q={...N,[_]:Z};A(Z),$(Q),p(Z,Q),B.current=g}},[g,C,T,b,N,_,p]),S.useEffect(()=>{const Z=n!==W.current,Q=s!==L.current,Y=!Zr(r,F.current),q=!Zr(i,j.current);if(Z||Q||Y||q){const J=s??cS(r,n),se=uS(J,i),we=_;if(we!==J||Y||q){const Le={...N};Le[we]||(Le[we]=Rs(C));let ze=og(Le,r,J,we,se,g);ze=H9(ze,e,se,g,b),Le[J]=ze,E(J),D(se),A(ze),$(Le),f(J,se),p(ze,Le)}const Ye=Nd(c,J),Ne=u?Nd(u,J):null;m(n,Ye,se,Ne),W.current=n,L.current=s,F.current=r,j.current=i}},[n,s,r,i,_,T,C,N,e,g,b,c,u,f,p,m]);const I=S.useCallback(Z=>{const Q={...N,[_]:Z};A(Z),$(Q),p(Z,Q)},[N,_,p]),G=S.useMemo(()=>Nd(c,_),[c,_]),O=S.useMemo(()=>u===null?null:Nd(u,_),[u,_]),P=S.useMemo(()=>({cols:T,rowHeight:a,maxRows:l,margin:G,containerPadding:O}),[T,a,l,G,O]);return h.jsx(z9,{...x,width:n,gridConfig:P,compactor:v,onLayoutChange:I,layout:C,children:e})}function b3(t){const{children:e,width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,rowHeight:u,maxRows:d,margin:f,containerPadding:p,droppingItem:m,compactType:x,preventCollision:v=!1,allowOverlap:g=!1,verticalCompact:b,isDraggable:w=!0,isBounded:y=!1,draggableHandle:k,draggableCancel:_,isResizable:E=!0,resizeHandles:T=["se"],resizeHandle:D,isDroppable:C=!1,useCSSTransforms:A=!0,transformScale:N=1,autoSize:$,className:W,style:L,innerRef:F,onDragStart:j,onDrag:R,onDragStop:B,onResizeStart:I,onResize:G,onResizeStop:O,onDrop:P,onDropDragOver:Z}=t;let Q=x===void 0?"vertical":x;b===!1&&(Q=null);const Y={enabled:w,bounded:y,handle:k,cancel:_},q={enabled:E,handles:T,handleComponent:D},J={enabled:C};let se;A?N!==1?se=VO(N):se=L5:se=HO;const we=Xb(Q,g,v);return h.jsx(V9,{width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,rowHeight:u,maxRows:d,margin:f,containerPadding:p,compactor:we,dragConfig:Y,resizeConfig:q,dropConfig:J,positionStrategy:se,droppingItem:m,autoSize:$,className:W,style:L,innerRef:F,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,onDragStart:j,onDrag:R,onDragStop:B,onResizeStart:I,onResize:G,onResizeStop:O,onDrop:P,onDropDragOver:Z,children:e})}b3.displayName="ResponsiveReactGridLayout";var Y9=b3,G9="react-grid-layout";function q9(t){function e(n){const{measureBeforeMount:s=!1,className:r,style:i,...o}=n,[a,l]=S.useState(1280),[c,u]=S.useState(!1),d=S.useRef(null),f=S.useRef(null);return S.useEffect(()=>{u(!0),f.current=new ResizeObserver(m=>{if(d.current instanceof HTMLElement&&m[0]){const v=m[0].contentRect.width;l(v)}});const p=d.current;return p instanceof HTMLElement&&f.current.observe(p),()=>{var m;p instanceof HTMLElement&&f.current&&f.current.unobserve(p),(m=f.current)==null||m.disconnect()}},[]),s&&!c?h.jsx("div",{className:pu(r,G9),style:i,ref:d}):h.jsx(t,{innerRef:d,className:r,style:i,...o,width:a})}return e.displayName=`WidthProvider(${t.displayName||t.name||"Component"})`,e}const Fc=[[0,0,8,16],[8,0,2,16],[0,31,3,12],[0,16,3,20],[3,16,7,7],[3,23,7,8],[5,31,7,6],[3,39,3,6]],K9=[[0,0,8,16],[8,0,2,16],[8,39,2,11],[8,16,2,23],[0,16,8,7],[0,23,8,8],[0,31,8,6],[0,39,3,6]],kS=0,X9=7;function Q9(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""}function J9(t,e){return Math.floor(Math.random()*(e-t+1))+t}function Z9(t){const e=Math.ceil(Math.random()*4)+1;return{x:J9(0,5)*2%12,y:Math.floor(t/6)*e,w:2,h:e,i:t.toString(),static:Math.random()<.05}}function eL(t,e){const[n,s,r,i]=e;return{x:n,y:s,w:r,h:i,i:t.toString(),static:!0}}function Bc(t,e){const n=t.length,s=[];for(let r=0;r<n;r++)r<t.length?s.push(eL(r,t[r])):s.push(Z9(r));return s}function tL(t,e){const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const r of n){const i=t[r],o=e[r];if(!i||!o){if(i!==o)return!1;continue}if(i.length!==o.length)return!1;for(let a=0;a<i.length;a++){const l=i[a],c=o[a];if(l.x!==c.x||l.y!==c.y||l.w!==c.w||l.h!==c.h)return!1}}return!0}function fg(t,e){const n={};for(const s in t){const r=t[s];r&&(n[s]=r.map(i=>({...i,static:e})))}return n}const nL=q9(Y9),Lf=class Lf extends le.Component{constructor(n){super(n);ie(this,"isUpdatingLayout",!1);ie(this,"domCache",null);ie(this,"lastLayoutKey","");ie(this,"handleResponsiveLayoutChange",(n,s)=>{const r=Array.isArray(n)?n:[n],i=s;this.onLayoutChange(r,i)});ie(this,"generateNewLayout",()=>{const n=Bc(Fc),s=this.props.allStatic??this.state.allStatic,r=n.map(i=>({...i,static:s}));this.domCache=null,this.lastLayoutKey="",this.setState({layouts:{lg:r}})});this.state={currentBreakpoint:"lg",compactType:n.compactType??"vertical",mounted:!1,layouts:{lg:n.initialLayout||Bc(Fc)},allStatic:n.allStatic??!0},this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onCompactTypeChange=this.onCompactTypeChange.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.onNewLayout=this.onNewLayout.bind(this),this.onToggleStatic=this.onToggleStatic.bind(this)}componentDidMount(){this.setState({mounted:!0})}generateDOM(){const n=this.state.layouts.lg||[],{slotContent:s=[]}=this.props,r=this.props.allStatic??this.state.allStatic,i=`${n.length}-${r}-${s.length}`;if(this.domCache&&this.lastLayoutKey===i)return this.domCache;const o=[];for(let a=0;a<n.length;a++){const l=n[a],c=a>=kS&&a<=X9,u=a-kS,d=c&&s[u]?s[u]:null,f=l.static??r;o.push(h.jsx("div",{className:f?"static":"",children:d?h.jsx("div",{className:"external-slot-content",children:d}):f?h.jsxs("span",{className:"text",title:"This item is static and cannot be removed or resized.",children:["Static - ",a]}):h.jsx("span",{className:"text",children:a})},l.i||a.toString()))}return this.domCache=o,this.lastLayoutKey=i,o}onBreakpointChange(n){this.setState({currentBreakpoint:n})}onCompactTypeChange(){if(this.props.onCompactTypeChange)this.props.onCompactTypeChange();else{const{compactType:n}=this.state,s=n==="horizontal"?"vertical":n==="vertical"?null:"horizontal";this.setState({compactType:s})}}onLayoutChange(n,s){if(this.isUpdatingLayout){this.props.onLayoutChange(n,s);return}const r=this.props.allStatic??this.state.allStatic;if(r){this.props.onLayoutChange(n,s);return}const i=fg(s,r);!tL(this.state.layouts,i)&&(this.domCache=null,this.lastLayoutKey="",this.isUpdatingLayout=!0,this.setState({layouts:i},()=>{this.isUpdatingLayout=!1})),this.props.onLayoutChange(n,i)}onNewLayout(){this.props.onNewLayout?this.props.onNewLayout():this.generateNewLayout()}onToggleStatic(){if(this.props.onToggleStatic)this.props.onToggleStatic();else{const n=!this.state.allStatic,s=fg(this.state.layouts,n);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:n,layouts:s})}}componentDidUpdate(n){if(n.compactType!==this.props.compactType&&this.props.compactType!==void 0&&this.setState({compactType:this.props.compactType}),n.allStatic!==this.props.allStatic&&this.props.allStatic!==void 0){const s=fg(this.state.layouts,this.props.allStatic);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:this.props.allStatic,layouts:s})}n.slotContent!==this.props.slotContent&&(this.domCache=null,this.lastLayoutKey="")}render(){const{cols:n}=this.props,s=n||Lf.defaultProps.cols||{},r=this.props.compactType??this.state.compactType;return h.jsxs("div",{children:[h.jsxs("div",{children:["Current Breakpoint: ",this.state.currentBreakpoint," (",s[this.state.currentBreakpoint]," columns)"]}),h.jsxs("div",{children:["Compaction type: ",Q9(r)||"No Compaction"]}),h.jsx(nL,{...this.props,layouts:this.state.layouts,onBreakpointChange:this.onBreakpointChange,onLayoutChange:this.handleResponsiveLayoutChange,measureBeforeMount:!1,useCSSTransforms:this.state.mounted,compactType:r,preventCollision:!r,children:this.generateDOM()})]})}};ie(Lf,"defaultProps",{className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},initialLayout:Bc(Fc)});let Vm=Lf;function y3(){const t=document.getElementById("tradingview-widget-script");t&&t.parentNode&&t.parentNode.removeChild(t)}function sL(){return new Promise((t,e)=>{if(typeof window.TradingView<"u"){t();return}y3();const n=document.createElement("script");n.id="tradingview-widget-script",n.src=GD,n.async=!0,n.onload=()=>{typeof window.TradingView<"u"?t():e(new Error("TradingView script loaded but TradingView object not found"))},n.onerror=()=>{e(new Error("Failed to load TradingView script"))},document.head.appendChild(n)})}function rL(t){if(typeof window.TradingView>"u")throw new Error("TradingView is not loaded. Call loadTradingViewScript() first.");const e={autosize:t.autosize!==!1,symbol:t.symbol,interval:t.interval,timezone:t.timezone||"Etc/UTC",theme:"dark",style:"1",locale:t.locale||"en",toolbar_bg:"#1a1a1a",enable_publishing:t.enablePublishing||!1,hide_top_toolbar:t.hideTopToolbar||!1,hide_legend:t.hideLegend||!1,save_image:!1,container_id:t.containerId,hide_volume:t.hideVolume||!1,studies:t.studies||["RSI@tv-basicstudies","MASimple@tv-basicstudies"]};return new window.TradingView.widget(e)}function iL(){return`tradingview-widget-container-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function oL({symbol:t=VD,interval:e=YD,isCollapsed:n=!1,className:s=""}){const r=S.useRef(null),i=S.useRef(null),o=S.useRef(iL());return S.useEffect(()=>{if(n||!r.current)return;r.current&&(r.current.id=o.current);let a=!0;return sL().then(()=>{if(!a||!r.current)return;const l={symbol:t,interval:e,containerId:o.current};i.current=rL(l)}).catch(l=>{console.error("Failed to load TradingView widget:",l)}),()=>{a=!1,i.current&&(i.current=null)}},[t,e,n]),S.useEffect(()=>()=>{y3()},[]),n?h.jsx("div",{className:`tradingview-widget-container ${s}`}):h.jsx("div",{className:`tradingview-widget-wrapper ${s}`,children:h.jsx("div",{ref:r,id:o.current,className:"tradingview-widget-container"})})}function aL(t,e,n){return e!==t?h.jsx("span",{style:{fontSize:"0.7rem",opacity:.5,marginLeft:"0.25rem"},children:""}):h.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"0.25rem"},children:n==="asc"?"":""})}function kl({message:t="Loading..."}){return h.jsx("div",{className:"message loading",children:t})}function _l({error:t}){return h.jsxs("div",{className:"message error",children:["Error: ",t]})}function Pr({message:t}){return h.jsx("div",{className:"message empty",children:t})}function w3({message:t}){return h.jsx("div",{className:"message warning",children:t})}function sy({isConnected:t,connectedText:e=" LIVE",disconnectedText:n=" OFFLINE"}){return h.jsx("div",{className:"status-indicator",children:h.jsx("span",{className:`status-dot ${t?"connected":"disconnected"}`,children:t?e:n})})}function Cl({title:t,children:e}){return h.jsxs("div",{className:"layout-header",children:[h.jsx("div",{className:"layout-header-title",children:t}),e&&h.jsx("div",{className:"layout-header-actions",children:e})]})}function Wt({field:t,currentSortField:e,sortDirection:n,onSort:s,children:r,center:i=!1}){return h.jsxs("div",{className:`table-header-cell ${i?"center":""}`,onClick:()=>s(t),children:[r,aL(t,e,n)]})}function v3({children:t,center:e=!1}){return h.jsx("div",{className:`table-header-cell ${e?"center":""}`,children:t})}function lL({onClick:t,disabled:e}){return console.log("[CancelButton] Rendering",{disabled:e,hasOnClick:!!t}),h.jsx("button",{onClick:n=>{console.log("[CancelButton] Button clicked",{disabled:e,event:n}),!e&&t?t(n):console.warn("[CancelButton] Click ignored - button is disabled",{disabled:e})},onMouseDown:n=>{console.log("[CancelButton] Mouse down",{disabled:e,event:n})},className:"btn btn-danger",disabled:e,style:{pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer"},children:"Cancel"})}function cL({onClick:t}){return h.jsx("button",{onClick:t,className:"btn btn-success",children:"Close"})}const S3=({level:t,index:e,isLast:n,depthPercent:s,formatPrice:r,formatSize:i})=>{const o=t.flash==="up"?"flash-up":t.flash==="down"?"flash-down-ask":"";return h.jsxs("div",{className:`orderbook-level ask ${o}`,style:{borderBottom:n?"none":void 0},children:[h.jsx("div",{className:"orderbook-depth-bar ask",style:{width:`${s}%`}}),h.jsx("div",{className:"orderbook-level-content ask",children:r(t.price)}),h.jsx("div",{className:"orderbook-level-content right",children:i(t.size)}),h.jsx("div",{className:"orderbook-depth-indicator",children:h.jsx("div",{className:"orderbook-depth-line ask"})})]})},k3=({level:t,index:e,isLast:n,depthPercent:s,formatPrice:r,formatSize:i})=>{const o=t.flash==="up"?"flash-up":t.flash==="down"?"flash-down-bid":"";return h.jsxs("div",{className:`orderbook-level bid ${o}`,style:{borderBottom:n?"none":void 0},children:[h.jsx("div",{className:"orderbook-depth-bar bid",style:{width:`${s}%`}}),h.jsx("div",{className:"orderbook-level-content bid",children:r(t.price)}),h.jsx("div",{className:"orderbook-level-content right",children:i(t.size)}),h.jsx("div",{className:"orderbook-depth-indicator",children:h.jsx("div",{className:"orderbook-depth-line bid"})})]})};function uL({baseURL:t,wsURL:e,marketId:n,maxDepth:s=l5,height:r=a5,authToken:i,walletAddress:o,deviceID:a}){var T,D;const{orderbook:l,loading:c,error:u,isConnected:d,wsError:f}=c5({baseURL:t,wsURL:e,marketId:n,maxDepth:s,authToken:i,walletAddress:o,deviceID:a}),p=S.useRef(null),m=S.useRef(null),x=S.useRef(null),v=S.useRef(0),g=S.useRef(0);S.useEffect(()=>{const C=l.asks.length!==v.current,A=l.bids.length!==g.current;if(!(!C&&!A))return v.current=l.asks.length,g.current=l.bids.length,x.current!==null&&cancelAnimationFrame(x.current),x.current=requestAnimationFrame(()=>{if(p.current&&C){const N=p.current;N.scrollTop=N.scrollHeight}if(m.current&&A){const N=m.current;N.scrollTop=0}x.current=null}),()=>{x.current!==null&&(cancelAnimationFrame(x.current),x.current=null)}},[l.asks.length,l.bids.length]);const b=l.asks.length>0?((T=l.asks[l.asks.length-1])==null?void 0:T.cumulative)??0:0,w=l.bids.length>0?((D=l.bids[l.bids.length-1])==null?void 0:D.cumulative)??0:0,y=S.useMemo(()=>Math.max(b,w),[b,w]),k=rf,_=of,E=S.useCallback(C=>y===0?0:C/y*100,[y]);return c?h.jsx(kl,{message:"Loading orderbook..."}):u?h.jsx(_l,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[f&&(l.asks.length>0||l.bids.length>0)&&h.jsxs("div",{className:"orderbook-ws-warning",children:[h.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),h.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),h.jsx(Cl,{title:h.jsx(sy,{isConnected:d}),children:h.jsxs("div",{children:["Depth: ",s]})}),l.midPrice&&h.jsxs("div",{className:"orderbook-mid-price",children:[h.jsx("div",{className:"orderbook-mid-price-value",children:k(l.midPrice)}),l.spread!==void 0&&h.jsxs("div",{className:"orderbook-mid-price-spread",children:["Spread: ",k(l.spread)]})]}),h.jsxs("div",{className:"orderbook-content",children:[h.jsxs("div",{className:"orderbook-section",ref:p,children:[l.asks.map((C,A)=>{const N=E(C.cumulative);return h.jsx(S3,{level:C,index:A,isLast:A===l.asks.length-1,depthPercent:N,formatPrice:k,formatSize:_},`ask-${C.price}-${A}`)}),l.asks.length===0&&h.jsx(Pr,{message:"No ask orders"})]}),h.jsxs("div",{className:"orderbook-section bids",ref:m,children:[l.bids.map((C,A)=>{const N=E(C.cumulative);return h.jsx(k3,{level:C,index:A,isLast:A===l.bids.length-1,depthPercent:N,formatPrice:k,formatSize:_},`bid-${C.price}-${A}`)}),l.bids.length===0&&h.jsx(Pr,{message:"No bid orders"})]})]}),h.jsx(_3,{totalBids:w,totalAsks:b})]})}const _3=le.memo(({totalBids:t,totalAsks:e})=>{const n=t+e,s=n>0?`${(t/n*100).toFixed(0)}%`:"0%",r=n>0?`${(e/n*100).toFixed(0)}%`:"0%";return h.jsxs("div",{className:"orderbook-footer",children:[h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar bid"}),h.jsx("span",{className:"color-text-muted",children:s})]}),h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar ask"}),h.jsx("span",{className:"color-text-muted",children:r})]})]})});_3.displayName="FooterSummary";const dL=le.memo(uL);function hL({baseURL:t,wsURL:e,marketId:n,maxDepth:s=l5,height:r=a5,authToken:i,walletAddress:o,deviceID:a}){var E,T;const{orderbook:l,loading:c,error:u,isConnected:d,wsError:f}=c5({baseURL:t,wsURL:e,marketId:n,maxDepth:s,authToken:i,walletAddress:o,deviceID:a}),p=S.useRef(null),m=S.useRef(null),x=S.useRef(null),v=l.asks.length>0?((E=l.asks[l.asks.length-1])==null?void 0:E.cumulative)??0:0,g=l.bids.length>0?((T=l.bids[l.bids.length-1])==null?void 0:T.cumulative)??0:0,b=S.useMemo(()=>Math.max(v,g),[v,g]),w=rf,y=of,k=S.useCallback(D=>b===0?0:D/b*100,[b]);S.useEffect(()=>{if(!p.current||!m.current)return;const D=p.current,C=m.current,A=requestAnimationFrame(()=>{const N=D.scrollHeight,$=C.clientHeight;if(N>$){let W;if(x.current&&l.spread!==void 0){const L=x.current,F=L.offsetTop,j=L.offsetHeight;W=F+j/2-$/2}else{const L=D.querySelectorAll(".orderbook-level.ask"),F=D.querySelectorAll(".orderbook-level.bid");if(L.length>0&&F.length>0){const j=L[L.length-1],R=F[0],B=j.offsetTop+j.offsetHeight,I=R.offsetTop;W=(B+I)/2-$/2}else return}C.scrollTop=Math.max(0,W)}});return()=>{cancelAnimationFrame(A)}},[l.asks.length,l.bids.length,l.spread,b]);const _=S.useCallback(()=>{},[]);return c?h.jsx(kl,{message:"Loading orderbook..."}):u?h.jsx(_l,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[f&&(l.asks.length>0||l.bids.length>0)&&h.jsxs("div",{className:"orderbook-ws-warning",children:[h.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),h.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),h.jsx(Cl,{title:h.jsx(sy,{isConnected:d}),children:h.jsxs("div",{children:["Depth: ",s]})}),h.jsx("div",{className:"orderbook-content",ref:m,onScroll:_,children:h.jsxs("div",{className:"orderbook-section",ref:p,children:[l.asks.map((D,C)=>{const A=k(D.cumulative);return h.jsx(S3,{level:D,index:C,isLast:C===l.asks.length-1&&l.bids.length===0,depthPercent:A,formatPrice:w,formatSize:y},`ask-${D.price}-${C}`)}),l.spread!==void 0&&h.jsxs("div",{className:"orderbook-mid-price-spread",ref:x,children:["Spread: ",w(l.spread)]}),l.bids.map((D,C)=>{const A=k(D.cumulative);return h.jsx(k3,{level:D,index:C,isLast:C===l.bids.length-1,depthPercent:A,formatPrice:w,formatSize:y},`bid-${D.price}-${C}`)}),l.asks.length===0&&l.bids.length===0&&h.jsx(Pr,{message:"No orders"}),l.asks.length===0&&l.bids.length>0&&h.jsx(Pr,{message:"No ask orders"}),l.bids.length===0&&l.asks.length>0&&h.jsx(Pr,{message:"No bid orders"})]})}),h.jsx(C3,{totalBids:g,totalAsks:v})]})}const C3=le.memo(({totalBids:t,totalAsks:e})=>{const n=t+e,s=n>0?`${(t/n*100).toFixed(0)}%`:"0%",r=n>0?`${(e/n*100).toFixed(0)}%`:"0%";return h.jsxs("div",{className:"orderbook-footer",children:[h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar bid"}),h.jsx("span",{className:"color-text-muted",children:s})]}),h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar ask"}),h.jsx("span",{className:"color-text-muted",children:r})]})]})});C3.displayName="FooterSummary";const fL=le.memo(hL);function pL({baseURL:t=el,wsURL:e=o5,marketId:n=FD,symbol:s,limit:r=BD,authToken:i,walletAddress:o,deviceID:a}){const{lastPrice:l,displayPrice:c,loading:u,error:d,isConnected:f,priceChange:p}=d0({baseURL:t,wsURL:e,marketId:n,symbol:s,limit:r,authToken:i,walletAddress:o,deviceID:a}),[m,x]=S.useState([]),[v,g]=S.useState(!1),b=S.useRef(null),w=S.useRef(!1),y=S.useRef(null),k=S.useCallback(async()=>{if(!b.current||!n){console.debug("[TradePrice] fetchRecentTrades skipped: missing client or marketId");return}if(w.current){console.debug("[TradePrice] fetchRecentTrades skipped: already fetching");return}console.debug("[TradePrice] Starting fetchRecentTrades"),w.current=!0,g(!0);try{const R=await b.current.getRecentTrades(n,20);if(R&&Array.isArray(R)&&R.length>0){const I=[...R].sort((G,O)=>{const P=fr(G.timestamp);return fr(O.timestamp)-P}).map(G=>{const O=fr(G.timestamp),P=typeof G.quantity=="string"?ve(G.quantity):typeof G.quantity=="number"?G.quantity:0,Z=typeof G.price=="string"?ve(G.price):typeof G.price=="number"?G.price:0;return{time:O,size:P,price:Z,is_buyer_maker:!1}});x(I),console.debug("[TradePrice] fetchRecentTrades completed successfully")}else x([]),console.debug("[TradePrice] fetchRecentTrades: no trades returned")}catch(R){console.error("[TradePrice] Failed to fetch recent trades:",R),x([])}finally{console.debug("[TradePrice] fetchRecentTrades finished, clearing loading state"),g(!1),w.current=!1}},[n]);S.useEffect(()=>{if(!n){console.debug("[TradePrice] Initialization skipped: no marketId");return}console.debug("[TradePrice] Initializing trades fetch for marketId:",n),w.current=!1,g(!1),b.current=new pn({baseURL:t});const R=setTimeout(()=>{b.current&&n&&!w.current?(console.debug("[TradePrice] Executing initial fetchRecentTrades"),k()):console.debug("[TradePrice] Initial fetch skipped:",{hasClient:!!b.current,hasMarketId:!!n,isFetching:w.current})},100);return()=>{console.debug("[TradePrice] Cleaning up trades fetch effect"),clearTimeout(R),w.current=!1,g(!1)}},[t,n]);const _=S.useRef(""),E=S.useRef(null),T=S.useCallback(()=>{const R=y.current;if(!R)return;const B=R.parentElement;if(!B)return;const I=R.textContent||"";if(!I)return;const G=window.getComputedStyle(B),O=parseFloat(G.paddingLeft)+parseFloat(G.paddingRight),P=B.clientWidth-O;let Z=12,Q=48,Y=Z;const q=document.createElement("div");for(q.style.position="absolute",q.style.visibility="hidden",q.style.whiteSpace="nowrap",q.style.fontFamily=window.getComputedStyle(R).fontFamily,q.style.fontWeight=window.getComputedStyle(R).fontWeight,document.body.appendChild(q);Z<=Q;){const se=Math.floor((Z+Q)/2);q.style.fontSize=`${se}px`,q.textContent=I,q.offsetWidth<=P?(Y=se,Z=se+1):Q=se-1}document.body.removeChild(q);const J=parseFloat(window.getComputedStyle(R).fontSize);Math.abs(J-Y)>.5&&(R.style.fontSize=`${Y}px`)},[]);S.useEffect(()=>{if(c==null)return;const R=Hp(c);if(R===_.current)return;_.current=R,E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{T()},150);let B;const I=()=>{clearTimeout(B),B=window.setTimeout(()=>{E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{T()},150)},100)};return window.addEventListener("resize",I),()=>{E.current!==null&&clearTimeout(E.current),clearTimeout(B),window.removeEventListener("resize",I)}},[c,T]);const D=S.useCallback(R=>{if(!R||isNaN(R)||R<=0)return"Invalid";let B=R;B<9466848e5&&(B=B*1e3);const I=new Date(B);return isNaN(I.getTime())?"Invalid":I.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},[]),C=S.useCallback(R=>R?"#51cf66":"#ff6b6b",[]),A=S.useCallback(R=>R?"BUY":"SELL",[]),N=S.useCallback(R=>R?"":"",[]);if(u)return h.jsx(kl,{message:"Loading trade price..."});if(d)return h.jsx(_l,{error:d});if(c==null)return h.jsx(Pr,{message:"No trade data available"});const $=l&&l.is_buyer_maker!==void 0,W=$?C(l.is_buyer_maker):"#888",L=$?A(l.is_buyer_maker):"N/A",F=$?N(l.is_buyer_maker):"",j=p==="up"?"flash-price-up":p==="down"?"flash-price-down":"";return h.jsxs("div",{className:"layout-container trade-price-container",children:[h.jsx(Cl,{title:h.jsx(sy,{isConnected:f}),children:h.jsx("div",{children:"Last Trade Price"})}),h.jsxs("div",{className:`trade-price-main ${j}`,children:[h.jsx("div",{ref:y,className:"trade-price-value",style:{color:W},children:Hp(c)}),h.jsxs("div",{className:"trade-price-side",style:{color:W},children:[h.jsx("span",{children:F}),h.jsx("span",{children:L})]})]}),h.jsx("div",{className:"trade-price-trades-table",children:v?h.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#888"},children:"Loading trades..."}):m.length===0?h.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#888"},children:"No trades available"}):h.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[h.jsx("thead",{children:h.jsxs("tr",{style:{borderBottom:"1px solid #2a2e39",color:"#888"},children:[h.jsx("th",{style:{textAlign:"left",padding:"0.5rem",fontWeight:"500"},children:"Time"}),h.jsx("th",{style:{textAlign:"right",padding:"0.5rem",fontWeight:"500"},children:"Size"}),h.jsx("th",{style:{textAlign:"right",padding:"0.5rem",fontWeight:"500"},children:"Price"})]})}),h.jsx("tbody",{children:m.map(R=>{const B=R.is_buyer_maker?"#51cf66":"#ff6b6b";return h.jsxs("tr",{style:{borderBottom:"1px solid #2a2e39"},children:[h.jsx("td",{style:{padding:"0.5rem",color:"#d1d4dc"},children:D(R.time)}),h.jsx("td",{style:{padding:"0.5rem",textAlign:"right",color:"#d1d4dc"},children:_N(R.size)}),h.jsx("td",{style:{padding:"0.5rem",textAlign:"right",color:B,fontWeight:"500"},children:Hp(R.price)})]},`${R.time}-${R.price}-${R.size}`)})})]})})]})}const gL=le.memo(pL),mL=({...t})=>h.jsx(rA,{...t,className:"toaster",expand:!0,richColors:!1,closeButton:!1,toastOptions:{duration:4e3,classNames:{toast:"toast",title:"toast-title",description:"toast-description",actionButton:"toast-action-button",cancelButton:"toast-cancel-button",closeButton:"toast-close-button"}}}),xL=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch{try{const n=document.createElement("textarea");return n.value=t,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),!0}catch(n){return console.error("Failed to copy to clipboard:",n),!1}}},In=t=>({label:"Copy",onClick:async()=>{await xL(t)?Te.success("Error message copied to clipboard"):Te.error("Failed to copy error message")}});function E3(t){const e=t.useWebSocket!==!1,[n,s]=S.useState([]),[r,i]=S.useState(!0),[o,a]=S.useState(""),[l,c]=S.useState(0),u=S.useRef(null),d=S.useRef(null),f=S.useRef(0),p=S.useRef(!0),m=S.useRef(!1),x=S.useRef(t);x.current=t;const v=S.useCallback(y=>{console.log("[useBucketCollections] [transformBucketToCollection] Transforming bucket:",{rawBucket:y,bucketId:y.bucket_id,usedMargin:y.used_margin,totalEquity:y.total_equity,dedicatedMargin:y.dedicated_margin});const k=r5(y,ve);console.log("[useBucketCollections] [transformBucketToCollection] Transformed to Bucket:",k);const _=String(k.bucketId).trim();(!_||_===""||_==="undefined"||_==="null")&&console.warn("[useBucketCollections] [transformBucketToCollection] Invalid bucketId detected:",{bucketId:_,rawBucket:{bucket_id:y.bucket_id},fullRawBucket:y});const E=wD(k);return console.log("[useBucketCollections] [transformBucketToCollection] Final BucketCollection:",E),E},[]),g=S.useCallback(async()=>{if(!u.current)return;const y=x.current;if(!y.walletAddress||y.walletAddress.trim()===""){c(0);return}try{const k=await u.current.getBalanceDecimal(y.walletAddress,"USDC"),_=ve(k.available_balance);c(_)}catch(k){console.warn("Failed to fetch spot wallet balance (USDC):",k),c(0)}},[]),b=S.useCallback(async()=>{if(!u.current)return;const y=x.current;if(!y.walletAddress||y.walletAddress.trim()===""){a("Wallet address is required"),s([]),i(!1),p.current=!1;return}a(""),p.current&&i(!0);try{console.log("[useBucketCollections] [fetchCollections] Starting fetch...",{walletAddress:y.walletAddress,useWebSocket:e,isSubscribed:m.current}),g(),console.log("[useBucketCollections] [fetchCollections] Calling getBuckets API...");const k=await u.current.getBuckets(y.walletAddress);console.log("[useBucketCollections] [fetchCollections] Raw API response:",{response:k,responseType:typeof k,isArray:Array.isArray(k),responseLength:Array.isArray(k)?k.length:"N/A"});const _=Array.isArray(k)?k:[];console.log("[useBucketCollections] [fetchCollections] Buckets data after normalization:",{bucketsData:_,bucketsDataLength:_.length,bucketsDataTypes:_.map((D,C)=>({index:C,type:typeof D,hasBucketId:!!(D!=null&&D.bucket_id),bucketId:D==null?void 0:D.bucket_id}))}),console.log(`[useBucketCollections] [fetchCollections] About to transform ${_.length} buckets:`,_);const E=_.map(v);console.log(`[useBucketCollections] [fetchCollections] Transformed ${E.length} bucket collections:`,E.map(D=>({bucketId:D.bucketId,marginType:D.marginType,nominalValue:D.nominalValue,maintenanceMargin:D.maintenanceMargin,riskRatio:D.riskRatio})));const T=E.filter(D=>D.bucketId&&D.bucketId.trim()!=="");T.length!==E.length&&console.warn(`[useBucketCollections] [fetchCollections] Filtered out ${E.length-T.length} collections with empty bucketId`,{filtered:E.filter(D=>!D.bucketId||D.bucketId.trim()==="")}),console.log("[useBucketCollections] [fetchCollections] Setting collections state:",{validCollectionsCount:T.length,validCollections:T}),s(T),(!e||!m.current)&&(p.current=!1,i(!1))}catch(k){const _=k instanceof Error?k.message:"Failed to load bucket collections";a(_),console.error("[useBucketCollections] [fetchCollections] Failed to fetch bucket collections:",{error:k,errorMessage:_,walletAddress:y.walletAddress,stack:k instanceof Error?k.stack:void 0}),(!e||!m.current)&&(p.current=!1,i(!1))}},[v,g,e]),w=S.useCallback(y=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] WebSocket data received:",{data:y,hasBuckets:!!y.buckets,bucketsIsArray:Array.isArray(y.buckets),bucketsLength:Array.isArray(y.buckets)?y.buckets.length:0}),y.buckets&&Array.isArray(y.buckets)){console.log("[useBucketCollections] [handleBucketsUpdate] Transforming WebSocket buckets:",y.buckets);const k=y.buckets.map(v);console.log("[useBucketCollections] [handleBucketsUpdate] Transformed collections:",k);const _=k.filter(E=>E.bucketId&&E.bucketId.trim()!=="");_.length!==k.length&&console.warn(`[useBucketCollections] [handleBucketsUpdate] WebSocket: Filtered out ${k.length-_.length} collections with empty bucketId`,{filtered:k.filter(E=>!E.bucketId||E.bucketId.trim()==="")}),console.log("[useBucketCollections] [handleBucketsUpdate] Setting collections from WebSocket:",{validCollectionsCount:_.length,validCollections:_}),s(E=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] Previous collections:",{prevCount:E.length,prev:E}),E.length!==_.length)return _;const T=JSON.stringify(E),D=JSON.stringify(_);return T===D?E:_}),p.current&&(p.current=!1,i(!1))}},[v]);return S.useEffect(()=>{if(!t.walletAddress||t.walletAddress.trim()===""){i(!1),a("Wallet address is required"),s([]),d.current&&(d.current.disconnect(),d.current=null),f.current!==null&&(clearInterval(f.current),f.current=0);return}if(!t.wsURL||t.wsURL.trim()===""){i(!1),a("WebSocket URL is required"),s([]);return}const y=new pn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=y,p.current=!0,m.current=!1,console.log("[useBucketCollections] [useEffect] Initializing, calling fetchCollections..."),b(),e){const k=new To({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=k;const _=()=>{k.isConnected()&&!m.current&&(k.subscribeBuckets(w),m.current=!0)};k.connect().then(()=>{_()}).catch(T=>{console.error("Failed to connect WebSocket:",T),p.current&&(p.current=!1,i(!1)),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{b()},t.refreshInterval))});const E=k.onStateChange(T=>{T===ut.Connected?(m.current&&_(),f.current!==null&&(clearInterval(f.current),f.current=0)):T===ut.Disconnected&&t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{b()},t.refreshInterval))});return()=>{E&&E(),d.current&&(d.current.unsubscribeBuckets(w),d.current.disconnect(),d.current=null),f.current!==null&&(clearInterval(f.current),f.current=0)}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{b()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=0)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e,w]),S.useEffect(()=>{console.log("[useBucketCollections] [useEffect] Hook state changed, returning:",{collectionsCount:n.length,collections:n,loading:r,error:o,spotWalletBalance:l})},[n,r,o,l]),{collections:n,loading:r,error:o,refresh:b,spotWalletBalance:l}}const bL=S.forwardRef(function({baseURL:e=el,wsURL:n=o5,mnemonic:s=$D,marketId:r,marketSymbol:i,selectedBucketBalance:o,selectedBucketId:a,onLeverageClick:l,authToken:c,walletAddress:u},d){const{selectedMarketId:f,selectedMarketSymbol:p}=Io({baseURL:e,autoFetchMarkets:!0}),m=r||f||"",x=i||p||"Market",{lastPrice:v}=d0({baseURL:e,wsURL:n,marketId:m}),g=(v==null?void 0:v.price)||0,b=S.useRef(0),{collections:w,spotWalletBalance:y}=E3({baseURL:e,wsURL:n,walletAddress:u||"",authToken:c||"",useWebSocket:!!u&&!!c}),k=S.useMemo(()=>!a||!w.length?null:w.find(Ae=>Ae.bucketId===a)||null,[w,a]),{orderType:_,setOrderType:E,fundPercent:T,sizeInput:D,price:C,leverage:A,positionMode:N,marginMode:$,availableBalance:W,currentPrice:L,isReady:F,loading:j,result:R,setFundPercent:B,setSizeInput:I,setPrice:G,setMarginMode:O,setLeverage:P,placeBuyOrder:Z,placeSellOrder:Q,calculateValue:Y,calculateMargin:q,calculateSizeUSD:J,getOrderPrice:se,getAvailableTradeAmount:we}=kN({baseURL:e,mnemonic:s,marketId:m,selectedBucketBalance:o,tradePrice:g}),Ye=S.useMemo(()=>se(),[se,_,C,L]),Ne=S.useMemo(()=>we(),[we,W,A]),Le=S.useMemo(()=>Y(),[Y,D,T,W,Ye,A]),ze=S.useMemo(()=>q(),[q,A,Le]),wt=S.useMemo(()=>ve(Le),[Le]),M=S.useMemo(()=>ve(ze),[ze]),ce=S.useMemo(()=>({minimumFractionDigits:$r,maximumFractionDigits:qD}),[]),me=S.useMemo(()=>L.toFixed($r),[L]);S.useMemo(()=>a?`Available in ${a}`:"Available to Trade",[a]);const Ie=S.useMemo(()=>{const Ae=w.reduce((ke,Ge)=>ke+Ge.totalEquity,0);return y+Ae},[w,y]),pe=S.useMemo(()=>Ie.toLocaleString("en-US",ce),[Ie,ce]),_e=S.useMemo(()=>y.toLocaleString("en-US",ce),[y,ce]),V=S.useMemo(()=>k?k.nominalValue.toLocaleString("en-US",ce):"--",[k,ce]),ne=S.useMemo(()=>k?k.nominalValue.toLocaleString("en-US",ce):"--",[k,ce]),H=S.useMemo(()=>k?k.unrealizedPnL.toLocaleString("en-US",ce):"--",[k,ce]),X=S.useMemo(()=>k?(k.crossMarginRatio*100).toFixed($r)+"%":"--",[k]),xe=S.useMemo(()=>k?k.maintenanceMargin.toLocaleString("en-US",ce):"--",[k,ce]),K=S.useMemo(()=>k?`${k.leverage.toFixed($r)}x`:"--",[k]),de=S.useCallback(()=>{O($===du?QD:du)},[$,O]),be=S.useCallback(()=>{E(Rm)},[E]),oe=S.useCallback(()=>{E(Fp)},[E]),re=S.useCallback(()=>{B(Math.min(Fv,T+jp))},[T,B]),he=S.useCallback(()=>{B(Math.max(jv,T-jp))},[T,B]),Ce=S.useCallback(Ae=>{const ke=parseInt(Ae.target.value);B(ke)},[B]),Me=S.useCallback(Ae=>{G(Ae.target.value)},[G]),Fe=S.useCallback(Ae=>{const ke=parseFloat(Ae.target.value);I(isNaN(ke)?0:ke)},[I]),He=S.useCallback(()=>{const Ae=Te.loading("Submit transaction...",{description:"Placing buy order"});b.current=typeof Ae=="number"?Ae:0,Z()},[Z]),Oe=S.useCallback(()=>{const Ae=Te.loading("Submit transaction...",{description:"Placing sell order"});b.current=typeof Ae=="number"?Ae:0,Q()},[Q]);return S.useImperativeHandle(d,()=>({leverage:A,setLeverage:P,calculateMaxRatio:Ae=>{const ke=J();se();const Ge=ke;return W>0&&Ge>0?(Ge/W).toFixed($r):Ae.toFixed($r)}}),[A,P,J,se,W]),S.useEffect(()=>{if(R)if(b.current!==0&&(Te.dismiss(b.current),b.current=0),R.success){const Ae=R.orderId?`Order ID: ${R.orderId}`:R.message||"Order placed successfully";Te.success("Order Placed Successfully",{description:Ae})}else R.error&&Te.error("Order Failed",{description:R.error,action:In(R.error||"")})},[R]),h.jsxs("div",{className:"component",children:[h.jsx("h2",{children:x}),h.jsxs("div",{className:"trade-op-config",children:[h.jsxs("div",{className:"trade-op-badge",children:[h.jsx("span",{className:"trade-op-badge-label",children:N}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),h.jsxs("div",{className:"trade-op-badge",onClick:de,style:{cursor:"pointer"},children:[h.jsx("span",{className:"trade-op-badge-label",children:$}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),h.jsxs("div",{className:"trade-op-badge",onClick:l,style:{cursor:"pointer"},children:[h.jsxs("span",{className:"trade-op-badge-label",children:[A,"x"]}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]})]}),h.jsxs("div",{className:"trade-op-order-type-selector",children:[h.jsx("button",{onClick:be,className:`btn-toggle ${_===Rm?"active":""}`,children:"MARKET"}),h.jsx("button",{onClick:oe,className:`btn-toggle ${_===Fp?"active":""}`,children:"LIMIT"})]}),_===Fp&&h.jsx("div",{className:"trade-op-form-group",children:h.jsxs("div",{className:"trade-op-form-row",children:[h.jsx("label",{htmlFor:"price",className:"trade-op-label",children:"Price:"}),h.jsx("input",{id:"price",type:"number",value:C,onChange:Me,placeholder:me,step:HD,min:Bv})]})}),h.jsxs("div",{className:"trade-op-form-group",children:[h.jsxs("div",{className:"trade-op-form-row",style:{marginBottom:"0.5rem"},children:[h.jsx("label",{htmlFor:"size",className:"trade-op-label",children:"Size:"}),h.jsxs("div",{className:"trade-op-size-controls",children:[h.jsx("input",{id:"size",type:"number",step:"any",value:D===0?"":D,onChange:Fe,placeholder:"0",min:Bv,max:Ne,className:"trade-op-input"}),h.jsxs("div",{className:"trade-op-size-buttons",children:[h.jsx("button",{onClick:re,className:"btn-small",children:""}),h.jsx("button",{onClick:he,className:"btn-small",children:""})]})]})]}),h.jsx("input",{type:"range",min:jv,max:Fv,value:T,onChange:Ce,step:jp,style:{width:"100%"}}),h.jsxs("div",{className:"trade-op-slider-labels",children:[h.jsx("span",{children:"0"}),h.jsx("span",{children:"20"}),h.jsx("span",{children:"40"}),h.jsx("span",{children:"60"}),h.jsx("span",{children:"80"}),h.jsx("span",{children:"100"})]})]}),h.jsxs("div",{className:"trade-op-action-panel",children:[h.jsxs("div",{children:[h.jsx("div",{className:"trade-op-panel-title buy",children:"BUY"}),h.jsxs("div",{className:"trade-op-panel-size",children:["BTC ",D.toFixed(3),"/100.000"]}),h.jsx("button",{onClick:He,disabled:j||!F||Le<=0,className:"btn-buy",children:j?"PLACING...":"BUY LONG"}),h.jsxs("div",{className:"trade-op-panel-details",children:[h.jsxs("div",{children:["Value ",wt.toFixed(2)]}),h.jsxs("div",{children:["Margin ",M.toFixed(2)]})]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"trade-op-panel-title sell",children:"SELL"}),h.jsxs("div",{className:"trade-op-panel-size",children:[D.toFixed(3),"/100.000 BTC"]}),h.jsx("button",{onClick:Oe,disabled:j||!F||Le<=0,className:"btn-sell",children:j?"PLACING...":"SELL SHORT"}),h.jsxs("div",{className:"trade-op-panel-details",children:[h.jsxs("div",{children:["Value ",wt.toFixed($r)]}),h.jsxs("div",{children:["Margin ",M.toFixed($r)]})]})]})]}),h.jsxs("div",{className:"trade-op-info-panel",children:[h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Account Equity:"}),h.jsxs("span",{className:"trade-op-info-value",children:[pe," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Spot:"}),h.jsxs("span",{className:"trade-op-info-value",children:[_e," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsxs("span",{className:"trade-op-info-label",children:[a||"Bucket",":"]}),h.jsxs("span",{className:"trade-op-info-value",children:[V," USDC"]})]}),h.jsx("div",{className:"trade-op-info-row",children:h.jsxs("span",{className:"trade-op-info-label",children:["Bucket Overview: ",a||"--"]})}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Balance:"}),h.jsxs("span",{className:"trade-op-info-value",children:[ne," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Unrealized PNL:"}),h.jsxs("span",{className:"trade-op-info-value",children:[H," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Cross Margin Ratio:"}),h.jsx("span",{className:"trade-op-info-value",children:X})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Maintenance Margin:"}),h.jsxs("span",{className:"trade-op-info-value",children:[xe," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Cross Account Leverage:"}),h.jsx("span",{className:"trade-op-info-value",children:K})]})]})]})});function P3(t){const e=t.useWebSocket!==!1,[n,s]=S.useState([]),[r,i]=S.useState(!0),[o,a]=S.useState(null),[l,c]=S.useState(!1),u=S.useRef(null),d=S.useRef(null),f=S.useRef(null),p=S.useRef(!1),m=S.useRef(t);m.current=t;const x=S.useCallback(w=>({id:w.id||w.orderId||w.order_id,orderId:w.orderId||w.order_id||w.id,marketId:w.marketId||w.market_id||w.assetPair,symbol:w.symbol||w.pair||`Market-${w.marketId||w.market_id||"N/A"}`,side:w.side||(w.direction==="LONG"?"LONG":w.direction==="SHORT"?"SHORT":void 0),type:w.type||w.orderType||w.order_type,quantity:w.quantity||w.size||w.amount||0,price:w.price||w.limitPrice||w.limit_price||0,filledQuantity:w.filledQuantity||w.filled_quantity||w.filled||0,remainingQuantity:w.remainingQuantity||w.remaining_quantity||w.remaining||0,status:w.status||w.orderStatus||w.order_status||"PENDING",timeInForce:w.timeInForce||w.time_in_force||w.tif,createdAt:w.createdAt||w.created_at||w.timestamp,updatedAt:w.updatedAt||w.updated_at}),[]),v=S.useCallback(async()=>{if(!u.current)return;const w=m.current;if(!w.walletAddress||w.walletAddress.trim()===""){a(null),s([]),i(!1);return}a(null);try{const y=await u0(Rb.http,()=>u.current.getOrders(w.walletAddress)),k=Array.isArray(y)?y:(y==null?void 0:y.orders)||[];if(Array.isArray(k)){const _=k.map(x);s(E=>{if(E.length!==_.length)return _;const T=JSON.stringify(E),D=JSON.stringify(_);return T===D?E:_})}else s(_=>_.length===0?_:[])}catch(y){const k=y instanceof Error?y.message:"Failed to load orders";a(k),console.error("Failed to fetch orders after retries:",y)}finally{i(!1)}},[x]),g=S.useCallback(w=>w.id||w.orderId,[]),b=S.useCallback(w=>{let y=[];if(Array.isArray(w)?y=w:w.orders&&Array.isArray(w.orders)?y=w.orders:w&&typeof w=="object"&&(w.id||w.orderId||w.order_id?y=[w]:y=w.order||w.orderList||[]),y.length>0||w&&typeof w=="object"&&"count"in w&&w.count===0){const k=y.map(x);s(_=>{const E=new Map;_.forEach(A=>{const N=g(A);N&&E.set(N,A)}),k.forEach(A=>{var L;const N=g(A);if(!N){console.warn("Received order without ID, skipping:",A);return}const $=(L=A.status)==null?void 0:L.toUpperCase();$==="FILLED"||$==="CANCELLED"||$==="REJECTED"||$==="EXPIRED"||$==="CLOSED"||$==="DONE"?E.delete(N):E.set(N,A)});const T=Array.from(E.values()).filter(A=>g(A));if(_.length!==T.length)return T;const D=JSON.stringify(_),C=JSON.stringify(T);return D===C?_:T})}},[x,g]);return S.useEffect(()=>{if(!t.walletAddress||t.walletAddress.trim()===""){i(!1),a(null),s([]),d.current&&(d.current.disconnect(),d.current=null),f.current!==null&&(clearInterval(f.current),f.current=null);return}const w=new pn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=w,v(),e&&t.wsURL){const y=new To({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=y;const k=()=>{y.isConnected()&&!p.current&&(y.subscribeOrders(b),p.current=!0)};y.connect().then(()=>{c(!0),k()}).catch(T=>{console.error("Failed to connect WebSocket:",T),c(!1),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{v()},t.refreshInterval))});let _=null;const E=y.wsClient;return E&&(_=E.onStateChange(T=>{T===ut.Connected?(c(!0),p.current&&k(),f.current!==null&&(clearInterval(f.current),f.current=null)):(T===ut.Disconnected||T===ut.Reconnecting)&&(c(!1),p.current=!1,t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{v()},t.refreshInterval)))})),()=>{_&&_(),f.current!==null&&(clearInterval(f.current),f.current=null),d.current&&(d.current.unsubscribeOrders(b),d.current.disconnect())}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{v()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=null)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{orders:n,loading:r,error:o,isConnected:l,refresh:v}}function yL({baseURL:t=el,wsURL:e,authToken:n,walletAddress:s,mnemonic:r,height:i=jD,refreshInterval:o=Ob}){const{orders:a,loading:l,error:c,refresh:u}=P3({baseURL:t,wsURL:e,authToken:n,walletAddress:s,refreshInterval:o}),d=S.useRef(null),f=S.useRef(0),[p,m]=S.useState(null),{getSymbolByMarketId:x}=Io({baseURL:t,sessionToken:n,autoFetchMarkets:!1}),[v,g]=S.useState(zr),[b,w]=S.useState(null),[y,k]=S.useState(ga),_=S.useMemo(()=>a.filter(j=>{const R=(j.status||"").toUpperCase(),B=R.startsWith("ORDER_STATUS_")?R:`ORDER_STATUS_${R}`;return v===zr?s1.some(I=>R===I.toUpperCase()||B===I.toUpperCase()):!s1.some(I=>R===I.toUpperCase()||B===I.toUpperCase())}),[a,v]),E=S.useMemo(()=>b?[..._].sort((j,R)=>{let B=0,I=0;switch(b){case Kv:B=j.symbol||"",I=R.symbol||"";break;case Xv:B=j.side||"",I=R.side||"";break;case Qv:B=L(j.type),I=L(R.type);break;case Jv:B=j.quantity||0,I=R.quantity||0;break;case Zv:B=j.price||0,I=R.price||0;break;case e1:B=j.filledQuantity||0,I=R.filledQuantity||0;break;case t1:B=j.status||"",I=R.status||"";break}if(typeof B=="string"&&typeof I=="string")return y===ii?B.localeCompare(I):I.localeCompare(B);const G=Number(B),O=Number(I);return y===ii?G-O:O-G}):_,[_,b,y]),T=j=>{b===j?k(y===ii?ga:ii):(w(j),k(ga))},D=j=>{const R=(j.side||"").toUpperCase();return R===br||R===hu},C=j=>{const R=(j.side||"").toUpperCase();return D(j)?R===vd||R===br?br:hu:R===br||R===vd?vd:ZD},A=TN,N=MN,$=j=>{const R=(j||"").toUpperCase(),B={ORDER_STATUS_PENDING:{short:"P",full:"Pending",color:zp},PENDING:{short:"P",full:"Pending",color:zp},ORDER_STATUS_OPEN:{short:"O",full:"Open",color:Up},OPEN:{short:"O",full:"Open",color:Up},NEW:{short:"N",full:"New",color:Up},ORDER_STATUS_FILLED:{short:"F",full:"Filled",color:r1},FILLED:{short:"F",full:"Filled",color:r1},ORDER_STATUS_CANCELED:{short:"C",full:"Canceled",color:Wp},CANCELED:{short:"C",full:"Canceled",color:Wp},CANCELLED:{short:"C",full:"Canceled",color:Wp},ORDER_STATUS_REJECTED:{short:"R",full:"Rejected",color:i1},REJECTED:{short:"R",full:"Rejected",color:i1},PARTIALLY_FILLED:{short:"PF",full:"Partially Filled",color:zp}};if(B[R])return B[R];const I=R.startsWith("ORDER_STATUS_")?R:`ORDER_STATUS_${R}`;return B[I]?B[I]:{short:"?",full:j||SN,color:uN}},W=j=>j===br||j===vd?dN:hN,L=j=>{if(!j)return vN;const R=j.toUpperCase();return R===XD||R===a1?a1:R===KD||R===l1?l1:R.startsWith($v)?R.replace($v,""):R},F=async j=>{var G;const R=j.orderId||j.id,B=j.marketId;if(!R){const O="Cannot cancel order without a valid order ID.";Te.error("Order ID is missing",{description:O,action:In(O)});return}if(!B){const O="Cannot cancel order without a valid market ID.";Te.error("Market ID is missing",{description:O,action:In(O)});return}if(!r){const O=`Please provide the 'mnemonic' prop to the PendingOrders component. Order ID: ${R}`;Te.error("Mnemonic required",{description:O,duration:5e3,action:In(O)});return}if(typeof r!="string"||r.trim()===""){const O=`The mnemonic prop is empty or invalid. Please provide a valid mnemonic. Order ID: ${R}`;Te.error("Invalid mnemonic",{description:O,duration:5e3,action:In(O)});return}if(p){Te.info("Cancellation in progress",{description:"Please wait for the current cancellation to complete."});return}m(R);const I=Te.loading("Canceling order...",{description:`Canceling order ${R}`});f.current=typeof I=="number"?I:0;try{d.current||(d.current=new wl({baseURL:t,mnemonic:r.trim()}),await d.current.initialize());const O=await d.current.cancelOrder({orderId:R,marketId:B}),P=(O==null?void 0:O.success)===!0||(O==null?void 0:O.result)==="success"||O&&!O.error&&!O.message;if(f.current!==0&&(Te.dismiss(f.current),f.current=0),P)Te.success("Order canceled successfully",{description:`Order ${R} has been canceled.`}),u&&await u();else{const Z=(O==null?void 0:O.error)||(O==null?void 0:O.message)||((G=O==null?void 0:O.response)==null?void 0:G.error)||"Failed to cancel order";throw new Error(Z)}}catch(O){f.current!==0&&(Te.dismiss(f.current),f.current=0);const Z=`${O instanceof Error?O.message:"Unknown error occurred"}. Order ID: ${R}`;Te.error("Failed to cancel order",{description:Z,duration:6e3,action:In(Z)})}finally{m(null)}};return!s||s.trim()===""?h.jsx(w3,{message:bN}):l?h.jsx(kl,{message:fN}):c?h.jsx(_l,{error:c}):h.jsxs("div",{className:"layout-container",style:{height:i},children:[h.jsxs(Cl,{title:v===zr?mN:xN,children:[h.jsxs("div",{className:"btn-tab",children:[h.jsx("span",{style:{fontSize:"0.7rem"},children:""}),h.jsx("span",{children:"Current Symbol"})]}),h.jsxs("div",{onClick:()=>g(v===zr?n1:zr),className:`btn-tab ${v===n1?"active":""}`,children:[h.jsx("img",{src:"/transfer-net.svg"}),h.jsx("span",{children:v===zr?wN:yN})]})]}),h.jsxs("div",{className:"table-container shrinkable",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:o1},children:[h.jsx(Wt,{field:Kv,currentSortField:b,sortDirection:y,onSort:T,children:"Symbol"}),h.jsx(Wt,{field:Xv,currentSortField:b,sortDirection:y,onSort:T,children:"Side"}),h.jsx(Wt,{field:Qv,currentSortField:b,sortDirection:y,onSort:T,children:"Type"}),h.jsx(Wt,{field:Jv,currentSortField:b,sortDirection:y,onSort:T,children:"Quantity"}),h.jsx(Wt,{field:Zv,currentSortField:b,sortDirection:y,onSort:T,children:"Price"}),h.jsx(Wt,{field:e1,currentSortField:b,sortDirection:y,onSort:T,children:"Filled"}),h.jsx(Wt,{field:t1,currentSortField:b,sortDirection:y,onSort:T,children:"Status"}),h.jsx(v3,{center:!0,children:"Actions"})]}),E.length===0?h.jsx(Pr,{message:v===zr?pN:gN}):E.map((j,R)=>{const B=C(j),I=W(B),{short:G,full:O,color:P}=$(j.status),Z=j.marketId?x(j.marketId)||j.symbol||`m-${j.marketId}`:j.symbol||"N/A";return h.jsxs("div",{className:`table-row ${R%2===0?"even":""}`,style:{gridTemplateColumns:o1},children:[h.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:h.jsx("span",{children:Z})}),h.jsx("div",{className:"table-cell center",style:{color:I,fontWeight:500},children:B}),h.jsx("div",{className:"table-cell center",children:L(j.type)}),h.jsx("div",{className:"table-cell right monospace",children:N(j.quantity)}),h.jsx("div",{className:"table-cell right monospace",children:A(j.price)}),h.jsxs("div",{className:"table-cell right monospace",children:[N(j.filledQuantity)," /"," ",N(j.quantity)]}),h.jsx("div",{className:"table-cell center",style:{color:P,fontWeight:600,cursor:"help",fontSize:"0.9rem"},title:O,children:G}),h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:v===zr?h.jsxs(h.Fragment,{children:[(!r||r.trim()==="")&&h.jsx("span",{style:{fontSize:"0.7rem",color:"#ffc107",cursor:"help"},title:"Mnemonic required to cancel orders",children:""}),h.jsx(lL,{onClick:Q=>{Q.preventDefault(),Q.stopPropagation(),!r||r.trim()===""||p===(j.orderId||j.id)||!!p||F(j)},disabled:!r||r.trim()===""||p===(j.orderId||j.id)||!!p})]}):h.jsx("span",{className:"color-text-dim",children:""})})]},`order-${j.id||j.orderId||R}`)})]})]})}const wL=le.memo(yL);function vL({baseURL:t=el,authToken:e,walletAddress:n,mnemonic:s,height:r=LD,refreshInterval:i=Ob,selectedBucketId:o=null}){const{positions:a,loading:l,error:c,refresh:u}=d5({baseURL:t,authToken:e,walletAddress:n,refreshInterval:i}),d=S.useRef(null);S.useEffect(()=>{if(!s||!t){d.current=null;return}const _=new wl({baseURL:t,mnemonic:s});_.initialize().then(()=>{d.current=_}).catch(E=>{const T=E instanceof Error?E.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",E),Te.error("Exchange client initialization failed",{description:T,action:In(T)}),d.current=null})},[s,t]);const[f,p]=S.useState(Bp),[m,x]=S.useState(null),[v,g]=S.useState(ga),b=S.useMemo(()=>{let _=[...a];return f===Sd&&o&&(_=_.filter(E=>{var C;const T=(C=E.bucketId)==null?void 0:C.toString(),D=o.toString();return T===D})),m?_.sort((E,T)=>{let D=0,C=0;switch(m){case zv:D=E.symbol||"",C=T.symbol||"";break;case Uv:try{D=E.leverage?fromSatoshi(E.leverage):0,C=T.leverage?fromSatoshi(T.leverage):0}catch{D=0,C=0}break;case Wv:D=E.size||0,C=T.size||0;break;case Hv:D=E.liquidationPrice||0,C=T.liquidationPrice||0;break;case Vv:D=E.unrealizedPnL||0,C=T.unrealizedPnL||0;break;case Yv:D=E.entryPrice||0,C=T.entryPrice||0;break;case Gv:D=E.margin||0,C=T.margin||0;break}if(typeof D=="string"&&typeof C=="string")return v===ii?D.localeCompare(C):C.localeCompare(D);const A=Number(D),N=Number(C);return v===ii?A-N:N-A}):_},[a,m,v,o,f]),w=_=>{m===_?g(v===ii?ga:ii):(x(_),g(ga))},y=S.useRef(0),k=async _=>{if(!s){const T="Please provide the 'mnemonic' prop to enable position closing.";Te.error("Mnemonic required",{description:T,action:In(T)});return}if(!d.current){const T="Please wait for the exchange client to initialize.";Te.error("Exchange client not ready",{description:T,action:In(T)});return}const E=Te.loading("Closing position...",{description:`Closing ${_.side} position for ${_.symbol} (Size: ${of(_.size)})`});y.current=typeof E=="number"?E:0;try{const T=await d.current.closePosition({marketId:_.marketId,marketPrice:_.markPrice,quantity:_.size});y.current!==0&&(Te.dismiss(y.current),y.current=0),Te.success("Position closed successfully",{description:`${_.side} position for ${_.symbol} has been closed. tx: ${T.txId}`,duration:5e3}),u&&await u()}catch(T){y.current!==0&&(Te.dismiss(y.current),y.current=0);const D=T instanceof Error?T.message:"Unknown error occurred";Te.error("Failed to close position",{description:D,duration:6e3,action:In(D)}),console.error("Failed to close position:",T)}};return l?h.jsx(kl,{message:nN}):c?h.jsx(_l,{error:c}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[h.jsxs(Cl,{title:`${rN} ${f===Sd&&o?`(Bucket ${o})`:""}`,children:[h.jsx("div",{onClick:()=>{p(Bp),x(null)},className:`btn-tab ${f===Bp?"active":""}`,children:iN}),h.jsxs("div",{onClick:()=>{p(Sd),x(null)},className:`btn-tab ${f===Sd?"active":""}`,children:[h.jsx("img",{src:"/bucket-g.svg"}),h.jsx("span",{children:oN})]})]}),h.jsxs("div",{className:"table-container",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:qv},children:[h.jsx(Wt,{field:zv,currentSortField:m,sortDirection:v,onSort:w,children:"Symbol"}),h.jsx(Wt,{field:Uv,currentSortField:m,sortDirection:v,onSort:w,children:"Leverage"}),h.jsx(Wt,{field:Wv,currentSortField:m,sortDirection:v,onSort:w,children:"Size"}),h.jsx(Wt,{field:Hv,currentSortField:m,sortDirection:v,onSort:w,children:"Liq. Price"}),h.jsx(Wt,{field:Vv,currentSortField:m,sortDirection:v,onSort:w,children:"P/L"}),h.jsx(Wt,{field:Yv,currentSortField:m,sortDirection:v,onSort:w,children:"Entry Price"}),h.jsx(Wt,{field:Gv,currentSortField:m,sortDirection:v,onSort:w,children:"Margin"}),h.jsx(v3,{center:!0,children:"Actions"})]}),b.length===0?h.jsx(Pr,{message:sN}):b.map((_,E)=>{const T=_.side===br,D=(_.unrealizedPnL||0)>=0?eN:tN,C=IN(_.leverage,$p);return h.jsxs("div",{className:`table-row ${E%2===0?"even":""}`,style:{gridTemplateColumns:qv},children:[h.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:h.jsx("span",{children:_.symbol})}),h.jsxs("div",{className:"color-buy",style:{fontWeight:500},children:[T?br:hu," ",C===$p?$p:`${C}x`," ","@ ",_.marginMode||du]}),h.jsx("div",{className:"color-buy right",children:of(_.size)}),h.jsx("div",{className:"table-cell right",children:rf(_.liquidationPrice)}),h.jsx("div",{className:"table-cell right",style:{color:D,fontWeight:500},children:EN(_.unrealizedPnL)}),h.jsx("div",{className:"table-cell right",children:rf(_.entryPrice)}),h.jsx("div",{className:"table-cell right",children:CN(_.margin)}),h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsx(cL,{onClick:()=>k(_)})})]},`position-${_.marketId}-${E}`)})]})]})}const SL=le.memo(vL);function kL({isOpen:t,value:e,min:n,max:s,onConfirm:r,onCancel:i}){const[o,a]=S.useState("");if(S.useEffect(()=>{t&&a(e.toString())},[t,e]),!t)return null;const l=v=>{const g=o==="0"?v:o+v;parseFloat(g)<=s&&a(g)},c=()=>{o.includes(".")||a(o+".")},u=()=>{o.length>1?a(o.slice(0,-1)):a("0")},d=()=>{a("0")},f=()=>{const v=parseFloat(o)||0,g=Math.max(n,Math.min(s,v));r(g)},p=parseFloat(o)||0,m=p>=n&&p<=s,x=h.jsx("div",{className:"modal-overlay",onClick:i,style:{zIndex:1e4},children:h.jsxs("div",{className:"modal-content number-pad-content",onClick:v=>v.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Enter Amount"})}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{className:"number-pad-display",children:[h.jsx("div",{className:"number-pad-display-value",children:It(p)}),h.jsxs("div",{className:"number-pad-display-range",children:["Min: ",It(n)," | Max: ",It(s)]}),!m&&p>0&&h.jsxs("div",{className:"number-pad-display-error",children:["Value must be between ",It(n)," and ",It(s)]})]}),h.jsxs("div",{className:"number-pad-grid",children:[h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"1"),children:"1"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"2"),children:"2"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"3"),children:"3"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"4"),children:"4"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"5"),children:"5"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"6"),children:"6"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"7"),children:"7"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"8"),children:"8"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"9"),children:"9"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:c,children:"."}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"0"),children:"0"}),h.jsx("button",{type:"button",className:"number-pad-button number-pad-button-action",onClick:u,children:""})]}),h.jsxs("div",{className:"number-pad-actions",children:[h.jsx("button",{type:"button",className:"number-pad-action-button",onClick:d,children:"Clear"}),h.jsx("button",{type:"button",className:"number-pad-action-button number-pad-action-button-max",onClick:()=>{a(s.toString())},children:"Max"})]})]}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:i,className:"btn btn-secondary",children:"Cancel"}),h.jsx("button",{onClick:f,className:"btn btn-primary",disabled:!m,children:"Confirm"})]})]})});return typeof document<"u"?Ti.createPortal(x,document.body):null}function _L({isOpen:t,currentLeverage:e,tempLeverage:n,maxRatio:s,onLeverageChange:r,onConfirm:i,onCancel:o}){if(!t)return null;const a=h.jsx("div",{className:"modal-overlay",onClick:o,children:h.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Select Leverage"})}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{className:"leverage-max-ratio",children:[h.jsx("div",{className:"leverage-max-ratio-label",children:"Maximum Ratio"}),h.jsxs("div",{className:"leverage-max-ratio-value",children:[s,"x"]})]}),h.jsxs("div",{className:"leverage-slider-container",children:[h.jsx("input",{type:"range",min:zD,max:UD,value:n,onChange:l=>r(parseInt(l.target.value)),className:"leverage-slider"}),h.jsxs("div",{className:"leverage-slider-labels",children:[h.jsx("span",{children:"1x"}),h.jsxs("span",{className:"leverage-current-value",children:[n,"x"]}),h.jsx("span",{children:"100x"})]})]})]}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),h.jsx("button",{onClick:i,className:"btn btn-primary",children:"Confirm"})]})]})});return typeof document<"u"?Ti.createPortal(a,document.body):null}function CL({isOpen:t,fromValue:e,toValue:n,options:s,bucketsData:r,transferAmount:i,createBucketAmount:o,onFromChange:a,onToChange:l,onTransferAmountChange:c,onCreateBucketAmountChange:u,onConfirm:d,onCancel:f,spotWalletBalance:p=0,activeTab:m,onActiveTabChange:x,isTransferring:v=!1,onOpen:g}){const[b,w]=S.useState("transfer"),y=m??b,k=x??w,_=S.useRef(!1),[E,T]=S.useState(!1),[D,C]=S.useState("transfer");S.useEffect(()=>{t&&!_.current&&g&&g(),_.current=t},[t,g]);const A=S.useMemo(()=>e==="spot-wallet"?null:r.find(I=>I.bucketId===e),[r,e]),N=S.useMemo(()=>e==="spot-wallet"?p:(A==null?void 0:A.nominalValue)||0,[e,p,A]),$=10,W=Math.max($,N);if(le.useEffect(()=>{if(e&&W>0){const I=y==="transfer"?i:o;I>W?y==="transfer"?c(W):u(W):I<$&&W>=$&&(y==="transfer"?c($):u($))}},[e,W,y,i,o,c,u]),!t)return null;const L=e&&n&&i>=$&&i<=W,F=e&&o>=$&&o<=W,j=h.jsx("div",{className:"modal-overlay",onClick:f,children:h.jsxs("div",{className:"modal-content transfer-modal-content",onClick:I=>I.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Transfer Funds"})}),h.jsxs("div",{className:"transfer-modal-tabs",children:[h.jsx("button",{className:`transfer-tab ${y==="transfer"?"active":""}`,onClick:()=>k("transfer"),type:"button",disabled:v,children:"Transfer"}),h.jsx("button",{className:`transfer-tab ${y==="create"?"active":""}`,onClick:()=>k("create"),type:"button",disabled:v,children:"Create Bucket"})]}),h.jsx("div",{className:"modal-body",children:y==="transfer"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"From"}),h.jsxs("select",{value:e,onChange:I=>a(I.target.value),className:"transfer-select",children:[h.jsx("option",{value:"",children:"Select source bucket"}),s.map(I=>h.jsx("option",{value:I.value,children:I.label},I.value))]})]}),h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"To"}),h.jsxs("select",{value:n,onChange:I=>l(I.target.value),className:"transfer-select",disabled:!e,children:[h.jsx("option",{value:"",children:"Select destination bucket"}),s.filter(I=>I.value!==e).map(I=>h.jsx("option",{value:I.value,children:I.label},I.value))]})]}),e&&W>=$?h.jsxs("div",{className:"transfer-field-group",children:[h.jsxs("div",{className:"transfer-amount-header",children:[h.jsx("label",{className:"transfer-field-label",children:"Amount"}),h.jsxs("div",{className:"transfer-available-balance",children:["Available: ",It(N)]})]}),h.jsx("div",{className:"transfer-amount-display",onClick:()=>{C("transfer"),T(!0)},style:{cursor:"pointer"},children:h.jsx("span",{className:"transfer-amount-value",children:It(i)})}),h.jsxs("div",{className:"transfer-amount-container",children:[h.jsx("input",{type:"range",min:$,max:W,step:.01,value:i,onChange:I=>c(parseFloat(I.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(i-$)/(W-$)*100}%`}}),h.jsxs("div",{className:"transfer-amount-labels",children:[h.jsx("span",{children:It($)}),h.jsx("span",{children:It(W)})]})]})]}):e?h.jsx("div",{className:"transfer-field-group",children:h.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required: ",It($)]})}):null]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"From"}),h.jsxs("select",{value:e,onChange:I=>a(I.target.value),className:"transfer-select",children:[h.jsx("option",{value:"",children:"Select source bucket"}),s.map(I=>h.jsx("option",{value:I.value,children:I.label},I.value))]})]}),e&&W>=$?h.jsxs("div",{className:"transfer-field-group",children:[h.jsxs("div",{className:"transfer-amount-header",children:[h.jsx("label",{className:"transfer-field-label",children:"Amount"}),h.jsxs("div",{className:"transfer-available-balance",children:["Available: ",It(N)]})]}),h.jsx("div",{className:"transfer-amount-display",onClick:()=>{C("create"),T(!0)},style:{cursor:"pointer"},children:h.jsx("span",{className:"transfer-amount-value",children:It(o)})}),h.jsxs("div",{className:"transfer-amount-container",children:[h.jsx("input",{type:"range",min:$,max:W,step:.01,value:o,onChange:I=>u(parseFloat(I.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(o-$)/(W-$)*100}%`}}),h.jsxs("div",{className:"transfer-amount-labels",children:[h.jsx("span",{children:It($)}),h.jsx("span",{children:It(W)})]})]})]}):e?h.jsx("div",{className:"transfer-field-group",children:h.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required: ",It($)]})}):null]})}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:f,className:"btn btn-secondary",disabled:v,children:"Cancel"}),h.jsx("button",{onClick:d,className:"btn btn-primary",disabled:v||(y==="transfer"?!L:!F),children:v?"Processing...":"Confirm"})]})]})}),R=D==="transfer"?i:o,B=I=>{D==="transfer"?c(I):u(I),T(!1)};return h.jsxs(h.Fragment,{children:[typeof document<"u"?Ti.createPortal(j,document.body):null,h.jsx(kL,{isOpen:E,value:R,min:$,max:W,onConfirm:B,onCancel:()=>T(!1)})]})}function EL({baseURL:t=el,wsURL:e=el,authToken:n,walletAddress:s,mnemonic:r,height:i=OD,refreshInterval:o=Ob,onBucketSelect:a}){const{collections:l,loading:c,error:u,spotWalletBalance:d,refresh:f}=E3({baseURL:t,wsURL:e,authToken:n,walletAddress:s,refreshInterval:o}),[p,m]=S.useState(null),[x,v]=S.useState("desc"),[g,b]=S.useState(!1),[w,y]=S.useState(""),[k,_]=S.useState(""),[E,T]=S.useState(10),[D,C]=S.useState(10),[A,N]=S.useState("transfer"),[$,W]=S.useState(!1),L=S.useRef(null),F=S.useRef(0),j=S.useMemo(()=>{const Q=l.filter(Y=>Y&&Y.bucketId&&typeof Y.bucketId=="string"&&Y.bucketId.trim()!=="");return p?[...Q].sort((Y,q)=>{let J=0,se=0;switch(p){case"marginType":J=Y.marginType||"",se=q.marginType||"";break;case"maintenanceMargin":J=Y.maintenanceMargin||0,se=q.maintenanceMargin||0;break;case"nominalValue":J=Y.nominalValue||0,se=q.nominalValue||0;break;case"riskRatio":J=Y.riskRatio||0,se=q.riskRatio||0;break;case"bucketId":J=Y.bucketId||"",se=q.bucketId||"";break}if(typeof J=="string"&&typeof se=="string")return x==="asc"?J.localeCompare(se):se.localeCompare(J);const we=Number(J),Ye=Number(se);return x==="asc"?we-Ye:Ye-we}):Q},[l,p,x]),R=Q=>{p===Q?v(x==="asc"?"desc":"asc"):(m(Q),v("desc"))},B=(Q,Y)=>{a&&a(Q,Y)},I=()=>{b(!0),y(""),_(""),T(10),C(10),N("transfer")},G=()=>{b(!1),y(""),_(""),T(10),C(10),N("transfer")};S.useEffect(()=>{if(!r||!t){L.current=null;return}const Q=new wl({baseURL:t,mnemonic:r});Q.initialize().then(()=>{L.current=Q}).catch(Y=>{const q=Y instanceof Error?Y.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",Y),Te.error("Exchange client initialization failed",{description:q,action:In(q)}),L.current=null})},[r,t]);const O=async()=>{if(!r){const q="Mnemonic is required to perform transfers. Please provide a mnemonic to enable transfer functionality.";Te.error("Mnemonic required",{description:q,action:In(q)});return}const Q=L.current;if(!Q){const q="Exchange client is still initializing. Please wait a moment and try again.";Te.error("Exchange client not ready",{description:q,action:In(q)});return}W(!0);const Y=Te.loading("Processing transfer...",{description:"Please wait while the transfer is being processed"});F.current=typeof Y=="number"?Y:0;try{const q="USDC";let J,se="";const we=ct(E);if(A==="transfer"){if(!w||!k)throw new Error("Please select both source and destination");if(w==="spot-wallet"&&k==="spot-wallet")throw new Error("Cannot transfer from spot wallet to spot wallet");w==="spot-wallet"?(J=await Q.extractToBucket({bucketId:k,assetId:q,amount:we}),se=`Successfully transferred ${It(E)} from Spot Wallet to ${k}`):k==="spot-wallet"?(J=await Q.withdrawFromBucket({bucketId:w,assetId:q,amount:we}),se=`Successfully transferred ${It(E)} from ${w} to Spot Wallet`):(J=await Q.bucketTransfer({fromBucketId:w,toBucketId:k,assetId:q,amount:we}),se=`Successfully transferred ${It(E)} from ${w} to ${k}`)}else throw w?w==="spot-wallet"?new Error("Create Bucket from spot wallet requires a target bucket ID. Please use the Transfer tab to extract funds to an existing bucket, or create the bucket first."):new Error("Create Bucket requires a target bucket ID. Please use the Transfer tab to transfer between buckets."):new Error("Please select a source");console.log("Transfer successful:",J),F.current!==0&&(Te.dismiss(F.current),F.current=0),Te.success("Transfer completed",{description:se}),f(),b(!1),y(""),_(""),T(10),C(10)}catch(q){F.current!==0&&(Te.dismiss(F.current),F.current=0);const J=q instanceof Error?q.message:"Transfer failed";Te.error("Transfer failed",{description:J,action:In(J)}),console.error("Transfer error:",q)}finally{W(!1)}},P=S.useMemo(()=>{const Q=j.map(Y=>({value:Y.bucketId,label:`${Y.bucketId} (${It(Y.nominalValue)})`}));return[{value:"spot-wallet",label:`Spot Wallet (${It(d)})`},...Q]},[j,d]),Z=S.useMemo(()=>j.map(Q=>({bucketId:Q.bucketId,nominalValue:Q.nominalValue})),[j]);return!s||s.trim()===""?h.jsx(w3,{message:"Wallet address required to view bucket collections"}):c?h.jsx(kl,{message:"Loading bucket collections..."}):u?h.jsx(_l,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:i},children:[h.jsx(Cl,{title:"BUCKET COLLECTIONS",children:h.jsxs("div",{onClick:I,className:"btn-tab",children:[h.jsx("img",{src:"/transfer-repu.svg"}),h.jsx("span",{children:"Transfer"})]})}),h.jsxs("div",{className:"table-container shrinkable",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[h.jsx(Wt,{field:"bucketId",currentSortField:p,sortDirection:x,onSort:R,children:"Bucket ID"}),h.jsx(Wt,{field:"marginType",currentSortField:p,sortDirection:x,onSort:R,children:"Margin Type"}),h.jsx(Wt,{field:"maintenanceMargin",currentSortField:p,sortDirection:x,onSort:R,children:"Maintenance Margin"}),h.jsx(Wt,{field:"nominalValue",currentSortField:p,sortDirection:x,onSort:R,children:"Balance"}),h.jsx(Wt,{field:"riskRatio",currentSortField:p,sortDirection:x,onSort:R,children:"Risk Ratio"})]}),j.length===0?h.jsx(Pr,{message:l.length===0?"No bucket collections found. Make sure your wallet address is correct and has buckets.":`Filtered out all ${l.length} collections (invalid data structure)`}):j.map((Q,Y)=>h.jsxs("div",{onClick:()=>B(Q.bucketId,Q.nominalValue),className:`table-row clickable ${Y%2===0?"even":""}`,style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[h.jsx("div",{className:"table-cell primary",children:Q.bucketId||"---"}),h.jsx("div",{className:"table-cell",children:(Q.marginType||"CROSS").toUpperCase()}),h.jsx("div",{className:"table-cell right",children:It(Q.maintenanceMargin||0)}),h.jsx("div",{className:"table-cell right",children:It(Q.nominalValue||0)}),h.jsx("div",{className:"table-cell right",style:{color:(Q.riskRatio||0)>.5?"#ff6b6b":"#51cf66",fontWeight:500},children:PN(Q.riskRatio||0)})]},`collection-${Q.bucketId}-${Y}`))]}),h.jsx(CL,{isOpen:g,fromValue:w,toValue:k,options:P,bucketsData:Z,transferAmount:E,createBucketAmount:D,onFromChange:y,onToChange:_,onTransferAmountChange:T,onCreateBucketAmountChange:C,onConfirm:O,onCancel:G,spotWalletBalance:d,activeTab:A,onActiveTabChange:N,isTransferring:$,onOpen:f})]})}const PL=le.memo(EL);function TL(t){var Ie;const[e,n]=S.useState("vertical"),[s,r]=S.useState(!0),[i,o]=S.useState(!1),[a,l]=S.useState("--"),[c,u]=S.useState(void 0),[d,f]=S.useState(!1),[p,m]=S.useState(10),[x,v]=S.useState("default"),g=S.useRef(null),b=S.useRef(null),w=S.useRef(!1),y=S.useRef(Bu),k=S.useRef(h0),_=S.useRef([]),E=y.current,T=k.current,D=S.useMemo(()=>Bc(x==="default"?Fc:K9),[x]),[C,A]=S.useState(()=>Bc(Fc));S.useEffect(()=>{A(D),_.current=D},[D]);const[N,$]=S.useState(()=>localStorage.getItem("authToken")||""),{markets:W,selectedMarketId:L,selectedMarketSymbol:F,setSelectedMarketId:j,loadingMarkets:R,getError:B}=Io({baseURL:E,sessionToken:N,autoFetchMarkets:!0}),{mnemonic:I,walletAddress:G,authToken:O,setMnemonic:P}=vl();S.useEffect(()=>{I||P("legal winner thank year wave sausage worth useful legal winner thank yellow")},[I,P]),S.useEffect(()=>{_.current=C},[C]),S.useEffect(()=>{O&&($(O),localStorage.setItem("authToken",O))},[O]);const Z=S.useRef(!1);S.useEffect(()=>{N&&N.trim()!==""&&!Z.current&&localStorage.getItem("authToken")!==N&&localStorage.setItem("authToken",N),Z.current=!1},[N]),S.useEffect(()=>{const pe=V=>{V.key==="authToken"&&V.newValue&&(Z.current=!0,$(V.newValue))};window.addEventListener("storage",pe);const _e=setInterval(()=>{const V=localStorage.getItem("authToken");$(ne=>V&&V!==ne?(Z.current=!0,V):ne)},5e3);return()=>{window.removeEventListener("storage",pe),clearInterval(_e)}},[]);const Q=S.useMemo(()=>{var pe,_e,V,ne;return W.length>0?((pe=W.find(H=>H.active))==null?void 0:pe.market_id)??W[0].market_id??((V=(_e=W.find(H=>H.active))==null?void 0:_e.id)==null?void 0:V.toString())??((ne=W[0].id)==null?void 0:ne.toString())??null:null},[W]),Y=S.useCallback((pe,_e)=>{if(s)return;const V=_.current,ne=pe;if(V.length!==ne.length){w.current=!0,_.current=ne,A(ne);return}let H=!1;for(let X=0;X<V.length;X++){const xe=V[X],K=ne[X];if(xe.x!==K.x||xe.y!==K.y||xe.w!==K.w||xe.h!==K.h||xe.i!==K.i){H=!0;break}}H&&(w.current=!0,_.current=ne,A(ne))},[s]),q=S.useCallback(()=>{n(pe=>pe==="horizontal"?"vertical":pe==="vertical"?null:"horizontal")},[]),J=S.useCallback(()=>{o(pe=>!pe)},[]);S.useEffect(()=>(i?document.body.classList.add("full-width-screen"):document.body.classList.remove("full-width-screen"),()=>{document.body.classList.remove("full-width-screen")}),[i]);const se=S.useCallback(()=>{r(pe=>!pe),s&&(w.current=!1)},[s]),we=S.useCallback(()=>{g.current&&(w.current=!1,g.current.generateNewLayout())},[]),Ye=S.useMemo(()=>C.map(function(pe){return h.jsxs("div",{className:"layoutItem",children:[h.jsx("b",{children:pe.i}),": [",pe.x,", ",pe.y,", ",pe.w,", ",pe.h,"]"]},pe.i)}),[C]),Ne=L||"",Le=30,ze=10,wt=12,M=S.useMemo(()=>{if(C.length===0)return{};const pe={};for(let _e=0;_e<=6;_e++){const V=C.find(ne=>ne.i===_e.toString());if(V){const ne=V.h*Le+(V.h-1)*ze,H=V.w/wt*100;pe[_e]={width:`${H}%`,height:`${ne}px`}}}return pe},[C]),ce=S.useMemo(()=>{var pe,_e,V,ne,H;return[h.jsx(oL,{symbol:"BINANCE:BTCUSDT",interval:"5",isCollapsed:!1},"tv"),h.jsx(dL,{baseURL:E,wsURL:T,marketId:Ne,maxDepth:20,height:(pe=M[1])==null?void 0:pe.height,authToken:N},`clobclassic-${Ne}`),h.jsx(gL,{baseURL:E,wsURL:T,marketId:Ne,symbol:F||void 0,authToken:N},`price-${Ne}`),h.jsx(bL,{ref:b,baseURL:E,wsURL:T,marketId:Ne,selectedBucketBalance:c,selectedBucketId:a,authToken:N,walletAddress:G,onLeverageClick:()=>{b.current&&m(b.current.leverage),f(!0)}},`trade-${Ne}`),h.jsx(wL,{baseURL:E,wsURL:T,authToken:N,walletAddress:G,mnemonic:I,height:(_e=M[4])==null?void 0:_e.height,refreshInterval:5e3},`order-${Ne}`),h.jsx(SL,{baseURL:E,authToken:N,walletAddress:G,mnemonic:I,height:(V=M[5])==null?void 0:V.height,refreshInterval:5e3,selectedBucketId:a},`pos-${Ne}`),h.jsx(PL,{baseURL:E,wsURL:T,mnemonic:I,authToken:N,walletAddress:G,height:(ne=M[6])==null?void 0:ne.height,refreshInterval:5e3,onBucketSelect:(X,xe)=>{l(X),u(xe)}},`bucket-${Ne}`),h.jsx(fL,{baseURL:E,wsURL:T,marketId:Ne,maxDepth:20,height:(H=M[1])==null?void 0:H.height,authToken:N},`clobx-${Ne}`)]},[E,T,N,G,Ne,F,M,a,c]);if(R)return h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:h.jsx("div",{children:"Loading markets..."})});const me=B("markets");return me?h.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:h.jsxs("div",{children:["Error loading markets: ",me]})}):W.length===0||!L?h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:h.jsx("div",{children:"No markets available."})}):h.jsxs("div",{children:[h.jsxs("div",{className:"App-section",children:[h.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Configuration"}),h.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Market:"}),h.jsx("select",{value:L||"",onChange:pe=>{const _e=pe.target.value;_e&&j(_e)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:W.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),W.map(pe=>{var H;const _e=pe.market_id??((H=pe.id)==null?void 0:H.toString())??"",V=pe.moniker?pe.moniker:pe.symbol?pe.symbol:pe.baseAsset&&pe.quoteAsset?`${pe.baseAsset}-${pe.quoteAsset}`:`Market ID: ${_e}`,ne=pe.active?" [ACTIVE]":"";return h.jsxs("option",{value:_e,children:[V," - ID: ",_e,ne]},_e)})]})}),W.length>0&&h.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:L===Q?"#51cf66":"#ff9f43"},children:L===Q?` Auto-selected default market (ID: ${Q==null?void 0:Q.substring(0,16)}...)`:` Manual selection (ID: ${L==null?void 0:L.substring(0,16)}...)`})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Mnemonic (for wallet address):"}),h.jsx("input",{type:"text",value:I||"",onChange:pe=>P(pe.target.value),placeholder:"Enter mnemonic to generate wallet address",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:"white",color:"#333"}})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Wallet Address:"}),h.jsx("input",{type:"text",value:G||"",disabled:!!(I&&I.trim()!==""),placeholder:"automatic (from mnemonic via useOnboard)",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:G?"#e7f3ff":"#f5f5f5",color:"#333"}}),G&&h.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#28a745"},children:" Auto-generated from mnemonic via useOnboard hook"})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Layout Type:"}),h.jsxs("select",{value:x,onChange:pe=>{const _e=pe.target.value;v(_e)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:[h.jsx("option",{value:"default",children:"Default Predefined Layouts"}),h.jsx("option",{value:"widthfit",children:"Width Fit"})]})]})]}),h.jsx("h3",{children:"Layout Controls"}),h.jsx("button",{onClick:we,style:{marginRight:"0.5rem"},children:"Generate New Layout"}),h.jsx("button",{onClick:se,style:{marginRight:"0.5rem"},children:s?"Enable Dragging":"Disable Dragging"}),h.jsx("button",{onClick:q,style:{marginRight:"0.5rem"},children:"Change Compaction Type"}),h.jsx("button",{onClick:J,children:"Full Width Screen"}),h.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9em",color:"#fff"},children:["Compaction type:"," ",e?e.charAt(0).toUpperCase()+e.slice(1):"No Compaction"]})]}),h.jsx(Vm,{ref:g,onLayoutChange:Y,slotContent:ce,compactType:e,allStatic:s,onCompactTypeChange:q,onToggleStatic:se,onNewLayout:we,initialLayout:D},x),h.jsxs("div",{className:"layoutJSON",children:["Displayed as ",h.jsx("code",{children:"[x, y, w, h]"}),":",h.jsx("div",{className:"columns",children:Ye})]}),h.jsx(_L,{isOpen:d,currentLeverage:((Ie=b.current)==null?void 0:Ie.leverage)||10,tempLeverage:p,maxRatio:b.current?b.current.calculateMaxRatio(p):p.toFixed(2),onLeverageChange:m,onConfirm:()=>{b.current&&b.current.setLeverage(p),f(!1)},onCancel:()=>{b.current&&m(b.current.leverage),f(!1)}})]})}function Bo({data:t,maxVisible:e=10,maxDataPoints:n=100,height:s=400,width:r=1080,rowWidth:i=280,onItemClick:o,getValue:a,color:l="#2196F3"}){const c=S.useRef(null),u=S.useRef(null),d=S.useRef(0),[f,p]=S.useState(!1),[m,x]=S.useState(0),v=20,g=800,b=S.useMemo(()=>!t||t.length===0?[]:t.length<=n?t:t.slice(-n),[t,n]),w=y=>{const k=[];if(y.timestamp!==void 0&&k.push({label:"Time",value:new Date(y.timestamp).toLocaleTimeString()}),y.market_id!==void 0&&k.push({label:"Market",value:String(y.market_id)}),y.symbol!==void 0&&k.push({label:"Symbol",value:String(y.symbol)}),y.open!==void 0){const _=Number(y.open);k.push({label:"Open",value:isNaN(_)?String(y.open):_.toFixed(4)})}if(y.close!==void 0){const _=Number(y.close);k.push({label:"Close",value:isNaN(_)?String(y.close):_.toFixed(4)})}if(y.high!==void 0){const _=Number(y.high);k.push({label:"High",value:isNaN(_)?String(y.high):_.toFixed(4)})}if(y.low!==void 0){const _=Number(y.low);k.push({label:"Low",value:isNaN(_)?String(y.low):_.toFixed(4)})}if(y.volume!==void 0){const _=Number(y.volume);k.push({label:"Volume",value:isNaN(_)?String(y.volume):_.toFixed(2)})}if(y.price!==void 0){const _=Number(y.price);k.push({label:"Price",value:isNaN(_)?String(y.price):_.toFixed(4)})}if(y.mark_price!==void 0){const _=Number(y.mark_price);k.push({label:"Mark Price",value:isNaN(_)?String(y.mark_price):_.toFixed(4)})}if(y.last_price!==void 0){const _=Number(y.last_price);k.push({label:"Last Price",value:isNaN(_)?String(y.last_price):_.toFixed(4)})}if(y.size!==void 0){const _=Number(y.size);k.push({label:"Size",value:isNaN(_)?String(y.size):_.toFixed(4)})}if(y.entryPrice!==void 0){const _=Number(y.entryPrice);k.push({label:"Entry",value:isNaN(_)?String(y.entryPrice):_.toFixed(4)})}if(y.unrealizedPnL!==void 0){const _=Number(y.unrealizedPnL);k.push({label:"PnL",value:isNaN(_)?String(y.unrealizedPnL):_.toFixed(4)})}if(y.orderId!==void 0&&k.push({label:"Order ID",value:String(y.orderId)}),y.status!==void 0&&k.push({label:"Status",value:String(y.status)}),y.bucketId!==void 0&&k.push({label:"Bucket ID",value:String(y.bucketId)}),y.maxLeverage!==void 0&&k.push({label:"Max Lev",value:String(y.maxLeverage)}),y.value!==void 0&&k.length===0){const _=Number(y.value);k.push({label:"Value",value:isNaN(_)?String(y.value):_.toFixed(4)})}return k.length===0&&k.push({label:"Data",value:"Click to view"}),k.slice(0,6)};return S.useEffect(()=>{if(!u.current||!c.current)return;const y=b.length;if(y===0){x(0),d.current=0;return}const E=c.current.offsetWidth-20*2,T=y*i+(y-1)*v;if(T>E){const C=T-E;x(-C)}else x(0);const D=b.length>d.current;d.current=b.length,D&&u.current&&requestAnimationFrame(()=>{u.current&&u.current.offsetWidth})},[b.length,i,v,r]),S.useEffect(()=>{u.current&&(u.current.style.transition=f?"none":`transform ${g}ms ease-out`,u.current.style.transform=`translateX(${m}px)`)},[m,f,g]),h.jsxs("div",{ref:c,className:"data-flow-container",style:{width:`${r}px`,height:`${s}px`},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[h.jsx("div",{ref:u,className:"data-flow-rows-wrapper",style:{gap:`${v}px`},children:b.map((y,k)=>{const _=w(y),E=k;return h.jsxs("div",{className:"data-flow-row",onClick:()=>{o&&o(y)},style:{width:`${i}px`,background:l},children:[h.jsx("div",{className:"data-flow-row-header",children:y.timestamp?new Date(y.timestamp).toLocaleTimeString():`#${E+1}`}),h.jsx("div",{className:"data-flow-row-fields",children:_.map((T,D)=>h.jsxs("div",{className:"data-flow-field",children:[h.jsxs("span",{className:"data-flow-field-label",children:[T.label,":"]}),h.jsx("span",{className:"data-flow-field-value",children:T.value})]},D))}),h.jsx("div",{className:"data-flow-row-footer",children:"Click to view details"})]},`${E}-${y.timestamp||Date.now()}-${y.id||JSON.stringify(y)}`)})}),f&&h.jsx("div",{className:"data-flow-paused-indicator",children:"Paused"})]})}function ML({data:t,isOpen:e,onClose:n,title:s="Data Details"}){return S.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),S.useEffect(()=>{const r=i=>{i.key==="Escape"&&e&&n()};return e&&window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[e,n]),e?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"data-modal-overlay",onClick:n}),h.jsxs("div",{className:"data-modal",onClick:r=>r.stopPropagation(),children:[h.jsx("h3",{className:"data-modal-title",children:s}),h.jsx("pre",{className:"data-modal-content",children:JSON.stringify(t,null,2)}),h.jsx("button",{className:"data-modal-close-button",onClick:n,children:"Close"})]})]}):null}function yh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function IL(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function T3(t){let e,n,s;t.length!==2?(e=yh,n=(a,l)=>yh(t(a),l),s=(a,l)=>t(a)-l):(e=t===yh||t===IL?t:DL,n=t,s=t);function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=r(a,l,c,u-1);return d>c&&s(a[d-1],l)>-s(a[d],l)?d-1:d}return{left:r,center:o,right:i}}function DL(){return 0}function NL(t){return t===null?NaN:+t}const AL=T3(yh),RL=AL.right;T3(NL).center;class _S extends Map{constructor(e,n=jL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[s,r]of e)this.set(s,r)}get(e){return super.get(CS(this,e))}has(e){return super.has(CS(this,e))}set(e,n){return super.set(OL(this,e),n)}delete(e){return super.delete(LL(this,e))}}function CS({_intern:t,_key:e},n){const s=e(n);return t.has(s)?t.get(s):n}function OL({_intern:t,_key:e},n){const s=e(n);return t.has(s)?t.get(s):(t.set(s,n),n)}function LL({_intern:t,_key:e},n){const s=e(n);return t.has(s)&&(n=t.get(s),t.delete(s)),n}function jL(t){return t!==null&&typeof t=="object"?t.valueOf():t}const FL=Math.sqrt(50),BL=Math.sqrt(10),$L=Math.sqrt(2);function gf(t,e,n){const s=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(s)),i=s/Math.pow(10,r),o=i>=FL?10:i>=BL?5:i>=$L?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?gf(t,e,n*2):[a,l,c]}function zL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const s=e<t,[r,i,o]=s?gf(e,t,n):gf(t,e,n);if(!(i>=r))return[];const a=i-r+1,l=new Array(a);if(s)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Ym(t,e,n){return e=+e,t=+t,n=+n,gf(t,e,n)[2]}function UL(t,e,n){e=+e,t=+t,n=+n;const s=e<t,r=s?Ym(e,t,n):Ym(t,e,n);return(s?-1:1)*(r<0?1/-r:r)}function WL(t,e){let n;if(e===void 0)for(const s of t)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);else{let s=-1;for(let r of t)(r=e(r,++s,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function HL(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var s=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(r);++s<r;)i[s]=t+s*n;return i}function VL(t){return t}var pg=1,gg=2,Gm=3,hc=4,ES=1e-6;function YL(t){return"translate("+t+",0)"}function GL(t){return"translate(0,"+t+")"}function qL(t){return e=>+t(e)}function KL(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function XL(){return!this.__axis}function M3(t,e){var n=[],s=null,r=null,i=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===pg||t===hc?-1:1,u=t===hc||t===gg?"x":"y",d=t===pg||t===Gm?YL:GL;function f(p){var m=s??(e.ticks?e.ticks.apply(e,n):e.domain()),x=r??(e.tickFormat?e.tickFormat.apply(e,n):VL),v=Math.max(i,0)+a,g=e.range(),b=+g[0]+l,w=+g[g.length-1]+l,y=(e.bandwidth?KL:qL)(e.copy(),l),k=p.selection?p.selection():p,_=k.selectAll(".domain").data([null]),E=k.selectAll(".tick").data(m,e).order(),T=E.exit(),D=E.enter().append("g").attr("class","tick"),C=E.select("line"),A=E.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(D),C=C.merge(D.append("line").attr("stroke","currentColor").attr(u+"2",c*i)),A=A.merge(D.append("text").attr("fill","currentColor").attr(u,c*v).attr("dy",t===pg?"0em":t===Gm?"0.71em":"0.32em")),p!==k&&(_=_.transition(p),E=E.transition(p),C=C.transition(p),A=A.transition(p),T=T.transition(p).attr("opacity",ES).attr("transform",function(N){return isFinite(N=y(N))?d(N+l):this.getAttribute("transform")}),D.attr("opacity",ES).attr("transform",function(N){var $=this.parentNode.__axis;return d(($&&isFinite($=$(N))?$:y(N))+l)})),T.remove(),_.attr("d",t===hc||t===gg?o?"M"+c*o+","+b+"H"+l+"V"+w+"H"+c*o:"M"+l+","+b+"V"+w:o?"M"+b+","+c*o+"V"+l+"H"+w+"V"+c*o:"M"+b+","+l+"H"+w),E.attr("opacity",1).attr("transform",function(N){return d(y(N)+l)}),C.attr(u+"2",c*i),A.attr(u,c*v).text(x),k.filter(XL).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===gg?"start":t===hc?"end":"middle"),k.each(function(){this.__axis=y})}return f.scale=function(p){return arguments.length?(e=p,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),f):n.slice()},f.tickValues=function(p){return arguments.length?(s=p==null?null:Array.from(p),f):s&&s.slice()},f.tickFormat=function(p){return arguments.length?(r=p,f):r},f.tickSize=function(p){return arguments.length?(i=o=+p,f):i},f.tickSizeInner=function(p){return arguments.length?(i=+p,f):i},f.tickSizeOuter=function(p){return arguments.length?(o=+p,f):o},f.tickPadding=function(p){return arguments.length?(a=+p,f):a},f.offset=function(p){return arguments.length?(l=+p,f):l},f}function PS(t){return M3(Gm,t)}function QL(t){return M3(hc,t)}var JL={value:()=>{}};function I3(){for(var t=0,e=arguments.length,n={},s;t<e;++t){if(!(s=arguments[t]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new wh(n)}function wh(t){this._=t}function ZL(t,e){return t.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}wh.prototype=I3.prototype={constructor:wh,on:function(t,e){var n=this._,s=ZL(t+"",n),r,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((r=(t=s[i]).type)&&(r=ej(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(r=(t=s[i]).type)n[r]=TS(n[r],t.name,e);else if(e==null)for(r in n)n[r]=TS(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new wh(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,i;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],s=0,r=i.length;s<r;++s)i[s].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)}};function ej(t,e){for(var n=0,s=t.length,r;n<s;++n)if((r=t[n]).name===e)return r.value}function TS(t,e,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===e){t[s]=JL,t=t.slice(0,s).concat(t.slice(s+1));break}return n!=null&&t.push({name:e,value:n}),t}var qm="http://www.w3.org/1999/xhtml";const MS={svg:"http://www.w3.org/2000/svg",xhtml:qm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function I0(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),MS.hasOwnProperty(e)?{space:MS[e],local:t}:t}function tj(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===qm&&e.documentElement.namespaceURI===qm?e.createElement(t):e.createElementNS(n,t)}}function nj(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function D3(t){var e=I0(t);return(e.local?nj:tj)(e)}function sj(){}function ry(t){return t==null?sj:function(){return this.querySelector(t)}}function rj(t){typeof t!="function"&&(t=ry(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=t.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new kn(s,this._parents)}function N3(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ij(){return[]}function A3(t){return t==null?ij:function(){return this.querySelectorAll(t)}}function oj(t){return function(){return N3(t.apply(this,arguments))}}function aj(t){typeof t=="function"?t=oj(t):t=A3(t);for(var e=this._groups,n=e.length,s=[],r=[],i=0;i<n;++i)for(var o=e[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(s.push(t.call(l,l.__data__,c,o)),r.push(l));return new kn(s,r)}function R3(t){return function(){return this.matches(t)}}function O3(t){return function(e){return e.matches(t)}}var lj=Array.prototype.find;function cj(t){return function(){return lj.call(this.children,t)}}function uj(){return this.firstElementChild}function dj(t){return this.select(t==null?uj:cj(typeof t=="function"?t:O3(t)))}var hj=Array.prototype.filter;function fj(){return Array.from(this.children)}function pj(t){return function(){return hj.call(this.children,t)}}function gj(t){return this.selectAll(t==null?fj:pj(typeof t=="function"?t:O3(t)))}function mj(t){typeof t!="function"&&(t=R3(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=[],l,c=0;c<o;++c)(l=i[c])&&t.call(l,l.__data__,c,i)&&a.push(l);return new kn(s,this._parents)}function L3(t){return new Array(t.length)}function xj(){return new kn(this._enter||this._groups.map(L3),this._parents)}function mf(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}mf.prototype={constructor:mf,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function bj(t){return function(){return t}}function yj(t,e,n,s,r,i){for(var o=0,a,l=e.length,c=i.length;o<c;++o)(a=e[o])?(a.__data__=i[o],s[o]=a):n[o]=new mf(t,i[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function wj(t,e,n,s,r,i,o){var a,l,c=new Map,u=e.length,d=i.length,f=new Array(u),p;for(a=0;a<u;++a)(l=e[a])&&(f[a]=p=o.call(l,l.__data__,a,e)+"",c.has(p)?r[a]=l:c.set(p,l));for(a=0;a<d;++a)p=o.call(t,i[a],a,i)+"",(l=c.get(p))?(s[a]=l,l.__data__=i[a],c.delete(p)):n[a]=new mf(t,i[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(f[a])===l&&(r[a]=l)}function vj(t){return t.__data__}function Sj(t,e){if(!arguments.length)return Array.from(this,vj);var n=e?wj:yj,s=this._parents,r=this._groups;typeof t!="function"&&(t=bj(t));for(var i=r.length,o=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=s[c],d=r[c],f=d.length,p=kj(t.call(u,u&&u.__data__,c,s)),m=p.length,x=a[c]=new Array(m),v=o[c]=new Array(m),g=l[c]=new Array(f);n(u,d,x,v,g,p,e);for(var b=0,w=0,y,k;b<m;++b)if(y=x[b]){for(b>=w&&(w=b+1);!(k=v[w])&&++w<m;);y._next=k||null}}return o=new kn(o,s),o._enter=a,o._exit=l,o}function kj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _j(){return new kn(this._exit||this._groups.map(L3),this._parents)}function Cj(t,e,n){var s=this.enter(),r=this,i=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?i.remove():n(i),s&&r?s.merge(r).order():r}function Ej(t){for(var e=t.selection?t.selection():t,n=this._groups,s=e._groups,r=n.length,i=s.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=s[l],d=c.length,f=a[l]=new Array(d),p,m=0;m<d;++m)(p=c[m]||u[m])&&(f[m]=p);for(;l<r;++l)a[l]=n[l];return new kn(a,this._parents)}function Pj(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s=t[e],r=s.length-1,i=s[r],o;--r>=0;)(o=s[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function Tj(t){t||(t=Mj);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,s=n.length,r=new Array(s),i=0;i<s;++i){for(var o=n[i],a=o.length,l=r[i]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new kn(r,this._parents).order()}function Mj(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ij(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Dj(){return Array.from(this)}function Nj(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length;r<i;++r){var o=s[r];if(o)return o}return null}function Aj(){let t=0;for(const e of this)++t;return t}function Rj(){return!this.node()}function Oj(t){for(var e=this._groups,n=0,s=e.length;n<s;++n)for(var r=e[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&t.call(a,a.__data__,i,r);return this}function Lj(t){return function(){this.removeAttribute(t)}}function jj(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fj(t,e){return function(){this.setAttribute(t,e)}}function Bj(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $j(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function zj(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Uj(t,e){var n=I0(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((e==null?n.local?jj:Lj:typeof e=="function"?n.local?zj:$j:n.local?Bj:Fj)(n,e))}function j3(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wj(t){return function(){this.style.removeProperty(t)}}function Hj(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Vj(t,e,n){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function Yj(t,e,n){return arguments.length>1?this.each((e==null?Wj:typeof e=="function"?Vj:Hj)(t,e,n??"")):il(this.node(),t)}function il(t,e){return t.style.getPropertyValue(e)||j3(t).getComputedStyle(t,null).getPropertyValue(e)}function Gj(t){return function(){delete this[t]}}function qj(t,e){return function(){this[t]=e}}function Kj(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Xj(t,e){return arguments.length>1?this.each((e==null?Gj:typeof e=="function"?Kj:qj)(t,e)):this.node()[t]}function F3(t){return t.trim().split(/^|\s+/)}function iy(t){return t.classList||new B3(t)}function B3(t){this._node=t,this._names=F3(t.getAttribute("class")||"")}B3.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function $3(t,e){for(var n=iy(t),s=-1,r=e.length;++s<r;)n.add(e[s])}function z3(t,e){for(var n=iy(t),s=-1,r=e.length;++s<r;)n.remove(e[s])}function Qj(t){return function(){$3(this,t)}}function Jj(t){return function(){z3(this,t)}}function Zj(t,e){return function(){(e.apply(this,arguments)?$3:z3)(this,t)}}function eF(t,e){var n=F3(t+"");if(arguments.length<2){for(var s=iy(this.node()),r=-1,i=n.length;++r<i;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Zj:e?Qj:Jj)(n,e))}function tF(){this.textContent=""}function nF(t){return function(){this.textContent=t}}function sF(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function rF(t){return arguments.length?this.each(t==null?tF:(typeof t=="function"?sF:nF)(t)):this.node().textContent}function iF(){this.innerHTML=""}function oF(t){return function(){this.innerHTML=t}}function aF(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function lF(t){return arguments.length?this.each(t==null?iF:(typeof t=="function"?aF:oF)(t)):this.node().innerHTML}function cF(){this.nextSibling&&this.parentNode.appendChild(this)}function uF(){return this.each(cF)}function dF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hF(){return this.each(dF)}function fF(t){var e=typeof t=="function"?t:D3(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function pF(){return null}function gF(t,e){var n=typeof t=="function"?t:D3(t),s=e==null?pF:typeof e=="function"?e:ry(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function mF(){var t=this.parentNode;t&&t.removeChild(this)}function xF(){return this.each(mF)}function bF(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function yF(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wF(t){return this.select(t?yF:bF)}function vF(t){return arguments.length?this.property("__data__",t):this.node().__data__}function SF(t){return function(e){t.call(this,e,this.__data__)}}function kF(t){return t.trim().split(/^|\s+/).map(function(e){var n="",s=e.indexOf(".");return s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),{type:e,name:n}})}function _F(t){return function(){var e=this.__on;if(e){for(var n=0,s=-1,r=e.length,i;n<r;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++s]=i;++s?e.length=s:delete this.__on}}}function CF(t,e,n){return function(){var s=this.__on,r,i=SF(e);if(s){for(var o=0,a=s.length;o<a;++o)if((r=s[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=e;return}}this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},s?s.push(r):this.__on=[r]}}function EF(t,e,n){var s=kF(t+""),r,i=s.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<i;++r)if((o=s[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?CF:_F,r=0;r<i;++r)this.each(a(s[r],e,n));return this}function U3(t,e,n){var s=j3(t),r=s.CustomEvent;typeof r=="function"?r=new r(e,n):(r=s.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function PF(t,e){return function(){return U3(this,t,e)}}function TF(t,e){return function(){return U3(this,t,e.apply(this,arguments))}}function MF(t,e){return this.each((typeof e=="function"?TF:PF)(t,e))}function*IF(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length,o;r<i;++r)(o=s[r])&&(yield o)}var oy=[null];function kn(t,e){this._groups=t,this._parents=e}function Hu(){return new kn([[document.documentElement]],oy)}function DF(){return this}kn.prototype=Hu.prototype={constructor:kn,select:rj,selectAll:aj,selectChild:dj,selectChildren:gj,filter:mj,data:Sj,enter:xj,exit:_j,join:Cj,merge:Ej,selection:DF,order:Pj,sort:Tj,call:Ij,nodes:Dj,node:Nj,size:Aj,empty:Rj,each:Oj,attr:Uj,style:Yj,property:Xj,classed:eF,text:rF,html:lF,raise:uF,lower:hF,append:fF,insert:gF,remove:xF,clone:wF,datum:vF,on:EF,dispatch:MF,[Symbol.iterator]:IF};function Rd(t){return typeof t=="string"?new kn([[document.querySelector(t)]],[document.documentElement]):new kn([[t]],oy)}function NF(t){let e;for(;e=t.sourceEvent;)t=e;return t}function AF(t,e){if(t=NF(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function RF(t){return typeof t=="string"?new kn([document.querySelectorAll(t)],[document.documentElement]):new kn([N3(t)],oy)}function ay(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function W3(t,e){var n=Object.create(t.prototype);for(var s in e)n[s]=e[s];return n}function Vu(){}var gu=.7,xf=1/gu,xa="\\s*([+-]?\\d+)\\s*",mu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",OF=/^#([0-9a-f]{3,8})$/,LF=new RegExp(`^rgb\\(${xa},${xa},${xa}\\)$`),jF=new RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),FF=new RegExp(`^rgba\\(${xa},${xa},${xa},${mu}\\)$`),BF=new RegExp(`^rgba\\(${tr},${tr},${tr},${mu}\\)$`),$F=new RegExp(`^hsl\\(${mu},${tr},${tr}\\)$`),zF=new RegExp(`^hsla\\(${mu},${tr},${tr},${mu}\\)$`),IS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ay(Vu,wo,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:DS,formatHex:DS,formatHex8:UF,formatHsl:WF,formatRgb:NS,toString:NS});function DS(){return this.rgb().formatHex()}function UF(){return this.rgb().formatHex8()}function WF(){return H3(this).formatHsl()}function NS(){return this.rgb().formatRgb()}function wo(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=OF.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?AS(e):n===3?new An(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Od(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Od(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=LF.exec(t))?new An(e[1],e[2],e[3],1):(e=jF.exec(t))?new An(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=FF.exec(t))?Od(e[1],e[2],e[3],e[4]):(e=BF.exec(t))?Od(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$F.exec(t))?LS(e[1],e[2]/100,e[3]/100,1):(e=zF.exec(t))?LS(e[1],e[2]/100,e[3]/100,e[4]):IS.hasOwnProperty(t)?AS(IS[t]):t==="transparent"?new An(NaN,NaN,NaN,0):null}function AS(t){return new An(t>>16&255,t>>8&255,t&255,1)}function Od(t,e,n,s){return s<=0&&(t=e=n=NaN),new An(t,e,n,s)}function HF(t){return t instanceof Vu||(t=wo(t)),t?(t=t.rgb(),new An(t.r,t.g,t.b,t.opacity)):new An}function Km(t,e,n,s){return arguments.length===1?HF(t):new An(t,e,n,s??1)}function An(t,e,n,s){this.r=+t,this.g=+e,this.b=+n,this.opacity=+s}ay(An,Km,W3(Vu,{brighter(t){return t=t==null?xf:Math.pow(xf,t),new An(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gu:Math.pow(gu,t),new An(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new An(ao(this.r),ao(this.g),ao(this.b),bf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RS,formatHex:RS,formatHex8:VF,formatRgb:OS,toString:OS}));function RS(){return`#${Xi(this.r)}${Xi(this.g)}${Xi(this.b)}`}function VF(){return`#${Xi(this.r)}${Xi(this.g)}${Xi(this.b)}${Xi((isNaN(this.opacity)?1:this.opacity)*255)}`}function OS(){const t=bf(this.opacity);return`${t===1?"rgb(":"rgba("}${ao(this.r)}, ${ao(this.g)}, ${ao(this.b)}${t===1?")":`, ${t})`}`}function bf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ao(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xi(t){return t=ao(t),(t<16?"0":"")+t.toString(16)}function LS(t,e,n,s){return s<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ts(t,e,n,s)}function H3(t){if(t instanceof Ts)return new Ts(t.h,t.s,t.l,t.opacity);if(t instanceof Vu||(t=wo(t)),!t)return new Ts;if(t instanceof Ts)return t;t=t.rgb();var e=t.r/255,n=t.g/255,s=t.b/255,r=Math.min(e,n,s),i=Math.max(e,n,s),o=NaN,a=i-r,l=(i+r)/2;return a?(e===i?o=(n-s)/a+(n<s)*6:n===i?o=(s-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+r:2-i-r,o*=60):a=l>0&&l<1?0:o,new Ts(o,a,l,t.opacity)}function YF(t,e,n,s){return arguments.length===1?H3(t):new Ts(t,e,n,s??1)}function Ts(t,e,n,s){this.h=+t,this.s=+e,this.l=+n,this.opacity=+s}ay(Ts,YF,W3(Vu,{brighter(t){return t=t==null?xf:Math.pow(xf,t),new Ts(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gu:Math.pow(gu,t),new Ts(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*e,r=2*n-s;return new An(mg(t>=240?t-240:t+120,r,s),mg(t,r,s),mg(t<120?t+240:t-120,r,s),this.opacity)},clamp(){return new Ts(jS(this.h),Ld(this.s),Ld(this.l),bf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bf(this.opacity);return`${t===1?"hsl(":"hsla("}${jS(this.h)}, ${Ld(this.s)*100}%, ${Ld(this.l)*100}%${t===1?")":`, ${t})`}`}}));function jS(t){return t=(t||0)%360,t<0?t+360:t}function Ld(t){return Math.max(0,Math.min(1,t||0))}function mg(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ly=t=>()=>t;function GF(t,e){return function(n){return t+n*e}}function qF(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(s){return Math.pow(t+s*e,n)}}function KF(t){return(t=+t)==1?V3:function(e,n){return n-e?qF(e,n,t):ly(isNaN(e)?n:e)}}function V3(t,e){var n=e-t;return n?GF(t,n):ly(isNaN(t)?e:t)}const yf=function t(e){var n=KF(e);function s(r,i){var o=n((r=Km(r)).r,(i=Km(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),c=V3(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return s.gamma=t,s}(1);function XF(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,s=e.slice(),r;return function(i){for(r=0;r<n;++r)s[r]=t[r]*(1-i)+e[r]*i;return s}}function QF(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function JF(t,e){var n=e?e.length:0,s=t?Math.min(n,t.length):0,r=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)r[o]=cy(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<s;++o)i[o]=r[o](a);return i}}function ZF(t,e){var n=new Date;return t=+t,e=+e,function(s){return n.setTime(t*(1-s)+e*s),n}}function Ps(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function eB(t,e){var n={},s={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=cy(t[r],e[r]):s[r]=e[r];return function(i){for(r in n)s[r]=n[r](i);return s}}var Xm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xg=new RegExp(Xm.source,"g");function tB(t){return function(){return t}}function nB(t){return function(e){return t(e)+""}}function Y3(t,e){var n=Xm.lastIndex=xg.lastIndex=0,s,r,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(s=Xm.exec(t))&&(r=xg.exec(e));)(i=r.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(s=s[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Ps(s,r)})),n=xg.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?nB(l[0].x):tB(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function cy(t,e){var n=typeof e,s;return e==null||n==="boolean"?ly(e):(n==="number"?Ps:n==="string"?(s=wo(e))?(e=s,yf):Y3:e instanceof wo?yf:e instanceof Date?ZF:QF(e)?XF:Array.isArray(e)?JF:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?eB:Ps)(t,e)}function sB(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var FS=180/Math.PI,Qm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function G3(t,e,n,s,r,i){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*s)&&(n-=t*l,s-=e*l),(a=Math.sqrt(n*n+s*s))&&(n/=a,s/=a,l/=a),t*s<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*FS,skewX:Math.atan(l)*FS,scaleX:o,scaleY:a}}var jd;function rB(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Qm:G3(e.a,e.b,e.c,e.d,e.e,e.f)}function iB(t){return t==null||(jd||(jd=document.createElementNS("http://www.w3.org/2000/svg","g")),jd.setAttribute("transform",t),!(t=jd.transform.baseVal.consolidate()))?Qm:(t=t.matrix,G3(t.a,t.b,t.c,t.d,t.e,t.f))}function q3(t,e,n,s){function r(c){return c.length?c.pop()+" ":""}function i(c,u,d,f,p,m){if(c!==d||u!==f){var x=p.push("translate(",null,e,null,n);m.push({i:x-4,x:Ps(c,d)},{i:x-2,x:Ps(u,f)})}else(d||f)&&p.push("translate("+d+e+f+n)}function o(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(r(d)+"rotate(",null,s)-2,x:Ps(c,u)})):u&&d.push(r(d)+"rotate("+u+s)}function a(c,u,d,f){c!==u?f.push({i:d.push(r(d)+"skewX(",null,s)-2,x:Ps(c,u)}):u&&d.push(r(d)+"skewX("+u+s)}function l(c,u,d,f,p,m){if(c!==d||u!==f){var x=p.push(r(p)+"scale(",null,",",null,")");m.push({i:x-4,x:Ps(c,d)},{i:x-2,x:Ps(u,f)})}else(d!==1||f!==1)&&p.push(r(p)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=t(c),u=t(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,f),o(c.rotate,u.rotate,d,f),a(c.skewX,u.skewX,d,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(p){for(var m=-1,x=f.length,v;++m<x;)d[(v=f[m]).i]=v.x(p);return d.join("")}}}var oB=q3(rB,"px, ","px)","deg)"),aB=q3(iB,", ",")",")"),ol=0,fc=0,Xl=0,K3=1e3,wf,pc,vf=0,vo=0,D0=0,xu=typeof performance=="object"&&performance.now?performance:Date,X3=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function uy(){return vo||(X3(lB),vo=xu.now()+D0)}function lB(){vo=0}function Sf(){this._call=this._time=this._next=null}Sf.prototype=Q3.prototype={constructor:Sf,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?uy():+n)+(e==null?0:+e),!this._next&&pc!==this&&(pc?pc._next=this:wf=this,pc=this),this._call=t,this._time=n,Jm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jm())}};function Q3(t,e,n){var s=new Sf;return s.restart(t,e,n),s}function cB(){uy(),++ol;for(var t=wf,e;t;)(e=vo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ol}function BS(){vo=(vf=xu.now())+D0,ol=fc=0;try{cB()}finally{ol=0,dB(),vo=0}}function uB(){var t=xu.now(),e=t-vf;e>K3&&(D0-=e,vf=t)}function dB(){for(var t,e=wf,n,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:wf=n);pc=t,Jm(s)}function Jm(t){if(!ol){fc&&(fc=clearTimeout(fc));var e=t-vo;e>24?(t<1/0&&(fc=setTimeout(BS,t-xu.now()-D0)),Xl&&(Xl=clearInterval(Xl))):(Xl||(vf=xu.now(),Xl=setInterval(uB,K3)),ol=1,X3(BS))}}function $S(t,e,n){var s=new Sf;return e=e==null?0:+e,s.restart(r=>{s.stop(),t(r+e)},e,n),s}var hB=I3("start","end","cancel","interrupt"),fB=[],J3=0,zS=1,Zm=2,vh=3,US=4,ex=5,Sh=6;function N0(t,e,n,s,r,i){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;pB(t,n,{name:e,index:s,group:r,on:hB,tween:fB,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:J3})}function dy(t,e){var n=Os(t,e);if(n.state>J3)throw new Error("too late; already scheduled");return n}function ir(t,e){var n=Os(t,e);if(n.state>vh)throw new Error("too late; already running");return n}function Os(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function pB(t,e,n){var s=t.__transition,r;s[e]=n,n.timer=Q3(i,0,n.time);function i(c){n.state=zS,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,f,p;if(n.state!==zS)return l();for(u in s)if(p=s[u],p.name===n.name){if(p.state===vh)return $S(o);p.state===US?(p.state=Sh,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete s[u]):+u<e&&(p.state=Sh,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete s[u])}if($S(function(){n.state===vh&&(n.state=US,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Zm,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Zm){for(n.state=vh,r=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=p);r.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=ex,1),d=-1,f=r.length;++d<f;)r[d].call(t,u);n.state===ex&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Sh,n.timer.stop(),delete s[e];for(var c in s)return;delete t.__transition}}function gB(t,e){var n=t.__transition,s,r,i=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((s=n[o]).name!==e){i=!1;continue}r=s.state>Zm&&s.state<ex,s.state=Sh,s.timer.stop(),s.on.call(r?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete n[o]}i&&delete t.__transition}}function mB(t){return this.each(function(){gB(this,t)})}function xB(t,e){var n,s;return function(){var r=ir(this,t),i=r.tween;if(i!==n){s=n=i;for(var o=0,a=s.length;o<a;++o)if(s[o].name===e){s=s.slice(),s.splice(o,1);break}}r.tween=s}}function bB(t,e,n){var s,r;if(typeof n!="function")throw new Error;return function(){var i=ir(this,t),o=i.tween;if(o!==s){r=(s=o).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}i.tween=r}}function yB(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s=Os(this.node(),n).tween,r=0,i=s.length,o;r<i;++r)if((o=s[r]).name===t)return o.value;return null}return this.each((e==null?xB:bB)(n,t,e))}function hy(t,e,n){var s=t._id;return t.each(function(){var r=ir(this,s);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Os(r,s).value[e]}}function Z3(t,e){var n;return(typeof e=="number"?Ps:e instanceof wo?yf:(n=wo(e))?(e=n,yf):Y3)(t,e)}function wB(t){return function(){this.removeAttribute(t)}}function vB(t){return function(){this.removeAttributeNS(t.space,t.local)}}function SB(t,e,n){var s,r=n+"",i;return function(){var o=this.getAttribute(t);return o===r?null:o===s?i:i=e(s=o,n)}}function kB(t,e,n){var s,r=n+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===s?i:i=e(s=o,n)}}function _B(t,e,n){var s,r,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a)))}}function CB(t,e,n){var s,r,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a)))}}function EB(t,e){var n=I0(t),s=n==="transform"?aB:Z3;return this.attrTween(t,typeof e=="function"?(n.local?CB:_B)(n,s,hy(this,"attr."+t,e)):e==null?(n.local?vB:wB)(n):(n.local?kB:SB)(n,s,e))}function PB(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function TB(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function MB(t,e){var n,s;function r(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&TB(t,i)),n}return r._value=e,r}function IB(t,e){var n,s;function r(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&PB(t,i)),n}return r._value=e,r}function DB(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var s=I0(t);return this.tween(n,(s.local?MB:IB)(s,e))}function NB(t,e){return function(){dy(this,t).delay=+e.apply(this,arguments)}}function AB(t,e){return e=+e,function(){dy(this,t).delay=e}}function RB(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?NB:AB)(e,t)):Os(this.node(),e).delay}function OB(t,e){return function(){ir(this,t).duration=+e.apply(this,arguments)}}function LB(t,e){return e=+e,function(){ir(this,t).duration=e}}function jB(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?OB:LB)(e,t)):Os(this.node(),e).duration}function FB(t,e){if(typeof e!="function")throw new Error;return function(){ir(this,t).ease=e}}function BB(t){var e=this._id;return arguments.length?this.each(FB(e,t)):Os(this.node(),e).ease}function $B(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ir(this,t).ease=n}}function zB(t){if(typeof t!="function")throw new Error;return this.each($B(this._id,t))}function UB(t){typeof t!="function"&&(t=R3(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=[],l,c=0;c<o;++c)(l=i[c])&&t.call(l,l.__data__,c,i)&&a.push(l);return new Nr(s,this._parents,this._name,this._id)}function WB(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,s=e.length,r=n.length,i=Math.min(s,r),o=new Array(s),a=0;a<i;++a)for(var l=e[a],c=n[a],u=l.length,d=o[a]=new Array(u),f,p=0;p<u;++p)(f=l[p]||c[p])&&(d[p]=f);for(;a<s;++a)o[a]=e[a];return new Nr(o,this._parents,this._name,this._id)}function HB(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function VB(t,e,n){var s,r,i=HB(e)?dy:ir;return function(){var o=i(this,t),a=o.on;a!==s&&(r=(s=a).copy()).on(e,n),o.on=r}}function YB(t,e){var n=this._id;return arguments.length<2?Os(this.node(),n).on.on(t):this.each(VB(n,t,e))}function GB(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function qB(){return this.on("end.remove",GB(this._id))}function KB(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ry(t));for(var s=this._groups,r=s.length,i=new Array(r),o=0;o<r;++o)for(var a=s[o],l=a.length,c=i[o]=new Array(l),u,d,f=0;f<l;++f)(u=a[f])&&(d=t.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,N0(c[f],e,n,f,c,Os(u,n)));return new Nr(i,this._parents,e,n)}function XB(t){var e=this._name,n=this._id;typeof t!="function"&&(t=A3(t));for(var s=this._groups,r=s.length,i=[],o=[],a=0;a<r;++a)for(var l=s[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var f=t.call(u,u.__data__,d,l),p,m=Os(u,n),x=0,v=f.length;x<v;++x)(p=f[x])&&N0(p,e,n,x,f,m);i.push(f),o.push(u)}return new Nr(i,o,e,n)}var QB=Hu.prototype.constructor;function JB(){return new QB(this._groups,this._parents)}function ZB(t,e){var n,s,r;return function(){var i=il(this,t),o=(this.style.removeProperty(t),il(this,t));return i===o?null:i===n&&o===s?r:r=e(n=i,s=o)}}function eP(t){return function(){this.style.removeProperty(t)}}function e$(t,e,n){var s,r=n+"",i;return function(){var o=il(this,t);return o===r?null:o===s?i:i=e(s=o,n)}}function t$(t,e,n){var s,r,i;return function(){var o=il(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),il(this,t))),o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a))}}function n$(t,e){var n,s,r,i="style."+e,o="end."+i,a;return function(){var l=ir(this,t),c=l.on,u=l.value[i]==null?a||(a=eP(e)):void 0;(c!==n||r!==u)&&(s=(n=c).copy()).on(o,r=u),l.on=s}}function s$(t,e,n){var s=(t+="")=="transform"?oB:Z3;return e==null?this.styleTween(t,ZB(t,s)).on("end.style."+t,eP(t)):typeof e=="function"?this.styleTween(t,t$(t,s,hy(this,"style."+t,e))).each(n$(this._id,t)):this.styleTween(t,e$(t,s,e),n).on("end.style."+t,null)}function r$(t,e,n){return function(s){this.style.setProperty(t,e.call(this,s),n)}}function i$(t,e,n){var s,r;function i(){var o=e.apply(this,arguments);return o!==r&&(s=(r=o)&&r$(t,o,n)),s}return i._value=e,i}function o$(t,e,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,i$(t,e,n??""))}function a$(t){return function(){this.textContent=t}}function l$(t){return function(){var e=t(this);this.textContent=e??""}}function c$(t){return this.tween("text",typeof t=="function"?l$(hy(this,"text",t)):a$(t==null?"":t+""))}function u$(t){return function(e){this.textContent=t.call(this,e)}}function d$(t){var e,n;function s(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&u$(r)),e}return s._value=t,s}function h$(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,d$(t))}function f$(){for(var t=this._name,e=this._id,n=tP(),s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Os(l,e);N0(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Nr(s,this._parents,t,n)}function p$(){var t,e,n=this,s=n._id,r=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--r===0&&i()}};n.each(function(){var c=ir(this,s),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&i()})}var g$=0;function Nr(t,e,n,s){this._groups=t,this._parents=e,this._name=n,this._id=s}function tP(){return++g$}var ar=Hu.prototype;Nr.prototype={constructor:Nr,select:KB,selectAll:XB,selectChild:ar.selectChild,selectChildren:ar.selectChildren,filter:UB,merge:WB,selection:JB,transition:f$,call:ar.call,nodes:ar.nodes,node:ar.node,size:ar.size,empty:ar.empty,each:ar.each,on:YB,attr:EB,attrTween:DB,style:s$,styleTween:o$,text:c$,textTween:h$,remove:qB,tween:yB,delay:RB,duration:jB,ease:BB,easeVarying:zB,end:p$,[Symbol.iterator]:ar[Symbol.iterator]};function m$(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var x$={time:null,delay:0,duration:250,ease:m$};function b$(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function y$(t){var e,n;t instanceof Nr?(e=t._id,t=t._name):(e=tP(),(n=x$).time=uy(),t=t==null?null:t+"");for(var s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&N0(l,t,e,c,o,n||b$(l,e));return new Nr(s,this._parents,t,e)}Hu.prototype.interrupt=mB;Hu.prototype.transition=y$;function w$(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function kf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function al(t){return t=kf(Math.abs(t)),t?t[1]:NaN}function v$(t,e){return function(n,s){for(var r=n.length,i=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>s&&(a=Math.max(1,s-l)),i.push(n.substring(r-=a,r+a)),!((l+=a+1)>s));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function S$(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var k$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _f(t){if(!(e=k$.exec(t)))throw new Error("invalid format: "+t);var e;return new fy({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}_f.prototype=fy.prototype;function fy(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}fy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _$(t){e:for(var e=t.length,n=1,s=-1,r;n<e;++n)switch(t[n]){case".":s=r=n;break;case"0":s===0&&(s=n),r=n;break;default:if(!+t[n])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(r+1):t}var nP;function C$(t,e){var n=kf(t,e);if(!n)return t+"";var s=n[0],r=n[1],i=r-(nP=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+kf(t,Math.max(0,e+i-1))[0]}function WS(t,e){var n=kf(t,e);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const HS={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:w$,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>WS(t*100,e),r:WS,s:C$,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function VS(t){return t}var YS=Array.prototype.map,GS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function E$(t){var e=t.grouping===void 0||t.thousands===void 0?VS:v$(YS.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?VS:S$(YS.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=_f(d);var f=d.fill,p=d.align,m=d.sign,x=d.symbol,v=d.zero,g=d.width,b=d.comma,w=d.precision,y=d.trim,k=d.type;k==="n"?(b=!0,k="g"):HS[k]||(w===void 0&&(w=12),y=!0,k="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var _=x==="$"?n:x==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=x==="$"?s:/[%p]/.test(k)?o:"",T=HS[k],D=/[defgprs%]/.test(k);w=w===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function C(A){var N=_,$=E,W,L,F;if(k==="c")$=T(A)+$,A="";else{A=+A;var j=A<0||1/A<0;if(A=isNaN(A)?l:T(Math.abs(A),w),y&&(A=_$(A)),j&&+A==0&&m!=="+"&&(j=!1),N=(j?m==="("?m:a:m==="-"||m==="("?"":m)+N,$=(k==="s"?GS[8+nP/3]:"")+$+(j&&m==="("?")":""),D){for(W=-1,L=A.length;++W<L;)if(F=A.charCodeAt(W),48>F||F>57){$=(F===46?r+A.slice(W+1):A.slice(W))+$,A=A.slice(0,W);break}}}b&&!v&&(A=e(A,1/0));var R=N.length+A.length+$.length,B=R<g?new Array(g-R+1).join(f):"";switch(b&&v&&(A=e(B+A,B.length?g-$.length:1/0),B=""),p){case"<":A=N+A+$+B;break;case"=":A=N+B+A+$;break;case"^":A=B.slice(0,R=B.length>>1)+N+A+$+B.slice(R);break;default:A=B+N+A+$;break}return i(A)}return C.toString=function(){return d+""},C}function u(d,f){var p=c((d=_f(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(al(f)/3)))*3,x=Math.pow(10,-m),v=GS[8+m/3];return function(g){return p(x*g)+v}}return{format:c,formatPrefix:u}}var Fd,sP,rP;P$({thousands:",",grouping:[3],currency:["$",""]});function P$(t){return Fd=E$(t),sP=Fd.format,rP=Fd.formatPrefix,Fd}function T$(t){return Math.max(0,-al(Math.abs(t)))}function M$(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(al(e)/3)))*3-al(Math.abs(t)))}function I$(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,al(e)-al(t))+1}function py(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const qS=Symbol("implicit");function iP(){var t=new _S,e=[],n=[],s=qS;function r(i){let o=t.get(i);if(o===void 0){if(s!==qS)return s;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return r.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new _S;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(i){return arguments.length?(n=Array.from(i),r):n.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return iP(e,n).unknown(s)},py.apply(r,arguments),r}function oP(){var t=iP().unknown(void 0),e=t.domain,n=t.range,s=0,r=1,i,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,p=r<s,m=p?r:s,x=p?s:r;i=(x-m)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),m+=(x-m-i*(f-l))*u,o=i*(1-l),a&&(m=Math.round(m),o=Math.round(o));var v=HL(f).map(function(g){return m+i*g});return n(p?v.reverse():v)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([s,r]=f,s=+s,r=+r,d()):[s,r]},t.rangeRound=function(f){return[s,r]=f,s=+s,r=+r,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return oP(e(),[s,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},py.apply(d(),arguments)}function D$(t){return function(){return t}}function N$(t){return+t}var KS=[0,1];function oa(t){return t}function tx(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:D$(isNaN(e)?NaN:.5)}function A$(t,e){var n;return t>e&&(n=t,t=e,e=n),function(s){return Math.max(t,Math.min(e,s))}}function R$(t,e,n){var s=t[0],r=t[1],i=e[0],o=e[1];return r<s?(s=tx(r,s),i=n(o,i)):(s=tx(s,r),i=n(i,o)),function(a){return i(s(a))}}function O$(t,e,n){var s=Math.min(t.length,e.length)-1,r=new Array(s),i=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<s;)r[o]=tx(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=RL(t,a,1,s)-1;return i[l](r[l](a))}}function L$(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function j$(){var t=KS,e=KS,n=cy,s,r,i,o=oa,a,l,c;function u(){var f=Math.min(t.length,e.length);return o!==oa&&(o=A$(t[0],t[f-1])),a=f>2?O$:R$,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?i:(l||(l=a(t.map(s),e,n)))(s(o(f)))}return d.invert=function(f){return o(r((c||(c=a(e,t.map(s),Ps)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,N$),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=sB,u()},d.clamp=function(f){return arguments.length?(o=f?!0:oa,u()):o!==oa},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,p){return s=f,r=p,u()}}function F$(){return j$()(oa,oa)}function B$(t,e,n,s){var r=UL(t,e,n),i;switch(s=_f(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return s.precision==null&&!isNaN(i=M$(r,o))&&(s.precision=i),rP(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=I$(r,Math.max(Math.abs(t),Math.abs(e))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=T$(r))&&(s.precision=i-(s.type==="%")*2);break}}return sP(s)}function $$(t){var e=t.domain;return t.ticks=function(n){var s=e();return zL(s[0],s[s.length-1],n??10)},t.tickFormat=function(n,s){var r=e();return B$(r[0],r[r.length-1],n??10,s)},t.nice=function(n){n==null&&(n=10);var s=e(),r=0,i=s.length-1,o=s[r],a=s[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=i,i=c);u-- >0;){if(c=Ym(o,a,n),c===l)return s[r]=o,s[i]=a,e(s);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function aP(){var t=F$();return t.copy=function(){return L$(t,aP())},py.apply(t,arguments),$$(t)}function gc(t,e,n){this.k=t,this.x=e,this.y=n}gc.prototype={constructor:gc,scale:function(t){return t===1?this:new gc(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new gc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};gc.prototype;function $o({data:t,height:e=150,width:n=900,maxBars:s=60,getTimestamp:r=i=>i.timestamp||Date.now()}){const i=S.useRef(null),o=S.useRef(null),[a,l]=S.useState([]),c=S.useCallback(u=>r(u),[r]);return S.useEffect(()=>{if(t.length===0){l([]);return}const u=Date.now(),d=new Map;t.forEach(p=>{const m=c(p);if(!m||isNaN(m)||!isFinite(m))return;const x=Math.floor((u-m)/1e3);if(x>=0&&x<s){const v=d.get(x)||0;d.set(x,v+1)}});const f=[];for(let p=s-1;p>=0;p--)f.push({time:p,count:d.get(p)||0});l(f)},[t,s,c]),S.useEffect(()=>{if(!i.current||a.length===0)return;const u=Rd(i.current);u.selectAll("*").remove();const d={top:20,right:20,bottom:40,left:50},f=n-d.left-d.right,p=e-d.top-d.bottom,m=u.append("g").attr("transform",`translate(${d.left}, ${d.top})`),x=oP().domain(a.map((b,w)=>w.toString())).range([0,f]).padding(.1);WL(a,b=>b.count);const g=aP().domain([0,5]).range([p,0]).nice();return m.append("g").attr("transform",`translate(0, ${p})`).call(PS(x).tickValues(x.domain().filter((b,w)=>w%Math.ceil(s/10)===0)).tickFormat((b,w)=>{var E;const y=parseInt(b||"0"),k=((E=a[y])==null?void 0:E.time)||0;return k===0?"now":k<60?`-${k}s`:`-${Math.floor(k/60)}m`})).selectAll("text").attr("class","data-rate-axis-text"),m.append("g").call(QL(g).ticks(5)).selectAll("text").attr("class","data-rate-axis-text"),m.append("text").attr("class","data-rate-y-axis-label").attr("transform","rotate(-90)").attr("y",-35).attr("x",-p/2).attr("text-anchor","middle").text("Data Points/sec"),m.selectAll("rect").data(a).enter().append("rect").attr("x",(b,w)=>x(w.toString())||0).attr("y",b=>g(b.count)).attr("width",x.bandwidth()).attr("height",b=>p-g(b.count)).attr("fill",b=>b.count>=3.5?"#4CAF50":b.count>=2?"#FF9800":b.count>0?"#F44336":"#E0E0E0").attr("rx",2).style("opacity",.8).on("mouseover",function(b,w){var D;Rd(this).style("opacity",1),o.current&&o.current.remove();const k=Rd("body").append("div").attr("class","data-rate-tooltip").style("opacity",0),_=(D=i.current)==null?void 0:D.getBoundingClientRect(),[E,T]=AF(b,i.current);_&&k.style("left",`${_.left+E+10}px`).style("top",`${_.top+T-10}px`).text(`${w.count} data points ${w.time===0?"now":`${w.time}s ago`}`).transition().duration(200).style("opacity",1),o.current=k}).on("mouseout",function(){Rd(this).style("opacity",.8),o.current&&(o.current.transition().duration(200).style("opacity",0).remove(),o.current=null)}),m.append("g").attr("class","grid").attr("transform",`translate(0, ${p})`).call(PS(x).tickSize(-p).tickValues(x.domain().filter((b,w)=>w%Math.ceil(s/10)===0)).tickFormat(()=>"")).selectAll("line").attr("class","data-rate-grid-line"),()=>{o.current&&(o.current.remove(),o.current=null),RF(".data-rate-tooltip").remove()}},[a,n,e,s]),h.jsxs("div",{className:"data-rate-histogram-container",children:[h.jsx("h4",{className:"data-rate-histogram-title",children:"Data Rate (points/second)"}),h.jsx("svg",{ref:i,className:"data-rate-histogram-svg",width:n,height:e})]})}function z$(){const[t,e]=S.useState(Bu),[n,s]=S.useState(h0),[r,i]=S.useState(Lb),[o,a]=S.useState(100),[l,c]=S.useState(10),{walletAddress:u,authToken:d,error:f}=vl(),{markets:p,selectedMarketId:m,setSelectedMarketId:x,fetchMarkets:v,loadingMarkets:g,getMarket:b}=Io({baseURL:t,sessionToken:d,autoFetchMarkets:!0}),[w,y]=S.useState("0"),[k,_]=S.useState("1m"),[E,T]=S.useState("0"),[D,C]=S.useState("BTC/USDC");S.useEffect(()=>{if(m){const H=String(m);y(H),T(H);const X=typeof m=="string"?parseInt(m,10):Number(m);if(!isNaN(X)&&isFinite(X)){const xe=b(X);xe&&C(xe.symbol||`${xe.baseAsset}/${xe.quoteAsset}`)}}},[m,b]);const[A,N]=S.useState(null),[$,W]=S.useState("Data Details"),[L,F]=S.useState(!1),{klineData:j,loading:R,error:B,isConnected:I}=DN({baseURL:t,wsURL:n,marketId:w,interval:k,authToken:d,walletAddress:u,deviceID:r,maxDataPoints:o}),{lastPrice:G,markPrice:O,error:P,isConnected:Z}=d0({baseURL:t,wsURL:n,marketId:E,symbol:D,authToken:d,walletAddress:u,deviceID:r}),[Q,Y]=S.useState([]),[q,J]=S.useState([]);S.useEffect(()=>{G&&Y(H=>{const X=[...H,{...G,value:G.price,timestamp:G.timestamp,arrivalTime:Date.now(),raw:G}];return X.length>o?X.slice(-o):X})},[G,o]),S.useEffect(()=>{O&&J(H=>{const X=[...H,{...O,value:O.mark_price,timestamp:O.timestamp,arrivalTime:Date.now(),raw:O}];return X.length>o?X.slice(-o):X})},[O,o]);const{buckets:se,loading:we,error:Ye,refresh:Ne}=h5({baseURL:t,authToken:d,walletAddress:u,refreshInterval:5e3}),{positions:Le,loading:ze,error:wt,isConnected:M,refresh:ce}=d5({baseURL:t,wsURL:n,authToken:d,walletAddress:u,deviceID:r,useWebSocket:!0}),{orders:me,loading:Ie,error:pe,isConnected:_e,refresh:V}=P3({baseURL:t,wsURL:n,authToken:d,walletAddress:u,deviceID:r,useWebSocket:!0}),ne=(H,X)=>{N(H.raw||H),W(X),F(!0)};return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{className:"hooks-test-page-title",children:"Hooks Test Page"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{className:"hooks-test-section-header",children:"Shared Configuration"}),h.jsxs("div",{className:"hooks-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["API Base URL:",h.jsx("input",{type:"text",className:"hooks-test-input",value:t,onChange:H=>e(H.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["WebSocket URL:",h.jsx("input",{type:"text",className:"hooks-test-input",value:n,onChange:H=>s(H.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Wallet Address (from useOnboard):",h.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:u||"",readOnly:!0,placeholder:"Set via useOnboard hook"}),f&&h.jsx("div",{className:"hooks-test-error-message",children:f})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Auth Token (from useOnboard):",h.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:d||"",readOnly:!0,placeholder:"Set via useOnboard hook"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market Selection:",h.jsxs("select",{className:"hooks-test-select",value:m||"",onChange:H=>{const X=H.target.value;X&&x(X)},children:[h.jsx("option",{value:"",children:"Select a market..."}),p.map(H=>h.jsxs("option",{value:String(H.market_id),children:[H.symbol||`${H.baseAsset}/${H.quoteAsset}`," ","(ID: ",H.market_id,")"]},H.market_id))]}),g&&h.jsx("div",{className:"hooks-test-info-message",children:"Loading markets..."}),!g&&p.length===0&&h.jsx("button",{className:"hooks-test-button",onClick:()=>v(),style:{marginTop:"0.5rem"},children:"Fetch Markets"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Device ID:",h.jsx("input",{type:"text",className:"hooks-test-input",value:r,onChange:H=>i(H.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Max Data Points (Memory):",h.jsx("input",{type:"number",className:"hooks-test-input",value:o,onChange:H=>a(Math.max(10,parseInt(H.target.value)||100)),min:"10"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Max Visible Rectangles:",h.jsx("input",{type:"number",className:"hooks-test-input",value:l,onChange:H=>c(Math.max(1,parseInt(H.target.value)||10)),min:"1"})]})})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Kline Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${I?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:I?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[j.length," data points"]})]})]}),h.jsxs("div",{className:"hooks-test-form-grid",children:[h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",h.jsx("input",{type:"text",className:"hooks-test-input",value:w,onChange:H=>y(H.target.value),placeholder:"Select market from dropdown above",style:{backgroundColor:m?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Interval:",h.jsxs("select",{className:"hooks-test-select",value:k,onChange:H=>_(H.target.value),children:[h.jsx("option",{value:"1m",children:"1m"}),h.jsx("option",{value:"5m",children:"5m"}),h.jsx("option",{value:"15m",children:"15m"}),h.jsx("option",{value:"1h",children:"1h"}),h.jsx("option",{value:"4h",children:"4h"}),h.jsx("option",{value:"1d",children:"1d"})]})]})})]}),B&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",B]}),R&&j.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading kline data..."}):j.length===0?h.jsx("div",{className:"hooks-test-empty-state",children:"No kline data available"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:j,maxVisible:l,maxDataPoints:o,getValue:H=>H.close||H.high||100,onItemClick:H=>ne(H,"Kline Data")}),h.jsx($o,{data:j,getTimestamp:H=>{let X=H.timestamp||H.open_time||Date.now();return X<9466848e5&&(X=X*1e3),X}})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Mark Price Hook"}),h.jsx("span",{className:`hooks-test-status-badge ${Z?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:Z?"WS Connected":"WS Disconnected"})]}),h.jsx("div",{className:"hooks-test-form-grid",children:h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Symbol (auto-updated from selected market):",h.jsx("input",{type:"text",className:"hooks-test-input",value:D,onChange:H=>C(H.target.value),placeholder:"BTC/USDC",style:{backgroundColor:m?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),P&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",P]}),q.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No mark price data available"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:q,maxVisible:l,maxDataPoints:o,getValue:H=>H.value||H.mark_price||100,onItemClick:H=>ne(H,"Mark Price Data")}),h.jsx($o,{data:q,getTimestamp:H=>H.arrivalTime||H.timestamp||Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Last Price Hook"}),h.jsx("span",{className:`hooks-test-status-badge ${Z?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:Z?"WS Connected":"WS Disconnected"})]}),h.jsx("div",{className:"hooks-test-form-grid",children:h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",h.jsx("input",{type:"text",className:"hooks-test-input",value:E,onChange:H=>T(H.target.value),placeholder:"Select market from dropdown above",style:{backgroundColor:m?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),P&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",P]}),Q.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No last price data available"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:Q,maxVisible:l,maxDataPoints:o,getValue:H=>H.value||H.price||100,onItemClick:H=>ne(H,"Last Price Data")}),h.jsx($o,{data:Q,getTimestamp:H=>H.arrivalTime||H.timestamp||Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Bucket Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[se.length," buckets"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>Ne(),disabled:we,children:we?"Loading...":"Refresh"})]})]}),Ye&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",Ye]}),we&&se.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading buckets..."}):se.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No buckets found"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:se,maxVisible:l,maxDataPoints:o,getValue:H=>H.totalMargin||H.unrealizedPnL||100,onItemClick:H=>ne(H,"Bucket Data")}),h.jsx($o,{data:se,getTimestamp:H=>H.createdAt?new Date(H.createdAt).getTime():Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Position Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${M?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:M?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[Le.length," positions"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>ce(),disabled:ze,children:ze?"Loading...":"Refresh"})]})]}),wt&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",wt]}),ze&&Le.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading positions..."}):Le.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No positions found"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:Le,maxVisible:l,maxDataPoints:o,getValue:H=>H.size||H.margin||100,onItemClick:H=>ne(H,"Position Data")}),h.jsx($o,{data:Le,getTimestamp:H=>Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Order Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${_e?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:_e?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[me.length," orders"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>V(),disabled:Ie,children:Ie?"Loading...":"Refresh"})]})]}),pe&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",pe]}),Ie&&me.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading orders..."}):me.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No orders found"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:me,maxVisible:l,maxDataPoints:o,getValue:H=>H.quantity||H.price||100,onItemClick:H=>ne(H,"Order Data")}),h.jsx($o,{data:me,getTimestamp:H=>H.createdAt?typeof H.createdAt=="number"?H.createdAt:new Date(H.createdAt).getTime():H.updatedAt?typeof H.updatedAt=="number"?H.updatedAt:new Date(H.updatedAt).getTime():Date.now()})]})]}),h.jsx(ML,{data:A,isOpen:L,onClose:()=>F(!1),title:$})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Yu(t){return t+.5|0}const ai=(t,e,n)=>Math.max(Math.min(t,n),e);function mc(t){return ai(Yu(t*2.55),0,255)}function bi(t){return ai(Yu(t*255),0,255)}function pr(t){return ai(Yu(t/2.55)/100,0,1)}function XS(t){return ai(Yu(t*100),0,100)}const ns={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},nx=[..."0123456789ABCDEF"],U$=t=>nx[t&15],W$=t=>nx[(t&240)>>4]+nx[t&15],Bd=t=>(t&240)>>4===(t&15),H$=t=>Bd(t.r)&&Bd(t.g)&&Bd(t.b)&&Bd(t.a);function V$(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ns[t[1]]*17,g:255&ns[t[2]]*17,b:255&ns[t[3]]*17,a:e===5?ns[t[4]]*17:255}:(e===7||e===9)&&(n={r:ns[t[1]]<<4|ns[t[2]],g:ns[t[3]]<<4|ns[t[4]],b:ns[t[5]]<<4|ns[t[6]],a:e===9?ns[t[7]]<<4|ns[t[8]]:255})),n}const Y$=(t,e)=>t<255?e(t):"";function G$(t){var e=H$(t)?U$:W$;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Y$(t.a,e):void 0}const q$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function lP(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function K$(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function X$(t,e,n){const s=lP(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function Q$(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function gy(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=Q$(n,s,r,u,i),l=l*60+.5),[l|0,c||0,a]}function my(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(bi)}function xy(t,e,n){return my(lP,t,e,n)}function J$(t,e,n){return my(X$,t,e,n)}function Z$(t,e,n){return my(K$,t,e,n)}function cP(t){return(t%360+360)%360}function ez(t){const e=q$.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?mc(+e[5]):bi(+e[5]));const r=cP(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=J$(r,i,o):e[1]==="hsv"?s=Z$(r,i,o):s=xy(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function tz(t,e){var n=gy(t);n[0]=cP(n[0]+e),n=xy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function nz(t){if(!t)return;const e=gy(t),n=e[0],s=XS(e[1]),r=XS(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${pr(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const QS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},JS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sz(){const t={},e=Object.keys(JS),n=Object.keys(QS);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,QS[i]);i=parseInt(JS[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let $d;function rz(t){$d||($d=sz(),$d.transparent=[0,0,0,0]);const e=$d[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const iz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function oz(t){const e=iz.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?mc(o):ai(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?mc(s):ai(s,0,255)),r=255&(e[4]?mc(r):ai(r,0,255)),i=255&(e[6]?mc(i):ai(i,0,255)),{r:s,g:r,b:i,a:n}}}function az(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${pr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const bg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,zo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function lz(t,e,n){const s=zo(pr(t.r)),r=zo(pr(t.g)),i=zo(pr(t.b));return{r:bi(bg(s+n*(zo(pr(e.r))-s))),g:bi(bg(r+n*(zo(pr(e.g))-r))),b:bi(bg(i+n*(zo(pr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function zd(t,e,n){if(t){let s=gy(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=xy(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function uP(t,e){return t&&Object.assign(e||{},t)}function ZS(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=bi(t[3]))):(e=uP(t,{r:0,g:0,b:0,a:1}),e.a=bi(e.a)),e}function cz(t){return t.charAt(0)==="r"?oz(t):ez(t)}class bu{constructor(e){if(e instanceof bu)return e;const n=typeof e;let s;n==="object"?s=ZS(e):n==="string"&&(s=V$(e)||rz(e)||cz(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=uP(this._rgb);return e&&(e.a=pr(e.a)),e}set rgb(e){this._rgb=ZS(e)}rgbString(){return this._valid?az(this._rgb):void 0}hexString(){return this._valid?G$(this._rgb):void 0}hslString(){return this._valid?nz(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=lz(this._rgb,e._rgb,n)),this}clone(){return new bu(this.rgb)}alpha(e){return this._rgb.a=bi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Yu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return zd(this._rgb,2,e),this}darken(e){return zd(this._rgb,2,-e),this}saturate(e){return zd(this._rgb,1,e),this}desaturate(e){return zd(this._rgb,1,-e),this}rotate(e){return tz(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function lr(){}const uz=(()=>{let t=0;return()=>t++})();function yt(t){return t==null}function Et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Je(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Bn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function zs(t,e){return Bn(t)?t:e}function Xe(t,e){return typeof t>"u"?e:t}const dz=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,dP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ft(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function dt(t,e,n,s){let r,i,o;if(Et(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(Je(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function Cf(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Ef(t){if(Et(t))return t.map(Ef);if(Je(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=Ef(t[n[r]]);return e}return t}function hP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function hz(t,e,n,s){if(!hP(t))return;const r=e[t],i=n[t];Je(r)&&Je(i)?yu(r,i,s):e[t]=Ef(i)}function yu(t,e,n){const s=Et(e)?e:[e],r=s.length;if(!Je(t))return t;n=n||{};const i=n.merger||hz;let o;for(let a=0;a<r;++a){if(o=s[a],!Je(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function $c(t,e){return yu(t,e,{merger:fz})}function fz(t,e,n){if(!hP(t))return;const s=e[t],r=n[t];Je(s)&&Je(r)?$c(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ef(r))}const ek={"":t=>t,x:t=>t.x,y:t=>t.y};function pz(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function gz(t){const e=pz(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function wu(t,e){return(ek[e]||(ek[e]=gz(e)))(t)}function by(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Xn=t=>typeof t<"u",jn=t=>typeof t=="function",tk=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function mz(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const lt=Math.PI,nn=2*lt,xz=nn+lt,Pf=Number.POSITIVE_INFINITY,yy=lt/180,sn=lt/2,ls=lt/4,Tf=lt*2/3,fP=Math.log10,ll=Math.sign;function zc(t,e,n){return Math.abs(t-e)<n}function nk(t){const e=Math.round(t);t=zc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(fP(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function bz(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function yz(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function So(t){return!yz(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function wz(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function vz(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Xt(t){return t*(lt/180)}function pP(t){return t*(180/lt)}function sk(t){if(!Bn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function sx(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*lt&&(i+=nn),{angle:i,distance:r}}function cl(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Sz(t,e){return(t-e+xz)%nn-lt}function Gr(t){return(t%nn+nn)%nn}function Mf(t,e,n,s){const r=Gr(t),i=Gr(e),o=Gr(n),a=Gr(i-r),l=Gr(o-r),c=Gr(r-i),u=Gr(r-o);return r===i||r===o||s&&i===o||a>l&&c<u}function hs(t,e,n){return Math.max(e,Math.min(n,t))}function kz(t){return hs(t,-32768,32767)}function xc(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function wy(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Qi=(t,e,n,s)=>wy(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),_z=(t,e,n)=>wy(t,n,s=>t[s][e]>=n);function Cz(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const gP=["push","pop","shift","splice","unshift"];function Ez(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),gP.forEach(n=>{const s="_onData"+by(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function rk(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(gP.forEach(i=>{delete t[i]}),delete t._chartjs)}function Pz(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const mP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function xP(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,mP.call(window,()=>{s=!1,t.apply(e,n)}))}}function Tz(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const vy=t=>t==="start"?"left":t==="end"?"right":"center",hn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Mz=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function Iz(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(r=Math.min(Qi(l,u,d).lo,n?s:Qi(e,u,o.getPixelForValue(d)).lo),c){const x=l.slice(0,r+1).reverse().findIndex(v=>!yt(v[a.axis]));r-=Math.max(0,x)}r=hs(r,0,s-1)}if(m){let x=Math.max(Qi(l,o.axis,f,!0).hi+1,n?0:Qi(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const v=l.slice(x-1).findIndex(g=>!yt(g[a.axis]));x+=Math.max(0,v)}i=hs(x,r,s)-r}else i=s-r}return{start:r,count:i}}function Dz(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const Ud=t=>t===0||t===1,ik=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*nn/n)),ok=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*nn/n)+1,Uc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*sn)+1,easeOutSine:t=>Math.sin(t*sn),easeInOutSine:t=>-.5*(Math.cos(lt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ud(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ud(t)?t:ik(t,.075,.3),easeOutElastic:t=>Ud(t)?t:ok(t,.075,.3),easeInOutElastic(t){return Ud(t)?t:t<.5?.5*ik(t*2,.1125,.45):.5+.5*ok(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Uc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Uc.easeInBounce(t*2)*.5:Uc.easeOutBounce(t*2-1)*.5+.5};function Sy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ak(t){return Sy(t)?t:new bu(t)}function yg(t){return Sy(t)?t:new bu(t).saturate(.5).darken(.1).hexString()}const Nz=["x","y","borderWidth","radius","tension"],Az=["color","borderColor","backgroundColor"];function Rz(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Az},numbers:{type:"number",properties:Nz}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Oz(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const lk=new Map;function Lz(t,e){e=e||{};const n=t+JSON.stringify(e);let s=lk.get(n);return s||(s=new Intl.NumberFormat(t,e),lk.set(n,s)),s}function ky(t,e,n){return Lz(e,n).format(t)}const jz={values(t){return Et(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=Fz(t,n)}const o=fP(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ky(t,s,l)}};function Fz(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var bP={formatters:jz};function Bz(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:bP.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ko=Object.create(null),rx=Object.create(null);function Wc(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function wg(t,e,n){return typeof e=="string"?yu(Wc(t,e),n):yu(Wc(t,""),e)}class $z{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>yg(r.backgroundColor),this.hoverBorderColor=(s,r)=>yg(r.borderColor),this.hoverColor=(s,r)=>yg(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return wg(this,e,n)}get(e){return Wc(this,e)}describe(e,n){return wg(rx,e,n)}override(e,n){return wg(ko,e,n)}route(e,n,s,r){const i=Wc(this,e),o=Wc(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Je(l)?Object.assign({},c,l):Xe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Nt=new $z({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Rz,Oz,Bz]);function zz(t){return!t||yt(t.size)||yt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ck(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Ri(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function uk(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function ix(t,e,n,s){yP(t,e,n,s,null)}function yP(t,e,n,s,r){let i,o,a,l,c,u,d,f;const p=e.pointStyle,m=e.rotation,x=e.radius;let v=(m||0)*yy;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(v),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:r?t.ellipse(n,s,r/2,x,0,0,nn):t.arc(n,s,x,0,nn),t.closePath();break;case"triangle":u=r?r/2:x,t.moveTo(n+Math.sin(v)*u,s-Math.cos(v)*x),v+=Tf,t.lineTo(n+Math.sin(v)*u,s-Math.cos(v)*x),v+=Tf,t.lineTo(n+Math.sin(v)*u,s-Math.cos(v)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(v+ls)*l,d=Math.cos(v+ls)*(r?r/2-c:l),a=Math.sin(v+ls)*l,f=Math.sin(v+ls)*(r?r/2-c:l),t.arc(n-d,s-a,c,v-lt,v-sn),t.arc(n+f,s-o,c,v-sn,v),t.arc(n+d,s+a,c,v,v+sn),t.arc(n-f,s+o,c,v+sn,v+lt),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*x,u=r?r/2:l,t.rect(n-u,s-l,2*u,2*l);break}v+=ls;case"rectRot":d=Math.cos(v)*(r?r/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,f=Math.sin(v)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+f,s-o),t.lineTo(n+d,s+a),t.lineTo(n-f,s+o),t.closePath();break;case"crossRot":v+=ls;case"cross":d=Math.cos(v)*(r?r/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,f=Math.sin(v)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"star":d=Math.cos(v)*(r?r/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,f=Math.sin(v)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o),v+=ls,d=Math.cos(v)*(r?r/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,f=Math.sin(v)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(v)*x,a=Math.sin(v)*x,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(v)*(r?r/2:x),s+Math.sin(v)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function vu(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function A0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function R0(t){t.restore()}function Uz(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Wz(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Hz(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),yt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Vz(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Yz(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Su(t,e,n,s,r,i={}){const o=Et(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,Hz(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&Yz(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),yt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,s,i.maxWidth)),t.fillText(c,n,s,i.maxWidth),Vz(t,n,s,c,i),s+=Number(r.lineHeight);t.restore()}function If(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*lt,lt,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,lt,sn,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,sn,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-sn,!0),t.lineTo(n+o.topLeft,s)}const Gz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Kz(t,e){const n=(""+t).match(Gz);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Xz=t=>+t||0;function wP(t,e){const n={},s=Je(e),r=s?Object.keys(e):e,i=Je(t)?s?o=>Xe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Xz(i(o));return n}function Qz(t){return wP(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ba(t){return wP(t,["topLeft","topRight","bottomLeft","bottomRight"])}function mn(t){const e=Qz(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Vt(t,e){t=t||{},e=e||Nt.font;let n=Xe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Xe(t.style,e.style);s&&!(""+s).match(qz)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Xe(t.family,e.family),lineHeight:Kz(Xe(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Xe(t.weight,e.weight),string:""};return r.string=zz(r),r}function Wd(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Jz(t,e,n){const{min:s,max:r}=t,i=dP(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function No(t,e){return Object.assign(Object.create(t),e)}function _y(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=_P("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>_y([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return SP(a,l,()=>oU(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return hk(a).includes(l)},ownKeys(a){return hk(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function ul(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:vP(t,s),setContext:i=>ul(t,i,n,s),override:i=>ul(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return SP(i,o,()=>eU(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function vP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:jn(n)?n:()=>n,isIndexable:jn(s)?s:()=>s}}const Zz=(t,e)=>t?t+by(e):e,Cy=(t,e)=>Je(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function SP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function eU(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return jn(a)&&o.isScriptable(e)&&(a=tU(e,a,t,n)),Et(a)&&a.length&&(a=nU(e,a,t,o.isIndexable)),Cy(e,a)&&(a=ul(a,r,i&&i[e],o)),a}function tU(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),Cy(t,l)&&(l=Ey(r._scopes,r,t,l)),l}function nU(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Je(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=Ey(c,r,t,u);e.push(ul(d,i,o&&o[t],a))}}return e}function kP(t,e,n){return jn(t)?t(e,n):t}const sU=(t,e)=>t===!0?e:typeof t=="string"?wu(e,t):void 0;function rU(t,e,n,s,r){for(const i of e){const o=sU(n,i);if(o){t.add(o);const a=kP(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function Ey(t,e,n,s){const r=e._rootScopes,i=kP(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=dk(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=dk(a,o,i,l,s),l===null)?!1:_y(Array.from(a),[""],r,i,()=>iU(e,n,s))}function dk(t,e,n,s,r){for(;n;)n=rU(t,e,n,s,r);return n}function iU(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return Et(r)&&Je(n)?n:r||{}}function oU(t,e,n,s){let r;for(const i of e)if(r=_P(Zz(i,t),n),typeof r<"u")return Cy(t,r)?Ey(n,s,t,r):r}function _P(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function hk(t){let e=t._keys;return e||(e=t._keys=aU(t._scopes)),e}function aU(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const lU=Number.EPSILON||1e-14,dl=(t,e)=>e<t.length&&!t[e].skip&&t[e],CP=t=>t==="x"?"y":"x";function cU(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=cl(i,r),l=cl(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,f=s*u;return{previous:{x:i.x-d*(o.x-r.x),y:i.y-d*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function uU(t,e,n){const s=t.length;let r,i,o,a,l,c=dl(t,0);for(let u=0;u<s-1;++u)if(l=c,c=dl(t,u+1),!(!l||!c)){if(zc(e[u],0,lU)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=i*o*e[u])}}function dU(t,e,n="x"){const s=CP(n),r=t.length;let i,o,a,l=dl(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=dl(t,c+1),!a)continue;const u=a[n],d=a[s];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${s}`]=d-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${s}`]=d+i*e[c])}}function hU(t,e="x"){const n=CP(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=dl(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=dl(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?ll(r[o-1])!==ll(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}uU(t,r,i),dU(t,i,e)}function Hd(t,e,n){return Math.max(Math.min(t,n),e)}function fU(t,e){let n,s,r,i,o,a=vu(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&vu(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=Hd(r.cp1x,e.left,e.right),r.cp1y=Hd(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Hd(r.cp2x,e.left,e.right),r.cp2y=Hd(r.cp2y,e.top,e.bottom)))}function pU(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")hU(t,r);else{let c=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=cU(c,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&fU(t,n)}function Py(){return typeof window<"u"&&typeof document<"u"}function Ty(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Df(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const O0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function gU(t,e){return O0(t).getPropertyValue(e)}const mU=["top","right","bottom","left"];function lo(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=mU[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const xU=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function bU(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(xU(r,i,t.target))a=r,l=i;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function $i(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=O0(n),i=r.boxSizing==="border-box",o=lo(r,"padding"),a=lo(r,"border","width"),{x:l,y:c,box:u}=bU(t,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:m}=e;return i&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/p*n.width/s),y:Math.round((c-f)/m*n.height/s)}}function yU(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&Ty(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=O0(i),l=lo(a,"border","width"),c=lo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Df(a.maxWidth,i,"clientWidth"),r=Df(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||Pf,maxHeight:r||Pf}}const li=t=>Math.round(t*10)/10;function wU(t,e,n,s){const r=O0(t),i=lo(r,"margin"),o=Df(r.maxWidth,t,"clientWidth")||Pf,a=Df(r.maxHeight,t,"clientHeight")||Pf,l=yU(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=lo(r,"border","width"),p=lo(r,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=li(Math.min(c,o,l.maxWidth)),u=li(Math.min(u,a,l.maxHeight)),c&&!u&&(u=li(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=li(Math.floor(u*s))),{width:c,height:u}}function fk(t,e,n){const s=e||1,r=li(t.height*s),i=li(t.width*s);t.height=li(t.height),t.width=li(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const vU=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Py()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function pk(t,e){const n=gU(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function zi(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function SU(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function kU(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=zi(t,r,n),a=zi(r,i,n),l=zi(i,e,n),c=zi(o,a,n),u=zi(a,l,n);return zi(c,u,n)}const _U=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},CU=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ya(t,e,n){return t?_U(e,n):CU()}function EP(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function PP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function TP(t){return t==="angle"?{between:Mf,compare:Sz,normalize:Gr}:{between:xc,compare:(e,n)=>e-n,normalize:e=>e}}function gk({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function EU(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=TP(s),l=e.length;let{start:c,end:u,loop:d}=t,f,p;if(d){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(e[c%l][s]),r,i);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function PU(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=TP(s),{start:u,end:d,loop:f,style:p}=EU(t,e,n),m=[];let x=!1,v=null,g,b,w;const y=()=>l(r,w,g)&&a(r,w)!==0,k=()=>a(i,g)===0||l(i,w,g),_=()=>x||y(),E=()=>!x||k();for(let T=u,D=u;T<=d;++T)b=e[T%o],!b.skip&&(g=c(b[s]),g!==w&&(x=l(g,r,i),v===null&&_()&&(v=a(g,r)===0?T:D),v!==null&&E()&&(m.push(gk({start:v,end:T,loop:f,count:o,style:p})),v=null),D=T,w=g));return v!==null&&m.push(gk({start:v,end:d,loop:f,count:o,style:p})),m}function TU(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=PU(s[r],t.points,e);i.length&&n.push(...i)}return n}function MU(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function IU(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function DU(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=MU(n,r,i,s);if(s===!0)return mk(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return mk(t,IU(n,o,l,c),n,e)}function mk(t,e,n,s){return!s||!s.setContext||!n?e:NU(t,e,n,s)}function NU(t,e,n,s){const r=t._chart.getContext(),i=xk(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,d=e[0].start,f=d;function p(m,x,v,g){const b=a?-1:1;if(m!==x){for(m+=l;n[m%l].skip;)m-=b;for(;n[x%l].skip;)x+=b;m%l!==x%l&&(c.push({start:m%l,end:x%l,loop:v,style:g}),u=g,d=x%l)}}for(const m of e){d=a?d:m.start;let x=n[d%l],v;for(f=d+1;f<=m.end;f++){const g=n[f%l];v=xk(s.setContext(No(r,{type:"segment",p0:x,p1:g,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),AU(v,u)&&p(d,f-1,m.loop,u),x=g,u=v}d<f-1&&p(d,f-1,m.loop,u)}return c}function xk(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function AU(t,e){if(!e)return!1;const n=[],s=function(r,i){return Sy(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function Vd(t,e,n){return t.options.clip?t[n]:e[n]}function RU(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Vd(n,e,"left"),right:Vd(n,e,"right"),top:Vd(s,e,"top"),bottom:Vd(s,e,"bottom")}:e}function OU(t,e){const n=e._clip;if(n.disabled)return!1;const s=RU(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class LU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=mP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var cr=new LU;const bk="transparent",jU={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=ak(t||bk),r=s.valid&&ak(e||bk);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class FU{constructor(e,n,s,r){const i=n[s];r=Wd([e.to,r,i,e.from]);const o=Wd([e.from,i,r]);this._active=!0,this._fn=e.fn||jU[e.type||typeof o],this._easing=Uc[e.easing]||Uc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Wd([e.to,n,r,e.from]),this._from=Wd([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class My{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Je(e))return;const n=Object.keys(Nt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!Je(i))return;const o={};for(const a of n)o[a]=i[a];(Et(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=$U(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&BU(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let d=i[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}i[c]=d=new FU(f,e,c,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return cr.add(this._chart,s),!0}}function BU(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function $U(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function yk(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function zU(t,e,n){if(n===!1)return!1;const s=yk(t,n),r=yk(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function UU(t){let e,n,s,r;return Je(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function MP(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function wk(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],Bn(c)&&(i||e===0||ll(e)===ll(c))&&(e+=c)}return!u&&!s.all?0:e}function WU(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[i]:t[u]};return a}function vg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function HU(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function VU(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function YU(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function vk(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function Sk(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,u=HU(i,o,s),d=e.length;let f;for(let p=0;p<d;++p){const m=e[p],{[l]:x,[c]:v}=m,g=m._stacks||(m._stacks={});f=g[c]=YU(r,u,x),f[a]=v,f._top=vk(f,o,!0,s.type),f._bottom=vk(f,o,!1,s.type);const b=f._visualValues||(f._visualValues={});b[a]=v}}function Sg(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function GU(t,e){return No(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function qU(t,e,n){return No(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ql(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const kg=t=>t==="reset"||t==="none",kk=(t,e)=>e?t:Object.assign({},t),KU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:MP(n,!0),values:null};class wa{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=vg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ql(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(d,f,p,m)=>d==="x"?f:d==="r"?m:p,i=n.xAxisID=Xe(s.xAxisID,Sg(e,"x")),o=n.yAxisID=Xe(s.yAxisID,Sg(e,"y")),a=n.rAxisID=Xe(s.rAxisID,Sg(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),u=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&rk(this._data,this),e._stacked&&Ql(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Je(n)){const r=this._cachedMeta;this._data=WU(n,r)}else if(s!==n){if(s){rk(s,this);const r=this._cachedMeta;Ql(r),r._parsed=[]}n&&Object.isExtensible(n)&&Ez(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=vg(n.vScale,n),n.stack!==s.stack&&(r=!0,Ql(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(Sk(this,n._parsed),n._stacked=vg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,d,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{Et(r[e])?f=this.parseArrayData(s,r,e,n):Je(r[e])?f=this.parseObjectData(s,r,e,n):f=this.parsePrimitiveData(s,r,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=d=f[u],l&&(p()&&(l=!1),c=d);s._sorted=l}o&&Sk(this,f)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,d=new Array(r);let f,p,m;for(f=0,p=r;f<p;++f)m=f+s,d[f]={[a]:u||i.parse(c[m],m),[l]:o.parse(n[m],m)};return d}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,c,u,d;for(l=0,c=r;l<c;++l)u=l+s,d=n[u],a[l]={x:i.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,d,f,p;for(u=0,d=r;u<d;++u)f=u+s,p=n[f],c[u]={x:i.parse(wu(p,a),f),y:o.parse(wu(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:MP(r,!0),values:n._stacks[e.axis]._visualValues};return wk(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=wk(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=KU(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=VU(a);let f,p;function m(){p=r[f];const x=p[a.axis];return!Bn(p[e.axis])||u>x||d<x}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],Bn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=UU(Xe(this.options.clip,zU(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const d=r[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=qU(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=GU(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Xn(s);if(a)return kk(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(Nt.elements[e]),m=()=>this.getContext(s,r,n),x=c.resolveNamedOptions(f,p,m,d);return x.$shared&&(x.$shared=l,i[o]=Object.freeze(kk(x,l))),x}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,s,n))}const c=new My(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||kg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){kg(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!kg(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&Ql(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ie(wa,"defaults",{}),ie(wa,"datasetElementType",null),ie(wa,"dataElementType",null);function XU(t,e,n){let s=1,r=1,i=0,o=0;if(e<nn){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),p=(w,y,k)=>Mf(w,a,l,!0)?1:Math.max(y,y*n,k,k*n),m=(w,y,k)=>Mf(w,a,l,!0)?-1:Math.min(y,y*n,k,k*n),x=p(0,c,d),v=p(sn,u,f),g=m(lt,c,d),b=m(lt+sn,u,f);s=(x-g)/2,r=(v-b)/2,i=-(x+g)/2,o=-(v+b)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class bc extends wa{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(Je(s[e])){const{key:l="value"}=this._parsing;i=c=>+wu(s[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Xt(this.options.rotation-90)}_getCircumference(){return Xt(this.options.circumference)}_getRotationExtents(){let e=nn,n=-nn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(dz(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:x}=XU(d,u,l),v=(s.width-o)/f,g=(s.height-o)/p,b=Math.max(Math.min(v,g)/2,0),w=dP(this.options.radius,b),y=Math.max(w*l,0),k=(w-y)/this._getVisibleDatasetWeightTotal();this.offsetX=m*w,this.offsetY=x*w,r.total=this.calculateTotal(),this.outerRadius=w-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/nn)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=i&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:x,includeOptions:v}=this._getSharedOptions(n,r);let g=this._getRotation(),b;for(b=0;b<n;++b)g+=this._circumference(b,i);for(b=n;b<n+s;++b){const w=this._circumference(b,i),y=e[b],k={x:u+this.offsetX,y:d+this.offsetY,startAngle:g,endAngle:g+w,circumference:w,outerRadius:m,innerRadius:p};v&&(k.options=x||this.resolveDataElementOptions(b,y.active?"active":r)),g+=w,this.updateElement(y,b,k,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?nn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=ky(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Xe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ie(bc,"id","doughnut"),ie(bc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ie(bc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ie(bc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class kh extends wa{getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:i}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=i.getLabelForValue(o.y);return{label:s[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,r=this.chart._animationsDisabled;let{start:i,count:o}=Iz(n,s,r);if(this._drawStart=i,this._drawCount=o,Dz(n)&&(i=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,r),d=this.getSharedOptions(u),f=this.includeOptions(r,d),p=o.axis,m=a.axis,{spanGaps:x,segment:v}=this.options,g=So(x)?x:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||r==="none";let w=n>0&&this.getParsed(n-1);for(let y=n;y<n+s;++y){const k=e[y],_=this.getParsed(y),E=b?k:{},T=yt(_[m]),D=E[p]=o.getPixelForValue(_[p],y),C=E[m]=i||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],y);E.skip=isNaN(D)||isNaN(C)||T,E.stop=y>0&&Math.abs(_[p]-w[p])>g,v&&(E.parsed=_,E.raw=c.data[y]),f&&(E.options=d||this.resolveDataElementOptions(y,k.active?"active":r)),b||this.updateElement(k,y,E,r),w=_}this.updateSharedOptions(d,r,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=e.dataset,r=s.options&&s.options.borderWidth||0;if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,o)/2}}ie(kh,"id","scatter"),ie(kh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ie(kh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Oi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Iy{constructor(e){ie(this,"options");this.options=e||{}}static override(e){Object.assign(Iy.prototype,e)}init(){}formats(){return Oi()}parse(){return Oi()}format(){return Oi()}add(){return Oi()}diff(){return Oi()}startOf(){return Oi()}endOf(){return Oi()}}var QU={_date:Iy};function JU(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?_z:Qi;if(s){if(r._sharedOptions){const u=i[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=c(i,e,n-d),p=c(i,e,n+d);return{lo:f.lo,hi:p.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(x=>!yt(x[d.axis]));u.lo-=Math.max(0,p);const m=f.slice(u.hi).findIndex(x=>!yt(x[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:i.length-1}}function L0(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:d,hi:f}=JU(i[a],e,o,r);for(let p=d;p<=f;++p){const m=u[p];m.skip||s(m,c,p)}}}function ZU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function _g(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||L0(t,n,e,function(a,l,c){!r&&!vu(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function eW(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:d}=sx(o,{x:e.x,y:e.y});Mf(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return L0(t,n,e,i),r}function tW(t,e,n,s,r,i){let o=[];const a=ZU(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const p=u.inRange(e.x,e.y,r);if(s&&!p)return;const m=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(m))&&!p)return;const v=a(e,m);v<l?(o=[{element:u,datasetIndex:d,index:f}],l=v):v===l&&o.push({element:u,datasetIndex:d,index:f})}return L0(t,n,e,c),o}function Cg(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?eW(t,e,n,r):tW(t,e,n,s,r,i)}function _k(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return L0(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var nW={modes:{index(t,e,n,s){const r=$i(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?_g(t,r,i,s,o):Cg(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const r=$i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?_g(t,r,i,s,o):Cg(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const r=$i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return _g(t,r,i,s,o)},nearest(t,e,n,s){const r=$i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Cg(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=$i(e,t);return _k(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=$i(e,t);return _k(t,r,"y",n.intersect,s)}}};const IP=["left","top","right","bottom"];function Jl(t,e){return t.filter(n=>n.pos===e)}function Ck(t,e){return t.filter(n=>IP.indexOf(n.pos)===-1&&n.box.axis===e)}function Zl(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function sW(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function rW(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!IP.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function iW(t,e){const n=rW(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=u?u*r:l&&e.availableHeight)}return n}function oW(t){const e=sW(t),n=Zl(e.filter(c=>c.box.fullSize),!0),s=Zl(Jl(e,"left"),!0),r=Zl(Jl(e,"right")),i=Zl(Jl(e,"top"),!0),o=Zl(Jl(e,"bottom")),a=Ck(e,"x"),l=Ck(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Jl(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function Ek(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function DP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function aW(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!Je(r)){n.size&&(t[r]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[r]+=n.size}i.getPadding&&DP(o,i.getPadding());const a=Math.max(0,e.outerWidth-Ek(o,t,"left","right")),l=Math.max(0,e.outerHeight-Ek(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function lW(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function cW(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function yc(t,e,n,s){const r=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,cW(a.horizontal,e));const{same:d,other:f}=aW(e,n,a,s);c|=d&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&yc(r,e,n,s)||u}function Yd(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function Pk(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;Xn(c.start)&&(o=c.start),l.fullSize?Yd(l,r.left,o,n.outerWidth-r.right-r.left,f):Yd(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;Xn(c.start)&&(i=c.start),l.fullSize?Yd(l,i,r.top,f,n.outerHeight-r.bottom-r.top):Yd(l,i,e.top+c.placed,f,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var fs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=mn(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=oW(t.boxes),l=a.vertical,c=a.horizontal;dt(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=l.reduce((x,v)=>v.box.options&&v.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);DP(f,mn(s));const p=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),m=iW(l.concat(c),d);yc(a.fullSize,p,d,m),yc(l,p,d,m),yc(c,p,d,m)&&yc(l,p,d,m),lW(p),Pk(a.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,Pk(a.rightAndBottom,p,d,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},dt(a.chartArea,x=>{const v=x.box;Object.assign(v,t.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class NP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class uW extends NP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _h="$chartjs",dW={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Tk=t=>t===null||t==="";function hW(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[_h]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Tk(r)){const i=pk(t,"width");i!==void 0&&(t.width=i)}if(Tk(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=pk(t,"height");i!==void 0&&(t.height=i)}return t}const AP=vU?{passive:!0}:!1;function fW(t,e,n){t&&t.addEventListener(e,n,AP)}function pW(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,AP)}function gW(t,e){const n=dW[t.type]||t.type,{x:s,y:r}=$i(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Nf(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function mW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Nf(a.addedNodes,s),o=o&&!Nf(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function xW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Nf(a.removedNodes,s),o=o&&!Nf(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const ku=new Map;let Mk=0;function RP(){const t=window.devicePixelRatio;t!==Mk&&(Mk=t,ku.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function bW(t,e){ku.size||window.addEventListener("resize",RP),ku.set(t,e)}function yW(t){ku.delete(t),ku.size||window.removeEventListener("resize",RP)}function wW(t,e,n){const s=t.canvas,r=s&&Ty(s);if(!r)return;const i=xP((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(r),bW(t,i),o}function Eg(t,e,n){n&&n.disconnect(),e==="resize"&&yW(t)}function vW(t,e,n){const s=t.canvas,r=xP(i=>{t.ctx!==null&&n(gW(i,t))},t);return fW(s,e,r),r}class SW extends NP{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(hW(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[_h])return!1;const s=n[_h].initial;["height","width"].forEach(i=>{const o=s[i];yt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[_h],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:mW,detach:xW,resize:wW}[n]||vW;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:Eg,detach:Eg,resize:Eg}[n]||pW)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return wU(e,n,s,r)}isAttached(e){const n=e&&Ty(e);return!!(n&&n.isConnected)}}function kW(t){return!Py()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?uW:SW}class xn{constructor(){ie(this,"x");ie(this,"y");ie(this,"active",!1);ie(this,"options");ie(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return So(this.x)&&So(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}}ie(xn,"defaults",{}),ie(xn,"defaultRoutes");function _W(t,e){const n=t.options.ticks,s=CW(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?PW(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return TW(e,c,i,o/r),c;const u=EW(i,e,r);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(Gd(e,c,u,yt(p)?0:a-p,a),d=0,f=o-1;d<f;d++)Gd(e,c,u,i[d],i[d+1]);return Gd(e,c,u,l,yt(p)?e.length:l+p),c}return Gd(e,c,u),c}function CW(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function EW(t,e,n){const s=MW(t),r=e.length/n;if(!s)return Math.max(r,1);const i=bz(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function PW(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function TW(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function Gd(t,e,n,s,r){const i=Xe(s,0),o=Math.min(Xe(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function MW(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const IW=t=>t==="left"?"right":t==="right"?"left":t,Ik=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Dk=(t,e)=>Math.min(e||t,t);function Nk(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function DW(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<i-a||l>o+a)))return l}function NW(t,e){dt(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function ec(t){return t.drawTicks?t.tickLength:0}function Ak(t,e){if(!t.display)return 0;const n=Vt(t.font,e),s=mn(t.padding);return(Et(t.text)?t.text.length:1)*n.lineHeight+s.height}function AW(t,e){return No(t,{scale:e,type:"scale"})}function RW(t,e,n){return No(t,{tick:n,index:e,type:"tick"})}function OW(t,e,n){let s=vy(t);return(n&&e!=="right"||!n&&e==="right")&&(s=IW(s)),s}function LW(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,p,m;const x=o-r,v=a-i;if(t.isHorizontal()){if(p=hn(s,i,a),Je(n)){const g=Object.keys(n)[0],b=n[g];m=u[g].getPixelForValue(b)+x-e}else n==="center"?m=(c.bottom+c.top)/2+x-e:m=Ik(t,n,e);f=a-i}else{if(Je(n)){const g=Object.keys(n)[0],b=n[g];p=u[g].getPixelForValue(b)-v+e}else n==="center"?p=(c.left+c.right)/2-v+e:p=Ik(t,n,e);m=hn(s,o,r),d=n==="left"?-sn:sn}return{titleX:p,titleY:m,maxWidth:f,rotation:d}}class El extends xn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=zs(e,Number.POSITIVE_INFINITY),n=zs(n,Number.NEGATIVE_INFINITY),s=zs(s,Number.POSITIVE_INFINITY),r=zs(r,Number.NEGATIVE_INFINITY),{min:zs(e,s),max:zs(n,r),minDefined:Bn(e),maxDefined:Bn(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:zs(n,zs(s,n)),max:zs(s,zs(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ft(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Jz(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Nk(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_W(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ft(this.options.afterUpdate,[this])}beforeSetDimensions(){ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ft(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ft(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=ft(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=Dk(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=hs(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/s:p/(s-1),d+6>a&&(a=p/(s-(e.offset?.5:1)),l=this.maxHeight-ec(e.grid)-n.padding-Ak(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=pP(Math.min(Math.asin(hs((u.highest.height+6)/a,-1,1)),Math.asin(hs(l/c,-1,1))-Math.asin(hs(f/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ft(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ak(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ec(i)+l):(e.height=this.maxHeight,e.width=ec(i)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),p=s.padding*2,m=Xt(this.labelRotation),x=Math.cos(m),v=Math.sin(m);if(a){const g=s.mirror?0:v*d.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+g+p)}else{const g=s.mirror?0:x*d.width+v*f.height;e.width=Math.min(this.maxWidth,e.width+g+p)}this._calculatePadding(c,u,v,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=r*e.width,p=s*n.height):(f=s*e.height,p=r*n.width):i==="start"?p=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;i==="start"?(u=0,d=e.height):i==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ft(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)yt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Nk(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Dk(n,s));let c=0,u=0,d,f,p,m,x,v,g,b,w,y,k;for(d=0;d<n;d+=l){if(m=e[d].label,x=this._resolveTickFontOptions(d),r.font=v=x.string,g=i[v]=i[v]||{data:{},gc:[]},b=x.lineHeight,w=y=0,!yt(m)&&!Et(m))w=ck(r,g.data,g.gc,w,m),y=b;else if(Et(m))for(f=0,p=m.length;f<p;++f)k=m[f],!yt(k)&&!Et(k)&&(w=ck(r,g.data,g.gc,w,k),y+=b);o.push(w),a.push(y),c=Math.max(w,c),u=Math.max(y,u)}NW(i,n);const _=o.indexOf(c),E=a.indexOf(u),T=D=>({width:o[D]||0,height:a[D]||0});return{first:T(0),last:T(n-1),widest:T(_),highest:T(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return kz(this._alignToPixels?Ri(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=RW(this.getContext(),e,s))}return this.$context||(this.$context=AW(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Xt(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=ec(i),p=[],m=a.setContext(this.getContext()),x=m.display?m.width:0,v=x/2,g=function(F){return Ri(s,F,x)};let b,w,y,k,_,E,T,D,C,A,N,$;if(o==="top")b=g(this.bottom),E=this.bottom-f,D=b-v,A=g(e.top)+v,$=e.bottom;else if(o==="bottom")b=g(this.top),A=e.top,$=g(e.bottom)-v,E=b+v,D=this.top+f;else if(o==="left")b=g(this.right),_=this.right-f,T=b-v,C=g(e.left)+v,N=e.right;else if(o==="right")b=g(this.left),C=e.left,N=g(e.right)-v,_=b+v,T=this.left+f;else if(n==="x"){if(o==="center")b=g((e.top+e.bottom)/2+.5);else if(Je(o)){const F=Object.keys(o)[0],j=o[F];b=g(this.chart.scales[F].getPixelForValue(j))}A=e.top,$=e.bottom,E=b+v,D=E+f}else if(n==="y"){if(o==="center")b=g((e.left+e.right)/2);else if(Je(o)){const F=Object.keys(o)[0],j=o[F];b=g(this.chart.scales[F].getPixelForValue(j))}_=b-v,T=_-f,C=e.left,N=e.right}const W=Xe(r.ticks.maxTicksLimit,d),L=Math.max(1,Math.ceil(d/W));for(w=0;w<d;w+=L){const F=this.getContext(w),j=i.setContext(F),R=a.setContext(F),B=j.lineWidth,I=j.color,G=R.dash||[],O=R.dashOffset,P=j.tickWidth,Z=j.tickColor,Q=j.tickBorderDash||[],Y=j.tickBorderDashOffset;y=DW(this,w,l),y!==void 0&&(k=Ri(s,y,B),c?_=T=C=N=k:E=D=A=$=k,p.push({tx1:_,ty1:E,tx2:T,ty2:D,x1:C,y1:A,x2:N,y2:$,width:B,color:I,borderDash:G,borderDashOffset:O,tickWidth:P,tickColor:Z,tickBorderDash:Q,tickBorderDashOffset:Y}))}return this._ticksLength=d,this._borderValue=b,p}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=i,f=ec(s.grid),p=f+u,m=d?-u:p,x=-Xt(this.labelRotation),v=[];let g,b,w,y,k,_,E,T,D,C,A,N,$="middle";if(r==="top")_=this.bottom-m,E=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+m,E=this._getXAxisLabelAlignment();else if(r==="left"){const L=this._getYAxisLabelAlignment(f);E=L.textAlign,k=L.x}else if(r==="right"){const L=this._getYAxisLabelAlignment(f);E=L.textAlign,k=L.x}else if(n==="x"){if(r==="center")_=(e.top+e.bottom)/2+p;else if(Je(r)){const L=Object.keys(r)[0],F=r[L];_=this.chart.scales[L].getPixelForValue(F)+p}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")k=(e.left+e.right)/2-p;else if(Je(r)){const L=Object.keys(r)[0],F=r[L];k=this.chart.scales[L].getPixelForValue(F)}E=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?$="top":l==="end"&&($="bottom"));const W=this._getLabelSizes();for(g=0,b=a.length;g<b;++g){w=a[g],y=w.label;const L=i.setContext(this.getContext(g));T=this.getPixelForTick(g)+i.labelOffset,D=this._resolveTickFontOptions(g),C=D.lineHeight,A=Et(y)?y.length:1;const F=A/2,j=L.color,R=L.textStrokeColor,B=L.textStrokeWidth;let I=E;o?(k=T,E==="inner"&&(g===b-1?I=this.options.reverse?"left":"right":g===0?I=this.options.reverse?"right":"left":I="center"),r==="top"?c==="near"||x!==0?N=-A*C+C/2:c==="center"?N=-W.highest.height/2-F*C+C:N=-W.highest.height+C/2:c==="near"||x!==0?N=C/2:c==="center"?N=W.highest.height/2-F*C:N=W.highest.height-A*C,d&&(N*=-1),x!==0&&!L.showLabelBackdrop&&(k+=C/2*Math.sin(x))):(_=T,N=(1-A)*C/2);let G;if(L.showLabelBackdrop){const O=mn(L.backdropPadding),P=W.heights[g],Z=W.widths[g];let Q=N-O.top,Y=0-O.left;switch($){case"middle":Q-=P/2;break;case"bottom":Q-=P;break}switch(E){case"center":Y-=Z/2;break;case"right":Y-=Z;break;case"inner":g===b-1?Y-=Z:g>0&&(Y-=Z/2);break}G={left:Y,top:Q,width:Z+O.width,height:P+O.height,color:L.backdropColor}}v.push({label:y,font:D,textOffset:N,options:{rotation:x,color:j,strokeColor:R,strokeWidth:B,textAlign:I,textBaseline:$,translation:[k,_],backdrop:G}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Xt(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+i,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=Ri(e,this.left,o)-o/2,u=Ri(e,this.right,a)+a/2,d=f=l):(d=Ri(e,this.top,o)-o/2,f=Ri(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&A0(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Su(s,c,0,u,l,a)}r&&R0(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=Vt(s.font),o=mn(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Je(n)?(l+=o.bottom,Et(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=LW(this,l,n,a);Su(e,s.text,0,0,i,{color:s.color,maxWidth:d,rotation:f,textAlign:OW(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Xe(e.grid&&e.grid.z,-1),r=Xe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==El.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Vt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class qd{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;BW(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,jW(e,o,s),this.override&&Nt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in Nt[r]&&(delete Nt[r][s],this.override&&delete ko[s])}}function jW(t,e,n){const s=yu(Object.create(null),[n?Nt.get(n):{},Nt.get(e),t.defaults]);Nt.set(e,s),t.defaultRoutes&&FW(e,t.defaultRoutes),t.descriptors&&Nt.describe(e,t.descriptors)}function FW(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Nt.route(i,r,l,a)})}function BW(t){return"id"in t&&"defaults"in t}class $W{constructor(){this.controllers=new qd(wa,"datasets",!0),this.elements=new qd(xn,"elements"),this.plugins=new qd(Object,"plugins"),this.scales=new qd(El,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):dt(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=by(e);ft(s["before"+r],[],s),n[e](s),ft(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var Vs=new $W;class zW{constructor(){this._init=void 0}notify(e,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(ft(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){yt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=Xe(s.options&&s.options.plugins,{}),i=UW(s);return r===!1&&!n?[]:HW(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function UW(t){const e={},n=[],s=Object.keys(Vs.plugins.items);for(let i=0;i<s.length;i++)n.push(Vs.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function WW(t,e){return!e&&t===!1?null:t===!0?{}:t}function HW(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=WW(s[l],r);c!==null&&i.push({plugin:a,options:VW(t.config,{plugin:a,local:n[l]},c,o)})}return i}function VW(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ox(t,e){const n=Nt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function YW(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function GW(t,e){return t===e?"_index_":"_value_"}function Rk(t){if(t==="x"||t==="y"||t==="r")return t}function qW(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ax(t,...e){if(Rk(t))return t;for(const n of e){const s=n.axis||qW(n.position)||t.length>1&&Rk(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Ok(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function KW(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return Ok(t,"x",n[0])||Ok(t,"y",n[0])}return{}}function XW(t,e){const n=ko[t.type]||{scales:{}},s=e.scales||{},r=ox(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Je(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ax(o,a,KW(o,t),Nt.scales[a.type]),c=GW(l,r),u=n.scales||{};i[o]=$c(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||ox(a,e),u=(ko[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=YW(d,l),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),$c(i[p],[{axis:f},s[p],u[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];$c(a,[Nt.scales[a.type],Nt.scale])}),i}function OP(t){const e=t.options||(t.options={});e.plugins=Xe(e.plugins,{}),e.scales=XW(t,e)}function LP(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function QW(t){return t=t||{},t.data=LP(t.data),OP(t),t}const Lk=new Map,jP=new Set;function Kd(t,e){let n=Lk.get(t);return n||(n=e(),Lk.set(t,n),jP.add(n)),n}const tc=(t,e,n)=>{const s=wu(e,n);s!==void 0&&t.add(s)};class JW{constructor(e){this._config=QW(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=LP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),OP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Kd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Kd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Kd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Kd(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>tc(l,e,d))),u.forEach(d=>tc(l,r,d)),u.forEach(d=>tc(l,ko[i]||{},d)),u.forEach(d=>tc(l,Nt,d)),u.forEach(d=>tc(l,rx,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),jP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ko[n]||{},Nt.datasets[n]||{},{type:n},Nt,rx]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=jk(this._resolverCache,e,r);let l=o;if(eH(o,n)){i.$shared=!1,s=jn(s)?s():s;const c=this.createResolver(e,s,a);l=ul(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,s=[""],r){const{resolver:i}=jk(this._resolverCache,e,s);return Je(n)?ul(i,n,void 0,r):i}}function jk(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:_y(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const ZW=t=>Je(t)&&Object.getOwnPropertyNames(t).some(e=>jn(t[e]));function eH(t,e){const{isScriptable:n,isIndexable:s}=vP(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(jn(a)||ZW(a))||o&&Et(a))return!0}return!1}var tH="4.5.1";const nH=["top","bottom","left","right","chartArea"];function Fk(t,e){return t==="top"||t==="bottom"||nH.indexOf(t)===-1&&e==="x"}function Bk(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function $k(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ft(n&&n.onComplete,[t],e)}function sH(t){const e=t.chart,n=e.options.animation;ft(n&&n.onProgress,[t],e)}function FP(t){return Py()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ch={},zk=t=>{const e=FP(t);return Object.values(Ch).filter(n=>n.canvas===e).pop()};function rH(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function iH(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var Vr;let co=(Vr=class{static register(...e){Vs.add(...e),Uk()}static unregister(...e){Vs.remove(...e),Uk()}constructor(e,n){const s=this.config=new JW(n),r=FP(e),i=zk(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||kW(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=uz(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zW,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Tz(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Ch[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}cr.listen(this,"complete",$k),cr.listen(this,"progress",sH),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return yt(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():fk(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return uk(this.canvas,this.ctx),this}stop(){return cr.stop(this),this}resize(e,n){cr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,fk(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ft(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};dt(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=ax(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),dt(i,o=>{const a=o.options,l=a.id,c=ax(l,a),u=Xe(a.type,o.dtype);(a.position===void 0||Fk(a.position,c)!==Fk(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in s&&s[l].type===u)d=s[l];else{const f=Vs.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,e)}),dt(r,(o,a)=>{o||delete s[a]}),dt(s,o=>{fs.configure(this,o,o.options),fs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(Bk("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||ox(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Vs.getController(a),{datasetElementType:c,dataElementType:u}=Nt.datasets[a];Object.assign(l,{dataElementType:Vs.getElement(u),datasetElementType:c&&Vs.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){dt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&i.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||dt(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Bk("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){dt(this.scales,e=>{fs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!tk(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;rH(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!tk(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fs.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],dt(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,jn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cr.has(this)?this.attached&&!cr.running(this)&&cr.start(this):(this.draw(),$k({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=OU(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&A0(n,r),e.controller.draw(),r&&R0(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return vu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=nW.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=No(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Xn(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),cr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),uk(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ch[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};dt(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){dt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},dt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Cf(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=mz(e),c=iH(e,this._lastEvent,s,l);s&&(this._lastEvent=null,ft(i.onHover,[e,a,this],this),l&&ft(i.onClick,[e,a,this],this));const u=!Cf(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},ie(Vr,"defaults",Nt),ie(Vr,"instances",Ch),ie(Vr,"overrides",ko),ie(Vr,"registry",Vs),ie(Vr,"version",tH),ie(Vr,"getChart",zk),Vr);function Uk(){return dt(co.instances,t=>t._plugins.invalidate())}function BP(t,e,n=e){t.lineCap=Xe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Xe(n.borderDash,e.borderDash)),t.lineDashOffset=Xe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Xe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Xe(n.borderWidth,e.borderWidth),t.strokeStyle=Xe(n.borderColor,e.borderColor)}function oH(t,e,n){t.lineTo(n.x,n.y)}function aH(t){return t.stepped?Uz:t.tension||t.cubicInterpolationMode==="monotone"?Wz:oH}function $P(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(i,a),u=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function lH(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:c}=$P(r,n,s),u=aH(i);let{move:d=!0,reverse:f}=s||{},p,m,x;for(p=0;p<=c;++p)m=r[(a+(f?c-p:p))%o],!m.skip&&(d?(t.moveTo(m.x,m.y),d=!1):u(t,x,m,f,i.stepped),x=m);return l&&(m=r[(a+(f?c:0))%o],u(t,x,m,f,i.stepped)),!!l}function cH(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=$P(r,n,s),{move:l=!0,reverse:c}=s||{};let u=0,d=0,f,p,m,x,v,g;const b=y=>(o+(c?a-y:y))%i,w=()=>{x!==v&&(t.lineTo(u,v),t.lineTo(u,x),t.lineTo(u,g))};for(l&&(p=r[b(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=r[b(f)],p.skip)continue;const y=p.x,k=p.y,_=y|0;_===m?(k<x?x=k:k>v&&(v=k),u=(d*u+y)/++d):(w(),t.lineTo(y,k),m=_,d=0,x=v=k),g=k}w()}function lx(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?cH:lH}function uH(t){return t.stepped?SU:t.tension||t.cubicInterpolationMode==="monotone"?kU:zi}function dH(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),BP(t,e.options),t.stroke(r)}function hH(t,e,n,s){const{segments:r,options:i}=e,o=lx(e);for(const a of r)BP(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const fH=typeof Path2D=="function";function pH(t,e,n,s){fH&&!e.options.segment?dH(t,e,n,s):hH(t,e,n,s)}class wc extends xn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;pU(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=DU(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=TU(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=uH(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],p=i[d],m=i[f];if(p===m){a.push(p);continue}const x=Math.abs((r-p[n])/(m[n]-p[n])),v=l(p,m,x,s.stepped);v[n]=e[n],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,n,s){return lx(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=lx(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),pH(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ie(wc,"id","line"),ie(wc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ie(wc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ie(wc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Wk(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class Eh extends xn{constructor(n){super();ie(this,"parsed");ie(this,"skip");ie(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return Wk(this,n,"x",s)}inYRange(n,s){return Wk(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!vu(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,ix(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ie(Eh,"id","point"),ie(Eh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ie(Eh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Hk=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},gH=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Vk extends xn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ft(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=Vt(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Hk(s,i);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let d=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,x)=>{const v=s+n/2+i.measureText(m.text).width;(x===0||c[c.length-1]+v+2*a>o)&&(d+=u,c[c.length-(x>0?0:1)]=0,p+=u,f++),l[x]={left:0,top:p,row:f,width:v,height:r},c[c.length-1]+=v+a}),d}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,p=0,m=0,x=0;return this.legendItems.forEach((v,g)=>{const{itemWidth:b,itemHeight:w}=mH(s,n,i,v,r);g>0&&p+w+2*a>u&&(d+=f+a,c.push({width:f,height:p}),m+=f+a,x++,f=p=0),l[g]={left:m,top:p,col:x,width:b,height:w},f=Math.max(f,b),p+=w+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=ya(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=hn(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=hn(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=hn(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=hn(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;A0(e,this),this._draw(),R0(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=Nt.color,l=ya(e.rtl,this.left,this.width),c=Vt(o.font),{padding:u}=o,d=c.size,f=d/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:m,boxHeight:x,itemHeight:v}=Hk(o,d),g=function(_,E,T){if(isNaN(m)||m<=0||isNaN(x)||x<0)return;r.save();const D=Xe(T.lineWidth,1);if(r.fillStyle=Xe(T.fillStyle,a),r.lineCap=Xe(T.lineCap,"butt"),r.lineDashOffset=Xe(T.lineDashOffset,0),r.lineJoin=Xe(T.lineJoin,"miter"),r.lineWidth=D,r.strokeStyle=Xe(T.strokeStyle,a),r.setLineDash(Xe(T.lineDash,[])),o.usePointStyle){const C={radius:x*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:D},A=l.xPlus(_,m/2),N=E+f;yP(r,C,A,N,o.pointStyleWidth&&m)}else{const C=E+Math.max((d-x)/2,0),A=l.leftForLtr(_,m),N=ba(T.borderRadius);r.beginPath(),Object.values(N).some($=>$!==0)?If(r,{x:A,y:C,w:m,h:x,radius:N}):r.rect(A,C,m,x),r.fill(),D!==0&&r.stroke()}r.restore()},b=function(_,E,T){Su(r,T.text,_,E+v/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},w=this.isHorizontal(),y=this._computeTitleHeight();w?p={x:hn(i,this.left+u,this.right-s[0]),y:this.top+u+y,line:0}:p={x:this.left+u,y:hn(i,this.top+y+u,this.bottom-n[0].height),line:0},EP(this.ctx,e.textDirection);const k=v+u;this.legendItems.forEach((_,E)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const T=r.measureText(_.text).width,D=l.textAlign(_.textAlign||(_.textAlign=o.textAlign)),C=m+f+T;let A=p.x,N=p.y;l.setWidth(this.width),w?E>0&&A+C+u>this.right&&(N=p.y+=k,p.line++,A=p.x=hn(i,this.left+u,this.right-s[p.line])):E>0&&N+k>this.bottom&&(A=p.x=A+n[p.line].width+u,p.line++,N=p.y=hn(i,this.top+y+u,this.bottom-n[p.line].height));const $=l.x(A);if(g($,N,_),A=Mz(D,A+m+f,w?A+C:this.right,e.rtl),b(l.x(A),N,_),w)p.x+=C+u;else if(typeof _.text!="string"){const W=c.lineHeight;p.y+=zP(_,W)+u}else p.y+=k}),PP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Vt(n.font),r=mn(n.padding);if(!n.display)return;const i=ya(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=hn(e.align,d,this.right-f);else{const m=this.columnSizes.reduce((x,v)=>Math.max(x,v.height),0);u=c+hn(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=hn(a,d,d+f);o.textAlign=i.textAlign(vy(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Su(o,n.text,p,u,s)}_computeTitleHeight(){const e=this.options.title,n=Vt(e.font),s=mn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(xc(e,this.left,this.right)&&xc(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],xc(e,r.left,r.left+r.width)&&xc(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!yH(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=gH(r,s);r&&!i&&ft(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&ft(n.onHover,[e,s,this],this)}else s&&ft(n.onClick,[e,s,this],this)}}function mH(t,e,n,s,r){const i=xH(s,t,e,n),o=bH(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function xH(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function bH(t,e,n){let s=t;return typeof e.text!="string"&&(s=zP(e,n)),s}function zP(t,e){const n=t.text?t.text.length:0;return e*n}function yH(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var wH={id:"legend",_element:Vk,start(t,e,n){const s=t.legend=new Vk({ctx:t.ctx,options:n,chart:t});fs.configure(t,s,n),fs.addBox(t,s)},stop(t){fs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;fs.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=mn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class UP extends xn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Et(s.text)?s.text.length:1;this._padding=mn(s.padding);const i=r*Vt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=hn(a,s,i),d=n+e,c=i-s):(o.position==="left"?(u=s+e,d=hn(a,r,n),l=lt*-.5):(u=i-e,d=hn(a,n,r),l=lt*.5),c=r-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Vt(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Su(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:vy(n.align),textBaseline:"middle",translation:[o,a]})}}function vH(t,e){const n=new UP({ctx:t.ctx,options:e,chart:t});fs.configure(t,n,e),fs.addBox(t,n),t.titleBlock=n}var SH={id:"title",_element:UP,start(t,e,n){vH(t,n)},stop(t){const e=t.titleBlock;fs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;fs.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vc={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=cl(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Ws(t,e){return e&&(Et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ur(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function kH(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function Yk(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Vt(e.bodyFont),c=Vt(e.titleFont),u=Vt(e.footerFont),d=i.length,f=r.length,p=s.length,m=mn(e.padding);let x=m.height,v=0,g=s.reduce((y,k)=>y+k.before.length+k.lines.length+k.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),g){const y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=p*y+(g-p)*l.lineHeight+(g-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let b=0;const w=function(y){v=Math.max(v,n.measureText(y).width+b)};return n.save(),n.font=c.string,dt(t.title,w),n.font=l.string,dt(t.beforeBody.concat(t.afterBody),w),b=e.displayColors?o+2+e.boxPadding:0,dt(s,y=>{dt(y.before,w),dt(y.lines,w),dt(y.after,w)}),b=0,n.font=u.string,dt(t.footer,w),n.restore(),v+=m.width,{width:v,height:x}}function _H(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function CH(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function EH(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),CH(c,t,e,n)&&(c="center"),c}function Gk(t,e,n){const s=n.yAlign||e.yAlign||_H(t,n);return{xAlign:n.xAlign||e.xAlign||EH(t,e,n,s),yAlign:s}}function PH(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function TH(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function qk(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=ba(o);let m=PH(e,a);const x=TH(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+r:a==="right"&&(m+=Math.max(d,p)+r),{x:hs(m,0,s.width-e.width),y:hs(x,0,s.height-e.height)}}function Xd(t,e,n){const s=mn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function Kk(t){return Ws([],ur(t))}function MH(t,e,n){return No(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Xk(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const WP={beforeTitle:lr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:lr,beforeBody:lr,beforeLabel:lr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return yt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:lr,afterBody:lr,beforeFooter:lr,footer:lr,afterFooter:lr};function En(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?WP[e].call(n,s):r}class cx extends xn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new My(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=MH(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=En(s,"beforeTitle",this,e),i=En(s,"title",this,e),o=En(s,"afterTitle",this,e);let a=[];return a=Ws(a,ur(r)),a=Ws(a,ur(i)),a=Ws(a,ur(o)),a}getBeforeBody(e,n){return Kk(En(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return dt(e,i=>{const o={before:[],lines:[],after:[]},a=Xk(s,i);Ws(o.before,ur(En(a,"beforeLabel",this,i))),Ws(o.lines,En(a,"label",this,i)),Ws(o.after,ur(En(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return Kk(En(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=En(s,"beforeFooter",this,e),i=En(s,"footer",this,e),o=En(s,"afterFooter",this,e);let a=[];return a=Ws(a,ur(r)),a=Ws(a,ur(i)),a=Ws(a,ur(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(kH(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,s))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,s))),dt(a,u=>{const d=Xk(e.callbacks,u);r.push(En(d,"labelColor",this,u)),i.push(En(d,"labelPointStyle",this,u)),o.push(En(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=vc[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=Yk(this,s),c=Object.assign({},a,l),u=Gk(this.chart,s,c),d=qk(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=ba(a),{x:f,y:p}=e,{width:m,height:x}=n;let v,g,b,w,y,k;return i==="center"?(y=p+x/2,r==="left"?(v=f,g=v-o,w=y+o,k=y-o):(v=f+m,g=v+o,w=y-o,k=y+o),b=v):(r==="left"?g=f+Math.max(l,u)+o:r==="right"?g=f+m-Math.max(c,d)-o:g=this.caretX,i==="top"?(w=p,y=w-o,v=g-o,b=g+o):(w=p+x,y=w+o,v=g+o,b=g-o),k=w),{x1:v,x2:g,x3:b,y1:w,y2:y,y3:k}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=ya(s.rtl,this.x,this.width);for(e.x=Xd(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Vt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,u=Vt(i.bodyFont),d=Xd(this,"left",i),f=r.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+p;if(i.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=r.leftForLtr(f,c)+c/2,g=m+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,ix(e,x,v,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,ix(e,x,v,g)}else{e.lineWidth=Je(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(f,c),v=r.leftForLtr(r.xPlus(f,1),c-2),g=ba(o.borderRadius);Object.values(g).some(b=>b!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,If(e,{x,y:m,w:c,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),If(e,{x:v,y:m+1,w:c-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(x,m,c,l),e.strokeRect(x,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(v,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,d=Vt(s.bodyFont);let f=d.lineHeight,p=0;const m=ya(s.rtl,this.x,this.width),x=function(T){n.fillText(T,m.x(e.x+p),e.y+f/2),e.y+=f+i},v=m.textAlign(o);let g,b,w,y,k,_,E;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Xd(this,v,s),n.fillStyle=s.bodyColor,dt(this.beforeBody,x),p=a&&v!=="right"?o==="center"?c/2+u:c+2+u:0,y=0,_=r.length;y<_;++y){for(g=r[y],b=this.labelTextColors[y],n.fillStyle=b,dt(g.before,x),w=g.lines,a&&w.length&&(this._drawColorBox(n,e,y,m,s),f=Math.max(d.lineHeight,l)),k=0,E=w.length;k<E;++k)x(w[k]),f=d.lineHeight;dt(g.after,x)}p=0,f=d.lineHeight,dt(this.afterBody,x),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=ya(s.rtl,this.x,this.width);for(e.x=Xd(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Vt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:m}=ba(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=vc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Yk(this,e),l=Object.assign({},o,this._size),c=Gk(n,e,l),u=qk(e,l,c,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=mn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),EP(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),PP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Cf(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!Cf(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=vc[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}ie(cx,"positioners",vc);var IH={id:"tooltip",_element:cx,positioners:vc,afterInit(t,e,n){n&&(t.tooltip=new cx({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:WP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const DH=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function NH(t,e,n,s){const r=t.indexOf(e);if(r===-1)return DH(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const AH=(t,e)=>t===null?null:hs(Math.round(t),0,e);function Qk(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ux extends El{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(yt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:NH(s,e,Xe(n,e),this._addedLabels),AH(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Qk.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ie(ux,"id","category"),ie(ux,"defaults",{ticks:{callback:Qk}});function RH(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,p=i||1,m=u-1,{min:x,max:v}=e,g=!yt(o),b=!yt(a),w=!yt(c),y=(v-x)/(d+1);let k=nk((v-x)/m/p)*p,_,E,T,D;if(k<1e-14&&!g&&!b)return[{value:x},{value:v}];D=Math.ceil(v/k)-Math.floor(x/k),D>m&&(k=nk(D*k/m/p)*p),yt(l)||(_=Math.pow(10,l),k=Math.ceil(k*_)/_),r==="ticks"?(E=Math.floor(x/k)*k,T=Math.ceil(v/k)*k):(E=x,T=v),g&&b&&i&&wz((a-o)/i,k/1e3)?(D=Math.round(Math.min((a-o)/k,u)),k=(a-o)/D,E=o,T=a):w?(E=g?o:E,T=b?a:T,D=c-1,k=(T-E)/D):(D=(T-E)/k,zc(D,Math.round(D),k/1e3)?D=Math.round(D):D=Math.ceil(D));const C=Math.max(sk(k),sk(E));_=Math.pow(10,yt(l)?C:l),E=Math.round(E*_)/_,T=Math.round(T*_)/_;let A=0;for(g&&(f&&E!==o?(n.push({value:o}),E<o&&A++,zc(Math.round((E+A*k)*_)/_,o,Jk(o,y,t))&&A++):E<o&&A++);A<D;++A){const N=Math.round((E+A*k)*_)/_;if(b&&N>a)break;n.push({value:N})}return b&&f&&T!==a?n.length&&zc(n[n.length-1].value,a,Jk(a,y,t))?n[n.length-1].value=a:n.push({value:a}):(!b||T===a)&&n.push({value:T}),n}function Jk(t,e,{horizontal:n,minRotation:s}){const r=Xt(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class OH extends El{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return yt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=ll(r),c=ll(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=RH(r,i);return e.bounds==="ticks"&&vz(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return ky(e,this.chart.options.locale,this.options.ticks.format)}}class dx extends OH{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Bn(e)?e:0,this.max=Bn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Xt(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ie(dx,"id","linear"),ie(dx,"defaults",{ticks:{callback:bP.formatters.numeric}});const j0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Dn=Object.keys(j0);function Zk(t,e){return t-e}function e2(t,e){if(yt(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Bn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(So(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function t2(t,e,n,s){const r=Dn.length;for(let i=Dn.indexOf(t);i<r-1;++i){const o=j0[Dn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return Dn[i]}return Dn[r-1]}function LH(t,e,n,s,r){for(let i=Dn.length-1;i>=Dn.indexOf(n);i--){const o=Dn[i];if(j0[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return Dn[n?Dn.indexOf(n):0]}function jH(t){for(let e=Dn.indexOf(t)+1,n=Dn.length;e<n;++e)if(j0[Dn[e]].common)return Dn[e]}function n2(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=wy(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function FH(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function s2(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:FH(t,s,r,n)}class Af extends El{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new QU._date(e.adapters.date);r.init(n),$c(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:e2(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Bn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Bn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=Cz(r,i,o);return this._unit=n.unit||(s.autoSkip?t2(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):LH(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:jH(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),s2(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=hs(n,0,o),s=hs(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||t2(i.minUnit,n,s,this._getLabelCapacity(n)),a=Xe(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=So(l)||l===!0,u={};let d=n,f,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const m=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<s;f=+e.add(f,a,o),p++)n2(u,f,m);return(f===s||r.bounds==="ticks"||p===1)&&n2(u,f,m),Object.keys(u).sort(Zk).map(x=>+x)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return ft(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=s[n],p=c&&d&&f&&f.major;return this._adapter.format(e,r||(p?d:u))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Xt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,s2(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(e2(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Pz(e.sort(Zk))}}ie(Af,"id","time"),ie(Af,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Qd(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=Qi(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=Qi(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class r2 extends Af{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Qd(n,this.min),this._tableRange=Qd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Qd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Qd(this._table,s*this._tableRange+this._minPos,!0)}}ie(r2,"id","timeseries"),ie(r2,"defaults",Af.defaults);const HP="label";function i2(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function BH(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function VP(t,e){t.labels=e}function YP(t,e,n=HP){const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function $H(t,e=HP){const n={labels:[],datasets:[]};return VP(n,t.labels),YP(n,t.datasets,e),n}function zH(t,e){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...f}=t,p=S.useRef(null),m=S.useRef(null),x=()=>{p.current&&(m.current=new co(p.current,{type:o,data:$H(a,i),options:l&&{...l},plugins:c}),i2(e,m.current))},v=()=>{i2(e,null),m.current&&(m.current.destroy(),m.current=null)};return S.useEffect(()=>{!r&&m.current&&l&&BH(m.current,l)},[r,l]),S.useEffect(()=>{!r&&m.current&&VP(m.current.config.data,a.labels)},[r,a.labels]),S.useEffect(()=>{!r&&m.current&&a.datasets&&YP(m.current.config.data,a.datasets,i)},[r,a.datasets]),S.useEffect(()=>{m.current&&(r?(v(),setTimeout(x)):m.current.update(d))},[r,l,a.labels,a.datasets,d]),S.useEffect(()=>{m.current&&(v(),setTimeout(x))},[o]),S.useEffect(()=>(x(),()=>v()),[]),h.jsx("canvas",{ref:p,role:"img",height:n,width:s,...f,children:u})}const UH=S.forwardRef(zH);function WH(t,e){return co.register(e),S.forwardRef((n,s)=>h.jsx(UH,{...n,ref:s,type:t}))}const HH=WH("scatter",kh);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const o2={modes:{point(t,e){return Ph(t,e,{intersect:!0})},nearest(t,e,n){return GH(t,e,n)},x(t,e,n){return Ph(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return Ph(t,e,{intersect:n.intersect,axis:"y"})}}};function Dy(t,e,n){return(o2.modes[n.mode]||o2.modes.nearest)(t,e,n)}function VH(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function YH(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function Ph(t,e,n){return t.filter(s=>n.intersect?s.inRange(e.x,e.y):VH(s,e,n.axis))}function GH(t,e,n){let s=Number.POSITIVE_INFINITY;return Ph(t,e,n).reduce((r,i)=>{const o=i.getCenterPoint(),a=YH(e,o,n.axis),l=cl(e,a);return l<s?(r=[i],s=l):l===s&&r.push(i),r},[]).sort((r,i)=>r._index-i._index).slice(0,1)}function Ao(t,e,n){const s=Math.cos(n),r=Math.sin(n),i=e.x,o=e.y;return{x:i+s*(t.x-i)-r*(t.y-o),y:o+r*(t.x-i)+s*(t.y-o)}}const qH=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Ji=.001,F0=(t,e,n)=>Math.min(n,Math.max(e,t)),GP=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function KH(t,e,n){for(const s of Object.keys(t))t[s]=F0(t[s],e,n);return t}function XH(t,e,n,s){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function qP(t,{x:e,y:n,x2:s,y2:r},i,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=t.x>=e-l-Ji&&t.x<=s+l+Ji,u=t.y>=n-l-Ji&&t.y<=r+l+Ji;return i==="x"?c:(i==="y"||c)&&u}function KP(t,{rect:e,center:n},s,{rotation:r,borderWidth:i,hitTolerance:o}){const a=Ao(t,n,Xt(-r));return qP(a,e,s,{borderWidth:i,hitTolerance:o})}function Ro(t,e){const{centerX:n,centerY:s}=t.getProps(["centerX","centerY"],e);return{x:n,y:s}}function QH(t,e,n,s=!0){const r=n.split(".");let i=0;for(const o of e.split(".")){const a=r[i++];if(parseInt(o,10)<parseInt(a,10))break;if(qH(a,o)){if(s)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const XP=t=>typeof t=="string"&&t.endsWith("%"),QP=t=>parseFloat(t)/100,JP=t=>F0(QP(t),0,1),nc=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),JH={box:t=>nc(t.centerX,t.centerY),doughnutLabel:t=>nc(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>nc(t.centerX,t.centerY),line:t=>nc(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>nc(t.centerX,t.centerY)};function Ny(t,e){return e==="start"?0:e==="end"?t:XP(e)?JP(e)*t:t/2}function _i(t,e,n=!0){return typeof e=="number"?e:XP(e)?(n?JP(e):QP(e))*t:t}function ZH(t,e){const{x:n,width:s}=t,r=e.textAlign;return r==="center"?n+s/2:r==="end"||r==="right"?n+s:n}function ZP(t,e,{borderWidth:n,position:s,xAdjust:r,yAdjust:i},o){const a=Je(o),l=e.width+(a?o.width:0)+n,c=e.height+(a?o.height:0)+n,u=Ay(s),d=a2(t.x,l,r,u.x),f=a2(t.y,c,i,u.y);return{x:d,y:f,x2:d+l,y2:f+c,width:l,height:c,centerX:d+l/2,centerY:f+c/2}}function Ay(t,e="center"){return Je(t)?{x:Xe(t.x,e),y:Xe(t.y,e)}:(t=Xe(t,e),{x:t,y:t})}const eT=(t,e)=>t&&t.autoFit&&e<1;function tT(t,e){const n=t.font,s=Et(n)?n:[n];return eT(t,e)?s.map(function(r){const i=Vt(r);return i.size=Math.floor(r.size*e),i.lineHeight=r.lineHeight,Vt(i)}):s.map(r=>Vt(r))}function nT(t){return t&&(Xn(t.xValue)||Xn(t.yValue))}function a2(t,e,n=0,s){return t-Ny(e,s)+n}function Pl(t,e,n){const s=n.init;if(s){if(s===!0)return rT(e,n)}else return;return eV(t,e,n)}function sT(t,e,n){let s=!1;return e.forEach(r=>{jn(t[r])?(s=!0,n[r]=t[r]):Xn(n[r])&&delete n[r]}),s}function rT(t,e){const n=e.type||"line";return JH[n](t)}function eV(t,e,n){const s=ft(n.init,[{chart:t,properties:e,options:n}]);if(s===!0)return rT(e,n);if(Je(s))return s}const Pg=new Map,tV=t=>isNaN(t)||t<=0,nV=t=>t.reduce(function(e,n){return e+=n.string,e},"");function B0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function $0(t,{x:e,y:n},s){s&&(t.translate(e,n),t.rotate(Xt(s)),t.translate(-e,-n))}function Ar(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function Tl(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function z0(t,e){const n=e.content;if(B0(n))return{width:_i(n.width,e.width),height:_i(n.height,e.height)};const s=tT(e),r=e.textStrokeWidth,i=Et(n)?n:[n],o=i.join()+nV(s)+r+(t._measureText?"-spriting":"");return Pg.has(o)||Pg.set(o,oV(t,i,s,r)),Pg.get(o)}function iT(t,e,n){const{x:s,y:r,width:i,height:o}=e;t.save(),Tl(t,n);const a=Ar(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),If(t,{x:s,y:r,w:i,h:o,radius:KH(ba(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function oT(t,e,n,s){const r=n.content;if(B0(r)){t.save(),t.globalAlpha=cV(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const i=Et(r)?r:[r],o=tT(n,s),a=n.color,l=Et(a)?a:[a],c=ZH(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,sV(t,n)&&aV(t,{x:c,y:u},i,o),lV(t,{x:c,y:u},i,{fonts:o,colors:l}),t.restore()}function sV(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function rV(t,e,n,s){const{radius:r,options:i}=e,o=i.pointStyle,a=i.rotation;let l=(a||0)*yy;if(B0(o)){t.save(),t.translate(n,s),t.rotate(l),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}tV(r)||iV(t,{x:n,y:s,radius:r,rotation:a,style:o,rad:l})}function iV(t,{x:e,y:n,radius:s,rotation:r,style:i,rad:o}){let a,l,c,u;switch(t.beginPath(),i){default:t.arc(e,n,s,0,nn),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=Tf,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=Tf,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),t.closePath();break;case"rectRounded":u=s*.516,c=s-u,a=Math.cos(o+ls)*c,l=Math.sin(o+ls)*c,t.arc(e-a,n-l,u,o-lt,o-sn),t.arc(e+l,n-a,u,o-sn,o),t.arc(e+a,n+l,u,o,o+sn),t.arc(e-l,n+a,u,o+sn,o+lt),t.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*s,t.rect(e-c,n-c,2*c,2*c);break}o+=ls;case"rectRot":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+l,n-a),t.lineTo(e+a,n+l),t.lineTo(e-l,n+a),t.closePath();break;case"crossRot":o+=ls;case"cross":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"star":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a),o+=ls,a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"line":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*s,n+Math.sin(o)*s);break}t.fill()}function oV(t,e,n,s){t.save();const r=e.length;let i=0,o=s;for(let a=0;a<r;a++){const l=n[Math.min(a,n.length-1)];t.font=l.string;const c=e[a];i=Math.max(i,t.measureText(c).width+s),o+=l.lineHeight}return t.restore(),{width:i,height:o}}function aV(t,{x:e,y:n},s,r){t.beginPath();let i=0;s.forEach(function(o,a){const l=r[Math.min(a,r.length-1)],c=l.lineHeight;t.font=l.string,t.strokeText(o,e,n+c/2+i),i+=c}),t.stroke()}function lV(t,{x:e,y:n},s,{fonts:r,colors:i}){let o=0;s.forEach(function(a,l){const c=i[Math.min(l,i.length-1)],u=r[Math.min(l,r.length-1)],d=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=c,t.fillText(a,e,n+d/2+o),o+=d,t.fill()})}function cV(t,e){const n=So(t)?t:e;return So(n)?F0(n,0,1):1}const aT=["left","bottom","top","right"];function uV(t,e){const{pointX:n,pointY:s,options:r}=e,i=r.callout,o=i&&i.display&&gV(e,i);if(!o||xV(e,i,o))return;if(t.save(),t.beginPath(),!Ar(t,i))return t.restore();const{separatorStart:l,separatorEnd:c}=dV(e,o),{sideStart:u,sideEnd:d}=fV(e,o,l);(i.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(d.x,d.y);const f=Ao({x:n,y:s},e.getCenterPoint(),Xt(-e.rotation));t.lineTo(f.x,f.y),t.stroke(),t.restore()}function dV(t,e){const{x:n,y:s,x2:r,y2:i}=t,o=hV(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:s},l={x:a.x,y:i}):(a={x:n,y:s+o},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function hV(t,e){const{width:n,height:s,options:r}=t,i=r.callout.margin+r.borderWidth/2;return e==="right"?n+i:e==="bottom"?s+i:-i}function fV(t,e,n){const{y:s,width:r,height:i,options:o}=t,a=o.callout.start,l=pV(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:s+_i(i,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+_i(r,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function pV(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function gV(t,e){const n=e.position;return aT.includes(n)?n:mV(t,e)}function mV(t,e){const{x:n,y:s,x2:r,y2:i,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:f}=t,p={x:u,y:d},m=e.start,x=_i(o,m),v=_i(a,m),g=[n,n+x,n+x,r],b=[s+v,i,s,i],w=[];for(let y=0;y<4;y++){const k=Ao({x:g[y],y:b[y]},p,Xt(f));w.push({position:aT[y],distance:cl(k,{x:l,y:c})})}return w.sort((y,k)=>y.distance-k.distance)[0].position}function xV(t,e,n){const{pointX:s,pointY:r}=t,i=e.margin;let o=s,a=r;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?a+=i:n==="bottom"&&(a-=i),t.inRange(o,a)}const l2={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function hl(t,e,n){return e=typeof e=="number"?e:t.parse(e),Bn(e)?t.getPixelForValue(e):n}function _o(t,e,n){const s=e[n];if(s||n==="scaleID")return s;const r=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===r);return i.length?i[0].id:r}function lT(t,e){if(t){const n=t.options.reverse,s=hl(t,e.min,n?e.end:e.start),r=hl(t,e.max,n?e.start:e.end);return{start:s,end:r}}}function cT(t,e){const{chartArea:n,scales:s}=t,r=s[_o(s,e,"xScaleID")],i=s[_o(s,e,"yScaleID")];let o=n.width/2,a=n.height/2;return r&&(o=hl(r,e.xValue,r.left+r.width/2)),i&&(a=hl(i,e.yValue,i.top+i.height/2)),{x:o,y:a}}function Ry(t,e){const n=t.scales,s=n[_o(n,e,"xScaleID")],r=n[_o(n,e,"yScaleID")];if(!s&&!r)return{};let{left:i,right:o}=s||t.chartArea,{top:a,bottom:l}=r||t.chartArea;const c=c2(s,{min:e.xMin,max:e.xMax,start:i,end:o});i=c.start,o=c.end;const u=c2(r,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:i,y:a,x2:o,y2:l,width:o-i,height:l-a,centerX:i+(o-i)/2,centerY:a+(l-a)/2}}function uT(t,e){if(!nT(e)){const n=Ry(t,e);let s=e.radius;(!s||isNaN(s))&&(s=Math.min(n.width,n.height)/2,e.radius=s);const r=s*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-s,y:o-s,x2:i+s,y2:o+s,centerX:i,centerY:o,width:r,height:r,radius:s}}return yV(t,e)}function bV(t,e){const{scales:n,chartArea:s}=t,r=n[e.scaleID],i={x:s.left,y:s.top,x2:s.right,y2:s.bottom};return r?wV(r,i,e):vV(n,i,e),i}function dT(t,e){const n=Ry(t,e);return n.initProperties=Pl(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:_V(t,n,e),initProperties:n.initProperties}],n}function yV(t,e){const n=cT(t,e),s=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:s,height:s}}function c2(t,e){const n=lT(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function wV(t,e,n){const s=hl(t,n.value,NaN),r=hl(t,n.endValue,s);t.isHorizontal()?(e.x=s,e.x2=r):(e.y=s,e.y2=r)}function vV(t,e,n){for(const s of Object.keys(l2)){const r=t[_o(t,n,s)];if(r){const{min:i,max:o,start:a,end:l,startProp:c,endProp:u}=l2[s],d=lT(r,{min:n[i],max:n[o],start:r[a],end:r[l]});e[c]=d.start,e[u]=d.end}}}function SV({properties:t,options:e},n,s,r){const{x:i,x2:o,width:a}=t;return hT({start:i,end:o,borderWidth:e.borderWidth},{position:s.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function kV({properties:t,options:e},n,s,r){const{y:i,y2:o,height:a}=t;return hT({start:i,end:o,borderWidth:e.borderWidth},{position:s.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function hT(t,e){const{start:n,end:s,borderWidth:r}=t,{position:i,padding:{start:o,end:a},adjust:l}=e,c=s-r-n-o-a-e.size;return n+r/2+l+Ny(c,i)}function _V(t,e,n){const s=n.label;s.backgroundColor="transparent",s.callout.display=!1;const r=Ay(s.position),i=mn(s.padding),o=z0(t.ctx,s),a=SV({properties:e,options:n},o,r,i),l=kV({properties:e,options:n},o,r,i),c=o.width+i.width,u=o.height+i.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:s.rotation}}const hx=["enter","leave"],Oy=hx.concat("click");function CV(t,e,n){e.listened=sT(n,Oy,e.listeners),e.moveListened=!1,hx.forEach(s=>{jn(n[s])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(s=>{!e.listened&&jn(s.click)&&(e.listened=!0),e.moveListened||hx.forEach(r=>{jn(s[r])&&(e.listened=!0,e.moveListened=!0)})})}function EV(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return PV(t,e,n);case"click":return TV(t,e,n)}}function PV(t,e,n){if(!t.moveListened)return;let s;e.type==="mousemove"?s=Dy(t.visibleElements,e,n.interaction):s=[];const r=t.hovered;t.hovered=s;const i={state:t,event:e};let o=u2(i,"leave",r,s);return u2(i,"enter",s,r)||o}function u2({state:t,event:e},n,s,r){let i;for(const o of s)r.indexOf(o)<0&&(i=fT(o.options[n]||t.listeners[n],o,e)||i);return i}function TV(t,e,n){const s=t.listeners,r=Dy(t.visibleElements,e,n.interaction);let i;for(const o of r)i=fT(o.options.click||s.click,o,e)||i;return i}function fT(t,e,n){return ft(t,[e.$context,n])===!0}const Rf=["afterDraw","beforeDraw"];function MV(t,e,n){const s=e.visibleElements;e.hooked=sT(n,Rf,e.hooks),e.hooked||s.forEach(r=>{e.hooked||Rf.forEach(i=>{jn(r.options[i])&&(e.hooked=!0)})})}function d2(t,e,n){if(t.hooked){const s=e.options[n]||t.hooks[n];return ft(s,[e.$context])}}function IV(t,e,n){const s=OV(t.scales,e,n);let r=h2(e,s,"min","suggestedMin");r=h2(e,s,"max","suggestedMax")||r,r&&jn(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function DV(t,e){for(const n of t)AV(n,e)}function h2(t,e,n,s){if(Bn(e[n])&&!NV(t.options,n,s)){const r=t[n]!==e[n];return t[n]=e[n],r}}function NV(t,e,n){return Xn(t[e])||Xn(t[n])}function AV(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const s=_o(e,t,n);s&&!e[s]&&RV(t,n)&&console.warn(`No scale found with id '${s}' for annotation '${t.id}'`)}}function RV(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const s of["Min","Max","Value"])if(Xn(t[n+s]))return!0;return!1}function OV(t,e,n){const s=e.axis,r=e.id,i=s+"ScaleID",o={min:Xe(e.min,Number.NEGATIVE_INFINITY),max:Xe(e.max,Number.POSITIVE_INFINITY)};for(const a of n)a.scaleID===r?f2(a,e,["value","endValue"],o):_o(t,a,i)===r&&f2(a,e,[s+"Min",s+"Max",s+"Value"],o);return o}function f2(t,e,n,s){for(const r of n){const i=t[r];if(Xn(i)){const o=e.parse(i);s.min=Math.min(s.min,o),s.max=Math.max(s.max,o)}}}class Ml extends xn{inRange(e,n,s,r){const{x:i,y:o}=Ao({x:e,y:n},this.getCenterPoint(r),Xt(-this.options.rotation));return qP({x:i,y:o},this.getProps(["x","y","x2","y2"],r),s,this.options)}getCenterPoint(e){return Ro(this,e)}draw(e){e.save(),$0(e,this.getCenterPoint(),this.options.rotation),iT(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return dT(e,n)}}Ml.id="boxAnnotation";Ml.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ml.defaultRoutes={borderColor:"color",backgroundColor:"color"};Ml.descriptors={label:{_fallback:!0}};class U0 extends xn{inRange(e,n,s,r){return KP({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ro(this,e)}draw(e){const n=this.options;!n.display||!n.content||(zV(e,this),e.save(),$0(e,this.getCenterPoint(),this.rotation),oT(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const s=LV(e,n);if(!s)return{};const{controllerMeta:r,point:i,radius:o}=FV(e,n,s);let a=z0(e.ctx,n);const l=BV(a,o);eT(n,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:d}=n,f=ZP(i,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return{initProperties:Pl(e,f,n),...f,...r,rotation:n.rotation,_fitRatio:l}}}U0.id="doughnutLabelAnnotation";U0.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};U0.defaultRoutes={};function LV(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,s){const r=s.controller;return r instanceof bc&&jV(t,e,s.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?s:n},void 0)}function jV(t,e,n){if(!e.autoHide)return!0;for(let s=0;s<n.length;s++)if(!n[s].hidden&&t.getDataVisibility(s))return!0}function FV({chartArea:t},e,n){const{left:s,top:r,right:i,bottom:o}=t,{innerRadius:a,offsetX:l,offsetY:c}=n.controller,u=(s+i)/2+l,d=(r+o)/2+c,f={left:Math.max(u-a,s),right:Math.min(u+a,i),top:Math.max(d-a,r),bottom:Math.min(d+a,o)},p={x:(f.left+f.right)/2,y:(f.top+f.bottom)/2},m=e.spacing+e.borderWidth/2,x=a-m,v=p.y>d,g=v?r+m:o-m,b=$V(g,u,d,x);return{controllerMeta:{_centerX:u,_centerY:d,_radius:x,_counterclockwise:v,...b},point:p,radius:Math.min(a,Math.min(f.right-f.left,f.bottom-f.top)/2)}}function BV({width:t,height:e},n){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/s}function $V(t,e,n,s){const r=Math.pow(n-t,2),i=Math.pow(s,2),o=e*-2,a=Math.pow(e,2)+r-i,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:nn};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:sx({x:e,y:n},{x:c,y:t}).angle,_endAngle:sx({x:e,y:n},{x:u,y:t}).angle}}function zV(t,e){const{_centerX:n,_centerY:s,_radius:r,_startAngle:i,_endAngle:o,_counterclockwise:a,options:l}=e;t.save();const c=Ar(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,s,r,i,o,a),t.closePath(),t.fill(),c&&t.stroke(),t.restore()}class Gu extends xn{inRange(e,n,s,r){return KP({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ro(this,e)}draw(e){const n=this.options,s=!Xn(this._visible)||this._visible;!n.display||!n.content||!s||(e.save(),$0(e,this.getCenterPoint(),this.rotation),uV(e,this),iT(e,this,n),oT(e,UV(this),n),e.restore())}resolveElementProperties(e,n){let s;if(nT(n))s=cT(e,n);else{const{centerX:a,centerY:l}=Ry(e,n);s={x:a,y:l}}const r=mn(n.padding),i=z0(e.ctx,n),o=ZP(s,i,n,r);return{initProperties:Pl(e,o,n),pointX:s.x,pointY:s.y,...o,rotation:n.rotation}}}Gu.id="labelAnnotation";Gu.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Gu.defaultRoutes={borderColor:"color"};function UV({x:t,y:e,width:n,height:s,options:r}){const i=r.borderWidth/2,o=mn(r.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-r.borderWidth,height:s-o.top-o.bottom-r.borderWidth}}const Ly=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),fx=(t,e,n)=>Ly(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,p2=(t,e,n)=>Ly(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,Sc=t=>t*t,WV=(t,e,{x:n,y:s,x2:r,y2:i},o)=>o==="y"?{start:Math.min(s,i),end:Math.max(s,i),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},g2=(t,e,n,s)=>(1-s)*(1-s)*t+2*(1-s)*s*e+s*s*n,px=(t,e,n,s)=>({x:g2(t.x,e.x,n.x,s),y:g2(t.y,e.y,n.y,s)}),m2=(t,e,n,s)=>2*(1-s)*(e-t)+2*s*(n-e),x2=(t,e,n,s)=>-Math.atan2(m2(t.x,e.x,n.x,s),m2(t.y,e.y,n.y,s))+.5*lt;class qu extends xn{inRange(e,n,s,r){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y"){const o={mouseX:e,mouseY:n},{path:a,ctx:l}=this;if(a){Ar(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=e*u.currentDevicePixelRatio,f=n*u.currentDevicePixelRatio,p=l.isPointInStroke(a,d,f)||gx(this,o,r);return l.restore(),p}const c=Sc(i);return GV(this,o,c,r)||gx(this,o,r)}return HV(this,{mouseX:e,mouseY:n},s,{hitSize:i,useFinalPosition:r})}getCenterPoint(e){return Ro(this,e)}draw(e){const{x:n,y:s,x2:r,y2:i,cp:o,options:a}=this;if(e.save(),!Ar(e,a))return e.restore();Tl(e,a);const l=Math.sqrt(Math.pow(r-n,2)+Math.pow(i-s,2));if(a.curve&&o)return tY(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:d,endAdjust:f}=pT(this),p=Math.atan2(i-s,r-n);e.translate(n,s),e.rotate(p),e.beginPath(),e.moveTo(0+d,0),e.lineTo(l-f,0),e.shadowColor=a.borderShadowColor,e.stroke(),mx(e,0,d,c),mx(e,l,-f,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const s=bV(e,n),{x:r,y:i,x2:o,y2:a}=s,l=VV(s,e.chartArea),c=l?YV({x:r,y:i},{x:o,y:a},e.chartArea):{x:r,y:i,x2:o,y2:a,width:Math.abs(o-r),height:Math.abs(a-i)};if(c.centerX=(o+r)/2,c.centerY=(a+i)/2,c.initProperties=Pl(e,c,n),n.curve){const d={x:c.x,y:c.y},f={x:c.x2,y:c.y2};c.cp=eY(c,n,cl(d,f))}const u=qV(e,c,n.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}qu.id="lineAnnotation";const b2={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};qu.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},b2),fill:!1,length:12,start:Object.assign({},b2),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Gu.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};qu.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};qu.defaultRoutes={borderColor:"color"};function HV(t,{mouseX:e,mouseY:n},s,{hitSize:r,useFinalPosition:i}){const o=WV(e,n,t.getProps(["x","y","x2","y2"],i),s);return GP(o,r)||gx(t,{mouseX:e,mouseY:n},i,s)}function VV({x:t,y:e,x2:n,y2:s},{top:r,right:i,bottom:o,left:a}){return!(t<a&&n<a||t>i&&n>i||e<r&&s<r||e>o&&s>o)}function y2({x:t,y:e},n,{top:s,right:r,bottom:i,left:o}){return t<o&&(e=p2(o,{x:t,y:e},n),t=o),t>r&&(e=p2(r,{x:t,y:e},n),t=r),e<s&&(t=fx(s,{x:t,y:e},n),e=s),e>i&&(t=fx(i,{x:t,y:e},n),e=i),{x:t,y:e}}function YV(t,e,n){const{x:s,y:r}=y2(t,e,n),{x:i,y:o}=y2(e,t,n);return{x:s,y:r,x2:i,y2:o,width:Math.abs(i-s),height:Math.abs(o-r)}}function GV(t,{mouseX:e,mouseY:n},s=Ji,r){const{x:i,y:o,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],r),c=a-i,u=l-o,d=Sc(c)+Sc(u),f=d===0?-1:((e-i)*c+(n-o)*u)/d;let p,m;return f<0?(p=i,m=o):f>1?(p=a,m=l):(p=i+f*c,m=o+f*u),Sc(e-p)+Sc(n-m)<=s}function gx(t,{mouseX:e,mouseY:n},s,r){const i=t.label;return i.options.display&&i.inRange(e,n,r,s)}function qV(t,e,n){const s=n.borderWidth,r=mn(n.padding),i=z0(t.ctx,n),o=i.width+r.width+s,a=i.height+r.height+s;return XV(e,n,{width:o,height:a,padding:r},t.chartArea)}function KV(t){const{x:e,y:n,x2:s,y2:r}=t,i=Math.atan2(r-n,s-e);return i>lt/2?i-lt:i<lt/-2?i+lt:i}function XV(t,e,n,s){const{width:r,height:i,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},d=e.rotation==="auto"?KV(t):Xt(e.rotation),f=QV(r,i,d),p=JV(t,e,{labelSize:f,padding:o},s),m=t.cp?px(c,t.cp,u,p):Ly(c,u,p),x={size:f.w,min:s.left,max:s.right,padding:o.left},v={size:f.h,min:s.top,max:s.bottom,padding:o.top},g=v2(m.x,x)+a,b=v2(m.y,v)+l;return{x:g-r/2,y:b-i/2,x2:g+r/2,y2:b+i/2,centerX:g,centerY:b,pointX:m.x,pointY:m.y,width:r,height:i,rotation:pP(d)}}function QV(t,e,n){const s=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*s)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*s)}}function JV(t,e,n,s){let r;const i=ZV(t,s);return e.position==="start"?r=w2({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?r=1-w2({w:t.x-t.x2,h:t.y-t.y2},n,e,i):r=Ny(1,e.position),r}function w2(t,e,n,s){const{labelSize:r,padding:i}=e,o=t.w*s.dx,a=t.h*s.dy,l=o>0&&(r.w/2+i.left-s.x)/o,c=a>0&&(r.h/2+i.top-s.y)/a;return F0(Math.max(l,c),0,.25)}function ZV(t,e){const{x:n,x2:s,y:r,y2:i}=t,o=Math.min(r,i)-e.top,a=Math.min(n,s)-e.left,l=e.bottom-Math.max(r,i),c=e.right-Math.max(n,s);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function v2(t,e){const{size:n,min:s,max:r,padding:i}=e,o=n/2;return n>r-s?(r+s)/2:(s>=t-i-o&&(t=s+i+o),r<=t+i+o&&(t=r-i-o),t)}function pT(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,s=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:S2(t,n),endAdjust:S2(t,s)}}function S2(t,e){if(!e||!e.display)return 0;const{length:n,width:s}=e,r=t.options.borderWidth/2,i={x:n,y:s+r};return Math.abs(fx(0,i,{x:0,y:r}))}function mx(t,e,n,s){if(!s||!s.display)return;const{length:r,width:i,fill:o,backgroundColor:a,borderColor:l}=s,c=Math.abs(e-r)+n;t.beginPath(),Tl(t,s),Ar(t,s),t.moveTo(c,-i),t.lineTo(e+n,0),t.lineTo(c,i),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=s.borderShadowColor,t.stroke()}function eY(t,e,n){const{x:s,y:r,x2:i,y2:o,centerX:a,centerY:l}=t,c=Math.atan2(o-r,i-s),u=Ay(e.controlPoint,0),d={x:a+_i(n,u.x,!1),y:l+_i(n,u.y,!1)};return Ao(d,{x:a,y:l},c)}function k2(t,{x:e,y:n},{angle:s,adjust:r},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(s),mx(t,0,-r,i),t.restore())}function tY(t,e,n,s){const{x:r,y:i,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:f}=pT(e),p={x:r,y:i},m={x:o,y:a},x=x2(p,n,m,0),v=x2(p,n,m,1)-lt,g=px(p,n,m,d/s),b=px(p,n,m,1-f/s),w=new Path2D;t.beginPath(),w.moveTo(g.x,g.y),w.quadraticCurveTo(n.x,n.y,b.x,b.y),t.shadowColor=l.borderShadowColor,t.stroke(w),e.path=w,e.ctx=t,k2(t,g,{angle:x,adjust:d},c),k2(t,b,{angle:v,adjust:f},u)}class Ku extends xn{inRange(e,n,s,r){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y")return nY({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),i,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],r),d=s==="y"?{start:l,end:u}:{start:a,end:c},f=Ao({x:e,y:n},this.getCenterPoint(r),Xt(-i));return f[s]>=d.start-o-Ji&&f[s]<=d.end+o+Ji}getCenterPoint(e){return Ro(this,e)}draw(e){const{width:n,height:s,centerX:r,centerY:i,options:o}=this;e.save(),$0(e,this.getCenterPoint(),o.rotation),Tl(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=Ar(e,o);e.ellipse(r,i,s/2,n/2,lt/2,0,2*lt),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return dT(e,n)}}Ku.id="ellipseAnnotation";Ku.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Ml.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ku.defaultRoutes={borderColor:"color",backgroundColor:"color"};Ku.descriptors={label:{_fallback:!0}};function nY(t,e,n,s){const{width:r,height:i,centerX:o,centerY:a}=e,l=r/2,c=i/2;if(l<=0||c<=0)return!1;const u=Xt(n||0),d=Math.cos(u),f=Math.sin(u),p=Math.pow(d*(t.x-o)+f*(t.y-a),2),m=Math.pow(f*(t.x-o)-d*(t.y-a),2);return p/Math.pow(l+s,2)+m/Math.pow(c+s,2)<=1.0001}class W0 extends xn{inRange(e,n,s,r){const{x:i,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return s!=="x"&&s!=="y"?XH({x:e,y:n},this.getCenterPoint(r),c/2,u):GP(s==="y"?{start:o,end:l,value:n}:{start:i,end:a,value:e},u)}getCenterPoint(e){return Ro(this,e)}draw(e){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,Tl(e,n);const r=Ar(e,n);rV(e,this,this.centerX,this.centerY),r&&!B0(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=s}resolveElementProperties(e,n){const s=uT(e,n);return s.initProperties=Pl(e,s,n),s}}W0.id="pointAnnotation";W0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};W0.defaultRoutes={borderColor:"color",backgroundColor:"color"};class H0 extends xn{inRange(e,n,s,r){if(s!=="x"&&s!=="y")return this.options.radius>=.1&&this.elements.length>1&&rY(this.elements,e,n,r);const i=Ao({x:e,y:n},this.getCenterPoint(r),Xt(-this.options.rotation)),o=this.elements.map(c=>s==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return i[s]>=a&&i[s]<=l}getCenterPoint(e){return Ro(this,e)}draw(e){const{elements:n,options:s}=this;e.save(),e.beginPath(),e.fillStyle=s.backgroundColor,Tl(e,s);const r=Ar(e,s);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),r&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const s=uT(e,n),{sides:r,rotation:i}=n,o=[],a=2*lt/r;let l=i*yy;for(let c=0;c<r;c++,l+=a){const u=sY(s,n,l);u.initProperties=Pl(e,s,n),o.push(u)}return s.elements=o,s}}H0.id="polygonAnnotation";H0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};H0.defaultRoutes={borderColor:"color",backgroundColor:"color"};function sY({centerX:t,centerY:e},{radius:n,borderWidth:s,hitTolerance:r},i){const o=(s+r)/2,a=Math.sin(i),l=Math.cos(i),c={x:t+a*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:t+a*(n+o),bY:e-l*(n+o)}}}function rY(t,e,n,s){let r=!1,i=t[t.length-1].getProps(["bX","bY"],s);for(const o of t){const a=o.getProps(["bX","bY"],s);a.bY>n!=i.bY>n&&e<(i.bX-a.bX)*(n-a.bY)/(i.bY-a.bY)+a.bX&&(r=!r),i=a}return r}const yi={box:Ml,doughnutLabel:U0,ellipse:Ku,label:Gu,line:qu,point:W0,polygon:H0};Object.keys(yi).forEach(t=>{Nt.describe(`elements.${yi[t].id}`,{_fallback:"plugins.annotation.common"})});const iY={update:Object.assign},oY=Oy.concat(Rf),_2=(t,e)=>Je(e)?bx(t,e):t,xx=t=>t==="color"||t==="font";function jy(t="line"){return yi[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function aY(t,e,n,s){const r=cY(t,n.animations,s),i=e.annotations,o=hY(e.elements,i);for(let a=0;a<i.length;a++){const l=i[a],c=gT(o,a,l.type),u=l.setContext(dY(t,c,o,l)),d=c.resolveElementProperties(t,u);d.skip=lY(d),"elements"in d&&(uY(c,d.elements,u,r),delete d.elements),Xn(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=mT(u),r.update(c,d)}}function lY(t){return isNaN(t.x)||isNaN(t.y)}function cY(t,e,n){return n==="reset"||n==="none"||n==="resize"?iY:new My(t,e)}function uY(t,e,n,s){const r=t.elements||(t.elements=[]);r.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],a=o.properties,l=gT(r,i,o.type,o.initProperties),c=n[o.optionScope].override(o);a.options=mT(c),s.update(l,a)}}function gT(t,e,n,s){const r=yi[jy(n)];let i=t[e];return(!i||!(i instanceof r))&&(i=t[e]=new r,Object.assign(i,s)),i}function mT(t){const e=yi[jy(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,bx(t,e.defaults),bx(t,e.defaultRoutes));for(const s of oY)n[s]=t[s];return n}function bx(t,e){const n={};for(const s of Object.keys(e)){const r=e[s],i=t[s];xx(s)&&Et(i)?n[s]=i.map(o=>_2(o,r)):n[s]=_2(i,r)}return n}function dY(t,e,n,s){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:s.id,type:"annotation"}))}function hY(t,e){const n=e.length,s=t.length;if(s<n){const r=n-s;t.splice(s,0,...new Array(r))}else s>n&&t.splice(n,s-n);return t}var fY="3.1.0";const qr=new Map,C2=t=>t.type!=="doughnutLabel",pY=Oy.concat(Rf);var gY={id:"annotation",version:fY,beforeRegister(){QH("chart.js","4.0",co.version)},afterRegister(){co.register(yi)},afterUnregister(){co.unregister(yi)},beforeInit(t){qr.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const s=qr.get(t),r=s.annotations=[];let i=n.annotations;Je(i)?Object.keys(i).forEach(o=>{const a=i[o];Je(a)&&(a.id=o,r.push(a))}):Et(i)&&r.push(...i),DV(r.filter(C2),t.scales)},afterDataLimits(t,e){const n=qr.get(t);IV(t,e.scale,n.annotations.filter(C2).filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(t,e,n){const s=qr.get(t);CV(t,s,n),aY(t,s,n,e.mode),s.visibleElements=s.elements.filter(r=>!r.skip&&r.options.display),MV(t,s,n)},beforeDatasetsDraw(t,e,n){sc(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){sc(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){sc(t,e.index,n.clip)},beforeDraw(t,e,n){sc(t,"beforeDraw",n.clip)},afterDraw(t,e,n){sc(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const s=qr.get(t);EV(s,e.event,n)&&(e.changed=!0)},afterDestroy(t){qr.delete(t)},getAnnotations(t){const e=qr.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return Dy(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!pY.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${yi[jy(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:xx,_fallback:!0},_indexable:xx}},additionalOptionScopes:[""]};function sc(t,e,n){const{ctx:s,chartArea:r}=t,i=qr.get(t);n&&A0(s,r);const o=mY(i.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)xY(s,r,i,a);n&&R0(s)}function mY(t,e){const n=[];for(const s of t)if(s.options.drawTime===e&&n.push({element:s,main:!0}),s.elements&&s.elements.length)for(const r of s.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function xY(t,e,n,s){const r=s.element;s.main?(d2(n,r,"beforeDraw"),r.draw(t,e),d2(n,r,"afterDraw")):r.draw(t,e)}co.register(ux,dx,Eh,wc,SH,IH,wH,gY);const bY=({minPrice:t,maxPrice:e,orders:n,pendingOrders:s=[],onAddOrder:r,onRemoveOrder:i,currentPrice:o,markPrice:a})=>{const l=S.useRef(null),[c,u]=S.useState(null),d=S.useMemo(()=>{const m=[...n,...s];return m.length>0?Math.max(...m.map(x=>x.amount),.1):.1},[n,s]),f=S.useMemo(()=>{const m=n.map(v=>({x:v.amount,y:v.price,id:v.id,side:v.side,isPending:!1})),x=s.map(v=>({x:v.amount,y:v.price,id:v.id,side:v.side,isPending:!0}));return{datasets:[{label:"Long Orders",data:m.filter(v=>{const g=n.find(b=>b.id===v.id);return(g==null?void 0:g.side)==="long"||(g==null?void 0:g.side)==="buy"||!(g!=null&&g.side)}),backgroundColor:"rgba(77, 171, 247, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Short Orders",data:m.filter(v=>{const g=n.find(b=>b.id===v.id);return(g==null?void 0:g.side)==="short"||(g==null?void 0:g.side)==="sell"}),backgroundColor:"rgba(255, 152, 0, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Pending Long",data:x.filter(v=>{const g=s.find(b=>b.id===v.id);return(g==null?void 0:g.side)==="long"||(g==null?void 0:g.side)==="buy"}),backgroundColor:"rgba(40, 167, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10},{label:"Pending Short",data:x.filter(v=>{const g=s.find(b=>b.id===v.id);return(g==null?void 0:g.side)==="short"||(g==null?void 0:g.side)==="sell"}),backgroundColor:"rgba(220, 53, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10}]}},[n,s]),p=S.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,backgroundColor:"#1a1a1a",plugins:{legend:{display:!0,position:"top",labels:{color:"#fff",font:{size:12}}},tooltip:{enabled:!0,callbacks:{label:m=>{const x=m.raw,v=[...n,...s].find(g=>g.id===x.id);return v?[`Price: ${v.price.toFixed(2)} USDC`,`Amount: ${v.amount.toFixed(4)} BTC`,v.isPending?`Pending ${v.side==="long"||v.side==="buy"?"Long":"Short"}`:""].filter(Boolean):`Price: ${x.y.toFixed(2)}, Amount: ${x.x.toFixed(4)}`}}},annotation:{annotations:{...o!==null&&o>=t&&o<=e?{currentPriceLine:{type:"line",xMin:0,xMax:d,yMin:o,yMax:o,borderColor:"#00ff00",borderWidth:2,borderDash:[5,5],label:{display:!0,content:`Current: ${o.toLocaleString()}`,position:"end",backgroundColor:"rgba(0, 255, 0, 0.8)",color:"#000",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y"}}:{},...a!==null&&a>=t&&a<=e?{markPriceLine:{type:"line",xMin:0,xMax:d,yMin:a,yMax:a,borderColor:"#ff0000",borderWidth:2,label:{display:!0,content:`Mark Price: ${a.toLocaleString()}`,position:"start",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y",arrowHeads:{start:{enabled:!1,fill:!1,length:0,width:0},end:{enabled:!0,fill:!0,length:15,width:10,backgroundColor:"#ff0000",borderColor:"#ff0000",borderWidth:2}}}}:{}}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Amount (BTC)",color:"#fff",font:{size:14,weight:"bold"}},min:0,max:d,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(m){return Number(m).toFixed(4)}},grid:{color:"#333"}},y:{type:"linear",title:{display:!0,text:"Price (USDC)",color:"#fff",font:{size:14,weight:"bold"}},min:t,max:e,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(m){return Number(m).toLocaleString()}},grid:{color:"#333"}}},onClick:(m,x)=>{if(!l.current)return;const v=l.current,g=v.canvas;if(!g)return;const b=g.getBoundingClientRect(),w=m.native;if(!w)return;const y=w.clientX-b.left,k=w.clientY-b.top,_=v.scales.x,E=v.scales.y,T=_.getValueForPixel(y),D=E.getValueForPixel(k);if(T==null||D===null||D===void 0)return;const A=[...n,...s].find(N=>{const $=_.getPixelForValue(N.amount),W=E.getPixelForValue(N.price);return Math.sqrt(Math.pow(y-$,2)+Math.pow(k-W,2))<=12});if(A)i(A.id);else{const N=Math.max(t,Math.min(e,D)),$=Math.max(.001,Math.min(1,T));r(N,$)}},onHover:(m,x)=>{if(!l.current)return;const v=l.current,g=v.canvas;if(!g)return;const b=g.getBoundingClientRect(),w=m.native;if(!w)return;const y=w.clientX-b.left,k=w.clientY-b.top,_=[...n,...s],E=v.scales.x,T=v.scales.y,D=_.find(C=>{const A=E.getPixelForValue(C.amount),N=T.getPixelForValue(C.price);return Math.sqrt(Math.pow(y-A,2)+Math.pow(k-N,2))<=10});u((D==null?void 0:D.id)||null)}}),[t,e,d,n,s,r,i,o,a]);return h.jsx("div",{className:"price-amount-chart-container",style:{height:"600px",position:"relative"},children:h.jsx("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #333",padding:"10px",height:"100%"},children:h.jsx(HH,{ref:l,data:f,options:p,style:{cursor:c?"pointer":"crosshair"}})})})},yY=({isOpen:t,onClose:e,minPrice:n,maxPrice:s,onMinPriceChange:r,onMaxPriceChange:i,markPrice:o,hasManualPriceChange:a,onResetToAuto:l,orderMode:c,onOrderModeChange:u,curveIntensity:d,onCurveIntensityChange:f,roundingStep:p,onRoundingStepChange:m})=>{const x=y=>Math.round(y/1.5/p)*p,v=y=>Math.round(y*1.5/p)*p;if(!t)return null;const g=o!=null&&o.mark_price?parseFloat(o.mark_price):null,b=g?x(g):null,w=g?v(g):null;return typeof document<"u"?Ti.createPortal(h.jsx("div",{className:"modal-overlay",onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:h.jsxs("div",{className:"modal-content",onClick:y=>y.stopPropagation(),style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:0,minWidth:"400px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[h.jsx("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:h.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:600,color:"rgba(255, 255, 255, 0.9)"},children:"Price Range Configuration"})}),h.jsx("div",{className:"modal-body",style:{padding:"2rem 1.5rem"},children:h.jsxs("div",{className:"trading-test-price-range-controls",children:[h.jsxs("div",{children:[h.jsxs("label",{children:["Rounding Step ($):",h.jsx("input",{type:"number",value:p,onChange:y=>m(Math.max(1,parseFloat(y.target.value)||100)),min:1,step:10,className:"trading-test-input"})]}),h.jsxs("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:["Prices will be rounded to the nearest $",p]})]}),h.jsxs("div",{children:[h.jsxs("label",{children:["Min Price (USDC):",h.jsx("input",{type:"number",value:n,onChange:y=>{r(parseFloat(y.target.value)||1e4)},min:1e3,max:s-1e3,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price / 1.5, rounded to $${p})`:""})]}),(o==null?void 0:o.mark_price)&&b!==null&&h.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?h.jsxs(h.Fragment,{children:["Manual override (Auto:"," ",g.toLocaleString()," / 1.5 ="," ",b.toLocaleString(),")"]}):h.jsxs(h.Fragment,{children:["Auto: ",g.toLocaleString()," / 1.5 ="," ",n.toLocaleString()]})})]}),h.jsxs("div",{children:[h.jsxs("label",{children:["Max Price (USDC):",h.jsx("input",{type:"number",value:s,onChange:y=>{i(parseFloat(y.target.value)||1e5)},min:n+1e3,max:1e6,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price  1.5, rounded to $${p})`:""})]}),(o==null?void 0:o.mark_price)&&w!==null&&h.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?h.jsxs(h.Fragment,{children:["Manual override (Auto:"," ",g.toLocaleString(),"  1.5 ="," ",w.toLocaleString(),")"]}):h.jsxs(h.Fragment,{children:["Auto: ",g.toLocaleString(),"  1.5 ="," ",s.toLocaleString()]})})]}),h.jsx("div",{children:h.jsxs("label",{children:["Order Mode:",h.jsxs("select",{value:c,onChange:y=>u(y.target.value),className:"trading-test-select",children:[h.jsx("option",{value:"random",children:"Random"}),h.jsx("option",{value:"curve",children:"Curve (Buy more at lower prices)"})]})]})}),c==="curve"&&h.jsx("div",{children:h.jsxs("label",{children:["Curve Intensity: ",d,h.jsx("input",{type:"range",value:d,onChange:y=>f(parseFloat(y.target.value)),min:1,max:5,step:.5,className:"trading-test-range"}),h.jsx("small",{children:"Higher = more aggressive buying at lower prices"})]})})]})}),h.jsxs("div",{className:"modal-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[a&&(o==null?void 0:o.mark_price)&&h.jsx("button",{onClick:l,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(77, 171, 247, 0.2)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Reset to Auto"}),h.jsx("div",{style:{display:"flex",gap:"1rem",marginLeft:"auto"},children:h.jsx("button",{onClick:e,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Close"})})]})]})}),document.body):null},wY=({onClick:t,disabled:e,orderMode:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-primary",style:{backgroundColor:e?"#ccc":"#007bff",cursor:e?"not-allowed":"pointer"},children:["Submit Test Orders (",n==="random"?"Random":"Curve-Based",")"]}),vY=({onClick:t,disabled:e,orderCount:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-success",style:{backgroundColor:e?"#ccc":"#28a745",cursor:e?"not-allowed":"pointer"},children:["Submit Chart Orders (",n," orders)"]}),SY=({onClick:t,disabled:e})=>h.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-secondary",style:{cursor:e?"not-allowed":"pointer"},children:"Reset Chart"}),kY=({onClick:t,disabled:e,pendingCount:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-info",style:{backgroundColor:e?"#ccc":"#17a2b8",cursor:e?"not-allowed":"pointer"},children:["Load Pending Orders ",n>0&&`(${n})`]}),Tg=({onClick:t,disabled:e,filter:n})=>{const s=n==="long"?"Cancel All Long":n==="short"?"Cancel All Short":"Cancel All Orders";return h.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-danger",style:{backgroundColor:e?"#ccc":"#dc3545",cursor:e?"not-allowed":"pointer"},children:s})};function _Y(){var _e,V,ne,H;const[t,e]=S.useState(Bu),[n,s]=S.useState(""),[r,i]=S.useState(""),[o,a]=S.useState(""),[l,c]=S.useState(1e4),[u,d]=S.useState(1e5),[f,p]=S.useState(null),[m,x]=S.useState("random"),[v,g]=S.useState(2),[b,w]=S.useState("long"),[y,k]=S.useState([]),[_,E]=S.useState([]),[T,D]=S.useState([]),[C,A]=S.useState(!1),[N,$]=S.useState(!1),[W,L]=S.useState(100),F=S.useRef(null),j=S.useRef(null),R=S.useRef(t),B=S.useRef(0),{markets:I,getSymbolByMarketId:G}=Io({baseURL:t,sessionToken:"",autoFetchMarkets:!0}),{mnemonic:O,walletAddress:P,authToken:Z,setMnemonic:Q}=vl(),Y=n?G(n):null,q=Y!==null?Y:void 0,{markPrice:J}=d0({baseURL:t,wsURL:h0,marketId:n||"",symbol:q}),[se,we]=S.useState(!1);S.useEffect(()=>{if(J!=null&&J.mark_price&&!se){const X=parseFloat(J.mark_price);if(!isNaN(X)&&X>1e3){const xe=Math.round(X*1.5/W)*W,K=Math.round(X/1.5/W)*W;K>0&&xe>K&&(c(K),d(xe))}}},[J==null?void 0:J.mark_price,se,W]),S.useEffect(()=>{O&&i(O),Z&&a(Z)},[O,Z]);const Ye=I.length>0?(((_e=I.find(X=>X.active))==null?void 0:_e.market_id)??I[0].market_id)||(((ne=(V=I.find(X=>X.active))==null?void 0:V.id)==null?void 0:ne.toString())??((H=I[0].id)==null?void 0:H.toString())??""):null;S.useEffect(()=>{Ye&&!n&&s(Ye)},[Ye]),S.useEffect(()=>{R.current=t},[t]),S.useEffect(()=>{r&&r.trim()!==""&&(F.current=new wl({baseURL:R.current,mnemonic:r}),F.current.initialize().catch(X=>{console.error("Failed to initialize ExchangeClient:",X)}))},[r,t]),S.useEffect(()=>{j.current=new pn({baseURL:R.current})},[t]),S.useEffect(()=>{if(!n||!j.current)return;const X=async()=>{try{const K=await j.current.getTicker(n);if(K!=null&&K.lastPrice){const de=typeof K.lastPrice=="string"?parseFloat(K.lastPrice):K.lastPrice;p(de)}}catch(K){console.error("Failed to fetch current price:",K)}};X();const xe=setInterval(X,5e3);return()=>clearInterval(xe)},[n]);const Ne=S.useCallback(X=>{const xe=[];for(let K=0;K<X;K++){const de=l+Math.random()*(u-l),be=.001+Math.random()*.01;xe.push({price:de,amount:be})}return xe.sort((K,de)=>K.price-de.price)},[l,u]),Le=S.useCallback(X=>{const xe=[],K=u-l;for(let de=0;de<X;de++){const be=Math.random(),oe=Math.pow(be,v),re=l+oe*K,Ce=.001+(u-re)/K*.02;xe.push({price:re,amount:Ce})}return xe.sort((de,be)=>de.price-be.price)},[l,u,v]),ze=S.useCallback(async()=>{if(!F.current||!n||!P){Te.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}A(!0);const X=[];try{const K=m==="random"?Ne(10):Le(10),de=Te.info("Submitting test orders",{description:`Submitting ${K.length} ${m} orders...`});B.current=typeof de=="number"?de:0;for(const oe of K){try{const he=ct("1"),Ce=await F.current.placeOrder({marketId:n,side:b==="long"?"buy":"sell",orderType:"LIMIT",price:oe.price,quantity:oe.amount,timeInForce:"GTC",leverage:he});X.push({success:!0,order:{price:oe.price,amount:oe.amount,orderId:Ce==null?void 0:Ce.order_id},timestamp:Date.now()})}catch(re){X.push({success:!1,order:{price:oe.price,amount:oe.amount},error:re.message,timestamp:Date.now()})}await new Promise(re=>setTimeout(re,200))}D(oe=>[...oe,...X]),B.current!==0&&(Te.dismiss(B.current),B.current=0);const be=X.filter(oe=>oe.success).length;Te.success("Test orders submitted",{description:`${be}/${X.length} orders placed successfully.`})}catch(xe){B.current!==0&&(Te.dismiss(B.current),B.current=0),Te.error("Test submission failed",{description:xe.message||"Unknown error occurred"})}finally{A(!1)}},[n,P,m,b,Ne,Le]),wt=S.useCallback(async()=>{if(!F.current||!n||!P){Te.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}if(y.length===0){Te.warning("No chart orders",{description:"Please add orders to the chart first."});return}A(!0);const X=[];try{const xe=Te.info("Submitting chart orders",{description:`Submitting ${y.length} chart orders...`});B.current=typeof xe=="number"?xe:0;for(const de of y){try{const oe=ct("1"),re=await F.current.placeOrder({marketId:n,side:de.side==="short"||de.side==="sell"?"sell":"buy",orderType:"LIMIT",price:de.price,quantity:de.amount,timeInForce:"GTC",leverage:oe});X.push({success:!0,order:{price:de.price,amount:de.amount,orderId:re==null?void 0:re.order_id},timestamp:Date.now()})}catch(be){X.push({success:!1,order:{price:de.price,amount:de.amount},error:be.message,timestamp:Date.now()})}await new Promise(be=>setTimeout(be,200))}D(de=>[...de,...X]),B.current!==0&&(Te.dismiss(B.current),B.current=0);const K=X.filter(de=>de.success).length;Te.success("Chart orders submitted",{description:`${K}/${X.length} orders placed successfully.`})}catch(xe){B.current!==0&&(Te.dismiss(B.current),B.current=0),Te.error("Chart order submission failed",{description:xe.message||"Unknown error occurred"})}finally{A(!1)}},[n,P,y]),M=S.useCallback(()=>{k([]),Te.info("Chart reset",{description:"All chart orders have been cleared."})},[]),ce=S.useCallback((X,xe)=>{const K={price:X,amount:xe,id:`chart-${Date.now()}-${Math.random()}`,side:b};k(de=>[...de,K])},[b]),me=S.useCallback(X=>{k(xe=>xe.filter(K=>K.id!==X)),E(xe=>xe.filter(K=>K.id!==X))},[]),Ie=S.useCallback(async()=>{if(!j.current||!P||!n){Te.error("Setup required",{description:"Please ensure wallet address and market ID are configured."});return}try{Te.info("Loading pending orders...");const X=await j.current.getOrders(P),xe=(X==null?void 0:X.orders)||[];console.log(X);const K=xe.filter(de=>{const be=de.market_id,oe=(de.status||"").toUpperCase();return be===n&&["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(oe)}).map(de=>{const re=(de.side||"").toUpperCase().includes("BUY")?"long":"short";return{price:ve(de.price),amount:ve(de.quantity),id:`pending-${de.order_id}`,side:re,orderId:de.order_id,isPending:!0}});E(K),Te.success("Pending orders loaded",{description:`Loaded ${K.length} pending orders.`})}catch(X){Te.error("Failed to load pending orders",{description:X.message||"Unknown error occurred"})}},[P,n]),pe=S.useCallback(async X=>{if(!F.current||!j.current||!n||!P){Te.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}try{const xe=await j.current.getOrders(P),de=((xe==null?void 0:xe.orders)||[]).filter(re=>{const he=re.market_id,Ce=(re.status||"").toUpperCase();if(he!==n||!["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(Ce))return!1;if(X==="all")return!0;const Fe=(re.side||"").toUpperCase(),He=Fe.includes("BUY"),Oe=Fe.includes("SELL");return X==="long"?He:X==="short"?Oe:!1});if(de.length===0){Te.info("No orders to cancel",{description:`No ${X} pending orders found.`});return}A(!0),Te.info("Canceling orders",{description:`Canceling ${de.length} ${X} orders...`});let be=0,oe=0;for(const re of de){try{const he=re.order_id;await F.current.cancelOrder({orderId:he,marketId:n}),be++}catch(he){oe++,console.error("Failed to cancel order:",he)}await new Promise(he=>setTimeout(he,100))}await Ie(),Te.success("Orders canceled",{description:`${be} orders canceled successfully${oe>0?`, ${oe} failed`:""}.`})}catch(xe){Te.error("Failed to cancel orders",{description:xe.message||"Unknown error occurred"})}finally{A(!1)}},[n,P,Ie]);return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"Trading Test Page"}),h.jsx("p",{children:"Advanced trading test with price range, interactive chart, and multiple submission modes"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"trading-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:X=>e(X.target.value),className:"trading-test-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:X=>s(X.target.value),className:"trading-test-select",children:I.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),I.map(X=>{var de;const xe=X.market_id??((de=X.id)==null?void 0:de.toString())??"",K=X.moniker?X.moniker:X.symbol?X.symbol:`Market ID: ${xe}`;return h.jsx("option",{value:xe,children:K},xe)})]})})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic:",h.jsx("input",{type:"text",value:r,onChange:X=>{i(X.target.value),Q(X.target.value)},placeholder:"Enter mnemonic",className:"trading-test-input"})]})}),f&&h.jsxs("div",{className:"trading-test-price-display",children:[h.jsx("strong",{children:"Current Price:"})," ",f.toLocaleString()," ","USDC"]})]})]}),h.jsxs("div",{className:"trading-test-tabs",children:[h.jsx("button",{className:`trading-test-tab ${b==="long"?"active":""}`,onClick:()=>w("long"),children:"Long (Buy)"}),h.jsx("button",{className:`trading-test-tab ${b==="short"?"active":""}`,onClick:()=>w("short"),children:"Short (Sell)"})]}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Interactive Price-Amount Chart"}),h.jsx("div",{className:"trading-test-chart-controls",children:h.jsxs("div",{className:"trading-test-chart-info",children:[h.jsxs("span",{children:["Orders on chart: ",y.length]}),h.jsxs("span",{onClick:()=>$(!0),style:{cursor:"pointer",textDecoration:"underline"},title:"Click to configure price range",children:["Price range: ",l.toLocaleString()," -"," ",u.toLocaleString()," USDC"]})]})}),h.jsx(bY,{minPrice:l,maxPrice:u,orders:y,pendingOrders:_,onAddOrder:ce,onRemoveOrder:me,currentPrice:f,markPrice:J!=null&&J.mark_price?parseFloat(J.mark_price):null}),h.jsxs("div",{className:"price-amount-chart-instructions",children:[h.jsx("p",{children:"Click on the chart to add orders. Click on existing orders to remove them."}),h.jsx("p",{children:"Y-axis: Price (USDC) | X-axis: Amount (BTC)"})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Order Submission"}),h.jsxs("div",{className:"trading-test-submission-buttons",children:[h.jsx(SY,{onClick:M,disabled:y.length===0}),h.jsx(wY,{onClick:ze,disabled:C||!n||!P,orderMode:m}),h.jsx(vY,{onClick:wt,disabled:C||y.length===0||!n||!P,orderCount:y.length})]}),h.jsx("h2",{children:"Pending Orders Management"}),h.jsxs("div",{className:"trading-test-pending-orders-controls",children:[h.jsx(kY,{onClick:Ie,disabled:!n||!P,pendingCount:_.length}),h.jsxs("div",{className:"trading-test-cancel-buttons",children:[h.jsx(Tg,{onClick:()=>pe("long"),disabled:C||!n||!P,filter:"long"}),h.jsx(Tg,{onClick:()=>pe("short"),disabled:C||!n||!P,filter:"short"}),h.jsx(Tg,{onClick:()=>pe("all"),disabled:C||!n||!P,filter:"all"})]})]})]}),T.length>0&&h.jsxs("div",{className:"trading-test-results",children:[h.jsx("h2",{children:"Test Results"}),h.jsxs("div",{className:"trading-test-results-summary",children:[h.jsxs("div",{children:["Total: ",T.length," | Success:"," ",T.filter(X=>X.success).length," | Failed:"," ",T.filter(X=>!X.success).length]}),h.jsx("button",{onClick:()=>D([]),className:"trading-test-button-secondary",children:"Clear Results"})]}),h.jsx("div",{className:"trading-test-results-list",children:T.slice(-20).map((X,xe)=>h.jsx("div",{className:`trading-test-result-item ${X.success?"success":"error"}`,children:h.jsxs("div",{children:[h.jsxs("strong",{children:[X.success?"":""," Order @"," ",X.order.price.toFixed(2)," USDC"]}),h.jsxs("span",{children:["Amount: ",X.order.amount.toFixed(4)," BTC"]}),X.order.orderId&&h.jsxs("span",{children:["Order ID: ",X.order.orderId.substring(0,16),"..."]}),X.error&&h.jsx("span",{className:"error-text",children:X.error})]})},xe))})]}),h.jsx(yY,{isOpen:N,onClose:()=>$(!1),minPrice:l,maxPrice:u,onMinPriceChange:X=>{c(X),we(!0)},onMaxPriceChange:X=>{d(X),we(!0)},markPrice:J,hasManualPriceChange:se,onResetToAuto:()=>{if(J!=null&&J.mark_price){const X=parseFloat(J.mark_price);if(!isNaN(X)&&X>1e3){we(!1);const xe=Math.round(X*1.5/W)*W,K=Math.round(X/1.5/W)*W;K>0&&xe>K&&(c(K),d(xe))}}},orderMode:m,onOrderModeChange:x,curveIntensity:v,onCurveIntensityChange:g,roundingStep:W,onRoundingStepChange:L})]})}const CY=S.createContext(void 0),rc="onboard_mnemonic",ic="onboard_wallet_address",EY=({children:t})=>{const[e,n]=S.useState(null),[s,r]=S.useState(null);S.useEffect(()=>{const l=localStorage.getItem(ic),c=localStorage.getItem(rc),u=localStorage.getItem("generatedAddress"),d=localStorage.getItem("mnemonic");l&&c?(n(l),r(c)):u&&d&&(n(u),r(d),localStorage.setItem(ic,u),localStorage.setItem(rc,d),localStorage.removeItem("generatedAddress"),localStorage.removeItem("mnemonic"))},[]),S.useEffect(()=>{const l=c=>{c.key===ic?n(c.newValue):c.key===rc&&r(c.newValue)};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const i=S.useCallback((l,c)=>{n(l),r(c),localStorage.setItem(ic,l),localStorage.setItem(rc,c)},[]),o=S.useCallback(()=>{n(null),r(null),localStorage.removeItem(ic),localStorage.removeItem(rc)},[]),a=S.useMemo(()=>({generatedAddress:e,mnemonic:s,setGeneratedData:i,clearGeneratedData:o}),[e,s,i,o]);return h.jsx(CY.Provider,{value:a,children:t})};function PY(){const{wasmStatus:t,isReady:e}=DD(),[n,s]=S.useState("main");return S.useEffect(()=>{const r=()=>{s("websocket-test")};return window.addEventListener("navigateToWebSocketTest",r),()=>{window.removeEventListener("navigateToWebSocketTest",r)}},[]),h.jsxs(EY,{children:[h.jsxs("div",{className:"App",children:[h.jsxs("header",{className:"App-header",children:[h.jsx("h1",{children:"Morm SDK"}),h.jsx("p",{children:"Test WebAssembly integration for morm_signer with Agent Delegation"}),h.jsxs("nav",{style:{marginTop:"1rem",display:"flex",gap:"1rem"},children:[h.jsx("button",{onClick:()=>s("main"),style:{padding:"0.5rem 1rem",backgroundColor:n==="main"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Morm Signer"}),h.jsx("button",{onClick:()=>s("sdk-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="sdk-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"SDK Trade API"}),h.jsx("button",{onClick:()=>s("websocket-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="websocket-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"WebSocket Test"}),h.jsx("button",{onClick:()=>s("hooks-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="hooks-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Hooks Test"}),h.jsx("button",{onClick:()=>s("layout-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="layout-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Layout Test"}),h.jsx("button",{onClick:()=>s("trading-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="trading-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Trading Test"})]})]}),h.jsx("main",{className:"App-main",children:n==="sdk-test"?h.jsx(yA,{}):n==="websocket-test"?h.jsx(OO,{}):n==="layout-test"?h.jsx(TL,{}):n==="hooks-test"?h.jsx(z$,{}):n==="trading-test"?h.jsx(_Y,{}):h.jsxs(h.Fragment,{children:[h.jsx(cA,{status:t}),e&&h.jsxs("div",{className:"App-content",children:[h.jsx("div",{className:"App-section",children:h.jsx(iA,{})}),h.jsx("div",{className:"App-section",children:h.jsx(oA,{})}),h.jsx("div",{className:"App-section",children:h.jsx(aA,{})}),h.jsx("div",{className:"App-section",children:h.jsx(lA,{})})]}),t.error&&h.jsxs("div",{className:"App-error",children:[h.jsx("h3",{children:"Error Loading WASM"}),h.jsx("p",{children:t.error}),h.jsx("p",{children:"Make sure the morm_signer.wasm file is available in the public directory."})]})]})})]}),h.jsx(mL,{position:"bottom-right",toastOptions:{duration:4e3,style:{color:"var(--foreground)",border:"1px solid var(--border)"}}})]})}const TY=Mg.createRoot(document.getElementById("root"));TY.render(h.jsx(le.StrictMode,{children:h.jsx(PY,{})}));
//# sourceMappingURL=index-BV2aScRW.js.map
