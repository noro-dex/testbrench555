var jD=Object.defineProperty;var U1=t=>{throw TypeError(t)};var LD=(t,e,n)=>e in t?jD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ce=(t,e,n)=>LD(t,typeof e!="symbol"?e+"":e,n),eg=(t,e,n)=>e.has(t)||U1("Cannot "+n);var K=(t,e,n)=>(eg(t,e,"read from private field"),n?n.call(t):e.get(t)),Me=(t,e,n)=>e.has(t)?U1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ue=(t,e,n,s)=>(eg(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),nt=(t,e,n)=>(eg(t,e,"access private method"),n);var Ih=(t,e,n,s)=>({set _(r){ue(t,e,r,n)},get _(){return K(t,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Qy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function FD(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var tP={exports:{}},B0={},nP={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih=Symbol.for("react.element"),$D=Symbol.for("react.portal"),BD=Symbol.for("react.fragment"),zD=Symbol.for("react.strict_mode"),UD=Symbol.for("react.profiler"),WD=Symbol.for("react.provider"),HD=Symbol.for("react.context"),VD=Symbol.for("react.forward_ref"),qD=Symbol.for("react.suspense"),YD=Symbol.for("react.memo"),GD=Symbol.for("react.lazy"),W1=Symbol.iterator;function KD(t){return t===null||typeof t!="object"?null:(t=W1&&t[W1]||t["@@iterator"],typeof t=="function"?t:null)}var sP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rP=Object.assign,iP={};function yc(t,e,n){this.props=t,this.context=e,this.refs=iP,this.updater=n||sP}yc.prototype.isReactComponent={};yc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function oP(){}oP.prototype=yc.prototype;function Jy(t,e,n){this.props=t,this.context=e,this.refs=iP,this.updater=n||sP}var Zy=Jy.prototype=new oP;Zy.constructor=Jy;rP(Zy,yc.prototype);Zy.isPureReactComponent=!0;var H1=Array.isArray,aP=Object.prototype.hasOwnProperty,ew={current:null},lP={key:!0,ref:!0,__self:!0,__source:!0};function cP(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)aP.call(e,s)&&!lP.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:ih,type:t,key:i,ref:o,props:r,_owner:ew.current}}function XD(t,e){return{$$typeof:ih,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tw(t){return typeof t=="object"&&t!==null&&t.$$typeof===ih}function QD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var V1=/\/+/g;function tg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QD(""+t.key):e.toString(36)}function Vf(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ih:case $D:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+tg(o,0):s,H1(r)?(n="",t!=null&&(n=t.replace(V1,"$&/")+"/"),Vf(r,e,n,"",function(c){return c})):r!=null&&(tw(r)&&(r=XD(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(V1,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",H1(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+tg(i,a);o+=Vf(i,e,n,l,r)}else if(l=KD(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+tg(i,a++),o+=Vf(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nh(t,e,n){if(t==null)return t;var s=[],r=0;return Vf(t,s,"","",function(i){return e.call(n,i,r++)}),s}function JD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var In={current:null},qf={transition:null},ZD={ReactCurrentDispatcher:In,ReactCurrentBatchConfig:qf,ReactCurrentOwner:ew};function uP(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:Nh,forEach:function(t,e,n){Nh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nh(t,function(){e++}),e},toArray:function(t){return Nh(t,function(e){return e})||[]},only:function(t){if(!tw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};et.Component=yc;et.Fragment=BD;et.Profiler=UD;et.PureComponent=Jy;et.StrictMode=zD;et.Suspense=qD;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZD;et.act=uP;et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=rP({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ew.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)aP.call(e,l)&&!lP.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:ih,type:t.type,key:r,ref:i,props:s,_owner:o}};et.createContext=function(t){return t={$$typeof:HD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:WD,_context:t},t.Consumer=t};et.createElement=cP;et.createFactory=function(t){var e=cP.bind(null,t);return e.type=t,e};et.createRef=function(){return{current:null}};et.forwardRef=function(t){return{$$typeof:VD,render:t}};et.isValidElement=tw;et.lazy=function(t){return{$$typeof:GD,_payload:{_status:-1,_result:t},_init:JD}};et.memo=function(t,e){return{$$typeof:YD,type:t,compare:e===void 0?null:e}};et.startTransition=function(t){var e=qf.transition;qf.transition={};try{t()}finally{qf.transition=e}};et.unstable_act=uP;et.useCallback=function(t,e){return In.current.useCallback(t,e)};et.useContext=function(t){return In.current.useContext(t)};et.useDebugValue=function(){};et.useDeferredValue=function(t){return In.current.useDeferredValue(t)};et.useEffect=function(t,e){return In.current.useEffect(t,e)};et.useId=function(){return In.current.useId()};et.useImperativeHandle=function(t,e,n){return In.current.useImperativeHandle(t,e,n)};et.useInsertionEffect=function(t,e){return In.current.useInsertionEffect(t,e)};et.useLayoutEffect=function(t,e){return In.current.useLayoutEffect(t,e)};et.useMemo=function(t,e){return In.current.useMemo(t,e)};et.useReducer=function(t,e,n){return In.current.useReducer(t,e,n)};et.useRef=function(t){return In.current.useRef(t)};et.useState=function(t){return In.current.useState(t)};et.useSyncExternalStore=function(t,e,n){return In.current.useSyncExternalStore(t,e,n)};et.useTransition=function(){return In.current.useTransition()};et.version="18.3.1";nP.exports=et;var k=nP.exports;const fe=Qy(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e4=k,t4=Symbol.for("react.element"),n4=Symbol.for("react.fragment"),s4=Object.prototype.hasOwnProperty,r4=e4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i4={key:!0,ref:!0,__self:!0,__source:!0};function dP(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)s4.call(e,s)&&!i4.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:t4,type:t,key:i,ref:o,props:r,_owner:r4.current}}B0.Fragment=n4;B0.jsx=dP;B0.jsxs=dP;tP.exports=B0;var h=tP.exports,Vb={},hP={exports:{}},is={},fP={exports:{}},pP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,$){var D=F.length;F.push($);e:for(;0<D;){var z=D-1>>>1,R=F[z];if(0<r(R,$))F[z]=$,F[D]=R,D=z;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var $=F[0],D=F.pop();if(D!==$){F[0]=D;e:for(var z=0,R=F.length,T=R>>>1;z<T;){var X=2*(z+1)-1,ne=F[X],q=X+1,Z=F[q];if(0>r(ne,D))q<R&&0>r(Z,ne)?(F[z]=Z,F[q]=D,z=q):(F[z]=ne,F[X]=D,z=X);else if(q<R&&0>r(Z,D))F[z]=Z,F[q]=D,z=q;else break e}}return $}function r(F,$){var D=F.sortIndex-$.sortIndex;return D!==0?D:F.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,m=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(F){for(var $=n(c);$!==null;){if($.callback===null)s(c);else if($.startTime<=F)s(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function w(F){if(b=!1,S(F),!m)if(n(l)!==null)m=!0,L(v);else{var $=n(c);$!==null&&B(w,$.startTime-F)}}function v(F,$){m=!1,b&&(b=!1,g(P),P=-1),p=!0;var D=f;try{for(S($),d=n(l);d!==null&&(!(d.expirationTime>$)||F&&!I());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var R=z(d.expirationTime<=$);$=t.unstable_now(),typeof R=="function"?d.callback=R:d===n(l)&&s(l),S($)}else s(l);d=n(l)}if(d!==null)var T=!0;else{var X=n(c);X!==null&&B(w,X.startTime-$),T=!1}return T}finally{d=null,f=D,p=!1}}var C=!1,_=null,P=-1,M=5,E=-1;function I(){return!(t.unstable_now()-E<M)}function O(){if(_!==null){var F=t.unstable_now();E=F;var $=!0;try{$=_(!0,F)}finally{$?j():(C=!1,_=null)}}else C=!1}var j;if(typeof y=="function")j=function(){y(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,A=U.port2;U.port1.onmessage=O,j=function(){A.postMessage(null)}}else j=function(){x(O,0)};function L(F){_=F,C||(C=!0,j())}function B(F,$){P=x(function(){F(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,L(v))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var D=f;f=$;try{return F()}finally{f=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,$){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var D=f;f=F;try{return $()}finally{f=D}},t.unstable_scheduleCallback=function(F,$,D){var z=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,F){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=D+R,F={id:u++,callback:$,priorityLevel:F,startTime:D,expirationTime:R,sortIndex:-1},D>z?(F.sortIndex=D,e(c,F),n(l)===null&&F===n(c)&&(b?(g(P),P=-1):b=!0,B(w,D-z))):(F.sortIndex=R,e(l,F),m||p||(m=!0,L(v))),F},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(F){var $=f;return function(){var D=f;f=$;try{return F.apply(this,arguments)}finally{f=D}}}})(pP);fP.exports=pP;var o4=fP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a4=k,ss=o4;function xe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mP=new Set,Zu={};function ba(t,e){Wl(t,e),Wl(t+"Capture",e)}function Wl(t,e){for(Zu[t]=e,t=0;t<e.length;t++)mP.add(e[t])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qb=Object.prototype.hasOwnProperty,l4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q1={},Y1={};function c4(t){return qb.call(Y1,t)?!0:qb.call(q1,t)?!1:l4.test(t)?Y1[t]=!0:(q1[t]=!0,!1)}function u4(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function d4(t,e,n,s){if(e===null||typeof e>"u"||u4(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dn[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dn[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dn[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dn[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dn[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dn[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dn[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dn[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dn[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var nw=/[\-:]([a-z])/g;function sw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nw,sw);dn[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nw,sw);dn[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nw,sw);dn[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});dn.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function rw(t,e,n,s){var r=dn.hasOwnProperty(e)?dn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(d4(e,n,r,s)&&(n=null),s||r===null?c4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var ni=a4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dh=Symbol.for("react.element"),La=Symbol.for("react.portal"),Fa=Symbol.for("react.fragment"),iw=Symbol.for("react.strict_mode"),Yb=Symbol.for("react.profiler"),gP=Symbol.for("react.provider"),bP=Symbol.for("react.context"),ow=Symbol.for("react.forward_ref"),Gb=Symbol.for("react.suspense"),Kb=Symbol.for("react.suspense_list"),aw=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),xP=Symbol.for("react.offscreen"),G1=Symbol.iterator;function Rc(t){return t===null||typeof t!="object"?null:(t=G1&&t[G1]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,ng;function fu(t){if(ng===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ng=e&&e[1]||""}return`
`+ng+t}var sg=!1;function rg(t,e){if(!t||sg)return"";sg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{sg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fu(t):""}function h4(t){switch(t.tag){case 5:return fu(t.type);case 16:return fu("Lazy");case 13:return fu("Suspense");case 19:return fu("SuspenseList");case 0:case 2:case 15:return t=rg(t.type,!1),t;case 11:return t=rg(t.type.render,!1),t;case 1:return t=rg(t.type,!0),t;default:return""}}function Xb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fa:return"Fragment";case La:return"Portal";case Yb:return"Profiler";case iw:return"StrictMode";case Gb:return"Suspense";case Kb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bP:return(t.displayName||"Context")+".Consumer";case gP:return(t._context.displayName||"Context")+".Provider";case ow:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case aw:return e=t.displayName||null,e!==null?e:Xb(t.type)||"Memo";case xi:e=t._payload,t=t._init;try{return Xb(t(e))}catch{}}return null}function f4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xb(e);case 8:return e===iw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p4(t){var e=yP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ah(t){t._valueTracker||(t._valueTracker=p4(t))}function wP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=yP(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function _p(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qb(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function K1(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Qi(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vP(t,e){e=e.checked,e!=null&&rw(t,"checked",e,!1)}function Jb(t,e){vP(t,e);var n=Qi(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zb(t,e.type,Qi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function X1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zb(t,e,n){(e!=="number"||_p(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pu=Array.isArray;function tl(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Qi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ex(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(xe(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Q1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(xe(92));if(pu(n)){if(1<n.length)throw Error(xe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qi(n)}}function SP(t,e){var n=Qi(e.value),s=Qi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function J1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oh,CP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oh=Oh||document.createElement("div"),Oh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ed(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Nu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m4=["Webkit","ms","Moz","O"];Object.keys(Nu).forEach(function(t){m4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nu[e]=Nu[t]})});function _P(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Nu.hasOwnProperty(t)&&Nu[t]?(""+e).trim():e+"px"}function EP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=_P(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var g4=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nx(t,e){if(e){if(g4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(xe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(xe(62))}}function sx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rx=null;function lw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ix=null,nl=null,sl=null;function Z1(t){if(t=lh(t)){if(typeof ix!="function")throw Error(xe(280));var e=t.stateNode;e&&(e=V0(e),ix(t.stateNode,t.type,e))}}function PP(t){nl?sl?sl.push(t):sl=[t]:nl=t}function TP(){if(nl){var t=nl,e=sl;if(sl=nl=null,Z1(t),e)for(t=0;t<e.length;t++)Z1(e[t])}}function MP(t,e){return t(e)}function IP(){}var ig=!1;function NP(t,e,n){if(ig)return t(e,n);ig=!0;try{return MP(t,e,n)}finally{ig=!1,(nl!==null||sl!==null)&&(IP(),TP())}}function td(t,e){var n=t.stateNode;if(n===null)return null;var s=V0(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(xe(231,e,typeof n));return n}var ox=!1;if(Xr)try{var jc={};Object.defineProperty(jc,"passive",{get:function(){ox=!0}}),window.addEventListener("test",jc,jc),window.removeEventListener("test",jc,jc)}catch{ox=!1}function b4(t,e,n,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Du=!1,Ep=null,Pp=!1,ax=null,x4={onError:function(t){Du=!0,Ep=t}};function y4(t,e,n,s,r,i,o,a,l){Du=!1,Ep=null,b4.apply(x4,arguments)}function w4(t,e,n,s,r,i,o,a,l){if(y4.apply(this,arguments),Du){if(Du){var c=Ep;Du=!1,Ep=null}else throw Error(xe(198));Pp||(Pp=!0,ax=c)}}function xa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eS(t){if(xa(t)!==t)throw Error(xe(188))}function v4(t){var e=t.alternate;if(!e){if(e=xa(t),e===null)throw Error(xe(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return eS(r),t;if(i===s)return eS(r),e;i=i.sibling}throw Error(xe(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(xe(189))}}if(n.alternate!==s)throw Error(xe(190))}if(n.tag!==3)throw Error(xe(188));return n.stateNode.current===n?t:e}function AP(t){return t=v4(t),t!==null?OP(t):null}function OP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OP(t);if(e!==null)return e;t=t.sibling}return null}var RP=ss.unstable_scheduleCallback,tS=ss.unstable_cancelCallback,S4=ss.unstable_shouldYield,k4=ss.unstable_requestPaint,Ft=ss.unstable_now,C4=ss.unstable_getCurrentPriorityLevel,cw=ss.unstable_ImmediatePriority,jP=ss.unstable_UserBlockingPriority,Tp=ss.unstable_NormalPriority,_4=ss.unstable_LowPriority,LP=ss.unstable_IdlePriority,z0=null,pr=null;function E4(t){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(z0,t,void 0,(t.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:M4,P4=Math.log,T4=Math.LN2;function M4(t){return t>>>=0,t===0?32:31-(P4(t)/T4|0)|0}var Rh=64,jh=4194304;function mu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mp(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=mu(a):(i&=o,i!==0&&(s=mu(i)))}else o=n&~r,o!==0?s=mu(o):i!==0&&(s=mu(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Ws(e),r=1<<n,s|=t[n],e&=~r;return s}function I4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N4(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ws(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=I4(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function lx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function FP(){var t=Rh;return Rh<<=1,!(Rh&4194240)&&(Rh=64),t}function og(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ws(e),t[e]=n}function D4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ws(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function uw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Ws(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var pt=0;function $P(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var BP,dw,zP,UP,WP,cx=!1,Lh=[],$i=null,Bi=null,zi=null,nd=new Map,sd=new Map,wi=[],A4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nS(t,e){switch(t){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":nd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sd.delete(e.pointerId)}}function Lc(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=lh(e),e!==null&&dw(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function O4(t,e,n,s,r){switch(e){case"focusin":return $i=Lc($i,t,e,n,s,r),!0;case"dragenter":return Bi=Lc(Bi,t,e,n,s,r),!0;case"mouseover":return zi=Lc(zi,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return nd.set(i,Lc(nd.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,sd.set(i,Lc(sd.get(i)||null,t,e,n,s,r)),!0}return!1}function HP(t){var e=Po(t.target);if(e!==null){var n=xa(e);if(n!==null){if(e=n.tag,e===13){if(e=DP(n),e!==null){t.blockedOn=e,WP(t.priority,function(){zP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ux(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);rx=s,n.target.dispatchEvent(s),rx=null}else return e=lh(n),e!==null&&dw(e),t.blockedOn=n,!1;e.shift()}return!0}function sS(t,e,n){Yf(t)&&n.delete(e)}function R4(){cx=!1,$i!==null&&Yf($i)&&($i=null),Bi!==null&&Yf(Bi)&&(Bi=null),zi!==null&&Yf(zi)&&(zi=null),nd.forEach(sS),sd.forEach(sS)}function Fc(t,e){t.blockedOn===e&&(t.blockedOn=null,cx||(cx=!0,ss.unstable_scheduleCallback(ss.unstable_NormalPriority,R4)))}function rd(t){function e(r){return Fc(r,t)}if(0<Lh.length){Fc(Lh[0],t);for(var n=1;n<Lh.length;n++){var s=Lh[n];s.blockedOn===t&&(s.blockedOn=null)}}for($i!==null&&Fc($i,t),Bi!==null&&Fc(Bi,t),zi!==null&&Fc(zi,t),nd.forEach(e),sd.forEach(e),n=0;n<wi.length;n++)s=wi[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<wi.length&&(n=wi[0],n.blockedOn===null);)HP(n),n.blockedOn===null&&wi.shift()}var rl=ni.ReactCurrentBatchConfig,Ip=!0;function j4(t,e,n,s){var r=pt,i=rl.transition;rl.transition=null;try{pt=1,hw(t,e,n,s)}finally{pt=r,rl.transition=i}}function L4(t,e,n,s){var r=pt,i=rl.transition;rl.transition=null;try{pt=4,hw(t,e,n,s)}finally{pt=r,rl.transition=i}}function hw(t,e,n,s){if(Ip){var r=ux(t,e,n,s);if(r===null)gg(t,e,s,Np,n),nS(t,s);else if(O4(r,t,e,n,s))s.stopPropagation();else if(nS(t,s),e&4&&-1<A4.indexOf(t)){for(;r!==null;){var i=lh(r);if(i!==null&&BP(i),i=ux(t,e,n,s),i===null&&gg(t,e,s,Np,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else gg(t,e,s,null,n)}}var Np=null;function ux(t,e,n,s){if(Np=null,t=lw(s),t=Po(t),t!==null)if(e=xa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Np=t,null}function VP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C4()){case cw:return 1;case jP:return 4;case Tp:case _4:return 16;case LP:return 536870912;default:return 16}default:return 16}}var Ai=null,fw=null,Gf=null;function qP(){if(Gf)return Gf;var t,e=fw,n=e.length,s,r="value"in Ai?Ai.value:Ai.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return Gf=r.slice(t,1<s?1-s:void 0)}function Kf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fh(){return!0}function rS(){return!1}function os(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fh:rS,this.isPropagationStopped=rS,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fh)},persist:function(){},isPersistent:Fh}),e}var wc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pw=os(wc),ah=It({},wc,{view:0,detail:0}),F4=os(ah),ag,lg,$c,U0=It({},ah,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$c&&($c&&t.type==="mousemove"?(ag=t.screenX-$c.screenX,lg=t.screenY-$c.screenY):lg=ag=0,$c=t),ag)},movementY:function(t){return"movementY"in t?t.movementY:lg}}),iS=os(U0),$4=It({},U0,{dataTransfer:0}),B4=os($4),z4=It({},ah,{relatedTarget:0}),cg=os(z4),U4=It({},wc,{animationName:0,elapsedTime:0,pseudoElement:0}),W4=os(U4),H4=It({},wc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),V4=os(H4),q4=It({},wc,{data:0}),oS=os(q4),Y4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=K4[t])?!!e[t]:!1}function mw(){return X4}var Q4=It({},ah,{key:function(t){if(t.key){var e=Y4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?G4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mw,charCode:function(t){return t.type==="keypress"?Kf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),J4=os(Q4),Z4=It({},U0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aS=os(Z4),eA=It({},ah,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mw}),tA=os(eA),nA=It({},wc,{propertyName:0,elapsedTime:0,pseudoElement:0}),sA=os(nA),rA=It({},U0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iA=os(rA),oA=[9,13,27,32],gw=Xr&&"CompositionEvent"in window,Au=null;Xr&&"documentMode"in document&&(Au=document.documentMode);var aA=Xr&&"TextEvent"in window&&!Au,YP=Xr&&(!gw||Au&&8<Au&&11>=Au),lS=" ",cS=!1;function GP(t,e){switch(t){case"keyup":return oA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $a=!1;function lA(t,e){switch(t){case"compositionend":return KP(e);case"keypress":return e.which!==32?null:(cS=!0,lS);case"textInput":return t=e.data,t===lS&&cS?null:t;default:return null}}function cA(t,e){if($a)return t==="compositionend"||!gw&&GP(t,e)?(t=qP(),Gf=fw=Ai=null,$a=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YP&&e.locale!=="ko"?null:e.data;default:return null}}var uA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uA[t.type]:e==="textarea"}function XP(t,e,n,s){PP(s),e=Dp(e,"onChange"),0<e.length&&(n=new pw("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Ou=null,id=null;function dA(t){a3(t,0)}function W0(t){var e=Ua(t);if(wP(e))return t}function hA(t,e){if(t==="change")return e}var QP=!1;if(Xr){var ug;if(Xr){var dg="oninput"in document;if(!dg){var dS=document.createElement("div");dS.setAttribute("oninput","return;"),dg=typeof dS.oninput=="function"}ug=dg}else ug=!1;QP=ug&&(!document.documentMode||9<document.documentMode)}function hS(){Ou&&(Ou.detachEvent("onpropertychange",JP),id=Ou=null)}function JP(t){if(t.propertyName==="value"&&W0(id)){var e=[];XP(e,id,t,lw(t)),NP(dA,e)}}function fA(t,e,n){t==="focusin"?(hS(),Ou=e,id=n,Ou.attachEvent("onpropertychange",JP)):t==="focusout"&&hS()}function pA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return W0(id)}function mA(t,e){if(t==="click")return W0(e)}function gA(t,e){if(t==="input"||t==="change")return W0(e)}function bA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vs=typeof Object.is=="function"?Object.is:bA;function od(t,e){if(Vs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!qb.call(e,r)||!Vs(t[r],e[r]))return!1}return!0}function fS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pS(t,e){var n=fS(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fS(n)}}function ZP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ZP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function e3(){for(var t=window,e=_p();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_p(t.document)}return e}function bw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xA(t){var e=e3(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ZP(n.ownerDocument.documentElement,n)){if(s!==null&&bw(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=pS(n,i);var o=pS(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yA=Xr&&"documentMode"in document&&11>=document.documentMode,Ba=null,dx=null,Ru=null,hx=!1;function mS(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hx||Ba==null||Ba!==_p(s)||(s=Ba,"selectionStart"in s&&bw(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ru&&od(Ru,s)||(Ru=s,s=Dp(dx,"onSelect"),0<s.length&&(e=new pw("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Ba)))}function $h(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var za={animationend:$h("Animation","AnimationEnd"),animationiteration:$h("Animation","AnimationIteration"),animationstart:$h("Animation","AnimationStart"),transitionend:$h("Transition","TransitionEnd")},hg={},t3={};Xr&&(t3=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function H0(t){if(hg[t])return hg[t];if(!za[t])return t;var e=za[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in t3)return hg[t]=e[n];return t}var n3=H0("animationend"),s3=H0("animationiteration"),r3=H0("animationstart"),i3=H0("transitionend"),o3=new Map,gS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function no(t,e){o3.set(t,e),ba(e,[t])}for(var fg=0;fg<gS.length;fg++){var pg=gS[fg],wA=pg.toLowerCase(),vA=pg[0].toUpperCase()+pg.slice(1);no(wA,"on"+vA)}no(n3,"onAnimationEnd");no(s3,"onAnimationIteration");no(r3,"onAnimationStart");no("dblclick","onDoubleClick");no("focusin","onFocus");no("focusout","onBlur");no(i3,"onTransitionEnd");Wl("onMouseEnter",["mouseout","mouseover"]);Wl("onMouseLeave",["mouseout","mouseover"]);Wl("onPointerEnter",["pointerout","pointerover"]);Wl("onPointerLeave",["pointerout","pointerover"]);ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SA=new Set("cancel close invalid load scroll toggle".split(" ").concat(gu));function bS(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,w4(s,e,void 0,t),t.currentTarget=null}function a3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;bS(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;bS(r,a,c),i=l}}}if(Pp)throw t=ax,Pp=!1,ax=null,t}function Ct(t,e){var n=e[bx];n===void 0&&(n=e[bx]=new Set);var s=t+"__bubble";n.has(s)||(l3(e,t,2,!1),n.add(s))}function mg(t,e,n){var s=0;e&&(s|=4),l3(n,t,s,e)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function ad(t){if(!t[Bh]){t[Bh]=!0,mP.forEach(function(n){n!=="selectionchange"&&(SA.has(n)||mg(n,!1,t),mg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bh]||(e[Bh]=!0,mg("selectionchange",!1,e))}}function l3(t,e,n,s){switch(VP(e)){case 1:var r=j4;break;case 4:r=L4;break;default:r=hw}n=r.bind(null,e,n,t),r=void 0,!ox||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function gg(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Po(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}NP(function(){var c=i,u=lw(n),d=[];e:{var f=o3.get(t);if(f!==void 0){var p=pw,m=t;switch(t){case"keypress":if(Kf(n)===0)break e;case"keydown":case"keyup":p=J4;break;case"focusin":m="focus",p=cg;break;case"focusout":m="blur",p=cg;break;case"beforeblur":case"afterblur":p=cg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=iS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=B4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=tA;break;case n3:case s3:case r3:p=W4;break;case i3:p=sA;break;case"scroll":p=F4;break;case"wheel":p=iA;break;case"copy":case"cut":case"paste":p=V4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=aS}var b=(e&4)!==0,x=!b&&t==="scroll",g=b?f!==null?f+"Capture":null:f;b=[];for(var y=c,S;y!==null;){S=y;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,g!==null&&(w=td(y,g),w!=null&&b.push(ld(y,w,S)))),x)break;y=y.return}0<b.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==rx&&(m=n.relatedTarget||n.fromElement)&&(Po(m)||m[Qr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Po(m):null,m!==null&&(x=xa(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(b=iS,w="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(b=aS,w="onPointerLeave",g="onPointerEnter",y="pointer"),x=p==null?f:Ua(p),S=m==null?f:Ua(m),f=new b(w,y+"leave",p,n,u),f.target=x,f.relatedTarget=S,w=null,Po(u)===c&&(b=new b(g,y+"enter",m,n,u),b.target=S,b.relatedTarget=x,w=b),x=w,p&&m)t:{for(b=p,g=m,y=0,S=b;S;S=Pa(S))y++;for(S=0,w=g;w;w=Pa(w))S++;for(;0<y-S;)b=Pa(b),y--;for(;0<S-y;)g=Pa(g),S--;for(;y--;){if(b===g||g!==null&&b===g.alternate)break t;b=Pa(b),g=Pa(g)}b=null}else b=null;p!==null&&xS(d,f,p,b,!1),m!==null&&x!==null&&xS(d,x,m,b,!0)}}e:{if(f=c?Ua(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var v=hA;else if(uS(f))if(QP)v=gA;else{v=pA;var C=fA}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(v=mA);if(v&&(v=v(t,c))){XP(d,v,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Zb(f,"number",f.value)}switch(C=c?Ua(c):window,t){case"focusin":(uS(C)||C.contentEditable==="true")&&(Ba=C,dx=c,Ru=null);break;case"focusout":Ru=dx=Ba=null;break;case"mousedown":hx=!0;break;case"contextmenu":case"mouseup":case"dragend":hx=!1,mS(d,n,u);break;case"selectionchange":if(yA)break;case"keydown":case"keyup":mS(d,n,u)}var _;if(gw)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else $a?GP(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(YP&&n.locale!=="ko"&&($a||P!=="onCompositionStart"?P==="onCompositionEnd"&&$a&&(_=qP()):(Ai=u,fw="value"in Ai?Ai.value:Ai.textContent,$a=!0)),C=Dp(c,P),0<C.length&&(P=new oS(P,t,null,n,u),d.push({event:P,listeners:C}),_?P.data=_:(_=KP(n),_!==null&&(P.data=_)))),(_=aA?lA(t,n):cA(t,n))&&(c=Dp(c,"onBeforeInput"),0<c.length&&(u=new oS("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=_))}a3(d,e)})}function ld(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dp(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=td(t,n),i!=null&&s.unshift(ld(t,i,r)),i=td(t,e),i!=null&&s.push(ld(t,i,r))),t=t.return}return s}function Pa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xS(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=td(n,i),l!=null&&o.unshift(ld(n,l,a))):r||(l=td(n,i),l!=null&&o.push(ld(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kA=/\r\n?/g,CA=/\u0000|\uFFFD/g;function yS(t){return(typeof t=="string"?t:""+t).replace(kA,`
`).replace(CA,"")}function zh(t,e,n){if(e=yS(e),yS(t)!==e&&n)throw Error(xe(425))}function Ap(){}var fx=null,px=null;function mx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gx=typeof setTimeout=="function"?setTimeout:void 0,_A=typeof clearTimeout=="function"?clearTimeout:void 0,wS=typeof Promise=="function"?Promise:void 0,EA=typeof queueMicrotask=="function"?queueMicrotask:typeof wS<"u"?function(t){return wS.resolve(null).then(t).catch(PA)}:gx;function PA(t){setTimeout(function(){throw t})}function bg(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),rd(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);rd(e)}function Ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vc=Math.random().toString(36).slice(2),hr="__reactFiber$"+vc,cd="__reactProps$"+vc,Qr="__reactContainer$"+vc,bx="__reactEvents$"+vc,TA="__reactListeners$"+vc,MA="__reactHandles$"+vc;function Po(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qr]||n[hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vS(t);t!==null;){if(n=t[hr])return n;t=vS(t)}return e}t=n,n=t.parentNode}return null}function lh(t){return t=t[hr]||t[Qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ua(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(xe(33))}function V0(t){return t[cd]||null}var xx=[],Wa=-1;function so(t){return{current:t}}function _t(t){0>Wa||(t.current=xx[Wa],xx[Wa]=null,Wa--)}function wt(t,e){Wa++,xx[Wa]=t.current,t.current=e}var Ji={},xn=so(Ji),zn=so(!1),ea=Ji;function Hl(t,e){var n=t.type.contextTypes;if(!n)return Ji;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Un(t){return t=t.childContextTypes,t!=null}function Op(){_t(zn),_t(xn)}function SS(t,e,n){if(xn.current!==Ji)throw Error(xe(168));wt(xn,e),wt(zn,n)}function c3(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(xe(108,f4(t)||"Unknown",r));return It({},n,s)}function Rp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,ea=xn.current,wt(xn,t),wt(zn,zn.current),!0}function kS(t,e,n){var s=t.stateNode;if(!s)throw Error(xe(169));n?(t=c3(t,e,ea),s.__reactInternalMemoizedMergedChildContext=t,_t(zn),_t(xn),wt(xn,t)):_t(zn),wt(zn,n)}var Ir=null,q0=!1,xg=!1;function u3(t){Ir===null?Ir=[t]:Ir.push(t)}function IA(t){q0=!0,u3(t)}function ro(){if(!xg&&Ir!==null){xg=!0;var t=0,e=pt;try{var n=Ir;for(pt=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Ir=null,q0=!1}catch(r){throw Ir!==null&&(Ir=Ir.slice(t+1)),RP(cw,ro),r}finally{pt=e,xg=!1}}return null}var Ha=[],Va=0,jp=null,Lp=0,ws=[],vs=0,ta=null,Br=1,zr="";function xo(t,e){Ha[Va++]=Lp,Ha[Va++]=jp,jp=t,Lp=e}function d3(t,e,n){ws[vs++]=Br,ws[vs++]=zr,ws[vs++]=ta,ta=t;var s=Br;t=zr;var r=32-Ws(s)-1;s&=~(1<<r),n+=1;var i=32-Ws(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,Br=1<<32-Ws(e)+r|n<<r|s,zr=i+t}else Br=1<<i|n<<r|s,zr=t}function xw(t){t.return!==null&&(xo(t,1),d3(t,1,0))}function yw(t){for(;t===jp;)jp=Ha[--Va],Ha[Va]=null,Lp=Ha[--Va],Ha[Va]=null;for(;t===ta;)ta=ws[--vs],ws[vs]=null,zr=ws[--vs],ws[vs]=null,Br=ws[--vs],ws[vs]=null}var Jn=null,Qn=null,Et=!1,$s=null;function h3(t,e){var n=Ss(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function CS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jn=t,Qn=Ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jn=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ta!==null?{id:Br,overflow:zr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ss(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jn=t,Qn=null,!0):!1;default:return!1}}function yx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wx(t){if(Et){var e=Qn;if(e){var n=e;if(!CS(t,e)){if(yx(t))throw Error(xe(418));e=Ui(n.nextSibling);var s=Jn;e&&CS(t,e)?h3(s,n):(t.flags=t.flags&-4097|2,Et=!1,Jn=t)}}else{if(yx(t))throw Error(xe(418));t.flags=t.flags&-4097|2,Et=!1,Jn=t}}}function _S(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jn=t}function Uh(t){if(t!==Jn)return!1;if(!Et)return _S(t),Et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mx(t.type,t.memoizedProps)),e&&(e=Qn)){if(yx(t))throw f3(),Error(xe(418));for(;e;)h3(t,e),e=Ui(e.nextSibling)}if(_S(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(xe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qn=Ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=Jn?Ui(t.stateNode.nextSibling):null;return!0}function f3(){for(var t=Qn;t;)t=Ui(t.nextSibling)}function Vl(){Qn=Jn=null,Et=!1}function ww(t){$s===null?$s=[t]:$s.push(t)}var NA=ni.ReactCurrentBatchConfig;function Bc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(xe(309));var s=n.stateNode}if(!s)throw Error(xe(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(xe(284));if(!n._owner)throw Error(xe(290,t))}return t}function Wh(t,e){throw t=Object.prototype.toString.call(e),Error(xe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ES(t){var e=t._init;return e(t._payload)}function p3(t){function e(g,y){if(t){var S=g.deletions;S===null?(g.deletions=[y],g.flags|=16):S.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function s(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=qi(g,y),g.index=0,g.sibling=null,g}function i(g,y,S){return g.index=S,t?(S=g.alternate,S!==null?(S=S.index,S<y?(g.flags|=2,y):S):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,S,w){return y===null||y.tag!==6?(y=_g(S,g.mode,w),y.return=g,y):(y=r(y,S),y.return=g,y)}function l(g,y,S,w){var v=S.type;return v===Fa?u(g,y,S.props.children,w,S.key):y!==null&&(y.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===xi&&ES(v)===y.type)?(w=r(y,S.props),w.ref=Bc(g,y,S),w.return=g,w):(w=np(S.type,S.key,S.props,null,g.mode,w),w.ref=Bc(g,y,S),w.return=g,w)}function c(g,y,S,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=Eg(S,g.mode,w),y.return=g,y):(y=r(y,S.children||[]),y.return=g,y)}function u(g,y,S,w,v){return y===null||y.tag!==7?(y=qo(S,g.mode,w,v),y.return=g,y):(y=r(y,S),y.return=g,y)}function d(g,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=_g(""+y,g.mode,S),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Dh:return S=np(y.type,y.key,y.props,null,g.mode,S),S.ref=Bc(g,null,y),S.return=g,S;case La:return y=Eg(y,g.mode,S),y.return=g,y;case xi:var w=y._init;return d(g,w(y._payload),S)}if(pu(y)||Rc(y))return y=qo(y,g.mode,S,null),y.return=g,y;Wh(g,y)}return null}function f(g,y,S,w){var v=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return v!==null?null:a(g,y,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Dh:return S.key===v?l(g,y,S,w):null;case La:return S.key===v?c(g,y,S,w):null;case xi:return v=S._init,f(g,y,v(S._payload),w)}if(pu(S)||Rc(S))return v!==null?null:u(g,y,S,w,null);Wh(g,S)}return null}function p(g,y,S,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(S)||null,a(y,g,""+w,v);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Dh:return g=g.get(w.key===null?S:w.key)||null,l(y,g,w,v);case La:return g=g.get(w.key===null?S:w.key)||null,c(y,g,w,v);case xi:var C=w._init;return p(g,y,S,C(w._payload),v)}if(pu(w)||Rc(w))return g=g.get(S)||null,u(y,g,w,v,null);Wh(y,w)}return null}function m(g,y,S,w){for(var v=null,C=null,_=y,P=y=0,M=null;_!==null&&P<S.length;P++){_.index>P?(M=_,_=null):M=_.sibling;var E=f(g,_,S[P],w);if(E===null){_===null&&(_=M);break}t&&_&&E.alternate===null&&e(g,_),y=i(E,y,P),C===null?v=E:C.sibling=E,C=E,_=M}if(P===S.length)return n(g,_),Et&&xo(g,P),v;if(_===null){for(;P<S.length;P++)_=d(g,S[P],w),_!==null&&(y=i(_,y,P),C===null?v=_:C.sibling=_,C=_);return Et&&xo(g,P),v}for(_=s(g,_);P<S.length;P++)M=p(_,g,P,S[P],w),M!==null&&(t&&M.alternate!==null&&_.delete(M.key===null?P:M.key),y=i(M,y,P),C===null?v=M:C.sibling=M,C=M);return t&&_.forEach(function(I){return e(g,I)}),Et&&xo(g,P),v}function b(g,y,S,w){var v=Rc(S);if(typeof v!="function")throw Error(xe(150));if(S=v.call(S),S==null)throw Error(xe(151));for(var C=v=null,_=y,P=y=0,M=null,E=S.next();_!==null&&!E.done;P++,E=S.next()){_.index>P?(M=_,_=null):M=_.sibling;var I=f(g,_,E.value,w);if(I===null){_===null&&(_=M);break}t&&_&&I.alternate===null&&e(g,_),y=i(I,y,P),C===null?v=I:C.sibling=I,C=I,_=M}if(E.done)return n(g,_),Et&&xo(g,P),v;if(_===null){for(;!E.done;P++,E=S.next())E=d(g,E.value,w),E!==null&&(y=i(E,y,P),C===null?v=E:C.sibling=E,C=E);return Et&&xo(g,P),v}for(_=s(g,_);!E.done;P++,E=S.next())E=p(_,g,P,E.value,w),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?P:E.key),y=i(E,y,P),C===null?v=E:C.sibling=E,C=E);return t&&_.forEach(function(O){return e(g,O)}),Et&&xo(g,P),v}function x(g,y,S,w){if(typeof S=="object"&&S!==null&&S.type===Fa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Dh:e:{for(var v=S.key,C=y;C!==null;){if(C.key===v){if(v=S.type,v===Fa){if(C.tag===7){n(g,C.sibling),y=r(C,S.props.children),y.return=g,g=y;break e}}else if(C.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===xi&&ES(v)===C.type){n(g,C.sibling),y=r(C,S.props),y.ref=Bc(g,C,S),y.return=g,g=y;break e}n(g,C);break}else e(g,C);C=C.sibling}S.type===Fa?(y=qo(S.props.children,g.mode,w,S.key),y.return=g,g=y):(w=np(S.type,S.key,S.props,null,g.mode,w),w.ref=Bc(g,y,S),w.return=g,g=w)}return o(g);case La:e:{for(C=S.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(g,y.sibling),y=r(y,S.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=Eg(S,g.mode,w),y.return=g,g=y}return o(g);case xi:return C=S._init,x(g,y,C(S._payload),w)}if(pu(S))return m(g,y,S,w);if(Rc(S))return b(g,y,S,w);Wh(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(g,y.sibling),y=r(y,S),y.return=g,g=y):(n(g,y),y=_g(S,g.mode,w),y.return=g,g=y),o(g)):n(g,y)}return x}var ql=p3(!0),m3=p3(!1),Fp=so(null),$p=null,qa=null,vw=null;function Sw(){vw=qa=$p=null}function kw(t){var e=Fp.current;_t(Fp),t._currentValue=e}function vx(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function il(t,e){$p=t,vw=qa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($n=!0),t.firstContext=null)}function Es(t){var e=t._currentValue;if(vw!==t)if(t={context:t,memoizedValue:e,next:null},qa===null){if($p===null)throw Error(xe(308));qa=t,$p.dependencies={lanes:0,firstContext:t}}else qa=qa.next=t;return e}var To=null;function Cw(t){To===null?To=[t]:To.push(t)}function g3(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Cw(e)):(n.next=r.next,r.next=n),e.interleaved=n,Jr(t,s)}function Jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yi=!1;function _w(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wi(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,lt&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Jr(t,n)}return r=s.interleaved,r===null?(e.next=e,Cw(s)):(e.next=r.next,r.next=e),s.interleaved=e,Jr(t,n)}function Xf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,uw(t,n)}}function PS(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bp(t,e,n,s){var r=t.updateQueue;yi=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=r.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,b=a;switch(f=e,p=n,b.tag){case 1:if(m=b.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=b.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=It({},d,f);break e;case 2:yi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);sa|=o,t.lanes=o,t.memoizedState=d}}function TS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(xe(191,r));r.call(s)}}}var ch={},mr=so(ch),ud=so(ch),dd=so(ch);function Mo(t){if(t===ch)throw Error(xe(174));return t}function Ew(t,e){switch(wt(dd,e),wt(ud,t),wt(mr,ch),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tx(e,t)}_t(mr),wt(mr,e)}function Yl(){_t(mr),_t(ud),_t(dd)}function x3(t){Mo(dd.current);var e=Mo(mr.current),n=tx(e,t.type);e!==n&&(wt(ud,t),wt(mr,n))}function Pw(t){ud.current===t&&(_t(mr),_t(ud))}var Tt=so(0);function zp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yg=[];function Tw(){for(var t=0;t<yg.length;t++)yg[t]._workInProgressVersionPrimary=null;yg.length=0}var Qf=ni.ReactCurrentDispatcher,wg=ni.ReactCurrentBatchConfig,na=0,Mt=null,Ht=null,Gt=null,Up=!1,ju=!1,hd=0,DA=0;function hn(){throw Error(xe(321))}function Mw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vs(t[n],e[n]))return!1;return!0}function Iw(t,e,n,s,r,i){if(na=i,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qf.current=t===null||t.memoizedState===null?jA:LA,t=n(s,r),ju){i=0;do{if(ju=!1,hd=0,25<=i)throw Error(xe(301));i+=1,Gt=Ht=null,e.updateQueue=null,Qf.current=FA,t=n(s,r)}while(ju)}if(Qf.current=Wp,e=Ht!==null&&Ht.next!==null,na=0,Gt=Ht=Mt=null,Up=!1,e)throw Error(xe(300));return t}function Nw(){var t=hd!==0;return hd=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Mt.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Ps(){if(Ht===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var e=Gt===null?Mt.memoizedState:Gt.next;if(e!==null)Gt=e,Ht=t;else{if(t===null)throw Error(xe(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Gt===null?Mt.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function fd(t,e){return typeof e=="function"?e(t):e}function vg(t){var e=Ps(),n=e.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=t;var s=Ht,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((na&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=s):l=l.next=d,Mt.lanes|=u,sa|=u}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,Vs(s,e.memoizedState)||($n=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Mt.lanes|=i,sa|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sg(t){var e=Ps(),n=e.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Vs(i,e.memoizedState)||($n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function y3(){}function w3(t,e){var n=Mt,s=Ps(),r=e(),i=!Vs(s.memoizedState,r);if(i&&(s.memoizedState=r,$n=!0),s=s.queue,Dw(k3.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||Gt!==null&&Gt.memoizedState.tag&1){if(n.flags|=2048,pd(9,S3.bind(null,n,s,r,e),void 0,null),en===null)throw Error(xe(349));na&30||v3(n,e,r)}return r}function v3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function S3(t,e,n,s){e.value=n,e.getSnapshot=s,C3(e)&&_3(t)}function k3(t,e,n){return n(function(){C3(e)&&_3(t)})}function C3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vs(t,n)}catch{return!0}}function _3(t){var e=Jr(t,1);e!==null&&Hs(e,t,1,-1)}function MS(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fd,lastRenderedState:t},e.queue=t,t=t.dispatch=RA.bind(null,Mt,t),[e.memoizedState,t]}function pd(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function E3(){return Ps().memoizedState}function Jf(t,e,n,s){var r=sr();Mt.flags|=t,r.memoizedState=pd(1|e,n,void 0,s===void 0?null:s)}function Y0(t,e,n,s){var r=Ps();s=s===void 0?null:s;var i=void 0;if(Ht!==null){var o=Ht.memoizedState;if(i=o.destroy,s!==null&&Mw(s,o.deps)){r.memoizedState=pd(e,n,i,s);return}}Mt.flags|=t,r.memoizedState=pd(1|e,n,i,s)}function IS(t,e){return Jf(8390656,8,t,e)}function Dw(t,e){return Y0(2048,8,t,e)}function P3(t,e){return Y0(4,2,t,e)}function T3(t,e){return Y0(4,4,t,e)}function M3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function I3(t,e,n){return n=n!=null?n.concat([t]):null,Y0(4,4,M3.bind(null,e,t),n)}function Aw(){}function N3(t,e){var n=Ps();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Mw(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function D3(t,e){var n=Ps();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Mw(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function A3(t,e,n){return na&21?(Vs(n,e)||(n=FP(),Mt.lanes|=n,sa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$n=!0),t.memoizedState=n)}function AA(t,e){var n=pt;pt=n!==0&&4>n?n:4,t(!0);var s=wg.transition;wg.transition={};try{t(!1),e()}finally{pt=n,wg.transition=s}}function O3(){return Ps().memoizedState}function OA(t,e,n){var s=Vi(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},R3(t))j3(e,n);else if(n=g3(t,e,n,s),n!==null){var r=Pn();Hs(n,t,s,r),L3(n,e,s)}}function RA(t,e,n){var s=Vi(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(R3(t))j3(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Vs(a,o)){var l=e.interleaved;l===null?(r.next=r,Cw(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=g3(t,e,r,s),n!==null&&(r=Pn(),Hs(n,t,s,r),L3(n,e,s))}}function R3(t){var e=t.alternate;return t===Mt||e!==null&&e===Mt}function j3(t,e){ju=Up=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L3(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,uw(t,n)}}var Wp={readContext:Es,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},jA={readContext:Es,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:Es,useEffect:IS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jf(4194308,4,M3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jf(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=sr();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=OA.bind(null,Mt,t),[s.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:MS,useDebugValue:Aw,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=MS(!1),e=t[0];return t=AA.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Mt,r=sr();if(Et){if(n===void 0)throw Error(xe(407));n=n()}else{if(n=e(),en===null)throw Error(xe(349));na&30||v3(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,IS(k3.bind(null,s,i,t),[t]),s.flags|=2048,pd(9,S3.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=sr(),e=en.identifierPrefix;if(Et){var n=zr,s=Br;n=(s&~(1<<32-Ws(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=hd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LA={readContext:Es,useCallback:N3,useContext:Es,useEffect:Dw,useImperativeHandle:I3,useInsertionEffect:P3,useLayoutEffect:T3,useMemo:D3,useReducer:vg,useRef:E3,useState:function(){return vg(fd)},useDebugValue:Aw,useDeferredValue:function(t){var e=Ps();return A3(e,Ht.memoizedState,t)},useTransition:function(){var t=vg(fd)[0],e=Ps().memoizedState;return[t,e]},useMutableSource:y3,useSyncExternalStore:w3,useId:O3,unstable_isNewReconciler:!1},FA={readContext:Es,useCallback:N3,useContext:Es,useEffect:Dw,useImperativeHandle:I3,useInsertionEffect:P3,useLayoutEffect:T3,useMemo:D3,useReducer:Sg,useRef:E3,useState:function(){return Sg(fd)},useDebugValue:Aw,useDeferredValue:function(t){var e=Ps();return Ht===null?e.memoizedState=t:A3(e,Ht.memoizedState,t)},useTransition:function(){var t=Sg(fd)[0],e=Ps().memoizedState;return[t,e]},useMutableSource:y3,useSyncExternalStore:w3,useId:O3,unstable_isNewReconciler:!1};function As(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sx(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var G0={isMounted:function(t){return(t=t._reactInternals)?xa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Pn(),r=Vi(t),i=Hr(s,r);i.payload=e,n!=null&&(i.callback=n),e=Wi(t,i,r),e!==null&&(Hs(e,t,r,s),Xf(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Pn(),r=Vi(t),i=Hr(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Wi(t,i,r),e!==null&&(Hs(e,t,r,s),Xf(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pn(),s=Vi(t),r=Hr(n,s);r.tag=2,e!=null&&(r.callback=e),e=Wi(t,r,s),e!==null&&(Hs(e,t,s,n),Xf(e,t,s))}};function NS(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!od(n,s)||!od(r,i):!0}function F3(t,e,n){var s=!1,r=Ji,i=e.contextType;return typeof i=="object"&&i!==null?i=Es(i):(r=Un(e)?ea:xn.current,s=e.contextTypes,i=(s=s!=null)?Hl(t,r):Ji),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=G0,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function DS(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&G0.enqueueReplaceState(e,e.state,null)}function kx(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},_w(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Es(i):(i=Un(e)?ea:xn.current,r.context=Hl(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sx(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&G0.enqueueReplaceState(r,r.state,null),Bp(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Gl(t,e){try{var n="",s=e;do n+=h4(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function kg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $A=typeof WeakMap=="function"?WeakMap:Map;function $3(t,e,n){n=Hr(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Vp||(Vp=!0,Ox=s),Cx(t,e)},n}function B3(t,e,n){n=Hr(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){Cx(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cx(t,e),typeof s!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function AS(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new $A;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=ZA.bind(null,t,e,n),e.then(t,t))}function OS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function RS(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hr(-1,1),e.tag=2,Wi(n,e,1))),n.lanes|=1),t)}var BA=ni.ReactCurrentOwner,$n=!1;function _n(t,e,n,s){e.child=t===null?m3(e,null,n,s):ql(e,t.child,n,s)}function jS(t,e,n,s,r){n=n.render;var i=e.ref;return il(e,r),s=Iw(t,e,n,s,i,r),n=Nw(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Zr(t,e,r)):(Et&&n&&xw(e),e.flags|=1,_n(t,e,s,r),e.child)}function LS(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!zw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,z3(t,e,i,s,r)):(t=np(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:od,n(o,s)&&t.ref===e.ref)return Zr(t,e,r)}return e.flags|=1,t=qi(i,s),t.ref=e.ref,t.return=e,e.child=t}function z3(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(od(i,s)&&t.ref===e.ref)if($n=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&($n=!0);else return e.lanes=t.lanes,Zr(t,e,r)}return _x(t,e,n,s,r)}function U3(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(Ga,Kn),Kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,wt(Ga,Kn),Kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,wt(Ga,Kn),Kn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,wt(Ga,Kn),Kn|=s;return _n(t,e,r,n),e.child}function W3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _x(t,e,n,s,r){var i=Un(n)?ea:xn.current;return i=Hl(e,i),il(e,r),n=Iw(t,e,n,s,i,r),s=Nw(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Zr(t,e,r)):(Et&&s&&xw(e),e.flags|=1,_n(t,e,n,r),e.child)}function FS(t,e,n,s,r){if(Un(n)){var i=!0;Rp(e)}else i=!1;if(il(e,r),e.stateNode===null)Zf(t,e),F3(e,n,s),kx(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Es(c):(c=Un(n)?ea:xn.current,c=Hl(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&DS(e,o,s,c),yi=!1;var f=e.memoizedState;o.state=f,Bp(e,s,o,r),l=e.memoizedState,a!==s||f!==l||zn.current||yi?(typeof u=="function"&&(Sx(e,n,u,s),l=e.memoizedState),(a=yi||NS(e,n,a,s,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,b3(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:As(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Es(l):(l=Un(n)?ea:xn.current,l=Hl(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&DS(e,o,s,l),yi=!1,f=e.memoizedState,o.state=f,Bp(e,s,o,r);var m=e.memoizedState;a!==d||f!==m||zn.current||yi?(typeof p=="function"&&(Sx(e,n,p,s),m=e.memoizedState),(c=yi||NS(e,n,c,s,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),o.props=s,o.state=m,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return Ex(t,e,n,s,i,r)}function Ex(t,e,n,s,r,i){W3(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&kS(e,n,!1),Zr(t,e,i);s=e.stateNode,BA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=ql(e,t.child,null,i),e.child=ql(e,null,a,i)):_n(t,e,a,i),e.memoizedState=s.state,r&&kS(e,n,!0),e.child}function H3(t){var e=t.stateNode;e.pendingContext?SS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&SS(t,e.context,!1),Ew(t,e.containerInfo)}function $S(t,e,n,s,r){return Vl(),ww(r),e.flags|=256,_n(t,e,n,s),e.child}var Px={dehydrated:null,treeContext:null,retryLane:0};function Tx(t){return{baseLanes:t,cachePool:null,transitions:null}}function V3(t,e,n){var s=e.pendingProps,r=Tt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),wt(Tt,r&1),t===null)return wx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Q0(o,s,0,null),t=qo(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Tx(n),e.memoizedState=Px,t):Ow(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return zA(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=qi(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=qi(a,i):(i=qo(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?Tx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Px,s}return i=t.child,t=i.sibling,s=qi(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Ow(t,e){return e=Q0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hh(t,e,n,s){return s!==null&&ww(s),ql(e,t.child,null,n),t=Ow(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zA(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=kg(Error(xe(422))),Hh(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Q0({mode:"visible",children:s.children},r,0,null),i=qo(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&ql(e,t.child,null,o),e.child.memoizedState=Tx(o),e.memoizedState=Px,i);if(!(e.mode&1))return Hh(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(xe(419)),s=kg(i,s,void 0),Hh(t,e,o,s)}if(a=(o&t.childLanes)!==0,$n||a){if(s=en,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Jr(t,r),Hs(s,t,r,-1))}return Bw(),s=kg(Error(xe(421))),Hh(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=e6.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Qn=Ui(r.nextSibling),Jn=e,Et=!0,$s=null,t!==null&&(ws[vs++]=Br,ws[vs++]=zr,ws[vs++]=ta,Br=t.id,zr=t.overflow,ta=e),e=Ow(e,s.children),e.flags|=4096,e)}function BS(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),vx(t.return,e,n)}function Cg(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function q3(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(_n(t,e,s.children,n),s=Tt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&BS(t,n,e);else if(t.tag===19)BS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(wt(Tt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&zp(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Cg(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&zp(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Cg(e,!0,n,null,i);break;case"together":Cg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),sa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(xe(153));if(e.child!==null){for(t=e.child,n=qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function UA(t,e,n){switch(e.tag){case 3:H3(e),Vl();break;case 5:x3(e);break;case 1:Un(e.type)&&Rp(e);break;case 4:Ew(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;wt(Fp,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(wt(Tt,Tt.current&1),e.flags|=128,null):n&e.child.childLanes?V3(t,e,n):(wt(Tt,Tt.current&1),t=Zr(t,e,n),t!==null?t.sibling:null);wt(Tt,Tt.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return q3(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),wt(Tt,Tt.current),s)break;return null;case 22:case 23:return e.lanes=0,U3(t,e,n)}return Zr(t,e,n)}var Y3,Mx,G3,K3;Y3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mx=function(){};G3=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Mo(mr.current);var i=null;switch(n){case"input":r=Qb(t,r),s=Qb(t,s),i=[];break;case"select":r=It({},r,{value:void 0}),s=It({},s,{value:void 0}),i=[];break;case"textarea":r=ex(t,r),s=ex(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Ap)}nx(n,s);var o;n=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Zu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Zu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ct("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};K3=function(t,e,n,s){n!==s&&(e.flags|=4)};function zc(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function WA(t,e,n){var s=e.pendingProps;switch(yw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return Un(e.type)&&Op(),fn(e),null;case 3:return s=e.stateNode,Yl(),_t(zn),_t(xn),Tw(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Uh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$s!==null&&(Lx($s),$s=null))),Mx(t,e),fn(e),null;case 5:Pw(e);var r=Mo(dd.current);if(n=e.type,t!==null&&e.stateNode!=null)G3(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(xe(166));return fn(e),null}if(t=Mo(mr.current),Uh(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[hr]=e,s[cd]=i,t=(e.mode&1)!==0,n){case"dialog":Ct("cancel",s),Ct("close",s);break;case"iframe":case"object":case"embed":Ct("load",s);break;case"video":case"audio":for(r=0;r<gu.length;r++)Ct(gu[r],s);break;case"source":Ct("error",s);break;case"img":case"image":case"link":Ct("error",s),Ct("load",s);break;case"details":Ct("toggle",s);break;case"input":K1(s,i),Ct("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ct("invalid",s);break;case"textarea":Q1(s,i),Ct("invalid",s)}nx(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&zh(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&zh(s.textContent,a,t),r=["children",""+a]):Zu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ct("scroll",s)}switch(n){case"input":Ah(s),X1(s,i,!0);break;case"textarea":Ah(s),J1(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Ap)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[hr]=e,t[cd]=s,Y3(t,e,!1,!1),e.stateNode=t;e:{switch(o=sx(n,s),n){case"dialog":Ct("cancel",t),Ct("close",t),r=s;break;case"iframe":case"object":case"embed":Ct("load",t),r=s;break;case"video":case"audio":for(r=0;r<gu.length;r++)Ct(gu[r],t);r=s;break;case"source":Ct("error",t),r=s;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),r=s;break;case"details":Ct("toggle",t),r=s;break;case"input":K1(t,s),r=Qb(t,s),Ct("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=It({},s,{value:void 0}),Ct("invalid",t);break;case"textarea":Q1(t,s),r=ex(t,s),Ct("invalid",t);break;default:r=s}nx(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?EP(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CP(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ed(t,l):typeof l=="number"&&ed(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ct("scroll",t):l!=null&&rw(t,i,l,o))}switch(n){case"input":Ah(t),X1(t,s,!1);break;case"textarea":Ah(t),J1(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Qi(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?tl(t,!!s.multiple,i,!1):s.defaultValue!=null&&tl(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ap)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)K3(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(xe(166));if(n=Mo(dd.current),Mo(mr.current),Uh(e)){if(s=e.stateNode,n=e.memoizedProps,s[hr]=e,(i=s.nodeValue!==n)&&(t=Jn,t!==null))switch(t.tag){case 3:zh(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zh(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[hr]=e,e.stateNode=s}return fn(e),null;case 13:if(_t(Tt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&Qn!==null&&e.mode&1&&!(e.flags&128))f3(),Vl(),e.flags|=98560,i=!1;else if(i=Uh(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(xe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(xe(317));i[hr]=e}else Vl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),i=!1}else $s!==null&&(Lx($s),$s=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Tt.current&1?Vt===0&&(Vt=3):Bw())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return Yl(),Mx(t,e),t===null&&ad(e.stateNode.containerInfo),fn(e),null;case 10:return kw(e.type._context),fn(e),null;case 17:return Un(e.type)&&Op(),fn(e),null;case 19:if(_t(Tt),i=e.memoizedState,i===null)return fn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)zc(i,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zp(t),o!==null){for(e.flags|=128,zc(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return wt(Tt,Tt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ft()>Kl&&(e.flags|=128,s=!0,zc(i,!1),e.lanes=4194304)}else{if(!s)if(t=zp(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Et)return fn(e),null}else 2*Ft()-i.renderingStartTime>Kl&&n!==1073741824&&(e.flags|=128,s=!0,zc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ft(),e.sibling=null,n=Tt.current,wt(Tt,s?n&1|2:n&1),e):(fn(e),null);case 22:case 23:return $w(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Kn&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(xe(156,e.tag))}function HA(t,e){switch(yw(e),e.tag){case 1:return Un(e.type)&&Op(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yl(),_t(zn),_t(xn),Tw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pw(e),null;case 13:if(_t(Tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(xe(340));Vl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _t(Tt),null;case 4:return Yl(),null;case 10:return kw(e.type._context),null;case 22:case 23:return $w(),null;case 24:return null;default:return null}}var Vh=!1,bn=!1,VA=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Ya(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){At(t,e,s)}else n.current=null}function Ix(t,e,n){try{n()}catch(s){At(t,e,s)}}var zS=!1;function qA(t,e){if(fx=Ip,t=e3(),bw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==i||s!==0&&d.nodeType!==3||(l=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===i&&++u===s&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(px={focusedElem:t,selectionRange:n},Ip=!1,Le=e;Le!==null;)if(e=Le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Le=t;else for(;Le!==null;){e=Le;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var b=m.memoizedProps,x=m.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?b:As(e.type,b),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(w){At(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Le=t;break}Le=e.return}return m=zS,zS=!1,m}function Lu(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Ix(e,n,i)}r=r.next}while(r!==s)}}function K0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Nx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function X3(t){var e=t.alternate;e!==null&&(t.alternate=null,X3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hr],delete e[cd],delete e[bx],delete e[TA],delete e[MA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Q3(t){return t.tag===5||t.tag===3||t.tag===4}function US(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Q3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dx(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ap));else if(s!==4&&(t=t.child,t!==null))for(Dx(t,e,n),t=t.sibling;t!==null;)Dx(t,e,n),t=t.sibling}function Ax(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Ax(t,e,n),t=t.sibling;t!==null;)Ax(t,e,n),t=t.sibling}var nn=null,Fs=!1;function si(t,e,n){for(n=n.child;n!==null;)J3(t,e,n),n=n.sibling}function J3(t,e,n){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(z0,n)}catch{}switch(n.tag){case 5:bn||Ya(n,e);case 6:var s=nn,r=Fs;nn=null,si(t,e,n),nn=s,Fs=r,nn!==null&&(Fs?(t=nn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nn.removeChild(n.stateNode));break;case 18:nn!==null&&(Fs?(t=nn,n=n.stateNode,t.nodeType===8?bg(t.parentNode,n):t.nodeType===1&&bg(t,n),rd(t)):bg(nn,n.stateNode));break;case 4:s=nn,r=Fs,nn=n.stateNode.containerInfo,Fs=!0,si(t,e,n),nn=s,Fs=r;break;case 0:case 11:case 14:case 15:if(!bn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ix(n,e,o),r=r.next}while(r!==s)}si(t,e,n);break;case 1:if(!bn&&(Ya(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){At(n,e,a)}si(t,e,n);break;case 21:si(t,e,n);break;case 22:n.mode&1?(bn=(s=bn)||n.memoizedState!==null,si(t,e,n),bn=s):si(t,e,n);break;default:si(t,e,n)}}function WS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VA),e.forEach(function(s){var r=t6.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Is(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nn=a.stateNode,Fs=!1;break e;case 3:nn=a.stateNode.containerInfo,Fs=!0;break e;case 4:nn=a.stateNode.containerInfo,Fs=!0;break e}a=a.return}if(nn===null)throw Error(xe(160));J3(i,o,r),nn=null,Fs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){At(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Z3(e,t),e=e.sibling}function Z3(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Is(e,t),Xs(t),s&4){try{Lu(3,t,t.return),K0(3,t)}catch(b){At(t,t.return,b)}try{Lu(5,t,t.return)}catch(b){At(t,t.return,b)}}break;case 1:Is(e,t),Xs(t),s&512&&n!==null&&Ya(n,n.return);break;case 5:if(Is(e,t),Xs(t),s&512&&n!==null&&Ya(n,n.return),t.flags&32){var r=t.stateNode;try{ed(r,"")}catch(b){At(t,t.return,b)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&vP(r,i),sx(a,o);var c=sx(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?EP(r,d):u==="dangerouslySetInnerHTML"?CP(r,d):u==="children"?ed(r,d):rw(r,u,d,c)}switch(a){case"input":Jb(r,i);break;case"textarea":SP(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?tl(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?tl(r,!!i.multiple,i.defaultValue,!0):tl(r,!!i.multiple,i.multiple?[]:"",!1))}r[cd]=i}catch(b){At(t,t.return,b)}}break;case 6:if(Is(e,t),Xs(t),s&4){if(t.stateNode===null)throw Error(xe(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(b){At(t,t.return,b)}}break;case 3:if(Is(e,t),Xs(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{rd(e.containerInfo)}catch(b){At(t,t.return,b)}break;case 4:Is(e,t),Xs(t);break;case 13:Is(e,t),Xs(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Lw=Ft())),s&4&&WS(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(bn=(c=bn)||u,Is(e,t),bn=c):Is(e,t),Xs(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Le=t,u=t.child;u!==null;){for(d=Le=u;Le!==null;){switch(f=Le,p=f.child,f.tag){case 0:case 11:case 14:case 15:Lu(4,f,f.return);break;case 1:Ya(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(b){At(s,n,b)}}break;case 5:Ya(f,f.return);break;case 22:if(f.memoizedState!==null){VS(d);continue}}p!==null?(p.return=f,Le=p):VS(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_P("display",o))}catch(b){At(t,t.return,b)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){At(t,t.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Is(e,t),Xs(t),s&4&&WS(t);break;case 21:break;default:Is(e,t),Xs(t)}}function Xs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Q3(n)){var s=n;break e}n=n.return}throw Error(xe(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(ed(r,""),s.flags&=-33);var i=US(t);Ax(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=US(t);Dx(t,a,o);break;default:throw Error(xe(161))}}catch(l){At(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YA(t,e,n){Le=t,eT(t)}function eT(t,e,n){for(var s=(t.mode&1)!==0;Le!==null;){var r=Le,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Vh;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||bn;a=Vh;var c=bn;if(Vh=o,(bn=l)&&!c)for(Le=r;Le!==null;)o=Le,l=o.child,o.tag===22&&o.memoizedState!==null?qS(r):l!==null?(l.return=o,Le=l):qS(r);for(;i!==null;)Le=i,eT(i),i=i.sibling;Le=r,Vh=a,bn=c}HS(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Le=i):HS(t)}}function HS(t){for(;Le!==null;){var e=Le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bn||K0(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!bn)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:As(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&TS(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}TS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&rd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}bn||e.flags&512&&Nx(e)}catch(f){At(e,e.return,f)}}if(e===t){Le=null;break}if(n=e.sibling,n!==null){n.return=e.return,Le=n;break}Le=e.return}}function VS(t){for(;Le!==null;){var e=Le;if(e===t){Le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Le=n;break}Le=e.return}}function qS(t){for(;Le!==null;){var e=Le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{K0(4,e)}catch(l){At(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){At(e,r,l)}}var i=e.return;try{Nx(e)}catch(l){At(e,i,l)}break;case 5:var o=e.return;try{Nx(e)}catch(l){At(e,o,l)}}}catch(l){At(e,e.return,l)}if(e===t){Le=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Le=a;break}Le=e.return}}var GA=Math.ceil,Hp=ni.ReactCurrentDispatcher,Rw=ni.ReactCurrentOwner,_s=ni.ReactCurrentBatchConfig,lt=0,en=null,Wt=null,un=0,Kn=0,Ga=so(0),Vt=0,md=null,sa=0,X0=0,jw=0,Fu=null,jn=null,Lw=0,Kl=1/0,Mr=null,Vp=!1,Ox=null,Hi=null,qh=!1,Oi=null,qp=0,$u=0,Rx=null,ep=-1,tp=0;function Pn(){return lt&6?Ft():ep!==-1?ep:ep=Ft()}function Vi(t){return t.mode&1?lt&2&&un!==0?un&-un:NA.transition!==null?(tp===0&&(tp=FP()),tp):(t=pt,t!==0||(t=window.event,t=t===void 0?16:VP(t.type)),t):1}function Hs(t,e,n,s){if(50<$u)throw $u=0,Rx=null,Error(xe(185));oh(t,n,s),(!(lt&2)||t!==en)&&(t===en&&(!(lt&2)&&(X0|=n),Vt===4&&vi(t,un)),Wn(t,s),n===1&&lt===0&&!(e.mode&1)&&(Kl=Ft()+500,q0&&ro()))}function Wn(t,e){var n=t.callbackNode;N4(t,e);var s=Mp(t,t===en?un:0);if(s===0)n!==null&&tS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&tS(n),e===1)t.tag===0?IA(YS.bind(null,t)):u3(YS.bind(null,t)),EA(function(){!(lt&6)&&ro()}),n=null;else{switch($P(s)){case 1:n=cw;break;case 4:n=jP;break;case 16:n=Tp;break;case 536870912:n=LP;break;default:n=Tp}n=lT(n,tT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tT(t,e){if(ep=-1,tp=0,lt&6)throw Error(xe(327));var n=t.callbackNode;if(ol()&&t.callbackNode!==n)return null;var s=Mp(t,t===en?un:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Yp(t,s);else{e=s;var r=lt;lt|=2;var i=sT();(en!==t||un!==e)&&(Mr=null,Kl=Ft()+500,Vo(t,e));do try{QA();break}catch(a){nT(t,a)}while(!0);Sw(),Hp.current=i,lt=r,Wt!==null?e=0:(en=null,un=0,e=Vt)}if(e!==0){if(e===2&&(r=lx(t),r!==0&&(s=r,e=jx(t,r))),e===1)throw n=md,Vo(t,0),vi(t,s),Wn(t,Ft()),n;if(e===6)vi(t,s);else{if(r=t.current.alternate,!(s&30)&&!KA(r)&&(e=Yp(t,s),e===2&&(i=lx(t),i!==0&&(s=i,e=jx(t,i))),e===1))throw n=md,Vo(t,0),vi(t,s),Wn(t,Ft()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(xe(345));case 2:yo(t,jn,Mr);break;case 3:if(vi(t,s),(s&130023424)===s&&(e=Lw+500-Ft(),10<e)){if(Mp(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){Pn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=gx(yo.bind(null,t,jn,Mr),e);break}yo(t,jn,Mr);break;case 4:if(vi(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Ws(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Ft()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*GA(s/1960))-s,10<s){t.timeoutHandle=gx(yo.bind(null,t,jn,Mr),s);break}yo(t,jn,Mr);break;case 5:yo(t,jn,Mr);break;default:throw Error(xe(329))}}}return Wn(t,Ft()),t.callbackNode===n?tT.bind(null,t):null}function jx(t,e){var n=Fu;return t.current.memoizedState.isDehydrated&&(Vo(t,e).flags|=256),t=Yp(t,e),t!==2&&(e=jn,jn=n,e!==null&&Lx(e)),t}function Lx(t){jn===null?jn=t:jn.push.apply(jn,t)}function KA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Vs(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vi(t,e){for(e&=~jw,e&=~X0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ws(e),s=1<<n;t[n]=-1,e&=~s}}function YS(t){if(lt&6)throw Error(xe(327));ol();var e=Mp(t,0);if(!(e&1))return Wn(t,Ft()),null;var n=Yp(t,e);if(t.tag!==0&&n===2){var s=lx(t);s!==0&&(e=s,n=jx(t,s))}if(n===1)throw n=md,Vo(t,0),vi(t,e),Wn(t,Ft()),n;if(n===6)throw Error(xe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yo(t,jn,Mr),Wn(t,Ft()),null}function Fw(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(Kl=Ft()+500,q0&&ro())}}function ra(t){Oi!==null&&Oi.tag===0&&!(lt&6)&&ol();var e=lt;lt|=1;var n=_s.transition,s=pt;try{if(_s.transition=null,pt=1,t)return t()}finally{pt=s,_s.transition=n,lt=e,!(lt&6)&&ro()}}function $w(){Kn=Ga.current,_t(Ga)}function Vo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_A(n)),Wt!==null)for(n=Wt.return;n!==null;){var s=n;switch(yw(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Op();break;case 3:Yl(),_t(zn),_t(xn),Tw();break;case 5:Pw(s);break;case 4:Yl();break;case 13:_t(Tt);break;case 19:_t(Tt);break;case 10:kw(s.type._context);break;case 22:case 23:$w()}n=n.return}if(en=t,Wt=t=qi(t.current,null),un=Kn=e,Vt=0,md=null,jw=X0=sa=0,jn=Fu=null,To!==null){for(e=0;e<To.length;e++)if(n=To[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}To=null}return t}function nT(t,e){do{var n=Wt;try{if(Sw(),Qf.current=Wp,Up){for(var s=Mt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Up=!1}if(na=0,Gt=Ht=Mt=null,ju=!1,hd=0,Rw.current=null,n===null||n.return===null){Vt=1,md=e,Wt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=un,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=OS(o);if(p!==null){p.flags&=-257,RS(p,o,a,i,e),p.mode&1&&AS(i,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var b=new Set;b.add(l),e.updateQueue=b}else m.add(l);break e}else{if(!(e&1)){AS(i,c,e),Bw();break e}l=Error(xe(426))}}else if(Et&&a.mode&1){var x=OS(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),RS(x,o,a,i,e),ww(Gl(l,a));break e}}i=l=Gl(l,a),Vt!==4&&(Vt=2),Fu===null?Fu=[i]:Fu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=$3(i,l,e);PS(i,g);break e;case 1:a=l;var y=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Hi===null||!Hi.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=B3(i,a,e);PS(i,w);break e}}i=i.return}while(i!==null)}iT(n)}catch(v){e=v,Wt===n&&n!==null&&(Wt=n=n.return);continue}break}while(!0)}function sT(){var t=Hp.current;return Hp.current=Wp,t===null?Wp:t}function Bw(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),en===null||!(sa&268435455)&&!(X0&268435455)||vi(en,un)}function Yp(t,e){var n=lt;lt|=2;var s=sT();(en!==t||un!==e)&&(Mr=null,Vo(t,e));do try{XA();break}catch(r){nT(t,r)}while(!0);if(Sw(),lt=n,Hp.current=s,Wt!==null)throw Error(xe(261));return en=null,un=0,Vt}function XA(){for(;Wt!==null;)rT(Wt)}function QA(){for(;Wt!==null&&!S4();)rT(Wt)}function rT(t){var e=aT(t.alternate,t,Kn);t.memoizedProps=t.pendingProps,e===null?iT(t):Wt=e,Rw.current=null}function iT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HA(n,e),n!==null){n.flags&=32767,Wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,Wt=null;return}}else if(n=WA(n,e,Kn),n!==null){Wt=n;return}if(e=e.sibling,e!==null){Wt=e;return}Wt=e=t}while(e!==null);Vt===0&&(Vt=5)}function yo(t,e,n){var s=pt,r=_s.transition;try{_s.transition=null,pt=1,JA(t,e,n,s)}finally{_s.transition=r,pt=s}return null}function JA(t,e,n,s){do ol();while(Oi!==null);if(lt&6)throw Error(xe(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(xe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(D4(t,i),t===en&&(Wt=en=null,un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qh||(qh=!0,lT(Tp,function(){return ol(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_s.transition,_s.transition=null;var o=pt;pt=1;var a=lt;lt|=4,Rw.current=null,qA(t,n),Z3(n,t),xA(px),Ip=!!fx,px=fx=null,t.current=n,YA(n),k4(),lt=a,pt=o,_s.transition=i}else t.current=n;if(qh&&(qh=!1,Oi=t,qp=r),i=t.pendingLanes,i===0&&(Hi=null),E4(n.stateNode),Wn(t,Ft()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Vp)throw Vp=!1,t=Ox,Ox=null,t;return qp&1&&t.tag!==0&&ol(),i=t.pendingLanes,i&1?t===Rx?$u++:($u=0,Rx=t):$u=0,ro(),null}function ol(){if(Oi!==null){var t=$P(qp),e=_s.transition,n=pt;try{if(_s.transition=null,pt=16>t?16:t,Oi===null)var s=!1;else{if(t=Oi,Oi=null,qp=0,lt&6)throw Error(xe(331));var r=lt;for(lt|=4,Le=t.current;Le!==null;){var i=Le,o=i.child;if(Le.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Le=c;Le!==null;){var u=Le;switch(u.tag){case 0:case 11:case 15:Lu(8,u,i)}var d=u.child;if(d!==null)d.return=u,Le=d;else for(;Le!==null;){u=Le;var f=u.sibling,p=u.return;if(X3(u),u===c){Le=null;break}if(f!==null){f.return=p,Le=f;break}Le=p}}}var m=i.alternate;if(m!==null){var b=m.child;if(b!==null){m.child=null;do{var x=b.sibling;b.sibling=null,b=x}while(b!==null)}}Le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Le=o;else e:for(;Le!==null;){if(i=Le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Lu(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Le=g;break e}Le=i.return}}var y=t.current;for(Le=y;Le!==null;){o=Le;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Le=S;else e:for(o=y;Le!==null;){if(a=Le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:K0(9,a)}}catch(v){At(a,a.return,v)}if(a===o){Le=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Le=w;break e}Le=a.return}}if(lt=r,ro(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(z0,t)}catch{}s=!0}return s}finally{pt=n,_s.transition=e}}return!1}function GS(t,e,n){e=Gl(n,e),e=$3(t,e,1),t=Wi(t,e,1),e=Pn(),t!==null&&(oh(t,1,e),Wn(t,e))}function At(t,e,n){if(t.tag===3)GS(t,t,n);else for(;e!==null;){if(e.tag===3){GS(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Hi===null||!Hi.has(s))){t=Gl(n,t),t=B3(e,t,1),e=Wi(e,t,1),t=Pn(),e!==null&&(oh(e,1,t),Wn(e,t));break}}e=e.return}}function ZA(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Pn(),t.pingedLanes|=t.suspendedLanes&n,en===t&&(un&n)===n&&(Vt===4||Vt===3&&(un&130023424)===un&&500>Ft()-Lw?Vo(t,0):jw|=n),Wn(t,e)}function oT(t,e){e===0&&(t.mode&1?(e=jh,jh<<=1,!(jh&130023424)&&(jh=4194304)):e=1);var n=Pn();t=Jr(t,e),t!==null&&(oh(t,e,n),Wn(t,n))}function e6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oT(t,n)}function t6(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(xe(314))}s!==null&&s.delete(e),oT(t,n)}var aT;aT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zn.current)$n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $n=!1,UA(t,e,n);$n=!!(t.flags&131072)}else $n=!1,Et&&e.flags&1048576&&d3(e,Lp,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Zf(t,e),t=e.pendingProps;var r=Hl(e,xn.current);il(e,n),r=Iw(null,e,s,t,r,n);var i=Nw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Un(s)?(i=!0,Rp(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,_w(e),r.updater=G0,e.stateNode=r,r._reactInternals=e,kx(e,s,t,n),e=Ex(null,e,s,!0,i,n)):(e.tag=0,Et&&i&&xw(e),_n(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Zf(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=s6(s),t=As(s,t),r){case 0:e=_x(null,e,s,t,n);break e;case 1:e=FS(null,e,s,t,n);break e;case 11:e=jS(null,e,s,t,n);break e;case 14:e=LS(null,e,s,As(s.type,t),n);break e}throw Error(xe(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:As(s,r),_x(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:As(s,r),FS(t,e,s,r,n);case 3:e:{if(H3(e),t===null)throw Error(xe(387));s=e.pendingProps,i=e.memoizedState,r=i.element,b3(t,e),Bp(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Gl(Error(xe(423)),e),e=$S(t,e,s,n,r);break e}else if(s!==r){r=Gl(Error(xe(424)),e),e=$S(t,e,s,n,r);break e}else for(Qn=Ui(e.stateNode.containerInfo.firstChild),Jn=e,Et=!0,$s=null,n=m3(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vl(),s===r){e=Zr(t,e,n);break e}_n(t,e,s,n)}e=e.child}return e;case 5:return x3(e),t===null&&wx(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,mx(s,r)?o=null:i!==null&&mx(s,i)&&(e.flags|=32),W3(t,e),_n(t,e,o,n),e.child;case 6:return t===null&&wx(e),null;case 13:return V3(t,e,n);case 4:return Ew(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=ql(e,null,s,n):_n(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:As(s,r),jS(t,e,s,r,n);case 7:return _n(t,e,e.pendingProps,n),e.child;case 8:return _n(t,e,e.pendingProps.children,n),e.child;case 12:return _n(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,wt(Fp,s._currentValue),s._currentValue=o,i!==null)if(Vs(i.value,o)){if(i.children===r.children&&!zn.current){e=Zr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=Hr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),vx(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(xe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),vx(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}_n(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,il(e,n),r=Es(r),s=s(r),e.flags|=1,_n(t,e,s,n),e.child;case 14:return s=e.type,r=As(s,e.pendingProps),r=As(s.type,r),LS(t,e,s,r,n);case 15:return z3(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:As(s,r),Zf(t,e),e.tag=1,Un(s)?(t=!0,Rp(e)):t=!1,il(e,n),F3(e,s,r),kx(e,s,r,n),Ex(null,e,s,!0,t,n);case 19:return q3(t,e,n);case 22:return U3(t,e,n)}throw Error(xe(156,e.tag))};function lT(t,e){return RP(t,e)}function n6(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(t,e,n,s){return new n6(t,e,n,s)}function zw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function s6(t){if(typeof t=="function")return zw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ow)return 11;if(t===aw)return 14}return 2}function qi(t,e){var n=t.alternate;return n===null?(n=Ss(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function np(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")zw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fa:return qo(n.children,r,i,e);case iw:o=8,r|=8;break;case Yb:return t=Ss(12,n,e,r|2),t.elementType=Yb,t.lanes=i,t;case Gb:return t=Ss(13,n,e,r),t.elementType=Gb,t.lanes=i,t;case Kb:return t=Ss(19,n,e,r),t.elementType=Kb,t.lanes=i,t;case xP:return Q0(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gP:o=10;break e;case bP:o=9;break e;case ow:o=11;break e;case aw:o=14;break e;case xi:o=16,s=null;break e}throw Error(xe(130,t==null?t:typeof t,""))}return e=Ss(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function qo(t,e,n,s){return t=Ss(7,t,s,e),t.lanes=n,t}function Q0(t,e,n,s){return t=Ss(22,t,s,e),t.elementType=xP,t.lanes=n,t.stateNode={isHidden:!1},t}function _g(t,e,n){return t=Ss(6,t,null,e),t.lanes=n,t}function Eg(t,e,n){return e=Ss(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r6(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=og(0),this.expirationTimes=og(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=og(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uw(t,e,n,s,r,i,o,a,l){return t=new r6(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ss(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_w(i),t}function i6(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:La,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function cT(t){if(!t)return Ji;t=t._reactInternals;e:{if(xa(t)!==t||t.tag!==1)throw Error(xe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(xe(171))}if(t.tag===1){var n=t.type;if(Un(n))return c3(t,n,e)}return e}function uT(t,e,n,s,r,i,o,a,l){return t=Uw(n,s,!0,t,r,i,o,a,l),t.context=cT(null),n=t.current,s=Pn(),r=Vi(n),i=Hr(s,r),i.callback=e??null,Wi(n,i,r),t.current.lanes=r,oh(t,r,s),Wn(t,s),t}function J0(t,e,n,s){var r=e.current,i=Pn(),o=Vi(r);return n=cT(n),e.context===null?e.context=n:e.pendingContext=n,e=Hr(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Wi(r,e,o),t!==null&&(Hs(t,r,o,i),Xf(t,r,o)),o}function Gp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function KS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ww(t,e){KS(t,e),(t=t.alternate)&&KS(t,e)}function o6(){return null}var dT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hw(t){this._internalRoot=t}Z0.prototype.render=Hw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(xe(409));J0(t,e,null,null)};Z0.prototype.unmount=Hw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ra(function(){J0(null,t,null,null)}),e[Qr]=null}};function Z0(t){this._internalRoot=t}Z0.prototype.unstable_scheduleHydration=function(t){if(t){var e=UP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wi.length&&e!==0&&e<wi[n].priority;n++);wi.splice(n,0,t),n===0&&HP(t)}};function Vw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function em(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function XS(){}function a6(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=Gp(o);i.call(c)}}var o=uT(e,s,t,0,null,!1,!1,"",XS);return t._reactRootContainer=o,t[Qr]=o.current,ad(t.nodeType===8?t.parentNode:t),ra(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=Gp(l);a.call(c)}}var l=Uw(t,0,!1,null,null,!1,!1,"",XS);return t._reactRootContainer=l,t[Qr]=l.current,ad(t.nodeType===8?t.parentNode:t),ra(function(){J0(e,l,n,s)}),l}function tm(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Gp(o);a.call(l)}}J0(e,o,t,r)}else o=a6(n,e,t,r,s);return Gp(o)}BP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mu(e.pendingLanes);n!==0&&(uw(e,n|1),Wn(e,Ft()),!(lt&6)&&(Kl=Ft()+500,ro()))}break;case 13:ra(function(){var s=Jr(t,1);if(s!==null){var r=Pn();Hs(s,t,1,r)}}),Ww(t,1)}};dw=function(t){if(t.tag===13){var e=Jr(t,134217728);if(e!==null){var n=Pn();Hs(e,t,134217728,n)}Ww(t,134217728)}};zP=function(t){if(t.tag===13){var e=Vi(t),n=Jr(t,e);if(n!==null){var s=Pn();Hs(n,t,e,s)}Ww(t,e)}};UP=function(){return pt};WP=function(t,e){var n=pt;try{return pt=t,e()}finally{pt=n}};ix=function(t,e,n){switch(e){case"input":if(Jb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=V0(s);if(!r)throw Error(xe(90));wP(s),Jb(s,r)}}}break;case"textarea":SP(t,n);break;case"select":e=n.value,e!=null&&tl(t,!!n.multiple,e,!1)}};MP=Fw;IP=ra;var l6={usingClientEntryPoint:!1,Events:[lh,Ua,V0,PP,TP,Fw]},Uc={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c6={bundleType:Uc.bundleType,version:Uc.version,rendererPackageName:Uc.rendererPackageName,rendererConfig:Uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AP(t),t===null?null:t.stateNode},findFiberByHostInstance:Uc.findFiberByHostInstance||o6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{z0=Yh.inject(c6),pr=Yh}catch{}}is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l6;is.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vw(e))throw Error(xe(200));return i6(t,e,null,n)};is.createRoot=function(t,e){if(!Vw(t))throw Error(xe(299));var n=!1,s="",r=dT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Uw(t,1,!1,null,null,n,!1,s,r),t[Qr]=e.current,ad(t.nodeType===8?t.parentNode:t),new Hw(e)};is.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(xe(188)):(t=Object.keys(t).join(","),Error(xe(268,t)));return t=AP(e),t=t===null?null:t.stateNode,t};is.flushSync=function(t){return ra(t)};is.hydrate=function(t,e,n){if(!em(e))throw Error(xe(200));return tm(null,t,e,!0,n)};is.hydrateRoot=function(t,e,n){if(!Vw(t))throw Error(xe(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=dT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uT(e,null,t,1,n??null,r,!1,i,o),t[Qr]=e.current,ad(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Z0(e)};is.render=function(t,e,n){if(!em(e))throw Error(xe(200));return tm(null,t,e,!1,n)};is.unmountComponentAtNode=function(t){if(!em(t))throw Error(xe(40));return t._reactRootContainer?(ra(function(){tm(null,null,t,!1,function(){t._reactRootContainer=null,t[Qr]=null})}),!0):!1};is.unstable_batchedUpdates=Fw;is.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!em(n))throw Error(xe(200));if(t==null||t._reactInternals===void 0)throw Error(xe(38));return tm(t,e,n,!1,s)};is.version="18.3.1-next-f1338f8080-20240426";function hT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hT)}catch(t){console.error(t)}}hT(),hP.exports=is;var io=hP.exports;const u6=Qy(io);var QS=io;Vb.createRoot=QS.createRoot,Vb.hydrateRoot=QS.hydrateRoot;var uh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},d6={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ki,Xy,HE,h6=(HE=class{constructor(){Me(this,ki,d6);Me(this,Xy,!1)}setTimeoutProvider(t){ue(this,ki,t)}setTimeout(t,e){return K(this,ki).setTimeout(t,e)}clearTimeout(t){K(this,ki).clearTimeout(t)}setInterval(t,e){return K(this,ki).setInterval(t,e)}clearInterval(t){K(this,ki).clearInterval(t)}},ki=new WeakMap,Xy=new WeakMap,HE),Fx=new h6;function f6(t){setTimeout(t,0)}var nm=typeof window>"u"||"Deno"in globalThis;function bs(){}function p6(t,e){return typeof t=="function"?t(e):t}function m6(t){return typeof t=="number"&&t>=0&&t!==1/0}function g6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function $x(t,e){return typeof t=="function"?t(e):t}function b6(t,e){return typeof t=="function"?t(e):t}function JS(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:a}=t;if(o){if(s){if(e.queryHash!==qw(o,e.options))return!1}else if(!gd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function ZS(t,e){const{exact:n,status:s,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(ia(e.options.mutationKey)!==ia(i))return!1}else if(!gd(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function qw(t,e){return((e==null?void 0:e.queryKeyHashFn)||ia)(t)}function ia(t){return JSON.stringify(t,(e,n)=>Bx(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function gd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>gd(t[n],e[n])):!1}var x6=Object.prototype.hasOwnProperty;function fT(t,e){if(t===e)return t;const n=ek(t)&&ek(e);if(!n&&!(Bx(t)&&Bx(e)))return e;const r=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const u=n?c:i[c],d=t[u],f=e[u];if(d===f){a[u]=d,(n?c<r:x6.call(t,u))&&l++;continue}if(d===null||f===null||typeof d!="object"||typeof f!="object"){a[u]=f;continue}const p=fT(d,f);a[u]=p,p===d&&l++}return r===o&&l===r?t:a}function y6(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function ek(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Bx(t){if(!tk(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!tk(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function tk(t){return Object.prototype.toString.call(t)==="[object Object]"}function w6(t){return new Promise(e=>{Fx.setTimeout(e,t)})}function v6(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?fT(t,e):e}function S6(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function k6(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var Yw=Symbol();function pT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Yw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function C6(t,e){return typeof t=="function"?t(...e):!!t}var jo,Ci,ml,VE,_6=(VE=class extends uh{constructor(){super();Me(this,jo);Me(this,Ci);Me(this,ml);ue(this,ml,e=>{if(!nm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,Ci)||this.setEventListener(K(this,ml))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,Ci))==null||e.call(this),ue(this,Ci,void 0))}setEventListener(e){var n;ue(this,ml,e),(n=K(this,Ci))==null||n.call(this),ue(this,Ci,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){K(this,jo)!==e&&(ue(this,jo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,jo)=="boolean"?K(this,jo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},jo=new WeakMap,Ci=new WeakMap,ml=new WeakMap,VE),mT=new _6;function E6(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}var P6=f6;function T6(){let t=[],e=0,n=a=>{a()},s=a=>{a()},r=P6;const i=a=>{e?t.push(a):r(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&r(()=>{s(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{r=a}}}var on=T6(),gl,_i,bl,qE,M6=(qE=class extends uh{constructor(){super();Me(this,gl,!0);Me(this,_i);Me(this,bl);ue(this,bl,e=>{if(!nm&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){K(this,_i)||this.setEventListener(K(this,bl))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,_i))==null||e.call(this),ue(this,_i,void 0))}setEventListener(e){var n;ue(this,bl,e),(n=K(this,_i))==null||n.call(this),ue(this,_i,e(this.setOnline.bind(this)))}setOnline(e){K(this,gl)!==e&&(ue(this,gl,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return K(this,gl)}},gl=new WeakMap,_i=new WeakMap,bl=new WeakMap,qE),Kp=new M6;function I6(t){return Math.min(1e3*2**t,3e4)}function gT(t){return(t??"online")==="online"?Kp.isOnline():!0}var zx=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function bT(t){let e=!1,n=0,s;const r=E6(),i=()=>r.status!=="pending",o=b=>{var x;if(!i()){const g=new zx(b);f(g),(x=t.onCancel)==null||x.call(t,g)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>mT.isFocused()&&(t.networkMode==="always"||Kp.isOnline())&&t.canRun(),u=()=>gT(t.networkMode)&&t.canRun(),d=b=>{i()||(s==null||s(),r.resolve(b))},f=b=>{i()||(s==null||s(),r.reject(b))},p=()=>new Promise(b=>{var x;s=g=>{(i()||c())&&b(g)},(x=t.onPause)==null||x.call(t)}).then(()=>{var b;s=void 0,i()||(b=t.onContinue)==null||b.call(t)}),m=()=>{if(i())return;let b;const x=n===0?t.initialPromise:void 0;try{b=x??t.fn()}catch(g){b=Promise.reject(g)}Promise.resolve(b).then(d).catch(g=>{var C;if(i())return;const y=t.retry??(nm?0:3),S=t.retryDelay??I6,w=typeof S=="function"?S(n,g):S,v=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(e||!v){f(g);return}n++,(C=t.onFail)==null||C.call(t,n,g),w6(w).then(()=>c()?void 0:p()).then(()=>{e?f(g):m()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(s==null||s(),r),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?m():p().then(m),r)}}var Lo,YE,xT=(YE=class{constructor(){Me(this,Lo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),m6(this.gcTime)&&ue(this,Lo,Fx.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(nm?1/0:5*60*1e3))}clearGcTimeout(){K(this,Lo)&&(Fx.clearTimeout(K(this,Lo)),ue(this,Lo,void 0))}},Lo=new WeakMap,YE),Fo,xl,gs,$o,Yt,Jd,Bo,Rs,Er,GE,N6=(GE=class extends xT{constructor(e){super();Me(this,Rs);Me(this,Fo);Me(this,xl);Me(this,gs);Me(this,$o);Me(this,Yt);Me(this,Jd);Me(this,Bo);ue(this,Bo,!1),ue(this,Jd,e.defaultOptions),this.setOptions(e.options),this.observers=[],ue(this,$o,e.client),ue(this,gs,K(this,$o).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ue(this,Fo,sk(this.options)),this.state=e.state??K(this,Fo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=K(this,Yt))==null?void 0:e.promise}setOptions(e){if(this.options={...K(this,Jd),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=sk(this.options);n.data!==void 0&&(this.setState(nk(n.data,n.dataUpdatedAt)),ue(this,Fo,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,gs).remove(this)}setData(e,n){const s=v6(this.state.data,e,this.options);return nt(this,Rs,Er).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(e,n){nt(this,Rs,Er).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var s,r;const n=(s=K(this,Yt))==null?void 0:s.promise;return(r=K(this,Yt))==null||r.cancel(e),n?n.then(bs).catch(bs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,Fo))}isActive(){return this.observers.some(e=>b6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Yw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>$x(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!g6(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=K(this,Yt))==null||n.continue()}onOnline(){var n;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=K(this,Yt))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),K(this,gs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(K(this,Yt)&&(K(this,Bo)?K(this,Yt).cancel({revert:!0}):K(this,Yt).cancelRetry()),this.scheduleGc()),K(this,gs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||nt(this,Rs,Er).call(this,{type:"invalidate"})}async fetch(e,n){var l,c,u,d,f,p,m,b,x,g,y,S;if(this.state.fetchStatus!=="idle"&&((l=K(this,Yt))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(K(this,Yt))return K(this,Yt).continueRetry(),K(this,Yt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const w=this.observers.find(v=>v.options.queryFn);w&&this.setOptions(w.options)}const s=new AbortController,r=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(ue(this,Bo,!0),s.signal)})},i=()=>{const w=pT(this.options,n),C=(()=>{const _={client:K(this,$o),queryKey:this.queryKey,meta:this.meta};return r(_),_})();return ue(this,Bo,!1),this.options.persister?this.options.persister(w,C,this):w(C)},a=(()=>{const w={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:K(this,$o),state:this.state,fetchFn:i};return r(w),w})();(c=this.options.behavior)==null||c.onFetch(a,this),ue(this,xl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&nt(this,Rs,Er).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),ue(this,Yt,bT({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:w=>{w instanceof zx&&w.revert&&this.setState({...K(this,xl),fetchStatus:"idle"}),s.abort()},onFail:(w,v)=>{nt(this,Rs,Er).call(this,{type:"failed",failureCount:w,error:v})},onPause:()=>{nt(this,Rs,Er).call(this,{type:"pause"})},onContinue:()=>{nt(this,Rs,Er).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const w=await K(this,Yt).start();if(w===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(w),(p=(f=K(this,gs).config).onSuccess)==null||p.call(f,w,this),(b=(m=K(this,gs).config).onSettled)==null||b.call(m,w,this.state.error,this),w}catch(w){if(w instanceof zx){if(w.silent)return K(this,Yt).promise;if(w.revert){if(this.state.data===void 0)throw w;return this.state.data}}throw nt(this,Rs,Er).call(this,{type:"error",error:w}),(g=(x=K(this,gs).config).onError)==null||g.call(x,w,this),(S=(y=K(this,gs).config).onSettled)==null||S.call(y,this.state.data,w,this),w}finally{this.scheduleGc()}}},Fo=new WeakMap,xl=new WeakMap,gs=new WeakMap,$o=new WeakMap,Yt=new WeakMap,Jd=new WeakMap,Bo=new WeakMap,Rs=new WeakSet,Er=function(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...D6(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,...nk(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ue(this,xl,e.manual?r:void 0),r;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),on.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,gs).notify({query:this,type:"updated",action:e})})},GE);function D6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function nk(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function sk(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function rk(t){return{onFetch:(e,n)=>{var u,d,f,p,m;const s=e.options,r=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let b=!1;const x=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},g=pT(e.options,e.fetchOptions),y=async(S,w,v)=>{if(b)return Promise.reject();if(w==null&&S.pages.length)return Promise.resolve(S);const _=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:w,direction:v?"backward":"forward",meta:e.options.meta};return x(I),I})(),P=await g(_),{maxPages:M}=e.options,E=v?k6:S6;return{pages:E(S.pages,P,M),pageParams:E(S.pageParams,w,M)}};if(r&&i.length){const S=r==="backward",w=S?A6:ik,v={pages:i,pageParams:o},C=w(s,v);a=await y(v,C,S)}else{const S=t??i.length;do{const w=l===0?o[0]??s.initialPageParam:ik(s,a);if(l>0&&w==null)break;a=await y(a,w),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var b,x;return(x=(b=e.options).persister)==null?void 0:x.call(b,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function ik(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function A6(t,{pages:e,pageParams:n}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,n[0],n):void 0}var Zd,ar,Cn,zo,lr,pi,KE,O6=(KE=class extends xT{constructor(e){super();Me(this,lr);Me(this,Zd);Me(this,ar);Me(this,Cn);Me(this,zo);ue(this,Zd,e.client),this.mutationId=e.mutationId,ue(this,Cn,e.mutationCache),ue(this,ar,[]),this.state=e.state||yT(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){K(this,ar).includes(e)||(K(this,ar).push(e),this.clearGcTimeout(),K(this,Cn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ue(this,ar,K(this,ar).filter(n=>n!==e)),this.scheduleGc(),K(this,Cn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){K(this,ar).length||(this.state.status==="pending"?this.scheduleGc():K(this,Cn).remove(this))}continue(){var e;return((e=K(this,zo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,u,d,f,p,m,b,x,g,y,S,w,v,C,_,P,M;const n=()=>{nt(this,lr,pi).call(this,{type:"continue"})},s={client:K(this,Zd),meta:this.options.meta,mutationKey:this.options.mutationKey};ue(this,zo,bT({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(E,I)=>{nt(this,lr,pi).call(this,{type:"failed",failureCount:E,error:I})},onPause:()=>{nt(this,lr,pi).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,Cn).canRun(this)}));const r=this.state.status==="pending",i=!K(this,zo).canStart();try{if(r)n();else{nt(this,lr,pi).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=K(this,Cn).config).onMutate)==null?void 0:a.call(o,e,this,s));const I=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,s));I!==this.state.context&&nt(this,lr,pi).call(this,{type:"pending",context:I,variables:e,isPaused:i})}const E=await K(this,zo).start();return await((d=(u=K(this,Cn).config).onSuccess)==null?void 0:d.call(u,E,e,this.state.context,this,s)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,E,e,this.state.context,s)),await((b=(m=K(this,Cn).config).onSettled)==null?void 0:b.call(m,E,null,this.state.variables,this.state.context,this,s)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,E,null,e,this.state.context,s)),nt(this,lr,pi).call(this,{type:"success",data:E}),E}catch(E){try{throw await((S=(y=K(this,Cn).config).onError)==null?void 0:S.call(y,E,e,this.state.context,this,s)),await((v=(w=this.options).onError)==null?void 0:v.call(w,E,e,this.state.context,s)),await((_=(C=K(this,Cn).config).onSettled)==null?void 0:_.call(C,void 0,E,this.state.variables,this.state.context,this,s)),await((M=(P=this.options).onSettled)==null?void 0:M.call(P,void 0,E,e,this.state.context,s)),E}finally{nt(this,lr,pi).call(this,{type:"error",error:E})}}finally{K(this,Cn).runNext(this)}}},Zd=new WeakMap,ar=new WeakMap,Cn=new WeakMap,zo=new WeakMap,lr=new WeakSet,pi=function(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),on.batch(()=>{K(this,ar).forEach(s=>{s.onMutationUpdate(e)}),K(this,Cn).notify({mutation:this,type:"updated",action:e})})},KE);function yT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ar,js,eh,XE,R6=(XE=class extends uh{constructor(e={}){super();Me(this,Ar);Me(this,js);Me(this,eh);this.config=e,ue(this,Ar,new Set),ue(this,js,new Map),ue(this,eh,0)}build(e,n,s){const r=new O6({client:e,mutationCache:this,mutationId:++Ih(this,eh)._,options:e.defaultMutationOptions(n),state:s});return this.add(r),r}add(e){K(this,Ar).add(e);const n=Gh(e);if(typeof n=="string"){const s=K(this,js).get(n);s?s.push(e):K(this,js).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(K(this,Ar).delete(e)){const n=Gh(e);if(typeof n=="string"){const s=K(this,js).get(n);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&K(this,js).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Gh(e);if(typeof n=="string"){const s=K(this,js).get(n),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const n=Gh(e);if(typeof n=="string"){const r=(s=K(this,js).get(n))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){on.batch(()=>{K(this,Ar).forEach(e=>{this.notify({type:"removed",mutation:e})}),K(this,Ar).clear(),K(this,js).clear()})}getAll(){return Array.from(K(this,Ar))}find(e){const n={exact:!0,...e};return this.getAll().find(s=>ZS(n,s))}findAll(e={}){return this.getAll().filter(n=>ZS(e,n))}notify(e){on.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return on.batch(()=>Promise.all(e.map(n=>n.continue().catch(bs))))}},Ar=new WeakMap,js=new WeakMap,eh=new WeakMap,XE);function Gh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Or,Ei,An,Rr,Kr,sp,Ux,QE,j6=(QE=class extends uh{constructor(n,s){super();Me(this,Kr);Me(this,Or);Me(this,Ei);Me(this,An);Me(this,Rr);ue(this,Or,n),this.setOptions(s),this.bindMethods(),nt(this,Kr,sp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var r;const s=this.options;this.options=K(this,Or).defaultMutationOptions(n),y6(this.options,s)||K(this,Or).getMutationCache().notify({type:"observerOptionsUpdated",mutation:K(this,An),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&ia(s.mutationKey)!==ia(this.options.mutationKey)?this.reset():((r=K(this,An))==null?void 0:r.state.status)==="pending"&&K(this,An).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=K(this,An))==null||n.removeObserver(this)}onMutationUpdate(n){nt(this,Kr,sp).call(this),nt(this,Kr,Ux).call(this,n)}getCurrentResult(){return K(this,Ei)}reset(){var n;(n=K(this,An))==null||n.removeObserver(this),ue(this,An,void 0),nt(this,Kr,sp).call(this),nt(this,Kr,Ux).call(this)}mutate(n,s){var r;return ue(this,Rr,s),(r=K(this,An))==null||r.removeObserver(this),ue(this,An,K(this,Or).getMutationCache().build(K(this,Or),this.options)),K(this,An).addObserver(this),K(this,An).execute(n)}},Or=new WeakMap,Ei=new WeakMap,An=new WeakMap,Rr=new WeakMap,Kr=new WeakSet,sp=function(){var s;const n=((s=K(this,An))==null?void 0:s.state)??yT();ue(this,Ei,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Ux=function(n){on.batch(()=>{var s,r,i,o,a,l,c,u;if(K(this,Rr)&&this.hasListeners()){const d=K(this,Ei).variables,f=K(this,Ei).context,p={client:K(this,Or),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((r=(s=K(this,Rr)).onSuccess)==null||r.call(s,n.data,d,f,p),(o=(i=K(this,Rr)).onSettled)==null||o.call(i,n.data,null,d,f,p)):(n==null?void 0:n.type)==="error"&&((l=(a=K(this,Rr)).onError)==null||l.call(a,n.error,d,f,p),(u=(c=K(this,Rr)).onSettled)==null||u.call(c,void 0,n.error,d,f,p))}this.listeners.forEach(d=>{d(K(this,Ei))})})},QE),cr,JE,L6=(JE=class extends uh{constructor(e={}){super();Me(this,cr);this.config=e,ue(this,cr,new Map)}build(e,n,s){const r=n.queryKey,i=n.queryHash??qw(r,n);let o=this.get(i);return o||(o=new N6({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){K(this,cr).has(e.queryHash)||(K(this,cr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,cr).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,cr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){on.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,cr).get(e)}getAll(){return[...K(this,cr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>JS(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>JS(e,s)):n}notify(e){on.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){on.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){on.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},cr=new WeakMap,JE),Nt,Pi,Ti,yl,wl,Mi,vl,Sl,ZE,F6=(ZE=class{constructor(t={}){Me(this,Nt);Me(this,Pi);Me(this,Ti);Me(this,yl);Me(this,wl);Me(this,Mi);Me(this,vl);Me(this,Sl);ue(this,Nt,t.queryCache||new L6),ue(this,Pi,t.mutationCache||new R6),ue(this,Ti,t.defaultOptions||{}),ue(this,yl,new Map),ue(this,wl,new Map),ue(this,Mi,0)}mount(){Ih(this,Mi)._++,K(this,Mi)===1&&(ue(this,vl,mT.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,Nt).onFocus())})),ue(this,Sl,Kp.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,Nt).onOnline())})))}unmount(){var t,e;Ih(this,Mi)._--,K(this,Mi)===0&&((t=K(this,vl))==null||t.call(this),ue(this,vl,void 0),(e=K(this,Sl))==null||e.call(this),ue(this,Sl,void 0))}isFetching(t){return K(this,Nt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,Pi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,Nt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=K(this,Nt).build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime($x(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return K(this,Nt).findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),r=K(this,Nt).get(s.queryHash),i=r==null?void 0:r.state.data,o=p6(e,i);if(o!==void 0)return K(this,Nt).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return on.batch(()=>K(this,Nt).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,Nt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,Nt);on.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,Nt);return on.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=on.batch(()=>K(this,Nt).findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(bs).catch(bs)}invalidateQueries(t,e={}){return on.batch(()=>(K(this,Nt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=on.batch(()=>K(this,Nt).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(bs)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(bs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,Nt).build(this,e);return n.isStaleByTime($x(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(bs).catch(bs)}fetchInfiniteQuery(t){return t.behavior=rk(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(bs).catch(bs)}ensureInfiniteQueryData(t){return t.behavior=rk(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Kp.isOnline()?K(this,Pi).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,Nt)}getMutationCache(){return K(this,Pi)}getDefaultOptions(){return K(this,Ti)}setDefaultOptions(t){ue(this,Ti,t)}setQueryDefaults(t,e){K(this,yl).set(ia(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,yl).values()],n={};return e.forEach(s=>{gd(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){K(this,wl).set(ia(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,wl).values()],n={};return e.forEach(s=>{gd(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,Ti).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Yw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,Ti).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,Nt).clear(),K(this,Pi).clear()}},Nt=new WeakMap,Pi=new WeakMap,Ti=new WeakMap,yl=new WeakMap,wl=new WeakMap,Mi=new WeakMap,vl=new WeakMap,Sl=new WeakMap,ZE),wT=k.createContext(void 0),$6=t=>{const e=k.useContext(wT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},B6=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(wT.Provider,{value:t,children:e}));function Gw(t,e){const n=$6(),[s]=k.useState(()=>new j6(n,t));k.useEffect(()=>{s.setOptions(t)},[s,t]);const r=k.useSyncExternalStore(k.useCallback(o=>s.subscribe(on.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=k.useCallback((o,a)=>{s.mutate(o,a).catch(bs)},[s]);if(r.error&&C6(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}function Kw(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Xp(t){return Kw(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const vT="2.43.2";let Wc={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${vT}`},vn=class Wx extends Error{constructor(e,n={}){var a;const s=(()=>{var l;return n.cause instanceof Wx?n.cause.details:(l=n.cause)!=null&&l.message?n.cause.message:n.details})(),r=n.cause instanceof Wx&&n.cause.docsPath||n.docsPath,i=(a=Wc.getDocsUrl)==null?void 0:a.call(Wc,{...n,docsPath:r}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...s?[`Details: ${s}`]:[],...Wc.version?[`Version: ${Wc.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=s,this.docsPath=r,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=vT}walk(e){return ST(this,e)}};function ST(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?ST(t.cause,e):e?null:t}class z6 extends vn{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class kT extends vn{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class CT extends vn{constructor({size:e,targetSize:n,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function dh(t,{dir:e,size:n=32}={}){return typeof t=="string"?U6(t,{dir:e,size:n}):W6(t,{dir:e,size:n})}function U6(t,{dir:e,size:n=32}={}){if(n===null)return t;const s=t.replace("0x","");if(s.length>n*2)throw new CT({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function W6(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new CT({size:t.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let r=0;r<n;r++){const i=e==="right";s[i?r:n-r-1]=t[i?r:t.length-r-1]}return s}class H6 extends vn{constructor({max:e,min:n,signed:s,size:r,value:i}){super(`Number "${i}" is not in safe ${r?`${r*8}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class V6 extends vn{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function sm(t,{size:e}){if(Xp(t)>e)throw new V6({givenSize:Xp(t),maxSize:e})}const q6=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Y6(t,e={}){let n="";for(let r=0;r<t.length;r++)n+=q6[t[r]];const s=`0x${n}`;return typeof e.size=="number"?(sm(s,{size:e.size}),dh(s,{dir:"right",size:e.size})):s}function Qp(t,e={}){const{signed:n,size:s}=e,r=BigInt(t);let i;s?n?i=(1n<<BigInt(s)*8n-1n)-1n:i=2n**(BigInt(s)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&r>i||r<o){const l=typeof t=="bigint"?"n":"";throw new H6({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:s,value:`${t}${l}`})}const a=`0x${(n&&r<0?(1n<<BigInt(s*8))+BigInt(r):r).toString(16)}`;return s?dh(a,{size:s}):a}const G6=new TextEncoder;function K6(t,e={}){const n=G6.encode(t);return Y6(n,e)}const X6=new TextEncoder;function Q6(t,e={}){return typeof t=="number"||typeof t=="bigint"?Z6(t,e):typeof t=="boolean"?J6(t,e):Kw(t)?_T(t,e):ET(t,e)}function J6(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(sm(n,{size:e.size}),dh(n,{size:e.size})):n}const Sr={zero:48,nine:57,A:65,F:70,a:97,f:102};function ok(t){if(t>=Sr.zero&&t<=Sr.nine)return t-Sr.zero;if(t>=Sr.A&&t<=Sr.F)return t-(Sr.A-10);if(t>=Sr.a&&t<=Sr.f)return t-(Sr.a-10)}function _T(t,e={}){let n=t;e.size&&(sm(n,{size:e.size}),n=dh(n,{dir:"right",size:e.size}));let s=n.slice(2);s.length%2&&(s=`0${s}`);const r=s.length/2,i=new Uint8Array(r);for(let o=0,a=0;o<r;o++){const l=ok(s.charCodeAt(a++)),c=ok(s.charCodeAt(a++));if(l===void 0||c===void 0)throw new vn(`Invalid byte sequence ("${s[a-2]}${s[a-1]}" in "${s}").`);i[o]=l*16+c}return i}function Z6(t,e){const n=Qp(t,e);return _T(n)}function ET(t,e={}){const n=X6.encode(t);return typeof e.size=="number"?(sm(n,{size:e.size}),dh(n,{dir:"right",size:e.size})):n}const Kh=BigInt(2**32-1),ak=BigInt(32);function e8(t,e=!1){return e?{h:Number(t&Kh),l:Number(t>>ak&Kh)}:{h:Number(t>>ak&Kh)|0,l:Number(t&Kh)|0}}function t8(t,e=!1){const n=t.length;let s=new Uint32Array(n),r=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=e8(t[i],e);[s[i],r[i]]=[o,a]}return[s,r]}const n8=(t,e,n)=>t<<n|e>>>32-n,s8=(t,e,n)=>e<<n|t>>>32-n,r8=(t,e,n)=>e<<n-32|t>>>64-n,i8=(t,e,n)=>t<<n-32|e>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function o8(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function lk(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Jp(t,...e){if(!o8(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ck(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function a8(t,e){Jp(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function l8(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function PT(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const c8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function u8(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function d8(t){for(let e=0;e<t.length;e++)t[e]=u8(t[e]);return t}const uk=c8?t=>t:d8;function h8(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function TT(t){return typeof t=="string"&&(t=h8(t)),Jp(t),t}let f8=class{};function p8(t){const e=s=>t().update(TT(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const m8=BigInt(0),Hc=BigInt(1),g8=BigInt(2),b8=BigInt(7),x8=BigInt(256),y8=BigInt(113),MT=[],IT=[],NT=[];for(let t=0,e=Hc,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],MT.push(2*(5*s+n)),IT.push((t+1)*(t+2)/2%64);let r=m8;for(let i=0;i<7;i++)e=(e<<Hc^(e>>b8)*y8)%x8,e&g8&&(r^=Hc<<(Hc<<BigInt(i))-Hc);NT.push(r)}const DT=t8(NT,!0),w8=DT[0],v8=DT[1],dk=(t,e,n)=>n>32?r8(t,e,n):n8(t,e,n),hk=(t,e,n)=>n>32?i8(t,e,n):s8(t,e,n);function S8(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],d=dk(c,u,1)^n[a],f=hk(c,u,1)^n[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let r=t[2],i=t[3];for(let o=0;o<24;o++){const a=IT[o],l=dk(r,i,a),c=hk(r,i,a),u=MT[o];r=t[u],i=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=w8[s],t[1]^=v8[s]}PT(n)}let k8=class AT extends f8{constructor(e,n,s,r=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=i,lk(s),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=l8(this.state)}clone(){return this._cloneInto()}keccak(){uk(this.state32),S8(this.state32,this.rounds),uk(this.state32),this.posOut=0,this.pos=0}update(e){ck(this),e=TT(e),Jp(e);const{blockLen:n,state:s}=this,r=e.length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:r}=this;e[s]^=n,n&128&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){ck(this,!1),Jp(e),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(n.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return lk(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(a8(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,PT(this.state)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new AT(n,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}};const C8=(t,e,n)=>p8(()=>new k8(e,t,n)),_8=C8(1,136,256/8);function E8(t,e){return _8(Kw(t,{strict:!1})?Q6(t):t)}class Xw extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}}const P8=/^0x[a-fA-F0-9]{40}$/,Pg=new Xw(8192);function OT(t,e){const{strict:n=!0}=e??{},s=`${t}.${n}`;if(Pg.has(s))return Pg.get(s);const r=P8.test(t)?t.toLowerCase()===t?!0:n?RT(t)===t:!0:!1;return Pg.set(s,r),r}const Tg=new Xw(8192);function RT(t,e){if(Tg.has(`${t}.${e}`))return Tg.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),s=E8(ET(n)),r=n.split("");for(let o=0;o<40;o+=2)s[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(s[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const i=`0x${r.join("")}`;return Tg.set(`${t}.${e}`,i),i}function bu(t,e){if(!OT(t,{strict:!1}))throw new kT({address:t});return RT(t,e)}const T8=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,M8=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Qw(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const Vr=(t,e,n)=>JSON.stringify(t,(s,r)=>typeof r=="bigint"?r.toString():r,n),Jw=t=>t;class Bu extends vn{constructor({body:e,cause:n,details:s,headers:r,status:i,url:o}){super("HTTP request failed.",{cause:n,details:s,metaMessages:[i&&`Status: ${i}`,`URL: ${Jw(o)}`,e&&`Request body: ${Vr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=r,this.status=i,this.url=o}}class jT extends vn{constructor({body:e,error:n,url:s}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Jw(s)}`,`Request body: ${Vr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data,this.url=s}}class fk extends vn{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Jw(n)}`,`Request body: ${Vr(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=n}}const I8=-1;class Yn extends vn{constructor(e,{code:n,docsPath:s,metaMessages:r,name:i,shortMessage:o}){super(o,{cause:e,docsPath:s,metaMessages:r||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof jT?e.code:n??I8}}class as extends Yn{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class bd extends Yn{constructor(e){super(e,{code:bd.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(bd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class xd extends Yn{constructor(e){super(e,{code:xd.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(xd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class yd extends Yn{constructor(e,{method:n}={}){super(e,{code:yd.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(yd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class wd extends Yn{constructor(e){super(e,{code:wd.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(wd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Xl extends Yn{constructor(e){super(e,{code:Xl.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Xl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class vd extends Yn{constructor(e){super(e,{code:vd.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(vd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Sd extends Yn{constructor(e){super(e,{code:Sd.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Sd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Yi extends Yn{constructor(e){super(e,{code:Yi.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Yi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class kd extends Yn{constructor(e){super(e,{code:kd.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(kd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Io extends Yn{constructor(e,{method:n}={}){super(e,{code:Io.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Io,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Ql extends Yn{constructor(e){super(e,{code:Ql.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Ql,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Cd extends Yn{constructor(e){super(e,{code:Cd.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Cd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class En extends as{constructor(e){super(e,{code:En.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(En,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class _d extends as{constructor(e){super(e,{code:_d.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(_d,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Ed extends as{constructor(e,{method:n}={}){super(e,{code:Ed.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Ed,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Pd extends as{constructor(e){super(e,{code:Pd.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Pd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Td extends as{constructor(e){super(e,{code:Td.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Td,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class oa extends as{constructor(e){super(e,{code:oa.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(oa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Md extends as{constructor(e){super(e,{code:Md.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Md,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Id extends as{constructor(e){super(e,{code:Id.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Id,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Nd extends as{constructor(e){super(e,{code:Nd.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Nd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Dd extends as{constructor(e){super(e,{code:Dd.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Dd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Ad extends as{constructor(e){super(e,{code:Ad.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Ad,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Od extends as{constructor(e){super(e,{code:Od.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Od,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Rd extends as{constructor(e){super(e,{code:Rd.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Rd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class N8 extends Yn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const D8="modulepreload",A8=function(t){return"/"+t},pk={},LT=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=A8(l),l in pk)return;pk[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":D8,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function O8(){let t=()=>{},e=()=>{};return{promise:new Promise((s,r)=>{t=s,e=r}),resolve:t,reject:e}}const Mg=new Map;function R8({fn:t,id:e,shouldSplitBatch:n,wait:s=0,sort:r}){const i=async()=>{const u=l();o();const d=u.map(({args:f})=>f);d.length!==0&&t(d).then(f=>{r&&Array.isArray(f)&&f.sort(r);for(let p=0;p<u.length;p++){const{resolve:m}=u[p];m==null||m([f[p],f])}}).catch(f=>{for(let p=0;p<u.length;p++){const{reject:m}=u[p];m==null||m(f)}})},o=()=>Mg.delete(e),a=()=>l().map(({args:u})=>u),l=()=>Mg.get(e)||[],c=u=>Mg.set(e,[...l(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:f,reject:p}=O8();return(n==null?void 0:n([...a(),u]))&&i(),l().length>0?(c({args:u,resolve:f,reject:p}),d):(c({args:u,resolve:f,reject:p}),setTimeout(i,s),d)}}}const Xh=new Xw(8192);function j8(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Xh.get(n))return Xh.get(n);const s=t().finally(()=>Xh.delete(n));return Xh.set(n,s),s}async function L8(t){return new Promise(e=>setTimeout(e,t))}function FT(t,{delay:e=100,retryCount:n=2,shouldRetry:s=()=>!0}={}){return new Promise((r,i)=>{const o=async({count:a=0}={})=>{const l=async({error:c})=>{const u=typeof e=="function"?e({count:a,error:c}):e;u&&await L8(u),o({count:a+1})};try{const c=await t();r(c)}catch(c){if(a<n&&await s({count:a,error:c}))return l({error:c});i(c)}};o()})}function F8(t,e={}){return async(n,s={})=>{var d;const{dedupe:r=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:l}={...e,...s},{method:c}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(c))throw new Io(new Error("method not supported"),{method:c});if(i!=null&&i.include&&!i.include.includes(c))throw new Io(new Error("method not supported"),{method:c});const u=r?K6(`${l}.${Vr(n)}`):void 0;return j8(()=>FT(async()=>{try{return await t(n)}catch(f){const p=f;switch(p.code){case bd.code:throw new bd(p);case xd.code:throw new xd(p);case yd.code:throw new yd(p,{method:n.method});case wd.code:throw new wd(p);case Xl.code:throw new Xl(p);case vd.code:throw new vd(p);case Sd.code:throw new Sd(p);case Yi.code:throw new Yi(p);case kd.code:throw new kd(p);case Io.code:throw new Io(p,{method:n.method});case Ql.code:throw new Ql(p);case Cd.code:throw new Cd(p);case En.code:throw new En(p);case _d.code:throw new _d(p);case Ed.code:throw new Ed(p);case Pd.code:throw new Pd(p);case Td.code:throw new Td(p);case oa.code:throw new oa(p);case Md.code:throw new Md(p);case Id.code:throw new Id(p);case Nd.code:throw new Nd(p);case Dd.code:throw new Dd(p);case Ad.code:throw new Ad(p);case Od.code:throw new Od(p);case Rd.code:throw new Rd(p);case 5e3:throw new En(p);default:throw f instanceof vn?f:new N8(p)}}},{delay:({count:f,error:p})=>{var m;if(p&&p instanceof Bu){const b=(m=p==null?void 0:p.headers)==null?void 0:m.get("Retry-After");if(b!=null&&b.match(/\d/))return Number.parseInt(b,10)*1e3}return~~(1<<f)*o},retryCount:a,shouldRetry:({error:f})=>$8(f)}),{enabled:r,id:u})}}function $8(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Ql.code||t.code===Xl.code:t instanceof Bu&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function $T(t){const e={formatters:void 0,fees:void 0,serializers:void 0,...t};function n(s){return r=>{const i=typeof r=="function"?r(s):r,o={...s,...i};return Object.assign(o,{extend:n(o)})}}return Object.assign(e,{extend:n(e)})}function BT(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:s}){return new Promise((r,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{s?a.abort():i(e)},n)),r(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function B8(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const mk=B8();function z8(t,e={}){return{async request(n){var f;const{body:s,fetchFn:r=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=n,l={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:u,signal:d}=l;try{const p=await BT(async({signal:b})=>{const x={...l,body:Array.isArray(s)?Vr(s.map(w=>({jsonrpc:"2.0",id:w.id??mk.take(),...w}))):Vr({jsonrpc:"2.0",id:s.id??mk.take(),...s}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:d||(a>0?b:null)},g=new Request(t,x),y=await(i==null?void 0:i(g,x))??{...x,url:t};return await r(y.url??t,y)},{errorInstance:new fk({body:s,url:t}),timeout:a,signal:!0});o&&await o(p);let m;if((f=p.headers.get("Content-Type"))!=null&&f.startsWith("application/json"))m=await p.json();else{m=await p.text();try{m=JSON.parse(m||"{}")}catch(b){if(p.ok)throw b;m={error:m}}}if(!p.ok)throw new Bu({body:s,details:Vr(m.error)||p.statusText,headers:p.headers,status:p.status,url:t});return m}catch(p){throw p instanceof Bu||p instanceof fk?p:new Bu({body:s,cause:p,url:t})}}}}class U8 extends vn{constructor({domain:e}){super(`Invalid domain "${Vr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class W8 extends vn{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class H8 extends vn{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function V8(t){const{domain:e,message:n,primaryType:s,types:r}=t,i=(l,c)=>{const u={...c};for(const d of l){const{name:f,type:p}=d;p==="address"&&(u[f]=u[f].toLowerCase())}return u},o=r.EIP712Domain?e?i(r.EIP712Domain,e):{}:{},a=(()=>{if(s!=="EIP712Domain")return i(r[s],n)})();return Vr({domain:o,message:a,primaryType:s,types:r})}function q8(t){const{domain:e,message:n,primaryType:s,types:r}=t,i=(o,a)=>{for(const l of o){const{name:c,type:u}=l,d=a[c],f=u.match(M8);if(f&&(typeof d=="number"||typeof d=="bigint")){const[b,x,g]=f;Qp(d,{signed:x==="int",size:Number.parseInt(g,10)/8})}if(u==="address"&&typeof d=="string"&&!OT(d))throw new kT({address:d});const p=u.match(T8);if(p){const[b,x]=p;if(x&&Xp(d)!==Number.parseInt(x,10))throw new z6({expectedSize:Number.parseInt(x,10),givenSize:Xp(d)})}const m=r[u];m&&(G8(u),i(m,d))}};if(r.EIP712Domain&&e){if(typeof e!="object")throw new U8({domain:e});i(r.EIP712Domain,e)}if(s!=="EIP712Domain")if(r[s])i(r[s],n);else throw new W8({primaryType:s,types:r})}function Y8({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function G8(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new H8({type:t})}class K8 extends vn{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}async function X8(t,e){const{account:n=t.account,domain:s,message:r,primaryType:i}=e;if(!n)throw new K8({docsPath:"/docs/actions/wallet/signTypedData"});const o=Qw(n),a={EIP712Domain:Y8({domain:s}),...e.types};if(q8({domain:s,message:r,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:s,message:r,primaryType:i,types:a});const l=V8({domain:s,message:r,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,l]},{retryCount:0})}function Q8(t,e,n){const s=t[e.name];if(typeof s=="function")return s;const r=t[n];return typeof r=="function"?r:i=>e(t,i)}const rp="3.0.0",J8=()=>`@wagmi/core@${rp}`;var zT=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},Zp,UT;let oo=class Hx extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return J8()}constructor(e,n={}){var i;super(),Zp.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const s=n.cause instanceof Hx?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,r=n.cause instanceof Hx&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...r?[`Docs: ${this.docsBaseUrl}${r}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...s?[`Details: ${s}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=s,this.docsPath=r,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return zT(this,Zp,"m",UT).call(this,this,e)}};Zp=new WeakSet,UT=function t(e,n){return n!=null&&n(e)?e:e.cause?zT(this,Zp,"m",t).call(this,e.cause,n):e};class Vx extends oo{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Z8 extends oo{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class eO extends oo{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class tO extends oo{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class nO extends oo{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class sO extends oo{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function rO(t,e){var s;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Z8;try{t.setState(a=>({...a,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:r,...i}=e,o=await n.connect(i);return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((s=t.storage)==null?void 0:s.setItem("recentConnectorId",n.id)),t.setState(a=>({...a,connections:new Map(a.connections).set(n.uid,{accounts:i.withCapabilities?o.accounts.map(l=>typeof l=="object"?l.address:l):o.accounts,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:i.withCapabilities?o.accounts.map(a=>typeof a=="object"?a:{address:a,capabilities:{}}):o.accounts,chainId:o.chainId}}catch(r){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),r}}const qx=256;let Qh=qx,Jh;function WT(t=11){if(!Jh||Qh+t>qx*2){Jh="",Qh=0;for(let e=0;e<qx;e++)Jh+=(256+Math.random()*256|0).toString(16).substring(1)}return Jh.substring(Qh,Qh+++t)}function HT(t){const{batch:e,chain:n,ccipRead:s,key:r="base",name:i="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),l=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(l/2),500),4e3),u=t.pollingInterval??c,d=t.cacheTime??u,f=t.account?Qw(t.account):void 0,{config:p,request:m,value:b}=t.transport({account:f,chain:n,pollingInterval:u}),x={...p,...b},g={account:f,batch:e,cacheTime:d,ccipRead:s,chain:n,key:r,name:i,pollingInterval:u,request:m,transport:x,type:o,uid:WT(),...a?{experimental_blockTag:a}:{}};function y(S){return w=>{const v=w(S);for(const _ in g)delete v[_];const C={...S,...v};return Object.assign(C,{extend:y(C)})}}return Object.assign(g,{extend:y(g)})}function VT({key:t,methods:e,name:n,request:s,retryCount:r=3,retryDelay:i=150,timeout:o,type:a},l){const c=WT();return{config:{key:t,methods:e,name:n,request:s,retryCount:r,retryDelay:i,timeout:o,type:a},request:F8(s,{methods:e,retryCount:r,retryDelay:i,uid:c}),value:l}}function iO(t,e={}){const{key:n="custom",methods:s,name:r="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>VT({key:n,methods:s,name:r,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}class oO extends vn{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function gk(t,e={}){const{batch:n,fetchFn:s,fetchOptions:r,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:l,onFetchResponse:c,retryDelay:u,raw:d}=e;return({chain:f,retryCount:p,timeout:m})=>{const{batchSize:b=1e3,wait:x=0}=typeof n=="object"?n:{},g=e.retryCount??p,y=m??e.timeout??1e4,S=f==null?void 0:f.rpcUrls.default.http[0];if(!S)throw new oO;const w=z8(S,{fetchFn:s,fetchOptions:r,onRequest:l,onResponse:c,timeout:y});return VT({key:i,methods:o,name:a,async request({method:v,params:C}){const _={method:v,params:C},{schedule:P}=R8({id:S,wait:x,shouldSplitBatch(O){return O.length>b},fn:O=>w.request({body:O}),sort:(O,j)=>O.id-j.id}),M=async O=>n?P(O):[await w.request({body:O})],[{error:E,result:I}]=await M(_);if(d)return{error:E,result:I};if(E)throw new jT({body:_,error:E,url:S});return I},retryCount:g,retryDelay:u,timeout:y,type:"http"},{fetchOptions:r,url:S})}}async function aO(t,e={}){const{assertChainId:n=!0}=e;let s;if(e.connector){const{connector:u}=e;if(t.state.status==="reconnecting"&&!u.getAccounts&&!u.getChainId)throw new sO({connector:u});const[d,f]=await Promise.all([u.getAccounts().catch(p=>{if(e.account===null)return[];throw p}),u.getChainId()]);s={accounts:d,chainId:f,connector:u}}else s=t.state.connections.get(t.state.current);if(!s)throw new eO;const r=e.chainId??s.chainId,i=await s.connector.getChainId();if(n&&i!==r)throw new nO({connectionChainId:r,connectorChainId:i});const o=s.connector;if(o.getClient)return o.getClient({chainId:r});const a=Qw(e.account??s.accounts[0]);if(a&&(a.address=bu(a.address)),e.account&&!s.accounts.some(u=>u.toLowerCase()===a.address.toLowerCase()))throw new tO({address:a.address,connector:o});const l=t.chains.find(u=>u.id===r),c=await s.connector.getProvider({chainId:r});return HT({account:a,chain:l,name:"Connector Client",transport:u=>iO(c)({...u,retryCount:0})})}async function lO(t,e={}){var r,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,l=o.get(a);n=l==null?void 0:l.connector}const s=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),s.delete(n.uid)),t.setState(o=>{if(s.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=s.values().next().value;return{...o,connections:new Map(s),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(r=t.state.connections.get(o))==null?void 0:r.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}function bk(t){return t.state.chainId}function Jl(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!Jl(t[s],e[s]))return!1;return!0}if(typeof t.valueOf=="function"&&t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t);if(n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!Object.hasOwn(e,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(i&&!Jl(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function qT(t){const e=t.state.current,n=t.state.connections.get(e),s=n==null?void 0:n.accounts,r=s==null?void 0:s[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:r,addresses:s,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:r,addresses:s,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!r,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:r,addresses:s,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}let Zh=[];function Yx(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Jl(Zh,e)?Zh:(Zh=e,e)}let ef=[];function xk(t){const e=t.connectors;return ef.length===e.length&&ef.every((n,s)=>n===e[s])?ef:(ef=e,e)}let Ig=!1;async function cO(t,e={}){var c,u;if(Ig)return[];Ig=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((c=e.connectors)!=null&&c.length)for(const d of e.connectors){let f;typeof d=="function"?f=t._internal.connectors.setup(d):f=d,n.push(f)}else n.push(...t.connectors);let s;try{s=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const r={};for(const[,d]of t.state.connections)r[d.connector.id]=1;s&&(r[s]=0);const i=Object.keys(r).length>0?[...n].sort((d,f)=>(r[d.id]??10)-(r[f.id]??10)):n;let o=!1;const a=[],l=[];for(const d of i){const f=await d.getProvider().catch(()=>{});if(!f||l.some(b=>b===f)||!await d.isAuthorized())continue;const m=await d.connect({isReconnecting:!0}).catch(()=>null);m&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(b=>{const x=new Map(o?b.connections:new Map).set(d.uid,{accounts:m.accounts,chainId:m.chainId,connector:d});return{...b,current:o?b.current:d.uid,connections:x}}),a.push({accounts:m.accounts,chainId:m.chainId,connector:d}),l.push(f),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Ig=!1,a}async function uO(t,e){const{account:n,connector:s,...r}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await aO(t,{account:n,connector:s}),Q8(i,X8,"signTypedData")({...r,...n?{account:n}:{}})}class Ta extends oo{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}function dO(t,e){const{onChange:n}=e;return t.subscribe(s=>s.chainId,n)}function hO(t,e){const{onChange:n}=e;return t.subscribe(()=>qT(t),n,{equalityFn(s,r){const{connector:i,...o}=s,{connector:a,...l}=r;return Jl(o,l)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function fO(t,e){const{onChange:n}=e;return t.subscribe(()=>Yx(t),n,{equalityFn:Jl})}function pO(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((s,r)=>{n(Object.values(s),r)})}rm.type="injected";function rm(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function s(){const l=t.target;if(typeof l=="function"){const c=l();if(c)return c}return typeof l=="object"?l:typeof l=="string"?{...mO[l]??{id:l,name:`${l[0].toUpperCase()}${l.slice(1)}`,provider:`is${l[0].toUpperCase()}${l.slice(1)}`}}:{id:"injected",name:"Injected",provider(c){return c==null?void 0:c.ethereum}}}let r,i,o,a;return l=>({get icon(){return s().icon},get id(){return s().id},get name(){return s().name},type:rm.type,async setup(){const c=await this.getProvider();c!=null&&c.on&&t.target&&(o||(o=this.onConnect.bind(this),c.on("connect",o)),r||(r=this.onAccountsChanged.bind(this),c.on("accountsChanged",r)))},async connect({chainId:c,isReconnecting:u,withCapabilities:d}={}){var m,b,x,g,y,S;const f=await this.getProvider();if(!f)throw new Ta;let p=[];if(u)p=await this.getAccounts().catch(()=>[]);else if(e)try{p=(g=(x=(b=(m=(await f.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:m.caveats)==null?void 0:b[0])==null?void 0:x.value)==null?void 0:g.map(v=>bu(v)),p.length>0&&(p=await this.getAccounts())}catch(w){const v=w;if(v.code===En.code)throw new En(v);if(v.code===Yi.code)throw v}try{!(p!=null&&p.length)&&!u&&(p=(await f.request({method:"eth_requestAccounts"})).map(C=>bu(C))),o&&(f.removeListener("connect",o),o=void 0),r||(r=this.onAccountsChanged.bind(this),f.on("accountsChanged",r)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a));let w=await this.getChainId();if(c&&w!==c){const v=await this.switchChain({chainId:c}).catch(C=>{if(C.code===En.code)throw C;return{id:w}});w=(v==null?void 0:v.id)??w}return e&&await((y=l.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((S=l.storage)==null?void 0:S.setItem("injected.connected",!0)),{accounts:d?p.map(v=>({address:v,capabilities:{}})):p,chainId:w}}catch(w){const v=w;throw v.code===En.code?new En(v):v.code===Yi.code?new Yi(v):v}},async disconnect(){var u,d;const c=await this.getProvider();if(!c)throw new Ta;i&&(c.removeListener("chainChanged",i),i=void 0),a&&(c.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),c.on("connect",o));try{await BT(()=>c.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=l.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=l.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const c=await this.getProvider();if(!c)throw new Ta;return(await c.request({method:"eth_accounts"})).map(d=>bu(d))},async getChainId(){const c=await this.getProvider();if(!c)throw new Ta;const u=await c.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let c;const u=s();return typeof u.provider=="function"?c=u.provider(window):typeof u.provider=="string"?c=ip(window,u.provider):c=u.provider,c&&!c.removeListener&&("off"in c&&typeof c.off=="function"?c.removeListener=c.off:c.removeListener=()=>{}),c},async isAuthorized(){var c,u;try{if(e&&await((c=l.storage)==null?void 0:c.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=l.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const m=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",m),!!await this.getProvider()),b=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(g=>window.addEventListener("ethereum#initialized",()=>g(m()),{once:!0}))]:[],new Promise(g=>setTimeout(()=>g(m()),b))]))return!0}throw new Ta}return!!(await FT(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:c,chainId:u}){var m,b,x,g;const d=await this.getProvider();if(!d)throw new Ta;const f=l.chains.find(y=>y.id===u);if(!f)throw new oa(new Vx);const p=new Promise(y=>{const S=w=>{"chainId"in w&&w.chainId===u&&(l.emitter.off("change",S),y())};l.emitter.on("change",S)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Qp(u)}]}).then(async()=>{await this.getChainId()===u&&l.emitter.emit("change",{chainId:u})}),p]),f}catch(y){const S=y;if(S.code===4902||((b=(m=S==null?void 0:S.data)==null?void 0:m.originalError)==null?void 0:b.code)===4902)try{const{default:w,...v}=f.blockExplorers??{};let C;c!=null&&c.blockExplorerUrls?C=c.blockExplorerUrls:w&&(C=[w.url,...Object.values(v).map(M=>M.url)]);let _;(x=c==null?void 0:c.rpcUrls)!=null&&x.length?_=c.rpcUrls:_=[((g=f.rpcUrls.default)==null?void 0:g.http[0])??""];const P={blockExplorerUrls:C,chainId:Qp(u),chainName:(c==null?void 0:c.chainName)??f.name,iconUrls:c==null?void 0:c.iconUrls,nativeCurrency:(c==null?void 0:c.nativeCurrency)??f.nativeCurrency,rpcUrls:_};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[P]}).then(async()=>{if(await this.getChainId()===u)l.emitter.emit("change",{chainId:u});else throw new En(new Error("User rejected switch after adding network."))}),p]),f}catch(w){throw new En(w)}throw S.code===En.code?new En(S):new oa(S)}},async onAccountsChanged(c){var u;if(c.length===0)this.onDisconnect();else if(l.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=l.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else l.emitter.emit("change",{accounts:c.map(d=>bu(d))})},onChainChanged(c){const u=Number(c);l.emitter.emit("change",{chainId:u})},async onConnect(c){const u=await this.getAccounts();if(u.length===0)return;const d=Number(c.chainId);l.emitter.emit("connect",{accounts:u,chainId:d});const f=await this.getProvider();f&&(o&&(f.removeListener("connect",o),o=void 0),r||(r=this.onAccountsChanged.bind(this),f.on("accountsChanged",r)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a)))},async onDisconnect(c){const u=await this.getProvider();c&&c.code===1013&&u&&(await this.getAccounts()).length||(l.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const mO={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:ip(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return ip(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const s of n)if(e[s])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:ip(t,"isPhantom")}}};function ip(t,e){function n(r){return typeof e=="function"?e(r):typeof e=="string"?r[e]:!0}const s=t.ethereum;if(s!=null&&s.providers)return s.providers.find(r=>n(r));if(s&&n(s))return s}function gO(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function bO(){const t=new Set;let e=[];const n=()=>gO(r=>{e.some(({info:i})=>i.uuid===r.info.uuid)||(e=[...e,r],t.forEach(i=>i(e,{added:[r]})))});let s=n();return{_listeners(){return t},clear(){t.forEach(r=>r([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),s==null||s()},findProvider({rdns:r}){return e.find(i=>i.info.rdns===r)},getProviders(){return e},reset(){this.clear(),s==null||s(),s=n()},subscribe(r,{emitImmediately:i}={}){return t.add(r),i&&r(e,{added:e}),()=>t.delete(r)}}}const xO=t=>(e,n,s)=>{const r=s.subscribe;return s.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=o(s.getState());c=f=>{const p=o(f);if(!u(d,p)){const m=d;a(d=p,m)}},l!=null&&l.fireImmediately&&a(d,d)}return r(c)},t(e,n,s)},yO=xO;function wO(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(r))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(r,i)=>n.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>n.removeItem(r)}}const Gx=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(s){return Gx(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return Gx(s)(n)}}}},vO=(t,e)=>(n,s,r)=>{let i={storage:wO(()=>localStorage),partialize:b=>b,version:0,merge:(b,x)=>({...x,...b}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...b)},s,r);const u=()=>{const b=i.partialize({...s()});return c.setItem(i.name,{state:b,version:i.version})},d=r.setState;r.setState=(b,x)=>{d(b,x),u()};const f=t((...b)=>{n(...b),u()},s,r);r.getInitialState=()=>f;let p;const m=()=>{var b,x;if(!c)return;o=!1,a.forEach(y=>{var S;return y((S=s())!=null?S:f)});const g=((x=i.onRehydrateStorage)==null?void 0:x.call(i,(b=s())!=null?b:f))||void 0;return Gx(c.getItem.bind(c))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate)return[!0,i.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var S;const[w,v]=y;if(p=i.merge(v,(S=s())!=null?S:f),n(p,!0),w)return u()}).then(()=>{g==null||g(p,void 0),p=s(),o=!0,l.forEach(y=>y(p))}).catch(y=>{g==null||g(void 0,y)})};return r.persist={setOptions:b=>{i={...i,...b},b.storage&&(c=b.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:b=>(a.add(b),()=>{a.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},i.skipHydration||m(),p||f},SO=vO,yk=t=>{let e;const n=new Set,s=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(p=>p(e,f))}},r=()=>e,a={setState:s,getState:r,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(s,r,a);return a},Ng=t=>t?yk(t):yk;var YT={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function r(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new r(u,d||l,f),m=n?n+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new s:delete l._events[c]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,m=new Array(p);f<p;f++)m[f]=d[f].fn;return m},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,p,m){var b=n?n+c:c;if(!this._events[b])return!1;var x=this._events[b],g=arguments.length,y,S;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),g){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,d),!0;case 4:return x.fn.call(x.context,u,d,f),!0;case 5:return x.fn.call(x.context,u,d,f,p),!0;case 6:return x.fn.call(x.context,u,d,f,p,m),!0}for(S=1,y=new Array(g-1);S<g;S++)y[S-1]=arguments[S];x.fn.apply(x.context,y)}else{var w=x.length,v;for(S=0;S<w;S++)switch(x[S].once&&this.removeListener(c,x[S].fn,void 0,!0),g){case 1:x[S].fn.call(x[S].context);break;case 2:x[S].fn.call(x[S].context,u);break;case 3:x[S].fn.call(x[S].context,u,d);break;case 4:x[S].fn.call(x[S].context,u,d,f);break;default:if(!y)for(v=1,y=new Array(g-1);v<g;v++)y[v-1]=arguments[v];x[S].fn.apply(x[S].context,y)}}return!0},a.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!f||m.once)&&(!d||m.context===d)&&o(this,p);else{for(var b=0,x=[],g=m.length;b<g;b++)(m[b].fn!==u||f&&!m[b].once||d&&m[b].context!==d)&&x.push(m[b]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(YT);var kO=YT.exports;const CO=Qy(kO);class _O{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new CO})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const s=n[0];this._emitter.emit(e,{uid:this.uid,...s})}listenerCount(e){return this._emitter.listenerCount(e)}}function EO(t){return new _O(t)}function PO(t,e){return JSON.parse(t,(n,s)=>{let r=s;return(r==null?void 0:r.__type)==="bigint"&&(r=BigInt(r.value)),(r==null?void 0:r.__type)==="Map"&&(r=new Map(r.value)),(e==null?void 0:e(n,r))??r})}function wk(t,e){return t.slice(0,e).join(".")||"."}function vk(t,e){const{length:n}=t;for(let s=0;s<n;++s)if(t[s]===e)return s+1;return 0}function TO(t,e){const n=typeof t=="function",s=typeof e=="function",r=[],i=[];return function(a,l){if(typeof l=="object")if(r.length){const c=vk(r,this);c===0?r[r.length]=this:(r.splice(c),i.splice(c)),i[i.length]=a;const u=vk(r,l);if(u!==0)return s?e.call(this,a,l,wk(i,u)):`[ref=${wk(i,u)}]`}else r[0]=l,i[0]=a;return n?t.call(this,a,l):l}}function MO(t,e,n,s){return JSON.stringify(t,TO((r,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(r,o))??o},s),n??void 0)}function IO(t){const{deserialize:e=PO,key:n="wagmi",serialize:s=MO,storage:r=GT}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...r,key:n,async getItem(o,a){const l=r.getItem(`${n}.${o}`),c=await i(l);return c?e(c)??null:a??null},async setItem(o,a){const l=`${n}.${o}`;a===null?await i(r.removeItem(l)):await i(r.setItem(l,s(a)))},async removeItem(o){await i(r.removeItem(`${n}.${o}`))}}}const GT={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function NO(){const t=typeof window<"u"&&window.localStorage?window.localStorage:GT;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const Kx=256;let tf=Kx,nf;function DO(t=11){if(!nf||tf+t>Kx*2){nf="",tf=0;for(let e=0;e<Kx;e++)nf+=(256+Math.random()*256|0).toString(16).substring(1)}return nf.substring(tf,tf+++t)}function AO(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=IO({storage:NO()}),syncConnectedChain:s=!0,ssr:r=!1,...i}=t,o=typeof window<"u"&&e?bO():void 0,a=Ng(()=>i.chains),l=Ng(()=>{const v=[],C=new Set;for(const _ of i.connectors??[]){const P=c(_);if(v.push(P),!r&&P.rdns){const M=typeof P.rdns=="string"?[P.rdns]:P.rdns;for(const E of M)C.add(E)}}if(!r&&o){const _=o.getProviders();for(const P of _)C.has(P.info.rdns)||v.push(c(u(P)))}return v});function c(v){var P;const C=EO(DO()),_={...v({emitter:C,chains:a.getState(),storage:n,transports:i.transports}),emitter:C,uid:C.uid};return C.on("connect",S),(P=_.setup)==null||P.call(_),_}function u(v){const{info:C}=v,_=v.provider;return rm({target:{...C,id:C.rdns,provider:_}})}const d=new Map;function f(v={}){const C=v.chainId??x.getState().chainId,_=a.getState().find(M=>M.id===C);if(v.chainId&&!_)throw new Vx;{const M=d.get(x.getState().chainId);if(M&&!_)return M;if(!_)throw new Vx}{const M=d.get(C);if(M)return M}let P;if(i.client)P=i.client({chain:_});else{const M=_.id,E=a.getState().map(j=>j.id),I={},O=Object.entries(i);for(const[j,U]of O)if(!(j==="chains"||j==="client"||j==="connectors"||j==="transports"))if(typeof U=="object")if(M in U)I[j]=U[M];else{if(E.some(L=>L in U))continue;I[j]=U}else I[j]=U;P=HT({...I,chain:_,batch:I.batch??{multicall:!0},transport:j=>i.transports[M]({...j,connectors:l})})}return d.set(C,P),P}function p(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let m;const b="0.0.0-canary-";rp.startsWith(b)?m=Number.parseInt(rp.replace(b,""),10):m=Number.parseInt(rp.split(".")[0]??"0",10);const x=Ng(yO(n?SO(p,{migrate(v,C){if(C===m)return v;const _=p(),P=g(v,_.chainId);return{..._,chainId:P}},name:"store",partialize(v){return{connections:{__type:"Map",value:Array.from(v.connections.entries()).map(([C,_])=>{const{id:P,name:M,type:E,uid:I}=_.connector;return[C,{..._,connector:{id:P,name:M,type:E,uid:I}}]})},chainId:v.chainId,current:v.current}},merge(v,C){typeof v=="object"&&v&&"status"in v&&delete v.status;const _=g(v,C.chainId);return{...C,...v,chainId:_}},skipHydration:r,storage:n,version:m}):p));x.setState(p());function g(v,C){return v&&typeof v=="object"&&"chainId"in v&&typeof v.chainId=="number"&&a.getState().some(_=>_.id===v.chainId)?v.chainId:C}s&&x.subscribe(({connections:v,current:C})=>{var _;return C?(_=v.get(C))==null?void 0:_.chainId:void 0},v=>{if(a.getState().some(_=>_.id===v))return x.setState(_=>({..._,chainId:v??_.chainId}))}),o==null||o.subscribe(v=>{const C=new Set,_=new Set;for(const M of l.getState())if(C.add(M.id),M.rdns){const E=typeof M.rdns=="string"?[M.rdns]:M.rdns;for(const I of E)_.add(I)}const P=[];for(const M of v){if(_.has(M.info.rdns))continue;const E=c(u(M));C.has(E.id)||P.push(E)}n&&!x.persist.hasHydrated()||l.setState(M=>[...M,...P],!0)});function y(v){x.setState(C=>{const _=C.connections.get(v.uid);return _?{...C,connections:new Map(C.connections).set(v.uid,{accounts:v.accounts??_.accounts,chainId:v.chainId??_.chainId,connector:_.connector})}:C})}function S(v){x.getState().status==="connecting"||x.getState().status==="reconnecting"||x.setState(C=>{const _=l.getState().find(P=>P.uid===v.uid);return _?(_.emitter.listenerCount("connect")&&_.emitter.off("connect",y),_.emitter.listenerCount("change")||_.emitter.on("change",y),_.emitter.listenerCount("disconnect")||_.emitter.on("disconnect",w),{...C,connections:new Map(C.connections).set(v.uid,{accounts:v.accounts,chainId:v.chainId,connector:_}),current:v.uid,status:"connected"}):C})}function w(v){x.setState(C=>{const _=C.connections.get(v.uid);if(_){const M=_.connector;M.emitter.listenerCount("change")&&_.connector.emitter.off("change",y),M.emitter.listenerCount("disconnect")&&_.connector.emitter.off("disconnect",w),M.emitter.listenerCount("connect")||_.connector.emitter.on("connect",S)}if(C.connections.delete(v.uid),C.connections.size===0)return{...C,connections:new Map,current:null,status:"disconnected"};const P=C.connections.values().next().value;return{...C,connections:new Map(C.connections),current:P.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return l.getState()},storage:n,getClient:f,get state(){return x.getState()},setState(v){let C;typeof v=="function"?C=v(x.getState()):C=v;const _=p();typeof C!="object"&&(C=_),Object.keys(_).some(M=>!(M in C))&&(C=_),x.setState(C,!0)},subscribe(v,C,_){return x.subscribe(v,C,_?{..._,fireImmediately:_.emitImmediately}:void 0)},_internal:{mipd:o,async revalidate(){const v=x.getState(),C=v.connections;let _=v.current;for(const[,P]of C){const M=P.connector;M.isAuthorized&&await M.isAuthorized()||(C.delete(M.uid),_===M.uid&&(_=null))}x.setState(P=>({...P,connections:C,current:_}))},store:x,ssr:!!r,syncConnectedChain:s,transports:i.transports,chains:{setState(v){const C=typeof v=="function"?v(a.getState()):v;if(C.length!==0)return a.setState(C,!0)},subscribe(v){return a.subscribe(v)}},connectors:{providerDetailToConnector:u,setup:c,setState(v){return l.setState(typeof v=="function"?v(l.getState()):v,!0)},subscribe(v){return l.subscribe(v)}},events:{change:y,connect:S,disconnect:w}}}}function OO(t,e){const{initialState:n,reconnectOnMount:s}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(r=>r.id===n.chainId)?n.chainId:t.chains[0].id,connections:s?n.connections:new Map,status:s?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(r=>{var l;const i=new Set;for(const c of r??[])if(c.rdns){const u=Array.isArray(c.rdns)?c.rdns:[c.rdns];for(const d of u)i.add(d)}const o=[],a=((l=t._internal.mipd)==null?void 0:l.getProviders())??[];for(const c of a){if(i.has(c.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(c),d=t._internal.connectors.setup(u);o.push(d)}return[...r,...o]})),s?cO(t):t.storage&&t.setState(r=>({...r,connections:new Map}))}}}function RO(t){const{children:e,config:n,initialState:s,reconnectOnMount:r=!0}=t,{onMount:i}=OO(n,{initialState:s,reconnectOnMount:r});n._internal.ssr||i();const o=k.useRef(!0);return k.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const KT=k.createContext(void 0);function jO(t){const{children:e,config:n}=t,s={value:n};return k.createElement(RO,t,k.createElement(KT.Provider,s,e))}const LO="3.1.0",FO=()=>`wagmi@${LO}`;class $O extends oo{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return FO()}}class BO extends $O{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function zO(t){return{mutationFn(e){return rO(t,e)},mutationKey:["connect"]}}function UO(t){return{mutationFn(e){return lO(t,e)},mutationKey:["disconnect"]}}function WO(t){return{mutationFn(e){return uO(t,e)},mutationKey:["signTypedData"]}}function ya(t={}){const e=t.config??k.useContext(KT);if(!e)throw new BO;return e}function XT(t={}){const e=ya(t);return k.useSyncExternalStore(n=>dO(e,{onChange:n}),()=>bk(e),()=>bk(e))}var QT={exports:{}},JT={},ZT={exports:{}},eM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl=k;function HO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var VO=typeof Object.is=="function"?Object.is:HO,qO=Zl.useState,YO=Zl.useEffect,GO=Zl.useLayoutEffect,KO=Zl.useDebugValue;function XO(t,e){var n=e(),s=qO({inst:{value:n,getSnapshot:e}}),r=s[0].inst,i=s[1];return GO(function(){r.value=n,r.getSnapshot=e,Dg(r)&&i({inst:r})},[t,n,e]),YO(function(){return Dg(r)&&i({inst:r}),t(function(){Dg(r)&&i({inst:r})})},[t]),KO(n),n}function Dg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!VO(t,n)}catch{return!0}}function QO(t,e){return e()}var JO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?QO:XO;eM.useSyncExternalStore=Zl.useSyncExternalStore!==void 0?Zl.useSyncExternalStore:JO;ZT.exports=eM;var ZO=ZT.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im=k,eR=ZO;function tR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nR=typeof Object.is=="function"?Object.is:tR,sR=eR.useSyncExternalStore,rR=im.useRef,iR=im.useEffect,oR=im.useMemo,aR=im.useDebugValue;JT.useSyncExternalStoreWithSelector=function(t,e,n,s,r){var i=rR(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=oR(function(){function l(p){if(!c){if(c=!0,u=p,p=s(p),r!==void 0&&o.hasValue){var m=o.value;if(r(m,p))return d=m}return d=p}if(m=d,nR(u,p))return m;var b=s(p);return r!==void 0&&r(m,b)?(u=p,m):(u=p,d=b)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,s,r]);var a=sR(t,i[0],i[1]);return iR(function(){o.hasValue=!0,o.value=a},[a]),aR(a),a};QT.exports=JT;var lR=QT.exports;const Ag=t=>typeof t=="object"&&!Array.isArray(t);function cR(t,e,n=e,s=Jl){const r=k.useRef([]),i=lR.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(Ag(o)&&Ag(a)&&r.current.length){for(const l of r.current)if(!s(o[l],a[l]))return!1;return!0}return s(o,a)});return k.useMemo(()=>{if(Ag(i)){const o={...i};let a={};for(const[l,c]of Object.entries(o))a={...a,[l]:{configurable:!1,enumerable:!0,get:()=>(r.current.includes(l)||r.current.push(l),c)}};return Object.defineProperties(o,a),o}return i},[i])}function Zw(t={}){const e=ya(t);return cR(n=>hO(e,{onChange:n}),()=>qT(e))}function uR(t={}){const e=ya(t);return k.useSyncExternalStore(n=>pO(e,{onChange:n}),()=>xk(e),()=>xk(e))}function tM(t={}){const e=ya(t),n=zO(e),s=Gw({...t.mutation,...n});return k.useEffect(()=>e.subscribe(({status:r})=>r,(r,i)=>{i==="connected"&&r==="disconnected"&&s.reset()}),[e,s.reset]),{...s,connect:s.mutate,connectAsync:s.mutateAsync,connectors:uR({config:e})}}function dR(t={}){const e=ya(t);return k.useSyncExternalStore(n=>fO(e,{onChange:n}),()=>Yx(e),()=>Yx(e))}function nM(t={}){const e=ya(t),n=UO(e),s=Gw({...t.mutation,...n});return{...s,connectors:dR({config:e}).map(r=>r.connector),disconnect:s.mutate,disconnectAsync:s.mutateAsync}}function ev(t={}){const e=ya(t),n=WO(e),s=Gw({...t.mutation,...n});return{...s,mutate:s.mutate,mutateAsync:s.mutateAsync,signTypedData:s.mutate,signTypedDataAsync:s.mutateAsync}}class om{constructor(e,n=3,s=3e4){ce(this,"baseURL");ce(this,"timeout");ce(this,"maxRetries");this.baseURL=e.replace(/\/$/,""),this.maxRetries=n,this.timeout=s}async do(e){const n=Date.now();let s=null;for(let r=1;r<=this.maxRetries;r++)try{return{...await this.doRequest(e),duration:Date.now()-n}}catch(i){if(s=i,this.isNonceError(i))throw i;if(r<this.maxRetries){const o=r*1e3;await this.delay(o)}}throw new Error(`Request failed after ${this.maxRetries} attempts: ${s==null?void 0:s.message}`)}async doRequest(e){const n=`${this.baseURL}${e.path}`,s={"Content-Type":"application/json",Accept:"application/json, */*",...e.headers},r={method:e.method,headers:s,signal:AbortSignal.timeout(this.timeout)};e.body&&e.method!=="GET"?r.body=JSON.stringify(e.body):e.method==="GET"&&(r.body=void 0);const i=await fetch(n,r);let o;const a=i.headers.get("content-type");if(a!=null&&a.includes("application/json"))try{o=await i.json()}catch{o=await i.text()}else o=await i.text();if(i.status>=400)throw new Error(`HTTP ${i.status}: ${JSON.stringify(o)}`);return{statusCode:i.status,body:o,headers:i.headers}}isNonceError(e){const n=(e==null?void 0:e.message)||"";return n.toLowerCase().includes("nonce")||n.includes("InvalidNonce")||n.includes("NonceError")}delay(e){return new Promise(n=>setTimeout(n,e))}async get(e,n){return this.do({method:"GET",path:e,headers:n})}async post(e,n,s){return this.do({method:"POST",path:e,body:n,headers:s})}async put(e,n,s){return this.do({method:"PUT",path:e,body:n,headers:s})}async delete(e,n){return this.do({method:"DELETE",path:e,headers:n})}getBaseURL(){return this.baseURL}setTimeout(e){this.timeout=e}getTimeout(){return this.timeout}}const Yo=1e8;function ut(t){const e=typeof t=="string"?parseFloat(t):t;if(isNaN(e))throw new Error(`Invalid value for satoshi conversion: ${t}`);if(e<0)throw new Error(`Negative values not allowed for satoshi conversion: ${t}`);return BigInt(Math.floor(e*Yo)).toString()}function De(t){const e=BigInt(t);return Number(e)/Yo}function tv(t){if(t<0)throw new Error(`Negative values not allowed: ${t}`);return Math.floor(t*Yo)}function Xx(t){try{return BigInt(t)>=0n}catch{return!1}}function sM(t){return t.map(ut)}function rM(t){return t.map(De)}function Sk(t){return`0x${(typeof t=="string"?parseInt(t,10):t).toString(16)}`}let Vc={instance:null,module:null},hR=null;async function iM(){try{if(window.Go)console.log("wasm_exec.js already loaded");else{console.log("Loading wasm_exec.js...");const a=["/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.21.0/misc/wasm/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.20.0/misc/wasm/wasm_exec.js","https://unpkg.com/@go-wasm/wasm_exec@latest/wasm_exec.js"];let l=!1,c=null;for(const u of a)try{console.log(`Trying to load wasm_exec.js from: ${u}`),await new Promise((d,f)=>{const p=document.createElement("script");p.src=u,p.async=!0,p.onload=()=>{console.log(`Successfully loaded wasm_exec.js from: ${u}`),d()},p.onerror=()=>{f(new Error(`Failed to load from ${u}`))},document.head.appendChild(p)}),l=!0;break}catch(d){console.warn(`Failed to load from ${u}:`,d==null?void 0:d.message),c=d,document.head.querySelectorAll(`script[src="${u}"]`).forEach(p=>p.remove())}if(!l)throw new Error(`Failed to load wasm_exec.js from all sources. Last error: ${(c==null?void 0:c.message)||"Unknown error"}. Please ensure wasm_exec.js is available. You can download it from: https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.js`);console.log("wasm_exec.js loaded successfully")}const t=window.Go;if(!t)throw new Error("Go runtime not available. Make sure wasm_exec.js is loaded.");console.log("Go runtime available");const e=new t;hR=e,console.log("Go instance created");const n="/morm_signer.wasm";console.log("Loading WASM from:",n);let s;try{const a=await fetch(n);if(console.log("WASM fetch response:",{status:a.status,statusText:a.statusText,ok:a.ok,url:a.url}),!a.ok){const l=await a.text().catch(()=>"Unable to read error response");throw new Error(`Failed to load WASM from ${n}: ${a.status} ${a.statusText}. Make sure the morm_signer.wasm file is available in the public directory.`)}s=await a.arrayBuffer(),console.log("WASM file loaded successfully, size:",s.byteLength,"bytes")}catch(a){throw console.error("WASM fetch failed:",a),new Error(`Failed to fetch WASM file: ${(a==null?void 0:a.message)||a}. The file should be accessible at ${window.location.origin}${n}`)}console.log("Instantiating WASM module...");let r;try{r=await WebAssembly.instantiate(s,e.importObject),console.log("WASM module instantiated successfully")}catch(a){throw console.error("Failed to instantiate WASM:",a),new Error(`Failed to instantiate WASM module: ${(a==null?void 0:a.message)||a}. The WASM file may be corrupted or incompatible.`)}Vc.instance=r.instance,Vc.module=r.module,console.log("Running Go program..."),console.log("Window object before Go run:",Object.keys(window).filter(a=>typeof window[a]=="function"&&(a.startsWith("morm")||a.startsWith("derive")||a.startsWith("generate")||a==="Go")));try{e.run(Vc.instance),console.log("Go program started (run() completed)")}catch(a){throw console.error("Failed to run Go program:",a),new Error(`Failed to run Go program: ${(a==null?void 0:a.message)||a}. The WASM module may not be compatible with the current Go runtime.`)}console.log("Waiting for Go initialization and function exports...");const i=10;let o=[];for(let a=1;a<=i;a++){const l=Math.min(a*200,2e3);await new Promise(u=>setTimeout(u,l));const c=Object.keys(window).filter(u=>typeof window[u]=="function");if(o=c.filter(u=>u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u.startsWith("verify")||u.startsWith("map")||u.startsWith("validate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"),console.log(`Attempt ${a}/${i}:`,{waitTime:`${l}ms`,allWindowFunctions:c.length,exportedFunctions:o,sampleWindowKeys:c.slice(0,20)}),o.length>0){console.log(" Go functions found!",o);break}a===i&&(console.warn(" No expected functions found. All window functions:",c.sort()),console.warn(" Check if functions are exported with different names or if there are Go runtime errors"))}if(o.length===0){const a=[],l=Object.keys(window);if(console.error("Debugging info:",{totalWindowKeys:l.length,allFunctions:l.filter(c=>typeof window[c]=="function"),hasGo:typeof window.Go=="function",wasmInstance:Vc.instance!==null,wasmModule:Vc.module!==null}),typeof window.InitWASMSigner=="function"){console.log("Found InitWASMSigner function, calling it...");try{window.InitWASMSigner(),await new Promise(u=>setTimeout(u,500));const c=Object.keys(window).filter(u=>typeof window[u]=="function"&&(u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"));c.length>0&&(console.log(" Functions found after InitWASMSigner!",c),o=c)}catch(c){console.error("Failed to call InitWASMSigner:",c)}}if(o.length===0)throw new Error(`Go functions not exported after initialization.

ROOT CAUSE: The Go main() function in main_wasm.go does not call InitWASMSigner(), which is required to export functions via js.Global().Set().

SOLUTION: The Go code needs to be fixed. In main_wasm.go, the main() function should call:
  InitWASMSigner(CreateTestnetDomain()) // or appropriate domain

Current status:
- WASM file loaded: 
- Go runtime loaded: ${typeof window.Go=="function"?"":""}
- Go program run: 
- Functions exported: 

Check the browser console for detailed debugging information.`)}return console.log("WASM module loaded and initialized successfully"),!0}catch(t){throw console.error("Failed to load WASM module:",t),new Error((t==null?void 0:t.message)||`Failed to load WASM module: ${String(t)}`)}}class fR{constructor(){ce(this,"isInitialized",!1);ce(this,"wasmLoaded",!1)}async initialize(){try{return this.wasmLoaded=await iM(),this.isInitialized=this.wasmLoaded,this.wasmLoaded}catch(e){throw console.error("Failed to initialize MormSigner:",e),new Error((e==null?void 0:e.message)||"Failed to initialize WASM module")}}isReady(){return this.isInitialized&&this.wasmLoaded&&typeof window.mormGenerateEthereumKeypair=="function"&&typeof window.GenerateSingleSignature=="function"&&typeof window.GenerateMultisignSignatures=="function"&&typeof window.GetSupportedSignatureTypes=="function"&&typeof window.IsSignatureTypeSupported=="function"}async generateAddress(e,n=0){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=window.deriveAddress(e,n);return typeof s=="string"?{success:!0,address:s,index:n,mnemonic:e.substring(0,20)+"..."}:s&&s.error?{success:!1,error:s.error}:{success:!1,error:"Failed to derive address"}}catch(s){return console.error("Failed to generate address:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async generateMnemonic(e=12){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.generateMnemonic(e);return typeof n=="string"?{success:!0,mnemonic:n}:n&&n.error?{success:!1,error:n.error}:{success:!1,error:"Failed to generate mnemonic"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async generateKeypair(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const e=window.mormGenerateEthereumKeypair();return e.error?{success:!1,error:e.error}:{success:!0,privateKey:e.privateKey,address:e.address}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async signMessage(e,n,s={}){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=(s.useEIP712,"ECDSA_LEGACY"),i=window.generateSignature(r,e,n);return typeof i=="string"?{success:!0,signature:i,message:n,options:s}:i&&i.error?{success:!1,error:i.error}:{success:!1,error:"Failed to generate signature"}}catch(r){return console.error("Failed to sign message:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async signDeposit(e,n,s,r={}){const i={...r,depositMode:!0,walletAddress:n,amount:s},o=JSON.stringify({action:"deposit",owner:n,amount:s,nonce:r.nonce||Date.now(),deadline:r.deadline||Date.now()+36e5}),a=await this.signMessage(e,o,i);return{success:a.success,signature:a.signature,message:a.message,address:n,options:a.options,error:a.error}}async signEIP712(e,n,s={}){const r={...s,useEIP712:!0};return this.signMessage(e,n,r)}async prepareAgentSign(e){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.mormPrepareAgentSign(e.owner,e.agent,e.expiresInDays,e.permissions,e.nonce);return n&&n.error?{success:!1,error:n.error}:{success:!0,typedData:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async signAgentApproval(e,n){const s=await this.prepareAgentSign(n);if(!s.success||!s.typedData)return s;const r=JSON.stringify({action:"agent::approve",wallet:n.owner,agent:n.agent,agentName:n.agentName||"",expiresInDays:n.expiresInDays,permissions:n.permissions,nonce:n.nonce,deadline:Date.now()+n.expiresInDays*24*60*60*1e3}),i=await this.signMessage(e,r,{useEIP712:!0});return i.success?{success:!0,typedData:s.typedData,signature:i.signature}:{success:!1,error:i.error}}async verifySignature(e,n,s){if(!this.isReady())throw new Error("MormSigner not initialized");try{const r=window.verifySignature(e,n,s);return typeof r=="boolean"?r:!1}catch(r){return console.error("Failed to verify signature:",r),!1}}mapAlgorithm(e){if(!this.isReady())return"ECDSA_LEGACY";try{return window.mapAlgorithm(e)}catch(n){return console.error("Failed to map algorithm:",n),"ECDSA_LEGACY"}}validateNonce(e,n){if(!this.isReady())return!1;try{return window.validateNonce(e,n)}catch(s){return console.error("Failed to validate nonce:",s),!1}}getStatus(){return{initialized:this.isInitialized,wasmLoaded:this.wasmLoaded,ready:this.isReady()}}async generateSingleSignature(e,n,s){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateSingleSignature(e,n,s);return r.error?{success:!1,error:r.error}:{success:!0,signature:r.signature}}catch(r){return console.error("Failed to generate single signature:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async generateMultisignSignatures(e,n,s=!1){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateMultisignSignatures(e,n,s);if(r.error)return{success:!1,error:r.error};let i=null;if(r.tx)try{i=JSON.parse(r.tx)}catch(o){console.warn("Failed to parse updated transaction JSON:",o)}return{success:!0,tx:i,txJSON:r.tx}}catch(r){return console.error("Failed to generate multisign signatures:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}getSupportedSignatureTypes(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{return{success:!0,types:window.GetSupportedSignatureTypes()}}catch(e){return console.error("Failed to get supported signature types:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}isSignatureTypeSupported(e){if(!this.isReady())return!1;try{return window.IsSignatureTypeSupported(e)}catch(n){return console.error("Failed to check signature type support:",n),!1}}}const qe=new fR,pR=6e4,kk=100,Og=24*60*60*1e3,Rg=1;class nv{constructor(e){ce(this,"infoClient");ce(this,"onChainState",new Map);ce(this,"offChainNonces",new Map);ce(this,"syncTimers",new Map);this.infoClient=e}getOrCreateState(e){const n=e.toLowerCase();let s=this.onChainState.get(n);return s||(s={confirmed:0,pending:[],lastSync:0,mu:!1},this.onChainState.set(n,s)),s}async acquireLock(e){for(;e.mu;)await new Promise(n=>setTimeout(n,10));e.mu=!0}releaseLock(e){e.mu=!1}async syncWithCore(e){const n=this.getOrCreateState(e),s=Date.now();if(!(s-n.lastSync<pR))try{const r=await this.infoClient.getNonceStatus(e,!1),i=(r==null?void 0:r.next_nonce)!==void 0?typeof r.next_nonce=="string"?parseInt(r.next_nonce,10):r.next_nonce:0;n.confirmed=i,n.lastSync=s}catch(r){console.warn(`[NonceManager] Failed to sync with core for ${e}:`,r)}}async getNonce(e,n="latest"){const s=e.toLowerCase(),r=this.getOrCreateState(s);if(await this.syncWithCore(s),n==="latest")return r.confirmed;{const i=r.pending.length>0?Math.max(...r.pending):r.confirmed;return Math.max(r.confirmed,i)}}async validateNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{if(s||await this.syncWithCore(r),i.confirmed===0&&n<Rg)throw new Error(`nonce too low for new account: got ${n}, minimum ${Rg}`);if(i.confirmed>0&&n<=i.confirmed)throw new Error(`nonce too low: got ${n}, confirmed ${i.confirmed}`);if(i.pending.includes(n))throw new Error(`nonce already pending: ${n}`);if(i.pending.length>=kk)throw new Error(`pending nonce limit reached: max ${kk} pending nonces`);if(s){const o=this.offChainNonces.get(r);if(o){const a=o.get(n);if(a){const l=Date.now();if(l-a<Og)throw new Error(`nonce already used (off-chain): ${n}, expires in ${Math.floor((Og-(l-a))/1e3)}s`);o.delete(n)}}}i.pending.push(n),i.pending.sort((o,a)=>o-a)}finally{this.releaseLock(i)}}async commitNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){let a=this.offChainNonces.get(r);a||(a=new Map,this.offChainNonces.set(r,a)),a.set(n,Date.now())}else if(n===i.confirmed+1)for(i.confirmed=n;i.pending.length>0&&i.pending[0]===i.confirmed+1;){const a=i.pending.shift();i.confirmed=a}}finally{this.releaseLock(i)}}async rejectNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){const a=this.offChainNonces.get(r);a&&a.delete(n)}}finally{this.releaseLock(i)}}async getExpectedNextNonce(e,n=!1){const s=e.toLowerCase();await this.syncWithCore(s);const r=this.getOrCreateState(s),i=r.pending.length>0?Math.max(...r.pending):r.confirmed,o=Math.max(r.confirmed+1,i+1),a=o===0?Rg:o;if(n)try{await this.validateNonce(s,a,!1)}catch(l){console.warn(`[NonceManager] Failed to reserve nonce ${a}:`,l.message)}return{next_nonce:a,reserved:n,timestamp:Date.now()}}cleanupExpiredOffChainNonces(){const e=Date.now();for(const[n,s]of this.offChainNonces.entries()){for(const[r,i]of s.entries())e-i>=Og&&s.delete(r);s.size===0&&this.offChainNonces.delete(n)}}resetNonce(e){const n=e.toLowerCase();this.onChainState.delete(n),this.offChainNonces.delete(n);const s=this.syncTimers.get(n);s&&(clearInterval(s),this.syncTimers.delete(n))}getState(e){const n=e.toLowerCase();return this.onChainState.get(n)}}class an{constructor(e){ce(this,"httpClient");ce(this,"sessionToken");this.httpClient=new om(e.baseURL),this.sessionToken=e.sessionToken}setSessionToken(e){this.sessionToken=e}getHeaders(){const e={Accept:"application/json, */*"};return this.sessionToken&&(e.Authorization=`Bearer ${this.sessionToken}`),e}async getMarkets(){const n=(await this.httpClient.get("/market/v1/all",this.getHeaders())).body;return Array.isArray(n)?n:n&&typeof n=="object"&&"markets"in n?n.markets:[]}async getMarketsWithFilters(e,n){let s="/market/v1/all";const r=[];e&&r.push(`filter=${e}`),n&&r.push("active_only=true"),r.length>0&&(s+="?"+r.join("&"));const o=(await this.httpClient.get(s,this.getHeaders())).body;return Array.isArray(o)?o:o&&typeof o=="object"&&"markets"in o?o.markets:[]}async getMarketByID(e){return(await this.httpClient.get(`/market/v1/market/${e}`,this.getHeaders())).body}async getMarketByMoniker(e){return(await this.httpClient.get(`/market/v1/market/by-moniker/${e}`,this.getHeaders())).body}async getMarketStats(e){return(await this.httpClient.get(`/market/v1/market/${e}/stats`,this.getHeaders())).body}async getTicker(e){return this.getMarketStats(e)}async getExchangeInfo(){return(await this.httpClient.get("/market/v1/exchangeInfo",this.getHeaders())).body}async getOrderbook(e,n=!0,s=20){let r=`/clob/v1/orderbook/${e}`,i=20;s>0&&s<100&&(i=s),r+=`?depth=${i}`;const a=(await this.httpClient.get(r,this.getHeaders())).body;return n&&a&&(a.bids&&Array.isArray(a.bids)&&(a.bids=a.bids.map(([l,c])=>[De(l),De(c)])),a.asks&&Array.isArray(a.asks)&&(a.asks=a.asks.map(([l,c])=>[De(l),De(c)]))),a}async getMarketTrades(e,n){let s=`/clob/v1/trades?market_id=${e}`;n&&n>0&&(s+=`&limit=${n}`);const r=await this.httpClient.get(s,this.getHeaders());console.debug("[InfoClient] getMarketTrades response for marketId:",e,"response:",r.body);const i=r.body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:(console.warn("[InfoClient] getMarketTrades: Unexpected response structure:",r.body),[])}async getRecentTrades(e,n=100){return this.getMarketTrades(e,n)}async getTrades(e,n){let s=`/clob/v1/trades?symbol=${e}`;n&&n>0&&(s+=`&limit=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:[]}async getAggTrades(e,n,s,r){let i=`/market/v1/aggTrades?symbol=${e}`;return n&&n>0&&(i+=`&limit=${n}`),s&&s>0&&(i+=`&startTime=${s}`),r&&r>0&&(i+=`&endTime=${r}`),(await this.httpClient.get(i,this.getHeaders())).body}async getKlines(e,n,s,r,i){let o=`/clob/v1/klines?symbol=${e}&interval=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l)?l:[]}async getContinuousKlines(e,n,s,r,i,o){let a=`/market/v1/continuousKlines?pair=${e}&contractType=${n}&interval=${s}`;return r&&r>0&&(a+=`&limit=${r}`),i&&i>0&&(a+=`&startTime=${i}`),o&&o>0&&(a+=`&endTime=${o}`),(await this.httpClient.get(a,this.getHeaders())).body}async getPremiumIndex(e){let n="/market/v1/premiumIndex";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getFundingRate(e,n,s,r){let i="/market/v1/fundingRate";const o=[];e&&o.push(`symbol=${e}`),n&&n>0&&o.push(`limit=${n}`),s&&s>0&&o.push(`startTime=${s}`),r&&r>0&&o.push(`endTime=${r}`),o.length>0&&(i+="?"+o.join("&"));const l=(await this.httpClient.get(i,this.getHeaders())).body;return Array.isArray(l)?l:l&&typeof l=="object"&&"data"in l&&Array.isArray(l.data)?l.data:l?[l]:[]}async getFundingInfo(){const n=(await this.httpClient.get("/market/v1/fundingInfo",this.getHeaders())).body;return Array.isArray(n)?n:[]}async getDeliveryPrice(e){return(await this.httpClient.get(`/market/v1/deliveryPrice?pair=${e}`,this.getHeaders())).body}async getOpenInterest(e){return(await this.httpClient.get(`/market/v1/openInterest?symbol=${e}`,this.getHeaders())).body}async getTopLongShortPositionRatio(e,n,s,r,i){let o=`/market/v1/topLongShortPositionRatio?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getGlobalLongShortAccountRatio(e,n,s,r,i){let o=`/market/v1/globalLongShortAccountRatio?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getTicker24hr(e){let n="/market/v1/moniker/24hr";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getTickerPrice(e){let n="/market/v1/moniker/price";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getOrderbookMoniker(e){let n="/market/v1/moniker/bookTicker";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getBasis(e,n,s,r,i){let o=`/market/v1/basis?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getIndexInfo(e){let n="/market/v1/indexInfo";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getAssetIndex(e){let n="/market/v1/assetIndex";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getConstituents(e){return(await this.httpClient.get(`/market/v1/constituents?symbol=${e}`,this.getHeaders())).body}async getTWAP(e,n){return(await this.httpClient.get(`/market/v1/twap?symbol=${e}&duration=${n}`,this.getHeaders())).body}async getPositions(e,n){if(!e)throw new Error("walletAddress is required for getPositions");let s=`/bucket/v1/address/${e}/positions`;n!==void 0&&(s+=`?active_only=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return Array.isArray(i)?i:i&&typeof i=="object"&&"positions"in i&&Array.isArray(i.positions)?i.positions:[]}async getBalance(e,n){let s=`/bank/v1/balance/${e}?asset=${n}`;return(await this.httpClient.get(s,this.getHeaders())).body}async getBalances(e){const s=(await this.httpClient.get(`/bank/v1/balances/${e}`,this.getHeaders())).body;return s&&typeof s=="object"&&"balances"in s&&Array.isArray(s.balances)?s.balances:[]}async getBalanceDecimal(e,n){const s=await this.getBalance(e,n);if(s&&typeof s=="object"){const r={...s};return r.balance&&(r.balance=De(r.balance)),r.available_balance&&(r.available=De(r.available_balance),r.available_balance=De(r.available_balance)),r.available&&typeof r.available=="string"&&(r.available=De(r.available)),r.locked_balance&&(r.locked=De(r.locked_balance),r.locked_balance=De(r.locked_balance)),r.locked&&typeof r.locked=="string"&&(r.locked=De(r.locked)),r}return s}async getOrders(e,n){let s=`/clob/v1/address/orders?address=${encodeURIComponent(e)}`;return n&&(s+=`&asset_pair=${encodeURIComponent(n)}`),(await this.httpClient.get(s,this.getHeaders())).body}async getOrder(e){return(await this.httpClient.get(`/clob/v1/order/${e}`,this.getHeaders())).body}async getOrderHistory(e){return(await this.httpClient.get(`/clob/v1/address/orders/history?address=${e}`,this.getHeaders())).body}async getUserTrades(e,n){let s=`/clob/v1/address/trades?address=${e}`;n&&(s+=`&asset_pair=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:[]}async getTradeHistory(e,n){return this.getUserTrades(e,n)}async getPosition(e,n){let s=`/clob/v1/address/position?address=${e}`;n&&(s+=`&asset_pair=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"positions"in i&&Array.isArray(i.positions)?i.positions:[]}async getBuckets(e){var s;const n=await this.httpClient.get(`/bucket/v1/address/${e}/buckets`,this.getHeaders());return(s=n.body)!=null&&s.buckets&&Array.isArray(n.body.buckets)?n.body.buckets:[]}async getBucket(e){return(await this.httpClient.get(`/bucket/v1/bucket/${e}`,this.getHeaders())).body}async getMarketData(e){return(await this.httpClient.get(`/clob/v1/market/data?asset_pair=${e}`,this.getHeaders())).body}async getMarketCandles(e,n,s){const i=(await this.httpClient.get(`/clob/v1/market/candles?asset_pair=${e}&interval=${n}&limit=${s}`,this.getHeaders())).body;return Array.isArray(i)?i:[]}async getNonceStatus(e,n=!1){let s=`/router/v1/nonce/status/${e}`;return n&&(s+="?reserve=true"),(await this.httpClient.get(s,this.getHeaders())).body}async getSupportedActions(){return(await this.httpClient.get("/router/v1/tx/supported-actions",this.getHeaders())).body}async validateAction(e){return(await this.httpClient.get(`/router/v1/tx/validate-action?action=${encodeURIComponent(e)}`,this.getHeaders())).body}async getHealthSummary(){return(await this.httpClient.get("/router/v1/health/summary",this.getHeaders())).body}async getHealthDaemons(){return(await this.httpClient.get("/router/v1/health/daemons",this.getHeaders())).body}async getHealthBucket(){return(await this.httpClient.get("/router/v1/health/bucket",this.getHeaders())).body}async getHealthOracle(){return(await this.httpClient.get("/router/v1/health/oracle",this.getHeaders())).body}async getServerTime(){return(await this.httpClient.get("/router/v1/time",this.getHeaders())).body}async getMetricsTPS(){return(await this.httpClient.get("/router/v1/metrics/tps",this.getHeaders())).body}async getMetricsLatency(){return(await this.httpClient.get("/router/v1/metrics/latency",this.getHeaders())).body}}function mR(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["nonce too low","nonce too high","nonce already used","nonce already pending","nonce invalid","nonce expired","nonce mismatch","invalid nonce","nonce out of order"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function gR(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["signature verification failed","invalid signature","unauthenticated","signature mismatch","signature invalid"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function bR(t){if(!t)return[!1,!1];const e=mR(t),n=gR(t);return[e,n]}function sv(t){const[e,n]=bR(t);return e||n}const oM="6.16.0";async function rv(t){const e=Object.keys(t);return(await Promise.all(e.map(s=>Promise.resolve(t[s])))).reduce((s,r,i)=>(s[e[i]]=r,s),{})}function Zn(t,e,n){for(let s in e){let r=e[s];Object.defineProperty(t,s,{enumerable:!0,value:r,writable:!1})}}function Ka(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Ka(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let s="0x";for(let r=0;r<t.length;r++)s+=n[t[r]>>4],s+=n[t[r]&15];return s}if(typeof t=="object"&&typeof t.toJSON=="function")return Ka(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(s=>`${Ka(s,e)}: ${Ka(t[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function xR(t,e,n){let s=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Ka(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Ka(a))}}i.push(`code=${e}`),i.push(`version=${oM}`),i.length&&(t+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(t);break;default:r=new Error(t)}return Zn(r,{code:e}),n&&Object.assign(r,n),r.shortMessage==null&&Zn(r,{shortMessage:s}),r}function at(t,e,n,s){if(!t)throw xR(e,n,s)}function oe(t,e,n,s){at(t,e,"INVALID_ARGUMENT",{argument:n,value:s})}const yR=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function aM(t){at(yR.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function am(t,e,n){if(n==null&&(n=""),t!==e){let s=n,r="new";n&&(s+=".",r+=" "+n),at(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function lM(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const s=new Uint8Array((t.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(t.substring(r,r+2),16),r+=2;return s}oe(!1,"invalid BytesLike value",e||"value",t)}function $e(t,e){return lM(t,e,!1)}function Ra(t,e){return lM(t,e,!0)}function xr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function lm(t){return xr(t,!0)||t instanceof Uint8Array}const Ck="0123456789abcdef";function Re(t){const e=$e(t);let n="0x";for(let s=0;s<e.length;s++){const r=e[s];n+=Ck[(r&240)>>4]+Ck[r&15]}return n}function zt(t){return"0x"+t.map(e=>Re(e).substring(2)).join("")}function zu(t){return xr(t,!0)?(t.length-2)/2:$e(t).length}function iv(t,e,n){const s=$e(t);return n>s.length&&at(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),Re(s.slice(e,n))}function wR(t,e,n){const s=$e(t);at(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),r.set(s,e-s.length),Re(r)}function Zi(t,e){return wR(t,e)}const cm=BigInt(0),Co=BigInt(1),Xa=9007199254740991;function vR(t,e){let n=yt(t,"value");const s=BigInt(es(e,"width")),r=Co<<s-Co;if(n<cm){n=-n,at(n<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Co<<s)-Co;return(~n&i)+Co}else at(n<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function SR(t,e){const n=ov(t,"value"),s=BigInt(es(e,"bits"));return n&(Co<<s)-Co}function yt(t,e){switch(typeof t){case"bigint":return t;case"number":return oe(Number.isInteger(t),"underflow",e||"value",t),oe(t>=-Xa&&t<=Xa,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){oe(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}oe(!1,"invalid BigNumberish value",e||"value",t)}function ov(t,e){const n=yt(t,e);return at(n>=cm,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const _k="0123456789abcdef";function cM(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=_k[n>>4],e+=_k[n&15];return BigInt(e)}return yt(t)}function es(t,e){switch(typeof t){case"bigint":return oe(t>=-Xa&&t<=Xa,"overflow",e||"value",t),Number(t);case"number":return oe(Number.isInteger(t),"underflow",e||"value",t),oe(t>=-Xa&&t<=Xa,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return es(BigInt(t),e)}catch(n){oe(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}oe(!1,"invalid numeric value",e||"value",t)}function ec(t,e){const n=ov(t,"value");let s=n.toString(16);{const r=es(e,"width");if(r===0&&n===cm)return"0x";for(at(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});s.length<r*2;)s="0"+s}return"0x"+s}function Bt(t,e){const n=ov(t,"value");if(n===cm)return new Uint8Array(0);let s=n.toString(16);s.length%2&&(s="0"+s);const r=new Uint8Array(s.length/2);for(let i=0;i<r.length;i++){const o=i*2;r[i]=parseInt(s.substring(o,o+2),16)}return r}function kR(t){let e=Re(lm(t)?t:Bt(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const e0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let sf=null;function CR(t){if(sf==null){sf={};for(let n=0;n<e0.length;n++)sf[e0[n]]=BigInt(n)}const e=sf[t];return oe(e!=null,"invalid base58 value","letter",t),e}const _R=BigInt(0),Qx=BigInt(58);function ER(t){const e=$e(t);let n=cM(e),s="";for(;n;)s=e0[Number(n%Qx)]+s,n/=Qx;for(let r=0;r<e.length&&!e[r];r++)s=e0[0]+s;return s}function PR(t){let e=_R;for(let n=0;n<t.length;n++)e*=Qx,e+=CR(t[n]);return e}function Go(t,e){oe(typeof t=="string","invalid string value","str",t),e!=null&&(aM(e),t=t.normalize(e));let n=[];for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(r&63|128);else if((r&64512)==55296){s++;const i=t.charCodeAt(s);oe(s<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((r&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(r&63|128)}return new Uint8Array(n)}function TR(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Ek(t,e,n){let s=0;for(let r=0;r<n;r++)s=s*256+t[e+r];return s}function Pk(t,e,n,s){const r=[];for(;n<e+1+s;){const i=uM(t,n);r.push(i.result),n+=i.consumed,at(n<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:t,length:s,offset:e})}return{consumed:1+s,result:r}}function uM(t,e){at(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=s=>{at(s<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:s})};if(t[e]>=248){const s=t[e]-247;n(e+1+s);const r=Ek(t,e+1,s);return n(e+1+s+r),Pk(t,e,e+1+s,s+r)}else if(t[e]>=192){const s=t[e]-192;return n(e+1+s),Pk(t,e,e+1,s)}else if(t[e]>=184){const s=t[e]-183;n(e+1+s);const r=Ek(t,e+1,s);n(e+1+s+r);const i=Re(t.slice(e+1+s,e+1+s+r));return{consumed:1+s+r,result:i}}else if(t[e]>=128){const s=t[e]-128;n(e+1+s);const r=Re(t.slice(e+1,e+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:TR(t[e])}}function hh(t){const e=$e(t,"data"),n=uM(e,0);return oe(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Tk(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function dM(t){if(Array.isArray(t)){let s=[];if(t.forEach(function(i){s=s.concat(dM(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=Tk(s.length);return r.unshift(247+r.length),r.concat(s)}const e=Array.prototype.slice.call($e(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Tk(e.length);return n.unshift(183+n.length),n.concat(e)}const Mk="0123456789abcdef";function qr(t){let e="0x";for(const n of dM(t))e+=Mk[n>>4],e+=Mk[n&15];return e}function MR(t){const e=$e(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=Re(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}function Xn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function av(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function hM(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Xn(t.outputLen),Xn(t.blockLen)}function tc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function fM(t,e){av(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const jg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pM=t=>t instanceof Uint8Array,op=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),ap=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Qs=(t,e)=>t<<32-e|t>>>e,IR=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!IR)throw new Error("Non little-endian hardware is not supported");const NR=async()=>{};async function Ik(t,e,n){let s=Date.now();for(let r=0;r<t;r++){n(r);const i=Date.now()-s;i>=0&&i<e||(await NR(),s+=i)}}function DR(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function nc(t){if(typeof t=="string"&&(t=DR(t)),!pM(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function AR(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!pM(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}class lv{clone(){return this._cloneInto()}}const OR={}.toString;function mM(t,e){if(e!==void 0&&OR.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function um(t){const e=s=>t().update(nc(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function RR(t=32){if(jg&&typeof jg.getRandomValues=="function")return jg.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class gM extends lv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,hM(e);const s=nc(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return tc(this),this.iHash.update(e),this}digestInto(e){tc(this),av(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const dm=(t,e,n)=>new gM(t,e).update(n).digest();dm.create=(t,e)=>new gM(t,e);function jR(t,e,n,s){hM(t);const r=mM({dkLen:32,asyncTick:10},s),{c:i,dkLen:o,asyncTick:a}=r;if(Xn(i),Xn(o),Xn(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=nc(e),c=nc(n),u=new Uint8Array(o),d=dm.create(t,l),f=d._cloneInto().update(c);return{c:i,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:f}}function LR(t,e,n,s,r){return t.destroy(),e.destroy(),s&&s.destroy(),r.fill(0),n}function cv(t,e,n,s){const{c:r,dkLen:i,DK:o,PRF:a,PRFSalt:l}=jR(t,e,n,s);let c;const u=new Uint8Array(4),d=ap(u),f=new Uint8Array(a.outputLen);for(let p=1,m=0;m<i;p++,m+=a.outputLen){const b=o.subarray(m,m+a.outputLen);d.setInt32(0,p,!1),(c=l._cloneInto(c)).update(u).digestInto(f),b.set(f.subarray(0,b.length));for(let x=1;x<r;x++){a._cloneInto(c).update(f).digestInto(f);for(let g=0;g<b.length;g++)b[g]^=f[g]}}return LR(a,l,o,c,f)}function FR(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),l=s?4:0,c=s?0:4;t.setUint32(e+l,o,s),t.setUint32(e+c,a,s)}class uv extends lv{constructor(e,n,s,r){super(),this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ap(this.buffer)}update(e){tc(this);const{view:n,buffer:s,blockLen:r}=this;e=nc(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const l=ap(e);for(;r<=i-o;o+=r)this.process(l,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tc(this),fM(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let d=o;d<r;d++)n[d]=0;FR(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=ap(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%n&&e.buffer.set(s),e}}const $R=(t,e,n)=>t&e^~t&n,BR=(t,e,n)=>t&e^t&n^e&n,zR=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ri=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ii=new Uint32Array(64);class UR extends uv{constructor(){super(64,32,8,!1),this.A=ri[0]|0,this.B=ri[1]|0,this.C=ri[2]|0,this.D=ri[3]|0,this.E=ri[4]|0,this.F=ri[5]|0,this.G=ri[6]|0,this.H=ri[7]|0}get(){const{A:e,B:n,C:s,D:r,E:i,F:o,G:a,H:l}=this;return[e,n,s,r,i,o,a,l]}set(e,n,s,r,i,o,a,l){this.A=e|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let d=0;d<16;d++,n+=4)ii[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=ii[d-15],p=ii[d-2],m=Qs(f,7)^Qs(f,18)^f>>>3,b=Qs(p,17)^Qs(p,19)^p>>>10;ii[d]=b+ii[d-7]+m+ii[d-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const f=Qs(a,6)^Qs(a,11)^Qs(a,25),p=u+f+$R(a,l,c)+zR[d]+ii[d]|0,b=(Qs(s,2)^Qs(s,13)^Qs(s,22))+BR(s,r,i)|0;u=c,c=l,l=a,a=o+p|0,o=i,i=r,r=s,s=p+b|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(s,r,i,o,a,l,c,u)}roundClean(){ii.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Sc=um(()=>new UR),rf=BigInt(2**32-1),Jx=BigInt(32);function bM(t,e=!1){return e?{h:Number(t&rf),l:Number(t>>Jx&rf)}:{h:Number(t>>Jx&rf)|0,l:Number(t&rf)|0}}function xM(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let r=0;r<t.length;r++){const{h:i,l:o}=bM(t[r],e);[n[r],s[r]]=[i,o]}return[n,s]}const WR=(t,e)=>BigInt(t>>>0)<<Jx|BigInt(e>>>0),HR=(t,e,n)=>t>>>n,VR=(t,e,n)=>t<<32-n|e>>>n,qR=(t,e,n)=>t>>>n|e<<32-n,YR=(t,e,n)=>t<<32-n|e>>>n,GR=(t,e,n)=>t<<64-n|e>>>n-32,KR=(t,e,n)=>t>>>n-32|e<<64-n,XR=(t,e)=>e,QR=(t,e)=>t,yM=(t,e,n)=>t<<n|e>>>32-n,wM=(t,e,n)=>e<<n|t>>>32-n,vM=(t,e,n)=>e<<n-32|t>>>64-n,SM=(t,e,n)=>t<<n-32|e>>>64-n;function JR(t,e,n,s){const r=(e>>>0)+(s>>>0);return{h:t+n+(r/2**32|0)|0,l:r|0}}const ZR=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),ej=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,tj=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),nj=(t,e,n,s,r)=>e+n+s+r+(t/2**32|0)|0,sj=(t,e,n,s,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(r>>>0),rj=(t,e,n,s,r,i)=>e+n+s+r+i+(t/2**32|0)|0,Xe={fromBig:bM,split:xM,toBig:WR,shrSH:HR,shrSL:VR,rotrSH:qR,rotrSL:YR,rotrBH:GR,rotrBL:KR,rotr32H:XR,rotr32L:QR,rotlSH:yM,rotlSL:wM,rotlBH:vM,rotlBL:SM,add:JR,add3L:ZR,add3H:ej,add4L:tj,add4H:nj,add5H:rj,add5L:sj},[ij,oj]=Xe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),oi=new Uint32Array(80),ai=new Uint32Array(80);class aj extends uv{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:f,Gh:p,Gl:m,Hh:b,Hl:x}=this;return[e,n,s,r,i,o,a,l,c,u,d,f,p,m,b,x]}set(e,n,s,r,i,o,a,l,c,u,d,f,p,m,b,x){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=m|0,this.Hh=b|0,this.Hl=x|0}process(e,n){for(let S=0;S<16;S++,n+=4)oi[S]=e.getUint32(n),ai[S]=e.getUint32(n+=4);for(let S=16;S<80;S++){const w=oi[S-15]|0,v=ai[S-15]|0,C=Xe.rotrSH(w,v,1)^Xe.rotrSH(w,v,8)^Xe.shrSH(w,v,7),_=Xe.rotrSL(w,v,1)^Xe.rotrSL(w,v,8)^Xe.shrSL(w,v,7),P=oi[S-2]|0,M=ai[S-2]|0,E=Xe.rotrSH(P,M,19)^Xe.rotrBH(P,M,61)^Xe.shrSH(P,M,6),I=Xe.rotrSL(P,M,19)^Xe.rotrBL(P,M,61)^Xe.shrSL(P,M,6),O=Xe.add4L(_,I,ai[S-7],ai[S-16]),j=Xe.add4H(O,C,E,oi[S-7],oi[S-16]);oi[S]=j|0,ai[S]=O|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:f,Fh:p,Fl:m,Gh:b,Gl:x,Hh:g,Hl:y}=this;for(let S=0;S<80;S++){const w=Xe.rotrSH(d,f,14)^Xe.rotrSH(d,f,18)^Xe.rotrBH(d,f,41),v=Xe.rotrSL(d,f,14)^Xe.rotrSL(d,f,18)^Xe.rotrBL(d,f,41),C=d&p^~d&b,_=f&m^~f&x,P=Xe.add5L(y,v,_,oj[S],ai[S]),M=Xe.add5H(P,g,w,C,ij[S],oi[S]),E=P|0,I=Xe.rotrSH(s,r,28)^Xe.rotrBH(s,r,34)^Xe.rotrBH(s,r,39),O=Xe.rotrSL(s,r,28)^Xe.rotrBL(s,r,34)^Xe.rotrBL(s,r,39),j=s&i^s&a^i&a,U=r&o^r&l^o&l;g=b|0,y=x|0,b=p|0,x=m|0,p=d|0,m=f|0,{h:d,l:f}=Xe.add(c|0,u|0,M|0,E|0),c=a|0,u=l|0,a=i|0,l=o|0,i=s|0,o=r|0;const A=Xe.add3L(E,O,U);s=Xe.add3H(A,M,I,j),r=A|0}({h:s,l:r}=Xe.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=Xe.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=Xe.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=Xe.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:d,l:f}=Xe.add(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:m}=Xe.add(this.Fh|0,this.Fl|0,p|0,m|0),{h:b,l:x}=Xe.add(this.Gh|0,this.Gl|0,b|0,x|0),{h:g,l:y}=Xe.add(this.Hh|0,this.Hl|0,g|0,y|0),this.set(s,r,i,o,a,l,c,u,d,f,p,m,b,x,g,y)}roundClean(){oi.fill(0),ai.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const dv=um(()=>new aj);function lj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Nk=lj(),Dk=Nk.crypto||Nk.msCrypto;function cj(t){switch(t){case"sha256":return Sc.create();case"sha512":return dv.create()}oe(!1,"invalid hashing algorithm name","algorithm",t)}function uj(t,e){const n={sha256:Sc,sha512:dv}[t];return oe(n!=null,"invalid hmac algorithm","algorithm",t),dm.create(n,e)}function dj(t,e,n,s,r){const i={sha256:Sc,sha512:dv}[r];return oe(i!=null,"invalid pbkdf2 algorithm","algorithm",r),cv(i,t,e,{c:n,dkLen:s})}function hj(t){at(Dk!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),oe(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return Dk.getRandomValues(e),e}let kM=!1;const CM=function(t,e,n){return uj(t,e).update(n).digest()};let _M=CM;function kc(t,e,n){const s=$e(e,"key"),r=$e(n,"data");return Re(_M(t,s,r))}kc._=CM;kc.lock=function(){kM=!0};kc.register=function(t){if(kM)throw new Error("computeHmac is locked");_M=t};Object.freeze(kc);const[EM,PM,TM]=[[],[],[]],fj=BigInt(0),qc=BigInt(1),pj=BigInt(2),mj=BigInt(7),gj=BigInt(256),bj=BigInt(113);for(let t=0,e=qc,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],EM.push(2*(5*s+n)),PM.push((t+1)*(t+2)/2%64);let r=fj;for(let i=0;i<7;i++)e=(e<<qc^(e>>mj)*bj)%gj,e&pj&&(r^=qc<<(qc<<BigInt(i))-qc);TM.push(r)}const[xj,yj]=xM(TM,!0),Ak=(t,e,n)=>n>32?vM(t,e,n):yM(t,e,n),Ok=(t,e,n)=>n>32?SM(t,e,n):wM(t,e,n);function wj(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],d=Ak(c,u,1)^n[a],f=Ok(c,u,1)^n[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let r=t[2],i=t[3];for(let o=0;o<24;o++){const a=PM[o],l=Ak(r,i,a),c=Ok(r,i,a),u=EM[o];r=t[u],i=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=xj[s],t[1]^=yj[s]}n.fill(0)}class hv extends lv{constructor(e,n,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Xn(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=op(this.state)}keccak(){wj(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){tc(this);const{blockLen:n,state:s}=this;e=nc(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:r}=this;e[s]^=n,n&128&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){tc(this,!1),av(e),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(n.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Xn(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fM(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new hv(n,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const vj=(t,e,n)=>um(()=>new hv(e,t,n)),Sj=vj(1,136,256/8);let MM=!1;const IM=function(t){return Sj(t)};let NM=IM;function Qt(t){const e=$e(t,"data");return Re(NM(e))}Qt._=IM;Qt.lock=function(){MM=!0};Qt.register=function(t){if(MM)throw new TypeError("keccak256 is locked");NM=t};Object.freeze(Qt);const kj=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),DM=Uint8Array.from({length:16},(t,e)=>e),Cj=DM.map(t=>(9*t+5)%16);let fv=[DM],pv=[Cj];for(let t=0;t<4;t++)for(let e of[fv,pv])e.push(e[t].map(n=>kj[n]));const AM=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),_j=fv.map((t,e)=>t.map(n=>AM[e][n])),Ej=pv.map((t,e)=>t.map(n=>AM[e][n])),Pj=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Tj=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),of=(t,e)=>t<<e|t>>>32-e;function Rk(t,e,n,s){return t===0?e^n^s:t===1?e&n|~e&s:t===2?(e|~n)^s:t===3?e&s|n&~s:e^(n|~s)}const af=new Uint32Array(16);class Mj extends uv{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:s,h3:r,h4:i}=this;return[e,n,s,r,i]}set(e,n,s,r,i){this.h0=e|0,this.h1=n|0,this.h2=s|0,this.h3=r|0,this.h4=i|0}process(e,n){for(let p=0;p<16;p++,n+=4)af[p]=e.getUint32(n,!0);let s=this.h0|0,r=s,i=this.h1|0,o=i,a=this.h2|0,l=a,c=this.h3|0,u=c,d=this.h4|0,f=d;for(let p=0;p<5;p++){const m=4-p,b=Pj[p],x=Tj[p],g=fv[p],y=pv[p],S=_j[p],w=Ej[p];for(let v=0;v<16;v++){const C=of(s+Rk(p,i,a,c)+af[g[v]]+b,S[v])+d|0;s=d,d=c,c=of(a,10)|0,a=i,i=C}for(let v=0;v<16;v++){const C=of(r+Rk(m,o,l,u)+af[y[v]]+x,w[v])+f|0;r=f,f=u,u=of(l,10)|0,l=o,o=C}}this.set(this.h1+a+u|0,this.h2+c+f|0,this.h3+d+r|0,this.h4+s+o|0,this.h0+i+l|0)}roundClean(){af.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Ij=um(()=>new Mj);let OM=!1;const RM=function(t){return Ij(t)};let jM=RM;function Cc(t){const e=$e(t,"data");return Re(jM(e))}Cc._=RM;Cc.lock=function(){OM=!0};Cc.register=function(t){if(OM)throw new TypeError("ripemd160 is locked");jM=t};Object.freeze(Cc);let LM=!1;const FM=function(t,e,n,s,r){return dj(t,e,n,s,r)};let $M=FM;function fh(t,e,n,s,r){const i=$e(t,"password"),o=$e(e,"salt");return Re($M(i,o,n,s,r))}fh._=FM;fh.lock=function(){LM=!0};fh.register=function(t){if(LM)throw new Error("pbkdf2 is locked");$M=t};Object.freeze(fh);let BM=!1;const zM=function(t){return new Uint8Array(hj(t))};let UM=zM;function Yr(t){return UM(t)}Yr._=zM;Yr.lock=function(){BM=!0};Yr.register=function(t){if(BM)throw new Error("randomBytes is locked");UM=t};Object.freeze(Yr);const ct=(t,e)=>t<<e|t>>>32-e;function jk(t,e,n,s,r,i){let o=t[e++]^n[s++],a=t[e++]^n[s++],l=t[e++]^n[s++],c=t[e++]^n[s++],u=t[e++]^n[s++],d=t[e++]^n[s++],f=t[e++]^n[s++],p=t[e++]^n[s++],m=t[e++]^n[s++],b=t[e++]^n[s++],x=t[e++]^n[s++],g=t[e++]^n[s++],y=t[e++]^n[s++],S=t[e++]^n[s++],w=t[e++]^n[s++],v=t[e++]^n[s++],C=o,_=a,P=l,M=c,E=u,I=d,O=f,j=p,U=m,A=b,L=x,B=g,F=y,$=S,D=w,z=v;for(let R=0;R<8;R+=2)E^=ct(C+F|0,7),U^=ct(E+C|0,9),F^=ct(U+E|0,13),C^=ct(F+U|0,18),A^=ct(I+_|0,7),$^=ct(A+I|0,9),_^=ct($+A|0,13),I^=ct(_+$|0,18),D^=ct(L+O|0,7),P^=ct(D+L|0,9),O^=ct(P+D|0,13),L^=ct(O+P|0,18),M^=ct(z+B|0,7),j^=ct(M+z|0,9),B^=ct(j+M|0,13),z^=ct(B+j|0,18),_^=ct(C+M|0,7),P^=ct(_+C|0,9),M^=ct(P+_|0,13),C^=ct(M+P|0,18),O^=ct(I+E|0,7),j^=ct(O+I|0,9),E^=ct(j+O|0,13),I^=ct(E+j|0,18),B^=ct(L+A|0,7),U^=ct(B+L|0,9),A^=ct(U+B|0,13),L^=ct(A+U|0,18),F^=ct(z+D|0,7),$^=ct(F+z|0,9),D^=ct($+F|0,13),z^=ct(D+$|0,18);r[i++]=o+C|0,r[i++]=a+_|0,r[i++]=l+P|0,r[i++]=c+M|0,r[i++]=u+E|0,r[i++]=d+I|0,r[i++]=f+O|0,r[i++]=p+j|0,r[i++]=m+U|0,r[i++]=b+A|0,r[i++]=x+L|0,r[i++]=g+B|0,r[i++]=y+F|0,r[i++]=S+$|0,r[i++]=w+D|0,r[i++]=v+z|0}function al(t,e,n,s,r){let i=s+0,o=s+16*r;for(let a=0;a<16;a++)n[o+a]=t[e+(2*r-1)*16+a];for(let a=0;a<r;a++,i+=16,e+=16)jk(n,o,t,e,n,i),a>0&&(o+=16),jk(n,i,t,e+=16,n,o)}function WM(t,e,n){const s=mM({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:r,r:i,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=s;if(Xn(r),Xn(i),Xn(o),Xn(a),Xn(l),Xn(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const d=128*i,f=d/4;if(r<=1||r&r-1||r>=2**(d/8)||r>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=d*(r+o);if(p>c)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${c} (maxmem)`);const m=cv(Sc,t,e,{c:1,dkLen:d*o}),b=op(m),x=op(new Uint8Array(d*r)),g=op(new Uint8Array(d));let y=()=>{};if(u){const S=2*r*o,w=Math.max(Math.floor(S/1e4),1);let v=0;y=()=>{v++,u&&(!(v%w)||v===S)&&u(v/S)}}return{N:r,r:i,p:o,dkLen:a,blockSize32:f,V:x,B32:b,B:m,tmp:g,blockMixCb:y,asyncTick:l}}function HM(t,e,n,s,r){const i=cv(Sc,t,n,{c:1,dkLen:e});return n.fill(0),s.fill(0),r.fill(0),i}function Nj(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f}=WM(t,e,n);for(let p=0;p<i;p++){const m=a*p;for(let b=0;b<a;b++)l[b]=c[m+b];for(let b=0,x=0;b<s-1;b++)al(l,x,l,x+=a,r),f();al(l,(s-1)*a,c,m,r),f();for(let b=0;b<s;b++){const x=c[m+a-16]%s;for(let g=0;g<a;g++)d[g]=c[m+g]^l[x*a+g];al(d,0,c,m,r),f()}}return HM(t,o,u,l,d)}async function Dj(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f,asyncTick:p}=WM(t,e,n);for(let m=0;m<i;m++){const b=a*m;for(let g=0;g<a;g++)l[g]=c[b+g];let x=0;await Ik(s-1,p,()=>{al(l,x,l,x+=a,r),f()}),al(l,(s-1)*a,c,b,r),f(),await Ik(s,p,()=>{const g=c[b+a-16]%s;for(let y=0;y<a;y++)d[y]=c[b+y]^l[g*a+y];al(d,0,c,b,r),f()})}return HM(t,o,u,l,d)}let VM=!1,qM=!1;const YM=async function(t,e,n,s,r,i,o){return await Dj(t,e,{N:n,r:s,p:r,dkLen:i,onProgress:o})},GM=function(t,e,n,s,r,i){return Nj(t,e,{N:n,r:s,p:r,dkLen:i})};let KM=YM,XM=GM;async function ph(t,e,n,s,r,i,o){const a=$e(t,"passwd"),l=$e(e,"salt");return Re(await KM(a,l,n,s,r,i,o))}ph._=YM;ph.lock=function(){qM=!0};ph.register=function(t){if(qM)throw new Error("scrypt is locked");KM=t};Object.freeze(ph);function mh(t,e,n,s,r,i){const o=$e(t,"passwd"),a=$e(e,"salt");return Re(XM(o,a,n,s,r,i))}mh._=GM;mh.lock=function(){VM=!0};mh.register=function(t){if(VM)throw new Error("scryptSync is locked");XM=t};Object.freeze(mh);const QM=function(t){return cj("sha256").update(t).digest()};let JM=QM,ZM=!1;function Ts(t){const e=$e(t,"data");return Re(JM(e))}Ts._=QM;Ts.lock=function(){ZM=!0};Ts.register=function(t){if(ZM)throw new Error("sha256 is locked");JM=t};Object.freeze(Ts);Object.freeze(Ts);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e5=BigInt(0),hm=BigInt(1),Aj=BigInt(2),fm=t=>t instanceof Uint8Array,Oj=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function sc(t){if(!fm(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Oj[t[n]];return e}function t5(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function mv(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function rc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let s=0;s<n.length;s++){const r=s*2,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[s]=o}return n}function Ko(t){return mv(sc(t))}function gv(t){if(!fm(t))throw new Error("Uint8Array expected");return mv(sc(Uint8Array.from(t).reverse()))}function ic(t,e){return rc(t.toString(16).padStart(e*2,"0"))}function bv(t,e){return ic(t,e).reverse()}function Rj(t){return rc(t5(t))}function Os(t,e,n){let s;if(typeof e=="string")try{s=rc(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(fm(e))s=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const r=s.length;if(typeof n=="number"&&r!==n)throw new Error(`${t} expected ${n} bytes, got ${r}`);return s}function jd(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!fm(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}function jj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Lj(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Fj(t){let e;for(e=0;t>e5;t>>=hm,e+=1);return e}function $j(t,e){return t>>BigInt(e)&hm}const Bj=(t,e,n)=>t|(n?hm:e5)<<BigInt(e),xv=t=>(Aj<<BigInt(t-1))-hm,Lg=t=>new Uint8Array(t),Lk=t=>Uint8Array.from(t);function n5(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let s=Lg(t),r=Lg(t),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...d)=>n(r,s,...d),l=(d=Lg())=>{r=a(Lk([0]),d),s=a(),d.length!==0&&(r=a(Lk([1]),d),s=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){s=a();const p=s.slice();f.push(p),d+=s.length}return jd(...f)};return(d,f)=>{o(),l(d);let p;for(;!(p=f(c()));)l();return o(),p}}const zj={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function gh(t,e,n={}){const s=(r,i,o)=>{const a=zj[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=t[r];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(e))s(r,i,!1);for(const[r,i]of Object.entries(n))s(r,i,!0);return t}const Uj=Object.freeze(Object.defineProperty({__proto__:null,bitGet:$j,bitLen:Fj,bitMask:xv,bitSet:Bj,bytesToHex:sc,bytesToNumberBE:Ko,bytesToNumberLE:gv,concatBytes:jd,createHmacDrbg:n5,ensureBytes:Os,equalBytes:jj,hexToBytes:rc,hexToNumber:mv,numberToBytesBE:ic,numberToBytesLE:bv,numberToHexUnpadded:t5,numberToVarBytesBE:Rj,utf8ToBytes:Lj,validateObject:gh},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jt=BigInt(0),$t=BigInt(1),_o=BigInt(2),Wj=BigInt(3),Zx=BigInt(4),Fk=BigInt(5),$k=BigInt(8);BigInt(9);BigInt(16);function Rn(t,e){const n=t%e;return n>=Jt?n:e+n}function Hj(t,e,n){if(n<=Jt||e<Jt)throw new Error("Expected power/modulo > 0");if(n===$t)return Jt;let s=$t;for(;e>Jt;)e&$t&&(s=s*t%n),t=t*t%n,e>>=$t;return s}function ls(t,e,n){let s=t;for(;e-- >Jt;)s*=s,s%=n;return s}function ey(t,e){if(t===Jt||e<=Jt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Rn(t,e),s=e,r=Jt,i=$t;for(;n!==Jt;){const a=s/n,l=s%n,c=r-i*a;s=n,n=l,r=i,i=c}if(s!==$t)throw new Error("invert: does not exist");return Rn(r,e)}function Vj(t){const e=(t-$t)/_o;let n,s,r;for(n=t-$t,s=0;n%_o===Jt;n/=_o,s++);for(r=_o;r<t&&Hj(r,e,t)!==t-$t;r++);if(s===1){const o=(t+$t)/Zx;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+$t)/_o;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=s,u=a.pow(a.mul(a.ONE,r),n),d=a.pow(l,i),f=a.pow(l,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let p=1;for(let b=a.sqr(f);p<c&&!a.eql(b,a.ONE);p++)b=a.sqr(b);const m=a.pow(u,$t<<BigInt(c-p-1));u=a.sqr(m),d=a.mul(d,m),f=a.mul(f,u),c=p}return d}}function qj(t){if(t%Zx===Wj){const e=(t+$t)/Zx;return function(s,r){const i=s.pow(r,e);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%$k===Fk){const e=(t-Fk)/$k;return function(s,r){const i=s.mul(r,_o),o=s.pow(i,e),a=s.mul(r,o),l=s.mul(s.mul(a,_o),o),c=s.mul(a,s.sub(l,s.ONE));if(!s.eql(s.sqr(c),r))throw new Error("Cannot find square root");return c}}return Vj(t)}const Yj=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Gj(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Yj.reduce((s,r)=>(s[r]="function",s),e);return gh(t,n)}function Kj(t,e,n){if(n<Jt)throw new Error("Expected power > 0");if(n===Jt)return t.ONE;if(n===$t)return e;let s=t.ONE,r=e;for(;n>Jt;)n&$t&&(s=t.mul(s,r)),r=t.sqr(r),n>>=$t;return s}function Xj(t,e){const n=new Array(e.length),s=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),r=t.inv(s);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),r),n}function s5(t,e){const n=e!==void 0?e:t.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function Qj(t,e,n=!1,s={}){if(t<=Jt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:r,nByteLength:i}=s5(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=qj(t),a=Object.freeze({ORDER:t,BITS:r,BYTES:i,MASK:xv(r),ZERO:Jt,ONE:$t,create:l=>Rn(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Jt<=l&&l<t},is0:l=>l===Jt,isOdd:l=>(l&$t)===$t,neg:l=>Rn(-l,t),eql:(l,c)=>l===c,sqr:l=>Rn(l*l,t),add:(l,c)=>Rn(l+c,t),sub:(l,c)=>Rn(l-c,t),mul:(l,c)=>Rn(l*c,t),pow:(l,c)=>Kj(a,l,c),div:(l,c)=>Rn(l*ey(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>ey(l,t),sqrt:s.sqrt||(l=>o(a,l)),invertBatch:l=>Xj(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?bv(l,i):ic(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return n?gv(l):Ko(l)}});return Object.freeze(a)}function r5(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function i5(t){const e=r5(t);return e+Math.ceil(e/2)}function Jj(t,e,n=!1){const s=t.length,r=r5(e),i=i5(e);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=n?Ko(t):gv(t),a=Rn(o,e-$t)+$t;return n?bv(a,r):ic(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zj=BigInt(0),Fg=BigInt(1);function e7(t,e){const n=(r,i)=>{const o=i.negate();return r?o:i},s=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(r,i){let o=t.ZERO,a=r;for(;i>Zj;)i&Fg&&(o=o.add(a)),a=a.double(),i>>=Fg;return o},precomputeWindow(r,i){const{windows:o,windowSize:a}=s(i),l=[];let c=r,u=c;for(let d=0;d<o;d++){u=c,l.push(u);for(let f=1;f<a;f++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(r,i,o){const{windows:a,windowSize:l}=s(r);let c=t.ZERO,u=t.BASE;const d=BigInt(2**r-1),f=2**r,p=BigInt(r);for(let m=0;m<a;m++){const b=m*l;let x=Number(o&d);o>>=p,x>l&&(x-=f,o+=Fg);const g=b,y=b+Math.abs(x)-1,S=m%2!==0,w=x<0;x===0?u=u.add(n(S,i[g])):c=c.add(n(w,i[y]))}return{p:c,f:u}},wNAFCached(r,i,o,a){const l=r._WINDOW_SIZE||1;let c=i.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&i.set(r,a(c))),this.wNAF(l,c,o)}}}function o5(t){return Gj(t.Fp),gh(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...s5(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function t7(t){const e=o5(t);gh(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:r}=e;if(n){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:n7,hexToBytes:s7}=Uj,No={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=No;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],s=t.subarray(2,n+2);if(!n||s.length!==n)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:n7(s),l:t.subarray(n+2)}},toSig(t){const{Err:e}=No,n=typeof t=="string"?s7(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let s=n.length;if(s<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=No._parseInt(n.subarray(2)),{d:o,l:a}=No._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},s=e(n(t.s)),r=e(n(t.r)),i=s.length/2,o=r.length/2,a=n(i),l=n(o);return`30${n(o+i+4)}02${l}${r}02${a}${s}`}},Fr=BigInt(0),xs=BigInt(1);BigInt(2);const Bk=BigInt(3);BigInt(4);function r7(t){const e=t7(t),{Fp:n}=e,s=e.toBytes||((m,b,x)=>{const g=b.toAffine();return jd(Uint8Array.from([4]),n.toBytes(g.x),n.toBytes(g.y))}),r=e.fromBytes||(m=>{const b=m.subarray(1),x=n.fromBytes(b.subarray(0,n.BYTES)),g=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x,y:g}});function i(m){const{a:b,b:x}=e,g=n.sqr(m),y=n.mul(g,m);return n.add(n.add(y,n.mul(m,b)),x)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&Fr<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(m){const{allowedPrivateKeyLengths:b,nByteLength:x,wrapPrivateKey:g,n:y}=e;if(b&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=sc(m)),typeof m!="string"||!b.includes(m.length))throw new Error("Invalid key");m=m.padStart(x*2,"0")}let S;try{S=typeof m=="bigint"?m:Ko(Os("private key",m,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof m}`)}return g&&(S=Rn(S,y)),a(S),S}const c=new Map;function u(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(b,x,g){if(this.px=b,this.py=x,this.pz=g,b==null||!n.isValid(b))throw new Error("x required");if(x==null||!n.isValid(x))throw new Error("y required");if(g==null||!n.isValid(g))throw new Error("z required")}static fromAffine(b){const{x,y:g}=b||{};if(!b||!n.isValid(x)||!n.isValid(g))throw new Error("invalid affine point");if(b instanceof d)throw new Error("projective point not allowed");const y=S=>n.eql(S,n.ZERO);return y(x)&&y(g)?d.ZERO:new d(x,g,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const x=n.invertBatch(b.map(g=>g.pz));return b.map((g,y)=>g.toAffine(x[y])).map(d.fromAffine)}static fromHex(b){const x=d.fromAffine(r(Os("pointHex",b)));return x.assertValidity(),x}static fromPrivateKey(b){return d.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:b,y:x}=this.toAffine();if(!n.isValid(b)||!n.isValid(x))throw new Error("bad point: x or y not FE");const g=n.sqr(x),y=i(b);if(!n.eql(g,y))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(n.isOdd)return!n.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){u(b);const{px:x,py:g,pz:y}=this,{px:S,py:w,pz:v}=b,C=n.eql(n.mul(x,v),n.mul(S,y)),_=n.eql(n.mul(g,v),n.mul(w,y));return C&&_}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:b,b:x}=e,g=n.mul(x,Bk),{px:y,py:S,pz:w}=this;let v=n.ZERO,C=n.ZERO,_=n.ZERO,P=n.mul(y,y),M=n.mul(S,S),E=n.mul(w,w),I=n.mul(y,S);return I=n.add(I,I),_=n.mul(y,w),_=n.add(_,_),v=n.mul(b,_),C=n.mul(g,E),C=n.add(v,C),v=n.sub(M,C),C=n.add(M,C),C=n.mul(v,C),v=n.mul(I,v),_=n.mul(g,_),E=n.mul(b,E),I=n.sub(P,E),I=n.mul(b,I),I=n.add(I,_),_=n.add(P,P),P=n.add(_,P),P=n.add(P,E),P=n.mul(P,I),C=n.add(C,P),E=n.mul(S,w),E=n.add(E,E),P=n.mul(E,I),v=n.sub(v,P),_=n.mul(E,M),_=n.add(_,_),_=n.add(_,_),new d(v,C,_)}add(b){u(b);const{px:x,py:g,pz:y}=this,{px:S,py:w,pz:v}=b;let C=n.ZERO,_=n.ZERO,P=n.ZERO;const M=e.a,E=n.mul(e.b,Bk);let I=n.mul(x,S),O=n.mul(g,w),j=n.mul(y,v),U=n.add(x,g),A=n.add(S,w);U=n.mul(U,A),A=n.add(I,O),U=n.sub(U,A),A=n.add(x,y);let L=n.add(S,v);return A=n.mul(A,L),L=n.add(I,j),A=n.sub(A,L),L=n.add(g,y),C=n.add(w,v),L=n.mul(L,C),C=n.add(O,j),L=n.sub(L,C),P=n.mul(M,A),C=n.mul(E,j),P=n.add(C,P),C=n.sub(O,P),P=n.add(O,P),_=n.mul(C,P),O=n.add(I,I),O=n.add(O,I),j=n.mul(M,j),A=n.mul(E,A),O=n.add(O,j),j=n.sub(I,j),j=n.mul(M,j),A=n.add(A,j),I=n.mul(O,A),_=n.add(_,I),I=n.mul(L,A),C=n.mul(U,C),C=n.sub(C,I),I=n.mul(U,O),P=n.mul(L,P),P=n.add(P,I),new d(C,_,P)}subtract(b){return this.add(b.negate())}is0(){return this.equals(d.ZERO)}wNAF(b){return p.wNAFCached(this,c,b,x=>{const g=n.invertBatch(x.map(y=>y.pz));return x.map((y,S)=>y.toAffine(g[S])).map(d.fromAffine)})}multiplyUnsafe(b){const x=d.ZERO;if(b===Fr)return x;if(a(b),b===xs)return this;const{endo:g}=e;if(!g)return p.unsafeLadder(this,b);let{k1neg:y,k1:S,k2neg:w,k2:v}=g.splitScalar(b),C=x,_=x,P=this;for(;S>Fr||v>Fr;)S&xs&&(C=C.add(P)),v&xs&&(_=_.add(P)),P=P.double(),S>>=xs,v>>=xs;return y&&(C=C.negate()),w&&(_=_.negate()),_=new d(n.mul(_.px,g.beta),_.py,_.pz),C.add(_)}multiply(b){a(b);let x=b,g,y;const{endo:S}=e;if(S){const{k1neg:w,k1:v,k2neg:C,k2:_}=S.splitScalar(x);let{p:P,f:M}=this.wNAF(v),{p:E,f:I}=this.wNAF(_);P=p.constTimeNegate(w,P),E=p.constTimeNegate(C,E),E=new d(n.mul(E.px,S.beta),E.py,E.pz),g=P.add(E),y=M.add(I)}else{const{p:w,f:v}=this.wNAF(x);g=w,y=v}return d.normalizeZ([g,y])[0]}multiplyAndAddUnsafe(b,x,g){const y=d.BASE,S=(v,C)=>C===Fr||C===xs||!v.equals(y)?v.multiplyUnsafe(C):v.multiply(C),w=S(this,x).add(S(b,g));return w.is0()?void 0:w}toAffine(b){const{px:x,py:g,pz:y}=this,S=this.is0();b==null&&(b=S?n.ONE:n.inv(y));const w=n.mul(x,b),v=n.mul(g,b),C=n.mul(y,b);if(S)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x:w,y:v}}isTorsionFree(){const{h:b,isTorsionFree:x}=e;if(b===xs)return!0;if(x)return x(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:x}=e;return b===xs?this:x?x(d,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),s(d,this,b)}toHex(b=!0){return sc(this.toRawBytes(b))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=e7(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function i7(t){const e=o5(t);return gh(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function o7(t){const e=i7(t),{Fp:n,n:s}=e,r=n.BYTES+1,i=2*n.BYTES+1;function o(A){return Fr<A&&A<n.ORDER}function a(A){return Rn(A,s)}function l(A){return ey(A,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:f}=r7({...e,toBytes(A,L,B){const F=L.toAffine(),$=n.toBytes(F.x),D=jd;return B?D(Uint8Array.from([L.hasEvenY()?2:3]),$):D(Uint8Array.from([4]),$,n.toBytes(F.y))},fromBytes(A){const L=A.length,B=A[0],F=A.subarray(1);if(L===r&&(B===2||B===3)){const $=Ko(F);if(!o($))throw new Error("Point is not on curve");const D=d($);let z=n.sqrt(D);const R=(z&xs)===xs;return(B&1)===1!==R&&(z=n.neg(z)),{x:$,y:z}}else if(L===i&&B===4){const $=n.fromBytes(F.subarray(0,n.BYTES)),D=n.fromBytes(F.subarray(n.BYTES,2*n.BYTES));return{x:$,y:D}}else throw new Error(`Point of length ${L} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),p=A=>sc(ic(A,e.nByteLength));function m(A){const L=s>>xs;return A>L}function b(A){return m(A)?a(-A):A}const x=(A,L,B)=>Ko(A.slice(L,B));class g{constructor(L,B,F){this.r=L,this.s=B,this.recovery=F,this.assertValidity()}static fromCompact(L){const B=e.nByteLength;return L=Os("compactSignature",L,B*2),new g(x(L,0,B),x(L,B,2*B))}static fromDER(L){const{r:B,s:F}=No.toSig(Os("DER",L));return new g(B,F)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(L){return new g(this.r,this.s,L)}recoverPublicKey(L){const{r:B,s:F,recovery:$}=this,D=_(Os("msgHash",L));if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");const z=$===2||$===3?B+e.n:B;if(z>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const R=$&1?"03":"02",T=c.fromHex(R+p(z)),X=l(z),ne=a(-D*X),q=a(F*X),Z=c.BASE.multiplyAndAddUnsafe(T,ne,q);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return rc(this.toDERHex())}toDERHex(){return No.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return rc(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const y={isValidPrivateKey(A){try{return u(A),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const A=i5(e.n);return Jj(e.randomBytes(A),e.n)},precompute(A=8,L=c.BASE){return L._setWindowSize(A),L.multiply(BigInt(3)),L}};function S(A,L=!0){return c.fromPrivateKey(A).toRawBytes(L)}function w(A){const L=A instanceof Uint8Array,B=typeof A=="string",F=(L||B)&&A.length;return L?F===r||F===i:B?F===2*r||F===2*i:A instanceof c}function v(A,L,B=!0){if(w(A))throw new Error("first arg must be private key");if(!w(L))throw new Error("second arg must be public key");return c.fromHex(L).multiply(u(A)).toRawBytes(B)}const C=e.bits2int||function(A){const L=Ko(A),B=A.length*8-e.nBitLength;return B>0?L>>BigInt(B):L},_=e.bits2int_modN||function(A){return a(C(A))},P=xv(e.nBitLength);function M(A){if(typeof A!="bigint")throw new Error("bigint expected");if(!(Fr<=A&&A<P))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ic(A,e.nByteLength)}function E(A,L,B=I){if(["recovered","canonical"].some(se=>se in B))throw new Error("sign() legacy options not supported");const{hash:F,randomBytes:$}=e;let{lowS:D,prehash:z,extraEntropy:R}=B;D==null&&(D=!0),A=Os("msgHash",A),z&&(A=Os("prehashed msgHash",F(A)));const T=_(A),X=u(L),ne=[M(X),M(T)];if(R!=null){const se=R===!0?$(n.BYTES):R;ne.push(Os("extraEntropy",se))}const q=jd(...ne),Z=T;function G(se){const ae=C(se);if(!f(ae))return;const Ne=l(ae),ke=c.BASE.multiply(ae).toAffine(),Ee=a(ke.x);if(Ee===Fr)return;const Ue=a(Ne*a(Z+Ee*X));if(Ue===Fr)return;let st=(ke.x===Ee?0:2)|Number(ke.y&xs),N=Ue;return D&&m(Ue)&&(N=b(Ue),st^=1),new g(Ee,N,st)}return{seed:q,k2sig:G}}const I={lowS:e.lowS,prehash:!1},O={lowS:e.lowS,prehash:!1};function j(A,L,B=I){const{seed:F,k2sig:$}=E(A,L,B),D=e;return n5(D.hash.outputLen,D.nByteLength,D.hmac)(F,$)}c.BASE._setWindowSize(8);function U(A,L,B,F=O){var ke;const $=A;if(L=Os("msgHash",L),B=Os("publicKey",B),"strict"in F)throw new Error("options.strict was renamed to lowS");const{lowS:D,prehash:z}=F;let R,T;try{if(typeof $=="string"||$ instanceof Uint8Array)try{R=g.fromDER($)}catch(Ee){if(!(Ee instanceof No.Err))throw Ee;R=g.fromCompact($)}else if(typeof $=="object"&&typeof $.r=="bigint"&&typeof $.s=="bigint"){const{r:Ee,s:Ue}=$;R=new g(Ee,Ue)}else throw new Error("PARSE");T=c.fromHex(B)}catch(Ee){if(Ee.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(D&&R.hasHighS())return!1;z&&(L=e.hash(L));const{r:X,s:ne}=R,q=_(L),Z=l(ne),G=a(q*Z),se=a(X*Z),ae=(ke=c.BASE.multiplyAndAddUnsafe(T,G,se))==null?void 0:ke.toAffine();return ae?a(ae.x)===X:!1}return{CURVE:e,getPublicKey:S,getSharedSecret:v,sign:j,verify:U,ProjectivePoint:c,Signature:g,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function a7(t){return{hash:t,hmac:(e,...n)=>dm(t,e,AR(...n)),randomBytes:RR}}function l7(t,e){const n=s=>o7({...t,...a7(s)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const a5=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),zk=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),c7=BigInt(1),ty=BigInt(2),Uk=(t,e)=>(t+e/ty)/e;function u7(t){const e=a5,n=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,d=ls(u,n,e)*u%e,f=ls(d,n,e)*u%e,p=ls(f,ty,e)*c%e,m=ls(p,r,e)*p%e,b=ls(m,i,e)*m%e,x=ls(b,a,e)*b%e,g=ls(x,l,e)*x%e,y=ls(g,a,e)*b%e,S=ls(y,n,e)*u%e,w=ls(S,o,e)*m%e,v=ls(w,s,e)*c%e,C=ls(v,ty,e);if(!ny.eql(ny.sqr(C),t))throw new Error("Cannot find square root");return C}const ny=Qj(a5,void 0,void 0,{sqrt:u7}),mi=l7({a:BigInt(0),b:BigInt(7),Fp:ny,n:zk,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=zk,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-c7*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Uk(i*t,e),l=Uk(-s*t,e);let c=Rn(t-a*n-l*r,e),u=Rn(-a*s-l*i,e);const d=c>o,f=u>o;if(d&&(c=e-c),f&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:f,k2:u}}}},Sc);BigInt(0);mi.ProjectivePoint;const l5="0x0000000000000000000000000000000000000000",Wk="0x0000000000000000000000000000000000000000000000000000000000000000",d7=`Ethereum Signed Message:
`,Hk=BigInt(0),Vk=BigInt(1),sy=BigInt(2),qk=BigInt(27),Yk=BigInt(28),lf=BigInt(35),c5=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h7=c5/sy,f7=Symbol.for("nodejs.util.inspect.custom"),ho={};function $g(t){return Zi(Bt(t),32)}var kl,ur,Cl,Ii;const ps=class ps{constructor(e,n,s,r){Me(this,kl);Me(this,ur);Me(this,Cl);Me(this,Ii);am(e,ho,"Signature"),ue(this,kl,n),ue(this,ur,s),ue(this,Cl,r),ue(this,Ii,null)}get r(){return K(this,kl)}set r(e){oe(zu(e)===32,"invalid r","value",e),ue(this,kl,Re(e))}get s(){return oe(parseInt(K(this,ur).substring(0,3))<8,"non-canonical s; use ._s","s",K(this,ur)),K(this,ur)}set s(e){oe(zu(e)===32,"invalid s","value",e),ue(this,ur,Re(e))}get _s(){return K(this,ur)}isValid(){return BigInt(K(this,ur))<=h7}get v(){return K(this,Cl)}set v(e){const n=es(e,"value");oe(n===27||n===28,"invalid v","v",e),ue(this,Cl,n)}get networkV(){return K(this,Ii)}get legacyChainId(){const e=this.networkV;return e==null?null:ps.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=$e(this.s);return this.yParity&&(e[0]|=128),Re(e)}get compactSerialized(){return zt([this.r,this.yParityAndS])}get serialized(){return zt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=c5-BigInt(this._s),n=55-this.v,s=new ps(ho,this.r,$g(e),n);return this.networkV&&ue(s,Ii,this.networkV),s}clone(){const e=new ps(ho,this.r,this._s,this.v);return this.networkV&&ue(e,Ii,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[f7](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=yt(e,"v");return n==qk||n==Yk?Hk:(oe(n>=lf,"invalid EIP-155 v","v",e),(n-lf)/sy)}static getChainIdV(e,n){return yt(e)*sy+BigInt(35+n-27)}static getNormalizedV(e){const n=yt(e);return n===Hk||n===qk?27:n===Vk||n===Yk?28:(oe(n>=lf,"invalid v","v",e),n&Vk?27:28)}static from(e){function n(c,u){oe(c,u,"signature",e)}if(e==null)return new ps(ho,Wk,Wk,27);if(typeof e=="string"){const c=$e(e,"signature");if(c.length===64){const u=Re(c.slice(0,32)),d=c.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new ps(ho,u,Re(d),f)}if(c.length===65){const u=Re(c.slice(0,32)),d=Re(c.slice(32,64)),f=ps.getNormalizedV(c[64]);return new ps(ho,u,d,f)}n(!1,"invalid raw signature length")}if(e instanceof ps)return e.clone();const s=e.r;n(s!=null,"missing r");const r=$g(s),i=function(c,u){if(c!=null)return $g(c);if(u!=null){n(xr(u,32),"invalid yParityAndS");const d=$e(u);return d[0]&=127,Re(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(c,u,d){if(c!=null){const f=yt(c);return{networkV:f>=lf?f:void 0,v:ps.getNormalizedV(f)}}if(u!=null)return n(xr(u,32),"invalid yParityAndS"),{v:$e(u)[0]&128?28:27};if(d!=null){switch(es(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new ps(ho,r,i,a);return o&&ue(l,Ii,o),n(e.yParity==null||es(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};kl=new WeakMap,ur=new WeakMap,Cl=new WeakMap,Ii=new WeakMap;let qs=ps;var jr;const Eo=class Eo{constructor(e){Me(this,jr);oe(zu(e)===32,"invalid private key","privateKey","[REDACTED]"),ue(this,jr,Re(e))}get privateKey(){return K(this,jr)}get publicKey(){return Eo.computePublicKey(K(this,jr))}get compressedPublicKey(){return Eo.computePublicKey(K(this,jr),!0)}sign(e){oe(zu(e)===32,"invalid digest length","digest",e);const n=mi.sign(Ra(e),Ra(K(this,jr)),{lowS:!0});return qs.from({r:ec(n.r,32),s:ec(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=Eo.computePublicKey(e);return Re(mi.getSharedSecret(Ra(K(this,jr)),$e(n),!1))}static computePublicKey(e,n){let s=$e(e,"key");if(s.length===32){const i=mi.getPublicKey(s,!!n);return Re(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=mi.ProjectivePoint.fromHex(s);return Re(r.toRawBytes(n))}static recoverPublicKey(e,n){oe(zu(e)===32,"invalid digest length","digest",e);const s=qs.from(n);let r=mi.Signature.fromCompact(Ra(zt([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(Ra(e));return oe(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,s){const r=mi.ProjectivePoint.fromHex(Eo.computePublicKey(e).substring(2)),i=mi.ProjectivePoint.fromHex(Eo.computePublicKey(n).substring(2));return"0x"+r.add(i).toHex(!!s)}};jr=new WeakMap;let gr=Eo;const p7=BigInt(0),m7=BigInt(36);function Gk(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let r=0;r<40;r++)n[r]=e[r].charCodeAt(0);const s=$e(Qt(n));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(s[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const yv={};for(let t=0;t<10;t++)yv[String(t)]=String(t);for(let t=0;t<26;t++)yv[String.fromCharCode(65+t)]=String(10+t);const Kk=15;function g7(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(s=>yv[s]).join("");for(;e.length>=Kk;){let s=e.substring(0,Kk);e=parseInt(s,10)%97+e.substring(s.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const b7=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function x7(t){t=t.toLowerCase();let e=p7;for(let n=0;n<t.length;n++)e=e*m7+b7[t[n]];return e}function Ms(t){if(oe(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Gk(t);return oe(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){oe(t.substring(2,4)===g7(t),"bad icap checksum","address",t);let e=x7(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Gk("0x"+e)}oe(!1,"invalid address","address",t)}function y7(t){return t&&typeof t.getAddress=="function"}async function Bg(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(at(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),oe(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Ms(n)}function Uu(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Ms(t):(at(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Bg(t,e.resolveName(t)));if(y7(t))return Bg(t,t.getAddress());if(t&&typeof t.then=="function")return Bg(t,t);oe(!1,"unsupported addressable value","target",t)}function zg(t,e){return{address:Ms(t),storageKeys:e.map((n,s)=>(oe(xr(n,32),"invalid slot",`storageKeys[${s}]`,n),n.toLowerCase()))}}function pm(t){if(Array.isArray(t))return t.map((n,s)=>Array.isArray(n)?(oe(n.length===2,"invalid slot set",`value[${s}]`,n),zg(n[0],n[1])):(oe(n!=null&&typeof n=="object","invalid address-slot set","value",t),zg(n.address,n.storageKeys)));oe(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const s=t[n].reduce((r,i)=>(r[i]=!0,r),{});return zg(n,Object.keys(s).sort())});return e.sort((n,s)=>n.address.localeCompare(s.address)),e}function w7(t){return{address:Ms(t.address),nonce:yt(t.nonce!=null?t.nonce:0),chainId:yt(t.chainId!=null?t.chainId:0),signature:qs.from(t.signature)}}function bh(t){let e;return typeof t=="string"?e=gr.computePublicKey(t,!1):e=t.publicKey,Ms(Qt("0x"+e.substring(4)).substring(26))}function v7(t,e){return bh(gr.recoverPublicKey(t,e))}const Kt=BigInt(0),S7=BigInt(2),k7=BigInt(27),C7=BigInt(28),_7=BigInt(35),E7=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),P7=Symbol.for("nodejs.util.inspect.custom"),Ug=4096*32,lp=128;function T7(t){return{blobToKzgCommitment:s=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return $e(t.blobToKzgCommitment(Re(s)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return $e(t.blobToKzgCommitment(s));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return $e(t.blobToKZGCommitment(Re(s)));oe(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return $e(t.computeBlobProof(Re(s),Re(r)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return $e(t.computeBlobKZGProof(Re(s),Re(r)));oe(!1,"unsupported KZG library","kzg",t)}}}function Xk(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Ts(e).substring(4),"0x"+n}function _c(t){return t==="0x"?null:Ms(t)}function mm(t,e){try{return pm(t)}catch(n){oe(!1,n.message,e,t)}}function M7(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let s=0;s<t.length;s++){const r=t[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);n.push({address:_c(r[1]),nonce:bt(r[2],"nonce"),chainId:bt(r[0],"chainId"),signature:qs.from({yParity:wa(r[3],"yParity"),r:Zi(r[4],32),s:Zi(r[5],32)})})}return n}catch(n){oe(!1,n.message,e,t)}}function wa(t,e){return t==="0x"?0:es(t,e)}function bt(t,e){if(t==="0x")return Kt;const n=yt(t,e);return oe(n<=E7,"value exceeds uint size",e,n),n}function rt(t,e){const n=yt(t,"value"),s=Bt(n);return oe(s.length<=32,"value too large",`tx.${e}`,n),s}function gm(t){return pm(t).map(e=>[e.address,e.storageKeys])}function I7(t){return t.map(e=>[rt(e.chainId,"chainId"),e.address,rt(e.nonce,"nonce"),rt(e.signature.yParity,"yParity"),Bt(e.signature.r),Bt(e.signature._s)])}function N7(t,e){oe(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)oe(xr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function D7(t){const e=hh(t);oe(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:wa(e[0],"nonce"),gasPrice:bt(e[1],"gasPrice"),gasLimit:bt(e[2],"gasLimit"),to:_c(e[3]),value:bt(e[4],"value"),data:Re(e[5]),chainId:Kt};if(e.length===6)return n;const s=bt(e[6],"v"),r=bt(e[7],"r"),i=bt(e[8],"s");if(r===Kt&&i===Kt)n.chainId=s;else{let o=(s-_7)/S7;o<Kt&&(o=Kt),n.chainId=o,oe(o!==Kt||s===k7||s===C7,"non-canonical legacy v","v",e[6]),n.signature=qs.from({r:Zi(e[7],32),s:Zi(e[8],32),v:s})}return n}function A7(t,e){const n=[rt(t.nonce,"nonce"),rt(t.gasPrice||0,"gasPrice"),rt(t.gasLimit,"gasLimit"),t.to||"0x",rt(t.value,"value"),t.data];let s=Kt;if(t.chainId!=Kt)s=yt(t.chainId,"tx.chainId"),oe(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(s=i)}if(!e)return s!==Kt&&(n.push(Bt(s)),n.push("0x"),n.push("0x")),qr(n);let r=BigInt(27+e.yParity);return s!==Kt?r=qs.getChainIdV(s,e.v):BigInt(e.v)!==r&&oe(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Bt(r)),n.push(Bt(e.r)),n.push(Bt(e._s)),qr(n)}function bm(t,e){let n;try{if(n=wa(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{oe(!1,"invalid yParity","yParity",e[0])}const s=Zi(e[1],32),r=Zi(e[2],32),i=qs.from({r:s,s:r,yParity:n});t.signature=i}function O7(t){const e=hh($e(t).slice(1));oe(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Re(t));const n={type:2,chainId:bt(e[0],"chainId"),nonce:wa(e[1],"nonce"),maxPriorityFeePerGas:bt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:bt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:bt(e[4],"gasLimit"),to:_c(e[5]),value:bt(e[6],"value"),data:Re(e[7]),accessList:mm(e[8],"accessList")};return e.length===9||bm(n,e.slice(9)),n}function R7(t,e){const n=[rt(t.chainId,"chainId"),rt(t.nonce,"nonce"),rt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),rt(t.maxFeePerGas||0,"maxFeePerGas"),rt(t.gasLimit,"gasLimit"),t.to||"0x",rt(t.value,"value"),t.data,gm(t.accessList||[])];return e&&(n.push(rt(e.yParity,"yParity")),n.push(Bt(e.r)),n.push(Bt(e.s))),zt(["0x02",qr(n)])}function j7(t){const e=hh($e(t).slice(1));oe(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Re(t));const n={type:1,chainId:bt(e[0],"chainId"),nonce:wa(e[1],"nonce"),gasPrice:bt(e[2],"gasPrice"),gasLimit:bt(e[3],"gasLimit"),to:_c(e[4]),value:bt(e[5],"value"),data:Re(e[6]),accessList:mm(e[7],"accessList")};return e.length===8||bm(n,e.slice(8)),n}function L7(t,e){const n=[rt(t.chainId,"chainId"),rt(t.nonce,"nonce"),rt(t.gasPrice||0,"gasPrice"),rt(t.gasLimit,"gasLimit"),t.to||"0x",rt(t.value,"value"),t.data,gm(t.accessList||[])];return e&&(n.push(rt(e.yParity,"recoveryParam")),n.push(Bt(e.r)),n.push(Bt(e.s))),zt(["0x01",qr(n)])}function F7(t){let e=hh($e(t).slice(1)),n="3",s=null,r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];oe(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),oe(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),oe(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),oe(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),oe(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",s=es(e[1]);const o=e[2],a=e[3],l=e[4];oe(s===1,`unsupported EIP-7594 network format version: ${s}`,"fields[1]",s),oe(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),oe(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),oe(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),oe(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),oe(o.length*lp===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<o.length;c++){const u=[];for(let d=0;d<lp;d++)u.push(l[c*lp+d]);r.push({data:o[c],commitment:a[c],proof:zt(u)})}e=e[0]}oe(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Re(t));const i={type:3,chainId:bt(e[0],"chainId"),nonce:wa(e[1],"nonce"),maxPriorityFeePerGas:bt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:bt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:bt(e[4],"gasLimit"),to:_c(e[5]),value:bt(e[6],"value"),data:Re(e[7]),accessList:mm(e[8],"accessList"),maxFeePerBlobGas:bt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:s};r&&(i.blobs=r),oe(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),oe(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<i.blobVersionedHashes.length;o++)oe(xr(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||bm(i,e.slice(11)),i}function $7(t,e,n){const s=[rt(t.chainId,"chainId"),rt(t.nonce,"nonce"),rt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),rt(t.maxFeePerGas||0,"maxFeePerGas"),rt(t.gasLimit,"gasLimit"),t.to||l5,rt(t.value,"value"),t.data,gm(t.accessList||[]),rt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),N7(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(s.push(rt(e.yParity,"yParity")),s.push(Bt(e.r)),s.push(Bt(e.s)),n)){if(t.blobWrapperVersion!=null){const r=Bt(t.blobWrapperVersion),i=[];for(const{proof:o}of n){const a=$e(o),l=a.length/lp;for(let c=0;c<a.length;c+=l)i.push(a.subarray(c,c+l))}return zt(["0x03",qr([s,r,n.map(o=>o.data),n.map(o=>o.commitment),i])])}return zt(["0x03",qr([s,n.map(r=>r.data),n.map(r=>r.commitment),n.map(r=>r.proof)])])}return zt(["0x03",qr(s)])}function B7(t){const e=hh($e(t).slice(1));oe(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Re(t));const n={type:4,chainId:bt(e[0],"chainId"),nonce:wa(e[1],"nonce"),maxPriorityFeePerGas:bt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:bt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:bt(e[4],"gasLimit"),to:_c(e[5]),value:bt(e[6],"value"),data:Re(e[7]),accessList:mm(e[8],"accessList"),authorizationList:M7(e[9],"authorizationList")};return e.length===10||bm(n,e.slice(10)),n}function z7(t,e){const n=[rt(t.chainId,"chainId"),rt(t.nonce,"nonce"),rt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),rt(t.maxFeePerGas||0,"maxFeePerGas"),rt(t.gasLimit,"gasLimit"),t.to||"0x",rt(t.value,"value"),t.data,gm(t.accessList||[]),I7(t.authorizationList||[])];return e&&(n.push(rt(e.yParity,"yParity")),n.push(Bt(e.r)),n.push(Bt(e.s))),zt(["0x04",qr(n)])}var Ls,_l,El,Pl,Tl,Ml,Il,Nl,Dl,Al,Ol,Rl,Uo,Ni,dr,Di,jl,Ll,Fl,cp;const ir=class ir{constructor(){Me(this,Fl);Me(this,Ls);Me(this,_l);Me(this,El);Me(this,Pl);Me(this,Tl);Me(this,Ml);Me(this,Il);Me(this,Nl);Me(this,Dl);Me(this,Al);Me(this,Ol);Me(this,Rl);Me(this,Uo);Me(this,Ni);Me(this,dr);Me(this,Di);Me(this,jl);Me(this,Ll);ue(this,Ls,null),ue(this,_l,null),ue(this,Pl,0),ue(this,Tl,Kt),ue(this,Ml,null),ue(this,Il,null),ue(this,Nl,null),ue(this,El,"0x"),ue(this,Dl,Kt),ue(this,Al,Kt),ue(this,Ol,null),ue(this,Rl,null),ue(this,Uo,null),ue(this,Ni,null),ue(this,dr,null),ue(this,Di,null),ue(this,jl,null),ue(this,Ll,null)}get type(){return K(this,Ls)}set type(e){switch(e){case null:ue(this,Ls,null);break;case 0:case"legacy":ue(this,Ls,0);break;case 1:case"berlin":case"eip-2930":ue(this,Ls,1);break;case 2:case"london":case"eip-1559":ue(this,Ls,2);break;case 3:case"cancun":case"eip-4844":ue(this,Ls,3);break;case 4:case"pectra":case"eip-7702":ue(this,Ls,4);break;default:oe(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=K(this,_l);return e==null&&this.type===3?l5:e}set to(e){ue(this,_l,e==null?null:Ms(e))}get nonce(){return K(this,Pl)}set nonce(e){ue(this,Pl,es(e,"value"))}get gasLimit(){return K(this,Tl)}set gasLimit(e){ue(this,Tl,yt(e))}get gasPrice(){const e=K(this,Ml);return e==null&&(this.type===0||this.type===1)?Kt:e}set gasPrice(e){ue(this,Ml,e==null?null:yt(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=K(this,Il);return e??(this.type===2||this.type===3?Kt:null)}set maxPriorityFeePerGas(e){ue(this,Il,e==null?null:yt(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=K(this,Nl);return e??(this.type===2||this.type===3?Kt:null)}set maxFeePerGas(e){ue(this,Nl,e==null?null:yt(e,"maxFeePerGas"))}get data(){return K(this,El)}set data(e){ue(this,El,Re(e))}get value(){return K(this,Dl)}set value(e){ue(this,Dl,yt(e,"value"))}get chainId(){return K(this,Al)}set chainId(e){ue(this,Al,yt(e))}get signature(){return K(this,Ol)||null}set signature(e){ue(this,Ol,e==null?null:qs.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const s of n)if(!s.signature.isValid())return!1}return!0}get accessList(){const e=K(this,Rl)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){ue(this,Rl,e==null?null:pm(e))}get authorizationList(){const e=K(this,jl)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){ue(this,jl,e==null?null:e.map(n=>w7(n)))}get maxFeePerBlobGas(){const e=K(this,Uo);return e==null&&this.type===3?Kt:e}set maxFeePerBlobGas(e){ue(this,Uo,e==null?null:yt(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=K(this,Ni);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){oe(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)oe(xr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}ue(this,Ni,e)}get blobs(){return K(this,Di)==null?null:K(this,Di).map(e=>Object.assign({},e))}set blobs(e){if(e==null){ue(this,Di,null);return}const n=[],s=[];for(let r=0;r<e.length;r++){const i=e[r];if(lm(i)){at(K(this,dr),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=$e(i);if(oe(o.length<=Ug,"blob is too large",`blobs[${r}]`,i),o.length!==Ug){const c=new Uint8Array(Ug);c.set(o),o=c}const a=K(this,dr).blobToKzgCommitment(o),l=Re(K(this,dr).computeBlobKzgProof(o,a));n.push({data:Re(o),commitment:Re(a),proof:l}),s.push(Xk(1,a))}else{const o=Re(i.data),a=Re(i.commitment),l=Re(i.proof);n.push({data:o,commitment:a,proof:l}),s.push(Xk(1,a))}}ue(this,Di,n),ue(this,Ni,s)}get kzg(){return K(this,dr)}set kzg(e){e==null?ue(this,dr,null):ue(this,dr,T7(e))}get blobWrapperVersion(){return K(this,Ll)}set blobWrapperVersion(e){ue(this,Ll,e)}get hash(){return this.signature==null?null:Qt(nt(this,Fl,cp).call(this,!0,!1))}get unsignedHash(){return Qt(this.unsignedSerialized)}get from(){return this.signature==null?null:v7(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:gr.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return nt(this,Fl,cp).call(this,!0,!0)}get unsignedSerialized(){return nt(this,Fl,cp).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=K(this,Uo)!=null||K(this,Ni);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&at(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),at(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),at(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return ir.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[P7](){return this.toString()}toString(){const e=[],n=r=>{let i=this[r];typeof i=="string"&&(i=JSON.stringify(i)),e.push(`${r}: ${i}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const s=this.authorizationList;if(s){const r=[];for(const i of s){const o=[];o.push(`address: ${JSON.stringify(i.address)}`),i.nonce!=null&&o.push(`nonce: ${i.nonce}`),i.chainId!=null&&o.push(`chainId: ${i.chainId}`),i.signature&&o.push(`signature: ${i.signature.toString()}`),r.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${r.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new ir;if(typeof e=="string"){const s=$e(e);if(s[0]>=127)return ir.from(D7(s));switch(s[0]){case 1:return ir.from(j7(s));case 2:return ir.from(O7(s));case 3:return ir.from(F7(s));case 4:return ir.from(B7(s))}at(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new ir;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=qs.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(oe(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),oe(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(oe(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),oe(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Ls=new WeakMap,_l=new WeakMap,El=new WeakMap,Pl=new WeakMap,Tl=new WeakMap,Ml=new WeakMap,Il=new WeakMap,Nl=new WeakMap,Dl=new WeakMap,Al=new WeakMap,Ol=new WeakMap,Rl=new WeakMap,Uo=new WeakMap,Ni=new WeakMap,dr=new WeakMap,Di=new WeakMap,jl=new WeakMap,Ll=new WeakMap,Fl=new WeakSet,cp=function(e,n){at(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return A7(this,s);case 1:return L7(this,s);case 2:return R7(this,s);case 3:return $7(this,s,n?this.blobs:null);case 4:return z7(this,s)}at(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let t0=ir;function U7(t){return oe(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),Qt(zt(["0x05",qr([t.chainId!=null?Bt(t.chainId):"0x",Ms(t.address),t.nonce!=null?Bt(t.nonce):"0x"])]))}function wv(t){return Qt(Go(t))}function W7(t){return typeof t=="string"&&(t=Go(t)),Qt(zt([Go(d7),Go(String(t.length)),t]))}const u5=new Uint8Array(32);u5.fill(0);const H7=BigInt(-1),d5=BigInt(0),h5=BigInt(1),V7=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function q7(t){const e=$e(t),n=e.length%32;return n?zt([e,u5.slice(n)]):Re(e)}const Y7=ec(h5,32),G7=ec(d5,32),Qk={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Wg=["name","version","chainId","verifyingContract","salt"];function Jk(t){return function(e){return oe(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const K7={name:Jk("name"),version:Jk("version"),chainId:function(t){const e=yt(t,"domain.chainId");return oe(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):kR(e)},verifyingContract:function(t){try{return Ms(t).toLowerCase()}catch{}oe(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=$e(t,"domain.salt");return oe(e.length===32,'invalid domain value "salt"',"domain.salt",t),Re(e)}};function Hg(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",s=parseInt(e[2]);oe(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",t);const r=SR(V7,n?s-1:s),i=n?(r+h5)*H7:d5;return function(o){const a=yt(o,"value");return oe(a>=i&&a<=r,`value out-of-bounds for ${t}`,"value",a),ec(n?vR(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return oe(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(s){const r=$e(s);return oe(r.length===n,`invalid length for ${t}`,"value",s),q7(s)}}}switch(t){case"address":return function(e){return Zi(Ms(e),32)};case"bool":return function(e){return e?Y7:G7};case"bytes":return function(e){return Qt(e)};case"string":return function(e){return wv(e)}}return null}function Zk(t,e){return`${t}(${e.map(({name:n,type:s})=>s+" "+n).join(",")})`}function cf(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var th,Lr,$l,F0,f5;const ms=class ms{constructor(e){Me(this,F0);ce(this,"primaryType");Me(this,th);Me(this,Lr);Me(this,$l);ue(this,Lr,new Map),ue(this,$l,new Map);const n=new Map,s=new Map,r=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:c,type:u})=>{let{base:d,index:f}=cf(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:c,type:d+(f||"")}}),n.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),ue(this,th,JSON.stringify(i));for(const l in i){const c=new Set;for(const u of i[l]){oe(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const d=cf(u.type).base;oe(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",e),!Hg(d)&&(oe(s.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),s.get(d).push(l),n.get(l).add(d))}}const o=Array.from(s.keys()).filter(l=>s.get(l).length===0);oe(o.length!==0,"missing primary type","types",e),oe(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Zn(this,{primaryType:o[0]});function a(l,c){oe(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(s.has(u)){a(u,c);for(const d of c)r.get(d).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of r){const u=Array.from(c);u.sort(),K(this,Lr).set(l,Zk(l,i[l])+u.map(d=>Zk(d,i[d])).join(""))}}get types(){return JSON.parse(K(this,th))}getEncoder(e){let n=K(this,$l).get(e);return n||(n=nt(this,F0,f5).call(this,e),K(this,$l).set(e,n)),n}encodeType(e){const n=K(this,Lr).get(e);return oe(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Qt(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,s){if(Hg(e))return s(e,n);const r=cf(e).array;if(r)return oe(r.count===-1||r.count===n.length,`array length mismatch; expected length ${r.count}`,"value",n),n.map(o=>this._visit(r.prefix,o,s));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],s),o),{});oe(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new ms(e)}static getPrimaryType(e){return ms.from(e).primaryType}static hashStruct(e,n,s){return ms.from(n).hashStruct(e,s)}static hashDomain(e){const n=[];for(const s in e){if(e[s]==null)continue;const r=Qk[s];oe(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),n.push({name:s,type:r})}return n.sort((s,r)=>Wg.indexOf(s.name)-Wg.indexOf(r.name)),ms.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,s){return zt(["0x1901",ms.hashDomain(e),ms.from(n).hash(s)])}static hash(e,n,s){return Qt(ms.encode(e,n,s))}static async resolveNames(e,n,s,r){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!xr(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=ms.from(n);o.visit(s,(a,l)=>(a==="address"&&!xr(l,20)&&(i[l]="0x"),l));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),s=o.visit(s,(a,l)=>a==="address"&&i[l]?i[l]:l),{domain:e,value:s}}static getPayload(e,n,s){ms.hashDomain(e);const r={},i=[];Wg.forEach(l=>{const c=e[l];c!=null&&(r[l]=K7[l](c),i.push({name:l,type:Qk[l]}))});const o=ms.from(n);n=o.types;const a=Object.assign({},n);return oe(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(s),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(s,(l,c)=>{if(l.match(/^bytes(\d*)/))return Re($e(c));if(l.match(/^u?int/))return yt(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return oe(typeof c=="string","invalid string","value",c),c}oe(!1,"unsupported type","type",l)})}}};th=new WeakMap,Lr=new WeakMap,$l=new WeakMap,F0=new WeakSet,f5=function(e){{const r=Hg(e);if(r)return r}const n=cf(e).array;if(n){const r=n.prefix,i=this.getEncoder(r);return o=>{oe(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return K(this,Lr).has(r)&&(a=a.map(Qt)),Qt(zt(a))}}const s=this.types[e];if(s){const r=wv(K(this,Lr).get(e));return i=>{const o=s.map(({name:a,type:l})=>{const c=this.getEncoder(l)(i[a]);return K(this,Lr).has(l)?Qt(c):c});return o.unshift(r),zt(o)}}oe(!1,`unknown type: ${e}`,"type",e)};let n0=ms;BigInt(0);function p5(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Re(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of n)!(r in t)||t[r]==null||(e[r]=yt(t[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in t)||t[r]==null||(e[r]=es(t[r],`request.${r}`));return t.accessList&&(e.accessList=pm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(r=>lm(r)?Re(r):Object.assign({},r))),e}function fo(t,e){if(t.provider)return t.provider;at(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function e2(t,e){let n=p5(e);if(n.to!=null&&(n.to=Uu(n.to,t)),n.from!=null){const s=n.from;n.from=Promise.all([t.getAddress(),Uu(s,t)]).then(([r,i])=>(oe(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else n.from=t.getAddress();return await rv(n)}class m5{constructor(e){ce(this,"provider");Zn(this,{provider:e||null})}async getNonce(e){return fo(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await e2(this,e)}async populateTransaction(e){const n=fo(this,"populateTransaction"),s=await e2(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const o=yt(s.chainId);oe(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?oe(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&i&&oe(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const o=await n.getFeeData();at(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(s.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const a=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=a,s.maxPriorityFeePerGas=a}else s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(at(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice),s.type=0):at(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await rv(s)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await fo(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return fo(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return fo(this,"call").call(await this.populateCall(e))}async resolveName(e){return await fo(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=fo(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const r=t0.from(s);return await n.broadcastTransaction(await this.signTransaction(r))}authorize(e){at(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var Bl,up;const $1=class $1 extends m5{constructor(n,s){super(s);Me(this,Bl);ce(this,"address");Zn(this,{address:n})}async getAddress(){return this.address}connect(n){return new $1(this.address,n)}async signTransaction(n){nt(this,Bl,up).call(this,"transactions","signTransaction")}async signMessage(n){nt(this,Bl,up).call(this,"messages","signMessage")}async signTypedData(n,s,r){nt(this,Bl,up).call(this,"typed-data","signTypedData")}};Bl=new WeakSet,up=function(n,s){at(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:s})};let ry=$1;var zl;const B1=class B1 extends m5{constructor(n,s){super(s);ce(this,"address");Me(this,zl);oe(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),ue(this,zl,n);const r=bh(this.signingKey.publicKey);Zn(this,{address:r})}get signingKey(){return K(this,zl)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new B1(K(this,zl),n)}async signTransaction(n){n=p5(n);const{to:s,from:r}=await rv({to:n.to?Uu(n.to,this):void 0,from:n.from?Uu(n.from,this):void 0});s!=null&&(n.to=s),r!=null&&(n.from=r),n.from!=null&&(oe(Ms(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const i=t0.from(n);return i.signature=this.signingKey.sign(i.unsignedHash),i.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(W7(n)).serialized}authorizeSync(n){oe(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const s=this.signingKey.sign(U7(n));return Object.assign({},{address:Ms(n.address),nonce:yt(n.nonce||0),chainId:yt(n.chainId||0)},{signature:s})}async authorize(n){return n=Object.assign({},n,{address:await Uu(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,s,r){const i=await n0.resolveNames(n,s,r,async o=>{at(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return at(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(n0.hash(i.domain,s,i.value)).serialized}};zl=new WeakMap;let iy=B1;const s0=" !#$%&'()*+,-./<=>?@[]^_`{|}~",X7=/^[a-z]*$/i;function t2(t,e){let n=97;return t.reduce((s,r)=>(r===e?n++:r.match(X7)?s.push(String.fromCharCode(n)+r):(n=97,s.push(r)),s),[])}function Q7(t,e){for(let r=s0.length-1;r>=0;r--)t=t.split(s0[r]).join(e.substring(2*r,2*r+2));const n=[],s=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(r,i,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(i.toLowerCase());return""});if(s)throw new Error(`leftovers: ${JSON.stringify(s)}`);return t2(t2(n,";"),":")}function J7(t){return oe(t[0]==="0","unsupported auwl data","data",t),Q7(t.substring(1+2*s0.length),t.substring(1,1+2*s0.length))}class Z7{constructor(e){ce(this,"locale");Zn(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var Ul,nh,Wo,sh,oy;class e9 extends Z7{constructor(n,s,r){super(n);Me(this,sh);Me(this,Ul);Me(this,nh);Me(this,Wo);ue(this,Ul,s),ue(this,nh,r),ue(this,Wo,null)}get _data(){return K(this,Ul)}_decodeWords(){return J7(K(this,Ul))}getWord(n){const s=nt(this,sh,oy).call(this);return oe(n>=0&&n<s.length,`invalid word index: ${n}`,"index",n),s[n]}getWordIndex(n){return nt(this,sh,oy).call(this).indexOf(n)}}Ul=new WeakMap,nh=new WeakMap,Wo=new WeakMap,sh=new WeakSet,oy=function(){if(K(this,Wo)==null){const n=this._decodeWords();if(wv(n.join(`
`)+`
`)!==K(this,nh))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);ue(this,Wo,n)}return K(this,Wo)};const t9="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",n9="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let Vg=null;class aa extends e9{constructor(){super("en",t9,n9)}static wordlist(){return Vg==null&&(Vg=new aa),Vg}}function g5(t){return(1<<t)-1<<8-t&255}function s9(t){return(1<<t)-1&255}function qg(t,e){aM("NFKD"),e==null&&(e=aa.wordlist());const n=e.split(t);oe(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const s=new Uint8Array(Math.ceil(11*n.length/8));let r=0;for(let c=0;c<n.length;c++){let u=e.getWordIndex(n[c].normalize("NFKD"));oe(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let d=0;d<11;d++)u&1<<10-d&&(s[r>>3]|=1<<7-r%8),r++}const i=32*n.length/3,o=n.length/3,a=g5(o),l=$e(Ts(s.slice(0,i/8)))[0]&a;return oe(l===(s[s.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),Re(s.slice(0,i/8))}function Yg(t,e){oe(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=aa.wordlist());const n=[0];let s=11;for(let o=0;o<t.length;o++)s>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],s-=8):(n[n.length-1]<<=s,n[n.length-1]|=t[o]>>8-s,n.push(t[o]&s9(8-s)),s+=3);const r=t.length/4,i=parseInt(Ts(t).substring(2,4),16)&g5(r);return n[n.length-1]<<=r,n[n.length-1]|=i>>8-r,e.join(n.map(o=>e.getWord(o)))}const Gg={};class Ld{constructor(e,n,s,r,i){ce(this,"phrase");ce(this,"password");ce(this,"wordlist");ce(this,"entropy");r==null&&(r=""),i==null&&(i=aa.wordlist()),am(e,Gg,"Mnemonic"),Zn(this,{phrase:s,password:r,wordlist:i,entropy:n})}computeSeed(){const e=Go("mnemonic"+this.password,"NFKD");return fh(Go(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,s){const r=qg(e,s);return e=Yg($e(r),s),new Ld(Gg,r,e,n,s)}static fromEntropy(e,n,s){const r=$e(e,"entropy"),i=Yg(r,s);return new Ld(Gg,Re(r),i,n,s)}static entropyToPhrase(e,n){const s=$e(e,"entropy");return Yg(s,n)}static phraseToEntropy(e,n){return qg(e,n)}static isValidMnemonic(e,n){try{return qg(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var tn=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},Kg=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},dp,hs,tr;const r9={16:10,24:12,32:14},i9=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],cs=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],uf=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],o9=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],a9=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],l9=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],c9=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],u9=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],d9=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],h9=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],f9=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],p9=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],m9=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],g9=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],b9=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Xg(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class vv{get key(){return tn(this,dp,"f").slice()}constructor(e){if(dp.set(this,void 0),hs.set(this,void 0),tr.set(this,void 0),!(this instanceof vv))throw Error("AES must be instanitated with `new`");Kg(this,dp,new Uint8Array(e),"f");const n=r9[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");Kg(this,tr,[],"f"),Kg(this,hs,[],"f");for(let u=0;u<=n;u++)tn(this,tr,"f").push([0,0,0,0]),tn(this,hs,"f").push([0,0,0,0]);const s=(n+1)*4,r=this.key.length/4,i=Xg(this.key);let o;for(let u=0;u<r;u++)o=u>>2,tn(this,tr,"f")[o][u%4]=i[u],tn(this,hs,"f")[n-o][u%4]=i[u];let a=0,l=r,c;for(;l<s;){if(c=i[r-1],i[0]^=cs[c>>16&255]<<24^cs[c>>8&255]<<16^cs[c&255]<<8^cs[c>>24&255]^i9[a]<<24,a+=1,r!=8)for(let p=1;p<r;p++)i[p]^=i[p-1];else{for(let p=1;p<r/2;p++)i[p]^=i[p-1];c=i[r/2-1],i[r/2]^=cs[c&255]^cs[c>>8&255]<<8^cs[c>>16&255]<<16^cs[c>>24&255]<<24;for(let p=r/2+1;p<r;p++)i[p]^=i[p-1]}let u=0,d,f;for(;u<r&&l<s;)d=l>>2,f=l%4,tn(this,tr,"f")[d][f]=i[u],tn(this,hs,"f")[n-d][f]=i[u++],l++}for(let u=1;u<n;u++)for(let d=0;d<4;d++)c=tn(this,hs,"f")[u][d],tn(this,hs,"f")[u][d]=p9[c>>24&255]^m9[c>>16&255]^g9[c>>8&255]^b9[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=tn(this,tr,"f").length-1,s=[0,0,0,0];let r=Xg(e);for(let a=0;a<4;a++)r[a]^=tn(this,tr,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=o9[r[l]>>24&255]^a9[r[(l+1)%4]>>16&255]^l9[r[(l+2)%4]>>8&255]^c9[r[(l+3)%4]&255]^tn(this,tr,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=tn(this,tr,"f")[n][a],i[4*a]=(cs[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(cs[r[(a+1)%4]>>16&255]^o>>16)&255,i[4*a+2]=(cs[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(cs[r[(a+3)%4]&255]^o)&255;return i}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=tn(this,hs,"f").length-1,s=[0,0,0,0];let r=Xg(e);for(let a=0;a<4;a++)r[a]^=tn(this,hs,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=u9[r[l]>>24&255]^d9[r[(l+3)%4]>>16&255]^h9[r[(l+2)%4]>>8&255]^f9[r[(l+1)%4]&255]^tn(this,hs,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=tn(this,hs,"f")[n][a],i[4*a]=(uf[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(uf[r[(a+3)%4]>>16&255]^o>>16)&255,i[4*a+2]=(uf[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(uf[r[(a+1)%4]&255]^o)&255;return i}}dp=new WeakMap,hs=new WeakMap,tr=new WeakMap;class x9{constructor(e,n,s){if(s&&!(this instanceof s))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new vv(n)},name:{enumerable:!0,value:e}})}}var Ma=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},us=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},xu,wo,fs;class r0 extends x9{constructor(e,n){super("CTR",e,r0),xu.set(this,void 0),wo.set(this,void 0),fs.set(this,void 0),Ma(this,fs,new Uint8Array(16),"f"),us(this,fs,"f").fill(0),Ma(this,xu,us(this,fs,"f"),"f"),Ma(this,wo,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(us(this,fs,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)us(this,fs,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");us(this,fs,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(us(this,fs,"f")[e]===255)us(this,fs,"f")[e]=0;else{us(this,fs,"f")[e]++;break}}encrypt(e){var n,s;const r=new Uint8Array(e);for(let i=0;i<r.length;i++)us(this,wo,"f")===16&&(Ma(this,xu,this.aes.encrypt(us(this,fs,"f")),"f"),Ma(this,wo,0,"f"),this.increment()),r[i]^=us(this,xu,"f")[Ma(this,wo,(s=us(this,wo,"f"),n=s++,s),"f"),n];return r}decrypt(e){return this.encrypt(e)}}xu=new WeakMap,wo=new WeakMap,fs=new WeakMap;function Yc(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function b5(t){return typeof t=="string"?Go(t,"NFKC"):Ra(t)}const y9="m/44'/60'/0'/0/0";function x5(t){const e=t.salt!=null?$e(t.salt,"options.salt"):Yr(32);let n=1<<17,s=8,r=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(s=t.scrypt.r),t.scrypt.p&&(r=t.scrypt.p)),oe(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),oe(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt r parameter","options.r",s),oe(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt p parameter","options.p",r),{name:"scrypt",dkLen:32,salt:e,N:n,r:s,p:r}}function y5(t,e,n,s){const r=$e(n.privateKey,"privateKey"),i=s.iv!=null?$e(s.iv,"options.iv"):Yr(16);oe(i.length===16,"invalid options.iv length","options.iv",s.iv);const o=s.uuid!=null?$e(s.uuid,"options.uuid"):Yr(16);oe(o.length===16,"invalid options.uuid length","options.uuid",s.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new r0(a,i),u=$e(c.encrypt(r)),d=Qt(zt([l,u])),f={address:n.address.substring(2).toLowerCase(),id:MR(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Re(i).substring(2)},ciphertext:Re(u).substring(2),kdf:"scrypt",kdfparams:{salt:Re(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:d.substring(2)}};if(n.mnemonic){const p=s.client!=null?s.client:`ethers/${oM}`,m=n.mnemonic.path||y9,b=n.mnemonic.locale||"en",x=t.slice(32,64),g=$e(n.mnemonic.entropy,"account.mnemonic.entropy"),y=Yr(16),S=new r0(x,y),w=$e(S.encrypt(g)),v=new Date,_="UTC--"+(v.getUTCFullYear()+"-"+Yc(v.getUTCMonth()+1,2)+"-"+Yc(v.getUTCDate(),2)+"T"+Yc(v.getUTCHours(),2)+"-"+Yc(v.getUTCMinutes(),2)+"-"+Yc(v.getUTCSeconds(),2)+".0Z")+"--"+f.address;f["x-ethers"]={client:p,gethFilename:_,path:m,locale:b,mnemonicCounter:Re(y).substring(2),mnemonicCiphertext:Re(w).substring(2),version:"0.1"}}return JSON.stringify(f)}function w9(t,e,n){n==null&&(n={});const s=b5(e),r=x5(n),i=mh(s,r.salt,r.N,r.r,r.p,64);return y5($e(i),r,t,n)}async function v9(t,e,n){n==null&&(n={});const s=b5(e),r=x5(n),i=await ph(s,r.salt,r.N,r.r,r.p,64,n.progressCallback);return y5($e(i),r,t,n)}const Qg="m/44'/60'/0'/0/0",S9=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),Gi=2147483648,k9=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),C9="0123456789abcdef";function i0(t,e){let n="";for(;t;)n=C9[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function ay(t){const e=$e(t),n=iv(Ts(Ts(e)),0,4),s=zt([e,n]);return ER(s)}const or={};function w5(t,e,n,s){const r=new Uint8Array(37);t&Gi?(at(s!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),r.set($e(s),1)):r.set($e(n));for(let o=24;o>=0;o-=8)r[33+(o>>3)]=t>>24-o&255;const i=$e(kc("sha512",e,r));return{IL:i.slice(0,32),IR:i.slice(32)}}function v5(t,e){const n=e.split("/");oe(n.length>0,"invalid path","path",e),n[0]==="m"&&(oe(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let s=t;for(let r=0;r<n.length;r++){const i=n[r];if(i.match(/^[0-9]+'$/)){const o=parseInt(i.substring(0,i.length-1));oe(o<Gi,"invalid path index",`path[${r}]`,i),s=s.deriveChild(Gi+o)}else if(i.match(/^[0-9]+$/)){const o=parseInt(i);oe(o<Gi,"invalid path index",`path[${r}]`,i),s=s.deriveChild(o)}else oe(!1,"invalid path component",`path[${r}]`,i)}return s}var rh,ly,Ho,yu;const Ds=class Ds extends iy{constructor(n,s,r,i,o,a,l,c,u){super(s,u);Me(this,rh);ce(this,"publicKey");ce(this,"fingerprint");ce(this,"parentFingerprint");ce(this,"mnemonic");ce(this,"chainCode");ce(this,"path");ce(this,"index");ce(this,"depth");am(n,or,"HDNodeWallet"),Zn(this,{publicKey:s.compressedPublicKey});const d=iv(Cc(Ts(this.publicKey)),0,4);Zn(this,{parentFingerprint:r,fingerprint:d,chainCode:i,path:o,index:a,depth:l}),Zn(this,{mnemonic:c})}connect(n){return new Ds(or,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,s){return await v9(nt(this,rh,ly).call(this),n,{progressCallback:s})}encryptSync(n){return w9(nt(this,rh,ly).call(this),n)}get extendedKey(){return at(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),ay(zt(["0x0488ADE4",i0(this.depth,1),this.parentFingerprint,i0(this.index,4),this.chainCode,zt(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new Fd(or,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const s=es(n,"index");oe(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~Gi),s&Gi&&(r+="'"));const{IR:i,IL:o}=w5(s,this.chainCode,this.publicKey,this.privateKey),a=new gr(ec((cM(o)+BigInt(this.privateKey))%k9,32));return new Ds(or,a,this.fingerprint,Re(i),r,s,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return v5(this,n)}static fromExtendedKey(n){const s=Bt(PR(n));oe(s.length===82||ay(s.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const r=s[4],i=Re(s.slice(5,9)),o=parseInt(Re(s.slice(9,13)).substring(2),16),a=Re(s.slice(13,45)),l=s.slice(45,78);switch(Re(s.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=Re(l);return new Fd(or,bh(c),c,i,a,null,o,r,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new Ds(or,new gr(l.slice(1)),i,a,null,o,r,null,null)}oe(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,s,r){var o;n==null&&(n=""),s==null&&(s=Qg),r==null&&(r=aa.wordlist());const i=Ld.fromEntropy(Yr(16),n,r);return nt(o=Ds,Ho,yu).call(o,i.computeSeed(),i).derivePath(s)}static fromMnemonic(n,s){var r;return s||(s=Qg),nt(r=Ds,Ho,yu).call(r,n.computeSeed(),n).derivePath(s)}static fromPhrase(n,s,r,i){var a;s==null&&(s=""),r==null&&(r=Qg),i==null&&(i=aa.wordlist());const o=Ld.fromPhrase(n,s,i);return nt(a=Ds,Ho,yu).call(a,o.computeSeed(),o).derivePath(r)}static fromSeed(n){var s;return nt(s=Ds,Ho,yu).call(s,n,null)}};rh=new WeakSet,ly=function(){const n={address:this.address,privateKey:this.privateKey},s=this.mnemonic;return this.path&&s&&s.wordlist.locale==="en"&&s.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:s.entropy}),n},Ho=new WeakSet,yu=function(n,s){oe(lm(n),"invalid seed","seed","[REDACTED]");const r=$e(n,"seed");oe(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const i=$e(kc("sha512",S9,r)),o=new gr(Re(i.slice(0,32)));return new Ds(or,o,"0x00000000",Re(i.slice(32)),"m",0,0,s,null)},Me(Ds,Ho);let oc=Ds;class Fd extends ry{constructor(n,s,r,i,o,a,l,c,u){super(s,u);ce(this,"publicKey");ce(this,"fingerprint");ce(this,"parentFingerprint");ce(this,"chainCode");ce(this,"path");ce(this,"index");ce(this,"depth");am(n,or,"HDNodeVoidWallet"),Zn(this,{publicKey:r});const d=iv(Cc(Ts(r)),0,4);Zn(this,{publicKey:r,fingerprint:d,parentFingerprint:i,chainCode:o,path:a,index:l,depth:c})}connect(n){return new Fd(or,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return at(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),ay(zt(["0x0488B21E",i0(this.depth,1),this.parentFingerprint,i0(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const s=es(n,"index");oe(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~Gi),s&Gi&&(r+="'"));const{IR:i,IL:o}=w5(s,this.chainCode,this.publicKey,null),a=gr.addPoints(o,this.publicKey,!0),l=bh(a);return new Fd(or,l,a,this.fingerprint,Re(i),r,s,this.depth+1,this.provider)}derivePath(n){return v5(this,n)}}class n2{constructor(e){ce(this,"mnemonic");ce(this,"walletAddress");ce(this,"chainID");this.mnemonic=e.mnemonic,this.walletAddress=e.walletAddress,this.chainID=e.chainID||10900}generateTxID(){const e=Date.now(),n=Math.floor(Math.random()*1e6);return`tx-${e}-${n}`}async getPrivateKeyHex(){const e=oc.fromPhrase(this.mnemonic.trim(),"","m/44'/60'/0'/0/0");if(e.address.toLowerCase()!==this.walletAddress.toLowerCase())throw new Error(`Address mismatch: derived ${e.address} does not match ${this.walletAddress}`);const n=BigInt(e.privateKey),s=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(n===0n||n>=s)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const i=n.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(i))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return i}async signPayload(e){const n=await this.getPrivateKeyHex(),s=Math.floor(Date.now()/1e3);let r;e.deadline&&(r=parseInt(e.deadline,10));const i={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:s,payload:e};r!==void 0&&(i.deadline=r);const o=await qe.generateSingleSignature(JSON.stringify(i),n,this.walletAddress.toLowerCase());if(!o.success||!o.signature)throw new Error(o.error||"Failed to generate signature");return o.signature}async buildCompleteMessage(e,n,s=3600){const i=Math.floor(Date.now()/1e3)+s,o=await n.getNextNonce();return{...e,owner:this.walletAddress,nonce:o,deadline:i.toString()}}buildEIP712Tx(e,n,s){const r=Math.floor(Date.now()/1e3);let i;e.deadline&&(i=parseInt(e.deadline,10));const o={txId:s||this.generateTxID(),sigType:1,threshold:1,timestamp:r,payload:e,signatures:[{signer:this.walletAddress,signature:n}]};return i!==void 0&&(o.deadline=i),o}getWalletAddress(){return this.walletAddress}getChainID(){return this.chainID}}const xm="sys::onboard",Sv="clob::change_margin_ratio",kv="clob::submit_order",o0="clob::cancel_order",a0="bucket::close_position",Cv="clob::modify_order",_v="clob::change_leverage",Ev="clob::inter_transfer",Pv="clob::swap",Tv="bank::mint",Mv="bank::extract_to_bucket",Iv="bank::withdraw_from_bucket",Nv="bank::bucket_transfer",Dv="bank::transfer";var dt=(t=>(t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t))(dt||{});function Av(t,e){const n=t.bucket_id||"---",s=r=>r==null||r===""?0:typeof r=="string"||typeof r=="number"?e(r):0;return{bucketId:n,address:t.address||"",totalEquity:s(t.total_equity||t.dedicated_margin),dedicatedMargin:s(t.dedicated_margin),usedMargin:s(t.used_margin),availableMargin:s(t.available_margin),totalPositions:t.total_positions||0,unrealizedPnL:s(t.unrealized_pnl),leverage:typeof t.max_leverage=="string"?parseFloat(t.max_leverage):typeof t.max_leverage=="number"?t.max_leverage:0,maxLeverage:typeof t.max_leverage=="string"?parseFloat(t.max_leverage):typeof t.max_leverage=="number"?t.max_leverage:0,marginMode:t.margin_type||"CROSS",liquidationPrice:s(t.liquidation_price),riskLevel:t.risk_level||"",riskFactor:t.risk_factor||"",bucketType:t.bucket_type||"",collateralAsset:t.collateral_asset||"",lastUpdated:typeof t.last_updated=="string"?parseInt(t.last_updated,10):typeof t.last_updated=="number"?t.last_updated:0}}function S5(t){const e=t.totalEquity>0?Math.min(Math.max(t.usedMargin/t.totalEquity,0),1):0,n=t.totalEquity>0?t.usedMargin/t.totalEquity:0,s=t.marginMode==="ISOLATED"||t.marginMode==="Isolated"||t.marginMode==="ISOLATE"||t.marginMode==="isolated"?"Isolated":"Cross";return{bucketId:String(t.bucketId),marginType:s,maintenanceMargin:t.usedMargin,nominalValue:t.totalEquity,riskRatio:e,unrealizedPnL:t.unrealizedPnL,leverage:t.leverage,usedMargin:t.usedMargin,totalEquity:t.totalEquity,availableMargin:t.availableMargin,crossMarginRatio:n}}function ja(t){return t!==null&&typeof t=="object"&&typeof t.price=="number"&&typeof t.market_id=="string"&&typeof t.quantity=="number"&&typeof t.timestamp=="number"&&typeof t.is_buyer_maker=="boolean"&&typeof t.trade_id=="string"}function hp(t){return t!==null&&typeof t=="object"&&typeof t.symbol=="string"&&typeof t.mark_price=="number"&&typeof t.timestamp=="number"}class ao{constructor(e){ce(this,"httpClient");ce(this,"infoClient");ce(this,"nonceManager");ce(this,"mnemonic");ce(this,"chainID");ce(this,"walletAddress");ce(this,"nonceCounter",null);ce(this,"signatureBuilder");this.httpClient=new om(e.baseURL,e.maxRetries||3),this.infoClient=new an({baseURL:e.baseURL}),this.nonceManager=new nv(this.infoClient),this.mnemonic=e.mnemonic,this.chainID=e.chainID||10900}getSignatureBuilder(){if(!this.signatureBuilder){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");this.signatureBuilder=new n2({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}return this.signatureBuilder}getNonceProvider(){return{getNextNonce:()=>this.getNextNonce()}}async initialize(){await qe.initialize();const e=await qe.generateAddress(this.mnemonic,0);if(!e.success||!e.address)throw new Error(`Failed to generate wallet address: ${e.error}`);this.walletAddress=e.address,this.signatureBuilder=new n2({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}getWalletAddress(){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");return this.walletAddress}async refreshNonceFromServer(){const e=this.getWalletAddress(),n=await this.nonceManager.getExpectedNextNonce(e,!1);this.nonceCounter=n.next_nonce,console.log("[ExchangeClient] Refreshed nonce from server",{walletAddress:e,newNonce:this.nonceCounter})}async getNextNonce(){return this.nonceCounter===null&&await this.refreshNonceFromServer(),this.nonceCounter++,this.nonceCounter.toString()}buildOrderPayload(e){const n=ut(e.price),s=ut(e.quantity),r={action:kv,marketId:e.marketId,side:e.side.toUpperCase(),orderType:e.orderType.toUpperCase(),price:n,quantity:s};return e.leverage&&(r.leverage=e.leverage),e.takeProfit&&(r.takeProfit=e.takeProfit),e.stopLoss&&(r.stopLoss=e.stopLoss),r}async placeOrder(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.side||e.side.toUpperCase()!=="BUY"&&e.side.toUpperCase()!=="SELL")throw new Error("side must be BUY or SELL");if(!e.orderType||e.orderType.toUpperCase()!=="LIMIT"&&e.orderType.toUpperCase()!=="MARKET")throw new Error("orderType must be LIMIT or MARKET");if(!e.price||e.price<=0)throw new Error("price must be positive");if(!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");this.walletAddress||await this.initialize();const n=this.buildOrderPayload(e),s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=Math.floor(Date.now()/1e3)-5,a=`order-${Date.now()}-${Math.floor(Math.random()*1e6)}`,l=e.side.toUpperCase()==="BUY",c={address:this.getWalletAddress(),asset_pair:e.marketId,market_id:e.marketId,price:r.price,size:r.quantity,is_buy:l,order_type:e.orderType.toUpperCase(),timestamp:o,client_order_id:a,nonce:r.nonce,deadline:r.deadline,signature:i,time_in_force:e.timeInForce||"GTC"};return e.leverage&&(c.leverage=e.leverage),e.takeProfit&&(c.take_profit=e.takeProfit),e.stopLoss&&(c.stop_loss=e.stopLoss),e.postOnly&&(c.post_only=!0),e.hidden&&(c.hidden=!0),e.displayQuantity&&(c.display_quantity=e.displayQuantity),e.reduceOnly&&(c.reduce_only=!0),(await this.httpClient.post("/clob/v1/order",c)).body}async cancelOrder(e){var c,u,d,f,p,m;if(!e.orderId||e.orderId==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: orderId is empty",e),new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: marketId is empty",e),new Error("marketId cannot be empty");console.log("[ExchangeClient.cancelOrder] Input validation passed",{orderId:e.orderId,marketId:e.marketId}),this.walletAddress?console.log("[ExchangeClient.cancelOrder] Using existing wallet",{walletAddress:this.walletAddress}):(console.log("[ExchangeClient.cancelOrder] Wallet not initialized, initializing now..."),await this.initialize(),console.log("[ExchangeClient.cancelOrder] Wallet initialized",{walletAddress:this.walletAddress}));const n=this.getWalletAddress(),s={action:o0,orderId:e.orderId,marketId:e.marketId,address:n};console.log("[ExchangeClient.cancelOrder] Payload built",{payload:s,action:o0});const r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider());console.log("[ExchangeClient.cancelOrder] Complete message built",{action:i.action,orderId:i.orderId,marketId:i.marketId,address:i.address,owner:i.owner,nonce:i.nonce,deadline:i.deadline,hasAllFields:!!(i.action&&i.orderId&&i.marketId&&i.owner&&i.nonce&&i.deadline)}),console.log("[ExchangeClient.cancelOrder] Generating signature...");const o=await r.signPayload(i);console.log("[ExchangeClient.cancelOrder] Signature generated",{signatureLength:o==null?void 0:o.length,signaturePrefix:(o==null?void 0:o.substring(0,10))+"..."});const a=r.buildEIP712Tx(i,o);console.log("[ExchangeClient.cancelOrder] EIP712Tx built",{eip712Tx:{txId:a.txId,sigType:a.sigType,threshold:a.threshold,timestamp:a.timestamp,deadline:a.deadline,payloadAction:(c=a.payload)==null?void 0:c.action,payloadOrderId:(u=a.payload)==null?void 0:u.orderId,payloadMarketId:(d=a.payload)==null?void 0:d.marketId,signaturesCount:(f=a.signatures)==null?void 0:f.length,signer:(m=(p=a.signatures)==null?void 0:p[0])==null?void 0:m.signer}});const l=this.httpClient.getBaseURL?this.httpClient.getBaseURL():"unknown";console.log("[ExchangeClient.cancelOrder] Submitting to /router/v1/tx endpoint...",{endpoint:"/router/v1/tx",baseURL:l,fullURL:`${l}/router/v1/tx`});try{const b=await this.httpClient.post("/router/v1/tx",a);return console.log("[ExchangeClient.cancelOrder] API response received",{status:b.statusCode,hasBody:!!b.body,responseBody:b.body,orderId:e.orderId}),b.body}catch(b){if(sv(b)){console.log("[ExchangeClient.cancelOrder] Nonce error detected, refreshing nonce from server",{error:b instanceof Error?b.message:String(b),orderId:e.orderId}),await this.refreshNonceFromServer();const x=this.getSignatureBuilder(),g=await x.buildCompleteMessage(s,this.getNonceProvider()),y=await x.signPayload(g),S=x.buildEIP712Tx(g,y);console.log("[ExchangeClient.cancelOrder] Retrying with refreshed nonce",{newNonce:g.nonce});const w=await this.httpClient.post("/router/v1/tx",S);return console.log("[ExchangeClient.cancelOrder] Retry successful",{status:w.statusCode,responseBody:w.body}),w.body}throw console.error("[ExchangeClient.cancelOrder] API call failed",{error:b,errorMessage:b instanceof Error?b.message:String(b),errorStack:b instanceof Error?b.stack:void 0,orderId:e.orderId,marketId:e.marketId,walletAddress:this.walletAddress}),b}}async modifyOrder(e){if(!e.orderId||e.orderId==="")throw new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.newPrice||e.newPrice<=0)throw new Error("newPrice must be positive");if(!e.newQuantity||e.newQuantity<=0)throw new Error("newQuantity must be positive");this.walletAddress||await this.initialize();const n={action:Cv,orderId:e.orderId,marketId:e.marketId,newPrice:ut(e.newPrice),newQuantity:ut(e.newQuantity)},s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async changeLeverage(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newLeverage===void 0)throw new Error("newLeverage must be provided");this.walletAddress||await this.initialize();const n={action:_v,marketId:e.marketId,newLeverage:ut(e.newLeverage),address:this.getWalletAddress()};e.leverageType&&(n.leverageType=e.leverageType),e.bucketId&&(n.bucketId=e.bucketId),e.reason&&(n.reason=e.reason);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async closePosition(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=Math.floor(Date.now()/1e3),r=s+300,i=await this.getNextNonce();if(!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");if(!e.marketPrice||e.marketPrice<=0)throw new Error("marketPrice must be positive");const o=ut(e.quantity).toString(),a=ut(e.marketPrice).toString(),l={action:a0,address:n,marketId:e.marketId,closeSize:o,marketPrice:a,nonce:i,deadline:r},u=await this.getSignatureBuilder().signPayload(l),d={address:n,market_id:e.marketId,close_size:o,market_price:a,timestamp:s,sign_type:1,nonce:i.toString(),chain_id:this.chainID.toString(),deadline:r.toString(),signature:u};return(await this.httpClient.post("/bucket/v1/position/close",d)).body}async closePositionEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(this.walletAddress||await this.initialize(),!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");if(!e.marketPrice||e.marketPrice<=0)throw new Error("marketPrice must be positive");const n=ut(e.quantity),s=ut(e.marketPrice),r={action:a0,address:this.getWalletAddress(),marketId:e.marketId,closeSize:n,marketPrice:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=i.buildEIP712Tx(o,a);return(await this.httpClient.post("/router/v1/tx",l)).body}async swap(e){if(!e.fromToken||e.fromToken==="")throw new Error("fromToken cannot be empty");if(!e.toToken||e.toToken==="")throw new Error("toToken cannot be empty");if(!e.amountIn||e.amountIn<=0)throw new Error("amountIn must be positive");if(!e.minAmountOut||e.minAmountOut<=0)throw new Error("minAmountOut must be positive");this.walletAddress||await this.initialize();const n={action:Pv,fromToken:e.fromToken,toToken:e.toToken,amountIn:ut(e.amountIn),minAmountOut:ut(e.minAmountOut)};e.path&&e.path.length>0&&(n.path=e.path);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async changeMarginRatioEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n={action:Sv,marketId:e.marketId,address:this.getWalletAddress()};e.bucketId&&(n.bucketId=e.bucketId);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async internTransferEIP712Tx(e){if(!e.fromAccount||e.fromAccount==="")throw new Error("fromAccount cannot be empty");if(!e.toAccount||e.toAccount==="")throw new Error("toAccount cannot be empty");if(!e.tokenAddress||e.tokenAddress==="")throw new Error("tokenAddress cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n={action:Ev,fromAccount:e.fromAccount,toAccount:e.toAccount,amount:ut(e.amount),tokenAddress:e.tokenAddress,address:this.getWalletAddress()},s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async bucketTransfer(e){if(!e.fromBucketId||e.fromBucketId.trim()==="")throw new Error("fromBucketId cannot be empty");if(!e.toBucketId||e.toBucketId.trim()==="")throw new Error("toBucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=ut(e.amount),r={action:Nv,fromBucketId:e.fromBucketId,toBucketId:e.toBucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,source_bucket_id:e.fromBucketId,target_bucket_id:e.toBucketId,amount:s,reason:"sdk_transfer",timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bucket/v1/bucket/transfer",c)).body}async extractToBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=ut(e.amount),r={action:Mv,bucketId:e.bucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/extract-to-bucket",c)).body}async createBucket(){}async withdrawFromBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=ut(e.amount),r={action:Iv,bucketId:e.bucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/withdraw-from-bucket",c)).body}async bankMint(e){if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=ut(e.amount),s={action:Tv,asset:e.assetId,amount:n},r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider()),o=await r.signPayload(i),a=r.buildEIP712Tx(i,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async bankTransfer(e){if(!e.to||e.to.trim()==="")throw new Error("to address cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=ut(e.amount),s={action:Dv,to:e.to,asset:e.assetId,amount:n},r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider()),o=await r.signPayload(i),a=r.buildEIP712Tx(i,o);return(await this.httpClient.post("/router/v1/tx",a)).body}}class Ov{constructor(e){ce(this,"ws",null);ce(this,"state",dt.Disconnected);ce(this,"handlers",new Map);ce(this,"reconnectTimer",null);ce(this,"reconnectAttempts",0);ce(this,"config");ce(this,"originalConfig");ce(this,"pingInterval",null);ce(this,"stateChangeHandlers",new Set);this.originalConfig=e;const n=this.convertHTTPToWebSocketURL(e.url);this.config={url:n,authToken:e.authToken||"",walletAddress:e.walletAddress||"",deviceID:e.deviceID||"",reconnectInterval:e.reconnectInterval||5e3,maxReconnectAttempts:e.maxReconnectAttempts||10}}convertHTTPToWebSocketURL(e){if(e.startsWith("ws://")||e.startsWith("wss://")){if(e.includes("router.morpheum.io")){const n=new URL(e);if(!n.pathname||n.pathname==="/")return n.pathname="/websocket",n.toString()}return e}if(e.includes("localhost")||e.includes("127.0.0.1")){const n=e.match(/:(\d+)/);return`ws://localhost:${n?n[1]:"8080"}/websocket`}if(e.startsWith("http://")){const n=e.replace("http://","ws://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(e.startsWith("https://")){const n=e.replace("https://","wss://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(!e||e.trim()===""||e.includes("router.morpheum.io"))return"wss://router.morpheum.io/websocket";try{const n=new URL(e.startsWith("http")?e:`https://${e}`),s=n.protocol==="https:"?"wss:":"ws:",r=n.pathname&&n.pathname!=="/"?n.pathname:"",i=r.endsWith("/websocket")?r:`${r}/websocket`;return`${s}//${n.host}${i}`}catch{return console.warn(`Failed to parse URL ${e}, defaulting to router.morpheum.io/websocket`),"wss://router.morpheum.io/websocket"}}getConnectionURL(){const e=[];this.config.authToken&&e.push(`token=${encodeURIComponent(this.config.authToken)}`),"walletAddress"in this.originalConfig&&this.originalConfig.walletAddress!==void 0&&e.push(`wallet=${encodeURIComponent(this.originalConfig.walletAddress||"")}`),this.config.deviceID&&e.push(`device_id=${encodeURIComponent(this.config.deviceID)}`);const n=this.config.url.includes("?")?"&":"?";return e.length>0?`${this.config.url}${n}${e.join("&")}`:this.config.url}async connect(){if(!(this.state===dt.Connected||this.state===dt.Connecting))return this.setState(dt.Connecting),new Promise((e,n)=>{let s=!1,r=!1,i=null;const o=a=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),this.setState(dt.Disconnected),n(a))};try{const a=this.getConnectionURL();console.log("Connecting to WebSocket:",a);const l=new WebSocket(a);i=window.setTimeout(()=>{!s&&!r&&(l.close(),o(new Error(`WebSocket connection timeout after 10 seconds. Unable to connect to ${a}. Check if the server is running and accessible.`)))},1e4),l.onopen=()=>{if(i!==null&&(clearTimeout(i),i=null),s=!0,this.ws=l,this.setState(dt.Connected),this.reconnectAttempts=0,this.config.authToken)try{const c={type:"auth",token:this.config.authToken};this.config.deviceID&&(c.device_id=this.config.deviceID),l.send(JSON.stringify(c))}catch(c){console.warn("Failed to send auth message after connection:",c)}this.startPing(),e()},l.onmessage=c=>{try{const u=JSON.parse(c.data);this.handleMessage(u)}catch(u){console.error("Failed to parse WebSocket message:",u)}},l.onerror=c=>{console.error("WebSocket error event:",c)},l.onclose=c=>{if(i!==null&&(clearTimeout(i),i=null),this.ws=null,this.stopPing(),!s&&!r){const u=c.code,d=c.reason||"Unknown reason",f=c.wasClean;let p=`WebSocket connection failed. Close code: ${u}`;u===1006?p=`WebSocket connection failed (abnormal closure, code ${u}). Unable to connect to ${a}. Possible causes: Server is not running, network issue, firewall blocking connection, or incorrect URL.`:u===1002?p=`WebSocket protocol error (code ${u}). The server may not support WebSocket protocol or there's a protocol mismatch.`:u===1003?p=`WebSocket unsupported data type (code ${u}).`:u===1008?p=`WebSocket connection closed due to policy violation (code ${u}): ${d}`:u===1011?p=`WebSocket server error (code ${u}): ${d}`:u===1e3?p=`WebSocket connection closed normally (code ${u}) but before opening.`:d&&d!=="Unknown reason"&&(p+=` Reason: ${d}`),!f&&u===1006&&(p+=" This usually indicates the connection was refused or the server is unreachable."),o(new Error(p))}else s&&(this.setState(dt.Disconnected),this.scheduleReconnect())}}catch(a){i!==null&&(clearTimeout(i),i=null);const l=a instanceof Error?a.message:String(a);o(new Error(`Failed to create WebSocket connection: ${l}`))}})}disconnect(){this.cancelReconnect(),this.stopPing(),this.ws&&(this.ws.close(),this.ws=null),this.handlers.clear(),this.stateChangeHandlers.clear(),this.setState(dt.Disconnected)}send(e){if(this.state!==dt.Connected||!this.ws)throw new Error("WebSocket not connected");this.ws.send(JSON.stringify(e))}on(e,n){this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(n)}off(e,n){if(!n){this.handlers.delete(e);return}const s=this.handlers.get(e);if(s){const r=s.indexOf(n);r>-1&&s.splice(r,1)}}getState(){return this.state}isConnected(){return this.state===dt.Connected}setState(e){const n=this.state;this.state=e,n!==e&&this.stateChangeHandlers.forEach(s=>{try{s(e)}catch(r){console.error("Error in state change handler:",r)}})}onStateChange(e){return this.stateChangeHandlers.add(e),()=>{this.stateChangeHandlers.delete(e)}}handleMessage(e){let n;if(typeof e.type=="string")if(e.type==="data")if(typeof e.channel=="string")n=e.channel;else{console.error("Missing channel in data message");return}else e.type==="error"?(n="error",e.error&&console.error("WebSocket server error:",{code:e.error.code,message:e.error.message,details:e.error.details})):e.type==="ack"?n="ack":e.type==="pong"?n="pong":n=e.type;else typeof e.event=="string"?n=e.event:n="message";const s=this.handlers.get(n)||[],r=this.handlers.get("*")||[];s.forEach(i=>{try{i(e)}catch(o){console.error(`Error in handler for ${n}:`,o)}}),n!=="error"&&r.forEach(i=>{try{i(e)}catch(o){console.error("Error in wildcard handler:",o)}})}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}this.reconnectAttempts++,this.setState(dt.Reconnecting),this.reconnectTimer=window.setTimeout(()=>{this.connect().catch(e=>{console.error("Reconnection failed:",e)})},this.config.reconnectInterval)}cancelReconnect(){this.reconnectTimer!==null&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectAttempts=0}startPing(){this.pingInterval=window.setInterval(()=>{this.ws&&this.state===dt.Connected&&this.send({type:"ping"})},3e4)}stopPing(){this.pingInterval!==null&&(clearInterval(this.pingInterval),this.pingInterval=null)}setAuthToken(e,n,s){this.config.authToken=e,this.config.walletAddress=n,this.config.deviceID=s,this.originalConfig.authToken=e,this.originalConfig.walletAddress=n,this.originalConfig.deviceID=s,console.log(`Auth set: address=${n}, device=${s}`)}updateAuth(e,n,s){e!==void 0&&(this.config.authToken=e,this.originalConfig.authToken=e),n!==void 0&&(this.config.walletAddress=n,this.originalConfig.walletAddress=n),s!==void 0&&(this.config.deviceID=s,this.originalConfig.deviceID=s),this.isConnected()&&(this.disconnect(),this.connect())}}class lo{constructor(e){ce(this,"wsClient");ce(this,"subscriptions",new Map);ce(this,"lastPriceWrappedCallbacks",new Map);ce(this,"wrappedCallbacks",new Map);ce(this,"multiFeedSubscriptions",new Map);ce(this,"multiFeedHandlerRegistered",!1);this.wsClient=new Ov({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID})}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.lastPriceWrappedCallbacks.clear(),this.wrappedCallbacks.clear(),this.multiFeedSubscriptions.clear(),this.multiFeedHandlerRegistered=!1}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,n,s){this.wsClient.setAuthToken(e,n,s)}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(n){return console.error("Failed to parse router data field:",n),null}return e}extractRouterData(e){if(e.type==="data"&&e.data){const n=this.parseRouterData(e.data);return n||console.warn("[SubscriptionClient] Failed to parse router data:",e.data),n}return e.type==="error"&&e.error?(console.error("WebSocket error response:",e.error),null):(e.type==="ack"||(e.type!=="data"?console.debug("[SubscriptionClient] Unexpected message type:",e.type,"Full message:",e):e.data||console.warn("[SubscriptionClient] Message type is 'data' but missing data field:",e)),null)}subscribeOrderbook(e,n,s=!0){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="orderbook";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&(s&&l.bids&&Array.isArray(l.bids)&&(l.bids=l.bids.map(([c,u])=>[De(c),De(u)])),s&&l.asks&&Array.isArray(l.asks)&&(l.asks=l.asks.map(([c,u])=>[De(c),De(u)])),n(l))};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeOrderbook(e,n){var i,o;const s="orderbook",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTrades(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="trades";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"trades",params:{market_id:e.toString()}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeTrades(e,n){var i,o;const s="trades",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"trades",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTicker(e,n){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="moniker",r="ticker";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&n(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(s,i);try{this.wsClient.send({type:"subscribe",channel:s,params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTicker(e,n){var o,a;const s="ticker",r="moniker",i=this.subscriptions.get(s)||[];if(n){const l=i.indexOf(n);if(l>-1){i.splice(l,1),this.subscriptions.set(s,i);const c=(o=this.wrappedCallbacks.get(s))==null?void 0:o.get(n);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(s).delete(n))}}else{const l=this.wrappedCallbacks.get(s);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((a=this.subscriptions.get(s))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:r,params:{market_id:e.toString()}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeUserUpdates(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="positions";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"positions",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeUserUpdates(e){var r,i;const n="positions",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"positions"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeLastPrice(e,n,s=!0){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="last_price";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=o=>{console.debug("[SubscriptionClient] last_price message received:",o);const a=this.extractRouterData(o);if(!a){console.warn("[SubscriptionClient] Failed to extract trade data from message:",o);return}if(console.debug("[SubscriptionClient] Extracted trade data:",a),!a.price){console.warn("[SubscriptionClient] Trade data missing price field:",a);return}s&&(a.price&&(a.price=De(a.price)),a.quantity&&(a.quantity=De(a.quantity))),console.debug("[SubscriptionClient] Calling callback with trade data:",a),n(a)};this.lastPriceWrappedCallbacks.set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){this.lastPriceWrappedCallbacks.delete(n);const a=this.subscriptions.get(r)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(r,a)),o}}unsubscribeLastPrice(e,n){var i;const s="last_price",r=this.subscriptions.get(s)||[];if(n){const o=r.indexOf(n);if(o>-1){r.splice(o,1),this.subscriptions.set(s,r);const a=this.lastPriceWrappedCallbacks.get(n);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(n))}}else r.forEach(o=>{const a=this.lastPriceWrappedCallbacks.get(o);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(o))}),this.subscriptions.delete(s);if(((i=this.subscriptions.get(s))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeFundingRate(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="funding_rate";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"funding_rate",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeFundingRate(e,n){var i,o;const s="funding_rate",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"funding_rate",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeBuckets(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="buckets";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"buckets",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBuckets(e){var r,i;const n="buckets",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"buckets"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeDeviation(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="deviation";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"deviation",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeDeviation(e,n){var i,o;const s="deviation",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"deviation",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeIndexPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="index_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"index_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeIndexPrice(e,n){var i,o;const s="index_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"index_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeKline(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n)throw new Error("Interval is required for kline subscription");const r="kline";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeKline(e,n,s){var o,a;const r="kline",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMarkPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="mark_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"mark_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeMarkPrice(e,n){var i,o;const s="mark_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"mark_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribePriceFeed(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="price_feed";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"price_feed",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribePriceFeed(e,n){var i,o;const s="price_feed",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"price_feed",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTWAP(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n||n<=0)throw new Error("Window size must be a positive number");const r="twap";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTWAP(e,n,s){var o,a;const r="twap",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMultiFeed(e,n,s,r){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const i="multi_feed";if(!this.multiFeedHandlerRegistered){const o=a=>{if(a.type==="data"&&a.channel==="multi_feed"&&a.sub_channel){const l=a.sub_channel,c=this.multiFeedSubscriptions.get(l)||[],u=this.subscriptions.get(i)||[];let d=a.data;if(typeof d=="string")try{d=JSON.parse(d)}catch(f){console.error("Failed to parse multi-feed data field:",f);return}d&&(c.forEach(f=>{try{f(d)}catch(p){console.error(`Error in multi-feed sub-channel callback for ${l}:`,p)}}),u.forEach(f=>{try{f({sub_channel:l,data:d})}catch(p){console.error("Error in multi-feed callback:",p)}}))}};this.wsClient.on(i,o),this.multiFeedHandlerRegistered=!0}this.subscriptions.has(i)||this.subscriptions.set(i,[]),this.subscriptions.get(i).push(s);try{const o={market_id:e.toString(),symbol:n};r&&(o.interval=r),this.wsClient.send({type:"subscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed",params:o})}catch(o){const a=this.subscriptions.get(i)||[],l=a.indexOf(s);throw l>-1&&(a.splice(l,1),this.subscriptions.set(i,a)),o}}subscribeMultiFeedSubChannel(e,n,s,r,i){if(this.multiFeedSubscriptions.has(s)||this.multiFeedSubscriptions.set(s,[]),this.multiFeedSubscriptions.get(s).push(r),(this.subscriptions.get("multi_feed")||[]).length===0){const a=()=>{};this.subscribeMultiFeed(e,n,a,i)}}unsubscribeMultiFeed(e,n,s){var o,a;const r="multi_feed",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);l>-1&&(i.splice(l,1),this.subscriptions.set(r,i))}else this.subscriptions.delete(r);if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.multiFeedSubscriptions.clear(),((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}unsubscribeMultiFeedSubChannel(e,n){const s=this.multiFeedSubscriptions.get(e)||[];if(n){const r=s.indexOf(n);r>-1&&(s.splice(r,1),s.length===0?this.multiFeedSubscriptions.delete(e):this.multiFeedSubscriptions.set(e,s))}else this.multiFeedSubscriptions.delete(e)}subscribeBalances(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="balances";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"balances",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBalances(e){var r,i;const n="balances",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"balances"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeOrders(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="orders";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"orders",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeOrders(e){var r,i;const n="orders",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orders"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}}class k5{constructor(e){ce(this,"wsClient");ce(this,"subscriptions",new Map);ce(this,"wrappedCallbacks",new Map);this.wsClient=new Ov({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID})}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.wrappedCallbacks.clear()}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,n,s){this.wsClient.setAuthToken(e,n,s)}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(n){return console.error("Failed to parse router data field:",n),null}return e}extractRouterData(e){if(e.type==="data"&&e.data){const n=this.parseRouterData(e.data);return n||console.warn("[SubscriptionExplorer] Failed to parse router data:",e.data),n}return e.type==="error"&&e.error?(console.error("WebSocket error response:",e.error),null):(e.type==="ack"||(e.type!=="data"?console.debug("[SubscriptionExplorer] Unexpected message type:",e.type,"Full message:",e):e.data||console.warn("[SubscriptionExplorer] Message type is 'data' but missing data field:",e)),null)}subscribeConsensusFlat(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="consensus_flat";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],e]);const r=o=>{const a=this.extractRouterData(o);a&&e(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(e,r),this.wsClient.on(s,r);try{const o={};(n==null?void 0:n.shard_id)!==void 0&&(o.shard_id=n.shard_id.toString()),n!=null&&n.event_type&&(o.event_type=n.event_type),this.wsClient.send({type:"subscribe",channel:"consensus_flat",params:Object.keys(o).length>0?o:void 0})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(e);const a=this.subscriptions.get(s)||[],l=a.indexOf(e);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeConsensusFlat(e){var r,i;const n="consensus_flat",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"consensus_flat"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}}async function _9(t,e,n,s,r){const i=oc.fromPhrase(t.trim(),"","m/44'/60'/0'/0/0");if(i.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${i.address} does not match provided ${e}`);let o;try{o=new gr(i.privateKey)}catch(w){throw new Error(`Invalid private key: cannot create signing key - ${w.message}`)}const a=bh(o.publicKey);if(a.toLowerCase()!==e.toLowerCase())throw new Error(`Private key validation failed: derived address ${a} does not match ${e}`);const l=BigInt(i.privateKey),c=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(l===0n||l>=c)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const d=l.toString(16).toLowerCase().padStart(64,"0"),f=$e("0x"+d);if(f.length!==32)throw new Error(`Invalid private key: expected 32 bytes, got ${f.length}`);if(f.every(w=>w===0))throw new Error("Invalid private key: cannot be zero");const m=BigInt("0x"+d);if(m!==l)throw new Error(`Private key encoding error: bytes do not match BigInt value. Original: ${l.toString(16)}, Reconstructed: ${m.toString(16)}`);const b=d;if(b.length!==64)throw new Error(`Invalid private key format: expected exactly 64 hex chars, got ${b.length}. This should never happen with a valid 32-byte private key.`);if(!/^[0-9a-f]{64}$/.test(b))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");const x=b,g={action:xm,owner:e.toLowerCase(),nonce:n,timestamp:s,deadline:r},y={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:s,payload:g,deadline:parseInt(r,16)};console.log("[Onboard] Signing EIP-712 typed data with generateSingleSignature:",y),console.log("[Onboard] Private key format validated:",{length:x.length,format:"64 lowercase hex chars (no 0x prefix) - matches Go's hex.EncodeToString",preview:`${x.substring(0,8)}...${x.substring(56)}`,isValidSecp256k1:!0,withinCurveOrder:l<c,notZero:l!==0n,bytesLength:f.length,fullHex:x,firstByte:x.substring(0,2),lastByte:x.substring(62,64)}),console.log("[Onboard] Calling WASM GenerateSingleSignature with:",{txJSONLength:JSON.stringify(y).length,privateKeyHexLength:x.length,privateKeyHexPreview:x,signerAddress:e.toLowerCase()});const S=await qe.generateSingleSignature(JSON.stringify(y),x,e.toLowerCase());if(console.log(S),!S.success||!S.signature)throw new Error(S.error||"Failed to generate signature");return console.log("[Onboard] signature:",S.signature),S.signature}async function E9(t){var e,n;try{const s=await _9(t.mnemonic,t.walletAddress,t.message.nonce,t.message.timestamp,t.message.deadline);console.log("[Onboard] Signature generated successfully, length:",s.length);const r={address:t.walletAddress,signature:s,nonce:t.message.nonce,timestamp:t.timestamp,deadline:t.message.deadline,action:xm};t.username&&(r.username=t.username),t.referralCode&&(r.referral_code=t.referralCode),console.log("[Onboard] Request body:",{...r,signature:s.substring(0,20)+"..."});const o=await new om(t.baseURL).post("/auth/v1/onboard",r);if(o.statusCode===200&&o.body){const a=o.body.access_token||o.body.authToken||o.body.token||o.body.accessToken,l=o.body.refresh_token||o.body.refreshToken,c=o.body.expires_at||o.body.expiresAt||(o.body.expires_in?t.timestamp+o.body.expires_in:void 0);return a?{success:!0,authToken:a,refreshToken:l,expiresAt:c}:{success:!1,error:"Response missing authToken field"}}else{const a=((e=o.body)==null?void 0:e.message)||((n=o.body)==null?void 0:n.error)||`HTTP ${o.statusCode}: ${o.body}`,l=new Error(a);throw l.responseBody=o.body,l.statusCode=o.statusCode,l}}catch(s){throw s}}const Rv={auth:{maxRetries:4,baseDelay:500,maxDelay:3e3,jitter:!0,multiplier:2},http:{maxRetries:3,baseDelay:100,maxDelay:5e3,jitter:!0,multiplier:2},nonce:{maxRetries:5,baseDelay:200,maxDelay:2e3,jitter:!0,multiplier:1.5}};function P9(t,e){let n=t.baseDelay*Math.pow(t.multiplier,e);if(n>t.maxDelay&&(n=t.maxDelay),t.jitter){const s=n*.25*Math.random();n+=s}return Math.floor(n)}function T9(t){return new Promise(e=>setTimeout(e,t))}async function ym(t,e,n=()=>!0){let s;for(let r=0;r<=t.maxRetries;r++)try{return await e()}catch(i){if(s=i,!await Promise.resolve(n(i)))throw i;if(r>=t.maxRetries)break;const a=P9(t,r);await T9(a)}throw new Error(`Operation failed after ${t.maxRetries+1} attempts: ${(s==null?void 0:s.message)||s}`)}async function jv(t,e,n,s){try{qe.isReady()||await qe.initialize();const r=await qe.generateAddress(t,0);if(!r.success||!r.address)return{success:!1,error:`Failed to generate address: ${r.error}`};const i=r.address.toLowerCase(),o=new an({baseURL:e}),a=new nv(o);let l=null;try{return await ym(Rv.auth,async()=>{console.log(`[Onboard] Attempt starting - currentNonce: ${l}`),l===null?(l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] First attempt: queried server, using next nonce: ${l}`)):console.log(`[Onboard] Retry attempt: using incremented nonce ${l} from previous failure`);let u=0;const d=10;for(;u<d;)try{await a.validateNonce(i,l,!0);break}catch(x){if(u++,x.message.includes("already pending")||x.message.includes("already used")){if(l=l+1,console.log(`[Onboard] Nonce ${l-1} already pending, incrementing to ${l}`),u>=d)throw new Error(`Failed to find available nonce after ${d} attempts`)}else throw x}const f=Math.floor(Date.now()/1e3),p=f+3600,m={action:xm,owner:i,nonce:Sk(l),timestamp:f,deadline:Sk(p)};let b;try{b=await E9({mnemonic:t,walletAddress:i,message:m,baseURL:e,username:n,referralCode:s,timestamp:f})}catch(x){if(l!==null){const g=l;try{await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Rejected nonce ${g}, incremented to nonce ${l} (will use on retry)`)}catch(y){console.warn("[Onboard] Failed to reject nonce after thrown error:",y),l=l+1,console.log(`[Onboard] Incremented nonce to ${l} (reject failed but incrementing anyway)`)}}else console.warn("[Onboard] Error thrown but currentNonce is null, cannot reject/increment");throw x.currentNonce=l,x}if(!b.success){if(l!==null){const g=l;await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Request failed with nonce ${g}, rejected and incremented to ${l} (will keep incrementing until it works)`)}const x=new Error(b.error||"Onboarding failed");throw x.onboardResult=b,x}return l!==null&&await a.commitNonce(i,l,!0),b},async u=>{var g,y,S;const d=String(u).toLowerCase(),f=((g=u==null?void 0:u.message)==null?void 0:g.toLowerCase())||d,p=(u==null?void 0:u.responseBody)||(u==null?void 0:u.onboardResult),m=((y=p==null?void 0:p.error)==null?void 0:y.toLowerCase())||((S=p==null?void 0:p.message)==null?void 0:S.toLowerCase())||"";if(`${f} ${d} ${m}`.toLowerCase().includes("nonce already pending")){if(l!==null){const w=l;l=l+1,console.log(`[Onboard] Off-chain operation: nonce ${w} already pending/used, incrementing to ${l} (server will validate)`)}else try{l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] currentNonce was null, queried server for starting nonce: ${l}`)}catch(w){console.warn("[Onboard] Failed to query server nonce:",w),l=1}return!0}return sv(u)?(console.log('[Onboard] Nonce-consuming error detected (not "already pending"), clearing currentNonce to force re-query'),l=null,!0):!["failed to generate address","address mismatch","invalid mnemonic"].some(w=>d.includes(w))})}catch(c){if(l!==null)try{await a.rejectNonce(i,l,!0)}catch(u){console.warn("[Onboard] Failed to reject nonce during cleanup:",u)}return{success:!1,error:(c==null?void 0:c.message)||"Unknown error during onboarding"}}}catch(r){return{success:!1,error:(r==null?void 0:r.message)||"Unknown error during onboarding"}}}const M9=Object.freeze(Object.defineProperty({__proto__:null,onboardAndGetAuthToken:jv},Symbol.toStringTag,{value:"Module"})),s2=t=>{let e;const n=new Set,s=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(p=>p(e,f))}},r=()=>e,a={setState:s,getState:r,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(s,r,a);return a},I9=t=>t?s2(t):s2,N9=t=>t;function D9(t,e=N9){const n=fe.useSyncExternalStore(t.subscribe,fe.useCallback(()=>e(t.getState()),[t,e]),fe.useCallback(()=>e(t.getInitialState()),[t,e]));return fe.useDebugValue(n),n}const r2=t=>{const e=I9(t),n=s=>D9(e,s);return Object.assign(n,e),n},A9=t=>t?r2(t):r2,mt=A9((t,e)=>({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,selectedMarketId:null,loadingMarkets:!1,loadingOrderbooks:new Set,loadingTickers:new Set,loadingTrades:new Set,errors:new Map,setMarkets:n=>{const s=new Map,r=new Map;n.forEach(a=>{s.set(a.id,a),a.symbol&&r.set(a.symbol,a),a.moniker&&r.set(a.moniker,a)});let o=e().selectedMarketId;if(!o&&n.length>0){const l=n.find(u=>u.active)||n[0],c=l.market_id?l.market_id:l.id?typeof l.id=="string"?l.id:l.id.toString():null;c&&(o=c)}t({markets:n,marketsById:s,marketsBySymbol:r,selectedMarketId:o,lastUpdated:new Map(e().lastUpdated).set("markets",Date.now())})},setMarket:n=>{const s=e(),r=new Map(s.marketsById),i=new Map(s.marketsBySymbol);r.set(n.id,n),n.symbol&&i.set(n.symbol,n),n.moniker&&i.set(n.moniker,n);const o=s.markets.find(a=>a.id===n.id)?s.markets.map(a=>a.id===n.id?n:a):[...s.markets,n];t({markets:o,marketsById:r,marketsBySymbol:i})},getMarket:n=>e().marketsById.get(n),getMarketBySymbol:n=>e().marketsBySymbol.get(n),setSelectedMarketId:n=>{t({selectedMarketId:n})},setOrderbook:(n,s)=>{const r=e(),i=new Map(r.orderbooks);i.set(n,{...s,timestamp:Date.now()}),t({orderbooks:i,lastUpdated:new Map(r.lastUpdated).set(n,Date.now())})},getOrderbook:n=>e().orderbooks.get(n),updateOrderbook:(n,s)=>{const r=e(),i=r.orderbooks.get(n);if(i){const o={...i,...s,timestamp:Date.now()};r.setOrderbook(n,o)}else r.setOrderbook(n,{bids:s.bids||[],asks:s.asks||[],timestamp:Date.now()})},setTicker:(n,s)=>{const r=e(),i=new Map(r.tickers);i.set(n,{...s,marketId:n,timestamp:Date.now()}),t({tickers:i,lastUpdated:new Map(r.lastUpdated).set(`ticker_${n}`,Date.now())})},getTicker:n=>e().tickers.get(n),setRecentTrades:(n,s)=>{const r=e(),i=new Map(r.recentTrades);i.set(n,s),t({recentTrades:i,lastUpdated:new Map(r.lastUpdated).set(`trades_${n}`,Date.now())})},getRecentTrades:n=>e().recentTrades.get(n),setLoading:(n,s)=>{const r=e();if(n==="markets")t({loadingMarkets:s});else if(n.startsWith("orderbook_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingOrderbooks);s?o.add(i):o.delete(i),t({loadingOrderbooks:o})}else if(n.startsWith("ticker_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTickers);s?o.add(i):o.delete(i),t({loadingTickers:o})}else if(n.startsWith("trades_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTrades);s?o.add(i):o.delete(i),t({loadingTrades:o})}},setError:(n,s)=>{const r=e(),i=new Map(r.errors);s?i.set(n,s):i.delete(n),t({errors:i})},clearError:n=>{e().setError(n,null)},clearCache:n=>{const s=e();if(n){const r=new Map(s.orderbooks),i=new Map(s.tickers),o=new Map(s.recentTrades),a=new Map(s.lastUpdated);r.delete(n),i.delete(n),o.delete(n),a.delete(n),a.delete(`ticker_${n}`),a.delete(`trades_${n}`),t({orderbooks:r,tickers:i,recentTrades:o,lastUpdated:a})}else t({orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map})},clearAllCache:()=>{t({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,errors:new Map,selectedMarketId:null})}})),O9=Object.freeze(Object.defineProperty({__proto__:null,ConnectionState:dt,ExchangeClient:ao,HttpClient:om,InfoClient:an,NonceManager:nv,OpBankBucketTransfer:Nv,OpBankExtractToBucket:Mv,OpBankMint:Tv,OpBankTransfer:Dv,OpBankWithdrawFromBucket:Iv,OpCancelOrder:o0,OpChangeLeverage:_v,OpChangeMarginRatio:Sv,OpClosePosition:a0,OpInternTransfer:Ev,OpModifyOrder:Cv,OpSubmitOrder:kv,OpSwap:Pv,OperationTypeOnboard:xm,SATOSHI_SCALE:Yo,SubscriptionClient:lo,SubscriptionExplorer:k5,WebSocketClient:Ov,bucketToCollection:S5,fromSatoshi:De,fromSatoshiBatch:rM,initWasm:iM,isLastPriceData:ja,isMarkPriceData:hp,isValidSatoshi:Xx,mormSigner:qe,onboardAndGetAuthToken:jv,toSatoshi:ut,toSatoshiBatch:sM,toSatoshiUint64:tv,transformRawBucketToBucket:Av,useMarketStore:mt},Symbol.toStringTag,{value:"Module"}));function R9(){const[t,e]=k.useState({loading:!0,loaded:!1,error:null}),[n,s]=k.useState({initialized:!1,wasmLoaded:!1,ready:!1});k.useEffect(()=>{(async()=>{try{e(a=>({...a,loading:!0,error:null})),await qe.initialize()?(e({loading:!1,loaded:!0,error:null}),s(qe.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(qe.getStatus()))}catch(o){e({loading:!1,loaded:!1,error:o instanceof Error?o.message:"Unknown error"}),s(qe.getStatus())}})()},[]),k.useEffect(()=>{if(t.loaded){const i=setInterval(()=>{s(qe.getStatus())},1e3);return()=>clearInterval(i)}},[t.loaded]);const r=async()=>{e({loading:!0,loaded:!1,error:null});try{await qe.initialize()?(e({loading:!1,loaded:!0,error:null}),s(qe.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(qe.getStatus()))}catch(i){e({loading:!1,loaded:!1,error:i instanceof Error?i.message:"Unknown error"}),s(qe.getStatus())}};return{wasmStatus:t,isReady:t.loaded&&n.ready,status:n,retry:r}}function j9(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=0){const[n,s]=k.useState(t),[r,i]=k.useState(e),[o,a]=k.useState(null),[l,c]=k.useState(!1);return{mnemonic:n,setMnemonic:s,addressIndex:r,setAddressIndex:i,result:o,loading:l,generateAddress:async()=>{if(!qe.isReady()){a({success:!1,error:"WASM module not ready"});return}c(!0),a(null);try{const d=await qe.generateAddress(n,r);a(d)}catch(d){a({success:!1,error:d instanceof Error?d.message:"Unknown error"})}finally{c(!1)}},isReady:qe.isReady()}}function L9(){const[t,e]=k.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=k.useState("Hello, World!"),[r,i]=k.useState(!1),[o,a]=k.useState(0),[l,c]=k.useState(null),[u,d]=k.useState(!1);return{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:u,signMessage:async()=>{if(!qe.isReady()){c({success:!1,error:"WASM module not ready"});return}d(!0),c(null);try{const p={addressIndex:o,useEIP712:r},m=r?await qe.signEIP712(t,n,p):await qe.signMessage(t,n,p);c(m)}catch(p){c({success:!1,error:p instanceof Error?p.message:"Unknown error"})}finally{d(!1)}},isReady:qe.isReady()}}function df(){var t,e,n,s,r;return typeof window>"u"?null:(t=window.phantom)!=null&&t.ethereum||(e=window.ethereum)!=null&&e.isPhantom?"phantom":(n=window.$onekey)!=null&&n.ethereum||(s=window.ethereum)!=null&&s.isOneKey?"onekey":(r=window.ethereum)!=null&&r.isMetaMask||window.ethereum?"metamask":null}function F9(t){return t==="metamask"||t==="phantom"||t==="onekey"}function $9(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=180,n="clob::submit_order,clob::cancel_order",s="BrowserUserAgent"){const[r,i]=k.useState(t),[o,a]=k.useState(""),[l,c]=k.useState(""),[u,d]=k.useState(""),[f,p]=k.useState(e),[m,b]=k.useState(n),[x,g]=k.useState(s),[y,S]=k.useState(Date.now().toString()),[w,v]=k.useState(null),[C,_]=k.useState(!1),P=async()=>{if(!qe.isReady()){v({success:!1,error:"WASM module not ready"});return}_(!0);try{const z=await qe.generateAddress(r,0);z.success&&z.address?a(z.address):v({success:!1,error:z.error||"Failed to generate owner address"})}catch(z){v({success:!1,error:z instanceof Error?z.message:"Unknown error"})}finally{_(!1)}},M=async()=>{if(!qe.isReady()){v({success:!1,error:"WASM module not ready"});return}_(!0);try{const z=await qe.generateKeypair();z.success&&z.address&&z.privateKey?(c(z.address),d(z.privateKey)):v({success:!1,error:z.error||"Failed to generate agent keypair"})}catch(z){v({success:!1,error:z instanceof Error?z.message:"Unknown error"})}finally{_(!1)}},E=async()=>{if(!qe.isReady()){v({success:!1,error:"WASM module not ready"});return}if(!o||!l){v({success:!1,error:"Owner and agent addresses are required"});return}_(!0),v(null);try{const z=m.split(",").map(T=>T.trim()).filter(T=>T.length>0),R=await qe.prepareAgentSign({owner:o,agent:l,expiresInDays:f,permissions:z,nonce:y,agentName:x});v(R)}catch(z){v({success:!1,error:z instanceof Error?z.message:"Unknown error"})}finally{_(!1)}},{address:I,isConnected:O,connector:j}=Zw(),{signTypedDataAsync:U,isPending:A}=ev(),L=()=>{var T;if(!O||!j)return null;const z=df();if(F9(z))return z;const R=((T=j.name)==null?void 0:T.toLowerCase())||"";return R.includes("phantom")?"phantom":R.includes("onekey")?"onekey":R.includes("metamask")?"metamask":null},B=async()=>{var R,T;if(!qe.isReady()){v({success:!1,error:"WASM module not ready"});return}if(!o||!l){v({success:!1,error:"Owner address and agent address are required"});return}if(!O||!I){v({success:!1,error:"Please connect your MetaMask wallet first"});return}if(L()!=="metamask"){const X=df();v(X==="metamask"?{success:!1,error:'MetaMask wallet detected but not connected via wagmi. Please use the "Connect MetaMask" button first.'}:{success:!1,error:"This function is for MetaMask wallet only. Please use the appropriate button for your wallet."});return}if(I.toLowerCase()!==o.toLowerCase()){v({success:!1,error:`Connected address (${I}) does not match owner address (${o}). Please switch to the correct account in MetaMask.`});return}_(!0),v(null);try{const X=m.split(",").map(ke=>ke.trim()).filter(ke=>ke.length>0),ne=await qe.prepareAgentSign({owner:o,agent:l,expiresInDays:f,permissions:X,nonce:y,agentName:x});if(!ne.success||!ne.typedData){v(ne);return}const q=ne.typedData;let Z,G,se,ae;q.domain&&q.types&&q.message?(Z=q.domain,G=q.types,se=q.primaryType||q.primaryType||"AgentApproval",ae=q.message):(Z=q.domain||{},G=q.types||q.Types||{},se=q.primaryType||q.PrimaryType||"AgentApproval",ae=q.message||q.Message||q);const Ne=await U({domain:Z,types:G,primaryType:se,message:ae});v({success:!0,typedData:ne.typedData,signature:Ne})}catch(X){X.code===4001||(R=X.message)!=null&&R.includes("User rejected")||(T=X.message)!=null&&T.includes("rejected")?v({success:!1,error:"User rejected the signature request"}):v({success:!1,error:X instanceof Error?X.message:"Unknown error during MetaMask signing"})}finally{_(!1)}},F=async()=>{var R,T;if(!qe.isReady()){v({success:!1,error:"WASM module not ready"});return}if(!o||!l){v({success:!1,error:"Owner address and agent address are required"});return}if(!O||!I){v({success:!1,error:"Please connect your Phantom wallet first"});return}if(L()!=="phantom"){const X=df();v(X==="phantom"?{success:!1,error:'Phantom wallet detected but not connected via wagmi. Please use the "Connect Phantom" button first.'}:{success:!1,error:"This function is for Phantom wallet only. Please use the appropriate button for your wallet."});return}if(I.toLowerCase()!==o.toLowerCase()){v({success:!1,error:`Connected address (${I}) does not match owner address (${o}). Please switch to the correct account in Phantom.`});return}_(!0),v(null);try{const X=m.split(",").map(ke=>ke.trim()).filter(ke=>ke.length>0),ne=await qe.prepareAgentSign({owner:o,agent:l,expiresInDays:f,permissions:X,nonce:y,agentName:x});if(!ne.success||!ne.typedData){v(ne);return}const q=ne.typedData;let Z,G,se,ae;q.domain&&q.types&&q.message?(Z=q.domain,G=q.types,se=q.primaryType||q.primaryType||"AgentApproval",ae=q.message):(Z=q.domain||{},G=q.types||q.Types||{},se=q.primaryType||q.PrimaryType||"AgentApproval",ae=q.message||q.Message||q);const Ne=await U({domain:Z,types:G,primaryType:se,message:ae});v({success:!0,typedData:ne.typedData,signature:Ne})}catch(X){X.code===4001||(R=X.message)!=null&&R.includes("User rejected")||(T=X.message)!=null&&T.includes("rejected")?v({success:!1,error:"User rejected the signature request"}):v({success:!1,error:X instanceof Error?X.message:"Unknown error during Phantom signing"})}finally{_(!1)}},$=async()=>{var R,T;if(!qe.isReady()){v({success:!1,error:"WASM module not ready"});return}if(!o||!l){v({success:!1,error:"Owner address and agent address are required"});return}if(!O||!I){v({success:!1,error:"Please connect your OneKey wallet first"});return}if(L()!=="onekey"){const X=df();v(X==="onekey"?{success:!1,error:'OneKey wallet detected but not connected via wagmi. Please use the "Connect OneKey" button first.'}:{success:!1,error:"This function is for OneKey wallet only. Please use the appropriate button for your wallet."});return}if(I.toLowerCase()!==o.toLowerCase()){v({success:!1,error:`Connected address (${I}) does not match owner address (${o}). Please switch to the correct account in OneKey.`});return}_(!0),v(null);try{const X=m.split(",").map(ke=>ke.trim()).filter(ke=>ke.length>0),ne=await qe.prepareAgentSign({owner:o,agent:l,expiresInDays:f,permissions:X,nonce:y,agentName:x});if(!ne.success||!ne.typedData){v(ne);return}const q=ne.typedData;let Z,G,se,ae;q.domain&&q.types&&q.message?(Z=q.domain,G=q.types,se=q.primaryType||q.primaryType||"AgentApproval",ae=q.message):(Z=q.domain||{},G=q.types||q.Types||{},se=q.primaryType||q.PrimaryType||"AgentApproval",ae=q.message||q.Message||q);const Ne=await U({domain:Z,types:G,primaryType:se,message:ae});v({success:!0,typedData:ne.typedData,signature:Ne})}catch(X){X.code===4001||(R=X.message)!=null&&R.includes("User rejected")||(T=X.message)!=null&&T.includes("rejected")?v({success:!1,error:"User rejected the signature request"}):v({success:!1,error:X instanceof Error?X.message:"Unknown error during OneKey signing"})}finally{_(!1)}},D=O&&L()==="metamask"&&(I==null?void 0:I.toLowerCase())===o.toLowerCase();return{ownerMnemonic:r,setOwnerMnemonic:i,ownerAddress:o,setOwnerAddress:a,agentAddress:l,setAgentAddress:c,agentPrivateKey:u,setAgentPrivateKey:d,expiresInDays:f,setExpiresInDays:p,permissions:m,setPermissions:b,agentName:x,setAgentName:g,nonce:y,setNonce:S,result:w,loading:C||A,generateOwnerAddress:P,generateAgentKeypair:M,prepareAgentSign:E,signAgentApproval:B,signAgentApprovalWithPhantom:F,signAgentApprovalWithOneKey:$,isMetaMaskConnected:D,isPhantomConnected:O&&L()==="phantom"&&(I==null?void 0:I.toLowerCase())===o.toLowerCase(),isOneKeyConnected:O&&L()==="onekey"&&(I==null?void 0:I.toLowerCase())===o.toLowerCase(),isReady:qe.isReady()}}const la="http://localhost:8080",C5="ws://localhost:8080/websocket",B9="300px",z9="300px",U9="270px",_5="630px",Lv=5e3,W9="1",H9=100,E5=20,V9="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",Jg=1,i2=100,q9=1,hf=0,Zg=100,eb=1,Y9=.01,o2=0,G9="BINANCE:BTCUSDT",K9="5",X9="https://s3.tradingview.com/tv.js",li=2,Q9=2,Ri="asc",ll="desc",cy="market",tb="limit",$d="CROSS",J9="ISOLATED",Z9="ONE_WAY",Bd="LONG",uy="SHORT",a2="symbol",l2="leverage",c2="size",u2="liquidationPrice",d2="unrealizedPnL",h2="entryPrice",f2="margin",nb="all",ff="byBucket",p2="1.5fr 1.2fr 1fr 1fr 1fr 1.2fr 1.2fr 1fr",eL="#51cf66",tL="#ff6b6b",nL="Loading positions...",sL="No open positions",rL="POSITIONS",iL="All",oL="By Bucket",sb="--",m2="symbol",g2="side",b2="quantity",x2="price",y2="filledQuantity",w2="status",ci="pending",v2="history",aL="ORDER_STATUS_PENDING",lL="ORDER_STATUS_OPEN",cL="PARTIALLY_FILLED",S2=[aL,lL,"PENDING","OPEN","NEW",cL],rb="#ffc107",ib="#17a2b8",k2="#28a745",ob="#dc3545",C2="#dc3545",uL="#6c757d",dL="#51cf66",hL="#ff6b6b",_2="1.5fr 1fr 1fr 1.2fr 1.2fr 1.2fr 1fr 1fr",fL="Loading pending orders...",pL="No pending orders",mL="No historical orders",gL="OPEN ORDERS",bL="ORDER HISTORY",xL="Wallet address required to view pending orders",yL="Pending",wL="History",vL="--",SL="Unknown";function kL(t){const[e,n]=k.useState(null),[s,r]=k.useState(null),[i,o]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState(null),[d,f]=k.useState(cy),[p,m]=k.useState(0),[b,x]=k.useState(0),[g,y]=k.useState("0"),[S,w]=k.useState(q9),[v,C]=k.useState(Z9),[_,P]=k.useState($d),[M,E]=k.useState(0),[I,O]=k.useState(0),[j,U]=k.useState(t.marketId||"1");k.useEffect(()=>{t.selectedBucketBalance!==void 0&&E(t.selectedBucketBalance)},[t.selectedBucketBalance]),k.useEffect(()=>{const Z=new ao({baseURL:t.baseURL,mnemonic:t.mnemonic}),G=new an({baseURL:t.baseURL});n(Z),r(G),Z.initialize().then(()=>{o(!0)}).catch(se=>{console.error("Failed to initialize exchange client:",se),u({success:!1,error:`Initialization failed: ${se.message}`})})},[t.baseURL,t.mnemonic]);const A=k.useCallback(async()=>{if(!(!s||!e)&&t.selectedBucketBalance===void 0)try{const Z=e.getWalletAddress(),G=await s.getBalanceDecimal(Z,"MORM");G&&G.available_balance!==void 0&&E(De(G.available_balance)||0)}catch(Z){console.error("Failed to load balance:",Z)}},[s,e,t.selectedBucketBalance]);k.useEffect(()=>{i&&s&&e&&t.selectedBucketBalance===void 0&&A()},[i,s,e,t.selectedBucketBalance,A]);const L=k.useCallback(async()=>{if(s)try{const Z=await s.getTicker(j);if(Z&&Z.lastPrice){const G=typeof Z.lastPrice=="string"?De(Z.lastPrice):Z.lastPrice;O(G),(!g||g==="0")&&y(G.toString())}}catch(Z){console.error("Failed to load market price:",Z)}},[s,j,g]);k.useEffect(()=>{i&&s&&L()},[i,s,L]);const B=k.useCallback(()=>d==="market"?t.tradePrice&&t.tradePrice>0?t.tradePrice:I:g?parseFloat(g):I,[d,g,I,t.tradePrice]),F=k.useCallback(()=>M*S,[M,S]),$=k.useCallback(()=>{let Z;if(b>0)Z=b;else{const se=F()*p/100,ae=B();if(ae<=0)return 0;Z=se/ae}return t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&Z>t.maxSizeLimit?t.maxSizeLimit:Z},[b,p,F,B,t.maxSizeLimit]),D=k.useCallback(()=>{const Z=$(),G=B();return Z*G},[$,B]),z=k.useCallback(()=>{const Z=$(),G=B(),se=Z*G;return tv(se)},[$,B]),R=k.useCallback(()=>{const Z=z();return S<=0?0:Math.floor(Z/S)},[z,S]),T=k.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const Z=$();if(Z<=0){u({success:!1,error:"Invalid order size"});return}const G=B();if(G<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!g){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const se=ut(S.toString()),ae=await e.placeOrder({marketId:j,side:"buy",orderType:d,price:G,quantity:Z,leverage:se});u({success:!0,orderId:ae.order_id,message:"Buy order placed successfully"}),await A()}catch(se){u({success:!1,error:se instanceof Error?se.message:"Unknown error"})}finally{l(!1)}},[e,i,$,B,d,g,S,j,A]),X=k.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const Z=$();if(Z<=0){u({success:!1,error:"Invalid order size"});return}const G=B();if(G<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!g){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const se=ut(S.toString()),ae=await e.placeOrder({marketId:j,side:"sell",orderType:d,price:G,quantity:Z,leverage:se});u({success:!0,orderId:ae.order_id,message:"Sell order placed successfully"}),await A()}catch(se){u({success:!1,error:se instanceof Error?se.message:"Unknown error"})}finally{l(!1)}},[e,i,$,B,d,g,S,j,A]),ne=k.useCallback(Z=>{const G=F(),se=G*Z/100,ae=t.tradePrice&&t.tradePrice>0?t.tradePrice:I>0?I:0,Ne=ae>0?se/ae:0;let ke=isNaN(Ne)||!isFinite(Ne)?0:Math.round(Ne*1e8)/1e8;if(t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&ke>t.maxSizeLimit){ke=t.maxSizeLimit;const Ee=B();if(ke>0&&G>0&&Ee>0){const st=ke*Ee/G*100;m(Math.min(100,Math.max(0,st)))}else m(Z)}else m(Z);x(ke)},[F,I,t.tradePrice,t.maxSizeLimit,B]),q=k.useCallback(Z=>{let G=isNaN(Z)||Z<0?0:Z;t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&G>t.maxSizeLimit&&(G=t.maxSizeLimit),x(G);const se=F(),ae=B();if(G>0&&se>0&&ae>0){const ke=G*ae/se*100;m(Math.min(100,Math.max(0,ke)))}else m(0)},[F,B,t.maxSizeLimit]);return{orderType:d,setOrderType:f,fundPercent:p,sizeInput:b,price:g,leverage:S,positionMode:v,marginMode:_,availableBalance:M,currentPrice:I,marketId:j,isReady:i,loading:a,result:c,setFundPercent:ne,setSizeInput:q,setPrice:y,setLeverage:w,setPositionMode:C,setMarginMode:P,setMarketId:U,placeBuyOrder:T,placeSellOrder:X,loadBalance:A,loadMarketPrice:L,calculateSize:$,calculateSizeUSD:D,calculateValue:z,calculateMargin:R,getOrderPrice:B,getAvailableTradeAmount:F}}function P5(t){const[e,n]=k.useState({asks:[],bids:[]}),[s,r]=k.useState(!0),[i,o]=k.useState(null),[a,l]=k.useState(!1),[c,u]=k.useState(null),d=k.useRef(null),f=k.useRef(null),p=k.useRef([]),m=k.useRef(null),b=k.useRef(!1),x=k.useRef(null),g=k.useRef(null),y=k.useRef(null),S=k.useRef(new Map),w=k.useCallback(E=>{const I=[...E].sort((j,U)=>U[0]-j[0]);let O=0;return I.map(([j,U])=>(O+=U,{price:j,size:U,cumulative:O,flash:null}))},[]),v=k.useCallback((E,I)=>{const O=new Map,j=new Map,U=new Map,A=new Map;E.asks.forEach(q=>{q.size>0&&O.set(q.price,q.size)}),E.bids.forEach(q=>{q.size>0&&j.set(q.price,q.size)}),I.asks&&I.asks.forEach(([q,Z])=>{const G=O.get(q)||0;Z===0?O.delete(q):(G>0?U.set(q,Z>G?"up":"down"):U.set(q,"up"),O.set(q,Z))}),I.bids&&I.bids.forEach(([q,Z])=>{const G=j.get(q)||0;Z===0?j.delete(q):(G>0?A.set(q,Z>G?"up":"down"):A.set(q,"up"),j.set(q,Z))});const L=Array.from(O.entries()),B=Array.from(j.entries()),F=w(L),$=w(B),D=Date.now();F.forEach(q=>{const Z=U.get(q.price);Z?(q.flash=Z,S.current.set(`ask-${q.price}`,D)):q.flash=null}),$.forEach(q=>{const Z=A.get(q.price);Z?(q.flash=Z,S.current.set(`bid-${q.price}`,D)):q.flash=null});const z=t.maxDepth||100,R=F.slice(0,z),T=$.slice(0,z);let X,ne;if(R.length>0&&T.length>0){const q=R[R.length-1].price,Z=T[0].price;X=q-Z,ne=(q+Z)/2}return{asks:R,bids:T,spread:X,midPrice:ne}},[w,t.maxDepth]),C=k.useCallback(async()=>{if(d.current)try{const E=await d.current.getOrderbook(t.marketId,!0);if(E&&(E.bids||E.asks)){const I=E.asks||[],O=E.bids||[],j=w(I),U=w(O),A=t.maxDepth||100,L=j.slice(0,A),B=U.slice(0,A);let F,$;if(L.length>0&&B.length>0){const D=L[L.length-1].price,z=B[0].price;F=D-z,$=(D+z)/2}n({asks:L,bids:B,spread:F,midPrice:$})}}catch(E){o(E instanceof Error?E.message:"Failed to load orderbook")}},[t.marketId,t.maxDepth,w]),_=k.useCallback(async()=>{if(d.current){r(!0),o(null);try{const E=await d.current.getOrderbook(t.marketId,!0);if(E&&(E.bids||E.asks)){const I=E.asks||[],O=E.bids||[],j=w(I),U=w(O),A=t.maxDepth||100,L=j.slice(0,A),B=U.slice(0,A);let F,$;if(L.length>0&&B.length>0){const D=L[L.length-1].price,z=B[0].price;F=D-z,$=(D+z)/2}n({asks:L,bids:B,spread:F,midPrice:$})}}catch(E){o(E instanceof Error?E.message:"Failed to load orderbook")}finally{r(!1)}}},[t.marketId,t.maxDepth,w]),P=k.useCallback((E,I)=>{if(E.snapshot===!0||E.type==="snapshot"||E.bids&&E.asks&&E.bids.length>10&&E.asks.length>10&&!E.delta){const j=E.asks||[],U=E.bids||[],A=w(j),L=w(U),B=t.maxDepth||100,F=A.slice(0,B),$=L.slice(0,B);let D,z;if(F.length>0&&$.length>0){const R=F[F.length-1].price,T=$[0].price;D=R-T,z=(R+T)/2}return{asks:F,bids:$,spread:D,midPrice:z}}else return v(I,{bids:E.bids,asks:E.asks})},[w,v,t.maxDepth]),M=k.useCallback(E=>{!E||!E.bids&&!E.asks||(p.current.push(E),m.current!==null&&clearTimeout(m.current),m.current=window.setTimeout(()=>{n(I=>{let O=I;for(const j of p.current)O=P(j,O);if(p.current=[],I.asks.length===O.asks.length&&I.bids.length===O.bids.length&&I.spread===O.spread&&I.midPrice===O.midPrice){const j=I.bids.length>0?I.bids[0].price:0,U=I.asks.length>0?I.asks[I.asks.length-1].price:0,A=O.bids.length>0?O.bids[0].price:0,L=O.asks.length>0?O.asks[O.asks.length-1].price:0;if(j===A&&U===L)return I}return O}),m.current=null},100))},[P]);return k.useEffect(()=>{const E=new an({baseURL:t.baseURL});d.current=E;const I=new lo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});f.current=I,x.current===null&&(x.current=t.marketId);const O=()=>{if(I.isConnected()){const L=x.current!==null?x.current:t.marketId;(!b.current||x.current!==L)&&(b.current&&x.current!==null&&x.current!==L&&I.unsubscribeOrderbook(x.current,M),I.subscribeOrderbook(L,M,!0),b.current=!0,x.current=L)}},j=I.connect();y.current=window.setTimeout(()=>{!I.isConnected()&&d.current&&g.current===null&&(u("WebSocket connection timeout. Using HTTP polling."),l(!1),C(),g.current=window.setInterval(()=>{C()},5e3))},12e3),j.then(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),l(!0),u(null),O()}).catch(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),u("slow connection due to network issue"),l(!1),d.current&&(g.current!==null&&(clearInterval(g.current),g.current=null),C(),g.current=window.setInterval(()=>{C()},5e3))});let U=null;const A=I.wsClient;return A&&(U=A.onStateChange(L=>{L===dt.Connected?(l(!0),u(null),b.current&&O()):(L===dt.Disconnected||L===dt.Reconnecting)&&(l(!1),b.current=!1,u("WebSocket disconnected. Using static data."))})),()=>{const L=x.current;m.current!==null&&(clearTimeout(m.current),m.current=null),y.current!==null&&(clearTimeout(y.current),y.current=null),p.current=[],b.current=!1,x.current=null,U&&U(),f.current&&(L!==null&&f.current.unsubscribeOrderbook(L,M),f.current.disconnect())}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID]),k.useEffect(()=>{if(!d.current||!f.current)return;const E=x.current;return E!==null&&E!==t.marketId&&f.current.isConnected()&&(f.current.unsubscribeOrderbook(E,M),b.current=!1),n({asks:[],bids:[]}),r(!0),o(null),u(null),_(),f.current.isConnected()&&(f.current.subscribeOrderbook(t.marketId,M,!0),b.current=!0),x.current=t.marketId,()=>{f.current&&f.current.isConnected()&&x.current===t.marketId&&(f.current.unsubscribeOrderbook(t.marketId,M),b.current=!1)}},[t.marketId,_,M]),k.useEffect(()=>(g.current!==null&&(clearInterval(g.current),g.current=null),!a&&d.current&&(C(),g.current=window.setInterval(()=>{C()},5e3)),()=>{g.current!==null&&(clearInterval(g.current),g.current=null)}),[a,t.marketId,C]),k.useEffect(()=>{const E=setInterval(()=>{const I=Date.now(),O=500;n(j=>{let U=!1;const A=j.asks.map(B=>{const F=`ask-${B.price}`,$=S.current.get(F);return B.flash&&$&&I-$>=O?(U=!0,S.current.delete(F),{...B,flash:null}):B}),L=j.bids.map(B=>{const F=`bid-${B.price}`,$=S.current.get(F);return B.flash&&$&&I-$>=O?(U=!0,S.current.delete(F),{...B,flash:null}):B});return U?{...j,asks:A,bids:L}:j})},100);return()=>clearInterval(E)},[]),{orderbook:e,loading:s,error:i,isConnected:a,wsError:c,refresh:_}}function va(t,e=2,n=2,s="0.00"){return t==null||isNaN(t)?s:t.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:n})}function l0(t){return t==null||isNaN(t)?"--":va(t,2,2,"--")}function cl(t){return t==null||isNaN(t)?"--":va(t,2,8,"--")}function c0(t){return t==null||isNaN(t)?"0.000":va(t,3,3,"0.000")}function CL(t){return t==null||isNaN(t)?"0":va(t,3,8,"0")}function _L(t){return t==null||isNaN(t)?"0.00":va(t,2,2,"0.00")}function EL(t){return t==null||isNaN(t)?"0.00":va(t,2,2,"0.00")}function Dt(t){return t==null||isNaN(t)?"0.00":va(t,2,2,"0.00")}function T5(t){return t==null||isNaN(t)?"0%":`${(t*100).toFixed(2)}%`}function M5(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return De(t).toFixed(8).replace(/\.?0+$/,"")}catch{return"0"}}function PL(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"--";try{const n=M5(t).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")}catch{return"--"}}function TL(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return M5(t)}catch{return"0"}}function ML(t,e="--"){if(t==null)return e;try{return(typeof t=="string"||typeof t=="number"?De(t):0).toFixed(2).replace(/\.?0+$/,"")}catch{return e}}function Nr(t){if(!t)return Date.now();const e=typeof t=="string"?Number(t):t;return isNaN(e)||e<=0?Date.now():e<9466848e5?e*1e3:e}function wm(t){const[e,n]=k.useState(null),[s,r]=k.useState(null),[i,o]=k.useState(!0),[a,l]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState(null),p=k.useRef(null),m=k.useRef(null),b=k.useRef(!1),x=k.useRef(!1),g=k.useRef(null),y=k.useRef(null),S=k.useCallback(async()=>{if(!p.current){console.warn("[useTradePrice] pollRecentTrades called but infoClientRef.current is null");return}console.debug("[useTradePrice] Polling recent trades (marketId:",t.marketId,")");try{const M=t.limit||100,E=await p.current.getRecentTrades(t.marketId,M);if(E&&Array.isArray(E)&&E.length>0){const O=[...E].sort((U,A)=>{const L=Nr(U.timestamp);return Nr(A.timestamp)-L})[0],j={market_id:O.market_id||t.marketId,price:typeof O.price=="string"?De(O.price):O.price,quantity:typeof O.quantity=="string"?De(O.quantity):O.quantity||0,timestamp:Nr(O.timestamp),is_buyer_maker:O.is_buyer_maker||!1,trade_id:O.trade_id||""};n(U=>(U&&typeof U.price=="number"&&(j.price>U.price?f("up"):j.price<U.price&&f("down")),setTimeout(()=>f(null),500),j))}else console.warn("[useTradePrice] Polling returned no trades or invalid data:",E)}catch(M){l(M instanceof Error?M.message:"Failed to load recent trades"),console.error("[useTradePrice] Failed to poll recent trades:",M)}},[t.marketId,t.limit]),w=k.useCallback(async()=>{if(p.current){o(!0),l(null);try{const M=t.limit||100,E=await p.current.getRecentTrades(t.marketId,M);if(E&&Array.isArray(E)&&E.length>0){const O=[...E].sort((U,A)=>{const L=Nr(U.timestamp);return Nr(A.timestamp)-L})[0],j={market_id:O.market_id||t.marketId,price:typeof O.price=="string"?De(O.price):O.price,quantity:typeof O.quantity=="string"?De(O.quantity):O.quantity||0,timestamp:Nr(O.timestamp),is_buyer_maker:O.is_buyer_maker||!1,trade_id:O.trade_id||""};n(j)}else console.warn("[useTradePrice] Initialization returned no trades or invalid data:",E)}catch(M){l(M instanceof Error?M.message:"Failed to load recent trades"),console.error("Failed to initialize recent trades:",M)}finally{o(!1)}}},[t.marketId,t.limit]),v=k.useCallback(M=>{if(console.debug("[useTradePrice] handleLastPriceUpdate called with data:",M),!M){console.warn("[useTradePrice] handleLastPriceUpdate received null/undefined data");return}if(!M.price&&M.price!==0){console.warn("[useTradePrice] handleLastPriceUpdate received data without price field:",M);return}const E=typeof M.price=="string"?De(M.price):Number(M.price),I=typeof M.quantity=="string"?De(M.quantity):Number(M.quantity)||0;if(isNaN(E)){console.warn("[useTradePrice] Invalid price value:",M.price);return}n(O=>{ja(O)&&typeof O.price=="number"&&(E>O.price?f("up"):E<O.price&&f("down")),setTimeout(()=>f(null),500);const j={market_id:M.market_id||t.marketId,price:E,quantity:I,timestamp:M.timestamp||Date.now(),is_buyer_maker:M.is_buyer_maker||!1,trade_id:M.trade_id||""};return ja(j)||console.error("[useTradePrice] Invalid LastPriceData structure:",j),console.debug("[useTradePrice] Setting lastPrice to:",j),console.debug("[useTradePrice] Type check - isLastPriceData:",ja(j)),j})},[t.marketId]),C=k.useCallback(M=>{if(!M){console.warn("[useTradePrice] handleMarkPriceUpdate received null/undefined data");return}if(M.mark_price===void 0||M.mark_price===null){console.warn("[useTradePrice] handleMarkPriceUpdate received data without mark_price field:",M);return}const E=typeof M.mark_price=="string"?De(M.mark_price):typeof M.mark_price=="number"?M.mark_price:Number(M.mark_price);if(isNaN(E)){console.warn("[useTradePrice] Invalid mark_price value:",M.mark_price);return}const I={symbol:M.symbol||t.symbol||"",mark_price:E,timestamp:M.timestamp||Date.now()};hp(I)||console.error("[useTradePrice] Invalid MarkPriceData structure:",I),r(I)},[t.symbol]);k.useEffect(()=>{const M=new an({baseURL:t.baseURL});p.current=M;const E=new lo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});m.current=E,w();const I=()=>{E.isConnected()&&(b.current||(E.subscribeLastPrice(t.marketId,v,!0),b.current=!0),t.symbol&&!x.current&&(E.subscribeMarkPrice(t.symbol,C),x.current=!0))};console.debug("[useTradePrice] Attempting WebSocket connection...");const O=E.connect();console.debug("[useTradePrice] Connect promise created, waiting for result..."),y.current=window.setTimeout(()=>{console.warn("[useTradePrice] WebSocket connection timeout fallback triggered after 12 seconds");const A=E.isConnected();console.warn("[useTradePrice] subscriptionClient.isConnected():",A,"hasPollingInterval:",g.current!==null),!A&&p.current&&g.current===null?(console.debug("[useTradePrice] Starting HTTP polling due to connection timeout (marketId:",t.marketId,")"),u(!1),S(),g.current=window.setInterval(()=>{S()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):A?console.debug("[useTradePrice] Connection established before timeout, no polling needed"):g.current!==null&&console.debug("[useTradePrice] Polling already started, skipping")},12e3),O.then(()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),console.debug("[useTradePrice] WebSocket connected successfully"),u(!0),I()}).catch(A=>{y.current!==null&&(clearTimeout(y.current),y.current=null),console.error("[useTradePrice] WebSocket connection promise rejected:",A);const L=A instanceof Error?A.message:"Unknown error";console.info("WebSocket failed to establish connection. Falling back to HTTP polling:",L),u(!1),p.current?(g.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (WebSocket failure handler)"),clearInterval(g.current),g.current=null),console.debug("[useTradePrice] Starting HTTP polling due to WebSocket connection failure (marketId:",t.marketId,")"),S(),g.current=window.setInterval(()=>{S()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null")});let j=null;const U=E.wsClient;return U&&(j=U.onStateChange(A=>{console.debug("[useTradePrice] WebSocket state changed to:",A),A===dt.Connected?(console.debug("[useTradePrice] WebSocket connected - stopping polling if active"),u(!0),b.current&&I()):(A===dt.Disconnected||A===dt.Reconnecting)&&(console.debug("[useTradePrice] WebSocket disconnected/reconnecting - polling effect should start polling"),u(!1),b.current=!1,x.current=!1)})),()=>{y.current!==null&&(clearTimeout(y.current),y.current=null),b.current=!1,x.current=!1,j&&j(),m.current&&(m.current.unsubscribeLastPrice(t.marketId,v),t.symbol&&m.current.unsubscribeMarkPrice(t.symbol,C),m.current.disconnect())}},[t.baseURL,t.wsURL,t.marketId,t.symbol,t.authToken,t.walletAddress,t.deviceID]),k.useEffect(()=>{p.current&&m.current&&(m.current.isConnected()&&(m.current.unsubscribeLastPrice(t.marketId,v),b.current=!1,t.symbol&&(m.current.unsubscribeMarkPrice(t.symbol,C),x.current=!1)),w(),m.current.isConnected()&&(m.current.subscribeLastPrice(t.marketId,v,!0),b.current=!0,t.symbol&&(m.current.subscribeMarkPrice(t.symbol,C),x.current=!0)))},[t.marketId,t.symbol]),k.useEffect(()=>(console.debug("[useTradePrice] Polling effect triggered - isConnected:",c,"marketId:",t.marketId),g.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (polling effect)"),clearInterval(g.current),g.current=null),!c&&p.current?(console.debug("[useTradePrice] Starting HTTP polling (WebSocket disconnected, marketId:",t.marketId,")"),S(),g.current=window.setInterval(()=>{S()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):!c&&!p.current?console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null (isConnected:",c,")"):c&&console.debug("[useTradePrice] WebSocket connected, polling not needed"),()=>{g.current!==null&&(console.debug("[useTradePrice] Cleaning up polling interval (polling effect cleanup)"),clearInterval(g.current),g.current=null)}),[c,t.marketId]);const{displayPrice:_,displayTimestamp:P}=k.useMemo(()=>{const M=ja(e)&&e.price!=null,E=hp(s)&&s.mark_price!=null;if(M&&E){const I=e.timestamp||0,O=s.timestamp||0;return I>=O?{displayPrice:e.price,displayTimestamp:I}:{displayPrice:s.mark_price,displayTimestamp:O}}return M?{displayPrice:e.price,displayTimestamp:e.timestamp||0}:E?{displayPrice:s.mark_price,displayTimestamp:s.timestamp||0}:{displayPrice:null,displayTimestamp:null}},[e,s]);return{lastPrice:e,markPrice:s,displayPrice:_,displayTimestamp:P,loading:i,error:a,isConnected:c,priceChange:d,refresh:w,isLastPriceData:ja,isMarkPriceData:hp}}function I5(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(""),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(null),f=k.useRef(0),p=k.useRef(!1),m=k.useRef(t);m.current=t;const b=k.useCallback(y=>{const S=I=>!I||I===""?0:De(I),w=S(y.size),v=y.is_long!==void 0?y.is_long?Bd:uy:w>=0?Bd:uy,C=S(y.entry_price),_=S(y.mark_price),P=y.leverage?parseFloat(y.leverage):void 0,E=S(y.margin_balance)||(P&&C&&w!==0?Math.abs(Math.abs(w)*C/P):0);return{marketId:y.market_id.toString(),symbol:y.symbol||`m-${y.market_id}`,size:Math.abs(w),entryPrice:C,markPrice:_,liquidationPrice:y.liquidation_price?S(y.liquidation_price):void 0,unrealizedPnL:S(y.unrealized_pnl||y.pnl),leverage:P,margin:E,side:v,marginMode:y.margin_mode||y.margin_type||$d,bucketId:y.bucket_id?String(y.bucket_id):void 0}},[]),x=k.useCallback(async()=>{if(!u.current)return;const y=m.current;if(!y.walletAddress||y.walletAddress.trim()===""){a(""),s([]),i(!1);return}a("");try{const S=await ym(Rv.http,()=>u.current.getPositions(y.walletAddress));if(Array.isArray(S)){const w=S.map(b);s(v=>{if(v.length!==w.length)return w;const C=JSON.stringify(v),_=JSON.stringify(w);return C===_?v:w})}else s(w=>w.length===0?w:[])}catch(S){a(S instanceof Error?S.message:"Failed to load positions"),console.error("Failed to fetch positions after retries:",S)}finally{i(!1)}},[b]),g=k.useCallback(y=>{if(y.positions&&Array.isArray(y.positions)){const S=y.positions.map(b);s(w=>{if(w.length!==S.length)return S;const v=JSON.stringify(w),C=JSON.stringify(S);return v===C?w:S})}},[b]);return k.useEffect(()=>{const y=new an({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=y,x(),e&&t.wsURL){const S=new lo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=S;const w=()=>{S.isConnected()&&!p.current&&(S.subscribeUserUpdates(g),p.current=!0)};S.connect().then(()=>{c(!0),w()}).catch(_=>{console.error("Failed to connect WebSocket:",_),c(!1),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{x()},t.refreshInterval))});let v=null;const C=S.wsClient;return C&&(v=C.onStateChange(_=>{_===dt.Connected?(c(!0),p.current&&w(),f.current!==null&&(clearInterval(f.current),f.current=0)):(_===dt.Disconnected||_===dt.Reconnecting)&&(c(!1),p.current=!1,t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{x()},t.refreshInterval)))})),()=>{v&&v(),f.current!==null&&(clearInterval(f.current),f.current=0),d.current&&(d.current.unsubscribeUserUpdates(g),d.current.disconnect())}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{x()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=0)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{positions:n,loading:r,error:o,isConnected:l,refresh:x}}function N5(t){const[e,n]=k.useState([]),[s,r]=k.useState(!0),[i,o]=k.useState(""),a=k.useRef(null),l=k.useRef(0),c=k.useCallback(async()=>{if(a.current){o(""),r(!0);try{if(!t.walletAddress){o("Wallet address is required"),n([]);return}const u=await a.current.getBuckets(t.walletAddress),d=Array.isArray(u)?u:[];Array.isArray(u)||console.warn("[useBuckets] getBuckets returned non-array:",u);const f=d.map(p=>Av(p,De));n(f)}catch(u){const d=u instanceof Error?u.message:"Failed to load buckets";o(d),console.error("Failed to fetch buckets:",u),n([])}finally{r(!1)}}},[t.walletAddress]);return k.useEffect(()=>{const u=new an({baseURL:t.baseURL,sessionToken:t.authToken});return a.current=u,c(),t.refreshInterval&&t.refreshInterval>0&&(l.current=window.setInterval(()=>{c()},t.refreshInterval)),()=>{l.current!==null&&(clearInterval(l.current),l.current=0)}},[t.baseURL,t.authToken,t.walletAddress,t.refreshInterval]),{buckets:e,loading:s,error:i,refresh:c}}function IL(t){const e=t.maxDataPoints||100,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(null),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(!1),f=k.useRef(null),p=k.useCallback(m=>{if(!m){console.warn("[useKline] handleKlineUpdate received null/undefined data");return}try{const b={market_id:m.market_id||String(t.marketId),symbol:m.symbol,interval:m.interval||t.interval,open_time:m.open_time||m.timestamp||Date.now(),close_time:m.close_time||m.open_time||Date.now(),open:typeof m.open=="string"?De(m.open):Number(m.open)||0,high:typeof m.high=="string"?De(m.high):Number(m.high)||0,low:typeof m.low=="string"?De(m.low):Number(m.low)||0,close:typeof m.close=="string"?De(m.close):Number(m.close)||0,volume:typeof m.volume=="string"?De(m.volume):Number(m.volume)||0,trade_count:m.trade_count||m.tradeCount,timestamp:m.timestamp||m.open_time||Date.now(),raw:m};s(x=>{const g=[...x,b];return g.length>e?g.slice(-e):g})}catch(b){console.error("[useKline] Error processing kline update:",b),a(b instanceof Error?b.message:"Failed to process kline data")}},[t.marketId,t.interval,e]);return k.useEffect(()=>{const m=new lo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});u.current=m;const b=()=>{m.isConnected()&&(d.current||(m.subscribeKline(t.marketId,t.interval,p),d.current=!0))};console.debug("[useKline] Attempting WebSocket connection...");const x=m.connect();f.current=window.setTimeout(()=>{console.warn("[useKline] WebSocket connection timeout after 12 seconds"),m.isConnected()||(c(!1),a("WebSocket connection timeout"),i(!1))},12e3),x.then(()=>{f.current!==null&&(clearTimeout(f.current),f.current=null),console.debug("[useKline] WebSocket connected successfully"),c(!0),i(!1),b()}).catch(S=>{f.current!==null&&(clearTimeout(f.current),f.current=null),console.error("[useKline] WebSocket connection failed:",S);const w=S instanceof Error?S.message:"Unknown error";c(!1),a(w),i(!1)});let g=null;const y=m.wsClient;return y&&(g=y.onStateChange(S=>{console.debug("[useKline] WebSocket state changed to:",S),S===dt.Connected?(c(!0),d.current&&b()):(S===dt.Disconnected||S===dt.Reconnecting)&&(c(!1),d.current=!1)})),()=>{f.current!==null&&(clearTimeout(f.current),f.current=null),d.current=!1,g&&g(),u.current&&(u.current.unsubscribeKline(t.marketId,t.interval,p),u.current.disconnect())}},[t.wsURL,t.marketId,t.interval,t.authToken,t.walletAddress,t.deviceID,p]),{klineData:n,loading:r,error:o,isConnected:l}}function co(t){const e=k.useRef(null),n=mt(R=>R.markets),s=mt(R=>R.marketsById),r=mt(R=>R.orderbooks),i=mt(R=>R.tickers),o=mt(R=>R.recentTrades),a=mt(R=>R.selectedMarketId),l=mt(R=>R.loadingMarkets),c=mt(R=>R.loadingOrderbooks),u=mt(R=>R.loadingTickers),d=mt(R=>R.loadingTrades),f=mt(R=>R.errors),p=mt(R=>R.setMarkets),m=mt(R=>R.setMarket),b=mt(R=>R.getMarket),x=mt(R=>R.getMarketBySymbol),g=mt(R=>R.setSelectedMarketId),y=mt(R=>R.setOrderbook),S=mt(R=>R.getOrderbook),w=mt(R=>R.updateOrderbook),v=mt(R=>R.setTicker),C=mt(R=>R.getTicker),_=mt(R=>R.setRecentTrades),P=mt(R=>R.getRecentTrades),M=mt(R=>R.setLoading),E=mt(R=>R.setError),I=mt(R=>R.clearError),O=mt(R=>R.clearCache);k.useEffect(()=>{e.current?t.sessionToken&&e.current.setSessionToken(t.sessionToken):e.current=new an({baseURL:t.baseURL,sessionToken:t.sessionToken})},[t.baseURL,t.sessionToken]);const j=k.useCallback(async()=>{if(!e.current)throw new Error("InfoClient not initialized");const R="markets";M(R,!0),E(R,null);try{const T=await e.current.getMarkets(),ne=(Array.isArray(T)?T:(T==null?void 0:T.markets)||[]).map((q,Z)=>{let G;if(q.id!==void 0)G=typeof q.id=="string"?parseInt(q.id,10)||Z+1:q.id;else if(q.market_id!==void 0){const se=String(q.market_id),ae=parseInt(se,10);isNaN(ae)?G=Z+1:ae>Number.MAX_SAFE_INTEGER?G=ae%Number.MAX_SAFE_INTEGER||Z+1:G=ae}else G=Z+1;return{id:G,symbol:q.symbol||q.moniker,moniker:q.moniker,baseAsset:q.base_asset||q.baseAsset,quoteAsset:q.quote_asset||q.quoteAsset,active:q.active!==void 0?q.active:q.status==="active",market_id:q.market_id,status:q.status,...q}});return p(ne),ne}catch(T){const X=T instanceof Error?T.message:"Failed to fetch markets";throw E(R,X),T}finally{M(R,!1)}},[p,M,E]),U=k.useCallback(async R=>{if(!e.current)throw new Error("InfoClient not initialized");const T=typeof R=="string"?parseInt(R,10):R,X=isNaN(T)?null:b(T);if(X)return X;try{const ne=await e.current.getMarketByID(R);return ne?(m(ne),ne):null}catch(ne){const q=ne instanceof Error?ne.message:`Failed to fetch market ${R}`;throw E(`market_${R}`,q),ne}},[b,m,E]),A=k.useCallback(async R=>{if(!e.current)throw new Error("InfoClient not initialized");const T=x(R);if(T)return T;try{const X=await e.current.getMarketByMoniker(R);return X?(m(X),X):null}catch(X){const ne=X instanceof Error?X.message:`Failed to fetch market ${R}`;throw E(`market_${R}`,ne),X}},[x,m,E]),L=k.useCallback(async(R,T=!0,X=20)=>{if(!e.current)throw new Error("InfoClient not initialized");const ne=`orderbook_${R}`;M(ne,!0),E(ne,null);try{const q=await e.current.getOrderbook(R,T,X);if(q&&(q.bids||q.asks)){const Z={bids:q.bids||[],asks:q.asks||[],timestamp:Date.now()};return y(typeof R=="string"?R:R.toString(),Z),Z}return null}catch(q){const Z=q instanceof Error?q.message:`Failed to fetch orderbook for market ${R}`;throw E(ne,Z),q}finally{M(ne,!1)}},[y,M,E]),B=k.useCallback(async R=>{if(!e.current)throw new Error("InfoClient not initialized");const T=`ticker_${R}`;M(T,!0),E(T,null);try{const X=await e.current.getTicker(R);if(X){const ne=typeof R=="string"?R:R.toString(),q={marketId:ne,...X,timestamp:Date.now()};return v(ne,q),q}return null}catch(X){const ne=X instanceof Error?X.message:`Failed to fetch ticker for market ${R}`;throw E(T,ne),X}finally{M(T,!1)}},[v,M,E]),F=k.useCallback(async(R,T=100)=>{if(!e.current)throw new Error("InfoClient not initialized");const X=`trades_${R}`;M(X,!0),E(X,null);try{const ne=await e.current.getRecentTrades(R,T);if(ne){const q=Array.isArray(ne)?ne:[];return _(typeof R=="string"?R:R.toString(),q),q}return null}catch(ne){const q=ne instanceof Error?ne.message:`Failed to fetch trades for market ${R}`;throw E(X,q),ne}finally{M(X,!1)}},[_,M,E]);k.useEffect(()=>{t.autoFetchMarkets&&n.length===0&&!l&&j().catch(console.error)},[t.autoFetchMarkets,n.length,l,j]);const $=a?n.find(R=>{var T;return R.market_id===a||((T=R.id)==null?void 0:T.toString())===a}):null,D=$?$.moniker||$.symbol||($.baseAsset&&$.quoteAsset?`${$.baseAsset}-${$.quoteAsset}`:null):null,z=k.useCallback(R=>{const T=typeof R=="string"?R:R.toString(),X=n.find(ne=>{var q;return ne.market_id===T||((q=ne.id)==null?void 0:q.toString())===T});return X?X.moniker||X.symbol||(X.baseAsset&&X.quoteAsset?`${X.baseAsset}/${X.quoteAsset}`:null):null},[n]);return{markets:n,marketsById:s,orderbooks:r,tickers:i,recentTrades:o,selectedMarketId:a,selectedMarket:$,selectedMarketSymbol:D,loadingMarkets:l,loadingOrderbooks:c,loadingTickers:u,loadingTrades:d,isLoading:R=>{if(R==="markets")return l;if(R.startsWith("orderbook_")){const T=R.split("_").slice(1).join("_");return c.has(T)}if(R.startsWith("ticker_")){const T=R.split("_").slice(1).join("_");return u.has(T)}if(R.startsWith("trades_")){const T=R.split("_").slice(1).join("_");return d.has(T)}return!1},errors:f,getError:R=>f.get(R),getMarket:b,getMarketBySymbol:x,getSymbolByMarketId:z,getOrderbook:S,getTicker:C,getRecentTrades:P,fetchMarkets:j,fetchMarket:U,fetchMarketBySymbol:A,fetchOrderbook:L,fetchTicker:B,fetchRecentTrades:F,updateOrderbook:w,clearCache:O,clearError:I,setSelectedMarketId:g,infoClient:e.current}}function NL(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const DL=t=>{switch(t){case"success":return RL;case"info":return LL;case"warning":return jL;case"error":return FL;default:return null}},AL=Array(12).fill(0),OL=({visible:t,className:e})=>fe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},fe.createElement("div",{className:"sonner-spinner"},AL.map((n,s)=>fe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),RL=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),jL=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),LL=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),FL=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$L=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},fe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),fe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),BL=()=>{const[t,e]=fe.useState(document.hidden);return fe.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let dy=1;class zL{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:s,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:dy++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:s}),{...l,...e,id:i,dismissible:a,title:s}):l):this.addToast({title:s,...r,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i=s!==void 0,o;const a=r.then(async c=>{if(o=["resolve",c],fe.isValidElement(c))i=!1,this.create({id:s,type:"default",message:c});else if(WL(c)&&!c.ok){i=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,m=typeof d=="object"&&!fe.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:f,...m})}else if(c instanceof Error){i=!1;const d=typeof n.error=="function"?await n.error(c):n.error,f=typeof n.description=="function"?await n.description(c):n.description,m=typeof d=="object"&&!fe.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:f,...m})}else if(n.success!==void 0){i=!1;const d=typeof n.success=="function"?await n.success(c):n.success,f=typeof n.description=="function"?await n.description(c):n.description,m=typeof d=="object"&&!fe.isValidElement(d)?d:{message:d};this.create({id:s,type:"success",description:f,...m})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description,p=typeof u=="object"&&!fe.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:d,...p})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,n)=>{const s=(n==null?void 0:n.id)||dy++;return this.create({jsx:e(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const On=new zL,UL=(t,e)=>{const n=(e==null?void 0:e.id)||dy++;return On.addToast({title:t,...e,id:n}),n},WL=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",HL=UL,VL=()=>On.toasts,qL=()=>On.getActiveToasts(),Oe=Object.assign(HL,{success:On.success,info:On.info,warning:On.warning,error:On.error,custom:On.custom,message:On.message,promise:On.promise,dismiss:On.dismiss,loading:On.loading},{getHistory:VL,getToasts:qL});NL("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function pf(t){return t.label!==void 0}const YL=3,GL="24px",KL="16px",E2=4e3,XL=356,QL=14,JL=45,ZL=200;function Js(...t){return t.filter(Boolean).join(" ")}function eF(t){const[e,n]=t.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}const tF=t=>{var e,n,s,r,i,o,a,l,c;const{invert:u,toast:d,unstyled:f,interacting:p,setHeights:m,visibleToasts:b,heights:x,index:g,toasts:y,expanded:S,removeToast:w,defaultRichColors:v,closeButton:C,style:_,cancelButtonStyle:P,actionButtonStyle:M,className:E="",descriptionClassName:I="",duration:O,position:j,gap:U,expandByDefault:A,classNames:L,icons:B,closeButtonAriaLabel:F="Close toast"}=t,[$,D]=fe.useState(null),[z,R]=fe.useState(null),[T,X]=fe.useState(!1),[ne,q]=fe.useState(!1),[Z,G]=fe.useState(!1),[se,ae]=fe.useState(!1),[Ne,ke]=fe.useState(!1),[Ee,Ue]=fe.useState(0),[st,N]=fe.useState(0),de=fe.useRef(d.duration||O||E2),be=fe.useRef(null),re=fe.useRef(null),_e=g===0,ee=g+1<=b,W=d.type,Q=d.dismissible!==!1,H=d.className||"",J=d.descriptionClassName||"",we=fe.useMemo(()=>x.findIndex(V=>V.toastId===d.id)||0,[x,d.id]),te=fe.useMemo(()=>{var V;return(V=d.closeButton)!=null?V:C},[d.closeButton,C]),ge=fe.useMemo(()=>d.duration||O||E2,[d.duration,O]),Pe=fe.useRef(0),he=fe.useRef(0),le=fe.useRef(0),ye=fe.useRef(null),[me,ve]=j.split("-"),Ie=fe.useMemo(()=>x.reduce((V,Te,it)=>it>=we?V:V+Te.height,0),[x,we]),He=BL(),Fe=d.invert||u,je=W==="loading";he.current=fe.useMemo(()=>we*U+Ie,[we,Ie]),fe.useEffect(()=>{de.current=ge},[ge]),fe.useEffect(()=>{X(!0)},[]),fe.useEffect(()=>{const V=re.current;if(V){const Te=V.getBoundingClientRect().height;return N(Te),m(it=>[{toastId:d.id,height:Te,position:d.position},...it]),()=>m(it=>it.filter(Ve=>Ve.toastId!==d.id))}},[m,d.id]),fe.useLayoutEffect(()=>{if(!T)return;const V=re.current,Te=V.style.height;V.style.height="auto";const it=V.getBoundingClientRect().height;V.style.height=Te,N(it),m(Ve=>Ve.find(pe=>pe.toastId===d.id)?Ve.map(pe=>pe.toastId===d.id?{...pe,height:it}:pe):[{toastId:d.id,height:it,position:d.position},...Ve])},[T,d.title,d.description,m,d.id,d.jsx,d.action,d.cancel]);const Ae=fe.useCallback(()=>{q(!0),Ue(he.current),m(V=>V.filter(Te=>Te.toastId!==d.id)),setTimeout(()=>{w(d)},ZL)},[d,w,m,he]);fe.useEffect(()=>{if(d.promise&&W==="loading"||d.duration===1/0||d.type==="loading")return;let V;return S||p||He?(()=>{if(le.current<Pe.current){const Ve=new Date().getTime()-Pe.current;de.current=de.current-Ve}le.current=new Date().getTime()})():(()=>{de.current!==1/0&&(Pe.current=new Date().getTime(),V=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),Ae()},de.current))})(),()=>clearTimeout(V)},[S,p,d,W,He,Ae]),fe.useEffect(()=>{d.delete&&(Ae(),d.onDismiss==null||d.onDismiss.call(d,d))},[Ae,d.delete]);function We(){var V;if(B!=null&&B.loading){var Te;return fe.createElement("div",{className:Js(L==null?void 0:L.loader,d==null||(Te=d.classNames)==null?void 0:Te.loader,"sonner-loader"),"data-visible":W==="loading"},B.loading)}return fe.createElement(OL,{className:Js(L==null?void 0:L.loader,d==null||(V=d.classNames)==null?void 0:V.loader),visible:W==="loading"})}const ze=d.icon||(B==null?void 0:B[W])||DL(W);var ie,Y;return fe.createElement("li",{tabIndex:0,ref:re,className:Js(E,H,L==null?void 0:L.toast,d==null||(e=d.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[W],d==null||(n=d.classNames)==null?void 0:n[W]),"data-sonner-toast":"","data-rich-colors":(ie=d.richColors)!=null?ie:v,"data-styled":!(d.jsx||d.unstyled||f),"data-mounted":T,"data-promise":!!d.promise,"data-swiped":Ne,"data-removed":ne,"data-visible":ee,"data-y-position":me,"data-x-position":ve,"data-index":g,"data-front":_e,"data-swiping":Z,"data-dismissible":Q,"data-type":W,"data-invert":Fe,"data-swipe-out":se,"data-swipe-direction":z,"data-expanded":!!(S||A&&T),"data-testid":d.testId,style:{"--index":g,"--toasts-before":g,"--z-index":y.length-g,"--offset":`${ne?Ee:he.current}px`,"--initial-height":A?"auto":`${st}px`,..._,...d.style},onDragEnd:()=>{G(!1),D(null),ye.current=null},onPointerDown:V=>{V.button!==2&&(je||!Q||(be.current=new Date,Ue(he.current),V.target.setPointerCapture(V.pointerId),V.target.tagName!=="BUTTON"&&(G(!0),ye.current={x:V.clientX,y:V.clientY})))},onPointerUp:()=>{var V,Te,it;if(se||!Q)return;ye.current=null;const Ve=Number(((V=re.current)==null?void 0:V.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),St=Number(((Te=re.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),pe=new Date().getTime()-((it=be.current)==null?void 0:it.getTime()),Ce=$==="x"?Ve:St,Ke=Math.abs(Ce)/pe;if(Math.abs(Ce)>=JL||Ke>.11){Ue(he.current),d.onDismiss==null||d.onDismiss.call(d,d),R($==="x"?Ve>0?"right":"left":St>0?"down":"up"),Ae(),ae(!0);return}else{var Be,Ye;(Be=re.current)==null||Be.style.setProperty("--swipe-amount-x","0px"),(Ye=re.current)==null||Ye.style.setProperty("--swipe-amount-y","0px")}ke(!1),G(!1),D(null)},onPointerMove:V=>{var Te,it,Ve;if(!ye.current||!Q||((Te=window.getSelection())==null?void 0:Te.toString().length)>0)return;const pe=V.clientY-ye.current.y,Ce=V.clientX-ye.current.x;var Ke;const Be=(Ke=t.swipeDirections)!=null?Ke:eF(j);!$&&(Math.abs(Ce)>1||Math.abs(pe)>1)&&D(Math.abs(Ce)>Math.abs(pe)?"x":"y");let Ye={x:0,y:0};const tt=Je=>1/(1.5+Math.abs(Je)/20);if($==="y"){if(Be.includes("top")||Be.includes("bottom"))if(Be.includes("top")&&pe<0||Be.includes("bottom")&&pe>0)Ye.y=pe;else{const Je=pe*tt(pe);Ye.y=Math.abs(Je)<Math.abs(pe)?Je:pe}}else if($==="x"&&(Be.includes("left")||Be.includes("right")))if(Be.includes("left")&&Ce<0||Be.includes("right")&&Ce>0)Ye.x=Ce;else{const Je=Ce*tt(Ce);Ye.x=Math.abs(Je)<Math.abs(Ce)?Je:Ce}(Math.abs(Ye.x)>0||Math.abs(Ye.y)>0)&&ke(!0),(it=re.current)==null||it.style.setProperty("--swipe-amount-x",`${Ye.x}px`),(Ve=re.current)==null||Ve.style.setProperty("--swipe-amount-y",`${Ye.y}px`)}},te&&!d.jsx&&W!=="loading"?fe.createElement("button",{"aria-label":F,"data-disabled":je,"data-close-button":!0,onClick:je||!Q?()=>{}:()=>{Ae(),d.onDismiss==null||d.onDismiss.call(d,d)},className:Js(L==null?void 0:L.closeButton,d==null||(s=d.classNames)==null?void 0:s.closeButton)},(Y=B==null?void 0:B.close)!=null?Y:$L):null,(W||d.icon||d.promise)&&d.icon!==null&&((B==null?void 0:B[W])!==null||d.icon)?fe.createElement("div",{"data-icon":"",className:Js(L==null?void 0:L.icon,d==null||(r=d.classNames)==null?void 0:r.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||We():null,d.type!=="loading"?ze:null):null,fe.createElement("div",{"data-content":"",className:Js(L==null?void 0:L.content,d==null||(i=d.classNames)==null?void 0:i.content)},fe.createElement("div",{"data-title":"",className:Js(L==null?void 0:L.title,d==null||(o=d.classNames)==null?void 0:o.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?fe.createElement("div",{"data-description":"",className:Js(I,J,L==null?void 0:L.description,d==null||(a=d.classNames)==null?void 0:a.description)},typeof d.description=="function"?d.description():d.description):null),fe.isValidElement(d.cancel)?d.cancel:d.cancel&&pf(d.cancel)?fe.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||P,onClick:V=>{pf(d.cancel)&&Q&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,V),Ae())},className:Js(L==null?void 0:L.cancelButton,d==null||(l=d.classNames)==null?void 0:l.cancelButton)},d.cancel.label):null,fe.isValidElement(d.action)?d.action:d.action&&pf(d.action)?fe.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||M,onClick:V=>{pf(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,V),!V.defaultPrevented&&Ae())},className:Js(L==null?void 0:L.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function P2(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function nF(t,e){const n={};return[t,e].forEach((s,r)=>{const i=r===1,o=i?"--mobile-offset":"--offset",a=i?KL:GL;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(c=>{s[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof s[c]=="number"?`${s[c]}px`:s[c]}):l(a)}),n}const sF=fe.forwardRef(function(e,n){const{id:s,invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:l,className:c,offset:u,mobileOffset:d,theme:f="light",richColors:p,duration:m,style:b,visibleToasts:x=YL,toastOptions:g,dir:y=P2(),gap:S=QL,icons:w,containerAriaLabel:v="Notifications"}=e,[C,_]=fe.useState([]),P=fe.useMemo(()=>s?C.filter(T=>T.toasterId===s):C.filter(T=>!T.toasterId),[C,s]),M=fe.useMemo(()=>Array.from(new Set([i].concat(P.filter(T=>T.position).map(T=>T.position)))),[P,i]),[E,I]=fe.useState([]),[O,j]=fe.useState(!1),[U,A]=fe.useState(!1),[L,B]=fe.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=fe.useRef(null),$=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=fe.useRef(null),z=fe.useRef(!1),R=fe.useCallback(T=>{_(X=>{var ne;return(ne=X.find(q=>q.id===T.id))!=null&&ne.delete||On.dismiss(T.id),X.filter(({id:q})=>q!==T.id)})},[]);return fe.useEffect(()=>On.subscribe(T=>{if(T.dismiss){requestAnimationFrame(()=>{_(X=>X.map(ne=>ne.id===T.id?{...ne,delete:!0}:ne))});return}setTimeout(()=>{u6.flushSync(()=>{_(X=>{const ne=X.findIndex(q=>q.id===T.id);return ne!==-1?[...X.slice(0,ne),{...X[ne],...T},...X.slice(ne+1)]:[T,...X]})})})}),[C]),fe.useEffect(()=>{if(f!=="system"){B(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;const T=window.matchMedia("(prefers-color-scheme: dark)");try{T.addEventListener("change",({matches:X})=>{B(X?"dark":"light")})}catch{T.addListener(({matches:ne})=>{try{B(ne?"dark":"light")}catch(q){console.error(q)}})}},[f]),fe.useEffect(()=>{C.length<=1&&j(!1)},[C]),fe.useEffect(()=>{const T=X=>{var ne;if(o.every(G=>X[G]||X.code===G)){var Z;j(!0),(Z=F.current)==null||Z.focus()}X.code==="Escape"&&(document.activeElement===F.current||(ne=F.current)!=null&&ne.contains(document.activeElement))&&j(!1)};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[o]),fe.useEffect(()=>{if(F.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,z.current=!1)}},[F.current]),fe.createElement("section",{ref:n,"aria-label":`${v} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((T,X)=>{var ne;const[q,Z]=T.split("-");return P.length?fe.createElement("ol",{key:T,dir:y==="auto"?P2():y,tabIndex:-1,ref:F,className:c,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":q,"data-x-position":Z,style:{"--front-toast-height":`${((ne=E[0])==null?void 0:ne.height)||0}px`,"--width":`${XL}px`,"--gap":`${S}px`,...b,...nF(u,d)},onBlur:G=>{z.current&&!G.currentTarget.contains(G.relatedTarget)&&(z.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||z.current||(z.current=!0,D.current=G.relatedTarget)},onMouseEnter:()=>j(!0),onMouseMove:()=>j(!0),onMouseLeave:()=>{U||j(!1)},onDragEnd:()=>j(!1),onPointerDown:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||A(!0)},onPointerUp:()=>A(!1)},P.filter(G=>!G.position&&X===0||G.position===T).map((G,se)=>{var ae,Ne;return fe.createElement(tF,{key:G.id,icons:w,index:se,toast:G,defaultRichColors:p,duration:(ae=g==null?void 0:g.duration)!=null?ae:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:x,closeButton:(Ne=g==null?void 0:g.closeButton)!=null?Ne:l,interacting:U,position:T,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,closeButtonAriaLabel:g==null?void 0:g.closeButtonAriaLabel,removeToast:R,toasts:P.filter(ke=>ke.position==G.position),heights:E.filter(ke=>ke.position==G.position),setHeights:I,expandByDefault:a,gap:S,expanded:O,swipeDirections:e.swipeDirections})})):null}))}),Gc="onboard_mnemonic",Ia="onboard_wallet_address",Kc="onboard_auth_token",Xc="onboard_refresh_token",Qc="onboard_expires_at";function Sa(t){const[e,n]=k.useState(""),[s,r]=k.useState(""),[i,o]=k.useState(!1),[a,l]=k.useState(""),[c,u]=k.useState(void 0),[d,f]=k.useState(void 0),[p,m]=k.useState(!1),[b,x]=k.useState(null);k.useEffect(()=>{const E=localStorage.getItem(Gc),I=localStorage.getItem(Ia),O=localStorage.getItem(Kc),j=localStorage.getItem(Xc),U=localStorage.getItem(Qc);if(n(E||""),r(I||""),O&&l(O),j&&u(j),U){const A=parseInt(U,10);isNaN(A)||f(A)}},[]);const g=k.useCallback(async E=>{if(!E||E.trim()==="")return null;o(!0);try{qe.isReady()||await qe.initialize();const I=await qe.generateAddress(E.trim(),0);return I.success&&I.address?I.address:(console.error("Failed to generate address:",I.error),null)}catch(I){return console.error("Error generating address:",I),null}finally{o(!1)}},[]),y=k.useCallback(async E=>{const I=E.trim();if(I===""){n(""),r(""),localStorage.removeItem(Gc),localStorage.removeItem(Ia);return}n(I),localStorage.setItem(Gc,I);const O=await g(I);O?(r(O),localStorage.setItem(Ia,O)):(r(""),localStorage.removeItem(Ia))},[g]),S=k.useCallback((E,I)=>{const O=E.trim(),j=I.trim().toLowerCase();n(O),r(j),localStorage.setItem(Gc,O),localStorage.setItem(Ia,j)},[]),w=k.useCallback(()=>{n(""),r(""),localStorage.removeItem(Gc),localStorage.removeItem(Ia)},[]),v=k.useMemo(()=>{if(e==="")return null;const E=e.trim();if(E==="")return null;try{const I=oc.fromPhrase(E,"","m/44'/60'/0'/0/0");if(s&&I.address.toLowerCase()!==s.toLowerCase())return console.warn("Address mismatch: derived address does not match stored address"),null;const O=BigInt(I.privateKey),j=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(O===0n||O>=j)return console.error("Invalid private key: out of secp256k1 curve order"),null;const A=O.toString(16).toLowerCase().padStart(64,"0");return/^[0-9a-f]{64}$/.test(A)?A:(console.error("Invalid private key format"),null)}catch(I){return console.error("Error computing private key:",I),null}},[e,s]),C=k.useCallback(async(E,I,O,j)=>{m(!0),x(null);try{await y(E);const U=await jv(E,I,O,j);if(U.success&&U.authToken)l(U.authToken),u(U.refreshToken),f(U.expiresAt),localStorage.setItem(Kc,U.authToken),U.refreshToken&&localStorage.setItem(Xc,U.refreshToken),U.expiresAt&&localStorage.setItem(Qc,U.expiresAt.toString()),Oe.success("Onboarding successful",{description:"Wallet authenticated and auth token generated.",duration:5e3});else{const A=U.error||"Onboarding failed";x(A),l(""),u(void 0),f(void 0),localStorage.removeItem(Kc),localStorage.removeItem(Xc),localStorage.removeItem(Qc),Oe.error("Onboarding failed",{description:A,duration:6e3})}}catch(U){const A=(U==null?void 0:U.message)||"Unknown error during onboarding";x(A),l(""),u(void 0),f(void 0),localStorage.removeItem(Kc),localStorage.removeItem(Xc),localStorage.removeItem(Qc),Oe.error("Onboarding error",{description:A,duration:6e3})}finally{m(!1)}},[y]),_=k.useCallback(()=>{x(null)},[]),P=k.useCallback(()=>{l(""),u(void 0),f(void 0),x(null),m(!1),localStorage.removeItem(Kc),localStorage.removeItem(Xc),localStorage.removeItem(Qc)},[]),M=k.useCallback(()=>{w(),P()},[w,P]);return{mnemonic:e,walletAddress:s,privateKey:v,authToken:a,refreshToken:c,expiresAt:d,loading:p,error:b,addressLoading:i,onboard:C,setMnemonic:y,setAccountData:S,clearAccountData:w,clearError:_,reset:P,resetAll:M}}function rF(){const{setAccountData:t}=Sa(),{mnemonic:e,setMnemonic:n,addressIndex:s,setAddressIndex:r,result:i,loading:o,generateAddress:a,isReady:l}=j9();return k.useEffect(()=>{i!=null&&i.success&&i.address&&e&&t(e,i.address)},[i,e,t]),h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Address Generator"}),h.jsx("p",{children:"Generate Ethereum addresses from mnemonic phrases"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:e,onChange:c=>n(c.target.value),placeholder:"Enter your mnemonic phrase...",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),h.jsx("input",{id:"addressIndex",type:"number",value:s,onChange:c=>r(parseInt(c.target.value)||0),min:"0",max:"1000"})]}),h.jsx("button",{className:"button",onClick:a,disabled:o||!l,children:o?"Generating...":"Generate Address"}),i&&h.jsx("div",{className:`output ${i.success?"success":"error"}`,children:i.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Generated Address:"}),h.jsx("br",{}),i.address,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Index: ",i.index,h.jsx("br",{}),"Mnemonic: ",i.mnemonic]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),i.error]})})]})}function iF(){var f,p;const{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:c,signMessage:u,isReady:d}=L9();return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Message Signer"}),h.jsx("p",{children:"Sign messages with your private key"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"message",children:"Message to Sign:"}),h.jsx("textarea",{id:"message",value:n,onChange:m=>s(m.target.value),placeholder:"Enter message to sign...",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),h.jsx("input",{id:"addressIndex",type:"number",value:o,onChange:m=>a(parseInt(m.target.value)||0),min:"0",max:"1000"})]}),h.jsx("div",{className:"form-group",children:h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:r,onChange:m=>i(m.target.checked),style:{marginRight:"0.5rem"}}),"Use EIP-712 Typed Data"]})}),h.jsx("button",{className:"button",onClick:u,disabled:c||!d,children:c?"Signing...":"Sign Message"}),l&&h.jsx("div",{className:`output ${l.success?"success":"error"}`,children:l.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Signature:"}),h.jsx("br",{}),l.signature,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Message: ",l.message,h.jsx("br",{}),"EIP-712: ",(f=l.options)!=null&&f.useEIP712?"Yes":"No",h.jsx("br",{}),"Address Index: ",((p=l.options)==null?void 0:p.addressIndex)||0]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),l.error]})})]})}const mf={placeOrder:{label:"Place Order",action:kv,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"side",label:"Side",type:"select",options:["BUY","SELL"],required:!0},{key:"orderType",label:"Order Type",type:"select",options:["LIMIT","MARKET"],required:!0},{key:"price",label:"Price",type:"number",placeholder:"100.5",required:!0,convertToSatoshi:!0},{key:"quantity",label:"Quantity",type:"number",placeholder:"1.0",required:!0,convertToSatoshi:!0}]},cancelOrder:{label:"Cancel Order",action:o0,fields:[{key:"orderId",label:"Order ID",type:"text",required:!0},{key:"marketId",label:"Market ID",type:"text",required:!0}]},modifyOrder:{label:"Modify Order",action:Cv,fields:[{key:"orderId",label:"Order ID",type:"text",required:!0},{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"newPrice",label:"New Price",type:"number",required:!0,convertToSatoshi:!0},{key:"newQuantity",label:"New Quantity",type:"number",required:!0,convertToSatoshi:!0}]},changeLeverage:{label:"Change Leverage",action:_v,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"newLeverage",label:"New Leverage",type:"number",required:!0,convertToSatoshi:!0}]},closePosition:{label:"Close Position",action:a0,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"quantity",label:"Quantity",type:"number",required:!0,convertToSatoshi:!0},{key:"marketPrice",label:"Market Price",type:"number",required:!0,convertToSatoshi:!0}]},swap:{label:"Swap",action:Pv,fields:[{key:"fromToken",label:"From Token",type:"text",required:!0},{key:"toToken",label:"To Token",type:"text",required:!0},{key:"amountIn",label:"Amount In",type:"number",required:!0,convertToSatoshi:!0},{key:"minAmountOut",label:"Min Amount Out",type:"number",required:!0,convertToSatoshi:!0}]},changeMarginRatio:{label:"Change Margin Ratio",action:Sv,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"bucketId",label:"Bucket ID",type:"text",required:!1}]},internTransfer:{label:"Internal Transfer",action:Ev,fields:[{key:"fromAccount",label:"From Account",type:"text",required:!0},{key:"toAccount",label:"To Account",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0},{key:"tokenAddress",label:"Token Address",type:"text",required:!0}]},bucketTransfer:{label:"Bucket Transfer",action:Nv,fields:[{key:"fromBucketId",label:"From Bucket ID",type:"text",required:!0},{key:"toBucketId",label:"To Bucket ID",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},extractToBucket:{label:"Extract to Bucket",action:Mv,fields:[{key:"bucketId",label:"Bucket ID",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},withdrawFromBucket:{label:"Withdraw from Bucket",action:Iv,fields:[{key:"bucketId",label:"Bucket ID",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},bankMint:{label:"Bank Mint",action:Tv,fields:[{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},bankTransfer:{label:"Bank Transfer",action:Dv,fields:[{key:"to",label:"To Address",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]}};function oF(){var se,ae,Ne,ke,Ee,Ue,st,N,de,be;const{connect:t,connectors:e,isPending:n}=tM(),{disconnect:s}=nM(),{address:r,isConnected:i}=Zw(),{signTypedDataAsync:o}=ev(),a=XT(),[l,c]=k.useState(null),[u,d]=k.useState({}),[f,p]=k.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[m,b]=k.useState(""),[x,g]=k.useState(""),[y,S]=k.useState(""),[w,v]=k.useState([]),[C,_]=k.useState(null),[P,M]=k.useState(!1),[E,I]=k.useState(!1),O=typeof window<"u"&&!!((se=window.ethereum)!=null&&se.isMetaMask),j=typeof window<"u"&&(!!((ae=window.phantom)!=null&&ae.ethereum)||!!((Ne=window.ethereum)!=null&&Ne.isPhantom)),U=typeof window<"u"&&(!!((ke=window.$onekey)!=null&&ke.ethereum)||!!((Ee=window.ethereum)!=null&&Ee.isOneKey)),A=e.find(re=>re.id==="injected"),L=typeof window<"u"?(Ue=window.phantom)!=null&&Ue.ethereum||(st=window.ethereum)!=null&&st.isPhantom?"Phantom":(N=window.$onekey)!=null&&N.ethereum||(de=window.ethereum)!=null&&de.isOneKey?"OneKey":(be=window.ethereum)!=null&&be.isMetaMask?"MetaMask":null:null,B=m&&r&&m.toLowerCase()===r.toLowerCase(),F=i&&B&&m;k.useEffect(()=>{if(l){const re=mf[l],_e={};re.fields.forEach(ee=>{_e[ee.key]=""}),d(_e),_(null)}},[l]);const $=()=>{const _e=Math.floor(Date.now()/1e3)+3600;S(_e.toString())},D=()=>{g(Date.now().toString())},z=async()=>{if(!f.trim()){alert("Please enter a mnemonic phrase");return}try{const{mormSigner:re}=await LT(async()=>{const{mormSigner:ee}=await Promise.resolve().then(()=>O9);return{mormSigner:ee}},void 0);await re.initialize();const _e=await re.generateAddress(f,0);_e.success&&_e.address?b(_e.address):alert(_e.error||"Failed to generate address")}catch(re){alert(re.message||"Failed to generate address")}},R=async()=>{var re,_e,ee;if(!O&&!j&&!U){alert("No supported wallet detected");return}try{const W=window.ethereum;let Q=W;if(j&&(Q=((re=window.phantom)==null?void 0:re.ethereum)||((_e=window.ethereum)!=null&&_e.isPhantom?W:null)),U&&(Q=((ee=window.$onekey)==null?void 0:ee.ethereum)||W),!Q){alert("Wallet provider not found");return}const H=await Q.request({method:"eth_requestAccounts"});H&&H.length>0&&(v(H),H.length===1&&b(H[0])),A&&(await t({connector:A}),await new Promise(J=>setTimeout(J,300)))}catch(W){W.code===4001?alert("User rejected the connection request"):(console.error("Error connecting wallet:",W),alert(`Failed to connect: ${W.message||"Unknown error"}`))}},T=()=>{if(!l)throw new Error("No operation selected");const re=mf[l],_e={action:re.action};return(l==="cancelOrder"||l==="changeLeverage"||l==="changeMarginRatio"||l==="internTransfer")&&(_e.address=m),re.fields.forEach(ee=>{const W=u[ee.key];if(W===void 0||W===""){if(ee.required)throw new Error(`${ee.label} is required`);return}let Q=W;ee.convertToSatoshi&&ee.type==="number"&&(Q=ut(parseFloat(W))),l==="bucketTransfer"&&ee.key==="assetId"||(l==="extractToBucket"||l==="withdrawFromBucket"||l==="bankMint"||l==="bankTransfer")&&ee.key==="assetId"?_e.asset=Q:l==="closePosition"?ee.key==="quantity"?_e.closeSize=Q:ee.key==="marketPrice"?_e.marketPrice=Q:_e[ee.key]=Q:l==="placeOrder"?ee.key==="side"?_e.side=W.toUpperCase():ee.key==="orderType"?_e.orderType=W.toUpperCase():_e[ee.key]=Q:_e[ee.key]=Q}),_e},X=re=>{const _e={name:"Morpheum",version:"1",chainId:a,verifyingContract:"0x0000000000000000000000000000000000000000"},ee={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Message:[]};Object.keys(re).forEach(Q=>{Q==="action"?ee.Message.push({name:"action",type:"string"}):Q==="owner"?ee.Message.push({name:"owner",type:"address"}):Q==="nonce"?ee.Message.push({name:"nonce",type:"string"}):Q==="deadline"?ee.Message.push({name:"deadline",type:"uint256"}):Q==="address"?ee.Message.push({name:"address",type:"address"}):typeof re[Q]=="string"&&re[Q].startsWith("0x")?ee.Message.push({name:Q,type:"address"}):typeof re[Q]=="number"||/^\d+$/.test(re[Q])?ee.Message.push({name:Q,type:"uint256"}):ee.Message.push({name:Q,type:"string"})});const W={};return Object.keys(re).forEach(Q=>{Q==="owner"||Q==="address"||Q.startsWith("0x")&&Q.length===42?W[Q]=re[Q].toLowerCase():W[Q]=re[Q]}),{domain:_e,types:ee,primaryType:"Message",message:W}},ne=async()=>{if(!f.trim())throw new Error("Mnemonic is required for WASM signing");const re=oc.fromPhrase(f.trim(),"","m/44'/60'/0'/0/0");if(re.address.toLowerCase()!==m.toLowerCase())throw new Error(`Address mismatch: derived ${re.address} does not match ${m}`);const _e=BigInt(re.privateKey),ee=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(_e===0n||_e>=ee)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const Q=_e.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(Q))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return Q},q=async()=>{var re,_e;if(!l){alert("Please select an operation first");return}if(!m){alert("Please set owner address");return}if(!x){alert("Please generate nonce");return}if(!y){alert("Please generate deadline");return}M(!0),_(null);try{const ee=T();ee.owner=m.toLowerCase(),ee.nonce=x,ee.deadline=y;const W=X(ee),Q=await o({domain:W.domain,types:W.types,primaryType:W.primaryType,message:W.message});_({success:!0,signature:Q,typedData:{payload:ee,typedData:W}})}catch(ee){ee.code===4001||(re=ee.message)!=null&&re.includes("User rejected")||(_e=ee.message)!=null&&_e.includes("rejected")?_({success:!1,error:"User rejected the signature request"}):(console.error("Error signing:",ee),_({success:!1,error:ee.message||"Unknown error during signing"}))}finally{M(!1)}},Z=async()=>{if(!l){alert("Please select an operation first");return}if(!m){alert("Please set owner address");return}if(!x){alert("Please generate nonce");return}if(!y){alert("Please generate deadline");return}if(!f.trim()){alert("Please enter mnemonic for WASM signing");return}if(!qe.isReady())try{if(await qe.initialize(),!qe.isReady()){alert("WASM module failed to initialize");return}}catch(re){alert(`Failed to initialize WASM: ${re.message||"Unknown error"}`);return}I(!0),_(null);try{const re=T();re.owner=m.toLowerCase(),re.nonce=x,re.deadline=y;const _e=await ne(),ee=Math.floor(Date.now()/1e3),W=parseInt(y,10),Q={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:ee,payload:re,deadline:W},H=await qe.generateSingleSignature(JSON.stringify(Q),_e,m.toLowerCase());if(!H.success||!H.signature)throw new Error(H.error||"Failed to generate signature");const J=X(re);_({success:!0,signature:H.signature,typedData:{payload:re,typedData:J,eip712Tx:Q}})}catch(re){console.error("Error signing with WASM:",re),_({success:!1,error:re.message||"Unknown error during WASM signing"})}finally{I(!1)}},G=l?mf[l]:null;return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Functional Signer"}),h.jsx("p",{children:"Sign EIP-712 messages for Morpheum protocol operations"}),h.jsxs("div",{className:`agent-delegation-step ${l?"connected":""}`,children:[h.jsxs("h4",{children:["Step 1: Select Operation ",l&&""]}),l?h.jsxs("div",{children:[h.jsxs("p",{style:{marginBottom:"1rem"},children:[h.jsx("strong",{children:"Selected:"})," ",G==null?void 0:G.label]}),h.jsx("button",{className:"button secondary",onClick:()=>{c(null),d({}),_(null)},children:"Change Operation"})]}):h.jsx("div",{className:"agent-delegation-wallet-buttons",children:Object.entries(mf).map(([re,_e])=>h.jsx("button",{className:"button",onClick:()=>c(re),children:_e.label},re))})]}),l?h.jsxs("div",{className:`agent-delegation-step ${m&&x&&y?"connected":""}`,children:[h.jsxs("h4",{children:["Step 2: Configure Parameters"," ",m&&x&&y&&""]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"walletConnection",children:"Wallet Connection:"}),F?h.jsxs("div",{className:"agent-delegation-connected-info",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Connected:"})," ",L||"Wallet",m&&h.jsxs("div",{className:"agent-delegation-address",children:["Address: ",m]})]}),h.jsx("button",{className:"button secondary",onClick:()=>{s(),v([]),b("")},children:"Disconnect"})]}):h.jsxs("div",{children:[h.jsx("button",{className:"button",onClick:R,disabled:n||!A,children:n?"Connecting...":"Connect Wallet"}),w.length>0&&!m&&h.jsxs("div",{style:{marginTop:"1rem"},children:[h.jsx("label",{children:"Select Address:"}),w.map(re=>h.jsx("button",{className:"button secondary",onClick:()=>b(re),style:{display:"block",marginTop:"0.5rem",fontFamily:"monospace",fontSize:"0.9rem"},children:re},re))]})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic (for address generation):"}),h.jsx("textarea",{id:"mnemonic",value:f,onChange:re=>p(re.target.value),placeholder:"Enter mnemonic to generate address...",rows:2}),h.jsx("button",{className:"button secondary",onClick:z,style:{marginTop:"0.5rem"},children:"Generate Address from Mnemonic"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"ownerAddress",type:"text",value:m,onChange:re=>b(re.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:z,disabled:!f.trim(),children:"Generate"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"nonce",type:"text",value:x,onChange:re=>g(re.target.value),placeholder:"Auto-generated timestamp"}),h.jsx("button",{className:"button secondary",onClick:D,children:"Generate"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"deadline",children:"Deadline (Unix timestamp):"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"deadline",type:"text",value:y,onChange:re=>S(re.target.value),placeholder:"Auto-generated (1 hour from now)"}),h.jsx("button",{className:"button secondary",onClick:$,children:"Generate"})]})]}),G&&h.jsxs(h.Fragment,{children:[h.jsx("h5",{style:{marginTop:"1.5rem",marginBottom:"1rem"},children:"Operation Parameters:"}),G.fields.map(re=>{var _e;return h.jsxs("div",{className:"form-group",children:[h.jsxs("label",{htmlFor:re.key,children:[re.label,re.required&&" *"]}),re.type==="select"?h.jsxs("select",{id:re.key,value:u[re.key]||"",onChange:ee=>d({...u,[re.key]:ee.target.value}),children:[h.jsxs("option",{value:"",children:["Select ",re.label]}),(_e=re.options)==null?void 0:_e.map(ee=>h.jsx("option",{value:ee,children:ee},ee))]}):h.jsx("input",{id:re.key,type:re.type,value:u[re.key]||"",onChange:ee=>d({...u,[re.key]:ee.target.value}),placeholder:re.placeholder}),re.convertToSatoshi&&h.jsx("small",{className:"agent-delegation-small-text",children:"Will be converted to satoshi format"})]},re.key)})]})]}):h.jsxs("div",{className:"agent-delegation-step disabled",children:[h.jsx("h4",{children:"Step 2: Configure Parameters"}),h.jsx("p",{className:"agent-delegation-disabled-text",children:"Please select an operation in Step 1 to continue."})]}),l&&m&&x&&y?h.jsxs("div",{className:"agent-delegation-step",children:[h.jsx("h4",{children:"Step 3: Sign Message"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[h.jsx("button",{className:"button",onClick:q,disabled:P||E||!m||!x||!y||((G==null?void 0:G.fields.some(re=>re.required&&!u[re.key]))??!1),children:P?"Signing...":"Sign from Wallet"}),h.jsx("button",{className:"button",onClick:Z,disabled:P||E||!m||!x||!y||!f.trim()||((G==null?void 0:G.fields.some(re=>re.required&&!u[re.key]))??!1),children:E?"Signing...":"Sign by WASM"})]})]}):h.jsxs("div",{className:"agent-delegation-step disabled",children:[h.jsx("h4",{children:"Step 3: Sign Message"}),h.jsx("p",{className:"agent-delegation-disabled-text",children:"Please complete Step 2 to continue."})]}),C&&h.jsx("div",{className:`output ${C.success?"success":"error"}`,children:C.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Signature:"}),h.jsx("br",{}),C.signature,h.jsx("br",{}),h.jsx("br",{}),C.typedData&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Payload & Typed Data:"}),h.jsx("br",{}),h.jsx("pre",{className:"agent-delegation-pre",children:JSON.stringify(C.typedData,null,2)})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),C.error]})})]})}function aF(){var N,de,be,re,_e,ee,W,Q,H,J,we,te,ge,Pe,he,le,ye;const{ownerAddress:t,setOwnerAddress:e,agentAddress:n,setAgentAddress:s,agentPrivateKey:r,expiresInDays:i,setExpiresInDays:o,permissions:a,setPermissions:l,agentName:c,setAgentName:u,nonce:d,setNonce:f,result:p,loading:m,generateAgentKeypair:b,isMetaMaskConnected:x,isPhantomConnected:g,isOneKeyConnected:y,isReady:S}=$9(),{connect:w,connectors:v,isPending:C}=tM(),{disconnect:_}=nM(),{address:P,isConnected:M}=Zw(),{signTypedDataAsync:E}=ev(),I=XT(),[O,j]=k.useState([]),[U,A]=k.useState(null),[L,B]=k.useState(!1),F=()=>{if(!t||!n)throw new Error("Owner and agent addresses are required");const me=a.split(",").map(je=>je.trim()).filter(je=>je.length>0),ve=Math.floor(Date.now()/1e3)+i*24*60*60,Ie={name:"Morpheum",version:"",chainId:I,verifyingContract:"0x0000000000000000000000000000000000000000"},He={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],AgentApproval:[{name:"owner",type:"address"},{name:"agent",type:"address"},{name:"agentName",type:"string"},{name:"expiresInDays",type:"uint256"},{name:"permissions",type:"string[]"},{name:"nonce",type:"string"},{name:"deadline",type:"uint256"}]},Fe={owner:t.toLowerCase(),agent:n.toLowerCase(),agentName:c||"",expiresInDays:i,permissions:me,nonce:d||Date.now().toString(),deadline:ve};return{domain:Ie,types:He,primaryType:"AgentApproval",message:Fe}},$=async()=>{var me,ve;if(!t||!n){A({success:!1,error:"Owner and agent addresses are required"});return}B(!0),A(null);try{const Ie=F(),He=await E({domain:Ie.domain,types:Ie.types,primaryType:Ie.primaryType,message:Ie.message});A({success:!0,signature:He,typedData:Ie})}catch(Ie){Ie.code===4001||(me=Ie.message)!=null&&me.includes("User rejected")||(ve=Ie.message)!=null&&ve.includes("rejected")?A({success:!1,error:"User rejected the signature request"}):(console.error("Error signing:",Ie),A({success:!1,error:Ie.message||"Unknown error during signing"}))}finally{B(!1)}},D=typeof window<"u"&&!!((N=window.ethereum)!=null&&N.isMetaMask),z=typeof window<"u"&&(!!((de=window.phantom)!=null&&de.ethereum)||!!((be=window.ethereum)!=null&&be.isPhantom)),R=typeof window<"u"&&(!!((re=window.$onekey)!=null&&re.ethereum)||!!((_e=window.ethereum)!=null&&_e.isOneKey)),T=v.find(me=>me.id==="injected");k.useEffect(()=>{var me,ve,Ie;console.log("[Phantom Debug] Component mounted/updated"),console.log("[Phantom Debug] Window object:",typeof window<"u"?"available":"undefined"),console.log("[Phantom Debug] window.phantom:",window.phantom),console.log("[Phantom Debug] window.ethereum:",window.ethereum),console.log("[Phantom Debug] window.ethereum?.isMetaMask:",(me=window.ethereum)==null?void 0:me.isMetaMask),console.log("[Phantom Debug] window.ethereum?.isPhantom:",(ve=window.ethereum)==null?void 0:ve.isPhantom),console.log("[Phantom Debug] window.ethereum?.isOneKey:",(Ie=window.ethereum)==null?void 0:Ie.isOneKey),console.log("[Phantom Debug] isPhantomAvailable:",z),console.log("[Phantom Debug] All connectors:",v),console.log("[Phantom Debug] Injected connector:",T),console.log("[Phantom Debug] Injected connector ID:",T==null?void 0:T.id),console.log("[Phantom Debug] Injected connector name:",T==null?void 0:T.name),console.log("[Phantom Debug] isConnecting:",C)},[v,T,z,C]);const X=t&&P&&t.toLowerCase()===P.toLowerCase(),ne=typeof window<"u"?(ee=window.phantom)!=null&&ee.ethereum||(W=window.ethereum)!=null&&W.isPhantom?"Phantom":(Q=window.$onekey)!=null&&Q.ethereum||(H=window.ethereum)!=null&&H.isOneKey?"OneKey":(J=window.ethereum)!=null&&J.isMetaMask?"MetaMask":null:null,q=x||M&&X&&ne==="MetaMask"||t&&ne==="MetaMask"&&D,Z=g||M&&X&&ne==="Phantom"||t&&ne==="Phantom"&&z,G=y||M&&X&&ne==="OneKey"||t&&ne==="OneKey"&&R,se=q?"MetaMask":Z?"Phantom":G?"OneKey":null,ae=q||Z||G,Ne=O.length>0||ae,ke=ae&&t&&n;k.useEffect(()=>{!M&&O.length>0&&(j([]),t&&e(""))},[M,O.length,t]),k.useEffect(()=>{console.log("[Connection Debug] wagmiIsConnected:",M),console.log("[Connection Debug] wagmiAddress:",P),console.log("[Connection Debug] ownerAddress:",t),console.log("[Connection Debug] isPhantomConnected (hook):",g),console.log("[Connection Debug] isMetaMaskConnected (hook):",x),console.log("[Connection Debug] isOneKeyConnected (hook):",y),console.log("[Connection Debug] detectedWallet:",ne),console.log("[Connection Debug] hasMatchingAddress:",X),console.log("[Connection Debug] isPhantomConnectedEnhanced:",Z),console.log("[Connection Debug] isWalletConnected:",ae),console.log("[Connection Debug] availableAddresses:",O)},[M,P,t,g,x,y,ne,X,Z,ae,O]);const Ee=async()=>{if(!D){alert("MetaMask wallet is not installed. Please install MetaMask wallet extension.");return}try{const me=window.ethereum;if(me){const ve=await me.request({method:"eth_requestAccounts"});ve&&ve.length>0&&(j(ve),ve.length===1&&e(ve[0]))}T?(await w({connector:T}),await new Promise(ve=>setTimeout(ve,300))):alert("MetaMask connector not found. Please ensure MetaMask wallet is installed.")}catch(me){me.code===4001?alert("User rejected the connection request."):(console.error("Error connecting to MetaMask:",me),alert(`Failed to connect to MetaMask: ${me.message||"Unknown error"}`))}},Ue=async()=>{var me,ve,Ie,He,Fe,je,Ae;if(console.log("[Phantom Debug] Starting connection process..."),console.log("[Phantom Debug] isPhantomAvailable:",z),console.log("[Phantom Debug] window.phantom:",window.phantom),console.log("[Phantom Debug] window.ethereum:",window.ethereum),console.log("[Phantom Debug] window.ethereum?.isPhantom:",(me=window.ethereum)==null?void 0:me.isPhantom),!z){console.error("[Phantom Debug] Phantom wallet not available"),alert("Phantom wallet is not installed. Please install Phantom wallet extension.");return}try{let We=(ve=window.phantom)==null?void 0:ve.ethereum;if(console.log("[Phantom Debug] phantomProvider (window.phantom.ethereum):",We),!We&&window.phantom){const ie=window.phantom;typeof ie.request=="function"&&(We=ie,console.log("[Phantom Debug] Using window.phantom as provider"))}if(!We&&((Ie=window.ethereum)!=null&&Ie.isPhantom)&&(We=window.ethereum,console.log("[Phantom Debug] Using window.ethereum as provider (isPhantom=true)")),!We){console.error("[Phantom Debug] No valid Phantom provider found"),console.error("[Phantom Debug] Available providers:",{hasWindowPhantom:!!window.phantom,hasPhantomEthereum:!!((He=window.phantom)!=null&&He.ethereum),phantomHasRequest:typeof((Fe=window.phantom)==null?void 0:Fe.request)=="function",hasWindowEthereum:!!window.ethereum,ethereumIsPhantom:(je=window.ethereum)==null?void 0:je.isPhantom,ethereumIsMetaMask:(Ae=window.ethereum)==null?void 0:Ae.isMetaMask}),alert("Phantom wallet provider not found. Please ensure Phantom wallet is installed and enabled.");return}console.log("[Phantom Debug] Using provider, requesting accounts...");const ze=await We.request({method:"eth_requestAccounts"});console.log("[Phantom Debug] Accounts received:",ze),ze&&ze.length>0&&(j(ze),console.log("[Phantom Debug] Available addresses:",ze),ze.length===1&&(console.log("[Phantom Debug] Auto-selecting single address:",ze[0]),e(ze[0]))),console.log("[Phantom Debug] Waiting 100ms before wagmi connection..."),await new Promise(ie=>setTimeout(ie,100)),console.log("[Phantom Debug] injectedConnector:",T),console.log("[Phantom Debug] All connectors:",v),T?(console.log("[Phantom Debug] Connecting via wagmi injected connector..."),await w({connector:T}),console.log("[Phantom Debug] Wagmi connect() called"),console.log("[Phantom Debug] Waiting for wagmi state update..."),await new Promise(ie=>setTimeout(ie,300)),console.log("[Phantom Debug] Connection should be complete")):(console.error("[Phantom Debug] Injected connector not found"),alert("Phantom connector not found. Please ensure Phantom wallet is installed."))}catch(We){console.error("[Phantom Debug] Error caught:",We),console.error("[Phantom Debug] Error code:",We.code),console.error("[Phantom Debug] Error message:",We.message),console.error("[Phantom Debug] Error stack:",We.stack),We.code===4001?(console.log("[Phantom Debug] User rejected the connection"),alert("User rejected the connection request.")):(console.error("[Phantom Debug] Unknown error during connection"),alert(`Failed to connect to Phantom: ${We.message||"Unknown error"}`))}},st=async()=>{var me;if(!R){alert("OneKey wallet is not installed. Please install OneKey wallet extension.");return}try{const ve=((me=window.$onekey)==null?void 0:me.ethereum)||window.ethereum;if(!ve){alert("OneKey wallet provider not found. Please ensure OneKey wallet is installed and enabled.");return}const Ie=await ve.request({method:"eth_requestAccounts"});Ie&&Ie.length>0&&(j(Ie),Ie.length===1&&e(Ie[0])),T?(await w({connector:T}),await new Promise(He=>setTimeout(He,300))):alert("OneKey connector not found. Please ensure OneKey wallet is installed.")}catch(ve){ve.code===4001?alert("User rejected the connection request."):(console.error("Error connecting to OneKey:",ve),alert(`Failed to connect to OneKey: ${ve.message||"Unknown error"}`))}};return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Agent Delegation"}),h.jsx("p",{children:"Approve an agent private key to act on behalf of the owner wallet"}),h.jsxs("div",{className:`agent-delegation-step ${Ne?"connected":""}`,children:[h.jsxs("h4",{children:["Step 1: Connect Wallet ",ae&&t&&""]}),Ne?O.length>0&&!t?h.jsxs("div",{children:[h.jsxs("p",{style:{marginBottom:"1rem"},children:[h.jsx("strong",{children:"Connected:"})," ",se||"Wallet"]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressSelect",children:"Select an address to use:"}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:O.map(me=>h.jsx("button",{className:`button ${(t==null?void 0:t.toLowerCase())===me.toLowerCase()?"":"secondary"}`,onClick:()=>e(me),style:{textAlign:"left",justifyContent:"flex-start",fontFamily:"monospace",fontSize:"0.9rem"},children:me},me))})]}),h.jsx("button",{className:"button secondary",onClick:()=>{_(),j([]),e("")},style:{marginTop:"1rem"},children:"Disconnect"})]}):h.jsxs("div",{className:"agent-delegation-connected-info",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Connected:"})," ",se,t&&h.jsxs("div",{className:"agent-delegation-address",children:["Address: ",t]})]}),h.jsx("button",{className:"button secondary",onClick:()=>{_(),j([]),e("")},children:"Disconnect"})]}):h.jsxs("div",{className:"agent-delegation-wallet-buttons",children:[D&&h.jsx("button",{className:"button",onClick:Ee,disabled:C||!T,children:C?"Connecting...":"Connect MetaMask"}),z&&h.jsx("button",{className:"button",onClick:Ue,disabled:C||!T,children:C?"Connecting...":"Connect Phantom"}),R&&h.jsx("button",{className:"button",onClick:st,disabled:C||!T,children:C?"Connecting...":"Connect OneKey"}),!D&&!z&&!R&&h.jsx("p",{className:"agent-delegation-error-message",children:"No supported wallet detected. Please install MetaMask, Phantom, or OneKey wallet."})]})]}),ae&&t?h.jsxs("div",{className:`agent-delegation-step ${ke?"connected":""}`,children:[h.jsxs("h4",{children:["Step 2: Configure Agent Delegation ",ke&&""]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),h.jsx("input",{id:"ownerAddress",type:"text",value:t,readOnly:!0,style:{fontFamily:"monospace",fontSize:"0.9rem",backgroundColor:"rgba(255, 255, 255, 0.05)",cursor:"not-allowed"}}),h.jsxs("small",{className:"agent-delegation-small-text",children:["This address is from your connected ",se," wallet."]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentAddress",children:"Agent Address:"}),h.jsxs("div",{className:"agent-delegation-input-group",children:[h.jsx("input",{id:"agentAddress",type:"text",value:n,onChange:me=>s(me.target.value),placeholder:"0x...",className:"agent-delegation-input-flex"}),h.jsx("button",{className:"button secondary agent-delegation-button-compact",onClick:b,disabled:m||!S,children:"Generate Keypair"})]})]}),r&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentPrivateKey",children:"Agent Private Key (save securely):"}),h.jsx("input",{id:"agentPrivateKey",type:"text",value:r,readOnly:!0,className:"agent-delegation-private-key"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentName",children:"Agent Name (optional):"}),h.jsx("input",{id:"agentName",type:"text",value:c,onChange:me=>u(me.target.value),placeholder:"enter you agent name"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"expiresInDays",children:"Expires In Days:"}),h.jsx("input",{id:"expiresInDays",type:"number",value:i,onChange:me=>o(parseInt(me.target.value)||180),min:"1",max:"365"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"permissions",children:"Permissions (comma-separated):"}),h.jsx("input",{id:"permissions",type:"text",value:a,onChange:me=>l(me.target.value),placeholder:"clob::submit_order,clob::cancel_order"}),h.jsx("small",{className:"agent-delegation-small-text",children:"Example: clob::submit_order, clob::cancel_order, clob::modify_order"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),h.jsx("input",{id:"nonce",type:"text",value:d,onChange:me=>f(me.target.value),placeholder:Date.now().toString()})]})]}):h.jsxs("div",{className:"agent-delegation-step disabled",children:[h.jsx("h4",{children:"Step 2: Configure Agent Delegation"}),h.jsx("p",{className:"agent-delegation-disabled-text",children:Ne&&!t?"Please select an address in Step 1 to continue.":"Please connect a wallet in Step 1 to continue."})]}),ke?h.jsxs("div",{className:"agent-delegation-step",children:[h.jsx("h4",{children:"Step 3: Prepare and Sign Agent Approval"}),h.jsxs("div",{className:"agent-delegation-button-group",children:[x&&h.jsx("button",{className:"button",onClick:$,disabled:L||!t||!n,children:L?"Signing with MetaMask...":"Sign Agent Approval (MetaMask)"}),g&&h.jsx("button",{className:"button",onClick:$,disabled:L||!t||!n,children:L?"Signing with Phantom...":"Sign Agent Approval (Phantom)"}),y&&h.jsx("button",{className:"button",onClick:$,disabled:L||!t||!n,children:L?"Signing with OneKey...":"Sign Agent Approval (OneKey)"})]})]}):h.jsxs("div",{className:"agent-delegation-step disabled",children:[h.jsx("h4",{children:"Step 3: Prepare and Sign Agent Approval"}),h.jsx("p",{className:"agent-delegation-disabled-text",children:"Please complete Step 1 (connect wallet) and Step 2 (configure addresses) to continue."})]}),(p||U)&&h.jsx("div",{className:`output ${(we=p||U)!=null&&we.success?"success":"error"}`,children:(te=p||U)!=null&&te.success?h.jsxs(h.Fragment,{children:[((ge=p||U)==null?void 0:ge.signature)&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Agent Approval Signature:"}),h.jsx("br",{}),(Pe=p||U)==null?void 0:Pe.signature,h.jsx("br",{}),h.jsx("br",{})]}),((he=p||U)==null?void 0:he.typedData)&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"EIP-712 Typed Data:"}),h.jsx("br",{}),h.jsx("pre",{className:"agent-delegation-pre",children:JSON.stringify((le=p||U)==null?void 0:le.typedData,null,2)}),h.jsx("br",{}),h.jsx("strong",{children:"Usage:"}),h.jsx("br",{}),"Signature received from wallet. The typed data structure is shown above."]})]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),(ye=p||U)==null?void 0:ye.error]})})]})}function lF({status:t}){const e=()=>t.loading?"loading":t.loaded?"success":t.error?"error":"loading",n=()=>t.loading?"Loading WASM...":t.loaded?"WASM Ready":t.error?"WASM Error":"Unknown";return h.jsxs("div",{className:"App-section",children:[h.jsx("h3",{children:"WASM Status"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[h.jsx("span",{className:`status ${e()}`,children:n()}),t.loading&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"Initializing WebAssembly module..."}),t.loaded&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"morm_signer.wasm loaded successfully"}),t.error&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:t.error})]})]})}const Ec="https://router.morpheum.io",xh="wss://router.morpheum.io/websocket",vm="ios-device-1234567890",cF=({isRunning:t,onClick:e})=>h.jsx("button",{onClick:e,disabled:t,style:{color:"#fff",backgroundColor:t?"#ccc":"#007bff",cursor:t?"not-allowed":"pointer"},children:t?"Running Tests...":"Run All Tests"}),uF=({mnemonic:t,baseURL:e,onboardLoading:n,isRunning:s,onOnboard:r})=>{const i=n||s||!t||t.trim()==="";return h.jsx("button",{onClick:()=>{t&&t.trim()!==""&&r(t,e)},disabled:i,style:{color:i?"#ccc":"#fff",backgroundColor:i?"#ccc":"#28a745",cursor:i?"not-allowed":"pointer"},children:n?"Onboarding...":"Onboard & Get Auth Token"})},dF=({isRunning:t,onClick:e})=>h.jsx("button",{onClick:e,disabled:t,style:{color:t?"#ccc":"#fff",backgroundColor:t?"#ccc":"#dc3545",cursor:t?"not-allowed":"pointer"},children:"Clear Results"}),hF=({onClick:t})=>h.jsx("button",{onClick:t,className:"sdk-test-button-dismiss",children:"Dismiss"}),fF=({result:t})=>h.jsxs("div",{className:`sdk-test-result-item ${t.success?"success":"error"}`,children:[h.jsxs("div",{className:"sdk-test-result-content",children:[h.jsxs("div",{className:"sdk-test-result-message",children:[t.success?"":""," ",t.message]}),t.error&&h.jsxs("div",{className:"sdk-test-result-error",children:["Error: ",t.error]}),t.data&&h.jsxs("details",{className:"sdk-test-result-data",children:[h.jsx("summary",{children:"View Data"}),h.jsx("pre",{children:JSON.stringify(t.data,null,2)})]})]}),h.jsx("div",{className:"sdk-test-result-timestamp",children:new Date(t.timestamp).toLocaleTimeString()})]}),pF=({sectionName:t,isExpanded:e,onToggle:n})=>h.jsxs("h2",{className:"sdk-test-section-header",onClick:n,children:[h.jsx("span",{children:t}),h.jsx("span",{className:"sdk-test-section-chevron",children:e?"":""})]});function mF(){var ke,Ee,Ue,st;const[t,e]=k.useState(Ec),[n,s]=k.useState(""),[r,i]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(vm),[u,d]=k.useState({}),[f,p]=k.useState(!1),[m,b]=k.useState(new Set),x=k.useRef(null),g=k.useRef(null),y=k.useRef(t),S=k.useRef([]),w=k.useRef(""),{markets:v,fetchMarkets:C}=co({baseURL:t,sessionToken:r,autoFetchMarkets:!1}),{mnemonic:_,walletAddress:P,authToken:M,loading:E,error:I,onboard:O,clearError:j,setMnemonic:U}=Sa();k.useEffect(()=>{_||U("legal winner thank year wave sausage worth useful legal winner thank yellow")},[_,U]);const A=k.useRef(_||"");k.useEffect(()=>{A.current=_||""},[_]);const{buckets:L,loading:B,error:F,refresh:$}=N5({baseURL:t,authToken:r||o,walletAddress:P||void 0,refreshInterval:0});k.useEffect(()=>{M&&(a(M),localStorage.setItem("authToken",M))},[M]),k.useEffect(()=>{o&&o.trim()!==""&&localStorage.setItem("authToken",o)},[o]);const D=k.useRef(f);k.useEffect(()=>{D.current===!0&&f===!1&&setTimeout(()=>{const N=Object.values(u).flatMap(_e=>_e.results),de=N.filter(_e=>_e.success).length,be=N.length,re=be-de;be>0&&(re===0?Oe.success("All tests passed",{description:`${be} test(s) completed successfully.`,duration:5e3}):Oe.warning("Tests completed with failures",{description:`${de}/${be} tests passed. ${re} test(s) failed.`,duration:6e3}))},100),D.current=f},[f,u]),k.useEffect(()=>{const N=localStorage.getItem("authToken");N&&!o&&a(N)},[]);const z=v.length>0?(((ke=v.find(N=>N.active))==null?void 0:ke.market_id)??v[0].market_id)||(((Ue=(Ee=v.find(N=>N.active))==null?void 0:Ee.id)==null?void 0:Ue.toString())??((st=v[0].id)==null?void 0:st.toString())??""):null,R=z??n;k.useEffect(()=>{z&&n!==z&&s(z)},[z]),k.useEffect(()=>{y.current=t},[t]);const T=(N,de)=>{d(be=>{const re=be[N]||{name:N,results:[]};return{...be,[N]:{...re,results:[...re.results,de]}}})},X=()=>{d({}),b(new Set)},ne=N=>{b(de=>{const be=new Set(de);return be.has(N)?be.delete(N):be.add(N),be})};k.useEffect(()=>{const N=Object.keys(u).filter(de=>u[de].results.length>0);N.length>0&&b(de=>{const be=new Set(de);return N.forEach(re=>be.add(re)),be})},[u]);const q=()=>{const N="Utilities";T(N,{success:!0,message:"Testing utility functions...",timestamp:Date.now()});try{const de=ut(1);T(N,{success:de==="100000000",message:`toSatoshi(1.0) = ${de}`,data:{expected:"100000000",got:de},timestamp:Date.now()});const be=ut("1.5");T(N,{success:be==="150000000",message:`toSatoshi("1.5") = ${be}`,data:{expected:"150000000",got:be},timestamp:Date.now()});const re=De("100000000");T(N,{success:re===1,message:`fromSatoshi("100000000") = ${re}`,data:{expected:1,got:re},timestamp:Date.now()});const _e=tv(1);T(N,{success:_e===1e8,message:`toSatoshiUint64(1.0) = ${_e}`,data:{expected:1e8,got:_e},timestamp:Date.now()});const ee=Xx("100000000"),W=Xx("abc");T(N,{success:ee&&!W,message:`isValidSatoshi tests: "100000000"=${ee}, "abc"=${W}`,data:{valid1:ee,valid2:W},timestamp:Date.now()});const Q=[1,1.5,2],H=sM(Q),J=rM(H);T(N,{success:J.length===3,message:`Batch conversion: ${Q.length} items`,data:{input:Q,satoshi:H,decimal:J},timestamp:Date.now()}),T(N,{success:Yo===1e8,message:`SATOSHI_SCALE = ${Yo}`,data:{expected:1e8,got:Yo},timestamp:Date.now()})}catch(de){T(N,{success:!1,message:"Utility test error",error:de.message,timestamp:Date.now()})}},Z=async(N="Authentication")=>{if(!P||P.trim()===""){T(N,{success:!1,message:"Authentication skipped: Wallet address required",timestamp:Date.now()});return}if(!qe.isReady()){T(N,{success:!1,message:"Authentication failed: mormSigner not loaded. Please initialize mormSigner first for address generation.",timestamp:Date.now()});return}try{T(N,{success:!0,message:"Starting authentication (onboarding) with ethers.js EIP-712 signing...",timestamp:Date.now()});const{onboardAndGetAuthToken:de}=await LT(async()=>{const{onboardAndGetAuthToken:re}=await Promise.resolve().then(()=>M9);return{onboardAndGetAuthToken:re}},void 0);if(T(N,{success:!0,message:"Calling onboardAndGetAuthToken (handles nonce, EIP-712 signing with ethers.js, and API request)...",timestamp:Date.now()}),!_)throw new Error("Mnemonic is required for authentication");const be=await de(_,y.current);if(!be.success||!be.authToken)throw new Error(be.error||"Onboarding failed");a(be.authToken),localStorage.setItem("authToken",be.authToken),T(N,{success:!0,message:"AUTHENTICATION SUCCESSFUL!",data:{walletAddress:P,authToken:be.authToken.substring(0,32)+"...",refreshToken:be.refreshToken,expiresAt:be.expiresAt},timestamp:Date.now()})}catch(de){const be=de.message||String(de);T(N,{success:!1,message:`Authentication failed: ${be}`,error:be,timestamp:Date.now()})}},G=async()=>{var _e;const N="Wallet Specific";g.current=new an({baseURL:y.current}),r&&g.current&&g.current.setSessionToken(r),T(N,{success:!0,message:"Waiting for wallet address to be available...",timestamp:Date.now()});const de=5e3,be=200;let re=0;for(;!P||P.trim()==="";){if(re>=de){T(N,{success:!1,message:"Timeout: Wallet address not available after 5 seconds",error:"Wallet address is required for wallet-specific tests. Please ensure mnemonic is provided.",timestamp:Date.now()});return}await new Promise(ee=>setTimeout(ee,be)),re+=be}if(!P||P.trim()===""){T(N,{success:!1,message:"Wallet address is required for wallet-specific tests",error:"Wallet address not available",timestamp:Date.now()});return}T(N,{success:!0,message:`Wallet address available: ${P.substring(0,10)}...`,timestamp:Date.now()});try{T(N,{success:!0,message:`Testing getBalance() for asset "MORM" at address ${P.substring(0,10)}...`,timestamp:Date.now()});try{const W=await g.current.getBalance(P,"MORM"),Q=(W==null?void 0:W.balance)||(W==null?void 0:W.amount)||(W==null?void 0:W.value)||"N/A",H=typeof Q=="string"?Q:JSON.stringify(Q);T(N,{success:!!W,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: MORM | Balance: ${H} (raw satoshi format)`,data:{balance:W,asset:"MORM",walletAddress:P.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(W){T(N,{success:!1,message:'getBalance() failed for asset "MORM" (may require authentication)',error:W.message,data:{asset:"MORM",walletAddress:P.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}T(N,{success:!0,message:`Testing getBalance() for asset "USDC" at address ${P.substring(0,10)}...`,timestamp:Date.now()});try{const W=await g.current.getBalance(P,"USDC"),Q=(W==null?void 0:W.balance)||(W==null?void 0:W.amount)||(W==null?void 0:W.value)||"N/A",H=typeof Q=="string"?Q:JSON.stringify(Q);T(N,{success:!!W,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: USDC | Balance: ${H} (raw satoshi format)`,data:{balance:W,asset:"USDC",walletAddress:P.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(W){T(N,{success:!1,message:'getBalance() failed for asset "USDC" (may require authentication)',error:W.message,data:{asset:"USDC",walletAddress:P.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}try{const W=await g.current.getBalanceDecimal(P,"USDC");T(N,{success:!!W,message:"getBalanceDecimal() - GET /bank/v1/balance/{address}",data:W,timestamp:Date.now()})}catch(W){T(N,{success:!1,message:"getBalanceDecimal() failed",error:W.message,timestamp:Date.now()})}try{const W=await g.current.getBalances(P);T(N,{success:!!W,message:"getBalances() - GET /bank/v1/balances/{address}",data:W,timestamp:Date.now()})}catch(W){T(N,{success:!1,message:"getBalances() failed (may require authentication)",error:W.message,timestamp:Date.now()})}try{const W=await g.current.getPositions(P);T(N,{success:Array.isArray(W),message:`getPositions() - GET /bucket/v1/address/{address}/positions returned ${Array.isArray(W)?W.length:0} positions`,data:W,timestamp:Date.now()})}catch(W){T(N,{success:!1,message:"getPositions() failed",error:W.message,timestamp:Date.now()})}let ee=[];try{const W=await g.current.getOrders(P);ee=(W==null?void 0:W.orders)||[];const Q=W&&(Array.isArray(ee)||W.total_count!==void 0);T(N,{success:Q,message:`getOrders() - GET /clob/v1/address/orders?address={address} returned ${Array.isArray(ee)?ee.length:0} orders (total_count: ${(W==null?void 0:W.total_count)??"N/A"})`,data:{orders:Array.isArray(ee)?ee.slice(0,3):ee,total_count:W==null?void 0:W.total_count,timestamp:W==null?void 0:W.timestamp},timestamp:Date.now()})}catch(W){T(N,{success:!1,message:"getOrders() failed",error:W.message,timestamp:Date.now()})}if(Array.isArray(ee)&&ee.length>0){const W=ee[0],Q=(W==null?void 0:W.orderId)||(W==null?void 0:W.order_id)||(W==null?void 0:W.id);if(Q){T(N,{success:!0,message:`Testing getOrder() for order ID: ${Q.substring(0,16)}... (from getOrders result)`,timestamp:Date.now()});try{const H=await g.current.getOrder(Q);T(N,{success:!!H,message:`getOrder() - GET /clob/v1/order/{orderID} | Order ID: ${Q.substring(0,16)}...`,data:{order:H,orderId:Q,source:"First order from getOrders() result"},timestamp:Date.now()})}catch(H){T(N,{success:!1,message:`getOrder() failed for order ID: ${Q.substring(0,16)}...`,error:H.message,data:{orderId:Q,endpoint:"GET /clob/v1/order/{orderID}"},timestamp:Date.now()})}}else T(N,{success:!1,message:"getOrder() test skipped: No valid order ID found in getOrders() result",error:"Order ID not found in order object",data:{order:W,availableFields:Object.keys(W||{})},timestamp:Date.now()})}else T(N,{success:!0,message:"getOrder() test skipped: No orders available from getOrders() (need at least 1 order)",data:{ordersCount:ee.length,note:"getOrder() test requires at least one order from getOrders()"},timestamp:Date.now()});try{const W=await g.current.getOrderHistory(P),Q=Array.isArray(W)?W:(W==null?void 0:W.orders)||[],H=W&&(Array.isArray(Q)||W.orders!==void 0);T(N,{success:H,message:`getOrderHistory() - GET /clob/v1/address/orders/history?address={address} returned ${Array.isArray(Q)?Q.length:0} orders`,data:Array.isArray(Q)?Q.slice(0,3):W,timestamp:Date.now()})}catch(W){T(N,{success:!1,message:"getOrderHistory() failed",error:W.message,timestamp:Date.now()})}try{const W=await g.current.getTradeHistory(P),Q=Array.isArray(W)?W:(W==null?void 0:W.trades)||(W==null?void 0:W.data)||[],H=W&&(Array.isArray(Q)||W.trades!==void 0||W.data!==void 0);T(N,{success:H,message:`getTradeHistory() - GET /clob/v1/address/trades?address={address} returned ${Array.isArray(Q)?Q.length:0} trades`,data:Array.isArray(Q)?Q.slice(0,3):W,timestamp:Date.now()})}catch(W){T(N,{success:!1,message:"getTradeHistory() failed",error:W.message,timestamp:Date.now()})}try{const W=await g.current.getBuckets(P);if(T(N,{success:Array.isArray(W)||W!==void 0,message:`getBuckets() - GET /bucket/v1/address/{address}/buckets returned ${Array.isArray(W)?W.length:"data"}`,data:Array.isArray(W)?W.slice(0,3):W,timestamp:Date.now()}),Array.isArray(W)&&W.length>0){const Q=W[0],H=Q.bucket_id||Q.id||Q.bucketId;if(H)try{const J=await g.current.getBucket(H);T(N,{success:!!J,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} (${H.substring(0,16)}...)`,data:J,timestamp:Date.now()})}catch(J){T(N,{success:!1,message:`getBucket(${H.substring(0,16)}...) failed`,error:J.message,timestamp:Date.now()})}}}catch(W){T(N,{success:!1,message:"getBuckets() failed",error:W.message,timestamp:Date.now()})}T(N,{success:!0,message:"Testing useBuckets hook...",timestamp:Date.now()});try{if(await $(),T(N,{success:!F&&!B,message:`useBuckets hook: ${L.length} buckets loaded`,data:{buckets:L.slice(0,3),loading:B,error:F,totalBuckets:L.length},timestamp:Date.now()}),L.length>0){const Q=(_e=L[0].bucketId)==null?void 0:_e.toString();if(Q)try{const H=await g.current.getBucket(Q);T(N,{success:!!H,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} via hook bucket ID (${Q.substring(0,16)}...)`,data:H,timestamp:Date.now()})}catch(H){T(N,{success:!1,message:"getBucket() via hook bucket ID failed",error:H.message,timestamp:Date.now()})}}}catch(W){T(N,{success:!1,message:"useBuckets hook test failed",error:W.message,timestamp:Date.now()})}}catch(ee){T(N,{success:!1,message:"Wallet Specific test error",error:ee.message,timestamp:Date.now()})}},se=async()=>{var de,be,re,_e,ee;const N="InfoClient";g.current=new an({baseURL:y.current}),r&&g.current&&g.current.setSessionToken(r);try{T(N,{success:!0,message:"Testing getMarkets()...",timestamp:Date.now()});const W=await C();S.current=Array.isArray(W)?W:[];const Q=Array.isArray(W)?W.length:0,H=Q>0?W.find(te=>te.active||te.status==="active")??W[0]:null,J=(H==null?void 0:H.market_id)??((de=H==null?void 0:H.id)==null?void 0:de.toString())??null;if(T(N,{success:Array.isArray(W)&&Q>0,message:`getMarkets() - GET /market/v1/all returned ${Q} markets${J?` | Using market ID: ${J} (${(H==null?void 0:H.moniker)||(H==null?void 0:H.symbol)||"auto-selected"})`:""}`,data:{count:Q,defaultMarketId:J,defaultMarket:H?{id:H.id,market_id:H.market_id,moniker:H.moniker,symbol:H.symbol,active:H.active,status:H.status}:null,markets:W.slice(0,5)},timestamp:Date.now()}),J){s(J),w.current=J;const te=(H==null?void 0:H.moniker)||(H==null?void 0:H.symbol)||(H!=null&&H.baseAsset&&(H!=null&&H.quoteAsset)?`${H.baseAsset}-${H.quoteAsset}`:"Unknown");T(N,{success:!0,message:`Markets loaded: ${Q} | Auto-selected: ${te} (ID: ${J.substring(0,10)}...)`,data:{selectedMarketId:J,count:Q,market:H},timestamp:Date.now()}),T(N,{success:!0,message:"Waiting 1.5s for market selection to take effect...",timestamp:Date.now()}),await new Promise(ge=>setTimeout(ge,1500)),T(N,{success:!0,message:`Market ID ready: ${J}`,data:{marketId:J},timestamp:Date.now()}),T(N,{success:!0,message:`Proceeding with market: ${te}`,timestamp:Date.now()})}const we=J||R||n;if(we){T(N,{success:!0,message:`Testing getOrderbook(${we}, true)...`,timestamp:Date.now()});try{const te=await g.current.getOrderbook(we,!0);T(N,{success:te&&(te.bids||te.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} with decimal conversion",data:{bids:(be=te==null?void 0:te.bids)==null?void 0:be.slice(0,3),asks:(re=te==null?void 0:te.asks)==null?void 0:re.slice(0,3)},timestamp:Date.now()});const ge=await g.current.getOrderbook(we,!1);T(N,{success:ge&&(ge.bids||ge.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} raw satoshi format",data:{bids:(_e=ge==null?void 0:ge.bids)==null?void 0:_e.slice(0,2),asks:(ee=ge==null?void 0:ge.asks)==null?void 0:ee.slice(0,2)},timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} failed",error:te.message,timestamp:Date.now()})}T(N,{success:!0,message:`Testing getTicker(${we})...`,timestamp:Date.now()});try{const te=await g.current.getTicker(we);T(N,{success:!!te,message:"getTicker() - GET /market/v1/market/{marketId}/stats",data:te,timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"getTicker() - GET /market/v1/market/{marketId}/stats failed",error:te.message,timestamp:Date.now()})}T(N,{success:!0,message:`Testing getRecentTrades(${we}, 10)...`,timestamp:Date.now()});try{const te=await g.current.getRecentTrades(we,10);T(N,{success:Array.isArray(te),message:`getRecentTrades() - GET /clob/v1/trades?market_id={marketId} returned ${Array.isArray(te)?te.length:0} trades`,data:te==null?void 0:te.slice(0,3),timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"getRecentTrades() - GET /clob/v1/trades?market_id={marketId} failed",error:te.message,timestamp:Date.now()})}}else T(N,{success:!1,message:"Skipping market-specific tests: No market ID available",error:"Please ensure markets are loaded and a market is selected",timestamp:Date.now()});T(N,{success:!0,message:"Testing router/v1 endpoints...",timestamp:Date.now()});try{const te=await g.current.getSupportedActions();T(N,{success:Array.isArray(te==null?void 0:te.actions)||(te==null?void 0:te.actions)!==void 0,message:"getSupportedActions() - GET /router/v1/tx/supported-actions",data:te,timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"getSupportedActions() - GET /router/v1/tx/supported-actions failed",error:te.message,timestamp:Date.now()})}try{const te=await g.current.validateAction("clob::submit_order");T(N,{success:(te==null?void 0:te.valid)!==void 0||te!==void 0,message:'validateAction() - GET /router/v1/tx/validate-action ("clob::submit_order")',data:te,timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"validateAction() - GET /router/v1/tx/validate-action failed",error:te.message,timestamp:Date.now()})}try{const te=await g.current.getHealthSummary();T(N,{success:!!te,message:"getHealthSummary() - GET /router/v1/health/summary",data:te,timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"getHealthSummary() - GET /router/v1/health/summary failed",error:te.message,timestamp:Date.now()})}try{const te=await g.current.getHealthDaemons();T(N,{success:!!te,message:"getHealthDaemons() - GET /router/v1/health/daemons",data:te,timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"getHealthDaemons() - GET /router/v1/health/daemons failed",error:te.message,timestamp:Date.now()})}try{const te=await g.current.getHealthOracle();T(N,{success:!!te,message:"getHealthOracle() - GET /router/v1/health/oracle",data:te,timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"getHealthOracle() - GET /router/v1/health/oracle failed",error:te.message,timestamp:Date.now()})}try{const te=await g.current.getServerTime();T(N,{success:!!te&&(te.serverTime!==void 0||te!==void 0),message:"getServerTime() - GET /router/v1/time",data:te,timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"getServerTime() - GET /router/v1/time failed",error:te.message,timestamp:Date.now()})}try{const te=await g.current.getMetricsTPS();T(N,{success:!!te,message:"getMetricsTPS() - GET /router/v1/metrics/tps",data:te,timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"getMetricsTPS() - GET /router/v1/metrics/tps failed",error:te.message,timestamp:Date.now()})}try{const te=await g.current.getMetricsLatency();T(N,{success:!!te,message:"getMetricsLatency() - GET /router/v1/metrics/latency",data:te,timestamp:Date.now()})}catch(te){T(N,{success:!1,message:"getMetricsLatency() - GET /router/v1/metrics/latency failed",error:te.message,timestamp:Date.now()})}}catch(W){T(N,{success:!1,message:"InfoClient test error",error:W.message,timestamp:Date.now()})}},ae=async()=>{var _e,ee,W;const N="ExchangeClient";if(!_){T(N,{success:!1,message:"Mnemonic required for ExchangeClient tests",error:"No mnemonic provided",timestamp:Date.now()});return}let de=n||R||w.current||"";if(!de||de.trim()===""){if(S.current&&S.current.length>0){const Q=S.current.find(H=>H.active||H.status==="active")??S.current[0];Q&&(de=Q.market_id??((_e=Q.id)==null?void 0:_e.toString())??"",w.current=de,T(N,{success:!0,message:`Market ID not in state, using from fetched markets ref: ${de.substring(0,16)}...`,data:{source:"fetchedMarketsRef",marketId:de,market:{moniker:Q.moniker,symbol:Q.symbol,active:Q.active}},timestamp:Date.now()}))}else if(v&&v.length>0){const Q=v.find(H=>H.active||H.status==="active")??v[0];Q&&(de=Q.market_id??((ee=Q.id)==null?void 0:ee.toString())??"",T(N,{success:!0,message:`Market ID not in state, using from markets state: ${de.substring(0,16)}...`,data:{source:"markets state",marketId:de,market:{moniker:Q.moniker,symbol:Q.symbol,active:Q.active}},timestamp:Date.now()}))}}if(!de||de.trim()===""){T(N,{success:!1,message:"Market ID required from page or loaded markets",error:`Please enter or select a market ID in the configuration section, or ensure markets are loaded first. Debug: marketId="${n||"(empty)"}", effectiveMarketId="${R||"(empty)"}", fetchedMarketIdRef="${w.current||"(empty)"}", fetchedMarketsRef.length=${S.current.length}, markets.length=${v.length}`,data:{marketId:n||"(empty)",effectiveMarketId:R||"(empty)",defaultMarketId:z||"(empty)",fetchedMarketIdRef:w.current||"(empty)",fetchedMarketsRefCount:S.current.length,marketsCount:v.length,marketsAvailable:v.length>0||S.current.length>0},timestamp:Date.now()});return}const be=P||"";if(!be||be.trim()===""){T(N,{success:!1,message:"Wallet address required from page",error:"Wallet address should be generated from mnemonic or entered manually. Please ensure mnemonic is valid.",timestamp:Date.now()});return}const re=n?"page state (marketId)":R?"page state (effectiveMarketId)":"loaded markets array";T(N,{success:!0,message:`Using market ID from ${re}: ${de.substring(0,16)}...`,data:{marketId:de,source:re},timestamp:Date.now()}),T(N,{success:!0,message:`Using wallet address from page: ${be.substring(0,10)}...`,data:{walletAddress:be},timestamp:Date.now()}),(r||o)&&T(N,{success:!0,message:`Using signing tokens: ${r?"Session Token":""} ${o?"Auth Token":""}`,data:{hasSessionToken:!!r,hasAuthToken:!!o},timestamp:Date.now()}),x.current=new ao({baseURL:y.current,mnemonic:A.current});try{T(N,{success:!0,message:"Initializing ExchangeClient...",timestamp:Date.now()}),await x.current.initialize();const Q=x.current.getWalletAddress();if(Q.toLowerCase()!==be.toLowerCase()){T(N,{success:!1,message:"Wallet address mismatch",error:`ExchangeClient wallet (${Q}) does not match page wallet (${be})`,timestamp:Date.now()});return}T(N,{success:!0,message:`ExchangeClient initialized successfully (Wallet: ${Q.substring(0,10)}...)`,data:{walletAddress:Q,marketId:de,verified:!0},timestamp:Date.now()});const H=de;T(N,{success:!0,message:`Using market ID as string: ${H}`,data:{marketId:H},timestamp:Date.now()});let J=null;T(N,{success:!0,message:"Testing placeOrder with validation for btc-usdc-perp market...",timestamp:Date.now()});let we=[];try{g.current||(g.current=new an({baseURL:y.current})),r&&g.current&&g.current.setSessionToken(r);const Pe=await g.current.getBuckets(Q);we=Array.isArray(Pe)?Pe:[],T(N,{success:!0,message:`Fetched ${we.length} bucket(s) for order test`,timestamp:Date.now()})}catch(Pe){T(N,{success:!1,message:"Failed to fetch buckets for order test",error:Pe.message,timestamp:Date.now()})}let te=null;try{const he=(S.current.length>0?S.current:v).find(le=>{const ye=(le.moniker||"").toLowerCase(),me=(le.symbol||"").toLowerCase();return ye.includes("btc-usdc-perp")||ye.includes("btcusdcperp")||me.includes("btc-usdc-perp")||me.includes("btcusdcperp")||le.baseAsset&&le.quoteAsset&&le.baseAsset.toLowerCase()==="btc"&&le.quoteAsset.toLowerCase()==="usdc"});he?(te=he.market_id||((W=he.id)==null?void 0:W.toString())||null,T(N,{success:!!te,message:`Found btc-usdc-perp market: ${te==null?void 0:te.substring(0,16)}...`,data:{marketId:te,moniker:he.moniker,symbol:he.symbol},timestamp:Date.now()})):T(N,{success:!1,message:"btc-usdc-perp market not found in available markets",error:"Please ensure btc-usdc-perp market is available",timestamp:Date.now()})}catch(Pe){T(N,{success:!1,message:"Failed to find btc-usdc-perp market",error:Pe.message,timestamp:Date.now()})}if(te)try{let Pe=null;if(we.length>0){const he=we[0];Pe=he.bucket_id||he.id||he.bucketId||null}if(!Pe)T(N,{success:!1,message:"Default bucket not available for balance validation",error:"No buckets found",timestamp:Date.now()});else{T(N,{success:!0,message:"Step 1: Loading default bucket balance and checking available margin...",timestamp:Date.now()});const he=1.01,le=100,ye=10500,me=ut(le.toString()),ve=he*ye/le;let Ie=0,He=0,Fe=0,je=0;try{if(!g.current)throw new Error("InfoClient not initialized");const pe=await g.current.getBucket(Pe);Fe=De(pe.available_margin||"0"),He=De(pe.dedicated_margin||"0"),je=De(pe.total_equity||"0"),Ie=Fe,T(N,{success:!0,message:"Step 1: Default bucket balance loaded",data:{availableMargin:Fe.toFixed(2),dedicatedMargin:He.toFixed(2),totalEquity:je.toFixed(2),requiredMargin:ve.toFixed(2),raw:pe},timestamp:Date.now()}),T(N,{success:!0,message:`Step 1: Validating sufficient available margin (required: ${ve.toFixed(2)} USDC, available: ${Fe.toFixed(2)} USDC)...`,timestamp:Date.now()});const Ce=Fe>=ve;if(T(N,{success:Ce,message:`Step 1: Margin validation ${Ce?"PASSED":"FAILED"}`,data:{availableMargin:Fe.toFixed(2),requiredMargin:ve.toFixed(2),marginDifference:(Fe-ve).toFixed(2),hasSufficientMargin:Ce,orderQuantity:`${he.toFixed(2)} BTC`,orderPrice:`${ye.toFixed(2)} USDC/BTC`,orderLeverage:le.toFixed(2),calculation:`(${he.toFixed(2)} BTC * ${ye.toFixed(2)} USDC/BTC) / ${le.toFixed(2)} = ${ve.toFixed(2)} USDC`},timestamp:Date.now()}),!Ce)throw T(N,{success:!1,message:`Step 1: Insufficient available margin. Required: ${ve.toFixed(2)} USDC, Available: ${Fe.toFixed(2)} USDC`,error:`Available margin (${Fe.toFixed(2)} USDC) is less than required margin (${ve.toFixed(2)} USDC)`,data:{availableMargin:Fe.toFixed(2),requiredMargin:ve.toFixed(2),shortfall:(ve-Fe).toFixed(2)},timestamp:Date.now()}),new Error(`Insufficient available margin: ${Fe.toFixed(2)} USDC available, ${ve.toFixed(2)} USDC required`);T(N,{success:!0,message:"Step 1: Sufficient margin available. Proceeding to place order...",data:{availableMargin:Fe.toFixed(2),requiredMargin:ve.toFixed(2),marginRemaining:(Fe-ve).toFixed(2)},timestamp:Date.now()})}catch(pe){throw T(N,{success:!1,message:"Step 1: Failed to load or validate bucket balance",error:pe.message,timestamp:Date.now()}),pe}T(N,{success:!0,message:`Step 2: Preparing to place order - Quantity: ${he.toFixed(2)} BTC, Leverage: ${le}x, Price: ${ye.toFixed(2)} USDC/BTC...`,timestamp:Date.now()}),T(N,{success:!0,message:"Step 2.1: Re-checking default bucket available margin before placing order...",timestamp:Date.now()});let Ae=0;try{if(!g.current)throw new Error("InfoClient not initialized");const pe=await g.current.getBucket(Pe);Ae=De(pe.available_margin||"0"),T(N,{success:!0,message:`Step 2.1: Current available margin: ${Ae.toFixed(2)} USDC`,data:{currentAvailableMargin:Ae.toFixed(2),requiredMargin:ve.toFixed(2),previousAvailableMargin:Fe.toFixed(2),raw:pe},timestamp:Date.now()});const Ce=Ae>=ve;if(T(N,{success:Ce,message:`Step 2.1: Margin check ${Ce?"PASSED":"FAILED"}`,data:{currentAvailableMargin:Ae.toFixed(2),requiredMargin:ve.toFixed(2),marginDifference:(Ae-ve).toFixed(2),stillHasSufficientMargin:Ce},timestamp:Date.now()}),!Ce)throw T(N,{success:!1,message:`Step 2.1: Insufficient available margin. Required: ${ve.toFixed(2)} USDC, Available: ${Ae.toFixed(2)} USDC`,error:`Available margin (${Ae.toFixed(2)} USDC) is less than required margin (${ve.toFixed(2)} USDC)`,data:{currentAvailableMargin:Ae.toFixed(2),requiredMargin:ve.toFixed(2),shortfall:(ve-Ae).toFixed(2)},timestamp:Date.now()}),new Error(`Insufficient available margin: ${Ae.toFixed(2)} USDC available, ${ve.toFixed(2)} USDC required`);T(N,{success:!0,message:"Step 2.1: Sufficient margin confirmed. Proceeding with order placement...",data:{currentAvailableMargin:Ae.toFixed(2),requiredMargin:ve.toFixed(2),marginRemaining:(Ae-ve).toFixed(2)},timestamp:Date.now()})}catch(pe){throw T(N,{success:!1,message:"Step 2.1: Failed to validate available margin before order placement",error:pe.message,timestamp:Date.now()}),pe}T(N,{success:!0,message:`Step 2.2: Placing order - Quantity: ${he.toFixed(2)} BTC, Leverage: ${le}x, Price: ${ye.toFixed(2)} USDC/BTC...`,timestamp:Date.now()});let We=null,ze=null;const ie={marketId:te,side:"buy",orderType:"LIMIT",price:ye,quantity:he,timeInForce:"GTC",leverage:me},Y={maxRetries:10,baseDelay:500,maxDelay:2e3,jitter:!0,multiplier:1.5};let V=0;try{We=await ym(Y,async()=>{if(V++,V>1&&T(N,{success:!0,message:`Step 2.2: Retrying order placement (attempt ${V}/${Y.maxRetries+1})...`,data:{attemptCount:V},timestamp:Date.now()}),!x.current)throw new Error("ExchangeClient not initialized");const pe=await x.current.placeOrder(ie),Ce=(pe==null?void 0:pe.order_id)||null;if(!pe||!Ce)throw new Error("Order placed but order_id not found in response");return pe},async pe=>{if(sv(pe)){T(N,{success:!1,message:`Step 2.2: Nonce error detected (attempt ${V}/${Y.maxRetries+1}): ${(pe==null?void 0:pe.message)||String(pe)}`,data:{error:(pe==null?void 0:pe.message)||String(pe),errorType:"nonce error",attemptCount:V,willRetry:V<=Y.maxRetries},timestamp:Date.now()});try{if(!x.current)throw new Error("ExchangeClient not initialized");await x.current.refreshNonceFromServer(),T(N,{success:!0,message:"Step 2.2: Refreshed nonce from server, will retry...",timestamp:Date.now()})}catch(Ke){T(N,{success:!1,message:"Step 2.2: Failed to refresh nonce from server",error:(Ke==null?void 0:Ke.message)||String(Ke),timestamp:Date.now()})}return!0}return T(N,{success:!1,message:"Step 2.2: Failed to place order (non-retryable error)",error:(pe==null?void 0:pe.message)||String(pe),data:{error:(pe==null?void 0:pe.message)||String(pe),isNonceError:!1},timestamp:Date.now()}),!1}),ze=(We==null?void 0:We.order_id)||null,T(N,{success:!!We&&!!ze,message:`Step 2.2: Order placed successfully${V>1?` (after ${V-1} retry${V>2?"ies":""})`:""}. Order ID: ${ze==null?void 0:ze.substring(0,16)}...`,data:{orderResult:We,orderId:ze,requestBody:ie,attemptCount:V},timestamp:Date.now()})}catch(pe){throw T(N,{success:!1,message:`Step 2.2: Failed to place order after ${V} attempt${V>1?"s":""}`,error:(pe==null?void 0:pe.message)||String(pe),data:{error:(pe==null?void 0:pe.message)||String(pe),attemptCount:V,maxRetriesReached:V>Y.maxRetries},timestamp:Date.now()}),pe}if(!We||!ze)throw new Error(`Failed to place order after ${V} attempts`);if(await new Promise(pe=>setTimeout(pe,1500)),ze){T(N,{success:!0,message:"Step 3: Validating pending order details...",timestamp:Date.now()});try{if(!g.current)throw new Error("InfoClient not initialized");const pe=await g.current.getOrder(ze);if(pe){const Ce=De(pe.price||"0"),Ke=De(pe.quantity||"0"),Be=De(pe.leverage||"0"),Ye=pe.side||"",tt=pe.market_id||"",Je=Math.abs(Ce-ye)<.01,kt=Math.abs(Ke-he)<.01,ot=Math.abs(Be-le)<.01,jt=tt===te,Ks=Ye.toUpperCase().includes("BUY")||Ye==="buy";T(N,{success:Je&&kt&&ot&&jt&&Ks,message:`Step 3: Order validation ${Je&&kt&&ot&&jt&&Ks?"PASSED":"FAILED"}`,data:{orderId:ze,expectedPrice:ye.toFixed(2),actualPrice:Ce.toFixed(2),priceValid:Je,expectedQuantity:`${he.toFixed(2)} BTC`,actualQuantity:`${Ke.toFixed(2)} BTC`,quantityValid:kt,expectedLeverage:le.toFixed(2),actualLeverage:Be.toFixed(2),leverageValid:ot,expectedMarketId:te,actualMarketId:tt,marketIdValid:jt,expectedSide:"buy",actualSide:Ye,sideValid:Ks,orderStatus:pe.status,rawOrder:pe},timestamp:Date.now()}),Je||T(N,{success:!1,message:`Order price mismatch: Expected ${ye.toFixed(2)}, got ${Ce.toFixed(2)}`,timestamp:Date.now()}),kt||T(N,{success:!1,message:`Order quantity mismatch: Expected ${he.toFixed(2)} BTC, got ${Ke.toFixed(2)} BTC`,timestamp:Date.now()}),ot||T(N,{success:!1,message:`Order leverage mismatch: Expected ${le.toFixed(2)}, got ${Be.toFixed(2)}`,timestamp:Date.now()}),jt||T(N,{success:!1,message:`Order market ID mismatch: Expected ${te}, got ${tt}`,timestamp:Date.now()}),Ks||T(N,{success:!1,message:`Order side mismatch: Expected buy, got ${Ye}`,timestamp:Date.now()})}else T(N,{success:!1,message:"Step 3: Failed to retrieve pending order",error:"Order not found",timestamp:Date.now()})}catch(pe){T(N,{success:!1,message:"Step 3: Failed to validate pending order",error:pe.message,timestamp:Date.now()})}}T(N,{success:!0,message:"Step 4: Loading default bucket USDC balance after placing order...",timestamp:Date.now()});let Te=0;try{if(!g.current)throw new Error("InfoClient not initialized");const pe=await g.current.getBucket(Pe);Te=De(pe.available_margin||"0"),T(N,{success:!0,message:`Step 4: Default bucket USDC balance after: ${Te.toFixed(2)} USDC`,data:{balance:Te,raw:pe},timestamp:Date.now()})}catch(pe){throw T(N,{success:!1,message:"Step 4: Failed to load bucket balance after order",error:pe.message,timestamp:Date.now()}),pe}T(N,{success:!0,message:"Step 5: Validating bucket balance change...",timestamp:Date.now()});const it=Ae-Te,Ve=ve,St=Math.abs(it-Ve)<.01;T(N,{success:St,message:`Step 5: Bucket balance validation ${St?"PASSED":"FAILED"}`,data:{availableMarginBeforeOrder:Ae.toFixed(2),availableMarginAfterOrder:Te.toFixed(2),marginReserved:it.toFixed(2),expectedMarginReserved:Ve.toFixed(2),marginReservedValid:St,orderQuantity:`${he.toFixed(2)} BTC`,orderPrice:`${ye.toFixed(2)} USDC/BTC`,orderLeverage:le.toFixed(2),calculation:`(${he.toFixed(2)} BTC * ${ye.toFixed(2)} USDC/BTC) / ${le.toFixed(2)} = ${Ve.toFixed(2)} USDC`,note:"Using available margin from Step 2.1 as baseline (most recent before order placement)"},timestamp:Date.now()}),St||T(N,{success:!1,message:`Bucket balance change mismatch: Expected margin reserved ${Ve.toFixed(2)} USDC, actual change ${it.toFixed(2)} USDC`,error:`Expected available margin to decrease by ${Ve.toFixed(2)} USDC, but decreased by ${it.toFixed(2)} USDC`,timestamp:Date.now()}),T(N,{success:St,message:`Place order validation test ${St?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{orderId:ze,marketId:te,orderQuantity:`${he.toFixed(2)} BTC`,orderLeverage:`${le}x`,orderPrice:`${ye.toFixed(2)} USDC`,availableMarginBeforeOrder:`${Ae.toFixed(2)} USDC`,availableMarginAfterOrder:`${Te.toFixed(2)} USDC`,marginReserved:`${it.toFixed(2)} USDC`,expectedMarginReserved:`${Ve.toFixed(2)} USDC`,validationPassed:St},timestamp:Date.now()})}}catch(Pe){T(N,{success:!1,message:"Place order validation test failed",error:Pe.message,timestamp:Date.now()})}if(de){const he=ut("1"),le={marketId:H,side:"buy",orderType:"LIMIT",price:40010.8778,quantity:.01,timeInForce:"GTC",leverage:he};T(N,{success:!0,message:`Testing placeOrder() (submit order) for market ${de}...`,data:{requestBody:le,endpoint:"POST /clob/v1/order",note:"Price and quantity are decimal numbers, converted to satoshi strings in buildOrderPayload(). Leverage is already in satoshi format.",leverage:{decimal:1,satoshi:he}},timestamp:Date.now()});try{const ye=await x.current.placeOrder(le);ye?(J=ye.order_id||ye.orderId||ye.id||null,J?T(N,{success:!0,message:`placeOrder() - POST /clob/v1/order executed successfully. Order ID: ${J.substring(0,16)}...`,data:{orderResult:ye,orderId:J,requestBody:le,endpoint:"POST /clob/v1/order"},timestamp:Date.now()}):T(N,{success:!0,message:"placeOrder() - POST /clob/v1/order executed successfully (orderId not found in response)",data:{orderResult:ye,requestBody:le,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})):T(N,{success:!1,message:"placeOrder() - POST /clob/v1/order returned empty response",data:{requestBody:le,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}catch(ye){T(N,{success:!1,message:"placeOrder() - POST /clob/v1/order failed",error:ye.message,data:{requestBody:le,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}}else T(N,{success:!0,message:"Skipping placeOrder() test: No market ID available",timestamp:Date.now()});if(de&&J){T(N,{success:!0,message:`Testing cancelOrder() for order ${J.substring(0,16)}...`,timestamp:Date.now()});try{const Pe=await x.current.cancelOrder({orderId:J,marketId:H});T(N,{success:!!Pe,message:"cancelOrder() - POST /router/v1/tx executed successfully",data:Pe,timestamp:Date.now()})}catch(Pe){T(N,{success:!1,message:"cancelOrder() - POST /router/v1/tx failed",error:Pe.message,timestamp:Date.now()})}}else de?J||T(N,{success:!0,message:"Skipping cancelOrder() test: No order ID available (placeOrder may have failed or orderId not in response)",timestamp:Date.now()}):T(N,{success:!0,message:"Skipping cancelOrder() test: No market ID available",timestamp:Date.now()});if(de){T(N,{success:!0,message:`Testing closePosition() for market ${de}...`,timestamp:Date.now()});try{const Pe=await x.current.closePosition({marketId:H});T(N,{success:!!Pe,message:"closePosition() - POST /router/v1/tx executed successfully",data:Pe,timestamp:Date.now()})}catch(Pe){T(N,{success:!1,message:"closePosition() - POST /router/v1/tx failed (may not have open position)",error:Pe.message,timestamp:Date.now()})}}else T(N,{success:!0,message:"Skipping closePosition() test: No market ID available",timestamp:Date.now()});T(N,{success:!0,message:"Fetching buckets for bucket operation tests...",timestamp:Date.now()});let ge=[];try{g.current||(g.current=new an({baseURL:y.current})),r&&g.current&&g.current.setSessionToken(r);const Pe=await g.current.getBuckets(Q);ge=Array.isArray(Pe)?Pe:[],T(N,{success:!0,message:`Found ${ge.length} bucket(s) for testing`,data:{bucketCount:ge.length,buckets:ge.slice(0,3).map(he=>({bucketId:he.bucket_id||he.id||he.bucketId,availableMargin:he.available_margin||he.availableMargin}))},timestamp:Date.now()})}catch(Pe){T(N,{success:!1,message:"Failed to fetch buckets for testing",error:Pe.message,timestamp:Date.now()})}if(ge.length>0){const Pe=ge[0],he=Pe.bucket_id||Pe.id||Pe.bucketId;if(he){T(N,{success:!0,message:"Testing extractToBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const le=await x.current.extractToBucket({bucketId:he,assetId:"USDC",amount:"100000000"});T(N,{success:!!le,message:"extractToBucket() - POST /bank/v1/extract-to-bucket executed successfully",data:le,timestamp:Date.now()})}catch(le){T(N,{success:!1,message:"extractToBucket() - POST /bank/v1/extract-to-bucket failed",error:le.message,timestamp:Date.now()})}}else T(N,{success:!0,message:"Skipping extractToBucket() test: No valid bucket ID found",timestamp:Date.now()})}else T(N,{success:!0,message:"Skipping extractToBucket() test: No buckets available",timestamp:Date.now()});if(ge.length>0){const Pe=ge[0],he=Pe.bucket_id||Pe.id||Pe.bucketId;if(he){T(N,{success:!0,message:"Testing bucket to spot wallet transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{T(N,{success:!0,message:"Step 1: Loading bucket USDC balance before transfer...",timestamp:Date.now()});let le=0;try{const Y=await g.current.getBucket(he);le=De(Y.available_margin||"0"),T(N,{success:!0,message:`Step 1: Bucket USDC balance before: ${le.toFixed(2)} USDC`,data:{balance:le,raw:Y},timestamp:Date.now()})}catch(Y){throw T(N,{success:!1,message:"Step 1: Failed to load bucket balance",error:Y.message,timestamp:Date.now()}),Y}T(N,{success:!0,message:"Step 2: Loading spot wallet USDC balance before transfer...",timestamp:Date.now()});let ye=0;try{const Y=await g.current.getBalanceDecimal(Q,"USDC");ye=De(Y.available_balance||"0"),T(N,{success:!0,message:`Step 2: Spot wallet USDC balance before: ${ye.toFixed(2)} USDC`,data:{balance:ye,raw:Y},timestamp:Date.now()})}catch(Y){throw T(N,{success:!1,message:"Step 2: Failed to load spot wallet balance",error:Y.message,timestamp:Date.now()}),Y}const me=10,ve=ut(me.toString());T(N,{success:!0,message:`Step 3: Transferring ${me.toFixed(2)} USDC (${ve} satoshi) from bucket to spot wallet...`,timestamp:Date.now()});try{const Y=await x.current.withdrawFromBucket({bucketId:he,assetId:"USDC",amount:ve});T(N,{success:!!Y,message:"Step 3: Transfer executed successfully",data:Y,timestamp:Date.now()})}catch(Y){throw T(N,{success:!1,message:"Step 3: Transfer failed",error:Y.message,timestamp:Date.now()}),Y}await new Promise(Y=>setTimeout(Y,1e3)),T(N,{success:!0,message:"Step 4: Loading bucket USDC balance after transfer...",timestamp:Date.now()});let Ie=0;try{const Y=await g.current.getBucket(he);Ie=De(Y.available_margin||"0"),T(N,{success:!0,message:`Step 4: Bucket USDC balance after: ${Ie.toFixed(2)} USDC`,data:{balance:Ie,raw:Y},timestamp:Date.now()})}catch(Y){throw T(N,{success:!1,message:"Step 4: Failed to load bucket balance after transfer",error:Y.message,timestamp:Date.now()}),Y}T(N,{success:!0,message:"Step 5: Loading spot wallet USDC balance after transfer...",timestamp:Date.now()});let He=0;try{const Y=await g.current.getBalanceDecimal(Q,"USDC");He=De(Y.available_balance||"0"),T(N,{success:!0,message:`Step 5: Spot wallet USDC balance after: ${He.toFixed(2)} USDC`,data:{balance:He,raw:Y},timestamp:Date.now()})}catch(Y){throw T(N,{success:!1,message:"Step 5: Failed to load spot wallet balance after transfer",error:Y.message,timestamp:Date.now()}),Y}T(N,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Fe=le-Ie,je=He-ye,Ae=me,We=me,ze=Math.abs(Fe-Ae)<.01,ie=Math.abs(je-We)<.01;T(N,{success:ze&&ie,message:`Step 6: Validation ${ze&&ie?"PASSED":"FAILED"}`,data:{bucketBalanceBefore:le.toFixed(2),bucketBalanceAfter:Ie.toFixed(2),bucketBalanceDecrease:Fe.toFixed(2),expectedBucketDecrease:Ae.toFixed(2),bucketDecreaseValid:ze,walletBalanceBefore:ye.toFixed(2),walletBalanceAfter:He.toFixed(2),walletBalanceIncrease:je.toFixed(2),expectedWalletIncrease:We.toFixed(2),walletIncreaseValid:ie,transferAmount:me.toFixed(2)},timestamp:Date.now()}),ze||T(N,{success:!1,message:`Validation failed: Bucket balance decrease (${Fe.toFixed(2)}) does not match expected (${Ae.toFixed(2)})`,error:`Expected bucket to decrease by ${Ae.toFixed(2)} USDC, but decreased by ${Fe.toFixed(2)} USDC`,timestamp:Date.now()}),ie||T(N,{success:!1,message:`Validation failed: Wallet balance increase (${je.toFixed(2)}) does not match expected (${We.toFixed(2)})`,error:`Expected wallet to increase by ${We.toFixed(2)} USDC, but increased by ${je.toFixed(2)} USDC`,timestamp:Date.now()}),T(N,{success:ze&&ie,message:`Bucket to spot wallet transfer test ${ze&&ie?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${me.toFixed(2)} USDC`,bucketBalanceBefore:`${le.toFixed(2)} USDC`,bucketBalanceAfter:`${Ie.toFixed(2)} USDC`,bucketBalanceChange:`${Fe.toFixed(2)} USDC`,walletBalanceBefore:`${ye.toFixed(2)} USDC`,walletBalanceAfter:`${He.toFixed(2)} USDC`,walletBalanceChange:`${je.toFixed(2)} USDC`,validationPassed:ze&&ie},timestamp:Date.now()})}catch(le){T(N,{success:!1,message:"Bucket to spot wallet transfer test failed",error:le.message,timestamp:Date.now()})}}else T(N,{success:!0,message:"Skipping bucket to spot wallet transfer test: No valid bucket ID found",timestamp:Date.now()})}else T(N,{success:!0,message:"Skipping bucket to spot wallet transfer test: No buckets available",timestamp:Date.now()});if(ge.length>=2){const Pe=ge[0],he=ge[1],le=Pe.bucket_id||Pe.id||Pe.bucketId,ye=he.bucket_id||he.id||he.bucketId;if(le&&ye){T(N,{success:!0,message:"Testing bucket to bucket transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{T(N,{success:!0,message:"Step 1: Loading source bucket USDC balance before transfer...",timestamp:Date.now()});let me=0;try{const Te=await g.current.getBucket(le);me=De(Te.available_margin||"0"),T(N,{success:!0,message:`Step 1: Source bucket USDC balance before: ${me.toFixed(2)} USDC`,data:{balance:me,raw:Te},timestamp:Date.now()})}catch(Te){throw T(N,{success:!1,message:"Step 1: Failed to load source bucket balance",error:Te.message,timestamp:Date.now()}),Te}T(N,{success:!0,message:"Step 2: Loading target bucket USDC balance before transfer...",timestamp:Date.now()});let ve=0;try{const Te=await g.current.getBucket(ye);ve=De(Te.available_margin||"0"),T(N,{success:!0,message:`Step 2: Target bucket USDC balance before: ${ve.toFixed(2)} USDC`,data:{balance:ve,raw:Te},timestamp:Date.now()})}catch(Te){throw T(N,{success:!1,message:"Step 2: Failed to load target bucket balance",error:Te.message,timestamp:Date.now()}),Te}const Ie=10,He=ut(Ie.toString());T(N,{success:!0,message:`Step 3: Transferring ${Ie.toFixed(2)} USDC (${He} satoshi) from source bucket to target bucket...`,timestamp:Date.now()});try{const Te=await x.current.bucketTransfer({fromBucketId:le,toBucketId:ye,assetId:"USDC",amount:He});T(N,{success:!!Te,message:"Step 3: Transfer executed successfully",data:Te,timestamp:Date.now()})}catch(Te){throw T(N,{success:!1,message:"Step 3: Transfer failed",error:Te.message,timestamp:Date.now()}),Te}await new Promise(Te=>setTimeout(Te,1e3)),T(N,{success:!0,message:"Step 4: Loading source bucket USDC balance after transfer...",timestamp:Date.now()});let Fe=0;try{const Te=await g.current.getBucket(le);Fe=De(Te.available_margin||"0"),T(N,{success:!0,message:`Step 4: Source bucket USDC balance after: ${Fe.toFixed(2)} USDC`,data:{balance:Fe,raw:Te},timestamp:Date.now()})}catch(Te){throw T(N,{success:!1,message:"Step 4: Failed to load source bucket balance after transfer",error:Te.message,timestamp:Date.now()}),Te}T(N,{success:!0,message:"Step 5: Loading target bucket USDC balance after transfer...",timestamp:Date.now()});let je=0;try{const Te=await g.current.getBucket(ye);je=De(Te.available_margin||"0"),T(N,{success:!0,message:`Step 5: Target bucket USDC balance after: ${je.toFixed(2)} USDC`,data:{balance:je,raw:Te},timestamp:Date.now()})}catch(Te){throw T(N,{success:!1,message:"Step 5: Failed to load target bucket balance after transfer",error:Te.message,timestamp:Date.now()}),Te}T(N,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Ae=me-Fe,We=je-ve,ze=Ie,ie=Ie,Y=Math.abs(Ae-ze)<.01,V=Math.abs(We-ie)<.01;T(N,{success:Y&&V,message:`Step 6: Validation ${Y&&V?"PASSED":"FAILED"}`,data:{sourceBucketBalanceBefore:me.toFixed(2),sourceBucketBalanceAfter:Fe.toFixed(2),sourceBucketBalanceDecrease:Ae.toFixed(2),expectedSourceDecrease:ze.toFixed(2),sourceDecreaseValid:Y,targetBucketBalanceBefore:ve.toFixed(2),targetBucketBalanceAfter:je.toFixed(2),targetBucketBalanceIncrease:We.toFixed(2),expectedTargetIncrease:ie.toFixed(2),targetIncreaseValid:V,transferAmount:Ie.toFixed(2)},timestamp:Date.now()}),Y||T(N,{success:!1,message:`Validation failed: Source bucket balance decrease (${Ae.toFixed(2)}) does not match expected (${ze.toFixed(2)})`,error:`Expected source bucket to decrease by ${ze.toFixed(2)} USDC, but decreased by ${Ae.toFixed(2)} USDC`,timestamp:Date.now()}),V||T(N,{success:!1,message:`Validation failed: Target bucket balance increase (${We.toFixed(2)}) does not match expected (${ie.toFixed(2)})`,error:`Expected target bucket to increase by ${ie.toFixed(2)} USDC, but increased by ${We.toFixed(2)} USDC`,timestamp:Date.now()}),T(N,{success:Y&&V,message:`Bucket to bucket transfer test ${Y&&V?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Ie.toFixed(2)} USDC`,sourceBucketBalanceBefore:`${me.toFixed(2)} USDC`,sourceBucketBalanceAfter:`${Fe.toFixed(2)} USDC`,sourceBucketBalanceChange:`${Ae.toFixed(2)} USDC`,targetBucketBalanceBefore:`${ve.toFixed(2)} USDC`,targetBucketBalanceAfter:`${je.toFixed(2)} USDC`,targetBucketBalanceChange:`${We.toFixed(2)} USDC`,validationPassed:Y&&V},timestamp:Date.now()})}catch(me){T(N,{success:!1,message:"Bucket to bucket transfer test failed",error:me.message,timestamp:Date.now()})}}else T(N,{success:!0,message:"Skipping bucket to bucket transfer test: Invalid bucket IDs",timestamp:Date.now()})}else T(N,{success:!0,message:"Skipping bucket to bucket transfer test: Need at least 2 buckets (found "+ge.length+")",timestamp:Date.now()});if(ge.length>0){const Pe=ge[0],he=Pe.bucket_id||Pe.id||Pe.bucketId;if(he){T(N,{success:!0,message:"Testing spot wallet to bucket default transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{T(N,{success:!0,message:"Step 1: Loading spot wallet USDC balance before transfer...",timestamp:Date.now()});let le=0;try{const Y=await g.current.getBalanceDecimal(Q,"USDC");le=De(Y.available_balance||"0"),T(N,{success:!0,message:`Step 1: Spot wallet USDC balance before: ${le.toFixed(2)} USDC`,data:{balance:le,raw:Y},timestamp:Date.now()})}catch(Y){throw T(N,{success:!1,message:"Step 1: Failed to load spot wallet balance",error:Y.message,timestamp:Date.now()}),Y}T(N,{success:!0,message:"Step 2: Loading default bucket USDC balance before transfer...",timestamp:Date.now()});let ye=0;try{const Y=await g.current.getBucket(he);ye=De(Y.available_margin||"0"),T(N,{success:!0,message:`Step 2: Default bucket USDC balance before: ${ye.toFixed(2)} USDC`,data:{balance:ye,raw:Y},timestamp:Date.now()})}catch(Y){throw T(N,{success:!1,message:"Step 2: Failed to load bucket balance",error:Y.message,timestamp:Date.now()}),Y}const me=10,ve=ut(me.toString());T(N,{success:!0,message:`Step 3: Transferring ${me.toFixed(2)} USDC (${ve} satoshi) from spot wallet to default bucket...`,timestamp:Date.now()});try{const Y=await x.current.extractToBucket({bucketId:he,assetId:"USDC",amount:ve});T(N,{success:!!Y,message:"Step 3: Transfer executed successfully",data:Y,timestamp:Date.now()})}catch(Y){throw T(N,{success:!1,message:"Step 3: Transfer failed",error:Y.message,timestamp:Date.now()}),Y}await new Promise(Y=>setTimeout(Y,1e3)),T(N,{success:!0,message:"Step 4: Loading spot wallet USDC balance after transfer...",timestamp:Date.now()});let Ie=0;try{const Y=await g.current.getBalanceDecimal(Q,"USDC");Ie=De(Y.available_balance||"0"),T(N,{success:!0,message:`Step 4: Spot wallet USDC balance after: ${Ie.toFixed(2)} USDC`,data:{balance:Ie,raw:Y},timestamp:Date.now()})}catch(Y){throw T(N,{success:!1,message:"Step 4: Failed to load spot wallet balance after transfer",error:Y.message,timestamp:Date.now()}),Y}T(N,{success:!0,message:"Step 5: Loading default bucket USDC balance after transfer...",timestamp:Date.now()});let He=0;try{const Y=await g.current.getBucket(he);He=De(Y.available_margin||"0"),T(N,{success:!0,message:`Step 5: Default bucket USDC balance after: ${He.toFixed(2)} USDC`,data:{balance:He,raw:Y},timestamp:Date.now()})}catch(Y){throw T(N,{success:!1,message:"Step 5: Failed to load bucket balance after transfer",error:Y.message,timestamp:Date.now()}),Y}T(N,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Fe=le-Ie,je=He-ye,Ae=me,We=me,ze=Math.abs(Fe-Ae)<.01,ie=Math.abs(je-We)<.01;T(N,{success:ze&&ie,message:`Step 6: Validation ${ze&&ie?"PASSED":"FAILED"}`,data:{walletBalanceBefore:le.toFixed(2),walletBalanceAfter:Ie.toFixed(2),walletBalanceDecrease:Fe.toFixed(2),expectedWalletDecrease:Ae.toFixed(2),walletDecreaseValid:ze,bucketBalanceBefore:ye.toFixed(2),bucketBalanceAfter:He.toFixed(2),bucketBalanceIncrease:je.toFixed(2),expectedBucketIncrease:We.toFixed(2),bucketIncreaseValid:ie,transferAmount:me.toFixed(2)},timestamp:Date.now()}),ze||T(N,{success:!1,message:`Validation failed: Wallet balance decrease (${Fe.toFixed(2)}) does not match expected (${Ae.toFixed(2)})`,error:`Expected wallet to decrease by ${Ae.toFixed(2)} USDC, but decreased by ${Fe.toFixed(2)} USDC`,timestamp:Date.now()}),ie||T(N,{success:!1,message:`Validation failed: Bucket balance increase (${je.toFixed(2)}) does not match expected (${We.toFixed(2)})`,error:`Expected bucket to increase by ${We.toFixed(2)} USDC, but increased by ${je.toFixed(2)} USDC`,timestamp:Date.now()}),T(N,{success:ze&&ie,message:`Spot wallet to bucket transfer test ${ze&&ie?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${me.toFixed(2)} USDC`,walletBalanceBefore:`${le.toFixed(2)} USDC`,walletBalanceAfter:`${Ie.toFixed(2)} USDC`,walletBalanceChange:`${Fe.toFixed(2)} USDC`,bucketBalanceBefore:`${ye.toFixed(2)} USDC`,bucketBalanceAfter:`${He.toFixed(2)} USDC`,bucketBalanceChange:`${je.toFixed(2)} USDC`,validationPassed:ze&&ie},timestamp:Date.now()})}catch(le){T(N,{success:!1,message:"Spot wallet to bucket transfer test failed",error:le.message,timestamp:Date.now()})}}else T(N,{success:!0,message:"Skipping spot wallet to bucket transfer test: No valid default bucket ID found",timestamp:Date.now()})}else T(N,{success:!0,message:"Skipping spot wallet to bucket transfer test: No buckets available",timestamp:Date.now()});T(N,{success:!0,message:"ExchangeClient tests completed",data:{walletAddress:Q,marketId:H,sessionToken:r?"present":"not set",authToken:o?"present":"not set",methodsTested:["placeOrder","cancelOrder","closePosition","extractToBucket","withdrawFromBucket","bucketTransfer"]},timestamp:Date.now()})}catch(Q){T(N,{success:!1,message:"ExchangeClient test error",error:Q.message,timestamp:Date.now()})}},Ne=async()=>{if(!f){p(!0),X(),Oe.info("Running tests",{description:"Starting comprehensive SDK test suite..."});try{q(),await se(),await Z("Authentication"),await G(),_&&await ae()}catch(N){T("General",{success:!1,message:"Test suite error",error:N.message,timestamp:Date.now()}),Oe.error("Test suite error",{description:N.message||"An unexpected error occurred during testing.",duration:6e3})}finally{p(!1)}}};return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"SDK QA"}),h.jsx("p",{children:"Comprehensive test suite for all SDK APIs"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"sdk-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:N=>e(N.target.value),className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:N=>{const de=N.target.value;de&&s(de)},className:"sdk-test-config-select",children:v.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),v.map(N=>{var _e;const de=N.market_id??((_e=N.market_id)==null?void 0:_e.toString())??"",be=N.moniker?N.moniker:N.symbol?N.symbol:N.baseAsset&&N.quoteAsset?`${N.baseAsset}-${N.quoteAsset}`:`Market ID: ${de}`,re=N.active?" [ACTIVE]":"";return h.jsxs("option",{value:de,children:[be," - ID: ",de,re]},de)})]})}),v.length>0&&h.jsx("small",{className:`sdk-test-config-hint ${n===z?"info":"warning"}`,children:n===z?` Auto-selected default market (ID: ${z==null?void 0:z.substring(0,16)}...)`:` Manual selection (ID: ${n==null?void 0:n.substring(0,16)}...)`})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic (for ExchangeClient):",h.jsx("input",{type:"text",value:_||"",onChange:N=>U(N.target.value),placeholder:"Optional",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Session Token (for authenticated InfoClient):",h.jsx("input",{type:"text",value:r,onChange:N=>i(N.target.value),disabled:!!(r&&r.trim()!==""),placeholder:"Optional",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Auth Token:",h.jsx("input",{type:"text",value:o,onChange:N=>a(N.target.value),disabled:!!(M&&M.trim()!==""),placeholder:M?"Auto-filled from onboarding":'Optional - Use "Onboard" button to generate',className:"sdk-test-config-input"}),M&&h.jsx("small",{className:"sdk-test-config-hint success",children:" Auto-filled from onboarding"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:P||"",disabled:!!(_&&_.trim()!==""),onChange:()=>{},placeholder:"automatic (from mnemonic)",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Device ID:",h.jsx("input",{type:"text",value:l,onChange:N=>c(N.target.value),className:"sdk-test-config-input"})]})}),h.jsxs("div",{className:"control-box",children:[h.jsx(cF,{isRunning:f,onClick:Ne}),h.jsx(uF,{mnemonic:_||"",baseURL:t,onboardLoading:E,isRunning:f,onOnboard:(N,de)=>{N&&N.trim()!==""?O(N,de):Oe.warning("Mnemonic required",{description:"Please enter a mnemonic first to perform onboard."})}}),h.jsx(dF,{isRunning:f,onClick:X})]})]}),M&&h.jsxs("span",{className:"sdk-test-status success",children:[" Auth Token: ",M.substring(0,20),"..."]}),I&&h.jsxs("span",{className:"sdk-test-status error",children:[" Onboard Error: ",I,h.jsx(hF,{onClick:j})]})]}),h.jsx("div",{className:"sdk-test-results",children:Object.entries(u).map(([N,de])=>{const be=m.has(N);return h.jsxs("div",{className:"sdk-test-section",children:[h.jsx(pF,{sectionName:N,isExpanded:be,onToggle:()=>ne(N)}),be&&h.jsx("div",{className:"sdk-test-section-content",children:de.results.map((re,_e)=>h.jsx(fF,{result:re},_e))})]},N)})}),Object.keys(u).length===0&&!f&&h.jsx("div",{className:"sdk-test-empty-state",children:'Click "Run All Tests" to start testing the SDK APIs'})]})}const gF=({isConnected:t,isConnecting:e,onConnect:n,onDisconnect:s})=>h.jsxs("div",{className:"config-actions",children:[h.jsx("button",{className:"nav-button",onClick:n,disabled:t||e,style:{backgroundColor:t?"#ccc":e?"#ffc107":"#28a745",color:"white",cursor:t||e?"not-allowed":"pointer"},children:e?" Connecting...":t?" Connected":"Connect"}),e&&h.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Connection in progress... Check messages below for details"}),h.jsx("button",{className:"nav-button",onClick:s,disabled:!t,style:{backgroundColor:t?"#dc3545":"#ccc",cursor:t?"pointer":"not-allowed"},children:"Disconnect"})]}),bF=({onClick:t})=>h.jsx("button",{onClick:t,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),pn=({channel:t,isSubscribed:e,isConnected:n,disabled:s=!1,subscribeLabel:r,unsubscribeLabel:i,onSubscribe:o,onUnsubscribe:a,variant:l="public"})=>{const c=!n||s,u=e?"#dc3545":l==="private"?"#28a745":"#007bff";return h.jsx("button",{onClick:e?a:o,disabled:c,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:u,color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer"},children:e?i:r})},xF=({steps:t})=>t.length===0?null:h.jsxs("div",{className:"connection-steps-container",children:[h.jsx("h2",{children:"Connection Steps"}),h.jsx("div",{className:"connection-steps-list",children:t.map((e,n)=>h.jsxs("div",{className:`connection-step-item ${e.status==="error"?"error":e.status==="success"?"success":e.status==="in-progress"?"in-progress":"pending"}`,children:[h.jsx("span",{className:"connection-step-icon",children:e.status==="error"?"":e.status==="success"?"":e.status==="in-progress"?"":""}),h.jsxs("div",{className:"connection-step-content",children:[h.jsxs("div",{className:"connection-step-title",children:["Step ",e.step,": ",e.message]}),e.details&&h.jsx("div",{className:"connection-step-details",children:JSON.stringify(e.details,null,2)}),h.jsx("div",{className:"connection-step-timestamp",children:new Date(e.timestamp).toLocaleTimeString()})]})]},n))})]}),yF=({wsURL:t,onWsURLChange:e,marketId:n,onMarketIdChange:s,markets:r,symbol:i,onSymbolChange:o,klineInterval:a,onKlineIntervalChange:l,twapWindowSize:c,onTwapWindowSizeChange:u,authToken:d,onAuthTokenChange:f,walletAddress:p,deviceID:m,onDeviceIDChange:b,isConnected:x,isConnecting:g,onConnect:y,onDisconnect:S})=>h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["WebSocket URL:",h.jsx("input",{type:"text",value:t,onChange:w=>e(w.target.value),className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:w=>s(w.target.value),className:"config-select",children:r.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),r.map(w=>{var P;const v=w.market_id??((P=w.market_id)==null?void 0:P.toString())??"",C=w.moniker?w.moniker:w.symbol?w.symbol:w.baseAsset&&w.quoteAsset?`${w.baseAsset}-${w.quoteAsset}`:`Market ID: ${v}`,_=w.active?" [ACTIVE]":"";return h.jsxs("option",{value:v,children:[C," - ID: ",v,_]},v)})]})})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Symbol (for funding_rate, deviation, index_price, mark_price, price_feed, twap):",h.jsx("input",{type:"text",value:i,onChange:w=>o(w.target.value),placeholder:"e.g., BTC/USDT or BTC/USDC",className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Kline Interval:",h.jsxs("select",{value:a,onChange:w=>l(w.target.value),className:"config-select",children:[h.jsx("option",{value:"1m",children:"1 minute"}),h.jsx("option",{value:"5m",children:"5 minutes"}),h.jsx("option",{value:"15m",children:"15 minutes"}),h.jsx("option",{value:"1h",children:"1 hour"}),h.jsx("option",{value:"4h",children:"4 hours"}),h.jsx("option",{value:"1d",children:"1 day"})]})]})}),h.jsx("div",{children:h.jsxs("label",{children:["TWAP Window Size (seconds):",h.jsx("input",{type:"number",value:c,onChange:w=>u(w.target.value),placeholder:"e.g., 300 for 5 minutes",min:"1",className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Auth Token (for private channels):",h.jsx("input",{type:"text",value:d,onChange:w=>f(w.target.value),placeholder:"Required for user_updates (auto-filled from SDK Test Page)",className:"config-input"}),d&&h.jsx("small",{className:"config-hint",children:" Auto-filled from SDK Test Page"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:p||"",disabled:!0,placeholder:"Auto-filled from useOnboard hook",className:`config-input-disabled ${p?"has-value":""}`}),p&&h.jsx("small",{className:"config-hint",children:" Auto-filled from useOnboard hook"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Device ID:",h.jsx("input",{type:"text",value:m,onChange:w=>b(w.target.value),className:"config-input"})]})})]}),h.jsx(gF,{isConnected:x,isConnecting:g,onConnect:y,onDisconnect:S})]}),wF=({data:t})=>h.jsxs("div",{className:"funding-rate-details",children:[h.jsx("strong",{className:"funding-rate-title",children:"Funding Rate Details:"}),h.jsxs("div",{className:"funding-rate-grid",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Symbol:"})," ",t.symbol??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Rate:"})," ",t.funding_rate?parseFloat(String(t.funding_rate)).toFixed(6):"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",t.mark_price??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Index Price:"})," ",t.index_price??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Premium Rate:"})," ",t.premium_rate??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"EMA Funding Rate:"})," ",t.ema_funding_rate??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Next Funding Time:"})," ",t.next_funding_time_unix?new Date(t.next_funding_time_unix*1e3).toLocaleString():"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Interval:"})," ",t.funding_interval_seconds?`${t.funding_interval_seconds}s`:"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Valid:"})," ",t.is_valid!==void 0?t.is_valid?"Yes":"No":"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Stale:"})," ",h.jsx("span",{className:`funding-rate-stale ${t.is_stale?"":"valid"}`,children:t.is_stale!==void 0?t.is_stale?"Yes":"No":"N/A"})]}),t.option_type&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Option Type:"})," ",t.option_type]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Strike Price:"})," ",t.strike_price??"N/A"]})]})]})]}),vF=({positions:t})=>!t||t.length===0?null:h.jsxs("div",{className:"positions-container",children:[h.jsxs("strong",{className:"positions-title",children:["Positions (",t.length,"):"]}),h.jsx("div",{className:"positions-grid",children:t.map((e,n)=>{const s=e.size||0,r=s>=0?"LONG":"SHORT";return h.jsxs("div",{className:"position-card",children:[h.jsx("div",{className:"position-symbol",children:e.symbol||`Market ${e.marketId||e.market_id||"N/A"}`}),h.jsxs("div",{className:"position-details",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Side:"})," ",h.jsx("span",{className:r==="LONG"?"position-side-long":"position-side-short",children:r})]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Size:"})," ",Math.abs(s).toFixed(8)]}),e.entryPrice!==void 0||e.entry_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Entry Price:"})," ",(e.entryPrice||e.entry_price||0).toFixed(8)]}):null,e.markPrice!==void 0||e.mark_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",(e.markPrice||e.mark_price||0).toFixed(8)]}):null,e.liquidationPrice!==void 0||e.liquidation_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Liquidation Price:"})," ",(e.liquidationPrice||e.liquidation_price||0).toFixed(8)]}):null,e.unrealizedPnL!==void 0||e.unrealized_pnl!==void 0||e.pnl!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Unrealized PnL:"})," ",h.jsx("span",{className:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0)>=0?"position-pnl-positive":"position-pnl-negative",children:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0).toFixed(8)})]}):null,e.leverage!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Leverage:"})," ",e.leverage,"x"]}):null,e.margin!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Margin:"})," ",e.margin.toFixed(8)]}):null,e.marginMode!==void 0||e.margin_mode!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Margin Mode:"})," ",e.marginMode||e.margin_mode||"N/A"]}):null]})]},n)})})]}),SF=({message:t})=>{const{channel:e,data:n,type:s,step:r,timestamp:i}=t,o=e==="funding_rate"&&typeof n=="object"&&n!==null,a=e==="user_updates"&&typeof n=="object"&&n!==null&&Array.isArray(n.positions)&&n.positions.length>0,l=o||a;return h.jsx("div",{className:`message-item ${s}`,children:h.jsx("div",{className:"message-header",children:h.jsxs("div",{className:"message-content",children:[h.jsxs("div",{className:"message-title",children:[h.jsxs("span",{children:["[",e,"]"]}),r&&h.jsxs("span",{className:"message-step",children:["(",r,")"]}),h.jsx("span",{children:new Date(i).toLocaleTimeString()})]}),o&&h.jsx(wF,{data:n}),a&&h.jsx(vF,{positions:n.positions}),!l&&h.jsx("div",{className:"message-body",children:typeof n=="string"?n:JSON.stringify(n,null,2)}),typeof n!="string"&&h.jsxs("details",{children:[h.jsx("summary",{className:"raw-data-summary",children:"View Raw Data"}),h.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(n,null,2)})]})]})})})},kF=({messages:t,isPrivate:e=!1,emptyMessage:n})=>{const s=e?"No messages yet. Connect with auth token and subscribe to user updates.":"No messages yet. Connect and subscribe to channels to see updates.";return h.jsx("div",{className:`messages-container ${e?"private":"public"}`,children:t.length===0?h.jsx("div",{className:`messages-empty ${e?"private":""}`,children:n||s}):t.map(r=>h.jsx(SF,{message:r},r.id))})},T2=({title:t,isPrivate:e=!1,messages:n,onClearMessages:s,children:r,emptyMessage:i})=>h.jsxs("div",{className:"channel-section",children:[h.jsxs("div",{className:"channel-header",children:[h.jsx("h2",{className:"channel-title",children:t}),h.jsx(bF,{onClick:s})]}),h.jsxs("div",{className:"channel-content",children:[h.jsx("div",{className:"channel-buttons-container",children:r}),h.jsx(kF,{messages:n,isPrivate:e,emptyMessage:i}),e&&h.jsxs("div",{className:"private-note",children:[h.jsx("strong",{children:"Note:"})," Private channels require authentication. Enter your auth token in the configuration above."]})]})]});function xt(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function Xo(t,e){return t.width===e.width&&t.height===e.height}var CF=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){n._observers=n._observers.filter(function(r){return r!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function _F(t){return new CF(t)}var EF=function(){function t(e,n,s){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=xt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(i){return i},this._allowResizeObserver=(r=s==null?void 0:s.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return xt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=xt(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;Xo(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var s=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,s=xt(this._transformBitmapSize(e,this._canvasElementClientSize)),r=Xo(this.bitmapSize,s)?null:s;n===null&&r===null||n!==null&&r!==null&&Xo(n,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(n,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}TF().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=M2(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=_F(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var s=M2(this._canvasElement);if(s!==null){var r=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:s.devicePixelRatio,i=this._canvasElement.getClientRects(),o=i[0]!==void 0?MF(i[0],r):xt({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var s=n.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var r=s.devicePixelContentBoxSize[0],i=xt({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function PF(t,e){return new EF(t,e.transform,e.options)}function M2(t){return t.ownerDocument.defaultView}function TF(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function MF(t,e){return xt({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var IF=function(){function t(e,n,s){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function ca(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new IF(r,n,s)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const D5={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var I2,N2;function ac(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function A5(t,e,n,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(n,e+r),t.lineTo(s,e+r),t.stroke()}function rn(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Vn(t){if(t===void 0)throw new Error("Value is undefined");return t}function Se(t){if(t===null)throw new Error("Value is null");return t}function ji(t){return Se(Vn(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(I2||(I2={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(N2||(N2={}));class Ut{constructor(){this.t=[]}i(e,n,s){const r={h:e,l:n,o:s===!0};this.t.push(r)}_(e){const n=this.t.findIndex(s=>e===s.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,s){const r=[...this.t];this.t=this.t.filter(i=>!i.o),r.forEach(i=>i.h(e,n,s))}v(){return this.t.length>0}m(){this.t=[]}}function ts(t,...e){for(const n of e)for(const s in n)n[s]!==void 0&&Object.prototype.hasOwnProperty.call(n,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof n[s]!="object"||t[s]===void 0||Array.isArray(n[s])?t[s]=n[s]:ts(t[s],n[s]));return t}function lc(t){return typeof t=="number"&&isFinite(t)}function zd(t){return typeof t=="number"&&t%1==0}function yh(t){return typeof t=="string"}function gf(t){return typeof t=="boolean"}function Ur(t){const e=t;if(!e||typeof e!="object")return e;let n,s,r;for(s in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(r=e[s],n[s]=r&&typeof r=="object"?Ur(r):r);return n}function NF(t){return t!==null}function DF(t){return t===null?void 0:t}const O5="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function u0(t,e,n){return e===void 0&&(e=O5),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class AF{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),s=this.W();return e.P===n&&e.T===s||(e.P=n,e.T=s,e.k=u0(n,s),e.A=2.5/12*n,e.V=e.A,e.B=n/12*e.C,e.I=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function ab(t){return t<0?0:t>255?255:Math.round(t)||0}function D2(t){return .199*t[0]+.687*t[1]+.114*t[2]}class OF{constructor(e,n){this.q=new Map,this.Y=e,n&&(this.q=n)}j(e,n){if(e==="transparent")return e;const s=this.K(e),r=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${n*r})`}X(e){const n=this.K(e);return{Z:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,G:D2(n)>160?"black":"white"}}J(e){return D2(this.K(e))}tt(e,n,s){const[r,i,o,a]=this.K(e),[l,c,u,d]=this.K(n),f=[ab(r+s*(l-r)),ab(i+s*(c-i)),ab(o+s*(u-o)),(p=a+s*(d-a),p<=0||p>1?Math.min(Math.max(p,0),1):Math.round(1e4*p)/1e4)];var p;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const n=this.q.get(e);if(n)return n;const s=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(e),r=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(const o of this.Y){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const i=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,i),i}}class RF{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,s){this.it.forEach(r=>{r.nt(e,n,s)})}}class wh{nt(e,n,s){e.useBitmapCoordinateSpace(r=>this.et(r,n,s))}}class jF extends wh{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const r=this.rt.lt,i=this.rt,o=Math.max(1,Math.floor(n))%2/2,a=l=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){const u=i.ot[c],d=Math.round(u._t*n)+o,f=u.ut*s,p=l*s+o;e.moveTo(d,f),e.arc(d,f,p,0,2*Math.PI)}e.fill()};i.ct>0&&(e.fillStyle=i.dt,a(i.ft+i.ct)),e.fillStyle=i.vt,a(i.ft)}}function LF(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const FF={from:0,to:1};class $F{constructor(e,n,s){this.Mt=new RF,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.Pt=s,this.Mt.st(this.bt)}yt(e){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(LF),this.bt=this.St.map(n=>{const s=new jF;return s.ht(n),s}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),n=this.Pt.Bt(),s=this.Ct.It(),r=this.O.Et();this.kt(),n.forEach((i,o)=>{const a=this.St[o],l=i.At(s),c=i.zt();!e&&l!==null&&i.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=i.Ft().Nt(l.gt,c.Wt),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/i.Ft().$t()),a.ot[0].wt=s,a.ot[0]._t=r.qt(s),a.lt=FF):a.lt=null})}}class BF extends wh{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!i&&!o)return;const a=Math.round(this.Yt._t*s),l=Math.round(this.Yt.ut*r);e.lineCap="butt",i&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*s),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,ac(e,this.Yt.jt.Xt),function(c,u,d,f){c.beginPath();const p=c.lineWidth%2?.5:0;c.moveTo(u+p,d),c.lineTo(u+p,f),c.stroke()}(e,a,0,n.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*r),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,ac(e,this.Yt.Kt.Xt),A5(e,l,0,n.width))}}class zF{constructor(e,n){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new BF(this.Zt),this.Jt=e,this.Pt=n}yt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),n=this.Pt.Qt().N().crosshair,s=this.Zt;if(n.mode===2)return s.Kt.Vt=!1,void(s.jt.Vt=!1);s.Kt.Vt=e&&this.Jt.ti(this.Pt),s.jt.Vt=e&&this.Jt.ii(),s.Kt.ct=n.horzLine.width,s.Kt.Xt=n.horzLine.style,s.Kt.R=n.horzLine.color,s.jt.ct=n.vertLine.width,s.jt.Xt=n.vertLine.style,s.jt.R=n.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function Sm(t,e,n,s,r,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,n,s,r),t.restore()}function A2(t,e,n,s,r,i){t.beginPath(),t.roundRect?t.roundRect(e,n,s,r,i):(t.lineTo(e+s-i[1],n),i[1]!==0&&t.arcTo(e+s,n,e+s,n+i[1],i[1]),t.lineTo(e+s,n+r-i[2]),i[2]!==0&&t.arcTo(e+s,n+r,e+s-i[2],n+r,i[2]),t.lineTo(e+i[3],n+r),i[3]!==0&&t.arcTo(e,n+r,e,n+r-i[3],i[3]),t.lineTo(e,n+i[0]),i[0]!==0&&t.arcTo(e,n,e+i[0],n,i[0]))}function O2(t,e,n,s,r,i,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===i)return A2(t,e,n,s,r,a),t.fillStyle=i,t.fill(),void t.restore();const c=o/2;var u;A2(t,e+c,n+c,s-o,r-o,(u=-c,a.map(d=>d===0?d:d+u))),i!=="transparent"&&(t.fillStyle=i,t.fill()),l!=="transparent"&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function R5(t,e,n,s,r,i,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,r);a.addColorStop(0,i),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,n,s,r),t.restore()}class R2{constructor(e,n){this.ht(e,n)}ht(e,n){this.Yt=e,this.ei=n}$t(e,n){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,n,s,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const i=this.Yt.R,o=this.ei.Z,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=n.k;const u=this.hi(l,n,s,r),d=u.ai;return u.li?O2(c,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):O2(c,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(c.fillStyle=i,c.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(c.fillStyle=n.D,c.fillRect(u.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),u});e.useMediaCoordinateSpace(({context:l})=>{const c=a.xi;l.font=n.k,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=i,l.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.Pi)})}hi(e,n,s,r){const{context:i,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=e,u=this.Yt.pi||!this.Yt.yi?n.C:0,d=this.Yt.ki?n.S:0,f=n.A+this.ei.Ti,p=n.V+this.ei.Ri,m=n.B,b=n.I,x=this.Yt.ri,g=n.P,y=s.Di(i,x),S=Math.ceil(s.Vi(i,x)),w=g+f+p,v=n.S+m+b+S+u,C=Math.max(1,Math.floor(c));let _=Math.round(w*c);_%2!=C%2&&(_+=1);const P=d>0?Math.max(1,Math.floor(d*l)):0,M=Math.round(v*l),E=Math.round(u*l),I=this.ei.Bi??this.ei.Ii,O=Math.round(I*c)-Math.floor(.5*c),j=Math.floor(O+C/2-_/2),U=j+_,A=r==="right",L=A?a.width-d:d,B=A?o.width-P:P;let F,$,D;return A?(F=B-M,$=B-E,D=L-u-m-d):(F=B+M,$=B+E,D=L+u+m),{li:A,ai:{_i:j,mi:O,Si:U,ui:M,ci:_,ft:2*l,di:P,oi:F,fi:B,wi:$,gi:C,bi:o.width},xi:{_i:j/c,Si:U/c,Ci:D,Pi:y}}}}class km{constructor(e){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(e||R2)(this.Ai,this.Ei),this.Oi=new(e||R2)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Li.$t(e,n),this.Oi.$t(e,n))}Fi(){return this.Ei.Bi||0}Wi(e){this.Ei.Bi=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class UF extends km{constructor(e,n,s){super(),this.Jt=e,this.Yi=n,this.ji=s}qi(e,n,s){if(e.Vt=!1,this.Jt.N().mode===2)return;const r=this.Jt.N().horzLine;if(!r.labelVisible)return;const i=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||i===null)return;const o=this.Yi.Xi().X(r.labelBackgroundColor);s.Z=o.Z,e.R=o.G;const a=2/12*this.Yi.P();s.Ti=a,s.Ri=a;const l=this.ji(this.Yi);s.Ii=l.Ii,e.ri=this.Yi.Zi(l.gt,i),e.Vt=!0}}const WF=/[1-9]/g;class j5{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,n){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const s=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.k,Math.round(n.Gi.Vi(f,Se(this.Yt).ri,WF))));if(s<=0)return;const r=n.Ji,i=s+2*r,o=i/2,a=this.Yt.Qi;let l=this.Yt.Ii,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+i>a&&(l-=Math.abs(a-(c+i)),c=Math.floor(l-o)+.5);const u=c+i,d=Math.ceil(0+n.S+n.C+n.A+n.P+n.V);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:p,verticalPixelRatio:m})=>{const b=Se(this.Yt);f.fillStyle=b.Z;const x=Math.round(c*p),g=Math.round(0*m),y=Math.round(u*p),S=Math.round(d*m),w=Math.round(2*p);if(f.beginPath(),f.moveTo(x,g),f.lineTo(x,S-w),f.arcTo(x,S,x+w,S,w),f.lineTo(y-w,S),f.arcTo(y,S,y,S-w,w),f.lineTo(y,g),f.fill(),b.pi){const v=Math.round(b.Ii*p),C=g,_=Math.round((C+n.C)*m);f.fillStyle=b.R;const P=Math.max(1,Math.floor(p)),M=Math.floor(.5*p);f.fillRect(v-M,C,P,_-C)}}),e.useMediaCoordinateSpace(({context:f})=>{const p=Se(this.Yt),m=0+n.S+n.C+n.A+n.P/2;f.font=n.k,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.R;const b=n.Gi.Di(f,"Apr0");f.translate(c+r,m+b),f.fillText(p.ri,0,0)})}}class HF{constructor(e,n,s){this.xt=!0,this.Gt=new j5,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=e,this.ts=n,this.ji=s}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const s=this.ts.Et();if(s.Ki())return;e.Qi=s.Qi();const r=this.ji();if(r===null)return;e.Ii=r.Ii;const i=s.ss(this.Ct.It());e.ri=s.ns(Se(i)),e.Vt=!0;const o=this.ts.Xi().X(n.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=s.N().ticksVisible}}class L5{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var j2;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(j2||(j2={}));class VF extends L5{constructor(e,n){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=n,this.ys=((r,i)=>o=>{const a=i(),l=r();if(o===Se(this.Pt).ks())return{gt:l,Ii:a};{const c=Se(o.zt());return{gt:o.Ts(a,c),Ii:a}}})(()=>this.ds,()=>this.Ss);const s=((r,i)=>()=>{const o=this.ts.Et().Rs(r()),a=i();return o&&Number.isFinite(a)?{wt:o,Ii:a}:null})(()=>this.fs,()=>this.si());this.Ds=new HF(this,e,s)}N(){return this.Ps}Vs(e,n){this.xs=e,this.Cs=n}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(e,n,s){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,n,s)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(e){let n=this.gs.get(e);n||(n=new zF(this,e),this.gs.set(e,n));let s=this.Ms.get(e);return s||(s=new $F(this.ts,this,e),this.Ms.set(e,s)),[n,s]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,n){this.ps&&this.Pt===e||this.vs.clear();const s=[];return this.Pt===e&&s.push(this.Hs(this.vs,n,this.ys)),s}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var n,s;(n=this.gs.get(e))==null||n.yt(),(s=this.Ms.get(e))==null||s.yt()}),this.vs.forEach(e=>e.yt()),this.Ds.yt()}qs(e){return e&&!e.ks().Ki()?e.ks():null}zs(e,n,s){this.Ys(e,n,s)&&this.Ns()}Ys(e,n,s){const r=this.bs,i=this.Ss,o=this.ds,a=this.fs,l=this.Pt,c=this.qs(s);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=s;const u=c!==null?c.zt():null;return c!==null&&u!==null?(this.ds=n,this.Ss=c.Nt(n,u)):(this.ds=NaN,this.Ss=NaN),r!==this.bs||i!==this.Ss||a!==this.fs||o!==this.ds||l!==this.Pt}Os(){const e=this.ts.js().map(s=>s.Xs().Ks()).filter(NF),n=e.length===0?null:Math.max(...e);this.fs=n!==null?n:NaN}Hs(e,n,s){let r=e.get(n);return r===void 0&&(r=new UF(this,n,s),e.set(n,r)),r}}function Cm(t){return t==="left"||t==="right"}class sn{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,n){const s=function(r,i){return r===void 0?i:{tn:Math.max(r.tn,i.tn),sn:r.sn||i.sn}}(this.Zs.get(e),n);this.Zs.set(e,s)}nn(){return this.Js}en(e){const n=this.Zs.get(e);return n===void 0?{tn:this.Js}:{tn:Math.max(this.Js,n.tn),sn:n.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const n of e.Gs)this.mn(n);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((n,s)=>{this.Qs(s,n)})}static wn(){return new sn(2)}static gn(){return new sn(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(n=>n.an===5);e!==-1&&this.Gs.splice(e,1)}}class F5{formatTickmarks(e){return e.map(n=>this.format(n))}}const L2=".";function Wr(t,e){if(!lc(t))return"n/a";if(!zd(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class _m extends F5{constructor(e,n){if(super(),n||(n=1),lc(e)&&zd(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=n,this.bn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const n=this.Yi/this.Mn;let s=Math.floor(e),r="";const i=this.xn!==void 0?this.xn:NaN;if(n>1){let o=+(Math.round(e*n)-s*n).toFixed(this.xn);o>=n&&(o-=n,s+=1),r=L2+Wr(+o.toFixed(this.xn)*this.Mn,i)}else s=Math.round(s*n)/n,i>0&&(r=L2+Wr(0,i));return s.toFixed(0)+r}}class $5 extends _m{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class qF extends F5{constructor(e){super(),this.Cn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.Pn(e):e<999995?n+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.Pn(e/1e9)+"B")}Pn(e){let n;const s=Math.pow(10,this.Cn);return n=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(r,i)=>i)}}const YF=/[2-9]/g;class d0{constructor(e=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(e,n,s){return this.In(e,n,s).width}Di(e,n,s){const r=this.In(e,n,s);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}In(e,n,s){const r=s||YF,i=String(n).replace(r,"0");if(this.Dn.has(i))return Vn(this.Dn.get(i)).En;if(this.yn===this.Vn){const a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.yn--}e.save(),e.textBaseline="middle";const o=e.measureText(i);return e.restore(),o.width===0&&n.length||(this.Dn.set(i,{En:o,An:this.kn}),this.Rn[this.kn]=i,this.yn++,this.kn++),o}}class GF{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,n,s){this.zn=e,this.M=n,this.Ln=s}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class B5{constructor(e,n,s){this.Fn=e,this.On=new d0(50),this.Wn=n,this.O=s,this.F=-1,this.Gt=new GF(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const n=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(n===null)return null;const s=e.qn(n);if(s==="overlay")return null;const r=this.O.Yn();return r.P!==this.F&&(this.F=r.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),r,s),this.Gt}}class KF extends wh{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,n){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:s,ct:r,Kn:i}=this.Yt;return n>=s-r-7&&n<=s+r+7?{Xn:this.Yt,Kn:i}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;const i=Math.round(this.Yt.ut*r);i<0||i>n.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*s),ac(e,this.Yt.Xt),A5(e,i,0,n.width))}}class Fv{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new KF,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class XF extends Fv{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),n=e.ie().ie;if(n!==2&&n!==3)return;const s=this.Jn.N();if(!s.baseLineVisible||!this.Jn.Vt())return;const r=this.Jn.zt();r!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(r.Wt,r.Wt),this.Zn.R=s.baseLineColor,this.Zn.ct=s.baseLineWidth,this.Zn.Xt=s.baseLineStyle)}}class QF extends wh{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){const r=this.Yt;if(r===null)return;const i=Math.max(1,Math.floor(n)),o=i%2/2,a=Math.round(r.ne.x*n)+o,l=r.ne.y*s;e.fillStyle=r.ee,e.beginPath();const c=Math.max(2,1.5*r.re)*n;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.he,e.beginPath(),e.arc(a,l,r.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=r.ae,e.beginPath(),e.arc(a,l,r.ft*n+i/2,0,2*Math.PI,!1),e.stroke()}}const JF=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class ZF{constructor(e){this.Gt=new QF,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),n=this.we-e;if(n>0)return void(n<650&&(this.we+=2600));this.me=e,this.we=e+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),n=e.Pe(),s=this.ge.zt();if(n===null||s===null)return;const r=this.ge.ye(!0);if(r.ke||!n.Te(r.Re))return;const i={x:e.qt(r.Re),y:this.ge.Ft().Nt(r.gt,s.Wt)},o=r.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:i})}Ce(){const e=this.Gt.se();if(e!==null){const n=this.De(this.Ve(),e.ee);e.he=n.he,e.ae=n.ae,e.ft=n.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(e,n,s,r){const i=s+(r-s)*n;return this.ge.Qt().Xi().j(e,i)}De(e,n){const s=e%2600/2600;let r;for(const c of JF)if(s>=c.le&&s<=c.oe){r=c;break}rn(r!==void 0,"Last price animation internal logic error");const i=(s-r.le)/(r.oe-r.le);return{he:this.Be(n,i,r.ce,r.de),ae:this.Be(n,i,r.fe,r.pe),ft:(o=i,a=r._e,l=r.ue,a+(l-a)*o)};var o,a,l}}class e$ extends Fv{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const n=this.Jn.N();if(!n.priceLineVisible||!this.Jn.Vt())return;const s=this.Jn.ye(n.priceLineSource===0);s.ke||(e.Vt=!0,e.ut=s.Ii,e.R=this.Jn.Ie(s.R),e.ct=n.priceLineWidth,e.Xt=n.priceLineStyle)}}class t$ extends km{constructor(e){super(),this.Jt=e}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.Jt;if(!r.Vt())return;const i=r.N(),o=i.lastValueVisible,a=r.Ee()!=="",l=i.seriesLastValueMode===0,c=r.ye(!1);if(c.ke)return;o&&(e.ri=this.Ae(c,o,l),e.Vt=e.ri.length!==0),(a||l)&&(n.ri=this.ze(c,o,a,l),n.Vt=n.ri.length>0);const u=r.Ie(c.R),d=this.Jt.Qt().Xi().X(u);s.Z=d.Z,s.Ii=c.Ii,n.Ht=r.Qt().Ut(c.Ii/r.Ft().$t()),e.Ht=u,e.R=d.G,n.R=d.G}ze(e,n,s,r){let i="";const o=this.Jt.Ee();return s&&o.length!==0&&(i+=`${o} `),n&&r&&(i+=this.Jt.Ft().Le()?e.Oe:e.Ne),i.trim()}Ae(e,n,s){return n?s?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function F2(t,e,n,s){const r=Number.isFinite(e),i=Number.isFinite(n);return r&&i?t(e,n):r||i?r?e:n:s}class Tn{constructor(e,n){this.Fe=e,this.We=n}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new Tn(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new Tn(F2(Math.min,this.$e(),e.$e(),-1/0),F2(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!lc(e)||this.We-this.Fe===0)return;const n=.5*(this.We+this.Fe);let s=this.We-n,r=this.Fe-n;s*=e,r*=e,this.We=n+s,this.Fe=n+r}Ke(e){lc(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new Tn(e.minValue,e.maxValue)}}class h0{constructor(e,n){this.Ge=e,this.Je=n||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new h0(Tn.Ze(e.priceRange),e.margins)}}class n$ extends Fv{constructor(e,n){super(e),this.ir=n}te(){const e=this.Zn;e.Vt=!1;const n=this.ir.N();if(!this.Jn.Vt()||!n.lineVisible)return;const s=this.ir.sr();s!==null&&(e.Vt=!0,e.ut=s,e.R=n.color,e.ct=n.lineWidth,e.Xt=n.lineStyle,e.Kn=this.ir.N().id)}}class s$ extends km{constructor(e,n){super(),this.ge=e,this.ir=n}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.ir.N(),i=r.axisLabelVisible,o=r.title!=="",a=this.ge;if(!i||!a.Vt())return;const l=this.ir.sr();if(l===null)return;o&&(n.ri=r.title,n.Vt=!0),n.Ht=a.Qt().Ut(l/a.Ft().$t()),e.ri=this.nr(r.price),e.Vt=!0;const c=this.ge.Qt().Xi().X(r.axisLabelColor||r.color);s.Z=c.Z;const u=r.axisLabelTextColor||c.G;e.R=u,n.R=u,s.Ii=l}nr(e){const n=this.ge.zt();return n===null?"":this.ge.Ft().Zi(e,n.Wt)}}class r${constructor(e,n){this.ge=e,this.Ps=n,this.er=new n$(e,this),this.Fn=new s$(e,this),this.rr=new B5(this.Fn,e,e.Qt())}hr(e){ts(this.Ps,e),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const e=this.ge,n=e.Ft();if(e.Qt().Et().Ki()||n.Ki())return null;const s=e.zt();return s===null?null:n.Nt(this.Ps.price,s.Wt)}}class i$ extends L5{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const o$={Bar:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=Se(t(n,s)),a=ji(o.Wt[0])<=ji(o.Wt[3]);return{cr:o.R??(a?r:i)}},Candlestick:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,u=Se(t(n,s)),d=ji(u.Wt[0])<=ji(u.Wt[3]);return{cr:u.R??(d?r:i),dr:u.Ht??(d?o:a),pr:u.vr??(d?l:c)}},Custom:(t,e,n,s)=>({cr:Se(t(n,s)).R??e.color}),Area:(t,e,n,s)=>{const r=Se(t(n,s));return{cr:r.vt??e.lineColor,vt:r.vt??e.lineColor,mr:r.mr??e.topColor,wr:r.wr??e.bottomColor}},Baseline:(t,e,n,s)=>{const r=Se(t(n,s));return{cr:r.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:r.gr??e.topLineColor,Mr:r.Mr??e.bottomLineColor,br:r.br??e.topFillColor1,Sr:r.Sr??e.topFillColor2,Cr:r.Cr??e.bottomFillColor1,Pr:r.Pr??e.bottomFillColor2}},Line:(t,e,n,s)=>{const r=Se(t(n,s));return{cr:r.R??e.color,vt:r.R??e.color}},Histogram:(t,e,n,s)=>({cr:Se(t(n,s)).R??e.color})};class a${constructor(e){this.yr=(n,s)=>s!==void 0?s.Wt:this.ge.Xs().kr(n),this.ge=e,this.Tr=o$[e.Rr()]}Dr(e,n){return this.Tr(this.yr,this.ge.N(),e,n)}}function z5(t,e,n,s,r=0,i=e.length){let o=i-r;for(;0<o;){const a=o>>1,l=r+a;s(e[l],n)===t?(r=l+1,o-=a+1):o=a}return r}const cc=z5.bind(null,!0),U5=z5.bind(null,!1);var $2;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})($2||($2={}));const ui=30;class l${constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}kr(e){return this.Fr(e)}Fr(e,n=0){const s=this.Nr(e,n);return s===null?null:{...this.Wr(s),Re:this.Or(s)}}Hr(){return this.Vr}Ur(e,n,s){if(this.Ki())return null;let r=null;for(const i of s)r=bf(r,this.$r(e,n,i));return r}ht(e){this.Ir.clear(),this.Br.clear(),this.Vr=e,this.Er=e.map(n=>n.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,n){const s=this.Yr(e);if(s===null&&n!==0)switch(n){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return s}jr(e){let n=this.Xr(e);return n>0&&(n-=1),n!==this.Vr.length&&this.Or(n)<e?n:null}Kr(e){const n=this.Zr(e);return n!==this.Vr.length&&e<this.Or(n)?n:null}Yr(e){const n=this.Xr(e);return n===this.Vr.length||e<this.Vr[n].Re?null:n}Xr(e){return cc(this.Vr,e,(n,s)=>n.Re<s)}Zr(e){return U5(this.Vr,e,(n,s)=>n.Re>s)}Gr(e,n,s){let r=null;for(let i=e;i<n;i++){const o=this.Vr[i].Wt[s];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(e,n,s){if(this.Ki())return null;let r=null;const i=Se(this.Lr()),o=Se(this.Ks()),a=Math.max(e,i),l=Math.min(n,o),c=Math.ceil(a/ui)*ui,u=Math.max(c,Math.floor(l/ui)*ui);{const f=this.Xr(a),p=this.Zr(Math.min(l,c,n));r=bf(r,this.Gr(f,p,s))}let d=this.Br.get(s);d===void 0&&(d=new Map,this.Br.set(s,d));for(let f=Math.max(c+1,a);f<u;f+=ui){const p=Math.floor(f/ui);let m=d.get(p);if(m===void 0){const b=this.Xr(p*ui),x=this.Zr((p+1)*ui-1);m=this.Gr(b,x,s),d.set(p,m)}r=bf(r,m)}{const f=this.Xr(u),p=this.Zr(l);r=bf(r,this.Gr(f,p,s))}return r}}function bf(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}const f0={setLineStyle:ac};class c${constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,f0)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,f0)}}class u${constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new c$(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}class W5{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,n;(n=(e=this.ah).updateAllViews)==null||n.call(e)}Fs(){var s,r,i;const e=((r=(s=this.ah).paneViews)==null?void 0:r.call(s))??[];if(((i=this.hh)==null?void 0:i.nh)===e)return this.hh.eh;const n=e.map(o=>new u$(o));return this.hh={nh:e,eh:n},n}jn(e,n){var s,r;return((r=(s=this.ah).hitTest)==null?void 0:r.call(s,e,n))??null}}let d$=class extends W5{us(){return[]}};class h${constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,f0)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,f0)}}class B2{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new h$(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}function H5(t){var e,n,s;return{ri:t.text(),Ii:t.coordinate(),Bi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),Z:t.backColor(),Vt:((n=t.visible)==null?void 0:n.call(t))??!0,pi:((s=t.tickVisible)==null?void 0:s.call(t))??!0}}class f${constructor(e,n){this.Gt=new j5,this._h=e,this.uh=n}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...H5(this._h)}),this.Gt}}class p$ extends km{constructor(e,n){super(),this._h=e,this.Yi=n}qi(e,n,s){const r=H5(this._h);s.Z=r.Z,e.R=r.R;const i=2/12*this.Yi.P();s.Ti=i,s.Ri=i,s.Ii=r.Ii,s.Bi=r.Bi,e.ri=r.ri,e.Vt=r.Vt,e.pi=r.pi}}class m$ extends W5{constructor(e,n){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=n}cs(){var r,i,o;const e=((i=(r=this.ah).timeAxisViews)==null?void 0:i.call(r))??[];if(((o=this.dh)==null?void 0:o.nh)===e)return this.dh.eh;const n=this.ge.Qt().Et(),s=e.map(a=>new f$(a,n));return this.dh={nh:e,eh:s},s}Ws(){var r,i,o;const e=((i=(r=this.ah).priceAxisViews)==null?void 0:i.call(r))??[];if(((o=this.fh)==null?void 0:o.nh)===e)return this.fh.eh;const n=this.ge.Ft(),s=e.map(a=>new p$(a,n));return this.fh={nh:e,eh:s},s}wh(){var s,r,i;const e=((r=(s=this.ah).priceAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.ph)==null?void 0:i.nh)===e)return this.ph.eh;const n=e.map(o=>new B2(o));return this.ph={nh:e,eh:n},n}gh(){var s,r,i;const e=((r=(s=this.ah).timeAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.mh)==null?void 0:i.nh)===e)return this.mh.eh;const n=e.map(o=>new B2(o));return this.mh={nh:e,eh:n},n}Mh(e,n){var s,r;return((r=(s=this.ah).autoscaleInfo)==null?void 0:r.call(s,e,n))??null}}function lb(t,e,n,s){t.forEach(r=>{e(r).forEach(i=>{i.rh()===n&&s.push(i)})})}function cb(t){return t.Fs()}function g$(t){return t.wh()}function b$(t){return t.gh()}const x$=["Area","Line","Baseline"];class Em extends i${constructor(e,n,s,r,i){super(e),this.Yt=new l$,this.er=new e$(this),this.bh=[],this.Sh=new XF(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=s,this.kh=n;const o=new t$(this);this.vs=[o],this.rr=new B5(o,this,e),x$.includes(this.kh)&&(this.xh=new ZF(this)),this.Th(),this.sh=r(this,this.Qt(),i)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(e){return this.Ps.priceLineColor||e}ye(e){const n={ke:!0},s=this.Ft();if(this.Qt().Et().Ki()||s.Ki()||this.Yt.Ki())return n;const r=this.Qt().Et().Pe(),i=this.zt();if(r===null||i===null)return n;let o,a;if(e){const d=this.Yt.Ar();if(d===null)return n;o=d,a=d.Re}else{const d=this.Yt.Fr(r.bi(),-1);if(d===null||(o=this.Yt.kr(d.Re),o===null))return n;a=d.Re}const l=o.Wt[3],c=this.Rh().Dr(a,{Wt:o}),u=s.Nt(l,i.Wt);return{ke:!1,gt:l,ri:s.Zi(l,i.Wt),Oe:s.Dh(l),Ne:s.Vh(l,i.Wt),R:c.cr,Ii:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new a$(this)),this.Ch}N(){return this.Ps}hr(e){const n=e.priceScaleId;n!==void 0&&n!==this.Ps.priceScaleId&&this.Qt().Bh(this,n),ts(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(e,n){this.Yt.ht(e),this.sh.yt("data"),this.xh!==null&&(n&&n.zh?this.xh.be():e.length===0&&this.xh.Me());const s=this.Qt().Hn(this);this.Qt().Lh(s),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const n=new r$(this,e);return this.bh.push(n),this.Qt().Eh(this),n}Nh(e){const n=this.bh.indexOf(e);n!==-1&&this.bh.splice(n,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const n=e.Uh();return this.Yt.Fr(n,1)}Xs(){return this.Yt}$h(e){const n=this.Yt.kr(e);return n===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:n.Wt[0],Yh:n.Wt[1],jh:n.Wt[2],Kh:n.Wt[3]}:n.Wt[3]}Xh(e){const n=[];lb(this.yh,cb,"top",n);const s=this.xh;return s!==null&&s.Vt()&&(this.Ph===null&&s.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),s.Se(),n.unshift(s)),n}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const n=this.bh.map(s=>s.lr());return e.push(...n),lb(this.yh,cb,"normal",e),e}Jh(){return this.Qh(cb,"bottom")}ta(e){return this.Qh(g$,e)}ia(e){return this.Qh(b$,e)}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,n){if(n!==this.es&&!this.Gh())return[];const s=[...this.vs];for(const r of this.bh)s.push(r.ur());return this.yh.forEach(r=>{s.push(...r.Ws())}),s}cs(){const e=[];return this.yh.forEach(n=>{e.push(...n.cs())}),e}Mh(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider(()=>{const r=this.na(e,n);return r===null?null:r.Xe()});return h0.Ze(s)}return this.na(e,n)}nh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}ea(){return this.ra}Ns(){var e;this.sh.yt();for(const n of this.vs)n.yt();for(const n of this.bh)n.yt();this.er.yt(),this.Sh.yt(),(e=this.xh)==null||e.yt(),this.yh.forEach(n=>n.Ns())}Ft(){return Se(super.Ft())}At(e){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.Yt.kr(e);return n===null?null:{gt:n.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(e){this.yh.push(new m$(e,this))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e)}ca(){if(this.kh==="Custom")return e=>this.sh.da(e)}fa(){if(this.kh==="Custom")return e=>this.sh.pa(e)}va(){return this.Yt.qr()}Gh(){return!Cm(this.Ft().ma())}na(e,n){if(!zd(e)||!zd(n)||this.Yt.Ki())return null;const s=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(e,n,s);let i=r!==null?new Tn(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){const a=this.Ps.base,l=new Tn(a,a);i=i!==null?i.vn(l):l}return this.yh.forEach(a=>{const l=a.Mh(e,n);if(l!=null&&l.priceRange){const c=new Tn(l.priceRange.minValue,l.priceRange.maxValue);i=i!==null?i.vn(c):c}l!=null&&l.margins&&(o=l.margins)}),new h0(i,o)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(e){switch(this.kh){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ra={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.ra=new qF(this.Ps.priceFormat.precision);break;case"percent":this.ra=new $5(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new _m(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.wa()}Qh(e,n){const s=[];return lb(this.yh,e,n,s),s}}const y$=[3],w$=[0,1,2,3];class v${constructor(e){this.Ps=e}ga(e,n,s){let r=e;if(this.Ps.mode===0)return r;const i=s.ks(),o=i.zt();if(o===null)return r;const a=i.Nt(e,o),l=s.Ma().filter(u=>u instanceof Em).reduce((u,d)=>{if(s.Un(d)||!d.Vt())return u;const f=d.Ft(),p=d.Xs();if(f.Ki()||!p.Te(n))return u;const m=p.kr(n);if(m===null)return u;const b=ji(d.zt()),x=this.Ps.mode===3?w$:y$;return u.concat(x.map(g=>f.Nt(m.Wt[g],b.Wt)))},[]);if(l.length===0)return r;l.sort((u,d)=>Math.abs(u-a)-Math.abs(d-a));const c=l[0];return r=i.Ts(c,o),r}}function Wu(t,e,n){return Math.min(Math.max(t,e),n)}function xf(t,e,n){return e-t<=n}class S$ extends wh{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=Math.max(1,Math.floor(s));e.lineWidth=i,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=Se(this.Yt);if(o.ba){e.strokeStyle=o.Sa,ac(e,o.xa),e.beginPath();for(const a of o.Ca){const l=Math.round(a.Pa*s);e.moveTo(l,-i),e.lineTo(l,n.height+i)}e.stroke()}if(o.ya){e.strokeStyle=o.ka,ac(e,o.Ta),e.beginPath();for(const a of o.Ra){const l=Math.round(a.Pa*r);e.moveTo(-i,l),e.lineTo(n.width+i,l)}e.stroke()}})}}class k${constructor(e){this.Gt=new S$,this.xt=!0,this.Pt=e}yt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,n={ya:e.horzLines.visible,ba:e.vertLines.visible,ka:e.horzLines.color,Sa:e.vertLines.color,Ta:e.horzLines.style,xa:e.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map(s=>({Pa:s.coord}))};this.Gt.ht(n),this.xt=!1}return this.Gt}}class C${constructor(e){this.sh=new k$(e)}lr(){return this.sh}}const ub={Va:4,Ba:1e-4};function Qa(t,e){const n=100*(t-e)/e;return e<0?-n:n}function _$(t,e){const n=Qa(t.$e(),e),s=Qa(t.qe(),e);return new Tn(n,s)}function Hu(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function E$(t,e){const n=Hu(t.$e(),e),s=Hu(t.qe(),e);return new Tn(n,s)}function p0(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.log10(n+e.Ba)+e.Va;return t<0?-s:s}function Vu(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.pow(10,n-e.Va)-e.Ba;return t<0?-s:s}function Jc(t,e){if(t===null)return null;const n=p0(t.$e(),e),s=p0(t.qe(),e);return new Tn(n,s)}function Ja(t,e){if(t===null)return null;const n=Vu(t.$e(),e),s=Vu(t.qe(),e);return new Tn(n,s)}function db(t){if(t===null)return ub;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return ub;const n=Math.ceil(Math.abs(Math.log10(e))),s=ub.Va+n;return{Va:s,Ba:1/Math.pow(10,s)}}class hb{constructor(e,n){if(this.Ia=e,this.Ea=n,function(s){if(s<0)return!1;if(s>1e18)return!0;for(let r=s;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let s=this.Ia;s!==1;){if(s%2==0)this.Aa.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),s/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(e,n,s){const r=this.Ia===0?0:1/this.Ia;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,a=this.Ea[0];for(;;){const d=xf(i,r,1e-14)&&i>r+1e-14,f=xf(i,s*a,1e-14),p=xf(i,1,1e-14);if(!(d&&f&&p))break;i/=a,a=this.Ea[++o%this.Ea.length]}if(i<=r+1e-14&&(i=r),i=Math.max(1,i),this.Aa.length>0&&(l=i,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.Aa[0];xf(i,s*a,1e-14)&&i>r+1e-14;)i/=a,a=this.Aa[++o%this.Aa.length];var l,c,u;return i}}class z2{constructor(e,n,s,r){this.La=[],this.Yi=e,this.Ia=n,this.Oa=s,this.Na=r}za(e,n){if(e<n)throw new Error("high < low");const s=this.Yi.$t(),r=(e-n)*this.Fa()/s,i=new hb(this.Ia,[2,2.5,2]),o=new hb(this.Ia,[2,2,2.5]),a=new hb(this.Ia,[2.5,2,2]),l=[];return l.push(i.za(e,n,r),o.za(e,n,r),a.za(e,n,r)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let d=1;d<c.length;++d)c[d]<u&&(u=c[d]);return u}(l)}Wa(){const e=this.Yi,n=e.zt();if(n===null)return void(this.La=[]);const s=e.$t(),r=this.Oa(s-1,n),i=this.Oa(0,n),o=this.Yi.N().entireTextOnly?this.Ha()/2:0,a=o,l=s-1-o,c=Math.max(r,i),u=Math.min(r,i);if(c===u)return void(this.La=[]);const d=this.za(c,u);if(this.Ua(n,d,c,u,a,l),e.$a()&&this.qa(d,u,c)){const m=this.Yi.Ya();this.ja(n,d,a,l,m,2*m)}const f=this.La.map(m=>m.Ka),p=this.Yi.Xa(f);for(let m=0;m<this.La.length;m++)this.La[m].Za=p[m]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(e,n,s,r,i,o){const a=this.La,l=this.Yi;let c=s%n;c+=c<0?n:0;const u=s>=r?1:-1;let d=null,f=0;for(let p=s-c;p>r;p-=n){const m=this.Na(p,e,!0);d!==null&&Math.abs(m-d)<this.Fa()||m<i||m>o||(f<a.length?(a[f].Pa=m,a[f].Za=l.Ga(p),a[f].Ka=p):a.push({Pa:m,Za:l.Ga(p),Ka:p}),f++,d=m,l.Ja()&&(n=this.za(p*u,r)))}a.length=f}ja(e,n,s,r,i,o){const a=this.La,l=this.Qa(e,s,i,o),c=this.Qa(e,r,-o,-i),u=this.Na(0,e,!0)-this.Na(n,e,!0);a.length>0&&a[0].Pa-l.Pa<u/2&&a.shift(),a.length>0&&c.Pa-a[a.length-1].Pa<u/2&&a.pop(),a.unshift(l),a.push(c)}Qa(e,n,s,r){const i=(s+r)/2,o=this.Oa(n+s,e),a=this.Oa(n+r,e),l=Math.min(o,a),c=Math.max(o,a),u=Math.max(.1,this.za(c,l)),d=this.Oa(n+i,e),f=d-d%u,p=this.Na(f,e,!0);return{Za:this.Yi.Ga(f),Pa:p,Ka:f}}qa(e,n,s){let r=ji(this.Yi.Qe());return this.Yi.Ja()&&(r=Ja(r,this.Yi.tl())),r.$e()-n<e&&s-r.qe()<e}}function V5(t){return t.slice().sort((e,n)=>Se(e.hs())-Se(n.hs()))}var U2;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(U2||(U2={}));const W2=new $5,H2=new _m(100,1);class P${constructor(e,n,s,r,i){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new Ut,this.ul=new Ut,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=H2,this.wl=db(null),this.gl=e,this.Ps=n,this.Ml=s,this.bl=r,this.Sl=i,this.xl=new z2(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(e){if(ts(this.Ps,e),this.wa(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const n=Vn(e.scaleMargins.top),s=Vn(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(n+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+s}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const n=this.ie();let s=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),n.ie===1&&e.ie!==n.ie&&(function(i,o){if(i===null)return!1;const a=Vu(i.$e(),o),l=Vu(i.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.wl)?(s=Ja(this.Ge,this.wl),s!==null&&this.Bl(s)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==n.ie&&(s=Jc(this.Ge,this.wl),s!==null&&this.Bl(s));const r=n.ie!==this.Ps.mode;r&&(n.ie===2||this.Le())&&this.wa(),r&&(n.ie===3||this.Dl())&&this.wa(),e.Vl!==void 0&&n.Vl!==e.Vl&&(this.Ps.invertScale=e.Vl,this.Il()),this.ul.p(n,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(e){this.il!==e&&(this.il=e,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const e=this.$t()-this.Ll()-this.Ol();return this.sl=e,e}Qe(){return this.Nl(),this.Ge}Bl(e,n){const s=this.Ge;(n||s===null&&e!==null||s!==null&&!s.He(e))&&(this.pl=null,this.Ge=e)}Fl(e){this.Bl(e),this.Wl(e!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(e){return this.Vl()?e:this.$t()-1-e}Nt(e,n){return this.Le()?e=Qa(e,n):this.Dl()&&(e=Hu(e,n)),this.Pl(e,n)}Ul(e,n,s){this.Nl();const r=this.Ol(),i=Se(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,p=this.$l();for(let m=d;m<f;m++){const b=e[m],x=b.gt;if(isNaN(x))continue;let g=x;p!==null&&(g=p(b.gt,n));const y=r+u*(g-o),S=c?y:this.il-1-y;b.ut=S}}ql(e,n,s){this.Nl();const r=this.Ol(),i=Se(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,p=this.$l();for(let m=d;m<f;m++){const b=e[m];let x=b.qh,g=b.Yh,y=b.jh,S=b.Kh;p!==null&&(x=p(b.qh,n),g=p(b.Yh,n),y=p(b.jh,n),S=p(b.Kh,n));let w=r+u*(x-o),v=c?w:this.il-1-w;b.Yl=v,w=r+u*(g-o),v=c?w:this.il-1-w,b.jl=v,w=r+u*(y-o),v=c?w:this.il-1-w,b.Kl=v,w=r+u*(S-o),v=c?w:this.il-1-w,b.Xl=v}}Ts(e,n){const s=this.Cl(e,n);return this.Zl(s,n)}Zl(e,n){let s=e;return this.Le()?s=function(r,i){return i<0&&(r=-r),r/100*i+i}(s,n):this.Dl()&&(s=function(r,i){return r-=100,i<0&&(r=-r),r/100*i+i}(s,n)),s}Ma(){return this.cl}Dt(){return this.fl||(this.fl=V5(this.cl)),this.fl}Gl(e){this.cl.indexOf(e)===-1&&(this.cl.push(e),this.wa(),this.Jl())}Ql(e){const n=this.cl.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.cl.splice(n,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let e=null;for(const n of this.cl){const s=n.zt();s!==null&&(e===null||s.Hh<e.Hh)&&(e=s)}return e===null?null:e.Wt}Vl(){return this.Ps.invertScale}Da(){const e=this.zt()===null;if(this.pl!==null&&(e||this.pl.io===e))return this.pl.Da;this.xl.Wa();const n=this.xl.Da();return this.pl={Da:n,io:e},this._l.p(),n}so(){return this._l}no(e){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-e,this.nl=Se(this.Qe()).Ue()))}eo(e){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(e=this.il-e)<0&&(e=0);let n=(this.vl+.2*(this.il-1))/(e+.2*(this.il-1));const s=Se(this.nl).Ue();n=Math.max(n,.1),s.je(n),this.Bl(s)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(e){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=e,this.nl=Se(this.Qe()).Ue()))}ao(e){if(this.Tl()||this.ml===null)return;const n=Se(this.Qe()).Ye()/(this.zl()-1);let s=e-this.ml;this.Vl()&&(s*=-1);const r=s*n,i=Se(this.nl).Ue();i.Ke(r),this.Bl(i,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(e,n){switch(this.Ps.mode){case 2:return this.oo(Qa(e,n));case 3:return this.ea().format(Hu(e,n));default:return this.nr(e)}}Ga(e){switch(this.Ps.mode){case 2:return this.oo(e);case 3:return this.ea().format(e);default:return this.nr(e)}}Xa(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ea().formatTickmarks(e);default:return this.uo(e)}}Dh(e){return this.nr(e,Se(this.dl).ea())}Vh(e,n){return e=Qa(e,n),this.oo(e,W2)}co(){return this.cl}do(e){this.el={hl:e,rl:!1}}Ns(){this.cl.forEach(e=>e.Ns())}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let e=1/0;this.dl=null;for(const s of this.cl)s.hs()<e&&(e=s.hs(),this.dl=s);let n=100;this.dl!==null&&(n=Math.round(this.dl.nh())),this.ra=H2,this.Le()?(this.ra=W2,n=100):this.Dl()?(this.ra=new _m(100,1),n=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new z2(this,n,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(e){this.al=e}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(e,n){if(this.Nl(),this.Ki())return 0;e=this.Ja()&&e?p0(e,this.wl):e;const s=Se(this.Qe()),r=this.Ol()+(this.zl()-1)*(e-s.$e())/s.Ye();return this.Hl(r)}Cl(e,n){if(this.Nl(),this.Ki())return 0;const s=this.Hl(e),r=Se(this.Qe()),i=r.$e()+r.Ye()*((s-this.Ol())/(this.zl()-1));return this.Ja()?Vu(i,this.wl):i}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const e=this.el.hl;if(e===null)return;let n=null;const s=this.co();let r=0,i=0;for(const l of s){if(!l.Vt())continue;const c=l.zt();if(c===null)continue;const u=l.Mh(e.Uh(),e.bi());let d=u&&u.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=Jc(d,this.wl);break;case 2:d=_$(d,c.Wt);break;case 3:d=E$(d,c.Wt)}if(n=n===null?d:n.vn(Se(d)),u!==null){const f=u.tr();f!==null&&(r=Math.max(r,f.above),i=Math.max(i,f.below))}}}if(this.$a()&&(r=Math.max(r,this.Ya()),i=Math.max(i,this.Ya())),r===this.ll&&i===this.ol||(this.ll=r,this.ol=i,this.pl=null,this.kl()),n!==null){if(n.$e()===n.qe()){const l=5*this.fo();this.Ja()&&(n=Ja(n,this.wl)),n=new Tn(n.$e()-l,n.qe()+l),this.Ja()&&(n=Jc(n,this.wl))}if(this.Ja()){const l=Ja(n,this.wl),c=db(l);if(o=c,a=this.wl,o.Va!==a.Va||o.Ba!==a.Ba){const u=this.nl!==null?Ja(this.nl,this.wl):null;this.wl=c,n=Jc(l,c),u!==null&&(this.nl=Jc(u,c))}}this.Bl(n)}else this.Ge===null&&(this.Bl(new Tn(-.5,.5)),this.wl=db(null));var o,a}$l(){return this.Le()?Qa:this.Dl()?Hu:this.Ja()?e=>p0(e,this.wl):null}vo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.format(e)):n(e)}mo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.formatTickmarks(e)):n(e)}nr(e,n){return this.vo(e,this.bl.priceFormatter,n)}uo(e,n){const s=this.bl.priceFormatter;return this.mo(e,this.bl.tickmarksPriceFormatter??(s?r=>r.map(s):void 0),n)}oo(e,n){return this.vo(e,this.bl.percentageFormatter,n)}_o(e,n){const s=this.bl.percentageFormatter;return this.mo(e,this.bl.tickmarksPercentageFormatter??(s?r=>r.map(s):void 0),n)}}function V2(t){return t instanceof Em}class q2{constructor(e,n){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new Ut,this.yh=[],this.uh=e,this.ts=n,this.Co=new C$(this);const s=n.N();this.Po=this.yo("left",s.leftPriceScale),this.ko=this.yo("right",s.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(s)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.ko.hr(e.rightPriceScale),e.localization&&(this.Po.wa(),this.ko.wa()),e.overlayPriceScales){const n=Array.from(this.wo.values());for(const s of n){const r=Se(s[0].Ft());r.hr(e.overlayPriceScales),e.localization&&r.wa()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.ko}return this.wo.has(e)?Vn(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach(e=>{e.m&&e.m()}),this.yh=this.yh.filter(e=>{const n=e.oh();return n.detached&&n.detached(),!1}),this.xo.p()}Bo(){return this.bo}Io(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(e){this.Mo=e,this.Ao()}Al(e){this.il=e,this.Po.Al(e),this.ko.Al(e),this.cl.forEach(n=>{if(this.Un(n)){const s=n.Ft();s!==null&&s.Al(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.cl.filter(V2)}Ma(){return this.cl}Un(e){const n=e.Ft();return n===null||this.Po!==n&&this.ko!==n}Gl(e,n,s){this.No(e,n,s?e.hs():this.cl.length)}Ql(e,n){const s=this.cl.indexOf(e);rn(s!==-1,"removeDataSource: invalid data source"),this.cl.splice(s,1),n||this.cl.forEach((o,a)=>o.ls(a));const r=Se(e.Ft()).ma();if(this.wo.has(r)){const o=Vn(this.wo.get(r)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.wo.delete(r))}const i=e.Ft();i&&i.Ma().indexOf(e)>=0&&(i.Ql(e),this.Fo(i)),this.fl=null}qn(e){return e===this.Po?"left":e===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(e,n){e.no(n)}$o(e,n){e.eo(n),this.Ao()}qo(e){e.ro()}Yo(e,n){e.ho(n)}jo(e,n){e.ao(n),this.Ao()}Ko(e){e.lo()}Ao(){this.cl.forEach(e=>{e.Ns()})}ks(){let e=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?e=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?e=this.Po:this.cl.length!==0&&(e=this.cl[0].Ft()),e===null&&(e=this.ko),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.ko:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Tl()&&this.Xo(e)}Zo(e){const n=this.uh.Pe();e.yl({sn:!0}),n!==null&&e.do(n),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=V5(this.cl)),this.fl}Qo(e,n){n=Wu(n,0,this.cl.length-1);const s=this.cl.indexOf(e);rn(s!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(s,1),this.cl.splice(n,0,e),this.cl.forEach((r,i)=>r.ls(i)),this.fl=null;for(const r of[this.Po,this.ko])r.Jl(),r.wa();this.ts.ar()}Bt(){return this.Dt().filter(V2)}t_(){return this.xo}i_(){return this.Co}_a(e){this.yh.push(new d$(e))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.yh}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}Xo(e){const n=e.co();if(n&&n.length>0&&!this.uh.Ki()){const s=this.uh.Pe();s!==null&&e.do(s)}e.Ns()}No(e,n,s){let r=this.Do(n);if(r===null&&(r=this.yo(n,this.ts.N().overlayPriceScales)),this.cl.splice(s,0,e),!Cm(n)){const i=this.wo.get(n)||[];i.push(e),this.wo.set(n,i)}e.ls(s),r.Gl(e),e._s(r),this.Fo(r),this.fl=null}To(e,n,s){n.ie!==s.ie&&this.Xo(e)}yo(e,n){const s={visible:!0,autoScale:!0,...Ur(n)},r=new P$(e,s,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return r.Al(this.$t()),r}}function yf(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function T$(t,e,n,s){for(const r of t){const i=r.Tt(s);if(i!==null&&i.jn){const o=i.jn(e,n);if(o!==null)return{a_:r,e_:o}}}return null}function M$(t){return t.Fs!==void 0}function q5(t,e,n){const s=[t,...t.Dt()],r=function(i,o,a){var f;let l,c;for(const p of i){const m=((f=p.sa)==null?void 0:f.call(p,o,a))??[];for(const b of m)u=b.zOrder,d=l==null?void 0:l.zOrder,(!d||u==="top"&&d!=="top"||u==="normal"&&d==="bottom")&&(l=b,c=p)}var u,d;return l&&c?{r_:l,n_:c}:null}(s,e,n);if((r==null?void 0:r.r_.zOrder)==="top")return yf(r);for(const i of s){if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&!r.r_.isBackground)return yf(r);if(M$(i)){const o=T$(i.Fs(t),e,n,t);if(o!==null)return{n_:i,a_:o.a_,e_:o.e_}}if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&r.r_.isBackground)return yf(r)}return r!=null&&r.r_?yf(r):null}class I${constructor(e,n,s=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=n,this.Vn=s}__(e){const n=e.time,s=this.o_.cacheKey(n),r=this.Dn.get(s);if(r!==void 0)return r.u_;if(this.yn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Vn(o)),this.Tn++,this.yn--}const i=this.l_(e);return this.Dn.set(s,{u_:i,An:this.kn}),this.Rn.set(this.kn,s),this.yn++,this.kn++,i}}class qu{constructor(e,n){rn(e<=n,"right should be >= left"),this.c_=e,this.d_=n}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function Y2(t,e){return t===null||e===null?t===e:t.He(e)}class N${constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,n){this.g_(n),this.Dn=null;for(let s=n;s<e.length;++s){const r=e[s];let i=this.p_.get(r.timeWeight);i===void 0&&(i=[],this.p_.set(r.timeWeight,i)),i.push({index:s,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}M_(e,n,s,r,i){const o=Math.ceil(n/e);return this.Dn!==null&&this.Dn.b_===o&&i===this.Dn.S_&&s===this.Dn.x_||(this.Dn={S_:i,x_:s,Da:this.C_(o,s,r),b_:o}),this.Dn.Da}g_(e){if(e===0)return void this.p_.clear();const n=[];this.p_.forEach((s,r)=>{e<=s[0].index?n.push(r):s.splice(cc(s,e,i=>i.index<e),1/0)});for(const s of n)this.p_.delete(s)}C_(e,n,s){let r=[];const i=o=>!n||s.has(o.index);for(const o of Array.from(this.p_.keys()).sort((a,l)=>l-a)){if(!this.p_.get(o))continue;const a=r;r=[];const l=a.length;let c=0;const u=Vn(this.p_.get(o)),d=u.length;let f=1/0,p=-1/0;for(let m=0;m<d;m++){const b=u[m],x=b.index;for(;c<l;){const g=a[c],y=g.index;if(!(y<x&&i(g))){f=y;break}c++,r.push(g),p=y,f=1/0}if(f-x>=e&&x-p>=e&&i(b))r.push(b),p=x;else if(this.v_)return a}for(;c<l;c++)i(a[c])&&r.push(a[c])}return r}}class ul{constructor(e){this.P_=e}y_(){return this.P_===null?null:new qu(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new ul(null)}}function D$(t,e){return t.weight>e.weight?t:e}class A${constructor(e,n,s,r){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new N$,this.B_=new Map,this.I_=ul.T_(),this.E_=!0,this.A_=new Ut,this.z_=new Ut,this.L_=new Ut,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=n,this.bl=s,this.U_=n.rightOffset,this.q_=n.barSpacing,this.ts=e,this.Y_(n),this.o_=r,this.j_(),this.V_.m_(n.uniformDistribution),this.K_()}N(){return this.Ps}X_(e){ts(this.bl,e),this.Z_(),this.j_()}hr(e,n){ts(this.Ps,e),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),this.Y_(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(e){var n;return((n=this.D_[e])==null?void 0:n.time)??null}ss(e){return this.D_[e]??null}Q_(e,n){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return n?this.D_.length-1:null;const s=cc(this.D_,this.o_.key(e),(r,i)=>this.o_.key(r.time)<i);return this.o_.key(e)<this.o_.key(this.D_[s].time)?n?s:null:s}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const e=this.Pe();if(e===null)return null;const n={from:e.Uh(),to:e.bi()};return this.eu(n)}eu(e){const n=Math.round(e.from),s=Math.round(e.to),r=Se(this.ru()),i=Se(this.hu());return{from:Se(this.ss(Math.max(r,n))),to:Se(this.ss(Math.min(i,s)))}}au(e){return{from:Se(this.Q_(e.from,!0)),to:Se(this.Q_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const n=this.su(),s=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const r=this.q_*e/s;this.q_=r}if(this.Ps.fixLeftEdge&&n!==null&&n.Uh()<=0){const r=s-e;this.U_-=Math.round(r/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(e){if(this.Ki()||!zd(e))return 0;const n=this._u()+this.U_-e;return this.Mo-(n+.5)*this.q_-1}uu(e,n){const s=this._u(),r=n===void 0?0:n.from,i=n===void 0?e.length:n.to;for(let o=r;o<i;o++){const a=e[o].wt,l=s+this.U_-a,c=this.Mo-(l+.5)*this.q_-1;e[o]._t=c}}cu(e,n){const s=Math.ceil(this.du(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.fu(s)?this.pu(s):s}fn(e){this.E_=!0,this.U_=e,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(e){const n=this.q_;if(this.wu(e),this.Ps.rightOffsetPixels!==void 0&&n!==0){const s=this.U_*n/this.q_;this.U_=s}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,n=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(n/e),r=Se(this.Pe()),i=Math.max(r.Uh(),r.Uh()-s),o=Math.max(r.bi(),r.bi()-s),a=this.V_.M_(e,n,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),l=this.ru()+s,c=this.hu()-s,u=this.Mu(),d=this.Ps.fixLeftEdge||u,f=this.Ps.fixRightEdge||u;let p=0;for(const m of a){if(!(i<=m.index&&m.index<=o))continue;let b;p<this.H_.length?(b=this.H_[p],b.coord=this.qt(m.index),b.label=this.bu(m),b.weight=m.weight):(b={needAlignCoordinate:!1,coord:this.qt(m.index),label:this.bu(m),weight:m.weight},this.H_.push(b)),this.q_>n/2&&!u?b.needAlignCoordinate=!1:b.needAlignCoordinate=d&&m.index<=l||f&&m.index>=c,p++}return this.H_.length=p,this.N_=this.H_,this.H_}Su(){let e;this.E_=!0,this.dn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(e)}xu(e){this.E_=!0,this.R_=e,this.ou(),this.G_()}Cu(e,n){const s=this.du(e),r=this.mu(),i=r+n*(r/10);this.dn(i),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(s-this.du(e)))}no(e){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=e,this.Pu()))}eo(e){if(this.O_===null)return;const n=Wu(this.Mo-e,0,this.Mo),s=Wu(this.Mo-Se(this.vl),0,this.Mo);n!==0&&s!==0&&this.dn(this.O_.mu*n/s)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(e){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Pu()))}ao(e){if(this.ml===null)return;const n=(this.ml-e)/this.mu();this.U_=Se(this.O_).gu+n,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.U_,r=performance.now();this.ts._n({Ru:i=>(i-r)/n>=1,Du:i=>{const o=(i-r)/n;return o>=1?e:s+(e-s)*o}})}yt(e,n){this.E_=!0,this.D_=e,this.V_.w_(e,n),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(e,n){const s=e.f_(),r=n&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-r)/s),this.U_=e.bi()-this._u(),n&&(this.U_=r?r/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const e=this.ru(),n=this.hu();e!==null&&n!==null&&this.Eu(new qu(e,n),!0)}zu(e){const n=new qu(e.from,e.to);this.Eu(n)}ns(e){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const n of e)for(const s of n.va())this.F_.set(s,!0);this.W_++}Mu(){const e=this.ts.N().handleScroll,n=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(e){return(this.Mo-1-e)/this.q_}du(e){const n=this.Lu(e),s=this._u()+this.U_-n;return Math.round(1e6*s)/1e6}wu(e){const n=this.q_;this.q_=e,this.lu(),n!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(ul.T_());const e=this._u(),n=this.Mo/this.q_,s=this.U_+e,r=new qu(s-n+1,s);this.Nu(new ul(r))}lu(){const e=Wu(this.q_,this.Fu(),this.Wu());this.q_!==e&&(this.q_=e,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const e=this.Hu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const n=this.Uu();this.U_>n&&(this.U_=n,this.E_=!0)}Hu(){const e=this.ru(),n=this.R_;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(e){let n=this.B_.get(e.weight);return n===void 0&&(n=new I$(s=>this.$u(s),this.o_),this.B_.set(e.weight,n)),n.__(e)}$u(e){return this.o_.formatTickmark(e,this.bl)}Nu(e){const n=this.I_;this.I_=e,Y2(n.y_(),this.I_.y_())||this.A_.p(),Y2(n.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const e=this.ru();if(e===null)return;const n=this.Pe();if(n===null)return;const s=n.Uh()-e;if(s<0){const r=this.U_-s-1;this.fn(r)}this.lu()}J_(){this.ou(),this.lu()}fu(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}pu(e){const n=function*(r){const i=Math.round(r),o=i<r;let a=1;for(;;)o?(yield i+a,yield i-a):(yield i-a,yield i+a),a++}(e),s=this.hu();for(;s;){const r=n.next().value;if(this.F_.get(r))return r;if(r<0||r>s)break}return e}Y_(e){if(e.rightOffsetPixels!==void 0){const n=e.rightOffsetPixels/(e.barSpacing||this.q_);this.ts.fn(n)}}}var G2,K2,X2,Q2,J2;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(G2||(G2={}));class O${constructor(e,n,s){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new Ut,this.Xu=new Ut,this.Zu=null,this.Gu=e,this.Ps=n,this.o_=s,this.Sl=new OF(this.Ps.layout.colorParsers),this.Ju=new AF(this),this.uh=new A$(this,n.timeScale,this.Ps.localization,s),this.Ct=new VF(this,n.crosshair),this.Qu=new v$(n.crosshair),n.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(sn.gn())}ar(){this.rc(sn.wn())}Zh(){this.rc(new sn(1))}Eh(e){const n=this.hc(e);this.rc(n)}ac(){return this.ju}lc(e){var s,r,i,o;if(((s=this.ju)==null?void 0:s.n_)===(e==null?void 0:e.n_)&&((i=(r=this.ju)==null?void 0:r.e_)==null?void 0:i.Kn)===((o=e==null?void 0:e.e_)==null?void 0:o.Kn))return;const n=this.ju;this.ju=e,n!==null&&this.Eh(n.n_),e!==null&&e.n_!==(n==null?void 0:n.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){ts(this.Ps,e),this.qu.forEach(n=>n.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.X_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(e,n,s=0){const r=this.qu[s];if(r===void 0)return;if(e==="left")return ts(this.Ps,{leftPriceScale:n}),r.Ro({leftPriceScale:n}),this.Ku.p(),void this.Ih();if(e==="right")return ts(this.Ps,{rightPriceScale:n}),r.Ro({rightPriceScale:n}),this.Ku.p(),void this.Ih();const i=this._c(e,s);i!==null&&(i.Ft.hr(n),this.Ku.p())}_c(e,n){const s=this.qu[n];if(s===void 0)return null;const r=s.Do(e);return r!==null?{Us:s,Ft:r}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(e,n){e.Al(n),this.vu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.qu.forEach(n=>n.Eo(e)),this.vu()}fc(e){this.qu.length!==1&&(rn(e>=0&&e<this.qu.length,"Invalid pane index"),this.qu.splice(e,1),this.Ih())}vc(e,n){if(this.qu.length<2)return;rn(e>=0&&e<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu.reduce((d,f)=>d+f.Bo(),0),i=this.qu.reduce((d,f)=>d+f.$t(),0),o=i-30*(this.qu.length-1);n=Math.min(o,Math.max(30,n));const a=r/i,l=s.$t();s.Io(n*a);let c=n-l,u=this.qu.length-1;for(const d of this.qu)if(d!==s){const f=Math.min(o,Math.max(30,d.$t()-c/u));c-=d.$t()-f,u-=1;const p=f*a;d.Io(p)}this.Ih()}mc(e,n){rn(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu[n];this.qu[e]=r,this.qu[n]=s,this.Ih()}wc(e,n){if(rn(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index"),e===n)return;const[s]=this.qu.splice(e,1);this.qu.splice(n,0,s),this.Ih()}Uo(e,n,s){e.Uo(n,s)}$o(e,n,s){e.$o(n,s),this.Ah(),this.rc(this.gc(e,2))}qo(e,n){e.qo(n),this.rc(this.gc(e,2))}Yo(e,n,s){n.Tl()||e.Yo(n,s)}jo(e,n,s){n.Tl()||(e.jo(n,s),this.Ah(),this.rc(this.gc(e,2)))}Ko(e,n){n.Tl()||(e.Ko(n),this.rc(this.gc(e,2)))}Zo(e,n){e.Zo(n),this.rc(this.gc(e,2))}Mc(e){this.uh.no(e)}bc(e,n){const s=this.Et();if(s.Ki()||n===0)return;const r=s.Qi();e=Math.max(1,Math.min(e,r)),s.Cu(e,n),this.vu()}Sc(e){this.xc(0),this.Cc(e),this.Pc()}yc(e){this.uh.eo(e),this.vu()}kc(){this.uh.ro(),this.ar()}xc(e){this.uh.ho(e)}Cc(e){this.uh.ao(e),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(e,n,s,r,i){this.Ct.Vs(e,n);let o=NaN,a=this.uh.cu(e,!0);const l=this.uh.Pe();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));const c=r.ks(),u=c.zt();if(u!==null&&(o=c.Ts(n,u)),o=this.Qu.ga(o,a,r),this.Ct.As(a,o,r),this.Zh(),!i){const d=q5(r,e,n);this.lc(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Xu.p(this.Ct.It(),{x:e,y:n},s)}}Rc(e,n,s){const r=s.ks(),i=r.zt(),o=r.Nt(e,Se(i)),a=this.uh.Q_(n,!0),l=this.uh.qt(Se(a));this.Tc(l,o,null,s,!0)}Dc(e){this.uc().Ls(),this.Zh(),e||this.Xu.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const n=this.Ct.Is(),s=this.Ct.Es();this.Tc(n,s,null,e)}this.Ct.Ns()}Vc(e,n,s){const r=this.uh.Rs(0);n!==void 0&&s!==void 0&&this.uh.yt(n,s);const i=this.uh.Rs(0),o=this.uh._u(),a=this.uh.Pe();if(a!==null&&r!==null&&i!==null){const l=a.Te(o),c=this.o_.key(r)>this.o_.key(i),u=e!==null&&e>o&&!c,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=l&&(s!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!f){const p=e-o;this.uh.fn(this.uh.gu()-p)}}this.uh.xu(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(s){return s instanceof q2}(e))return e;const n=this.qu.find(s=>s.Dt().includes(e));return n===void 0?null:n}vu(){this.qu.forEach(e=>e.Jo()),this.Ah()}m(){this.qu.forEach(e=>e.m()),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(e,n){const s=this.tc(n);this.Ec(e,s),this.Yu.push(e),this.Yu.length===1?this.Ih():this.ar()}Ac(e){const n=this.Hn(e),s=this.Yu.indexOf(e);rn(s!==-1,"Series not found");const r=Se(n);this.Yu.splice(s,1),r.Ql(e),e.m&&e.m(),this.uh.K_(),this.zc(r)}Bh(e,n){const s=Se(this.Hn(e));s.Ql(e,!0),s.Gl(e,n,!0)}Au(){const e=sn.wn();e.rn(),this.rc(e)}Lc(e){const n=sn.wn();n.ln(e),this.rc(n)}cn(){const e=sn.wn();e.cn(),this.rc(e)}dn(e){const n=sn.wn();n.dn(e),this.rc(n)}fn(e){const n=sn.wn();n.fn(e),this.rc(n)}_n(e){const n=sn.wn();n._n(e),this.rc(n)}hn(){const e=sn.wn();e.hn(),this.rc(e)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(e,n){if(rn(n>=0,"Index should be greater or equal to 0"),n===this.Fc(e))return;const s=Se(this.Hn(e));s.Ql(e);const r=this.tc(n);this.Ec(e,r),s.Ma().length===0&&this.zc(s),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(e){const n=this.ec,s=this.sc;if(n===s)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Zu===null||this.Zu.mr!==s||this.Zu.wr!==n)this.Zu={mr:s,wr:n,Hc:new Map};else{const i=this.Zu.Hc.get(e);if(i!==void 0)return i}const r=this.Sl.tt(s,n,e/100);return this.Zu.Hc.set(e,r),r}Uc(e){return this.qu.indexOf(e)}Xi(){return this.Sl}$c(){return this.qc()}qc(e){const n=new q2(this.uh,this);this.qu.push(n);const s=e??this.qu.length-1,r=sn.gn();return r.Qs(s,{tn:0,sn:!0}),this.rc(r),n}tc(e){return rn(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.qu.length,e))<this.qu.length?this.qu[e]:this.qc(e)}Fc(e){return this.qu.findIndex(n=>n.Oo().includes(e))}gc(e,n){const s=new sn(n);if(e!==null){const r=this.qu.indexOf(e);s.Qs(r,{tn:n})}return s}hc(e,n){return n===void 0&&(n=2),this.gc(this.Hn(e),n)}rc(e){this.Gu&&this.Gu(e),this.qu.forEach(n=>n.i_().lr().yt())}Ec(e,n){const s=e.N().priceScaleId,r=s!==void 0?s:this.Oc();n.Gl(e,r),Cm(r)||e.hr(e.N())}nc(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}zc(e){!e.Lo()&&e.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(e),1)}}function Y5(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}function hy(t){return!lc(t)&&!yh(t)}function G5(t){return lc(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(K2||(K2={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(X2||(X2={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Q2||(Q2={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(J2||(J2={}));const Z2=t=>t.getUTCFullYear();function R$(t,e,n){return e.replace(/yyyy/g,(s=>Wr(Z2(s),4))(t)).replace(/yy/g,(s=>Wr(Z2(s)%100,2))(t)).replace(/MMMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,n)).replace(/MMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,n)).replace(/MM/g,(s=>Wr((r=>r.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>Wr((r=>r.getUTCDate())(s),2))(t))}class K5{constructor(e="yyyy-MM-dd",n="default"){this.Yc=e,this.jc=n}__(e){return R$(e,this.Yc,this.jc)}}class j${constructor(e){this.Kc=e||"%h:%m:%s"}__(e){return this.Kc.replace("%h",Wr(e.getUTCHours(),2)).replace("%m",Wr(e.getUTCMinutes(),2)).replace("%s",Wr(e.getUTCSeconds(),2))}}const L$={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class F${constructor(e={}){const n={...L$,...e};this.Qc=new K5(n.Xc,n.Jc),this.td=new j$(n.Zc),this.sd=n.Gc}__(e){return`${this.Qc.__(e)}${this.sd}${this.td.__(e)}`}}function wf(t){return 60*t*60*1e3}function fb(t){return 60*t*1e3}const vf=[{nd:(eC=1,1e3*eC),ed:10},{nd:fb(1),ed:20},{nd:fb(5),ed:21},{nd:fb(30),ed:22},{nd:wf(1),ed:30},{nd:wf(3),ed:31},{nd:wf(6),ed:32},{nd:wf(12),ed:33}];var eC;function tC(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=vf.length-1;n>=0;--n)if(Math.floor(e.getTime()/vf[n].nd)!==Math.floor(t.getTime()/vf[n].nd))return vf[n].ed;return 0}function pb(t){let e=t;if(yh(t)&&(e=$v(t)),!hy(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{rd:Math.round(n.getTime()/1e3),hd:e}}function nC(t){if(!G5(t))throw new Error("time must be of type isUTCTimestamp");return{rd:t}}function $v(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function sC(t){yh(t.time)&&(t.time=$v(t.time))}class rC{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(sC)}(e):sC(e)}createConverterToInternalObj(e){return Se(function(n){return n.length===0?null:hy(n[0].time)||yh(n[0].time)?pb:nC}(e))}key(e){return typeof e=="object"&&"rd"in e?e.rd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.hd===void 0?new Date(1e3*n.rd).getTime():new Date(Date.UTC(n.hd.year,n.hd.month-1,n.hd.day)).getTime()}convertHorzItemToInternal(e){return G5(n=e)?nC(n):hy(n)?pb(n):pb($v(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new F$({Xc:n,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:e.locale}):this.ad=new K5(n,e.locale)}formatHorzItem(e){const n=e;return this.ad.__(new Date(1e3*n.rd))}formatTickmark(e,n){const s=function(i,o,a){switch(i){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),r=this.Ps.timeScale;if(r.tickMarkFormatter!==void 0){const i=r.tickMarkFormatter(e.originalTime,s,n.locale);if(i!==null)return i}return function(i,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=i.hd===void 0?new Date(1e3*i.rd):new Date(Date.UTC(i.hd.year,i.hd.month-1,i.hd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,s,n.locale)}maxTickMarkWeight(e){let n=e.reduce(D$,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(s,r=0){if(s.length===0)return;let i=r===0?null:s[r-1].time.rd,o=i!==null?new Date(1e3*i):null,a=0;for(let l=r;l<s.length;++l){const c=s[l],u=new Date(1e3*c.time.rd);o!==null&&(c.timeWeight=tC(u,o)),a+=c.time.rd-(i||c.time.rd),i=c.time.rd,o=u}if(r===0&&s.length>1){const l=Math.ceil(a/(s.length-1)),c=new Date(1e3*(s[0].time.rd-l));s[0].timeWeight=tC(new Date(1e3*s[0].time.rd),c)}})(e,n)}static ld(e){return ts({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const uc=typeof window<"u";function iC(){return!!uc&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function mb(){return!!uc&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function fy(t){return t+t%2}function $$(t){uc&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Pm{constructor(e,n,s){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!mb(),this.Ld=r=>{this.Od(r)},this.Nd=r=>{if(this.Fd(r)){const i=this.Wd(r);if(++this.dd,this.fd&&this.dd>1){const{Hd:o}=this.Ud(Zs(r),this.pd);o<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}}else{const i=this.Wd(r);if(++this.od,this._d&&this.od>1){const{Hd:o}=this.Ud(Zs(r),this.ud);o<5&&!this.bd&&this.Kd(i,this.Yd.Xd),this.Zd()}}},this.Gd=e,this.Yd=n,this.Ps=s,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(e){this.yd&&this.yd();const n=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",n)},this.Gd.addEventListener("mousemove",n),this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(e){if(this.Id||this.gd!==null||this.Fd(e))return;const n=this.Wd(e);this.Kd(n,this.Yd.nf),this.zd=!0}ef(e){const n=gb(e.changedTouches,Se(this.Ad));if(n===null||(this.Ed=Sf(e),this.Rd!==null)||this.Bd)return;this.Vd=!0;const s=this.Ud(Zs(n),Se(this.gd)),{rf:r,hf:i,Hd:o}=s;if(this.Md||!(o<5)){if(!this.Md){const a=.5*r,l=i>=a&&!this.Ps.af(),c=a>i&&!this.Ps.lf();l||c||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const a=this.Wd(e,n);this.$d(a,this.Yd._f),Na(e)}}}uf(e){if(e.button!==0)return;const n=this.Ud(Zs(e),Se(this.wd)),{Hd:s}=n;if(s>=5&&(this.bd=!0,this.Zd()),this.bd){const r=this.Wd(e);this.Kd(r,this.Yd.cf)}}Ud(e,n){const s=Math.abs(n._t-e._t),r=Math.abs(n.ut-e.ut);return{rf:s,hf:r,Hd:s+r}}df(e){let n=gb(e.changedTouches,Se(this.Ad));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Ad=null,this.Ed=Sf(e),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const s=this.Wd(e,n);if(this.$d(s,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:r}=this.Ud(Zs(n),this.pd);r<30&&!this.Sd&&this.$d(s,this.Yd.qd),this.jd()}else this.Sd||(this.$d(s,this.Yd.pf),this.Yd.pf&&Na(e));this.dd===0&&Na(e),e.touches.length===0&&this.md&&(this.md=!1,Na(e))}Od(e){if(e.button!==0)return;const n=this.Wd(e);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),iC()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(e))if(this.Kd(n,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:s}=this.Ud(Zs(e),this.ud);s<5&&!this.bd&&this.Kd(n,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(n,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(e){if(this.Ad!==null)return;const n=e.changedTouches[0];this.Ad=n.identifier,this.Ed=Sf(e);const s=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=Zs(n),this.Td&&(this.Td(),this.Td=null);{const i=this.ef.bind(this),o=this.df.bind(this);this.Td=()=>{s.removeEventListener("touchmove",i),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,e),240)}const r=this.Wd(e,n);this.$d(r,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=Zs(n))}bf(e){if(e.button!==0)return;const n=this.Gd.ownerDocument.documentElement;iC()&&n.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=Zs(e),this.kd&&(this.kd(),this.kd=null);{const r=this.uf.bind(this),i=this.Od.bind(this);this.kd=()=>{n.removeEventListener("mousemove",r),n.removeEventListener("mouseup",i)},n.addEventListener("mousemove",r),n.addEventListener("mouseup",i)}if(this.Id=!0,this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=Zs(e))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const e=this.Gd.ownerDocument,n=s=>{this.Yd.xf&&(s.composed&&this.Gd.contains(s.composedPath()[0])||s.target&&this.Gd.contains(s.target)||this.Yd.xf())};this.Cd=()=>{e.removeEventListener("touchstart",n)},this.xd=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}mb()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),$$(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",()=>{},{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",e=>this.Rf(e.touches),{passive:!0}),this.Gd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const n=oC(e.touches[0],e.touches[1])/this.Dd;this.Yd.kf(this.Rd,n),Na(e)}},{passive:!1}),this.Gd.addEventListener("touchend",e=>{this.Rf(e.touches)}))}Rf(e){e.length===1&&(this.Vd=!1),e.length!==2||this.Vd||this.md?this.Df():this.Vf(e)}Vf(e){const n=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Dd=oC(e[0],e[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(e){if(this.yd&&this.yd(),this.Fd(e)||!this.zd)return;const n=this.Wd(e);this.Kd(n,this.Yd.Bf),this.zd=!mb()}gf(e){const n=gb(e.touches,Se(this.Ad));if(n===null)return;const s=this.Wd(e,n);this.$d(s,this.Yd.If),this.Sd=!0,this.md=!0}Fd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Sf(e)<this.Ed+500}$d(e,n){n&&n.call(this.Yd,e)}Kd(e,n){n&&n.call(this.Yd,e)}Wd(e,n){const s=n||e,r=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-r.left,localY:s.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Ef:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Af:e.type,zf:s.target,a_:e.view,Lf:()=>{e.type!=="touchstart"&&Na(e)}}}}function oC(t,e){const n=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(n*n+s*s)}function Na(t){t.cancelable&&t.preventDefault()}function Zs(t){return{_t:t.pageX,ut:t.pageY}}function Sf(t){return t.timeStamp||performance.now()}function gb(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class B${constructor(e,n,s){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=e,this.Uf=e.$f()[n],this.qf=e.$f()[s],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return xt({width:this.Uf.Gf().width,height:1})}Jf(){return xt({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(e,n,s){const r=this.Jf();e.fillStyle=this.Hf.N().layout.panes.separatorColor,e.fillRect(n,s,r.width,r.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.jf.appendChild(e);const s=document.createElement("div"),r=s.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.jf.appendChild(s);const i={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new Pm(s,i,{af:()=>!1,lf:()=>!0}),this.Of={ip:s,tp:e}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(e){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(e){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(e){if(this.Of===null)return;const n=this.Uf.ap().Bo()+this.qf.ap().Bo(),s=n/(this.Uf.Gf().height+this.qf.Gf().height),r=30*s;n<=2*r||(this.Wf={lp:e.pageY,op:this.Uf.ap().Bo(),_p:n-r,up:n,cp:s,dp:r},this.Of.tp.style.display="block")}rp(e){const n=this.Wf;if(n===null)return;const s=(e.pageY-n.lp)*n.cp,r=Wu(n.op+s,n.dp,n._p);this.Uf.ap().Io(r),this.qf.ap().Io(n.up-r),this.Hf.Qt().Ih()}hp(e){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function bb(t,e){return t.fp-e.fp}function xb(t,e,n){const s=(t.fp-e.fp)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),n)}class z${constructor(e,n,s,r){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=e,this.xp=n,this.Cp=s,this.Mn=r}Pp(e,n){if(this.pp!==null){if(this.pp.wt===n)return void(this.pp.fp=e);if(Math.abs(this.pp.fp-e)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:n,fp:e}}le(e,n){if(this.pp===null||this.vp===null||n-this.pp.wt>50)return;let s=0;const r=xb(this.pp,this.vp,this.xp),i=bb(this.pp,this.vp),o=[r],a=[i];if(s+=i,this.mp!==null){const c=xb(this.vp,this.mp,this.xp);if(Math.sign(c)===Math.sign(r)){const u=bb(this.vp,this.mp);if(o.push(c),a.push(u),s+=u,this.wp!==null){const d=xb(this.mp,this.wp,this.xp);if(Math.sign(d)===Math.sign(r)){const f=bb(this.mp,this.wp);o.push(d),a.push(f),s+=f}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/s*o[c];Math.abs(l)<this.Sp||(this.gp={fp:e,wt:n},this.bp=l,this.Mp=function(c,u){const d=Math.log(u);return Math.log(1*d/-c)/d}(Math.abs(l),this.Cp))}Du(e){const n=Se(this.gp),s=e-n.wt;return n.fp+this.bp*(Math.pow(this.Cp,s)-1)/Math.log(this.Cp)}Ru(e){return this.gp===null||this.yp(e)===this.Mp}yp(e){const n=e-Se(this.gp).wt;return Math.min(n,this.Mp)}}class U${constructor(e,n){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=e,this.Vp=n,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function ua(t,e){const n=Se(t.ownerDocument).createElement("canvas");t.appendChild(n);const s=PF(n,{options:{allowResizeObserver:!0},transform:(r,i)=>({width:Math.max(r.width,i.width),height:Math.max(r.height,i.height)})});return s.resizeCanvasElement(e),s}function da(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function py(t,e,n,s){t.ih&&t.ih(e,n,s)}function fp(t,e,n,s){t.nt(e,n,s)}function my(t,e,n,s){const r=t(n,s);for(const i of r){const o=i.Tt(s);o!==null&&e(o)}}function yb(t,e){return n=>{var s,r;return function(i){return i.Ft!==void 0}(n)?(((s=n.Ft())==null?void 0:s.ma())??"")!==e?[]:((r=n.ta)==null?void 0:r.call(n,t))??[]:[]}}function aC(t,e,n,s){if(!t.length)return;let r=0;const i=t[0].$t(s,!0);let o=e===1?n/2-(t[0].Fi()-i/2):t[0].Fi()-i/2-n/2;o=Math.max(0,o);for(let a=1;a<t.length;a++){const l=t[a],c=t[a-1],u=c.$t(s,!1),d=l.Fi(),f=c.Fi();if(e===1?d>f-u:d<f+u){const p=f-u*e;l.Wi(p);const m=p-e*u/2;if((e===1?m<0:m>n)&&o>0){const b=e===1?-1-m:m-n,x=Math.min(b,o);for(let g=r;g<t.length;g++)t[g].Wi(t[g].Fi()+e*x);o-=x}}else r=a,o=e===1?f-u-d:d-(f+u)}}class lC{constructor(e,n,s,r){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new d0(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=e,this.Ps=n,this.Ml=n.layout,this.Ju=s,this.jp=r==="left",this.Kp=yb("normal",r),this.Xp=yb("top",r),this.Zp=yb("bottom",r),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=ua(this.jf,xt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=ua(this.jf,xt({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new Pm(this.Jp.canvasElement,a,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),da(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),da(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const e=this.Ju.N();return this.Wp!==e.k&&(this.Fp.Bn(),this.Wp=e.k),e}nv(){if(this.Yi===null)return 0;let e=0;const n=this.sv(),s=Se(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));s.save();const r=this.Yi.Da();s.font=this.ev(),r.length>0&&(e=Math.max(this.Fp.Vi(s,r[0].Za),this.Fp.Vi(s,r[r.length-1].Za)));const i=this.rv();for(let c=i.length;c--;){const u=this.Fp.Vi(s,i[c].ri());u>e&&(e=u)}const o=this.Yi.zt();if(o!==null&&this.Op!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Yi.Ts(1,o),u=this.Yi.Ts(this.Op.height-2,o);e=Math.max(e,this.Fp.Vi(s,this.Yi.Zi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Fp.Vi(s,this.Yi.Zi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;s.restore();const l=e||34;return fy(Math.ceil(n.S+n.C+n.B+n.I+5+l))}hv(e){this.Op!==null&&Xo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`)}av(){return Se(this.Op).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=e,e.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const e=this.Pt.ap();this.Pt.qp().Qt().Zo(e,Se(this.Ft()))}lv(e){if(this.Op===null)return;const n={colorSpace:this.Pt.qp().N().layout.colorSpace};if(e!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const r=ca(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i)}),this.Pt.cv(r,this.Zp),this.dv(r),this.Pt.cv(r,this.Kp),this.fv(r))}this.Jp.applySuggestedBitmapSize();const s=ca(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.pv(s),this.Pt.cv(s,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}yt(){var e;(e=this.Yi)==null||e.Da()}ep(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!0,n.Uo(s,this.Yi,e.localY)}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap(),r=this.Yi;n.$o(s,r,e.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),n=this.Pt.ap(),s=this.Yi;this.Np&&(this.Np=!1,e.qo(n,s))}hp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!1,n.qo(s,this.Yi)}tv(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(e){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(e){this.vv(0)}rv(){const e=[],n=this.Yi===null?void 0:this.Yi;return(s=>{for(let r=0;r<s.length;++r){const i=s[r].Ws(this.Pt.ap(),n);for(let o=0;o<i.length;o++)e.push(i[o])}})(this.Pt.ap().Dt()),e}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.Pt.ap().Qt(),o=i.$(),a=i.Wc();o===a?Sm(e,0,0,s,r,o):R5(e,0,0,s,r,o,a)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const r=Math.max(1,Math.floor(this.sv().S*s));let i;i=this.jp?n.width-r:0,e.fillRect(i,0,r,n.height)}dv(e){if(this.Op===null||this.Yi===null)return;const n=this.Yi.Da(),s=this.Yi.N(),r=this.sv(),i=this.jp?this.Op.width-r.C:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=s.borderColor;const c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),d=Math.round(r.C*a);o.beginPath();for(const f of n)o.rect(Math.floor(i*a),Math.round(f.Pa*l)-u,d,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.ev(),o.fillStyle=s.textColor??this.Ml.textColor,o.textAlign=this.jp?"right":"left",o.textBaseline="middle";const a=this.jp?Math.round(i-r.B):Math.round(i+r.C+r.B),l=n.map(c=>this.Fp.Di(o,c.Za));for(let c=n.length;c--;){const u=n[c];o.fillText(u.Za,a,u.Pa+l[c])}})}ov(){if(this.Op===null||this.Yi===null)return;let e=this.Op.height/2;const n=[],s=this.Yi.Dt().slice(),r=this.Pt.ap(),i=this.sv();this.Yi===r.$n()&&this.Pt.ap().Dt().forEach(l=>{r.Un(l)&&s.push(l)});const o=this.Yi.Ma()[0],a=this.Yi;s.forEach(l=>{const c=l.Ws(r,a);c.forEach(u=>{u.Wi(null),u.Hi()&&n.push(u)}),o===l&&c.length>0&&(e=c[0].Ii())}),n.forEach(l=>l.Wi(l.Ii())),this.Yi.N().alignLabels&&this.mv(n,i,e)}mv(e,n,s){if(this.Op===null)return;const r=e.filter(o=>o.Ii()<=s),i=e.filter(o=>o.Ii()>s);r.sort((o,a)=>a.Ii()-o.Ii()),r.length&&i.length&&i.push(r[0]),i.sort((o,a)=>o.Ii()-a.Ii());for(const o of e){const a=Math.floor(o.$t(n)/2),l=o.Ii();l>-a&&l<a&&o.Wi(a),l>this.Op.height-a&&l<this.Op.height+a&&o.Wi(this.Op.height-a)}aC(r,1,this.Op.height,n),aC(i,-1,this.Op.height,n)}fv(e){if(this.Op===null)return;const n=this.rv(),s=this.sv(),r=this.jp?"right":"left";n.forEach(i=>{i.Ui()&&i.Tt(Se(this.Yi)).nt(e,s,this.Fp,r)})}pv(e){if(this.Op===null||this.Yi===null)return;const n=this.Pt.qp().Qt(),s=[],r=this.Pt.ap(),i=n.uc().Ws(r,this.Yi);i.length&&s.push(i);const o=this.sv(),a=this.jp?"right":"left";s.forEach(l=>{l.forEach(c=>{c.Tt(Se(this.Yi)).nt(e,o,this.Fp,a)})})}vv(e){this.jf.style.cursor=e===1?"ns-resize":"default"}_l(){const e=this.nv();this.Hp<e&&this.Pt.qp().Qt().Ih(),this.Hp=e}ev(){return u0(this.Ml.fontSize,this.Ml.fontFamily)}}function W$(t,e){var n;return((n=t.Jh)==null?void 0:n.call(t,e))??[]}function cC(t,e){var n;return((n=t.Fs)==null?void 0:n.call(t,e))??[]}function uC(t,e){var n;return((n=t.us)==null?void 0:n.call(t,e))??[]}function H$(t,e){var n;return((n=t.Xh)==null?void 0:n.call(t,e))??[]}class Bv{constructor(e,n){this.Op=xt({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new Ut,this.Cv=new Ut,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=e,this.Vv=n,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(s),this.Gp=ua(s,xt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jp=ua(s,xt({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const i=this.Jp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new Pm(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),da(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),da(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return Se(this.Vv)}Lv(e){var n;this.Vv!==null&&this.Vv.t_().u(this),this.Vv=e,this.Vv!==null&&this.Vv.t_().i(Bv.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new U$(this.Iv,this.Vp),this.Mv.yt()):((n=this.Mv)==null||n.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const e=this.Vv.Wo();this.wv._s(Se(e))}if(this.gv!==null){const e=this.Vv.Ho();this.gv._s(Se(e))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(e){this.Vv&&this.Vv.Io(e)}sf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}Sf(e){this.Fv(),this.Hv(),this.Wv(e.localX,e.localY,e)}nf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}mf(e){this.Vv!==null&&(this.Fv(),this.Uv(e))}Xd(e){this.Vv!==null&&this.$v(this.Cv,e)}qd(e){this.Xd(e)}cf(e){this.Fv(),this.qv(e),this.Wv(e.localX,e.localY,e)}vf(e){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(e))}pf(e){this.Vv!==null&&this.Uv(e)}If(e){if(this.yv=!0,this.kv===null){const n={x:e.localX,y:e.localY};this.jv(n,n,e)}}Bf(e){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(e,n){if(!this.Vp.N().handleScale.pinch)return;const s=5*(n-this.Pv);this.Pv=n,this.ts().bc(e._t,s)}Mf(e){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const n=this.ts().uc();this.kv!==null&&n.Vt()&&(this.Rv={x:n.si(),y:n.ni()},this.kv={x:e.localX,y:e.localY})}_f(e){if(this.Vv===null)return;const n=e.localX,s=e.localY;if(this.kv===null)this.qv(e);else{this.Tv=!1;const r=Se(this.Rv),i=r.x+(n-this.kv.x),o=r.y+(s-this.kv.y);this.Wv(i,o,e)}}ff(e){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(e)}jn(e,n){const s=this.Vv;return s===null?null:q5(s,e,n)}Jv(e,n){Se(n==="left"?this.wv:this.gv).hv(xt({width:e,height:this.Op.height}))}Gf(){return this.Op}hv(e){Xo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Qv(){const e=Se(this.Vv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const n of e.Ma())if(e.Un(n)){const s=n.Ft();s!==null&&e.Fo(s),n.Ns()}for(const n of e.s_())n.Ns()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e!==null&&e.drawImage(o,n,s)}}lv(e){if(e===0||this.Vv===null)return;e>1&&this.Qv(),this.wv!==null&&this.wv.lv(e),this.gv!==null&&this.gv.lv(e);const n={colorSpace:this.Vp.N().layout.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=ca(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i)}),this.Vv&&(this.tm(r,W$),this.im(r),this.tm(r,cC),this.tm(r,uC)))}this.Jp.applySuggestedBitmapSize();const s=ca(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.sm(s),this.tm(s,H$),this.tm(s,uC))}nm(){return this.wv}rm(){return this.gv}cv(e,n){this.tm(e,n)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(e){this.$v(this.xv,e)}$v(e,n){const s=n.localX,r=n.localY;e.v()&&e.p(this.ts().Et().cu(s),{x:s,y:r},n)}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.ts(),o=i.$(),a=i.Wc();o===a?Sm(e,0,0,s,r,a):R5(e,0,0,s,r,o,a)}im(e){const n=Se(this.Vv),s=n.i_().lr().Tt(n);s!==null&&s.nt(e,!1)}sm(e){this.hm(e,cC,fp,this.ts().uc())}tm(e,n){const s=Se(this.Vv),r=s.Dt(),i=s.s_();for(const o of i)this.hm(e,n,py,o);for(const o of r)this.hm(e,n,py,o);for(const o of i)this.hm(e,n,fp,o);for(const o of r)this.hm(e,n,fp,o)}hm(e,n,s,r){const i=Se(this.Vv),o=i.Qt().ac(),a=o!==null&&o.n_===r,l=o!==null&&a&&o.e_!==void 0?o.e_.Xn:void 0;my(n,c=>s(c,e,a,l),r,i)}Ov(){if(this.Vv===null)return;const e=this.Vp,n=this.Vv.Wo().N().visible,s=this.Vv.Ho().N().visible;n||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),s||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const r=e.Qt().Bc();n&&this.wv===null&&(this.wv=new lC(this,e.N(),r,"left"),this.Ev.appendChild(this.wv.Zf())),s&&this.gv===null&&(this.gv=new lC(this,e.N(),r,"right"),this.Av.appendChild(this.gv.Zf()))}am(e){return e.Ef&&this.yv||this.kv!==null}lm(e){return Math.max(0,Math.min(e,this.Op.width-1))}om(e){return Math.max(0,Math.min(e,this.Op.height-1))}Wv(e,n,s){this.ts().Tc(this.lm(e),this.om(n),s,Se(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(e,n,s){this.kv=e,this.Tv=!1,this.Wv(n.x,n.y,s);const r=this.ts().uc();this.Rv={x:r.si(),y:r.ni()}}ts(){return this.Vp.Qt()}Yv(e){if(!this.Sv)return;const n=this.ts(),s=this.ap();if(n.Ko(s,s.ks()),this.bv=null,this.Sv=!1,n.Pc(),this.Dv!==null){const r=performance.now(),i=n.Et();this.Dv.le(i.gu(),r),this.Dv.Ru(r)||n._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)Se(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(e){if(this.Vv===null)return;const n=this.ts(),s=n.Et();if(s.Ki())return;const r=this.Vp.N(),i=r.handleScroll,o=r.kineticScroll;if((!i.pressedMouseMove||e.Ef)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Ef))return;const a=this.Vv.ks(),l=performance.now();if(this.bv!==null||this.am(e)||(this.bv={x:e.clientX,y:e.clientY,rd:l,_m:e.localX,um:e.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==e.clientX||this.bv.y!==e.clientY)){if(e.Ef&&o.touch||!e.Ef&&o.mouse){const c=s.mu();this.Dv=new z$(.2/c,7/c,.997,15/c),this.Dv.Pp(s.gu(),this.bv.rd)}else this.Dv=null;a.Ki()||n.Yo(this.Vv,a,e.localY),n.xc(e.localX),this.Sv=!0}this.Sv&&(a.Ki()||n.jo(this.Vv,a,e.localY),n.Cc(e.localX),this.Dv!==null&&this.Dv.Pp(s.gu(),l))}}class dC{constructor(e,n,s,r,i){this.xt=!0,this.Op=xt({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=e==="left",this.Ju=s.Bc,this.Ps=n,this.dm=r,this.fm=i,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=ua(this.jf,xt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),da(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(e){Xo(this.Op,e)||(this.Op=e,this.Gp.resizeCanvasElement(e),this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.xt=!0)}lv(e){if(e<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const n=ca(this.Gp,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(s=>{this._v(s),this.uv(s)})}Jf(){return this.Gp.bitmapSize}Qf(e,n,s){const r=this.Jf();r.width>0&&r.height>0&&e.drawImage(this.Gp.canvasElement,n,s)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(!this.dm())return;e.fillStyle=this.Ps.timeScale.borderColor;const i=Math.floor(this.Ju.N().S*s),o=Math.floor(this.Ju.N().S*r),a=this.jp?n.width-i:0;e.fillRect(a,0,i,o)}_v({context:e,bitmapSize:n}){Sm(e,0,0,n.width,n.height,this.fm())}}function zv(t){return e=>{var n;return((n=e.ia)==null?void 0:n.call(e,t))??[]}}const V$=zv("normal"),q$=zv("top"),Y$=zv("bottom");class G${constructor(e,n){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=xt({width:0,height:0}),this.gm=new Ut,this.Fp=new d0(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=e,this.o_=n,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=ua(this.Sm,xt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jp=ua(this.Sm,xt({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const r=this.Jp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new Pm(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),da(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),da(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(e){if(this.wm)return;this.wm=!0;const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.Mc(e.localX)}Mf(e){this.Sf(e)}xf(){const e=this.Vp.Qt();!e.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&e.kc())}cf(e){const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.yc(e.localX)}_f(e){this.cf(e)}vf(){this.wm=!1;const e=this.Vp.Qt();e.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||e.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(e,n,s){Xo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.gm.p(e)),this.pm!==null&&this.pm.hv(xt({width:n,height:e.height})),this.vm!==null&&this.vm.hv(xt({width:s,height:e.height}))}Tm(){const e=this.Rm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}lv(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=ca(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i),this.Vm(r,Y$)}),this.dv(r),this.Vm(r,V$)),this.pm!==null&&this.pm.lv(e),this.vm!==null&&this.vm.lv(e)}this.Jp.applySuggestedBitmapSize();const s=ca(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],s),this.Vm(s,q$))}Vm(e,n){const s=this.Vp.Qt().js();for(const r of s)my(n,i=>py(i,e,!1,void 0),r,void 0);for(const r of s)my(n,i=>fp(i,e,!1,void 0),r,void 0)}_v({context:e,bitmapSize:n}){Sm(e,0,0,n.width,n.height,this.Vp.Qt().Wc())}uv({context:e,bitmapSize:n,verticalPixelRatio:s}){if(this.Vp.N().timeScale.borderVisible){e.fillStyle=this.Im();const r=Math.max(1,Math.floor(this.Rm().S*s));e.fillRect(0,0,n.width,r)}}dv(e){const n=this.Vp.Qt().Et(),s=n.Da();if(!s||s.length===0)return;const r=this.o_.maxTickMarkWeight(s),i=this.Rm(),o=n.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.Im(),a.fillStyle=this.Im();const u=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();const f=Math.round(i.C*c);for(let p=s.length;p--;){const m=Math.round(s[p].coord*l);a.rect(m-d,0,u,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=i.S+i.C+i.A+i.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.ev();for(const c of s)if(c.weight<r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.Vp.N().timeScale.allowBoldLabels&&(a.font=this.Am());for(const c of s)if(c.weight>=r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Em(e,n,s){const r=this.Fp.Vi(e,s),i=r/2,o=Math.floor(n-i)+.5;return o<0?n+=Math.abs(0-o):o+r>this.Op.width&&(n-=Math.abs(this.Op.width-(o+r))),n}Bm(e,n){const s=this.Rm();for(const r of e)for(const i of r.cs())i.Tt().nt(n,s)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return u0(this.F(),this.Ps.fontFamily)}Am(){return u0(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new d0,Dm:0});const e=this.M,n=this.ev();if(e.k!==n){const s=this.F();e.P=s,e.k=n,e.A=3*s/12,e.V=3*s/12,e.Ji=9*s/12,e.L=0,e.Dm=4*s/12,e.Gi.Bn()}return this.M}vv(e){this.jf.style.cursor=e===1?"ew-resize":"default"}xm(){const e=this.Vp.Qt(),n=e.N();n.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),n.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const s={Bc:this.Vp.Qt().Bc()},r=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,i=()=>e.Wc();n.leftPriceScale.visible&&this.pm===null&&(this.pm=new dC("left",n,s,r,i),this.Mm.appendChild(this.pm.Zf())),n.rightPriceScale.visible&&this.vm===null&&(this.vm=new dC("right",n,s,r,i),this.bm.appendChild(this.vm.Zf()))}}var eP;const K$=!!uc&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!uc&&((eP=navigator==null?void 0:navigator.userAgentData)!=null&&eP.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class X${constructor(e,n,s){var r;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new Ut,this.Cv=new Ut,this.Xu=new Ut,this.Um=null,this.$m=null,this.Dp=e,this.Ps=n,this.o_=s,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(r=this.kp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),wb(this.Ps)&&this.Km(!0),this.ts=new O$(this.Gu.bind(this),this.Ps,s),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new G$(this,this.o_),this.qm.appendChild(this.Zm.Zf());const i=n.autoSize&&this.Gm();let o=this.Ps.width,a=this.Ps.height;if(i||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Jm(o,a),this.Qm(),e.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.zm)this.qm.removeChild(e.Zf()),e.Xv().u(this),e.Zv().u(this),e.m();this.zm=[];for(const e of this.Lm)this.sw(e);this.Lm=[],Se(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(e,n,s=!1){if(this.il===n&&this.Mo===e)return;const r=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return xt({width:l-l%2,height:c-c%2})}(xt({width:e,height:n}));this.il=r.height,this.Mo=r.width;const i=this.il+"px",o=this.Mo+"px";Se(this.kp).style.height=i,Se(this.kp).style.width=o,this.qm.style.height=i,this.qm.style.width=o,s?this.ew(sn.gn(),performance.now()):this.ts.Ih()}lv(e){e===void 0&&(e=sn.gn());for(let n=0;n<this.zm.length;n++)this.zm[n].lv(e.en(n).tn);this.Ps.timeScale.visible&&this.Zm.lv(e.nn())}hr(e){var r;const n=wb(this.Ps);this.ts.hr(e);const s=wb(this.Ps);s!==n&&this.Km(s),(r=e.layout)!=null&&r.panes&&this.rw(),this.tw(),this.hw(e)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(e=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const n=this.lw(null),s=document.createElement("canvas");s.width=n.width,s.height=n.height;const r=Se(s.getContext("2d"));return this.lw(r,e),s}ow(e){return e==="left"&&!this._w()||e==="right"&&!this.uw()||this.zm.length===0?0:Se(e==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(e){this.$m=e,this.$m?this.ip().style.setProperty("cursor",e):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(e){return Vn(this.zm[e]).Gf()}rw(){this.Lm.forEach(e=>{e.yt()})}hw(e){(e.autoSize!==void 0||!this.Um||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Um&&this.Gm(),e.autoSize===!1&&this.Um!==null&&this.nw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Jm(e.width||this.Mo,e.height||this.il))}lw(e,n){let s=0,r=0;const i=this.zm[0],o=(l,c)=>{let u=0;for(let d=0;d<this.zm.length;d++){const f=this.zm[d],p=Se(l==="left"?f.nm():f.rm()),m=p.Jf();if(e!==null&&p.Qf(e,c,u,n),u+=m.height,d<this.zm.length-1){const b=this.Lm[d],x=b.Jf();e!==null&&b.Qf(e,c,u),u+=x.height}}};this._w()&&(o("left",0),s+=Se(i.nm()).Jf().width);for(let l=0;l<this.zm.length;l++){const c=this.zm[l],u=c.Jf();if(e!==null&&c.Qf(e,s,r,n),r+=u.height,l<this.zm.length-1){const d=this.Lm[l],f=d.Jf();e!==null&&d.Qf(e,s,r),r+=f.height}}s+=i.Jf().width,this.uw()&&(o("right",s),s+=Se(i.rm()).Jf().width);const a=(l,c,u)=>{Se(l==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(Se(e),c,u)};if(this.Ps.timeScale.visible){const l=this.Zm.Jf();if(e!==null){let c=0;this._w()&&(a("left",c,r),c=Se(i.nm()).Jf().width),this.Zm.Qf(e,c,r,n),c+=l.width,this.uw()&&a("right",c,r)}r+=l.height}return xt({width:s,height:r})}mw(){let e=0,n=0,s=0;for(const x of this.zm)this._w()&&(n=Math.max(n,Se(x.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(s=Math.max(s,Se(x.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),e+=x.Bo();n=fy(n),s=fy(s);const r=this.Mo,i=this.il,o=Math.max(r-n-s,0),a=1*this.Lm.length,l=this.Ps.timeScale.visible;let c=l?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const d=a+c,f=i<d?0:i-d,p=f/e;let m=0;const b=window.devicePixelRatio||1;for(let x=0;x<this.zm.length;++x){const g=this.zm[x];g.Lv(this.ts.$s()[x]);let y=0,S=0;S=x===this.zm.length-1?Math.ceil((f-m)*b)/b:Math.round(g.Bo()*p*b)/b,y=Math.max(S,2),m+=y,g.hv(xt({width:o,height:y})),this._w()&&g.Jv(n,"left"),this.uw()&&g.Jv(s,"right"),g.ap()&&this.ts.dc(g.ap(),y)}this.Zm.km(xt({width:l?o:0,height:c}),l?n:0,l?s:0),this.ts.Eo(o),this.Nm!==n&&(this.Nm=n),this.Fm!==s&&(this.Fm=s)}Km(e){e?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return K$?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.ww(e),s=n*e.deltaX/100,r=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.Ps.handleScale.mouseWheel){const i=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(o,i)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*s)}ew(e,n){var r;const s=e.nn();s===3&&this.gw(),s!==3&&s!==2||(this.Mw(e),this.bw(e,n),this.Zm.yt(),this.zm.forEach(i=>{i.Nv()}),((r=this.Wm)==null?void 0:r.nn())===3&&(this.Wm.vn(e),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,n),e=this.Wm,this.Wm=null)),this.lv(e)}bw(e,n){for(const s of e.pn())this.mn(s,n)}Mw(e){const n=this.ts.$s();for(let s=0;s<n.length;s++)e.en(s).sn&&n[s].Go()}mn(e,n){const s=this.ts.Et();switch(e.an){case 0:s.Au();break;case 1:s.zu(e.Wt);break;case 2:s.dn(e.Wt);break;case 3:s.fn(e.Wt);break;case 4:s.Su();break;case 5:e.Wt.Ru(n)||s.fn(e.Wt.Du(n))}}Gu(e){this.Wm!==null?this.Wm.vn(e):this.Wm=e,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame(n=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const s=this.Wm;this.Wm=null,this.ew(s,n);for(const r of s.pn())if(r.an===5&&!r.Wt.Ru(n)){this.Qt()._n(r.Wt);break}}}))}gw(){this.Qm()}sw(e){this.qm.removeChild(e.Zf()),e.m()}Qm(){const e=this.ts.$s(),n=e.length,s=this.zm.length;for(let r=n;r<s;r++){const i=Vn(this.zm.pop());this.qm.removeChild(i.Zf()),i.Xv().u(this),i.Zv().u(this),i.m();const o=this.Lm.pop();o!==void 0&&this.sw(o)}for(let r=s;r<n;r++){const i=new Bv(this,e[r]);if(i.Xv().i(this.Sw.bind(this,i),this),i.Zv().i(this.xw.bind(this,i),this),this.zm.push(i),r>0){const o=new B$(this,r-1,r);this.Lm.push(o),this.qm.insertBefore(o.Zf(),this.Zm.Zf())}this.qm.insertBefore(i.Zf(),this.Zm.Zf())}for(let r=0;r<n;r++){const i=e[r],o=this.zm[r];o.ap()!==i?o.Lv(i):o.zv()}this.tw(),this.mw()}Cw(e,n,s,r){var d;const i=new Map;e!==null&&this.ts.js().forEach(f=>{const p=f.Xs().Fr(e);p!==null&&i.set(f,p)});let o;if(e!==null){const f=(d=this.ts.Et().ss(e))==null?void 0:d.originalTime;f!==void 0&&(o=f)}const a=this.Qt().ac(),l=a!==null&&a.n_ instanceof Em?a.n_:void 0,c=a!==null&&a.e_!==void 0?a.e_.Kn:void 0,u=this.Pw(r);return{yw:o,Re:e??void 0,kw:n??void 0,Tw:u!==-1?u:void 0,Rw:l,Dw:i,Vw:c,Bw:s??void 0}}Pw(e){let n=-1;if(e)n=this.zm.indexOf(e);else{const s=this.Qt().uc().Us();s!==null&&(n=this.Qt().$s().indexOf(s))}return n}Sw(e,n,s,r){this.xv.p(()=>this.Cw(n,s,r,e))}xw(e,n,s,r){this.Cv.p(()=>this.Cw(n,s,r,e))}Xm(e,n,s){var r;this.dw(((r=this.Qt().ac())==null?void 0:r.h_)??null),this.Xu.p(()=>this.Cw(e,n,s))}tw(){const e=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=e}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.Jm(n.contentRect.width,n.contentRect.height)}),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function wb(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function Q$(t){return t.open===void 0&&t.value===void 0}function J$(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function hC(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.color!==void 0&&(i.R=n.color),i}function Z$(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.lineColor!==void 0&&(i.vt=n.lineColor),n.topColor!==void 0&&(i.mr=n.topColor),n.bottomColor!==void 0&&(i.wr=n.bottomColor),i}function eB(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.topLineColor!==void 0&&(i.gr=n.topLineColor),n.bottomLineColor!==void 0&&(i.Mr=n.bottomLineColor),n.topFillColor1!==void 0&&(i.br=n.topFillColor1),n.topFillColor2!==void 0&&(i.Sr=n.topFillColor2),n.bottomFillColor1!==void 0&&(i.Cr=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(i.Pr=n.bottomFillColor2),i}function tB(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),r}function nB(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),n.borderColor!==void 0&&(r.Ht=n.borderColor),n.wickColor!==void 0&&(r.vr=n.wickColor),r}function sB(t,e,n,s,r){const i=Vn(r)(n),o=Math.max(...i),a=Math.min(...i),l=i[i.length-1],c=[l,o,a,l],{time:u,color:d,...f}=n;return{Re:e,wt:t,Wt:c,yw:s,se:f,R:d}}function Zc(t){return t.Wt!==void 0}function fC(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function po(t){return(e,n,s,r,i,o)=>function(a,l){return l?l(a):Q$(a)}(s,o)?fC({wt:e,Re:n,yw:r},s):fC(t(e,n,s,r,i),s)}function pC(t){return{Candlestick:po(nB),Bar:po(tB),Area:po(Z$),Baseline:po(eB),Histogram:po(hC),Line:po(hC),Custom:po(sB)}[t]}function mC(t){return{Re:0,Ew:new Map,Hh:t}}function gC(t,e){if(t!==void 0&&t.length!==0)return{Aw:e.key(t[0].wt),zw:e.key(t[t.length-1].wt)}}function bC(t){let e;return t.forEach(n=>{e===void 0&&(e=n.yw)}),Vn(e)}class rB{constructor(e){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=e}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(e,n){let s=this.Lw.size!==0,r=!1;const i=this.Ow.get(e);if(i!==void 0)if(this.Ow.size===1)s=!1,r=!0,this.Lw.clear();else for(const l of this.Fw)l.pointData.Ew.delete(e)&&(r=!0);let o=[];if(n.length!==0){const l=n.map(p=>p.time),c=this.o_.createConverterToInternalObj(n),u=pC(e.Rr()),d=e.ca(),f=e.fa();o=n.map((p,m)=>{const b=c(p.time),x=this.o_.key(b);let g=this.Lw.get(x);g===void 0&&(g=mC(b),this.Lw.set(x,g),r=!0);const y=u(b,g.Re,p,l[m],d,f);return g.Ew.set(e,y),y})}s&&this.Hw(),this.Uw(e,o);let a=-1;if(r){const l=[];this.Lw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:bC(c.Ew)})}),l.sort((c,u)=>this.o_.key(c.time)-this.o_.key(u.time)),a=this.$w(l)}return this.qw(e,a,function(l,c,u){const d=gC(l,u),f=gC(c,u);if(d!==void 0&&f!==void 0)return{Yw:!1,zh:d.zw>=f.zw&&d.Aw>=f.Aw}}(this.Ow.get(e),i,this.o_))}Ac(e){return this.Ww(e,[])}jw(e,n,s){const r=n;(function(x){x.yw===void 0&&(x.yw=x.time)})(r),this.o_.preprocessData(n);const i=this.o_.createConverterToInternalObj([n])(n.time),o=this.Nw.get(e);if(!s&&o!==void 0&&this.o_.key(i)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${i}`);let a=this.Lw.get(this.o_.key(i));if(s&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=a===void 0;a===void 0&&(a=mC(i),this.Lw.set(this.o_.key(i),a));const c=pC(e.Rr()),u=e.ca(),d=e.fa(),f=c(i,a.Re,n,r.yw,u,d);a.Ew.set(e,f),s?this.Kw(e,f,a.Re):this.Xw(e,f);const p={zh:Zc(f),Yw:s};if(!l)return this.qw(e,-1,p);const m={timeWeight:0,time:a.Hh,pointData:a,originalTime:bC(a.Ew)},b=cc(this.Fw,this.o_.key(m.time),(x,g)=>this.o_.key(x.time)<g);this.Fw.splice(b,0,m);for(let x=b;x<this.Fw.length;++x)kf(this.Fw[x].pointData,x);return this.o_.fillWeightsForPoints(this.Fw,b),this.qw(e,b,p)}Zw(e,n){const s=this.Ow.get(e);if(s===void 0||n<=0)return[[],this.Gw()];n=Math.min(n,s.length);const r=s.splice(-n).reverse();s.length===0?this.Nw.delete(e):this.Nw.set(e,s[s.length-1].wt);for(const i of r){const o=this.Lw.get(this.o_.key(i.wt));if(o&&(o.Ew.delete(e),o.Ew.size===0)){this.Lw.delete(this.o_.key(o.Hh)),this.Fw.splice(o.Re,1);for(let a=o.Re;a<this.Fw.length;++a)kf(this.Fw[a].pointData,a)}}return[r,this.qw(e,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(e,n){let s=this.Ow.get(e);s===void 0&&(s=[],this.Ow.set(e,s));const r=s.length!==0?s[s.length-1]:null;r===null||this.o_.key(n.wt)>this.o_.key(r.wt)?Zc(n)&&s.push(n):Zc(n)?s[s.length-1]=n:s.splice(-1,1),this.Nw.set(e,n.wt)}Kw(e,n,s){const r=this.Ow.get(e);if(r===void 0)return;const i=cc(r,s,(o,a)=>o.Re<a);Zc(n)?r[i]=n:r.splice(i,1)}Uw(e,n){n.length!==0?(this.Ow.set(e,n.filter(Zc)),this.Nw.set(e,n[n.length-1].wt)):(this.Ow.delete(e),this.Nw.delete(e))}Hw(){for(const e of this.Fw)e.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(e.time))}$w(e){let n=-1;for(let s=0;s<this.Fw.length&&s<e.length;++s){const r=this.Fw[s],i=e[s];if(this.o_.key(r.time)!==this.o_.key(i.time)){n=s;break}i.timeWeight=r.timeWeight,kf(i.pointData,s)}if(n===-1&&this.Fw.length!==e.length&&(n=Math.min(this.Fw.length,e.length)),n===-1)return-1;for(let s=n;s<e.length;++s)kf(e[s].pointData,s);return this.o_.fillWeightsForPoints(e,n),this.Fw=e,n}Jw(){if(this.Ow.size===0)return null;let e=0;return this.Ow.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].Re))}),e}qw(e,n,s){const r=this.Gw();if(n!==-1)this.Ow.forEach((i,o)=>{r.Oo.set(o,{se:i,Qw:o===e?s:void 0})}),this.Ow.has(e)||r.Oo.set(e,{se:[],Qw:s}),r.Et.tg=this.Fw,r.Et.ig=n;else{const i=this.Ow.get(e);r.Oo.set(e,{se:i||[],Qw:s})}return r}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function kf(t,e){t.Re=e,t.Ew.forEach(n=>{n.Re=e})}function iB(t,e){return t.wt<e}function oB(t,e){return e<t.wt}function aB(t,e,n){const s=e.Uh(),r=e.bi(),i=cc(t,s,iB),o=U5(t,r,oB);if(!n)return{from:i,to:o};let a=i,l=o;return i>0&&i<t.length&&t[i].wt>=s&&(a=i-1),o>0&&o<t.length&&t[o-1].wt<=r&&(l=o+1),{from:a,to:l}}class lB{constructor(e,n,s){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=e,this.Qn=n,this.ag=s}yt(e){this.sg=!0,e==="data"&&(this.ng=!0),e==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const e=this.Jn.Ft(),n=this.Qn.Et();if(this.ug(),n.Ki()||e.Ki())return;const s=n.Pe();if(s===null||this.Jn.Xs().zr()===0)return;const r=this.Jn.zt();r!==null&&(this.hg=aB(this.rg,s,this.ag),this.fg(e,n,r.Wt),this.pg())}}class cB{constructor(e,n){this.vg=e,this.Yi=n}nt(e,n,s){this.vg.draw(e,this.Yi,n,s)}}class uB extends lB{constructor(e,n,s){super(e,n,!1),this.sh=s,this.og=new cB(this.sh.renderer(),r=>{const i=e.zt();return i===null?null:e.Ft().Nt(r,i.Wt)})}da(e){return this.sh.priceValueBuilder(e)}pa(e){return this.sh.isWhitespace(e)}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(n=>({wt:n.Re,_t:NaN,...e.Dr(n.Re),mg:n.se}))}fg(e,n){n.uu(this.rg,DF(this.hg))}pg(){this.sh.update({bars:this.rg.map(dB),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function dB(t){return{x:t._t,time:t.wt,originalData:t.mg,barColor:t.cr}}const hB={color:"#2196f3"},fB=(t,e,n)=>{const s=ji(n);return new uB(t,e,s)};function Uv(t){const e={value:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function xC(t){const e=Uv(t);return t.R!==void 0&&(e.color=t.R),e}function pB(t){const e=Uv(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function mB(t){const e=Uv(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function X5(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function gB(t){const e=X5(t);return t.R!==void 0&&(e.color=t.R),e}function bB(t){const e=X5(t),{R:n,Ht:s,vr:r}=t;return n!==void 0&&(e.color=n),s!==void 0&&(e.borderColor=s),r!==void 0&&(e.wickColor=r),e}function pp(t){return{Area:pB,Line:xC,Baseline:mB,Histogram:xC,Bar:gB,Candlestick:bB,Custom:xB}[t]}function xB(t){const e=t.yw;return{...t.se,time:e}}const yB={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},wB={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},vB={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:O5,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},vb={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},SB={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function yC(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:vB,crosshair:yB,grid:wB,overlayPriceScales:{...vb},leftPriceScale:{...vb,visible:!1},rightPriceScale:{...vb,visible:!0},timeScale:SB,localization:{locale:uc?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Q5{constructor(e,n,s){this.Hf=e,this.wg=n,this.gg=s??0}applyOptions(e){this.Hf.Qt().oc(this.wg,e,this.gg)}options(){return this.Yi().N()}width(){return Cm(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Fl(new Tn(e.from,e.to))}getVisibleRange(){let e,n,s=this.Yi().Qe();if(s===null)return null;if(this.Yi().Ja()){const r=this.Yi().fo(),i=Y5(r);s=Ja(s,this.Yi().tl()),e=Number((Math.round(s.$e()/r)*r).toFixed(i)),n=Number((Math.round(s.qe()/r)*r).toFixed(i))}else e=s.$e(),n=s.qe();return{from:e,to:n}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return Se(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class kB{constructor(e,n,s,r){this.Hf=e,this.Pt=s,this.Mg=n,this.bg=r}getHeight(){return this.Pt.$t()}setHeight(e){const n=this.Hf.Qt(),s=n.Uc(this.Pt);n.vc(s,e)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(e){this.Pt.Io(e),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(e){const n=this.paneIndex();n!==e&&(rn(e>=0&&e<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(n,e))}getSeries(){return this.Pt.Oo().map(e=>this.Mg(e))??[]}getHTMLElement(){const e=this.Hf.$f();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Zf():null}attachPrimitive(e){this.Pt._a(e),e.attached&&e.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(e){this.Pt.ua(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new Q5(this.Hf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,n={},s=0){return this.bg.addCustomSeries(e,n,s)}addSeries(e,n={}){return this.bg.addSeries(e,n,this.paneIndex())}}const CB={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class wC{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}Sg(){return this.ir}}class _B{constructor(e,n,s,r,i,o){this.xg=new Ut,this.Jn=e,this.Cg=n,this.Pg=s,this.o_=i,this.bg=r,this.yg=o}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Ts(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new ul(new qu(e.from,e.to)).y_(),s=this.Jn.Xs();if(s.Ki())return null;const r=s.Fr(n.Uh(),1),i=s.Fr(n.bi(),-1),o=Se(s.Lr()),a=Se(s.Ks());if(r!==null&&i!==null&&r.Re>i.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:r===null||r.Re===o?e.from-o:r.Re-o,barsAfter:i===null||i.Re===a?a-e.to:a-i.Re};return r!==null&&i!==null&&(l.from=r.yw,l.to=i.yw),l}setData(e){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,e),this.Tg("full")}update(e,n=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,e,n),this.Tg("update")}pop(e=1){const n=this.Cg.Dg(this.Jn,e);n.length!==0&&this.Tg("update");const s=pp(this.seriesType());return n.map(r=>s(r))}dataByIndex(e,n){const s=this.Jn.Xs().Fr(e,n);return s===null?null:pp(this.seriesType())(s)}data(){const e=pp(this.seriesType());return this.Jn.Xs().Hr().map(n=>e(n))}subscribeDataChanged(e){this.xg.i(e)}unsubscribeDataChanged(e){this.xg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return Ur(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(e){const n=ts(Ur(CB),e),s=this.Jn.Oh(n);return new wC(s)}removePriceLine(e){this.Jn.Nh(e.Sg())}priceLines(){return this.Jn.Fh().map(e=>new wC(e))}seriesType(){return this.Jn.Rr()}lastValueData(e){const n=this.Jn.ye(e);return n.ke?{noData:!0}:{noData:!1,price:n.gt,color:n.R}}attachPrimitive(e){this.Jn._a(e),e.attached&&e.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ua(e),e.detached&&e.detached(),this.Jn.Qt().Ih()}getPane(){const e=this.Jn,n=Se(this.Jn.Qt().Hn(e));return this.yg(n)}moveToPane(e){this.Jn.Qt().Nc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const n=this.Jn.Qt().Hn(this.Jn);n!==null&&n.Qo(this.Jn,e)}Tg(e){this.xg.v()&&this.xg.p(e)}}class EB{constructor(e,n,s){this.Vg=new Ut,this.z_=new Ut,this.gm=new Ut,this.ts=e,this.uh=e.Et(),this.Zm=n,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=s}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(e,n){n?this.uh.Tu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.nu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},s=this.uh.au(n);this.ts.Lc(s)}getVisibleLogicalRange(){const e=this.uh.su();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){rn(e.from<=e.to,"The from index cannot be after the to index."),this.ts.Lc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(e){const n=this.ts.Et();return n.Ki()?null:n.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.cu(e)}timeToIndex(e,n){const s=this.o_.convertHorzItemToInternal(e);return this.uh.Q_(s,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.uh.qt(n)}coordinateToTime(e){const n=this.ts.Et(),s=n.cu(e),r=n.ss(s);return r===null?null:r.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(e){this.Vg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.Vg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.gm.i(e)}unsubscribeSizeChange(e){this.gm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...Ur(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(e){this.gm.p(e.width,e.height)}}function vC(t){return function(e){if(gf(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:r}=e.handleScale;gf(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),gf(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const n=e.handleScroll;gf(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class PB{constructor(e,n,s){this.Ag=new Map,this.zg=new Map,this.Lg=new Ut,this.Og=new Ut,this.Ng=new Ut,this.qu=new WeakMap,this.Fg=new rB(n);const r=s===void 0?Ur(yC()):ts(Ur(yC()),vC(s));this.Wg=n,this.Hf=new X$(e,r,n),this.Hf.Xv().i(o=>{this.Lg.v()&&this.Lg.p(this.Hg(o()))},this),this.Hf.Zv().i(o=>{this.Og.v()&&this.Og.p(this.Hg(o()))},this),this.Hf.cc().i(o=>{this.Ng.v()&&this.Ng.p(this.Hg(o()))},this);const i=this.Hf.Qt();this.Ug=new EB(i,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(e,n,s){this.autoSizeActive()||this.Hf.Jm(e,n,s)}addCustomSeries(e,n={},s=0){const r=(i=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...hB,...i.defaultOptions()},$g:fB,qg:i}))(ji(e));return this.Yg(r,n,s)}addSeries(e,n={},s=0){return this.Yg(e,n,s)}removeSeries(e){const n=Vn(this.Ag.get(e)),s=this.Fg.Ac(n);this.Hf.Qt().Ac(n),this.jg(s),this.Ag.delete(e),this.zg.delete(n)}kg(e,n){this.jg(this.Fg.Ww(e,n))}Rg(e,n,s){this.jg(this.Fg.jw(e,n,s))}Dg(e,n){const[s,r]=this.Fg.Zw(e,n);return s.length!==0&&this.jg(r),s}subscribeClick(e){this.Lg.i(e)}unsubscribeClick(e){this.Lg._(e)}subscribeCrosshairMove(e){this.Ng.i(e)}unsubscribeCrosshairMove(e){this.Ng._(e)}subscribeDblClick(e){this.Og.i(e)}unsubscribeDblClick(e){this.Og._(e)}priceScale(e,n=0){return new Q5(this.Hf,e,n)}timeScale(){return this.Ug}applyOptions(e){this.Hf.hr(vC(e))}options(){return this.Hf.N()}takeScreenshot(e=!1,n=!1){let s,r;try{n||(s=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),r=this.Hf.aw(e)}finally{n||s===void 0||this.Hf.Qt().hr({crosshair:{mode:s}})}return r}addPane(e=!1){const n=this.Hf.Qt().$c();return n.zo(e),this.Kg(n)}removePane(e){this.Hf.Qt().fc(e)}swapPanes(e,n){this.Hf.Qt().mc(e,n)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map(e=>this.Kg(e))}paneSize(e=0){const n=this.Hf.pw(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,s){const r=this.Ag.get(s);if(r===void 0)return;const i=this.Hf.Qt().Hn(r);i!==null&&this.Hf.Qt().Rc(e,n,i)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(e,n={},s=0){rn(e.$g!==void 0),function(l){if(l===void 0||l.type==="custom")return;const c=l;c.minMove!==void 0&&c.precision===void 0&&(c.precision=Y5(c.minMove))}(n.priceFormat),e.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(n);const r=ts(Ur(D5),Ur(e.defaultOptions),n),i=e.$g,o=new Em(this.Hf.Qt(),e.type,r,i,e.qg);this.Hf.Qt().Ic(o,s);const a=new _B(o,this,this,this,this.Wg,l=>this.Kg(l));return this.Ag.set(a,o),this.zg.set(o,a),a}jg(e){const n=this.Hf.Qt();n.Vc(e.Et._u,e.Et.tg,e.Et.ig),e.Oo.forEach((s,r)=>r.ht(s.se,s.Qw)),n.Et().K_(),n.vu()}Xg(e){return Vn(this.zg.get(e))}Hg(e){const n=new Map;e.Dw.forEach((r,i)=>{const o=i.Rr(),a=pp(o)(r);if(o!=="Custom")rn(J$(a));else{const l=i.fa();rn(!l||l(a)===!1)}n.set(this.Xg(i),a)});const s=e.Rw!==void 0&&this.zg.has(e.Rw)?this.Xg(e.Rw):void 0;return{time:e.yw,logical:e.Re,point:e.kw,paneIndex:e.Tw,hoveredSeries:s,hoveredObjectId:e.Vw,seriesData:n,sourceEvent:e.Bw}}Kg(e){let n=this.qu.get(e);return n||(n=new kB(this.Hf,s=>this.Xg(s),e,this),this.qu.set(e,n)),n}}function TB(t){if(yh(t)){const e=document.getElementById(t);return rn(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function MB(t,e,n){const s=TB(t),r=new PB(s,e,n);return e.setOptions(r.options()),r}function IB(t,e){return MB(t,new rC,rC.ld(e))}({...D5});const J5=k.forwardRef(({initialData:t=[],symbol:e="BTC/USDC",height:n=500,showVolume:s=!0},r)=>{const i=k.useRef(null),o=k.useRef(null),a=k.useRef(null),l=k.useRef(null),[c,u]=k.useState(null),d=b=>typeof b=="number"?b:De(b),f=b=>({time:Math.floor((b.open_time||b.close_time||Date.now())/1e3),open:d(b.open),high:d(b.high),low:d(b.low),close:d(b.close)}),p=b=>{if(!b.volume)return null;const x=Math.floor((b.open_time||b.close_time||Date.now())/1e3),g=typeof b.volume=="number"?b.volume:De(b.volume),y=d(b.close),S=d(b.open),w=y>=S;return{time:x,value:g,color:w?"#26a69a80":"#ef535080"}},m=b=>{const x=f(b),g=s?p(b):null;a.current&&(a.current.update(x),u(x.close)),s&&l.current&&g&&l.current.update(g)};return k.useImperativeHandle(r,()=>({updateChart:m})),k.useEffect(()=>{if(!i.current)return;const b=IB(i.current,{width:i.current.clientWidth,height:n,layout:{background:{color:"#1e1e1e"},textColor:"#d1d4dc"},grid:{vertLines:{color:"#2a2e39"},horzLines:{color:"#2a2e39"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2e39"},timeScale:{borderColor:"#2a2e39",timeVisible:!0,secondsVisible:!1}}),x=b.addSeries("Candlestick",{upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"});let g=null;s&&(g=b.addSeries("Histogram",{color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""})),t.length>0&&(x.setData(t),c===null&&t.length>0&&u(t[t.length-1].close)),o.current=b,a.current=x,l.current=g;const y=()=>{i.current&&o.current&&o.current.applyOptions({width:i.current.clientWidth})};return window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y),b.remove()}},[n,s]),k.useEffect(()=>{a.current&&t.length>0&&(a.current.setData(t),t.length>0&&u(t[t.length-1].close))},[t]),h.jsxs("div",{style:{position:"relative",width:"100%"},children:[h.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"1.2rem",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:h.jsxs("span",{children:[e," Live Kline Chart",c!==null&&` - Current: $${c.toFixed(2)}`]})}),h.jsx("div",{ref:i,style:{position:"relative",width:"100%"}})]})});J5.displayName="KlineChart";function NB(){var je,Ae,We,ze;const[t,e]=k.useState(xh),[n,s]=k.useState(()=>localStorage.getItem("authToken")||""),[r,i]=k.useState(vm),[o,a]=k.useState(""),[l,c]=k.useState("BTC/USDC"),[u,d]=k.useState("1m"),[f,p]=k.useState("300"),[m,b]=k.useState(!1),[x,g]=k.useState([]),[y,S]=k.useState([]),[w,v]=k.useState(new Set),[C,_]=k.useState([]),[P,M]=k.useState(!1),E=k.useRef(null),I=k.useRef(0),O=Ec,j=k.useRef(null),[U,A]=k.useState([]),{walletAddress:L,authToken:B}=Sa(),{markets:F}=co({baseURL:O,sessionToken:"",autoFetchMarkets:!0}),$=F.length>0?(((je=F.find(ie=>ie.active))==null?void 0:je.market_id)??F[0].market_id)||(((We=(Ae=F.find(ie=>ie.active))==null?void 0:Ae.id)==null?void 0:We.toString())??((ze=F[0].id)==null?void 0:ze.toString())??""):null;k.useEffect(()=>{$&&!o&&a($)},[$]),k.useEffect(()=>{B&&s(B)},[B]),k.useEffect(()=>{const ie=V=>{V.key==="authToken"&&V.newValue&&s(V.newValue)};window.addEventListener("storage",ie);const Y=setInterval(()=>{const V=localStorage.getItem("authToken");V&&V!==n&&s(V)},1e3);return()=>{window.removeEventListener("storage",ie),clearInterval(Y)}},[n]),k.useEffect(()=>{n&&n.trim()!==""&&localStorage.setItem("authToken",n)},[n]);const D=(ie,Y,V,Te,it)=>{const Ve={id:I.current++,timestamp:Date.now(),channel:ie,data:Y,type:V,step:it};Te?S(St=>[...St.slice(-99),Ve]):g(St=>[...St.slice(-99),Ve])},z=(ie,Y,V,Te)=>{_(it=>[...it,{step:ie,status:Y,message:V,timestamp:Date.now(),details:Te}])},R=()=>{_([])},T=async()=>{var it;if((it=E.current)!=null&&it.isConnected()){D("connection","Already connected","info",!1);return}if(M(!0),R(),z("1","in-progress","Validating configuration..."),D("connection","Starting connection process...","debug",!1,"Step 1: Validation"),!t||!t.trim()){z("1","error","WebSocket URL is required"),D("connection","Error: WebSocket URL is required","error",!1,"Step 1: Validation"),M(!1);return}try{const Ve=new URL(t);if(Ve.protocol!=="ws:"&&Ve.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol");z("1","success",`URL format valid: ${t}`),D("connection",`URL validated: ${t}`,"debug",!1,"Step 1: Validation")}catch(Ve){z("1","error",`Invalid URL format: ${Ve.message}`),D("connection",`Error: Invalid URL format - ${Ve.message}`,"error",!1,"Step 1: Validation"),M(!1);return}z("2","in-progress","Building connection URL with parameters...");const ie=[];n&&ie.push(`token=${encodeURIComponent(n)}`),L&&ie.push(`wallet=${encodeURIComponent(L)}`),r&&ie.push(`device_id=${encodeURIComponent(r)}`);const Y=t.includes("?")?"&":"?",V=ie.length>0?`${t}${Y}${ie.join("&")}`:t;if(z("2","success",`Connection URL: ${V}`),D("connection",`Connection URL: ${V}`,"debug",!1,"Step 2: URL Construction"),ie.length>0?D("connection",`Query parameters: ${ie.join(", ")}`,"debug",!1,"Step 2: URL Construction"):D("connection","No query parameters (authToken, walletAddress, deviceID)","warning",!1,"Step 2: URL Construction"),z("3","in-progress","Cleaning up existing connection..."),E.current)try{E.current.disconnect(),z("3","success","Previous connection cleaned up"),D("connection","Previous connection cleaned up","debug",!1,"Step 3: Cleanup")}catch{z("3","success","No previous connection to clean up"),D("connection","No previous connection found","debug",!1,"Step 3: Cleanup")}else z("3","success","No previous connection to clean up");z("4","in-progress","Creating SubscriptionClient instance...");try{E.current=new lo({url:t,authToken:n||void 0,walletAddress:L||void 0,deviceID:r||void 0}),z("4","success","SubscriptionClient created"),D("connection","SubscriptionClient instance created","debug",!1,"Step 4: Client Creation"),D("connection",`Config: ${JSON.stringify({url:t,hasToken:!!n,hasWallet:!!L,deviceID:r},null,2)}`,"debug",!1,"Step 4: Client Creation")}catch(Ve){z("4","error",`Failed to create client: ${Ve.message}`),D("connection",`Error creating client: ${Ve.message}`,"error",!1,"Step 4: Client Creation"),M(!1);return}z("5","in-progress","Initiating WebSocket connection..."),D("connection","Initiating WebSocket handshake...","debug",!1,"Step 5: Connection"),D("connection","Browser will attempt to upgrade HTTP connection to WebSocket","debug",!1,"Step 5: Connection");const Te=Date.now();try{await E.current.connect();const Ve=Date.now()-Te,St=E.current.isConnected(),pe=E.current.getState();D("connection",`Connection attempt completed in ${Ve}ms`,"debug",!1,"Step 5: Connection"),D("connection",`Connection state: ${pe}`,"debug",!1,"Step 5: Connection"),b(St),St?(z("5","success",`WebSocket connected successfully (${Ve}ms)`),D("connection"," WebSocket connected successfully!","success",!1,"Step 5: Connection"),D("connection",`Connection established in ${Ve}ms`,"success",!1,"Step 5: Connection")):(z("5","error","Connection completed but state is not connected"),D("connection"," Connection attempt completed but state is not connected","error",!1,"Step 5: Connection"),D("connection",`Current state: ${pe}`,"error",!1,"Step 5: Connection"))}catch(Ve){const St=Date.now()-Te,pe=Ve.message||String(Ve);let Ce="";pe.includes("abnormal closure")?Ce=`The server closed the connection abnormally. Possible causes:
- Server is not running
- Wrong URL or port
- Network connectivity issues
- Firewall blocking the connection`:pe.includes("protocol error")?Ce="WebSocket protocol error. The server may not support WebSocket connections.":pe.includes("policy violation")?Ce="Connection closed due to policy violation. Check authentication requirements.":pe.includes("server error")?Ce="Server returned an error. Check server logs for details.":(pe.includes("Unauthorized")||pe.includes("401"))&&(Ce=`Authentication failed. Possible causes:
- Missing or invalid JWT token (if server requires authentication)
- Token expired
- Server is in production mode requiring JWT authentication
Note: If server uses JWT auth, you must provide a valid token in the authToken field.`),z("5","error",`Connection failed: ${pe}`),D("connection",` Connection error: ${pe}`,"error",!1,"Step 5: Connection"),Ce&&D("connection",`Error details:
${Ce}`,"error",!1,"Step 5: Connection"),D("connection",`Connection failed after ${St}ms`,"error",!1,"Step 5: Connection"),D("connection",`Full error: ${JSON.stringify(Ve,Object.getOwnPropertyNames(Ve),2)}`,"error",!1,"Step 5: Connection"),b(!1)}finally{M(!1)}},X=()=>{if(E.current)try{E.current.disconnect(),b(!1),v(new Set),D("connection","WebSocket disconnected","info",!1)}catch(ie){D("connection",`Disconnect error: ${ie.message}`,"error",!1)}},ne=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("orderbook","Not connected. Please connect first.","error",!1);return}if(!o){D("orderbook","Please select a market first","error",!1);return}const ie=V=>{D("orderbook",V,"success",!1)};try{E.current.subscribeOrderbook(o,ie,!0),v(V=>new Set([...V,"orderbook"])),D("orderbook",`Subscribed to orderbook for market ${o}`,"success",!1)}catch(V){D("orderbook",`Subscription error: ${V.message}`,"error",!1)}},q=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&o)try{E.current.unsubscribeOrderbook(o),v(Y=>{const V=new Set(Y);return V.delete("orderbook"),V}),D("orderbook","Unsubscribed from orderbook","info",!1)}catch(Y){D("orderbook",`Unsubscribe error: ${Y.message}`,"error",!1)}},Z=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("trades","Not connected. Please connect first.","error",!1);return}if(!o){D("trades","Please select a market first","error",!1);return}const ie=V=>{D("trades",V,"success",!1)};try{E.current.subscribeTrades(o,ie),v(V=>new Set([...V,"trades"])),D("trades",`Subscribed to trades for market ${o}`,"success",!1)}catch(V){D("trades",`Subscription error: ${V.message}`,"error",!1)}},G=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&o)try{E.current.unsubscribeTrades(o),v(Y=>{const V=new Set(Y);return V.delete("trades"),V}),D("trades","Unsubscribed from trades","info",!1)}catch(Y){D("trades",`Unsubscribe error: ${Y.message}`,"error",!1)}},se=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("ticker","Not connected. Please connect first.","error",!1);return}if(!o){D("ticker","Please select a market first","error",!1);return}const ie=V=>{D("ticker",V,"success",!1)};try{E.current.subscribeTicker(o,ie),v(V=>new Set([...V,"ticker"])),D("ticker",`Subscribed to ticker for market ${o}`,"success",!1)}catch(V){D("ticker",`Subscription error: ${V.message}`,"error",!1)}},ae=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&o)try{E.current.unsubscribeTicker(o),v(Y=>{const V=new Set(Y);return V.delete("ticker"),V}),D("ticker","Unsubscribed from ticker","info",!1)}catch(Y){D("ticker",`Unsubscribe error: ${Y.message}`,"error",!1)}},Ne=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("last_price","Not connected. Please connect first.","error",!1);return}if(!o){D("last_price","Please select a market first","error",!1);return}const ie=V=>{D("last_price",V,"success",!1)};try{E.current.subscribeLastPrice(o,ie,!0),v(V=>new Set([...V,"last_price"])),D("last_price",`Subscribed to last price for market ${o}`,"success",!1)}catch(V){D("last_price",`Subscription error: ${V.message}`,"error",!1)}},ke=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&o)try{E.current.unsubscribeLastPrice(o),v(Y=>{const V=new Set(Y);return V.delete("last_price"),V}),D("last_price","Unsubscribed from last price","info",!1)}catch(Y){D("last_price",`Unsubscribe error: ${Y.message}`,"error",!1)}},Ee=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("user_updates","Not connected. Please connect first.","error",!0);return}if(!L){D("user_updates","Wallet address required for position updates (positions channel)","error",!0);return}const ie=V=>{D("user_updates",V,"success",!0)};try{E.current.subscribeUserUpdates(ie),v(V=>new Set([...V,"user_updates"])),D("user_updates","Subscribed to user updates (positions, orders, etc.)","success",!0)}catch(V){D("user_updates",`Subscription error: ${V.message}`,"error",!0)}},Ue=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected())try{E.current.unsubscribeUserUpdates(),v(Y=>{const V=new Set(Y);return V.delete("user_updates"),V}),D("user_updates","Unsubscribed from user updates","info",!0)}catch(Y){D("user_updates",`Unsubscribe error: ${Y.message}`,"error",!0)}},st=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("funding_rate","Not connected. Please connect first.","error",!1);return}if(!l){D("funding_rate","Please enter a symbol first","error",!1);return}const ie=V=>{D("funding_rate",V,"success",!1)};try{E.current.subscribeFundingRate(l,ie),v(V=>new Set([...V,"funding_rate"])),D("funding_rate",`Subscribed to funding rate for ${l}`,"success",!1)}catch(V){D("funding_rate",`Subscription error: ${V.message}`,"error",!1)}},N=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&l)try{E.current.unsubscribeFundingRate(l),v(Y=>{const V=new Set(Y);return V.delete("funding_rate"),V}),D("funding_rate","Unsubscribed from funding rate","info",!1)}catch(Y){D("funding_rate",`Unsubscribe error: ${Y.message}`,"error",!1)}},de=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("buckets","Not connected. Please connect first.","error",!0);return}if(!L){D("buckets","Wallet address required for buckets subscription","error",!0);return}const ie=V=>{D("buckets",V,"success",!0)};try{E.current.subscribeBuckets(ie),v(V=>new Set([...V,"buckets"])),D("buckets","Subscribed to buckets","success",!0)}catch(V){D("buckets",`Subscription error: ${V.message}`,"error",!0)}},be=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected())try{E.current.unsubscribeBuckets(),v(Y=>{const V=new Set(Y);return V.delete("buckets"),V}),D("buckets","Unsubscribed from buckets","info",!0)}catch(Y){D("buckets",`Unsubscribe error: ${Y.message}`,"error",!0)}},re=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("deviation","Not connected. Please connect first.","error",!1);return}if(!l){D("deviation","Please enter a symbol first","error",!1);return}const ie=V=>{D("deviation",V,"success",!1)};try{E.current.subscribeDeviation(l,ie),v(V=>new Set([...V,"deviation"])),D("deviation",`Subscribed to deviation for ${l}`,"success",!1)}catch(V){D("deviation",`Subscription error: ${V.message}`,"error",!1)}},_e=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&l)try{E.current.unsubscribeDeviation(l),v(Y=>{const V=new Set(Y);return V.delete("deviation"),V}),D("deviation","Unsubscribed from deviation","info",!1)}catch(Y){D("deviation",`Unsubscribe error: ${Y.message}`,"error",!1)}},ee=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("index_price","Not connected. Please connect first.","error",!1);return}if(!l){D("index_price","Please enter a symbol first","error",!1);return}const ie=V=>{D("index_price",V,"success",!1)};try{E.current.subscribeIndexPrice(l,ie),v(V=>new Set([...V,"index_price"])),D("index_price",`Subscribed to index price for ${l}`,"success",!1)}catch(V){D("index_price",`Subscription error: ${V.message}`,"error",!1)}},W=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&l)try{E.current.unsubscribeIndexPrice(l),v(Y=>{const V=new Set(Y);return V.delete("index_price"),V}),D("index_price","Unsubscribed from index price","info",!1)}catch(Y){D("index_price",`Unsubscribe error: ${Y.message}`,"error",!1)}},Q=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("kline","Not connected. Please connect first.","error",!1);return}if(!o){D("kline","Please select a market first","error",!1);return}if(!u){D("kline","Please select an interval first","error",!1);return}const ie=V=>{if(D("kline",V,"success",!1),j.current&&V){const Te={open_time:V.open_time||V.timestamp||Date.now(),close_time:V.close_time,open:V.open,high:V.high,low:V.low,close:V.close,volume:V.volume};j.current.updateChart(Te);const Ve={time:Math.floor((Te.open_time||Date.now())/1e3),open:typeof Te.open=="string"?De(Te.open):Te.open,high:typeof Te.high=="string"?De(Te.high):Te.high,low:typeof Te.low=="string"?De(Te.low):Te.low,close:typeof Te.close=="string"?De(Te.close):Te.close};A(St=>{const pe=[...St];return pe.length===0||pe[pe.length-1].time!==Ve.time?pe.push(Ve):pe[pe.length-1]=Ve,pe})}};try{E.current.subscribeKline(o,u,ie),v(V=>new Set([...V,"kline"])),D("kline",`Subscribed to kline for market ${o} with interval ${u}`,"success",!1)}catch(V){D("kline",`Subscription error: ${V.message}`,"error",!1)}},H=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&!(!o||!u))try{E.current.unsubscribeKline(o,u),v(Y=>{const V=new Set(Y);return V.delete("kline"),V}),A([]),D("kline","Unsubscribed from kline","info",!1)}catch(Y){D("kline",`Unsubscribe error: ${Y.message}`,"error",!1)}},J=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("mark_price","Not connected. Please connect first.","error",!1);return}if(!l){D("mark_price","Please enter a symbol first","error",!1);return}const ie=V=>{D("mark_price",V,"success",!1)};try{E.current.subscribeMarkPrice(l,ie),v(V=>new Set([...V,"mark_price"])),D("mark_price",`Subscribed to mark price for ${l}`,"success",!1)}catch(V){D("mark_price",`Subscription error: ${V.message}`,"error",!1)}},we=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&l)try{E.current.unsubscribeMarkPrice(l),v(Y=>{const V=new Set(Y);return V.delete("mark_price"),V}),D("mark_price","Unsubscribed from mark price","info",!1)}catch(Y){D("mark_price",`Unsubscribe error: ${Y.message}`,"error",!1)}},te=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("price_feed","Not connected. Please connect first.","error",!1);return}if(!l){D("price_feed","Please enter a symbol first","error",!1);return}const ie=V=>{D("price_feed",V,"success",!1)};try{E.current.subscribePriceFeed(l,ie),v(V=>new Set([...V,"price_feed"])),D("price_feed",`Subscribed to price feed for ${l}`,"success",!1)}catch(V){D("price_feed",`Subscription error: ${V.message}`,"error",!1)}},ge=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&l)try{E.current.unsubscribePriceFeed(l),v(Y=>{const V=new Set(Y);return V.delete("price_feed"),V}),D("price_feed","Unsubscribed from price feed","info",!1)}catch(Y){D("price_feed",`Unsubscribe error: ${Y.message}`,"error",!1)}},Pe=()=>{var Y;if(!((Y=E.current)!=null&&Y.isConnected())){D("twap","Not connected. Please connect first.","error",!1);return}if(!l){D("twap","Please enter a symbol first","error",!1);return}if(!f||isNaN(Number(f))||Number(f)<=0){D("twap","Please enter a valid window size (positive number in seconds)","error",!1);return}const ie=V=>{D("twap",V,"success",!1)};try{E.current.subscribeTWAP(l,Number(f),ie),v(V=>new Set([...V,"twap"])),D("twap",`Subscribed to TWAP for ${l} with window size ${f}s`,"success",!1)}catch(V){D("twap",`Subscription error: ${V.message}`,"error",!1)}},he=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&!(!l||!f))try{E.current.unsubscribeTWAP(l,Number(f)),v(Y=>{const V=new Set(Y);return V.delete("twap"),V}),D("twap","Unsubscribed from TWAP","info",!1)}catch(Y){D("twap",`Unsubscribe error: ${Y.message}`,"error",!1)}},le=()=>{if(!E.current){D("multi_feed","SubscriptionClient not initialized. Please connect first.","error",!1);return}if(!E.current.isConnected()){D("multi_feed","Not connected. Please connect first.","error",!1);return}if(!o){D("multi_feed","Please select a market first","error",!1);return}if(!l){D("multi_feed","Please enter a symbol first","error",!1);return}if(typeof E.current.subscribeMultiFeed!="function"){D("multi_feed","subscribeMultiFeed method not available. Please check SDK version.","error",!1),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(E.current)));return}const ie=Y=>{const V=Y.sub_channel||"unknown";D(`multi_feed:${V}`,Y,"success",V==="balances"||V==="buckets"||V==="orders"||V==="positions")};try{E.current.subscribeMultiFeed(o,l,ie,u||"1m"),v(Y=>new Set([...Y,"multi_feed"])),D("multi_feed",`Subscribed to multi-feed for market ${o}, symbol ${l}`,"success",!1)}catch(Y){D("multi_feed",`Subscription error: ${Y.message}`,"error",!1)}},ye=()=>{var ie;if((ie=E.current)!=null&&ie.isConnected()&&!(!o||!l))try{E.current.unsubscribeMultiFeed(o,l),v(Y=>{const V=new Set(Y);return V.delete("multi_feed"),V}),D("multi_feed","Unsubscribed from multi-feed","info",!1)}catch(Y){D("multi_feed",`Unsubscribe error: ${Y.message}`,"error",!1)}},me=()=>{if(!E.current){D("balances","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!E.current.isConnected()){D("balances","Not connected. Please connect first.","error",!0);return}if(!L){D("balances","Wallet address required for balances subscription","error",!0);return}if(typeof E.current.subscribeBalances!="function"){D("balances","subscribeBalances method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(E.current)));return}const ie=Y=>{D("balances",Y,"success",!0)};try{E.current.subscribeBalances(ie),v(Y=>new Set([...Y,"balances"])),D("balances","Subscribed to balances","success",!0)}catch(Y){D("balances",`Subscription error: ${Y.message}`,"error",!0)}},ve=()=>{if(E.current&&E.current.isConnected()){if(typeof E.current.unsubscribeBalances!="function"){D("balances","unsubscribeBalances method not available. Please check SDK version.","error",!0);return}try{E.current.unsubscribeBalances(),v(ie=>{const Y=new Set(ie);return Y.delete("balances"),Y}),D("balances","Unsubscribed from balances","info",!0)}catch(ie){D("balances",`Unsubscribe error: ${ie.message}`,"error",!0)}}},Ie=()=>{if(!E.current){D("orders","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!E.current.isConnected()){D("orders","Not connected. Please connect first.","error",!0);return}if(!L){D("orders","Wallet address required for orders subscription","error",!0);return}if(typeof E.current.subscribeOrders!="function"){D("orders","subscribeOrders method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(E.current)));return}const ie=Y=>{D("orders",Y,"success",!0)};try{E.current.subscribeOrders(ie),v(Y=>new Set([...Y,"orders"])),D("orders","Subscribed to orders","success",!0)}catch(Y){D("orders",`Subscription error: ${Y.message}`,"error",!0)}},He=()=>{if(E.current&&E.current.isConnected()){if(typeof E.current.unsubscribeOrders!="function"){D("orders","unsubscribeOrders method not available. Please check SDK version.","error",!0);return}try{E.current.unsubscribeOrders(),v(ie=>{const Y=new Set(ie);return Y.delete("orders"),Y}),D("orders","Unsubscribed from orders","info",!0)}catch(ie){D("orders",`Unsubscribe error: ${ie.message}`,"error",!0)}}},Fe=ie=>{ie?S([]):g([])};return k.useEffect(()=>()=>{if(E.current)try{E.current.disconnect()}catch{}},[]),h.jsxs("div",{className:"ws-test-page",children:[h.jsx("h1",{children:"WebSocket QA"}),h.jsx("p",{children:"Test WebSocket subscriptions for public and private channels"}),h.jsx(xF,{steps:C}),h.jsx(yF,{wsURL:t,onWsURLChange:e,marketId:o,onMarketIdChange:a,markets:F,symbol:l,onSymbolChange:c,klineInterval:u,onKlineIntervalChange:d,twapWindowSize:f,onTwapWindowSizeChange:p,authToken:n,onAuthTokenChange:s,walletAddress:L,deviceID:r,onDeviceIDChange:i,isConnected:m,isConnecting:P,onConnect:T,onDisconnect:X}),h.jsxs("div",{className:"ws-test-page-layout",children:[h.jsxs(T2,{title:"WebSocket Public",isPrivate:!1,messages:x,onClearMessages:()=>Fe(!1),children:[h.jsxs("div",{className:"channel-buttons-row",children:[h.jsx(pn,{channel:"orderbook",isSubscribed:w.has("orderbook"),isConnected:m,subscribeLabel:"Subscribe Orderbook",unsubscribeLabel:"Unsubscribe Orderbook",onSubscribe:ne,onUnsubscribe:q}),h.jsx(pn,{channel:"trades",isSubscribed:w.has("trades"),isConnected:m,subscribeLabel:"Subscribe Trades",unsubscribeLabel:"Unsubscribe Trades",onSubscribe:Z,onUnsubscribe:G}),h.jsx(pn,{channel:"ticker",isSubscribed:w.has("ticker"),isConnected:m,subscribeLabel:"Subscribe Ticker",unsubscribeLabel:"Unsubscribe Ticker",onSubscribe:se,onUnsubscribe:ae}),h.jsx(pn,{channel:"last_price",isSubscribed:w.has("last_price"),isConnected:m,subscribeLabel:"Subscribe Last Price",unsubscribeLabel:"Unsubscribe Last Price",onSubscribe:Ne,onUnsubscribe:ke}),h.jsx(pn,{channel:"funding_rate",isSubscribed:w.has("funding_rate"),isConnected:m,subscribeLabel:"Subscribe Funding Rate",unsubscribeLabel:"Unsubscribe Funding Rate",onSubscribe:st,onUnsubscribe:N}),h.jsx(pn,{channel:"deviation",isSubscribed:w.has("deviation"),isConnected:m,subscribeLabel:"Subscribe Deviation",unsubscribeLabel:"Unsubscribe Deviation",onSubscribe:re,onUnsubscribe:_e}),h.jsx(pn,{channel:"index_price",isSubscribed:w.has("index_price"),isConnected:m,subscribeLabel:"Subscribe Index Price",unsubscribeLabel:"Unsubscribe Index Price",onSubscribe:ee,onUnsubscribe:W}),h.jsx(pn,{channel:"kline",isSubscribed:w.has("kline"),isConnected:m,subscribeLabel:"Subscribe Kline",unsubscribeLabel:"Unsubscribe Kline",onSubscribe:Q,onUnsubscribe:H})]}),w.has("kline")&&h.jsx("div",{style:{marginTop:"20px",marginBottom:"20px"},children:h.jsx(J5,{ref:j,initialData:U,symbol:l||"BTC/USDC",height:500,showVolume:!0})}),h.jsxs("div",{className:"channel-buttons-row",children:[h.jsx(pn,{channel:"mark_price",isSubscribed:w.has("mark_price"),isConnected:m,subscribeLabel:"Subscribe Mark Price",unsubscribeLabel:"Unsubscribe Mark Price",onSubscribe:J,onUnsubscribe:we}),h.jsx(pn,{channel:"price_feed",isSubscribed:w.has("price_feed"),isConnected:m,subscribeLabel:"Subscribe Price Feed",unsubscribeLabel:"Unsubscribe Price Feed",onSubscribe:te,onUnsubscribe:ge}),h.jsx(pn,{channel:"twap",isSubscribed:w.has("twap"),isConnected:m,subscribeLabel:"Subscribe TWAP",unsubscribeLabel:"Unsubscribe TWAP",onSubscribe:Pe,onUnsubscribe:he}),h.jsx(pn,{channel:"multi_feed",isSubscribed:w.has("multi_feed"),isConnected:m,subscribeLabel:"Subscribe Multi-Feed",unsubscribeLabel:"Unsubscribe Multi-Feed",onSubscribe:le,onUnsubscribe:ye})]}),h.jsx("small",{className:"private-note-text-block",style:{marginTop:"10px"},children:"Multi-Feed: Unified channel streaming all sub-channels (orderbook, trades, positions, balances, orders, buckets, etc.) Requires market ID and symbol. Authenticated sub-channels (balances, orders, positions, buckets) require wallet address."})]}),h.jsxs(T2,{title:"WebSocket Private",isPrivate:!0,messages:y,onClearMessages:()=>Fe(!0),children:[h.jsx(pn,{channel:"user_updates",isSubscribed:w.has("user_updates"),isConnected:m,disabled:!L,subscribeLabel:"Subscribe User Updates",unsubscribeLabel:"Unsubscribe User Updates",onSubscribe:Ee,onUnsubscribe:Ue,variant:"private"}),h.jsx("small",{className:"private-note-text",children:"Position updates (positions channel): Requires wallet address. Returns user positions."}),h.jsx(pn,{channel:"buckets",isSubscribed:w.has("buckets"),isConnected:m,disabled:!L,subscribeLabel:"Subscribe Buckets",unsubscribeLabel:"Unsubscribe Buckets",onSubscribe:de,onUnsubscribe:be,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Buckets: User's margin buckets (requires wallet address)"}),h.jsx(pn,{channel:"balances",isSubscribed:w.has("balances"),isConnected:m,disabled:!L,subscribeLabel:"Subscribe Balances",unsubscribeLabel:"Unsubscribe Balances",onSubscribe:me,onUnsubscribe:ve,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Balances: User's spot balances (USDC, MORM, BTC, etc.) - requires wallet address"}),h.jsx(pn,{channel:"orders",isSubscribed:w.has("orders"),isConnected:m,disabled:!L,subscribeLabel:"Subscribe Orders",unsubscribeLabel:"Unsubscribe Orders",onSubscribe:Ie,onUnsubscribe:He,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Orders: User's open orders - requires wallet address"})]})]})]})}function Wv({top:t,left:e,width:n,height:s}){const r=`translate(${e}px,${t}px)`;return{transform:r,WebkitTransform:r,MozTransform:r,msTransform:r,OTransform:r,width:`${n}px`,height:`${s}px`,position:"absolute"}}function Z5({top:t,left:e,width:n,height:s}){return{top:`${t}px`,left:`${e}px`,width:`${n}px`,height:`${s}px`,position:"absolute"}}function SC(t){return t*100+"%"}function DB(t,e,n,s){return t+n>s?e:n}function eI(t,e,n){return t<0?e:n}function AB(t){return Math.max(0,t)}function m0(t){return Math.max(0,t)}var Hv=(t,e,n)=>{const{left:s,height:r,width:i}=e,o=t.top-(r-t.height);return{left:s,width:i,height:eI(o,t.height,r),top:m0(o)}},Vv=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{top:s,height:i,width:DB(t.left,t.width,o,n),left:AB(r)}},qv=(t,e,n)=>{const{top:s,height:r,width:i}=e,o=t.left+t.width-i;return o<0?{height:r,width:t.left+t.width,top:m0(s),left:0}:{height:r,width:i,top:m0(s),left:o}},Yv=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{width:o,left:r,height:eI(s,t.height,i),top:m0(s)}},OB=(t,e,n)=>Hv(t,Vv(t,e,n)),RB=(t,e,n)=>Hv(t,qv(t,e)),jB=(t,e,n)=>Yv(t,Vv(t,e,n)),LB=(t,e,n)=>Yv(t,qv(t,e)),FB={n:Hv,ne:OB,e:Vv,se:jB,s:Yv,sw:LB,w:qv,nw:RB};function $B(t,e,n,s){const r=FB[t];return r?r(e,{...e,...n},s):n}var tI={type:"transform",scale:1,calcStyle(t){return Wv(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}},BB={type:"absolute",scale:1,calcStyle(t){return Z5(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}};function zB(t){return{type:"transform",scale:t,calcStyle(e){return Wv(e)},calcDragPosition(e,n,s,r){return{left:(e-s)/t,top:(n-r)/t}}}}var UB=tI,WB={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},HB={enabled:!0,bounded:!1,threshold:3},VB={enabled:!0,handles:["se"]},qB={enabled:!1,defaultItem:{w:1,h:1}};function Tm(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function Us(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&Tm(s,e))return s}}function nI(t,e){return t.filter(n=>Tm(n,e))}function sI(t,e){return e==="horizontal"?iI(t):e==="vertical"?rI(t):[...t]}function rI(t){return[...t].sort((e,n)=>e.y!==n.y?e.y-n.y:e.x-n.x)}function iI(t){return[...t].sort((e,n)=>e.x!==n.x?e.x-n.x:e.y-n.y)}function Pc(t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0){const r=s.y+s.h;r>e&&(e=r)}}return e}function vo(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&s.i===e)return s}}function Gv(t){return t.filter(e=>e.static===!0)}function eo(t){return{i:t.i,x:t.x,y:t.y,w:t.w,h:t.h,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function Ys(t){const e=new Array(t.length);for(let n=0;n<t.length;n++){const s=t[n];s!==void 0&&(e[n]=eo(s))}return e}function YB(t,e){const n=new Array(t.length);for(let s=0;s<t.length;s++){const r=t[s];r!==void 0&&(e.i===r.i?n[s]=e:n[s]=r)}return n}function GB(t,e,n){let s=vo(t,e);return s?(s=n(eo(s)),[YB(t,s),s]):[[...t],null]}function Kv(t,e){const n=Gv(t);for(let s=0;s<t.length;s++){const r=t[s];if(r!==void 0)if(r.x+r.w>e.cols&&(r.x=e.cols-r.w),r.x<0&&(r.x=0,r.w=e.cols),!r.static)n.push(r);else for(;Us(n,r);)r.y++}return t}function Do(t,e,n,s,r,i,o,a,l){if(e.static&&e.isDraggable!==!0)return[...t];if(e.y===s&&e.x===n)return[...t];const c=e.x,u=e.y;typeof n=="number"&&(e.x=n),typeof s=="number"&&(e.y=s),e.moved=!0;let d=sI(t,o);(o==="vertical"&&typeof s=="number"?u>=s:o==="horizontal"&&typeof n=="number"?c>=n:!1)&&(d=d.reverse());const p=nI(d,e),m=p.length>0;if(m&&l)return Ys(t);if(m&&i)return e.x=c,e.y=u,e.moved=!1,t;let b=[...t];for(let x=0;x<p.length;x++){const g=p[x];g!==void 0&&(g.moved||(g.static?b=kC(b,g,e,r,o):b=kC(b,e,g,r,o)))}return b}function kC(t,e,n,s,r,i){const o=r==="horizontal",a=r==="vertical",l=e.static;if(s){s=!1;const d={x:o?Math.max(e.x-n.w,0):n.x,y:a?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},f=Us(t,d),p=f!==void 0&&f.y+f.h>e.y,m=f!==void 0&&e.x+e.w>f.x;if(!f)return Do(t,n,o?d.x:void 0,a?d.y:void 0,s,l,r);if(p&&a)return Do(t,n,void 0,n.y+1,s,l,r);if(p&&r===null)return e.y=n.y,n.y=n.y+n.h,[...t];if(m&&o)return Do(t,e,n.x,void 0,s,l,r)}const c=o?n.x+1:void 0,u=a?n.y+1:void 0;return c===void 0&&u===void 0?[...t]:Do(t,n,c,u,s,l,r)}function KB(t){return t.filter(e=>e.static)}var XB={x:"w",y:"h"};function gy(t,e,n,s){const r=XB[s];e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;Tm(e,a)&&gy(t,a,n+e[r],s)}}e[s]=n}function QB(t,e,n,s,r,i,o){const a=n==="vertical",l=n==="horizontal";if(a)for(typeof o=="number"?e.y=Math.min(o,e.y):e.y=Math.min(Pc(t),e.y);e.y>0&&!Us(t,e);)e.y--;else if(l)for(;e.x>0&&!Us(t,e);)e.x--;let c;for(;(c=Us(t,e))!==void 0&&!(n===null&&i);)if(l?gy(r,e,c.x+c.w,"x"):gy(r,e,c.y+c.h,"y"),l&&e.x+e.w>s)for(e.x=s-e.w,e.y++;e.x>0&&!Us(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function $r(t,e,n,s){const r=KB(t);let i=Pc(r);const o=sI(t,e),a=new Array(t.length);for(let l=0;l<o.length;l++){const c=o[l];if(c===void 0)continue;let u=eo(c);u.static||(u=QB(r,u,e,n,o,s,i),i=Math.max(i,u.y+u.h),r.push(u));const d=t.indexOf(c);a[d]=u,u.moved=!1}return a}function Xv(t,e,n,s){const r=s==="x"?"w":"h";e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;Tm(e,a)&&Xv(t,a,n+e[r],s)}}e[s]=n}function JB(t,e,n,s){for(e.y=Math.min(s,e.y);e.y>0&&!Us(t,e);)e.y--;let r;for(;(r=Us(t,e))!==void 0;)Xv(n,e,r.y+r.h,"y");return e.y=Math.max(e.y,0),e}function ZB(t,e,n,s){for(;e.x>0&&!Us(t,e);)e.x--;let r;for(;(r=Us(t,e))!==void 0;)if(Xv(s,e,r.x+r.w,"x"),e.x+e.w>n)for(e.x=n-e.w,e.y++;e.x>0&&!Us(t,e);)e.x--;return e.x=Math.max(e.x,0),e}var oI={type:"vertical",allowOverlap:!1,compact(t,e){const n=Gv(t);let s=Pc(n);const r=rI(t),i=new Array(t.length);for(let o=0;o<r.length;o++){const a=r[o];if(a===void 0)continue;let l=eo(a);l.static||(l=JB(n,l,r,s),s=Math.max(s,l.y+l.h),n.push(l));const c=t.indexOf(a);i[c]=l,l.moved=!1}return i},onMove(t,e,n,s,r){const i=Ys(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},aI={type:"horizontal",allowOverlap:!1,compact(t,e){const n=Gv(t),s=iI(t),r=new Array(t.length);for(let i=0;i<s.length;i++){const o=s[i];if(o===void 0)continue;let a=eo(o);a.static||(a=ZB(n,a,e,s),n.push(a));const l=t.indexOf(o);r[l]=a,a.moved=!1}return r},onMove(t,e,n,s,r){const i=Ys(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},CC={type:null,allowOverlap:!1,compact(t,e){return Ys(t)},onMove(t,e,n,s,r){const i=Ys(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},ez={...oI,allowOverlap:!0,compact(t,e){return Ys(t)}},tz={...aI,allowOverlap:!0,compact(t,e){return Ys(t)}};function Qv(t,e=!1,n=!1){let s;return e?t==="vertical"?s=ez:t==="horizontal"?s=tz:s=CC:t==="vertical"?s=oI:t==="horizontal"?s=aI:s=CC,n?{...s,preventCollision:n}:s}function lI(t){return Object.keys(t).sort((n,s)=>t[n]-t[s])}function _C(t,e){const n=lI(t);let s=n[0];if(s===void 0)throw new Error("No breakpoints defined");for(let r=1;r<n.length;r++){const i=n[r];if(i===void 0)continue;const o=t[i];e>o&&(s=i)}return s}function EC(t,e){const n=e[t];if(n===void 0)throw new Error(`ResponsiveReactGridLayout: \`cols\` entry for breakpoint ${String(t)} is missing!`);return n}function Sb(t,e,n,s,r,i){const o=t[n];if(o)return Ys(o);let a=t[s];const l=lI(e),c=l.slice(l.indexOf(n));for(let d=0;d<c.length;d++){const f=c[d];if(f===void 0)continue;const p=t[f];if(p){a=p;break}}const u=Ys(a||[]);return $r(Kv(u,{cols:r}),i,r)}function Cf(t,e){if(Array.isArray(t))return t;const n=t,s=n[e];if(s!==void 0)return s;const r=Object.keys(n);for(const i of r){const o=n[i];if(o!==void 0)return o}return[10,10]}function Mm(t){const{margin:e,containerPadding:n,containerWidth:s,cols:r}=t;return(s-e[0]*(r-1)-n[0]*2)/r}function g0(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function mo(t,e,n,s,r,i,o){const{margin:a,containerPadding:l,rowHeight:c}=t,u=Mm(t);let d,f,p,m;return o?(d=Math.round(o.width),f=Math.round(o.height)):(d=g0(s,u,a[0]),f=g0(r,c,a[1])),i?(p=Math.round(i.top),m=Math.round(i.left)):o?(p=Math.round(o.top),m=Math.round(o.left)):(p=Math.round((c+a[1])*n+l[1]),m=Math.round((u+a[0])*e+l[0])),{top:p,left:m,width:d,height:f}}function mp(t,e,n,s,r){const{margin:i,containerPadding:o,cols:a,rowHeight:l,maxRows:c}=t,u=Mm(t);let d=Math.round((n-o[0])/(u+i[0])),f=Math.round((e-o[1])/(l+i[1]));return d=fr(d,0,a-s),f=fr(f,0,c-r),{x:d,y:f}}function nz(t,e,n,s,r,i){const{margin:o,maxRows:a,cols:l,rowHeight:c}=t,u=Mm(t),d=Math.round((e+o[0])/(u+o[0])),f=Math.round((n+o[1])/(c+o[1]));let p=fr(d,0,l-s),m=fr(f,0,a-r);return(i==="sw"||i==="w"||i==="nw")&&(p=fr(d,0,l)),(i==="nw"||i==="n"||i==="ne")&&(m=fr(f,0,a)),{w:p,h:m}}function fr(t,e,n){return Math.max(Math.min(t,n),e)}var Im={exports:{}},cI={},uI={exports:{}},sz="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rz=sz,iz=rz;function dI(){}function hI(){}hI.resetWarningCache=dI;var oz=function(){function t(s,r,i,o,a,l){if(l!==iz){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:hI,resetWarningCache:dI};return n.PropTypes=n,n};uI.exports=oz();var Nm=uI.exports;function fI(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=fI(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Ud(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=fI(t))&&(s&&(s+=" "),s+=e);return s}const az=Object.freeze(Object.defineProperty({__proto__:null,clsx:Ud,default:Ud},Symbol.toStringTag,{value:"Module"})),lz=FD(az);var Rt={},yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.dontSetMe=fz;yr.findInArray=cz;yr.int=hz;yr.isFunction=uz;yr.isNum=dz;function cz(t,e){for(let n=0,s=t.length;n<s;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function uz(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function dz(t){return typeof t=="number"&&!isNaN(t)}function hz(t){return parseInt(t,10)}function fz(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.browserPrefixToKey=mI;ka.browserPrefixToStyle=pz;ka.default=void 0;ka.getPrefix=pI;const kb=["Moz","Webkit","O","ms"];function pI(){var n,s;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(s=(n=window.document)==null?void 0:n.documentElement)==null?void 0:s.style;if(!e||t in e)return"";for(let r=0;r<kb.length;r++)if(mI(t,kb[r])in e)return kb[r];return""}function mI(t,e){return e?`${e}${mz(t)}`:t}function pz(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function mz(t){let e="",n=!0;for(let s=0;s<t.length;s++)n?(e+=t[s].toUpperCase(),n=!1):t[s]==="-"?n=!0:e+=t[s];return e}ka.default=pI();Object.defineProperty(Rt,"__esModule",{value:!0});Rt.addClassName=xI;Rt.addEvent=bz;Rt.addUserSelectStyles=Tz;Rt.createCSSTransform=Cz;Rt.createSVGTransform=_z;Rt.getTouch=Ez;Rt.getTouchIdentifier=Pz;Rt.getTranslation=Jv;Rt.innerHeight=vz;Rt.innerWidth=Sz;Rt.matchesSelector=bI;Rt.matchesSelectorAndParentsTo=gz;Rt.offsetXYFromParent=kz;Rt.outerHeight=yz;Rt.outerWidth=wz;Rt.removeClassName=yI;Rt.removeEvent=xz;Rt.scheduleRemoveUserSelectStyles=Mz;var ns=yr,PC=gI(ka);function gI(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(gI=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}let _f="";function bI(t,e){return _f||(_f=(0,ns.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,ns.isFunction)(t[n])})),(0,ns.isFunction)(t[_f])?t[_f](e):!1}function gz(t,e,n){let s=t;do{if(bI(s,e))return!0;if(s===n)return!1;s=s.parentNode}while(s);return!1}function bz(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.addEventListener?t.addEventListener(e,n,r):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function xz(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function yz(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ns.int)(n.borderTopWidth),e+=(0,ns.int)(n.borderBottomWidth),e}function wz(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ns.int)(n.borderLeftWidth),e+=(0,ns.int)(n.borderRightWidth),e}function vz(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ns.int)(n.paddingTop),e-=(0,ns.int)(n.paddingBottom),e}function Sz(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ns.int)(n.paddingLeft),e-=(0,ns.int)(n.paddingRight),e}function kz(t,e,n){const r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-r.left)/n,o=(t.clientY+e.scrollTop-r.top)/n;return{x:i,y:o}}function Cz(t,e){const n=Jv(t,e,"px");return{[(0,PC.browserPrefixToKey)("transform",PC.default)]:n}}function _z(t,e){return Jv(t,e,"")}function Jv(t,e,n){let{x:s,y:r}=t,i=`translate(${s}${n},${r}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function Ez(t,e){return t.targetTouches&&(0,ns.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,ns.findInArray)(t.changedTouches,n=>e===n.identifier)}function Pz(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Tz(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&xI(t.body,"react-draggable-transparent-selection")}function Mz(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{TC(t)}):TC(t)}function TC(t){if(t)try{if(t.body&&yI(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function xI(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function yI(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.canDragX=Dz;wr.canDragY=Az;wr.createCoreData=Rz;wr.createDraggableData=jz;wr.getBoundPosition=Iz;wr.getControlPosition=Oz;wr.snapToGrid=Nz;var Gn=yr,Za=Rt;function Iz(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:s}=t.props;s=typeof s=="string"?s:Lz(s);const r=Zv(t);if(typeof s=="string"){const{ownerDocument:i}=r,o=i.defaultView;let a;if(s==="parent"?a=r.parentNode:a=r.getRootNode().querySelector(s),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');const l=a,c=o.getComputedStyle(r),u=o.getComputedStyle(l);s={left:-r.offsetLeft+(0,Gn.int)(u.paddingLeft)+(0,Gn.int)(c.marginLeft),top:-r.offsetTop+(0,Gn.int)(u.paddingTop)+(0,Gn.int)(c.marginTop),right:(0,Za.innerWidth)(l)-(0,Za.outerWidth)(r)-r.offsetLeft+(0,Gn.int)(u.paddingRight)-(0,Gn.int)(c.marginRight),bottom:(0,Za.innerHeight)(l)-(0,Za.outerHeight)(r)-r.offsetTop+(0,Gn.int)(u.paddingBottom)-(0,Gn.int)(c.marginBottom)}}return(0,Gn.isNum)(s.right)&&(e=Math.min(e,s.right)),(0,Gn.isNum)(s.bottom)&&(n=Math.min(n,s.bottom)),(0,Gn.isNum)(s.left)&&(e=Math.max(e,s.left)),(0,Gn.isNum)(s.top)&&(n=Math.max(n,s.top)),[e,n]}function Nz(t,e,n){const s=Math.round(e/t[0])*t[0],r=Math.round(n/t[1])*t[1];return[s,r]}function Dz(t){return t.props.axis==="both"||t.props.axis==="x"}function Az(t){return t.props.axis==="both"||t.props.axis==="y"}function Oz(t,e,n){const s=typeof e=="number"?(0,Za.getTouch)(t,e):null;if(typeof e=="number"&&!s)return null;const r=Zv(n),i=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,Za.offsetXYFromParent)(s||t,i,n.props.scale)}function Rz(t,e,n){const s=!(0,Gn.isNum)(t.lastX),r=Zv(t);return s?{node:r,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:r,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function jz(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Lz(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function Zv(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var Dm={},Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.default=Fz;function Fz(){}Object.defineProperty(Dm,"__esModule",{value:!0});Dm.default=void 0;var Cb=wI(k),Sn=e1(Nm),$z=e1(io),mn=Rt,di=wr,_b=yr,eu=e1(Am);function e1(t){return t&&t.__esModule?t:{default:t}}function wI(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(wI=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}function kn(t,e,n){return(e=Bz(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bz(t){var e=zz(t,"string");return typeof e=="symbol"?e:e+""}function zz(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Ns={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let hi=Ns.mouse,Om=class extends Cb.Component{constructor(){super(...arguments),kn(this,"dragging",!1),kn(this,"lastX",NaN),kn(this,"lastY",NaN),kn(this,"touchIdentifier",null),kn(this,"mounted",!1),kn(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:s}=n;if(this.props.disabled||!(e.target instanceof s.defaultView.Node)||this.props.handle&&!(0,mn.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,mn.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const r=(0,mn.getTouchIdentifier)(e);this.touchIdentifier=r;const i=(0,di.getControlPosition)(e,r,this);if(i==null)return;const{x:o,y:a}=i,l=(0,di.createCoreData)(this,o,a);(0,eu.default)("DraggableCore: handleDragStart: %j",l),(0,eu.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,mn.addUserSelectStyles)(s),this.dragging=!0,this.lastX=o,this.lastY=a,(0,mn.addEvent)(s,hi.move,this.handleDrag),(0,mn.addEvent)(s,hi.stop,this.handleDragStop))}),kn(this,"handleDrag",e=>{const n=(0,di.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let a=s-this.lastX,l=r-this.lastY;if([a,l]=(0,di.snapToGrid)(this.props.grid,a,l),!a&&!l)return;s=this.lastX+a,r=this.lastY+l}const i=(0,di.createCoreData)(this,s,r);if((0,eu.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=s,this.lastY=r}),kn(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,di.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let l=s-this.lastX||0,c=r-this.lastY||0;[l,c]=(0,di.snapToGrid)(this.props.grid,l,c),s=this.lastX+l,r=this.lastY+c}const i=(0,di.createCoreData)(this,s,r);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,mn.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,eu.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,eu.default)("DraggableCore: Removing handlers"),(0,mn.removeEvent)(a.ownerDocument,hi.move,this.handleDrag),(0,mn.removeEvent)(a.ownerDocument,hi.stop,this.handleDragStop))}),kn(this,"onMouseDown",e=>(hi=Ns.mouse,this.handleDragStart(e))),kn(this,"onMouseUp",e=>(hi=Ns.mouse,this.handleDragStop(e))),kn(this,"onTouchStart",e=>(hi=Ns.touch,this.handleDragStart(e))),kn(this,"onTouchEnd",e=>(hi=Ns.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,mn.addEvent)(e,Ns.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,mn.removeEvent)(n,Ns.mouse.move,this.handleDrag),(0,mn.removeEvent)(n,Ns.touch.move,this.handleDrag),(0,mn.removeEvent)(n,Ns.mouse.stop,this.handleDragStop),(0,mn.removeEvent)(n,Ns.touch.stop,this.handleDragStop),(0,mn.removeEvent)(e,Ns.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,mn.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,s;return(e=this.props)!=null&&e.nodeRef?(s=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:s.current:$z.default.findDOMNode(this)}render(){return Cb.cloneElement(Cb.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Dm.default=Om;kn(Om,"displayName","DraggableCore");kn(Om,"propTypes",{allowAnyClick:Sn.default.bool,allowMobileScroll:Sn.default.bool,children:Sn.default.node.isRequired,disabled:Sn.default.bool,enableUserSelectHack:Sn.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Sn.default.arrayOf(Sn.default.number),handle:Sn.default.string,cancel:Sn.default.string,nodeRef:Sn.default.object,onStart:Sn.default.func,onDrag:Sn.default.func,onStop:Sn.default.func,onMouseDown:Sn.default.func,scale:Sn.default.number,className:_b.dontSetMe,style:_b.dontSetMe,transform:_b.dontSetMe});kn(Om,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=d(k),n=u(Nm),s=u(io),r=lz,i=Rt,o=wr,a=yr,l=u(Dm),c=u(Am);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,y){if(typeof WeakMap=="function")var S=new WeakMap,w=new WeakMap;return(d=function(v,C){if(!C&&v&&v.__esModule)return v;var _,P,M={__proto__:null,default:v};if(v===null||typeof v!="object"&&typeof v!="function")return M;if(_=C?w:S){if(_.has(v))return _.get(v);_.set(v,M)}for(const E in v)E!=="default"&&{}.hasOwnProperty.call(v,E)&&((P=(_=Object.defineProperty)&&Object.getOwnPropertyDescriptor(v,E))&&(P.get||P.set)?_(M,E,P):M[E]=v[E]);return M})(g,y)}function f(){return f=Object.assign?Object.assign.bind():function(g){for(var y=1;y<arguments.length;y++){var S=arguments[y];for(var w in S)({}).hasOwnProperty.call(S,w)&&(g[w]=S[w])}return g},f.apply(null,arguments)}function p(g,y,S){return(y=m(y))in g?Object.defineProperty(g,y,{value:S,enumerable:!0,configurable:!0,writable:!0}):g[y]=S,g}function m(g){var y=b(g,"string");return typeof y=="symbol"?y:y+""}function b(g,y){if(typeof g!="object"||!g)return g;var S=g[Symbol.toPrimitive];if(S!==void 0){var w=S.call(g,y);if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}class x extends e.Component{static getDerivedStateFromProps(y,S){let{position:w}=y,{prevPropsPosition:v}=S;return w&&(!v||w.x!==v.x||w.y!==v.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:w,prevPropsPosition:v}),{x:w.x,y:w.y,prevPropsPosition:{...w}}):null}constructor(y){super(y),p(this,"onDragStart",(S,w)=>{if((0,c.default)("Draggable: onDragStart: %j",w),this.props.onStart(S,(0,o.createDraggableData)(this,w))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(S,w)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",w);const v=(0,o.createDraggableData)(this,w),C={x:v.x,y:v.y,slackX:0,slackY:0};if(this.props.bounds){const{x:P,y:M}=C;C.x+=this.state.slackX,C.y+=this.state.slackY;const[E,I]=(0,o.getBoundPosition)(this,C.x,C.y);C.x=E,C.y=I,C.slackX=this.state.slackX+(P-C.x),C.slackY=this.state.slackY+(M-C.y),v.x=C.x,v.y=C.y,v.deltaX=C.x-this.state.x,v.deltaY=C.y-this.state.y}if(this.props.onDrag(S,v)===!1)return!1;this.setState(C)}),p(this,"onDragStop",(S,w)=>{if(!this.state.dragging||this.props.onStop(S,(0,o.createDraggableData)(this,w))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",w);const C={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:P,y:M}=this.props.position;C.x=P,C.y=M}this.setState(C)}),this.state={dragging:!1,dragged:!1,x:y.position?y.position.x:y.defaultPosition.x,y:y.position?y.position.y:y.defaultPosition.y,prevPropsPosition:{...y.position},slackX:0,slackY:0,isElementSVG:!1},y.position&&!(y.onDrag||y.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var y,S;return((S=(y=this.props)==null?void 0:y.nodeRef)==null?void 0:S.current)??s.default.findDOMNode(this)}render(){const{axis:y,bounds:S,children:w,defaultPosition:v,defaultClassName:C,defaultClassNameDragging:_,defaultClassNameDragged:P,position:M,positionOffset:E,scale:I,...O}=this.props;let j={},U=null;const L=!!!M||this.state.dragging,B=M||v,F={x:(0,o.canDragX)(this)&&L?this.state.x:B.x,y:(0,o.canDragY)(this)&&L?this.state.y:B.y};this.state.isElementSVG?U=(0,i.createSVGTransform)(F,E):j=(0,i.createCSSTransform)(F,E);const $=(0,r.clsx)(w.props.className||"",C,{[_]:this.state.dragging,[P]:this.state.dragged});return e.createElement(l.default,f({},O,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(w),{className:$,style:{...w.props.style,...j},transform:U}))}}t.default=x,p(x,"displayName","Draggable"),p(x,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(x,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(cI);const{default:vI,DraggableCore:Uz}=cI;Im.exports=vI;Im.exports.default=vI;var Wz=Im.exports.DraggableCore=Uz,Hz=Im.exports,t1={exports:{}},vh={},n1={};n1.__esModule=!0;n1.cloneElement=Xz;var Vz=qz(k);function qz(t){return t&&t.__esModule?t:{default:t}}function MC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function IC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MC(Object(n),!0).forEach(function(s){Yz(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MC(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Yz(t,e,n){return e=Gz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gz(t){var e=Kz(t,"string");return typeof e=="symbol"?e:String(e)}function Kz(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xz(t,e){return e.style&&t.props.style&&(e.style=IC(IC({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),Vz.default.cloneElement(t,e)}var Sh={};Sh.__esModule=!0;Sh.resizableProps=void 0;var Ge=Qz(Nm);function Qz(t){return t&&t.__esModule?t:{default:t}}var Jz={axis:Ge.default.oneOf(["both","x","y","none"]),className:Ge.default.string,children:Ge.default.element.isRequired,draggableOpts:Ge.default.shape({allowAnyClick:Ge.default.bool,cancel:Ge.default.string,children:Ge.default.node,disabled:Ge.default.bool,enableUserSelectHack:Ge.default.bool,offsetParent:Ge.default.node,grid:Ge.default.arrayOf(Ge.default.number),handle:Ge.default.string,nodeRef:Ge.default.object,onStart:Ge.default.func,onDrag:Ge.default.func,onStop:Ge.default.func,onMouseDown:Ge.default.func,scale:Ge.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="y"){var i;return(i=Ge.default.number).isRequired.apply(i,n)}return Ge.default.number.apply(Ge.default,n)},handle:Ge.default.oneOfType([Ge.default.node,Ge.default.func]),handleSize:Ge.default.arrayOf(Ge.default.number),lockAspectRatio:Ge.default.bool,maxConstraints:Ge.default.arrayOf(Ge.default.number),minConstraints:Ge.default.arrayOf(Ge.default.number),onResizeStop:Ge.default.func,onResizeStart:Ge.default.func,onResize:Ge.default.func,resizeHandles:Ge.default.arrayOf(Ge.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Ge.default.number,width:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="x"){var i;return(i=Ge.default.number).isRequired.apply(i,n)}return Ge.default.number.apply(Ge.default,n)}};Sh.resizableProps=Jz;vh.__esModule=!0;vh.default=void 0;var tu=sU(k),Zz=Hz,eU=n1,tU=Sh,nU=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function SI(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(SI=function(r){return r?n:e})(t)}function sU(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=SI(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function by(){return by=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},by.apply(this,arguments)}function rU(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function NC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Eb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NC(Object(n),!0).forEach(function(s){iU(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NC(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function iU(t,e,n){return e=oU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oU(t){var e=aU(t,"string");return typeof e=="symbol"?e:String(e)}function aU(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,xy(t,e)}function xy(t,e){return xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},xy(t,e)}var s1=function(t){lU(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.handleRefs={},s.lastHandleRect=null,s.slack=null,s}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(r,i){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[r,i];if(c){var u=this.props.width/this.props.height,d=r-this.props.width,f=i-this.props.height;Math.abs(d)>Math.abs(f*u)?i=r/u:r=i*u}var p=r,m=i,b=this.slack||[0,0],x=b[0],g=b[1];return r+=x,i+=g,a&&(r=Math.max(a[0],r),i=Math.max(a[1],i)),l&&(r=Math.min(l[0],r),i=Math.min(l[1],i)),this.slack=[x+(p-r),g+(m-i)],[r,i]},n.resizeHandler=function(r,i){var o=this;return function(a,l){var c=l.node,u=l.deltaX,d=l.deltaY;r==="onResizeStart"&&o.resetData();var f=(o.props.axis==="both"||o.props.axis==="x")&&i!=="n"&&i!=="s",p=(o.props.axis==="both"||o.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!f&&!p)){var m=i[0],b=i[i.length-1],x=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(b==="w"){var g=x.left-o.lastHandleRect.left;u+=g}if(m==="n"){var y=x.top-o.lastHandleRect.top;d+=y}}o.lastHandleRect=x,b==="w"&&(u=-u),m==="n"&&(d=-d);var S=o.props.width+(f?u/o.props.transformScale:0),w=o.props.height+(p?d/o.props.transformScale:0),v=o.runConstraints(S,w);S=v[0],w=v[1];var C=S!==o.props.width||w!==o.props.height,_=typeof o.props[r]=="function"?o.props[r]:null,P=r==="onResize"&&!C;_&&!P&&(a.persist==null||a.persist(),_(a,{node:c,size:{width:S,height:w},handle:i})),r==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(r,i){var o=this.props.handle;if(!o)return tu.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+r,ref:i});if(typeof o=="function")return o(r,i);var a=typeof o.type=="string",l=Eb({ref:i},a?{}:{handleAxis:r});return tu.cloneElement(o,l)},n.render=function(){var r=this,i=this.props,o=i.children,a=i.className,l=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var c=i.resizeHandles;i.transformScale;var u=rU(i,nU);return(0,eU.cloneElement)(o,Eb(Eb({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(d){var f,p=(f=r.handleRefs[d])!=null?f:r.handleRefs[d]=tu.createRef();return tu.createElement(Zz.DraggableCore,by({},l,{nodeRef:p,key:"resizableHandle-"+d,onStop:r.resizeHandler("onResizeStop",d),onStart:r.resizeHandler("onResizeStart",d),onDrag:r.resizeHandler("onResize",d)}),r.renderResizeHandle(d,p))}))}))},e}(tu.Component);vh.default=s1;s1.propTypes=tU.resizableProps;s1.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var Rm={};Rm.__esModule=!0;Rm.default=void 0;var Pb=fU(k),cU=kI(Nm),uU=kI(vh),dU=Sh,hU=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function kI(t){return t&&t.__esModule?t:{default:t}}function CI(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(CI=function(r){return r?n:e})(t)}function fU(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=CI(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function yy(){return yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},yy.apply(this,arguments)}function DC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function b0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DC(Object(n),!0).forEach(function(s){pU(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function pU(t,e,n){return e=mU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mU(t){var e=gU(t,"string");return typeof e=="symbol"?e:String(e)}function gU(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bU(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function xU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,wy(t,e)}function wy(t,e){return wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},wy(t,e)}var _I=function(t){xU(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.state={width:s.props.width,height:s.props.height,propsWidth:s.props.width,propsHeight:s.props.height},s.onResize=function(a,l){var c=l.size;s.props.onResize?(a.persist==null||a.persist(),s.setState(c,function(){return s.props.onResize&&s.props.onResize(a,l)})):s.setState(c)},s}e.getDerivedStateFromProps=function(r,i){return i.propsWidth!==r.width||i.propsHeight!==r.height?{width:r.width,height:r.height,propsWidth:r.width,propsHeight:r.height}:null};var n=e.prototype;return n.render=function(){var r=this.props,i=r.handle,o=r.handleSize;r.onResize;var a=r.onResizeStart,l=r.onResizeStop,c=r.draggableOpts,u=r.minConstraints,d=r.maxConstraints,f=r.lockAspectRatio,p=r.axis;r.width,r.height;var m=r.resizeHandles,b=r.style,x=r.transformScale,g=bU(r,hU);return Pb.createElement(uU.default,{axis:p,draggableOpts:c,handle:i,handleSize:o,height:this.state.height,lockAspectRatio:f,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:m,transformScale:x,width:this.state.width},Pb.createElement("div",yy({},g,{style:b0(b0({},b),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(Pb.Component);Rm.default=_I;_I.propTypes=b0(b0({},dU.resizableProps),{},{children:cU.default.element});t1.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var yU=t1.exports.Resizable=vh.default;t1.exports.ResizableBox=Rm.default;function EI(t){return function(n,s,r,i,o,a,l){return t(n,s,l)}}function jm(t){return function(n,s,r,i){if(!n||!s||typeof n!="object"||typeof s!="object")return t(n,s,r,i);var o=i.get(n),a=i.get(s);if(o&&a)return o===s&&a===n;i.set(n,s),i.set(s,n);var l=t(n,s,r,i);return i.delete(n),i.delete(s),l}}function PI(t,e){var n={};for(var s in t)n[s]=t[s];for(var s in e)n[s]=e[s];return n}function AC(t){return t.constructor===Object||t.constructor==null}function OC(t){return typeof t.then=="function"}function Lm(t,e){return t===e||t!==t&&e!==e}var wU="[object Arguments]",vU="[object Boolean]",SU="[object Date]",kU="[object RegExp]",CU="[object Map]",_U="[object Number]",EU="[object Object]",PU="[object Set]",TU="[object String]",RC=Object.prototype.toString;function Fm(t){var e=t.areArraysEqual,n=t.areDatesEqual,s=t.areMapsEqual,r=t.areObjectsEqual,i=t.areRegExpsEqual,o=t.areSetsEqual,a=t.createIsNestedEqual,l=a(c);function c(u,d,f){if(u===d)return!0;if(!u||!d||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;if(AC(u)&&AC(d))return r(u,d,l,f);var p=Array.isArray(u),m=Array.isArray(d);if(p||m)return p===m&&e(u,d,l,f);var b=RC.call(u);return b!==RC.call(d)?!1:b===SU?n(u,d,l,f):b===kU?i(u,d,l,f):b===CU?s(u,d,l,f):b===PU?o(u,d,l,f):b===EU||b===wU?OC(u)||OC(d)?!1:r(u,d,l,f):b===vU||b===_U||b===TU?Lm(u.valueOf(),d.valueOf()):!1}return c}function TI(t,e,n,s){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n(t[r],e[r],r,r,t,e,s))return!1;return!0}var MU=jm(TI);function MI(t,e){return Lm(t.valueOf(),e.valueOf())}function II(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={},o=0;return t.forEach(function(a,l){if(r){var c=!1,u=0;e.forEach(function(d,f){!c&&!i[u]&&(c=n(l,f,o,u,t,e,s)&&n(a,d,l,f,t,e,s))&&(i[u]=!0),u++}),o++,r=c}}),r}var IU=jm(II),NU="_owner",DU=Object.prototype.hasOwnProperty;function NI(t,e,n,s){var r=Object.keys(t),i=r.length;if(Object.keys(e).length!==i)return!1;for(var o;i-- >0;){if(o=r[i],o===NU){var a=!!t.$$typeof,l=!!e.$$typeof;if((a||l)&&a!==l)return!1}if(!DU.call(e,o)||!n(t[o],e[o],o,o,t,e,s))return!1}return!0}var AU=jm(NI);function DI(t,e){return t.source===e.source&&t.flags===e.flags}function AI(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={};return t.forEach(function(o,a){if(r){var l=!1,c=0;e.forEach(function(u,d){!l&&!i[c]&&(l=n(o,u,a,d,t,e,s))&&(i[c]=!0),c++}),r=l}}),r}var OU=jm(AI),OI=Object.freeze({areArraysEqual:TI,areDatesEqual:MI,areMapsEqual:II,areObjectsEqual:NI,areRegExpsEqual:DI,areSetsEqual:AI,createIsNestedEqual:EI}),RI=Object.freeze({areArraysEqual:MU,areDatesEqual:MI,areMapsEqual:IU,areObjectsEqual:AU,areRegExpsEqual:DI,areSetsEqual:OU,createIsNestedEqual:EI}),RU=Fm(OI);function Si(t,e){return RU(t,e,void 0)}Fm(PI(OI,{createIsNestedEqual:function(){return Lm}}));Fm(RI);Fm(PI(RI,{createIsNestedEqual:function(){return Lm}}));function jC(t){const{children:e,cols:n,containerWidth:s,margin:r,containerPadding:i,rowHeight:o,maxRows:a,isDraggable:l,isResizable:c,isBounded:u,static:d,useCSSTransforms:f=!0,usePercentages:p=!1,transformScale:m=1,droppingPosition:b,className:x="",style:g,handle:y="",cancel:S="",x:w,y:v,w:C,h:_,minW:P=1,maxW:M=1/0,minH:E=1,maxH:I=1/0,i:O,resizeHandles:j,resizeHandle:U,onDragStart:A,onDrag:L,onDragStop:B,onResizeStart:F,onResize:$,onResizeStop:D}=t,[z,R]=k.useState(!1),[T,X]=k.useState(!1),ne=k.useRef(null),q=k.useRef({left:0,top:0}),Z=k.useRef({top:0,left:0,width:0,height:0}),G=k.useRef(void 0),se=k.useMemo(()=>({cols:n,containerPadding:i,containerWidth:s,margin:r,maxRows:a,rowHeight:o}),[n,i,s,r,a,o]),ae=k.useCallback(he=>{if(f)return Wv(he);const le=Z5(he);return p?{...le,left:SC(he.left/s),width:SC(he.width/s)}:le},[f,p,s]),Ne=k.useCallback((he,{node:le})=>{if(!A)return;const{offsetParent:ye}=le;if(!ye)return;const me=ye.getBoundingClientRect(),ve=le.getBoundingClientRect(),Ie=ve.left/m,He=me.left/m,Fe=ve.top/m,je=me.top/m,Ae={left:Ie-He+ye.scrollLeft,top:Fe-je+ye.scrollTop};q.current=Ae,R(!0);const{x:We,y:ze}=mp(se,Ae.top,Ae.left,C,_);A(O,We,ze,{e:he,node:le,newPosition:Ae})},[A,m,se,C,_,O]),ke=k.useCallback((he,{node:le,deltaX:ye,deltaY:me})=>{if(!L||!z)return;let ve=q.current.top+me,Ie=q.current.left+ye;if(u){const{offsetParent:Ae}=le;if(Ae){const We=Ae.clientHeight-g0(_,o,r[1]);ve=fr(ve,0,We);const ze=Mm(se),ie=s-g0(C,ze,r[0]);Ie=fr(Ie,0,ie)}}const He={top:ve,left:Ie};q.current=He;const{x:Fe,y:je}=mp(se,ve,Ie,C,_);L(O,Fe,je,{e:he,node:le,newPosition:He})},[L,z,u,_,o,r,se,s,C,O]),Ee=k.useCallback((he,{node:le})=>{if(!B||!z)return;const{left:ye,top:me}=q.current,ve={top:me,left:ye};R(!1),q.current={left:0,top:0};const{x:Ie,y:He}=mp(se,me,ye,C,_);B(O,Ie,He,{e:he,node:le,newPosition:ve})},[B,z,se,C,_,O]),Ue=k.useCallback((he,{node:le,size:ye,handle:me},ve,Ie)=>{const He=Ie==="onResizeStart"?F:Ie==="onResize"?$:D;if(!He)return;let Fe;le?Fe=$B(me,ve,ye,s):Fe={...ye,top:ve.top,left:ve.left},Z.current=Fe;let{w:je,h:Ae}=nz(se,Fe.width,Fe.height,w,v,me);je=fr(je,Math.max(P,1),M),Ae=fr(Ae,E,I),He(O,je,Ae,{e:he.nativeEvent,node:le,size:Fe,handle:me})},[F,$,D,s,se,w,v,P,M,E,I,O]),st=k.useCallback((he,le)=>{X(!0);const ye=mo(se,w,v,C,_),me={...le,handle:le.handle};Ue(he,me,ye,"onResizeStart")},[Ue,se,w,v,C,_]),N=k.useCallback((he,le)=>{const ye=mo(se,w,v,C,_),me={...le,handle:le.handle};Ue(he,me,ye,"onResize")},[Ue,se,w,v,C,_]),de=k.useCallback((he,le)=>{X(!1),Z.current={top:0,left:0,width:0,height:0};const ye=mo(se,w,v,C,_),me={...le,handle:le.handle};Ue(he,me,ye,"onResizeStop")},[Ue,se,w,v,C,_]);k.useEffect(()=>{if(!b)return;const he=ne.current;if(!he)return;const le=G.current||{left:0,top:0},ye=z&&(b.left!==le.left||b.top!==le.top);if(z){if(ye){const me=b.left-q.current.left,ve=b.top-q.current.top,Ie={node:he,deltaX:me,deltaY:ve,lastX:q.current.left,lastY:q.current.top,x:b.left,y:b.top};ke(b.e,Ie)}}else{const me={node:he,deltaX:b.left,deltaY:b.top,lastX:0,lastY:0,x:b.left,y:b.top};Ne(b.e,me)}G.current=b},[b,z,Ne,ke]);const be=mo(se,w,v,C,_,z?q.current:null,T?Z.current:null),re=fe.Children.only(e),_e=mo(se,0,0,n,0).width,ee=mo(se,0,0,P,E),W=mo(se,0,0,M,I),Q=[ee.width,ee.height],H=[Math.min(W.width,_e),Math.min(W.height,1/0)],J=re.props,we=J.className,te=J.style;let ge=fe.cloneElement(re,{ref:ne,className:Ud("react-grid-item",we,x,{static:d,resizing:T,"react-draggable":l,"react-draggable-dragging":z,dropping:!!b,cssTransforms:f}),style:{...g,...te,...ae(be)}});const Pe=U;return ge=h.jsx(yU,{draggableOpts:{disabled:!c},className:c?void 0:"react-resizable-hide",width:be.width,height:be.height,minConstraints:Q,maxConstraints:H,onResizeStart:st,onResize:N,onResizeStop:de,transformScale:m,resizeHandles:j,handle:Pe,children:ge}),ge=h.jsx(Wz,{disabled:!l,onStart:Ne,onDrag:ke,onStop:Ee,handle:y,cancel:".react-resizable-handle"+(S?","+S:""),scale:m,nodeRef:ne,children:ge}),ge}var kr=()=>{},LC="react-grid-layout",jI=!1;try{jI=/firefox/i.test(navigator.userAgent)}catch{}function jU(t,e){const n=fe.Children.toArray(t),s=fe.Children.toArray(e);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const i=n[r],o=s[r];if((i==null?void 0:i.key)!==(o==null?void 0:o.key))return!1}return!0}function FC(t,e,n,s,r){const i=[],o=new Set;fe.Children.forEach(e,l=>{if(!fe.isValidElement(l)||l.key===null)return;const c=String(l.key);o.add(c);const u=t.find(d=>d.i===c);if(u)i.push(eo(u));else{const f=l.props["data-grid"];f?i.push({i:c,x:f.x??0,y:f.y??0,w:f.w??1,h:f.h??1,minW:f.minW,maxW:f.maxW,minH:f.minH,maxH:f.maxH,static:f.static,isDraggable:f.isDraggable,isResizable:f.isResizable,resizeHandles:f.resizeHandles,isBounded:f.isBounded}):i.push({i:c,x:0,y:Pc(i),w:1,h:1})}});const a=Kv(i,{cols:n});return $r(a,s,n,r)}function LU(t){const{children:e,width:n,gridConfig:s,dragConfig:r,resizeConfig:i,dropConfig:o,positionStrategy:a=UB,compactor:l,layout:c=[],droppingItem:u,autoSize:d=!0,className:f="",style:p={},innerRef:m,onLayoutChange:b=kr,onDragStart:x=kr,onDrag:g=kr,onDragStop:y=kr,onResizeStart:S=kr,onResize:w=kr,onResizeStop:v=kr,onDrop:C=kr,onDropDragOver:_=kr}=t,P=k.useMemo(()=>({...WB,...s}),[s]),M=k.useMemo(()=>({...HB,...r}),[r]),E=k.useMemo(()=>({...VB,...i}),[i]),I=k.useMemo(()=>({...qB,...o}),[o]),{cols:O,rowHeight:j,maxRows:U,margin:A,containerPadding:L}=P,{enabled:B,bounded:F,handle:$,cancel:D}=M,{enabled:z,handles:R,handleComponent:T}=E,{enabled:X,defaultItem:ne}=I,q=l??Qv("vertical"),Z=q.type,G=q.allowOverlap,se=q.preventCollision??!1,ae=k.useMemo(()=>u??{i:"__dropping-elem__",...ne},[u,ne]),Ne=a.type==="transform",ke=a.scale,Ee=L??A,[Ue,st]=k.useState(!1),[N,de]=k.useState(()=>FC(c,e,O,Z,G)),[be,re]=k.useState(null),[_e,ee]=k.useState(!1),[W,Q]=k.useState(null),[H,J]=k.useState(),we=k.useRef(null),te=k.useRef(null),ge=k.useRef(null),Pe=k.useRef(0),he=k.useRef(N),le=k.useRef(c),ye=k.useRef(e),me=k.useRef(Z);k.useEffect(()=>{st(!0),Si(N,c)||b(N)},[]),k.useEffect(()=>{if(be)return;const Ce=!Si(c,le.current),Ke=!jU(e,ye.current),Be=Z!==me.current;if(Ce||Ke||Be){const tt=FC(Ce?c:N,e,O,Z,G);de(tt)}le.current=c,ye.current=e,me.current=Z},[c,e,O,Z,G,be,N]),k.useEffect(()=>{!be&&!Si(N,he.current)&&(he.current=N,b(N))},[N,be,b]);const ve=k.useMemo(()=>{if(!d)return;const Ce=Pc(N),Ke=Ee[1];return Ce*j+(Ce-1)*A[1]+Ke*2+"px"},[d,N,j,A,Ee]),Ie=k.useCallback((Ce,Ke,Be,Ye)=>{const tt=vo(N,Ce);if(!tt)return;const Je={w:tt.w,h:tt.h,x:tt.x,y:tt.y,i:Ce};we.current=eo(tt),ge.current=N,re(Je),x(N,tt,tt,null,Ye.e,Ye.node)},[N,x]),He=k.useCallback((Ce,Ke,Be,Ye)=>{const tt=we.current,Je=vo(N,Ce);if(!Je)return;const kt={w:Je.w,h:Je.h,x:Je.x,y:Je.y,i:Ce},ot=Do(N,Je,Ke,Be,!0,se,Z,O,G);g(ot,tt,Je,kt,Ye.e,Ye.node),de(G?ot:$r(ot,Z,O)),re(kt)},[N,se,Z,O,G,g]),Fe=k.useCallback((Ce,Ke,Be,Ye)=>{if(!be)return;const tt=we.current,Je=vo(N,Ce);if(!Je)return;const kt=Do(N,Je,Ke,Be,!0,se,Z,O,G),ot=G?kt:$r(kt,Z,O);y(ot,tt,Je,null,Ye.e,Ye.node);const jt=ge.current;we.current=null,ge.current=null,re(null),de(ot),jt&&!Si(jt,ot)&&b(ot)},[be,N,se,Z,O,G,y,b]),je=k.useCallback((Ce,Ke,Be,Ye)=>{const tt=vo(N,Ce);tt&&(te.current=eo(tt),ge.current=N,ee(!0),S(N,tt,tt,null,Ye.e,Ye.node))},[N,S]),Ae=k.useCallback((Ce,Ke,Be,Ye)=>{const tt=te.current,{handle:Je}=Ye;let kt=!1,ot,jt;const[Ks,uo]=GB(N,Ce,Lt=>(ot=Lt.x,jt=Lt.y,["sw","w","nw","n","ne"].includes(Je)&&(["sw","nw","w"].includes(Je)&&(ot=Lt.x+(Lt.w-Ke),Ke=Lt.x!==ot&&ot<0?Lt.w:Ke,ot=ot<0?0:ot),["ne","n","nw"].includes(Je)&&(jt=Lt.y+(Lt.h-Be),Be=Lt.y!==jt&&jt<0?Lt.h:Be,jt=jt<0?0:jt),kt=!0),se&&!G&&nI(N,{...Lt,w:Ke,h:Be,x:ot??Lt.x,y:jt??Lt.y}).filter(RD=>RD.i!==Lt.i).length>0&&(jt=Lt.y,Be=Lt.h,ot=Lt.x,Ke=Lt.w,kt=!1),Lt.w=Ke,Lt.h=Be,Lt));if(!uo)return;let Mh=Ks;kt&&ot!==void 0&&jt!==void 0&&(Mh=Do(Ks,uo,ot,jt,!0,se,Z,O,G));const z1={w:uo.w,h:uo.h,x:uo.x,y:uo.y,i:Ce,static:!0};w(Mh,tt,uo,z1,Ye.e,Ye.node),de(G?Mh:$r(Mh,Z,O)),re(z1)},[N,se,G,Z,O,w]),We=k.useCallback((Ce,Ke,Be,Ye)=>{const tt=te.current,Je=vo(N,Ce),kt=G?N:$r(N,Z,O);v(kt,tt,Je??null,null,Ye.e,Ye.node);const ot=ge.current;te.current=null,ge.current=null,re(null),ee(!1),de(kt),ot&&!Si(ot,kt)&&b(kt)},[N,G,Z,O,v,b]),ze=k.useCallback(()=>{const Ce=$r(N.filter(Ke=>Ke.i!==ae.i),Z,O,G);de(Ce),Q(null),re(null),J(void 0)},[N,ae.i,Z,O,G]),ie=k.useCallback(Ce=>{var ot;if(Ce.preventDefault(),Ce.stopPropagation(),jI&&!((ot=Ce.nativeEvent.target)!=null&&ot.classList.contains(LC)))return!1;const Ke=_(Ce);if(Ke===!1)return W&&ze(),!1;const Be={...ae,...Ke},Ye=Ce.currentTarget.getBoundingClientRect(),tt=Ce.clientX-Ye.left,Je=Ce.clientY-Ye.top,kt={left:tt/ke,top:Je/ke,e:Ce.nativeEvent};if(W)H&&(H.left!==tt||H.top!==Je)&&J(kt);else{const Ks=mp({cols:O,margin:A,maxRows:U,rowHeight:j,containerWidth:n,containerPadding:Ee},Je,tt,Be.w,Be.h);Q(h.jsx("div",{},Be.i)),J(kt),de([...N,{...Be,x:Ks.x,y:Ks.y,static:!1,isDraggable:!0}])}},[W,H,ae,_,ze,ke,O,A,U,j,n,Ee,N]),Y=k.useCallback(Ce=>{Ce.preventDefault(),Ce.stopPropagation(),Pe.current--,Pe.current===0&&ze()},[ze]),V=k.useCallback(Ce=>{Ce.preventDefault(),Ce.stopPropagation(),Pe.current++},[]),Te=k.useCallback(Ce=>{Ce.preventDefault(),Ce.stopPropagation();const Ke=N.find(Be=>Be.i===ae.i);Pe.current=0,ze(),C(N,Ke,Ce.nativeEvent)},[N,ae.i,ze,C]),it=k.useCallback((Ce,Ke)=>{if(!Ce||!Ce.key)return null;const Be=vo(N,String(Ce.key));if(!Be)return null;const Ye=typeof Be.isDraggable=="boolean"?Be.isDraggable:!Be.static&&B,tt=typeof Be.isResizable=="boolean"?Be.isResizable:!Be.static&&z,Je=Be.resizeHandles||[...R],kt=Ye&&F&&Be.isBounded!==!1,ot=T;return h.jsx(jC,{containerWidth:n,cols:O,margin:A,containerPadding:Ee,maxRows:U,rowHeight:j,cancel:D,handle:$,onDragStart:Ie,onDrag:He,onDragStop:Fe,onResizeStart:je,onResize:Ae,onResizeStop:We,isDraggable:Ye,isResizable:tt,isBounded:kt,useCSSTransforms:Ne&&Ue,usePercentages:!Ue,transformScale:ke,w:Be.w,h:Be.h,x:Be.x,y:Be.y,i:Be.i,minH:Be.minH,minW:Be.minW,maxH:Be.maxH,maxW:Be.maxW,static:Be.static,droppingPosition:Ke?H:void 0,resizeHandles:Je,resizeHandle:ot,children:Ce},Be.i)},[N,n,O,A,Ee,U,j,D,$,Ie,He,Fe,je,Ae,We,B,z,F,Ne,Ue,ke,H,R,T]),Ve=()=>be?h.jsx(jC,{w:be.w,h:be.h,x:be.x,y:be.y,i:be.i,className:`react-grid-placeholder ${_e?"placeholder-resizing":""}`,containerWidth:n,cols:O,margin:A,containerPadding:Ee,maxRows:U,rowHeight:j,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:Ne,transformScale:ke,children:h.jsx("div",{})}):null,St=Ud(LC,f),pe={height:ve,...p};return h.jsxs("div",{ref:m,className:St,style:pe,onDrop:X?Te:void 0,onDragLeave:X?Y:void 0,onDragEnter:X?V:void 0,onDragOver:X?ie:void 0,children:[fe.Children.map(e,Ce=>fe.isValidElement(Ce)?it(Ce):null),X&&W&&it(W,!0),Ve()]})}var FU={lg:1200,md:996,sm:768,xs:480,xxs:0},$U={lg:12,md:10,sm:6,xs:4,xxs:2},Tb=()=>{};function BU(t,e,n,s,r){const i=[];fe.Children.forEach(e,a=>{if(!fe.isValidElement(a)||a.key===null)return;const l=String(a.key),c=t.find(u=>u.i===l);if(c)i.push({...c,i:l});else{const d=a.props["data-grid"];d?i.push({i:l,x:d.x??0,y:d.y??0,w:d.w??1,h:d.h??1,minW:d.minW,maxW:d.maxW,minH:d.minH,maxH:d.maxH,static:d.static,isDraggable:d.isDraggable,isResizable:d.isResizable,resizeHandles:d.resizeHandles,isBounded:d.isBounded}):i.push({i:l,x:0,y:Pc(i),w:1,h:1})}});const o=Kv(i,{cols:n});return $r(o,s,n,r)}function zU(t){const{children:e,width:n,breakpoint:s,breakpoints:r=FU,cols:i=$U,layouts:o={},rowHeight:a=150,maxRows:l=1/0,margin:c=[10,10],containerPadding:u=null,compactor:d,onBreakpointChange:f=Tb,onLayoutChange:p=Tb,onWidthChange:m=Tb,...b}=t,x=d??Qv("vertical"),g=x.type,y=x.allowOverlap,S=k.useMemo(()=>s??_C(r,n),[]),w=k.useMemo(()=>EC(S,i),[S,i]),v=k.useMemo(()=>Sb(o,r,S,S,w,g),[]),[C,_]=k.useState(S),[P,M]=k.useState(w),[E,I]=k.useState(v),[O,j]=k.useState(o),U=k.useRef(n),A=k.useRef(s),L=k.useRef(r),B=k.useRef(i),F=k.useRef(o),$=k.useRef(g);k.useEffect(()=>{if(!Si(o,F.current)){const X=Sb(o,r,C,C,P,g);I(X),j(o),F.current=o}},[o,r,C,P,g]),k.useEffect(()=>{if(g!==$.current){const X=$r(Ys(E),g,P,y),ne={...O,[C]:X};I(X),j(ne),p(X,ne),$.current=g}},[g,E,P,y,O,C,p]),k.useEffect(()=>{const X=n!==U.current,ne=s!==A.current,q=!Si(r,L.current),Z=!Si(i,B.current);if(X||ne||q||Z){const G=s??_C(r,n),se=EC(G,i),ae=C;if(ae!==G||q||Z){const Ee={...O};Ee[ae]||(Ee[ae]=Ys(E));let Ue=Sb(Ee,r,G,ae,se,g);Ue=BU(Ue,e,se,g,y),Ee[G]=Ue,_(G),M(se),I(Ue),j(Ee),f(G,se),p(Ue,Ee)}const Ne=Cf(c,G),ke=u?Cf(u,G):null;m(n,Ne,se,ke),U.current=n,A.current=s,L.current=r,B.current=i}},[n,s,r,i,C,P,E,O,e,g,y,c,u,f,p,m]);const D=k.useCallback(X=>{const ne={...O,[C]:X};I(X),j(ne),p(X,ne)},[O,C,p]),z=k.useMemo(()=>Cf(c,C),[c,C]),R=k.useMemo(()=>u===null?null:Cf(u,C),[u,C]),T=k.useMemo(()=>({cols:P,rowHeight:a,maxRows:l,margin:z,containerPadding:R}),[P,a,l,z,R]);return h.jsx(LU,{...b,width:n,gridConfig:T,compactor:x,onLayoutChange:D,layout:E,children:e})}function LI(t){const{children:e,width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,rowHeight:u,maxRows:d,margin:f,containerPadding:p,droppingItem:m,compactType:b,preventCollision:x=!1,allowOverlap:g=!1,verticalCompact:y,isDraggable:S=!0,isBounded:w=!1,draggableHandle:v,draggableCancel:C,isResizable:_=!0,resizeHandles:P=["se"],resizeHandle:M,isDroppable:E=!1,useCSSTransforms:I=!0,transformScale:O=1,autoSize:j,className:U,style:A,innerRef:L,onDragStart:B,onDrag:F,onDragStop:$,onResizeStart:D,onResize:z,onResizeStop:R,onDrop:T,onDropDragOver:X}=t;let ne=b===void 0?"vertical":b;y===!1&&(ne=null);const q={enabled:S,bounded:w,handle:v,cancel:C},Z={enabled:_,handles:P,handleComponent:M},G={enabled:E};let se;I?O!==1?se=zB(O):se=tI:se=BB;const ae=Qv(ne,g,x);return h.jsx(zU,{width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,rowHeight:u,maxRows:d,margin:f,containerPadding:p,compactor:ae,dragConfig:q,resizeConfig:Z,dropConfig:G,positionStrategy:se,droppingItem:m,autoSize:j,className:U,style:A,innerRef:L,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,onDragStart:B,onDrag:F,onDragStop:$,onResizeStart:D,onResize:z,onResizeStop:R,onDrop:T,onDropDragOver:X,children:e})}LI.displayName="ResponsiveReactGridLayout";var UU=LI,WU="react-grid-layout";function HU(t){function e(n){const{measureBeforeMount:s=!1,className:r,style:i,...o}=n,[a,l]=k.useState(1280),[c,u]=k.useState(!1),d=k.useRef(null),f=k.useRef(null);return k.useEffect(()=>{u(!0),f.current=new ResizeObserver(m=>{if(d.current instanceof HTMLElement&&m[0]){const x=m[0].contentRect.width;l(x)}});const p=d.current;return p instanceof HTMLElement&&f.current.observe(p),()=>{var m;p instanceof HTMLElement&&f.current&&f.current.unobserve(p),(m=f.current)==null||m.disconnect()}},[]),s&&!c?h.jsx("div",{className:Ud(r,WU),style:i,ref:d}):h.jsx(t,{innerRef:d,className:r,style:i,...o,width:a})}return e.displayName=`WidthProvider(${t.displayName||t.name||"Component"})`,e}const Yu=[[0,4,8,16],[8,4,2,16],[0,40,3,27],[0,20,3,20],[3,20,7,13],[3,33,7,8],[3,41,7,6],[3,47,2,16],[0,0,10,4]],VU=[[0,4,8,16],[8,4,2,16],[9,20,3,27],[0,20,3,20],[3,20,6,13],[0,40,9,7],[3,33,6,7],[10,4,2,16],[0,0,12,4]],$C=0,qU=8;function YU(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""}function GU(t,e){return Math.floor(Math.random()*(e-t+1))+t}function KU(t){const e=Math.ceil(Math.random()*4)+1;return{x:GU(0,5)*2%12,y:Math.floor(t/6)*e,w:2,h:e,i:t.toString(),static:Math.random()<.05}}function XU(t,e){const[n,s,r,i]=e;return{x:n,y:s,w:r,h:i,i:t.toString(),static:!0}}function Gu(t,e){const n=t.length,s=[];for(let r=0;r<n;r++)r<t.length?s.push(XU(r,t[r])):s.push(KU(r));return s}function QU(t,e){const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const r of n){const i=t[r],o=e[r];if(!i||!o){if(i!==o)return!1;continue}if(i.length!==o.length)return!1;for(let a=0;a<i.length;a++){const l=i[a],c=o[a];if(l.x!==c.x||l.y!==c.y||l.w!==c.w||l.h!==c.h)return!1}}return!0}function Mb(t,e){const n={};for(const s in t){const r=t[s];r&&(n[s]=r.map(i=>({...i,static:e})))}return n}const JU=HU(UU),$0=class $0 extends fe.Component{constructor(n){super(n);ce(this,"isUpdatingLayout",!1);ce(this,"domCache",null);ce(this,"lastLayoutKey","");ce(this,"handleResponsiveLayoutChange",(n,s)=>{const r=Array.isArray(n)?n:[n],i=s;this.onLayoutChange(r,i)});ce(this,"generateNewLayout",()=>{const n=Gu(Yu),s=this.props.allStatic??this.state.allStatic,r=n.map(i=>({...i,static:s}));this.domCache=null,this.lastLayoutKey="",this.setState({layouts:{lg:r}})});this.state={currentBreakpoint:"lg",compactType:n.compactType??"vertical",mounted:!1,layouts:{lg:n.initialLayout||Gu(Yu)},allStatic:n.allStatic??!0},this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onCompactTypeChange=this.onCompactTypeChange.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.onNewLayout=this.onNewLayout.bind(this),this.onToggleStatic=this.onToggleStatic.bind(this)}componentDidMount(){this.setState({mounted:!0})}generateDOM(){const n=this.state.layouts.lg||[],{slotContent:s=[]}=this.props,r=this.props.allStatic??this.state.allStatic,i=`${n.length}-${r}-${s.length}`;if(this.domCache&&this.lastLayoutKey===i)return this.domCache;const o=[];for(let a=0;a<n.length;a++){const l=n[a],c=a>=$C&&a<=qU,u=a-$C,d=c&&s[u]?s[u]:null,f=l.static??r;o.push(h.jsx("div",{className:f?"static":"",children:d?h.jsx("div",{className:"external-slot-content",children:d}):f?h.jsxs("span",{className:"text",title:"This item is static and cannot be removed or resized.",children:["Static - ",a]}):h.jsx("span",{className:"text",children:a})},l.i||a.toString()))}return this.domCache=o,this.lastLayoutKey=i,o}onBreakpointChange(n){this.setState({currentBreakpoint:n})}onCompactTypeChange(){if(this.props.onCompactTypeChange)this.props.onCompactTypeChange();else{const{compactType:n}=this.state,s=n==="horizontal"?"vertical":n==="vertical"?null:"horizontal";this.setState({compactType:s})}}onLayoutChange(n,s){if(this.isUpdatingLayout){this.props.onLayoutChange(n,s);return}const r=this.props.allStatic??this.state.allStatic;if(r){this.props.onLayoutChange(n,s);return}const i=Mb(s,r);!QU(this.state.layouts,i)&&(this.domCache=null,this.lastLayoutKey="",this.isUpdatingLayout=!0,this.setState({layouts:i},()=>{this.isUpdatingLayout=!1})),this.props.onLayoutChange(n,i)}onNewLayout(){this.props.onNewLayout?this.props.onNewLayout():this.generateNewLayout()}onToggleStatic(){if(this.props.onToggleStatic)this.props.onToggleStatic();else{const n=!this.state.allStatic,s=Mb(this.state.layouts,n);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:n,layouts:s})}}componentDidUpdate(n){if(n.compactType!==this.props.compactType&&this.props.compactType!==void 0&&this.setState({compactType:this.props.compactType}),n.allStatic!==this.props.allStatic&&this.props.allStatic!==void 0){const s=Mb(this.state.layouts,this.props.allStatic);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:this.props.allStatic,layouts:s})}n.slotContent!==this.props.slotContent&&(this.domCache=null,this.lastLayoutKey="")}render(){const{cols:n}=this.props,s=n||$0.defaultProps.cols||{},r=this.props.compactType??this.state.compactType;return h.jsxs("div",{children:[h.jsxs("div",{children:["Current Breakpoint: ",this.state.currentBreakpoint," (",s[this.state.currentBreakpoint]," columns)"]}),h.jsxs("div",{children:["Compaction type: ",YU(r)||"No Compaction"]}),h.jsx(JU,{...this.props,layouts:this.state.layouts,onBreakpointChange:this.onBreakpointChange,onLayoutChange:this.handleResponsiveLayoutChange,measureBeforeMount:!1,useCSSTransforms:this.state.mounted,compactType:r,preventCollision:!r,children:this.generateDOM()})]})}};ce($0,"defaultProps",{className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},initialLayout:Gu(Yu)});let vy=$0;function FI(){const t=document.getElementById("tradingview-widget-script");t&&t.parentNode&&t.parentNode.removeChild(t)}function ZU(){return new Promise((t,e)=>{if(typeof window.TradingView<"u"){t();return}FI();const n=document.createElement("script");n.id="tradingview-widget-script",n.src=X9,n.async=!0,n.onload=()=>{typeof window.TradingView<"u"?t():e(new Error("TradingView script loaded but TradingView object not found"))},n.onerror=()=>{e(new Error("Failed to load TradingView script"))},document.head.appendChild(n)})}function eW(t){if(typeof window.TradingView>"u")throw new Error("TradingView is not loaded. Call loadTradingViewScript() first.");const e={autosize:t.autosize!==!1,symbol:t.symbol,interval:t.interval,timezone:t.timezone||"Etc/UTC",theme:"dark",style:"1",locale:t.locale||"en",toolbar_bg:"#1a1a1a",enable_publishing:t.enablePublishing||!1,hide_top_toolbar:t.hideTopToolbar||!1,hide_legend:t.hideLegend||!1,save_image:!1,container_id:t.containerId,hide_volume:t.hideVolume||!1,studies:t.studies||["RSI@tv-basicstudies","MASimple@tv-basicstudies"]};return new window.TradingView.widget(e)}function tW(){return`tradingview-widget-container-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function nW({symbol:t=G9,interval:e=K9,isCollapsed:n=!1,className:s=""}){const r=k.useRef(null),i=k.useRef(null),o=k.useRef(tW());return k.useEffect(()=>{if(n||!r.current)return;r.current&&(r.current.id=o.current);let a=!0;return ZU().then(()=>{if(!a||!r.current)return;const l={symbol:t,interval:e,containerId:o.current};i.current=eW(l)}).catch(l=>{console.error("Failed to load TradingView widget:",l)}),()=>{a=!1,i.current&&(i.current=null)}},[t,e,n]),k.useEffect(()=>()=>{FI()},[]),n?h.jsx("div",{className:`tradingview-widget-container ${s}`}):h.jsx("div",{className:`tradingview-widget-wrapper ${s}`,children:h.jsx("div",{ref:r,id:o.current,className:"tradingview-widget-container"})})}function sW(t,e,n){return e!==t?h.jsx("span",{style:{fontSize:"0.7rem",opacity:.5,marginLeft:"0.25rem"},children:""}):h.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"0.25rem"},children:n==="asc"?"":""})}function Tc({message:t="Loading..."}){return h.jsx("div",{className:"message loading",children:t})}function Mc({error:t}){return h.jsxs("div",{className:"message error",children:["Error: ",t]})}function Gr({message:t}){return h.jsx("div",{className:"message empty",children:t})}function $I({message:t}){return h.jsx("div",{className:"message warning",children:t})}function r1({isConnected:t,connectedText:e=" LIVE",disconnectedText:n=" OFFLINE"}){return h.jsx("div",{className:"status-indicator",children:h.jsx("span",{className:`status-dot ${t?"connected":"disconnected"}`,children:t?e:n})})}function Ic({title:t,children:e}){return h.jsxs("div",{className:"layout-header",children:[h.jsx("div",{className:"layout-header-title",children:t}),e&&h.jsx("div",{className:"layout-header-actions",children:e})]})}function Xt({field:t,currentSortField:e,sortDirection:n,onSort:s,children:r,center:i=!1}){return h.jsxs("div",{className:`table-header-cell ${i?"left":"right"}`,onClick:()=>s(t),children:[r,sW(t,e,n)]})}function Sy({children:t,center:e=!1}){return h.jsx("div",{className:`table-header-cell ${e?"left":"right"}`,children:t})}function rW({onClick:t,disabled:e}){return console.log("[CancelButton] Rendering",{disabled:e,hasOnClick:!!t}),h.jsx("button",{onClick:n=>{console.log("[CancelButton] Button clicked",{disabled:e,event:n}),!e&&t?t(n):console.warn("[CancelButton] Click ignored - button is disabled",{disabled:e})},onMouseDown:n=>{console.log("[CancelButton] Mouse down",{disabled:e,event:n})},className:"btn btn-danger",disabled:e,style:{pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer"},children:"Cancel"})}function iW({onClick:t}){return h.jsx("button",{onClick:t,className:"btn btn-success",children:"Close"})}function oW({onConfirm:t,label:e="Slide to confirm",confirmThreshold:n=90,disabled:s=!1,icon:r}){const[i,o]=k.useState(0),[a,l]=k.useState(!1),c=k.useRef(null),u=k.useRef(null),d=p=>{s||(p.preventDefault(),l(!0))};k.useEffect(()=>{if(!a)return;const p=b=>{if(!c.current||s)return;const x=c.current.getBoundingClientRect(),g=b.clientX-x.left,y=x.width,S=Math.max(0,Math.min(100,g/y*100));o(S)},m=()=>{s||(i>=n?(t(),setTimeout(()=>{o(0)},200)):o(0),l(!1))};return document.addEventListener("mousemove",p),document.addEventListener("mouseup",m),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m)}},[a,i,n,t,s]);const f=i>=n;return h.jsxs("div",{ref:c,className:`slider-confirm-bar ${s?"disabled":""} ${a?"dragging":""}`,children:[h.jsx("div",{className:`slider-confirm-bar-progress ${f?"confirmed":"default"} ${a?"no-transition":""}`,style:{width:`${i}%`}}),h.jsx("div",{className:"slider-confirm-bar-label",children:f?"Release to confirm":e}),h.jsx("div",{ref:u,onMouseDown:d,className:`slider-confirm-bar-thumb ${s?"disabled":""} ${a?"dragging":""} ${f?"confirmed":""}`,style:{left:`${i}%`},children:r?h.jsx("span",{className:`slider-confirm-bar-thumb-icon ${f?"confirmed":""}`,children:r}):h.jsx("span",{className:`slider-confirm-bar-thumb-arrow ${f?"confirmed":""}`,children:""})})]})}function aW({isOpen:t,value:e,min:n,max:s,onConfirm:r,onCancel:i}){const[o,a]=k.useState("");if(k.useEffect(()=>{t&&a(e.toString())},[t,e]),!t)return null;const l=x=>{const g=o==="0"?x:o+x;parseFloat(g)<=s&&a(g)},c=()=>{o.includes(".")||a(o+".")},u=()=>{o.length>1?a(o.slice(0,-1)):a("0")},d=()=>{a("0")},f=()=>{const x=parseFloat(o)||0,g=Math.max(n,Math.min(s,x));r(g)},p=parseFloat(o)||0,m=p>=n&&p<=s,b=h.jsx("div",{className:"modal-overlay",onClick:i,style:{zIndex:1e4},children:h.jsxs("div",{className:"modal-content number-pad-content",onClick:x=>x.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Enter Amount"})}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{className:"number-pad-display",children:[h.jsx("div",{className:"number-pad-display-value",children:Dt(p)}),h.jsxs("div",{className:"number-pad-display-range",children:["Min: ",Dt(n)," | Max: ",Dt(s)]}),!m&&p>0&&h.jsxs("div",{className:"number-pad-display-error",children:["Value must be between ",Dt(n)," and"," ",Dt(s)]})]}),h.jsxs("div",{className:"number-pad-grid",children:[h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"1"),children:"1"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"2"),children:"2"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"3"),children:"3"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"4"),children:"4"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"5"),children:"5"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"6"),children:"6"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"7"),children:"7"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"8"),children:"8"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"9"),children:"9"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:c,children:"."}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"0"),children:"0"}),h.jsx("button",{type:"button",className:"number-pad-button number-pad-button-action",onClick:u,children:""})]}),h.jsxs("div",{className:"number-pad-actions",children:[h.jsx("button",{type:"button",className:"number-pad-action-button",onClick:d,children:"Clear"}),h.jsx("button",{type:"button",className:"number-pad-action-button number-pad-action-button-max",onClick:()=>{a(s.toString())},children:"Max"})]})]}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:i,className:"btn btn-secondary",children:"Cancel"}),h.jsx("button",{onClick:f,className:"btn btn-primary",disabled:!m,children:"Confirm"})]})]})});return typeof document<"u"?io.createPortal(b,document.body):null}const BI=({level:t,index:e,isLast:n,depthPercent:s,formatPrice:r,formatSize:i})=>{const o=t.flash==="up"?"flash-up":t.flash==="down"?"flash-down-ask":"";return h.jsxs("div",{className:`orderbook-level ask ${o}`,style:{borderBottom:n?"none":void 0},children:[h.jsx("div",{className:"orderbook-depth-bar ask",style:{width:`${s}%`}}),h.jsx("div",{className:"orderbook-level-content ask",children:r(t.price)}),h.jsx("div",{className:"orderbook-level-content right",children:i(t.size)}),h.jsx("div",{className:"orderbook-depth-indicator",children:h.jsx("div",{className:"orderbook-depth-line ask"})})]})},zI=({level:t,index:e,isLast:n,depthPercent:s,formatPrice:r,formatSize:i})=>{const o=t.flash==="up"?"flash-up":t.flash==="down"?"flash-down-bid":"";return h.jsxs("div",{className:`orderbook-level bid ${o}`,style:{borderBottom:n?"none":void 0},children:[h.jsx("div",{className:"orderbook-depth-bar bid",style:{width:`${s}%`}}),h.jsx("div",{className:"orderbook-level-content bid",children:r(t.price)}),h.jsx("div",{className:"orderbook-level-content right",children:i(t.size)}),h.jsx("div",{className:"orderbook-depth-indicator",children:h.jsx("div",{className:"orderbook-depth-line bid"})})]})};function lW({baseURL:t,wsURL:e,marketId:n,maxDepth:s=E5,height:r=_5,authToken:i,walletAddress:o,deviceID:a}){var P,M;const{orderbook:l,loading:c,error:u,isConnected:d,wsError:f}=P5({baseURL:t,wsURL:e,marketId:n,maxDepth:s,authToken:i,walletAddress:o,deviceID:a}),p=k.useRef(null),m=k.useRef(null),b=k.useRef(null),x=k.useRef(0),g=k.useRef(0);k.useEffect(()=>{const E=l.asks.length!==x.current,I=l.bids.length!==g.current;if(!(!E&&!I))return x.current=l.asks.length,g.current=l.bids.length,b.current!==null&&cancelAnimationFrame(b.current),b.current=requestAnimationFrame(()=>{if(p.current&&E){const O=p.current;O.scrollTop=O.scrollHeight}if(m.current&&I){const O=m.current;O.scrollTop=0}b.current=null}),()=>{b.current!==null&&(cancelAnimationFrame(b.current),b.current=null)}},[l.asks.length,l.bids.length]);const y=l.asks.length>0?((P=l.asks[l.asks.length-1])==null?void 0:P.cumulative)??0:0,S=l.bids.length>0?((M=l.bids[l.bids.length-1])==null?void 0:M.cumulative)??0:0,w=k.useMemo(()=>Math.max(y,S),[y,S]),v=l0,C=c0,_=k.useCallback(E=>w===0?0:E/w*100,[w]);return c?h.jsx(Tc,{message:"Loading orderbook..."}):u?h.jsx(Mc,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[f&&(l.asks.length>0||l.bids.length>0)&&h.jsxs("div",{className:"orderbook-ws-warning",children:[h.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),h.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),h.jsx(Ic,{title:h.jsx(r1,{isConnected:d}),children:h.jsxs("div",{children:["Depth: ",s]})}),l.midPrice&&h.jsxs("div",{className:"orderbook-mid-price",children:[h.jsx("div",{className:"orderbook-mid-price-value",children:v(l.midPrice)}),l.spread!==void 0&&h.jsxs("div",{className:"orderbook-mid-price-spread",children:["Spread: ",v(l.spread)]})]}),h.jsxs("div",{className:"orderbook-content",children:[h.jsxs("div",{className:"orderbook-section",ref:p,children:[l.asks.map((E,I)=>{const O=_(E.cumulative);return h.jsx(BI,{level:E,index:I,isLast:I===l.asks.length-1,depthPercent:O,formatPrice:v,formatSize:C},`ask-${E.price}-${I}`)}),l.asks.length===0&&h.jsx(Gr,{message:"No ask orders"})]}),h.jsxs("div",{className:"orderbook-section bids",ref:m,children:[l.bids.map((E,I)=>{const O=_(E.cumulative);return h.jsx(zI,{level:E,index:I,isLast:I===l.bids.length-1,depthPercent:O,formatPrice:v,formatSize:C},`bid-${E.price}-${I}`)}),l.bids.length===0&&h.jsx(Gr,{message:"No bid orders"})]})]}),h.jsx(UI,{totalBids:S,totalAsks:y})]})}const UI=fe.memo(({totalBids:t,totalAsks:e})=>{const n=t+e,s=n>0?`${(t/n*100).toFixed(0)}%`:"0%",r=n>0?`${(e/n*100).toFixed(0)}%`:"0%";return h.jsxs("div",{className:"orderbook-footer",children:[h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar bid"}),h.jsx("span",{className:"color-text-muted",children:s})]}),h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar ask"}),h.jsx("span",{className:"color-text-muted",children:r})]})]})});UI.displayName="FooterSummary";const cW=fe.memo(lW);function uW(t,e,n,s){const r=o=>{const a=1-o;return 3*a*a*o*t+3*a*o*o*n+o*o*o},i=o=>{const a=1-o;return 3*a*a*o*e+3*a*o*o*s+o*o*o};return o=>{if(o<=0)return 0;if(o>=1)return 1;let a=0,l=1,c=.5;for(let u=0;u<12;u++){const d=r(c);if(Math.abs(d-o)<1e-4)break;d<o?a=c:l=c,c=(a+l)/2}return i(c)}}function dW({baseURL:t,wsURL:e,marketId:n,maxDepth:s=E5,height:r=_5,authToken:i,walletAddress:o,deviceID:a}){var $,D;const{orderbook:l,loading:c,error:u,isConnected:d,wsError:f}=P5({baseURL:t,wsURL:e,marketId:n,maxDepth:s,authToken:i,walletAddress:o,deviceID:a}),p=k.useRef(null),m=k.useRef(null),b=k.useRef(null),x=k.useRef(null),g=k.useRef(!1),y=k.useRef(null),S=k.useRef(null),w=k.useRef(!1),v=k.useRef(0),C=l.asks.length>0?(($=l.asks[l.asks.length-1])==null?void 0:$.cumulative)??0:0,_=l.bids.length>0?((D=l.bids[l.bids.length-1])==null?void 0:D.cumulative)??0:0,P=k.useMemo(()=>Math.max(C,_),[C,_]),M=l0,E=c0,I=k.useCallback(z=>P===0?0:z/P*100,[P]),O=k.useCallback((z,R,T)=>{if(g.current)return;g.current=!0;const X=T,ne=R-X,q=300,Z=performance.now(),G=Z+q,se=uW(.57,.4,.55,1.17),ae=Ne=>{if(Ne>=G){z.scrollTop=Math.max(0,R),g.current=!1,v.current=performance.now(),x.current&&(cancelAnimationFrame(x.current),x.current=null);return}const ke=Ne-Z,Ee=Math.min(ke/q,1),Ue=se(Ee),st=X+ne*Ue;z.scrollTop=Math.max(0,st),x.current=requestAnimationFrame(ae)};x.current=requestAnimationFrame(ae)},[]),j=k.useCallback((z=0)=>{if(g.current||performance.now()-v.current<500||!p.current||!m.current)return;const X=p.current,q=m.current.clientHeight;if(q===0)return;const Z=q/2,G=20.83333;if(l.asks.length*G<=Z||l.spread===void 0)return;if(!b.current){if(z<3){S.current&&clearTimeout(S.current);const be=50*(z+1);S.current=window.setTimeout(()=>{S.current=null,j(z+1)},be)}return}const ae=b.current,Ne=ae.offsetTop,ke=ae.offsetHeight;if(ke===0){if(z<3){S.current&&clearTimeout(S.current);const be=50*(z+1);S.current=window.setTimeout(()=>{S.current=null,j(z+1)},be)}return}const Ee=Ne+ke/2,Ue=q/2,st=Ee-Ue-G,N=X.scrollTop;Math.abs(st-N)>1&&O(X,Math.max(0,st),N)},[l.asks.length,l.spread,O]);k.useEffect(()=>{const z=()=>{w.current&&(w.current=!1,j())};return window.addEventListener("mouseup",z),()=>{window.removeEventListener("mouseup",z)}},[j]),k.useEffect(()=>{if(!p.current||!m.current)return;const z=requestAnimationFrame(()=>{requestAnimationFrame(()=>{j()})});return()=>{cancelAnimationFrame(z),x.current&&(cancelAnimationFrame(x.current),x.current=null),y.current&&(clearTimeout(y.current),y.current=null),S.current&&(clearTimeout(S.current),S.current=null),g.current=!1}},[l.asks.length,l.bids.length,l.spread,P,j]);const U=k.useCallback(()=>{g.current&&x.current&&(cancelAnimationFrame(x.current),x.current=null,g.current=!1),y.current&&(clearTimeout(y.current),y.current=null)},[]),A=k.useCallback(z=>{const R=z.currentTarget,T=R.offsetWidth-R.clientWidth;if(T>0){const X=R.getBoundingClientRect();z.clientX-X.left>R.clientWidth-T-5&&(w.current=!0,U())}},[U]),L=k.useCallback(()=>{w.current&&U()},[U]),B=k.useCallback(()=>{w.current&&(w.current=!1,j())},[j]),F=k.useCallback(()=>{U(),y.current&&clearTimeout(y.current),w.current||(y.current=window.setTimeout(()=>{y.current=null,j()},150))},[j,U]);return c?h.jsx(Tc,{message:"Loading orderbook..."}):u?h.jsx(Mc,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[f&&(l.asks.length>0||l.bids.length>0)&&h.jsxs("div",{className:"orderbook-ws-warning",children:[h.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),h.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),h.jsx(Ic,{title:h.jsx(r1,{isConnected:d}),children:h.jsxs("div",{children:["Depth: ",s]})}),h.jsx("div",{className:"orderbook-content",ref:m,children:h.jsxs("div",{className:"orderbook-section",ref:p,onScroll:F,onMouseDown:A,onMouseMove:L,onMouseUp:B,onMouseLeave:B,children:[l.asks.map((z,R)=>{const T=I(z.cumulative);return h.jsx(BI,{level:z,index:R,isLast:R===l.asks.length-1&&l.bids.length===0,depthPercent:T,formatPrice:M,formatSize:E},`ask-${z.price}-${R}`)}),l.spread!==void 0&&h.jsxs("div",{className:"orderbook-mid-price-spread",ref:b,children:["Spread: ",M(l.spread)]}),l.bids.map((z,R)=>{const T=I(z.cumulative);return h.jsx(zI,{level:z,index:R,isLast:R===l.bids.length-1,depthPercent:T,formatPrice:M,formatSize:E},`bid-${z.price}-${R}`)}),l.asks.length===0&&l.bids.length===0&&h.jsx(Gr,{message:"No orders"}),l.asks.length===0&&l.bids.length>0&&h.jsx(Gr,{message:"No ask orders"}),l.bids.length===0&&l.asks.length>0&&h.jsx(Gr,{message:"No bid orders"})]})}),h.jsx(WI,{totalBids:_,totalAsks:C})]})}const WI=fe.memo(({totalBids:t,totalAsks:e})=>{const n=t+e,s=n>0?`${(t/n*100).toFixed(0)}%`:"0%",r=n>0?`${(e/n*100).toFixed(0)}%`:"0%";return h.jsxs("div",{className:"orderbook-footer",children:[h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar bid"}),h.jsx("span",{className:"color-text-muted",children:s})]}),h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar ask"}),h.jsx("span",{className:"color-text-muted",children:r})]})]})});WI.displayName="FooterSummary";const hW=fe.memo(dW);function fW({baseURL:t=la,wsURL:e=C5,marketId:n=W9,symbol:s,limit:r=H9,authToken:i,walletAddress:o,deviceID:a}){const{lastPrice:l,displayPrice:c,loading:u,error:d,isConnected:f,priceChange:p}=wm({baseURL:t,wsURL:e,marketId:n,symbol:s,limit:r,authToken:i,walletAddress:o,deviceID:a}),[m,b]=k.useState([]),[x,g]=k.useState(!1),y=k.useRef(null),S=k.useRef(!1),w=k.useRef(null),v=k.useCallback(async()=>{if(!y.current||!n){console.debug("[TradePrice] fetchRecentTrades skipped: missing client or marketId");return}if(S.current){console.debug("[TradePrice] fetchRecentTrades skipped: already fetching");return}console.debug("[TradePrice] Starting fetchRecentTrades"),S.current=!0,g(!0);try{const F=await y.current.getRecentTrades(n,20);if(F&&Array.isArray(F)&&F.length>0){const D=[...F].sort((z,R)=>{const T=Nr(z.timestamp);return Nr(R.timestamp)-T}).map(z=>{const R=Nr(z.timestamp),T=typeof z.quantity=="string"?De(z.quantity):typeof z.quantity=="number"?z.quantity:0,X=typeof z.price=="string"?De(z.price):typeof z.price=="number"?z.price:0;return{time:R,size:T,price:X,is_buyer_maker:!1}});b(D),console.debug("[TradePrice] fetchRecentTrades completed successfully")}else b([]),console.debug("[TradePrice] fetchRecentTrades: no trades returned")}catch(F){console.error("[TradePrice] Failed to fetch recent trades:",F),b([])}finally{console.debug("[TradePrice] fetchRecentTrades finished, clearing loading state"),g(!1),S.current=!1}},[n]);k.useEffect(()=>{if(!n){console.debug("[TradePrice] Initialization skipped: no marketId");return}console.debug("[TradePrice] Initializing trades fetch for marketId:",n),S.current=!1,g(!1),y.current=new an({baseURL:t});const F=setTimeout(()=>{y.current&&n&&!S.current?(console.debug("[TradePrice] Executing initial fetchRecentTrades"),v()):console.debug("[TradePrice] Initial fetch skipped:",{hasClient:!!y.current,hasMarketId:!!n,isFetching:S.current})},100);return()=>{console.debug("[TradePrice] Cleaning up trades fetch effect"),clearTimeout(F),S.current=!1,g(!1)}},[t,n]);const C=k.useRef(""),_=k.useRef(null),P=k.useCallback(()=>{const F=w.current;if(!F)return;const $=F.parentElement;if(!$)return;const D=F.textContent||"";if(!D)return;const z=window.getComputedStyle($),R=parseFloat(z.paddingLeft)+parseFloat(z.paddingRight),T=$.clientWidth-R;let X=12,ne=48,q=X;const Z=document.createElement("div");for(Z.style.position="absolute",Z.style.visibility="hidden",Z.style.whiteSpace="nowrap",Z.style.fontFamily=window.getComputedStyle(F).fontFamily,Z.style.fontWeight=window.getComputedStyle(F).fontWeight,document.body.appendChild(Z);X<=ne;){const se=Math.floor((X+ne)/2);Z.style.fontSize=`${se}px`,Z.textContent=D,Z.offsetWidth<=T?(q=se,X=se+1):ne=se-1}document.body.removeChild(Z);const G=parseFloat(window.getComputedStyle(F).fontSize);Math.abs(G-q)>.5&&(F.style.fontSize=`${q}px`)},[]);k.useEffect(()=>{if(c==null)return;const F=cl(c);if(F===C.current)return;C.current=F,_.current!==null&&clearTimeout(_.current),_.current=window.setTimeout(()=>{P()},150);let $;const D=()=>{clearTimeout($),$=window.setTimeout(()=>{_.current!==null&&clearTimeout(_.current),_.current=window.setTimeout(()=>{P()},150)},100)};return window.addEventListener("resize",D),()=>{_.current!==null&&clearTimeout(_.current),clearTimeout($),window.removeEventListener("resize",D)}},[c,P]);const M=k.useCallback(F=>{if(!F||isNaN(F)||F<=0)return"Invalid";let $=F;$<9466848e5&&($=$*1e3);const D=new Date($);return isNaN(D.getTime())?"Invalid":D.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},[]),E=k.useCallback(F=>F?"#51cf66":"#ff6b6b",[]),I=k.useCallback(F=>F?"BUY":"SELL",[]),O=k.useCallback(F=>F?"":"",[]);if(u)return h.jsx(Tc,{message:"Loading trade price..."});if(d)return h.jsx(Mc,{error:d});if(c==null)return h.jsx(Gr,{message:"No trade data available"});const j=l&&l.is_buyer_maker!==void 0,U=j?E(l.is_buyer_maker):"#888",A=j?I(l.is_buyer_maker):"N/A",L=j?O(l.is_buyer_maker):"",B=p==="up"?"flash-price-up":p==="down"?"flash-price-down":"";return h.jsxs("div",{className:"layout-container trade-price-container",children:[h.jsx(Ic,{title:h.jsx(r1,{isConnected:f}),children:h.jsx("div",{children:"Last Trade Price"})}),h.jsxs("div",{className:`trade-price-main ${B}`,children:[h.jsx("div",{ref:w,className:"trade-price-value",style:{color:U},children:cl(c)}),h.jsxs("div",{className:"trade-price-side",style:{color:U},children:[h.jsx("span",{children:L}),h.jsx("span",{children:A})]})]}),h.jsx("div",{className:"trade-price-trades-table",children:x?h.jsx("div",{className:"message",children:"Loading trades..."}):m.length===0?h.jsx("div",{className:"message",children:"No trades available"}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Time"}),h.jsx("th",{className:"right",children:"Size"}),h.jsx("th",{className:"right",children:"Price"})]})}),h.jsx("tbody",{children:m.map(F=>{const $=F.is_buyer_maker?"#51cf66":"#ff6b6b";return h.jsxs("tr",{children:[h.jsx("td",{children:M(F.time)}),h.jsx("td",{className:"right",children:CL(F.size)}),h.jsx("td",{className:"right price",style:{color:$},children:cl(F.price)})]},`${F.time}-${F.price}-${F.size}`)})})]})})]})}const pW=fe.memo(fW),mW=({...t})=>h.jsx(sF,{...t,className:"toaster",expand:!0,richColors:!1,closeButton:!1,toastOptions:{duration:4e3,classNames:{toast:"toast",title:"toast-title",description:"toast-description",actionButton:"toast-action-button",cancelButton:"toast-cancel-button",closeButton:"toast-close-button"}}}),gW=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch{try{const n=document.createElement("textarea");return n.value=t,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),!0}catch(n){return console.error("Failed to copy to clipboard:",n),!1}}},Ln=t=>({label:"Copy",onClick:async()=>{await gW(t)?Oe.success("Error message copied to clipboard"):Oe.error("Failed to copy error message")}});function HI(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(""),[l,c]=k.useState(0),[u,d]=k.useState(!1),f=k.useRef(null),p=k.useRef(null),m=k.useRef(0),b=k.useRef(!0),x=k.useRef(!1),g=k.useRef(t);g.current=t;const y=k.useCallback(C=>{console.log("[useBucketCollections] [transformBucketToCollection] Transforming bucket:",{rawBucket:C,bucketId:C.bucket_id,usedMargin:C.used_margin,totalEquity:C.total_equity,dedicatedMargin:C.dedicated_margin});const _=Av(C,De);console.log("[useBucketCollections] [transformBucketToCollection] Transformed to Bucket:",_);const P=String(_.bucketId).trim();(!P||P===""||P==="undefined"||P==="null")&&console.warn("[useBucketCollections] [transformBucketToCollection] Invalid bucketId detected:",{bucketId:P,rawBucket:{bucket_id:C.bucket_id},fullRawBucket:C});const M=S5(_);return console.log("[useBucketCollections] [transformBucketToCollection] Final BucketCollection:",M),M},[]),S=k.useCallback(async()=>{if(!f.current)return;const C=g.current;if(!C.walletAddress||C.walletAddress.trim()===""){c(0);return}try{const _=await f.current.getBalanceDecimal(C.walletAddress,"USDC"),P=De(_.available_balance);c(P)}catch(_){console.warn("Failed to fetch spot wallet balance (USDC):",_),c(0)}},[]),w=k.useCallback(async()=>{if(!f.current)return;const C=g.current;if(!C.walletAddress||C.walletAddress.trim()===""){a("Wallet address is required"),s([]),i(!1),b.current=!1;return}a(""),b.current&&i(!0);try{console.log("[useBucketCollections] [fetchCollections] Starting fetch...",{walletAddress:C.walletAddress,useWebSocket:e,isSubscribed:x.current}),S(),console.log("[useBucketCollections] [fetchCollections] Calling getBuckets API...");const _=await f.current.getBuckets(C.walletAddress);console.log("[useBucketCollections] [fetchCollections] Raw API response:",{response:_,responseType:typeof _,isArray:Array.isArray(_),responseLength:Array.isArray(_)?_.length:"N/A"});const P=Array.isArray(_)?_:[];console.log("[useBucketCollections] [fetchCollections] Buckets data after normalization:",{bucketsData:P,bucketsDataLength:P.length,bucketsDataTypes:P.map((I,O)=>({index:O,type:typeof I,hasBucketId:!!(I!=null&&I.bucket_id),bucketId:I==null?void 0:I.bucket_id}))}),console.log(`[useBucketCollections] [fetchCollections] About to transform ${P.length} buckets:`,P);const M=P.map(y);console.log(`[useBucketCollections] [fetchCollections] Transformed ${M.length} bucket collections:`,M.map(I=>({bucketId:I.bucketId,marginType:I.marginType,nominalValue:I.nominalValue,maintenanceMargin:I.maintenanceMargin,riskRatio:I.riskRatio})));const E=M.filter(I=>I.bucketId&&I.bucketId.trim()!=="");E.length!==M.length&&console.warn(`[useBucketCollections] [fetchCollections] Filtered out ${M.length-E.length} collections with empty bucketId`,{filtered:M.filter(I=>!I.bucketId||I.bucketId.trim()==="")}),console.log("[useBucketCollections] [fetchCollections] Setting collections state:",{validCollectionsCount:E.length,validCollections:E}),s(E),(!e||!x.current)&&(b.current=!1,i(!1))}catch(_){const P=_ instanceof Error?_.message:"Failed to load bucket collections";a(P),console.error("[useBucketCollections] [fetchCollections] Failed to fetch bucket collections:",{error:_,errorMessage:P,walletAddress:C.walletAddress,stack:_ instanceof Error?_.stack:void 0}),(!e||!x.current)&&(b.current=!1,i(!1))}},[y,S,e]),v=k.useCallback(C=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] WebSocket data received:",{data:C,hasBuckets:!!C.buckets,bucketsIsArray:Array.isArray(C.buckets),bucketsLength:Array.isArray(C.buckets)?C.buckets.length:0}),C.buckets&&Array.isArray(C.buckets)){console.log("[useBucketCollections] [handleBucketsUpdate] Transforming WebSocket buckets:",C.buckets);const _=C.buckets.map(y);console.log("[useBucketCollections] [handleBucketsUpdate] Transformed collections:",_);const P=_.filter(M=>M.bucketId&&M.bucketId.trim()!=="");P.length!==_.length&&console.warn(`[useBucketCollections] [handleBucketsUpdate] WebSocket: Filtered out ${_.length-P.length} collections with empty bucketId`,{filtered:_.filter(M=>!M.bucketId||M.bucketId.trim()==="")}),console.log("[useBucketCollections] [handleBucketsUpdate] Setting collections from WebSocket:",{validCollectionsCount:P.length,validCollections:P}),s(M=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] Previous collections:",{prevCount:M.length,prev:M}),M.length!==P.length)return P;const E=JSON.stringify(M),I=JSON.stringify(P);return E===I?M:P}),b.current&&(b.current=!1,i(!1))}},[y]);return k.useEffect(()=>{if(!t.walletAddress||t.walletAddress.trim()===""){i(!1),a("Wallet address is required"),s([]),p.current&&(p.current.disconnect(),p.current=null),m.current!==null&&(clearInterval(m.current),m.current=0);return}if(!t.wsURL||t.wsURL.trim()===""){i(!1),a("WebSocket URL is required"),s([]);return}const C=new an({baseURL:t.baseURL,sessionToken:t.authToken});if(f.current=C,b.current=!0,x.current=!1,console.log("[useBucketCollections] [useEffect] Initializing, calling fetchCollections..."),w(),e){const _=new lo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});p.current=_;const P=()=>{_.isConnected()&&!x.current&&(_.subscribeBuckets(v),x.current=!0)};_.connect().then(()=>{d(!0),P()}).catch(E=>{console.error("Failed to connect WebSocket:",E),d(!1),b.current&&(b.current=!1,i(!1)),t.refreshInterval&&t.refreshInterval>0&&(m.current=window.setInterval(()=>{w()},t.refreshInterval))});const M=_.onStateChange(E=>{E===dt.Connected?(d(!0),x.current&&P(),m.current!==null&&(clearInterval(m.current),m.current=0)):(d(!1),E===dt.Disconnected&&t.refreshInterval&&t.refreshInterval>0&&m.current===null&&(m.current=window.setInterval(()=>{w()},t.refreshInterval)))});return()=>{M&&M(),p.current&&(p.current.unsubscribeBuckets(v),p.current.disconnect(),p.current=null),m.current!==null&&(clearInterval(m.current),m.current=0)}}else return t.refreshInterval&&t.refreshInterval>0&&(m.current=window.setInterval(()=>{w()},t.refreshInterval)),()=>{m.current!==null&&(clearInterval(m.current),m.current=0)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e,v]),k.useEffect(()=>{console.log("[useBucketCollections] [useEffect] Hook state changed, returning:",{collectionsCount:n.length,collections:n,loading:r,error:o,spotWalletBalance:l})},[n,r,o,l]),{collections:n,loading:r,error:o,refresh:w,spotWalletBalance:l,isConnected:u}}const bW=k.forwardRef(function({baseURL:e=la,wsURL:n=C5,mnemonic:s=V9,marketId:r,marketSymbol:i,selectedBucketBalance:o,selectedBucketId:a,onLeverageClick:l,authToken:c,walletAddress:u},d){const{selectedMarketId:f,selectedMarketSymbol:p}=co({baseURL:e,autoFetchMarkets:!0}),m=r||f||"",b=i||p||"Market",{lastPrice:x}=wm({baseURL:e,wsURL:n,marketId:m}),g=(x==null?void 0:x.price)||0,y=k.useRef(0),{collections:S,spotWalletBalance:w}=HI({baseURL:e,wsURL:n,walletAddress:u||"",authToken:c||"",useWebSocket:!!u&&!!c}),v=k.useMemo(()=>!a||!S.length?null:S.find(je=>je.bucketId===a)||null,[S,a]),{orderType:C,setOrderType:_,fundPercent:P,sizeInput:M,price:E,leverage:I,positionMode:O,marginMode:j,availableBalance:U,currentPrice:A,isReady:L,loading:B,result:F,setFundPercent:$,setSizeInput:D,setPrice:z,setMarginMode:R,setLeverage:T,placeBuyOrder:X,placeSellOrder:ne,calculateValue:q,calculateMargin:Z,calculateSizeUSD:G,getOrderPrice:se,getAvailableTradeAmount:ae}=kL({baseURL:e,mnemonic:s,marketId:m,selectedBucketBalance:o,tradePrice:g}),Ne=k.useMemo(()=>se(),[se,C,E,A]),ke=k.useMemo(()=>ae(),[ae,U,I]),Ee=k.useMemo(()=>q(),[q,M,P,U,Ne,I]),Ue=k.useMemo(()=>Z(),[Z,I,Ee]),st=k.useMemo(()=>De(Ee),[Ee]),N=k.useMemo(()=>De(Ue),[Ue]),de=k.useMemo(()=>({minimumFractionDigits:li,maximumFractionDigits:Q9}),[]),be=k.useMemo(()=>A.toFixed(li),[A]);k.useMemo(()=>a?`Available in ${a}`:"Available to Trade",[a]);const re=k.useMemo(()=>{const je=S.reduce((Ae,We)=>Ae+We.totalEquity,0);return w+je},[S,w]),_e=k.useMemo(()=>re.toLocaleString("en-US",de),[re,de]),ee=k.useMemo(()=>w.toLocaleString("en-US",de),[w,de]),W=k.useMemo(()=>v?v.nominalValue.toLocaleString("en-US",de):"--",[v,de]),Q=k.useMemo(()=>v?v.nominalValue.toLocaleString("en-US",de):"--",[v,de]),H=k.useMemo(()=>v?v.unrealizedPnL.toLocaleString("en-US",de):"--",[v,de]),J=k.useMemo(()=>v?(v.crossMarginRatio*100).toFixed(li)+"%":"--",[v]),we=k.useMemo(()=>v?v.maintenanceMargin.toLocaleString("en-US",de):"--",[v,de]),te=k.useMemo(()=>v?`${v.leverage.toFixed(li)}x`:"--",[v]),ge=k.useCallback(()=>{R(j===$d?J9:$d)},[j,R]),Pe=k.useCallback(()=>{_(cy)},[_]),he=k.useCallback(()=>{_(tb)},[_]),le=k.useCallback(()=>{$(Math.min(Zg,P+eb))},[P,$]),ye=k.useCallback(()=>{$(Math.max(hf,P-eb))},[P,$]),me=k.useCallback(je=>{const Ae=parseInt(je.target.value);$(Ae)},[$]),ve=k.useCallback(je=>{z(je.target.value)},[z]),Ie=k.useCallback(je=>{const Ae=parseFloat(je.target.value);D(isNaN(Ae)?0:Ae)},[D]),He=k.useCallback(()=>{const je=Oe.loading("Submit transaction...",{description:"Placing buy order"});y.current=typeof je=="number"?je:0,X()},[X]),Fe=k.useCallback(()=>{const je=Oe.loading("Submit transaction...",{description:"Placing sell order"});y.current=typeof je=="number"?je:0,ne()},[ne]);return k.useImperativeHandle(d,()=>({leverage:I,setLeverage:T,calculateMaxRatio:je=>{const Ae=G();se();const We=Ae;return U>0&&We>0?(We/U).toFixed(li):je.toFixed(li)}}),[I,T,G,se,U]),k.useEffect(()=>{if(F)if(y.current!==0&&(Oe.dismiss(y.current),y.current=0),F.success){const je=F.orderId?`Order ID: ${F.orderId}`:F.message||"Order placed successfully";Oe.success("Order Placed Successfully",{description:je})}else F.error&&Oe.error("Order Failed",{description:F.error,action:Ln(F.error||"")})},[F]),h.jsxs("div",{className:"component",children:[h.jsx("h2",{children:b}),h.jsxs("div",{className:"trade-op-config",children:[h.jsx("div",{className:"trade-op-badge",children:h.jsx("span",{className:"trade-op-badge-label",children:O})}),h.jsxs("div",{className:"trade-op-badge",onClick:ge,style:{cursor:"pointer"},children:[h.jsx("span",{className:"trade-op-badge-label",children:j}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),h.jsxs("div",{className:"trade-op-badge",onClick:l,style:{cursor:"pointer"},children:[h.jsxs("span",{className:"trade-op-badge-label",children:[I,"x"]}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]})]}),h.jsxs("div",{className:"trade-op-order-type-selector",children:[h.jsx("button",{onClick:Pe,className:`btn-toggle ${C===cy?"active":""}`,children:"MARKET"}),h.jsx("button",{onClick:he,className:`btn-toggle ${C===tb?"active":""}`,children:"LIMIT"})]}),C===tb&&h.jsx("div",{className:"trade-op-form-group",children:h.jsxs("div",{className:"trade-op-form-row",children:[h.jsx("label",{htmlFor:"price",className:"trade-op-label",children:"Price:"}),h.jsx("input",{id:"price",type:"number",value:E,onChange:ve,placeholder:be,step:Y9,min:o2})]})}),h.jsxs("div",{className:"trade-op-form-group",children:[h.jsxs("div",{className:"trade-op-form-row",style:{marginBottom:"0.5rem"},children:[h.jsx("label",{htmlFor:"size",className:"trade-op-label",children:"Size:"}),h.jsxs("div",{className:"trade-op-size-controls",children:[h.jsx("input",{id:"size",type:"number",step:"any",value:M===0?"":M,onChange:Ie,placeholder:"0",min:o2,max:ke,className:"trade-op-input"}),h.jsxs("div",{className:"trade-op-size-buttons",children:[h.jsx("button",{onClick:le,className:"btn-small",children:""}),h.jsx("button",{onClick:ye,className:"btn-small",children:""})]})]})]}),h.jsx("input",{type:"range",min:hf,max:Zg,value:P,onChange:me,step:eb,style:{width:"100%","--slider-progress":`${(P-hf)/(Zg-hf)*100}%`},className:"filled-slider"}),h.jsxs("div",{className:"trade-op-slider-labels",children:[h.jsx("span",{children:"0"}),h.jsx("span",{children:"20"}),h.jsx("span",{children:"40"}),h.jsx("span",{children:"60"}),h.jsx("span",{children:"80"}),h.jsx("span",{children:"100"})]})]}),h.jsxs("div",{className:"trade-op-action-panel",children:[h.jsxs("div",{children:[h.jsx("div",{className:"trade-op-panel-title buy",children:"LONG"}),h.jsxs("div",{className:"trade-op-panel-size",children:[M.toFixed(3),"/100.000"]}),h.jsx("button",{onClick:He,disabled:B||!L||Ee<=0,className:"btn-buy",children:B?"PLACING...":"BUY LONG"}),h.jsxs("div",{className:"trade-op-panel-details",children:[h.jsxs("div",{children:["Value ",st.toFixed(2)]}),h.jsxs("div",{children:["Margin ",N.toFixed(2)]})]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"trade-op-panel-title sell",children:"SHORT"}),h.jsxs("div",{className:"trade-op-panel-size",children:[M.toFixed(3),"/100.000"]}),h.jsx("button",{onClick:Fe,disabled:B||!L||Ee<=0,className:"btn-sell",children:B?"PLACING...":"SELL SHORT"}),h.jsxs("div",{className:"trade-op-panel-details",children:[h.jsxs("div",{children:["Value ",st.toFixed(li)]}),h.jsxs("div",{children:["Margin ",N.toFixed(li)]})]})]})]}),h.jsxs("div",{className:"trade-op-info-panel",children:[h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Account Equity:"}),h.jsxs("span",{className:"trade-op-info-value",children:[_e," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Spot:"}),h.jsxs("span",{className:"trade-op-info-value",children:[ee," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsxs("span",{className:"trade-op-info-label",children:[a||"Bucket",":"]}),h.jsxs("span",{className:"trade-op-info-value",children:[W," USDC"]})]}),h.jsx("div",{className:"trade-op-info-row",children:h.jsxs("span",{className:"trade-op-info-label",children:["Bucket Overview: ",a||"--"]})}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Balance:"}),h.jsxs("span",{className:"trade-op-info-value",children:[Q," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Unrealized PNL:"}),h.jsxs("span",{className:"trade-op-info-value",children:[H," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Cross Margin Ratio:"}),h.jsx("span",{className:"trade-op-info-value",children:J})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Maintenance Margin:"}),h.jsxs("span",{className:"trade-op-info-value",children:[we," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Cross Account Leverage:"}),h.jsx("span",{className:"trade-op-info-value",children:te})]})]})]})});function VI(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(null),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(null),f=k.useRef(!1),p=k.useRef(!1),m=k.useRef(t.walletAddress),b=k.useRef(t);b.current=t;const x=k.useCallback(w=>{const v=w.side==="ORDER_SIDE_BUY"?"BUY":"SELL",C=w.status||"PENDING";let _=C;C.includes("ORDER_STATUS_")&&(_=C.replace("ORDER_STATUS_",""));const P=w.time_in_force;let M=P;P&&P.includes("TIME_IN_FORCE_")&&(M=P.replace("TIME_IN_FORCE_",""));const E=L=>{if(L==null||L==="")return 0;if(typeof L=="number")return L;const B=parseFloat(String(L));return isNaN(B)?0:B},I=E(w.quantity),O=E(w.price),j=E(w.filled_quantity),U=I-j,A=L=>{if(L==null||L==="")return;if(typeof L=="number")return L;const B=parseFloat(String(L));return isNaN(B)?void 0:B};return{id:w.order_id,orderId:w.order_id,marketId:w.market_id||w.bucket_id,symbol:`Market-${w.market_id||w.bucket_id||"N/A"}`,side:v,type:w.type,quantity:I,price:O,filledQuantity:j,remainingQuantity:U,status:_,timeInForce:M,createdAt:A(w.timestamp),updatedAt:void 0}},[]),g=k.useCallback(async()=>{if(!u.current)return;const w=b.current;if(!w.walletAddress||w.walletAddress.trim()===""){a(null),s([]),i(!1);return}a(null);try{const C=(await ym(Rv.http,()=>u.current.getOrders(w.walletAddress))).orders||[];if(C.length>0){const _=C.map(x);s(P=>{if(P.length!==_.length)return _;const M=JSON.stringify(P),E=JSON.stringify(_);return M===E?P:_})}else s(_=>_.length===0?_:[])}catch(v){const C=v instanceof Error?v.message:"Failed to load orders";a(C),console.error("Failed to fetch orders after retries:",v)}finally{i(!1)}},[x]),y=k.useCallback(w=>w.orderId,[]),S=k.useCallback(w=>{if(!w||typeof w!="object"||!("order_id"in w)||typeof w.order_id!="string"||w.order_id.length===0){console.warn("Received invalid order data, skipping:",w);return}const v=x(w),C=y(v);if(!C){console.warn("Received order without ID, skipping:",v);return}s(_=>{const P=new Map;_.forEach(U=>{const A=y(U);A&&P.set(A,U)});const M=v.status.toUpperCase();M==="FILLED"||M==="CANCELLED"||M==="REJECTED"||M==="EXPIRED"||M==="CLOSED"||M==="DONE"?P.delete(C):P.set(C,v);const I=Array.from(P.values()).filter(U=>y(U)!==void 0);if(_.length!==I.length)return I;const O=JSON.stringify(_),j=JSON.stringify(I);return O===j?_:I})},[x,y]);return k.useEffect(()=>{if(t.walletAddress!==m.current&&(p.current=!1,m.current=t.walletAddress),!t.walletAddress||t.walletAddress.trim()===""){i(!1),a(null),s([]),d.current&&(d.current.disconnect(),d.current=null),p.current=!1;return}const w=new an({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=w,p.current||g().finally(()=>{p.current=!0}),e&&t.wsURL){const v=new lo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=v;const C=()=>{v.isConnected()&&!f.current&&(v.subscribeOrders(S),f.current=!0)};v.connect().then(()=>{c(!0),C()}).catch(M=>{console.error("Failed to connect WebSocket:",M),c(!1)});let _=null;const P=v.wsClient;return P&&(_=P.onStateChange(M=>{M===dt.Connected?(c(!0),f.current&&C()):(M===dt.Disconnected||M===dt.Reconnecting)&&(c(!1),f.current=!1)})),()=>{_&&_(),d.current&&(d.current.unsubscribeOrders(S),d.current.disconnect())}}else return()=>{}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{orders:n,loading:r,error:o,isConnected:l,refresh:g}}function xW({baseURL:t=la,wsURL:e,authToken:n,walletAddress:s,mnemonic:r,height:i=U9,refreshInterval:o=Lv}){const{orders:a,loading:l,error:c,isConnected:u,refresh:d}=VI({baseURL:t,wsURL:e,authToken:n,walletAddress:s,refreshInterval:o}),f=k.useRef(null),p=k.useRef(0),[m,b]=k.useState(null),{getSymbolByMarketId:x}=co({baseURL:t,sessionToken:n,autoFetchMarkets:!1}),[g,y]=k.useState(ci),[S,w]=k.useState(null),[v,C]=k.useState(ll),_=k.useMemo(()=>a.filter(B=>{const F=B.status.toUpperCase(),$=F.startsWith("ORDER_STATUS_")?F:`ORDER_STATUS_${F}`;return g===ci?S2.some(D=>F===D.toUpperCase()||$===D.toUpperCase()):!S2.some(D=>F===D.toUpperCase()||$===D.toUpperCase())}),[a,g]),P=k.useMemo(()=>S?[..._].sort((B,F)=>{let $=0,D=0;switch(S){case m2:$=B.symbol,D=F.symbol;break;case g2:$=B.side,D=F.side;break;case b2:$=B.quantity,D=F.quantity;break;case x2:$=B.price,D=F.price;break;case y2:$=B.filledQuantity||0,D=F.filledQuantity||0;break;case w2:$=B.status,D=F.status;break}if(typeof $=="string"&&typeof D=="string")return v===Ri?$.localeCompare(D):D.localeCompare($);const z=Number($),R=Number(D);return isNaN(z)||isNaN(R)?0:v===Ri?z-R:R-z}):_,[_,S,v]),M=B=>{S===B?C(v===Ri?ll:Ri):(w(B),C(ll))},E=B=>B.side,I=PL,O=TL,j=B=>{const F=(B||"").toUpperCase(),$={ORDER_STATUS_PENDING:{short:"P",full:"Pending",color:rb},PENDING:{short:"P",full:"Pending",color:rb},ORDER_STATUS_OPEN:{short:"O",full:"Open",color:ib},OPEN:{short:"O",full:"Open",color:ib},NEW:{short:"N",full:"New",color:ib},ORDER_STATUS_FILLED:{short:"F",full:"Filled",color:k2},FILLED:{short:"F",full:"Filled",color:k2},ORDER_STATUS_CANCELED:{short:"C",full:"Canceled",color:ob},CANCELED:{short:"C",full:"Canceled",color:ob},CANCELLED:{short:"C",full:"Canceled",color:ob},ORDER_STATUS_REJECTED:{short:"R",full:"Rejected",color:C2},REJECTED:{short:"R",full:"Rejected",color:C2},PARTIALLY_FILLED:{short:"PF",full:"Partially Filled",color:rb}};if($[F])return $[F];const D=F.startsWith("ORDER_STATUS_")?F:`ORDER_STATUS_${F}`;return $[D]?$[D]:{short:"?",full:B||SL,color:uL}},U=B=>B===Bd||B==="BUY"?dL:hL,A=B=>!B||typeof B!="string"?vL:B.replace("ORDER_TYPE_",""),L=async B=>{var z;const F=B.orderId,$=B.marketId;if(!F){const R="Cannot cancel order without a valid order ID.";Oe.error("Order ID is missing",{description:R,action:Ln(R)});return}if(!$){const R="Cannot cancel order without a valid market ID.";Oe.error("Market ID is missing",{description:R,action:Ln(R)});return}if(!r){const R=`Please provide the 'mnemonic' prop to the PendingOrders component. Order ID: ${F}`;Oe.error("Mnemonic required",{description:R,duration:5e3,action:Ln(R)});return}if(typeof r!="string"||r.trim()===""){const R=`The mnemonic prop is empty or invalid. Please provide a valid mnemonic. Order ID: ${F}`;Oe.error("Invalid mnemonic",{description:R,duration:5e3,action:Ln(R)});return}if(m){Oe.info("Cancellation in progress",{description:"Please wait for the current cancellation to complete."});return}b(F);const D=Oe.loading("Canceling order...",{description:`Canceling order ${F}`});p.current=typeof D=="number"?D:0;try{f.current||(f.current=new ao({baseURL:t,mnemonic:r.trim()}),await f.current.initialize());const R=await f.current.cancelOrder({orderId:F,marketId:$}),T=(R==null?void 0:R.success)===!0||(R==null?void 0:R.result)==="success"||R&&!R.error&&!R.message;if(p.current!==0&&(Oe.dismiss(p.current),p.current=0),T)Oe.success("Order canceled successfully",{description:`Order ${F} has been canceled.`}),d&&await d();else{const X=(R==null?void 0:R.error)||(R==null?void 0:R.message)||((z=R==null?void 0:R.response)==null?void 0:z.error)||"Failed to cancel order";throw new Error(X)}}catch(R){p.current!==0&&(Oe.dismiss(p.current),p.current=0);const X=`${R instanceof Error?R.message:"Unknown error occurred"}. Order ID: ${F}`;Oe.error("Failed to cancel order",{description:X,duration:6e3,action:Ln(X)})}finally{b(null)}};return!s||s.trim()===""?h.jsx($I,{message:xL}):l?h.jsx(Tc,{message:fL}):c?h.jsx(Mc,{error:c}):h.jsxs("div",{className:"layout-container",style:{height:i},children:[h.jsxs(Ic,{title:g===ci?gL:bL,children:[h.jsxs("div",{className:"btn-tab",children:[h.jsx("span",{style:{fontSize:"0.7rem"},children:""}),h.jsx("span",{children:"Current Symbol"})]}),h.jsxs("div",{onClick:()=>y(g===ci?v2:ci),className:`btn-tab ${g===v2?"active":""}`,children:[h.jsx("img",{src:"/transfer-net.svg"}),h.jsx("span",{children:g===ci?wL:yL})]}),!u&&h.jsxs("div",{onClick:async()=>{d&&await d()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh orders",children:[h.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),h.jsx("span",{children:"Refresh"})]})]}),h.jsxs("div",{className:"table-container shrinkable",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:_2},children:[h.jsx(Xt,{field:m2,currentSortField:S,sortDirection:v,onSort:M,children:"Symbol"}),h.jsx(Xt,{field:g2,currentSortField:S,sortDirection:v,onSort:M,children:"Side"}),h.jsx(Sy,{center:!0,children:"Type"}),h.jsx(Xt,{field:b2,currentSortField:S,sortDirection:v,onSort:M,children:"Quantity"}),h.jsx(Xt,{field:x2,currentSortField:S,sortDirection:v,onSort:M,children:"Price"}),h.jsx(Xt,{field:y2,currentSortField:S,sortDirection:v,onSort:M,children:"Filled"}),h.jsx(Xt,{field:w2,currentSortField:S,sortDirection:v,onSort:M,children:"Status"}),h.jsx(Sy,{center:!0,children:"Actions"})]}),P.length===0?h.jsx(Gr,{message:g===ci?pL:mL}):P.map((B,F)=>{const $=E(B),D=U($),{short:z,full:R,color:T}=j(B.status),X=x(B.marketId)||B.symbol||`m-${B.marketId}`;return h.jsxs("div",{className:`table-row ${F%2===0?"even":""}`,style:{gridTemplateColumns:_2},children:[h.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:h.jsx("span",{children:X})}),h.jsx("div",{className:"table-cell center",style:{color:D,fontWeight:500},children:$}),h.jsx("div",{className:"table-cell center",children:A(B.type)}),h.jsx("div",{className:"table-cell right monospace",children:O(B.quantity)}),h.jsx("div",{className:"table-cell right monospace",children:I(B.price)}),h.jsxs("div",{className:"table-cell right monospace",children:[O(B.filledQuantity)," /"," ",O(B.quantity)]}),h.jsx("div",{className:"table-cell center",style:{color:T,fontWeight:600,cursor:"help",fontSize:"0.9rem"},title:R,children:z}),h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:g===ci?h.jsxs(h.Fragment,{children:[(!r||r.trim()==="")&&h.jsx("span",{style:{fontSize:"0.7rem",color:"#ffc107",cursor:"help"},title:"Mnemonic required to cancel orders",children:""}),h.jsx(rW,{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),!r||r.trim()===""||m===B.orderId||!!m||L(B)},disabled:!r||r.trim()===""||m===B.orderId||!!m})]}):h.jsx("span",{className:"color-text-dim",children:""})})]},`order-${B.orderId}`)})]})]})}const yW=fe.memo(xW);function wW({baseURL:t=la,authToken:e,walletAddress:n,mnemonic:s,height:r=z9,refreshInterval:i=Lv,selectedBucketId:o=null}){const{positions:a,loading:l,error:c,isConnected:u,refresh:d}=I5({baseURL:t,authToken:e,walletAddress:n,refreshInterval:i}),f=k.useRef(null);k.useEffect(()=>{if(!s||!t){f.current=null;return}const _=new ao({baseURL:t,mnemonic:s});_.initialize().then(()=>{f.current=_}).catch(P=>{const M=P instanceof Error?P.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",P),Oe.error("Exchange client initialization failed",{description:M,action:Ln(M)}),f.current=null})},[s,t]);const[p,m]=k.useState(nb),[b,x]=k.useState(null),[g,y]=k.useState(ll),S=k.useMemo(()=>{let _=[...a];return p===ff&&o&&(_=_.filter(P=>{var I;const M=(I=P.bucketId)==null?void 0:I.toString(),E=o.toString();return M===E})),b?_.sort((P,M)=>{let E=0,I=0;switch(b){case a2:E=P.symbol||"",I=M.symbol||"";break;case l2:try{E=P.leverage?fromSatoshi(P.leverage):0,I=M.leverage?fromSatoshi(M.leverage):0}catch{E=0,I=0}break;case c2:E=P.size||0,I=M.size||0;break;case u2:E=P.liquidationPrice||0,I=M.liquidationPrice||0;break;case d2:E=P.unrealizedPnL||0,I=M.unrealizedPnL||0;break;case h2:E=P.entryPrice||0,I=M.entryPrice||0;break;case f2:E=P.margin||0,I=M.margin||0;break}if(typeof E=="string"&&typeof I=="string")return g===Ri?E.localeCompare(I):I.localeCompare(E);const O=Number(E),j=Number(I);return g===Ri?O-j:j-O}):_},[a,b,g,o,p]),w=_=>{b===_?y(g===Ri?ll:Ri):(x(_),y(ll))},v=k.useRef(0),C=async _=>{if(!s){const M="Please provide the 'mnemonic' prop to enable position closing.";Oe.error("Mnemonic required",{description:M,action:Ln(M)});return}if(!f.current){const M="Please wait for the exchange client to initialize.";Oe.error("Exchange client not ready",{description:M,action:Ln(M)});return}const P=Oe.loading("Closing position...",{description:`Closing ${_.side} position for ${_.symbol} (Size: ${c0(_.size)})`});v.current=typeof P=="number"?P:0;try{const M=await f.current.closePosition({marketId:_.marketId,marketPrice:_.markPrice,quantity:_.size});v.current!==0&&(Oe.dismiss(v.current),v.current=0),Oe.success("Position closed successfully",{description:`${_.side} position for ${_.symbol} has been closed. tx: ${M.txId}`,duration:5e3}),d&&await d()}catch(M){v.current!==0&&(Oe.dismiss(v.current),v.current=0);const E=M instanceof Error?M.message:"Unknown error occurred";Oe.error("Failed to close position",{description:E,duration:6e3,action:Ln(E)}),console.error("Failed to close position:",M)}};return l?h.jsx(Tc,{message:nL}):c?h.jsx(Mc,{error:c}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[h.jsxs(Ic,{title:`${rL} ${p===ff&&o?`(Bucket ${o})`:""}`,children:[h.jsx("div",{onClick:()=>{m(nb),x(null)},className:`btn-tab ${p===nb?"active":""}`,children:iL}),h.jsxs("div",{onClick:()=>{m(ff),x(null)},className:`btn-tab ${p===ff?"active":""}`,children:[h.jsx("img",{src:"/bucket-g.svg"}),h.jsx("span",{children:oL})]}),!u&&h.jsxs("div",{onClick:async()=>{d&&await d()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh positions",children:[h.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),h.jsx("span",{children:"Refresh"})]})]}),h.jsxs("div",{className:"table-container",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:p2},children:[h.jsx(Xt,{field:a2,currentSortField:b,sortDirection:g,onSort:w,left:!0,children:"Symbol"}),h.jsx(Xt,{field:l2,currentSortField:b,sortDirection:g,onSort:w,children:"Leverage"}),h.jsx(Xt,{field:c2,currentSortField:b,sortDirection:g,onSort:w,children:"Size"}),h.jsx(Xt,{field:u2,currentSortField:b,sortDirection:g,onSort:w,children:"Liq. Price"}),h.jsx(Xt,{field:d2,currentSortField:b,sortDirection:g,onSort:w,children:"P/L"}),h.jsx(Xt,{field:h2,currentSortField:b,sortDirection:g,onSort:w,children:"Entry Price"}),h.jsx(Xt,{field:f2,currentSortField:b,sortDirection:g,onSort:w,children:"Margin"}),h.jsx(Sy,{center:!0,children:"Actions"})]}),S.length===0?h.jsx(Gr,{message:sL}):S.map((_,P)=>{const M=_.side===Bd,E=(_.unrealizedPnL||0)>=0?eL:tL,I=ML(_.leverage,sb);return h.jsxs("div",{className:`table-row ${P%2===0?"even":""}`,style:{gridTemplateColumns:p2},children:[h.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:h.jsx("span",{children:_.symbol})}),h.jsxs("div",{className:"color-buy",style:{fontWeight:500},children:[M?Bd:uy," ",I===sb?sb:`${I}x`," ","@ ",_.marginMode||$d]}),h.jsx("div",{className:"color-buy right monospace",children:c0(_.size)}),h.jsx("div",{className:"table-cell right monospace",children:l0(_.liquidationPrice)}),h.jsx("div",{className:"table-cell right monospace",style:{color:E,fontWeight:500},children:EL(_.unrealizedPnL)}),h.jsx("div",{className:"table-cell right monospace",children:l0(_.entryPrice)}),h.jsx("div",{className:"table-cell right monospace",children:_L(_.margin)}),h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsx(iW,{onClick:()=>C(_)})})]},`position-${_.marketId}-${P}`)})]})]})}const vW=fe.memo(wW);function SW({isOpen:t,currentLeverage:e,tempLeverage:n,maxRatio:s,onLeverageChange:r,onConfirm:i,onCancel:o}){if(!t)return null;const a=h.jsx("div",{className:"modal-overlay",onClick:o,children:h.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Select Leverage"})}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{className:"leverage-max-ratio",children:[h.jsx("div",{className:"leverage-max-ratio-label",children:"Maximum Ratio"}),h.jsxs("div",{className:"leverage-max-ratio-value",children:[s,"x"]})]}),h.jsxs("div",{className:"leverage-slider-container",children:[h.jsx("input",{type:"range",min:Jg,max:i2,value:n,onChange:l=>r(parseInt(l.target.value)),className:"filled-slider",style:{"--slider-progress":`${(n-Jg)/(i2-Jg)*100}%`}}),h.jsxs("div",{className:"leverage-slider-labels",children:[h.jsx("span",{children:"1x"}),h.jsxs("span",{className:"leverage-current-value",children:[n,"x"]}),h.jsx("span",{children:"100x"})]})]})]}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),h.jsx("button",{onClick:i,className:"btn btn-primary",children:"Confirm"})]})]})});return typeof document<"u"?io.createPortal(a,document.body):null}function kW({isOpen:t,fromValue:e,toValue:n,options:s,bucketsData:r,transferAmount:i,createBucketAmount:o,onFromChange:a,onToChange:l,onTransferAmountChange:c,onCreateBucketAmountChange:u,onConfirm:d,onCancel:f,spotWalletBalance:p=0,activeTab:m,onActiveTabChange:b,isTransferring:x=!1,onOpen:g}){const[y,S]=k.useState("transfer"),w=m??y,v=b??S,C=k.useRef(!1),[_,P]=k.useState(!1),[M,E]=k.useState("transfer"),[I,O]=k.useState(!1);k.useEffect(()=>{t&&!C.current&&g&&g(),C.current=t,t||O(!1)},[t,g,w]);const j=k.useMemo(()=>e==="spot-wallet"?null:r.find(R=>R.bucketId===e),[r,e]),U=k.useMemo(()=>e==="spot-wallet"?p:(j==null?void 0:j.nominalValue)||0,[e,p,j]),A=10,L=Math.max(A,U);if(fe.useEffect(()=>{if(e&&L>0){const R=w==="transfer"?i:o;R>L?w==="transfer"?c(L):u(L):R<A&&L>=A&&(w==="transfer"?c(A):u(A))}},[e,L,w,i,o,c,u]),!t)return null;const B=e&&n&&i>=A&&i<=L,F=e&&o>=A&&o<=L,$=h.jsx("div",{className:"modal-overlay",onClick:f,children:h.jsxs("div",{className:"modal-content transfer-modal-content",onClick:R=>R.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Transfer Funds"})}),h.jsxs("div",{className:"transfer-modal-tabs",children:[h.jsx("button",{className:`transfer-tab ${w==="transfer"?"active":""}`,onClick:()=>v("transfer"),type:"button",disabled:x,children:"Transfer"}),h.jsx("button",{className:`transfer-tab ${w==="create"?"active":""}`,onClick:()=>v("create"),type:"button",disabled:x,children:"Create Bucket"})]}),h.jsx("div",{className:"modal-body",children:w==="transfer"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"From"}),h.jsxs("select",{value:e,onChange:R=>a(R.target.value),className:"transfer-select",children:[h.jsx("option",{value:"",children:"Select source bucket"}),s.map(R=>h.jsx("option",{value:R.value,children:R.label},R.value))]})]}),h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"To"}),h.jsxs("select",{value:n,onChange:R=>l(R.target.value),className:"transfer-select",disabled:!e,children:[h.jsx("option",{value:"",children:"Select destination bucket"}),s.filter(R=>R.value!==e).map(R=>h.jsx("option",{value:R.value,children:R.label},R.value))]})]}),e&&L>=A?h.jsxs("div",{className:"transfer-field-group",children:[h.jsxs("div",{className:"transfer-amount-header",children:[h.jsx("label",{className:"transfer-field-label",children:"Amount"}),h.jsxs("div",{className:"transfer-available-balance",children:["Available: ",Dt(U)]})]}),h.jsx("div",{className:"transfer-amount-display",onClick:()=>{E("transfer"),P(!0)},style:{cursor:"pointer"},children:h.jsx("span",{className:"transfer-amount-value",children:Dt(i)})}),h.jsxs("div",{className:"transfer-amount-container",children:[h.jsx("input",{type:"range",min:A,max:L,step:.01,value:i,onChange:R=>c(parseFloat(R.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(i-A)/(L-A)*100}%`}}),h.jsxs("div",{className:"transfer-amount-labels",children:[h.jsx("span",{children:Dt(A)}),h.jsx("span",{children:Dt(L)})]})]})]}):e?h.jsx("div",{className:"transfer-field-group",children:h.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",Dt(A)]})}):null]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"From"}),h.jsxs("select",{value:e,onChange:R=>a(R.target.value),className:"transfer-select",children:[h.jsx("option",{value:"",children:"Select source bucket"}),s.map(R=>h.jsx("option",{value:R.value,children:R.label},R.value))]})]}),e&&L>=A?h.jsxs("div",{className:"transfer-field-group",children:[h.jsxs("div",{className:"transfer-amount-header",children:[h.jsx("label",{className:"transfer-field-label",children:"Amount"}),h.jsxs("div",{className:"transfer-available-balance",children:["Available: ",Dt(U)]})]}),h.jsx("div",{className:"transfer-amount-display",onClick:()=>{E("create"),P(!0)},style:{cursor:"pointer"},children:h.jsx("span",{className:"transfer-amount-value",children:Dt(o)})}),h.jsxs("div",{className:"transfer-amount-container",children:[h.jsx("input",{type:"range",min:A,max:L,step:.01,value:o,onChange:R=>u(parseFloat(R.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(o-A)/(L-A)*100}%`}}),h.jsxs("div",{className:"transfer-amount-labels",children:[h.jsx("span",{children:Dt(A)}),h.jsx("span",{children:Dt(L)})]})]})]}):e?h.jsx("div",{className:"transfer-field-group",children:h.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",Dt(A)]})}):null]})}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:f,className:"btn btn-secondary",disabled:x,children:"Cancel"}),h.jsxs("div",{style:{flex:1,position:"relative",minHeight:"48px"},children:[h.jsx("div",{className:"slider-confirm-container",style:{position:"absolute",top:0,left:0,right:0,opacity:I?0:1,visibility:I?"hidden":"visible",transition:"opacity 0.3s ease, visibility 0.3s ease",pointerEvents:I?"none":"auto"},children:h.jsx(oW,{onConfirm:()=>{O(!0)},label:"Slide to confirm",disabled:x||(w==="transfer"?!B:!F),icon:h.jsx("img",{src:"/bconfirm.svg"})})}),h.jsx("button",{onClick:d,className:"btn btn-primary",disabled:x||(w==="transfer"?!B:!F),style:{position:"absolute",top:0,right:0,opacity:I?1:0,visibility:I?"visible":"hidden",transition:"opacity 0.3s ease, visibility 0.3s ease",pointerEvents:I?"auto":"none",width:"100%",height:"100%",color:"black"},children:x?"Processing...":"Confirm"})]})]})]})}),D=M==="transfer"?i:o,z=R=>{M==="transfer"?c(R):u(R),P(!1)};return h.jsxs(h.Fragment,{children:[typeof document<"u"?io.createPortal($,document.body):null,h.jsx(aW,{isOpen:_,value:D,min:A,max:L,onConfirm:z,onCancel:()=>P(!1)})]})}function CW({baseURL:t=la,wsURL:e=la,authToken:n,walletAddress:s,mnemonic:r,height:i=B9,refreshInterval:o=Lv,onBucketSelect:a}){const{collections:l,loading:c,error:u,spotWalletBalance:d,isConnected:f,refresh:p}=HI({baseURL:t,wsURL:e,authToken:n,walletAddress:s,refreshInterval:o}),[m,b]=k.useState(null),[x,g]=k.useState("desc"),[y,S]=k.useState(""),[w,v]=k.useState(!1),[C,_]=k.useState(""),[P,M]=k.useState(""),[E,I]=k.useState(10),[O,j]=k.useState(10),[U,A]=k.useState("transfer"),[L,B]=k.useState(!1),F=k.useRef(null),$=k.useRef(0),D=k.useMemo(()=>{const G=l.filter(se=>se&&se.bucketId&&typeof se.bucketId=="string"&&se.bucketId.trim()!=="");return m?[...G].sort((se,ae)=>{let Ne=0,ke=0;switch(m){case"marginType":Ne=se.marginType||"",ke=ae.marginType||"";break;case"maintenanceMargin":Ne=se.maintenanceMargin||0,ke=ae.maintenanceMargin||0;break;case"nominalValue":Ne=se.nominalValue||0,ke=ae.nominalValue||0;break;case"riskRatio":Ne=se.riskRatio||0,ke=ae.riskRatio||0;break;case"bucketId":Ne=se.bucketId||"",ke=ae.bucketId||"";break}if(typeof Ne=="string"&&typeof ke=="string")return x==="asc"?Ne.localeCompare(ke):ke.localeCompare(Ne);const Ee=Number(Ne),Ue=Number(ke);return x==="asc"?Ee-Ue:Ue-Ee}):G},[l,m,x]),z=G=>{m===G?g(x==="asc"?"desc":"asc"):(b(G),g("desc"))},R=(G,se)=>{a&&a(G,se),S(G)},T=()=>{v(!0),_(""),M(""),I(10),j(10),A("transfer")},X=()=>{v(!1),_(""),M(""),I(10),j(10),A("transfer")};k.useEffect(()=>{if(!r||!t){F.current=null;return}const G=new ao({baseURL:t,mnemonic:r});G.initialize().then(()=>{F.current=G}).catch(se=>{const ae=se instanceof Error?se.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",se),Oe.error("Exchange client initialization failed",{description:ae,action:Ln(ae)}),F.current=null})},[r,t]);const ne=async()=>{if(!r){const ae="Mnemonic is required to perform transfers. Please provide a mnemonic to enable transfer functionality.";Oe.error("Mnemonic required",{description:ae,action:Ln(ae)});return}const G=F.current;if(!G){const ae="Exchange client is still initializing. Please wait a moment and try again.";Oe.error("Exchange client not ready",{description:ae,action:Ln(ae)});return}B(!0);const se=Oe.loading("Processing transfer...",{description:"Please wait while the transfer is being processed"});$.current=typeof se=="number"?se:0;try{const ae="USDC";let Ne,ke="";const Ee=ut(E);if(U==="transfer"){if(!C||!P)throw new Error("Please select both source and destination");if(C==="spot-wallet"&&P==="spot-wallet")throw new Error("Cannot transfer from spot wallet to spot wallet");C==="spot-wallet"?(Ne=await G.extractToBucket({bucketId:P,assetId:ae,amount:Ee}),ke=`Successfully transferred ${Dt(E)} from Spot Wallet to ${P}`):P==="spot-wallet"?(Ne=await G.withdrawFromBucket({bucketId:C,assetId:ae,amount:Ee}),ke=`Successfully transferred ${Dt(E)} from ${C} to Spot Wallet`):(Ne=await G.bucketTransfer({fromBucketId:C,toBucketId:P,assetId:ae,amount:Ee}),ke=`Successfully transferred ${Dt(E)} from ${C} to ${P}`)}else throw C?C==="spot-wallet"?new Error("Create Bucket from spot wallet requires a target bucket ID. Please use the Transfer tab to extract funds to an existing bucket, or create the bucket first."):new Error("Create Bucket requires a target bucket ID. Please use the Transfer tab to transfer between buckets."):new Error("Please select a source");console.log("Transfer successful:",Ne),$.current!==0&&(Oe.dismiss($.current),$.current=0),Oe.success("Transfer completed",{description:ke}),p(),v(!1),_(""),M(""),I(10),j(10)}catch(ae){$.current!==0&&(Oe.dismiss($.current),$.current=0);const Ne=ae instanceof Error?ae.message:"Transfer failed";Oe.error("Transfer failed",{description:Ne,action:Ln(Ne)}),console.error("Transfer error:",ae)}finally{B(!1)}},q=k.useMemo(()=>{const G=D.map(se=>({value:se.bucketId,label:`${se.bucketId} (${Dt(se.nominalValue)})`}));return[{value:"spot-wallet",label:`Spot Wallet (${Dt(d)})`},...G]},[D,d]),Z=k.useMemo(()=>D.map(G=>({bucketId:G.bucketId,nominalValue:G.nominalValue})),[D]);return!s||s.trim()===""?h.jsx($I,{message:"Wallet address required to view bucket collections"}):c?h.jsx(Tc,{message:"Loading bucket collections..."}):u?h.jsx(Mc,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:i},children:[h.jsxs(Ic,{title:"BUCKET COLLECTIONS",children:[h.jsxs("div",{onClick:T,className:"btn-tab",children:[h.jsx("img",{src:"/transfer-repu.svg"}),h.jsx("span",{children:"Transfer"})]}),!f&&h.jsxs("div",{onClick:async()=>{p&&await p()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh bucket collections",children:[h.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),h.jsx("span",{children:"Refresh"})]})]}),h.jsxs("div",{className:"table-container shrinkable",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[h.jsx(Xt,{field:"bucketId",currentSortField:m,sortDirection:x,onSort:z,left:!0,children:"Bucket ID"}),h.jsx(Xt,{field:"marginType",currentSortField:m,sortDirection:x,onSort:z,children:"Margin Type"}),h.jsx(Xt,{field:"maintenanceMargin",currentSortField:m,sortDirection:x,onSort:z,children:"Maintenance Margin"}),h.jsx(Xt,{field:"nominalValue",currentSortField:m,sortDirection:x,onSort:z,children:"Balance"}),h.jsx(Xt,{field:"riskRatio",currentSortField:m,sortDirection:x,onSort:z,left:!1,children:"Risk Ratio"})]}),D.length===0?h.jsx(Gr,{message:l.length===0?"No bucket collections found. Make sure your wallet address is correct and has buckets.":`Filtered out all ${l.length} collections (invalid data structure)`}):D.map((G,se)=>h.jsxs("div",{onClick:()=>R(G.bucketId,G.nominalValue),className:`table-row clickable ${se%2===0?"even":""} ${y===G.bucketId?"selected":""}`,style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[h.jsx("div",{className:"table-cell primary",children:G.bucketId||"---"}),h.jsx("div",{className:"table-cell",children:(G.marginType||"CROSS").toUpperCase()}),h.jsx("div",{className:"table-cell right monospace",children:Dt(G.maintenanceMargin||0)}),h.jsx("div",{className:"table-cell right monospace",children:Dt(G.nominalValue||0)}),h.jsx("div",{className:"table-cell right monospace",style:{color:(G.riskRatio||0)>.5?"#ff6b6b":"#51cf66",fontWeight:500},children:T5(G.riskRatio||0)})]},`collection-${G.bucketId}-${se}`))]}),h.jsx(kW,{isOpen:w,fromValue:C,toValue:P,options:q,bucketsData:Z,transferAmount:E,createBucketAmount:O,onFromChange:_,onToChange:M,onTransferAmountChange:I,onCreateBucketAmountChange:j,onConfirm:ne,onCancel:X,spotWalletBalance:d,activeTab:U,onActiveTabChange:A,isTransferring:L,onOpen:p})]})}const _W=fe.memo(CW);function EW({baseURL:t=la,selectedMarketId:e,authToken:n,height:s,onMarketSelect:r,favorites:i=[],onFavoriteToggle:o}){const{markets:a,tickers:l,selectedMarketId:c,setSelectedMarketId:u}=co({baseURL:t,autoFetchMarkets:!0}),[d,f]=k.useState(new Set(i)),[p,m]=k.useState("1H"),b=k.useRef(null),x=e||c||null,g=k.useMemo(()=>{const j=new Set(d);return i.forEach(U=>j.add(U)),j},[i,d]),y=k.useMemo(()=>a.map(j=>{var D,z;const U=((D=j.market_id)==null?void 0:D.toString())||((z=j.id)==null?void 0:z.toString())||"",A=l.get(U),L=j.moniker||j.symbol||(j.baseAsset&&j.quoteAsset?`${j.baseAsset}/${j.quoteAsset}`:"Unknown"),B=!j.active||!(A!=null&&A.lastPrice)||typeof A.lastPrice=="string"&&A.lastPrice==="0";let F=null;A!=null&&A.lastPrice&&(typeof A.lastPrice=="string"?F=parseFloat(A.lastPrice):F=A.lastPrice);let $=null;return A!=null&&A.priceChangePercent24h&&(typeof A.priceChangePercent24h=="string"?$=parseFloat(A.priceChangePercent24h):$=A.priceChangePercent24h),{marketId:U,symbol:L,price:F,priceChangePercent:$,isClosed:B,isFavorite:g.has(U)}}).filter(j=>j.marketId),[a,l,g]),S=k.useMemo(()=>x?a.find(j=>{var U,A;return((U=j.market_id)==null?void 0:U.toString())===x||((A=j.id)==null?void 0:A.toString())===x}):null,[a,x]),w=k.useMemo(()=>x?l.get(x):null,[l,x]),v=k.useMemo(()=>S?S.moniker||S.symbol||(S.baseAsset&&S.quoteAsset?`${S.baseAsset}/${S.quoteAsset}`:"Unknown"):"Select Market",[S]),C=k.useMemo(()=>{if(!S)return"";const j=S.baseAsset||"",U=S.quoteAsset||"";return j&&U?`${j} to ${U}`:S.moniker||S.symbol||""},[S]),_=k.useMemo(()=>w!=null&&w.lastPrice?typeof w.lastPrice=="string"?parseFloat(w.lastPrice):w.lastPrice:null,[w]),P=k.useMemo(()=>w!=null&&w.priceChangePercent24h?typeof w.priceChangePercent24h=="string"?parseFloat(w.priceChangePercent24h):w.priceChangePercent24h:null,[w]),M=j=>{r?r(j):u(j)},E=(j,U)=>{U.stopPropagation();const A=new Set(g);A.has(j)?A.delete(j):A.add(j),f(A),o&&o(j)},I=j=>{var L;const U=((L=j.split("/")[0])==null?void 0:L.toUpperCase())||"";return{BTC:"",ETH:"",EUR:"",USD:"$",USDC:"$",USDT:"$"}[U]||U.charAt(0)||"?"},O=j=>{if(j==null)return"0";const U=typeof j=="string"?parseFloat(j):j;return isNaN(U)?"0":U>=1e6?`${(U/1e6).toFixed(1)}M`:U>=1e3?`${(U/1e3).toFixed(1)}K`:U.toFixed(2)};return h.jsxs("div",{className:"ticker-bar-container",style:s?{height:s}:void 0,children:[h.jsx("div",{className:"ticker-bar-top",ref:b,children:h.jsx("div",{className:"ticker-bar-scroll",children:y.map((j,U)=>h.jsxs(fe.Fragment,{children:[h.jsxs("div",{className:`ticker-item ${j.marketId===x?"active":""}`,onClick:()=>M(j.marketId),children:[h.jsx("span",{className:"ticker-favorite-star",onClick:A=>E(j.marketId,A),style:{cursor:"pointer",opacity:j.isFavorite?1:.3},children:""}),h.jsx("span",{className:"ticker-asset-icon",children:I(j.symbol)}),h.jsx("span",{className:"ticker-symbol",children:j.symbol}),h.jsx("span",{className:"ticker-value",children:j.isClosed?h.jsx("span",{className:"ticker-closed",children:"CLOSED"}):j.price!==null?cl(j.price):"--"})]}),U<y.length-1&&h.jsx("div",{className:"ticker-separator"})]},j.marketId))})}),h.jsxs("div",{className:"ticker-bar-bottom",children:[h.jsxs("div",{className:"ticker-detail-left",children:[h.jsx("div",{className:"ticker-detail-icon-large",children:S?I(v):"?"}),h.jsxs("div",{className:"ticker-detail-symbol-group",children:[h.jsx("div",{className:"ticker-detail-symbol-row",children:h.jsx("span",{className:"ticker-detail-symbol",children:v})}),h.jsx("div",{className:"ticker-detail-description",children:C})]}),h.jsxs("div",{className:"ticker-detail-price-group",children:[h.jsx("div",{className:"ticker-detail-price",children:_!==null?cl(_):"--"}),P!==null&&h.jsxs("div",{className:`ticker-detail-change ${P>=0?"positive":"negative"}`,children:[P>=0?"+":"",T5(P/100)]})]})]}),h.jsxs("div",{className:"ticker-detail-metrics",children:[h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Oracle Price",children:"Oracle Price"}),h.jsx("span",{className:"ticker-metric-value",children:_!==null?cl(_):"--"})]}),h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Open Interest (Long)",children:"Open Interest (L)"}),h.jsx("span",{className:"ticker-metric-value",children:w!=null&&w.volume?`${O(w.volume)} / 20.0M USDC`:"--"})]}),h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Open Interest (Short)",children:"Open Interest (S)"}),h.jsx("span",{className:"ticker-metric-value",children:w!=null&&w.volume?`${O(w.volume)} / 20.0M USDC`:"--"})]}),h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Skew",children:"Skew"}),h.jsx("span",{className:"ticker-metric-value",children:"50%/50%"})]})]}),h.jsxs("div",{className:"ticker-detail-right",children:[h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Holding (Long)",children:"Holding (L)"}),h.jsx("span",{className:"ticker-metric-value positive",children:"0.0012%"})]}),h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Holding (Short)",children:"Holding (S)"}),h.jsx("span",{className:"ticker-metric-value negative",children:"0.0021%"})]})]}),h.jsx("div",{className:"ticker-timeframe-selector",children:h.jsxs("select",{className:"ticker-timeframe-select",value:p,onChange:j=>m(j.target.value),children:[h.jsx("option",{value:"1H",children:"1H"}),h.jsx("option",{value:"4H",children:"4H"}),h.jsx("option",{value:"1D",children:"1D"}),h.jsx("option",{value:"1W",children:"1W"}),h.jsx("option",{value:"1M",children:"1M"})]})})]})]})}const PW=fe.memo(EW);function TW(t){var _e;const[e,n]=k.useState("vertical"),[s,r]=k.useState(!0),[i,o]=k.useState(!1),[a,l]=k.useState("--"),[c,u]=k.useState(void 0),[d,f]=k.useState(!1),[p,m]=k.useState(10),[b,x]=k.useState("default"),g=k.useRef(null),y=k.useRef(null),S=k.useRef(!1),w=k.useRef(Ec),v=k.useRef(xh),C=k.useRef([]),_=w.current,P=v.current,M=k.useMemo(()=>Gu(b==="default"?Yu:VU),[b]),[E,I]=k.useState(()=>Gu(Yu));k.useEffect(()=>{I(M),C.current=M},[M]);const[O,j]=k.useState(()=>localStorage.getItem("authToken")||""),{markets:U,selectedMarketId:A,selectedMarketSymbol:L,setSelectedMarketId:B,loadingMarkets:F,getError:$}=co({baseURL:_,sessionToken:O,autoFetchMarkets:!0}),{mnemonic:D,walletAddress:z,authToken:R,setMnemonic:T}=Sa();k.useEffect(()=>{D||T("legal winner thank year wave sausage worth useful legal winner thank yellow")},[D,T]),k.useEffect(()=>{C.current=E},[E]),k.useEffect(()=>{R&&(j(R),localStorage.setItem("authToken",R))},[R]);const X=k.useRef(!1);k.useEffect(()=>{O&&O.trim()!==""&&!X.current&&localStorage.getItem("authToken")!==O&&localStorage.setItem("authToken",O),X.current=!1},[O]),k.useEffect(()=>{const ee=Q=>{Q.key==="authToken"&&Q.newValue&&(X.current=!0,j(Q.newValue))};window.addEventListener("storage",ee);const W=setInterval(()=>{const Q=localStorage.getItem("authToken");j(H=>Q&&Q!==H?(X.current=!0,Q):H)},5e3);return()=>{window.removeEventListener("storage",ee),clearInterval(W)}},[]);const ne=k.useMemo(()=>{var ee,W,Q,H;return U.length>0?((ee=U.find(J=>J.active))==null?void 0:ee.market_id)??U[0].market_id??((Q=(W=U.find(J=>J.active))==null?void 0:W.id)==null?void 0:Q.toString())??((H=U[0].id)==null?void 0:H.toString())??null:null},[U]),q=k.useCallback((ee,W)=>{if(s)return;const Q=C.current,H=ee;if(Q.length!==H.length){S.current=!0,C.current=H,I(H);return}let J=!1;for(let we=0;we<Q.length;we++){const te=Q[we],ge=H[we];if(te.x!==ge.x||te.y!==ge.y||te.w!==ge.w||te.h!==ge.h||te.i!==ge.i){J=!0;break}}J&&(S.current=!0,C.current=H,I(H))},[s]),Z=k.useCallback(()=>{n(ee=>ee==="horizontal"?"vertical":ee==="vertical"?null:"horizontal")},[]),G=k.useCallback(()=>{o(ee=>!ee)},[]);k.useEffect(()=>(i?document.body.classList.add("full-width-screen"):document.body.classList.remove("full-width-screen"),()=>{document.body.classList.remove("full-width-screen")}),[i]);const se=k.useCallback(()=>{r(ee=>!ee),s&&(S.current=!1)},[s]),ae=k.useCallback(()=>{g.current&&(S.current=!1,g.current.generateNewLayout())},[]),Ne=k.useCallback(async()=>{try{const W=`[
${E.slice().sort((Q,H)=>{const J=parseInt(Q.i,10),we=parseInt(H.i,10);return J-we}).map(Q=>`  [${Q.x}, ${Q.y}, ${Q.w}, ${Q.h}]`).join(`,
`)},
]`;await navigator.clipboard.writeText(W),alert("Layout matrix copied to clipboard!")}catch(ee){console.error("Failed to copy layout matrix:",ee),alert("Failed to copy layout matrix to clipboard")}},[E]),ke=k.useMemo(()=>E.map(function(ee){return h.jsxs("div",{className:"layoutItem",children:[h.jsx("b",{children:ee.i}),": [",ee.x,", ",ee.y,", ",ee.w,", ",ee.h,"]"]},ee.i)}),[E]),Ee=A||"",Ue=30,st=10,N=12,de=k.useMemo(()=>{if(E.length===0)return{};const ee={};for(let W=0;W<=6;W++){const Q=E.find(H=>H.i===W.toString());if(Q){const H=Q.h*Ue+(Q.h-1)*st,J=Q.w/N*100;ee[W]={width:`${J}%`,height:`${H}px`}}}return ee},[E]),be=k.useMemo(()=>{var ee,W,Q,H,J,we;return[h.jsx(nW,{symbol:"BINANCE:BTCUSDT",interval:"5",isCollapsed:!1},"tv"),h.jsx(hW,{baseURL:_,wsURL:P,marketId:Ee,maxDepth:20,height:(ee=de[1])==null?void 0:ee.height,authToken:O},`clobx-${Ee}`),h.jsx(pW,{baseURL:_,wsURL:P,marketId:Ee,symbol:L||void 0,authToken:O},`price-${Ee}`),h.jsx(bW,{ref:y,baseURL:_,wsURL:P,marketId:Ee,selectedBucketBalance:c,selectedBucketId:a,authToken:O,walletAddress:z,onLeverageClick:()=>{y.current&&m(y.current.leverage),f(!0)}},`trade-${Ee}`),h.jsx(yW,{baseURL:_,wsURL:P,authToken:O,walletAddress:z,mnemonic:D,height:(W=de[4])==null?void 0:W.height,refreshInterval:5e3},`order-${Ee}`),h.jsx(vW,{baseURL:_,authToken:O,walletAddress:z,mnemonic:D,height:(Q=de[5])==null?void 0:Q.height,refreshInterval:5e3,selectedBucketId:a},`pos-${Ee}`),h.jsx(_W,{baseURL:_,wsURL:P,mnemonic:D,authToken:O,walletAddress:z,height:(H=de[6])==null?void 0:H.height,refreshInterval:5e3,onBucketSelect:(te,ge)=>{l(te),u(ge)}},`bucket-${Ee}`),h.jsx(cW,{baseURL:_,wsURL:P,marketId:Ee,maxDepth:20,height:(J=de[7])==null?void 0:J.height,authToken:O},`clobclassic-${Ee}`),h.jsx(PW,{baseURL:_,selectedMarketId:Ee,height:(we=de[8])==null?void 0:we.height,authToken:O},`ticker-${Ee}`)]},[_,P,O,z,Ee,L,de,a,c]);if(F)return h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:h.jsx("div",{children:"Loading markets..."})});const re=$("markets");return re?h.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:h.jsxs("div",{children:["Error loading markets: ",re]})}):U.length===0||!A?h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:h.jsx("div",{children:"No markets available."})}):h.jsxs("div",{className:"App-content-row",children:[h.jsxs("div",{className:"App-section",children:[h.jsx("h3",{style:{marginTop:"0",marginBottom:"0.75rem"},children:"Configuration"}),h.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Market:"}),h.jsx("select",{value:A||"",onChange:ee=>{const W=ee.target.value;W&&B(W)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:U.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),U.map(ee=>{var J;const W=ee.market_id??((J=ee.id)==null?void 0:J.toString())??"",Q=ee.moniker?ee.moniker:ee.symbol?ee.symbol:ee.baseAsset&&ee.quoteAsset?`${ee.baseAsset}-${ee.quoteAsset}`:`Market ID: ${W}`,H=ee.active?" [ACTIVE]":"";return h.jsxs("option",{value:W,children:[Q," - ID: ",W,H]},W)})]})}),U.length>0&&h.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:A===ne?"#51cf66":"#ff9f43"},children:A===ne?` Auto-selected default market (ID: ${ne==null?void 0:ne.substring(0,16)}...)`:` Manual selection (ID: ${A==null?void 0:A.substring(0,16)}...)`})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Mnemonic (for wallet address):"}),h.jsx("input",{type:"text",value:D||"",onChange:ee=>T(ee.target.value),placeholder:"Enter mnemonic to generate wallet address",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:"white",color:"#333"}})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Wallet Address:"}),h.jsx("input",{type:"text",value:z||"",disabled:!!(D&&D.trim()!==""),placeholder:"automatic (from mnemonic via useOnboard)",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:z?"#e7f3ff":"#f5f5f5",color:"#333"}}),z&&h.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#28a745"},children:" Auto-generated from mnemonic via useOnboard hook"})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Layout Type:"}),h.jsxs("select",{value:b,onChange:ee=>{const W=ee.target.value;x(W)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:[h.jsx("option",{value:"default",children:"Default Predefined Layouts"}),h.jsx("option",{value:"widthfit",children:"Width Fit"})]})]})]}),h.jsx("h3",{children:"Layout Controls"}),h.jsx("button",{onClick:ae,style:{marginRight:"0.5rem"},children:"Generate New Layout"}),h.jsx("button",{onClick:se,style:{marginRight:"0.5rem"},children:s?"Enable Dragging":"Disable Dragging"}),h.jsx("button",{onClick:Z,style:{marginRight:"0.5rem"},children:"Change Compaction Type"}),h.jsx("button",{onClick:G,children:"Full Width Screen"}),h.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9em",color:"#fff"},children:["Compaction type:"," ",e?e.charAt(0).toUpperCase()+e.slice(1):"No Compaction"]})]}),h.jsx(vy,{ref:g,onLayoutChange:q,slotContent:be,compactType:e,allStatic:s,onCompactTypeChange:Z,onToggleStatic:se,onNewLayout:ae,initialLayout:M},b),h.jsxs("div",{className:"overview-layout layoutJSON",children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[h.jsxs("span",{children:["Displayed as ",h.jsx("code",{children:"[x, y, w, h]"}),":"]}),h.jsx("button",{onClick:Ne,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"4px",border:"1px solid #313131",backgroundColor:"#ccc",color:"black",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:ee=>{ee.currentTarget.style.color="white",ee.currentTarget.style.backgroundColor="#0056b3"},onMouseOut:ee=>{ee.currentTarget.style.color="black",ee.currentTarget.style.backgroundColor="#ccc"},children:"Copy"})]}),h.jsx("div",{className:"columns",children:ke})]}),h.jsx(SW,{isOpen:d,currentLeverage:((_e=y.current)==null?void 0:_e.leverage)||10,tempLeverage:p,maxRatio:y.current?y.current.calculateMaxRatio(p):p.toFixed(2),onLeverageChange:m,onConfirm:()=>{y.current&&y.current.setLeverage(p),f(!1)},onCancel:()=>{y.current&&m(y.current.leverage),f(!1)}})]})}function Da({data:t,maxVisible:e=10,maxDataPoints:n=100,height:s=400,width:r=1080,rowWidth:i=280,onItemClick:o,getValue:a,color:l="#2196F3"}){const c=k.useRef(null),u=k.useRef(null),d=k.useRef(0),[f,p]=k.useState(!1),[m,b]=k.useState(0),x=20,g=800,y=k.useMemo(()=>!t||t.length===0?[]:t.length<=n?t:t.slice(-n),[t,n]),S=w=>{const v=[];if(w.timestamp!==void 0&&v.push({label:"Time",value:new Date(w.timestamp).toLocaleTimeString()}),w.market_id!==void 0&&v.push({label:"Market",value:String(w.market_id)}),w.symbol!==void 0&&v.push({label:"Symbol",value:String(w.symbol)}),w.open!==void 0){const C=Number(w.open);v.push({label:"Open",value:isNaN(C)?String(w.open):C.toFixed(4)})}if(w.close!==void 0){const C=Number(w.close);v.push({label:"Close",value:isNaN(C)?String(w.close):C.toFixed(4)})}if(w.high!==void 0){const C=Number(w.high);v.push({label:"High",value:isNaN(C)?String(w.high):C.toFixed(4)})}if(w.low!==void 0){const C=Number(w.low);v.push({label:"Low",value:isNaN(C)?String(w.low):C.toFixed(4)})}if(w.volume!==void 0){const C=Number(w.volume);v.push({label:"Volume",value:isNaN(C)?String(w.volume):C.toFixed(2)})}if(w.price!==void 0){const C=Number(w.price);v.push({label:"Price",value:isNaN(C)?String(w.price):C.toFixed(4)})}if(w.mark_price!==void 0){const C=Number(w.mark_price);v.push({label:"Mark Price",value:isNaN(C)?String(w.mark_price):C.toFixed(4)})}if(w.last_price!==void 0){const C=Number(w.last_price);v.push({label:"Last Price",value:isNaN(C)?String(w.last_price):C.toFixed(4)})}if(w.size!==void 0){const C=Number(w.size);v.push({label:"Size",value:isNaN(C)?String(w.size):C.toFixed(4)})}if(w.entryPrice!==void 0){const C=Number(w.entryPrice);v.push({label:"Entry",value:isNaN(C)?String(w.entryPrice):C.toFixed(4)})}if(w.unrealizedPnL!==void 0){const C=Number(w.unrealizedPnL);v.push({label:"PnL",value:isNaN(C)?String(w.unrealizedPnL):C.toFixed(4)})}if(w.orderId!==void 0&&v.push({label:"Order ID",value:String(w.orderId)}),w.status!==void 0&&v.push({label:"Status",value:String(w.status)}),w.bucketId!==void 0&&v.push({label:"Bucket ID",value:String(w.bucketId)}),w.maxLeverage!==void 0&&v.push({label:"Max Lev",value:String(w.maxLeverage)}),w.value!==void 0&&v.length===0){const C=Number(w.value);v.push({label:"Value",value:isNaN(C)?String(w.value):C.toFixed(4)})}return v.length===0&&v.push({label:"Data",value:"Click to view"}),v.slice(0,6)};return k.useEffect(()=>{if(!u.current||!c.current)return;const w=y.length;if(w===0){b(0),d.current=0;return}const _=c.current.offsetWidth-20*2,P=w*i+(w-1)*x;if(P>_){const E=P-_;b(-E)}else b(0);const M=y.length>d.current;d.current=y.length,M&&u.current&&requestAnimationFrame(()=>{u.current&&u.current.offsetWidth})},[y.length,i,x,r]),k.useEffect(()=>{u.current&&(u.current.style.transition=f?"none":`transform ${g}ms ease-out`,u.current.style.transform=`translateX(${m}px)`)},[m,f,g]),h.jsxs("div",{ref:c,className:"data-flow-container",style:{width:`${r}px`,height:`${s}px`},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[h.jsx("div",{ref:u,className:"data-flow-rows-wrapper",style:{gap:`${x}px`},children:y.map((w,v)=>{const C=S(w),_=v;return h.jsxs("div",{className:"data-flow-row",onClick:()=>{o&&o(w)},style:{width:`${i}px`,background:l},children:[h.jsx("div",{className:"data-flow-row-header",children:w.timestamp?new Date(w.timestamp).toLocaleTimeString():`#${_+1}`}),h.jsx("div",{className:"data-flow-row-fields",children:C.map((P,M)=>h.jsxs("div",{className:"data-flow-field",children:[h.jsxs("span",{className:"data-flow-field-label",children:[P.label,":"]}),h.jsx("span",{className:"data-flow-field-value",children:P.value})]},M))}),h.jsx("div",{className:"data-flow-row-footer",children:"Click to view details"})]},`${_}-${w.timestamp||Date.now()}-${w.id||JSON.stringify(w)}`)})}),f&&h.jsx("div",{className:"data-flow-paused-indicator",children:"Paused"})]})}function MW({data:t,isOpen:e,onClose:n,title:s="Data Details"}){return k.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),k.useEffect(()=>{const r=i=>{i.key==="Escape"&&e&&n()};return e&&window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[e,n]),e?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"data-modal-overlay",onClick:n}),h.jsxs("div",{className:"data-modal",onClick:r=>r.stopPropagation(),children:[h.jsx("h3",{className:"data-modal-title",children:s}),h.jsx("pre",{className:"data-modal-content",children:JSON.stringify(t,null,2)}),h.jsx("button",{className:"data-modal-close-button",onClick:n,children:"Close"})]})]}):null}function gp(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function IW(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qI(t){let e,n,s;t.length!==2?(e=gp,n=(a,l)=>gp(t(a),l),s=(a,l)=>t(a)-l):(e=t===gp||t===IW?t:NW,n=t,s=t);function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=r(a,l,c,u-1);return d>c&&s(a[d-1],l)>-s(a[d],l)?d-1:d}return{left:r,center:o,right:i}}function NW(){return 0}function DW(t){return t===null?NaN:+t}const AW=qI(gp),OW=AW.right;qI(DW).center;class BC extends Map{constructor(e,n=LW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[s,r]of e)this.set(s,r)}get(e){return super.get(zC(this,e))}has(e){return super.has(zC(this,e))}set(e,n){return super.set(RW(this,e),n)}delete(e){return super.delete(jW(this,e))}}function zC({_intern:t,_key:e},n){const s=e(n);return t.has(s)?t.get(s):n}function RW({_intern:t,_key:e},n){const s=e(n);return t.has(s)?t.get(s):(t.set(s,n),n)}function jW({_intern:t,_key:e},n){const s=e(n);return t.has(s)&&(n=t.get(s),t.delete(s)),n}function LW(t){return t!==null&&typeof t=="object"?t.valueOf():t}const FW=Math.sqrt(50),$W=Math.sqrt(10),BW=Math.sqrt(2);function x0(t,e,n){const s=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(s)),i=s/Math.pow(10,r),o=i>=FW?10:i>=$W?5:i>=BW?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?x0(t,e,n*2):[a,l,c]}function zW(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const s=e<t,[r,i,o]=s?x0(e,t,n):x0(t,e,n);if(!(i>=r))return[];const a=i-r+1,l=new Array(a);if(s)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function ky(t,e,n){return e=+e,t=+t,n=+n,x0(t,e,n)[2]}function UW(t,e,n){e=+e,t=+t,n=+n;const s=e<t,r=s?ky(e,t,n):ky(t,e,n);return(s?-1:1)*(r<0?1/-r:r)}function WW(t,e){let n;if(e===void 0)for(const s of t)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);else{let s=-1;for(let r of t)(r=e(r,++s,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function HW(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var s=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(r);++s<r;)i[s]=t+s*n;return i}function VW(t){return t}var Ib=1,Nb=2,Cy=3,wu=4,UC=1e-6;function qW(t){return"translate("+t+",0)"}function YW(t){return"translate(0,"+t+")"}function GW(t){return e=>+t(e)}function KW(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function XW(){return!this.__axis}function YI(t,e){var n=[],s=null,r=null,i=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Ib||t===wu?-1:1,u=t===wu||t===Nb?"x":"y",d=t===Ib||t===Cy?qW:YW;function f(p){var m=s??(e.ticks?e.ticks.apply(e,n):e.domain()),b=r??(e.tickFormat?e.tickFormat.apply(e,n):VW),x=Math.max(i,0)+a,g=e.range(),y=+g[0]+l,S=+g[g.length-1]+l,w=(e.bandwidth?KW:GW)(e.copy(),l),v=p.selection?p.selection():p,C=v.selectAll(".domain").data([null]),_=v.selectAll(".tick").data(m,e).order(),P=_.exit(),M=_.enter().append("g").attr("class","tick"),E=_.select("line"),I=_.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(M),E=E.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",c*i)),I=I.merge(M.append("text").attr("fill","currentColor").attr(u,c*x).attr("dy",t===Ib?"0em":t===Cy?"0.71em":"0.32em")),p!==v&&(C=C.transition(p),_=_.transition(p),E=E.transition(p),I=I.transition(p),P=P.transition(p).attr("opacity",UC).attr("transform",function(O){return isFinite(O=w(O))?d(O+l):this.getAttribute("transform")}),M.attr("opacity",UC).attr("transform",function(O){var j=this.parentNode.__axis;return d((j&&isFinite(j=j(O))?j:w(O))+l)})),P.remove(),C.attr("d",t===wu||t===Nb?o?"M"+c*o+","+y+"H"+l+"V"+S+"H"+c*o:"M"+l+","+y+"V"+S:o?"M"+y+","+c*o+"V"+l+"H"+S+"V"+c*o:"M"+y+","+l+"H"+S),_.attr("opacity",1).attr("transform",function(O){return d(w(O)+l)}),E.attr(u+"2",c*i),I.attr(u,c*x).text(b),v.filter(XW).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Nb?"start":t===wu?"end":"middle"),v.each(function(){this.__axis=w})}return f.scale=function(p){return arguments.length?(e=p,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),f):n.slice()},f.tickValues=function(p){return arguments.length?(s=p==null?null:Array.from(p),f):s&&s.slice()},f.tickFormat=function(p){return arguments.length?(r=p,f):r},f.tickSize=function(p){return arguments.length?(i=o=+p,f):i},f.tickSizeInner=function(p){return arguments.length?(i=+p,f):i},f.tickSizeOuter=function(p){return arguments.length?(o=+p,f):o},f.tickPadding=function(p){return arguments.length?(a=+p,f):a},f.offset=function(p){return arguments.length?(l=+p,f):l},f}function WC(t){return YI(Cy,t)}function QW(t){return YI(wu,t)}var JW={value:()=>{}};function GI(){for(var t=0,e=arguments.length,n={},s;t<e;++t){if(!(s=arguments[t]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new bp(n)}function bp(t){this._=t}function ZW(t,e){return t.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}bp.prototype=GI.prototype={constructor:bp,on:function(t,e){var n=this._,s=ZW(t+"",n),r,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((r=(t=s[i]).type)&&(r=eH(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(r=(t=s[i]).type)n[r]=HC(n[r],t.name,e);else if(e==null)for(r in n)n[r]=HC(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new bp(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,i;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],s=0,r=i.length;s<r;++s)i[s].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)}};function eH(t,e){for(var n=0,s=t.length,r;n<s;++n)if((r=t[n]).name===e)return r.value}function HC(t,e,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===e){t[s]=JW,t=t.slice(0,s).concat(t.slice(s+1));break}return n!=null&&t.push({name:e,value:n}),t}var _y="http://www.w3.org/1999/xhtml";const VC={svg:"http://www.w3.org/2000/svg",xhtml:_y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $m(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),VC.hasOwnProperty(e)?{space:VC[e],local:t}:t}function tH(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===_y&&e.documentElement.namespaceURI===_y?e.createElement(t):e.createElementNS(n,t)}}function nH(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function KI(t){var e=$m(t);return(e.local?nH:tH)(e)}function sH(){}function i1(t){return t==null?sH:function(){return this.querySelector(t)}}function rH(t){typeof t!="function"&&(t=i1(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=t.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Mn(s,this._parents)}function XI(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function iH(){return[]}function QI(t){return t==null?iH:function(){return this.querySelectorAll(t)}}function oH(t){return function(){return XI(t.apply(this,arguments))}}function aH(t){typeof t=="function"?t=oH(t):t=QI(t);for(var e=this._groups,n=e.length,s=[],r=[],i=0;i<n;++i)for(var o=e[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(s.push(t.call(l,l.__data__,c,o)),r.push(l));return new Mn(s,r)}function JI(t){return function(){return this.matches(t)}}function ZI(t){return function(e){return e.matches(t)}}var lH=Array.prototype.find;function cH(t){return function(){return lH.call(this.children,t)}}function uH(){return this.firstElementChild}function dH(t){return this.select(t==null?uH:cH(typeof t=="function"?t:ZI(t)))}var hH=Array.prototype.filter;function fH(){return Array.from(this.children)}function pH(t){return function(){return hH.call(this.children,t)}}function mH(t){return this.selectAll(t==null?fH:pH(typeof t=="function"?t:ZI(t)))}function gH(t){typeof t!="function"&&(t=JI(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=[],l,c=0;c<o;++c)(l=i[c])&&t.call(l,l.__data__,c,i)&&a.push(l);return new Mn(s,this._parents)}function eN(t){return new Array(t.length)}function bH(){return new Mn(this._enter||this._groups.map(eN),this._parents)}function y0(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}y0.prototype={constructor:y0,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function xH(t){return function(){return t}}function yH(t,e,n,s,r,i){for(var o=0,a,l=e.length,c=i.length;o<c;++o)(a=e[o])?(a.__data__=i[o],s[o]=a):n[o]=new y0(t,i[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function wH(t,e,n,s,r,i,o){var a,l,c=new Map,u=e.length,d=i.length,f=new Array(u),p;for(a=0;a<u;++a)(l=e[a])&&(f[a]=p=o.call(l,l.__data__,a,e)+"",c.has(p)?r[a]=l:c.set(p,l));for(a=0;a<d;++a)p=o.call(t,i[a],a,i)+"",(l=c.get(p))?(s[a]=l,l.__data__=i[a],c.delete(p)):n[a]=new y0(t,i[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(f[a])===l&&(r[a]=l)}function vH(t){return t.__data__}function SH(t,e){if(!arguments.length)return Array.from(this,vH);var n=e?wH:yH,s=this._parents,r=this._groups;typeof t!="function"&&(t=xH(t));for(var i=r.length,o=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=s[c],d=r[c],f=d.length,p=kH(t.call(u,u&&u.__data__,c,s)),m=p.length,b=a[c]=new Array(m),x=o[c]=new Array(m),g=l[c]=new Array(f);n(u,d,b,x,g,p,e);for(var y=0,S=0,w,v;y<m;++y)if(w=b[y]){for(y>=S&&(S=y+1);!(v=x[S])&&++S<m;);w._next=v||null}}return o=new Mn(o,s),o._enter=a,o._exit=l,o}function kH(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function CH(){return new Mn(this._exit||this._groups.map(eN),this._parents)}function _H(t,e,n){var s=this.enter(),r=this,i=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?i.remove():n(i),s&&r?s.merge(r).order():r}function EH(t){for(var e=t.selection?t.selection():t,n=this._groups,s=e._groups,r=n.length,i=s.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=s[l],d=c.length,f=a[l]=new Array(d),p,m=0;m<d;++m)(p=c[m]||u[m])&&(f[m]=p);for(;l<r;++l)a[l]=n[l];return new Mn(a,this._parents)}function PH(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s=t[e],r=s.length-1,i=s[r],o;--r>=0;)(o=s[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function TH(t){t||(t=MH);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,s=n.length,r=new Array(s),i=0;i<s;++i){for(var o=n[i],a=o.length,l=r[i]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new Mn(r,this._parents).order()}function MH(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function IH(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function NH(){return Array.from(this)}function DH(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length;r<i;++r){var o=s[r];if(o)return o}return null}function AH(){let t=0;for(const e of this)++t;return t}function OH(){return!this.node()}function RH(t){for(var e=this._groups,n=0,s=e.length;n<s;++n)for(var r=e[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&t.call(a,a.__data__,i,r);return this}function jH(t){return function(){this.removeAttribute(t)}}function LH(t){return function(){this.removeAttributeNS(t.space,t.local)}}function FH(t,e){return function(){this.setAttribute(t,e)}}function $H(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function BH(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function zH(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function UH(t,e){var n=$m(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((e==null?n.local?LH:jH:typeof e=="function"?n.local?zH:BH:n.local?$H:FH)(n,e))}function tN(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function WH(t){return function(){this.style.removeProperty(t)}}function HH(t,e,n){return function(){this.style.setProperty(t,e,n)}}function VH(t,e,n){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function qH(t,e,n){return arguments.length>1?this.each((e==null?WH:typeof e=="function"?VH:HH)(t,e,n??"")):dc(this.node(),t)}function dc(t,e){return t.style.getPropertyValue(e)||tN(t).getComputedStyle(t,null).getPropertyValue(e)}function YH(t){return function(){delete this[t]}}function GH(t,e){return function(){this[t]=e}}function KH(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function XH(t,e){return arguments.length>1?this.each((e==null?YH:typeof e=="function"?KH:GH)(t,e)):this.node()[t]}function nN(t){return t.trim().split(/^|\s+/)}function o1(t){return t.classList||new sN(t)}function sN(t){this._node=t,this._names=nN(t.getAttribute("class")||"")}sN.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function rN(t,e){for(var n=o1(t),s=-1,r=e.length;++s<r;)n.add(e[s])}function iN(t,e){for(var n=o1(t),s=-1,r=e.length;++s<r;)n.remove(e[s])}function QH(t){return function(){rN(this,t)}}function JH(t){return function(){iN(this,t)}}function ZH(t,e){return function(){(e.apply(this,arguments)?rN:iN)(this,t)}}function eV(t,e){var n=nN(t+"");if(arguments.length<2){for(var s=o1(this.node()),r=-1,i=n.length;++r<i;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?ZH:e?QH:JH)(n,e))}function tV(){this.textContent=""}function nV(t){return function(){this.textContent=t}}function sV(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function rV(t){return arguments.length?this.each(t==null?tV:(typeof t=="function"?sV:nV)(t)):this.node().textContent}function iV(){this.innerHTML=""}function oV(t){return function(){this.innerHTML=t}}function aV(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function lV(t){return arguments.length?this.each(t==null?iV:(typeof t=="function"?aV:oV)(t)):this.node().innerHTML}function cV(){this.nextSibling&&this.parentNode.appendChild(this)}function uV(){return this.each(cV)}function dV(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hV(){return this.each(dV)}function fV(t){var e=typeof t=="function"?t:KI(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function pV(){return null}function mV(t,e){var n=typeof t=="function"?t:KI(t),s=e==null?pV:typeof e=="function"?e:i1(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function gV(){var t=this.parentNode;t&&t.removeChild(this)}function bV(){return this.each(gV)}function xV(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function yV(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wV(t){return this.select(t?yV:xV)}function vV(t){return arguments.length?this.property("__data__",t):this.node().__data__}function SV(t){return function(e){t.call(this,e,this.__data__)}}function kV(t){return t.trim().split(/^|\s+/).map(function(e){var n="",s=e.indexOf(".");return s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),{type:e,name:n}})}function CV(t){return function(){var e=this.__on;if(e){for(var n=0,s=-1,r=e.length,i;n<r;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++s]=i;++s?e.length=s:delete this.__on}}}function _V(t,e,n){return function(){var s=this.__on,r,i=SV(e);if(s){for(var o=0,a=s.length;o<a;++o)if((r=s[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=e;return}}this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},s?s.push(r):this.__on=[r]}}function EV(t,e,n){var s=kV(t+""),r,i=s.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<i;++r)if((o=s[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?_V:CV,r=0;r<i;++r)this.each(a(s[r],e,n));return this}function oN(t,e,n){var s=tN(t),r=s.CustomEvent;typeof r=="function"?r=new r(e,n):(r=s.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function PV(t,e){return function(){return oN(this,t,e)}}function TV(t,e){return function(){return oN(this,t,e.apply(this,arguments))}}function MV(t,e){return this.each((typeof e=="function"?TV:PV)(t,e))}function*IV(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length,o;r<i;++r)(o=s[r])&&(yield o)}var a1=[null];function Mn(t,e){this._groups=t,this._parents=e}function kh(){return new Mn([[document.documentElement]],a1)}function NV(){return this}Mn.prototype=kh.prototype={constructor:Mn,select:rH,selectAll:aH,selectChild:dH,selectChildren:mH,filter:gH,data:SH,enter:bH,exit:CH,join:_H,merge:EH,selection:NV,order:PH,sort:TH,call:IH,nodes:NH,node:DH,size:AH,empty:OH,each:RH,attr:UH,style:qH,property:XH,classed:eV,text:rV,html:lV,raise:uV,lower:hV,append:fV,insert:mV,remove:bV,clone:wV,datum:vV,on:EV,dispatch:MV,[Symbol.iterator]:IV};function Ef(t){return typeof t=="string"?new Mn([[document.querySelector(t)]],[document.documentElement]):new Mn([[t]],a1)}function DV(t){let e;for(;e=t.sourceEvent;)t=e;return t}function AV(t,e){if(t=DV(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function OV(t){return typeof t=="string"?new Mn([document.querySelectorAll(t)],[document.documentElement]):new Mn([XI(t)],a1)}function l1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function aN(t,e){var n=Object.create(t.prototype);for(var s in e)n[s]=e[s];return n}function Ch(){}var Wd=.7,w0=1/Wd,dl="\\s*([+-]?\\d+)\\s*",Hd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",br="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RV=/^#([0-9a-f]{3,8})$/,jV=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),LV=new RegExp(`^rgb\\(${br},${br},${br}\\)$`),FV=new RegExp(`^rgba\\(${dl},${dl},${dl},${Hd}\\)$`),$V=new RegExp(`^rgba\\(${br},${br},${br},${Hd}\\)$`),BV=new RegExp(`^hsl\\(${Hd},${br},${br}\\)$`),zV=new RegExp(`^hsla\\(${Hd},${br},${br},${Hd}\\)$`),qC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};l1(Ch,ha,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:YC,formatHex:YC,formatHex8:UV,formatHsl:WV,formatRgb:GC,toString:GC});function YC(){return this.rgb().formatHex()}function UV(){return this.rgb().formatHex8()}function WV(){return lN(this).formatHsl()}function GC(){return this.rgb().formatRgb()}function ha(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=RV.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?KC(e):n===3?new Bn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Pf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Pf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=jV.exec(t))?new Bn(e[1],e[2],e[3],1):(e=LV.exec(t))?new Bn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=FV.exec(t))?Pf(e[1],e[2],e[3],e[4]):(e=$V.exec(t))?Pf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=BV.exec(t))?JC(e[1],e[2]/100,e[3]/100,1):(e=zV.exec(t))?JC(e[1],e[2]/100,e[3]/100,e[4]):qC.hasOwnProperty(t)?KC(qC[t]):t==="transparent"?new Bn(NaN,NaN,NaN,0):null}function KC(t){return new Bn(t>>16&255,t>>8&255,t&255,1)}function Pf(t,e,n,s){return s<=0&&(t=e=n=NaN),new Bn(t,e,n,s)}function HV(t){return t instanceof Ch||(t=ha(t)),t?(t=t.rgb(),new Bn(t.r,t.g,t.b,t.opacity)):new Bn}function Ey(t,e,n,s){return arguments.length===1?HV(t):new Bn(t,e,n,s??1)}function Bn(t,e,n,s){this.r=+t,this.g=+e,this.b=+n,this.opacity=+s}l1(Bn,Ey,aN(Ch,{brighter(t){return t=t==null?w0:Math.pow(w0,t),new Bn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wd:Math.pow(Wd,t),new Bn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bn(Qo(this.r),Qo(this.g),Qo(this.b),v0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XC,formatHex:XC,formatHex8:VV,formatRgb:QC,toString:QC}));function XC(){return`#${Ao(this.r)}${Ao(this.g)}${Ao(this.b)}`}function VV(){return`#${Ao(this.r)}${Ao(this.g)}${Ao(this.b)}${Ao((isNaN(this.opacity)?1:this.opacity)*255)}`}function QC(){const t=v0(this.opacity);return`${t===1?"rgb(":"rgba("}${Qo(this.r)}, ${Qo(this.g)}, ${Qo(this.b)}${t===1?")":`, ${t})`}`}function v0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Qo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ao(t){return t=Qo(t),(t<16?"0":"")+t.toString(16)}function JC(t,e,n,s){return s<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zs(t,e,n,s)}function lN(t){if(t instanceof zs)return new zs(t.h,t.s,t.l,t.opacity);if(t instanceof Ch||(t=ha(t)),!t)return new zs;if(t instanceof zs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,s=t.b/255,r=Math.min(e,n,s),i=Math.max(e,n,s),o=NaN,a=i-r,l=(i+r)/2;return a?(e===i?o=(n-s)/a+(n<s)*6:n===i?o=(s-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+r:2-i-r,o*=60):a=l>0&&l<1?0:o,new zs(o,a,l,t.opacity)}function qV(t,e,n,s){return arguments.length===1?lN(t):new zs(t,e,n,s??1)}function zs(t,e,n,s){this.h=+t,this.s=+e,this.l=+n,this.opacity=+s}l1(zs,qV,aN(Ch,{brighter(t){return t=t==null?w0:Math.pow(w0,t),new zs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wd:Math.pow(Wd,t),new zs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*e,r=2*n-s;return new Bn(Db(t>=240?t-240:t+120,r,s),Db(t,r,s),Db(t<120?t+240:t-120,r,s),this.opacity)},clamp(){return new zs(ZC(this.h),Tf(this.s),Tf(this.l),v0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=v0(this.opacity);return`${t===1?"hsl(":"hsla("}${ZC(this.h)}, ${Tf(this.s)*100}%, ${Tf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ZC(t){return t=(t||0)%360,t<0?t+360:t}function Tf(t){return Math.max(0,Math.min(1,t||0))}function Db(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const c1=t=>()=>t;function YV(t,e){return function(n){return t+n*e}}function GV(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(s){return Math.pow(t+s*e,n)}}function KV(t){return(t=+t)==1?cN:function(e,n){return n-e?GV(e,n,t):c1(isNaN(e)?n:e)}}function cN(t,e){var n=e-t;return n?YV(t,n):c1(isNaN(t)?e:t)}const S0=function t(e){var n=KV(e);function s(r,i){var o=n((r=Ey(r)).r,(i=Ey(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),c=cN(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return s.gamma=t,s}(1);function XV(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,s=e.slice(),r;return function(i){for(r=0;r<n;++r)s[r]=t[r]*(1-i)+e[r]*i;return s}}function QV(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function JV(t,e){var n=e?e.length:0,s=t?Math.min(n,t.length):0,r=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)r[o]=u1(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<s;++o)i[o]=r[o](a);return i}}function ZV(t,e){var n=new Date;return t=+t,e=+e,function(s){return n.setTime(t*(1-s)+e*s),n}}function Bs(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function eq(t,e){var n={},s={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=u1(t[r],e[r]):s[r]=e[r];return function(i){for(r in n)s[r]=n[r](i);return s}}var Py=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ab=new RegExp(Py.source,"g");function tq(t){return function(){return t}}function nq(t){return function(e){return t(e)+""}}function uN(t,e){var n=Py.lastIndex=Ab.lastIndex=0,s,r,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(s=Py.exec(t))&&(r=Ab.exec(e));)(i=r.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(s=s[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Bs(s,r)})),n=Ab.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?nq(l[0].x):tq(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function u1(t,e){var n=typeof e,s;return e==null||n==="boolean"?c1(e):(n==="number"?Bs:n==="string"?(s=ha(e))?(e=s,S0):uN:e instanceof ha?S0:e instanceof Date?ZV:QV(e)?XV:Array.isArray(e)?JV:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?eq:Bs)(t,e)}function sq(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var e_=180/Math.PI,Ty={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dN(t,e,n,s,r,i){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*s)&&(n-=t*l,s-=e*l),(a=Math.sqrt(n*n+s*s))&&(n/=a,s/=a,l/=a),t*s<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*e_,skewX:Math.atan(l)*e_,scaleX:o,scaleY:a}}var Mf;function rq(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ty:dN(e.a,e.b,e.c,e.d,e.e,e.f)}function iq(t){return t==null||(Mf||(Mf=document.createElementNS("http://www.w3.org/2000/svg","g")),Mf.setAttribute("transform",t),!(t=Mf.transform.baseVal.consolidate()))?Ty:(t=t.matrix,dN(t.a,t.b,t.c,t.d,t.e,t.f))}function hN(t,e,n,s){function r(c){return c.length?c.pop()+" ":""}function i(c,u,d,f,p,m){if(c!==d||u!==f){var b=p.push("translate(",null,e,null,n);m.push({i:b-4,x:Bs(c,d)},{i:b-2,x:Bs(u,f)})}else(d||f)&&p.push("translate("+d+e+f+n)}function o(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(r(d)+"rotate(",null,s)-2,x:Bs(c,u)})):u&&d.push(r(d)+"rotate("+u+s)}function a(c,u,d,f){c!==u?f.push({i:d.push(r(d)+"skewX(",null,s)-2,x:Bs(c,u)}):u&&d.push(r(d)+"skewX("+u+s)}function l(c,u,d,f,p,m){if(c!==d||u!==f){var b=p.push(r(p)+"scale(",null,",",null,")");m.push({i:b-4,x:Bs(c,d)},{i:b-2,x:Bs(u,f)})}else(d!==1||f!==1)&&p.push(r(p)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=t(c),u=t(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,f),o(c.rotate,u.rotate,d,f),a(c.skewX,u.skewX,d,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(p){for(var m=-1,b=f.length,x;++m<b;)d[(x=f[m]).i]=x.x(p);return d.join("")}}}var oq=hN(rq,"px, ","px)","deg)"),aq=hN(iq,", ",")",")"),hc=0,vu=0,nu=0,fN=1e3,k0,Su,C0=0,fa=0,Bm=0,Vd=typeof performance=="object"&&performance.now?performance:Date,pN=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function d1(){return fa||(pN(lq),fa=Vd.now()+Bm)}function lq(){fa=0}function _0(){this._call=this._time=this._next=null}_0.prototype=mN.prototype={constructor:_0,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?d1():+n)+(e==null?0:+e),!this._next&&Su!==this&&(Su?Su._next=this:k0=this,Su=this),this._call=t,this._time=n,My()},stop:function(){this._call&&(this._call=null,this._time=1/0,My())}};function mN(t,e,n){var s=new _0;return s.restart(t,e,n),s}function cq(){d1(),++hc;for(var t=k0,e;t;)(e=fa-t._time)>=0&&t._call.call(void 0,e),t=t._next;--hc}function t_(){fa=(C0=Vd.now())+Bm,hc=vu=0;try{cq()}finally{hc=0,dq(),fa=0}}function uq(){var t=Vd.now(),e=t-C0;e>fN&&(Bm-=e,C0=t)}function dq(){for(var t,e=k0,n,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:k0=n);Su=t,My(s)}function My(t){if(!hc){vu&&(vu=clearTimeout(vu));var e=t-fa;e>24?(t<1/0&&(vu=setTimeout(t_,t-Vd.now()-Bm)),nu&&(nu=clearInterval(nu))):(nu||(C0=Vd.now(),nu=setInterval(uq,fN)),hc=1,pN(t_))}}function n_(t,e,n){var s=new _0;return e=e==null?0:+e,s.restart(r=>{s.stop(),t(r+e)},e,n),s}var hq=GI("start","end","cancel","interrupt"),fq=[],gN=0,s_=1,Iy=2,xp=3,r_=4,Ny=5,yp=6;function zm(t,e,n,s,r,i){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;pq(t,n,{name:e,index:s,group:r,on:hq,tween:fq,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:gN})}function h1(t,e){var n=Gs(t,e);if(n.state>gN)throw new Error("too late; already scheduled");return n}function vr(t,e){var n=Gs(t,e);if(n.state>xp)throw new Error("too late; already running");return n}function Gs(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function pq(t,e,n){var s=t.__transition,r;s[e]=n,n.timer=mN(i,0,n.time);function i(c){n.state=s_,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,f,p;if(n.state!==s_)return l();for(u in s)if(p=s[u],p.name===n.name){if(p.state===xp)return n_(o);p.state===r_?(p.state=yp,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete s[u]):+u<e&&(p.state=yp,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete s[u])}if(n_(function(){n.state===xp&&(n.state=r_,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Iy,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Iy){for(n.state=xp,r=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=p);r.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ny,1),d=-1,f=r.length;++d<f;)r[d].call(t,u);n.state===Ny&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=yp,n.timer.stop(),delete s[e];for(var c in s)return;delete t.__transition}}function mq(t,e){var n=t.__transition,s,r,i=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((s=n[o]).name!==e){i=!1;continue}r=s.state>Iy&&s.state<Ny,s.state=yp,s.timer.stop(),s.on.call(r?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete n[o]}i&&delete t.__transition}}function gq(t){return this.each(function(){mq(this,t)})}function bq(t,e){var n,s;return function(){var r=vr(this,t),i=r.tween;if(i!==n){s=n=i;for(var o=0,a=s.length;o<a;++o)if(s[o].name===e){s=s.slice(),s.splice(o,1);break}}r.tween=s}}function xq(t,e,n){var s,r;if(typeof n!="function")throw new Error;return function(){var i=vr(this,t),o=i.tween;if(o!==s){r=(s=o).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}i.tween=r}}function yq(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s=Gs(this.node(),n).tween,r=0,i=s.length,o;r<i;++r)if((o=s[r]).name===t)return o.value;return null}return this.each((e==null?bq:xq)(n,t,e))}function f1(t,e,n){var s=t._id;return t.each(function(){var r=vr(this,s);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Gs(r,s).value[e]}}function bN(t,e){var n;return(typeof e=="number"?Bs:e instanceof ha?S0:(n=ha(e))?(e=n,S0):uN)(t,e)}function wq(t){return function(){this.removeAttribute(t)}}function vq(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sq(t,e,n){var s,r=n+"",i;return function(){var o=this.getAttribute(t);return o===r?null:o===s?i:i=e(s=o,n)}}function kq(t,e,n){var s,r=n+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===s?i:i=e(s=o,n)}}function Cq(t,e,n){var s,r,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a)))}}function _q(t,e,n){var s,r,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a)))}}function Eq(t,e){var n=$m(t),s=n==="transform"?aq:bN;return this.attrTween(t,typeof e=="function"?(n.local?_q:Cq)(n,s,f1(this,"attr."+t,e)):e==null?(n.local?vq:wq)(n):(n.local?kq:Sq)(n,s,e))}function Pq(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Tq(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Mq(t,e){var n,s;function r(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&Tq(t,i)),n}return r._value=e,r}function Iq(t,e){var n,s;function r(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&Pq(t,i)),n}return r._value=e,r}function Nq(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var s=$m(t);return this.tween(n,(s.local?Mq:Iq)(s,e))}function Dq(t,e){return function(){h1(this,t).delay=+e.apply(this,arguments)}}function Aq(t,e){return e=+e,function(){h1(this,t).delay=e}}function Oq(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Dq:Aq)(e,t)):Gs(this.node(),e).delay}function Rq(t,e){return function(){vr(this,t).duration=+e.apply(this,arguments)}}function jq(t,e){return e=+e,function(){vr(this,t).duration=e}}function Lq(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Rq:jq)(e,t)):Gs(this.node(),e).duration}function Fq(t,e){if(typeof e!="function")throw new Error;return function(){vr(this,t).ease=e}}function $q(t){var e=this._id;return arguments.length?this.each(Fq(e,t)):Gs(this.node(),e).ease}function Bq(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;vr(this,t).ease=n}}function zq(t){if(typeof t!="function")throw new Error;return this.each(Bq(this._id,t))}function Uq(t){typeof t!="function"&&(t=JI(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=[],l,c=0;c<o;++c)(l=i[c])&&t.call(l,l.__data__,c,i)&&a.push(l);return new ei(s,this._parents,this._name,this._id)}function Wq(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,s=e.length,r=n.length,i=Math.min(s,r),o=new Array(s),a=0;a<i;++a)for(var l=e[a],c=n[a],u=l.length,d=o[a]=new Array(u),f,p=0;p<u;++p)(f=l[p]||c[p])&&(d[p]=f);for(;a<s;++a)o[a]=e[a];return new ei(o,this._parents,this._name,this._id)}function Hq(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Vq(t,e,n){var s,r,i=Hq(e)?h1:vr;return function(){var o=i(this,t),a=o.on;a!==s&&(r=(s=a).copy()).on(e,n),o.on=r}}function qq(t,e){var n=this._id;return arguments.length<2?Gs(this.node(),n).on.on(t):this.each(Vq(n,t,e))}function Yq(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Gq(){return this.on("end.remove",Yq(this._id))}function Kq(t){var e=this._name,n=this._id;typeof t!="function"&&(t=i1(t));for(var s=this._groups,r=s.length,i=new Array(r),o=0;o<r;++o)for(var a=s[o],l=a.length,c=i[o]=new Array(l),u,d,f=0;f<l;++f)(u=a[f])&&(d=t.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,zm(c[f],e,n,f,c,Gs(u,n)));return new ei(i,this._parents,e,n)}function Xq(t){var e=this._name,n=this._id;typeof t!="function"&&(t=QI(t));for(var s=this._groups,r=s.length,i=[],o=[],a=0;a<r;++a)for(var l=s[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var f=t.call(u,u.__data__,d,l),p,m=Gs(u,n),b=0,x=f.length;b<x;++b)(p=f[b])&&zm(p,e,n,b,f,m);i.push(f),o.push(u)}return new ei(i,o,e,n)}var Qq=kh.prototype.constructor;function Jq(){return new Qq(this._groups,this._parents)}function Zq(t,e){var n,s,r;return function(){var i=dc(this,t),o=(this.style.removeProperty(t),dc(this,t));return i===o?null:i===n&&o===s?r:r=e(n=i,s=o)}}function xN(t){return function(){this.style.removeProperty(t)}}function eY(t,e,n){var s,r=n+"",i;return function(){var o=dc(this,t);return o===r?null:o===s?i:i=e(s=o,n)}}function tY(t,e,n){var s,r,i;return function(){var o=dc(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),dc(this,t))),o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a))}}function nY(t,e){var n,s,r,i="style."+e,o="end."+i,a;return function(){var l=vr(this,t),c=l.on,u=l.value[i]==null?a||(a=xN(e)):void 0;(c!==n||r!==u)&&(s=(n=c).copy()).on(o,r=u),l.on=s}}function sY(t,e,n){var s=(t+="")=="transform"?oq:bN;return e==null?this.styleTween(t,Zq(t,s)).on("end.style."+t,xN(t)):typeof e=="function"?this.styleTween(t,tY(t,s,f1(this,"style."+t,e))).each(nY(this._id,t)):this.styleTween(t,eY(t,s,e),n).on("end.style."+t,null)}function rY(t,e,n){return function(s){this.style.setProperty(t,e.call(this,s),n)}}function iY(t,e,n){var s,r;function i(){var o=e.apply(this,arguments);return o!==r&&(s=(r=o)&&rY(t,o,n)),s}return i._value=e,i}function oY(t,e,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,iY(t,e,n??""))}function aY(t){return function(){this.textContent=t}}function lY(t){return function(){var e=t(this);this.textContent=e??""}}function cY(t){return this.tween("text",typeof t=="function"?lY(f1(this,"text",t)):aY(t==null?"":t+""))}function uY(t){return function(e){this.textContent=t.call(this,e)}}function dY(t){var e,n;function s(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&uY(r)),e}return s._value=t,s}function hY(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,dY(t))}function fY(){for(var t=this._name,e=this._id,n=yN(),s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Gs(l,e);zm(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ei(s,this._parents,t,n)}function pY(){var t,e,n=this,s=n._id,r=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--r===0&&i()}};n.each(function(){var c=vr(this,s),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&i()})}var mY=0;function ei(t,e,n,s){this._groups=t,this._parents=e,this._name=n,this._id=s}function yN(){return++mY}var Cr=kh.prototype;ei.prototype={constructor:ei,select:Kq,selectAll:Xq,selectChild:Cr.selectChild,selectChildren:Cr.selectChildren,filter:Uq,merge:Wq,selection:Jq,transition:fY,call:Cr.call,nodes:Cr.nodes,node:Cr.node,size:Cr.size,empty:Cr.empty,each:Cr.each,on:qq,attr:Eq,attrTween:Nq,style:sY,styleTween:oY,text:cY,textTween:hY,remove:Gq,tween:yq,delay:Oq,duration:Lq,ease:$q,easeVarying:zq,end:pY,[Symbol.iterator]:Cr[Symbol.iterator]};function gY(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var bY={time:null,delay:0,duration:250,ease:gY};function xY(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function yY(t){var e,n;t instanceof ei?(e=t._id,t=t._name):(e=yN(),(n=bY).time=d1(),t=t==null?null:t+"");for(var s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&zm(l,t,e,c,o,n||xY(l,e));return new ei(s,this._parents,t,e)}kh.prototype.interrupt=gq;kh.prototype.transition=yY;function wY(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function E0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function fc(t){return t=E0(Math.abs(t)),t?t[1]:NaN}function vY(t,e){return function(n,s){for(var r=n.length,i=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>s&&(a=Math.max(1,s-l)),i.push(n.substring(r-=a,r+a)),!((l+=a+1)>s));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function SY(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var kY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function P0(t){if(!(e=kY.exec(t)))throw new Error("invalid format: "+t);var e;return new p1({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}P0.prototype=p1.prototype;function p1(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}p1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CY(t){e:for(var e=t.length,n=1,s=-1,r;n<e;++n)switch(t[n]){case".":s=r=n;break;case"0":s===0&&(s=n),r=n;break;default:if(!+t[n])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(r+1):t}var wN;function _Y(t,e){var n=E0(t,e);if(!n)return t+"";var s=n[0],r=n[1],i=r-(wN=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+E0(t,Math.max(0,e+i-1))[0]}function i_(t,e){var n=E0(t,e);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const o_={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:wY,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>i_(t*100,e),r:i_,s:_Y,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function a_(t){return t}var l_=Array.prototype.map,c_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function EY(t){var e=t.grouping===void 0||t.thousands===void 0?a_:vY(l_.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?a_:SY(l_.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=P0(d);var f=d.fill,p=d.align,m=d.sign,b=d.symbol,x=d.zero,g=d.width,y=d.comma,S=d.precision,w=d.trim,v=d.type;v==="n"?(y=!0,v="g"):o_[v]||(S===void 0&&(S=12),w=!0,v="g"),(x||f==="0"&&p==="=")&&(x=!0,f="0",p="=");var C=b==="$"?n:b==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_=b==="$"?s:/[%p]/.test(v)?o:"",P=o_[v],M=/[defgprs%]/.test(v);S=S===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function E(I){var O=C,j=_,U,A,L;if(v==="c")j=P(I)+j,I="";else{I=+I;var B=I<0||1/I<0;if(I=isNaN(I)?l:P(Math.abs(I),S),w&&(I=CY(I)),B&&+I==0&&m!=="+"&&(B=!1),O=(B?m==="("?m:a:m==="-"||m==="("?"":m)+O,j=(v==="s"?c_[8+wN/3]:"")+j+(B&&m==="("?")":""),M){for(U=-1,A=I.length;++U<A;)if(L=I.charCodeAt(U),48>L||L>57){j=(L===46?r+I.slice(U+1):I.slice(U))+j,I=I.slice(0,U);break}}}y&&!x&&(I=e(I,1/0));var F=O.length+I.length+j.length,$=F<g?new Array(g-F+1).join(f):"";switch(y&&x&&(I=e($+I,$.length?g-j.length:1/0),$=""),p){case"<":I=O+I+j+$;break;case"=":I=O+$+I+j;break;case"^":I=$.slice(0,F=$.length>>1)+O+I+j+$.slice(F);break;default:I=$+O+I+j;break}return i(I)}return E.toString=function(){return d+""},E}function u(d,f){var p=c((d=P0(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(fc(f)/3)))*3,b=Math.pow(10,-m),x=c_[8+m/3];return function(g){return p(b*g)+x}}return{format:c,formatPrefix:u}}var If,vN,SN;PY({thousands:",",grouping:[3],currency:["$",""]});function PY(t){return If=EY(t),vN=If.format,SN=If.formatPrefix,If}function TY(t){return Math.max(0,-fc(Math.abs(t)))}function MY(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fc(e)/3)))*3-fc(Math.abs(t)))}function IY(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,fc(e)-fc(t))+1}function m1(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const u_=Symbol("implicit");function kN(){var t=new BC,e=[],n=[],s=u_;function r(i){let o=t.get(i);if(o===void 0){if(s!==u_)return s;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return r.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new BC;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(i){return arguments.length?(n=Array.from(i),r):n.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return kN(e,n).unknown(s)},m1.apply(r,arguments),r}function CN(){var t=kN().unknown(void 0),e=t.domain,n=t.range,s=0,r=1,i,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,p=r<s,m=p?r:s,b=p?s:r;i=(b-m)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),m+=(b-m-i*(f-l))*u,o=i*(1-l),a&&(m=Math.round(m),o=Math.round(o));var x=HW(f).map(function(g){return m+i*g});return n(p?x.reverse():x)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([s,r]=f,s=+s,r=+r,d()):[s,r]},t.rangeRound=function(f){return[s,r]=f,s=+s,r=+r,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return CN(e(),[s,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},m1.apply(d(),arguments)}function NY(t){return function(){return t}}function DY(t){return+t}var d_=[0,1];function el(t){return t}function Dy(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:NY(isNaN(e)?NaN:.5)}function AY(t,e){var n;return t>e&&(n=t,t=e,e=n),function(s){return Math.max(t,Math.min(e,s))}}function OY(t,e,n){var s=t[0],r=t[1],i=e[0],o=e[1];return r<s?(s=Dy(r,s),i=n(o,i)):(s=Dy(s,r),i=n(i,o)),function(a){return i(s(a))}}function RY(t,e,n){var s=Math.min(t.length,e.length)-1,r=new Array(s),i=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<s;)r[o]=Dy(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=OW(t,a,1,s)-1;return i[l](r[l](a))}}function jY(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function LY(){var t=d_,e=d_,n=u1,s,r,i,o=el,a,l,c;function u(){var f=Math.min(t.length,e.length);return o!==el&&(o=AY(t[0],t[f-1])),a=f>2?RY:OY,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?i:(l||(l=a(t.map(s),e,n)))(s(o(f)))}return d.invert=function(f){return o(r((c||(c=a(e,t.map(s),Bs)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,DY),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=sq,u()},d.clamp=function(f){return arguments.length?(o=f?!0:el,u()):o!==el},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,p){return s=f,r=p,u()}}function FY(){return LY()(el,el)}function $Y(t,e,n,s){var r=UW(t,e,n),i;switch(s=P0(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return s.precision==null&&!isNaN(i=MY(r,o))&&(s.precision=i),SN(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=IY(r,Math.max(Math.abs(t),Math.abs(e))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=TY(r))&&(s.precision=i-(s.type==="%")*2);break}}return vN(s)}function BY(t){var e=t.domain;return t.ticks=function(n){var s=e();return zW(s[0],s[s.length-1],n??10)},t.tickFormat=function(n,s){var r=e();return $Y(r[0],r[r.length-1],n??10,s)},t.nice=function(n){n==null&&(n=10);var s=e(),r=0,i=s.length-1,o=s[r],a=s[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=i,i=c);u-- >0;){if(c=ky(o,a,n),c===l)return s[r]=o,s[i]=a,e(s);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function _N(){var t=FY();return t.copy=function(){return jY(t,_N())},m1.apply(t,arguments),BY(t)}function ku(t,e,n){this.k=t,this.x=e,this.y=n}ku.prototype={constructor:ku,scale:function(t){return t===1?this:new ku(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ku(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ku.prototype;function Aa({data:t,height:e=150,width:n=900,maxBars:s=60,getTimestamp:r=i=>i.timestamp||Date.now()}){const i=k.useRef(null),o=k.useRef(null),[a,l]=k.useState([]),c=k.useCallback(u=>r(u),[r]);return k.useEffect(()=>{if(t.length===0){l([]);return}const u=Date.now(),d=new Map;t.forEach(p=>{const m=c(p);if(!m||isNaN(m)||!isFinite(m))return;const b=Math.floor((u-m)/1e3);if(b>=0&&b<s){const x=d.get(b)||0;d.set(b,x+1)}});const f=[];for(let p=s-1;p>=0;p--)f.push({time:p,count:d.get(p)||0});l(f)},[t,s,c]),k.useEffect(()=>{if(!i.current||a.length===0)return;const u=Ef(i.current);u.selectAll("*").remove();const d={top:20,right:20,bottom:40,left:50},f=n-d.left-d.right,p=e-d.top-d.bottom,m=u.append("g").attr("transform",`translate(${d.left}, ${d.top})`),b=CN().domain(a.map((y,S)=>S.toString())).range([0,f]).padding(.1);WW(a,y=>y.count);const g=_N().domain([0,5]).range([p,0]).nice();return m.append("g").attr("transform",`translate(0, ${p})`).call(WC(b).tickValues(b.domain().filter((y,S)=>S%Math.ceil(s/10)===0)).tickFormat((y,S)=>{var _;const w=parseInt(y||"0"),v=((_=a[w])==null?void 0:_.time)||0;return v===0?"now":v<60?`-${v}s`:`-${Math.floor(v/60)}m`})).selectAll("text").attr("class","data-rate-axis-text"),m.append("g").call(QW(g).ticks(5)).selectAll("text").attr("class","data-rate-axis-text"),m.append("text").attr("class","data-rate-y-axis-label").attr("transform","rotate(-90)").attr("y",-35).attr("x",-p/2).attr("text-anchor","middle").text("Data Points/sec"),m.selectAll("rect").data(a).enter().append("rect").attr("x",(y,S)=>b(S.toString())||0).attr("y",y=>g(y.count)).attr("width",b.bandwidth()).attr("height",y=>p-g(y.count)).attr("fill",y=>y.count>=3.5?"#4CAF50":y.count>=2?"#FF9800":y.count>0?"#F44336":"#E0E0E0").attr("rx",2).style("opacity",.8).on("mouseover",function(y,S){var M;Ef(this).style("opacity",1),o.current&&o.current.remove();const v=Ef("body").append("div").attr("class","data-rate-tooltip").style("opacity",0),C=(M=i.current)==null?void 0:M.getBoundingClientRect(),[_,P]=AV(y,i.current);C&&v.style("left",`${C.left+_+10}px`).style("top",`${C.top+P-10}px`).text(`${S.count} data points ${S.time===0?"now":`${S.time}s ago`}`).transition().duration(200).style("opacity",1),o.current=v}).on("mouseout",function(){Ef(this).style("opacity",.8),o.current&&(o.current.transition().duration(200).style("opacity",0).remove(),o.current=null)}),m.append("g").attr("class","grid").attr("transform",`translate(0, ${p})`).call(WC(b).tickSize(-p).tickValues(b.domain().filter((y,S)=>S%Math.ceil(s/10)===0)).tickFormat(()=>"")).selectAll("line").attr("class","data-rate-grid-line"),()=>{o.current&&(o.current.remove(),o.current=null),OV(".data-rate-tooltip").remove()}},[a,n,e,s]),h.jsxs("div",{className:"data-rate-histogram-container",children:[h.jsx("h4",{className:"data-rate-histogram-title",children:"Data Rate (points/second)"}),h.jsx("svg",{ref:i,className:"data-rate-histogram-svg",width:n,height:e})]})}function zY(){const[t,e]=k.useState(Ec),[n,s]=k.useState(xh),[r,i]=k.useState(vm),[o,a]=k.useState(100),[l,c]=k.useState(10),{walletAddress:u,authToken:d,error:f}=Sa(),{markets:p,selectedMarketId:m,setSelectedMarketId:b,fetchMarkets:x,loadingMarkets:g,getMarket:y}=co({baseURL:t,sessionToken:d,autoFetchMarkets:!0}),[S,w]=k.useState("0"),[v,C]=k.useState("1m"),[_,P]=k.useState("0"),[M,E]=k.useState("BTC/USDC");k.useEffect(()=>{if(m){const H=String(m);w(H),P(H);const J=typeof m=="string"?parseInt(m,10):Number(m);if(!isNaN(J)&&isFinite(J)){const we=y(J);we&&E(we.symbol||`${we.baseAsset}/${we.quoteAsset}`)}}},[m,y]);const[I,O]=k.useState(null),[j,U]=k.useState("Data Details"),[A,L]=k.useState(!1),{klineData:B,loading:F,error:$,isConnected:D}=IL({baseURL:t,wsURL:n,marketId:S,interval:v,authToken:d,walletAddress:u,deviceID:r,maxDataPoints:o}),{lastPrice:z,markPrice:R,error:T,isConnected:X}=wm({baseURL:t,wsURL:n,marketId:_,symbol:M,authToken:d,walletAddress:u,deviceID:r}),[ne,q]=k.useState([]),[Z,G]=k.useState([]);k.useEffect(()=>{z&&q(H=>{const J=[...H,{...z,value:z.price,timestamp:z.timestamp,arrivalTime:Date.now(),raw:z}];return J.length>o?J.slice(-o):J})},[z,o]),k.useEffect(()=>{R&&G(H=>{const J=[...H,{...R,value:R.mark_price,timestamp:R.timestamp,arrivalTime:Date.now(),raw:R}];return J.length>o?J.slice(-o):J})},[R,o]);const{buckets:se,loading:ae,error:Ne,refresh:ke}=N5({baseURL:t,authToken:d,walletAddress:u,refreshInterval:5e3}),{positions:Ee,loading:Ue,error:st,isConnected:N,refresh:de}=I5({baseURL:t,wsURL:n,authToken:d,walletAddress:u,deviceID:r,useWebSocket:!0}),{orders:be,loading:re,error:_e,isConnected:ee,refresh:W}=VI({baseURL:t,wsURL:n,authToken:d,walletAddress:u,deviceID:r,useWebSocket:!0}),Q=(H,J)=>{O(H.raw||H),U(J),L(!0)};return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"Hooks Test QA"}),h.jsx("p",{children:"realtime monitor of data flow and block"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{className:"hooks-test-section-header",children:"Shared Configuration"}),h.jsxs("div",{className:"hooks-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["API Base URL:",h.jsx("input",{type:"text",className:"hooks-test-input",value:t,onChange:H=>e(H.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["WebSocket URL:",h.jsx("input",{type:"text",className:"hooks-test-input",value:n,onChange:H=>s(H.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Wallet Address (from useOnboard):",h.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:u||"",readOnly:!0,placeholder:"Set via useOnboard hook"}),f&&h.jsx("div",{className:"hooks-test-error-message",children:f})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Auth Token (from useOnboard):",h.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:d||"",readOnly:!0,placeholder:"Set via useOnboard hook"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market Selection:",h.jsxs("select",{className:"hooks-test-select",value:m||"",onChange:H=>{const J=H.target.value;J&&b(J)},children:[h.jsx("option",{value:"",children:"Select a market..."}),p.map(H=>h.jsxs("option",{value:String(H.market_id),children:[H.symbol||`${H.baseAsset}/${H.quoteAsset}`," ","(ID: ",H.market_id,")"]},H.market_id))]}),g&&h.jsx("div",{className:"hooks-test-info-message",children:"Loading markets..."}),!g&&p.length===0&&h.jsx("button",{className:"hooks-test-button",onClick:()=>x(),style:{marginTop:"0.5rem"},children:"Fetch Markets"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Device ID:",h.jsx("input",{type:"text",className:"hooks-test-input",value:r,onChange:H=>i(H.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Max Data Points (Memory):",h.jsx("input",{type:"number",className:"hooks-test-input",value:o,onChange:H=>a(Math.max(10,parseInt(H.target.value)||100)),min:"10"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Max Visible Rectangles:",h.jsx("input",{type:"number",className:"hooks-test-input",value:l,onChange:H=>c(Math.max(1,parseInt(H.target.value)||10)),min:"1"})]})})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Kline Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${D?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:D?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[B.length," data points"]})]})]}),h.jsxs("div",{className:"hooks-test-form-grid",children:[h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",h.jsx("input",{type:"text",className:"hooks-test-input",value:S,onChange:H=>w(H.target.value),placeholder:"Select market from dropdown above",style:{backgroundColor:m?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Interval:",h.jsxs("select",{className:"hooks-test-select",value:v,onChange:H=>C(H.target.value),children:[h.jsx("option",{value:"1m",children:"1m"}),h.jsx("option",{value:"5m",children:"5m"}),h.jsx("option",{value:"15m",children:"15m"}),h.jsx("option",{value:"1h",children:"1h"}),h.jsx("option",{value:"4h",children:"4h"}),h.jsx("option",{value:"1d",children:"1d"})]})]})})]}),$&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",$]}),F&&B.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading kline data..."}):B.length===0?h.jsx("div",{className:"hooks-test-empty-state",children:"No kline data available"}):h.jsxs(h.Fragment,{children:[h.jsx(Da,{data:B,maxVisible:l,maxDataPoints:o,getValue:H=>H.close||H.high||100,onItemClick:H=>Q(H,"Kline Data")}),h.jsx(Aa,{data:B,getTimestamp:H=>{let J=H.timestamp||H.open_time||Date.now();return J<9466848e5&&(J=J*1e3),J}})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Mark Price Hook"}),h.jsx("span",{className:`hooks-test-status-badge ${X?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:X?"WS Connected":"WS Disconnected"})]}),h.jsx("div",{className:"hooks-test-form-grid",children:h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Symbol (auto-updated from selected market):",h.jsx("input",{type:"text",className:"hooks-test-input",value:M,onChange:H=>E(H.target.value),placeholder:"BTC/USDC",style:{backgroundColor:m?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),T&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",T]}),Z.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No mark price data available"}):h.jsxs(h.Fragment,{children:[h.jsx(Da,{data:Z,maxVisible:l,maxDataPoints:o,getValue:H=>H.value||H.mark_price||100,onItemClick:H=>Q(H,"Mark Price Data")}),h.jsx(Aa,{data:Z,getTimestamp:H=>H.arrivalTime||H.timestamp||Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Last Price Hook"}),h.jsx("span",{className:`hooks-test-status-badge ${X?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:X?"WS Connected":"WS Disconnected"})]}),h.jsx("div",{className:"hooks-test-form-grid",children:h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",h.jsx("input",{type:"text",className:"hooks-test-input",value:_,onChange:H=>P(H.target.value),placeholder:"Select market from dropdown above",style:{backgroundColor:m?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),T&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",T]}),ne.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No last price data available"}):h.jsxs(h.Fragment,{children:[h.jsx(Da,{data:ne,maxVisible:l,maxDataPoints:o,getValue:H=>H.value||H.price||100,onItemClick:H=>Q(H,"Last Price Data")}),h.jsx(Aa,{data:ne,getTimestamp:H=>H.arrivalTime||H.timestamp||Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Bucket Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[se.length," buckets"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>ke(),disabled:ae,children:ae?"Loading...":"Refresh"})]})]}),Ne&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",Ne]}),ae&&se.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading buckets..."}):se.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No buckets found"}):h.jsxs(h.Fragment,{children:[h.jsx(Da,{data:se,maxVisible:l,maxDataPoints:o,getValue:H=>H.totalMargin||H.unrealizedPnL||100,onItemClick:H=>Q(H,"Bucket Data")}),h.jsx(Aa,{data:se,getTimestamp:H=>H.createdAt?new Date(H.createdAt).getTime():Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Position Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${N?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:N?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[Ee.length," positions"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>de(),disabled:Ue,children:Ue?"Loading...":"Refresh"})]})]}),st&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",st]}),Ue&&Ee.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading positions..."}):Ee.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No positions found"}):h.jsxs(h.Fragment,{children:[h.jsx(Da,{data:Ee,maxVisible:l,maxDataPoints:o,getValue:H=>H.size||H.margin||100,onItemClick:H=>Q(H,"Position Data")}),h.jsx(Aa,{data:Ee,getTimestamp:H=>Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Order Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${ee?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:ee?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[be.length," orders"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>W(),disabled:re,children:re?"Loading...":"Refresh"})]})]}),_e&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",_e]}),re&&be.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading orders..."}):be.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No orders found"}):h.jsxs(h.Fragment,{children:[h.jsx(Da,{data:be,maxVisible:l,maxDataPoints:o,getValue:H=>H.quantity||H.price||100,onItemClick:H=>Q(H,"Order Data")}),h.jsx(Aa,{data:be,getTimestamp:H=>H.createdAt?typeof H.createdAt=="number"?H.createdAt:new Date(H.createdAt).getTime():H.updatedAt?typeof H.updatedAt=="number"?H.updatedAt:new Date(H.updatedAt).getTime():Date.now()})]})]}),h.jsx(MW,{data:I,isOpen:A,onClose:()=>L(!1),title:j})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function _h(t){return t+.5|0}const Li=(t,e,n)=>Math.max(Math.min(t,n),e);function Cu(t){return Li(_h(t*2.55),0,255)}function Ki(t){return Li(_h(t*255),0,255)}function Dr(t){return Li(_h(t/2.55)/100,0,1)}function h_(t){return Li(_h(t*100),0,100)}const ds={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ay=[..."0123456789ABCDEF"],UY=t=>Ay[t&15],WY=t=>Ay[(t&240)>>4]+Ay[t&15],Nf=t=>(t&240)>>4===(t&15),HY=t=>Nf(t.r)&&Nf(t.g)&&Nf(t.b)&&Nf(t.a);function VY(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ds[t[1]]*17,g:255&ds[t[2]]*17,b:255&ds[t[3]]*17,a:e===5?ds[t[4]]*17:255}:(e===7||e===9)&&(n={r:ds[t[1]]<<4|ds[t[2]],g:ds[t[3]]<<4|ds[t[4]],b:ds[t[5]]<<4|ds[t[6]],a:e===9?ds[t[7]]<<4|ds[t[8]]:255})),n}const qY=(t,e)=>t<255?e(t):"";function YY(t){var e=HY(t)?UY:WY;return t?"#"+e(t.r)+e(t.g)+e(t.b)+qY(t.a,e):void 0}const GY=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function EN(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function KY(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function XY(t,e,n){const s=EN(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function QY(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function g1(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=QY(n,s,r,u,i),l=l*60+.5),[l|0,c||0,a]}function b1(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(Ki)}function x1(t,e,n){return b1(EN,t,e,n)}function JY(t,e,n){return b1(XY,t,e,n)}function ZY(t,e,n){return b1(KY,t,e,n)}function PN(t){return(t%360+360)%360}function eG(t){const e=GY.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Cu(+e[5]):Ki(+e[5]));const r=PN(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=JY(r,i,o):e[1]==="hsv"?s=ZY(r,i,o):s=x1(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function tG(t,e){var n=g1(t);n[0]=PN(n[0]+e),n=x1(n),t.r=n[0],t.g=n[1],t.b=n[2]}function nG(t){if(!t)return;const e=g1(t),n=e[0],s=h_(e[1]),r=h_(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${Dr(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const f_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},p_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sG(){const t={},e=Object.keys(p_),n=Object.keys(f_);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,f_[i]);i=parseInt(p_[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Df;function rG(t){Df||(Df=sG(),Df.transparent=[0,0,0,0]);const e=Df[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const iG=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function oG(t){const e=iG.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?Cu(o):Li(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?Cu(s):Li(s,0,255)),r=255&(e[4]?Cu(r):Li(r,0,255)),i=255&(e[6]?Cu(i):Li(i,0,255)),{r:s,g:r,b:i,a:n}}}function aG(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Dr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Ob=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Oa=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function lG(t,e,n){const s=Oa(Dr(t.r)),r=Oa(Dr(t.g)),i=Oa(Dr(t.b));return{r:Ki(Ob(s+n*(Oa(Dr(e.r))-s))),g:Ki(Ob(r+n*(Oa(Dr(e.g))-r))),b:Ki(Ob(i+n*(Oa(Dr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Af(t,e,n){if(t){let s=g1(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=x1(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function TN(t,e){return t&&Object.assign(e||{},t)}function m_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ki(t[3]))):(e=TN(t,{r:0,g:0,b:0,a:1}),e.a=Ki(e.a)),e}function cG(t){return t.charAt(0)==="r"?oG(t):eG(t)}class qd{constructor(e){if(e instanceof qd)return e;const n=typeof e;let s;n==="object"?s=m_(e):n==="string"&&(s=VY(e)||rG(e)||cG(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=TN(this._rgb);return e&&(e.a=Dr(e.a)),e}set rgb(e){this._rgb=m_(e)}rgbString(){return this._valid?aG(this._rgb):void 0}hexString(){return this._valid?YY(this._rgb):void 0}hslString(){return this._valid?nG(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=lG(this._rgb,e._rgb,n)),this}clone(){return new qd(this.rgb)}alpha(e){return this._rgb.a=Ki(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=_h(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Af(this._rgb,2,e),this}darken(e){return Af(this._rgb,2,-e),this}saturate(e){return Af(this._rgb,1,e),this}desaturate(e){return Af(this._rgb,1,-e),this}rotate(e){return tG(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function _r(){}const uG=(()=>{let t=0;return()=>t++})();function vt(t){return t==null}function Pt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ze(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function qn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function er(t,e){return qn(t)?t:e}function Qe(t,e){return typeof t>"u"?e:t}const dG=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,MN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function gt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ft(t,e,n,s){let r,i,o;if(Pt(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(Ze(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function T0(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function M0(t){if(Pt(t))return t.map(M0);if(Ze(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=M0(t[n[r]]);return e}return t}function IN(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function hG(t,e,n,s){if(!IN(t))return;const r=e[t],i=n[t];Ze(r)&&Ze(i)?Yd(r,i,s):e[t]=M0(i)}function Yd(t,e,n){const s=Pt(e)?e:[e],r=s.length;if(!Ze(t))return t;n=n||{};const i=n.merger||hG;let o;for(let a=0;a<r;++a){if(o=s[a],!Ze(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Ku(t,e){return Yd(t,e,{merger:fG})}function fG(t,e,n){if(!IN(t))return;const s=e[t],r=n[t];Ze(s)&&Ze(r)?Ku(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=M0(r))}const g_={"":t=>t,x:t=>t.x,y:t=>t.y};function pG(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function mG(t){const e=pG(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function Gd(t,e){return(g_[e]||(g_[e]=mG(e)))(t)}function y1(t){return t.charAt(0).toUpperCase()+t.slice(1)}const rs=t=>typeof t<"u",Hn=t=>typeof t=="function",b_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function gG(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ht=Math.PI,ln=2*ht,bG=ln+ht,I0=Number.POSITIVE_INFINITY,w1=ht/180,cn=ht/2,ys=ht/4,N0=ht*2/3,NN=Math.log10,pc=Math.sign;function Xu(t,e,n){return Math.abs(t-e)<n}function x_(t){const e=Math.round(t);t=Xu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(NN(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function xG(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function yG(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function pa(t){return!yG(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function wG(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function vG(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Zt(t){return t*(ht/180)}function DN(t){return t*(180/ht)}function y_(t){if(!qn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Oy(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*ht&&(i+=ln),{angle:i,distance:r}}function mc(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function SG(t,e){return(t-e+bG)%ln-ht}function gi(t){return(t%ln+ln)%ln}function D0(t,e,n,s){const r=gi(t),i=gi(e),o=gi(n),a=gi(i-r),l=gi(o-r),c=gi(r-i),u=gi(r-o);return r===i||r===o||s&&i===o||a>l&&c<u}function ks(t,e,n){return Math.max(e,Math.min(n,t))}function kG(t){return ks(t,-32768,32767)}function _u(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function v1(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Oo=(t,e,n,s)=>v1(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),CG=(t,e,n)=>v1(t,n,s=>t[s][e]>=n);function _G(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const AN=["push","pop","shift","splice","unshift"];function EG(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),AN.forEach(n=>{const s="_onData"+y1(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function w_(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(AN.forEach(i=>{delete t[i]}),delete t._chartjs)}function PG(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ON=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function RN(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,ON.call(window,()=>{s=!1,t.apply(e,n)}))}}function TG(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const S1=t=>t==="start"?"left":t==="end"?"right":"center",gn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,MG=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function IG(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(r=Math.min(Oo(l,u,d).lo,n?s:Oo(e,u,o.getPixelForValue(d)).lo),c){const b=l.slice(0,r+1).reverse().findIndex(x=>!vt(x[a.axis]));r-=Math.max(0,b)}r=ks(r,0,s-1)}if(m){let b=Math.max(Oo(l,o.axis,f,!0).hi+1,n?0:Oo(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const x=l.slice(b-1).findIndex(g=>!vt(g[a.axis]));b+=Math.max(0,x)}i=ks(b,r,s)-r}else i=s-r}return{start:r,count:i}}function NG(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const Of=t=>t===0||t===1,v_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ln/n)),S_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ln/n)+1,Qu={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*cn)+1,easeOutSine:t=>Math.sin(t*cn),easeInOutSine:t=>-.5*(Math.cos(ht*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Of(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Of(t)?t:v_(t,.075,.3),easeOutElastic:t=>Of(t)?t:S_(t,.075,.3),easeInOutElastic(t){return Of(t)?t:t<.5?.5*v_(t*2,.1125,.45):.5+.5*S_(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Qu.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Qu.easeInBounce(t*2)*.5:Qu.easeOutBounce(t*2-1)*.5+.5};function k1(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function k_(t){return k1(t)?t:new qd(t)}function Rb(t){return k1(t)?t:new qd(t).saturate(.5).darken(.1).hexString()}const DG=["x","y","borderWidth","radius","tension"],AG=["color","borderColor","backgroundColor"];function OG(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:AG},numbers:{type:"number",properties:DG}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function RG(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const C_=new Map;function jG(t,e){e=e||{};const n=t+JSON.stringify(e);let s=C_.get(n);return s||(s=new Intl.NumberFormat(t,e),C_.set(n,s)),s}function C1(t,e,n){return jG(e,n).format(t)}const LG={values(t){return Pt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=FG(t,n)}const o=NN(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),C1(t,s,l)}};function FG(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var jN={formatters:LG};function $G(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:jN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ma=Object.create(null),Ry=Object.create(null);function Ju(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function jb(t,e,n){return typeof e=="string"?Yd(Ju(t,e),n):Yd(Ju(t,""),e)}class BG{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>Rb(r.backgroundColor),this.hoverBorderColor=(s,r)=>Rb(r.borderColor),this.hoverColor=(s,r)=>Rb(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return jb(this,e,n)}get(e){return Ju(this,e)}describe(e,n){return jb(Ry,e,n)}override(e,n){return jb(ma,e,n)}route(e,n,s,r){const i=Ju(this,e),o=Ju(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Ze(l)?Object.assign({},c,l):Qe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ot=new BG({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[OG,RG,$G]);function zG(t){return!t||vt(t.size)||vt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function __(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function go(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function E_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function jy(t,e,n,s){LN(t,e,n,s,null)}function LN(t,e,n,s,r){let i,o,a,l,c,u,d,f;const p=e.pointStyle,m=e.rotation,b=e.radius;let x=(m||0)*w1;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(x),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),p){default:r?t.ellipse(n,s,r/2,b,0,0,ln):t.arc(n,s,b,0,ln),t.closePath();break;case"triangle":u=r?r/2:b,t.moveTo(n+Math.sin(x)*u,s-Math.cos(x)*b),x+=N0,t.lineTo(n+Math.sin(x)*u,s-Math.cos(x)*b),x+=N0,t.lineTo(n+Math.sin(x)*u,s-Math.cos(x)*b),t.closePath();break;case"rectRounded":c=b*.516,l=b-c,o=Math.cos(x+ys)*l,d=Math.cos(x+ys)*(r?r/2-c:l),a=Math.sin(x+ys)*l,f=Math.sin(x+ys)*(r?r/2-c:l),t.arc(n-d,s-a,c,x-ht,x-cn),t.arc(n+f,s-o,c,x-cn,x),t.arc(n+d,s+a,c,x,x+cn),t.arc(n-f,s+o,c,x+cn,x+ht),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*b,u=r?r/2:l,t.rect(n-u,s-l,2*u,2*l);break}x+=ys;case"rectRot":d=Math.cos(x)*(r?r/2:b),o=Math.cos(x)*b,a=Math.sin(x)*b,f=Math.sin(x)*(r?r/2:b),t.moveTo(n-d,s-a),t.lineTo(n+f,s-o),t.lineTo(n+d,s+a),t.lineTo(n-f,s+o),t.closePath();break;case"crossRot":x+=ys;case"cross":d=Math.cos(x)*(r?r/2:b),o=Math.cos(x)*b,a=Math.sin(x)*b,f=Math.sin(x)*(r?r/2:b),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"star":d=Math.cos(x)*(r?r/2:b),o=Math.cos(x)*b,a=Math.sin(x)*b,f=Math.sin(x)*(r?r/2:b),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o),x+=ys,d=Math.cos(x)*(r?r/2:b),o=Math.cos(x)*b,a=Math.sin(x)*b,f=Math.sin(x)*(r?r/2:b),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(x)*b,a=Math.sin(x)*b,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(x)*(r?r/2:b),s+Math.sin(x)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Kd(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Um(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Wm(t){t.restore()}function UG(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function WG(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function HG(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),vt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function VG(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function qG(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Xd(t,e,n,s,r,i={}){const o=Pt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,HG(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&qG(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),vt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,s,i.maxWidth)),t.fillText(c,n,s,i.maxWidth),VG(t,n,s,c,i),s+=Number(r.lineHeight);t.restore()}function A0(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*ht,ht,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,ht,cn,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,cn,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-cn,!0),t.lineTo(n+o.topLeft,s)}const YG=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,GG=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function KG(t,e){const n=(""+t).match(YG);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const XG=t=>+t||0;function FN(t,e){const n={},s=Ze(e),r=s?Object.keys(e):e,i=Ze(t)?s?o=>Qe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=XG(i(o));return n}function QG(t){return FN(t,{top:"y",right:"x",bottom:"y",left:"x"})}function hl(t){return FN(t,["topLeft","topRight","bottomLeft","bottomRight"])}function yn(t){const e=QG(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function qt(t,e){t=t||{},e=e||Ot.font;let n=Qe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Qe(t.style,e.style);s&&!(""+s).match(GG)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Qe(t.family,e.family),lineHeight:KG(Qe(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Qe(t.weight,e.weight),string:""};return r.string=zG(r),r}function Rf(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function JG(t,e,n){const{min:s,max:r}=t,i=MN(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Ca(t,e){return Object.assign(Object.create(t),e)}function _1(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=UN("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>_1([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return BN(a,l,()=>oK(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return T_(a).includes(l)},ownKeys(a){return T_(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function gc(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:$N(t,s),setContext:i=>gc(t,i,n,s),override:i=>gc(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return BN(i,o,()=>eK(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function $N(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Hn(n)?n:()=>n,isIndexable:Hn(s)?s:()=>s}}const ZG=(t,e)=>t?t+y1(e):e,E1=(t,e)=>Ze(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function BN(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function eK(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return Hn(a)&&o.isScriptable(e)&&(a=tK(e,a,t,n)),Pt(a)&&a.length&&(a=nK(e,a,t,o.isIndexable)),E1(e,a)&&(a=gc(a,r,i&&i[e],o)),a}function tK(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),E1(t,l)&&(l=P1(r._scopes,r,t,l)),l}function nK(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Ze(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=P1(c,r,t,u);e.push(gc(d,i,o&&o[t],a))}}return e}function zN(t,e,n){return Hn(t)?t(e,n):t}const sK=(t,e)=>t===!0?e:typeof t=="string"?Gd(e,t):void 0;function rK(t,e,n,s,r){for(const i of e){const o=sK(n,i);if(o){t.add(o);const a=zN(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function P1(t,e,n,s){const r=e._rootScopes,i=zN(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=P_(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=P_(a,o,i,l,s),l===null)?!1:_1(Array.from(a),[""],r,i,()=>iK(e,n,s))}function P_(t,e,n,s,r){for(;n;)n=rK(t,e,n,s,r);return n}function iK(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return Pt(r)&&Ze(n)?n:r||{}}function oK(t,e,n,s){let r;for(const i of e)if(r=UN(ZG(i,t),n),typeof r<"u")return E1(t,r)?P1(n,s,t,r):r}function UN(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function T_(t){let e=t._keys;return e||(e=t._keys=aK(t._scopes)),e}function aK(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const lK=Number.EPSILON||1e-14,bc=(t,e)=>e<t.length&&!t[e].skip&&t[e],WN=t=>t==="x"?"y":"x";function cK(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=mc(i,r),l=mc(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,f=s*u;return{previous:{x:i.x-d*(o.x-r.x),y:i.y-d*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function uK(t,e,n){const s=t.length;let r,i,o,a,l,c=bc(t,0);for(let u=0;u<s-1;++u)if(l=c,c=bc(t,u+1),!(!l||!c)){if(Xu(e[u],0,lK)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=i*o*e[u])}}function dK(t,e,n="x"){const s=WN(n),r=t.length;let i,o,a,l=bc(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=bc(t,c+1),!a)continue;const u=a[n],d=a[s];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${s}`]=d-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${s}`]=d+i*e[c])}}function hK(t,e="x"){const n=WN(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=bc(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=bc(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?pc(r[o-1])!==pc(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}uK(t,r,i),dK(t,i,e)}function jf(t,e,n){return Math.max(Math.min(t,n),e)}function fK(t,e){let n,s,r,i,o,a=Kd(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&Kd(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=jf(r.cp1x,e.left,e.right),r.cp1y=jf(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=jf(r.cp2x,e.left,e.right),r.cp2y=jf(r.cp2y,e.top,e.bottom)))}function pK(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")hK(t,r);else{let c=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=cK(c,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&fK(t,n)}function T1(){return typeof window<"u"&&typeof document<"u"}function M1(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function O0(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Hm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function mK(t,e){return Hm(t).getPropertyValue(e)}const gK=["top","right","bottom","left"];function Jo(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=gK[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const bK=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function xK(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(bK(r,i,t.target))a=r,l=i;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function So(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=Hm(n),i=r.boxSizing==="border-box",o=Jo(r,"padding"),a=Jo(r,"border","width"),{x:l,y:c,box:u}=xK(t,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:m}=e;return i&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/p*n.width/s),y:Math.round((c-f)/m*n.height/s)}}function yK(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&M1(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Hm(i),l=Jo(a,"border","width"),c=Jo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=O0(a.maxWidth,i,"clientWidth"),r=O0(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||I0,maxHeight:r||I0}}const Fi=t=>Math.round(t*10)/10;function wK(t,e,n,s){const r=Hm(t),i=Jo(r,"margin"),o=O0(r.maxWidth,t,"clientWidth")||I0,a=O0(r.maxHeight,t,"clientHeight")||I0,l=yK(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=Jo(r,"border","width"),p=Jo(r,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=Fi(Math.min(c,o,l.maxWidth)),u=Fi(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Fi(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=Fi(Math.floor(u*s))),{width:c,height:u}}function M_(t,e,n){const s=e||1,r=Fi(t.height*s),i=Fi(t.width*s);t.height=Fi(t.height),t.width=Fi(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const vK=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};T1()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function I_(t,e){const n=mK(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function ko(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function SK(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function kK(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=ko(t,r,n),a=ko(r,i,n),l=ko(i,e,n),c=ko(o,a,n),u=ko(a,l,n);return ko(c,u,n)}const CK=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},_K=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function fl(t,e,n){return t?CK(e,n):_K()}function HN(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function VN(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function qN(t){return t==="angle"?{between:D0,compare:SG,normalize:gi}:{between:_u,compare:(e,n)=>e-n,normalize:e=>e}}function N_({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function EK(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=qN(s),l=e.length;let{start:c,end:u,loop:d}=t,f,p;if(d){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(e[c%l][s]),r,i);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function PK(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=qN(s),{start:u,end:d,loop:f,style:p}=EK(t,e,n),m=[];let b=!1,x=null,g,y,S;const w=()=>l(r,S,g)&&a(r,S)!==0,v=()=>a(i,g)===0||l(i,S,g),C=()=>b||w(),_=()=>!b||v();for(let P=u,M=u;P<=d;++P)y=e[P%o],!y.skip&&(g=c(y[s]),g!==S&&(b=l(g,r,i),x===null&&C()&&(x=a(g,r)===0?P:M),x!==null&&_()&&(m.push(N_({start:x,end:P,loop:f,count:o,style:p})),x=null),M=P,S=g));return x!==null&&m.push(N_({start:x,end:d,loop:f,count:o,style:p})),m}function TK(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=PK(s[r],t.points,e);i.length&&n.push(...i)}return n}function MK(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function IK(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function NK(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=MK(n,r,i,s);if(s===!0)return D_(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return D_(t,IK(n,o,l,c),n,e)}function D_(t,e,n,s){return!s||!s.setContext||!n?e:DK(t,e,n,s)}function DK(t,e,n,s){const r=t._chart.getContext(),i=A_(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,d=e[0].start,f=d;function p(m,b,x,g){const y=a?-1:1;if(m!==b){for(m+=l;n[m%l].skip;)m-=y;for(;n[b%l].skip;)b+=y;m%l!==b%l&&(c.push({start:m%l,end:b%l,loop:x,style:g}),u=g,d=b%l)}}for(const m of e){d=a?d:m.start;let b=n[d%l],x;for(f=d+1;f<=m.end;f++){const g=n[f%l];x=A_(s.setContext(Ca(r,{type:"segment",p0:b,p1:g,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),AK(x,u)&&p(d,f-1,m.loop,u),b=g,u=x}d<f-1&&p(d,f-1,m.loop,u)}return c}function A_(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function AK(t,e){if(!e)return!1;const n=[],s=function(r,i){return k1(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function Lf(t,e,n){return t.options.clip?t[n]:e[n]}function OK(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Lf(n,e,"left"),right:Lf(n,e,"right"),top:Lf(s,e,"top"),bottom:Lf(s,e,"bottom")}:e}function RK(t,e){const n=e._clip;if(n.disabled)return!1;const s=OK(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class jK{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ON.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Pr=new jK;const O_="transparent",LK={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=k_(t||O_),r=s.valid&&k_(e||O_);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class FK{constructor(e,n,s,r){const i=n[s];r=Rf([e.to,r,i,e.from]);const o=Rf([e.from,i,r]);this._active=!0,this._fn=e.fn||LK[e.type||typeof o],this._easing=Qu[e.easing]||Qu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Rf([e.to,n,r,e.from]),this._from=Rf([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class I1{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ze(e))return;const n=Object.keys(Ot.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!Ze(i))return;const o={};for(const a of n)o[a]=i[a];(Pt(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=BK(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&$K(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let d=i[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}i[c]=d=new FK(f,e,c,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return Pr.add(this._chart,s),!0}}function $K(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function BK(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function R_(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function zK(t,e,n){if(n===!1)return!1;const s=R_(t,n),r=R_(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function UK(t){let e,n,s,r;return Ze(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function YN(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function j_(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],qn(c)&&(i||e===0||pc(e)===pc(c))&&(e+=c)}return!u&&!s.all?0:e}function WK(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[i]:t[u]};return a}function Lb(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function HK(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function VK(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function qK(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function L_(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function F_(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,u=HK(i,o,s),d=e.length;let f;for(let p=0;p<d;++p){const m=e[p],{[l]:b,[c]:x}=m,g=m._stacks||(m._stacks={});f=g[c]=qK(r,u,b),f[a]=x,f._top=L_(f,o,!0,s.type),f._bottom=L_(f,o,!1,s.type);const y=f._visualValues||(f._visualValues={});y[a]=x}}function Fb(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function YK(t,e){return Ca(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function GK(t,e,n){return Ca(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function su(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const $b=t=>t==="reset"||t==="none",$_=(t,e)=>e?t:Object.assign({},t),KK=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:YN(n,!0),values:null};class pl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Lb(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&su(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(d,f,p,m)=>d==="x"?f:d==="r"?m:p,i=n.xAxisID=Qe(s.xAxisID,Fb(e,"x")),o=n.yAxisID=Qe(s.yAxisID,Fb(e,"y")),a=n.rAxisID=Qe(s.rAxisID,Fb(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),u=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&w_(this._data,this),e._stacked&&su(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Ze(n)){const r=this._cachedMeta;this._data=WK(n,r)}else if(s!==n){if(s){w_(s,this);const r=this._cachedMeta;su(r),r._parsed=[]}n&&Object.isExtensible(n)&&EG(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=Lb(n.vScale,n),n.stack!==s.stack&&(r=!0,su(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(F_(this,n._parsed),n._stacked=Lb(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,d,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{Pt(r[e])?f=this.parseArrayData(s,r,e,n):Ze(r[e])?f=this.parseObjectData(s,r,e,n):f=this.parsePrimitiveData(s,r,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=d=f[u],l&&(p()&&(l=!1),c=d);s._sorted=l}o&&F_(this,f)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,d=new Array(r);let f,p,m;for(f=0,p=r;f<p;++f)m=f+s,d[f]={[a]:u||i.parse(c[m],m),[l]:o.parse(n[m],m)};return d}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,c,u,d;for(l=0,c=r;l<c;++l)u=l+s,d=n[u],a[l]={x:i.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,d,f,p;for(u=0,d=r;u<d;++u)f=u+s,p=n[f],c[u]={x:i.parse(Gd(p,a),f),y:o.parse(Gd(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:YN(r,!0),values:n._stacks[e.axis]._visualValues};return j_(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=j_(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=KK(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=VK(a);let f,p;function m(){p=r[f];const b=p[a.axis];return!qn(p[e.axis])||u>b||d<b}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],qn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=UK(Qe(this.options.clip,zK(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const d=r[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=GK(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=YK(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&rs(s);if(a)return $_(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(Ot.elements[e]),m=()=>this.getContext(s,r,n),b=c.resolveNamedOptions(f,p,m,d);return b.$shared&&(b.$shared=l,i[o]=Object.freeze($_(b,l))),b}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,s,n))}const c=new I1(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||$b(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){$b(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!$b(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&su(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ce(pl,"defaults",{}),ce(pl,"datasetElementType",null),ce(pl,"dataElementType",null);function XK(t,e,n){let s=1,r=1,i=0,o=0;if(e<ln){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),p=(S,w,v)=>D0(S,a,l,!0)?1:Math.max(w,w*n,v,v*n),m=(S,w,v)=>D0(S,a,l,!0)?-1:Math.min(w,w*n,v,v*n),b=p(0,c,d),x=p(cn,u,f),g=m(ht,c,d),y=m(ht+cn,u,f);s=(b-g)/2,r=(x-y)/2,i=-(b+g)/2,o=-(x+y)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class Eu extends pl{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(Ze(s[e])){const{key:l="value"}=this._parsing;i=c=>+Gd(s[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Zt(this.options.rotation-90)}_getCircumference(){return Zt(this.options.circumference)}_getRotationExtents(){let e=ln,n=-ln;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(dG(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:b}=XK(d,u,l),x=(s.width-o)/f,g=(s.height-o)/p,y=Math.max(Math.min(x,g)/2,0),S=MN(this.options.radius,y),w=Math.max(S*l,0),v=(S-w)/this._getVisibleDatasetWeightTotal();this.offsetX=m*S,this.offsetY=b*S,r.total=this.calculateTotal(),this.outerRadius=S-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/ln)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=i&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:b,includeOptions:x}=this._getSharedOptions(n,r);let g=this._getRotation(),y;for(y=0;y<n;++y)g+=this._circumference(y,i);for(y=n;y<n+s;++y){const S=this._circumference(y,i),w=e[y],v={x:u+this.offsetX,y:d+this.offsetY,startAngle:g,endAngle:g+S,circumference:S,outerRadius:m,innerRadius:p};x&&(v.options=b||this.resolveDataElementOptions(y,w.active?"active":r)),g+=S,this.updateElement(w,y,v,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ln*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=C1(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Qe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ce(Eu,"id","doughnut"),ce(Eu,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ce(Eu,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ce(Eu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class wp extends pl{getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:i}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=i.getLabelForValue(o.y);return{label:s[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,r=this.chart._animationsDisabled;let{start:i,count:o}=IG(n,s,r);if(this._drawStart=i,this._drawCount=o,NG(n)&&(i=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,r),d=this.getSharedOptions(u),f=this.includeOptions(r,d),p=o.axis,m=a.axis,{spanGaps:b,segment:x}=this.options,g=pa(b)?b:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||r==="none";let S=n>0&&this.getParsed(n-1);for(let w=n;w<n+s;++w){const v=e[w],C=this.getParsed(w),_=y?v:{},P=vt(C[m]),M=_[p]=o.getPixelForValue(C[p],w),E=_[m]=i||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[m],w);_.skip=isNaN(M)||isNaN(E)||P,_.stop=w>0&&Math.abs(C[p]-S[p])>g,x&&(_.parsed=C,_.raw=c.data[w]),f&&(_.options=d||this.resolveDataElementOptions(w,v.active?"active":r)),y||this.updateElement(v,w,_,r),S=C}this.updateSharedOptions(d,r,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=e.dataset,r=s.options&&s.options.borderWidth||0;if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,o)/2}}ce(wp,"id","scatter"),ce(wp,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ce(wp,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function bo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class N1{constructor(e){ce(this,"options");this.options=e||{}}static override(e){Object.assign(N1.prototype,e)}init(){}formats(){return bo()}parse(){return bo()}format(){return bo()}add(){return bo()}diff(){return bo()}startOf(){return bo()}endOf(){return bo()}}var QK={_date:N1};function JK(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?CG:Oo;if(s){if(r._sharedOptions){const u=i[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=c(i,e,n-d),p=c(i,e,n+d);return{lo:f.lo,hi:p.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(b=>!vt(b[d.axis]));u.lo-=Math.max(0,p);const m=f.slice(u.hi).findIndex(b=>!vt(b[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:i.length-1}}function Vm(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:d,hi:f}=JK(i[a],e,o,r);for(let p=d;p<=f;++p){const m=u[p];m.skip||s(m,c,p)}}}function ZK(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Bb(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||Vm(t,n,e,function(a,l,c){!r&&!Kd(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function eX(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:d}=Oy(o,{x:e.x,y:e.y});D0(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Vm(t,n,e,i),r}function tX(t,e,n,s,r,i){let o=[];const a=ZK(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const p=u.inRange(e.x,e.y,r);if(s&&!p)return;const m=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(m))&&!p)return;const x=a(e,m);x<l?(o=[{element:u,datasetIndex:d,index:f}],l=x):x===l&&o.push({element:u,datasetIndex:d,index:f})}return Vm(t,n,e,c),o}function zb(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?eX(t,e,n,r):tX(t,e,n,s,r,i)}function B_(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Vm(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var nX={modes:{index(t,e,n,s){const r=So(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Bb(t,r,i,s,o):zb(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const r=So(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Bb(t,r,i,s,o):zb(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const r=So(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Bb(t,r,i,s,o)},nearest(t,e,n,s){const r=So(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return zb(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=So(e,t);return B_(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=So(e,t);return B_(t,r,"y",n.intersect,s)}}};const GN=["left","top","right","bottom"];function ru(t,e){return t.filter(n=>n.pos===e)}function z_(t,e){return t.filter(n=>GN.indexOf(n.pos)===-1&&n.box.axis===e)}function iu(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function sX(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function rX(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!GN.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function iX(t,e){const n=rX(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=u?u*r:l&&e.availableHeight)}return n}function oX(t){const e=sX(t),n=iu(e.filter(c=>c.box.fullSize),!0),s=iu(ru(e,"left"),!0),r=iu(ru(e,"right")),i=iu(ru(e,"top"),!0),o=iu(ru(e,"bottom")),a=z_(e,"x"),l=z_(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:ru(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function U_(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function KN(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function aX(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!Ze(r)){n.size&&(t[r]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[r]+=n.size}i.getPadding&&KN(o,i.getPadding());const a=Math.max(0,e.outerWidth-U_(o,t,"left","right")),l=Math.max(0,e.outerHeight-U_(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function lX(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function cX(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function Pu(t,e,n,s){const r=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,cX(a.horizontal,e));const{same:d,other:f}=aX(e,n,a,s);c|=d&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&Pu(r,e,n,s)||u}function Ff(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function W_(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;rs(c.start)&&(o=c.start),l.fullSize?Ff(l,r.left,o,n.outerWidth-r.right-r.left,f):Ff(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;rs(c.start)&&(i=c.start),l.fullSize?Ff(l,i,r.top,f,n.outerHeight-r.bottom-r.top):Ff(l,i,e.top+c.placed,f,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var Cs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=yn(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=oX(t.boxes),l=a.vertical,c=a.horizontal;ft(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=l.reduce((b,x)=>x.box.options&&x.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);KN(f,yn(s));const p=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),m=iX(l.concat(c),d);Pu(a.fullSize,p,d,m),Pu(l,p,d,m),Pu(c,p,d,m)&&Pu(l,p,d,m),lX(p),W_(a.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,W_(a.rightAndBottom,p,d,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},ft(a.chartArea,b=>{const x=b.box;Object.assign(x,t.chartArea),x.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class XN{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class uX extends XN{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const vp="$chartjs",dX={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},H_=t=>t===null||t==="";function hX(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[vp]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",H_(r)){const i=I_(t,"width");i!==void 0&&(t.width=i)}if(H_(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=I_(t,"height");i!==void 0&&(t.height=i)}return t}const QN=vK?{passive:!0}:!1;function fX(t,e,n){t&&t.addEventListener(e,n,QN)}function pX(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,QN)}function mX(t,e){const n=dX[t.type]||t.type,{x:s,y:r}=So(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function R0(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function gX(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||R0(a.addedNodes,s),o=o&&!R0(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function bX(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||R0(a.removedNodes,s),o=o&&!R0(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Qd=new Map;let V_=0;function JN(){const t=window.devicePixelRatio;t!==V_&&(V_=t,Qd.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function xX(t,e){Qd.size||window.addEventListener("resize",JN),Qd.set(t,e)}function yX(t){Qd.delete(t),Qd.size||window.removeEventListener("resize",JN)}function wX(t,e,n){const s=t.canvas,r=s&&M1(s);if(!r)return;const i=RN((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(r),xX(t,i),o}function Ub(t,e,n){n&&n.disconnect(),e==="resize"&&yX(t)}function vX(t,e,n){const s=t.canvas,r=RN(i=>{t.ctx!==null&&n(mX(i,t))},t);return fX(s,e,r),r}class SX extends XN{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(hX(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[vp])return!1;const s=n[vp].initial;["height","width"].forEach(i=>{const o=s[i];vt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[vp],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:gX,detach:bX,resize:wX}[n]||vX;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:Ub,detach:Ub,resize:Ub}[n]||pX)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return wK(e,n,s,r)}isAttached(e){const n=e&&M1(e);return!!(n&&n.isConnected)}}function kX(t){return!T1()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?uX:SX}class wn{constructor(){ce(this,"x");ce(this,"y");ce(this,"active",!1);ce(this,"options");ce(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return pa(this.x)&&pa(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}}ce(wn,"defaults",{}),ce(wn,"defaultRoutes");function CX(t,e){const n=t.options.ticks,s=_X(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?PX(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return TX(e,c,i,o/r),c;const u=EX(i,e,r);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for($f(e,c,u,vt(p)?0:a-p,a),d=0,f=o-1;d<f;d++)$f(e,c,u,i[d],i[d+1]);return $f(e,c,u,l,vt(p)?e.length:l+p),c}return $f(e,c,u),c}function _X(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function EX(t,e,n){const s=MX(t),r=e.length/n;if(!s)return Math.max(r,1);const i=xG(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function PX(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function TX(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function $f(t,e,n,s,r){const i=Qe(s,0),o=Math.min(Qe(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function MX(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const IX=t=>t==="left"?"right":t==="right"?"left":t,q_=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Y_=(t,e)=>Math.min(e||t,t);function G_(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function NX(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<i-a||l>o+a)))return l}function DX(t,e){ft(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function ou(t){return t.drawTicks?t.tickLength:0}function K_(t,e){if(!t.display)return 0;const n=qt(t.font,e),s=yn(t.padding);return(Pt(t.text)?t.text.length:1)*n.lineHeight+s.height}function AX(t,e){return Ca(t,{scale:e,type:"scale"})}function OX(t,e,n){return Ca(t,{tick:n,index:e,type:"tick"})}function RX(t,e,n){let s=S1(t);return(n&&e!=="right"||!n&&e==="right")&&(s=IX(s)),s}function jX(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,p,m;const b=o-r,x=a-i;if(t.isHorizontal()){if(p=gn(s,i,a),Ze(n)){const g=Object.keys(n)[0],y=n[g];m=u[g].getPixelForValue(y)+b-e}else n==="center"?m=(c.bottom+c.top)/2+b-e:m=q_(t,n,e);f=a-i}else{if(Ze(n)){const g=Object.keys(n)[0],y=n[g];p=u[g].getPixelForValue(y)-x+e}else n==="center"?p=(c.left+c.right)/2-x+e:p=q_(t,n,e);m=gn(s,o,r),d=n==="left"?-cn:cn}return{titleX:p,titleY:m,maxWidth:f,rotation:d}}class Nc extends wn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=er(e,Number.POSITIVE_INFINITY),n=er(n,Number.NEGATIVE_INFINITY),s=er(s,Number.POSITIVE_INFINITY),r=er(r,Number.NEGATIVE_INFINITY),{min:er(e,s),max:er(n,r),minDefined:qn(e),maxDefined:qn(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:er(n,er(s,n)),max:er(s,er(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){gt(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=JG(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?G_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=CX(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){gt(this.options.afterUpdate,[this])}beforeSetDimensions(){gt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){gt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),gt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){gt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=gt(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){gt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){gt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=Y_(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=ks(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/s:p/(s-1),d+6>a&&(a=p/(s-(e.offset?.5:1)),l=this.maxHeight-ou(e.grid)-n.padding-K_(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=DN(Math.min(Math.asin(ks((u.highest.height+6)/a,-1,1)),Math.asin(ks(l/c,-1,1))-Math.asin(ks(f/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){gt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){gt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=K_(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ou(i)+l):(e.height=this.maxHeight,e.width=ou(i)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),p=s.padding*2,m=Zt(this.labelRotation),b=Math.cos(m),x=Math.sin(m);if(a){const g=s.mirror?0:x*d.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+g+p)}else{const g=s.mirror?0:b*d.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+g+p)}this._calculatePadding(c,u,x,b)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=r*e.width,p=s*n.height):(f=s*e.height,p=r*n.width):i==="start"?p=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;i==="start"?(u=0,d=e.height):i==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){gt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)vt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=G_(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Y_(n,s));let c=0,u=0,d,f,p,m,b,x,g,y,S,w,v;for(d=0;d<n;d+=l){if(m=e[d].label,b=this._resolveTickFontOptions(d),r.font=x=b.string,g=i[x]=i[x]||{data:{},gc:[]},y=b.lineHeight,S=w=0,!vt(m)&&!Pt(m))S=__(r,g.data,g.gc,S,m),w=y;else if(Pt(m))for(f=0,p=m.length;f<p;++f)v=m[f],!vt(v)&&!Pt(v)&&(S=__(r,g.data,g.gc,S,v),w+=y);o.push(S),a.push(w),c=Math.max(S,c),u=Math.max(w,u)}DX(i,n);const C=o.indexOf(c),_=a.indexOf(u),P=M=>({width:o[M]||0,height:a[M]||0});return{first:P(0),last:P(n-1),widest:P(C),highest:P(_),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return kG(this._alignToPixels?go(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=OX(this.getContext(),e,s))}return this.$context||(this.$context=AX(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Zt(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=ou(i),p=[],m=a.setContext(this.getContext()),b=m.display?m.width:0,x=b/2,g=function(L){return go(s,L,b)};let y,S,w,v,C,_,P,M,E,I,O,j;if(o==="top")y=g(this.bottom),_=this.bottom-f,M=y-x,I=g(e.top)+x,j=e.bottom;else if(o==="bottom")y=g(this.top),I=e.top,j=g(e.bottom)-x,_=y+x,M=this.top+f;else if(o==="left")y=g(this.right),C=this.right-f,P=y-x,E=g(e.left)+x,O=e.right;else if(o==="right")y=g(this.left),E=e.left,O=g(e.right)-x,C=y+x,P=this.left+f;else if(n==="x"){if(o==="center")y=g((e.top+e.bottom)/2+.5);else if(Ze(o)){const L=Object.keys(o)[0],B=o[L];y=g(this.chart.scales[L].getPixelForValue(B))}I=e.top,j=e.bottom,_=y+x,M=_+f}else if(n==="y"){if(o==="center")y=g((e.left+e.right)/2);else if(Ze(o)){const L=Object.keys(o)[0],B=o[L];y=g(this.chart.scales[L].getPixelForValue(B))}C=y-x,P=C-f,E=e.left,O=e.right}const U=Qe(r.ticks.maxTicksLimit,d),A=Math.max(1,Math.ceil(d/U));for(S=0;S<d;S+=A){const L=this.getContext(S),B=i.setContext(L),F=a.setContext(L),$=B.lineWidth,D=B.color,z=F.dash||[],R=F.dashOffset,T=B.tickWidth,X=B.tickColor,ne=B.tickBorderDash||[],q=B.tickBorderDashOffset;w=NX(this,S,l),w!==void 0&&(v=go(s,w,$),c?C=P=E=O=v:_=M=I=j=v,p.push({tx1:C,ty1:_,tx2:P,ty2:M,x1:E,y1:I,x2:O,y2:j,width:$,color:D,borderDash:z,borderDashOffset:R,tickWidth:T,tickColor:X,tickBorderDash:ne,tickBorderDashOffset:q}))}return this._ticksLength=d,this._borderValue=y,p}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=i,f=ou(s.grid),p=f+u,m=d?-u:p,b=-Zt(this.labelRotation),x=[];let g,y,S,w,v,C,_,P,M,E,I,O,j="middle";if(r==="top")C=this.bottom-m,_=this._getXAxisLabelAlignment();else if(r==="bottom")C=this.top+m,_=this._getXAxisLabelAlignment();else if(r==="left"){const A=this._getYAxisLabelAlignment(f);_=A.textAlign,v=A.x}else if(r==="right"){const A=this._getYAxisLabelAlignment(f);_=A.textAlign,v=A.x}else if(n==="x"){if(r==="center")C=(e.top+e.bottom)/2+p;else if(Ze(r)){const A=Object.keys(r)[0],L=r[A];C=this.chart.scales[A].getPixelForValue(L)+p}_=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")v=(e.left+e.right)/2-p;else if(Ze(r)){const A=Object.keys(r)[0],L=r[A];v=this.chart.scales[A].getPixelForValue(L)}_=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));const U=this._getLabelSizes();for(g=0,y=a.length;g<y;++g){S=a[g],w=S.label;const A=i.setContext(this.getContext(g));P=this.getPixelForTick(g)+i.labelOffset,M=this._resolveTickFontOptions(g),E=M.lineHeight,I=Pt(w)?w.length:1;const L=I/2,B=A.color,F=A.textStrokeColor,$=A.textStrokeWidth;let D=_;o?(v=P,_==="inner"&&(g===y-1?D=this.options.reverse?"left":"right":g===0?D=this.options.reverse?"right":"left":D="center"),r==="top"?c==="near"||b!==0?O=-I*E+E/2:c==="center"?O=-U.highest.height/2-L*E+E:O=-U.highest.height+E/2:c==="near"||b!==0?O=E/2:c==="center"?O=U.highest.height/2-L*E:O=U.highest.height-I*E,d&&(O*=-1),b!==0&&!A.showLabelBackdrop&&(v+=E/2*Math.sin(b))):(C=P,O=(1-I)*E/2);let z;if(A.showLabelBackdrop){const R=yn(A.backdropPadding),T=U.heights[g],X=U.widths[g];let ne=O-R.top,q=0-R.left;switch(j){case"middle":ne-=T/2;break;case"bottom":ne-=T;break}switch(_){case"center":q-=X/2;break;case"right":q-=X;break;case"inner":g===y-1?q-=X:g>0&&(q-=X/2);break}z={left:q,top:ne,width:X+R.width,height:T+R.height,color:A.backdropColor}}x.push({label:w,font:M,textOffset:O,options:{rotation:b,color:B,strokeColor:F,strokeWidth:$,textAlign:D,textBaseline:j,translation:[v,C],backdrop:z}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Zt(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+i,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=go(e,this.left,o)-o/2,u=go(e,this.right,a)+a/2,d=f=l):(d=go(e,this.top,o)-o/2,f=go(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Um(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Xd(s,c,0,u,l,a)}r&&Wm(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=qt(s.font),o=yn(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Ze(n)?(l+=o.bottom,Pt(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=jX(this,l,n,a);Xd(e,s.text,0,0,i,{color:s.color,maxWidth:d,rotation:f,textAlign:RX(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Qe(e.grid&&e.grid.z,-1),r=Qe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Nc.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return qt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bf{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;$X(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,LX(e,o,s),this.override&&Ot.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in Ot[r]&&(delete Ot[r][s],this.override&&delete ma[s])}}function LX(t,e,n){const s=Yd(Object.create(null),[n?Ot.get(n):{},Ot.get(e),t.defaults]);Ot.set(e,s),t.defaultRoutes&&FX(e,t.defaultRoutes),t.descriptors&&Ot.describe(e,t.descriptors)}function FX(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ot.route(i,r,l,a)})}function $X(t){return"id"in t&&"defaults"in t}class BX{constructor(){this.controllers=new Bf(pl,"datasets",!0),this.elements=new Bf(wn,"elements"),this.plugins=new Bf(Object,"plugins"),this.scales=new Bf(Nc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):ft(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=y1(e);gt(s["before"+r],[],s),n[e](s),gt(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var rr=new BX;class zX{constructor(){this._init=void 0}notify(e,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(gt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){vt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=Qe(s.options&&s.options.plugins,{}),i=UX(s);return r===!1&&!n?[]:HX(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function UX(t){const e={},n=[],s=Object.keys(rr.plugins.items);for(let i=0;i<s.length;i++)n.push(rr.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function WX(t,e){return!e&&t===!1?null:t===!0?{}:t}function HX(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=WX(s[l],r);c!==null&&i.push({plugin:a,options:VX(t.config,{plugin:a,local:n[l]},c,o)})}return i}function VX(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ly(t,e){const n=Ot.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function qX(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function YX(t,e){return t===e?"_index_":"_value_"}function X_(t){if(t==="x"||t==="y"||t==="r")return t}function GX(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Fy(t,...e){if(X_(t))return t;for(const n of e){const s=n.axis||GX(n.position)||t.length>1&&X_(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Q_(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function KX(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return Q_(t,"x",n[0])||Q_(t,"y",n[0])}return{}}function XX(t,e){const n=ma[t.type]||{scales:{}},s=e.scales||{},r=Ly(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Ze(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Fy(o,a,KX(o,t),Ot.scales[a.type]),c=YX(l,r),u=n.scales||{};i[o]=Ku(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Ly(a,e),u=(ma[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=qX(d,l),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),Ku(i[p],[{axis:f},s[p],u[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];Ku(a,[Ot.scales[a.type],Ot.scale])}),i}function ZN(t){const e=t.options||(t.options={});e.plugins=Qe(e.plugins,{}),e.scales=XX(t,e)}function eD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function QX(t){return t=t||{},t.data=eD(t.data),ZN(t),t}const J_=new Map,tD=new Set;function zf(t,e){let n=J_.get(t);return n||(n=e(),J_.set(t,n),tD.add(n)),n}const au=(t,e,n)=>{const s=Gd(e,n);s!==void 0&&t.add(s)};class JX{constructor(e){this._config=QX(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=eD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ZN(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return zf(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return zf(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return zf(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return zf(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>au(l,e,d))),u.forEach(d=>au(l,r,d)),u.forEach(d=>au(l,ma[i]||{},d)),u.forEach(d=>au(l,Ot,d)),u.forEach(d=>au(l,Ry,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),tD.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ma[n]||{},Ot.datasets[n]||{},{type:n},Ot,Ry]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Z_(this._resolverCache,e,r);let l=o;if(eQ(o,n)){i.$shared=!1,s=Hn(s)?s():s;const c=this.createResolver(e,s,a);l=gc(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,s=[""],r){const{resolver:i}=Z_(this._resolverCache,e,s);return Ze(n)?gc(i,n,void 0,r):i}}function Z_(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:_1(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const ZX=t=>Ze(t)&&Object.getOwnPropertyNames(t).some(e=>Hn(t[e]));function eQ(t,e){const{isScriptable:n,isIndexable:s}=$N(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(Hn(a)||ZX(a))||o&&Pt(a))return!0}return!1}var tQ="4.5.1";const nQ=["top","bottom","left","right","chartArea"];function eE(t,e){return t==="top"||t==="bottom"||nQ.indexOf(t)===-1&&e==="x"}function tE(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function nE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),gt(n&&n.onComplete,[t],e)}function sQ(t){const e=t.chart,n=e.options.animation;gt(n&&n.onProgress,[t],e)}function nD(t){return T1()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Sp={},sE=t=>{const e=nD(t);return Object.values(Sp).filter(n=>n.canvas===e).pop()};function rQ(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function iQ(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var fi;let Zo=(fi=class{static register(...e){rr.add(...e),rE()}static unregister(...e){rr.remove(...e),rE()}constructor(e,n){const s=this.config=new JX(n),r=nD(e),i=sE(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||kX(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=uG(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zX,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=TG(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Sp[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Pr.listen(this,"complete",nE),Pr.listen(this,"progress",sQ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return vt(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return rr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():M_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return E_(this.canvas,this.ctx),this}stop(){return Pr.stop(this),this}resize(e,n){Pr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,M_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),gt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ft(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Fy(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ft(i,o=>{const a=o.options,l=a.id,c=Fy(l,a),u=Qe(a.type,o.dtype);(a.position===void 0||eE(a.position,c)!==eE(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in s&&s[l].type===u)d=s[l];else{const f=rr.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,e)}),ft(r,(o,a)=>{o||delete s[a]}),ft(s,o=>{Cs.configure(this,o,o.options),Cs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(tE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||Ly(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=rr.getController(a),{datasetElementType:c,dataElementType:u}=Ot.datasets[a];Object.assign(l,{dataElementType:rr.getElement(u),datasetElementType:c&&rr.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ft(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&i.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||ft(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(tE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ft(this.scales,e=>{Cs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!b_(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;rQ(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!b_(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Cs.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],ft(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Hn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Pr.has(this)?this.attached&&!Pr.running(this)&&Pr.start(this):(this.draw(),nE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=RK(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Um(n,r),e.controller.draw(),r&&Wm(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Kd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=nX.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Ca(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);rs(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Pr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),E_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Sp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};ft(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ft(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ft(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!T0(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=gG(e),c=iQ(e,this._lastEvent,s,l);s&&(this._lastEvent=null,gt(i.onHover,[e,a,this],this),l&&gt(i.onClick,[e,a,this],this));const u=!T0(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},ce(fi,"defaults",Ot),ce(fi,"instances",Sp),ce(fi,"overrides",ma),ce(fi,"registry",rr),ce(fi,"version",tQ),ce(fi,"getChart",sE),fi);function rE(){return ft(Zo.instances,t=>t._plugins.invalidate())}function sD(t,e,n=e){t.lineCap=Qe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Qe(n.borderDash,e.borderDash)),t.lineDashOffset=Qe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Qe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Qe(n.borderWidth,e.borderWidth),t.strokeStyle=Qe(n.borderColor,e.borderColor)}function oQ(t,e,n){t.lineTo(n.x,n.y)}function aQ(t){return t.stepped?UG:t.tension||t.cubicInterpolationMode==="monotone"?WG:oQ}function rD(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(i,a),u=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function lQ(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:c}=rD(r,n,s),u=aQ(i);let{move:d=!0,reverse:f}=s||{},p,m,b;for(p=0;p<=c;++p)m=r[(a+(f?c-p:p))%o],!m.skip&&(d?(t.moveTo(m.x,m.y),d=!1):u(t,b,m,f,i.stepped),b=m);return l&&(m=r[(a+(f?c:0))%o],u(t,b,m,f,i.stepped)),!!l}function cQ(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=rD(r,n,s),{move:l=!0,reverse:c}=s||{};let u=0,d=0,f,p,m,b,x,g;const y=w=>(o+(c?a-w:w))%i,S=()=>{b!==x&&(t.lineTo(u,x),t.lineTo(u,b),t.lineTo(u,g))};for(l&&(p=r[y(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=r[y(f)],p.skip)continue;const w=p.x,v=p.y,C=w|0;C===m?(v<b?b=v:v>x&&(x=v),u=(d*u+w)/++d):(S(),t.lineTo(w,v),m=C,d=0,b=x=v),g=v}S()}function $y(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?cQ:lQ}function uQ(t){return t.stepped?SK:t.tension||t.cubicInterpolationMode==="monotone"?kK:ko}function dQ(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),sD(t,e.options),t.stroke(r)}function hQ(t,e,n,s){const{segments:r,options:i}=e,o=$y(e);for(const a of r)sD(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const fQ=typeof Path2D=="function";function pQ(t,e,n,s){fQ&&!e.options.segment?dQ(t,e,n,s):hQ(t,e,n,s)}class Tu extends wn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;pK(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=NK(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=TK(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=uQ(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],p=i[d],m=i[f];if(p===m){a.push(p);continue}const b=Math.abs((r-p[n])/(m[n]-p[n])),x=l(p,m,b,s.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,s){return $y(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=$y(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),pQ(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ce(Tu,"id","line"),ce(Tu,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ce(Tu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ce(Tu,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function iE(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class kp extends wn{constructor(n){super();ce(this,"parsed");ce(this,"skip");ce(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return iE(this,n,"x",s)}inYRange(n,s){return iE(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!Kd(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,jy(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ce(kp,"id","point"),ce(kp,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ce(kp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const oE=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},mQ=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class aE extends wn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=gt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=qt(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=oE(s,i);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let d=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,b)=>{const x=s+n/2+i.measureText(m.text).width;(b===0||c[c.length-1]+x+2*a>o)&&(d+=u,c[c.length-(b>0?0:1)]=0,p+=u,f++),l[b]={left:0,top:p,row:f,width:x,height:r},c[c.length-1]+=x+a}),d}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,p=0,m=0,b=0;return this.legendItems.forEach((x,g)=>{const{itemWidth:y,itemHeight:S}=gQ(s,n,i,x,r);g>0&&p+S+2*a>u&&(d+=f+a,c.push({width:f,height:p}),m+=f+a,b++,f=p=0),l[g]={left:m,top:p,col:b,width:y,height:S},f=Math.max(f,y),p+=S+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=fl(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=gn(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=gn(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=gn(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=gn(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Um(e,this),this._draw(),Wm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=Ot.color,l=fl(e.rtl,this.left,this.width),c=qt(o.font),{padding:u}=o,d=c.size,f=d/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:m,boxHeight:b,itemHeight:x}=oE(o,d),g=function(C,_,P){if(isNaN(m)||m<=0||isNaN(b)||b<0)return;r.save();const M=Qe(P.lineWidth,1);if(r.fillStyle=Qe(P.fillStyle,a),r.lineCap=Qe(P.lineCap,"butt"),r.lineDashOffset=Qe(P.lineDashOffset,0),r.lineJoin=Qe(P.lineJoin,"miter"),r.lineWidth=M,r.strokeStyle=Qe(P.strokeStyle,a),r.setLineDash(Qe(P.lineDash,[])),o.usePointStyle){const E={radius:b*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:M},I=l.xPlus(C,m/2),O=_+f;LN(r,E,I,O,o.pointStyleWidth&&m)}else{const E=_+Math.max((d-b)/2,0),I=l.leftForLtr(C,m),O=hl(P.borderRadius);r.beginPath(),Object.values(O).some(j=>j!==0)?A0(r,{x:I,y:E,w:m,h:b,radius:O}):r.rect(I,E,m,b),r.fill(),M!==0&&r.stroke()}r.restore()},y=function(C,_,P){Xd(r,P.text,C,_+x/2,c,{strikethrough:P.hidden,textAlign:l.textAlign(P.textAlign)})},S=this.isHorizontal(),w=this._computeTitleHeight();S?p={x:gn(i,this.left+u,this.right-s[0]),y:this.top+u+w,line:0}:p={x:this.left+u,y:gn(i,this.top+w+u,this.bottom-n[0].height),line:0},HN(this.ctx,e.textDirection);const v=x+u;this.legendItems.forEach((C,_)=>{r.strokeStyle=C.fontColor,r.fillStyle=C.fontColor;const P=r.measureText(C.text).width,M=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),E=m+f+P;let I=p.x,O=p.y;l.setWidth(this.width),S?_>0&&I+E+u>this.right&&(O=p.y+=v,p.line++,I=p.x=gn(i,this.left+u,this.right-s[p.line])):_>0&&O+v>this.bottom&&(I=p.x=I+n[p.line].width+u,p.line++,O=p.y=gn(i,this.top+w+u,this.bottom-n[p.line].height));const j=l.x(I);if(g(j,O,C),I=MG(M,I+m+f,S?I+E:this.right,e.rtl),y(l.x(I),O,C),S)p.x+=E+u;else if(typeof C.text!="string"){const U=c.lineHeight;p.y+=iD(C,U)+u}else p.y+=v}),VN(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=qt(n.font),r=yn(n.padding);if(!n.display)return;const i=fl(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=gn(e.align,d,this.right-f);else{const m=this.columnSizes.reduce((b,x)=>Math.max(b,x.height),0);u=c+gn(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=gn(a,d,d+f);o.textAlign=i.textAlign(S1(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Xd(o,n.text,p,u,s)}_computeTitleHeight(){const e=this.options.title,n=qt(e.font),s=yn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(_u(e,this.left,this.right)&&_u(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],_u(e,r.left,r.left+r.width)&&_u(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!yQ(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=mQ(r,s);r&&!i&&gt(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&gt(n.onHover,[e,s,this],this)}else s&&gt(n.onClick,[e,s,this],this)}}function gQ(t,e,n,s,r){const i=bQ(s,t,e,n),o=xQ(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function bQ(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function xQ(t,e,n){let s=t;return typeof e.text!="string"&&(s=iD(e,n)),s}function iD(t,e){const n=t.text?t.text.length:0;return e*n}function yQ(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var wQ={id:"legend",_element:aE,start(t,e,n){const s=t.legend=new aE({ctx:t.ctx,options:n,chart:t});Cs.configure(t,s,n),Cs.addBox(t,s)},stop(t){Cs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Cs.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=yn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class oD extends wn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Pt(s.text)?s.text.length:1;this._padding=yn(s.padding);const i=r*qt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=gn(a,s,i),d=n+e,c=i-s):(o.position==="left"?(u=s+e,d=gn(a,r,n),l=ht*-.5):(u=i-e,d=gn(a,n,r),l=ht*.5),c=r-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=qt(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Xd(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:S1(n.align),textBaseline:"middle",translation:[o,a]})}}function vQ(t,e){const n=new oD({ctx:t.ctx,options:e,chart:t});Cs.configure(t,n,e),Cs.addBox(t,n),t.titleBlock=n}var SQ={id:"title",_element:oD,start(t,e,n){vQ(t,n)},stop(t){const e=t.titleBlock;Cs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Cs.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mu={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=mc(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function nr(t,e){return e&&(Pt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Tr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function kQ(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function lE(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=qt(e.bodyFont),c=qt(e.titleFont),u=qt(e.footerFont),d=i.length,f=r.length,p=s.length,m=yn(e.padding);let b=m.height,x=0,g=s.reduce((w,v)=>w+v.before.length+v.lines.length+v.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,d&&(b+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),g){const w=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=p*w+(g-p)*l.lineHeight+(g-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let y=0;const S=function(w){x=Math.max(x,n.measureText(w).width+y)};return n.save(),n.font=c.string,ft(t.title,S),n.font=l.string,ft(t.beforeBody.concat(t.afterBody),S),y=e.displayColors?o+2+e.boxPadding:0,ft(s,w=>{ft(w.before,S),ft(w.lines,S),ft(w.after,S)}),y=0,n.font=u.string,ft(t.footer,S),n.restore(),x+=m.width,{width:x,height:b}}function CQ(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function _Q(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function EQ(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),_Q(c,t,e,n)&&(c="center"),c}function cE(t,e,n){const s=n.yAlign||e.yAlign||CQ(t,n);return{xAlign:n.xAlign||e.xAlign||EQ(t,e,n,s),yAlign:s}}function PQ(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function TQ(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function uE(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=hl(o);let m=PQ(e,a);const b=TQ(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+r:a==="right"&&(m+=Math.max(d,p)+r),{x:ks(m,0,s.width-e.width),y:ks(b,0,s.height-e.height)}}function Uf(t,e,n){const s=yn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function dE(t){return nr([],Tr(t))}function MQ(t,e,n){return Ca(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function hE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const aD={beforeTitle:_r,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:_r,beforeBody:_r,beforeLabel:_r,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return vt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:_r,afterBody:_r,beforeFooter:_r,footer:_r,afterFooter:_r};function Dn(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?aD[e].call(n,s):r}class By extends wn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new I1(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=MQ(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=Dn(s,"beforeTitle",this,e),i=Dn(s,"title",this,e),o=Dn(s,"afterTitle",this,e);let a=[];return a=nr(a,Tr(r)),a=nr(a,Tr(i)),a=nr(a,Tr(o)),a}getBeforeBody(e,n){return dE(Dn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return ft(e,i=>{const o={before:[],lines:[],after:[]},a=hE(s,i);nr(o.before,Tr(Dn(a,"beforeLabel",this,i))),nr(o.lines,Dn(a,"label",this,i)),nr(o.after,Tr(Dn(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return dE(Dn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=Dn(s,"beforeFooter",this,e),i=Dn(s,"footer",this,e),o=Dn(s,"afterFooter",this,e);let a=[];return a=nr(a,Tr(r)),a=nr(a,Tr(i)),a=nr(a,Tr(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(kQ(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,s))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,s))),ft(a,u=>{const d=hE(e.callbacks,u);r.push(Dn(d,"labelColor",this,u)),i.push(Dn(d,"labelPointStyle",this,u)),o.push(Dn(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=Mu[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=lE(this,s),c=Object.assign({},a,l),u=cE(this.chart,s,c),d=uE(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=hl(a),{x:f,y:p}=e,{width:m,height:b}=n;let x,g,y,S,w,v;return i==="center"?(w=p+b/2,r==="left"?(x=f,g=x-o,S=w+o,v=w-o):(x=f+m,g=x+o,S=w-o,v=w+o),y=x):(r==="left"?g=f+Math.max(l,u)+o:r==="right"?g=f+m-Math.max(c,d)-o:g=this.caretX,i==="top"?(S=p,w=S-o,x=g-o,y=g+o):(S=p+b,w=S+o,x=g+o,y=g-o),v=S),{x1:x,x2:g,x3:y,y1:S,y2:w,y3:v}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=fl(s.rtl,this.x,this.width);for(e.x=Uf(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=qt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,u=qt(i.bodyFont),d=Uf(this,"left",i),f=r.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+p;if(i.usePointStyle){const b={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=r.leftForLtr(f,c)+c/2,g=m+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,jy(e,b,x,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,jy(e,b,x,g)}else{e.lineWidth=Ze(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=r.leftForLtr(f,c),x=r.leftForLtr(r.xPlus(f,1),c-2),g=hl(o.borderRadius);Object.values(g).some(y=>y!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,A0(e,{x:b,y:m,w:c,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),A0(e,{x,y:m+1,w:c-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(b,m,c,l),e.strokeRect(b,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,d=qt(s.bodyFont);let f=d.lineHeight,p=0;const m=fl(s.rtl,this.x,this.width),b=function(P){n.fillText(P,m.x(e.x+p),e.y+f/2),e.y+=f+i},x=m.textAlign(o);let g,y,S,w,v,C,_;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Uf(this,x,s),n.fillStyle=s.bodyColor,ft(this.beforeBody,b),p=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,w=0,C=r.length;w<C;++w){for(g=r[w],y=this.labelTextColors[w],n.fillStyle=y,ft(g.before,b),S=g.lines,a&&S.length&&(this._drawColorBox(n,e,w,m,s),f=Math.max(d.lineHeight,l)),v=0,_=S.length;v<_;++v)b(S[v]),f=d.lineHeight;ft(g.after,b)}p=0,f=d.lineHeight,ft(this.afterBody,b),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=fl(s.rtl,this.x,this.width);for(e.x=Uf(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=qt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:m}=hl(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Mu[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=lE(this,e),l=Object.assign({},o,this._size),c=cE(n,e,l),u=uE(e,l,c,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=yn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),HN(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),VN(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!T0(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!T0(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=Mu[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}ce(By,"positioners",Mu);var IQ={id:"tooltip",_element:By,positioners:Mu,afterInit(t,e,n){n&&(t.tooltip=new By({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:aD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const NQ=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function DQ(t,e,n,s){const r=t.indexOf(e);if(r===-1)return NQ(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const AQ=(t,e)=>t===null?null:ks(Math.round(t),0,e);function fE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class zy extends Nc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(vt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:DQ(s,e,Qe(n,e),this._addedLabels),AQ(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return fE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ce(zy,"id","category"),ce(zy,"defaults",{ticks:{callback:fE}});function OQ(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,p=i||1,m=u-1,{min:b,max:x}=e,g=!vt(o),y=!vt(a),S=!vt(c),w=(x-b)/(d+1);let v=x_((x-b)/m/p)*p,C,_,P,M;if(v<1e-14&&!g&&!y)return[{value:b},{value:x}];M=Math.ceil(x/v)-Math.floor(b/v),M>m&&(v=x_(M*v/m/p)*p),vt(l)||(C=Math.pow(10,l),v=Math.ceil(v*C)/C),r==="ticks"?(_=Math.floor(b/v)*v,P=Math.ceil(x/v)*v):(_=b,P=x),g&&y&&i&&wG((a-o)/i,v/1e3)?(M=Math.round(Math.min((a-o)/v,u)),v=(a-o)/M,_=o,P=a):S?(_=g?o:_,P=y?a:P,M=c-1,v=(P-_)/M):(M=(P-_)/v,Xu(M,Math.round(M),v/1e3)?M=Math.round(M):M=Math.ceil(M));const E=Math.max(y_(v),y_(_));C=Math.pow(10,vt(l)?E:l),_=Math.round(_*C)/C,P=Math.round(P*C)/C;let I=0;for(g&&(f&&_!==o?(n.push({value:o}),_<o&&I++,Xu(Math.round((_+I*v)*C)/C,o,pE(o,w,t))&&I++):_<o&&I++);I<M;++I){const O=Math.round((_+I*v)*C)/C;if(y&&O>a)break;n.push({value:O})}return y&&f&&P!==a?n.length&&Xu(n[n.length-1].value,a,pE(a,w,t))?n[n.length-1].value=a:n.push({value:a}):(!y||P===a)&&n.push({value:P}),n}function pE(t,e,{horizontal:n,minRotation:s}){const r=Zt(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class RQ extends Nc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return vt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=pc(r),c=pc(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=OQ(r,i);return e.bounds==="ticks"&&vG(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return C1(e,this.chart.options.locale,this.options.ticks.format)}}class Uy extends RQ{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=qn(e)?e:0,this.max=qn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Zt(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ce(Uy,"id","linear"),ce(Uy,"defaults",{ticks:{callback:jN.formatters.numeric}});const qm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fn=Object.keys(qm);function mE(t,e){return t-e}function gE(t,e){if(vt(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),qn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(pa(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function bE(t,e,n,s){const r=Fn.length;for(let i=Fn.indexOf(t);i<r-1;++i){const o=qm[Fn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return Fn[i]}return Fn[r-1]}function jQ(t,e,n,s,r){for(let i=Fn.length-1;i>=Fn.indexOf(n);i--){const o=Fn[i];if(qm[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return Fn[n?Fn.indexOf(n):0]}function LQ(t){for(let e=Fn.indexOf(t)+1,n=Fn.length;e<n;++e)if(qm[Fn[e]].common)return Fn[e]}function xE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=v1(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function FQ(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function yE(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:FQ(t,s,r,n)}class j0 extends Nc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new QK._date(e.adapters.date);r.init(n),Ku(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:gE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=qn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=qn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=_G(r,i,o);return this._unit=n.unit||(s.autoSkip?bE(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):jQ(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:LQ(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),yE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ks(n,0,o),s=ks(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||bE(i.minUnit,n,s,this._getLabelCapacity(n)),a=Qe(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=pa(l)||l===!0,u={};let d=n,f,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const m=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<s;f=+e.add(f,a,o),p++)xE(u,f,m);return(f===s||r.bounds==="ticks"||p===1)&&xE(u,f,m),Object.keys(u).sort(mE).map(b=>+b)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return gt(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=s[n],p=c&&d&&f&&f.major;return this._adapter.format(e,r||(p?d:u))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Zt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,yE(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(gE(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return PG(e.sort(mE))}}ce(j0,"id","time"),ce(j0,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Wf(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=Oo(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=Oo(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class wE extends j0{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Wf(n,this.min),this._tableRange=Wf(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Wf(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Wf(this._table,s*this._tableRange+this._minPos,!0)}}ce(wE,"id","timeseries"),ce(wE,"defaults",j0.defaults);const lD="label";function vE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function $Q(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function cD(t,e){t.labels=e}function uD(t,e,n=lD){const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function BQ(t,e=lD){const n={labels:[],datasets:[]};return cD(n,t.labels),uD(n,t.datasets,e),n}function zQ(t,e){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...f}=t,p=k.useRef(null),m=k.useRef(null),b=()=>{p.current&&(m.current=new Zo(p.current,{type:o,data:BQ(a,i),options:l&&{...l},plugins:c}),vE(e,m.current))},x=()=>{vE(e,null),m.current&&(m.current.destroy(),m.current=null)};return k.useEffect(()=>{!r&&m.current&&l&&$Q(m.current,l)},[r,l]),k.useEffect(()=>{!r&&m.current&&cD(m.current.config.data,a.labels)},[r,a.labels]),k.useEffect(()=>{!r&&m.current&&a.datasets&&uD(m.current.config.data,a.datasets,i)},[r,a.datasets]),k.useEffect(()=>{m.current&&(r?(x(),setTimeout(b)):m.current.update(d))},[r,l,a.labels,a.datasets,d]),k.useEffect(()=>{m.current&&(x(),setTimeout(b))},[o]),k.useEffect(()=>(b(),()=>x()),[]),h.jsx("canvas",{ref:p,role:"img",height:n,width:s,...f,children:u})}const UQ=k.forwardRef(zQ);function WQ(t,e){return Zo.register(e),k.forwardRef((n,s)=>h.jsx(UQ,{...n,ref:s,type:t}))}const HQ=WQ("scatter",wp);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const SE={modes:{point(t,e){return Cp(t,e,{intersect:!0})},nearest(t,e,n){return YQ(t,e,n)},x(t,e,n){return Cp(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return Cp(t,e,{intersect:n.intersect,axis:"y"})}}};function D1(t,e,n){return(SE.modes[n.mode]||SE.modes.nearest)(t,e,n)}function VQ(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function qQ(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function Cp(t,e,n){return t.filter(s=>n.intersect?s.inRange(e.x,e.y):VQ(s,e,n.axis))}function YQ(t,e,n){let s=Number.POSITIVE_INFINITY;return Cp(t,e,n).reduce((r,i)=>{const o=i.getCenterPoint(),a=qQ(e,o,n.axis),l=mc(e,a);return l<s?(r=[i],s=l):l===s&&r.push(i),r},[]).sort((r,i)=>r._index-i._index).slice(0,1)}function _a(t,e,n){const s=Math.cos(n),r=Math.sin(n),i=e.x,o=e.y;return{x:i+s*(t.x-i)-r*(t.y-o),y:o+r*(t.x-i)+s*(t.y-o)}}const GQ=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Ro=.001,Ym=(t,e,n)=>Math.min(n,Math.max(e,t)),dD=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function KQ(t,e,n){for(const s of Object.keys(t))t[s]=Ym(t[s],e,n);return t}function XQ(t,e,n,s){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function hD(t,{x:e,y:n,x2:s,y2:r},i,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=t.x>=e-l-Ro&&t.x<=s+l+Ro,u=t.y>=n-l-Ro&&t.y<=r+l+Ro;return i==="x"?c:(i==="y"||c)&&u}function fD(t,{rect:e,center:n},s,{rotation:r,borderWidth:i,hitTolerance:o}){const a=_a(t,n,Zt(-r));return hD(a,e,s,{borderWidth:i,hitTolerance:o})}function Ea(t,e){const{centerX:n,centerY:s}=t.getProps(["centerX","centerY"],e);return{x:n,y:s}}function QQ(t,e,n,s=!0){const r=n.split(".");let i=0;for(const o of e.split(".")){const a=r[i++];if(parseInt(o,10)<parseInt(a,10))break;if(GQ(a,o)){if(s)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const pD=t=>typeof t=="string"&&t.endsWith("%"),mD=t=>parseFloat(t)/100,gD=t=>Ym(mD(t),0,1),lu=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),JQ={box:t=>lu(t.centerX,t.centerY),doughnutLabel:t=>lu(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>lu(t.centerX,t.centerY),line:t=>lu(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>lu(t.centerX,t.centerY)};function A1(t,e){return e==="start"?0:e==="end"?t:pD(e)?gD(e)*t:t/2}function to(t,e,n=!0){return typeof e=="number"?e:pD(e)?(n?gD(e):mD(e))*t:t}function ZQ(t,e){const{x:n,width:s}=t,r=e.textAlign;return r==="center"?n+s/2:r==="end"||r==="right"?n+s:n}function bD(t,e,{borderWidth:n,position:s,xAdjust:r,yAdjust:i},o){const a=Ze(o),l=e.width+(a?o.width:0)+n,c=e.height+(a?o.height:0)+n,u=O1(s),d=kE(t.x,l,r,u.x),f=kE(t.y,c,i,u.y);return{x:d,y:f,x2:d+l,y2:f+c,width:l,height:c,centerX:d+l/2,centerY:f+c/2}}function O1(t,e="center"){return Ze(t)?{x:Qe(t.x,e),y:Qe(t.y,e)}:(t=Qe(t,e),{x:t,y:t})}const xD=(t,e)=>t&&t.autoFit&&e<1;function yD(t,e){const n=t.font,s=Pt(n)?n:[n];return xD(t,e)?s.map(function(r){const i=qt(r);return i.size=Math.floor(r.size*e),i.lineHeight=r.lineHeight,qt(i)}):s.map(r=>qt(r))}function wD(t){return t&&(rs(t.xValue)||rs(t.yValue))}function kE(t,e,n=0,s){return t-A1(e,s)+n}function Dc(t,e,n){const s=n.init;if(s){if(s===!0)return SD(e,n)}else return;return eJ(t,e,n)}function vD(t,e,n){let s=!1;return e.forEach(r=>{Hn(t[r])?(s=!0,n[r]=t[r]):rs(n[r])&&delete n[r]}),s}function SD(t,e){const n=e.type||"line";return JQ[n](t)}function eJ(t,e,n){const s=gt(n.init,[{chart:t,properties:e,options:n}]);if(s===!0)return SD(e,n);if(Ze(s))return s}const Wb=new Map,tJ=t=>isNaN(t)||t<=0,nJ=t=>t.reduce(function(e,n){return e+=n.string,e},"");function Gm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function Km(t,{x:e,y:n},s){s&&(t.translate(e,n),t.rotate(Zt(s)),t.translate(-e,-n))}function ti(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function Ac(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function Xm(t,e){const n=e.content;if(Gm(n))return{width:to(n.width,e.width),height:to(n.height,e.height)};const s=yD(e),r=e.textStrokeWidth,i=Pt(n)?n:[n],o=i.join()+nJ(s)+r+(t._measureText?"-spriting":"");return Wb.has(o)||Wb.set(o,oJ(t,i,s,r)),Wb.get(o)}function kD(t,e,n){const{x:s,y:r,width:i,height:o}=e;t.save(),Ac(t,n);const a=ti(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),A0(t,{x:s,y:r,w:i,h:o,radius:KQ(hl(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function CD(t,e,n,s){const r=n.content;if(Gm(r)){t.save(),t.globalAlpha=cJ(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const i=Pt(r)?r:[r],o=yD(n,s),a=n.color,l=Pt(a)?a:[a],c=ZQ(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,sJ(t,n)&&aJ(t,{x:c,y:u},i,o),lJ(t,{x:c,y:u},i,{fonts:o,colors:l}),t.restore()}function sJ(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function rJ(t,e,n,s){const{radius:r,options:i}=e,o=i.pointStyle,a=i.rotation;let l=(a||0)*w1;if(Gm(o)){t.save(),t.translate(n,s),t.rotate(l),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}tJ(r)||iJ(t,{x:n,y:s,radius:r,rotation:a,style:o,rad:l})}function iJ(t,{x:e,y:n,radius:s,rotation:r,style:i,rad:o}){let a,l,c,u;switch(t.beginPath(),i){default:t.arc(e,n,s,0,ln),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=N0,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=N0,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),t.closePath();break;case"rectRounded":u=s*.516,c=s-u,a=Math.cos(o+ys)*c,l=Math.sin(o+ys)*c,t.arc(e-a,n-l,u,o-ht,o-cn),t.arc(e+l,n-a,u,o-cn,o),t.arc(e+a,n+l,u,o,o+cn),t.arc(e-l,n+a,u,o+cn,o+ht),t.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*s,t.rect(e-c,n-c,2*c,2*c);break}o+=ys;case"rectRot":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+l,n-a),t.lineTo(e+a,n+l),t.lineTo(e-l,n+a),t.closePath();break;case"crossRot":o+=ys;case"cross":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"star":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a),o+=ys,a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"line":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*s,n+Math.sin(o)*s);break}t.fill()}function oJ(t,e,n,s){t.save();const r=e.length;let i=0,o=s;for(let a=0;a<r;a++){const l=n[Math.min(a,n.length-1)];t.font=l.string;const c=e[a];i=Math.max(i,t.measureText(c).width+s),o+=l.lineHeight}return t.restore(),{width:i,height:o}}function aJ(t,{x:e,y:n},s,r){t.beginPath();let i=0;s.forEach(function(o,a){const l=r[Math.min(a,r.length-1)],c=l.lineHeight;t.font=l.string,t.strokeText(o,e,n+c/2+i),i+=c}),t.stroke()}function lJ(t,{x:e,y:n},s,{fonts:r,colors:i}){let o=0;s.forEach(function(a,l){const c=i[Math.min(l,i.length-1)],u=r[Math.min(l,r.length-1)],d=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=c,t.fillText(a,e,n+d/2+o),o+=d,t.fill()})}function cJ(t,e){const n=pa(t)?t:e;return pa(n)?Ym(n,0,1):1}const _D=["left","bottom","top","right"];function uJ(t,e){const{pointX:n,pointY:s,options:r}=e,i=r.callout,o=i&&i.display&&mJ(e,i);if(!o||bJ(e,i,o))return;if(t.save(),t.beginPath(),!ti(t,i))return t.restore();const{separatorStart:l,separatorEnd:c}=dJ(e,o),{sideStart:u,sideEnd:d}=fJ(e,o,l);(i.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(d.x,d.y);const f=_a({x:n,y:s},e.getCenterPoint(),Zt(-e.rotation));t.lineTo(f.x,f.y),t.stroke(),t.restore()}function dJ(t,e){const{x:n,y:s,x2:r,y2:i}=t,o=hJ(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:s},l={x:a.x,y:i}):(a={x:n,y:s+o},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function hJ(t,e){const{width:n,height:s,options:r}=t,i=r.callout.margin+r.borderWidth/2;return e==="right"?n+i:e==="bottom"?s+i:-i}function fJ(t,e,n){const{y:s,width:r,height:i,options:o}=t,a=o.callout.start,l=pJ(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:s+to(i,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+to(r,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function pJ(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function mJ(t,e){const n=e.position;return _D.includes(n)?n:gJ(t,e)}function gJ(t,e){const{x:n,y:s,x2:r,y2:i,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:f}=t,p={x:u,y:d},m=e.start,b=to(o,m),x=to(a,m),g=[n,n+b,n+b,r],y=[s+x,i,s,i],S=[];for(let w=0;w<4;w++){const v=_a({x:g[w],y:y[w]},p,Zt(f));S.push({position:_D[w],distance:mc(v,{x:l,y:c})})}return S.sort((w,v)=>w.distance-v.distance)[0].position}function bJ(t,e,n){const{pointX:s,pointY:r}=t,i=e.margin;let o=s,a=r;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?a+=i:n==="bottom"&&(a-=i),t.inRange(o,a)}const CE={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function xc(t,e,n){return e=typeof e=="number"?e:t.parse(e),qn(e)?t.getPixelForValue(e):n}function ga(t,e,n){const s=e[n];if(s||n==="scaleID")return s;const r=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===r);return i.length?i[0].id:r}function ED(t,e){if(t){const n=t.options.reverse,s=xc(t,e.min,n?e.end:e.start),r=xc(t,e.max,n?e.start:e.end);return{start:s,end:r}}}function PD(t,e){const{chartArea:n,scales:s}=t,r=s[ga(s,e,"xScaleID")],i=s[ga(s,e,"yScaleID")];let o=n.width/2,a=n.height/2;return r&&(o=xc(r,e.xValue,r.left+r.width/2)),i&&(a=xc(i,e.yValue,i.top+i.height/2)),{x:o,y:a}}function R1(t,e){const n=t.scales,s=n[ga(n,e,"xScaleID")],r=n[ga(n,e,"yScaleID")];if(!s&&!r)return{};let{left:i,right:o}=s||t.chartArea,{top:a,bottom:l}=r||t.chartArea;const c=_E(s,{min:e.xMin,max:e.xMax,start:i,end:o});i=c.start,o=c.end;const u=_E(r,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:i,y:a,x2:o,y2:l,width:o-i,height:l-a,centerX:i+(o-i)/2,centerY:a+(l-a)/2}}function TD(t,e){if(!wD(e)){const n=R1(t,e);let s=e.radius;(!s||isNaN(s))&&(s=Math.min(n.width,n.height)/2,e.radius=s);const r=s*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-s,y:o-s,x2:i+s,y2:o+s,centerX:i,centerY:o,width:r,height:r,radius:s}}return yJ(t,e)}function xJ(t,e){const{scales:n,chartArea:s}=t,r=n[e.scaleID],i={x:s.left,y:s.top,x2:s.right,y2:s.bottom};return r?wJ(r,i,e):vJ(n,i,e),i}function MD(t,e){const n=R1(t,e);return n.initProperties=Dc(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:CJ(t,n,e),initProperties:n.initProperties}],n}function yJ(t,e){const n=PD(t,e),s=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:s,height:s}}function _E(t,e){const n=ED(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function wJ(t,e,n){const s=xc(t,n.value,NaN),r=xc(t,n.endValue,s);t.isHorizontal()?(e.x=s,e.x2=r):(e.y=s,e.y2=r)}function vJ(t,e,n){for(const s of Object.keys(CE)){const r=t[ga(t,n,s)];if(r){const{min:i,max:o,start:a,end:l,startProp:c,endProp:u}=CE[s],d=ED(r,{min:n[i],max:n[o],start:r[a],end:r[l]});e[c]=d.start,e[u]=d.end}}}function SJ({properties:t,options:e},n,s,r){const{x:i,x2:o,width:a}=t;return ID({start:i,end:o,borderWidth:e.borderWidth},{position:s.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function kJ({properties:t,options:e},n,s,r){const{y:i,y2:o,height:a}=t;return ID({start:i,end:o,borderWidth:e.borderWidth},{position:s.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function ID(t,e){const{start:n,end:s,borderWidth:r}=t,{position:i,padding:{start:o,end:a},adjust:l}=e,c=s-r-n-o-a-e.size;return n+r/2+l+A1(c,i)}function CJ(t,e,n){const s=n.label;s.backgroundColor="transparent",s.callout.display=!1;const r=O1(s.position),i=yn(s.padding),o=Xm(t.ctx,s),a=SJ({properties:e,options:n},o,r,i),l=kJ({properties:e,options:n},o,r,i),c=o.width+i.width,u=o.height+i.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:s.rotation}}const Wy=["enter","leave"],j1=Wy.concat("click");function _J(t,e,n){e.listened=vD(n,j1,e.listeners),e.moveListened=!1,Wy.forEach(s=>{Hn(n[s])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(s=>{!e.listened&&Hn(s.click)&&(e.listened=!0),e.moveListened||Wy.forEach(r=>{Hn(s[r])&&(e.listened=!0,e.moveListened=!0)})})}function EJ(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return PJ(t,e,n);case"click":return TJ(t,e,n)}}function PJ(t,e,n){if(!t.moveListened)return;let s;e.type==="mousemove"?s=D1(t.visibleElements,e,n.interaction):s=[];const r=t.hovered;t.hovered=s;const i={state:t,event:e};let o=EE(i,"leave",r,s);return EE(i,"enter",s,r)||o}function EE({state:t,event:e},n,s,r){let i;for(const o of s)r.indexOf(o)<0&&(i=ND(o.options[n]||t.listeners[n],o,e)||i);return i}function TJ(t,e,n){const s=t.listeners,r=D1(t.visibleElements,e,n.interaction);let i;for(const o of r)i=ND(o.options.click||s.click,o,e)||i;return i}function ND(t,e,n){return gt(t,[e.$context,n])===!0}const L0=["afterDraw","beforeDraw"];function MJ(t,e,n){const s=e.visibleElements;e.hooked=vD(n,L0,e.hooks),e.hooked||s.forEach(r=>{e.hooked||L0.forEach(i=>{Hn(r.options[i])&&(e.hooked=!0)})})}function PE(t,e,n){if(t.hooked){const s=e.options[n]||t.hooks[n];return gt(s,[e.$context])}}function IJ(t,e,n){const s=RJ(t.scales,e,n);let r=TE(e,s,"min","suggestedMin");r=TE(e,s,"max","suggestedMax")||r,r&&Hn(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function NJ(t,e){for(const n of t)AJ(n,e)}function TE(t,e,n,s){if(qn(e[n])&&!DJ(t.options,n,s)){const r=t[n]!==e[n];return t[n]=e[n],r}}function DJ(t,e,n){return rs(t[e])||rs(t[n])}function AJ(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const s=ga(e,t,n);s&&!e[s]&&OJ(t,n)&&console.warn(`No scale found with id '${s}' for annotation '${t.id}'`)}}function OJ(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const s of["Min","Max","Value"])if(rs(t[n+s]))return!0;return!1}function RJ(t,e,n){const s=e.axis,r=e.id,i=s+"ScaleID",o={min:Qe(e.min,Number.NEGATIVE_INFINITY),max:Qe(e.max,Number.POSITIVE_INFINITY)};for(const a of n)a.scaleID===r?ME(a,e,["value","endValue"],o):ga(t,a,i)===r&&ME(a,e,[s+"Min",s+"Max",s+"Value"],o);return o}function ME(t,e,n,s){for(const r of n){const i=t[r];if(rs(i)){const o=e.parse(i);s.min=Math.min(s.min,o),s.max=Math.max(s.max,o)}}}class Oc extends wn{inRange(e,n,s,r){const{x:i,y:o}=_a({x:e,y:n},this.getCenterPoint(r),Zt(-this.options.rotation));return hD({x:i,y:o},this.getProps(["x","y","x2","y2"],r),s,this.options)}getCenterPoint(e){return Ea(this,e)}draw(e){e.save(),Km(e,this.getCenterPoint(),this.options.rotation),kD(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return MD(e,n)}}Oc.id="boxAnnotation";Oc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Oc.defaultRoutes={borderColor:"color",backgroundColor:"color"};Oc.descriptors={label:{_fallback:!0}};class Qm extends wn{inRange(e,n,s,r){return fD({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ea(this,e)}draw(e){const n=this.options;!n.display||!n.content||(zJ(e,this),e.save(),Km(e,this.getCenterPoint(),this.rotation),CD(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const s=jJ(e,n);if(!s)return{};const{controllerMeta:r,point:i,radius:o}=FJ(e,n,s);let a=Xm(e.ctx,n);const l=$J(a,o);xD(n,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:d}=n,f=bD(i,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return{initProperties:Dc(e,f,n),...f,...r,rotation:n.rotation,_fitRatio:l}}}Qm.id="doughnutLabelAnnotation";Qm.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Qm.defaultRoutes={};function jJ(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,s){const r=s.controller;return r instanceof Eu&&LJ(t,e,s.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?s:n},void 0)}function LJ(t,e,n){if(!e.autoHide)return!0;for(let s=0;s<n.length;s++)if(!n[s].hidden&&t.getDataVisibility(s))return!0}function FJ({chartArea:t},e,n){const{left:s,top:r,right:i,bottom:o}=t,{innerRadius:a,offsetX:l,offsetY:c}=n.controller,u=(s+i)/2+l,d=(r+o)/2+c,f={left:Math.max(u-a,s),right:Math.min(u+a,i),top:Math.max(d-a,r),bottom:Math.min(d+a,o)},p={x:(f.left+f.right)/2,y:(f.top+f.bottom)/2},m=e.spacing+e.borderWidth/2,b=a-m,x=p.y>d,g=x?r+m:o-m,y=BJ(g,u,d,b);return{controllerMeta:{_centerX:u,_centerY:d,_radius:b,_counterclockwise:x,...y},point:p,radius:Math.min(a,Math.min(f.right-f.left,f.bottom-f.top)/2)}}function $J({width:t,height:e},n){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/s}function BJ(t,e,n,s){const r=Math.pow(n-t,2),i=Math.pow(s,2),o=e*-2,a=Math.pow(e,2)+r-i,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:ln};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:Oy({x:e,y:n},{x:c,y:t}).angle,_endAngle:Oy({x:e,y:n},{x:u,y:t}).angle}}function zJ(t,e){const{_centerX:n,_centerY:s,_radius:r,_startAngle:i,_endAngle:o,_counterclockwise:a,options:l}=e;t.save();const c=ti(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,s,r,i,o,a),t.closePath(),t.fill(),c&&t.stroke(),t.restore()}class Eh extends wn{inRange(e,n,s,r){return fD({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ea(this,e)}draw(e){const n=this.options,s=!rs(this._visible)||this._visible;!n.display||!n.content||!s||(e.save(),Km(e,this.getCenterPoint(),this.rotation),uJ(e,this),kD(e,this,n),CD(e,UJ(this),n),e.restore())}resolveElementProperties(e,n){let s;if(wD(n))s=PD(e,n);else{const{centerX:a,centerY:l}=R1(e,n);s={x:a,y:l}}const r=yn(n.padding),i=Xm(e.ctx,n),o=bD(s,i,n,r);return{initProperties:Dc(e,o,n),pointX:s.x,pointY:s.y,...o,rotation:n.rotation}}}Eh.id="labelAnnotation";Eh.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Eh.defaultRoutes={borderColor:"color"};function UJ({x:t,y:e,width:n,height:s,options:r}){const i=r.borderWidth/2,o=yn(r.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-r.borderWidth,height:s-o.top-o.bottom-r.borderWidth}}const L1=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),Hy=(t,e,n)=>L1(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,IE=(t,e,n)=>L1(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,Iu=t=>t*t,WJ=(t,e,{x:n,y:s,x2:r,y2:i},o)=>o==="y"?{start:Math.min(s,i),end:Math.max(s,i),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},NE=(t,e,n,s)=>(1-s)*(1-s)*t+2*(1-s)*s*e+s*s*n,Vy=(t,e,n,s)=>({x:NE(t.x,e.x,n.x,s),y:NE(t.y,e.y,n.y,s)}),DE=(t,e,n,s)=>2*(1-s)*(e-t)+2*s*(n-e),AE=(t,e,n,s)=>-Math.atan2(DE(t.x,e.x,n.x,s),DE(t.y,e.y,n.y,s))+.5*ht;class Ph extends wn{inRange(e,n,s,r){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y"){const o={mouseX:e,mouseY:n},{path:a,ctx:l}=this;if(a){ti(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=e*u.currentDevicePixelRatio,f=n*u.currentDevicePixelRatio,p=l.isPointInStroke(a,d,f)||qy(this,o,r);return l.restore(),p}const c=Iu(i);return YJ(this,o,c,r)||qy(this,o,r)}return HJ(this,{mouseX:e,mouseY:n},s,{hitSize:i,useFinalPosition:r})}getCenterPoint(e){return Ea(this,e)}draw(e){const{x:n,y:s,x2:r,y2:i,cp:o,options:a}=this;if(e.save(),!ti(e,a))return e.restore();Ac(e,a);const l=Math.sqrt(Math.pow(r-n,2)+Math.pow(i-s,2));if(a.curve&&o)return tZ(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:d,endAdjust:f}=DD(this),p=Math.atan2(i-s,r-n);e.translate(n,s),e.rotate(p),e.beginPath(),e.moveTo(0+d,0),e.lineTo(l-f,0),e.shadowColor=a.borderShadowColor,e.stroke(),Yy(e,0,d,c),Yy(e,l,-f,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const s=xJ(e,n),{x:r,y:i,x2:o,y2:a}=s,l=VJ(s,e.chartArea),c=l?qJ({x:r,y:i},{x:o,y:a},e.chartArea):{x:r,y:i,x2:o,y2:a,width:Math.abs(o-r),height:Math.abs(a-i)};if(c.centerX=(o+r)/2,c.centerY=(a+i)/2,c.initProperties=Dc(e,c,n),n.curve){const d={x:c.x,y:c.y},f={x:c.x2,y:c.y2};c.cp=eZ(c,n,mc(d,f))}const u=GJ(e,c,n.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}Ph.id="lineAnnotation";const OE={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Ph.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},OE),fill:!1,length:12,start:Object.assign({},OE),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Eh.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ph.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Ph.defaultRoutes={borderColor:"color"};function HJ(t,{mouseX:e,mouseY:n},s,{hitSize:r,useFinalPosition:i}){const o=WJ(e,n,t.getProps(["x","y","x2","y2"],i),s);return dD(o,r)||qy(t,{mouseX:e,mouseY:n},i,s)}function VJ({x:t,y:e,x2:n,y2:s},{top:r,right:i,bottom:o,left:a}){return!(t<a&&n<a||t>i&&n>i||e<r&&s<r||e>o&&s>o)}function RE({x:t,y:e},n,{top:s,right:r,bottom:i,left:o}){return t<o&&(e=IE(o,{x:t,y:e},n),t=o),t>r&&(e=IE(r,{x:t,y:e},n),t=r),e<s&&(t=Hy(s,{x:t,y:e},n),e=s),e>i&&(t=Hy(i,{x:t,y:e},n),e=i),{x:t,y:e}}function qJ(t,e,n){const{x:s,y:r}=RE(t,e,n),{x:i,y:o}=RE(e,t,n);return{x:s,y:r,x2:i,y2:o,width:Math.abs(i-s),height:Math.abs(o-r)}}function YJ(t,{mouseX:e,mouseY:n},s=Ro,r){const{x:i,y:o,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],r),c=a-i,u=l-o,d=Iu(c)+Iu(u),f=d===0?-1:((e-i)*c+(n-o)*u)/d;let p,m;return f<0?(p=i,m=o):f>1?(p=a,m=l):(p=i+f*c,m=o+f*u),Iu(e-p)+Iu(n-m)<=s}function qy(t,{mouseX:e,mouseY:n},s,r){const i=t.label;return i.options.display&&i.inRange(e,n,r,s)}function GJ(t,e,n){const s=n.borderWidth,r=yn(n.padding),i=Xm(t.ctx,n),o=i.width+r.width+s,a=i.height+r.height+s;return XJ(e,n,{width:o,height:a,padding:r},t.chartArea)}function KJ(t){const{x:e,y:n,x2:s,y2:r}=t,i=Math.atan2(r-n,s-e);return i>ht/2?i-ht:i<ht/-2?i+ht:i}function XJ(t,e,n,s){const{width:r,height:i,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},d=e.rotation==="auto"?KJ(t):Zt(e.rotation),f=QJ(r,i,d),p=JJ(t,e,{labelSize:f,padding:o},s),m=t.cp?Vy(c,t.cp,u,p):L1(c,u,p),b={size:f.w,min:s.left,max:s.right,padding:o.left},x={size:f.h,min:s.top,max:s.bottom,padding:o.top},g=LE(m.x,b)+a,y=LE(m.y,x)+l;return{x:g-r/2,y:y-i/2,x2:g+r/2,y2:y+i/2,centerX:g,centerY:y,pointX:m.x,pointY:m.y,width:r,height:i,rotation:DN(d)}}function QJ(t,e,n){const s=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*s)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*s)}}function JJ(t,e,n,s){let r;const i=ZJ(t,s);return e.position==="start"?r=jE({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?r=1-jE({w:t.x-t.x2,h:t.y-t.y2},n,e,i):r=A1(1,e.position),r}function jE(t,e,n,s){const{labelSize:r,padding:i}=e,o=t.w*s.dx,a=t.h*s.dy,l=o>0&&(r.w/2+i.left-s.x)/o,c=a>0&&(r.h/2+i.top-s.y)/a;return Ym(Math.max(l,c),0,.25)}function ZJ(t,e){const{x:n,x2:s,y:r,y2:i}=t,o=Math.min(r,i)-e.top,a=Math.min(n,s)-e.left,l=e.bottom-Math.max(r,i),c=e.right-Math.max(n,s);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function LE(t,e){const{size:n,min:s,max:r,padding:i}=e,o=n/2;return n>r-s?(r+s)/2:(s>=t-i-o&&(t=s+i+o),r<=t+i+o&&(t=r-i-o),t)}function DD(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,s=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:FE(t,n),endAdjust:FE(t,s)}}function FE(t,e){if(!e||!e.display)return 0;const{length:n,width:s}=e,r=t.options.borderWidth/2,i={x:n,y:s+r};return Math.abs(Hy(0,i,{x:0,y:r}))}function Yy(t,e,n,s){if(!s||!s.display)return;const{length:r,width:i,fill:o,backgroundColor:a,borderColor:l}=s,c=Math.abs(e-r)+n;t.beginPath(),Ac(t,s),ti(t,s),t.moveTo(c,-i),t.lineTo(e+n,0),t.lineTo(c,i),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=s.borderShadowColor,t.stroke()}function eZ(t,e,n){const{x:s,y:r,x2:i,y2:o,centerX:a,centerY:l}=t,c=Math.atan2(o-r,i-s),u=O1(e.controlPoint,0),d={x:a+to(n,u.x,!1),y:l+to(n,u.y,!1)};return _a(d,{x:a,y:l},c)}function $E(t,{x:e,y:n},{angle:s,adjust:r},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(s),Yy(t,0,-r,i),t.restore())}function tZ(t,e,n,s){const{x:r,y:i,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:f}=DD(e),p={x:r,y:i},m={x:o,y:a},b=AE(p,n,m,0),x=AE(p,n,m,1)-ht,g=Vy(p,n,m,d/s),y=Vy(p,n,m,1-f/s),S=new Path2D;t.beginPath(),S.moveTo(g.x,g.y),S.quadraticCurveTo(n.x,n.y,y.x,y.y),t.shadowColor=l.borderShadowColor,t.stroke(S),e.path=S,e.ctx=t,$E(t,g,{angle:b,adjust:d},c),$E(t,y,{angle:x,adjust:f},u)}class Th extends wn{inRange(e,n,s,r){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y")return nZ({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),i,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],r),d=s==="y"?{start:l,end:u}:{start:a,end:c},f=_a({x:e,y:n},this.getCenterPoint(r),Zt(-i));return f[s]>=d.start-o-Ro&&f[s]<=d.end+o+Ro}getCenterPoint(e){return Ea(this,e)}draw(e){const{width:n,height:s,centerX:r,centerY:i,options:o}=this;e.save(),Km(e,this.getCenterPoint(),o.rotation),Ac(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=ti(e,o);e.ellipse(r,i,s/2,n/2,ht/2,0,2*ht),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return MD(e,n)}}Th.id="ellipseAnnotation";Th.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Oc.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Th.defaultRoutes={borderColor:"color",backgroundColor:"color"};Th.descriptors={label:{_fallback:!0}};function nZ(t,e,n,s){const{width:r,height:i,centerX:o,centerY:a}=e,l=r/2,c=i/2;if(l<=0||c<=0)return!1;const u=Zt(n||0),d=Math.cos(u),f=Math.sin(u),p=Math.pow(d*(t.x-o)+f*(t.y-a),2),m=Math.pow(f*(t.x-o)-d*(t.y-a),2);return p/Math.pow(l+s,2)+m/Math.pow(c+s,2)<=1.0001}class Jm extends wn{inRange(e,n,s,r){const{x:i,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return s!=="x"&&s!=="y"?XQ({x:e,y:n},this.getCenterPoint(r),c/2,u):dD(s==="y"?{start:o,end:l,value:n}:{start:i,end:a,value:e},u)}getCenterPoint(e){return Ea(this,e)}draw(e){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,Ac(e,n);const r=ti(e,n);rJ(e,this,this.centerX,this.centerY),r&&!Gm(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=s}resolveElementProperties(e,n){const s=TD(e,n);return s.initProperties=Dc(e,s,n),s}}Jm.id="pointAnnotation";Jm.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Jm.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Zm extends wn{inRange(e,n,s,r){if(s!=="x"&&s!=="y")return this.options.radius>=.1&&this.elements.length>1&&rZ(this.elements,e,n,r);const i=_a({x:e,y:n},this.getCenterPoint(r),Zt(-this.options.rotation)),o=this.elements.map(c=>s==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return i[s]>=a&&i[s]<=l}getCenterPoint(e){return Ea(this,e)}draw(e){const{elements:n,options:s}=this;e.save(),e.beginPath(),e.fillStyle=s.backgroundColor,Ac(e,s);const r=ti(e,s);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),r&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const s=TD(e,n),{sides:r,rotation:i}=n,o=[],a=2*ht/r;let l=i*w1;for(let c=0;c<r;c++,l+=a){const u=sZ(s,n,l);u.initProperties=Dc(e,s,n),o.push(u)}return s.elements=o,s}}Zm.id="polygonAnnotation";Zm.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Zm.defaultRoutes={borderColor:"color",backgroundColor:"color"};function sZ({centerX:t,centerY:e},{radius:n,borderWidth:s,hitTolerance:r},i){const o=(s+r)/2,a=Math.sin(i),l=Math.cos(i),c={x:t+a*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:t+a*(n+o),bY:e-l*(n+o)}}}function rZ(t,e,n,s){let r=!1,i=t[t.length-1].getProps(["bX","bY"],s);for(const o of t){const a=o.getProps(["bX","bY"],s);a.bY>n!=i.bY>n&&e<(i.bX-a.bX)*(n-a.bY)/(i.bY-a.bY)+a.bX&&(r=!r),i=a}return r}const Xi={box:Oc,doughnutLabel:Qm,ellipse:Th,label:Eh,line:Ph,point:Jm,polygon:Zm};Object.keys(Xi).forEach(t=>{Ot.describe(`elements.${Xi[t].id}`,{_fallback:"plugins.annotation.common"})});const iZ={update:Object.assign},oZ=j1.concat(L0),BE=(t,e)=>Ze(e)?Ky(t,e):t,Gy=t=>t==="color"||t==="font";function F1(t="line"){return Xi[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function aZ(t,e,n,s){const r=cZ(t,n.animations,s),i=e.annotations,o=hZ(e.elements,i);for(let a=0;a<i.length;a++){const l=i[a],c=AD(o,a,l.type),u=l.setContext(dZ(t,c,o,l)),d=c.resolveElementProperties(t,u);d.skip=lZ(d),"elements"in d&&(uZ(c,d.elements,u,r),delete d.elements),rs(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=OD(u),r.update(c,d)}}function lZ(t){return isNaN(t.x)||isNaN(t.y)}function cZ(t,e,n){return n==="reset"||n==="none"||n==="resize"?iZ:new I1(t,e)}function uZ(t,e,n,s){const r=t.elements||(t.elements=[]);r.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],a=o.properties,l=AD(r,i,o.type,o.initProperties),c=n[o.optionScope].override(o);a.options=OD(c),s.update(l,a)}}function AD(t,e,n,s){const r=Xi[F1(n)];let i=t[e];return(!i||!(i instanceof r))&&(i=t[e]=new r,Object.assign(i,s)),i}function OD(t){const e=Xi[F1(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,Ky(t,e.defaults),Ky(t,e.defaultRoutes));for(const s of oZ)n[s]=t[s];return n}function Ky(t,e){const n={};for(const s of Object.keys(e)){const r=e[s],i=t[s];Gy(s)&&Pt(i)?n[s]=i.map(o=>BE(o,r)):n[s]=BE(i,r)}return n}function dZ(t,e,n,s){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:s.id,type:"annotation"}))}function hZ(t,e){const n=e.length,s=t.length;if(s<n){const r=n-s;t.splice(s,0,...new Array(r))}else s>n&&t.splice(n,s-n);return t}var fZ="3.1.0";const bi=new Map,zE=t=>t.type!=="doughnutLabel",pZ=j1.concat(L0);var mZ={id:"annotation",version:fZ,beforeRegister(){QQ("chart.js","4.0",Zo.version)},afterRegister(){Zo.register(Xi)},afterUnregister(){Zo.unregister(Xi)},beforeInit(t){bi.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const s=bi.get(t),r=s.annotations=[];let i=n.annotations;Ze(i)?Object.keys(i).forEach(o=>{const a=i[o];Ze(a)&&(a.id=o,r.push(a))}):Pt(i)&&r.push(...i),NJ(r.filter(zE),t.scales)},afterDataLimits(t,e){const n=bi.get(t);IJ(t,e.scale,n.annotations.filter(zE).filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(t,e,n){const s=bi.get(t);_J(t,s,n),aZ(t,s,n,e.mode),s.visibleElements=s.elements.filter(r=>!r.skip&&r.options.display),MJ(t,s,n)},beforeDatasetsDraw(t,e,n){cu(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){cu(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){cu(t,e.index,n.clip)},beforeDraw(t,e,n){cu(t,"beforeDraw",n.clip)},afterDraw(t,e,n){cu(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const s=bi.get(t);EJ(s,e.event,n)&&(e.changed=!0)},afterDestroy(t){bi.delete(t)},getAnnotations(t){const e=bi.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return D1(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!pZ.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${Xi[F1(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:Gy,_fallback:!0},_indexable:Gy}},additionalOptionScopes:[""]};function cu(t,e,n){const{ctx:s,chartArea:r}=t,i=bi.get(t);n&&Um(s,r);const o=gZ(i.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)bZ(s,r,i,a);n&&Wm(s)}function gZ(t,e){const n=[];for(const s of t)if(s.options.drawTime===e&&n.push({element:s,main:!0}),s.elements&&s.elements.length)for(const r of s.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function bZ(t,e,n,s){const r=s.element;s.main?(PE(n,r,"beforeDraw"),r.draw(t,e),PE(n,r,"afterDraw")):r.draw(t,e)}Zo.register(zy,Uy,kp,Tu,SQ,IQ,wQ,mZ);const xZ=({minPrice:t,maxPrice:e,orders:n,pendingOrders:s=[],onAddOrder:r,onRemoveOrder:i,currentPrice:o,markPrice:a})=>{const l=k.useRef(null),[c,u]=k.useState(null),d=k.useMemo(()=>{const m=[...n,...s];return m.length>0?Math.max(...m.map(b=>b.amount),.1):.1},[n,s]),f=k.useMemo(()=>{const m=n.map(x=>({x:x.amount,y:x.price,id:x.id,side:x.side,isPending:!1})),b=s.map(x=>({x:x.amount,y:x.price,id:x.id,side:x.side,isPending:!0}));return{datasets:[{label:"Long Orders",data:m.filter(x=>{const g=n.find(y=>y.id===x.id);return(g==null?void 0:g.side)==="long"||(g==null?void 0:g.side)==="buy"||!(g!=null&&g.side)}),backgroundColor:"rgba(77, 171, 247, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Short Orders",data:m.filter(x=>{const g=n.find(y=>y.id===x.id);return(g==null?void 0:g.side)==="short"||(g==null?void 0:g.side)==="sell"}),backgroundColor:"rgba(255, 152, 0, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Pending Long",data:b.filter(x=>{const g=s.find(y=>y.id===x.id);return(g==null?void 0:g.side)==="long"||(g==null?void 0:g.side)==="buy"}),backgroundColor:"rgba(40, 167, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10},{label:"Pending Short",data:b.filter(x=>{const g=s.find(y=>y.id===x.id);return(g==null?void 0:g.side)==="short"||(g==null?void 0:g.side)==="sell"}),backgroundColor:"rgba(220, 53, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10}]}},[n,s]),p=k.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,backgroundColor:"#1a1a1a",plugins:{legend:{display:!0,position:"top",labels:{color:"#fff",font:{size:12}}},tooltip:{enabled:!0,callbacks:{label:m=>{const b=m.raw,x=[...n,...s].find(g=>g.id===b.id);return x?[`Price: ${x.price.toFixed(2)} USDC`,`Amount: ${x.amount.toFixed(4)} BTC`,x.isPending?`Pending ${x.side==="long"||x.side==="buy"?"Long":"Short"}`:""].filter(Boolean):`Price: ${b.y.toFixed(2)}, Amount: ${b.x.toFixed(4)}`}}},annotation:{annotations:{...o!==null&&o>=t&&o<=e?{currentPriceLine:{type:"line",xMin:0,xMax:d,yMin:o,yMax:o,borderColor:"#00ff00",borderWidth:2,borderDash:[5,5],label:{display:!0,content:`Current: ${o.toLocaleString()}`,position:"end",backgroundColor:"rgba(0, 255, 0, 0.8)",color:"#000",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y"}}:{},...a!==null&&a>=t&&a<=e?{markPriceLine:{type:"line",xMin:0,xMax:d,yMin:a,yMax:a,borderColor:"#ff0000",borderWidth:2,label:{display:!0,content:`Mark Price: ${a.toLocaleString()}`,position:"start",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y",arrowHeads:{start:{enabled:!1,fill:!1,length:0,width:0},end:{enabled:!0,fill:!0,length:15,width:10,backgroundColor:"#ff0000",borderColor:"#ff0000",borderWidth:2}}}}:{}}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Amount (BTC)",color:"#fff",font:{size:14,weight:"bold"}},min:0,max:d,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(m){return Number(m).toFixed(4)}},grid:{color:"#333"}},y:{type:"linear",title:{display:!0,text:"Price (USDC)",color:"#fff",font:{size:14,weight:"bold"}},min:t,max:e,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(m){return Number(m).toLocaleString()}},grid:{color:"#333"}}},onClick:(m,b)=>{if(!l.current)return;const x=l.current,g=x.canvas;if(!g)return;const y=g.getBoundingClientRect(),S=m.native;if(!S)return;const w=S.clientX-y.left,v=S.clientY-y.top,C=x.scales.x,_=x.scales.y,P=C.getValueForPixel(w),M=_.getValueForPixel(v);if(P==null||M===null||M===void 0)return;const I=[...n,...s].find(O=>{const j=C.getPixelForValue(O.amount),U=_.getPixelForValue(O.price);return Math.sqrt(Math.pow(w-j,2)+Math.pow(v-U,2))<=12});if(I)i(I.id);else{const O=Math.max(t,Math.min(e,M)),j=Math.max(.001,Math.min(1,P));r(O,j)}},onHover:(m,b)=>{if(!l.current)return;const x=l.current,g=x.canvas;if(!g)return;const y=g.getBoundingClientRect(),S=m.native;if(!S)return;const w=S.clientX-y.left,v=S.clientY-y.top,C=[...n,...s],_=x.scales.x,P=x.scales.y,M=C.find(E=>{const I=_.getPixelForValue(E.amount),O=P.getPixelForValue(E.price);return Math.sqrt(Math.pow(w-I,2)+Math.pow(v-O,2))<=10});u((M==null?void 0:M.id)||null)}}),[t,e,d,n,s,r,i,o,a]);return h.jsx("div",{className:"price-amount-chart-container",style:{height:"600px",position:"relative"},children:h.jsx("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #333",padding:"10px",height:"100%"},children:h.jsx(HQ,{ref:l,data:f,options:p,style:{cursor:c?"pointer":"crosshair"}})})})},yZ=({isOpen:t,onClose:e,minPrice:n,maxPrice:s,onMinPriceChange:r,onMaxPriceChange:i,markPrice:o,hasManualPriceChange:a,onResetToAuto:l,orderMode:c,onOrderModeChange:u,curveIntensity:d,onCurveIntensityChange:f,roundingStep:p,onRoundingStepChange:m})=>{const b=w=>Math.round(w/1.5/p)*p,x=w=>Math.round(w*1.5/p)*p;if(!t)return null;const g=o!=null&&o.mark_price?parseFloat(o.mark_price):null,y=g?b(g):null,S=g?x(g):null;return typeof document<"u"?io.createPortal(h.jsx("div",{className:"modal-overlay",onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:h.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:0,minWidth:"400px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[h.jsx("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:h.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:600,color:"rgba(255, 255, 255, 0.9)"},children:"Price Range Configuration"})}),h.jsx("div",{className:"modal-body",style:{padding:"2rem 1.5rem"},children:h.jsxs("div",{className:"trading-test-price-range-controls",children:[h.jsxs("div",{children:[h.jsxs("label",{children:["Rounding Step ($):",h.jsx("input",{type:"number",value:p,onChange:w=>m(Math.max(1,parseFloat(w.target.value)||100)),min:1,step:10,className:"trading-test-input"})]}),h.jsxs("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:["Prices will be rounded to the nearest $",p]})]}),h.jsxs("div",{children:[h.jsxs("label",{children:["Min Price (USDC):",h.jsx("input",{type:"number",value:n,onChange:w=>{r(parseFloat(w.target.value)||1e4)},min:1e3,max:s-1e3,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price / 1.5, rounded to $${p})`:""})]}),(o==null?void 0:o.mark_price)&&y!==null&&h.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?h.jsxs(h.Fragment,{children:["Manual override (Auto:"," ",g.toLocaleString()," / 1.5 ="," ",y.toLocaleString(),")"]}):h.jsxs(h.Fragment,{children:["Auto: ",g.toLocaleString()," / 1.5 ="," ",n.toLocaleString()]})})]}),h.jsxs("div",{children:[h.jsxs("label",{children:["Max Price (USDC):",h.jsx("input",{type:"number",value:s,onChange:w=>{i(parseFloat(w.target.value)||1e5)},min:n+1e3,max:1e6,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price  1.5, rounded to $${p})`:""})]}),(o==null?void 0:o.mark_price)&&S!==null&&h.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?h.jsxs(h.Fragment,{children:["Manual override (Auto:"," ",g.toLocaleString(),"  1.5 ="," ",S.toLocaleString(),")"]}):h.jsxs(h.Fragment,{children:["Auto: ",g.toLocaleString(),"  1.5 ="," ",s.toLocaleString()]})})]}),h.jsx("div",{children:h.jsxs("label",{children:["Order Mode:",h.jsxs("select",{value:c,onChange:w=>u(w.target.value),className:"trading-test-select",children:[h.jsx("option",{value:"random",children:"Random"}),h.jsx("option",{value:"curve",children:"Curve (Buy more at lower prices)"})]})]})}),c==="curve"&&h.jsx("div",{children:h.jsxs("label",{children:["Curve Intensity: ",d,h.jsx("input",{type:"range",value:d,onChange:w=>f(parseFloat(w.target.value)),min:1,max:5,step:.5,className:"trading-test-range"}),h.jsx("small",{children:"Higher = more aggressive buying at lower prices"})]})})]})}),h.jsxs("div",{className:"modal-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[a&&(o==null?void 0:o.mark_price)&&h.jsx("button",{onClick:l,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(77, 171, 247, 0.2)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Reset to Auto"}),h.jsx("div",{style:{display:"flex",gap:"1rem",marginLeft:"auto"},children:h.jsx("button",{onClick:e,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Close"})})]})]})}),document.body):null},wZ=({onClick:t,disabled:e,orderMode:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-primary",style:{backgroundColor:e?"#ccc":"#007bff",cursor:e?"not-allowed":"pointer"},children:["Submit Test Orders (",n==="random"?"Random":"Curve-Based",")"]}),vZ=({onClick:t,disabled:e,orderCount:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-success",style:{backgroundColor:e?"#ccc":"#28a745",cursor:e?"not-allowed":"pointer"},children:["Submit Chart Orders (",n," orders)"]}),SZ=({onClick:t,disabled:e})=>h.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-secondary",style:{cursor:e?"not-allowed":"pointer"},children:"Reset Chart"}),kZ=({onClick:t,disabled:e,pendingCount:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-info",style:{backgroundColor:e?"#ccc":"#17a2b8",cursor:e?"not-allowed":"pointer"},children:["Load Pending Orders ",n>0&&`(${n})`]}),Hb=({onClick:t,disabled:e,filter:n})=>{const s=n==="long"?"Cancel All Long":n==="short"?"Cancel All Short":"Cancel All Orders";return h.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-danger",style:{backgroundColor:e?"#ccc":"#dc3545",cursor:e?"not-allowed":"pointer"},children:s})};function CZ(){var ee,W,Q,H;const[t,e]=k.useState(Ec),[n,s]=k.useState(""),[r,i]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(1e4),[u,d]=k.useState(1e5),[f,p]=k.useState(null),[m,b]=k.useState("random"),[x,g]=k.useState(2),[y,S]=k.useState("long"),[w,v]=k.useState([]),[C,_]=k.useState([]),[P,M]=k.useState([]),[E,I]=k.useState(!1),[O,j]=k.useState(!1),[U,A]=k.useState(100),L=k.useRef(null),B=k.useRef(null),F=k.useRef(t),$=k.useRef(0),{markets:D,getSymbolByMarketId:z}=co({baseURL:t,sessionToken:"",autoFetchMarkets:!0}),{mnemonic:R,walletAddress:T,authToken:X,setMnemonic:ne}=Sa(),q=n?z(n):null,Z=q!==null?q:void 0,{markPrice:G}=wm({baseURL:t,wsURL:xh,marketId:n||"",symbol:Z}),[se,ae]=k.useState(!1);k.useEffect(()=>{if(G!=null&&G.mark_price&&!se){const J=parseFloat(G.mark_price);if(!isNaN(J)&&J>1e3){const we=Math.round(J*1.5/U)*U,te=Math.round(J/1.5/U)*U;te>0&&we>te&&(c(te),d(we))}}},[G==null?void 0:G.mark_price,se,U]),k.useEffect(()=>{R&&i(R),X&&a(X)},[R,X]);const Ne=D.length>0?(((ee=D.find(J=>J.active))==null?void 0:ee.market_id)??D[0].market_id)||(((Q=(W=D.find(J=>J.active))==null?void 0:W.id)==null?void 0:Q.toString())??((H=D[0].id)==null?void 0:H.toString())??""):null;k.useEffect(()=>{Ne&&!n&&s(Ne)},[Ne]),k.useEffect(()=>{F.current=t},[t]),k.useEffect(()=>{r&&r.trim()!==""&&(L.current=new ao({baseURL:F.current,mnemonic:r}),L.current.initialize().catch(J=>{console.error("Failed to initialize ExchangeClient:",J)}))},[r,t]),k.useEffect(()=>{B.current=new an({baseURL:F.current})},[t]),k.useEffect(()=>{if(!n||!B.current)return;const J=async()=>{try{const te=await B.current.getTicker(n);if(te!=null&&te.lastPrice){const ge=typeof te.lastPrice=="string"?parseFloat(te.lastPrice):te.lastPrice;p(ge)}}catch(te){console.error("Failed to fetch current price:",te)}};J();const we=setInterval(J,5e3);return()=>clearInterval(we)},[n]);const ke=k.useCallback(J=>{const we=[];for(let te=0;te<J;te++){const ge=l+Math.random()*(u-l),Pe=.001+Math.random()*.01;we.push({price:ge,amount:Pe})}return we.sort((te,ge)=>te.price-ge.price)},[l,u]),Ee=k.useCallback(J=>{const we=[],te=u-l;for(let ge=0;ge<J;ge++){const Pe=Math.random(),he=Math.pow(Pe,x),le=l+he*te,me=.001+(u-le)/te*.02;we.push({price:le,amount:me})}return we.sort((ge,Pe)=>ge.price-Pe.price)},[l,u,x]),Ue=k.useCallback(async()=>{if(!L.current||!n||!T){Oe.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}I(!0);const J=[];try{const te=m==="random"?ke(10):Ee(10),ge=Oe.info("Submitting test orders",{description:`Submitting ${te.length} ${m} orders...`});$.current=typeof ge=="number"?ge:0;for(const he of te){try{const ye=ut("1"),me=await L.current.placeOrder({marketId:n,side:y==="long"?"buy":"sell",orderType:"LIMIT",price:he.price,quantity:he.amount,timeInForce:"GTC",leverage:ye});J.push({success:!0,order:{price:he.price,amount:he.amount,orderId:me==null?void 0:me.order_id},timestamp:Date.now()})}catch(le){J.push({success:!1,order:{price:he.price,amount:he.amount},error:le.message,timestamp:Date.now()})}await new Promise(le=>setTimeout(le,200))}M(he=>[...he,...J]),$.current!==0&&(Oe.dismiss($.current),$.current=0);const Pe=J.filter(he=>he.success).length;Oe.success("Test orders submitted",{description:`${Pe}/${J.length} orders placed successfully.`})}catch(we){$.current!==0&&(Oe.dismiss($.current),$.current=0),Oe.error("Test submission failed",{description:we.message||"Unknown error occurred"})}finally{I(!1)}},[n,T,m,y,ke,Ee]),st=k.useCallback(async()=>{if(!L.current||!n||!T){Oe.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}if(w.length===0){Oe.warning("No chart orders",{description:"Please add orders to the chart first."});return}I(!0);const J=[];try{const we=Oe.info("Submitting chart orders",{description:`Submitting ${w.length} chart orders...`});$.current=typeof we=="number"?we:0;for(const ge of w){try{const he=ut("1"),le=await L.current.placeOrder({marketId:n,side:ge.side==="short"||ge.side==="sell"?"sell":"buy",orderType:"LIMIT",price:ge.price,quantity:ge.amount,timeInForce:"GTC",leverage:he});J.push({success:!0,order:{price:ge.price,amount:ge.amount,orderId:le==null?void 0:le.order_id},timestamp:Date.now()})}catch(Pe){J.push({success:!1,order:{price:ge.price,amount:ge.amount},error:Pe.message,timestamp:Date.now()})}await new Promise(Pe=>setTimeout(Pe,200))}M(ge=>[...ge,...J]),$.current!==0&&(Oe.dismiss($.current),$.current=0);const te=J.filter(ge=>ge.success).length;Oe.success("Chart orders submitted",{description:`${te}/${J.length} orders placed successfully.`})}catch(we){$.current!==0&&(Oe.dismiss($.current),$.current=0),Oe.error("Chart order submission failed",{description:we.message||"Unknown error occurred"})}finally{I(!1)}},[n,T,w]),N=k.useCallback(()=>{v([]),Oe.info("Chart reset",{description:"All chart orders have been cleared."})},[]),de=k.useCallback((J,we)=>{const te={price:J,amount:we,id:`chart-${Date.now()}-${Math.random()}`,side:y};v(ge=>[...ge,te])},[y]),be=k.useCallback(J=>{v(we=>we.filter(te=>te.id!==J)),_(we=>we.filter(te=>te.id!==J))},[]),re=k.useCallback(async()=>{if(!B.current||!T||!n){Oe.error("Setup required",{description:"Please ensure wallet address and market ID are configured."});return}try{Oe.info("Loading pending orders...");const J=await B.current.getOrders(T),we=(J==null?void 0:J.orders)||[];console.log(J);const te=we.filter(ge=>{const Pe=ge.market_id,he=(ge.status||"").toUpperCase();return Pe===n&&["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(he)}).map(ge=>{const le=(ge.side||"").toUpperCase().includes("BUY")?"long":"short";return{price:De(ge.price),amount:De(ge.quantity),id:`pending-${ge.order_id}`,side:le,orderId:ge.order_id,isPending:!0}});_(te),Oe.success("Pending orders loaded",{description:`Loaded ${te.length} pending orders.`})}catch(J){Oe.error("Failed to load pending orders",{description:J.message||"Unknown error occurred"})}},[T,n]),_e=k.useCallback(async J=>{if(!L.current||!B.current||!n||!T){Oe.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}try{const we=await B.current.getOrders(T),ge=((we==null?void 0:we.orders)||[]).filter(le=>{const ye=le.market_id,me=(le.status||"").toUpperCase();if(ye!==n||!["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(me))return!1;if(J==="all")return!0;const Ie=(le.side||"").toUpperCase(),He=Ie.includes("BUY"),Fe=Ie.includes("SELL");return J==="long"?He:J==="short"?Fe:!1});if(ge.length===0){Oe.info("No orders to cancel",{description:`No ${J} pending orders found.`});return}I(!0),Oe.info("Canceling orders",{description:`Canceling ${ge.length} ${J} orders...`});let Pe=0,he=0;for(const le of ge){try{const ye=le.order_id;await L.current.cancelOrder({orderId:ye,marketId:n}),Pe++}catch(ye){he++,console.error("Failed to cancel order:",ye)}await new Promise(ye=>setTimeout(ye,100))}await re(),Oe.success("Orders canceled",{description:`${Pe} orders canceled successfully${he>0?`, ${he} failed`:""}.`})}catch(we){Oe.error("Failed to cancel orders",{description:we.message||"Unknown error occurred"})}finally{I(!1)}},[n,T,re]);return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"Trading QA"}),h.jsx("p",{children:"Advanced trading test with price range, interactive chart, and multiple submission modes"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"trading-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:J=>e(J.target.value),className:"trading-test-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:J=>s(J.target.value),className:"trading-test-select",children:D.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),D.map(J=>{var ge;const we=J.market_id??((ge=J.id)==null?void 0:ge.toString())??"",te=J.moniker?J.moniker:J.symbol?J.symbol:`Market ID: ${we}`;return h.jsx("option",{value:we,children:te},we)})]})})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic:",h.jsx("input",{type:"text",value:r,onChange:J=>{i(J.target.value),ne(J.target.value)},placeholder:"Enter mnemonic",className:"trading-test-input"})]})}),f&&h.jsxs("div",{className:"trading-test-price-display",children:[h.jsx("strong",{children:"Current Price:"})," ",f.toLocaleString()," ","USDC"]})]})]}),h.jsxs("div",{className:"trading-test-tabs",children:[h.jsx("button",{className:`trading-test-tab ${y==="long"?"active":""}`,onClick:()=>S("long"),children:"Long (Buy)"}),h.jsx("button",{className:`trading-test-tab ${y==="short"?"active":""}`,onClick:()=>S("short"),children:"Short (Sell)"})]}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Interactive Price-Amount Chart"}),h.jsx("div",{className:"trading-test-chart-controls",children:h.jsxs("div",{className:"trading-test-chart-info",children:[h.jsxs("span",{children:["Orders on chart: ",w.length]}),h.jsxs("span",{onClick:()=>j(!0),style:{cursor:"pointer",textDecoration:"underline"},title:"Click to configure price range",children:["Price range: ",l.toLocaleString()," -"," ",u.toLocaleString()," USDC"]})]})}),h.jsx(xZ,{minPrice:l,maxPrice:u,orders:w,pendingOrders:C,onAddOrder:de,onRemoveOrder:be,currentPrice:f,markPrice:G!=null&&G.mark_price?parseFloat(G.mark_price):null}),h.jsxs("div",{className:"price-amount-chart-instructions",children:[h.jsx("p",{children:"Click on the chart to add orders. Click on existing orders to remove them."}),h.jsx("p",{children:"Y-axis: Price (USDC) | X-axis: Amount (BTC)"})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Order Submission"}),h.jsxs("div",{className:"trading-test-submission-buttons",children:[h.jsx(SZ,{onClick:N,disabled:w.length===0}),h.jsx(wZ,{onClick:Ue,disabled:E||!n||!T,orderMode:m}),h.jsx(vZ,{onClick:st,disabled:E||w.length===0||!n||!T,orderCount:w.length})]}),h.jsx("h2",{children:"Pending Orders Management"}),h.jsxs("div",{className:"trading-test-pending-orders-controls",children:[h.jsx(kZ,{onClick:re,disabled:!n||!T,pendingCount:C.length}),h.jsxs("div",{className:"trading-test-cancel-buttons",children:[h.jsx(Hb,{onClick:()=>_e("long"),disabled:E||!n||!T,filter:"long"}),h.jsx(Hb,{onClick:()=>_e("short"),disabled:E||!n||!T,filter:"short"}),h.jsx(Hb,{onClick:()=>_e("all"),disabled:E||!n||!T,filter:"all"})]})]})]}),P.length>0&&h.jsxs("div",{className:"trading-test-results",children:[h.jsx("h2",{children:"Test Results"}),h.jsxs("div",{className:"trading-test-results-summary",children:[h.jsxs("div",{children:["Total: ",P.length," | Success:"," ",P.filter(J=>J.success).length," | Failed:"," ",P.filter(J=>!J.success).length]}),h.jsx("button",{onClick:()=>M([]),className:"trading-test-button-secondary",children:"Clear Results"})]}),h.jsx("div",{className:"trading-test-results-list",children:P.slice(-20).map((J,we)=>h.jsx("div",{className:`trading-test-result-item ${J.success?"success":"error"}`,children:h.jsxs("div",{children:[h.jsxs("strong",{children:[J.success?"":""," Order @"," ",J.order.price.toFixed(2)," USDC"]}),h.jsxs("span",{children:["Amount: ",J.order.amount.toFixed(4)," BTC"]}),J.order.orderId&&h.jsxs("span",{children:["Order ID: ",J.order.orderId.substring(0,16),"..."]}),J.error&&h.jsx("span",{className:"error-text",children:J.error})]})},we))})]}),h.jsx(yZ,{isOpen:O,onClose:()=>j(!1),minPrice:l,maxPrice:u,onMinPriceChange:J=>{c(J),ae(!0)},onMaxPriceChange:J=>{d(J),ae(!0)},markPrice:G,hasManualPriceChange:se,onResetToAuto:()=>{if(G!=null&&G.mark_price){const J=parseFloat(G.mark_price);if(!isNaN(J)&&J>1e3){ae(!1);const we=Math.round(J*1.5/U)*U,te=Math.round(J/1.5/U)*U;te>0&&we>te&&(c(te),d(we))}}},orderMode:m,onOrderModeChange:b,curveIntensity:x,onCurveIntensityChange:g,roundingStep:U,onRoundingStepChange:A})]})}const Hf=[{symbol:"ETH",name:"Ethereum",address:"ETH",decimals:18},{symbol:"BTC",name:"Bitcoin",address:"BTC",decimals:8},{symbol:"USDC",name:"USD Coin",address:"USDC",decimals:6},{symbol:"USDT",name:"Tether",address:"USDT",decimals:6},{symbol:"DAI",name:"Dai Stablecoin",address:"DAI",decimals:18}];function _Z(){const[t,e]=k.useState(Ec),[n,s]=k.useState(Hf[0]),[r,i]=k.useState(Hf[2]),[o,a]=k.useState(""),[l,c]=k.useState(""),[u,d]=k.useState(!1),[f,p]=k.useState(!1),[m,b]=k.useState(!1),[x,g]=k.useState(.5),[y,S]=k.useState(null),[w,v]=k.useState(""),C=k.useRef(null),_=k.useRef(t),{mnemonic:P,walletAddress:M,setMnemonic:E}=Sa();k.useEffect(()=>{_.current=t},[t]),k.useEffect(()=>{P&&P.trim()!==""&&(C.current=new ao({baseURL:_.current,mnemonic:P}),C.current.initialize().catch(A=>{console.error("Failed to initialize ExchangeClient:",A)}))},[P,t]),k.useEffect(()=>{if(o&&parseFloat(o)>0&&n&&r){const L=parseFloat(o)*1;c(L.toFixed(6)),v(`1 ${n.symbol} = ${1 .toFixed(4)} ${r.symbol}`),S(.1)}else c(""),v(""),S(null)},[o,n,r]);const I=k.useCallback(()=>{const A=n;s(r),i(A);const L=o;a(l),c(L)},[n,r,o,l]),O=k.useCallback(async()=>{if(!C.current||!n||!r||!o){Oe.error("Setup required",{description:"Please ensure mnemonic and swap details are configured."});return}if(parseFloat(o)<=0){Oe.error("Invalid amount",{description:"Please enter a valid amount to swap."});return}if(!M){Oe.error("Wallet required",{description:"Please connect your wallet first."});return}b(!0);try{const A=parseFloat(o),B=parseFloat(l)*(1-x/100),F=Oe.info("Swapping tokens",{description:`Swapping ${o} ${n.symbol} for ${r.symbol}...`});await C.current.swap({fromToken:n.address,toToken:r.address,amountIn:A,minAmountOut:B}),Oe.dismiss(F),Oe.success("Swap successful",{description:`Successfully swapped ${o} ${n.symbol} for ${r.symbol}`}),a(""),c("")}catch(A){Oe.error("Swap failed",{description:A.message||"Unknown error occurred"})}finally{b(!1)}},[n,r,o,l,x,M]),j=k.useMemo(()=>!!n&&!!r&&!!o&&parseFloat(o)>0&&!!M&&!m&&n.symbol!==r.symbol,[n,r,o,M,m]),U=A=>({ETH:"",BTC:"",USDC:"$",USDT:"$",DAI:""})[A]||"";return h.jsxs("div",{className:"App-content-row",children:[h.jsxs("div",{className:"swap-test-header",children:[h.jsx("h1",{children:"Swap"}),h.jsx("p",{className:"swap-test-subtitle",children:"Swap anytime, anywhere"})]}),h.jsxs("div",{className:"App-section swap-config-section",children:[h.jsx("h3",{children:"Configuration"}),h.jsxs("div",{className:"swap-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:A=>e(A.target.value),className:"swap-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic:",h.jsx("input",{type:"text",value:P||"",onChange:A=>E(A.target.value),placeholder:"Enter mnemonic",className:"swap-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:M||"",disabled:!0,placeholder:"Auto-generated from mnemonic",className:"swap-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Slippage Tolerance (%):",h.jsx("input",{type:"number",value:x,onChange:A=>g(parseFloat(A.target.value)||.5),min:"0",max:"50",step:"0.1",className:"swap-input"})]})})]})]}),h.jsxs("div",{className:"swap-container",children:[h.jsxs("div",{className:"swap-card",children:[h.jsxs("div",{className:"swap-token-section",children:[h.jsx("div",{className:"swap-token-label",children:"Sell"}),h.jsxs("div",{className:"swap-token-input-group",children:[h.jsx("input",{type:"number",className:"swap-amount-input",placeholder:"0",value:o,onChange:A=>a(A.target.value),min:"0",step:"any"}),h.jsxs("div",{className:"swap-token-selector-wrapper",children:[h.jsx("button",{className:"swap-token-selector",onClick:()=>{d(!u),p(!1)},children:n?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"swap-token-icon",children:U(n.symbol)}),h.jsx("span",{className:"swap-token-symbol",children:n.symbol}),h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Select token"}),h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]})}),u&&h.jsx("div",{className:"swap-token-dropdown",children:Hf.map(A=>h.jsxs("button",{className:"swap-token-option",onClick:()=>{A.address===(r==null?void 0:r.address)?I():(s(A),d(!1))},children:[h.jsx("span",{className:"swap-token-icon",children:U(A.symbol)}),h.jsxs("div",{className:"swap-token-option-info",children:[h.jsx("span",{className:"swap-token-option-symbol",children:A.symbol}),h.jsx("span",{className:"swap-token-option-name",children:A.name})]})]},A.address))})]})]}),o&&parseFloat(o)>0&&h.jsxs("div",{className:"swap-token-value",children:["$",(parseFloat(o)*1).toFixed(2)]})]}),h.jsx("div",{className:"swap-button-container",children:h.jsx("button",{className:"swap-button-middle",onClick:I,"aria-label":"Swap tokens",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M4 6L8 2L12 6M12 10L8 14L4 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),h.jsxs("div",{className:"swap-token-section",children:[h.jsx("div",{className:"swap-token-label",children:"Buy"}),h.jsxs("div",{className:"swap-token-input-group",children:[h.jsx("input",{type:"number",className:"swap-amount-input",placeholder:"0",value:l,onChange:A=>c(A.target.value),min:"0",step:"any",readOnly:!0}),h.jsxs("div",{className:"swap-token-selector-wrapper",children:[h.jsx("button",{className:"swap-token-selector",onClick:()=>{p(!f),d(!1)},children:r?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"swap-token-icon",children:U(r.symbol)}),h.jsx("span",{className:"swap-token-symbol",children:r.symbol}),h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Select token"}),h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]})}),f&&h.jsx("div",{className:"swap-token-dropdown",children:Hf.map(A=>h.jsxs("button",{className:"swap-token-option",onClick:()=>{A.address===(n==null?void 0:n.address)?I():(i(A),p(!1))},children:[h.jsx("span",{className:"swap-token-icon",children:U(A.symbol)}),h.jsxs("div",{className:"swap-token-option-info",children:[h.jsx("span",{className:"swap-token-option-symbol",children:A.symbol}),h.jsx("span",{className:"swap-token-option-name",children:A.name})]})]},A.address))})]})]}),l&&parseFloat(l)>0&&h.jsxs("div",{className:"swap-token-value",children:["$",(parseFloat(l)*1).toFixed(2)]})]}),w&&h.jsxs("div",{className:"swap-info",children:[h.jsxs("div",{className:"swap-info-row",children:[h.jsx("span",{children:"Exchange Rate"}),h.jsx("span",{children:w})]}),y!==null&&h.jsxs("div",{className:"swap-info-row",children:[h.jsx("span",{children:"Price Impact"}),h.jsxs("span",{className:y>1?"swap-warning":"",children:[y.toFixed(2),"%"]})]}),h.jsxs("div",{className:"swap-info-row",children:[h.jsx("span",{children:"Slippage Tolerance"}),h.jsxs("span",{children:[x,"%"]})]})]}),h.jsx("button",{className:"swap-button-primary",onClick:O,disabled:!j,children:M?m?"Swapping...":(n==null?void 0:n.symbol)===(r==null?void 0:r.symbol)?"Select different tokens":!o||parseFloat(o)<=0?"Enter amount":"Swap":"Connect Wallet"})]}),h.jsx("div",{className:"swap-footer",children:h.jsx("p",{children:"Buy and sell crypto on 16+ networks including"})})]})]})}const uu=({onClick:t,disabled:e=!1,variant:n="primary",children:s})=>h.jsx("button",{className:`explorer-button ${n}`,onClick:t,disabled:e,children:s}),EZ=({wsURL:t,setWsURL:e,authToken:n,setAuthToken:s,deviceID:r,setDeviceID:i,shardId:o,setShardId:a,eventType:l,setEventType:c})=>h.jsxs("div",{className:"config-section",children:[h.jsx("h3",{children:"Configuration"}),h.jsxs("div",{className:"config-grid",children:[h.jsxs("div",{className:"config-item",children:[h.jsx("label",{htmlFor:"ws-url",children:"WebSocket URL"}),h.jsx("input",{id:"ws-url",type:"text",value:t,onChange:u=>e(u.target.value),placeholder:"ws://localhost:8080/ws"})]}),h.jsxs("div",{className:"config-item",children:[h.jsx("label",{htmlFor:"auth-token",children:"Auth Token (optional)"}),h.jsx("input",{id:"auth-token",type:"text",value:n,onChange:u=>s(u.target.value),placeholder:"JWT token"})]}),h.jsxs("div",{className:"config-item",children:[h.jsx("label",{htmlFor:"device-id",children:"Device ID"}),h.jsx("input",{id:"device-id",type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"device-id"})]}),h.jsxs("div",{className:"config-item",children:[h.jsx("label",{htmlFor:"shard-id",children:"Shard ID (optional filter)"}),h.jsx("input",{id:"shard-id",type:"text",value:o,onChange:u=>a(u.target.value),placeholder:"e.g., 1, 2, 3"})]}),h.jsxs("div",{className:"config-item",children:[h.jsx("label",{htmlFor:"event-type",children:"Event Type (optional filter)"}),h.jsx("input",{id:"event-type",type:"text",value:l,onChange:u=>c(u.target.value),placeholder:"e.g., new_vertex, new_tx, validator_update"})]})]})]}),PZ=({message:t})=>{const{event:e,timestamp:n,type:s}=t,r=()=>{const{data:i}=e;switch(i.type){case"vertex":return h.jsx(TZ,{data:i});case"tx":return h.jsx(MZ,{data:i});case"unconfirmed_tx":return h.jsx(IZ,{data:i});case"validator":return h.jsx(NZ,{data:i});default:return h.jsx(DZ,{data:i})}};return h.jsxs("div",{className:`consensus-event-item ${s}`,children:[h.jsx("div",{className:"event-header",children:h.jsxs("div",{className:"event-meta",children:[h.jsx("span",{className:"event-type-badge",children:e.event_type}),h.jsx("span",{className:"event-time",children:new Date(n).toLocaleString()}),h.jsxs("span",{className:"event-shard",children:["Shard: ",e.source_shard]})]})}),h.jsxs("div",{className:"event-body",children:[h.jsxs("div",{className:"event-data-type",children:[h.jsx("strong",{children:"Data Type:"})," ",e.data.type]}),r(),h.jsxs("details",{className:"raw-data-details",children:[h.jsx("summary",{children:"View Raw JSON"}),h.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(e,null,2)})]})]})]})},TZ=({data:t})=>h.jsxs("div",{className:"event-details vertex-details",children:[h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"ID:"}),h.jsx("span",{className:"detail-value",children:t.id})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Shard ID:"}),h.jsx("span",{className:"detail-value",children:t.shard_id})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Status:"}),h.jsx("span",{className:"detail-value",children:t.status})]}),t.parent_ids&&t.parent_ids.length>0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Parent IDs:"}),h.jsx("span",{className:"detail-value",children:t.parent_ids.join(", ")})]}),t.tx_count!==void 0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"TX Count:"}),h.jsx("span",{className:"detail-value",children:t.tx_count})]}),t.state_root&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"State Root:"}),h.jsx("span",{className:"detail-value",children:t.state_root})]}),t.qc_achieved!==void 0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"QC Achieved:"}),h.jsx("span",{className:"detail-value",children:t.qc_achieved?"Yes":"No"})]}),t.qc_vote_count!==void 0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"QC Vote Count:"}),h.jsx("span",{className:"detail-value",children:t.qc_vote_count})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Timestamp:"}),h.jsx("span",{className:"detail-value",children:new Date(t.timestamp*1e3).toLocaleString()})]})]}),MZ=({data:t})=>h.jsxs("div",{className:"event-details tx-details",children:[h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"TX Hash:"}),h.jsx("span",{className:"detail-value",children:t.txhash||t.id})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Shard ID:"}),h.jsx("span",{className:"detail-value",children:t.shard_id})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Status:"}),h.jsx("span",{className:"detail-value",children:t.status})]}),t.from_address&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"From:"}),h.jsx("span",{className:"detail-value",children:t.from_address})]}),t.to_address&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"To:"}),h.jsx("span",{className:"detail-value",children:t.to_address})]}),t.amount&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Amount:"}),h.jsx("span",{className:"detail-value",children:t.amount})]}),t.tx_type&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"TX Type:"}),h.jsx("span",{className:"detail-value",children:t.tx_type})]}),t.nonce!==void 0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Nonce:"}),h.jsx("span",{className:"detail-value",children:t.nonce})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Timestamp:"}),h.jsx("span",{className:"detail-value",children:new Date(t.timestamp*1e3).toLocaleString()})]})]}),IZ=({data:t})=>h.jsxs("div",{className:"event-details unconfirmed-tx-details",children:[h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"TX Hash:"}),h.jsx("span",{className:"detail-value",children:t.txhash||t.id})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Status:"}),h.jsx("span",{className:"detail-value status-pending",children:t.status})]}),t.from_address&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"From:"}),h.jsx("span",{className:"detail-value",children:t.from_address})]}),t.to_address&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"To:"}),h.jsx("span",{className:"detail-value",children:t.to_address})]}),t.amount&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Amount:"}),h.jsx("span",{className:"detail-value",children:t.amount})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Timestamp:"}),h.jsx("span",{className:"detail-value",children:new Date(t.timestamp*1e3).toLocaleString()})]})]}),NZ=({data:t})=>h.jsxs("div",{className:"event-details validator-details",children:[h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Validator ID:"}),h.jsx("span",{className:"detail-value",children:t.validator_id||t.id})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Shard ID:"}),h.jsx("span",{className:"detail-value",children:t.shard_id})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Status:"}),h.jsx("span",{className:"detail-value",children:t.validator_status||t.status})]}),t.voting_power!==void 0&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Voting Power:"}),h.jsx("span",{className:"detail-value",children:t.voting_power})]}),t.public_key&&h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Public Key:"}),h.jsx("span",{className:"detail-value public-key",children:t.public_key})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Timestamp:"}),h.jsx("span",{className:"detail-value",children:new Date(t.timestamp*1e3).toLocaleString()})]})]}),DZ=({data:t})=>h.jsxs("div",{className:"event-details generic-details",children:[h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"ID:"}),h.jsx("span",{className:"detail-value",children:t.id})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Type:"}),h.jsx("span",{className:"detail-value",children:t.type})]}),h.jsxs("div",{className:"detail-row",children:[h.jsx("span",{className:"detail-label",children:"Status:"}),h.jsx("span",{className:"detail-value",children:t.status})]})]}),AZ=({events:t})=>t.length===0?h.jsx("div",{className:"consensus-event-list empty",children:h.jsx("p",{children:"No events received yet. Connect and subscribe to start receiving consensus events."})}):h.jsxs("div",{className:"consensus-event-list",children:[h.jsx("div",{className:"event-list-header",children:h.jsxs("h3",{children:["Consensus Events (",t.length,")"]})}),h.jsx("div",{className:"event-items",children:t.map(e=>h.jsx(PZ,{message:e},e.id))})]});function OZ(){const[t,e]=k.useState(xh),[n,s]=k.useState(()=>localStorage.getItem("authToken")||""),[r,i]=k.useState(vm),[o,a]=k.useState(""),[l,c]=k.useState(""),[u,d]=k.useState(!1),[f,p]=k.useState([]),[m,b]=k.useState(!1),[x,g]=k.useState(!1),y=k.useRef(null),S=k.useRef(0),w=(E,I="success")=>{const O={id:S.current++,timestamp:Date.now(),event:E,type:I};p(j=>[O,...j].slice(0,1e3))},v=async()=>{if(!x){g(!0),w({event_type:"info",data:{id:"connection",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"connecting",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"info");try{const E=new URL(t);if(E.protocol!=="ws:"&&E.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol")}catch{w({event_type:"error",data:{id:"connection-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error"),g(!1);return}if(y.current)try{y.current.disconnect()}catch{}try{y.current=new k5({url:t,authToken:n||void 0,walletAddress:void 0,deviceID:r||void 0}),y.current.onStateChange(E=>{E==="connected"?(d(!0),w({event_type:"info",data:{id:"connection-success",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"connected",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"success")):E==="disconnected"&&(d(!1),b(!1))}),await y.current.connect()}catch{w({event_type:"error",data:{id:"connection-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error"),d(!1)}finally{g(!1)}}},C=()=>{if(y.current)try{y.current.disconnect(),d(!1),b(!1),w({event_type:"info",data:{id:"disconnected",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"disconnected",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"info")}catch{w({event_type:"error",data:{id:"disconnect-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error")}},_=()=>{var I;if(!((I=y.current)!=null&&I.isConnected())){w({event_type:"error",data:{id:"subscription-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error");return}const E=O=>{w(O,"success")};try{const O={};o&&(O.shard_id=o),l&&(O.event_type=l),y.current.subscribeConsensusFlat(E,Object.keys(O).length>0?O:void 0),b(!0),w({event_type:"info",data:{id:"subscription-success",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"subscribed",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"success")}catch{w({event_type:"error",data:{id:"subscription-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error")}},P=()=>{var E;if((E=y.current)!=null&&E.isConnected())try{y.current.unsubscribeConsensusFlat(),b(!1),w({event_type:"info",data:{id:"unsubscribed",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"unsubscribed",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"info")}catch{w({event_type:"error",data:{id:"unsubscribe-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error")}},M=()=>{p([])};return h.jsxs("div",{className:"explorer-test-page",children:[h.jsxs("div",{className:"explorer-test-header",children:[h.jsx("h2",{children:"Consensus Explorer Test"}),h.jsx("p",{children:"Test the consensus_flat WebSocket channel to view flattened consensus events from Morpheum's DAG-based consensus system."})]}),h.jsx(EZ,{wsURL:t,setWsURL:e,authToken:n,setAuthToken:s,deviceID:r,setDeviceID:i,shardId:o,setShardId:a,eventType:l,setEventType:c}),h.jsxs("div",{className:"explorer-test-controls",children:[h.jsxs("div",{className:"control-buttons",children:[h.jsx(uu,{onClick:v,disabled:x||u,variant:"primary",children:x?"Connecting...":"Connect"}),h.jsx(uu,{onClick:C,disabled:!u,variant:"secondary",children:"Disconnect"}),h.jsx(uu,{onClick:_,disabled:!u||m,variant:"primary",children:"Subscribe"}),h.jsx(uu,{onClick:P,disabled:!u||!m,variant:"secondary",children:"Unsubscribe"}),h.jsx(uu,{onClick:M,variant:"secondary",children:"Clear Events"})]}),h.jsxs("div",{className:"connection-status",children:[h.jsx("span",{className:`status-indicator ${u?"connected":"disconnected"}`,children:u?" Connected":" Disconnected"}),m&&h.jsx("span",{className:"status-indicator subscribed",children:" Subscribed to consensus_flat"}),h.jsxs("span",{className:"event-count",children:["Events: ",f.length]})]})]}),h.jsx(AZ,{events:f})]})}const RZ=k.createContext(void 0),du="onboard_mnemonic",hu="onboard_wallet_address",jZ=({children:t})=>{const[e,n]=k.useState(null),[s,r]=k.useState(null);k.useEffect(()=>{const l=localStorage.getItem(hu),c=localStorage.getItem(du),u=localStorage.getItem("generatedAddress"),d=localStorage.getItem("mnemonic");l&&c?(n(l),r(c)):u&&d&&(n(u),r(d),localStorage.setItem(hu,u),localStorage.setItem(du,d),localStorage.removeItem("generatedAddress"),localStorage.removeItem("mnemonic"))},[]),k.useEffect(()=>{const l=c=>{c.key===hu?n(c.newValue):c.key===du&&r(c.newValue)};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const i=k.useCallback((l,c)=>{n(l),r(c),localStorage.setItem(hu,l),localStorage.setItem(du,c)},[]),o=k.useCallback(()=>{n(null),r(null),localStorage.removeItem(hu),localStorage.removeItem(du)},[]),a=k.useMemo(()=>({generatedAddress:e,mnemonic:s,setGeneratedData:i,clearGeneratedData:o}),[e,s,i,o]);return h.jsx(RZ.Provider,{value:a,children:t})};function LZ(){const{wasmStatus:t,isReady:e}=R9(),[n,s]=k.useState("main");return k.useEffect(()=>{const r=()=>{s("websocket-test")};return window.addEventListener("navigateToWebSocketTest",r),()=>{window.removeEventListener("navigateToWebSocketTest",r)}},[]),h.jsxs(jZ,{children:[h.jsxs("div",{className:"App",children:[h.jsxs("header",{className:"App-header",children:[h.jsx("h3",{children:"SDK, Testing, QA"}),h.jsxs("nav",{children:[h.jsx("button",{onClick:()=>s("main"),className:`nav-button ${n==="main"?"active":""}`,children:"Morm Signer"}),h.jsx("button",{onClick:()=>s("sdk-test"),className:`nav-button ${n==="sdk-test"?"active":""}`,children:"SDK Trade API"}),h.jsx("button",{onClick:()=>s("websocket-test"),className:`nav-button ${n==="websocket-test"?"active":""}`,children:"WebSocket Test"}),h.jsx("button",{onClick:()=>s("hooks-test"),className:`nav-button ${n==="hooks-test"?"active":""}`,children:"Hooks Test"}),h.jsx("button",{onClick:()=>s("layout-test"),className:`nav-button ${n==="layout-test"?"active":""}`,children:"Layout Test"}),h.jsx("button",{onClick:()=>s("trading-test"),className:`nav-button ${n==="trading-test"?"active":""}`,children:"Trading Test"}),h.jsx("button",{onClick:()=>s("swap-test"),className:`nav-button ${n==="swap-test"?"active":""}`,children:"Swap Test"}),h.jsx("button",{onClick:()=>s("explorer-test"),className:`nav-button ${n==="explorer-test"?"active":""}`,children:"Explorer Test"})]})]}),h.jsx("main",{className:"App-main",children:n==="sdk-test"?h.jsx(mF,{}):n==="websocket-test"?h.jsx(NB,{}):n==="layout-test"?h.jsx(TW,{}):n==="hooks-test"?h.jsx(zY,{}):n==="trading-test"?h.jsx(CZ,{}):n==="swap-test"?h.jsx(_Z,{}):n==="explorer-test"?h.jsx(OZ,{}):h.jsxs(h.Fragment,{children:[h.jsx("h1",{children:"Morm SDK"}),h.jsx("p",{children:"Test WebAssembly integration for morm_signer with Agent Delegation"}),h.jsx(lF,{status:t}),e&&h.jsxs("div",{className:"App-content",children:[h.jsx("div",{className:"App-section",children:h.jsx(rF,{})}),h.jsx("div",{className:"App-section",children:h.jsx(iF,{})}),h.jsx("div",{className:"App-section",children:h.jsx(oF,{})}),h.jsx("div",{className:"App-section",children:h.jsx(aF,{})})]}),t.error&&h.jsxs("div",{className:"App-error",children:[h.jsx("h3",{children:"Error Loading WASM"}),h.jsx("p",{children:t.error}),h.jsx("p",{children:"Make sure the morm_signer.wasm file is available in the public directory."})]})]})})]}),h.jsx(mW,{position:"bottom-right",toastOptions:{duration:4e3,style:{color:"var(--foreground)",border:"1px solid var(--border)"}}})]})}const UE=$T({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),WE=$T({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://11155111.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0}),FZ=AO({chains:[UE,WE],connectors:[rm()],transports:{[UE.id]:gk(),[WE.id]:gk()}}),$Z=new F6,BZ=Vb.createRoot(document.getElementById("root"));BZ.render(h.jsx(fe.StrictMode,{children:h.jsx(jO,{config:FZ,children:h.jsx(B6,{client:$Z,children:h.jsx(LZ,{})})})}));
//# sourceMappingURL=index-Cg4FrgGv.js.map
