var mT=Object.defineProperty;var Hy=t=>{throw TypeError(t)};var xT=(t,e,n)=>e in t?mT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ie=(t,e,n)=>xT(t,typeof e!="symbol"?e+"":e,n),V0=(t,e,n)=>e.has(t)||Hy("Cannot "+n);var je=(t,e,n)=>(V0(t,e,"read from private field"),n?n.call(t):e.get(t)),Ze=(t,e,n)=>e.has(t)?Hy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Te=(t,e,n,s)=>(V0(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),an=(t,e,n)=>(V0(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function _2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function bT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var E2={exports:{}},jf={},P2={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tu=Symbol.for("react.element"),yT=Symbol.for("react.portal"),wT=Symbol.for("react.fragment"),vT=Symbol.for("react.strict_mode"),kT=Symbol.for("react.profiler"),ST=Symbol.for("react.provider"),CT=Symbol.for("react.context"),_T=Symbol.for("react.forward_ref"),ET=Symbol.for("react.suspense"),PT=Symbol.for("react.memo"),TT=Symbol.for("react.lazy"),Vy=Symbol.iterator;function MT(t){return t===null||typeof t!="object"?null:(t=Vy&&t[Vy]||t["@@iterator"],typeof t=="function"?t:null)}var T2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M2=Object.assign,I2={};function fl(t,e,n){this.props=t,this.context=e,this.refs=I2,this.updater=n||T2}fl.prototype.isReactComponent={};fl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function N2(){}N2.prototype=fl.prototype;function kx(t,e,n){this.props=t,this.context=e,this.refs=I2,this.updater=n||T2}var Sx=kx.prototype=new N2;Sx.constructor=kx;M2(Sx,fl.prototype);Sx.isPureReactComponent=!0;var Yy=Array.isArray,D2=Object.prototype.hasOwnProperty,Cx={current:null},A2={key:!0,ref:!0,__self:!0,__source:!0};function R2(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)D2.call(e,s)&&!A2.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Tu,type:t,key:i,ref:o,props:r,_owner:Cx.current}}function IT(t,e){return{$$typeof:Tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _x(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tu}function NT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gy=/\/+/g;function Y0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NT(""+t.key):e.toString(36)}function Jd(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tu:case yT:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+Y0(o,0):s,Yy(r)?(n="",t!=null&&(n=t.replace(Gy,"$&/")+"/"),Jd(r,e,n,"",function(c){return c})):r!=null&&(_x(r)&&(r=IT(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Gy,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",Yy(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+Y0(i,a);o+=Jd(i,e,n,l,r)}else if(l=MT(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+Y0(i,a++),o+=Jd(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qu(t,e,n){if(t==null)return t;var s=[],r=0;return Jd(t,s,"","",function(i){return e.call(n,i,r++)}),s}function DT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cn={current:null},Zd={transition:null},AT={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:Zd,ReactCurrentOwner:Cx};function O2(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:Qu,forEach:function(t,e,n){Qu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qu(t,function(){e++}),e},toArray:function(t){return Qu(t,function(e){return e})||[]},only:function(t){if(!_x(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};et.Component=fl;et.Fragment=wT;et.Profiler=kT;et.PureComponent=kx;et.StrictMode=vT;et.Suspense=ET;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AT;et.act=O2;et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=M2({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Cx.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)D2.call(e,l)&&!A2.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:Tu,type:t.type,key:r,ref:i,props:s,_owner:o}};et.createContext=function(t){return t={$$typeof:CT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ST,_context:t},t.Consumer=t};et.createElement=R2;et.createFactory=function(t){var e=R2.bind(null,t);return e.type=t,e};et.createRef=function(){return{current:null}};et.forwardRef=function(t){return{$$typeof:_T,render:t}};et.isValidElement=_x;et.lazy=function(t){return{$$typeof:TT,_payload:{_status:-1,_result:t},_init:DT}};et.memo=function(t,e){return{$$typeof:PT,type:t,compare:e===void 0?null:e}};et.startTransition=function(t){var e=Zd.transition;Zd.transition={};try{t()}finally{Zd.transition=e}};et.unstable_act=O2;et.useCallback=function(t,e){return Cn.current.useCallback(t,e)};et.useContext=function(t){return Cn.current.useContext(t)};et.useDebugValue=function(){};et.useDeferredValue=function(t){return Cn.current.useDeferredValue(t)};et.useEffect=function(t,e){return Cn.current.useEffect(t,e)};et.useId=function(){return Cn.current.useId()};et.useImperativeHandle=function(t,e,n){return Cn.current.useImperativeHandle(t,e,n)};et.useInsertionEffect=function(t,e){return Cn.current.useInsertionEffect(t,e)};et.useLayoutEffect=function(t,e){return Cn.current.useLayoutEffect(t,e)};et.useMemo=function(t,e){return Cn.current.useMemo(t,e)};et.useReducer=function(t,e,n){return Cn.current.useReducer(t,e,n)};et.useRef=function(t){return Cn.current.useRef(t)};et.useState=function(t){return Cn.current.useState(t)};et.useSyncExternalStore=function(t,e,n){return Cn.current.useSyncExternalStore(t,e,n)};et.useTransition=function(){return Cn.current.useTransition()};et.version="18.3.1";P2.exports=et;var k=P2.exports;const oe=_2(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT=k,OT=Symbol.for("react.element"),LT=Symbol.for("react.fragment"),jT=Object.prototype.hasOwnProperty,FT=RT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BT={key:!0,ref:!0,__self:!0,__source:!0};function L2(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)jT.call(e,s)&&!BT.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:OT,type:t,key:i,ref:o,props:r,_owner:FT.current}}jf.Fragment=LT;jf.jsx=L2;jf.jsxs=L2;E2.exports=jf;var h=E2.exports,Ig={},j2={exports:{}},Qn={},F2={exports:{}},B2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,B){var M=O.length;O.push(B);e:for(;0<M;){var H=M-1>>>1,j=O[H];if(0<r(j,B))O[H]=B,O[M]=j,M=H;else break e}}function n(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var B=O[0],M=O.pop();if(M!==B){O[0]=M;e:for(var H=0,j=O.length,P=j>>>1;H<P;){var X=2*(H+1)-1,se=O[X],K=X+1,J=O[K];if(0>r(se,M))K<j&&0>r(J,se)?(O[H]=J,O[K]=M,H=K):(O[H]=se,O[X]=M,H=X);else if(K<j&&0>r(J,M))O[H]=J,O[K]=M,H=K;else break e}}return B}function r(O,B){var M=O.sortIndex-B.sortIndex;return M!==0?M:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,m=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var B=n(c);B!==null;){if(B.callback===null)s(c);else if(B.startTime<=O)s(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function y(O){if(x=!1,v(O),!m)if(n(l)!==null)m=!0,F(S);else{var B=n(c);B!==null&&$(y,B.startTime-O)}}function S(O,B){m=!1,x&&(x=!1,g(T),T=-1),p=!0;var M=f;try{for(v(B),d=n(l);d!==null&&(!(d.expirationTime>B)||O&&!D());){var H=d.callback;if(typeof H=="function"){d.callback=null,f=d.priorityLevel;var j=H(d.expirationTime<=B);B=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&s(l),v(B)}else s(l);d=n(l)}if(d!==null)var P=!0;else{var X=n(c);X!==null&&$(y,X.startTime-B),P=!1}return P}finally{d=null,f=M,p=!1}}var C=!1,E=null,T=-1,N=5,_=-1;function D(){return!(t.unstable_now()-_<N)}function A(){if(E!==null){var O=t.unstable_now();_=O;var B=!0;try{B=E(!0,O)}finally{B?R():(C=!1,E=null)}}else C=!1}var R;if(typeof b=="function")R=function(){b(A)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,L=z.port2;z.port1.onmessage=A,R=function(){L.postMessage(null)}}else R=function(){w(A,0)};function F(O){E=O,C||(C=!0,R())}function $(O,B){T=w(function(){O(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,F(S))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var M=f;f=B;try{return O()}finally{f=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var M=f;f=O;try{return B()}finally{f=M}},t.unstable_scheduleCallback=function(O,B,M){var H=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?H+M:H):M=H,O){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=M+j,O={id:u++,callback:B,priorityLevel:O,startTime:M,expirationTime:j,sortIndex:-1},M>H?(O.sortIndex=M,e(c,O),n(l)===null&&O===n(c)&&(x?(g(T),T=-1):x=!0,$(y,M-H))):(O.sortIndex=j,e(l,O),m||p||(m=!0,F(S))),O},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(O){var B=f;return function(){var M=f;f=B;try{return O.apply(this,arguments)}finally{f=M}}}})(B2);F2.exports=B2;var $T=F2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT=k,Kn=$T;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $2=new Set,Hc={};function Eo(t,e){Ua(t,e),Ua(t+"Capture",e)}function Ua(t,e){for(Hc[t]=e,t=0;t<e.length;t++)$2.add(e[t])}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ng=Object.prototype.hasOwnProperty,UT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qy={},Ky={};function WT(t){return Ng.call(Ky,t)?!0:Ng.call(qy,t)?!1:UT.test(t)?Ky[t]=!0:(qy[t]=!0,!1)}function HT(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VT(t,e,n,s){if(e===null||typeof e>"u"||HT(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ex=/[\-:]([a-z])/g;function Px(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ex,Px);on[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ex,Px);on[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ex,Px);on[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tx(t,e,n,s){var r=on.hasOwnProperty(e)?on[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VT(e,n,r,s)&&(n=null),s||r===null?WT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Ar=zT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),Wo=Symbol.for("react.portal"),Ho=Symbol.for("react.fragment"),Mx=Symbol.for("react.strict_mode"),Dg=Symbol.for("react.profiler"),z2=Symbol.for("react.provider"),U2=Symbol.for("react.context"),Ix=Symbol.for("react.forward_ref"),Ag=Symbol.for("react.suspense"),Rg=Symbol.for("react.suspense_list"),Nx=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),W2=Symbol.for("react.offscreen"),Xy=Symbol.iterator;function Il(t){return t===null||typeof t!="object"?null:(t=Xy&&t[Xy]||t["@@iterator"],typeof t=="function"?t:null)}var Mt=Object.assign,G0;function oc(t){if(G0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);G0=e&&e[1]||""}return`
`+G0+t}var q0=!1;function K0(t,e){if(!t||q0)return"";q0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{q0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oc(t):""}function YT(t){switch(t.tag){case 5:return oc(t.type);case 16:return oc("Lazy");case 13:return oc("Suspense");case 19:return oc("SuspenseList");case 0:case 2:case 15:return t=K0(t.type,!1),t;case 11:return t=K0(t.type.render,!1),t;case 1:return t=K0(t.type,!0),t;default:return""}}function Og(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ho:return"Fragment";case Wo:return"Portal";case Dg:return"Profiler";case Mx:return"StrictMode";case Ag:return"Suspense";case Rg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case U2:return(t.displayName||"Context")+".Consumer";case z2:return(t._context.displayName||"Context")+".Provider";case Ix:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nx:return e=t.displayName||null,e!==null?e:Og(t.type)||"Memo";case qr:e=t._payload,t=t._init;try{return Og(t(e))}catch{}}return null}function GT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Og(e);case 8:return e===Mx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function H2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qT(t){var e=H2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zu(t){t._valueTracker||(t._valueTracker=qT(t))}function V2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=H2(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Th(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lg(t,e){var n=e.checked;return Mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qy(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=yi(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Y2(t,e){e=e.checked,e!=null&&Tx(t,"checked",e,!1)}function jg(t,e){Y2(t,e);var n=yi(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fg(t,e.type,yi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fg(t,e,n){(e!=="number"||Th(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ac=Array.isArray;function aa(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+yi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Bg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return Mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(ac(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yi(n)}}function G2(t,e){var n=yi(e.value),s=yi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function ew(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $g(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ed,K2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ed=ed||document.createElement("div"),ed.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ed.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KT=["Webkit","ms","Moz","O"];Object.keys(Sc).forEach(function(t){KT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sc[e]=Sc[t]})});function X2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sc.hasOwnProperty(t)&&Sc[t]?(""+e).trim():e+"px"}function Q2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=X2(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var XT=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zg(t,e){if(e){if(XT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function Ug(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wg=null;function Dx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hg=null,la=null,ca=null;function tw(t){if(t=Nu(t)){if(typeof Hg!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=Uf(e),Hg(t.stateNode,t.type,e))}}function J2(t){la?ca?ca.push(t):ca=[t]:la=t}function Z2(){if(la){var t=la,e=ca;if(ca=la=null,tw(t),e)for(t=0;t<e.length;t++)tw(e[t])}}function eC(t,e){return t(e)}function tC(){}var X0=!1;function nC(t,e,n){if(X0)return t(e,n);X0=!0;try{return eC(t,e,n)}finally{X0=!1,(la!==null||ca!==null)&&(tC(),Z2())}}function Yc(t,e){var n=t.stateNode;if(n===null)return null;var s=Uf(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var Vg=!1;if(Pr)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){Vg=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{Vg=!1}function QT(t,e,n,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Cc=!1,Mh=null,Ih=!1,Yg=null,JT={onError:function(t){Cc=!0,Mh=t}};function ZT(t,e,n,s,r,i,o,a,l){Cc=!1,Mh=null,QT.apply(JT,arguments)}function e4(t,e,n,s,r,i,o,a,l){if(ZT.apply(this,arguments),Cc){if(Cc){var c=Mh;Cc=!1,Mh=null}else throw Error(fe(198));Ih||(Ih=!0,Yg=c)}}function Po(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nw(t){if(Po(t)!==t)throw Error(fe(188))}function t4(t){var e=t.alternate;if(!e){if(e=Po(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return nw(r),t;if(i===s)return nw(r),e;i=i.sibling}throw Error(fe(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==s)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function rC(t){return t=t4(t),t!==null?iC(t):null}function iC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iC(t);if(e!==null)return e;t=t.sibling}return null}var oC=Kn.unstable_scheduleCallback,sw=Kn.unstable_cancelCallback,n4=Kn.unstable_shouldYield,s4=Kn.unstable_requestPaint,Lt=Kn.unstable_now,r4=Kn.unstable_getCurrentPriorityLevel,Ax=Kn.unstable_ImmediatePriority,aC=Kn.unstable_UserBlockingPriority,Nh=Kn.unstable_NormalPriority,i4=Kn.unstable_LowPriority,lC=Kn.unstable_IdlePriority,Ff=null,Js=null;function o4(t){if(Js&&typeof Js.onCommitFiberRoot=="function")try{Js.onCommitFiberRoot(Ff,t,void 0,(t.current.flags&128)===128)}catch{}}var Is=Math.clz32?Math.clz32:c4,a4=Math.log,l4=Math.LN2;function c4(t){return t>>>=0,t===0?32:31-(a4(t)/l4|0)|0}var td=64,nd=4194304;function lc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dh(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=lc(a):(i&=o,i!==0&&(s=lc(i)))}else o=n&~r,o!==0?s=lc(o):i!==0&&(s=lc(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Is(e),r=1<<n,s|=t[n],e&=~r;return s}function u4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d4(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Is(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=u4(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Gg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cC(){var t=td;return td<<=1,!(td&4194240)&&(td=64),t}function Q0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Is(e),t[e]=n}function h4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Is(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Rx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Is(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var ft=0;function uC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dC,Ox,hC,fC,pC,qg=!1,sd=[],li=null,ci=null,ui=null,Gc=new Map,qc=new Map,Xr=[],f4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rw(t,e){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":Gc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(e.pointerId)}}function Dl(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Nu(e),e!==null&&Ox(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function p4(t,e,n,s,r){switch(e){case"focusin":return li=Dl(li,t,e,n,s,r),!0;case"dragenter":return ci=Dl(ci,t,e,n,s,r),!0;case"mouseover":return ui=Dl(ui,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Gc.set(i,Dl(Gc.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,qc.set(i,Dl(qc.get(i)||null,t,e,n,s,r)),!0}return!1}function gC(t){var e=Vi(t.target);if(e!==null){var n=Po(e);if(n!==null){if(e=n.tag,e===13){if(e=sC(n),e!==null){t.blockedOn=e,pC(t.priority,function(){hC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Wg=s,n.target.dispatchEvent(s),Wg=null}else return e=Nu(n),e!==null&&Ox(e),t.blockedOn=n,!1;e.shift()}return!0}function iw(t,e,n){eh(t)&&n.delete(e)}function g4(){qg=!1,li!==null&&eh(li)&&(li=null),ci!==null&&eh(ci)&&(ci=null),ui!==null&&eh(ui)&&(ui=null),Gc.forEach(iw),qc.forEach(iw)}function Al(t,e){t.blockedOn===e&&(t.blockedOn=null,qg||(qg=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,g4)))}function Kc(t){function e(r){return Al(r,t)}if(0<sd.length){Al(sd[0],t);for(var n=1;n<sd.length;n++){var s=sd[n];s.blockedOn===t&&(s.blockedOn=null)}}for(li!==null&&Al(li,t),ci!==null&&Al(ci,t),ui!==null&&Al(ui,t),Gc.forEach(e),qc.forEach(e),n=0;n<Xr.length;n++)s=Xr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Xr.length&&(n=Xr[0],n.blockedOn===null);)gC(n),n.blockedOn===null&&Xr.shift()}var ua=Ar.ReactCurrentBatchConfig,Ah=!0;function m4(t,e,n,s){var r=ft,i=ua.transition;ua.transition=null;try{ft=1,Lx(t,e,n,s)}finally{ft=r,ua.transition=i}}function x4(t,e,n,s){var r=ft,i=ua.transition;ua.transition=null;try{ft=4,Lx(t,e,n,s)}finally{ft=r,ua.transition=i}}function Lx(t,e,n,s){if(Ah){var r=Kg(t,e,n,s);if(r===null)ap(t,e,s,Rh,n),rw(t,s);else if(p4(r,t,e,n,s))s.stopPropagation();else if(rw(t,s),e&4&&-1<f4.indexOf(t)){for(;r!==null;){var i=Nu(r);if(i!==null&&dC(i),i=Kg(t,e,n,s),i===null&&ap(t,e,s,Rh,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else ap(t,e,s,null,n)}}var Rh=null;function Kg(t,e,n,s){if(Rh=null,t=Dx(s),t=Vi(t),t!==null)if(e=Po(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rh=t,null}function mC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r4()){case Ax:return 1;case aC:return 4;case Nh:case i4:return 16;case lC:return 536870912;default:return 16}default:return 16}}var ni=null,jx=null,th=null;function xC(){if(th)return th;var t,e=jx,n=e.length,s,r="value"in ni?ni.value:ni.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return th=r.slice(t,1<s?1-s:void 0)}function nh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rd(){return!0}function ow(){return!1}function Jn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?rd:ow,this.isPropagationStopped=ow,this}return Mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rd)},persist:function(){},isPersistent:rd}),e}var pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fx=Jn(pl),Iu=Mt({},pl,{view:0,detail:0}),b4=Jn(Iu),J0,Z0,Rl,Bf=Mt({},Iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rl&&(Rl&&t.type==="mousemove"?(J0=t.screenX-Rl.screenX,Z0=t.screenY-Rl.screenY):Z0=J0=0,Rl=t),J0)},movementY:function(t){return"movementY"in t?t.movementY:Z0}}),aw=Jn(Bf),y4=Mt({},Bf,{dataTransfer:0}),w4=Jn(y4),v4=Mt({},Iu,{relatedTarget:0}),ep=Jn(v4),k4=Mt({},pl,{animationName:0,elapsedTime:0,pseudoElement:0}),S4=Jn(k4),C4=Mt({},pl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_4=Jn(C4),E4=Mt({},pl,{data:0}),lw=Jn(E4),P4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=M4[t])?!!e[t]:!1}function Bx(){return I4}var N4=Mt({},Iu,{key:function(t){if(t.key){var e=P4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?T4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bx,charCode:function(t){return t.type==="keypress"?nh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),D4=Jn(N4),A4=Mt({},Bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cw=Jn(A4),R4=Mt({},Iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bx}),O4=Jn(R4),L4=Mt({},pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),j4=Jn(L4),F4=Mt({},Bf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B4=Jn(F4),$4=[9,13,27,32],$x=Pr&&"CompositionEvent"in window,_c=null;Pr&&"documentMode"in document&&(_c=document.documentMode);var z4=Pr&&"TextEvent"in window&&!_c,bC=Pr&&(!$x||_c&&8<_c&&11>=_c),uw=" ",dw=!1;function yC(t,e){switch(t){case"keyup":return $4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vo=!1;function U4(t,e){switch(t){case"compositionend":return wC(e);case"keypress":return e.which!==32?null:(dw=!0,uw);case"textInput":return t=e.data,t===uw&&dw?null:t;default:return null}}function W4(t,e){if(Vo)return t==="compositionend"||!$x&&yC(t,e)?(t=xC(),th=jx=ni=null,Vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bC&&e.locale!=="ko"?null:e.data;default:return null}}var H4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!H4[t.type]:e==="textarea"}function vC(t,e,n,s){J2(s),e=Oh(e,"onChange"),0<e.length&&(n=new Fx("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Ec=null,Xc=null;function V4(t){DC(t,0)}function $f(t){var e=qo(t);if(V2(e))return t}function Y4(t,e){if(t==="change")return e}var kC=!1;if(Pr){var tp;if(Pr){var np="oninput"in document;if(!np){var fw=document.createElement("div");fw.setAttribute("oninput","return;"),np=typeof fw.oninput=="function"}tp=np}else tp=!1;kC=tp&&(!document.documentMode||9<document.documentMode)}function pw(){Ec&&(Ec.detachEvent("onpropertychange",SC),Xc=Ec=null)}function SC(t){if(t.propertyName==="value"&&$f(Xc)){var e=[];vC(e,Xc,t,Dx(t)),nC(V4,e)}}function G4(t,e,n){t==="focusin"?(pw(),Ec=e,Xc=n,Ec.attachEvent("onpropertychange",SC)):t==="focusout"&&pw()}function q4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $f(Xc)}function K4(t,e){if(t==="click")return $f(e)}function X4(t,e){if(t==="input"||t==="change")return $f(e)}function Q4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ds=typeof Object.is=="function"?Object.is:Q4;function Qc(t,e){if(Ds(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Ng.call(e,r)||!Ds(t[r],e[r]))return!1}return!0}function gw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mw(t,e){var n=gw(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gw(n)}}function CC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?CC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _C(){for(var t=window,e=Th();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Th(t.document)}return e}function zx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function J4(t){var e=_C(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&CC(n.ownerDocument.documentElement,n)){if(s!==null&&zx(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=mw(n,i);var o=mw(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Z4=Pr&&"documentMode"in document&&11>=document.documentMode,Yo=null,Xg=null,Pc=null,Qg=!1;function xw(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qg||Yo==null||Yo!==Th(s)||(s=Yo,"selectionStart"in s&&zx(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Pc&&Qc(Pc,s)||(Pc=s,s=Oh(Xg,"onSelect"),0<s.length&&(e=new Fx("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Yo)))}function id(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Go={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionend:id("Transition","TransitionEnd")},sp={},EC={};Pr&&(EC=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function zf(t){if(sp[t])return sp[t];if(!Go[t])return t;var e=Go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in EC)return sp[t]=e[n];return t}var PC=zf("animationend"),TC=zf("animationiteration"),MC=zf("animationstart"),IC=zf("transitionend"),NC=new Map,bw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(t,e){NC.set(t,e),Eo(e,[t])}for(var rp=0;rp<bw.length;rp++){var ip=bw[rp],eM=ip.toLowerCase(),tM=ip[0].toUpperCase()+ip.slice(1);Ci(eM,"on"+tM)}Ci(PC,"onAnimationEnd");Ci(TC,"onAnimationIteration");Ci(MC,"onAnimationStart");Ci("dblclick","onDoubleClick");Ci("focusin","onFocus");Ci("focusout","onBlur");Ci(IC,"onTransitionEnd");Ua("onMouseEnter",["mouseout","mouseover"]);Ua("onMouseLeave",["mouseout","mouseover"]);Ua("onPointerEnter",["pointerout","pointerover"]);Ua("onPointerLeave",["pointerout","pointerover"]);Eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nM=new Set("cancel close invalid load scroll toggle".split(" ").concat(cc));function yw(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,e4(s,e,void 0,t),t.currentTarget=null}function DC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;yw(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;yw(r,a,c),i=l}}}if(Ih)throw t=Yg,Ih=!1,Yg=null,t}function St(t,e){var n=e[nm];n===void 0&&(n=e[nm]=new Set);var s=t+"__bubble";n.has(s)||(AC(e,t,2,!1),n.add(s))}function op(t,e,n){var s=0;e&&(s|=4),AC(n,t,s,e)}var od="_reactListening"+Math.random().toString(36).slice(2);function Jc(t){if(!t[od]){t[od]=!0,$2.forEach(function(n){n!=="selectionchange"&&(nM.has(n)||op(n,!1,t),op(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[od]||(e[od]=!0,op("selectionchange",!1,e))}}function AC(t,e,n,s){switch(mC(e)){case 1:var r=m4;break;case 4:r=x4;break;default:r=Lx}n=r.bind(null,e,n,t),r=void 0,!Vg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ap(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Vi(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}nC(function(){var c=i,u=Dx(n),d=[];e:{var f=NC.get(t);if(f!==void 0){var p=Fx,m=t;switch(t){case"keypress":if(nh(n)===0)break e;case"keydown":case"keyup":p=D4;break;case"focusin":m="focus",p=ep;break;case"focusout":m="blur",p=ep;break;case"beforeblur":case"afterblur":p=ep;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=aw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=w4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=O4;break;case PC:case TC:case MC:p=S4;break;case IC:p=j4;break;case"scroll":p=b4;break;case"wheel":p=B4;break;case"copy":case"cut":case"paste":p=_4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=cw}var x=(e&4)!==0,w=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var b=c,v;b!==null;){v=b;var y=v.stateNode;if(v.tag===5&&y!==null&&(v=y,g!==null&&(y=Yc(b,g),y!=null&&x.push(Zc(b,y,v)))),w)break;b=b.return}0<x.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Wg&&(m=n.relatedTarget||n.fromElement)&&(Vi(m)||m[Tr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Vi(m):null,m!==null&&(w=Po(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(x=aw,y="onMouseLeave",g="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(x=cw,y="onPointerLeave",g="onPointerEnter",b="pointer"),w=p==null?f:qo(p),v=m==null?f:qo(m),f=new x(y,b+"leave",p,n,u),f.target=w,f.relatedTarget=v,y=null,Vi(u)===c&&(x=new x(g,b+"enter",m,n,u),x.target=v,x.relatedTarget=w,y=x),w=y,p&&m)t:{for(x=p,g=m,b=0,v=x;v;v=Oo(v))b++;for(v=0,y=g;y;y=Oo(y))v++;for(;0<b-v;)x=Oo(x),b--;for(;0<v-b;)g=Oo(g),v--;for(;b--;){if(x===g||g!==null&&x===g.alternate)break t;x=Oo(x),g=Oo(g)}x=null}else x=null;p!==null&&ww(d,f,p,x,!1),m!==null&&w!==null&&ww(d,w,m,x,!0)}}e:{if(f=c?qo(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=Y4;else if(hw(f))if(kC)S=X4;else{S=q4;var C=G4}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=K4);if(S&&(S=S(t,c))){vC(d,S,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Fg(f,"number",f.value)}switch(C=c?qo(c):window,t){case"focusin":(hw(C)||C.contentEditable==="true")&&(Yo=C,Xg=c,Pc=null);break;case"focusout":Pc=Xg=Yo=null;break;case"mousedown":Qg=!0;break;case"contextmenu":case"mouseup":case"dragend":Qg=!1,xw(d,n,u);break;case"selectionchange":if(Z4)break;case"keydown":case"keyup":xw(d,n,u)}var E;if($x)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Vo?yC(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(bC&&n.locale!=="ko"&&(Vo||T!=="onCompositionStart"?T==="onCompositionEnd"&&Vo&&(E=xC()):(ni=u,jx="value"in ni?ni.value:ni.textContent,Vo=!0)),C=Oh(c,T),0<C.length&&(T=new lw(T,t,null,n,u),d.push({event:T,listeners:C}),E?T.data=E:(E=wC(n),E!==null&&(T.data=E)))),(E=z4?U4(t,n):W4(t,n))&&(c=Oh(c,"onBeforeInput"),0<c.length&&(u=new lw("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}DC(d,e)})}function Zc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Oh(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Yc(t,n),i!=null&&s.unshift(Zc(t,i,r)),i=Yc(t,e),i!=null&&s.push(Zc(t,i,r))),t=t.return}return s}function Oo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ww(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=Yc(n,i),l!=null&&o.unshift(Zc(n,l,a))):r||(l=Yc(n,i),l!=null&&o.push(Zc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sM=/\r\n?/g,rM=/\u0000|\uFFFD/g;function vw(t){return(typeof t=="string"?t:""+t).replace(sM,`
`).replace(rM,"")}function ad(t,e,n){if(e=vw(e),vw(t)!==e&&n)throw Error(fe(425))}function Lh(){}var Jg=null,Zg=null;function em(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tm=typeof setTimeout=="function"?setTimeout:void 0,iM=typeof clearTimeout=="function"?clearTimeout:void 0,kw=typeof Promise=="function"?Promise:void 0,oM=typeof queueMicrotask=="function"?queueMicrotask:typeof kw<"u"?function(t){return kw.resolve(null).then(t).catch(aM)}:tm;function aM(t){setTimeout(function(){throw t})}function lp(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Kc(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Kc(e)}function di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gl=Math.random().toString(36).slice(2),Xs="__reactFiber$"+gl,eu="__reactProps$"+gl,Tr="__reactContainer$"+gl,nm="__reactEvents$"+gl,lM="__reactListeners$"+gl,cM="__reactHandles$"+gl;function Vi(t){var e=t[Xs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tr]||n[Xs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sw(t);t!==null;){if(n=t[Xs])return n;t=Sw(t)}return e}t=n,n=t.parentNode}return null}function Nu(t){return t=t[Xs]||t[Tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function Uf(t){return t[eu]||null}var sm=[],Ko=-1;function _i(t){return{current:t}}function Ct(t){0>Ko||(t.current=sm[Ko],sm[Ko]=null,Ko--)}function yt(t,e){Ko++,sm[Ko]=t.current,t.current=e}var wi={},gn=_i(wi),Rn=_i(!1),uo=wi;function Wa(t,e){var n=t.type.contextTypes;if(!n)return wi;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function On(t){return t=t.childContextTypes,t!=null}function jh(){Ct(Rn),Ct(gn)}function Cw(t,e,n){if(gn.current!==wi)throw Error(fe(168));yt(gn,e),yt(Rn,n)}function RC(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(fe(108,GT(t)||"Unknown",r));return Mt({},n,s)}function Fh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wi,uo=gn.current,yt(gn,t),yt(Rn,Rn.current),!0}function _w(t,e,n){var s=t.stateNode;if(!s)throw Error(fe(169));n?(t=RC(t,e,uo),s.__reactInternalMemoizedMergedChildContext=t,Ct(Rn),Ct(gn),yt(gn,t)):Ct(Rn),yt(Rn,n)}var hr=null,Wf=!1,cp=!1;function OC(t){hr===null?hr=[t]:hr.push(t)}function uM(t){Wf=!0,OC(t)}function Ei(){if(!cp&&hr!==null){cp=!0;var t=0,e=ft;try{var n=hr;for(ft=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}hr=null,Wf=!1}catch(r){throw hr!==null&&(hr=hr.slice(t+1)),oC(Ax,Ei),r}finally{ft=e,cp=!1}}return null}var Xo=[],Qo=0,Bh=null,$h=0,cs=[],us=0,ho=null,yr=1,wr="";function Li(t,e){Xo[Qo++]=$h,Xo[Qo++]=Bh,Bh=t,$h=e}function LC(t,e,n){cs[us++]=yr,cs[us++]=wr,cs[us++]=ho,ho=t;var s=yr;t=wr;var r=32-Is(s)-1;s&=~(1<<r),n+=1;var i=32-Is(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,yr=1<<32-Is(e)+r|n<<r|s,wr=i+t}else yr=1<<i|n<<r|s,wr=t}function Ux(t){t.return!==null&&(Li(t,1),LC(t,1,0))}function Wx(t){for(;t===Bh;)Bh=Xo[--Qo],Xo[Qo]=null,$h=Xo[--Qo],Xo[Qo]=null;for(;t===ho;)ho=cs[--us],cs[us]=null,wr=cs[--us],cs[us]=null,yr=cs[--us],cs[us]=null}var Hn=null,Wn=null,_t=!1,Es=null;function jC(t,e){var n=ds(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ew(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hn=t,Wn=di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hn=t,Wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ho!==null?{id:yr,overflow:wr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ds(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hn=t,Wn=null,!0):!1;default:return!1}}function rm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function im(t){if(_t){var e=Wn;if(e){var n=e;if(!Ew(t,e)){if(rm(t))throw Error(fe(418));e=di(n.nextSibling);var s=Hn;e&&Ew(t,e)?jC(s,n):(t.flags=t.flags&-4097|2,_t=!1,Hn=t)}}else{if(rm(t))throw Error(fe(418));t.flags=t.flags&-4097|2,_t=!1,Hn=t}}}function Pw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hn=t}function ld(t){if(t!==Hn)return!1;if(!_t)return Pw(t),_t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!em(t.type,t.memoizedProps)),e&&(e=Wn)){if(rm(t))throw FC(),Error(fe(418));for(;e;)jC(t,e),e=di(e.nextSibling)}if(Pw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wn=di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wn=null}}else Wn=Hn?di(t.stateNode.nextSibling):null;return!0}function FC(){for(var t=Wn;t;)t=di(t.nextSibling)}function Ha(){Wn=Hn=null,_t=!1}function Hx(t){Es===null?Es=[t]:Es.push(t)}var dM=Ar.ReactCurrentBatchConfig;function Ol(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var s=n.stateNode}if(!s)throw Error(fe(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function cd(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tw(t){var e=t._init;return e(t._payload)}function BC(t){function e(g,b){if(t){var v=g.deletions;v===null?(g.deletions=[b],g.flags|=16):v.push(b)}}function n(g,b){if(!t)return null;for(;b!==null;)e(g,b),b=b.sibling;return null}function s(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function r(g,b){return g=gi(g,b),g.index=0,g.sibling=null,g}function i(g,b,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<b?(g.flags|=2,b):v):(g.flags|=2,b)):(g.flags|=1048576,b)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,b,v,y){return b===null||b.tag!==6?(b=mp(v,g.mode,y),b.return=g,b):(b=r(b,v),b.return=g,b)}function l(g,b,v,y){var S=v.type;return S===Ho?u(g,b,v.props.children,y,v.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===qr&&Tw(S)===b.type)?(y=r(b,v.props),y.ref=Ol(g,b,v),y.return=g,y):(y=ch(v.type,v.key,v.props,null,g.mode,y),y.ref=Ol(g,b,v),y.return=g,y)}function c(g,b,v,y){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=xp(v,g.mode,y),b.return=g,b):(b=r(b,v.children||[]),b.return=g,b)}function u(g,b,v,y,S){return b===null||b.tag!==7?(b=so(v,g.mode,y,S),b.return=g,b):(b=r(b,v),b.return=g,b)}function d(g,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=mp(""+b,g.mode,v),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ju:return v=ch(b.type,b.key,b.props,null,g.mode,v),v.ref=Ol(g,null,b),v.return=g,v;case Wo:return b=xp(b,g.mode,v),b.return=g,b;case qr:var y=b._init;return d(g,y(b._payload),v)}if(ac(b)||Il(b))return b=so(b,g.mode,v,null),b.return=g,b;cd(g,b)}return null}function f(g,b,v,y){var S=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(g,b,""+v,y);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ju:return v.key===S?l(g,b,v,y):null;case Wo:return v.key===S?c(g,b,v,y):null;case qr:return S=v._init,f(g,b,S(v._payload),y)}if(ac(v)||Il(v))return S!==null?null:u(g,b,v,y,null);cd(g,v)}return null}function p(g,b,v,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return g=g.get(v)||null,a(b,g,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ju:return g=g.get(y.key===null?v:y.key)||null,l(b,g,y,S);case Wo:return g=g.get(y.key===null?v:y.key)||null,c(b,g,y,S);case qr:var C=y._init;return p(g,b,v,C(y._payload),S)}if(ac(y)||Il(y))return g=g.get(v)||null,u(b,g,y,S,null);cd(b,y)}return null}function m(g,b,v,y){for(var S=null,C=null,E=b,T=b=0,N=null;E!==null&&T<v.length;T++){E.index>T?(N=E,E=null):N=E.sibling;var _=f(g,E,v[T],y);if(_===null){E===null&&(E=N);break}t&&E&&_.alternate===null&&e(g,E),b=i(_,b,T),C===null?S=_:C.sibling=_,C=_,E=N}if(T===v.length)return n(g,E),_t&&Li(g,T),S;if(E===null){for(;T<v.length;T++)E=d(g,v[T],y),E!==null&&(b=i(E,b,T),C===null?S=E:C.sibling=E,C=E);return _t&&Li(g,T),S}for(E=s(g,E);T<v.length;T++)N=p(E,g,T,v[T],y),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?T:N.key),b=i(N,b,T),C===null?S=N:C.sibling=N,C=N);return t&&E.forEach(function(D){return e(g,D)}),_t&&Li(g,T),S}function x(g,b,v,y){var S=Il(v);if(typeof S!="function")throw Error(fe(150));if(v=S.call(v),v==null)throw Error(fe(151));for(var C=S=null,E=b,T=b=0,N=null,_=v.next();E!==null&&!_.done;T++,_=v.next()){E.index>T?(N=E,E=null):N=E.sibling;var D=f(g,E,_.value,y);if(D===null){E===null&&(E=N);break}t&&E&&D.alternate===null&&e(g,E),b=i(D,b,T),C===null?S=D:C.sibling=D,C=D,E=N}if(_.done)return n(g,E),_t&&Li(g,T),S;if(E===null){for(;!_.done;T++,_=v.next())_=d(g,_.value,y),_!==null&&(b=i(_,b,T),C===null?S=_:C.sibling=_,C=_);return _t&&Li(g,T),S}for(E=s(g,E);!_.done;T++,_=v.next())_=p(E,g,T,_.value,y),_!==null&&(t&&_.alternate!==null&&E.delete(_.key===null?T:_.key),b=i(_,b,T),C===null?S=_:C.sibling=_,C=_);return t&&E.forEach(function(A){return e(g,A)}),_t&&Li(g,T),S}function w(g,b,v,y){if(typeof v=="object"&&v!==null&&v.type===Ho&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ju:e:{for(var S=v.key,C=b;C!==null;){if(C.key===S){if(S=v.type,S===Ho){if(C.tag===7){n(g,C.sibling),b=r(C,v.props.children),b.return=g,g=b;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===qr&&Tw(S)===C.type){n(g,C.sibling),b=r(C,v.props),b.ref=Ol(g,C,v),b.return=g,g=b;break e}n(g,C);break}else e(g,C);C=C.sibling}v.type===Ho?(b=so(v.props.children,g.mode,y,v.key),b.return=g,g=b):(y=ch(v.type,v.key,v.props,null,g.mode,y),y.ref=Ol(g,b,v),y.return=g,g=y)}return o(g);case Wo:e:{for(C=v.key;b!==null;){if(b.key===C)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(g,b.sibling),b=r(b,v.children||[]),b.return=g,g=b;break e}else{n(g,b);break}else e(g,b);b=b.sibling}b=xp(v,g.mode,y),b.return=g,g=b}return o(g);case qr:return C=v._init,w(g,b,C(v._payload),y)}if(ac(v))return m(g,b,v,y);if(Il(v))return x(g,b,v,y);cd(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(g,b.sibling),b=r(b,v),b.return=g,g=b):(n(g,b),b=mp(v,g.mode,y),b.return=g,g=b),o(g)):n(g,b)}return w}var Va=BC(!0),$C=BC(!1),zh=_i(null),Uh=null,Jo=null,Vx=null;function Yx(){Vx=Jo=Uh=null}function Gx(t){var e=zh.current;Ct(zh),t._currentValue=e}function om(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function da(t,e){Uh=t,Vx=Jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dn=!0),t.firstContext=null)}function gs(t){var e=t._currentValue;if(Vx!==t)if(t={context:t,memoizedValue:e,next:null},Jo===null){if(Uh===null)throw Error(fe(308));Jo=t,Uh.dependencies={lanes:0,firstContext:t}}else Jo=Jo.next=t;return e}var Yi=null;function qx(t){Yi===null?Yi=[t]:Yi.push(t)}function zC(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,qx(e)):(n.next=r.next,r.next=n),e.interleaved=n,Mr(t,s)}function Mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kr=!1;function Kx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hi(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ot&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Mr(t,n)}return r=s.interleaved,r===null?(e.next=e,qx(s)):(e.next=r.next,r.next=e),s.interleaved=e,Mr(t,n)}function sh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Rx(t,n)}}function Mw(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wh(t,e,n,s){var r=t.updateQueue;Kr=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=r.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,x=a;switch(f=e,p=n,x.tag){case 1:if(m=x.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Mt({},d,f);break e;case 2:Kr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);po|=o,t.lanes=o,t.memoizedState=d}}function Iw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(fe(191,r));r.call(s)}}}var Du={},Zs=_i(Du),tu=_i(Du),nu=_i(Du);function Gi(t){if(t===Du)throw Error(fe(174));return t}function Xx(t,e){switch(yt(nu,e),yt(tu,t),yt(Zs,Du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$g(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$g(e,t)}Ct(Zs),yt(Zs,e)}function Ya(){Ct(Zs),Ct(tu),Ct(nu)}function WC(t){Gi(nu.current);var e=Gi(Zs.current),n=$g(e,t.type);e!==n&&(yt(tu,t),yt(Zs,n))}function Qx(t){tu.current===t&&(Ct(Zs),Ct(tu))}var Pt=_i(0);function Hh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var up=[];function Jx(){for(var t=0;t<up.length;t++)up[t]._workInProgressVersionPrimary=null;up.length=0}var rh=Ar.ReactCurrentDispatcher,dp=Ar.ReactCurrentBatchConfig,fo=0,Tt=null,Ut=null,Vt=null,Vh=!1,Tc=!1,su=0,hM=0;function ln(){throw Error(fe(321))}function Zx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ds(t[n],e[n]))return!1;return!0}function eb(t,e,n,s,r,i){if(fo=i,Tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rh.current=t===null||t.memoizedState===null?mM:xM,t=n(s,r),Tc){i=0;do{if(Tc=!1,su=0,25<=i)throw Error(fe(301));i+=1,Vt=Ut=null,e.updateQueue=null,rh.current=bM,t=n(s,r)}while(Tc)}if(rh.current=Yh,e=Ut!==null&&Ut.next!==null,fo=0,Vt=Ut=Tt=null,Vh=!1,e)throw Error(fe(300));return t}function tb(){var t=su!==0;return su=0,t}function Hs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Tt.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function ms(){if(Ut===null){var t=Tt.alternate;t=t!==null?t.memoizedState:null}else t=Ut.next;var e=Vt===null?Tt.memoizedState:Vt.next;if(e!==null)Vt=e,Ut=t;else{if(t===null)throw Error(fe(310));Ut=t,t={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Vt===null?Tt.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function ru(t,e){return typeof e=="function"?e(t):e}function hp(t){var e=ms(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var s=Ut,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((fo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=s):l=l.next=d,Tt.lanes|=u,po|=u}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,Ds(s,e.memoizedState)||(Dn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Tt.lanes|=i,po|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fp(t){var e=ms(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Ds(i,e.memoizedState)||(Dn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function HC(){}function VC(t,e){var n=Tt,s=ms(),r=e(),i=!Ds(s.memoizedState,r);if(i&&(s.memoizedState=r,Dn=!0),s=s.queue,nb(qC.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||Vt!==null&&Vt.memoizedState.tag&1){if(n.flags|=2048,iu(9,GC.bind(null,n,s,r,e),void 0,null),Qt===null)throw Error(fe(349));fo&30||YC(n,e,r)}return r}function YC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function GC(t,e,n,s){e.value=n,e.getSnapshot=s,KC(e)&&XC(t)}function qC(t,e,n){return n(function(){KC(e)&&XC(t)})}function KC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ds(t,n)}catch{return!0}}function XC(t){var e=Mr(t,1);e!==null&&Ns(e,t,1,-1)}function Nw(t){var e=Hs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:t},e.queue=t,t=t.dispatch=gM.bind(null,Tt,t),[e.memoizedState,t]}function iu(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function QC(){return ms().memoizedState}function ih(t,e,n,s){var r=Hs();Tt.flags|=t,r.memoizedState=iu(1|e,n,void 0,s===void 0?null:s)}function Hf(t,e,n,s){var r=ms();s=s===void 0?null:s;var i=void 0;if(Ut!==null){var o=Ut.memoizedState;if(i=o.destroy,s!==null&&Zx(s,o.deps)){r.memoizedState=iu(e,n,i,s);return}}Tt.flags|=t,r.memoizedState=iu(1|e,n,i,s)}function Dw(t,e){return ih(8390656,8,t,e)}function nb(t,e){return Hf(2048,8,t,e)}function JC(t,e){return Hf(4,2,t,e)}function ZC(t,e){return Hf(4,4,t,e)}function e_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function t_(t,e,n){return n=n!=null?n.concat([t]):null,Hf(4,4,e_.bind(null,e,t),n)}function sb(){}function n_(t,e){var n=ms();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Zx(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function s_(t,e){var n=ms();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Zx(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function r_(t,e,n){return fo&21?(Ds(n,e)||(n=cC(),Tt.lanes|=n,po|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dn=!0),t.memoizedState=n)}function fM(t,e){var n=ft;ft=n!==0&&4>n?n:4,t(!0);var s=dp.transition;dp.transition={};try{t(!1),e()}finally{ft=n,dp.transition=s}}function i_(){return ms().memoizedState}function pM(t,e,n){var s=pi(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},o_(t))a_(e,n);else if(n=zC(t,e,n,s),n!==null){var r=vn();Ns(n,t,s,r),l_(n,e,s)}}function gM(t,e,n){var s=pi(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(o_(t))a_(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Ds(a,o)){var l=e.interleaved;l===null?(r.next=r,qx(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=zC(t,e,r,s),n!==null&&(r=vn(),Ns(n,t,s,r),l_(n,e,s))}}function o_(t){var e=t.alternate;return t===Tt||e!==null&&e===Tt}function a_(t,e){Tc=Vh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function l_(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Rx(t,n)}}var Yh={readContext:gs,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},mM={readContext:gs,useCallback:function(t,e){return Hs().memoizedState=[t,e===void 0?null:e],t},useContext:gs,useEffect:Dw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ih(4194308,4,e_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return ih(4,2,t,e)},useMemo:function(t,e){var n=Hs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Hs();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=pM.bind(null,Tt,t),[s.memoizedState,t]},useRef:function(t){var e=Hs();return t={current:t},e.memoizedState=t},useState:Nw,useDebugValue:sb,useDeferredValue:function(t){return Hs().memoizedState=t},useTransition:function(){var t=Nw(!1),e=t[0];return t=fM.bind(null,t[1]),Hs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Tt,r=Hs();if(_t){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),Qt===null)throw Error(fe(349));fo&30||YC(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Dw(qC.bind(null,s,i,t),[t]),s.flags|=2048,iu(9,GC.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Hs(),e=Qt.identifierPrefix;if(_t){var n=wr,s=yr;n=(s&~(1<<32-Is(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=su++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xM={readContext:gs,useCallback:n_,useContext:gs,useEffect:nb,useImperativeHandle:t_,useInsertionEffect:JC,useLayoutEffect:ZC,useMemo:s_,useReducer:hp,useRef:QC,useState:function(){return hp(ru)},useDebugValue:sb,useDeferredValue:function(t){var e=ms();return r_(e,Ut.memoizedState,t)},useTransition:function(){var t=hp(ru)[0],e=ms().memoizedState;return[t,e]},useMutableSource:HC,useSyncExternalStore:VC,useId:i_,unstable_isNewReconciler:!1},bM={readContext:gs,useCallback:n_,useContext:gs,useEffect:nb,useImperativeHandle:t_,useInsertionEffect:JC,useLayoutEffect:ZC,useMemo:s_,useReducer:fp,useRef:QC,useState:function(){return fp(ru)},useDebugValue:sb,useDeferredValue:function(t){var e=ms();return Ut===null?e.memoizedState=t:r_(e,Ut.memoizedState,t)},useTransition:function(){var t=fp(ru)[0],e=ms().memoizedState;return[t,e]},useMutableSource:HC,useSyncExternalStore:VC,useId:i_,unstable_isNewReconciler:!1};function ks(t,e){if(t&&t.defaultProps){e=Mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function am(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vf={isMounted:function(t){return(t=t._reactInternals)?Po(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=vn(),r=pi(t),i=Sr(s,r);i.payload=e,n!=null&&(i.callback=n),e=hi(t,i,r),e!==null&&(Ns(e,t,r,s),sh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=vn(),r=pi(t),i=Sr(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hi(t,i,r),e!==null&&(Ns(e,t,r,s),sh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),s=pi(t),r=Sr(n,s);r.tag=2,e!=null&&(r.callback=e),e=hi(t,r,s),e!==null&&(Ns(e,t,s,n),sh(e,t,s))}};function Aw(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Qc(n,s)||!Qc(r,i):!0}function c_(t,e,n){var s=!1,r=wi,i=e.contextType;return typeof i=="object"&&i!==null?i=gs(i):(r=On(e)?uo:gn.current,s=e.contextTypes,i=(s=s!=null)?Wa(t,r):wi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vf,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Rw(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Vf.enqueueReplaceState(e,e.state,null)}function lm(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Kx(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=gs(i):(i=On(e)?uo:gn.current,r.context=Wa(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(am(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Vf.enqueueReplaceState(r,r.state,null),Wh(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ga(t,e){try{var n="",s=e;do n+=YT(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function pp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yM=typeof WeakMap=="function"?WeakMap:Map;function u_(t,e,n){n=Sr(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){qh||(qh=!0,ym=s),cm(t,e)},n}function d_(t,e,n){n=Sr(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){cm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){cm(t,e),typeof s!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ow(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new yM;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=AM.bind(null,t,e,n),e.then(t,t))}function Lw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jw(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Sr(-1,1),e.tag=2,hi(n,e,1))),n.lanes|=1),t)}var wM=Ar.ReactCurrentOwner,Dn=!1;function wn(t,e,n,s){e.child=t===null?$C(e,null,n,s):Va(e,t.child,n,s)}function Fw(t,e,n,s,r){n=n.render;var i=e.ref;return da(e,r),s=eb(t,e,n,s,i,r),n=tb(),t!==null&&!Dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ir(t,e,r)):(_t&&n&&Ux(e),e.flags|=1,wn(t,e,s,r),e.child)}function Bw(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!db(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,h_(t,e,i,s,r)):(t=ch(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qc,n(o,s)&&t.ref===e.ref)return Ir(t,e,r)}return e.flags|=1,t=gi(i,s),t.ref=e.ref,t.return=e,e.child=t}function h_(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Qc(i,s)&&t.ref===e.ref)if(Dn=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Dn=!0);else return e.lanes=t.lanes,Ir(t,e,r)}return um(t,e,n,s,r)}function f_(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(ea,zn),zn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yt(ea,zn),zn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,yt(ea,zn),zn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,yt(ea,zn),zn|=s;return wn(t,e,r,n),e.child}function p_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function um(t,e,n,s,r){var i=On(n)?uo:gn.current;return i=Wa(e,i),da(e,r),n=eb(t,e,n,s,i,r),s=tb(),t!==null&&!Dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ir(t,e,r)):(_t&&s&&Ux(e),e.flags|=1,wn(t,e,n,r),e.child)}function $w(t,e,n,s,r){if(On(n)){var i=!0;Fh(e)}else i=!1;if(da(e,r),e.stateNode===null)oh(t,e),c_(e,n,s),lm(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gs(c):(c=On(n)?uo:gn.current,c=Wa(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&Rw(e,o,s,c),Kr=!1;var f=e.memoizedState;o.state=f,Wh(e,s,o,r),l=e.memoizedState,a!==s||f!==l||Rn.current||Kr?(typeof u=="function"&&(am(e,n,u,s),l=e.memoizedState),(a=Kr||Aw(e,n,a,s,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,UC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ks(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gs(l):(l=On(n)?uo:gn.current,l=Wa(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Rw(e,o,s,l),Kr=!1,f=e.memoizedState,o.state=f,Wh(e,s,o,r);var m=e.memoizedState;a!==d||f!==m||Rn.current||Kr?(typeof p=="function"&&(am(e,n,p,s),m=e.memoizedState),(c=Kr||Aw(e,n,c,s,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),o.props=s,o.state=m,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return dm(t,e,n,s,i,r)}function dm(t,e,n,s,r,i){p_(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&_w(e,n,!1),Ir(t,e,i);s=e.stateNode,wM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Va(e,t.child,null,i),e.child=Va(e,null,a,i)):wn(t,e,a,i),e.memoizedState=s.state,r&&_w(e,n,!0),e.child}function g_(t){var e=t.stateNode;e.pendingContext?Cw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cw(t,e.context,!1),Xx(t,e.containerInfo)}function zw(t,e,n,s,r){return Ha(),Hx(r),e.flags|=256,wn(t,e,n,s),e.child}var hm={dehydrated:null,treeContext:null,retryLane:0};function fm(t){return{baseLanes:t,cachePool:null,transitions:null}}function m_(t,e,n){var s=e.pendingProps,r=Pt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),yt(Pt,r&1),t===null)return im(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=qf(o,s,0,null),t=so(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fm(n),e.memoizedState=hm,t):rb(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return vM(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=gi(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=gi(a,i):(i=so(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?fm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hm,s}return i=t.child,t=i.sibling,s=gi(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function rb(t,e){return e=qf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ud(t,e,n,s){return s!==null&&Hx(s),Va(e,t.child,null,n),t=rb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vM(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=pp(Error(fe(422))),ud(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=qf({mode:"visible",children:s.children},r,0,null),i=so(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Va(e,t.child,null,o),e.child.memoizedState=fm(o),e.memoizedState=hm,i);if(!(e.mode&1))return ud(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(fe(419)),s=pp(i,s,void 0),ud(t,e,o,s)}if(a=(o&t.childLanes)!==0,Dn||a){if(s=Qt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Mr(t,r),Ns(s,t,r,-1))}return ub(),s=pp(Error(fe(421))),ud(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=RM.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Wn=di(r.nextSibling),Hn=e,_t=!0,Es=null,t!==null&&(cs[us++]=yr,cs[us++]=wr,cs[us++]=ho,yr=t.id,wr=t.overflow,ho=e),e=rb(e,s.children),e.flags|=4096,e)}function Uw(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),om(t.return,e,n)}function gp(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function x_(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(wn(t,e,s.children,n),s=Pt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uw(t,n,e);else if(t.tag===19)Uw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(yt(Pt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Hh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),gp(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Hh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}gp(e,!0,n,null,i);break;case"together":gp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),po|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=gi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kM(t,e,n){switch(e.tag){case 3:g_(e),Ha();break;case 5:WC(e);break;case 1:On(e.type)&&Fh(e);break;case 4:Xx(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;yt(zh,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(yt(Pt,Pt.current&1),e.flags|=128,null):n&e.child.childLanes?m_(t,e,n):(yt(Pt,Pt.current&1),t=Ir(t,e,n),t!==null?t.sibling:null);yt(Pt,Pt.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return x_(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),yt(Pt,Pt.current),s)break;return null;case 22:case 23:return e.lanes=0,f_(t,e,n)}return Ir(t,e,n)}var b_,pm,y_,w_;b_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pm=function(){};y_=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Gi(Zs.current);var i=null;switch(n){case"input":r=Lg(t,r),s=Lg(t,s),i=[];break;case"select":r=Mt({},r,{value:void 0}),s=Mt({},s,{value:void 0}),i=[];break;case"textarea":r=Bg(t,r),s=Bg(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Lh)}zg(n,s);var o;n=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&St("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};w_=function(t,e,n,s){n!==s&&(e.flags|=4)};function Ll(t,e){if(!_t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function SM(t,e,n){var s=e.pendingProps;switch(Wx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(e),null;case 1:return On(e.type)&&jh(),cn(e),null;case 3:return s=e.stateNode,Ya(),Ct(Rn),Ct(gn),Jx(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ld(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Es!==null&&(km(Es),Es=null))),pm(t,e),cn(e),null;case 5:Qx(e);var r=Gi(nu.current);if(n=e.type,t!==null&&e.stateNode!=null)y_(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(fe(166));return cn(e),null}if(t=Gi(Zs.current),ld(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Xs]=e,s[eu]=i,t=(e.mode&1)!==0,n){case"dialog":St("cancel",s),St("close",s);break;case"iframe":case"object":case"embed":St("load",s);break;case"video":case"audio":for(r=0;r<cc.length;r++)St(cc[r],s);break;case"source":St("error",s);break;case"img":case"image":case"link":St("error",s),St("load",s);break;case"details":St("toggle",s);break;case"input":Qy(s,i),St("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},St("invalid",s);break;case"textarea":Zy(s,i),St("invalid",s)}zg(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&ad(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ad(s.textContent,a,t),r=["children",""+a]):Hc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&St("scroll",s)}switch(n){case"input":Zu(s),Jy(s,i,!0);break;case"textarea":Zu(s),ew(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Lh)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Xs]=e,t[eu]=s,b_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ug(n,s),n){case"dialog":St("cancel",t),St("close",t),r=s;break;case"iframe":case"object":case"embed":St("load",t),r=s;break;case"video":case"audio":for(r=0;r<cc.length;r++)St(cc[r],t);r=s;break;case"source":St("error",t),r=s;break;case"img":case"image":case"link":St("error",t),St("load",t),r=s;break;case"details":St("toggle",t),r=s;break;case"input":Qy(t,s),r=Lg(t,s),St("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Mt({},s,{value:void 0}),St("invalid",t);break;case"textarea":Zy(t,s),r=Bg(t,s),St("invalid",t);break;default:r=s}zg(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Q2(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&K2(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vc(t,l):typeof l=="number"&&Vc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&St("scroll",t):l!=null&&Tx(t,i,l,o))}switch(n){case"input":Zu(t),Jy(t,s,!1);break;case"textarea":Zu(t),ew(t);break;case"option":s.value!=null&&t.setAttribute("value",""+yi(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?aa(t,!!s.multiple,i,!1):s.defaultValue!=null&&aa(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Lh)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cn(e),null;case 6:if(t&&e.stateNode!=null)w_(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(fe(166));if(n=Gi(nu.current),Gi(Zs.current),ld(e)){if(s=e.stateNode,n=e.memoizedProps,s[Xs]=e,(i=s.nodeValue!==n)&&(t=Hn,t!==null))switch(t.tag){case 3:ad(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ad(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Xs]=e,e.stateNode=s}return cn(e),null;case 13:if(Ct(Pt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&Wn!==null&&e.mode&1&&!(e.flags&128))FC(),Ha(),e.flags|=98560,i=!1;else if(i=ld(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[Xs]=e}else Ha(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cn(e),i=!1}else Es!==null&&(km(Es),Es=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Pt.current&1?Wt===0&&(Wt=3):ub())),e.updateQueue!==null&&(e.flags|=4),cn(e),null);case 4:return Ya(),pm(t,e),t===null&&Jc(e.stateNode.containerInfo),cn(e),null;case 10:return Gx(e.type._context),cn(e),null;case 17:return On(e.type)&&jh(),cn(e),null;case 19:if(Ct(Pt),i=e.memoizedState,i===null)return cn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Ll(i,!1);else{if(Wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hh(t),o!==null){for(e.flags|=128,Ll(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return yt(Pt,Pt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Lt()>qa&&(e.flags|=128,s=!0,Ll(i,!1),e.lanes=4194304)}else{if(!s)if(t=Hh(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ll(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_t)return cn(e),null}else 2*Lt()-i.renderingStartTime>qa&&n!==1073741824&&(e.flags|=128,s=!0,Ll(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Lt(),e.sibling=null,n=Pt.current,yt(Pt,s?n&1|2:n&1),e):(cn(e),null);case 22:case 23:return cb(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?zn&1073741824&&(cn(e),e.subtreeFlags&6&&(e.flags|=8192)):cn(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function CM(t,e){switch(Wx(e),e.tag){case 1:return On(e.type)&&jh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ya(),Ct(Rn),Ct(gn),Jx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qx(e),null;case 13:if(Ct(Pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));Ha()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ct(Pt),null;case 4:return Ya(),null;case 10:return Gx(e.type._context),null;case 22:case 23:return cb(),null;case 24:return null;default:return null}}var dd=!1,fn=!1,_M=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function Zo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Nt(t,e,s)}else n.current=null}function gm(t,e,n){try{n()}catch(s){Nt(t,e,s)}}var Ww=!1;function EM(t,e){if(Jg=Ah,t=_C(),zx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==i||s!==0&&d.nodeType!==3||(l=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===i&&++u===s&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zg={focusedElem:t,selectionRange:n},Ah=!1,Pe=e;Pe!==null;)if(e=Pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Pe=t;else for(;Pe!==null;){e=Pe;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,w=m.memoizedState,g=e.stateNode,b=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:ks(e.type,x),w);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(y){Nt(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,Pe=t;break}Pe=e.return}return m=Ww,Ww=!1,m}function Mc(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&gm(e,n,i)}r=r.next}while(r!==s)}}function Yf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function mm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function v_(t){var e=t.alternate;e!==null&&(t.alternate=null,v_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xs],delete e[eu],delete e[nm],delete e[lM],delete e[cM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function k_(t){return t.tag===5||t.tag===3||t.tag===4}function Hw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||k_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lh));else if(s!==4&&(t=t.child,t!==null))for(xm(t,e,n),t=t.sibling;t!==null;)xm(t,e,n),t=t.sibling}function bm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(bm(t,e,n),t=t.sibling;t!==null;)bm(t,e,n),t=t.sibling}var Zt=null,_s=!1;function Rr(t,e,n){for(n=n.child;n!==null;)S_(t,e,n),n=n.sibling}function S_(t,e,n){if(Js&&typeof Js.onCommitFiberUnmount=="function")try{Js.onCommitFiberUnmount(Ff,n)}catch{}switch(n.tag){case 5:fn||Zo(n,e);case 6:var s=Zt,r=_s;Zt=null,Rr(t,e,n),Zt=s,_s=r,Zt!==null&&(_s?(t=Zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Zt.removeChild(n.stateNode));break;case 18:Zt!==null&&(_s?(t=Zt,n=n.stateNode,t.nodeType===8?lp(t.parentNode,n):t.nodeType===1&&lp(t,n),Kc(t)):lp(Zt,n.stateNode));break;case 4:s=Zt,r=_s,Zt=n.stateNode.containerInfo,_s=!0,Rr(t,e,n),Zt=s,_s=r;break;case 0:case 11:case 14:case 15:if(!fn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gm(n,e,o),r=r.next}while(r!==s)}Rr(t,e,n);break;case 1:if(!fn&&(Zo(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Nt(n,e,a)}Rr(t,e,n);break;case 21:Rr(t,e,n);break;case 22:n.mode&1?(fn=(s=fn)||n.memoizedState!==null,Rr(t,e,n),fn=s):Rr(t,e,n);break;default:Rr(t,e,n)}}function Vw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _M),e.forEach(function(s){var r=OM.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function ys(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Zt=a.stateNode,_s=!1;break e;case 3:Zt=a.stateNode.containerInfo,_s=!0;break e;case 4:Zt=a.stateNode.containerInfo,_s=!0;break e}a=a.return}if(Zt===null)throw Error(fe(160));S_(i,o,r),Zt=null,_s=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Nt(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)C_(e,t),e=e.sibling}function C_(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ys(e,t),js(t),s&4){try{Mc(3,t,t.return),Yf(3,t)}catch(x){Nt(t,t.return,x)}try{Mc(5,t,t.return)}catch(x){Nt(t,t.return,x)}}break;case 1:ys(e,t),js(t),s&512&&n!==null&&Zo(n,n.return);break;case 5:if(ys(e,t),js(t),s&512&&n!==null&&Zo(n,n.return),t.flags&32){var r=t.stateNode;try{Vc(r,"")}catch(x){Nt(t,t.return,x)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Y2(r,i),Ug(a,o);var c=Ug(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Q2(r,d):u==="dangerouslySetInnerHTML"?K2(r,d):u==="children"?Vc(r,d):Tx(r,u,d,c)}switch(a){case"input":jg(r,i);break;case"textarea":G2(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?aa(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?aa(r,!!i.multiple,i.defaultValue,!0):aa(r,!!i.multiple,i.multiple?[]:"",!1))}r[eu]=i}catch(x){Nt(t,t.return,x)}}break;case 6:if(ys(e,t),js(t),s&4){if(t.stateNode===null)throw Error(fe(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(x){Nt(t,t.return,x)}}break;case 3:if(ys(e,t),js(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Kc(e.containerInfo)}catch(x){Nt(t,t.return,x)}break;case 4:ys(e,t),js(t);break;case 13:ys(e,t),js(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(ab=Lt())),s&4&&Vw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(fn=(c=fn)||u,ys(e,t),fn=c):ys(e,t),js(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Pe=t,u=t.child;u!==null;){for(d=Pe=u;Pe!==null;){switch(f=Pe,p=f.child,f.tag){case 0:case 11:case 14:case 15:Mc(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(x){Nt(s,n,x)}}break;case 5:Zo(f,f.return);break;case 22:if(f.memoizedState!==null){Gw(d);continue}}p!==null?(p.return=f,Pe=p):Gw(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=X2("display",o))}catch(x){Nt(t,t.return,x)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){Nt(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ys(e,t),js(t),s&4&&Vw(t);break;case 21:break;default:ys(e,t),js(t)}}function js(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(k_(n)){var s=n;break e}n=n.return}throw Error(fe(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Vc(r,""),s.flags&=-33);var i=Hw(t);bm(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=Hw(t);xm(t,a,o);break;default:throw Error(fe(161))}}catch(l){Nt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PM(t,e,n){Pe=t,__(t)}function __(t,e,n){for(var s=(t.mode&1)!==0;Pe!==null;){var r=Pe,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||dd;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||fn;a=dd;var c=fn;if(dd=o,(fn=l)&&!c)for(Pe=r;Pe!==null;)o=Pe,l=o.child,o.tag===22&&o.memoizedState!==null?qw(r):l!==null?(l.return=o,Pe=l):qw(r);for(;i!==null;)Pe=i,__(i),i=i.sibling;Pe=r,dd=a,fn=c}Yw(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Pe=i):Yw(t)}}function Yw(t){for(;Pe!==null;){var e=Pe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fn||Yf(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!fn)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ks(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Iw(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Iw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Kc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}fn||e.flags&512&&mm(e)}catch(f){Nt(e,e.return,f)}}if(e===t){Pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Pe=n;break}Pe=e.return}}function Gw(t){for(;Pe!==null;){var e=Pe;if(e===t){Pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Pe=n;break}Pe=e.return}}function qw(t){for(;Pe!==null;){var e=Pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yf(4,e)}catch(l){Nt(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Nt(e,r,l)}}var i=e.return;try{mm(e)}catch(l){Nt(e,i,l)}break;case 5:var o=e.return;try{mm(e)}catch(l){Nt(e,o,l)}}}catch(l){Nt(e,e.return,l)}if(e===t){Pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Pe=a;break}Pe=e.return}}var TM=Math.ceil,Gh=Ar.ReactCurrentDispatcher,ib=Ar.ReactCurrentOwner,ps=Ar.ReactCurrentBatchConfig,ot=0,Qt=null,zt=null,rn=0,zn=0,ea=_i(0),Wt=0,ou=null,po=0,Gf=0,ob=0,Ic=null,Mn=null,ab=0,qa=1/0,dr=null,qh=!1,ym=null,fi=null,hd=!1,si=null,Kh=0,Nc=0,wm=null,ah=-1,lh=0;function vn(){return ot&6?Lt():ah!==-1?ah:ah=Lt()}function pi(t){return t.mode&1?ot&2&&rn!==0?rn&-rn:dM.transition!==null?(lh===0&&(lh=cC()),lh):(t=ft,t!==0||(t=window.event,t=t===void 0?16:mC(t.type)),t):1}function Ns(t,e,n,s){if(50<Nc)throw Nc=0,wm=null,Error(fe(185));Mu(t,n,s),(!(ot&2)||t!==Qt)&&(t===Qt&&(!(ot&2)&&(Gf|=n),Wt===4&&Qr(t,rn)),Ln(t,s),n===1&&ot===0&&!(e.mode&1)&&(qa=Lt()+500,Wf&&Ei()))}function Ln(t,e){var n=t.callbackNode;d4(t,e);var s=Dh(t,t===Qt?rn:0);if(s===0)n!==null&&sw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&sw(n),e===1)t.tag===0?uM(Kw.bind(null,t)):OC(Kw.bind(null,t)),oM(function(){!(ot&6)&&Ei()}),n=null;else{switch(uC(s)){case 1:n=Ax;break;case 4:n=aC;break;case 16:n=Nh;break;case 536870912:n=lC;break;default:n=Nh}n=A_(n,E_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function E_(t,e){if(ah=-1,lh=0,ot&6)throw Error(fe(327));var n=t.callbackNode;if(ha()&&t.callbackNode!==n)return null;var s=Dh(t,t===Qt?rn:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Xh(t,s);else{e=s;var r=ot;ot|=2;var i=T_();(Qt!==t||rn!==e)&&(dr=null,qa=Lt()+500,no(t,e));do try{NM();break}catch(a){P_(t,a)}while(!0);Yx(),Gh.current=i,ot=r,zt!==null?e=0:(Qt=null,rn=0,e=Wt)}if(e!==0){if(e===2&&(r=Gg(t),r!==0&&(s=r,e=vm(t,r))),e===1)throw n=ou,no(t,0),Qr(t,s),Ln(t,Lt()),n;if(e===6)Qr(t,s);else{if(r=t.current.alternate,!(s&30)&&!MM(r)&&(e=Xh(t,s),e===2&&(i=Gg(t),i!==0&&(s=i,e=vm(t,i))),e===1))throw n=ou,no(t,0),Qr(t,s),Ln(t,Lt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(fe(345));case 2:ji(t,Mn,dr);break;case 3:if(Qr(t,s),(s&130023424)===s&&(e=ab+500-Lt(),10<e)){if(Dh(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){vn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=tm(ji.bind(null,t,Mn,dr),e);break}ji(t,Mn,dr);break;case 4:if(Qr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Is(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Lt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*TM(s/1960))-s,10<s){t.timeoutHandle=tm(ji.bind(null,t,Mn,dr),s);break}ji(t,Mn,dr);break;case 5:ji(t,Mn,dr);break;default:throw Error(fe(329))}}}return Ln(t,Lt()),t.callbackNode===n?E_.bind(null,t):null}function vm(t,e){var n=Ic;return t.current.memoizedState.isDehydrated&&(no(t,e).flags|=256),t=Xh(t,e),t!==2&&(e=Mn,Mn=n,e!==null&&km(e)),t}function km(t){Mn===null?Mn=t:Mn.push.apply(Mn,t)}function MM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Ds(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~ob,e&=~Gf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Is(e),s=1<<n;t[n]=-1,e&=~s}}function Kw(t){if(ot&6)throw Error(fe(327));ha();var e=Dh(t,0);if(!(e&1))return Ln(t,Lt()),null;var n=Xh(t,e);if(t.tag!==0&&n===2){var s=Gg(t);s!==0&&(e=s,n=vm(t,s))}if(n===1)throw n=ou,no(t,0),Qr(t,e),Ln(t,Lt()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ji(t,Mn,dr),Ln(t,Lt()),null}function lb(t,e){var n=ot;ot|=1;try{return t(e)}finally{ot=n,ot===0&&(qa=Lt()+500,Wf&&Ei())}}function go(t){si!==null&&si.tag===0&&!(ot&6)&&ha();var e=ot;ot|=1;var n=ps.transition,s=ft;try{if(ps.transition=null,ft=1,t)return t()}finally{ft=s,ps.transition=n,ot=e,!(ot&6)&&Ei()}}function cb(){zn=ea.current,Ct(ea)}function no(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iM(n)),zt!==null)for(n=zt.return;n!==null;){var s=n;switch(Wx(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&jh();break;case 3:Ya(),Ct(Rn),Ct(gn),Jx();break;case 5:Qx(s);break;case 4:Ya();break;case 13:Ct(Pt);break;case 19:Ct(Pt);break;case 10:Gx(s.type._context);break;case 22:case 23:cb()}n=n.return}if(Qt=t,zt=t=gi(t.current,null),rn=zn=e,Wt=0,ou=null,ob=Gf=po=0,Mn=Ic=null,Yi!==null){for(e=0;e<Yi.length;e++)if(n=Yi[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}Yi=null}return t}function P_(t,e){do{var n=zt;try{if(Yx(),rh.current=Yh,Vh){for(var s=Tt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Vh=!1}if(fo=0,Vt=Ut=Tt=null,Tc=!1,su=0,ib.current=null,n===null||n.return===null){Wt=1,ou=e,zt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=rn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Lw(o);if(p!==null){p.flags&=-257,jw(p,o,a,i,e),p.mode&1&&Ow(i,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var x=new Set;x.add(l),e.updateQueue=x}else m.add(l);break e}else{if(!(e&1)){Ow(i,c,e),ub();break e}l=Error(fe(426))}}else if(_t&&a.mode&1){var w=Lw(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),jw(w,o,a,i,e),Hx(Ga(l,a));break e}}i=l=Ga(l,a),Wt!==4&&(Wt=2),Ic===null?Ic=[i]:Ic.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=u_(i,l,e);Mw(i,g);break e;case 1:a=l;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(fi===null||!fi.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var y=d_(i,a,e);Mw(i,y);break e}}i=i.return}while(i!==null)}I_(n)}catch(S){e=S,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function T_(){var t=Gh.current;return Gh.current=Yh,t===null?Yh:t}function ub(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Qt===null||!(po&268435455)&&!(Gf&268435455)||Qr(Qt,rn)}function Xh(t,e){var n=ot;ot|=2;var s=T_();(Qt!==t||rn!==e)&&(dr=null,no(t,e));do try{IM();break}catch(r){P_(t,r)}while(!0);if(Yx(),ot=n,Gh.current=s,zt!==null)throw Error(fe(261));return Qt=null,rn=0,Wt}function IM(){for(;zt!==null;)M_(zt)}function NM(){for(;zt!==null&&!n4();)M_(zt)}function M_(t){var e=D_(t.alternate,t,zn);t.memoizedProps=t.pendingProps,e===null?I_(t):zt=e,ib.current=null}function I_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=CM(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Wt=6,zt=null;return}}else if(n=SM(n,e,zn),n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Wt===0&&(Wt=5)}function ji(t,e,n){var s=ft,r=ps.transition;try{ps.transition=null,ft=1,DM(t,e,n,s)}finally{ps.transition=r,ft=s}return null}function DM(t,e,n,s){do ha();while(si!==null);if(ot&6)throw Error(fe(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(h4(t,i),t===Qt&&(zt=Qt=null,rn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hd||(hd=!0,A_(Nh,function(){return ha(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ps.transition,ps.transition=null;var o=ft;ft=1;var a=ot;ot|=4,ib.current=null,EM(t,n),C_(n,t),J4(Zg),Ah=!!Jg,Zg=Jg=null,t.current=n,PM(n),s4(),ot=a,ft=o,ps.transition=i}else t.current=n;if(hd&&(hd=!1,si=t,Kh=r),i=t.pendingLanes,i===0&&(fi=null),o4(n.stateNode),Ln(t,Lt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(qh)throw qh=!1,t=ym,ym=null,t;return Kh&1&&t.tag!==0&&ha(),i=t.pendingLanes,i&1?t===wm?Nc++:(Nc=0,wm=t):Nc=0,Ei(),null}function ha(){if(si!==null){var t=uC(Kh),e=ps.transition,n=ft;try{if(ps.transition=null,ft=16>t?16:t,si===null)var s=!1;else{if(t=si,si=null,Kh=0,ot&6)throw Error(fe(331));var r=ot;for(ot|=4,Pe=t.current;Pe!==null;){var i=Pe,o=i.child;if(Pe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Pe=c;Pe!==null;){var u=Pe;switch(u.tag){case 0:case 11:case 15:Mc(8,u,i)}var d=u.child;if(d!==null)d.return=u,Pe=d;else for(;Pe!==null;){u=Pe;var f=u.sibling,p=u.return;if(v_(u),u===c){Pe=null;break}if(f!==null){f.return=p,Pe=f;break}Pe=p}}}var m=i.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}Pe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Pe=o;else e:for(;Pe!==null;){if(i=Pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mc(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Pe=g;break e}Pe=i.return}}var b=t.current;for(Pe=b;Pe!==null;){o=Pe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Pe=v;else e:for(o=b;Pe!==null;){if(a=Pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yf(9,a)}}catch(S){Nt(a,a.return,S)}if(a===o){Pe=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,Pe=y;break e}Pe=a.return}}if(ot=r,Ei(),Js&&typeof Js.onPostCommitFiberRoot=="function")try{Js.onPostCommitFiberRoot(Ff,t)}catch{}s=!0}return s}finally{ft=n,ps.transition=e}}return!1}function Xw(t,e,n){e=Ga(n,e),e=u_(t,e,1),t=hi(t,e,1),e=vn(),t!==null&&(Mu(t,1,e),Ln(t,e))}function Nt(t,e,n){if(t.tag===3)Xw(t,t,n);else for(;e!==null;){if(e.tag===3){Xw(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(fi===null||!fi.has(s))){t=Ga(n,t),t=d_(e,t,1),e=hi(e,t,1),t=vn(),e!==null&&(Mu(e,1,t),Ln(e,t));break}}e=e.return}}function AM(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,Qt===t&&(rn&n)===n&&(Wt===4||Wt===3&&(rn&130023424)===rn&&500>Lt()-ab?no(t,0):ob|=n),Ln(t,e)}function N_(t,e){e===0&&(t.mode&1?(e=nd,nd<<=1,!(nd&130023424)&&(nd=4194304)):e=1);var n=vn();t=Mr(t,e),t!==null&&(Mu(t,e,n),Ln(t,n))}function RM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),N_(t,n)}function OM(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(fe(314))}s!==null&&s.delete(e),N_(t,n)}var D_;D_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rn.current)Dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dn=!1,kM(t,e,n);Dn=!!(t.flags&131072)}else Dn=!1,_t&&e.flags&1048576&&LC(e,$h,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;oh(t,e),t=e.pendingProps;var r=Wa(e,gn.current);da(e,n),r=eb(null,e,s,t,r,n);var i=tb();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,On(s)?(i=!0,Fh(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Kx(e),r.updater=Vf,e.stateNode=r,r._reactInternals=e,lm(e,s,t,n),e=dm(null,e,s,!0,i,n)):(e.tag=0,_t&&i&&Ux(e),wn(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(oh(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=jM(s),t=ks(s,t),r){case 0:e=um(null,e,s,t,n);break e;case 1:e=$w(null,e,s,t,n);break e;case 11:e=Fw(null,e,s,t,n);break e;case 14:e=Bw(null,e,s,ks(s.type,t),n);break e}throw Error(fe(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ks(s,r),um(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ks(s,r),$w(t,e,s,r,n);case 3:e:{if(g_(e),t===null)throw Error(fe(387));s=e.pendingProps,i=e.memoizedState,r=i.element,UC(t,e),Wh(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Ga(Error(fe(423)),e),e=zw(t,e,s,n,r);break e}else if(s!==r){r=Ga(Error(fe(424)),e),e=zw(t,e,s,n,r);break e}else for(Wn=di(e.stateNode.containerInfo.firstChild),Hn=e,_t=!0,Es=null,n=$C(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ha(),s===r){e=Ir(t,e,n);break e}wn(t,e,s,n)}e=e.child}return e;case 5:return WC(e),t===null&&im(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,em(s,r)?o=null:i!==null&&em(s,i)&&(e.flags|=32),p_(t,e),wn(t,e,o,n),e.child;case 6:return t===null&&im(e),null;case 13:return m_(t,e,n);case 4:return Xx(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Va(e,null,s,n):wn(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ks(s,r),Fw(t,e,s,r,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,yt(zh,s._currentValue),s._currentValue=o,i!==null)if(Ds(i.value,o)){if(i.children===r.children&&!Rn.current){e=Ir(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=Sr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),om(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),om(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,da(e,n),r=gs(r),s=s(r),e.flags|=1,wn(t,e,s,n),e.child;case 14:return s=e.type,r=ks(s,e.pendingProps),r=ks(s.type,r),Bw(t,e,s,r,n);case 15:return h_(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ks(s,r),oh(t,e),e.tag=1,On(s)?(t=!0,Fh(e)):t=!1,da(e,n),c_(e,s,r),lm(e,s,r,n),dm(null,e,s,!0,t,n);case 19:return x_(t,e,n);case 22:return f_(t,e,n)}throw Error(fe(156,e.tag))};function A_(t,e){return oC(t,e)}function LM(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(t,e,n,s){return new LM(t,e,n,s)}function db(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jM(t){if(typeof t=="function")return db(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ix)return 11;if(t===Nx)return 14}return 2}function gi(t,e){var n=t.alternate;return n===null?(n=ds(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ch(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")db(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ho:return so(n.children,r,i,e);case Mx:o=8,r|=8;break;case Dg:return t=ds(12,n,e,r|2),t.elementType=Dg,t.lanes=i,t;case Ag:return t=ds(13,n,e,r),t.elementType=Ag,t.lanes=i,t;case Rg:return t=ds(19,n,e,r),t.elementType=Rg,t.lanes=i,t;case W2:return qf(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z2:o=10;break e;case U2:o=9;break e;case Ix:o=11;break e;case Nx:o=14;break e;case qr:o=16,s=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=ds(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function so(t,e,n,s){return t=ds(7,t,s,e),t.lanes=n,t}function qf(t,e,n,s){return t=ds(22,t,s,e),t.elementType=W2,t.lanes=n,t.stateNode={isHidden:!1},t}function mp(t,e,n){return t=ds(6,t,null,e),t.lanes=n,t}function xp(t,e,n){return e=ds(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FM(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q0(0),this.expirationTimes=Q0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q0(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function hb(t,e,n,s,r,i,o,a,l){return t=new FM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ds(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kx(i),t}function BM(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wo,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function R_(t){if(!t)return wi;t=t._reactInternals;e:{if(Po(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(On(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(On(n))return RC(t,n,e)}return e}function O_(t,e,n,s,r,i,o,a,l){return t=hb(n,s,!0,t,r,i,o,a,l),t.context=R_(null),n=t.current,s=vn(),r=pi(n),i=Sr(s,r),i.callback=e??null,hi(n,i,r),t.current.lanes=r,Mu(t,r,s),Ln(t,s),t}function Kf(t,e,n,s){var r=e.current,i=vn(),o=pi(r);return n=R_(n),e.context===null?e.context=n:e.pendingContext=n,e=Sr(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=hi(r,e,o),t!==null&&(Ns(t,r,o,i),sh(t,r,o)),o}function Qh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fb(t,e){Qw(t,e),(t=t.alternate)&&Qw(t,e)}function $M(){return null}var L_=typeof reportError=="function"?reportError:function(t){console.error(t)};function pb(t){this._internalRoot=t}Xf.prototype.render=pb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));Kf(t,e,null,null)};Xf.prototype.unmount=pb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;go(function(){Kf(null,t,null,null)}),e[Tr]=null}};function Xf(t){this._internalRoot=t}Xf.prototype.unstable_scheduleHydration=function(t){if(t){var e=fC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xr.length&&e!==0&&e<Xr[n].priority;n++);Xr.splice(n,0,t),n===0&&gC(t)}};function gb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jw(){}function zM(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=Qh(o);i.call(c)}}var o=O_(e,s,t,0,null,!1,!1,"",Jw);return t._reactRootContainer=o,t[Tr]=o.current,Jc(t.nodeType===8?t.parentNode:t),go(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=Qh(l);a.call(c)}}var l=hb(t,0,!1,null,null,!1,!1,"",Jw);return t._reactRootContainer=l,t[Tr]=l.current,Jc(t.nodeType===8?t.parentNode:t),go(function(){Kf(e,l,n,s)}),l}function Jf(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Qh(o);a.call(l)}}Kf(e,o,t,r)}else o=zM(n,e,t,r,s);return Qh(o)}dC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lc(e.pendingLanes);n!==0&&(Rx(e,n|1),Ln(e,Lt()),!(ot&6)&&(qa=Lt()+500,Ei()))}break;case 13:go(function(){var s=Mr(t,1);if(s!==null){var r=vn();Ns(s,t,1,r)}}),fb(t,1)}};Ox=function(t){if(t.tag===13){var e=Mr(t,134217728);if(e!==null){var n=vn();Ns(e,t,134217728,n)}fb(t,134217728)}};hC=function(t){if(t.tag===13){var e=pi(t),n=Mr(t,e);if(n!==null){var s=vn();Ns(n,t,e,s)}fb(t,e)}};fC=function(){return ft};pC=function(t,e){var n=ft;try{return ft=t,e()}finally{ft=n}};Hg=function(t,e,n){switch(e){case"input":if(jg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Uf(s);if(!r)throw Error(fe(90));V2(s),jg(s,r)}}}break;case"textarea":G2(t,n);break;case"select":e=n.value,e!=null&&aa(t,!!n.multiple,e,!1)}};eC=lb;tC=go;var UM={usingClientEntryPoint:!1,Events:[Nu,qo,Uf,J2,Z2,lb]},jl={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WM={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rC(t),t===null?null:t.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||$M,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{Ff=fd.inject(WM),Js=fd}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UM;Qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gb(e))throw Error(fe(200));return BM(t,e,null,n)};Qn.createRoot=function(t,e){if(!gb(t))throw Error(fe(299));var n=!1,s="",r=L_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=hb(t,1,!1,null,null,n,!1,s,r),t[Tr]=e.current,Jc(t.nodeType===8?t.parentNode:t),new pb(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=rC(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return go(t)};Qn.hydrate=function(t,e,n){if(!Qf(e))throw Error(fe(200));return Jf(null,t,e,!0,n)};Qn.hydrateRoot=function(t,e,n){if(!gb(t))throw Error(fe(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=L_;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=O_(e,null,t,1,n??null,r,!1,i,o),t[Tr]=e.current,Jc(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Xf(e)};Qn.render=function(t,e,n){if(!Qf(e))throw Error(fe(200));return Jf(null,t,e,!1,n)};Qn.unmountComponentAtNode=function(t){if(!Qf(t))throw Error(fe(40));return t._reactRootContainer?(go(function(){Jf(null,null,t,!1,function(){t._reactRootContainer=null,t[Tr]=null})}),!0):!1};Qn.unstable_batchedUpdates=lb;Qn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Qf(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return Jf(t,e,n,!1,s)};Qn.version="18.3.1-next-f1338f8080-20240426";function j_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j_)}catch(t){console.error(t)}}j_(),j2.exports=Qn;var Pi=j2.exports;const HM=_2(Pi);var Zw=Pi;Ig.createRoot=Zw.createRoot,Ig.hydrateRoot=Zw.hydrateRoot;class mb{constructor(e,n=3,s=3e4){ie(this,"baseURL");ie(this,"timeout");ie(this,"maxRetries");this.baseURL=e.replace(/\/$/,""),this.maxRetries=n,this.timeout=s}async do(e){const n=Date.now();let s=null;for(let r=1;r<=this.maxRetries;r++)try{return{...await this.doRequest(e),duration:Date.now()-n}}catch(i){if(s=i,this.isNonceError(i))throw i;if(r<this.maxRetries){const o=r*1e3;await this.delay(o)}}throw new Error(`Request failed after ${this.maxRetries} attempts: ${s==null?void 0:s.message}`)}async doRequest(e){const n=`${this.baseURL}${e.path}`,s={"Content-Type":"application/json",Accept:"application/json, */*",...e.headers},r={method:e.method,headers:s,signal:AbortSignal.timeout(this.timeout)};e.body&&e.method!=="GET"?r.body=JSON.stringify(e.body):e.method==="GET"&&(r.body=void 0);const i=await fetch(n,r);let o;const a=i.headers.get("content-type");if(a!=null&&a.includes("application/json"))try{o=await i.json()}catch{o=await i.text()}else o=await i.text();if(i.status>=400)throw new Error(`HTTP ${i.status}: ${JSON.stringify(o)}`);return{statusCode:i.status,body:o,headers:i.headers}}isNonceError(e){const n=(e==null?void 0:e.message)||"";return n.toLowerCase().includes("nonce")||n.includes("InvalidNonce")||n.includes("NonceError")}delay(e){return new Promise(n=>setTimeout(n,e))}async get(e,n){return this.do({method:"GET",path:e,headers:n})}async post(e,n,s){return this.do({method:"POST",path:e,body:n,headers:s})}async put(e,n,s){return this.do({method:"PUT",path:e,body:n,headers:s})}async delete(e,n){return this.do({method:"DELETE",path:e,headers:n})}getBaseURL(){return this.baseURL}setTimeout(e){this.timeout=e}getTimeout(){return this.timeout}}const fa=1e8;function ut(t){const e=typeof t=="string"?parseFloat(t):t;if(isNaN(e))throw new Error(`Invalid value for satoshi conversion: ${t}`);if(e<0)throw new Error(`Negative values not allowed for satoshi conversion: ${t}`);return BigInt(Math.floor(e*fa)).toString()}function ke(t){const e=BigInt(t);return Number(e)/fa}function F_(t){if(t<0)throw new Error(`Negative values not allowed: ${t}`);return Math.floor(t*fa)}function ev(t){try{return BigInt(t)>=0n}catch{return!1}}function VM(t){return t.map(ut)}function YM(t){return t.map(ke)}function tv(t){return`0x${(typeof t=="string"?parseInt(t,10):t).toString(16)}`}let Fl={instance:null,module:null},GM=null;async function qM(){try{if(window.Go)console.log("wasm_exec.js already loaded");else{console.log("Loading wasm_exec.js...");const a=["/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.21.0/misc/wasm/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.20.0/misc/wasm/wasm_exec.js","https://unpkg.com/@go-wasm/wasm_exec@latest/wasm_exec.js"];let l=!1,c=null;for(const u of a)try{console.log(`Trying to load wasm_exec.js from: ${u}`),await new Promise((d,f)=>{const p=document.createElement("script");p.src=u,p.async=!0,p.onload=()=>{console.log(`Successfully loaded wasm_exec.js from: ${u}`),d()},p.onerror=()=>{f(new Error(`Failed to load from ${u}`))},document.head.appendChild(p)}),l=!0;break}catch(d){console.warn(`Failed to load from ${u}:`,d==null?void 0:d.message),c=d,document.head.querySelectorAll(`script[src="${u}"]`).forEach(p=>p.remove())}if(!l)throw new Error(`Failed to load wasm_exec.js from all sources. Last error: ${(c==null?void 0:c.message)||"Unknown error"}. Please ensure wasm_exec.js is available. You can download it from: https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.js`);console.log("wasm_exec.js loaded successfully")}const t=window.Go;if(!t)throw new Error("Go runtime not available. Make sure wasm_exec.js is loaded.");console.log("Go runtime available");const e=new t;GM=e,console.log("Go instance created");const n="/morm_signer.wasm";console.log("Loading WASM from:",n);let s;try{const a=await fetch(n);if(console.log("WASM fetch response:",{status:a.status,statusText:a.statusText,ok:a.ok,url:a.url}),!a.ok){const l=await a.text().catch(()=>"Unable to read error response");throw new Error(`Failed to load WASM from ${n}: ${a.status} ${a.statusText}. Make sure the morm_signer.wasm file is available in the public directory.`)}s=await a.arrayBuffer(),console.log("WASM file loaded successfully, size:",s.byteLength,"bytes")}catch(a){throw console.error("WASM fetch failed:",a),new Error(`Failed to fetch WASM file: ${(a==null?void 0:a.message)||a}. The file should be accessible at ${window.location.origin}${n}`)}console.log("Instantiating WASM module...");let r;try{r=await WebAssembly.instantiate(s,e.importObject),console.log("WASM module instantiated successfully")}catch(a){throw console.error("Failed to instantiate WASM:",a),new Error(`Failed to instantiate WASM module: ${(a==null?void 0:a.message)||a}. The WASM file may be corrupted or incompatible.`)}Fl.instance=r.instance,Fl.module=r.module,console.log("Running Go program..."),console.log("Window object before Go run:",Object.keys(window).filter(a=>typeof window[a]=="function"&&(a.startsWith("morm")||a.startsWith("derive")||a.startsWith("generate")||a==="Go")));try{e.run(Fl.instance),console.log("Go program started (run() completed)")}catch(a){throw console.error("Failed to run Go program:",a),new Error(`Failed to run Go program: ${(a==null?void 0:a.message)||a}. The WASM module may not be compatible with the current Go runtime.`)}console.log("Waiting for Go initialization and function exports...");const i=10;let o=[];for(let a=1;a<=i;a++){const l=Math.min(a*200,2e3);await new Promise(u=>setTimeout(u,l));const c=Object.keys(window).filter(u=>typeof window[u]=="function");if(o=c.filter(u=>u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u.startsWith("verify")||u.startsWith("map")||u.startsWith("validate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"),console.log(`Attempt ${a}/${i}:`,{waitTime:`${l}ms`,allWindowFunctions:c.length,exportedFunctions:o,sampleWindowKeys:c.slice(0,20)}),o.length>0){console.log(" Go functions found!",o);break}a===i&&(console.warn(" No expected functions found. All window functions:",c.sort()),console.warn(" Check if functions are exported with different names or if there are Go runtime errors"))}if(o.length===0){const a=[],l=Object.keys(window);if(console.error("Debugging info:",{totalWindowKeys:l.length,allFunctions:l.filter(c=>typeof window[c]=="function"),hasGo:typeof window.Go=="function",wasmInstance:Fl.instance!==null,wasmModule:Fl.module!==null}),typeof window.InitWASMSigner=="function"){console.log("Found InitWASMSigner function, calling it...");try{window.InitWASMSigner(),await new Promise(u=>setTimeout(u,500));const c=Object.keys(window).filter(u=>typeof window[u]=="function"&&(u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"));c.length>0&&(console.log(" Functions found after InitWASMSigner!",c),o=c)}catch(c){console.error("Failed to call InitWASMSigner:",c)}}if(o.length===0)throw new Error(`Go functions not exported after initialization.

ROOT CAUSE: The Go main() function in main_wasm.go does not call InitWASMSigner(), which is required to export functions via js.Global().Set().

SOLUTION: The Go code needs to be fixed. In main_wasm.go, the main() function should call:
  InitWASMSigner(CreateTestnetDomain()) // or appropriate domain

Current status:
- WASM file loaded: 
- Go runtime loaded: ${typeof window.Go=="function"?"":""}
- Go program run: 
- Functions exported: 

Check the browser console for detailed debugging information.`)}return console.log("WASM module loaded and initialized successfully"),!0}catch(t){throw console.error("Failed to load WASM module:",t),new Error((t==null?void 0:t.message)||`Failed to load WASM module: ${String(t)}`)}}class KM{constructor(){ie(this,"isInitialized",!1);ie(this,"wasmLoaded",!1)}async initialize(){try{return this.wasmLoaded=await qM(),this.isInitialized=this.wasmLoaded,this.wasmLoaded}catch(e){throw console.error("Failed to initialize MormSigner:",e),new Error((e==null?void 0:e.message)||"Failed to initialize WASM module")}}isReady(){return this.isInitialized&&this.wasmLoaded&&typeof window.mormGenerateEthereumKeypair=="function"&&typeof window.GenerateSingleSignature=="function"&&typeof window.GenerateMultisignSignatures=="function"&&typeof window.GetSupportedSignatureTypes=="function"&&typeof window.IsSignatureTypeSupported=="function"}async generateAddress(e,n=0){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=window.deriveAddress(e,n);return typeof s=="string"?{success:!0,address:s,index:n,mnemonic:e.substring(0,20)+"..."}:s&&s.error?{success:!1,error:s.error}:{success:!1,error:"Failed to derive address"}}catch(s){return console.error("Failed to generate address:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async generateMnemonic(e=12){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.generateMnemonic(e);return typeof n=="string"?{success:!0,mnemonic:n}:n&&n.error?{success:!1,error:n.error}:{success:!1,error:"Failed to generate mnemonic"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async generateKeypair(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const e=window.mormGenerateEthereumKeypair();return e.error?{success:!1,error:e.error}:{success:!0,privateKey:e.privateKey,address:e.address}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async signMessage(e,n,s={}){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=(s.useEIP712,"ECDSA_LEGACY"),i=window.generateSignature(r,e,n);return typeof i=="string"?{success:!0,signature:i,message:n,options:s}:i&&i.error?{success:!1,error:i.error}:{success:!1,error:"Failed to generate signature"}}catch(r){return console.error("Failed to sign message:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async signDeposit(e,n,s,r={}){const i={...r,depositMode:!0,walletAddress:n,amount:s},o=JSON.stringify({action:"deposit",owner:n,amount:s,nonce:r.nonce||Date.now(),deadline:r.deadline||Date.now()+36e5}),a=await this.signMessage(e,o,i);return{success:a.success,signature:a.signature,message:a.message,address:n,options:a.options,error:a.error}}async signEIP712(e,n,s={}){const r={...s,useEIP712:!0};return this.signMessage(e,n,r)}async prepareAgentSign(e){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const n=window.mormPrepareAgentSign(e.owner,e.agent,e.expiresInDays,e.permissions,e.nonce);return n&&n.error?{success:!1,error:n.error}:{success:!0,typedData:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async signAgentApproval(e,n){const s=await this.prepareAgentSign(n);if(!s.success||!s.typedData)return s;const r=JSON.stringify({action:"agent::approve",wallet:n.owner,agent:n.agent,agentName:n.agentName||"",expiresInDays:n.expiresInDays,permissions:n.permissions,nonce:n.nonce,deadline:Date.now()+n.expiresInDays*24*60*60*1e3}),i=await this.signMessage(e,r,{useEIP712:!0});return i.success?{success:!0,typedData:s.typedData,signature:i.signature}:{success:!1,error:i.error}}async verifySignature(e,n,s){if(!this.isReady())throw new Error("MormSigner not initialized");try{const r=window.verifySignature(e,n,s);return typeof r=="boolean"?r:!1}catch(r){return console.error("Failed to verify signature:",r),!1}}mapAlgorithm(e){if(!this.isReady())return"ECDSA_LEGACY";try{return window.mapAlgorithm(e)}catch(n){return console.error("Failed to map algorithm:",n),"ECDSA_LEGACY"}}validateNonce(e,n){if(!this.isReady())return!1;try{return window.validateNonce(e,n)}catch(s){return console.error("Failed to validate nonce:",s),!1}}getStatus(){return{initialized:this.isInitialized,wasmLoaded:this.wasmLoaded,ready:this.isReady()}}async generateSingleSignature(e,n,s){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateSingleSignature(e,n,s);return r.error?{success:!1,error:r.error}:{success:!0,signature:r.signature}}catch(r){return console.error("Failed to generate single signature:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async generateMultisignSignatures(e,n,s=!1){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.GenerateMultisignSignatures(e,n,s);if(r.error)return{success:!1,error:r.error};let i=null;if(r.tx)try{i=JSON.parse(r.tx)}catch(o){console.warn("Failed to parse updated transaction JSON:",o)}return{success:!0,tx:i,txJSON:r.tx}}catch(r){return console.error("Failed to generate multisign signatures:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}getSupportedSignatureTypes(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{return{success:!0,types:window.GetSupportedSignatureTypes()}}catch(e){return console.error("Failed to get supported signature types:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}isSignatureTypeSupported(e){if(!this.isReady())return!1;try{return window.IsSignatureTypeSupported(e)}catch(n){return console.error("Failed to check signature type support:",n),!1}}}const We=new KM,XM=6e4,nv=100,bp=24*60*60*1e3,yp=1;class B_{constructor(e){ie(this,"infoClient");ie(this,"onChainState",new Map);ie(this,"offChainNonces",new Map);ie(this,"syncTimers",new Map);this.infoClient=e}getOrCreateState(e){const n=e.toLowerCase();let s=this.onChainState.get(n);return s||(s={confirmed:0,pending:[],lastSync:0,mu:!1},this.onChainState.set(n,s)),s}async acquireLock(e){for(;e.mu;)await new Promise(n=>setTimeout(n,10));e.mu=!0}releaseLock(e){e.mu=!1}async syncWithCore(e){const n=this.getOrCreateState(e),s=Date.now();if(!(s-n.lastSync<XM))try{const r=await this.infoClient.getNonceStatus(e,!1),i=(r==null?void 0:r.next_nonce)!==void 0?typeof r.next_nonce=="string"?parseInt(r.next_nonce,10):r.next_nonce:0;n.confirmed=i,n.lastSync=s}catch(r){console.warn(`[NonceManager] Failed to sync with core for ${e}:`,r)}}async getNonce(e,n="latest"){const s=e.toLowerCase(),r=this.getOrCreateState(s);if(await this.syncWithCore(s),n==="latest")return r.confirmed;{const i=r.pending.length>0?Math.max(...r.pending):r.confirmed;return Math.max(r.confirmed,i)}}async validateNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{if(s||await this.syncWithCore(r),i.confirmed===0&&n<yp)throw new Error(`nonce too low for new account: got ${n}, minimum ${yp}`);if(i.confirmed>0&&n<=i.confirmed)throw new Error(`nonce too low: got ${n}, confirmed ${i.confirmed}`);if(i.pending.includes(n))throw new Error(`nonce already pending: ${n}`);if(i.pending.length>=nv)throw new Error(`pending nonce limit reached: max ${nv} pending nonces`);if(s){const o=this.offChainNonces.get(r);if(o){const a=o.get(n);if(a){const l=Date.now();if(l-a<bp)throw new Error(`nonce already used (off-chain): ${n}, expires in ${Math.floor((bp-(l-a))/1e3)}s`);o.delete(n)}}}i.pending.push(n),i.pending.sort((o,a)=>o-a)}finally{this.releaseLock(i)}}async commitNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){let a=this.offChainNonces.get(r);a||(a=new Map,this.offChainNonces.set(r,a)),a.set(n,Date.now())}else if(n===i.confirmed+1)for(i.confirmed=n;i.pending.length>0&&i.pending[0]===i.confirmed+1;){const a=i.pending.shift();i.confirmed=a}}finally{this.releaseLock(i)}}async rejectNonce(e,n,s=!1){const r=e.toLowerCase(),i=this.getOrCreateState(r);await this.acquireLock(i);try{const o=i.pending.indexOf(n);if(o!==-1&&i.pending.splice(o,1),s){const a=this.offChainNonces.get(r);a&&a.delete(n)}}finally{this.releaseLock(i)}}async getExpectedNextNonce(e,n=!1){const s=e.toLowerCase();await this.syncWithCore(s);const r=this.getOrCreateState(s),i=r.pending.length>0?Math.max(...r.pending):r.confirmed,o=Math.max(r.confirmed+1,i+1),a=o===0?yp:o;if(n)try{await this.validateNonce(s,a,!1)}catch(l){console.warn(`[NonceManager] Failed to reserve nonce ${a}:`,l.message)}return{next_nonce:a,reserved:n,timestamp:Date.now()}}cleanupExpiredOffChainNonces(){const e=Date.now();for(const[n,s]of this.offChainNonces.entries()){for(const[r,i]of s.entries())e-i>=bp&&s.delete(r);s.size===0&&this.offChainNonces.delete(n)}}resetNonce(e){const n=e.toLowerCase();this.onChainState.delete(n),this.offChainNonces.delete(n);const s=this.syncTimers.get(n);s&&(clearInterval(s),this.syncTimers.delete(n))}getState(e){const n=e.toLowerCase();return this.onChainState.get(n)}}class pn{constructor(e){ie(this,"httpClient");ie(this,"sessionToken");this.httpClient=new mb(e.baseURL),this.sessionToken=e.sessionToken}setSessionToken(e){this.sessionToken=e}getHeaders(){const e={Accept:"application/json, */*"};return this.sessionToken&&(e.Authorization=`Bearer ${this.sessionToken}`),e}async getMarkets(){const n=(await this.httpClient.get("/market/v1/all",this.getHeaders())).body;return Array.isArray(n)?n:n&&typeof n=="object"&&"markets"in n?n.markets:[]}async getMarketsWithFilters(e,n){let s="/market/v1/all";const r=[];e&&r.push(`filter=${e}`),n&&r.push("active_only=true"),r.length>0&&(s+="?"+r.join("&"));const o=(await this.httpClient.get(s,this.getHeaders())).body;return Array.isArray(o)?o:o&&typeof o=="object"&&"markets"in o?o.markets:[]}async getMarketByID(e){return(await this.httpClient.get(`/market/v1/market/${e}`,this.getHeaders())).body}async getMarketByMoniker(e){return(await this.httpClient.get(`/market/v1/market/by-moniker/${e}`,this.getHeaders())).body}async getMarketStats(e){return(await this.httpClient.get(`/market/v1/market/${e}/stats`,this.getHeaders())).body}async getTicker(e){return this.getMarketStats(e)}async getExchangeInfo(){return(await this.httpClient.get("/market/v1/exchangeInfo",this.getHeaders())).body}async getOrderbook(e,n=!0,s=20){let r=`/clob/v1/orderbook/${e}`,i=20;s>0&&s<100&&(i=s),r+=`?depth=${i}`;const a=(await this.httpClient.get(r,this.getHeaders())).body;return n&&a&&(a.bids&&Array.isArray(a.bids)&&(a.bids=a.bids.map(([l,c])=>[ke(l),ke(c)])),a.asks&&Array.isArray(a.asks)&&(a.asks=a.asks.map(([l,c])=>[ke(l),ke(c)]))),a}async getMarketTrades(e,n){let s=`/clob/v1/trades?market_id=${e}`;n&&n>0&&(s+=`&limit=${n}`);const r=await this.httpClient.get(s,this.getHeaders());console.debug("[InfoClient] getMarketTrades response for marketId:",e,"response:",r.body);const i=r.body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:(console.warn("[InfoClient] getMarketTrades: Unexpected response structure:",r.body),[])}async getRecentTrades(e,n=100){return this.getMarketTrades(e,n)}async getTrades(e,n){let s=`/clob/v1/trades?symbol=${e}`;n&&n>0&&(s+=`&limit=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:[]}async getAggTrades(e,n,s,r){let i=`/market/v1/aggTrades?symbol=${e}`;return n&&n>0&&(i+=`&limit=${n}`),s&&s>0&&(i+=`&startTime=${s}`),r&&r>0&&(i+=`&endTime=${r}`),(await this.httpClient.get(i,this.getHeaders())).body}async getKlines(e,n,s,r,i){let o=`/clob/v1/klines?symbol=${e}&interval=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l)?l:[]}async getContinuousKlines(e,n,s,r,i,o){let a=`/market/v1/continuousKlines?pair=${e}&contractType=${n}&interval=${s}`;return r&&r>0&&(a+=`&limit=${r}`),i&&i>0&&(a+=`&startTime=${i}`),o&&o>0&&(a+=`&endTime=${o}`),(await this.httpClient.get(a,this.getHeaders())).body}async getPremiumIndex(e){let n="/market/v1/premiumIndex";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getFundingRate(e,n,s,r){let i="/market/v1/fundingRate";const o=[];e&&o.push(`symbol=${e}`),n&&n>0&&o.push(`limit=${n}`),s&&s>0&&o.push(`startTime=${s}`),r&&r>0&&o.push(`endTime=${r}`),o.length>0&&(i+="?"+o.join("&"));const l=(await this.httpClient.get(i,this.getHeaders())).body;return Array.isArray(l)?l:l&&typeof l=="object"&&"data"in l&&Array.isArray(l.data)?l.data:l?[l]:[]}async getFundingInfo(){const n=(await this.httpClient.get("/market/v1/fundingInfo",this.getHeaders())).body;return Array.isArray(n)?n:[]}async getDeliveryPrice(e){return(await this.httpClient.get(`/market/v1/deliveryPrice?pair=${e}`,this.getHeaders())).body}async getOpenInterest(e){return(await this.httpClient.get(`/market/v1/openInterest?symbol=${e}`,this.getHeaders())).body}async getTopLongShortPositionRatio(e,n,s,r,i){let o=`/market/v1/topLongShortPositionRatio?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getGlobalLongShortAccountRatio(e,n,s,r,i){let o=`/market/v1/globalLongShortAccountRatio?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getTicker24hr(e){let n="/market/v1/moniker/24hr";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getTickerPrice(e){let n="/market/v1/moniker/price";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getOrderbookMoniker(e){let n="/market/v1/moniker/bookTicker";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getBasis(e,n,s,r,i){let o=`/market/v1/basis?symbol=${e}&period=${n}`;s&&s>0&&(o+=`&limit=${s}`),r&&r>0&&(o+=`&startTime=${r}`),i&&i>0&&(o+=`&endTime=${i}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getIndexInfo(e){let n="/market/v1/indexInfo";return e&&(n+=`?symbol=${e}`),(await this.httpClient.get(n,this.getHeaders())).body}async getAssetIndex(e){let n="/market/v1/assetIndex";e&&(n+=`?symbol=${e}`);const r=(await this.httpClient.get(n,this.getHeaders())).body;return Array.isArray(r),r}async getConstituents(e){return(await this.httpClient.get(`/market/v1/constituents?symbol=${e}`,this.getHeaders())).body}async getTWAP(e,n){return(await this.httpClient.get(`/market/v1/twap?symbol=${e}&duration=${n}`,this.getHeaders())).body}async getPositions(e,n){if(!e)throw new Error("walletAddress is required for getPositions");let s=`/bucket/v1/address/${e}/positions`;n!==void 0&&(s+=`?active_only=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return Array.isArray(i)?i:i&&typeof i=="object"&&"positions"in i&&Array.isArray(i.positions)?i.positions:[]}async getBalance(e,n){let s=`/bank/v1/balance/${e}?asset=${n}`;return(await this.httpClient.get(s,this.getHeaders())).body}async getBalances(e){const s=(await this.httpClient.get(`/bank/v1/balances/${e}`,this.getHeaders())).body;return s&&typeof s=="object"&&"balances"in s&&Array.isArray(s.balances)?s.balances:[]}async getBalanceDecimal(e,n){const s=await this.getBalance(e,n);if(s&&typeof s=="object"){const r={...s};return r.balance&&(r.balance=ke(r.balance)),r.available_balance&&(r.available=ke(r.available_balance),r.available_balance=ke(r.available_balance)),r.available&&typeof r.available=="string"&&(r.available=ke(r.available)),r.locked_balance&&(r.locked=ke(r.locked_balance),r.locked_balance=ke(r.locked_balance)),r.locked&&typeof r.locked=="string"&&(r.locked=ke(r.locked)),r}return s}async getOrders(e,n){let s=`/clob/v1/address/orders?address=${encodeURIComponent(e)}`;return n&&(s+=`&asset_pair=${encodeURIComponent(n)}`),(await this.httpClient.get(s,this.getHeaders())).body}async getOrder(e){return(await this.httpClient.get(`/clob/v1/order/${e}`,this.getHeaders())).body}async getOrderHistory(e){return(await this.httpClient.get(`/clob/v1/address/orders/history?address=${e}`,this.getHeaders())).body}async getUserTrades(e,n){let s=`/clob/v1/address/trades?address=${e}`;n&&(s+=`&asset_pair=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"trades"in i&&Array.isArray(i.trades)?i.trades:Array.isArray(i)?i:i!=null&&i.data&&Array.isArray(i.data)?i.data:[]}async getTradeHistory(e,n){return this.getUserTrades(e,n)}async getPosition(e,n){let s=`/clob/v1/address/position?address=${e}`;n&&(s+=`&asset_pair=${n}`);const i=(await this.httpClient.get(s,this.getHeaders())).body;return i&&typeof i=="object"&&"positions"in i&&Array.isArray(i.positions)?i.positions:[]}async getBuckets(e){var s;const n=await this.httpClient.get(`/bucket/v1/address/${e}/buckets`,this.getHeaders());return(s=n.body)!=null&&s.buckets&&Array.isArray(n.body.buckets)?n.body.buckets:[]}async getBucket(e){return(await this.httpClient.get(`/bucket/v1/bucket/${e}`,this.getHeaders())).body}async getMarketData(e){return(await this.httpClient.get(`/clob/v1/market/data?asset_pair=${e}`,this.getHeaders())).body}async getMarketCandles(e,n,s){const i=(await this.httpClient.get(`/clob/v1/market/candles?asset_pair=${e}&interval=${n}&limit=${s}`,this.getHeaders())).body;return Array.isArray(i)?i:[]}async getNonceStatus(e,n=!1){let s=`/router/v1/nonce/status/${e}`;return n&&(s+="?reserve=true"),(await this.httpClient.get(s,this.getHeaders())).body}async getSupportedActions(){return(await this.httpClient.get("/router/v1/tx/supported-actions",this.getHeaders())).body}async validateAction(e){return(await this.httpClient.get(`/router/v1/tx/validate-action?action=${encodeURIComponent(e)}`,this.getHeaders())).body}async getHealthSummary(){return(await this.httpClient.get("/router/v1/health/summary",this.getHeaders())).body}async getHealthDaemons(){return(await this.httpClient.get("/router/v1/health/daemons",this.getHeaders())).body}async getHealthBucket(){return(await this.httpClient.get("/router/v1/health/bucket",this.getHeaders())).body}async getHealthOracle(){return(await this.httpClient.get("/router/v1/health/oracle",this.getHeaders())).body}async getServerTime(){return(await this.httpClient.get("/router/v1/time",this.getHeaders())).body}async getMetricsTPS(){return(await this.httpClient.get("/router/v1/metrics/tps",this.getHeaders())).body}async getMetricsLatency(){return(await this.httpClient.get("/router/v1/metrics/latency",this.getHeaders())).body}}function QM(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["nonce too low","nonce too high","nonce already used","nonce already pending","nonce invalid","nonce expired","nonce mismatch","invalid nonce","nonce out of order"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function JM(t){var a,l,c;if(!t)return!1;const e=String(t).toLowerCase(),n=((a=t==null?void 0:t.message)==null?void 0:a.toLowerCase())||e,s=(t==null?void 0:t.responseBody)||(t==null?void 0:t.onboardResult),r=((l=s==null?void 0:s.error)==null?void 0:l.toLowerCase())||((c=s==null?void 0:s.message)==null?void 0:c.toLowerCase())||"",i=["signature verification failed","invalid signature","unauthenticated","signature mismatch","signature invalid"],o=`${n} ${e} ${r}`.toLowerCase();return i.some(u=>o.includes(u))}function ZM(t){if(!t)return[!1,!1];const e=QM(t),n=JM(t);return[e,n]}function xb(t){const[e,n]=ZM(t);return e||n}const $_="6.16.0";async function bb(t){const e=Object.keys(t);return(await Promise.all(e.map(s=>Promise.resolve(t[s])))).reduce((s,r,i)=>(s[e[i]]=r,s),{})}function Vn(t,e,n){for(let s in e){let r=e[s];Object.defineProperty(t,s,{enumerable:!0,value:r,writable:!1})}}function ta(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>ta(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let s="0x";for(let r=0;r<t.length;r++)s+=n[t[r]>>4],s+=n[t[r]&15];return s}if(typeof t=="object"&&typeof t.toJSON=="function")return ta(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(s=>`${ta(s,e)}: ${ta(t[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function eI(t,e,n){let s=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${ta(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+ta(a))}}i.push(`code=${e}`),i.push(`version=${$_}`),i.length&&(t+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(t);break;default:r=new Error(t)}return Vn(r,{code:e}),n&&Object.assign(r,n),r.shortMessage==null&&Vn(r,{shortMessage:s}),r}function it(t,e,n,s){if(!t)throw eI(e,n,s)}function ne(t,e,n,s){it(t,e,"INVALID_ARGUMENT",{argument:n,value:s})}const tI=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function z_(t){it(tI.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function Zf(t,e,n){if(n==null&&(n=""),t!==e){let s=n,r="new";n&&(s+=".",r+=" "+n),it(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function U_(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const s=new Uint8Array((t.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(t.substring(r,r+2),16),r+=2;return s}ne(!1,"invalid BytesLike value",e||"value",t)}function De(t,e){return U_(t,e,!1)}function Uo(t,e){return U_(t,e,!0)}function nr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function e0(t){return nr(t,!0)||t instanceof Uint8Array}const sv="0123456789abcdef";function Se(t){const e=De(t);let n="0x";for(let s=0;s<e.length;s++){const r=e[s];n+=sv[(r&240)>>4]+sv[r&15]}return n}function Bt(t){return"0x"+t.map(e=>Se(e).substring(2)).join("")}function Dc(t){return nr(t,!0)?(t.length-2)/2:De(t).length}function yb(t,e,n){const s=De(t);return n>s.length&&it(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),Se(s.slice(e,n))}function nI(t,e,n){const s=De(t);it(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),r.set(s,e-s.length),Se(r)}function vi(t,e){return nI(t,e)}const t0=BigInt(0),Ui=BigInt(1),na=9007199254740991;function sI(t,e){let n=bt(t,"value");const s=BigInt(Yn(e,"width")),r=Ui<<s-Ui;if(n<t0){n=-n,it(n<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Ui<<s)-Ui;return(~n&i)+Ui}else it(n<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function rI(t,e){const n=wb(t,"value"),s=BigInt(Yn(e,"bits"));return n&(Ui<<s)-Ui}function bt(t,e){switch(typeof t){case"bigint":return t;case"number":return ne(Number.isInteger(t),"underflow",e||"value",t),ne(t>=-na&&t<=na,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){ne(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}ne(!1,"invalid BigNumberish value",e||"value",t)}function wb(t,e){const n=bt(t,e);return it(n>=t0,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const rv="0123456789abcdef";function W_(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=rv[n>>4],e+=rv[n&15];return BigInt(e)}return bt(t)}function Yn(t,e){switch(typeof t){case"bigint":return ne(t>=-na&&t<=na,"overflow",e||"value",t),Number(t);case"number":return ne(Number.isInteger(t),"underflow",e||"value",t),ne(t>=-na&&t<=na,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Yn(BigInt(t),e)}catch(n){ne(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}ne(!1,"invalid numeric value",e||"value",t)}function Ka(t,e){const n=wb(t,"value");let s=n.toString(16);{const r=Yn(e,"width");if(r===0&&n===t0)return"0x";for(it(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});s.length<r*2;)s="0"+s}return"0x"+s}function Ft(t,e){const n=wb(t,"value");if(n===t0)return new Uint8Array(0);let s=n.toString(16);s.length%2&&(s="0"+s);const r=new Uint8Array(s.length/2);for(let i=0;i<r.length;i++){const o=i*2;r[i]=parseInt(s.substring(o,o+2),16)}return r}function iI(t){let e=Se(e0(t)?t:Ft(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Jh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let pd=null;function oI(t){if(pd==null){pd={};for(let n=0;n<Jh.length;n++)pd[Jh[n]]=BigInt(n)}const e=pd[t];return ne(e!=null,"invalid base58 value","letter",t),e}const aI=BigInt(0),Sm=BigInt(58);function lI(t){const e=De(t);let n=W_(e),s="";for(;n;)s=Jh[Number(n%Sm)]+s,n/=Sm;for(let r=0;r<e.length&&!e[r];r++)s=Jh[0]+s;return s}function cI(t){let e=aI;for(let n=0;n<t.length;n++)e*=Sm,e+=oI(t[n]);return e}function ro(t,e){ne(typeof t=="string","invalid string value","str",t),e!=null&&(z_(e),t=t.normalize(e));let n=[];for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(r&63|128);else if((r&64512)==55296){s++;const i=t.charCodeAt(s);ne(s<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((r&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(r&63|128)}return new Uint8Array(n)}function uI(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function iv(t,e,n){let s=0;for(let r=0;r<n;r++)s=s*256+t[e+r];return s}function ov(t,e,n,s){const r=[];for(;n<e+1+s;){const i=H_(t,n);r.push(i.result),n+=i.consumed,it(n<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:t,length:s,offset:e})}return{consumed:1+s,result:r}}function H_(t,e){it(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=s=>{it(s<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:s})};if(t[e]>=248){const s=t[e]-247;n(e+1+s);const r=iv(t,e+1,s);return n(e+1+s+r),ov(t,e,e+1+s,s+r)}else if(t[e]>=192){const s=t[e]-192;return n(e+1+s),ov(t,e,e+1,s)}else if(t[e]>=184){const s=t[e]-183;n(e+1+s);const r=iv(t,e+1,s);n(e+1+s+r);const i=Se(t.slice(e+1+s,e+1+s+r));return{consumed:1+s+r,result:i}}else if(t[e]>=128){const s=t[e]-128;n(e+1+s);const r=Se(t.slice(e+1,e+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:uI(t[e])}}function Au(t){const e=De(t,"data"),n=H_(e,0);return ne(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function av(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function V_(t){if(Array.isArray(t)){let s=[];if(t.forEach(function(i){s=s.concat(V_(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=av(s.length);return r.unshift(247+r.length),r.concat(s)}const e=Array.prototype.slice.call(De(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=av(e.length);return n.unshift(183+n.length),n.concat(e)}const lv="0123456789abcdef";function Cr(t){let e="0x";for(const n of V_(t))e+=lv[n>>4],e+=lv[n&15];return e}function dI(t){const e=De(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=Se(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}function Un(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function vb(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Y_(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Un(t.outputLen),Un(t.blockLen)}function Xa(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function G_(t,e){vb(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const wp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const q_=t=>t instanceof Uint8Array,uh=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),dh=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Fs=(t,e)=>t<<32-e|t>>>e,hI=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!hI)throw new Error("Non little-endian hardware is not supported");const fI=async()=>{};async function cv(t,e,n){let s=Date.now();for(let r=0;r<t;r++){n(r);const i=Date.now()-s;i>=0&&i<e||(await fI(),s+=i)}}function pI(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Qa(t){if(typeof t=="string"&&(t=pI(t)),!q_(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function gI(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!q_(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}class kb{clone(){return this._cloneInto()}}const mI={}.toString;function K_(t,e){if(e!==void 0&&mI.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function n0(t){const e=s=>t().update(Qa(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function xI(t=32){if(wp&&typeof wp.getRandomValues=="function")return wp.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class X_ extends kb{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Y_(e);const s=Qa(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Xa(this),this.iHash.update(e),this}digestInto(e){Xa(this),vb(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s0=(t,e,n)=>new X_(t,e).update(n).digest();s0.create=(t,e)=>new X_(t,e);function bI(t,e,n,s){Y_(t);const r=K_({dkLen:32,asyncTick:10},s),{c:i,dkLen:o,asyncTick:a}=r;if(Un(i),Un(o),Un(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Qa(e),c=Qa(n),u=new Uint8Array(o),d=s0.create(t,l),f=d._cloneInto().update(c);return{c:i,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:f}}function yI(t,e,n,s,r){return t.destroy(),e.destroy(),s&&s.destroy(),r.fill(0),n}function Sb(t,e,n,s){const{c:r,dkLen:i,DK:o,PRF:a,PRFSalt:l}=bI(t,e,n,s);let c;const u=new Uint8Array(4),d=dh(u),f=new Uint8Array(a.outputLen);for(let p=1,m=0;m<i;p++,m+=a.outputLen){const x=o.subarray(m,m+a.outputLen);d.setInt32(0,p,!1),(c=l._cloneInto(c)).update(u).digestInto(f),x.set(f.subarray(0,x.length));for(let w=1;w<r;w++){a._cloneInto(c).update(f).digestInto(f);for(let g=0;g<x.length;g++)x[g]^=f[g]}}return yI(a,l,o,c,f)}function wI(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),l=s?4:0,c=s?0:4;t.setUint32(e+l,o,s),t.setUint32(e+c,a,s)}class Cb extends kb{constructor(e,n,s,r){super(),this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=dh(this.buffer)}update(e){Xa(this);const{view:n,buffer:s,blockLen:r}=this;e=Qa(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const l=dh(e);for(;r<=i-o;o+=r)this.process(l,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Xa(this),G_(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let d=o;d<r;d++)n[d]=0;wI(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=dh(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%n&&e.buffer.set(s),e}}const vI=(t,e,n)=>t&e^~t&n,kI=(t,e,n)=>t&e^t&n^e&n,SI=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Or=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Lr=new Uint32Array(64);class CI extends Cb{constructor(){super(64,32,8,!1),this.A=Or[0]|0,this.B=Or[1]|0,this.C=Or[2]|0,this.D=Or[3]|0,this.E=Or[4]|0,this.F=Or[5]|0,this.G=Or[6]|0,this.H=Or[7]|0}get(){const{A:e,B:n,C:s,D:r,E:i,F:o,G:a,H:l}=this;return[e,n,s,r,i,o,a,l]}set(e,n,s,r,i,o,a,l){this.A=e|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let d=0;d<16;d++,n+=4)Lr[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Lr[d-15],p=Lr[d-2],m=Fs(f,7)^Fs(f,18)^f>>>3,x=Fs(p,17)^Fs(p,19)^p>>>10;Lr[d]=x+Lr[d-7]+m+Lr[d-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const f=Fs(a,6)^Fs(a,11)^Fs(a,25),p=u+f+vI(a,l,c)+SI[d]+Lr[d]|0,x=(Fs(s,2)^Fs(s,13)^Fs(s,22))+kI(s,r,i)|0;u=c,c=l,l=a,a=o+p|0,o=i,i=r,r=s,s=p+x|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(s,r,i,o,a,l,c,u)}roundClean(){Lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ml=n0(()=>new CI),gd=BigInt(2**32-1),Cm=BigInt(32);function Q_(t,e=!1){return e?{h:Number(t&gd),l:Number(t>>Cm&gd)}:{h:Number(t>>Cm&gd)|0,l:Number(t&gd)|0}}function J_(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let r=0;r<t.length;r++){const{h:i,l:o}=Q_(t[r],e);[n[r],s[r]]=[i,o]}return[n,s]}const _I=(t,e)=>BigInt(t>>>0)<<Cm|BigInt(e>>>0),EI=(t,e,n)=>t>>>n,PI=(t,e,n)=>t<<32-n|e>>>n,TI=(t,e,n)=>t>>>n|e<<32-n,MI=(t,e,n)=>t<<32-n|e>>>n,II=(t,e,n)=>t<<64-n|e>>>n-32,NI=(t,e,n)=>t>>>n-32|e<<64-n,DI=(t,e)=>e,AI=(t,e)=>t,Z_=(t,e,n)=>t<<n|e>>>32-n,eE=(t,e,n)=>e<<n|t>>>32-n,tE=(t,e,n)=>e<<n-32|t>>>64-n,nE=(t,e,n)=>t<<n-32|e>>>64-n;function RI(t,e,n,s){const r=(e>>>0)+(s>>>0);return{h:t+n+(r/2**32|0)|0,l:r|0}}const OI=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),LI=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,jI=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),FI=(t,e,n,s,r)=>e+n+s+r+(t/2**32|0)|0,BI=(t,e,n,s,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(r>>>0),$I=(t,e,n,s,r,i)=>e+n+s+r+i+(t/2**32|0)|0,Ke={fromBig:Q_,split:J_,toBig:_I,shrSH:EI,shrSL:PI,rotrSH:TI,rotrSL:MI,rotrBH:II,rotrBL:NI,rotr32H:DI,rotr32L:AI,rotlSH:Z_,rotlSL:eE,rotlBH:tE,rotlBL:nE,add:RI,add3L:OI,add3H:LI,add4L:jI,add4H:FI,add5H:$I,add5L:BI},[zI,UI]=Ke.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),jr=new Uint32Array(80),Fr=new Uint32Array(80);class WI extends Cb{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:f,Gh:p,Gl:m,Hh:x,Hl:w}=this;return[e,n,s,r,i,o,a,l,c,u,d,f,p,m,x,w]}set(e,n,s,r,i,o,a,l,c,u,d,f,p,m,x,w){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=m|0,this.Hh=x|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)jr[v]=e.getUint32(n),Fr[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const y=jr[v-15]|0,S=Fr[v-15]|0,C=Ke.rotrSH(y,S,1)^Ke.rotrSH(y,S,8)^Ke.shrSH(y,S,7),E=Ke.rotrSL(y,S,1)^Ke.rotrSL(y,S,8)^Ke.shrSL(y,S,7),T=jr[v-2]|0,N=Fr[v-2]|0,_=Ke.rotrSH(T,N,19)^Ke.rotrBH(T,N,61)^Ke.shrSH(T,N,6),D=Ke.rotrSL(T,N,19)^Ke.rotrBL(T,N,61)^Ke.shrSL(T,N,6),A=Ke.add4L(E,D,Fr[v-7],Fr[v-16]),R=Ke.add4H(A,C,_,jr[v-7],jr[v-16]);jr[v]=R|0,Fr[v]=A|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:f,Fh:p,Fl:m,Gh:x,Gl:w,Hh:g,Hl:b}=this;for(let v=0;v<80;v++){const y=Ke.rotrSH(d,f,14)^Ke.rotrSH(d,f,18)^Ke.rotrBH(d,f,41),S=Ke.rotrSL(d,f,14)^Ke.rotrSL(d,f,18)^Ke.rotrBL(d,f,41),C=d&p^~d&x,E=f&m^~f&w,T=Ke.add5L(b,S,E,UI[v],Fr[v]),N=Ke.add5H(T,g,y,C,zI[v],jr[v]),_=T|0,D=Ke.rotrSH(s,r,28)^Ke.rotrBH(s,r,34)^Ke.rotrBH(s,r,39),A=Ke.rotrSL(s,r,28)^Ke.rotrBL(s,r,34)^Ke.rotrBL(s,r,39),R=s&i^s&a^i&a,z=r&o^r&l^o&l;g=x|0,b=w|0,x=p|0,w=m|0,p=d|0,m=f|0,{h:d,l:f}=Ke.add(c|0,u|0,N|0,_|0),c=a|0,u=l|0,a=i|0,l=o|0,i=s|0,o=r|0;const L=Ke.add3L(_,A,z);s=Ke.add3H(L,N,D,R),r=L|0}({h:s,l:r}=Ke.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=Ke.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=Ke.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=Ke.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:d,l:f}=Ke.add(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:m}=Ke.add(this.Fh|0,this.Fl|0,p|0,m|0),{h:x,l:w}=Ke.add(this.Gh|0,this.Gl|0,x|0,w|0),{h:g,l:b}=Ke.add(this.Hh|0,this.Hl|0,g|0,b|0),this.set(s,r,i,o,a,l,c,u,d,f,p,m,x,w,g,b)}roundClean(){jr.fill(0),Fr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const _b=n0(()=>new WI);function HI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const uv=HI(),dv=uv.crypto||uv.msCrypto;function VI(t){switch(t){case"sha256":return ml.create();case"sha512":return _b.create()}ne(!1,"invalid hashing algorithm name","algorithm",t)}function YI(t,e){const n={sha256:ml,sha512:_b}[t];return ne(n!=null,"invalid hmac algorithm","algorithm",t),s0.create(n,e)}function GI(t,e,n,s,r){const i={sha256:ml,sha512:_b}[r];return ne(i!=null,"invalid pbkdf2 algorithm","algorithm",r),Sb(i,t,e,{c:n,dkLen:s})}function qI(t){it(dv!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),ne(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return dv.getRandomValues(e),e}let sE=!1;const rE=function(t,e,n){return YI(t,e).update(n).digest()};let iE=rE;function xl(t,e,n){const s=De(e,"key"),r=De(n,"data");return Se(iE(t,s,r))}xl._=rE;xl.lock=function(){sE=!0};xl.register=function(t){if(sE)throw new Error("computeHmac is locked");iE=t};Object.freeze(xl);const[oE,aE,lE]=[[],[],[]],KI=BigInt(0),Bl=BigInt(1),XI=BigInt(2),QI=BigInt(7),JI=BigInt(256),ZI=BigInt(113);for(let t=0,e=Bl,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],oE.push(2*(5*s+n)),aE.push((t+1)*(t+2)/2%64);let r=KI;for(let i=0;i<7;i++)e=(e<<Bl^(e>>QI)*ZI)%JI,e&XI&&(r^=Bl<<(Bl<<BigInt(i))-Bl);lE.push(r)}const[eN,tN]=J_(lE,!0),hv=(t,e,n)=>n>32?tE(t,e,n):Z_(t,e,n),fv=(t,e,n)=>n>32?nE(t,e,n):eE(t,e,n);function nN(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],d=hv(c,u,1)^n[a],f=fv(c,u,1)^n[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let r=t[2],i=t[3];for(let o=0;o<24;o++){const a=aE[o],l=hv(r,i,a),c=fv(r,i,a),u=oE[o];r=t[u],i=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=eN[s],t[1]^=tN[s]}n.fill(0)}class Eb extends kb{constructor(e,n,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Un(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=uh(this.state)}keccak(){nN(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Xa(this);const{blockLen:n,state:s}=this;e=Qa(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:r}=this;e[s]^=n,n&128&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Xa(this,!1),vb(e),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(n.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Un(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(G_(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new Eb(n,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const sN=(t,e,n)=>n0(()=>new Eb(e,t,n)),rN=sN(1,136,256/8);let cE=!1;const uE=function(t){return rN(t)};let dE=uE;function qt(t){const e=De(t,"data");return Se(dE(e))}qt._=uE;qt.lock=function(){cE=!0};qt.register=function(t){if(cE)throw new TypeError("keccak256 is locked");dE=t};Object.freeze(qt);const iN=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),hE=Uint8Array.from({length:16},(t,e)=>e),oN=hE.map(t=>(9*t+5)%16);let Pb=[hE],Tb=[oN];for(let t=0;t<4;t++)for(let e of[Pb,Tb])e.push(e[t].map(n=>iN[n]));const fE=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),aN=Pb.map((t,e)=>t.map(n=>fE[e][n])),lN=Tb.map((t,e)=>t.map(n=>fE[e][n])),cN=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),uN=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),md=(t,e)=>t<<e|t>>>32-e;function pv(t,e,n,s){return t===0?e^n^s:t===1?e&n|~e&s:t===2?(e|~n)^s:t===3?e&s|n&~s:e^(n|~s)}const xd=new Uint32Array(16);class dN extends Cb{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:s,h3:r,h4:i}=this;return[e,n,s,r,i]}set(e,n,s,r,i){this.h0=e|0,this.h1=n|0,this.h2=s|0,this.h3=r|0,this.h4=i|0}process(e,n){for(let p=0;p<16;p++,n+=4)xd[p]=e.getUint32(n,!0);let s=this.h0|0,r=s,i=this.h1|0,o=i,a=this.h2|0,l=a,c=this.h3|0,u=c,d=this.h4|0,f=d;for(let p=0;p<5;p++){const m=4-p,x=cN[p],w=uN[p],g=Pb[p],b=Tb[p],v=aN[p],y=lN[p];for(let S=0;S<16;S++){const C=md(s+pv(p,i,a,c)+xd[g[S]]+x,v[S])+d|0;s=d,d=c,c=md(a,10)|0,a=i,i=C}for(let S=0;S<16;S++){const C=md(r+pv(m,o,l,u)+xd[b[S]]+w,y[S])+f|0;r=f,f=u,u=md(l,10)|0,l=o,o=C}}this.set(this.h1+a+u|0,this.h2+c+f|0,this.h3+d+r|0,this.h4+s+o|0,this.h0+i+l|0)}roundClean(){xd.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const hN=n0(()=>new dN);let pE=!1;const gE=function(t){return hN(t)};let mE=gE;function bl(t){const e=De(t,"data");return Se(mE(e))}bl._=gE;bl.lock=function(){pE=!0};bl.register=function(t){if(pE)throw new TypeError("ripemd160 is locked");mE=t};Object.freeze(bl);let xE=!1;const bE=function(t,e,n,s,r){return GI(t,e,n,s,r)};let yE=bE;function Ru(t,e,n,s,r){const i=De(t,"password"),o=De(e,"salt");return Se(yE(i,o,n,s,r))}Ru._=bE;Ru.lock=function(){xE=!0};Ru.register=function(t){if(xE)throw new Error("pbkdf2 is locked");yE=t};Object.freeze(Ru);let wE=!1;const vE=function(t){return new Uint8Array(qI(t))};let kE=vE;function _r(t){return kE(t)}_r._=vE;_r.lock=function(){wE=!0};_r.register=function(t){if(wE)throw new Error("randomBytes is locked");kE=t};Object.freeze(_r);const at=(t,e)=>t<<e|t>>>32-e;function gv(t,e,n,s,r,i){let o=t[e++]^n[s++],a=t[e++]^n[s++],l=t[e++]^n[s++],c=t[e++]^n[s++],u=t[e++]^n[s++],d=t[e++]^n[s++],f=t[e++]^n[s++],p=t[e++]^n[s++],m=t[e++]^n[s++],x=t[e++]^n[s++],w=t[e++]^n[s++],g=t[e++]^n[s++],b=t[e++]^n[s++],v=t[e++]^n[s++],y=t[e++]^n[s++],S=t[e++]^n[s++],C=o,E=a,T=l,N=c,_=u,D=d,A=f,R=p,z=m,L=x,F=w,$=g,O=b,B=v,M=y,H=S;for(let j=0;j<8;j+=2)_^=at(C+O|0,7),z^=at(_+C|0,9),O^=at(z+_|0,13),C^=at(O+z|0,18),L^=at(D+E|0,7),B^=at(L+D|0,9),E^=at(B+L|0,13),D^=at(E+B|0,18),M^=at(F+A|0,7),T^=at(M+F|0,9),A^=at(T+M|0,13),F^=at(A+T|0,18),N^=at(H+$|0,7),R^=at(N+H|0,9),$^=at(R+N|0,13),H^=at($+R|0,18),E^=at(C+N|0,7),T^=at(E+C|0,9),N^=at(T+E|0,13),C^=at(N+T|0,18),A^=at(D+_|0,7),R^=at(A+D|0,9),_^=at(R+A|0,13),D^=at(_+R|0,18),$^=at(F+L|0,7),z^=at($+F|0,9),L^=at(z+$|0,13),F^=at(L+z|0,18),O^=at(H+M|0,7),B^=at(O+H|0,9),M^=at(B+O|0,13),H^=at(M+B|0,18);r[i++]=o+C|0,r[i++]=a+E|0,r[i++]=l+T|0,r[i++]=c+N|0,r[i++]=u+_|0,r[i++]=d+D|0,r[i++]=f+A|0,r[i++]=p+R|0,r[i++]=m+z|0,r[i++]=x+L|0,r[i++]=w+F|0,r[i++]=g+$|0,r[i++]=b+O|0,r[i++]=v+B|0,r[i++]=y+M|0,r[i++]=S+H|0}function pa(t,e,n,s,r){let i=s+0,o=s+16*r;for(let a=0;a<16;a++)n[o+a]=t[e+(2*r-1)*16+a];for(let a=0;a<r;a++,i+=16,e+=16)gv(n,o,t,e,n,i),a>0&&(o+=16),gv(n,i,t,e+=16,n,o)}function SE(t,e,n){const s=K_({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:r,r:i,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=s;if(Un(r),Un(i),Un(o),Un(a),Un(l),Un(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const d=128*i,f=d/4;if(r<=1||r&r-1||r>=2**(d/8)||r>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=d*(r+o);if(p>c)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${c} (maxmem)`);const m=Sb(ml,t,e,{c:1,dkLen:d*o}),x=uh(m),w=uh(new Uint8Array(d*r)),g=uh(new Uint8Array(d));let b=()=>{};if(u){const v=2*r*o,y=Math.max(Math.floor(v/1e4),1);let S=0;b=()=>{S++,u&&(!(S%y)||S===v)&&u(S/v)}}return{N:r,r:i,p:o,dkLen:a,blockSize32:f,V:w,B32:x,B:m,tmp:g,blockMixCb:b,asyncTick:l}}function CE(t,e,n,s,r){const i=Sb(ml,t,n,{c:1,dkLen:e});return n.fill(0),s.fill(0),r.fill(0),i}function fN(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f}=SE(t,e,n);for(let p=0;p<i;p++){const m=a*p;for(let x=0;x<a;x++)l[x]=c[m+x];for(let x=0,w=0;x<s-1;x++)pa(l,w,l,w+=a,r),f();pa(l,(s-1)*a,c,m,r),f();for(let x=0;x<s;x++){const w=c[m+a-16]%s;for(let g=0;g<a;g++)d[g]=c[m+g]^l[w*a+g];pa(d,0,c,m,r),f()}}return CE(t,o,u,l,d)}async function pN(t,e,n){const{N:s,r,p:i,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f,asyncTick:p}=SE(t,e,n);for(let m=0;m<i;m++){const x=a*m;for(let g=0;g<a;g++)l[g]=c[x+g];let w=0;await cv(s-1,p,()=>{pa(l,w,l,w+=a,r),f()}),pa(l,(s-1)*a,c,x,r),f(),await cv(s,p,()=>{const g=c[x+a-16]%s;for(let b=0;b<a;b++)d[b]=c[x+b]^l[g*a+b];pa(d,0,c,x,r),f()})}return CE(t,o,u,l,d)}let _E=!1,EE=!1;const PE=async function(t,e,n,s,r,i,o){return await pN(t,e,{N:n,r:s,p:r,dkLen:i,onProgress:o})},TE=function(t,e,n,s,r,i){return fN(t,e,{N:n,r:s,p:r,dkLen:i})};let ME=PE,IE=TE;async function Ou(t,e,n,s,r,i,o){const a=De(t,"passwd"),l=De(e,"salt");return Se(await ME(a,l,n,s,r,i,o))}Ou._=PE;Ou.lock=function(){EE=!0};Ou.register=function(t){if(EE)throw new Error("scrypt is locked");ME=t};Object.freeze(Ou);function Lu(t,e,n,s,r,i){const o=De(t,"passwd"),a=De(e,"salt");return Se(IE(o,a,n,s,r,i))}Lu._=TE;Lu.lock=function(){_E=!0};Lu.register=function(t){if(_E)throw new Error("scryptSync is locked");IE=t};Object.freeze(Lu);const NE=function(t){return VI("sha256").update(t).digest()};let DE=NE,AE=!1;function xs(t){const e=De(t,"data");return Se(DE(e))}xs._=NE;xs.lock=function(){AE=!0};xs.register=function(t){if(AE)throw new Error("sha256 is locked");DE=t};Object.freeze(xs);Object.freeze(xs);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const RE=BigInt(0),r0=BigInt(1),gN=BigInt(2),i0=t=>t instanceof Uint8Array,mN=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ja(t){if(!i0(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=mN[t[n]];return e}function OE(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Mb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Za(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let s=0;s<n.length;s++){const r=s*2,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[s]=o}return n}function io(t){return Mb(Ja(t))}function Ib(t){if(!i0(t))throw new Error("Uint8Array expected");return Mb(Ja(Uint8Array.from(t).reverse()))}function el(t,e){return Za(t.toString(16).padStart(e*2,"0"))}function Nb(t,e){return el(t,e).reverse()}function xN(t){return Za(OE(t))}function Ss(t,e,n){let s;if(typeof e=="string")try{s=Za(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(i0(e))s=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const r=s.length;if(typeof n=="number"&&r!==n)throw new Error(`${t} expected ${n} bytes, got ${r}`);return s}function au(...t){const e=new Uint8Array(t.reduce((s,r)=>s+r.length,0));let n=0;return t.forEach(s=>{if(!i0(s))throw new Error("Uint8Array expected");e.set(s,n),n+=s.length}),e}function bN(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function yN(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function wN(t){let e;for(e=0;t>RE;t>>=r0,e+=1);return e}function vN(t,e){return t>>BigInt(e)&r0}const kN=(t,e,n)=>t|(n?r0:RE)<<BigInt(e),Db=t=>(gN<<BigInt(t-1))-r0,vp=t=>new Uint8Array(t),mv=t=>Uint8Array.from(t);function LE(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let s=vp(t),r=vp(t),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...d)=>n(r,s,...d),l=(d=vp())=>{r=a(mv([0]),d),s=a(),d.length!==0&&(r=a(mv([1]),d),s=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){s=a();const p=s.slice();f.push(p),d+=s.length}return au(...f)};return(d,f)=>{o(),l(d);let p;for(;!(p=f(c()));)l();return o(),p}}const SN={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ju(t,e,n={}){const s=(r,i,o)=>{const a=SN[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=t[r];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(e))s(r,i,!1);for(const[r,i]of Object.entries(n))s(r,i,!0);return t}const CN=Object.freeze(Object.defineProperty({__proto__:null,bitGet:vN,bitLen:wN,bitMask:Db,bitSet:kN,bytesToHex:Ja,bytesToNumberBE:io,bytesToNumberLE:Ib,concatBytes:au,createHmacDrbg:LE,ensureBytes:Ss,equalBytes:bN,hexToBytes:Za,hexToNumber:Mb,numberToBytesBE:el,numberToBytesLE:Nb,numberToHexUnpadded:OE,numberToVarBytesBE:xN,utf8ToBytes:yN,validateObject:ju},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kt=BigInt(0),jt=BigInt(1),Wi=BigInt(2),_N=BigInt(3),_m=BigInt(4),xv=BigInt(5),bv=BigInt(8);BigInt(9);BigInt(16);function Tn(t,e){const n=t%e;return n>=Kt?n:e+n}function EN(t,e,n){if(n<=Kt||e<Kt)throw new Error("Expected power/modulo > 0");if(n===jt)return Kt;let s=jt;for(;e>Kt;)e&jt&&(s=s*t%n),t=t*t%n,e>>=jt;return s}function Zn(t,e,n){let s=t;for(;e-- >Kt;)s*=s,s%=n;return s}function Em(t,e){if(t===Kt||e<=Kt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Tn(t,e),s=e,r=Kt,i=jt;for(;n!==Kt;){const a=s/n,l=s%n,c=r-i*a;s=n,n=l,r=i,i=c}if(s!==jt)throw new Error("invert: does not exist");return Tn(r,e)}function PN(t){const e=(t-jt)/Wi;let n,s,r;for(n=t-jt,s=0;n%Wi===Kt;n/=Wi,s++);for(r=Wi;r<t&&EN(r,e,t)!==t-jt;r++);if(s===1){const o=(t+jt)/_m;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+jt)/Wi;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=s,u=a.pow(a.mul(a.ONE,r),n),d=a.pow(l,i),f=a.pow(l,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let p=1;for(let x=a.sqr(f);p<c&&!a.eql(x,a.ONE);p++)x=a.sqr(x);const m=a.pow(u,jt<<BigInt(c-p-1));u=a.sqr(m),d=a.mul(d,m),f=a.mul(f,u),c=p}return d}}function TN(t){if(t%_m===_N){const e=(t+jt)/_m;return function(s,r){const i=s.pow(r,e);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%bv===xv){const e=(t-xv)/bv;return function(s,r){const i=s.mul(r,Wi),o=s.pow(i,e),a=s.mul(r,o),l=s.mul(s.mul(a,Wi),o),c=s.mul(a,s.sub(l,s.ONE));if(!s.eql(s.sqr(c),r))throw new Error("Cannot find square root");return c}}return PN(t)}const MN=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function IN(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=MN.reduce((s,r)=>(s[r]="function",s),e);return ju(t,n)}function NN(t,e,n){if(n<Kt)throw new Error("Expected power > 0");if(n===Kt)return t.ONE;if(n===jt)return e;let s=t.ONE,r=e;for(;n>Kt;)n&jt&&(s=t.mul(s,r)),r=t.sqr(r),n>>=jt;return s}function DN(t,e){const n=new Array(e.length),s=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),r=t.inv(s);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),r),n}function jE(t,e){const n=e!==void 0?e:t.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function AN(t,e,n=!1,s={}){if(t<=Kt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:r,nByteLength:i}=jE(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=TN(t),a=Object.freeze({ORDER:t,BITS:r,BYTES:i,MASK:Db(r),ZERO:Kt,ONE:jt,create:l=>Tn(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Kt<=l&&l<t},is0:l=>l===Kt,isOdd:l=>(l&jt)===jt,neg:l=>Tn(-l,t),eql:(l,c)=>l===c,sqr:l=>Tn(l*l,t),add:(l,c)=>Tn(l+c,t),sub:(l,c)=>Tn(l-c,t),mul:(l,c)=>Tn(l*c,t),pow:(l,c)=>NN(a,l,c),div:(l,c)=>Tn(l*Em(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>Em(l,t),sqrt:s.sqrt||(l=>o(a,l)),invertBatch:l=>DN(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?Nb(l,i):el(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return n?Ib(l):io(l)}});return Object.freeze(a)}function FE(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function BE(t){const e=FE(t);return e+Math.ceil(e/2)}function RN(t,e,n=!1){const s=t.length,r=FE(e),i=BE(e);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=n?io(t):Ib(t),a=Tn(o,e-jt)+jt;return n?Nb(a,r):el(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ON=BigInt(0),kp=BigInt(1);function LN(t,e){const n=(r,i)=>{const o=i.negate();return r?o:i},s=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(r,i){let o=t.ZERO,a=r;for(;i>ON;)i&kp&&(o=o.add(a)),a=a.double(),i>>=kp;return o},precomputeWindow(r,i){const{windows:o,windowSize:a}=s(i),l=[];let c=r,u=c;for(let d=0;d<o;d++){u=c,l.push(u);for(let f=1;f<a;f++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(r,i,o){const{windows:a,windowSize:l}=s(r);let c=t.ZERO,u=t.BASE;const d=BigInt(2**r-1),f=2**r,p=BigInt(r);for(let m=0;m<a;m++){const x=m*l;let w=Number(o&d);o>>=p,w>l&&(w-=f,o+=kp);const g=x,b=x+Math.abs(w)-1,v=m%2!==0,y=w<0;w===0?u=u.add(n(v,i[g])):c=c.add(n(y,i[b]))}return{p:c,f:u}},wNAFCached(r,i,o,a){const l=r._WINDOW_SIZE||1;let c=i.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&i.set(r,a(c))),this.wNAF(l,c,o)}}}function $E(t){return IN(t.Fp),ju(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...jE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function jN(t){const e=$E(t);ju(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:r}=e;if(n){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:FN,hexToBytes:BN}=CN,qi={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=qi;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],s=t.subarray(2,n+2);if(!n||s.length!==n)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:FN(s),l:t.subarray(n+2)}},toSig(t){const{Err:e}=qi,n=typeof t=="string"?BN(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let s=n.length;if(s<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=qi._parseInt(n.subarray(2)),{d:o,l:a}=qi._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},s=e(n(t.s)),r=e(n(t.r)),i=s.length/2,o=r.length/2,a=n(i),l=n(o);return`30${n(o+i+4)}02${l}${r}02${a}${s}`}},xr=BigInt(0),as=BigInt(1);BigInt(2);const yv=BigInt(3);BigInt(4);function $N(t){const e=jN(t),{Fp:n}=e,s=e.toBytes||((m,x,w)=>{const g=x.toAffine();return au(Uint8Array.from([4]),n.toBytes(g.x),n.toBytes(g.y))}),r=e.fromBytes||(m=>{const x=m.subarray(1),w=n.fromBytes(x.subarray(0,n.BYTES)),g=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:w,y:g}});function i(m){const{a:x,b:w}=e,g=n.sqr(m),b=n.mul(g,m);return n.add(n.add(b,n.mul(m,x)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&xr<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(m){const{allowedPrivateKeyLengths:x,nByteLength:w,wrapPrivateKey:g,n:b}=e;if(x&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=Ja(m)),typeof m!="string"||!x.includes(m.length))throw new Error("Invalid key");m=m.padStart(w*2,"0")}let v;try{v=typeof m=="bigint"?m:io(Ss("private key",m,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof m}`)}return g&&(v=Tn(v,b)),a(v),v}const c=new Map;function u(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(x,w,g){if(this.px=x,this.py=w,this.pz=g,x==null||!n.isValid(x))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(g==null||!n.isValid(g))throw new Error("z required")}static fromAffine(x){const{x:w,y:g}=x||{};if(!x||!n.isValid(w)||!n.isValid(g))throw new Error("invalid affine point");if(x instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(w)&&b(g)?d.ZERO:new d(w,g,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const w=n.invertBatch(x.map(g=>g.pz));return x.map((g,b)=>g.toAffine(w[b])).map(d.fromAffine)}static fromHex(x){const w=d.fromAffine(r(Ss("pointHex",x)));return w.assertValidity(),w}static fromPrivateKey(x){return d.BASE.multiply(l(x))}_setWindowSize(x){this._WINDOW_SIZE=x,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:w}=this.toAffine();if(!n.isValid(x)||!n.isValid(w))throw new Error("bad point: x or y not FE");const g=n.sqr(w),b=i(x);if(!n.eql(g,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(n.isOdd)return!n.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){u(x);const{px:w,py:g,pz:b}=this,{px:v,py:y,pz:S}=x,C=n.eql(n.mul(w,S),n.mul(v,b)),E=n.eql(n.mul(g,S),n.mul(y,b));return C&&E}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:x,b:w}=e,g=n.mul(w,yv),{px:b,py:v,pz:y}=this;let S=n.ZERO,C=n.ZERO,E=n.ZERO,T=n.mul(b,b),N=n.mul(v,v),_=n.mul(y,y),D=n.mul(b,v);return D=n.add(D,D),E=n.mul(b,y),E=n.add(E,E),S=n.mul(x,E),C=n.mul(g,_),C=n.add(S,C),S=n.sub(N,C),C=n.add(N,C),C=n.mul(S,C),S=n.mul(D,S),E=n.mul(g,E),_=n.mul(x,_),D=n.sub(T,_),D=n.mul(x,D),D=n.add(D,E),E=n.add(T,T),T=n.add(E,T),T=n.add(T,_),T=n.mul(T,D),C=n.add(C,T),_=n.mul(v,y),_=n.add(_,_),T=n.mul(_,D),S=n.sub(S,T),E=n.mul(_,N),E=n.add(E,E),E=n.add(E,E),new d(S,C,E)}add(x){u(x);const{px:w,py:g,pz:b}=this,{px:v,py:y,pz:S}=x;let C=n.ZERO,E=n.ZERO,T=n.ZERO;const N=e.a,_=n.mul(e.b,yv);let D=n.mul(w,v),A=n.mul(g,y),R=n.mul(b,S),z=n.add(w,g),L=n.add(v,y);z=n.mul(z,L),L=n.add(D,A),z=n.sub(z,L),L=n.add(w,b);let F=n.add(v,S);return L=n.mul(L,F),F=n.add(D,R),L=n.sub(L,F),F=n.add(g,b),C=n.add(y,S),F=n.mul(F,C),C=n.add(A,R),F=n.sub(F,C),T=n.mul(N,L),C=n.mul(_,R),T=n.add(C,T),C=n.sub(A,T),T=n.add(A,T),E=n.mul(C,T),A=n.add(D,D),A=n.add(A,D),R=n.mul(N,R),L=n.mul(_,L),A=n.add(A,R),R=n.sub(D,R),R=n.mul(N,R),L=n.add(L,R),D=n.mul(A,L),E=n.add(E,D),D=n.mul(F,L),C=n.mul(z,C),C=n.sub(C,D),D=n.mul(z,A),T=n.mul(F,T),T=n.add(T,D),new d(C,E,T)}subtract(x){return this.add(x.negate())}is0(){return this.equals(d.ZERO)}wNAF(x){return p.wNAFCached(this,c,x,w=>{const g=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(g[v])).map(d.fromAffine)})}multiplyUnsafe(x){const w=d.ZERO;if(x===xr)return w;if(a(x),x===as)return this;const{endo:g}=e;if(!g)return p.unsafeLadder(this,x);let{k1neg:b,k1:v,k2neg:y,k2:S}=g.splitScalar(x),C=w,E=w,T=this;for(;v>xr||S>xr;)v&as&&(C=C.add(T)),S&as&&(E=E.add(T)),T=T.double(),v>>=as,S>>=as;return b&&(C=C.negate()),y&&(E=E.negate()),E=new d(n.mul(E.px,g.beta),E.py,E.pz),C.add(E)}multiply(x){a(x);let w=x,g,b;const{endo:v}=e;if(v){const{k1neg:y,k1:S,k2neg:C,k2:E}=v.splitScalar(w);let{p:T,f:N}=this.wNAF(S),{p:_,f:D}=this.wNAF(E);T=p.constTimeNegate(y,T),_=p.constTimeNegate(C,_),_=new d(n.mul(_.px,v.beta),_.py,_.pz),g=T.add(_),b=N.add(D)}else{const{p:y,f:S}=this.wNAF(w);g=y,b=S}return d.normalizeZ([g,b])[0]}multiplyAndAddUnsafe(x,w,g){const b=d.BASE,v=(S,C)=>C===xr||C===as||!S.equals(b)?S.multiplyUnsafe(C):S.multiply(C),y=v(this,w).add(v(x,g));return y.is0()?void 0:y}toAffine(x){const{px:w,py:g,pz:b}=this,v=this.is0();x==null&&(x=v?n.ONE:n.inv(b));const y=n.mul(w,x),S=n.mul(g,x),C=n.mul(b,x);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x:y,y:S}}isTorsionFree(){const{h:x,isTorsionFree:w}=e;if(x===as)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:w}=e;return x===as?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return this.assertValidity(),s(d,this,x)}toHex(x=!0){return Ja(this.toRawBytes(x))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=LN(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function zN(t){const e=$E(t);return ju(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function UN(t){const e=zN(t),{Fp:n,n:s}=e,r=n.BYTES+1,i=2*n.BYTES+1;function o(L){return xr<L&&L<n.ORDER}function a(L){return Tn(L,s)}function l(L){return Em(L,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:f}=$N({...e,toBytes(L,F,$){const O=F.toAffine(),B=n.toBytes(O.x),M=au;return $?M(Uint8Array.from([F.hasEvenY()?2:3]),B):M(Uint8Array.from([4]),B,n.toBytes(O.y))},fromBytes(L){const F=L.length,$=L[0],O=L.subarray(1);if(F===r&&($===2||$===3)){const B=io(O);if(!o(B))throw new Error("Point is not on curve");const M=d(B);let H=n.sqrt(M);const j=(H&as)===as;return($&1)===1!==j&&(H=n.neg(H)),{x:B,y:H}}else if(F===i&&$===4){const B=n.fromBytes(O.subarray(0,n.BYTES)),M=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x:B,y:M}}else throw new Error(`Point of length ${F} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),p=L=>Ja(el(L,e.nByteLength));function m(L){const F=s>>as;return L>F}function x(L){return m(L)?a(-L):L}const w=(L,F,$)=>io(L.slice(F,$));class g{constructor(F,$,O){this.r=F,this.s=$,this.recovery=O,this.assertValidity()}static fromCompact(F){const $=e.nByteLength;return F=Ss("compactSignature",F,$*2),new g(w(F,0,$),w(F,$,2*$))}static fromDER(F){const{r:$,s:O}=qi.toSig(Ss("DER",F));return new g($,O)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(F){return new g(this.r,this.s,F)}recoverPublicKey(F){const{r:$,s:O,recovery:B}=this,M=E(Ss("msgHash",F));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const H=B===2||B===3?$+e.n:$;if(H>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const j=B&1?"03":"02",P=c.fromHex(j+p(H)),X=l(H),se=a(-M*X),K=a(O*X),J=c.BASE.multiplyAndAddUnsafe(P,se,K);if(!J)throw new Error("point at infinify");return J.assertValidity(),J}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Za(this.toDERHex())}toDERHex(){return qi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Za(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const b={isValidPrivateKey(L){try{return u(L),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const L=BE(e.n);return RN(e.randomBytes(L),e.n)},precompute(L=8,F=c.BASE){return F._setWindowSize(L),F.multiply(BigInt(3)),F}};function v(L,F=!0){return c.fromPrivateKey(L).toRawBytes(F)}function y(L){const F=L instanceof Uint8Array,$=typeof L=="string",O=(F||$)&&L.length;return F?O===r||O===i:$?O===2*r||O===2*i:L instanceof c}function S(L,F,$=!0){if(y(L))throw new Error("first arg must be private key");if(!y(F))throw new Error("second arg must be public key");return c.fromHex(F).multiply(u(L)).toRawBytes($)}const C=e.bits2int||function(L){const F=io(L),$=L.length*8-e.nBitLength;return $>0?F>>BigInt($):F},E=e.bits2int_modN||function(L){return a(C(L))},T=Db(e.nBitLength);function N(L){if(typeof L!="bigint")throw new Error("bigint expected");if(!(xr<=L&&L<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return el(L,e.nByteLength)}function _(L,F,$=D){if(["recovered","canonical"].some(ee=>ee in $))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:B}=e;let{lowS:M,prehash:H,extraEntropy:j}=$;M==null&&(M=!0),L=Ss("msgHash",L),H&&(L=Ss("prehashed msgHash",O(L)));const P=E(L),X=u(F),se=[N(X),N(P)];if(j!=null){const ee=j===!0?B(n.BYTES):j;se.push(Ss("extraEntropy",ee))}const K=au(...se),J=P;function G(ee){const he=C(ee);if(!f(he))return;const Ae=l(he),Ce=c.BASE.multiply(he).toAffine(),ve=a(Ce.x);if(ve===xr)return;const Fe=a(Ae*a(J+ve*X));if(Fe===xr)return;let ct=(Ce.x===ve?0:2)|Number(Ce.y&as),I=Fe;return M&&m(Fe)&&(I=x(Fe),ct^=1),new g(ve,I,ct)}return{seed:K,k2sig:G}}const D={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};function R(L,F,$=D){const{seed:O,k2sig:B}=_(L,F,$),M=e;return LE(M.hash.outputLen,M.nByteLength,M.hmac)(O,B)}c.BASE._setWindowSize(8);function z(L,F,$,O=A){var Ce;const B=L;if(F=Ss("msgHash",F),$=Ss("publicKey",$),"strict"in O)throw new Error("options.strict was renamed to lowS");const{lowS:M,prehash:H}=O;let j,P;try{if(typeof B=="string"||B instanceof Uint8Array)try{j=g.fromDER(B)}catch(ve){if(!(ve instanceof qi.Err))throw ve;j=g.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){const{r:ve,s:Fe}=B;j=new g(ve,Fe)}else throw new Error("PARSE");P=c.fromHex($)}catch(ve){if(ve.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&j.hasHighS())return!1;H&&(F=e.hash(F));const{r:X,s:se}=j,K=E(F),J=l(se),G=a(K*J),ee=a(X*J),he=(Ce=c.BASE.multiplyAndAddUnsafe(P,G,ee))==null?void 0:Ce.toAffine();return he?a(he.x)===X:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:S,sign:R,verify:z,ProjectivePoint:c,Signature:g,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function WN(t){return{hash:t,hmac:(e,...n)=>s0(t,e,gI(...n)),randomBytes:xI}}function HN(t,e){const n=s=>UN({...t,...WN(s)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zE=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),wv=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),VN=BigInt(1),Pm=BigInt(2),vv=(t,e)=>(t+e/Pm)/e;function YN(t){const e=zE,n=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,d=Zn(u,n,e)*u%e,f=Zn(d,n,e)*u%e,p=Zn(f,Pm,e)*c%e,m=Zn(p,r,e)*p%e,x=Zn(m,i,e)*m%e,w=Zn(x,a,e)*x%e,g=Zn(w,l,e)*w%e,b=Zn(g,a,e)*x%e,v=Zn(b,n,e)*u%e,y=Zn(v,o,e)*m%e,S=Zn(y,s,e)*c%e,C=Zn(S,Pm,e);if(!Tm.eql(Tm.sqr(C),t))throw new Error("Cannot find square root");return C}const Tm=AN(zE,void 0,void 0,{sqrt:YN}),Vr=HN({a:BigInt(0),b:BigInt(7),Fp:Tm,n:wv,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=wv,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-VN*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=vv(i*t,e),l=vv(-s*t,e);let c=Tn(t-a*n-l*r,e),u=Tn(-a*s-l*i,e);const d=c>o,f=u>o;if(d&&(c=e-c),f&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:f,k2:u}}}},ml);BigInt(0);Vr.ProjectivePoint;const UE="0x0000000000000000000000000000000000000000",kv="0x0000000000000000000000000000000000000000000000000000000000000000",GN=`Ethereum Signed Message:
`,Sv=BigInt(0),Cv=BigInt(1),Mm=BigInt(2),_v=BigInt(27),Ev=BigInt(28),bd=BigInt(35),WE=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),qN=WE/Mm,KN=Symbol.for("nodejs.util.inspect.custom"),Ii={};function Sp(t){return vi(Ft(t),32)}var ka,qs,Sa,Zr;const is=class is{constructor(e,n,s,r){Ze(this,ka);Ze(this,qs);Ze(this,Sa);Ze(this,Zr);Zf(e,Ii,"Signature"),Te(this,ka,n),Te(this,qs,s),Te(this,Sa,r),Te(this,Zr,null)}get r(){return je(this,ka)}set r(e){ne(Dc(e)===32,"invalid r","value",e),Te(this,ka,Se(e))}get s(){return ne(parseInt(je(this,qs).substring(0,3))<8,"non-canonical s; use ._s","s",je(this,qs)),je(this,qs)}set s(e){ne(Dc(e)===32,"invalid s","value",e),Te(this,qs,Se(e))}get _s(){return je(this,qs)}isValid(){return BigInt(je(this,qs))<=qN}get v(){return je(this,Sa)}set v(e){const n=Yn(e,"value");ne(n===27||n===28,"invalid v","v",e),Te(this,Sa,n)}get networkV(){return je(this,Zr)}get legacyChainId(){const e=this.networkV;return e==null?null:is.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=De(this.s);return this.yParity&&(e[0]|=128),Se(e)}get compactSerialized(){return Bt([this.r,this.yParityAndS])}get serialized(){return Bt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=WE-BigInt(this._s),n=55-this.v,s=new is(Ii,this.r,Sp(e),n);return this.networkV&&Te(s,Zr,this.networkV),s}clone(){const e=new is(Ii,this.r,this._s,this.v);return this.networkV&&Te(e,Zr,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[KN](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=bt(e,"v");return n==_v||n==Ev?Sv:(ne(n>=bd,"invalid EIP-155 v","v",e),(n-bd)/Mm)}static getChainIdV(e,n){return bt(e)*Mm+BigInt(35+n-27)}static getNormalizedV(e){const n=bt(e);return n===Sv||n===_v?27:n===Cv||n===Ev?28:(ne(n>=bd,"invalid v","v",e),n&Cv?27:28)}static from(e){function n(c,u){ne(c,u,"signature",e)}if(e==null)return new is(Ii,kv,kv,27);if(typeof e=="string"){const c=De(e,"signature");if(c.length===64){const u=Se(c.slice(0,32)),d=c.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new is(Ii,u,Se(d),f)}if(c.length===65){const u=Se(c.slice(0,32)),d=Se(c.slice(32,64)),f=is.getNormalizedV(c[64]);return new is(Ii,u,d,f)}n(!1,"invalid raw signature length")}if(e instanceof is)return e.clone();const s=e.r;n(s!=null,"missing r");const r=Sp(s),i=function(c,u){if(c!=null)return Sp(c);if(u!=null){n(nr(u,32),"invalid yParityAndS");const d=De(u);return d[0]&=127,Se(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(c,u,d){if(c!=null){const f=bt(c);return{networkV:f>=bd?f:void 0,v:is.getNormalizedV(f)}}if(u!=null)return n(nr(u,32),"invalid yParityAndS"),{v:De(u)[0]&128?28:27};if(d!=null){switch(Yn(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new is(Ii,r,i,a);return o&&Te(l,Zr,o),n(e.yParity==null||Yn(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};ka=new WeakMap,qs=new WeakMap,Sa=new WeakMap,Zr=new WeakMap;let As=is;var gr;const Hi=class Hi{constructor(e){Ze(this,gr);ne(Dc(e)===32,"invalid private key","privateKey","[REDACTED]"),Te(this,gr,Se(e))}get privateKey(){return je(this,gr)}get publicKey(){return Hi.computePublicKey(je(this,gr))}get compressedPublicKey(){return Hi.computePublicKey(je(this,gr),!0)}sign(e){ne(Dc(e)===32,"invalid digest length","digest",e);const n=Vr.sign(Uo(e),Uo(je(this,gr)),{lowS:!0});return As.from({r:Ka(n.r,32),s:Ka(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=Hi.computePublicKey(e);return Se(Vr.getSharedSecret(Uo(je(this,gr)),De(n),!1))}static computePublicKey(e,n){let s=De(e,"key");if(s.length===32){const i=Vr.getPublicKey(s,!!n);return Se(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=Vr.ProjectivePoint.fromHex(s);return Se(r.toRawBytes(n))}static recoverPublicKey(e,n){ne(Dc(e)===32,"invalid digest length","digest",e);const s=As.from(n);let r=Vr.Signature.fromCompact(Uo(Bt([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(Uo(e));return ne(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,s){const r=Vr.ProjectivePoint.fromHex(Hi.computePublicKey(e).substring(2)),i=Vr.ProjectivePoint.fromHex(Hi.computePublicKey(n).substring(2));return"0x"+r.add(i).toHex(!!s)}};gr=new WeakMap;let er=Hi;const XN=BigInt(0),QN=BigInt(36);function Pv(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let r=0;r<40;r++)n[r]=e[r].charCodeAt(0);const s=De(qt(n));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(s[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const Ab={};for(let t=0;t<10;t++)Ab[String(t)]=String(t);for(let t=0;t<26;t++)Ab[String.fromCharCode(65+t)]=String(10+t);const Tv=15;function JN(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(s=>Ab[s]).join("");for(;e.length>=Tv;){let s=e.substring(0,Tv);e=parseInt(s,10)%97+e.substring(s.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const ZN=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function e8(t){t=t.toLowerCase();let e=XN;for(let n=0;n<t.length;n++)e=e*QN+ZN[t[n]];return e}function bs(t){if(ne(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Pv(t);return ne(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ne(t.substring(2,4)===JN(t),"bad icap checksum","address",t);let e=e8(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Pv("0x"+e)}ne(!1,"invalid address","address",t)}function t8(t){return t&&typeof t.getAddress=="function"}async function Cp(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(it(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),ne(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),bs(n)}function Ac(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?bs(t):(it(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Cp(t,e.resolveName(t)));if(t8(t))return Cp(t,t.getAddress());if(t&&typeof t.then=="function")return Cp(t,t);ne(!1,"unsupported addressable value","target",t)}function _p(t,e){return{address:bs(t),storageKeys:e.map((n,s)=>(ne(nr(n,32),"invalid slot",`storageKeys[${s}]`,n),n.toLowerCase()))}}function o0(t){if(Array.isArray(t))return t.map((n,s)=>Array.isArray(n)?(ne(n.length===2,"invalid slot set",`value[${s}]`,n),_p(n[0],n[1])):(ne(n!=null&&typeof n=="object","invalid address-slot set","value",t),_p(n.address,n.storageKeys)));ne(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const s=t[n].reduce((r,i)=>(r[i]=!0,r),{});return _p(n,Object.keys(s).sort())});return e.sort((n,s)=>n.address.localeCompare(s.address)),e}function n8(t){return{address:bs(t.address),nonce:bt(t.nonce!=null?t.nonce:0),chainId:bt(t.chainId!=null?t.chainId:0),signature:As.from(t.signature)}}function Fu(t){let e;return typeof t=="string"?e=er.computePublicKey(t,!1):e=t.publicKey,bs(qt("0x"+e.substring(4)).substring(26))}function s8(t,e){return Fu(er.recoverPublicKey(t,e))}const Yt=BigInt(0),r8=BigInt(2),i8=BigInt(27),o8=BigInt(28),a8=BigInt(35),l8=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),c8=Symbol.for("nodejs.util.inspect.custom"),Ep=4096*32,hh=128;function u8(t){return{blobToKzgCommitment:s=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return De(t.blobToKzgCommitment(Se(s)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return De(t.blobToKzgCommitment(s));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return De(t.blobToKZGCommitment(Se(s)));ne(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return De(t.computeBlobProof(Se(s),Se(r)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return De(t.computeBlobKZGProof(Se(s),Se(r)));ne(!1,"unsupported KZG library","kzg",t)}}}function Mv(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=xs(e).substring(4),"0x"+n}function yl(t){return t==="0x"?null:bs(t)}function a0(t,e){try{return o0(t)}catch(n){ne(!1,n.message,e,t)}}function d8(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let s=0;s<t.length;s++){const r=t[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);n.push({address:yl(r[1]),nonce:gt(r[2],"nonce"),chainId:gt(r[0],"chainId"),signature:As.from({yParity:To(r[3],"yParity"),r:vi(r[4],32),s:vi(r[5],32)})})}return n}catch(n){ne(!1,n.message,e,t)}}function To(t,e){return t==="0x"?0:Yn(t,e)}function gt(t,e){if(t==="0x")return Yt;const n=bt(t,e);return ne(n<=l8,"value exceeds uint size",e,n),n}function nt(t,e){const n=bt(t,"value"),s=Ft(n);return ne(s.length<=32,"value too large",`tx.${e}`,n),s}function l0(t){return o0(t).map(e=>[e.address,e.storageKeys])}function h8(t){return t.map(e=>[nt(e.chainId,"chainId"),e.address,nt(e.nonce,"nonce"),nt(e.signature.yParity,"yParity"),Ft(e.signature.r),Ft(e.signature._s)])}function f8(t,e){ne(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)ne(nr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function p8(t){const e=Au(t);ne(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:To(e[0],"nonce"),gasPrice:gt(e[1],"gasPrice"),gasLimit:gt(e[2],"gasLimit"),to:yl(e[3]),value:gt(e[4],"value"),data:Se(e[5]),chainId:Yt};if(e.length===6)return n;const s=gt(e[6],"v"),r=gt(e[7],"r"),i=gt(e[8],"s");if(r===Yt&&i===Yt)n.chainId=s;else{let o=(s-a8)/r8;o<Yt&&(o=Yt),n.chainId=o,ne(o!==Yt||s===i8||s===o8,"non-canonical legacy v","v",e[6]),n.signature=As.from({r:vi(e[7],32),s:vi(e[8],32),v:s})}return n}function g8(t,e){const n=[nt(t.nonce,"nonce"),nt(t.gasPrice||0,"gasPrice"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data];let s=Yt;if(t.chainId!=Yt)s=bt(t.chainId,"tx.chainId"),ne(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(s=i)}if(!e)return s!==Yt&&(n.push(Ft(s)),n.push("0x"),n.push("0x")),Cr(n);let r=BigInt(27+e.yParity);return s!==Yt?r=As.getChainIdV(s,e.v):BigInt(e.v)!==r&&ne(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Ft(r)),n.push(Ft(e.r)),n.push(Ft(e._s)),Cr(n)}function c0(t,e){let n;try{if(n=To(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{ne(!1,"invalid yParity","yParity",e[0])}const s=vi(e[1],32),r=vi(e[2],32),i=As.from({r:s,s:r,yParity:n});t.signature=i}function m8(t){const e=Au(De(t).slice(1));ne(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Se(t));const n={type:2,chainId:gt(e[0],"chainId"),nonce:To(e[1],"nonce"),maxPriorityFeePerGas:gt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:gt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:gt(e[4],"gasLimit"),to:yl(e[5]),value:gt(e[6],"value"),data:Se(e[7]),accessList:a0(e[8],"accessList")};return e.length===9||c0(n,e.slice(9)),n}function x8(t,e){const n=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),nt(t.maxFeePerGas||0,"maxFeePerGas"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data,l0(t.accessList||[])];return e&&(n.push(nt(e.yParity,"yParity")),n.push(Ft(e.r)),n.push(Ft(e.s))),Bt(["0x02",Cr(n)])}function b8(t){const e=Au(De(t).slice(1));ne(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Se(t));const n={type:1,chainId:gt(e[0],"chainId"),nonce:To(e[1],"nonce"),gasPrice:gt(e[2],"gasPrice"),gasLimit:gt(e[3],"gasLimit"),to:yl(e[4]),value:gt(e[5],"value"),data:Se(e[6]),accessList:a0(e[7],"accessList")};return e.length===8||c0(n,e.slice(8)),n}function y8(t,e){const n=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.gasPrice||0,"gasPrice"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data,l0(t.accessList||[])];return e&&(n.push(nt(e.yParity,"recoveryParam")),n.push(Ft(e.r)),n.push(Ft(e.s))),Bt(["0x01",Cr(n)])}function w8(t){let e=Au(De(t).slice(1)),n="3",s=null,r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];ne(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),ne(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),ne(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),ne(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ne(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",s=Yn(e[1]);const o=e[2],a=e[3],l=e[4];ne(s===1,`unsupported EIP-7594 network format version: ${s}`,"fields[1]",s),ne(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),ne(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),ne(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),ne(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ne(o.length*hh===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<o.length;c++){const u=[];for(let d=0;d<hh;d++)u.push(l[c*hh+d]);r.push({data:o[c],commitment:a[c],proof:Bt(u)})}e=e[0]}ne(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Se(t));const i={type:3,chainId:gt(e[0],"chainId"),nonce:To(e[1],"nonce"),maxPriorityFeePerGas:gt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:gt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:gt(e[4],"gasLimit"),to:yl(e[5]),value:gt(e[6],"value"),data:Se(e[7]),accessList:a0(e[8],"accessList"),maxFeePerBlobGas:gt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:s};r&&(i.blobs=r),ne(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),ne(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<i.blobVersionedHashes.length;o++)ne(nr(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||c0(i,e.slice(11)),i}function v8(t,e,n){const s=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),nt(t.maxFeePerGas||0,"maxFeePerGas"),nt(t.gasLimit,"gasLimit"),t.to||UE,nt(t.value,"value"),t.data,l0(t.accessList||[]),nt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),f8(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(s.push(nt(e.yParity,"yParity")),s.push(Ft(e.r)),s.push(Ft(e.s)),n)){if(t.blobWrapperVersion!=null){const r=Ft(t.blobWrapperVersion),i=[];for(const{proof:o}of n){const a=De(o),l=a.length/hh;for(let c=0;c<a.length;c+=l)i.push(a.subarray(c,c+l))}return Bt(["0x03",Cr([s,r,n.map(o=>o.data),n.map(o=>o.commitment),i])])}return Bt(["0x03",Cr([s,n.map(r=>r.data),n.map(r=>r.commitment),n.map(r=>r.proof)])])}return Bt(["0x03",Cr(s)])}function k8(t){const e=Au(De(t).slice(1));ne(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Se(t));const n={type:4,chainId:gt(e[0],"chainId"),nonce:To(e[1],"nonce"),maxPriorityFeePerGas:gt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:gt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:gt(e[4],"gasLimit"),to:yl(e[5]),value:gt(e[6],"value"),data:Se(e[7]),accessList:a0(e[8],"accessList"),authorizationList:d8(e[9],"authorizationList")};return e.length===10||c0(n,e.slice(10)),n}function S8(t,e){const n=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),nt(t.maxFeePerGas||0,"maxFeePerGas"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data,l0(t.accessList||[]),h8(t.authorizationList||[])];return e&&(n.push(nt(e.yParity,"yParity")),n.push(Ft(e.r)),n.push(Ft(e.s))),Bt(["0x04",Cr(n)])}var Cs,Ca,_a,Ea,Pa,Ta,Ma,Ia,Na,Da,Aa,Ra,Zi,ei,Ks,ti,Oa,La,ja,fh;const Ys=class Ys{constructor(){Ze(this,ja);Ze(this,Cs);Ze(this,Ca);Ze(this,_a);Ze(this,Ea);Ze(this,Pa);Ze(this,Ta);Ze(this,Ma);Ze(this,Ia);Ze(this,Na);Ze(this,Da);Ze(this,Aa);Ze(this,Ra);Ze(this,Zi);Ze(this,ei);Ze(this,Ks);Ze(this,ti);Ze(this,Oa);Ze(this,La);Te(this,Cs,null),Te(this,Ca,null),Te(this,Ea,0),Te(this,Pa,Yt),Te(this,Ta,null),Te(this,Ma,null),Te(this,Ia,null),Te(this,_a,"0x"),Te(this,Na,Yt),Te(this,Da,Yt),Te(this,Aa,null),Te(this,Ra,null),Te(this,Zi,null),Te(this,ei,null),Te(this,Ks,null),Te(this,ti,null),Te(this,Oa,null),Te(this,La,null)}get type(){return je(this,Cs)}set type(e){switch(e){case null:Te(this,Cs,null);break;case 0:case"legacy":Te(this,Cs,0);break;case 1:case"berlin":case"eip-2930":Te(this,Cs,1);break;case 2:case"london":case"eip-1559":Te(this,Cs,2);break;case 3:case"cancun":case"eip-4844":Te(this,Cs,3);break;case 4:case"pectra":case"eip-7702":Te(this,Cs,4);break;default:ne(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=je(this,Ca);return e==null&&this.type===3?UE:e}set to(e){Te(this,Ca,e==null?null:bs(e))}get nonce(){return je(this,Ea)}set nonce(e){Te(this,Ea,Yn(e,"value"))}get gasLimit(){return je(this,Pa)}set gasLimit(e){Te(this,Pa,bt(e))}get gasPrice(){const e=je(this,Ta);return e==null&&(this.type===0||this.type===1)?Yt:e}set gasPrice(e){Te(this,Ta,e==null?null:bt(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=je(this,Ma);return e??(this.type===2||this.type===3?Yt:null)}set maxPriorityFeePerGas(e){Te(this,Ma,e==null?null:bt(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=je(this,Ia);return e??(this.type===2||this.type===3?Yt:null)}set maxFeePerGas(e){Te(this,Ia,e==null?null:bt(e,"maxFeePerGas"))}get data(){return je(this,_a)}set data(e){Te(this,_a,Se(e))}get value(){return je(this,Na)}set value(e){Te(this,Na,bt(e,"value"))}get chainId(){return je(this,Da)}set chainId(e){Te(this,Da,bt(e))}get signature(){return je(this,Aa)||null}set signature(e){Te(this,Aa,e==null?null:As.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const s of n)if(!s.signature.isValid())return!1}return!0}get accessList(){const e=je(this,Ra)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){Te(this,Ra,e==null?null:o0(e))}get authorizationList(){const e=je(this,Oa)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){Te(this,Oa,e==null?null:e.map(n=>n8(n)))}get maxFeePerBlobGas(){const e=je(this,Zi);return e==null&&this.type===3?Yt:e}set maxFeePerBlobGas(e){Te(this,Zi,e==null?null:bt(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=je(this,ei);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ne(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)ne(nr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}Te(this,ei,e)}get blobs(){return je(this,ti)==null?null:je(this,ti).map(e=>Object.assign({},e))}set blobs(e){if(e==null){Te(this,ti,null);return}const n=[],s=[];for(let r=0;r<e.length;r++){const i=e[r];if(e0(i)){it(je(this,Ks),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=De(i);if(ne(o.length<=Ep,"blob is too large",`blobs[${r}]`,i),o.length!==Ep){const c=new Uint8Array(Ep);c.set(o),o=c}const a=je(this,Ks).blobToKzgCommitment(o),l=Se(je(this,Ks).computeBlobKzgProof(o,a));n.push({data:Se(o),commitment:Se(a),proof:l}),s.push(Mv(1,a))}else{const o=Se(i.data),a=Se(i.commitment),l=Se(i.proof);n.push({data:o,commitment:a,proof:l}),s.push(Mv(1,a))}}Te(this,ti,n),Te(this,ei,s)}get kzg(){return je(this,Ks)}set kzg(e){e==null?Te(this,Ks,null):Te(this,Ks,u8(e))}get blobWrapperVersion(){return je(this,La)}set blobWrapperVersion(e){Te(this,La,e)}get hash(){return this.signature==null?null:qt(an(this,ja,fh).call(this,!0,!1))}get unsignedHash(){return qt(this.unsignedSerialized)}get from(){return this.signature==null?null:s8(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:er.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return an(this,ja,fh).call(this,!0,!0)}get unsignedSerialized(){return an(this,ja,fh).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=je(this,Zi)!=null||je(this,ei);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&it(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),it(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),it(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ys.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[c8](){return this.toString()}toString(){const e=[],n=r=>{let i=this[r];typeof i=="string"&&(i=JSON.stringify(i)),e.push(`${r}: ${i}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const s=this.authorizationList;if(s){const r=[];for(const i of s){const o=[];o.push(`address: ${JSON.stringify(i.address)}`),i.nonce!=null&&o.push(`nonce: ${i.nonce}`),i.chainId!=null&&o.push(`chainId: ${i.chainId}`),i.signature&&o.push(`signature: ${i.signature.toString()}`),r.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${r.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new Ys;if(typeof e=="string"){const s=De(e);if(s[0]>=127)return Ys.from(p8(s));switch(s[0]){case 1:return Ys.from(b8(s));case 2:return Ys.from(m8(s));case 3:return Ys.from(w8(s));case 4:return Ys.from(k8(s))}it(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Ys;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=As.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(ne(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ne(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ne(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ne(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Cs=new WeakMap,Ca=new WeakMap,_a=new WeakMap,Ea=new WeakMap,Pa=new WeakMap,Ta=new WeakMap,Ma=new WeakMap,Ia=new WeakMap,Na=new WeakMap,Da=new WeakMap,Aa=new WeakMap,Ra=new WeakMap,Zi=new WeakMap,ei=new WeakMap,Ks=new WeakMap,ti=new WeakMap,Oa=new WeakMap,La=new WeakMap,ja=new WeakSet,fh=function(e,n){it(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return g8(this,s);case 1:return y8(this,s);case 2:return x8(this,s);case 3:return v8(this,s,n?this.blobs:null);case 4:return S8(this,s)}it(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Zh=Ys;function C8(t){return ne(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),qt(Bt(["0x05",Cr([t.chainId!=null?Ft(t.chainId):"0x",bs(t.address),t.nonce!=null?Ft(t.nonce):"0x"])]))}function Rb(t){return qt(ro(t))}function _8(t){return typeof t=="string"&&(t=ro(t)),qt(Bt([ro(GN),ro(String(t.length)),t]))}const HE=new Uint8Array(32);HE.fill(0);const E8=BigInt(-1),VE=BigInt(0),YE=BigInt(1),P8=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function T8(t){const e=De(t),n=e.length%32;return n?Bt([e,HE.slice(n)]):Se(e)}const M8=Ka(YE,32),I8=Ka(VE,32),Iv={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Pp=["name","version","chainId","verifyingContract","salt"];function Nv(t){return function(e){return ne(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const N8={name:Nv("name"),version:Nv("version"),chainId:function(t){const e=bt(t,"domain.chainId");return ne(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):iI(e)},verifyingContract:function(t){try{return bs(t).toLowerCase()}catch{}ne(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=De(t,"domain.salt");return ne(e.length===32,'invalid domain value "salt"',"domain.salt",t),Se(e)}};function Tp(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",s=parseInt(e[2]);ne(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",t);const r=rI(P8,n?s-1:s),i=n?(r+YE)*E8:VE;return function(o){const a=bt(o,"value");return ne(a>=i&&a<=r,`value out-of-bounds for ${t}`,"value",a),Ka(n?sI(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return ne(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(s){const r=De(s);return ne(r.length===n,`invalid length for ${t}`,"value",s),T8(s)}}}switch(t){case"address":return function(e){return vi(bs(e),32)};case"bool":return function(e){return e?M8:I8};case"bytes":return function(e){return qt(e)};case"string":return function(e){return Rb(e)}}return null}function Dv(t,e){return`${t}(${e.map(({name:n,type:s})=>s+" "+n).join(",")})`}function yd(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var Cu,mr,Fa,Of,GE;const os=class os{constructor(e){Ze(this,Of);ie(this,"primaryType");Ze(this,Cu);Ze(this,mr);Ze(this,Fa);Te(this,mr,new Map),Te(this,Fa,new Map);const n=new Map,s=new Map,r=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:c,type:u})=>{let{base:d,index:f}=yd(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:c,type:d+(f||"")}}),n.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),Te(this,Cu,JSON.stringify(i));for(const l in i){const c=new Set;for(const u of i[l]){ne(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const d=yd(u.type).base;ne(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",e),!Tp(d)&&(ne(s.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),s.get(d).push(l),n.get(l).add(d))}}const o=Array.from(s.keys()).filter(l=>s.get(l).length===0);ne(o.length!==0,"missing primary type","types",e),ne(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Vn(this,{primaryType:o[0]});function a(l,c){ne(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(s.has(u)){a(u,c);for(const d of c)r.get(d).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of r){const u=Array.from(c);u.sort(),je(this,mr).set(l,Dv(l,i[l])+u.map(d=>Dv(d,i[d])).join(""))}}get types(){return JSON.parse(je(this,Cu))}getEncoder(e){let n=je(this,Fa).get(e);return n||(n=an(this,Of,GE).call(this,e),je(this,Fa).set(e,n)),n}encodeType(e){const n=je(this,mr).get(e);return ne(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return qt(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,s){if(Tp(e))return s(e,n);const r=yd(e).array;if(r)return ne(r.count===-1||r.count===n.length,`array length mismatch; expected length ${r.count}`,"value",n),n.map(o=>this._visit(r.prefix,o,s));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],s),o),{});ne(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new os(e)}static getPrimaryType(e){return os.from(e).primaryType}static hashStruct(e,n,s){return os.from(n).hashStruct(e,s)}static hashDomain(e){const n=[];for(const s in e){if(e[s]==null)continue;const r=Iv[s];ne(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),n.push({name:s,type:r})}return n.sort((s,r)=>Pp.indexOf(s.name)-Pp.indexOf(r.name)),os.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,s){return Bt(["0x1901",os.hashDomain(e),os.from(n).hash(s)])}static hash(e,n,s){return qt(os.encode(e,n,s))}static async resolveNames(e,n,s,r){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!nr(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=os.from(n);o.visit(s,(a,l)=>(a==="address"&&!nr(l,20)&&(i[l]="0x"),l));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),s=o.visit(s,(a,l)=>a==="address"&&i[l]?i[l]:l),{domain:e,value:s}}static getPayload(e,n,s){os.hashDomain(e);const r={},i=[];Pp.forEach(l=>{const c=e[l];c!=null&&(r[l]=N8[l](c),i.push({name:l,type:Iv[l]}))});const o=os.from(n);n=o.types;const a=Object.assign({},n);return ne(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(s),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(s,(l,c)=>{if(l.match(/^bytes(\d*)/))return Se(De(c));if(l.match(/^u?int/))return bt(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return ne(typeof c=="string","invalid string","value",c),c}ne(!1,"unsupported type","type",l)})}}};Cu=new WeakMap,mr=new WeakMap,Fa=new WeakMap,Of=new WeakSet,GE=function(e){{const r=Tp(e);if(r)return r}const n=yd(e).array;if(n){const r=n.prefix,i=this.getEncoder(r);return o=>{ne(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return je(this,mr).has(r)&&(a=a.map(qt)),qt(Bt(a))}}const s=this.types[e];if(s){const r=Rb(je(this,mr).get(e));return i=>{const o=s.map(({name:a,type:l})=>{const c=this.getEncoder(l)(i[a]);return je(this,mr).has(l)?qt(c):c});return o.unshift(r),Bt(o)}}ne(!1,`unknown type: ${e}`,"type",e)};let ef=os;BigInt(0);function qE(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Se(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of n)!(r in t)||t[r]==null||(e[r]=bt(t[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in t)||t[r]==null||(e[r]=Yn(t[r],`request.${r}`));return t.accessList&&(e.accessList=o0(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(r=>e0(r)?Se(r):Object.assign({},r))),e}function Ni(t,e){if(t.provider)return t.provider;it(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Av(t,e){let n=qE(e);if(n.to!=null&&(n.to=Ac(n.to,t)),n.from!=null){const s=n.from;n.from=Promise.all([t.getAddress(),Ac(s,t)]).then(([r,i])=>(ne(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else n.from=t.getAddress();return await bb(n)}class KE{constructor(e){ie(this,"provider");Vn(this,{provider:e||null})}async getNonce(e){return Ni(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Av(this,e)}async populateTransaction(e){const n=Ni(this,"populateTransaction"),s=await Av(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const o=bt(s.chainId);ne(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?ne(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&i&&ne(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const o=await n.getFeeData();it(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(s.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const a=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=a,s.maxPriorityFeePerGas=a}else s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(it(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice),s.type=0):it(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await bb(s)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Ni(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Ni(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Ni(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Ni(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Ni(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const r=Zh.from(s);return await n.broadcastTransaction(await this.signTransaction(r))}authorize(e){it(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var Ba,ph;const zy=class zy extends KE{constructor(n,s){super(s);Ze(this,Ba);ie(this,"address");Vn(this,{address:n})}async getAddress(){return this.address}connect(n){return new zy(this.address,n)}async signTransaction(n){an(this,Ba,ph).call(this,"transactions","signTransaction")}async signMessage(n){an(this,Ba,ph).call(this,"messages","signMessage")}async signTypedData(n,s,r){an(this,Ba,ph).call(this,"typed-data","signTypedData")}};Ba=new WeakSet,ph=function(n,s){it(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:s})};let Im=zy;var $a;const Uy=class Uy extends KE{constructor(n,s){super(s);ie(this,"address");Ze(this,$a);ne(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),Te(this,$a,n);const r=Fu(this.signingKey.publicKey);Vn(this,{address:r})}get signingKey(){return je(this,$a)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new Uy(je(this,$a),n)}async signTransaction(n){n=qE(n);const{to:s,from:r}=await bb({to:n.to?Ac(n.to,this):void 0,from:n.from?Ac(n.from,this):void 0});s!=null&&(n.to=s),r!=null&&(n.from=r),n.from!=null&&(ne(bs(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const i=Zh.from(n);return i.signature=this.signingKey.sign(i.unsignedHash),i.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(_8(n)).serialized}authorizeSync(n){ne(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const s=this.signingKey.sign(C8(n));return Object.assign({},{address:bs(n.address),nonce:bt(n.nonce||0),chainId:bt(n.chainId||0)},{signature:s})}async authorize(n){return n=Object.assign({},n,{address:await Ac(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,s,r){const i=await ef.resolveNames(n,s,r,async o=>{it(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return it(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(ef.hash(i.domain,s,i.value)).serialized}};$a=new WeakMap;let Nm=Uy;const tf=" !#$%&'()*+,-./<=>?@[]^_`{|}~",D8=/^[a-z]*$/i;function Rv(t,e){let n=97;return t.reduce((s,r)=>(r===e?n++:r.match(D8)?s.push(String.fromCharCode(n)+r):(n=97,s.push(r)),s),[])}function A8(t,e){for(let r=tf.length-1;r>=0;r--)t=t.split(tf[r]).join(e.substring(2*r,2*r+2));const n=[],s=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(r,i,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(i.toLowerCase());return""});if(s)throw new Error(`leftovers: ${JSON.stringify(s)}`);return Rv(Rv(n,";"),":")}function R8(t){return ne(t[0]==="0","unsupported auwl data","data",t),A8(t.substring(1+2*tf.length),t.substring(1,1+2*tf.length))}class O8{constructor(e){ie(this,"locale");Vn(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var za,_u,eo,Eu,Dm;class L8 extends O8{constructor(n,s,r){super(n);Ze(this,Eu);Ze(this,za);Ze(this,_u);Ze(this,eo);Te(this,za,s),Te(this,_u,r),Te(this,eo,null)}get _data(){return je(this,za)}_decodeWords(){return R8(je(this,za))}getWord(n){const s=an(this,Eu,Dm).call(this);return ne(n>=0&&n<s.length,`invalid word index: ${n}`,"index",n),s[n]}getWordIndex(n){return an(this,Eu,Dm).call(this).indexOf(n)}}za=new WeakMap,_u=new WeakMap,eo=new WeakMap,Eu=new WeakSet,Dm=function(){if(je(this,eo)==null){const n=this._decodeWords();if(Rb(n.join(`
`)+`
`)!==je(this,_u))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);Te(this,eo,n)}return je(this,eo)};const j8="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",F8="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let Mp=null;class mo extends L8{constructor(){super("en",j8,F8)}static wordlist(){return Mp==null&&(Mp=new mo),Mp}}function XE(t){return(1<<t)-1<<8-t&255}function B8(t){return(1<<t)-1&255}function Ip(t,e){z_("NFKD"),e==null&&(e=mo.wordlist());const n=e.split(t);ne(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const s=new Uint8Array(Math.ceil(11*n.length/8));let r=0;for(let c=0;c<n.length;c++){let u=e.getWordIndex(n[c].normalize("NFKD"));ne(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let d=0;d<11;d++)u&1<<10-d&&(s[r>>3]|=1<<7-r%8),r++}const i=32*n.length/3,o=n.length/3,a=XE(o),l=De(xs(s.slice(0,i/8)))[0]&a;return ne(l===(s[s.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),Se(s.slice(0,i/8))}function Np(t,e){ne(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=mo.wordlist());const n=[0];let s=11;for(let o=0;o<t.length;o++)s>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],s-=8):(n[n.length-1]<<=s,n[n.length-1]|=t[o]>>8-s,n.push(t[o]&B8(8-s)),s+=3);const r=t.length/4,i=parseInt(xs(t).substring(2,4),16)&XE(r);return n[n.length-1]<<=r,n[n.length-1]|=i>>8-r,e.join(n.map(o=>e.getWord(o)))}const Dp={};class lu{constructor(e,n,s,r,i){ie(this,"phrase");ie(this,"password");ie(this,"wordlist");ie(this,"entropy");r==null&&(r=""),i==null&&(i=mo.wordlist()),Zf(e,Dp,"Mnemonic"),Vn(this,{phrase:s,password:r,wordlist:i,entropy:n})}computeSeed(){const e=ro("mnemonic"+this.password,"NFKD");return Ru(ro(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,s){const r=Ip(e,s);return e=Np(De(r),s),new lu(Dp,r,e,n,s)}static fromEntropy(e,n,s){const r=De(e,"entropy"),i=Np(r,s);return new lu(Dp,Se(r),i,n,s)}static entropyToPhrase(e,n){const s=De(e,"entropy");return Np(s,n)}static phraseToEntropy(e,n){return Ip(e,n)}static isValidMnemonic(e,n){try{return Ip(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Jt=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},Ap=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},gh,ss,Us;const $8={16:10,24:12,32:14},z8=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],es=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],wd=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],U8=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],W8=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],H8=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],V8=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],Y8=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],G8=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],q8=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],K8=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],X8=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Q8=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],J8=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Z8=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Rp(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class Ob{get key(){return Jt(this,gh,"f").slice()}constructor(e){if(gh.set(this,void 0),ss.set(this,void 0),Us.set(this,void 0),!(this instanceof Ob))throw Error("AES must be instanitated with `new`");Ap(this,gh,new Uint8Array(e),"f");const n=$8[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");Ap(this,Us,[],"f"),Ap(this,ss,[],"f");for(let u=0;u<=n;u++)Jt(this,Us,"f").push([0,0,0,0]),Jt(this,ss,"f").push([0,0,0,0]);const s=(n+1)*4,r=this.key.length/4,i=Rp(this.key);let o;for(let u=0;u<r;u++)o=u>>2,Jt(this,Us,"f")[o][u%4]=i[u],Jt(this,ss,"f")[n-o][u%4]=i[u];let a=0,l=r,c;for(;l<s;){if(c=i[r-1],i[0]^=es[c>>16&255]<<24^es[c>>8&255]<<16^es[c&255]<<8^es[c>>24&255]^z8[a]<<24,a+=1,r!=8)for(let p=1;p<r;p++)i[p]^=i[p-1];else{for(let p=1;p<r/2;p++)i[p]^=i[p-1];c=i[r/2-1],i[r/2]^=es[c&255]^es[c>>8&255]<<8^es[c>>16&255]<<16^es[c>>24&255]<<24;for(let p=r/2+1;p<r;p++)i[p]^=i[p-1]}let u=0,d,f;for(;u<r&&l<s;)d=l>>2,f=l%4,Jt(this,Us,"f")[d][f]=i[u],Jt(this,ss,"f")[n-d][f]=i[u++],l++}for(let u=1;u<n;u++)for(let d=0;d<4;d++)c=Jt(this,ss,"f")[u][d],Jt(this,ss,"f")[u][d]=X8[c>>24&255]^Q8[c>>16&255]^J8[c>>8&255]^Z8[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=Jt(this,Us,"f").length-1,s=[0,0,0,0];let r=Rp(e);for(let a=0;a<4;a++)r[a]^=Jt(this,Us,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=U8[r[l]>>24&255]^W8[r[(l+1)%4]>>16&255]^H8[r[(l+2)%4]>>8&255]^V8[r[(l+3)%4]&255]^Jt(this,Us,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Jt(this,Us,"f")[n][a],i[4*a]=(es[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(es[r[(a+1)%4]>>16&255]^o>>16)&255,i[4*a+2]=(es[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(es[r[(a+3)%4]&255]^o)&255;return i}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=Jt(this,ss,"f").length-1,s=[0,0,0,0];let r=Rp(e);for(let a=0;a<4;a++)r[a]^=Jt(this,ss,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)s[l]=Y8[r[l]>>24&255]^G8[r[(l+3)%4]>>16&255]^q8[r[(l+2)%4]>>8&255]^K8[r[(l+1)%4]&255]^Jt(this,ss,"f")[a][l];r=s.slice()}const i=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Jt(this,ss,"f")[n][a],i[4*a]=(wd[r[a]>>24&255]^o>>24)&255,i[4*a+1]=(wd[r[(a+3)%4]>>16&255]^o>>16)&255,i[4*a+2]=(wd[r[(a+2)%4]>>8&255]^o>>8)&255,i[4*a+3]=(wd[r[(a+1)%4]&255]^o)&255;return i}}gh=new WeakMap,ss=new WeakMap,Us=new WeakMap;class e6{constructor(e,n,s){if(s&&!(this instanceof s))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Ob(n)},name:{enumerable:!0,value:e}})}}var Lo=function(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},ts=function(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)},uc,Fi,rs;class nf extends e6{constructor(e,n){super("CTR",e,nf),uc.set(this,void 0),Fi.set(this,void 0),rs.set(this,void 0),Lo(this,rs,new Uint8Array(16),"f"),ts(this,rs,"f").fill(0),Lo(this,uc,ts(this,rs,"f"),"f"),Lo(this,Fi,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(ts(this,rs,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)ts(this,rs,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");ts(this,rs,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(ts(this,rs,"f")[e]===255)ts(this,rs,"f")[e]=0;else{ts(this,rs,"f")[e]++;break}}encrypt(e){var n,s;const r=new Uint8Array(e);for(let i=0;i<r.length;i++)ts(this,Fi,"f")===16&&(Lo(this,uc,this.aes.encrypt(ts(this,rs,"f")),"f"),Lo(this,Fi,0,"f"),this.increment()),r[i]^=ts(this,uc,"f")[Lo(this,Fi,(s=ts(this,Fi,"f"),n=s++,s),"f"),n];return r}decrypt(e){return this.encrypt(e)}}uc=new WeakMap,Fi=new WeakMap,rs=new WeakMap;function $l(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function QE(t){return typeof t=="string"?ro(t,"NFKC"):Uo(t)}const t6="m/44'/60'/0'/0/0";function JE(t){const e=t.salt!=null?De(t.salt,"options.salt"):_r(32);let n=1<<17,s=8,r=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(s=t.scrypt.r),t.scrypt.p&&(r=t.scrypt.p)),ne(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),ne(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt r parameter","options.r",s),ne(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt p parameter","options.p",r),{name:"scrypt",dkLen:32,salt:e,N:n,r:s,p:r}}function ZE(t,e,n,s){const r=De(n.privateKey,"privateKey"),i=s.iv!=null?De(s.iv,"options.iv"):_r(16);ne(i.length===16,"invalid options.iv length","options.iv",s.iv);const o=s.uuid!=null?De(s.uuid,"options.uuid"):_r(16);ne(o.length===16,"invalid options.uuid length","options.uuid",s.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new nf(a,i),u=De(c.encrypt(r)),d=qt(Bt([l,u])),f={address:n.address.substring(2).toLowerCase(),id:dI(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Se(i).substring(2)},ciphertext:Se(u).substring(2),kdf:"scrypt",kdfparams:{salt:Se(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:d.substring(2)}};if(n.mnemonic){const p=s.client!=null?s.client:`ethers/${$_}`,m=n.mnemonic.path||t6,x=n.mnemonic.locale||"en",w=t.slice(32,64),g=De(n.mnemonic.entropy,"account.mnemonic.entropy"),b=_r(16),v=new nf(w,b),y=De(v.encrypt(g)),S=new Date,E="UTC--"+(S.getUTCFullYear()+"-"+$l(S.getUTCMonth()+1,2)+"-"+$l(S.getUTCDate(),2)+"T"+$l(S.getUTCHours(),2)+"-"+$l(S.getUTCMinutes(),2)+"-"+$l(S.getUTCSeconds(),2)+".0Z")+"--"+f.address;f["x-ethers"]={client:p,gethFilename:E,path:m,locale:x,mnemonicCounter:Se(b).substring(2),mnemonicCiphertext:Se(y).substring(2),version:"0.1"}}return JSON.stringify(f)}function n6(t,e,n){n==null&&(n={});const s=QE(e),r=JE(n),i=Lu(s,r.salt,r.N,r.r,r.p,64);return ZE(De(i),r,t,n)}async function s6(t,e,n){n==null&&(n={});const s=QE(e),r=JE(n),i=await Ou(s,r.salt,r.N,r.r,r.p,64,n.progressCallback);return ZE(De(i),r,t,n)}const Op="m/44'/60'/0'/0/0",r6=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),mi=2147483648,i6=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),o6="0123456789abcdef";function sf(t,e){let n="";for(;t;)n=o6[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function Am(t){const e=De(t),n=yb(xs(xs(e)),0,4),s=Bt([e,n]);return lI(s)}const Gs={};function e3(t,e,n,s){const r=new Uint8Array(37);t&mi?(it(s!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),r.set(De(s),1)):r.set(De(n));for(let o=24;o>=0;o-=8)r[33+(o>>3)]=t>>24-o&255;const i=De(xl("sha512",e,r));return{IL:i.slice(0,32),IR:i.slice(32)}}function t3(t,e){const n=e.split("/");ne(n.length>0,"invalid path","path",e),n[0]==="m"&&(ne(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let s=t;for(let r=0;r<n.length;r++){const i=n[r];if(i.match(/^[0-9]+'$/)){const o=parseInt(i.substring(0,i.length-1));ne(o<mi,"invalid path index",`path[${r}]`,i),s=s.deriveChild(mi+o)}else if(i.match(/^[0-9]+$/)){const o=parseInt(i);ne(o<mi,"invalid path index",`path[${r}]`,i),s=s.deriveChild(o)}else ne(!1,"invalid path component",`path[${r}]`,i)}return s}var Pu,Rm,to,dc;const vs=class vs extends Nm{constructor(n,s,r,i,o,a,l,c,u){super(s,u);Ze(this,Pu);ie(this,"publicKey");ie(this,"fingerprint");ie(this,"parentFingerprint");ie(this,"mnemonic");ie(this,"chainCode");ie(this,"path");ie(this,"index");ie(this,"depth");Zf(n,Gs,"HDNodeWallet"),Vn(this,{publicKey:s.compressedPublicKey});const d=yb(bl(xs(this.publicKey)),0,4);Vn(this,{parentFingerprint:r,fingerprint:d,chainCode:i,path:o,index:a,depth:l}),Vn(this,{mnemonic:c})}connect(n){return new vs(Gs,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,s){return await s6(an(this,Pu,Rm).call(this),n,{progressCallback:s})}encryptSync(n){return n6(an(this,Pu,Rm).call(this),n)}get extendedKey(){return it(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Am(Bt(["0x0488ADE4",sf(this.depth,1),this.parentFingerprint,sf(this.index,4),this.chainCode,Bt(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new uu(Gs,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const s=Yn(n,"index");ne(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~mi),s&mi&&(r+="'"));const{IR:i,IL:o}=e3(s,this.chainCode,this.publicKey,this.privateKey),a=new er(Ka((W_(o)+BigInt(this.privateKey))%i6,32));return new vs(Gs,a,this.fingerprint,Se(i),r,s,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return t3(this,n)}static fromExtendedKey(n){const s=Ft(cI(n));ne(s.length===82||Am(s.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const r=s[4],i=Se(s.slice(5,9)),o=parseInt(Se(s.slice(9,13)).substring(2),16),a=Se(s.slice(13,45)),l=s.slice(45,78);switch(Se(s.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=Se(l);return new uu(Gs,Fu(c),c,i,a,null,o,r,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new vs(Gs,new er(l.slice(1)),i,a,null,o,r,null,null)}ne(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,s,r){var o;n==null&&(n=""),s==null&&(s=Op),r==null&&(r=mo.wordlist());const i=lu.fromEntropy(_r(16),n,r);return an(o=vs,to,dc).call(o,i.computeSeed(),i).derivePath(s)}static fromMnemonic(n,s){var r;return s||(s=Op),an(r=vs,to,dc).call(r,n.computeSeed(),n).derivePath(s)}static fromPhrase(n,s,r,i){var a;s==null&&(s=""),r==null&&(r=Op),i==null&&(i=mo.wordlist());const o=lu.fromPhrase(n,s,i);return an(a=vs,to,dc).call(a,o.computeSeed(),o).derivePath(r)}static fromSeed(n){var s;return an(s=vs,to,dc).call(s,n,null)}};Pu=new WeakSet,Rm=function(){const n={address:this.address,privateKey:this.privateKey},s=this.mnemonic;return this.path&&s&&s.wordlist.locale==="en"&&s.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:s.entropy}),n},to=new WeakSet,dc=function(n,s){ne(e0(n),"invalid seed","seed","[REDACTED]");const r=De(n,"seed");ne(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const i=De(xl("sha512",r6,r)),o=new er(Se(i.slice(0,32)));return new vs(Gs,o,"0x00000000",Se(i.slice(32)),"m",0,0,s,null)},Ze(vs,to);let cu=vs;class uu extends Im{constructor(n,s,r,i,o,a,l,c,u){super(s,u);ie(this,"publicKey");ie(this,"fingerprint");ie(this,"parentFingerprint");ie(this,"chainCode");ie(this,"path");ie(this,"index");ie(this,"depth");Zf(n,Gs,"HDNodeVoidWallet"),Vn(this,{publicKey:r});const d=yb(bl(xs(r)),0,4);Vn(this,{publicKey:r,fingerprint:d,parentFingerprint:i,chainCode:o,path:a,index:l,depth:c})}connect(n){return new uu(Gs,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return it(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Am(Bt(["0x0488B21E",sf(this.depth,1),this.parentFingerprint,sf(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const s=Yn(n,"index");ne(s<=4294967295,"invalid index","index",s);let r=this.path;r&&(r+="/"+(s&~mi),s&mi&&(r+="'"));const{IR:i,IL:o}=e3(s,this.chainCode,this.publicKey,null),a=er.addPoints(o,this.publicKey,!0),l=Fu(a);return new uu(Gs,l,a,this.fingerprint,Se(i),r,s,this.depth+1,this.provider)}derivePath(n){return t3(this,n)}}class Ov{constructor(e){ie(this,"mnemonic");ie(this,"walletAddress");ie(this,"chainID");this.mnemonic=e.mnemonic,this.walletAddress=e.walletAddress,this.chainID=e.chainID||10900}generateTxID(){const e=Date.now(),n=Math.floor(Math.random()*1e6);return`tx-${e}-${n}`}async getPrivateKeyHex(){const e=cu.fromPhrase(this.mnemonic.trim(),"","m/44'/60'/0'/0/0");if(e.address.toLowerCase()!==this.walletAddress.toLowerCase())throw new Error(`Address mismatch: derived ${e.address} does not match ${this.walletAddress}`);const n=BigInt(e.privateKey),s=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(n===0n||n>=s)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const i=n.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(i))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return i}async signPayload(e){const n=await this.getPrivateKeyHex(),s=Math.floor(Date.now()/1e3);let r;e.deadline&&(r=parseInt(e.deadline,10));const i={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:s,payload:e};r!==void 0&&(i.deadline=r);const o=await We.generateSingleSignature(JSON.stringify(i),n,this.walletAddress.toLowerCase());if(!o.success||!o.signature)throw new Error(o.error||"Failed to generate signature");return o.signature}async buildCompleteMessage(e,n,s=3600){const i=Math.floor(Date.now()/1e3)+s,o=await n.getNextNonce();return{...e,owner:this.walletAddress,nonce:o,deadline:i.toString()}}buildEIP712Tx(e,n,s){const r=Math.floor(Date.now()/1e3);let i;e.deadline&&(i=parseInt(e.deadline,10));const o={txId:s||this.generateTxID(),sigType:1,threshold:1,timestamp:r,payload:e,signatures:[{signer:this.walletAddress,signature:n}]};return i!==void 0&&(o.deadline=i),o}getWalletAddress(){return this.walletAddress}getChainID(){return this.chainID}}const Lb="sys::onboard",a6="clob::change_margin_ratio",l6="clob::submit_order",Lv="clob::cancel_order",jv="bucket::close_position",c6="clob::modify_order",u6="clob::change_leverage",d6="clob::inter_transfer",h6="clob::swap",f6="bank::mint",p6="bank::extract_to_bucket",g6="bank::withdraw_from_bucket",m6="bank::bucket_transfer",x6="bank::transfer";var dt=(t=>(t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t))(dt||{});function n3(t,e){const n=t.bucket_id||"---",s=r=>r==null||r===""?0:typeof r=="string"||typeof r=="number"?e(r):0;return{bucketId:n,address:t.address||"",totalEquity:s(t.total_equity||t.dedicated_margin),dedicatedMargin:s(t.dedicated_margin),usedMargin:s(t.used_margin),availableMargin:s(t.available_margin),totalPositions:t.total_positions||0,unrealizedPnL:s(t.unrealized_pnl),leverage:typeof t.max_leverage=="string"?parseFloat(t.max_leverage):typeof t.max_leverage=="number"?t.max_leverage:0,maxLeverage:typeof t.max_leverage=="string"?parseFloat(t.max_leverage):typeof t.max_leverage=="number"?t.max_leverage:0,marginMode:t.margin_type||"CROSS",liquidationPrice:s(t.liquidation_price),riskLevel:t.risk_level||"",riskFactor:t.risk_factor||"",bucketType:t.bucket_type||"",collateralAsset:t.collateral_asset||"",lastUpdated:typeof t.last_updated=="string"?parseInt(t.last_updated,10):typeof t.last_updated=="number"?t.last_updated:0}}function b6(t){const e=t.totalEquity>0?Math.min(Math.max(t.usedMargin/t.totalEquity,0),1):0,n=t.totalEquity>0?t.usedMargin/t.totalEquity:0,s=t.marginMode==="ISOLATED"||t.marginMode==="Isolated"||t.marginMode==="ISOLATE"||t.marginMode==="isolated"?"Isolated":"Cross";return{bucketId:String(t.bucketId),marginType:s,maintenanceMargin:t.usedMargin,nominalValue:t.totalEquity,riskRatio:e,unrealizedPnL:t.unrealizedPnL,leverage:t.leverage,usedMargin:t.usedMargin,totalEquity:t.totalEquity,availableMargin:t.availableMargin,crossMarginRatio:n}}function zl(t){return t!==null&&typeof t=="object"&&typeof t.price=="number"&&typeof t.market_id=="string"&&typeof t.quantity=="number"&&typeof t.timestamp=="number"&&typeof t.is_buyer_maker=="boolean"&&typeof t.trade_id=="string"}function Lp(t){return t!==null&&typeof t=="object"&&typeof t.symbol=="string"&&typeof t.mark_price=="number"&&typeof t.timestamp=="number"}class wl{constructor(e){ie(this,"httpClient");ie(this,"infoClient");ie(this,"nonceManager");ie(this,"mnemonic");ie(this,"chainID");ie(this,"walletAddress");ie(this,"nonceCounter",null);ie(this,"signatureBuilder");this.httpClient=new mb(e.baseURL,e.maxRetries||3),this.infoClient=new pn({baseURL:e.baseURL}),this.nonceManager=new B_(this.infoClient),this.mnemonic=e.mnemonic,this.chainID=e.chainID||10900}getSignatureBuilder(){if(!this.signatureBuilder){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");this.signatureBuilder=new Ov({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}return this.signatureBuilder}getNonceProvider(){return{getNextNonce:()=>this.getNextNonce()}}async initialize(){await We.initialize();const e=await We.generateAddress(this.mnemonic,0);if(!e.success||!e.address)throw new Error(`Failed to generate wallet address: ${e.error}`);this.walletAddress=e.address,this.signatureBuilder=new Ov({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}getWalletAddress(){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");return this.walletAddress}async refreshNonceFromServer(){const e=this.getWalletAddress(),n=await this.nonceManager.getExpectedNextNonce(e,!1);this.nonceCounter=n.next_nonce,console.log("[ExchangeClient] Refreshed nonce from server",{walletAddress:e,newNonce:this.nonceCounter})}async getNextNonce(){return this.nonceCounter===null&&await this.refreshNonceFromServer(),this.nonceCounter++,this.nonceCounter.toString()}buildOrderPayload(e){const n=ut(e.price),s=ut(e.quantity),r={action:l6,marketId:e.marketId,side:e.side.toUpperCase(),orderType:e.orderType.toUpperCase(),price:n,quantity:s};return e.leverage&&(r.leverage=e.leverage),e.takeProfit&&(r.takeProfit=e.takeProfit),e.stopLoss&&(r.stopLoss=e.stopLoss),r}async placeOrder(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.side||e.side.toUpperCase()!=="BUY"&&e.side.toUpperCase()!=="SELL")throw new Error("side must be BUY or SELL");if(!e.orderType||e.orderType.toUpperCase()!=="LIMIT"&&e.orderType.toUpperCase()!=="MARKET")throw new Error("orderType must be LIMIT or MARKET");if(!e.price||e.price<=0)throw new Error("price must be positive");if(!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");this.walletAddress||await this.initialize();const n=this.buildOrderPayload(e),s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=Math.floor(Date.now()/1e3)-5,a=`order-${Date.now()}-${Math.floor(Math.random()*1e6)}`,l=e.side.toUpperCase()==="BUY",c={address:this.getWalletAddress(),asset_pair:e.marketId,market_id:e.marketId,price:r.price,size:r.quantity,is_buy:l,order_type:e.orderType.toUpperCase(),timestamp:o,client_order_id:a,nonce:r.nonce,deadline:r.deadline,signature:i,time_in_force:e.timeInForce||"GTC"};return e.leverage&&(c.leverage=e.leverage),e.takeProfit&&(c.take_profit=e.takeProfit),e.stopLoss&&(c.stop_loss=e.stopLoss),e.postOnly&&(c.post_only=!0),e.hidden&&(c.hidden=!0),e.displayQuantity&&(c.display_quantity=e.displayQuantity),e.reduceOnly&&(c.reduce_only=!0),(await this.httpClient.post("/clob/v1/order",c)).body}async cancelOrder(e){var c,u,d,f,p,m;if(!e.orderId||e.orderId==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: orderId is empty",e),new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: marketId is empty",e),new Error("marketId cannot be empty");console.log("[ExchangeClient.cancelOrder] Input validation passed",{orderId:e.orderId,marketId:e.marketId}),this.walletAddress?console.log("[ExchangeClient.cancelOrder] Using existing wallet",{walletAddress:this.walletAddress}):(console.log("[ExchangeClient.cancelOrder] Wallet not initialized, initializing now..."),await this.initialize(),console.log("[ExchangeClient.cancelOrder] Wallet initialized",{walletAddress:this.walletAddress}));const n=this.getWalletAddress(),s={action:Lv,orderId:e.orderId,marketId:e.marketId,address:n};console.log("[ExchangeClient.cancelOrder] Payload built",{payload:s,action:Lv});const r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider());console.log("[ExchangeClient.cancelOrder] Complete message built",{action:i.action,orderId:i.orderId,marketId:i.marketId,address:i.address,owner:i.owner,nonce:i.nonce,deadline:i.deadline,hasAllFields:!!(i.action&&i.orderId&&i.marketId&&i.owner&&i.nonce&&i.deadline)}),console.log("[ExchangeClient.cancelOrder] Generating signature...");const o=await r.signPayload(i);console.log("[ExchangeClient.cancelOrder] Signature generated",{signatureLength:o==null?void 0:o.length,signaturePrefix:(o==null?void 0:o.substring(0,10))+"..."});const a=r.buildEIP712Tx(i,o);console.log("[ExchangeClient.cancelOrder] EIP712Tx built",{eip712Tx:{txId:a.txId,sigType:a.sigType,threshold:a.threshold,timestamp:a.timestamp,deadline:a.deadline,payloadAction:(c=a.payload)==null?void 0:c.action,payloadOrderId:(u=a.payload)==null?void 0:u.orderId,payloadMarketId:(d=a.payload)==null?void 0:d.marketId,signaturesCount:(f=a.signatures)==null?void 0:f.length,signer:(m=(p=a.signatures)==null?void 0:p[0])==null?void 0:m.signer}});const l=this.httpClient.getBaseURL?this.httpClient.getBaseURL():"unknown";console.log("[ExchangeClient.cancelOrder] Submitting to /router/v1/tx endpoint...",{endpoint:"/router/v1/tx",baseURL:l,fullURL:`${l}/router/v1/tx`});try{const x=await this.httpClient.post("/router/v1/tx",a);return console.log("[ExchangeClient.cancelOrder] API response received",{status:x.statusCode,hasBody:!!x.body,responseBody:x.body,orderId:e.orderId}),x.body}catch(x){if(xb(x)){console.log("[ExchangeClient.cancelOrder] Nonce error detected, refreshing nonce from server",{error:x instanceof Error?x.message:String(x),orderId:e.orderId}),await this.refreshNonceFromServer();const w=this.getSignatureBuilder(),g=await w.buildCompleteMessage(s,this.getNonceProvider()),b=await w.signPayload(g),v=w.buildEIP712Tx(g,b);console.log("[ExchangeClient.cancelOrder] Retrying with refreshed nonce",{newNonce:g.nonce});const y=await this.httpClient.post("/router/v1/tx",v);return console.log("[ExchangeClient.cancelOrder] Retry successful",{status:y.statusCode,responseBody:y.body}),y.body}throw console.error("[ExchangeClient.cancelOrder] API call failed",{error:x,errorMessage:x instanceof Error?x.message:String(x),errorStack:x instanceof Error?x.stack:void 0,orderId:e.orderId,marketId:e.marketId,walletAddress:this.walletAddress}),x}}async modifyOrder(e){if(!e.orderId||e.orderId==="")throw new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.newPrice||e.newPrice<=0)throw new Error("newPrice must be positive");if(!e.newQuantity||e.newQuantity<=0)throw new Error("newQuantity must be positive");this.walletAddress||await this.initialize();const n={action:c6,orderId:e.orderId,marketId:e.marketId,newPrice:ut(e.newPrice),newQuantity:ut(e.newQuantity)},s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async changeLeverage(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newLeverage===void 0)throw new Error("newLeverage must be provided");this.walletAddress||await this.initialize();const n={action:u6,marketId:e.marketId,newLeverage:ut(e.newLeverage),address:this.getWalletAddress()};e.leverageType&&(n.leverageType=e.leverageType),e.bucketId&&(n.bucketId=e.bucketId),e.reason&&(n.reason=e.reason);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async closePosition(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=Math.floor(Date.now()/1e3),r=s+300,i=await this.getNextNonce();if(!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");if(!e.marketPrice||e.marketPrice<=0)throw new Error("marketPrice must be positive");const o=ut(e.quantity).toString(),a=ut(e.marketPrice).toString(),l={action:jv,address:n,marketId:e.marketId,closeSize:o,marketPrice:a,nonce:i,deadline:r},u=await this.getSignatureBuilder().signPayload(l),d={address:n,market_id:e.marketId,close_size:o,market_price:a,timestamp:s,sign_type:1,nonce:i.toString(),chain_id:this.chainID.toString(),deadline:r.toString(),signature:u};return(await this.httpClient.post("/bucket/v1/position/close",d)).body}async closePositionEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(this.walletAddress||await this.initialize(),!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");if(!e.marketPrice||e.marketPrice<=0)throw new Error("marketPrice must be positive");const n=ut(e.quantity),s=ut(e.marketPrice),r={action:jv,address:this.getWalletAddress(),marketId:e.marketId,closeSize:n,marketPrice:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=i.buildEIP712Tx(o,a);return(await this.httpClient.post("/router/v1/tx",l)).body}async swap(e){if(!e.fromToken||e.fromToken==="")throw new Error("fromToken cannot be empty");if(!e.toToken||e.toToken==="")throw new Error("toToken cannot be empty");if(!e.amountIn||e.amountIn<=0)throw new Error("amountIn must be positive");if(!e.minAmountOut||e.minAmountOut<=0)throw new Error("minAmountOut must be positive");this.walletAddress||await this.initialize();const n={action:h6,fromToken:e.fromToken,toToken:e.toToken,amountIn:ut(e.amountIn),minAmountOut:ut(e.minAmountOut)};e.path&&e.path.length>0&&(n.path=e.path);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async changeMarginRatioEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const n={action:a6,marketId:e.marketId,address:this.getWalletAddress()};e.bucketId&&(n.bucketId=e.bucketId);const s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async internTransferEIP712Tx(e){if(!e.fromAccount||e.fromAccount==="")throw new Error("fromAccount cannot be empty");if(!e.toAccount||e.toAccount==="")throw new Error("toAccount cannot be empty");if(!e.tokenAddress||e.tokenAddress==="")throw new Error("tokenAddress cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n={action:d6,fromAccount:e.fromAccount,toAccount:e.toAccount,amount:ut(e.amount),tokenAddress:e.tokenAddress,address:this.getWalletAddress()},s=this.getSignatureBuilder(),r=await s.buildCompleteMessage(n,this.getNonceProvider()),i=await s.signPayload(r),o=s.buildEIP712Tx(r,i);return(await this.httpClient.post("/router/v1/tx",o)).body}async bucketTransfer(e){if(!e.fromBucketId||e.fromBucketId.trim()==="")throw new Error("fromBucketId cannot be empty");if(!e.toBucketId||e.toBucketId.trim()==="")throw new Error("toBucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=ut(e.amount),r={action:m6,fromBucketId:e.fromBucketId,toBucketId:e.toBucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,source_bucket_id:e.fromBucketId,target_bucket_id:e.toBucketId,amount:s,reason:"sdk_transfer",timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bucket/v1/bucket/transfer",c)).body}async extractToBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=ut(e.amount),r={action:p6,bucketId:e.bucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/extract-to-bucket",c)).body}async createBucket(){}async withdrawFromBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=this.getWalletAddress(),s=ut(e.amount),r={action:g6,bucketId:e.bucketId,asset:e.assetId,amount:s},i=this.getSignatureBuilder(),o=await i.buildCompleteMessage(r,this.getNonceProvider()),a=await i.signPayload(o),l=Math.floor(Date.now()/1e3),c={address:n,bucket_id:e.bucketId,asset:e.assetId,amount:s,timestamp:l,nonce:o.nonce,deadline:o.deadline,signature:a,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/withdraw-from-bucket",c)).body}async bankMint(e){if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=ut(e.amount),s={action:f6,asset:e.assetId,amount:n},r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider()),o=await r.signPayload(i),a=r.buildEIP712Tx(i,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async bankTransfer(e){if(!e.to||e.to.trim()==="")throw new Error("to address cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const n=ut(e.amount),s={action:x6,to:e.to,asset:e.assetId,amount:n},r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(s,this.getNonceProvider()),o=await r.signPayload(i),a=r.buildEIP712Tx(i,o);return(await this.httpClient.post("/router/v1/tx",a)).body}}class y6{constructor(e){ie(this,"ws",null);ie(this,"state",dt.Disconnected);ie(this,"handlers",new Map);ie(this,"reconnectTimer",null);ie(this,"reconnectAttempts",0);ie(this,"config");ie(this,"originalConfig");ie(this,"pingInterval",null);ie(this,"stateChangeHandlers",new Set);this.originalConfig=e;const n=this.convertHTTPToWebSocketURL(e.url);this.config={url:n,authToken:e.authToken||"",walletAddress:e.walletAddress||"",deviceID:e.deviceID||"",reconnectInterval:e.reconnectInterval||5e3,maxReconnectAttempts:e.maxReconnectAttempts||10}}convertHTTPToWebSocketURL(e){if(e.startsWith("ws://")||e.startsWith("wss://")){if(e.includes("router.morpheum.io")){const n=new URL(e);if(!n.pathname||n.pathname==="/")return n.pathname="/websocket",n.toString()}return e}if(e.includes("localhost")||e.includes("127.0.0.1")){const n=e.match(/:(\d+)/);return`ws://localhost:${n?n[1]:"8080"}/websocket`}if(e.startsWith("http://")){const n=e.replace("http://","ws://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(e.startsWith("https://")){const n=e.replace("https://","wss://");return n.includes("/websocket")?n:n.endsWith("/")?`${n}websocket`:`${n}/websocket`}if(!e||e.trim()===""||e.includes("router.morpheum.io"))return"wss://router.morpheum.io/websocket";try{const n=new URL(e.startsWith("http")?e:`https://${e}`),s=n.protocol==="https:"?"wss:":"ws:",r=n.pathname&&n.pathname!=="/"?n.pathname:"",i=r.endsWith("/websocket")?r:`${r}/websocket`;return`${s}//${n.host}${i}`}catch{return console.warn(`Failed to parse URL ${e}, defaulting to router.morpheum.io/websocket`),"wss://router.morpheum.io/websocket"}}getConnectionURL(){const e=[];this.config.authToken&&e.push(`token=${encodeURIComponent(this.config.authToken)}`),"walletAddress"in this.originalConfig&&this.originalConfig.walletAddress!==void 0&&e.push(`wallet=${encodeURIComponent(this.originalConfig.walletAddress||"")}`),this.config.deviceID&&e.push(`device_id=${encodeURIComponent(this.config.deviceID)}`);const n=this.config.url.includes("?")?"&":"?";return e.length>0?`${this.config.url}${n}${e.join("&")}`:this.config.url}async connect(){if(!(this.state===dt.Connected||this.state===dt.Connecting))return this.setState(dt.Connecting),new Promise((e,n)=>{let s=!1,r=!1,i=null;const o=a=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),this.setState(dt.Disconnected),n(a))};try{const a=this.getConnectionURL();console.log("Connecting to WebSocket:",a);const l=new WebSocket(a);i=window.setTimeout(()=>{!s&&!r&&(l.close(),o(new Error(`WebSocket connection timeout after 10 seconds. Unable to connect to ${a}. Check if the server is running and accessible.`)))},1e4),l.onopen=()=>{if(i!==null&&(clearTimeout(i),i=null),s=!0,this.ws=l,this.setState(dt.Connected),this.reconnectAttempts=0,this.config.authToken)try{const c={type:"auth",token:this.config.authToken};this.config.deviceID&&(c.device_id=this.config.deviceID),l.send(JSON.stringify(c))}catch(c){console.warn("Failed to send auth message after connection:",c)}this.startPing(),e()},l.onmessage=c=>{try{const u=JSON.parse(c.data);this.handleMessage(u)}catch(u){console.error("Failed to parse WebSocket message:",u)}},l.onerror=c=>{console.error("WebSocket error event:",c)},l.onclose=c=>{if(i!==null&&(clearTimeout(i),i=null),this.ws=null,this.stopPing(),!s&&!r){const u=c.code,d=c.reason||"Unknown reason",f=c.wasClean;let p=`WebSocket connection failed. Close code: ${u}`;u===1006?p=`WebSocket connection failed (abnormal closure, code ${u}). Unable to connect to ${a}. Possible causes: Server is not running, network issue, firewall blocking connection, or incorrect URL.`:u===1002?p=`WebSocket protocol error (code ${u}). The server may not support WebSocket protocol or there's a protocol mismatch.`:u===1003?p=`WebSocket unsupported data type (code ${u}).`:u===1008?p=`WebSocket connection closed due to policy violation (code ${u}): ${d}`:u===1011?p=`WebSocket server error (code ${u}): ${d}`:u===1e3?p=`WebSocket connection closed normally (code ${u}) but before opening.`:d&&d!=="Unknown reason"&&(p+=` Reason: ${d}`),!f&&u===1006&&(p+=" This usually indicates the connection was refused or the server is unreachable."),o(new Error(p))}else s&&(this.setState(dt.Disconnected),this.scheduleReconnect())}}catch(a){i!==null&&(clearTimeout(i),i=null);const l=a instanceof Error?a.message:String(a);o(new Error(`Failed to create WebSocket connection: ${l}`))}})}disconnect(){this.cancelReconnect(),this.stopPing(),this.ws&&(this.ws.close(),this.ws=null),this.handlers.clear(),this.stateChangeHandlers.clear(),this.setState(dt.Disconnected)}send(e){if(this.state!==dt.Connected||!this.ws)throw new Error("WebSocket not connected");this.ws.send(JSON.stringify(e))}on(e,n){this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(n)}off(e,n){if(!n){this.handlers.delete(e);return}const s=this.handlers.get(e);if(s){const r=s.indexOf(n);r>-1&&s.splice(r,1)}}getState(){return this.state}isConnected(){return this.state===dt.Connected}setState(e){const n=this.state;this.state=e,n!==e&&this.stateChangeHandlers.forEach(s=>{try{s(e)}catch(r){console.error("Error in state change handler:",r)}})}onStateChange(e){return this.stateChangeHandlers.add(e),()=>{this.stateChangeHandlers.delete(e)}}handleMessage(e){let n;if(typeof e.type=="string")if(e.type==="data")if(typeof e.channel=="string")n=e.channel;else{console.error("Missing channel in data message");return}else e.type==="error"?(n="error",e.error&&console.error("WebSocket server error:",{code:e.error.code,message:e.error.message,details:e.error.details})):e.type==="ack"?n="ack":e.type==="pong"?n="pong":n=e.type;else typeof e.event=="string"?n=e.event:n="message";const s=this.handlers.get(n)||[],r=this.handlers.get("*")||[];s.forEach(i=>{try{i(e)}catch(o){console.error(`Error in handler for ${n}:`,o)}}),n!=="error"&&r.forEach(i=>{try{i(e)}catch(o){console.error("Error in wildcard handler:",o)}})}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}this.reconnectAttempts++,this.setState(dt.Reconnecting),this.reconnectTimer=window.setTimeout(()=>{this.connect().catch(e=>{console.error("Reconnection failed:",e)})},this.config.reconnectInterval)}cancelReconnect(){this.reconnectTimer!==null&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectAttempts=0}startPing(){this.pingInterval=window.setInterval(()=>{this.ws&&this.state===dt.Connected&&this.send({type:"ping"})},3e4)}stopPing(){this.pingInterval!==null&&(clearInterval(this.pingInterval),this.pingInterval=null)}setAuthToken(e,n,s){this.config.authToken=e,this.config.walletAddress=n,this.config.deviceID=s,this.originalConfig.authToken=e,this.originalConfig.walletAddress=n,this.originalConfig.deviceID=s,console.log(`Auth set: address=${n}, device=${s}`)}updateAuth(e,n,s){e!==void 0&&(this.config.authToken=e,this.originalConfig.authToken=e),n!==void 0&&(this.config.walletAddress=n,this.originalConfig.walletAddress=n),s!==void 0&&(this.config.deviceID=s,this.originalConfig.deviceID=s),this.isConnected()&&(this.disconnect(),this.connect())}}class Mo{constructor(e){ie(this,"wsClient");ie(this,"subscriptions",new Map);ie(this,"lastPriceWrappedCallbacks",new Map);ie(this,"wrappedCallbacks",new Map);ie(this,"multiFeedSubscriptions",new Map);ie(this,"multiFeedHandlerRegistered",!1);this.wsClient=new y6({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID})}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.lastPriceWrappedCallbacks.clear(),this.wrappedCallbacks.clear(),this.multiFeedSubscriptions.clear(),this.multiFeedHandlerRegistered=!1}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,n,s){this.wsClient.setAuthToken(e,n,s)}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(n){return console.error("Failed to parse router data field:",n),null}return e}extractRouterData(e){if(e.type==="data"&&e.data){const n=this.parseRouterData(e.data);return n||console.warn("[SubscriptionClient] Failed to parse router data:",e.data),n}return e.type==="error"&&e.error?(console.error("WebSocket error response:",e.error),null):(e.type==="ack"||(e.type!=="data"?console.debug("[SubscriptionClient] Unexpected message type:",e.type,"Full message:",e):e.data||console.warn("[SubscriptionClient] Message type is 'data' but missing data field:",e)),null)}subscribeOrderbook(e,n,s=!0){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="orderbook";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&(s&&l.bids&&Array.isArray(l.bids)&&(l.bids=l.bids.map(([c,u])=>[ke(c),ke(u)])),s&&l.asks&&Array.isArray(l.asks)&&(l.asks=l.asks.map(([c,u])=>[ke(c),ke(u)])),n(l))};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeOrderbook(e,n){var i,o;const s="orderbook",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orderbook",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTrades(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="trades";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"trades",params:{market_id:e.toString()}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeTrades(e,n){var i,o;const s="trades",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"trades",params:{market_id:e.toString()}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTicker(e,n){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="moniker",r="ticker";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=a=>{const l=this.extractRouterData(a);l&&n(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(n,i),this.wsClient.on(s,i);try{this.wsClient.send({type:"subscribe",channel:s,params:{market_id:e.toString()}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(n);const l=this.subscriptions.get(r)||[],c=l.indexOf(n);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTicker(e,n){var o,a;const s="ticker",r="moniker",i=this.subscriptions.get(s)||[];if(n){const l=i.indexOf(n);if(l>-1){i.splice(l,1),this.subscriptions.set(s,i);const c=(o=this.wrappedCallbacks.get(s))==null?void 0:o.get(n);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(s).delete(n))}}else{const l=this.wrappedCallbacks.get(s);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((a=this.subscriptions.get(s))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:r,params:{market_id:e.toString()}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeUserUpdates(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="positions";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"positions",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeUserUpdates(e){var r,i;const n="positions",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"positions"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeLastPrice(e,n,s=!0){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const r="last_price";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],n]);const i=o=>{console.debug("[SubscriptionClient] last_price message received:",o);const a=this.extractRouterData(o);if(!a){console.warn("[SubscriptionClient] Failed to extract trade data from message:",o);return}if(console.debug("[SubscriptionClient] Extracted trade data:",a),!a.price){console.warn("[SubscriptionClient] Trade data missing price field:",a);return}s&&(a.price&&(a.price=ke(a.price)),a.quantity&&(a.quantity=ke(a.quantity))),console.debug("[SubscriptionClient] Calling callback with trade data:",a),n(a)};this.lastPriceWrappedCallbacks.set(n,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){this.lastPriceWrappedCallbacks.delete(n);const a=this.subscriptions.get(r)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(r,a)),o}}unsubscribeLastPrice(e,n){var i;const s="last_price",r=this.subscriptions.get(s)||[];if(n){const o=r.indexOf(n);if(o>-1){r.splice(o,1),this.subscriptions.set(s,r);const a=this.lastPriceWrappedCallbacks.get(n);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(n))}}else r.forEach(o=>{const a=this.lastPriceWrappedCallbacks.get(o);a&&(this.wsClient.off(s,a),this.lastPriceWrappedCallbacks.delete(o))}),this.subscriptions.delete(s);if(((i=this.subscriptions.get(s))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"last_price",params:{market_id:e.toString()}})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeFundingRate(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="funding_rate";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"funding_rate",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeFundingRate(e,n){var i,o;const s="funding_rate",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"funding_rate",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeBuckets(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="buckets";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"buckets",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBuckets(e){var r,i;const n="buckets",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"buckets"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeDeviation(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="deviation";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"deviation",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeDeviation(e,n){var i,o;const s="deviation",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"deviation",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeIndexPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="index_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"index_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeIndexPrice(e,n){var i,o;const s="index_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"index_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeKline(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n)throw new Error("Interval is required for kline subscription");const r="kline";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeKline(e,n,s){var o,a;const r="kline",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"kline",params:{market_id:e.toString(),interval:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMarkPrice(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="mark_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"mark_price",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribeMarkPrice(e,n){var i,o;const s="mark_price",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"mark_price",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribePriceFeed(e,n){var i;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s="price_feed";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],n]);const r=o=>{const a=this.extractRouterData(o);a&&n(a)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(n,r),this.wsClient.on(s,r);try{this.wsClient.send({type:"subscribe",channel:"price_feed",params:{symbol:e}})}catch(o){(i=this.wrappedCallbacks.get(s))==null||i.delete(n);const a=this.subscriptions.get(s)||[],l=a.indexOf(n);throw l>-1&&(a.splice(l,1),this.subscriptions.set(s,a)),o}}unsubscribePriceFeed(e,n){var i,o;const s="price_feed",r=this.subscriptions.get(s)||[];if(n){const a=r.indexOf(n);if(a>-1){r.splice(a,1),this.subscriptions.set(s,r);const l=(i=this.wrappedCallbacks.get(s))==null?void 0:i.get(n);l&&(this.wsClient.off(s,l),this.wrappedCallbacks.get(s).delete(n))}}else{const a=this.wrappedCallbacks.get(s);a&&(a.forEach(l=>{this.wsClient.off(s,l)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((o=this.subscriptions.get(s))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"price_feed",params:{symbol:e}})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTWAP(e,n,s){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!n||n<=0)throw new Error("Window size must be a positive number");const r="twap";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],s]);const i=a=>{const l=this.extractRouterData(a);l&&s(l)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(s,i),this.wsClient.on(r,i);try{this.wsClient.send({type:"subscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(a){(o=this.wrappedCallbacks.get(r))==null||o.delete(s);const l=this.subscriptions.get(r)||[],c=l.indexOf(s);throw c>-1&&(l.splice(c,1),this.subscriptions.set(r,l)),a}}unsubscribeTWAP(e,n,s){var o,a;const r="twap",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);if(l>-1){i.splice(l,1),this.subscriptions.set(r,i);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(s);c&&(this.wsClient.off(r,c),this.wrappedCallbacks.get(r).delete(s))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(r,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"twap",params:{symbol:e,window_size:n}})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeMultiFeed(e,n,s,r){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const i="multi_feed";if(!this.multiFeedHandlerRegistered){const o=a=>{if(a.type==="data"&&a.channel==="multi_feed"&&a.sub_channel){const l=a.sub_channel,c=this.multiFeedSubscriptions.get(l)||[],u=this.subscriptions.get(i)||[];let d=a.data;if(typeof d=="string")try{d=JSON.parse(d)}catch(f){console.error("Failed to parse multi-feed data field:",f);return}d&&(c.forEach(f=>{try{f(d)}catch(p){console.error(`Error in multi-feed sub-channel callback for ${l}:`,p)}}),u.forEach(f=>{try{f({sub_channel:l,data:d})}catch(p){console.error("Error in multi-feed callback:",p)}}))}};this.wsClient.on(i,o),this.multiFeedHandlerRegistered=!0}this.subscriptions.has(i)||this.subscriptions.set(i,[]),this.subscriptions.get(i).push(s);try{const o={market_id:e.toString(),symbol:n};r&&(o.interval=r),this.wsClient.send({type:"subscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed",params:o})}catch(o){const a=this.subscriptions.get(i)||[],l=a.indexOf(s);throw l>-1&&(a.splice(l,1),this.subscriptions.set(i,a)),o}}subscribeMultiFeedSubChannel(e,n,s,r,i){if(this.multiFeedSubscriptions.has(s)||this.multiFeedSubscriptions.set(s,[]),this.multiFeedSubscriptions.get(s).push(r),(this.subscriptions.get("multi_feed")||[]).length===0){const a=()=>{};this.subscribeMultiFeed(e,n,a,i)}}unsubscribeMultiFeed(e,n,s){var o,a;const r="multi_feed",i=this.subscriptions.get(r)||[];if(s){const l=i.indexOf(s);l>-1&&(i.splice(l,1),this.subscriptions.set(r,i))}else this.subscriptions.delete(r);if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.multiFeedSubscriptions.clear(),((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",id:`multi_feed_${e}_${n}`,channel:"multi_feed"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}unsubscribeMultiFeedSubChannel(e,n){const s=this.multiFeedSubscriptions.get(e)||[];if(n){const r=s.indexOf(n);r>-1&&(s.splice(r,1),s.length===0?this.multiFeedSubscriptions.delete(e):this.multiFeedSubscriptions.set(e,s))}else this.multiFeedSubscriptions.delete(e)}subscribeBalances(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="balances";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"balances",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeBalances(e){var r,i;const n="balances",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"balances"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeOrders(e){var r;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const n="orders";this.subscriptions.set(n,[...this.subscriptions.get(n)||[],e]);const s=i=>{const o=this.extractRouterData(i);o&&e(o)};this.wrappedCallbacks.has(n)||this.wrappedCallbacks.set(n,new Map),this.wrappedCallbacks.get(n).set(e,s),this.wsClient.on(n,s);try{this.wsClient.send({type:"subscribe",channel:"orders",params:{}})}catch(i){(r=this.wrappedCallbacks.get(n))==null||r.delete(e);const o=this.subscriptions.get(n)||[],a=o.indexOf(e);throw a>-1&&(o.splice(a,1),this.subscriptions.set(n,o)),i}}unsubscribeOrders(e){var r,i;const n="orders",s=this.subscriptions.get(n)||[];if(e){const o=s.indexOf(e);if(o>-1){s.splice(o,1),this.subscriptions.set(n,s);const a=(r=this.wrappedCallbacks.get(n))==null?void 0:r.get(e);a&&(this.wsClient.off(n,a),this.wrappedCallbacks.get(n).delete(e))}}else{const o=this.wrappedCallbacks.get(n);o&&(o.forEach(a=>{this.wsClient.off(n,a)}),this.wrappedCallbacks.delete(n)),this.subscriptions.delete(n)}if(((i=this.subscriptions.get(n))==null?void 0:i.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orders"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}}async function w6(t,e,n,s,r){const i=cu.fromPhrase(t.trim(),"","m/44'/60'/0'/0/0");if(i.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${i.address} does not match provided ${e}`);let o;try{o=new er(i.privateKey)}catch(y){throw new Error(`Invalid private key: cannot create signing key - ${y.message}`)}const a=Fu(o.publicKey);if(a.toLowerCase()!==e.toLowerCase())throw new Error(`Private key validation failed: derived address ${a} does not match ${e}`);const l=BigInt(i.privateKey),c=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(l===0n||l>=c)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const d=l.toString(16).toLowerCase().padStart(64,"0"),f=De("0x"+d);if(f.length!==32)throw new Error(`Invalid private key: expected 32 bytes, got ${f.length}`);if(f.every(y=>y===0))throw new Error("Invalid private key: cannot be zero");const m=BigInt("0x"+d);if(m!==l)throw new Error(`Private key encoding error: bytes do not match BigInt value. Original: ${l.toString(16)}, Reconstructed: ${m.toString(16)}`);const x=d;if(x.length!==64)throw new Error(`Invalid private key format: expected exactly 64 hex chars, got ${x.length}. This should never happen with a valid 32-byte private key.`);if(!/^[0-9a-f]{64}$/.test(x))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");const w=x,g={action:Lb,owner:e.toLowerCase(),nonce:n,timestamp:s,deadline:r},b={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:s,payload:g,deadline:parseInt(r,16)};console.log("[Onboard] Signing EIP-712 typed data with generateSingleSignature:",b),console.log("[Onboard] Private key format validated:",{length:w.length,format:"64 lowercase hex chars (no 0x prefix) - matches Go's hex.EncodeToString",preview:`${w.substring(0,8)}...${w.substring(56)}`,isValidSecp256k1:!0,withinCurveOrder:l<c,notZero:l!==0n,bytesLength:f.length,fullHex:w,firstByte:w.substring(0,2),lastByte:w.substring(62,64)}),console.log("[Onboard] Calling WASM GenerateSingleSignature with:",{txJSONLength:JSON.stringify(b).length,privateKeyHexLength:w.length,privateKeyHexPreview:w,signerAddress:e.toLowerCase()});const v=await We.generateSingleSignature(JSON.stringify(b),w,e.toLowerCase());if(console.log(v),!v.success||!v.signature)throw new Error(v.error||"Failed to generate signature");return console.log("[Onboard] signature:",v.signature),v.signature}async function v6(t){var e,n;try{const s=await w6(t.mnemonic,t.walletAddress,t.message.nonce,t.message.timestamp,t.message.deadline);console.log("[Onboard] Signature generated successfully, length:",s.length);const r={address:t.walletAddress,signature:s,nonce:t.message.nonce,timestamp:t.timestamp,deadline:t.message.deadline,action:Lb};t.username&&(r.username=t.username),t.referralCode&&(r.referral_code=t.referralCode),console.log("[Onboard] Request body:",{...r,signature:s.substring(0,20)+"..."});const o=await new mb(t.baseURL).post("/auth/v1/onboard",r);if(o.statusCode===200&&o.body){const a=o.body.access_token||o.body.authToken||o.body.token||o.body.accessToken,l=o.body.refresh_token||o.body.refreshToken,c=o.body.expires_at||o.body.expiresAt||(o.body.expires_in?t.timestamp+o.body.expires_in:void 0);return a?{success:!0,authToken:a,refreshToken:l,expiresAt:c}:{success:!1,error:"Response missing authToken field"}}else{const a=((e=o.body)==null?void 0:e.message)||((n=o.body)==null?void 0:n.error)||`HTTP ${o.statusCode}: ${o.body}`,l=new Error(a);throw l.responseBody=o.body,l.statusCode=o.statusCode,l}}catch(s){throw s}}const jb={auth:{maxRetries:4,baseDelay:500,maxDelay:3e3,jitter:!0,multiplier:2},http:{maxRetries:3,baseDelay:100,maxDelay:5e3,jitter:!0,multiplier:2},nonce:{maxRetries:5,baseDelay:200,maxDelay:2e3,jitter:!0,multiplier:1.5}};function k6(t,e){let n=t.baseDelay*Math.pow(t.multiplier,e);if(n>t.maxDelay&&(n=t.maxDelay),t.jitter){const s=n*.25*Math.random();n+=s}return Math.floor(n)}function S6(t){return new Promise(e=>setTimeout(e,t))}async function u0(t,e,n=()=>!0){let s;for(let r=0;r<=t.maxRetries;r++)try{return await e()}catch(i){if(s=i,!await Promise.resolve(n(i)))throw i;if(r>=t.maxRetries)break;const a=k6(t,r);await S6(a)}throw new Error(`Operation failed after ${t.maxRetries+1} attempts: ${(s==null?void 0:s.message)||s}`)}async function s3(t,e,n,s){try{We.isReady()||await We.initialize();const r=await We.generateAddress(t,0);if(!r.success||!r.address)return{success:!1,error:`Failed to generate address: ${r.error}`};const i=r.address.toLowerCase(),o=new pn({baseURL:e}),a=new B_(o);let l=null;try{return await u0(jb.auth,async()=>{console.log(`[Onboard] Attempt starting - currentNonce: ${l}`),l===null?(l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] First attempt: queried server, using next nonce: ${l}`)):console.log(`[Onboard] Retry attempt: using incremented nonce ${l} from previous failure`);let u=0;const d=10;for(;u<d;)try{await a.validateNonce(i,l,!0);break}catch(w){if(u++,w.message.includes("already pending")||w.message.includes("already used")){if(l=l+1,console.log(`[Onboard] Nonce ${l-1} already pending, incrementing to ${l}`),u>=d)throw new Error(`Failed to find available nonce after ${d} attempts`)}else throw w}const f=Math.floor(Date.now()/1e3),p=f+3600,m={action:Lb,owner:i,nonce:tv(l),timestamp:f,deadline:tv(p)};let x;try{x=await v6({mnemonic:t,walletAddress:i,message:m,baseURL:e,username:n,referralCode:s,timestamp:f})}catch(w){if(l!==null){const g=l;try{await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Rejected nonce ${g}, incremented to nonce ${l} (will use on retry)`)}catch(b){console.warn("[Onboard] Failed to reject nonce after thrown error:",b),l=l+1,console.log(`[Onboard] Incremented nonce to ${l} (reject failed but incrementing anyway)`)}}else console.warn("[Onboard] Error thrown but currentNonce is null, cannot reject/increment");throw w.currentNonce=l,w}if(!x.success){if(l!==null){const g=l;await a.rejectNonce(i,l,!0),l=l+1,console.log(`[Onboard] Request failed with nonce ${g}, rejected and incremented to ${l} (will keep incrementing until it works)`)}const w=new Error(x.error||"Onboarding failed");throw w.onboardResult=x,w}return l!==null&&await a.commitNonce(i,l,!0),x},async u=>{var g,b,v;const d=String(u).toLowerCase(),f=((g=u==null?void 0:u.message)==null?void 0:g.toLowerCase())||d,p=(u==null?void 0:u.responseBody)||(u==null?void 0:u.onboardResult),m=((b=p==null?void 0:p.error)==null?void 0:b.toLowerCase())||((v=p==null?void 0:p.message)==null?void 0:v.toLowerCase())||"";if(`${f} ${d} ${m}`.toLowerCase().includes("nonce already pending")){if(l!==null){const y=l;l=l+1,console.log(`[Onboard] Off-chain operation: nonce ${y} already pending/used, incrementing to ${l} (server will validate)`)}else try{l=(await a.getExpectedNextNonce(i,!1)).next_nonce,console.log(`[Onboard] currentNonce was null, queried server for starting nonce: ${l}`)}catch(y){console.warn("[Onboard] Failed to query server nonce:",y),l=1}return!0}return xb(u)?(console.log('[Onboard] Nonce-consuming error detected (not "already pending"), clearing currentNonce to force re-query'),l=null,!0):!["failed to generate address","address mismatch","invalid mnemonic"].some(y=>d.includes(y))})}catch(c){if(l!==null)try{await a.rejectNonce(i,l,!0)}catch(u){console.warn("[Onboard] Failed to reject nonce during cleanup:",u)}return{success:!1,error:(c==null?void 0:c.message)||"Unknown error during onboarding"}}}catch(r){return{success:!1,error:(r==null?void 0:r.message)||"Unknown error during onboarding"}}}const C6=Object.freeze(Object.defineProperty({__proto__:null,onboardAndGetAuthToken:s3},Symbol.toStringTag,{value:"Module"})),Fv=t=>{let e;const n=new Set,s=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(p=>p(e,f))}},r=()=>e,a={setState:s,getState:r,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(s,r,a);return a},_6=t=>t?Fv(t):Fv,E6=t=>t;function P6(t,e=E6){const n=oe.useSyncExternalStore(t.subscribe,oe.useCallback(()=>e(t.getState()),[t,e]),oe.useCallback(()=>e(t.getInitialState()),[t,e]));return oe.useDebugValue(n),n}const Bv=t=>{const e=_6(t),n=s=>P6(e,s);return Object.assign(n,e),n},T6=t=>t?Bv(t):Bv,mt=T6((t,e)=>({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,selectedMarketId:null,loadingMarkets:!1,loadingOrderbooks:new Set,loadingTickers:new Set,loadingTrades:new Set,errors:new Map,setMarkets:n=>{const s=new Map,r=new Map;n.forEach(a=>{s.set(a.id,a),a.symbol&&r.set(a.symbol,a),a.moniker&&r.set(a.moniker,a)});let o=e().selectedMarketId;if(!o&&n.length>0){const l=n.find(u=>u.active)||n[0],c=l.market_id?l.market_id:l.id?typeof l.id=="string"?l.id:l.id.toString():null;c&&(o=c)}t({markets:n,marketsById:s,marketsBySymbol:r,selectedMarketId:o,lastUpdated:new Map(e().lastUpdated).set("markets",Date.now())})},setMarket:n=>{const s=e(),r=new Map(s.marketsById),i=new Map(s.marketsBySymbol);r.set(n.id,n),n.symbol&&i.set(n.symbol,n),n.moniker&&i.set(n.moniker,n);const o=s.markets.find(a=>a.id===n.id)?s.markets.map(a=>a.id===n.id?n:a):[...s.markets,n];t({markets:o,marketsById:r,marketsBySymbol:i})},getMarket:n=>e().marketsById.get(n),getMarketBySymbol:n=>e().marketsBySymbol.get(n),setSelectedMarketId:n=>{t({selectedMarketId:n})},setOrderbook:(n,s)=>{const r=e(),i=new Map(r.orderbooks);i.set(n,{...s,timestamp:Date.now()}),t({orderbooks:i,lastUpdated:new Map(r.lastUpdated).set(n,Date.now())})},getOrderbook:n=>e().orderbooks.get(n),updateOrderbook:(n,s)=>{const r=e(),i=r.orderbooks.get(n);if(i){const o={...i,...s,timestamp:Date.now()};r.setOrderbook(n,o)}else r.setOrderbook(n,{bids:s.bids||[],asks:s.asks||[],timestamp:Date.now()})},setTicker:(n,s)=>{const r=e(),i=new Map(r.tickers);i.set(n,{...s,marketId:n,timestamp:Date.now()}),t({tickers:i,lastUpdated:new Map(r.lastUpdated).set(`ticker_${n}`,Date.now())})},getTicker:n=>e().tickers.get(n),setRecentTrades:(n,s)=>{const r=e(),i=new Map(r.recentTrades);i.set(n,s),t({recentTrades:i,lastUpdated:new Map(r.lastUpdated).set(`trades_${n}`,Date.now())})},getRecentTrades:n=>e().recentTrades.get(n),setLoading:(n,s)=>{const r=e();if(n==="markets")t({loadingMarkets:s});else if(n.startsWith("orderbook_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingOrderbooks);s?o.add(i):o.delete(i),t({loadingOrderbooks:o})}else if(n.startsWith("ticker_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTickers);s?o.add(i):o.delete(i),t({loadingTickers:o})}else if(n.startsWith("trades_")){const i=n.split("_").slice(1).join("_"),o=new Set(r.loadingTrades);s?o.add(i):o.delete(i),t({loadingTrades:o})}},setError:(n,s)=>{const r=e(),i=new Map(r.errors);s?i.set(n,s):i.delete(n),t({errors:i})},clearError:n=>{e().setError(n,null)},clearCache:n=>{const s=e();if(n){const r=new Map(s.orderbooks),i=new Map(s.tickers),o=new Map(s.recentTrades),a=new Map(s.lastUpdated);r.delete(n),i.delete(n),o.delete(n),a.delete(n),a.delete(`ticker_${n}`),a.delete(`trades_${n}`),t({orderbooks:r,tickers:i,recentTrades:o,lastUpdated:a})}else t({orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map})},clearAllCache:()=>{t({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,errors:new Map,selectedMarketId:null})}}));function M6(){const[t,e]=k.useState({loading:!0,loaded:!1,error:null}),[n,s]=k.useState({initialized:!1,wasmLoaded:!1,ready:!1});k.useEffect(()=>{(async()=>{try{e(a=>({...a,loading:!0,error:null})),await We.initialize()?(e({loading:!1,loaded:!0,error:null}),s(We.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(We.getStatus()))}catch(o){e({loading:!1,loaded:!1,error:o instanceof Error?o.message:"Unknown error"}),s(We.getStatus())}})()},[]),k.useEffect(()=>{if(t.loaded){const i=setInterval(()=>{s(We.getStatus())},1e3);return()=>clearInterval(i)}},[t.loaded]);const r=async()=>{e({loading:!0,loaded:!1,error:null});try{await We.initialize()?(e({loading:!1,loaded:!0,error:null}),s(We.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),s(We.getStatus()))}catch(i){e({loading:!1,loaded:!1,error:i instanceof Error?i.message:"Unknown error"}),s(We.getStatus())}};return{wasmStatus:t,isReady:t.loaded&&n.ready,status:n,retry:r}}function I6(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=0){const[n,s]=k.useState(t),[r,i]=k.useState(e),[o,a]=k.useState(null),[l,c]=k.useState(!1);return{mnemonic:n,setMnemonic:s,addressIndex:r,setAddressIndex:i,result:o,loading:l,generateAddress:async()=>{if(!We.isReady()){a({success:!1,error:"WASM module not ready"});return}c(!0),a(null);try{const d=await We.generateAddress(n,r);a(d)}catch(d){a({success:!1,error:d instanceof Error?d.message:"Unknown error"})}finally{c(!1)}},isReady:We.isReady()}}function N6(){const[t,e]=k.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=k.useState("Hello, World!"),[r,i]=k.useState(!1),[o,a]=k.useState(0),[l,c]=k.useState(null),[u,d]=k.useState(!1);return{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:u,signMessage:async()=>{if(!We.isReady()){c({success:!1,error:"WASM module not ready"});return}d(!0),c(null);try{const p={addressIndex:o,useEIP712:r},m=r?await We.signEIP712(t,n,p):await We.signMessage(t,n,p);c(m)}catch(p){c({success:!1,error:p instanceof Error?p.message:"Unknown error"})}finally{d(!1)}},isReady:We.isReady()}}function D6(t="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=180,n="clob::submit_order,clob::cancel_order",s="TradingBot"){const[r,i]=k.useState(t),[o,a]=k.useState(""),[l,c]=k.useState(""),[u,d]=k.useState(""),[f,p]=k.useState(e),[m,x]=k.useState(n),[w,g]=k.useState(s),[b,v]=k.useState(Date.now().toString()),[y,S]=k.useState(null),[C,E]=k.useState(!1);return{ownerMnemonic:r,setOwnerMnemonic:i,ownerAddress:o,setOwnerAddress:a,agentAddress:l,setAgentAddress:c,agentPrivateKey:u,setAgentPrivateKey:d,expiresInDays:f,setExpiresInDays:p,permissions:m,setPermissions:x,agentName:w,setAgentName:g,nonce:b,setNonce:v,result:y,loading:C,generateOwnerAddress:async()=>{if(!We.isReady()){S({success:!1,error:"WASM module not ready"});return}E(!0);try{const A=await We.generateAddress(r,0);A.success&&A.address?a(A.address):S({success:!1,error:A.error||"Failed to generate owner address"})}catch(A){S({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},generateAgentKeypair:async()=>{if(!We.isReady()){S({success:!1,error:"WASM module not ready"});return}E(!0);try{const A=await We.generateKeypair();A.success&&A.address&&A.privateKey?(c(A.address),d(A.privateKey)):S({success:!1,error:A.error||"Failed to generate agent keypair"})}catch(A){S({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},prepareAgentSign:async()=>{if(!We.isReady()){S({success:!1,error:"WASM module not ready"});return}if(!o||!l){S({success:!1,error:"Owner and agent addresses are required"});return}E(!0),S(null);try{const A=m.split(",").map(z=>z.trim()).filter(z=>z.length>0),R=await We.prepareAgentSign({owner:o,agent:l,expiresInDays:f,permissions:A,nonce:b,agentName:w});S(R)}catch(A){S({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},signAgentApproval:async()=>{if(!We.isReady()){S({success:!1,error:"WASM module not ready"});return}if(!o||!l||!r){S({success:!1,error:"Owner address, agent address, and owner mnemonic are required"});return}E(!0),S(null);try{const A=m.split(",").map(z=>z.trim()).filter(z=>z.length>0),R=await We.signAgentApproval(r,{owner:o,agent:l,expiresInDays:f,permissions:A,nonce:b,agentName:w});S(R)}catch(A){S({success:!1,error:A instanceof Error?A.message:"Unknown error"})}finally{E(!1)}},isReady:We.isReady()}}const xo="http://localhost:8080",r3="ws://localhost:8080/websocket",A6="300px",R6="300px",O6="270px",i3="630px",Fb=5e3,L6="1",j6=100,o3=20,F6="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",jp=1,$v=100,B6=1,vd=0,Fp=100,Bp=1,$6=.01,zv=0,z6="BINANCE:BTCUSDT",U6="5",W6="https://s3.tradingview.com/tv.js",Br=2,H6=2,ri="asc",ga="desc",Om="market",$p="limit",du="CROSS",V6="ISOLATED",Y6="ONE_WAY",hu="LONG",Lm="SHORT",Uv="symbol",Wv="leverage",Hv="size",Vv="liquidationPrice",Yv="unrealizedPnL",Gv="entryPrice",qv="margin",zp="all",kd="byBucket",Kv="1.5fr 1.2fr 1fr 1fr 1fr 1.2fr 1.2fr 1fr",G6="#51cf66",q6="#ff6b6b",K6="Loading positions...",X6="No open positions",Q6="POSITIONS",J6="All",Z6="By Bucket",Up="--",Xv="symbol",Qv="side",Jv="quantity",Zv="price",e1="filledQuantity",t1="status",$r="pending",n1="history",eD="ORDER_STATUS_PENDING",tD="ORDER_STATUS_OPEN",nD="PARTIALLY_FILLED",s1=[eD,tD,"PENDING","OPEN","NEW",nD],Wp="#ffc107",Hp="#17a2b8",r1="#28a745",Vp="#dc3545",i1="#dc3545",sD="#6c757d",rD="#51cf66",iD="#ff6b6b",o1="1.5fr 1fr 1fr 1.2fr 1.2fr 1.2fr 1fr 1fr",oD="Loading pending orders...",aD="No pending orders",lD="No historical orders",cD="OPEN ORDERS",uD="ORDER HISTORY",dD="Wallet address required to view pending orders",hD="Pending",fD="History",pD="--",gD="Unknown";function mD(t){const[e,n]=k.useState(null),[s,r]=k.useState(null),[i,o]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState(null),[d,f]=k.useState(Om),[p,m]=k.useState(0),[x,w]=k.useState(0),[g,b]=k.useState("0"),[v,y]=k.useState(B6),[S,C]=k.useState(Y6),[E,T]=k.useState(du),[N,_]=k.useState(0),[D,A]=k.useState(0),[R,z]=k.useState(t.marketId||"1");k.useEffect(()=>{t.selectedBucketBalance!==void 0&&_(t.selectedBucketBalance)},[t.selectedBucketBalance]),k.useEffect(()=>{const J=new wl({baseURL:t.baseURL,mnemonic:t.mnemonic}),G=new pn({baseURL:t.baseURL});n(J),r(G),J.initialize().then(()=>{o(!0)}).catch(ee=>{console.error("Failed to initialize exchange client:",ee),u({success:!1,error:`Initialization failed: ${ee.message}`})})},[t.baseURL,t.mnemonic]);const L=k.useCallback(async()=>{if(!(!s||!e)&&t.selectedBucketBalance===void 0)try{const J=e.getWalletAddress(),G=await s.getBalanceDecimal(J,"MORM");G&&G.available_balance!==void 0&&_(ke(G.available_balance)||0)}catch(J){console.error("Failed to load balance:",J)}},[s,e,t.selectedBucketBalance]);k.useEffect(()=>{i&&s&&e&&t.selectedBucketBalance===void 0&&L()},[i,s,e,t.selectedBucketBalance,L]);const F=k.useCallback(async()=>{if(s)try{const J=await s.getTicker(R);if(J&&J.lastPrice){const G=typeof J.lastPrice=="string"?ke(J.lastPrice):J.lastPrice;A(G),(!g||g==="0")&&b(G.toString())}}catch(J){console.error("Failed to load market price:",J)}},[s,R,g]);k.useEffect(()=>{i&&s&&F()},[i,s,F]);const $=k.useCallback(()=>d==="market"?t.tradePrice&&t.tradePrice>0?t.tradePrice:D:g?parseFloat(g):D,[d,g,D,t.tradePrice]),O=k.useCallback(()=>N*v,[N,v]),B=k.useCallback(()=>{let J;if(x>0)J=x;else{const ee=O()*p/100,he=$();if(he<=0)return 0;J=ee/he}return t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&J>t.maxSizeLimit?t.maxSizeLimit:J},[x,p,O,$,t.maxSizeLimit]),M=k.useCallback(()=>{const J=B(),G=$();return J*G},[B,$]),H=k.useCallback(()=>{const J=B(),G=$(),ee=J*G;return F_(ee)},[B,$]),j=k.useCallback(()=>{const J=H();return v<=0?0:Math.floor(J/v)},[H,v]),P=k.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const J=B();if(J<=0){u({success:!1,error:"Invalid order size"});return}const G=$();if(G<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!g){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const ee=ut(v.toString()),he=await e.placeOrder({marketId:R,side:"buy",orderType:d,price:G,quantity:J,leverage:ee});u({success:!0,orderId:he.order_id,message:"Buy order placed successfully"}),await L()}catch(ee){u({success:!1,error:ee instanceof Error?ee.message:"Unknown error"})}finally{l(!1)}},[e,i,B,$,d,g,v,R,L]),X=k.useCallback(async()=>{if(!e||!i){u({success:!1,error:"Exchange client not ready"});return}const J=B();if(J<=0){u({success:!1,error:"Invalid order size"});return}const G=$();if(G<=0){u({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!g){u({success:!1,error:"Price is required for limit orders"});return}l(!0),u(null);try{const ee=ut(v.toString()),he=await e.placeOrder({marketId:R,side:"sell",orderType:d,price:G,quantity:J,leverage:ee});u({success:!0,orderId:he.order_id,message:"Sell order placed successfully"}),await L()}catch(ee){u({success:!1,error:ee instanceof Error?ee.message:"Unknown error"})}finally{l(!1)}},[e,i,B,$,d,g,v,R,L]),se=k.useCallback(J=>{const G=O(),ee=G*J/100,he=t.tradePrice&&t.tradePrice>0?t.tradePrice:D>0?D:0,Ae=he>0?ee/he:0;let Ce=isNaN(Ae)||!isFinite(Ae)?0:Math.round(Ae*1e8)/1e8;if(t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&Ce>t.maxSizeLimit){Ce=t.maxSizeLimit;const ve=$();if(Ce>0&&G>0&&ve>0){const ct=Ce*ve/G*100;m(Math.min(100,Math.max(0,ct)))}else m(J)}else m(J);w(Ce)},[O,D,t.tradePrice,t.maxSizeLimit,$]),K=k.useCallback(J=>{let G=isNaN(J)||J<0?0:J;t.maxSizeLimit!==void 0&&t.maxSizeLimit>0&&G>t.maxSizeLimit&&(G=t.maxSizeLimit),w(G);const ee=O(),he=$();if(G>0&&ee>0&&he>0){const Ce=G*he/ee*100;m(Math.min(100,Math.max(0,Ce)))}else m(0)},[O,$,t.maxSizeLimit]);return{orderType:d,setOrderType:f,fundPercent:p,sizeInput:x,price:g,leverage:v,positionMode:S,marginMode:E,availableBalance:N,currentPrice:D,marketId:R,isReady:i,loading:a,result:c,setFundPercent:se,setSizeInput:K,setPrice:b,setLeverage:y,setPositionMode:C,setMarginMode:T,setMarketId:z,placeBuyOrder:P,placeSellOrder:X,loadBalance:L,loadMarketPrice:F,calculateSize:B,calculateSizeUSD:M,calculateValue:H,calculateMargin:j,getOrderPrice:$,getAvailableTradeAmount:O}}function a3(t){const[e,n]=k.useState({asks:[],bids:[]}),[s,r]=k.useState(!0),[i,o]=k.useState(null),[a,l]=k.useState(!1),[c,u]=k.useState(null),d=k.useRef(null),f=k.useRef(null),p=k.useRef([]),m=k.useRef(null),x=k.useRef(!1),w=k.useRef(null),g=k.useRef(null),b=k.useRef(null),v=k.useRef(new Map),y=k.useCallback(_=>{const D=[..._].sort((R,z)=>z[0]-R[0]);let A=0;return D.map(([R,z])=>(A+=z,{price:R,size:z,cumulative:A,flash:null}))},[]),S=k.useCallback((_,D)=>{const A=new Map,R=new Map,z=new Map,L=new Map;_.asks.forEach(K=>{K.size>0&&A.set(K.price,K.size)}),_.bids.forEach(K=>{K.size>0&&R.set(K.price,K.size)}),D.asks&&D.asks.forEach(([K,J])=>{const G=A.get(K)||0;J===0?A.delete(K):(G>0?z.set(K,J>G?"up":"down"):z.set(K,"up"),A.set(K,J))}),D.bids&&D.bids.forEach(([K,J])=>{const G=R.get(K)||0;J===0?R.delete(K):(G>0?L.set(K,J>G?"up":"down"):L.set(K,"up"),R.set(K,J))});const F=Array.from(A.entries()),$=Array.from(R.entries()),O=y(F),B=y($),M=Date.now();O.forEach(K=>{const J=z.get(K.price);J?(K.flash=J,v.current.set(`ask-${K.price}`,M)):K.flash=null}),B.forEach(K=>{const J=L.get(K.price);J?(K.flash=J,v.current.set(`bid-${K.price}`,M)):K.flash=null});const H=t.maxDepth||100,j=O.slice(0,H),P=B.slice(0,H);let X,se;if(j.length>0&&P.length>0){const K=j[j.length-1].price,J=P[0].price;X=K-J,se=(K+J)/2}return{asks:j,bids:P,spread:X,midPrice:se}},[y,t.maxDepth]),C=k.useCallback(async()=>{if(d.current)try{const _=await d.current.getOrderbook(t.marketId,!0);if(_&&(_.bids||_.asks)){const D=_.asks||[],A=_.bids||[],R=y(D),z=y(A),L=t.maxDepth||100,F=R.slice(0,L),$=z.slice(0,L);let O,B;if(F.length>0&&$.length>0){const M=F[F.length-1].price,H=$[0].price;O=M-H,B=(M+H)/2}n({asks:F,bids:$,spread:O,midPrice:B})}}catch(_){o(_ instanceof Error?_.message:"Failed to load orderbook")}},[t.marketId,t.maxDepth,y]),E=k.useCallback(async()=>{if(d.current){r(!0),o(null);try{const _=await d.current.getOrderbook(t.marketId,!0);if(_&&(_.bids||_.asks)){const D=_.asks||[],A=_.bids||[],R=y(D),z=y(A),L=t.maxDepth||100,F=R.slice(0,L),$=z.slice(0,L);let O,B;if(F.length>0&&$.length>0){const M=F[F.length-1].price,H=$[0].price;O=M-H,B=(M+H)/2}n({asks:F,bids:$,spread:O,midPrice:B})}}catch(_){o(_ instanceof Error?_.message:"Failed to load orderbook")}finally{r(!1)}}},[t.marketId,t.maxDepth,y]),T=k.useCallback((_,D)=>{if(_.snapshot===!0||_.type==="snapshot"||_.bids&&_.asks&&_.bids.length>10&&_.asks.length>10&&!_.delta){const R=_.asks||[],z=_.bids||[],L=y(R),F=y(z),$=t.maxDepth||100,O=L.slice(0,$),B=F.slice(0,$);let M,H;if(O.length>0&&B.length>0){const j=O[O.length-1].price,P=B[0].price;M=j-P,H=(j+P)/2}return{asks:O,bids:B,spread:M,midPrice:H}}else return S(D,{bids:_.bids,asks:_.asks})},[y,S,t.maxDepth]),N=k.useCallback(_=>{!_||!_.bids&&!_.asks||(p.current.push(_),m.current!==null&&clearTimeout(m.current),m.current=window.setTimeout(()=>{n(D=>{let A=D;for(const R of p.current)A=T(R,A);if(p.current=[],D.asks.length===A.asks.length&&D.bids.length===A.bids.length&&D.spread===A.spread&&D.midPrice===A.midPrice){const R=D.bids.length>0?D.bids[0].price:0,z=D.asks.length>0?D.asks[D.asks.length-1].price:0,L=A.bids.length>0?A.bids[0].price:0,F=A.asks.length>0?A.asks[A.asks.length-1].price:0;if(R===L&&z===F)return D}return A}),m.current=null},100))},[T]);return k.useEffect(()=>{const _=new pn({baseURL:t.baseURL});d.current=_;const D=new Mo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});f.current=D,w.current===null&&(w.current=t.marketId);const A=()=>{if(D.isConnected()){const F=w.current!==null?w.current:t.marketId;(!x.current||w.current!==F)&&(x.current&&w.current!==null&&w.current!==F&&D.unsubscribeOrderbook(w.current,N),D.subscribeOrderbook(F,N,!0),x.current=!0,w.current=F)}},R=D.connect();b.current=window.setTimeout(()=>{!D.isConnected()&&d.current&&g.current===null&&(u("WebSocket connection timeout. Using HTTP polling."),l(!1),C(),g.current=window.setInterval(()=>{C()},5e3))},12e3),R.then(()=>{b.current!==null&&(clearTimeout(b.current),b.current=null),l(!0),u(null),A()}).catch(()=>{b.current!==null&&(clearTimeout(b.current),b.current=null),u("slow connection due to network issue"),l(!1),d.current&&(g.current!==null&&(clearInterval(g.current),g.current=null),C(),g.current=window.setInterval(()=>{C()},5e3))});let z=null;const L=D.wsClient;return L&&(z=L.onStateChange(F=>{F===dt.Connected?(l(!0),u(null),x.current&&A()):(F===dt.Disconnected||F===dt.Reconnecting)&&(l(!1),x.current=!1,u("WebSocket disconnected. Using static data."))})),()=>{const F=w.current;m.current!==null&&(clearTimeout(m.current),m.current=null),b.current!==null&&(clearTimeout(b.current),b.current=null),p.current=[],x.current=!1,w.current=null,z&&z(),f.current&&(F!==null&&f.current.unsubscribeOrderbook(F,N),f.current.disconnect())}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID]),k.useEffect(()=>{if(!d.current||!f.current)return;const _=w.current;return _!==null&&_!==t.marketId&&f.current.isConnected()&&(f.current.unsubscribeOrderbook(_,N),x.current=!1),n({asks:[],bids:[]}),r(!0),o(null),u(null),E(),f.current.isConnected()&&(f.current.subscribeOrderbook(t.marketId,N,!0),x.current=!0),w.current=t.marketId,()=>{f.current&&f.current.isConnected()&&w.current===t.marketId&&(f.current.unsubscribeOrderbook(t.marketId,N),x.current=!1)}},[t.marketId,E,N]),k.useEffect(()=>(g.current!==null&&(clearInterval(g.current),g.current=null),!a&&d.current&&(C(),g.current=window.setInterval(()=>{C()},5e3)),()=>{g.current!==null&&(clearInterval(g.current),g.current=null)}),[a,t.marketId,C]),k.useEffect(()=>{const _=setInterval(()=>{const D=Date.now(),A=500;n(R=>{let z=!1;const L=R.asks.map($=>{const O=`ask-${$.price}`,B=v.current.get(O);return $.flash&&B&&D-B>=A?(z=!0,v.current.delete(O),{...$,flash:null}):$}),F=R.bids.map($=>{const O=`bid-${$.price}`,B=v.current.get(O);return $.flash&&B&&D-B>=A?(z=!0,v.current.delete(O),{...$,flash:null}):$});return z?{...R,asks:L,bids:F}:R})},100);return()=>clearInterval(_)},[]),{orderbook:e,loading:s,error:i,isConnected:a,wsError:c,refresh:E}}function Io(t,e=2,n=2,s="0.00"){return t==null||isNaN(t)?s:t.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:n})}function rf(t){return t==null||isNaN(t)?"--":Io(t,2,2,"--")}function ma(t){return t==null||isNaN(t)?"--":Io(t,2,8,"--")}function of(t){return t==null||isNaN(t)?"0.000":Io(t,3,3,"0.000")}function xD(t){return t==null||isNaN(t)?"0":Io(t,3,8,"0")}function bD(t){return t==null||isNaN(t)?"0.00":Io(t,2,2,"0.00")}function yD(t){return t==null||isNaN(t)?"0.00":Io(t,2,2,"0.00")}function It(t){return t==null||isNaN(t)?"0.00":Io(t,2,2,"0.00")}function l3(t){return t==null||isNaN(t)?"0%":`${(t*100).toFixed(2)}%`}function c3(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return ke(t).toFixed(8).replace(/\.?0+$/,"")}catch{return"0"}}function wD(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"--";try{const n=c3(t).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")}catch{return"--"}}function vD(t){if(t==null||typeof t=="string"&&(t.trim()===""||isNaN(Number(t))))return"0";try{return c3(t)}catch{return"0"}}function kD(t,e="--"){if(t==null)return e;try{return(typeof t=="string"||typeof t=="number"?ke(t):0).toFixed(2).replace(/\.?0+$/,"")}catch{return e}}function fr(t){if(!t)return Date.now();const e=typeof t=="string"?Number(t):t;return isNaN(e)||e<=0?Date.now():e<9466848e5?e*1e3:e}function d0(t){const[e,n]=k.useState(null),[s,r]=k.useState(null),[i,o]=k.useState(!0),[a,l]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState(null),p=k.useRef(null),m=k.useRef(null),x=k.useRef(!1),w=k.useRef(!1),g=k.useRef(null),b=k.useRef(null),v=k.useCallback(async()=>{if(!p.current){console.warn("[useTradePrice] pollRecentTrades called but infoClientRef.current is null");return}console.debug("[useTradePrice] Polling recent trades (marketId:",t.marketId,")");try{const N=t.limit||100,_=await p.current.getRecentTrades(t.marketId,N);if(_&&Array.isArray(_)&&_.length>0){const A=[..._].sort((z,L)=>{const F=fr(z.timestamp);return fr(L.timestamp)-F})[0],R={market_id:A.market_id||t.marketId,price:typeof A.price=="string"?ke(A.price):A.price,quantity:typeof A.quantity=="string"?ke(A.quantity):A.quantity||0,timestamp:fr(A.timestamp),is_buyer_maker:A.is_buyer_maker||!1,trade_id:A.trade_id||""};n(z=>(z&&typeof z.price=="number"&&(R.price>z.price?f("up"):R.price<z.price&&f("down")),setTimeout(()=>f(null),500),R))}else console.warn("[useTradePrice] Polling returned no trades or invalid data:",_)}catch(N){l(N instanceof Error?N.message:"Failed to load recent trades"),console.error("[useTradePrice] Failed to poll recent trades:",N)}},[t.marketId,t.limit]),y=k.useCallback(async()=>{if(p.current){o(!0),l(null);try{const N=t.limit||100,_=await p.current.getRecentTrades(t.marketId,N);if(_&&Array.isArray(_)&&_.length>0){const A=[..._].sort((z,L)=>{const F=fr(z.timestamp);return fr(L.timestamp)-F})[0],R={market_id:A.market_id||t.marketId,price:typeof A.price=="string"?ke(A.price):A.price,quantity:typeof A.quantity=="string"?ke(A.quantity):A.quantity||0,timestamp:fr(A.timestamp),is_buyer_maker:A.is_buyer_maker||!1,trade_id:A.trade_id||""};n(R)}else console.warn("[useTradePrice] Initialization returned no trades or invalid data:",_)}catch(N){l(N instanceof Error?N.message:"Failed to load recent trades"),console.error("Failed to initialize recent trades:",N)}finally{o(!1)}}},[t.marketId,t.limit]),S=k.useCallback(N=>{if(console.debug("[useTradePrice] handleLastPriceUpdate called with data:",N),!N){console.warn("[useTradePrice] handleLastPriceUpdate received null/undefined data");return}if(!N.price&&N.price!==0){console.warn("[useTradePrice] handleLastPriceUpdate received data without price field:",N);return}const _=typeof N.price=="string"?ke(N.price):Number(N.price),D=typeof N.quantity=="string"?ke(N.quantity):Number(N.quantity)||0;if(isNaN(_)){console.warn("[useTradePrice] Invalid price value:",N.price);return}n(A=>{zl(A)&&typeof A.price=="number"&&(_>A.price?f("up"):_<A.price&&f("down")),setTimeout(()=>f(null),500);const R={market_id:N.market_id||t.marketId,price:_,quantity:D,timestamp:N.timestamp||Date.now(),is_buyer_maker:N.is_buyer_maker||!1,trade_id:N.trade_id||""};return zl(R)||console.error("[useTradePrice] Invalid LastPriceData structure:",R),console.debug("[useTradePrice] Setting lastPrice to:",R),console.debug("[useTradePrice] Type check - isLastPriceData:",zl(R)),R})},[t.marketId]),C=k.useCallback(N=>{if(!N){console.warn("[useTradePrice] handleMarkPriceUpdate received null/undefined data");return}if(N.mark_price===void 0||N.mark_price===null){console.warn("[useTradePrice] handleMarkPriceUpdate received data without mark_price field:",N);return}const _=typeof N.mark_price=="string"?ke(N.mark_price):typeof N.mark_price=="number"?N.mark_price:Number(N.mark_price);if(isNaN(_)){console.warn("[useTradePrice] Invalid mark_price value:",N.mark_price);return}const D={symbol:N.symbol||t.symbol||"",mark_price:_,timestamp:N.timestamp||Date.now()};Lp(D)||console.error("[useTradePrice] Invalid MarkPriceData structure:",D),r(D)},[t.symbol]);k.useEffect(()=>{const N=new pn({baseURL:t.baseURL});p.current=N;const _=new Mo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});m.current=_,y();const D=()=>{_.isConnected()&&(x.current||(_.subscribeLastPrice(t.marketId,S,!0),x.current=!0),t.symbol&&!w.current&&(_.subscribeMarkPrice(t.symbol,C),w.current=!0))};console.debug("[useTradePrice] Attempting WebSocket connection...");const A=_.connect();console.debug("[useTradePrice] Connect promise created, waiting for result..."),b.current=window.setTimeout(()=>{console.warn("[useTradePrice] WebSocket connection timeout fallback triggered after 12 seconds");const L=_.isConnected();console.warn("[useTradePrice] subscriptionClient.isConnected():",L,"hasPollingInterval:",g.current!==null),!L&&p.current&&g.current===null?(console.debug("[useTradePrice] Starting HTTP polling due to connection timeout (marketId:",t.marketId,")"),u(!1),v(),g.current=window.setInterval(()=>{v()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):L?console.debug("[useTradePrice] Connection established before timeout, no polling needed"):g.current!==null&&console.debug("[useTradePrice] Polling already started, skipping")},12e3),A.then(()=>{b.current!==null&&(clearTimeout(b.current),b.current=null),console.debug("[useTradePrice] WebSocket connected successfully"),u(!0),D()}).catch(L=>{b.current!==null&&(clearTimeout(b.current),b.current=null),console.error("[useTradePrice] WebSocket connection promise rejected:",L);const F=L instanceof Error?L.message:"Unknown error";console.info("WebSocket failed to establish connection. Falling back to HTTP polling:",F),u(!1),p.current?(g.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (WebSocket failure handler)"),clearInterval(g.current),g.current=null),console.debug("[useTradePrice] Starting HTTP polling due to WebSocket connection failure (marketId:",t.marketId,")"),v(),g.current=window.setInterval(()=>{v()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null")});let R=null;const z=_.wsClient;return z&&(R=z.onStateChange(L=>{console.debug("[useTradePrice] WebSocket state changed to:",L),L===dt.Connected?(console.debug("[useTradePrice] WebSocket connected - stopping polling if active"),u(!0),x.current&&D()):(L===dt.Disconnected||L===dt.Reconnecting)&&(console.debug("[useTradePrice] WebSocket disconnected/reconnecting - polling effect should start polling"),u(!1),x.current=!1,w.current=!1)})),()=>{b.current!==null&&(clearTimeout(b.current),b.current=null),x.current=!1,w.current=!1,R&&R(),m.current&&(m.current.unsubscribeLastPrice(t.marketId,S),t.symbol&&m.current.unsubscribeMarkPrice(t.symbol,C),m.current.disconnect())}},[t.baseURL,t.wsURL,t.marketId,t.symbol,t.authToken,t.walletAddress,t.deviceID]),k.useEffect(()=>{p.current&&m.current&&(m.current.isConnected()&&(m.current.unsubscribeLastPrice(t.marketId,S),x.current=!1,t.symbol&&(m.current.unsubscribeMarkPrice(t.symbol,C),w.current=!1)),y(),m.current.isConnected()&&(m.current.subscribeLastPrice(t.marketId,S,!0),x.current=!0,t.symbol&&(m.current.subscribeMarkPrice(t.symbol,C),w.current=!0)))},[t.marketId,t.symbol]),k.useEffect(()=>(console.debug("[useTradePrice] Polling effect triggered - isConnected:",c,"marketId:",t.marketId),g.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (polling effect)"),clearInterval(g.current),g.current=null),!c&&p.current?(console.debug("[useTradePrice] Starting HTTP polling (WebSocket disconnected, marketId:",t.marketId,")"),v(),g.current=window.setInterval(()=>{v()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):!c&&!p.current?console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null (isConnected:",c,")"):c&&console.debug("[useTradePrice] WebSocket connected, polling not needed"),()=>{g.current!==null&&(console.debug("[useTradePrice] Cleaning up polling interval (polling effect cleanup)"),clearInterval(g.current),g.current=null)}),[c,t.marketId]);const{displayPrice:E,displayTimestamp:T}=k.useMemo(()=>{const N=zl(e)&&e.price!=null,_=Lp(s)&&s.mark_price!=null;if(N&&_){const D=e.timestamp||0,A=s.timestamp||0;return D>=A?{displayPrice:e.price,displayTimestamp:D}:{displayPrice:s.mark_price,displayTimestamp:A}}return N?{displayPrice:e.price,displayTimestamp:e.timestamp||0}:_?{displayPrice:s.mark_price,displayTimestamp:s.timestamp||0}:{displayPrice:null,displayTimestamp:null}},[e,s]);return{lastPrice:e,markPrice:s,displayPrice:E,displayTimestamp:T,loading:i,error:a,isConnected:c,priceChange:d,refresh:y,isLastPriceData:zl,isMarkPriceData:Lp}}function u3(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(""),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(null),f=k.useRef(0),p=k.useRef(!1),m=k.useRef(t);m.current=t;const x=k.useCallback(b=>{const v=D=>!D||D===""?0:ke(D),y=v(b.size),S=b.is_long!==void 0?b.is_long?hu:Lm:y>=0?hu:Lm,C=v(b.entry_price),E=v(b.mark_price),T=b.leverage?parseFloat(b.leverage):void 0,_=v(b.margin_balance)||(T&&C&&y!==0?Math.abs(Math.abs(y)*C/T):0);return{marketId:b.market_id.toString(),symbol:b.symbol||`m-${b.market_id}`,size:Math.abs(y),entryPrice:C,markPrice:E,liquidationPrice:b.liquidation_price?v(b.liquidation_price):void 0,unrealizedPnL:v(b.unrealized_pnl||b.pnl),leverage:T,margin:_,side:S,marginMode:b.margin_mode||b.margin_type||du,bucketId:b.bucket_id?String(b.bucket_id):void 0}},[]),w=k.useCallback(async()=>{if(!u.current)return;const b=m.current;if(!b.walletAddress||b.walletAddress.trim()===""){a(""),s([]),i(!1);return}a("");try{const v=await u0(jb.http,()=>u.current.getPositions(b.walletAddress));if(Array.isArray(v)){const y=v.map(x);s(S=>{if(S.length!==y.length)return y;const C=JSON.stringify(S),E=JSON.stringify(y);return C===E?S:y})}else s(y=>y.length===0?y:[])}catch(v){a(v instanceof Error?v.message:"Failed to load positions"),console.error("Failed to fetch positions after retries:",v)}finally{i(!1)}},[x]),g=k.useCallback(b=>{if(b.positions&&Array.isArray(b.positions)){const v=b.positions.map(x);s(y=>{if(y.length!==v.length)return v;const S=JSON.stringify(y),C=JSON.stringify(v);return S===C?y:v})}},[x]);return k.useEffect(()=>{const b=new pn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=b,w(),e&&t.wsURL){const v=new Mo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=v;const y=()=>{v.isConnected()&&!p.current&&(v.subscribeUserUpdates(g),p.current=!0)};v.connect().then(()=>{c(!0),y()}).catch(E=>{console.error("Failed to connect WebSocket:",E),c(!1),t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{w()},t.refreshInterval))});let S=null;const C=v.wsClient;return C&&(S=C.onStateChange(E=>{E===dt.Connected?(c(!0),p.current&&y(),f.current!==null&&(clearInterval(f.current),f.current=0)):(E===dt.Disconnected||E===dt.Reconnecting)&&(c(!1),p.current=!1,t.refreshInterval&&t.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{w()},t.refreshInterval)))})),()=>{S&&S(),f.current!==null&&(clearInterval(f.current),f.current=0),d.current&&(d.current.unsubscribeUserUpdates(g),d.current.disconnect())}}else return t.refreshInterval&&t.refreshInterval>0&&(f.current=window.setInterval(()=>{w()},t.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=0)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{positions:n,loading:r,error:o,isConnected:l,refresh:w}}function d3(t){const[e,n]=k.useState([]),[s,r]=k.useState(!0),[i,o]=k.useState(""),a=k.useRef(null),l=k.useRef(0),c=k.useCallback(async()=>{if(a.current){o(""),r(!0);try{if(!t.walletAddress){o("Wallet address is required"),n([]);return}const u=await a.current.getBuckets(t.walletAddress),d=Array.isArray(u)?u:[];Array.isArray(u)||console.warn("[useBuckets] getBuckets returned non-array:",u);const f=d.map(p=>n3(p,ke));n(f)}catch(u){const d=u instanceof Error?u.message:"Failed to load buckets";o(d),console.error("Failed to fetch buckets:",u),n([])}finally{r(!1)}}},[t.walletAddress]);return k.useEffect(()=>{const u=new pn({baseURL:t.baseURL,sessionToken:t.authToken});return a.current=u,c(),t.refreshInterval&&t.refreshInterval>0&&(l.current=window.setInterval(()=>{c()},t.refreshInterval)),()=>{l.current!==null&&(clearInterval(l.current),l.current=0)}},[t.baseURL,t.authToken,t.walletAddress,t.refreshInterval]),{buckets:e,loading:s,error:i,refresh:c}}function SD(t){const e=t.maxDataPoints||100,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(null),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(!1),f=k.useRef(null),p=k.useCallback(m=>{if(!m){console.warn("[useKline] handleKlineUpdate received null/undefined data");return}try{const x={market_id:m.market_id||String(t.marketId),symbol:m.symbol,interval:m.interval||t.interval,open_time:m.open_time||m.timestamp||Date.now(),close_time:m.close_time||m.open_time||Date.now(),open:typeof m.open=="string"?ke(m.open):Number(m.open)||0,high:typeof m.high=="string"?ke(m.high):Number(m.high)||0,low:typeof m.low=="string"?ke(m.low):Number(m.low)||0,close:typeof m.close=="string"?ke(m.close):Number(m.close)||0,volume:typeof m.volume=="string"?ke(m.volume):Number(m.volume)||0,trade_count:m.trade_count||m.tradeCount,timestamp:m.timestamp||m.open_time||Date.now(),raw:m};s(w=>{const g=[...w,x];return g.length>e?g.slice(-e):g})}catch(x){console.error("[useKline] Error processing kline update:",x),a(x instanceof Error?x.message:"Failed to process kline data")}},[t.marketId,t.interval,e]);return k.useEffect(()=>{const m=new Mo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});u.current=m;const x=()=>{m.isConnected()&&(d.current||(m.subscribeKline(t.marketId,t.interval,p),d.current=!0))};console.debug("[useKline] Attempting WebSocket connection...");const w=m.connect();f.current=window.setTimeout(()=>{console.warn("[useKline] WebSocket connection timeout after 12 seconds"),m.isConnected()||(c(!1),a("WebSocket connection timeout"),i(!1))},12e3),w.then(()=>{f.current!==null&&(clearTimeout(f.current),f.current=null),console.debug("[useKline] WebSocket connected successfully"),c(!0),i(!1),x()}).catch(v=>{f.current!==null&&(clearTimeout(f.current),f.current=null),console.error("[useKline] WebSocket connection failed:",v);const y=v instanceof Error?v.message:"Unknown error";c(!1),a(y),i(!1)});let g=null;const b=m.wsClient;return b&&(g=b.onStateChange(v=>{console.debug("[useKline] WebSocket state changed to:",v),v===dt.Connected?(c(!0),d.current&&x()):(v===dt.Disconnected||v===dt.Reconnecting)&&(c(!1),d.current=!1)})),()=>{f.current!==null&&(clearTimeout(f.current),f.current=null),d.current=!1,g&&g(),u.current&&(u.current.unsubscribeKline(t.marketId,t.interval,p),u.current.disconnect())}},[t.wsURL,t.marketId,t.interval,t.authToken,t.walletAddress,t.deviceID,p]),{klineData:n,loading:r,error:o,isConnected:l}}function Ti(t){const e=k.useRef(null),n=mt(j=>j.markets),s=mt(j=>j.marketsById),r=mt(j=>j.orderbooks),i=mt(j=>j.tickers),o=mt(j=>j.recentTrades),a=mt(j=>j.selectedMarketId),l=mt(j=>j.loadingMarkets),c=mt(j=>j.loadingOrderbooks),u=mt(j=>j.loadingTickers),d=mt(j=>j.loadingTrades),f=mt(j=>j.errors),p=mt(j=>j.setMarkets),m=mt(j=>j.setMarket),x=mt(j=>j.getMarket),w=mt(j=>j.getMarketBySymbol),g=mt(j=>j.setSelectedMarketId),b=mt(j=>j.setOrderbook),v=mt(j=>j.getOrderbook),y=mt(j=>j.updateOrderbook),S=mt(j=>j.setTicker),C=mt(j=>j.getTicker),E=mt(j=>j.setRecentTrades),T=mt(j=>j.getRecentTrades),N=mt(j=>j.setLoading),_=mt(j=>j.setError),D=mt(j=>j.clearError),A=mt(j=>j.clearCache);k.useEffect(()=>{e.current?t.sessionToken&&e.current.setSessionToken(t.sessionToken):e.current=new pn({baseURL:t.baseURL,sessionToken:t.sessionToken})},[t.baseURL,t.sessionToken]);const R=k.useCallback(async()=>{if(!e.current)throw new Error("InfoClient not initialized");const j="markets";N(j,!0),_(j,null);try{const P=await e.current.getMarkets(),se=(Array.isArray(P)?P:(P==null?void 0:P.markets)||[]).map((K,J)=>{let G;if(K.id!==void 0)G=typeof K.id=="string"?parseInt(K.id,10)||J+1:K.id;else if(K.market_id!==void 0){const ee=String(K.market_id),he=parseInt(ee,10);isNaN(he)?G=J+1:he>Number.MAX_SAFE_INTEGER?G=he%Number.MAX_SAFE_INTEGER||J+1:G=he}else G=J+1;return{id:G,symbol:K.symbol||K.moniker,moniker:K.moniker,baseAsset:K.base_asset||K.baseAsset,quoteAsset:K.quote_asset||K.quoteAsset,active:K.active!==void 0?K.active:K.status==="active",market_id:K.market_id,status:K.status,...K}});return p(se),se}catch(P){const X=P instanceof Error?P.message:"Failed to fetch markets";throw _(j,X),P}finally{N(j,!1)}},[p,N,_]),z=k.useCallback(async j=>{if(!e.current)throw new Error("InfoClient not initialized");const P=typeof j=="string"?parseInt(j,10):j,X=isNaN(P)?null:x(P);if(X)return X;try{const se=await e.current.getMarketByID(j);return se?(m(se),se):null}catch(se){const K=se instanceof Error?se.message:`Failed to fetch market ${j}`;throw _(`market_${j}`,K),se}},[x,m,_]),L=k.useCallback(async j=>{if(!e.current)throw new Error("InfoClient not initialized");const P=w(j);if(P)return P;try{const X=await e.current.getMarketByMoniker(j);return X?(m(X),X):null}catch(X){const se=X instanceof Error?X.message:`Failed to fetch market ${j}`;throw _(`market_${j}`,se),X}},[w,m,_]),F=k.useCallback(async(j,P=!0,X=20)=>{if(!e.current)throw new Error("InfoClient not initialized");const se=`orderbook_${j}`;N(se,!0),_(se,null);try{const K=await e.current.getOrderbook(j,P,X);if(K&&(K.bids||K.asks)){const J={bids:K.bids||[],asks:K.asks||[],timestamp:Date.now()};return b(typeof j=="string"?j:j.toString(),J),J}return null}catch(K){const J=K instanceof Error?K.message:`Failed to fetch orderbook for market ${j}`;throw _(se,J),K}finally{N(se,!1)}},[b,N,_]),$=k.useCallback(async j=>{if(!e.current)throw new Error("InfoClient not initialized");const P=`ticker_${j}`;N(P,!0),_(P,null);try{const X=await e.current.getTicker(j);if(X){const se=typeof j=="string"?j:j.toString(),K={marketId:se,...X,timestamp:Date.now()};return S(se,K),K}return null}catch(X){const se=X instanceof Error?X.message:`Failed to fetch ticker for market ${j}`;throw _(P,se),X}finally{N(P,!1)}},[S,N,_]),O=k.useCallback(async(j,P=100)=>{if(!e.current)throw new Error("InfoClient not initialized");const X=`trades_${j}`;N(X,!0),_(X,null);try{const se=await e.current.getRecentTrades(j,P);if(se){const K=Array.isArray(se)?se:[];return E(typeof j=="string"?j:j.toString(),K),K}return null}catch(se){const K=se instanceof Error?se.message:`Failed to fetch trades for market ${j}`;throw _(X,K),se}finally{N(X,!1)}},[E,N,_]);k.useEffect(()=>{t.autoFetchMarkets&&n.length===0&&!l&&R().catch(console.error)},[t.autoFetchMarkets,n.length,l,R]);const B=a?n.find(j=>{var P;return j.market_id===a||((P=j.id)==null?void 0:P.toString())===a}):null,M=B?B.moniker||B.symbol||(B.baseAsset&&B.quoteAsset?`${B.baseAsset}-${B.quoteAsset}`:null):null,H=k.useCallback(j=>{const P=typeof j=="string"?j:j.toString(),X=n.find(se=>{var K;return se.market_id===P||((K=se.id)==null?void 0:K.toString())===P});return X?X.moniker||X.symbol||(X.baseAsset&&X.quoteAsset?`${X.baseAsset}/${X.quoteAsset}`:null):null},[n]);return{markets:n,marketsById:s,orderbooks:r,tickers:i,recentTrades:o,selectedMarketId:a,selectedMarket:B,selectedMarketSymbol:M,loadingMarkets:l,loadingOrderbooks:c,loadingTickers:u,loadingTrades:d,isLoading:j=>{if(j==="markets")return l;if(j.startsWith("orderbook_")){const P=j.split("_").slice(1).join("_");return c.has(P)}if(j.startsWith("ticker_")){const P=j.split("_").slice(1).join("_");return u.has(P)}if(j.startsWith("trades_")){const P=j.split("_").slice(1).join("_");return d.has(P)}return!1},errors:f,getError:j=>f.get(j),getMarket:x,getMarketBySymbol:w,getSymbolByMarketId:H,getOrderbook:v,getTicker:C,getRecentTrades:T,fetchMarkets:R,fetchMarket:z,fetchMarketBySymbol:L,fetchOrderbook:F,fetchTicker:$,fetchRecentTrades:O,updateOrderbook:y,clearCache:A,clearError:D,setSelectedMarketId:g,infoClient:e.current}}function CD(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const _D=t=>{switch(t){case"success":return TD;case"info":return ID;case"warning":return MD;case"error":return ND;default:return null}},ED=Array(12).fill(0),PD=({visible:t,className:e})=>oe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},oe.createElement("div",{className:"sonner-spinner"},ED.map((n,s)=>oe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),TD=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),MD=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ID=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ND=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),DD=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},oe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),oe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),AD=()=>{const[t,e]=oe.useState(document.hidden);return oe.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let jm=1;class RD{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:s,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:jm++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:s}),{...l,...e,id:i,dismissible:a,title:s}):l):this.addToast({title:s,...r,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i=s!==void 0,o;const a=r.then(async c=>{if(o=["resolve",c],oe.isValidElement(c))i=!1,this.create({id:s,type:"default",message:c});else if(LD(c)&&!c.ok){i=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,m=typeof d=="object"&&!oe.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:f,...m})}else if(c instanceof Error){i=!1;const d=typeof n.error=="function"?await n.error(c):n.error,f=typeof n.description=="function"?await n.description(c):n.description,m=typeof d=="object"&&!oe.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:f,...m})}else if(n.success!==void 0){i=!1;const d=typeof n.success=="function"?await n.success(c):n.success,f=typeof n.description=="function"?await n.description(c):n.description,m=typeof d=="object"&&!oe.isValidElement(d)?d:{message:d};this.create({id:s,type:"success",description:f,...m})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description,p=typeof u=="object"&&!oe.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:d,...p})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,n)=>{const s=(n==null?void 0:n.id)||jm++;return this.create({jsx:e(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Pn=new RD,OD=(t,e)=>{const n=(e==null?void 0:e.id)||jm++;return Pn.addToast({title:t,...e,id:n}),n},LD=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",jD=OD,FD=()=>Pn.toasts,BD=()=>Pn.getActiveToasts(),Me=Object.assign(jD,{success:Pn.success,info:Pn.info,warning:Pn.warning,error:Pn.error,custom:Pn.custom,message:Pn.message,promise:Pn.promise,dismiss:Pn.dismiss,loading:Pn.loading},{getHistory:FD,getToasts:BD});CD("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Sd(t){return t.label!==void 0}const $D=3,zD="24px",UD="16px",a1=4e3,WD=356,HD=14,VD=45,YD=200;function Bs(...t){return t.filter(Boolean).join(" ")}function GD(t){const[e,n]=t.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}const qD=t=>{var e,n,s,r,i,o,a,l,c;const{invert:u,toast:d,unstyled:f,interacting:p,setHeights:m,visibleToasts:x,heights:w,index:g,toasts:b,expanded:v,removeToast:y,defaultRichColors:S,closeButton:C,style:E,cancelButtonStyle:T,actionButtonStyle:N,className:_="",descriptionClassName:D="",duration:A,position:R,gap:z,expandByDefault:L,classNames:F,icons:$,closeButtonAriaLabel:O="Close toast"}=t,[B,M]=oe.useState(null),[H,j]=oe.useState(null),[P,X]=oe.useState(!1),[se,K]=oe.useState(!1),[J,G]=oe.useState(!1),[ee,he]=oe.useState(!1),[Ae,Ce]=oe.useState(!1),[ve,Fe]=oe.useState(0),[ct,I]=oe.useState(0),ce=oe.useRef(d.duration||A||a1),me=oe.useRef(null),Ne=oe.useRef(null),He=g===0,ue=g+1<=x,Y=d.type,te=d.dismissible!==!1,V=d.className||"",q=d.descriptionClassName||"",be=oe.useMemo(()=>w.findIndex(U=>U.toastId===d.id)||0,[w,d.id]),Q=oe.useMemo(()=>{var U;return(U=d.closeButton)!=null?U:C},[d.closeButton,C]),de=oe.useMemo(()=>d.duration||A||a1,[d.duration,A]),ye=oe.useRef(0),ae=oe.useRef(0),re=oe.useRef(0),pe=oe.useRef(null),[Ee,Ie]=R.split("-"),Be=oe.useMemo(()=>w.reduce((U,we,st)=>st>=be?U:U+we.height,0),[w,be]),Ve=AD(),Le=d.invert||u,Re=Y==="loading";ae.current=oe.useMemo(()=>be*z+Be,[be,Be]),oe.useEffect(()=>{ce.current=de},[de]),oe.useEffect(()=>{X(!0)},[]),oe.useEffect(()=>{const U=Ne.current;if(U){const we=U.getBoundingClientRect().height;return I(we),m(st=>[{toastId:d.id,height:we,position:d.position},...st]),()=>m(st=>st.filter(ze=>ze.toastId!==d.id))}},[m,d.id]),oe.useLayoutEffect(()=>{if(!P)return;const U=Ne.current,we=U.style.height;U.style.height="auto";const st=U.getBoundingClientRect().height;U.style.height=we,I(st),m(ze=>ze.find(le=>le.toastId===d.id)?ze.map(le=>le.toastId===d.id?{...le,height:st}:le):[{toastId:d.id,height:st,position:d.position},...ze])},[P,d.title,d.description,m,d.id,d.jsx,d.action,d.cancel]);const _e=oe.useCallback(()=>{K(!0),Fe(ae.current),m(U=>U.filter(we=>we.toastId!==d.id)),setTimeout(()=>{y(d)},YD)},[d,y,m,ae]);oe.useEffect(()=>{if(d.promise&&Y==="loading"||d.duration===1/0||d.type==="loading")return;let U;return v||p||Ve?(()=>{if(re.current<ye.current){const ze=new Date().getTime()-ye.current;ce.current=ce.current-ze}re.current=new Date().getTime()})():(()=>{ce.current!==1/0&&(ye.current=new Date().getTime(),U=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),_e()},ce.current))})(),()=>clearTimeout(U)},[v,p,d,Y,Ve,_e]),oe.useEffect(()=>{d.delete&&(_e(),d.onDismiss==null||d.onDismiss.call(d,d))},[_e,d.delete]);function Ge(){var U;if($!=null&&$.loading){var we;return oe.createElement("div",{className:Bs(F==null?void 0:F.loader,d==null||(we=d.classNames)==null?void 0:we.loader,"sonner-loader"),"data-visible":Y==="loading"},$.loading)}return oe.createElement(PD,{className:Bs(F==null?void 0:F.loader,d==null||(U=d.classNames)==null?void 0:U.loader),visible:Y==="loading"})}const $e=d.icon||($==null?void 0:$[Y])||_D(Y);var Z,W;return oe.createElement("li",{tabIndex:0,ref:Ne,className:Bs(_,V,F==null?void 0:F.toast,d==null||(e=d.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[Y],d==null||(n=d.classNames)==null?void 0:n[Y]),"data-sonner-toast":"","data-rich-colors":(Z=d.richColors)!=null?Z:S,"data-styled":!(d.jsx||d.unstyled||f),"data-mounted":P,"data-promise":!!d.promise,"data-swiped":Ae,"data-removed":se,"data-visible":ue,"data-y-position":Ee,"data-x-position":Ie,"data-index":g,"data-front":He,"data-swiping":J,"data-dismissible":te,"data-type":Y,"data-invert":Le,"data-swipe-out":ee,"data-swipe-direction":H,"data-expanded":!!(v||L&&P),"data-testid":d.testId,style:{"--index":g,"--toasts-before":g,"--z-index":b.length-g,"--offset":`${se?ve:ae.current}px`,"--initial-height":L?"auto":`${ct}px`,...E,...d.style},onDragEnd:()=>{G(!1),M(null),pe.current=null},onPointerDown:U=>{U.button!==2&&(Re||!te||(me.current=new Date,Fe(ae.current),U.target.setPointerCapture(U.pointerId),U.target.tagName!=="BUTTON"&&(G(!0),pe.current={x:U.clientX,y:U.clientY})))},onPointerUp:()=>{var U,we,st;if(ee||!te)return;pe.current=null;const ze=Number(((U=Ne.current)==null?void 0:U.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),vt=Number(((we=Ne.current)==null?void 0:we.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),le=new Date().getTime()-((st=me.current)==null?void 0:st.getTime()),xe=B==="x"?ze:vt,qe=Math.abs(xe)/le;if(Math.abs(xe)>=VD||qe>.11){Fe(ae.current),d.onDismiss==null||d.onDismiss.call(d,d),j(B==="x"?ze>0?"right":"left":vt>0?"down":"up"),_e(),he(!0);return}else{var Oe,Ue;(Oe=Ne.current)==null||Oe.style.setProperty("--swipe-amount-x","0px"),(Ue=Ne.current)==null||Ue.style.setProperty("--swipe-amount-y","0px")}Ce(!1),G(!1),M(null)},onPointerMove:U=>{var we,st,ze;if(!pe.current||!te||((we=window.getSelection())==null?void 0:we.toString().length)>0)return;const le=U.clientY-pe.current.y,xe=U.clientX-pe.current.x;var qe;const Oe=(qe=t.swipeDirections)!=null?qe:GD(R);!B&&(Math.abs(xe)>1||Math.abs(le)>1)&&M(Math.abs(xe)>Math.abs(le)?"x":"y");let Ue={x:0,y:0};const tt=Qe=>1/(1.5+Math.abs(Qe)/20);if(B==="y"){if(Oe.includes("top")||Oe.includes("bottom"))if(Oe.includes("top")&&le<0||Oe.includes("bottom")&&le>0)Ue.y=le;else{const Qe=le*tt(le);Ue.y=Math.abs(Qe)<Math.abs(le)?Qe:le}}else if(B==="x"&&(Oe.includes("left")||Oe.includes("right")))if(Oe.includes("left")&&xe<0||Oe.includes("right")&&xe>0)Ue.x=xe;else{const Qe=xe*tt(xe);Ue.x=Math.abs(Qe)<Math.abs(xe)?Qe:xe}(Math.abs(Ue.x)>0||Math.abs(Ue.y)>0)&&Ce(!0),(st=Ne.current)==null||st.style.setProperty("--swipe-amount-x",`${Ue.x}px`),(ze=Ne.current)==null||ze.style.setProperty("--swipe-amount-y",`${Ue.y}px`)}},Q&&!d.jsx&&Y!=="loading"?oe.createElement("button",{"aria-label":O,"data-disabled":Re,"data-close-button":!0,onClick:Re||!te?()=>{}:()=>{_e(),d.onDismiss==null||d.onDismiss.call(d,d)},className:Bs(F==null?void 0:F.closeButton,d==null||(s=d.classNames)==null?void 0:s.closeButton)},(W=$==null?void 0:$.close)!=null?W:DD):null,(Y||d.icon||d.promise)&&d.icon!==null&&(($==null?void 0:$[Y])!==null||d.icon)?oe.createElement("div",{"data-icon":"",className:Bs(F==null?void 0:F.icon,d==null||(r=d.classNames)==null?void 0:r.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||Ge():null,d.type!=="loading"?$e:null):null,oe.createElement("div",{"data-content":"",className:Bs(F==null?void 0:F.content,d==null||(i=d.classNames)==null?void 0:i.content)},oe.createElement("div",{"data-title":"",className:Bs(F==null?void 0:F.title,d==null||(o=d.classNames)==null?void 0:o.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?oe.createElement("div",{"data-description":"",className:Bs(D,q,F==null?void 0:F.description,d==null||(a=d.classNames)==null?void 0:a.description)},typeof d.description=="function"?d.description():d.description):null),oe.isValidElement(d.cancel)?d.cancel:d.cancel&&Sd(d.cancel)?oe.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||T,onClick:U=>{Sd(d.cancel)&&te&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,U),_e())},className:Bs(F==null?void 0:F.cancelButton,d==null||(l=d.classNames)==null?void 0:l.cancelButton)},d.cancel.label):null,oe.isValidElement(d.action)?d.action:d.action&&Sd(d.action)?oe.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||N,onClick:U=>{Sd(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,U),!U.defaultPrevented&&_e())},className:Bs(F==null?void 0:F.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function l1(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function KD(t,e){const n={};return[t,e].forEach((s,r)=>{const i=r===1,o=i?"--mobile-offset":"--offset",a=i?UD:zD;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(c=>{s[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof s[c]=="number"?`${s[c]}px`:s[c]}):l(a)}),n}const XD=oe.forwardRef(function(e,n){const{id:s,invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:l,className:c,offset:u,mobileOffset:d,theme:f="light",richColors:p,duration:m,style:x,visibleToasts:w=$D,toastOptions:g,dir:b=l1(),gap:v=HD,icons:y,containerAriaLabel:S="Notifications"}=e,[C,E]=oe.useState([]),T=oe.useMemo(()=>s?C.filter(P=>P.toasterId===s):C.filter(P=>!P.toasterId),[C,s]),N=oe.useMemo(()=>Array.from(new Set([i].concat(T.filter(P=>P.position).map(P=>P.position)))),[T,i]),[_,D]=oe.useState([]),[A,R]=oe.useState(!1),[z,L]=oe.useState(!1),[F,$]=oe.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=oe.useRef(null),B=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=oe.useRef(null),H=oe.useRef(!1),j=oe.useCallback(P=>{E(X=>{var se;return(se=X.find(K=>K.id===P.id))!=null&&se.delete||Pn.dismiss(P.id),X.filter(({id:K})=>K!==P.id)})},[]);return oe.useEffect(()=>Pn.subscribe(P=>{if(P.dismiss){requestAnimationFrame(()=>{E(X=>X.map(se=>se.id===P.id?{...se,delete:!0}:se))});return}setTimeout(()=>{HM.flushSync(()=>{E(X=>{const se=X.findIndex(K=>K.id===P.id);return se!==-1?[...X.slice(0,se),{...X[se],...P},...X.slice(se+1)]:[P,...X]})})})}),[C]),oe.useEffect(()=>{if(f!=="system"){$(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;const P=window.matchMedia("(prefers-color-scheme: dark)");try{P.addEventListener("change",({matches:X})=>{$(X?"dark":"light")})}catch{P.addListener(({matches:se})=>{try{$(se?"dark":"light")}catch(K){console.error(K)}})}},[f]),oe.useEffect(()=>{C.length<=1&&R(!1)},[C]),oe.useEffect(()=>{const P=X=>{var se;if(o.every(G=>X[G]||X.code===G)){var J;R(!0),(J=O.current)==null||J.focus()}X.code==="Escape"&&(document.activeElement===O.current||(se=O.current)!=null&&se.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[o]),oe.useEffect(()=>{if(O.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,H.current=!1)}},[O.current]),oe.createElement("section",{ref:n,"aria-label":`${S} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((P,X)=>{var se;const[K,J]=P.split("-");return T.length?oe.createElement("ol",{key:P,dir:b==="auto"?l1():b,tabIndex:-1,ref:O,className:c,"data-sonner-toaster":!0,"data-sonner-theme":F,"data-y-position":K,"data-x-position":J,style:{"--front-toast-height":`${((se=_[0])==null?void 0:se.height)||0}px`,"--width":`${WD}px`,"--gap":`${v}px`,...x,...KD(u,d)},onBlur:G=>{H.current&&!G.currentTarget.contains(G.relatedTarget)&&(H.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||H.current||(H.current=!0,M.current=G.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{z||R(!1)},onDragEnd:()=>R(!1),onPointerDown:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},T.filter(G=>!G.position&&X===0||G.position===P).map((G,ee)=>{var he,Ae;return oe.createElement(qD,{key:G.id,icons:y,index:ee,toast:G,defaultRichColors:p,duration:(he=g==null?void 0:g.duration)!=null?he:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:w,closeButton:(Ae=g==null?void 0:g.closeButton)!=null?Ae:l,interacting:z,position:P,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,closeButtonAriaLabel:g==null?void 0:g.closeButtonAriaLabel,removeToast:j,toasts:T.filter(Ce=>Ce.position==G.position),heights:_.filter(Ce=>Ce.position==G.position),setHeights:D,expandByDefault:a,gap:v,expanded:A,swipeDirections:e.swipeDirections})})):null}))}),Ul="onboard_mnemonic",jo="onboard_wallet_address",Wl="onboard_auth_token",Hl="onboard_refresh_token",Vl="onboard_expires_at";function vl(t){const[e,n]=k.useState(""),[s,r]=k.useState(""),[i,o]=k.useState(!1),[a,l]=k.useState(""),[c,u]=k.useState(void 0),[d,f]=k.useState(void 0),[p,m]=k.useState(!1),[x,w]=k.useState(null);k.useEffect(()=>{const _=localStorage.getItem(Ul),D=localStorage.getItem(jo),A=localStorage.getItem(Wl),R=localStorage.getItem(Hl),z=localStorage.getItem(Vl);if(n(_||""),r(D||""),A&&l(A),R&&u(R),z){const L=parseInt(z,10);isNaN(L)||f(L)}},[]);const g=k.useCallback(async _=>{if(!_||_.trim()==="")return null;o(!0);try{We.isReady()||await We.initialize();const D=await We.generateAddress(_.trim(),0);return D.success&&D.address?D.address:(console.error("Failed to generate address:",D.error),null)}catch(D){return console.error("Error generating address:",D),null}finally{o(!1)}},[]),b=k.useCallback(async _=>{const D=_.trim();if(D===""){n(""),r(""),localStorage.removeItem(Ul),localStorage.removeItem(jo);return}n(D),localStorage.setItem(Ul,D);const A=await g(D);A?(r(A),localStorage.setItem(jo,A)):(r(""),localStorage.removeItem(jo))},[g]),v=k.useCallback((_,D)=>{const A=_.trim(),R=D.trim().toLowerCase();n(A),r(R),localStorage.setItem(Ul,A),localStorage.setItem(jo,R)},[]),y=k.useCallback(()=>{n(""),r(""),localStorage.removeItem(Ul),localStorage.removeItem(jo)},[]),S=k.useMemo(()=>{if(e==="")return null;const _=e.trim();if(_==="")return null;try{const D=cu.fromPhrase(_,"","m/44'/60'/0'/0/0");if(s&&D.address.toLowerCase()!==s.toLowerCase())return console.warn("Address mismatch: derived address does not match stored address"),null;const A=BigInt(D.privateKey),R=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(A===0n||A>=R)return console.error("Invalid private key: out of secp256k1 curve order"),null;const L=A.toString(16).toLowerCase().padStart(64,"0");return/^[0-9a-f]{64}$/.test(L)?L:(console.error("Invalid private key format"),null)}catch(D){return console.error("Error computing private key:",D),null}},[e,s]),C=k.useCallback(async(_,D,A,R)=>{m(!0),w(null);try{await b(_);const z=await s3(_,D,A,R);if(z.success&&z.authToken)l(z.authToken),u(z.refreshToken),f(z.expiresAt),localStorage.setItem(Wl,z.authToken),z.refreshToken&&localStorage.setItem(Hl,z.refreshToken),z.expiresAt&&localStorage.setItem(Vl,z.expiresAt.toString()),Me.success("Onboarding successful",{description:"Wallet authenticated and auth token generated.",duration:5e3});else{const L=z.error||"Onboarding failed";w(L),l(""),u(void 0),f(void 0),localStorage.removeItem(Wl),localStorage.removeItem(Hl),localStorage.removeItem(Vl),Me.error("Onboarding failed",{description:L,duration:6e3})}}catch(z){const L=(z==null?void 0:z.message)||"Unknown error during onboarding";w(L),l(""),u(void 0),f(void 0),localStorage.removeItem(Wl),localStorage.removeItem(Hl),localStorage.removeItem(Vl),Me.error("Onboarding error",{description:L,duration:6e3})}finally{m(!1)}},[b]),E=k.useCallback(()=>{w(null)},[]),T=k.useCallback(()=>{l(""),u(void 0),f(void 0),w(null),m(!1),localStorage.removeItem(Wl),localStorage.removeItem(Hl),localStorage.removeItem(Vl)},[]),N=k.useCallback(()=>{y(),T()},[y,T]);return{mnemonic:e,walletAddress:s,privateKey:S,authToken:a,refreshToken:c,expiresAt:d,loading:p,error:x,addressLoading:i,onboard:C,setMnemonic:b,setAccountData:v,clearAccountData:y,clearError:E,reset:T,resetAll:N}}function QD(){const{setAccountData:t}=vl(),{mnemonic:e,setMnemonic:n,addressIndex:s,setAddressIndex:r,result:i,loading:o,generateAddress:a,isReady:l}=I6();return k.useEffect(()=>{i!=null&&i.success&&i.address&&e&&t(e,i.address)},[i,e,t]),h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Address Generator"}),h.jsx("p",{children:"Generate Ethereum addresses from mnemonic phrases"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:e,onChange:c=>n(c.target.value),placeholder:"Enter your mnemonic phrase...",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),h.jsx("input",{id:"addressIndex",type:"number",value:s,onChange:c=>r(parseInt(c.target.value)||0),min:"0",max:"1000"})]}),h.jsx("button",{className:"button",onClick:a,disabled:o||!l,children:o?"Generating...":"Generate Address"}),i&&h.jsx("div",{className:`output ${i.success?"success":"error"}`,children:i.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Generated Address:"}),h.jsx("br",{}),i.address,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Index: ",i.index,h.jsx("br",{}),"Mnemonic: ",i.mnemonic]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),i.error]})})]})}function JD(){var f,p;const{mnemonic:t,setMnemonic:e,message:n,setMessage:s,useEIP712:r,setUseEIP712:i,addressIndex:o,setAddressIndex:a,result:l,loading:c,signMessage:u,isReady:d}=N6();return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Message Signer"}),h.jsx("p",{children:"Sign messages with your private key"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"message",children:"Message to Sign:"}),h.jsx("textarea",{id:"message",value:n,onChange:m=>s(m.target.value),placeholder:"Enter message to sign...",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),h.jsx("input",{id:"addressIndex",type:"number",value:o,onChange:m=>a(parseInt(m.target.value)||0),min:"0",max:"1000"})]}),h.jsx("div",{className:"form-group",children:h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:r,onChange:m=>i(m.target.checked),style:{marginRight:"0.5rem"}}),"Use EIP-712 Typed Data"]})}),h.jsx("button",{className:"button",onClick:u,disabled:c||!d,children:c?"Signing...":"Sign Message"}),l&&h.jsx("div",{className:`output ${l.success?"success":"error"}`,children:l.success?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Signature:"}),h.jsx("br",{}),l.signature,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Message: ",l.message,h.jsx("br",{}),"EIP-712: ",(f=l.options)!=null&&f.useEIP712?"Yes":"No",h.jsx("br",{}),"Address Index: ",((p=l.options)==null?void 0:p.addressIndex)||0]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),l.error]})})]})}function ZD(){var w,g,b,v;const[t,e]=k.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[n,s]=k.useState(""),[r,i]=k.useState("1000000000000000000000000"),[o,a]=k.useState(0),[l,c]=k.useState(0),[u,d]=k.useState(null),[f,p]=k.useState(!1),m=async()=>{if(!We.isReady()){d({success:!1,error:"WASM module not ready"});return}if(!n){d({success:!1,error:"Wallet address is required"});return}p(!0),d(null);try{const y={nonce:o||Date.now(),deadline:l||Date.now()+36e5},S=await We.signDeposit(t,n,r,y);d(S)}catch(y){d({success:!1,error:y instanceof Error?y.message:"Unknown error"})}finally{p(!1)}},x=async()=>{if(!We.isReady()){d({success:!1,error:"WASM module not ready"});return}p(!0),d(null);try{const y=await We.generateAddress(t,0);y.success&&y.address?(s(y.address),d({success:!0,message:"Wallet address generated and set",address:y.address})):d({success:!1,error:y.error||"Failed to generate address"})}catch(y){d({success:!1,error:y instanceof Error?y.message:"Unknown error"})}finally{p(!1)}};return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Deposit Signer"}),h.jsx("p",{children:"Sign deposit messages for the Morpheum protocol"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),h.jsx("textarea",{id:"mnemonic",value:t,onChange:y=>e(y.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"walletAddress",children:"Wallet Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"walletAddress",type:"text",value:n,onChange:y=>s(y.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:x,disabled:f||!We.isReady(),style:{padding:"0.75rem 1rem"},children:"Generate"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"amount",children:"Amount (wei):"}),h.jsx("input",{id:"amount",type:"text",value:r,onChange:y=>i(y.target.value),placeholder:"1000000000000000000000000"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"nonce",children:"Nonce (0 for current timestamp):"}),h.jsx("input",{id:"nonce",type:"number",value:o,onChange:y=>a(parseInt(y.target.value)||0),min:"0"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"deadline",children:"Deadline (0 for 1 hour from now):"}),h.jsx("input",{id:"deadline",type:"number",value:l,onChange:y=>c(parseInt(y.target.value)||0),min:"0"})]})]}),h.jsx("button",{className:"button",onClick:m,disabled:f||!We.isReady()||!n,children:f?"Signing Deposit...":"Sign Deposit"}),u&&h.jsx("div",{className:`output ${u.success?"success":"error"}`,children:u.success?h.jsx(h.Fragment,{children:u.signature?h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Deposit Signature:"}),h.jsx("br",{}),u.signature,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Details:"}),h.jsx("br",{}),"Wallet: ",(w=u.options)==null?void 0:w.walletAddress,h.jsx("br",{}),"Amount: ",(g=u.options)==null?void 0:g.amount," wei",h.jsx("br",{}),"Nonce: ",(b=u.options)==null?void 0:b.nonce,h.jsx("br",{}),"Deadline: ",(v=u.options)==null?void 0:v.deadline]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Wallet Address Generated:"}),h.jsx("br",{}),u.address,h.jsx("br",{}),h.jsx("br",{}),h.jsx("strong",{children:"Message:"}),h.jsx("br",{}),u.message]})}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),u.error]})})]})}function eA(){const{ownerMnemonic:t,setOwnerMnemonic:e,ownerAddress:n,setOwnerAddress:s,agentAddress:r,setAgentAddress:i,agentPrivateKey:o,expiresInDays:a,setExpiresInDays:l,permissions:c,setPermissions:u,agentName:d,setAgentName:f,nonce:p,setNonce:m,result:x,loading:w,generateOwnerAddress:g,generateAgentKeypair:b,prepareAgentSign:v,signAgentApproval:y,isReady:S}=D6();return h.jsxs("div",{className:"component",children:[h.jsx("h3",{children:"Agent Delegation"}),h.jsx("p",{children:"Approve an agent private key to act on behalf of the owner wallet"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"ownerMnemonic",children:"Owner Mnemonic (for signing approval):"}),h.jsx("textarea",{id:"ownerMnemonic",value:t,onChange:C=>e(C.target.value),placeholder:"Enter owner mnemonic phrase...",rows:2})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"ownerAddress",type:"text",value:n,onChange:C=>s(C.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:g,disabled:w||!S,style:{padding:"0.75rem 1rem"},children:"Generate"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentAddress",children:"Agent Address:"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"agentAddress",type:"text",value:r,onChange:C=>i(C.target.value),placeholder:"0x...",style:{flex:1}}),h.jsx("button",{className:"button secondary",onClick:b,disabled:w||!S,style:{padding:"0.75rem 1rem"},children:"Generate Keypair"})]})]}),o&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentPrivateKey",children:"Agent Private Key (save securely):"}),h.jsx("input",{id:"agentPrivateKey",type:"text",value:o,readOnly:!0,style:{fontFamily:"monospace",fontSize:"0.9rem"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"agentName",children:"Agent Name (optional):"}),h.jsx("input",{id:"agentName",type:"text",value:d,onChange:C=>f(C.target.value),placeholder:"TradingBot"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"expiresInDays",children:"Expires In Days:"}),h.jsx("input",{id:"expiresInDays",type:"number",value:a,onChange:C=>l(parseInt(C.target.value)||180),min:"1",max:"365"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"permissions",children:"Permissions (comma-separated):"}),h.jsx("input",{id:"permissions",type:"text",value:c,onChange:C=>u(C.target.value),placeholder:"clob::submit_order,clob::cancel_order"}),h.jsx("small",{style:{display:"block",marginTop:"0.5rem",opacity:.8},children:"Example: clob::submit_order, clob::cancel_order, clob::modify_order"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),h.jsx("input",{id:"nonce",type:"text",value:p,onChange:C=>m(C.target.value),placeholder:Date.now().toString()})]}),h.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[h.jsx("button",{className:"button secondary",onClick:v,disabled:w||!S||!n||!r,children:w?"Preparing...":"Prepare Agent Sign"}),h.jsx("button",{className:"button",onClick:y,disabled:w||!S||!n||!r||!t,children:w?"Signing Approval...":"Sign Agent Approval"})]}),x&&h.jsx("div",{className:`output ${x.success?"success":"error"}`,children:x.success?h.jsxs(h.Fragment,{children:[x.signature&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Agent Approval Signature:"}),h.jsx("br",{}),x.signature,h.jsx("br",{}),h.jsx("br",{})]}),x.typedData&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"EIP-712 Typed Data:"}),h.jsx("br",{}),h.jsx("pre",{style:{fontSize:"0.85rem",overflow:"auto",maxHeight:"300px"},children:JSON.stringify(x.typedData,null,2)}),h.jsx("br",{}),h.jsx("strong",{children:"Usage:"}),h.jsx("br",{}),"Use this typed data with MetaMask or other EIP-712 compatible wallets to sign the agent approval."]})]}):h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Error:"}),h.jsx("br",{}),x.error]})})]})}function tA({status:t}){const e=()=>t.loading?"loading":t.loaded?"success":t.error?"error":"loading",n=()=>t.loading?"Loading WASM...":t.loaded?"WASM Ready":t.error?"WASM Error":"Unknown";return h.jsxs("div",{className:"App-section",children:[h.jsx("h3",{children:"WASM Status"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[h.jsx("span",{className:`status ${e()}`,children:n()}),t.loading&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"Initializing WebAssembly module..."}),t.loaded&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"morm_signer.wasm loaded successfully"}),t.error&&h.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:t.error})]})]})}const nA="modulepreload",sA=function(t){return"/"+t},c1={},rA=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=sA(l),l in c1)return;c1[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":nA,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Bu="https://router.morpheum.io",h0="wss://router.morpheum.io/websocket",Bb="ios-device-1234567890",iA=({isRunning:t,onClick:e})=>h.jsx("button",{onClick:e,disabled:t,style:{color:"#fff",backgroundColor:t?"#ccc":"#007bff",cursor:t?"not-allowed":"pointer"},children:t?"Running Tests...":"Run All Tests"}),oA=({mnemonic:t,baseURL:e,onboardLoading:n,isRunning:s,onOnboard:r})=>{const i=n||s||!t||t.trim()==="";return h.jsx("button",{onClick:()=>{t&&t.trim()!==""&&r(t,e)},disabled:i,style:{color:i?"#ccc":"#fff",backgroundColor:i?"#ccc":"#28a745",cursor:i?"not-allowed":"pointer"},children:n?"Onboarding...":"Onboard & Get Auth Token"})},aA=({isRunning:t,onClick:e})=>h.jsx("button",{onClick:e,disabled:t,style:{color:t?"#ccc":"#fff",backgroundColor:t?"#ccc":"#dc3545",cursor:t?"not-allowed":"pointer"},children:"Clear Results"}),lA=({onClick:t})=>h.jsx("button",{onClick:t,className:"sdk-test-button-dismiss",children:"Dismiss"}),cA=({result:t})=>h.jsxs("div",{className:`sdk-test-result-item ${t.success?"success":"error"}`,children:[h.jsxs("div",{className:"sdk-test-result-content",children:[h.jsxs("div",{className:"sdk-test-result-message",children:[t.success?"":""," ",t.message]}),t.error&&h.jsxs("div",{className:"sdk-test-result-error",children:["Error: ",t.error]}),t.data&&h.jsxs("details",{className:"sdk-test-result-data",children:[h.jsx("summary",{children:"View Data"}),h.jsx("pre",{children:JSON.stringify(t.data,null,2)})]})]}),h.jsx("div",{className:"sdk-test-result-timestamp",children:new Date(t.timestamp).toLocaleTimeString()})]}),uA=({sectionName:t,isExpanded:e,onToggle:n})=>h.jsxs("h2",{className:"sdk-test-section-header",onClick:n,children:[h.jsx("span",{children:t}),h.jsx("span",{className:"sdk-test-section-chevron",children:e?"":""})]});function dA(){var Ce,ve,Fe,ct;const[t,e]=k.useState(Bu),[n,s]=k.useState(""),[r,i]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(Bb),[u,d]=k.useState({}),[f,p]=k.useState(!1),[m,x]=k.useState(new Set),w=k.useRef(null),g=k.useRef(null),b=k.useRef(t),v=k.useRef([]),y=k.useRef(""),{markets:S,fetchMarkets:C}=Ti({baseURL:t,sessionToken:r,autoFetchMarkets:!1}),{mnemonic:E,walletAddress:T,authToken:N,loading:_,error:D,onboard:A,clearError:R,setMnemonic:z}=vl();k.useEffect(()=>{E||z("legal winner thank year wave sausage worth useful legal winner thank yellow")},[E,z]);const L=k.useRef(E||"");k.useEffect(()=>{L.current=E||""},[E]);const{buckets:F,loading:$,error:O,refresh:B}=d3({baseURL:t,authToken:r||o,walletAddress:T||void 0,refreshInterval:0});k.useEffect(()=>{N&&(a(N),localStorage.setItem("authToken",N))},[N]),k.useEffect(()=>{o&&o.trim()!==""&&localStorage.setItem("authToken",o)},[o]);const M=k.useRef(f);k.useEffect(()=>{M.current===!0&&f===!1&&setTimeout(()=>{const I=Object.values(u).flatMap(He=>He.results),ce=I.filter(He=>He.success).length,me=I.length,Ne=me-ce;me>0&&(Ne===0?Me.success("All tests passed",{description:`${me} test(s) completed successfully.`,duration:5e3}):Me.warning("Tests completed with failures",{description:`${ce}/${me} tests passed. ${Ne} test(s) failed.`,duration:6e3}))},100),M.current=f},[f,u]),k.useEffect(()=>{const I=localStorage.getItem("authToken");I&&!o&&a(I)},[]);const H=S.length>0?(((Ce=S.find(I=>I.active))==null?void 0:Ce.market_id)??S[0].market_id)||(((Fe=(ve=S.find(I=>I.active))==null?void 0:ve.id)==null?void 0:Fe.toString())??((ct=S[0].id)==null?void 0:ct.toString())??""):null,j=H??n;k.useEffect(()=>{H&&n!==H&&s(H)},[H]),k.useEffect(()=>{b.current=t},[t]);const P=(I,ce)=>{d(me=>{const Ne=me[I]||{name:I,results:[]};return{...me,[I]:{...Ne,results:[...Ne.results,ce]}}})},X=()=>{d({}),x(new Set)},se=I=>{x(ce=>{const me=new Set(ce);return me.has(I)?me.delete(I):me.add(I),me})};k.useEffect(()=>{const I=Object.keys(u).filter(ce=>u[ce].results.length>0);I.length>0&&x(ce=>{const me=new Set(ce);return I.forEach(Ne=>me.add(Ne)),me})},[u]);const K=()=>{const I="Utilities";P(I,{success:!0,message:"Testing utility functions...",timestamp:Date.now()});try{const ce=ut(1);P(I,{success:ce==="100000000",message:`toSatoshi(1.0) = ${ce}`,data:{expected:"100000000",got:ce},timestamp:Date.now()});const me=ut("1.5");P(I,{success:me==="150000000",message:`toSatoshi("1.5") = ${me}`,data:{expected:"150000000",got:me},timestamp:Date.now()});const Ne=ke("100000000");P(I,{success:Ne===1,message:`fromSatoshi("100000000") = ${Ne}`,data:{expected:1,got:Ne},timestamp:Date.now()});const He=F_(1);P(I,{success:He===1e8,message:`toSatoshiUint64(1.0) = ${He}`,data:{expected:1e8,got:He},timestamp:Date.now()});const ue=ev("100000000"),Y=ev("abc");P(I,{success:ue&&!Y,message:`isValidSatoshi tests: "100000000"=${ue}, "abc"=${Y}`,data:{valid1:ue,valid2:Y},timestamp:Date.now()});const te=[1,1.5,2],V=VM(te),q=YM(V);P(I,{success:q.length===3,message:`Batch conversion: ${te.length} items`,data:{input:te,satoshi:V,decimal:q},timestamp:Date.now()}),P(I,{success:fa===1e8,message:`SATOSHI_SCALE = ${fa}`,data:{expected:1e8,got:fa},timestamp:Date.now()})}catch(ce){P(I,{success:!1,message:"Utility test error",error:ce.message,timestamp:Date.now()})}},J=async(I="Authentication")=>{if(!T||T.trim()===""){P(I,{success:!1,message:"Authentication skipped: Wallet address required",timestamp:Date.now()});return}if(!We.isReady()){P(I,{success:!1,message:"Authentication failed: mormSigner not loaded. Please initialize mormSigner first for address generation.",timestamp:Date.now()});return}try{P(I,{success:!0,message:"Starting authentication (onboarding) with ethers.js EIP-712 signing...",timestamp:Date.now()});const{onboardAndGetAuthToken:ce}=await rA(async()=>{const{onboardAndGetAuthToken:Ne}=await Promise.resolve().then(()=>C6);return{onboardAndGetAuthToken:Ne}},void 0);if(P(I,{success:!0,message:"Calling onboardAndGetAuthToken (handles nonce, EIP-712 signing with ethers.js, and API request)...",timestamp:Date.now()}),!E)throw new Error("Mnemonic is required for authentication");const me=await ce(E,b.current);if(!me.success||!me.authToken)throw new Error(me.error||"Onboarding failed");a(me.authToken),localStorage.setItem("authToken",me.authToken),P(I,{success:!0,message:"AUTHENTICATION SUCCESSFUL!",data:{walletAddress:T,authToken:me.authToken.substring(0,32)+"...",refreshToken:me.refreshToken,expiresAt:me.expiresAt},timestamp:Date.now()})}catch(ce){const me=ce.message||String(ce);P(I,{success:!1,message:`Authentication failed: ${me}`,error:me,timestamp:Date.now()})}},G=async()=>{var He;const I="Wallet Specific";g.current=new pn({baseURL:b.current}),r&&g.current&&g.current.setSessionToken(r),P(I,{success:!0,message:"Waiting for wallet address to be available...",timestamp:Date.now()});const ce=5e3,me=200;let Ne=0;for(;!T||T.trim()==="";){if(Ne>=ce){P(I,{success:!1,message:"Timeout: Wallet address not available after 5 seconds",error:"Wallet address is required for wallet-specific tests. Please ensure mnemonic is provided.",timestamp:Date.now()});return}await new Promise(ue=>setTimeout(ue,me)),Ne+=me}if(!T||T.trim()===""){P(I,{success:!1,message:"Wallet address is required for wallet-specific tests",error:"Wallet address not available",timestamp:Date.now()});return}P(I,{success:!0,message:`Wallet address available: ${T.substring(0,10)}...`,timestamp:Date.now()});try{P(I,{success:!0,message:`Testing getBalance() for asset "MORM" at address ${T.substring(0,10)}...`,timestamp:Date.now()});try{const Y=await g.current.getBalance(T,"MORM"),te=(Y==null?void 0:Y.balance)||(Y==null?void 0:Y.amount)||(Y==null?void 0:Y.value)||"N/A",V=typeof te=="string"?te:JSON.stringify(te);P(I,{success:!!Y,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: MORM | Balance: ${V} (raw satoshi format)`,data:{balance:Y,asset:"MORM",walletAddress:T.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(Y){P(I,{success:!1,message:'getBalance() failed for asset "MORM" (may require authentication)',error:Y.message,data:{asset:"MORM",walletAddress:T.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}P(I,{success:!0,message:`Testing getBalance() for asset "USDC" at address ${T.substring(0,10)}...`,timestamp:Date.now()});try{const Y=await g.current.getBalance(T,"USDC"),te=(Y==null?void 0:Y.balance)||(Y==null?void 0:Y.amount)||(Y==null?void 0:Y.value)||"N/A",V=typeof te=="string"?te:JSON.stringify(te);P(I,{success:!!Y,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: USDC | Balance: ${V} (raw satoshi format)`,data:{balance:Y,asset:"USDC",walletAddress:T.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(Y){P(I,{success:!1,message:'getBalance() failed for asset "USDC" (may require authentication)',error:Y.message,data:{asset:"USDC",walletAddress:T.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}try{const Y=await g.current.getBalanceDecimal(T,"USDC");P(I,{success:!!Y,message:"getBalanceDecimal() - GET /bank/v1/balance/{address}",data:Y,timestamp:Date.now()})}catch(Y){P(I,{success:!1,message:"getBalanceDecimal() failed",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.getBalances(T);P(I,{success:!!Y,message:"getBalances() - GET /bank/v1/balances/{address}",data:Y,timestamp:Date.now()})}catch(Y){P(I,{success:!1,message:"getBalances() failed (may require authentication)",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.getPositions(T);P(I,{success:Array.isArray(Y),message:`getPositions() - GET /bucket/v1/address/{address}/positions returned ${Array.isArray(Y)?Y.length:0} positions`,data:Y,timestamp:Date.now()})}catch(Y){P(I,{success:!1,message:"getPositions() failed",error:Y.message,timestamp:Date.now()})}let ue=[];try{const Y=await g.current.getOrders(T);ue=(Y==null?void 0:Y.orders)||[];const te=Y&&(Array.isArray(ue)||Y.total_count!==void 0);P(I,{success:te,message:`getOrders() - GET /clob/v1/address/orders?address={address} returned ${Array.isArray(ue)?ue.length:0} orders (total_count: ${(Y==null?void 0:Y.total_count)??"N/A"})`,data:{orders:Array.isArray(ue)?ue.slice(0,3):ue,total_count:Y==null?void 0:Y.total_count,timestamp:Y==null?void 0:Y.timestamp},timestamp:Date.now()})}catch(Y){P(I,{success:!1,message:"getOrders() failed",error:Y.message,timestamp:Date.now()})}if(Array.isArray(ue)&&ue.length>0){const Y=ue[0],te=(Y==null?void 0:Y.orderId)||(Y==null?void 0:Y.order_id)||(Y==null?void 0:Y.id);if(te){P(I,{success:!0,message:`Testing getOrder() for order ID: ${te.substring(0,16)}... (from getOrders result)`,timestamp:Date.now()});try{const V=await g.current.getOrder(te);P(I,{success:!!V,message:`getOrder() - GET /clob/v1/order/{orderID} | Order ID: ${te.substring(0,16)}...`,data:{order:V,orderId:te,source:"First order from getOrders() result"},timestamp:Date.now()})}catch(V){P(I,{success:!1,message:`getOrder() failed for order ID: ${te.substring(0,16)}...`,error:V.message,data:{orderId:te,endpoint:"GET /clob/v1/order/{orderID}"},timestamp:Date.now()})}}else P(I,{success:!1,message:"getOrder() test skipped: No valid order ID found in getOrders() result",error:"Order ID not found in order object",data:{order:Y,availableFields:Object.keys(Y||{})},timestamp:Date.now()})}else P(I,{success:!0,message:"getOrder() test skipped: No orders available from getOrders() (need at least 1 order)",data:{ordersCount:ue.length,note:"getOrder() test requires at least one order from getOrders()"},timestamp:Date.now()});try{const Y=await g.current.getOrderHistory(T),te=Array.isArray(Y)?Y:(Y==null?void 0:Y.orders)||[],V=Y&&(Array.isArray(te)||Y.orders!==void 0);P(I,{success:V,message:`getOrderHistory() - GET /clob/v1/address/orders/history?address={address} returned ${Array.isArray(te)?te.length:0} orders`,data:Array.isArray(te)?te.slice(0,3):Y,timestamp:Date.now()})}catch(Y){P(I,{success:!1,message:"getOrderHistory() failed",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.getTradeHistory(T),te=Array.isArray(Y)?Y:(Y==null?void 0:Y.trades)||(Y==null?void 0:Y.data)||[],V=Y&&(Array.isArray(te)||Y.trades!==void 0||Y.data!==void 0);P(I,{success:V,message:`getTradeHistory() - GET /clob/v1/address/trades?address={address} returned ${Array.isArray(te)?te.length:0} trades`,data:Array.isArray(te)?te.slice(0,3):Y,timestamp:Date.now()})}catch(Y){P(I,{success:!1,message:"getTradeHistory() failed",error:Y.message,timestamp:Date.now()})}try{const Y=await g.current.getBuckets(T);if(P(I,{success:Array.isArray(Y)||Y!==void 0,message:`getBuckets() - GET /bucket/v1/address/{address}/buckets returned ${Array.isArray(Y)?Y.length:"data"}`,data:Array.isArray(Y)?Y.slice(0,3):Y,timestamp:Date.now()}),Array.isArray(Y)&&Y.length>0){const te=Y[0],V=te.bucket_id||te.id||te.bucketId;if(V)try{const q=await g.current.getBucket(V);P(I,{success:!!q,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} (${V.substring(0,16)}...)`,data:q,timestamp:Date.now()})}catch(q){P(I,{success:!1,message:`getBucket(${V.substring(0,16)}...) failed`,error:q.message,timestamp:Date.now()})}}}catch(Y){P(I,{success:!1,message:"getBuckets() failed",error:Y.message,timestamp:Date.now()})}P(I,{success:!0,message:"Testing useBuckets hook...",timestamp:Date.now()});try{if(await B(),P(I,{success:!O&&!$,message:`useBuckets hook: ${F.length} buckets loaded`,data:{buckets:F.slice(0,3),loading:$,error:O,totalBuckets:F.length},timestamp:Date.now()}),F.length>0){const te=(He=F[0].bucketId)==null?void 0:He.toString();if(te)try{const V=await g.current.getBucket(te);P(I,{success:!!V,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} via hook bucket ID (${te.substring(0,16)}...)`,data:V,timestamp:Date.now()})}catch(V){P(I,{success:!1,message:"getBucket() via hook bucket ID failed",error:V.message,timestamp:Date.now()})}}}catch(Y){P(I,{success:!1,message:"useBuckets hook test failed",error:Y.message,timestamp:Date.now()})}}catch(ue){P(I,{success:!1,message:"Wallet Specific test error",error:ue.message,timestamp:Date.now()})}},ee=async()=>{var ce,me,Ne,He,ue;const I="InfoClient";g.current=new pn({baseURL:b.current}),r&&g.current&&g.current.setSessionToken(r);try{P(I,{success:!0,message:"Testing getMarkets()...",timestamp:Date.now()});const Y=await C();v.current=Array.isArray(Y)?Y:[];const te=Array.isArray(Y)?Y.length:0,V=te>0?Y.find(Q=>Q.active||Q.status==="active")??Y[0]:null,q=(V==null?void 0:V.market_id)??((ce=V==null?void 0:V.id)==null?void 0:ce.toString())??null;if(P(I,{success:Array.isArray(Y)&&te>0,message:`getMarkets() - GET /market/v1/all returned ${te} markets${q?` | Using market ID: ${q} (${(V==null?void 0:V.moniker)||(V==null?void 0:V.symbol)||"auto-selected"})`:""}`,data:{count:te,defaultMarketId:q,defaultMarket:V?{id:V.id,market_id:V.market_id,moniker:V.moniker,symbol:V.symbol,active:V.active,status:V.status}:null,markets:Y.slice(0,5)},timestamp:Date.now()}),q){s(q),y.current=q;const Q=(V==null?void 0:V.moniker)||(V==null?void 0:V.symbol)||(V!=null&&V.baseAsset&&(V!=null&&V.quoteAsset)?`${V.baseAsset}-${V.quoteAsset}`:"Unknown");P(I,{success:!0,message:`Markets loaded: ${te} | Auto-selected: ${Q} (ID: ${q.substring(0,10)}...)`,data:{selectedMarketId:q,count:te,market:V},timestamp:Date.now()}),P(I,{success:!0,message:"Waiting 1.5s for market selection to take effect...",timestamp:Date.now()}),await new Promise(de=>setTimeout(de,1500)),P(I,{success:!0,message:`Market ID ready: ${q}`,data:{marketId:q},timestamp:Date.now()}),P(I,{success:!0,message:`Proceeding with market: ${Q}`,timestamp:Date.now()})}const be=q||j||n;if(be){P(I,{success:!0,message:`Testing getOrderbook(${be}, true)...`,timestamp:Date.now()});try{const Q=await g.current.getOrderbook(be,!0);P(I,{success:Q&&(Q.bids||Q.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} with decimal conversion",data:{bids:(me=Q==null?void 0:Q.bids)==null?void 0:me.slice(0,3),asks:(Ne=Q==null?void 0:Q.asks)==null?void 0:Ne.slice(0,3)},timestamp:Date.now()});const de=await g.current.getOrderbook(be,!1);P(I,{success:de&&(de.bids||de.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} raw satoshi format",data:{bids:(He=de==null?void 0:de.bids)==null?void 0:He.slice(0,2),asks:(ue=de==null?void 0:de.asks)==null?void 0:ue.slice(0,2)},timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} failed",error:Q.message,timestamp:Date.now()})}P(I,{success:!0,message:`Testing getTicker(${be})...`,timestamp:Date.now()});try{const Q=await g.current.getTicker(be);P(I,{success:!!Q,message:"getTicker() - GET /market/v1/market/{marketId}/stats",data:Q,timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"getTicker() - GET /market/v1/market/{marketId}/stats failed",error:Q.message,timestamp:Date.now()})}P(I,{success:!0,message:`Testing getRecentTrades(${be}, 10)...`,timestamp:Date.now()});try{const Q=await g.current.getRecentTrades(be,10);P(I,{success:Array.isArray(Q),message:`getRecentTrades() - GET /clob/v1/trades?market_id={marketId} returned ${Array.isArray(Q)?Q.length:0} trades`,data:Q==null?void 0:Q.slice(0,3),timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"getRecentTrades() - GET /clob/v1/trades?market_id={marketId} failed",error:Q.message,timestamp:Date.now()})}}else P(I,{success:!1,message:"Skipping market-specific tests: No market ID available",error:"Please ensure markets are loaded and a market is selected",timestamp:Date.now()});P(I,{success:!0,message:"Testing router/v1 endpoints...",timestamp:Date.now()});try{const Q=await g.current.getSupportedActions();P(I,{success:Array.isArray(Q==null?void 0:Q.actions)||(Q==null?void 0:Q.actions)!==void 0,message:"getSupportedActions() - GET /router/v1/tx/supported-actions",data:Q,timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"getSupportedActions() - GET /router/v1/tx/supported-actions failed",error:Q.message,timestamp:Date.now()})}try{const Q=await g.current.validateAction("clob::submit_order");P(I,{success:(Q==null?void 0:Q.valid)!==void 0||Q!==void 0,message:'validateAction() - GET /router/v1/tx/validate-action ("clob::submit_order")',data:Q,timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"validateAction() - GET /router/v1/tx/validate-action failed",error:Q.message,timestamp:Date.now()})}try{const Q=await g.current.getHealthSummary();P(I,{success:!!Q,message:"getHealthSummary() - GET /router/v1/health/summary",data:Q,timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"getHealthSummary() - GET /router/v1/health/summary failed",error:Q.message,timestamp:Date.now()})}try{const Q=await g.current.getHealthDaemons();P(I,{success:!!Q,message:"getHealthDaemons() - GET /router/v1/health/daemons",data:Q,timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"getHealthDaemons() - GET /router/v1/health/daemons failed",error:Q.message,timestamp:Date.now()})}try{const Q=await g.current.getHealthOracle();P(I,{success:!!Q,message:"getHealthOracle() - GET /router/v1/health/oracle",data:Q,timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"getHealthOracle() - GET /router/v1/health/oracle failed",error:Q.message,timestamp:Date.now()})}try{const Q=await g.current.getServerTime();P(I,{success:!!Q&&(Q.serverTime!==void 0||Q!==void 0),message:"getServerTime() - GET /router/v1/time",data:Q,timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"getServerTime() - GET /router/v1/time failed",error:Q.message,timestamp:Date.now()})}try{const Q=await g.current.getMetricsTPS();P(I,{success:!!Q,message:"getMetricsTPS() - GET /router/v1/metrics/tps",data:Q,timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"getMetricsTPS() - GET /router/v1/metrics/tps failed",error:Q.message,timestamp:Date.now()})}try{const Q=await g.current.getMetricsLatency();P(I,{success:!!Q,message:"getMetricsLatency() - GET /router/v1/metrics/latency",data:Q,timestamp:Date.now()})}catch(Q){P(I,{success:!1,message:"getMetricsLatency() - GET /router/v1/metrics/latency failed",error:Q.message,timestamp:Date.now()})}}catch(Y){P(I,{success:!1,message:"InfoClient test error",error:Y.message,timestamp:Date.now()})}},he=async()=>{var He,ue,Y;const I="ExchangeClient";if(!E){P(I,{success:!1,message:"Mnemonic required for ExchangeClient tests",error:"No mnemonic provided",timestamp:Date.now()});return}let ce=n||j||y.current||"";if(!ce||ce.trim()===""){if(v.current&&v.current.length>0){const te=v.current.find(V=>V.active||V.status==="active")??v.current[0];te&&(ce=te.market_id??((He=te.id)==null?void 0:He.toString())??"",y.current=ce,P(I,{success:!0,message:`Market ID not in state, using from fetched markets ref: ${ce.substring(0,16)}...`,data:{source:"fetchedMarketsRef",marketId:ce,market:{moniker:te.moniker,symbol:te.symbol,active:te.active}},timestamp:Date.now()}))}else if(S&&S.length>0){const te=S.find(V=>V.active||V.status==="active")??S[0];te&&(ce=te.market_id??((ue=te.id)==null?void 0:ue.toString())??"",P(I,{success:!0,message:`Market ID not in state, using from markets state: ${ce.substring(0,16)}...`,data:{source:"markets state",marketId:ce,market:{moniker:te.moniker,symbol:te.symbol,active:te.active}},timestamp:Date.now()}))}}if(!ce||ce.trim()===""){P(I,{success:!1,message:"Market ID required from page or loaded markets",error:`Please enter or select a market ID in the configuration section, or ensure markets are loaded first. Debug: marketId="${n||"(empty)"}", effectiveMarketId="${j||"(empty)"}", fetchedMarketIdRef="${y.current||"(empty)"}", fetchedMarketsRef.length=${v.current.length}, markets.length=${S.length}`,data:{marketId:n||"(empty)",effectiveMarketId:j||"(empty)",defaultMarketId:H||"(empty)",fetchedMarketIdRef:y.current||"(empty)",fetchedMarketsRefCount:v.current.length,marketsCount:S.length,marketsAvailable:S.length>0||v.current.length>0},timestamp:Date.now()});return}const me=T||"";if(!me||me.trim()===""){P(I,{success:!1,message:"Wallet address required from page",error:"Wallet address should be generated from mnemonic or entered manually. Please ensure mnemonic is valid.",timestamp:Date.now()});return}const Ne=n?"page state (marketId)":j?"page state (effectiveMarketId)":"loaded markets array";P(I,{success:!0,message:`Using market ID from ${Ne}: ${ce.substring(0,16)}...`,data:{marketId:ce,source:Ne},timestamp:Date.now()}),P(I,{success:!0,message:`Using wallet address from page: ${me.substring(0,10)}...`,data:{walletAddress:me},timestamp:Date.now()}),(r||o)&&P(I,{success:!0,message:`Using signing tokens: ${r?"Session Token":""} ${o?"Auth Token":""}`,data:{hasSessionToken:!!r,hasAuthToken:!!o},timestamp:Date.now()}),w.current=new wl({baseURL:b.current,mnemonic:L.current});try{P(I,{success:!0,message:"Initializing ExchangeClient...",timestamp:Date.now()}),await w.current.initialize();const te=w.current.getWalletAddress();if(te.toLowerCase()!==me.toLowerCase()){P(I,{success:!1,message:"Wallet address mismatch",error:`ExchangeClient wallet (${te}) does not match page wallet (${me})`,timestamp:Date.now()});return}P(I,{success:!0,message:`ExchangeClient initialized successfully (Wallet: ${te.substring(0,10)}...)`,data:{walletAddress:te,marketId:ce,verified:!0},timestamp:Date.now()});const V=ce;P(I,{success:!0,message:`Using market ID as string: ${V}`,data:{marketId:V},timestamp:Date.now()});let q=null;P(I,{success:!0,message:"Testing placeOrder with validation for btc-usdc-perp market...",timestamp:Date.now()});let be=[];try{g.current||(g.current=new pn({baseURL:b.current})),r&&g.current&&g.current.setSessionToken(r);const ye=await g.current.getBuckets(te);be=Array.isArray(ye)?ye:[],P(I,{success:!0,message:`Fetched ${be.length} bucket(s) for order test`,timestamp:Date.now()})}catch(ye){P(I,{success:!1,message:"Failed to fetch buckets for order test",error:ye.message,timestamp:Date.now()})}let Q=null;try{const ae=(v.current.length>0?v.current:S).find(re=>{const pe=(re.moniker||"").toLowerCase(),Ee=(re.symbol||"").toLowerCase();return pe.includes("btc-usdc-perp")||pe.includes("btcusdcperp")||Ee.includes("btc-usdc-perp")||Ee.includes("btcusdcperp")||re.baseAsset&&re.quoteAsset&&re.baseAsset.toLowerCase()==="btc"&&re.quoteAsset.toLowerCase()==="usdc"});ae?(Q=ae.market_id||((Y=ae.id)==null?void 0:Y.toString())||null,P(I,{success:!!Q,message:`Found btc-usdc-perp market: ${Q==null?void 0:Q.substring(0,16)}...`,data:{marketId:Q,moniker:ae.moniker,symbol:ae.symbol},timestamp:Date.now()})):P(I,{success:!1,message:"btc-usdc-perp market not found in available markets",error:"Please ensure btc-usdc-perp market is available",timestamp:Date.now()})}catch(ye){P(I,{success:!1,message:"Failed to find btc-usdc-perp market",error:ye.message,timestamp:Date.now()})}if(Q)try{let ye=null;if(be.length>0){const ae=be[0];ye=ae.bucket_id||ae.id||ae.bucketId||null}if(!ye)P(I,{success:!1,message:"Default bucket not available for balance validation",error:"No buckets found",timestamp:Date.now()});else{P(I,{success:!0,message:"Step 1: Loading default bucket balance and checking available margin...",timestamp:Date.now()});const ae=1.01,re=100,pe=10500,Ee=ut(re.toString()),Ie=ae*pe/re;let Be=0,Ve=0,Le=0,Re=0;try{if(!g.current)throw new Error("InfoClient not initialized");const le=await g.current.getBucket(ye);Le=ke(le.available_margin||"0"),Ve=ke(le.dedicated_margin||"0"),Re=ke(le.total_equity||"0"),Be=Le,P(I,{success:!0,message:"Step 1: Default bucket balance loaded",data:{availableMargin:Le.toFixed(2),dedicatedMargin:Ve.toFixed(2),totalEquity:Re.toFixed(2),requiredMargin:Ie.toFixed(2),raw:le},timestamp:Date.now()}),P(I,{success:!0,message:`Step 1: Validating sufficient available margin (required: ${Ie.toFixed(2)} USDC, available: ${Le.toFixed(2)} USDC)...`,timestamp:Date.now()});const xe=Le>=Ie;if(P(I,{success:xe,message:`Step 1: Margin validation ${xe?"PASSED":"FAILED"}`,data:{availableMargin:Le.toFixed(2),requiredMargin:Ie.toFixed(2),marginDifference:(Le-Ie).toFixed(2),hasSufficientMargin:xe,orderQuantity:`${ae.toFixed(2)} BTC`,orderPrice:`${pe.toFixed(2)} USDC/BTC`,orderLeverage:re.toFixed(2),calculation:`(${ae.toFixed(2)} BTC * ${pe.toFixed(2)} USDC/BTC) / ${re.toFixed(2)} = ${Ie.toFixed(2)} USDC`},timestamp:Date.now()}),!xe)throw P(I,{success:!1,message:`Step 1: Insufficient available margin. Required: ${Ie.toFixed(2)} USDC, Available: ${Le.toFixed(2)} USDC`,error:`Available margin (${Le.toFixed(2)} USDC) is less than required margin (${Ie.toFixed(2)} USDC)`,data:{availableMargin:Le.toFixed(2),requiredMargin:Ie.toFixed(2),shortfall:(Ie-Le).toFixed(2)},timestamp:Date.now()}),new Error(`Insufficient available margin: ${Le.toFixed(2)} USDC available, ${Ie.toFixed(2)} USDC required`);P(I,{success:!0,message:"Step 1: Sufficient margin available. Proceeding to place order...",data:{availableMargin:Le.toFixed(2),requiredMargin:Ie.toFixed(2),marginRemaining:(Le-Ie).toFixed(2)},timestamp:Date.now()})}catch(le){throw P(I,{success:!1,message:"Step 1: Failed to load or validate bucket balance",error:le.message,timestamp:Date.now()}),le}P(I,{success:!0,message:`Step 2: Preparing to place order - Quantity: ${ae.toFixed(2)} BTC, Leverage: ${re}x, Price: ${pe.toFixed(2)} USDC/BTC...`,timestamp:Date.now()}),P(I,{success:!0,message:"Step 2.1: Re-checking default bucket available margin before placing order...",timestamp:Date.now()});let _e=0;try{if(!g.current)throw new Error("InfoClient not initialized");const le=await g.current.getBucket(ye);_e=ke(le.available_margin||"0"),P(I,{success:!0,message:`Step 2.1: Current available margin: ${_e.toFixed(2)} USDC`,data:{currentAvailableMargin:_e.toFixed(2),requiredMargin:Ie.toFixed(2),previousAvailableMargin:Le.toFixed(2),raw:le},timestamp:Date.now()});const xe=_e>=Ie;if(P(I,{success:xe,message:`Step 2.1: Margin check ${xe?"PASSED":"FAILED"}`,data:{currentAvailableMargin:_e.toFixed(2),requiredMargin:Ie.toFixed(2),marginDifference:(_e-Ie).toFixed(2),stillHasSufficientMargin:xe},timestamp:Date.now()}),!xe)throw P(I,{success:!1,message:`Step 2.1: Insufficient available margin. Required: ${Ie.toFixed(2)} USDC, Available: ${_e.toFixed(2)} USDC`,error:`Available margin (${_e.toFixed(2)} USDC) is less than required margin (${Ie.toFixed(2)} USDC)`,data:{currentAvailableMargin:_e.toFixed(2),requiredMargin:Ie.toFixed(2),shortfall:(Ie-_e).toFixed(2)},timestamp:Date.now()}),new Error(`Insufficient available margin: ${_e.toFixed(2)} USDC available, ${Ie.toFixed(2)} USDC required`);P(I,{success:!0,message:"Step 2.1: Sufficient margin confirmed. Proceeding with order placement...",data:{currentAvailableMargin:_e.toFixed(2),requiredMargin:Ie.toFixed(2),marginRemaining:(_e-Ie).toFixed(2)},timestamp:Date.now()})}catch(le){throw P(I,{success:!1,message:"Step 2.1: Failed to validate available margin before order placement",error:le.message,timestamp:Date.now()}),le}P(I,{success:!0,message:`Step 2.2: Placing order - Quantity: ${ae.toFixed(2)} BTC, Leverage: ${re}x, Price: ${pe.toFixed(2)} USDC/BTC...`,timestamp:Date.now()});let Ge=null,$e=null;const Z={marketId:Q,side:"buy",orderType:"LIMIT",price:pe,quantity:ae,timeInForce:"GTC",leverage:Ee},W={maxRetries:10,baseDelay:500,maxDelay:2e3,jitter:!0,multiplier:1.5};let U=0;try{Ge=await u0(W,async()=>{if(U++,U>1&&P(I,{success:!0,message:`Step 2.2: Retrying order placement (attempt ${U}/${W.maxRetries+1})...`,data:{attemptCount:U},timestamp:Date.now()}),!w.current)throw new Error("ExchangeClient not initialized");const le=await w.current.placeOrder(Z),xe=(le==null?void 0:le.order_id)||null;if(!le||!xe)throw new Error("Order placed but order_id not found in response");return le},async le=>{if(xb(le)){P(I,{success:!1,message:`Step 2.2: Nonce error detected (attempt ${U}/${W.maxRetries+1}): ${(le==null?void 0:le.message)||String(le)}`,data:{error:(le==null?void 0:le.message)||String(le),errorType:"nonce error",attemptCount:U,willRetry:U<=W.maxRetries},timestamp:Date.now()});try{if(!w.current)throw new Error("ExchangeClient not initialized");await w.current.refreshNonceFromServer(),P(I,{success:!0,message:"Step 2.2: Refreshed nonce from server, will retry...",timestamp:Date.now()})}catch(qe){P(I,{success:!1,message:"Step 2.2: Failed to refresh nonce from server",error:(qe==null?void 0:qe.message)||String(qe),timestamp:Date.now()})}return!0}return P(I,{success:!1,message:"Step 2.2: Failed to place order (non-retryable error)",error:(le==null?void 0:le.message)||String(le),data:{error:(le==null?void 0:le.message)||String(le),isNonceError:!1},timestamp:Date.now()}),!1}),$e=(Ge==null?void 0:Ge.order_id)||null,P(I,{success:!!Ge&&!!$e,message:`Step 2.2: Order placed successfully${U>1?` (after ${U-1} retry${U>2?"ies":""})`:""}. Order ID: ${$e==null?void 0:$e.substring(0,16)}...`,data:{orderResult:Ge,orderId:$e,requestBody:Z,attemptCount:U},timestamp:Date.now()})}catch(le){throw P(I,{success:!1,message:`Step 2.2: Failed to place order after ${U} attempt${U>1?"s":""}`,error:(le==null?void 0:le.message)||String(le),data:{error:(le==null?void 0:le.message)||String(le),attemptCount:U,maxRetriesReached:U>W.maxRetries},timestamp:Date.now()}),le}if(!Ge||!$e)throw new Error(`Failed to place order after ${U} attempts`);if(await new Promise(le=>setTimeout(le,1500)),$e){P(I,{success:!0,message:"Step 3: Validating pending order details...",timestamp:Date.now()});try{if(!g.current)throw new Error("InfoClient not initialized");const le=await g.current.getOrder($e);if(le){const xe=ke(le.price||"0"),qe=ke(le.quantity||"0"),Oe=ke(le.leverage||"0"),Ue=le.side||"",tt=le.market_id||"",Qe=Math.abs(xe-pe)<.01,kt=Math.abs(qe-ae)<.01,rt=Math.abs(Oe-re)<.01,Rt=tt===Q,Ls=Ue.toUpperCase().includes("BUY")||Ue==="buy";P(I,{success:Qe&&kt&&rt&&Rt&&Ls,message:`Step 3: Order validation ${Qe&&kt&&rt&&Rt&&Ls?"PASSED":"FAILED"}`,data:{orderId:$e,expectedPrice:pe.toFixed(2),actualPrice:xe.toFixed(2),priceValid:Qe,expectedQuantity:`${ae.toFixed(2)} BTC`,actualQuantity:`${qe.toFixed(2)} BTC`,quantityValid:kt,expectedLeverage:re.toFixed(2),actualLeverage:Oe.toFixed(2),leverageValid:rt,expectedMarketId:Q,actualMarketId:tt,marketIdValid:Rt,expectedSide:"buy",actualSide:Ue,sideValid:Ls,orderStatus:le.status,rawOrder:le},timestamp:Date.now()}),Qe||P(I,{success:!1,message:`Order price mismatch: Expected ${pe.toFixed(2)}, got ${xe.toFixed(2)}`,timestamp:Date.now()}),kt||P(I,{success:!1,message:`Order quantity mismatch: Expected ${ae.toFixed(2)} BTC, got ${qe.toFixed(2)} BTC`,timestamp:Date.now()}),rt||P(I,{success:!1,message:`Order leverage mismatch: Expected ${re.toFixed(2)}, got ${Oe.toFixed(2)}`,timestamp:Date.now()}),Rt||P(I,{success:!1,message:`Order market ID mismatch: Expected ${Q}, got ${tt}`,timestamp:Date.now()}),Ls||P(I,{success:!1,message:`Order side mismatch: Expected buy, got ${Ue}`,timestamp:Date.now()})}else P(I,{success:!1,message:"Step 3: Failed to retrieve pending order",error:"Order not found",timestamp:Date.now()})}catch(le){P(I,{success:!1,message:"Step 3: Failed to validate pending order",error:le.message,timestamp:Date.now()})}}P(I,{success:!0,message:"Step 4: Loading default bucket USDC balance after placing order...",timestamp:Date.now()});let we=0;try{if(!g.current)throw new Error("InfoClient not initialized");const le=await g.current.getBucket(ye);we=ke(le.available_margin||"0"),P(I,{success:!0,message:`Step 4: Default bucket USDC balance after: ${we.toFixed(2)} USDC`,data:{balance:we,raw:le},timestamp:Date.now()})}catch(le){throw P(I,{success:!1,message:"Step 4: Failed to load bucket balance after order",error:le.message,timestamp:Date.now()}),le}P(I,{success:!0,message:"Step 5: Validating bucket balance change...",timestamp:Date.now()});const st=_e-we,ze=Ie,vt=Math.abs(st-ze)<.01;P(I,{success:vt,message:`Step 5: Bucket balance validation ${vt?"PASSED":"FAILED"}`,data:{availableMarginBeforeOrder:_e.toFixed(2),availableMarginAfterOrder:we.toFixed(2),marginReserved:st.toFixed(2),expectedMarginReserved:ze.toFixed(2),marginReservedValid:vt,orderQuantity:`${ae.toFixed(2)} BTC`,orderPrice:`${pe.toFixed(2)} USDC/BTC`,orderLeverage:re.toFixed(2),calculation:`(${ae.toFixed(2)} BTC * ${pe.toFixed(2)} USDC/BTC) / ${re.toFixed(2)} = ${ze.toFixed(2)} USDC`,note:"Using available margin from Step 2.1 as baseline (most recent before order placement)"},timestamp:Date.now()}),vt||P(I,{success:!1,message:`Bucket balance change mismatch: Expected margin reserved ${ze.toFixed(2)} USDC, actual change ${st.toFixed(2)} USDC`,error:`Expected available margin to decrease by ${ze.toFixed(2)} USDC, but decreased by ${st.toFixed(2)} USDC`,timestamp:Date.now()}),P(I,{success:vt,message:`Place order validation test ${vt?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{orderId:$e,marketId:Q,orderQuantity:`${ae.toFixed(2)} BTC`,orderLeverage:`${re}x`,orderPrice:`${pe.toFixed(2)} USDC`,availableMarginBeforeOrder:`${_e.toFixed(2)} USDC`,availableMarginAfterOrder:`${we.toFixed(2)} USDC`,marginReserved:`${st.toFixed(2)} USDC`,expectedMarginReserved:`${ze.toFixed(2)} USDC`,validationPassed:vt},timestamp:Date.now()})}}catch(ye){P(I,{success:!1,message:"Place order validation test failed",error:ye.message,timestamp:Date.now()})}if(ce){const ae=ut("1"),re={marketId:V,side:"buy",orderType:"LIMIT",price:40010.8778,quantity:.01,timeInForce:"GTC",leverage:ae};P(I,{success:!0,message:`Testing placeOrder() (submit order) for market ${ce}...`,data:{requestBody:re,endpoint:"POST /clob/v1/order",note:"Price and quantity are decimal numbers, converted to satoshi strings in buildOrderPayload(). Leverage is already in satoshi format.",leverage:{decimal:1,satoshi:ae}},timestamp:Date.now()});try{const pe=await w.current.placeOrder(re);pe?(q=pe.order_id||pe.orderId||pe.id||null,q?P(I,{success:!0,message:`placeOrder() - POST /clob/v1/order executed successfully. Order ID: ${q.substring(0,16)}...`,data:{orderResult:pe,orderId:q,requestBody:re,endpoint:"POST /clob/v1/order"},timestamp:Date.now()}):P(I,{success:!0,message:"placeOrder() - POST /clob/v1/order executed successfully (orderId not found in response)",data:{orderResult:pe,requestBody:re,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})):P(I,{success:!1,message:"placeOrder() - POST /clob/v1/order returned empty response",data:{requestBody:re,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}catch(pe){P(I,{success:!1,message:"placeOrder() - POST /clob/v1/order failed",error:pe.message,data:{requestBody:re,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}}else P(I,{success:!0,message:"Skipping placeOrder() test: No market ID available",timestamp:Date.now()});if(ce&&q){P(I,{success:!0,message:`Testing cancelOrder() for order ${q.substring(0,16)}...`,timestamp:Date.now()});try{const ye=await w.current.cancelOrder({orderId:q,marketId:V});P(I,{success:!!ye,message:"cancelOrder() - POST /router/v1/tx executed successfully",data:ye,timestamp:Date.now()})}catch(ye){P(I,{success:!1,message:"cancelOrder() - POST /router/v1/tx failed",error:ye.message,timestamp:Date.now()})}}else ce?q||P(I,{success:!0,message:"Skipping cancelOrder() test: No order ID available (placeOrder may have failed or orderId not in response)",timestamp:Date.now()}):P(I,{success:!0,message:"Skipping cancelOrder() test: No market ID available",timestamp:Date.now()});if(ce){P(I,{success:!0,message:`Testing closePosition() for market ${ce}...`,timestamp:Date.now()});try{const ye=await w.current.closePosition({marketId:V});P(I,{success:!!ye,message:"closePosition() - POST /router/v1/tx executed successfully",data:ye,timestamp:Date.now()})}catch(ye){P(I,{success:!1,message:"closePosition() - POST /router/v1/tx failed (may not have open position)",error:ye.message,timestamp:Date.now()})}}else P(I,{success:!0,message:"Skipping closePosition() test: No market ID available",timestamp:Date.now()});P(I,{success:!0,message:"Fetching buckets for bucket operation tests...",timestamp:Date.now()});let de=[];try{g.current||(g.current=new pn({baseURL:b.current})),r&&g.current&&g.current.setSessionToken(r);const ye=await g.current.getBuckets(te);de=Array.isArray(ye)?ye:[],P(I,{success:!0,message:`Found ${de.length} bucket(s) for testing`,data:{bucketCount:de.length,buckets:de.slice(0,3).map(ae=>({bucketId:ae.bucket_id||ae.id||ae.bucketId,availableMargin:ae.available_margin||ae.availableMargin}))},timestamp:Date.now()})}catch(ye){P(I,{success:!1,message:"Failed to fetch buckets for testing",error:ye.message,timestamp:Date.now()})}if(de.length>0){const ye=de[0],ae=ye.bucket_id||ye.id||ye.bucketId;if(ae){P(I,{success:!0,message:"Testing extractToBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const re=await w.current.extractToBucket({bucketId:ae,assetId:"USDC",amount:"100000000"});P(I,{success:!!re,message:"extractToBucket() - POST /bank/v1/extract-to-bucket executed successfully",data:re,timestamp:Date.now()})}catch(re){P(I,{success:!1,message:"extractToBucket() - POST /bank/v1/extract-to-bucket failed",error:re.message,timestamp:Date.now()})}}else P(I,{success:!0,message:"Skipping extractToBucket() test: No valid bucket ID found",timestamp:Date.now()})}else P(I,{success:!0,message:"Skipping extractToBucket() test: No buckets available",timestamp:Date.now()});if(de.length>0){const ye=de[0],ae=ye.bucket_id||ye.id||ye.bucketId;if(ae){P(I,{success:!0,message:"Testing bucket to spot wallet transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{P(I,{success:!0,message:"Step 1: Loading bucket USDC balance before transfer...",timestamp:Date.now()});let re=0;try{const W=await g.current.getBucket(ae);re=ke(W.available_margin||"0"),P(I,{success:!0,message:`Step 1: Bucket USDC balance before: ${re.toFixed(2)} USDC`,data:{balance:re,raw:W},timestamp:Date.now()})}catch(W){throw P(I,{success:!1,message:"Step 1: Failed to load bucket balance",error:W.message,timestamp:Date.now()}),W}P(I,{success:!0,message:"Step 2: Loading spot wallet USDC balance before transfer...",timestamp:Date.now()});let pe=0;try{const W=await g.current.getBalanceDecimal(te,"USDC");pe=ke(W.available_balance||"0"),P(I,{success:!0,message:`Step 2: Spot wallet USDC balance before: ${pe.toFixed(2)} USDC`,data:{balance:pe,raw:W},timestamp:Date.now()})}catch(W){throw P(I,{success:!1,message:"Step 2: Failed to load spot wallet balance",error:W.message,timestamp:Date.now()}),W}const Ee=10,Ie=ut(Ee.toString());P(I,{success:!0,message:`Step 3: Transferring ${Ee.toFixed(2)} USDC (${Ie} satoshi) from bucket to spot wallet...`,timestamp:Date.now()});try{const W=await w.current.withdrawFromBucket({bucketId:ae,assetId:"USDC",amount:Ie});P(I,{success:!!W,message:"Step 3: Transfer executed successfully",data:W,timestamp:Date.now()})}catch(W){throw P(I,{success:!1,message:"Step 3: Transfer failed",error:W.message,timestamp:Date.now()}),W}await new Promise(W=>setTimeout(W,1e3)),P(I,{success:!0,message:"Step 4: Loading bucket USDC balance after transfer...",timestamp:Date.now()});let Be=0;try{const W=await g.current.getBucket(ae);Be=ke(W.available_margin||"0"),P(I,{success:!0,message:`Step 4: Bucket USDC balance after: ${Be.toFixed(2)} USDC`,data:{balance:Be,raw:W},timestamp:Date.now()})}catch(W){throw P(I,{success:!1,message:"Step 4: Failed to load bucket balance after transfer",error:W.message,timestamp:Date.now()}),W}P(I,{success:!0,message:"Step 5: Loading spot wallet USDC balance after transfer...",timestamp:Date.now()});let Ve=0;try{const W=await g.current.getBalanceDecimal(te,"USDC");Ve=ke(W.available_balance||"0"),P(I,{success:!0,message:`Step 5: Spot wallet USDC balance after: ${Ve.toFixed(2)} USDC`,data:{balance:Ve,raw:W},timestamp:Date.now()})}catch(W){throw P(I,{success:!1,message:"Step 5: Failed to load spot wallet balance after transfer",error:W.message,timestamp:Date.now()}),W}P(I,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Le=re-Be,Re=Ve-pe,_e=Ee,Ge=Ee,$e=Math.abs(Le-_e)<.01,Z=Math.abs(Re-Ge)<.01;P(I,{success:$e&&Z,message:`Step 6: Validation ${$e&&Z?"PASSED":"FAILED"}`,data:{bucketBalanceBefore:re.toFixed(2),bucketBalanceAfter:Be.toFixed(2),bucketBalanceDecrease:Le.toFixed(2),expectedBucketDecrease:_e.toFixed(2),bucketDecreaseValid:$e,walletBalanceBefore:pe.toFixed(2),walletBalanceAfter:Ve.toFixed(2),walletBalanceIncrease:Re.toFixed(2),expectedWalletIncrease:Ge.toFixed(2),walletIncreaseValid:Z,transferAmount:Ee.toFixed(2)},timestamp:Date.now()}),$e||P(I,{success:!1,message:`Validation failed: Bucket balance decrease (${Le.toFixed(2)}) does not match expected (${_e.toFixed(2)})`,error:`Expected bucket to decrease by ${_e.toFixed(2)} USDC, but decreased by ${Le.toFixed(2)} USDC`,timestamp:Date.now()}),Z||P(I,{success:!1,message:`Validation failed: Wallet balance increase (${Re.toFixed(2)}) does not match expected (${Ge.toFixed(2)})`,error:`Expected wallet to increase by ${Ge.toFixed(2)} USDC, but increased by ${Re.toFixed(2)} USDC`,timestamp:Date.now()}),P(I,{success:$e&&Z,message:`Bucket to spot wallet transfer test ${$e&&Z?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Ee.toFixed(2)} USDC`,bucketBalanceBefore:`${re.toFixed(2)} USDC`,bucketBalanceAfter:`${Be.toFixed(2)} USDC`,bucketBalanceChange:`${Le.toFixed(2)} USDC`,walletBalanceBefore:`${pe.toFixed(2)} USDC`,walletBalanceAfter:`${Ve.toFixed(2)} USDC`,walletBalanceChange:`${Re.toFixed(2)} USDC`,validationPassed:$e&&Z},timestamp:Date.now()})}catch(re){P(I,{success:!1,message:"Bucket to spot wallet transfer test failed",error:re.message,timestamp:Date.now()})}}else P(I,{success:!0,message:"Skipping bucket to spot wallet transfer test: No valid bucket ID found",timestamp:Date.now()})}else P(I,{success:!0,message:"Skipping bucket to spot wallet transfer test: No buckets available",timestamp:Date.now()});if(de.length>=2){const ye=de[0],ae=de[1],re=ye.bucket_id||ye.id||ye.bucketId,pe=ae.bucket_id||ae.id||ae.bucketId;if(re&&pe){P(I,{success:!0,message:"Testing bucket to bucket transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{P(I,{success:!0,message:"Step 1: Loading source bucket USDC balance before transfer...",timestamp:Date.now()});let Ee=0;try{const we=await g.current.getBucket(re);Ee=ke(we.available_margin||"0"),P(I,{success:!0,message:`Step 1: Source bucket USDC balance before: ${Ee.toFixed(2)} USDC`,data:{balance:Ee,raw:we},timestamp:Date.now()})}catch(we){throw P(I,{success:!1,message:"Step 1: Failed to load source bucket balance",error:we.message,timestamp:Date.now()}),we}P(I,{success:!0,message:"Step 2: Loading target bucket USDC balance before transfer...",timestamp:Date.now()});let Ie=0;try{const we=await g.current.getBucket(pe);Ie=ke(we.available_margin||"0"),P(I,{success:!0,message:`Step 2: Target bucket USDC balance before: ${Ie.toFixed(2)} USDC`,data:{balance:Ie,raw:we},timestamp:Date.now()})}catch(we){throw P(I,{success:!1,message:"Step 2: Failed to load target bucket balance",error:we.message,timestamp:Date.now()}),we}const Be=10,Ve=ut(Be.toString());P(I,{success:!0,message:`Step 3: Transferring ${Be.toFixed(2)} USDC (${Ve} satoshi) from source bucket to target bucket...`,timestamp:Date.now()});try{const we=await w.current.bucketTransfer({fromBucketId:re,toBucketId:pe,assetId:"USDC",amount:Ve});P(I,{success:!!we,message:"Step 3: Transfer executed successfully",data:we,timestamp:Date.now()})}catch(we){throw P(I,{success:!1,message:"Step 3: Transfer failed",error:we.message,timestamp:Date.now()}),we}await new Promise(we=>setTimeout(we,1e3)),P(I,{success:!0,message:"Step 4: Loading source bucket USDC balance after transfer...",timestamp:Date.now()});let Le=0;try{const we=await g.current.getBucket(re);Le=ke(we.available_margin||"0"),P(I,{success:!0,message:`Step 4: Source bucket USDC balance after: ${Le.toFixed(2)} USDC`,data:{balance:Le,raw:we},timestamp:Date.now()})}catch(we){throw P(I,{success:!1,message:"Step 4: Failed to load source bucket balance after transfer",error:we.message,timestamp:Date.now()}),we}P(I,{success:!0,message:"Step 5: Loading target bucket USDC balance after transfer...",timestamp:Date.now()});let Re=0;try{const we=await g.current.getBucket(pe);Re=ke(we.available_margin||"0"),P(I,{success:!0,message:`Step 5: Target bucket USDC balance after: ${Re.toFixed(2)} USDC`,data:{balance:Re,raw:we},timestamp:Date.now()})}catch(we){throw P(I,{success:!1,message:"Step 5: Failed to load target bucket balance after transfer",error:we.message,timestamp:Date.now()}),we}P(I,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const _e=Ee-Le,Ge=Re-Ie,$e=Be,Z=Be,W=Math.abs(_e-$e)<.01,U=Math.abs(Ge-Z)<.01;P(I,{success:W&&U,message:`Step 6: Validation ${W&&U?"PASSED":"FAILED"}`,data:{sourceBucketBalanceBefore:Ee.toFixed(2),sourceBucketBalanceAfter:Le.toFixed(2),sourceBucketBalanceDecrease:_e.toFixed(2),expectedSourceDecrease:$e.toFixed(2),sourceDecreaseValid:W,targetBucketBalanceBefore:Ie.toFixed(2),targetBucketBalanceAfter:Re.toFixed(2),targetBucketBalanceIncrease:Ge.toFixed(2),expectedTargetIncrease:Z.toFixed(2),targetIncreaseValid:U,transferAmount:Be.toFixed(2)},timestamp:Date.now()}),W||P(I,{success:!1,message:`Validation failed: Source bucket balance decrease (${_e.toFixed(2)}) does not match expected (${$e.toFixed(2)})`,error:`Expected source bucket to decrease by ${$e.toFixed(2)} USDC, but decreased by ${_e.toFixed(2)} USDC`,timestamp:Date.now()}),U||P(I,{success:!1,message:`Validation failed: Target bucket balance increase (${Ge.toFixed(2)}) does not match expected (${Z.toFixed(2)})`,error:`Expected target bucket to increase by ${Z.toFixed(2)} USDC, but increased by ${Ge.toFixed(2)} USDC`,timestamp:Date.now()}),P(I,{success:W&&U,message:`Bucket to bucket transfer test ${W&&U?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Be.toFixed(2)} USDC`,sourceBucketBalanceBefore:`${Ee.toFixed(2)} USDC`,sourceBucketBalanceAfter:`${Le.toFixed(2)} USDC`,sourceBucketBalanceChange:`${_e.toFixed(2)} USDC`,targetBucketBalanceBefore:`${Ie.toFixed(2)} USDC`,targetBucketBalanceAfter:`${Re.toFixed(2)} USDC`,targetBucketBalanceChange:`${Ge.toFixed(2)} USDC`,validationPassed:W&&U},timestamp:Date.now()})}catch(Ee){P(I,{success:!1,message:"Bucket to bucket transfer test failed",error:Ee.message,timestamp:Date.now()})}}else P(I,{success:!0,message:"Skipping bucket to bucket transfer test: Invalid bucket IDs",timestamp:Date.now()})}else P(I,{success:!0,message:"Skipping bucket to bucket transfer test: Need at least 2 buckets (found "+de.length+")",timestamp:Date.now()});if(de.length>0){const ye=de[0],ae=ye.bucket_id||ye.id||ye.bucketId;if(ae){P(I,{success:!0,message:"Testing spot wallet to bucket default transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{P(I,{success:!0,message:"Step 1: Loading spot wallet USDC balance before transfer...",timestamp:Date.now()});let re=0;try{const W=await g.current.getBalanceDecimal(te,"USDC");re=ke(W.available_balance||"0"),P(I,{success:!0,message:`Step 1: Spot wallet USDC balance before: ${re.toFixed(2)} USDC`,data:{balance:re,raw:W},timestamp:Date.now()})}catch(W){throw P(I,{success:!1,message:"Step 1: Failed to load spot wallet balance",error:W.message,timestamp:Date.now()}),W}P(I,{success:!0,message:"Step 2: Loading default bucket USDC balance before transfer...",timestamp:Date.now()});let pe=0;try{const W=await g.current.getBucket(ae);pe=ke(W.available_margin||"0"),P(I,{success:!0,message:`Step 2: Default bucket USDC balance before: ${pe.toFixed(2)} USDC`,data:{balance:pe,raw:W},timestamp:Date.now()})}catch(W){throw P(I,{success:!1,message:"Step 2: Failed to load bucket balance",error:W.message,timestamp:Date.now()}),W}const Ee=10,Ie=ut(Ee.toString());P(I,{success:!0,message:`Step 3: Transferring ${Ee.toFixed(2)} USDC (${Ie} satoshi) from spot wallet to default bucket...`,timestamp:Date.now()});try{const W=await w.current.extractToBucket({bucketId:ae,assetId:"USDC",amount:Ie});P(I,{success:!!W,message:"Step 3: Transfer executed successfully",data:W,timestamp:Date.now()})}catch(W){throw P(I,{success:!1,message:"Step 3: Transfer failed",error:W.message,timestamp:Date.now()}),W}await new Promise(W=>setTimeout(W,1e3)),P(I,{success:!0,message:"Step 4: Loading spot wallet USDC balance after transfer...",timestamp:Date.now()});let Be=0;try{const W=await g.current.getBalanceDecimal(te,"USDC");Be=ke(W.available_balance||"0"),P(I,{success:!0,message:`Step 4: Spot wallet USDC balance after: ${Be.toFixed(2)} USDC`,data:{balance:Be,raw:W},timestamp:Date.now()})}catch(W){throw P(I,{success:!1,message:"Step 4: Failed to load spot wallet balance after transfer",error:W.message,timestamp:Date.now()}),W}P(I,{success:!0,message:"Step 5: Loading default bucket USDC balance after transfer...",timestamp:Date.now()});let Ve=0;try{const W=await g.current.getBucket(ae);Ve=ke(W.available_margin||"0"),P(I,{success:!0,message:`Step 5: Default bucket USDC balance after: ${Ve.toFixed(2)} USDC`,data:{balance:Ve,raw:W},timestamp:Date.now()})}catch(W){throw P(I,{success:!1,message:"Step 5: Failed to load bucket balance after transfer",error:W.message,timestamp:Date.now()}),W}P(I,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Le=re-Be,Re=Ve-pe,_e=Ee,Ge=Ee,$e=Math.abs(Le-_e)<.01,Z=Math.abs(Re-Ge)<.01;P(I,{success:$e&&Z,message:`Step 6: Validation ${$e&&Z?"PASSED":"FAILED"}`,data:{walletBalanceBefore:re.toFixed(2),walletBalanceAfter:Be.toFixed(2),walletBalanceDecrease:Le.toFixed(2),expectedWalletDecrease:_e.toFixed(2),walletDecreaseValid:$e,bucketBalanceBefore:pe.toFixed(2),bucketBalanceAfter:Ve.toFixed(2),bucketBalanceIncrease:Re.toFixed(2),expectedBucketIncrease:Ge.toFixed(2),bucketIncreaseValid:Z,transferAmount:Ee.toFixed(2)},timestamp:Date.now()}),$e||P(I,{success:!1,message:`Validation failed: Wallet balance decrease (${Le.toFixed(2)}) does not match expected (${_e.toFixed(2)})`,error:`Expected wallet to decrease by ${_e.toFixed(2)} USDC, but decreased by ${Le.toFixed(2)} USDC`,timestamp:Date.now()}),Z||P(I,{success:!1,message:`Validation failed: Bucket balance increase (${Re.toFixed(2)}) does not match expected (${Ge.toFixed(2)})`,error:`Expected bucket to increase by ${Ge.toFixed(2)} USDC, but increased by ${Re.toFixed(2)} USDC`,timestamp:Date.now()}),P(I,{success:$e&&Z,message:`Spot wallet to bucket transfer test ${$e&&Z?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Ee.toFixed(2)} USDC`,walletBalanceBefore:`${re.toFixed(2)} USDC`,walletBalanceAfter:`${Be.toFixed(2)} USDC`,walletBalanceChange:`${Le.toFixed(2)} USDC`,bucketBalanceBefore:`${pe.toFixed(2)} USDC`,bucketBalanceAfter:`${Ve.toFixed(2)} USDC`,bucketBalanceChange:`${Re.toFixed(2)} USDC`,validationPassed:$e&&Z},timestamp:Date.now()})}catch(re){P(I,{success:!1,message:"Spot wallet to bucket transfer test failed",error:re.message,timestamp:Date.now()})}}else P(I,{success:!0,message:"Skipping spot wallet to bucket transfer test: No valid default bucket ID found",timestamp:Date.now()})}else P(I,{success:!0,message:"Skipping spot wallet to bucket transfer test: No buckets available",timestamp:Date.now()});P(I,{success:!0,message:"ExchangeClient tests completed",data:{walletAddress:te,marketId:V,sessionToken:r?"present":"not set",authToken:o?"present":"not set",methodsTested:["placeOrder","cancelOrder","closePosition","extractToBucket","withdrawFromBucket","bucketTransfer"]},timestamp:Date.now()})}catch(te){P(I,{success:!1,message:"ExchangeClient test error",error:te.message,timestamp:Date.now()})}},Ae=async()=>{if(!f){p(!0),X(),Me.info("Running tests",{description:"Starting comprehensive SDK test suite..."});try{K(),await ee(),await J("Authentication"),await G(),E&&await he()}catch(I){P("General",{success:!1,message:"Test suite error",error:I.message,timestamp:Date.now()}),Me.error("Test suite error",{description:I.message||"An unexpected error occurred during testing.",duration:6e3})}finally{p(!1)}}};return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"SDK Test Page"}),h.jsx("p",{children:"Comprehensive test suite for all SDK APIs"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"sdk-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:I=>e(I.target.value),className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:I=>{const ce=I.target.value;ce&&s(ce)},className:"sdk-test-config-select",children:S.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),S.map(I=>{var He;const ce=I.market_id??((He=I.market_id)==null?void 0:He.toString())??"",me=I.moniker?I.moniker:I.symbol?I.symbol:I.baseAsset&&I.quoteAsset?`${I.baseAsset}-${I.quoteAsset}`:`Market ID: ${ce}`,Ne=I.active?" [ACTIVE]":"";return h.jsxs("option",{value:ce,children:[me," - ID: ",ce,Ne]},ce)})]})}),S.length>0&&h.jsx("small",{className:`sdk-test-config-hint ${n===H?"info":"warning"}`,children:n===H?` Auto-selected default market (ID: ${H==null?void 0:H.substring(0,16)}...)`:` Manual selection (ID: ${n==null?void 0:n.substring(0,16)}...)`})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic (for ExchangeClient):",h.jsx("input",{type:"text",value:E||"",onChange:I=>z(I.target.value),placeholder:"Optional",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Session Token (for authenticated InfoClient):",h.jsx("input",{type:"text",value:r,onChange:I=>i(I.target.value),disabled:!!(r&&r.trim()!==""),placeholder:"Optional",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Auth Token:",h.jsx("input",{type:"text",value:o,onChange:I=>a(I.target.value),disabled:!!(N&&N.trim()!==""),placeholder:N?"Auto-filled from onboarding":'Optional - Use "Onboard" button to generate',className:"sdk-test-config-input"}),N&&h.jsx("small",{className:"sdk-test-config-hint success",children:" Auto-filled from onboarding"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:T||"",disabled:!!(E&&E.trim()!==""),onChange:()=>{},placeholder:"automatic (from mnemonic)",className:"sdk-test-config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Device ID:",h.jsx("input",{type:"text",value:l,onChange:I=>c(I.target.value),className:"sdk-test-config-input"})]})}),h.jsxs("div",{className:"control-box",children:[h.jsx(iA,{isRunning:f,onClick:Ae}),h.jsx(oA,{mnemonic:E||"",baseURL:t,onboardLoading:_,isRunning:f,onOnboard:(I,ce)=>{I&&I.trim()!==""?A(I,ce):Me.warning("Mnemonic required",{description:"Please enter a mnemonic first to perform onboard."})}}),h.jsx(aA,{isRunning:f,onClick:X})]})]}),N&&h.jsxs("span",{className:"sdk-test-status success",children:[" Auth Token: ",N.substring(0,20),"..."]}),D&&h.jsxs("span",{className:"sdk-test-status error",children:[" Onboard Error: ",D,h.jsx(lA,{onClick:R})]})]}),h.jsx("div",{className:"sdk-test-results",children:Object.entries(u).map(([I,ce])=>{const me=m.has(I);return h.jsxs("div",{className:"sdk-test-section",children:[h.jsx(uA,{sectionName:I,isExpanded:me,onToggle:()=>se(I)}),me&&h.jsx("div",{className:"sdk-test-section-content",children:ce.results.map((Ne,He)=>h.jsx(cA,{result:Ne},He))})]},I)})}),Object.keys(u).length===0&&!f&&h.jsx("div",{className:"sdk-test-empty-state",children:'Click "Run All Tests" to start testing the SDK APIs'})]})}const hA=({isConnected:t,isConnecting:e,onConnect:n,onDisconnect:s})=>h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:n,disabled:t||e,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:t?"#ccc":e?"#ffc107":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:t||e?"not-allowed":"pointer"},children:e?" Connecting...":t?" Connected":"Connect"}),e&&h.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Connection in progress... Check messages below for details"}),h.jsx("button",{onClick:s,disabled:!t,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:t?"#dc3545":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:t?"pointer":"not-allowed"},children:"Disconnect"})]}),fA=({onClick:t})=>h.jsx("button",{onClick:t,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),un=({channel:t,isSubscribed:e,isConnected:n,disabled:s=!1,subscribeLabel:r,unsubscribeLabel:i,onSubscribe:o,onUnsubscribe:a,variant:l="public"})=>{const c=!n||s,u=e?"#dc3545":l==="private"?"#28a745":"#007bff";return h.jsx("button",{onClick:e?a:o,disabled:c,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:u,color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer"},children:e?i:r})},pA=({steps:t})=>t.length===0?null:h.jsxs("div",{className:"connection-steps-container",children:[h.jsx("h2",{children:"Connection Steps"}),h.jsx("div",{className:"connection-steps-list",children:t.map((e,n)=>h.jsxs("div",{className:`connection-step-item ${e.status==="error"?"error":e.status==="success"?"success":e.status==="in-progress"?"in-progress":"pending"}`,children:[h.jsx("span",{className:"connection-step-icon",children:e.status==="error"?"":e.status==="success"?"":e.status==="in-progress"?"":""}),h.jsxs("div",{className:"connection-step-content",children:[h.jsxs("div",{className:"connection-step-title",children:["Step ",e.step,": ",e.message]}),e.details&&h.jsx("div",{className:"connection-step-details",children:JSON.stringify(e.details,null,2)}),h.jsx("div",{className:"connection-step-timestamp",children:new Date(e.timestamp).toLocaleTimeString()})]})]},n))})]}),gA=({wsURL:t,onWsURLChange:e,marketId:n,onMarketIdChange:s,markets:r,symbol:i,onSymbolChange:o,klineInterval:a,onKlineIntervalChange:l,twapWindowSize:c,onTwapWindowSizeChange:u,authToken:d,onAuthTokenChange:f,walletAddress:p,deviceID:m,onDeviceIDChange:x,isConnected:w,isConnecting:g,onConnect:b,onDisconnect:v})=>h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["WebSocket URL:",h.jsx("input",{type:"text",value:t,onChange:y=>e(y.target.value),className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:y=>s(y.target.value),className:"config-select",children:r.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),r.map(y=>{var T;const S=y.market_id??((T=y.market_id)==null?void 0:T.toString())??"",C=y.moniker?y.moniker:y.symbol?y.symbol:y.baseAsset&&y.quoteAsset?`${y.baseAsset}-${y.quoteAsset}`:`Market ID: ${S}`,E=y.active?" [ACTIVE]":"";return h.jsxs("option",{value:S,children:[C," - ID: ",S,E]},S)})]})})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Symbol (for funding_rate, deviation, index_price, mark_price, price_feed, twap):",h.jsx("input",{type:"text",value:i,onChange:y=>o(y.target.value),placeholder:"e.g., BTC/USDT or BTC/USDC",className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Kline Interval:",h.jsxs("select",{value:a,onChange:y=>l(y.target.value),className:"config-select",children:[h.jsx("option",{value:"1m",children:"1 minute"}),h.jsx("option",{value:"5m",children:"5 minutes"}),h.jsx("option",{value:"15m",children:"15 minutes"}),h.jsx("option",{value:"1h",children:"1 hour"}),h.jsx("option",{value:"4h",children:"4 hours"}),h.jsx("option",{value:"1d",children:"1 day"})]})]})}),h.jsx("div",{children:h.jsxs("label",{children:["TWAP Window Size (seconds):",h.jsx("input",{type:"number",value:c,onChange:y=>u(y.target.value),placeholder:"e.g., 300 for 5 minutes",min:"1",className:"config-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Auth Token (for private channels):",h.jsx("input",{type:"text",value:d,onChange:y=>f(y.target.value),placeholder:"Required for user_updates (auto-filled from SDK Test Page)",className:"config-input"}),d&&h.jsx("small",{className:"config-hint",children:" Auto-filled from SDK Test Page"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Wallet Address:",h.jsx("input",{type:"text",value:p||"",disabled:!0,placeholder:"Auto-filled from useOnboard hook",className:`config-input-disabled ${p?"has-value":""}`}),p&&h.jsx("small",{className:"config-hint",children:" Auto-filled from useOnboard hook"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Device ID:",h.jsx("input",{type:"text",value:m,onChange:y=>x(y.target.value),className:"config-input"})]})})]}),h.jsx("div",{className:"config-actions",children:h.jsx(hA,{isConnected:w,isConnecting:g,onConnect:b,onDisconnect:v})})]}),mA=({data:t})=>h.jsxs("div",{className:"funding-rate-details",children:[h.jsx("strong",{className:"funding-rate-title",children:"Funding Rate Details:"}),h.jsxs("div",{className:"funding-rate-grid",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Symbol:"})," ",t.symbol??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Rate:"})," ",t.funding_rate?parseFloat(String(t.funding_rate)).toFixed(6):"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",t.mark_price??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Index Price:"})," ",t.index_price??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Premium Rate:"})," ",t.premium_rate??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"EMA Funding Rate:"})," ",t.ema_funding_rate??"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Next Funding Time:"})," ",t.next_funding_time_unix?new Date(t.next_funding_time_unix*1e3).toLocaleString():"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Funding Interval:"})," ",t.funding_interval_seconds?`${t.funding_interval_seconds}s`:"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Valid:"})," ",t.is_valid!==void 0?t.is_valid?"Yes":"No":"N/A"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Stale:"})," ",h.jsx("span",{className:`funding-rate-stale ${t.is_stale?"":"valid"}`,children:t.is_stale!==void 0?t.is_stale?"Yes":"No":"N/A"})]}),t.option_type&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Option Type:"})," ",t.option_type]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Strike Price:"})," ",t.strike_price??"N/A"]})]})]})]}),xA=({positions:t})=>!t||t.length===0?null:h.jsxs("div",{className:"positions-container",children:[h.jsxs("strong",{className:"positions-title",children:["Positions (",t.length,"):"]}),h.jsx("div",{className:"positions-grid",children:t.map((e,n)=>{const s=e.size||0,r=s>=0?"LONG":"SHORT";return h.jsxs("div",{className:"position-card",children:[h.jsx("div",{className:"position-symbol",children:e.symbol||`Market ${e.marketId||e.market_id||"N/A"}`}),h.jsxs("div",{className:"position-details",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Side:"})," ",h.jsx("span",{className:r==="LONG"?"position-side-long":"position-side-short",children:r})]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Size:"})," ",Math.abs(s).toFixed(8)]}),e.entryPrice!==void 0||e.entry_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Entry Price:"})," ",(e.entryPrice||e.entry_price||0).toFixed(8)]}):null,e.markPrice!==void 0||e.mark_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Mark Price:"})," ",(e.markPrice||e.mark_price||0).toFixed(8)]}):null,e.liquidationPrice!==void 0||e.liquidation_price!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Liquidation Price:"})," ",(e.liquidationPrice||e.liquidation_price||0).toFixed(8)]}):null,e.unrealizedPnL!==void 0||e.unrealized_pnl!==void 0||e.pnl!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Unrealized PnL:"})," ",h.jsx("span",{className:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0)>=0?"position-pnl-positive":"position-pnl-negative",children:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0).toFixed(8)})]}):null,e.leverage!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Leverage:"})," ",e.leverage,"x"]}):null,e.margin!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Margin:"})," ",e.margin.toFixed(8)]}):null,e.marginMode!==void 0||e.margin_mode!==void 0?h.jsxs("div",{children:[h.jsx("strong",{children:"Margin Mode:"})," ",e.marginMode||e.margin_mode||"N/A"]}):null]})]},n)})})]}),bA=({message:t})=>{const{channel:e,data:n,type:s,step:r,timestamp:i}=t,o=e==="funding_rate"&&typeof n=="object"&&n!==null,a=e==="user_updates"&&typeof n=="object"&&n!==null&&Array.isArray(n.positions)&&n.positions.length>0,l=o||a;return h.jsx("div",{className:`message-item ${s}`,children:h.jsx("div",{className:"message-header",children:h.jsxs("div",{className:"message-content",children:[h.jsxs("div",{className:"message-title",children:[h.jsxs("span",{children:["[",e,"]"]}),r&&h.jsxs("span",{className:"message-step",children:["(",r,")"]}),h.jsx("span",{children:new Date(i).toLocaleTimeString()})]}),o&&h.jsx(mA,{data:n}),a&&h.jsx(xA,{positions:n.positions}),!l&&h.jsx("div",{className:"message-body",children:typeof n=="string"?n:JSON.stringify(n,null,2)}),typeof n!="string"&&h.jsxs("details",{children:[h.jsx("summary",{className:"raw-data-summary",children:"View Raw Data"}),h.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(n,null,2)})]})]})})})},yA=({messages:t,isPrivate:e=!1,emptyMessage:n})=>{const s=e?"No messages yet. Connect with auth token and subscribe to user updates.":"No messages yet. Connect and subscribe to channels to see updates.";return h.jsx("div",{className:`messages-container ${e?"private":"public"}`,children:t.length===0?h.jsx("div",{className:`messages-empty ${e?"private":""}`,children:n||s}):t.map(r=>h.jsx(bA,{message:r},r.id))})},u1=({title:t,isPrivate:e=!1,messages:n,onClearMessages:s,children:r,emptyMessage:i})=>h.jsxs("div",{className:"channel-section",children:[h.jsxs("div",{className:"channel-header",children:[h.jsx("h2",{className:"channel-title",children:t}),h.jsx(fA,{onClick:s})]}),h.jsxs("div",{className:"channel-content",children:[h.jsx("div",{className:"channel-buttons-container",children:r}),h.jsx(yA,{messages:n,isPrivate:e,emptyMessage:i}),e&&h.jsxs("div",{className:"private-note",children:[h.jsx("strong",{children:"Note:"})," Private channels require authentication. Enter your auth token in the configuration above."]})]})]});function xt(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function oo(t,e){return t.width===e.width&&t.height===e.height}var wA=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){n._observers=n._observers.filter(function(r){return r!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function vA(t){return new wA(t)}var kA=function(){function t(e,n,s){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=xt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(i){return i},this._allowResizeObserver=(r=s==null?void 0:s.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return xt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=xt(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;oo(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var s=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,s=xt(this._transformBitmapSize(e,this._canvasElementClientSize)),r=oo(this.bitmapSize,s)?null:s;n===null&&r===null||n!==null&&r!==null&&oo(n,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(n,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}CA().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=d1(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=vA(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var s=d1(this._canvasElement);if(s!==null){var r=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:s.devicePixelRatio,i=this._canvasElement.getClientRects(),o=i[0]!==void 0?_A(i[0],r):xt({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var s=n.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var r=s.devicePixelContentBoxSize[0],i=xt({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function SA(t,e){return new kA(t,e.transform,e.options)}function d1(t){return t.ownerDocument.defaultView}function CA(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function _A(t,e){return xt({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var EA=function(){function t(e,n,s){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function bo(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new EA(r,n,s)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const h3={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var h1,f1;function tl(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function f3(t,e,n,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(n,e+r),t.lineTo(s,e+r),t.stroke()}function tn(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Fn(t){if(t===void 0)throw new Error("Value is undefined");return t}function ge(t){if(t===null)throw new Error("Value is null");return t}function ii(t){return ge(Fn(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(h1||(h1={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(f1||(f1={}));class $t{constructor(){this.t=[]}i(e,n,s){const r={h:e,l:n,o:s===!0};this.t.push(r)}_(e){const n=this.t.findIndex(s=>e===s.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,s){const r=[...this.t];this.t=this.t.filter(i=>!i.o),r.forEach(i=>i.h(e,n,s))}v(){return this.t.length>0}m(){this.t=[]}}function Gn(t,...e){for(const n of e)for(const s in n)n[s]!==void 0&&Object.prototype.hasOwnProperty.call(n,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof n[s]!="object"||t[s]===void 0||Array.isArray(n[s])?t[s]=n[s]:Gn(t[s],n[s]));return t}function nl(t){return typeof t=="number"&&isFinite(t)}function fu(t){return typeof t=="number"&&t%1==0}function $u(t){return typeof t=="string"}function Cd(t){return typeof t=="boolean"}function vr(t){const e=t;if(!e||typeof e!="object")return e;let n,s,r;for(s in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(r=e[s],n[s]=r&&typeof r=="object"?vr(r):r);return n}function PA(t){return t!==null}function TA(t){return t===null?void 0:t}const p3="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function af(t,e,n){return e===void 0&&(e=p3),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class MA{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),s=this.W();return e.P===n&&e.T===s||(e.P=n,e.T=s,e.k=af(n,s),e.A=2.5/12*n,e.V=e.A,e.B=n/12*e.C,e.I=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Yp(t){return t<0?0:t>255?255:Math.round(t)||0}function p1(t){return .199*t[0]+.687*t[1]+.114*t[2]}class IA{constructor(e,n){this.q=new Map,this.Y=e,n&&(this.q=n)}j(e,n){if(e==="transparent")return e;const s=this.K(e),r=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${n*r})`}X(e){const n=this.K(e);return{Z:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,G:p1(n)>160?"black":"white"}}J(e){return p1(this.K(e))}tt(e,n,s){const[r,i,o,a]=this.K(e),[l,c,u,d]=this.K(n),f=[Yp(r+s*(l-r)),Yp(i+s*(c-i)),Yp(o+s*(u-o)),(p=a+s*(d-a),p<=0||p>1?Math.min(Math.max(p,0),1):Math.round(1e4*p)/1e4)];var p;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const n=this.q.get(e);if(n)return n;const s=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(e),r=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(const o of this.Y){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const i=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,i),i}}class NA{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,s){this.it.forEach(r=>{r.nt(e,n,s)})}}class zu{nt(e,n,s){e.useBitmapCoordinateSpace(r=>this.et(r,n,s))}}class DA extends zu{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const r=this.rt.lt,i=this.rt,o=Math.max(1,Math.floor(n))%2/2,a=l=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){const u=i.ot[c],d=Math.round(u._t*n)+o,f=u.ut*s,p=l*s+o;e.moveTo(d,f),e.arc(d,f,p,0,2*Math.PI)}e.fill()};i.ct>0&&(e.fillStyle=i.dt,a(i.ft+i.ct)),e.fillStyle=i.vt,a(i.ft)}}function AA(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const RA={from:0,to:1};class OA{constructor(e,n,s){this.Mt=new NA,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.Pt=s,this.Mt.st(this.bt)}yt(e){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(AA),this.bt=this.St.map(n=>{const s=new DA;return s.ht(n),s}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),n=this.Pt.Bt(),s=this.Ct.It(),r=this.O.Et();this.kt(),n.forEach((i,o)=>{const a=this.St[o],l=i.At(s),c=i.zt();!e&&l!==null&&i.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=i.Ft().Nt(l.gt,c.Wt),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/i.Ft().$t()),a.ot[0].wt=s,a.ot[0]._t=r.qt(s),a.lt=RA):a.lt=null})}}class LA extends zu{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!i&&!o)return;const a=Math.round(this.Yt._t*s),l=Math.round(this.Yt.ut*r);e.lineCap="butt",i&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*s),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,tl(e,this.Yt.jt.Xt),function(c,u,d,f){c.beginPath();const p=c.lineWidth%2?.5:0;c.moveTo(u+p,d),c.lineTo(u+p,f),c.stroke()}(e,a,0,n.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*r),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,tl(e,this.Yt.Kt.Xt),f3(e,l,0,n.width))}}class jA{constructor(e,n){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new LA(this.Zt),this.Jt=e,this.Pt=n}yt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),n=this.Pt.Qt().N().crosshair,s=this.Zt;if(n.mode===2)return s.Kt.Vt=!1,void(s.jt.Vt=!1);s.Kt.Vt=e&&this.Jt.ti(this.Pt),s.jt.Vt=e&&this.Jt.ii(),s.Kt.ct=n.horzLine.width,s.Kt.Xt=n.horzLine.style,s.Kt.R=n.horzLine.color,s.jt.ct=n.vertLine.width,s.jt.Xt=n.vertLine.style,s.jt.R=n.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function f0(t,e,n,s,r,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,n,s,r),t.restore()}function g1(t,e,n,s,r,i){t.beginPath(),t.roundRect?t.roundRect(e,n,s,r,i):(t.lineTo(e+s-i[1],n),i[1]!==0&&t.arcTo(e+s,n,e+s,n+i[1],i[1]),t.lineTo(e+s,n+r-i[2]),i[2]!==0&&t.arcTo(e+s,n+r,e+s-i[2],n+r,i[2]),t.lineTo(e+i[3],n+r),i[3]!==0&&t.arcTo(e,n+r,e,n+r-i[3],i[3]),t.lineTo(e,n+i[0]),i[0]!==0&&t.arcTo(e,n,e+i[0],n,i[0]))}function m1(t,e,n,s,r,i,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===i)return g1(t,e,n,s,r,a),t.fillStyle=i,t.fill(),void t.restore();const c=o/2;var u;g1(t,e+c,n+c,s-o,r-o,(u=-c,a.map(d=>d===0?d:d+u))),i!=="transparent"&&(t.fillStyle=i,t.fill()),l!=="transparent"&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function g3(t,e,n,s,r,i,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,r);a.addColorStop(0,i),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,n,s,r),t.restore()}class x1{constructor(e,n){this.ht(e,n)}ht(e,n){this.Yt=e,this.ei=n}$t(e,n){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,n,s,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const i=this.Yt.R,o=this.ei.Z,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=n.k;const u=this.hi(l,n,s,r),d=u.ai;return u.li?m1(c,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):m1(c,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(c.fillStyle=i,c.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(c.fillStyle=n.D,c.fillRect(u.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),u});e.useMediaCoordinateSpace(({context:l})=>{const c=a.xi;l.font=n.k,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=i,l.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.Pi)})}hi(e,n,s,r){const{context:i,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=e,u=this.Yt.pi||!this.Yt.yi?n.C:0,d=this.Yt.ki?n.S:0,f=n.A+this.ei.Ti,p=n.V+this.ei.Ri,m=n.B,x=n.I,w=this.Yt.ri,g=n.P,b=s.Di(i,w),v=Math.ceil(s.Vi(i,w)),y=g+f+p,S=n.S+m+x+v+u,C=Math.max(1,Math.floor(c));let E=Math.round(y*c);E%2!=C%2&&(E+=1);const T=d>0?Math.max(1,Math.floor(d*l)):0,N=Math.round(S*l),_=Math.round(u*l),D=this.ei.Bi??this.ei.Ii,A=Math.round(D*c)-Math.floor(.5*c),R=Math.floor(A+C/2-E/2),z=R+E,L=r==="right",F=L?a.width-d:d,$=L?o.width-T:T;let O,B,M;return L?(O=$-N,B=$-_,M=F-u-m-d):(O=$+N,B=$+_,M=F+u+m),{li:L,ai:{_i:R,mi:A,Si:z,ui:N,ci:E,ft:2*l,di:T,oi:O,fi:$,wi:B,gi:C,bi:o.width},xi:{_i:R/c,Si:z/c,Ci:M,Pi:b}}}}class p0{constructor(e){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(e||x1)(this.Ai,this.Ei),this.Oi=new(e||x1)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Li.$t(e,n),this.Oi.$t(e,n))}Fi(){return this.Ei.Bi||0}Wi(e){this.Ei.Bi=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class FA extends p0{constructor(e,n,s){super(),this.Jt=e,this.Yi=n,this.ji=s}qi(e,n,s){if(e.Vt=!1,this.Jt.N().mode===2)return;const r=this.Jt.N().horzLine;if(!r.labelVisible)return;const i=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||i===null)return;const o=this.Yi.Xi().X(r.labelBackgroundColor);s.Z=o.Z,e.R=o.G;const a=2/12*this.Yi.P();s.Ti=a,s.Ri=a;const l=this.ji(this.Yi);s.Ii=l.Ii,e.ri=this.Yi.Zi(l.gt,i),e.Vt=!0}}const BA=/[1-9]/g;class m3{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,n){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const s=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.k,Math.round(n.Gi.Vi(f,ge(this.Yt).ri,BA))));if(s<=0)return;const r=n.Ji,i=s+2*r,o=i/2,a=this.Yt.Qi;let l=this.Yt.Ii,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+i>a&&(l-=Math.abs(a-(c+i)),c=Math.floor(l-o)+.5);const u=c+i,d=Math.ceil(0+n.S+n.C+n.A+n.P+n.V);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:p,verticalPixelRatio:m})=>{const x=ge(this.Yt);f.fillStyle=x.Z;const w=Math.round(c*p),g=Math.round(0*m),b=Math.round(u*p),v=Math.round(d*m),y=Math.round(2*p);if(f.beginPath(),f.moveTo(w,g),f.lineTo(w,v-y),f.arcTo(w,v,w+y,v,y),f.lineTo(b-y,v),f.arcTo(b,v,b,v-y,y),f.lineTo(b,g),f.fill(),x.pi){const S=Math.round(x.Ii*p),C=g,E=Math.round((C+n.C)*m);f.fillStyle=x.R;const T=Math.max(1,Math.floor(p)),N=Math.floor(.5*p);f.fillRect(S-N,C,T,E-C)}}),e.useMediaCoordinateSpace(({context:f})=>{const p=ge(this.Yt),m=0+n.S+n.C+n.A+n.P/2;f.font=n.k,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.R;const x=n.Gi.Di(f,"Apr0");f.translate(c+r,m+x),f.fillText(p.ri,0,0)})}}class $A{constructor(e,n,s){this.xt=!0,this.Gt=new m3,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=e,this.ts=n,this.ji=s}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const s=this.ts.Et();if(s.Ki())return;e.Qi=s.Qi();const r=this.ji();if(r===null)return;e.Ii=r.Ii;const i=s.ss(this.Ct.It());e.ri=s.ns(ge(i)),e.Vt=!0;const o=this.ts.Xi().X(n.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=s.N().ticksVisible}}class x3{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var b1;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(b1||(b1={}));class zA extends x3{constructor(e,n){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=n,this.ys=((r,i)=>o=>{const a=i(),l=r();if(o===ge(this.Pt).ks())return{gt:l,Ii:a};{const c=ge(o.zt());return{gt:o.Ts(a,c),Ii:a}}})(()=>this.ds,()=>this.Ss);const s=((r,i)=>()=>{const o=this.ts.Et().Rs(r()),a=i();return o&&Number.isFinite(a)?{wt:o,Ii:a}:null})(()=>this.fs,()=>this.si());this.Ds=new $A(this,e,s)}N(){return this.Ps}Vs(e,n){this.xs=e,this.Cs=n}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(e,n,s){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,n,s)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(e){let n=this.gs.get(e);n||(n=new jA(this,e),this.gs.set(e,n));let s=this.Ms.get(e);return s||(s=new OA(this.ts,this,e),this.Ms.set(e,s)),[n,s]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,n){this.ps&&this.Pt===e||this.vs.clear();const s=[];return this.Pt===e&&s.push(this.Hs(this.vs,n,this.ys)),s}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var n,s;(n=this.gs.get(e))==null||n.yt(),(s=this.Ms.get(e))==null||s.yt()}),this.vs.forEach(e=>e.yt()),this.Ds.yt()}qs(e){return e&&!e.ks().Ki()?e.ks():null}zs(e,n,s){this.Ys(e,n,s)&&this.Ns()}Ys(e,n,s){const r=this.bs,i=this.Ss,o=this.ds,a=this.fs,l=this.Pt,c=this.qs(s);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=s;const u=c!==null?c.zt():null;return c!==null&&u!==null?(this.ds=n,this.Ss=c.Nt(n,u)):(this.ds=NaN,this.Ss=NaN),r!==this.bs||i!==this.Ss||a!==this.fs||o!==this.ds||l!==this.Pt}Os(){const e=this.ts.js().map(s=>s.Xs().Ks()).filter(PA),n=e.length===0?null:Math.max(...e);this.fs=n!==null?n:NaN}Hs(e,n,s){let r=e.get(n);return r===void 0&&(r=new FA(this,n,s),e.set(n,r)),r}}function g0(t){return t==="left"||t==="right"}class en{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,n){const s=function(r,i){return r===void 0?i:{tn:Math.max(r.tn,i.tn),sn:r.sn||i.sn}}(this.Zs.get(e),n);this.Zs.set(e,s)}nn(){return this.Js}en(e){const n=this.Zs.get(e);return n===void 0?{tn:this.Js}:{tn:Math.max(this.Js,n.tn),sn:n.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const n of e.Gs)this.mn(n);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((n,s)=>{this.Qs(s,n)})}static wn(){return new en(2)}static gn(){return new en(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(n=>n.an===5);e!==-1&&this.Gs.splice(e,1)}}class b3{formatTickmarks(e){return e.map(n=>this.format(n))}}const y1=".";function kr(t,e){if(!nl(t))return"n/a";if(!fu(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class m0 extends b3{constructor(e,n){if(super(),n||(n=1),nl(e)&&fu(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=n,this.bn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const n=this.Yi/this.Mn;let s=Math.floor(e),r="";const i=this.xn!==void 0?this.xn:NaN;if(n>1){let o=+(Math.round(e*n)-s*n).toFixed(this.xn);o>=n&&(o-=n,s+=1),r=y1+kr(+o.toFixed(this.xn)*this.Mn,i)}else s=Math.round(s*n)/n,i>0&&(r=y1+kr(0,i));return s.toFixed(0)+r}}class y3 extends m0{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class UA extends b3{constructor(e){super(),this.Cn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.Pn(e):e<999995?n+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.Pn(e/1e9)+"B")}Pn(e){let n;const s=Math.pow(10,this.Cn);return n=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(r,i)=>i)}}const WA=/[2-9]/g;class lf{constructor(e=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(e,n,s){return this.In(e,n,s).width}Di(e,n,s){const r=this.In(e,n,s);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}In(e,n,s){const r=s||WA,i=String(n).replace(r,"0");if(this.Dn.has(i))return Fn(this.Dn.get(i)).En;if(this.yn===this.Vn){const a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.yn--}e.save(),e.textBaseline="middle";const o=e.measureText(i);return e.restore(),o.width===0&&n.length||(this.Dn.set(i,{En:o,An:this.kn}),this.Rn[this.kn]=i,this.yn++,this.kn++),o}}class HA{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,n,s){this.zn=e,this.M=n,this.Ln=s}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class w3{constructor(e,n,s){this.Fn=e,this.On=new lf(50),this.Wn=n,this.O=s,this.F=-1,this.Gt=new HA(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const n=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(n===null)return null;const s=e.qn(n);if(s==="overlay")return null;const r=this.O.Yn();return r.P!==this.F&&(this.F=r.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),r,s),this.Gt}}class VA extends zu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,n){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:s,ct:r,Kn:i}=this.Yt;return n>=s-r-7&&n<=s+r+7?{Xn:this.Yt,Kn:i}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;const i=Math.round(this.Yt.ut*r);i<0||i>n.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*s),tl(e,this.Yt.Xt),f3(e,i,0,n.width))}}class $b{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new VA,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class YA extends $b{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),n=e.ie().ie;if(n!==2&&n!==3)return;const s=this.Jn.N();if(!s.baseLineVisible||!this.Jn.Vt())return;const r=this.Jn.zt();r!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(r.Wt,r.Wt),this.Zn.R=s.baseLineColor,this.Zn.ct=s.baseLineWidth,this.Zn.Xt=s.baseLineStyle)}}class GA extends zu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){const r=this.Yt;if(r===null)return;const i=Math.max(1,Math.floor(n)),o=i%2/2,a=Math.round(r.ne.x*n)+o,l=r.ne.y*s;e.fillStyle=r.ee,e.beginPath();const c=Math.max(2,1.5*r.re)*n;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.he,e.beginPath(),e.arc(a,l,r.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=r.ae,e.beginPath(),e.arc(a,l,r.ft*n+i/2,0,2*Math.PI,!1),e.stroke()}}const qA=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class KA{constructor(e){this.Gt=new GA,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),n=this.we-e;if(n>0)return void(n<650&&(this.we+=2600));this.me=e,this.we=e+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),n=e.Pe(),s=this.ge.zt();if(n===null||s===null)return;const r=this.ge.ye(!0);if(r.ke||!n.Te(r.Re))return;const i={x:e.qt(r.Re),y:this.ge.Ft().Nt(r.gt,s.Wt)},o=r.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:i})}Ce(){const e=this.Gt.se();if(e!==null){const n=this.De(this.Ve(),e.ee);e.he=n.he,e.ae=n.ae,e.ft=n.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(e,n,s,r){const i=s+(r-s)*n;return this.ge.Qt().Xi().j(e,i)}De(e,n){const s=e%2600/2600;let r;for(const c of qA)if(s>=c.le&&s<=c.oe){r=c;break}tn(r!==void 0,"Last price animation internal logic error");const i=(s-r.le)/(r.oe-r.le);return{he:this.Be(n,i,r.ce,r.de),ae:this.Be(n,i,r.fe,r.pe),ft:(o=i,a=r._e,l=r.ue,a+(l-a)*o)};var o,a,l}}class XA extends $b{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const n=this.Jn.N();if(!n.priceLineVisible||!this.Jn.Vt())return;const s=this.Jn.ye(n.priceLineSource===0);s.ke||(e.Vt=!0,e.ut=s.Ii,e.R=this.Jn.Ie(s.R),e.ct=n.priceLineWidth,e.Xt=n.priceLineStyle)}}class QA extends p0{constructor(e){super(),this.Jt=e}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.Jt;if(!r.Vt())return;const i=r.N(),o=i.lastValueVisible,a=r.Ee()!=="",l=i.seriesLastValueMode===0,c=r.ye(!1);if(c.ke)return;o&&(e.ri=this.Ae(c,o,l),e.Vt=e.ri.length!==0),(a||l)&&(n.ri=this.ze(c,o,a,l),n.Vt=n.ri.length>0);const u=r.Ie(c.R),d=this.Jt.Qt().Xi().X(u);s.Z=d.Z,s.Ii=c.Ii,n.Ht=r.Qt().Ut(c.Ii/r.Ft().$t()),e.Ht=u,e.R=d.G,n.R=d.G}ze(e,n,s,r){let i="";const o=this.Jt.Ee();return s&&o.length!==0&&(i+=`${o} `),n&&r&&(i+=this.Jt.Ft().Le()?e.Oe:e.Ne),i.trim()}Ae(e,n,s){return n?s?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function w1(t,e,n,s){const r=Number.isFinite(e),i=Number.isFinite(n);return r&&i?t(e,n):r||i?r?e:n:s}class kn{constructor(e,n){this.Fe=e,this.We=n}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new kn(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new kn(w1(Math.min,this.$e(),e.$e(),-1/0),w1(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!nl(e)||this.We-this.Fe===0)return;const n=.5*(this.We+this.Fe);let s=this.We-n,r=this.Fe-n;s*=e,r*=e,this.We=n+s,this.Fe=n+r}Ke(e){nl(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new kn(e.minValue,e.maxValue)}}class cf{constructor(e,n){this.Ge=e,this.Je=n||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new cf(kn.Ze(e.priceRange),e.margins)}}class JA extends $b{constructor(e,n){super(e),this.ir=n}te(){const e=this.Zn;e.Vt=!1;const n=this.ir.N();if(!this.Jn.Vt()||!n.lineVisible)return;const s=this.ir.sr();s!==null&&(e.Vt=!0,e.ut=s,e.R=n.color,e.ct=n.lineWidth,e.Xt=n.lineStyle,e.Kn=this.ir.N().id)}}class ZA extends p0{constructor(e,n){super(),this.ge=e,this.ir=n}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.ir.N(),i=r.axisLabelVisible,o=r.title!=="",a=this.ge;if(!i||!a.Vt())return;const l=this.ir.sr();if(l===null)return;o&&(n.ri=r.title,n.Vt=!0),n.Ht=a.Qt().Ut(l/a.Ft().$t()),e.ri=this.nr(r.price),e.Vt=!0;const c=this.ge.Qt().Xi().X(r.axisLabelColor||r.color);s.Z=c.Z;const u=r.axisLabelTextColor||c.G;e.R=u,n.R=u,s.Ii=l}nr(e){const n=this.ge.zt();return n===null?"":this.ge.Ft().Zi(e,n.Wt)}}class eR{constructor(e,n){this.ge=e,this.Ps=n,this.er=new JA(e,this),this.Fn=new ZA(e,this),this.rr=new w3(this.Fn,e,e.Qt())}hr(e){Gn(this.Ps,e),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const e=this.ge,n=e.Ft();if(e.Qt().Et().Ki()||n.Ki())return null;const s=e.zt();return s===null?null:n.Nt(this.Ps.price,s.Wt)}}class tR extends x3{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const nR={Bar:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=ge(t(n,s)),a=ii(o.Wt[0])<=ii(o.Wt[3]);return{cr:o.R??(a?r:i)}},Candlestick:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,u=ge(t(n,s)),d=ii(u.Wt[0])<=ii(u.Wt[3]);return{cr:u.R??(d?r:i),dr:u.Ht??(d?o:a),pr:u.vr??(d?l:c)}},Custom:(t,e,n,s)=>({cr:ge(t(n,s)).R??e.color}),Area:(t,e,n,s)=>{const r=ge(t(n,s));return{cr:r.vt??e.lineColor,vt:r.vt??e.lineColor,mr:r.mr??e.topColor,wr:r.wr??e.bottomColor}},Baseline:(t,e,n,s)=>{const r=ge(t(n,s));return{cr:r.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:r.gr??e.topLineColor,Mr:r.Mr??e.bottomLineColor,br:r.br??e.topFillColor1,Sr:r.Sr??e.topFillColor2,Cr:r.Cr??e.bottomFillColor1,Pr:r.Pr??e.bottomFillColor2}},Line:(t,e,n,s)=>{const r=ge(t(n,s));return{cr:r.R??e.color,vt:r.R??e.color}},Histogram:(t,e,n,s)=>({cr:ge(t(n,s)).R??e.color})};class sR{constructor(e){this.yr=(n,s)=>s!==void 0?s.Wt:this.ge.Xs().kr(n),this.ge=e,this.Tr=nR[e.Rr()]}Dr(e,n){return this.Tr(this.yr,this.ge.N(),e,n)}}function v3(t,e,n,s,r=0,i=e.length){let o=i-r;for(;0<o;){const a=o>>1,l=r+a;s(e[l],n)===t?(r=l+1,o-=a+1):o=a}return r}const sl=v3.bind(null,!0),k3=v3.bind(null,!1);var v1;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(v1||(v1={}));const zr=30;class rR{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}kr(e){return this.Fr(e)}Fr(e,n=0){const s=this.Nr(e,n);return s===null?null:{...this.Wr(s),Re:this.Or(s)}}Hr(){return this.Vr}Ur(e,n,s){if(this.Ki())return null;let r=null;for(const i of s)r=_d(r,this.$r(e,n,i));return r}ht(e){this.Ir.clear(),this.Br.clear(),this.Vr=e,this.Er=e.map(n=>n.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,n){const s=this.Yr(e);if(s===null&&n!==0)switch(n){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return s}jr(e){let n=this.Xr(e);return n>0&&(n-=1),n!==this.Vr.length&&this.Or(n)<e?n:null}Kr(e){const n=this.Zr(e);return n!==this.Vr.length&&e<this.Or(n)?n:null}Yr(e){const n=this.Xr(e);return n===this.Vr.length||e<this.Vr[n].Re?null:n}Xr(e){return sl(this.Vr,e,(n,s)=>n.Re<s)}Zr(e){return k3(this.Vr,e,(n,s)=>n.Re>s)}Gr(e,n,s){let r=null;for(let i=e;i<n;i++){const o=this.Vr[i].Wt[s];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(e,n,s){if(this.Ki())return null;let r=null;const i=ge(this.Lr()),o=ge(this.Ks()),a=Math.max(e,i),l=Math.min(n,o),c=Math.ceil(a/zr)*zr,u=Math.max(c,Math.floor(l/zr)*zr);{const f=this.Xr(a),p=this.Zr(Math.min(l,c,n));r=_d(r,this.Gr(f,p,s))}let d=this.Br.get(s);d===void 0&&(d=new Map,this.Br.set(s,d));for(let f=Math.max(c+1,a);f<u;f+=zr){const p=Math.floor(f/zr);let m=d.get(p);if(m===void 0){const x=this.Xr(p*zr),w=this.Zr((p+1)*zr-1);m=this.Gr(x,w,s),d.set(p,m)}r=_d(r,m)}{const f=this.Xr(u),p=this.Zr(l);r=_d(r,this.Gr(f,p,s))}return r}}function _d(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}const uf={setLineStyle:tl};class iR{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,uf)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,uf)}}class oR{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new iR(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}class S3{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,n;(n=(e=this.ah).updateAllViews)==null||n.call(e)}Fs(){var s,r,i;const e=((r=(s=this.ah).paneViews)==null?void 0:r.call(s))??[];if(((i=this.hh)==null?void 0:i.nh)===e)return this.hh.eh;const n=e.map(o=>new oR(o));return this.hh={nh:e,eh:n},n}jn(e,n){var s,r;return((r=(s=this.ah).hitTest)==null?void 0:r.call(s,e,n))??null}}let aR=class extends S3{us(){return[]}};class lR{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e,uf)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e,uf)}}class k1{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new lR(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}function C3(t){var e,n,s;return{ri:t.text(),Ii:t.coordinate(),Bi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),Z:t.backColor(),Vt:((n=t.visible)==null?void 0:n.call(t))??!0,pi:((s=t.tickVisible)==null?void 0:s.call(t))??!0}}class cR{constructor(e,n){this.Gt=new m3,this._h=e,this.uh=n}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...C3(this._h)}),this.Gt}}class uR extends p0{constructor(e,n){super(),this._h=e,this.Yi=n}qi(e,n,s){const r=C3(this._h);s.Z=r.Z,e.R=r.R;const i=2/12*this.Yi.P();s.Ti=i,s.Ri=i,s.Ii=r.Ii,s.Bi=r.Bi,e.ri=r.ri,e.Vt=r.Vt,e.pi=r.pi}}class dR extends S3{constructor(e,n){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=n}cs(){var r,i,o;const e=((i=(r=this.ah).timeAxisViews)==null?void 0:i.call(r))??[];if(((o=this.dh)==null?void 0:o.nh)===e)return this.dh.eh;const n=this.ge.Qt().Et(),s=e.map(a=>new cR(a,n));return this.dh={nh:e,eh:s},s}Ws(){var r,i,o;const e=((i=(r=this.ah).priceAxisViews)==null?void 0:i.call(r))??[];if(((o=this.fh)==null?void 0:o.nh)===e)return this.fh.eh;const n=this.ge.Ft(),s=e.map(a=>new uR(a,n));return this.fh={nh:e,eh:s},s}wh(){var s,r,i;const e=((r=(s=this.ah).priceAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.ph)==null?void 0:i.nh)===e)return this.ph.eh;const n=e.map(o=>new k1(o));return this.ph={nh:e,eh:n},n}gh(){var s,r,i;const e=((r=(s=this.ah).timeAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.mh)==null?void 0:i.nh)===e)return this.mh.eh;const n=e.map(o=>new k1(o));return this.mh={nh:e,eh:n},n}Mh(e,n){var s,r;return((r=(s=this.ah).autoscaleInfo)==null?void 0:r.call(s,e,n))??null}}function Gp(t,e,n,s){t.forEach(r=>{e(r).forEach(i=>{i.rh()===n&&s.push(i)})})}function qp(t){return t.Fs()}function hR(t){return t.wh()}function fR(t){return t.gh()}const pR=["Area","Line","Baseline"];class x0 extends tR{constructor(e,n,s,r,i){super(e),this.Yt=new rR,this.er=new XA(this),this.bh=[],this.Sh=new YA(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=s,this.kh=n;const o=new QA(this);this.vs=[o],this.rr=new w3(o,this,e),pR.includes(this.kh)&&(this.xh=new KA(this)),this.Th(),this.sh=r(this,this.Qt(),i)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(e){return this.Ps.priceLineColor||e}ye(e){const n={ke:!0},s=this.Ft();if(this.Qt().Et().Ki()||s.Ki()||this.Yt.Ki())return n;const r=this.Qt().Et().Pe(),i=this.zt();if(r===null||i===null)return n;let o,a;if(e){const d=this.Yt.Ar();if(d===null)return n;o=d,a=d.Re}else{const d=this.Yt.Fr(r.bi(),-1);if(d===null||(o=this.Yt.kr(d.Re),o===null))return n;a=d.Re}const l=o.Wt[3],c=this.Rh().Dr(a,{Wt:o}),u=s.Nt(l,i.Wt);return{ke:!1,gt:l,ri:s.Zi(l,i.Wt),Oe:s.Dh(l),Ne:s.Vh(l,i.Wt),R:c.cr,Ii:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new sR(this)),this.Ch}N(){return this.Ps}hr(e){const n=e.priceScaleId;n!==void 0&&n!==this.Ps.priceScaleId&&this.Qt().Bh(this,n),Gn(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(e,n){this.Yt.ht(e),this.sh.yt("data"),this.xh!==null&&(n&&n.zh?this.xh.be():e.length===0&&this.xh.Me());const s=this.Qt().Hn(this);this.Qt().Lh(s),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const n=new eR(this,e);return this.bh.push(n),this.Qt().Eh(this),n}Nh(e){const n=this.bh.indexOf(e);n!==-1&&this.bh.splice(n,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const n=e.Uh();return this.Yt.Fr(n,1)}Xs(){return this.Yt}$h(e){const n=this.Yt.kr(e);return n===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:n.Wt[0],Yh:n.Wt[1],jh:n.Wt[2],Kh:n.Wt[3]}:n.Wt[3]}Xh(e){const n=[];Gp(this.yh,qp,"top",n);const s=this.xh;return s!==null&&s.Vt()&&(this.Ph===null&&s.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),s.Se(),n.unshift(s)),n}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const n=this.bh.map(s=>s.lr());return e.push(...n),Gp(this.yh,qp,"normal",e),e}Jh(){return this.Qh(qp,"bottom")}ta(e){return this.Qh(hR,e)}ia(e){return this.Qh(fR,e)}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,n){if(n!==this.es&&!this.Gh())return[];const s=[...this.vs];for(const r of this.bh)s.push(r.ur());return this.yh.forEach(r=>{s.push(...r.Ws())}),s}cs(){const e=[];return this.yh.forEach(n=>{e.push(...n.cs())}),e}Mh(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider(()=>{const r=this.na(e,n);return r===null?null:r.Xe()});return cf.Ze(s)}return this.na(e,n)}nh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}ea(){return this.ra}Ns(){var e;this.sh.yt();for(const n of this.vs)n.yt();for(const n of this.bh)n.yt();this.er.yt(),this.Sh.yt(),(e=this.xh)==null||e.yt(),this.yh.forEach(n=>n.Ns())}Ft(){return ge(super.Ft())}At(e){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.Yt.kr(e);return n===null?null:{gt:n.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(e){this.yh.push(new dR(e,this))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e)}ca(){if(this.kh==="Custom")return e=>this.sh.da(e)}fa(){if(this.kh==="Custom")return e=>this.sh.pa(e)}va(){return this.Yt.qr()}Gh(){return!g0(this.Ft().ma())}na(e,n){if(!fu(e)||!fu(n)||this.Yt.Ki())return null;const s=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(e,n,s);let i=r!==null?new kn(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){const a=this.Ps.base,l=new kn(a,a);i=i!==null?i.vn(l):l}return this.yh.forEach(a=>{const l=a.Mh(e,n);if(l!=null&&l.priceRange){const c=new kn(l.priceRange.minValue,l.priceRange.maxValue);i=i!==null?i.vn(c):c}l!=null&&l.margins&&(o=l.margins)}),new cf(i,o)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(e){switch(this.kh){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ra={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.ra=new UA(this.Ps.priceFormat.precision);break;case"percent":this.ra=new y3(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new m0(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.wa()}Qh(e,n){const s=[];return Gp(this.yh,e,n,s),s}}const gR=[3],mR=[0,1,2,3];class xR{constructor(e){this.Ps=e}ga(e,n,s){let r=e;if(this.Ps.mode===0)return r;const i=s.ks(),o=i.zt();if(o===null)return r;const a=i.Nt(e,o),l=s.Ma().filter(u=>u instanceof x0).reduce((u,d)=>{if(s.Un(d)||!d.Vt())return u;const f=d.Ft(),p=d.Xs();if(f.Ki()||!p.Te(n))return u;const m=p.kr(n);if(m===null)return u;const x=ii(d.zt()),w=this.Ps.mode===3?mR:gR;return u.concat(w.map(g=>f.Nt(m.Wt[g],x.Wt)))},[]);if(l.length===0)return r;l.sort((u,d)=>Math.abs(u-a)-Math.abs(d-a));const c=l[0];return r=i.Ts(c,o),r}}function Rc(t,e,n){return Math.min(Math.max(t,e),n)}function Ed(t,e,n){return e-t<=n}class bR extends zu{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=Math.max(1,Math.floor(s));e.lineWidth=i,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=ge(this.Yt);if(o.ba){e.strokeStyle=o.Sa,tl(e,o.xa),e.beginPath();for(const a of o.Ca){const l=Math.round(a.Pa*s);e.moveTo(l,-i),e.lineTo(l,n.height+i)}e.stroke()}if(o.ya){e.strokeStyle=o.ka,tl(e,o.Ta),e.beginPath();for(const a of o.Ra){const l=Math.round(a.Pa*r);e.moveTo(-i,l),e.lineTo(n.width+i,l)}e.stroke()}})}}class yR{constructor(e){this.Gt=new bR,this.xt=!0,this.Pt=e}yt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,n={ya:e.horzLines.visible,ba:e.vertLines.visible,ka:e.horzLines.color,Sa:e.vertLines.color,Ta:e.horzLines.style,xa:e.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map(s=>({Pa:s.coord}))};this.Gt.ht(n),this.xt=!1}return this.Gt}}class wR{constructor(e){this.sh=new yR(e)}lr(){return this.sh}}const Kp={Va:4,Ba:1e-4};function sa(t,e){const n=100*(t-e)/e;return e<0?-n:n}function vR(t,e){const n=sa(t.$e(),e),s=sa(t.qe(),e);return new kn(n,s)}function Oc(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function kR(t,e){const n=Oc(t.$e(),e),s=Oc(t.qe(),e);return new kn(n,s)}function df(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.log10(n+e.Ba)+e.Va;return t<0?-s:s}function Lc(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.pow(10,n-e.Va)-e.Ba;return t<0?-s:s}function Yl(t,e){if(t===null)return null;const n=df(t.$e(),e),s=df(t.qe(),e);return new kn(n,s)}function ra(t,e){if(t===null)return null;const n=Lc(t.$e(),e),s=Lc(t.qe(),e);return new kn(n,s)}function Xp(t){if(t===null)return Kp;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return Kp;const n=Math.ceil(Math.abs(Math.log10(e))),s=Kp.Va+n;return{Va:s,Ba:1/Math.pow(10,s)}}class Qp{constructor(e,n){if(this.Ia=e,this.Ea=n,function(s){if(s<0)return!1;if(s>1e18)return!0;for(let r=s;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let s=this.Ia;s!==1;){if(s%2==0)this.Aa.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),s/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(e,n,s){const r=this.Ia===0?0:1/this.Ia;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,a=this.Ea[0];for(;;){const d=Ed(i,r,1e-14)&&i>r+1e-14,f=Ed(i,s*a,1e-14),p=Ed(i,1,1e-14);if(!(d&&f&&p))break;i/=a,a=this.Ea[++o%this.Ea.length]}if(i<=r+1e-14&&(i=r),i=Math.max(1,i),this.Aa.length>0&&(l=i,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.Aa[0];Ed(i,s*a,1e-14)&&i>r+1e-14;)i/=a,a=this.Aa[++o%this.Aa.length];var l,c,u;return i}}class S1{constructor(e,n,s,r){this.La=[],this.Yi=e,this.Ia=n,this.Oa=s,this.Na=r}za(e,n){if(e<n)throw new Error("high < low");const s=this.Yi.$t(),r=(e-n)*this.Fa()/s,i=new Qp(this.Ia,[2,2.5,2]),o=new Qp(this.Ia,[2,2,2.5]),a=new Qp(this.Ia,[2.5,2,2]),l=[];return l.push(i.za(e,n,r),o.za(e,n,r),a.za(e,n,r)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let d=1;d<c.length;++d)c[d]<u&&(u=c[d]);return u}(l)}Wa(){const e=this.Yi,n=e.zt();if(n===null)return void(this.La=[]);const s=e.$t(),r=this.Oa(s-1,n),i=this.Oa(0,n),o=this.Yi.N().entireTextOnly?this.Ha()/2:0,a=o,l=s-1-o,c=Math.max(r,i),u=Math.min(r,i);if(c===u)return void(this.La=[]);const d=this.za(c,u);if(this.Ua(n,d,c,u,a,l),e.$a()&&this.qa(d,u,c)){const m=this.Yi.Ya();this.ja(n,d,a,l,m,2*m)}const f=this.La.map(m=>m.Ka),p=this.Yi.Xa(f);for(let m=0;m<this.La.length;m++)this.La[m].Za=p[m]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(e,n,s,r,i,o){const a=this.La,l=this.Yi;let c=s%n;c+=c<0?n:0;const u=s>=r?1:-1;let d=null,f=0;for(let p=s-c;p>r;p-=n){const m=this.Na(p,e,!0);d!==null&&Math.abs(m-d)<this.Fa()||m<i||m>o||(f<a.length?(a[f].Pa=m,a[f].Za=l.Ga(p),a[f].Ka=p):a.push({Pa:m,Za:l.Ga(p),Ka:p}),f++,d=m,l.Ja()&&(n=this.za(p*u,r)))}a.length=f}ja(e,n,s,r,i,o){const a=this.La,l=this.Qa(e,s,i,o),c=this.Qa(e,r,-o,-i),u=this.Na(0,e,!0)-this.Na(n,e,!0);a.length>0&&a[0].Pa-l.Pa<u/2&&a.shift(),a.length>0&&c.Pa-a[a.length-1].Pa<u/2&&a.pop(),a.unshift(l),a.push(c)}Qa(e,n,s,r){const i=(s+r)/2,o=this.Oa(n+s,e),a=this.Oa(n+r,e),l=Math.min(o,a),c=Math.max(o,a),u=Math.max(.1,this.za(c,l)),d=this.Oa(n+i,e),f=d-d%u,p=this.Na(f,e,!0);return{Za:this.Yi.Ga(f),Pa:p,Ka:f}}qa(e,n,s){let r=ii(this.Yi.Qe());return this.Yi.Ja()&&(r=ra(r,this.Yi.tl())),r.$e()-n<e&&s-r.qe()<e}}function _3(t){return t.slice().sort((e,n)=>ge(e.hs())-ge(n.hs()))}var C1;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(C1||(C1={}));const _1=new y3,E1=new m0(100,1);class SR{constructor(e,n,s,r,i){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new $t,this.ul=new $t,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=E1,this.wl=Xp(null),this.gl=e,this.Ps=n,this.Ml=s,this.bl=r,this.Sl=i,this.xl=new S1(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(e){if(Gn(this.Ps,e),this.wa(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const n=Fn(e.scaleMargins.top),s=Fn(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(n+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+s}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const n=this.ie();let s=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),n.ie===1&&e.ie!==n.ie&&(function(i,o){if(i===null)return!1;const a=Lc(i.$e(),o),l=Lc(i.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.wl)?(s=ra(this.Ge,this.wl),s!==null&&this.Bl(s)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==n.ie&&(s=Yl(this.Ge,this.wl),s!==null&&this.Bl(s));const r=n.ie!==this.Ps.mode;r&&(n.ie===2||this.Le())&&this.wa(),r&&(n.ie===3||this.Dl())&&this.wa(),e.Vl!==void 0&&n.Vl!==e.Vl&&(this.Ps.invertScale=e.Vl,this.Il()),this.ul.p(n,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(e){this.il!==e&&(this.il=e,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const e=this.$t()-this.Ll()-this.Ol();return this.sl=e,e}Qe(){return this.Nl(),this.Ge}Bl(e,n){const s=this.Ge;(n||s===null&&e!==null||s!==null&&!s.He(e))&&(this.pl=null,this.Ge=e)}Fl(e){this.Bl(e),this.Wl(e!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(e){return this.Vl()?e:this.$t()-1-e}Nt(e,n){return this.Le()?e=sa(e,n):this.Dl()&&(e=Oc(e,n)),this.Pl(e,n)}Ul(e,n,s){this.Nl();const r=this.Ol(),i=ge(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,p=this.$l();for(let m=d;m<f;m++){const x=e[m],w=x.gt;if(isNaN(w))continue;let g=w;p!==null&&(g=p(x.gt,n));const b=r+u*(g-o),v=c?b:this.il-1-b;x.ut=v}}ql(e,n,s){this.Nl();const r=this.Ol(),i=ge(this.Qe()),o=i.$e(),a=i.qe(),l=this.zl()-1,c=this.Vl(),u=l/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,p=this.$l();for(let m=d;m<f;m++){const x=e[m];let w=x.qh,g=x.Yh,b=x.jh,v=x.Kh;p!==null&&(w=p(x.qh,n),g=p(x.Yh,n),b=p(x.jh,n),v=p(x.Kh,n));let y=r+u*(w-o),S=c?y:this.il-1-y;x.Yl=S,y=r+u*(g-o),S=c?y:this.il-1-y,x.jl=S,y=r+u*(b-o),S=c?y:this.il-1-y,x.Kl=S,y=r+u*(v-o),S=c?y:this.il-1-y,x.Xl=S}}Ts(e,n){const s=this.Cl(e,n);return this.Zl(s,n)}Zl(e,n){let s=e;return this.Le()?s=function(r,i){return i<0&&(r=-r),r/100*i+i}(s,n):this.Dl()&&(s=function(r,i){return r-=100,i<0&&(r=-r),r/100*i+i}(s,n)),s}Ma(){return this.cl}Dt(){return this.fl||(this.fl=_3(this.cl)),this.fl}Gl(e){this.cl.indexOf(e)===-1&&(this.cl.push(e),this.wa(),this.Jl())}Ql(e){const n=this.cl.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.cl.splice(n,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let e=null;for(const n of this.cl){const s=n.zt();s!==null&&(e===null||s.Hh<e.Hh)&&(e=s)}return e===null?null:e.Wt}Vl(){return this.Ps.invertScale}Da(){const e=this.zt()===null;if(this.pl!==null&&(e||this.pl.io===e))return this.pl.Da;this.xl.Wa();const n=this.xl.Da();return this.pl={Da:n,io:e},this._l.p(),n}so(){return this._l}no(e){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-e,this.nl=ge(this.Qe()).Ue()))}eo(e){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(e=this.il-e)<0&&(e=0);let n=(this.vl+.2*(this.il-1))/(e+.2*(this.il-1));const s=ge(this.nl).Ue();n=Math.max(n,.1),s.je(n),this.Bl(s)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(e){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=e,this.nl=ge(this.Qe()).Ue()))}ao(e){if(this.Tl()||this.ml===null)return;const n=ge(this.Qe()).Ye()/(this.zl()-1);let s=e-this.ml;this.Vl()&&(s*=-1);const r=s*n,i=ge(this.nl).Ue();i.Ke(r),this.Bl(i,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(e,n){switch(this.Ps.mode){case 2:return this.oo(sa(e,n));case 3:return this.ea().format(Oc(e,n));default:return this.nr(e)}}Ga(e){switch(this.Ps.mode){case 2:return this.oo(e);case 3:return this.ea().format(e);default:return this.nr(e)}}Xa(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ea().formatTickmarks(e);default:return this.uo(e)}}Dh(e){return this.nr(e,ge(this.dl).ea())}Vh(e,n){return e=sa(e,n),this.oo(e,_1)}co(){return this.cl}do(e){this.el={hl:e,rl:!1}}Ns(){this.cl.forEach(e=>e.Ns())}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let e=1/0;this.dl=null;for(const s of this.cl)s.hs()<e&&(e=s.hs(),this.dl=s);let n=100;this.dl!==null&&(n=Math.round(this.dl.nh())),this.ra=E1,this.Le()?(this.ra=_1,n=100):this.Dl()?(this.ra=new m0(100,1),n=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new S1(this,n,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(e){this.al=e}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(e,n){if(this.Nl(),this.Ki())return 0;e=this.Ja()&&e?df(e,this.wl):e;const s=ge(this.Qe()),r=this.Ol()+(this.zl()-1)*(e-s.$e())/s.Ye();return this.Hl(r)}Cl(e,n){if(this.Nl(),this.Ki())return 0;const s=this.Hl(e),r=ge(this.Qe()),i=r.$e()+r.Ye()*((s-this.Ol())/(this.zl()-1));return this.Ja()?Lc(i,this.wl):i}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const e=this.el.hl;if(e===null)return;let n=null;const s=this.co();let r=0,i=0;for(const l of s){if(!l.Vt())continue;const c=l.zt();if(c===null)continue;const u=l.Mh(e.Uh(),e.bi());let d=u&&u.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=Yl(d,this.wl);break;case 2:d=vR(d,c.Wt);break;case 3:d=kR(d,c.Wt)}if(n=n===null?d:n.vn(ge(d)),u!==null){const f=u.tr();f!==null&&(r=Math.max(r,f.above),i=Math.max(i,f.below))}}}if(this.$a()&&(r=Math.max(r,this.Ya()),i=Math.max(i,this.Ya())),r===this.ll&&i===this.ol||(this.ll=r,this.ol=i,this.pl=null,this.kl()),n!==null){if(n.$e()===n.qe()){const l=5*this.fo();this.Ja()&&(n=ra(n,this.wl)),n=new kn(n.$e()-l,n.qe()+l),this.Ja()&&(n=Yl(n,this.wl))}if(this.Ja()){const l=ra(n,this.wl),c=Xp(l);if(o=c,a=this.wl,o.Va!==a.Va||o.Ba!==a.Ba){const u=this.nl!==null?ra(this.nl,this.wl):null;this.wl=c,n=Yl(l,c),u!==null&&(this.nl=Yl(u,c))}}this.Bl(n)}else this.Ge===null&&(this.Bl(new kn(-.5,.5)),this.wl=Xp(null));var o,a}$l(){return this.Le()?sa:this.Dl()?Oc:this.Ja()?e=>df(e,this.wl):null}vo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.format(e)):n(e)}mo(e,n,s){return n===void 0?(s===void 0&&(s=this.ea()),s.formatTickmarks(e)):n(e)}nr(e,n){return this.vo(e,this.bl.priceFormatter,n)}uo(e,n){const s=this.bl.priceFormatter;return this.mo(e,this.bl.tickmarksPriceFormatter??(s?r=>r.map(s):void 0),n)}oo(e,n){return this.vo(e,this.bl.percentageFormatter,n)}_o(e,n){const s=this.bl.percentageFormatter;return this.mo(e,this.bl.tickmarksPercentageFormatter??(s?r=>r.map(s):void 0),n)}}function P1(t){return t instanceof x0}class T1{constructor(e,n){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new $t,this.yh=[],this.uh=e,this.ts=n,this.Co=new wR(this);const s=n.N();this.Po=this.yo("left",s.leftPriceScale),this.ko=this.yo("right",s.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(s)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.ko.hr(e.rightPriceScale),e.localization&&(this.Po.wa(),this.ko.wa()),e.overlayPriceScales){const n=Array.from(this.wo.values());for(const s of n){const r=ge(s[0].Ft());r.hr(e.overlayPriceScales),e.localization&&r.wa()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.ko}return this.wo.has(e)?Fn(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach(e=>{e.m&&e.m()}),this.yh=this.yh.filter(e=>{const n=e.oh();return n.detached&&n.detached(),!1}),this.xo.p()}Bo(){return this.bo}Io(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(e){this.Mo=e,this.Ao()}Al(e){this.il=e,this.Po.Al(e),this.ko.Al(e),this.cl.forEach(n=>{if(this.Un(n)){const s=n.Ft();s!==null&&s.Al(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.cl.filter(P1)}Ma(){return this.cl}Un(e){const n=e.Ft();return n===null||this.Po!==n&&this.ko!==n}Gl(e,n,s){this.No(e,n,s?e.hs():this.cl.length)}Ql(e,n){const s=this.cl.indexOf(e);tn(s!==-1,"removeDataSource: invalid data source"),this.cl.splice(s,1),n||this.cl.forEach((o,a)=>o.ls(a));const r=ge(e.Ft()).ma();if(this.wo.has(r)){const o=Fn(this.wo.get(r)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.wo.delete(r))}const i=e.Ft();i&&i.Ma().indexOf(e)>=0&&(i.Ql(e),this.Fo(i)),this.fl=null}qn(e){return e===this.Po?"left":e===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(e,n){e.no(n)}$o(e,n){e.eo(n),this.Ao()}qo(e){e.ro()}Yo(e,n){e.ho(n)}jo(e,n){e.ao(n),this.Ao()}Ko(e){e.lo()}Ao(){this.cl.forEach(e=>{e.Ns()})}ks(){let e=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?e=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?e=this.Po:this.cl.length!==0&&(e=this.cl[0].Ft()),e===null&&(e=this.ko),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.ko:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Tl()&&this.Xo(e)}Zo(e){const n=this.uh.Pe();e.yl({sn:!0}),n!==null&&e.do(n),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=_3(this.cl)),this.fl}Qo(e,n){n=Rc(n,0,this.cl.length-1);const s=this.cl.indexOf(e);tn(s!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(s,1),this.cl.splice(n,0,e),this.cl.forEach((r,i)=>r.ls(i)),this.fl=null;for(const r of[this.Po,this.ko])r.Jl(),r.wa();this.ts.ar()}Bt(){return this.Dt().filter(P1)}t_(){return this.xo}i_(){return this.Co}_a(e){this.yh.push(new aR(e))}ua(e){this.yh=this.yh.filter(n=>n.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.yh}sa(e,n){return this.yh.map(s=>s.jn(e,n)).filter(s=>s!==null)}Xo(e){const n=e.co();if(n&&n.length>0&&!this.uh.Ki()){const s=this.uh.Pe();s!==null&&e.do(s)}e.Ns()}No(e,n,s){let r=this.Do(n);if(r===null&&(r=this.yo(n,this.ts.N().overlayPriceScales)),this.cl.splice(s,0,e),!g0(n)){const i=this.wo.get(n)||[];i.push(e),this.wo.set(n,i)}e.ls(s),r.Gl(e),e._s(r),this.Fo(r),this.fl=null}To(e,n,s){n.ie!==s.ie&&this.Xo(e)}yo(e,n){const s={visible:!0,autoScale:!0,...vr(n)},r=new SR(e,s,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return r.Al(this.$t()),r}}function Pd(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function CR(t,e,n,s){for(const r of t){const i=r.Tt(s);if(i!==null&&i.jn){const o=i.jn(e,n);if(o!==null)return{a_:r,e_:o}}}return null}function _R(t){return t.Fs!==void 0}function E3(t,e,n){const s=[t,...t.Dt()],r=function(i,o,a){var f;let l,c;for(const p of i){const m=((f=p.sa)==null?void 0:f.call(p,o,a))??[];for(const x of m)u=x.zOrder,d=l==null?void 0:l.zOrder,(!d||u==="top"&&d!=="top"||u==="normal"&&d==="bottom")&&(l=x,c=p)}var u,d;return l&&c?{r_:l,n_:c}:null}(s,e,n);if((r==null?void 0:r.r_.zOrder)==="top")return Pd(r);for(const i of s){if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&!r.r_.isBackground)return Pd(r);if(_R(i)){const o=CR(i.Fs(t),e,n,t);if(o!==null)return{n_:i,a_:o.a_,e_:o.e_}}if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&r.r_.isBackground)return Pd(r)}return r!=null&&r.r_?Pd(r):null}class ER{constructor(e,n,s=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=n,this.Vn=s}__(e){const n=e.time,s=this.o_.cacheKey(n),r=this.Dn.get(s);if(r!==void 0)return r.u_;if(this.yn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Fn(o)),this.Tn++,this.yn--}const i=this.l_(e);return this.Dn.set(s,{u_:i,An:this.kn}),this.Rn.set(this.kn,s),this.yn++,this.kn++,i}}class jc{constructor(e,n){tn(e<=n,"right should be >= left"),this.c_=e,this.d_=n}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function M1(t,e){return t===null||e===null?t===e:t.He(e)}class PR{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,n){this.g_(n),this.Dn=null;for(let s=n;s<e.length;++s){const r=e[s];let i=this.p_.get(r.timeWeight);i===void 0&&(i=[],this.p_.set(r.timeWeight,i)),i.push({index:s,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}M_(e,n,s,r,i){const o=Math.ceil(n/e);return this.Dn!==null&&this.Dn.b_===o&&i===this.Dn.S_&&s===this.Dn.x_||(this.Dn={S_:i,x_:s,Da:this.C_(o,s,r),b_:o}),this.Dn.Da}g_(e){if(e===0)return void this.p_.clear();const n=[];this.p_.forEach((s,r)=>{e<=s[0].index?n.push(r):s.splice(sl(s,e,i=>i.index<e),1/0)});for(const s of n)this.p_.delete(s)}C_(e,n,s){let r=[];const i=o=>!n||s.has(o.index);for(const o of Array.from(this.p_.keys()).sort((a,l)=>l-a)){if(!this.p_.get(o))continue;const a=r;r=[];const l=a.length;let c=0;const u=Fn(this.p_.get(o)),d=u.length;let f=1/0,p=-1/0;for(let m=0;m<d;m++){const x=u[m],w=x.index;for(;c<l;){const g=a[c],b=g.index;if(!(b<w&&i(g))){f=b;break}c++,r.push(g),p=b,f=1/0}if(f-w>=e&&w-p>=e&&i(x))r.push(x),p=w;else if(this.v_)return a}for(;c<l;c++)i(a[c])&&r.push(a[c])}return r}}class xa{constructor(e){this.P_=e}y_(){return this.P_===null?null:new jc(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new xa(null)}}function TR(t,e){return t.weight>e.weight?t:e}class MR{constructor(e,n,s,r){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new PR,this.B_=new Map,this.I_=xa.T_(),this.E_=!0,this.A_=new $t,this.z_=new $t,this.L_=new $t,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=n,this.bl=s,this.U_=n.rightOffset,this.q_=n.barSpacing,this.ts=e,this.Y_(n),this.o_=r,this.j_(),this.V_.m_(n.uniformDistribution),this.K_()}N(){return this.Ps}X_(e){Gn(this.bl,e),this.Z_(),this.j_()}hr(e,n){Gn(this.Ps,e),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),this.Y_(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(e){var n;return((n=this.D_[e])==null?void 0:n.time)??null}ss(e){return this.D_[e]??null}Q_(e,n){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return n?this.D_.length-1:null;const s=sl(this.D_,this.o_.key(e),(r,i)=>this.o_.key(r.time)<i);return this.o_.key(e)<this.o_.key(this.D_[s].time)?n?s:null:s}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const e=this.Pe();if(e===null)return null;const n={from:e.Uh(),to:e.bi()};return this.eu(n)}eu(e){const n=Math.round(e.from),s=Math.round(e.to),r=ge(this.ru()),i=ge(this.hu());return{from:ge(this.ss(Math.max(r,n))),to:ge(this.ss(Math.min(i,s)))}}au(e){return{from:ge(this.Q_(e.from,!0)),to:ge(this.Q_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const n=this.su(),s=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const r=this.q_*e/s;this.q_=r}if(this.Ps.fixLeftEdge&&n!==null&&n.Uh()<=0){const r=s-e;this.U_-=Math.round(r/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(e){if(this.Ki()||!fu(e))return 0;const n=this._u()+this.U_-e;return this.Mo-(n+.5)*this.q_-1}uu(e,n){const s=this._u(),r=n===void 0?0:n.from,i=n===void 0?e.length:n.to;for(let o=r;o<i;o++){const a=e[o].wt,l=s+this.U_-a,c=this.Mo-(l+.5)*this.q_-1;e[o]._t=c}}cu(e,n){const s=Math.ceil(this.du(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.fu(s)?this.pu(s):s}fn(e){this.E_=!0,this.U_=e,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(e){const n=this.q_;if(this.wu(e),this.Ps.rightOffsetPixels!==void 0&&n!==0){const s=this.U_*n/this.q_;this.U_=s}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,n=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(n/e),r=ge(this.Pe()),i=Math.max(r.Uh(),r.Uh()-s),o=Math.max(r.bi(),r.bi()-s),a=this.V_.M_(e,n,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),l=this.ru()+s,c=this.hu()-s,u=this.Mu(),d=this.Ps.fixLeftEdge||u,f=this.Ps.fixRightEdge||u;let p=0;for(const m of a){if(!(i<=m.index&&m.index<=o))continue;let x;p<this.H_.length?(x=this.H_[p],x.coord=this.qt(m.index),x.label=this.bu(m),x.weight=m.weight):(x={needAlignCoordinate:!1,coord:this.qt(m.index),label:this.bu(m),weight:m.weight},this.H_.push(x)),this.q_>n/2&&!u?x.needAlignCoordinate=!1:x.needAlignCoordinate=d&&m.index<=l||f&&m.index>=c,p++}return this.H_.length=p,this.N_=this.H_,this.H_}Su(){let e;this.E_=!0,this.dn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(e)}xu(e){this.E_=!0,this.R_=e,this.ou(),this.G_()}Cu(e,n){const s=this.du(e),r=this.mu(),i=r+n*(r/10);this.dn(i),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(s-this.du(e)))}no(e){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=e,this.Pu()))}eo(e){if(this.O_===null)return;const n=Rc(this.Mo-e,0,this.Mo),s=Rc(this.Mo-ge(this.vl),0,this.Mo);n!==0&&s!==0&&this.dn(this.O_.mu*n/s)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(e){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Pu()))}ao(e){if(this.ml===null)return;const n=(this.ml-e)/this.mu();this.U_=ge(this.O_).gu+n,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.U_,r=performance.now();this.ts._n({Ru:i=>(i-r)/n>=1,Du:i=>{const o=(i-r)/n;return o>=1?e:s+(e-s)*o}})}yt(e,n){this.E_=!0,this.D_=e,this.V_.w_(e,n),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(e,n){const s=e.f_(),r=n&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-r)/s),this.U_=e.bi()-this._u(),n&&(this.U_=r?r/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const e=this.ru(),n=this.hu();e!==null&&n!==null&&this.Eu(new jc(e,n),!0)}zu(e){const n=new jc(e.from,e.to);this.Eu(n)}ns(e){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const n of e)for(const s of n.va())this.F_.set(s,!0);this.W_++}Mu(){const e=this.ts.N().handleScroll,n=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(e){return(this.Mo-1-e)/this.q_}du(e){const n=this.Lu(e),s=this._u()+this.U_-n;return Math.round(1e6*s)/1e6}wu(e){const n=this.q_;this.q_=e,this.lu(),n!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(xa.T_());const e=this._u(),n=this.Mo/this.q_,s=this.U_+e,r=new jc(s-n+1,s);this.Nu(new xa(r))}lu(){const e=Rc(this.q_,this.Fu(),this.Wu());this.q_!==e&&(this.q_=e,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const e=this.Hu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const n=this.Uu();this.U_>n&&(this.U_=n,this.E_=!0)}Hu(){const e=this.ru(),n=this.R_;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(e){let n=this.B_.get(e.weight);return n===void 0&&(n=new ER(s=>this.$u(s),this.o_),this.B_.set(e.weight,n)),n.__(e)}$u(e){return this.o_.formatTickmark(e,this.bl)}Nu(e){const n=this.I_;this.I_=e,M1(n.y_(),this.I_.y_())||this.A_.p(),M1(n.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const e=this.ru();if(e===null)return;const n=this.Pe();if(n===null)return;const s=n.Uh()-e;if(s<0){const r=this.U_-s-1;this.fn(r)}this.lu()}J_(){this.ou(),this.lu()}fu(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}pu(e){const n=function*(r){const i=Math.round(r),o=i<r;let a=1;for(;;)o?(yield i+a,yield i-a):(yield i-a,yield i+a),a++}(e),s=this.hu();for(;s;){const r=n.next().value;if(this.F_.get(r))return r;if(r<0||r>s)break}return e}Y_(e){if(e.rightOffsetPixels!==void 0){const n=e.rightOffsetPixels/(e.barSpacing||this.q_);this.ts.fn(n)}}}var I1,N1,D1,A1,R1;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(I1||(I1={}));class IR{constructor(e,n,s){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new $t,this.Xu=new $t,this.Zu=null,this.Gu=e,this.Ps=n,this.o_=s,this.Sl=new IA(this.Ps.layout.colorParsers),this.Ju=new MA(this),this.uh=new MR(this,n.timeScale,this.Ps.localization,s),this.Ct=new zA(this,n.crosshair),this.Qu=new xR(n.crosshair),n.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(en.gn())}ar(){this.rc(en.wn())}Zh(){this.rc(new en(1))}Eh(e){const n=this.hc(e);this.rc(n)}ac(){return this.ju}lc(e){var s,r,i,o;if(((s=this.ju)==null?void 0:s.n_)===(e==null?void 0:e.n_)&&((i=(r=this.ju)==null?void 0:r.e_)==null?void 0:i.Kn)===((o=e==null?void 0:e.e_)==null?void 0:o.Kn))return;const n=this.ju;this.ju=e,n!==null&&this.Eh(n.n_),e!==null&&e.n_!==(n==null?void 0:n.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Gn(this.Ps,e),this.qu.forEach(n=>n.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.X_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(e,n,s=0){const r=this.qu[s];if(r===void 0)return;if(e==="left")return Gn(this.Ps,{leftPriceScale:n}),r.Ro({leftPriceScale:n}),this.Ku.p(),void this.Ih();if(e==="right")return Gn(this.Ps,{rightPriceScale:n}),r.Ro({rightPriceScale:n}),this.Ku.p(),void this.Ih();const i=this._c(e,s);i!==null&&(i.Ft.hr(n),this.Ku.p())}_c(e,n){const s=this.qu[n];if(s===void 0)return null;const r=s.Do(e);return r!==null?{Us:s,Ft:r}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(e,n){e.Al(n),this.vu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.qu.forEach(n=>n.Eo(e)),this.vu()}fc(e){this.qu.length!==1&&(tn(e>=0&&e<this.qu.length,"Invalid pane index"),this.qu.splice(e,1),this.Ih())}vc(e,n){if(this.qu.length<2)return;tn(e>=0&&e<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu.reduce((d,f)=>d+f.Bo(),0),i=this.qu.reduce((d,f)=>d+f.$t(),0),o=i-30*(this.qu.length-1);n=Math.min(o,Math.max(30,n));const a=r/i,l=s.$t();s.Io(n*a);let c=n-l,u=this.qu.length-1;for(const d of this.qu)if(d!==s){const f=Math.min(o,Math.max(30,d.$t()-c/u));c-=d.$t()-f,u-=1;const p=f*a;d.Io(p)}this.Ih()}mc(e,n){tn(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index");const s=this.qu[e],r=this.qu[n];this.qu[e]=r,this.qu[n]=s,this.Ih()}wc(e,n){if(tn(e>=0&&e<this.qu.length&&n>=0&&n<this.qu.length,"Invalid pane index"),e===n)return;const[s]=this.qu.splice(e,1);this.qu.splice(n,0,s),this.Ih()}Uo(e,n,s){e.Uo(n,s)}$o(e,n,s){e.$o(n,s),this.Ah(),this.rc(this.gc(e,2))}qo(e,n){e.qo(n),this.rc(this.gc(e,2))}Yo(e,n,s){n.Tl()||e.Yo(n,s)}jo(e,n,s){n.Tl()||(e.jo(n,s),this.Ah(),this.rc(this.gc(e,2)))}Ko(e,n){n.Tl()||(e.Ko(n),this.rc(this.gc(e,2)))}Zo(e,n){e.Zo(n),this.rc(this.gc(e,2))}Mc(e){this.uh.no(e)}bc(e,n){const s=this.Et();if(s.Ki()||n===0)return;const r=s.Qi();e=Math.max(1,Math.min(e,r)),s.Cu(e,n),this.vu()}Sc(e){this.xc(0),this.Cc(e),this.Pc()}yc(e){this.uh.eo(e),this.vu()}kc(){this.uh.ro(),this.ar()}xc(e){this.uh.ho(e)}Cc(e){this.uh.ao(e),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(e,n,s,r,i){this.Ct.Vs(e,n);let o=NaN,a=this.uh.cu(e,!0);const l=this.uh.Pe();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));const c=r.ks(),u=c.zt();if(u!==null&&(o=c.Ts(n,u)),o=this.Qu.ga(o,a,r),this.Ct.As(a,o,r),this.Zh(),!i){const d=E3(r,e,n);this.lc(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Xu.p(this.Ct.It(),{x:e,y:n},s)}}Rc(e,n,s){const r=s.ks(),i=r.zt(),o=r.Nt(e,ge(i)),a=this.uh.Q_(n,!0),l=this.uh.qt(ge(a));this.Tc(l,o,null,s,!0)}Dc(e){this.uc().Ls(),this.Zh(),e||this.Xu.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const n=this.Ct.Is(),s=this.Ct.Es();this.Tc(n,s,null,e)}this.Ct.Ns()}Vc(e,n,s){const r=this.uh.Rs(0);n!==void 0&&s!==void 0&&this.uh.yt(n,s);const i=this.uh.Rs(0),o=this.uh._u(),a=this.uh.Pe();if(a!==null&&r!==null&&i!==null){const l=a.Te(o),c=this.o_.key(r)>this.o_.key(i),u=e!==null&&e>o&&!c,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=l&&(s!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!f){const p=e-o;this.uh.fn(this.uh.gu()-p)}}this.uh.xu(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(s){return s instanceof T1}(e))return e;const n=this.qu.find(s=>s.Dt().includes(e));return n===void 0?null:n}vu(){this.qu.forEach(e=>e.Jo()),this.Ah()}m(){this.qu.forEach(e=>e.m()),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(e,n){const s=this.tc(n);this.Ec(e,s),this.Yu.push(e),this.Yu.length===1?this.Ih():this.ar()}Ac(e){const n=this.Hn(e),s=this.Yu.indexOf(e);tn(s!==-1,"Series not found");const r=ge(n);this.Yu.splice(s,1),r.Ql(e),e.m&&e.m(),this.uh.K_(),this.zc(r)}Bh(e,n){const s=ge(this.Hn(e));s.Ql(e,!0),s.Gl(e,n,!0)}Au(){const e=en.wn();e.rn(),this.rc(e)}Lc(e){const n=en.wn();n.ln(e),this.rc(n)}cn(){const e=en.wn();e.cn(),this.rc(e)}dn(e){const n=en.wn();n.dn(e),this.rc(n)}fn(e){const n=en.wn();n.fn(e),this.rc(n)}_n(e){const n=en.wn();n._n(e),this.rc(n)}hn(){const e=en.wn();e.hn(),this.rc(e)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(e,n){if(tn(n>=0,"Index should be greater or equal to 0"),n===this.Fc(e))return;const s=ge(this.Hn(e));s.Ql(e);const r=this.tc(n);this.Ec(e,r),s.Ma().length===0&&this.zc(s),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(e){const n=this.ec,s=this.sc;if(n===s)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Zu===null||this.Zu.mr!==s||this.Zu.wr!==n)this.Zu={mr:s,wr:n,Hc:new Map};else{const i=this.Zu.Hc.get(e);if(i!==void 0)return i}const r=this.Sl.tt(s,n,e/100);return this.Zu.Hc.set(e,r),r}Uc(e){return this.qu.indexOf(e)}Xi(){return this.Sl}$c(){return this.qc()}qc(e){const n=new T1(this.uh,this);this.qu.push(n);const s=e??this.qu.length-1,r=en.gn();return r.Qs(s,{tn:0,sn:!0}),this.rc(r),n}tc(e){return tn(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.qu.length,e))<this.qu.length?this.qu[e]:this.qc(e)}Fc(e){return this.qu.findIndex(n=>n.Oo().includes(e))}gc(e,n){const s=new en(n);if(e!==null){const r=this.qu.indexOf(e);s.Qs(r,{tn:n})}return s}hc(e,n){return n===void 0&&(n=2),this.gc(this.Hn(e),n)}rc(e){this.Gu&&this.Gu(e),this.qu.forEach(n=>n.i_().lr().yt())}Ec(e,n){const s=e.N().priceScaleId,r=s!==void 0?s:this.Oc();n.Gl(e,r),g0(r)||e.hr(e.N())}nc(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}zc(e){!e.Lo()&&e.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(e),1)}}function P3(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}function Fm(t){return!nl(t)&&!$u(t)}function T3(t){return nl(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(N1||(N1={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(D1||(D1={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(A1||(A1={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(R1||(R1={}));const O1=t=>t.getUTCFullYear();function NR(t,e,n){return e.replace(/yyyy/g,(s=>kr(O1(s),4))(t)).replace(/yy/g,(s=>kr(O1(s)%100,2))(t)).replace(/MMMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,n)).replace(/MMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,n)).replace(/MM/g,(s=>kr((r=>r.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>kr((r=>r.getUTCDate())(s),2))(t))}class M3{constructor(e="yyyy-MM-dd",n="default"){this.Yc=e,this.jc=n}__(e){return NR(e,this.Yc,this.jc)}}class DR{constructor(e){this.Kc=e||"%h:%m:%s"}__(e){return this.Kc.replace("%h",kr(e.getUTCHours(),2)).replace("%m",kr(e.getUTCMinutes(),2)).replace("%s",kr(e.getUTCSeconds(),2))}}const AR={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class RR{constructor(e={}){const n={...AR,...e};this.Qc=new M3(n.Xc,n.Jc),this.td=new DR(n.Zc),this.sd=n.Gc}__(e){return`${this.Qc.__(e)}${this.sd}${this.td.__(e)}`}}function Td(t){return 60*t*60*1e3}function Jp(t){return 60*t*1e3}const Md=[{nd:(L1=1,1e3*L1),ed:10},{nd:Jp(1),ed:20},{nd:Jp(5),ed:21},{nd:Jp(30),ed:22},{nd:Td(1),ed:30},{nd:Td(3),ed:31},{nd:Td(6),ed:32},{nd:Td(12),ed:33}];var L1;function j1(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=Md.length-1;n>=0;--n)if(Math.floor(e.getTime()/Md[n].nd)!==Math.floor(t.getTime()/Md[n].nd))return Md[n].ed;return 0}function Zp(t){let e=t;if($u(t)&&(e=zb(t)),!Fm(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{rd:Math.round(n.getTime()/1e3),hd:e}}function F1(t){if(!T3(t))throw new Error("time must be of type isUTCTimestamp");return{rd:t}}function zb(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function B1(t){$u(t.time)&&(t.time=zb(t.time))}class $1{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(B1)}(e):B1(e)}createConverterToInternalObj(e){return ge(function(n){return n.length===0?null:Fm(n[0].time)||$u(n[0].time)?Zp:F1}(e))}key(e){return typeof e=="object"&&"rd"in e?e.rd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.hd===void 0?new Date(1e3*n.rd).getTime():new Date(Date.UTC(n.hd.year,n.hd.month-1,n.hd.day)).getTime()}convertHorzItemToInternal(e){return T3(n=e)?F1(n):Fm(n)?Zp(n):Zp(zb(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new RR({Xc:n,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:e.locale}):this.ad=new M3(n,e.locale)}formatHorzItem(e){const n=e;return this.ad.__(new Date(1e3*n.rd))}formatTickmark(e,n){const s=function(i,o,a){switch(i){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),r=this.Ps.timeScale;if(r.tickMarkFormatter!==void 0){const i=r.tickMarkFormatter(e.originalTime,s,n.locale);if(i!==null)return i}return function(i,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=i.hd===void 0?new Date(1e3*i.rd):new Date(Date.UTC(i.hd.year,i.hd.month-1,i.hd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,s,n.locale)}maxTickMarkWeight(e){let n=e.reduce(TR,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(s,r=0){if(s.length===0)return;let i=r===0?null:s[r-1].time.rd,o=i!==null?new Date(1e3*i):null,a=0;for(let l=r;l<s.length;++l){const c=s[l],u=new Date(1e3*c.time.rd);o!==null&&(c.timeWeight=j1(u,o)),a+=c.time.rd-(i||c.time.rd),i=c.time.rd,o=u}if(r===0&&s.length>1){const l=Math.ceil(a/(s.length-1)),c=new Date(1e3*(s[0].time.rd-l));s[0].timeWeight=j1(new Date(1e3*s[0].time.rd),c)}})(e,n)}static ld(e){return Gn({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const rl=typeof window<"u";function z1(){return!!rl&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function eg(){return!!rl&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Bm(t){return t+t%2}function OR(t){rl&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class b0{constructor(e,n,s){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!eg(),this.Ld=r=>{this.Od(r)},this.Nd=r=>{if(this.Fd(r)){const i=this.Wd(r);if(++this.dd,this.fd&&this.dd>1){const{Hd:o}=this.Ud($s(r),this.pd);o<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}}else{const i=this.Wd(r);if(++this.od,this._d&&this.od>1){const{Hd:o}=this.Ud($s(r),this.ud);o<5&&!this.bd&&this.Kd(i,this.Yd.Xd),this.Zd()}}},this.Gd=e,this.Yd=n,this.Ps=s,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(e){this.yd&&this.yd();const n=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",n)},this.Gd.addEventListener("mousemove",n),this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(e){if(this.Id||this.gd!==null||this.Fd(e))return;const n=this.Wd(e);this.Kd(n,this.Yd.nf),this.zd=!0}ef(e){const n=tg(e.changedTouches,ge(this.Ad));if(n===null||(this.Ed=Id(e),this.Rd!==null)||this.Bd)return;this.Vd=!0;const s=this.Ud($s(n),ge(this.gd)),{rf:r,hf:i,Hd:o}=s;if(this.Md||!(o<5)){if(!this.Md){const a=.5*r,l=i>=a&&!this.Ps.af(),c=a>i&&!this.Ps.lf();l||c||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const a=this.Wd(e,n);this.$d(a,this.Yd._f),Fo(e)}}}uf(e){if(e.button!==0)return;const n=this.Ud($s(e),ge(this.wd)),{Hd:s}=n;if(s>=5&&(this.bd=!0,this.Zd()),this.bd){const r=this.Wd(e);this.Kd(r,this.Yd.cf)}}Ud(e,n){const s=Math.abs(n._t-e._t),r=Math.abs(n.ut-e.ut);return{rf:s,hf:r,Hd:s+r}}df(e){let n=tg(e.changedTouches,ge(this.Ad));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Ad=null,this.Ed=Id(e),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const s=this.Wd(e,n);if(this.$d(s,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:r}=this.Ud($s(n),this.pd);r<30&&!this.Sd&&this.$d(s,this.Yd.qd),this.jd()}else this.Sd||(this.$d(s,this.Yd.pf),this.Yd.pf&&Fo(e));this.dd===0&&Fo(e),e.touches.length===0&&this.md&&(this.md=!1,Fo(e))}Od(e){if(e.button!==0)return;const n=this.Wd(e);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),z1()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(e))if(this.Kd(n,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:s}=this.Ud($s(e),this.ud);s<5&&!this.bd&&this.Kd(n,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(n,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(e){if(this.Ad!==null)return;const n=e.changedTouches[0];this.Ad=n.identifier,this.Ed=Id(e);const s=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=$s(n),this.Td&&(this.Td(),this.Td=null);{const i=this.ef.bind(this),o=this.df.bind(this);this.Td=()=>{s.removeEventListener("touchmove",i),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,e),240)}const r=this.Wd(e,n);this.$d(r,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=$s(n))}bf(e){if(e.button!==0)return;const n=this.Gd.ownerDocument.documentElement;z1()&&n.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=$s(e),this.kd&&(this.kd(),this.kd=null);{const r=this.uf.bind(this),i=this.Od.bind(this);this.kd=()=>{n.removeEventListener("mousemove",r),n.removeEventListener("mouseup",i)},n.addEventListener("mousemove",r),n.addEventListener("mouseup",i)}if(this.Id=!0,this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=$s(e))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const e=this.Gd.ownerDocument,n=s=>{this.Yd.xf&&(s.composed&&this.Gd.contains(s.composedPath()[0])||s.target&&this.Gd.contains(s.target)||this.Yd.xf())};this.Cd=()=>{e.removeEventListener("touchstart",n)},this.xd=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}eg()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),OR(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",()=>{},{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",e=>this.Rf(e.touches),{passive:!0}),this.Gd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const n=U1(e.touches[0],e.touches[1])/this.Dd;this.Yd.kf(this.Rd,n),Fo(e)}},{passive:!1}),this.Gd.addEventListener("touchend",e=>{this.Rf(e.touches)}))}Rf(e){e.length===1&&(this.Vd=!1),e.length!==2||this.Vd||this.md?this.Df():this.Vf(e)}Vf(e){const n=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Dd=U1(e[0],e[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(e){if(this.yd&&this.yd(),this.Fd(e)||!this.zd)return;const n=this.Wd(e);this.Kd(n,this.Yd.Bf),this.zd=!eg()}gf(e){const n=tg(e.touches,ge(this.Ad));if(n===null)return;const s=this.Wd(e,n);this.$d(s,this.Yd.If),this.Sd=!0,this.md=!0}Fd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Id(e)<this.Ed+500}$d(e,n){n&&n.call(this.Yd,e)}Kd(e,n){n&&n.call(this.Yd,e)}Wd(e,n){const s=n||e,r=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-r.left,localY:s.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Ef:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Af:e.type,zf:s.target,a_:e.view,Lf:()=>{e.type!=="touchstart"&&Fo(e)}}}}function U1(t,e){const n=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(n*n+s*s)}function Fo(t){t.cancelable&&t.preventDefault()}function $s(t){return{_t:t.pageX,ut:t.pageY}}function Id(t){return t.timeStamp||performance.now()}function tg(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class LR{constructor(e,n,s){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=e,this.Uf=e.$f()[n],this.qf=e.$f()[s],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return xt({width:this.Uf.Gf().width,height:1})}Jf(){return xt({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(e,n,s){const r=this.Jf();e.fillStyle=this.Hf.N().layout.panes.separatorColor,e.fillRect(n,s,r.width,r.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.jf.appendChild(e);const s=document.createElement("div"),r=s.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.jf.appendChild(s);const i={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new b0(s,i,{af:()=>!1,lf:()=>!0}),this.Of={ip:s,tp:e}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(e){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(e){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(e){if(this.Of===null)return;const n=this.Uf.ap().Bo()+this.qf.ap().Bo(),s=n/(this.Uf.Gf().height+this.qf.Gf().height),r=30*s;n<=2*r||(this.Wf={lp:e.pageY,op:this.Uf.ap().Bo(),_p:n-r,up:n,cp:s,dp:r},this.Of.tp.style.display="block")}rp(e){const n=this.Wf;if(n===null)return;const s=(e.pageY-n.lp)*n.cp,r=Rc(n.op+s,n.dp,n._p);this.Uf.ap().Io(r),this.qf.ap().Io(n.up-r),this.Hf.Qt().Ih()}hp(e){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function ng(t,e){return t.fp-e.fp}function sg(t,e,n){const s=(t.fp-e.fp)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),n)}class jR{constructor(e,n,s,r){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=e,this.xp=n,this.Cp=s,this.Mn=r}Pp(e,n){if(this.pp!==null){if(this.pp.wt===n)return void(this.pp.fp=e);if(Math.abs(this.pp.fp-e)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:n,fp:e}}le(e,n){if(this.pp===null||this.vp===null||n-this.pp.wt>50)return;let s=0;const r=sg(this.pp,this.vp,this.xp),i=ng(this.pp,this.vp),o=[r],a=[i];if(s+=i,this.mp!==null){const c=sg(this.vp,this.mp,this.xp);if(Math.sign(c)===Math.sign(r)){const u=ng(this.vp,this.mp);if(o.push(c),a.push(u),s+=u,this.wp!==null){const d=sg(this.mp,this.wp,this.xp);if(Math.sign(d)===Math.sign(r)){const f=ng(this.mp,this.wp);o.push(d),a.push(f),s+=f}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/s*o[c];Math.abs(l)<this.Sp||(this.gp={fp:e,wt:n},this.bp=l,this.Mp=function(c,u){const d=Math.log(u);return Math.log(1*d/-c)/d}(Math.abs(l),this.Cp))}Du(e){const n=ge(this.gp),s=e-n.wt;return n.fp+this.bp*(Math.pow(this.Cp,s)-1)/Math.log(this.Cp)}Ru(e){return this.gp===null||this.yp(e)===this.Mp}yp(e){const n=e-ge(this.gp).wt;return Math.min(n,this.Mp)}}class FR{constructor(e,n){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=e,this.Vp=n,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function yo(t,e){const n=ge(t.ownerDocument).createElement("canvas");t.appendChild(n);const s=SA(n,{options:{allowResizeObserver:!0},transform:(r,i)=>({width:Math.max(r.width,i.width),height:Math.max(r.height,i.height)})});return s.resizeCanvasElement(e),s}function wo(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function $m(t,e,n,s){t.ih&&t.ih(e,n,s)}function mh(t,e,n,s){t.nt(e,n,s)}function zm(t,e,n,s){const r=t(n,s);for(const i of r){const o=i.Tt(s);o!==null&&e(o)}}function rg(t,e){return n=>{var s,r;return function(i){return i.Ft!==void 0}(n)?(((s=n.Ft())==null?void 0:s.ma())??"")!==e?[]:((r=n.ta)==null?void 0:r.call(n,t))??[]:[]}}function W1(t,e,n,s){if(!t.length)return;let r=0;const i=t[0].$t(s,!0);let o=e===1?n/2-(t[0].Fi()-i/2):t[0].Fi()-i/2-n/2;o=Math.max(0,o);for(let a=1;a<t.length;a++){const l=t[a],c=t[a-1],u=c.$t(s,!1),d=l.Fi(),f=c.Fi();if(e===1?d>f-u:d<f+u){const p=f-u*e;l.Wi(p);const m=p-e*u/2;if((e===1?m<0:m>n)&&o>0){const x=e===1?-1-m:m-n,w=Math.min(x,o);for(let g=r;g<t.length;g++)t[g].Wi(t[g].Fi()+e*w);o-=w}}else r=a,o=e===1?f-u-d:d-(f+u)}}class H1{constructor(e,n,s,r){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new lf(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=e,this.Ps=n,this.Ml=n.layout,this.Ju=s,this.jp=r==="left",this.Kp=rg("normal",r),this.Xp=rg("top",r),this.Zp=rg("bottom",r),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=yo(this.jf,xt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=yo(this.jf,xt({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new b0(this.Jp.canvasElement,a,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),wo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),wo(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const e=this.Ju.N();return this.Wp!==e.k&&(this.Fp.Bn(),this.Wp=e.k),e}nv(){if(this.Yi===null)return 0;let e=0;const n=this.sv(),s=ge(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));s.save();const r=this.Yi.Da();s.font=this.ev(),r.length>0&&(e=Math.max(this.Fp.Vi(s,r[0].Za),this.Fp.Vi(s,r[r.length-1].Za)));const i=this.rv();for(let c=i.length;c--;){const u=this.Fp.Vi(s,i[c].ri());u>e&&(e=u)}const o=this.Yi.zt();if(o!==null&&this.Op!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Yi.Ts(1,o),u=this.Yi.Ts(this.Op.height-2,o);e=Math.max(e,this.Fp.Vi(s,this.Yi.Zi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Fp.Vi(s,this.Yi.Zi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;s.restore();const l=e||34;return Bm(Math.ceil(n.S+n.C+n.B+n.I+5+l))}hv(e){this.Op!==null&&oo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`)}av(){return ge(this.Op).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=e,e.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const e=this.Pt.ap();this.Pt.qp().Qt().Zo(e,ge(this.Ft()))}lv(e){if(this.Op===null)return;const n={colorSpace:this.Pt.qp().N().layout.colorSpace};if(e!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const r=bo(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i)}),this.Pt.cv(r,this.Zp),this.dv(r),this.Pt.cv(r,this.Kp),this.fv(r))}this.Jp.applySuggestedBitmapSize();const s=bo(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.pv(s),this.Pt.cv(s,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}yt(){var e;(e=this.Yi)==null||e.Da()}ep(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!0,n.Uo(s,this.Yi,e.localY)}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap(),r=this.Yi;n.$o(s,r,e.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),n=this.Pt.ap(),s=this.Yi;this.Np&&(this.Np=!1,e.qo(n,s))}hp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!1,n.qo(s,this.Yi)}tv(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(e){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(e){this.vv(0)}rv(){const e=[],n=this.Yi===null?void 0:this.Yi;return(s=>{for(let r=0;r<s.length;++r){const i=s[r].Ws(this.Pt.ap(),n);for(let o=0;o<i.length;o++)e.push(i[o])}})(this.Pt.ap().Dt()),e}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.Pt.ap().Qt(),o=i.$(),a=i.Wc();o===a?f0(e,0,0,s,r,o):g3(e,0,0,s,r,o,a)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const r=Math.max(1,Math.floor(this.sv().S*s));let i;i=this.jp?n.width-r:0,e.fillRect(i,0,r,n.height)}dv(e){if(this.Op===null||this.Yi===null)return;const n=this.Yi.Da(),s=this.Yi.N(),r=this.sv(),i=this.jp?this.Op.width-r.C:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=s.borderColor;const c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),d=Math.round(r.C*a);o.beginPath();for(const f of n)o.rect(Math.floor(i*a),Math.round(f.Pa*l)-u,d,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.ev(),o.fillStyle=s.textColor??this.Ml.textColor,o.textAlign=this.jp?"right":"left",o.textBaseline="middle";const a=this.jp?Math.round(i-r.B):Math.round(i+r.C+r.B),l=n.map(c=>this.Fp.Di(o,c.Za));for(let c=n.length;c--;){const u=n[c];o.fillText(u.Za,a,u.Pa+l[c])}})}ov(){if(this.Op===null||this.Yi===null)return;let e=this.Op.height/2;const n=[],s=this.Yi.Dt().slice(),r=this.Pt.ap(),i=this.sv();this.Yi===r.$n()&&this.Pt.ap().Dt().forEach(l=>{r.Un(l)&&s.push(l)});const o=this.Yi.Ma()[0],a=this.Yi;s.forEach(l=>{const c=l.Ws(r,a);c.forEach(u=>{u.Wi(null),u.Hi()&&n.push(u)}),o===l&&c.length>0&&(e=c[0].Ii())}),n.forEach(l=>l.Wi(l.Ii())),this.Yi.N().alignLabels&&this.mv(n,i,e)}mv(e,n,s){if(this.Op===null)return;const r=e.filter(o=>o.Ii()<=s),i=e.filter(o=>o.Ii()>s);r.sort((o,a)=>a.Ii()-o.Ii()),r.length&&i.length&&i.push(r[0]),i.sort((o,a)=>o.Ii()-a.Ii());for(const o of e){const a=Math.floor(o.$t(n)/2),l=o.Ii();l>-a&&l<a&&o.Wi(a),l>this.Op.height-a&&l<this.Op.height+a&&o.Wi(this.Op.height-a)}W1(r,1,this.Op.height,n),W1(i,-1,this.Op.height,n)}fv(e){if(this.Op===null)return;const n=this.rv(),s=this.sv(),r=this.jp?"right":"left";n.forEach(i=>{i.Ui()&&i.Tt(ge(this.Yi)).nt(e,s,this.Fp,r)})}pv(e){if(this.Op===null||this.Yi===null)return;const n=this.Pt.qp().Qt(),s=[],r=this.Pt.ap(),i=n.uc().Ws(r,this.Yi);i.length&&s.push(i);const o=this.sv(),a=this.jp?"right":"left";s.forEach(l=>{l.forEach(c=>{c.Tt(ge(this.Yi)).nt(e,o,this.Fp,a)})})}vv(e){this.jf.style.cursor=e===1?"ns-resize":"default"}_l(){const e=this.nv();this.Hp<e&&this.Pt.qp().Qt().Ih(),this.Hp=e}ev(){return af(this.Ml.fontSize,this.Ml.fontFamily)}}function BR(t,e){var n;return((n=t.Jh)==null?void 0:n.call(t,e))??[]}function V1(t,e){var n;return((n=t.Fs)==null?void 0:n.call(t,e))??[]}function Y1(t,e){var n;return((n=t.us)==null?void 0:n.call(t,e))??[]}function $R(t,e){var n;return((n=t.Xh)==null?void 0:n.call(t,e))??[]}class Ub{constructor(e,n){this.Op=xt({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new $t,this.Cv=new $t,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=e,this.Vv=n,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(s),this.Gp=yo(s,xt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jp=yo(s,xt({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const i=this.Jp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new b0(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),wo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),wo(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return ge(this.Vv)}Lv(e){var n;this.Vv!==null&&this.Vv.t_().u(this),this.Vv=e,this.Vv!==null&&this.Vv.t_().i(Ub.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new FR(this.Iv,this.Vp),this.Mv.yt()):((n=this.Mv)==null||n.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const e=this.Vv.Wo();this.wv._s(ge(e))}if(this.gv!==null){const e=this.Vv.Ho();this.gv._s(ge(e))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(e){this.Vv&&this.Vv.Io(e)}sf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}Sf(e){this.Fv(),this.Hv(),this.Wv(e.localX,e.localY,e)}nf(e){if(!this.Vv)return;this.Fv();const n=e.localX,s=e.localY;this.Wv(n,s,e)}mf(e){this.Vv!==null&&(this.Fv(),this.Uv(e))}Xd(e){this.Vv!==null&&this.$v(this.Cv,e)}qd(e){this.Xd(e)}cf(e){this.Fv(),this.qv(e),this.Wv(e.localX,e.localY,e)}vf(e){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(e))}pf(e){this.Vv!==null&&this.Uv(e)}If(e){if(this.yv=!0,this.kv===null){const n={x:e.localX,y:e.localY};this.jv(n,n,e)}}Bf(e){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(e,n){if(!this.Vp.N().handleScale.pinch)return;const s=5*(n-this.Pv);this.Pv=n,this.ts().bc(e._t,s)}Mf(e){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const n=this.ts().uc();this.kv!==null&&n.Vt()&&(this.Rv={x:n.si(),y:n.ni()},this.kv={x:e.localX,y:e.localY})}_f(e){if(this.Vv===null)return;const n=e.localX,s=e.localY;if(this.kv===null)this.qv(e);else{this.Tv=!1;const r=ge(this.Rv),i=r.x+(n-this.kv.x),o=r.y+(s-this.kv.y);this.Wv(i,o,e)}}ff(e){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(e)}jn(e,n){const s=this.Vv;return s===null?null:E3(s,e,n)}Jv(e,n){ge(n==="left"?this.wv:this.gv).hv(xt({width:e,height:this.Op.height}))}Gf(){return this.Op}hv(e){oo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Qv(){const e=ge(this.Vv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const n of e.Ma())if(e.Un(n)){const s=n.Ft();s!==null&&e.Fo(s),n.Ns()}for(const n of e.s_())n.Ns()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e!==null&&e.drawImage(o,n,s)}}lv(e){if(e===0||this.Vv===null)return;e>1&&this.Qv(),this.wv!==null&&this.wv.lv(e),this.gv!==null&&this.gv.lv(e);const n={colorSpace:this.Vp.N().layout.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=bo(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i)}),this.Vv&&(this.tm(r,BR),this.im(r),this.tm(r,V1),this.tm(r,Y1)))}this.Jp.applySuggestedBitmapSize();const s=bo(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.sm(s),this.tm(s,$R),this.tm(s,Y1))}nm(){return this.wv}rm(){return this.gv}cv(e,n){this.tm(e,n)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(e){this.$v(this.xv,e)}$v(e,n){const s=n.localX,r=n.localY;e.v()&&e.p(this.ts().Et().cu(s),{x:s,y:r},n)}_v({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.ts(),o=i.$(),a=i.Wc();o===a?f0(e,0,0,s,r,a):g3(e,0,0,s,r,o,a)}im(e){const n=ge(this.Vv),s=n.i_().lr().Tt(n);s!==null&&s.nt(e,!1)}sm(e){this.hm(e,V1,mh,this.ts().uc())}tm(e,n){const s=ge(this.Vv),r=s.Dt(),i=s.s_();for(const o of i)this.hm(e,n,$m,o);for(const o of r)this.hm(e,n,$m,o);for(const o of i)this.hm(e,n,mh,o);for(const o of r)this.hm(e,n,mh,o)}hm(e,n,s,r){const i=ge(this.Vv),o=i.Qt().ac(),a=o!==null&&o.n_===r,l=o!==null&&a&&o.e_!==void 0?o.e_.Xn:void 0;zm(n,c=>s(c,e,a,l),r,i)}Ov(){if(this.Vv===null)return;const e=this.Vp,n=this.Vv.Wo().N().visible,s=this.Vv.Ho().N().visible;n||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),s||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const r=e.Qt().Bc();n&&this.wv===null&&(this.wv=new H1(this,e.N(),r,"left"),this.Ev.appendChild(this.wv.Zf())),s&&this.gv===null&&(this.gv=new H1(this,e.N(),r,"right"),this.Av.appendChild(this.gv.Zf()))}am(e){return e.Ef&&this.yv||this.kv!==null}lm(e){return Math.max(0,Math.min(e,this.Op.width-1))}om(e){return Math.max(0,Math.min(e,this.Op.height-1))}Wv(e,n,s){this.ts().Tc(this.lm(e),this.om(n),s,ge(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(e,n,s){this.kv=e,this.Tv=!1,this.Wv(n.x,n.y,s);const r=this.ts().uc();this.Rv={x:r.si(),y:r.ni()}}ts(){return this.Vp.Qt()}Yv(e){if(!this.Sv)return;const n=this.ts(),s=this.ap();if(n.Ko(s,s.ks()),this.bv=null,this.Sv=!1,n.Pc(),this.Dv!==null){const r=performance.now(),i=n.Et();this.Dv.le(i.gu(),r),this.Dv.Ru(r)||n._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ge(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(e){if(this.Vv===null)return;const n=this.ts(),s=n.Et();if(s.Ki())return;const r=this.Vp.N(),i=r.handleScroll,o=r.kineticScroll;if((!i.pressedMouseMove||e.Ef)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Ef))return;const a=this.Vv.ks(),l=performance.now();if(this.bv!==null||this.am(e)||(this.bv={x:e.clientX,y:e.clientY,rd:l,_m:e.localX,um:e.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==e.clientX||this.bv.y!==e.clientY)){if(e.Ef&&o.touch||!e.Ef&&o.mouse){const c=s.mu();this.Dv=new jR(.2/c,7/c,.997,15/c),this.Dv.Pp(s.gu(),this.bv.rd)}else this.Dv=null;a.Ki()||n.Yo(this.Vv,a,e.localY),n.xc(e.localX),this.Sv=!0}this.Sv&&(a.Ki()||n.jo(this.Vv,a,e.localY),n.Cc(e.localX),this.Dv!==null&&this.Dv.Pp(s.gu(),l))}}class G1{constructor(e,n,s,r,i){this.xt=!0,this.Op=xt({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=e==="left",this.Ju=s.Bc,this.Ps=n,this.dm=r,this.fm=i,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=yo(this.jf,xt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),wo(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(e){oo(this.Op,e)||(this.Op=e,this.Gp.resizeCanvasElement(e),this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.xt=!0)}lv(e){if(e<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const n=bo(this.Gp,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(s=>{this._v(s),this.uv(s)})}Jf(){return this.Gp.bitmapSize}Qf(e,n,s){const r=this.Jf();r.width>0&&r.height>0&&e.drawImage(this.Gp.canvasElement,n,s)}uv({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(!this.dm())return;e.fillStyle=this.Ps.timeScale.borderColor;const i=Math.floor(this.Ju.N().S*s),o=Math.floor(this.Ju.N().S*r),a=this.jp?n.width-i:0;e.fillRect(a,0,i,o)}_v({context:e,bitmapSize:n}){f0(e,0,0,n.width,n.height,this.fm())}}function Wb(t){return e=>{var n;return((n=e.ia)==null?void 0:n.call(e,t))??[]}}const zR=Wb("normal"),UR=Wb("top"),WR=Wb("bottom");class HR{constructor(e,n){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=xt({width:0,height:0}),this.gm=new $t,this.Fp=new lf(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=e,this.o_=n,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=yo(this.Sm,xt({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jp=yo(this.Sm,xt({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const r=this.Jp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new b0(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),wo(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),wo(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(e){if(this.wm)return;this.wm=!0;const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.Mc(e.localX)}Mf(e){this.Sf(e)}xf(){const e=this.Vp.Qt();!e.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&e.kc())}cf(e){const n=this.Vp.Qt();!n.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&n.yc(e.localX)}_f(e){this.cf(e)}vf(){this.wm=!1;const e=this.Vp.Qt();e.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||e.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(e,n,s){oo(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.gm.p(e)),this.pm!==null&&this.pm.hv(xt({width:n,height:e.height})),this.vm!==null&&this.vm.hv(xt({width:s,height:e.height}))}Tm(){const e=this.Rm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(e,n,s,r){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,n,s),r)){const o=this.Jp.canvasElement;e.drawImage(o,n,s)}}lv(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const r=bo(this.Gp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i),this.Vm(r,WR)}),this.dv(r),this.Vm(r,zR)),this.pm!==null&&this.pm.lv(e),this.vm!==null&&this.vm.lv(e)}this.Jp.applySuggestedBitmapSize();const s=bo(this.Jp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],s),this.Vm(s,UR))}Vm(e,n){const s=this.Vp.Qt().js();for(const r of s)zm(n,i=>$m(i,e,!1,void 0),r,void 0);for(const r of s)zm(n,i=>mh(i,e,!1,void 0),r,void 0)}_v({context:e,bitmapSize:n}){f0(e,0,0,n.width,n.height,this.Vp.Qt().Wc())}uv({context:e,bitmapSize:n,verticalPixelRatio:s}){if(this.Vp.N().timeScale.borderVisible){e.fillStyle=this.Im();const r=Math.max(1,Math.floor(this.Rm().S*s));e.fillRect(0,0,n.width,r)}}dv(e){const n=this.Vp.Qt().Et(),s=n.Da();if(!s||s.length===0)return;const r=this.o_.maxTickMarkWeight(s),i=this.Rm(),o=n.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.Im(),a.fillStyle=this.Im();const u=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();const f=Math.round(i.C*c);for(let p=s.length;p--;){const m=Math.round(s[p].coord*l);a.rect(m-d,0,u,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=i.S+i.C+i.A+i.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.ev();for(const c of s)if(c.weight<r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.Vp.N().timeScale.allowBoldLabels&&(a.font=this.Am());for(const c of s)if(c.weight>=r){const u=c.needAlignCoordinate?this.Em(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Em(e,n,s){const r=this.Fp.Vi(e,s),i=r/2,o=Math.floor(n-i)+.5;return o<0?n+=Math.abs(0-o):o+r>this.Op.width&&(n-=Math.abs(this.Op.width-(o+r))),n}Bm(e,n){const s=this.Rm();for(const r of e)for(const i of r.cs())i.Tt().nt(n,s)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return af(this.F(),this.Ps.fontFamily)}Am(){return af(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new lf,Dm:0});const e=this.M,n=this.ev();if(e.k!==n){const s=this.F();e.P=s,e.k=n,e.A=3*s/12,e.V=3*s/12,e.Ji=9*s/12,e.L=0,e.Dm=4*s/12,e.Gi.Bn()}return this.M}vv(e){this.jf.style.cursor=e===1?"ew-resize":"default"}xm(){const e=this.Vp.Qt(),n=e.N();n.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),n.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const s={Bc:this.Vp.Qt().Bc()},r=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,i=()=>e.Wc();n.leftPriceScale.visible&&this.pm===null&&(this.pm=new G1("left",n,s,r,i),this.Mm.appendChild(this.pm.Zf())),n.rightPriceScale.visible&&this.vm===null&&(this.vm=new G1("right",n,s,r,i),this.bm.appendChild(this.vm.Zf()))}}var C2;const VR=!!rl&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!rl&&((C2=navigator==null?void 0:navigator.userAgentData)!=null&&C2.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class YR{constructor(e,n,s){var r;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new $t,this.Cv=new $t,this.Xu=new $t,this.Um=null,this.$m=null,this.Dp=e,this.Ps=n,this.o_=s,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(r=this.kp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),ig(this.Ps)&&this.Km(!0),this.ts=new IR(this.Gu.bind(this),this.Ps,s),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new HR(this,this.o_),this.qm.appendChild(this.Zm.Zf());const i=n.autoSize&&this.Gm();let o=this.Ps.width,a=this.Ps.height;if(i||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Jm(o,a),this.Qm(),e.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.zm)this.qm.removeChild(e.Zf()),e.Xv().u(this),e.Zv().u(this),e.m();this.zm=[];for(const e of this.Lm)this.sw(e);this.Lm=[],ge(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(e,n,s=!1){if(this.il===n&&this.Mo===e)return;const r=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return xt({width:l-l%2,height:c-c%2})}(xt({width:e,height:n}));this.il=r.height,this.Mo=r.width;const i=this.il+"px",o=this.Mo+"px";ge(this.kp).style.height=i,ge(this.kp).style.width=o,this.qm.style.height=i,this.qm.style.width=o,s?this.ew(en.gn(),performance.now()):this.ts.Ih()}lv(e){e===void 0&&(e=en.gn());for(let n=0;n<this.zm.length;n++)this.zm[n].lv(e.en(n).tn);this.Ps.timeScale.visible&&this.Zm.lv(e.nn())}hr(e){var r;const n=ig(this.Ps);this.ts.hr(e);const s=ig(this.Ps);s!==n&&this.Km(s),(r=e.layout)!=null&&r.panes&&this.rw(),this.tw(),this.hw(e)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(e=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const n=this.lw(null),s=document.createElement("canvas");s.width=n.width,s.height=n.height;const r=ge(s.getContext("2d"));return this.lw(r,e),s}ow(e){return e==="left"&&!this._w()||e==="right"&&!this.uw()||this.zm.length===0?0:ge(e==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(e){this.$m=e,this.$m?this.ip().style.setProperty("cursor",e):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(e){return Fn(this.zm[e]).Gf()}rw(){this.Lm.forEach(e=>{e.yt()})}hw(e){(e.autoSize!==void 0||!this.Um||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Um&&this.Gm(),e.autoSize===!1&&this.Um!==null&&this.nw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Jm(e.width||this.Mo,e.height||this.il))}lw(e,n){let s=0,r=0;const i=this.zm[0],o=(l,c)=>{let u=0;for(let d=0;d<this.zm.length;d++){const f=this.zm[d],p=ge(l==="left"?f.nm():f.rm()),m=p.Jf();if(e!==null&&p.Qf(e,c,u,n),u+=m.height,d<this.zm.length-1){const x=this.Lm[d],w=x.Jf();e!==null&&x.Qf(e,c,u),u+=w.height}}};this._w()&&(o("left",0),s+=ge(i.nm()).Jf().width);for(let l=0;l<this.zm.length;l++){const c=this.zm[l],u=c.Jf();if(e!==null&&c.Qf(e,s,r,n),r+=u.height,l<this.zm.length-1){const d=this.Lm[l],f=d.Jf();e!==null&&d.Qf(e,s,r),r+=f.height}}s+=i.Jf().width,this.uw()&&(o("right",s),s+=ge(i.rm()).Jf().width);const a=(l,c,u)=>{ge(l==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(ge(e),c,u)};if(this.Ps.timeScale.visible){const l=this.Zm.Jf();if(e!==null){let c=0;this._w()&&(a("left",c,r),c=ge(i.nm()).Jf().width),this.Zm.Qf(e,c,r,n),c+=l.width,this.uw()&&a("right",c,r)}r+=l.height}return xt({width:s,height:r})}mw(){let e=0,n=0,s=0;for(const w of this.zm)this._w()&&(n=Math.max(n,ge(w.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(s=Math.max(s,ge(w.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),e+=w.Bo();n=Bm(n),s=Bm(s);const r=this.Mo,i=this.il,o=Math.max(r-n-s,0),a=1*this.Lm.length,l=this.Ps.timeScale.visible;let c=l?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const d=a+c,f=i<d?0:i-d,p=f/e;let m=0;const x=window.devicePixelRatio||1;for(let w=0;w<this.zm.length;++w){const g=this.zm[w];g.Lv(this.ts.$s()[w]);let b=0,v=0;v=w===this.zm.length-1?Math.ceil((f-m)*x)/x:Math.round(g.Bo()*p*x)/x,b=Math.max(v,2),m+=b,g.hv(xt({width:o,height:b})),this._w()&&g.Jv(n,"left"),this.uw()&&g.Jv(s,"right"),g.ap()&&this.ts.dc(g.ap(),b)}this.Zm.km(xt({width:l?o:0,height:c}),l?n:0,l?s:0),this.ts.Eo(o),this.Nm!==n&&(this.Nm=n),this.Fm!==s&&(this.Fm=s)}Km(e){e?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return VR?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.ww(e),s=n*e.deltaX/100,r=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.Ps.handleScale.mouseWheel){const i=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(o,i)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*s)}ew(e,n){var r;const s=e.nn();s===3&&this.gw(),s!==3&&s!==2||(this.Mw(e),this.bw(e,n),this.Zm.yt(),this.zm.forEach(i=>{i.Nv()}),((r=this.Wm)==null?void 0:r.nn())===3&&(this.Wm.vn(e),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,n),e=this.Wm,this.Wm=null)),this.lv(e)}bw(e,n){for(const s of e.pn())this.mn(s,n)}Mw(e){const n=this.ts.$s();for(let s=0;s<n.length;s++)e.en(s).sn&&n[s].Go()}mn(e,n){const s=this.ts.Et();switch(e.an){case 0:s.Au();break;case 1:s.zu(e.Wt);break;case 2:s.dn(e.Wt);break;case 3:s.fn(e.Wt);break;case 4:s.Su();break;case 5:e.Wt.Ru(n)||s.fn(e.Wt.Du(n))}}Gu(e){this.Wm!==null?this.Wm.vn(e):this.Wm=e,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame(n=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const s=this.Wm;this.Wm=null,this.ew(s,n);for(const r of s.pn())if(r.an===5&&!r.Wt.Ru(n)){this.Qt()._n(r.Wt);break}}}))}gw(){this.Qm()}sw(e){this.qm.removeChild(e.Zf()),e.m()}Qm(){const e=this.ts.$s(),n=e.length,s=this.zm.length;for(let r=n;r<s;r++){const i=Fn(this.zm.pop());this.qm.removeChild(i.Zf()),i.Xv().u(this),i.Zv().u(this),i.m();const o=this.Lm.pop();o!==void 0&&this.sw(o)}for(let r=s;r<n;r++){const i=new Ub(this,e[r]);if(i.Xv().i(this.Sw.bind(this,i),this),i.Zv().i(this.xw.bind(this,i),this),this.zm.push(i),r>0){const o=new LR(this,r-1,r);this.Lm.push(o),this.qm.insertBefore(o.Zf(),this.Zm.Zf())}this.qm.insertBefore(i.Zf(),this.Zm.Zf())}for(let r=0;r<n;r++){const i=e[r],o=this.zm[r];o.ap()!==i?o.Lv(i):o.zv()}this.tw(),this.mw()}Cw(e,n,s,r){var d;const i=new Map;e!==null&&this.ts.js().forEach(f=>{const p=f.Xs().Fr(e);p!==null&&i.set(f,p)});let o;if(e!==null){const f=(d=this.ts.Et().ss(e))==null?void 0:d.originalTime;f!==void 0&&(o=f)}const a=this.Qt().ac(),l=a!==null&&a.n_ instanceof x0?a.n_:void 0,c=a!==null&&a.e_!==void 0?a.e_.Kn:void 0,u=this.Pw(r);return{yw:o,Re:e??void 0,kw:n??void 0,Tw:u!==-1?u:void 0,Rw:l,Dw:i,Vw:c,Bw:s??void 0}}Pw(e){let n=-1;if(e)n=this.zm.indexOf(e);else{const s=this.Qt().uc().Us();s!==null&&(n=this.Qt().$s().indexOf(s))}return n}Sw(e,n,s,r){this.xv.p(()=>this.Cw(n,s,r,e))}xw(e,n,s,r){this.Cv.p(()=>this.Cw(n,s,r,e))}Xm(e,n,s){var r;this.dw(((r=this.Qt().ac())==null?void 0:r.h_)??null),this.Xu.p(()=>this.Cw(e,n,s))}tw(){const e=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=e}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.Jm(n.contentRect.width,n.contentRect.height)}),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function ig(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function GR(t){return t.open===void 0&&t.value===void 0}function qR(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function q1(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.color!==void 0&&(i.R=n.color),i}function KR(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.lineColor!==void 0&&(i.vt=n.lineColor),n.topColor!==void 0&&(i.mr=n.topColor),n.bottomColor!==void 0&&(i.wr=n.bottomColor),i}function XR(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],yw:s};return n.topLineColor!==void 0&&(i.gr=n.topLineColor),n.bottomLineColor!==void 0&&(i.Mr=n.bottomLineColor),n.topFillColor1!==void 0&&(i.br=n.topFillColor1),n.topFillColor2!==void 0&&(i.Sr=n.topFillColor2),n.bottomFillColor1!==void 0&&(i.Cr=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(i.Pr=n.bottomFillColor2),i}function QR(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),r}function JR(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],yw:s};return n.color!==void 0&&(r.R=n.color),n.borderColor!==void 0&&(r.Ht=n.borderColor),n.wickColor!==void 0&&(r.vr=n.wickColor),r}function ZR(t,e,n,s,r){const i=Fn(r)(n),o=Math.max(...i),a=Math.min(...i),l=i[i.length-1],c=[l,o,a,l],{time:u,color:d,...f}=n;return{Re:e,wt:t,Wt:c,yw:s,se:f,R:d}}function Gl(t){return t.Wt!==void 0}function K1(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function Di(t){return(e,n,s,r,i,o)=>function(a,l){return l?l(a):GR(a)}(s,o)?K1({wt:e,Re:n,yw:r},s):K1(t(e,n,s,r,i),s)}function X1(t){return{Candlestick:Di(JR),Bar:Di(QR),Area:Di(KR),Baseline:Di(XR),Histogram:Di(q1),Line:Di(q1),Custom:Di(ZR)}[t]}function Q1(t){return{Re:0,Ew:new Map,Hh:t}}function J1(t,e){if(t!==void 0&&t.length!==0)return{Aw:e.key(t[0].wt),zw:e.key(t[t.length-1].wt)}}function Z1(t){let e;return t.forEach(n=>{e===void 0&&(e=n.yw)}),Fn(e)}class eO{constructor(e){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=e}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(e,n){let s=this.Lw.size!==0,r=!1;const i=this.Ow.get(e);if(i!==void 0)if(this.Ow.size===1)s=!1,r=!0,this.Lw.clear();else for(const l of this.Fw)l.pointData.Ew.delete(e)&&(r=!0);let o=[];if(n.length!==0){const l=n.map(p=>p.time),c=this.o_.createConverterToInternalObj(n),u=X1(e.Rr()),d=e.ca(),f=e.fa();o=n.map((p,m)=>{const x=c(p.time),w=this.o_.key(x);let g=this.Lw.get(w);g===void 0&&(g=Q1(x),this.Lw.set(w,g),r=!0);const b=u(x,g.Re,p,l[m],d,f);return g.Ew.set(e,b),b})}s&&this.Hw(),this.Uw(e,o);let a=-1;if(r){const l=[];this.Lw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:Z1(c.Ew)})}),l.sort((c,u)=>this.o_.key(c.time)-this.o_.key(u.time)),a=this.$w(l)}return this.qw(e,a,function(l,c,u){const d=J1(l,u),f=J1(c,u);if(d!==void 0&&f!==void 0)return{Yw:!1,zh:d.zw>=f.zw&&d.Aw>=f.Aw}}(this.Ow.get(e),i,this.o_))}Ac(e){return this.Ww(e,[])}jw(e,n,s){const r=n;(function(w){w.yw===void 0&&(w.yw=w.time)})(r),this.o_.preprocessData(n);const i=this.o_.createConverterToInternalObj([n])(n.time),o=this.Nw.get(e);if(!s&&o!==void 0&&this.o_.key(i)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${i}`);let a=this.Lw.get(this.o_.key(i));if(s&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=a===void 0;a===void 0&&(a=Q1(i),this.Lw.set(this.o_.key(i),a));const c=X1(e.Rr()),u=e.ca(),d=e.fa(),f=c(i,a.Re,n,r.yw,u,d);a.Ew.set(e,f),s?this.Kw(e,f,a.Re):this.Xw(e,f);const p={zh:Gl(f),Yw:s};if(!l)return this.qw(e,-1,p);const m={timeWeight:0,time:a.Hh,pointData:a,originalTime:Z1(a.Ew)},x=sl(this.Fw,this.o_.key(m.time),(w,g)=>this.o_.key(w.time)<g);this.Fw.splice(x,0,m);for(let w=x;w<this.Fw.length;++w)Nd(this.Fw[w].pointData,w);return this.o_.fillWeightsForPoints(this.Fw,x),this.qw(e,x,p)}Zw(e,n){const s=this.Ow.get(e);if(s===void 0||n<=0)return[[],this.Gw()];n=Math.min(n,s.length);const r=s.splice(-n).reverse();s.length===0?this.Nw.delete(e):this.Nw.set(e,s[s.length-1].wt);for(const i of r){const o=this.Lw.get(this.o_.key(i.wt));if(o&&(o.Ew.delete(e),o.Ew.size===0)){this.Lw.delete(this.o_.key(o.Hh)),this.Fw.splice(o.Re,1);for(let a=o.Re;a<this.Fw.length;++a)Nd(this.Fw[a].pointData,a)}}return[r,this.qw(e,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(e,n){let s=this.Ow.get(e);s===void 0&&(s=[],this.Ow.set(e,s));const r=s.length!==0?s[s.length-1]:null;r===null||this.o_.key(n.wt)>this.o_.key(r.wt)?Gl(n)&&s.push(n):Gl(n)?s[s.length-1]=n:s.splice(-1,1),this.Nw.set(e,n.wt)}Kw(e,n,s){const r=this.Ow.get(e);if(r===void 0)return;const i=sl(r,s,(o,a)=>o.Re<a);Gl(n)?r[i]=n:r.splice(i,1)}Uw(e,n){n.length!==0?(this.Ow.set(e,n.filter(Gl)),this.Nw.set(e,n[n.length-1].wt)):(this.Ow.delete(e),this.Nw.delete(e))}Hw(){for(const e of this.Fw)e.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(e.time))}$w(e){let n=-1;for(let s=0;s<this.Fw.length&&s<e.length;++s){const r=this.Fw[s],i=e[s];if(this.o_.key(r.time)!==this.o_.key(i.time)){n=s;break}i.timeWeight=r.timeWeight,Nd(i.pointData,s)}if(n===-1&&this.Fw.length!==e.length&&(n=Math.min(this.Fw.length,e.length)),n===-1)return-1;for(let s=n;s<e.length;++s)Nd(e[s].pointData,s);return this.o_.fillWeightsForPoints(e,n),this.Fw=e,n}Jw(){if(this.Ow.size===0)return null;let e=0;return this.Ow.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].Re))}),e}qw(e,n,s){const r=this.Gw();if(n!==-1)this.Ow.forEach((i,o)=>{r.Oo.set(o,{se:i,Qw:o===e?s:void 0})}),this.Ow.has(e)||r.Oo.set(e,{se:[],Qw:s}),r.Et.tg=this.Fw,r.Et.ig=n;else{const i=this.Ow.get(e);r.Oo.set(e,{se:i||[],Qw:s})}return r}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function Nd(t,e){t.Re=e,t.Ew.forEach(n=>{n.Re=e})}function tO(t,e){return t.wt<e}function nO(t,e){return e<t.wt}function sO(t,e,n){const s=e.Uh(),r=e.bi(),i=sl(t,s,tO),o=k3(t,r,nO);if(!n)return{from:i,to:o};let a=i,l=o;return i>0&&i<t.length&&t[i].wt>=s&&(a=i-1),o>0&&o<t.length&&t[o-1].wt<=r&&(l=o+1),{from:a,to:l}}class rO{constructor(e,n,s){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=e,this.Qn=n,this.ag=s}yt(e){this.sg=!0,e==="data"&&(this.ng=!0),e==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const e=this.Jn.Ft(),n=this.Qn.Et();if(this.ug(),n.Ki()||e.Ki())return;const s=n.Pe();if(s===null||this.Jn.Xs().zr()===0)return;const r=this.Jn.zt();r!==null&&(this.hg=sO(this.rg,s,this.ag),this.fg(e,n,r.Wt),this.pg())}}class iO{constructor(e,n){this.vg=e,this.Yi=n}nt(e,n,s){this.vg.draw(e,this.Yi,n,s)}}class oO extends rO{constructor(e,n,s){super(e,n,!1),this.sh=s,this.og=new iO(this.sh.renderer(),r=>{const i=e.zt();return i===null?null:e.Ft().Nt(r,i.Wt)})}da(e){return this.sh.priceValueBuilder(e)}pa(e){return this.sh.isWhitespace(e)}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(n=>({wt:n.Re,_t:NaN,...e.Dr(n.Re),mg:n.se}))}fg(e,n){n.uu(this.rg,TA(this.hg))}pg(){this.sh.update({bars:this.rg.map(aO),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function aO(t){return{x:t._t,time:t.wt,originalData:t.mg,barColor:t.cr}}const lO={color:"#2196f3"},cO=(t,e,n)=>{const s=ii(n);return new oO(t,e,s)};function Hb(t){const e={value:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function ek(t){const e=Hb(t);return t.R!==void 0&&(e.color=t.R),e}function uO(t){const e=Hb(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function dO(t){const e=Hb(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function I3(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function hO(t){const e=I3(t);return t.R!==void 0&&(e.color=t.R),e}function fO(t){const e=I3(t),{R:n,Ht:s,vr:r}=t;return n!==void 0&&(e.color=n),s!==void 0&&(e.borderColor=s),r!==void 0&&(e.wickColor=r),e}function xh(t){return{Area:uO,Line:ek,Baseline:dO,Histogram:ek,Bar:hO,Candlestick:fO,Custom:pO}[t]}function pO(t){const e=t.yw;return{...t.se,time:e}}const gO={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},mO={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},xO={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:p3,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},og={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},bO={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function tk(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:xO,crosshair:gO,grid:mO,overlayPriceScales:{...og},leftPriceScale:{...og,visible:!1},rightPriceScale:{...og,visible:!0},timeScale:bO,localization:{locale:rl?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class N3{constructor(e,n,s){this.Hf=e,this.wg=n,this.gg=s??0}applyOptions(e){this.Hf.Qt().oc(this.wg,e,this.gg)}options(){return this.Yi().N()}width(){return g0(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Fl(new kn(e.from,e.to))}getVisibleRange(){let e,n,s=this.Yi().Qe();if(s===null)return null;if(this.Yi().Ja()){const r=this.Yi().fo(),i=P3(r);s=ra(s,this.Yi().tl()),e=Number((Math.round(s.$e()/r)*r).toFixed(i)),n=Number((Math.round(s.qe()/r)*r).toFixed(i))}else e=s.$e(),n=s.qe();return{from:e,to:n}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return ge(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class yO{constructor(e,n,s,r){this.Hf=e,this.Pt=s,this.Mg=n,this.bg=r}getHeight(){return this.Pt.$t()}setHeight(e){const n=this.Hf.Qt(),s=n.Uc(this.Pt);n.vc(s,e)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(e){this.Pt.Io(e),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(e){const n=this.paneIndex();n!==e&&(tn(e>=0&&e<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(n,e))}getSeries(){return this.Pt.Oo().map(e=>this.Mg(e))??[]}getHTMLElement(){const e=this.Hf.$f();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Zf():null}attachPrimitive(e){this.Pt._a(e),e.attached&&e.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(e){this.Pt.ua(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new N3(this.Hf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,n={},s=0){return this.bg.addCustomSeries(e,n,s)}addSeries(e,n={}){return this.bg.addSeries(e,n,this.paneIndex())}}const wO={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class nk{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}Sg(){return this.ir}}class vO{constructor(e,n,s,r,i,o){this.xg=new $t,this.Jn=e,this.Cg=n,this.Pg=s,this.o_=i,this.bg=r,this.yg=o}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Ts(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new xa(new jc(e.from,e.to)).y_(),s=this.Jn.Xs();if(s.Ki())return null;const r=s.Fr(n.Uh(),1),i=s.Fr(n.bi(),-1),o=ge(s.Lr()),a=ge(s.Ks());if(r!==null&&i!==null&&r.Re>i.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:r===null||r.Re===o?e.from-o:r.Re-o,barsAfter:i===null||i.Re===a?a-e.to:a-i.Re};return r!==null&&i!==null&&(l.from=r.yw,l.to=i.yw),l}setData(e){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,e),this.Tg("full")}update(e,n=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,e,n),this.Tg("update")}pop(e=1){const n=this.Cg.Dg(this.Jn,e);n.length!==0&&this.Tg("update");const s=xh(this.seriesType());return n.map(r=>s(r))}dataByIndex(e,n){const s=this.Jn.Xs().Fr(e,n);return s===null?null:xh(this.seriesType())(s)}data(){const e=xh(this.seriesType());return this.Jn.Xs().Hr().map(n=>e(n))}subscribeDataChanged(e){this.xg.i(e)}unsubscribeDataChanged(e){this.xg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return vr(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(e){const n=Gn(vr(wO),e),s=this.Jn.Oh(n);return new nk(s)}removePriceLine(e){this.Jn.Nh(e.Sg())}priceLines(){return this.Jn.Fh().map(e=>new nk(e))}seriesType(){return this.Jn.Rr()}lastValueData(e){const n=this.Jn.ye(e);return n.ke?{noData:!0}:{noData:!1,price:n.gt,color:n.R}}attachPrimitive(e){this.Jn._a(e),e.attached&&e.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ua(e),e.detached&&e.detached(),this.Jn.Qt().Ih()}getPane(){const e=this.Jn,n=ge(this.Jn.Qt().Hn(e));return this.yg(n)}moveToPane(e){this.Jn.Qt().Nc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const n=this.Jn.Qt().Hn(this.Jn);n!==null&&n.Qo(this.Jn,e)}Tg(e){this.xg.v()&&this.xg.p(e)}}class kO{constructor(e,n,s){this.Vg=new $t,this.z_=new $t,this.gm=new $t,this.ts=e,this.uh=e.Et(),this.Zm=n,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=s}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(e,n){n?this.uh.Tu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.nu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},s=this.uh.au(n);this.ts.Lc(s)}getVisibleLogicalRange(){const e=this.uh.su();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){tn(e.from<=e.to,"The from index cannot be after the to index."),this.ts.Lc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(e){const n=this.ts.Et();return n.Ki()?null:n.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.cu(e)}timeToIndex(e,n){const s=this.o_.convertHorzItemToInternal(e);return this.uh.Q_(s,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.uh.qt(n)}coordinateToTime(e){const n=this.ts.Et(),s=n.cu(e),r=n.ss(s);return r===null?null:r.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(e){this.Vg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.Vg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.gm.i(e)}unsubscribeSizeChange(e){this.gm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...vr(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(e){this.gm.p(e.width,e.height)}}function sk(t){return function(e){if(Cd(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:r}=e.handleScale;Cd(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),Cd(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const n=e.handleScroll;Cd(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class SO{constructor(e,n,s){this.Ag=new Map,this.zg=new Map,this.Lg=new $t,this.Og=new $t,this.Ng=new $t,this.qu=new WeakMap,this.Fg=new eO(n);const r=s===void 0?vr(tk()):Gn(vr(tk()),sk(s));this.Wg=n,this.Hf=new YR(e,r,n),this.Hf.Xv().i(o=>{this.Lg.v()&&this.Lg.p(this.Hg(o()))},this),this.Hf.Zv().i(o=>{this.Og.v()&&this.Og.p(this.Hg(o()))},this),this.Hf.cc().i(o=>{this.Ng.v()&&this.Ng.p(this.Hg(o()))},this);const i=this.Hf.Qt();this.Ug=new kO(i,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(e,n,s){this.autoSizeActive()||this.Hf.Jm(e,n,s)}addCustomSeries(e,n={},s=0){const r=(i=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...lO,...i.defaultOptions()},$g:cO,qg:i}))(ii(e));return this.Yg(r,n,s)}addSeries(e,n={},s=0){return this.Yg(e,n,s)}removeSeries(e){const n=Fn(this.Ag.get(e)),s=this.Fg.Ac(n);this.Hf.Qt().Ac(n),this.jg(s),this.Ag.delete(e),this.zg.delete(n)}kg(e,n){this.jg(this.Fg.Ww(e,n))}Rg(e,n,s){this.jg(this.Fg.jw(e,n,s))}Dg(e,n){const[s,r]=this.Fg.Zw(e,n);return s.length!==0&&this.jg(r),s}subscribeClick(e){this.Lg.i(e)}unsubscribeClick(e){this.Lg._(e)}subscribeCrosshairMove(e){this.Ng.i(e)}unsubscribeCrosshairMove(e){this.Ng._(e)}subscribeDblClick(e){this.Og.i(e)}unsubscribeDblClick(e){this.Og._(e)}priceScale(e,n=0){return new N3(this.Hf,e,n)}timeScale(){return this.Ug}applyOptions(e){this.Hf.hr(sk(e))}options(){return this.Hf.N()}takeScreenshot(e=!1,n=!1){let s,r;try{n||(s=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),r=this.Hf.aw(e)}finally{n||s===void 0||this.Hf.Qt().hr({crosshair:{mode:s}})}return r}addPane(e=!1){const n=this.Hf.Qt().$c();return n.zo(e),this.Kg(n)}removePane(e){this.Hf.Qt().fc(e)}swapPanes(e,n){this.Hf.Qt().mc(e,n)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map(e=>this.Kg(e))}paneSize(e=0){const n=this.Hf.pw(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,s){const r=this.Ag.get(s);if(r===void 0)return;const i=this.Hf.Qt().Hn(r);i!==null&&this.Hf.Qt().Rc(e,n,i)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(e,n={},s=0){tn(e.$g!==void 0),function(l){if(l===void 0||l.type==="custom")return;const c=l;c.minMove!==void 0&&c.precision===void 0&&(c.precision=P3(c.minMove))}(n.priceFormat),e.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(n);const r=Gn(vr(h3),vr(e.defaultOptions),n),i=e.$g,o=new x0(this.Hf.Qt(),e.type,r,i,e.qg);this.Hf.Qt().Ic(o,s);const a=new vO(o,this,this,this,this.Wg,l=>this.Kg(l));return this.Ag.set(a,o),this.zg.set(o,a),a}jg(e){const n=this.Hf.Qt();n.Vc(e.Et._u,e.Et.tg,e.Et.ig),e.Oo.forEach((s,r)=>r.ht(s.se,s.Qw)),n.Et().K_(),n.vu()}Xg(e){return Fn(this.zg.get(e))}Hg(e){const n=new Map;e.Dw.forEach((r,i)=>{const o=i.Rr(),a=xh(o)(r);if(o!=="Custom")tn(qR(a));else{const l=i.fa();tn(!l||l(a)===!1)}n.set(this.Xg(i),a)});const s=e.Rw!==void 0&&this.zg.has(e.Rw)?this.Xg(e.Rw):void 0;return{time:e.yw,logical:e.Re,point:e.kw,paneIndex:e.Tw,hoveredSeries:s,hoveredObjectId:e.Vw,seriesData:n,sourceEvent:e.Bw}}Kg(e){let n=this.qu.get(e);return n||(n=new yO(this.Hf,s=>this.Xg(s),e,this),this.qu.set(e,n)),n}}function CO(t){if($u(t)){const e=document.getElementById(t);return tn(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function _O(t,e,n){const s=CO(t),r=new SO(s,e,n);return e.setOptions(r.options()),r}function EO(t,e){return _O(t,new $1,$1.ld(e))}({...h3});const D3=k.forwardRef(({initialData:t=[],symbol:e="BTC/USDC",height:n=500,showVolume:s=!0},r)=>{const i=k.useRef(null),o=k.useRef(null),a=k.useRef(null),l=k.useRef(null),[c,u]=k.useState(null),d=x=>typeof x=="number"?x:ke(x),f=x=>({time:Math.floor((x.open_time||x.close_time||Date.now())/1e3),open:d(x.open),high:d(x.high),low:d(x.low),close:d(x.close)}),p=x=>{if(!x.volume)return null;const w=Math.floor((x.open_time||x.close_time||Date.now())/1e3),g=typeof x.volume=="number"?x.volume:ke(x.volume),b=d(x.close),v=d(x.open),y=b>=v;return{time:w,value:g,color:y?"#26a69a80":"#ef535080"}},m=x=>{const w=f(x),g=s?p(x):null;a.current&&(a.current.update(w),u(w.close)),s&&l.current&&g&&l.current.update(g)};return k.useImperativeHandle(r,()=>({updateChart:m})),k.useEffect(()=>{if(!i.current)return;const x=EO(i.current,{width:i.current.clientWidth,height:n,layout:{background:{color:"#1e1e1e"},textColor:"#d1d4dc"},grid:{vertLines:{color:"#2a2e39"},horzLines:{color:"#2a2e39"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2e39"},timeScale:{borderColor:"#2a2e39",timeVisible:!0,secondsVisible:!1}}),w=x.addSeries("Candlestick",{upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"});let g=null;s&&(g=x.addSeries("Histogram",{color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""})),t.length>0&&(w.setData(t),c===null&&t.length>0&&u(t[t.length-1].close)),o.current=x,a.current=w,l.current=g;const b=()=>{i.current&&o.current&&o.current.applyOptions({width:i.current.clientWidth})};return window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b),x.remove()}},[n,s]),k.useEffect(()=>{a.current&&t.length>0&&(a.current.setData(t),t.length>0&&u(t[t.length-1].close))},[t]),h.jsxs("div",{style:{position:"relative",width:"100%"},children:[h.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"1.2rem",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:h.jsxs("span",{children:[e," Live Kline Chart",c!==null&&` - Current: $${c.toFixed(2)}`]})}),h.jsx("div",{ref:i,style:{position:"relative",width:"100%"}})]})});D3.displayName="KlineChart";function PO(){var Re,_e,Ge,$e;const[t,e]=k.useState(h0),[n,s]=k.useState(()=>localStorage.getItem("authToken")||""),[r,i]=k.useState(Bb),[o,a]=k.useState(""),[l,c]=k.useState("BTC/USDC"),[u,d]=k.useState("1m"),[f,p]=k.useState("300"),[m,x]=k.useState(!1),[w,g]=k.useState([]),[b,v]=k.useState([]),[y,S]=k.useState(new Set),[C,E]=k.useState([]),[T,N]=k.useState(!1),_=k.useRef(null),D=k.useRef(0),A=Bu,R=k.useRef(null),[z,L]=k.useState([]),{walletAddress:F,authToken:$}=vl(),{markets:O}=Ti({baseURL:A,sessionToken:"",autoFetchMarkets:!0}),B=O.length>0?(((Re=O.find(Z=>Z.active))==null?void 0:Re.market_id)??O[0].market_id)||(((Ge=(_e=O.find(Z=>Z.active))==null?void 0:_e.id)==null?void 0:Ge.toString())??(($e=O[0].id)==null?void 0:$e.toString())??""):null;k.useEffect(()=>{B&&!o&&a(B)},[B]),k.useEffect(()=>{$&&s($)},[$]),k.useEffect(()=>{const Z=U=>{U.key==="authToken"&&U.newValue&&s(U.newValue)};window.addEventListener("storage",Z);const W=setInterval(()=>{const U=localStorage.getItem("authToken");U&&U!==n&&s(U)},1e3);return()=>{window.removeEventListener("storage",Z),clearInterval(W)}},[n]),k.useEffect(()=>{n&&n.trim()!==""&&localStorage.setItem("authToken",n)},[n]);const M=(Z,W,U,we,st)=>{const ze={id:D.current++,timestamp:Date.now(),channel:Z,data:W,type:U,step:st};we?v(vt=>[...vt.slice(-99),ze]):g(vt=>[...vt.slice(-99),ze])},H=(Z,W,U,we)=>{E(st=>[...st,{step:Z,status:W,message:U,timestamp:Date.now(),details:we}])},j=()=>{E([])},P=async()=>{var st;if((st=_.current)!=null&&st.isConnected()){M("connection","Already connected","info",!1);return}if(N(!0),j(),H("1","in-progress","Validating configuration..."),M("connection","Starting connection process...","debug",!1,"Step 1: Validation"),!t||!t.trim()){H("1","error","WebSocket URL is required"),M("connection","Error: WebSocket URL is required","error",!1,"Step 1: Validation"),N(!1);return}try{const ze=new URL(t);if(ze.protocol!=="ws:"&&ze.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol");H("1","success",`URL format valid: ${t}`),M("connection",`URL validated: ${t}`,"debug",!1,"Step 1: Validation")}catch(ze){H("1","error",`Invalid URL format: ${ze.message}`),M("connection",`Error: Invalid URL format - ${ze.message}`,"error",!1,"Step 1: Validation"),N(!1);return}H("2","in-progress","Building connection URL with parameters...");const Z=[];n&&Z.push(`token=${encodeURIComponent(n)}`),F&&Z.push(`wallet=${encodeURIComponent(F)}`),r&&Z.push(`device_id=${encodeURIComponent(r)}`);const W=t.includes("?")?"&":"?",U=Z.length>0?`${t}${W}${Z.join("&")}`:t;if(H("2","success",`Connection URL: ${U}`),M("connection",`Connection URL: ${U}`,"debug",!1,"Step 2: URL Construction"),Z.length>0?M("connection",`Query parameters: ${Z.join(", ")}`,"debug",!1,"Step 2: URL Construction"):M("connection","No query parameters (authToken, walletAddress, deviceID)","warning",!1,"Step 2: URL Construction"),H("3","in-progress","Cleaning up existing connection..."),_.current)try{_.current.disconnect(),H("3","success","Previous connection cleaned up"),M("connection","Previous connection cleaned up","debug",!1,"Step 3: Cleanup")}catch{H("3","success","No previous connection to clean up"),M("connection","No previous connection found","debug",!1,"Step 3: Cleanup")}else H("3","success","No previous connection to clean up");H("4","in-progress","Creating SubscriptionClient instance...");try{_.current=new Mo({url:t,authToken:n||void 0,walletAddress:F||void 0,deviceID:r||void 0}),H("4","success","SubscriptionClient created"),M("connection","SubscriptionClient instance created","debug",!1,"Step 4: Client Creation"),M("connection",`Config: ${JSON.stringify({url:t,hasToken:!!n,hasWallet:!!F,deviceID:r},null,2)}`,"debug",!1,"Step 4: Client Creation")}catch(ze){H("4","error",`Failed to create client: ${ze.message}`),M("connection",`Error creating client: ${ze.message}`,"error",!1,"Step 4: Client Creation"),N(!1);return}H("5","in-progress","Initiating WebSocket connection..."),M("connection","Initiating WebSocket handshake...","debug",!1,"Step 5: Connection"),M("connection","Browser will attempt to upgrade HTTP connection to WebSocket","debug",!1,"Step 5: Connection");const we=Date.now();try{await _.current.connect();const ze=Date.now()-we,vt=_.current.isConnected(),le=_.current.getState();M("connection",`Connection attempt completed in ${ze}ms`,"debug",!1,"Step 5: Connection"),M("connection",`Connection state: ${le}`,"debug",!1,"Step 5: Connection"),x(vt),vt?(H("5","success",`WebSocket connected successfully (${ze}ms)`),M("connection"," WebSocket connected successfully!","success",!1,"Step 5: Connection"),M("connection",`Connection established in ${ze}ms`,"success",!1,"Step 5: Connection")):(H("5","error","Connection completed but state is not connected"),M("connection"," Connection attempt completed but state is not connected","error",!1,"Step 5: Connection"),M("connection",`Current state: ${le}`,"error",!1,"Step 5: Connection"))}catch(ze){const vt=Date.now()-we,le=ze.message||String(ze);let xe="";le.includes("abnormal closure")?xe=`The server closed the connection abnormally. Possible causes:
- Server is not running
- Wrong URL or port
- Network connectivity issues
- Firewall blocking the connection`:le.includes("protocol error")?xe="WebSocket protocol error. The server may not support WebSocket connections.":le.includes("policy violation")?xe="Connection closed due to policy violation. Check authentication requirements.":le.includes("server error")?xe="Server returned an error. Check server logs for details.":(le.includes("Unauthorized")||le.includes("401"))&&(xe=`Authentication failed. Possible causes:
- Missing or invalid JWT token (if server requires authentication)
- Token expired
- Server is in production mode requiring JWT authentication
Note: If server uses JWT auth, you must provide a valid token in the authToken field.`),H("5","error",`Connection failed: ${le}`),M("connection",` Connection error: ${le}`,"error",!1,"Step 5: Connection"),xe&&M("connection",`Error details:
${xe}`,"error",!1,"Step 5: Connection"),M("connection",`Connection failed after ${vt}ms`,"error",!1,"Step 5: Connection"),M("connection",`Full error: ${JSON.stringify(ze,Object.getOwnPropertyNames(ze),2)}`,"error",!1,"Step 5: Connection"),x(!1)}finally{N(!1)}},X=()=>{if(_.current)try{_.current.disconnect(),x(!1),S(new Set),M("connection","WebSocket disconnected","info",!1)}catch(Z){M("connection",`Disconnect error: ${Z.message}`,"error",!1)}},se=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("orderbook","Not connected. Please connect first.","error",!1);return}if(!o){M("orderbook","Please select a market first","error",!1);return}const Z=U=>{M("orderbook",U,"success",!1)};try{_.current.subscribeOrderbook(o,Z,!0),S(U=>new Set([...U,"orderbook"])),M("orderbook",`Subscribed to orderbook for market ${o}`,"success",!1)}catch(U){M("orderbook",`Subscription error: ${U.message}`,"error",!1)}},K=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&o)try{_.current.unsubscribeOrderbook(o),S(W=>{const U=new Set(W);return U.delete("orderbook"),U}),M("orderbook","Unsubscribed from orderbook","info",!1)}catch(W){M("orderbook",`Unsubscribe error: ${W.message}`,"error",!1)}},J=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("trades","Not connected. Please connect first.","error",!1);return}if(!o){M("trades","Please select a market first","error",!1);return}const Z=U=>{M("trades",U,"success",!1)};try{_.current.subscribeTrades(o,Z),S(U=>new Set([...U,"trades"])),M("trades",`Subscribed to trades for market ${o}`,"success",!1)}catch(U){M("trades",`Subscription error: ${U.message}`,"error",!1)}},G=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&o)try{_.current.unsubscribeTrades(o),S(W=>{const U=new Set(W);return U.delete("trades"),U}),M("trades","Unsubscribed from trades","info",!1)}catch(W){M("trades",`Unsubscribe error: ${W.message}`,"error",!1)}},ee=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("ticker","Not connected. Please connect first.","error",!1);return}if(!o){M("ticker","Please select a market first","error",!1);return}const Z=U=>{M("ticker",U,"success",!1)};try{_.current.subscribeTicker(o,Z),S(U=>new Set([...U,"ticker"])),M("ticker",`Subscribed to ticker for market ${o}`,"success",!1)}catch(U){M("ticker",`Subscription error: ${U.message}`,"error",!1)}},he=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&o)try{_.current.unsubscribeTicker(o),S(W=>{const U=new Set(W);return U.delete("ticker"),U}),M("ticker","Unsubscribed from ticker","info",!1)}catch(W){M("ticker",`Unsubscribe error: ${W.message}`,"error",!1)}},Ae=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("last_price","Not connected. Please connect first.","error",!1);return}if(!o){M("last_price","Please select a market first","error",!1);return}const Z=U=>{M("last_price",U,"success",!1)};try{_.current.subscribeLastPrice(o,Z,!0),S(U=>new Set([...U,"last_price"])),M("last_price",`Subscribed to last price for market ${o}`,"success",!1)}catch(U){M("last_price",`Subscription error: ${U.message}`,"error",!1)}},Ce=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&o)try{_.current.unsubscribeLastPrice(o),S(W=>{const U=new Set(W);return U.delete("last_price"),U}),M("last_price","Unsubscribed from last price","info",!1)}catch(W){M("last_price",`Unsubscribe error: ${W.message}`,"error",!1)}},ve=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("user_updates","Not connected. Please connect first.","error",!0);return}if(!F){M("user_updates","Wallet address required for position updates (positions channel)","error",!0);return}const Z=U=>{M("user_updates",U,"success",!0)};try{_.current.subscribeUserUpdates(Z),S(U=>new Set([...U,"user_updates"])),M("user_updates","Subscribed to user updates (positions, orders, etc.)","success",!0)}catch(U){M("user_updates",`Subscription error: ${U.message}`,"error",!0)}},Fe=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected())try{_.current.unsubscribeUserUpdates(),S(W=>{const U=new Set(W);return U.delete("user_updates"),U}),M("user_updates","Unsubscribed from user updates","info",!0)}catch(W){M("user_updates",`Unsubscribe error: ${W.message}`,"error",!0)}},ct=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("funding_rate","Not connected. Please connect first.","error",!1);return}if(!l){M("funding_rate","Please enter a symbol first","error",!1);return}const Z=U=>{M("funding_rate",U,"success",!1)};try{_.current.subscribeFundingRate(l,Z),S(U=>new Set([...U,"funding_rate"])),M("funding_rate",`Subscribed to funding rate for ${l}`,"success",!1)}catch(U){M("funding_rate",`Subscription error: ${U.message}`,"error",!1)}},I=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&l)try{_.current.unsubscribeFundingRate(l),S(W=>{const U=new Set(W);return U.delete("funding_rate"),U}),M("funding_rate","Unsubscribed from funding rate","info",!1)}catch(W){M("funding_rate",`Unsubscribe error: ${W.message}`,"error",!1)}},ce=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("buckets","Not connected. Please connect first.","error",!0);return}if(!F){M("buckets","Wallet address required for buckets subscription","error",!0);return}const Z=U=>{M("buckets",U,"success",!0)};try{_.current.subscribeBuckets(Z),S(U=>new Set([...U,"buckets"])),M("buckets","Subscribed to buckets","success",!0)}catch(U){M("buckets",`Subscription error: ${U.message}`,"error",!0)}},me=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected())try{_.current.unsubscribeBuckets(),S(W=>{const U=new Set(W);return U.delete("buckets"),U}),M("buckets","Unsubscribed from buckets","info",!0)}catch(W){M("buckets",`Unsubscribe error: ${W.message}`,"error",!0)}},Ne=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("deviation","Not connected. Please connect first.","error",!1);return}if(!l){M("deviation","Please enter a symbol first","error",!1);return}const Z=U=>{M("deviation",U,"success",!1)};try{_.current.subscribeDeviation(l,Z),S(U=>new Set([...U,"deviation"])),M("deviation",`Subscribed to deviation for ${l}`,"success",!1)}catch(U){M("deviation",`Subscription error: ${U.message}`,"error",!1)}},He=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&l)try{_.current.unsubscribeDeviation(l),S(W=>{const U=new Set(W);return U.delete("deviation"),U}),M("deviation","Unsubscribed from deviation","info",!1)}catch(W){M("deviation",`Unsubscribe error: ${W.message}`,"error",!1)}},ue=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("index_price","Not connected. Please connect first.","error",!1);return}if(!l){M("index_price","Please enter a symbol first","error",!1);return}const Z=U=>{M("index_price",U,"success",!1)};try{_.current.subscribeIndexPrice(l,Z),S(U=>new Set([...U,"index_price"])),M("index_price",`Subscribed to index price for ${l}`,"success",!1)}catch(U){M("index_price",`Subscription error: ${U.message}`,"error",!1)}},Y=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&l)try{_.current.unsubscribeIndexPrice(l),S(W=>{const U=new Set(W);return U.delete("index_price"),U}),M("index_price","Unsubscribed from index price","info",!1)}catch(W){M("index_price",`Unsubscribe error: ${W.message}`,"error",!1)}},te=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("kline","Not connected. Please connect first.","error",!1);return}if(!o){M("kline","Please select a market first","error",!1);return}if(!u){M("kline","Please select an interval first","error",!1);return}const Z=U=>{if(M("kline",U,"success",!1),R.current&&U){const we={open_time:U.open_time||U.timestamp||Date.now(),close_time:U.close_time,open:U.open,high:U.high,low:U.low,close:U.close,volume:U.volume};R.current.updateChart(we);const ze={time:Math.floor((we.open_time||Date.now())/1e3),open:typeof we.open=="string"?ke(we.open):we.open,high:typeof we.high=="string"?ke(we.high):we.high,low:typeof we.low=="string"?ke(we.low):we.low,close:typeof we.close=="string"?ke(we.close):we.close};L(vt=>{const le=[...vt];return le.length===0||le[le.length-1].time!==ze.time?le.push(ze):le[le.length-1]=ze,le})}};try{_.current.subscribeKline(o,u,Z),S(U=>new Set([...U,"kline"])),M("kline",`Subscribed to kline for market ${o} with interval ${u}`,"success",!1)}catch(U){M("kline",`Subscription error: ${U.message}`,"error",!1)}},V=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&!(!o||!u))try{_.current.unsubscribeKline(o,u),S(W=>{const U=new Set(W);return U.delete("kline"),U}),L([]),M("kline","Unsubscribed from kline","info",!1)}catch(W){M("kline",`Unsubscribe error: ${W.message}`,"error",!1)}},q=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("mark_price","Not connected. Please connect first.","error",!1);return}if(!l){M("mark_price","Please enter a symbol first","error",!1);return}const Z=U=>{M("mark_price",U,"success",!1)};try{_.current.subscribeMarkPrice(l,Z),S(U=>new Set([...U,"mark_price"])),M("mark_price",`Subscribed to mark price for ${l}`,"success",!1)}catch(U){M("mark_price",`Subscription error: ${U.message}`,"error",!1)}},be=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&l)try{_.current.unsubscribeMarkPrice(l),S(W=>{const U=new Set(W);return U.delete("mark_price"),U}),M("mark_price","Unsubscribed from mark price","info",!1)}catch(W){M("mark_price",`Unsubscribe error: ${W.message}`,"error",!1)}},Q=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("price_feed","Not connected. Please connect first.","error",!1);return}if(!l){M("price_feed","Please enter a symbol first","error",!1);return}const Z=U=>{M("price_feed",U,"success",!1)};try{_.current.subscribePriceFeed(l,Z),S(U=>new Set([...U,"price_feed"])),M("price_feed",`Subscribed to price feed for ${l}`,"success",!1)}catch(U){M("price_feed",`Subscription error: ${U.message}`,"error",!1)}},de=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&l)try{_.current.unsubscribePriceFeed(l),S(W=>{const U=new Set(W);return U.delete("price_feed"),U}),M("price_feed","Unsubscribed from price feed","info",!1)}catch(W){M("price_feed",`Unsubscribe error: ${W.message}`,"error",!1)}},ye=()=>{var W;if(!((W=_.current)!=null&&W.isConnected())){M("twap","Not connected. Please connect first.","error",!1);return}if(!l){M("twap","Please enter a symbol first","error",!1);return}if(!f||isNaN(Number(f))||Number(f)<=0){M("twap","Please enter a valid window size (positive number in seconds)","error",!1);return}const Z=U=>{M("twap",U,"success",!1)};try{_.current.subscribeTWAP(l,Number(f),Z),S(U=>new Set([...U,"twap"])),M("twap",`Subscribed to TWAP for ${l} with window size ${f}s`,"success",!1)}catch(U){M("twap",`Subscription error: ${U.message}`,"error",!1)}},ae=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&!(!l||!f))try{_.current.unsubscribeTWAP(l,Number(f)),S(W=>{const U=new Set(W);return U.delete("twap"),U}),M("twap","Unsubscribed from TWAP","info",!1)}catch(W){M("twap",`Unsubscribe error: ${W.message}`,"error",!1)}},re=()=>{if(!_.current){M("multi_feed","SubscriptionClient not initialized. Please connect first.","error",!1);return}if(!_.current.isConnected()){M("multi_feed","Not connected. Please connect first.","error",!1);return}if(!o){M("multi_feed","Please select a market first","error",!1);return}if(!l){M("multi_feed","Please enter a symbol first","error",!1);return}if(typeof _.current.subscribeMultiFeed!="function"){M("multi_feed","subscribeMultiFeed method not available. Please check SDK version.","error",!1),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(_.current)));return}const Z=W=>{const U=W.sub_channel||"unknown";M(`multi_feed:${U}`,W,"success",U==="balances"||U==="buckets"||U==="orders"||U==="positions")};try{_.current.subscribeMultiFeed(o,l,Z,u||"1m"),S(W=>new Set([...W,"multi_feed"])),M("multi_feed",`Subscribed to multi-feed for market ${o}, symbol ${l}`,"success",!1)}catch(W){M("multi_feed",`Subscription error: ${W.message}`,"error",!1)}},pe=()=>{var Z;if((Z=_.current)!=null&&Z.isConnected()&&!(!o||!l))try{_.current.unsubscribeMultiFeed(o,l),S(W=>{const U=new Set(W);return U.delete("multi_feed"),U}),M("multi_feed","Unsubscribed from multi-feed","info",!1)}catch(W){M("multi_feed",`Unsubscribe error: ${W.message}`,"error",!1)}},Ee=()=>{if(!_.current){M("balances","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!_.current.isConnected()){M("balances","Not connected. Please connect first.","error",!0);return}if(!F){M("balances","Wallet address required for balances subscription","error",!0);return}if(typeof _.current.subscribeBalances!="function"){M("balances","subscribeBalances method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(_.current)));return}const Z=W=>{M("balances",W,"success",!0)};try{_.current.subscribeBalances(Z),S(W=>new Set([...W,"balances"])),M("balances","Subscribed to balances","success",!0)}catch(W){M("balances",`Subscription error: ${W.message}`,"error",!0)}},Ie=()=>{if(_.current&&_.current.isConnected()){if(typeof _.current.unsubscribeBalances!="function"){M("balances","unsubscribeBalances method not available. Please check SDK version.","error",!0);return}try{_.current.unsubscribeBalances(),S(Z=>{const W=new Set(Z);return W.delete("balances"),W}),M("balances","Unsubscribed from balances","info",!0)}catch(Z){M("balances",`Unsubscribe error: ${Z.message}`,"error",!0)}}},Be=()=>{if(!_.current){M("orders","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!_.current.isConnected()){M("orders","Not connected. Please connect first.","error",!0);return}if(!F){M("orders","Wallet address required for orders subscription","error",!0);return}if(typeof _.current.subscribeOrders!="function"){M("orders","subscribeOrders method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(_.current)));return}const Z=W=>{M("orders",W,"success",!0)};try{_.current.subscribeOrders(Z),S(W=>new Set([...W,"orders"])),M("orders","Subscribed to orders","success",!0)}catch(W){M("orders",`Subscription error: ${W.message}`,"error",!0)}},Ve=()=>{if(_.current&&_.current.isConnected()){if(typeof _.current.unsubscribeOrders!="function"){M("orders","unsubscribeOrders method not available. Please check SDK version.","error",!0);return}try{_.current.unsubscribeOrders(),S(Z=>{const W=new Set(Z);return W.delete("orders"),W}),M("orders","Unsubscribed from orders","info",!0)}catch(Z){M("orders",`Unsubscribe error: ${Z.message}`,"error",!0)}}},Le=Z=>{Z?v([]):g([])};return k.useEffect(()=>()=>{if(_.current)try{_.current.disconnect()}catch{}},[]),h.jsxs("div",{className:"ws-test-page",children:[h.jsx("h1",{children:"WebSocket Test Page"}),h.jsx("p",{children:"Test WebSocket subscriptions for public and private channels"}),h.jsx(pA,{steps:C}),h.jsx(gA,{wsURL:t,onWsURLChange:e,marketId:o,onMarketIdChange:a,markets:O,symbol:l,onSymbolChange:c,klineInterval:u,onKlineIntervalChange:d,twapWindowSize:f,onTwapWindowSizeChange:p,authToken:n,onAuthTokenChange:s,walletAddress:F,deviceID:r,onDeviceIDChange:i,isConnected:m,isConnecting:T,onConnect:P,onDisconnect:X}),h.jsxs("div",{className:"ws-test-page-layout",children:[h.jsxs(u1,{title:"WebSocket Public",isPrivate:!1,messages:w,onClearMessages:()=>Le(!1),children:[h.jsxs("div",{className:"channel-buttons-row",children:[h.jsx(un,{channel:"orderbook",isSubscribed:y.has("orderbook"),isConnected:m,subscribeLabel:"Subscribe Orderbook",unsubscribeLabel:"Unsubscribe Orderbook",onSubscribe:se,onUnsubscribe:K}),h.jsx(un,{channel:"trades",isSubscribed:y.has("trades"),isConnected:m,subscribeLabel:"Subscribe Trades",unsubscribeLabel:"Unsubscribe Trades",onSubscribe:J,onUnsubscribe:G}),h.jsx(un,{channel:"ticker",isSubscribed:y.has("ticker"),isConnected:m,subscribeLabel:"Subscribe Ticker",unsubscribeLabel:"Unsubscribe Ticker",onSubscribe:ee,onUnsubscribe:he}),h.jsx(un,{channel:"last_price",isSubscribed:y.has("last_price"),isConnected:m,subscribeLabel:"Subscribe Last Price",unsubscribeLabel:"Unsubscribe Last Price",onSubscribe:Ae,onUnsubscribe:Ce}),h.jsx(un,{channel:"funding_rate",isSubscribed:y.has("funding_rate"),isConnected:m,subscribeLabel:"Subscribe Funding Rate",unsubscribeLabel:"Unsubscribe Funding Rate",onSubscribe:ct,onUnsubscribe:I}),h.jsx(un,{channel:"deviation",isSubscribed:y.has("deviation"),isConnected:m,subscribeLabel:"Subscribe Deviation",unsubscribeLabel:"Unsubscribe Deviation",onSubscribe:Ne,onUnsubscribe:He}),h.jsx(un,{channel:"index_price",isSubscribed:y.has("index_price"),isConnected:m,subscribeLabel:"Subscribe Index Price",unsubscribeLabel:"Unsubscribe Index Price",onSubscribe:ue,onUnsubscribe:Y}),h.jsx(un,{channel:"kline",isSubscribed:y.has("kline"),isConnected:m,subscribeLabel:"Subscribe Kline",unsubscribeLabel:"Unsubscribe Kline",onSubscribe:te,onUnsubscribe:V})]}),y.has("kline")&&h.jsx("div",{style:{marginTop:"20px",marginBottom:"20px"},children:h.jsx(D3,{ref:R,initialData:z,symbol:l||"BTC/USDC",height:500,showVolume:!0})}),h.jsxs("div",{className:"channel-buttons-row",children:[h.jsx(un,{channel:"mark_price",isSubscribed:y.has("mark_price"),isConnected:m,subscribeLabel:"Subscribe Mark Price",unsubscribeLabel:"Unsubscribe Mark Price",onSubscribe:q,onUnsubscribe:be}),h.jsx(un,{channel:"price_feed",isSubscribed:y.has("price_feed"),isConnected:m,subscribeLabel:"Subscribe Price Feed",unsubscribeLabel:"Unsubscribe Price Feed",onSubscribe:Q,onUnsubscribe:de}),h.jsx(un,{channel:"twap",isSubscribed:y.has("twap"),isConnected:m,subscribeLabel:"Subscribe TWAP",unsubscribeLabel:"Unsubscribe TWAP",onSubscribe:ye,onUnsubscribe:ae}),h.jsx(un,{channel:"multi_feed",isSubscribed:y.has("multi_feed"),isConnected:m,subscribeLabel:"Subscribe Multi-Feed",unsubscribeLabel:"Unsubscribe Multi-Feed",onSubscribe:re,onUnsubscribe:pe})]}),h.jsx("small",{className:"private-note-text-block",style:{marginTop:"10px"},children:"Multi-Feed: Unified channel streaming all sub-channels (orderbook, trades, positions, balances, orders, buckets, etc.) Requires market ID and symbol. Authenticated sub-channels (balances, orders, positions, buckets) require wallet address."})]}),h.jsxs(u1,{title:"WebSocket Private",isPrivate:!0,messages:b,onClearMessages:()=>Le(!0),children:[h.jsx(un,{channel:"user_updates",isSubscribed:y.has("user_updates"),isConnected:m,disabled:!F,subscribeLabel:"Subscribe User Updates",unsubscribeLabel:"Unsubscribe User Updates",onSubscribe:ve,onUnsubscribe:Fe,variant:"private"}),h.jsx("small",{className:"private-note-text",children:"Position updates (positions channel): Requires wallet address. Returns user positions."}),h.jsx(un,{channel:"buckets",isSubscribed:y.has("buckets"),isConnected:m,disabled:!F,subscribeLabel:"Subscribe Buckets",unsubscribeLabel:"Unsubscribe Buckets",onSubscribe:ce,onUnsubscribe:me,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Buckets: User's margin buckets (requires wallet address)"}),h.jsx(un,{channel:"balances",isSubscribed:y.has("balances"),isConnected:m,disabled:!F,subscribeLabel:"Subscribe Balances",unsubscribeLabel:"Unsubscribe Balances",onSubscribe:Ee,onUnsubscribe:Ie,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Balances: User's spot balances (USDC, MORM, BTC, etc.) - requires wallet address"}),h.jsx(un,{channel:"orders",isSubscribed:y.has("orders"),isConnected:m,disabled:!F,subscribeLabel:"Subscribe Orders",unsubscribeLabel:"Unsubscribe Orders",onSubscribe:Be,onUnsubscribe:Ve,variant:"private"}),h.jsx("small",{className:"private-note-text-block",children:"Orders: User's open orders - requires wallet address"})]})]})]})}function Vb({top:t,left:e,width:n,height:s}){const r=`translate(${e}px,${t}px)`;return{transform:r,WebkitTransform:r,MozTransform:r,msTransform:r,OTransform:r,width:`${n}px`,height:`${s}px`,position:"absolute"}}function A3({top:t,left:e,width:n,height:s}){return{top:`${t}px`,left:`${e}px`,width:`${n}px`,height:`${s}px`,position:"absolute"}}function rk(t){return t*100+"%"}function TO(t,e,n,s){return t+n>s?e:n}function R3(t,e,n){return t<0?e:n}function MO(t){return Math.max(0,t)}function hf(t){return Math.max(0,t)}var Yb=(t,e,n)=>{const{left:s,height:r,width:i}=e,o=t.top-(r-t.height);return{left:s,width:i,height:R3(o,t.height,r),top:hf(o)}},Gb=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{top:s,height:i,width:TO(t.left,t.width,o,n),left:MO(r)}},qb=(t,e,n)=>{const{top:s,height:r,width:i}=e,o=t.left+t.width-i;return o<0?{height:r,width:t.left+t.width,top:hf(s),left:0}:{height:r,width:i,top:hf(s),left:o}},Kb=(t,e,n)=>{const{top:s,left:r,height:i,width:o}=e;return{width:o,left:r,height:R3(s,t.height,i),top:hf(s)}},IO=(t,e,n)=>Yb(t,Gb(t,e,n)),NO=(t,e,n)=>Yb(t,qb(t,e)),DO=(t,e,n)=>Kb(t,Gb(t,e,n)),AO=(t,e,n)=>Kb(t,qb(t,e)),RO={n:Yb,ne:IO,e:Gb,se:DO,s:Kb,sw:AO,w:qb,nw:NO};function OO(t,e,n,s){const r=RO[t];return r?r(e,{...e,...n},s):n}var O3={type:"transform",scale:1,calcStyle(t){return Vb(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}},LO={type:"absolute",scale:1,calcStyle(t){return A3(t)},calcDragPosition(t,e,n,s){return{left:t-n,top:e-s}}};function jO(t){return{type:"transform",scale:t,calcStyle(e){return Vb(e)},calcDragPosition(e,n,s,r){return{left:(e-s)/t,top:(n-r)/t}}}}var FO=O3,BO={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},$O={enabled:!0,bounded:!1,threshold:3},zO={enabled:!0,handles:["se"]},UO={enabled:!1,defaultItem:{w:1,h:1}};function y0(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function Ms(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&y0(s,e))return s}}function L3(t,e){return t.filter(n=>y0(n,e))}function j3(t,e){return e==="horizontal"?B3(t):e==="vertical"?F3(t):[...t]}function F3(t){return[...t].sort((e,n)=>e.y!==n.y?e.y-n.y:e.x-n.x)}function B3(t){return[...t].sort((e,n)=>e.x!==n.x?e.x-n.x:e.y-n.y)}function kl(t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0){const r=s.y+s.h;r>e&&(e=r)}}return e}function Bi(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s!==void 0&&s.i===e)return s}}function Xb(t){return t.filter(e=>e.static===!0)}function ki(t){return{i:t.i,x:t.x,y:t.y,w:t.w,h:t.h,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function Rs(t){const e=new Array(t.length);for(let n=0;n<t.length;n++){const s=t[n];s!==void 0&&(e[n]=ki(s))}return e}function WO(t,e){const n=new Array(t.length);for(let s=0;s<t.length;s++){const r=t[s];r!==void 0&&(e.i===r.i?n[s]=e:n[s]=r)}return n}function HO(t,e,n){let s=Bi(t,e);return s?(s=n(ki(s)),[WO(t,s),s]):[[...t],null]}function Qb(t,e){const n=Xb(t);for(let s=0;s<t.length;s++){const r=t[s];if(r!==void 0)if(r.x+r.w>e.cols&&(r.x=e.cols-r.w),r.x<0&&(r.x=0,r.w=e.cols),!r.static)n.push(r);else for(;Ms(n,r);)r.y++}return t}function Ki(t,e,n,s,r,i,o,a,l){if(e.static&&e.isDraggable!==!0)return[...t];if(e.y===s&&e.x===n)return[...t];const c=e.x,u=e.y;typeof n=="number"&&(e.x=n),typeof s=="number"&&(e.y=s),e.moved=!0;let d=j3(t,o);(o==="vertical"&&typeof s=="number"?u>=s:o==="horizontal"&&typeof n=="number"?c>=n:!1)&&(d=d.reverse());const p=L3(d,e),m=p.length>0;if(m&&l)return Rs(t);if(m&&i)return e.x=c,e.y=u,e.moved=!1,t;let x=[...t];for(let w=0;w<p.length;w++){const g=p[w];g!==void 0&&(g.moved||(g.static?x=ik(x,g,e,r,o):x=ik(x,e,g,r,o)))}return x}function ik(t,e,n,s,r,i){const o=r==="horizontal",a=r==="vertical",l=e.static;if(s){s=!1;const d={x:o?Math.max(e.x-n.w,0):n.x,y:a?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},f=Ms(t,d),p=f!==void 0&&f.y+f.h>e.y,m=f!==void 0&&e.x+e.w>f.x;if(!f)return Ki(t,n,o?d.x:void 0,a?d.y:void 0,s,l,r);if(p&&a)return Ki(t,n,void 0,n.y+1,s,l,r);if(p&&r===null)return e.y=n.y,n.y=n.y+n.h,[...t];if(m&&o)return Ki(t,e,n.x,void 0,s,l,r)}const c=o?n.x+1:void 0,u=a?n.y+1:void 0;return c===void 0&&u===void 0?[...t]:Ki(t,n,c,u,s,l,r)}function VO(t){return t.filter(e=>e.static)}var YO={x:"w",y:"h"};function Um(t,e,n,s){const r=YO[s];e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;y0(e,a)&&Um(t,a,n+e[r],s)}}e[s]=n}function GO(t,e,n,s,r,i,o){const a=n==="vertical",l=n==="horizontal";if(a)for(typeof o=="number"?e.y=Math.min(o,e.y):e.y=Math.min(kl(t),e.y);e.y>0&&!Ms(t,e);)e.y--;else if(l)for(;e.x>0&&!Ms(t,e);)e.x--;let c;for(;(c=Ms(t,e))!==void 0&&!(n===null&&i);)if(l?Um(r,e,c.x+c.w,"x"):Um(r,e,c.y+c.h,"y"),l&&e.x+e.w>s)for(e.x=s-e.w,e.y++;e.x>0&&!Ms(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function br(t,e,n,s){const r=VO(t);let i=kl(r);const o=j3(t,e),a=new Array(t.length);for(let l=0;l<o.length;l++){const c=o[l];if(c===void 0)continue;let u=ki(c);u.static||(u=GO(r,u,e,n,o,s,i),i=Math.max(i,u.y+u.h),r.push(u));const d=t.indexOf(c);a[d]=u,u.moved=!1}return a}function Jb(t,e,n,s){const r=s==="x"?"w":"h";e[s]+=1;const i=t.findIndex(o=>o.i===e.i);for(let o=i+1;o<t.length;o++){const a=t[o];if(a!==void 0&&!a.static){if(a.y>e.y+e.h)break;y0(e,a)&&Jb(t,a,n+e[r],s)}}e[s]=n}function qO(t,e,n,s){for(e.y=Math.min(s,e.y);e.y>0&&!Ms(t,e);)e.y--;let r;for(;(r=Ms(t,e))!==void 0;)Jb(n,e,r.y+r.h,"y");return e.y=Math.max(e.y,0),e}function KO(t,e,n,s){for(;e.x>0&&!Ms(t,e);)e.x--;let r;for(;(r=Ms(t,e))!==void 0;)if(Jb(s,e,r.x+r.w,"x"),e.x+e.w>n)for(e.x=n-e.w,e.y++;e.x>0&&!Ms(t,e);)e.x--;return e.x=Math.max(e.x,0),e}var $3={type:"vertical",allowOverlap:!1,compact(t,e){const n=Xb(t);let s=kl(n);const r=F3(t),i=new Array(t.length);for(let o=0;o<r.length;o++){const a=r[o];if(a===void 0)continue;let l=ki(a);l.static||(l=qO(n,l,r,s),s=Math.max(s,l.y+l.h),n.push(l));const c=t.indexOf(a);i[c]=l,l.moved=!1}return i},onMove(t,e,n,s,r){const i=Rs(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},z3={type:"horizontal",allowOverlap:!1,compact(t,e){const n=Xb(t),s=B3(t),r=new Array(t.length);for(let i=0;i<s.length;i++){const o=s[i];if(o===void 0)continue;let a=ki(o);a.static||(a=KO(n,a,e,s),n.push(a));const l=t.indexOf(o);r[l]=a,a.moved=!1}return r},onMove(t,e,n,s,r){const i=Rs(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},ok={type:null,allowOverlap:!1,compact(t,e){return Rs(t)},onMove(t,e,n,s,r){const i=Rs(t),o=i.find(a=>a.i===e.i);return o&&(o.x=n,o.y=s,o.moved=!0),i}},XO={...$3,allowOverlap:!0,compact(t,e){return Rs(t)}},QO={...z3,allowOverlap:!0,compact(t,e){return Rs(t)}};function Zb(t,e=!1,n=!1){let s;return e?t==="vertical"?s=XO:t==="horizontal"?s=QO:s=ok:t==="vertical"?s=$3:t==="horizontal"?s=z3:s=ok,n?{...s,preventCollision:n}:s}function U3(t){return Object.keys(t).sort((n,s)=>t[n]-t[s])}function ak(t,e){const n=U3(t);let s=n[0];if(s===void 0)throw new Error("No breakpoints defined");for(let r=1;r<n.length;r++){const i=n[r];if(i===void 0)continue;const o=t[i];e>o&&(s=i)}return s}function lk(t,e){const n=e[t];if(n===void 0)throw new Error(`ResponsiveReactGridLayout: \`cols\` entry for breakpoint ${String(t)} is missing!`);return n}function ag(t,e,n,s,r,i){const o=t[n];if(o)return Rs(o);let a=t[s];const l=U3(e),c=l.slice(l.indexOf(n));for(let d=0;d<c.length;d++){const f=c[d];if(f===void 0)continue;const p=t[f];if(p){a=p;break}}const u=Rs(a||[]);return br(Qb(u,{cols:r}),i,r)}function Dd(t,e){if(Array.isArray(t))return t;const n=t,s=n[e];if(s!==void 0)return s;const r=Object.keys(n);for(const i of r){const o=n[i];if(o!==void 0)return o}return[10,10]}function w0(t){const{margin:e,containerPadding:n,containerWidth:s,cols:r}=t;return(s-e[0]*(r-1)-n[0]*2)/r}function ff(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function Ai(t,e,n,s,r,i,o){const{margin:a,containerPadding:l,rowHeight:c}=t,u=w0(t);let d,f,p,m;return o?(d=Math.round(o.width),f=Math.round(o.height)):(d=ff(s,u,a[0]),f=ff(r,c,a[1])),i?(p=Math.round(i.top),m=Math.round(i.left)):o?(p=Math.round(o.top),m=Math.round(o.left)):(p=Math.round((c+a[1])*n+l[1]),m=Math.round((u+a[0])*e+l[0])),{top:p,left:m,width:d,height:f}}function bh(t,e,n,s,r){const{margin:i,containerPadding:o,cols:a,rowHeight:l,maxRows:c}=t,u=w0(t);let d=Math.round((n-o[0])/(u+i[0])),f=Math.round((e-o[1])/(l+i[1]));return d=Qs(d,0,a-s),f=Qs(f,0,c-r),{x:d,y:f}}function JO(t,e,n,s,r,i){const{margin:o,maxRows:a,cols:l,rowHeight:c}=t,u=w0(t),d=Math.round((e+o[0])/(u+o[0])),f=Math.round((n+o[1])/(c+o[1]));let p=Qs(d,0,l-s),m=Qs(f,0,a-r);return(i==="sw"||i==="w"||i==="nw")&&(p=Qs(d,0,l)),(i==="nw"||i==="n"||i==="ne")&&(m=Qs(f,0,a)),{w:p,h:m}}function Qs(t,e,n){return Math.max(Math.min(t,n),e)}var v0={exports:{}},W3={},H3={exports:{}},ZO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",e7=ZO,t7=e7;function V3(){}function Y3(){}Y3.resetWarningCache=V3;var n7=function(){function t(s,r,i,o,a,l){if(l!==t7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Y3,resetWarningCache:V3};return n.PropTypes=n,n};H3.exports=n7();var k0=H3.exports;function G3(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=G3(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function pu(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=G3(t))&&(s&&(s+=" "),s+=e);return s}const s7=Object.freeze(Object.defineProperty({__proto__:null,clsx:pu,default:pu},Symbol.toStringTag,{value:"Module"})),r7=bT(s7);var At={},sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.dontSetMe=c7;sr.findInArray=i7;sr.int=l7;sr.isFunction=o7;sr.isNum=a7;function i7(t,e){for(let n=0,s=t.length;n<s;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function o7(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function a7(t){return typeof t=="number"&&!isNaN(t)}function l7(t){return parseInt(t,10)}function c7(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var No={};Object.defineProperty(No,"__esModule",{value:!0});No.browserPrefixToKey=K3;No.browserPrefixToStyle=u7;No.default=void 0;No.getPrefix=q3;const lg=["Moz","Webkit","O","ms"];function q3(){var n,s;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(s=(n=window.document)==null?void 0:n.documentElement)==null?void 0:s.style;if(!e||t in e)return"";for(let r=0;r<lg.length;r++)if(K3(t,lg[r])in e)return lg[r];return""}function K3(t,e){return e?`${e}${d7(t)}`:t}function u7(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function d7(t){let e="",n=!0;for(let s=0;s<t.length;s++)n?(e+=t[s].toUpperCase(),n=!1):t[s]==="-"?n=!0:e+=t[s];return e}No.default=q3();Object.defineProperty(At,"__esModule",{value:!0});At.addClassName=J3;At.addEvent=f7;At.addUserSelectStyles=C7;At.createCSSTransform=w7;At.createSVGTransform=v7;At.getTouch=k7;At.getTouchIdentifier=S7;At.getTranslation=ey;At.innerHeight=x7;At.innerWidth=b7;At.matchesSelector=Q3;At.matchesSelectorAndParentsTo=h7;At.offsetXYFromParent=y7;At.outerHeight=g7;At.outerWidth=m7;At.removeClassName=Z3;At.removeEvent=p7;At.scheduleRemoveUserSelectStyles=_7;var qn=sr,ck=X3(No);function X3(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(X3=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}let Ad="";function Q3(t,e){return Ad||(Ad=(0,qn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,qn.isFunction)(t[n])})),(0,qn.isFunction)(t[Ad])?t[Ad](e):!1}function h7(t,e,n){let s=t;do{if(Q3(s,e))return!0;if(s===n)return!1;s=s.parentNode}while(s);return!1}function f7(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.addEventListener?t.addEventListener(e,n,r):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function p7(t,e,n,s){if(!t)return;const r={capture:!0,...s};t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function g7(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,qn.int)(n.borderTopWidth),e+=(0,qn.int)(n.borderBottomWidth),e}function m7(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,qn.int)(n.borderLeftWidth),e+=(0,qn.int)(n.borderRightWidth),e}function x7(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,qn.int)(n.paddingTop),e-=(0,qn.int)(n.paddingBottom),e}function b7(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,qn.int)(n.paddingLeft),e-=(0,qn.int)(n.paddingRight),e}function y7(t,e,n){const r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-r.left)/n,o=(t.clientY+e.scrollTop-r.top)/n;return{x:i,y:o}}function w7(t,e){const n=ey(t,e,"px");return{[(0,ck.browserPrefixToKey)("transform",ck.default)]:n}}function v7(t,e){return ey(t,e,"")}function ey(t,e,n){let{x:s,y:r}=t,i=`translate(${s}${n},${r}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function k7(t,e){return t.targetTouches&&(0,qn.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,qn.findInArray)(t.changedTouches,n=>e===n.identifier)}function S7(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function C7(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&J3(t.body,"react-draggable-transparent-selection")}function _7(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{uk(t)}):uk(t)}function uk(t){if(t)try{if(t.body&&Z3(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function J3(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function Z3(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.canDragX=T7;rr.canDragY=M7;rr.createCoreData=N7;rr.createDraggableData=D7;rr.getBoundPosition=E7;rr.getControlPosition=I7;rr.snapToGrid=P7;var $n=sr,ia=At;function E7(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:s}=t.props;s=typeof s=="string"?s:A7(s);const r=ty(t);if(typeof s=="string"){const{ownerDocument:i}=r,o=i.defaultView;let a;if(s==="parent"?a=r.parentNode:a=r.getRootNode().querySelector(s),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');const l=a,c=o.getComputedStyle(r),u=o.getComputedStyle(l);s={left:-r.offsetLeft+(0,$n.int)(u.paddingLeft)+(0,$n.int)(c.marginLeft),top:-r.offsetTop+(0,$n.int)(u.paddingTop)+(0,$n.int)(c.marginTop),right:(0,ia.innerWidth)(l)-(0,ia.outerWidth)(r)-r.offsetLeft+(0,$n.int)(u.paddingRight)-(0,$n.int)(c.marginRight),bottom:(0,ia.innerHeight)(l)-(0,ia.outerHeight)(r)-r.offsetTop+(0,$n.int)(u.paddingBottom)-(0,$n.int)(c.marginBottom)}}return(0,$n.isNum)(s.right)&&(e=Math.min(e,s.right)),(0,$n.isNum)(s.bottom)&&(n=Math.min(n,s.bottom)),(0,$n.isNum)(s.left)&&(e=Math.max(e,s.left)),(0,$n.isNum)(s.top)&&(n=Math.max(n,s.top)),[e,n]}function P7(t,e,n){const s=Math.round(e/t[0])*t[0],r=Math.round(n/t[1])*t[1];return[s,r]}function T7(t){return t.props.axis==="both"||t.props.axis==="x"}function M7(t){return t.props.axis==="both"||t.props.axis==="y"}function I7(t,e,n){const s=typeof e=="number"?(0,ia.getTouch)(t,e):null;if(typeof e=="number"&&!s)return null;const r=ty(n),i=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,ia.offsetXYFromParent)(s||t,i,n.props.scale)}function N7(t,e,n){const s=!(0,$n.isNum)(t.lastX),r=ty(t);return s?{node:r,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:r,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function D7(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function A7(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function ty(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var S0={},C0={};Object.defineProperty(C0,"__esModule",{value:!0});C0.default=R7;function R7(){}Object.defineProperty(S0,"__esModule",{value:!0});S0.default=void 0;var cg=e5(k),bn=ny(k0),O7=ny(Pi),dn=At,Ur=rr,ug=sr,ql=ny(C0);function ny(t){return t&&t.__esModule?t:{default:t}}function e5(t,e){if(typeof WeakMap=="function")var n=new WeakMap,s=new WeakMap;return(e5=function(r,i){if(!i&&r&&r.__esModule)return r;var o,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(o=i?s:n){if(o.has(r))return o.get(r);o.set(r,l)}for(const c in r)c!=="default"&&{}.hasOwnProperty.call(r,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,c))&&(a.get||a.set)?o(l,c,a):l[c]=r[c]);return l})(t,e)}function yn(t,e,n){return(e=L7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L7(t){var e=j7(t,"string");return typeof e=="symbol"?e:e+""}function j7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ws={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Wr=ws.mouse,_0=class extends cg.Component{constructor(){super(...arguments),yn(this,"dragging",!1),yn(this,"lastX",NaN),yn(this,"lastY",NaN),yn(this,"touchIdentifier",null),yn(this,"mounted",!1),yn(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:s}=n;if(this.props.disabled||!(e.target instanceof s.defaultView.Node)||this.props.handle&&!(0,dn.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,dn.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const r=(0,dn.getTouchIdentifier)(e);this.touchIdentifier=r;const i=(0,Ur.getControlPosition)(e,r,this);if(i==null)return;const{x:o,y:a}=i,l=(0,Ur.createCoreData)(this,o,a);(0,ql.default)("DraggableCore: handleDragStart: %j",l),(0,ql.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,dn.addUserSelectStyles)(s),this.dragging=!0,this.lastX=o,this.lastY=a,(0,dn.addEvent)(s,Wr.move,this.handleDrag),(0,dn.addEvent)(s,Wr.stop,this.handleDragStop))}),yn(this,"handleDrag",e=>{const n=(0,Ur.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let a=s-this.lastX,l=r-this.lastY;if([a,l]=(0,Ur.snapToGrid)(this.props.grid,a,l),!a&&!l)return;s=this.lastX+a,r=this.lastY+l}const i=(0,Ur.createCoreData)(this,s,r);if((0,ql.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=s,this.lastY=r}),yn(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Ur.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:s,y:r}=n;if(Array.isArray(this.props.grid)){let l=s-this.lastX||0,c=r-this.lastY||0;[l,c]=(0,Ur.snapToGrid)(this.props.grid,l,c),s=this.lastX+l,r=this.lastY+c}const i=(0,Ur.createCoreData)(this,s,r);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,dn.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,ql.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,ql.default)("DraggableCore: Removing handlers"),(0,dn.removeEvent)(a.ownerDocument,Wr.move,this.handleDrag),(0,dn.removeEvent)(a.ownerDocument,Wr.stop,this.handleDragStop))}),yn(this,"onMouseDown",e=>(Wr=ws.mouse,this.handleDragStart(e))),yn(this,"onMouseUp",e=>(Wr=ws.mouse,this.handleDragStop(e))),yn(this,"onTouchStart",e=>(Wr=ws.touch,this.handleDragStart(e))),yn(this,"onTouchEnd",e=>(Wr=ws.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,dn.addEvent)(e,ws.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,dn.removeEvent)(n,ws.mouse.move,this.handleDrag),(0,dn.removeEvent)(n,ws.touch.move,this.handleDrag),(0,dn.removeEvent)(n,ws.mouse.stop,this.handleDragStop),(0,dn.removeEvent)(n,ws.touch.stop,this.handleDragStop),(0,dn.removeEvent)(e,ws.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,dn.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,s;return(e=this.props)!=null&&e.nodeRef?(s=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:s.current:O7.default.findDOMNode(this)}render(){return cg.cloneElement(cg.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};S0.default=_0;yn(_0,"displayName","DraggableCore");yn(_0,"propTypes",{allowAnyClick:bn.default.bool,allowMobileScroll:bn.default.bool,children:bn.default.node.isRequired,disabled:bn.default.bool,enableUserSelectHack:bn.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:bn.default.arrayOf(bn.default.number),handle:bn.default.string,cancel:bn.default.string,nodeRef:bn.default.object,onStart:bn.default.func,onDrag:bn.default.func,onStop:bn.default.func,onMouseDown:bn.default.func,scale:bn.default.number,className:ug.dontSetMe,style:ug.dontSetMe,transform:ug.dontSetMe});yn(_0,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=d(k),n=u(k0),s=u(Pi),r=r7,i=At,o=rr,a=sr,l=u(S0),c=u(C0);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,b){if(typeof WeakMap=="function")var v=new WeakMap,y=new WeakMap;return(d=function(S,C){if(!C&&S&&S.__esModule)return S;var E,T,N={__proto__:null,default:S};if(S===null||typeof S!="object"&&typeof S!="function")return N;if(E=C?y:v){if(E.has(S))return E.get(S);E.set(S,N)}for(const _ in S)_!=="default"&&{}.hasOwnProperty.call(S,_)&&((T=(E=Object.defineProperty)&&Object.getOwnPropertyDescriptor(S,_))&&(T.get||T.set)?E(N,_,T):N[_]=S[_]);return N})(g,b)}function f(){return f=Object.assign?Object.assign.bind():function(g){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var y in v)({}).hasOwnProperty.call(v,y)&&(g[y]=v[y])}return g},f.apply(null,arguments)}function p(g,b,v){return(b=m(b))in g?Object.defineProperty(g,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[b]=v,g}function m(g){var b=x(g,"string");return typeof b=="symbol"?b:b+""}function x(g,b){if(typeof g!="object"||!g)return g;var v=g[Symbol.toPrimitive];if(v!==void 0){var y=v.call(g,b);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(g)}class w extends e.Component{static getDerivedStateFromProps(b,v){let{position:y}=b,{prevPropsPosition:S}=v;return y&&(!S||y.x!==S.x||y.y!==S.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:y,prevPropsPosition:S}),{x:y.x,y:y.y,prevPropsPosition:{...y}}):null}constructor(b){super(b),p(this,"onDragStart",(v,y)=>{if((0,c.default)("Draggable: onDragStart: %j",y),this.props.onStart(v,(0,o.createDraggableData)(this,y))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(v,y)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",y);const S=(0,o.createDraggableData)(this,y),C={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:N}=C;C.x+=this.state.slackX,C.y+=this.state.slackY;const[_,D]=(0,o.getBoundPosition)(this,C.x,C.y);C.x=_,C.y=D,C.slackX=this.state.slackX+(T-C.x),C.slackY=this.state.slackY+(N-C.y),S.x=C.x,S.y=C.y,S.deltaX=C.x-this.state.x,S.deltaY=C.y-this.state.y}if(this.props.onDrag(v,S)===!1)return!1;this.setState(C)}),p(this,"onDragStop",(v,y)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,y))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",y);const C={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:N}=this.props.position;C.x=T,C.y=N}this.setState(C)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??s.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:y,defaultPosition:S,defaultClassName:C,defaultClassNameDragging:E,defaultClassNameDragged:T,position:N,positionOffset:_,scale:D,...A}=this.props;let R={},z=null;const F=!!!N||this.state.dragging,$=N||S,O={x:(0,o.canDragX)(this)&&F?this.state.x:$.x,y:(0,o.canDragY)(this)&&F?this.state.y:$.y};this.state.isElementSVG?z=(0,i.createSVGTransform)(O,_):R=(0,i.createCSSTransform)(O,_);const B=(0,r.clsx)(y.props.className||"",C,{[E]:this.state.dragging,[T]:this.state.dragged});return e.createElement(l.default,f({},A,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(y),{className:B,style:{...y.props.style,...R},transform:z}))}}t.default=w,p(w,"displayName","Draggable"),p(w,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(w,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(W3);const{default:t5,DraggableCore:F7}=W3;v0.exports=t5;v0.exports.default=t5;var B7=v0.exports.DraggableCore=F7,$7=v0.exports,sy={exports:{}},Uu={},ry={};ry.__esModule=!0;ry.cloneElement=Y7;var z7=U7(k);function U7(t){return t&&t.__esModule?t:{default:t}}function dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function hk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dk(Object(n),!0).forEach(function(s){W7(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function W7(t,e,n){return e=H7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H7(t){var e=V7(t,"string");return typeof e=="symbol"?e:String(e)}function V7(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y7(t,e){return e.style&&t.props.style&&(e.style=hk(hk({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),z7.default.cloneElement(t,e)}var Wu={};Wu.__esModule=!0;Wu.resizableProps=void 0;var Ye=G7(k0);function G7(t){return t&&t.__esModule?t:{default:t}}var q7={axis:Ye.default.oneOf(["both","x","y","none"]),className:Ye.default.string,children:Ye.default.element.isRequired,draggableOpts:Ye.default.shape({allowAnyClick:Ye.default.bool,cancel:Ye.default.string,children:Ye.default.node,disabled:Ye.default.bool,enableUserSelectHack:Ye.default.bool,offsetParent:Ye.default.node,grid:Ye.default.arrayOf(Ye.default.number),handle:Ye.default.string,nodeRef:Ye.default.object,onStart:Ye.default.func,onDrag:Ye.default.func,onStop:Ye.default.func,onMouseDown:Ye.default.func,scale:Ye.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="y"){var i;return(i=Ye.default.number).isRequired.apply(i,n)}return Ye.default.number.apply(Ye.default,n)},handle:Ye.default.oneOfType([Ye.default.node,Ye.default.func]),handleSize:Ye.default.arrayOf(Ye.default.number),lockAspectRatio:Ye.default.bool,maxConstraints:Ye.default.arrayOf(Ye.default.number),minConstraints:Ye.default.arrayOf(Ye.default.number),onResizeStop:Ye.default.func,onResizeStart:Ye.default.func,onResize:Ye.default.func,resizeHandles:Ye.default.arrayOf(Ye.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Ye.default.number,width:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=n[0];if(r.axis==="both"||r.axis==="x"){var i;return(i=Ye.default.number).isRequired.apply(i,n)}return Ye.default.number.apply(Ye.default,n)}};Wu.resizableProps=q7;Uu.__esModule=!0;Uu.default=void 0;var Kl=Z7(k),K7=$7,X7=ry,Q7=Wu,J7=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function n5(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(n5=function(r){return r?n:e})(t)}function Z7(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=n5(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function Wm(){return Wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Wm.apply(this,arguments)}function e9(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function dg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fk(Object(n),!0).forEach(function(s){t9(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function t9(t,e,n){return e=n9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n9(t){var e=s9(t,"string");return typeof e=="symbol"?e:String(e)}function s9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Hm(t,e)}function Hm(t,e){return Hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},Hm(t,e)}var iy=function(t){r9(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.handleRefs={},s.lastHandleRect=null,s.slack=null,s}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(r,i){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[r,i];if(c){var u=this.props.width/this.props.height,d=r-this.props.width,f=i-this.props.height;Math.abs(d)>Math.abs(f*u)?i=r/u:r=i*u}var p=r,m=i,x=this.slack||[0,0],w=x[0],g=x[1];return r+=w,i+=g,a&&(r=Math.max(a[0],r),i=Math.max(a[1],i)),l&&(r=Math.min(l[0],r),i=Math.min(l[1],i)),this.slack=[w+(p-r),g+(m-i)],[r,i]},n.resizeHandler=function(r,i){var o=this;return function(a,l){var c=l.node,u=l.deltaX,d=l.deltaY;r==="onResizeStart"&&o.resetData();var f=(o.props.axis==="both"||o.props.axis==="x")&&i!=="n"&&i!=="s",p=(o.props.axis==="both"||o.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!f&&!p)){var m=i[0],x=i[i.length-1],w=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(x==="w"){var g=w.left-o.lastHandleRect.left;u+=g}if(m==="n"){var b=w.top-o.lastHandleRect.top;d+=b}}o.lastHandleRect=w,x==="w"&&(u=-u),m==="n"&&(d=-d);var v=o.props.width+(f?u/o.props.transformScale:0),y=o.props.height+(p?d/o.props.transformScale:0),S=o.runConstraints(v,y);v=S[0],y=S[1];var C=v!==o.props.width||y!==o.props.height,E=typeof o.props[r]=="function"?o.props[r]:null,T=r==="onResize"&&!C;E&&!T&&(a.persist==null||a.persist(),E(a,{node:c,size:{width:v,height:y},handle:i})),r==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(r,i){var o=this.props.handle;if(!o)return Kl.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+r,ref:i});if(typeof o=="function")return o(r,i);var a=typeof o.type=="string",l=dg({ref:i},a?{}:{handleAxis:r});return Kl.cloneElement(o,l)},n.render=function(){var r=this,i=this.props,o=i.children,a=i.className,l=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var c=i.resizeHandles;i.transformScale;var u=e9(i,J7);return(0,X7.cloneElement)(o,dg(dg({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(d){var f,p=(f=r.handleRefs[d])!=null?f:r.handleRefs[d]=Kl.createRef();return Kl.createElement(K7.DraggableCore,Wm({},l,{nodeRef:p,key:"resizableHandle-"+d,onStop:r.resizeHandler("onResizeStop",d),onStart:r.resizeHandler("onResizeStart",d),onDrag:r.resizeHandler("onResize",d)}),r.renderResizeHandle(d,p))}))}))},e}(Kl.Component);Uu.default=iy;iy.propTypes=Q7.resizableProps;iy.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var E0={};E0.__esModule=!0;E0.default=void 0;var hg=c9(k),i9=s5(k0),o9=s5(Uu),a9=Wu,l9=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function s5(t){return t&&t.__esModule?t:{default:t}}function r5(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(r5=function(r){return r?n:e})(t)}function c9(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=r5(e);if(n&&n.has(t))return n.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,n&&n.set(t,s),s}function Vm(){return Vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Vm.apply(this,arguments)}function pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function pf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pk(Object(n),!0).forEach(function(s){u9(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function u9(t,e,n){return e=d9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d9(t){var e=h9(t,"string");return typeof e=="symbol"?e:String(e)}function h9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f9(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function p9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ym(t,e)}function Ym(t,e){return Ym=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},Ym(t,e)}var i5=function(t){p9(e,t);function e(){for(var s,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=t.call.apply(t,[this].concat(i))||this,s.state={width:s.props.width,height:s.props.height,propsWidth:s.props.width,propsHeight:s.props.height},s.onResize=function(a,l){var c=l.size;s.props.onResize?(a.persist==null||a.persist(),s.setState(c,function(){return s.props.onResize&&s.props.onResize(a,l)})):s.setState(c)},s}e.getDerivedStateFromProps=function(r,i){return i.propsWidth!==r.width||i.propsHeight!==r.height?{width:r.width,height:r.height,propsWidth:r.width,propsHeight:r.height}:null};var n=e.prototype;return n.render=function(){var r=this.props,i=r.handle,o=r.handleSize;r.onResize;var a=r.onResizeStart,l=r.onResizeStop,c=r.draggableOpts,u=r.minConstraints,d=r.maxConstraints,f=r.lockAspectRatio,p=r.axis;r.width,r.height;var m=r.resizeHandles,x=r.style,w=r.transformScale,g=f9(r,l9);return hg.createElement(o9.default,{axis:p,draggableOpts:c,handle:i,handleSize:o,height:this.state.height,lockAspectRatio:f,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:m,transformScale:w,width:this.state.width},hg.createElement("div",Vm({},g,{style:pf(pf({},x),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(hg.Component);E0.default=i5;i5.propTypes=pf(pf({},a9.resizableProps),{},{children:i9.default.element});sy.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var g9=sy.exports.Resizable=Uu.default;sy.exports.ResizableBox=E0.default;function o5(t){return function(n,s,r,i,o,a,l){return t(n,s,l)}}function P0(t){return function(n,s,r,i){if(!n||!s||typeof n!="object"||typeof s!="object")return t(n,s,r,i);var o=i.get(n),a=i.get(s);if(o&&a)return o===s&&a===n;i.set(n,s),i.set(s,n);var l=t(n,s,r,i);return i.delete(n),i.delete(s),l}}function a5(t,e){var n={};for(var s in t)n[s]=t[s];for(var s in e)n[s]=e[s];return n}function gk(t){return t.constructor===Object||t.constructor==null}function mk(t){return typeof t.then=="function"}function T0(t,e){return t===e||t!==t&&e!==e}var m9="[object Arguments]",x9="[object Boolean]",b9="[object Date]",y9="[object RegExp]",w9="[object Map]",v9="[object Number]",k9="[object Object]",S9="[object Set]",C9="[object String]",xk=Object.prototype.toString;function M0(t){var e=t.areArraysEqual,n=t.areDatesEqual,s=t.areMapsEqual,r=t.areObjectsEqual,i=t.areRegExpsEqual,o=t.areSetsEqual,a=t.createIsNestedEqual,l=a(c);function c(u,d,f){if(u===d)return!0;if(!u||!d||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;if(gk(u)&&gk(d))return r(u,d,l,f);var p=Array.isArray(u),m=Array.isArray(d);if(p||m)return p===m&&e(u,d,l,f);var x=xk.call(u);return x!==xk.call(d)?!1:x===b9?n(u,d,l,f):x===y9?i(u,d,l,f):x===w9?s(u,d,l,f):x===S9?o(u,d,l,f):x===k9||x===m9?mk(u)||mk(d)?!1:r(u,d,l,f):x===x9||x===v9||x===C9?T0(u.valueOf(),d.valueOf()):!1}return c}function l5(t,e,n,s){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n(t[r],e[r],r,r,t,e,s))return!1;return!0}var _9=P0(l5);function c5(t,e){return T0(t.valueOf(),e.valueOf())}function u5(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={},o=0;return t.forEach(function(a,l){if(r){var c=!1,u=0;e.forEach(function(d,f){!c&&!i[u]&&(c=n(l,f,o,u,t,e,s)&&n(a,d,l,f,t,e,s))&&(i[u]=!0),u++}),o++,r=c}}),r}var E9=P0(u5),P9="_owner",T9=Object.prototype.hasOwnProperty;function d5(t,e,n,s){var r=Object.keys(t),i=r.length;if(Object.keys(e).length!==i)return!1;for(var o;i-- >0;){if(o=r[i],o===P9){var a=!!t.$$typeof,l=!!e.$$typeof;if((a||l)&&a!==l)return!1}if(!T9.call(e,o)||!n(t[o],e[o],o,o,t,e,s))return!1}return!0}var M9=P0(d5);function h5(t,e){return t.source===e.source&&t.flags===e.flags}function f5(t,e,n,s){var r=t.size===e.size;if(!r)return!1;if(!t.size)return!0;var i={};return t.forEach(function(o,a){if(r){var l=!1,c=0;e.forEach(function(u,d){!l&&!i[c]&&(l=n(o,u,a,d,t,e,s))&&(i[c]=!0),c++}),r=l}}),r}var I9=P0(f5),p5=Object.freeze({areArraysEqual:l5,areDatesEqual:c5,areMapsEqual:u5,areObjectsEqual:d5,areRegExpsEqual:h5,areSetsEqual:f5,createIsNestedEqual:o5}),g5=Object.freeze({areArraysEqual:_9,areDatesEqual:c5,areMapsEqual:E9,areObjectsEqual:M9,areRegExpsEqual:h5,areSetsEqual:I9,createIsNestedEqual:o5}),N9=M0(p5);function Jr(t,e){return N9(t,e,void 0)}M0(a5(p5,{createIsNestedEqual:function(){return T0}}));M0(g5);M0(a5(g5,{createIsNestedEqual:function(){return T0}}));function bk(t){const{children:e,cols:n,containerWidth:s,margin:r,containerPadding:i,rowHeight:o,maxRows:a,isDraggable:l,isResizable:c,isBounded:u,static:d,useCSSTransforms:f=!0,usePercentages:p=!1,transformScale:m=1,droppingPosition:x,className:w="",style:g,handle:b="",cancel:v="",x:y,y:S,w:C,h:E,minW:T=1,maxW:N=1/0,minH:_=1,maxH:D=1/0,i:A,resizeHandles:R,resizeHandle:z,onDragStart:L,onDrag:F,onDragStop:$,onResizeStart:O,onResize:B,onResizeStop:M}=t,[H,j]=k.useState(!1),[P,X]=k.useState(!1),se=k.useRef(null),K=k.useRef({left:0,top:0}),J=k.useRef({top:0,left:0,width:0,height:0}),G=k.useRef(void 0),ee=k.useMemo(()=>({cols:n,containerPadding:i,containerWidth:s,margin:r,maxRows:a,rowHeight:o}),[n,i,s,r,a,o]),he=k.useCallback(ae=>{if(f)return Vb(ae);const re=A3(ae);return p?{...re,left:rk(ae.left/s),width:rk(ae.width/s)}:re},[f,p,s]),Ae=k.useCallback((ae,{node:re})=>{if(!L)return;const{offsetParent:pe}=re;if(!pe)return;const Ee=pe.getBoundingClientRect(),Ie=re.getBoundingClientRect(),Be=Ie.left/m,Ve=Ee.left/m,Le=Ie.top/m,Re=Ee.top/m,_e={left:Be-Ve+pe.scrollLeft,top:Le-Re+pe.scrollTop};K.current=_e,j(!0);const{x:Ge,y:$e}=bh(ee,_e.top,_e.left,C,E);L(A,Ge,$e,{e:ae,node:re,newPosition:_e})},[L,m,ee,C,E,A]),Ce=k.useCallback((ae,{node:re,deltaX:pe,deltaY:Ee})=>{if(!F||!H)return;let Ie=K.current.top+Ee,Be=K.current.left+pe;if(u){const{offsetParent:_e}=re;if(_e){const Ge=_e.clientHeight-ff(E,o,r[1]);Ie=Qs(Ie,0,Ge);const $e=w0(ee),Z=s-ff(C,$e,r[0]);Be=Qs(Be,0,Z)}}const Ve={top:Ie,left:Be};K.current=Ve;const{x:Le,y:Re}=bh(ee,Ie,Be,C,E);F(A,Le,Re,{e:ae,node:re,newPosition:Ve})},[F,H,u,E,o,r,ee,s,C,A]),ve=k.useCallback((ae,{node:re})=>{if(!$||!H)return;const{left:pe,top:Ee}=K.current,Ie={top:Ee,left:pe};j(!1),K.current={left:0,top:0};const{x:Be,y:Ve}=bh(ee,Ee,pe,C,E);$(A,Be,Ve,{e:ae,node:re,newPosition:Ie})},[$,H,ee,C,E,A]),Fe=k.useCallback((ae,{node:re,size:pe,handle:Ee},Ie,Be)=>{const Ve=Be==="onResizeStart"?O:Be==="onResize"?B:M;if(!Ve)return;let Le;re?Le=OO(Ee,Ie,pe,s):Le={...pe,top:Ie.top,left:Ie.left},J.current=Le;let{w:Re,h:_e}=JO(ee,Le.width,Le.height,y,S,Ee);Re=Qs(Re,Math.max(T,1),N),_e=Qs(_e,_,D),Ve(A,Re,_e,{e:ae.nativeEvent,node:re,size:Le,handle:Ee})},[O,B,M,s,ee,y,S,T,N,_,D,A]),ct=k.useCallback((ae,re)=>{X(!0);const pe=Ai(ee,y,S,C,E),Ee={...re,handle:re.handle};Fe(ae,Ee,pe,"onResizeStart")},[Fe,ee,y,S,C,E]),I=k.useCallback((ae,re)=>{const pe=Ai(ee,y,S,C,E),Ee={...re,handle:re.handle};Fe(ae,Ee,pe,"onResize")},[Fe,ee,y,S,C,E]),ce=k.useCallback((ae,re)=>{X(!1),J.current={top:0,left:0,width:0,height:0};const pe=Ai(ee,y,S,C,E),Ee={...re,handle:re.handle};Fe(ae,Ee,pe,"onResizeStop")},[Fe,ee,y,S,C,E]);k.useEffect(()=>{if(!x)return;const ae=se.current;if(!ae)return;const re=G.current||{left:0,top:0},pe=H&&(x.left!==re.left||x.top!==re.top);if(H){if(pe){const Ee=x.left-K.current.left,Ie=x.top-K.current.top,Be={node:ae,deltaX:Ee,deltaY:Ie,lastX:K.current.left,lastY:K.current.top,x:x.left,y:x.top};Ce(x.e,Be)}}else{const Ee={node:ae,deltaX:x.left,deltaY:x.top,lastX:0,lastY:0,x:x.left,y:x.top};Ae(x.e,Ee)}G.current=x},[x,H,Ae,Ce]);const me=Ai(ee,y,S,C,E,H?K.current:null,P?J.current:null),Ne=oe.Children.only(e),He=Ai(ee,0,0,n,0).width,ue=Ai(ee,0,0,T,_),Y=Ai(ee,0,0,N,D),te=[ue.width,ue.height],V=[Math.min(Y.width,He),Math.min(Y.height,1/0)],q=Ne.props,be=q.className,Q=q.style;let de=oe.cloneElement(Ne,{ref:se,className:pu("react-grid-item",be,w,{static:d,resizing:P,"react-draggable":l,"react-draggable-dragging":H,dropping:!!x,cssTransforms:f}),style:{...g,...Q,...he(me)}});const ye=z;return de=h.jsx(g9,{draggableOpts:{disabled:!c},className:c?void 0:"react-resizable-hide",width:me.width,height:me.height,minConstraints:te,maxConstraints:V,onResizeStart:ct,onResize:I,onResizeStop:ce,transformScale:m,resizeHandles:R,handle:ye,children:de}),de=h.jsx(B7,{disabled:!l,onStart:Ae,onDrag:Ce,onStop:ve,handle:b,cancel:".react-resizable-handle"+(v?","+v:""),scale:m,nodeRef:se,children:de}),de}var or=()=>{},yk="react-grid-layout",m5=!1;try{m5=/firefox/i.test(navigator.userAgent)}catch{}function D9(t,e){const n=oe.Children.toArray(t),s=oe.Children.toArray(e);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const i=n[r],o=s[r];if((i==null?void 0:i.key)!==(o==null?void 0:o.key))return!1}return!0}function wk(t,e,n,s,r){const i=[],o=new Set;oe.Children.forEach(e,l=>{if(!oe.isValidElement(l)||l.key===null)return;const c=String(l.key);o.add(c);const u=t.find(d=>d.i===c);if(u)i.push(ki(u));else{const f=l.props["data-grid"];f?i.push({i:c,x:f.x??0,y:f.y??0,w:f.w??1,h:f.h??1,minW:f.minW,maxW:f.maxW,minH:f.minH,maxH:f.maxH,static:f.static,isDraggable:f.isDraggable,isResizable:f.isResizable,resizeHandles:f.resizeHandles,isBounded:f.isBounded}):i.push({i:c,x:0,y:kl(i),w:1,h:1})}});const a=Qb(i,{cols:n});return br(a,s,n,r)}function A9(t){const{children:e,width:n,gridConfig:s,dragConfig:r,resizeConfig:i,dropConfig:o,positionStrategy:a=FO,compactor:l,layout:c=[],droppingItem:u,autoSize:d=!0,className:f="",style:p={},innerRef:m,onLayoutChange:x=or,onDragStart:w=or,onDrag:g=or,onDragStop:b=or,onResizeStart:v=or,onResize:y=or,onResizeStop:S=or,onDrop:C=or,onDropDragOver:E=or}=t,T=k.useMemo(()=>({...BO,...s}),[s]),N=k.useMemo(()=>({...$O,...r}),[r]),_=k.useMemo(()=>({...zO,...i}),[i]),D=k.useMemo(()=>({...UO,...o}),[o]),{cols:A,rowHeight:R,maxRows:z,margin:L,containerPadding:F}=T,{enabled:$,bounded:O,handle:B,cancel:M}=N,{enabled:H,handles:j,handleComponent:P}=_,{enabled:X,defaultItem:se}=D,K=l??Zb("vertical"),J=K.type,G=K.allowOverlap,ee=K.preventCollision??!1,he=k.useMemo(()=>u??{i:"__dropping-elem__",...se},[u,se]),Ae=a.type==="transform",Ce=a.scale,ve=F??L,[Fe,ct]=k.useState(!1),[I,ce]=k.useState(()=>wk(c,e,A,J,G)),[me,Ne]=k.useState(null),[He,ue]=k.useState(!1),[Y,te]=k.useState(null),[V,q]=k.useState(),be=k.useRef(null),Q=k.useRef(null),de=k.useRef(null),ye=k.useRef(0),ae=k.useRef(I),re=k.useRef(c),pe=k.useRef(e),Ee=k.useRef(J);k.useEffect(()=>{ct(!0),Jr(I,c)||x(I)},[]),k.useEffect(()=>{if(me)return;const xe=!Jr(c,re.current),qe=!D9(e,pe.current),Oe=J!==Ee.current;if(xe||qe||Oe){const tt=wk(xe?c:I,e,A,J,G);ce(tt)}re.current=c,pe.current=e,Ee.current=J},[c,e,A,J,G,me,I]),k.useEffect(()=>{!me&&!Jr(I,ae.current)&&(ae.current=I,x(I))},[I,me,x]);const Ie=k.useMemo(()=>{if(!d)return;const xe=kl(I),qe=ve[1];return xe*R+(xe-1)*L[1]+qe*2+"px"},[d,I,R,L,ve]),Be=k.useCallback((xe,qe,Oe,Ue)=>{const tt=Bi(I,xe);if(!tt)return;const Qe={w:tt.w,h:tt.h,x:tt.x,y:tt.y,i:xe};be.current=ki(tt),de.current=I,Ne(Qe),w(I,tt,tt,null,Ue.e,Ue.node)},[I,w]),Ve=k.useCallback((xe,qe,Oe,Ue)=>{const tt=be.current,Qe=Bi(I,xe);if(!Qe)return;const kt={w:Qe.w,h:Qe.h,x:Qe.x,y:Qe.y,i:xe},rt=Ki(I,Qe,qe,Oe,!0,ee,J,A,G);g(rt,tt,Qe,kt,Ue.e,Ue.node),ce(G?rt:br(rt,J,A)),Ne(kt)},[I,ee,J,A,G,g]),Le=k.useCallback((xe,qe,Oe,Ue)=>{if(!me)return;const tt=be.current,Qe=Bi(I,xe);if(!Qe)return;const kt=Ki(I,Qe,qe,Oe,!0,ee,J,A,G),rt=G?kt:br(kt,J,A);b(rt,tt,Qe,null,Ue.e,Ue.node);const Rt=de.current;be.current=null,de.current=null,Ne(null),ce(rt),Rt&&!Jr(Rt,rt)&&x(rt)},[me,I,ee,J,A,G,b,x]),Re=k.useCallback((xe,qe,Oe,Ue)=>{const tt=Bi(I,xe);tt&&(Q.current=ki(tt),de.current=I,ue(!0),v(I,tt,tt,null,Ue.e,Ue.node))},[I,v]),_e=k.useCallback((xe,qe,Oe,Ue)=>{const tt=Q.current,{handle:Qe}=Ue;let kt=!1,rt,Rt;const[Ls,Mi]=HO(I,xe,Ot=>(rt=Ot.x,Rt=Ot.y,["sw","w","nw","n","ne"].includes(Qe)&&(["sw","nw","w"].includes(Qe)&&(rt=Ot.x+(Ot.w-qe),qe=Ot.x!==rt&&rt<0?Ot.w:qe,rt=rt<0?0:rt),["ne","n","nw"].includes(Qe)&&(Rt=Ot.y+(Ot.h-Oe),Oe=Ot.y!==Rt&&Rt<0?Ot.h:Oe,Rt=Rt<0?0:Rt),kt=!0),ee&&!G&&L3(I,{...Ot,w:qe,h:Oe,x:rt??Ot.x,y:Rt??Ot.y}).filter(gT=>gT.i!==Ot.i).length>0&&(Rt=Ot.y,Oe=Ot.h,rt=Ot.x,qe=Ot.w,kt=!1),Ot.w=qe,Ot.h=Oe,Ot));if(!Mi)return;let Xu=Ls;kt&&rt!==void 0&&Rt!==void 0&&(Xu=Ki(Ls,Mi,rt,Rt,!0,ee,J,A,G));const Wy={w:Mi.w,h:Mi.h,x:Mi.x,y:Mi.y,i:xe,static:!0};y(Xu,tt,Mi,Wy,Ue.e,Ue.node),ce(G?Xu:br(Xu,J,A)),Ne(Wy)},[I,ee,G,J,A,y]),Ge=k.useCallback((xe,qe,Oe,Ue)=>{const tt=Q.current,Qe=Bi(I,xe),kt=G?I:br(I,J,A);S(kt,tt,Qe??null,null,Ue.e,Ue.node);const rt=de.current;Q.current=null,de.current=null,Ne(null),ue(!1),ce(kt),rt&&!Jr(rt,kt)&&x(kt)},[I,G,J,A,S,x]),$e=k.useCallback(()=>{const xe=br(I.filter(qe=>qe.i!==he.i),J,A,G);ce(xe),te(null),Ne(null),q(void 0)},[I,he.i,J,A,G]),Z=k.useCallback(xe=>{var rt;if(xe.preventDefault(),xe.stopPropagation(),m5&&!((rt=xe.nativeEvent.target)!=null&&rt.classList.contains(yk)))return!1;const qe=E(xe);if(qe===!1)return Y&&$e(),!1;const Oe={...he,...qe},Ue=xe.currentTarget.getBoundingClientRect(),tt=xe.clientX-Ue.left,Qe=xe.clientY-Ue.top,kt={left:tt/Ce,top:Qe/Ce,e:xe.nativeEvent};if(Y)V&&(V.left!==tt||V.top!==Qe)&&q(kt);else{const Ls=bh({cols:A,margin:L,maxRows:z,rowHeight:R,containerWidth:n,containerPadding:ve},Qe,tt,Oe.w,Oe.h);te(h.jsx("div",{},Oe.i)),q(kt),ce([...I,{...Oe,x:Ls.x,y:Ls.y,static:!1,isDraggable:!0}])}},[Y,V,he,E,$e,Ce,A,L,z,R,n,ve,I]),W=k.useCallback(xe=>{xe.preventDefault(),xe.stopPropagation(),ye.current--,ye.current===0&&$e()},[$e]),U=k.useCallback(xe=>{xe.preventDefault(),xe.stopPropagation(),ye.current++},[]),we=k.useCallback(xe=>{xe.preventDefault(),xe.stopPropagation();const qe=I.find(Oe=>Oe.i===he.i);ye.current=0,$e(),C(I,qe,xe.nativeEvent)},[I,he.i,$e,C]),st=k.useCallback((xe,qe)=>{if(!xe||!xe.key)return null;const Oe=Bi(I,String(xe.key));if(!Oe)return null;const Ue=typeof Oe.isDraggable=="boolean"?Oe.isDraggable:!Oe.static&&$,tt=typeof Oe.isResizable=="boolean"?Oe.isResizable:!Oe.static&&H,Qe=Oe.resizeHandles||[...j],kt=Ue&&O&&Oe.isBounded!==!1,rt=P;return h.jsx(bk,{containerWidth:n,cols:A,margin:L,containerPadding:ve,maxRows:z,rowHeight:R,cancel:M,handle:B,onDragStart:Be,onDrag:Ve,onDragStop:Le,onResizeStart:Re,onResize:_e,onResizeStop:Ge,isDraggable:Ue,isResizable:tt,isBounded:kt,useCSSTransforms:Ae&&Fe,usePercentages:!Fe,transformScale:Ce,w:Oe.w,h:Oe.h,x:Oe.x,y:Oe.y,i:Oe.i,minH:Oe.minH,minW:Oe.minW,maxH:Oe.maxH,maxW:Oe.maxW,static:Oe.static,droppingPosition:qe?V:void 0,resizeHandles:Qe,resizeHandle:rt,children:xe},Oe.i)},[I,n,A,L,ve,z,R,M,B,Be,Ve,Le,Re,_e,Ge,$,H,O,Ae,Fe,Ce,V,j,P]),ze=()=>me?h.jsx(bk,{w:me.w,h:me.h,x:me.x,y:me.y,i:me.i,className:`react-grid-placeholder ${He?"placeholder-resizing":""}`,containerWidth:n,cols:A,margin:L,containerPadding:ve,maxRows:z,rowHeight:R,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:Ae,transformScale:Ce,children:h.jsx("div",{})}):null,vt=pu(yk,f),le={height:Ie,...p};return h.jsxs("div",{ref:m,className:vt,style:le,onDrop:X?we:void 0,onDragLeave:X?W:void 0,onDragEnter:X?U:void 0,onDragOver:X?Z:void 0,children:[oe.Children.map(e,xe=>oe.isValidElement(xe)?st(xe):null),X&&Y&&st(Y,!0),ze()]})}var R9={lg:1200,md:996,sm:768,xs:480,xxs:0},O9={lg:12,md:10,sm:6,xs:4,xxs:2},fg=()=>{};function L9(t,e,n,s,r){const i=[];oe.Children.forEach(e,a=>{if(!oe.isValidElement(a)||a.key===null)return;const l=String(a.key),c=t.find(u=>u.i===l);if(c)i.push({...c,i:l});else{const d=a.props["data-grid"];d?i.push({i:l,x:d.x??0,y:d.y??0,w:d.w??1,h:d.h??1,minW:d.minW,maxW:d.maxW,minH:d.minH,maxH:d.maxH,static:d.static,isDraggable:d.isDraggable,isResizable:d.isResizable,resizeHandles:d.resizeHandles,isBounded:d.isBounded}):i.push({i:l,x:0,y:kl(i),w:1,h:1})}});const o=Qb(i,{cols:n});return br(o,s,n,r)}function j9(t){const{children:e,width:n,breakpoint:s,breakpoints:r=R9,cols:i=O9,layouts:o={},rowHeight:a=150,maxRows:l=1/0,margin:c=[10,10],containerPadding:u=null,compactor:d,onBreakpointChange:f=fg,onLayoutChange:p=fg,onWidthChange:m=fg,...x}=t,w=d??Zb("vertical"),g=w.type,b=w.allowOverlap,v=k.useMemo(()=>s??ak(r,n),[]),y=k.useMemo(()=>lk(v,i),[v,i]),S=k.useMemo(()=>ag(o,r,v,v,y,g),[]),[C,E]=k.useState(v),[T,N]=k.useState(y),[_,D]=k.useState(S),[A,R]=k.useState(o),z=k.useRef(n),L=k.useRef(s),F=k.useRef(r),$=k.useRef(i),O=k.useRef(o),B=k.useRef(g);k.useEffect(()=>{if(!Jr(o,O.current)){const X=ag(o,r,C,C,T,g);D(X),R(o),O.current=o}},[o,r,C,T,g]),k.useEffect(()=>{if(g!==B.current){const X=br(Rs(_),g,T,b),se={...A,[C]:X};D(X),R(se),p(X,se),B.current=g}},[g,_,T,b,A,C,p]),k.useEffect(()=>{const X=n!==z.current,se=s!==L.current,K=!Jr(r,F.current),J=!Jr(i,$.current);if(X||se||K||J){const G=s??ak(r,n),ee=lk(G,i),he=C;if(he!==G||K||J){const ve={...A};ve[he]||(ve[he]=Rs(_));let Fe=ag(ve,r,G,he,ee,g);Fe=L9(Fe,e,ee,g,b),ve[G]=Fe,E(G),N(ee),D(Fe),R(ve),f(G,ee),p(Fe,ve)}const Ae=Dd(c,G),Ce=u?Dd(u,G):null;m(n,Ae,ee,Ce),z.current=n,L.current=s,F.current=r,$.current=i}},[n,s,r,i,C,T,_,A,e,g,b,c,u,f,p,m]);const M=k.useCallback(X=>{const se={...A,[C]:X};D(X),R(se),p(X,se)},[A,C,p]),H=k.useMemo(()=>Dd(c,C),[c,C]),j=k.useMemo(()=>u===null?null:Dd(u,C),[u,C]),P=k.useMemo(()=>({cols:T,rowHeight:a,maxRows:l,margin:H,containerPadding:j}),[T,a,l,H,j]);return h.jsx(A9,{...x,width:n,gridConfig:P,compactor:w,onLayoutChange:M,layout:_,children:e})}function x5(t){const{children:e,width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,rowHeight:u,maxRows:d,margin:f,containerPadding:p,droppingItem:m,compactType:x,preventCollision:w=!1,allowOverlap:g=!1,verticalCompact:b,isDraggable:v=!0,isBounded:y=!1,draggableHandle:S,draggableCancel:C,isResizable:E=!0,resizeHandles:T=["se"],resizeHandle:N,isDroppable:_=!1,useCSSTransforms:D=!0,transformScale:A=1,autoSize:R,className:z,style:L,innerRef:F,onDragStart:$,onDrag:O,onDragStop:B,onResizeStart:M,onResize:H,onResizeStop:j,onDrop:P,onDropDragOver:X}=t;let se=x===void 0?"vertical":x;b===!1&&(se=null);const K={enabled:v,bounded:y,handle:S,cancel:C},J={enabled:E,handles:T,handleComponent:N},G={enabled:_};let ee;D?A!==1?ee=jO(A):ee=O3:ee=LO;const he=Zb(se,g,w);return h.jsx(j9,{width:n,breakpoint:s,breakpoints:r,cols:i,layouts:o,rowHeight:u,maxRows:d,margin:f,containerPadding:p,compactor:he,dragConfig:K,resizeConfig:J,dropConfig:G,positionStrategy:ee,droppingItem:m,autoSize:R,className:z,style:L,innerRef:F,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,onDragStart:$,onDrag:O,onDragStop:B,onResizeStart:M,onResize:H,onResizeStop:j,onDrop:P,onDropDragOver:X,children:e})}x5.displayName="ResponsiveReactGridLayout";var F9=x5,B9="react-grid-layout";function $9(t){function e(n){const{measureBeforeMount:s=!1,className:r,style:i,...o}=n,[a,l]=k.useState(1280),[c,u]=k.useState(!1),d=k.useRef(null),f=k.useRef(null);return k.useEffect(()=>{u(!0),f.current=new ResizeObserver(m=>{if(d.current instanceof HTMLElement&&m[0]){const w=m[0].contentRect.width;l(w)}});const p=d.current;return p instanceof HTMLElement&&f.current.observe(p),()=>{var m;p instanceof HTMLElement&&f.current&&f.current.unobserve(p),(m=f.current)==null||m.disconnect()}},[]),s&&!c?h.jsx("div",{className:pu(r,B9),style:i,ref:d}):h.jsx(t,{innerRef:d,className:r,style:i,...o,width:a})}return e.displayName=`WidthProvider(${t.displayName||t.name||"Component"})`,e}const Fc=[[0,4,8,16],[8,4,2,16],[0,40,3,27],[0,20,3,20],[3,20,7,13],[3,33,7,8],[3,41,7,6],[3,47,2,16],[0,0,10,4]],z9=[[0,4,8,16],[8,4,2,16],[9,20,3,27],[0,20,3,20],[3,20,6,13],[0,40,9,7],[3,33,6,7],[10,4,2,16],[0,0,12,4]],vk=0,U9=8;function W9(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""}function H9(t,e){return Math.floor(Math.random()*(e-t+1))+t}function V9(t){const e=Math.ceil(Math.random()*4)+1;return{x:H9(0,5)*2%12,y:Math.floor(t/6)*e,w:2,h:e,i:t.toString(),static:Math.random()<.05}}function Y9(t,e){const[n,s,r,i]=e;return{x:n,y:s,w:r,h:i,i:t.toString(),static:!0}}function Bc(t,e){const n=t.length,s=[];for(let r=0;r<n;r++)r<t.length?s.push(Y9(r,t[r])):s.push(V9(r));return s}function G9(t,e){const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const r of n){const i=t[r],o=e[r];if(!i||!o){if(i!==o)return!1;continue}if(i.length!==o.length)return!1;for(let a=0;a<i.length;a++){const l=i[a],c=o[a];if(l.x!==c.x||l.y!==c.y||l.w!==c.w||l.h!==c.h)return!1}}return!0}function pg(t,e){const n={};for(const s in t){const r=t[s];r&&(n[s]=r.map(i=>({...i,static:e})))}return n}const q9=$9(F9),Lf=class Lf extends oe.Component{constructor(n){super(n);ie(this,"isUpdatingLayout",!1);ie(this,"domCache",null);ie(this,"lastLayoutKey","");ie(this,"handleResponsiveLayoutChange",(n,s)=>{const r=Array.isArray(n)?n:[n],i=s;this.onLayoutChange(r,i)});ie(this,"generateNewLayout",()=>{const n=Bc(Fc),s=this.props.allStatic??this.state.allStatic,r=n.map(i=>({...i,static:s}));this.domCache=null,this.lastLayoutKey="",this.setState({layouts:{lg:r}})});this.state={currentBreakpoint:"lg",compactType:n.compactType??"vertical",mounted:!1,layouts:{lg:n.initialLayout||Bc(Fc)},allStatic:n.allStatic??!0},this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onCompactTypeChange=this.onCompactTypeChange.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.onNewLayout=this.onNewLayout.bind(this),this.onToggleStatic=this.onToggleStatic.bind(this)}componentDidMount(){this.setState({mounted:!0})}generateDOM(){const n=this.state.layouts.lg||[],{slotContent:s=[]}=this.props,r=this.props.allStatic??this.state.allStatic,i=`${n.length}-${r}-${s.length}`;if(this.domCache&&this.lastLayoutKey===i)return this.domCache;const o=[];for(let a=0;a<n.length;a++){const l=n[a],c=a>=vk&&a<=U9,u=a-vk,d=c&&s[u]?s[u]:null,f=l.static??r;o.push(h.jsx("div",{className:f?"static":"",children:d?h.jsx("div",{className:"external-slot-content",children:d}):f?h.jsxs("span",{className:"text",title:"This item is static and cannot be removed or resized.",children:["Static - ",a]}):h.jsx("span",{className:"text",children:a})},l.i||a.toString()))}return this.domCache=o,this.lastLayoutKey=i,o}onBreakpointChange(n){this.setState({currentBreakpoint:n})}onCompactTypeChange(){if(this.props.onCompactTypeChange)this.props.onCompactTypeChange();else{const{compactType:n}=this.state,s=n==="horizontal"?"vertical":n==="vertical"?null:"horizontal";this.setState({compactType:s})}}onLayoutChange(n,s){if(this.isUpdatingLayout){this.props.onLayoutChange(n,s);return}const r=this.props.allStatic??this.state.allStatic;if(r){this.props.onLayoutChange(n,s);return}const i=pg(s,r);!G9(this.state.layouts,i)&&(this.domCache=null,this.lastLayoutKey="",this.isUpdatingLayout=!0,this.setState({layouts:i},()=>{this.isUpdatingLayout=!1})),this.props.onLayoutChange(n,i)}onNewLayout(){this.props.onNewLayout?this.props.onNewLayout():this.generateNewLayout()}onToggleStatic(){if(this.props.onToggleStatic)this.props.onToggleStatic();else{const n=!this.state.allStatic,s=pg(this.state.layouts,n);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:n,layouts:s})}}componentDidUpdate(n){if(n.compactType!==this.props.compactType&&this.props.compactType!==void 0&&this.setState({compactType:this.props.compactType}),n.allStatic!==this.props.allStatic&&this.props.allStatic!==void 0){const s=pg(this.state.layouts,this.props.allStatic);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:this.props.allStatic,layouts:s})}n.slotContent!==this.props.slotContent&&(this.domCache=null,this.lastLayoutKey="")}render(){const{cols:n}=this.props,s=n||Lf.defaultProps.cols||{},r=this.props.compactType??this.state.compactType;return h.jsxs("div",{children:[h.jsxs("div",{children:["Current Breakpoint: ",this.state.currentBreakpoint," (",s[this.state.currentBreakpoint]," columns)"]}),h.jsxs("div",{children:["Compaction type: ",W9(r)||"No Compaction"]}),h.jsx(q9,{...this.props,layouts:this.state.layouts,onBreakpointChange:this.onBreakpointChange,onLayoutChange:this.handleResponsiveLayoutChange,measureBeforeMount:!1,useCSSTransforms:this.state.mounted,compactType:r,preventCollision:!r,children:this.generateDOM()})]})}};ie(Lf,"defaultProps",{className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},initialLayout:Bc(Fc)});let Gm=Lf;function b5(){const t=document.getElementById("tradingview-widget-script");t&&t.parentNode&&t.parentNode.removeChild(t)}function K9(){return new Promise((t,e)=>{if(typeof window.TradingView<"u"){t();return}b5();const n=document.createElement("script");n.id="tradingview-widget-script",n.src=W6,n.async=!0,n.onload=()=>{typeof window.TradingView<"u"?t():e(new Error("TradingView script loaded but TradingView object not found"))},n.onerror=()=>{e(new Error("Failed to load TradingView script"))},document.head.appendChild(n)})}function X9(t){if(typeof window.TradingView>"u")throw new Error("TradingView is not loaded. Call loadTradingViewScript() first.");const e={autosize:t.autosize!==!1,symbol:t.symbol,interval:t.interval,timezone:t.timezone||"Etc/UTC",theme:"dark",style:"1",locale:t.locale||"en",toolbar_bg:"#1a1a1a",enable_publishing:t.enablePublishing||!1,hide_top_toolbar:t.hideTopToolbar||!1,hide_legend:t.hideLegend||!1,save_image:!1,container_id:t.containerId,hide_volume:t.hideVolume||!1,studies:t.studies||["RSI@tv-basicstudies","MASimple@tv-basicstudies"]};return new window.TradingView.widget(e)}function Q9(){return`tradingview-widget-container-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function J9({symbol:t=z6,interval:e=U6,isCollapsed:n=!1,className:s=""}){const r=k.useRef(null),i=k.useRef(null),o=k.useRef(Q9());return k.useEffect(()=>{if(n||!r.current)return;r.current&&(r.current.id=o.current);let a=!0;return K9().then(()=>{if(!a||!r.current)return;const l={symbol:t,interval:e,containerId:o.current};i.current=X9(l)}).catch(l=>{console.error("Failed to load TradingView widget:",l)}),()=>{a=!1,i.current&&(i.current=null)}},[t,e,n]),k.useEffect(()=>()=>{b5()},[]),n?h.jsx("div",{className:`tradingview-widget-container ${s}`}):h.jsx("div",{className:`tradingview-widget-wrapper ${s}`,children:h.jsx("div",{ref:r,id:o.current,className:"tradingview-widget-container"})})}function Z9(t,e,n){return e!==t?h.jsx("span",{style:{fontSize:"0.7rem",opacity:.5,marginLeft:"0.25rem"},children:""}):h.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"0.25rem"},children:n==="asc"?"":""})}function Sl({message:t="Loading..."}){return h.jsx("div",{className:"message loading",children:t})}function Cl({error:t}){return h.jsxs("div",{className:"message error",children:["Error: ",t]})}function Er({message:t}){return h.jsx("div",{className:"message empty",children:t})}function y5({message:t}){return h.jsx("div",{className:"message warning",children:t})}function oy({isConnected:t,connectedText:e=" LIVE",disconnectedText:n=" OFFLINE"}){return h.jsx("div",{className:"status-indicator",children:h.jsx("span",{className:`status-dot ${t?"connected":"disconnected"}`,children:t?e:n})})}function _l({title:t,children:e}){return h.jsxs("div",{className:"layout-header",children:[h.jsx("div",{className:"layout-header-title",children:t}),e&&h.jsx("div",{className:"layout-header-actions",children:e})]})}function Gt({field:t,currentSortField:e,sortDirection:n,onSort:s,children:r,center:i=!1}){return h.jsxs("div",{className:`table-header-cell ${i?"left":"right"}`,onClick:()=>s(t),children:[r,Z9(t,e,n)]})}function qm({children:t,center:e=!1}){return h.jsx("div",{className:`table-header-cell ${e?"left":"right"}`,children:t})}function eL({onClick:t,disabled:e}){return console.log("[CancelButton] Rendering",{disabled:e,hasOnClick:!!t}),h.jsx("button",{onClick:n=>{console.log("[CancelButton] Button clicked",{disabled:e,event:n}),!e&&t?t(n):console.warn("[CancelButton] Click ignored - button is disabled",{disabled:e})},onMouseDown:n=>{console.log("[CancelButton] Mouse down",{disabled:e,event:n})},className:"btn btn-danger",disabled:e,style:{pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer"},children:"Cancel"})}function tL({onClick:t}){return h.jsx("button",{onClick:t,className:"btn btn-success",children:"Close"})}const w5=({level:t,index:e,isLast:n,depthPercent:s,formatPrice:r,formatSize:i})=>{const o=t.flash==="up"?"flash-up":t.flash==="down"?"flash-down-ask":"";return h.jsxs("div",{className:`orderbook-level ask ${o}`,style:{borderBottom:n?"none":void 0},children:[h.jsx("div",{className:"orderbook-depth-bar ask",style:{width:`${s}%`}}),h.jsx("div",{className:"orderbook-level-content ask",children:r(t.price)}),h.jsx("div",{className:"orderbook-level-content right",children:i(t.size)}),h.jsx("div",{className:"orderbook-depth-indicator",children:h.jsx("div",{className:"orderbook-depth-line ask"})})]})},v5=({level:t,index:e,isLast:n,depthPercent:s,formatPrice:r,formatSize:i})=>{const o=t.flash==="up"?"flash-up":t.flash==="down"?"flash-down-bid":"";return h.jsxs("div",{className:`orderbook-level bid ${o}`,style:{borderBottom:n?"none":void 0},children:[h.jsx("div",{className:"orderbook-depth-bar bid",style:{width:`${s}%`}}),h.jsx("div",{className:"orderbook-level-content bid",children:r(t.price)}),h.jsx("div",{className:"orderbook-level-content right",children:i(t.size)}),h.jsx("div",{className:"orderbook-depth-indicator",children:h.jsx("div",{className:"orderbook-depth-line bid"})})]})};function nL({baseURL:t,wsURL:e,marketId:n,maxDepth:s=o3,height:r=i3,authToken:i,walletAddress:o,deviceID:a}){var T,N;const{orderbook:l,loading:c,error:u,isConnected:d,wsError:f}=a3({baseURL:t,wsURL:e,marketId:n,maxDepth:s,authToken:i,walletAddress:o,deviceID:a}),p=k.useRef(null),m=k.useRef(null),x=k.useRef(null),w=k.useRef(0),g=k.useRef(0);k.useEffect(()=>{const _=l.asks.length!==w.current,D=l.bids.length!==g.current;if(!(!_&&!D))return w.current=l.asks.length,g.current=l.bids.length,x.current!==null&&cancelAnimationFrame(x.current),x.current=requestAnimationFrame(()=>{if(p.current&&_){const A=p.current;A.scrollTop=A.scrollHeight}if(m.current&&D){const A=m.current;A.scrollTop=0}x.current=null}),()=>{x.current!==null&&(cancelAnimationFrame(x.current),x.current=null)}},[l.asks.length,l.bids.length]);const b=l.asks.length>0?((T=l.asks[l.asks.length-1])==null?void 0:T.cumulative)??0:0,v=l.bids.length>0?((N=l.bids[l.bids.length-1])==null?void 0:N.cumulative)??0:0,y=k.useMemo(()=>Math.max(b,v),[b,v]),S=rf,C=of,E=k.useCallback(_=>y===0?0:_/y*100,[y]);return c?h.jsx(Sl,{message:"Loading orderbook..."}):u?h.jsx(Cl,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[f&&(l.asks.length>0||l.bids.length>0)&&h.jsxs("div",{className:"orderbook-ws-warning",children:[h.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),h.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),h.jsx(_l,{title:h.jsx(oy,{isConnected:d}),children:h.jsxs("div",{children:["Depth: ",s]})}),l.midPrice&&h.jsxs("div",{className:"orderbook-mid-price",children:[h.jsx("div",{className:"orderbook-mid-price-value",children:S(l.midPrice)}),l.spread!==void 0&&h.jsxs("div",{className:"orderbook-mid-price-spread",children:["Spread: ",S(l.spread)]})]}),h.jsxs("div",{className:"orderbook-content",children:[h.jsxs("div",{className:"orderbook-section",ref:p,children:[l.asks.map((_,D)=>{const A=E(_.cumulative);return h.jsx(w5,{level:_,index:D,isLast:D===l.asks.length-1,depthPercent:A,formatPrice:S,formatSize:C},`ask-${_.price}-${D}`)}),l.asks.length===0&&h.jsx(Er,{message:"No ask orders"})]}),h.jsxs("div",{className:"orderbook-section bids",ref:m,children:[l.bids.map((_,D)=>{const A=E(_.cumulative);return h.jsx(v5,{level:_,index:D,isLast:D===l.bids.length-1,depthPercent:A,formatPrice:S,formatSize:C},`bid-${_.price}-${D}`)}),l.bids.length===0&&h.jsx(Er,{message:"No bid orders"})]})]}),h.jsx(k5,{totalBids:v,totalAsks:b})]})}const k5=oe.memo(({totalBids:t,totalAsks:e})=>{const n=t+e,s=n>0?`${(t/n*100).toFixed(0)}%`:"0%",r=n>0?`${(e/n*100).toFixed(0)}%`:"0%";return h.jsxs("div",{className:"orderbook-footer",children:[h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar bid"}),h.jsx("span",{className:"color-text-muted",children:s})]}),h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar ask"}),h.jsx("span",{className:"color-text-muted",children:r})]})]})});k5.displayName="FooterSummary";const sL=oe.memo(nL);function rL(t,e,n,s){const r=o=>{const a=1-o;return 3*a*a*o*t+3*a*o*o*n+o*o*o},i=o=>{const a=1-o;return 3*a*a*o*e+3*a*o*o*s+o*o*o};return o=>{if(o<=0)return 0;if(o>=1)return 1;let a=0,l=1,c=.5;for(let u=0;u<12;u++){const d=r(c);if(Math.abs(d-o)<1e-4)break;d<o?a=c:l=c,c=(a+l)/2}return i(c)}}function iL({baseURL:t,wsURL:e,marketId:n,maxDepth:s=o3,height:r=i3,authToken:i,walletAddress:o,deviceID:a}){var B,M;const{orderbook:l,loading:c,error:u,isConnected:d,wsError:f}=a3({baseURL:t,wsURL:e,marketId:n,maxDepth:s,authToken:i,walletAddress:o,deviceID:a}),p=k.useRef(null),m=k.useRef(null),x=k.useRef(null),w=k.useRef(null),g=k.useRef(!1),b=k.useRef(null),v=k.useRef(null),y=k.useRef(!1),S=k.useRef(0),C=l.asks.length>0?((B=l.asks[l.asks.length-1])==null?void 0:B.cumulative)??0:0,E=l.bids.length>0?((M=l.bids[l.bids.length-1])==null?void 0:M.cumulative)??0:0,T=k.useMemo(()=>Math.max(C,E),[C,E]),N=rf,_=of,D=k.useCallback(H=>T===0?0:H/T*100,[T]),A=k.useCallback((H,j,P)=>{if(g.current)return;g.current=!0;const X=P,se=j-X,K=300,J=performance.now(),G=J+K,ee=rL(.57,.4,.55,1.17),he=Ae=>{if(Ae>=G){H.scrollTop=Math.max(0,j),g.current=!1,S.current=performance.now(),w.current&&(cancelAnimationFrame(w.current),w.current=null);return}const Ce=Ae-J,ve=Math.min(Ce/K,1),Fe=ee(ve),ct=X+se*Fe;H.scrollTop=Math.max(0,ct),w.current=requestAnimationFrame(he)};w.current=requestAnimationFrame(he)},[]),R=k.useCallback((H=0)=>{if(g.current||performance.now()-S.current<500||!p.current||!m.current)return;const X=p.current,K=m.current.clientHeight;if(K===0)return;const J=K/2,G=20.83333;if(l.asks.length*G<=J||l.spread===void 0)return;if(!x.current){if(H<3){v.current&&clearTimeout(v.current);const me=50*(H+1);v.current=window.setTimeout(()=>{v.current=null,R(H+1)},me)}return}const he=x.current,Ae=he.offsetTop,Ce=he.offsetHeight;if(Ce===0){if(H<3){v.current&&clearTimeout(v.current);const me=50*(H+1);v.current=window.setTimeout(()=>{v.current=null,R(H+1)},me)}return}const ve=Ae+Ce/2,Fe=K/2,ct=ve-Fe-G,I=X.scrollTop;Math.abs(ct-I)>1&&A(X,Math.max(0,ct),I)},[l.asks.length,l.spread,A]);k.useEffect(()=>{const H=()=>{y.current&&(y.current=!1,R())};return window.addEventListener("mouseup",H),()=>{window.removeEventListener("mouseup",H)}},[R]),k.useEffect(()=>{if(!p.current||!m.current)return;const H=requestAnimationFrame(()=>{requestAnimationFrame(()=>{R()})});return()=>{cancelAnimationFrame(H),w.current&&(cancelAnimationFrame(w.current),w.current=null),b.current&&(clearTimeout(b.current),b.current=null),v.current&&(clearTimeout(v.current),v.current=null),g.current=!1}},[l.asks.length,l.bids.length,l.spread,T,R]);const z=k.useCallback(()=>{g.current&&w.current&&(cancelAnimationFrame(w.current),w.current=null,g.current=!1),b.current&&(clearTimeout(b.current),b.current=null)},[]),L=k.useCallback(H=>{const j=H.currentTarget,P=j.offsetWidth-j.clientWidth;if(P>0){const X=j.getBoundingClientRect();H.clientX-X.left>j.clientWidth-P-5&&(y.current=!0,z())}},[z]),F=k.useCallback(()=>{y.current&&z()},[z]),$=k.useCallback(()=>{y.current&&(y.current=!1,R())},[R]),O=k.useCallback(()=>{z(),b.current&&clearTimeout(b.current),y.current||(b.current=window.setTimeout(()=>{b.current=null,R()},150))},[R,z]);return c?h.jsx(Sl,{message:"Loading orderbook..."}):u?h.jsx(Cl,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[f&&(l.asks.length>0||l.bids.length>0)&&h.jsxs("div",{className:"orderbook-ws-warning",children:[h.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),h.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),h.jsx(_l,{title:h.jsx(oy,{isConnected:d}),children:h.jsxs("div",{children:["Depth: ",s]})}),h.jsx("div",{className:"orderbook-content",ref:m,children:h.jsxs("div",{className:"orderbook-section",ref:p,onScroll:O,onMouseDown:L,onMouseMove:F,onMouseUp:$,onMouseLeave:$,children:[l.asks.map((H,j)=>{const P=D(H.cumulative);return h.jsx(w5,{level:H,index:j,isLast:j===l.asks.length-1&&l.bids.length===0,depthPercent:P,formatPrice:N,formatSize:_},`ask-${H.price}-${j}`)}),l.spread!==void 0&&h.jsxs("div",{className:"orderbook-mid-price-spread",ref:x,children:["Spread: ",N(l.spread)]}),l.bids.map((H,j)=>{const P=D(H.cumulative);return h.jsx(v5,{level:H,index:j,isLast:j===l.bids.length-1,depthPercent:P,formatPrice:N,formatSize:_},`bid-${H.price}-${j}`)}),l.asks.length===0&&l.bids.length===0&&h.jsx(Er,{message:"No orders"}),l.asks.length===0&&l.bids.length>0&&h.jsx(Er,{message:"No ask orders"}),l.bids.length===0&&l.asks.length>0&&h.jsx(Er,{message:"No bid orders"})]})}),h.jsx(S5,{totalBids:E,totalAsks:C})]})}const S5=oe.memo(({totalBids:t,totalAsks:e})=>{const n=t+e,s=n>0?`${(t/n*100).toFixed(0)}%`:"0%",r=n>0?`${(e/n*100).toFixed(0)}%`:"0%";return h.jsxs("div",{className:"orderbook-footer",children:[h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar bid"}),h.jsx("span",{className:"color-text-muted",children:s})]}),h.jsxs("div",{className:"orderbook-footer-legend",children:[h.jsx("div",{className:"orderbook-footer-bar ask"}),h.jsx("span",{className:"color-text-muted",children:r})]})]})});S5.displayName="FooterSummary";const oL=oe.memo(iL);function aL({baseURL:t=xo,wsURL:e=r3,marketId:n=L6,symbol:s,limit:r=j6,authToken:i,walletAddress:o,deviceID:a}){const{lastPrice:l,displayPrice:c,loading:u,error:d,isConnected:f,priceChange:p}=d0({baseURL:t,wsURL:e,marketId:n,symbol:s,limit:r,authToken:i,walletAddress:o,deviceID:a}),[m,x]=k.useState([]),[w,g]=k.useState(!1),b=k.useRef(null),v=k.useRef(!1),y=k.useRef(null),S=k.useCallback(async()=>{if(!b.current||!n){console.debug("[TradePrice] fetchRecentTrades skipped: missing client or marketId");return}if(v.current){console.debug("[TradePrice] fetchRecentTrades skipped: already fetching");return}console.debug("[TradePrice] Starting fetchRecentTrades"),v.current=!0,g(!0);try{const O=await b.current.getRecentTrades(n,20);if(O&&Array.isArray(O)&&O.length>0){const M=[...O].sort((H,j)=>{const P=fr(H.timestamp);return fr(j.timestamp)-P}).map(H=>{const j=fr(H.timestamp),P=typeof H.quantity=="string"?ke(H.quantity):typeof H.quantity=="number"?H.quantity:0,X=typeof H.price=="string"?ke(H.price):typeof H.price=="number"?H.price:0;return{time:j,size:P,price:X,is_buyer_maker:!1}});x(M),console.debug("[TradePrice] fetchRecentTrades completed successfully")}else x([]),console.debug("[TradePrice] fetchRecentTrades: no trades returned")}catch(O){console.error("[TradePrice] Failed to fetch recent trades:",O),x([])}finally{console.debug("[TradePrice] fetchRecentTrades finished, clearing loading state"),g(!1),v.current=!1}},[n]);k.useEffect(()=>{if(!n){console.debug("[TradePrice] Initialization skipped: no marketId");return}console.debug("[TradePrice] Initializing trades fetch for marketId:",n),v.current=!1,g(!1),b.current=new pn({baseURL:t});const O=setTimeout(()=>{b.current&&n&&!v.current?(console.debug("[TradePrice] Executing initial fetchRecentTrades"),S()):console.debug("[TradePrice] Initial fetch skipped:",{hasClient:!!b.current,hasMarketId:!!n,isFetching:v.current})},100);return()=>{console.debug("[TradePrice] Cleaning up trades fetch effect"),clearTimeout(O),v.current=!1,g(!1)}},[t,n]);const C=k.useRef(""),E=k.useRef(null),T=k.useCallback(()=>{const O=y.current;if(!O)return;const B=O.parentElement;if(!B)return;const M=O.textContent||"";if(!M)return;const H=window.getComputedStyle(B),j=parseFloat(H.paddingLeft)+parseFloat(H.paddingRight),P=B.clientWidth-j;let X=12,se=48,K=X;const J=document.createElement("div");for(J.style.position="absolute",J.style.visibility="hidden",J.style.whiteSpace="nowrap",J.style.fontFamily=window.getComputedStyle(O).fontFamily,J.style.fontWeight=window.getComputedStyle(O).fontWeight,document.body.appendChild(J);X<=se;){const ee=Math.floor((X+se)/2);J.style.fontSize=`${ee}px`,J.textContent=M,J.offsetWidth<=P?(K=ee,X=ee+1):se=ee-1}document.body.removeChild(J);const G=parseFloat(window.getComputedStyle(O).fontSize);Math.abs(G-K)>.5&&(O.style.fontSize=`${K}px`)},[]);k.useEffect(()=>{if(c==null)return;const O=ma(c);if(O===C.current)return;C.current=O,E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{T()},150);let B;const M=()=>{clearTimeout(B),B=window.setTimeout(()=>{E.current!==null&&clearTimeout(E.current),E.current=window.setTimeout(()=>{T()},150)},100)};return window.addEventListener("resize",M),()=>{E.current!==null&&clearTimeout(E.current),clearTimeout(B),window.removeEventListener("resize",M)}},[c,T]);const N=k.useCallback(O=>{if(!O||isNaN(O)||O<=0)return"Invalid";let B=O;B<9466848e5&&(B=B*1e3);const M=new Date(B);return isNaN(M.getTime())?"Invalid":M.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},[]),_=k.useCallback(O=>O?"#51cf66":"#ff6b6b",[]),D=k.useCallback(O=>O?"BUY":"SELL",[]),A=k.useCallback(O=>O?"":"",[]);if(u)return h.jsx(Sl,{message:"Loading trade price..."});if(d)return h.jsx(Cl,{error:d});if(c==null)return h.jsx(Er,{message:"No trade data available"});const R=l&&l.is_buyer_maker!==void 0,z=R?_(l.is_buyer_maker):"#888",L=R?D(l.is_buyer_maker):"N/A",F=R?A(l.is_buyer_maker):"",$=p==="up"?"flash-price-up":p==="down"?"flash-price-down":"";return h.jsxs("div",{className:"layout-container trade-price-container",children:[h.jsx(_l,{title:h.jsx(oy,{isConnected:f}),children:h.jsx("div",{children:"Last Trade Price"})}),h.jsxs("div",{className:`trade-price-main ${$}`,children:[h.jsx("div",{ref:y,className:"trade-price-value",style:{color:z},children:ma(c)}),h.jsxs("div",{className:"trade-price-side",style:{color:z},children:[h.jsx("span",{children:F}),h.jsx("span",{children:L})]})]}),h.jsx("div",{className:"trade-price-trades-table",children:w?h.jsx("div",{className:"message",children:"Loading trades..."}):m.length===0?h.jsx("div",{className:"message",children:"No trades available"}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Time"}),h.jsx("th",{className:"right",children:"Size"}),h.jsx("th",{className:"right",children:"Price"})]})}),h.jsx("tbody",{children:m.map(O=>{const B=O.is_buyer_maker?"#51cf66":"#ff6b6b";return h.jsxs("tr",{children:[h.jsx("td",{children:N(O.time)}),h.jsx("td",{className:"right",children:xD(O.size)}),h.jsx("td",{className:"right price",style:{color:B},children:ma(O.price)})]},`${O.time}-${O.price}-${O.size}`)})})]})})]})}const lL=oe.memo(aL),cL=({...t})=>h.jsx(XD,{...t,className:"toaster",expand:!0,richColors:!1,closeButton:!1,toastOptions:{duration:4e3,classNames:{toast:"toast",title:"toast-title",description:"toast-description",actionButton:"toast-action-button",cancelButton:"toast-cancel-button",closeButton:"toast-close-button"}}}),uL=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch{try{const n=document.createElement("textarea");return n.value=t,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),!0}catch(n){return console.error("Failed to copy to clipboard:",n),!1}}},In=t=>({label:"Copy",onClick:async()=>{await uL(t)?Me.success("Error message copied to clipboard"):Me.error("Failed to copy error message")}});function C5(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(""),[l,c]=k.useState(0),[u,d]=k.useState(!1),f=k.useRef(null),p=k.useRef(null),m=k.useRef(0),x=k.useRef(!0),w=k.useRef(!1),g=k.useRef(t);g.current=t;const b=k.useCallback(C=>{console.log("[useBucketCollections] [transformBucketToCollection] Transforming bucket:",{rawBucket:C,bucketId:C.bucket_id,usedMargin:C.used_margin,totalEquity:C.total_equity,dedicatedMargin:C.dedicated_margin});const E=n3(C,ke);console.log("[useBucketCollections] [transformBucketToCollection] Transformed to Bucket:",E);const T=String(E.bucketId).trim();(!T||T===""||T==="undefined"||T==="null")&&console.warn("[useBucketCollections] [transformBucketToCollection] Invalid bucketId detected:",{bucketId:T,rawBucket:{bucket_id:C.bucket_id},fullRawBucket:C});const N=b6(E);return console.log("[useBucketCollections] [transformBucketToCollection] Final BucketCollection:",N),N},[]),v=k.useCallback(async()=>{if(!f.current)return;const C=g.current;if(!C.walletAddress||C.walletAddress.trim()===""){c(0);return}try{const E=await f.current.getBalanceDecimal(C.walletAddress,"USDC"),T=ke(E.available_balance);c(T)}catch(E){console.warn("Failed to fetch spot wallet balance (USDC):",E),c(0)}},[]),y=k.useCallback(async()=>{if(!f.current)return;const C=g.current;if(!C.walletAddress||C.walletAddress.trim()===""){a("Wallet address is required"),s([]),i(!1),x.current=!1;return}a(""),x.current&&i(!0);try{console.log("[useBucketCollections] [fetchCollections] Starting fetch...",{walletAddress:C.walletAddress,useWebSocket:e,isSubscribed:w.current}),v(),console.log("[useBucketCollections] [fetchCollections] Calling getBuckets API...");const E=await f.current.getBuckets(C.walletAddress);console.log("[useBucketCollections] [fetchCollections] Raw API response:",{response:E,responseType:typeof E,isArray:Array.isArray(E),responseLength:Array.isArray(E)?E.length:"N/A"});const T=Array.isArray(E)?E:[];console.log("[useBucketCollections] [fetchCollections] Buckets data after normalization:",{bucketsData:T,bucketsDataLength:T.length,bucketsDataTypes:T.map((D,A)=>({index:A,type:typeof D,hasBucketId:!!(D!=null&&D.bucket_id),bucketId:D==null?void 0:D.bucket_id}))}),console.log(`[useBucketCollections] [fetchCollections] About to transform ${T.length} buckets:`,T);const N=T.map(b);console.log(`[useBucketCollections] [fetchCollections] Transformed ${N.length} bucket collections:`,N.map(D=>({bucketId:D.bucketId,marginType:D.marginType,nominalValue:D.nominalValue,maintenanceMargin:D.maintenanceMargin,riskRatio:D.riskRatio})));const _=N.filter(D=>D.bucketId&&D.bucketId.trim()!=="");_.length!==N.length&&console.warn(`[useBucketCollections] [fetchCollections] Filtered out ${N.length-_.length} collections with empty bucketId`,{filtered:N.filter(D=>!D.bucketId||D.bucketId.trim()==="")}),console.log("[useBucketCollections] [fetchCollections] Setting collections state:",{validCollectionsCount:_.length,validCollections:_}),s(_),(!e||!w.current)&&(x.current=!1,i(!1))}catch(E){const T=E instanceof Error?E.message:"Failed to load bucket collections";a(T),console.error("[useBucketCollections] [fetchCollections] Failed to fetch bucket collections:",{error:E,errorMessage:T,walletAddress:C.walletAddress,stack:E instanceof Error?E.stack:void 0}),(!e||!w.current)&&(x.current=!1,i(!1))}},[b,v,e]),S=k.useCallback(C=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] WebSocket data received:",{data:C,hasBuckets:!!C.buckets,bucketsIsArray:Array.isArray(C.buckets),bucketsLength:Array.isArray(C.buckets)?C.buckets.length:0}),C.buckets&&Array.isArray(C.buckets)){console.log("[useBucketCollections] [handleBucketsUpdate] Transforming WebSocket buckets:",C.buckets);const E=C.buckets.map(b);console.log("[useBucketCollections] [handleBucketsUpdate] Transformed collections:",E);const T=E.filter(N=>N.bucketId&&N.bucketId.trim()!=="");T.length!==E.length&&console.warn(`[useBucketCollections] [handleBucketsUpdate] WebSocket: Filtered out ${E.length-T.length} collections with empty bucketId`,{filtered:E.filter(N=>!N.bucketId||N.bucketId.trim()==="")}),console.log("[useBucketCollections] [handleBucketsUpdate] Setting collections from WebSocket:",{validCollectionsCount:T.length,validCollections:T}),s(N=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] Previous collections:",{prevCount:N.length,prev:N}),N.length!==T.length)return T;const _=JSON.stringify(N),D=JSON.stringify(T);return _===D?N:T}),x.current&&(x.current=!1,i(!1))}},[b]);return k.useEffect(()=>{if(!t.walletAddress||t.walletAddress.trim()===""){i(!1),a("Wallet address is required"),s([]),p.current&&(p.current.disconnect(),p.current=null),m.current!==null&&(clearInterval(m.current),m.current=0);return}if(!t.wsURL||t.wsURL.trim()===""){i(!1),a("WebSocket URL is required"),s([]);return}const C=new pn({baseURL:t.baseURL,sessionToken:t.authToken});if(f.current=C,x.current=!0,w.current=!1,console.log("[useBucketCollections] [useEffect] Initializing, calling fetchCollections..."),y(),e){const E=new Mo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});p.current=E;const T=()=>{E.isConnected()&&!w.current&&(E.subscribeBuckets(S),w.current=!0)};E.connect().then(()=>{d(!0),T()}).catch(_=>{console.error("Failed to connect WebSocket:",_),d(!1),x.current&&(x.current=!1,i(!1)),t.refreshInterval&&t.refreshInterval>0&&(m.current=window.setInterval(()=>{y()},t.refreshInterval))});const N=E.onStateChange(_=>{_===dt.Connected?(d(!0),w.current&&T(),m.current!==null&&(clearInterval(m.current),m.current=0)):(d(!1),_===dt.Disconnected&&t.refreshInterval&&t.refreshInterval>0&&m.current===null&&(m.current=window.setInterval(()=>{y()},t.refreshInterval)))});return()=>{N&&N(),p.current&&(p.current.unsubscribeBuckets(S),p.current.disconnect(),p.current=null),m.current!==null&&(clearInterval(m.current),m.current=0)}}else return t.refreshInterval&&t.refreshInterval>0&&(m.current=window.setInterval(()=>{y()},t.refreshInterval)),()=>{m.current!==null&&(clearInterval(m.current),m.current=0)}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e,S]),k.useEffect(()=>{console.log("[useBucketCollections] [useEffect] Hook state changed, returning:",{collectionsCount:n.length,collections:n,loading:r,error:o,spotWalletBalance:l})},[n,r,o,l]),{collections:n,loading:r,error:o,refresh:y,spotWalletBalance:l,isConnected:u}}const dL=k.forwardRef(function({baseURL:e=xo,wsURL:n=r3,mnemonic:s=F6,marketId:r,marketSymbol:i,selectedBucketBalance:o,selectedBucketId:a,onLeverageClick:l,authToken:c,walletAddress:u},d){const{selectedMarketId:f,selectedMarketSymbol:p}=Ti({baseURL:e,autoFetchMarkets:!0}),m=r||f||"",x=i||p||"Market",{lastPrice:w}=d0({baseURL:e,wsURL:n,marketId:m}),g=(w==null?void 0:w.price)||0,b=k.useRef(0),{collections:v,spotWalletBalance:y}=C5({baseURL:e,wsURL:n,walletAddress:u||"",authToken:c||"",useWebSocket:!!u&&!!c}),S=k.useMemo(()=>!a||!v.length?null:v.find(Re=>Re.bucketId===a)||null,[v,a]),{orderType:C,setOrderType:E,fundPercent:T,sizeInput:N,price:_,leverage:D,positionMode:A,marginMode:R,availableBalance:z,currentPrice:L,isReady:F,loading:$,result:O,setFundPercent:B,setSizeInput:M,setPrice:H,setMarginMode:j,setLeverage:P,placeBuyOrder:X,placeSellOrder:se,calculateValue:K,calculateMargin:J,calculateSizeUSD:G,getOrderPrice:ee,getAvailableTradeAmount:he}=mD({baseURL:e,mnemonic:s,marketId:m,selectedBucketBalance:o,tradePrice:g}),Ae=k.useMemo(()=>ee(),[ee,C,_,L]),Ce=k.useMemo(()=>he(),[he,z,D]),ve=k.useMemo(()=>K(),[K,N,T,z,Ae,D]),Fe=k.useMemo(()=>J(),[J,D,ve]),ct=k.useMemo(()=>ke(ve),[ve]),I=k.useMemo(()=>ke(Fe),[Fe]),ce=k.useMemo(()=>({minimumFractionDigits:Br,maximumFractionDigits:H6}),[]),me=k.useMemo(()=>L.toFixed(Br),[L]);k.useMemo(()=>a?`Available in ${a}`:"Available to Trade",[a]);const Ne=k.useMemo(()=>{const Re=v.reduce((_e,Ge)=>_e+Ge.totalEquity,0);return y+Re},[v,y]),He=k.useMemo(()=>Ne.toLocaleString("en-US",ce),[Ne,ce]),ue=k.useMemo(()=>y.toLocaleString("en-US",ce),[y,ce]),Y=k.useMemo(()=>S?S.nominalValue.toLocaleString("en-US",ce):"--",[S,ce]),te=k.useMemo(()=>S?S.nominalValue.toLocaleString("en-US",ce):"--",[S,ce]),V=k.useMemo(()=>S?S.unrealizedPnL.toLocaleString("en-US",ce):"--",[S,ce]),q=k.useMemo(()=>S?(S.crossMarginRatio*100).toFixed(Br)+"%":"--",[S]),be=k.useMemo(()=>S?S.maintenanceMargin.toLocaleString("en-US",ce):"--",[S,ce]),Q=k.useMemo(()=>S?`${S.leverage.toFixed(Br)}x`:"--",[S]),de=k.useCallback(()=>{j(R===du?V6:du)},[R,j]),ye=k.useCallback(()=>{E(Om)},[E]),ae=k.useCallback(()=>{E($p)},[E]),re=k.useCallback(()=>{B(Math.min(Fp,T+Bp))},[T,B]),pe=k.useCallback(()=>{B(Math.max(vd,T-Bp))},[T,B]),Ee=k.useCallback(Re=>{const _e=parseInt(Re.target.value);B(_e)},[B]),Ie=k.useCallback(Re=>{H(Re.target.value)},[H]),Be=k.useCallback(Re=>{const _e=parseFloat(Re.target.value);M(isNaN(_e)?0:_e)},[M]),Ve=k.useCallback(()=>{const Re=Me.loading("Submit transaction...",{description:"Placing buy order"});b.current=typeof Re=="number"?Re:0,X()},[X]),Le=k.useCallback(()=>{const Re=Me.loading("Submit transaction...",{description:"Placing sell order"});b.current=typeof Re=="number"?Re:0,se()},[se]);return k.useImperativeHandle(d,()=>({leverage:D,setLeverage:P,calculateMaxRatio:Re=>{const _e=G();ee();const Ge=_e;return z>0&&Ge>0?(Ge/z).toFixed(Br):Re.toFixed(Br)}}),[D,P,G,ee,z]),k.useEffect(()=>{if(O)if(b.current!==0&&(Me.dismiss(b.current),b.current=0),O.success){const Re=O.orderId?`Order ID: ${O.orderId}`:O.message||"Order placed successfully";Me.success("Order Placed Successfully",{description:Re})}else O.error&&Me.error("Order Failed",{description:O.error,action:In(O.error||"")})},[O]),h.jsxs("div",{className:"component",children:[h.jsx("h2",{children:x}),h.jsxs("div",{className:"trade-op-config",children:[h.jsx("div",{className:"trade-op-badge",children:h.jsx("span",{className:"trade-op-badge-label",children:A})}),h.jsxs("div",{className:"trade-op-badge",onClick:de,style:{cursor:"pointer"},children:[h.jsx("span",{className:"trade-op-badge-label",children:R}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),h.jsxs("div",{className:"trade-op-badge",onClick:l,style:{cursor:"pointer"},children:[h.jsxs("span",{className:"trade-op-badge-label",children:[D,"x"]}),h.jsx("span",{className:"trade-op-info-icon",children:"i"})]})]}),h.jsxs("div",{className:"trade-op-order-type-selector",children:[h.jsx("button",{onClick:ye,className:`btn-toggle ${C===Om?"active":""}`,children:"MARKET"}),h.jsx("button",{onClick:ae,className:`btn-toggle ${C===$p?"active":""}`,children:"LIMIT"})]}),C===$p&&h.jsx("div",{className:"trade-op-form-group",children:h.jsxs("div",{className:"trade-op-form-row",children:[h.jsx("label",{htmlFor:"price",className:"trade-op-label",children:"Price:"}),h.jsx("input",{id:"price",type:"number",value:_,onChange:Ie,placeholder:me,step:$6,min:zv})]})}),h.jsxs("div",{className:"trade-op-form-group",children:[h.jsxs("div",{className:"trade-op-form-row",style:{marginBottom:"0.5rem"},children:[h.jsx("label",{htmlFor:"size",className:"trade-op-label",children:"Size:"}),h.jsxs("div",{className:"trade-op-size-controls",children:[h.jsx("input",{id:"size",type:"number",step:"any",value:N===0?"":N,onChange:Be,placeholder:"0",min:zv,max:Ce,className:"trade-op-input"}),h.jsxs("div",{className:"trade-op-size-buttons",children:[h.jsx("button",{onClick:re,className:"btn-small",children:""}),h.jsx("button",{onClick:pe,className:"btn-small",children:""})]})]})]}),h.jsx("input",{type:"range",min:vd,max:Fp,value:T,onChange:Ee,step:Bp,style:{width:"100%","--slider-progress":`${(T-vd)/(Fp-vd)*100}%`},className:"filled-slider"}),h.jsxs("div",{className:"trade-op-slider-labels",children:[h.jsx("span",{children:"0"}),h.jsx("span",{children:"20"}),h.jsx("span",{children:"40"}),h.jsx("span",{children:"60"}),h.jsx("span",{children:"80"}),h.jsx("span",{children:"100"})]})]}),h.jsxs("div",{className:"trade-op-action-panel",children:[h.jsxs("div",{children:[h.jsx("div",{className:"trade-op-panel-title buy",children:"LONG"}),h.jsxs("div",{className:"trade-op-panel-size",children:[N.toFixed(3),"/100.000"]}),h.jsx("button",{onClick:Ve,disabled:$||!F||ve<=0,className:"btn-buy",children:$?"PLACING...":"BUY LONG"}),h.jsxs("div",{className:"trade-op-panel-details",children:[h.jsxs("div",{children:["Value ",ct.toFixed(2)]}),h.jsxs("div",{children:["Margin ",I.toFixed(2)]})]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"trade-op-panel-title sell",children:"SHORT"}),h.jsxs("div",{className:"trade-op-panel-size",children:[N.toFixed(3),"/100.000"]}),h.jsx("button",{onClick:Le,disabled:$||!F||ve<=0,className:"btn-sell",children:$?"PLACING...":"SELL SHORT"}),h.jsxs("div",{className:"trade-op-panel-details",children:[h.jsxs("div",{children:["Value ",ct.toFixed(Br)]}),h.jsxs("div",{children:["Margin ",I.toFixed(Br)]})]})]})]}),h.jsxs("div",{className:"trade-op-info-panel",children:[h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Account Equity:"}),h.jsxs("span",{className:"trade-op-info-value",children:[He," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Spot:"}),h.jsxs("span",{className:"trade-op-info-value",children:[ue," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsxs("span",{className:"trade-op-info-label",children:[a||"Bucket",":"]}),h.jsxs("span",{className:"trade-op-info-value",children:[Y," USDC"]})]}),h.jsx("div",{className:"trade-op-info-row",children:h.jsxs("span",{className:"trade-op-info-label",children:["Bucket Overview: ",a||"--"]})}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Balance:"}),h.jsxs("span",{className:"trade-op-info-value",children:[te," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Unrealized PNL:"}),h.jsxs("span",{className:"trade-op-info-value",children:[V," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Cross Margin Ratio:"}),h.jsx("span",{className:"trade-op-info-value",children:q})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Maintenance Margin:"}),h.jsxs("span",{className:"trade-op-info-value",children:[be," USDC"]})]}),h.jsxs("div",{className:"trade-op-info-row",children:[h.jsx("span",{className:"trade-op-info-label",children:"Cross Account Leverage:"}),h.jsx("span",{className:"trade-op-info-value",children:Q})]})]})]})});function _5(t){const e=t.useWebSocket!==!1,[n,s]=k.useState([]),[r,i]=k.useState(!0),[o,a]=k.useState(null),[l,c]=k.useState(!1),u=k.useRef(null),d=k.useRef(null),f=k.useRef(!1),p=k.useRef(!1),m=k.useRef(t.walletAddress),x=k.useRef(t);x.current=t;const w=k.useCallback(y=>{const S=y.side==="ORDER_SIDE_BUY"?"BUY":"SELL",C=y.status||"PENDING";let E=C;C.includes("ORDER_STATUS_")&&(E=C.replace("ORDER_STATUS_",""));const T=y.time_in_force;let N=T;T&&T.includes("TIME_IN_FORCE_")&&(N=T.replace("TIME_IN_FORCE_",""));const _=F=>{if(F==null||F==="")return 0;if(typeof F=="number")return F;const $=parseFloat(String(F));return isNaN($)?0:$},D=_(y.quantity),A=_(y.price),R=_(y.filled_quantity),z=D-R,L=F=>{if(F==null||F==="")return;if(typeof F=="number")return F;const $=parseFloat(String(F));return isNaN($)?void 0:$};return{id:y.order_id,orderId:y.order_id,marketId:y.market_id||y.bucket_id,symbol:`Market-${y.market_id||y.bucket_id||"N/A"}`,side:S,type:y.type,quantity:D,price:A,filledQuantity:R,remainingQuantity:z,status:E,timeInForce:N,createdAt:L(y.timestamp),updatedAt:void 0}},[]),g=k.useCallback(async()=>{if(!u.current)return;const y=x.current;if(!y.walletAddress||y.walletAddress.trim()===""){a(null),s([]),i(!1);return}a(null);try{const C=(await u0(jb.http,()=>u.current.getOrders(y.walletAddress))).orders||[];if(C.length>0){const E=C.map(w);s(T=>{if(T.length!==E.length)return E;const N=JSON.stringify(T),_=JSON.stringify(E);return N===_?T:E})}else s(E=>E.length===0?E:[])}catch(S){const C=S instanceof Error?S.message:"Failed to load orders";a(C),console.error("Failed to fetch orders after retries:",S)}finally{i(!1)}},[w]),b=k.useCallback(y=>y.orderId,[]),v=k.useCallback(y=>{if(!y||typeof y!="object"||!("order_id"in y)||typeof y.order_id!="string"||y.order_id.length===0){console.warn("Received invalid order data, skipping:",y);return}const S=w(y),C=b(S);if(!C){console.warn("Received order without ID, skipping:",S);return}s(E=>{const T=new Map;E.forEach(z=>{const L=b(z);L&&T.set(L,z)});const N=S.status.toUpperCase();N==="FILLED"||N==="CANCELLED"||N==="REJECTED"||N==="EXPIRED"||N==="CLOSED"||N==="DONE"?T.delete(C):T.set(C,S);const D=Array.from(T.values()).filter(z=>b(z)!==void 0);if(E.length!==D.length)return D;const A=JSON.stringify(E),R=JSON.stringify(D);return A===R?E:D})},[w,b]);return k.useEffect(()=>{if(t.walletAddress!==m.current&&(p.current=!1,m.current=t.walletAddress),!t.walletAddress||t.walletAddress.trim()===""){i(!1),a(null),s([]),d.current&&(d.current.disconnect(),d.current=null),p.current=!1;return}const y=new pn({baseURL:t.baseURL,sessionToken:t.authToken});if(u.current=y,p.current||g().finally(()=>{p.current=!0}),e&&t.wsURL){const S=new Mo({url:t.wsURL,authToken:t.authToken,walletAddress:t.walletAddress,deviceID:t.deviceID});d.current=S;const C=()=>{S.isConnected()&&!f.current&&(S.subscribeOrders(v),f.current=!0)};S.connect().then(()=>{c(!0),C()}).catch(N=>{console.error("Failed to connect WebSocket:",N),c(!1)});let E=null;const T=S.wsClient;return T&&(E=T.onStateChange(N=>{N===dt.Connected?(c(!0),f.current&&C()):(N===dt.Disconnected||N===dt.Reconnecting)&&(c(!1),f.current=!1)})),()=>{E&&E(),d.current&&(d.current.unsubscribeOrders(v),d.current.disconnect())}}else return()=>{}},[t.baseURL,t.wsURL,t.authToken,t.walletAddress,t.deviceID,t.refreshInterval,e]),{orders:n,loading:r,error:o,isConnected:l,refresh:g}}function hL({baseURL:t=xo,wsURL:e,authToken:n,walletAddress:s,mnemonic:r,height:i=O6,refreshInterval:o=Fb}){const{orders:a,loading:l,error:c,isConnected:u,refresh:d}=_5({baseURL:t,wsURL:e,authToken:n,walletAddress:s,refreshInterval:o}),f=k.useRef(null),p=k.useRef(0),[m,x]=k.useState(null),{getSymbolByMarketId:w}=Ti({baseURL:t,sessionToken:n,autoFetchMarkets:!1}),[g,b]=k.useState($r),[v,y]=k.useState(null),[S,C]=k.useState(ga),E=k.useMemo(()=>a.filter($=>{const O=$.status.toUpperCase(),B=O.startsWith("ORDER_STATUS_")?O:`ORDER_STATUS_${O}`;return g===$r?s1.some(M=>O===M.toUpperCase()||B===M.toUpperCase()):!s1.some(M=>O===M.toUpperCase()||B===M.toUpperCase())}),[a,g]),T=k.useMemo(()=>v?[...E].sort(($,O)=>{let B=0,M=0;switch(v){case Xv:B=$.symbol,M=O.symbol;break;case Qv:B=$.side,M=O.side;break;case Jv:B=$.quantity,M=O.quantity;break;case Zv:B=$.price,M=O.price;break;case e1:B=$.filledQuantity||0,M=O.filledQuantity||0;break;case t1:B=$.status,M=O.status;break}if(typeof B=="string"&&typeof M=="string")return S===ri?B.localeCompare(M):M.localeCompare(B);const H=Number(B),j=Number(M);return isNaN(H)||isNaN(j)?0:S===ri?H-j:j-H}):E,[E,v,S]),N=$=>{v===$?C(S===ri?ga:ri):(y($),C(ga))},_=$=>$.side,D=wD,A=vD,R=$=>{const O=($||"").toUpperCase(),B={ORDER_STATUS_PENDING:{short:"P",full:"Pending",color:Wp},PENDING:{short:"P",full:"Pending",color:Wp},ORDER_STATUS_OPEN:{short:"O",full:"Open",color:Hp},OPEN:{short:"O",full:"Open",color:Hp},NEW:{short:"N",full:"New",color:Hp},ORDER_STATUS_FILLED:{short:"F",full:"Filled",color:r1},FILLED:{short:"F",full:"Filled",color:r1},ORDER_STATUS_CANCELED:{short:"C",full:"Canceled",color:Vp},CANCELED:{short:"C",full:"Canceled",color:Vp},CANCELLED:{short:"C",full:"Canceled",color:Vp},ORDER_STATUS_REJECTED:{short:"R",full:"Rejected",color:i1},REJECTED:{short:"R",full:"Rejected",color:i1},PARTIALLY_FILLED:{short:"PF",full:"Partially Filled",color:Wp}};if(B[O])return B[O];const M=O.startsWith("ORDER_STATUS_")?O:`ORDER_STATUS_${O}`;return B[M]?B[M]:{short:"?",full:$||gD,color:sD}},z=$=>$===hu||$==="BUY"?rD:iD,L=$=>!$||typeof $!="string"?pD:$.replace("ORDER_TYPE_",""),F=async $=>{var H;const O=$.orderId,B=$.marketId;if(!O){const j="Cannot cancel order without a valid order ID.";Me.error("Order ID is missing",{description:j,action:In(j)});return}if(!B){const j="Cannot cancel order without a valid market ID.";Me.error("Market ID is missing",{description:j,action:In(j)});return}if(!r){const j=`Please provide the 'mnemonic' prop to the PendingOrders component. Order ID: ${O}`;Me.error("Mnemonic required",{description:j,duration:5e3,action:In(j)});return}if(typeof r!="string"||r.trim()===""){const j=`The mnemonic prop is empty or invalid. Please provide a valid mnemonic. Order ID: ${O}`;Me.error("Invalid mnemonic",{description:j,duration:5e3,action:In(j)});return}if(m){Me.info("Cancellation in progress",{description:"Please wait for the current cancellation to complete."});return}x(O);const M=Me.loading("Canceling order...",{description:`Canceling order ${O}`});p.current=typeof M=="number"?M:0;try{f.current||(f.current=new wl({baseURL:t,mnemonic:r.trim()}),await f.current.initialize());const j=await f.current.cancelOrder({orderId:O,marketId:B}),P=(j==null?void 0:j.success)===!0||(j==null?void 0:j.result)==="success"||j&&!j.error&&!j.message;if(p.current!==0&&(Me.dismiss(p.current),p.current=0),P)Me.success("Order canceled successfully",{description:`Order ${O} has been canceled.`}),d&&await d();else{const X=(j==null?void 0:j.error)||(j==null?void 0:j.message)||((H=j==null?void 0:j.response)==null?void 0:H.error)||"Failed to cancel order";throw new Error(X)}}catch(j){p.current!==0&&(Me.dismiss(p.current),p.current=0);const X=`${j instanceof Error?j.message:"Unknown error occurred"}. Order ID: ${O}`;Me.error("Failed to cancel order",{description:X,duration:6e3,action:In(X)})}finally{x(null)}};return!s||s.trim()===""?h.jsx(y5,{message:dD}):l?h.jsx(Sl,{message:oD}):c?h.jsx(Cl,{error:c}):h.jsxs("div",{className:"layout-container",style:{height:i},children:[h.jsxs(_l,{title:g===$r?cD:uD,children:[h.jsxs("div",{className:"btn-tab",children:[h.jsx("span",{style:{fontSize:"0.7rem"},children:""}),h.jsx("span",{children:"Current Symbol"})]}),h.jsxs("div",{onClick:()=>b(g===$r?n1:$r),className:`btn-tab ${g===n1?"active":""}`,children:[h.jsx("img",{src:"/transfer-net.svg"}),h.jsx("span",{children:g===$r?fD:hD})]}),!u&&h.jsxs("div",{onClick:async()=>{d&&await d()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh orders",children:[h.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),h.jsx("span",{children:"Refresh"})]})]}),h.jsxs("div",{className:"table-container shrinkable",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:o1},children:[h.jsx(Gt,{field:Xv,currentSortField:v,sortDirection:S,onSort:N,children:"Symbol"}),h.jsx(Gt,{field:Qv,currentSortField:v,sortDirection:S,onSort:N,children:"Side"}),h.jsx(qm,{center:!0,children:"Type"}),h.jsx(Gt,{field:Jv,currentSortField:v,sortDirection:S,onSort:N,children:"Quantity"}),h.jsx(Gt,{field:Zv,currentSortField:v,sortDirection:S,onSort:N,children:"Price"}),h.jsx(Gt,{field:e1,currentSortField:v,sortDirection:S,onSort:N,children:"Filled"}),h.jsx(Gt,{field:t1,currentSortField:v,sortDirection:S,onSort:N,children:"Status"}),h.jsx(qm,{center:!0,children:"Actions"})]}),T.length===0?h.jsx(Er,{message:g===$r?aD:lD}):T.map(($,O)=>{const B=_($),M=z(B),{short:H,full:j,color:P}=R($.status),X=w($.marketId)||$.symbol||`m-${$.marketId}`;return h.jsxs("div",{className:`table-row ${O%2===0?"even":""}`,style:{gridTemplateColumns:o1},children:[h.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:h.jsx("span",{children:X})}),h.jsx("div",{className:"table-cell center",style:{color:M,fontWeight:500},children:B}),h.jsx("div",{className:"table-cell center",children:L($.type)}),h.jsx("div",{className:"table-cell right monospace",children:A($.quantity)}),h.jsx("div",{className:"table-cell right monospace",children:D($.price)}),h.jsxs("div",{className:"table-cell right monospace",children:[A($.filledQuantity)," /"," ",A($.quantity)]}),h.jsx("div",{className:"table-cell center",style:{color:P,fontWeight:600,cursor:"help",fontSize:"0.9rem"},title:j,children:H}),h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:g===$r?h.jsxs(h.Fragment,{children:[(!r||r.trim()==="")&&h.jsx("span",{style:{fontSize:"0.7rem",color:"#ffc107",cursor:"help"},title:"Mnemonic required to cancel orders",children:""}),h.jsx(eL,{onClick:se=>{se.preventDefault(),se.stopPropagation(),!r||r.trim()===""||m===$.orderId||!!m||F($)},disabled:!r||r.trim()===""||m===$.orderId||!!m})]}):h.jsx("span",{className:"color-text-dim",children:""})})]},`order-${$.orderId}`)})]})]})}const fL=oe.memo(hL);function pL({baseURL:t=xo,authToken:e,walletAddress:n,mnemonic:s,height:r=R6,refreshInterval:i=Fb,selectedBucketId:o=null}){const{positions:a,loading:l,error:c,isConnected:u,refresh:d}=u3({baseURL:t,authToken:e,walletAddress:n,refreshInterval:i}),f=k.useRef(null);k.useEffect(()=>{if(!s||!t){f.current=null;return}const E=new wl({baseURL:t,mnemonic:s});E.initialize().then(()=>{f.current=E}).catch(T=>{const N=T instanceof Error?T.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",T),Me.error("Exchange client initialization failed",{description:N,action:In(N)}),f.current=null})},[s,t]);const[p,m]=k.useState(zp),[x,w]=k.useState(null),[g,b]=k.useState(ga),v=k.useMemo(()=>{let E=[...a];return p===kd&&o&&(E=E.filter(T=>{var D;const N=(D=T.bucketId)==null?void 0:D.toString(),_=o.toString();return N===_})),x?E.sort((T,N)=>{let _=0,D=0;switch(x){case Uv:_=T.symbol||"",D=N.symbol||"";break;case Wv:try{_=T.leverage?fromSatoshi(T.leverage):0,D=N.leverage?fromSatoshi(N.leverage):0}catch{_=0,D=0}break;case Hv:_=T.size||0,D=N.size||0;break;case Vv:_=T.liquidationPrice||0,D=N.liquidationPrice||0;break;case Yv:_=T.unrealizedPnL||0,D=N.unrealizedPnL||0;break;case Gv:_=T.entryPrice||0,D=N.entryPrice||0;break;case qv:_=T.margin||0,D=N.margin||0;break}if(typeof _=="string"&&typeof D=="string")return g===ri?_.localeCompare(D):D.localeCompare(_);const A=Number(_),R=Number(D);return g===ri?A-R:R-A}):E},[a,x,g,o,p]),y=E=>{x===E?b(g===ri?ga:ri):(w(E),b(ga))},S=k.useRef(0),C=async E=>{if(!s){const N="Please provide the 'mnemonic' prop to enable position closing.";Me.error("Mnemonic required",{description:N,action:In(N)});return}if(!f.current){const N="Please wait for the exchange client to initialize.";Me.error("Exchange client not ready",{description:N,action:In(N)});return}const T=Me.loading("Closing position...",{description:`Closing ${E.side} position for ${E.symbol} (Size: ${of(E.size)})`});S.current=typeof T=="number"?T:0;try{const N=await f.current.closePosition({marketId:E.marketId,marketPrice:E.markPrice,quantity:E.size});S.current!==0&&(Me.dismiss(S.current),S.current=0),Me.success("Position closed successfully",{description:`${E.side} position for ${E.symbol} has been closed. tx: ${N.txId}`,duration:5e3}),d&&await d()}catch(N){S.current!==0&&(Me.dismiss(S.current),S.current=0);const _=N instanceof Error?N.message:"Unknown error occurred";Me.error("Failed to close position",{description:_,duration:6e3,action:In(_)}),console.error("Failed to close position:",N)}};return l?h.jsx(Sl,{message:K6}):c?h.jsx(Cl,{error:c}):h.jsxs("div",{className:"layout-container",style:{height:r},children:[h.jsxs(_l,{title:`${Q6} ${p===kd&&o?`(Bucket ${o})`:""}`,children:[h.jsx("div",{onClick:()=>{m(zp),w(null)},className:`btn-tab ${p===zp?"active":""}`,children:J6}),h.jsxs("div",{onClick:()=>{m(kd),w(null)},className:`btn-tab ${p===kd?"active":""}`,children:[h.jsx("img",{src:"/bucket-g.svg"}),h.jsx("span",{children:Z6})]}),!u&&h.jsxs("div",{onClick:async()=>{d&&await d()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh positions",children:[h.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),h.jsx("span",{children:"Refresh"})]})]}),h.jsxs("div",{className:"table-container",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:Kv},children:[h.jsx(Gt,{field:Uv,currentSortField:x,sortDirection:g,onSort:y,left:!0,children:"Symbol"}),h.jsx(Gt,{field:Wv,currentSortField:x,sortDirection:g,onSort:y,children:"Leverage"}),h.jsx(Gt,{field:Hv,currentSortField:x,sortDirection:g,onSort:y,children:"Size"}),h.jsx(Gt,{field:Vv,currentSortField:x,sortDirection:g,onSort:y,children:"Liq. Price"}),h.jsx(Gt,{field:Yv,currentSortField:x,sortDirection:g,onSort:y,children:"P/L"}),h.jsx(Gt,{field:Gv,currentSortField:x,sortDirection:g,onSort:y,children:"Entry Price"}),h.jsx(Gt,{field:qv,currentSortField:x,sortDirection:g,onSort:y,children:"Margin"}),h.jsx(qm,{center:!0,children:"Actions"})]}),v.length===0?h.jsx(Er,{message:X6}):v.map((E,T)=>{const N=E.side===hu,_=(E.unrealizedPnL||0)>=0?G6:q6,D=kD(E.leverage,Up);return h.jsxs("div",{className:`table-row ${T%2===0?"even":""}`,style:{gridTemplateColumns:Kv},children:[h.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:h.jsx("span",{children:E.symbol})}),h.jsxs("div",{className:"color-buy",style:{fontWeight:500},children:[N?hu:Lm," ",D===Up?Up:`${D}x`," ","@ ",E.marginMode||du]}),h.jsx("div",{className:"color-buy right monospace",children:of(E.size)}),h.jsx("div",{className:"table-cell right monospace",children:rf(E.liquidationPrice)}),h.jsx("div",{className:"table-cell right monospace",style:{color:_,fontWeight:500},children:yD(E.unrealizedPnL)}),h.jsx("div",{className:"table-cell right monospace",children:rf(E.entryPrice)}),h.jsx("div",{className:"table-cell right monospace",children:bD(E.margin)}),h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:h.jsx(tL,{onClick:()=>C(E)})})]},`position-${E.marketId}-${T}`)})]})]})}const gL=oe.memo(pL);function mL({isOpen:t,value:e,min:n,max:s,onConfirm:r,onCancel:i}){const[o,a]=k.useState("");if(k.useEffect(()=>{t&&a(e.toString())},[t,e]),!t)return null;const l=w=>{const g=o==="0"?w:o+w;parseFloat(g)<=s&&a(g)},c=()=>{o.includes(".")||a(o+".")},u=()=>{o.length>1?a(o.slice(0,-1)):a("0")},d=()=>{a("0")},f=()=>{const w=parseFloat(o)||0,g=Math.max(n,Math.min(s,w));r(g)},p=parseFloat(o)||0,m=p>=n&&p<=s,x=h.jsx("div",{className:"modal-overlay",onClick:i,style:{zIndex:1e4},children:h.jsxs("div",{className:"modal-content number-pad-content",onClick:w=>w.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Enter Amount"})}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{className:"number-pad-display",children:[h.jsx("div",{className:"number-pad-display-value",children:It(p)}),h.jsxs("div",{className:"number-pad-display-range",children:["Min: ",It(n)," | Max: ",It(s)]}),!m&&p>0&&h.jsxs("div",{className:"number-pad-display-error",children:["Value must be between ",It(n)," and"," ",It(s)]})]}),h.jsxs("div",{className:"number-pad-grid",children:[h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"1"),children:"1"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"2"),children:"2"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"3"),children:"3"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"4"),children:"4"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"5"),children:"5"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"6"),children:"6"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"7"),children:"7"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"8"),children:"8"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"9"),children:"9"}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:c,children:"."}),h.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"0"),children:"0"}),h.jsx("button",{type:"button",className:"number-pad-button number-pad-button-action",onClick:u,children:""})]}),h.jsxs("div",{className:"number-pad-actions",children:[h.jsx("button",{type:"button",className:"number-pad-action-button",onClick:d,children:"Clear"}),h.jsx("button",{type:"button",className:"number-pad-action-button number-pad-action-button-max",onClick:()=>{a(s.toString())},children:"Max"})]})]}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:i,className:"btn btn-secondary",children:"Cancel"}),h.jsx("button",{onClick:f,className:"btn btn-primary",disabled:!m,children:"Confirm"})]})]})});return typeof document<"u"?Pi.createPortal(x,document.body):null}function xL({isOpen:t,currentLeverage:e,tempLeverage:n,maxRatio:s,onLeverageChange:r,onConfirm:i,onCancel:o}){if(!t)return null;const a=h.jsx("div",{className:"modal-overlay",onClick:o,children:h.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Select Leverage"})}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{className:"leverage-max-ratio",children:[h.jsx("div",{className:"leverage-max-ratio-label",children:"Maximum Ratio"}),h.jsxs("div",{className:"leverage-max-ratio-value",children:[s,"x"]})]}),h.jsxs("div",{className:"leverage-slider-container",children:[h.jsx("input",{type:"range",min:jp,max:$v,value:n,onChange:l=>r(parseInt(l.target.value)),className:"filled-slider",style:{"--slider-progress":`${(n-jp)/($v-jp)*100}%`}}),h.jsxs("div",{className:"leverage-slider-labels",children:[h.jsx("span",{children:"1x"}),h.jsxs("span",{className:"leverage-current-value",children:[n,"x"]}),h.jsx("span",{children:"100x"})]})]})]}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),h.jsx("button",{onClick:i,className:"btn btn-primary",children:"Confirm"})]})]})});return typeof document<"u"?Pi.createPortal(a,document.body):null}function bL({isOpen:t,fromValue:e,toValue:n,options:s,bucketsData:r,transferAmount:i,createBucketAmount:o,onFromChange:a,onToChange:l,onTransferAmountChange:c,onCreateBucketAmountChange:u,onConfirm:d,onCancel:f,spotWalletBalance:p=0,activeTab:m,onActiveTabChange:x,isTransferring:w=!1,onOpen:g}){const[b,v]=k.useState("transfer"),y=m??b,S=x??v,C=k.useRef(!1),[E,T]=k.useState(!1),[N,_]=k.useState("transfer");k.useEffect(()=>{t&&!C.current&&g&&g(),C.current=t},[t,g]);const D=k.useMemo(()=>e==="spot-wallet"?null:r.find(M=>M.bucketId===e),[r,e]),A=k.useMemo(()=>e==="spot-wallet"?p:(D==null?void 0:D.nominalValue)||0,[e,p,D]),R=10,z=Math.max(R,A);if(oe.useEffect(()=>{if(e&&z>0){const M=y==="transfer"?i:o;M>z?y==="transfer"?c(z):u(z):M<R&&z>=R&&(y==="transfer"?c(R):u(R))}},[e,z,y,i,o,c,u]),!t)return null;const L=e&&n&&i>=R&&i<=z,F=e&&o>=R&&o<=z,$=h.jsx("div",{className:"modal-overlay",onClick:f,children:h.jsxs("div",{className:"modal-content transfer-modal-content",onClick:M=>M.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{children:"Transfer Funds"})}),h.jsxs("div",{className:"transfer-modal-tabs",children:[h.jsx("button",{className:`transfer-tab ${y==="transfer"?"active":""}`,onClick:()=>S("transfer"),type:"button",disabled:w,children:"Transfer"}),h.jsx("button",{className:`transfer-tab ${y==="create"?"active":""}`,onClick:()=>S("create"),type:"button",disabled:w,children:"Create Bucket"})]}),h.jsx("div",{className:"modal-body",children:y==="transfer"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"From"}),h.jsxs("select",{value:e,onChange:M=>a(M.target.value),className:"transfer-select",children:[h.jsx("option",{value:"",children:"Select source bucket"}),s.map(M=>h.jsx("option",{value:M.value,children:M.label},M.value))]})]}),h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"To"}),h.jsxs("select",{value:n,onChange:M=>l(M.target.value),className:"transfer-select",disabled:!e,children:[h.jsx("option",{value:"",children:"Select destination bucket"}),s.filter(M=>M.value!==e).map(M=>h.jsx("option",{value:M.value,children:M.label},M.value))]})]}),e&&z>=R?h.jsxs("div",{className:"transfer-field-group",children:[h.jsxs("div",{className:"transfer-amount-header",children:[h.jsx("label",{className:"transfer-field-label",children:"Amount"}),h.jsxs("div",{className:"transfer-available-balance",children:["Available: ",It(A)]})]}),h.jsx("div",{className:"transfer-amount-display",onClick:()=>{_("transfer"),T(!0)},style:{cursor:"pointer"},children:h.jsx("span",{className:"transfer-amount-value",children:It(i)})}),h.jsxs("div",{className:"transfer-amount-container",children:[h.jsx("input",{type:"range",min:R,max:z,step:.01,value:i,onChange:M=>c(parseFloat(M.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(i-R)/(z-R)*100}%`}}),h.jsxs("div",{className:"transfer-amount-labels",children:[h.jsx("span",{children:It(R)}),h.jsx("span",{children:It(z)})]})]})]}):e?h.jsx("div",{className:"transfer-field-group",children:h.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",It(R)]})}):null]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"transfer-field-group",children:[h.jsx("label",{className:"transfer-field-label",children:"From"}),h.jsxs("select",{value:e,onChange:M=>a(M.target.value),className:"transfer-select",children:[h.jsx("option",{value:"",children:"Select source bucket"}),s.map(M=>h.jsx("option",{value:M.value,children:M.label},M.value))]})]}),e&&z>=R?h.jsxs("div",{className:"transfer-field-group",children:[h.jsxs("div",{className:"transfer-amount-header",children:[h.jsx("label",{className:"transfer-field-label",children:"Amount"}),h.jsxs("div",{className:"transfer-available-balance",children:["Available: ",It(A)]})]}),h.jsx("div",{className:"transfer-amount-display",onClick:()=>{_("create"),T(!0)},style:{cursor:"pointer"},children:h.jsx("span",{className:"transfer-amount-value",children:It(o)})}),h.jsxs("div",{className:"transfer-amount-container",children:[h.jsx("input",{type:"range",min:R,max:z,step:.01,value:o,onChange:M=>u(parseFloat(M.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(o-R)/(z-R)*100}%`}}),h.jsxs("div",{className:"transfer-amount-labels",children:[h.jsx("span",{children:It(R)}),h.jsx("span",{children:It(z)})]})]})]}):e?h.jsx("div",{className:"transfer-field-group",children:h.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",It(R)]})}):null]})}),h.jsxs("div",{className:"modal-footer",children:[h.jsx("button",{onClick:f,className:"btn btn-secondary",disabled:w,children:"Cancel"}),h.jsx("button",{onClick:d,className:"btn btn-primary",disabled:w||(y==="transfer"?!L:!F),children:w?"Processing...":"Confirm"})]})]})}),O=N==="transfer"?i:o,B=M=>{N==="transfer"?c(M):u(M),T(!1)};return h.jsxs(h.Fragment,{children:[typeof document<"u"?Pi.createPortal($,document.body):null,h.jsx(mL,{isOpen:E,value:O,min:R,max:z,onConfirm:B,onCancel:()=>T(!1)})]})}function yL({baseURL:t=xo,wsURL:e=xo,authToken:n,walletAddress:s,mnemonic:r,height:i=A6,refreshInterval:o=Fb,onBucketSelect:a}){const{collections:l,loading:c,error:u,spotWalletBalance:d,isConnected:f,refresh:p}=C5({baseURL:t,wsURL:e,authToken:n,walletAddress:s,refreshInterval:o}),[m,x]=k.useState(null),[w,g]=k.useState("desc"),[b,v]=k.useState(""),[y,S]=k.useState(!1),[C,E]=k.useState(""),[T,N]=k.useState(""),[_,D]=k.useState(10),[A,R]=k.useState(10),[z,L]=k.useState("transfer"),[F,$]=k.useState(!1),O=k.useRef(null),B=k.useRef(0),M=k.useMemo(()=>{const G=l.filter(ee=>ee&&ee.bucketId&&typeof ee.bucketId=="string"&&ee.bucketId.trim()!=="");return m?[...G].sort((ee,he)=>{let Ae=0,Ce=0;switch(m){case"marginType":Ae=ee.marginType||"",Ce=he.marginType||"";break;case"maintenanceMargin":Ae=ee.maintenanceMargin||0,Ce=he.maintenanceMargin||0;break;case"nominalValue":Ae=ee.nominalValue||0,Ce=he.nominalValue||0;break;case"riskRatio":Ae=ee.riskRatio||0,Ce=he.riskRatio||0;break;case"bucketId":Ae=ee.bucketId||"",Ce=he.bucketId||"";break}if(typeof Ae=="string"&&typeof Ce=="string")return w==="asc"?Ae.localeCompare(Ce):Ce.localeCompare(Ae);const ve=Number(Ae),Fe=Number(Ce);return w==="asc"?ve-Fe:Fe-ve}):G},[l,m,w]),H=G=>{m===G?g(w==="asc"?"desc":"asc"):(x(G),g("desc"))},j=(G,ee)=>{a&&a(G,ee),v(G)},P=()=>{S(!0),E(""),N(""),D(10),R(10),L("transfer")},X=()=>{S(!1),E(""),N(""),D(10),R(10),L("transfer")};k.useEffect(()=>{if(!r||!t){O.current=null;return}const G=new wl({baseURL:t,mnemonic:r});G.initialize().then(()=>{O.current=G}).catch(ee=>{const he=ee instanceof Error?ee.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",ee),Me.error("Exchange client initialization failed",{description:he,action:In(he)}),O.current=null})},[r,t]);const se=async()=>{if(!r){const he="Mnemonic is required to perform transfers. Please provide a mnemonic to enable transfer functionality.";Me.error("Mnemonic required",{description:he,action:In(he)});return}const G=O.current;if(!G){const he="Exchange client is still initializing. Please wait a moment and try again.";Me.error("Exchange client not ready",{description:he,action:In(he)});return}$(!0);const ee=Me.loading("Processing transfer...",{description:"Please wait while the transfer is being processed"});B.current=typeof ee=="number"?ee:0;try{const he="USDC";let Ae,Ce="";const ve=ut(_);if(z==="transfer"){if(!C||!T)throw new Error("Please select both source and destination");if(C==="spot-wallet"&&T==="spot-wallet")throw new Error("Cannot transfer from spot wallet to spot wallet");C==="spot-wallet"?(Ae=await G.extractToBucket({bucketId:T,assetId:he,amount:ve}),Ce=`Successfully transferred ${It(_)} from Spot Wallet to ${T}`):T==="spot-wallet"?(Ae=await G.withdrawFromBucket({bucketId:C,assetId:he,amount:ve}),Ce=`Successfully transferred ${It(_)} from ${C} to Spot Wallet`):(Ae=await G.bucketTransfer({fromBucketId:C,toBucketId:T,assetId:he,amount:ve}),Ce=`Successfully transferred ${It(_)} from ${C} to ${T}`)}else throw C?C==="spot-wallet"?new Error("Create Bucket from spot wallet requires a target bucket ID. Please use the Transfer tab to extract funds to an existing bucket, or create the bucket first."):new Error("Create Bucket requires a target bucket ID. Please use the Transfer tab to transfer between buckets."):new Error("Please select a source");console.log("Transfer successful:",Ae),B.current!==0&&(Me.dismiss(B.current),B.current=0),Me.success("Transfer completed",{description:Ce}),p(),S(!1),E(""),N(""),D(10),R(10)}catch(he){B.current!==0&&(Me.dismiss(B.current),B.current=0);const Ae=he instanceof Error?he.message:"Transfer failed";Me.error("Transfer failed",{description:Ae,action:In(Ae)}),console.error("Transfer error:",he)}finally{$(!1)}},K=k.useMemo(()=>{const G=M.map(ee=>({value:ee.bucketId,label:`${ee.bucketId} (${It(ee.nominalValue)})`}));return[{value:"spot-wallet",label:`Spot Wallet (${It(d)})`},...G]},[M,d]),J=k.useMemo(()=>M.map(G=>({bucketId:G.bucketId,nominalValue:G.nominalValue})),[M]);return!s||s.trim()===""?h.jsx(y5,{message:"Wallet address required to view bucket collections"}):c?h.jsx(Sl,{message:"Loading bucket collections..."}):u?h.jsx(Cl,{error:u}):h.jsxs("div",{className:"layout-container",style:{height:i},children:[h.jsxs(_l,{title:"BUCKET COLLECTIONS",children:[h.jsxs("div",{onClick:P,className:"btn-tab",children:[h.jsx("img",{src:"/transfer-repu.svg"}),h.jsx("span",{children:"Transfer"})]}),!f&&h.jsxs("div",{onClick:async()=>{p&&await p()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh bucket collections",children:[h.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),h.jsx("span",{children:"Refresh"})]})]}),h.jsxs("div",{className:"table-container shrinkable",children:[h.jsxs("div",{className:"table-header",style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[h.jsx(Gt,{field:"bucketId",currentSortField:m,sortDirection:w,onSort:H,left:!0,children:"Bucket ID"}),h.jsx(Gt,{field:"marginType",currentSortField:m,sortDirection:w,onSort:H,children:"Margin Type"}),h.jsx(Gt,{field:"maintenanceMargin",currentSortField:m,sortDirection:w,onSort:H,children:"Maintenance Margin"}),h.jsx(Gt,{field:"nominalValue",currentSortField:m,sortDirection:w,onSort:H,children:"Balance"}),h.jsx(Gt,{field:"riskRatio",currentSortField:m,sortDirection:w,onSort:H,left:!1,children:"Risk Ratio"})]}),M.length===0?h.jsx(Er,{message:l.length===0?"No bucket collections found. Make sure your wallet address is correct and has buckets.":`Filtered out all ${l.length} collections (invalid data structure)`}):M.map((G,ee)=>h.jsxs("div",{onClick:()=>j(G.bucketId,G.nominalValue),className:`table-row clickable ${ee%2===0?"even":""} ${b===G.bucketId?"selected":""}`,style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[h.jsx("div",{className:"table-cell primary",children:G.bucketId||"---"}),h.jsx("div",{className:"table-cell",children:(G.marginType||"CROSS").toUpperCase()}),h.jsx("div",{className:"table-cell right monospace",children:It(G.maintenanceMargin||0)}),h.jsx("div",{className:"table-cell right monospace",children:It(G.nominalValue||0)}),h.jsx("div",{className:"table-cell right monospace",style:{color:(G.riskRatio||0)>.5?"#ff6b6b":"#51cf66",fontWeight:500},children:l3(G.riskRatio||0)})]},`collection-${G.bucketId}-${ee}`))]}),h.jsx(bL,{isOpen:y,fromValue:C,toValue:T,options:K,bucketsData:J,transferAmount:_,createBucketAmount:A,onFromChange:E,onToChange:N,onTransferAmountChange:D,onCreateBucketAmountChange:R,onConfirm:se,onCancel:X,spotWalletBalance:d,activeTab:z,onActiveTabChange:L,isTransferring:F,onOpen:p})]})}const wL=oe.memo(yL);function vL({baseURL:t=xo,selectedMarketId:e,authToken:n,height:s,onMarketSelect:r,favorites:i=[],onFavoriteToggle:o}){const{markets:a,tickers:l,selectedMarketId:c,setSelectedMarketId:u}=Ti({baseURL:t,autoFetchMarkets:!0}),[d,f]=k.useState(new Set(i)),[p,m]=k.useState("1H"),x=k.useRef(null),w=e||c||null,g=k.useMemo(()=>{const R=new Set(d);return i.forEach(z=>R.add(z)),R},[i,d]),b=k.useMemo(()=>a.map(R=>{var M,H;const z=((M=R.market_id)==null?void 0:M.toString())||((H=R.id)==null?void 0:H.toString())||"",L=l.get(z),F=R.moniker||R.symbol||(R.baseAsset&&R.quoteAsset?`${R.baseAsset}/${R.quoteAsset}`:"Unknown"),$=!R.active||!(L!=null&&L.lastPrice)||typeof L.lastPrice=="string"&&L.lastPrice==="0";let O=null;L!=null&&L.lastPrice&&(typeof L.lastPrice=="string"?O=parseFloat(L.lastPrice):O=L.lastPrice);let B=null;return L!=null&&L.priceChangePercent24h&&(typeof L.priceChangePercent24h=="string"?B=parseFloat(L.priceChangePercent24h):B=L.priceChangePercent24h),{marketId:z,symbol:F,price:O,priceChangePercent:B,isClosed:$,isFavorite:g.has(z)}}).filter(R=>R.marketId),[a,l,g]),v=k.useMemo(()=>w?a.find(R=>{var z,L;return((z=R.market_id)==null?void 0:z.toString())===w||((L=R.id)==null?void 0:L.toString())===w}):null,[a,w]),y=k.useMemo(()=>w?l.get(w):null,[l,w]),S=k.useMemo(()=>v?v.moniker||v.symbol||(v.baseAsset&&v.quoteAsset?`${v.baseAsset}/${v.quoteAsset}`:"Unknown"):"Select Market",[v]),C=k.useMemo(()=>{if(!v)return"";const R=v.baseAsset||"",z=v.quoteAsset||"";return R&&z?`${R} to ${z}`:v.moniker||v.symbol||""},[v]),E=k.useMemo(()=>y!=null&&y.lastPrice?typeof y.lastPrice=="string"?parseFloat(y.lastPrice):y.lastPrice:null,[y]),T=k.useMemo(()=>y!=null&&y.priceChangePercent24h?typeof y.priceChangePercent24h=="string"?parseFloat(y.priceChangePercent24h):y.priceChangePercent24h:null,[y]),N=R=>{r?r(R):u(R)},_=(R,z)=>{z.stopPropagation();const L=new Set(g);L.has(R)?L.delete(R):L.add(R),f(L),o&&o(R)},D=R=>{var F;const z=((F=R.split("/")[0])==null?void 0:F.toUpperCase())||"";return{BTC:"",ETH:"",EUR:"",USD:"$",USDC:"$",USDT:"$"}[z]||z.charAt(0)||"?"},A=R=>{if(R==null)return"0";const z=typeof R=="string"?parseFloat(R):R;return isNaN(z)?"0":z>=1e6?`${(z/1e6).toFixed(1)}M`:z>=1e3?`${(z/1e3).toFixed(1)}K`:z.toFixed(2)};return h.jsxs("div",{className:"ticker-bar-container",style:s?{height:s}:void 0,children:[h.jsx("div",{className:"ticker-bar-top",ref:x,children:h.jsx("div",{className:"ticker-bar-scroll",children:b.map((R,z)=>h.jsxs(oe.Fragment,{children:[h.jsxs("div",{className:`ticker-item ${R.marketId===w?"active":""}`,onClick:()=>N(R.marketId),children:[h.jsx("span",{className:"ticker-favorite-star",onClick:L=>_(R.marketId,L),style:{cursor:"pointer",opacity:R.isFavorite?1:.3},children:""}),h.jsx("span",{className:"ticker-asset-icon",children:D(R.symbol)}),h.jsx("span",{className:"ticker-symbol",children:R.symbol}),h.jsx("span",{className:"ticker-value",children:R.isClosed?h.jsx("span",{className:"ticker-closed",children:"CLOSED"}):R.price!==null?ma(R.price):"--"})]}),z<b.length-1&&h.jsx("div",{className:"ticker-separator"})]},R.marketId))})}),h.jsxs("div",{className:"ticker-bar-bottom",children:[h.jsxs("div",{className:"ticker-detail-left",children:[h.jsx("div",{className:"ticker-detail-icon-large",children:v?D(S):"?"}),h.jsxs("div",{className:"ticker-detail-symbol-group",children:[h.jsx("div",{className:"ticker-detail-symbol-row",children:h.jsx("span",{className:"ticker-detail-symbol",children:S})}),h.jsx("div",{className:"ticker-detail-description",children:C})]}),h.jsxs("div",{className:"ticker-detail-price-group",children:[h.jsx("div",{className:"ticker-detail-price",children:E!==null?ma(E):"--"}),T!==null&&h.jsxs("div",{className:`ticker-detail-change ${T>=0?"positive":"negative"}`,children:[T>=0?"+":"",l3(T/100)]})]})]}),h.jsxs("div",{className:"ticker-detail-metrics",children:[h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Oracle Price",children:"Oracle Price"}),h.jsx("span",{className:"ticker-metric-value",children:E!==null?ma(E):"--"})]}),h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Open Interest (Long)",children:"Open Interest (L)"}),h.jsx("span",{className:"ticker-metric-value",children:y!=null&&y.volume?`${A(y.volume)} / 20.0M USDC`:"--"})]}),h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Open Interest (Short)",children:"Open Interest (S)"}),h.jsx("span",{className:"ticker-metric-value",children:y!=null&&y.volume?`${A(y.volume)} / 20.0M USDC`:"--"})]}),h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Skew",children:"Skew"}),h.jsx("span",{className:"ticker-metric-value",children:"50%/50%"})]})]}),h.jsxs("div",{className:"ticker-detail-right",children:[h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Holding (Long)",children:"Holding (L)"}),h.jsx("span",{className:"ticker-metric-value positive",children:"0.0012%"})]}),h.jsxs("div",{className:"ticker-metric",children:[h.jsx("label",{className:"ticker-metric-label",title:"Holding (Short)",children:"Holding (S)"}),h.jsx("span",{className:"ticker-metric-value negative",children:"0.0021%"})]})]}),h.jsx("div",{className:"ticker-timeframe-selector",children:h.jsxs("select",{className:"ticker-timeframe-select",value:p,onChange:R=>m(R.target.value),children:[h.jsx("option",{value:"1H",children:"1H"}),h.jsx("option",{value:"4H",children:"4H"}),h.jsx("option",{value:"1D",children:"1D"}),h.jsx("option",{value:"1W",children:"1W"}),h.jsx("option",{value:"1M",children:"1M"})]})})]})]})}const kL=oe.memo(vL);function SL(t){var He;const[e,n]=k.useState("vertical"),[s,r]=k.useState(!0),[i,o]=k.useState(!1),[a,l]=k.useState("--"),[c,u]=k.useState(void 0),[d,f]=k.useState(!1),[p,m]=k.useState(10),[x,w]=k.useState("default"),g=k.useRef(null),b=k.useRef(null),v=k.useRef(!1),y=k.useRef(Bu),S=k.useRef(h0),C=k.useRef([]),E=y.current,T=S.current,N=k.useMemo(()=>Bc(x==="default"?Fc:z9),[x]),[_,D]=k.useState(()=>Bc(Fc));k.useEffect(()=>{D(N),C.current=N},[N]);const[A,R]=k.useState(()=>localStorage.getItem("authToken")||""),{markets:z,selectedMarketId:L,selectedMarketSymbol:F,setSelectedMarketId:$,loadingMarkets:O,getError:B}=Ti({baseURL:E,sessionToken:A,autoFetchMarkets:!0}),{mnemonic:M,walletAddress:H,authToken:j,setMnemonic:P}=vl();k.useEffect(()=>{M||P("legal winner thank year wave sausage worth useful legal winner thank yellow")},[M,P]),k.useEffect(()=>{C.current=_},[_]),k.useEffect(()=>{j&&(R(j),localStorage.setItem("authToken",j))},[j]);const X=k.useRef(!1);k.useEffect(()=>{A&&A.trim()!==""&&!X.current&&localStorage.getItem("authToken")!==A&&localStorage.setItem("authToken",A),X.current=!1},[A]),k.useEffect(()=>{const ue=te=>{te.key==="authToken"&&te.newValue&&(X.current=!0,R(te.newValue))};window.addEventListener("storage",ue);const Y=setInterval(()=>{const te=localStorage.getItem("authToken");R(V=>te&&te!==V?(X.current=!0,te):V)},5e3);return()=>{window.removeEventListener("storage",ue),clearInterval(Y)}},[]);const se=k.useMemo(()=>{var ue,Y,te,V;return z.length>0?((ue=z.find(q=>q.active))==null?void 0:ue.market_id)??z[0].market_id??((te=(Y=z.find(q=>q.active))==null?void 0:Y.id)==null?void 0:te.toString())??((V=z[0].id)==null?void 0:V.toString())??null:null},[z]),K=k.useCallback((ue,Y)=>{if(s)return;const te=C.current,V=ue;if(te.length!==V.length){v.current=!0,C.current=V,D(V);return}let q=!1;for(let be=0;be<te.length;be++){const Q=te[be],de=V[be];if(Q.x!==de.x||Q.y!==de.y||Q.w!==de.w||Q.h!==de.h||Q.i!==de.i){q=!0;break}}q&&(v.current=!0,C.current=V,D(V))},[s]),J=k.useCallback(()=>{n(ue=>ue==="horizontal"?"vertical":ue==="vertical"?null:"horizontal")},[]),G=k.useCallback(()=>{o(ue=>!ue)},[]);k.useEffect(()=>(i?document.body.classList.add("full-width-screen"):document.body.classList.remove("full-width-screen"),()=>{document.body.classList.remove("full-width-screen")}),[i]);const ee=k.useCallback(()=>{r(ue=>!ue),s&&(v.current=!1)},[s]),he=k.useCallback(()=>{g.current&&(v.current=!1,g.current.generateNewLayout())},[]),Ae=k.useCallback(async()=>{try{const Y=`[
${_.slice().sort((te,V)=>{const q=parseInt(te.i,10),be=parseInt(V.i,10);return q-be}).map(te=>`  [${te.x}, ${te.y}, ${te.w}, ${te.h}]`).join(`,
`)},
]`;await navigator.clipboard.writeText(Y),alert("Layout matrix copied to clipboard!")}catch(ue){console.error("Failed to copy layout matrix:",ue),alert("Failed to copy layout matrix to clipboard")}},[_]),Ce=k.useMemo(()=>_.map(function(ue){return h.jsxs("div",{className:"layoutItem",children:[h.jsx("b",{children:ue.i}),": [",ue.x,", ",ue.y,", ",ue.w,", ",ue.h,"]"]},ue.i)}),[_]),ve=L||"",Fe=30,ct=10,I=12,ce=k.useMemo(()=>{if(_.length===0)return{};const ue={};for(let Y=0;Y<=6;Y++){const te=_.find(V=>V.i===Y.toString());if(te){const V=te.h*Fe+(te.h-1)*ct,q=te.w/I*100;ue[Y]={width:`${q}%`,height:`${V}px`}}}return ue},[_]),me=k.useMemo(()=>{var ue,Y,te,V,q,be;return[h.jsx(J9,{symbol:"BINANCE:BTCUSDT",interval:"5",isCollapsed:!1},"tv"),h.jsx(oL,{baseURL:E,wsURL:T,marketId:ve,maxDepth:20,height:(ue=ce[1])==null?void 0:ue.height,authToken:A},`clobx-${ve}`),h.jsx(lL,{baseURL:E,wsURL:T,marketId:ve,symbol:F||void 0,authToken:A},`price-${ve}`),h.jsx(dL,{ref:b,baseURL:E,wsURL:T,marketId:ve,selectedBucketBalance:c,selectedBucketId:a,authToken:A,walletAddress:H,onLeverageClick:()=>{b.current&&m(b.current.leverage),f(!0)}},`trade-${ve}`),h.jsx(fL,{baseURL:E,wsURL:T,authToken:A,walletAddress:H,mnemonic:M,height:(Y=ce[4])==null?void 0:Y.height,refreshInterval:5e3},`order-${ve}`),h.jsx(gL,{baseURL:E,authToken:A,walletAddress:H,mnemonic:M,height:(te=ce[5])==null?void 0:te.height,refreshInterval:5e3,selectedBucketId:a},`pos-${ve}`),h.jsx(wL,{baseURL:E,wsURL:T,mnemonic:M,authToken:A,walletAddress:H,height:(V=ce[6])==null?void 0:V.height,refreshInterval:5e3,onBucketSelect:(Q,de)=>{l(Q),u(de)}},`bucket-${ve}`),h.jsx(sL,{baseURL:E,wsURL:T,marketId:ve,maxDepth:20,height:(q=ce[7])==null?void 0:q.height,authToken:A},`clobclassic-${ve}`),h.jsx(kL,{baseURL:E,selectedMarketId:ve,height:(be=ce[8])==null?void 0:be.height,authToken:A},`ticker-${ve}`)]},[E,T,A,H,ve,F,ce,a,c]);if(O)return h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:h.jsx("div",{children:"Loading markets..."})});const Ne=B("markets");return Ne?h.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:h.jsxs("div",{children:["Error loading markets: ",Ne]})}):z.length===0||!L?h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:h.jsx("div",{children:"No markets available."})}):h.jsxs("div",{children:[h.jsxs("div",{className:"App-section",children:[h.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem"},children:"Configuration"}),h.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Market:"}),h.jsx("select",{value:L||"",onChange:ue=>{const Y=ue.target.value;Y&&$(Y)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:z.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),z.map(ue=>{var q;const Y=ue.market_id??((q=ue.id)==null?void 0:q.toString())??"",te=ue.moniker?ue.moniker:ue.symbol?ue.symbol:ue.baseAsset&&ue.quoteAsset?`${ue.baseAsset}-${ue.quoteAsset}`:`Market ID: ${Y}`,V=ue.active?" [ACTIVE]":"";return h.jsxs("option",{value:Y,children:[te," - ID: ",Y,V]},Y)})]})}),z.length>0&&h.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:L===se?"#51cf66":"#ff9f43"},children:L===se?` Auto-selected default market (ID: ${se==null?void 0:se.substring(0,16)}...)`:` Manual selection (ID: ${L==null?void 0:L.substring(0,16)}...)`})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Mnemonic (for wallet address):"}),h.jsx("input",{type:"text",value:M||"",onChange:ue=>P(ue.target.value),placeholder:"Enter mnemonic to generate wallet address",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:"white",color:"#333"}})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Wallet Address:"}),h.jsx("input",{type:"text",value:H||"",disabled:!!(M&&M.trim()!==""),placeholder:"automatic (from mnemonic via useOnboard)",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:H?"#e7f3ff":"#f5f5f5",color:"#333"}}),H&&h.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#28a745"},children:" Auto-generated from mnemonic via useOnboard hook"})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Layout Type:"}),h.jsxs("select",{value:x,onChange:ue=>{const Y=ue.target.value;w(Y)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:[h.jsx("option",{value:"default",children:"Default Predefined Layouts"}),h.jsx("option",{value:"widthfit",children:"Width Fit"})]})]})]}),h.jsx("h3",{children:"Layout Controls"}),h.jsx("button",{onClick:he,style:{marginRight:"0.5rem"},children:"Generate New Layout"}),h.jsx("button",{onClick:ee,style:{marginRight:"0.5rem"},children:s?"Enable Dragging":"Disable Dragging"}),h.jsx("button",{onClick:J,style:{marginRight:"0.5rem"},children:"Change Compaction Type"}),h.jsx("button",{onClick:G,children:"Full Width Screen"}),h.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9em",color:"#fff"},children:["Compaction type:"," ",e?e.charAt(0).toUpperCase()+e.slice(1):"No Compaction"]})]}),h.jsx(Gm,{ref:g,onLayoutChange:K,slotContent:me,compactType:e,allStatic:s,onCompactTypeChange:J,onToggleStatic:ee,onNewLayout:he,initialLayout:N},x),h.jsxs("div",{className:"overview-layout layoutJSON",children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[h.jsxs("span",{children:["Displayed as ",h.jsx("code",{children:"[x, y, w, h]"}),":"]}),h.jsx("button",{onClick:Ae,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"4px",border:"1px solid #313131",backgroundColor:"#ccc",color:"black",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:ue=>{ue.currentTarget.style.color="white",ue.currentTarget.style.backgroundColor="#0056b3"},onMouseOut:ue=>{ue.currentTarget.style.color="black",ue.currentTarget.style.backgroundColor="#ccc"},children:"Copy"})]}),h.jsx("div",{className:"columns",children:Ce})]}),h.jsx(xL,{isOpen:d,currentLeverage:((He=b.current)==null?void 0:He.leverage)||10,tempLeverage:p,maxRatio:b.current?b.current.calculateMaxRatio(p):p.toFixed(2),onLeverageChange:m,onConfirm:()=>{b.current&&b.current.setLeverage(p),f(!1)},onCancel:()=>{b.current&&m(b.current.leverage),f(!1)}})]})}function Bo({data:t,maxVisible:e=10,maxDataPoints:n=100,height:s=400,width:r=1080,rowWidth:i=280,onItemClick:o,getValue:a,color:l="#2196F3"}){const c=k.useRef(null),u=k.useRef(null),d=k.useRef(0),[f,p]=k.useState(!1),[m,x]=k.useState(0),w=20,g=800,b=k.useMemo(()=>!t||t.length===0?[]:t.length<=n?t:t.slice(-n),[t,n]),v=y=>{const S=[];if(y.timestamp!==void 0&&S.push({label:"Time",value:new Date(y.timestamp).toLocaleTimeString()}),y.market_id!==void 0&&S.push({label:"Market",value:String(y.market_id)}),y.symbol!==void 0&&S.push({label:"Symbol",value:String(y.symbol)}),y.open!==void 0){const C=Number(y.open);S.push({label:"Open",value:isNaN(C)?String(y.open):C.toFixed(4)})}if(y.close!==void 0){const C=Number(y.close);S.push({label:"Close",value:isNaN(C)?String(y.close):C.toFixed(4)})}if(y.high!==void 0){const C=Number(y.high);S.push({label:"High",value:isNaN(C)?String(y.high):C.toFixed(4)})}if(y.low!==void 0){const C=Number(y.low);S.push({label:"Low",value:isNaN(C)?String(y.low):C.toFixed(4)})}if(y.volume!==void 0){const C=Number(y.volume);S.push({label:"Volume",value:isNaN(C)?String(y.volume):C.toFixed(2)})}if(y.price!==void 0){const C=Number(y.price);S.push({label:"Price",value:isNaN(C)?String(y.price):C.toFixed(4)})}if(y.mark_price!==void 0){const C=Number(y.mark_price);S.push({label:"Mark Price",value:isNaN(C)?String(y.mark_price):C.toFixed(4)})}if(y.last_price!==void 0){const C=Number(y.last_price);S.push({label:"Last Price",value:isNaN(C)?String(y.last_price):C.toFixed(4)})}if(y.size!==void 0){const C=Number(y.size);S.push({label:"Size",value:isNaN(C)?String(y.size):C.toFixed(4)})}if(y.entryPrice!==void 0){const C=Number(y.entryPrice);S.push({label:"Entry",value:isNaN(C)?String(y.entryPrice):C.toFixed(4)})}if(y.unrealizedPnL!==void 0){const C=Number(y.unrealizedPnL);S.push({label:"PnL",value:isNaN(C)?String(y.unrealizedPnL):C.toFixed(4)})}if(y.orderId!==void 0&&S.push({label:"Order ID",value:String(y.orderId)}),y.status!==void 0&&S.push({label:"Status",value:String(y.status)}),y.bucketId!==void 0&&S.push({label:"Bucket ID",value:String(y.bucketId)}),y.maxLeverage!==void 0&&S.push({label:"Max Lev",value:String(y.maxLeverage)}),y.value!==void 0&&S.length===0){const C=Number(y.value);S.push({label:"Value",value:isNaN(C)?String(y.value):C.toFixed(4)})}return S.length===0&&S.push({label:"Data",value:"Click to view"}),S.slice(0,6)};return k.useEffect(()=>{if(!u.current||!c.current)return;const y=b.length;if(y===0){x(0),d.current=0;return}const E=c.current.offsetWidth-20*2,T=y*i+(y-1)*w;if(T>E){const _=T-E;x(-_)}else x(0);const N=b.length>d.current;d.current=b.length,N&&u.current&&requestAnimationFrame(()=>{u.current&&u.current.offsetWidth})},[b.length,i,w,r]),k.useEffect(()=>{u.current&&(u.current.style.transition=f?"none":`transform ${g}ms ease-out`,u.current.style.transform=`translateX(${m}px)`)},[m,f,g]),h.jsxs("div",{ref:c,className:"data-flow-container",style:{width:`${r}px`,height:`${s}px`},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[h.jsx("div",{ref:u,className:"data-flow-rows-wrapper",style:{gap:`${w}px`},children:b.map((y,S)=>{const C=v(y),E=S;return h.jsxs("div",{className:"data-flow-row",onClick:()=>{o&&o(y)},style:{width:`${i}px`,background:l},children:[h.jsx("div",{className:"data-flow-row-header",children:y.timestamp?new Date(y.timestamp).toLocaleTimeString():`#${E+1}`}),h.jsx("div",{className:"data-flow-row-fields",children:C.map((T,N)=>h.jsxs("div",{className:"data-flow-field",children:[h.jsxs("span",{className:"data-flow-field-label",children:[T.label,":"]}),h.jsx("span",{className:"data-flow-field-value",children:T.value})]},N))}),h.jsx("div",{className:"data-flow-row-footer",children:"Click to view details"})]},`${E}-${y.timestamp||Date.now()}-${y.id||JSON.stringify(y)}`)})}),f&&h.jsx("div",{className:"data-flow-paused-indicator",children:"Paused"})]})}function CL({data:t,isOpen:e,onClose:n,title:s="Data Details"}){return k.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),k.useEffect(()=>{const r=i=>{i.key==="Escape"&&e&&n()};return e&&window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[e,n]),e?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"data-modal-overlay",onClick:n}),h.jsxs("div",{className:"data-modal",onClick:r=>r.stopPropagation(),children:[h.jsx("h3",{className:"data-modal-title",children:s}),h.jsx("pre",{className:"data-modal-content",children:JSON.stringify(t,null,2)}),h.jsx("button",{className:"data-modal-close-button",onClick:n,children:"Close"})]})]}):null}function yh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _L(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function E5(t){let e,n,s;t.length!==2?(e=yh,n=(a,l)=>yh(t(a),l),s=(a,l)=>t(a)-l):(e=t===yh||t===_L?t:EL,n=t,s=t);function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=r(a,l,c,u-1);return d>c&&s(a[d-1],l)>-s(a[d],l)?d-1:d}return{left:r,center:o,right:i}}function EL(){return 0}function PL(t){return t===null?NaN:+t}const TL=E5(yh),ML=TL.right;E5(PL).center;class kk extends Map{constructor(e,n=DL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[s,r]of e)this.set(s,r)}get(e){return super.get(Sk(this,e))}has(e){return super.has(Sk(this,e))}set(e,n){return super.set(IL(this,e),n)}delete(e){return super.delete(NL(this,e))}}function Sk({_intern:t,_key:e},n){const s=e(n);return t.has(s)?t.get(s):n}function IL({_intern:t,_key:e},n){const s=e(n);return t.has(s)?t.get(s):(t.set(s,n),n)}function NL({_intern:t,_key:e},n){const s=e(n);return t.has(s)&&(n=t.get(s),t.delete(s)),n}function DL(t){return t!==null&&typeof t=="object"?t.valueOf():t}const AL=Math.sqrt(50),RL=Math.sqrt(10),OL=Math.sqrt(2);function gf(t,e,n){const s=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(s)),i=s/Math.pow(10,r),o=i>=AL?10:i>=RL?5:i>=OL?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?gf(t,e,n*2):[a,l,c]}function LL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const s=e<t,[r,i,o]=s?gf(e,t,n):gf(t,e,n);if(!(i>=r))return[];const a=i-r+1,l=new Array(a);if(s)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Km(t,e,n){return e=+e,t=+t,n=+n,gf(t,e,n)[2]}function jL(t,e,n){e=+e,t=+t,n=+n;const s=e<t,r=s?Km(e,t,n):Km(t,e,n);return(s?-1:1)*(r<0?1/-r:r)}function FL(t,e){let n;if(e===void 0)for(const s of t)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);else{let s=-1;for(let r of t)(r=e(r,++s,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function BL(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var s=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(r);++s<r;)i[s]=t+s*n;return i}function $L(t){return t}var gg=1,mg=2,Xm=3,hc=4,Ck=1e-6;function zL(t){return"translate("+t+",0)"}function UL(t){return"translate(0,"+t+")"}function WL(t){return e=>+t(e)}function HL(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function VL(){return!this.__axis}function P5(t,e){var n=[],s=null,r=null,i=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===gg||t===hc?-1:1,u=t===hc||t===mg?"x":"y",d=t===gg||t===Xm?zL:UL;function f(p){var m=s??(e.ticks?e.ticks.apply(e,n):e.domain()),x=r??(e.tickFormat?e.tickFormat.apply(e,n):$L),w=Math.max(i,0)+a,g=e.range(),b=+g[0]+l,v=+g[g.length-1]+l,y=(e.bandwidth?HL:WL)(e.copy(),l),S=p.selection?p.selection():p,C=S.selectAll(".domain").data([null]),E=S.selectAll(".tick").data(m,e).order(),T=E.exit(),N=E.enter().append("g").attr("class","tick"),_=E.select("line"),D=E.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(N),_=_.merge(N.append("line").attr("stroke","currentColor").attr(u+"2",c*i)),D=D.merge(N.append("text").attr("fill","currentColor").attr(u,c*w).attr("dy",t===gg?"0em":t===Xm?"0.71em":"0.32em")),p!==S&&(C=C.transition(p),E=E.transition(p),_=_.transition(p),D=D.transition(p),T=T.transition(p).attr("opacity",Ck).attr("transform",function(A){return isFinite(A=y(A))?d(A+l):this.getAttribute("transform")}),N.attr("opacity",Ck).attr("transform",function(A){var R=this.parentNode.__axis;return d((R&&isFinite(R=R(A))?R:y(A))+l)})),T.remove(),C.attr("d",t===hc||t===mg?o?"M"+c*o+","+b+"H"+l+"V"+v+"H"+c*o:"M"+l+","+b+"V"+v:o?"M"+b+","+c*o+"V"+l+"H"+v+"V"+c*o:"M"+b+","+l+"H"+v),E.attr("opacity",1).attr("transform",function(A){return d(y(A)+l)}),_.attr(u+"2",c*i),D.attr(u,c*w).text(x),S.filter(VL).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===mg?"start":t===hc?"end":"middle"),S.each(function(){this.__axis=y})}return f.scale=function(p){return arguments.length?(e=p,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),f):n.slice()},f.tickValues=function(p){return arguments.length?(s=p==null?null:Array.from(p),f):s&&s.slice()},f.tickFormat=function(p){return arguments.length?(r=p,f):r},f.tickSize=function(p){return arguments.length?(i=o=+p,f):i},f.tickSizeInner=function(p){return arguments.length?(i=+p,f):i},f.tickSizeOuter=function(p){return arguments.length?(o=+p,f):o},f.tickPadding=function(p){return arguments.length?(a=+p,f):a},f.offset=function(p){return arguments.length?(l=+p,f):l},f}function _k(t){return P5(Xm,t)}function YL(t){return P5(hc,t)}var GL={value:()=>{}};function T5(){for(var t=0,e=arguments.length,n={},s;t<e;++t){if(!(s=arguments[t]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new wh(n)}function wh(t){this._=t}function qL(t,e){return t.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}wh.prototype=T5.prototype={constructor:wh,on:function(t,e){var n=this._,s=qL(t+"",n),r,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((r=(t=s[i]).type)&&(r=KL(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(r=(t=s[i]).type)n[r]=Ek(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Ek(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new wh(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,i;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],s=0,r=i.length;s<r;++s)i[s].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)}};function KL(t,e){for(var n=0,s=t.length,r;n<s;++n)if((r=t[n]).name===e)return r.value}function Ek(t,e,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===e){t[s]=GL,t=t.slice(0,s).concat(t.slice(s+1));break}return n!=null&&t.push({name:e,value:n}),t}var Qm="http://www.w3.org/1999/xhtml";const Pk={svg:"http://www.w3.org/2000/svg",xhtml:Qm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function I0(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pk.hasOwnProperty(e)?{space:Pk[e],local:t}:t}function XL(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Qm&&e.documentElement.namespaceURI===Qm?e.createElement(t):e.createElementNS(n,t)}}function QL(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function M5(t){var e=I0(t);return(e.local?QL:XL)(e)}function JL(){}function ay(t){return t==null?JL:function(){return this.querySelector(t)}}function ZL(t){typeof t!="function"&&(t=ay(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=t.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Sn(s,this._parents)}function I5(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ej(){return[]}function N5(t){return t==null?ej:function(){return this.querySelectorAll(t)}}function tj(t){return function(){return I5(t.apply(this,arguments))}}function nj(t){typeof t=="function"?t=tj(t):t=N5(t);for(var e=this._groups,n=e.length,s=[],r=[],i=0;i<n;++i)for(var o=e[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(s.push(t.call(l,l.__data__,c,o)),r.push(l));return new Sn(s,r)}function D5(t){return function(){return this.matches(t)}}function A5(t){return function(e){return e.matches(t)}}var sj=Array.prototype.find;function rj(t){return function(){return sj.call(this.children,t)}}function ij(){return this.firstElementChild}function oj(t){return this.select(t==null?ij:rj(typeof t=="function"?t:A5(t)))}var aj=Array.prototype.filter;function lj(){return Array.from(this.children)}function cj(t){return function(){return aj.call(this.children,t)}}function uj(t){return this.selectAll(t==null?lj:cj(typeof t=="function"?t:A5(t)))}function dj(t){typeof t!="function"&&(t=D5(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=[],l,c=0;c<o;++c)(l=i[c])&&t.call(l,l.__data__,c,i)&&a.push(l);return new Sn(s,this._parents)}function R5(t){return new Array(t.length)}function hj(){return new Sn(this._enter||this._groups.map(R5),this._parents)}function mf(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}mf.prototype={constructor:mf,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function fj(t){return function(){return t}}function pj(t,e,n,s,r,i){for(var o=0,a,l=e.length,c=i.length;o<c;++o)(a=e[o])?(a.__data__=i[o],s[o]=a):n[o]=new mf(t,i[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function gj(t,e,n,s,r,i,o){var a,l,c=new Map,u=e.length,d=i.length,f=new Array(u),p;for(a=0;a<u;++a)(l=e[a])&&(f[a]=p=o.call(l,l.__data__,a,e)+"",c.has(p)?r[a]=l:c.set(p,l));for(a=0;a<d;++a)p=o.call(t,i[a],a,i)+"",(l=c.get(p))?(s[a]=l,l.__data__=i[a],c.delete(p)):n[a]=new mf(t,i[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(f[a])===l&&(r[a]=l)}function mj(t){return t.__data__}function xj(t,e){if(!arguments.length)return Array.from(this,mj);var n=e?gj:pj,s=this._parents,r=this._groups;typeof t!="function"&&(t=fj(t));for(var i=r.length,o=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=s[c],d=r[c],f=d.length,p=bj(t.call(u,u&&u.__data__,c,s)),m=p.length,x=a[c]=new Array(m),w=o[c]=new Array(m),g=l[c]=new Array(f);n(u,d,x,w,g,p,e);for(var b=0,v=0,y,S;b<m;++b)if(y=x[b]){for(b>=v&&(v=b+1);!(S=w[v])&&++v<m;);y._next=S||null}}return o=new Sn(o,s),o._enter=a,o._exit=l,o}function bj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yj(){return new Sn(this._exit||this._groups.map(R5),this._parents)}function wj(t,e,n){var s=this.enter(),r=this,i=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?i.remove():n(i),s&&r?s.merge(r).order():r}function vj(t){for(var e=t.selection?t.selection():t,n=this._groups,s=e._groups,r=n.length,i=s.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=s[l],d=c.length,f=a[l]=new Array(d),p,m=0;m<d;++m)(p=c[m]||u[m])&&(f[m]=p);for(;l<r;++l)a[l]=n[l];return new Sn(a,this._parents)}function kj(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s=t[e],r=s.length-1,i=s[r],o;--r>=0;)(o=s[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function Sj(t){t||(t=Cj);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,s=n.length,r=new Array(s),i=0;i<s;++i){for(var o=n[i],a=o.length,l=r[i]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new Sn(r,this._parents).order()}function Cj(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _j(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ej(){return Array.from(this)}function Pj(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length;r<i;++r){var o=s[r];if(o)return o}return null}function Tj(){let t=0;for(const e of this)++t;return t}function Mj(){return!this.node()}function Ij(t){for(var e=this._groups,n=0,s=e.length;n<s;++n)for(var r=e[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&t.call(a,a.__data__,i,r);return this}function Nj(t){return function(){this.removeAttribute(t)}}function Dj(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Aj(t,e){return function(){this.setAttribute(t,e)}}function Rj(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Oj(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Lj(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function jj(t,e){var n=I0(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((e==null?n.local?Dj:Nj:typeof e=="function"?n.local?Lj:Oj:n.local?Rj:Aj)(n,e))}function O5(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Fj(t){return function(){this.style.removeProperty(t)}}function Bj(t,e,n){return function(){this.style.setProperty(t,e,n)}}function $j(t,e,n){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function zj(t,e,n){return arguments.length>1?this.each((e==null?Fj:typeof e=="function"?$j:Bj)(t,e,n??"")):il(this.node(),t)}function il(t,e){return t.style.getPropertyValue(e)||O5(t).getComputedStyle(t,null).getPropertyValue(e)}function Uj(t){return function(){delete this[t]}}function Wj(t,e){return function(){this[t]=e}}function Hj(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Vj(t,e){return arguments.length>1?this.each((e==null?Uj:typeof e=="function"?Hj:Wj)(t,e)):this.node()[t]}function L5(t){return t.trim().split(/^|\s+/)}function ly(t){return t.classList||new j5(t)}function j5(t){this._node=t,this._names=L5(t.getAttribute("class")||"")}j5.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function F5(t,e){for(var n=ly(t),s=-1,r=e.length;++s<r;)n.add(e[s])}function B5(t,e){for(var n=ly(t),s=-1,r=e.length;++s<r;)n.remove(e[s])}function Yj(t){return function(){F5(this,t)}}function Gj(t){return function(){B5(this,t)}}function qj(t,e){return function(){(e.apply(this,arguments)?F5:B5)(this,t)}}function Kj(t,e){var n=L5(t+"");if(arguments.length<2){for(var s=ly(this.node()),r=-1,i=n.length;++r<i;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?qj:e?Yj:Gj)(n,e))}function Xj(){this.textContent=""}function Qj(t){return function(){this.textContent=t}}function Jj(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Zj(t){return arguments.length?this.each(t==null?Xj:(typeof t=="function"?Jj:Qj)(t)):this.node().textContent}function eF(){this.innerHTML=""}function tF(t){return function(){this.innerHTML=t}}function nF(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function sF(t){return arguments.length?this.each(t==null?eF:(typeof t=="function"?nF:tF)(t)):this.node().innerHTML}function rF(){this.nextSibling&&this.parentNode.appendChild(this)}function iF(){return this.each(rF)}function oF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aF(){return this.each(oF)}function lF(t){var e=typeof t=="function"?t:M5(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cF(){return null}function uF(t,e){var n=typeof t=="function"?t:M5(t),s=e==null?cF:typeof e=="function"?e:ay(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function dF(){var t=this.parentNode;t&&t.removeChild(this)}function hF(){return this.each(dF)}function fF(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pF(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gF(t){return this.select(t?pF:fF)}function mF(t){return arguments.length?this.property("__data__",t):this.node().__data__}function xF(t){return function(e){t.call(this,e,this.__data__)}}function bF(t){return t.trim().split(/^|\s+/).map(function(e){var n="",s=e.indexOf(".");return s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),{type:e,name:n}})}function yF(t){return function(){var e=this.__on;if(e){for(var n=0,s=-1,r=e.length,i;n<r;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++s]=i;++s?e.length=s:delete this.__on}}}function wF(t,e,n){return function(){var s=this.__on,r,i=xF(e);if(s){for(var o=0,a=s.length;o<a;++o)if((r=s[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=e;return}}this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},s?s.push(r):this.__on=[r]}}function vF(t,e,n){var s=bF(t+""),r,i=s.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<i;++r)if((o=s[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?wF:yF,r=0;r<i;++r)this.each(a(s[r],e,n));return this}function $5(t,e,n){var s=O5(t),r=s.CustomEvent;typeof r=="function"?r=new r(e,n):(r=s.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function kF(t,e){return function(){return $5(this,t,e)}}function SF(t,e){return function(){return $5(this,t,e.apply(this,arguments))}}function CF(t,e){return this.each((typeof e=="function"?SF:kF)(t,e))}function*_F(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length,o;r<i;++r)(o=s[r])&&(yield o)}var cy=[null];function Sn(t,e){this._groups=t,this._parents=e}function Hu(){return new Sn([[document.documentElement]],cy)}function EF(){return this}Sn.prototype=Hu.prototype={constructor:Sn,select:ZL,selectAll:nj,selectChild:oj,selectChildren:uj,filter:dj,data:xj,enter:hj,exit:yj,join:wj,merge:vj,selection:EF,order:kj,sort:Sj,call:_j,nodes:Ej,node:Pj,size:Tj,empty:Mj,each:Ij,attr:jj,style:zj,property:Vj,classed:Kj,text:Zj,html:sF,raise:iF,lower:aF,append:lF,insert:uF,remove:hF,clone:gF,datum:mF,on:vF,dispatch:CF,[Symbol.iterator]:_F};function Rd(t){return typeof t=="string"?new Sn([[document.querySelector(t)]],[document.documentElement]):new Sn([[t]],cy)}function PF(t){let e;for(;e=t.sourceEvent;)t=e;return t}function TF(t,e){if(t=PF(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function MF(t){return typeof t=="string"?new Sn([document.querySelectorAll(t)],[document.documentElement]):new Sn([I5(t)],cy)}function uy(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function z5(t,e){var n=Object.create(t.prototype);for(var s in e)n[s]=e[s];return n}function Vu(){}var gu=.7,xf=1/gu,ba="\\s*([+-]?\\d+)\\s*",mu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",IF=/^#([0-9a-f]{3,8})$/,NF=new RegExp(`^rgb\\(${ba},${ba},${ba}\\)$`),DF=new RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),AF=new RegExp(`^rgba\\(${ba},${ba},${ba},${mu}\\)$`),RF=new RegExp(`^rgba\\(${tr},${tr},${tr},${mu}\\)$`),OF=new RegExp(`^hsl\\(${mu},${tr},${tr}\\)$`),LF=new RegExp(`^hsla\\(${mu},${tr},${tr},${mu}\\)$`),Tk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uy(Vu,vo,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Mk,formatHex:Mk,formatHex8:jF,formatHsl:FF,formatRgb:Ik,toString:Ik});function Mk(){return this.rgb().formatHex()}function jF(){return this.rgb().formatHex8()}function FF(){return U5(this).formatHsl()}function Ik(){return this.rgb().formatRgb()}function vo(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=IF.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Nk(e):n===3?new An(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Od(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Od(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=NF.exec(t))?new An(e[1],e[2],e[3],1):(e=DF.exec(t))?new An(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=AF.exec(t))?Od(e[1],e[2],e[3],e[4]):(e=RF.exec(t))?Od(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=OF.exec(t))?Rk(e[1],e[2]/100,e[3]/100,1):(e=LF.exec(t))?Rk(e[1],e[2]/100,e[3]/100,e[4]):Tk.hasOwnProperty(t)?Nk(Tk[t]):t==="transparent"?new An(NaN,NaN,NaN,0):null}function Nk(t){return new An(t>>16&255,t>>8&255,t&255,1)}function Od(t,e,n,s){return s<=0&&(t=e=n=NaN),new An(t,e,n,s)}function BF(t){return t instanceof Vu||(t=vo(t)),t?(t=t.rgb(),new An(t.r,t.g,t.b,t.opacity)):new An}function Jm(t,e,n,s){return arguments.length===1?BF(t):new An(t,e,n,s??1)}function An(t,e,n,s){this.r=+t,this.g=+e,this.b=+n,this.opacity=+s}uy(An,Jm,z5(Vu,{brighter(t){return t=t==null?xf:Math.pow(xf,t),new An(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gu:Math.pow(gu,t),new An(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new An(ao(this.r),ao(this.g),ao(this.b),bf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dk,formatHex:Dk,formatHex8:$F,formatRgb:Ak,toString:Ak}));function Dk(){return`#${Xi(this.r)}${Xi(this.g)}${Xi(this.b)}`}function $F(){return`#${Xi(this.r)}${Xi(this.g)}${Xi(this.b)}${Xi((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ak(){const t=bf(this.opacity);return`${t===1?"rgb(":"rgba("}${ao(this.r)}, ${ao(this.g)}, ${ao(this.b)}${t===1?")":`, ${t})`}`}function bf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ao(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xi(t){return t=ao(t),(t<16?"0":"")+t.toString(16)}function Rk(t,e,n,s){return s<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ts(t,e,n,s)}function U5(t){if(t instanceof Ts)return new Ts(t.h,t.s,t.l,t.opacity);if(t instanceof Vu||(t=vo(t)),!t)return new Ts;if(t instanceof Ts)return t;t=t.rgb();var e=t.r/255,n=t.g/255,s=t.b/255,r=Math.min(e,n,s),i=Math.max(e,n,s),o=NaN,a=i-r,l=(i+r)/2;return a?(e===i?o=(n-s)/a+(n<s)*6:n===i?o=(s-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+r:2-i-r,o*=60):a=l>0&&l<1?0:o,new Ts(o,a,l,t.opacity)}function zF(t,e,n,s){return arguments.length===1?U5(t):new Ts(t,e,n,s??1)}function Ts(t,e,n,s){this.h=+t,this.s=+e,this.l=+n,this.opacity=+s}uy(Ts,zF,z5(Vu,{brighter(t){return t=t==null?xf:Math.pow(xf,t),new Ts(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gu:Math.pow(gu,t),new Ts(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*e,r=2*n-s;return new An(xg(t>=240?t-240:t+120,r,s),xg(t,r,s),xg(t<120?t+240:t-120,r,s),this.opacity)},clamp(){return new Ts(Ok(this.h),Ld(this.s),Ld(this.l),bf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bf(this.opacity);return`${t===1?"hsl(":"hsla("}${Ok(this.h)}, ${Ld(this.s)*100}%, ${Ld(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ok(t){return t=(t||0)%360,t<0?t+360:t}function Ld(t){return Math.max(0,Math.min(1,t||0))}function xg(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const dy=t=>()=>t;function UF(t,e){return function(n){return t+n*e}}function WF(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(s){return Math.pow(t+s*e,n)}}function HF(t){return(t=+t)==1?W5:function(e,n){return n-e?WF(e,n,t):dy(isNaN(e)?n:e)}}function W5(t,e){var n=e-t;return n?UF(t,n):dy(isNaN(t)?e:t)}const yf=function t(e){var n=HF(e);function s(r,i){var o=n((r=Jm(r)).r,(i=Jm(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),c=W5(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return s.gamma=t,s}(1);function VF(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,s=e.slice(),r;return function(i){for(r=0;r<n;++r)s[r]=t[r]*(1-i)+e[r]*i;return s}}function YF(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function GF(t,e){var n=e?e.length:0,s=t?Math.min(n,t.length):0,r=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)r[o]=hy(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<s;++o)i[o]=r[o](a);return i}}function qF(t,e){var n=new Date;return t=+t,e=+e,function(s){return n.setTime(t*(1-s)+e*s),n}}function Ps(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function KF(t,e){var n={},s={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=hy(t[r],e[r]):s[r]=e[r];return function(i){for(r in n)s[r]=n[r](i);return s}}var Zm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bg=new RegExp(Zm.source,"g");function XF(t){return function(){return t}}function QF(t){return function(e){return t(e)+""}}function H5(t,e){var n=Zm.lastIndex=bg.lastIndex=0,s,r,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(s=Zm.exec(t))&&(r=bg.exec(e));)(i=r.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(s=s[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Ps(s,r)})),n=bg.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?QF(l[0].x):XF(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function hy(t,e){var n=typeof e,s;return e==null||n==="boolean"?dy(e):(n==="number"?Ps:n==="string"?(s=vo(e))?(e=s,yf):H5:e instanceof vo?yf:e instanceof Date?qF:YF(e)?VF:Array.isArray(e)?GF:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?KF:Ps)(t,e)}function JF(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Lk=180/Math.PI,ex={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function V5(t,e,n,s,r,i){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*s)&&(n-=t*l,s-=e*l),(a=Math.sqrt(n*n+s*s))&&(n/=a,s/=a,l/=a),t*s<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*Lk,skewX:Math.atan(l)*Lk,scaleX:o,scaleY:a}}var jd;function ZF(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ex:V5(e.a,e.b,e.c,e.d,e.e,e.f)}function eB(t){return t==null||(jd||(jd=document.createElementNS("http://www.w3.org/2000/svg","g")),jd.setAttribute("transform",t),!(t=jd.transform.baseVal.consolidate()))?ex:(t=t.matrix,V5(t.a,t.b,t.c,t.d,t.e,t.f))}function Y5(t,e,n,s){function r(c){return c.length?c.pop()+" ":""}function i(c,u,d,f,p,m){if(c!==d||u!==f){var x=p.push("translate(",null,e,null,n);m.push({i:x-4,x:Ps(c,d)},{i:x-2,x:Ps(u,f)})}else(d||f)&&p.push("translate("+d+e+f+n)}function o(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(r(d)+"rotate(",null,s)-2,x:Ps(c,u)})):u&&d.push(r(d)+"rotate("+u+s)}function a(c,u,d,f){c!==u?f.push({i:d.push(r(d)+"skewX(",null,s)-2,x:Ps(c,u)}):u&&d.push(r(d)+"skewX("+u+s)}function l(c,u,d,f,p,m){if(c!==d||u!==f){var x=p.push(r(p)+"scale(",null,",",null,")");m.push({i:x-4,x:Ps(c,d)},{i:x-2,x:Ps(u,f)})}else(d!==1||f!==1)&&p.push(r(p)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=t(c),u=t(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,f),o(c.rotate,u.rotate,d,f),a(c.skewX,u.skewX,d,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(p){for(var m=-1,x=f.length,w;++m<x;)d[(w=f[m]).i]=w.x(p);return d.join("")}}}var tB=Y5(ZF,"px, ","px)","deg)"),nB=Y5(eB,", ",")",")"),ol=0,fc=0,Xl=0,G5=1e3,wf,pc,vf=0,ko=0,N0=0,xu=typeof performance=="object"&&performance.now?performance:Date,q5=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fy(){return ko||(q5(sB),ko=xu.now()+N0)}function sB(){ko=0}function kf(){this._call=this._time=this._next=null}kf.prototype=K5.prototype={constructor:kf,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?fy():+n)+(e==null?0:+e),!this._next&&pc!==this&&(pc?pc._next=this:wf=this,pc=this),this._call=t,this._time=n,tx()},stop:function(){this._call&&(this._call=null,this._time=1/0,tx())}};function K5(t,e,n){var s=new kf;return s.restart(t,e,n),s}function rB(){fy(),++ol;for(var t=wf,e;t;)(e=ko-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ol}function jk(){ko=(vf=xu.now())+N0,ol=fc=0;try{rB()}finally{ol=0,oB(),ko=0}}function iB(){var t=xu.now(),e=t-vf;e>G5&&(N0-=e,vf=t)}function oB(){for(var t,e=wf,n,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:wf=n);pc=t,tx(s)}function tx(t){if(!ol){fc&&(fc=clearTimeout(fc));var e=t-ko;e>24?(t<1/0&&(fc=setTimeout(jk,t-xu.now()-N0)),Xl&&(Xl=clearInterval(Xl))):(Xl||(vf=xu.now(),Xl=setInterval(iB,G5)),ol=1,q5(jk))}}function Fk(t,e,n){var s=new kf;return e=e==null?0:+e,s.restart(r=>{s.stop(),t(r+e)},e,n),s}var aB=T5("start","end","cancel","interrupt"),lB=[],X5=0,Bk=1,nx=2,vh=3,$k=4,sx=5,kh=6;function D0(t,e,n,s,r,i){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;cB(t,n,{name:e,index:s,group:r,on:aB,tween:lB,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:X5})}function py(t,e){var n=Os(t,e);if(n.state>X5)throw new Error("too late; already scheduled");return n}function ir(t,e){var n=Os(t,e);if(n.state>vh)throw new Error("too late; already running");return n}function Os(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function cB(t,e,n){var s=t.__transition,r;s[e]=n,n.timer=K5(i,0,n.time);function i(c){n.state=Bk,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,f,p;if(n.state!==Bk)return l();for(u in s)if(p=s[u],p.name===n.name){if(p.state===vh)return Fk(o);p.state===$k?(p.state=kh,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete s[u]):+u<e&&(p.state=kh,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete s[u])}if(Fk(function(){n.state===vh&&(n.state=$k,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=nx,n.on.call("start",t,t.__data__,n.index,n.group),n.state===nx){for(n.state=vh,r=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=p);r.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=sx,1),d=-1,f=r.length;++d<f;)r[d].call(t,u);n.state===sx&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=kh,n.timer.stop(),delete s[e];for(var c in s)return;delete t.__transition}}function uB(t,e){var n=t.__transition,s,r,i=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((s=n[o]).name!==e){i=!1;continue}r=s.state>nx&&s.state<sx,s.state=kh,s.timer.stop(),s.on.call(r?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete n[o]}i&&delete t.__transition}}function dB(t){return this.each(function(){uB(this,t)})}function hB(t,e){var n,s;return function(){var r=ir(this,t),i=r.tween;if(i!==n){s=n=i;for(var o=0,a=s.length;o<a;++o)if(s[o].name===e){s=s.slice(),s.splice(o,1);break}}r.tween=s}}function fB(t,e,n){var s,r;if(typeof n!="function")throw new Error;return function(){var i=ir(this,t),o=i.tween;if(o!==s){r=(s=o).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}i.tween=r}}function pB(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s=Os(this.node(),n).tween,r=0,i=s.length,o;r<i;++r)if((o=s[r]).name===t)return o.value;return null}return this.each((e==null?hB:fB)(n,t,e))}function gy(t,e,n){var s=t._id;return t.each(function(){var r=ir(this,s);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Os(r,s).value[e]}}function Q5(t,e){var n;return(typeof e=="number"?Ps:e instanceof vo?yf:(n=vo(e))?(e=n,yf):H5)(t,e)}function gB(t){return function(){this.removeAttribute(t)}}function mB(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xB(t,e,n){var s,r=n+"",i;return function(){var o=this.getAttribute(t);return o===r?null:o===s?i:i=e(s=o,n)}}function bB(t,e,n){var s,r=n+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===s?i:i=e(s=o,n)}}function yB(t,e,n){var s,r,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a)))}}function wB(t,e,n){var s,r,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a)))}}function vB(t,e){var n=I0(t),s=n==="transform"?nB:Q5;return this.attrTween(t,typeof e=="function"?(n.local?wB:yB)(n,s,gy(this,"attr."+t,e)):e==null?(n.local?mB:gB)(n):(n.local?bB:xB)(n,s,e))}function kB(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function SB(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function CB(t,e){var n,s;function r(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&SB(t,i)),n}return r._value=e,r}function _B(t,e){var n,s;function r(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&kB(t,i)),n}return r._value=e,r}function EB(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var s=I0(t);return this.tween(n,(s.local?CB:_B)(s,e))}function PB(t,e){return function(){py(this,t).delay=+e.apply(this,arguments)}}function TB(t,e){return e=+e,function(){py(this,t).delay=e}}function MB(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?PB:TB)(e,t)):Os(this.node(),e).delay}function IB(t,e){return function(){ir(this,t).duration=+e.apply(this,arguments)}}function NB(t,e){return e=+e,function(){ir(this,t).duration=e}}function DB(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?IB:NB)(e,t)):Os(this.node(),e).duration}function AB(t,e){if(typeof e!="function")throw new Error;return function(){ir(this,t).ease=e}}function RB(t){var e=this._id;return arguments.length?this.each(AB(e,t)):Os(this.node(),e).ease}function OB(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ir(this,t).ease=n}}function LB(t){if(typeof t!="function")throw new Error;return this.each(OB(this._id,t))}function jB(t){typeof t!="function"&&(t=D5(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i=e[r],o=i.length,a=s[r]=[],l,c=0;c<o;++c)(l=i[c])&&t.call(l,l.__data__,c,i)&&a.push(l);return new Nr(s,this._parents,this._name,this._id)}function FB(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,s=e.length,r=n.length,i=Math.min(s,r),o=new Array(s),a=0;a<i;++a)for(var l=e[a],c=n[a],u=l.length,d=o[a]=new Array(u),f,p=0;p<u;++p)(f=l[p]||c[p])&&(d[p]=f);for(;a<s;++a)o[a]=e[a];return new Nr(o,this._parents,this._name,this._id)}function BB(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function $B(t,e,n){var s,r,i=BB(e)?py:ir;return function(){var o=i(this,t),a=o.on;a!==s&&(r=(s=a).copy()).on(e,n),o.on=r}}function zB(t,e){var n=this._id;return arguments.length<2?Os(this.node(),n).on.on(t):this.each($B(n,t,e))}function UB(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function WB(){return this.on("end.remove",UB(this._id))}function HB(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ay(t));for(var s=this._groups,r=s.length,i=new Array(r),o=0;o<r;++o)for(var a=s[o],l=a.length,c=i[o]=new Array(l),u,d,f=0;f<l;++f)(u=a[f])&&(d=t.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,D0(c[f],e,n,f,c,Os(u,n)));return new Nr(i,this._parents,e,n)}function VB(t){var e=this._name,n=this._id;typeof t!="function"&&(t=N5(t));for(var s=this._groups,r=s.length,i=[],o=[],a=0;a<r;++a)for(var l=s[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var f=t.call(u,u.__data__,d,l),p,m=Os(u,n),x=0,w=f.length;x<w;++x)(p=f[x])&&D0(p,e,n,x,f,m);i.push(f),o.push(u)}return new Nr(i,o,e,n)}var YB=Hu.prototype.constructor;function GB(){return new YB(this._groups,this._parents)}function qB(t,e){var n,s,r;return function(){var i=il(this,t),o=(this.style.removeProperty(t),il(this,t));return i===o?null:i===n&&o===s?r:r=e(n=i,s=o)}}function J5(t){return function(){this.style.removeProperty(t)}}function KB(t,e,n){var s,r=n+"",i;return function(){var o=il(this,t);return o===r?null:o===s?i:i=e(s=o,n)}}function XB(t,e,n){var s,r,i;return function(){var o=il(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),il(this,t))),o===l?null:o===s&&l===r?i:(r=l,i=e(s=o,a))}}function QB(t,e){var n,s,r,i="style."+e,o="end."+i,a;return function(){var l=ir(this,t),c=l.on,u=l.value[i]==null?a||(a=J5(e)):void 0;(c!==n||r!==u)&&(s=(n=c).copy()).on(o,r=u),l.on=s}}function JB(t,e,n){var s=(t+="")=="transform"?tB:Q5;return e==null?this.styleTween(t,qB(t,s)).on("end.style."+t,J5(t)):typeof e=="function"?this.styleTween(t,XB(t,s,gy(this,"style."+t,e))).each(QB(this._id,t)):this.styleTween(t,KB(t,s,e),n).on("end.style."+t,null)}function ZB(t,e,n){return function(s){this.style.setProperty(t,e.call(this,s),n)}}function e$(t,e,n){var s,r;function i(){var o=e.apply(this,arguments);return o!==r&&(s=(r=o)&&ZB(t,o,n)),s}return i._value=e,i}function t$(t,e,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,e$(t,e,n??""))}function n$(t){return function(){this.textContent=t}}function s$(t){return function(){var e=t(this);this.textContent=e??""}}function r$(t){return this.tween("text",typeof t=="function"?s$(gy(this,"text",t)):n$(t==null?"":t+""))}function i$(t){return function(e){this.textContent=t.call(this,e)}}function o$(t){var e,n;function s(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&i$(r)),e}return s._value=t,s}function a$(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,o$(t))}function l$(){for(var t=this._name,e=this._id,n=Z5(),s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Os(l,e);D0(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Nr(s,this._parents,t,n)}function c$(){var t,e,n=this,s=n._id,r=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--r===0&&i()}};n.each(function(){var c=ir(this,s),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&i()})}var u$=0;function Nr(t,e,n,s){this._groups=t,this._parents=e,this._name=n,this._id=s}function Z5(){return++u$}var ar=Hu.prototype;Nr.prototype={constructor:Nr,select:HB,selectAll:VB,selectChild:ar.selectChild,selectChildren:ar.selectChildren,filter:jB,merge:FB,selection:GB,transition:l$,call:ar.call,nodes:ar.nodes,node:ar.node,size:ar.size,empty:ar.empty,each:ar.each,on:zB,attr:vB,attrTween:EB,style:JB,styleTween:t$,text:r$,textTween:a$,remove:WB,tween:pB,delay:MB,duration:DB,ease:RB,easeVarying:LB,end:c$,[Symbol.iterator]:ar[Symbol.iterator]};function d$(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var h$={time:null,delay:0,duration:250,ease:d$};function f$(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function p$(t){var e,n;t instanceof Nr?(e=t._id,t=t._name):(e=Z5(),(n=h$).time=fy(),t=t==null?null:t+"");for(var s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&D0(l,t,e,c,o,n||f$(l,e));return new Nr(s,this._parents,t,e)}Hu.prototype.interrupt=dB;Hu.prototype.transition=p$;function g$(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Sf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function al(t){return t=Sf(Math.abs(t)),t?t[1]:NaN}function m$(t,e){return function(n,s){for(var r=n.length,i=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>s&&(a=Math.max(1,s-l)),i.push(n.substring(r-=a,r+a)),!((l+=a+1)>s));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function x$(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var b$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cf(t){if(!(e=b$.exec(t)))throw new Error("invalid format: "+t);var e;return new my({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Cf.prototype=my.prototype;function my(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}my.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function y$(t){e:for(var e=t.length,n=1,s=-1,r;n<e;++n)switch(t[n]){case".":s=r=n;break;case"0":s===0&&(s=n),r=n;break;default:if(!+t[n])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(r+1):t}var eP;function w$(t,e){var n=Sf(t,e);if(!n)return t+"";var s=n[0],r=n[1],i=r-(eP=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+Sf(t,Math.max(0,e+i-1))[0]}function zk(t,e){var n=Sf(t,e);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const Uk={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:g$,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>zk(t*100,e),r:zk,s:w$,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Wk(t){return t}var Hk=Array.prototype.map,Vk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function v$(t){var e=t.grouping===void 0||t.thousands===void 0?Wk:m$(Hk.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?Wk:x$(Hk.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Cf(d);var f=d.fill,p=d.align,m=d.sign,x=d.symbol,w=d.zero,g=d.width,b=d.comma,v=d.precision,y=d.trim,S=d.type;S==="n"?(b=!0,S="g"):Uk[S]||(v===void 0&&(v=12),y=!0,S="g"),(w||f==="0"&&p==="=")&&(w=!0,f="0",p="=");var C=x==="$"?n:x==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=x==="$"?s:/[%p]/.test(S)?o:"",T=Uk[S],N=/[defgprs%]/.test(S);v=v===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function _(D){var A=C,R=E,z,L,F;if(S==="c")R=T(D)+R,D="";else{D=+D;var $=D<0||1/D<0;if(D=isNaN(D)?l:T(Math.abs(D),v),y&&(D=y$(D)),$&&+D==0&&m!=="+"&&($=!1),A=($?m==="("?m:a:m==="-"||m==="("?"":m)+A,R=(S==="s"?Vk[8+eP/3]:"")+R+($&&m==="("?")":""),N){for(z=-1,L=D.length;++z<L;)if(F=D.charCodeAt(z),48>F||F>57){R=(F===46?r+D.slice(z+1):D.slice(z))+R,D=D.slice(0,z);break}}}b&&!w&&(D=e(D,1/0));var O=A.length+D.length+R.length,B=O<g?new Array(g-O+1).join(f):"";switch(b&&w&&(D=e(B+D,B.length?g-R.length:1/0),B=""),p){case"<":D=A+D+R+B;break;case"=":D=A+B+D+R;break;case"^":D=B.slice(0,O=B.length>>1)+A+D+R+B.slice(O);break;default:D=B+A+D+R;break}return i(D)}return _.toString=function(){return d+""},_}function u(d,f){var p=c((d=Cf(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(al(f)/3)))*3,x=Math.pow(10,-m),w=Vk[8+m/3];return function(g){return p(x*g)+w}}return{format:c,formatPrefix:u}}var Fd,tP,nP;k$({thousands:",",grouping:[3],currency:["$",""]});function k$(t){return Fd=v$(t),tP=Fd.format,nP=Fd.formatPrefix,Fd}function S$(t){return Math.max(0,-al(Math.abs(t)))}function C$(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(al(e)/3)))*3-al(Math.abs(t)))}function _$(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,al(e)-al(t))+1}function xy(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Yk=Symbol("implicit");function sP(){var t=new kk,e=[],n=[],s=Yk;function r(i){let o=t.get(i);if(o===void 0){if(s!==Yk)return s;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return r.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new kk;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(i){return arguments.length?(n=Array.from(i),r):n.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return sP(e,n).unknown(s)},xy.apply(r,arguments),r}function rP(){var t=sP().unknown(void 0),e=t.domain,n=t.range,s=0,r=1,i,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,p=r<s,m=p?r:s,x=p?s:r;i=(x-m)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),m+=(x-m-i*(f-l))*u,o=i*(1-l),a&&(m=Math.round(m),o=Math.round(o));var w=BL(f).map(function(g){return m+i*g});return n(p?w.reverse():w)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([s,r]=f,s=+s,r=+r,d()):[s,r]},t.rangeRound=function(f){return[s,r]=f,s=+s,r=+r,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return rP(e(),[s,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},xy.apply(d(),arguments)}function E$(t){return function(){return t}}function P$(t){return+t}var Gk=[0,1];function oa(t){return t}function rx(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:E$(isNaN(e)?NaN:.5)}function T$(t,e){var n;return t>e&&(n=t,t=e,e=n),function(s){return Math.max(t,Math.min(e,s))}}function M$(t,e,n){var s=t[0],r=t[1],i=e[0],o=e[1];return r<s?(s=rx(r,s),i=n(o,i)):(s=rx(s,r),i=n(i,o)),function(a){return i(s(a))}}function I$(t,e,n){var s=Math.min(t.length,e.length)-1,r=new Array(s),i=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<s;)r[o]=rx(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=ML(t,a,1,s)-1;return i[l](r[l](a))}}function N$(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function D$(){var t=Gk,e=Gk,n=hy,s,r,i,o=oa,a,l,c;function u(){var f=Math.min(t.length,e.length);return o!==oa&&(o=T$(t[0],t[f-1])),a=f>2?I$:M$,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?i:(l||(l=a(t.map(s),e,n)))(s(o(f)))}return d.invert=function(f){return o(r((c||(c=a(e,t.map(s),Ps)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,P$),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=JF,u()},d.clamp=function(f){return arguments.length?(o=f?!0:oa,u()):o!==oa},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,p){return s=f,r=p,u()}}function A$(){return D$()(oa,oa)}function R$(t,e,n,s){var r=jL(t,e,n),i;switch(s=Cf(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return s.precision==null&&!isNaN(i=C$(r,o))&&(s.precision=i),nP(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=_$(r,Math.max(Math.abs(t),Math.abs(e))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=S$(r))&&(s.precision=i-(s.type==="%")*2);break}}return tP(s)}function O$(t){var e=t.domain;return t.ticks=function(n){var s=e();return LL(s[0],s[s.length-1],n??10)},t.tickFormat=function(n,s){var r=e();return R$(r[0],r[r.length-1],n??10,s)},t.nice=function(n){n==null&&(n=10);var s=e(),r=0,i=s.length-1,o=s[r],a=s[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=i,i=c);u-- >0;){if(c=Km(o,a,n),c===l)return s[r]=o,s[i]=a,e(s);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function iP(){var t=A$();return t.copy=function(){return N$(t,iP())},xy.apply(t,arguments),O$(t)}function gc(t,e,n){this.k=t,this.x=e,this.y=n}gc.prototype={constructor:gc,scale:function(t){return t===1?this:new gc(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new gc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};gc.prototype;function $o({data:t,height:e=150,width:n=900,maxBars:s=60,getTimestamp:r=i=>i.timestamp||Date.now()}){const i=k.useRef(null),o=k.useRef(null),[a,l]=k.useState([]),c=k.useCallback(u=>r(u),[r]);return k.useEffect(()=>{if(t.length===0){l([]);return}const u=Date.now(),d=new Map;t.forEach(p=>{const m=c(p);if(!m||isNaN(m)||!isFinite(m))return;const x=Math.floor((u-m)/1e3);if(x>=0&&x<s){const w=d.get(x)||0;d.set(x,w+1)}});const f=[];for(let p=s-1;p>=0;p--)f.push({time:p,count:d.get(p)||0});l(f)},[t,s,c]),k.useEffect(()=>{if(!i.current||a.length===0)return;const u=Rd(i.current);u.selectAll("*").remove();const d={top:20,right:20,bottom:40,left:50},f=n-d.left-d.right,p=e-d.top-d.bottom,m=u.append("g").attr("transform",`translate(${d.left}, ${d.top})`),x=rP().domain(a.map((b,v)=>v.toString())).range([0,f]).padding(.1);FL(a,b=>b.count);const g=iP().domain([0,5]).range([p,0]).nice();return m.append("g").attr("transform",`translate(0, ${p})`).call(_k(x).tickValues(x.domain().filter((b,v)=>v%Math.ceil(s/10)===0)).tickFormat((b,v)=>{var E;const y=parseInt(b||"0"),S=((E=a[y])==null?void 0:E.time)||0;return S===0?"now":S<60?`-${S}s`:`-${Math.floor(S/60)}m`})).selectAll("text").attr("class","data-rate-axis-text"),m.append("g").call(YL(g).ticks(5)).selectAll("text").attr("class","data-rate-axis-text"),m.append("text").attr("class","data-rate-y-axis-label").attr("transform","rotate(-90)").attr("y",-35).attr("x",-p/2).attr("text-anchor","middle").text("Data Points/sec"),m.selectAll("rect").data(a).enter().append("rect").attr("x",(b,v)=>x(v.toString())||0).attr("y",b=>g(b.count)).attr("width",x.bandwidth()).attr("height",b=>p-g(b.count)).attr("fill",b=>b.count>=3.5?"#4CAF50":b.count>=2?"#FF9800":b.count>0?"#F44336":"#E0E0E0").attr("rx",2).style("opacity",.8).on("mouseover",function(b,v){var N;Rd(this).style("opacity",1),o.current&&o.current.remove();const S=Rd("body").append("div").attr("class","data-rate-tooltip").style("opacity",0),C=(N=i.current)==null?void 0:N.getBoundingClientRect(),[E,T]=TF(b,i.current);C&&S.style("left",`${C.left+E+10}px`).style("top",`${C.top+T-10}px`).text(`${v.count} data points ${v.time===0?"now":`${v.time}s ago`}`).transition().duration(200).style("opacity",1),o.current=S}).on("mouseout",function(){Rd(this).style("opacity",.8),o.current&&(o.current.transition().duration(200).style("opacity",0).remove(),o.current=null)}),m.append("g").attr("class","grid").attr("transform",`translate(0, ${p})`).call(_k(x).tickSize(-p).tickValues(x.domain().filter((b,v)=>v%Math.ceil(s/10)===0)).tickFormat(()=>"")).selectAll("line").attr("class","data-rate-grid-line"),()=>{o.current&&(o.current.remove(),o.current=null),MF(".data-rate-tooltip").remove()}},[a,n,e,s]),h.jsxs("div",{className:"data-rate-histogram-container",children:[h.jsx("h4",{className:"data-rate-histogram-title",children:"Data Rate (points/second)"}),h.jsx("svg",{ref:i,className:"data-rate-histogram-svg",width:n,height:e})]})}function L$(){const[t,e]=k.useState(Bu),[n,s]=k.useState(h0),[r,i]=k.useState(Bb),[o,a]=k.useState(100),[l,c]=k.useState(10),{walletAddress:u,authToken:d,error:f}=vl(),{markets:p,selectedMarketId:m,setSelectedMarketId:x,fetchMarkets:w,loadingMarkets:g,getMarket:b}=Ti({baseURL:t,sessionToken:d,autoFetchMarkets:!0}),[v,y]=k.useState("0"),[S,C]=k.useState("1m"),[E,T]=k.useState("0"),[N,_]=k.useState("BTC/USDC");k.useEffect(()=>{if(m){const V=String(m);y(V),T(V);const q=typeof m=="string"?parseInt(m,10):Number(m);if(!isNaN(q)&&isFinite(q)){const be=b(q);be&&_(be.symbol||`${be.baseAsset}/${be.quoteAsset}`)}}},[m,b]);const[D,A]=k.useState(null),[R,z]=k.useState("Data Details"),[L,F]=k.useState(!1),{klineData:$,loading:O,error:B,isConnected:M}=SD({baseURL:t,wsURL:n,marketId:v,interval:S,authToken:d,walletAddress:u,deviceID:r,maxDataPoints:o}),{lastPrice:H,markPrice:j,error:P,isConnected:X}=d0({baseURL:t,wsURL:n,marketId:E,symbol:N,authToken:d,walletAddress:u,deviceID:r}),[se,K]=k.useState([]),[J,G]=k.useState([]);k.useEffect(()=>{H&&K(V=>{const q=[...V,{...H,value:H.price,timestamp:H.timestamp,arrivalTime:Date.now(),raw:H}];return q.length>o?q.slice(-o):q})},[H,o]),k.useEffect(()=>{j&&G(V=>{const q=[...V,{...j,value:j.mark_price,timestamp:j.timestamp,arrivalTime:Date.now(),raw:j}];return q.length>o?q.slice(-o):q})},[j,o]);const{buckets:ee,loading:he,error:Ae,refresh:Ce}=d3({baseURL:t,authToken:d,walletAddress:u,refreshInterval:5e3}),{positions:ve,loading:Fe,error:ct,isConnected:I,refresh:ce}=u3({baseURL:t,wsURL:n,authToken:d,walletAddress:u,deviceID:r,useWebSocket:!0}),{orders:me,loading:Ne,error:He,isConnected:ue,refresh:Y}=_5({baseURL:t,wsURL:n,authToken:d,walletAddress:u,deviceID:r,useWebSocket:!0}),te=(V,q)=>{A(V.raw||V),z(q),F(!0)};return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{className:"hooks-test-page-title",children:"Hooks Test Page"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{className:"hooks-test-section-header",children:"Shared Configuration"}),h.jsxs("div",{className:"hooks-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["API Base URL:",h.jsx("input",{type:"text",className:"hooks-test-input",value:t,onChange:V=>e(V.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["WebSocket URL:",h.jsx("input",{type:"text",className:"hooks-test-input",value:n,onChange:V=>s(V.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Wallet Address (from useOnboard):",h.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:u||"",readOnly:!0,placeholder:"Set via useOnboard hook"}),f&&h.jsx("div",{className:"hooks-test-error-message",children:f})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Auth Token (from useOnboard):",h.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:d||"",readOnly:!0,placeholder:"Set via useOnboard hook"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market Selection:",h.jsxs("select",{className:"hooks-test-select",value:m||"",onChange:V=>{const q=V.target.value;q&&x(q)},children:[h.jsx("option",{value:"",children:"Select a market..."}),p.map(V=>h.jsxs("option",{value:String(V.market_id),children:[V.symbol||`${V.baseAsset}/${V.quoteAsset}`," ","(ID: ",V.market_id,")"]},V.market_id))]}),g&&h.jsx("div",{className:"hooks-test-info-message",children:"Loading markets..."}),!g&&p.length===0&&h.jsx("button",{className:"hooks-test-button",onClick:()=>w(),style:{marginTop:"0.5rem"},children:"Fetch Markets"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Device ID:",h.jsx("input",{type:"text",className:"hooks-test-input",value:r,onChange:V=>i(V.target.value)})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Max Data Points (Memory):",h.jsx("input",{type:"number",className:"hooks-test-input",value:o,onChange:V=>a(Math.max(10,parseInt(V.target.value)||100)),min:"10"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Max Visible Rectangles:",h.jsx("input",{type:"number",className:"hooks-test-input",value:l,onChange:V=>c(Math.max(1,parseInt(V.target.value)||10)),min:"1"})]})})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Kline Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${M?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:M?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[$.length," data points"]})]})]}),h.jsxs("div",{className:"hooks-test-form-grid",children:[h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",h.jsx("input",{type:"text",className:"hooks-test-input",value:v,onChange:V=>y(V.target.value),placeholder:"Select market from dropdown above",style:{backgroundColor:m?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})}),h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Interval:",h.jsxs("select",{className:"hooks-test-select",value:S,onChange:V=>C(V.target.value),children:[h.jsx("option",{value:"1m",children:"1m"}),h.jsx("option",{value:"5m",children:"5m"}),h.jsx("option",{value:"15m",children:"15m"}),h.jsx("option",{value:"1h",children:"1h"}),h.jsx("option",{value:"4h",children:"4h"}),h.jsx("option",{value:"1d",children:"1d"})]})]})})]}),B&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",B]}),O&&$.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading kline data..."}):$.length===0?h.jsx("div",{className:"hooks-test-empty-state",children:"No kline data available"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:$,maxVisible:l,maxDataPoints:o,getValue:V=>V.close||V.high||100,onItemClick:V=>te(V,"Kline Data")}),h.jsx($o,{data:$,getTimestamp:V=>{let q=V.timestamp||V.open_time||Date.now();return q<9466848e5&&(q=q*1e3),q}})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Mark Price Hook"}),h.jsx("span",{className:`hooks-test-status-badge ${X?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:X?"WS Connected":"WS Disconnected"})]}),h.jsx("div",{className:"hooks-test-form-grid",children:h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Symbol (auto-updated from selected market):",h.jsx("input",{type:"text",className:"hooks-test-input",value:N,onChange:V=>_(V.target.value),placeholder:"BTC/USDC",style:{backgroundColor:m?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),P&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",P]}),J.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No mark price data available"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:J,maxVisible:l,maxDataPoints:o,getValue:V=>V.value||V.mark_price||100,onItemClick:V=>te(V,"Mark Price Data")}),h.jsx($o,{data:J,getTimestamp:V=>V.arrivalTime||V.timestamp||Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Last Price Hook"}),h.jsx("span",{className:`hooks-test-status-badge ${X?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:X?"WS Connected":"WS Disconnected"})]}),h.jsx("div",{className:"hooks-test-form-grid",children:h.jsx("div",{children:h.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",h.jsx("input",{type:"text",className:"hooks-test-input",value:E,onChange:V=>T(V.target.value),placeholder:"Select market from dropdown above",style:{backgroundColor:m?"#f8f9fa":"white"}}),h.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),P&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",P]}),se.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No last price data available"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:se,maxVisible:l,maxDataPoints:o,getValue:V=>V.value||V.price||100,onItemClick:V=>te(V,"Last Price Data")}),h.jsx($o,{data:se,getTimestamp:V=>V.arrivalTime||V.timestamp||Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Bucket Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[ee.length," buckets"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>Ce(),disabled:he,children:he?"Loading...":"Refresh"})]})]}),Ae&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",Ae]}),he&&ee.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading buckets..."}):ee.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No buckets found"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:ee,maxVisible:l,maxDataPoints:o,getValue:V=>V.totalMargin||V.unrealizedPnL||100,onItemClick:V=>te(V,"Bucket Data")}),h.jsx($o,{data:ee,getTimestamp:V=>V.createdAt?new Date(V.createdAt).getTime():Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Position Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${I?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:I?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[ve.length," positions"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>ce(),disabled:Fe,children:Fe?"Loading...":"Refresh"})]})]}),ct&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",ct]}),Fe&&ve.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading positions..."}):ve.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No positions found"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:ve,maxVisible:l,maxDataPoints:o,getValue:V=>V.size||V.margin||100,onItemClick:V=>te(V,"Position Data")}),h.jsx($o,{data:ve,getTimestamp:V=>Date.now()})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsxs("div",{className:"hooks-test-section-header-flex",children:[h.jsx("h2",{className:"hooks-test-section-header-title",children:"Order Hook"}),h.jsxs("div",{className:"hooks-test-status-group",children:[h.jsx("span",{className:`hooks-test-status-badge ${ue?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"}`,children:ue?"WS Connected":"WS Disconnected"}),h.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[me.length," orders"]}),h.jsx("button",{className:"hooks-test-button",onClick:()=>Y(),disabled:Ne,children:Ne?"Loading...":"Refresh"})]})]}),He&&h.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",He]}),Ne&&me.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"Loading orders..."}):me.length===0?h.jsx("div",{className:"hooks-test-loading-state",children:"No orders found"}):h.jsxs(h.Fragment,{children:[h.jsx(Bo,{data:me,maxVisible:l,maxDataPoints:o,getValue:V=>V.quantity||V.price||100,onItemClick:V=>te(V,"Order Data")}),h.jsx($o,{data:me,getTimestamp:V=>V.createdAt?typeof V.createdAt=="number"?V.createdAt:new Date(V.createdAt).getTime():V.updatedAt?typeof V.updatedAt=="number"?V.updatedAt:new Date(V.updatedAt).getTime():Date.now()})]})]}),h.jsx(CL,{data:D,isOpen:L,onClose:()=>F(!1),title:R})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Yu(t){return t+.5|0}const oi=(t,e,n)=>Math.max(Math.min(t,n),e);function mc(t){return oi(Yu(t*2.55),0,255)}function xi(t){return oi(Yu(t*255),0,255)}function pr(t){return oi(Yu(t/2.55)/100,0,1)}function qk(t){return oi(Yu(t*100),0,100)}const ns={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ix=[..."0123456789ABCDEF"],j$=t=>ix[t&15],F$=t=>ix[(t&240)>>4]+ix[t&15],Bd=t=>(t&240)>>4===(t&15),B$=t=>Bd(t.r)&&Bd(t.g)&&Bd(t.b)&&Bd(t.a);function $$(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ns[t[1]]*17,g:255&ns[t[2]]*17,b:255&ns[t[3]]*17,a:e===5?ns[t[4]]*17:255}:(e===7||e===9)&&(n={r:ns[t[1]]<<4|ns[t[2]],g:ns[t[3]]<<4|ns[t[4]],b:ns[t[5]]<<4|ns[t[6]],a:e===9?ns[t[7]]<<4|ns[t[8]]:255})),n}const z$=(t,e)=>t<255?e(t):"";function U$(t){var e=B$(t)?j$:F$;return t?"#"+e(t.r)+e(t.g)+e(t.b)+z$(t.a,e):void 0}const W$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function oP(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function H$(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function V$(t,e,n){const s=oP(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function Y$(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function by(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=Y$(n,s,r,u,i),l=l*60+.5),[l|0,c||0,a]}function yy(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(xi)}function wy(t,e,n){return yy(oP,t,e,n)}function G$(t,e,n){return yy(V$,t,e,n)}function q$(t,e,n){return yy(H$,t,e,n)}function aP(t){return(t%360+360)%360}function K$(t){const e=W$.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?mc(+e[5]):xi(+e[5]));const r=aP(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=G$(r,i,o):e[1]==="hsv"?s=q$(r,i,o):s=wy(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function X$(t,e){var n=by(t);n[0]=aP(n[0]+e),n=wy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Q$(t){if(!t)return;const e=by(t),n=e[0],s=qk(e[1]),r=qk(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${pr(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const Kk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Xk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function J$(){const t={},e=Object.keys(Xk),n=Object.keys(Kk);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,Kk[i]);i=parseInt(Xk[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let $d;function Z$(t){$d||($d=J$(),$d.transparent=[0,0,0,0]);const e=$d[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const ez=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function tz(t){const e=ez.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?mc(o):oi(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?mc(s):oi(s,0,255)),r=255&(e[4]?mc(r):oi(r,0,255)),i=255&(e[6]?mc(i):oi(i,0,255)),{r:s,g:r,b:i,a:n}}}function nz(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${pr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const yg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,zo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function sz(t,e,n){const s=zo(pr(t.r)),r=zo(pr(t.g)),i=zo(pr(t.b));return{r:xi(yg(s+n*(zo(pr(e.r))-s))),g:xi(yg(r+n*(zo(pr(e.g))-r))),b:xi(yg(i+n*(zo(pr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function zd(t,e,n){if(t){let s=by(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=wy(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function lP(t,e){return t&&Object.assign(e||{},t)}function Qk(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=xi(t[3]))):(e=lP(t,{r:0,g:0,b:0,a:1}),e.a=xi(e.a)),e}function rz(t){return t.charAt(0)==="r"?tz(t):K$(t)}class bu{constructor(e){if(e instanceof bu)return e;const n=typeof e;let s;n==="object"?s=Qk(e):n==="string"&&(s=$$(e)||Z$(e)||rz(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=lP(this._rgb);return e&&(e.a=pr(e.a)),e}set rgb(e){this._rgb=Qk(e)}rgbString(){return this._valid?nz(this._rgb):void 0}hexString(){return this._valid?U$(this._rgb):void 0}hslString(){return this._valid?Q$(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=sz(this._rgb,e._rgb,n)),this}clone(){return new bu(this.rgb)}alpha(e){return this._rgb.a=xi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Yu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return zd(this._rgb,2,e),this}darken(e){return zd(this._rgb,2,-e),this}saturate(e){return zd(this._rgb,1,e),this}desaturate(e){return zd(this._rgb,1,-e),this}rotate(e){return X$(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function lr(){}const iz=(()=>{let t=0;return()=>t++})();function wt(t){return t==null}function Et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Je(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Bn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function zs(t,e){return Bn(t)?t:e}function Xe(t,e){return typeof t>"u"?e:t}const oz=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,cP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function pt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ht(t,e,n,s){let r,i,o;if(Et(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(Je(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function _f(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Ef(t){if(Et(t))return t.map(Ef);if(Je(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=Ef(t[n[r]]);return e}return t}function uP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function az(t,e,n,s){if(!uP(t))return;const r=e[t],i=n[t];Je(r)&&Je(i)?yu(r,i,s):e[t]=Ef(i)}function yu(t,e,n){const s=Et(e)?e:[e],r=s.length;if(!Je(t))return t;n=n||{};const i=n.merger||az;let o;for(let a=0;a<r;++a){if(o=s[a],!Je(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function $c(t,e){return yu(t,e,{merger:lz})}function lz(t,e,n){if(!uP(t))return;const s=e[t],r=n[t];Je(s)&&Je(r)?$c(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ef(r))}const Jk={"":t=>t,x:t=>t.x,y:t=>t.y};function cz(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function uz(t){const e=cz(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function wu(t,e){return(Jk[e]||(Jk[e]=uz(e)))(t)}function vy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Xn=t=>typeof t<"u",jn=t=>typeof t=="function",Zk=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function dz(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const lt=Math.PI,nn=2*lt,hz=nn+lt,Pf=Number.POSITIVE_INFINITY,ky=lt/180,sn=lt/2,ls=lt/4,Tf=lt*2/3,dP=Math.log10,ll=Math.sign;function zc(t,e,n){return Math.abs(t-e)<n}function eS(t){const e=Math.round(t);t=zc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(dP(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function fz(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function pz(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function So(t){return!pz(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function gz(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function mz(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Xt(t){return t*(lt/180)}function hP(t){return t*(180/lt)}function tS(t){if(!Bn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function ox(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*lt&&(i+=nn),{angle:i,distance:r}}function cl(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function xz(t,e){return(t-e+hz)%nn-lt}function Yr(t){return(t%nn+nn)%nn}function Mf(t,e,n,s){const r=Yr(t),i=Yr(e),o=Yr(n),a=Yr(i-r),l=Yr(o-r),c=Yr(r-i),u=Yr(r-o);return r===i||r===o||s&&i===o||a>l&&c<u}function hs(t,e,n){return Math.max(e,Math.min(n,t))}function bz(t){return hs(t,-32768,32767)}function xc(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function Sy(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Qi=(t,e,n,s)=>Sy(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),yz=(t,e,n)=>Sy(t,n,s=>t[s][e]>=n);function wz(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const fP=["push","pop","shift","splice","unshift"];function vz(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),fP.forEach(n=>{const s="_onData"+vy(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function nS(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(fP.forEach(i=>{delete t[i]}),delete t._chartjs)}function kz(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const pP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function gP(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,pP.call(window,()=>{s=!1,t.apply(e,n)}))}}function Sz(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Cy=t=>t==="start"?"left":t==="end"?"right":"center",hn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Cz=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function _z(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(r=Math.min(Qi(l,u,d).lo,n?s:Qi(e,u,o.getPixelForValue(d)).lo),c){const x=l.slice(0,r+1).reverse().findIndex(w=>!wt(w[a.axis]));r-=Math.max(0,x)}r=hs(r,0,s-1)}if(m){let x=Math.max(Qi(l,o.axis,f,!0).hi+1,n?0:Qi(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const w=l.slice(x-1).findIndex(g=>!wt(g[a.axis]));x+=Math.max(0,w)}i=hs(x,r,s)-r}else i=s-r}return{start:r,count:i}}function Ez(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const Ud=t=>t===0||t===1,sS=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*nn/n)),rS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*nn/n)+1,Uc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*sn)+1,easeOutSine:t=>Math.sin(t*sn),easeInOutSine:t=>-.5*(Math.cos(lt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ud(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ud(t)?t:sS(t,.075,.3),easeOutElastic:t=>Ud(t)?t:rS(t,.075,.3),easeInOutElastic(t){return Ud(t)?t:t<.5?.5*sS(t*2,.1125,.45):.5+.5*rS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Uc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Uc.easeInBounce(t*2)*.5:Uc.easeOutBounce(t*2-1)*.5+.5};function _y(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function iS(t){return _y(t)?t:new bu(t)}function wg(t){return _y(t)?t:new bu(t).saturate(.5).darken(.1).hexString()}const Pz=["x","y","borderWidth","radius","tension"],Tz=["color","borderColor","backgroundColor"];function Mz(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Tz},numbers:{type:"number",properties:Pz}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Iz(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const oS=new Map;function Nz(t,e){e=e||{};const n=t+JSON.stringify(e);let s=oS.get(n);return s||(s=new Intl.NumberFormat(t,e),oS.set(n,s)),s}function Ey(t,e,n){return Nz(e,n).format(t)}const Dz={values(t){return Et(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=Az(t,n)}const o=dP(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Ey(t,s,l)}};function Az(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var mP={formatters:Dz};function Rz(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:mP.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Co=Object.create(null),ax=Object.create(null);function Wc(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function vg(t,e,n){return typeof e=="string"?yu(Wc(t,e),n):yu(Wc(t,""),e)}class Oz{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>wg(r.backgroundColor),this.hoverBorderColor=(s,r)=>wg(r.borderColor),this.hoverColor=(s,r)=>wg(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return vg(this,e,n)}get(e){return Wc(this,e)}describe(e,n){return vg(ax,e,n)}override(e,n){return vg(Co,e,n)}route(e,n,s,r){const i=Wc(this,e),o=Wc(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Je(l)?Object.assign({},c,l):Xe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Dt=new Oz({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Mz,Iz,Rz]);function Lz(t){return!t||wt(t.size)||wt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function aS(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Ri(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function lS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function lx(t,e,n,s){xP(t,e,n,s,null)}function xP(t,e,n,s,r){let i,o,a,l,c,u,d,f;const p=e.pointStyle,m=e.rotation,x=e.radius;let w=(m||0)*ky;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(w),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:r?t.ellipse(n,s,r/2,x,0,0,nn):t.arc(n,s,x,0,nn),t.closePath();break;case"triangle":u=r?r/2:x,t.moveTo(n+Math.sin(w)*u,s-Math.cos(w)*x),w+=Tf,t.lineTo(n+Math.sin(w)*u,s-Math.cos(w)*x),w+=Tf,t.lineTo(n+Math.sin(w)*u,s-Math.cos(w)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(w+ls)*l,d=Math.cos(w+ls)*(r?r/2-c:l),a=Math.sin(w+ls)*l,f=Math.sin(w+ls)*(r?r/2-c:l),t.arc(n-d,s-a,c,w-lt,w-sn),t.arc(n+f,s-o,c,w-sn,w),t.arc(n+d,s+a,c,w,w+sn),t.arc(n-f,s+o,c,w+sn,w+lt),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*x,u=r?r/2:l,t.rect(n-u,s-l,2*u,2*l);break}w+=ls;case"rectRot":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,f=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+f,s-o),t.lineTo(n+d,s+a),t.lineTo(n-f,s+o),t.closePath();break;case"crossRot":w+=ls;case"cross":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,f=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"star":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,f=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o),w+=ls,d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,f=Math.sin(w)*(r?r/2:x),t.moveTo(n-d,s-a),t.lineTo(n+d,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(w)*x,a=Math.sin(w)*x,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(w)*(r?r/2:x),s+Math.sin(w)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function vu(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function A0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function R0(t){t.restore()}function jz(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Fz(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Bz(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),wt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function $z(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function zz(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ku(t,e,n,s,r,i={}){const o=Et(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,Bz(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&zz(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),wt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,s,i.maxWidth)),t.fillText(c,n,s,i.maxWidth),$z(t,n,s,c,i),s+=Number(r.lineHeight);t.restore()}function If(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*lt,lt,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,lt,sn,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,sn,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-sn,!0),t.lineTo(n+o.topLeft,s)}const Uz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Wz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Hz(t,e){const n=(""+t).match(Uz);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Vz=t=>+t||0;function bP(t,e){const n={},s=Je(e),r=s?Object.keys(e):e,i=Je(t)?s?o=>Xe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Vz(i(o));return n}function Yz(t){return bP(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ya(t){return bP(t,["topLeft","topRight","bottomLeft","bottomRight"])}function mn(t){const e=Yz(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ht(t,e){t=t||{},e=e||Dt.font;let n=Xe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Xe(t.style,e.style);s&&!(""+s).match(Wz)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Xe(t.family,e.family),lineHeight:Hz(Xe(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Xe(t.weight,e.weight),string:""};return r.string=Lz(r),r}function Wd(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Gz(t,e,n){const{min:s,max:r}=t,i=cP(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Do(t,e){return Object.assign(Object.create(t),e)}function Py(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=kP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>Py([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return wP(a,l,()=>tU(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return uS(a).includes(l)},ownKeys(a){return uS(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function ul(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:yP(t,s),setContext:i=>ul(t,i,n,s),override:i=>ul(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return wP(i,o,()=>Kz(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function yP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:jn(n)?n:()=>n,isIndexable:jn(s)?s:()=>s}}const qz=(t,e)=>t?t+vy(e):e,Ty=(t,e)=>Je(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function wP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function Kz(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return jn(a)&&o.isScriptable(e)&&(a=Xz(e,a,t,n)),Et(a)&&a.length&&(a=Qz(e,a,t,o.isIndexable)),Ty(e,a)&&(a=ul(a,r,i&&i[e],o)),a}function Xz(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),Ty(t,l)&&(l=My(r._scopes,r,t,l)),l}function Qz(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Je(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=My(c,r,t,u);e.push(ul(d,i,o&&o[t],a))}}return e}function vP(t,e,n){return jn(t)?t(e,n):t}const Jz=(t,e)=>t===!0?e:typeof t=="string"?wu(e,t):void 0;function Zz(t,e,n,s,r){for(const i of e){const o=Jz(n,i);if(o){t.add(o);const a=vP(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function My(t,e,n,s){const r=e._rootScopes,i=vP(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=cS(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=cS(a,o,i,l,s),l===null)?!1:Py(Array.from(a),[""],r,i,()=>eU(e,n,s))}function cS(t,e,n,s,r){for(;n;)n=Zz(t,e,n,s,r);return n}function eU(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return Et(r)&&Je(n)?n:r||{}}function tU(t,e,n,s){let r;for(const i of e)if(r=kP(qz(i,t),n),typeof r<"u")return Ty(t,r)?My(n,s,t,r):r}function kP(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function uS(t){let e=t._keys;return e||(e=t._keys=nU(t._scopes)),e}function nU(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const sU=Number.EPSILON||1e-14,dl=(t,e)=>e<t.length&&!t[e].skip&&t[e],SP=t=>t==="x"?"y":"x";function rU(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=cl(i,r),l=cl(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,f=s*u;return{previous:{x:i.x-d*(o.x-r.x),y:i.y-d*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function iU(t,e,n){const s=t.length;let r,i,o,a,l,c=dl(t,0);for(let u=0;u<s-1;++u)if(l=c,c=dl(t,u+1),!(!l||!c)){if(zc(e[u],0,sU)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=i*o*e[u])}}function oU(t,e,n="x"){const s=SP(n),r=t.length;let i,o,a,l=dl(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=dl(t,c+1),!a)continue;const u=a[n],d=a[s];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${s}`]=d-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${s}`]=d+i*e[c])}}function aU(t,e="x"){const n=SP(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=dl(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=dl(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?ll(r[o-1])!==ll(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}iU(t,r,i),oU(t,i,e)}function Hd(t,e,n){return Math.max(Math.min(t,n),e)}function lU(t,e){let n,s,r,i,o,a=vu(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&vu(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=Hd(r.cp1x,e.left,e.right),r.cp1y=Hd(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Hd(r.cp2x,e.left,e.right),r.cp2y=Hd(r.cp2y,e.top,e.bottom)))}function cU(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")aU(t,r);else{let c=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=rU(c,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&lU(t,n)}function Iy(){return typeof window<"u"&&typeof document<"u"}function Ny(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Nf(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const O0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function uU(t,e){return O0(t).getPropertyValue(e)}const dU=["top","right","bottom","left"];function lo(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=dU[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const hU=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function fU(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(hU(r,i,t.target))a=r,l=i;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function $i(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=O0(n),i=r.boxSizing==="border-box",o=lo(r,"padding"),a=lo(r,"border","width"),{x:l,y:c,box:u}=fU(t,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:m}=e;return i&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/p*n.width/s),y:Math.round((c-f)/m*n.height/s)}}function pU(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&Ny(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=O0(i),l=lo(a,"border","width"),c=lo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Nf(a.maxWidth,i,"clientWidth"),r=Nf(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||Pf,maxHeight:r||Pf}}const ai=t=>Math.round(t*10)/10;function gU(t,e,n,s){const r=O0(t),i=lo(r,"margin"),o=Nf(r.maxWidth,t,"clientWidth")||Pf,a=Nf(r.maxHeight,t,"clientHeight")||Pf,l=pU(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=lo(r,"border","width"),p=lo(r,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=ai(Math.min(c,o,l.maxWidth)),u=ai(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ai(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=ai(Math.floor(u*s))),{width:c,height:u}}function dS(t,e,n){const s=e||1,r=ai(t.height*s),i=ai(t.width*s);t.height=ai(t.height),t.width=ai(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const mU=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Iy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function hS(t,e){const n=uU(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function zi(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function xU(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function bU(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=zi(t,r,n),a=zi(r,i,n),l=zi(i,e,n),c=zi(o,a,n),u=zi(a,l,n);return zi(c,u,n)}const yU=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},wU=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function wa(t,e,n){return t?yU(e,n):wU()}function CP(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function _P(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function EP(t){return t==="angle"?{between:Mf,compare:xz,normalize:Yr}:{between:xc,compare:(e,n)=>e-n,normalize:e=>e}}function fS({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function vU(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=EP(s),l=e.length;let{start:c,end:u,loop:d}=t,f,p;if(d){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(e[c%l][s]),r,i);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function kU(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=EP(s),{start:u,end:d,loop:f,style:p}=vU(t,e,n),m=[];let x=!1,w=null,g,b,v;const y=()=>l(r,v,g)&&a(r,v)!==0,S=()=>a(i,g)===0||l(i,v,g),C=()=>x||y(),E=()=>!x||S();for(let T=u,N=u;T<=d;++T)b=e[T%o],!b.skip&&(g=c(b[s]),g!==v&&(x=l(g,r,i),w===null&&C()&&(w=a(g,r)===0?T:N),w!==null&&E()&&(m.push(fS({start:w,end:T,loop:f,count:o,style:p})),w=null),N=T,v=g));return w!==null&&m.push(fS({start:w,end:d,loop:f,count:o,style:p})),m}function SU(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=kU(s[r],t.points,e);i.length&&n.push(...i)}return n}function CU(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function _U(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function EU(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=CU(n,r,i,s);if(s===!0)return pS(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return pS(t,_U(n,o,l,c),n,e)}function pS(t,e,n,s){return!s||!s.setContext||!n?e:PU(t,e,n,s)}function PU(t,e,n,s){const r=t._chart.getContext(),i=gS(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,d=e[0].start,f=d;function p(m,x,w,g){const b=a?-1:1;if(m!==x){for(m+=l;n[m%l].skip;)m-=b;for(;n[x%l].skip;)x+=b;m%l!==x%l&&(c.push({start:m%l,end:x%l,loop:w,style:g}),u=g,d=x%l)}}for(const m of e){d=a?d:m.start;let x=n[d%l],w;for(f=d+1;f<=m.end;f++){const g=n[f%l];w=gS(s.setContext(Do(r,{type:"segment",p0:x,p1:g,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),TU(w,u)&&p(d,f-1,m.loop,u),x=g,u=w}d<f-1&&p(d,f-1,m.loop,u)}return c}function gS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function TU(t,e){if(!e)return!1;const n=[],s=function(r,i){return _y(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function Vd(t,e,n){return t.options.clip?t[n]:e[n]}function MU(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Vd(n,e,"left"),right:Vd(n,e,"right"),top:Vd(s,e,"top"),bottom:Vd(s,e,"bottom")}:e}function IU(t,e){const n=e._clip;if(n.disabled)return!1;const s=MU(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class NU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=pP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var cr=new NU;const mS="transparent",DU={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=iS(t||mS),r=s.valid&&iS(e||mS);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class AU{constructor(e,n,s,r){const i=n[s];r=Wd([e.to,r,i,e.from]);const o=Wd([e.from,i,r]);this._active=!0,this._fn=e.fn||DU[e.type||typeof o],this._easing=Uc[e.easing]||Uc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Wd([e.to,n,r,e.from]),this._from=Wd([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class Dy{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Je(e))return;const n=Object.keys(Dt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!Je(i))return;const o={};for(const a of n)o[a]=i[a];(Et(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=OU(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&RU(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let d=i[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}i[c]=d=new AU(f,e,c,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return cr.add(this._chart,s),!0}}function RU(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function OU(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function xS(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function LU(t,e,n){if(n===!1)return!1;const s=xS(t,n),r=xS(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function jU(t){let e,n,s,r;return Je(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function PP(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function bS(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],Bn(c)&&(i||e===0||ll(e)===ll(c))&&(e+=c)}return!u&&!s.all?0:e}function FU(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[i]:t[u]};return a}function kg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function BU(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function $U(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function zU(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function yS(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function wS(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,u=BU(i,o,s),d=e.length;let f;for(let p=0;p<d;++p){const m=e[p],{[l]:x,[c]:w}=m,g=m._stacks||(m._stacks={});f=g[c]=zU(r,u,x),f[a]=w,f._top=yS(f,o,!0,s.type),f._bottom=yS(f,o,!1,s.type);const b=f._visualValues||(f._visualValues={});b[a]=w}}function Sg(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function UU(t,e){return Do(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function WU(t,e,n){return Do(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ql(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const Cg=t=>t==="reset"||t==="none",vS=(t,e)=>e?t:Object.assign({},t),HU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:PP(n,!0),values:null};class va{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=kg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ql(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(d,f,p,m)=>d==="x"?f:d==="r"?m:p,i=n.xAxisID=Xe(s.xAxisID,Sg(e,"x")),o=n.yAxisID=Xe(s.yAxisID,Sg(e,"y")),a=n.rAxisID=Xe(s.rAxisID,Sg(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),u=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&nS(this._data,this),e._stacked&&Ql(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Je(n)){const r=this._cachedMeta;this._data=FU(n,r)}else if(s!==n){if(s){nS(s,this);const r=this._cachedMeta;Ql(r),r._parsed=[]}n&&Object.isExtensible(n)&&vz(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=kg(n.vScale,n),n.stack!==s.stack&&(r=!0,Ql(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(wS(this,n._parsed),n._stacked=kg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,d,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{Et(r[e])?f=this.parseArrayData(s,r,e,n):Je(r[e])?f=this.parseObjectData(s,r,e,n):f=this.parsePrimitiveData(s,r,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=d=f[u],l&&(p()&&(l=!1),c=d);s._sorted=l}o&&wS(this,f)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,d=new Array(r);let f,p,m;for(f=0,p=r;f<p;++f)m=f+s,d[f]={[a]:u||i.parse(c[m],m),[l]:o.parse(n[m],m)};return d}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,c,u,d;for(l=0,c=r;l<c;++l)u=l+s,d=n[u],a[l]={x:i.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,d,f,p;for(u=0,d=r;u<d;++u)f=u+s,p=n[f],c[u]={x:i.parse(wu(p,a),f),y:o.parse(wu(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:PP(r,!0),values:n._stacks[e.axis]._visualValues};return bS(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=bS(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=HU(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=$U(a);let f,p;function m(){p=r[f];const x=p[a.axis];return!Bn(p[e.axis])||u>x||d<x}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],Bn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=jU(Xe(this.options.clip,LU(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const d=r[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=WU(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=UU(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Xn(s);if(a)return vS(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(Dt.elements[e]),m=()=>this.getContext(s,r,n),x=c.resolveNamedOptions(f,p,m,d);return x.$shared&&(x.$shared=l,i[o]=Object.freeze(vS(x,l))),x}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,s,n))}const c=new Dy(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Cg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){Cg(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!Cg(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&Ql(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ie(va,"defaults",{}),ie(va,"datasetElementType",null),ie(va,"dataElementType",null);function VU(t,e,n){let s=1,r=1,i=0,o=0;if(e<nn){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),p=(v,y,S)=>Mf(v,a,l,!0)?1:Math.max(y,y*n,S,S*n),m=(v,y,S)=>Mf(v,a,l,!0)?-1:Math.min(y,y*n,S,S*n),x=p(0,c,d),w=p(sn,u,f),g=m(lt,c,d),b=m(lt+sn,u,f);s=(x-g)/2,r=(w-b)/2,i=-(x+g)/2,o=-(w+b)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class bc extends va{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(Je(s[e])){const{key:l="value"}=this._parsing;i=c=>+wu(s[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Xt(this.options.rotation-90)}_getCircumference(){return Xt(this.options.circumference)}_getRotationExtents(){let e=nn,n=-nn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(oz(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:x}=VU(d,u,l),w=(s.width-o)/f,g=(s.height-o)/p,b=Math.max(Math.min(w,g)/2,0),v=cP(this.options.radius,b),y=Math.max(v*l,0),S=(v-y)/this._getVisibleDatasetWeightTotal();this.offsetX=m*v,this.offsetY=x*v,r.total=this.calculateTotal(),this.outerRadius=v-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/nn)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=i&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:x,includeOptions:w}=this._getSharedOptions(n,r);let g=this._getRotation(),b;for(b=0;b<n;++b)g+=this._circumference(b,i);for(b=n;b<n+s;++b){const v=this._circumference(b,i),y=e[b],S={x:u+this.offsetX,y:d+this.offsetY,startAngle:g,endAngle:g+v,circumference:v,outerRadius:m,innerRadius:p};w&&(S.options=x||this.resolveDataElementOptions(b,y.active?"active":r)),g+=v,this.updateElement(y,b,S,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?nn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=Ey(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Xe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ie(bc,"id","doughnut"),ie(bc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ie(bc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ie(bc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class Sh extends va{getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:i}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=i.getLabelForValue(o.y);return{label:s[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,r=this.chart._animationsDisabled;let{start:i,count:o}=_z(n,s,r);if(this._drawStart=i,this._drawCount=o,Ez(n)&&(i=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,r),d=this.getSharedOptions(u),f=this.includeOptions(r,d),p=o.axis,m=a.axis,{spanGaps:x,segment:w}=this.options,g=So(x)?x:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||r==="none";let v=n>0&&this.getParsed(n-1);for(let y=n;y<n+s;++y){const S=e[y],C=this.getParsed(y),E=b?S:{},T=wt(C[m]),N=E[p]=o.getPixelForValue(C[p],y),_=E[m]=i||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[m],y);E.skip=isNaN(N)||isNaN(_)||T,E.stop=y>0&&Math.abs(C[p]-v[p])>g,w&&(E.parsed=C,E.raw=c.data[y]),f&&(E.options=d||this.resolveDataElementOptions(y,S.active?"active":r)),b||this.updateElement(S,y,E,r),v=C}this.updateSharedOptions(d,r,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=e.dataset,r=s.options&&s.options.borderWidth||0;if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,o)/2}}ie(Sh,"id","scatter"),ie(Sh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ie(Sh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Oi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ay{constructor(e){ie(this,"options");this.options=e||{}}static override(e){Object.assign(Ay.prototype,e)}init(){}formats(){return Oi()}parse(){return Oi()}format(){return Oi()}add(){return Oi()}diff(){return Oi()}startOf(){return Oi()}endOf(){return Oi()}}var YU={_date:Ay};function GU(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?yz:Qi;if(s){if(r._sharedOptions){const u=i[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=c(i,e,n-d),p=c(i,e,n+d);return{lo:f.lo,hi:p.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(x=>!wt(x[d.axis]));u.lo-=Math.max(0,p);const m=f.slice(u.hi).findIndex(x=>!wt(x[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:i.length-1}}function L0(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:d,hi:f}=GU(i[a],e,o,r);for(let p=d;p<=f;++p){const m=u[p];m.skip||s(m,c,p)}}}function qU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function _g(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||L0(t,n,e,function(a,l,c){!r&&!vu(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function KU(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:d}=ox(o,{x:e.x,y:e.y});Mf(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return L0(t,n,e,i),r}function XU(t,e,n,s,r,i){let o=[];const a=qU(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const p=u.inRange(e.x,e.y,r);if(s&&!p)return;const m=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(m))&&!p)return;const w=a(e,m);w<l?(o=[{element:u,datasetIndex:d,index:f}],l=w):w===l&&o.push({element:u,datasetIndex:d,index:f})}return L0(t,n,e,c),o}function Eg(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?KU(t,e,n,r):XU(t,e,n,s,r,i)}function kS(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return L0(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var QU={modes:{index(t,e,n,s){const r=$i(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?_g(t,r,i,s,o):Eg(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const r=$i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?_g(t,r,i,s,o):Eg(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const r=$i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return _g(t,r,i,s,o)},nearest(t,e,n,s){const r=$i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Eg(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=$i(e,t);return kS(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=$i(e,t);return kS(t,r,"y",n.intersect,s)}}};const TP=["left","top","right","bottom"];function Jl(t,e){return t.filter(n=>n.pos===e)}function SS(t,e){return t.filter(n=>TP.indexOf(n.pos)===-1&&n.box.axis===e)}function Zl(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function JU(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function ZU(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!TP.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function eW(t,e){const n=ZU(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=u?u*r:l&&e.availableHeight)}return n}function tW(t){const e=JU(t),n=Zl(e.filter(c=>c.box.fullSize),!0),s=Zl(Jl(e,"left"),!0),r=Zl(Jl(e,"right")),i=Zl(Jl(e,"top"),!0),o=Zl(Jl(e,"bottom")),a=SS(e,"x"),l=SS(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Jl(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function CS(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function MP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function nW(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!Je(r)){n.size&&(t[r]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[r]+=n.size}i.getPadding&&MP(o,i.getPadding());const a=Math.max(0,e.outerWidth-CS(o,t,"left","right")),l=Math.max(0,e.outerHeight-CS(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function sW(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function rW(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function yc(t,e,n,s){const r=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,rW(a.horizontal,e));const{same:d,other:f}=nW(e,n,a,s);c|=d&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&yc(r,e,n,s)||u}function Yd(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function _S(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;Xn(c.start)&&(o=c.start),l.fullSize?Yd(l,r.left,o,n.outerWidth-r.right-r.left,f):Yd(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;Xn(c.start)&&(i=c.start),l.fullSize?Yd(l,i,r.top,f,n.outerHeight-r.bottom-r.top):Yd(l,i,e.top+c.placed,f,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var fs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=mn(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=tW(t.boxes),l=a.vertical,c=a.horizontal;ht(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=l.reduce((x,w)=>w.box.options&&w.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);MP(f,mn(s));const p=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),m=eW(l.concat(c),d);yc(a.fullSize,p,d,m),yc(l,p,d,m),yc(c,p,d,m)&&yc(l,p,d,m),sW(p),_S(a.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,_S(a.rightAndBottom,p,d,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},ht(a.chartArea,x=>{const w=x.box;Object.assign(w,t.chartArea),w.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class IP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class iW extends IP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ch="$chartjs",oW={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ES=t=>t===null||t==="";function aW(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[Ch]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ES(r)){const i=hS(t,"width");i!==void 0&&(t.width=i)}if(ES(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=hS(t,"height");i!==void 0&&(t.height=i)}return t}const NP=mU?{passive:!0}:!1;function lW(t,e,n){t&&t.addEventListener(e,n,NP)}function cW(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,NP)}function uW(t,e){const n=oW[t.type]||t.type,{x:s,y:r}=$i(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Df(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function dW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Df(a.addedNodes,s),o=o&&!Df(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function hW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Df(a.removedNodes,s),o=o&&!Df(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Su=new Map;let PS=0;function DP(){const t=window.devicePixelRatio;t!==PS&&(PS=t,Su.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function fW(t,e){Su.size||window.addEventListener("resize",DP),Su.set(t,e)}function pW(t){Su.delete(t),Su.size||window.removeEventListener("resize",DP)}function gW(t,e,n){const s=t.canvas,r=s&&Ny(s);if(!r)return;const i=gP((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(r),fW(t,i),o}function Pg(t,e,n){n&&n.disconnect(),e==="resize"&&pW(t)}function mW(t,e,n){const s=t.canvas,r=gP(i=>{t.ctx!==null&&n(uW(i,t))},t);return lW(s,e,r),r}class xW extends IP{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(aW(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Ch])return!1;const s=n[Ch].initial;["height","width"].forEach(i=>{const o=s[i];wt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[Ch],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:dW,detach:hW,resize:gW}[n]||mW;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:Pg,detach:Pg,resize:Pg}[n]||cW)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return gU(e,n,s,r)}isAttached(e){const n=e&&Ny(e);return!!(n&&n.isConnected)}}function bW(t){return!Iy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?iW:xW}class xn{constructor(){ie(this,"x");ie(this,"y");ie(this,"active",!1);ie(this,"options");ie(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return So(this.x)&&So(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}}ie(xn,"defaults",{}),ie(xn,"defaultRoutes");function yW(t,e){const n=t.options.ticks,s=wW(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?kW(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return SW(e,c,i,o/r),c;const u=vW(i,e,r);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(Gd(e,c,u,wt(p)?0:a-p,a),d=0,f=o-1;d<f;d++)Gd(e,c,u,i[d],i[d+1]);return Gd(e,c,u,l,wt(p)?e.length:l+p),c}return Gd(e,c,u),c}function wW(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function vW(t,e,n){const s=CW(t),r=e.length/n;if(!s)return Math.max(r,1);const i=fz(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function kW(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function SW(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function Gd(t,e,n,s,r){const i=Xe(s,0),o=Math.min(Xe(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function CW(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const _W=t=>t==="left"?"right":t==="right"?"left":t,TS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,MS=(t,e)=>Math.min(e||t,t);function IS(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function EW(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<i-a||l>o+a)))return l}function PW(t,e){ht(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function ec(t){return t.drawTicks?t.tickLength:0}function NS(t,e){if(!t.display)return 0;const n=Ht(t.font,e),s=mn(t.padding);return(Et(t.text)?t.text.length:1)*n.lineHeight+s.height}function TW(t,e){return Do(t,{scale:e,type:"scale"})}function MW(t,e,n){return Do(t,{tick:n,index:e,type:"tick"})}function IW(t,e,n){let s=Cy(t);return(n&&e!=="right"||!n&&e==="right")&&(s=_W(s)),s}function NW(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,p,m;const x=o-r,w=a-i;if(t.isHorizontal()){if(p=hn(s,i,a),Je(n)){const g=Object.keys(n)[0],b=n[g];m=u[g].getPixelForValue(b)+x-e}else n==="center"?m=(c.bottom+c.top)/2+x-e:m=TS(t,n,e);f=a-i}else{if(Je(n)){const g=Object.keys(n)[0],b=n[g];p=u[g].getPixelForValue(b)-w+e}else n==="center"?p=(c.left+c.right)/2-w+e:p=TS(t,n,e);m=hn(s,o,r),d=n==="left"?-sn:sn}return{titleX:p,titleY:m,maxWidth:f,rotation:d}}class El extends xn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=zs(e,Number.POSITIVE_INFINITY),n=zs(n,Number.NEGATIVE_INFINITY),s=zs(s,Number.POSITIVE_INFINITY),r=zs(r,Number.NEGATIVE_INFINITY),{min:zs(e,s),max:zs(n,r),minDefined:Bn(e),maxDefined:Bn(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:zs(n,zs(s,n)),max:zs(s,zs(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){pt(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Gz(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?IS(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=yW(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){pt(this.options.afterUpdate,[this])}beforeSetDimensions(){pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){pt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),pt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=pt(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=MS(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=hs(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/s:p/(s-1),d+6>a&&(a=p/(s-(e.offset?.5:1)),l=this.maxHeight-ec(e.grid)-n.padding-NS(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=hP(Math.min(Math.asin(hs((u.highest.height+6)/a,-1,1)),Math.asin(hs(l/c,-1,1))-Math.asin(hs(f/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){pt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=NS(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ec(i)+l):(e.height=this.maxHeight,e.width=ec(i)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),p=s.padding*2,m=Xt(this.labelRotation),x=Math.cos(m),w=Math.sin(m);if(a){const g=s.mirror?0:w*d.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+g+p)}else{const g=s.mirror?0:x*d.width+w*f.height;e.width=Math.min(this.maxWidth,e.width+g+p)}this._calculatePadding(c,u,w,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=r*e.width,p=s*n.height):(f=s*e.height,p=r*n.width):i==="start"?p=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;i==="start"?(u=0,d=e.height):i==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){pt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)wt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=IS(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/MS(n,s));let c=0,u=0,d,f,p,m,x,w,g,b,v,y,S;for(d=0;d<n;d+=l){if(m=e[d].label,x=this._resolveTickFontOptions(d),r.font=w=x.string,g=i[w]=i[w]||{data:{},gc:[]},b=x.lineHeight,v=y=0,!wt(m)&&!Et(m))v=aS(r,g.data,g.gc,v,m),y=b;else if(Et(m))for(f=0,p=m.length;f<p;++f)S=m[f],!wt(S)&&!Et(S)&&(v=aS(r,g.data,g.gc,v,S),y+=b);o.push(v),a.push(y),c=Math.max(v,c),u=Math.max(y,u)}PW(i,n);const C=o.indexOf(c),E=a.indexOf(u),T=N=>({width:o[N]||0,height:a[N]||0});return{first:T(0),last:T(n-1),widest:T(C),highest:T(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return bz(this._alignToPixels?Ri(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=MW(this.getContext(),e,s))}return this.$context||(this.$context=TW(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Xt(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=ec(i),p=[],m=a.setContext(this.getContext()),x=m.display?m.width:0,w=x/2,g=function(F){return Ri(s,F,x)};let b,v,y,S,C,E,T,N,_,D,A,R;if(o==="top")b=g(this.bottom),E=this.bottom-f,N=b-w,D=g(e.top)+w,R=e.bottom;else if(o==="bottom")b=g(this.top),D=e.top,R=g(e.bottom)-w,E=b+w,N=this.top+f;else if(o==="left")b=g(this.right),C=this.right-f,T=b-w,_=g(e.left)+w,A=e.right;else if(o==="right")b=g(this.left),_=e.left,A=g(e.right)-w,C=b+w,T=this.left+f;else if(n==="x"){if(o==="center")b=g((e.top+e.bottom)/2+.5);else if(Je(o)){const F=Object.keys(o)[0],$=o[F];b=g(this.chart.scales[F].getPixelForValue($))}D=e.top,R=e.bottom,E=b+w,N=E+f}else if(n==="y"){if(o==="center")b=g((e.left+e.right)/2);else if(Je(o)){const F=Object.keys(o)[0],$=o[F];b=g(this.chart.scales[F].getPixelForValue($))}C=b-w,T=C-f,_=e.left,A=e.right}const z=Xe(r.ticks.maxTicksLimit,d),L=Math.max(1,Math.ceil(d/z));for(v=0;v<d;v+=L){const F=this.getContext(v),$=i.setContext(F),O=a.setContext(F),B=$.lineWidth,M=$.color,H=O.dash||[],j=O.dashOffset,P=$.tickWidth,X=$.tickColor,se=$.tickBorderDash||[],K=$.tickBorderDashOffset;y=EW(this,v,l),y!==void 0&&(S=Ri(s,y,B),c?C=T=_=A=S:E=N=D=R=S,p.push({tx1:C,ty1:E,tx2:T,ty2:N,x1:_,y1:D,x2:A,y2:R,width:B,color:M,borderDash:H,borderDashOffset:j,tickWidth:P,tickColor:X,tickBorderDash:se,tickBorderDashOffset:K}))}return this._ticksLength=d,this._borderValue=b,p}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=i,f=ec(s.grid),p=f+u,m=d?-u:p,x=-Xt(this.labelRotation),w=[];let g,b,v,y,S,C,E,T,N,_,D,A,R="middle";if(r==="top")C=this.bottom-m,E=this._getXAxisLabelAlignment();else if(r==="bottom")C=this.top+m,E=this._getXAxisLabelAlignment();else if(r==="left"){const L=this._getYAxisLabelAlignment(f);E=L.textAlign,S=L.x}else if(r==="right"){const L=this._getYAxisLabelAlignment(f);E=L.textAlign,S=L.x}else if(n==="x"){if(r==="center")C=(e.top+e.bottom)/2+p;else if(Je(r)){const L=Object.keys(r)[0],F=r[L];C=this.chart.scales[L].getPixelForValue(F)+p}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")S=(e.left+e.right)/2-p;else if(Je(r)){const L=Object.keys(r)[0],F=r[L];S=this.chart.scales[L].getPixelForValue(F)}E=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const z=this._getLabelSizes();for(g=0,b=a.length;g<b;++g){v=a[g],y=v.label;const L=i.setContext(this.getContext(g));T=this.getPixelForTick(g)+i.labelOffset,N=this._resolveTickFontOptions(g),_=N.lineHeight,D=Et(y)?y.length:1;const F=D/2,$=L.color,O=L.textStrokeColor,B=L.textStrokeWidth;let M=E;o?(S=T,E==="inner"&&(g===b-1?M=this.options.reverse?"left":"right":g===0?M=this.options.reverse?"right":"left":M="center"),r==="top"?c==="near"||x!==0?A=-D*_+_/2:c==="center"?A=-z.highest.height/2-F*_+_:A=-z.highest.height+_/2:c==="near"||x!==0?A=_/2:c==="center"?A=z.highest.height/2-F*_:A=z.highest.height-D*_,d&&(A*=-1),x!==0&&!L.showLabelBackdrop&&(S+=_/2*Math.sin(x))):(C=T,A=(1-D)*_/2);let H;if(L.showLabelBackdrop){const j=mn(L.backdropPadding),P=z.heights[g],X=z.widths[g];let se=A-j.top,K=0-j.left;switch(R){case"middle":se-=P/2;break;case"bottom":se-=P;break}switch(E){case"center":K-=X/2;break;case"right":K-=X;break;case"inner":g===b-1?K-=X:g>0&&(K-=X/2);break}H={left:K,top:se,width:X+j.width,height:P+j.height,color:L.backdropColor}}w.push({label:y,font:N,textOffset:A,options:{rotation:x,color:$,strokeColor:O,strokeWidth:B,textAlign:M,textBaseline:R,translation:[S,C],backdrop:H}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Xt(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+i,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=Ri(e,this.left,o)-o/2,u=Ri(e,this.right,a)+a/2,d=f=l):(d=Ri(e,this.top,o)-o/2,f=Ri(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&A0(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;ku(s,c,0,u,l,a)}r&&R0(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=Ht(s.font),o=mn(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Je(n)?(l+=o.bottom,Et(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=NW(this,l,n,a);ku(e,s.text,0,0,i,{color:s.color,maxWidth:d,rotation:f,textAlign:IW(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Xe(e.grid&&e.grid.z,-1),r=Xe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==El.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ht(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class qd{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;RW(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,DW(e,o,s),this.override&&Dt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in Dt[r]&&(delete Dt[r][s],this.override&&delete Co[s])}}function DW(t,e,n){const s=yu(Object.create(null),[n?Dt.get(n):{},Dt.get(e),t.defaults]);Dt.set(e,s),t.defaultRoutes&&AW(e,t.defaultRoutes),t.descriptors&&Dt.describe(e,t.descriptors)}function AW(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Dt.route(i,r,l,a)})}function RW(t){return"id"in t&&"defaults"in t}class OW{constructor(){this.controllers=new qd(va,"datasets",!0),this.elements=new qd(xn,"elements"),this.plugins=new qd(Object,"plugins"),this.scales=new qd(El,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):ht(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=vy(e);pt(s["before"+r],[],s),n[e](s),pt(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var Vs=new OW;class LW{constructor(){this._init=void 0}notify(e,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(pt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){wt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=Xe(s.options&&s.options.plugins,{}),i=jW(s);return r===!1&&!n?[]:BW(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function jW(t){const e={},n=[],s=Object.keys(Vs.plugins.items);for(let i=0;i<s.length;i++)n.push(Vs.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function FW(t,e){return!e&&t===!1?null:t===!0?{}:t}function BW(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=FW(s[l],r);c!==null&&i.push({plugin:a,options:$W(t.config,{plugin:a,local:n[l]},c,o)})}return i}function $W(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function cx(t,e){const n=Dt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function zW(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function UW(t,e){return t===e?"_index_":"_value_"}function DS(t){if(t==="x"||t==="y"||t==="r")return t}function WW(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ux(t,...e){if(DS(t))return t;for(const n of e){const s=n.axis||WW(n.position)||t.length>1&&DS(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function AS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function HW(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return AS(t,"x",n[0])||AS(t,"y",n[0])}return{}}function VW(t,e){const n=Co[t.type]||{scales:{}},s=e.scales||{},r=cx(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Je(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ux(o,a,HW(o,t),Dt.scales[a.type]),c=UW(l,r),u=n.scales||{};i[o]=$c(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||cx(a,e),u=(Co[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=zW(d,l),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),$c(i[p],[{axis:f},s[p],u[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];$c(a,[Dt.scales[a.type],Dt.scale])}),i}function AP(t){const e=t.options||(t.options={});e.plugins=Xe(e.plugins,{}),e.scales=VW(t,e)}function RP(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function YW(t){return t=t||{},t.data=RP(t.data),AP(t),t}const RS=new Map,OP=new Set;function Kd(t,e){let n=RS.get(t);return n||(n=e(),RS.set(t,n),OP.add(n)),n}const tc=(t,e,n)=>{const s=wu(e,n);s!==void 0&&t.add(s)};class GW{constructor(e){this._config=YW(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=RP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),AP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Kd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Kd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Kd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Kd(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>tc(l,e,d))),u.forEach(d=>tc(l,r,d)),u.forEach(d=>tc(l,Co[i]||{},d)),u.forEach(d=>tc(l,Dt,d)),u.forEach(d=>tc(l,ax,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),OP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Co[n]||{},Dt.datasets[n]||{},{type:n},Dt,ax]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=OS(this._resolverCache,e,r);let l=o;if(KW(o,n)){i.$shared=!1,s=jn(s)?s():s;const c=this.createResolver(e,s,a);l=ul(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,s=[""],r){const{resolver:i}=OS(this._resolverCache,e,s);return Je(n)?ul(i,n,void 0,r):i}}function OS(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:Py(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const qW=t=>Je(t)&&Object.getOwnPropertyNames(t).some(e=>jn(t[e]));function KW(t,e){const{isScriptable:n,isIndexable:s}=yP(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(jn(a)||qW(a))||o&&Et(a))return!0}return!1}var XW="4.5.1";const QW=["top","bottom","left","right","chartArea"];function LS(t,e){return t==="top"||t==="bottom"||QW.indexOf(t)===-1&&e==="x"}function jS(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function FS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),pt(n&&n.onComplete,[t],e)}function JW(t){const e=t.chart,n=e.options.animation;pt(n&&n.onProgress,[t],e)}function LP(t){return Iy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _h={},BS=t=>{const e=LP(t);return Object.values(_h).filter(n=>n.canvas===e).pop()};function ZW(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function eH(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var Hr;let co=(Hr=class{static register(...e){Vs.add(...e),$S()}static unregister(...e){Vs.remove(...e),$S()}constructor(e,n){const s=this.config=new GW(n),r=LP(e),i=BS(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||bW(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=iz(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new LW,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Sz(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],_h[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}cr.listen(this,"complete",FS),cr.listen(this,"progress",JW),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return wt(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():dS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return lS(this.canvas,this.ctx),this}stop(){return cr.stop(this),this}resize(e,n){cr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,dS(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),pt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ht(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=ux(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ht(i,o=>{const a=o.options,l=a.id,c=ux(l,a),u=Xe(a.type,o.dtype);(a.position===void 0||LS(a.position,c)!==LS(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in s&&s[l].type===u)d=s[l];else{const f=Vs.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,e)}),ht(r,(o,a)=>{o||delete s[a]}),ht(s,o=>{fs.configure(this,o,o.options),fs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(jS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||cx(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Vs.getController(a),{datasetElementType:c,dataElementType:u}=Dt.datasets[a];Object.assign(l,{dataElementType:Vs.getElement(u),datasetElementType:c&&Vs.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ht(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&i.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||ht(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(jS("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ht(this.scales,e=>{fs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!Zk(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;ZW(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!Zk(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fs.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],ht(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,jn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cr.has(this)?this.attached&&!cr.running(this)&&cr.start(this):(this.draw(),FS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=IU(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&A0(n,r),e.controller.draw(),r&&R0(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return vu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=QU.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Do(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Xn(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),cr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),lS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete _h[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};ht(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ht(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ht(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!_f(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=dz(e),c=eH(e,this._lastEvent,s,l);s&&(this._lastEvent=null,pt(i.onHover,[e,a,this],this),l&&pt(i.onClick,[e,a,this],this));const u=!_f(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},ie(Hr,"defaults",Dt),ie(Hr,"instances",_h),ie(Hr,"overrides",Co),ie(Hr,"registry",Vs),ie(Hr,"version",XW),ie(Hr,"getChart",BS),Hr);function $S(){return ht(co.instances,t=>t._plugins.invalidate())}function jP(t,e,n=e){t.lineCap=Xe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Xe(n.borderDash,e.borderDash)),t.lineDashOffset=Xe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Xe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Xe(n.borderWidth,e.borderWidth),t.strokeStyle=Xe(n.borderColor,e.borderColor)}function tH(t,e,n){t.lineTo(n.x,n.y)}function nH(t){return t.stepped?jz:t.tension||t.cubicInterpolationMode==="monotone"?Fz:tH}function FP(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(i,a),u=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function sH(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:c}=FP(r,n,s),u=nH(i);let{move:d=!0,reverse:f}=s||{},p,m,x;for(p=0;p<=c;++p)m=r[(a+(f?c-p:p))%o],!m.skip&&(d?(t.moveTo(m.x,m.y),d=!1):u(t,x,m,f,i.stepped),x=m);return l&&(m=r[(a+(f?c:0))%o],u(t,x,m,f,i.stepped)),!!l}function rH(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=FP(r,n,s),{move:l=!0,reverse:c}=s||{};let u=0,d=0,f,p,m,x,w,g;const b=y=>(o+(c?a-y:y))%i,v=()=>{x!==w&&(t.lineTo(u,w),t.lineTo(u,x),t.lineTo(u,g))};for(l&&(p=r[b(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=r[b(f)],p.skip)continue;const y=p.x,S=p.y,C=y|0;C===m?(S<x?x=S:S>w&&(w=S),u=(d*u+y)/++d):(v(),t.lineTo(y,S),m=C,d=0,x=w=S),g=S}v()}function dx(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?rH:sH}function iH(t){return t.stepped?xU:t.tension||t.cubicInterpolationMode==="monotone"?bU:zi}function oH(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),jP(t,e.options),t.stroke(r)}function aH(t,e,n,s){const{segments:r,options:i}=e,o=dx(e);for(const a of r)jP(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const lH=typeof Path2D=="function";function cH(t,e,n,s){lH&&!e.options.segment?oH(t,e,n,s):aH(t,e,n,s)}class wc extends xn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;cU(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=EU(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=SU(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=iH(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],p=i[d],m=i[f];if(p===m){a.push(p);continue}const x=Math.abs((r-p[n])/(m[n]-p[n])),w=l(p,m,x,s.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,s){return dx(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=dx(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),cH(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ie(wc,"id","line"),ie(wc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ie(wc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ie(wc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function zS(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class Eh extends xn{constructor(n){super();ie(this,"parsed");ie(this,"skip");ie(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return zS(this,n,"x",s)}inYRange(n,s){return zS(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!vu(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,lx(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ie(Eh,"id","point"),ie(Eh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ie(Eh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const US=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},uH=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class WS extends xn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=pt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=Ht(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=US(s,i);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let d=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,x)=>{const w=s+n/2+i.measureText(m.text).width;(x===0||c[c.length-1]+w+2*a>o)&&(d+=u,c[c.length-(x>0?0:1)]=0,p+=u,f++),l[x]={left:0,top:p,row:f,width:w,height:r},c[c.length-1]+=w+a}),d}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,p=0,m=0,x=0;return this.legendItems.forEach((w,g)=>{const{itemWidth:b,itemHeight:v}=dH(s,n,i,w,r);g>0&&p+v+2*a>u&&(d+=f+a,c.push({width:f,height:p}),m+=f+a,x++,f=p=0),l[g]={left:m,top:p,col:x,width:b,height:v},f=Math.max(f,b),p+=v+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=wa(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=hn(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=hn(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=hn(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=hn(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;A0(e,this),this._draw(),R0(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=Dt.color,l=wa(e.rtl,this.left,this.width),c=Ht(o.font),{padding:u}=o,d=c.size,f=d/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:m,boxHeight:x,itemHeight:w}=US(o,d),g=function(C,E,T){if(isNaN(m)||m<=0||isNaN(x)||x<0)return;r.save();const N=Xe(T.lineWidth,1);if(r.fillStyle=Xe(T.fillStyle,a),r.lineCap=Xe(T.lineCap,"butt"),r.lineDashOffset=Xe(T.lineDashOffset,0),r.lineJoin=Xe(T.lineJoin,"miter"),r.lineWidth=N,r.strokeStyle=Xe(T.strokeStyle,a),r.setLineDash(Xe(T.lineDash,[])),o.usePointStyle){const _={radius:x*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:N},D=l.xPlus(C,m/2),A=E+f;xP(r,_,D,A,o.pointStyleWidth&&m)}else{const _=E+Math.max((d-x)/2,0),D=l.leftForLtr(C,m),A=ya(T.borderRadius);r.beginPath(),Object.values(A).some(R=>R!==0)?If(r,{x:D,y:_,w:m,h:x,radius:A}):r.rect(D,_,m,x),r.fill(),N!==0&&r.stroke()}r.restore()},b=function(C,E,T){ku(r,T.text,C,E+w/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},v=this.isHorizontal(),y=this._computeTitleHeight();v?p={x:hn(i,this.left+u,this.right-s[0]),y:this.top+u+y,line:0}:p={x:this.left+u,y:hn(i,this.top+y+u,this.bottom-n[0].height),line:0},CP(this.ctx,e.textDirection);const S=w+u;this.legendItems.forEach((C,E)=>{r.strokeStyle=C.fontColor,r.fillStyle=C.fontColor;const T=r.measureText(C.text).width,N=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),_=m+f+T;let D=p.x,A=p.y;l.setWidth(this.width),v?E>0&&D+_+u>this.right&&(A=p.y+=S,p.line++,D=p.x=hn(i,this.left+u,this.right-s[p.line])):E>0&&A+S>this.bottom&&(D=p.x=D+n[p.line].width+u,p.line++,A=p.y=hn(i,this.top+y+u,this.bottom-n[p.line].height));const R=l.x(D);if(g(R,A,C),D=Cz(N,D+m+f,v?D+_:this.right,e.rtl),b(l.x(D),A,C),v)p.x+=_+u;else if(typeof C.text!="string"){const z=c.lineHeight;p.y+=BP(C,z)+u}else p.y+=S}),_P(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Ht(n.font),r=mn(n.padding);if(!n.display)return;const i=wa(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=hn(e.align,d,this.right-f);else{const m=this.columnSizes.reduce((x,w)=>Math.max(x,w.height),0);u=c+hn(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=hn(a,d,d+f);o.textAlign=i.textAlign(Cy(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,ku(o,n.text,p,u,s)}_computeTitleHeight(){const e=this.options.title,n=Ht(e.font),s=mn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(xc(e,this.left,this.right)&&xc(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],xc(e,r.left,r.left+r.width)&&xc(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!pH(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=uH(r,s);r&&!i&&pt(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&pt(n.onHover,[e,s,this],this)}else s&&pt(n.onClick,[e,s,this],this)}}function dH(t,e,n,s,r){const i=hH(s,t,e,n),o=fH(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function hH(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function fH(t,e,n){let s=t;return typeof e.text!="string"&&(s=BP(e,n)),s}function BP(t,e){const n=t.text?t.text.length:0;return e*n}function pH(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var gH={id:"legend",_element:WS,start(t,e,n){const s=t.legend=new WS({ctx:t.ctx,options:n,chart:t});fs.configure(t,s,n),fs.addBox(t,s)},stop(t){fs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;fs.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=mn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class $P extends xn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Et(s.text)?s.text.length:1;this._padding=mn(s.padding);const i=r*Ht(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=hn(a,s,i),d=n+e,c=i-s):(o.position==="left"?(u=s+e,d=hn(a,r,n),l=lt*-.5):(u=i-e,d=hn(a,n,r),l=lt*.5),c=r-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Ht(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);ku(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:Cy(n.align),textBaseline:"middle",translation:[o,a]})}}function mH(t,e){const n=new $P({ctx:t.ctx,options:e,chart:t});fs.configure(t,n,e),fs.addBox(t,n),t.titleBlock=n}var xH={id:"title",_element:$P,start(t,e,n){mH(t,n)},stop(t){const e=t.titleBlock;fs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;fs.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vc={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=cl(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Ws(t,e){return e&&(Et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ur(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function bH(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function HS(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Ht(e.bodyFont),c=Ht(e.titleFont),u=Ht(e.footerFont),d=i.length,f=r.length,p=s.length,m=mn(e.padding);let x=m.height,w=0,g=s.reduce((y,S)=>y+S.before.length+S.lines.length+S.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),g){const y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=p*y+(g-p)*l.lineHeight+(g-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let b=0;const v=function(y){w=Math.max(w,n.measureText(y).width+b)};return n.save(),n.font=c.string,ht(t.title,v),n.font=l.string,ht(t.beforeBody.concat(t.afterBody),v),b=e.displayColors?o+2+e.boxPadding:0,ht(s,y=>{ht(y.before,v),ht(y.lines,v),ht(y.after,v)}),b=0,n.font=u.string,ht(t.footer,v),n.restore(),w+=m.width,{width:w,height:x}}function yH(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function wH(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function vH(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),wH(c,t,e,n)&&(c="center"),c}function VS(t,e,n){const s=n.yAlign||e.yAlign||yH(t,n);return{xAlign:n.xAlign||e.xAlign||vH(t,e,n,s),yAlign:s}}function kH(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function SH(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function YS(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=ya(o);let m=kH(e,a);const x=SH(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+r:a==="right"&&(m+=Math.max(d,p)+r),{x:hs(m,0,s.width-e.width),y:hs(x,0,s.height-e.height)}}function Xd(t,e,n){const s=mn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function GS(t){return Ws([],ur(t))}function CH(t,e,n){return Do(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function qS(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const zP={beforeTitle:lr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:lr,beforeBody:lr,beforeLabel:lr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return wt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:lr,afterBody:lr,beforeFooter:lr,footer:lr,afterFooter:lr};function En(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?zP[e].call(n,s):r}class hx extends xn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new Dy(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=CH(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=En(s,"beforeTitle",this,e),i=En(s,"title",this,e),o=En(s,"afterTitle",this,e);let a=[];return a=Ws(a,ur(r)),a=Ws(a,ur(i)),a=Ws(a,ur(o)),a}getBeforeBody(e,n){return GS(En(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return ht(e,i=>{const o={before:[],lines:[],after:[]},a=qS(s,i);Ws(o.before,ur(En(a,"beforeLabel",this,i))),Ws(o.lines,En(a,"label",this,i)),Ws(o.after,ur(En(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return GS(En(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=En(s,"beforeFooter",this,e),i=En(s,"footer",this,e),o=En(s,"afterFooter",this,e);let a=[];return a=Ws(a,ur(r)),a=Ws(a,ur(i)),a=Ws(a,ur(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(bH(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,s))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,s))),ht(a,u=>{const d=qS(e.callbacks,u);r.push(En(d,"labelColor",this,u)),i.push(En(d,"labelPointStyle",this,u)),o.push(En(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=vc[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=HS(this,s),c=Object.assign({},a,l),u=VS(this.chart,s,c),d=YS(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=ya(a),{x:f,y:p}=e,{width:m,height:x}=n;let w,g,b,v,y,S;return i==="center"?(y=p+x/2,r==="left"?(w=f,g=w-o,v=y+o,S=y-o):(w=f+m,g=w+o,v=y-o,S=y+o),b=w):(r==="left"?g=f+Math.max(l,u)+o:r==="right"?g=f+m-Math.max(c,d)-o:g=this.caretX,i==="top"?(v=p,y=v-o,w=g-o,b=g+o):(v=p+x,y=v+o,w=g+o,b=g-o),S=v),{x1:w,x2:g,x3:b,y1:v,y2:y,y3:S}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=wa(s.rtl,this.x,this.width);for(e.x=Xd(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Ht(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,u=Ht(i.bodyFont),d=Xd(this,"left",i),f=r.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+p;if(i.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(f,c)+c/2,g=m+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,lx(e,x,w,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,lx(e,x,w,g)}else{e.lineWidth=Je(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(f,c),w=r.leftForLtr(r.xPlus(f,1),c-2),g=ya(o.borderRadius);Object.values(g).some(b=>b!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,If(e,{x,y:m,w:c,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),If(e,{x:w,y:m+1,w:c-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(x,m,c,l),e.strokeRect(x,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,d=Ht(s.bodyFont);let f=d.lineHeight,p=0;const m=wa(s.rtl,this.x,this.width),x=function(T){n.fillText(T,m.x(e.x+p),e.y+f/2),e.y+=f+i},w=m.textAlign(o);let g,b,v,y,S,C,E;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Xd(this,w,s),n.fillStyle=s.bodyColor,ht(this.beforeBody,x),p=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,y=0,C=r.length;y<C;++y){for(g=r[y],b=this.labelTextColors[y],n.fillStyle=b,ht(g.before,x),v=g.lines,a&&v.length&&(this._drawColorBox(n,e,y,m,s),f=Math.max(d.lineHeight,l)),S=0,E=v.length;S<E;++S)x(v[S]),f=d.lineHeight;ht(g.after,x)}p=0,f=d.lineHeight,ht(this.afterBody,x),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=wa(s.rtl,this.x,this.width);for(e.x=Xd(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Ht(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:m}=ya(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=vc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=HS(this,e),l=Object.assign({},o,this._size),c=VS(n,e,l),u=YS(e,l,c,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=mn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),CP(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),_P(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!_f(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!_f(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=vc[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}ie(hx,"positioners",vc);var _H={id:"tooltip",_element:hx,positioners:vc,afterInit(t,e,n){n&&(t.tooltip=new hx({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:zP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const EH=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function PH(t,e,n,s){const r=t.indexOf(e);if(r===-1)return EH(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const TH=(t,e)=>t===null?null:hs(Math.round(t),0,e);function KS(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class fx extends El{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(wt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:PH(s,e,Xe(n,e),this._addedLabels),TH(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return KS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ie(fx,"id","category"),ie(fx,"defaults",{ticks:{callback:KS}});function MH(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,p=i||1,m=u-1,{min:x,max:w}=e,g=!wt(o),b=!wt(a),v=!wt(c),y=(w-x)/(d+1);let S=eS((w-x)/m/p)*p,C,E,T,N;if(S<1e-14&&!g&&!b)return[{value:x},{value:w}];N=Math.ceil(w/S)-Math.floor(x/S),N>m&&(S=eS(N*S/m/p)*p),wt(l)||(C=Math.pow(10,l),S=Math.ceil(S*C)/C),r==="ticks"?(E=Math.floor(x/S)*S,T=Math.ceil(w/S)*S):(E=x,T=w),g&&b&&i&&gz((a-o)/i,S/1e3)?(N=Math.round(Math.min((a-o)/S,u)),S=(a-o)/N,E=o,T=a):v?(E=g?o:E,T=b?a:T,N=c-1,S=(T-E)/N):(N=(T-E)/S,zc(N,Math.round(N),S/1e3)?N=Math.round(N):N=Math.ceil(N));const _=Math.max(tS(S),tS(E));C=Math.pow(10,wt(l)?_:l),E=Math.round(E*C)/C,T=Math.round(T*C)/C;let D=0;for(g&&(f&&E!==o?(n.push({value:o}),E<o&&D++,zc(Math.round((E+D*S)*C)/C,o,XS(o,y,t))&&D++):E<o&&D++);D<N;++D){const A=Math.round((E+D*S)*C)/C;if(b&&A>a)break;n.push({value:A})}return b&&f&&T!==a?n.length&&zc(n[n.length-1].value,a,XS(a,y,t))?n[n.length-1].value=a:n.push({value:a}):(!b||T===a)&&n.push({value:T}),n}function XS(t,e,{horizontal:n,minRotation:s}){const r=Xt(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class IH extends El{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return wt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=ll(r),c=ll(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=MH(r,i);return e.bounds==="ticks"&&mz(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return Ey(e,this.chart.options.locale,this.options.ticks.format)}}class px extends IH{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Bn(e)?e:0,this.max=Bn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Xt(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ie(px,"id","linear"),ie(px,"defaults",{ticks:{callback:mP.formatters.numeric}});const j0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Nn=Object.keys(j0);function QS(t,e){return t-e}function JS(t,e){if(wt(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Bn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(So(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function ZS(t,e,n,s){const r=Nn.length;for(let i=Nn.indexOf(t);i<r-1;++i){const o=j0[Nn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return Nn[i]}return Nn[r-1]}function NH(t,e,n,s,r){for(let i=Nn.length-1;i>=Nn.indexOf(n);i--){const o=Nn[i];if(j0[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return Nn[n?Nn.indexOf(n):0]}function DH(t){for(let e=Nn.indexOf(t)+1,n=Nn.length;e<n;++e)if(j0[Nn[e]].common)return Nn[e]}function e2(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=Sy(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function AH(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function t2(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:AH(t,s,r,n)}class Af extends El{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new YU._date(e.adapters.date);r.init(n),$c(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:JS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Bn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Bn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=wz(r,i,o);return this._unit=n.unit||(s.autoSkip?ZS(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):NH(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:DH(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),t2(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=hs(n,0,o),s=hs(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||ZS(i.minUnit,n,s,this._getLabelCapacity(n)),a=Xe(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=So(l)||l===!0,u={};let d=n,f,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const m=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<s;f=+e.add(f,a,o),p++)e2(u,f,m);return(f===s||r.bounds==="ticks"||p===1)&&e2(u,f,m),Object.keys(u).sort(QS).map(x=>+x)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return pt(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=s[n],p=c&&d&&f&&f.major;return this._adapter.format(e,r||(p?d:u))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Xt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,t2(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(JS(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return kz(e.sort(QS))}}ie(Af,"id","time"),ie(Af,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Qd(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=Qi(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=Qi(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class n2 extends Af{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Qd(n,this.min),this._tableRange=Qd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Qd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Qd(this._table,s*this._tableRange+this._minPos,!0)}}ie(n2,"id","timeseries"),ie(n2,"defaults",Af.defaults);const UP="label";function s2(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function RH(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function WP(t,e){t.labels=e}function HP(t,e,n=UP){const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function OH(t,e=UP){const n={labels:[],datasets:[]};return WP(n,t.labels),HP(n,t.datasets,e),n}function LH(t,e){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...f}=t,p=k.useRef(null),m=k.useRef(null),x=()=>{p.current&&(m.current=new co(p.current,{type:o,data:OH(a,i),options:l&&{...l},plugins:c}),s2(e,m.current))},w=()=>{s2(e,null),m.current&&(m.current.destroy(),m.current=null)};return k.useEffect(()=>{!r&&m.current&&l&&RH(m.current,l)},[r,l]),k.useEffect(()=>{!r&&m.current&&WP(m.current.config.data,a.labels)},[r,a.labels]),k.useEffect(()=>{!r&&m.current&&a.datasets&&HP(m.current.config.data,a.datasets,i)},[r,a.datasets]),k.useEffect(()=>{m.current&&(r?(w(),setTimeout(x)):m.current.update(d))},[r,l,a.labels,a.datasets,d]),k.useEffect(()=>{m.current&&(w(),setTimeout(x))},[o]),k.useEffect(()=>(x(),()=>w()),[]),h.jsx("canvas",{ref:p,role:"img",height:n,width:s,...f,children:u})}const jH=k.forwardRef(LH);function FH(t,e){return co.register(e),k.forwardRef((n,s)=>h.jsx(jH,{...n,ref:s,type:t}))}const BH=FH("scatter",Sh);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const r2={modes:{point(t,e){return Ph(t,e,{intersect:!0})},nearest(t,e,n){return UH(t,e,n)},x(t,e,n){return Ph(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return Ph(t,e,{intersect:n.intersect,axis:"y"})}}};function Ry(t,e,n){return(r2.modes[n.mode]||r2.modes.nearest)(t,e,n)}function $H(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function zH(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function Ph(t,e,n){return t.filter(s=>n.intersect?s.inRange(e.x,e.y):$H(s,e,n.axis))}function UH(t,e,n){let s=Number.POSITIVE_INFINITY;return Ph(t,e,n).reduce((r,i)=>{const o=i.getCenterPoint(),a=zH(e,o,n.axis),l=cl(e,a);return l<s?(r=[i],s=l):l===s&&r.push(i),r},[]).sort((r,i)=>r._index-i._index).slice(0,1)}function Ao(t,e,n){const s=Math.cos(n),r=Math.sin(n),i=e.x,o=e.y;return{x:i+s*(t.x-i)-r*(t.y-o),y:o+r*(t.x-i)+s*(t.y-o)}}const WH=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Ji=.001,F0=(t,e,n)=>Math.min(n,Math.max(e,t)),VP=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function HH(t,e,n){for(const s of Object.keys(t))t[s]=F0(t[s],e,n);return t}function VH(t,e,n,s){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function YP(t,{x:e,y:n,x2:s,y2:r},i,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=t.x>=e-l-Ji&&t.x<=s+l+Ji,u=t.y>=n-l-Ji&&t.y<=r+l+Ji;return i==="x"?c:(i==="y"||c)&&u}function GP(t,{rect:e,center:n},s,{rotation:r,borderWidth:i,hitTolerance:o}){const a=Ao(t,n,Xt(-r));return YP(a,e,s,{borderWidth:i,hitTolerance:o})}function Ro(t,e){const{centerX:n,centerY:s}=t.getProps(["centerX","centerY"],e);return{x:n,y:s}}function YH(t,e,n,s=!0){const r=n.split(".");let i=0;for(const o of e.split(".")){const a=r[i++];if(parseInt(o,10)<parseInt(a,10))break;if(WH(a,o)){if(s)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const qP=t=>typeof t=="string"&&t.endsWith("%"),KP=t=>parseFloat(t)/100,XP=t=>F0(KP(t),0,1),nc=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),GH={box:t=>nc(t.centerX,t.centerY),doughnutLabel:t=>nc(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>nc(t.centerX,t.centerY),line:t=>nc(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>nc(t.centerX,t.centerY)};function Oy(t,e){return e==="start"?0:e==="end"?t:qP(e)?XP(e)*t:t/2}function Si(t,e,n=!0){return typeof e=="number"?e:qP(e)?(n?XP(e):KP(e))*t:t}function qH(t,e){const{x:n,width:s}=t,r=e.textAlign;return r==="center"?n+s/2:r==="end"||r==="right"?n+s:n}function QP(t,e,{borderWidth:n,position:s,xAdjust:r,yAdjust:i},o){const a=Je(o),l=e.width+(a?o.width:0)+n,c=e.height+(a?o.height:0)+n,u=Ly(s),d=i2(t.x,l,r,u.x),f=i2(t.y,c,i,u.y);return{x:d,y:f,x2:d+l,y2:f+c,width:l,height:c,centerX:d+l/2,centerY:f+c/2}}function Ly(t,e="center"){return Je(t)?{x:Xe(t.x,e),y:Xe(t.y,e)}:(t=Xe(t,e),{x:t,y:t})}const JP=(t,e)=>t&&t.autoFit&&e<1;function ZP(t,e){const n=t.font,s=Et(n)?n:[n];return JP(t,e)?s.map(function(r){const i=Ht(r);return i.size=Math.floor(r.size*e),i.lineHeight=r.lineHeight,Ht(i)}):s.map(r=>Ht(r))}function eT(t){return t&&(Xn(t.xValue)||Xn(t.yValue))}function i2(t,e,n=0,s){return t-Oy(e,s)+n}function Pl(t,e,n){const s=n.init;if(s){if(s===!0)return nT(e,n)}else return;return KH(t,e,n)}function tT(t,e,n){let s=!1;return e.forEach(r=>{jn(t[r])?(s=!0,n[r]=t[r]):Xn(n[r])&&delete n[r]}),s}function nT(t,e){const n=e.type||"line";return GH[n](t)}function KH(t,e,n){const s=pt(n.init,[{chart:t,properties:e,options:n}]);if(s===!0)return nT(e,n);if(Je(s))return s}const Tg=new Map,XH=t=>isNaN(t)||t<=0,QH=t=>t.reduce(function(e,n){return e+=n.string,e},"");function B0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function $0(t,{x:e,y:n},s){s&&(t.translate(e,n),t.rotate(Xt(s)),t.translate(-e,-n))}function Dr(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function Tl(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function z0(t,e){const n=e.content;if(B0(n))return{width:Si(n.width,e.width),height:Si(n.height,e.height)};const s=ZP(e),r=e.textStrokeWidth,i=Et(n)?n:[n],o=i.join()+QH(s)+r+(t._measureText?"-spriting":"");return Tg.has(o)||Tg.set(o,tV(t,i,s,r)),Tg.get(o)}function sT(t,e,n){const{x:s,y:r,width:i,height:o}=e;t.save(),Tl(t,n);const a=Dr(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),If(t,{x:s,y:r,w:i,h:o,radius:HH(ya(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function rT(t,e,n,s){const r=n.content;if(B0(r)){t.save(),t.globalAlpha=rV(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const i=Et(r)?r:[r],o=ZP(n,s),a=n.color,l=Et(a)?a:[a],c=qH(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,JH(t,n)&&nV(t,{x:c,y:u},i,o),sV(t,{x:c,y:u},i,{fonts:o,colors:l}),t.restore()}function JH(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function ZH(t,e,n,s){const{radius:r,options:i}=e,o=i.pointStyle,a=i.rotation;let l=(a||0)*ky;if(B0(o)){t.save(),t.translate(n,s),t.rotate(l),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}XH(r)||eV(t,{x:n,y:s,radius:r,rotation:a,style:o,rad:l})}function eV(t,{x:e,y:n,radius:s,rotation:r,style:i,rad:o}){let a,l,c,u;switch(t.beginPath(),i){default:t.arc(e,n,s,0,nn),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=Tf,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=Tf,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),t.closePath();break;case"rectRounded":u=s*.516,c=s-u,a=Math.cos(o+ls)*c,l=Math.sin(o+ls)*c,t.arc(e-a,n-l,u,o-lt,o-sn),t.arc(e+l,n-a,u,o-sn,o),t.arc(e+a,n+l,u,o,o+sn),t.arc(e-l,n+a,u,o+sn,o+lt),t.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*s,t.rect(e-c,n-c,2*c,2*c);break}o+=ls;case"rectRot":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+l,n-a),t.lineTo(e+a,n+l),t.lineTo(e-l,n+a),t.closePath();break;case"crossRot":o+=ls;case"cross":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"star":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a),o+=ls,a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"line":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*s,n+Math.sin(o)*s);break}t.fill()}function tV(t,e,n,s){t.save();const r=e.length;let i=0,o=s;for(let a=0;a<r;a++){const l=n[Math.min(a,n.length-1)];t.font=l.string;const c=e[a];i=Math.max(i,t.measureText(c).width+s),o+=l.lineHeight}return t.restore(),{width:i,height:o}}function nV(t,{x:e,y:n},s,r){t.beginPath();let i=0;s.forEach(function(o,a){const l=r[Math.min(a,r.length-1)],c=l.lineHeight;t.font=l.string,t.strokeText(o,e,n+c/2+i),i+=c}),t.stroke()}function sV(t,{x:e,y:n},s,{fonts:r,colors:i}){let o=0;s.forEach(function(a,l){const c=i[Math.min(l,i.length-1)],u=r[Math.min(l,r.length-1)],d=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=c,t.fillText(a,e,n+d/2+o),o+=d,t.fill()})}function rV(t,e){const n=So(t)?t:e;return So(n)?F0(n,0,1):1}const iT=["left","bottom","top","right"];function iV(t,e){const{pointX:n,pointY:s,options:r}=e,i=r.callout,o=i&&i.display&&uV(e,i);if(!o||hV(e,i,o))return;if(t.save(),t.beginPath(),!Dr(t,i))return t.restore();const{separatorStart:l,separatorEnd:c}=oV(e,o),{sideStart:u,sideEnd:d}=lV(e,o,l);(i.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(d.x,d.y);const f=Ao({x:n,y:s},e.getCenterPoint(),Xt(-e.rotation));t.lineTo(f.x,f.y),t.stroke(),t.restore()}function oV(t,e){const{x:n,y:s,x2:r,y2:i}=t,o=aV(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:s},l={x:a.x,y:i}):(a={x:n,y:s+o},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function aV(t,e){const{width:n,height:s,options:r}=t,i=r.callout.margin+r.borderWidth/2;return e==="right"?n+i:e==="bottom"?s+i:-i}function lV(t,e,n){const{y:s,width:r,height:i,options:o}=t,a=o.callout.start,l=cV(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:s+Si(i,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+Si(r,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function cV(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function uV(t,e){const n=e.position;return iT.includes(n)?n:dV(t,e)}function dV(t,e){const{x:n,y:s,x2:r,y2:i,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:f}=t,p={x:u,y:d},m=e.start,x=Si(o,m),w=Si(a,m),g=[n,n+x,n+x,r],b=[s+w,i,s,i],v=[];for(let y=0;y<4;y++){const S=Ao({x:g[y],y:b[y]},p,Xt(f));v.push({position:iT[y],distance:cl(S,{x:l,y:c})})}return v.sort((y,S)=>y.distance-S.distance)[0].position}function hV(t,e,n){const{pointX:s,pointY:r}=t,i=e.margin;let o=s,a=r;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?a+=i:n==="bottom"&&(a-=i),t.inRange(o,a)}const o2={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function hl(t,e,n){return e=typeof e=="number"?e:t.parse(e),Bn(e)?t.getPixelForValue(e):n}function _o(t,e,n){const s=e[n];if(s||n==="scaleID")return s;const r=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===r);return i.length?i[0].id:r}function oT(t,e){if(t){const n=t.options.reverse,s=hl(t,e.min,n?e.end:e.start),r=hl(t,e.max,n?e.start:e.end);return{start:s,end:r}}}function aT(t,e){const{chartArea:n,scales:s}=t,r=s[_o(s,e,"xScaleID")],i=s[_o(s,e,"yScaleID")];let o=n.width/2,a=n.height/2;return r&&(o=hl(r,e.xValue,r.left+r.width/2)),i&&(a=hl(i,e.yValue,i.top+i.height/2)),{x:o,y:a}}function jy(t,e){const n=t.scales,s=n[_o(n,e,"xScaleID")],r=n[_o(n,e,"yScaleID")];if(!s&&!r)return{};let{left:i,right:o}=s||t.chartArea,{top:a,bottom:l}=r||t.chartArea;const c=a2(s,{min:e.xMin,max:e.xMax,start:i,end:o});i=c.start,o=c.end;const u=a2(r,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:i,y:a,x2:o,y2:l,width:o-i,height:l-a,centerX:i+(o-i)/2,centerY:a+(l-a)/2}}function lT(t,e){if(!eT(e)){const n=jy(t,e);let s=e.radius;(!s||isNaN(s))&&(s=Math.min(n.width,n.height)/2,e.radius=s);const r=s*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-s,y:o-s,x2:i+s,y2:o+s,centerX:i,centerY:o,width:r,height:r,radius:s}}return pV(t,e)}function fV(t,e){const{scales:n,chartArea:s}=t,r=n[e.scaleID],i={x:s.left,y:s.top,x2:s.right,y2:s.bottom};return r?gV(r,i,e):mV(n,i,e),i}function cT(t,e){const n=jy(t,e);return n.initProperties=Pl(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:yV(t,n,e),initProperties:n.initProperties}],n}function pV(t,e){const n=aT(t,e),s=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:s,height:s}}function a2(t,e){const n=oT(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function gV(t,e,n){const s=hl(t,n.value,NaN),r=hl(t,n.endValue,s);t.isHorizontal()?(e.x=s,e.x2=r):(e.y=s,e.y2=r)}function mV(t,e,n){for(const s of Object.keys(o2)){const r=t[_o(t,n,s)];if(r){const{min:i,max:o,start:a,end:l,startProp:c,endProp:u}=o2[s],d=oT(r,{min:n[i],max:n[o],start:r[a],end:r[l]});e[c]=d.start,e[u]=d.end}}}function xV({properties:t,options:e},n,s,r){const{x:i,x2:o,width:a}=t;return uT({start:i,end:o,borderWidth:e.borderWidth},{position:s.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function bV({properties:t,options:e},n,s,r){const{y:i,y2:o,height:a}=t;return uT({start:i,end:o,borderWidth:e.borderWidth},{position:s.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function uT(t,e){const{start:n,end:s,borderWidth:r}=t,{position:i,padding:{start:o,end:a},adjust:l}=e,c=s-r-n-o-a-e.size;return n+r/2+l+Oy(c,i)}function yV(t,e,n){const s=n.label;s.backgroundColor="transparent",s.callout.display=!1;const r=Ly(s.position),i=mn(s.padding),o=z0(t.ctx,s),a=xV({properties:e,options:n},o,r,i),l=bV({properties:e,options:n},o,r,i),c=o.width+i.width,u=o.height+i.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:s.rotation}}const gx=["enter","leave"],Fy=gx.concat("click");function wV(t,e,n){e.listened=tT(n,Fy,e.listeners),e.moveListened=!1,gx.forEach(s=>{jn(n[s])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(s=>{!e.listened&&jn(s.click)&&(e.listened=!0),e.moveListened||gx.forEach(r=>{jn(s[r])&&(e.listened=!0,e.moveListened=!0)})})}function vV(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return kV(t,e,n);case"click":return SV(t,e,n)}}function kV(t,e,n){if(!t.moveListened)return;let s;e.type==="mousemove"?s=Ry(t.visibleElements,e,n.interaction):s=[];const r=t.hovered;t.hovered=s;const i={state:t,event:e};let o=l2(i,"leave",r,s);return l2(i,"enter",s,r)||o}function l2({state:t,event:e},n,s,r){let i;for(const o of s)r.indexOf(o)<0&&(i=dT(o.options[n]||t.listeners[n],o,e)||i);return i}function SV(t,e,n){const s=t.listeners,r=Ry(t.visibleElements,e,n.interaction);let i;for(const o of r)i=dT(o.options.click||s.click,o,e)||i;return i}function dT(t,e,n){return pt(t,[e.$context,n])===!0}const Rf=["afterDraw","beforeDraw"];function CV(t,e,n){const s=e.visibleElements;e.hooked=tT(n,Rf,e.hooks),e.hooked||s.forEach(r=>{e.hooked||Rf.forEach(i=>{jn(r.options[i])&&(e.hooked=!0)})})}function c2(t,e,n){if(t.hooked){const s=e.options[n]||t.hooks[n];return pt(s,[e.$context])}}function _V(t,e,n){const s=IV(t.scales,e,n);let r=u2(e,s,"min","suggestedMin");r=u2(e,s,"max","suggestedMax")||r,r&&jn(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function EV(t,e){for(const n of t)TV(n,e)}function u2(t,e,n,s){if(Bn(e[n])&&!PV(t.options,n,s)){const r=t[n]!==e[n];return t[n]=e[n],r}}function PV(t,e,n){return Xn(t[e])||Xn(t[n])}function TV(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const s=_o(e,t,n);s&&!e[s]&&MV(t,n)&&console.warn(`No scale found with id '${s}' for annotation '${t.id}'`)}}function MV(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const s of["Min","Max","Value"])if(Xn(t[n+s]))return!0;return!1}function IV(t,e,n){const s=e.axis,r=e.id,i=s+"ScaleID",o={min:Xe(e.min,Number.NEGATIVE_INFINITY),max:Xe(e.max,Number.POSITIVE_INFINITY)};for(const a of n)a.scaleID===r?d2(a,e,["value","endValue"],o):_o(t,a,i)===r&&d2(a,e,[s+"Min",s+"Max",s+"Value"],o);return o}function d2(t,e,n,s){for(const r of n){const i=t[r];if(Xn(i)){const o=e.parse(i);s.min=Math.min(s.min,o),s.max=Math.max(s.max,o)}}}class Ml extends xn{inRange(e,n,s,r){const{x:i,y:o}=Ao({x:e,y:n},this.getCenterPoint(r),Xt(-this.options.rotation));return YP({x:i,y:o},this.getProps(["x","y","x2","y2"],r),s,this.options)}getCenterPoint(e){return Ro(this,e)}draw(e){e.save(),$0(e,this.getCenterPoint(),this.options.rotation),sT(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return cT(e,n)}}Ml.id="boxAnnotation";Ml.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ml.defaultRoutes={borderColor:"color",backgroundColor:"color"};Ml.descriptors={label:{_fallback:!0}};class U0 extends xn{inRange(e,n,s,r){return GP({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ro(this,e)}draw(e){const n=this.options;!n.display||!n.content||(LV(e,this),e.save(),$0(e,this.getCenterPoint(),this.rotation),rT(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const s=NV(e,n);if(!s)return{};const{controllerMeta:r,point:i,radius:o}=AV(e,n,s);let a=z0(e.ctx,n);const l=RV(a,o);JP(n,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:d}=n,f=QP(i,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return{initProperties:Pl(e,f,n),...f,...r,rotation:n.rotation,_fitRatio:l}}}U0.id="doughnutLabelAnnotation";U0.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};U0.defaultRoutes={};function NV(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,s){const r=s.controller;return r instanceof bc&&DV(t,e,s.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?s:n},void 0)}function DV(t,e,n){if(!e.autoHide)return!0;for(let s=0;s<n.length;s++)if(!n[s].hidden&&t.getDataVisibility(s))return!0}function AV({chartArea:t},e,n){const{left:s,top:r,right:i,bottom:o}=t,{innerRadius:a,offsetX:l,offsetY:c}=n.controller,u=(s+i)/2+l,d=(r+o)/2+c,f={left:Math.max(u-a,s),right:Math.min(u+a,i),top:Math.max(d-a,r),bottom:Math.min(d+a,o)},p={x:(f.left+f.right)/2,y:(f.top+f.bottom)/2},m=e.spacing+e.borderWidth/2,x=a-m,w=p.y>d,g=w?r+m:o-m,b=OV(g,u,d,x);return{controllerMeta:{_centerX:u,_centerY:d,_radius:x,_counterclockwise:w,...b},point:p,radius:Math.min(a,Math.min(f.right-f.left,f.bottom-f.top)/2)}}function RV({width:t,height:e},n){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/s}function OV(t,e,n,s){const r=Math.pow(n-t,2),i=Math.pow(s,2),o=e*-2,a=Math.pow(e,2)+r-i,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:nn};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:ox({x:e,y:n},{x:c,y:t}).angle,_endAngle:ox({x:e,y:n},{x:u,y:t}).angle}}function LV(t,e){const{_centerX:n,_centerY:s,_radius:r,_startAngle:i,_endAngle:o,_counterclockwise:a,options:l}=e;t.save();const c=Dr(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,s,r,i,o,a),t.closePath(),t.fill(),c&&t.stroke(),t.restore()}class Gu extends xn{inRange(e,n,s,r){return GP({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ro(this,e)}draw(e){const n=this.options,s=!Xn(this._visible)||this._visible;!n.display||!n.content||!s||(e.save(),$0(e,this.getCenterPoint(),this.rotation),iV(e,this),sT(e,this,n),rT(e,jV(this),n),e.restore())}resolveElementProperties(e,n){let s;if(eT(n))s=aT(e,n);else{const{centerX:a,centerY:l}=jy(e,n);s={x:a,y:l}}const r=mn(n.padding),i=z0(e.ctx,n),o=QP(s,i,n,r);return{initProperties:Pl(e,o,n),pointX:s.x,pointY:s.y,...o,rotation:n.rotation}}}Gu.id="labelAnnotation";Gu.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Gu.defaultRoutes={borderColor:"color"};function jV({x:t,y:e,width:n,height:s,options:r}){const i=r.borderWidth/2,o=mn(r.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-r.borderWidth,height:s-o.top-o.bottom-r.borderWidth}}const By=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),mx=(t,e,n)=>By(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,h2=(t,e,n)=>By(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,kc=t=>t*t,FV=(t,e,{x:n,y:s,x2:r,y2:i},o)=>o==="y"?{start:Math.min(s,i),end:Math.max(s,i),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},f2=(t,e,n,s)=>(1-s)*(1-s)*t+2*(1-s)*s*e+s*s*n,xx=(t,e,n,s)=>({x:f2(t.x,e.x,n.x,s),y:f2(t.y,e.y,n.y,s)}),p2=(t,e,n,s)=>2*(1-s)*(e-t)+2*s*(n-e),g2=(t,e,n,s)=>-Math.atan2(p2(t.x,e.x,n.x,s),p2(t.y,e.y,n.y,s))+.5*lt;class qu extends xn{inRange(e,n,s,r){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y"){const o={mouseX:e,mouseY:n},{path:a,ctx:l}=this;if(a){Dr(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=e*u.currentDevicePixelRatio,f=n*u.currentDevicePixelRatio,p=l.isPointInStroke(a,d,f)||bx(this,o,r);return l.restore(),p}const c=kc(i);return UV(this,o,c,r)||bx(this,o,r)}return BV(this,{mouseX:e,mouseY:n},s,{hitSize:i,useFinalPosition:r})}getCenterPoint(e){return Ro(this,e)}draw(e){const{x:n,y:s,x2:r,y2:i,cp:o,options:a}=this;if(e.save(),!Dr(e,a))return e.restore();Tl(e,a);const l=Math.sqrt(Math.pow(r-n,2)+Math.pow(i-s,2));if(a.curve&&o)return XV(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:d,endAdjust:f}=hT(this),p=Math.atan2(i-s,r-n);e.translate(n,s),e.rotate(p),e.beginPath(),e.moveTo(0+d,0),e.lineTo(l-f,0),e.shadowColor=a.borderShadowColor,e.stroke(),yx(e,0,d,c),yx(e,l,-f,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const s=fV(e,n),{x:r,y:i,x2:o,y2:a}=s,l=$V(s,e.chartArea),c=l?zV({x:r,y:i},{x:o,y:a},e.chartArea):{x:r,y:i,x2:o,y2:a,width:Math.abs(o-r),height:Math.abs(a-i)};if(c.centerX=(o+r)/2,c.centerY=(a+i)/2,c.initProperties=Pl(e,c,n),n.curve){const d={x:c.x,y:c.y},f={x:c.x2,y:c.y2};c.cp=KV(c,n,cl(d,f))}const u=WV(e,c,n.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}qu.id="lineAnnotation";const m2={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};qu.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},m2),fill:!1,length:12,start:Object.assign({},m2),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Gu.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};qu.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};qu.defaultRoutes={borderColor:"color"};function BV(t,{mouseX:e,mouseY:n},s,{hitSize:r,useFinalPosition:i}){const o=FV(e,n,t.getProps(["x","y","x2","y2"],i),s);return VP(o,r)||bx(t,{mouseX:e,mouseY:n},i,s)}function $V({x:t,y:e,x2:n,y2:s},{top:r,right:i,bottom:o,left:a}){return!(t<a&&n<a||t>i&&n>i||e<r&&s<r||e>o&&s>o)}function x2({x:t,y:e},n,{top:s,right:r,bottom:i,left:o}){return t<o&&(e=h2(o,{x:t,y:e},n),t=o),t>r&&(e=h2(r,{x:t,y:e},n),t=r),e<s&&(t=mx(s,{x:t,y:e},n),e=s),e>i&&(t=mx(i,{x:t,y:e},n),e=i),{x:t,y:e}}function zV(t,e,n){const{x:s,y:r}=x2(t,e,n),{x:i,y:o}=x2(e,t,n);return{x:s,y:r,x2:i,y2:o,width:Math.abs(i-s),height:Math.abs(o-r)}}function UV(t,{mouseX:e,mouseY:n},s=Ji,r){const{x:i,y:o,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],r),c=a-i,u=l-o,d=kc(c)+kc(u),f=d===0?-1:((e-i)*c+(n-o)*u)/d;let p,m;return f<0?(p=i,m=o):f>1?(p=a,m=l):(p=i+f*c,m=o+f*u),kc(e-p)+kc(n-m)<=s}function bx(t,{mouseX:e,mouseY:n},s,r){const i=t.label;return i.options.display&&i.inRange(e,n,r,s)}function WV(t,e,n){const s=n.borderWidth,r=mn(n.padding),i=z0(t.ctx,n),o=i.width+r.width+s,a=i.height+r.height+s;return VV(e,n,{width:o,height:a,padding:r},t.chartArea)}function HV(t){const{x:e,y:n,x2:s,y2:r}=t,i=Math.atan2(r-n,s-e);return i>lt/2?i-lt:i<lt/-2?i+lt:i}function VV(t,e,n,s){const{width:r,height:i,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},d=e.rotation==="auto"?HV(t):Xt(e.rotation),f=YV(r,i,d),p=GV(t,e,{labelSize:f,padding:o},s),m=t.cp?xx(c,t.cp,u,p):By(c,u,p),x={size:f.w,min:s.left,max:s.right,padding:o.left},w={size:f.h,min:s.top,max:s.bottom,padding:o.top},g=y2(m.x,x)+a,b=y2(m.y,w)+l;return{x:g-r/2,y:b-i/2,x2:g+r/2,y2:b+i/2,centerX:g,centerY:b,pointX:m.x,pointY:m.y,width:r,height:i,rotation:hP(d)}}function YV(t,e,n){const s=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*s)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*s)}}function GV(t,e,n,s){let r;const i=qV(t,s);return e.position==="start"?r=b2({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?r=1-b2({w:t.x-t.x2,h:t.y-t.y2},n,e,i):r=Oy(1,e.position),r}function b2(t,e,n,s){const{labelSize:r,padding:i}=e,o=t.w*s.dx,a=t.h*s.dy,l=o>0&&(r.w/2+i.left-s.x)/o,c=a>0&&(r.h/2+i.top-s.y)/a;return F0(Math.max(l,c),0,.25)}function qV(t,e){const{x:n,x2:s,y:r,y2:i}=t,o=Math.min(r,i)-e.top,a=Math.min(n,s)-e.left,l=e.bottom-Math.max(r,i),c=e.right-Math.max(n,s);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function y2(t,e){const{size:n,min:s,max:r,padding:i}=e,o=n/2;return n>r-s?(r+s)/2:(s>=t-i-o&&(t=s+i+o),r<=t+i+o&&(t=r-i-o),t)}function hT(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,s=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:w2(t,n),endAdjust:w2(t,s)}}function w2(t,e){if(!e||!e.display)return 0;const{length:n,width:s}=e,r=t.options.borderWidth/2,i={x:n,y:s+r};return Math.abs(mx(0,i,{x:0,y:r}))}function yx(t,e,n,s){if(!s||!s.display)return;const{length:r,width:i,fill:o,backgroundColor:a,borderColor:l}=s,c=Math.abs(e-r)+n;t.beginPath(),Tl(t,s),Dr(t,s),t.moveTo(c,-i),t.lineTo(e+n,0),t.lineTo(c,i),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=s.borderShadowColor,t.stroke()}function KV(t,e,n){const{x:s,y:r,x2:i,y2:o,centerX:a,centerY:l}=t,c=Math.atan2(o-r,i-s),u=Ly(e.controlPoint,0),d={x:a+Si(n,u.x,!1),y:l+Si(n,u.y,!1)};return Ao(d,{x:a,y:l},c)}function v2(t,{x:e,y:n},{angle:s,adjust:r},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(s),yx(t,0,-r,i),t.restore())}function XV(t,e,n,s){const{x:r,y:i,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:f}=hT(e),p={x:r,y:i},m={x:o,y:a},x=g2(p,n,m,0),w=g2(p,n,m,1)-lt,g=xx(p,n,m,d/s),b=xx(p,n,m,1-f/s),v=new Path2D;t.beginPath(),v.moveTo(g.x,g.y),v.quadraticCurveTo(n.x,n.y,b.x,b.y),t.shadowColor=l.borderShadowColor,t.stroke(v),e.path=v,e.ctx=t,v2(t,g,{angle:x,adjust:d},c),v2(t,b,{angle:w,adjust:f},u)}class Ku extends xn{inRange(e,n,s,r){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y")return QV({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),i,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],r),d=s==="y"?{start:l,end:u}:{start:a,end:c},f=Ao({x:e,y:n},this.getCenterPoint(r),Xt(-i));return f[s]>=d.start-o-Ji&&f[s]<=d.end+o+Ji}getCenterPoint(e){return Ro(this,e)}draw(e){const{width:n,height:s,centerX:r,centerY:i,options:o}=this;e.save(),$0(e,this.getCenterPoint(),o.rotation),Tl(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=Dr(e,o);e.ellipse(r,i,s/2,n/2,lt/2,0,2*lt),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return cT(e,n)}}Ku.id="ellipseAnnotation";Ku.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Ml.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ku.defaultRoutes={borderColor:"color",backgroundColor:"color"};Ku.descriptors={label:{_fallback:!0}};function QV(t,e,n,s){const{width:r,height:i,centerX:o,centerY:a}=e,l=r/2,c=i/2;if(l<=0||c<=0)return!1;const u=Xt(n||0),d=Math.cos(u),f=Math.sin(u),p=Math.pow(d*(t.x-o)+f*(t.y-a),2),m=Math.pow(f*(t.x-o)-d*(t.y-a),2);return p/Math.pow(l+s,2)+m/Math.pow(c+s,2)<=1.0001}class W0 extends xn{inRange(e,n,s,r){const{x:i,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return s!=="x"&&s!=="y"?VH({x:e,y:n},this.getCenterPoint(r),c/2,u):VP(s==="y"?{start:o,end:l,value:n}:{start:i,end:a,value:e},u)}getCenterPoint(e){return Ro(this,e)}draw(e){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,Tl(e,n);const r=Dr(e,n);ZH(e,this,this.centerX,this.centerY),r&&!B0(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=s}resolveElementProperties(e,n){const s=lT(e,n);return s.initProperties=Pl(e,s,n),s}}W0.id="pointAnnotation";W0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};W0.defaultRoutes={borderColor:"color",backgroundColor:"color"};class H0 extends xn{inRange(e,n,s,r){if(s!=="x"&&s!=="y")return this.options.radius>=.1&&this.elements.length>1&&ZV(this.elements,e,n,r);const i=Ao({x:e,y:n},this.getCenterPoint(r),Xt(-this.options.rotation)),o=this.elements.map(c=>s==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return i[s]>=a&&i[s]<=l}getCenterPoint(e){return Ro(this,e)}draw(e){const{elements:n,options:s}=this;e.save(),e.beginPath(),e.fillStyle=s.backgroundColor,Tl(e,s);const r=Dr(e,s);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),r&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const s=lT(e,n),{sides:r,rotation:i}=n,o=[],a=2*lt/r;let l=i*ky;for(let c=0;c<r;c++,l+=a){const u=JV(s,n,l);u.initProperties=Pl(e,s,n),o.push(u)}return s.elements=o,s}}H0.id="polygonAnnotation";H0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};H0.defaultRoutes={borderColor:"color",backgroundColor:"color"};function JV({centerX:t,centerY:e},{radius:n,borderWidth:s,hitTolerance:r},i){const o=(s+r)/2,a=Math.sin(i),l=Math.cos(i),c={x:t+a*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:t+a*(n+o),bY:e-l*(n+o)}}}function ZV(t,e,n,s){let r=!1,i=t[t.length-1].getProps(["bX","bY"],s);for(const o of t){const a=o.getProps(["bX","bY"],s);a.bY>n!=i.bY>n&&e<(i.bX-a.bX)*(n-a.bY)/(i.bY-a.bY)+a.bX&&(r=!r),i=a}return r}const bi={box:Ml,doughnutLabel:U0,ellipse:Ku,label:Gu,line:qu,point:W0,polygon:H0};Object.keys(bi).forEach(t=>{Dt.describe(`elements.${bi[t].id}`,{_fallback:"plugins.annotation.common"})});const eY={update:Object.assign},tY=Fy.concat(Rf),k2=(t,e)=>Je(e)?vx(t,e):t,wx=t=>t==="color"||t==="font";function $y(t="line"){return bi[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function nY(t,e,n,s){const r=rY(t,n.animations,s),i=e.annotations,o=aY(e.elements,i);for(let a=0;a<i.length;a++){const l=i[a],c=fT(o,a,l.type),u=l.setContext(oY(t,c,o,l)),d=c.resolveElementProperties(t,u);d.skip=sY(d),"elements"in d&&(iY(c,d.elements,u,r),delete d.elements),Xn(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=pT(u),r.update(c,d)}}function sY(t){return isNaN(t.x)||isNaN(t.y)}function rY(t,e,n){return n==="reset"||n==="none"||n==="resize"?eY:new Dy(t,e)}function iY(t,e,n,s){const r=t.elements||(t.elements=[]);r.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],a=o.properties,l=fT(r,i,o.type,o.initProperties),c=n[o.optionScope].override(o);a.options=pT(c),s.update(l,a)}}function fT(t,e,n,s){const r=bi[$y(n)];let i=t[e];return(!i||!(i instanceof r))&&(i=t[e]=new r,Object.assign(i,s)),i}function pT(t){const e=bi[$y(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,vx(t,e.defaults),vx(t,e.defaultRoutes));for(const s of tY)n[s]=t[s];return n}function vx(t,e){const n={};for(const s of Object.keys(e)){const r=e[s],i=t[s];wx(s)&&Et(i)?n[s]=i.map(o=>k2(o,r)):n[s]=k2(i,r)}return n}function oY(t,e,n,s){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:s.id,type:"annotation"}))}function aY(t,e){const n=e.length,s=t.length;if(s<n){const r=n-s;t.splice(s,0,...new Array(r))}else s>n&&t.splice(n,s-n);return t}var lY="3.1.0";const Gr=new Map,S2=t=>t.type!=="doughnutLabel",cY=Fy.concat(Rf);var uY={id:"annotation",version:lY,beforeRegister(){YH("chart.js","4.0",co.version)},afterRegister(){co.register(bi)},afterUnregister(){co.unregister(bi)},beforeInit(t){Gr.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const s=Gr.get(t),r=s.annotations=[];let i=n.annotations;Je(i)?Object.keys(i).forEach(o=>{const a=i[o];Je(a)&&(a.id=o,r.push(a))}):Et(i)&&r.push(...i),EV(r.filter(S2),t.scales)},afterDataLimits(t,e){const n=Gr.get(t);_V(t,e.scale,n.annotations.filter(S2).filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(t,e,n){const s=Gr.get(t);wV(t,s,n),nY(t,s,n,e.mode),s.visibleElements=s.elements.filter(r=>!r.skip&&r.options.display),CV(t,s,n)},beforeDatasetsDraw(t,e,n){sc(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){sc(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){sc(t,e.index,n.clip)},beforeDraw(t,e,n){sc(t,"beforeDraw",n.clip)},afterDraw(t,e,n){sc(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const s=Gr.get(t);vV(s,e.event,n)&&(e.changed=!0)},afterDestroy(t){Gr.delete(t)},getAnnotations(t){const e=Gr.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return Ry(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!cY.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${bi[$y(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:wx,_fallback:!0},_indexable:wx}},additionalOptionScopes:[""]};function sc(t,e,n){const{ctx:s,chartArea:r}=t,i=Gr.get(t);n&&A0(s,r);const o=dY(i.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)hY(s,r,i,a);n&&R0(s)}function dY(t,e){const n=[];for(const s of t)if(s.options.drawTime===e&&n.push({element:s,main:!0}),s.elements&&s.elements.length)for(const r of s.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function hY(t,e,n,s){const r=s.element;s.main?(c2(n,r,"beforeDraw"),r.draw(t,e),c2(n,r,"afterDraw")):r.draw(t,e)}co.register(fx,px,Eh,wc,xH,_H,gH,uY);const fY=({minPrice:t,maxPrice:e,orders:n,pendingOrders:s=[],onAddOrder:r,onRemoveOrder:i,currentPrice:o,markPrice:a})=>{const l=k.useRef(null),[c,u]=k.useState(null),d=k.useMemo(()=>{const m=[...n,...s];return m.length>0?Math.max(...m.map(x=>x.amount),.1):.1},[n,s]),f=k.useMemo(()=>{const m=n.map(w=>({x:w.amount,y:w.price,id:w.id,side:w.side,isPending:!1})),x=s.map(w=>({x:w.amount,y:w.price,id:w.id,side:w.side,isPending:!0}));return{datasets:[{label:"Long Orders",data:m.filter(w=>{const g=n.find(b=>b.id===w.id);return(g==null?void 0:g.side)==="long"||(g==null?void 0:g.side)==="buy"||!(g!=null&&g.side)}),backgroundColor:"rgba(77, 171, 247, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Short Orders",data:m.filter(w=>{const g=n.find(b=>b.id===w.id);return(g==null?void 0:g.side)==="short"||(g==null?void 0:g.side)==="sell"}),backgroundColor:"rgba(255, 152, 0, 0.8)",borderColor:"#fff",borderWidth:2,pointRadius:6,pointHoverRadius:10},{label:"Pending Long",data:x.filter(w=>{const g=s.find(b=>b.id===w.id);return(g==null?void 0:g.side)==="long"||(g==null?void 0:g.side)==="buy"}),backgroundColor:"rgba(40, 167, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10},{label:"Pending Short",data:x.filter(w=>{const g=s.find(b=>b.id===w.id);return(g==null?void 0:g.side)==="short"||(g==null?void 0:g.side)==="sell"}),backgroundColor:"rgba(220, 53, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10}]}},[n,s]),p=k.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,backgroundColor:"#1a1a1a",plugins:{legend:{display:!0,position:"top",labels:{color:"#fff",font:{size:12}}},tooltip:{enabled:!0,callbacks:{label:m=>{const x=m.raw,w=[...n,...s].find(g=>g.id===x.id);return w?[`Price: ${w.price.toFixed(2)} USDC`,`Amount: ${w.amount.toFixed(4)} BTC`,w.isPending?`Pending ${w.side==="long"||w.side==="buy"?"Long":"Short"}`:""].filter(Boolean):`Price: ${x.y.toFixed(2)}, Amount: ${x.x.toFixed(4)}`}}},annotation:{annotations:{...o!==null&&o>=t&&o<=e?{currentPriceLine:{type:"line",xMin:0,xMax:d,yMin:o,yMax:o,borderColor:"#00ff00",borderWidth:2,borderDash:[5,5],label:{display:!0,content:`Current: ${o.toLocaleString()}`,position:"end",backgroundColor:"rgba(0, 255, 0, 0.8)",color:"#000",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y"}}:{},...a!==null&&a>=t&&a<=e?{markPriceLine:{type:"line",xMin:0,xMax:d,yMin:a,yMax:a,borderColor:"#ff0000",borderWidth:2,label:{display:!0,content:`Mark Price: ${a.toLocaleString()}`,position:"start",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y",arrowHeads:{start:{enabled:!1,fill:!1,length:0,width:0},end:{enabled:!0,fill:!0,length:15,width:10,backgroundColor:"#ff0000",borderColor:"#ff0000",borderWidth:2}}}}:{}}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Amount (BTC)",color:"#fff",font:{size:14,weight:"bold"}},min:0,max:d,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(m){return Number(m).toFixed(4)}},grid:{color:"#333"}},y:{type:"linear",title:{display:!0,text:"Price (USDC)",color:"#fff",font:{size:14,weight:"bold"}},min:t,max:e,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(m){return Number(m).toLocaleString()}},grid:{color:"#333"}}},onClick:(m,x)=>{if(!l.current)return;const w=l.current,g=w.canvas;if(!g)return;const b=g.getBoundingClientRect(),v=m.native;if(!v)return;const y=v.clientX-b.left,S=v.clientY-b.top,C=w.scales.x,E=w.scales.y,T=C.getValueForPixel(y),N=E.getValueForPixel(S);if(T==null||N===null||N===void 0)return;const D=[...n,...s].find(A=>{const R=C.getPixelForValue(A.amount),z=E.getPixelForValue(A.price);return Math.sqrt(Math.pow(y-R,2)+Math.pow(S-z,2))<=12});if(D)i(D.id);else{const A=Math.max(t,Math.min(e,N)),R=Math.max(.001,Math.min(1,T));r(A,R)}},onHover:(m,x)=>{if(!l.current)return;const w=l.current,g=w.canvas;if(!g)return;const b=g.getBoundingClientRect(),v=m.native;if(!v)return;const y=v.clientX-b.left,S=v.clientY-b.top,C=[...n,...s],E=w.scales.x,T=w.scales.y,N=C.find(_=>{const D=E.getPixelForValue(_.amount),A=T.getPixelForValue(_.price);return Math.sqrt(Math.pow(y-D,2)+Math.pow(S-A,2))<=10});u((N==null?void 0:N.id)||null)}}),[t,e,d,n,s,r,i,o,a]);return h.jsx("div",{className:"price-amount-chart-container",style:{height:"600px",position:"relative"},children:h.jsx("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #333",padding:"10px",height:"100%"},children:h.jsx(BH,{ref:l,data:f,options:p,style:{cursor:c?"pointer":"crosshair"}})})})},pY=({isOpen:t,onClose:e,minPrice:n,maxPrice:s,onMinPriceChange:r,onMaxPriceChange:i,markPrice:o,hasManualPriceChange:a,onResetToAuto:l,orderMode:c,onOrderModeChange:u,curveIntensity:d,onCurveIntensityChange:f,roundingStep:p,onRoundingStepChange:m})=>{const x=y=>Math.round(y/1.5/p)*p,w=y=>Math.round(y*1.5/p)*p;if(!t)return null;const g=o!=null&&o.mark_price?parseFloat(o.mark_price):null,b=g?x(g):null,v=g?w(g):null;return typeof document<"u"?Pi.createPortal(h.jsx("div",{className:"modal-overlay",onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:h.jsxs("div",{className:"modal-content",onClick:y=>y.stopPropagation(),style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:0,minWidth:"400px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[h.jsx("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:h.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:600,color:"rgba(255, 255, 255, 0.9)"},children:"Price Range Configuration"})}),h.jsx("div",{className:"modal-body",style:{padding:"2rem 1.5rem"},children:h.jsxs("div",{className:"trading-test-price-range-controls",children:[h.jsxs("div",{children:[h.jsxs("label",{children:["Rounding Step ($):",h.jsx("input",{type:"number",value:p,onChange:y=>m(Math.max(1,parseFloat(y.target.value)||100)),min:1,step:10,className:"trading-test-input"})]}),h.jsxs("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:["Prices will be rounded to the nearest $",p]})]}),h.jsxs("div",{children:[h.jsxs("label",{children:["Min Price (USDC):",h.jsx("input",{type:"number",value:n,onChange:y=>{r(parseFloat(y.target.value)||1e4)},min:1e3,max:s-1e3,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price / 1.5, rounded to $${p})`:""})]}),(o==null?void 0:o.mark_price)&&b!==null&&h.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?h.jsxs(h.Fragment,{children:["Manual override (Auto:"," ",g.toLocaleString()," / 1.5 ="," ",b.toLocaleString(),")"]}):h.jsxs(h.Fragment,{children:["Auto: ",g.toLocaleString()," / 1.5 ="," ",n.toLocaleString()]})})]}),h.jsxs("div",{children:[h.jsxs("label",{children:["Max Price (USDC):",h.jsx("input",{type:"number",value:s,onChange:y=>{i(parseFloat(y.target.value)||1e5)},min:n+1e3,max:1e6,className:"trading-test-input",disabled:(o==null?void 0:o.mark_price)!==null&&(o==null?void 0:o.mark_price)!==void 0,title:o!=null&&o.mark_price?`Auto-managed by mark price (mark price  1.5, rounded to $${p})`:""})]}),(o==null?void 0:o.mark_price)&&v!==null&&h.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:a?h.jsxs(h.Fragment,{children:["Manual override (Auto:"," ",g.toLocaleString(),"  1.5 ="," ",v.toLocaleString(),")"]}):h.jsxs(h.Fragment,{children:["Auto: ",g.toLocaleString(),"  1.5 ="," ",s.toLocaleString()]})})]}),h.jsx("div",{children:h.jsxs("label",{children:["Order Mode:",h.jsxs("select",{value:c,onChange:y=>u(y.target.value),className:"trading-test-select",children:[h.jsx("option",{value:"random",children:"Random"}),h.jsx("option",{value:"curve",children:"Curve (Buy more at lower prices)"})]})]})}),c==="curve"&&h.jsx("div",{children:h.jsxs("label",{children:["Curve Intensity: ",d,h.jsx("input",{type:"range",value:d,onChange:y=>f(parseFloat(y.target.value)),min:1,max:5,step:.5,className:"trading-test-range"}),h.jsx("small",{children:"Higher = more aggressive buying at lower prices"})]})})]})}),h.jsxs("div",{className:"modal-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[a&&(o==null?void 0:o.mark_price)&&h.jsx("button",{onClick:l,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(77, 171, 247, 0.2)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Reset to Auto"}),h.jsx("div",{style:{display:"flex",gap:"1rem",marginLeft:"auto"},children:h.jsx("button",{onClick:e,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Close"})})]})]})}),document.body):null},gY=({onClick:t,disabled:e,orderMode:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-primary",style:{backgroundColor:e?"#ccc":"#007bff",cursor:e?"not-allowed":"pointer"},children:["Submit Test Orders (",n==="random"?"Random":"Curve-Based",")"]}),mY=({onClick:t,disabled:e,orderCount:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-success",style:{backgroundColor:e?"#ccc":"#28a745",cursor:e?"not-allowed":"pointer"},children:["Submit Chart Orders (",n," orders)"]}),xY=({onClick:t,disabled:e})=>h.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-secondary",style:{cursor:e?"not-allowed":"pointer"},children:"Reset Chart"}),bY=({onClick:t,disabled:e,pendingCount:n})=>h.jsxs("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-info",style:{backgroundColor:e?"#ccc":"#17a2b8",cursor:e?"not-allowed":"pointer"},children:["Load Pending Orders ",n>0&&`(${n})`]}),Mg=({onClick:t,disabled:e,filter:n})=>{const s=n==="long"?"Cancel All Long":n==="short"?"Cancel All Short":"Cancel All Orders";return h.jsx("button",{onClick:t,disabled:e,className:"trading-test-button trading-test-button-danger",style:{backgroundColor:e?"#ccc":"#dc3545",cursor:e?"not-allowed":"pointer"},children:s})};function yY(){var ue,Y,te,V;const[t,e]=k.useState(Bu),[n,s]=k.useState(""),[r,i]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(1e4),[u,d]=k.useState(1e5),[f,p]=k.useState(null),[m,x]=k.useState("random"),[w,g]=k.useState(2),[b,v]=k.useState("long"),[y,S]=k.useState([]),[C,E]=k.useState([]),[T,N]=k.useState([]),[_,D]=k.useState(!1),[A,R]=k.useState(!1),[z,L]=k.useState(100),F=k.useRef(null),$=k.useRef(null),O=k.useRef(t),B=k.useRef(0),{markets:M,getSymbolByMarketId:H}=Ti({baseURL:t,sessionToken:"",autoFetchMarkets:!0}),{mnemonic:j,walletAddress:P,authToken:X,setMnemonic:se}=vl(),K=n?H(n):null,J=K!==null?K:void 0,{markPrice:G}=d0({baseURL:t,wsURL:h0,marketId:n||"",symbol:J}),[ee,he]=k.useState(!1);k.useEffect(()=>{if(G!=null&&G.mark_price&&!ee){const q=parseFloat(G.mark_price);if(!isNaN(q)&&q>1e3){const be=Math.round(q*1.5/z)*z,Q=Math.round(q/1.5/z)*z;Q>0&&be>Q&&(c(Q),d(be))}}},[G==null?void 0:G.mark_price,ee,z]),k.useEffect(()=>{j&&i(j),X&&a(X)},[j,X]);const Ae=M.length>0?(((ue=M.find(q=>q.active))==null?void 0:ue.market_id)??M[0].market_id)||(((te=(Y=M.find(q=>q.active))==null?void 0:Y.id)==null?void 0:te.toString())??((V=M[0].id)==null?void 0:V.toString())??""):null;k.useEffect(()=>{Ae&&!n&&s(Ae)},[Ae]),k.useEffect(()=>{O.current=t},[t]),k.useEffect(()=>{r&&r.trim()!==""&&(F.current=new wl({baseURL:O.current,mnemonic:r}),F.current.initialize().catch(q=>{console.error("Failed to initialize ExchangeClient:",q)}))},[r,t]),k.useEffect(()=>{$.current=new pn({baseURL:O.current})},[t]),k.useEffect(()=>{if(!n||!$.current)return;const q=async()=>{try{const Q=await $.current.getTicker(n);if(Q!=null&&Q.lastPrice){const de=typeof Q.lastPrice=="string"?parseFloat(Q.lastPrice):Q.lastPrice;p(de)}}catch(Q){console.error("Failed to fetch current price:",Q)}};q();const be=setInterval(q,5e3);return()=>clearInterval(be)},[n]);const Ce=k.useCallback(q=>{const be=[];for(let Q=0;Q<q;Q++){const de=l+Math.random()*(u-l),ye=.001+Math.random()*.01;be.push({price:de,amount:ye})}return be.sort((Q,de)=>Q.price-de.price)},[l,u]),ve=k.useCallback(q=>{const be=[],Q=u-l;for(let de=0;de<q;de++){const ye=Math.random(),ae=Math.pow(ye,w),re=l+ae*Q,Ee=.001+(u-re)/Q*.02;be.push({price:re,amount:Ee})}return be.sort((de,ye)=>de.price-ye.price)},[l,u,w]),Fe=k.useCallback(async()=>{if(!F.current||!n||!P){Me.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}D(!0);const q=[];try{const Q=m==="random"?Ce(10):ve(10),de=Me.info("Submitting test orders",{description:`Submitting ${Q.length} ${m} orders...`});B.current=typeof de=="number"?de:0;for(const ae of Q){try{const pe=ut("1"),Ee=await F.current.placeOrder({marketId:n,side:b==="long"?"buy":"sell",orderType:"LIMIT",price:ae.price,quantity:ae.amount,timeInForce:"GTC",leverage:pe});q.push({success:!0,order:{price:ae.price,amount:ae.amount,orderId:Ee==null?void 0:Ee.order_id},timestamp:Date.now()})}catch(re){q.push({success:!1,order:{price:ae.price,amount:ae.amount},error:re.message,timestamp:Date.now()})}await new Promise(re=>setTimeout(re,200))}N(ae=>[...ae,...q]),B.current!==0&&(Me.dismiss(B.current),B.current=0);const ye=q.filter(ae=>ae.success).length;Me.success("Test orders submitted",{description:`${ye}/${q.length} orders placed successfully.`})}catch(be){B.current!==0&&(Me.dismiss(B.current),B.current=0),Me.error("Test submission failed",{description:be.message||"Unknown error occurred"})}finally{D(!1)}},[n,P,m,b,Ce,ve]),ct=k.useCallback(async()=>{if(!F.current||!n||!P){Me.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}if(y.length===0){Me.warning("No chart orders",{description:"Please add orders to the chart first."});return}D(!0);const q=[];try{const be=Me.info("Submitting chart orders",{description:`Submitting ${y.length} chart orders...`});B.current=typeof be=="number"?be:0;for(const de of y){try{const ae=ut("1"),re=await F.current.placeOrder({marketId:n,side:de.side==="short"||de.side==="sell"?"sell":"buy",orderType:"LIMIT",price:de.price,quantity:de.amount,timeInForce:"GTC",leverage:ae});q.push({success:!0,order:{price:de.price,amount:de.amount,orderId:re==null?void 0:re.order_id},timestamp:Date.now()})}catch(ye){q.push({success:!1,order:{price:de.price,amount:de.amount},error:ye.message,timestamp:Date.now()})}await new Promise(ye=>setTimeout(ye,200))}N(de=>[...de,...q]),B.current!==0&&(Me.dismiss(B.current),B.current=0);const Q=q.filter(de=>de.success).length;Me.success("Chart orders submitted",{description:`${Q}/${q.length} orders placed successfully.`})}catch(be){B.current!==0&&(Me.dismiss(B.current),B.current=0),Me.error("Chart order submission failed",{description:be.message||"Unknown error occurred"})}finally{D(!1)}},[n,P,y]),I=k.useCallback(()=>{S([]),Me.info("Chart reset",{description:"All chart orders have been cleared."})},[]),ce=k.useCallback((q,be)=>{const Q={price:q,amount:be,id:`chart-${Date.now()}-${Math.random()}`,side:b};S(de=>[...de,Q])},[b]),me=k.useCallback(q=>{S(be=>be.filter(Q=>Q.id!==q)),E(be=>be.filter(Q=>Q.id!==q))},[]),Ne=k.useCallback(async()=>{if(!$.current||!P||!n){Me.error("Setup required",{description:"Please ensure wallet address and market ID are configured."});return}try{Me.info("Loading pending orders...");const q=await $.current.getOrders(P),be=(q==null?void 0:q.orders)||[];console.log(q);const Q=be.filter(de=>{const ye=de.market_id,ae=(de.status||"").toUpperCase();return ye===n&&["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(ae)}).map(de=>{const re=(de.side||"").toUpperCase().includes("BUY")?"long":"short";return{price:ke(de.price),amount:ke(de.quantity),id:`pending-${de.order_id}`,side:re,orderId:de.order_id,isPending:!0}});E(Q),Me.success("Pending orders loaded",{description:`Loaded ${Q.length} pending orders.`})}catch(q){Me.error("Failed to load pending orders",{description:q.message||"Unknown error occurred"})}},[P,n]),He=k.useCallback(async q=>{if(!F.current||!$.current||!n||!P){Me.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}try{const be=await $.current.getOrders(P),de=((be==null?void 0:be.orders)||[]).filter(re=>{const pe=re.market_id,Ee=(re.status||"").toUpperCase();if(pe!==n||!["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(Ee))return!1;if(q==="all")return!0;const Be=(re.side||"").toUpperCase(),Ve=Be.includes("BUY"),Le=Be.includes("SELL");return q==="long"?Ve:q==="short"?Le:!1});if(de.length===0){Me.info("No orders to cancel",{description:`No ${q} pending orders found.`});return}D(!0),Me.info("Canceling orders",{description:`Canceling ${de.length} ${q} orders...`});let ye=0,ae=0;for(const re of de){try{const pe=re.order_id;await F.current.cancelOrder({orderId:pe,marketId:n}),ye++}catch(pe){ae++,console.error("Failed to cancel order:",pe)}await new Promise(pe=>setTimeout(pe,100))}await Ne(),Me.success("Orders canceled",{description:`${ye} orders canceled successfully${ae>0?`, ${ae} failed`:""}.`})}catch(be){Me.error("Failed to cancel orders",{description:be.message||"Unknown error occurred"})}finally{D(!1)}},[n,P,Ne]);return h.jsxs("div",{className:"App-content-row",children:[h.jsx("h1",{children:"Trading Test Page"}),h.jsx("p",{children:"Advanced trading test with price range, interactive chart, and multiple submission modes"}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Configuration"}),h.jsxs("div",{className:"trading-test-config-grid",children:[h.jsx("div",{children:h.jsxs("label",{children:["HTTP Base URL:",h.jsx("input",{type:"text",value:t,onChange:q=>e(q.target.value),className:"trading-test-input"})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Market:",h.jsx("select",{value:n||"",onChange:q=>s(q.target.value),className:"trading-test-select",children:M.length===0?h.jsx("option",{value:"",children:"Loading markets..."}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),M.map(q=>{var de;const be=q.market_id??((de=q.id)==null?void 0:de.toString())??"",Q=q.moniker?q.moniker:q.symbol?q.symbol:`Market ID: ${be}`;return h.jsx("option",{value:be,children:Q},be)})]})})]})}),h.jsx("div",{children:h.jsxs("label",{children:["Mnemonic:",h.jsx("input",{type:"text",value:r,onChange:q=>{i(q.target.value),se(q.target.value)},placeholder:"Enter mnemonic",className:"trading-test-input"})]})}),f&&h.jsxs("div",{className:"trading-test-price-display",children:[h.jsx("strong",{children:"Current Price:"})," ",f.toLocaleString()," ","USDC"]})]})]}),h.jsxs("div",{className:"trading-test-tabs",children:[h.jsx("button",{className:`trading-test-tab ${b==="long"?"active":""}`,onClick:()=>v("long"),children:"Long (Buy)"}),h.jsx("button",{className:`trading-test-tab ${b==="short"?"active":""}`,onClick:()=>v("short"),children:"Short (Sell)"})]}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Interactive Price-Amount Chart"}),h.jsx("div",{className:"trading-test-chart-controls",children:h.jsxs("div",{className:"trading-test-chart-info",children:[h.jsxs("span",{children:["Orders on chart: ",y.length]}),h.jsxs("span",{onClick:()=>R(!0),style:{cursor:"pointer",textDecoration:"underline"},title:"Click to configure price range",children:["Price range: ",l.toLocaleString()," -"," ",u.toLocaleString()," USDC"]})]})}),h.jsx(fY,{minPrice:l,maxPrice:u,orders:y,pendingOrders:C,onAddOrder:ce,onRemoveOrder:me,currentPrice:f,markPrice:G!=null&&G.mark_price?parseFloat(G.mark_price):null}),h.jsxs("div",{className:"price-amount-chart-instructions",children:[h.jsx("p",{children:"Click on the chart to add orders. Click on existing orders to remove them."}),h.jsx("p",{children:"Y-axis: Price (USDC) | X-axis: Amount (BTC)"})]})]}),h.jsxs("div",{className:"App-section",children:[h.jsx("h2",{children:"Order Submission"}),h.jsxs("div",{className:"trading-test-submission-buttons",children:[h.jsx(xY,{onClick:I,disabled:y.length===0}),h.jsx(gY,{onClick:Fe,disabled:_||!n||!P,orderMode:m}),h.jsx(mY,{onClick:ct,disabled:_||y.length===0||!n||!P,orderCount:y.length})]}),h.jsx("h2",{children:"Pending Orders Management"}),h.jsxs("div",{className:"trading-test-pending-orders-controls",children:[h.jsx(bY,{onClick:Ne,disabled:!n||!P,pendingCount:C.length}),h.jsxs("div",{className:"trading-test-cancel-buttons",children:[h.jsx(Mg,{onClick:()=>He("long"),disabled:_||!n||!P,filter:"long"}),h.jsx(Mg,{onClick:()=>He("short"),disabled:_||!n||!P,filter:"short"}),h.jsx(Mg,{onClick:()=>He("all"),disabled:_||!n||!P,filter:"all"})]})]})]}),T.length>0&&h.jsxs("div",{className:"trading-test-results",children:[h.jsx("h2",{children:"Test Results"}),h.jsxs("div",{className:"trading-test-results-summary",children:[h.jsxs("div",{children:["Total: ",T.length," | Success:"," ",T.filter(q=>q.success).length," | Failed:"," ",T.filter(q=>!q.success).length]}),h.jsx("button",{onClick:()=>N([]),className:"trading-test-button-secondary",children:"Clear Results"})]}),h.jsx("div",{className:"trading-test-results-list",children:T.slice(-20).map((q,be)=>h.jsx("div",{className:`trading-test-result-item ${q.success?"success":"error"}`,children:h.jsxs("div",{children:[h.jsxs("strong",{children:[q.success?"":""," Order @"," ",q.order.price.toFixed(2)," USDC"]}),h.jsxs("span",{children:["Amount: ",q.order.amount.toFixed(4)," BTC"]}),q.order.orderId&&h.jsxs("span",{children:["Order ID: ",q.order.orderId.substring(0,16),"..."]}),q.error&&h.jsx("span",{className:"error-text",children:q.error})]})},be))})]}),h.jsx(pY,{isOpen:A,onClose:()=>R(!1),minPrice:l,maxPrice:u,onMinPriceChange:q=>{c(q),he(!0)},onMaxPriceChange:q=>{d(q),he(!0)},markPrice:G,hasManualPriceChange:ee,onResetToAuto:()=>{if(G!=null&&G.mark_price){const q=parseFloat(G.mark_price);if(!isNaN(q)&&q>1e3){he(!1);const be=Math.round(q*1.5/z)*z,Q=Math.round(q/1.5/z)*z;Q>0&&be>Q&&(c(Q),d(be))}}},orderMode:m,onOrderModeChange:x,curveIntensity:w,onCurveIntensityChange:g,roundingStep:z,onRoundingStepChange:L})]})}const wY=k.createContext(void 0),rc="onboard_mnemonic",ic="onboard_wallet_address",vY=({children:t})=>{const[e,n]=k.useState(null),[s,r]=k.useState(null);k.useEffect(()=>{const l=localStorage.getItem(ic),c=localStorage.getItem(rc),u=localStorage.getItem("generatedAddress"),d=localStorage.getItem("mnemonic");l&&c?(n(l),r(c)):u&&d&&(n(u),r(d),localStorage.setItem(ic,u),localStorage.setItem(rc,d),localStorage.removeItem("generatedAddress"),localStorage.removeItem("mnemonic"))},[]),k.useEffect(()=>{const l=c=>{c.key===ic?n(c.newValue):c.key===rc&&r(c.newValue)};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const i=k.useCallback((l,c)=>{n(l),r(c),localStorage.setItem(ic,l),localStorage.setItem(rc,c)},[]),o=k.useCallback(()=>{n(null),r(null),localStorage.removeItem(ic),localStorage.removeItem(rc)},[]),a=k.useMemo(()=>({generatedAddress:e,mnemonic:s,setGeneratedData:i,clearGeneratedData:o}),[e,s,i,o]);return h.jsx(wY.Provider,{value:a,children:t})};function kY(){const{wasmStatus:t,isReady:e}=M6(),[n,s]=k.useState("main");return k.useEffect(()=>{const r=()=>{s("websocket-test")};return window.addEventListener("navigateToWebSocketTest",r),()=>{window.removeEventListener("navigateToWebSocketTest",r)}},[]),h.jsxs(vY,{children:[h.jsxs("div",{className:"App",children:[h.jsxs("header",{className:"App-header",children:[h.jsx("h1",{children:"Morm SDK"}),h.jsx("p",{children:"Test WebAssembly integration for morm_signer with Agent Delegation"}),h.jsxs("nav",{style:{marginTop:"1rem",display:"flex",gap:"1rem"},children:[h.jsx("button",{onClick:()=>s("main"),style:{padding:"0.5rem 1rem",backgroundColor:n==="main"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Morm Signer"}),h.jsx("button",{onClick:()=>s("sdk-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="sdk-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"SDK Trade API"}),h.jsx("button",{onClick:()=>s("websocket-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="websocket-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"WebSocket Test"}),h.jsx("button",{onClick:()=>s("hooks-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="hooks-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Hooks Test"}),h.jsx("button",{onClick:()=>s("layout-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="layout-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Layout Test"}),h.jsx("button",{onClick:()=>s("trading-test"),style:{padding:"0.5rem 1rem",backgroundColor:n==="trading-test"?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Trading Test"})]})]}),h.jsx("main",{className:"App-main",children:n==="sdk-test"?h.jsx(dA,{}):n==="websocket-test"?h.jsx(PO,{}):n==="layout-test"?h.jsx(SL,{}):n==="hooks-test"?h.jsx(L$,{}):n==="trading-test"?h.jsx(yY,{}):h.jsxs(h.Fragment,{children:[h.jsx(tA,{status:t}),e&&h.jsxs("div",{className:"App-content",children:[h.jsx("div",{className:"App-section",children:h.jsx(QD,{})}),h.jsx("div",{className:"App-section",children:h.jsx(JD,{})}),h.jsx("div",{className:"App-section",children:h.jsx(ZD,{})}),h.jsx("div",{className:"App-section",children:h.jsx(eA,{})})]}),t.error&&h.jsxs("div",{className:"App-error",children:[h.jsx("h3",{children:"Error Loading WASM"}),h.jsx("p",{children:t.error}),h.jsx("p",{children:"Make sure the morm_signer.wasm file is available in the public directory."})]})]})})]}),h.jsx(cL,{position:"bottom-right",toastOptions:{duration:4e3,style:{color:"var(--foreground)",border:"1px solid var(--border)"}}})]})}const SY=Ig.createRoot(document.getElementById("root"));SY.render(h.jsx(oe.StrictMode,{children:h.jsx(kY,{})}));
//# sourceMappingURL=index-DSjMy7vZ.js.map
